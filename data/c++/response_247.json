[{"tags": ["c++", "function", "parameters"], "comments": [{"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 7, "creation_date": 1570060743, "post_id": 58210729, "comment_id": 102798796, "body": "<code>gallons(wall);</code> -- What is your intent with this line of code?"}, {"owner": {"reputation": 33166, "user_id": 7509065, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Joseph Sible-Reinstate Monica", "link": "https://stackoverflow.com/users/7509065/joseph-sible-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1570060784, "post_id": 58210729, "comment_id": 102798801, "body": "In <code>laborCharges(hours);</code>, what do you think <code>hours</code> means?"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1570061393, "post_id": 58210729, "comment_id": 102798917, "body": "Where is your <code>gallons</code> function?"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 2, "creation_date": 1570062141, "post_id": 58210729, "comment_id": 102799063, "body": "Is <code>gallons</code> a variable or a function?  The statement <code>gallons(wall)</code> indicates <code>gallons</code> is a function, however, <code>hours(gallons)</code> indicates that <code>gallons</code> is a variable.  To complicate matters, you don&#39;t have a variable declaration or function declaration for <code>gallons</code>."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 2, "creation_date": 1570064547, "post_id": 58210729, "comment_id": 102799509, "body": "You need to distinguish clearly between variables and functions. You&#39;ve defined <code>hours</code> as both (you have a variable <code>int hours;</code> defined in side your function <code>void hours(int gallons)</code>, which it&#39;s illegal, but it&#39;s confusing and a bad idea). Do you want your <code>hours()</code> function to return a value? If so, you need to define it as something like <code>int hours(int gallons)</code>."}, {"owner": {"reputation": 39, "user_id": 12156468, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f818192d77ae55dbacc6d1078f90ddc?s=128&d=identicon&r=PG&f=1", "display_name": "hcas", "link": "https://stackoverflow.com/users/12156468/hcas"}, "edited": false, "score": 0, "creation_date": 1570077630, "post_id": 58210729, "comment_id": 102801656, "body": "I changed my function name to getSomething and kept my variables same. It fixed that problem, thanks."}], "answers": [{"tags": [], "owner": {"reputation": 73, "user_id": 6463386, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/254e3ae3a5b84c2b9bcf382693830192?s=128&d=identicon&r=PG", "display_name": "Gyubong Lee", "link": "https://stackoverflow.com/users/6463386/gyubong-lee"}, "is_accepted": true, "score": 1, "last_activity_date": 1570065115, "last_edit_date": 1570065115, "creation_date": 1570064810, "answer_id": 58211134, "question_id": 58210729, "link": "https://stackoverflow.com/questions/58210729/c-argument-of-type-voidint-wall-is-incompatible-with-parameter-of-type/58211134#58211134", "title": "C++ argument of type &quot;void(*)(int wall) is incompatible with parameter of type &quot;int&quot;", "body": "<pre><code>#include &lt;iostream&gt;\n\nusing namespace std;\n\nvoid hours(int gallons);\n\nint gallons(int wall) \n{\n    return wall * wall;\n}\n\nvoid hours(int gallons)\n\n{\n    int hours;\n\n    hours = gallons * 8;\n\n    cout &lt;&lt; \"Hours of labor required: \" &lt;&lt; hours &lt;&lt; endl;\n}\n\nint main()\n{\n    int wall;\n    int pricePaint;\n\n    cout &lt;&lt; \"Enter square feet of wall: \";\n    cin &gt;&gt; wall;\n\n    cout &lt;&lt; \"Enter price of paint per gallon: \";\n    cin &gt;&gt; pricePaint;\n\n    hours(gallons(wall));\n\n    return 0;\n\n}\n</code></pre>\n\n<p>You may want this kind of code.</p>\n\n<p>In your code, 'gallons' in the main function is treated as a function because 'gallons' is a function name.</p>\n\n<p>But, You do not want to use a function as a argument, but rather a function's return value.</p>\n\n<p>So you just need to fix the code like above.</p>\n"}], "owner": {"reputation": 39, "user_id": 12156468, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f818192d77ae55dbacc6d1078f90ddc?s=128&d=identicon&r=PG&f=1", "display_name": "hcas", "link": "https://stackoverflow.com/users/12156468/hcas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 211, "favorite_count": 0, "accepted_answer_id": 58211134, "answer_count": 1, "score": 0, "last_activity_date": 1570071411, "creation_date": 1570060553, "last_edit_date": 1570071411, "question_id": 58210729, "link": "https://stackoverflow.com/questions/58210729/c-argument-of-type-voidint-wall-is-incompatible-with-parameter-of-type", "title": "C++ argument of type &quot;void(*)(int wall) is incompatible with parameter of type &quot;int&quot;", "body": "<p>I'm pretty new to C++, I'm not sure how to correct the error. This is part of my code, the error appears in my main function.</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\n// Function declaration\nvoid gallons(int wall);\nvoid hours(int gallons);\nvoid costPaint(int gallons, int pricePaint);\nvoid laborCharges(int hours);\nvoid totalCost(int costPaint, int laborCharges);\n\n // Function definition\n void gallons(int wall)\n {\n   int gallons;\n\n   gallons = wall / 112;\n\n   cout &lt;&lt; \"Number of gallons of paint required: \" &lt;&lt; gallons &lt;&lt; endl;\n\n    }\n\n  // Function definition\n  void hours(int gallons)\n  {\n    int hours;\n\n    hours = gallons * 8;\n\n    cout &lt;&lt; \"Hours of labor required: \" &lt;&lt; hours &lt;&lt; endl;\n\n\n  }\n\n  // Function definition\n  void costPaint(int gallons, int pricePaint)\n  {\n    int costPaint;\n\n    costPaint = gallons * pricePaint;\n\n    cout &lt;&lt; \"The cost of paint: \" &lt;&lt; costPaint &lt;&lt; endl;\n  }\n\n  // Function definition\n     void laborCharges(int hours)\n  {\n    int laborCharges;\n\n    laborCharges = hours * 35;\n\n     cout &lt;&lt; \"The labor charge: \" &lt;&lt; laborCharges &lt;&lt; endl;\n   }\n\n  // Funtion definition\n  void totalCost(int costPaint, int laborCharges)\n   {\n      int totalCost;\n\n      totalCost = costPaint + laborCharges;\n\n      cout &lt;&lt; \"The total cost of the job: \" &lt;&lt; totalCost &lt;&lt; endl;\n    }\n\n    // The main method\n    int main()\n    {\n    int wall;\n    int pricePaint;\n\n    cout &lt;&lt; \"Enter square feet of wall: \";\n    cin &gt;&gt; wall;\n\n    cout &lt;&lt; \"Enter price of paint per gallon: \";\n    cin &gt;&gt; pricePaint;\n\n    gallons(wall);\n\n    hours(gallons); // here's where the error is\n\n    costPaint(gallons, pricePaint); // here's where the error is\n\n    laborCharges(hours); // here's where the error is \n\n    return 0;\n\n        }\n</code></pre>\n\n<p>This is where I keep getting the error \" C++ argument of type \"void(*)(int wall) is incompatible with parameter of type \"int\" \" I get it hours, costPaint, and labor charges. If I can figure out how to fix the first one I can fix all three since its essentially the same issue.</p>\n"}, {"tags": ["c++", "c", "multithreading", "mutex", "semaphore"], "comments": [{"owner": {"reputation": 81087, "user_id": 104458, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/cc46b8a10ecb92e61aaeb1efe436a0c8?s=128&d=identicon&r=PG", "display_name": "selbie", "link": "https://stackoverflow.com/users/104458/selbie"}, "edited": false, "score": 0, "creation_date": 1570059260, "post_id": 58210460, "comment_id": 102798533, "body": "This is trivial with a <code>std::conditional_variable</code>.  Can you use that?"}, {"owner": {"reputation": 1465, "user_id": 1513773, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/gtUGB.jpg?s=128&g=1", "display_name": "A. Mashreghi", "link": "https://stackoverflow.com/users/1513773/a-mashreghi"}, "reply_to_user": {"reputation": 81087, "user_id": 104458, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/cc46b8a10ecb92e61aaeb1efe436a0c8?s=128&d=identicon&r=PG", "display_name": "selbie", "link": "https://stackoverflow.com/users/104458/selbie"}, "edited": false, "score": 0, "creation_date": 1570059932, "post_id": 58210460, "comment_id": 102798649, "body": "@selbie I prefer an answer that can work on plain C as well. However, I&#39;d like to know your solution as well."}, {"owner": {"reputation": 3734, "user_id": 3537677, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e05436d74c08a9efa7db860df7bbf01f?s=128&d=identicon&r=PG", "display_name": "Superlokkus", "link": "https://stackoverflow.com/users/3537677/superlokkus"}, "edited": false, "score": 0, "creation_date": 1570059978, "post_id": 58210460, "comment_id": 102798659, "body": "Tell us more about i: I guess it is an element in all natural numbers above 0? Do you know its upper bound? I assume from your question its consecutive? Which C++ standard? C++20 ok?"}, {"owner": {"reputation": 1465, "user_id": 1513773, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/gtUGB.jpg?s=128&g=1", "display_name": "A. Mashreghi", "link": "https://stackoverflow.com/users/1513773/a-mashreghi"}, "edited": false, "score": 0, "creation_date": 1570060080, "post_id": 58210460, "comment_id": 102798674, "body": "Yes, n is a natural and positive number. And i is just a counter from 1 to n."}, {"owner": {"reputation": 81087, "user_id": 104458, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/cc46b8a10ecb92e61aaeb1efe436a0c8?s=128&d=identicon&r=PG", "display_name": "selbie", "link": "https://stackoverflow.com/users/104458/selbie"}, "edited": false, "score": 0, "creation_date": 1570060153, "post_id": 58210460, "comment_id": 102798681, "body": "If you want an answer in &quot;C&quot;, why did you tag the question as C++ ?"}, {"owner": {"reputation": 3734, "user_id": 3537677, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e05436d74c08a9efa7db860df7bbf01f?s=128&d=identicon&r=PG", "display_name": "Superlokkus", "link": "https://stackoverflow.com/users/3537677/superlokkus"}, "edited": false, "score": 0, "creation_date": 1570060194, "post_id": 58210460, "comment_id": 102798695, "body": "Yeah that is miss leading, every language has a different answer, even often with C and C++, luckily my answer works in both."}, {"owner": {"reputation": 1465, "user_id": 1513773, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/gtUGB.jpg?s=128&g=1", "display_name": "A. Mashreghi", "link": "https://stackoverflow.com/users/1513773/a-mashreghi"}, "reply_to_user": {"reputation": 81087, "user_id": 104458, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/cc46b8a10ecb92e61aaeb1efe436a0c8?s=128&d=identicon&r=PG", "display_name": "selbie", "link": "https://stackoverflow.com/users/104458/selbie"}, "edited": false, "score": 0, "creation_date": 1570060290, "post_id": 58210460, "comment_id": 102798716, "body": "@selbie well they&#39;re not mutually exclusive. C++ covers C. But as I said I just prefer C answers but I&#39;ll edit the question to cover both."}, {"owner": {"reputation": 3734, "user_id": 3537677, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e05436d74c08a9efa7db860df7bbf01f?s=128&d=identicon&r=PG", "display_name": "Superlokkus", "link": "https://stackoverflow.com/users/3537677/superlokkus"}, "edited": false, "score": 0, "creation_date": 1570060899, "post_id": 58210460, "comment_id": 102798819, "body": "@A.Mashreghi Be are C++ and C are different, meanwhile very different languages. C++ is not C with classes anymore!"}], "answers": [{"comments": [{"owner": {"reputation": 1465, "user_id": 1513773, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/gtUGB.jpg?s=128&g=1", "display_name": "A. Mashreghi", "link": "https://stackoverflow.com/users/1513773/a-mashreghi"}, "edited": false, "score": 0, "creation_date": 1570062567, "post_id": 58210601, "comment_id": 102799145, "body": "Thanks. But I accepted the other answer because personally I think a while loop is a bit wasteful. By the way, I don&#39;t think it works in C; atomic was introduced in C++11."}, {"owner": {"reputation": 3734, "user_id": 3537677, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e05436d74c08a9efa7db860df7bbf01f?s=128&d=identicon&r=PG", "display_name": "Superlokkus", "link": "https://stackoverflow.com/users/3537677/superlokkus"}, "reply_to_user": {"reputation": 1465, "user_id": 1513773, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/gtUGB.jpg?s=128&g=1", "display_name": "A. Mashreghi", "link": "https://stackoverflow.com/users/1513773/a-mashreghi"}, "edited": false, "score": 1, "creation_date": 1570119937, "post_id": 58210601, "comment_id": 102821894, "body": "Nope C got atomics since C11 too: <a href=\"https://en.cppreference.com/w/c/atomic\" rel=\"nofollow noreferrer\">en.cppreference.com/w/c/atomic</a>"}], "tags": [], "owner": {"reputation": 3734, "user_id": 3537677, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e05436d74c08a9efa7db860df7bbf01f?s=128&d=identicon&r=PG", "display_name": "Superlokkus", "link": "https://stackoverflow.com/users/3537677/superlokkus"}, "is_accepted": false, "score": 1, "last_activity_date": 1570060835, "last_edit_date": 1570060835, "creation_date": 1570059395, "answer_id": 58210601, "question_id": 58210460, "link": "https://stackoverflow.com/questions/58210460/c-c-single-semaphore-of-type-sem-t-to-print-numbers-in-order/58210601#58210601", "title": "C/C++ - Single semaphore of type sem_t to print numbers in order", "body": "<p>Thats a good question although, I fear you might have a XY problem since I can not imagine a good reason for your problem scenario. Never the less, after 1-2 minutes I came up with 2 solutions with pros and cons, but I think one is perfect for you: </p>\n\n<p>A. When your threads are almost done the same time and or need their print ASAP you could use a shared <code>std::atomic&lt;T&gt;</code> with <code>T=unsigned,int,size_t,uint32_t</code> what ever you like, or any of the integer atomics in the C standard library when using C, initialise it with 0, and now every thread i busy waits until its value is i-1. If so, it prints and then adds 1 on the atomic. Of course since of the busy wait, you will have much CPU load when thread are waiting long, and slow down, when many are waiting. But you get your print ASAP</p>\n\n<p>B. You just store your result of thread i in a container, maybe along with its index, since I guess you want more to just print i, and after all threads are finished or periodically, sort this container and then print it.</p>\n\n<p>A.:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;atomic&gt;\n#include &lt;thread&gt;\n#include &lt;vector&gt;\n#include &lt;functional&gt;\n\nvoid thread_function(unsigned i, std::atomic&lt;unsigned&gt;&amp; atomic) {\n    while (atomic &lt; i - 1) {}\n    std::cout &lt;&lt; i &lt;&lt; \" \";\n    atomic += 1;\n}\n\nint main() {\n    std::atomic&lt;unsigned&gt; atomic = 0;\n\n    std::vector&lt;std::thread&gt; threads;\n    for (auto i : {3,1,2}) {\n        threads.push_back(std::thread(thread_function, i, std::ref(atomic)));\n    }\n    for (auto&amp; t : threads) {\n        t.join();\n    }\n    std::cout &lt;&lt; \"\\n\";\n}\n</code></pre>\n\n<p>Works also in C, just use the atomics there.</p>\n"}, {"comments": [{"owner": {"reputation": 1465, "user_id": 1513773, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/gtUGB.jpg?s=128&g=1", "display_name": "A. Mashreghi", "link": "https://stackoverflow.com/users/1513773/a-mashreghi"}, "edited": false, "score": 0, "creation_date": 1570062348, "post_id": 58210765, "comment_id": 102799108, "body": "Thanks yes, it is what I was looking for, I guess I&#39;ll try the pthread one myself. Nice use of unique_ptr to unlock the mutex ;)"}], "tags": [], "owner": {"reputation": 81087, "user_id": 104458, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/cc46b8a10ecb92e61aaeb1efe436a0c8?s=128&d=identicon&r=PG", "display_name": "selbie", "link": "https://stackoverflow.com/users/104458/selbie"}, "is_accepted": true, "score": 2, "last_activity_date": 1570061209, "last_edit_date": 1570061209, "creation_date": 1570060880, "answer_id": 58210765, "question_id": 58210460, "link": "https://stackoverflow.com/questions/58210460/c-c-single-semaphore-of-type-sem-t-to-print-numbers-in-order/58210765#58210765", "title": "C/C++ - Single semaphore of type sem_t to print numbers in order", "body": "<p>You can do this with a condition_variable in C++, which is equivalent to a <a href=\"https://linux.die.net/man/3/pthread_cond_init\" rel=\"nofollow noreferrer\">pthread_cond_t</a> with the pthreads library in C.</p>\n\n<p>What you want to share between threads is a pointer to a condition_variable, number, and a mutex to guard access to the number.</p>\n\n<pre><code>struct GlobalData\n{\n    std::condition_variable cv;\n    int currentValue;\n    std::mutex mut;\n};\n</code></pre>\n\n<p>Each thread simply invokes a function that waits for its number to be set:</p>\n\n<pre><code>void WaitForMyNumber(std::shared_ptr&lt;GlobalData&gt; gd, int number)\n{\n    std::unique_lock&lt;std::mutex&gt; lock(gd-&gt;mut);\n    while (gd-&gt;currentValue != number)\n    {\n        gd-&gt;cv.wait(lock);\n    }\n\n    std::cout &lt;&lt; number &lt;&lt; std::endl;\n    gd-&gt;currentValue++;\n    gd-&gt;cv.notify_all(); // notify all other threads that it can wake up and check\n}\n</code></pre>\n\n<p>And then a program to test it all out.  This one uses 10 threads.  You can modify it to use more and then have your own randomization algorithm of the numbers list. </p>\n\n<pre><code>int main()\n{\n    int numbers[10] = { 9, 1, 0, 7, 5, 3, 2, 8, 6, 4 };\n    std::shared_ptr&lt;GlobalData&gt; gd = std::make_shared&lt;GlobalData&gt;();\n    // gd-&gt;number is initialized to 0.\n\n    std::thread threads[10];\n\n    for (int i = 0; i &lt; 10; i++)\n    {\n        int num = numbers[i];\n        auto fn = [gd, num] {WaitForMyNumber(gd, num); };\n        threads[i] = std::move(std::thread(fn));\n    }\n\n    // wait for all the threads to finish\n    for (int i = 0; i &lt; 10; i++)\n    {\n        threads[i].join();\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>All of the above is in C++.  But it would be easy to transpose the above solution to C using <a href=\"https://www.cs.cmu.edu/afs/cs/academic/class/15492-f07/www/pthreads.html\" rel=\"nofollow noreferrer\">pthreads</a>.  But I'll leave that as an exercise for the OP.</p>\n\n<p>I'm not sure if this satisfies your \"one semaphore requirement\".  The mutex technically has a semaphore.  Not sure if the condition_variable itself has a semaphore for its implementation.</p>\n"}, {"tags": [], "owner": {"reputation": 1465, "user_id": 1513773, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/gtUGB.jpg?s=128&g=1", "display_name": "A. Mashreghi", "link": "https://stackoverflow.com/users/1513773/a-mashreghi"}, "is_accepted": false, "score": 0, "last_activity_date": 1570666264, "creation_date": 1570666264, "answer_id": 58313768, "question_id": 58210460, "link": "https://stackoverflow.com/questions/58210460/c-c-single-semaphore-of-type-sem-t-to-print-numbers-in-order/58313768#58313768", "title": "C/C++ - Single semaphore of type sem_t to print numbers in order", "body": "<p>The following code uses pthread_cond_t and works in C.</p>\n\n<pre><code>#include &lt;pthread.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\n#define n 100\n\nint counter = 0;\nint used[n];\n\npthread_cond_t cond = PTHREAD_COND_INITIALIZER;\npthread_mutex_t mutex = PTHREAD_MUTEX_INITIALIZER;\n\nvoid foo(void *given_number){\n    int number = (int)given_number;\n    pthread_mutex_lock(&amp;mutex);\n    while(counter != number){\n        pthread_cond_wait(&amp;cond, &amp;mutex);\n    }\n    printf(\"%d\\n\", number);\n    counter++;\n    pthread_cond_broadcast(&amp;cond);\n    pthread_mutex_unlock(&amp;mutex);\n}\n\nint get_random_number(){\n    while(1){\n        int x = rand()%n;\n        if(!used[x]){\n            used[x] = 1;\n            return x;\n        }\n    }\n}\n\nint main(){\n    pthread_t threads[n];\n    for(int i = 0; i &lt; n; i++){\n        int num = get_random_number();\n        pthread_create(&amp;threads[i], NULL, foo, (void *)num);    \n    }\n    for(int i = 0; i &lt; n; i++){\n        pthread_join(threads[i], NULL);\n    }\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 1465, "user_id": 1513773, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/gtUGB.jpg?s=128&g=1", "display_name": "A. Mashreghi", "link": "https://stackoverflow.com/users/1513773/a-mashreghi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 855, "favorite_count": 0, "accepted_answer_id": 58210765, "answer_count": 3, "score": 0, "last_activity_date": 1570666264, "creation_date": 1570058177, "last_edit_date": 1570060342, "question_id": 58210460, "link": "https://stackoverflow.com/questions/58210460/c-c-single-semaphore-of-type-sem-t-to-print-numbers-in-order", "title": "C/C++ - Single semaphore of type sem_t to print numbers in order", "body": "<p><strong>Problem:</strong> Let's say we have n threads where each thread receives a random unique number between 1 and n. And we want the threads to print the numbers in sorted order.</p>\n\n<p><strong>Trivial Solution (using n semaphore/mutex):</strong> We can use n mutex locks (or similarly semaphores) where thread i waits to acquire mutex lock number i and unlocks number i + 1. Also, thread 1 has no wait.</p>\n\n<p>However, I'm wondering if it's possible to simulate a similar logic <strong>using a single semaphore</strong> (of type sem_t) to implement the following logic: (i is a number between 1 to n inclusive)</p>\n\n<blockquote>\n  <p>Thread with number i as input, waits to acquire a count of (i-1) on the semaphore, and after\n  printing, releases a count of i. Needless to say, thread one does not\n  wait.</p>\n</blockquote>\n\n<p>I know that unlike Java, sem_t does not support arbitrary increase/decrease in the semaphore value. Moreover, writing a for loop to do (i-1) wait and i release won't work because of asynchrony.</p>\n\n<p>I've been looking for the answer for so long but couldn't find any. Is this possible in plain C? If not, is it possible in C++ using only one variable or semaphore? Overall, what is the least wasteful way to do this with ONE semaphore.</p>\n\n<p>Please feel free to edit the question since I'm new to multi-threaded programming.</p>\n"}, {"tags": ["c++", "windows", "winapi", "driver", "cdc"], "comments": [{"owner": {"reputation": 4398, "user_id": 3697264, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/5adc5afbd7a1145fdd762d872b4b43bb?s=128&d=identicon&r=PG", "display_name": "SPlatten", "link": "https://stackoverflow.com/users/3697264/splatten"}, "edited": false, "score": 0, "creation_date": 1570085531, "post_id": 58210448, "comment_id": 102803941, "body": "Try this:  &quot;msinfo32 /report msiout.txt&quot;, the information it generates may help."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user4256388"}, "edited": false, "score": 0, "creation_date": 1570110399, "post_id": 58215367, "comment_id": 102816831, "body": "Nothing changed. The usbser.sys should be installed on every windows, but only windows 10 have it &quot;signed&quot; by .inf file, in older versions of windows I need to sign it by myself using custom .inf file. But where I can find if the driver is already signed or not, that&#39;s the question."}, {"owner": {"reputation": 8787, "user_id": 6601582, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd0a2f69702729da5aaa628bc58811a7?s=128&d=identicon&r=PG&f=1", "display_name": "Rita Han", "link": "https://stackoverflow.com/users/6601582/rita-han"}, "edited": false, "score": 0, "creation_date": 1570172977, "post_id": 58215367, "comment_id": 102836968, "body": "@\u0422\u043e\u043c\u0430\u0441\u041f\u0435\u0442\u0440 Please check my update answer to see if it helps."}, {"owner": {"user_type": "does_not_exist", "display_name": "user4256388"}, "edited": false, "score": 0, "creation_date": 1570194103, "post_id": 58215367, "comment_id": 102846710, "body": "Now I can see it. After attach the device to the computer, the &quot;usbser.sys&quot; shows up in loaded drivers. It&#39;s there any way to check it without connecting the device? That would be very nice."}], "tags": [], "owner": {"reputation": 8787, "user_id": 6601582, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd0a2f69702729da5aaa628bc58811a7?s=128&d=identicon&r=PG&f=1", "display_name": "Rita Han", "link": "https://stackoverflow.com/users/6601582/rita-han"}, "is_accepted": true, "score": 0, "last_activity_date": 1570172948, "last_edit_date": 1570172948, "creation_date": 1570092175, "answer_id": 58215367, "question_id": 58210448, "link": "https://stackoverflow.com/questions/58210448/how-to-check-if-usb-cdc-driver-is-installed/58215367#58215367", "title": "How to check if USB CDC driver is installed", "body": "<p>The code sample you use is <a href=\"https://docs.microsoft.com/en-us/windows/win32/psapi/enumerating-all-device-drivers-in-the-system\" rel=\"nofollow noreferrer\">Enumerating All Device Drivers in the System</a>(loaded drivers).</p>\n\n<p>I test with a FTDI USB-to-UART device. With the device attached to PC (driver loaded in memory) I can list related drivers like below, otherwise I can't.</p>\n\n<p><a href=\"https://i.stack.imgur.com/4EJ7F.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/4EJ7F.png\" alt=\"enter image description here\"></a></p>\n\n<p>So trying to attach the USB CDC device and try again.</p>\n\n<p><strong>Update based on comment: \"But where I can find if the driver is already signed or not, that's the question.\"</strong></p>\n\n<p>Right click the *.sys file of the driver and check the digital signatures tab.</p>\n\n<p><a href=\"https://i.stack.imgur.com/hoJB4.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/hoJB4.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user4256388"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 302, "favorite_count": 0, "accepted_answer_id": 58215367, "answer_count": 1, "score": 0, "last_activity_date": 1570172948, "creation_date": 1570058121, "last_edit_date": 1570085133, "question_id": 58210448, "link": "https://stackoverflow.com/questions/58210448/how-to-check-if-usb-cdc-driver-is-installed", "title": "How to check if USB CDC driver is installed", "body": "<p>I need to install USB CDC driver (com port) to customers pc so my c++ mfc application works correctly. On windows 8 &amp; 10 the driver is pre-installed, the problem is older verions of windows.</p>\n\n<p>I have the driver from silabs, there is .cat, .inf and .exe files. After opening the installer - it just says <strong>\"Silicon Laboratories. Inc. (usbser) Ports (03/26/2014 6.1.7601.17514) - Ready to use\"</strong> after confirming the terms, nothing else.</p>\n\n<p>I tried <a href=\"https://docs.microsoft.com/en-us/windows/win32/psapi/enumerating-all-device-drivers-in-the-system\" rel=\"nofollow noreferrer\"><strong>this</strong></a> but there is no usbser.sys or something like that in the list. And also <a href=\"https://stackoverflow.com/questions/27144063/check-if-a-windows-driver-exists-for-a-given-device-id\"><strong>this</strong></a> but nothing like \"USB\\VID_1BA4&amp;PID_0002\" (which I found in .inf file) wasn't found. I also tried to search for ClassGUID (<strong>4D36E978-E325-11CE-BFC1-08002BE10318</strong>) &amp; class=ports in regedit. It's always found the same things, that's probably not what I'm looking for.</p>\n\n<p>What should I look for? What parameter is important? Thanks.</p>\n\n<p><strong>.inf file</strong></p>\n\n<pre><code>[Version]\nSignature=\"$WINDOWS NT$\"\nClass=Ports\nClassGUID={4D36E978-E325-11CE-BFC1-08002BE10318}\nProvider=%SILICONLABS%\nDriverVer=03/26/2014,6.1.7601.17514\nCatalogFile=SiLabs-CDC.cat\n\n[Manufacturer]\n%SILICONLABS%=DeviceList, NT, NTAMD64, NTIA64\n\n;------------------------------------------------------------------------------\n\n[DeviceList]\n%CDCDEVICE_1BA4_0002%=DriverInstall,USB\\VID_1BA4&amp;PID_0002\n%CDCDEVICE_2544_0003%=DriverInstall,USB\\VID_2544&amp;PID_0003\n%CDCDEVICE_10C4_0003%=DriverInstall,USB\\VID_10C4&amp;PID_0003\n%CDCDEVICE_2544_0008_02%=DriverInstall,USB\\VID_2544&amp;PID_0008&amp;MI_02\n%CDCDEVICE_10C4_0008_02%=DriverInstall,USB\\VID_10C4&amp;PID_0008&amp;MI_02\n\n[DeviceList.NT]\n%CDCDEVICE_1BA4_0002%=DriverInstall,USB\\VID_1BA4&amp;PID_0002\n%CDCDEVICE_2544_0003%=DriverInstall,USB\\VID_2544&amp;PID_0003\n%CDCDEVICE_10C4_0003%=DriverInstall,USB\\VID_10C4&amp;PID_0003\n%CDCDEVICE_2544_0008_02%=DriverInstall,USB\\VID_2544&amp;PID_0008&amp;MI_02\n%CDCDEVICE_10C4_0008_02%=DriverInstall,USB\\VID_10C4&amp;PID_0008&amp;MI_02\n\n[DeviceList.NTAMD64]\n%CDCDEVICE_1BA4_0002%=DriverInstall,USB\\VID_1BA4&amp;PID_0002\n%CDCDEVICE_2544_0003%=DriverInstall,USB\\VID_2544&amp;PID_0003\n%CDCDEVICE_10C4_0003%=DriverInstall,USB\\VID_10C4&amp;PID_0003\n%CDCDEVICE_2544_0008_02%=DriverInstall,USB\\VID_2544&amp;PID_0008&amp;MI_02\n%CDCDEVICE_10C4_0008_02%=DriverInstall,USB\\VID_10C4&amp;PID_0008&amp;MI_02\n\n[DeviceList.NTIA64]\n%CDCDEVICE_1BA4_0002%=DriverInstall,USB\\VID_1BA4&amp;PID_0002\n%CDCDEVICE_2544_0003%=DriverInstall,USB\\VID_2544&amp;PID_0003\n%CDCDEVICE_10C4_0003%=DriverInstall,USB\\VID_10C4&amp;PID_0003\n%CDCDEVICE_2544_0008_02%=DriverInstall,USB\\VID_2544&amp;PID_0008&amp;MI_02\n%CDCDEVICE_10C4_0008_02%=DriverInstall,USB\\VID_10C4&amp;PID_0008&amp;MI_02\n\n;------------------------------------------------------------------------------\n\n[DriverInstall]\nInclude=mdmcpq.inf\nCopyFiles=FakeModemCopyFileSection\nAddReg=SerialPropPageAddReg\n\n[DriverInstall.Services]\nInclude=mdmcpq.inf\nAddService = usbser, 0x00000002, DriverServiceInst\n\n[DriverServiceInst]\nDisplayName=%SERVICE%\nServiceType=1\nStartType=3\nErrorControl=1\nServiceBinary=%12%\\usbser.sys\n\n[SerialPropPageAddReg]\nHKR,,EnumPropPages32,,\"MsPorts.dll,SerialPortPropPageProvider\"\n\n;------------------------------------------------------------------------------\n\n[Strings]\nSILICONLABS = \"Silicon Laboratories, Inc.\"\nCDCDEVICE_1BA4_0002 = \"Silicon Labs CDC Serial port\"\nCDCDEVICE_2544_0003 = \"Silicon Labs CDC Serial port\"\nCDCDEVICE_10C4_0003 = \"Silicon Labs CDC Serial port\"\nCDCDEVICE_2544_0008_02 = \"Silicon Labs CDC Serial port\"\nCDCDEVICE_10C4_0008_02 = \"Silicon Labs CDC Serial port\"\nSERVICE   = \"USB CDC Serial Port Driver\"\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 4815, "user_id": 3087601, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/ad2f9879fa1dea6fd47a45052ad02a09?s=128&d=identicon&r=PG&f=1", "display_name": "Zereges", "link": "https://stackoverflow.com/users/3087601/zereges"}, "edited": false, "score": 0, "creation_date": 1570057127, "post_id": 58210322, "comment_id": 102798136, "body": "Have you tried <code>bool all_less = vec_a.size() == vec_b.size() &amp;&amp; vec_a &lt; vec_b</code>?"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 4, "creation_date": 1570057216, "post_id": 58210322, "comment_id": 102798159, "body": "<code>std::vector</code> has an <a href=\"https://en.cppreference.com/w/cpp/container/vector/operator_cmp\" rel=\"nofollow noreferrer\">operator &lt;</a>."}, {"owner": {"reputation": 1961, "user_id": 7022459, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/646lY.png?s=128&g=1", "display_name": "Apollys supports Monica", "link": "https://stackoverflow.com/users/7022459/apollys-supports-monica"}, "reply_to_user": {"reputation": 4815, "user_id": 3087601, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/ad2f9879fa1dea6fd47a45052ad02a09?s=128&d=identicon&r=PG&f=1", "display_name": "Zereges", "link": "https://stackoverflow.com/users/3087601/zereges"}, "edited": false, "score": 3, "creation_date": 1570057228, "post_id": 58210322, "comment_id": 102798163, "body": "@Zereges that performs lexicographic comparison, see <a href=\"https://en.cppreference.com/w/cpp/container/vector/operator_cmp\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/container/vector/operator_cmp</a>"}, {"owner": {"reputation": 1961, "user_id": 7022459, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/646lY.png?s=128&g=1", "display_name": "Apollys supports Monica", "link": "https://stackoverflow.com/users/7022459/apollys-supports-monica"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1570057266, "post_id": 58210322, "comment_id": 102798169, "body": "@PaulMcKenzie Yes it does, and if you&#39;ll read the doc you linked you&#39;ll see it doesn&#39;t do what I&#39;ve asked for."}, {"owner": {"reputation": 4815, "user_id": 3087601, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/ad2f9879fa1dea6fd47a45052ad02a09?s=128&d=identicon&r=PG&f=1", "display_name": "Zereges", "link": "https://stackoverflow.com/users/3087601/zereges"}, "edited": false, "score": 3, "creation_date": 1570057540, "post_id": 58210322, "comment_id": 102798213, "body": "Maybe <a href=\"https://en.cppreference.com/w/cpp/algorithm/mismatch\" rel=\"nofollow noreferrer\"><code>std::mismatch</code></a> can be used."}, {"owner": {"reputation": 1961, "user_id": 7022459, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/646lY.png?s=128&g=1", "display_name": "Apollys supports Monica", "link": "https://stackoverflow.com/users/7022459/apollys-supports-monica"}, "edited": false, "score": 0, "creation_date": 1570057771, "post_id": 58210322, "comment_id": 102798254, "body": "Ahah! Yep, though a little convoluted logically.  Unfortunately I think it may end up being harder to read than the vanilla method."}], "answers": [{"comments": [{"owner": {"reputation": 1961, "user_id": 7022459, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/646lY.png?s=128&g=1", "display_name": "Apollys supports Monica", "link": "https://stackoverflow.com/users/7022459/apollys-supports-monica"}, "edited": false, "score": 2, "creation_date": 1570059144, "post_id": 58210438, "comment_id": 102798517, "body": "I&#39;m not sure 145 characters qualifies as a one liner under any reasonable code style, haha.  (But you did find the standard library function to answer my question!)"}, {"owner": {"reputation": 4815, "user_id": 3087601, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/ad2f9879fa1dea6fd47a45052ad02a09?s=128&d=identicon&r=PG&f=1", "display_name": "Zereges", "link": "https://stackoverflow.com/users/3087601/zereges"}, "reply_to_user": {"reputation": 1961, "user_id": 7022459, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/646lY.png?s=128&g=1", "display_name": "Apollys supports Monica", "link": "https://stackoverflow.com/users/7022459/apollys-supports-monica"}, "edited": false, "score": 0, "creation_date": 1570085589, "post_id": 58210438, "comment_id": 102803967, "body": "@Apollys Yeah, I came up with slightly shorter version."}], "tags": [], "owner": {"reputation": 4815, "user_id": 3087601, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/ad2f9879fa1dea6fd47a45052ad02a09?s=128&d=identicon&r=PG&f=1", "display_name": "Zereges", "link": "https://stackoverflow.com/users/3087601/zereges"}, "is_accepted": false, "score": 3, "last_activity_date": 1570092884, "last_edit_date": 1570092884, "creation_date": 1570058040, "answer_id": 58210438, "question_id": 58210322, "link": "https://stackoverflow.com/questions/58210322/c-binary-predicate-version-of-stdall-of/58210438#58210438", "title": "C++ binary predicate version of std::all_of()?", "body": "<p>You can use <code>std::mismatch</code>, although it's a bit harder to comprehend (but is a one liner, yay)</p>\n\n<pre><code>std::vector&lt;int&gt; vec_a{1, 2, 3};\nstd::vector&lt;int&gt; vec_b{2, 3, 4};\n\nbool all_less = std::mismatch(vec_a.begin(), vec_a.end(), vec_b.begin(), vec_b.end(), std::less&lt;&gt;{}) == std::make_pair(vec_a.end(), vec_b.end());\n</code></pre>\n\n<p>You can help it a bit by introducing a function for containers and not ranges. I.e</p>\n\n<pre><code>template&lt;typename Container&gt;\nbool is_all_less(const Container&amp; c1, const Container&amp; c2)\n{\n    return std::mismatch(c1.begin(), c2.end(), c1.begin(), c2.end(), std::less&lt;&gt;{}) == std::make_pair(c1.end(), c2.end());\n}\n</code></pre>\n\n<p>and then</p>\n\n<pre><code>bool all_less = is_all_less(vec_a, vec_b);\n</code></pre>\n\n<h3>Edit</h3>\n\n<p>If you are sure that containers are of the same <code>size</code>, you can also do this</p>\n\n<pre><code>bool all_less = std::mismatch(vec_a.begin(), vec_a.end(), vec_b.begin(), std::less&lt;&gt;{}).first == vec_a.end();\n</code></pre>\n"}], "owner": {"reputation": 1961, "user_id": 7022459, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/646lY.png?s=128&g=1", "display_name": "Apollys supports Monica", "link": "https://stackoverflow.com/users/7022459/apollys-supports-monica"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 182, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1570092884, "creation_date": 1570056957, "question_id": 58210322, "link": "https://stackoverflow.com/questions/58210322/c-binary-predicate-version-of-stdall-of", "title": "C++ binary predicate version of std::all_of()?", "body": "<p>Given two <code>std::vector&lt;T&gt;</code>s, <code>vec_a</code> and <code>vec_b</code>, does the standard library include a function to test if every element in <code>vec_a</code> is less than its positionally corresponding element in <code>vec_b</code>, assuming the binary <code>operator&lt;</code> is defined for operands of type <code>T</code>?</p>\n\n<p>I would think something like a binary predicate version of <a href=\"https://en.cppreference.com/w/cpp/algorithm/all_any_none_of\" rel=\"nofollow noreferrer\"><code>std::all_of</code></a> would do the trick perfectly, but I'm not sure if it exists, or what it would be called if it did.  Perhaps also some combination of <code>std::all_of</code> applied to the output of another function which performs elementwise comparison would work, if such a thing exists.</p>\n\n<hr>\n\n<p>Example of desired functionality:</p>\n\n<pre><code>std::vector&lt;int&gt; vec_a{1, 2, 3};\nstd::vector&lt;int&gt; vec_b{2, 3, 4};\n\nbool all_less = vec_a.size() == vec_b.size();\nfor (size_t i = 0; all_less &amp;&amp; (i &lt; vec_a.size()); ++i) {\n    all_less = vec_a[i] &lt; vec_b[i];\n}\n\n// all_less now holds desired result\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 1, "creation_date": 1570055866, "post_id": 58210177, "comment_id": 102797845, "body": "<a href=\"https://en.cppreference.com/w/cpp/language/initializer_list\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/language/initializer_list</a>"}, {"owner": {"reputation": 17298, "user_id": 1540468, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2f7d0c7668a2f3b53cf22c01ae63f32b?s=128&d=identicon&r=PG", "display_name": "Paul Rooney", "link": "https://stackoverflow.com/users/1540468/paul-rooney"}, "edited": false, "score": 0, "creation_date": 1570056505, "post_id": 58210177, "comment_id": 102797997, "body": "See <a href=\"https://stackoverflow.com/questions/7665021/c-member-initialization-list\">this</a> and <a href=\"https://stackoverflow.com/questions/926752/why-should-i-prefer-to-use-member-initialization-list\">this</a>."}], "owner": {"reputation": 101, "user_id": 11602729, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "TerminatorOfTerminators", "link": "https://stackoverflow.com/users/11602729/terminatorofterminators"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 29, "favorite_count": 0, "closed_date": 1570056896, "answer_count": 0, "score": 0, "last_activity_date": 1570055734, "creation_date": 1570055734, "question_id": 58210177, "link": "https://stackoverflow.com/questions/58210177/c-inheritance-and-the-colon-syntax-used-on-field-variable-question", "closed_reason": "Duplicate", "title": "C++ Inheritance and the Colon syntax used on field variable question", "body": "<p>for the code snippet below, what does the colon in the line <code>Node(int elt = 0,Node * p = NULL):data(elt),next(p){}</code> do exactly? From what I've searched, it seems the colon used is the inheritance syntax, but in this case, I assume <code>Node(int elt = 0,Node * p = NULL)</code> is a constructor for the Node structure, and it's inheriting or perhaps accessing the <code>data(elt)</code> field variable? But <code>data</code> is a primitive data type, why is there a parameter \"elt\" inside of it?\nI'll appreciate it very much if anyone can explain the concepts. Thanks.</p>\n\n<pre><code>class List{\n  public:\n    void addAt(int pos, int elt);\n    void delAll(int x);\n  private:\n    struct Node{\n      int data;\n      Node * next;\n      Node(int elt = 0,Node * p = NULL):data(elt),next(p){}\n  };\n};\n</code></pre>\n"}, {"tags": ["c++", "templates", "variadic-templates"], "answers": [{"comments": [{"owner": {"reputation": 63, "user_id": 12156359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/afbf189db50bf26a1b24d7f145f7dade?s=128&d=identicon&r=PG&f=1", "display_name": "alittlebirdy", "link": "https://stackoverflow.com/users/12156359/alittlebirdy"}, "edited": false, "score": 0, "creation_date": 1570056395, "post_id": 58210219, "comment_id": 102797974, "body": "So basically <code>FooGroup</code> is just a declaration to say it takes in a variadic list of template parameters which is <code>FooTypes</code> in this case. Are there times where this is necessary?"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 63, "user_id": 12156359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/afbf189db50bf26a1b24d7f145f7dade?s=128&d=identicon&r=PG&f=1", "display_name": "alittlebirdy", "link": "https://stackoverflow.com/users/12156359/alittlebirdy"}, "edited": false, "score": 0, "creation_date": 1570059162, "post_id": 58210219, "comment_id": 102798519, "body": "@alittlebirdy it is hard to answer that without seeing exactly how <code>FooGroup</code>, <code>BarGroup</code> , and <code>TEST</code> actually use their template parameters."}], "tags": [], "owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "is_accepted": true, "score": 0, "last_activity_date": 1570056063, "creation_date": 1570056063, "answer_id": 58210219, "question_id": 58210143, "link": "https://stackoverflow.com/questions/58210143/understanding-variadic-templates/58210219#58210219", "title": "Understanding Variadic Templates", "body": "<p>This code</p>\n\n<pre><code>template &lt;typename... T&gt;\nstruct FooGroup;\n</code></pre>\n\n<p>declare <code>FooGroup</code> as a <code>struct</code> that receive a variadic list of type template parameter.</p>\n\n<pre><code>template &lt;typename... FooTypes, typename... BarTypes&gt;\nstruct TEST&lt;FooGroup&lt;FooTypes...&gt;, BarGroup&lt;BarTypes...&gt;&gt;\n</code></pre>\n\n<p>is part of template specialization.</p>\n\n<p>I suppose that <code>TEST</code> is declared as follows</p>\n\n<pre><code>template &lt;typename, typename&gt;\nstruct TEST;\n</code></pre>\n\n<p>so receiving two template types parameter.</p>\n\n<p>With  </p>\n\n<pre><code>template &lt;typename... FooTypes, typename... BarTypes&gt;\nstruct TEST&lt;FooGroup&lt;FooTypes...&gt;, BarGroup&lt;BarTypes...&gt;&gt;\n</code></pre>\n\n<p>you declare a partial specialization of <code>TEST</code> in case the first template parameter is in the form <code>FooGroup&lt;FooTypes...&gt;</code> (where <code>FooTypes...</code> is a variadic list of template parameters) and the second template parameter is in the form <code>BarGroup&lt;BarTypes...&gt;</code> (where I suppose <code>BarGroup</code> is defined almost as <code>FooGroup</code> and <code>BarTypes...</code> is another variadic list of template parameters)</p>\n"}], "owner": {"reputation": 63, "user_id": 12156359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/afbf189db50bf26a1b24d7f145f7dade?s=128&d=identicon&r=PG&f=1", "display_name": "alittlebirdy", "link": "https://stackoverflow.com/users/12156359/alittlebirdy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "accepted_answer_id": 58210219, "answer_count": 1, "score": 0, "last_activity_date": 1570056063, "creation_date": 1570055471, "question_id": 58210143, "link": "https://stackoverflow.com/questions/58210143/understanding-variadic-templates", "title": "Understanding Variadic Templates", "body": "<p>Trying to understand this bit of code using variadic templates:</p>\n\n<pre><code>template &lt;typename... T&gt;\nstruct FooGroup;\n\ntemplate &lt;typename... FooTypes, typename... BarTypes&gt;\nstruct TEST&lt;FooGroup&lt;FooTypes...&gt;, BarGroup&lt;BarTypes...&gt;&gt;\n</code></pre>\n\n<p>I know variadic templates allows you to pass in unknown type of unknown amount. However, this is confusing to me. Can anyone shed some light?</p>\n"}, {"tags": ["c++", "utf-8", "stdstring"], "answers": [{"comments": [{"owner": {"reputation": 213, "user_id": 5483401, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e241a0c8e79e6ea96728029ed9fc0ab?s=128&d=identicon&r=PG&f=1", "display_name": "Anonymous Anonymous", "link": "https://stackoverflow.com/users/5483401/anonymous-anonymous"}, "edited": false, "score": 0, "creation_date": 1570056984, "post_id": 58210146, "comment_id": 102798101, "body": "But the C++-Standard still requires char to have an size of exactely 1 byte. Assuming the standard 8 bit = 1 byte, any utf8-char will allways fit into <code>char</code>"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 213, "user_id": 5483401, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e241a0c8e79e6ea96728029ed9fc0ab?s=128&d=identicon&r=PG&f=1", "display_name": "Anonymous Anonymous", "link": "https://stackoverflow.com/users/5483401/anonymous-anonymous"}, "edited": false, "score": 0, "creation_date": 1570057804, "post_id": 58210146, "comment_id": 102798258, "body": "A UTF-8 <i>encoded codeunit</i> can be made to fit in a <code>char</code>, yes. But UTF-8 is an 8-bit encoding, but <code>char</code> may be either <i>signed</i> or <i>unsigned</i> depending on compiler implementation. In case of <i>signed</i>, all codeunits of any Unicode codepoint above U+007F will occupy the sign bit of each <code>char</code>. Also note that although <code>char</code> is guaranteed to be 1 byte in size, a byte is not guaranteed to be 8 bits on all platforms (though on most, it is) - see <code>CHAR_BIT</code> in <code>limits.h</code>. UTF-7, on the other hand, would fit nicely in a <code>char</code> string without using the sign bit at all."}], "tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": false, "score": 2, "last_activity_date": 1570057685, "last_edit_date": 1570057685, "creation_date": 1570055486, "answer_id": 58210146, "question_id": 58210104, "link": "https://stackoverflow.com/questions/58210104/is-there-such-a-thing-as-non-utf8-character/58210146#58210146", "title": "Is there such a thing as non-utf8 character", "body": "<p><code>std::string</code> only knows about raw <code>char</code> values, it knows nothing about particular character encodings that use <code>char</code> to hold encoded values.</p>\n\n<p>Many common UTF-8 implementations use <code>char</code> to hold encoded codeunits (though C++20 will introduce <code>char8_t</code> and <code>std::u8string</code> for this purpose instead). But other character encodings (Windows-12##, ISO-8859-#, etc) can also fit their encoded values in <code>char</code> elements, too.</p>\n\n<p>Any <code>char</code> value that falls within the ASCII range (0x00 .. 0x7F) will fit in 1 <code>char</code> and map to the same codepoint value in Unicode (U+0000 .. U+007F), but any <code>char</code> value in the ANSI range but not in the ASCII range (0x80 .. 0xFF) is subject to interpretation by whatever character encoding created the <code>char</code> values.  Some encodings use 1 <code>char</code> per character, some use multiple <code>char</code>s.</p>\n\n<p>So yes, there is such a thing as a \"non-UTF-8 char\".</p>\n"}, {"tags": [], "owner": {"reputation": 2990, "user_id": 10803671, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-mt-5s4Zqfyk/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-i_80atK5hWxwK60_Ren7qQV1TVuQ/mo/photo.jpg?sz=128", "display_name": "ALX23z", "link": "https://stackoverflow.com/users/10803671/alx23z"}, "is_accepted": false, "score": 0, "last_activity_date": 1570058973, "creation_date": 1570058973, "answer_id": 58210553, "question_id": 58210104, "link": "https://stackoverflow.com/questions/58210104/is-there-such-a-thing-as-non-utf8-character/58210553#58210553", "title": "Is there such a thing as non-utf8 character", "body": "<p>You can check out the <a href=\"https://en.wikipedia.org/wiki/UTF-8\" rel=\"nofollow noreferrer\">UTF-8 standard on Wiki</a>. Not every sequence of bytes is a valid UTF-8 character. Even if it's a single byte: 0x11111000, 0x11111111 are not valid first bytes in UTF-8.</p>\n\n<p>Though, I doubt that it is a good idea to use a non-UTF-8 character as a delimiter. You might find certain program (like Notepad++) having issues with reading output of your strings.</p>\n"}, {"tags": [], "owner": {"reputation": 18759, "user_id": 2226988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c6fbec3a71b2e95e4a6e41478deb379?s=128&d=identicon&r=PG", "display_name": "Tom Blodget", "link": "https://stackoverflow.com/users/2226988/tom-blodget"}, "is_accepted": true, "score": 2, "last_activity_date": 1570059004, "creation_date": 1570059004, "answer_id": 58210557, "question_id": 58210104, "link": "https://stackoverflow.com/questions/58210104/is-there-such-a-thing-as-non-utf8-character/58210557#58210557", "title": "Is there such a thing as non-utf8 character", "body": "<p>Yes. 0xC0, 0xC1, 0xF5, 0xF6, 0xF7, 0xF8, 0xF9, 0xFA, 0xFB, 0xFC, 0xFD, 0xFE, 0xFF are <a href=\"https://en.wikipedia.org/wiki/UTF-8#Codepage_layout\" rel=\"nofollow noreferrer\">invalid UTF-8 code units</a>. A UTF-8 code unit is 8 bits. If by <code>char</code> you mean an 8-bit byte, then the invalid UTF-8 code units would be <code>char</code> values that do not appear in UTF-8 encoded text. </p>\n"}], "owner": {"reputation": 113, "user_id": 643605, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/0a8e1fbd963e9a61da6fb7f1f44fc006?s=128&d=identicon&r=PG", "display_name": "user643605", "link": "https://stackoverflow.com/users/643605/user643605"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4307, "favorite_count": 0, "accepted_answer_id": 58210557, "answer_count": 3, "score": 1, "last_activity_date": 1570059004, "creation_date": 1570055210, "question_id": 58210104, "link": "https://stackoverflow.com/questions/58210104/is-there-such-a-thing-as-non-utf8-character", "title": "Is there such a thing as non-utf8 character", "body": "<p>Trying to implement c++ code where we could use a non-utf8 char to be as delimiter inside a std::string.</p>\n\n<p>Is there such a thing as a non-UTF-8 char ?</p>\n"}, {"tags": ["c++", "image", "opencv", "output", "maze"], "comments": [{"owner": {"reputation": 3894, "user_id": 921587, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ca08b92d21be4b0ff2e0e7c383cbf29b?s=128&d=identicon&r=PG&f=1", "display_name": "chrips", "link": "https://stackoverflow.com/users/921587/chrips"}, "edited": false, "score": 0, "creation_date": 1570064726, "post_id": 58209922, "comment_id": 102799544, "body": "@<a href=\"https://stackoverflow.com/users/12156302/1at7\">stackoverflow.com/users/12156302/1at7</a> More details... Code? Anything."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 12156302, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-iLf1Utf7Y4s/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfocGw4mr-nQqhfBN05sv3-b7uvog/photo.jpg?sz=128", "display_name": "1at7", "link": "https://stackoverflow.com/users/12156302/1at7"}, "edited": false, "score": 0, "creation_date": 1570060387, "post_id": 58210045, "comment_id": 102798735, "body": "yes it is in memory as 2D grid. thanks for instance help. \\^-^/"}], "tags": [], "owner": {"reputation": 16, "user_id": 12156333, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-CQEG1mmzxLw/AAAAAAAAAAI/AAAAAAAAA8s/giu06AHk2bo/photo.jpg?sz=128", "display_name": "Jakub Tomczy\u0144ski", "link": "https://stackoverflow.com/users/12156333/jakub-tomczy%c5%84ski"}, "is_accepted": false, "score": 0, "last_activity_date": 1570054756, "creation_date": 1570054756, "answer_id": 58210045, "question_id": 58209922, "link": "https://stackoverflow.com/questions/58209922/how-to-convert-console-output-in-image-using-opencv-in-c/58210045#58210045", "title": "How to convert console output in image using opencv in C++?", "body": "<p>I assume you have the maze in memory as a 2D grid, with some fields \"free\" and some occupied by \"walls\".</p>\n\n<p>You can create a blank <code>cv::Mat</code> (filled with a single color) and then iterate over grid fields and draw the walls in respective places using e.g. <code>cv::rectangle</code> function.</p>\n\n<p>Here is a basic tutorial on drawing on a <code>cv::Mat</code>, including <code>cv::rectangle</code>:</p>\n\n<p><a href=\"https://docs.opencv.org/3.4/d3/d96/tutorial_basic_geometric_drawing.html\" rel=\"nofollow noreferrer\">https://docs.opencv.org/3.4/d3/d96/tutorial_basic_geometric_drawing.html</a></p>\n"}], "owner": {"reputation": 1, "user_id": 12156302, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-iLf1Utf7Y4s/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfocGw4mr-nQqhfBN05sv3-b7uvog/photo.jpg?sz=128", "display_name": "1at7", "link": "https://stackoverflow.com/users/12156302/1at7"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 129, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1570065102, "creation_date": 1570053848, "last_edit_date": 1570065102, "question_id": 58209922, "link": "https://stackoverflow.com/questions/58209922/how-to-convert-console-output-in-image-using-opencv-in-c", "title": "How to convert console output in image using opencv in C++?", "body": "<p>I have code which generates maze in console but i want it as image using opencv. I do not know how to write output on image from opencv.</p>\n"}, {"tags": ["c++", "language-lawyer", "undefined-behavior"], "comments": [{"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 1, "creation_date": 1570053712, "post_id": 58209852, "comment_id": 102797393, "body": "Because <code>double</code> is <i>TriviallyCopyable</i> - related question: <a href=\"https://stackoverflow.com/questions/29777492/why-would-the-behavior-of-stdmemcpy-be-undefined-for-objects-that-are-not-triv\" title=\"why would the behavior of stdmemcpy be undefined for objects that are not triv\">stackoverflow.com/questions/29777492/&hellip;</a>"}, {"owner": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "edited": false, "score": 0, "creation_date": 1570056020, "post_id": 58209852, "comment_id": 102797896, "body": "related: <a href=\"https://stackoverflow.com/questions/51300626/is-stdmemcpy-between-different-trivially-copyable-types-undefined-behavior\" title=\"is stdmemcpy between different trivially copyable types undefined behavior\">stackoverflow.com/questions/51300626/&hellip;</a>"}, {"owner": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "edited": false, "score": 2, "creation_date": 1570056665, "post_id": 58209852, "comment_id": 102798031, "body": "There is no type-punning here. <code>d</code> is properly constructed, accessing it is not type-punning. <code>reinterpret_cast</code>ing <code>bytes</code> to <code>double</code>, and accessing it as <code>double</code> would be type-punning."}, {"owner": {"reputation": 1052, "user_id": 7353216, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d2c902662ab97bf7f11627f37c636176?s=128&d=identicon&r=PG&f=1", "display_name": "Reizo", "link": "https://stackoverflow.com/users/7353216/reizo"}, "reply_to_user": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "edited": false, "score": 0, "creation_date": 1570057370, "post_id": 58209852, "comment_id": 102798184, "body": "@geza fair point, I corrected the title and tags."}, {"owner": {"reputation": 16020, "user_id": 9716597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f97c613dca0b157b40551a0d756abeb?s=128&d=identicon&r=PG&f=1", "display_name": "L. F.", "link": "https://stackoverflow.com/users/9716597/l-f"}, "edited": false, "score": 1, "creation_date": 1570080726, "post_id": 58209852, "comment_id": 102802362, "body": "The answer depends on what <code>&#47;&#47; fill array</code> is."}, {"owner": {"reputation": 1052, "user_id": 7353216, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d2c902662ab97bf7f11627f37c636176?s=128&d=identicon&r=PG&f=1", "display_name": "Reizo", "link": "https://stackoverflow.com/users/7353216/reizo"}, "reply_to_user": {"reputation": 16020, "user_id": 9716597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f97c613dca0b157b40551a0d756abeb?s=128&d=identicon&r=PG&f=1", "display_name": "L. F.", "link": "https://stackoverflow.com/users/9716597/l-f"}, "edited": false, "score": 0, "creation_date": 1570093075, "post_id": 58209852, "comment_id": 102807497, "body": "@L.F. bytes are read from theoretically arbitrary file content. In practice it contains an IEEE-754 double but of course you can never guarantee that and that&#39;s my concern."}], "answers": [{"tags": [], "owner": {"reputation": 269338, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "is_accepted": false, "score": 1, "last_activity_date": 1570053750, "creation_date": 1570053750, "answer_id": 58209913, "question_id": 58209852, "link": "https://stackoverflow.com/questions/58209852/why-does-stdmemcpy-as-an-alternative-to-type-punning-not-cause-undefined-beh/58209913#58209913", "title": "Why does std::memcpy (as an alternative to type-punning) not cause undefined behaviour?", "body": "<p>There is a special exception in the standard for <code>memcpy</code> to/from a buffer of bytes, because certain operations would be impossible if there weren't a well defined way of doing that.</p>\n\n<p>You can definitely get undefined behavior if you copy from one type, to bytes, then to another type.</p>\n"}, {"comments": [{"owner": {"reputation": 269338, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 1, "creation_date": 1570054117, "post_id": 58209946, "comment_id": 102797487, "body": "Congrats on knowing where to find the relevant part of the standard."}, {"owner": {"reputation": 1052, "user_id": 7353216, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d2c902662ab97bf7f11627f37c636176?s=128&d=identicon&r=PG&f=1", "display_name": "Reizo", "link": "https://stackoverflow.com/users/7353216/reizo"}, "edited": false, "score": 0, "creation_date": 1570054915, "post_id": 58209946, "comment_id": 102797652, "body": "So, as long as I can guarantee that the bytes int <code>bytes</code> were originally copied from another <code>double</code> (on an equivalent platform) I can use <code>d</code>. But a very common case for this, is to type-pun (potentially corrupted) raw bytes from a file or network connection. Then I can practically not make that guarantee. So accessing <code>d</code> may not be valid in this scenario?"}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "reply_to_user": {"reputation": 1052, "user_id": 7353216, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d2c902662ab97bf7f11627f37c636176?s=128&d=identicon&r=PG&f=1", "display_name": "Reizo", "link": "https://stackoverflow.com/users/7353216/reizo"}, "edited": false, "score": 0, "creation_date": 1570055203, "post_id": 58209946, "comment_id": 102797709, "body": "@Reizo It wouldn&#39;t be valid indeed. At least not in general. In practice, you may probably assume IEEE-754 conformance, in which case you only need to take care of dealing with signaling NaN values."}, {"owner": {"reputation": 1052, "user_id": 7353216, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d2c902662ab97bf7f11627f37c636176?s=128&d=identicon&r=PG&f=1", "display_name": "Reizo", "link": "https://stackoverflow.com/users/7353216/reizo"}, "edited": false, "score": 0, "creation_date": 1570056003, "post_id": 58209946, "comment_id": 102797888, "body": "@eerorika What does &#39;wouldn&#39;t be valid&#39; mean precisely? Will accessing <code>d</code> cause undefined behavior (i. e. be illegal) or will the (still legally) accessed value of <code>d</code> be unspecified (while still being <i>some</i> legal <code>double</code>)? Please also see my question edit."}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "reply_to_user": {"reputation": 1052, "user_id": 7353216, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d2c902662ab97bf7f11627f37c636176?s=128&d=identicon&r=PG&f=1", "display_name": "Reizo", "link": "https://stackoverflow.com/users/7353216/reizo"}, "edited": false, "score": 1, "creation_date": 1570062069, "post_id": 58209946, "comment_id": 102799050, "body": "@Reizo C++ Standard simply doesn&#39;t specify anything about coping arbitrary set of bytes over an (even trivially copyable) type. UB is possible. In practice, there should be no problem unless the type has trap representations (such as the signaling NaN)."}], "tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": true, "score": 2, "last_activity_date": 1570054916, "last_edit_date": 1592644375, "creation_date": 1570054035, "answer_id": 58209946, "question_id": 58209852, "link": "https://stackoverflow.com/questions/58209852/why-does-stdmemcpy-as-an-alternative-to-type-punning-not-cause-undefined-beh/58209946#58209946", "title": "Why does std::memcpy (as an alternative to type-punning) not cause undefined behaviour?", "body": "<blockquote>\n<p>Why does type-punning using std::memcpy not cause undefined behaviour?</p>\n</blockquote>\n<p>Beause the language says so (latest draft):</p>\n<blockquote>\n<p>[basic.types]</p>\n<p>For any object (other than a potentially-overlapping subobject) of trivially copyable type T, whether or not the object holds a valid value of type T, the underlying bytes ([intro.memory]) making up the object can be copied into an array of char, unsigned char, or std\u200b::\u200bbyte ([cstddef.syn]).\n<strong>If the content of that array is copied back into the object, the object shall subsequently hold its original value.</strong></p>\n</blockquote>\n<p>Note however the condition on that rule. Your code can potentially have undefined behaviour, but not (unless some other rule says so) in case the copied value was originally copied from another double, or in practice, if the value could have been copied from a double.</p>\n<blockquote>\n<p>If it was not a double, but a complex class object, accessing it surely would not be defined either, would it?</p>\n</blockquote>\n<p>Depends on what you mean by complexity. The conditions where this applies are in the quoted rule.</p>\n"}, {"comments": [{"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 1, "creation_date": 1570080862, "post_id": 58209962, "comment_id": 102802397, "body": "If one were to specify a language &quot;C+=2&quot; which was just like C++ except that the creation of a valid pointer of any trivially-copyable type would implicitly create an object of that type at that address initialized with the contents of the associated storage, would there be any thing one could do in C++ which one couldn&#39;t be done the same way, using the same code, in &quot;C++2&quot;?  Why does the &quot;existence&quot; of trivially-copyable objects have to mean anything?"}, {"owner": {"reputation": 2216, "user_id": 9585016, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Language Lawyer", "link": "https://stackoverflow.com/users/9585016/language-lawyer"}, "edited": false, "score": 0, "creation_date": 1570096938, "post_id": 58209962, "comment_id": 102809583, "body": "Your answer make me feel that you think that &quot;trivially copyable&quot; means that a value of an object of trivially copyable type is uniquely determined by the value of bits in its value representation. But this is not true."}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "reply_to_user": {"reputation": 2216, "user_id": 9585016, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Language Lawyer", "link": "https://stackoverflow.com/users/9585016/language-lawyer"}, "edited": false, "score": 1, "creation_date": 1570109771, "post_id": 58209962, "comment_id": 102816486, "body": "@LanguageLawyer: &quot;<i>But this is not true.</i>&quot; How not? How would you write a type which is trivially copyable such that whatever that object means to &quot;have a value&quot; is not determined entirely by its bit pattern? And I&#39;m not talking about the behavior of <code>operator==</code>. Copying an object creates an equivalent object; if copying the bit pattern copies the object (which is what trivially copyable says), then copying the bit pattern creates an equivalent object, and therefore &quot;equivalent object&quot; is determined entirely by its bit pattern, regardless of what <code>operator==</code> may do."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1570127990, "post_id": 58209962, "comment_id": 102825296, "body": "@NicolBolas: One could have a type <code>Woozle</code> whose bit pattern represents an index into a table of the values of all <code>Woozle</code> objects that have ever been created.  This could be useful if e.g. <code>Woozle</code> values were large, but one knew that no more than 255 different values would ever be used within a single execution."}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "reply_to_user": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 1, "creation_date": 1570129023, "post_id": 58209962, "comment_id": 102825716, "body": "@supercat: And how would your object <i>ensure</i> that this bit pattern &quot;represents an index into a table of values of all <code>Woozle</code> objects that have ever been created?&quot; There&#39;s a difference between having a convention for what a value means and having the object actually <i>enforce that</i>. <code>unique_ptr&lt;T&gt;</code> <i>enforces</i> its ownership semantics, by making its pointer private, by being move-only, and by having non-trivial special members that implement ownership. How would you write a <code>Woozle</code> that can <i>enforce</i> this in its copy constructor without that copy constructor being non-trivial?"}, {"owner": {"reputation": 2216, "user_id": 9585016, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Language Lawyer", "link": "https://stackoverflow.com/users/9585016/language-lawyer"}, "edited": false, "score": 0, "creation_date": 1570178670, "post_id": 58209962, "comment_id": 102839325, "body": "@NicolBolas <a href=\"http://eel.is/c++draft/bit.cast\" rel=\"nofollow noreferrer\"><code>bit_cast</code></a> <i>Returns</i> says <i>&quot;Each bit of the value representation of the result is equal to the corresponding bit in the object representation of <code>from</code>... If there are multiple such values, which value is produced is unspecified.&quot;</i> and <code>bit_cast</code> is defined only for trivially copyable types. There are fundamental types for which a bit pattern can mean different values. You can&#39;t not know them."}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "reply_to_user": {"reputation": 2216, "user_id": 9585016, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Language Lawyer", "link": "https://stackoverflow.com/users/9585016/language-lawyer"}, "edited": false, "score": 1, "creation_date": 1570195777, "post_id": 58209962, "comment_id": 102847617, "body": "@LanguageLawyer: &quot;<i>There are fundamental types for which a bit pattern can mean different values.</i>&quot; I think you got that backwards; there are fundamental types for which different bitpatterns can represent the same value (positive/negative zero in IEEE-754, for example). But the reverse is not possible."}, {"owner": {"reputation": 2216, "user_id": 9585016, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Language Lawyer", "link": "https://stackoverflow.com/users/9585016/language-lawyer"}, "edited": false, "score": 0, "creation_date": 1570201494, "post_id": 58209962, "comment_id": 102850509, "body": "A pointer past the end of an object could be bitwise identical to a pointer to an object. But these values are different."}, {"owner": {"reputation": 2216, "user_id": 9585016, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Language Lawyer", "link": "https://stackoverflow.com/users/9585016/language-lawyer"}, "edited": false, "score": 0, "creation_date": 1570662607, "post_id": 58209962, "comment_id": 102987579, "body": "@NicolBolas even simpler: a pointer to an object of class type with a non-static data member of reference type created on top of an object of the same type and pointer to the old object are 2 different values, but highly likely these pointers are bitwise identical."}], "tags": [], "owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "is_accepted": false, "score": 3, "last_activity_date": 1570054149, "creation_date": 1570054149, "answer_id": 58209962, "question_id": 58209852, "link": "https://stackoverflow.com/questions/58209852/why-does-stdmemcpy-as-an-alternative-to-type-punning-not-cause-undefined-beh/58209962#58209962", "title": "Why does std::memcpy (as an alternative to type-punning) not cause undefined behaviour?", "body": "<p>Type punning is forbidden because the idea of it makes a mockery of the C++ object model. A piece of memory stores an object, and if you start accessing it as if it stored some other object, then what does that even mean? If you can just willy-nilly read from memory as an <code>int</code>, write to it as a <code>float</code>, and read from it later as a <code>short</code>, then what does it even mean to have an object exist?</p>\n\n<p>Copying bytes between trivially copyable objects is just another way of setting that object's value. Indeed, that is what it logically means for an object to be \"trivially copyable\": that the meaning of that object is solely defined by the sequence of bytes that make up its object representation (this is not the case for complex objects). But the sanctity of what memory belongs to which objects is preserved. There is no \"punning\"; there is just copying data around.</p>\n"}], "owner": {"reputation": 1052, "user_id": 7353216, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d2c902662ab97bf7f11627f37c636176?s=128&d=identicon&r=PG&f=1", "display_name": "Reizo", "link": "https://stackoverflow.com/users/7353216/reizo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 360, "favorite_count": 1, "accepted_answer_id": 58209946, "answer_count": 3, "score": 3, "last_activity_date": 1570057300, "creation_date": 1570053310, "last_edit_date": 1570057300, "question_id": 58209852, "link": "https://stackoverflow.com/questions/58209852/why-does-stdmemcpy-as-an-alternative-to-type-punning-not-cause-undefined-beh", "title": "Why does std::memcpy (as an alternative to type-punning) not cause undefined behaviour?", "body": "<p>While searching for a way to combine <code>sizeof(double)</code> <code>char</code>s to a <code>double</code>, I read in several posts, that using <code>std::memcpy</code> was the recommended way:</p>\n\n<pre><code>char bytes[sizeof(double)];\n// fill array\ndouble d;\nstd::memcpy(&amp;d, bytes, sizeof(double));\n</code></pre>\n\n<p>However, I wonder why further usage of <code>d</code> can be defined behavior.</p>\n\n<p>If it was not a <code>double</code>, but a complex class object, accessing it surely would not be defined either, would it? So, why should it be the case for a <code>double</code>.</p>\n\n<p><strong>Edit:</strong> To make my problem clear, I wanna specify my goal: I would like to find a way to combine several <code>char</code>s to a <code>double</code> and further use this double, without causing undefined behavior. I <em>do not</em> expect the value of the <code>double</code> to be specified. I deem this impossible anyway, since the standard does not even say anything about the size, not to mention bit layout of <code>double</code>. However, I demand <code>d</code> to have <em>some</em> valid (i. e. 'accessible') <code>double</code>-value.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 1404, "user_id": 10496710, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5cb3d11da053d8e1e94ef99a27ca6af?s=128&d=identicon&r=PG&f=1", "display_name": "B. Go", "link": "https://stackoverflow.com/users/10496710/b-go"}, "edited": false, "score": 1, "creation_date": 1570053409, "post_id": 58209772, "comment_id": 102797320, "body": "Not likely the main problem, but with <code>while (i != 2 || o != 2)</code> you need to both win and lose to exit that loop! It should be &amp;&amp;. Or for more security against bugs, <code>while (i &lt; 2 &amp;&amp; o &lt; 2)</code>"}, {"owner": {"reputation": 805, "user_id": 7908019, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-wBTC1gSxMPU/AAAAAAAAAAI/AAAAAAAAABY/85JVWoAxQI0/photo.jpg?sz=128", "display_name": "Gerard097", "link": "https://stackoverflow.com/users/7908019/gerard097"}, "edited": false, "score": 3, "creation_date": 1570053578, "post_id": 58209772, "comment_id": 102797363, "body": "You have extra spaces in your == statements i.e &quot; scissors&quot; &quot; papers&quot;"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1570055055, "post_id": 58209772, "comment_id": 102797683, "body": "You could avoid comparing strings by using named constants, e.g. <code>const int ROCK = 1;</code> and ``if ((result == ROCK) &amp;&amp; (result2 == PAPER))`  You could convert the constants to text by using an array of text:  <code>char * names[] = {&quot;&quot;, &quot;rock&quot;, &quot;paper&quot;, &quot;scissors&quot;};</code> and <code>std::cout &lt;&lt; names[ROCK] &lt;&lt; &quot; &quot; &lt;&lt; names[result] &lt;&lt; &quot;\\n&quot;;</code>"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1570059510, "post_id": 58209772, "comment_id": 102798581, "body": "<i>I&#39;m working on a rock paper scissor game to practice some fundamentals as I try to teach myself c++</i> -- Now is a good time to learn about <code>std::map</code> and <code>std::pair</code>, since this program could be done in about 5 lines of code if you had set it up using those containers."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1570060615, "post_id": 58209772, "comment_id": 102798778, "body": "<a href=\"http://coliru.stacked-crooked.com/a/61176ae8684e27c4\" rel=\"nofollow noreferrer\">A small example</a>"}], "answers": [{"tags": [], "owner": {"reputation": 805, "user_id": 7908019, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-wBTC1gSxMPU/AAAAAAAAAAI/AAAAAAAAABY/85JVWoAxQI0/photo.jpg?sz=128", "display_name": "Gerard097", "link": "https://stackoverflow.com/users/7908019/gerard097"}, "is_accepted": false, "score": 1, "last_activity_date": 1570053864, "creation_date": 1570053864, "answer_id": 58209924, "question_id": 58209772, "link": "https://stackoverflow.com/questions/58209772/why-isnt-my-rock-papar-scissors-game-working/58209924#58209924", "title": "Why isnt my rock papar scissors game working?", "body": "<p>Remove the white spaces in the == statements and you can factorize some of your cout calls</p>\n\n<pre><code>    //\" paper\" --&gt; \"paper\",  \" rock\" --&gt; \"rock\"\n\n    std::cout &lt;&lt; \" you threw \" &lt;&lt; result &lt;&lt; std::endl;\n    std::cout &lt;&lt; \" your opponant threw \" &lt;&lt; result_2 &lt;&lt; std::endl;\n\n    if (result == result_2) {\n        std::cout &lt;&lt; \" TIE! \\n\" &lt;&lt; std::endl;\n    }\n    else if (result == \"rock\" &amp;&amp; result_2 == \"paper\") {\n        std::cout &lt;&lt; \" Paper Beats Rock!\\n You Lose! \\n\" &lt;&lt; std::endl;\n        o++;\n    }\n    else if (result == \"paper\" &amp;&amp; result_2 == \"rock\") {\n        std::cout &lt;&lt; \" Paper Beats Rock!\\n You win! \\n\" &lt;&lt; std::endl;\n        i++;\n    }\n    else if (result == \"scissors\" &amp;&amp; result_2 == \"paper\") {\n        std::cout &lt;&lt; \" scissors Beat Paper!\\n You Win! \\n\" &lt;&lt; std::endl;\n        i++;\n\n    }\n    else if (result == \"rock\" &amp;&amp; result_2 == \"scissors\") {\n        std::cout &lt;&lt; \" Rock Beats Scissors!\\n You Win! \\n\" &lt;&lt; std::endl;\n        i++;\n    }\n    else if (result == \"scissors\" &amp;&amp; result_2 == \"rock\") {\n        std::cout &lt;&lt; \" Rock Beat Scissors! \\n You lose! \\n\" &lt;&lt; std::endl;\n        o++;\n    }\n    else if (result == \"paper\" &amp;&amp; result_2 == \"scissors\") {\n        std::cout &lt;&lt; \" scissors Beat Paper!\\n You Lose! \\n\" &lt;&lt; std::endl;\n        o++;\n    }\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 12156100, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0dff0915cbe4956e32984fc8c353c4b?s=128&d=identicon&r=PG&f=1", "display_name": "Mwatson", "link": "https://stackoverflow.com/users/12156100/mwatson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1570053864, "creation_date": 1570052773, "question_id": 58209772, "link": "https://stackoverflow.com/questions/58209772/why-isnt-my-rock-papar-scissors-game-working", "title": "Why isnt my rock papar scissors game working?", "body": "<p>I'm working on a rock paper scissor game to practice some fundamentals as I try to teach myself c++.\nI had it working briefly, but I adjusted some of the cout content and now it is short circuiting some of the if statements. Any insights as to why this isn't working would be appreciated. </p>\n\n<pre><code>#include &lt;string&gt;\n#include &lt;iostream&gt;\n#include &lt;cstdlib&gt;\n#include &lt;ctime&gt;\n</code></pre>\n\n<p>game function. Requests input for player. Assigns variables random and guess to ints and then to strings result and result_2. Lastly the while loop tracks the score.  </p>\n\n<pre><code>void Play_rps() {\n    int guess;\n    int i = 0;\n    int o = 0;\n    std::string result;\n    std::string result_2;\n    std::cout &lt;&lt; \" Rock, Paper, Scissors. GO!! \\n\";\n    while (i != 2 || o != 2) {\n\n        int random = rand() % 4;\n        std::cout &lt;&lt; \" 1.) Rock \\n 2.) Paper \\n 3.) Scissors \\n\";\n        std::cin &gt;&gt; guess;\n\n        switch (guess) {\n        case 1:\n            result = \"rock\";\n            break;\n        case 2:\n            result = \"paper\";\n            break;\n        case 3:\n            result = \"scissors\";\n            break;\n\n        }\n        switch (random) {\n        case 1:\n            result_2 = \"rock\";\n            break;\n        case 2:\n            result_2 = \"paper\";\n            break;\n        case 3:\n            result_2 = \"scissors\";\n            break;\n        }\n</code></pre>\n\n<p>Nested if statements determine the out come of each round and increment the win counter.</p>\n\n<pre><code>\n        if (result == result_2) {\n\n            std::cout &lt;&lt; \" you threw \" &lt;&lt; result &lt;&lt; std::endl;\n            std::cout &lt;&lt; \" your opponant threw \" &lt;&lt; result_2 &lt;&lt; std::endl;\n            std::cout &lt;&lt; \" TIE! \\n\" &lt;&lt; std::endl;\n        }\n        else if (result == \" rock\" &amp;&amp; result_2 == \" paper\") {\n            std::cout &lt;&lt; \" you threw \" &lt;&lt; result &lt;&lt; std::endl;\n            std::cout &lt;&lt; \" your opponant threw \" &lt;&lt; result_2 &lt;&lt; std::endl;\n            std::cout &lt;&lt; \" Paper Beats Rock!\\n You Lose! \\n\" &lt;&lt; std::endl;\n            o++;\n        }\n        else if (result == \" paper\" &amp;&amp; result_2 == \" rock\") {\n            std::cout &lt;&lt; \" you threw \" &lt;&lt; result &lt;&lt; std::endl;\n            std::cout &lt;&lt; \" your opponant threw \" &lt;&lt; result_2 &lt;&lt; std::endl;\n            std::cout &lt;&lt; \" Paper Beats Rock!\\n You win! \\n\" &lt;&lt; std::endl;\n            i++;\n        }\n        else if (result == \" scissors\" &amp;&amp; result_2 == \" paper\") {\n            std::cout &lt;&lt; \" you threw \" &lt;&lt; result &lt;&lt; std::endl;\n            std::cout &lt;&lt; \" your opponant threw \" &lt;&lt; result_2 &lt;&lt; std::endl;\n            std::cout &lt;&lt; \" scissors Beat Paper!\\n You Win! \\n\" &lt;&lt; std::endl;\n            i++;\n\n        }\n        else if (result == \" rock\" &amp;&amp; result_2 == \" scissors\") {\n            std::cout &lt;&lt; \" you threw \" &lt;&lt; result &lt;&lt; std::endl;\n            std::cout &lt;&lt; \" your opponant threw \" &lt;&lt; result_2 &lt;&lt; std::endl;\n            std::cout &lt;&lt; \" Rock Beats Scissors!\\n You Win! \\n\" &lt;&lt; std::endl;\n            i++;\n        }\n        else if (result == \" scissors\" &amp;&amp; result_2 == \" rock\") {\n            std::cout &lt;&lt; \" you threw \" &lt;&lt; result &lt;&lt; std::endl;\n            std::cout &lt;&lt; \" your opponant threw \" &lt;&lt; result_2 &lt;&lt; std::endl;\n            std::cout &lt;&lt; \" Rock Beat Scissors! \\n You lose! \\n\" &lt;&lt; std::endl;\n            o++;\n        }\n        else if (result == \" paper\" &amp;&amp; result_2 == \" scissors\") {\n            std::cout &lt;&lt; \" you threw \" &lt;&lt; result &lt;&lt; std::endl;\n            std::cout &lt;&lt; \" your opponant threw \" &lt;&lt; result_2 &lt;&lt; std::endl;\n            std::cout &lt;&lt; \" scissors Beat Paper!\\n You Lose! \\n\" &lt;&lt; std::endl;\n            o++;\n        }\n\n        if (i == 2) {\n            std::cout &lt;&lt; \" YOU ARE VICTORIOUS \\n\";\n        }\n        else if (o == 2) {\n            std::cout &lt;&lt; \" DEFEAT \\n\";\n        }\n\n\n    }\n}\n</code></pre>\n\n<p>The main function is working properly as far as I can tell, but when I compile there is a warning about \"t-time being an unsigned int, which may cause data to be lost\" which is the only notification I get. </p>\n\n<pre><code>        int main()\n         {\n            srand(time(NULL));\n            int choice;\n\n            do {\n                std::cout &lt;&lt; \"0.) Quit \\n1.) Play Game \\n\";\n                std::cin &gt;&gt; choice;\n\n                switch (choice) {\n                case 0:\n                    std::cout &lt;&lt; \"Thanks for nothing! \\n\";\n                    return 0;\n\n                case 1:\n                    Play_rps();\n                    break;\n\n                default:\n                    std::cout &lt;&lt; \" That's not a valid choice. \\n\";\n                }\n            } while (choice != 0);\n        } \n</code></pre>\n"}, {"tags": ["c++", "sdl", "mouse"], "comments": [{"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1570052468, "post_id": 58209628, "comment_id": 102797090, "body": "Consider using <code>SDL_SetWindowHitTest</code> instead of moving the window manually. Also, I would used named constants instead of hardcoded values for event IDs."}, {"owner": {"reputation": 77, "user_id": 8212649, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7a0d9b80ff059d7b3d32ffb8e487ae1?s=128&d=identicon&r=PG&f=1", "display_name": "Toastbot", "link": "https://stackoverflow.com/users/8212649/toastbot"}, "reply_to_user": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1570052785, "post_id": 58209628, "comment_id": 102797162, "body": "I cant find a lot about <code>SDL_SetWindowHitTest</code> but it sounds like exactly what i&#180;m looking for, however i am not sure how to use it. What to put as <code>SDL_HitTest callback</code> and what to put <code>void*       callback_data</code> - may you help me to understand or can u provide some tutorial? :)"}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1570052982, "post_id": 58209628, "comment_id": 102797203, "body": "Alright, I&#39;ll write a full answer."}], "answers": [{"comments": [{"owner": {"reputation": 77, "user_id": 8212649, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7a0d9b80ff059d7b3d32ffb8e487ae1?s=128&d=identicon&r=PG&f=1", "display_name": "Toastbot", "link": "https://stackoverflow.com/users/8212649/toastbot"}, "edited": false, "score": 0, "creation_date": 1570062493, "post_id": 58209980, "comment_id": 102799127, "body": "Thanks a lot, this realy helps. I&#180;m gonna tinker with it a littlebit, so far it moves smothly but does go back to its original position. But i gues i know how to get things finished. Thanks a lot again."}], "tags": [], "owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "is_accepted": false, "score": 2, "last_activity_date": 1570054256, "creation_date": 1570054256, "answer_id": 58209980, "question_id": 58209628, "link": "https://stackoverflow.com/questions/58209628/function-to-move-a-sdl2-window-while-mouse-down-flickers-the-window-and-doesnt/58209980#58209980", "title": "Function to move a SDL2 window while mouse down flickers the window and doesn&#39;t move &#39;fast&#39; enough", "body": "<p>Rather than moving the window manually, I suggest using <a href=\"https://wiki.libsdl.org/SDL_SetWindowHitTest\" rel=\"nofollow noreferrer\"><code>SDL_SetWindowHitTest</code></a>:</p>\n\n<pre><code>int SDL_SetWindowHitTest(SDL_Window* window, SDL_HitTest callback, void* callback_data);\n</code></pre>\n\n<p>This function lets you specify what dragging specific pixels of a window does (possible actions are moving the window, resizing it, or doing nothing).</p>\n\n<p>You should probably call this function once, after creating your window.</p>\n\n<p>Parameters are:</p>\n\n<ul>\n<li><p><code>SDL_Window* window</code> speaks for itself.</p></li>\n<li><p><code>SDL_HitTest callback</code> receives a function that, when given coordinates of a pixel, determines what dragging this pixel does.</p></li>\n<li><p><code>void* callback_data</code> is described below.</p></li>\n</ul>\n\n<p>You need to write a function to pass to <code>callback</code>. It has to have following return type and parameter types:</p>\n\n<pre><code>SDL_HitTestResult MyCallback(SDL_Window* win, const SDL_Point* area, void* data)\n{\n    ...\n}\n</code></pre>\n\n<p><code>area-&gt;x</code> and <code>area-&gt;y</code> are the coordinates of the pixel that's being checked. <code>win</code> is the window.</p>\n\n<p><code>data</code> will receive the same pointer you passed to <code>callback_data</code> when calling <code>SDL_SetWindowHitTest</code>. You can use this pointer to pass arbitrary data to your callback; or, if you don't need it, simply set it to <code>0</code>.</p>\n\n<p>Your callback should return one of the following:</p>\n\n<ul>\n<li><code>SDL_HITTEST_NORMAL</code> - no action.</li>\n<li><code>SDL_HITTEST_DRAGGABLE</code> - dragging this pixel moves the window.</li>\n<li><code>SDL_HITTEST_RESIZE_*</code> - dragging this pixel resizes a specific edge (or edges) of the window. (Here <code>*</code> is one of: <code>TOPLEFT</code>, <code>TOP</code>, <code>TOPRIGHT</code>, <code>RIGHT</code>, <code>BOTTOMRIGHT</code>, <code>BOTTOM</code>, <code>BOTTOMLEFT</code>, <code>LEFT</code>).</li>\n</ul>\n"}], "owner": {"reputation": 77, "user_id": 8212649, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7a0d9b80ff059d7b3d32ffb8e487ae1?s=128&d=identicon&r=PG&f=1", "display_name": "Toastbot", "link": "https://stackoverflow.com/users/8212649/toastbot"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 424, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1570054715, "creation_date": 1570051790, "last_edit_date": 1570054715, "question_id": 58209628, "link": "https://stackoverflow.com/questions/58209628/function-to-move-a-sdl2-window-while-mouse-down-flickers-the-window-and-doesnt", "title": "Function to move a SDL2 window while mouse down flickers the window and doesn&#39;t move &#39;fast&#39; enough", "body": "<p>I made a function to move an borderless SDL window.  I use <code>SDL_MOUSEBUTTONDOWN</code> to 'activate' the window movement and <code>SDL_MOUSEBUTTONUP</code> to 'deactivate' it.  For some reason it does not just move like it should but instead moves way slower than my mouse and flickers if I moved it by a good distance.</p>\n\n<p>I use SDL2, and I'm on windows 10.</p>\n\n<p>My loop always updates my mouse position, and the function takes the mouse position reduces it by the last mouse position and then moves the window by that distance.</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>sPos moveClock(int event){\n    sPos temPos = setPos(0,0);\n    if(tempMoveVar==1){\n        temPos = setPos(gvMousePos.x-mPos.x,gvMousePos.y-mPos.y);\n        mPos = setPos(gvMousePos.x,gvMousePos.y);\n    }else if(event==-1){    //Mouse Down\n        mPos = setPos(gvMousePos.x,gvMousePos.y);\n        tempMoveVar=1;\n    }\n    if(event==-65){         //Mouse Up\n        tempMoveVar=0;\n    }\n    return temPos;\n}\n</code></pre>\n\n<p>I just want the window to move 'with' the mouse while my mouse button is down, like you normally can move windows.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 7540, "user_id": 4474230, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/713c7ce18010e541853962264a719d83?s=128&d=identicon&r=PG&f=1", "display_name": "Jeffrey", "link": "https://stackoverflow.com/users/4474230/jeffrey"}, "edited": false, "score": 0, "creation_date": 1570051215, "post_id": 58209337, "comment_id": 102796733, "body": "This question would not be useful again to anyone else, so won&#39;t answer it. But you need to move the <code>}</code> above, before the <code>for</code>."}, {"owner": {"reputation": 14893, "user_id": 4645334, "user_type": "registered", "accept_rate": 87, "profile_image": "https://lh6.googleusercontent.com/-hoIJVId9WIY/AAAAAAAAAAI/AAAAAAAAGQw/r7Es0WqE4rs/photo.jpg?sz=128", "display_name": "Thomas Sablik", "link": "https://stackoverflow.com/users/4645334/thomas-sablik"}, "edited": false, "score": 1, "creation_date": 1570051418, "post_id": 58209337, "comment_id": 102796807, "body": "Please format your code. It&#39;s not readable. You can use <a href=\"http://format.krzaq.cc/\" rel=\"nofollow noreferrer\">format.krzaq.cc</a>"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 1, "creation_date": 1570072935, "post_id": 58209337, "comment_id": 102800860, "body": "Please be aware that code like <code>given[dim][dim]</code> is <a href=\"https://stackoverflow.com/questions/1887097/why-arent-variable-length-arrays-part-of-the-c-standard\">not valid in C++</a>."}], "owner": {"reputation": 1, "user_id": 12155912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1f97624cdd9348561b0bee11e1f6ee3?s=128&d=identicon&r=PG&f=1", "display_name": "Pushpam", "link": "https://stackoverflow.com/users/12155912/pushpam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 194, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1570072438, "creation_date": 1570050241, "last_edit_date": 1570072438, "question_id": 58209337, "link": "https://stackoverflow.com/questions/58209337/determinant-by-using-gauss-elimination-method-c", "title": "Determinant by using Gauss-elimination method, C++", "body": "<p>I have to find determinant of order n using Gauss elimination method.\nI wrote this code:</p>\n\n<pre><code>// Determinant gauss decomposition\n#include &lt;iostream&gt;\n#include &lt;cmath&gt;\nusing namespace std;\n\nint main()\n\n{\n    //Taking input from user\n    int m, dim;\n    cout &lt;&lt; \" Please enter the dimension of determinant and the coefficients\" &lt;&lt; endl;\n    cin &gt;&gt; dim;\n    cout &lt;&lt; \"Dimension =\" &lt;&lt; dim &lt;&lt; endl;\n    float n, det = 1.0, given[dim][dim], trans[dim][dim], temp[1][dim];\n    // \"given\" is for given matrix and \"trans\" is for transformed matrix\n    // \"temp\" is temporary matrix used for storing a row temporarily\n\n    for (int i = 0; i &lt; dim; i++) {\n        for (int j = 0; j &lt; dim; j++) {\n            cout &lt;&lt; \"   a\" &lt;&lt; i &lt;&lt; j &lt;&lt; \" =  \";\n            cin &gt;&gt; given[i][j];\n        }\n    }\n    cout &lt;&lt; endl\n         &lt;&lt; \"The input matrix is:\" &lt;&lt; endl;\n    for (int i = 0; i &lt; dim; i++) {\n        cout &lt;&lt; endl;\n\n        for (int j = 0; j &lt; dim; j++)\n            cout &lt;&lt; given[i][j] &lt;&lt; \"   \";\n    }\n\n    // first transformation\n    // srow is the row which has to be subtracted.\n    for (int srow = 0; srow &lt; dim; srow++) {\n        if (srow &lt; dim - 1) {\n            cout &lt;&lt; endl\n                 &lt;&lt; \" after \" &lt;&lt; srow + 1 &lt;&lt; \" transformation: the transformed elements are \" &lt;&lt; endl;\n            // This shows matrix after each transformation.\n        }\n        for (int row = 1; row &lt; dim - srow; row++) {\n            cout &lt;&lt; endl;\n            for (int col = 0; col &lt; dim; col++) {\n                if (given[srow][srow] != 0) //new\n                {\n                    trans[row + srow][col] = given[srow + row][col] - given[srow][col] * (given[row + srow][srow] / given[srow][srow]);\n                }\n                else {\n                    cout &lt;&lt; \"  after changing row, \";\n                    for (int col = 0; col &lt; dim; col++) {\n                        temp[1][col] = given[srow][col];\n\n                        given[srow][col] = -1 * given[srow + 1][col];\n                        given[srow + 1][col] = temp[1][col];\n                        cout &lt;&lt; \"         given[\" &lt;&lt; srow &lt;&lt; \"][\" &lt;&lt; col &lt;&lt; \"] =    \"\n                             &lt;&lt; given[srow][col];\n                    }\n                    goto fmat;\n                }\n            }\n        }\n        // showing the transformed elements after each transformation\n        for (int p = 1; p &lt; dim - srow; p++) {\n            for (int q = 0; q &lt; dim; q++) {\n                given[p + srow][q] = trans[p + srow][q];\n                cout &lt;&lt; \"         given[\" &lt;&lt; p + srow &lt;&lt; \"][\" &lt;&lt; q &lt;&lt; \"] = \" &lt;&lt; given[p + srow][q];\n            }\n            cout &lt;&lt; endl;\n        }\n        // After each transformation, the transformed matrix is taken as the\n        //given matrix.\n        if (srow &lt; dim - 1) {\n            cout &lt;&lt; endl\n                 &lt;&lt; \" after \" &lt;&lt; srow + 1 &lt;&lt; \" transformation, the given matrix transforms to   \" &lt;&lt; endl;\n        }\n        cout &lt;&lt; endl;\n        for (int p = 0; p &lt; dim; p++) {\n            for (int q = 0; q &lt; dim; q++) {\n                cout &lt;&lt; \"           given[\" &lt;&lt; p &lt;&lt; \"][\" &lt;&lt; q &lt;&lt; \"] = \" &lt;&lt; given[p][q];\n            }\n            cout &lt;&lt; endl;\n        }\n    }\n\n// Final transformed upper triangular matrix\nfmat:\n    cout &lt;&lt; endl\n         &lt;&lt; \" The final transformed matrix : \" &lt;&lt; endl;\n    for (int i = 0; i &lt; dim; i++) {\n        cout &lt;&lt; endl;\n        for (int j = 0; j &lt; dim; j++)\n            cout &lt;&lt; given[i][j] &lt;&lt; \"        \";\n    }\n    cout &lt;&lt; endl;\n\n    // determinant calculation\n    for (int i = 0; i &lt; dim; i++) {\n        det = det * given[i][i];\n    }\n    cout &lt;&lt; \"determinant = \" &lt;&lt; det;\n    return 0;\n}\n</code></pre>\n\n<p>Here is the output I got:</p>\n\n<pre><code> Please enter the dimension of determinant and the coefficients\n3\nDimension =3\n a00 =  1\n a01 =  2\n a02 =  3\n a10 =  2\n a11 =  3\n a12 =  1\n a20 =  3\n a21 =  1\n a22 =  2\n\nThe input matrix is:\n\n1   2   3\n2   3   1\n3   1   2\nafter 1 transformation: the transformed elements are\n\n\n     given[1][0] = 0         given[1][1] = -1         given[1][2] = -5\n     given[2][0] = 0         given[2][1] = -5         given[2][2] = -7\n\nafter 1 transformation, the given matrix transforms to\n\n       given[0][0] = 1           given[0][1] = 2          given[0][2] = 3\n       given[1][0] = 0           given[1][1] = -1         given[1][2] = -5\n       given[2][0] = 0           given[2][1] = -5         given[2][2] = -7\n\nafter 2 transformation: the transformed elements are\n\n     given[2][0] = 0              given[2][1] = 0         given[2][2] = 18\n\nafter 2 transformation, the given matrix transforms to\n\n       given[0][0] = 1           given[0][1] = 2          given[0][2] = 3\n       given[1][0] = 0           given[1][1] = -1         given[1][2] = -5\n       given[2][0] = 0           given[2][1] = 0          given[2][2] = 18\n\n       given[0][0] = 1           given[0][1] = 2          given[0][2] = 3\n       given[1][0] = 0           given[1][1] = -1         given[1][2] = -5\n       given[2][0] = 0           given[2][1] = 0          given[2][2] = 18\n\n The final transformed matrix :\n\n 1        2        3\n 0        -1        -5\n 0        0        18\n determinant = -18\nProcess returned 0 (0x0)   execution time : 13.801 s\n</code></pre>\n\n<p>Press any key to continue.</p>\n\n<p>The problem is: I am getting the transformed matrix twice after 2nd transformation in the output.\nCan you please help me to improve the code so that it shows the concerned transformed matrix only once?</p>\n"}, {"tags": ["c++", "gcc", "macros", "c-preprocessor", "member"], "comments": [{"owner": {"reputation": 8580, "user_id": 2293156, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/800e791e8e13500e516c9ae77299160a?s=128&d=identicon&r=PG", "display_name": "Amadeus", "link": "https://stackoverflow.com/users/2293156/amadeus"}, "edited": false, "score": 0, "creation_date": 1570051188, "post_id": 58209277, "comment_id": 102796724, "body": "You should do a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> to show what do you want"}, {"owner": {"reputation": 111, "user_id": 11799088, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08ff1a3a0b488508ceec2950189d92be?s=128&d=identicon&r=PG&f=1", "display_name": "cereagni", "link": "https://stackoverflow.com/users/11799088/cereagni"}, "reply_to_user": {"reputation": 8580, "user_id": 2293156, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/800e791e8e13500e516c9ae77299160a?s=128&d=identicon&r=PG", "display_name": "Amadeus", "link": "https://stackoverflow.com/users/2293156/amadeus"}, "edited": false, "score": 0, "creation_date": 1570052567, "post_id": 58209277, "comment_id": 102797124, "body": "@Amadeus I&#39;ve updated the question a sample in Compiler Explorer which I hope will clarify my goal, but I don&#39;t know how to do what I want to do - hence the question and the initial lack of an example"}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1570053687, "post_id": 58209277, "comment_id": 102797384, "body": "<code>this</code> is not &quot;defined&quot; because the preprocessor only knows about <code>#define</code>d names. The fact that it is a keyword is irrelevant. You can <code>#define</code> keywords, although it is really not a good idea, so if you were to <code>#define this this</code>, then <code>defined(this)</code> would be true. Of course, it would be true anywhere after the <code>#define</code> so that doesn&#39;t help you decide whether the current location is inside a member function or not."}, {"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 0, "creation_date": 1570139685, "post_id": 58209277, "comment_id": 102829674, "body": "I can&#39;t see any way to do this. Guess you&#39;ll just need a separate <code>TRACE_THIS</code> macro."}], "owner": {"reputation": 111, "user_id": 11799088, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08ff1a3a0b488508ceec2950189d92be?s=128&d=identicon&r=PG&f=1", "display_name": "cereagni", "link": "https://stackoverflow.com/users/11799088/cereagni"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 71, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1570053141, "creation_date": 1570049938, "last_edit_date": 1570053141, "question_id": 58209277, "link": "https://stackoverflow.com/questions/58209277/checking-if-in-member-function-context", "title": "Checking if in member function context", "body": "<h3>TL;DR</h3>\n\n<p>Is there a way to detect using macros/templates/magic if a function was called from a member function or from a free/static function?</p>\n\n<h3>Some context</h3>\n\n<p>For debugging purposes, I implemented a macro called <code>TRACE(fmt, ...)</code> which writes to file a message with formatted output, with extra information for context (e.g. timestamp, file, function). For an example, calling <code>TRACE(\"Hello %s\", \"world!\");</code> will write <code>(2/10/2019 22:32:58 func@file.cpp:27) Hello world!</code>.</p>\n\n<p>Recently, I noticed that in member functions I usually print the address of the object (<code>this</code>) to have some extra context and differentiate between calls to members of different objects.</p>\n\n<p>As this need is very common, I'd want to improve my <code>TRACE</code> macro to output <code>this</code> if invoked from a member function. Unfortunately, I have no idea how to implement this check - \"is invoked from a context of a member?\"</p>\n\n<p>To clarify, I want to implement a macro TRACE that acts as before in non-member functions, but in member functions the output message will be different and more similar to <code>(2/10/2019 20:32:58 func@file.cpp:27 0x80808080) Hello world!</code>.</p>\n\n<p>To do that, I think I need to differentiate between \"macro is invoked from a member function\" and \"macro is invoked from a non-member function\".</p>\n\n<h3>My Questions</h3>\n\n<ol>\n<li>Can I somehow check if my macro was called from a member function or not?</li>\n<li>If not, can I somehow implement the <code>TRACE</code> macro I want to have?</li>\n</ol>\n\n<p>Note that I use GCC, but I'd prefer to have a cross-platform solution.</p>\n\n<h3>Things I tried</h3>\n\n<p>At first, I tried to check if <code>this</code> is defined, but as it is a keyword it is always \"not defined\" (<code>defined(this)</code> is false). Moreover, if I try to use <code>this</code> outside of a member function, I get a compilation error. In GCC it is <code>invalid use of 'this' in non-member function</code>. Therefore, it seems that the solution will need to get this information in a more hack-y way, but I'm not sure what it should be.</p>\n\n<p>As an example to how my <code>TRACE</code> macro looks like, you can see <a href=\"https://godbolt.org/z/zIFLTy\" rel=\"nofollow noreferrer\">this link</a>. I wish that using <code>TRACE</code> in a member function (e.g. in the ctor of <code>A</code>) will \"automatically\" print the value of <code>this</code>, without needing to pass it explicitly to the macro</p>\n"}, {"tags": ["c++", "int", "ascii", "unsigned", "modulus"], "comments": [{"owner": {"reputation": 7540, "user_id": 4474230, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/713c7ce18010e541853962264a719d83?s=128&d=identicon&r=PG&f=1", "display_name": "Jeffrey", "link": "https://stackoverflow.com/users/4474230/jeffrey"}, "edited": false, "score": 2, "creation_date": 1570049687, "post_id": 58209163, "comment_id": 102796239, "body": "Don&#39;t use <code>pow(2, 24)</code> use <code>1 &lt;&lt; 24</code>. The former is floating point, the latter is integral"}, {"owner": {"user_type": "does_not_exist", "display_name": "user10957435"}, "edited": false, "score": 0, "creation_date": 1570049838, "post_id": 58209163, "comment_id": 102796291, "body": "Try casting each reversed number to a char ad see if that helps."}, {"owner": {"reputation": 61409, "user_id": 485343, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e18b024a122df74275dd2c4486e8a2b4?s=128&d=identicon&r=PG", "display_name": "rustyx", "link": "https://stackoverflow.com/users/485343/rustyx"}, "edited": false, "score": 0, "creation_date": 1570049854, "post_id": 58209163, "comment_id": 102796295, "body": "Please don&#39;t do <code>* pow(2, 24)</code>, instead read about bit shifts (eg <code>&lt;&lt; 24</code>). Incidentally the solution to your issue then becomes trivial as you can simply bit-shift back (<code>&gt;&gt; 24</code>)."}], "answers": [{"tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 2, "last_activity_date": 1570050402, "creation_date": 1570050402, "answer_id": 58209369, "question_id": 58209163, "link": "https://stackoverflow.com/questions/58209163/how-can-i-interpret-an-unsigned-int-value-as-a-four-letter-word/58209369#58209369", "title": "How can I interpret an unsigned int value as a four letter word?", "body": "<p>You can use bit shift operators to do the conversion both ways. You should not use <code>std::pow</code>. That may result in loss of accuracy.</p>\n\n<pre><code>int sum = (fourLetterWord[0] &lt;&lt; 24) +\n          (fourLetterWord[1] &lt;&lt; 16) +\n          (fourLetterWord[2] &lt;&lt; 8) +\n          fourLetterWord[3];   // No need for shifting this number.\n</code></pre>\n\n<p>Please note that I am bitshifting the first character in the string by 24, not the fourth character in the string. </p>\n\n<p>You can extract the characters by bit masking and right shifting.</p>\n\n<pre><code>char digit1 = (sum &amp; 0xFF000000) &gt;&gt; 24;\nchar digit2 = (sum &amp; 0x00FF0000) &gt;&gt; 16;\nchar digit3 = (sum &amp; 0x0000FF00) &gt;&gt; 8;\nchar digit4 = (sum &amp; 0x000000FF); // No need for shifting this number.\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 1, "creation_date": 1570051375, "post_id": 58209379, "comment_id": 102796793, "body": "Note that <code>^</code> is the bitwise XOR operator.  So <code>2^8</code> = <code>2 xor 8</code> = 10 (not 256). Likewise for <code>2^16</code> = <code>2 xor 16</code> = 18 (not 65536), and <code>2^24</code> = <code>2 xor 24</code> = 26 (not 16777216)"}, {"owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "edited": false, "score": 0, "creation_date": 1570051405, "post_id": 58209379, "comment_id": 102796803, "body": "In C++, the <code>^</code> symbol is the bitwise-XOR operator, not the exponentiation operator. Also, because of signed integer division, dividing by these values is unlikely to properly preserve the data at each step, even if you do replace those constructs with the appropriate method to get those values. Please make sure to test your code and verify that it behaves the way you expect it to behave before you recommend it here."}], "tags": [], "owner": {"reputation": 11, "user_id": 12155729, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e756ea5955501c033a6c86e7a5280c14?s=128&d=identicon&r=PG&f=1", "display_name": "Joel", "link": "https://stackoverflow.com/users/12155729/joel"}, "is_accepted": false, "score": -1, "last_activity_date": 1570050448, "creation_date": 1570050448, "answer_id": 58209379, "question_id": 58209163, "link": "https://stackoverflow.com/questions/58209163/how-can-i-interpret-an-unsigned-int-value-as-a-four-letter-word/58209379#58209379", "title": "How can I interpret an unsigned int value as a four letter word?", "body": "<p>You can break it down similar to how you would decompose a decimal number into the 1s place, 10s place 100s place, etc.</p>\n\n<p>To get the 1s place you would take the remainder when dividing by 10 (ie num % 10).</p>\n\n<p>To get the 10s place you would first divide by 10, then repeat the same process: (num / 10) % 10 .</p>\n\n<p>To get the 100s place you would first divide by 100, then repeat the same process: (num / 100) % 10 .</p>\n\n<p>In your example, you are not using base 10, but rather base 2^8. Therefore, you will need to adjust 10 to be 2^8 and 100 (or 10*10) to be 2^16 (or 2^8*2^8), etc.</p>\n\n<p>What you end up with is something like:</p>\n\n<pre><code>fourLetterWord[0] = sum          % 2^8;\nfourLetterWord[1] = (sum / 2^8)  % 2^8;\nfourLetterWord[2] = (sum / 2^16) % 2^8;\nfourLetterWord[3] = (sum / 2^24) % 2^8;\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 12151667, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5572bd5a49f0d6b79283accb1f0adae?s=128&d=identicon&r=PG&f=1", "display_name": "DXMtripper", "link": "https://stackoverflow.com/users/12151667/dxmtripper"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 148, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1570051235, "creation_date": 1570049405, "last_edit_date": 1570051235, "question_id": 58209163, "link": "https://stackoverflow.com/questions/58209163/how-can-i-interpret-an-unsigned-int-value-as-a-four-letter-word", "title": "How can I interpret an unsigned int value as a four letter word?", "body": "<p>My job is to reverse the process I used in my variable int sum. However, I must use the modulus operator along with integer division. Here is my code so far. </p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;iostream&gt;\n#include &lt;iomanip&gt;\n#include &lt;string&gt;\n#include &lt;cmath&gt;\n\nusing namespace std;\n\nint main(){\n    string fourLetterWord;\n\n    cout &lt;&lt; setw(10) &lt;&lt; \"\" &lt;&lt; \"Please enter a four letter word! \";\n    while (cin &gt;&gt; fourLetterWord)\n    {\n        if (fourLetterWord.length() == 4)\n        {\n            cout &lt;&lt; setw(10) &lt;&lt; \"\" &lt;&lt; \"The ASCII value of \" &lt;&lt; fourLetterWord[3] &lt;&lt; \"=\" &lt;&lt; int(fourLetterWord[3]) &lt;&lt; endl;\n            cout &lt;&lt; setw(10) &lt;&lt; \"\" &lt;&lt; \"The ASCII value of \" &lt;&lt; fourLetterWord[2] &lt;&lt; \" = \" &lt;&lt; int(fourLetterWord[2]) &lt;&lt; endl;\n            cout &lt;&lt; setw(10) &lt;&lt; \"\" &lt;&lt; \"The ASCII value of \" &lt;&lt; fourLetterWord[1] &lt;&lt; \" = \" &lt;&lt; int(fourLetterWord[1]) &lt;&lt; endl;\n            cout &lt;&lt; setw(10) &lt;&lt; \"\" &lt;&lt; \"The ASCII value of \" &lt;&lt; fourLetterWord[0] &lt;&lt; \" = \" &lt;&lt; int(fourLetterWord[0]) &lt;&lt; endl;\n\n            int sum = fourLetterWord[3] * pow(2, 24) + fourLetterWord[2] * pow(2, 16) +  fourLetterWord[1] * pow(2, 8) + fourLetterWord[0] * pow(2, 0);\n\n            cout &lt;&lt; setw(10) &lt;&lt; \"\" &lt;&lt; \"If the four bytes of \" &lt;&lt; fourLetterWord &lt;&lt; \" were read as an int, its value would be \" &lt;&lt; sum &lt;&lt; endl;\n            cout &lt;&lt; setw(10) &lt;&lt; \"\" &lt;&lt; \"Let's reverse the process. \" &lt;&lt; endl;\n            cout &lt;&lt; setw(10) &lt;&lt; \"\" &lt;&lt; \"Enter an unsigned int value: \";\n            while(cin &gt;&gt; sum)\n            {\n                cout &lt;&lt; setw(10) &lt;&lt; \"\" &lt;&lt; sum % int(fourLetterWord[3]) * pow(2, 24) + sum %     (fourLetterWord[2]) * pow(2, 16) \n                + sum % int(fourLetterWord[1]) * pow(2, 8) + sum % int(fourLetterWord[0]) * pow(2, 0);\n            }\n        }\n        else\n        {\n            cout &lt;&lt; setw(10) &lt;&lt; \"\" &lt;&lt; \"Please re-enter a four letter word.\";\n            cin &gt;&gt; fourLetterWord;\n        }\n    }\n}\n</code></pre>\n\n<p>When I output this I get: </p>\n\n<pre>\n          Please enter a four letter word! FORE\n\n          The ASCII value of E = 69\n          The ASCII value of R = 82\n          The ASCII value of O = 79\n          The ASCII value of F = 70\n\n          If the four bytes of FORE were read as an integer, its value would  be 1163022150\n          Let's reverse the process. \n          Enter an unsigned integer value: 1163022150\n          5.58767e+08 \n</pre>\n\n<p>I need help getting my value 1163022150 to become the word FORE.</p>\n"}, {"tags": ["c++", "graphics", "windows-10"], "comments": [{"owner": {"reputation": 805, "user_id": 7908019, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-wBTC1gSxMPU/AAAAAAAAAAI/AAAAAAAAABY/85JVWoAxQI0/photo.jpg?sz=128", "display_name": "Gerard097", "link": "https://stackoverflow.com/users/7908019/gerard097"}, "edited": false, "score": 0, "creation_date": 1570049919, "post_id": 58209136, "comment_id": 102796326, "body": "C++ by itself doesn&#39;t contain graphics support. You have to search for a graphics framework like SFML, Qt, ImGUI, etc."}, {"owner": {"reputation": 41485, "user_id": 2521214, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/nd58V.jpg?s=128&g=1", "display_name": "Spektre", "link": "https://stackoverflow.com/users/2521214/spektre"}, "edited": false, "score": 0, "creation_date": 1570086925, "post_id": 58209136, "comment_id": 102804573, "body": "GDI/GL/DirectX .... for simple drawings I would chose GDI  ..."}], "owner": {"reputation": 548, "user_id": 11145447, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-9W9HTSpL-RQ/AAAAAAAAAAI/AAAAAAAAAUw/a8kqhUeYRYM/photo.jpg?sz=128", "display_name": "programmerRaj", "link": "https://stackoverflow.com/users/11145447/programmerraj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 45, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1570049223, "creation_date": 1570049223, "question_id": 58209136, "link": "https://stackoverflow.com/questions/58209136/how-to-draw-shapes-lines-and-arcs-with-c", "title": "How to draw shapes, lines, and arcs with c++", "body": "<p>I'm working on a program that calculates the <a href=\"https://www.youtube.com/watch?v=FGC5TdIiT9U\" rel=\"nofollow noreferrer\">Recaman Sequence.</a> I'm trying to graph it by drawing arcs like in numberphile.</p>\n\n<p>I've searched YouTube and there are videos on graphics.h. However, I've heard graphics.h is outdated. Is there a new thing similar to that? Is there another method, or should I try to install graphics.h? Also, I'm running this on a Windows 10 computer.</p>\n"}, {"tags": ["c++", "c++11", "templates", "sfinae"], "comments": [{"owner": {"reputation": 7273, "user_id": 2193968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1beed39f2b04409ff584a0af1d59325c?s=128&d=identicon&r=PG", "display_name": "Jerry Jeremiah", "link": "https://stackoverflow.com/users/2193968/jerry-jeremiah"}, "edited": false, "score": 0, "creation_date": 1570052470, "post_id": 58209002, "comment_id": 102797092, "body": "You are still converting the lambda into a std::function (when constructing a std::function heap space is allocated)  even when cond is false.   You would need to ditch the lambda and std::function and just use a function pointer.  <a href=\"https://www.godbolt.org/z/tAaL4o\" rel=\"nofollow noreferrer\">godbolt.org/z/tAaL4o</a>   You were probably hoping that you could use bind to pass parameters without log knowing...  The other thing you could do is use an implementation of a function object that doesn&#39;t put anything on the heap - maybe something like <a href=\"https://www.codeproject.com/Articles/7150/Member-Function-Pointers-and-the-Fastest-Possible\" rel=\"nofollow noreferrer\">codeproject.com/Articles/7150/&hellip;</a>."}, {"owner": {"reputation": 929, "user_id": 4253931, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b751517b9a663cda1d8ab07027bb59a?s=128&d=identicon&r=PG&f=1", "display_name": "eike", "link": "https://stackoverflow.com/users/4253931/eike"}, "edited": false, "score": 0, "creation_date": 1570053106, "post_id": 58209002, "comment_id": 102797238, "body": "<code>if constexpr</code> added in C++17 would be my way to go instead of SFINAE (<a href=\"https://en.cppreference.com/w/cpp/language/if\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/language/if</a>)"}, {"owner": {"reputation": 1030, "user_id": 4080543, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/09a1ce48bfe85fb56524408afe18fe89?s=128&d=identicon&r=PG&f=1", "display_name": "MTMD", "link": "https://stackoverflow.com/users/4080543/mtmd"}, "reply_to_user": {"reputation": 7273, "user_id": 2193968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1beed39f2b04409ff584a0af1d59325c?s=128&d=identicon&r=PG", "display_name": "Jerry Jeremiah", "link": "https://stackoverflow.com/users/2193968/jerry-jeremiah"}, "edited": false, "score": 0, "creation_date": 1570054132, "post_id": 58209002, "comment_id": 102797491, "body": "Thank you @JerryJeremiah for your comment. I changed to code accordingly (have to pass parameters to the function tho.). Can you please kindly share your thoughts on the revised code?"}], "answers": [{"tags": [], "owner": {"reputation": 8857, "user_id": 3414900, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/KlvbC.jpg?s=128&g=1", "display_name": "bartop", "link": "https://stackoverflow.com/users/3414900/bartop"}, "is_accepted": true, "score": 1, "last_activity_date": 1570110185, "creation_date": 1570110185, "answer_id": 58220461, "question_id": 58209002, "link": "https://stackoverflow.com/questions/58209002/sfinae-based-ifdef/58220461#58220461", "title": "SFINAE-based ifdef", "body": "<p>In general one can never be sure with <code>inline</code> if it will work since it is more of a clue for the compiler than a real requirement (in the matter of the inlining of course, in matter of linkage and variables it is pretty strict). Of course it is highly probable that compiler will optimize away unnecessary calls to <code>log</code> but it is not required by the standard. As said in <a href=\"https://en.cppreference.com/w/cpp/language/inline\" rel=\"nofollow noreferrer\">cpp reference</a></p>\n\n<blockquote>\n  <p>Since this meaning of the keyword inline is non-binding, compilers are\n  free to use inline substitution for any function that's not marked\n  inline, and are free to generate function calls to any function marked\n  inline.</p>\n</blockquote>\n\n<p>To be sure you would have to use <code>__forceinline</code> compiler extension</p>\n"}], "owner": {"reputation": 1030, "user_id": 4080543, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/09a1ce48bfe85fb56524408afe18fe89?s=128&d=identicon&r=PG&f=1", "display_name": "MTMD", "link": "https://stackoverflow.com/users/4080543/mtmd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 0, "accepted_answer_id": 58220461, "answer_count": 1, "score": 0, "last_activity_date": 1570110185, "creation_date": 1570048461, "last_edit_date": 1570054012, "question_id": 58209002, "link": "https://stackoverflow.com/questions/58209002/sfinae-based-ifdef", "title": "SFINAE-based ifdef", "body": "<p><strong>Trivia</strong></p>\n\n<p>It is safe to use <code>#ifdef</code> in case we want the compiler to optimize some part of the code away as shown in what follows.</p>\n\n<pre><code>#ifdef LOG\nmtmd();\n#endif\n</code></pre>\n\n<p>Hence, if <code>LOG</code> isn't defined during the compile time, there will be no overhead during execution. </p>\n\n<p><strong>Question</strong></p>\n\n<p>I'm interested to realize the same mechanism using SFINAE. A simplified version of the code is shown in what follows.</p>\n\n<pre><code>template &lt;bool cond, typename std::enable_if&lt;cond&gt;::type* = nullptr&gt;\ninline void log(void (*func)(int, int), int in, int out) {\n (*func)(in, out);\n}\n\ntemplate &lt;bool cond, typename std::enable_if&lt;!cond&gt;::type* = nullptr&gt;\ninline void log(void (*func)(int, int), int in, int out) {}\n</code></pre>\n\n<p>I can use it in the following form.</p>\n\n<pre><code>void mtmd(int x, int y) { /* Do something */}\n\nint main() {\n  constexpr cond = true; // or flase\n  int x, y;\n  log&lt;cond&gt;(&amp;mtmd, x, y);\n}\n</code></pre>\n\n<p>The question is, when <code>cond</code> is <code>false</code> is there going to be any overhead or the compiler optimizes everything away since the <code>log</code> function is <code>inline</code>?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 15044, "user_id": 416574, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/80e6a3e7975350dea41b2cf3fa46c407?s=128&d=identicon&r=PG", "display_name": "pstrjds", "link": "https://stackoverflow.com/users/416574/pstrjds"}, "edited": false, "score": 1, "creation_date": 1570048265, "post_id": 58208852, "comment_id": 102795754, "body": "The problem is that you are calling the <code>std::string::insert</code> overload that accepts a <code>char</code>, but both of those overloads require you to give an <code>iterator</code> for the position as opposed to an index. See here: <a href=\"https://en.cppreference.com/w/cpp/string/basic_string/insert\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/string/basic_string/insert</a>  If you changed to call the overload that adds a count (which is what you are accomplishing with your loop), you could call <code>x.insert(i, d, x[i])</code>"}, {"owner": {"reputation": 15044, "user_id": 416574, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/80e6a3e7975350dea41b2cf3fa46c407?s=128&d=identicon&r=PG", "display_name": "pstrjds", "link": "https://stackoverflow.com/users/416574/pstrjds"}, "edited": false, "score": 0, "creation_date": 1570048735, "post_id": 58208852, "comment_id": 102795902, "body": "Just a note - as @JimRhodes pointed out, if a string contains a vowel, you are going to end up never exiting your for loop, so you need to think about how you are approaching the problem and make some other adjustments to your code."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 1, "creation_date": 1570049165, "post_id": 58208852, "comment_id": 102796077, "body": "You should convert your letter to upper case or lower case before comparison.  Research <code>std::toupper</code> and <code>std::tolower</code>."}], "answers": [{"comments": [{"owner": {"reputation": 15044, "user_id": 416574, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/80e6a3e7975350dea41b2cf3fa46c407?s=128&d=identicon&r=PG", "display_name": "pstrjds", "link": "https://stackoverflow.com/users/416574/pstrjds"}, "edited": false, "score": 0, "creation_date": 1570048445, "post_id": 58208979, "comment_id": 102795824, "body": "There is a viable one, this one <code>basic_string&amp; insert( size_type index, size_type count, CharT ch );</code> and it is actually the one that would do exactly what is intended. With that overload you could remove the for loop for insertion."}, {"owner": {"reputation": 16695, "user_id": 10147399, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a6d433902192f8bb03857ae1b849d4f?s=128&d=identicon&r=PG&f=1", "display_name": "Ayxan Haqverdili", "link": "https://stackoverflow.com/users/10147399/ayxan-haqverdili"}, "reply_to_user": {"reputation": 15044, "user_id": 416574, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/80e6a3e7975350dea41b2cf3fa46c407?s=128&d=identicon&r=PG", "display_name": "pstrjds", "link": "https://stackoverflow.com/users/416574/pstrjds"}, "edited": false, "score": 0, "creation_date": 1570048697, "post_id": 58208979, "comment_id": 102795889, "body": "@pstrjds How is that one viable? OP passes 2 parameters, not 3. OP could have called some other function and passed some other parameters, but the question is about this particular error."}, {"owner": {"reputation": 15044, "user_id": 416574, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/80e6a3e7975350dea41b2cf3fa46c407?s=128&d=identicon&r=PG", "display_name": "pstrjds", "link": "https://stackoverflow.com/users/416574/pstrjds"}, "edited": false, "score": 0, "creation_date": 1570049386, "post_id": 58208979, "comment_id": 102796137, "body": "Removed my downvote after the edit. My objection was with both the &quot;no viable&quot; statement along with saying that OP probably meant to pass an iterator when there is no iterator in the code. The combination led me to the conclusion that this answer was unhelpful. Obviously others disagree."}], "tags": [], "owner": {"reputation": 16695, "user_id": 10147399, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a6d433902192f8bb03857ae1b849d4f?s=128&d=identicon&r=PG&f=1", "display_name": "Ayxan Haqverdili", "link": "https://stackoverflow.com/users/10147399/ayxan-haqverdili"}, "is_accepted": false, "score": 1, "last_activity_date": 1570048826, "last_edit_date": 1570048826, "creation_date": 1570048347, "answer_id": 58208979, "question_id": 58208852, "link": "https://stackoverflow.com/questions/58208852/unable-to-convert-argument-for-string-insert-function/58208979#58208979", "title": "Unable to convert argument for string insert function", "body": "<p>You can find <code>std::string::insert</code> overloads in <a href=\"https://en.cppreference.com/w/cpp/string/basic_string/insert\" rel=\"nofollow noreferrer\">this</a> reference. None of the overloads are viable given the parameters you pass (<code>int</code> and <code>char</code>). Hence the error.</p>\n"}, {"tags": [], "owner": {"reputation": 4299, "user_id": 798346, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/d7e5d155178f095778086f1cf84142ce?s=128&d=identicon&r=PG", "display_name": "Jim Rhodes", "link": "https://stackoverflow.com/users/798346/jim-rhodes"}, "is_accepted": false, "score": 3, "last_activity_date": 1570048596, "creation_date": 1570048596, "answer_id": 58209021, "question_id": 58208852, "link": "https://stackoverflow.com/questions/58208852/unable-to-convert-argument-for-string-insert-function/58209021#58209021", "title": "Unable to convert argument for string insert function", "body": "<p>There is a version of insert that takes a position, count and char. You will want to use that instead of for loop.</p>\n\n<pre><code>int d = rand() % 5 + 1;\nx.insert(i, d, x[i]);\n</code></pre>\n\n<p>But I don't think your main loop will ever end because it will always match an inserted vowel.</p>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user10957435"}, "is_accepted": false, "score": 1, "last_activity_date": 1570048815, "creation_date": 1570048815, "answer_id": 58209059, "question_id": 58208852, "link": "https://stackoverflow.com/questions/58208852/unable-to-convert-argument-for-string-insert-function/58209059#58209059", "title": "Unable to convert argument for string insert function", "body": "<p>The problem is that while <a href=\"https://en.cppreference.com/w/cpp/string/basic_string/insert\" rel=\"nofollow noreferrer\">there are many overloads to insert,</a>\n none of them are what you are using.</p>\n\n<p>Here are is what you should try instead:</p>\n\n<pre><code>x.insert(i, 1, x[i]);\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 12155947, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d35c8e3d3815862f47438f618ac7d2a7?s=128&d=identicon&r=PG&f=1", "display_name": "deptage", "link": "https://stackoverflow.com/users/12155947/deptage"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "answer_count": 3, "score": 3, "last_activity_date": 1570053426, "creation_date": 1570047623, "last_edit_date": 1570053426, "question_id": 58208852, "link": "https://stackoverflow.com/questions/58208852/unable-to-convert-argument-for-string-insert-function", "title": "Unable to convert argument for string insert function", "body": "<p>I need help with my homework. I have to write a program which multiplies random vowels in random numbers. Here's my code. I have included libraries: <code>iostream</code>, <code>string</code>, <code>cstdlib</code> and <code>ctime</code>.\nWhen I compile, i get the following error:  </p>\n\n<blockquote>\n<pre><code>\u201estd::_String_iterator&lt;std::_String_val&lt;std::_Simple_types&lt;_Elem&gt;&gt;&gt; std::basic_string&lt;_Elem,std::char_traits&lt;char&gt;,std::allocator&lt;char&gt;&gt;::insert(const std::_String_const_iterator&lt;std::_String_val&lt;std::_Simple_types&lt;_Elem&gt;&gt;&gt;,const unsigned int,const _Elem)\u201d: nie mo\u017cna dokona\u0107 konwersji argumentu 1 z \u201eint\u201d do \u201econst std::_String_const_iterator&lt;std::_String_val&lt;std::_Simple_types&lt;_Elem&gt;&gt;&gt;\u201d\n</code></pre>\n</blockquote>\n\n<pre><code>using namespace std;\nint main() {\n  srand(time(0));\n  string x;\n  getline(cin, x);\n\n  for (int i = 0; i &lt; x.size(); i++) {\n    if (x[i] == 'a' || x[i] == 'e' || x[i] == 'i' || x[i] == 'o' ||\n        x[i] == 'u' || x[i] == 'y' || x[i] == 'A' || x[i] == 'E' ||\n        x[i] == 'I' || x[i] == 'O' || x[i] == 'U' || x[i] == 'Y') {\n      int d = rand() % 5 + 1;\n      for (int j = 0; j &lt; d; j++) {\n        x.insert(i, x[i]);\n      }\n    }\n  }\n  cout &lt;&lt; x;\n}\n</code></pre>\n"}, {"tags": ["c++", "multithreading", "atomic", "memory-barriers", "stdatomic"], "comments": [{"owner": {"reputation": 7540, "user_id": 4474230, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/713c7ce18010e541853962264a719d83?s=128&d=identicon&r=PG&f=1", "display_name": "Jeffrey", "link": "https://stackoverflow.com/users/4474230/jeffrey"}, "edited": false, "score": 2, "creation_date": 1570047842, "post_id": 58208837, "comment_id": 102795605, "body": "I don&#39;t think you can refer to absolute time, as in &quot;has finished&quot;. You need to see the two threads not sharing a common time reference. The guarantees you have is that all reads and writes will appear consistent. Nothing about <i>when</i>. But hey, I&#39;m not confident, so looking forward to solid answers."}, {"owner": {"reputation": 2920, "user_id": 1469714, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/R5rUf.png?s=128&g=1", "display_name": "xryl669", "link": "https://stackoverflow.com/users/1469714/xryl669"}, "edited": false, "score": 1, "creation_date": 1570048322, "post_id": 58208837, "comment_id": 102795779, "body": "For this simple case, you don&#39;t need <code>atomic_thread_fence</code> here, since you can&#39;t tell when <code>f1</code> will run compared to <code>f2</code>. So the only integrity you can ensure is that the compiler will not see an intermediate value when it&#39;s incrementing <code>b</code> or accessing it (and it&#39;ll not reorder the code)."}, {"owner": {"reputation": 299, "user_id": 8569915, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98a7276f14ba4c0c329b9218809ba947?s=128&d=identicon&r=PG&f=1", "display_name": "Tes", "link": "https://stackoverflow.com/users/8569915/tes"}, "edited": false, "score": 0, "creation_date": 1570048574, "post_id": 58208837, "comment_id": 102795860, "body": "I understand there is a race between t1 and t2. But what I wanted to know is will t2 see <code>b</code> changed assuming t1 executes <code>f1</code> before t2 executes <code>f2</code>?"}, {"owner": {"reputation": 3839, "user_id": 9171697, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/475b59ee1312dc014fbe1eebcd91d307?s=128&d=identicon&r=PG&f=1", "display_name": "Meowmere", "link": "https://stackoverflow.com/users/9171697/meowmere"}, "edited": false, "score": 1, "creation_date": 1570065668, "post_id": 58208837, "comment_id": 102799694, "body": "No. Memory Order guarantees the order side effects become visible, not when or whether they become visible."}, {"owner": {"reputation": 299, "user_id": 8569915, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98a7276f14ba4c0c329b9218809ba947?s=128&d=identicon&r=PG&f=1", "display_name": "Tes", "link": "https://stackoverflow.com/users/8569915/tes"}, "reply_to_user": {"reputation": 3839, "user_id": 9171697, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/475b59ee1312dc014fbe1eebcd91d307?s=128&d=identicon&r=PG&f=1", "display_name": "Meowmere", "link": "https://stackoverflow.com/users/9171697/meowmere"}, "edited": false, "score": 0, "creation_date": 1570067702, "post_id": 58208837, "comment_id": 102800045, "body": "@KaenbyouRin, you mean even with <code>std::atomic_thread_fence(std::memory_order_seq_cst)</code>, t2 might not see <code>b == 1</code> when t2 starts <code>f2</code> after t1 finishes?"}, {"owner": {"reputation": 1745, "user_id": 7478734, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98041a41db9a4159ace877a35aa849a3?s=128&d=identicon&r=PG&f=1", "display_name": "Dmytro Mukalov", "link": "https://stackoverflow.com/users/7478734/dmytro-mukalov"}, "edited": false, "score": 1, "creation_date": 1570111786, "post_id": 58208837, "comment_id": 102817646, "body": "<code>Assume t1 has finished f1 and then t2 just started f2</code> this is very synthetic condition as it isn&#39;t verified deterministically in your code, but in case of hypothetical situation when the execution accidentally happens to meet this condition, the last issued fence guarantees visibility <code>b</code> store operation to another thread. But again in the given code it may happen rather accidentally than intentionally."}, {"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "edited": false, "score": 0, "creation_date": 1570344398, "post_id": 58208837, "comment_id": 102879241, "body": "Can you please explain the purpose of that code?"}], "answers": [{"comments": [{"owner": {"reputation": 299, "user_id": 8569915, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98a7276f14ba4c0c329b9218809ba947?s=128&d=identicon&r=PG&f=1", "display_name": "Tes", "link": "https://stackoverflow.com/users/8569915/tes"}, "edited": false, "score": 0, "creation_date": 1570658701, "post_id": 58248188, "comment_id": 102986734, "body": "Thanks for the detailed explanation!"}], "tags": [], "owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "is_accepted": true, "score": 2, "last_activity_date": 1570277680, "creation_date": 1570277680, "answer_id": 58248188, "question_id": 58208837, "link": "https://stackoverflow.com/questions/58208837/synchronization-with-c-atomic-memory-fence/58248188#58248188", "title": "Synchronization with C++ atomic memory fence", "body": "<p>Your code is overcomplicated.  <code>a=0</code> never changes so it <em>always</em> reads as 0.  You might as well just have <code>atomic&lt;int&gt; b=0;</code> and only a single load that just return <code>b.load</code>.</p>\n\n<blockquote>\n  <p>Assume t1 has finished f1 and then t2 just started f2, will t2 see b incremented?</p>\n</blockquote>\n\n<p>There's no way for you to detect that this is how the timing worked out, unless you put <code>t1.join()</code> <em>ahead</em> of <code>std::thread t2(f2);</code> construction.  That would require that everything in thread 2 is sequenced after everything in thread 1.  (I think even without a <code>seq_cst</code> fence at the end of f1, but that doesn't hurt.  I think thread.join makes sure everything done inside a thread is visible after <code>thread.join</code>)</p>\n\n<p>But yes, that ordering can happen by chance, and then of course it works.</p>\n\n<p>There's no guarantee that's even a meaningful condition in C++ terms.</p>\n\n<p>But sure for most (all?) real implementations it's something that can happen.  And a <code>thread_fence(mo_seq_cst)</code> will compile to a full barrier that blocks that thread until the store commits (becomes globally visible to all threads).  So execution can't leave f1 until reads from other threads can see the updated value of <code>b</code>.  (The C++ standard defines ordering and fences in terms of creating synchronizes-with relationships, not in terms of compiling to full barriers that flush the store buffer.  The standard doesn't mention a store buffer or StoreLoad reordering or any of the CPU memory-order things.)</p>\n\n<p>Given the synthetic condition, the threads actually are ordered wrt. each other, and it works just like if everything had been done in a single thread.</p>\n\n<hr>\n\n<p>The loads in <code>diff()</code> aren't ordered wrt. each other because they're both <code>mo_relaxed</code>.  But <code>a</code> is never modified by any thread so the only question is whether <code>b.load()</code> can happen before the thread even started, before the <code>f1</code> store is visible.  In real implementations it can't because of what \"<em>and then</em> t2 just started f2\" means.  <strong>If it could load the old value, then you wouldn't be able to say \"<em>and then</em>\", so it's almost a tautology.</strong></p>\n\n<p>The <code>thread_fence(seq_cst)</code> before the loads doesn't really help anything.  I guess it stops <code>b.load()</code> from reordering with the thread-startup machinery.</p>\n"}], "owner": {"reputation": 299, "user_id": 8569915, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98a7276f14ba4c0c329b9218809ba947?s=128&d=identicon&r=PG&f=1", "display_name": "Tes", "link": "https://stackoverflow.com/users/8569915/tes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 361, "favorite_count": 0, "accepted_answer_id": 58248188, "answer_count": 1, "score": 1, "last_activity_date": 1570277680, "creation_date": 1570047565, "last_edit_date": 1570262919, "question_id": 58208837, "link": "https://stackoverflow.com/questions/58208837/synchronization-with-c-atomic-memory-fence", "title": "Synchronization with C++ atomic memory fence", "body": "<p>I have a question about the synchronization of the code below using memory fence. </p>\n\n<pre><code>std::atomic&lt;int&gt; a = 0;\nstd::atomic&lt;int&gt; b = 0;\n\nvoid increase_b() {\n  std::atomic_thread_fence(std::memory_order_release);\n  b.store(1, std::memory_ordered_relaxed);\n}\n\nbool diff() {\n  int val_a = a.load(std::memory_ordered_relaxed);\n  int val_b = b.load(std::memory_ordered_relaxed);\n  return val_b &gt; val_a;\n}\n\nvoid f1() {\n  increase_b();\n  std::atomic_thread_fence(std::memory_order_seq_cst);\n}\n\nvoid f2() {\n  std::atomic_thread_fence(std::memory_order_seq_cst);\n  bool result = diff();\n}\n\nint main() {\n  std::thread t1(f1);\n  std::thread t2(f2);\n  t1.join(); t2.join();\n}\n</code></pre>\n\n<p>Assume t1 has finished <code>f1</code> and then t2 just started <code>f2</code>, will t2 \nsee <code>b</code> incremented?</p>\n"}, {"tags": ["c++", "inheritance", "compiler-errors", "multiple-inheritance"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user10957435"}, "edited": false, "score": 4, "creation_date": 1570047844, "post_id": 58208774, "comment_id": 102795606, "body": "Perhaps you need <a href=\"https://en.wikipedia.org/wiki/Virtual_inheritance\" rel=\"nofollow noreferrer\">virtual iheritance</a>?"}, {"owner": {"reputation": 594, "user_id": 2123079, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/a8a94c20ffd4bd50f6c15628fc975219?s=128&d=identicon&r=PG", "display_name": "user2123079", "link": "https://stackoverflow.com/users/2123079/user2123079"}, "edited": false, "score": 0, "creation_date": 1570048676, "post_id": 58208774, "comment_id": 102795881, "body": "@Chipster, can you please rewrite your comment to answer? I want to mark it as &quot;answer&quot;. Indeed, virtual inheritance solved my problem. I actually tried it, but I did it in a wrong way. And after few minutes of the fresh air I did it :)"}, {"owner": {"user_type": "does_not_exist", "display_name": "user10957435"}, "edited": false, "score": 0, "creation_date": 1570049141, "post_id": 58208774, "comment_id": 102796068, "body": "I wrote it as an answer for you."}], "answers": [{"tags": [], "owner": {"reputation": 511, "user_id": 2379240, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/61af3f729fb21971b5de6cff4619397b?s=128&d=identicon&r=PG", "display_name": "Braaedy", "link": "https://stackoverflow.com/users/2379240/braaedy"}, "is_accepted": false, "score": 2, "last_activity_date": 1570047905, "creation_date": 1570047905, "answer_id": 58208905, "question_id": 58208774, "link": "https://stackoverflow.com/questions/58208774/compilation-error-when-using-multiple-inheritance/58208905#58208905", "title": "Compilation error when using multiple inheritance", "body": "<p>The function <code>a</code> <em>is</em> pure virtual, as in it's not implemented anywhere in the hierarchy <code>MainClass</code> -> <code>ITest2</code> -> <code>ITest</code>.</p>\n\n<p>See the \"<a href=\"https://en.wikipedia.org/wiki/Multiple_inheritance#The_diamond_problem\" rel=\"nofollow noreferrer\">deadly diamond of death</a>\" problem of multi-inheritance for more discussion.</p>\n\n<p>The easiest solution is to avoid doing this type of inheritance if you're not exactly sure of what you're doing. Second, you may consider implementing <code>a</code> in <code>MainClass</code> which forwards the arguments to a qualified call to <code>a</code> in <code>Test1</code> if that's what you were expecting.</p>\n"}, {"tags": [], "owner": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "is_accepted": false, "score": 2, "last_activity_date": 1570048775, "last_edit_date": 1570048775, "creation_date": 1570048055, "answer_id": 58208932, "question_id": 58208774, "link": "https://stackoverflow.com/questions/58208774/compilation-error-when-using-multiple-inheritance/58208932#58208932", "title": "Compilation error when using multiple inheritance", "body": "<p><code>MainClass</code> has two base classes, both of which are derived (directly or indirectly) from <code>ITest</code>.  So there are two <code>ITest</code> subobjects in <code>MainClass</code>.  One of these base classes provides an override for <code>a</code>, but the other (<code>ITest2</code>) does not.  The implementation in <code>Test1</code> is not accessible from <code>ITest2</code>.  So <code>MainClass</code> will need to provide an implementation.</p>\n\n<p>If you want <code>Test1::a</code> to be called even from the <code>ITest2</code> subobject, you can have <code>MainClass</code> redirect those calls to <code>Test1::a</code>.</p>\n\n<pre><code>struct MainClass: public ExtendedTest1, public ITest2\n{\n    // ...\n    void a() override { ExtendedTest1::a(); }\n};\n</code></pre>\n\n<p>Another possibility is <a href=\"https://stackoverflow.com/questions/21558/in-c-what-is-a-virtual-base-class\">virtual inheritance</a>.</p>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user10957435"}, "is_accepted": true, "score": 2, "last_activity_date": 1570049042, "creation_date": 1570049042, "answer_id": 58209109, "question_id": 58208774, "link": "https://stackoverflow.com/questions/58208774/compilation-error-when-using-multiple-inheritance/58209109#58209109", "title": "Compilation error when using multiple inheritance", "body": "<p>You need <a href=\"https://en.wikipedia.org/wiki/Virtual_inheritance\" rel=\"nofollow noreferrer\">Virtual Inheritance</a>.</p>\n\n<p>Virtual inheritance can get rid of redundant functions:</p>\n\n<blockquote>\n  <p>Instead, if classes B and C inherit virtually from class A, then objects of class D will contain only one set of the member variables from class A.</p>\n</blockquote>\n\n<p>If you inherit virtually, you will get rid of your duplicate abstract function.</p>\n"}], "owner": {"reputation": 594, "user_id": 2123079, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/a8a94c20ffd4bd50f6c15628fc975219?s=128&d=identicon&r=PG", "display_name": "user2123079", "link": "https://stackoverflow.com/users/2123079/user2123079"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 94, "favorite_count": 0, "accepted_answer_id": 58209109, "answer_count": 3, "score": 0, "last_activity_date": 1570094471, "creation_date": 1570047311, "last_edit_date": 1570094471, "question_id": 58208774, "link": "https://stackoverflow.com/questions/58208774/compilation-error-when-using-multiple-inheritance", "title": "Compilation error when using multiple inheritance", "body": "<p>Can't get my program compile. For historical reason I have a bit \"complicated\" hierarchy of the classes in my application. And now I faced with another problem: it won't compile because of this hierarchy. My project is too big to show it here, but below you can see the example that demonstrates the problem. Is there is a simple and elegant way to fix it? Every interface/class has really big amount of methods.\nThanks in advance.</p>\n\n<pre><code>struct ITest\n{\n    virtual ~ITest() {}\n    virtual void a() = 0;\n    // and many other methods\n};\n\nstruct Test1 : public ITest\n{\n    virtual ~Test1() {}\n    virtual void a() override {}\n    // and many other methods overrides from ITest\n    // plus a lot of other logic\n};\n\nstruct ExtendedTest1 : public Test1\n{\n    virtual ~ExtendedTest1() {}\n    // a lot of some other stuff\n};\n\nstruct ITest2 : public ITest\n{\n    virtual ~ITest2(){}\n    // and big count of the its methods and logic\n};\n\nstruct MainClass : public ExtendedTest1, public ITest2\n{\n     virtual ~MainClass(){}\n     // a lot of logic\n};\n\nint main()\n{\n    MainClass mainClassObj;\n    return 0;\n}\n</code></pre>\n\n<p>And the errors:</p>\n\n<pre><code>main.cpp: In function \u2018int main()\u2019:\nmain.cpp:36:15: error: cannot declare variable \u2018mainClassObj\u2019 to be of abstract type \u2018MainClass\u2019\n     MainClass mainClassObj;\n               ^~~~~~~~~~~~\nmain.cpp:28:8: note:   because the following virtual functions are pure within \u2018MainClass\u2019:\n struct MainClass : public ExtendedTest1, public ITest2\n        ^~~~~~~~~\nmain.cpp:4:18: note:    virtual void ITest::a()\n     virtual void a() = 0;\n                  ^\n</code></pre>\n\n<p>Do not judge strictly :)</p>\n\n<p>UPD: before asking this question I really tried virtual inheritance to solve my problem but it didn't work. So after suggestion to try it again, it works) So, replacing these lines solved my problem:</p>\n\n<pre><code>struct Test1 : public ITest  ---&gt;  struct Test1 : virtual public ITest\nstruct ITest2 : public ITest ---&gt; struct ITest2 : virtual public ITest\n</code></pre>\n\n<p>I know, we must avoid virtual inheritance, but we can't 'cause of historical reason and very big amount of code</p>\n\n<p>Thanks everybody for help!</p>\n"}, {"tags": ["c++", "for-loop", "language-lawyer", "c++17"], "comments": [{"owner": {"reputation": 2101, "user_id": 2808510, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/vaEJm.jpg?s=128&g=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/2808510/tim"}, "reply_to_user": {"reputation": 5360, "user_id": 9435815, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xaQWU.jpg?s=128&g=1", "display_name": "r3mus n0x", "link": "https://stackoverflow.com/users/9435815/r3mus-n0x"}, "edited": false, "score": 1, "creation_date": 1570129327, "post_id": 58208459, "comment_id": 102825822, "body": "@r3musn0x I think this is probably a broader question than the one you\u2019ve linked to."}, {"owner": {"reputation": 5360, "user_id": 9435815, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xaQWU.jpg?s=128&g=1", "display_name": "r3mus n0x", "link": "https://stackoverflow.com/users/9435815/r3mus-n0x"}, "reply_to_user": {"reputation": 2101, "user_id": 2808510, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/vaEJm.jpg?s=128&g=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/2808510/tim"}, "edited": false, "score": 1, "creation_date": 1570129885, "post_id": 58208459, "comment_id": 102826043, "body": "@Tim, I agree, however the accepted answer to that question is way more comprehensive and it covers both of them."}, {"owner": {"reputation": 154, "user_id": 2307853, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6844e99a738ded1126fd1c424eb815a?s=128&d=identicon&r=PG", "display_name": "Max Barraclough", "link": "https://stackoverflow.com/users/2307853/max-barraclough"}, "edited": false, "score": 1, "creation_date": 1570287556, "post_id": 58208459, "comment_id": 102869552, "body": "As an aside, it&#39;s against the C++ standard to name your locals with double underscores. <a href=\"https://stackoverflow.com/a/228797/\">stackoverflow.com/a/228797</a>"}], "answers": [{"comments": [{"owner": {"reputation": 16020, "user_id": 9716597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f97c613dca0b157b40551a0d756abeb?s=128&d=identicon&r=PG&f=1", "display_name": "L. F.", "link": "https://stackoverflow.com/users/9716597/l-f"}, "edited": false, "score": 0, "creation_date": 1570080791, "post_id": 58208549, "comment_id": 102802387, "body": "It would be more logical to have this update together with Ranges, probably.  Iterator-sentinel ranges are still very restricted in C++17."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 16020, "user_id": 9716597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f97c613dca0b157b40551a0d756abeb?s=128&d=identicon&r=PG&f=1", "display_name": "L. F.", "link": "https://stackoverflow.com/users/9716597/l-f"}, "edited": false, "score": 2, "creation_date": 1570105809, "post_id": 58208549, "comment_id": 102814122, "body": "@L.F. IIRC ranges was originally slated to be in C++17, instead we got a TS since it wasn&#39;t quite ready.  We still need this if we want to use the ranges TS, or ranges-v3."}, {"owner": {"reputation": 3355, "user_id": 4114447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/aa93321ad023953eaaae28b490855e7a?s=128&d=identicon&r=PG&f=1", "display_name": "Dan M.", "link": "https://stackoverflow.com/users/4114447/dan-m"}, "reply_to_user": {"reputation": 16020, "user_id": 9716597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f97c613dca0b157b40551a0d756abeb?s=128&d=identicon&r=PG&f=1", "display_name": "L. F.", "link": "https://stackoverflow.com/users/9716597/l-f"}, "edited": false, "score": 2, "creation_date": 1570108322, "post_id": 58208549, "comment_id": 102815576, "body": "@L.F. Ranges are a library feature. There is range-v3 lib on github that served as the basis for standardization and it benefited from this standardiese change."}, {"owner": {"reputation": 3771, "user_id": 5386374, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/fGuXb.png?s=128&g=1", "display_name": "Justin Time - Reinstate Monica", "link": "https://stackoverflow.com/users/5386374/justin-time-reinstate-monica"}, "reply_to_user": {"reputation": 16020, "user_id": 9716597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f97c613dca0b157b40551a0d756abeb?s=128&d=identicon&r=PG&f=1", "display_name": "L. F.", "link": "https://stackoverflow.com/users/9716597/l-f"}, "edited": false, "score": 1, "creation_date": 1570127454, "post_id": 58208549, "comment_id": 102825052, "body": "Including the feature in C++17 proper also allows programmers to implement their own sentinels (or similar) if desired, and can potentially allow bugs to be discovered before the associated library additions are ready, @L.F."}], "tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": true, "score": 81, "last_activity_date": 1570047803, "last_edit_date": 1570047803, "creation_date": 1570046269, "answer_id": 58208549, "question_id": 58208459, "link": "https://stackoverflow.com/questions/58208459/why-did-the-range-based-for-loop-specification-change-in-c17/58208549#58208549", "title": "Why did the range based &#39;for&#39; loop specification change in C++17?", "body": "<p>Using</p>\n\n<pre><code>auto __begin = begin_expr, __end = end_expr;\n</code></pre>\n\n<p>requires both <code>begin_expr</code> and <code>end_expr</code> to return the same type.  This means you cannot have a sentinel iterator type that is different from the beginning type.  Using</p>\n\n<pre><code>auto __begin = begin_expr ;\nauto __end = end_expr ;\n</code></pre>\n\n<p>fixes that issue while proving full backwards compatibility with C++14.</p>\n"}, {"tags": [], "owner": {"reputation": 2065, "user_id": 85696, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9d5b650b104a98538d5aab145ea192d?s=128&d=identicon&r=PG", "display_name": "danadam", "link": "https://stackoverflow.com/users/85696/danadam"}, "is_accepted": false, "score": 32, "last_activity_date": 1570046570, "creation_date": 1570046570, "answer_id": 58208609, "question_id": 58208459, "link": "https://stackoverflow.com/questions/58208459/why-did-the-range-based-for-loop-specification-change-in-c17/58208609#58208609", "title": "Why did the range based &#39;for&#39; loop specification change in C++17?", "body": "<p>It is explained later in the \"notes\":</p>\n\n<blockquote>\n  <p>As of C++17, the types of the begin_expr and the end_expr do not have to be the same ...</p>\n</blockquote>\n\n<p>and you can't have that with:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>auto __begin = begin_expr, __end = end_expr;\n</code></pre>\n"}], "owner": {"reputation": 23279, "user_id": 700825, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/6aea6e2f57f2a7b1cd6870375fbdc42f?s=128&d=identicon&r=PG", "display_name": "NoSenseEtAl", "link": "https://stackoverflow.com/users/700825/nosenseetal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5228, "favorite_count": 2, "closed_date": 1570219915, "accepted_answer_id": 58208549, "answer_count": 2, "score": 61, "last_activity_date": 1570209484, "creation_date": 1570045802, "last_edit_date": 1570209484, "question_id": 58208459, "link": "https://stackoverflow.com/questions/58208459/why-did-the-range-based-for-loop-specification-change-in-c17", "closed_reason": "Duplicate", "title": "Why did the range based &#39;for&#39; loop specification change in C++17?", "body": "<p>I was looking over some ugly code (that was modifying the underlying sequence while iterating), and to explore the definition of the range-based <code>for</code> loop, I went to <a href=\"https://en.cppreference.com/w/cpp/language/range-for\" rel=\"noreferrer\">cppreference</a>. </p>\n\n<p>There I noticed something strange:</p>\n\n<p>The range based <code>for</code> loop changed in C++17, but I do not see the reason for the change, and the code looks the same to me (just \"refactored\").\nSo the old one was:</p>\n\n<pre><code>{\n  auto &amp;&amp; __range = range_expression;\n  for (auto __begin = begin_expr, __end = end_expr; __begin != __end; ++__begin) {\n    range_declaration = *__begin;\n    loop_statement\n  }\n} \n</code></pre>\n\n<p>The new one is</p>\n\n<pre><code>{\n  auto &amp;&amp; __range = range_expression;\n  auto __begin = begin_expr;\n  auto __end = end_expr;\n  for ( ; __begin != __end; ++__begin) {\n    range_declaration = *__begin;\n    loop_statement\n  }\n} \n</code></pre>\n\n<p>Why was this change made, and does it make any legal C++14 programs exhibit undefined behavior (<a href=\"https://stackoverflow.com/questions/2766731/what-exactly-do-ib-and-ub-mean\">UB</a>) in C++17?</p>\n"}, {"tags": ["c++", "gcc", "std", "cmath"], "comments": [{"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 3, "creation_date": 1570045733, "post_id": 58208398, "comment_id": 102794776, "body": "What version of gcc you are using? Do you need to enable c++11 support?"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1570045784, "post_id": 58208398, "comment_id": 102794801, "body": "When in doubt, you can look it up on <a href=\"https://en.cppreference.com/w/cpp/numeric/math/sqrt\" rel=\"nofollow noreferrer\">cppreference</a>."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 3, "creation_date": 1570045856, "post_id": 58208398, "comment_id": 102794830, "body": "The reason removing <code>std::</code> works is probably because it falls back to the standard functions provided by C. Note that <code>std::sqrt</code> has several overloads and will use the right &quot;version&quot; of <code>sqrt</code> for the type provided."}, {"owner": {"reputation": 8580, "user_id": 2293156, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/800e791e8e13500e516c9ae77299160a?s=128&d=identicon&r=PG", "display_name": "Amadeus", "link": "https://stackoverflow.com/users/2293156/amadeus"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1570045955, "post_id": 58208398, "comment_id": 102794872, "body": "@Slava <a href=\"http://coliru.stacked-crooked.com/a/638d5ee7e9ed4869\" rel=\"nofollow noreferrer\">coliru.stacked-crooked.com/a/638d5ee7e9ed4869</a>"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1570046059, "post_id": 58208398, "comment_id": 102794907, "body": "Woot, MSVS wins the conformance race today: <a href=\"https://godbolt.org/z/X3-yEH\" rel=\"nofollow noreferrer\">godbolt.org/z/X3-yEH</a>"}, {"owner": {"reputation": 237, "user_id": 6901555, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28f21f290d1767035d21e77b74b09c52?s=128&d=identicon&r=PG&f=1", "display_name": "SmileyCraft", "link": "https://stackoverflow.com/users/6901555/smileycraft"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1570046168, "post_id": 58208398, "comment_id": 102794954, "body": "@Fran&#231;oisAndrieux Where does it give the appropriate information on cppreference?"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1570046280, "post_id": 58208398, "comment_id": 102795007, "body": "@SmileyCraft It shows that <code>sqrtf</code> and <code>sqrtl</code> are both part of <code>namespace std</code> and are provided by <code>&lt;cmath&gt;</code> since C++11. It covers a good part of the question. The missing element seems to be that it looks like this is due to a bug in the standard library implementation (assuming you are compiling with C++11 or later)."}, {"owner": {"reputation": 237, "user_id": 6901555, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28f21f290d1767035d21e77b74b09c52?s=128&d=identicon&r=PG&f=1", "display_name": "SmileyCraft", "link": "https://stackoverflow.com/users/6901555/smileycraft"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1570046504, "post_id": 58208398, "comment_id": 102795113, "body": "@Slava I feel so stupid, I can not figure out which version of gcc I am using. I am using CodeBlocks and MinGW64 and I can not figure out where I can find which version of gcc I am using. But I know for a fact that lambda expressions are working, so it has to be c++11 or later."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1570046552, "post_id": 58208398, "comment_id": 102795133, "body": "@SmileyCraft If you are compiling for C++11 or later then there is nothing wrong with your code."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1570046657, "post_id": 58208398, "comment_id": 102795173, "body": "@Fran&#231;oisAndrieux <a href=\"http://coliru.stacked-crooked.com/a/458af0cf063aca1f\" rel=\"nofollow noreferrer\">Except it wont compile</a>"}, {"owner": {"reputation": 237, "user_id": 6901555, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28f21f290d1767035d21e77b74b09c52?s=128&d=identicon&r=PG&f=1", "display_name": "SmileyCraft", "link": "https://stackoverflow.com/users/6901555/smileycraft"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1570046671, "post_id": 58208398, "comment_id": 102795177, "body": "@Fran&#231;oisAndrieux Right, it says <code>std::sqrtl</code> on the title of the webpage... This makes me even more confused about my error."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1570046737, "post_id": 58208398, "comment_id": 102795208, "body": "@NathanOliver Yes, but I thought that part was clear from earlier comments. But maybe it wasn&#39;t. I was trying to express that the problem is not with the code itself."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1570046761, "post_id": 58208398, "comment_id": 102795217, "body": "@SmileyCraft -- <code>gcc --version</code> from the command line."}, {"owner": {"reputation": 237, "user_id": 6901555, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28f21f290d1767035d21e77b74b09c52?s=128&d=identicon&r=PG&f=1", "display_name": "SmileyCraft", "link": "https://stackoverflow.com/users/6901555/smileycraft"}, "edited": false, "score": 0, "creation_date": 1570046829, "post_id": 58208398, "comment_id": 102795242, "body": "<code>gcc (x86_64-posix-seh-rev0, Built by MinGW-W64 project) 8.1.0</code>"}], "answers": [{"comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 8580, "user_id": 2293156, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/800e791e8e13500e516c9ae77299160a?s=128&d=identicon&r=PG", "display_name": "Amadeus", "link": "https://stackoverflow.com/users/2293156/amadeus"}, "edited": false, "score": 0, "creation_date": 1570047518, "post_id": 58208747, "comment_id": 102795479, "body": "@Amadeus Thanks for that.  I forgot compiler explorer uses libstdc++ for both clang and gcc.  Wandbox uses libc++ for clang and libc++ does not have this bug."}, {"owner": {"reputation": 237, "user_id": 6901555, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28f21f290d1767035d21e77b74b09c52?s=128&d=identicon&r=PG&f=1", "display_name": "SmileyCraft", "link": "https://stackoverflow.com/users/6901555/smileycraft"}, "edited": false, "score": 0, "creation_date": 1570047533, "post_id": 58208747, "comment_id": 102795486, "body": "Does that mean I can not access <code>std::sqrtl</code>? In the comments @Fran&#231;oisAndrieux mentions that <code>sqrtl</code> falls back to the standard functions provided by C. Does this even make a difference?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 237, "user_id": 6901555, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28f21f290d1767035d21e77b74b09c52?s=128&d=identicon&r=PG&f=1", "display_name": "SmileyCraft", "link": "https://stackoverflow.com/users/6901555/smileycraft"}, "edited": false, "score": 1, "creation_date": 1570047596, "post_id": 58208747, "comment_id": 102795512, "body": "@SmileyCraft It means that in gcc you can&#39;t use <code>std::sqrtl</code> because they haven&#39;t implemented it yet.  You can use just <code>sqrtl</code> though."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "reply_to_user": {"reputation": 237, "user_id": 6901555, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28f21f290d1767035d21e77b74b09c52?s=128&d=identicon&r=PG&f=1", "display_name": "SmileyCraft", "link": "https://stackoverflow.com/users/6901555/smileycraft"}, "edited": false, "score": 0, "creation_date": 1570048092, "post_id": 58208747, "comment_id": 102795692, "body": "@SmileyCraft You can use <code>std::sqrt</code> instead, it will use the right overload for the argument type. If you <i>really</i> want to explicitly use <code>sqrtl</code> an alternative to using the global scope function from C by using <code>std::sqrt</code> and either casting the argument to <code>long double</code> or using a <code>long double</code> literal. <code>std::sqrt(5.0l)</code> or <code>std::sqrt(static_cast&lt;long double&gt;(5.0))</code> work."}], "tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": true, "score": 5, "last_activity_date": 1570047540, "last_edit_date": 1570047540, "creation_date": 1570047222, "answer_id": 58208747, "question_id": 58208398, "link": "https://stackoverflow.com/questions/58208398/c-gcc-error-sqrtl-is-not-a-member-of-std/58208747#58208747", "title": "c++ gcc error: &#39;sqrtl&#39; is not a member of &#39;std&#39;", "body": "<p>This is a bug.  Per <a href=\"https://timsong-cpp.github.io/cppwp/cmath.syn\" rel=\"nofollow noreferrer\">[cmath.syn]</a> <code>sqrtl</code> is a member of the <code>std</code> namespace.  </p>\n\n<blockquote>\n<pre><code>namespace std {\n      [...]\n      float sqrt(float x);  // see [library.c]\n      double sqrt(double x);\n      long double sqrt(long double x);  // see [library.c]\n      float sqrtf(float x);\n      long double sqrtl(long double x);\n      [...]\n}\n</code></pre>\n</blockquote>\n\n<p>This is legal code and will compile in <a href=\"https://godbolt.org/z/X3-yEH\" rel=\"nofollow noreferrer\">MSVS</a> and <a href=\"https://wandbox.org/permlink/xP8gMLEk0pDYNQqu\" rel=\"nofollow noreferrer\">Clang</a>.</p>\n\n<p>There is a <a href=\"https://gcc.gnu.org/bugzilla/show_bug.cgi?id=79700\" rel=\"nofollow noreferrer\">bug report for this in GCC</a> but it has not yet been taken care of since it is very trivial and their resources are finite.</p>\n"}], "owner": {"reputation": 237, "user_id": 6901555, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28f21f290d1767035d21e77b74b09c52?s=128&d=identicon&r=PG&f=1", "display_name": "SmileyCraft", "link": "https://stackoverflow.com/users/6901555/smileycraft"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 652, "favorite_count": 0, "accepted_answer_id": 58208747, "answer_count": 1, "score": 2, "last_activity_date": 1570047540, "creation_date": 1570045590, "question_id": 58208398, "link": "https://stackoverflow.com/questions/58208398/c-gcc-error-sqrtl-is-not-a-member-of-std", "title": "c++ gcc error: &#39;sqrtl&#39; is not a member of &#39;std&#39;", "body": "<p>When I try to compile the following program, the compiler gives <code>error: 'sqrtl' is not a member of 'std'</code>.</p>\n\n<pre><code>#include &lt;cmath&gt;\n#include &lt;iostream&gt;\nint main(){\n    std::cout &lt;&lt; std::sqrtl(5.0) &lt;&lt; \"\\n\";\n    return 0;\n}\n</code></pre>\n\n<p>I wanted to know why this happens, so I started experimenting.</p>\n\n<p>When I remove <code>std::</code> in front of <code>sqrtl</code> the program compiles and runs fine. When I additionally remove <code>#include &lt;cmath&gt;</code>, the compiler gives <code>error: 'sqrtl' was not declared in this scope</code>.</p>\n\n<p>At this point I am really confused. There clearly has to be a function <code>sqrtl</code> in <code>cmath</code>, but it is not a member of <code>std</code>?</p>\n\n<p>When I replace <code>sqrtl</code> with <code>sqrt</code> in the original program, the program compiles and runs fine. Same thing when I remove <code>std::</code> in front of <code>sqrt</code>. When I additionally remove <code>#include &lt;cmath&gt;</code>, the compiler gives <code>error: 'sqrt' was not declared in this scope</code>.</p>\n\n<p>Finally, I did the same test with <code>sqrtf</code>. The same thing happened as with <code>sqrtl</code>.</p>\n\n<p>Another thing I find weird is that removing <code>std::</code> lets the program compile in the first place. Especially with <code>sqrt</code> which must be a member of <code>std</code> or the compiler would have given the same error as <code>sqrtl</code> and <code>sqrtf</code>. This is especially confusing since removing <code>std::</code> in front of <code>cout</code> makes the compiler give me <code>error: 'cout' was not declared in this scope</code>.</p>\n\n<p>Can anyone explain why <code>sqrtl</code>, <code>sqrt</code> and <code>sqrtf</code> behave so strangely? Is <code>sqrt</code> even a member of <code>std</code>? How could I find out whether a certain method is a member of <code>std</code> or not?</p>\n\n<p>I know removing <code>std::</code> is an easy fix, but for consistency purposes I like to have <code>std::</code> in front of all <code>std</code> members in my personal library.</p>\n"}, {"tags": ["c++", "arduino", "serial-port"], "answers": [{"tags": [], "owner": {"reputation": 435647, "user_id": 367273, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/f1ed2b0c87f602ef30229f5c4b04eff6?s=128&d=identicon&r=PG", "display_name": "NPE", "link": "https://stackoverflow.com/users/367273/npe"}, "is_accepted": true, "score": 2, "last_activity_date": 1570045474, "creation_date": 1570045474, "answer_id": 58208379, "question_id": 58208284, "link": "https://stackoverflow.com/questions/58208284/arduino-c-first-letter-of-string-missing/58208379#58208379", "title": "Arduino c++ First letter of string missing", "body": "<p>You're reading from <code>Serial1</code> in a loop, overwriting all strings that you receive except for the last one.  What likely happens is that you first read \u2014 and discard \u2014 <code>4</code> and then read \u2014 and print \u2014 the rest.</p>\n\n<p>Moving the <code>print</code> into the loop should fix this:</p>\n\n<pre><code>while(Serial1.available()){\n  MyString = Serial1.readString();\n  client.print(MyString);\n}\n</code></pre>\n"}], "owner": {"reputation": 1262, "user_id": 5597037, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/eaab5b288caf39e6cbd4387c0c3cf344?s=128&d=identicon&r=PG", "display_name": "Mike C.", "link": "https://stackoverflow.com/users/5597037/mike-c"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 58208379, "answer_count": 1, "score": 1, "last_activity_date": 1570045567, "creation_date": 1570045014, "last_edit_date": 1570045567, "question_id": 58208284, "link": "https://stackoverflow.com/questions/58208284/arduino-c-first-letter-of-string-missing", "title": "Arduino c++ First letter of string missing", "body": "<p>I'm receiving a string from one serial port and repeating to a second serial port. The following code works, but the first letter (number 4 in this case) of the string is missing. </p>\n\n<pre><code>while(Serial1.available()){\n  MyString = Serial1.readString();  \n}\nclient.print(MyString); \n</code></pre>\n\n<p>The end result is <code>\"192A4BF,0,3.999023\"</code> when it should be <code>\"4192A4BF,0,3.999023\"</code> </p>\n"}, {"tags": ["c++", "arrays"], "comments": [{"owner": {"reputation": 13, "user_id": 10256981, "user_type": "registered", "profile_image": "https://graph.facebook.com/1815251615232181/picture?type=large", "display_name": "DarkCoder", "link": "https://stackoverflow.com/users/10256981/darkcoder"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1570044678, "post_id": 58208023, "comment_id": 102794284, "body": "@user4581301 i copied few stuffs from geeksforgeeks i never use any other header if i write bits/std once."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1570046639, "post_id": 58208023, "comment_id": 102795166, "body": "<code>freopen(&quot;Test_Cases.in&quot;, &quot;w&quot;, stdout);</code> doesn&#39;t look quite right. This should write the program&#39;s output into the input file."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1570047606, "post_id": 58208023, "comment_id": 102795516, "body": "Looking things over, <code>freopen(&quot;Test_Cases.in&quot;, &quot;w&quot;, stdout);</code> is definitely a problem. It repoints stdout at a file which is is closed shortly after. This means that all of the future attempts to output the program results fail."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1570050008, "post_id": 58208023, "comment_id": 102796354, "body": "<code>#include &lt;S:\\Generate.cpp&gt;</code> is generally not a good idea. You can include anything, but cpp file are typically full of definitions that will result in linker errors if duplicated. This cpp file is an exception and probably should be a it should be a .h header file."}, {"owner": {"reputation": 13, "user_id": 10256981, "user_type": "registered", "profile_image": "https://graph.facebook.com/1815251615232181/picture?type=large", "display_name": "DarkCoder", "link": "https://stackoverflow.com/users/10256981/darkcoder"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1570076074, "post_id": 58208023, "comment_id": 102801359, "body": "@user4581301 if I change the int generate() to int main. And run the program   it writes the output to file. Then i can open it again in array_operation.cpp and can get the output very correctly."}, {"owner": {"reputation": 13, "user_id": 10256981, "user_type": "registered", "profile_image": "https://graph.facebook.com/1815251615232181/picture?type=large", "display_name": "DarkCoder", "link": "https://stackoverflow.com/users/10256981/darkcoder"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1570108882, "post_id": 58208023, "comment_id": 102815929, "body": "@user4581301 did u paste this code to two different files and run them separately."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1570116996, "post_id": 58208023, "comment_id": 102820492, "body": "Separating into two files doesn&#39;t do a bit of good. <code>#include &lt;S:\\Generate.cpp&gt;</code> copies Generate.cpp into ArrayOperation.cpp and then compiles the combined file."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1570117259, "post_id": 58208023, "comment_id": 102820610, "body": "What I expect from this program is for <code>generate</code> to successfully write the input file and <code>main</code> to be able to read this file, perform operations, but be unable to write any subsequent output because it no longer has an open output file."}, {"owner": {"reputation": 13, "user_id": 10256981, "user_type": "registered", "profile_image": "https://graph.facebook.com/1815251615232181/picture?type=large", "display_name": "DarkCoder", "link": "https://stackoverflow.com/users/10256981/darkcoder"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1570210068, "post_id": 58208023, "comment_id": 102853992, "body": "@user4581301 so could you run it finally? could you find the error. pls paste the working code in answer"}, {"owner": {"reputation": 13, "user_id": 10256981, "user_type": "registered", "profile_image": "https://graph.facebook.com/1815251615232181/picture?type=large", "display_name": "DarkCoder", "link": "https://stackoverflow.com/users/10256981/darkcoder"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1570210125, "post_id": 58208023, "comment_id": 102854017, "body": "I m using bloodshed dev c++ on windows. if that helps in anyway."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1570214314, "post_id": 58208023, "comment_id": 102855563, "body": "Ran it yesterday. Saw exactly what I expected. explained the problem a few posts above. You have yet to state what the problem you are having is."}, {"owner": {"reputation": 13, "user_id": 10256981, "user_type": "registered", "profile_image": "https://graph.facebook.com/1815251615232181/picture?type=large", "display_name": "DarkCoder", "link": "https://stackoverflow.com/users/10256981/darkcoder"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1570640807, "post_id": 58208023, "comment_id": 102979593, "body": "@user4581301 the code doesnt run. shows error paste the code in devc++ and if you can fix the code pls do. then write the answer here."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1570644387, "post_id": 58208023, "comment_id": 102981232, "body": "I&#39;m not writing an answer until I know which of the problems in your code you want fixed. You need to be more specific than It doesn&#39;t run.  Give<a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">How to debug small programs</a> a teread for suggestions. But the first thing you should do is rewrite <code>generate</code> so that it doesn&#39;t break <code>stdout</code>. Open the file in a <code>std::ofstream</code> rather than hijacking <code>stdout</code>. Write the numbers into the stream with the <code>&lt;&lt;</code> operator. You don&#39;t even have to close the stream when you&#39;re done. <code>fstream</code> automatically cleans up when it goes out of scope."}], "owner": {"reputation": 13, "user_id": 10256981, "user_type": "registered", "profile_image": "https://graph.facebook.com/1815251615232181/picture?type=large", "display_name": "DarkCoder", "link": "https://stackoverflow.com/users/10256981/darkcoder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 48, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1570044602, "creation_date": 1570043801, "last_edit_date": 1570044602, "question_id": 58208023, "link": "https://stackoverflow.com/questions/58208023/how-to-generate-random-integer-array-and-provide-to-another-file-for-performing", "title": "how to generate random integer array and provide to another file for performing operation on the array", "body": "<p>so i want to run the program only once from the arrayoperation.cpp file which will execute also the generate.cpp and each time a new set of N numbers will be generated.\nwhen i run the program separately it worked not working for this automation. so i will not run two codes separately one after another.</p>\n\n<p><strong>Generate.cpp</strong></p>\n\n<pre><code>#include&lt;bits/stdc++.h&gt; \nusing namespace std; \n\nclass Generate\n{\n// Define the number of runs for the test data \n// generated \n#define RUN 10\n\n// Define the range of the test data generated \n#define MAX 1000\n\npublic:\nint generate(int x) \n{ \n\n    // Uncomment the below line to store \n    // the test data in a file \n     freopen(\"Test_Cases.in\", \"w\", stdout); \n\n    // For random values every time \n    srand(time(NULL)); \n\n    for (int i=1; i&lt;=x; i++) \n        printf(\"%d\\n\", rand() % MAX); \n\n    // Uncomment the below line to store \n    // the test data in a file \n    fclose(stdout); \n    return 0; \n} \n};\n</code></pre>\n\n<p><strong>ArrayOperation.cpp</strong></p>\n\n<pre><code>// Example program\n#include &lt;bits/stdc++.h&gt;\n#include &lt;S:\\Generate.cpp&gt;\nusing namespace std;\n\nint main()\n{\n    int T;\n//  cin&gt;&gt;T;\n\n//while(T--)\n//{\n    int N;\n    cin&gt;&gt;N;\n\n    Generate obj1;\n    obj1.generate(N);\n\n    int A[N];\nstring inFileName = \"Test_Cases.in\";\n    ifstream inFile;\n    inFile.open(inFileName.c_str());\n\n    if (inFile.is_open())\n    {\n        for (int i = 0; i &lt; N; i++)\n        {\n            inFile &gt;&gt; A[i];\n            cout &lt;&lt; A[i] &lt;&lt; \" \";\n        }\n\n        inFile.close(); // CLose input file\n    }\n\nfor(int i=0;i&lt;N;++i)\n{\ncout&lt;&lt;A[i]&lt;&lt;\" \";\n}\n\nint max1=-999;\nint min1=999;\nint i=0;\n\nfor(i=0;i&lt;N-1;i++)\n{\nif(abs(A[i+1]-A[i]) &gt;= max1)\n    max1 = abs(A[i+1] - A[i]);\n\nif(abs(A[i]-A[i+1]) &lt;= min1)\n    min1 = abs(A[i] - A[i+1]);\n}\ncout&lt;&lt;endl;\ncout&lt;&lt; max1&lt;&lt; \" \"&lt;&lt;min1;\n\ncout&lt;&lt;endl;\ncout&lt;&lt;max1-min1;\n}\n\n</code></pre>\n\n<p>so i want to run the program only once from the array operation file which will execute also the generate and each time a new set of N numbers will be generated.\nwhen i run the program separately it worked not working for this calling the first programme method.</p>\n"}, {"tags": ["c++", "c++11", "vector", "stdvector"], "comments": [{"owner": {"reputation": 15260, "user_id": 1968182, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/E5nF2.jpg?s=128&g=1", "display_name": "Ulrich Eckhardt", "link": "https://stackoverflow.com/users/1968182/ulrich-eckhardt"}, "edited": false, "score": 0, "creation_date": 1570043720, "post_id": 58207924, "comment_id": 102793867, "body": "That&#39;s kind of an open-ended question. Of course you can. As a first step, check out the algorithms and see if you reimplemented any of them. Then, replace your implementation with that from the standard library."}, {"owner": {"reputation": 15044, "user_id": 416574, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/80e6a3e7975350dea41b2cf3fa46c407?s=128&d=identicon&r=PG", "display_name": "pstrjds", "link": "https://stackoverflow.com/users/416574/pstrjds"}, "edited": false, "score": 0, "creation_date": 1570044026, "post_id": 58207924, "comment_id": 102793983, "body": "I think the <a href=\"https://stackoverflow.com/a/874160/416574\">this answer</a> on this question will be very helpful to you: <a href=\"https://stackoverflow.com/questions/874134/find-out-if-string-ends-with-another-string-in-c\" title=\"find out if string ends with another string in c\">stackoverflow.com/questions/874134/&hellip;</a>  it is making use of the string::compare function and uses an index computation to calculate the end of the string for comparing."}], "answers": [{"tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": true, "score": 2, "last_activity_date": 1570044684, "last_edit_date": 1570044684, "creation_date": 1570044347, "answer_id": 58208145, "question_id": 58207924, "link": "https://stackoverflow.com/questions/58207924/check-if-a-vector-contains-a-substring-of-another-vector/58208145#58208145", "title": "check if a vector contains a substring of another vector", "body": "<p>Have a look at the <a href=\"https://en.cppreference.com/w/cpp/algorithm/find\" rel=\"nofollow noreferrer\"><code>std::find_if()</code></a> standard algorithm in place of the inner loop.  You can use the <a href=\"https://en.cppreference.com/w/cpp/string/basic_string/compare\" rel=\"nofollow noreferrer\"><code>std::string::compare()</code></a> method to perform substring comparisons without having to actually allocate new <code>std::string</code> objects, as your loops and <code>tail()</code> function currently do.  The only string allocations you need are for the strings pushed into <code>re</code> (and even that allocation can be avoided if you return a <code>std::vector&lt;std::string*&gt;</code> of pointers that point to the strings in te <code>files</code> vector).</p>\n\n<p>Try this:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;algorithm&gt;\n#include &lt;vector&gt;\n\nstd::vector&lt;std::string&gt; filtered_files(const std::vector&lt;std::string&gt;&amp; files, const std::vector&lt;std::string&gt;&amp; extensions)\n{\n    std::vector&lt;std::string&gt; re;\n\n    for(const std::string &amp;f : files)\n    {\n        if (std::find_if(extensions.begin(), extensions.end(),\n            [&amp;](const std::string &amp;ex){\n                return (f.size() &gt;= ex.size()) &amp;&amp; (f.compare(f.size()-ex.size(), ex.size(), ex) == 0);\n            }\n        ) != extensions.end())\n        {\n            re.push_back(f);\n        }\n    }\n\n    return re;\n}\n</code></pre>\n\n<p><a href=\"https://ideone.com/hXGlDk\" rel=\"nofollow noreferrer\">Live Demo</a></p>\n"}, {"tags": [], "owner": {"reputation": 805, "user_id": 7908019, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-wBTC1gSxMPU/AAAAAAAAAAI/AAAAAAAAABY/85JVWoAxQI0/photo.jpg?sz=128", "display_name": "Gerard097", "link": "https://stackoverflow.com/users/7908019/gerard097"}, "is_accepted": false, "score": 1, "last_activity_date": 1570044433, "creation_date": 1570044433, "answer_id": 58208165, "question_id": 58207924, "link": "https://stackoverflow.com/questions/58207924/check-if-a-vector-contains-a-substring-of-another-vector/58208165#58208165", "title": "check if a vector contains a substring of another vector", "body": "<p>There are actually many ways of solving this, personally, this is the way I've achieved it before</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;algorithm&gt;\n#include &lt;string&gt;\n#include &lt;functional&gt;\n#include &lt;vector&gt;\n\nint main()\n{\n    std::vector&lt;std::string&gt; v{\"main.cpp\",\"main.c\",\"main.py\"};\n    std::vector&lt;std::string&gt; ext{\".cpp\", \".c\"};\n    std::vector&lt;std::string&gt; res;\n\n    for (auto&amp; s : v) {\n        auto pos = s.find_last_of('.');            \n        if (pos != s.npos) {\n            char* str = &amp;s[pos];\n            if (std::any_of(ext.begin(), ext.end(), \n                            [str](const string&amp; a) { return str ==  a; })) {\n                res.push_back(s);\n            }\n        }\n    }\n\n    for (auto&amp; r : res)\n        cout &lt;&lt; r &lt;&lt; endl;\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 12068276, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a47dd340c80040beaa0a7c893062620?s=128&d=identicon&r=PG&f=1", "display_name": "wiki2", "link": "https://stackoverflow.com/users/12068276/wiki2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 249, "favorite_count": 0, "accepted_answer_id": 58208145, "answer_count": 2, "score": 1, "last_activity_date": 1570044684, "creation_date": 1570043367, "last_edit_date": 1570043650, "question_id": 58207924, "link": "https://stackoverflow.com/questions/58207924/check-if-a-vector-contains-a-substring-of-another-vector", "title": "check if a vector contains a substring of another vector", "body": "<p>I have file names and I need to check if these files end with any extension of the vector extensions; I would like to use some of the algorithms that are in the library  instead of how I have done it, is there any way?</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;algorithm&gt;\n#include &lt;vector&gt;\n\nstd::string tail(const std::string &amp;st, const size_t len)\n{\n    if (len &gt;= st.size())\n        return st;\n    return st.substr(st.size() - len);\n}\n\nstd::vector&lt;std::string&gt; filtered_files(const std::vector&lt;std::string&gt;&amp; files, const std::vector&lt;std::string&gt;&amp; extensions) {\n\n    std::vector&lt;std::string&gt; re;\n    for(const std::string f : files) {\n        for(const std::string ex : extensions) {\n            if(ex == tail(f,ex.size())) {\n                re.push_back(std::move(f));\n                break;\n            }\n        }\n    }\n    return re;\n}\n\nint main(int argc, char **argv) {\n\n    std::vector&lt;std::string&gt; v{\"main.cpp\",\"main.c\",\"main.py\"};\n    std::vector&lt;std::string&gt; re = filtered_files(v,{\".c\",\".cpp\"});\n    for(const std::string s  :re) {\n        std::cout &lt;&lt; s &lt;&lt; '\\n';\n    }\n\n}\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1570043531, "post_id": 58207856, "comment_id": 102793799, "body": "A much more simpler implementation is to create a <code>std::map&lt;std::pair&lt;std::string, std::string&gt;, std::string&gt;</code>, where the pair of strings are the two colors, and the data is the final color.  That would skip all of the <code>if</code> / <code>else</code> stuff."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1570044275, "post_id": 58207856, "comment_id": 102794081, "body": "First, <a href=\"https://coliru.stacked-crooked.com/a/e6983be6604db459\" rel=\"nofollow noreferrer\">here is an example of what I mentioned</a>.  Second <a href=\"https://coliru.stacked-crooked.com/a/c5e0b17a9c3f699d\" rel=\"nofollow noreferrer\">cannot duplicate your error</a>"}, {"owner": {"reputation": 1, "user_id": 12155473, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mC3vOj2RJOUxqOVvPSm9Ei_UUtAjwT0_nbzqSUk=k-s128", "display_name": "Turgor Pressure", "link": "https://stackoverflow.com/users/12155473/turgor-pressure"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1570045110, "post_id": 58207856, "comment_id": 102794465, "body": "My error will not be duplicated which is the problem its the site where I input the code."}, {"owner": {"reputation": 8580, "user_id": 2293156, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/800e791e8e13500e516c9ae77299160a?s=128&d=identicon&r=PG", "display_name": "Amadeus", "link": "https://stackoverflow.com/users/2293156/amadeus"}, "edited": false, "score": 0, "creation_date": 1570045235, "post_id": 58207856, "comment_id": 102794520, "body": "@TurgorPressure so, exactly, what do you expect us to do to solve your problem? You did not even tell us what kind of error your are facing off"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1570045308, "post_id": 58207856, "comment_id": 102794559, "body": "I don&#39;t know what <code>mimir.io</code> is.  Maybe you should contact the persons who maintain that about your error.  Or you could try the first method I posted with the map, just to see what happens."}, {"owner": {"reputation": 1, "user_id": 12155473, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mC3vOj2RJOUxqOVvPSm9Ei_UUtAjwT0_nbzqSUk=k-s128", "display_name": "Turgor Pressure", "link": "https://stackoverflow.com/users/12155473/turgor-pressure"}, "edited": false, "score": 0, "creation_date": 1570046591, "post_id": 58207856, "comment_id": 102795149, "body": "I apologize for any confusion. I get this error when I input my code to my [class code checking thing]. The top is what I am getting, and the bottom is what I am supposed to get. I am asking if there is another way around this issue while still using if/else if statements.    &lt; Enter a primary color (red, blue, yellow): &lt; Enter a different primary color (red, blue, yellow): &lt; Red and white make green  ---  &gt; Enter a primary color (red, blue, yellow):  &gt; Enter a different primary color (red, blue, yellow):  &gt; You entered invalid colors"}], "answers": [{"tags": [], "owner": {"reputation": 1034, "user_id": 7598851, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47abe5c2cebf84cbffcdc79c5d224faf?s=128&d=identicon&r=PG&f=1", "display_name": "MartinBG", "link": "https://stackoverflow.com/users/7598851/martinbg"}, "is_accepted": false, "score": 0, "last_activity_date": 1570067816, "last_edit_date": 1570067816, "creation_date": 1570059814, "answer_id": 58210643, "question_id": 58207856, "link": "https://stackoverflow.com/questions/58207856/input-validation-within-strings-and-how-to-use-a-flag-to-catch-it/58210643#58210643", "title": "Input validation within strings and how to use a flag to catch it", "body": "<p>Judging from your code, there are 3 valid colors:</p>\n\n<p><code>red</code>, <code>blue</code>, <code>yellow</code></p>\n\n<p>There are 4 possible outputs, depending on provided colors:</p>\n\n<ul>\n<li><code>blue</code> + <code>yellow</code> / <code>yellow</code> + <code>blue</code> -> <code>purple</code></li>\n<li><code>red</code> + <code>yellow</code> / <code>yellow</code> + <code>red</code> -> <code>orange</code></li>\n<li><code>blue</code> + <code>yellow</code> / <code>yellow</code> + <code>blue</code> -> <code>green</code></li>\n<li>Any other color or combination of colors -> <code>invalid</code>.</li>\n</ul>\n\n<p>Your code doesn't apply these rules as any invalid user input that is neither <code>(primaryColor1 == primaryColor2)</code> or <code>(primaryColor1 == red &amp;&amp; primaryColor2 == white)</code> will fall into the final <code>else</code> which produces <code>... and ... make green</code>.</p>\n\n<p>Here's a pseudo-code of if-else statements that comply to the rules:</p>\n\n<ul>\n<li><strong>if</strong> <code>blue</code> <strong>and</strong> <code>yellow</code> <strong>or</strong> <code>yellow</code> <strong>and</strong> <code>blue</code> -> <code>purple</code></li>\n<li><strong>else if</strong> <code>red</code> <strong>and</strong> <code>yellow</code> <strong>or</strong> <code>yellow</code> <strong>and</strong> <code>red</code> -> <code>orange</code></li>\n<li><strong>else if</strong> <code>blue</code> <strong>and</strong> <code>yellow</code> <strong>or</strong> <code>yellow</code> <strong>and</strong> <code>blue</code> -> <code>green</code></li>\n<li><strong>else</strong> <code>invalid</code></li>\n</ul>\n"}], "owner": {"reputation": 1, "user_id": 12155473, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mC3vOj2RJOUxqOVvPSm9Ei_UUtAjwT0_nbzqSUk=k-s128", "display_name": "Turgor Pressure", "link": "https://stackoverflow.com/users/12155473/turgor-pressure"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 51, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1570067816, "creation_date": 1570043071, "last_edit_date": 1570055289, "question_id": 58207856, "link": "https://stackoverflow.com/questions/58207856/input-validation-within-strings-and-how-to-use-a-flag-to-catch-it", "title": "Input validation within strings and how to use a flag to catch it", "body": "<p>I am trying to validate the users input, if they input anything besides <code>red</code>, <code>yellow</code> or <code>blue</code>. Any other input for example <code>white</code> should result in an error message for the user.</p>\n\n<p>I have even tried to put an <code>else if</code> statement to catch it, and it does, but when I use <code>mimir.io</code> (how my class submits code, and gets checked automatically) I get an output that does not match my output. It's very frustrating, but I did try to cheat the code a little because I know the desired response.</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n\n//Variables\nstd::string red = \"red\";\nstd::string blue = \"blue\";\nstd::string yellow = \"yellow\";\nstd::string white = \"white\";\nstd::string primaryColor1 = \"\";\nstd::string primaryColor2 = \"\";\n\n//Input\nint main() {\n    std::cout &lt;&lt; \"Enter a primary color (red, blue, yellow):\" &lt;&lt; std::endl;\n    std::cin &gt;&gt; primaryColor1;\n    std::cout &lt;&lt; \"Enter a different primary color (red, blue, yellow):\" &lt;&lt; std::endl;\n    std::cin &gt;&gt; primaryColor2;\n\n//Processing and Output\n    if (primaryColor1 == primaryColor2) {\n        std::cout &lt;&lt; \"You entered invalid colors\" &lt;&lt; std::endl;\n    } else if ( primaryColor1 == red &amp;&amp; primaryColor2 == white) {\n        std::cout &lt;&lt; \"You entered invalid colors\" &lt;&lt; std::endl;\n    }else if (primaryColor1 == red &amp;&amp; primaryColor2 == blue) {\n        std::cout &lt;&lt; primaryColor1 &lt;&lt;\" and \" &lt;&lt; primaryColor2 &lt;&lt; \" make purple\" &lt;&lt; std::endl;\n    } else if (primaryColor1 == red &amp;&amp; primaryColor2 == yellow) {\n        std::cout &lt;&lt; primaryColor1 &lt;&lt;\" and \" &lt;&lt; primaryColor2 &lt;&lt; \" make orange\" &lt;&lt; std::endl;\n    } else if (primaryColor1 == blue &amp;&amp; primaryColor2 == yellow) {\n        std::cout &lt;&lt; primaryColor1 &lt;&lt;\" and \" &lt;&lt; primaryColor2 &lt;&lt; \" make green\" &lt;&lt; std::endl;\n    }  else if (primaryColor1 == blue &amp;&amp; primaryColor2 == red) {\n        std::cout &lt;&lt; primaryColor1 &lt;&lt;\" and \" &lt;&lt; primaryColor2 &lt;&lt; \" make purple\" &lt;&lt; std::endl;\n    } else if (primaryColor1 == yellow &amp;&amp; primaryColor2 == red) {\n        std::cout &lt;&lt; primaryColor1 &lt;&lt;\" and \" &lt;&lt; primaryColor2 &lt;&lt; \" make orange\" &lt;&lt; std::endl;\n    } else  {\n        std::cout &lt;&lt; primaryColor1 &lt;&lt;\" and \" &lt;&lt; primaryColor2 &lt;&lt; \" make green\" &lt;&lt; std::endl;\n    }\n    return 0;\n}\n</code></pre>\n\n<p>I want the user to input <code>red</code> then <code>white</code>, and then get the error message: <code>\"You entered invalid colors\"</code></p>\n"}, {"tags": ["c++", "c++11", "templates", "variadic-templates"], "comments": [{"owner": {"reputation": 1063, "user_id": 6273701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a276eef0a6e4fe33b94244a14824992f?s=128&d=identicon&r=PG&f=1", "display_name": "P. Dmitry", "link": "https://stackoverflow.com/users/6273701/p-dmitry"}, "edited": false, "score": 0, "creation_date": 1570042325, "post_id": 58207626, "comment_id": 102793251, "body": "How do you use <code>testfunc</code>? Probably types should be the same with function you pass"}, {"owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "edited": false, "score": 1, "creation_date": 1570043358, "post_id": 58207626, "comment_id": 102793733, "body": "Cannot reproduce: my gdb say that the function called is <code>testfunc&lt;void, int const&amp;, int const*, int&amp;, int&gt;</code> (where <code>void</code> is <code>T</code>, the returned type)."}, {"owner": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 0, "creation_date": 1570043642, "post_id": 58207626, "comment_id": 102793838, "body": "Is this a situation where <a href=\"https://en.cppreference.com/w/cpp/header/type_traits\" rel=\"nofollow noreferrer\">type_traits</a> could be useful?"}], "answers": [{"comments": [{"owner": {"reputation": 65, "user_id": 9054679, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e4383db5ca21eb4bf9cb6eeca749810?s=128&d=identicon&r=PG&f=1", "display_name": "MatthewL", "link": "https://stackoverflow.com/users/9054679/matthewl"}, "edited": false, "score": 0, "creation_date": 1570044178, "post_id": 58207952, "comment_id": 102794037, "body": "Thanks, armed with this new knowledge I will hopefully be able to make progress on whatever the actual issue is."}], "tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": true, "score": 2, "last_activity_date": 1570043485, "creation_date": 1570043485, "answer_id": 58207952, "question_id": 58207626, "link": "https://stackoverflow.com/questions/58207626/force-template-deduction-from-a-function-to-produce-const-references-where-appli/58207952#58207952", "title": "Force template deduction from a function to produce const references where applicable", "body": "<p>The issue here is with <code>typeid</code>, not template deduction.  If you use</p>\n\n<pre><code>template&lt;typename... Ts&gt;\nstruct types;\n\ntemplate&lt;typename T, typename...argTypes&gt;\nvoid testfunc(T (*f)(argTypes...))\n{\n\n    types&lt;argTypes...&gt;{};\n}\n</code></pre>\n\n<p>You get an nice error message like</p>\n\n<pre><code>main.cpp: In instantiation of 'void testfunc(T (*)(argTypes ...)) [with T = std::vector&lt;bool&gt;; argTypes = {const int&amp;, const int*, int&amp;, int}]':\nmain.cpp:30:24:   required from here\nmain.cpp:12:5: error: invalid use of incomplete type 'struct types&lt;const int&amp;, const int*, int&amp;, int&gt;'\n   12 |     types&lt;argTypes...&gt;{};\n      |     ^~~~~\nmain.cpp:7:8: note: declaration of 'struct types&lt;const int&amp;, const int*, int&amp;, int&gt;'\n    7 | struct types;\n      |        ^~~~~\n</code></pre>\n\n<p>which shows you that the function parameter types are correctly deduced.</p>\n\n<p>With <code>typeid</code> if the type is a reference, then it returns the referred to type.  It also drops all cv-qualifactions on the types.  That means</p>\n\n<pre><code>int main()\n{\n    std::cout &lt;&lt; typeid(int).name() &lt;&lt; \"\\n\";\n    std::cout &lt;&lt; typeid(int&amp;).name() &lt;&lt; \"\\n\";\n    std::cout &lt;&lt; typeid(const int).name() &lt;&lt; \"\\n\";\n    std::cout &lt;&lt; typeid(const int&amp;).name() &lt;&lt; \"\\n\";\n    std::cout &lt;&lt; typeid(volatile int).name() &lt;&lt; \"\\n\";\n    std::cout &lt;&lt; typeid(volatile int&amp;).name() &lt;&lt; \"\\n\";\n    std::cout &lt;&lt; typeid(const volatile int).name() &lt;&lt; \"\\n\";\n    std::cout &lt;&lt; typeid(const volatile int&amp;).name() &lt;&lt; \"\\n\";\n}\n</code></pre>\n\n<p>prints</p>\n\n<pre><code>i\ni\ni\ni\ni\ni\ni\ni\n</code></pre>\n"}], "owner": {"reputation": 65, "user_id": 9054679, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e4383db5ca21eb4bf9cb6eeca749810?s=128&d=identicon&r=PG&f=1", "display_name": "MatthewL", "link": "https://stackoverflow.com/users/9054679/matthewl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "accepted_answer_id": 58207952, "answer_count": 1, "score": 0, "last_activity_date": 1570043485, "creation_date": 1570042117, "last_edit_date": 1570043084, "question_id": 58207626, "link": "https://stackoverflow.com/questions/58207626/force-template-deduction-from-a-function-to-produce-const-references-where-appli", "title": "Force template deduction from a function to produce const references where applicable", "body": "<p>running through the following function using gdb in vscode tells me that the deduced argTypes for a function of the form <code>T (*)(const int &amp;, const int *, int &amp;, int)</code> are <code>int</code> <code>const int *</code> <code>int &amp;</code> and <code>int</code> respectively. Is there any way to force the compiler to deduce <code>const Type &amp;</code> when presented with a <code>const Type &amp;</code> argument? Or is there some other means by which I can extract that type information in a useful way?</p>\n\n<pre><code>#include&lt;typeinfo&gt;\n\ntemplate&lt;typename T, typename...argTypes&gt;\nvoid testfunc(T (*f)(argTypes...))\n{\n    const char *a[] = { typeid(argTypes).name()... };\n    for(auto &amp;av :a)\n    {\n        std::cout &lt;&lt; av &lt;&lt; std::endl;\n    }\n}\n</code></pre>\n\n<p>edit:\nA little more context: this function obviously does little to nothing, but the problem function that spawned it also takes in all the arguments to be run with f in a way that they are not deduced, but converted.\nThis presents a problem for non-copyable objects to be used as const references.</p>\n\n<p>An example of using <code>testfunc</code> is as follows:</p>\n\n<pre><code>#include \"testfunc.h\"\n\nstd::vector&lt;bool&gt; funcToTest(const int &amp;a, const int *b, int &amp;c, int d)\n{\n    std::vector&lt;bool&gt; out;\n    out.push_back(&amp;a == b);\n    out.push_back(&amp;c == b);\n    out.push_back(&amp;d == b);\n    return out;\n}\n\nint main()\n{\n    // put a breakpoint here, and step in, you would see that 'a'\n    // describes the situation as described above.\n    testfunc(funcToTest);\n}\n</code></pre>\n"}, {"tags": ["c++", "templates", "c++20"], "comments": [{"owner": {"reputation": 23130, "user_id": 8586227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BRnwg.png?s=128&g=1", "display_name": "Davis Herring", "link": "https://stackoverflow.com/users/8586227/davis-herring"}, "edited": false, "score": 1, "creation_date": 1570151628, "post_id": 58207568, "comment_id": 102832159, "body": "It\u2019s <code>operator==(\u2026)=default</code> that is required by the latest draft, but I don\u2019t think GCC enforces anything yet."}, {"owner": {"reputation": 950, "user_id": 3945377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3179e3e91f86a74d223264a25fef417e?s=128&d=identicon&r=PG", "display_name": "Pauli Nieminen", "link": "https://stackoverflow.com/users/3945377/pauli-nieminen"}, "reply_to_user": {"reputation": 23130, "user_id": 8586227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BRnwg.png?s=128&g=1", "display_name": "Davis Herring", "link": "https://stackoverflow.com/users/8586227/davis-herring"}, "edited": false, "score": 0, "creation_date": 1570191600, "post_id": 58207568, "comment_id": 102845501, "body": "Thanks. Default comparison operators are still linked to three-way comparison if I understand correctly. At least for GCC feature implementation so they are also missing still. I guess there is some kind of preliminary equality check but no enforcement for correct operator."}, {"owner": {"reputation": 23130, "user_id": 8586227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BRnwg.png?s=128&g=1", "display_name": "Davis Herring", "link": "https://stackoverflow.com/users/8586227/davis-herring"}, "edited": false, "score": 0, "creation_date": 1570195985, "post_id": 58207568, "comment_id": 102847740, "body": "Each <i>operator</i> can call the other automatically in some cases, but a defaulted <code>operator==</code> <i>function</i> will never use <code>&lt;=&gt;</code> directly to avoid exponential runtime for nested container-like things.  GCC may very well have implemented the behavior of that defaulted operator without the class having asked for it."}, {"owner": {"reputation": 23130, "user_id": 8586227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BRnwg.png?s=128&g=1", "display_name": "Davis Herring", "link": "https://stackoverflow.com/users/8586227/davis-herring"}, "edited": false, "score": 0, "creation_date": 1597732715, "post_id": 58207568, "comment_id": 112221909, "body": "This changed before C++20 was finalized: now no operator is relevant to class-type non-type template parameters.  That probably doesn\u2019t explain this bug, though."}], "owner": {"reputation": 950, "user_id": 3945377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3179e3e91f86a74d223264a25fef417e?s=128&d=identicon&r=PG", "display_name": "Pauli Nieminen", "link": "https://stackoverflow.com/users/3945377/pauli-nieminen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 75, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1570307582, "creation_date": 1570041887, "last_edit_date": 1570307582, "question_id": 58207568, "link": "https://stackoverflow.com/questions/58207568/class-non-type-template-parameter-partial-specialization", "title": "Class non-type template parameter partial specialization", "body": "<p>I was playing around with some c++20 features using gcc 9.0.1. It seems like there is support for class non-type template parameters. But I run into a problem that template partial specialization isn't used when selecting the template.</p>\n\n<p>Following example is a test case which I came up after figuring out the root cause in my more complex code.</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>// g++ -std=c++2a -c test.cc -o test.o\n\n#include &lt;type_traits&gt;\n\ntemplate&lt;typename T&gt;\nstruct Integer {\n\n    constexpr Integer() : val{} {}\n    constexpr Integer(T v) : val{v} {}\n\n    constexpr bool operator&lt;(Integer o) const { return val &lt; o.val; }\n\n    template&lt;typename O, typename = std::enable_if_t&lt;std::is_integral_v&lt;O&gt;&gt;&gt;\n    constexpr bool operator&lt;(O o) const { return val &lt; o; }\n\n    constexpr bool operator==(Integer o) const { return val == o.val; }\n\nprivate:\n    T val;\n};\n\n\ntemplate&lt;auto val, typename = void&gt;\nstruct test {\n    static constexpr bool is_specialized = false;\n    static constexpr auto value = val;\n};\n\ntemplate&lt;auto val&gt;\nstruct test&lt;val, std::enable_if_t&lt;val &lt; 64&gt;&gt; {\n    static constexpr bool is_specialized = true;\n    static constexpr auto value = val;\n};\n\n\nconstexpr int i5 = 5;\nconstexpr int i70 = 70;\nconstexpr unsigned long s5 = 5;\nconstexpr unsigned long s70 = 70;\nusing IT = Integer&lt;int&gt;;\nconstexpr Integer&lt;int&gt; o5 = 5;\nconstexpr Integer&lt;int&gt; o70 = 70;\n\nstatic_assert(std::is_same_v&lt;decltype(test&lt;i5&gt;::value),decltype(i5)&gt;);\nstatic_assert(test&lt;i5&gt;::value == i5);\nstatic_assert(test&lt;i5&gt;::is_specialized);\nstatic_assert(std::is_same_v&lt;decltype(test&lt;i70&gt;::value),decltype(i70)&gt;);\nstatic_assert(test&lt;i70&gt;::value == i70);\nstatic_assert(!test&lt;i70&gt;::is_specialized);\nstatic_assert(std::is_same_v&lt;decltype(test&lt;s5&gt;::value),decltype(s5)&gt;);\nstatic_assert(test&lt;s5&gt;::value == s5);\nstatic_assert(test&lt;s5&gt;::is_specialized);\nstatic_assert(std::is_same_v&lt;decltype(test&lt;s70&gt;::value),decltype(s70)&gt;);\nstatic_assert(test&lt;s70&gt;::value == s70);\nstatic_assert(!test&lt;s70&gt;::is_specialized);\nstatic_assert(std::is_same_v&lt;decltype(test&lt;o5&gt;::value),decltype(o5)&gt;);\nstatic_assert(test&lt;o5&gt;::value == o5);\n// GCC 9.0.1: error: static assertion failed\n// This basically mean object template parameters work but specialization isn't\n// used like I would expect.\nstatic_assert(test&lt;o5&gt;::is_specialized);\nstatic_assert(std::is_same_v&lt;decltype(test&lt;o70&gt;::value),decltype(o70)&gt;);\nstatic_assert(test&lt;o70&gt;::value == o70);\nstatic_assert(!test&lt;o70&gt;::is_specialized);\n</code></pre>\n\n<p>I tried to find online anything which would indicate if my expectations are correct or not. To me it seems like at least without specialization class non-type parameter works the way I would expect but specialization isn't selected.</p>\n\n<p>One suspect is missing support for three-way comparison (operator&lt;=>). Proposal seems to require defaulted operator. As operator support is missing it might make the class non-type template parameter support only partial even tough <a href=\"https://gcc.gnu.org/projects/cxx-status.html#cxx2a\" rel=\"nofollow noreferrer\">status page</a> claims support.</p>\n\n<p>I couldn't test this with clang as my latest version doesn't yet support this feature. I don't know if latest sources already implement support.</p>\n\n<p>Is this just a bug in the preliminary implementation?</p>\n\n<p>Is there a rule preventing this case from working?</p>\n\n<p>Is there a simple modification which would make the code to select specialization like I expect?</p>\n\n<p>Relevant standard paper: <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2018/p0732r2.pdf\" rel=\"nofollow noreferrer\">Class Types in Non-Type Template Parameters</a></p>\n"}, {"tags": ["c++", "arduino"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1570041972, "post_id": 58207538, "comment_id": 102793066, "body": "The <a href=\"https://www.arduino.cc/reference/en/language/variables/data-types/string/functions/replace/\" rel=\"nofollow noreferrer\"><code>replace</code></a> function does in-place replacement. It doesn&#39;t return a new string."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1570045379, "post_id": 58207538, "comment_id": 102794597, "body": "@Someprogrammerdude Same with the <a href=\"https://www.arduino.cc/reference/en/language/variables/data-types/string/functions/trim/\" rel=\"nofollow noreferrer\"><code>trim()</code></a> function"}], "answers": [{"tags": [], "owner": {"reputation": 1063, "user_id": 6273701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a276eef0a6e4fe33b94244a14824992f?s=128&d=identicon&r=PG&f=1", "display_name": "P. Dmitry", "link": "https://stackoverflow.com/users/6273701/p-dmitry"}, "is_accepted": true, "score": 3, "last_activity_date": 1610630089, "last_edit_date": 1610630089, "creation_date": 1570041934, "answer_id": 58207574, "question_id": 58207538, "link": "https://stackoverflow.com/questions/58207538/arduino-trim-and-replace-methods-returns-conversion-from-void-to-non-scala/58207574#58207574", "title": "Arduino trim() and replace() methods returns conversion from &#39;void&#39; to non-scalar type &#39;String&#39; requested", "body": "<p><a href=\"https://www.arduino.cc/reference/en/language/variables/data-types/string/functions/replace/\" rel=\"nofollow noreferrer\"><code>replace</code></a> method changes existing string, but not returns a new one.</p>\n<pre><code>myString = &quot;123\\n&quot;;\nmyString.replace(&quot;\\n&quot;, &quot;&quot;);\nassert(myString == &quot;123&quot;);\n</code></pre>\n"}], "owner": {"reputation": 1262, "user_id": 5597037, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/eaab5b288caf39e6cbd4387c0c3cf344?s=128&d=identicon&r=PG", "display_name": "Mike C.", "link": "https://stackoverflow.com/users/5597037/mike-c"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 312, "favorite_count": 0, "accepted_answer_id": 58207574, "answer_count": 1, "score": 0, "last_activity_date": 1610630089, "creation_date": 1570041773, "question_id": 58207538, "link": "https://stackoverflow.com/questions/58207538/arduino-trim-and-replace-methods-returns-conversion-from-void-to-non-scala", "title": "Arduino trim() and replace() methods returns conversion from &#39;void&#39; to non-scalar type &#39;String&#39; requested", "body": "<p>I am trying to remove the newline character \\n from the end of my string. </p>\n\n<pre><code>myString = Serial1.readString();\nString myString_trim = xbeeString.replace(\"\\n\", \"\");\n</code></pre>\n\n<p>I keep getting this error when using either the .trim() or .replace() methods.</p>\n\n<p>Error:</p>\n\n<pre><code>exit status 1\nconversion from 'void' to non-scalar type 'String' requested\n</code></pre>\n"}, {"tags": ["c++", "segmentation-fault", "mpi"], "comments": [{"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 1, "creation_date": 1570042416, "post_id": 58207461, "comment_id": 102793295, "body": "<code>fflush(stdout);</code> is completely unnecssary. Your <code>endl;</code> already flushes."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1570042477, "post_id": 58207461, "comment_id": 102793331, "body": "<code>matrix.resize(nodes,vector&lt;uint32_t&gt;(nodes,0))</code> -- You could have saved yourself from your faulty loop by doing this: <code>matrix.resize(nodes,vector&lt;uint32_t&gt;(nodes,INT_MAX));</code>"}, {"owner": {"reputation": 23, "user_id": 10389231, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-HcJdE--7cfo/AAAAAAAAAAI/AAAAAAAAAC0/TY1NXCoKuls/photo.jpg?sz=128", "display_name": "Ajinkya Rawankar", "link": "https://stackoverflow.com/users/10389231/ajinkya-rawankar"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1570044867, "post_id": 58207461, "comment_id": 102794357, "body": "thanks @PaulMcKenzie :)"}, {"owner": {"reputation": 12557, "user_id": 1270789, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/FXwoB.png?s=128&g=1", "display_name": "Ken Y-N", "link": "https://stackoverflow.com/users/1270789/ken-y-n"}, "edited": false, "score": 0, "creation_date": 1570061110, "post_id": 58207461, "comment_id": 102798860, "body": "What inputs are you using? Where exactly does it crash?"}], "answers": [{"comments": [{"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "reply_to_user": {"reputation": 23, "user_id": 10389231, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-HcJdE--7cfo/AAAAAAAAAAI/AAAAAAAAAC0/TY1NXCoKuls/photo.jpg?sz=128", "display_name": "Ajinkya Rawankar", "link": "https://stackoverflow.com/users/10389231/ajinkya-rawankar"}, "edited": false, "score": 1, "creation_date": 1570042536, "post_id": 58207617, "comment_id": 102793368, "body": "@AjinkyaRawankar See my comment in the main section.  That loop was totally unnecessary."}], "tags": [], "owner": {"reputation": 1063, "user_id": 6273701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a276eef0a6e4fe33b94244a14824992f?s=128&d=identicon&r=PG&f=1", "display_name": "P. Dmitry", "link": "https://stackoverflow.com/users/6273701/p-dmitry"}, "is_accepted": true, "score": 1, "last_activity_date": 1570042096, "creation_date": 1570042096, "answer_id": 58207617, "question_id": 58207461, "link": "https://stackoverflow.com/questions/58207461/signal-segmentation-fault-11-signal-code-invalid-permissions-2/58207617#58207617", "title": "Signal: Segmentation fault (11) Signal code: Invalid permissions (2)", "body": "<p>Wrong condition in the inner loop <code>for(int j=0;i&lt;nodes;j++){</code>. Have to be <code>for(int j=0;j&lt;nodes;j++){</code></p>\n"}], "owner": {"reputation": 23, "user_id": 10389231, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-HcJdE--7cfo/AAAAAAAAAAI/AAAAAAAAAC0/TY1NXCoKuls/photo.jpg?sz=128", "display_name": "Ajinkya Rawankar", "link": "https://stackoverflow.com/users/10389231/ajinkya-rawankar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 975, "favorite_count": 0, "accepted_answer_id": 58207617, "answer_count": 1, "score": 0, "last_activity_date": 1570067911, "creation_date": 1570041437, "last_edit_date": 1570067911, "question_id": 58207461, "link": "https://stackoverflow.com/questions/58207461/signal-segmentation-fault-11-signal-code-invalid-permissions-2", "title": "Signal: Segmentation fault (11) Signal code: Invalid permissions (2)", "body": "<p>I am creating a 2D vector in process with rank 0. When vector is accessed i get following error  \"Signal: Segmentation fault (11)\nSignal code: Invalid permissions (2)\".</p>\n\n<p>I tried creating dynamic 2d matrix with malloc, still the error remains same.</p>\n\n<p>following is code snippet -</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include &lt;climits&gt;\n#include &lt;mpi.h&gt;\n\nusing namespace std;\n\nint main(int argc, char **argv){\n\n    int num_procs, rank;\n    MPI_Init(&amp;argc, &amp;argv);\n    MPI_Comm_rank(MPI_COMM_WORLD, &amp;rank);\n    MPI_Comm_size(MPI_COMM_WORLD, &amp;num_procs);\n\n    int n1,n2;\n    int nodes,edges,source;\n    //int **matrix;\n    vector&lt;vector&lt;uint32_t&gt;&gt; matrix;\n    //take input\n    if(rank==0){\n        cin&gt;&gt;nodes;\n        cin&gt;&gt;edges;\n        cin&gt;&gt;source;\n        //matrix = (int **)malloc(nodes*nodes*sizeof(int));\n        //malloc2D(matrix,nodes,nodes);\n\n        matrix.resize(nodes,vector&lt;uint32_t&gt;(nodes,0));\n\n        cout&lt;&lt;\"doing initialization\"&lt;&lt;endl;\n        fflush(stdout);\n        for(int i=0;i&lt;nodes;i++)\n            for(int j=0;i&lt;nodes;j++){       \n                //segmentation fault occurs here\n                matrix[i][j] = INT_MAX;\n            }\n        cout&lt;&lt;\"done initialization\"&lt;&lt;endl;\n        for(int i=0;i&lt;edges;i++){\n            cin&gt;&gt;n1;\n            cin&gt;&gt;n2;\n            matrix[n1][n2] = 1;\n            matrix[n2][n1] = 1;\n        }       \n    }\n    // rest of the code\n}\n</code></pre>\n\n<p>I am resizing the vector with size nodes*nodes. I don't know why sengmentation fault is occuring.</p>\n\n<p>following is error snippet-</p>\n\n<pre><code>doing initialization\n[osboxes:02930] *** Process received signal ***\n[osboxes:02930] Signal: Segmentation fault (11)\n[osboxes:02930] Signal code: Invalid permissions (2)\n[osboxes:02930] Failing at address: 0x7fb140021000\n[osboxes:02930] [ 0] /lib/x86_64-linux-gnu/libc.so.6(+0x3ef20)[0x7fb1477c8f20]\n[osboxes:02930] [ 1] q-3(+0xbe09)[0x561813124e09]\n[osboxes:02930] [ 2] /lib/x86_64-linux-gnu/libc.so.6(__libc_start_main+0xe7)[0x7fb1477abb97]\n[osboxes:02930] [ 3] q-3(+0xb9fa)[0x5618131249fa]\n[osboxes:02930] *** End of error message ***\n</code></pre>\n\n<p>Please Help!</p>\n"}, {"tags": ["c++", "boost", "bit-manipulation", "avx512", "boost-multiprecision"], "answers": [{"comments": [{"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1570072536, "post_id": 58209964, "comment_id": 102800814, "body": "Also note the different behaviour for input == 0.  It appears <code>lsb</code> is designed to wrap things like x86&#39;s <code>bsf</code> instruction which only sets a flag when the input is zero; it doesn&#39;t write a useful value to the output register.  But <code>ffs</code> does handle the input==0 case, returning <code>0</code>."}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1570072882, "post_id": 58209964, "comment_id": 102800851, "body": "Does <code>lsb</code> on a 512-bit integer actually compile to an AVX512 sequence that uses <code>vptestmd</code> / <code>vpcompressd</code> or similar to find the first non-zero dword, then <code>vmovd</code> to extract it to an integer register for <code>tzcnt</code>?  (Or using 2x 256-bit vectors to avoid putting the CPU into 512-bit SIMD mode.)  The OP wants this to be efficient on x86, presumably with gcc and/or clang with <code>-O3 -march=skylake-avx512</code>"}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "reply_to_user": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1570079035, "post_id": 58209964, "comment_id": 102801938, "body": "@PeterCordes I imagine the GMP backend calls <code>mpz_scan1()</code>. No clue about the others."}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1570082557, "post_id": 58209964, "comment_id": 102802925, "body": "Godbolt doesn&#39;t have the GMP back-end installed :/  With the portable CPP back-end, gcc and clang use qword loops to check for a non-zero chunk, then <code>tzcnt</code> it.  <a href=\"https://godbolt.org/z/qEq_QE\" rel=\"nofollow noreferrer\">godbolt.org/z/qEq_QE</a>.  GCC still emits exception-creating functions but <code>ffs512</code> does optimize away any potential call to them.  AVX2 to just find the right dword or qword index for a scalar load would also have been good, vs. the AVX512 idea I suggested earlier.  <code>mpz_scan1()</code> is just written in C (<a href=\"https://gmplib.org/repo/gmp/file/tip/mpz/scan1.c\" rel=\"nofollow noreferrer\">gmplib.org/repo/gmp/file/tip/mpz/scan1.c</a>), which uses the same limb search (at <code>short_cut:</code>) then trailing-zero bitscan."}, {"owner": {"reputation": 6533, "user_id": 1918193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b70a14318e0f417ecac47809f38fafc?s=128&d=identicon&r=PG", "display_name": "Marc Glisse", "link": "https://stackoverflow.com/users/1918193/marc-glisse"}, "reply_to_user": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 1, "creation_date": 1570084027, "post_id": 58209964, "comment_id": 102803384, "body": "@PeterCordes I think GMP only has the generic version of mp[nz]_scan1 because it was never the limiting factor, compared to multiplications or worse divisions and gcd. If you think it is useful and you can provide a faster version for large scans that does not significantly slow down the common case where the scan finds a 1 bit almost immediately, you could try contributing it to GMP. But indeed the OP has a simpler case to handle, always scanning from the beginning. And the current <code>lsb</code> is likely fast enough for them."}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "reply_to_user": {"reputation": 6533, "user_id": 1918193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b70a14318e0f417ecac47809f38fafc?s=128&d=identicon&r=PG", "display_name": "Marc Glisse", "link": "https://stackoverflow.com/users/1918193/marc-glisse"}, "edited": false, "score": 0, "creation_date": 1570084810, "post_id": 58209964, "comment_id": 102803662, "body": "@MarcGlisse: yeah, the GMP version has to be much more flexible, with the size not being a compile-time constant.  I think we could detect large limb-count with a single extra check that might be negligible for small numbers.  But if the first <code>1</code> is in the first limb, then yes pure scalar is still much better (also avoids any risk of a store-forwarding stall from a wide load).  So maybe you&#39;d want to start with that and only look at the size for maybe doing a SIMD search if not found in the first limb.  If not found in the first 64 bits, it&#39;s probably not in the next 64 either for large n."}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 2, "creation_date": 1570084849, "post_id": 58209964, "comment_id": 102803680, "body": "Looks like this <code>uint512_t</code> is only typedefed for the <code>cpp_int</code> backend so it doesn&#39;t really matter for this question how the gmp backend implements it."}], "tags": [], "owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "is_accepted": true, "score": 2, "last_activity_date": 1570081089, "last_edit_date": 1592644375, "creation_date": 1570054151, "answer_id": 58209964, "question_id": 58207449, "link": "https://stackoverflow.com/questions/58207449/find-first-set-instruction-ffs-for-boost-multiprecision-uint512-t/58209964#58209964", "title": "Find First Set instruction (ffs) for boost multiprecision uint512_t", "body": "<p>From <a href=\"https://www.boost.org/doc/libs/1_71_0/libs/multiprecision/doc/html/boost_multiprecision/ref/number.html#boost_multiprecision.ref.number.integer_functions\" rel=\"nofollow noreferrer\">the documentation</a>:</p>\n<blockquote>\n<p><code>unsigned lsb(const number-or-expression-template-type&amp; x);</code></p>\n<p>Returns the (zero-based) index of the least significant bit that is set to 1.</p>\n<p>Throws a <code>std::range_error</code> if the argument is <code>&lt;= 0</code>.</p>\n</blockquote>\n<p><code>ffs()</code> is one-based, so adding 1 to <code>lsb()</code>'s return value will make it equivalent. Edit: And as pointed out, taking the case of being passed 0 into account.</p>\n<p>Maybe something like</p>\n<pre><code>unsigned ffs512(const boost::multiprecision::uint512_t &amp;n) {\n  if (n.is_zero()) {\n    return 0;\n  } else {\n    return boost::multiprecision::lsb(n) + 1;\n  }\n}\n</code></pre>\n"}], "owner": {"reputation": 653, "user_id": 4388698, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b72b49d0397e457b54977aaf999a618d?s=128&d=identicon&r=PG&f=1", "display_name": "Purple", "link": "https://stackoverflow.com/users/4388698/purple"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 135, "favorite_count": 0, "accepted_answer_id": 58209964, "answer_count": 1, "score": 2, "last_activity_date": 1570081089, "creation_date": 1570041400, "question_id": 58207449, "link": "https://stackoverflow.com/questions/58207449/find-first-set-instruction-ffs-for-boost-multiprecision-uint512-t", "title": "Find First Set instruction (ffs) for boost multiprecision uint512_t", "body": "<p>I'm developing an algorithm that uses <code>__builtin_ffsll()</code> with <code>uint64_t</code> type. </p>\n\n<p>I want to switch to 512-bit field using boost multiprecision library (I'm running on a machine with avx512 support).</p>\n\n<p>Is there a similar function as the mentioned builtin? Alternatively, how can I efficiently implement such functionality for 512-bit integers?</p>\n"}, {"tags": ["c++", "multithreading", "segmentation-fault", "pthreads", "coredump"], "comments": [{"owner": {"reputation": 1063, "user_id": 6273701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a276eef0a6e4fe33b94244a14824992f?s=128&d=identicon&r=PG&f=1", "display_name": "P. Dmitry", "link": "https://stackoverflow.com/users/6273701/p-dmitry"}, "edited": false, "score": 1, "creation_date": 1570041312, "post_id": 58207335, "comment_id": 102792798, "body": "Just a note. C++ has <a href=\"https://ru.cppreference.com/w/cpp/thread/thread\" rel=\"nofollow noreferrer\"><code>std::thread</code></a> in STD"}, {"owner": {"reputation": 1063, "user_id": 6273701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a276eef0a6e4fe33b94244a14824992f?s=128&d=identicon&r=PG&f=1", "display_name": "P. Dmitry", "link": "https://stackoverflow.com/users/6273701/p-dmitry"}, "edited": false, "score": 0, "creation_date": 1570041743, "post_id": 58207335, "comment_id": 102792965, "body": "Your problem in line with <code>chunk[mark - chunk_start] = 0;</code>. Because <code>mark - chunk_start</code> sometimes is negative =&gt; access by negative index =&gt; memory error"}, {"owner": {"reputation": 15260, "user_id": 1968182, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/E5nF2.jpg?s=128&g=1", "display_name": "Ulrich Eckhardt", "link": "https://stackoverflow.com/users/1968182/ulrich-eckhardt"}, "edited": false, "score": 0, "creation_date": 1570043900, "post_id": 58207335, "comment_id": 102793929, "body": "Please exract and provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> as part of your question, it is off-topic without one. As a new user, also take the <a href=\"https://stackoverflow.com/tour\">tour</a> and read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>."}], "answers": [{"tags": [], "owner": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "is_accepted": true, "score": 0, "last_activity_date": 1570041882, "creation_date": 1570041882, "answer_id": 58207566, "question_id": 58207335, "link": "https://stackoverflow.com/questions/58207335/c-aborted-core-dumped-during-pthread-join/58207566#58207566", "title": "c++ aborted core dumped during pthread_join()", "body": "<p>In the first iteration of your loop inside the thread <code>chunk_start</code> is <code>7</code>, <code>k</code> is <code>2</code> which gives <code>mark</code> as <code>6</code> this leads to <code>chunk[mark - chunk_start]</code> being <code>chunk[-1]</code> which is out of bounds of the array so leads to memory corruption and a crash later on when you join the thread.</p>\n"}], "owner": {"reputation": 11, "user_id": 12155053, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/693ca09c8e3b9358a6392c16ab23f24c?s=128&d=identicon&r=PG&f=1", "display_name": "admdlib", "link": "https://stackoverflow.com/users/12155053/admdlib"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 151, "favorite_count": 0, "accepted_answer_id": 58207566, "answer_count": 1, "score": 0, "last_activity_date": 1570041882, "creation_date": 1570040887, "question_id": 58207335, "link": "https://stackoverflow.com/questions/58207335/c-aborted-core-dumped-during-pthread-join", "title": "c++ aborted core dumped during pthread_join()", "body": "<p>So I'm trying to multithread the Sieve of Eratosthenes algorithm using pthreads. This is my code so far.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;iomanip&gt;\n#include &lt;math.h&gt;\n#include &lt;thread&gt;\n#include &lt;string.h&gt;\n#include &lt;chrono&gt;\n#include &lt;vector&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;pthread.h&gt;\n\nstruct Thread_data {\n  int thread_id;\n  std::vector&lt;int&gt; prime_seed_vect;\n  std::vector&lt;int&gt; chunk_vect;\n};\n\n\nvoid *calc_primes(void* td){\n  Thread_data *td_t = (Thread_data *)td;\n  std::vector&lt;int&gt; primes = td_t-&gt;prime_seed_vect;\n  std::vector&lt;int&gt; chunk = td_t-&gt;chunk_vect;\n\n  int chunk_start = chunk.front();\n  int chunk_end = chunk.back();\n  std::cout &lt;&lt; \"chunk_start: \" &lt;&lt; chunk_start &lt;&lt; std::endl;\n  std::cout &lt;&lt; \"chunk_end: \" &lt;&lt; chunk_end &lt;&lt; std::endl;\n\n  int k;\n  int mult;\n  int mark;\n\n  for(std::vector&lt;int&gt;::size_type i=1; i!=primes.size(); i++){\n    k = primes[i];\n\n    mult = round(chunk_start/k);\n    mark = k*mult;\n\n    while(mark &lt;= chunk_end){\n      chunk[mark - chunk_start] = 0;\n      mult += 1;\n      mark = k*mult;\n    } \n  }\n  std::cout &lt;&lt; \"primes: \" &lt;&lt; k &lt;&lt; std::endl;\n  for(int i=0; i&lt;(chunk_end-chunk_start); i++){\n    if(chunk[i] != 0){\n      std::cout &lt;&lt; chunk[i] &lt;&lt; \" \" &lt;&lt; std::endl;\n    }\n  }\n  std::cout &lt;&lt; \" done \" &lt;&lt; std::endl;\n}\n\nint main(int argc, char *argv[]){\n  if(argc != 3){\n    std::cout &lt;&lt; \"Run program on format \\\"./sieve max num_of_threads\\\"\" &lt;&lt; std::endl;\n    return 0;\n  }\n  int num_threads = std::stoi(argv[2]);\n  std::cout &lt;&lt; \"Threads: \" &lt;&lt; num_threads &lt;&lt; std::endl;\n  int max = std::stoi(argv[1]);\n  std::cout &lt;&lt; \"max: \" &lt;&lt; max &lt;&lt; std::endl;\n  int sqrt_max = sqrt(max);\n  std::cout &lt;&lt; \"sqrt_max: \" &lt;&lt; sqrt_max &lt;&lt; std::endl;\n  int chunk_size = (max-sqrt_max)/num_threads;\n  std::cout &lt;&lt; \"chunk_size: \" &lt;&lt; chunk_size &lt;&lt; std::endl;\n  if(num_threads &gt; (max-sqrt_max)){\n    std::cout &lt;&lt; \"Not enough work for this amount of threads. exiting...\" &lt;&lt; std::endl;\n    return 0;\n  }\n  std::vector&lt;int&gt; max_vect;\n  std::vector&lt;int&gt; prime_seeds;\n\n  for(int i=0; i&lt;max; i++){\n    max_vect.push_back(i+1);\n  }\n  std::cout &lt;&lt; \"max start: \" &lt;&lt; max_vect.front() &lt;&lt; std::endl;\n  std::cout &lt;&lt; \"max end: \" &lt;&lt; max_vect.back() &lt;&lt; std::endl;\n\n  int k = 2;\n  int mult;\n  int mark;\n\n  //single thread part\n  while(k*k &lt;= sqrt_max){\n    //set all multiples of k to 0 (mark them)\n    mult = k;\n    mark = k*mult;\n\n    while(mark &lt;= sqrt_max){\n      max_vect[mark-1] = 0;\n      mult += 1;\n      mark = k*mult;\n    }\n    //find smallest unmarked number that is greater than k and set k to that number\n    for(int i=k; i&lt;=sqrt_max; i++){\n      if(max_vect[i] != 0){\n    k = max_vect[i];\n    break;\n      }\n    }  \n  }\n  //put all unmarked numbers(primes) in a vector\n  for(int i=0; i&lt;=sqrt_max;i++){\n    if(max_vect[i] != 0){\n      prime_seeds.push_back(max_vect[i]);\n    }\n  }\n\n  //multithread part\n  pthread_t threads[num_threads];\n  Thread_data td[num_threads];\n  //give the seeds to all threads through a struct\n  for(int i=0; i&lt;num_threads; i++){\n    int chunk_start = (i*chunk_size) + (sqrt_max + 1);\n    int chunk_end;\n\n    if(i == (num_threads-1)){\n      chunk_end = chunk_start + chunk_size +((max - sqrt_max) % num_threads);\n    }\n    else{\n      chunk_end = chunk_start + chunk_size;\n    }\n\n    td[i].thread_id = i;\n\n    std::vector&lt;int&gt; temp1;\n    for(int j=chunk_start; j&lt;chunk_end; j++){\n      temp1.push_back(j);\n    }\n    td[i].chunk_vect = temp1;\n    td[i].prime_seed_vect = prime_seeds;\n\n  }\n  for(int i=0; i&lt;num_threads; i++){\n    pthread_create(&amp;threads[i], NULL, calc_primes, &amp;(td[i]));\n  }\n  std::cout &lt;&lt; \" After create \" &lt;&lt; std::endl;\n  for(int i=0; i&lt;num_threads; i++){\n    std::cout &lt;&lt; \" inside join1 \" &lt;&lt; std::endl;\n    pthread_join(threads[i], NULL);\n    std::cout &lt;&lt; \" inside join2 \" &lt;&lt; std::endl;\n  }\n  std::cout &lt;&lt; \" After join \" &lt;&lt; std::endl;\n  return 0;\n}\n</code></pre>\n\n<p>I'm compiling with <code>g++ -Wall -g -pthread -std=c++11 -o sieve.cpp</code> and when I run the program with <code>./sieve 35 1</code> (I look for primes up to 35 with 1 thread) everything works fine and I can find all the primes and the program exits correctly but when I run <code>./sieve 36 1</code> I get this error:</p>\n\n<pre><code>free(): invalid pointer\nAborted (core dumped)\n</code></pre>\n\n<p>The error seems to happen in pthread_join so I'm probably referencing some object that doesn't exist anymore? The problem happens when running with more than one thread as well. I appreciate all suggestions and help!</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "edited": false, "score": 0, "creation_date": 1570040855, "post_id": 58207269, "comment_id": 102792590, "body": "Try <code>product = (var1[i] - &#39;0&#39;) * arr[n];</code> (and then also <code>var1[i] = product + &#39;0&#39;;</code>)"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 1, "creation_date": 1570040858, "post_id": 58207269, "comment_id": 102792593, "body": "What result do you expect? Start with a string of length two."}, {"owner": {"reputation": 1, "user_id": 12151777, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb0a9e0b360e5d622d699119c853bd95?s=128&d=identicon&r=PG&f=1", "display_name": "lidya_q", "link": "https://stackoverflow.com/users/12151777/lidya-q"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1570041018, "post_id": 58207269, "comment_id": 102792656, "body": "@n.m. new values of var = &quot;5, 6, 21, 2..., 9&quot;, I want to multiply first element of var1 with first element of arr and so on"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1570041225, "post_id": 58207269, "comment_id": 102792749, "body": "What do you mean by <code>&quot;5, 6, 21, 2..., 9&quot;</code>? Is it a string? Does it contain actual comma characters and spaces? If so, it&#39;s about three times as long as the original string,  possibly more because 7*3=21 (two chars)."}, {"owner": {"reputation": 1, "user_id": 12151777, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb0a9e0b360e5d622d699119c853bd95?s=128&d=identicon&r=PG&f=1", "display_name": "lidya_q", "link": "https://stackoverflow.com/users/12151777/lidya-q"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1570041957, "post_id": 58207269, "comment_id": 102793061, "body": "@n.m. Take first element from the string (it&#39;s 1), take first element of arr( it&#39;s 5), do 1*5 = 5, replace this 5 with the first element of var1 ( that is 1, so 1, will be replaced with 5)"}, {"owner": {"reputation": 3828, "user_id": 2137417, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/792918317c06a7c76f7f88390d003d93?s=128&d=identicon&r=PG", "display_name": "jstuartmilne", "link": "https://stackoverflow.com/users/2137417/jstuartmilne"}, "edited": false, "score": 0, "creation_date": 1570042655, "post_id": 58207269, "comment_id": 102793420, "body": "Ive updated my answer let me know @lidya_q"}, {"owner": {"reputation": 15260, "user_id": 1968182, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/E5nF2.jpg?s=128&g=1", "display_name": "Ulrich Eckhardt", "link": "https://stackoverflow.com/users/1968182/ulrich-eckhardt"}, "edited": false, "score": 0, "creation_date": 1570044495, "post_id": 58207269, "comment_id": 102794197, "body": "Please extract a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> before asking here. Without this, your question is considered off-topic. Also, as a new user here, take the <a href=\"https://stackoverflow.com/tour\">tour</a> and read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1570050621, "post_id": 58207269, "comment_id": 102796539, "body": "Please don&#39;t tell me what to do. <i>Tell me what result you want to see</i>. You have a string <code>&quot;45&quot;</code> and an array <code>{7,8}</code>.  Your result should be <code>&quot;...&quot;</code> (replace the ellipsis with specific digits)."}], "answers": [{"tags": [], "owner": {"reputation": 1063, "user_id": 6273701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a276eef0a6e4fe33b94244a14824992f?s=128&d=identicon&r=PG&f=1", "display_name": "P. Dmitry", "link": "https://stackoverflow.com/users/6273701/p-dmitry"}, "is_accepted": false, "score": 0, "last_activity_date": 1570040963, "creation_date": 1570040963, "answer_id": 58207353, "question_id": 58207269, "link": "https://stackoverflow.com/questions/58207269/string-position-multiply-with-array-position/58207353#58207353", "title": "String position multiply with array position", "body": "<p><code>var1[i]</code> is a <code>char</code>, not an <code>int</code>. <code>char</code> implicitly cast to <code>int</code> and calculation goes wrong. You need to map <code>char</code> with number to number itself ('1' -> 1, '2' -> 2). To do it subtract value of '0'. I.e. <code>var1[i] - '0'</code> it's number for char</p>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 12151777, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb0a9e0b360e5d622d699119c853bd95?s=128&d=identicon&r=PG&f=1", "display_name": "lidya_q", "link": "https://stackoverflow.com/users/12151777/lidya-q"}, "reply_to_user": {"reputation": 12749, "user_id": 7976805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92a559df8b4b287aad23724b4c66d67c?s=128&d=identicon&r=PG&f=1", "display_name": "Yksisarvinen", "link": "https://stackoverflow.com/users/7976805/yksisarvinen"}, "edited": false, "score": 0, "creation_date": 1570041994, "post_id": 58207358, "comment_id": 102793075, "body": "@Yksisarvinen, you right, I printout product, and it&#39;s always one value"}, {"owner": {"reputation": 3828, "user_id": 2137417, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/792918317c06a7c76f7f88390d003d93?s=128&d=identicon&r=PG", "display_name": "jstuartmilne", "link": "https://stackoverflow.com/users/2137417/jstuartmilne"}, "edited": false, "score": 0, "creation_date": 1570042182, "post_id": 58207358, "comment_id": 102793181, "body": "updated the answer"}, {"owner": {"reputation": 1, "user_id": 12151777, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb0a9e0b360e5d622d699119c853bd95?s=128&d=identicon&r=PG&f=1", "display_name": "lidya_q", "link": "https://stackoverflow.com/users/12151777/lidya-q"}, "edited": false, "score": 0, "creation_date": 1570043493, "post_id": 58207358, "comment_id": 102793787, "body": "that&#39;s the printout of your code : ("}, {"owner": {"reputation": 1, "user_id": 12151777, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb0a9e0b360e5d622d699119c853bd95?s=128&d=identicon&r=PG&f=1", "display_name": "lidya_q", "link": "https://stackoverflow.com/users/12151777/lidya-q"}, "edited": false, "score": 0, "creation_date": 1570043874, "post_id": 58207358, "comment_id": 102793920, "body": "Uhm, I just copy paste your code and I executed, and it printed only : &quot; ( &quot;, &lt;- this"}, {"owner": {"reputation": 3828, "user_id": 2137417, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/792918317c06a7c76f7f88390d003d93?s=128&d=identicon&r=PG", "display_name": "jstuartmilne", "link": "https://stackoverflow.com/users/2137417/jstuartmilne"}, "reply_to_user": {"reputation": 1, "user_id": 12151777, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb0a9e0b360e5d622d699119c853bd95?s=128&d=identicon&r=PG&f=1", "display_name": "lidya_q", "link": "https://stackoverflow.com/users/12151777/lidya-q"}, "edited": false, "score": 0, "creation_date": 1570044195, "post_id": 58207358, "comment_id": 102794042, "body": "@lidya_q sorry man you were right. Edited. its been a long time :P"}, {"owner": {"reputation": 1, "user_id": 12151777, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb0a9e0b360e5d622d699119c853bd95?s=128&d=identicon&r=PG&f=1", "display_name": "lidya_q", "link": "https://stackoverflow.com/users/12151777/lidya-q"}, "edited": false, "score": 0, "creation_date": 1570044379, "post_id": 58207358, "comment_id": 102794137, "body": "@jstuartnilme , Ok thank you &quot;Man&quot; :), it&#39;s printed as needs, I will make some changes to get the right result. Thx for your help, and thanks ofr others who tried to help"}, {"owner": {"reputation": 3828, "user_id": 2137417, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/792918317c06a7c76f7f88390d003d93?s=128&d=identicon&r=PG", "display_name": "jstuartmilne", "link": "https://stackoverflow.com/users/2137417/jstuartmilne"}, "reply_to_user": {"reputation": 1, "user_id": 12151777, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb0a9e0b360e5d622d699119c853bd95?s=128&d=identicon&r=PG&f=1", "display_name": "lidya_q", "link": "https://stackoverflow.com/users/12151777/lidya-q"}, "edited": false, "score": 0, "creation_date": 1570044410, "post_id": 58207358, "comment_id": 102794153, "body": "Care to upvote :). Great it worked"}], "tags": [], "owner": {"reputation": 3828, "user_id": 2137417, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/792918317c06a7c76f7f88390d003d93?s=128&d=identicon&r=PG", "display_name": "jstuartmilne", "link": "https://stackoverflow.com/users/2137417/jstuartmilne"}, "is_accepted": false, "score": 1, "last_activity_date": 1570044165, "last_edit_date": 1570044165, "creation_date": 1570040983, "answer_id": 58207358, "question_id": 58207269, "link": "https://stackoverflow.com/questions/58207269/string-position-multiply-with-array-position/58207358#58207358", "title": "String position multiply with array position", "body": "<p>So if im not mistaken this is what you want right.\nwhere totalProduct will hold the product of every product and arr2 holds your columns. I added resultAsString so you have the result as string</p>\n\n<p>note the <code>var.at(i)-'0'</code> which does the convertion you want or i think you are looking for.</p>\n\n<p>for the conversion from int to string im using    </p>\n\n<pre><code>std::stringstream ss;\n      ss &lt;&lt; product;\n</code></pre>\n\n<p>a less C++ aproach would have been the atoi(product) function. or if using c++ 11 std:to_string(product)\nHope it helps</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;sstream&gt;\n\n\n\nint main() {\n  std::string var1 = \"1232253759\";\n  int arr[] = {5,3,7,1,2,8,9,2,2,1};\n  int arr2[var1.size()];\n  int totalProduct = 0;\n  std::string resultAsString = \"\";\n  for(int i = 0; i &lt; var1.size(); i++)\n  {\n    // for(int n = 0; n &lt; 10; n++)\n    // {\n\n      int product = (var1.at(i)-'0') * arr[i];\n      // std::cout &lt;&lt; product &lt;&lt; \"\\n\";\n      arr2[i] = product;\n      std::stringstream ss;\n      ss &lt;&lt; product;\n      resultAsString += ss.str();\n      totalProduct += product;\n     //}\n  }\n  // for (int i = var1.size() - 1; i &gt;= 0; i--) \n  //   std::cout &lt;&lt; arr2[i] &lt;&lt; \" \";\n  std::cout &lt;&lt; resultAsString;\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 12151777, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb0a9e0b360e5d622d699119c853bd95?s=128&d=identicon&r=PG&f=1", "display_name": "lidya_q", "link": "https://stackoverflow.com/users/12151777/lidya-q"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "closed_date": 1570051743, "answer_count": 2, "score": 0, "last_activity_date": 1570066368, "creation_date": 1570040640, "last_edit_date": 1570066368, "question_id": 58207269, "link": "https://stackoverflow.com/questions/58207269/string-position-multiply-with-array-position", "closed_reason": "Not suitable for this site", "title": "String position multiply with array position", "body": "<p>Something wrong with my code, I want to multiply a string of numbers with an array of numbers(same length) and store the product in variable product, then I want to store this product of each column in my string variable (as a new values)</p>\n\n<pre><code>string var1 = \"1232253759\";\nint arr[] = {5,3,7,1,2,8,9,2,2,1};\nfor(int i = 0; i &lt; var1.size(); i++)\n{\n  for(int n = 0; n &lt; 10; n++)\n  {\n     int product = 0;\n     product = var1[i] * arr[n];\n     var1[i] = product;\n   }\n}\n\n</code></pre>\n\n<p>there is a short output of this result:\n245<br>\n-33<br>\n-231<br>\n25<br>\n50<br>\n400<br>\n-1008<br>\n32       </p>\n"}, {"tags": ["c++", "qt", "qml"], "answers": [{"comments": [{"owner": {"reputation": 101, "user_id": 10947505, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b70b3c566b8749c69159657c6e8d38ae?s=128&d=identicon&r=PG&f=1", "display_name": "Gebre", "link": "https://stackoverflow.com/users/10947505/gebre"}, "edited": false, "score": 0, "creation_date": 1570041793, "post_id": 58207330, "comment_id": 102792995, "body": "Yes, but I want to access it through car.seats. Basically imagine if I also have to more classes, namely Honda and Mazda, also derived from car. And only one car type is active at the time of the code running. So no matter which car type is active I want to get the value of seats. So I want to be able to just do:  console.log(car.seats)"}], "tags": [], "owner": {"reputation": 2669, "user_id": 1228771, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SF8S5.png?s=128&g=1", "display_name": "Amfasis", "link": "https://stackoverflow.com/users/1228771/amfasis"}, "is_accepted": false, "score": 1, "last_activity_date": 1570042326, "last_edit_date": 1570042326, "creation_date": 1570040860, "answer_id": 58207330, "question_id": 58207214, "link": "https://stackoverflow.com/questions/58207214/qt-emit-base-class-signal-from-derived-class/58207330#58207330", "title": "Qt emit base class signal from derived class", "body": "<p>Your <code>toyota</code> and <code>car</code> properties are two separate ones.</p>\n\n<p>You have to read the <code>seats</code> property from <code>toyota</code>:</p>\n\n<p>main.qml</p>\n\n<pre><code>toyota.foundCar()\nconsole.log(toyota.seats) //&lt;--- here\n</code></pre>\n\n<p><strong>Update after comment:</strong></p>\n\n<p>Ok, that's a different approach, but in that case I would set the <code>car</code> property to the toyota pointer:</p>\n\n<p>main.cpp</p>\n\n<pre><code>    Car car = new Toyota();\n\n    ctxt-&gt;setContextProperty(\"car\", ty);\n    ctxt-&gt;setContextProperty(\"toyota\", ty);\n</code></pre>\n\n<p>This probably can be fitted in a overarching class (something like <code>car_manager</code> or <code>car_store</code>) in which you have a list of available cars and a function to select one car as the current, then you update the generic <code>car</code> or <code>current</code> property of that overarching class. </p>\n\n<p>I say this because you will get nasty code when you want to work from the root context and furthermore, root properties don't signal that they are changed</p>\n"}], "owner": {"reputation": 101, "user_id": 10947505, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b70b3c566b8749c69159657c6e8d38ae?s=128&d=identicon&r=PG&f=1", "display_name": "Gebre", "link": "https://stackoverflow.com/users/10947505/gebre"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 183, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1570042326, "creation_date": 1570040473, "question_id": 58207214, "link": "https://stackoverflow.com/questions/58207214/qt-emit-base-class-signal-from-derived-class", "title": "Qt emit base class signal from derived class", "body": "<p>I basically just want to use multiple derived classes to change a member variable of a base class and to forward that value to qml using qproperty, but emitting the signal isn't working and I am not able to make the signal static</p>\n\n<p>car.h</p>\n\n<pre><code>    #include &lt;QObject&gt;\n\n    class Car : public QObject{\n        Q_OBJECT\n        Q_PROPERTY(int seats MEMBER m_seats NOTIFY updateSeats)\n\n    public:\n        explicit Car(QObject *parent = 0);\n        ~Car();\n        static int m_seats;\n\n    signals:\n        void updateSeats();\n    };\n</code></pre>\n\n<p>car.cpp    </p>\n\n<pre><code>    #include \"car.h\"\n\n    Car::Car(QObject *parent) :\n        QObject(parent)\n    {\n\n    }\n\n    int Car::m_seats = 0;\n\n    Car::~Car(){}\n</code></pre>\n\n<p>toyota.h</p>\n\n<pre><code>    #include \"car.h\"\n\n    class Toyota : public Car{\n        Q_OBJECT\n\n\n    public:\n        explicit Toyota(QObject *parent = 0);\n        ~Toyota();\n        Q_INVOKABLE void foundCar();\n    };\n</code></pre>\n\n<p>toyota.cpp    </p>\n\n<pre><code>    #include \"toyota.h\"\n\n    Toyota::Toyota(QObject *parent) \n    {\n\n    }\n\n    Toyota::foundCar(){\n        m_seats = 4;\n        emit updateSeats();  // This isn't working\n    }\n\n    Toyota::~Toyota(){}\n</code></pre>\n\n<p>main.cpp</p>\n\n<pre><code>    #include &lt;QGuiApplication&gt;\n    #include \"car.h\"\n    #include \"toyota.h\"\n\n    int main(int argc, char *argv[])\n    {\n\n        QGuiApplication app(argc, argv);\n        Car car = new Car();\n        Toyota ty = new Toyota();\n        QQmlApplicationEngine engine;\n        QQmlContext *ctxt = engine.rootContext();\n        ctxt-&gt;setContextProperty(\"car\", car);\n        ctxt-&gt;setContextProperty(\"toyota\", ty);\n        engine.load(QUrl(QLatin1String(\"qrc:/main.qml\")));\n\n        app.exec();\n        engine.quit();\n    }\n</code></pre>\n\n<p>In qml when I print car.seats after invoking the foundCar function</p>\n\n<p>main.qml</p>\n\n<pre><code>    toyota.foundCar()\n    console.log(car.seats)\n</code></pre>\n\n<p>the output is still 0. The reason the signal being emitted is not updating is probably because it is from a different object (Toyota). So how can I emit the signal of the base class from the derived class?</p>\n"}, {"tags": ["c++", "trace", "bpf", "ebpf"], "answers": [{"tags": [], "owner": {"reputation": 593, "user_id": 1031240, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/a7gJk.png?s=128&g=1", "display_name": "koxt", "link": "https://stackoverflow.com/users/1031240/koxt"}, "is_accepted": false, "score": 3, "last_activity_date": 1574967786, "creation_date": 1574967786, "answer_id": 59094946, "question_id": 58207204, "link": "https://stackoverflow.com/questions/58207204/attach-bpftrace-probe-to-c-function/59094946#59094946", "title": "Attach bpftrace probe to C++ function", "body": "<p>main.cpp</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nclass BigApp {\n  public:\n    void methodName() {\n      std::cout &lt;&lt; \"method Name!\";\n    }\n};\n\nint main() {\n  BigApp bigApp;      \n  bigApp.methodName();      \n  return 0;\n}\n</code></pre>\n\n<hr>\n\n<pre><code>g++ main.cpp -o main\n\n# locate mangled symbol name\nreadelf -Ws /home/koxt/dev/cpp/main | grep methodName\n69: 00000000004007ee    30 FUNC    WEAK   DEFAULT   14 _ZN6BigApp10methodNameEv\n\nbpftrace -e 'uprobe:/home/koxt/dev/cpp/main:_ZN6BigApp10methodNameEv { printf(\"1\"); }'\n</code></pre>\n"}], "owner": {"reputation": 51, "user_id": 2345075, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d380faa99a8d5fe7c9596211a68a26d7?s=128&d=identicon&r=PG", "display_name": "Brad Walker", "link": "https://stackoverflow.com/users/2345075/brad-walker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 377, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1576747640, "creation_date": 1570040428, "last_edit_date": 1576747640, "question_id": 58207204, "link": "https://stackoverflow.com/questions/58207204/attach-bpftrace-probe-to-c-function", "title": "Attach bpftrace probe to C++ function", "body": "<p>I have a question about <code>bpftrace</code> syntax and hoping that someone might have seen this before.</p>\n\n<p>In looking at the <a href=\"https://github.com/iovisor/bpftrace/blob/master/docs/reference_guide.md#3-uprobeuretprobe-dynamic-tracing-user-level\" rel=\"nofollow noreferrer\">bpftrace</a> reference document, I've been able to trace a user-app function successfully. No problems there. What I can't figure out is <strong>how to attach a probe to a C++ method</strong>.</p>\n\n<p>For example, here is the syntax that I'm using and the error:</p>\n\n<pre><code>$ bpftrace -e 'uretprobe:/usr/share/BigApp:BigApp::MethodName { printf(\"method return\\n\"); }'\n1.34-35: syntax error, unexpected path, expecting { \n</code></pre>\n\n<p>What would be the proper syntax for attaching a bpftrace probe to a C++ user-app?</p>\n"}, {"tags": ["c++", "templates", "sfinae"], "answers": [{"tags": [], "owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "is_accepted": true, "score": 1, "last_activity_date": 1570040619, "creation_date": 1570040619, "answer_id": 58207265, "question_id": 58207161, "link": "https://stackoverflow.com/questions/58207161/omit-argument-name-after-computed-type/58207265#58207265", "title": "Omit argument name after computed type", "body": "<p>There are two problems here:</p>\n\n<ol>\n<li>A typo in <code>std::is_trivial_v&lt;T&gt;::value</code> - either drop <code>_v</code> or <code>::value</code>.</li>\n<li><code>&gt;=</code> in <code>std::enable_if_t&lt; ... &gt;=0</code> ends up as a single token (a 'greater than' sign). You need to separate <code>&gt;</code> and <code>=</code> with a space.</li>\n</ol>\n\n<p>GCC is being rather unhelpful about the second issue:<br>\n<code>&lt;source&gt;:4:64: error: template argument 2 is invalid</code></p>\n\n<p>But Clang gives more insight:<br>\n<code>&lt;source&gt;:4:62: error: a space is required between a right angle bracket and an equals sign (use '&gt; =')</code></p>\n"}], "owner": {"reputation": 5309, "user_id": 877329, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/0b5c9fa7b8fa8139c1330b5fbbd5f934?s=128&d=identicon&r=PG", "display_name": "user877329", "link": "https://stackoverflow.com/users/877329/user877329"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 36, "favorite_count": 0, "accepted_answer_id": 58207265, "answer_count": 1, "score": 0, "last_activity_date": 1570043234, "creation_date": 1570040253, "last_edit_date": 1570043234, "question_id": 58207161, "link": "https://stackoverflow.com/questions/58207161/omit-argument-name-after-computed-type", "title": "Omit argument name after computed type", "body": "<p>Why does not the following not compile</p>\n\n<pre><code>#include &lt;type_traits&gt;\n\ntemplate&lt;class T&gt;\nvoid stuff(T, std::enable_if_t&lt;std::is_trivial_v&lt;T&gt;, int&gt;=0);\n</code></pre>\n\n<p>while this does</p>\n\n<pre><code>template&lt;class T&gt;\nvoid stuff2(T, int=0);\n</code></pre>\n\n<p>It appears that the argument name is needed when its type is computed. If I build with -Wunused-parameter, is there a better solution than the <code>(void)x</code> trick?</p>\n\n<p>Real usecase:</p>\n\n<pre><code>template&lt;class SrcType, size_t N&gt;\nexplicit constexpr ShortString(SrcType const (&amp;src)[N]\n                              , std::enable_if_t&lt;(N&gt;=1 &amp;&amp; (N - 1 &lt;= npos) &amp;&amp; sizeof(SrcType)&lt;=sizeof(value_type)), int&gt; x = 0);\n</code></pre>\n"}, {"tags": ["c++", "visual-studio", "compiler-errors"], "comments": [{"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1570039972, "post_id": 58207061, "comment_id": 102792170, "body": "BTW, I highly recommend not using precompiled headers, e.g. <code>pch.h</code> until you are confident in writing large programs.  The benefit is negligible for small programs."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 1, "creation_date": 1570040045, "post_id": 58207061, "comment_id": 102792203, "body": "Most of those are warnings indicating that the debug symbols for the DLLs could not be found.  You can still debug your program; you want be able to expand into any of the DLL functions (which are not often required)."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 1, "creation_date": 1570040096, "post_id": 58207061, "comment_id": 102792223, "body": "There should be a duplicate of this ..."}, {"owner": {"reputation": 1569, "user_id": 2328447, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0de19095009cfa136440130a79b73b0e?s=128&d=identicon&r=PG", "display_name": "user2328447", "link": "https://stackoverflow.com/users/2328447/user2328447"}, "edited": false, "score": 0, "creation_date": 1570040441, "post_id": 58207061, "comment_id": 102792375, "body": "There seems not to be any error. I think your program runs, outputs its text into the console window (which you probably missed, since its very fast), and then instantly exits. Try to set a breakpoint (F9) before starting your debug session. You should add a <code>return 0;</code> in <code>int main()</code> body anyway."}, {"owner": {"reputation": 1569, "user_id": 2328447, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0de19095009cfa136440130a79b73b0e?s=128&d=identicon&r=PG", "display_name": "user2328447", "link": "https://stackoverflow.com/users/2328447/user2328447"}, "edited": false, "score": 0, "creation_date": 1570041100, "post_id": 58207061, "comment_id": 102792691, "body": "<a href=\"https://stackoverflow.com/a/15817925/2328447\">stackoverflow.com/a/15817925/2328447</a> and <a href=\"https://stackoverflow.com/a/54084067/2328447\">stackoverflow.com/a/54084067/2328447</a> might be interesting for you."}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "reply_to_user": {"reputation": 1569, "user_id": 2328447, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0de19095009cfa136440130a79b73b0e?s=128&d=identicon&r=PG", "display_name": "user2328447", "link": "https://stackoverflow.com/users/2328447/user2328447"}, "edited": false, "score": 0, "creation_date": 1570103019, "post_id": 58207061, "comment_id": 102812681, "body": "@user2328447 <code>return 0;</code> is implicit in <code>main</code>, otherwise I second your comment."}], "answers": [{"tags": [], "owner": {"reputation": 1233, "user_id": 11872808, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29d7b759b09573f7750c178d99015eca?s=128&d=identicon&r=PG&f=1", "display_name": "Jeaninez - MSFT", "link": "https://stackoverflow.com/users/11872808/jeaninez-msft"}, "is_accepted": false, "score": 0, "last_activity_date": 1570093434, "creation_date": 1570093434, "answer_id": 58215734, "question_id": 58207061, "link": "https://stackoverflow.com/questions/58207061/several-errors-appearing-whenever-i-debug/58215734#58215734", "title": "Several errors appearing whenever I debug", "body": "<p>PDB file is a debug information file used by Visual Studio. These are system DLLs, which you don't have debug symbols for. Go to Tools->Options->Debugging->Symbols and select checkbox \"Microsoft Symbol Servers\", Visual Studio will download PDB files automatically. </p>\n\n<p><a href=\"https://i.stack.imgur.com/QyjOs.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/QyjOs.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 1, "user_id": 10947224, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-otVjKY1m6pU/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQMs4fJNnlnZd5XOYQ6aCIQDCaVNDg/mo/photo.jpg?sz=128", "display_name": "Asher Coates", "link": "https://stackoverflow.com/users/10947224/asher-coates"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 58, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1570093434, "creation_date": 1570039871, "last_edit_date": 1570039898, "question_id": 58207061, "link": "https://stackoverflow.com/questions/58207061/several-errors-appearing-whenever-i-debug", "title": "Several errors appearing whenever I debug", "body": "<p>I am currently enrolled in a programming fundamentals class in c++. I've set up Visual Studio 2017 and am trying to run the example code from the textbook. Whenever I try to debug anything, including the sample \"hello world\" code, I get these errors.</p>\n\n<p>I've tried changing the location of the project and triple-checked the code.</p>\n\n<pre><code>#include \"pch.h\"\n#include &lt;iostream&gt;\n\nint main()\n{\n    std::cout &lt;&lt; \"Hello World!\\n\"; \n}\n</code></pre>\n\n<p>It is supposed to output \"hello world\", but I get these errors instead.</p>\n\n<pre><code>'ConsoleApplication6.exe' (Win32): Loaded 'C:\\Users\\Asher\\source\\repos\\ConsoleApplication6\\Debug\\ConsoleApplication6.exe'. Symbols loaded.\n'ConsoleApplication6.exe' (Win32): Loaded 'C:\\Windows\\SysWOW64\\ntdll.dll'. Cannot find or open the PDB file.\n'ConsoleApplication6.exe' (Win32): Loaded 'C:\\Windows\\SysWOW64\\kernel32.dll'. Cannot find or open the PDB file.\n'ConsoleApplication6.exe' (Win32): Loaded 'C:\\Windows\\SysWOW64\\KernelBase.dll'. Cannot find or open the PDB file.\n'ConsoleApplication6.exe' (Win32): Loaded 'C:\\Windows\\SysWOW64\\apphelp.dll'. Cannot find or open the PDB file.\n'ConsoleApplication6.exe' (Win32): Loaded 'C:\\Windows\\SysWOW64\\msvcp140d.dll'. Cannot find or open the PDB file.\n'ConsoleApplication6.exe' (Win32): Loaded 'C:\\Windows\\SysWOW64\\vcruntime140d.dll'. Cannot find or open the PDB file.\n'ConsoleApplication6.exe' (Win32): Loaded 'C:\\Windows\\SysWOW64\\ucrtbased.dll'. Cannot find or open the PDB file.\n'ConsoleApplication6.exe' (Win32): Unloaded 'C:\\Windows\\SysWOW64\\ucrtbased.dll'\n'ConsoleApplication6.exe' (Win32): Loaded 'C:\\Windows\\SysWOW64\\ucrtbased.dll'. Cannot find or open the PDB file.\nThe thread 0x358c has exited with code 0 (0x0).\n'ConsoleApplication6.exe' (Win32): Loaded 'C:\\Windows\\SysWOW64\\kernel.appcore.dll'. Cannot find or open the PDB file.\n'ConsoleApplication6.exe' (Win32): Loaded 'C:\\Windows\\SysWOW64\\msvcrt.dll'. Cannot find or open the PDB file.\n'ConsoleApplication6.exe' (Win32): Loaded 'C:\\Windows\\SysWOW64\\rpcrt4.dll'. Cannot find or open the PDB file.\n'ConsoleApplication6.exe' (Win32): Loaded 'C:\\Windows\\SysWOW64\\sspicli.dll'. Cannot find or open the PDB file.\n'ConsoleApplication6.exe' (Win32): Loaded 'C:\\Windows\\SysWOW64\\cryptbase.dll'. Cannot find or open the PDB file.\n'ConsoleApplication6.exe' (Win32): Loaded 'C:\\Windows\\SysWOW64\\bcryptprimitives.dll'. Cannot find or open the PDB file.\n'ConsoleApplication6.exe' (Win32): Loaded 'C:\\Windows\\SysWOW64\\sechost.dll'. Cannot find or open the PDB file.\nThe thread 0x31c8 has exited with code 0 (0x0).\nThe thread 0xca8 has exited with code 0 (0x0).\nThe thread 0x27a4 has exited with code 0 (0x0).\nThe program '[20724] ConsoleApplication6.exe' has exited with code 0 (0x0).\n</code></pre>\n"}, {"tags": ["c++", "design-patterns", "polymorphism"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1570039213, "post_id": 58206855, "comment_id": 102791844, "body": "You forget one main point of polymophism in C++... That polymorphic functions needs to be <code>virtual</code>."}, {"owner": {"reputation": 932, "user_id": 6345323, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6dbbb0c750be6073b0d251899c74a47?s=128&d=identicon&r=PG&f=1", "display_name": "yaodav", "link": "https://stackoverflow.com/users/6345323/yaodav"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1570039280, "post_id": 58206855, "comment_id": 102791875, "body": "thank you i forgat to add this for the question"}, {"owner": {"reputation": 777, "user_id": 7631250, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QwnKh.jpg?s=128&g=1", "display_name": "MercyDude", "link": "https://stackoverflow.com/users/7631250/mercydude"}, "edited": false, "score": 1, "creation_date": 1570039423, "post_id": 58206855, "comment_id": 102791951, "body": "also if you want them to be pure virtual you should make each virtual function = 0; like virtual void send(const std::string&amp; string) = 0; (inside the server class)"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1570039693, "post_id": 58206855, "comment_id": 102792054, "body": "Also, the destructor for <code>Server</code> needs to be <code>virtual</code> for the use case you are showing us."}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 0, "creation_date": 1570039775, "post_id": 58206855, "comment_id": 102792088, "body": "...and unless you want to force all child classes to implement a destructor, you could add a default implementation yourself (outside the class definition): <code>Server::~Server() {}</code>"}], "answers": [{"comments": [{"owner": {"reputation": 4566, "user_id": 453492, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/7b45c33a5eda398febe496831ccaacb4?s=128&d=identicon&r=PG", "display_name": "Mario The Spoon", "link": "https://stackoverflow.com/users/453492/mario-the-spoon"}, "edited": false, "score": 0, "creation_date": 1570039715, "post_id": 58206899, "comment_id": 102792063, "body": "Wouldn&#39;t it be more a Factory Pattern? Since the creation is not covered in the strategy"}, {"owner": {"reputation": 67, "user_id": 10291653, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-KSunaxItQB0/AAAAAAAAAAI/AAAAAAAACuc/2J3oMxy09rw/photo.jpg?sz=128", "display_name": "vijay krishna", "link": "https://stackoverflow.com/users/10291653/vijay-krishna"}, "reply_to_user": {"reputation": 4566, "user_id": 453492, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/7b45c33a5eda398febe496831ccaacb4?s=128&d=identicon&r=PG", "display_name": "Mario The Spoon", "link": "https://stackoverflow.com/users/453492/mario-the-spoon"}, "edited": false, "score": 0, "creation_date": 1570040526, "post_id": 58206899, "comment_id": 102792419, "body": "As I understood, the idea is to select type of server at runtime (polymorphism) hence server variant is substitutable by abstract class or interface in question. Hence Strategy pattern fits."}, {"owner": {"reputation": 67, "user_id": 10291653, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-KSunaxItQB0/AAAAAAAAAAI/AAAAAAAACuc/2J3oMxy09rw/photo.jpg?sz=128", "display_name": "vijay krishna", "link": "https://stackoverflow.com/users/10291653/vijay-krishna"}, "reply_to_user": {"reputation": 4566, "user_id": 453492, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/7b45c33a5eda398febe496831ccaacb4?s=128&d=identicon&r=PG", "display_name": "Mario The Spoon", "link": "https://stackoverflow.com/users/453492/mario-the-spoon"}, "edited": false, "score": 0, "creation_date": 1570040985, "post_id": 58206899, "comment_id": 102792647, "body": "@MarioTheSpoon no. The use case is not about how to create a server type, but to substitute a type of server at runtime based on parameter."}], "tags": [], "owner": {"reputation": 67, "user_id": 10291653, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-KSunaxItQB0/AAAAAAAAAAI/AAAAAAAACuc/2J3oMxy09rw/photo.jpg?sz=128", "display_name": "vijay krishna", "link": "https://stackoverflow.com/users/10291653/vijay-krishna"}, "is_accepted": true, "score": 1, "last_activity_date": 1570039186, "creation_date": 1570039186, "answer_id": 58206899, "question_id": 58206855, "link": "https://stackoverflow.com/questions/58206855/which-design-pattern-to-use-to-get-the-wanted-functionality/58206899#58206899", "title": "which design pattern to use to get the wanted functionality", "body": "<p>Strategy pattern should be implemented for this use case. Check the link below for more information.</p>\n\n<p><a href=\"https://en.m.wikipedia.org/wiki/Strategy_pattern\" rel=\"nofollow noreferrer\">https://en.m.wikipedia.org/wiki/Strategy_pattern</a></p>\n"}, {"comments": [{"owner": {"reputation": 932, "user_id": 6345323, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6dbbb0c750be6073b0d251899c74a47?s=128&d=identicon&r=PG&f=1", "display_name": "yaodav", "link": "https://stackoverflow.com/users/6345323/yaodav"}, "edited": false, "score": 0, "creation_date": 1570040284, "post_id": 58207064, "comment_id": 102792305, "body": "the reactor pattern is not relevant to my case, I just gave the example for tcp\\udp in my real case is to chose which 3rd party lib to use (and only in the beginning of the program)"}], "tags": [], "owner": {"reputation": 4566, "user_id": 453492, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/7b45c33a5eda398febe496831ccaacb4?s=128&d=identicon&r=PG", "display_name": "Mario The Spoon", "link": "https://stackoverflow.com/users/453492/mario-the-spoon"}, "is_accepted": false, "score": 0, "last_activity_date": 1570039889, "creation_date": 1570039889, "answer_id": 58207064, "question_id": 58206855, "link": "https://stackoverflow.com/questions/58206855/which-design-pattern-to-use-to-get-the-wanted-functionality/58207064#58207064", "title": "which design pattern to use to get the wanted functionality", "body": "<p>I would lean more towards Factory Pattern:</p>\n\n<p><a href=\"https://en.m.wikipedia.org/wiki/Factory_method_pattern\" rel=\"nofollow noreferrer\">https://en.m.wikipedia.org/wiki/Factory_method_pattern</a></p>\n\n<p>Since you go into TCP/ UDP you might also check out the  reactor pattern</p>\n"}], "owner": {"reputation": 932, "user_id": 6345323, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6dbbb0c750be6073b0d251899c74a47?s=128&d=identicon&r=PG&f=1", "display_name": "yaodav", "link": "https://stackoverflow.com/users/6345323/yaodav"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "accepted_answer_id": 58206899, "answer_count": 2, "score": -1, "last_activity_date": 1570041206, "creation_date": 1570038998, "last_edit_date": 1570040440, "question_id": 58206855, "link": "https://stackoverflow.com/questions/58206855/which-design-pattern-to-use-to-get-the-wanted-functionality", "title": "which design pattern to use to get the wanted functionality", "body": "<p>I want to make a pure virtual class that other classes inherit and each class implements the same function but with different implementation:\nlet say I implement class Server</p>\n\n<pre><code>class Server\n{\n   Server();\n   ~Server()=0;\n   virtual void send(const std::string&amp; string);\n   virtual std::string receive();\n};\n\nclass TcpServer:public Server\n{\n   TcpServer();\n   ~TcpServer();\n   void send(const std::string&amp; string)\n   {...}\n   std::string receive(){...}\n};\n\nclass UdpServer : public Server\n{\n    UdpServer ();\n    ~UdpServer ();\n    void send(const std::string&amp; string)\n    {...}\n    std::string receive(){...}\n};\n\n\n\nmain()\n{\n    Server* server = new TcpServer()/UdpServer;\n}\n</code></pre>\n\n<p>What's this Design Pattern called? because I don't understand if it's Adapter or Composite or Facade and if you have a different idea of how to implement this behavior. </p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 2, "creation_date": 1570039105, "post_id": 58206744, "comment_id": 102791790, "body": "While this does not make this a bad question, you are approaching programming in C++ from a bad direction. Do not try to program in C++ as you would in C#. Program C++ according to C++ idioms and best practices. Celebrate what C++ and C# have in common, but when they differ take advantage of what C++ offers and you will write better C++ code."}, {"owner": {"reputation": 1295, "user_id": 2279765, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/432916361960d8ddbb2d4bdb8369b78f?s=128&d=identicon&r=PG", "display_name": "Tomer", "link": "https://stackoverflow.com/users/2279765/tomer"}, "edited": false, "score": 0, "creation_date": 1570039767, "post_id": 58206744, "comment_id": 102792085, "body": "How about libevent <a href=\"https://libevent.org/\" rel=\"nofollow noreferrer\">libevent.org</a> ? I know you said nothing outside Boost or Ace, but when developing applications in C++ you will likely need libraries. In addition, if you&#39;re interested in learning other languages as well check out how it&#39;s done in golang (with channels) <a href=\"https://tour.golang.org/concurrency/2\" rel=\"nofollow noreferrer\">tour.golang.org/concurrency/2</a> ."}, {"owner": {"reputation": 11, "user_id": 12153711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/42113b79b469da2aefac23e420308c79?s=128&d=identicon&r=PG&f=1", "display_name": "Sin", "link": "https://stackoverflow.com/users/12153711/sin"}, "reply_to_user": {"reputation": 1295, "user_id": 2279765, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/432916361960d8ddbb2d4bdb8369b78f?s=128&d=identicon&r=PG", "display_name": "Tomer", "link": "https://stackoverflow.com/users/2279765/tomer"}, "edited": false, "score": 0, "creation_date": 1570040481, "post_id": 58206744, "comment_id": 102792398, "body": "@Tomer I will look at it.  The reason I trying to avoid those libraries is the company i&#39;m looking at doesn&#39;t use it.  I am also trying to challenge myself to figure out how to do things without feeling that I&#39;m taking the shortcut."}, {"owner": {"reputation": 1132, "user_id": 4057688, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/3sHT1.jpg?s=128&g=1", "display_name": "Mirjalal", "link": "https://stackoverflow.com/users/4057688/mirjalal"}, "edited": false, "score": 0, "creation_date": 1570040499, "post_id": 58206744, "comment_id": 102792408, "body": "Have you read this comment before? <a href=\"https://stackoverflow.com/q/9711414#comment47767325_9711916\">stackoverflow.com/q/9711414#comment47767325_9711916</a>"}, {"owner": {"reputation": 1295, "user_id": 2279765, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/432916361960d8ddbb2d4bdb8369b78f?s=128&d=identicon&r=PG", "display_name": "Tomer", "link": "https://stackoverflow.com/users/2279765/tomer"}, "edited": false, "score": 0, "creation_date": 1570040735, "post_id": 58206744, "comment_id": 102792528, "body": "@sin my recommendation as a software engineer, is to always take shortcuts when possible (and when it makes sense). Always assume other developers have already thought about &quot;problems&quot; and found ways to solve them. Sometimes these developers are nice enough to share their solutions with the world (e.g. open source libraries)."}], "answers": [{"comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1570043721, "post_id": 58207009, "comment_id": 102793868, "body": "This is true, but it&#39;s not particularly hard to write an event loop with C++&#39;s built in (as of C++11) threading. After that it&#39;s just a matter of how you intend to handle the callbacks."}], "tags": [], "owner": {"reputation": 11117, "user_id": 1554020, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/49118fbd7e64a00bc99b19d41e5e28e0?s=128&d=identicon&r=PG", "display_name": "yuri kilochek", "link": "https://stackoverflow.com/users/1554020/yuri-kilochek"}, "is_accepted": false, "score": 0, "last_activity_date": 1570039599, "creation_date": 1570039599, "answer_id": 58207009, "question_id": 58206744, "link": "https://stackoverflow.com/questions/58206744/c-event-like-driven-example/58207009#58207009", "title": "C++ event like driven example", "body": "<p>No, there is nothing in C++ core language or standard library that is like C# events.</p>\n"}], "owner": {"reputation": 11, "user_id": 12153711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/42113b79b469da2aefac23e420308c79?s=128&d=identicon&r=PG&f=1", "display_name": "Sin", "link": "https://stackoverflow.com/users/12153711/sin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 72, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1570039599, "creation_date": 1570038540, "question_id": 58206744, "link": "https://stackoverflow.com/questions/58206744/c-event-like-driven-example", "title": "C++ event like driven example", "body": "<p>Back story, I have mostly written in C#.  Now I want to practice my C++.</p>\n\n<p>I keep seeing myself comparing what c# can do and trying to search for it on c++.  The question is are there event like driven handlers in c++ that can get me similar on how c# is done?  I'm not looking for the exact same thing.  I'm just asking from a confused c# point of view.</p>\n\n<p>Also I am trying my hardest not to use any outside libraries like Boost or ACE.</p>\n"}, {"tags": ["python", "c++", "binding"], "comments": [{"owner": {"reputation": 15007, "user_id": 389289, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33eab2fa999a20910a29e4a2299bc174?s=128&d=identicon&r=PG&f=1", "display_name": "zvone", "link": "https://stackoverflow.com/users/389289/zvone"}, "edited": false, "score": 1, "creation_date": 1570037981, "post_id": 58206564, "comment_id": 102791301, "body": "Start here: <a href=\"https://docs.python.org/3/extending/embedding.html#embedding-python-in-c\" rel=\"nofollow noreferrer\">docs.python.org/3/extending/&hellip;</a>"}, {"owner": {"reputation": 1, "user_id": 10712652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72ac81e95ffbc4d734afd953a547b276?s=128&d=identicon&r=PG&f=1", "display_name": "ilhamitugral", "link": "https://stackoverflow.com/users/10712652/ilhamitugral"}, "reply_to_user": {"reputation": 15007, "user_id": 389289, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33eab2fa999a20910a29e4a2299bc174?s=128&d=identicon&r=PG&f=1", "display_name": "zvone", "link": "https://stackoverflow.com/users/389289/zvone"}, "edited": false, "score": 0, "creation_date": 1570038349, "post_id": 58206564, "comment_id": 102791441, "body": "Thank you! I will examine."}], "owner": {"reputation": 1, "user_id": 10712652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72ac81e95ffbc4d734afd953a547b276?s=128&d=identicon&r=PG&f=1", "display_name": "ilhamitugral", "link": "https://stackoverflow.com/users/10712652/ilhamitugral"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 38, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1584704793, "creation_date": 1570037892, "last_edit_date": 1584704793, "question_id": 58206564, "link": "https://stackoverflow.com/questions/58206564/calling-python-function-using-c", "title": "Calling Python Function Using C++", "body": "<p>I cant find good source. I just want that style example;</p>\n\n<p>main.cpp</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>int main()\n{\n   // Call hello function in example.py\n}\n</code></pre>\n\n<p>example.py</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>def hello():\n    print(\"Hello World\")\n</code></pre>\n\n<p>How can I do that?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["c++", "binary-search-tree"], "comments": [{"owner": {"reputation": 26552, "user_id": 448932, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QgLLl.png?s=128&g=1", "display_name": "500 - Internal Server Error", "link": "https://stackoverflow.com/users/448932/500-internal-server-error"}, "edited": false, "score": 2, "creation_date": 1570037778, "post_id": 58206515, "comment_id": 102791209, "body": "Make sure you initialize <i>all</i> member fields of a new node."}, {"owner": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "edited": false, "score": 1, "creation_date": 1570037847, "post_id": 58206515, "comment_id": 102791244, "body": "And don&#39;t store pointers to local variables in your tree."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1570037956, "post_id": 58206515, "comment_id": 102791290, "body": "I see no dynamic allocation of nodes in your code using <code>new</code> or similar construct.  I see (as the other comment stated) that you&#39;re creating local nodes and storing their addresses, which is wrong."}, {"owner": {"reputation": 9551, "user_id": 9837301, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9414V.png?s=128&g=1", "display_name": "JaMiT", "link": "https://stackoverflow.com/users/9837301/jamit"}, "edited": false, "score": 0, "creation_date": 1570070901, "post_id": 58206515, "comment_id": 102800560, "body": "The code you posted does not compile (several undeclared identifiers, among others). It also throws a warning that you should address regarding operator precedence."}, {"owner": {"reputation": 9551, "user_id": 9837301, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9414V.png?s=128&g=1", "display_name": "JaMiT", "link": "https://stackoverflow.com/users/9837301/jamit"}, "edited": false, "score": 1, "creation_date": 1570071124, "post_id": 58206515, "comment_id": 102800595, "body": "Regarding <i>&quot;since I have a Boolean that I check first that should never happen&quot;:</i> why do you have those Booleans? It would be simpler and more understandable to initialize the pointers to <code>nullptr</code> and test the pointers in the conditions (as in <code>if (one)</code>). I&#39;m inclined to agree with the recommendation about reading a good C++ book before you ingrain bad habits."}, {"owner": {"reputation": 466, "user_id": 10626396, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-70aEvJPxFH8/AAAAAAAAAAI/AAAAAAAAD8Q/Mk0TXYubTp8/photo.jpg?sz=128", "display_name": "Matt", "link": "https://stackoverflow.com/users/10626396/matt"}, "reply_to_user": {"reputation": 9551, "user_id": 9837301, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9414V.png?s=128&g=1", "display_name": "JaMiT", "link": "https://stackoverflow.com/users/9837301/jamit"}, "edited": false, "score": 0, "creation_date": 1570080227, "post_id": 58206515, "comment_id": 102802209, "body": "@JaMiT I read somewhere that there is no good way to check if a variable has been initialized so I used a quick and dirty fix that I knew would work so that I could test the rest of program. As for reading a  book about C++, I am doing that, but I&#39;m also impatient and want to start using concepts as soon as I learn about them. I have since switched to using <code>nullptr</code> though so thanks for the suggestion!"}], "answers": [{"tags": [], "owner": {"reputation": 466, "user_id": 10626396, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-70aEvJPxFH8/AAAAAAAAAAI/AAAAAAAAD8Q/Mk0TXYubTp8/photo.jpg?sz=128", "display_name": "Matt", "link": "https://stackoverflow.com/users/10626396/matt"}, "is_accepted": true, "score": 1, "last_activity_date": 1570080091, "creation_date": 1570080091, "answer_id": 58212751, "question_id": 58206515, "link": "https://stackoverflow.com/questions/58206515/c-binary-search-tree-creates-segmentation-fault/58212751#58212751", "title": "C++ binary search tree creates segmentation fault", "body": "<p>The error happened because I forgot to use the <code>new</code> keyword and was therefor populating my search tree with local variables (which were obviously now longer around by the time I started searching through the tree).</p>\n\n<p>Fixed by using:</p>\n\n<pre><code>node *newNode = new node();\n(*latest).one = newNode;\n(*latest).hasOne = true;\nlatest = newNode;\n</code></pre>\n\n<p>Instead of:</p>\n\n<pre><code>node newNode;\n(*latest).one = &amp;newNode;\n(*latest).hasOne = true;\nlatest = &amp;newNode;\n</code></pre>\n"}], "owner": {"reputation": 466, "user_id": 10626396, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-70aEvJPxFH8/AAAAAAAAAAI/AAAAAAAAD8Q/Mk0TXYubTp8/photo.jpg?sz=128", "display_name": "Matt", "link": "https://stackoverflow.com/users/10626396/matt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "accepted_answer_id": 58212751, "answer_count": 1, "score": 0, "last_activity_date": 1570080091, "creation_date": 1570037631, "last_edit_date": 1570079829, "question_id": 58206515, "link": "https://stackoverflow.com/questions/58206515/c-binary-search-tree-creates-segmentation-fault", "title": "C++ binary search tree creates segmentation fault", "body": "<p>I'm trying to make a program that identifies AVR assembly instructions by opcode, since those are just a list of 1's and 0's I thought it would be a good project to make a binary search tree for.</p>\n\n<p>Sadly I keep getting segmentation faults when trying to search through the tree. As I understand it a seg fault is usually the result of trying to do stuff with a pointer that doesn't point to anything, but since I have a Boolean that I check first that should never happen.</p>\n\n<p>I'm pretty sure it has something to do with the way I use pointers, as I'm not very experienced with those. But I can't seem to figure out what's going wrong.</p>\n\n<p>Below is the code involved (<code>SearchTree</code> is only a global variable in this minimal example, not in the real program.):</p>\n\n<p><b>The code:</b></p>\n\n<pre><code>#include &lt;iostream&gt;\n\nvoid ADD(short &amp;code) {std::cout &lt;&lt; code &lt;&lt; \"\\n\";}\nvoid LDI(short &amp;code) {std::cout &lt;&lt; code &lt;&lt; \"\\n\";}\nvoid SBRC(short &amp;code){std::cout &lt;&lt; code &lt;&lt; \"\\n\";}\n\nstruct node\n{\n    void(* instruct)(short &amp;code);\n    bool hasInst = false;\n\n    struct node *zero;\n    bool hasZero = false;\n\n    struct node *one;\n    bool hasOne = false;\n};\n\nnode SearchTree;\n\nauto parseOpcode(short code, node *currentRoot)\n{\n    std::cout &lt;&lt; \"Looking for a:  \" &lt;&lt; ((code &gt;&gt; 15) &amp; 0b01 == 1) &lt;&lt; std::endl;\n    std::cout &lt;&lt; \"Current node 1: \" &lt;&lt; (*currentRoot).hasOne &lt;&lt; std::endl;\n    std::cout &lt;&lt; \"Current node 0: \" &lt;&lt; (*currentRoot).hasZero &lt;&lt; std::endl;\n\n    // Return instruction if we've found it.\n    if ((*currentRoot).hasInst) return (*currentRoot).instruct;\n\n    // Case current bit == 1.\n    else if ((code &gt;&gt; 15) &amp; 0b01 == 1)\n    {\n        if ((*currentRoot).hasOne) return parseOpcode((code &lt;&lt; 1), (*currentRoot).one);\n        else throw \"this instruction does not exist\";\n    }\n    // Case current bit == 0.\n    else {\n        if ((*currentRoot).hasZero) return parseOpcode((code &lt;&lt; 1), (*currentRoot).zero);\n        else throw \"this instruction does not exist\";\n    }\n}\n\nvoid addopcode(void(&amp; instruct)(short &amp;code), int opcode, int codeLength)\n{\n    node *latest;\n    latest = &amp;SearchTree;\n    for (int i = 0; i &lt;= codeLength; i++)\n    {\n        // Add function pointer to struct if we hit the bottom.\n        if (i == codeLength)\n        {\n            if ((*latest).hasInst == false)\n            {\n                (*latest).instruct = &amp;instruct;\n                (*latest).hasInst = true;\n            }\n        }\n        // Case 1\n        else if (opcode &gt;&gt; (codeLength - 1 - i) &amp; 0b01)\n        {\n            if ((*latest).hasOne)\n            {\n                latest = (*latest).one;\n            }\n            else{\n                node newNode;\n                (*latest).one = &amp;newNode;\n                (*latest).hasOne = true;\n                latest = &amp;newNode;\n            }\n        }\n        // Case 0\n        else {\n            if ((*latest).hasZero)\n            {\n                latest = (*latest).zero;\n            }\n            else{\n                node newNode;\n                (*latest).zero = &amp;newNode;\n                (*latest).hasZero = true;\n                latest = &amp;newNode;\n            }\n        }\n    }\n}\n\n\nint main()\n{\n    addopcode(ADD, 0b000011, 6);\n    addopcode(LDI, 0b1110, 4);\n    addopcode(SBRC, 0b1111110, 7);\n\n    short firstOpcode = 0b1110000000010011;\n\n    void(* instruction)(short &amp;code) = parseOpcode(firstOpcode, &amp;SearchTree);\n    instruction(firstOpcode);\n    return 0;\n}\n</code></pre>\n\n<p>EDIT: I still had some #includes at the top of my file that linked to code I didn't put on StackOverflow.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 3, "creation_date": 1570036999, "post_id": 58206356, "comment_id": 102790847, "body": "This is a big chunk of completely uncommented code with not even a hint as to what all those numbers mean or what it&#39;s supposed to do. The impenetrably vague variable names don&#39;t help either."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1570037104, "post_id": 58206356, "comment_id": 102790898, "body": "Time to learn how to use a debugger to step through your code statement by statement, while monitoring variables and their values. I also recommend you stop going to online competition/judge sites to learn basic programming, because they won&#39;t teach you that or how to write good code. Take a class or a course, or <a href=\"https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list/388282#388282\">read some good books</a>."}, {"owner": {"reputation": 129, "user_id": 11405096, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d4390dc416938c3c81102f380a93187?s=128&d=identicon&r=PG&f=1", "display_name": "akacodes121", "link": "https://stackoverflow.com/users/11405096/akacodes121"}, "edited": false, "score": 0, "creation_date": 1570037271, "post_id": 58206356, "comment_id": 102790972, "body": "I used debugger randomly garbage value was getting stored in n,I don&#39;t know why it is happening ?"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1570038231, "post_id": 58206356, "comment_id": 102791401, "body": "@akacodes121 -- Stop writing this &quot;online judge&quot; style of sticking everything in <code>main</code>.  You should put the solution, whatever variables it needs in a <i>separate function</i>, and not stick everything in <code>main</code>.  The lack of comments also is bad.  And last -- if you know the test data that fails, do not post code with <code>cin</code> statements and similar input statements.  Just set the variables to the test data directly.  No one is going to sit at their computer retyping in test data every time they want to run the program."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1570038451, "post_id": 58206356, "comment_id": 102791485, "body": "Set a breakpoint here: <code>cin &gt;&gt; n &gt;&gt; s;</code> and look at the value of <code>n</code> if you say it takes on random garbage values. That seems like the only place <code>n</code> is set."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1570038645, "post_id": 58206356, "comment_id": 102791578, "body": "This looks like a case of placing everything in <code>main</code> and polluting one test case&#39;s information with the next.  That&#39;s why the suggestion of writing a function should be heeded.  No one writes tests like this -- tests are meant to be placed in functions so that all variables, effects, etc. are isolated between tests."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1570039439, "post_id": 58206356, "comment_id": 102791955, "body": "@akacodes121 -- <a href=\"https://coliru.stacked-crooked.com/a/1c2254674240709b\" rel=\"nofollow noreferrer\">This is what you should have written</a>.  Note the function is used.  Second, the results of the isolated test shows the first input you said didn&#39;t work.  Last, a trick that you may not be familiar with, but putting the test in a <code>std::string</code> and using <code>std::istringstream</code> can be substituted for having to type in the test data."}], "owner": {"reputation": 129, "user_id": 11405096, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d4390dc416938c3c81102f380a93187?s=128&d=identicon&r=PG&f=1", "display_name": "akacodes121", "link": "https://stackoverflow.com/users/11405096/akacodes121"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 64, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1570036918, "creation_date": 1570036918, "question_id": 58206356, "link": "https://stackoverflow.com/questions/58206356/weird-input-output-in-cpp", "title": "Weird Input output in cpp", "body": "<p>I was solving subarray with given sum,Where we have to print the starting and ending index of array if subarray with sum is found , when I tried with two test cases simultaneously i got wrong result\nBut when I was tried one at a time I got right answer in both.\nYou please also check in your IDE this is happening in every IDE.</p>\n\n<p>Testcase (Simultaneously)</p>\n\n<p>2</p>\n\n<p>5 12</p>\n\n<p>1 2 3 7 5</p>\n\n<p>10 15</p>\n\n<p>1 2 3 4 5 6 7 8 9 10</p>\n\n<p>Output </p>\n\n<p>2 4 (expected 2 4)</p>\n\n<p>2 5 (But expected 1 5)</p>\n\n<p>But when I tried like this for second test cases </p>\n\n<p>1</p>\n\n<p>10 15</p>\n\n<p>1 2 3 4 5 6 7 8 9 10</p>\n\n<p>Output : 1 5(As expected)</p>\n\n<p>I got correct answer ,why my program this kind of weird behaviour ?</p>\n\n<pre><code>#include&lt;iostream&gt;\n#include&lt;vector&gt;\n#include&lt;queue&gt;\n#include&lt;unordered_map&gt;\nusing namespace std;\nvector&lt;int&gt;a;\nunordered_map&lt;int, int&gt;seen;\nint main()\n{\n    int t;\n    cin &gt;&gt; t;\n    while (t--) {\n        int n, s;\n        cin &gt;&gt; n &gt;&gt; s;\n        a.resize(n);\n        int sum = 0;\n        seen[0] = -1;\n        for (int i = 0; i &lt; n; i++) {\n            cin &gt;&gt; a[i];\n            sum += a[i];\n            if (seen.find(sum - s) != seen.end()) {\n                int x;\n                x = seen[sum - s] + 2;\n                cout &lt;&lt; x &lt;&lt; \" \" &lt;&lt; i + 1 &lt;&lt; endl;\n                break;\n            }\n            else {\n                seen[sum] = i;\n            }\n        }\n\n\n        seen.clear();\n        a.clear();\n        //cout&lt;&lt;endl;\n    }\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "variables"], "comments": [{"owner": {"reputation": 269338, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1570036954, "post_id": 58206324, "comment_id": 102790825, "body": "You really need to put <b>all</b> the relevant information into the question.  Links are not enough."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 3, "creation_date": 1570036983, "post_id": 58206324, "comment_id": 102790836, "body": "Handy reading: <a href=\"https://meta.stackoverflow.com/questions/285551/why-not-upload-images-of-code-on-so-when-asking-a-question\">Why not upload images of code on SO when asking a question?</a>"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1570037052, "post_id": 58206324, "comment_id": 102790869, "body": "\ud83d\udeab\ud83d\udcf8 Please post code, errors, sample data or textual output here as plain-text, not as images that can be hard to read, can\u2019t be copy-pasted to help test code or use in answers, and are barrier to those who depend on screen readers. You can edit your question to add the code in the body of your question. For easy formatting use the <code>{}</code> button to mark blocks of code, or indent with four spaces for the same effect. The contents of a <b>screenshot can\u2019t be searched, run as code, or copied and edited to create a solution.</b>"}, {"owner": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 0, "creation_date": 1570037903, "post_id": 58206324, "comment_id": 102791274, "body": "The value given for &quot;true pi&quot; is off."}], "answers": [{"tags": [], "owner": {"reputation": 435647, "user_id": 367273, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/f1ed2b0c87f602ef30229f5c4b04eff6?s=128&d=identicon&r=PG", "display_name": "NPE", "link": "https://stackoverflow.com/users/367273/npe"}, "is_accepted": true, "score": 3, "last_activity_date": 1570037030, "creation_date": 1570037030, "answer_id": 58206381, "question_id": 58206324, "link": "https://stackoverflow.com/questions/58206324/why-does-the-variable-t-not-calculate-properly/58206381#58206381", "title": "Why does the variable t not calculate properly?", "body": "<p>The problem is here:</p>\n\n<pre><code>t *= ((n-1)/((2*n)-1))\n</code></pre>\n\n<p><code>n</code> is integer.  When you perform arithmetic operations on an integer, the result is also an integer (i.e. gets truncated).</p>\n\n<p>To make the division into a float-point one, you need to convert one of the operands to a floating-point type, for example like so:</p>\n\n<pre><code>t *= ((n-1)/(float)((2*n)-1))\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 8116485, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b2a60aceb2795c254f2d8aa2183882d?s=128&d=identicon&r=PG&f=1", "display_name": "Hack Delta", "link": "https://stackoverflow.com/users/8116485/hack-delta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "closed_date": 1570037387, "accepted_answer_id": 58206381, "answer_count": 1, "score": -4, "last_activity_date": 1570037103, "creation_date": 1570036817, "last_edit_date": 1570037103, "question_id": 58206324, "link": "https://stackoverflow.com/questions/58206324/why-does-the-variable-t-not-calculate-properly", "closed_reason": "Duplicate", "title": "Why does the variable t not calculate properly?", "body": "<p>The variable t keeps going to zero.</p>\n\n<p><a href=\"https://i.stack.imgur.com/f7lsI.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/f7lsI.png\" alt=\"Algorithm\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/ElnzU.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ElnzU.png\" alt=\"My Work\"></a></p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 7540, "user_id": 4474230, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/713c7ce18010e541853962264a719d83?s=128&d=identicon&r=PG&f=1", "display_name": "Jeffrey", "link": "https://stackoverflow.com/users/4474230/jeffrey"}, "edited": false, "score": 0, "creation_date": 1570037268, "post_id": 58206303, "comment_id": 102790970, "body": "put the full error, and message, it will be clearer: <code>message :  &#39;X &amp;X::operator =(const X &amp;)&#39;: function was implicitly deleted because &#39;X&#39; has a user-defined move constructor</code>"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1570046449, "post_id": 58206303, "comment_id": 102795077, "body": "Unrelated: your move constructor should look like this instead: <code>X(X&amp;&amp; obj) { this-&gt;p = obj.p; obj.p = nullptr; }</code> And you need a destructor to <code>delete p;</code>. Also, since your class has a pointer member, the class needs explict copy/move assignment operators that copy/move the <i>value</i> the pointer is pointing at rather than copy/move the pointer <i>itself</i>, per the <a href=\"https://en.cppreference.com/w/cpp/language/rule_of_three\" rel=\"nofollow noreferrer\">rule of 3/5/0</a>. The default generated assignment operators will not suffice in this example."}], "answers": [{"comments": [{"owner": {"reputation": 251, "user_id": 7063478, "user_type": "registered", "profile_image": "https://graph.facebook.com/1454136917948906/picture?type=large", "display_name": "nowaqq", "link": "https://stackoverflow.com/users/7063478/nowaqq"}, "edited": false, "score": 0, "creation_date": 1570039184, "post_id": 58206506, "comment_id": 102791822, "body": "To complement the answer, this conference talk slides <a href=\"https://accu.org/content/conf2014/Howard_Hinnant_Accu_2014.pdf\" rel=\"nofollow noreferrer\">accu.org/content/conf2014/Howard_Hinnant_Accu_2014.pdf</a> fully cover what is default generated or deleted."}], "tags": [], "owner": {"reputation": 7540, "user_id": 4474230, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/713c7ce18010e541853962264a719d83?s=128&d=identicon&r=PG&f=1", "display_name": "Jeffrey", "link": "https://stackoverflow.com/users/4474230/jeffrey"}, "is_accepted": false, "score": 2, "last_activity_date": 1570037594, "creation_date": 1570037594, "answer_id": 58206506, "question_id": 58206303, "link": "https://stackoverflow.com/questions/58206303/why-defining-move-constructor-deletes-move-assignment-operator/58206506#58206506", "title": "Why defining move constructor deletes move assignment operator", "body": "<pre><code>f5() = X(33);\n</code></pre>\n\n<p>would be calling the assignment operator, because an X object already exists there. It's an assignment, not a construction. Before you had a move constructor, it was calling an auto-generated assignment operator.</p>\n\n<p>Now, the compiler is unwilling (well, forbidden) to generate a default assignment operator because you implement a move constructor. The logic goes, you probably know better about your type, so it will let you implement </p>\n\n<pre><code>X &amp;X::operator =(const X &amp;)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 7540, "user_id": 4474230, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/713c7ce18010e541853962264a719d83?s=128&d=identicon&r=PG&f=1", "display_name": "Jeffrey", "link": "https://stackoverflow.com/users/4474230/jeffrey"}, "edited": false, "score": 0, "creation_date": 1570040055, "post_id": 58206732, "comment_id": 102792209, "body": "suggest edit, adding at the end &quot;<code>delete this-&gt;p;</code> should be done before <code>this-&gt;p = new int(*(obj.p));</code>&quot;"}, {"owner": {"reputation": 7540, "user_id": 4474230, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/713c7ce18010e541853962264a719d83?s=128&d=identicon&r=PG&f=1", "display_name": "Jeffrey", "link": "https://stackoverflow.com/users/4474230/jeffrey"}, "edited": false, "score": 0, "creation_date": 1570041261, "post_id": 58206732, "comment_id": 102792771, "body": "haha. right. indeed, you are correct. I stopped thinking after noticing the silly order. We could still edit in a correct alternative."}], "tags": [], "owner": {"reputation": 4579, "user_id": 459565, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/cc92778353971733be88d04c26603ec7?s=128&d=identicon&r=PG", "display_name": "Eugene", "link": "https://stackoverflow.com/users/459565/eugene"}, "is_accepted": false, "score": 3, "last_activity_date": 1570046388, "last_edit_date": 1570046388, "creation_date": 1570038505, "answer_id": 58206732, "question_id": 58206303, "link": "https://stackoverflow.com/questions/58206303/why-defining-move-constructor-deletes-move-assignment-operator/58206732#58206732", "title": "Why defining move constructor deletes move assignment operator", "body": "<p>The error message (<code>'X &amp;X::operator =(const X &amp;)': function was implicitly deleted because 'X' has a user-defined move constructor</code>) clearly answers \"yes\" to your question. But you apparently want to know the motivation for this rule in C++. </p>\n\n<p>The rule was introduced in C++11 (together with move semantics) to enforce the \"Rule of 3/5\", which says that all of the following must be used together or not at all:</p>\n\n<ul>\n<li>copy constructor</li>\n<li>copy assignment operator</li>\n<li>move constructor</li>\n<li>move assignment operator</li>\n<li>destructor</li>\n</ul>\n\n<p>(in some situations, it is ok to omit move or copy aiir of constructor/assignment).</p>\n\n<p>Similarly, it would make sense to delete the copy assignment operator when a copy constructor is defined, but it could not be done in 2011 to preserve backward compatibility.</p>\n\n<p>Your code is a good illustration of why the Rule of 3/5 is needed. As is, your class leaks memory. If you add a destructor with <code>delete p</code>, but don't define a move assignment operator, then with your example you get a double deletion (undefined behavior, likely crash).</p>\n\n<p>Finally, note that your move constructor is wrong.</p>\n"}], "owner": {"reputation": 11, "user_id": 12155090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6325996ba970e843dbaa444917c7212d?s=128&d=identicon&r=PG&f=1", "display_name": "CErjk", "link": "https://stackoverflow.com/users/12155090/cerjk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 97, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1570047561, "creation_date": 1570036732, "last_edit_date": 1570047561, "question_id": 58206303, "link": "https://stackoverflow.com/questions/58206303/why-defining-move-constructor-deletes-move-assignment-operator", "title": "Why defining move constructor deletes move assignment operator", "body": "<p>When i write <code>\"f5() = X(33);\"</code>(when move constructor in comment line) the compiler does not throw errors.\nBut when I add a Move Constructor compiler says:</p>\n\n<pre><code>\" 'X &amp;X::operator =(const X &amp;)': attempting to reference a deleted function \"\n</code></pre>\n\n<p>is move constructor delete assignment operator ??</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nclass X {\n    int* p;\npublic:\n    X(int ii = 0) { p = new int(ii); };\n    X(const X&amp; obj) { this-&gt;p = new int(*(obj.p)); };\n//  X(X&amp;&amp; obj) { this-&gt;p = new int(*(obj.p)); delete obj.p; obj.p=nullptr;\n};\n\n\n\nX f5() {\n    return X(5);\n}\n\nint main() {\n\n    f5() = X(33);\n    system(\"pause\");\n}\n</code></pre>\n"}, {"tags": ["c++", "random", "sparse-matrix"], "comments": [{"owner": {"reputation": 8409, "user_id": 2001017, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/H0Z0x.jpg?s=128&g=1", "display_name": "Picaud Vincent", "link": "https://stackoverflow.com/users/2001017/picaud-vincent"}, "edited": false, "score": 1, "creation_date": 1570036528, "post_id": 58206187, "comment_id": 102790644, "body": "uniform int distribution? <a href=\"https://en.cppreference.com/w/cpp/numeric/random/uniform_int_distribution\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/numeric/random/&hellip;</a>"}, {"owner": {"reputation": 716, "user_id": 9956515, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e9b6291c53932e74aa99f31162ea617?s=128&d=identicon&r=PG&f=1", "display_name": "Pierre-Nicolas Piquin", "link": "https://stackoverflow.com/users/9956515/pierre-nicolas-piquin"}, "edited": false, "score": 0, "creation_date": 1570036593, "post_id": 58206187, "comment_id": 102790679, "body": "Do you need to use the binomial distribution ? Or any random generator could do the trick ?"}, {"owner": {"reputation": 183, "user_id": 3083483, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/ce8264bee2a26a893958a5dbd219e2bc?s=128&d=identicon&r=PG&f=1", "display_name": "Omar", "link": "https://stackoverflow.com/users/3083483/omar"}, "edited": false, "score": 0, "creation_date": 1570037382, "post_id": 58206187, "comment_id": 102791027, "body": "I need it to be binomial_distribution"}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 0, "creation_date": 1570043018, "post_id": 58206187, "comment_id": 102793592, "body": "Why <code>gen.seed(time(NULL));</code> when you have already seeded your generator with <code>random_device</code>? You undo the previous seeding like that and replace it with a much worse seed."}, {"owner": {"reputation": 183, "user_id": 3083483, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/ce8264bee2a26a893958a5dbd219e2bc?s=128&d=identicon&r=PG&f=1", "display_name": "Omar", "link": "https://stackoverflow.com/users/3083483/omar"}, "reply_to_user": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 0, "creation_date": 1570048971, "post_id": 58206187, "comment_id": 102796000, "body": "@TedLyngmo I was trying something .. it is not effecting the code logic thou .. it can be omitted in this case"}], "answers": [{"comments": [{"owner": {"reputation": 183, "user_id": 3083483, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/ce8264bee2a26a893958a5dbd219e2bc?s=128&d=identicon&r=PG&f=1", "display_name": "Omar", "link": "https://stackoverflow.com/users/3083483/omar"}, "edited": false, "score": 0, "creation_date": 1570037513, "post_id": 58206299, "comment_id": 102791088, "body": "That works, however the sparsity of the matrix is lost"}, {"owner": {"reputation": 716, "user_id": 9956515, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e9b6291c53932e74aa99f31162ea617?s=128&d=identicon&r=PG&f=1", "display_name": "Pierre-Nicolas Piquin", "link": "https://stackoverflow.com/users/9956515/pierre-nicolas-piquin"}, "reply_to_user": {"reputation": 183, "user_id": 3083483, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/ce8264bee2a26a893958a5dbd219e2bc?s=128&d=identicon&r=PG&f=1", "display_name": "Omar", "link": "https://stackoverflow.com/users/3083483/omar"}, "edited": false, "score": 0, "creation_date": 1570038161, "post_id": 58206299, "comment_id": 102791381, "body": "Does the sparsity of the matrix depends on something ?"}, {"owner": {"reputation": 183, "user_id": 3083483, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/ce8264bee2a26a893958a5dbd219e2bc?s=128&d=identicon&r=PG&f=1", "display_name": "Omar", "link": "https://stackoverflow.com/users/3083483/omar"}, "edited": false, "score": 0, "creation_date": 1570048290, "post_id": 58206299, "comment_id": 102795767, "body": "I tested the code (my original code) many time with many different values for the two parameters of the   binomial_distribution .. my conclusion is that using 1 only  limits the output range into 1s and 0s only .. however choosing a different range say (10 - 5) will force the generator to generate all the possibilities of numbers between 10 and 5 (i.e. 4, 3, 2, 1, 5) .. so the  possibility that a 0 will appear (a.k.a making it sparse) will decrease than in the first case"}, {"owner": {"reputation": 716, "user_id": 9956515, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e9b6291c53932e74aa99f31162ea617?s=128&d=identicon&r=PG&f=1", "display_name": "Pierre-Nicolas Piquin", "link": "https://stackoverflow.com/users/9956515/pierre-nicolas-piquin"}, "reply_to_user": {"reputation": 183, "user_id": 3083483, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/ce8264bee2a26a893958a5dbd219e2bc?s=128&d=identicon&r=PG&f=1", "display_name": "Omar", "link": "https://stackoverflow.com/users/3083483/omar"}, "edited": false, "score": 1, "creation_date": 1570053063, "post_id": 58206299, "comment_id": 102797226, "body": "Yes, one solution is to use another distribution to control the sparsity of the matrix. That way, you can decide the traction of non null elements you want. And, for these elements, you can generate random numbers as you wish."}, {"owner": {"reputation": 183, "user_id": 3083483, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/ce8264bee2a26a893958a5dbd219e2bc?s=128&d=identicon&r=PG&f=1", "display_name": "Omar", "link": "https://stackoverflow.com/users/3083483/omar"}, "edited": false, "score": 0, "creation_date": 1570088562, "post_id": 58206299, "comment_id": 102805365, "body": "now I understand your edit .. Thanks for the answer"}], "tags": [], "owner": {"reputation": 716, "user_id": 9956515, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e9b6291c53932e74aa99f31162ea617?s=128&d=identicon&r=PG&f=1", "display_name": "Pierre-Nicolas Piquin", "link": "https://stackoverflow.com/users/9956515/pierre-nicolas-piquin"}, "is_accepted": true, "score": 1, "last_activity_date": 1570038446, "last_edit_date": 1570038446, "creation_date": 1570036700, "answer_id": 58206299, "question_id": 58206187, "link": "https://stackoverflow.com/questions/58206187/generate-random-numbers-between-range-using-stdbinomial-distribution/58206299#58206299", "title": "Generate random numbers between range using std::binomial_distribution", "body": "<p>For numbers in [a, b], with a &lt; b, the idea is to generate a random number with <code>std::binomial_distribution</code> between 0 and <code>b-a</code>, and to add <code>a</code> to the generated result to respect the input range [a, b]:</p>\n\n<pre><code>size_t spare_matrix_generator(int *M, size_t rows, size_t cols)\n{\n    std::random_device rd;\n    std::mt19937 gen(rd());\n    gen.seed(time(NULL));\n    int b = 12, a = 3;\n\n    std::binomial_distribution&lt;int&gt; distribution(b-a, 0.5);\n\n    // To handle matrix sparsity\n    float zero_prob = 0.8;\n    std::mt19937 sparse_gen(rd() + 42);\n    std::uniform_real_distribution&lt;double&gt; sparse_dist(0.0,1.0);\n\n    size_t NNZ = 0;\n\n    for (szie_t i = 0; i &lt; rows*cols; i++)\n    {\n        if(sparse_dist(sparse_gen) &gt; zero_prob){\n            M[i] = a + distribution(gen);\n        } else {\n            M[i] = 0;\n        }\n\n        std::cout &lt;&lt; M[i] &lt;&lt; \" \";\n        if (M[i] != 0)\n            NNZ++;\n    }\n    std::cout &lt;&lt; std::endl;\n\n    return NNZ;\n}\n</code></pre>\n"}], "owner": {"reputation": 183, "user_id": 3083483, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/ce8264bee2a26a893958a5dbd219e2bc?s=128&d=identicon&r=PG&f=1", "display_name": "Omar", "link": "https://stackoverflow.com/users/3083483/omar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "accepted_answer_id": 58206299, "answer_count": 1, "score": 0, "last_activity_date": 1571053783, "creation_date": 1570036241, "last_edit_date": 1571053783, "question_id": 58206187, "link": "https://stackoverflow.com/questions/58206187/generate-random-numbers-between-range-using-stdbinomial-distribution", "title": "Generate random numbers between range using std::binomial_distribution", "body": "<p>I created a function to generate sparse matrix, however the random generator only generates only values of <strong>1s</strong> and I need to make it generate numbers in a specific range. </p>\n\n<pre><code>size_t spare_matrix_generator(int *M, size_t rows, size_t cols)\n{\n    std::random_device rd;\n    std::mt19937 gen(rd());\n    gen.seed(time(NULL));\n\n    std::binomial_distribution&lt;int&gt; distribution(1, 0.5);\n\n    size_t NNZ = 0;\n\n    for (szie_t i = 0; i &lt; rows*cols; i++)\n    {\n        M[i] = distribution(gen);\n        std::cout &lt;&lt; M[i] &lt;&lt; \" \";\n        if (A[i] != 0)\n            NNZ++;\n    }\n    std::cout &lt;&lt; std::endl;\n\n    return NNZ;\n}\n</code></pre>\n\n<p>A sample output of the above function would be as following, assuming <strong>5x5</strong> Matrix: </p>\n\n<pre><code>0 1 1 0 0 \n1 0 0 0 1\n0 0 0 1 0\n1 0 0 0 1\n0 0 0 0 1\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 1097, "user_id": 9703830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d48ed2a2cf0e75c7355e044c71385202?s=128&d=identicon&r=PG&f=1", "display_name": "dedObed", "link": "https://stackoverflow.com/users/9703830/dedobed"}, "edited": false, "score": 0, "creation_date": 1570035727, "post_id": 58206034, "comment_id": 102790277, "body": "See e.g. <a href=\"https://stackoverflow.com/questions/408670/stack-static-and-heap-in-c\" title=\"stack static and heap in c\">stackoverflow.com/questions/408670/stack-static-and-heap-in-&zwnj;&#8203;c</a>"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 2, "creation_date": 1570035854, "post_id": 58206034, "comment_id": 102790345, "body": "Array is basic topic of the language, SO is not a replacement of a textbook."}], "answers": [{"comments": [{"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 1, "creation_date": 1570036228, "post_id": 58206136, "comment_id": 102790517, "body": "Using all uppercase identifiers for constants became really bad habit."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1570036337, "post_id": 58206136, "comment_id": 102790568, "body": "@Slava, guilty as charged."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 1, "creation_date": 1570036617, "post_id": 58206136, "comment_id": 102790696, "body": "It actually bit me once, enum from somebody else code and macro from third party C library, catching it was not pleaseant though it produced compilation error. If it would not - God help he catching the bug."}, {"owner": {"reputation": 33, "user_id": 6780343, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h0kwn.jpg?s=128&g=1", "display_name": "Jambako", "link": "https://stackoverflow.com/users/6780343/jambako"}, "edited": false, "score": 0, "creation_date": 1570036755, "post_id": 58206136, "comment_id": 102790750, "body": "Thank you, these really help me."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1570036768, "post_id": 58206136, "comment_id": 102790757, "body": "@Slava, I once ran into the <code>class Object</code> from two third party libraries whose headers needed to be <code>#include</code>d in one .cpp file. Fun, fun."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 33, "user_id": 6780343, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h0kwn.jpg?s=128&g=1", "display_name": "Jambako", "link": "https://stackoverflow.com/users/6780343/jambako"}, "edited": false, "score": 0, "creation_date": 1570036841, "post_id": 58206136, "comment_id": 102790785, "body": "@Jambako, glad I was able to help."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 1, "creation_date": 1570036928, "post_id": 58206136, "comment_id": 102790815, "body": "Name collision at least does not compile, with those pesky identifiers it is really good chance it would. That would be a disaster."}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": true, "score": 4, "last_activity_date": 1570035999, "creation_date": 1570035999, "answer_id": 58206136, "question_id": 58206034, "link": "https://stackoverflow.com/questions/58206034/c-whats-the-difference-between-char-a20-0-and-char-a-new-char20/58206136#58206136", "title": "C++ What&#39;s the difference between char a[20] = {0} and char *a= new char[20]()", "body": "<p>When you use</p>\n\n<pre><code>char *hostbuffer = new char[1024]();\n</code></pre>\n\n<p><code>sizeof(hostbuffer)</code> evaluates to the size of a pointer, not the size of the array.</p>\n\n<p>When you use</p>\n\n<pre><code>char hostbuffer[1024]={0};\n</code></pre>\n\n<p><code>sizeof(hostbuffer)</code> evaluates to the size of the array.</p>\n\n<p>The call</p>\n\n<pre><code>gethostname(hostbuffer,sizeof(hostbuffer));\n</code></pre>\n\n<p>will work differently based on the declaration you use.</p>\n\n<p>That's the most significant difference in your code.</p>\n\n<p>If you use</p>\n\n<pre><code>const int BUFFER_SIZE = 1024;\nchar *hostbuffer = new char[BUFFER_SIZE]();\n\n...\n\ngethostname(hostbuffer, BUFFER_SIZE);\n</code></pre>\n\n<p>you should not see any difference in behavior.</p>\n"}], "owner": {"reputation": 33, "user_id": 6780343, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h0kwn.jpg?s=128&g=1", "display_name": "Jambako", "link": "https://stackoverflow.com/users/6780343/jambako"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 212, "favorite_count": 0, "accepted_answer_id": 58206136, "answer_count": 1, "score": -2, "last_activity_date": 1570036721, "creation_date": 1570035488, "last_edit_date": 1570036721, "question_id": 58206034, "link": "https://stackoverflow.com/questions/58206034/c-whats-the-difference-between-char-a20-0-and-char-a-new-char20", "title": "C++ What&#39;s the difference between char a[20] = {0} and char *a= new char[20]()", "body": "<p>I write a function to return IP address in C++, as I am new to C++ so I want to make my code proficient. I knew to create a new variable needs <code>new</code>, and we need to <code>delete</code> it. </p>\n\n<p>I do not know why <code>char *hostbuffer = new char[1024]();</code> is not as same as <code>char hostbuffer[1024]={0}</code>, both of them are creating a size 1024 int array, right?</p>\n\n<pre><code>std::string ipfunction_Client(){\n\n    char *hostbuffer = new char[1024]();---This cannot work\n    //char hostbuffer[1024]={0};---This can work\n    char *IPbuffer=new char[1024];\n    struct hostent *host_entry;\n\n    gethostname(hostbuffer,sizeof(hostbuffer));\n\n    host_entry=gethostbyname(hostbuffer);\n\n    IPbuffer = inet_ntoa(*((struct in_addr*)host_entry-&gt;h_addr_list[0]));-----This is client.cpp 230\n    //delete(hostbuffer);\n    return std::string(IPbuffer);\n}\n</code></pre>\n\n<p>If I use the above code, the valgrind's feed back is this:</p>\n\n<pre><code>Process terminating with default action of signal 11 (SIGSEGV): dumping core\n==19697==  Access not within mapped region at address 0x18\n==19697==    at 0x406624: ipfunction_Client() (client.cpp:230)\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 3, "creation_date": 1570035274, "post_id": 58205979, "comment_id": 102790062, "body": "There is no way to do that. Why don&#39;t you use an array to begin with?"}, {"owner": {"reputation": 12749, "user_id": 7976805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92a559df8b4b287aad23724b4c66d67c?s=128&d=identicon&r=PG&f=1", "display_name": "Yksisarvinen", "link": "https://stackoverflow.com/users/7976805/yksisarvinen"}, "edited": false, "score": 3, "creation_date": 1570035276, "post_id": 58205979, "comment_id": 102790064, "body": "Why do you have <code>var1</code>, <code>var2</code>, ..., <code>var100</code> instead of an array?"}, {"owner": {"reputation": 600, "user_id": 5229664, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-k-aFJOqggn8/AAAAAAAAAAI/AAAAAAAAAGE/RZ0-la_nyfI/photo.jpg?sz=128", "display_name": "Farbod Ahmadian", "link": "https://stackoverflow.com/users/5229664/farbod-ahmadian"}, "reply_to_user": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1570035416, "post_id": 58205979, "comment_id": 102790134, "body": "@HolyBlackCat That&#39;s just a question for me. I wanted to know that is it possible, how? because you know there is no impossible in computer world :D"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1570035449, "post_id": 58205979, "comment_id": 102790158, "body": "Generalizing the above a bit, any time you have sequentially numbered variables you almost certainly want an array or array-like container. If the numbers are not sequential, consider a <code>std::unordered_map</code> or a mapping function."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1570035496, "post_id": 58205979, "comment_id": 102790185, "body": "@FarbodAhmadian It is possible. First you copy the numbered variables into an array, then you process the array."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1570036659, "post_id": 58205979, "comment_id": 102790711, "body": "If you have guarantees on exactly how the variables are laid out in memory, you may be able to exploit undefined behaviour. If the variables are contiguous in memory and still sequential you can take a pointer to the first variable and increment the pointer to get the next one. This used to be a pretty safe assumption, but computers play really neat games with memory these days."}, {"owner": {"reputation": 19779, "user_id": 878532, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/5fbebb625a289267abd098c0e676c760?s=128&d=identicon&r=PG", "display_name": "Klaus", "link": "https://stackoverflow.com/users/878532/klaus"}, "edited": false, "score": 1, "creation_date": 1570038013, "post_id": 58205979, "comment_id": 102791318, "body": "c++ is not an interpreted language. So there is no way to use run time variables to build variable names later and access the content of them. Such code can be written in some scripting languages but not in c++ nor c."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1570038838, "post_id": 58205979, "comment_id": 102791670, "body": "<code>for (const auto&amp; var : {var1, var2 , ..., var100}) { cout &lt;&lt; func(var);}</code>?"}, {"owner": {"reputation": 600, "user_id": 5229664, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-k-aFJOqggn8/AAAAAAAAAAI/AAAAAAAAAGE/RZ0-la_nyfI/photo.jpg?sz=128", "display_name": "Farbod Ahmadian", "link": "https://stackoverflow.com/users/5229664/farbod-ahmadian"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1570040757, "post_id": 58205979, "comment_id": 102792538, "body": "@Jarod42 Again I have to write all of the 100 variables by hand!"}, {"owner": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "edited": false, "score": 0, "creation_date": 1570042462, "post_id": 58205979, "comment_id": 102793323, "body": "You can write the variables using code generator, such as a simple script."}], "answers": [{"tags": [], "owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "is_accepted": false, "score": 2, "last_activity_date": 1570046776, "last_edit_date": 1570046776, "creation_date": 1570042032, "answer_id": 58207596, "question_id": 58205979, "link": "https://stackoverflow.com/questions/58205979/run-a-function-with-almost-similar-variables-c/58207596#58207596", "title": "Run a function with almost similar variables c++", "body": "<p>There is no<sup>1</sup> way to do it. Use an array instead.</p>\n\n<hr>\n\n<p><sub>1</sub></p>\n\n<blockquote>\n  <p>you know there is no impossible in computer world :D<br>\n  \u2014 OP</p>\n</blockquote>\n\n<p>If you really want to shoot yourself in the foot, there <em>is</em> a way: Boost.Preprocessor.</p>\n\n<pre><code>#include &lt;boost/preprocessor/repetition/repeat.hpp&gt;\n\n// ...\n\nint main()\n{\n    #define FOO(unused0, index, unused1) cout &lt;&lt; func(var##index);\n    BOOST_PP_REPEAT(101, FOO,)\n    #undef FOO\n}\n</code></pre>\n\n<p><sup>(Note that this snippet interacts with <code>var0</code>, ... <code>var100</code>, not <code>var1</code>, ... <code>var100</code> you asked for. Changing the first index is left as an exercise to the reader. Hint: it can't be done with <code>BOOST_PP_REPEAT</code>, you need a different macro.)</sup></p>\n\n<p>There are some caveats:</p>\n\n<ul>\n<li>The amount of variables has to be known at compile-time, and it has to be a preprocessor constant (i.e. <code>101</code> verbatim does work, but <code>const int n = 101;</code> or even <code>100+1</code> do not).</li>\n<li>There is a hard limit on the amount of 'iterations'. (<code>256</code> by default, probably can be increased).</li>\n<li>This might increase your build times.</li>\n</ul>\n"}], "owner": {"reputation": 600, "user_id": 5229664, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-k-aFJOqggn8/AAAAAAAAAAI/AAAAAAAAAGE/RZ0-la_nyfI/photo.jpg?sz=128", "display_name": "Farbod Ahmadian", "link": "https://stackoverflow.com/users/5229664/farbod-ahmadian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 98, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1570046776, "creation_date": 1570035209, "question_id": 58205979, "link": "https://stackoverflow.com/questions/58205979/run-a-function-with-almost-similar-variables-c", "title": "Run a function with almost similar variables c++", "body": "<p>Assume we have some variables named <em>var1</em>, <em>var2</em> , ..., <em>var100</em>.</p>\n\n<p>How can I call a function named <em>func()</em> with that variables with a for loop. I mean how should I \nchange this code that it works?</p>\n\n<pre><code>for (int counter{1}; counter &lt;= 100; ++counter) {\n\n     cout &lt;&lt; func(var+counter);\n}\n</code></pre>\n"}, {"tags": ["c++", "serialization", "deserialization", "message", "preprocessor"], "comments": [{"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1570035589, "post_id": 58205949, "comment_id": 102790209, "body": "I would better write code generator on something like python or lua rather than deal with preprocessor. Your task should be doable with templates though."}], "answers": [{"tags": [], "owner": {"reputation": 21, "user_id": 10330854, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbf368aaae0742df68263fdf7f425d6f?s=128&d=identicon&r=PG&f=1", "display_name": "ptiza_v_nebe", "link": "https://stackoverflow.com/users/10330854/ptiza-v-nebe"}, "is_accepted": false, "score": 0, "last_activity_date": 1570341633, "creation_date": 1570341633, "answer_id": 58254640, "question_id": 58205949, "link": "https://stackoverflow.com/questions/58205949/generating-message-type-with-preprocessor/58254640#58254640", "title": "Generating message type with preprocessor", "body": "<p>I will answer it myself. There is actually \"simple\" way to solve above task in preprocessor. The boost library offers tools to work approximately in preprocessor like in normal languages. They have a package called preprocessor as part of the boost suite <a href=\"https://www.boost.org/doc/libs/1_71_0/libs/preprocessor/doc/index.html\" rel=\"nofollow noreferrer\">read the docs</a>, you can download it <a href=\"https://www.boost.org/users/history/version_1_71_0.html\" rel=\"nofollow noreferrer\">here</a> it is part of the main package.</p>\n\n<p>Main feature that helped to solve the task above was the idea to forward a tuple of arrays to constructs that we know from functional programming. Actually it is <code>BOOST_PP_SEQ_FOR_EACH(macro, data, seq)</code>. Another feature that helped to solve the task was <a href=\"https://www.stackoverflow.com/questions/39766077/use-boost-preprocessor-to-parse-sequence-of-elements\">this</a> guys implementation to create double parentheses around each element.</p>\n\n<p>As idea it will work like following. I have the above list of tuples:</p>\n\n<pre><code>#define frame_composition (begin_byte(0), begin_bit(0), int8_t, speed)\\\n    (begin_byte(1), begin_bit(4), int16_t, direction)\\\n</code></pre>\n\n<p>I have somekind of sequence of actions, because I want to have serial first and deserial second:</p>\n\n<pre><code>#define COMPOSE_FRAME(seq) \\\n    ADD_SERIAL(seq) \\\n    ADD_DESERIAL(seq)\n</code></pre>\n\n<p>Now the content of each add category:</p>\n\n<pre><code>#define ADD_SERIAL(seq) \\\n    BOOST_PP_SEQ_FOR_EACH(ADD_SERIAL_ELEM, ~, GLK_PP_SEQ_DOUBLE_PARENS(seq))\n#define ADD_DESERIAL(seq) \\\n    BOOST_PP_SEQ_FOR_EACH(ADD_DESERIAL_ELEM, ~, GLK_PP_SEQ_DOUBLE_PARENS(seq)) \\\n</code></pre>\n\n<p>The cool thing is, we have forwarded the same list of tuples to different constructs, to execute some different algorithms. Now the contents of X_ELEM defines:</p>\n\n<pre><code>#define ADD_SERIAL_ELEM(seq) \\\n    outgoing_buffer[BOOST_PP_TUPLE_ELEM( 0, elem)] = (uint8_t) BOOST_PP_TUPLE_ELEM( 3, elem); \n#define ADD_DESERIAL_ELEM(seq) \\\n    BOOST_PP_TUPLE_ELEM(3,elem) = (BOOST_PP_TUPLE_ELEM(2,elem)) incoming_buffer[BOOST_PP_TUPLE_ELEM(0,elem)];\n</code></pre>\n\n<p>And if you need you can distinguish between different use cases in element \"functions\" with</p>\n\n<pre><code>BOOST_PP_IF(cond, t, f)\n</code></pre>\n\n<p>To do different things for example on object and simple variables</p>\n\n<p>This is noway complete solution, but to see the idea and that it is possible to create highly portable simple message generator framework out of cpp.</p>\n"}], "owner": {"reputation": 21, "user_id": 10330854, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbf368aaae0742df68263fdf7f425d6f?s=128&d=identicon&r=PG&f=1", "display_name": "ptiza_v_nebe", "link": "https://stackoverflow.com/users/10330854/ptiza-v-nebe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 44, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1570341633, "creation_date": 1570035097, "question_id": 58205949, "link": "https://stackoverflow.com/questions/58205949/generating-message-type-with-preprocessor", "title": "Generating message type with preprocessor", "body": "<p>I want to create a communication protocol between two microcontrollers, I use class logic that incorporates message types between systems. I want to develop a more simple process of creating new messages by doing something very simple like following</p>\n\n<pre><code>BEGIN_MSG(LinearDriveMsg)\n  ADD_2BIT(DriveSpeed, speed)\n  ADD_16BIT(GMath::Position, position.x)\nEND_MSG\n</code></pre>\n\n<p>Ideally it would expand to:</p>\n\n<pre><code>BEGIN_MSG(LinearDriveMsg)\n  BEGIN_SERIALIZER\n    ADD_SERIALIZER_2BIT(DriveSpeed, speed)\n    ADD_SERIALIZER_16BIT(GMath::Position, position.x)\n  END_SERIALIZER\n\n  BEGIN_DESERIALIZER\n    ADD_DESERIALIZER_2BIT(DriveSpeed, speed)\n    ADD_DESERIALIZER_16BIT(GMath::Position, position.x)\n  END_DESERIALIZER\nEND_MSG\n</code></pre>\n\n<p>And then expand to cpp code</p>\n\n<p>...    </p>\n\n<pre><code>bool LinearDriveMsg::deserialize(const uint8_t *incoming_buffer, const uint8_t *incoming_size) override{\n        if (*incoming_size != getMessageSize())\n            return false;\n\n        _speed = (DriveSpeed)((incoming_buffer[0] &amp; SPEED_MASK) &gt;&gt; SPEED_OFFSET);\n        weldTwoBytesToInt(&amp;incoming_buffer[1], _position.x);\n        return true;\n}\n\nint LinearDriveMsg::serialize(uint8_t *outgoing_buffer, uint8_t *outgoing_size) const override{\n    if (*outgoing_size &lt; getMessageSize())\n        return -1;\n\n    outgoing_buffer[0] |= ((uint8_t)_speed &lt;&lt; SPEED_OFFSET) &amp; SPEED_MASK;\n    cutIntToTwoBytes(_position.x, outgoing_buffer + 1, 2);\n\n    return getMessageSize();\n}\n</code></pre>\n\n<p>...</p>\n\n<p>I know that doing some advanced preprocessor stuff is pretty tricky but maybe there some way to do this task? It is also possible to adjust the actual cpp code to make it possible (in that way that the efficiency is still ok)</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1570037163, "post_id": 58205942, "comment_id": 102790925, "body": "<code>search_limit = requests_rows_result.rows.size(); search_results += (requests_rows_result.rows.size() - search_limit);</code> -- That last line doesn&#39;t change <code>search_results</code>, since <code>request_rows_result.rows.size() - search_limit</code> is 0.  I think you need to take a step back and revisit all of that logic, since it seems to me to be overly wordy and complex.  The lines I pointed out are an example."}, {"owner": {"reputation": 27, "user_id": 732307, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cf5fb9929b80bfcd21b1995bd005befe?s=128&d=identicon&r=PG", "display_name": "nakomis", "link": "https://stackoverflow.com/users/732307/nakomis"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1570041158, "post_id": 58205942, "comment_id": 102792719, "body": "The output it suppose to be 0 for that case. Search results is the amount left/<code>more</code>"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1570041239, "post_id": 58205942, "comment_id": 102792757, "body": "So why are you writing a line of unnecessary code?  The more unnecessary lines of code, the harder the code becomes to understand, and the easier it is for a mistake to be made."}, {"owner": {"reputation": 27, "user_id": 732307, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cf5fb9929b80bfcd21b1995bd005befe?s=128&d=identicon&r=PG", "display_name": "nakomis", "link": "https://stackoverflow.com/users/732307/nakomis"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1570041540, "post_id": 58205942, "comment_id": 102792887, "body": "How is it unnecessary? The offset and limit are optional params. Won&#39;t work without that line."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1570041708, "post_id": 58205942, "comment_id": 102792952, "body": "<code>search_limit = requests_rows_result.rows.size(); search_results += 0;</code> -- You are adding 0 here.  What is the effect of adding 0 to a number?"}, {"owner": {"reputation": 27, "user_id": 732307, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cf5fb9929b80bfcd21b1995bd005befe?s=128&d=identicon&r=PG", "display_name": "nakomis", "link": "https://stackoverflow.com/users/732307/nakomis"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1570041754, "post_id": 58205942, "comment_id": 102792970, "body": "Its not always 0. If limit is 1 and offset is set to 0, you&#39;ll have 1."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1570041768, "post_id": 58205942, "comment_id": 102792980, "body": "In that <code>else</code> block, it is always 0.  Are you reading the code carefully?"}, {"owner": {"reputation": 27, "user_id": 732307, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cf5fb9929b80bfcd21b1995bd005befe?s=128&d=identicon&r=PG", "display_name": "nakomis", "link": "https://stackoverflow.com/users/732307/nakomis"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1570041933, "post_id": 58205942, "comment_id": 102793050, "body": "If limit is 1 and offset is set to 0, you&#39;ll have 1."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1570042098, "post_id": 58205942, "comment_id": 102793127, "body": "One more time:  <code>search_limit = requests_rows_result.rows.size(); search_results += (requests_rows_result.rows.size() - search_limit);</code> -- Do you not see that <code>search_limit</code> is set to whatever <code>requests_rows_reult.rows.size()</code> is?  OK, now do you see the very next line?  What does it all boil down to?  Unless the laws of addition and subtraction have changed, when you subtract the same quantities from each other, you get 0.  If you need proof, put a breakpoint at that line, and see this for yourself -- the logic should have been clear to you in that <code>else</code> block, but obviously it isn&#39;t."}], "owner": {"reputation": 27, "user_id": 732307, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cf5fb9929b80bfcd21b1995bd005befe?s=128&d=identicon&r=PG", "display_name": "nakomis", "link": "https://stackoverflow.com/users/732307/nakomis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 25, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1570035065, "creation_date": 1570035065, "question_id": 58205942, "link": "https://stackoverflow.com/questions/58205942/sorting-through-two-loop-results-with-provided-offset-and-limit", "title": "Sorting through two loop results with provided offset and limit", "body": "<p>I'm currently attempting to return results that are obtained inside two for loops with two optional paramaters of <code>limit</code> and an <code>offset</code>. The result will also return <code>more</code> with an unisigned int with the remaining entries. </p>\n\n<p>Intialized data prior to loop:</p>\n\n<pre><code>uint32_t search_results = 0;\nuint32_t search_limit = p.limit;\nbool contSearch = false;\nuint32_t search_offset = p.offset;\nuint32_t returnCount = 0; //more\n</code></pre>\n\n<p>First loop:</p>\n\n<pre><code>for (size_t knpos = 0; knpos &lt; names_rows_result.rows.size(); knpos++)\n</code></pre>\n\n<p>Here is the first set of logic that allows for the offset and limit to work after the first loop and prior to the 2nd:</p>\n\n<pre><code>            if (!contSearch) {\n                if (search_limit &gt;= requests_rows_result.rows.size() || (p.limit - p.offset) == 0 || p.limit == 0) {\n                    search_limit = requests_rows_result.rows.size();\n                    contSearch = true;\n                } else {\n                    search_limit = (p.limit - p.offset);\n                }\n                search_results = (requests_rows_result.rows.size() - search_limit);\n            } else {\n                search_limit = requests_rows_result.rows.size();\n                search_results += (requests_rows_result.rows.size() - search_limit);\n            }\n</code></pre>\n\n<p>Inside the second loop:</p>\n\n<pre><code>if( search_offset &lt; requests_rows_result.rows.size() ){\n   for (size_t pos = 0 + search_offset; pos &lt; search_limit; pos++) {\n        //GATHERS DATA\n        result.requests.push_back(DATA);\n        returnCount++;\n   }\n}\n</code></pre>\n\n<p>This seems to work for the first loop through but when it goes to the next entry for <code>knpos</code>, I'm having a little trouble returning only the data requested. </p>\n"}, {"tags": ["c++", "r", "rcpp"], "comments": [{"owner": {"reputation": 24192, "user_id": 8416610, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-cmim3CrZ9Wo/AAAAAAAAAAI/AAAAAAAAAjs/hnKTOHALc6M/photo.jpg?sz=128", "display_name": "Ralf Stubner", "link": "https://stackoverflow.com/users/8416610/ralf-stubner"}, "edited": false, "score": 1, "creation_date": 1570035007, "post_id": 58205770, "comment_id": 102789940, "body": "Does <a href=\"https://stackoverflow.com/a/55496292/8416610\">stackoverflow.com/a/55496292/8416610</a> help?"}, {"owner": {"reputation": 2473, "user_id": 5851905, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/hmpLD.jpg?s=128&g=1", "display_name": "plant", "link": "https://stackoverflow.com/users/5851905/plant"}, "reply_to_user": {"reputation": 24192, "user_id": 8416610, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-cmim3CrZ9Wo/AAAAAAAAAAI/AAAAAAAAAjs/hnKTOHALc6M/photo.jpg?sz=128", "display_name": "Ralf Stubner", "link": "https://stackoverflow.com/users/8416610/ralf-stubner"}, "edited": false, "score": 0, "creation_date": 1570049590, "post_id": 58205770, "comment_id": 102796203, "body": "It does indeed."}], "owner": {"reputation": 2473, "user_id": 5851905, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/hmpLD.jpg?s=128&g=1", "display_name": "plant", "link": "https://stackoverflow.com/users/5851905/plant"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 31, "favorite_count": 0, "closed_date": 1570050458, "answer_count": 0, "score": 1, "last_activity_date": 1570034392, "creation_date": 1570034392, "question_id": 58205770, "link": "https://stackoverflow.com/questions/58205770/validation-on-a-rcppfunction-object", "closed_reason": "Duplicate", "title": "Validation on a Rcpp::Function object?", "body": "<p>This is a sort of follow up on this question: <a href=\"https://stackoverflow.com/questions/57137507/passing-r-functions-to-c-routines-using-rcpp\">Passing R functions to C routines using rcpp</a></p>\n\n<p>I am wondering if I can do validation on Rcpp::Function object, namely number of arguments and type of the returned value?</p>\n\n<p>Here's my code, and I have placed a comment indicating where I'd like to do some checking on the object <code>Rcpp::Function error_callback</code>:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>#include &lt;Rcpp.h&gt;\n#include &lt;GLFW/glfw3.h&gt;\nusing namespace Rcpp;\n\nnamespace {\n  std::unique_ptr&lt;Rcpp::Function&gt; callback_func_ptr;\n}\n\nvoid wrapper(int error, const char* description)\n{\n  (*callback_func_ptr)(error, description);\n}\n\n//' @export\n// [[Rcpp::export(\"glfwSetErrorCallback\")]]\nvoid glfw_set_error_callback(Rcpp::Function error_callback) {\n\n  // Is it possible to do some checking on the function error_callback?\n  // Such as number of arguments, type, and return type?\n\n  callback_func_ptr = std::make_unique&lt;Rcpp::Function&gt;(error_callback);\n  glfwSetErrorCallback((GLFWerrorfun) wrapper);\n\n}\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 0, "creation_date": 1570033474, "post_id": 58205500, "comment_id": 102789212, "body": "What is the pyramid pattern?"}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 1, "creation_date": 1570033535, "post_id": 58205500, "comment_id": 102789252, "body": "Note that the complete program must be more than one line.  There needs to be at least one #include line to define the printing functions, and then the rest of the code can all be on one line."}, {"owner": {"reputation": 1699, "user_id": 8937209, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bQ0HF.jpg?s=128&g=1", "display_name": "&#214;m&#252;rcan Cengiz", "link": "https://stackoverflow.com/users/8937209/%c3%96m%c3%bcrcan-cengiz"}, "edited": false, "score": 0, "creation_date": 1570033643, "post_id": 58205500, "comment_id": 102789304, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/20738935/how-to-display-pyramid-using-javascript\">how to Display Pyramid using Javascript?</a>"}, {"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1570033654, "post_id": 58205500, "comment_id": 102789309, "body": "@Krishnanand Pathak You can initialize an object of the type std::string with the pattern and output the string."}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "reply_to_user": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 1, "creation_date": 1570034440, "post_id": 58205500, "comment_id": 102789688, "body": "@Martin, one could declare the printing function (<code>puts()</code> or <code>printf()</code>, I guess) oneself instead of using a header to do it.  I don&#39;t recommend that, but in golf all is fair..."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 3, "creation_date": 1570035110, "post_id": 58205500, "comment_id": 102789989, "body": "I hope you and your friend avoid the company that ask such questions. The world needs a lot more software engineers who produce elegant, easy to read, and easy to maintain code than hackers."}], "answers": [{"tags": [], "owner": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "is_accepted": false, "score": 4, "last_activity_date": 1570034611, "creation_date": 1570034611, "answer_id": 58205830, "question_id": 58205500, "link": "https://stackoverflow.com/questions/58205500/is-there-any-way-to-print-pyramid-star-pattern-with-single-line-of-logic-code/58205830#58205830", "title": "Is there any way to print pyramid star pattern with single line of logic code ? Interviewer asked this Question to my friend", "body": "<blockquote>\n  <p>If it is possible...</p>\n</blockquote>\n\n<p>Yes, it is possible.</p>\n\n<p>One has to cheat by hand adding the declaration out of the header file.  And by using \"everything on one line\" hard to read formatting, rather than maintainable formatting.</p>\n\n<p>Those are silly constraints, though.  Not used in real projects. </p>\n\n<blockquote>\n  <p>...then please provide me the solution.</p>\n</blockquote>\n\n<pre><code>extern \"C\" int puts(const char *s); int main() { puts(\"     *\\n    * *\\n   *   *\\n  *     *\\n *       *\\n***********\\n\"); }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1570088127, "post_id": 58205940, "comment_id": 102805163, "body": "Love the second paragraph of the disclaimer. Downvote converted to upvote."}], "tags": [], "owner": {"reputation": 116, "user_id": 10485323, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-QgQc42HLFmc/AAAAAAAAAAI/AAAAAAAAAC4/Y-GEi0TKeiY/photo.jpg?sz=128", "display_name": "Eron", "link": "https://stackoverflow.com/users/10485323/eron"}, "is_accepted": false, "score": 2, "last_activity_date": 1570037127, "last_edit_date": 1570037127, "creation_date": 1570035062, "answer_id": 58205940, "question_id": 58205500, "link": "https://stackoverflow.com/questions/58205500/is-there-any-way-to-print-pyramid-star-pattern-with-single-line-of-logic-code/58205940#58205940", "title": "Is there any way to print pyramid star pattern with single line of logic code ? Interviewer asked this Question to my friend", "body": "<p>There is a way to do it in C++ within one line of code.\nThe only statement needed inside a <code>main()</code> function to print the \"pyramid\" (or star)  pattern is:</p>\n\n<pre><code>for (std::string s = \"*\"; s.size() &lt; 11; s.append(\"*\")) std::cout &lt;&lt; s &lt;&lt; std::endl;\n</code></pre>\n\n<p>The output is:ld be made \"One line long\"; just group every statement one after another. Also, what if</p>\n\n<pre><code>*                                                                                                                                                                                                                                                \n**                                                                                                                                                                                                                                               \n***                                                                                                                                                                                                                                              \n****                                                                                                                                                                                                                                             \n*****                                                                                                                                                                                                                                            \n******                                                                                                                                                                                                                                           \n*******                                                                                                                                                                                                                                          \n********                                                                                                                                                                                                                                         \n*********                                                                                                                                                                                                                                        \n**********\n</code></pre>\n\n<p><em>OBS:</em> If you want to compile it yourself, you should include the proper headers for that. Of course, this will make your source code file more than one line long (it couldn't be different, right), but the <code>main()</code> function would still consist of one single line. Also, note that the stop condition is arbitrary (in this case I set it to 10).</p>\n\n<p>The full code is:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n\nint main() {\n  for (std::string s = \"*\"; s.size() &lt; 11; s.append(\"*\")) std::cout &lt;&lt; s &lt;&lt; std::endl;\n\n}\n</code></pre>\n\n<p><strong>DISCLAIMER</strong></p>\n\n<p>I'm assuming that \"one line of code\" really means \"one single statement\", which is the only meaningful question to be asked. \"One line of code\" is very subjective. C++ doesn't care about spaces/returns, hence, every code could be made \"One line long\"; just group every statement one after another. Also, what if my definition of \"line\", which might be 'a 60-characters long sequence', differs from that of the manager, which might be 'a 40-characters long sequence'? Then a code working on my view of \"single line\" might not work in \"manager's single line\". Hence, due to the subjectivity of such definition, the only proper thing to ask is to do it in a single <strong>statement</strong> (or expression), which is what this answer accomplishes.</p>\n\n<p>Now regarding the shape. As far as I am concerned, the \"Pyramid pattern\", also known as the \"Star pattern\", isn't exactly a pyramid. Everytime I saw this kind of puzzle, it's been concerned about this \"right-angled triangle\", and I'm quite sure that this is what was asked in the interview. In fact, drawing a real \"pyramid\" is quite difficult, since it is a 3D geometry that needs 4 triangles and one square. Hence, regarding definitions, neither my answer nor the other one draws a real <strong>pyramid</strong> (actually, both print a triangle). Taking into account the programming-world experience, this puzzle is about printing the \"star pattern\", which is more like the right-angled triangle above.</p>\n"}], "owner": {"reputation": 61, "user_id": 4611404, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c135ce3a80d98b16eef0895b2d2b077d?s=128&d=identicon&r=PG&f=1", "display_name": "Krishnanand Pathak", "link": "https://stackoverflow.com/users/4611404/krishnanand-pathak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 152, "favorite_count": 0, "closed_date": 1570147101, "answer_count": 2, "score": -1, "last_activity_date": 1570251606, "creation_date": 1570033252, "last_edit_date": 1570251606, "question_id": 58205500, "link": "https://stackoverflow.com/questions/58205500/is-there-any-way-to-print-pyramid-star-pattern-with-single-line-of-logic-code", "closed_reason": "Needs details or clarity", "title": "Is there any way to print pyramid star pattern with single line of logic code ? Interviewer asked this Question to my friend", "body": "<p>One of my friend was asked by a interviewer to print pyramid pattern using single line of logic code.\nIf it is possible then please provide me the solution. </p>\n"}, {"tags": ["c++", "c++11", "vector", "struct", "initialization"], "answers": [{"tags": [], "owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 0, "last_activity_date": 1570034538, "last_edit_date": 1570034538, "creation_date": 1570032849, "answer_id": 58205397, "question_id": 58205278, "link": "https://stackoverflow.com/questions/58205278/cannot-define-a-3d-vector-in-a-struct/58205397#58205397", "title": "Cannot define a 3D vector in a struct", "body": "<p>The initialization of the data member of the structure is invalid.</p>\n\n<pre><code>struct CameraImages\n{\n   Image3D image2(10, std::vector&lt;std::vector&lt;char&gt;&gt;(10, std::vector&lt;char&gt;(10, 0)));\n};\n</code></pre>\n\n<p>You have to use a brace-or-equal initializer.</p>\n\n<p>From the C++ 17 Standard (12.2 Class members)</p>\n\n<pre><code>member-declarator:\n    declarator virt-specifier-seqopt pure-specifieropt\n    declarator requires-clause\n    declarator brace-or-equal-initializeropt\n    identifieropt attribute-specifier-seqopt : constant-expression brace-or-equal-initializeropt\n</code></pre>\n\n<p>For example</p>\n\n<pre><code>struct CameraImages\n{\n   Image3D image2 {10, std::vector&lt;std::vector&lt;char&gt;&gt;(10, std::vector&lt;char&gt;(10, 0))};\n};\n</code></pre>\n\n<p>or</p>\n\n<pre><code>struct CameraImages\n{\n   Image3D image2 = {10, std::vector&lt;std::vector&lt;char&gt;&gt;(10, std::vector&lt;char&gt;(10, 0))};\n};\n</code></pre>\n\n<p>or</p>\n\n<pre><code>struct CameraImages\n{\n   Image3D image2 = Image3D(10, std::vector&lt;std::vector&lt;char&gt;&gt;(10, std::vector&lt;char&gt;(10, 0)));\n};\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 68, "user_id": 11708808, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-hKRi7PCXqYw/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfXjqgPbXwHlewfzrfTb9I2XdHDYw/photo.jpg?sz=128", "display_name": "JM C", "link": "https://stackoverflow.com/users/11708808/jm-c"}, "is_accepted": false, "score": -1, "last_activity_date": 1570033774, "creation_date": 1570033774, "answer_id": 58205621, "question_id": 58205278, "link": "https://stackoverflow.com/questions/58205278/cannot-define-a-3d-vector-in-a-struct/58205621#58205621", "title": "Cannot define a 3D vector in a struct", "body": "<pre><code>struct CameraImages\n{\n   Image3D image2(10, std::vector&lt;std::vector&lt;char&gt;&gt;(10, std::vector&lt;char&gt;(10, 0)));\n};\n</code></pre>\n\n<p>This is a function declaration.</p>\n\n<p>To prevent a syntax ambiguity such as <a href=\"https://en.wikipedia.org/wiki/Most_vexing_parse\" rel=\"nofollow noreferrer\">Most vexing parse</a>, any member declaration like <code>T t(args...)</code> is not allowed.</p>\n\n<p>In short, in order to fix your problem, you have to declare it as either these forms.</p>\n\n<pre><code>Image3D image2{10, std::vector&lt;std::vector&lt;char&gt;&gt;(10, std::vector&lt;char&gt;(10, 0))};\nImage3D image2 = Image3D(10, std::vector&lt;std::vector&lt;char&gt;&gt;(10, std::vector&lt;char&gt;(10, 0)));\n</code></pre>\n\n<p>For more information, you may check <a href=\"https://stackoverflow.com/questions/16329962/why-can-in-class-initializers-only-use-or\">Why can in-class initializers only use = or {}?</a></p>\n"}, {"tags": [], "owner": {"reputation": 6924, "user_id": 14143, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7fb64856eda5af7f46b4996ab8fd37b?s=128&d=identicon&r=PG", "display_name": "simon", "link": "https://stackoverflow.com/users/14143/simon"}, "is_accepted": false, "score": 0, "last_activity_date": 1570035034, "creation_date": 1570035034, "answer_id": 58205932, "question_id": 58205278, "link": "https://stackoverflow.com/questions/58205278/cannot-define-a-3d-vector-in-a-struct/58205932#58205932", "title": "Cannot define a 3D vector in a struct", "body": "<p>image2 is a member, you can set up default initialization something like:</p>\n\n<pre><code>struct CameraImages\n{\n   Image3D image2 = Image3D(10, std::vector&lt;std::vector&lt;char&gt;&gt;(10, std::vector&lt;char&gt;(10, 0)));\n};\n</code></pre>\n\n<p>you could use brace initialization also like</p>\n\n<pre><code>struct CameraImages\n{\n   Image3D image2 = {(10, std::vector&lt;std::vector&lt;char&gt;&gt;(10, std::vector&lt;char&gt;(10, 0)))};\n};\n</code></pre>\n\n<p>but the former is probably clearer.</p>\n\n<p>As an aside: this approach will have some significant performance implications for image operations.</p>\n"}], "owner": {"reputation": 49, "user_id": 1993504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2fc47c20103a439819b9b15693bdac0?s=128&d=identicon&r=PG", "display_name": "Shaoor Ahmad Qureshi", "link": "https://stackoverflow.com/users/1993504/shaoor-ahmad-qureshi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 127, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1570035034, "creation_date": 1570032370, "last_edit_date": 1570033041, "question_id": 58205278, "link": "https://stackoverflow.com/questions/58205278/cannot-define-a-3d-vector-in-a-struct", "title": "Cannot define a 3D vector in a struct", "body": "<p>When i  define my vector in this way </p>\n\n<pre><code>#include&lt;iostream&gt;\n#include&lt;vector&gt;\nusing namespace std;\ntypedef std::vector&lt;char&gt; Image1D;\ntypedef std::vector&lt;Image1D&gt; Image2D;\ntypedef std::vector&lt;Image2D&gt; Image3D;\n\nint main()\n{\n\n  Image3D image2(10, std::vector&lt;std::vector&lt;char&gt;&gt;(10, std::vector&lt;char&gt;(10, 0)));\n  return 0;\n}\n</code></pre>\n\n<p>every thing works fine but when i define the same vector in a struct if give me some error in terms of type specifier it have problem with this const value 10</p>\n\n<pre><code>#include&lt;iostream&gt;\n#include&lt;vector&gt;\n\nusing namespace std;\ntypedef std::vector&lt;char&gt; Image1D;\ntypedef std::vector&lt;Image1D&gt; Image2D;\ntypedef std::vector&lt;Image2D&gt; Image3D;\n\n\n\n\nstruct CameraImages\n{\n   Image3D image2(10, std::vector&lt;std::vector&lt;char&gt;&gt;(10, std::vector&lt;char&gt;(10, 0)));\n};\n</code></pre>\n\n<p>any help would be highly appreciated </p>\n"}, {"tags": ["c++", "class", "header", "friend-function"], "answers": [{"comments": [{"owner": {"reputation": 511, "user_id": 2379240, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/61af3f729fb21971b5de6cff4619397b?s=128&d=identicon&r=PG", "display_name": "Braaedy", "link": "https://stackoverflow.com/users/2379240/braaedy"}, "edited": false, "score": 0, "creation_date": 1570037039, "post_id": 58205323, "comment_id": 102790864, "body": "The solution here is to drop the include in List.h, the forward declaration of <code>Nhanvien</code> is sufficient. Also the forward declaration List in Nhanvien.h is unnecessary."}, {"owner": {"reputation": 13, "user_id": 12070549, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCKlbNf_kFK5BU_WyPaYvLnnQbi5uP0tWDvY1jJcQ=k-s128", "display_name": "S\u01a1n L&#234;", "link": "https://stackoverflow.com/users/12070549/s%c6%a1n-l%c3%aa"}, "edited": false, "score": 0, "creation_date": 1570114048, "post_id": 58205323, "comment_id": 102818932, "body": "it works!! thanks so much for your help. it took me so much time to solve but you did it"}], "tags": [], "owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": true, "score": 1, "last_activity_date": 1570032557, "creation_date": 1570032557, "answer_id": 58205323, "question_id": 58205275, "link": "https://stackoverflow.com/questions/58205275/why-i-get-error-class-undefined-when-declare-friend-funcion-with-class-in-multi/58205323#58205323", "title": "Why i get error class undefined when declare friend funcion with class in multi file?", "body": "<p>You have a recursive dependency of headers.</p>\n\n<p><em>//List.h</em></p>\n\n<pre><code>#pragma once\n\n#include\"Nhanvien.h\"\n\n//...\n</code></pre>\n\n<p><em>//Nhanvien.h</em></p>\n\n<pre><code>#pragma once\n#include&lt;iostream&gt;\n#include \"Date.h\"\n#include\"List.h\"\n//...\n</code></pre>\n\n<p>So the header <code>List.h</code> includes at first the header <code>Nhanvien.h</code> and this header does not see yet the declaration of the class <code>List</code>.</p>\n"}], "owner": {"reputation": 13, "user_id": 12070549, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCKlbNf_kFK5BU_WyPaYvLnnQbi5uP0tWDvY1jJcQ=k-s128", "display_name": "S\u01a1n L&#234;", "link": "https://stackoverflow.com/users/12070549/s%c6%a1n-l%c3%aa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "accepted_answer_id": 58205323, "answer_count": 1, "score": 1, "last_activity_date": 1606378476, "creation_date": 1570032351, "last_edit_date": 1606378476, "question_id": 58205275, "link": "https://stackoverflow.com/questions/58205275/why-i-get-error-class-undefined-when-declare-friend-funcion-with-class-in-multi", "title": "Why i get error class undefined when declare friend funcion with class in multi file?", "body": "<p>I created a friend funcion &quot;display&quot;(member of List class) in Nhanvien class.List was declared but it still keep this error:</p>\n<pre><code>C2027 use of undefined type 'List'.\n</code></pre>\n<p>I'm using Visual studio. How can i fix it?? Please help me. Sorry for my bad English :&lt;</p>\n<p>here is my source:</p>\n<pre><code>*//List.h*\n#pragma once\n\n#include&quot;Nhanvien.h&quot;\n\nclass Nhanvien;\n\nclass List\n{\n\n        Nhanvien* p;\n\n   public:\n\n       List();\n       List(int);\n       ~List();\n       void display(int);\n};\n\n\n*//Nhanvien.h*\n  \n#pragma once\n#include&lt;iostream&gt;\n#include &quot;Date.h&quot;\n#include&quot;List.h&quot;\n\nclass List;\nclass Nhanvien\n{\n\nprivate:\n    \n    char maNV[100];\n    std::string tenNV;\n    Date ngay;\n    bool gioitinh;\n    double luong;\n    \npublic:\n    \n    Nhanvien();\n    Nhanvien(const Nhanvien&amp;);\n    ~Nhanvien();\n    void set();\n    void show();\n    static int count;\n    friend void List::display(int);\n};\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/OVsej.png\" rel=\"nofollow noreferrer\">show error</a></p>\n"}, {"tags": ["c++", "windows", "winapi"], "comments": [{"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 2, "creation_date": 1570032085, "post_id": 58205092, "comment_id": 102788564, "body": "<i>&quot;...What is the canonical way to access the screen...&quot;</i> C++ has no direct way to access the screen you would have to use a 3rd party API/library.  For the WinAPI use <a href=\"https://docs.microsoft.com/en-us/windows/win32/api/highlevelmonitorconfigurationapi/nf-highlevelmonitorconfigurationapi-setmonitorcolortemperature\" rel=\"nofollow noreferrer\">docs.microsoft.com/en-us/windows/win32/api/&hellip;</a>"}, {"owner": {"reputation": 1854, "user_id": 3439945, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/dad28193639b0f8b99da3f1e8fb1665f?s=128&d=identicon&r=PG&f=1", "display_name": "Julien__", "link": "https://stackoverflow.com/users/3439945/julien"}, "reply_to_user": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1570032124, "post_id": 58205092, "comment_id": 102788579, "body": "even using windows API? The os should be able to access the screen"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1570037486, "post_id": 58205092, "comment_id": 102791077, "body": "I did an internet search using the keywords &quot;windows 10 night light api&quot;, and came up with <a href=\"https://stackoverflow.com/questions/43340619/get-status-of-night-light-mode-in-windows-10\">Get status of night light mode in Windows 10</a>.  Have you searched the internet lately?"}, {"owner": {"reputation": 1854, "user_id": 3439945, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/dad28193639b0f8b99da3f1e8fb1665f?s=128&d=identicon&r=PG&f=1", "display_name": "Julien__", "link": "https://stackoverflow.com/users/3439945/julien"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1570041022, "post_id": 58205092, "comment_id": 102792660, "body": "@ThomasMatthews, have you read the actual question and answers&#39; comments? ;-) Nothing usable in there."}], "answers": [{"tags": [], "owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "is_accepted": false, "score": 2, "last_activity_date": 1584973218, "last_edit_date": 1584973218, "creation_date": 1570038090, "answer_id": 58206627, "question_id": 58205092, "link": "https://stackoverflow.com/questions/58205092/how-is-windows-10-night-light-implemented/58206627#58206627", "title": "How is Windows 10 Night Light implemented?", "body": "<p>It's not always a valid expectation that the OS will allow you to do what it itself does. Just because \"the os should be able to access the screen\" doesn't mean that <strong>you</strong> (in userland) should be able to do that. And most certainly, under Windows you have no unfettered screen access, not least because of DRM: there is a <a href=\"https://docs.microsoft.com/en-us/windows/win32/medfound/protected-media-path\" rel=\"nofollow noreferrer\">protected media path (PMP)</a> for protected video and audio content, and you won't be able to sniff it from an arbitrary process.</p>\n\n<p>So: whatever night light you may implement by accessing the screen contents, won't work as soon as any protected content is displayed, e.g. from Netflix, Hulu, Youtube Red, system DVD player, BluRay player, etc. To get around PMP you'd need to write a driver, sign it using an EV code signing certificate, and then submit it for automated <a href=\"https://docs.microsoft.com/en-us/windows-hardware/drivers/dashboard/attestation-signing-a-kernel-driver-for-public-release\" rel=\"nofollow noreferrer\">attestation signing by Microsoft</a>. And you'd not dare put it on the web, because Microsoft would blacklist that driver (i.e. its presence in the kernel would cause PMP-using applications to refuse to play protected content), and perhaps quickly at that.</p>\n\n<p>With that out of the way, there are several ways that Windows could implement it, but we don't care because we're not writing a direct replacement for the Windows Night Light component. All we have access to is userland. Here's what we got to work with, then:</p>\n\n<ol>\n<li><p>Windows itself performs monitor colorspace calibration using the \"gamma ramp\" system: a lookup table, historically used mostly for linearization of the monitor response, and subsequently used as a kitchen sink.  There are three generations of those APIs:</p>\n\n<ul>\n<li><p>The most legacy-compatible way would be to use the <a href=\"https://docs.microsoft.com/en-us/windows/win32/api/_wcs/\" rel=\"nofollow noreferrer\">Windows Color System</a> APIs, supported since Windows 2000. The function to use is <a href=\"https://stackoverflow.com/questions/8359607/correct-usage-of-setdevicegammaramp\"><code>SetDeviceGammaRamp</code></a>. There is a caveat: Windows doesn't allow compressing the color too much, and it's quite arbitrary about what it allows. This family of APIs may fail if you try to do \"too much\".</p></li>\n<li><p>Another highly compatible API would be within Direct3D 9 (available since Windows 98 and XP). It offers <a href=\"https://docs.microsoft.com/en-us/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-setgammaramp\" rel=\"nofollow noreferrer\"><code>SetGammaRamp</code></a>, with same data table format as that of <code>SetDeviceGammaRamp</code> above.</p></li>\n<li><p>Yet another highly compatible API would be within Direct3D 10-12's <a href=\"https://docs.microsoft.com/en-us/windows/win32/direct3ddxgi/dx-graphics-dxgi\" rel=\"nofollow noreferrer\">DirectX Graphics Interface - DXGI</a>, specifically <a href=\"https://docs.microsoft.com/en-us/windows/win32/api/dxgi/nf-dxgi-idxgioutput-setgammacontrol\" rel=\"nofollow noreferrer\"><code>IDXGIOutput::SetGammaControl</code></a>. This one was available since Windows Vista, and thus is available on currently (2020) supported Windows versions.</p></li>\n</ul></li>\n<li><p>The next most compatible approach would be to use the <a href=\"https://stackoverflow.com/a/32929962/1329652\">Magnification API</a>.</p></li>\n<li><p>The last approach, working only on your own application's window, would be to apply a <a href=\"https://stackoverflow.com/a/32929962/1329652\">shader to your window</a>.</p></li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 8430, "user_id": 2742717, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d1dec1aa6accf3589489ebd42634f7a0?s=128&d=identicon&r=PG", "display_name": "Swift - Friday Pie", "link": "https://stackoverflow.com/users/2742717/swift-friday-pie"}, "is_accepted": true, "score": 2, "last_activity_date": 1570086466, "last_edit_date": 1570086466, "creation_date": 1570038599, "answer_id": 58206762, "question_id": 58205092, "link": "https://stackoverflow.com/questions/58205092/how-is-windows-10-night-light-implemented/58206762#58206762", "title": "How is Windows 10 Night Light implemented?", "body": "<p>This can be emulated using color correction scheme. There is this OpenSource project, DisplayCAL. It's a calibrator which does it for other purposes and also allows to use various  calibrator devices. Essentially there is a digital filter in place by design for all graphical output devices, which converts source RGB into screen RGB and there is possibility to change it. Linux have something similar in some distros.</p>\n"}], "owner": {"reputation": 1854, "user_id": 3439945, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/dad28193639b0f8b99da3f1e8fb1665f?s=128&d=identicon&r=PG&f=1", "display_name": "Julien__", "link": "https://stackoverflow.com/users/3439945/julien"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 639, "favorite_count": 3, "accepted_answer_id": 58206762, "answer_count": 2, "score": 3, "last_activity_date": 1584973218, "creation_date": 1570031659, "last_edit_date": 1570032560, "question_id": 58205092, "link": "https://stackoverflow.com/questions/58205092/how-is-windows-10-night-light-implemented", "title": "How is Windows 10 Night Light implemented?", "body": "<p>Windows 10 has a feature to change the screen's color temperature named Night Light. This is a blue light reduction feature.</p>\n\n<p>I would like to implement a clone of this feature in C++, using windows API. But have no idea how to do so.</p>\n\n<ul>\n<li>How do I access the screen and change what it displays system wide using win api? It must be resources efficient.</li>\n<li>And can we apply it only on a given window, not the whole screen?</li>\n</ul>\n"}, {"tags": ["c++", "winsock2"], "comments": [{"owner": {"reputation": 15260, "user_id": 1968182, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/E5nF2.jpg?s=128&g=1", "display_name": "Ulrich Eckhardt", "link": "https://stackoverflow.com/users/1968182/ulrich-eckhardt"}, "edited": false, "score": 0, "creation_date": 1570036835, "post_id": 58205051, "comment_id": 102790782, "body": "Read the documentation carefully, it tells you how to check for errors and how to retrieve further error info. This error code can also be mapped to a string, both with a utility or programmatically. With that in mind, extract a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> from your code for posting here. As a new user, also take the <a href=\"https://stackoverflow.com/tour\">tour</a> and read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>."}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 12154561, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc862408c4cdf843d75c5610046039db?s=128&d=identicon&r=PG&f=1", "display_name": "BE3dARt", "link": "https://stackoverflow.com/users/12154561/be3dart"}, "edited": false, "score": 0, "creation_date": 1570046700, "post_id": 58206256, "comment_id": 102795192, "body": "Thank you sir! There is a small issue, it should be <code>*szHost</code> My question is solved! Will mark it as such."}], "tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": true, "score": 0, "last_activity_date": 1570036541, "creation_date": 1570036541, "answer_id": 58206256, "question_id": 58205051, "link": "https://stackoverflow.com/questions/58205051/bind-windows-socket-works-with-ipv4-but-not-with-ipv6/58206256#58206256", "title": "Bind() Windows Socket works with IPv4 but not with IPv6", "body": "<p>When calling <code>socket()</code>, <code>PF_INET</code>/<code>PF_INET6</code> should be <code>AF_INET</code>/<code>AF_INET6</code> instead.  But this generally doesn't matter as the <code>PF_...</code> and <code>AF_...</code> macros usually map to the same numeric values.</p>\n\n<p>But, more importantly, you are not zeroing out the <code>sockaddr_in</code>/<code>sockadr_in6</code> structs before filling them in.  You should always zero out Win32 API structs before using them.  For <code>AF_INET</code>, you are not populating the <code>sockaddr_in::sin_zero</code> field with zeros, so it will contain random bytes from the call stack.  Which is usually OK since that field is generally ignored.  But for <code>AF_INET6</code>, you are not populating the <code>sockaddr_in6::sin6_flowinfo</code> and <code>sockaddr_in6::sin6_scope_id</code> fields, which do have meaning, and is likely the root cause of your <code>WSAEADDRNOTAVAIL</code> error when they contain random values.</p>\n\n<p>Use this instead:</p>\n\n<pre><code>struct sockaddr_in6 ip6addr = {};\n</code></pre>\n\n<pre><code>struct sockaddr_in ip4addr = {};\n</code></pre>\n\n<p>Or:</p>\n\n<pre><code>struct sockaddr_in6 ip6addr;\nZeroMemory(&amp;ip6addr, sizeof ip6addr);\n</code></pre>\n\n<pre><code>struct sockaddr_in ip4addr;\nZeroMemory(&amp;ip4addr, sizeof ip4addr);\n</code></pre>\n\n<p>However, a better way to create properly filled <code>sockaddr_in</code>/<code>sockaddr_in6</code> structs for <code>bind()</code> (and <code>connect()</code>) is to use <a href=\"https://docs.microsoft.com/en-us/windows/win32/api/ws2tcpip/nf-ws2tcpip-getaddrinfo\" rel=\"nofollow noreferrer\"><code>getaddrinfo()</code></a> instead of filling them manually:</p>\n\n<pre><code>const char szHost = \"::1\"; // or \"127.0.0.1\"\nconst char *szPort = \"55339\";\n\naddrinfo hint = {};\nhint.ai_flags = AI_PASSIVE | AI_NUMERICHOST;\nhint.ai_family = AF_INET6; // or AF_INET\nhint.ai_socktype = SOCK_STREAM;\nhint.ai_protocol = IPPROTO_TCP;\n\naddrinfo *addr = NULL;\nres = getaddrinfo(szHost, szPort, &amp;hint, &amp;addr);\nif (res != 0)\n{\n    wprintf(L\"getaddrinfo function failed with error: %d\\n\", res);\n}\nelse\n{\n    res = bind(slisten, addr-&gt;ai_addr, addr-&gt;ai_addrlen);\n    if (res == SOCKET_ERROR)\n    {\n        wprintf(L\"bind function failed with error: %d\\n\", WSAGetLastError());\n    }\n\n    freeaddrinfo(addr);\n}\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 12154561, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc862408c4cdf843d75c5610046039db?s=128&d=identicon&r=PG&f=1", "display_name": "BE3dARt", "link": "https://stackoverflow.com/users/12154561/be3dart"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 242, "favorite_count": 0, "accepted_answer_id": 58206256, "answer_count": 1, "score": 1, "last_activity_date": 1570036541, "creation_date": 1570031467, "last_edit_date": 1570035471, "question_id": 58205051, "link": "https://stackoverflow.com/questions/58205051/bind-windows-socket-works-with-ipv4-but-not-with-ipv6", "title": "Bind() Windows Socket works with IPv4 but not with IPv6", "body": "<p>I am learning how to use Winsock. I am programming a server that listens for a connection. Everything worked fine until I wanted to change the whole code over to IPv6.</p>\n\n<p>I've gone through every question and website related to this topic, but no solution suited me... :/</p>\n\n<p>Background: Windows, using Visual Studio 2019, IPv6 is activated and working all fine otherwise (I can ping my phone in IPv6 for example).</p>\n\n<p>Every time I get error 10049. This one tells me that the given IP is invalid. I tried every one I could find in <code>ipconfig</code> and <code>::1</code>.</p>\n\n<pre><code>int slisten;\nlong res;\nSOCKET client;\n\nWSADATA wsaData;\n\nres = WSAStartup(MAKEWORD(2, 1), &amp;wsaData);\nif (res == 0)\n    cout &lt;&lt; \"WSAStartup()\\t\\t successful\" &lt;&lt; endl;\nelse\n    cout &lt;&lt; \"error WSAStartup(): \" &lt;&lt; WSAGetLastError() &lt;&lt; endl;\n\nslisten = socket(PF_INET6, SOCK_STREAM, 0);\nif (slisten != INVALID_SOCKET)\n    cout &lt;&lt; \"socket()  \\t\\t successful\" &lt;&lt; endl;\nelse\n    cout &lt;&lt; \"error socket(): \" &lt;&lt; WSAGetLastError() &lt;&lt; endl;\n\n//IPv6\nstruct sockaddr_in6 ip6addr;\nip6addr.sin6_family = AF_INET6;\nip6addr.sin6_port = htons(55339);\ninet_pton(AF_INET6, \"::1\", &amp;ip6addr.sin6_addr);\n\nres = bind(slisten, (struct sockaddr*) &amp; ip6addr, sizeof ip6addr);\nif (res == SOCKET_ERROR)\n{\n    wprintf(L\"bind function failed with error: %d\\n\", WSAGetLastError());\n}\n\n/* IPv4, not in use\nstruct sockaddr_in ip4addr;\nip4addr.sin_family = AF_INET;\nip4addr.sin_port = htons(3490);\ninet_pton(AF_INET, \"127.0.0.1\", &amp;ip4addr.sin_addr);\n\nres = bind(slisten, (struct sockaddr*) &amp; ip4addr, sizeof ip4addr);\nif (res == SOCKET_ERROR)\n{\n    wprintf(L\"bind function failed with error: %d\\n\", WSAGetLastError());\n}\n*/\n</code></pre>\n\n<p>The IPv4 method works, but the IPv6 doesn't. </p>\n\n<p>WSAStartup() = Success</p>\n\n<p>socket() = Success</p>\n\n<p>bind() = Error 10049</p>\n\n<p>If I comment out the IPv6 part and uncomment the IPv4 part, and change <code>PF_INET6</code> to <code>PF_INET</code> in <code>slisten = socket()</code>, there is no <code>bind()</code> error.</p>\n\n<p>Tell me if you need more code or something, but I mean, if the program throws in an error at that specific function, everything until then must work fine because there are no errors (?).</p>\n\n<p>Some parts of the code belong to s41b0tproductions on YouTube. You can find him at <a href=\"https://www.youtube.com/user/s41b0tproductions/videos\" rel=\"nofollow noreferrer\">https://www.youtube.com/user/s41b0tproductions/videos</a>.</p>\n"}, {"tags": ["c++", "api", "dll", "std"], "comments": [{"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1570031554, "post_id": 58205021, "comment_id": 102788305, "body": "<i>&quot;...But I&#39;m doing something wrong when the &#39;outer&#39; logger is a class member:...&quot;</i> what error(s) are you getting?"}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1570031565, "post_id": 58205021, "comment_id": 102788310, "body": "What is your question?"}, {"owner": {"reputation": 929, "user_id": 4253931, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b751517b9a663cda1d8ab07027bb59a?s=128&d=identicon&r=PG&f=1", "display_name": "eike", "link": "https://stackoverflow.com/users/4253931/eike"}, "edited": false, "score": 0, "creation_date": 1570031575, "post_id": 58205021, "comment_id": 102788314, "body": "Member functions have an implicit <code>this</code> pointer as first parameter, so <code>OuterLogger::logFunction</code> does not have the same signature as your parameter."}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "reply_to_user": {"reputation": 929, "user_id": 4253931, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b751517b9a663cda1d8ab07027bb59a?s=128&d=identicon&r=PG&f=1", "display_name": "eike", "link": "https://stackoverflow.com/users/4253931/eike"}, "edited": false, "score": 0, "creation_date": 1570031669, "post_id": 58205021, "comment_id": 102788361, "body": "@eike That&#39;s not a problem, <code>std::function</code> handles that."}, {"owner": {"reputation": 86, "user_id": 8392921, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc869b7e6f90600fe95e50b5d7cf7037?s=128&d=identicon&r=PG&f=1", "display_name": "Astarixi", "link": "https://stackoverflow.com/users/8392921/astarixi"}, "edited": false, "score": 0, "creation_date": 1570032091, "post_id": 58205021, "comment_id": 102788567, "body": "Would <a href=\"https://stackoverflow.com/questions/7582546/using-generic-stdfunction-objects-with-member-functions-in-one-class\">this thread</a> help ?"}, {"owner": {"reputation": 929, "user_id": 4253931, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b751517b9a663cda1d8ab07027bb59a?s=128&d=identicon&r=PG&f=1", "display_name": "eike", "link": "https://stackoverflow.com/users/4253931/eike"}, "reply_to_user": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1570032451, "post_id": 58205021, "comment_id": 102788719, "body": "@MaxLanghof Not without an extra parameter or <code>std::bind</code> or similar"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 7815137, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-TZtNxIrEFv4/AAAAAAAAAAI/AAAAAAAAhII/0cZXBZCVD9c/photo.jpg?sz=128", "display_name": "Wesley Freeman", "link": "https://stackoverflow.com/users/7815137/wesley-freeman"}, "edited": false, "score": 0, "creation_date": 1570033612, "post_id": 58205219, "comment_id": 102789284, "body": "Thanks Victor. I tried this when I saw it elsewhere, but I get:  Error\tC2440\t&#39;initializing&#39;: cannot convert from &#39;std::_Binder&lt;std::_Unforced,void (__cdecl OuterLogger::* )(const std::string &amp;,int),OuterLogger &amp;&gt;&#39; to &#39;std::function&lt;void (const std::string &amp;,int)&gt;&#39;"}, {"owner": {"reputation": 574, "user_id": 8894112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/351ad98fc5792fc09c9b18cbdeef7fd6?s=128&d=identicon&r=PG&f=1", "display_name": "Victor Padureanu", "link": "https://stackoverflow.com/users/8894112/victor-padureanu"}, "reply_to_user": {"reputation": 1, "user_id": 7815137, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-TZtNxIrEFv4/AAAAAAAAAAI/AAAAAAAAhII/0cZXBZCVD9c/photo.jpg?sz=128", "display_name": "Wesley Freeman", "link": "https://stackoverflow.com/users/7815137/wesley-freeman"}, "edited": false, "score": 0, "creation_date": 1570091579, "post_id": 58205219, "comment_id": 102806722, "body": "My bad, I forgot about the placeholders."}, {"owner": {"reputation": 1, "user_id": 7815137, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-TZtNxIrEFv4/AAAAAAAAAAI/AAAAAAAAhII/0cZXBZCVD9c/photo.jpg?sz=128", "display_name": "Wesley Freeman", "link": "https://stackoverflow.com/users/7815137/wesley-freeman"}, "edited": false, "score": 0, "creation_date": 1570099134, "post_id": 58205219, "comment_id": 102810772, "body": "this worked:  <code>std::string str; &#47;&#47; placeholder to satisfy bind   int x; &#47;&#47; placeholder to satisfy bind   logFunctionPtr = std::bind(&amp;TestLogger::logFunction, this, str, x);</code>   and use as std::function. Or it appeared to. weirdly, it would be accepted by the function and be set as the var, but as soon as the setter went out of scope the var would return to null, which it never did before. I&#39;ve given up on this and made the bloody thing global static for now.(how tf do you do a new line in a comment?)"}, {"owner": {"reputation": 574, "user_id": 8894112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/351ad98fc5792fc09c9b18cbdeef7fd6?s=128&d=identicon&r=PG&f=1", "display_name": "Victor Padureanu", "link": "https://stackoverflow.com/users/8894112/victor-padureanu"}, "reply_to_user": {"reputation": 1, "user_id": 7815137, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-TZtNxIrEFv4/AAAAAAAAAAI/AAAAAAAAhII/0cZXBZCVD9c/photo.jpg?sz=128", "display_name": "Wesley Freeman", "link": "https://stackoverflow.com/users/7815137/wesley-freeman"}, "edited": false, "score": 0, "creation_date": 1570099382, "post_id": 58205219, "comment_id": 102810908, "body": "use *this instead of this. The problem with this is that it is only a pointer and when the class gets out of scope the entire structure collapses. Also make sure you have a copy constructor."}], "tags": [], "owner": {"reputation": 574, "user_id": 8894112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/351ad98fc5792fc09c9b18cbdeef7fd6?s=128&d=identicon&r=PG&f=1", "display_name": "Victor Padureanu", "link": "https://stackoverflow.com/users/8894112/victor-padureanu"}, "is_accepted": false, "score": 0, "last_activity_date": 1570091550, "last_edit_date": 1570091550, "creation_date": 1570032104, "answer_id": 58205219, "question_id": 58205021, "link": "https://stackoverflow.com/questions/58205021/problems-grasping-c-stdfunction-syntax/58205219#58205219", "title": "Problems grasping C++ std::function syntax", "body": "<p>Here is a sample of how a class can be bind to a function:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;functional&gt;\n\nclass A {\n    public:\n    int x = 1;\n    void func() {\n        std::cout &lt;&lt; x;\n    }\n    ~A() {\n        x = 2; // just to test the destructor\n    }\n};\n\nint main()\n{\n    std::function&lt;void(void)&gt; f;\n\n    {\n        A a;\n        f = std::bind(&amp;A::func, a); // do not bind &amp;a because it will be out of scope\n    }\n\n    f();\n\n    return 0;\n}\n</code></pre>\n\n<p>In your situation you can use:</p>\n\n<pre><code>std::function&lt;void(const std::string&amp; message, int level)&gt; logFunctionPtr = std::bind(&amp;OuterLogger::logFunction, outerLogger, std::placeholders::_1, std::placeholders::_2);\n</code></pre>\n\n<p>Instead of bind you can use a lambda function:</p>\n\n<pre><code>std::function&lt;void(const std::string&amp;, int)&gt; logFunctionPtr =\n    [outerLogger](const std::string&amp; message, int level) mutable {\n        outerLogger.logFunction(message, level);\n    };\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 7815137, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-TZtNxIrEFv4/AAAAAAAAAAI/AAAAAAAAhII/0cZXBZCVD9c/photo.jpg?sz=128", "display_name": "Wesley Freeman", "link": "https://stackoverflow.com/users/7815137/wesley-freeman"}, "is_accepted": false, "score": 0, "last_activity_date": 1570187141, "last_edit_date": 1570187141, "creation_date": 1570186132, "answer_id": 58234920, "question_id": 58205021, "link": "https://stackoverflow.com/questions/58205021/problems-grasping-c-stdfunction-syntax/58234920#58234920", "title": "Problems grasping C++ std::function syntax", "body": "<p>I tried several different variations on ways to pass the function pointer, none of which worked BUT it turns out there was nothing wrong with that code. </p>\n\n<p>When I used code of whatever form that successfully got accepted by the DLL logger, debug showed it would immediately go null afterwards. </p>\n\n<p>I am using VS' Test explorer. Turns out some tested process instances weren't shutting down properly so I had stuck testhost processes in the background, and I think the addresses were getting messed up somehow. </p>\n\n<p>The clues were the intermittent inability to run a test more than once, and very odd behaviour in debug mode - the execution marker going backwards and skipping around and producing mysterious WINRT_ASSERT(!is_sta()) exceptions. The answer is to run Process Explorer and check for stuck processes under VS. (bit annoying that VS couldn't tell me there was a problem with the process it was testing but nvm)</p>\n\n<p>My code uses the WinML lib. If I run in CPU mode it's fine. If I use GPU it gets stuck on shutdown, so I need to figure out why.</p>\n\n<p>Thanks for the help everyone. </p>\n\n<p>Edit: my initial assumption in my question was that it was a problem moving the code from non-object to object - this was totally wrong. The original non-object version of the code worked because it was in a demo client, a single executable console program calling the DLL, which was never impacted by the dodgy shutdown issue. In the unit test suite with multiple instances it became an issue.</p>\n"}], "owner": {"reputation": 1, "user_id": 7815137, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-TZtNxIrEFv4/AAAAAAAAAAI/AAAAAAAAhII/0cZXBZCVD9c/photo.jpg?sz=128", "display_name": "Wesley Freeman", "link": "https://stackoverflow.com/users/7815137/wesley-freeman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 75, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1570187141, "creation_date": 1570031341, "question_id": 58205021, "link": "https://stackoverflow.com/questions/58205021/problems-grasping-c-stdfunction-syntax", "title": "Problems grasping C++ std::function syntax", "body": "<p>I'm having trouble sending messages from a DLL's logging function to the client's logging function.\nI'm fine using a function pointer like this:</p>\n\n<p>DLL:</p>\n\n<pre><code>class InnerLogger\n{\npublic:\n    static std::function&lt;void(const std::string&amp; message, int level)&gt; loggerCallback;\n    static std::stringstream logMsg;\n    static int logSend(LogLevel logLevel);\n};\n\nvoid setLoggingFunction(const std::function&lt;void(const std::string&amp; message, int level)&gt;&amp; logFunction)\n{\n    InnerLogger::loggerCallback = logFunction;\n}\n\n</code></pre>\n\n<p>Client:</p>\n\n<pre><code>\nvoid outerLogger(const std::string&amp; message, int level)\n{\n  // display/save messages\n}\n\nmain()\n{\n    std::function&lt;void(const std::string&amp; message, int level)&gt; logFunctionPtr = outerLogger;\n    setLoggingFunction(logFunctionPtr);\n}\n</code></pre>\n\n<p>I can use InnerLogger::logSend and outerLogger picks it up.</p>\n\n<p>But I'm doing something wrong when the 'outer' logger is a class member:</p>\n\n<p>(DLL is unchanged)</p>\n\n<p>Client:</p>\n\n<pre><code>class OuterLogger\n{\npublic:\n    OuterLogger();\n    ~OuterLogger();\n\n    void logFunction(const std::string&amp; message, int level);\n};\n\nvoid OuterLogger::logFunction(const std::string&amp; message, int level)\n{\n    // display/save messages\n}\n\nmain()\n{\n    OuterLogger outerLogger;\n    std::function&lt;void(const std::string&amp; message, int level)&gt; logFunctionPtr = outerLogger.logFunction;\n    setLoggingFunction(logFunctionPtr);\n}\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 68, "user_id": 11708808, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-hKRi7PCXqYw/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfXjqgPbXwHlewfzrfTb9I2XdHDYw/photo.jpg?sz=128", "display_name": "JM C", "link": "https://stackoverflow.com/users/11708808/jm-c"}, "edited": false, "score": 1, "creation_date": 1570031057, "post_id": 58204921, "comment_id": 102788034, "body": "What have you tried so far? Can you share your current codes?"}, {"owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "edited": false, "score": 2, "creation_date": 1570031059, "post_id": 58204921, "comment_id": 102788035, "body": "Welcome to the Stack! The expectation on this site is that if you&#39;re looking for help with a problem, you need to show the effort you&#39;ve made to try to solve it yourself. I&#39;m going to vote to close the post, but if you edit in your own attempt to solve this problem, along with an explanation of what about your attempt isn&#39;t working, this question will be appropriate for the stack."}, {"owner": {"reputation": 25, "user_id": 12154743, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCrLTaqqihCC55jT5P897daOR6YqlQJ4D6nbxNf2g=k-s128", "display_name": "xdarkestshadow", "link": "https://stackoverflow.com/users/12154743/xdarkestshadow"}, "edited": false, "score": 0, "creation_date": 1570031257, "post_id": 58204921, "comment_id": 102788144, "body": "<code>#include &lt;iostream&gt; #include &lt;iomanip&gt; using namespace std; int main() { double P; cin&gt;&gt;P; cout&lt;&lt;fixed&lt;&lt;setprecision(0)&lt;&lt;P&lt;&lt;&quot;m,&quot;&lt;&lt;setprecision(2)&lt;&lt;P&lt;&lt;&quot;&zwnj;&#8203;cm&quot;; return 0;  }</code> i used this one, but i&#39;m not sure how to print &quot;30&quot; instead of 10.30"}, {"owner": {"reputation": 3198, "user_id": 6119582, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/274d37ce6d78ed9281f47a2712aaed48?s=128&d=identicon&r=PG&f=1", "display_name": "sweenish", "link": "https://stackoverflow.com/users/6119582/sweenish"}, "edited": false, "score": 2, "creation_date": 1570031386, "post_id": 58204921, "comment_id": 102788225, "body": "Put it as part of your question."}], "answers": [{"tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": true, "score": 0, "last_activity_date": 1570031779, "creation_date": 1570031779, "answer_id": 58205126, "question_id": 58204921, "link": "https://stackoverflow.com/questions/58204921/printing-only-decimal-places-of-a-number/58205126#58205126", "title": "Printing only decimal places of a number", "body": "<p>Given a <code>double</code> <code>P</code>, and assuming you wanted to round half-way any fractions of <code>cm</code>, this is one approach:</p>\n\n<pre><code>unsigned long cm = std::round(P * 100); // ToDo - check the possibility of overflow\nstd::cout &lt;&lt; cm / 100 &lt;&lt; \"m, \" &lt;&lt; cm % 100 &lt;&lt; \"cm\";\n</code></pre>\n\n<p>Where I'm using integer arithmetic to extract the <code>m</code>, and modulo arithmetic to extract the <code>cm</code>. Enhance to handle negative <code>P</code> as required.</p>\n"}], "owner": {"reputation": 25, "user_id": 12154743, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCrLTaqqihCC55jT5P897daOR6YqlQJ4D6nbxNf2g=k-s128", "display_name": "xdarkestshadow", "link": "https://stackoverflow.com/users/12154743/xdarkestshadow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 58205126, "answer_count": 1, "score": -1, "last_activity_date": 1570070659, "creation_date": 1570030942, "last_edit_date": 1570070659, "question_id": 58204921, "link": "https://stackoverflow.com/questions/58204921/printing-only-decimal-places-of-a-number", "title": "Printing only decimal places of a number", "body": "<p>I was wondering how can you only print the decimal places of the number?\nI need to print 10.30 as 10m,30cm and I have no idea how to do that.\nI have tried to google the solution, but didn't find anything helpful.</p>\n\n<pre><code>#include &lt;iostream&gt; \n#include &lt;iomanip&gt; \nusing namespace std; \nint main() { \n    double P;\n    cin &gt;&gt; P;\n    cout &lt;&lt; fixed &lt;&lt; setprecision(0) &lt;&lt; P &lt;&lt; \"m,\" &lt;&lt; setprecision(2) &lt;&lt; P &lt;&lt; \"cm\";\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["python", "c++", "recursion", "conditional-statements"], "comments": [{"owner": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "edited": false, "score": 1, "creation_date": 1570030724, "post_id": 58204816, "comment_id": 102787855, "body": "For example, <code>(0 or &quot;hello&quot;) == &quot;hello&quot;</code>, <code>([5] or 4) == [5]</code>"}, {"owner": {"reputation": 1543, "user_id": 4844311, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/332eea05adde1e0fd9e1ece954f61b41?s=128&d=identicon&r=PG&f=1", "display_name": "berkelem", "link": "https://stackoverflow.com/users/4844311/berkelem"}, "edited": false, "score": 1, "creation_date": 1570032081, "post_id": 58204816, "comment_id": 102788558, "body": "Note that <code>bool(None) == False</code>. If the function returns <code>None</code> it evaluates to boolean <code>False</code>."}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 0, "creation_date": 1570032102, "post_id": 58204816, "comment_id": 102788571, "body": "1. The result is always <code>None</code>, which is treated as <code>False</code>. 2. Yes, but it never short circuits, <code>or</code> short circuits for <code>True</code>."}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 1, "creation_date": 1570032431, "post_id": 58204816, "comment_id": 102788712, "body": "I&#39;d reject <code>return self.helper(root.left, target - root.val, res, temp+[root.val]) or self.helper(root.right, target - root.val, res, temp+[root.val])</code> and ask for <code>self.helper(root.left, target - root.val, res, temp+[root.val])</code> newline <code>self.helper(root.right, target - root.val, res, temp+[root.val])</code>"}], "owner": {"reputation": 615, "user_id": 6080303, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-OvxS_w7Q230/AAAAAAAAAAI/AAAAAAAAABk/zFHgR52lEAk/photo.jpg?sz=128", "display_name": "JP Zhang", "link": "https://stackoverflow.com/users/6080303/jp-zhang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 45, "favorite_count": 0, "closed_date": 1570030716, "answer_count": 0, "score": 0, "last_activity_date": 1570030612, "creation_date": 1570030612, "question_id": 58204816, "link": "https://stackoverflow.com/questions/58204816/use-of-or-for-return-in-python", "closed_reason": "Duplicate", "title": "Use of &#39;or&#39; for return in Python", "body": "<p>In LeetCode problem <a href=\"https://leetcode.com/problems/path-sum-ii/\" rel=\"nofollow noreferrer\"><code>Path Sum 2</code></a>, one Python solution writes:</p>\n\n<pre><code>class Solution(object):\n    def pathSum(self, root, sum):\n        \"\"\"\n        :type root: TreeNode\n        :type sum: int\n        :rtype: List[List[int]]\n        \"\"\"\n        res = []\n        self.helper(root, sum, res, [])\n        return res\n    def helper(self, root, target, res, temp):\n        if not root:\n            return\n        if not root.left and not root.right and root.val == target:\n            res.append(list(temp+[root.val]))\n        return self.helper(root.left, target - root.val, res, temp+[root.val]) or self.helper(root.right, target - root.val, res, temp+[root.val])\n</code></pre>\n\n<p>Clearly this answer is not wrong. But what puzzles me is the usage of <code>or</code> in the last line. The function is not a Boolean type. Is it alright to use <code>or</code> here?</p>\n\n<p>Also one C++ answer is here:</p>\n\n<pre><code>class Solution {\npublic:\n    vector&lt;vector&lt;int&gt; &gt; pathSum(TreeNode *root, int sum) {\n        vector&lt;vector&lt;int&gt;&gt; res;\n        vector&lt;int&gt; out;\n        helper(root, sum, out, res);\n        return res;\n    }\n    void helper(TreeNode* node, int sum, vector&lt;int&gt;&amp; out, vector&lt;vector&lt;int&gt;&gt;&amp; res) {\n        if (!node) return;\n        out.push_back(node-&gt;val);\n        if (sum == node-&gt;val &amp;&amp; !node-&gt;left &amp;&amp; !node-&gt;right) {\n            res.push_back(out);\n        }\n        helper(node-&gt;left, sum - node-&gt;val, out, res);\n        helper(node-&gt;right, sum - node-&gt;val, out, res);\n        out.pop_back();\n    }\n};\n</code></pre>\n\n<p>Notice <code>helper</code> function is invoked twice in its inner function body.</p>\n\n<p><strong>So to sum up my questions:</strong>  </p>\n\n<ol>\n<li>the Python function <code>helper</code> doesn't appear to be a Boolean type. How can it can be used with <code>or</code> keyword?</li>\n<li>Will <code>or</code> cause the <code>helper</code> function to be short-circuited thus resulting a different behavior as C++ version does. If not, how can it be?</li>\n</ol>\n"}, {"tags": ["c++", "stdvector", "move-semantics"], "comments": [{"owner": {"reputation": 10593, "user_id": 4621513, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/uCfJK.png?s=128&g=1", "display_name": "mkrieger1", "link": "https://stackoverflow.com/users/4621513/mkrieger1"}, "edited": false, "score": 4, "creation_date": 1570030646, "post_id": 58204766, "comment_id": 102787809, "body": "What is your goal? Why not keep the vector and use its <code>.data()</code>?"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1570031071, "post_id": 58204766, "comment_id": 102788040, "body": "You can use a <code>vector&lt;T&gt;</code> on legacy functions that take a <code>T*</code>.  As stated, just use the <code>data()</code> member.  There is no need to shuffle between vector and a regular array, if this is what you were intending to do."}, {"owner": {"reputation": 153, "user_id": 9503562, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a689650550bd0f11c22c95a462bd34de?s=128&d=identicon&r=PG&f=1", "display_name": "Bobo Feugo", "link": "https://stackoverflow.com/users/9503562/bobo-feugo"}, "edited": false, "score": 0, "creation_date": 1570031104, "post_id": 58204766, "comment_id": 102788051, "body": "Well, I actually can stick with std::vector, but still need to use some old code that consider the data to be in raw array. And I really don&#39;t want to edit or rewrite the old code"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 2, "creation_date": 1570031175, "post_id": 58204766, "comment_id": 102788091, "body": "@BoboFeugo -- But all you need is to pass <code>data()</code> to the top-level &quot;old code&quot; function, and the rest is all an array, the old code has no idea the data was being managed by a vector.  Have you ever used <code>data()</code>?"}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1570031228, "post_id": 58204766, "comment_id": 102788126, "body": "@PaulMcKenzie That only works if the &quot;old code&quot; doesn&#39;t want to assume ownership."}, {"owner": {"reputation": 153, "user_id": 9503562, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a689650550bd0f11c22c95a462bd34de?s=128&d=identicon&r=PG&f=1", "display_name": "Bobo Feugo", "link": "https://stackoverflow.com/users/9503562/bobo-feugo"}, "edited": false, "score": 0, "creation_date": 1570031323, "post_id": 58204766, "comment_id": 102788182, "body": "As I know <code>data()</code> will return a pointer to const data, but I need to modify the data"}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 1, "creation_date": 1570031385, "post_id": 58204766, "comment_id": 102788221, "body": "@BoboFeugo <a href=\"https://en.cppreference.com/w/cpp/container/vector/data\" rel=\"nofollow noreferrer\">only from a <code>const vector</code></a>. From a mutable vector you get a pointer-to-mutable"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "reply_to_user": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1570031412, "post_id": 58204766, "comment_id": 102788234, "body": "@MaxLanghof The only thing I can think of that the old code would have done with ownership that would totally mess this up is to call <code>delete[]</code> on the pointer (which is a bad design to being with)."}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1570031470, "post_id": 58204766, "comment_id": 102788266, "body": "@PaulMcKenzie or <code>free()</code>, or <code>delete</code>, or <code>lib_MyBadOlLib_Free()</code>"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1570031502, "post_id": 58204766, "comment_id": 102788285, "body": "@BoboFeugo You are thinking of <code>std::string::c_str()</code>, where the return value is <code>const</code>.  Not so for a non-const vector."}, {"owner": {"reputation": 735, "user_id": 207044, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f20a5d1a1ba2f9ccf8d498ba095f9531?s=128&d=identicon&r=PG", "display_name": "taranaki", "link": "https://stackoverflow.com/users/207044/taranaki"}, "edited": false, "score": 1, "creation_date": 1595996295, "post_id": 58204766, "comment_id": 111663447, "body": "I want to do exactly this because I am using a library (lodepng) that reads a file into a vector. I want to return a unique_ptr that wraps the vector&#39;s data, which could be very large (or I want to repeat the operation many times; either way I don&#39;t want to allocate, read, then copy, nor do I want to return the vector itself, though this is likely what I&#39;ll settle on)."}], "answers": [{"comments": [{"owner": {"reputation": 153, "user_id": 9503562, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a689650550bd0f11c22c95a462bd34de?s=128&d=identicon&r=PG&f=1", "display_name": "Bobo Feugo", "link": "https://stackoverflow.com/users/9503562/bobo-feugo"}, "edited": false, "score": 0, "creation_date": 1570030680, "post_id": 58204792, "comment_id": 102787827, "body": "So how do you use std::move for this purpose?"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 153, "user_id": 9503562, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a689650550bd0f11c22c95a462bd34de?s=128&d=identicon&r=PG&f=1", "display_name": "Bobo Feugo", "link": "https://stackoverflow.com/users/9503562/bobo-feugo"}, "edited": false, "score": 3, "creation_date": 1570030699, "post_id": 58204792, "comment_id": 102787832, "body": "<a href=\"https://en.cppreference.com/w/cpp/algorithm/move\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/algorithm/move</a> Though, since you only have floats, &quot;move&quot; will really just be a copy."}, {"owner": {"reputation": 153, "user_id": 9503562, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a689650550bd0f11c22c95a462bd34de?s=128&d=identicon&r=PG&f=1", "display_name": "Bobo Feugo", "link": "https://stackoverflow.com/users/9503562/bobo-feugo"}, "edited": false, "score": 0, "creation_date": 1570106253, "post_id": 58204792, "comment_id": 102814394, "body": "actually the <code>move</code> I asked for is not the one from the standard algorithm, instead i wanted something like <code>move-semantics</code> or a shallow copy. But as the most comments stated that it&#39;s not possible, i may have to change my implementation!"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 153, "user_id": 9503562, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a689650550bd0f11c22c95a462bd34de?s=128&d=identicon&r=PG&f=1", "display_name": "Bobo Feugo", "link": "https://stackoverflow.com/users/9503562/bobo-feugo"}, "edited": false, "score": 0, "creation_date": 1570107211, "post_id": 58204792, "comment_id": 102814953, "body": "@Bobo Indeed, you&#39;re asking how to move (or &quot;steal&quot;) the vector&#39;s internal buffer - you can&#39;t do that. Well, you can steal it into another vector, but that doesn&#39;t help you ;) The <code>std::move</code> I&#39;m talking about is for the &quot;individual&quot; elements."}, {"owner": {"user_type": "does_not_exist", "display_name": "user13540365"}, "edited": false, "score": 0, "creation_date": 1593429609, "post_id": 58204792, "comment_id": 110768935, "body": "@LightnessRacesinOrbit why not the other way around, where you have the vector steal from a pre-existing allocation? This answer is pretty defeatist"}], "tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": true, "score": 7, "last_activity_date": 1570030756, "last_edit_date": 1570030756, "creation_date": 1570030536, "answer_id": 58204792, "question_id": 58204766, "link": "https://stackoverflow.com/questions/58204766/how-to-move-a-stdvector-into-a-raw-array-in-c/58204792#58204792", "title": "How to move a std::vector into a raw array in C++", "body": "<p><strong>You can't.</strong></p>\n\n<p>A vector owns its buffer. You cannot steal it.</p>\n\n<p>You will have to copy/move the elements individually, optionally using a helper algorithm that does the iteration for you (<code>std::copy</code>/<code>std::move</code>).</p>\n\n<p>(Also note that, since your element type is just <code>float</code>, a move here <em>is</em> a copy.)</p>\n\n<p>(Also note that this <code>std::move</code>, the algorithm, is not the same as <code>std::move</code>, the rvalue cast.)</p>\n\n<hr>\n\n<p>Consider whether you <em>really</em> need to do this. You can treat the vector's data as an array using <code>vec.data()</code> whenever you need to, as long as you keep the vector alive. Surely that's better than sacrificing RAII?</p>\n"}, {"tags": [], "owner": {"reputation": 26, "user_id": 3265063, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ae32369db284034f0644b12e4222f97?s=128&d=identicon&r=PG&f=1", "display_name": "prenex", "link": "https://stackoverflow.com/users/3265063/prenex"}, "is_accepted": false, "score": 0, "last_activity_date": 1593428927, "creation_date": 1593428927, "answer_id": 62636808, "question_id": 58204766, "link": "https://stackoverflow.com/questions/58204766/how-to-move-a-stdvector-into-a-raw-array-in-c/62636808#62636808", "title": "How to move a std::vector into a raw array in C++", "body": "<p>This would have been handy for me for stealing a &quot;typed&quot; vector contents into an &quot;untyped&quot; vector.</p>\n<p>This is what I want to do:</p>\n<pre><code>std::vector&lt;uint8_t&gt;\u00adone;\nstd::vector&lt;V&gt; other = std::move(one);\n</code></pre>\n<p>When I know that the contents are exactly what I expect (there is a runtime type info field)</p>\n<p>I would use this to do 'move semantics' between an untyped\nand a typed class where part of the underlying representation\nis in a vector - just in the typed case it is vector of Vs.</p>\n<p>Think of it as a different &quot;view&quot; of the data. In general cases the data\nis untyped as there are special edge-cases, but after handling them via\nbranching it would be handy to handle the &quot;normal&quot; cases type safe ways..</p>\n<p>I see I can implement this behaviour if I throw out std::vector and do\nmy implementation using direct pointer arithmetic as then I can access\nthat in move construction, but I would love to not give up on vectors...</p>\n<p>Just wanted to add this to show what kind of rationale might be behind\nthese kind of questions and I think sometimes it is valid</p>\n"}], "owner": {"reputation": 153, "user_id": 9503562, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a689650550bd0f11c22c95a462bd34de?s=128&d=identicon&r=PG&f=1", "display_name": "Bobo Feugo", "link": "https://stackoverflow.com/users/9503562/bobo-feugo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 812, "favorite_count": 0, "accepted_answer_id": 58204792, "answer_count": 2, "score": 7, "last_activity_date": 1593429487, "creation_date": 1570030435, "last_edit_date": 1570037563, "question_id": 58204766, "link": "https://stackoverflow.com/questions/58204766/how-to-move-a-stdvector-into-a-raw-array-in-c", "title": "How to move a std::vector into a raw array in C++", "body": "<p>How can I move the contents of <code>std::vector</code> into an array safely without copying or iterating over all elements?</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>void someFunc(float* arr, std::size_t&amp; size)\n{\n   std::vector&lt;float&gt; vec(5, 1.5f);\n   // do something with the data\n\n   size = vec.size();\n   arr = vec.data(); // this doesn't work, as at the end of the function the data in std::vector will be deallocated\n\n}\n\nmain()\n{\n   float* arr;\n   std::size_t size{0};\n\n   someFunc(arr, size);\n\n   // do something with the data\n   delete [] arr;\n}\n\n</code></pre>\n\n<p>How can I assign my array with the data in <code>std::vector</code> and making sure that deallocation will not be called on <code>std::vector</code>?  Or maybe any other ideas to go around this?</p>\n"}, {"tags": ["c++", "multithreading", "asynchronous", "c++17"], "comments": [{"owner": {"reputation": 86654, "user_id": 102441, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cf1b41a0f134b54597bf8a618be7880f?s=128&d=identicon&r=PG", "display_name": "Eric", "link": "https://stackoverflow.com/users/102441/eric"}, "edited": false, "score": 0, "creation_date": 1570197020, "post_id": 58204650, "comment_id": 102848254, "body": "Re attempt 1: <i>&quot;but I have been worried that there&#39;s nothing to stop this being destroyed&quot;</i> - can you just add a destructor that waits on the future?"}, {"owner": {"reputation": 61, "user_id": 12106769, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c57f699e2169bc4af0d293ab05022ffe?s=128&d=identicon&r=PG&f=1", "display_name": "WillB", "link": "https://stackoverflow.com/users/12106769/willb"}, "reply_to_user": {"reputation": 86654, "user_id": 102441, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cf1b41a0f134b54597bf8a618be7880f?s=128&d=identicon&r=PG", "display_name": "Eric", "link": "https://stackoverflow.com/users/102441/eric"}, "edited": false, "score": 0, "creation_date": 1570438121, "post_id": 58204650, "comment_id": 102899841, "body": "A good suggestion, but when I tried this, the async thread would hang at the <code>shared_from_this</code> call. In addition, if I wanted to use this logic as part of a base class, where the main async work is done in a virtual method, having the wait in the base destructor will be too late - I would have ensure all derived methods call the wait in their destructors"}, {"owner": {"reputation": 86654, "user_id": 102441, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cf1b41a0f134b54597bf8a618be7880f?s=128&d=identicon&r=PG", "display_name": "Eric", "link": "https://stackoverflow.com/users/102441/eric"}, "edited": false, "score": 0, "creation_date": 1570440953, "post_id": 58204650, "comment_id": 102901196, "body": "I think that problem might vanish if you use composition instead of inheritance"}, {"owner": {"reputation": 2298, "user_id": 7699037, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ae22aa9776941949ddf401f3eb7fc318?s=128&d=identicon&r=PG&f=1", "display_name": "Mike van Dyke", "link": "https://stackoverflow.com/users/7699037/mike-van-dyke"}, "edited": false, "score": 0, "creation_date": 1570444452, "post_id": 58204650, "comment_id": 102902852, "body": "Why are you using <code>this-&gt;shared_from_this()</code> in the async call instead of <code>this</code> in the first place? You will not run into a lifetime problem of the object, because you call <code>get</code> or <code>wait</code> before destruction"}, {"owner": {"reputation": 61, "user_id": 12106769, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c57f699e2169bc4af0d293ab05022ffe?s=128&d=identicon&r=PG&f=1", "display_name": "WillB", "link": "https://stackoverflow.com/users/12106769/willb"}, "reply_to_user": {"reputation": 2298, "user_id": 7699037, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ae22aa9776941949ddf401f3eb7fc318?s=128&d=identicon&r=PG&f=1", "display_name": "Mike van Dyke", "link": "https://stackoverflow.com/users/7699037/mike-van-dyke"}, "edited": false, "score": 0, "creation_date": 1570696721, "post_id": 58204650, "comment_id": 102996974, "body": "@MikevanDyke - I wanted the behaviour to be that I couldn&#39;t guarantee that get/wait would be called ... I&#39;ll clarify this point in the original question. Thanks"}], "answers": [{"tags": [], "owner": {"reputation": 61, "user_id": 12106769, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c57f699e2169bc4af0d293ab05022ffe?s=128&d=identicon&r=PG&f=1", "display_name": "WillB", "link": "https://stackoverflow.com/users/12106769/willb"}, "is_accepted": false, "score": 0, "last_activity_date": 1570610679, "last_edit_date": 1570610679, "creation_date": 1570438726, "answer_id": 58266332, "question_id": 58204650, "link": "https://stackoverflow.com/questions/58204650/pending-stdfuture-get-of-stdasync-with-shared-from-this-argument-blocks-dest/58266332#58266332", "title": "pending std::future get of std::async with shared_from_this argument blocks destruction of this", "body": "<p>Solution attempt 2 I found in some scenarios would generate a deadlock exception. This appears to come from the async thread simultaneously trying to destroy the future (by destroying the instance of the class) while also trying to set the value of the future. </p>\n\n<hr>\n\n<p><em>Solution attempt 3</em> - this seems to pass all my tests so far:</p>\n\n<pre><code>myself = this-&gt;shared_from_this();\nstd::promise&lt;void&gt; p;\nfuture = p.get_future();\nstd::thread([this](std::promise&lt;void&gt;&amp;&amp; p) {\n            p.set_value_at_thread_exit( myself-&gt;method() );\n            myself.reset();\n}, std::move(p)).detach();\n</code></pre>\n\n<p>The logic here is that it is safe to destroy <code>myself</code> (by resetting the shared pointer) once the method call is finished - its safe to delete the future of a promise before the promise has set its value. No deadlock occurs because the future is destroyed before the promise tries to transfer a value. </p>\n\n<p>Any comments on this solution or potentially neater alternatives would be welcome. In particular it would be good to know if there are issues I've overlooked.</p>\n"}, {"tags": [], "owner": {"reputation": 2298, "user_id": 7699037, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ae22aa9776941949ddf401f3eb7fc318?s=128&d=identicon&r=PG&f=1", "display_name": "Mike van Dyke", "link": "https://stackoverflow.com/users/7699037/mike-van-dyke"}, "is_accepted": false, "score": 0, "last_activity_date": 1570707840, "last_edit_date": 1570707840, "creation_date": 1570705786, "answer_id": 58321530, "question_id": 58204650, "link": "https://stackoverflow.com/questions/58204650/pending-stdfuture-get-of-stdasync-with-shared-from-this-argument-blocks-dest/58321530#58321530", "title": "pending std::future get of std::async with shared_from_this argument blocks destruction of this", "body": "<p>I would suggest one of the following solutions:</p>\n\n<p>Solution 1, Use <code>std::async</code> with <code>this</code> instead of <code>shared_from_this</code>: </p>\n\n<pre><code>class MyClass /*: public std::enable_shared_from_this&lt;MyClass&gt; not needed here */ {\npublic:\n    ~MyClass() { std::cout &lt;&lt; \"Destructor called\" &lt;&lt; std::endl; }\n\n    void start() {\n        future = std::async(std::launch::async, &amp;MyClass::method, this);\n    }\n    void stop() { m_stop = true; }\n\n    void method() {\n        std::cout &lt;&lt; \"running\" &lt;&lt; std::endl;\n        do {\n            std::this_thread::sleep_for(std::chrono::seconds(1));\n        } while(m_stop == false);\n        std::cout &lt;&lt; \"stopped\" &lt;&lt; std::endl;\n        return;\n    }\n\n    std::atomic&lt;bool&gt; m_stop = false;\n    std::future&lt;void&gt; future; // IMPORTANT: future constructed last, destroyed first\n};\n</code></pre>\n\n<p>This solution would work even if not calling <code>wait</code> or <code>get</code> on the future because the <a href=\"https://stackoverflow.com/q/23455104/7699037\">destructor of a future returned by <code>std::async</code> blocks</a> until the termination of the task. It is important to construct the future last, so that it is destroyed (and thus blocks) before all other members are destroyed. If this is too risky, use solution 3 instead.</p>\n\n<hr>\n\n<p>Solution 2, Use a detached thread like you did:</p>\n\n<pre><code> void start() {\n    std::promise&lt;void&gt; p;\n    future = p.get_future();\n    std::thread(\n        [m = this-&gt;shared_from_this()](std::promise&lt;void&gt;&amp;&amp; p) {\n          m-&gt;method();\n          p.set_value();\n        },\n        std::move(p))\n        .detach();\n  }\n</code></pre>\n\n<p>One drawback of this solution: If you have many instances of <code>MyClass</code> you will create a lot of threads maybe resulting in contention. So a better option would be to use a thread pool instead of a single thread per object.</p>\n\n<hr>\n\n<p>Solution 3, Separate the executable from the task class e.g:</p>\n\n<pre><code>class ExeClass {\n public:\n  ~ExeClass() { std::cout &lt;&lt; \"Destructor of ExeClass\" &lt;&lt; std::endl; }\n  void method() {\n    std::cout &lt;&lt; \"running\" &lt;&lt; std::endl;\n    do {\n      std::this_thread::sleep_for(std::chrono::seconds(1));\n    } while (m_stop == false);\n    std::cout &lt;&lt; \"stopped\" &lt;&lt; std::endl;\n    return;\n  }\n\n  std::atomic&lt;bool&gt; m_stop = false;\n};\n\nclass MyClass {\n public:\n  ~MyClass() { std::cout &lt;&lt; \"Destructor of MyClass\" &lt;&lt; std::endl; }\n\n  void start() {\n    future = std::async(std::launch::async, &amp;ExeClass::method, exe);\n  }\n  void stop() { exe-&gt;m_stop = true; }\n\n  std::shared_ptr&lt;ExeClass&gt; exe = std::make_shared&lt;ExeClass&gt;();\n  std::future&lt;void&gt; future;\n};\n</code></pre>\n\n<p>Like solution 1 this would block when the future is destroyed, however you don't need to take care of the order of construction and destruction. IMO this is the cleanest option.</p>\n"}], "owner": {"reputation": 61, "user_id": 12106769, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c57f699e2169bc4af0d293ab05022ffe?s=128&d=identicon&r=PG&f=1", "display_name": "WillB", "link": "https://stackoverflow.com/users/12106769/willb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 218, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1580696987, "creation_date": 1570030050, "last_edit_date": 1580696987, "question_id": 58204650, "link": "https://stackoverflow.com/questions/58204650/pending-stdfuture-get-of-stdasync-with-shared-from-this-argument-blocks-dest", "title": "pending std::future get of std::async with shared_from_this argument blocks destruction of this", "body": "<p>I wanted to create a class that would represent a task that can be started running asynchronously and will run continuously (effectively in a detached thread) until a stop signal is received. The usage for the sake of this question would look like this:</p>\n\n<pre><code>auto task = std::make_shared&lt;Task&gt;();\ntask-&gt;start(); // starts the task running asynchronously\n... after some time passes ...\ntask-&gt;stop(); // signals to stop the task\ntask-&gt;future.get(); // waits for task to stop running and return its result\n</code></pre>\n\n<p>However, a key feature of this <code>Task</code> class is that I cannot guarantee that the future will be waited/got... i.e. the last line may not get called before the shared pointer is destroyed.</p>\n\n<p>A stripped-down toy version of the class I wrote is as follows (please ignore that everything is in public, this is just for this example's simplicity):</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>class MyClass : public std::enable_shared_from_this&lt;MyClass&gt; {\npublic:\n    ~MyClass() { std::cout &lt;&lt; \"Destructor called\" &lt;&lt; std::endl; }\n\n    void start() {\n        future = std::async(std::launch::async, &amp;MyClass::method, this-&gt;shared_from_this());\n    }\n    void stop() { m_stop = true; }\n\n    void method() {\n        std::cout &lt;&lt; \"running\" &lt;&lt; std::endl;\n        do {\n            std::this_thread::sleep_for(std::chrono::seconds(1));\n        } while(m_stop == false);\n        std::cout &lt;&lt; \"stopped\" &lt;&lt; std::endl;\n        return;\n    }\n    std::future&lt;void&gt; future;\n    std::atomic&lt;bool&gt; m_stop = false;\n\n};\n</code></pre>\n\n<p>However, I discovered an undesirable feature of this code: if instead of <code>get</code> on the future, I just <code>wait</code> (e.g. if I don't care about the result of <code>method</code>, which in this case is a void anyway), then when <code>task</code> is deleted, the instance doesn't get destroyed.</p>\n\n<p>I.e. doing <code>task-&gt;future.get()</code> gives:</p>\n\n<pre><code>running\nstopped\nDestructor called\n</code></pre>\n\n<p>But <code>task-&gt;future.wait()</code> gives:</p>\n\n<pre><code>running\nstopped\n</code></pre>\n\n<p>From reading answer to <a href=\"https://stackoverflow.com/questions/49505280/what-is-the-lifetime-of-the-arguments-of-stdasync\">What is the lifetime of the arguments of std::async?</a> I believe the problem here is the <code>this-&gt;shared_from_this()</code> argument to <code>std::async</code> won't be destroyed until the future from the async has been made invalid (through <code>get</code> or destruction or otherwise). So this shared_ptr is keeping the class instance alive.</p>\n\n<hr>\n\n<p><em>Solution Attempt 1:</em></p>\n\n<p>Replace the line in <code>start</code> with:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>future  = std::async(std::launch::async, [this]() {\n            return this-&gt;shared_from_this()-&gt;method();\n        });\n</code></pre>\n\n<p>This ensures shared_ptr it creates is destroyed when the method completes, but I have been worried that there's nothing to stop <code>this</code> being destroyed between the time of it being captured by the lambda capture (which happens at this line, correct?) and the time the lambda is executed in the new thread. Is this a real possibility?</p>\n\n<hr>\n\n<p><em>Solution Attempt 2:</em></p>\n\n<p>To protect the <code>this</code> (<code>task</code>) being destroyed before the lambda function runs, I add another member variable <code>std::shared_ptr&lt;MyClass&gt; myself</code> then my start method can look like this:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>myself = this-&gt;shared_from_this();\nfuture  = std::async(std::launch::async, [this]() {\n            auto my_ptr = std::move(this-&gt;myself);\n            return myself-&gt;method();\n});\n</code></pre>\n\n<p>Here the idea is that <code>myself</code> will ensure that if I delete the <code>task</code> shared_ptr, I don't destroy the class. Then inside the lambda, the shared_ptr is transferred to the local <code>my_ptr</code> variable, which is destroyed on exit.</p>\n\n<hr>\n\n<p>Are there issues with this solution, or have I overlooked a much cleaner way of achieving the sort functionality I'm after?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["c++", "codec", "opus"], "answers": [{"tags": [], "owner": {"reputation": 61, "user_id": 11273314, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-60GVeKfvZU0/AAAAAAAAAAI/AAAAAAAAADg/pFD9-sbOKd8/photo.jpg?sz=128", "display_name": "Mihail Marinov", "link": "https://stackoverflow.com/users/11273314/mihail-marinov"}, "is_accepted": true, "score": 1, "last_activity_date": 1570727366, "creation_date": 1570727366, "answer_id": 58327937, "question_id": 58204592, "link": "https://stackoverflow.com/questions/58204592/opus-encode-decode-no-error-but-not-the-same-value/58327937#58327937", "title": "Opus encode &amp; decode no error but not the same value", "body": "<p>We don't see how you initialize your encoder and decoder so we don't know what their sample rate, complexity or number of channels is. No matter how you have initialized them you are still going to have the following problems: </p>\n\n<p>First Opus encoding doesn't support arbitrary frame sizes but instead 2.5ms, 5ms, 10ms, 20, 40ms or 60ms <a href=\"https://tools.ietf.org/html/rfc6716\" rel=\"nofollow noreferrer\">RFC 6716 - Definition of the Opus Audio Codec</a> relevant section 2.1.4. Moreover opus supports only 8kHz, 12kHz, 16kHz, 24kHz or 48kHz sample rates. No matter which of those you have chosen your array of 10 elements doesn't correspond to any of the supported frame sizes. </p>\n\n<p>Secondly Opus codec is a lossy audio codec. This means that after you encode any signal you will never (probably except some edge cases) be able to reconstruct the original signal after decoding the encoded opus frame. The best way to test if your encoder and decoder work is with a real audio sample. Opus encoding preserves the perceptual quality of the audio files. Therefore if you try to test it with arbitrary data you might not get the expected results back even if you implemented the encoding and decoding functions correctly. </p>\n\n<p>What you can easily do is to make a sine function of 2000Hz(there are multiple examples on the internet) for 20ms. This means 160 array elements at a sample rate of 8000Hz if you wish to use 8kHz. A sine wave of 2kHz is within the human hearing range so the encoder is going to preserve it. Then decode it back and see whether the elements of the input and output array are similar as we've already established that it is unlikely that they are the same. </p>\n\n<p>I am not good in C++ so I can't help you with code examples but the problems above hold true no matter what language is used. </p>\n"}], "owner": {"reputation": 43, "user_id": 10054634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e45a251d0dd6581a6bf5343307855b7?s=128&d=identicon&r=PG&f=1", "display_name": "Fantomiald", "link": "https://stackoverflow.com/users/10054634/fantomiald"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 416, "favorite_count": 0, "accepted_answer_id": 58327937, "answer_count": 1, "score": 0, "last_activity_date": 1570727366, "creation_date": 1570029879, "question_id": 58204592, "link": "https://stackoverflow.com/questions/58204592/opus-encode-decode-no-error-but-not-the-same-value", "title": "Opus encode &amp; decode no error but not the same value", "body": "<p>I have to use Opus Codec to encode &amp; decode audio datas in C++ and I have to encapsulate the functions.\nSo I try to send a floats array to try to encode it and I decode the result of the Opus encoding function. Unfortunately, the result is not the same and I get a table that contains no value from the initial table.</p>\n\n<p>Here is my code.</p>\n\n<p>Encapsulation:</p>\n\n<pre><code>std::vector&lt;float&gt; codec::OpusPlugin::decode(packet_t &amp;packet) {\n    std::vector&lt;float&gt; out(BUFFER_SIZE * NB_CHANNELS);\n    int ret = 0;\n\n    if (!this-&gt;decoder)\n        throw Exception(\"Can't decode since there is no decoder.\");\n    ret = opus_decode_float(this-&gt;decoder, packet.data.data(), packet.size, reinterpret_cast&lt;float*&gt;(out.data()), FRAME_SIZE, 0);\n    if (ret &lt; 0)\n        throw Exception(\"Error while decoding compressed data.\");\n    return out;\n}\n\n// ENCODER\n\npacket_t codec::OpusPlugin::encode(std::vector&lt;float&gt; to_encode) {\n    std::vector&lt;unsigned char&gt; data(BUFFER_SIZE * NB_CHANNELS * 2);\n    packet_t packet;\n    int ret = 0;\n\n    if (!this-&gt;encoder)\n        throw Exception(\"Can't encode since there is no decoder.\");\n    ret = opus_encode_float(this-&gt;encoder, reinterpret_cast&lt;float const*&gt;(to_encode.data()), FRAME_SIZE, data.data(), data.size());\n    if (ret &lt; 0)\n        throw Exception(\"Error while encoding data.\");\n    packet.size = ret;\n    packet.data = data;\n    return packet;\n}\n</code></pre>\n\n<p>And there is the call of the functions:</p>\n\n<pre><code> packet_t packet;\n    std::vector&lt;float&gt; floats = {0.23, 0, -0.312, 0.401230, 0.1234, -0.1543};\n    packet = CodecPlugin-&gt;encode(floats);\n    std::cout &lt;&lt; \"packet size: \" &lt;&lt; packet.size &lt;&lt; std::endl;\n    std::vector&lt;float&gt; output = CodecPlugin-&gt;decode(packet);\n    for (int i = 0; i &lt; 10; i++) {\n        std::cout &lt;&lt; output.data()[i] &lt;&lt; \" \";\n    }\n</code></pre>\n\n<p>Here is the packet_t structure, where I stock the return value of encode and the unsigned char array (encoded value)</p>\n\n<pre><code>typedef struct packet_s {\n    int size;\n    std::vector&lt;unsigned char&gt; data;\n} packet_t;\n</code></pre>\n\n<p>The output of the program is\n*-1.44487e-15 9.3872e-16 -1.42993e-14 7.31834e-15 -5.09662e-14 1.53629e-14 -8.36825e-14 3.9531e-14 -8.72754e-14 1.0791e-13  which is not the array I initialize at the beginning.</p>\n\n<p>I read a lot of times the documentation and code examples but I don't know where I did a mistake.\nI hope you will be able to help me.</p>\n\n<p>Thanks :)</p>\n"}, {"tags": ["c++", "templates", "variadic-templates"], "comments": [{"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1570030395, "post_id": 58204535, "comment_id": 102787683, "body": "not think that <i>winapi</i> here somehow related"}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "reply_to_user": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 1, "creation_date": 1570030477, "post_id": 58204535, "comment_id": 102787724, "body": "@RbMm I see <code>HRESULT</code>s and <code>VARIANT</code>s, isn&#39;t it <a href=\"https://docs.microsoft.com/fr-fr/windows/win32/api/oaidl/ns-oaidl-variant\" rel=\"nofollow noreferrer\">that</a> thing? I can&#39;t find what <code>GetArray</code> and <code>GetNextItem</code> are though."}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "reply_to_user": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1570030643, "post_id": 58204535, "comment_id": 102787807, "body": "@Quentin - if say replace <code>HRESULT</code> to <code>int</code> the essence of the question will not change. i think that this is pure c++ question"}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "reply_to_user": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1570030854, "post_id": 58204535, "comment_id": 102787930, "body": "@RbMm but what about <code>VARIANT</code> and the associated functions?"}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "reply_to_user": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1570032042, "post_id": 58204535, "comment_id": 102788539, "body": "@Quentin <code>GetArray</code> and <code>GetNextItem</code> not well known functions. this is not part of winapi. only OP can know - what is this custom function. <code>VARIANT</code> - yes, windows structure, but if replace it on any c++ struct - are question and answer will change ?"}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "reply_to_user": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1570032138, "post_id": 58204535, "comment_id": 102788587, "body": "@RbMm well yeah, since the end goal AFAICT is to call <code>GetArray</code> and <code>GetNextItem</code> properly. But if you&#39;re positive that this is not Microsoft&#39;s <code>VARIANT</code> and functions I&#39;ll just remove the tag of course."}], "answers": [{"tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": true, "score": 2, "last_activity_date": 1570031791, "creation_date": 1570031791, "answer_id": 58205133, "question_id": 58204535, "link": "https://stackoverflow.com/questions/58204535/how-to-call-variadic-template-function-with-defined-first-parameter-through-std/58205133#58205133", "title": "How to call variadic template function with defined first parameter through std::apply?", "body": "<p>To use <code>apply</code> with extra arguments than tuple, you might capture it in the functor:</p>\n\n<pre><code>std::apply([&amp;](auto&amp;... args){ ValuesFromValuesVariant(params, args...); }, arguments);\n</code></pre>\n\n<p>or concat extra parameter to the tuple:</p>\n\n<pre><code>std::apply(&amp;ValuesFromValuesVariant, std::tuple_cat(std::tie(params), arguments));\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 17331, "user_id": 8950365, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c6ba3b19f86f1bea8cf76e691db4349?s=128&d=identicon&r=PG&f=1", "display_name": "rafix07", "link": "https://stackoverflow.com/users/8950365/rafix07"}, "is_accepted": false, "score": 1, "last_activity_date": 1570032329, "creation_date": 1570032329, "answer_id": 58205264, "question_id": 58204535, "link": "https://stackoverflow.com/questions/58204535/how-to-call-variadic-template-function-with-defined-first-parameter-through-std/58205264#58205264", "title": "How to call variadic template function with defined first parameter through std::apply?", "body": "<p>Because <code>ValuesFromValuesVariant</code> takes its parameters by Lvalue reference, first you need to create tuple of Lvalue references from <code>arguments</code>. Then you can use <code>tuple_cat</code> to concatenate tuple created from <code>params</code> and the previous one:</p>\n\n<p>It may look like:</p>\n\n<pre><code>virtual HRESULT OnSend(VARIANT params)\n{\n    // [1] make tuple of references to arguments\n    auto makeRef = [](auto &amp; ... args){ return std::forward_as_tuple(args...); };\n    auto t1 = std::apply( makeRef , arguments);\n\n    // [2] make tuple from params\n    auto t2 = std::forward_as_tuple(params);\n    std::apply(ValuesFromValuesVariant&lt;Args...&gt;, std::tuple_cat( t1, t2 ) );\n\n    HRESULT hr{1};\n    return hr;\n}\n</code></pre>\n\n<p><a href=\"https://godbolt.org/z/1DYcXS\" rel=\"nofollow noreferrer\">Here is minimal demo</a></p>\n"}, {"comments": [{"owner": {"reputation": 149, "user_id": 11175208, "user_type": "registered", "profile_image": "https://graph.facebook.com/2283141461942567/picture?type=large", "display_name": "Ilya  Pakhmutov", "link": "https://stackoverflow.com/users/11175208/ilya-pakhmutov"}, "edited": false, "score": 0, "creation_date": 1570033044, "post_id": 58205289, "comment_id": 102788995, "body": "VARIANT is not needed to be passed as reference, and won&#39;t  <code>std::apply([](auto...&amp; args){ValuesFromValuesVariant(args);}, concat);</code> turn concat into references to references?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 149, "user_id": 11175208, "user_type": "registered", "profile_image": "https://graph.facebook.com/2283141461942567/picture?type=large", "display_name": "Ilya  Pakhmutov", "link": "https://stackoverflow.com/users/11175208/ilya-pakhmutov"}, "edited": false, "score": 0, "creation_date": 1570033241, "post_id": 58205289, "comment_id": 102789087, "body": "@IlyaPakhmutov I used <code>std::tie</code> so that <code>params</code> doesn&#39;t get copied.  I wasn&#39;t sure what it was but if it can&#39;t/shouldn&#39;t be copied then you&#39;re safe with this.  It wont turn concat into a reference of references.  What it does it give you references to what <code>param_ref</code> and <code>arg_ref</code> refer to."}, {"owner": {"reputation": 149, "user_id": 11175208, "user_type": "registered", "profile_image": "https://graph.facebook.com/2283141461942567/picture?type=large", "display_name": "Ilya  Pakhmutov", "link": "https://stackoverflow.com/users/11175208/ilya-pakhmutov"}, "edited": false, "score": 0, "creation_date": 1570033373, "post_id": 58205289, "comment_id": 102789163, "body": "would it not be easier then to capture values by references? like <code>[&amp;] (auto&amp;...args)</code> ..."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 149, "user_id": 11175208, "user_type": "registered", "profile_image": "https://graph.facebook.com/2283141461942567/picture?type=large", "display_name": "Ilya  Pakhmutov", "link": "https://stackoverflow.com/users/11175208/ilya-pakhmutov"}, "edited": false, "score": 0, "creation_date": 1570033633, "post_id": 58205289, "comment_id": 102789299, "body": "@IlyaPakhmutov It would.  That is exactly what Jarod42 did in their answer and I up voted it since it was a better approach.  C++ gives you many ways to skin a cat and I got caught up in all the tuples and forgot I could just capture <code>params</code>."}], "tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": false, "score": 2, "last_activity_date": 1570032416, "creation_date": 1570032416, "answer_id": 58205289, "question_id": 58204535, "link": "https://stackoverflow.com/questions/58204535/how-to-call-variadic-template-function-with-defined-first-parameter-through-std/58205289#58205289", "title": "How to call variadic template function with defined first parameter through std::apply?", "body": "<p>First, <code>std::tie(arguments)</code> does not create a <code>std::tuple</code> of references to the elements of <code>arguments</code>.  What it will do is create a <code>std::tuple</code> that has single element which is a reference to <code>arguments</code>.  To get a tuple of references to a tuple need an adapter like</p>\n\n<pre><code>template&lt;typename... Elems, std::size_t... Indicies&gt;\nauto make_reference_tuple_impl(std::tuple&lt;Elems...&gt;&amp; tuple, std::index_sequence&lt;Indicies...&gt; indices)\n{\n    return std::tuple&lt;Elems&amp;...&gt;{std::get&lt;Indicies&gt;(tuple)...};\n}\n\ntemplate&lt;typename... Elems&gt;\nauto make_reference_tuple(std::tuple&lt;Elems...&gt;&amp; tuple)\n{\n    return make_reference_tuple_impl(tuple, std::make_index_sequence&lt;sizeof...(Elems)&gt;{});\n}\n</code></pre>\n\n<p>and then what you need to do is turn <code>params</code> into a tuple of a reference as well with <code>std::tie</code> and then you can combine those tuple together with <a href=\"https://en.cppreference.com/w/cpp/utility/tuple/tuple_cat\" rel=\"nofollow noreferrer\"><code>std::tuple_cat</code></a>.  You also need to wrap <code>ValuesFromValuesVariant</code> in a lambda since you can pass a function template to <code>std::apply</code>.  Putting all that together will give you code that will look like</p>\n\n<pre><code>virtual HRESULT OnSend(VARIANT params)\n{\n    auto param_ref = std::tie(params);\n    auto arg_ref = make_reference_tuple(arguments);\n    auto concat = std::tuple_cat(param_ref, arg_ref);\n    std::apply([](auto...&amp; args){ValuesFromValuesVariant(args);}, concat);\n\n    HRESULT hr = std::apply(m_Function, arguments);\n    return hr;\n}\n</code></pre>\n"}], "owner": {"reputation": 149, "user_id": 11175208, "user_type": "registered", "profile_image": "https://graph.facebook.com/2283141461942567/picture?type=large", "display_name": "Ilya  Pakhmutov", "link": "https://stackoverflow.com/users/11175208/ilya-pakhmutov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 366, "favorite_count": 0, "accepted_answer_id": 58205133, "answer_count": 3, "score": 1, "last_activity_date": 1570032416, "creation_date": 1570029629, "last_edit_date": 1570032143, "question_id": 58204535, "link": "https://stackoverflow.com/questions/58204535/how-to-call-variadic-template-function-with-defined-first-parameter-through-std", "title": "How to call variadic template function with defined first parameter through std::apply?", "body": "<p>I'm relatively new to parameter packs, but I want to build a class that receives argument pack, collects values that are contained within and launches them into another function.</p>\n\n<p>I have a class that has variadic template and a function which assigns values. Function is taking arguments from VARIANT structure.</p>\n\n<p><strong>Unwrapper Function:</strong></p>\n\n<pre><code> template &lt;typename...Args&gt;\n    constexpr void ValuesFromValuesVariant(VARIANT variant, Args&amp;...args)\n    {\n        static std::size_t nArgs = sizeof...(Args);\n        if (!nArgs) return;\n        auto vArray = GetArray(variant, nArgs);\n\n        auto i = 0u;\n        GetNextItem(vArray, i, args);\n    }\n</code></pre>\n\n<p><strong>Class that uses it:</strong> </p>\n\n<pre><code>template &lt;class ...Args&gt;\nclass Receiver\n{\n    using SendFunction = std::function&lt;HRESULT(Args...)&gt;;\n    using InterruptFunc = std::function&lt;HRESULT()&gt;;\n    ...\n    virtual HRESULT OnSend(VARIANT params)\n    {\n        //Here I'd like to call it with a VARIANT, but I can't for some reason\n        std::apply(ValuesFromValuesVariant, params, std::tie(arguments)); //std::tie to get refs&amp; to the arguments\n\n        HRESULT hr = std::apply(m_Function, arguments);\n        return hr;\n    }\nprivate:\n    InterruptFunc m_InterruptFunc;\n    SendFunction m_Function;\nprivate:\n    std::tuple&lt; Args... &gt; arguments;\n};\n</code></pre>\n\n<p>I've tried to std::bind a first function parameter, but it can't automatically predict what arguments it's taking, \n<code>VariantCommunication::ValuesFromValuesVariant&lt;Args&gt;</code> specifier does not work.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 929, "user_id": 4253931, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b751517b9a663cda1d8ab07027bb59a?s=128&d=identicon&r=PG&f=1", "display_name": "eike", "link": "https://stackoverflow.com/users/4253931/eike"}, "edited": false, "score": 1, "creation_date": 1570029768, "post_id": 58204525, "comment_id": 102787295, "body": "Your variable names cannot contain <code>-</code>"}, {"owner": {"reputation": 31, "user_id": 12154531, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAa-GDT5m6josKAjEHO_pXKHFzqUbLVmA6ky9ob=k-s128", "display_name": "Santana Scott", "link": "https://stackoverflow.com/users/12154531/santana-scott"}, "reply_to_user": {"reputation": 929, "user_id": 4253931, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b751517b9a663cda1d8ab07027bb59a?s=128&d=identicon&r=PG&f=1", "display_name": "eike", "link": "https://stackoverflow.com/users/4253931/eike"}, "edited": false, "score": 0, "creation_date": 1570029937, "post_id": 58204525, "comment_id": 102787407, "body": "Thanks for the reminder @eike but I am still struggling with the actual question at hand."}, {"owner": {"reputation": 9018, "user_id": 5105949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbd9d7ecb21c40f7a4256317fd80cecc?s=128&d=identicon&r=PG&f=1", "display_name": "churill", "link": "https://stackoverflow.com/users/5105949/churill"}, "edited": false, "score": 0, "creation_date": 1570030037, "post_id": 58204525, "comment_id": 102787467, "body": "Do you want to organise many hexes? Like in an multidmensional map? Why don&#39;t you just name it <code>hex_0_0_0</code> or something like that? It&#39;s not entirely clear what you mean."}, {"owner": {"reputation": 90101, "user_id": 2509, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/79ed928ca8b1ab9a637720bf0fb20732?s=128&d=identicon&r=PG&f=1", "display_name": "dmckee --- ex-moderator kitten", "link": "https://stackoverflow.com/users/2509/dmckee-ex-moderator-kitten"}, "edited": false, "score": 0, "creation_date": 1570030157, "post_id": 58204525, "comment_id": 102787535, "body": "Variable names also cannot contain <code>(</code>, <code>,</code>, or <code>)</code>.  And then the key question is, do you want to do this as code generation or are you envisioning some kind of run-time mapping between variable values and names? (The latter would reflection which is always a problem in c++ where &quot;variable name&quot; is not by default a run-time concept.)"}, {"owner": {"reputation": 929, "user_id": 4253931, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b751517b9a663cda1d8ab07027bb59a?s=128&d=identicon&r=PG&f=1", "display_name": "eike", "link": "https://stackoverflow.com/users/4253931/eike"}, "edited": false, "score": 0, "creation_date": 1570031051, "post_id": 58204525, "comment_id": 102788032, "body": "@SantanaScott your question is not very clear to me. Do you want an object actually called <code>hex(0,0,0)</code> or do you want to be able to create any hex object with r,g and b values (e.g. <code>hex some_object(0,0,0)</code>)?"}, {"owner": {"reputation": 31, "user_id": 12154531, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAa-GDT5m6josKAjEHO_pXKHFzqUbLVmA6ky9ob=k-s128", "display_name": "Santana Scott", "link": "https://stackoverflow.com/users/12154531/santana-scott"}, "edited": false, "score": 0, "creation_date": 1570032968, "post_id": 58204525, "comment_id": 102788964, "body": "@ churill The problem with naming it hex_0_0_0 is that these values aren&#39;t dynamically accessible. Im trying to create a system so that I can take the values in the name of the object, such as hex_0_0_0, and add the constants 2, -1, -1 so that I get the object hex_2_-1_-1."}, {"owner": {"reputation": 90101, "user_id": 2509, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/79ed928ca8b1ab9a637720bf0fb20732?s=128&d=identicon&r=PG&f=1", "display_name": "dmckee --- ex-moderator kitten", "link": "https://stackoverflow.com/users/2509/dmckee-ex-moderator-kitten"}, "edited": false, "score": 0, "creation_date": 1570033221, "post_id": 58204525, "comment_id": 102789074, "body": "In bog-standard, deafult environments c++ variables names does&#39;t &quot;exist&quot; at run-time. For instance, debuggers require the names to be supplied through some additional channel (though many executable formats support such a channel). Perhaps you could back out  a layer or two and explain the problem you are trying to solve instead of the mechanism you envisioned?"}, {"owner": {"reputation": 31, "user_id": 12154531, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAa-GDT5m6josKAjEHO_pXKHFzqUbLVmA6ky9ob=k-s128", "display_name": "Santana Scott", "link": "https://stackoverflow.com/users/12154531/santana-scott"}, "edited": false, "score": 0, "creation_date": 1570033503, "post_id": 58204525, "comment_id": 102789231, "body": "I want to have a tile system made using the three coordinates. Mostly I need to take a hexagon, use its coordinates, and be able to do arithmetic to it&#39;s coordinates from there. Such as transformations and rotations. The reason I want the coordinates to be in the object name is so that i&#39;m not just naming the hexagons &quot;hex_1&quot;, &quot;hex_2&quot;... and so forth."}, {"owner": {"reputation": 9018, "user_id": 5105949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbd9d7ecb21c40f7a4256317fd80cecc?s=128&d=identicon&r=PG&f=1", "display_name": "churill", "link": "https://stackoverflow.com/users/5105949/churill"}, "edited": false, "score": 0, "creation_date": 1570034074, "post_id": 58204525, "comment_id": 102789512, "body": "What you want is essentially impossible, because varaible names can&#39;t contain a -. So hex_2_-1_-1 is no legal variable name. However I can&#39;t think of any scenario where you could need this. Please explain why you think, you need such a thing."}, {"owner": {"reputation": 90101, "user_id": 2509, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/79ed928ca8b1ab9a637720bf0fb20732?s=128&d=identicon&r=PG&f=1", "display_name": "dmckee --- ex-moderator kitten", "link": "https://stackoverflow.com/users/2509/dmckee-ex-moderator-kitten"}, "edited": false, "score": 0, "creation_date": 1570034086, "post_id": 58204525, "comment_id": 102789520, "body": "@Sata I&#39;m going to take a wild guess that, perhaps, you are very new to programming. In that case you may not be familair or comforatable with the notion of acting on <i>collections</i> of data objects. You probably don&#39;t need to give each tile that you create it&#39;s own name, you need to create and act on colelctions of tiles (presumably stuck into some kind of container object like a <code>std::vector</code> or something similar). If this is the case, you&#39;re probably better off with a good tutorial and/or a mentor you can sit with in person than posting to Stack Overflow before you know the <i>right questions</i>."}, {"owner": {"reputation": 9018, "user_id": 5105949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbd9d7ecb21c40f7a4256317fd80cecc?s=128&d=identicon&r=PG&f=1", "display_name": "churill", "link": "https://stackoverflow.com/users/5105949/churill"}, "edited": false, "score": 0, "creation_date": 1570034177, "post_id": 58204525, "comment_id": 102789564, "body": "&quot;The reason I want the coordinates to be in the object name is so that m not just naming the hexagons &quot;hex_1&quot;, &quot;hex_2&quot;... and so forth&quot; - So you expect to have variable name that actually changes with it&#39;s value? There is no reason for that, you give a variable a name that describes what it does. Like <code>originHex = hex(0,0,0)</code> and such."}, {"owner": {"reputation": 31, "user_id": 12154531, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAa-GDT5m6josKAjEHO_pXKHFzqUbLVmA6ky9ob=k-s128", "display_name": "Santana Scott", "link": "https://stackoverflow.com/users/12154531/santana-scott"}, "reply_to_user": {"reputation": 90101, "user_id": 2509, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/79ed928ca8b1ab9a637720bf0fb20732?s=128&d=identicon&r=PG&f=1", "display_name": "dmckee --- ex-moderator kitten", "link": "https://stackoverflow.com/users/2509/dmckee-ex-moderator-kitten"}, "edited": false, "score": 0, "creation_date": 1570034279, "post_id": 58204525, "comment_id": 102789609, "body": "@dmckee churill I don&#39;t think I can explain my question well enough over text. Thank you for your help nevertheless"}, {"owner": {"reputation": 9018, "user_id": 5105949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbd9d7ecb21c40f7a4256317fd80cecc?s=128&d=identicon&r=PG&f=1", "display_name": "churill", "link": "https://stackoverflow.com/users/5105949/churill"}, "edited": false, "score": 0, "creation_date": 1570034741, "post_id": 58204525, "comment_id": 102789822, "body": "I think what you want is neiver doable nor useful. And I think that you are trying to solve a XY-problem here."}], "answers": [{"comments": [{"owner": {"reputation": 3198, "user_id": 6119582, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/274d37ce6d78ed9281f47a2712aaed48?s=128&d=identicon&r=PG&f=1", "display_name": "sweenish", "link": "https://stackoverflow.com/users/6119582/sweenish"}, "edited": false, "score": 1, "creation_date": 1570030438, "post_id": 58204679, "comment_id": 102787703, "body": "This doesn&#39;t answer OP&#39;s question at all."}, {"owner": {"reputation": 929, "user_id": 4253931, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b751517b9a663cda1d8ab07027bb59a?s=128&d=identicon&r=PG&f=1", "display_name": "eike", "link": "https://stackoverflow.com/users/4253931/eike"}, "reply_to_user": {"reputation": 3198, "user_id": 6119582, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/274d37ce6d78ed9281f47a2712aaed48?s=128&d=identicon&r=PG&f=1", "display_name": "sweenish", "link": "https://stackoverflow.com/users/6119582/sweenish"}, "edited": false, "score": 1, "creation_date": 1570030849, "post_id": 58204679, "comment_id": 102787927, "body": "@sweenish Well, OPs question does not seem very clear to me and the &quot;name&quot; of his hex object looks like an initialization. I am definitely not sure if this is what OP wants, but it&#39;s the closest C++ code I could imagine."}, {"owner": {"reputation": 3198, "user_id": 6119582, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/274d37ce6d78ed9281f47a2712aaed48?s=128&d=identicon&r=PG&f=1", "display_name": "sweenish", "link": "https://stackoverflow.com/users/6119582/sweenish"}, "edited": false, "score": 1, "creation_date": 1570031141, "post_id": 58204679, "comment_id": 102788071, "body": "They want the coordinates in the name of the object. It does look like an initialization, but the description gets the point across okay enough. My thing is I don&#39;t quite understand why this is wanted at all. If it&#39;s for debugging, that&#39;s what debuggers are for."}, {"owner": {"reputation": 31, "user_id": 12154531, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAa-GDT5m6josKAjEHO_pXKHFzqUbLVmA6ky9ob=k-s128", "display_name": "Santana Scott", "link": "https://stackoverflow.com/users/12154531/santana-scott"}, "reply_to_user": {"reputation": 3198, "user_id": 6119582, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/274d37ce6d78ed9281f47a2712aaed48?s=128&d=identicon&r=PG&f=1", "display_name": "sweenish", "link": "https://stackoverflow.com/users/6119582/sweenish"}, "edited": false, "score": 0, "creation_date": 1570033191, "post_id": 58204679, "comment_id": 102789058, "body": "@sweenish thank you for understanding. I should have made it more obvious I was trying to write pseudocode. I am trying to make a system like this so I can take on object, for example, hex_-3_2_1 and obtain the information -3, 2, 1 and I can do arithmetic on them."}, {"owner": {"reputation": 31, "user_id": 12154531, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAa-GDT5m6josKAjEHO_pXKHFzqUbLVmA6ky9ob=k-s128", "display_name": "Santana Scott", "link": "https://stackoverflow.com/users/12154531/santana-scott"}, "edited": false, "score": 0, "creation_date": 1570033621, "post_id": 58204679, "comment_id": 102789293, "body": "thank you @eike\u2014knowing it can&#39;t really be done is helpful."}, {"owner": {"reputation": 929, "user_id": 4253931, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b751517b9a663cda1d8ab07027bb59a?s=128&d=identicon&r=PG&f=1", "display_name": "eike", "link": "https://stackoverflow.com/users/4253931/eike"}, "edited": false, "score": 0, "creation_date": 1570033721, "post_id": 58204679, "comment_id": 102789345, "body": "If you tell us the reason, you want to obtain information based on object names, maybe we can give you a different solution for that problem."}], "tags": [], "owner": {"reputation": 929, "user_id": 4253931, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b751517b9a663cda1d8ab07027bb59a?s=128&d=identicon&r=PG&f=1", "display_name": "eike", "link": "https://stackoverflow.com/users/4253931/eike"}, "is_accepted": false, "score": 0, "last_activity_date": 1570030141, "creation_date": 1570030141, "answer_id": 58204679, "question_id": 58204525, "link": "https://stackoverflow.com/questions/58204525/creating-a-class-in-c-that-is-accessible-by-its-members/58204679#58204679", "title": "Creating a class in c++ that is accessible by its members", "body": "<p>If you want to create objects of class <code>hex</code> and want to specify the RGB values during creation, what you need is a <a href=\"https://en.cppreference.com/w/cpp/language/initializer_list\" rel=\"nofollow noreferrer\">constructor</a> (maybe someone edit this for a better reference):</p>\n\n<pre><code>class hex {\n    public:\n        hex(int r, int g, int b)\n        : r_coordinate(r), g_coordinate(g), b_coordinate(b)\n        {\n        }\n    private:\n        int r_coordinate;\n        int g_coordinate;\n        int b_coordinate;\n};\n\nhex x(1,2,3); // x.r_coordinate == 1, x.g_coordinate == 2, x.b_coordinate == 3\n</code></pre>\n\n<p>I am not sure if this is what you are after.</p>\n"}], "owner": {"reputation": 31, "user_id": 12154531, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAa-GDT5m6josKAjEHO_pXKHFzqUbLVmA6ky9ob=k-s128", "display_name": "Santana Scott", "link": "https://stackoverflow.com/users/12154531/santana-scott"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 78, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1570030141, "creation_date": 1570029590, "last_edit_date": 1570029887, "question_id": 58204525, "link": "https://stackoverflow.com/questions/58204525/creating-a-class-in-c-that-is-accessible-by-its-members", "title": "Creating a class in c++ that is accessible by its members", "body": "<p>I am trying to define a hexagonal grid for a simulation. I am using cube coordinates, as illustrated here: <a href=\"https://www.redblobgames.com/grids/hexagons/#neighbors-axial\" rel=\"nofollow noreferrer\">https://www.redblobgames.com/grids/hexagons/#neighbors-axial</a>. I am trying to make it so that each coordinate, being three of them, is part of the naming of the class specific object. For example, let us look at the origin. I have a class holding each of the three coordinates, along with some other data. I want this object to be called hex(0,0,0) such that each zero is related to the three coordinates defined by the class. \nie;</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>\nclass hex{\n     int r_coordinate: \n     int g_coordinate;\n     int b_coordinate;\n     metadata\n     ...\n}\n\nhex hex(-2,1,1)={\n     r_coordinate=-2;\n     g_coordinate= 1;\n     b_coordinate= 1;\n     metadata\n     ...\n}\n\n</code></pre>\n"}, {"tags": ["c++", "arrays", "c++11", "c++14", "c-strings"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1570029521, "post_id": 58204480, "comment_id": 102787162, "body": "What should happen if two string have different lengths?"}, {"owner": {"reputation": 929, "user_id": 4253931, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b751517b9a663cda1d8ab07027bb59a?s=128&d=identicon&r=PG&f=1", "display_name": "eike", "link": "https://stackoverflow.com/users/4253931/eike"}, "edited": false, "score": 3, "creation_date": 1570029641, "post_id": 58204480, "comment_id": 102787233, "body": "Post the code you are currently using, so that we get an idea of what you want to accomplish and how you may fix it."}], "answers": [{"tags": [], "owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": true, "score": 3, "last_activity_date": 1570029527, "creation_date": 1570029527, "answer_id": 58204513, "question_id": 58204480, "link": "https://stackoverflow.com/questions/58204480/way-to-compare-unequal-array-or-string-in-c/58204513#58204513", "title": "Way to compare unequal array or string in c++", "body": "<p>If you mean c-strings then use the standard C function <code>strcmp</code>.</p>\n\n<p>Otherwise if character arrays do not contain strings but their lengths of the actual data are known then at first you can compare the lengths and if they are equal then you can use the standard C function <code>memcmp</code>.</p>\n\n<p>If you are using objects of the type <code>std::string</code> then there are defined comparison operators for the type.</p>\n\n<p>For other containers and arrays you can use the standard algorithm <code>std::lexicographical_compare</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 12137868, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d2ce2e9bea9a25d740ca47daf228906?s=128&d=identicon&r=PG&f=1", "display_name": "Raj Singh", "link": "https://stackoverflow.com/users/12137868/raj-singh"}, "is_accepted": false, "score": 0, "last_activity_date": 1570030773, "creation_date": 1570030773, "answer_id": 58204870, "question_id": 58204480, "link": "https://stackoverflow.com/questions/58204480/way-to-compare-unequal-array-or-string-in-c/58204870#58204870", "title": "Way to compare unequal array or string in c++", "body": "<p>I have written a code which prints -1 in case the first string is either lexicographically smaller than the second one, or has smaller size as compared to the second one. It prints 1 in case first string is either lexicographically greater than the second one, or has larger size as compared to the second one. It prints 0 if both are same. </p>\n\n<p><strong>Note: Please test code fully. Did not test it as well as I would have liked!.</strong></p>\n\n<p>Code is available at following URL:</p>\n\n<pre><code>int main(){\n    string first = \"adsc\", second = \"abc\";\n    int i = 0, ans = 0; \n    while(true){\n        if(i == first.size() or i == second.size() or ans != 0)\n            break;\n        if(first[i] &lt; second[i])\n            ans = -1;\n        else if(first[i] &gt; second[i])\n            ans = 1;\n        i++;\n        }\n        if(ans == 0 and first.size() &lt; second.size())\n            ans = -1;\n        else if(ans == 0 and first.size() &gt; second.size())\n            ans = 1;\n    cout&lt;&lt;ans;\n}\n</code></pre>\n\n<p><a href=\"https://ideone.com/XZymc6\" rel=\"nofollow noreferrer\">https://ideone.com/XZymc6</a></p>\n"}], "owner": {"reputation": 23, "user_id": 12154589, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-t1rrJUxQwLA/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rf04F6O4fgAfDMe7KGtZln81Jqnag/photo.jpg?sz=128", "display_name": "Prathamesh", "link": "https://stackoverflow.com/users/12154589/prathamesh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 109, "favorite_count": 0, "accepted_answer_id": 58204513, "answer_count": 2, "score": 2, "last_activity_date": 1570030773, "creation_date": 1570029438, "last_edit_date": 1570029854, "question_id": 58204480, "link": "https://stackoverflow.com/questions/58204480/way-to-compare-unequal-array-or-string-in-c", "title": "Way to compare unequal array or string in c++", "body": "<p>I am working on a problem in with two string are taken as input and we have to see if the first char is same as first char of other string and trigger a case!\nso when i compare them using for or while loop one of the two goes out of limit and returns wrong result!</p>\n\n<p>i tried finding many ways to solve this, but can't find a good one!</p>\n"}, {"tags": ["c++", "qt"], "answers": [{"tags": [], "owner": {"reputation": 6616, "user_id": 1951488, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jIsyf.jpg?s=128&g=1", "display_name": "Zlatomir", "link": "https://stackoverflow.com/users/1951488/zlatomir"}, "is_accepted": true, "score": 0, "last_activity_date": 1570037644, "creation_date": 1570037644, "answer_id": 58206520, "question_id": 58204473, "link": "https://stackoverflow.com/questions/58204473/clicking-on-push-button-should-show-the-plot-in-different-window-using-qt-c/58206520#58206520", "title": "Clicking on Push button should show the plot in different window using Qt C++", "body": "<p>You create and show 2 windows: the <code>aa</code> as a modal dialog (<code>exec()</code> on a QDialog shows the dialog as modal) and the <code>window</code>.</p>\n\n<p>To fix it you can show the plot inside the dialog, you'll need to create a layout for the dialog and add the <code>chartView</code> into that layout:</p>\n\n<pre><code>    //...\n    //comment the other main window creation, we will setup the plot inside aa\n    //![5]\n    //QMainWindow window;\n    //window.setCentralWidget(chartView);\n    //window.resize(400, 300);\n    //window.show();\n    //\n    //create a layout for the dialog (most likely you'll need to #include &lt;QVBoxLayout&gt;)\n    aa.setLayout(new QVBoxLayout());\n    //add chartView into the layout\n    aa.layout()-&gt;addWidget(chartView);\n    //...\n</code></pre>\n\n<p>Note: in case you want a non-modal dialog (or window), you will need to allocate the widget on heap (if allocated on the stack the window will just show and immediately close, because the destructor de-allocates the widget).</p>\n"}], "owner": {"reputation": 27, "user_id": 4382467, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b9f8f4d383527344cf263017792a912?s=128&d=identicon&r=PG", "display_name": "Satadru", "link": "https://stackoverflow.com/users/4382467/satadru"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 290, "favorite_count": 0, "accepted_answer_id": 58206520, "answer_count": 1, "score": 1, "last_activity_date": 1570037644, "creation_date": 1570029425, "last_edit_date": 1570029596, "question_id": 58204473, "link": "https://stackoverflow.com/questions/58204473/clicking-on-push-button-should-show-the-plot-in-different-window-using-qt-c", "title": "Clicking on Push button should show the plot in different window using Qt C++", "body": "<p>I am trying to write a Qt C++ code which should make a plot in separate windows by clicking Push Button.</p>\n\n<p>I  did by creating two forms 1: mainwindow , 2: dialog. Once I click on Pushbutton, immediately plot appears in different windows and next another window of dialog form is posed up covering my plot window.</p>\n\n<p>The summary is that clicking on Pushbutton generates two windows which is not desirable.</p>\n\n<p>I did the followings:</p>\n\n<ol>\n<li><p>Created new project with Qt Widgets Applications which generates mainwindow.cpp and mainwindow.h files along with main.cpp file</p></li>\n<li><p>Created Push button on mainwindow.cpp file using form</p></li>\n<li><p>Created new dialog form using \"add new\" by right clicking on project</p></li>\n<li><p>Then written code to generate plot ( using Chart ) inside on_pushButton_clicked() in mainwindow.cpp file</p></li>\n<li><p>Then run the code . Eventually PushButton Window appears. Then I click on Push button, Then it generates two separate windows 1: Plot windows, 2: Blank dialog Window</p></li>\n</ol>\n\n<p>There are total three *.cpp files , two *.h files</p>\n\n<p>Here is mainwindow.cpp code:</p>\n\n<pre><code>#include \"mainwindow.h\"\n#include \"ui_mainwindow.h\"\n\n#include\"dialog.h\"\n\n#include &lt;QtWidgets/QApplication&gt;\n#include &lt;QtWidgets/QMainWindow&gt;\n#include &lt;QtCharts/QChartView&gt;\n#include &lt;QtCharts/QLineSeries&gt;\n\nQT_CHARTS_USE_NAMESPACE\n\nMainWindow::MainWindow(QWidget *parent)\n    : QMainWindow(parent)\n    , ui(new Ui::MainWindow)\n{\n    ui-&gt;setupUi(this);\n}\n\nMainWindow::~MainWindow()\n{\n    delete ui;\n}\n\n\nvoid MainWindow::on_pushButton_clicked()\n{\n    Dialog aa;\n    aa.setDisabled(false);\n\n    //aa.display();\n    //![1]\n        QLineSeries *series = new QLineSeries();\n    //![1]\n\n    //![2]\n        series-&gt;append(0, 6);\n        series-&gt;append(2, 4);\n        series-&gt;append(3, 8);\n        series-&gt;append(7, 4);\n        series-&gt;append(10, 5);\n        *series &lt;&lt; QPointF(11, 1) &lt;&lt; QPointF(13, 3) &lt;&lt; QPointF(17, 6) &lt;&lt; QPointF(18, 3) &lt;&lt; QPointF(20, 2);\n    //![2]\n\n    //![3]\n        QChart *chart = new QChart();\n        chart-&gt;legend()-&gt;hide();\n        chart-&gt;addSeries(series);\n        chart-&gt;createDefaultAxes();\n        chart-&gt;setTitle(\"Simple line chart example\");\n    //![3]\n\n    //![4]\n        QChartView *chartView = new QChartView(chart);\n        chartView-&gt;setRenderHint(QPainter::Antialiasing);\n    //![4]\n\n\n    //![5]\n        QMainWindow window;\n        window.setCentralWidget(chartView);\n        window.resize(400, 300);\n        window.show();\n    //![5]\n\n    aa.exec();\n}\n</code></pre>\n\n<p>Actual result:  Clicking on PushButton generates two separate windows 1: Plot window, 2: blank window</p>\n\n<p>Expected Results: Clicking on PushButton should generate only PlotWindow</p>\n"}, {"tags": ["c++", "language-lawyer", "c++17", "function-pointers", "order-of-execution"], "comments": [{"owner": {"reputation": 6533, "user_id": 1918193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b70a14318e0f417ecac47809f38fafc?s=128&d=identicon&r=PG", "display_name": "Marc Glisse", "link": "https://stackoverflow.com/users/1918193/marc-glisse"}, "edited": false, "score": 0, "creation_date": 1570034106, "post_id": 58204296, "comment_id": 102789527, "body": "People didn&#39;t make a very thorough check that compilers actually implement all the new order of evaluation rules. If you keep experimenting with this, use the latest development version of the compiler, and be ready to file bugs."}], "answers": [{"comments": [{"owner": {"reputation": 20522, "user_id": 11941443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f27a880243178eedf3abdab24898b335?s=128&d=identicon&r=PG&f=1", "display_name": "walnut", "link": "https://stackoverflow.com/users/11941443/walnut"}, "edited": false, "score": 0, "creation_date": 1570033191, "post_id": 58205441, "comment_id": 102789059, "body": "Thank you for the answer. <code>T(f)(f=b, 0);</code> doesn&#39;t work because it will be considered a redefinition of <code>f</code>. I was also really interested in the case <code>f((f=b, 0))</code>. Is there something different happening in that case?"}, {"owner": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "edited": false, "score": 0, "creation_date": 1570035163, "post_id": 58205441, "comment_id": 102790017, "body": "Until C++17, the individual arguments and the postfix-expression were all of them unsequenced."}, {"owner": {"reputation": 23130, "user_id": 8586227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BRnwg.png?s=128&g=1", "display_name": "Davis Herring", "link": "https://stackoverflow.com/users/8586227/davis-herring"}, "edited": false, "score": 0, "creation_date": 1570327227, "post_id": 58205441, "comment_id": 102877256, "body": "The <code>T(f)</code> has nothing to do with it: <code>f((f=b,0))</code> has the same meaning (since C++17, again)."}], "tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": true, "score": 2, "last_activity_date": 1570035961, "last_edit_date": 1570035961, "creation_date": 1570033008, "answer_id": 58205441, "question_id": 58204296, "link": "https://stackoverflow.com/questions/58204296/order-of-evaluation-with-function-pointers-in-c17/58205441#58205441", "title": "Order of evaluation with function pointers in C++17", "body": "<p>The C++17 rule is, from <a href=\"http://eel.is/c++draft/expr.call#8\" rel=\"nofollow noreferrer\">[expr.call]/8</a>:</p>\n\n<blockquote>\n  <p>The <em>postfix-expression</em> is sequenced before each expression in the <em>expression-list</em> and any default argument. The initialization of a parameter, including every associated value computation and side effect, is indeterminately sequenced with respect to that of any other parameter. </p>\n</blockquote>\n\n<p>In <code>(T(f))((f=b,0));</code>, <code>(T(f))</code> is sequenced before the initialization of the parameter from <code>(f=b, 0)</code>. All of this is well-defined and the program <em>should</em> print \"a\". That is, it should behave just like:</p>\n\n<pre><code>auto __tmp = T(f);\n__tmp((f=b, 0));\n</code></pre>\n\n<p>The same is true even if we change your program such that this were valid:</p>\n\n<pre><code>T{f}(f=b, 0); // two parameters now, instead of one\n</code></pre>\n\n<p>The <code>f=b</code> and <code>0</code> expressions are indeterminately sequenced with each other, but <code>T{f}</code> is still sequenced before both, so this would still invoke <code>a</code>.</p>\n\n<p>Filed <a href=\"https://gcc.gnu.org/bugzilla/show_bug.cgi?id=91974\" rel=\"nofollow noreferrer\">91974</a>.</p>\n"}], "owner": {"reputation": 20522, "user_id": 11941443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f27a880243178eedf3abdab24898b335?s=128&d=identicon&r=PG&f=1", "display_name": "walnut", "link": "https://stackoverflow.com/users/11941443/walnut"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 197, "favorite_count": 0, "accepted_answer_id": 58205441, "answer_count": 1, "score": 4, "last_activity_date": 1570322199, "creation_date": 1570028889, "last_edit_date": 1570322199, "question_id": 58204296, "link": "https://stackoverflow.com/questions/58204296/order-of-evaluation-with-function-pointers-in-c17", "title": "Order of evaluation with function pointers in C++17", "body": "<p>Consider the following program (and its alternative in the comment) in C++17:</p>\n\n<pre><code>#include&lt;iostream&gt;\n\nvoid a(int) {\n    std::cout &lt;&lt; \"a\\n\";\n}\n\nvoid b(int) {\n   std::cout &lt;&lt; \"b\\n\";\n}\n\nint main() {\n    using T = void(*)(int);\n\n    T f = a;\n    (T(f))((f=b,0)); // alternatively: f((f=b,0))\n}\n</code></pre>\n\n<p>With <code>-O2</code> option, Clang 9.0.0 prints <code>a</code> and GCC 9.2 prints <code>b</code>. Both warn me about unsequenced modification and access to <code>f</code>. See <a href=\"https://godbolt.org/z/yVMitL\" rel=\"nofollow noreferrer\">godbolt.org</a>.</p>\n\n<p>My expectation was that this is program has well-defined behavior and will print <code>a</code>, because C++17 guarantees that the left-hand expression of the call <code>(T(f))</code> is <em>sequenced before</em> any evaluation of the arguments. Because the result of the expression <code>(T(f))</code> is a <em>new</em> pointer to <code>a</code>, the later modification of <code>f</code> should have no impact on the call at all. Am I wrong?</p>\n\n<p>Both compilers give the same output if I use <code>f((f=b,0));</code> instead of <code>(T(f))((f=b,0));</code>. Here I am slightly unsure about the undefined behavior aspect. Would this be undefined behavior because <code>f</code> still refers to the declared function pointer after evaluation, which will have been modified by the evaluation of the arguments and if so, <em>why exactly</em> would that cause undefined behavior rather than calling <code>b</code>?</p>\n\n<p>I have asked a related question with regards to order of evaluation of non-static member function calls in C++17 <a href=\"https://stackoverflow.com/questions/58066136/calling-non-static-member-function-outside-of-objects-lifetime-in-c17\">here</a>. I am aware that writing code like this is dangerous and unnecessary, but I want to understand the details of the C++ standard better.</p>\n\n<p>Edit: GCC trunk now also prints <code>a</code> after the bug filed by Barry (see his answer below) has been fixed. Both Clang and GCC trunk do still show false-positive warnings with <code>-Wall</code>, though.</p>\n"}, {"tags": ["c++", "c++11", "templates", "variadic-templates", "variadic-functions"], "comments": [{"owner": {"reputation": 10866, "user_id": 1673776, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/0llsY.jpg?s=128&g=1", "display_name": "Victor", "link": "https://stackoverflow.com/users/1673776/victor"}, "edited": false, "score": 0, "creation_date": 1570028874, "post_id": 58204229, "comment_id": 102786753, "body": "I think you should create an <code>std::tuple</code>, not a vector."}], "owner": {"reputation": 65, "user_id": 9054679, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e4383db5ca21eb4bf9cb6eeca749810?s=128&d=identicon&r=PG&f=1", "display_name": "MatthewL", "link": "https://stackoverflow.com/users/9054679/matthewl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 40, "favorite_count": 0, "closed_date": 1570028835, "answer_count": 0, "score": 2, "last_activity_date": 1570033163, "creation_date": 1570028641, "last_edit_date": 1570033163, "question_id": 58204229, "link": "https://stackoverflow.com/questions/58204229/using-a-variadic-template-method-of-a-template-class-inside-a-variadic-template", "closed_reason": "Duplicate", "title": "Using a variadic template method of a template class inside a variadic template function", "body": "<p>The following code will not compile in either intel or gcc. The crux of the problem appears to be that a static method variadic template of a template class called with a parameter pack expansion is considered bad syntax on the first pass of the compiler.</p>\n\n<pre><code>template&lt;typename T&gt;\nclass foo\n{\npublic:\n    template &lt;bool do_other_thing_too, typename... ArgTypes&gt;\n    static T doThing(ArgTypes... args)\n    {\n        std::vector&lt;T&gt; outs = { args... };\n        T out = 0;\n        for (auto V : outs) out += V;\n        // the actual code involves templates using SFINAE, and so must either\n        // be in this template's parameters or be copied, once for each value \n        // of the bool\n        if (do_other_thing_too)\n        {\n            out *= 1.5;\n        }\n        return out;\n    }\n};\n\nstruct bar\n{\n    int data = 3;\n    template&lt;bool do_other_thing_too = true, typename T, typename...ArgTypes&gt;\n    T&amp; doThings(T&amp; out, ArgTypes... args)\n    {\n        //the line of the code causing the problem\n        out = foo&lt;T&gt;::doThing&lt;do_other_thing_too&gt;(data, args...);\n        return out;\n    }\n};\n\nint main()\n{\n    bar george;\n    int a = 0;\n    george.doThings(a, 12, 10.4, 3.2f, 4ll, 2l);\n    return 0;\n}\n</code></pre>\n\n<p>It gives the following errors in gcc:</p>\n\n<pre><code>Test.cpp:27:61: error: expected ')' before '...' token\n         out = foo&lt;T&gt;::doThing&lt;do_other_thing_too&gt;(data, args...);\n                                                             ^\nTest.cpp:27:65: error: parameter packs not expanded with '...':\n         out = foo&lt;T&gt;::doThing&lt;do_other_thing_too&gt;(data, args...);\n                                                                 ^\nTest.cpp:27:65: note:         'args'\n</code></pre>\n\n<p>I have done a decent bit of fiddling with the code, it will not happen if foo's T parameter is folded into foo::doThing's template i.e.</p>\n\n<pre><code>class foo\n{\npublic:\n    template &lt;typename T, bool do_other_thing_too, typename... ArgTypes&gt;\n    static T doThing(ArgTypes... args)\n</code></pre>\n\n<p>Also, there is no problem with calling <code>foo&lt;int&gt;::doThing&lt;true&gt;(3, 12, 10.4, 3.2f, 4ll, 2l)</code> directly but neither option is available in the code that spawned this.\nI have a solution to the problem in the short term <code>do_other_thing_too</code> can be a template parameter in bar, passed by value to foo, and then I can if/else to shove it back into the template that actually needs it, but that is kinda ugly, and I really want to know what is actually causing the problem here.</p>\n\n<p>relevant TLDR on the one this is a 'duplicate' of:\nIt is possible for template syntax to be ambiguous </p>\n\n<pre><code>foo&lt;T&gt;::doThing&lt;do_other_thing_too&gt;(data, args...);\n</code></pre>\n\n<p><em>could</em> be referencing a value <code>doThing</code> that is being checked for being less than <code>do_other_thing_too</code> But if you change it to</p>\n\n<pre><code>foo&lt;T&gt;::template doThing&lt;do_other_thing_too&gt;(data, args...);\n</code></pre>\n\n<p>it knows it is a function</p>\n"}, {"tags": ["c++", "clang-format"], "comments": [{"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 0, "creation_date": 1570028784, "post_id": 58204060, "comment_id": 102786698, "body": "What are your MaxEmptyLinesToKeep and KeepEmptyLinesAtTheStartOfBlocks? I don&#39;t know if latter applies, but may be worth testing out."}, {"owner": {"reputation": 37736, "user_id": 2153571, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/d5573368e2aa8dd2039de1c545ce2b9c?s=128&d=identicon&r=PG", "display_name": "juzzlin", "link": "https://stackoverflow.com/users/2153571/juzzlin"}, "reply_to_user": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 0, "creation_date": 1570029475, "post_id": 58204060, "comment_id": 102787134, "body": "Don&#39;t seem to have any effect. Maybe that&#39;s not supported at all.."}], "owner": {"reputation": 37736, "user_id": 2153571, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/d5573368e2aa8dd2039de1c545ce2b9c?s=128&d=identicon&r=PG", "display_name": "juzzlin", "link": "https://stackoverflow.com/users/2153571/juzzlin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 40, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1570028070, "creation_date": 1570028070, "question_id": 58204060, "link": "https://stackoverflow.com/questions/58204060/clang-format-how-to-keep-line-feeds-after-access-modifiers", "title": "clang-format: How to keep line feeds after access modifiers?", "body": "<p>What I'm getting:</p>\n\n<pre><code>class Foo\n{\npublic:\n  int stuff;\n\n  int otherStuff;\n}\n</code></pre>\n\n<p>What I'd like to get (or preserve) is:</p>\n\n<pre><code>class Foo\n{\npublic:\n\n  int stuff;\n\n  int otherStuff;\n}\n</code></pre>\n\n<p>How can I prevent <code>clang-format</code> from removing my line feeds after access modifier indentation?</p>\n"}, {"tags": ["c++", "function"], "comments": [{"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 2, "creation_date": 1570027015, "post_id": 58203742, "comment_id": 102785640, "body": "How do you know that it isn&#39;t called? Did you try stepping through your code with a debugger? Note, that <code>while (isTypeValid = false)</code> loop will never be executed, since <code>isTypeValid = false</code> is an assignment - not comparison."}, {"owner": {"reputation": 79534, "user_id": 3744182, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ab1dca8193d1b5734ba07702e963b6e?s=128&d=identicon&r=PG&f=1", "display_name": "dbc", "link": "https://stackoverflow.com/users/3744182/dbc"}, "edited": false, "score": 1, "creation_date": 1570030379, "post_id": 58203742, "comment_id": 102787673, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/19019381/c-wont-exit-do-while-loop\">C++ Won&#39;t exit do while loop</a>"}], "answers": [{"comments": [{"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 4, "creation_date": 1570027047, "post_id": 58203769, "comment_id": 102785660, "body": "Better yet, just use <code>while (isMakingSettlement)</code>."}, {"owner": {"reputation": 17871, "user_id": 1171191, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9e7708869e2b3234fbf0e34c9506742?s=128&d=identicon&r=PG", "display_name": "BoBTFish", "link": "https://stackoverflow.com/users/1171191/bobtfish"}, "reply_to_user": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 0, "creation_date": 1570027078, "post_id": 58203769, "comment_id": 102785677, "body": "Well, perhaps. That is a matter of style, I wanted to emphasise the correctness. Personally, I&#39;m a big fan of Yoda conditions."}, {"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 0, "creation_date": 1570027159, "post_id": 58203769, "comment_id": 102785723, "body": "I&#39;ve never understood the compulsion some people have to use comparison operators to make Boolean expressions into Boolean expressions. And I don&#39;t like  Yoda conditions, either. Use <code>-Wall -Werror</code> and let the compiler take care of you without mangling your expressions."}, {"owner": {"reputation": 135, "user_id": 11290028, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wcKqc.jpg?s=128&g=1", "display_name": "SamsyTheUnicorn", "link": "https://stackoverflow.com/users/11290028/samsytheunicorn"}, "edited": false, "score": 0, "creation_date": 1570027294, "post_id": 58203769, "comment_id": 102785804, "body": "I did notice this just a short time after posting this, confusing the assignment operator with the equality one. I&#39;ve since corrected the mistake but I&#39;m getting to same issue as before, the void function remains uncalled."}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "reply_to_user": {"reputation": 135, "user_id": 11290028, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wcKqc.jpg?s=128&g=1", "display_name": "SamsyTheUnicorn", "link": "https://stackoverflow.com/users/11290028/samsytheunicorn"}, "edited": false, "score": 2, "creation_date": 1570027351, "post_id": 58203769, "comment_id": 102785837, "body": "@SamsyTheUnicorn How do you know, that it is not called? Do you realize, that you have similar mistake in multiple places in your code?"}, {"owner": {"reputation": 135, "user_id": 11290028, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wcKqc.jpg?s=128&g=1", "display_name": "SamsyTheUnicorn", "link": "https://stackoverflow.com/users/11290028/samsytheunicorn"}, "reply_to_user": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 0, "creation_date": 1570027420, "post_id": 58203769, "comment_id": 102785878, "body": "@FredLarson that&#39;s not an argument I&#39;ve encountered yet, I&#39;ll add it to my list of best practices to learn, thanks!"}, {"owner": {"reputation": 17871, "user_id": 1171191, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9e7708869e2b3234fbf0e34c9506742?s=128&d=identicon&r=PG", "display_name": "BoBTFish", "link": "https://stackoverflow.com/users/1171191/bobtfish"}, "edited": false, "score": 0, "creation_date": 1570027529, "post_id": 58203769, "comment_id": 102785929, "body": "I like Yoda conditions, and preventing this bug is just a small part of the reason. I find them very explicit and readable. I think I might be in a minority in that though."}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1570027698, "post_id": 58203769, "comment_id": 102786027, "body": "@BoBTFish &quot;<i>I find them very explicit and readable. I think I might be in a minority in that though.</i>&quot; I too like them, to an extent. For equality/inequality, they just as readable, as non-Yoda condition, to me. I struggle reading less-than/more-than (<code>5 &gt;= someNumber</code>) type of conditions, though."}, {"owner": {"reputation": 135, "user_id": 11290028, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wcKqc.jpg?s=128&g=1", "display_name": "SamsyTheUnicorn", "link": "https://stackoverflow.com/users/11290028/samsytheunicorn"}, "reply_to_user": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 1, "creation_date": 1570027708, "post_id": 58203769, "comment_id": 102786036, "body": "@AlgirdasPreid\u017eius I thought I had a &quot;cout&quot; before the &quot;while&quot; so I would have some record of the function being called, but it appears i removed that in one of my edits and I&#39;ve still not learned how to properly use the debug tools on my IDE.  BoBTFish, just noticed those other issues with assignments, after fixing them all (making sure to use equality operators) the program runs smoothly, thanks for the help!"}], "tags": [], "owner": {"reputation": 17871, "user_id": 1171191, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9e7708869e2b3234fbf0e34c9506742?s=128&d=identicon&r=PG", "display_name": "BoBTFish", "link": "https://stackoverflow.com/users/1171191/bobtfish"}, "is_accepted": true, "score": 6, "last_activity_date": 1570081881, "last_edit_date": 1570081881, "creation_date": 1570027009, "answer_id": 58203769, "question_id": 58203742, "link": "https://stackoverflow.com/questions/58203742/why-wont-my-main-function-call-a-void-function/58203769#58203769", "title": "Why won&#39;t my &quot;main()&quot; function call a void function?", "body": "<pre><code>while (isMakingSettlement = true) {\n</code></pre>\n\n<p>This does not <strong>check</strong> if <code>isMakingSettlement</code> is <code>true</code>. It <strong>sets</strong> <code>isMakingSettlement</code> to <code>true</code>! This means the check in the <code>while</code> loop always sees <code>true</code>, so never stops going round. </p>\n\n<p>Use <code>while (isMakingSettlement == true)</code>.</p>\n\n<p>(Or <code>while (isMakingSettlement)</code>, or <code>while (true == isMakingSettlement)</code>; all are fine, it's a stylistic choice, <a href=\"https://en.wikipedia.org/wiki/Yoda_conditions\" rel=\"nofollow noreferrer\">though the last would have helped you catch this bug!</a>). </p>\n\n<p>Similarly for all your other <code>while</code> loops.</p>\n\n<hr>\n\n<p>Assuming you fix the above, your next problem will be here:</p>\n\n<pre><code>bool isTypeValid = false;\nbool isNationValid = false;\nwhile (isTypeValid == false) { // once corrected\n    // ... never get here!\nwhile (isNationValid == false) { // once corrected\n    // ... never get here!\n</code></pre>\n\n<p>You always set those <code>bool</code>s to <code>false</code>, so these loops are never executed.</p>\n"}], "owner": {"reputation": 135, "user_id": 11290028, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wcKqc.jpg?s=128&g=1", "display_name": "SamsyTheUnicorn", "link": "https://stackoverflow.com/users/11290028/samsytheunicorn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 116, "favorite_count": 0, "closed_date": 1570031700, "accepted_answer_id": 58203769, "answer_count": 1, "score": -1, "last_activity_date": 1570081881, "creation_date": 1570026906, "last_edit_date": 1570027722, "question_id": 58203742, "link": "https://stackoverflow.com/questions/58203742/why-wont-my-main-function-call-a-void-function", "closed_reason": "Not suitable for this site", "title": "Why won&#39;t my &quot;main()&quot; function call a void function?", "body": "<p>I'm working on a program to aid me in world-building that randomly generates a settlement (hamlet, village, town, city) based on a nation (German, Latin, Eastern) that the user chooses. Unfortunately, my code halts right at the \"main()\" function as it won't call the \"settlementCreation()\" void function I created.</p>\n\n<p>I've tried moving the function I want to call above the \"main()\" function, or my usual method of creating the function above, defining it's contents below, but neither of these are working. I can't figure out any other solutions with my limited experience coding C++.</p>\n\n<h2>Main() Function:</h2>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>int main() {\n    char tempChoice{};\n    bool isMakingSettlement = true;\n    while (isMakingSettlement = true) {\n        cout &lt;&lt; \"Create a settlement? (y/n): \";\n        cin &gt;&gt; tempChoice;\n        cout &lt;&lt; \"\\n\\n\";\n        if (tempChoice == 'y') {\n            settlementCreation();\n        } else {\n            isMakingSettlement = false;\n        }\n    }\n    return 0;\n}\n</code></pre>\n\n<h2>settlementCreation() Function:</h2>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>void settlementCreation() {\n    int tempType{};\n    int tempNation{};\n    bool isTypeValid = false;\n    bool isNationValid = false;\n    while (isTypeValid = false) {\n        cout &lt;&lt; \"What type of settlement would you like to create?:\";\n        cout &lt;&lt; \"\\n     1. Hamlet\";\n        cout &lt;&lt; \"\\n     2. Village\";\n        cout &lt;&lt; \"\\n     3. Town\";\n        cout &lt;&lt; \"\\n     4. City\\n\";\n        cin &gt;&gt; tempType;\n        if (tempType &gt;= 1 &amp;&amp; tempType &lt;= 4) {\n            isTypeValid = true;\n        } else {\n            cout &lt;&lt; \" is an invalid choice, please select a valid choice.\";\n        }\n        cout &lt;&lt; \"\\n\\n\";\n    }\n    while (isNationValid = false) {\n        cout &lt;&lt; \"What nation would you like your settlement to be in?: \";\n        cout &lt;&lt; \"\\n     1. Latin\";\n        cout &lt;&lt; \"\\n     2. German\";\n        cout &lt;&lt; \"\\n     3. Eastern\\n\";\n        cin &gt;&gt; tempNation;\n        if (tempNation &gt;= 1 &amp;&amp; tempNation &lt;= 3) {\n            isNationValid = true;\n        } else {\n            cout &lt;&lt; \" is an invalid choice, please select a valid choice.\";\n        }\n        cout &lt;&lt; \"\\n\\n\";\n    }\n    Settlement objSettlement(tempType,tempNation);\n}\n</code></pre>\n\n<p>So the program is supposed to allow the user to choose a nation and a settlement type before redirecting to the Settlement object constructor to create the objSettlement instance of the object.\nThe usual outcome however, is just an infinite loop of:\n\"Create a settlement? (y/n): \"\nWith no responses I've tried closing the program or going to the \"settlementCreation()\" function.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "reply_to_user": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 1, "creation_date": 1570026820, "post_id": 58203640, "comment_id": 102785511, "body": "@MaxLanghof that&#39;s not a problem since it&#39;s only used to provide its type. The actual issue is that <code>&amp;closure</code> is an erased pointer to the original lambda, while <code>wrap_closure</code> is setup to cast it into an <code>std::function</code>."}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "reply_to_user": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1570026933, "post_id": 58203640, "comment_id": 102785580, "body": "@Quentin Right, my bad."}, {"owner": {"reputation": 3299, "user_id": 862106, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/0c70d7ecd4853d40fc8a026ab870334f?s=128&d=identicon&r=PG", "display_name": "Adamski", "link": "https://stackoverflow.com/users/862106/adamski"}, "reply_to_user": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1570027269, "post_id": 58203640, "comment_id": 102785788, "body": "@Quentin storing the closure as a <code>std::function</code> member fixes the issue. Is there a way to achieve the same result without storing the closure?"}], "answers": [{"tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": false, "score": 1, "last_activity_date": 1570027542, "creation_date": 1570027542, "answer_id": 58203913, "question_id": 58203640, "link": "https://stackoverflow.com/questions/58203640/wrapping-a-capturing-lambda-as-a-function-pointer-in-a-template-function/58203913#58203913", "title": "Wrapping a capturing lambda as a function pointer in a template function", "body": "<p>Lambda are not <code>std::function</code>. As you arleady call <code>wrap_closure&lt;Statistics&gt; (closure)</code>, you might use instead:</p>\n\n<pre><code>template &lt;typename T, typename F&gt;\nauto wrap_closure(F&amp; closure) -&gt; void(*)(T, void*)\n{\n    return +[](T data, void* userdata) {\n        (*static_cast&lt;F*&gt;(userdata))(data);\n    };\n}\n</code></pre>\n\n<p>You can go further by using function traits to know argument of the functor to not have to provide <code>T</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "is_accepted": true, "score": 1, "last_activity_date": 1570027548, "creation_date": 1570027548, "answer_id": 58203916, "question_id": 58203640, "link": "https://stackoverflow.com/questions/58203640/wrapping-a-capturing-lambda-as-a-function-pointer-in-a-template-function/58203916#58203916", "title": "Wrapping a capturing lambda as a function pointer in a template function", "body": "<p>The issue is that <code>decltype(closure)</code> inside <code>wrap_closure</code> is <code>std::function&lt;void(Statistics)&gt;</code>, while the original <code>closure</code> whose address you pass in is a lambda. They are not the same type, thus the <code>static_cast</code> through <code>void *</code> has undefined behaviour.</p>\n\n<p>You can fix it either way, either keep the <code>std::function</code> but ensure that both sides agree:</p>\n\n<pre><code>std::function&lt;void(Statistics)&gt; f = closure;\ncall_callback (wrap_closure(f), &amp;f);\n</code></pre>\n\n<p>... which is quite brittle as you've noticed, or get rid of <code>std::function</code> and use the type of <code>closure</code> as-is:</p>\n\n<pre><code>template &lt;typename... T, typename Callable&gt;\nauto wrap_closure(Callable const &amp;) -&gt; void(*)(T..., void*)\n{\n    return +[](T... data, void* userdata) {\n        (*static_cast&lt;Callable*&gt;(userdata))(data...);\n    };\n}\n\n// Usage\ncall_callback (wrap_closure&lt;Statistics&gt;(closure), &amp;closure);\n</code></pre>\n\n<p>Variadic salt and pepper free of charge.</p>\n"}], "owner": {"reputation": 3299, "user_id": 862106, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/0c70d7ecd4853d40fc8a026ab870334f?s=128&d=identicon&r=PG", "display_name": "Adamski", "link": "https://stackoverflow.com/users/862106/adamski"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "accepted_answer_id": 58203916, "answer_count": 2, "score": 2, "last_activity_date": 1570027548, "creation_date": 1570026551, "last_edit_date": 1570027062, "question_id": 58203640, "link": "https://stackoverflow.com/questions/58203640/wrapping-a-capturing-lambda-as-a-function-pointer-in-a-template-function", "title": "Wrapping a capturing lambda as a function pointer in a template function", "body": "<p>I have the following code, which converts a capturing lambda to non-capturing lambda so it can be passed as a function pointer to a C-style API:</p>\n\n<p>(<code>Statistics</code> here is a simple struct)</p>\n\n<pre><code>auto closure = [&amp;](Statistics stats) {\n    setStats(stats);\n};\n\nauto wrapper = +[](Statistics stats, void* userdata) {\n    (*static_cast&lt;decltype(closure)*&gt;(userdata))(stats);\n};\n\ncall_callback (wrapper, &amp;closure);\n</code></pre>\n\n<p>Since this pattern will be used a few times in my application, I wanted to generalise it into a templated function:</p>\n\n<pre><code>template &lt;typename T&gt;\nauto wrap_closure(std::function&lt;void(T)&gt; closure) -&gt; void(*)(T, void*)\n{\n    auto wrapper = +[](T data, void* userdata) {\n        (*static_cast&lt;decltype(closure)*&gt;(userdata))(data);\n    };\n    return wrapper;\n}\n</code></pre>\n\n<p>However if I try to use it I get a EXC_BAD_ACCESS exception in <code>std::function</code>:</p>\n\n<pre><code>auto closure = [&amp;](Statistics stats) {\n    setStats(stats);\n};\n\ncall_callback (wrap_closure&lt;Statistics&gt; (closure), &amp;closure);\n</code></pre>\n\n<p>Should I not be using <code>std::function</code> here? </p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 1, "creation_date": 1570026625, "post_id": 58203592, "comment_id": 102785394, "body": "You may ignore the warning. The data members having the type std::string of the class will be default-initialized."}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 1, "creation_date": 1570027808, "post_id": 58203592, "comment_id": 102786099, "body": "This warning is just badly implemented in my opinion. The whole point of <code>= default</code>ing constructors is to rely on the default constructors of all members (and base classes). The warning has a purpose when some members are unmentioned in a member initializer list (&quot;did you forget to initialize them?&quot;) but there is nothing gained from the compiler coughing up a warning where you are already explicitly stating your intent (&quot;default everything&quot;)."}, {"owner": {"reputation": 739, "user_id": 7262393, "user_type": "registered", "accept_rate": 77, "profile_image": "https://graph.facebook.com/10209827239390452/picture?type=large", "display_name": "Dan", "link": "https://stackoverflow.com/users/7262393/dan"}, "edited": false, "score": 0, "creation_date": 1570028837, "post_id": 58203592, "comment_id": 102786733, "body": "Exactly what I was thinking Max but wasn&#39;t comprehending that people much more versed in this than I could do something so silly. I appreciate all the responses greatly!"}], "answers": [{"comments": [{"owner": {"reputation": 739, "user_id": 7262393, "user_type": "registered", "accept_rate": 77, "profile_image": "https://graph.facebook.com/10209827239390452/picture?type=large", "display_name": "Dan", "link": "https://stackoverflow.com/users/7262393/dan"}, "edited": false, "score": 0, "creation_date": 1570027883, "post_id": 58203960, "comment_id": 102786129, "body": "Thank you! I did not see the part about it being a bug in my compiler. In my defense it was about the 1000th page I had visited to try and figure it out but much appreciate the feedback none the less as I was beginning to go a little crazy. I wonder if there will be updates for the compiler to fix this."}], "tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": true, "score": 1, "last_activity_date": 1570027712, "creation_date": 1570027712, "answer_id": 58203960, "question_id": 58203592, "link": "https://stackoverflow.com/questions/58203592/defaulted-default-constructor-triggers-werror-effc/58203960#58203960", "title": "Defaulted default constructor triggers -Werror=effc", "body": "<p>As the linked post says, that warning is a <em>bug</em> in your compiler.</p>\n\n<p>The code was fine, and the initialisation was fine. The <code>default</code>ed default constructor (!) will default-construct the string members too.</p>\n\n<p>Your attempt to workaround the warning in another way involved creating your own default constructor, even though you've declared it as <code>default</code>ed. That's like getting in and driving an automatic car, then opening the bonnet <em>en route</em> and trying to change gear yourself.</p>\n\n<p>Removing <code>default</code> then makes it just a normal, user-declared default constructor and everything's fine again&hellip; if more verbose than it needed to be.</p>\n\n<p>(The re-use of the word \"default\" is a really unfortunate choice by the committee!)</p>\n"}], "owner": {"reputation": 739, "user_id": 7262393, "user_type": "registered", "accept_rate": 77, "profile_image": "https://graph.facebook.com/10209827239390452/picture?type=large", "display_name": "Dan", "link": "https://stackoverflow.com/users/7262393/dan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 153, "favorite_count": 0, "accepted_answer_id": 58203960, "answer_count": 1, "score": 0, "last_activity_date": 1570027899, "creation_date": 1570026444, "last_edit_date": 1570027899, "question_id": 58203592, "link": "https://stackoverflow.com/questions/58203592/defaulted-default-constructor-triggers-werror-effc", "title": "Defaulted default constructor triggers -Werror=effc", "body": "<p>Teaching myself C++ and working on an example from a book I picked up at the local Barnes and Noble. \"Professional C++ by Marc Greggoire\". I didn't realize that this book was meant for someone with a little more experience than myself but I've been muddling through it with the help of online tutorials and of course SO.</p>\n\n<p>The example is an Employee class that has two constructors. One explicitly defaulted and the other intitializing private members with references.</p>\n\n<p>Using Code Blocks IDE this code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\nusing namespace std;\n\nclass Employee\n{\npublic:\n\n    Employee() = default;                           //default constructor\n    Employee(const std::string&amp; firstName,\n             const std:: string&amp; lastName);\n\nprivate:\n    std::string mFirstName;\n    std::string mLastName;\n};\n\nEmployee::Employee(const string&amp; firstName, const string&amp; lastName) : mFirstName(firstName), mLastName(lastName)\n{\n}\n\nint main()\n{\n    cout &lt;&lt; \"Testing the Employee class.\" &lt;&lt; endl;\n\n    Employee emp;\n\n    return 0;\n}\n</code></pre>\n\n<p>generates a compiler warning on the explicitly defaulted constructor that the variables should be initialized in a member initialization list <code>[-Werror=effc]</code>. </p>\n\n<p>Quick search of SO shows that maybe this can be ignored.</p>\n\n<p><a href=\"https://stackoverflow.com/questions/14002454/can-i-ignore-the-gcc-warning-foom-bar-should-be-initialized-in-the-member-i\">Can I ignore the gcc warning: \u2018Foo::m_bar\u2019 should be initialized in the member initialization list [-Weffc++]</a></p>\n\n<p>Since I'm not quite understanding why this is ok to ignore, I tried anyway to get the warning to go away by providing a member initialization in a definition for the default constructor:</p>\n\n<pre><code>Employee::Employee() : mFirstName(\"Empty\"), mLastName(\"Empty\")\n{\n}\n</code></pre>\n\n<p>only to find that an error has now been generated by the compiler about the explicitly defaulted constructor, \"error: definition of explicitly-defaulted 'Employee::Employee()' and the previous warning remaining. Another SO search gave me this:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/13576055/how-is-default-different-from-for-default-constructor-and-destructor\">How is &quot;=default&quot; different from &quot;{}&quot; for default constructor and destructor?</a></p>\n\n<p>It seems to indicate that using <code>Employee() = default;</code> would be more clear but using <code>Employee();</code> will still work. So I kept the default constructor initialization and changed the default constructor declaration from:</p>\n\n<pre><code>Employee() = default;\n</code></pre>\n\n<p>to </p>\n\n<pre><code>Employee();\n</code></pre>\n\n<p>Now the compiler is happy with the new default constructor declaration with member initialization list but I'd really like to understand what is going on here. I understand completely why (from the SO discussions) the compiler errors if there is an explicitly defaulted constructor yet a user provides an initialization list. This makes sense. What doesn't make sense to me is why the compiler is asking for one when clearly, providing one with an explicitly defaulted constructed is contradictory. </p>\n"}, {"tags": ["c++", "unit-testing", "c++11", "iostream", "nullptr"], "comments": [{"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 3, "creation_date": 1570026445, "post_id": 58203400, "comment_id": 102785279, "body": "You are dereferencing a <code>nullptr</code> with <code>*printStream &lt;&lt; ...</code>. That is undefined behavior. Note that you are not <i>feeding</i> a <code>nullptr</code> <i>to</i> <code>std::ostream</code> but trying to <i>use</i> <code>nullptr</code> <i>as</i> a <code>std::ostream</code>. What is the behavior you expect?"}, {"owner": {"reputation": 1155, "user_id": 6449910, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OvekE.jpg?s=128&g=1", "display_name": "SeSodesa", "link": "https://stackoverflow.com/users/6449910/sesodesa"}, "reply_to_user": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 1, "creation_date": 1570026707, "post_id": 58203400, "comment_id": 102785444, "body": "@Max Langhof Ah, true that. Maybe the sensible thing to do is to not perform that particular test at all?"}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 2, "creation_date": 1570026782, "post_id": 58203400, "comment_id": 102785489, "body": "Another sensible thing would be to take the <code>printStream</code> by reference. I don&#39;t think the function can do anything meaningful when given a <code>nullptr</code>, so why allow it semantically?"}, {"owner": {"reputation": 1155, "user_id": 6449910, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OvekE.jpg?s=128&g=1", "display_name": "SeSodesa", "link": "https://stackoverflow.com/users/6449910/sesodesa"}, "reply_to_user": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 1, "creation_date": 1570027584, "post_id": 58203400, "comment_id": 102785965, "body": "So define <code>Date::print</code> as <code>void Date::print(std::ostream &amp;printStream) const;</code> instead of <code>void Date::print(std::ostream *printStream) const;</code>?"}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 1, "creation_date": 1570027611, "post_id": 58203400, "comment_id": 102785985, "body": "Yes, that looks good."}, {"owner": {"reputation": 16020, "user_id": 9716597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f97c613dca0b157b40551a0d756abeb?s=128&d=identicon&r=PG&f=1", "display_name": "L. F.", "link": "https://stackoverflow.com/users/9716597/l-f"}, "edited": false, "score": 0, "creation_date": 1570085045, "post_id": 58203400, "comment_id": 102803748, "body": "I don&#39;t get the question.  What else do you think dereferencing a null pointer means?"}], "owner": {"reputation": 1155, "user_id": 6449910, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OvekE.jpg?s=128&g=1", "display_name": "SeSodesa", "link": "https://stackoverflow.com/users/6449910/sesodesa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 49, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1570056508, "creation_date": 1570025877, "last_edit_date": 1570056508, "question_id": 58203400, "link": "https://stackoverflow.com/questions/58203400/why-does-feeding-a-nullptr-to-stdostream-produce-a-signal-11-aka-segmentation", "title": "Why does feeding a nullptr to std::ostream produce a signal 11, aka segmentation fault, from the OS, and how do I handle it?", "body": "<p>I have a <code>Date</code> class with a <code>Date::print</code> method, that I'm attempting to test. The method itself is defined as</p>\n\n<pre><code>void Date::print(std::ostream *printStream) const\n{\n  invariant();\n   *printStream &lt;&lt; day_ &lt;&lt; '.' &lt;&lt; month_ &lt;&lt; '.' &lt;&lt; year_;\n}\n</code></pre>\n\n<p>and the test function as</p>\n\n<pre><code>void Unittest::print()\n{\n    // Creating and printing the date into string, checking if ok\n    Date d(4, 5, 2000);\n    std::ostringstream printStream;\n    d.print(&amp;printStream);\n    QCOMPARE(printStream.str(), std::string(\"4.5.2000\"));\n\n    // Testing with a nullptr\n    d.print(nullptr);\n}\n</code></pre>\n\n<p>The valid date passes the test, no problem, but testing for a <code>nullptr</code> produces a segmentation fault. How should I modify the method definition to handle the <code>nullptr</code> case?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user10957435"}, "edited": false, "score": 0, "creation_date": 1570026294, "post_id": 58203354, "comment_id": 102785180, "body": "As pe your second question: are you looking for a <a href=\"https://sourcemaking.com/design_patterns/state/cpp/1\" rel=\"nofollow noreferrer\">state machine</a>?"}, {"owner": {"reputation": 2673, "user_id": 11292489, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cucr6.jpg?s=128&g=1", "display_name": "Gilles-Philippe Paill&#233;", "link": "https://stackoverflow.com/users/11292489/gilles-philippe-paill%c3%a9"}, "edited": false, "score": 2, "creation_date": 1570026339, "post_id": 58203354, "comment_id": 102785211, "body": "As a first note, <code>*IWorldState state = (IWorldState)temp;</code> is not valid and won&#39;t compile since the syntax is not correct. If I understood correctly, it should instead be <code>IWorldState * state = (IWorldState*)&amp;temp;</code>. However, this code returns a pointer to a local object that is destroyed right after return, which is really bad. You need to <code>return new MainMenuState</code>"}, {"owner": {"reputation": 2673, "user_id": 11292489, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cucr6.jpg?s=128&g=1", "display_name": "Gilles-Philippe Paill&#233;", "link": "https://stackoverflow.com/users/11292489/gilles-philippe-paill%c3%a9"}, "edited": false, "score": 0, "creation_date": 1570026401, "post_id": 58203354, "comment_id": 102785256, "body": "To answer your question, separate the definition from the declaration. Declare both classes, then define the methods."}, {"owner": {"reputation": 129, "user_id": 6308045, "user_type": "registered", "profile_image": "https://graph.facebook.com/535847139935806/picture?type=large", "display_name": "Alfredo Awesome Monazite", "link": "https://stackoverflow.com/users/6308045/alfredo-awesome-monazite"}, "edited": false, "score": 0, "creation_date": 1570030514, "post_id": 58203354, "comment_id": 102787748, "body": "@Chipster, a state machine is exactly what I want, thankyou for the link, I think it will come in helpful for reference"}, {"owner": {"reputation": 129, "user_id": 6308045, "user_type": "registered", "profile_image": "https://graph.facebook.com/535847139935806/picture?type=large", "display_name": "Alfredo Awesome Monazite", "link": "https://stackoverflow.com/users/6308045/alfredo-awesome-monazite"}, "reply_to_user": {"reputation": 2673, "user_id": 11292489, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cucr6.jpg?s=128&g=1", "display_name": "Gilles-Philippe Paill&#233;", "link": "https://stackoverflow.com/users/11292489/gilles-philippe-paill%c3%a9"}, "edited": false, "score": 0, "creation_date": 1570030729, "post_id": 58203354, "comment_id": 102787857, "body": "@Gilles-PhilippePaill&#233; thankyou, didn&#39;t occur that the object would be destroyed on leaving the function, separating the declaration from the definition got me a lot further"}], "answers": [{"comments": [{"owner": {"reputation": 129, "user_id": 6308045, "user_type": "registered", "profile_image": "https://graph.facebook.com/535847139935806/picture?type=large", "display_name": "Alfredo Awesome Monazite", "link": "https://stackoverflow.com/users/6308045/alfredo-awesome-monazite"}, "edited": false, "score": 0, "creation_date": 1570030904, "post_id": 58203701, "comment_id": 102787954, "body": "Thankyou so much, I hadn&#39;t heard of std::make_unique or std::unique_ptr before. You are a life saver tho, this response answered the question and answered like 5 follow up questions at the same time!"}], "tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": true, "score": 1, "last_activity_date": 1570026744, "creation_date": 1570026744, "answer_id": 58203701, "question_id": 58203354, "link": "https://stackoverflow.com/questions/58203354/how-to-create-child-a-from-child-b-and-cast-to-parent/58203701#58203701", "title": "how to create child A from child B and cast to Parent?", "body": "<p>You have to split (forward) declaration from definition:</p>\n\n<pre><code>class IWorldState\n{\npublic:\n    virtual ~IWorldState() = default;\n    virtual std::unique_ptr&lt;IWorldState&gt; handleInput(std::string input) = 0;\n};\n\nclass AboutState : public IWorldState\n{\npublic:\n    AboutState() = default;\n    std::unique_ptr&lt;IWorldState&gt; handleInput(std::string input) override;\n};\n\nclass MainMenuState : public IWorldState\n{\npublic:\n    MainMenuState() = default\n    std::unique_ptr&lt;IWorldState&gt; handleInput(std::string input) override\n};\n\n// in cpp, else add inline\n\nstd::unique_ptr&lt;IWorldState&gt; AboutState::handleInput(std::string input) {\n    return std::make_unique&lt;MainMenuState&gt;();\n}\nstd::unique_ptr&lt;IWorldState&gt; MainMenuState::handleInput(std::string input) {\n    return std::make_unique&lt;AboutState&gt;();\n}\n</code></pre>\n"}], "owner": {"reputation": 129, "user_id": 6308045, "user_type": "registered", "profile_image": "https://graph.facebook.com/535847139935806/picture?type=large", "display_name": "Alfredo Awesome Monazite", "link": "https://stackoverflow.com/users/6308045/alfredo-awesome-monazite"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "closed_date": 1570035842, "accepted_answer_id": 58203701, "answer_count": 1, "score": 0, "last_activity_date": 1570027137, "creation_date": 1570025737, "last_edit_date": 1570026430, "question_id": 58203354, "link": "https://stackoverflow.com/questions/58203354/how-to-create-child-a-from-child-b-and-cast-to-parent", "closed_reason": "Duplicate", "title": "how to create child A from child B and cast to Parent?", "body": "<p>Context: I want to utilise state objects within my program to determine how the program functions during a state. I have an abstract class <code>State</code> that each state derives from (to keep things simple lets say we have <code>MenuState</code> and <code>AboutState</code>), The current state is stored as type State.</p>\n\n<p>I want to be able to create a new instance of <code>AboutState</code> from within <code>MenuState</code> and vice versa so that I can control which program state I am currently in and change state easily (This would return a State object since that is what my current states type is)</p>\n\n<p>The problem I am getting is obviously that if I first create <code>AboutState</code>, <code>MenuState</code> does not exist yet (to the compiler) and crashes on compile. I thought to fix this by forward declaring <code>MenuState</code> but I cannot cast <code>MenuState</code> in the function because I have only forward declared it rather than creating a full class.</p>\n\n<p>Essentially How do I forward declare / fix this circular reference issue, so that I can create each of the objects from the other?</p>\n\n<p>I primarily use Java so excuse the obvious errors below but you get the point, I can't cast <code>temp</code> -> <code>IWorldState</code> even if I forward declare. (I think)</p>\n\n<pre><code>class AboutState : public IWorldState\n{\npublic:\n    AboutState() {};\n    virtual IWorldState* handleInput(std::string input) {\n        MainMenuState temp;\n                *IWorldState state = (IWorldState)temp;\n        return state;\n        }\n};\n\nclass MainMenuState : public IWorldState\n{\npublic:\n    MainMenuState() {};\n    virtual IWorldState* handleInput(std::string input) {\n                 AboutState temp;\n                *IWorldState state = (IWorldState)temp;\n        return state;\n        }\n};\n</code></pre>\n\n<p>Also don't know know if It's ok to ask in the same question, but is there a more appropriate way to do this kinda functionality with objects or is there a different type of approach to moving between the different states? I considered the idea of creating all states at the start and passing the next state as a parameter to the constructor but i feel It's unnecessary if I can get this working.</p>\n"}, {"tags": ["c++", "lambda", "tuples", "priority-queue"], "comments": [{"owner": {"reputation": 17331, "user_id": 8950365, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c6ba3b19f86f1bea8cf76e691db4349?s=128&d=identicon&r=PG&f=1", "display_name": "rafix07", "link": "https://stackoverflow.com/users/8950365/rafix07"}, "edited": false, "score": 1, "creation_date": 1570025758, "post_id": 58203319, "comment_id": 102784826, "body": "Use uniform initialization to init member variable <code>P_que_trainz trainLine_que{tup_cmp};</code>."}, {"owner": {"reputation": 9427, "user_id": 7703024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94e363e0e11695395e04f814233b6274?s=128&d=identicon&r=PG", "display_name": "super", "link": "https://stackoverflow.com/users/7703024/super"}, "edited": false, "score": 1, "creation_date": 1570025911, "post_id": 58203319, "comment_id": 102784923, "body": "<code>P_que_trainz trainLine_que(tup_cmp);</code> is actually taken for a function declaration by the language, when <code>()</code> is used. Hence the <code>tup_cmp is not a type</code> error. As rafix pointed out you need to use <code>{}</code> for initialization within the class definition."}, {"owner": {"reputation": 33, "user_id": 8865384, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-zQo-JYLckgw/AAAAAAAAAAI/AAAAAAAAAHU/sy_waMb_bKk/photo.jpg?sz=128", "display_name": "Zepalz", "link": "https://stackoverflow.com/users/8865384/zepalz"}, "edited": false, "score": 0, "creation_date": 1570025987, "post_id": 58203319, "comment_id": 102784965, "body": "omg. yes ahhh  uniform initialization... yes yes. i always forget that   syntax thx you!"}], "answers": [{"tags": [], "owner": {"reputation": 156, "user_id": 10674278, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d7df9800c64517b64ebb413e0fec517?s=128&d=identicon&r=PG&f=1", "display_name": "ShockCoding", "link": "https://stackoverflow.com/users/10674278/shockcoding"}, "is_accepted": false, "score": 0, "last_activity_date": 1570026324, "creation_date": 1570026324, "answer_id": 58203546, "question_id": 58203319, "link": "https://stackoverflow.com/questions/58203319/method-for-initializing-a-priority-queue-with-a-lambda-compare/58203546#58203546", "title": "Method for initializing a priority queue with a lambda compare", "body": "<p><strong>trainLine_que</strong> is a member variable, so just create a constructor initializing it this way:</p>\n\n<pre><code>class usedhere {\n\npublic:\n    usedhere() : trainLine_que(tup_cmp) {}\n\nprivate:\n    P_que_trainz trainLine_que;\n\n};\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 8865384, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-zQo-JYLckgw/AAAAAAAAAAI/AAAAAAAAAHU/sy_waMb_bKk/photo.jpg?sz=128", "display_name": "Zepalz", "link": "https://stackoverflow.com/users/8865384/zepalz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 135, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1572239424, "creation_date": 1570025620, "last_edit_date": 1572239424, "question_id": 58203319, "link": "https://stackoverflow.com/questions/58203319/method-for-initializing-a-priority-queue-with-a-lambda-compare", "title": "Method for initializing a priority queue with a lambda compare", "body": "<p>I'm trying to initialize a custom priority queue, which is in a class as a member object. It takes a tuple and uses a lambda function as the comparator.</p>\n\n<p>I've tried a few different methods of setting this up all seem to fail on different accords, </p>\n\n<p>In the <code>usedhere.h</code> file I have:</p>\n\n<pre><code> typedef std::tuple&lt;trainz*,R_linez*,float&gt; train_tuple;\n\nauto tup_cmp =[](train_tuple lhs, train_tuple rhs)\n  {\n    return std::get&lt;2&gt;(lhs) &lt; std::get&lt;2&gt;(rhs);\n  };\n\nusing P_que_trainz = std::priority_queue&lt;train_tuple,std::vector&lt;train_tuple&gt;,decltype(tup_cmp)&gt;;\n\nclass usedhere{\nprivate : \nP_que_trainz trainLine_que(tup_cmp);\n};\n</code></pre>\n\n<p>This gives:</p>\n\n<blockquote>\n  <p>error:  \u2018<code>tup_cmp</code>\u2019 is not a type</p>\n</blockquote>\n\n<p>If I just do <code>P_que_trainz trainLine_que;</code> in the header and \n<code>P_que_trainz trainLine_que(tup_cmp);</code>\n in the constructor, I get a mess of error about template deduction fail. </p>\n\n<p>If I move the lambda to inside the class declaration, like this: </p>\n\n<pre><code>class usedhere\n{\n private : \n auto tup_cmp =[](train_tuple lhs, train_tuple rhs) ... etc\n};\n</code></pre>\n\n<p>then I get</p>\n\n<blockquote>\n  <p><code>auto</code> is not allowed in header.</p>\n</blockquote>\n\n<p>If I just put <code>private: P_que_trainz trainLine_que();</code>, I get</p>\n\n<blockquote>\n  <p>error: invalid use of member function. did you forget the \u2018()\u2019</p>\n</blockquote>\n\n<p>When later I try using it in a function, say in \n<code>void usedhere::dispatchtrain(){ ...for (size_t i = 0; i&lt; trainLine_que.size(); i++)...}</code></p>\n\n<p>I'm sure I'm just missing a simple order to it all.  But I'm out of ideas to experiment.</p>\n"}, {"tags": ["c++", "qt", "environment-variables", "qt5", "qapplication"], "answers": [{"comments": [{"owner": {"reputation": 141, "user_id": 2033725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7b79afeed0254c6f4336c21aa9cab60?s=128&d=identicon&r=PG", "display_name": "Klypto", "link": "https://stackoverflow.com/users/2033725/klypto"}, "edited": false, "score": 0, "creation_date": 1570127197, "post_id": 58209382, "comment_id": 102824926, "body": "The problem is the environment variable in question seems to require that it be set before a QApplication instance is generated.  If I put it at any point after a QApplication constructor call it will not work.  Doesn&#39;t matter if I completely quit &amp; destroy destroy QApplication and re-create it which makes me think QT caches this feature in the process itself.  When I say apply in this case I don&#39;t mean accessible to the QApp (which I did confirm it is), but that core QT&#39;s library functions respond to it&#39;s existance."}, {"owner": {"reputation": 2002, "user_id": 2763000, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a5ea0af3a37d8989110a8fb4c656efb2?s=128&d=identicon&r=PG&f=1", "display_name": "goug", "link": "https://stackoverflow.com/users/2763000/goug"}, "reply_to_user": {"reputation": 141, "user_id": 2033725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7b79afeed0254c6f4336c21aa9cab60?s=128&d=identicon&r=PG", "display_name": "Klypto", "link": "https://stackoverflow.com/users/2033725/klypto"}, "edited": false, "score": 0, "creation_date": 1570129425, "post_id": 58209382, "comment_id": 102825860, "body": "Ah, I overlooked that you were trying to manipulate one of QT&#39;s environment variables rather than one of your own. That&#39;s entirely possible that the value is being read from the environment when the QApplication is started and then cached from there one. That makes sense because searching the environment is much slower than just accessing an internal data member. I checked to see if there&#39;s a method to enable the debugging on the fly, and I didn&#39;t find one. I think it might not be possible to implement this feature."}], "tags": [], "owner": {"reputation": 2002, "user_id": 2763000, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a5ea0af3a37d8989110a8fb4c656efb2?s=128&d=identicon&r=PG&f=1", "display_name": "goug", "link": "https://stackoverflow.com/users/2763000/goug"}, "is_accepted": false, "score": 1, "last_activity_date": 1570050466, "creation_date": 1570050466, "answer_id": 58209382, "question_id": 58203316, "link": "https://stackoverflow.com/questions/58203316/apply-changed-environment-variables-to-qapplication-at-runtime/58209382#58209382", "title": "Apply changed environment variables to QApplication at runtime", "body": "<p>You can set the environment variable at any point in your program's execution, and further calls to qgetenv will return the new value. You don't have to discard and recreate your QApplication. Just set the environment variable when the user chooses that configuration option, and it will be in effect during the rest of your application's execution time.</p>\n\n<p>I think you're getting confused between what is your \"application\" and what QApplication is. QApplication is an object within your application. Discarding the QApplication object and creating a new one doesn't restart your overall application. </p>\n\n<p>This is probably tied into confusion over the idea that your application inherits the environment when you start it, and changes to the environment outside of your application don't take effect until you stop your application. However, in this case, the qputenv call is updating YOUR application's copy of the environment. It isn't changing the external environment that you initially inherited.</p>\n"}], "owner": {"reputation": 141, "user_id": 2033725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7b79afeed0254c6f4336c21aa9cab60?s=128&d=identicon&r=PG", "display_name": "Klypto", "link": "https://stackoverflow.com/users/2033725/klypto"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 358, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1570050466, "creation_date": 1570025613, "last_edit_date": 1570026998, "question_id": 58203316, "link": "https://stackoverflow.com/questions/58203316/apply-changed-environment-variables-to-qapplication-at-runtime", "title": "Apply changed environment variables to QApplication at runtime", "body": "<p>I'm trying to run </p>\n\n<pre><code>qputenv(\"QT_DEBUG_PLUGINS\", \"1\");\n</code></pre>\n\n<p>at runtime after an evaluation made by a QT application's MainWindow. </p>\n\n<p>I'm assuming that for it the new env vars to actually apply I must close the initialized QApplication and restart it but I am unable to make it work.  </p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;QApplication&gt;\n#include \"mainwindow.h\"\n\n\nint main(int argc, char *argv[])\n{\n    int exitCode = 0;\n    do\n    {\n        //exitCode = EXIT_CHANGE_DEBUG_FLAG; //This will make it ALWAYS work\n\n        //Double-checking for testing only, still does not work.\n        if(exitCode == EXIT_CHANGE_DEBUG_FLAG)\n        {\n            qputenv(\"QT_DEBUG_PLUGINS\", \"1\"); // Code does fire on 2nd pass, new app/window still ignores it\n        }\n        QApplication app(argc, argv);\n        MainWindow mainWindow;\n        mainWindow.show();\n        exitCode = app.exec();\n        //We can't change this once the app has been established.\n        qputenv(\"QT_DEBUG_PLUGINS\", \"1\");\n        exitCode = EXIT_CHANGE_DEBUG_FLAG; //for testing only\n    }\n    while(exitCode == EXIT_CHANGE_DEBUG_FLAG);\n    return(exitCode);\n}\n</code></pre>\n\n<p>The application does restart, however it does not behave as if QT_DEBUG_PLUGINS is set.  If I move that line above QApplication it always works but I want this to be a configuration option available at runtime.</p>\n\n<p>I feel like I'm trying to do either the impossible or I've overlooked something silly.</p>\n"}, {"tags": ["c++", "exception", "c++14", "move-semantics", "unique-ptr"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 6, "creation_date": 1570025154, "post_id": 58203185, "comment_id": 102784488, "body": "Try with <code>void f(std::unique_ptr&lt;int&gt;)</code> instead. <code>std::unique_ptr&lt;int&gt; &amp;&amp;</code> is just a reference."}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 4, "creation_date": 1570025305, "post_id": 58203185, "comment_id": 102784573, "body": "The pointer has not been moved from.  <code>std::move</code> does not perform a move."}], "answers": [{"comments": [{"owner": {"reputation": 1810, "user_id": 3018243, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/469fdc7e2f05894b3c6d98a389c869ab?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Cox", "link": "https://stackoverflow.com/users/3018243/steve-cox"}, "edited": false, "score": 0, "creation_date": 1570025761, "post_id": 58203269, "comment_id": 102784828, "body": "agh, the exception was a red herring, from a bigger codebase. this makes sense. I&#39;ll accept once the time limit ends"}], "tags": [], "owner": {"reputation": 144568, "user_id": 3309790, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7d1c7e499132b9945b412ac79d0e22f7?s=128&d=identicon&r=PG&f=1", "display_name": "songyuanyao", "link": "https://stackoverflow.com/users/3309790/songyuanyao"}, "is_accepted": true, "score": 4, "last_activity_date": 1570026108, "last_edit_date": 1592644375, "creation_date": 1570025397, "answer_id": 58203269, "question_id": 58203185, "link": "https://stackoverflow.com/questions/58203185/why-is-a-member-unique-ptr-left-non-null-after-stdmove-to-a-throwing-functio/58203269#58203269", "title": "Why is a member unique_ptr&lt;&gt; left non-null after std::move to a throwing function?", "body": "<p><a href=\"https://en.cppreference.com/w/cpp/utility/move\" rel=\"nofollow noreferrer\"><code>std::move</code></a> just converts the object to rvalue, but won't perform move operation.</p>\n<p>(emphasis mine)</p>\n<blockquote>\n<p><code>std::move</code> is used to <strong>indicate that an object <code>t</code> may be &quot;moved from&quot;</strong>, i.e. allowing the efficient transfer of resources from t to another object.</p>\n<p>In particular, <code>std::move</code> produces an xvalue expression that identifies its argument t. It is exactly <strong>equivalent to a <code>static_cast</code> to an rvalue reference type</strong>.</p>\n</blockquote>\n<p>Your 2nd snippet works because you <em>moved</em> <code>x</code> into <code>y</code> explicitly.</p>\n<p>To fix the 1st snippet you can also perform the move operation explicitly, e.g.</p>\n<pre><code>void f(std::unique_ptr&lt;int&gt; &amp;&amp; p) { \n    std::unique_ptr&lt;int&gt; t = std::move(p); // move-construct t from p\n    throw &quot;fail&quot;; \n}\n</code></pre>\n<p>or just</p>\n<pre><code>void f(std::unique_ptr&lt;int&gt; p) { throw &quot;fail&quot;; }\n</code></pre>\n<p>For the latter, given <code>f(std::move(x));</code>, the parameter <code>p</code> is <em>moved from</em> the argument <code>x</code>.</p>\n"}], "owner": {"reputation": 1810, "user_id": 3018243, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/469fdc7e2f05894b3c6d98a389c869ab?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Cox", "link": "https://stackoverflow.com/users/3018243/steve-cox"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 100, "favorite_count": 1, "closed_date": 1570025424, "accepted_answer_id": 58203269, "answer_count": 1, "score": 5, "last_activity_date": 1570026108, "creation_date": 1570025096, "last_edit_date": 1570025980, "question_id": 58203185, "link": "https://stackoverflow.com/questions/58203185/why-is-a-member-unique-ptr-left-non-null-after-stdmove-to-a-throwing-functio", "closed_reason": "Duplicate", "title": "Why is a member unique_ptr&lt;&gt; left non-null after std::move to a throwing function?", "body": "<p>When I move a <code>unique_ptr&lt;&gt;</code> into a function that throws, the moved-from pointer is left non-null. Is this the normal behavior?</p>\n\n<p>Here's two test programs that show the behavior. I can observe the unique pointer in the destructor of the class:</p>\n\n<pre><code>#include &lt;memory&gt;\n#include &lt;iostream&gt;\n\nvoid f(std::unique_ptr&lt;int&gt; &amp;&amp;) { throw \"fail\"; }\nstruct except_move_tester\n{\n    std::unique_ptr&lt;int&gt; x;\n    except_move_tester()\n      : x(std::make_unique&lt;int&gt;(0))\n    {}\n    ~except_move_tester() { std::cout &lt;&lt; \"x at destructor: \" &lt;&lt; x.get() &lt;&lt; std::endl; }\n    void g()\n    {\n        std::cout &lt;&lt; \"x at g: \" &lt;&lt; x.get() &lt;&lt; std::endl;\n        f(std::move(x));\n    }\n};\n\nint main()\n{\n    try {\n        except_move_tester t;\n        t.g();\n    } catch (...) {}\n}\n</code></pre>\n\n<p>which when run gives the output:</p>\n\n<pre><code>x at g: 0x7f818b402ac0\nx at destructor: 0x7f818b402ac0\n</code></pre>\n\n<p>If I modify the above listing as follows (just added a temporary at the site of the function call) I get the exception safe behavior I would normally expect:</p>\n\n<pre><code>#include &lt;memory&gt;\n#include &lt;iostream&gt;\n\nvoid f(std::unique_ptr&lt;int&gt; &amp;&amp;) { throw \"fail\"; }\nstruct except_move_tester\n{\n    std::unique_ptr&lt;int&gt; x;\n    except_move_tester()\n      : x(std::make_unique&lt;int&gt;(0))\n    {}\n    ~except_move_tester() { std::cout &lt;&lt; \"x at destructor: \" &lt;&lt; x.get() &lt;&lt; std::endl; }\n    void g()\n    {\n        std::cout &lt;&lt; \"x at g: \" &lt;&lt; x.get() &lt;&lt; std::endl;\n        auto y = std::move(x);\n        f(std::move(y));\n    }\n};\n\nint main()\n{\n    try {\n        except_move_tester t;\n        t.g();\n    } catch (...) {}\n}\n</code></pre>\n\n<p>which when run gives the output:</p>\n\n<pre><code>x at g: 0x7f818b402ac0\nx at destructor: 0x0\n</code></pre>\n\n<p>I've been moving unique_ptr's into functions under the assumption it was a sort of atomic exception safe operation, but this seems to indicate that an exception can leave a unique pointer in an unexpected state.</p>\n"}, {"tags": ["c++", "boost", "cmake"], "answers": [{"comments": [{"owner": {"reputation": 165, "user_id": 10023636, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d88fe0ff393523aee72bf40dd983b3d6?s=128&d=identicon&r=PG&f=1", "display_name": "Kasata Ata", "link": "https://stackoverflow.com/users/10023636/kasata-ata"}, "edited": false, "score": 0, "creation_date": 1570026356, "post_id": 58203391, "comment_id": 102785228, "body": "According to <a href=\"https://cmake.org/cmake/help/latest/module/FindBoost.html\" rel=\"nofollow noreferrer\">cmake.org/cmake/help/latest/module/FindBoost.html</a> <code>Boost::headers</code> is an alias. So it should work. Besides, when I want to use for instance Boost.Filesystem, I can <code>find_package(... filesystem)</code> and then I can link <code>Boost::filesystem</code> to my main target. It should handle all dependecies. I want to do the same thing with ASIO."}, {"owner": {"reputation": 3860, "user_id": 5251059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93c9c608467b21bce1d709b56bf6d39d?s=128&d=identicon&r=PG&f=1", "display_name": "vre", "link": "https://stackoverflow.com/users/5251059/vre"}, "reply_to_user": {"reputation": 165, "user_id": 10023636, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d88fe0ff393523aee72bf40dd983b3d6?s=128&d=identicon&r=PG&f=1", "display_name": "Kasata Ata", "link": "https://stackoverflow.com/users/10023636/kasata-ata"}, "edited": false, "score": 0, "creation_date": 1570027687, "post_id": 58203391, "comment_id": 102786022, "body": "The <code>Boost::headers</code> target has been added with CMake 3.15 recently, I was not aware of that. AFAIK no targets are created in FindBoost module for header only libraries. So you either create a target on your own and populate all necessary properties or you add the dependencies manually."}, {"owner": {"reputation": 165, "user_id": 10023636, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d88fe0ff393523aee72bf40dd983b3d6?s=128&d=identicon&r=PG&f=1", "display_name": "Kasata Ata", "link": "https://stackoverflow.com/users/10023636/kasata-ata"}, "edited": false, "score": 0, "creation_date": 1570029860, "post_id": 58203391, "comment_id": 102787346, "body": "So what is the actual purpose of adding Boost::boost to target_link_libraries?"}, {"owner": {"reputation": 3860, "user_id": 5251059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93c9c608467b21bce1d709b56bf6d39d?s=128&d=identicon&r=PG&f=1", "display_name": "vre", "link": "https://stackoverflow.com/users/5251059/vre"}, "reply_to_user": {"reputation": 165, "user_id": 10023636, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d88fe0ff393523aee72bf40dd983b3d6?s=128&d=identicon&r=PG&f=1", "display_name": "Kasata Ata", "link": "https://stackoverflow.com/users/10023636/kasata-ata"}, "edited": false, "score": 0, "creation_date": 1570030420, "post_id": 58203391, "comment_id": 102787690, "body": "In case you have header only Boost libraries without further dependencies you should add the target Boost::boost (or Boost headers) to the target_link_librares call. As most Boost libraries are header only and do not have additional library dependencies this case is quite common. See <a href=\"https://www.boost.org/doc/libs/1_71_0/more/getting_started/windows.html#header-only-libraries\" rel=\"nofollow noreferrer\">boost.org/doc/libs/1_71_0/more/getting_started/&hellip;</a> for a list of non header only libraries. Good examples are Boost/Any or Boost/Array"}, {"owner": {"reputation": 165, "user_id": 10023636, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d88fe0ff393523aee72bf40dd983b3d6?s=128&d=identicon&r=PG&f=1", "display_name": "Kasata Ata", "link": "https://stackoverflow.com/users/10023636/kasata-ata"}, "edited": false, "score": 1, "creation_date": 1570042673, "post_id": 58203391, "comment_id": 102793428, "body": "But why should one link against a header file? I cannot find anything about what this target does in general. Seems to does nothing at all."}, {"owner": {"reputation": 3860, "user_id": 5251059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93c9c608467b21bce1d709b56bf6d39d?s=128&d=identicon&r=PG&f=1", "display_name": "vre", "link": "https://stackoverflow.com/users/5251059/vre"}, "reply_to_user": {"reputation": 165, "user_id": 10023636, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d88fe0ff393523aee72bf40dd983b3d6?s=128&d=identicon&r=PG&f=1", "display_name": "Kasata Ata", "link": "https://stackoverflow.com/users/10023636/kasata-ata"}, "edited": false, "score": 0, "creation_date": 1570044259, "post_id": 58203391, "comment_id": 102794072, "body": "A target combines properties for linker, compiler, and other tools. So it might have set a property containing the include path, another property containing the name of the library for build type Release, another one for build type Debug. Additionally properties may be set for compiler definitions and switches, for linker switches, ... So a target combines all that stuff in a single name. CMake will correctly propagate the settings to the tools is use. All you have to do is adding the target to the target_link_libraries call."}], "tags": [], "owner": {"reputation": 3860, "user_id": 5251059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93c9c608467b21bce1d709b56bf6d39d?s=128&d=identicon&r=PG&f=1", "display_name": "vre", "link": "https://stackoverflow.com/users/5251059/vre"}, "is_accepted": false, "score": 3, "last_activity_date": 1583227910, "last_edit_date": 1583227910, "creation_date": 1570025847, "answer_id": 58203391, "question_id": 58203003, "link": "https://stackoverflow.com/questions/58203003/cmake-boost-imported-targets/58203391#58203391", "title": "CMake boost imported targets", "body": "<p>The target to include the Boost headers is named <code>Boost::boost</code> not <code>Boost::headers</code>.</p>\n\n<p>If you use that, you don't need <code>target_include_directories(... ${Boost_INCLUDE_DIRS})</code> (note the <code>S</code> at the end of the variable). <code>${Boost_INCLUDE_DIR}</code> without <code>S</code> is used in find_package to lookup the header files.</p>\n\n<p>Boost::asio is a header only library and CMakes FindBoost.cmake module does not create targets for header only libraries.\nWhen dealing with <code>Boost::asio</code> you need to add <code>system</code> and <code>thread</code> to your required modules in find_package and add <code>Boost::thread</code> and <code>Boost::system</code> to your target_link_libraries call. See <a href=\"https://think-async.com/Asio/AsioAndBoostAsio.html\" rel=\"nofollow noreferrer\">https://think-async.com/Asio/AsioAndBoostAsio.html</a> for a good explanation.</p>\n\n<p>So your CMakeLists.txt would look like follows:</p>\n\n<pre><code>cmake_minimum_required(VERSION 3.15)\n\nproject(Test)\n\nfind_package(Boost COMPONENTS system thread REQUIRED)\n\nadd_executable(test main.cpp)\n\ntarget_link_libraries(test PUBLIC Boost::boost Boost::system Boost::thread)\n</code></pre>\n\n<p><strong>Edit</strong>: Boost::headers was introduced in CMake 3.15 and Boost::boost is now an alias to it.</p>\n"}], "owner": {"reputation": 165, "user_id": 10023636, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d88fe0ff393523aee72bf40dd983b3d6?s=128&d=identicon&r=PG&f=1", "display_name": "Kasata Ata", "link": "https://stackoverflow.com/users/10023636/kasata-ata"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1746, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1583227910, "creation_date": 1570024422, "question_id": 58203003, "link": "https://stackoverflow.com/questions/58203003/cmake-boost-imported-targets", "title": "CMake boost imported targets", "body": "<p>Can you explain me how should I use something like <code>Boost::headers</code> in my CMake file? I tried to utilize it somehow but is seems to work in different manner than I understand it.</p>\n\n<pre><code>cmake_minimum_required(VERSION 3.15)\n\nproject(Test)\n\nfind_package(Boost COMPONENTS asio REQUIRED)\n\nadd_executable(test main.cpp)\n\ntarget_include_directories(test SYSTEM PUBLIC ${Boost_INCLUDE_DIR})\ntarget_link_libraries(test PUBLIC Boost::headers)\n</code></pre>\n\n<p>This example does not work. It is caused by <code>COMPONENTS asio</code>. ASIO seems to be treated in other way because it is header only library. </p>\n\n<p>Documentation says:</p>\n\n<blockquote>\n  <p>Boost::[C] - Target for specific component dependency (shared or static library)</p>\n  \n  <p>[C] is lower-case</p>\n</blockquote>\n\n<p>I can agree that ASIO may not be library in the terms of CMake's definition. Documentation emphasises that it must be either static or shared library. ASIO is header only so it is just a file to be included.</p>\n\n<p>So let's try to use it in another way:</p>\n\n<pre><code>cmake_minimum_required(VERSION 3.15)\n\nproject(Test)\n\nfind_package(Boost REQUIRED)\n\nadd_executable(test main.cpp)\n\ntarget_include_directories(test SYSTEM PUBLIC ${Boost_INCLUDE_DIR})\ntarget_link_libraries(test PUBLIC Boost::headers)\n</code></pre>\n\n<p>Right now I am assuming that if CMake managed to find Boost, ASIO will be present. It is possible to perform configuration step, but when I try to build whole project it turns out that I am missing some dependencies. Boost::headers seems to be somehow unnecessary.</p>\n\n<p>Unfortunately CMake's documentation is not the best I have ever seen. It is hard to get any information related with more complicated things.</p>\n"}, {"tags": ["c++", "lambda", "c++14", "variadic-templates", "compose"], "answers": [{"comments": [{"owner": {"reputation": 9, "user_id": 7804610, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a9728c8abde6f0ecf21cf71af2a3fb5?s=128&d=identicon&r=PG&f=1", "display_name": "user7804610", "link": "https://stackoverflow.com/users/7804610/user7804610"}, "edited": false, "score": 0, "creation_date": 1570024980, "post_id": 58203075, "comment_id": 102784380, "body": "Thanks! But I just tried your way, it reports an error in main at the caller: expression cannot be used as a function    int res = compose(add_func, sub_func)(0);                                           ^ How should I fix that?"}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "reply_to_user": {"reputation": 9, "user_id": 7804610, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a9728c8abde6f0ecf21cf71af2a3fb5?s=128&d=identicon&r=PG&f=1", "display_name": "user7804610", "link": "https://stackoverflow.com/users/7804610/user7804610"}, "edited": false, "score": 0, "creation_date": 1570025069, "post_id": 58203075, "comment_id": 102784436, "body": "@user7804610 I&#39;m afraid that&#39;s an issue on your side, this single change <a href=\"https://wandbox.org/permlink/esxYzgNpMi02vD7Y\" rel=\"nofollow noreferrer\">makes it work</a> on mine... Which compiler are you using?"}, {"owner": {"reputation": 9, "user_id": 7804610, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a9728c8abde6f0ecf21cf71af2a3fb5?s=128&d=identicon&r=PG&f=1", "display_name": "user7804610", "link": "https://stackoverflow.com/users/7804610/user7804610"}, "edited": false, "score": 0, "creation_date": 1570025562, "post_id": 58203075, "comment_id": 102784710, "body": "Thank you very much!!! I made a minor mistake in my Makefile."}], "tags": [], "owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "is_accepted": false, "score": 0, "last_activity_date": 1570024666, "creation_date": 1570024666, "answer_id": 58203075, "question_id": 58202940, "link": "https://stackoverflow.com/questions/58202940/compose-lambda-function-in-c-using-parameter-pack/58203075#58203075", "title": "Compose lambda function in C++ using parameter pack", "body": "<p>Your \"recursive\" case contains no call to <code>compose</code>, that should be a hint of where you've mixed things up ;)</p>\n\n<pre><code>return [=](auto x){ return compose(other...)(fn(x)); };\n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 7804610, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a9728c8abde6f0ecf21cf71af2a3fb5?s=128&d=identicon&r=PG&f=1", "display_name": "user7804610", "link": "https://stackoverflow.com/users/7804610/user7804610"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 223, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1570031307, "creation_date": 1570024182, "last_edit_date": 1570031307, "question_id": 58202940, "link": "https://stackoverflow.com/questions/58202940/compose-lambda-function-in-c-using-parameter-pack", "title": "Compose lambda function in C++ using parameter pack", "body": "<p>I'm new to C++ 14, I want to compose a variable length of lambda functions together to a single lambda, how should I do that? Below is my current work</p>\n\n<pre><code>#include &lt;iostream&gt;\n\ntemplate&lt;typename Ftype&gt;\nFtype compose(const Ftype &amp; fn) {\n  return fn;\n}\n\ntemplate&lt;typename Ftype, typename... Other&gt;\nauto compose(Ftype fn, Other... other) {\n  return [=](auto x){return other(fn(x))...;};\n}        \u27a4 expression contains unexpanded parameter pack 'other'\n\nint main(void) {\n  auto add_func = [](const int x) { return x * 7; };\n  auto sub_func = [](const int x) { return x + 1; };\n  int res = compose(add_func, sub_func)(1);\n  std::cout &lt;&lt; \"Result: \" &lt;&lt; res &lt;&lt; \"\\n\";\n}\n</code></pre>\n\n<p>But I failed the compile, I guess I may use the lambda or variadic parameter somehow wrong.\nCan someone help me?</p>\n"}, {"tags": ["c++", "qt", "qml"], "comments": [{"owner": {"reputation": 2669, "user_id": 1228771, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SF8S5.png?s=128&g=1", "display_name": "Amfasis", "link": "https://stackoverflow.com/users/1228771/amfasis"}, "edited": false, "score": 0, "creation_date": 1570024419, "post_id": 58202870, "comment_id": 102784030, "body": "Aren&#39;t you starting two <code>QmlEngine</code>&#39;s by having this <code>startGui</code> function? Can you also show the main function?"}, {"owner": {"reputation": 101, "user_id": 10947505, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b70b3c566b8749c69159657c6e8d38ae?s=128&d=identicon&r=PG&f=1", "display_name": "Gebre", "link": "https://stackoverflow.com/users/10947505/gebre"}, "reply_to_user": {"reputation": 2669, "user_id": 1228771, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SF8S5.png?s=128&g=1", "display_name": "Amfasis", "link": "https://stackoverflow.com/users/1228771/amfasis"}, "edited": false, "score": 0, "creation_date": 1570024720, "post_id": 58202870, "comment_id": 102784213, "body": "I have edited the question, basically starting the engine is taken care of in the main, that part has no problems as it works for all the other classes I have"}, {"owner": {"reputation": 3876, "user_id": 7478455, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VP5WO.jpg?s=128&g=1", "display_name": "Mohammad Kanan", "link": "https://stackoverflow.com/users/7478455/mohammad-kanan"}, "edited": false, "score": 0, "creation_date": 1570028924, "post_id": 58202870, "comment_id": 102786790, "body": "How you exposing class/property to QML ?  where is <code>main()</code> in your code ?"}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1570029344, "post_id": 58202870, "comment_id": 102787053, "body": "@Gebre If you want help, provide an <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, otherwise your question is off-topic and is probably closed."}, {"owner": {"reputation": 2669, "user_id": 1228771, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SF8S5.png?s=128&g=1", "display_name": "Amfasis", "link": "https://stackoverflow.com/users/1228771/amfasis"}, "edited": false, "score": 1, "creation_date": 1570040983, "post_id": 58202870, "comment_id": 102792645, "body": "@Gebre I think you shouldn&#39;t ask basically the same question twice. Please close this one as the other one is more &quot;MRE&quot;"}, {"owner": {"reputation": 101, "user_id": 10947505, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b70b3c566b8749c69159657c6e8d38ae?s=128&d=identicon&r=PG&f=1", "display_name": "Gebre", "link": "https://stackoverflow.com/users/10947505/gebre"}, "edited": false, "score": 0, "creation_date": 1570041235, "post_id": 58202870, "comment_id": 102792755, "body": "How do I close it?"}, {"owner": {"reputation": 2669, "user_id": 1228771, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SF8S5.png?s=128&g=1", "display_name": "Amfasis", "link": "https://stackoverflow.com/users/1228771/amfasis"}, "edited": false, "score": 0, "creation_date": 1570042482, "post_id": 58202870, "comment_id": 102793334, "body": "below the tag list there should be a <code>delete</code> option (As well as <code>share</code>, <code>edit</code>, <code>flag</code> and <code>close</code>, the latter being the wrong one, since you will lock it and it still be visible)"}, {"owner": {"reputation": 3876, "user_id": 7478455, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VP5WO.jpg?s=128&g=1", "display_name": "Mohammad Kanan", "link": "https://stackoverflow.com/users/7478455/mohammad-kanan"}, "reply_to_user": {"reputation": 2669, "user_id": 1228771, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SF8S5.png?s=128&g=1", "display_name": "Amfasis", "link": "https://stackoverflow.com/users/1228771/amfasis"}, "edited": false, "score": 0, "creation_date": 1570050025, "post_id": 58202870, "comment_id": 102796359, "body": "@Amfasis , while asked on the same context and same code, each question is about different topic. the other question relates to the derived class signal. while this one is about how to update Q_PROPERTY of base class .. do you agree ?"}, {"owner": {"reputation": 2669, "user_id": 1228771, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SF8S5.png?s=128&g=1", "display_name": "Amfasis", "link": "https://stackoverflow.com/users/1228771/amfasis"}, "edited": false, "score": 0, "creation_date": 1570085145, "post_id": 58202870, "comment_id": 102803778, "body": "I don&#39;t agree, the same solution as on the other question can be given on this question. However, here Gebre forgot to add the qml code, which displayed the misunderstanding (since signals can just simply be emitted from derived classes) and Gebre explained his use-case better in the other question"}, {"owner": {"reputation": 101, "user_id": 10947505, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b70b3c566b8749c69159657c6e8d38ae?s=128&d=identicon&r=PG&f=1", "display_name": "Gebre", "link": "https://stackoverflow.com/users/10947505/gebre"}, "reply_to_user": {"reputation": 2669, "user_id": 1228771, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SF8S5.png?s=128&g=1", "display_name": "Amfasis", "link": "https://stackoverflow.com/users/1228771/amfasis"}, "edited": false, "score": 1, "creation_date": 1570126352, "post_id": 58202870, "comment_id": 102824541, "body": "The questions are actually about two different things. This one I solved by making m_seats static. However I couldn&#39;t do the same for the signal, qt won&#39;t allow it. @Amfasis when I was emitting the signal from the derived class, it wasn&#39;t updating, because it was of object Toyota, not car."}], "answers": [{"comments": [{"owner": {"reputation": 101, "user_id": 10947505, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b70b3c566b8749c69159657c6e8d38ae?s=128&d=identicon&r=PG&f=1", "display_name": "Gebre", "link": "https://stackoverflow.com/users/10947505/gebre"}, "edited": false, "score": 0, "creation_date": 1570030005, "post_id": 58204461, "comment_id": 102787446, "body": "Thanks Mohammad, I realised that and changed the m_seats variable to static. It now works when I print gps.seats in qml. However the signal updateSeats() does not seem to update the qml variable when it is emitted. How can I go about making that static or other solution?"}, {"owner": {"reputation": 3876, "user_id": 7478455, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VP5WO.jpg?s=128&g=1", "display_name": "Mohammad Kanan", "link": "https://stackoverflow.com/users/7478455/mohammad-kanan"}, "reply_to_user": {"reputation": 101, "user_id": 10947505, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b70b3c566b8749c69159657c6e8d38ae?s=128&d=identicon&r=PG&f=1", "display_name": "Gebre", "link": "https://stackoverflow.com/users/10947505/gebre"}, "edited": false, "score": 0, "creation_date": 1570030177, "post_id": 58204461, "comment_id": 102787547, "body": "My observation is you emitting bare signal .. (it does not carry the updated value) .. I can&#39;t grant as sure this is the problem , but surely , you need this post : <a href=\"https://stackoverflow.com/questions/43705363/q-property-notify-signal-and-its-argument\">Q_PROPERTY NOTIFY signal and its argument</a>"}], "tags": [], "owner": {"reputation": 3876, "user_id": 7478455, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VP5WO.jpg?s=128&g=1", "display_name": "Mohammad Kanan", "link": "https://stackoverflow.com/users/7478455/mohammad-kanan"}, "is_accepted": true, "score": 1, "last_activity_date": 1570029700, "last_edit_date": 1570029700, "creation_date": 1570029376, "answer_id": 58204461, "question_id": 58202870, "link": "https://stackoverflow.com/questions/58202870/qml-not-receiving-updated-value-of-member-variable-of-base-class/58204461#58204461", "title": "Qml not receiving updated value of member variable of base class", "body": "<p><code>Toyota</code> object is derived class object <code>Toyota</code> of base <code>Car</code> not an object of <code>Car</code> you are modifying derived class object member <code>Toyota::m_seats</code> and that won't have any effect on direct base <code>Car</code> object .. and because Q_PROPERTY is defined only in base class <code>Car</code> .. the only value QML would see is base class object .. and specifically the object you set in <code>setContextProperty</code> ... the code you omitted after the post edit.</p>\n\n<p>From previous edits in your post, you seem to set the <code>setContextProperty</code> in your engine as <code>Car</code> object .. its in this object where you need to modify member that is a Q_PROPERTY.</p>\n\n<p>I am referring to your code:</p>\n\n<pre><code>Car::startGui(){\n    QQmlApplicationEngine engine;\n    QQmlContext *ctxt = engine.rootContext();\n    ctxt-&gt;setContextProperty(\"car\", this)\n    // start engine, which works properly\n}\n</code></pre>\n"}], "owner": {"reputation": 101, "user_id": 10947505, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b70b3c566b8749c69159657c6e8d38ae?s=128&d=identicon&r=PG&f=1", "display_name": "Gebre", "link": "https://stackoverflow.com/users/10947505/gebre"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "accepted_answer_id": 58204461, "answer_count": 1, "score": 0, "last_activity_date": 1570029700, "creation_date": 1570023971, "last_edit_date": 1570024961, "question_id": 58202870, "link": "https://stackoverflow.com/questions/58202870/qml-not-receiving-updated-value-of-member-variable-of-base-class", "title": "Qml not receiving updated value of member variable of base class", "body": "<p>I basically just want to use multiple derived classes to change a member variable of a base class and to forward that value to qml using qproperty, but for some reason it's not working</p>\n\n<p>car.h</p>\n\n<pre><code>    #include &lt;QObject&gt;\n\n    class Car : public QObject{\n        Q_OBJECT\n        Q_PROPERTY(int seats MEMBER m_seats NOTIFY updateSeats)\n\n    public:\n        explicit Car(QObject *parent = 0);\n        ~Car();\n        int m_seats;\n        Q_INVOKABLE void test();\n\n    signals:\n        void updateSeats();\n    };\n</code></pre>\n\n<p>car.cpp    </p>\n\n<pre><code>    #include \"car.h\"\n\n    Car::Car(QObject *parent) :\n        QObject(parent),\n        m_seats(0)\n    {\n\n    }\n\n    Car::test(){\n        m_seats = 5;\n        emit updateSeats();\n    }\n\n    Car::~Car(){}\n</code></pre>\n\n<p>toyota.h</p>\n\n<pre><code>    #include \"car.h\"\n\n    class Toyota : public Car{\n        Q_OBJECT\n\n\n    public:\n        explicit Toyota(QObject *parent = 0);\n        ~Toyota();\n        void foundCar();\n    };\n</code></pre>\n\n<p>toyota.cpp    </p>\n\n<pre><code>    #include \"toyota.h\"\n\n    Toyota::Toyota(QObject *parent) \n    {\n\n    }\n\n    Toyota::foundCar(){\n        m_seats = 4;\n        emit updateSeats();\n    }\n\n    Toyota::~Toyota(){}\n</code></pre>\n\n<p>Now, after invoking the foundCar function in class Toyota, if I do\nconsole.log(car.seats) in qml I get 0, but I expect it to be 4 because I am modifying it in the derived class. \nHowever if I call car.test() from qml and then I print car.seats, the value is 5. I am confused why this is the case. In qml I want car.seats to be 4. What am I missing?</p>\n"}, {"tags": ["c++", "arrays"], "comments": [{"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 3, "creation_date": 1570024196, "post_id": 58202860, "comment_id": 102783881, "body": "<code>int left=mid-1;</code> goes out of scope before it is used here <code>output[left]=input[i];</code>, same for <code>right</code>.  Fix these and compile again. Typo?"}], "answers": [{"tags": [], "owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "is_accepted": true, "score": 0, "last_activity_date": 1570025252, "creation_date": 1570025252, "answer_id": 58203226, "question_id": 58202860, "link": "https://stackoverflow.com/questions/58202860/invalid-type-error-in-c-code-in-outputleft-inputi-line/58203226#58203226", "title": "Invalid type error in c++ code in output[left]=input[i] line", "body": "<p>First of all you have a scope problem, as Richard Critten pointed out in comments. <code>right</code> and <code>left</code> do not have the definition in the <code>while</code> loop that you gave them in the <code>if</code> and <code>else</code> statements.</p>\n\n<p>Compounding this, you use <code>#include &lt;bits/stdc++.h&gt;</code> and <code>using namespace std;</code>. These are not causing your issue, but they are making it harder to understand.</p>\n\n<p><a href=\"https://stackoverflow.com/q/31816095/10077\">Using <code>#include &lt;bits/stdc++.h&gt;</code> is a bad idea</a>. It includes the entirety of the C++ standard library, which is lazy, unnecessary, and increases compile times. It's also not portable.</p>\n\n<p><a href=\"https://stackoverflow.com/questions/1452721/why-is-using-namespace-std-considered-bad-practice\">Using <code>using namespace std;</code> is a bad idea</a>. It makes everything in namespace <code>std</code> available without qualification. This means any common names like <code>left</code> and <code>right</code> may match <a href=\"https://en.cppreference.com/w/cpp/io/manip/left\" rel=\"nofollow noreferrer\">something you didn't intend</a>. This can lead to bugs that are horrendously difficult to find and fix.</p>\n\n<p>Using both together is really awful, because now you have the entirety of the <code>std</code> namespace, with lots and lots of commonly used names, colliding with the names you want to use in your code.</p>\n"}], "owner": {"reputation": 81, "user_id": 11285896, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/--mNfe88vZYY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rf0vY60aBZrTDbC0BdLrvC6SX2eTw/mo/photo.jpg?sz=128", "display_name": "yolon bsn", "link": "https://stackoverflow.com/users/11285896/yolon-bsn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 36, "favorite_count": 0, "accepted_answer_id": 58203226, "answer_count": 1, "score": 0, "last_activity_date": 1570025252, "creation_date": 1570023932, "last_edit_date": 1570024209, "question_id": 58202860, "link": "https://stackoverflow.com/questions/58202860/invalid-type-error-in-c-code-in-outputleft-inputi-line", "title": "Invalid type error in c++ code in output[left]=input[i] line", "body": "<p>I am getting this </p>\n\n<pre><code>'invalid types int*[std::ios_based&amp;(std::ios_base&amp;)]' for array subscript  in line                   \noutput[left]=input[i];  \n</code></pre>\n\n<p>Can't able to figure out the solution to it.  here output is the array in which i want my answer</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;bits/stdc++.h&gt;\nusing namespace std;\nvoid recover(int input[], int output[], int n)\n{\n    int i = 0;\n    int mid = n / 2;\n    if (n % 2 != 0)\n    {\n        output[mid] = input[i];\n        int left = mid - 1;\n        int right = mid + 1;\n        i++;\n    }\n    else\n    {\n        int left = mid - 1;\n        int right = mid;\n    }\n    while (i &lt; n)\n    {\n        output[left] = input[i];\n        left--;\n        i++;\n        output[right] = input[i];\n        right++;\n        i++;\n    }\n}\n\nint main()\n{\n    int input[100], output[100];\n    int n;\n    cin &gt;&gt; n;\n    for (int i = 0; i &lt; n; i++)\n    {\n        cin &gt;&gt; input[i];\n    }\n    recover(input, output, n) for (int i = 0; i &lt; n; i++)\n    {\n        cout &lt;&lt; output[i] &lt;&lt; \" \";\n    }\n}\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 259, "user_id": 6035136, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9abd7b0d8267fd3a9c0b39bc76a2fd1c?s=128&d=identicon&r=PG&f=1", "display_name": "sejvlond", "link": "https://stackoverflow.com/users/6035136/sejvlond"}, "reply_to_user": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "edited": false, "score": 0, "creation_date": 1570024076, "post_id": 58202786, "comment_id": 102783807, "body": "ups, fixed, thx"}, {"owner": {"reputation": 259, "user_id": 6035136, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9abd7b0d8267fd3a9c0b39bc76a2fd1c?s=128&d=identicon&r=PG&f=1", "display_name": "sejvlond", "link": "https://stackoverflow.com/users/6035136/sejvlond"}, "edited": false, "score": 0, "creation_date": 1570084389, "post_id": 58202786, "comment_id": 102803505, "body": "duplicate #2 doesn&#39;t much answer this question, but the #1 <a href=\"https://stackoverflow.com/questions/53408962/try-to-understand-compiler-error-message-default-member-initializer-required-be\" title=\"try to understand compiler error message default member initializer required be\">stackoverflow.com/questions/53408962/&hellip;</a> seems legit, it&#39;s a compiler bug, thx"}], "answers": [{"tags": [], "owner": {"reputation": 4809, "user_id": 686184, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/39070f4d752dc965b716275da4e66b50?s=128&d=identicon&r=PG", "display_name": "pqnet", "link": "https://stackoverflow.com/users/686184/pqnet"}, "is_accepted": false, "score": 0, "last_activity_date": 1570025050, "creation_date": 1570025050, "answer_id": 58203172, "question_id": 58202786, "link": "https://stackoverflow.com/questions/58202786/default-member-initializer-needed-within-definition-of-enclosing-class-outside-o/58203172#58203172", "title": "Default member initializer needed within definition of enclosing class outside of member functions", "body": "<p>I'm not really sure why this is not allowed.\nI can produce a workaround thus using overload:</p>\n\n<pre><code>void foo(inner)\n{}\nvoid foo() {\n    foo(inner());\n}\n</code></pre>\n\n<p>If someone can tell what is the difference (from the type system point of view) between overloading a function and providing a default value, that information may contain the reason why the language doesn't allow the pattern specified in the question</p>\n"}], "owner": {"reputation": 259, "user_id": 6035136, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9abd7b0d8267fd3a9c0b39bc76a2fd1c?s=128&d=identicon&r=PG&f=1", "display_name": "sejvlond", "link": "https://stackoverflow.com/users/6035136/sejvlond"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 362, "favorite_count": 0, "closed_date": 1570025693, "answer_count": 1, "score": 3, "last_activity_date": 1570025050, "creation_date": 1570023699, "last_edit_date": 1570024056, "question_id": 58202786, "link": "https://stackoverflow.com/questions/58202786/default-member-initializer-needed-within-definition-of-enclosing-class-outside-o", "closed_reason": "Duplicate", "title": "Default member initializer needed within definition of enclosing class outside of member functions", "body": "<p>very simple example having nested structures and a method with defaulted value</p>\n\n<pre><code>struct outer {\n    struct inner\n    {\n        int x{0};\n    };\n\n    void foo(inner = inner())\n    {}\n};\n</code></pre>\n\n<p>compiling with clang and gcc8 both return this error</p>\n\n<pre><code>main.cpp:7:22: error: default member initializer for 'x' needed within definition of enclosing class 'outer' outside of member functions\n\n    void foo(inner = inner())\n\n                     ^\n\nmain.cpp:4:13: note: default member initializer declared here\n\n        int x{0};\n\n            ^\n\n1 error generated.\n</code></pre>\n\n<p>example: <a href=\"http://coliru.stacked-crooked.com/a/f28eb47735bfa4e5\" rel=\"nofollow noreferrer\">http://coliru.stacked-crooked.com/a/f28eb47735bfa4e5</a></p>\n\n<p>I've read <a href=\"https://stackoverflow.com/questions/43819314/default-member-initializer-needed-within-definition-of-enclosing-class-outside\">this</a> and <a href=\"https://stackoverflow.com/questions/46866686/default-member-initializer-needed-within-definition-of-enclosing-class-outside\">this</a> but still have no idea what's going on?</p>\n"}, {"tags": ["c++", "c++14"], "comments": [{"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 1, "creation_date": 1570023850, "post_id": 58202682, "comment_id": 102783661, "body": "You have copied the additional information from the error, but not the error itself. What is it?"}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1570023873, "post_id": 58202682, "comment_id": 102783672, "body": "The &quot;errors&quot; you listed are two notes (telling you where the error happened) that do not contain an actual error. Not a real issue because you have the MCVE, just for the record."}, {"owner": {"reputation": 320, "user_id": 4031282, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/8da76124e66bf23971580c53eb35aa81?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew", "link": "https://stackoverflow.com/users/4031282/andrew"}, "edited": false, "score": 0, "creation_date": 1570024008, "post_id": 58202682, "comment_id": 102783760, "body": "The errors I&#39;ve highlight are godbolt reported errors (no more errors are produced). In VS, the error for the same code is:  Error\tC2665\t&#39;std::pair&lt;const _Kty,_Ty&gt;::pair&#39;: none of the 2 overloads could convert all the argument types"}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1570024041, "post_id": 58202682, "comment_id": 102783781, "body": "You&#39;re using <code>-&gt; decltype(auto)</code>, so I have retagged your question as C++14."}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1570024094, "post_id": 58202682, "comment_id": 102783817, "body": "@Andrew Why don&#39;t you add the godbolt link that you are looking at? Then we don&#39;t have to figure out which flags you use and so on :)"}, {"owner": {"reputation": 320, "user_id": 4031282, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/8da76124e66bf23971580c53eb35aa81?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew", "link": "https://stackoverflow.com/users/4031282/andrew"}, "reply_to_user": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1570024137, "post_id": 58202682, "comment_id": 102783842, "body": "@MaxLanghof I didn&#39;t know if that was allowed but I&#39;ll chance it!"}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1570024212, "post_id": 58202682, "comment_id": 102783892, "body": "@Andrew please do! Online compilers are super useful, and having an MCVE to tinker with in one click is the best thing for answerers."}, {"owner": {"reputation": 320, "user_id": 4031282, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/8da76124e66bf23971580c53eb35aa81?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew", "link": "https://stackoverflow.com/users/4031282/andrew"}, "reply_to_user": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1570024292, "post_id": 58202682, "comment_id": 102783948, "body": "@quentin done as requested"}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1570024305, "post_id": 58202682, "comment_id": 102783957, "body": "@Andrew I&#39;ve seen people remove them because &quot;link rot&quot; but if your question is complete even without it then it&#39;s just nice to have for readers. You at least have my full support, for what that&#39;s worth. Looking at the link, there are only two <i>blue</i> lines, but there are certainly more lines (and it&#39;s only those other ones that contain the all-important word &quot;error&quot; - in this case, the first one)."}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 2, "creation_date": 1570024333, "post_id": 58202682, "comment_id": 102783978, "body": "It looks to me like you&#39;re simply trying to insert <code>candles</code>, a <code>std::vector&lt;Candle&gt;</code>, inside the value of a map which expects a <code>Candle &amp;</code>. The error is laughably convoluted, but quite legitimate."}, {"owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "edited": false, "score": 0, "creation_date": 1570026481, "post_id": 58202682, "comment_id": 102785299, "body": "Well, <code>std::deque</code> is pretty much a useless container because it is not contiguous and and creating an empty <code>std::deque</code> allocates 608 bytes (with GNU C++ standard library). You may like to simplify your design and throw away <code>map</code> and <code>deque</code>."}], "answers": [{"tags": [], "owner": {"reputation": 320, "user_id": 4031282, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/8da76124e66bf23971580c53eb35aa81?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew", "link": "https://stackoverflow.com/users/4031282/andrew"}, "is_accepted": false, "score": 0, "last_activity_date": 1570030316, "creation_date": 1570030316, "answer_id": 58204731, "question_id": 58202682, "link": "https://stackoverflow.com/questions/58202682/complex-stdmap-structure-stddeque-problem/58204731#58204731", "title": "Complex std::map, structure, std::deque problem", "body": "<p>Someone helped me out, thanks very much to them. </p>\n\n<p>The solution is as follows:</p>\n\n<pre><code>#include &lt;deque&gt;\n#include &lt;functional&gt;\n#include &lt;vector&gt;\n#include &lt;map&gt;\n#include &lt;iostream&gt;\n#include &lt;limits&gt;\n\ntemplate&lt;typename Price&gt;\nstruct OHLCCandle final\n{\n    static_assert(std::is_floating_point&lt;Price&gt;::value, \"\");\n\n    using Container = std::deque&lt;Price&gt;;\n\n    Container open;\n    Container high;\n    Container low;\n    Container close;\n};\n\nusing Candle = OHLCCandle&lt;double&gt;;\nusing CandleContainer = std::vector&lt;Candle&gt;;\nusing Timeframe = int;\n\nstd::map&lt;Timeframe, std::reference_wrapper&lt;Candle&gt;&gt; data_;\nCandleContainer candles_;\n\nauto emplace(const int timeframe, const Candle&amp; candle) -&gt; decltype(auto)\n{\n    auto error = int{ 0 };\n    try\n    {\n        candles_.push_back(candle);\n        const auto pair = data_.emplace(std::make_pair(timeframe, std::ref(candles_.back())));\n\n        if (!pair.second)\n        {\n            std::cout &lt;&lt; \"ERROR: Emplacement failed, doing nothing. timeframe = \" &lt;&lt; timeframe &lt;&lt; std::endl;\n            error = (std::numeric_limits&lt;int&gt;::min)();\n        }\n    }\n    catch (const std::exception&amp; e) {\n        std::cout &lt;&lt; \"ERROR: Unknown error occured, ignoring. timeframe = \" &lt;&lt; timeframe &lt;&lt; \", erc = \" &lt;&lt; e.what() &lt;&lt; std::endl;\n        error = (std::numeric_limits&lt;int&gt;::min)();\n    }\n\n    return error;\n};\n</code></pre>\n\n<p>Thanks to all who made suggestions.</p>\n"}], "owner": {"reputation": 320, "user_id": 4031282, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/8da76124e66bf23971580c53eb35aa81?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew", "link": "https://stackoverflow.com/users/4031282/andrew"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 57, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1570030316, "creation_date": 1570023338, "last_edit_date": 1570024195, "question_id": 58202682, "link": "https://stackoverflow.com/questions/58202682/complex-stdmap-structure-stddeque-problem", "title": "Complex std::map, structure, std::deque problem", "body": "<p>My objective is to have an ordered map of timeframes (it's for timeseries data analysis), indexed via a vector (as I sometimes need to reference the structure sequentially and not via the map key), with references to the OHLCCandle structure and having the resulting data presented via the deque.</p>\n\n<p>Data access will be like: <code>data_[5].get().open[0]</code> meaning accessing the 5 min timeframe retrieving the open data at shift 0 or as another example, <code>data_[15].get().close[4]</code> meaning accessing the 15 min timeframe retrieving the close data at shift 4 (0 being the most recent).</p>\n\n<p>My code so far is:</p>\n\n<pre><code>#include &lt;deque&gt;\n#include &lt;vector&gt;\n#include &lt;map&gt;\n#include &lt;iostream&gt;\n\ntemplate&lt;typename Price&gt;\nstruct OHLCCandle final\n{\n    static_assert(std::is_floating_point&lt;Price&gt;::value, \"\");\n\n    using Container = std::deque&lt;Price&gt;;\n\n    Container open;\n    Container high;\n    Container low;\n    Container close;\n};\n\nusing Candle = OHLCCandle&lt;double&gt;;\nusing CandleContainer = std::vector&lt;Candle&gt;;\nusing Timeframe = int;\n\nstd::map&lt;Timeframe, std::reference_wrapper&lt;Candle&gt;&gt; data_;\n\nauto emplace(const int timeframe, const Candle&amp; candle) -&gt; decltype(auto)\n{\n    auto error = int{ 0 };\n    try\n    {\n        //////// Problem area begin\n        auto candles = CandleContainer{};\n        candles.push_back(candle);\n\n        const auto pair = data_.emplace(std::make_pair(timeframe, candles));\n        //////// Problem area end\n\n        if (!pair.second)\n        {\n            std::cout &lt;&lt; \"ERROR: Emplacement failed, doing nothing. timeframe = \" &lt;&lt; timeframe &lt;&lt; std::endl;\n            error = (std::numeric_limits&lt;int&gt;::min)();\n        }\n    }\n    catch (const std::exception&amp; e) {\n        std::cout &lt;&lt; \"ERROR: Unknown error occured, ignoring. timeframe = \" &lt;&lt; timeframe &lt;&lt; \", erc = \" &lt;&lt; e.what() &lt;&lt; std::endl;\n        error = (std::numeric_limits&lt;int&gt;::min)();\n    }\n\n    return error;\n};\n</code></pre>\n\n<p>But, I'm unsure how to construct the CandleContainer structure so that it can be combined with the <code>std::map</code> part of the code and I'm receiving the following errors under godbolt.org (code is godbolt.org ready! - <code>https://godbolt.org/z/d9HByG</code>):</p>\n\n<pre><code>[x64 msvc v19.22 #1] note: see reference to function template instantiation 'std::pair&lt;std::_Tree_iterator&lt;std::_Tree_val&lt;std::_Tree_simple_types&lt;std::pair&lt;const _Kty,_Ty&gt;&gt;&gt;&gt;,bool&gt; std::_Tree&lt;std::_Tmap_traits&lt;_Kty,_Ty,_Pr,_Alloc,false&gt;&gt;::emplace&lt;std::pair&lt;int,std::vector&lt;Candle,std::allocator&lt;OHLCCandle&lt;double&gt;&gt;&gt;&gt;&gt;(std::pair&lt;int,std::vector&lt;Candle,std::allocator&lt;OHLCCandle&lt;double&gt;&gt;&gt;&gt; &amp;&amp;)' being compiled\n[x64 msvc v19.22 #1] note: see reference to function template instantiation 'std::pair&lt;std::_Tree_iterator&lt;std::_Tree_val&lt;std::_Tree_simple_types&lt;std::pair&lt;const _Kty,_Ty&gt;&gt;&gt;&gt;,bool&gt; std::_Tree&lt;std::_Tmap_traits&lt;_Kty,_Ty,_Pr,_Alloc,false&gt;&gt;::emplace&lt;std::pair&lt;int,std::vector&lt;Candle,std::allocator&lt;OHLCCandle&lt;double&gt;&gt;&gt;&gt;&gt;(std::pair&lt;int,std::vector&lt;Candle,std::allocator&lt;OHLCCandle&lt;double&gt;&gt;&gt;&gt; &amp;&amp;)' being compiled\n</code></pre>\n\n<p>What do I need to do to achieve my objectives and resolve the compilation errors?</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["c++", "c++98"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1570022978, "post_id": 58202553, "comment_id": 102783090, "body": "Why do you expect <code>narrow_cast&lt;int&gt;(4200);</code> to throw?"}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 4, "creation_date": 1570023045, "post_id": 58202553, "comment_id": 102783139, "body": "What is <code>narrow_cast</code>?"}, {"owner": {"reputation": 9494, "user_id": 5517378, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/VWdPz.png?s=128&g=1", "display_name": "NutCracker", "link": "https://stackoverflow.com/users/5517378/nutcracker"}, "edited": false, "score": 0, "creation_date": 1570023116, "post_id": 58202553, "comment_id": 102783196, "body": "Please let us know your implementation of <code>narrow_cast</code>."}, {"owner": {"reputation": 43, "user_id": 12143067, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46d83f71dcc5a732ea3ede643e6b2d13?s=128&d=identicon&r=PG&f=1", "display_name": "Lekan", "link": "https://stackoverflow.com/users/12143067/lekan"}, "edited": false, "score": 0, "creation_date": 1570023142, "post_id": 58202553, "comment_id": 102783211, "body": "Beacuse it says that in my c++ textbook. How would you suggest I would get an exception for narrowing?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1570023144, "post_id": 58202553, "comment_id": 102783214, "body": "Are you using <code>gsl::narrow_cast</code>?"}, {"owner": {"reputation": 43, "user_id": 12143067, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46d83f71dcc5a732ea3ede643e6b2d13?s=128&d=identicon&r=PG&f=1", "display_name": "Lekan", "link": "https://stackoverflow.com/users/12143067/lekan"}, "edited": false, "score": 0, "creation_date": 1570026086, "post_id": 58202553, "comment_id": 102785030, "body": "If that is int x= narrow_cast&lt;int&gt; (2.9); then yes, if not No."}], "owner": {"reputation": 43, "user_id": 12143067, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46d83f71dcc5a732ea3ede643e6b2d13?s=128&d=identicon&r=PG&f=1", "display_name": "Lekan", "link": "https://stackoverflow.com/users/12143067/lekan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 69, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1570022950, "creation_date": 1570022906, "last_edit_date": 1570022950, "question_id": 58202553, "link": "https://stackoverflow.com/questions/58202553/getting-an-exception-for-narrowing-conversion", "title": "Getting an exception for narrowing conversion", "body": "<p>I tried to catch a runtime_error for narrowed conversions but it is not working. I tried</p>\n\n<pre><code>int x= narrow_cast&lt;int&gt; (2.9); //I expected this to throw\nint c=narrow_cast&lt;int&gt;(4200); // I expected this to throw\n</code></pre>\n\n<p>I have no idea what to do.</p>\n"}, {"tags": ["c++", "compiler-errors", "stl"], "comments": [{"owner": {"reputation": 1894, "user_id": 8473031, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4878bfc9d6a80397a8446111fffa4dd?s=128&d=identicon&r=PG&f=1", "display_name": "RoQuOTriX", "link": "https://stackoverflow.com/users/8473031/roquotrix"}, "edited": false, "score": 0, "creation_date": 1570022814, "post_id": 58202502, "comment_id": 102782983, "body": "Do not include <a href=\"https://stackoverflow.com/questions/31816095/why-should-i-not-include-bits-stdc-h\" title=\"why should i not include bits stdc h\">stackoverflow.com/questions/31816095/&hellip;</a>"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 3, "creation_date": 1570022826, "post_id": 58202502, "comment_id": 102782993, "body": "<code>c</code> is an array. It has no members like <code>begin</code> and <code>end</code>."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 2, "creation_date": 1570022875, "post_id": 58202502, "comment_id": 102783024, "body": "You&#39;ve shown an error, but you haven&#39;t asked a question. We can probably guess what that question is, but please ask it."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1570027806, "post_id": 58202502, "comment_id": 102786096, "body": "You will want to use <code>std::getline</code> to limit the input to the capacity of your array."}, {"owner": {"reputation": 9551, "user_id": 9837301, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9414V.png?s=128&g=1", "display_name": "JaMiT", "link": "https://stackoverflow.com/users/9837301/jamit"}, "edited": false, "score": 0, "creation_date": 1570071822, "post_id": 58202502, "comment_id": 102800700, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/31525824/request-for-member-begin-in-iondistance-which-is-of-non-class-type-float\">request for member \u2018begin\u2019 in \u2018ionDistance\u2019, which is of non-class type \u2018float*\u2019</a>"}], "answers": [{"comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1570023426, "post_id": 58202576, "comment_id": 102783412, "body": "<a href=\"https://stackoverflow.com/questions/5205491/whats-the-difference-between-stl-and-c-standard-library\">What&#39;s the difference between \u201cSTL\u201d and \u201cC++ Standard Library\u201d?</a>"}, {"owner": {"reputation": 1894, "user_id": 8473031, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4878bfc9d6a80397a8446111fffa4dd?s=128&d=identicon&r=PG&f=1", "display_name": "RoQuOTriX", "link": "https://stackoverflow.com/users/8473031/roquotrix"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1570023637, "post_id": 58202576, "comment_id": 102783525, "body": "@Fran&#231;oisAndrieux thanks! I didn&#39;t know that. I&#39;ve always thought, that there isn&#39;t any standard library and I only reffered to it as the &quot;STL&quot;."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 2, "creation_date": 1570023734, "post_id": 58202576, "comment_id": 102783587, "body": "I think the only thing missing for this answer to be complete is mentioning that <code>char c[101];</code> could work if OP used <code>std::begin(c)</code> and <code>std::end(c)</code>. But <code>std::string</code> is still a better solution."}, {"owner": {"reputation": 1, "user_id": 10501848, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ySgroT4Rxzo/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DUiI5AkPTV-mlzHrX01uU3WiOO0_Q/mo/photo.jpg?sz=128", "display_name": "Mohd Arsalan", "link": "https://stackoverflow.com/users/10501848/mohd-arsalan"}, "edited": false, "score": 0, "creation_date": 1570025929, "post_id": 58202576, "comment_id": 102784937, "body": "How to print it as 1+2+3?"}, {"owner": {"reputation": 1894, "user_id": 8473031, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4878bfc9d6a80397a8446111fffa4dd?s=128&d=identicon&r=PG&f=1", "display_name": "RoQuOTriX", "link": "https://stackoverflow.com/users/8473031/roquotrix"}, "reply_to_user": {"reputation": 1, "user_id": 10501848, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ySgroT4Rxzo/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DUiI5AkPTV-mlzHrX01uU3WiOO0_Q/mo/photo.jpg?sz=128", "display_name": "Mohd Arsalan", "link": "https://stackoverflow.com/users/10501848/mohd-arsalan"}, "edited": false, "score": 0, "creation_date": 1570093997, "post_id": 58202576, "comment_id": 102808002, "body": "@MohdArsalan Sounds like a different problem to me, try to read about scanners and parsers. What is the real problem you try to solve?"}], "tags": [], "owner": {"reputation": 1894, "user_id": 8473031, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4878bfc9d6a80397a8446111fffa4dd?s=128&d=identicon&r=PG&f=1", "display_name": "RoQuOTriX", "link": "https://stackoverflow.com/users/8473031/roquotrix"}, "is_accepted": false, "score": 1, "last_activity_date": 1570023477, "last_edit_date": 1570023477, "creation_date": 1570022961, "answer_id": 58202576, "question_id": 58202502, "link": "https://stackoverflow.com/questions/58202502/request-for-member-begin-in-c-which-is-of-non-class-type-char-101-sort/58202576#58202576", "title": "request for member \u2018begin\u2019 in \u2018c\u2019, which is of non-class type \u2018char [101]\u2019 sort(c.begin(), c.end());", "body": "<p>What you need is a iterable container, C++ provides a std::string class:</p>\n\n<pre><code>// do not use #include &lt;bits/stdc++.h&gt;\n#include &lt;iostream&gt;    //for cin and cout\n#include &lt;string&gt;      //for string\n#include &lt;algorithm&gt;  //for sort\n\nint main() {\n    std::string c; \n    std::cin &gt;&gt; c;\n    std::sort(c.begin(), c.end());\n    std::cout &lt;&lt; c;\n    return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 10501848, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ySgroT4Rxzo/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DUiI5AkPTV-mlzHrX01uU3WiOO0_Q/mo/photo.jpg?sz=128", "display_name": "Mohd Arsalan", "link": "https://stackoverflow.com/users/10501848/mohd-arsalan"}, "edited": false, "score": 0, "creation_date": 1570025898, "post_id": 58202981, "comment_id": 102784913, "body": "How to print it as 1+2+3?"}, {"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 1, "user_id": 10501848, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ySgroT4Rxzo/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DUiI5AkPTV-mlzHrX01uU3WiOO0_Q/mo/photo.jpg?sz=128", "display_name": "Mohd Arsalan", "link": "https://stackoverflow.com/users/10501848/mohd-arsalan"}, "edited": false, "score": 0, "creation_date": 1570025998, "post_id": 58202981, "comment_id": 102784980, "body": "@MohdArsalan You could just reverse the string assuming that it is sorted in the descending order relative to the numbers. Otherwise you should use your own sort function."}, {"owner": {"reputation": 1, "user_id": 10501848, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ySgroT4Rxzo/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DUiI5AkPTV-mlzHrX01uU3WiOO0_Q/mo/photo.jpg?sz=128", "display_name": "Mohd Arsalan", "link": "https://stackoverflow.com/users/10501848/mohd-arsalan"}, "edited": false, "score": 0, "creation_date": 1570026695, "post_id": 58202981, "comment_id": 102785438, "body": "and if it is 1+3+2?"}, {"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 1, "user_id": 10501848, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ySgroT4Rxzo/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DUiI5AkPTV-mlzHrX01uU3WiOO0_Q/mo/photo.jpg?sz=128", "display_name": "Mohd Arsalan", "link": "https://stackoverflow.com/users/10501848/mohd-arsalan"}, "edited": false, "score": 0, "creation_date": 1570026731, "post_id": 58202981, "comment_id": 102785461, "body": "@MohdArsalan You need to use your own sort function."}], "tags": [], "owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 1, "last_activity_date": 1570024350, "creation_date": 1570024350, "answer_id": 58202981, "question_id": 58202502, "link": "https://stackoverflow.com/questions/58202502/request-for-member-begin-in-c-which-is-of-non-class-type-char-101-sort/58202981#58202981", "title": "request for member \u2018begin\u2019 in \u2018c\u2019, which is of non-class type \u2018char [101]\u2019 sort(c.begin(), c.end());", "body": "<p>Arrays are not classes. They do not have member functions.</p>\n\n<p>What you could do is the following. </p>\n\n<p>As in this statement</p>\n\n<pre><code>cin&gt;&gt;c;\n</code></pre>\n\n<p>you are entering a string then you have to calculate the size of the string stored in the character array. To do this you have to include the header <code>&lt;cstring&gt;</code> where the standard function <code>strlen</code> is declared.</p>\n\n<p>Then the call of <code>std::sort</code> can look the following way as it is shown in the demonstrative program.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;algorithm&gt;\n#include &lt;cstring&gt;\n\nint main() \n{\n    char c[101];\n\n    std::cin &gt;&gt; c;\n\n    std::sort( c, c + std::strlen( c ) );\n\n    std::cout &lt;&lt; c &lt;&lt; '\\n'; \n\n    return 0;\n}\n</code></pre>\n\n<p>However pay into account that if you will enter the string </p>\n\n<pre><code>3+2+1\n</code></pre>\n\n<p>then after sorting you will get</p>\n\n<pre><code>++123\n</code></pre>\n\n<p>Also the call</p>\n\n<pre><code>cin&gt;&gt;c;\n</code></pre>\n\n<p>is unsafe. Instead of it you could use member function <code>getline</code> of the class std::istream the following way</p>\n\n<p><code>std::cin.getline( c, sizeof( c ), '\\n' );</code></p>\n\n<p>As an alternative instead of the character array you could use the standard class <code>std::string</code>.</p>\n"}], "owner": {"reputation": 1, "user_id": 10501848, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ySgroT4Rxzo/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DUiI5AkPTV-mlzHrX01uU3WiOO0_Q/mo/photo.jpg?sz=128", "display_name": "Mohd Arsalan", "link": "https://stackoverflow.com/users/10501848/mohd-arsalan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 196, "favorite_count": 0, "answer_count": 2, "score": -4, "last_activity_date": 1570024350, "creation_date": 1570022706, "question_id": 58202502, "link": "https://stackoverflow.com/questions/58202502/request-for-member-begin-in-c-which-is-of-non-class-type-char-101-sort", "title": "request for member \u2018begin\u2019 in \u2018c\u2019, which is of non-class type \u2018char [101]\u2019 sort(c.begin(), c.end());", "body": "<p><strong>CODE</strong></p>\n\n<pre><code>#include &lt;bits/stdc++.h&gt;\nusing namespace std;\nint main() {\n    char c[101];\n    cin&gt;&gt;c;\n    sort(c.begin(), c.end());\n    cout&lt;&lt;c;\n    return 0;\n}\n</code></pre>\n\n<p><strong>ERROR</strong>\nprog.cpp: In function \u2018int main()\u2019:\nprog.cpp:6:9: error: request for member \u2018begin\u2019 in \u2018c\u2019, which is of non-class type \u2018char [101]\u2019\n  sort(c.begin(), c.end());\n         ^~~~~\nprog.cpp:6:20: error: request for member \u2018end\u2019 in \u2018c\u2019, which is of non-class type \u2018char [101]\u2019\n  sort(c.begin(), c.end());\n                    ^~~</p>\n\n<p><strong>INPUT USED</strong>\n3+2+1</p>\n\n<p><strong>COMPILER USED</strong>\nlanguage:\nC++14 (gcc 8.3)</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 1, "creation_date": 1570022215, "post_id": 58202340, "comment_id": 102782614, "body": "@ejendra Saradhi There is no space in the array SQLQueryViewMARKS_12A to accommodate the appended string.:)"}, {"owner": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "edited": false, "score": 0, "creation_date": 1570022302, "post_id": 58202340, "comment_id": 102782668, "body": "&quot;I tried this&quot; - okay? Did it not work? If you want an example of the usage of this function, <a href=\"https://en.cppreference.com/w/c/string/byte/strcat\" rel=\"nofollow noreferrer\">here you go</a>."}, {"owner": {"reputation": 29641, "user_id": 10871073, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ddBW9.png?s=128&g=1", "display_name": "Adrian Mole", "link": "https://stackoverflow.com/users/10871073/adrian-mole"}, "edited": false, "score": 0, "creation_date": 1570022307, "post_id": 58202340, "comment_id": 102782674, "body": "Welcome to Stack Overflow! Your code/question is <b><i>very</i></b> vague - the more information you give us, the more we are likely to be able to help you!!"}], "answers": [{"comments": [{"owner": {"reputation": 3797, "user_id": 4022608, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/27c9e8430426724a1f39c98b268f0a98?s=128&d=identicon&r=PG&f=1", "display_name": "Baldrickk", "link": "https://stackoverflow.com/users/4022608/baldrickk"}, "edited": false, "score": 0, "creation_date": 1570027592, "post_id": 58202445, "comment_id": 102785969, "body": "As a <code>std::string</code> do you really need to explicitly add the null character to the end? and what&#39;s with the space following it?  Am I just being dense?"}, {"owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "reply_to_user": {"reputation": 3797, "user_id": 4022608, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/27c9e8430426724a1f39c98b268f0a98?s=128&d=identicon&r=PG&f=1", "display_name": "Baldrickk", "link": "https://stackoverflow.com/users/4022608/baldrickk"}, "edited": false, "score": 0, "creation_date": 1570027831, "post_id": 58202445, "comment_id": 102786111, "body": "@Baldrickk Its not <code>\\0</code>, it&#39;s <code>&#47;0</code>. It comes straight from OP&#39;s code, along with the space at the end."}, {"owner": {"reputation": 3797, "user_id": 4022608, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/27c9e8430426724a1f39c98b268f0a98?s=128&d=identicon&r=PG&f=1", "display_name": "Baldrickk", "link": "https://stackoverflow.com/users/4022608/baldrickk"}, "edited": false, "score": 0, "creation_date": 1570028057, "post_id": 58202445, "comment_id": 102786230, "body": "Me being dense then (I know it&#39;s in their code, but I misread it as a null)   This isn&#39;t helped by &quot;/0&quot; not being in their expected output...  I was reading it as their manually null terminating the strings to be concatenated."}], "tags": [], "owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "is_accepted": true, "score": 3, "last_activity_date": 1570022522, "creation_date": 1570022522, "answer_id": 58202445, "question_id": 58202340, "link": "https://stackoverflow.com/questions/58202340/i-need-a-example-for-strcat-s/58202445#58202445", "title": "I need a example for strcat_s()", "body": "<p>Your code is almost right. The only thing that is missing is the space for the additional string that you would like concatenated to the original:</p>\n\n<pre><code>char SQLQueryViewMARKS_12A[128] = \"SELECT *FROM Marks_12A WHERE Test_Name = \";\n//                         ^^^\n// Give your string more space to ensure that additional characters have place to fit\n//\nstrcat_s(SQLQueryViewMARKS_12A,sizeof(SQLQueryViewMARKS_12A),\"'/0 \");\n</code></pre>\n\n<p>Note that although <code>strcat_s</code> works fine in C++, <code>std::string</code> from the Standard C++ library gives you a much more powerful alternative:</p>\n\n<pre><code>std::string SQLQueryViewMARKS_12A = \"SELECT *FROM Marks_12A WHERE Test_Name = \";\nSQLQueryViewMARKS_12A += \"'/0 \";\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 11561065, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ua6xS.jpg?s=128&g=1", "display_name": "Tejendra Saradhi", "link": "https://stackoverflow.com/users/11561065/tejendra-saradhi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 780, "favorite_count": 0, "accepted_answer_id": 58202445, "answer_count": 1, "score": 2, "last_activity_date": 1570022586, "creation_date": 1570022140, "last_edit_date": 1570022586, "question_id": 58202340, "link": "https://stackoverflow.com/questions/58202340/i-need-a-example-for-strcat-s", "title": "I need a example for strcat_s()", "body": "<p>Can you please give me an example for c++. which works on Visual studio 2019.</p>\n\n<p>I tried this </p>\n\n<pre><code>  char test_name[50];\n    char SQLQueryViewMARKS_12A[] = \"SELECT *FROM Marks_12A WHERE Test_Name = \";\n    cin&gt;&gt;test_name;\n    strcat_s(SQLQueryViewMARKS_12A,sizeof(SQLQueryViewMARKS_12A),\"'/0 \");\n    strcat_s(SQLQueryViewMARKS_12A,sizeof(SQLQueryViewMARKS_12A),test_name);\n    strcat_s(SQLQueryViewMARKS_12A,sizeof(SQLQueryViewMARKS_12A), \"'/0\");\n</code></pre>\n\n<p>The expected result was :</p>\n\n<p>If user entered UT</p>\n\n<p>The query must get concatenate to </p>\n\n<pre><code>char SQLQueryViewMARKS_12A[] = \"SELECT *FROM Marks_12A WHERE Test_Name = ' UT ' \";\n</code></pre>\n"}, {"tags": ["c++", "interface", "stl", "containers", "c++-standard-library"], "comments": [{"owner": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "edited": false, "score": 1, "creation_date": 1570022290, "post_id": 58202288, "comment_id": 102782659, "body": "Well, you don&#39;t ever specialize <code>std::swap()</code>. Provide your own specialized version as a free function in the container&#39;s namespace for ADL instead. As an aside, <code>std::swap()</code> is most certainly not even an <i>addressable function</i> in C++20."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1570022320, "post_id": 58202288, "comment_id": 102782685, "body": "You need to follow everything in <a href=\"https://timsong-cpp.github.io/cppwp/container.requirements.general\" rel=\"nofollow noreferrer\">the general requirements</a>, <a href=\"https://timsong-cpp.github.io/cppwp/sequence.reqmts\" rel=\"nofollow noreferrer\">the sequence requirements</a>, and your iterators need to follow <a href=\"https://timsong-cpp.github.io/cppwp/iterator.requirements\" rel=\"nofollow noreferrer\">the iterator requirements</a>. All that said, this should probably be posted on <a href=\"https://codereview.stackexchange.com/help/how-to-ask\">CodeReview.SE</a>.  If you do decide to do so please delete the question here."}, {"owner": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1570022376, "post_id": 58202288, "comment_id": 102782716, "body": "@NathanOliver It&#39;s not even stub code yet, so no to CR."}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 1, "creation_date": 1570022724, "post_id": 58202288, "comment_id": 102782922, "body": "<code>std::const_reverse_iterator</code> isn&#39;t a thing. You probably mean <code>using const_reverse_iterator = std::reverse_iterator&lt;const_iterator&gt;;</code>. You need to name (or alias) your member types properly."}], "answers": [{"tags": [], "owner": {"reputation": 929, "user_id": 4253931, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b751517b9a663cda1d8ab07027bb59a?s=128&d=identicon&r=PG&f=1", "display_name": "eike", "link": "https://stackoverflow.com/users/4253931/eike"}, "is_accepted": true, "score": 2, "last_activity_date": 1570022373, "creation_date": 1570022373, "answer_id": 58202409, "question_id": 58202288, "link": "https://stackoverflow.com/questions/58202288/what-is-the-complete-interface-of-a-c-standard-compatible-library-container/58202409#58202409", "title": "What is the complete interface of a C++ standard compatible library container?", "body": "<p>I think, depending on the kind of container you want to implement, the new <a href=\"https://en.cppreference.com/w/cpp/named_req\" rel=\"nofollow noreferrer\">standard requirements</a> (standard concepts) added in C++20 are a good place to look for the required interface of a standard container.</p>\n\n<p>Example for <a href=\"https://en.cppreference.com/w/cpp/named_req/Container\" rel=\"nofollow noreferrer\"><code>Container</code></a> and especially <a href=\"https://en.cppreference.com/w/cpp/named_req/AllocatorAwareContainer\" rel=\"nofollow noreferrer\"><code>AllocatorAwareContainer</code></a></p>\n"}], "owner": {"reputation": 3295, "user_id": 4743275, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/7f8p3.jpg?s=128&g=1", "display_name": "KeyC0de", "link": "https://stackoverflow.com/users/4743275/keyc0de"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 94, "favorite_count": 0, "accepted_answer_id": 58202409, "answer_count": 1, "score": 1, "last_activity_date": 1570022373, "creation_date": 1570022001, "question_id": 58202288, "link": "https://stackoverflow.com/questions/58202288/what-is-the-complete-interface-of-a-c-standard-compatible-library-container", "title": "What is the complete interface of a C++ standard compatible library container?", "body": "<p>I'm trying to understand the C++ standard library. If I want to build a new kind of container fully compatible with latest C++17 standards (excluding polymorphic allocator support as I'm not that clear on that yet), with full compatibility with iterators, what is the complete set of member functions and types I must provide?</p>\n\n<p>Take a sequence container like std::vector for example. In other words, say I want to provide everything that std::vector provides. Also considering allocator support.</p>\n\n<p>Of course I also want to provide iterators, exactly as std::vector does it (I don't want to delegate to it; I want from the ground up remake), so I suppose I will need two nested iterator classes, one for <code>iterator</code> and one for <code>const_iterator</code>.</p>\n\n<p>I've come up with the following:</p>\n\n<pre><code>template &lt;class T, class Alloc = std::allocator_traits&lt;T&gt;&gt;\nclass StdLibClass\n{\npublic:\n    using allocator_type = Alloc;\n    using value_type = typename Alloc::value_type;\n    using reference = typename Alloc::reference;\n    using const_reference = typename Alloc::const_reference;\n    using difference_type = typename Alloc::difference_type;\n    using size_type = typename Alloc::size_type;\n\n    class Iterator\n    {\n    public:\n        using difference_type = typename Alloc::difference_type;\n        using value_type = typename Alloc::value_type;\n        using reference = typename Alloc::reference;\n        using pointer = typename Alloc::pointer;\n        using iterator_category = std::random_access_iterator_tag;  // or another Iterator tag you want\n\n        Iterator();\n        Iterator(const Iterator&amp;);\n        ~Iterator();\n\n        Iterator&amp; operator=(const Iterator&amp;);\n        bool operator==(const Iterator&amp;) const;\n        bool operator!=(const Iterator&amp;) const;\n        bool operator&lt;(const Iterator&amp;) const;\n        bool operator&gt;(const Iterator&amp;) const;\n        bool operator&lt;=(const Iterator&amp;) const;\n        bool operator&gt;=(const Iterator&amp;) const;\n\n        Iterator &amp;operator++();\n        Iterator operator++(int);\n        Iterator &amp;operator--();\n        Iterator operator--(int);\n        Iterator &amp;operator+=(size_type);\n        Iterator operator+(size_type) const;\n        friend Iterator operator+(size_type, const Iterator&amp;);\n        Iterator &amp;operator-=(size_type);\n        Iterator operator-(size_type) const;\n        difference_type operator-(Iterator) const;\n\n        reference operator*() const;\n        pointer operator-&gt;() const;\n        reference operator[](size_type) const;\n    };\n\n    class ConstIterator\n    {\n    public:\n        using difference_type = typename Alloc::difference_type;\n        using value_type = typename Alloc::value_type;\n        using reference = typename const Alloc::reference;\n        using pointer = typename const Alloc::pointer;\n        using iterator_category = std::random_access_iterator_tag;  // or another Iterator tag you want\n\n        ConstIterator();\n        ConstIterator(const ConstIterator&amp;);\n        ConstIterator(const Iterator&amp;);\n        ~ConstIterator();\n\n        ConstIterator&amp; operator=(const ConstIterator&amp;);\n        bool operator==(const ConstIterator&amp;) const;\n        bool operator!=(const ConstIterator&amp;) const;\n        bool operator&lt;(const ConstIterator&amp;) const;\n        bool operator&gt;(const ConstIterator&amp;) const;\n        bool operator&lt;=(const ConstIterator&amp;) const;\n        bool operator&gt;=(const ConstIterator&amp;) const;\n\n        ConstIterator &amp;operator++();\n        ConstIterator operator++(int);\n        ConstIterator &amp;operator--();\n        ConstIterator operator--(int);\n        ConstIterator &amp;operator+=(size_type);\n        ConstIterator operator+(size_type) const;\n        friend ConstIterator operator+(size_type, const ConstIterator&amp;);\n        ConstIterator &amp;operator-=(size_type);\n        ConstIterator operator-(size_type) const;\n        difference_type operator-(ConstIterator) const;\n\n        reference operator*() const;\n        pointer operator-&gt;() const;\n        reference operator[](size_type) const;\n    };\n\n    using ReverseIterator = std::reverse_iterator&lt;Iterator&gt;;\n    using ConstReverseIterator = std::const_reverse_iterator&lt;ConstIterator&gt;;\n\n    StdLibClass();\n    ~StdLibClass();\n    StdLibClass(const StdLibClass&amp;);\n    StdLibClass&amp; operator=(const StdLibClass&amp;);\n    StdLibClass(const StdLibClass&amp;&amp;);\n    StdLibClass&amp; operator=(const StdLibClass&amp;&amp;);\n\n    bool operator==(const StdLibClass&amp;) const;\n    bool operator!=(const StdLibClass&amp;) const;\n    bool operator&lt;(const StdLibClass&amp;) const;\n    bool operator&gt;(const StdLibClass&amp;) const;\n    bool operator&lt;=(const StdLibClass&amp;) const;\n    bool operator&gt;=(const StdLibClass&amp;) const;\n\n    Iterator begin();\n    ConstIterator begin() const;\n    ConstIterator cbegin() const;\n    Iterator end();\n    ConstIterator end() const;\n    ConstIterator cend() const;\n    ReverseIterator rbegin();\n    ConstReverseIterator rbegin() const;\n    ConstReverseIterator crbegin() const;\n    ReverseIterator rend();\n    ConstReverseIterator rend() const;\n    ConstReverseIterator crend() const;\n\n    reference front();\n    const_reference front() const;\n    reference back();\n    const_reference back() const;\n\n    template &lt;class... TArgs&gt;\n    void emplace_front(TArgs &amp;&amp;...);\n    template &lt;class... TArgs&gt;\n    void emplace_back(TArgs &amp;&amp;...);\n    void push_front(const T&amp;);\n    void push_front(T&amp;&amp;);\n    void push_back(const T&amp;);\n    void push_back(T&amp;&amp;);\n    void pop_front();\n    void pop_back();\n    reference operator[](size_type);\n    const_reference operator[](size_type) const;\n    reference at(size_type);\n    const_reference at(size_type) const;\n\n    template &lt;class... TArgs&gt;\n    Iterator emplace(ConstIterator, TArgs&amp;&amp;...);\n    Iterator insert(ConstIterator, const T&amp;);\n    Iterator insert(ConstIterator, T&amp;&amp;);\n    Iterator insert(ConstIterator, size_type, T&amp;);\n    template &lt;class Iter&gt;\n    Iterator insert(ConstIterator, Iter, Iter);\n    Iterator insert(ConstIterator, std::initializer_list&lt;T&gt;);\n    Iterator erase(ConstIterator);\n    Iterator erase(ConstIterator, ConstIterator);\n    void clear();\n    template &lt;class Iter&gt;\n    void assign(Iter, Iter);\n    void assign(std::initializer_list&lt;T&gt;);\n    void assign(size_type, const T&amp;);\n\n    void swap(StdLibClass &amp;);\n    size_type size() const;\n    size_type max_size() const;\n    bool empty() const;\n\n    Alloc get_allocator() const;\n};\n\n// possibly want to specialize std::swap for the class too\nnamespace std\n{\n\ntemplate &lt;&gt;\nvoid swap&lt;T, StdLibClass&lt;T, Alloc&gt;&gt;(StdLibClass&lt;T, Alloc&gt;&amp;, StdLibClass&lt;T, Alloc&gt;&amp;);\n\n} // namespace std\n\nint main()\n{\n\n    return 0;\n}\n</code></pre>\n\n<p>Some I've found in webpages around the internet, others I've found by digging the standard library headers. Is there some member or some other concept I'm missing?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 789, "user_id": 8120642, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-OX8-_3nAbeE/AAAAAAAAAAI/AAAAAAAAAAA/of7PUZBmbk4/photo.jpg?sz=128", "display_name": "hegel5000", "link": "https://stackoverflow.com/users/8120642/hegel5000"}, "edited": false, "score": 0, "creation_date": 1570021808, "post_id": 58202203, "comment_id": 102782324, "body": "<a href=\"https://stackoverflow.com/questions/8928547/vector-initialization-or-reserve\" title=\"vector initialization or reserve\">stackoverflow.com/questions/8928547/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 1, "creation_date": 1570021875, "post_id": 58202231, "comment_id": 102782374, "body": "&quot;<i>only worry about reallocation issues if your performance profiler highlights it as a bottleneck.</i>&quot; Which <code>arr.reserve (n)</code> might help to fix :) EDIT: Had <code>reserve</code> in mind, while my hands wrote <code>resize</code>.. Derp.. :/"}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 8084, "user_id": 2896626, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/4cd83959d7fe39c658d2e49cfecfe4b6?s=128&d=identicon&r=PG&f=1", "display_name": "Paul92", "link": "https://stackoverflow.com/users/2896626/paul92"}, "edited": false, "score": 2, "creation_date": 1570021969, "post_id": 58202231, "comment_id": 102782442, "body": "@Paul92: I disagree with that. If I had a dollar for every bit of UB I&#39;ve come across due to a misplaced <code>arr[i]</code> I&#39;d be very, very rich. I like the simplicity of not having to worry about how many things I&#39;ve put into the vector."}, {"owner": {"reputation": 929, "user_id": 4253931, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b751517b9a663cda1d8ab07027bb59a?s=128&d=identicon&r=PG&f=1", "display_name": "eike", "link": "https://stackoverflow.com/users/4253931/eike"}, "reply_to_user": {"reputation": 8084, "user_id": 2896626, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/4cd83959d7fe39c658d2e49cfecfe4b6?s=128&d=identicon&r=PG&f=1", "display_name": "Paul92", "link": "https://stackoverflow.com/users/2896626/paul92"}, "edited": false, "score": 0, "creation_date": 1570022046, "post_id": 58202231, "comment_id": 102782490, "body": "@Paul92 I aggree with Bathsheba, if you want to avoid reallocation, either use <code>arr.reserve</code> and <code>arr.push_back</code> or at least use <code>arr.at(i)=...</code> as that is bounds checked."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 2, "creation_date": 1570022105, "post_id": 58202231, "comment_id": 102782524, "body": "If you&#39;re <i>really</i> worried then <code>reserve</code> and <code>emplace_back</code> are hard to beat. But with such a light payload as an <code>int</code>, this is hardly pertinent."}, {"owner": {"reputation": 39, "user_id": 12150942, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c93b65d79e93563a340a81cae8cc1f80?s=128&d=identicon&r=PG", "display_name": "Ste1Drag", "link": "https://stackoverflow.com/users/12150942/ste1drag"}, "edited": false, "score": 0, "creation_date": 1570022429, "post_id": 58202231, "comment_id": 102782749, "body": "Yes, but i somehow expected when I insert size, without adding elements to vector, I  expected the size to be zero and capacity to be <code>n</code> , but size and capacity are zero, so that&#39;s what confuses me."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 39, "user_id": 12150942, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c93b65d79e93563a340a81cae8cc1f80?s=128&d=identicon&r=PG", "display_name": "Ste1Drag", "link": "https://stackoverflow.com/users/12150942/ste1drag"}, "edited": false, "score": 1, "creation_date": 1570022609, "post_id": 58202231, "comment_id": 102782843, "body": "@user700999: That&#39;s exactly how Java does it, but in the C++ world we&#39;re more grown up than that."}], "tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": true, "score": 2, "last_activity_date": 1570021807, "creation_date": 1570021807, "answer_id": 58202231, "question_id": 58202203, "link": "https://stackoverflow.com/questions/58202203/how-to-create-a-empty-vector-in-c/58202231#58202231", "title": "How to create a empty vector in C++?", "body": "<p><code>push_back</code> <em>always</em> appends new elements onto the end of a <code>vector</code>.</p>\n\n<p><code>std::vector&lt;int&gt; arr(n);</code> sets the initial size to <code>n</code>.</p>\n\n<p>Hence you end up with more than <code>n</code> elements.</p>\n\n<p>Using simply <code>std::vector&lt;int&gt; arr;</code> is a good fix - only worry about reallocation issues if your performance profiler highlights it as a bottleneck.</p>\n"}], "owner": {"reputation": 39, "user_id": 12150942, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c93b65d79e93563a340a81cae8cc1f80?s=128&d=identicon&r=PG", "display_name": "Ste1Drag", "link": "https://stackoverflow.com/users/12150942/ste1drag"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2509, "favorite_count": 0, "closed_date": 1570021846, "accepted_answer_id": 58202231, "answer_count": 1, "score": 1, "last_activity_date": 1570021934, "creation_date": 1570021702, "question_id": 58202203, "link": "https://stackoverflow.com/questions/58202203/how-to-create-a-empty-vector-in-c", "closed_reason": "Duplicate", "title": "How to create a empty vector in C++?", "body": "<p>I wanted to add elements in vector, not complicated at all.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n\nint main(){\n    int n;\n    std::cin&gt;&gt;n;\n    std::vector&lt;int&gt; arr(n);\n    for(int i=0;i&lt;n;i++){\n        arr.push_back(i);\n    }\n    for(int i=0;i&lt;n;i++){\n       std::cout&lt;&lt;arr[i];\n    }\n    std::cout&lt;&lt;\"\\n\";\n    std::cout&lt;&lt;arr.capacity()&lt;&lt;\"\\n\";\n    std::cout&lt;&lt;arr.size()&lt;&lt;\"\\n\";\n\n\n }\n</code></pre>\n\n<p>But the problem is when I compile the size and capacity are 2 times bigger than the size i put in code(in this case size is n),  and n zeros are printed out.</p>\n"}, {"tags": ["c++", "eigen"], "comments": [{"owner": {"reputation": 21392, "user_id": 4770166, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ar44f.jpg?s=128&g=1", "display_name": "RHertel", "link": "https://stackoverflow.com/users/4770166/rhertel"}, "edited": false, "score": 0, "creation_date": 1570023193, "post_id": 58202188, "comment_id": 102783245, "body": "This compiles fine on my machine (g++ 5.4, ubuntu 16.04). I&#39;m using the devel version of Eigen though (v 3.3.90). Not sure if that makes any difference."}, {"owner": {"reputation": 19146, "user_id": 635654, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/b8fb58eef98caeec6ab3366e0ac986d7?s=128&d=identicon&r=PG", "display_name": "CygnusX1", "link": "https://stackoverflow.com/users/635654/cygnusx1"}, "reply_to_user": {"reputation": 21392, "user_id": 4770166, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ar44f.jpg?s=128&g=1", "display_name": "RHertel", "link": "https://stackoverflow.com/users/4770166/rhertel"}, "edited": false, "score": 0, "creation_date": 1570024969, "post_id": 58202188, "comment_id": 102784367, "body": "@RHertel Thank you for the tip! My g++ 9.1 can compile it too under linux. This may be a problem of Visual Studio and not my code. I would like to get to the bottom of this though, as ultimately I am using Visual Studio in production."}], "answers": [{"tags": [], "owner": {"reputation": 14588, "user_id": 6870253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c7ce91530d2dddae7b9fc2bd828ed78?s=128&d=identicon&r=PG&f=1", "display_name": "chtz", "link": "https://stackoverflow.com/users/6870253/chtz"}, "is_accepted": true, "score": 3, "last_activity_date": 1570027583, "creation_date": 1570027583, "answer_id": 58203933, "question_id": 58202188, "link": "https://stackoverflow.com/questions/58202188/taking-eigenvector-as-a-parameter/58203933#58203933", "title": "Taking Eigen::Vector as a parameter", "body": "<p>This indeed looks like an MSVC issue, it compiles fine with gcc >= 4.7, and clang >= 3.5: <a href=\"https://godbolt.org/z/kqoHyO\" rel=\"nofollow noreferrer\">https://godbolt.org/z/kqoHyO</a></p>\n\n<p>One possible workaround would be to explicitly write out what <code>Eigen::Vector</code> expands to:</p>\n\n<pre><code>template&lt;class F, typename T, int dim&gt;\nvoid bar(F&amp;&amp; func, const Eigen::Matrix&lt;T, dim, 1, 0, dim, 1&gt;&amp; arg1) {\n}\n</code></pre>\n\n<p><a href=\"https://godbolt.org/z/vlvSDP\" rel=\"nofollow noreferrer\">https://godbolt.org/z/vlvSDP</a></p>\n\n<p>The weird <code>|_Rows==&amp;&amp;?:&amp;&amp;_Rows!=?:</code> looks like MSVC mangled the default value of the <code>Options</code> template parameter:</p>\n\n<pre><code>          AutoAlign |\n                      ( (_Rows==1 &amp;&amp; _Cols!=1) ? Eigen::RowMajor\n                      : (_Cols==1 &amp;&amp; _Rows!=1) ? Eigen::ColMajor\n                      : EIGEN_DEFAULT_MATRIX_STORAGE_ORDER_OPTION ),\n</code></pre>\n\n<p>If you want to get to the bottom of this, you should file a bug-report to the MSVC maintainers, maybe using a simplified example like this: <a href=\"https://godbolt.org/z/U_0Sh7\" rel=\"nofollow noreferrer\">https://godbolt.org/z/U_0Sh7</a> (probably it's possible to reduce this even more).</p>\n"}], "owner": {"reputation": 19146, "user_id": 635654, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/b8fb58eef98caeec6ab3366e0ac986d7?s=128&d=identicon&r=PG", "display_name": "CygnusX1", "link": "https://stackoverflow.com/users/635654/cygnusx1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "accepted_answer_id": 58203933, "answer_count": 1, "score": 0, "last_activity_date": 1570027583, "creation_date": 1570021660, "question_id": 58202188, "link": "https://stackoverflow.com/questions/58202188/taking-eigenvector-as-a-parameter", "title": "Taking Eigen::Vector as a parameter", "body": "<p>I am trying to write a function that takes an <code>Eigen::Vector&lt;T, dim&gt;</code> as a parameter. However, the following example fails to compile:</p>\n\n<pre><code>#include &lt;Eigen/Core&gt;\n\ntemplate&lt;class F, typename T, int dim&gt;\nvoid bar(F&amp;&amp; func, const Eigen::Vector&lt;T, dim&gt;&amp; arg1) {\n}\n\ntemplate&lt;typename T, int dim&gt;\nvoid foo(const Eigen::Vector&lt;T, dim&gt;&amp; a) {\n  return bar([] {}, a);\n}\n\nint main() {\n  Eigen::Vector&lt;float, 3&gt; v1{ 1.f,2.f,3.f };\n  foo(v1);\n  return 0;\n}\n</code></pre>\n\n<p>This, under Visual Studio 2019, gives me the following error:</p>\n\n<pre><code>1&gt;main.cpp(9,10): error C2672:  'bar': no matching overloaded function found\n1&gt;main.cpp(14): message :  see reference to function template instantiation 'void foo&lt;float,3&gt;(const Eigen::Matrix&lt;float,3,1,0,3,1&gt; &amp;)' being compiled\n1&gt;main.cpp(9,1): error C2784:  'void bar(F &amp;&amp;,const Eigen::Matrix&lt;T,dim,1,|_Rows==&amp;&amp;?:&amp;&amp;_Rows!=?:,_Rows,1&gt; &amp;)': could not deduce template argument for 'const Eigen::Matrix&lt;T,dim,1,|_Rows==&amp;&amp;?:&amp;&amp;_Rows!=?:,_Rows,1&gt; &amp;' from 'const Eigen::Matrix&lt;float,3,1,0,3,1&gt;'\n1&gt;main.cpp(4): message :  see declaration of 'bar'\n</code></pre>\n\n<p>My questions:</p>\n\n<ul>\n<li>What is this weird <code>|_Rows==&amp;&amp;?:&amp;&amp;_Rows!=?:</code> in the error message?</li>\n<li>What can I do to make the above code compile?</li>\n</ul>\n\n<p>The <code>bar</code> function should have <code>T</code> and <code>dim</code> availabe. I cannot just take <code>const AnyType&amp; arg1</code>, because the actual implementation of <code>bar</code> depends on compile-time known values <code>T</code> and <code>dim</code>.</p>\n\n<p>I have seen <a href=\"https://eigen.tuxfamily.org/dox/TopicFunctionTakingEigenTypes.html\" rel=\"nofollow noreferrer\">https://eigen.tuxfamily.org/dox/TopicFunctionTakingEigenTypes.html</a>. I <em>think</em> I understand what they are saying, but I am not sure if it applies here. I am taking an actual <code>Eigen::Vector</code> as an argument, not an expression.</p>\n\n<p>If there was an expression it would be fine for me, to have it materialized.</p>\n\n<p>Nevertheless, if I try to follow their instruction and just use <code>ArrayBase&lt;Derived&gt;</code>, I lose the compile-time information about <code>T</code> and <code>dim</code>.</p>\n"}, {"tags": ["c#", "c++", "tensorflow", "dll"], "answers": [{"comments": [{"owner": {"reputation": 95, "user_id": 10427809, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lgOuo.jpg?s=128&g=1", "display_name": "Coco Yen", "link": "https://stackoverflow.com/users/10427809/coco-yen"}, "edited": false, "score": 1, "creation_date": 1570149509, "post_id": 58202725, "comment_id": 102831753, "body": "Thanks for your reply. Sorry it&#39;s my very first time to ask question on stackoverflow, I&#39;m not very familiar with it&#39;s rules. Since it&#39;s the whole process I&#39;ve encountered, so I didn&#39;t planned to asked in two different questions. I&#39;ll keep in mind not to make this kind of mistake next time. As for the first item, it can run correctly with tensorflow initialization declared globally like that(exe in c++). But when in switch to running in exe(c#), it just stuck.By the way, I didn&#39;t run the first exe(c++) and the second exe(c#) at the same time, so that&#39;s not the reason it couldn&#39;t work I think.."}, {"owner": {"user_type": "does_not_exist", "display_name": "user12151971"}, "reply_to_user": {"reputation": 95, "user_id": 10427809, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lgOuo.jpg?s=128&g=1", "display_name": "Coco Yen", "link": "https://stackoverflow.com/users/10427809/coco-yen"}, "edited": false, "score": 1, "creation_date": 1570154260, "post_id": 58202725, "comment_id": 102832619, "body": "It is ok. I was thinking more that the first program (c++) was still in the process upon exit (hence holding up some resources, and preventing the second program, c#, to do proper tensorflow inference task)."}, {"owner": {"reputation": 95, "user_id": 10427809, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lgOuo.jpg?s=128&g=1", "display_name": "Coco Yen", "link": "https://stackoverflow.com/users/10427809/coco-yen"}, "edited": false, "score": 1, "creation_date": 1570241885, "post_id": 58202725, "comment_id": 102861673, "body": "I&#39;ll try to revise my code in that way.Thanks a lot for your suggestion!"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user12151971"}, "is_accepted": true, "score": 1, "last_activity_date": 1570169235, "last_edit_date": 1570169235, "creation_date": 1570023472, "answer_id": 58202725, "question_id": 58202051, "link": "https://stackoverflow.com/questions/58202051/why-does-it-fail-to-declare-a-class-globally-in-c-which-is-built-to-be-a-dll-f/58202725#58202725", "title": "Why does it fail to declare a class globally in c++ which is built to be a dll file?", "body": "<p>First you need to decouple your issue here as I see there are two items. First, about running your code from the Dll with global static initialization. Second, about running your code with your structure for TensorFlow inference.</p>\n\n<p>About the first item, this <em>should</em> be working. You can try these by running them with a simple task (for example, console print out) but not tensorflow initializations (comment them out). The second item, in your case, it <em>could</em> be that the GPU is occupied by the first exe, hence, the second exe was waiting.</p>\n\n<p><strong>Update</strong></p>\n\n<p>Some suggestion for you code:</p>\n\n<pre><code>//file.cpp\n#include &lt;memory&gt;\n\nstd::shared_ptr&lt;Unets&gt; init()  // initialization of those class objects\n{\n    //Unets TT;  // error: 'Unets::Unets(void)':attempting to reference a deleted function\n               // error: the default constructor of \"Unets\" cannot be referenced -- it is a deleted function\n    auto TT = std::make_shared&lt;Unets&gt;();\n\n    ...\n    ...\n\n    return TT;\n}\n\nLIB_API void inference(pic3)  // the function c# calling for each inference\n{\n    //Unets TT2;  // error: the default constructor of \"Unets\" cannot be referenced -- it is a deleted function\n    auto TT2 = init();\n    TT2-&gt;A.predict(pic3);\n}\n\n</code></pre>\n"}], "owner": {"reputation": 95, "user_id": 10427809, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lgOuo.jpg?s=128&g=1", "display_name": "Coco Yen", "link": "https://stackoverflow.com/users/10427809/coco-yen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 0, "accepted_answer_id": 58202725, "answer_count": 1, "score": 1, "last_activity_date": 1570169235, "creation_date": 1570021195, "question_id": 58202051, "link": "https://stackoverflow.com/questions/58202051/why-does-it-fail-to-declare-a-class-globally-in-c-which-is-built-to-be-a-dll-f", "title": "Why does it fail to declare a class globally in c++ which is built to be a dll file?", "body": "<p>I'm working on a project which required a dll file for another program written in c# to use. Since I'm not very familiar with C++ and the details about C# calling function from dll...</p>\n\n<p><strong>FIRST</strong> - I wrote those functions I need in a the most basic way</p>\n\n<p>-> composed of A.h, A.cpp, and run with the built file A.exe made from VS2015</p>\n\n<p><strong>SECOND</strong> -  I revise the code run successfully above to the format which made some functions can be called from c# through the dll file</p>\n\n<p>-> composed of A.h, A.cpp, get a A.dll built from VS2015</p>\n\n<p><strong>THIRD</strong> - I test the dll file's function through a simple C# program</p>\n\n<p>Since the code is going to be used on real-time inference(with tensorflow's model), so I wrote the part of model initializing in a function, and the inference part in another function. I made all the model's function a class(including <strong><em>initialize</em></strong> and <strong><em>inference</em></strong>). </p>\n\n<p>There are more than 1 model I use in the project, and the models won't be modified after they're initialized. Since they have to use in different functions, I decide to globalize each class(model).</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>//file.h\n\nclass UnetInterface\n{\npublic:\n    UnetInterface(std::string model_path);\n\n    int predict(cv::Mat srcImage, cv::Mat&amp; dstimage);\nprivate:\n    ....\n};\n\n\n//file.cpp\n\n//I put those class declaration outside functions to make them globally\n\nUnetInterface A = UnetInterface(path1);\nUnetInterface B = UnetInterface(path2);\n\nUnetInterface::UnetInterface(string model_path)\n{\n    inp_tensor_name = \"input_1:0\";\n    out_tensor_name = \"conv2d_19/Sigmoid:0\";\n    std::cout &lt;&lt; \"UnetInerface-&gt; \" &lt;&lt; model_path &lt;&lt; std::endl;\n\n    Status status_load = ReadBinaryProto(Env::Default(), model_path, &amp;graphdef);\n    std::cout &lt;&lt; \"&gt;&gt;&gt;  initial model in InetInterface\" &lt;&lt; std::endl;\n    if (!status_load.ok()) {\n        std::cout &lt;&lt; \"ERROR: Loading model failed...\" &lt;&lt; std::endl;\n        std::cout &lt;&lt; model_path &lt;&lt; status_load.ToString() &lt;&lt; \"\\n\";\n    }\n\n    NewSession(SessionOptions(), &amp;session);  //looks like it always stuck in here while initializing\n    Status status_create = session-&gt;Create(graphdef);\n    if (!status_create.ok()) {\n        std::cout &lt;&lt; \"ERROR: Creating graph in session failed..\" &lt;&lt; status_create.ToString() &lt;&lt; std::endl;\n    }\n    else {\n        std::cout &lt;&lt; \"----------- Successfully created session and load graph -------------\" &lt;&lt; std::endl;\n    }\n\n}\n\n// initialization of those class objects\n// this can speed up the speed of inference afterwards\nvoid init()  \n{\n    A.predict(pic_1);\n    B.predict(pic_2);\n}\n\nLIB_API void inference(pic)  // the function c# calling for each inference\n{\n    A.predict(pic_x);\n    B.predict(pic_y);\n}\n\n</code></pre>\n\n<p>The declaration above works fine in the FIRST way I mentioned above...\n<a href=\"https://i.imgur.com/P4xngTj.png\" rel=\"nofollow noreferrer\">https://i.imgur.com/P4xngTj.png</a></p>\n\n<p>but if it's running in c# (the exe file shown below), it always stuck while initializing.\n<a href=\"https://i.imgur.com/Ts5ZaeK.png\" rel=\"nofollow noreferrer\">https://i.imgur.com/Ts5ZaeK.png</a></p>\n\n<p>I also tried the way of declaring the class in the .h file, and called them in the .cpp file, but the result is the same as the above method.</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>// file.hpp\nextern UnetInterface A = UnetInterface(path1);\nextern UnetInterface A = UnetInterface(path2);\n\n</code></pre>\n\n<p>So I came up with another way, returning a struct of class after initializing.\nHowever, I'm not very sure what is the correct way to make a struct of class, this is what I've done so far(with some errors I write as comment):</p>\n\n<pre><code>//file.h\n\nstruct Unets // The struct that stores initialized classes\n{\n    UnetInterface A;\n    UnetInterface B;\n};\n\n\n//file.cpp\n\nUnets init()  // initialization of those class objects\n{\n    Unets TT;  // error: 'Unets::Unets(void)':attempting to reference a deleted function\n               // error: the default constructor of \"Unets\" cannot be referenced -- it is a deleted function\n    TT.A = UnetInterface(path1);\n    TT.A.predict(pic1);\n    TT.B = UnetInterface(path2);\n    TT.B.predict(pic2);\n    ...\n    ...\n\n    return TT;\n}\n\nLIB_API void inference(pic3)  // the function c# calling for each inference\n{\n    Unets TT2;  // error: the default constructor of \"Unets\" cannot be referenced -- it is a deleted function\n    TT2 = init();\n    TT2.predict(pic3);\n}\n</code></pre>\n\n<p>I don't know if it's necessary to re-declare the struct 'Unets' for every use of the function 'inference'. If it is, I think it's not a good idea to write like this, so I'm stuck in here...</p>\n\n<p>To sum up, I want to know...</p>\n\n<p><strong>1. Why the global class I declared as the FIRST way failed while running in c#?</strong></p>\n\n<p><strong>2. Is the last method an option to work? If it is/isn't, any other suggestion on returning multiple initializing classes(model)?</strong></p>\n\n<p>(Thanks in advance for finish reading my messy question description...</p>\n\n<p>Any advise or help is appreciated :D )</p>\n"}, {"tags": ["c++", "stl", "queue", "priority-queue"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user1531591"}, "edited": false, "score": 2, "creation_date": 1570020717, "post_id": 58201759, "comment_id": 102781727, "body": "Nothing in the specification of priority_queue tells how elements with the same priority are sorted. You have to add information on your data and define a new ordering to take into account insertion order."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1570022654, "post_id": 58201759, "comment_id": 102782880, "body": "If you want newer elements with the same priority to have a lower priority, they don\u2019t really have the same priority, do they?"}], "answers": [{"tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": false, "score": 0, "last_activity_date": 1570020737, "creation_date": 1570020737, "answer_id": 58201904, "question_id": 58201759, "link": "https://stackoverflow.com/questions/58201759/order-of-elements-with-the-same-priority-in-stdpriority-queue/58201904#58201904", "title": "Order of elements with the same priority in std::priority_queue", "body": "<p><code>std::priority_queue</code> is implemented by using <a href=\"https://en.cppreference.com/w/cpp/algorithm/make_heap\" rel=\"nofollow noreferrer\"><code>std::make_heap</code></a>, <a href=\"https://en.cppreference.com/w/cpp/algorithm/push_heap\" rel=\"nofollow noreferrer\"><code>std::push_heap</code></a>, and <a href=\"https://en.cppreference.com/w/cpp/algorithm/pop_heap\" rel=\"nofollow noreferrer\"><code>std::pop_heap</code></a> on the underlying container.  These operations are not stable so you get no guarantee that elements will stay in entered order.</p>\n\n<p>If you need them to stay in entered order then one thing you can do is to write you own object that uses <a href=\"https://en.cppreference.com/w/cpp/algorithm/stable_sort\" rel=\"nofollow noreferrer\"><code>std::stable_sort</code></a> on the underlying container when adding elements into it.</p>\n"}, {"tags": [], "owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "is_accepted": false, "score": 1, "last_activity_date": 1570020751, "creation_date": 1570020751, "answer_id": 58201909, "question_id": 58201759, "link": "https://stackoverflow.com/questions/58201759/order-of-elements-with-the-same-priority-in-stdpriority-queue/58201909#58201909", "title": "Order of elements with the same priority in std::priority_queue", "body": "<p>If you want a priority queue guaranteeing that equal-comparing elements preserve insertion order, you need to write it yourself.</p>\n\n<p>Certainly <a href=\"https://en.cppreference.com/w/cpp/container/priority_queue\" rel=\"nofollow noreferrer\"><code>std::priority_queue</code></a> does not guarantee this insertion ordering (and if it's implemented as a heap, that doesn't guarantee it either).</p>\n\n<p>The easiest way to write <em>something</em> correct is probably with <code>map&lt;key, list&lt;val&gt;&gt;</code>, although that's probably not ideal if you need it to be fast. The suggestion to manually <code>stable_sort</code> a container has worse algorithmic complexity but probably performs better in most real-world situations despite that.</p>\n"}, {"tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": true, "score": 3, "last_activity_date": 1570023012, "last_edit_date": 1570023012, "creation_date": 1570021324, "answer_id": 58202084, "question_id": 58201759, "link": "https://stackoverflow.com/questions/58201759/order-of-elements-with-the-same-priority-in-stdpriority-queue/58202084#58202084", "title": "Order of elements with the same priority in std::priority_queue", "body": "<blockquote>\n  <p>The question is, how those elements are placed in priority_queue? </p>\n</blockquote>\n\n<p>In an order that satisfies the heap property. Which for equal elements is <em>any</em> order.</p>\n\n<blockquote>\n  <p>It is importatnt to me that, if any new element comes to priority_queue should be placed after the last element with the same priority.</p>\n</blockquote>\n\n<p>You can achieve that by making the order part of the priority. But to make it part of the priorty, you need to first make the order part of the element. You can use a running counter:</p>\n\n<pre><code>struct OrderedQueueEntry {\n    QueueEntry entry;\n    int index;\n};\n\nstruct OrderedQueueEntryPriorityComparator  {\n    bool operator()(std::unique_ptr&lt;OrderedQueueEntry&gt;&amp; left, std::unique_ptr&lt;OrderedQueueEntry&gt;&amp; right) const\n    {\n        auto pl = priorities.at(left-&gt;entry.getType());\n        auto pr = priorities.at(right-&gt;entry.getType());\n\n        return pl == pr\n            ? left-&gt;index &lt; right-&gt;index;\n            : pl &lt; pr;\n    }\n};\n\nint i = 0;\nq.emplace(std::make_unique&lt;OrderedQueueEntry&gt;({CommandType::Comm1, i++}));\nq.emplace(std::make_unique&lt;OrderedQueueEntry&gt;({CommandType::Comm2, i++}));\nq.emplace(std::make_unique&lt;OrderedQueueEntry&gt;({CommandType::Comm3, i++}));\nq.emplace(std::make_unique&lt;OrderedQueueEntry&gt;({CommandType::Comm4, i++}));\nq.emplace(std::make_unique&lt;OrderedQueueEntry&gt;({CommandType::Comm5, i++}));\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 9396, "user_id": 2261538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4e60dd44745bd1518ee933e081119de?s=128&d=identicon&r=PG", "display_name": "darune", "link": "https://stackoverflow.com/users/2261538/darune"}, "is_accepted": false, "score": 0, "last_activity_date": 1570023960, "last_edit_date": 1570023960, "creation_date": 1570023573, "answer_id": 58202741, "question_id": 58201759, "link": "https://stackoverflow.com/questions/58201759/order-of-elements-with-the-same-priority-in-stdpriority-queue/58202741#58202741", "title": "Order of elements with the same priority in std::priority_queue", "body": "<h2>Use a <code>std::multiset</code> or <code>std::multimap</code></h2>\n\n<p>Just use <code>std::multiset</code> or <code>std::multimap</code> (from your case the <code>multimap</code> looks like the right choice). </p>\n\n<p><a href=\"https://en.cppreference.com/w/cpp/container/multimap\" rel=\"nofollow noreferrer\">https://en.cppreference.com/w/cpp/container/multimap</a></p>\n\n<p>Both is <em>staple</em> and does not change the insertion order (since <a href=\"/questions/tagged/c%2b%2b11\" class=\"post-tag\" title=\"show questions tagged &#39;c++11&#39;\" rel=\"tag\">c++11</a>).</p>\n"}], "owner": {"reputation": 1005, "user_id": 6947687, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/d0d3a100995c266cd398b0f85d26a946?s=128&d=identicon&r=PG&f=1", "display_name": "bielu000", "link": "https://stackoverflow.com/users/6947687/bielu000"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 395, "favorite_count": 1, "accepted_answer_id": 58202084, "answer_count": 4, "score": 0, "last_activity_date": 1570023960, "creation_date": 1570020223, "last_edit_date": 1570021143, "question_id": 58201759, "link": "https://stackoverflow.com/questions/58201759/order-of-elements-with-the-same-priority-in-stdpriority-queue", "title": "Order of elements with the same priority in std::priority_queue", "body": "<p>I have following code: </p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;map&gt;\n#include &lt;list&gt;\n#include &lt;queue&gt;\n#include &lt;memory&gt;\n\nenum class CommandType : uint8_t {\n  Comm1,\n  Comm2, \n  Comm3, \n  Comm4, \n  Comm5 \n};\n\nenum class Priority {\n  HIGH,\n  MEDIUM, \n  LOW\n};\n\nstd::map&lt;CommandType, Priority&gt; priorities = {\n    { CommandType::Comm1, Priority::LOW }, \n    { CommandType::Comm2, Priority::LOW }, \n    { CommandType::Comm3, Priority::LOW }, \n    { CommandType::Comm4, Priority::LOW }, \n    { CommandType::Comm5, Priority::LOW }\n};\n\nclass QueueEntry \n{\n public:\n    QueueEntry(CommandType type)\n        : type_(type) {}\n    CommandType getType() { return type_; }\n\nprivate:\n  CommandType type_;\n};\n\nstruct QueueEntryPriorityComparator  {\n    bool operator()(std::unique_ptr&lt;QueueEntry&gt;&amp; entry1, std::unique_ptr&lt;QueueEntry&gt;&amp; entry2) const\n    {\n        auto p1 = priorities.at(entry1-&gt;getType());\n        auto p2 = priorities.at(entry2-&gt;getType());\n\n        return p1 &lt; p2;\n    }\n};\n\nstd::priority_queue&lt;std::unique_ptr&lt;QueueEntry&gt;, std::deque&lt;std::unique_ptr&lt;QueueEntry&gt;&gt;, QueueEntryPriorityComparator&gt; q;\n\nvoid print()\n{\n    decltype(q) queueCopy;\n    queueCopy.swap(q);\n\n    while (!queueCopy.empty()) {\n        auto&amp; top = queueCopy.top();\n\n        std::cout &lt;&lt; \"Command type: \" &lt;&lt; static_cast&lt;uint32_t&gt;(top-&gt;getType()) &lt;&lt; std::endl;;\n\n        q.emplace(std::make_unique&lt;QueueEntry&gt;(top-&gt;getType()));\n\n        queueCopy.pop();\n    }\n}\n\nint main()\n{\n\n\n    q.emplace(std::make_unique&lt;QueueEntry&gt;(CommandType::Comm1));\n    q.emplace(std::make_unique&lt;QueueEntry&gt;(CommandType::Comm2));\n    q.emplace(std::make_unique&lt;QueueEntry&gt;(CommandType::Comm3));\n    q.emplace(std::make_unique&lt;QueueEntry&gt;(CommandType::Comm4));\n    q.emplace(std::make_unique&lt;QueueEntry&gt;(CommandType::Comm5));\n\n    print();\n\n    std::cout &lt;&lt; std::endl;\n\n    print();\n\n    std::cout &lt;&lt; std::endl;\n\n    print();\n\n\n\n    return 0;\n}\n</code></pre>\n\n<p>Each element has the same priority which is <code>Priority::LOW</code>;</p>\n\n<p>The question is, how those elements are placed in <code>priority_queue</code>? </p>\n\n<p>Whenever I print the queue, elements are in different positions.\nIt is important to me that, if any new element comes to priority_queue should be placed after the last element with the same priority.</p>\n\n<p>Can it be achieved by using <code>std::priority_queue</code> or I must wrap it on my own?</p>\n"}, {"tags": ["c++", "c-preprocessor"], "comments": [{"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 1, "creation_date": 1570020502, "post_id": 58201753, "comment_id": 102781617, "body": "No relationship to the (hair-rising) macro: this code apparently lives in a header, and you&#39;re defining <code>findIndex</code> as a non-<code>inline</code> function, hence the multiple definitions error."}, {"owner": {"reputation": 114, "user_id": 8731673, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b5114129d4d4e6a9222bc92aa05cfda?s=128&d=identicon&r=PG&f=1", "display_name": "Amine", "link": "https://stackoverflow.com/users/8731673/amine"}, "reply_to_user": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1570020607, "post_id": 58201753, "comment_id": 102781666, "body": "In lining the function findIndex works! Thanks Quentin"}], "owner": {"reputation": 114, "user_id": 8731673, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b5114129d4d4e6a9222bc92aa05cfda?s=128&d=identicon&r=PG&f=1", "display_name": "Amine", "link": "https://stackoverflow.com/users/8731673/amine"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 24, "favorite_count": 0, "closed_date": 1570020342, "answer_count": 0, "score": 0, "last_activity_date": 1570020211, "creation_date": 1570020211, "question_id": 58201753, "link": "https://stackoverflow.com/questions/58201753/duplicate-symbol-error-at-linkage-macro-definition-at-play", "closed_reason": "Duplicate", "title": "Duplicate symbol error at linkage: Macro definition at play?", "body": "<p>I defined a multi-line macro to be re-used throughout my project and I seem to get a linker error on the mangled name:</p>\n\n<p>duplicate symbol __ZN3src9Utilities9findIndexEPNSt3__113basic_fstreamIcNS1_11char_traitsIcEEEERKNS1_12basic_stringIcS4_NS1_9allocatorIcEEEERKN5boost14char_separatorIcS4_E</p>\n\n<p>My code that defines the macro is the following:</p>\n\n<pre><code>namespace QL = QuantLib;\n\nnamespace src\n{\n    #ifndef FILE_PARSE_LENGTH\n        #define FILE_PARSE_LENGTH 1000\n    #endif\n\n    #define _RUNTIME_CALCULATION(timer, message) {\\\n                                        using namespace QL; \\\n                                        Real seconds = timer.elapsed();\\\n                                        auto hours = int(seconds/3600);\\\n                                        seconds -= hours * 3600;\\\n                                        auto minutes = int(seconds/60);\\\n                                        seconds -= minutes * 60;\\\n                                        std::cout &lt;&lt; \"\\n\" &lt;&lt; message;\\\n                                        if (hours &gt; 0)\\\n                                            std::cout &lt;&lt; hours &lt;&lt; \" h \";\\\n                                        if (hours &gt; 0 || minutes &gt; 0)\\\n                                            std::cout &lt;&lt; minutes &lt;&lt; \" m \";\\\n                                        std::cout &lt;&lt; std::fixed &lt;&lt; std::setprecision(5) &lt;&lt; seconds &lt;&lt; \" s\\n\" &lt;&lt; std::endl;\\\n                                        std::cout &lt;&lt; \"=======================================================================================\" \\\n                                        &lt;&lt; std::endl; \\\n                                        }\n\n    namespace Utilities\n    {\n        typedef boost::tokenizer&lt;boost::char_separator&lt;char&gt;&gt; tokenizer;\n        const boost::char_separator&lt;char&gt; char_sep{\",\\t &lt;&gt;\\n\\r\"};\n\n        int findIndex(std::fstream* file, const std::string&amp; col, const boost::char_separator&lt;char&gt;&amp; csep)\n        {\n            // blah blah blah....\n        }\n    }\n}\n</code></pre>\n\n<p>and the Macro defined above (_RUNTIME_CALCULATION) is used throughout my project in other .cpp files as _RUNTIME_CALCULATION(timer, \"blah blah blah...\");</p>\n\n<p>Anyone sees something I may be oblivious to here, as I have already wasted some time on this?</p>\n\n<p>Many thanks,\nAmine</p>\n"}, {"tags": ["c++", "oop"], "comments": [{"owner": {"reputation": 7865, "user_id": 2331956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ede184a71447fbba327ad6190c079888?s=128&d=identicon&r=PG", "display_name": "Mike Vine", "link": "https://stackoverflow.com/users/2331956/mike-vine"}, "edited": false, "score": 3, "creation_date": 1570019192, "post_id": 58201458, "comment_id": 102780880, "body": "You are taking and storing the address of a local which then goes out of scope in <code>prepend_node</code>."}, {"owner": {"reputation": 81, "user_id": 2002260, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/54a0825aad12f9c1bac64de64cb0b940?s=128&d=identicon&r=PG", "display_name": "SamH", "link": "https://stackoverflow.com/users/2002260/samh"}, "reply_to_user": {"reputation": 7865, "user_id": 2331956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ede184a71447fbba327ad6190c079888?s=128&d=identicon&r=PG", "display_name": "Mike Vine", "link": "https://stackoverflow.com/users/2331956/mike-vine"}, "edited": false, "score": 0, "creation_date": 1570019246, "post_id": 58201458, "comment_id": 102780909, "body": "How can I fix this?"}, {"owner": {"reputation": 26583, "user_id": 1441, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fb7f1cd450084fdb4bfc9376c7dba2a7?s=128&d=identicon&r=PG", "display_name": "crashmstr", "link": "https://stackoverflow.com/users/1441/crashmstr"}, "edited": false, "score": 2, "creation_date": 1570019283, "post_id": 58201458, "comment_id": 102780929, "body": "The address of <code>Node new_node = Node(value, &amp;start_node);</code> is not valid outside the scope of declaration. You need to use <code>new</code> to allocate new <code>Node</code> objects that are not bound to a scope."}, {"owner": {"reputation": 81, "user_id": 2002260, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/54a0825aad12f9c1bac64de64cb0b940?s=128&d=identicon&r=PG", "display_name": "SamH", "link": "https://stackoverflow.com/users/2002260/samh"}, "edited": false, "score": 0, "creation_date": 1570019376, "post_id": 58201458, "comment_id": 102780973, "body": "Thank you, this resolved the issue, I&#39;ll post an answer for it"}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 1, "creation_date": 1570019439, "post_id": 58201458, "comment_id": 102781004, "body": "@SamH You should read up on the rule of three/five/zero, otherwise that will be your next bug (once you eventually attempt to copy a list)."}], "answers": [{"comments": [{"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 2, "creation_date": 1570019501, "post_id": 58201572, "comment_id": 102781031, "body": "Doing only that leads to a memory leak. You have to eventually <code>delete</code> what you <code>new</code>. That should be done in the <code>linkedList</code> destructor."}, {"owner": {"reputation": 929, "user_id": 4253931, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b751517b9a663cda1d8ab07027bb59a?s=128&d=identicon&r=PG&f=1", "display_name": "eike", "link": "https://stackoverflow.com/users/4253931/eike"}, "edited": false, "score": 0, "creation_date": 1570022804, "post_id": 58201572, "comment_id": 102782974, "body": "Instead of handling <code>new</code> and <code>delete</code> yourself, you could make use of smartpointers (<a href=\"https://en.cppreference.com/w/cpp/memory/unique_ptr\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/memory/unique_ptr</a>)"}], "tags": [], "owner": {"reputation": 81, "user_id": 2002260, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/54a0825aad12f9c1bac64de64cb0b940?s=128&d=identicon&r=PG", "display_name": "SamH", "link": "https://stackoverflow.com/users/2002260/samh"}, "is_accepted": true, "score": 0, "last_activity_date": 1570019419, "creation_date": 1570019419, "answer_id": 58201572, "question_id": 58201458, "link": "https://stackoverflow.com/questions/58201458/c-member-variables-being-overwritten-by-non-member-functions/58201572#58201572", "title": "C++ Member variables being overwritten by non-member functions", "body": "<p>The issue is pretty stupid, I forgot to use <code>new</code>. Below is a fixed version of <code>prepend_node</code> that works:</p>\n\n<pre><code>void prepend_node(std::string value){\n    Node* new_node = new Node(value, &amp;start_node);\n    new_node-&gt;print_value();\n    new_node-&gt;next_node = start_node.next_node;\n    start_node.next_node = new_node;\n  }\n</code></pre>\n"}], "owner": {"reputation": 81, "user_id": 2002260, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/54a0825aad12f9c1bac64de64cb0b940?s=128&d=identicon&r=PG", "display_name": "SamH", "link": "https://stackoverflow.com/users/2002260/samh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "accepted_answer_id": 58201572, "answer_count": 1, "score": 0, "last_activity_date": 1570019419, "creation_date": 1570019011, "question_id": 58201458, "link": "https://stackoverflow.com/questions/58201458/c-member-variables-being-overwritten-by-non-member-functions", "title": "C++ Member variables being overwritten by non-member functions", "body": "<p>I am working on a project that uses a <code>linkedList</code> class that I have written. Each node in the list contains a string which seems to be overwritten when there is any function call outside of the object. The variable is private and is only ever set within the constructor. Here is a stripped down version of the code which reproduces the error:</p>\n\n<p><strong>linkedList.h:</strong></p>\n\n<pre><code>#include &lt;cstring&gt;\n#include &lt;iostream&gt;\n\nclass Node{\nprivate:\n  std::string value;\n  Node* prev_node;\npublic:\n  Node* next_node = nullptr;\n  Node(std::string value_in, Node* prev){\n    this-&gt;value = value_in;\n    this-&gt;prev_node = prev;\n    this-&gt;next_node = nullptr;\n  }\n\n  void print_value(){\n    std::cout &lt;&lt; \"value = \" &lt;&lt; this-&gt;value &lt;&lt; '\\n';\n  }\n  void print_prev(){\n    std::cout &lt;&lt; \"prev = \" &lt;&lt; this-&gt;prev_node &lt;&lt; '\\n';\n  }\n  Node* get_prev(){\n    return this-&gt;prev_node;\n  }\n};\n\nclass linkedList{\npublic:\n  Node start_node = Node((std::string) \"\", (Node*) nullptr);\n  Node* current_node = &amp;start_node;\n\n  void prepend_node(std::string value){\n    Node new_node = Node(value, &amp;start_node);\n    new_node.print_value();\n    new_node.next_node = start_node.next_node;\n    start_node.next_node = &amp;new_node;\n  }\n\n  void return_to_start(){\n    current_node = &amp;start_node;\n  }\n\n  void scroll_up(){\n    if(current_node-&gt;next_node){\n      current_node = current_node-&gt;next_node;\n    }\n  }\n\n  void scroll_down(){\n    if(current_node-&gt;get_prev()){\n      current_node = current_node-&gt;get_prev();\n    }\n  }\n};\n</code></pre>\n\n<p>(One thing of note here is that the <code>prepend_node</code> function will insert a node at position 2 of the list. This is intentional)</p>\n\n<p><strong>main.cpp:</strong></p>\n\n<pre><code>#include &lt;iostream&gt;\n#include \"linkedList.h\"\n\nint main(){\n  linkedList foo;\n\n  foo.prepend_node(\"value1\");\n  foo.prepend_node(\"value2\");\n\n  foo.current_node-&gt;next_node-&gt;print_value();\n\n  foo.scroll_up();\n  foo.current_node-&gt;print_value();\n\n  foo.scroll_up();\n  foo.current_node-&gt;print_value();\n  return 0;\n}\n</code></pre>\n\n<p><strong>output:</strong></p>\n\n<pre><code>value = value1\nvalue = value2\nvalue = \nvalue = \nSegmentation fault\n</code></pre>\n\n<p><strong>Some gdb output:</strong></p>\n\n<pre><code>(gdb) b linkedList.h:20\nBreakpoint 1 at 0x101e: file linkedList.h, line 20.\n(gdb) run\nStarting program: /path/to/main\n\nBreakpoint 1, Node::print_value (this=0x7fffffffdd50) at linkedList.h:20\n20      std::cout &lt;&lt; \"value = \" &lt;&lt; this-&gt;value &lt;&lt; '\\n';\n(gdb) p this-&gt;value\n$1 = \"value1\"\n(gdb) c\nContinuing.\nvalue = value1\n\nBreakpoint 1, Node::print_value (this=0x7fffffffdd50) at linkedList.h:20\n20      std::cout &lt;&lt; \"value = \" &lt;&lt; this-&gt;value &lt;&lt; '\\n';\n(gdb) c\nContinuing.\nvalue = value2\n\nBreakpoint 1, Node::print_value (this=0x7fffffffdd50) at linkedList.h:20\n20      std::cout &lt;&lt; \"value = \" &lt;&lt; this-&gt;value &lt;&lt; '\\n';\n(gdb) c\nContinuing.\nvalue = \n\nBreakpoint 1, Node::print_value (this=0x7fffffffdd50) at linkedList.h:20\n20      std::cout &lt;&lt; \"value = \" &lt;&lt; this-&gt;value &lt;&lt; '\\n';\n(gdb) this-&gt;value\nUndefined command: \"this-&gt;value\".  Try \"help\".\n(gdb) c\nContinuing.\nvalue = \n\nBreakpoint 1, Node::print_value (this=0xa00000000) at linkedList.h:20\n20      std::cout &lt;&lt; \"value = \" &lt;&lt; this-&gt;value &lt;&lt; '\\n';\n(gdb) c\nContinuing.\n\nProgram received signal SIGSEGV, Segmentation fault.\n0x00007ffff7b735b0 in std::basic_ostream&lt;char, std::char_traits&lt;char&gt; &gt;&amp; std::operator&lt;&lt; &lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt;(std::basic_ostream&lt;char, std::char_traits&lt;char&gt; &gt;&amp;, std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt; const&amp;) ()\n   from /usr/lib/x86_64-linux-gnu/libstdc++.so.6\n</code></pre>\n"}, {"tags": ["c++", "function", "function-pointers"], "comments": [{"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 2, "creation_date": 1570018914, "post_id": 58201394, "comment_id": 102780728, "body": "I think using a template argument instead is to be preferred, because that&#39;ll work with anything functiony - function pointers, lambdas, objects that overload <code>operator()</code>, etc. More opportunities for optimization too than if you restrict it to function pointers."}], "answers": [{"tags": [], "owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 1, "last_activity_date": 1570022489, "last_edit_date": 1570022489, "creation_date": 1570018906, "answer_id": 58201431, "question_id": 58201394, "link": "https://stackoverflow.com/questions/58201394/difference-between-two-ways-of-passing-function-as-parameter/58201431#58201431", "title": "Difference between two ways of passing function as parameter", "body": "<p>For me a preferable way is</p>\n\n<pre><code>void foo( int bar( void ) );\n</code></pre>\n\n<p>because a function declaration as a parameter looks more clear.</p>\n\n<p>It is similar to writing whether</p>\n\n<pre><code>void f( int a[] );\n</code></pre>\n\n<p>or </p>\n\n<pre><code>void f( int * );\n</code></pre>\n\n<p>The first declaration gives the reader of the code the idea that the function accepts an array instead of a pointer to a single object.</p>\n\n<p>For example</p>\n\n<pre><code>int main( int argc, char * argv[] )\n</code></pre>\n\n<p>looks more clear then</p>\n\n<pre><code>int main( int argc, char ** argv )\n</code></pre>\n\n<p>In fact there is no difference because the compiler implicitly adjusts a parameter of a function type to pointer to the function type.</p>\n\n<p>From the C++ 17 Standard (11.3.5 Functions)</p>\n\n<blockquote>\n  <p>5 The type of a function is determined using the following rules. The\n  type of each parameter (including function parameter packs) is\n  determined from its own decl-specifier-seq and declarator. After\n  determining the type of each parameter, <strong>any parameter of type \u201carray\n  of T\u201d or of function type T is adjusted to be \u201cpointer to T\u201d</strong>....</p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "reply_to_user": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "edited": false, "score": 1, "creation_date": 1570019554, "post_id": 58201445, "comment_id": 102781060, "body": "@SombreroChicken you might need some adjustment"}], "tags": [], "owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "is_accepted": false, "score": 4, "last_activity_date": 1570018957, "creation_date": 1570018957, "answer_id": 58201445, "question_id": 58201394, "link": "https://stackoverflow.com/questions/58201394/difference-between-two-ways-of-passing-function-as-parameter/58201445#58201445", "title": "Difference between two ways of passing function as parameter", "body": "<p>They are identical, as per <a href=\"https://en.cppreference.com/w/cpp/language/function#Parameter_list\" rel=\"nofollow noreferrer\">function parameters declaration rules</a>.</p>\n\n<blockquote>\n  <p>The type of each function parameter in the parameter list is determined according to the following rules:<br>\n  ...<br>\n  3) If the type is a function type <code>F</code>, it is replaced by the type \"pointer to <code>F</code>\"<br>\n  ...</p>\n</blockquote>\n"}], "owner": {"reputation": 8181, "user_id": 1052284, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/7032e676c9790e067cba9cb68c61ae88?s=128&d=identicon&r=PG", "display_name": "Mark Jeronimus", "link": "https://stackoverflow.com/users/1052284/mark-jeronimus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1570022489, "creation_date": 1570018772, "last_edit_date": 1570019636, "question_id": 58201394, "link": "https://stackoverflow.com/questions/58201394/difference-between-two-ways-of-passing-function-as-parameter", "title": "Difference between two ways of passing function as parameter", "body": "<p>These two ways of defining a function accepting another function seem to work identically (as in, the body is the same for both functions). I found the first one by fiddling, and then found the second one on several websites.</p>\n\n<pre><code>void foo(int bar())\nvoid foo(int (*bar)())\n</code></pre>\n\n<p>Example body:</p>\n\n<pre><code>{\n    for (int i = 0; i &lt; 10; i++)\n      cout &lt;&lt; bar() &lt;&lt; ' ';\n}\n</code></pre>\n\n<p>What's the difference? Is one preferred over the other? Is it compiler or C++ version dependent?</p>\n"}, {"tags": ["c++", "c-preprocessor"], "comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1570018365, "post_id": 58201246, "comment_id": 102780417, "body": "You probably want <code>#undef</code> first."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 2, "creation_date": 1570018530, "post_id": 58201246, "comment_id": 102780499, "body": "But it seems more portable to define a <code>MY_DECL</code> which results to <code>__decl</code> or empty."}, {"owner": {"reputation": 3734, "user_id": 3537677, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e05436d74c08a9efa7db860df7bbf01f?s=128&d=identicon&r=PG", "display_name": "Superlokkus", "link": "https://stackoverflow.com/users/3537677/superlokkus"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1570018685, "post_id": 58201246, "comment_id": 102780593, "body": "Yeah you re right, will combine that, I guess the good old german idiom of &quot;Den Wald vor lauter Baeumen nicht sehen&quot; applied here."}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 1, "creation_date": 1570019670, "post_id": 58201246, "comment_id": 102781118, "body": "(Or, in English, <a href=\"https://en.wiktionary.org/wiki/see_the_forest_for_the_trees\" rel=\"nofollow noreferrer\">&quot;not seeing the forest for the trees&quot;</a>.)"}], "answers": [{"comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 1, "creation_date": 1570018432, "post_id": 58201274, "comment_id": 102780446, "body": "I would be more verbose: <code>#define __cdecl &#47;* Nothing *&#47;</code>"}, {"owner": {"reputation": 3734, "user_id": 3537677, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e05436d74c08a9efa7db860df7bbf01f?s=128&d=identicon&r=PG", "display_name": "Superlokkus", "link": "https://stackoverflow.com/users/3537677/superlokkus"}, "edited": false, "score": 0, "creation_date": 1570018502, "post_id": 58201274, "comment_id": 102780483, "body": "<i>Facepalms self</i> yeah thanks your right. Hope SO dosn&#39;t think I just wanted reputation game here. Consider me: <a href=\"http://giphygifs.s3.amazonaws.com/media/9wQgSJmBhgaRi/giphy.gif\" rel=\"nofollow noreferrer\">giphygifs.s3.amazonaws.com/media/9wQgSJmBhgaRi/giphy.gif</a>"}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 1, "creation_date": 1570021948, "post_id": 58201274, "comment_id": 102782422, "body": "Actually, it would be much better to use <code>#ifdev MSVC \\n #define CDECL __cdecl \\n #else \\n #define CDECL &#47;* nothing *&#47; \\n #endif</code> and then use <code>CDECL</code> in the actual code.  That way you don&#39;t use <code>__cdecl</code> (which is a symbol reserved to the implementation in all contexts) in non-MS code."}], "tags": [], "owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "is_accepted": true, "score": 3, "last_activity_date": 1570022189, "last_edit_date": 1570022189, "creation_date": 1570018352, "answer_id": 58201274, "question_id": 58201246, "link": "https://stackoverflow.com/questions/58201246/define-name-i-e-macro-as-nothing/58201274#58201274", "title": "Define name i.e. macro as nothing", "body": "<pre><code>#define __cdecl\n</code></pre>\n\n<p>Couldn't be simpler! Or better, to limit the spreading of implementation-reserved identifiers:</p>\n\n<pre><code>#if BOOST_OS_WINDOWS\n    #define YOURLIB_CDECL __cdecl\n#else\n    #define YOURLIB_CDECL /* nothing */\n#endif\n</code></pre>\n"}], "owner": {"reputation": 3734, "user_id": 3537677, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e05436d74c08a9efa7db860df7bbf01f?s=128&d=identicon&r=PG", "display_name": "Superlokkus", "link": "https://stackoverflow.com/users/3537677/superlokkus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "accepted_answer_id": 58201274, "answer_count": 1, "score": 3, "last_activity_date": 1570022189, "creation_date": 1570018235, "last_edit_date": 1570019933, "question_id": 58201246, "link": "https://stackoverflow.com/questions/58201246/define-name-i-e-macro-as-nothing", "title": "Define name i.e. macro as nothing", "body": "<p>While using a 3rd party shared library i.e. DLL, I have to define the functions usable by their symbol names. So I have to declare some function types.</p>\n\n<p>But the function definition involves a calling convention, in my case <code>__cdecl</code>. </p>\n\n<p>So, naturally, this calling convention is only applicable to the MSVC compiler but I still want to compile my portable API abstraction code, which uses boost::dll with linux, even though I can not execute it on my development linux machine, so I can still check the compile time stuff.</p>\n\n<p>So my idea was to define the <code>__cdecl</code> name to something as nothing or a white space, a <code>NOP</code> if you will, with the pre-processor, but I am not able to do that:</p>\n\n<pre><code>#if !BOOST_OS_WINDOWS\n#define  __cdecl ( ) /* error, how can I define __cdecl as 'nothing\" here? */\n#endif\n\n#include &lt;boost/dll/import.hpp&gt;\nboost::dll::shared_library lib;\n\nunsigned long device_count(char* pid) {\n    typedef unsigned long(__cdecl func_sig)(char *pvid_id);\n    return lib.get&lt;func_sig&gt;(\"DLL_Symbol\")(pid);\n}\n</code></pre>\n"}, {"tags": ["c++", "arduino"], "comments": [{"owner": {"reputation": 20522, "user_id": 11941443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f27a880243178eedf3abdab24898b335?s=128&d=identicon&r=PG&f=1", "display_name": "walnut", "link": "https://stackoverflow.com/users/11941443/walnut"}, "edited": false, "score": 0, "creation_date": 1570018937, "post_id": 58201090, "comment_id": 102780740, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/4810664/how-do-i-use-arrays-in-c\">How do I use arrays in C++?</a>"}, {"owner": {"reputation": 20522, "user_id": 11941443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f27a880243178eedf3abdab24898b335?s=128&d=identicon&r=PG&f=1", "display_name": "walnut", "link": "https://stackoverflow.com/users/11941443/walnut"}, "edited": false, "score": 0, "creation_date": 1570020987, "post_id": 58201090, "comment_id": 102781870, "body": "In particular read <a href=\"https://stackoverflow.com/questions/4810664/how-do-i-use-arrays-in-c/4810672#4810672\">this answer</a> of the duplicate. Also consider using <code>std::array</code> if you really intend to have <code>nodeName</code> be a fixed-size char buffer or <code>std::string</code> if it is going to be used as (arbitrary length) string, as apparently the case in the <code>Serial.printl</code> statement."}], "answers": [{"comments": [{"owner": {"reputation": 796, "user_id": 1643973, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/198787891419681bb0932f54a502a40c?s=128&d=identicon&r=PG", "display_name": "jjramsey", "link": "https://stackoverflow.com/users/1643973/jjramsey"}, "edited": false, "score": 1, "creation_date": 1570020537, "post_id": 58201760, "comment_id": 102781626, "body": "The length of the <code>charName</code> array is 15, so having 16 as the third argument of <code>strncpy</code> is a bad idea."}], "tags": [], "owner": {"reputation": 74, "user_id": 12118994, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-YsfqmOfpJnw/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdZrUTFcV7z_x8ZDm3hfsk_PCB1Og/photo.jpg?sz=128", "display_name": "Francisco Basadre", "link": "https://stackoverflow.com/users/12118994/francisco-basadre"}, "is_accepted": false, "score": 0, "last_activity_date": 1570020223, "creation_date": 1570020223, "answer_id": 58201760, "question_id": 58201090, "link": "https://stackoverflow.com/questions/58201090/how-can-i-create-multiple-class-instances-with-different-character-arrays/58201760#58201760", "title": "How can I create multiple class instances with different character arrays?", "body": "<p>Answering to you question (if i understood it right!) nodeName[15] it means accessing the 16 char position of the array, so you are only printing (I don't know what is Serial.print, so I assume it actually prints) the char on position 16:</p>\n\n<pre><code>Serial.print(\"Name: \"); Serial.println(nodeName[15]);\n</code></pre>\n\n<p>this code doesn't seem right either:</p>\n\n<pre><code>this-&gt;nodeName[15] = nodeName;\n</code></pre>\n\n<p>You should use strncpy or something similar:</p>\n\n<pre><code>strncpy(this-&gt;nodeName, nodeName, 16);\n</code></pre>\n\n<p>Also, there is no guarantees that the nodeName will fit in 16 chars, so you should re think the way you are doing it.</p>\n\n<p>Consider also using c++ features like std::sstring.</p>\n"}, {"comments": [{"owner": {"reputation": 1428, "user_id": 2819922, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/e61964f3e5cdcde3dc90370e0cdfe2d4?s=128&d=identicon&r=PG&f=1", "display_name": "datafiddler", "link": "https://stackoverflow.com/users/2819922/datafiddler"}, "edited": false, "score": 1, "creation_date": 1570027505, "post_id": 58201825, "comment_id": 102785917, "body": "There&#39;s no STL nor std::string on an arduino (avr-gcc), and I&#39;d discourage the use of the Arduino String class. Besides strcpy / strncpy, there&#39;s a non-standard <code>strlcpy</code>, which helps in always adding the terminating &#39;\\0&#39; in case of necessary truncations."}], "tags": [], "owner": {"reputation": 796, "user_id": 1643973, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/198787891419681bb0932f54a502a40c?s=128&d=identicon&r=PG", "display_name": "jjramsey", "link": "https://stackoverflow.com/users/1643973/jjramsey"}, "is_accepted": true, "score": 0, "last_activity_date": 1570020458, "creation_date": 1570020458, "answer_id": 58201825, "question_id": 58201090, "link": "https://stackoverflow.com/questions/58201090/how-can-i-create-multiple-class-instances-with-different-character-arrays/58201825#58201825", "title": "How can I create multiple class instances with different character arrays?", "body": "<p>There are a couples problems in your use of <code>nodeName</code>. First, this statement is wrong:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>this-&gt;nodeName[15] = nodeName;\n</code></pre>\n\n<p>That assigns a value to the <em>nonexistent</em> (!) 16th character of <code>this-&gt;nodeName</code>. And yes, I said <em>16th</em> character, not 15th, since indexing in C++ is 0-based (e.g., the first character is <code>nodeName[0]</code>, second is <code>nodeName[1]</code>, 15th is <code>nodeName[14]</code>).</p>\n\n<p>The value assigned to <code>this-&gt;nodeName</code> is probably a pointer to the first character of <code>nodeName</code>, converted to a <code>char</code>, which is almost certainly not what you want. If you absolutely <em>must</em> use a character array for <code>nodeName</code>, then you can do this:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>std::strncpy(this-&gt;nodeName, nodeName, 15);\nthis-&gt;nodeName[14] = '\\0'; // Ensuring NUL-termination, even if something\n                           // is wonky with nodeName\n</code></pre>\n\n<p>However, I would highly second uneven_mark's recommendation to make <code>nodeName</code> be of type <code>std::string</code>. rather than a fixed-length character array. Dealing with <code>strncpy</code> and its fellow fiends can be tricky.</p>\n\n<p>The other problem in your code is here:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>Serial.println(nodeName[15]);\n</code></pre>\n\n<p>Again, this prints the <em>nonexistent</em> (!) 16th character of <code>nodeName</code>. If you use a character array for <code>nodeName</code>, then you should just write</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>Serial.println(nodeName);\n</code></pre>\n\n<p>If you wisely have <code>nodeName</code> be a <code>std::string</code>, then <a href=\"https://arduino.stackexchange.com/questions/56365/arduino-convert-stdstring-to-string\">you may need to write</a></p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>Serial.println(nodeName.c_str());\n</code></pre>\n\n<p>instead.</p>\n"}], "owner": {"reputation": 3, "user_id": 12153455, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b74d783765c343168c320dfa79c900b7?s=128&d=identicon&r=PG&f=1", "display_name": "WhistlerQ", "link": "https://stackoverflow.com/users/12153455/whistlerq"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 1, "accepted_answer_id": 58201825, "answer_count": 2, "score": 0, "last_activity_date": 1570020458, "creation_date": 1570017681, "question_id": 58201090, "link": "https://stackoverflow.com/questions/58201090/how-can-i-create-multiple-class-instances-with-different-character-arrays", "title": "How can I create multiple class instances with different character arrays?", "body": "<p>I am trying to create separate values for each instance of an object. At this point I can give each of the 3 instances individual values for Ints, however I am not able to assign character arrays in the same way.</p>\n\n<p>Ideally I would like to be able to assign separate character arrays and integers with each creation of an instance.  </p>\n\n<p>This is my current code</p>\n\n<pre><code>class node{\n  private:\n  int unitID;\n  int plantID;\n  int M1Thresh;\n  int M2Thresh;\n  char nodeName[15];\n\n\n  public:\n\n  node(int unitID, char nodeName[15], int plantID, int M1Thresh, int M2Thresh){\n  this-&gt;unitID = unitID;\n  this-&gt;plantID = plantID;\n  this-&gt;nodeName[15] = nodeName;\n  this-&gt;M1Thresh = M1Thresh;\n  this-&gt;M2Thresh = M2Thresh;\n  }\n\n\n  void Showit(){\n // Tried this with no success also\n // String outval = nodeName + \"/0\"; \n //Serial.print(\"Test string:\");Serial.println(outval);\n\n  Serial.print(\"unit ID: \");Serial.println(unitID);\n  Serial.print(\"plant ID: \");Serial.println(plantID);\n  Serial.print(\"Name: \"); Serial.println(nodeName[15]);\n  Serial.print(\"M1Thresh: \");Serial.println(M1Thresh);\n    Serial.print(\"M2Thresh: \");Serial.println(M2Thresh);\n    Serial.println(\" \");\n}\n\n};\n\n\nnode Strawberries = node(101, \"Strawberries\", 01, 25, 25);\nnode Cucumber = node(102, \"Cucumber\", 02, 50, 50);\nnode Carrot = node (103, \"Carrot\", 03, 70, 70);\n\n\n\nvoid setup(){\n  Serial.begin(9600);\n}\n\nvoid loop(){\n  Strawberries.Showit();\n  Cucumber.Showit();\n  Carrot.Showit();\n  delay(1000);\n\n\n}\n\n</code></pre>\n\n<p>I would like to be able to create each instance with a separate char[].  </p>\n\n<p>My integers are sending/ assigning fine on the print out but the char[] print is giving me nothing.  </p>\n\n<p>Any help to point me in the right direction would me greatly appreciated.</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["c++", "std-filesystem"], "comments": [{"owner": {"reputation": 2149, "user_id": 2096401, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uVjii.jpg?s=128&g=1", "display_name": "TripeHound", "link": "https://stackoverflow.com/users/2096401/tripehound"}, "edited": false, "score": 1, "creation_date": 1570021175, "post_id": 58201083, "comment_id": 102781971, "body": "&quot;<i>to detect that I&#39;ve hit the root folder and should stop</i>&quot; from the above, and <a href=\"https://stackoverflow.com/a/58201491/2096401\">NutCracker&#39;s answer</a> it looks like checking if <code>p.parentPath()</code> is the same as <code>p</code> should work. <i>Presumably</i>, <code>has_parent_path()</code> of <code>isolated_file.name</code> would return <code>false</code>. (Both ideas untested)."}], "answers": [{"comments": [{"owner": {"reputation": 102, "user_id": 3234726, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RRZNz.gif?s=128&g=1", "display_name": "Hengqi Chen", "link": "https://stackoverflow.com/users/3234726/hengqi-chen"}, "edited": false, "score": 0, "creation_date": 1570021320, "post_id": 58201491, "comment_id": 102782044, "body": "So the behavior is different on Windows and Linux?"}, {"owner": {"reputation": 9494, "user_id": 5517378, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/VWdPz.png?s=128&g=1", "display_name": "NutCracker", "link": "https://stackoverflow.com/users/5517378/nutcracker"}, "reply_to_user": {"reputation": 102, "user_id": 3234726, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RRZNz.gif?s=128&g=1", "display_name": "Hengqi Chen", "link": "https://stackoverflow.com/users/3234726/hengqi-chen"}, "edited": false, "score": 0, "creation_date": 1570021395, "post_id": 58201491, "comment_id": 102782085, "body": "No, I missed one thing so please check again"}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 0, "creation_date": 1570024328, "post_id": 58201491, "comment_id": 102783974, "body": "The root of the C drive is C:\\, but \\ is the escape character for string literals. You could write it as <code>R&quot;(C:\\)&quot;</code>"}, {"owner": {"reputation": 2275, "user_id": 5869304, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/ed0827adc1d5b81f2125f83c44e7feb5?s=128&d=identicon&r=PG&f=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/5869304/joe"}, "edited": false, "score": 0, "creation_date": 1570024413, "post_id": 58201491, "comment_id": 102784024, "body": "Actually &quot;c:/&quot; is perfectly valid to use as the root drive on windows.  Forward slash it not an escape character and is accepted by file functions.  I generally prefer it to backslahs"}, {"owner": {"reputation": 9494, "user_id": 5517378, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/VWdPz.png?s=128&g=1", "display_name": "NutCracker", "link": "https://stackoverflow.com/users/5517378/nutcracker"}, "reply_to_user": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 0, "creation_date": 1570024476, "post_id": 58201491, "comment_id": 102784071, "body": "@Caleth i know but the OP wrote forward slash"}, {"owner": {"reputation": 2275, "user_id": 5869304, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/ed0827adc1d5b81f2125f83c44e7feb5?s=128&d=identicon&r=PG&f=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/5869304/joe"}, "edited": false, "score": 0, "creation_date": 1570024712, "post_id": 58201491, "comment_id": 102784207, "body": "I am the OP.  If I change my code to use the two backslashes the behavior is identical"}, {"owner": {"reputation": 2275, "user_id": 5869304, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/ed0827adc1d5b81f2125f83c44e7feb5?s=128&d=identicon&r=PG&f=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/5869304/joe"}, "edited": false, "score": 0, "creation_date": 1570024856, "post_id": 58201491, "comment_id": 102784293, "body": "To be clear I did read the standard before I posted this.  Your statement that a path of c:\\\\ would return an empty parent path on Windows is incorrect.  My question is not &quot;why does my code behave as the standard says it should&quot; but rather, &quot;why does the standard have this nonsensical behavior&quot;."}, {"owner": {"reputation": 2275, "user_id": 5869304, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/ed0827adc1d5b81f2125f83c44e7feb5?s=128&d=identicon&r=PG&f=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/5869304/joe"}, "edited": false, "score": 0, "creation_date": 1570025422, "post_id": 58201491, "comment_id": 102784636, "body": "I&#39;m sorry I don&#39;t know what to do with that.   Is there a &quot;run&quot; button somewhere that I&#39;m missing?   When I run that exact code on Visual Studio  2019 on my machine (I just copy-pasted it)  it tells me that the path you typed there <i>does</i> have a parent which is itself"}, {"owner": {"reputation": 9494, "user_id": 5517378, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/VWdPz.png?s=128&g=1", "display_name": "NutCracker", "link": "https://stackoverflow.com/users/5517378/nutcracker"}, "edited": false, "score": 0, "creation_date": 1570027449, "post_id": 58201491, "comment_id": 102785894, "body": "The third column shows the output of the program. You don&#39;t need to run it"}, {"owner": {"reputation": 2275, "user_id": 5869304, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/ed0827adc1d5b81f2125f83c44e7feb5?s=128&d=identicon&r=PG&f=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/5869304/joe"}, "edited": false, "score": 0, "creation_date": 1570027938, "post_id": 58201491, "comment_id": 102786161, "body": "Actually it does not.  The third column shows me the following 3 sentences:  &quot;ASM generation compiler returned: 0&quot;, &quot;Execution build compiler returned: 0&quot;, and &quot;Program returned 0&quot;.  It does not show me any std::cout output."}, {"owner": {"reputation": 9494, "user_id": 5517378, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/VWdPz.png?s=128&g=1", "display_name": "NutCracker", "link": "https://stackoverflow.com/users/5517378/nutcracker"}, "edited": false, "score": 0, "creation_date": 1570027968, "post_id": 58201491, "comment_id": 102786179, "body": "Because there is no output. If condition is not satisfied"}, {"owner": {"reputation": 2275, "user_id": 5869304, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/ed0827adc1d5b81f2125f83c44e7feb5?s=128&d=identicon&r=PG&f=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/5869304/joe"}, "edited": false, "score": 0, "creation_date": 1570028383, "post_id": 58201491, "comment_id": 102786436, "body": "Well regardless, when I run it on the real MSVC compiler, I get what I get."}], "tags": [], "owner": {"reputation": 9494, "user_id": 5517378, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/VWdPz.png?s=128&g=1", "display_name": "NutCracker", "link": "https://stackoverflow.com/users/5517378/nutcracker"}, "is_accepted": false, "score": 0, "last_activity_date": 1570021718, "last_edit_date": 1570021718, "creation_date": 1570019175, "answer_id": 58201491, "question_id": 58201083, "link": "https://stackoverflow.com/questions/58201083/how-can-a-stdfilesystem-root-path-have-itself-as-a-parent/58201491#58201491", "title": "How can a std::filesystem root path have itself as a parent?", "body": "<p>Function <code>bool has_parent_path() const;</code> checks whether the path returned from the <code>path parent_path() const;</code> function is empty.</p>\n\n<p>Furthermore, for the <code>path parent_path() const;</code> function, the <a href=\"https://en.cppreference.com/w/cpp/filesystem/path/root_directory\" rel=\"nofollow noreferrer\">standard</a> says:</p>\n\n<blockquote>\n  <p>Returns the root directory of the generic-format path. If the path (in generic format) does not include root directory, returns path().</p>\n</blockquote>\n\n<p>On Linux systems, where the root path is <code>/</code>, and on Windows systems, where the root path is <code>C:\\\\</code>, <code>parent_path()</code> function would return empty string so, consequently, <code>has_parent_path()</code> function would return false.</p>\n\n<p>Check this code from <a href=\"https://en.cppreference.com/w/cpp/experimental/fs/path/parent_path\" rel=\"nofollow noreferrer\">here</a>:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;experimental/filesystem&gt;\n\nnamespace fs = std::experimental::filesystem;\n\nint main() {\n    for (fs::path p : {\"/var/tmp/example.txt\", \"/\", \"C:\\\\\", \"/var/tmp/.\"}) {\n        std::cout &lt;&lt; \"The parent path of \" &lt;&lt; p\n                  &lt;&lt; \" is \" &lt;&lt; p.parent_path() &lt;&lt; '\\n';\n        std::cout &lt;&lt; \"Has parent path: \" &lt;&lt; p.has_parent_path() &lt;&lt; '\\n';\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>Pay attention to spelling out the Windows root directory. It is not <code>c:/</code> but <code>C:\\\\</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 2275, "user_id": 5869304, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/ed0827adc1d5b81f2125f83c44e7feb5?s=128&d=identicon&r=PG&f=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/5869304/joe"}, "edited": false, "score": 1, "creation_date": 1570203913, "post_id": 58234676, "comment_id": 102851611, "body": "Thank you.  That makes sense.  In my own code my workaround was to add a check to see if parent_path() == root_path(), since that was also the case in this condition.  I have no idea if my idea or your idea is more reliable or if they are the same."}], "tags": [], "owner": {"reputation": 336, "user_id": 12163881, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab26b22f3beb645572849d0524eb7e81?s=128&d=identicon&r=PG", "display_name": "Gulrak", "link": "https://stackoverflow.com/users/12163881/gulrak"}, "is_accepted": true, "score": 2, "last_activity_date": 1570185752, "last_edit_date": 1570185752, "creation_date": 1570185201, "answer_id": 58234676, "question_id": 58201083, "link": "https://stackoverflow.com/questions/58201083/how-can-a-stdfilesystem-root-path-have-itself-as-a-parent/58234676#58234676", "title": "How can a std::filesystem root path have itself as a parent?", "body": "<p>Actually there is no output in the godbolt example, because the test is run on GCC on a posix environment, where <code>\"C:\\\\\"</code> is not a root directory, so it is seen as a strange directory/file name and its parent is empty, but with the <a href=\"https://godbolt.org/z/PhBew_\" rel=\"nofollow noreferrer\">correct posix root path</a> <code>\"/\"</code> it would have given the output, as the OP is observing.\nSo no, parent_path() of a root directory (<code>\"/\"</code> or <code>\"C:\\\\\"</code>) is not empty, so has_parent_path() is true on all implementations of std::filesystem I know of.</p>\n\n<p>The actual standard says: <em>\"Returns: <code>*this</code> if <code>has_relative_path()</code> is <code>false</code>, otherwise a path whose generic format pathname is the longest prefix of the generic format pathname of <code>*this</code> that produces one fewer element in its iteration.\"</em> and <code>relative_path()</code> is everything after the <code>root_path()</code>, so there is no <code>relative_path()</code> in this case, so <code>parent_path()</code> returns <code>*this</code> and <code>has_parent_path()</code> returns true, as in the example of the OP.</p>\n\n<p>My guess with the question of why the standard chose this behaviour is, that this is what <code>cd ..</code> does on every OS, if you are already at the root, you stay at the same root.</p>\n\n<p>Indeed one possible way of detecting the end is: <code>(!p.has_parent_path() || !p.has_relative_path())</code> or maybe even <code>!p.has_relative_path()</code>, depending on if you want to end with an empty path if it was rootless.</p>\n"}], "owner": {"reputation": 2275, "user_id": 5869304, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/ed0827adc1d5b81f2125f83c44e7feb5?s=128&d=identicon&r=PG&f=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/5869304/joe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1177, "favorite_count": 1, "accepted_answer_id": 58234676, "answer_count": 2, "score": 4, "last_activity_date": 1570185752, "creation_date": 1570017660, "last_edit_date": 1570026841, "question_id": 58201083, "link": "https://stackoverflow.com/questions/58201083/how-can-a-stdfilesystem-root-path-have-itself-as-a-parent", "title": "How can a std::filesystem root path have itself as a parent?", "body": "<p>This program:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;filesystem&gt;\n\nint main()\n{\n    std::filesystem::path p1(\"c:\\\\\");\n    std::filesystem::path p2(\"c:/\");\n    if (p1.has_parent_path())\n        std::cout &lt;&lt; \"Parent path of \" &lt;&lt; p1 &lt;&lt; \" is \" &lt;&lt; p1.parent_path() &lt;&lt; std::endl;\n    if (p2.has_parent_path())\n        std::cout &lt;&lt; \"Parent path of \" &lt;&lt; p2 &lt;&lt; \" is \" &lt;&lt; p2.parent_path() &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>Produces this output:</p>\n\n<pre><code>Parent path of \"c:\\\\\" is \"c:\\\\\"\nParent path of \"c:/\" is \"c:/\"\n</code></pre>\n\n<p><em>(<strong>EDIT</strong>: There was confusion about my use of forward slash so I updated this code to show the same thing happens regardless of which path separators you use on Windows)</em></p>\n\n<p>This makes no sense to me.  How can a directory be the parent of itself?  What is the point of even having a \"has_parent\" function if it's never going to return false?</p>\n\n<p>Most importantly: If I am writing code that recursively searches up a directory tree looking for a file, what is the best/most reliable way to detect that I've hit the root folder and should stop?</p>\n\n<p>(I'm using Visual Studio 2019 in C++17 language mode, if that matters)</p>\n"}, {"tags": ["c++", "qt", "smart-pointers", "signals-slots", "qsharedpointer"], "comments": [{"owner": {"reputation": 18971, "user_id": 2674506, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QvQN8.jpg?s=128&g=1", "display_name": "vahancho", "link": "https://stackoverflow.com/users/2674506/vahancho"}, "edited": false, "score": 0, "creation_date": 1570017902, "post_id": 58200997, "comment_id": 102780166, "body": "Qt docs say, that you should delete the reply, however not directly in the slot, but using <code>deleteLater()</code>. It looks like you do it properly in your code."}, {"owner": {"reputation": 558, "user_id": 1466885, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/4f3dbc479f96b0133eb624336e7842c9?s=128&d=identicon&r=PG&f=1", "display_name": "daljit97", "link": "https://stackoverflow.com/users/1466885/daljit97"}, "reply_to_user": {"reputation": 18971, "user_id": 2674506, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QvQN8.jpg?s=128&g=1", "display_name": "vahancho", "link": "https://stackoverflow.com/users/2674506/vahancho"}, "edited": false, "score": 0, "creation_date": 1570018025, "post_id": 58200997, "comment_id": 102780227, "body": "@vahancho could a <code>QSharedPointer</code> with a custom deleter  be used then? (<a href=\"https://doc.qt.io/qt-5/qsharedpointer.html#QSharedPointer-2\" rel=\"nofollow noreferrer\">doc.qt.io/qt-5/qsharedpointer.html#QSharedPointer-2</a>)"}, {"owner": {"reputation": 18971, "user_id": 2674506, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QvQN8.jpg?s=128&g=1", "display_name": "vahancho", "link": "https://stackoverflow.com/users/2674506/vahancho"}, "edited": false, "score": 0, "creation_date": 1570018228, "post_id": 58200997, "comment_id": 102780346, "body": "It may be used, but I don&#39;t see a point for using a shared pointer. Who shares the pointer? In this case the scoped or unique pointer will be more appropriate, IMO."}, {"owner": {"reputation": 558, "user_id": 1466885, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/4f3dbc479f96b0133eb624336e7842c9?s=128&d=identicon&r=PG&f=1", "display_name": "daljit97", "link": "https://stackoverflow.com/users/1466885/daljit97"}, "reply_to_user": {"reputation": 18971, "user_id": 2674506, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QvQN8.jpg?s=128&g=1", "display_name": "vahancho", "link": "https://stackoverflow.com/users/2674506/vahancho"}, "edited": false, "score": 0, "creation_date": 1570018284, "post_id": 58200997, "comment_id": 102780377, "body": "but wouldn&#39;t the scope end before the <code>QNetworkReply::finished</code> is emitted?"}, {"owner": {"reputation": 18971, "user_id": 2674506, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QvQN8.jpg?s=128&g=1", "display_name": "vahancho", "link": "https://stackoverflow.com/users/2674506/vahancho"}, "edited": false, "score": 0, "creation_date": 1570018559, "post_id": 58200997, "comment_id": 102780511, "body": "The scope would be the <code>send()</code> function. But anyways, I would&#39;t use smart pointers to manage the lifetime of pointers that aren&#39;t created by me."}], "answers": [{"tags": [], "owner": {"reputation": 558, "user_id": 1466885, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/4f3dbc479f96b0133eb624336e7842c9?s=128&d=identicon&r=PG&f=1", "display_name": "daljit97", "link": "https://stackoverflow.com/users/1466885/daljit97"}, "is_accepted": true, "score": 0, "last_activity_date": 1570030565, "creation_date": 1570030565, "answer_id": 58204803, "question_id": 58200997, "link": "https://stackoverflow.com/questions/58200997/smart-pointers-and-avoid-manual-memory-management-when-using-qnetworkaccessmanag/58204803#58204803", "title": "Smart pointers and avoid manual memory management when using QNetworkAccessManager", "body": "<p>Ok so after some thinking I came up with a solution. The main problem I wanted to solve was to avoid deleting my <code>QNetworkReply*</code> object manually, instead I wanted it to be automatically destroyed when an instance of <code>NetworkRequest</code> is deleted. In order to achieve this, I used a <code>std::unique_ptr</code> as a private member of my <code>NetworkRequest</code> class so when the class is destroyed, the <code>unique_ptr</code> automatically cleans the object in memory. Furthermore, by default <code>std::unique_ptr</code> deletes the object it hold upon reassignment, so whenever I call the <code>send</code> function in my, I can assign a new object to the smart pointer and the previous object in memory will get deleted automatically. One thing to notice, was the Qt docs recommend that <code>QNetworkReply*</code> should be deleted using <code>QObject::deleteLater()</code> (it is not fully clear to me why this is the case), in order to do this one can just use a custom deleter.\nSo in my code, I declared a private member as following:</p>\n\n<pre><code>private:\n    struct deleteLaterDeletor\n    {\n        void operator()(QObject *object) const\n        {\n            if(object) {\n                object-&gt;deleteLater();\n            }\n        }\n    };\n\n    using ReplyPointer = std::unique_ptr&lt;QNetworkReply, deleteLaterDeletor&gt;;\n\n    ReplyPointer m_reply;\n</code></pre>\n\n<p>Then in my <code>send</code> function:</p>\n\n<pre><code>        m_reply = ReplyPointer(mNetManager-&gt;get(netRequest));\n</code></pre>\n\n<p>Obviously, in the signature of signal and slots I have to pass the raw pointer (<code>m_reply.get()</code>). </p>\n\n<p>(<code>QSharedPointer</code> can also be used instead of <code>std::unique_ptr</code>)</p>\n"}], "owner": {"reputation": 558, "user_id": 1466885, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/4f3dbc479f96b0133eb624336e7842c9?s=128&d=identicon&r=PG&f=1", "display_name": "daljit97", "link": "https://stackoverflow.com/users/1466885/daljit97"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 112, "favorite_count": 0, "accepted_answer_id": 58204803, "answer_count": 1, "score": 0, "last_activity_date": 1570030565, "creation_date": 1570017314, "last_edit_date": 1570017696, "question_id": 58200997, "link": "https://stackoverflow.com/questions/58200997/smart-pointers-and-avoid-manual-memory-management-when-using-qnetworkaccessmanag", "title": "Smart pointers and avoid manual memory management when using QNetworkAccessManager", "body": "<p>I have the following class which calls some HTTP API request to a server:</p>\n\n<pre><code>class NetworkRequest : public QObject {\n\npublic:\n    NetworkRequest(QNetworkAccessManager* netManager):\n        m_netManager(netManager){}\n\n    void send(QUrl const &amp;url){\n        QNetworkRequest request(url);\n        auto reply = m_netManager-&gt;get(request);\n        connect(reply, &amp;QNetworkReply::finished, [this, reply](){\n            // do some stuff with reply (like if url is redirected)\n            if(isRedirected(reply)){\n                // we have to delete the reply and send a new one\n                QUrl newUrl;\n                // somehow get the new url;\n                reply-&gt;deleteLater();\n                send(newUrl);\n            }\n            else{\n                reply-&gt;setParent(this); // so that it will be deleted when an instance of this class is deleted\n                emit completed(reply);\n            }\n        });\n    }\n\nsignals:\n    void completed(QNetworkReply* reply);\n\nprivate:\n    QNetworkAccessManager* m_netManager;\n    bool isRedirected(QNetworkReply * reply){\n        bool yes = false;\n\n        /* process the process reply and determine yes is true or false\n        ....\n        **/\n        return yes;\n    }\n};\n</code></pre>\n\n<p>I use the class in this way:</p>\n\n<pre><code>auto req = new NetworkRequest(nm);\nreq-&gt;send(\"http://someurl.com\");\nconnect(req, &amp;NetworkRequest::completed, randomClass, &amp;RandomClass::slot);\n\n// in RandomClass::slot I call NetworkRequest::deleteLater() when I finished with the network data\n</code></pre>\n\n<p>Now this clearly involves some manual memory management and I have to be careful to not forget deleting the raw pointers. I was wondering if the code above could be written using <code>QSharedPointer</code>  (or even <code>std::shared_ptr</code>) and replacing:</p>\n\n<pre><code>        auto reply = m_netManager-&gt;get(request);\n</code></pre>\n\n<p>with:</p>\n\n<pre><code>        auto smartReply = QSharedPointer&lt;QNetworkReply&gt;(m_netManager-&gt;get(request));\n</code></pre>\n\n<p>then replace all instances of <code>reply</code> with <code>smartReply.get()</code> and then forget about manually deleting reply objects. However, it is unclear to me if the shared pointer will automatically  delete the objects because between the time frame that I call <code>send()</code> and the signal <code>QNetworkReply::finished</code>, would the smart pointer know that the raw pointer is still in use? Also when I delete an instance of <code>NetworkRequest</code> will the shared pointer automatically delete the <code>QNetworkReply</code> it owns?</p>\n"}, {"tags": ["c++", "server", "client"], "answers": [{"comments": [{"owner": {"reputation": 359, "user_id": 6572161, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GJNVA.png?s=128&g=1", "display_name": "Deniz", "link": "https://stackoverflow.com/users/6572161/deniz"}, "edited": false, "score": 0, "creation_date": 1570020466, "post_id": 58201183, "comment_id": 102781592, "body": "I understand and applied it but it is not still working, should I make changes in server, about the size of char array array which is 1550"}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "reply_to_user": {"reputation": 359, "user_id": 6572161, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GJNVA.png?s=128&g=1", "display_name": "Deniz", "link": "https://stackoverflow.com/users/6572161/deniz"}, "edited": false, "score": 0, "creation_date": 1570023788, "post_id": 58201183, "comment_id": 102783623, "body": "What is not working? Since your client is sending ints and your server is treating them as bytes, the memory layout will not be the same. Your 7 might be at index 28 or 31 or 56 or 63 when you read it as chars. Maybe you should make the client send chars as well?"}, {"owner": {"reputation": 359, "user_id": 6572161, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GJNVA.png?s=128&g=1", "display_name": "Deniz", "link": "https://stackoverflow.com/users/6572161/deniz"}, "edited": false, "score": 0, "creation_date": 1570025640, "post_id": 58201183, "comment_id": 102784752, "body": "but client is already sending chars with this <code>reinterpret_cast&lt;char*&gt;</code>"}], "tags": [], "owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "is_accepted": true, "score": 2, "last_activity_date": 1570029384, "last_edit_date": 1570029384, "creation_date": 1570018009, "answer_id": 58201183, "question_id": 58200957, "link": "https://stackoverflow.com/questions/58200957/data-transferring-problem-from-client-to-server-in-c/58201183#58201183", "title": "Data Transferring Problem from Client to Server in C++", "body": "<p><code>reinterpret_cast&lt;char*&gt;(&amp;buf)</code> doesn't do what you think it does. It should probably be <code>reinterpret_cast&lt;char*&gt;(buf)</code>. And <code>1450</code> should be <code>1450*sizeof(int)</code> because you have 1450 ints, and each int is more than one byte.</p>\n\n<p>sendto needs a pointer to the data that it will send. If you pass it <code>&amp;buf</code> (a pointer to <code>buf</code>) then you are sending the pointer <code>buf</code>. If you pass it <code>buf</code> (a pointer to the buffer) then you are sending the buffer.</p>\n\n<hr>\n\n<p>When you build up an array of ints your computer stores them in memory as bytes like this: (maybe - it's platform-specific!)</p>\n\n<pre><code>Byte  0: 0 \\\nByte  1: 0 |\nByte  2: 0 | int 0\nByte  3: 0 /\nByte  4: 1   \\\nByte  5: 0   |\nByte  6: 0   | int 1\nByte  7: 0   /\nByte  8: 2     \\\nByte  9: 0     |\nByte 10: 0     | int 2\nByte 11: 0     /\n</code></pre>\n\n<p>When the server treats these as bytes it will see the number 2 at index 8, and so on. If you want it to match, then perhaps the client should be creating an array of bytes (chars, same as the server) instead of ints.</p>\n"}], "owner": {"reputation": 359, "user_id": 6572161, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GJNVA.png?s=128&g=1", "display_name": "Deniz", "link": "https://stackoverflow.com/users/6572161/deniz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "accepted_answer_id": 58201183, "answer_count": 1, "score": 0, "last_activity_date": 1570029384, "creation_date": 1570017147, "question_id": 58200957, "link": "https://stackoverflow.com/questions/58200957/data-transferring-problem-from-client-to-server-in-c", "title": "Data Transferring Problem from Client to Server in C++", "body": "<p>I have a client that sends array data to server with UDP datagrams. In order to be able to trace the data I sent I fill my array with numbers. For example; <em>in client code</em> I fill <code>buf[7] = 7;</code>  this index is to indicate the total number of fragments. I expect to see the same <em>in server</em> too.</p>\n\n<p>However, my <code>buf</code> <em>in server</em> does not get those values. \nI have to use fixed sized char array <em>in server</em> I can not change it. (I perform long calculations with the data, I didn't put it since it is unrelated with the problem)</p>\n\n<p><strong>I have to explain server structure:</strong> </p>\n\n<ul>\n<li>I hold a queue. Queue contains 3 buffers. If I get data too fast and\nif <code>buf</code> is full and still its data on file, <code>buf2</code> should be used\nand so on. It is for optimization purpose.</li>\n<li>I use a thread, it writes current buffers data into a file on a\nparallel manner. I signal to thread so it knows when to start\nwriting.</li>\n</ul>\n\n<p><em>I suspected thread</em>, when I comment it, receive function stucks.\n<em>I suspected</em> type of arrays since I send char pointer array but receive fixed sized char array. (Again I have to use fixed size while receiving)</p>\n\n<blockquote>\n  <p>All I want is to see the data correctly transferred. When I look at\n  server I want to see the same data at same indexes.</p>\n  \n  <p>Here is my simple client code</p>\n</blockquote>\n\n<pre><code>void main(int argc, char* argv[]){\n    WSADATA data;\n    WORD version = MAKEWORD(2, 2);\n\n    int wsOk = WSAStartup(version, &amp;data);\n    if (wsOk != 0)\n    {\n        cout &lt;&lt; \"Can't start Winsock! \" &lt;&lt; wsOk;\n        return;\n    }\n\n    sockaddr_in server;\n    server.sin_family = AF_INET; // AF_INET = IPv4 addresses\n    server.sin_port = htons(...port no...); // Little to big endian conversion\n    inet_pton(AF_INET, \"...IP....\", &amp;server.sin_addr); // Convert from string to byte array\n\n    SOCKET out = socket(AF_INET, SOCK_DGRAM, 0);\n    int sendOk = 0;\n\n    int *buf = new int[1450];\n\n    //just fill it with ordered number to be able to trace from other side\n    for (int i = 0; i &lt; 1450; i++)\n    {\n        buf[i] = i;\n    }\n\n    buf[7] = 7; // this index represent TotalFragmentCount in UDP\n\n    while (true) {\n\n        for (int fragmentNumber = 1; fragmentNumber &lt; 8; fragmentNumber++) {\n            //I want to set this index to count fragment number when I look at server\n            buf[9] = fragmentNumber;\n            //I give it as char * array with reinterpret_cast, since sendto accepts pointer char array\n            sendOk = sendto(out, reinterpret_cast&lt;char*&gt;(&amp;buf), 1450, 0, (sockaddr*)&amp; server, sizeof(server));\n        }\n\n    }\n\n    if (sendOk == SOCKET_ERROR)\n    {\n        cout &lt;&lt; \"That didn't work! \" &lt;&lt; WSAGetLastError() &lt;&lt; endl;\n    }\n\n    closesocket(out);\n    WSACleanup();\n\n}\n</code></pre>\n\n<blockquote>\n  <p>Here is my server code</p>\n</blockquote>\n\n<pre><code>void writeToFile(char buf[], vector&lt;uint16_t&gt; &amp;intData, ofstream &amp;file) {\n\n\n    while (true) {\n\n        if (signaled == 1) {\n            thread_mutex.lock();\n            //writing...\n            for (const auto&amp; e : intData) {\n                file &lt;&lt; e &lt;&lt; \"\\n\";\n            }\n            buffers.pop(); // pops front which is written by this time\n            buffers.push(buf);\n            thread_mutex.unlock();\n            break;\n        }\n        else{\n            continue;\n        }\n    }\n}\n// Main entry point into the server\nvoid main()\n{\n    WSADATA data;\n    WORD version = MAKEWORD(2, 2);\n\n    int wsOk = WSAStartup(version, &amp;data);\n    if (wsOk != 0)\n    {\n        // Not ok! Get out quickly\n        cout &lt;&lt; \"Can't start Winsock! \" &lt;&lt; wsOk;\n        return;\n    }\n\n    // Create a socket, notice that it is a user datagram socket (UDP)\n    SOCKET in = socket(AF_INET, SOCK_DGRAM, IPPROTO_UDP);\n\n    sockaddr_in serverHint;\n    serverHint.sin_addr.S_un.S_addr = ADDR_ANY; // Us any IP address available on the machine\n    serverHint.sin_family = AF_INET; // Address format is IPv4\n    serverHint.sin_port = htons(4660); // Convert from little to big endian\n\n    // Try and bind the socket to the IP and port\n    if (bind(in, (sockaddr*)&amp;serverHint, sizeof(serverHint)) == SOCKET_ERROR)\n    {\n        cout &lt;&lt; \"Can't bind socket! \" &lt;&lt; WSAGetLastError() &lt;&lt; endl;\n        return;\n    }\n\n    sockaddr_in client; // Use to hold the client information (port / ip address)\n    int clientLength = sizeof(client); // The size of the client information\n\n\n    char buf[1550] = { 0 }; //message gets here\n    char buf2[1550]= { 0 };\n    char buf3[1550]= { 0 };\n\n    // Control buffer traffic with queue\n    buffers.push(buf);\n    buffers.push(buf2);\n    buffers.push(buf3);\n\n    std::thread thread_write(writeToFile, std::ref(buffers.front()), std::ref( intData), std::ref(file)); //front returns first element of the queue\n\n    bytesIn = recvfrom(in, buffers.front(), 1550, 0, (sockaddr*)&amp; client, &amp;clientLength);\n    cout &lt;&lt; \"\";\n    while (ReceivedFrameCount != 100)\n    {\n            ZeroMemory(&amp;client, clientLength); // Clear the client structure\n\n            // Wait for message\n            bytesIn = recvfrom(in, buffers.front(), 1550, 0, (sockaddr*)&amp; client, &amp;clientLength);\n\n            if (bytesIn == SOCKET_ERROR)\n            {\n                cout &lt;&lt; \"Error receiving from client \" &lt;&lt; WSAGetLastError() &lt;&lt; endl;\n                continue;\n            }\n\n            // Parse the byte array\n\n            TotalFragmentCount = (uint16_t)(buf[6] &lt;&lt; 8 | buf[7]);\n            FrameFragmentNo = (uint16_t)(buf[8] &lt;&lt; 8 | buf[9]);\n\n            signaled = 1;\n\n\n    }// end of while \n\n\n    // Close socket\n    closesocket(in);\n\n    file.close();\n    WSACleanup();\n\n    thread_write.join();\n}\n</code></pre>\n"}, {"tags": ["c++", "templates"], "comments": [{"owner": {"reputation": 145, "user_id": 9088108, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/540ece36b5c9fd67855b0b530d095ed8?s=128&d=identicon&r=PG&f=1", "display_name": "samini", "link": "https://stackoverflow.com/users/9088108/samini"}, "edited": false, "score": 0, "creation_date": 1570017210, "post_id": 58200907, "comment_id": 102779782, "body": "look at this <a href=\"https://stackoverflow.com/questions/38644146/choose-template-based-on-run-time-string-in-c\">link</a>"}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1570020283, "post_id": 58200907, "comment_id": 102781473, "body": "Not a fan of the duplicate -- it is way less clear, and the answers don&#39;t conver C++11 since it&#39;s from 2010."}], "answers": [{"tags": [], "owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "is_accepted": false, "score": 2, "last_activity_date": 1570017173, "creation_date": 1570017173, "answer_id": 58200963, "question_id": 58200907, "link": "https://stackoverflow.com/questions/58200907/c-template-compilation/58200963#58200963", "title": "C++ template compilation", "body": "<p>Yes: you need an <a href=\"https://en.cppreference.com/w/cpp/language/class_template#Explicit_instantiation\" rel=\"nofollow noreferrer\">explicit template instantiation</a>.</p>\n\n<p>In your header:</p>\n\n<pre><code>extern template struct YourClass&lt;Foo&gt;;\n</code></pre>\n\n<p>In your .cpp file:</p>\n\n<pre><code>template struct YourClass&lt;Foo&gt;;\n</code></pre>\n\n<p>Note that if you're certain that the user won't need any other specialization, you can hide the template definitions as they only need to be visible from the explicit instantiation definition.</p>\n"}], "owner": {"reputation": 21, "user_id": 12153530, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd95fcb55537e1a93dc8bc97d35fe87c?s=128&d=identicon&r=PG&f=1", "display_name": "Marco Venuti", "link": "https://stackoverflow.com/users/12153530/marco-venuti"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "closed_date": 1570018254, "answer_count": 1, "score": 2, "last_activity_date": 1570017173, "creation_date": 1570016969, "question_id": 58200907, "link": "https://stackoverflow.com/questions/58200907/c-template-compilation", "closed_reason": "Duplicate", "title": "C++ template compilation", "body": "<p>I want to compile a static library with a template class. I know this cannot be done for every type, but I know that programs that will make use of this library are going to need only a few template \"instantiations\" (I mean, for a few known types).</p>\n\n<p>Is there a way to manually trigger compilation of the template class for these types within the library itself?</p>\n"}, {"tags": ["c++", "c++11", "templates", "namespaces"], "answers": [{"tags": [], "owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 2, "last_activity_date": 1570016580, "last_edit_date": 1570016580, "creation_date": 1570016155, "answer_id": 58200694, "question_id": 58200583, "link": "https://stackoverflow.com/questions/58200583/problems-about-name-for-namespace-and-template-parameters/58200694#58200694", "title": "problems about name for namespace and template parameters", "body": "<p>The name of the template parameter is introduced in the scope of the primary template declaration. It hides the name of the namespace.</p>\n\n<p>From the C++ 17 Standard (6.3.2 Point of declaration)</p>\n\n<blockquote>\n  <p>11 The point of declaration for a template parameter is immediately\n  after its complete template-parameter</p>\n</blockquote>\n\n<p>With a requires clause the template declaration could look more clear.</p>\n\n<p>Here is a demonstrative program</p>\n\n<pre><code>namespace config\n{\n}\n\ntemplate &lt;typename config&gt; requires requires { typename config::socket_type; }\nclass endpoint : public config::socket_type\n{\n};\n\nstruct A\n{\n    struct socket_type {};\n};\n\nint main()\n{\n    endpoint&lt;A&gt; e;\n}    \n</code></pre>\n"}], "owner": {"reputation": 93, "user_id": 8837101, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lUqmt.jpg?s=128&g=1", "display_name": "LimingFang", "link": "https://stackoverflow.com/users/8837101/limingfang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1570016580, "creation_date": 1570015740, "question_id": 58200583, "link": "https://stackoverflow.com/questions/58200583/problems-about-name-for-namespace-and-template-parameters", "title": "problems about name for namespace and template parameters", "body": "<p>Recently I read some code about websocketpp, and the following code is what I'm confused about:</p>\n\n<pre><code>#include &lt;somefile.hpp&gt;\ntemplate &lt;typename config&gt;\nclass endpoint : public config::socket_type {          //--------A--------//\n    typedef typename config::concurrency_type concurrency_type;//-----B------//\n    ....\n}\n</code></pre>\n\n<p>In the somefile.hpp, there is namespace which also called config. So I don't know whether the name \"config\" in A and B denoted the that namespace or the template parameter.\nI guess it is template parameter.</p>\n\n<p>Thx for all people asking my questions.</p>\n"}, {"tags": ["c++", "templates", "gcc", "c++14", "template-instantiation"], "comments": [{"owner": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "edited": false, "score": 0, "creation_date": 1570017682, "post_id": 58200557, "comment_id": 102780039, "body": "There seems to be some circular dependency. When you call <code>foo(toto{});</code>, <code>foo</code> must be instantiated. This tries to instantiate <code>has_foo_method&lt;toto&gt;</code> (within <code>enable_if_t</code>), which evaluates <code>decltype(foo(*e));</code>. Which, again, tries to instantiate <code>foo</code>. And so on..."}, {"owner": {"reputation": 31, "user_id": 12125889, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65b0941f56c2a9a0339a822c19c1f534?s=128&d=identicon&r=PG&f=1", "display_name": "chapuilo", "link": "https://stackoverflow.com/users/12125889/chapuilo"}, "reply_to_user": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "edited": false, "score": 0, "creation_date": 1570097145, "post_id": 58200557, "comment_id": 102809702, "body": "Yes I do understand that but I can&#39;t understand why it is working without <code>std::decay_t</code>.  It works if I use <code>E00 = toto</code>"}], "owner": {"reputation": 31, "user_id": 12125889, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65b0941f56c2a9a0339a822c19c1f534?s=128&d=identicon&r=PG&f=1", "display_name": "chapuilo", "link": "https://stackoverflow.com/users/12125889/chapuilo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 60, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1570015654, "creation_date": 1570015654, "question_id": 58200557, "link": "https://stackoverflow.com/questions/58200557/gcc-compilation-error-during-template-instantiation", "title": "gcc compilation error during template instantiation", "body": "<p>I am currently doing an upgrade from gcc 4.9 (c++1) to gcc 8.2 (c++14) and I have an issue on gcc 8.2 with the following code </p>\n\n<pre><code>#include &lt;type_traits&gt;\n#include &lt;iostream&gt;\n\ntemplate &lt;class T&gt;\nstruct has_foo_method \n{\n   struct not_found {};\n\n   template &lt;class C&gt;\n   static auto f(C* e) -&gt; decltype(foo(*e));\n\n   template &lt;class&gt;\n   static auto f(...) -&gt; not_found;\n\n   using type = decltype(f&lt;T&gt;(nullptr));\n   static const bool value = !std::is_same&lt;not_found, type&gt;::value;\n};\n\ntemplate &lt;class E, class E00 = std::decay_t&lt;E&gt;&gt;\nstd::enable_if_t&lt;!has_foo_method&lt;E00&gt;::value, typename has_foo_method&lt;E00&gt;::type&gt;\nfoo(E&amp;&amp; e)\n{\n    return foo(std::forward&lt;E&gt;(e));\n}\n\nstruct toto\n{};\n\nint main()\n{\n    std::cout &lt;&lt; \"same type : \"&lt;&lt; (std::is_same&lt;toto, std::decay&lt;toto&gt;::type&gt;::value ? \"TRUE\" : \"FALSE\") &lt;&lt; std::endl;\n    std::cout &lt;&lt; \"foo methode  : \" &lt;&lt; (has_foo_method&lt;toto&gt;::value ? \"TRUE\" : \"FALSE\") &lt;&lt; std::endl;\n    std::cout &lt;&lt; \"foo methode for decay: \" &lt;&lt; (has_foo_method&lt;std::decay_t&lt;toto&gt;&gt;::value ? \"TRUE\" : \"FALSE\") &lt;&lt; std::endl;\n    foo(toto{});\n    return 0;\n}\n</code></pre>\n\n<p>The error is the following : </p>\n\n<pre><code>source&gt;: In substitution of 'template&lt;class E, class E00&gt; std::enable_if_t&lt;(! has_foo_method&lt;E00&gt;::value), typename has_foo_method&lt;E00&gt;::type&gt; foo(E&amp;&amp;) [with E = toto&amp;; E00 = &lt;missing&gt;]':\n...\n&lt;source&gt;:19:20: fatal error: template instantiation depth exceeds maximum of 900 (use -ftemplate-depth= to increase the maximum)\n</code></pre>\n\n<p>You can find the code and error <a href=\"https://godbolt.org/z/X8xLZU\" rel=\"nofollow noreferrer\">here</a></p>\n\n<p>I also found that if I remove E00 = std::decay_t and replace E00 per E like this : </p>\n\n<pre><code>template &lt;class E&gt;\nstd::enable_if_t&lt;!has_foo_method&lt;E&gt;::value, typename has_foo_method&lt;E&gt;::type&gt;\n</code></pre>\n\n<p>the code is compiling but I can't understand why.</p>\n\n<p>Do you know why it's not compiling on gcc 8.2 and it is on gcc 4.9? </p>\n"}]