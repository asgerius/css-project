[{"tags": ["c++"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1536796989, "post_id": 52304869, "comment_id": 91557352, "body": "The memory should clear up when you leave the scope of the <code>ss</code> variable. Make sure it&#39;s not a global variable, you only use it in the area of the program that needs it."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 2, "creation_date": 1536797612, "post_id": 52304869, "comment_id": 91557458, "body": "The source of the problem is not apparent in the code you&#39;ve shown. Please try to make and share a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 10336510, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ec561c42b6c7510487fd8f1be7631c2?s=128&d=identicon&r=PG&f=1", "display_name": "coffeemancer", "link": "https://stackoverflow.com/users/10336510/coffeemancer"}, "edited": false, "score": 0, "creation_date": 1536804827, "post_id": 52305439, "comment_id": 91558762, "body": "I have an &#39;update()&#39; function that runs every frame in a while loop, &#39;std::stringstream ss;&#39; is in that."}], "tags": [], "owner": {"reputation": 8002, "user_id": 1143850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2927fac544c9960cd5433688fe4cae1d?s=128&d=identicon&r=PG", "display_name": "Serge", "link": "https://stackoverflow.com/users/1143850/serge"}, "is_accepted": false, "score": 1, "last_activity_date": 1536802228, "creation_date": 1536802228, "answer_id": 52305439, "question_id": 52304869, "link": "https://stackoverflow.com/questions/52304869/memory-increasing-and-stringstream/52305439#52305439", "title": "Memory Increasing and stringstream?", "body": "<p>Every '&lt;&lt;' operator you used for a stringstream variable will cause the latter to allocate memory for the operand. The more operators you use, the more memory will be allocated.</p>\n\n<p>However, when the stringstream var is destroyed, all the memory it allocated will be released back to the system. This is easiest way to free memory. </p>\n\n<p>Usually the stream var is allocated in the scope of a function, used in the function and gets automatically destroyed at return. This way you keep control over the memory use.</p>\n\n<pre><code>string getstring() {\n    stringstream ss;\n    ss &lt;&lt; 12 &lt;&lt; \" nights \" &lt;&lt; ...;\n    return ss.str();\n}\n</code></pre>\n\n<p>The above function will create the stringstream, use some meomry to create the string and destroyes it. </p>\n\n<p>The problem might arise if you make the var global and continue streaming operands into it. Than it could easily behave as a memory leak and will claim more and more memory every time. So, do not do it. Or use other methods for cleaning or reusing its memory (i.e. re-allocatig or reusing streambuf).</p>\n"}], "owner": {"reputation": 33, "user_id": 10336510, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ec561c42b6c7510487fd8f1be7631c2?s=128&d=identicon&r=PG&f=1", "display_name": "coffeemancer", "link": "https://stackoverflow.com/users/10336510/coffeemancer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 161, "favorite_count": 0, "closed_date": 1536832125, "answer_count": 1, "score": 0, "last_activity_date": 1536804305, "creation_date": 1536796325, "last_edit_date": 1536804305, "question_id": 52304869, "link": "https://stackoverflow.com/questions/52304869/memory-increasing-and-stringstream", "closed_reason": "Needs details or clarity", "title": "Memory Increasing and stringstream?", "body": "<p>According to a tutorial on writing dynamic text to screen, I was taught about <code>std::stringstream</code> and that you should use it for now, but I think there are better solutions because somebody said <code>stringstream</code> is not good on memory. The tutorial was never finished and unfortunately as a beginner it's like being left in the middle of an ocean without a boat. My program is exhibiting ever increasing <strong>Process Memory</strong> and by 5 minutes of run time, <strong>Process Memory</strong> is up to ~1gb. I would like to learn more about dynamic text in games and if <code>stringstream</code> is causing this problem</p>\n\n<pre><code>std::stringstream ss;\nif (carrotCount &lt; 20) { ss &lt;&lt; \"Carrots Found: \" &lt;&lt; carrotCount; }\nelse { ss &lt;&lt; \"Found All Carrots!\"; }\nlabel.getComponent&lt;UILabel&gt;().SetLabelText(ss.str(), \"comic\");\n</code></pre>\n"}, {"tags": ["c++", "compiler-errors", "linker-errors", "googletest"], "comments": [{"owner": {"reputation": 1758, "user_id": 8724882, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/d88f8198fb4ae68267aced911e3533f9?s=128&d=identicon&r=PG&f=1", "display_name": "sandwood", "link": "https://stackoverflow.com/users/8724882/sandwood"}, "edited": false, "score": 0, "creation_date": 1536911249, "post_id": 52304804, "comment_id": 91601384, "body": "possible  duplicate of <a href=\"https://stackoverflow.com/questions/19901934/strange-linking-error-dso-missing-from-command-line\" title=\"strange linking error dso missing from command line\">stackoverflow.com/questions/19901934/&hellip;</a> ?"}, {"owner": {"reputation": 46, "user_id": 4244323, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4fe633c3f12c6d5f1a51b38fec7ee34?s=128&d=identicon&r=PG", "display_name": "Alexandre Santana", "link": "https://stackoverflow.com/users/4244323/alexandre-santana"}, "reply_to_user": {"reputation": 1758, "user_id": 8724882, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/d88f8198fb4ae68267aced911e3533f9?s=128&d=identicon&r=PG&f=1", "display_name": "sandwood", "link": "https://stackoverflow.com/users/8724882/sandwood"}, "edited": false, "score": 0, "creation_date": 1537407857, "post_id": 52304804, "comment_id": 91776109, "body": "@sandwood this question you mentioned does not have a solution to my problem. I mentioned I have tried swapping the parameters without success. Sadly, that probably is not what&#39;s going on..."}], "owner": {"reputation": 46, "user_id": 4244323, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4fe633c3f12c6d5f1a51b38fec7ee34?s=128&d=identicon&r=PG", "display_name": "Alexandre Santana", "link": "https://stackoverflow.com/users/4244323/alexandre-santana"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 770, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1536796072, "creation_date": 1536795609, "last_edit_date": 1536796072, "question_id": 52304804, "link": "https://stackoverflow.com/questions/52304804/libgtest-so-error-adding-symbols-dso-missing-from-command-line", "title": "libgtest.so error adding symbols: DSO missing from command line", "body": "<p>I have been using gtests for unit testing a personal project. Last week I upgraded to the LTS version of Linux Mint. Unfortunately, after that event, I haven't been able to compile my project due to gtests linking problems.</p>\n\n<p>The following error is being issued:</p>\n\n<pre><code>/usr/bin/x86_64-linux-gnu-ld: build/tests/policies/roundrobin_tests.o: undefined reference to symbol '_ZN7testing4TestC2Ev'\n/home/myuser/Documents/googletest-release-1.8.0/googletest/libgtest.so: error adding symbols: DSO missing from command line\ncollect2: error: ld returned 1 exit status\n</code></pre>\n\n<p>I have generated both <strong>libgtest.so</strong> and <strong>libgtest_main.so</strong> through CMake 3.10.2. The gtest version is the release-1.8.0, the same I used to have before.</p>\n\n<p>Those libraries are located in /usr/lib and the corresponding include folder has also been copied to /usr/include. I made sure that this location is in my ld path and that is not the problem.</p>\n\n<p>My compiler is g++ v7.3.0 and the command Im using to compile the testes is:</p>\n\n<pre><code>g++ -std=c++14 -Wall -O3 -Iinclude build/tests/policies/roundrobin_tests.o -lgtest_main -pthread -o bin/policies/roundrobin_tests\n</code></pre>\n\n<p>I have tried altering the order of the elements in the command, explicitly adding -L/usr/lib and -I/usr/include without luck. A funny fact is that if I take off the -pthread flag, the error is still the same.</p>\n\n<p>The same command was used before and the only difference is the compiler version I am using now as I used g++ 5.4.0 before. Any insights on how to solve this?</p>\n\n<p><strong>edit:</strong> Just tested the same process with g++ 5.4.0 and CMake 3.5 and the same problems ocurred.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 9602, "user_id": 7151494, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-a_FzvY-b2O0/AAAAAAAAAAI/AAAAAAAAAEw/kNwilSAvQTI/photo.jpg?sz=128", "display_name": "Fureeish", "link": "https://stackoverflow.com/users/7151494/fureeish"}, "edited": false, "score": 1, "creation_date": 1536795432, "post_id": 52304690, "comment_id": 91557049, "body": "Just FYI - 50th Fibonacci&#39;s number is definitely not going to fit in an <code>int</code>"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 2, "creation_date": 1536795987, "post_id": 52304690, "comment_id": 91557163, "body": "First, as others have pointed out, <code>int</code> might not fit <code>fib2(50);</code>, meaning you may have a <code>signed int</code> overflow which is undefined behavior and can cause your program to do anything. Second, your result (should it fit in <code>int</code>) is easily calculable at compile time. The compiler can see that <code>a</code> will always have the same value and can calculate it at compile time. Try taking a user input instead of always calculating the 50th term, then the compiler can&#39;t assume the result. Finally, you never check the type returned by <code>high_resolution_clock::now()</code>. Verify the clock&#39;s <code>rep</code> and <code>period</code>."}, {"owner": {"reputation": 14053, "user_id": 2189130, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/trlri.png?s=128&g=1", "display_name": "kmdreko", "link": "https://stackoverflow.com/users/2189130/kmdreko"}, "edited": false, "score": 0, "creation_date": 1536796245, "post_id": 52304690, "comment_id": 91557213, "body": "consider using <a href=\"https://en.cppreference.com/w/cpp/chrono/duration/duration_cast\" rel=\"nofollow noreferrer\"><code>duration_cast</code></a> to nanoseconds to make sure the count is what you expect."}, {"owner": {"reputation": 11, "user_id": 6465792, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-01fo_kMQqTw/AAAAAAAAAAI/AAAAAAAAAMI/Zi6xA39AoH8/photo.jpg?sz=128", "display_name": "CrazyDeveloper", "link": "https://stackoverflow.com/users/6465792/crazydeveloper"}, "edited": false, "score": 0, "creation_date": 1536797605, "post_id": 52304690, "comment_id": 91557456, "body": "I tried with uint and casted to nanosecond, but again it calculate after printing 0 nanoseconds. It seems like compiler reorder execution. Also I find this: <a href=\"https://stackoverflow.com/questions/26190364/is-it-legal-for-a-c-optimizer-to-reorder-calls-to-clock\" title=\"is it legal for a c optimizer to reorder calls to clock\">stackoverflow.com/questions/26190364/&hellip;</a>"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1536798174, "post_id": 52304690, "comment_id": 91557578, "body": "@CrazyDeveloper What compiler are you using? What compilation flags are you using? Compilers may be allowed to reorder <code>now</code> relative to other code, but no reasonable implementation would allow it. Be sure to try to have your <code>fib2</code> parameter depend on user input to reduce the possibility of optimizations."}, {"owner": {"reputation": 11138, "user_id": 1015327, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/00d71e011fc61cad60c5ffc9bf48c5ef?s=128&d=identicon&r=PG", "display_name": "JimmyB", "link": "https://stackoverflow.com/users/1015327/jimmyb"}, "edited": false, "score": 0, "creation_date": 1536800182, "post_id": 52304690, "comment_id": 91557908, "body": "Try declaring tbegin, a and tend as global volatile variables. That should force the compiler to respect the order of assignment, and probably expression evaluation, in the source code."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1536801859, "post_id": 52304690, "comment_id": 91558175, "body": "Try putting <code>std::atomic_thread_fence(std::memory_order_seq_cst);</code> before and after the <code>int a =</code> line"}], "answers": [{"comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1536797459, "post_id": 52304819, "comment_id": 91557434, "body": "Your example is an improvement on the original code, but it doesn&#39;t show that this is definitively the cause of the problem that OP is seeing. This <i>might</i> be the cause of the problem and it certainly is <i>a</i> problem, but I don&#39;t believe it answers the question. Edit : Though I guess that&#39;s a problem with UB, you can&#39;t really prove that <i>this</i> UB is the source of the problem."}, {"owner": {"reputation": 1802, "user_id": 3421618, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/TQAL7.jpg?s=128&g=1", "display_name": "ProXicT", "link": "https://stackoverflow.com/users/3421618/proxict"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1536797704, "post_id": 52304819, "comment_id": 91557481, "body": "@Fran&#231;oisAndrieux That&#39;s a good point, although I <i>think</i> the problem with the wrong delta time output is caused by the UB, this answer doesn&#39;t really prove it."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1536798381, "post_id": 52304819, "comment_id": 91557607, "body": "OP has commented, stating that passing to <code>unsigned int</code> did not solve the problem. Since <code>unsigned int</code> overflow is well defined there must be another cause for the problem."}, {"owner": {"reputation": 1802, "user_id": 3421618, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/TQAL7.jpg?s=128&g=1", "display_name": "ProXicT", "link": "https://stackoverflow.com/users/3421618/proxict"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1536799254, "post_id": 52304819, "comment_id": 91557756, "body": "@Fran&#231;oisAndrieux Since <code>n</code> may never be lower than <code>2</code>, it may cause a call stack overflow?"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1536799384, "post_id": 52304819, "comment_id": 91557786, "body": "If you are implying infinite recursion, I don&#39;t see how. Though a sufficiently large <code>n</code> may cause a stack overflow. And notice that OP&#39;s output includes the time elapsed but not the result of the Fibonacci calculation."}], "tags": [], "owner": {"reputation": 1802, "user_id": 3421618, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/TQAL7.jpg?s=128&g=1", "display_name": "ProXicT", "link": "https://stackoverflow.com/users/3421618/proxict"}, "is_accepted": false, "score": 2, "last_activity_date": 1536797402, "last_edit_date": 1536797402, "creation_date": 1536795818, "answer_id": 52304819, "question_id": 52304690, "link": "https://stackoverflow.com/questions/52304690/c-optimizer-call-function-after-delay/52304819#52304819", "title": "C++ optimizer call function after delay", "body": "<p>The problem is that the result of this function called with a value of <code>50</code> doesn't fit to the <code>int</code> type, it's just too big. Try using <code>int64_t</code> instead.</p>\n\n<hr>\n\n<p><kbd><a href=\"https://coliru.stacked-crooked.com/a/b2dd227eac0dd52d\" rel=\"nofollow noreferrer\">Live demo</a></kbd> </p>\n\n<p><em>Note that I replaced the original Fibbonachi function with a more optimized one, as the execution took too long and the online tool cuts off the execution after some period of time. That is not a fault of the program or the code, it's just a protection of the online tool.</em></p>\n"}], "owner": {"reputation": 11, "user_id": 6465792, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-01fo_kMQqTw/AAAAAAAAAAI/AAAAAAAAAMI/Zi6xA39AoH8/photo.jpg?sz=128", "display_name": "CrazyDeveloper", "link": "https://stackoverflow.com/users/6465792/crazydeveloper"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1536802762, "creation_date": 1536794485, "last_edit_date": 1536795148, "question_id": 52304690, "link": "https://stackoverflow.com/questions/52304690/c-optimizer-call-function-after-delay", "title": "C++ optimizer call function after delay", "body": "<p>I'm trying to benchmark recursive fibonacci sequence calculator on C++. But surprisingly program outputs 0 nanoseconds, and start calculation after printing result. (CPU usage increase after printing 0 nanoseconds)</p>\n\n<p>I think this is optimization feature of the compiler.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;chrono&gt;\n\nint fib2(int n) {\n    return (n &lt; 2) ? n : fib2(n - 1) + fib2(n - 2);\n}\n\nint main(int argc, char* argv[])\n{\n    auto tbegin = std::chrono::high_resolution_clock::now();\n    int a = fib2(50);\n    auto tend = std::chrono::high_resolution_clock::now();\n\n    std::cout &lt;&lt; (tend - tbegin).count() &lt;&lt; \" nanoseconds\" &lt;&lt; std::endl;\n\n    std::cout &lt;&lt; \"fib =&gt; \" &lt;&lt; a &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>0 nanoseconds\n</code></pre>\n\n<p>Is it feature? If yes, how can I disable this feature?</p>\n"}, {"tags": ["c++", "c++11", "templates", "lambda", "generic-lambda"], "comments": [{"owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "edited": false, "score": 0, "creation_date": 1536794784, "post_id": 52304653, "comment_id": 91556903, "body": "Inlining would actually help in this case, removing the symbols for the lambdas."}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1536795209, "post_id": 52304653, "comment_id": 91557009, "body": "Try putting the struct in an unnamed namespace."}, {"owner": {"reputation": 26838, "user_id": 135769, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/Pghgx.jpg?s=128&g=1", "display_name": "3Dave", "link": "https://stackoverflow.com/users/135769/3dave"}, "edited": false, "score": 1, "creation_date": 1536795248, "post_id": 52304653, "comment_id": 91557018, "body": "Look at your compiler output and find your <i>actual problem</i>. Templates, etc. are syntactic sugar. &quot;Code bloat&quot; is not nearly as relevant now as it was 20 years ago, and storage costs far less than developer time. What is your actual goal here? Your examples do exactly the same thing. IF it compiles, it&#39;s because the compiler will generate different versions for <code>auto</code> as it does for templates. <code>auto</code> does not provide <i>dynamic typing</i>. It&#39;s still a statically-typed language, and you need different versions for different types. Templates, other compiler magic - doesn&#39;t matter."}, {"owner": {"reputation": 1018, "user_id": 5139329, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/158ef694537ec940c35905b4b20062d0?s=128&d=identicon&r=PG", "display_name": "crazypeter", "link": "https://stackoverflow.com/users/5139329/crazypeter"}, "edited": false, "score": 0, "creation_date": 1536795963, "post_id": 52304653, "comment_id": 91557159, "body": "I would assume the latter example doesn&#39;t even compile because the arguments have different types in the different invocations?"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "reply_to_user": {"reputation": 1018, "user_id": 5139329, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/158ef694537ec940c35905b4b20062d0?s=128&d=identicon&r=PG", "display_name": "crazypeter", "link": "https://stackoverflow.com/users/5139329/crazypeter"}, "edited": false, "score": 0, "creation_date": 1536797663, "post_id": 52304653, "comment_id": 91557470, "body": "@crazypeter That&#39;s a feature of generic lambdas."}, {"owner": {"reputation": 2175, "user_id": 966567, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/3b1316baf012590d2d76b8b6f5ce5939?s=128&d=identicon&r=PG", "display_name": "basteln", "link": "https://stackoverflow.com/users/966567/basteln"}, "reply_to_user": {"reputation": 26838, "user_id": 135769, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/Pghgx.jpg?s=128&g=1", "display_name": "3Dave", "link": "https://stackoverflow.com/users/135769/3dave"}, "edited": false, "score": 0, "creation_date": 1536822971, "post_id": 52304653, "comment_id": 91563980, "body": "@3Dave As I wrote, my &quot;actual goal&quot; is to avoid /bigobj. Can you give me a reference to prove that the compiler output (except maybe symbol names) is exactly the same in the two examples? My question is: Since a lambda creates an unnamed class type, does it create symbols in the binary?"}], "answers": [{"comments": [{"owner": {"reputation": 2175, "user_id": 966567, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/3b1316baf012590d2d76b8b6f5ce5939?s=128&d=identicon&r=PG", "display_name": "basteln", "link": "https://stackoverflow.com/users/966567/basteln"}, "edited": false, "score": 0, "creation_date": 1536854904, "post_id": 52316402, "comment_id": 91582718, "body": "Thanks! Good to know."}], "tags": [], "owner": {"reputation": 196, "user_id": 9906422, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-I5AxYpG7Rlk/AAAAAAAAAAI/AAAAAAAAAAA/XHtwEioVLm0/photo.jpg?sz=128", "display_name": "eprom", "link": "https://stackoverflow.com/users/9906422/eprom"}, "is_accepted": true, "score": 1, "last_activity_date": 1536850520, "creation_date": 1536850520, "answer_id": 52316402, "question_id": 52304653, "link": "https://stackoverflow.com/questions/52304653/generic-lambdas-and-binary-size-code-bloat/52316402#52316402", "title": "Generic lambdas and binary size / code bloat", "body": "<p>I think, unfortunately, lambda can't help you solve the problem of code bloat. For your example, like struct S, The compiler will also create three different operator () for lambda.</p>\n\n<p>In order to prove my point of view, I compiled the following program with g++ 8.1.0 on Linux. </p>\n\n<pre><code>int main()\n{\n    const auto l = [](auto... args) { /* ... */ };\n    l(42);\n    l(3.14, \"Hi!\");\n    l(\"Hi!\", 3.14);\n}\n</code></pre>\n\n<p>and then use the <strong>nm</strong> command to view the binary file, the result is as follows:</p>\n\n<p><a href=\"https://i.stack.imgur.com/g4Kky.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/g4Kky.jpg\" alt=\"output of nm command\"></a></p>\n\n<p>It is not difficult to see that the last three lines are the symbols of the three operator (). So, in this case, lambda and struct S are not fundamentally different.</p>\n"}], "owner": {"reputation": 2175, "user_id": 966567, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/3b1316baf012590d2d76b8b6f5ce5939?s=128&d=identicon&r=PG", "display_name": "basteln", "link": "https://stackoverflow.com/users/966567/basteln"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 249, "favorite_count": 0, "accepted_answer_id": 52316402, "answer_count": 1, "score": 1, "last_activity_date": 1563899956, "creation_date": 1536794114, "last_edit_date": 1563899956, "question_id": 52304653, "link": "https://stackoverflow.com/questions/52304653/generic-lambdas-and-binary-size-code-bloat", "title": "Generic lambdas and binary size / code bloat", "body": "<p>What is the difference in the resulting binary, when we compare this code:</p>\n\n<pre><code>struct S {\n    template&lt;typename... Args&gt;\n    void operator()(Args... args) { /* ... */ }\n};\n\n// And then inside some block:\nS s;\ns(42);\ns(3.14, \"Hi!\");\ns(\"Hi!\", 3.14);\n</code></pre>\n\n<p>...to this code:</p>\n\n<pre><code>const auto l = [](auto... args) { /* ... */ };\n\n// And then inside some block:\nl(42);\nl(3.14, \"Hi!\");\nl(\"Hi!\", 3.14);\n</code></pre>\n\n<p>As far as I understand, the <code>struct</code> code creates 3 template instantiations for <code>operator()</code>, all of which appear as symbols in the binary. What about the lambda? The compiler creates an object similar to <code>s</code>. But if it's an unnamed class type, does it create symbols in the binary?</p>\n\n<p><strong>Motivation:</strong> I've used a template-heavy library where I had to enable <a href=\"https://docs.microsoft.com/en-us/cpp/build/reference/bigobj-increase-number-of-sections-in-dot-obj-file?view=vs-2017\" rel=\"nofollow noreferrer\">/bigobj</a>. I would like to avoid that and I'm wondering if lambdas can help against template code bloat. Is this defined in the standard, or dependent on compiler implementation?</p>\n"}, {"tags": ["c++", "language-lawyer", "auto", "variable-declaration"], "comments": [{"owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "edited": false, "score": 0, "creation_date": 1536795126, "post_id": 52304410, "comment_id": 91556995, "body": "I believe <code>[dcl.spec.auto]p5</code> is the critical wording here, feels like the wording should explicitly cover this case but it does not so it ends up being ill-formed."}, {"owner": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "reply_to_user": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "edited": false, "score": 0, "creation_date": 1536795551, "post_id": 52304410, "comment_id": 91557080, "body": "@ShafikYaghmour: If I think logically, <code>b</code> is declared as an <code>int</code>. Then, it is defined as an <code>int</code> (as <code>auto</code> is deduced as <code>int</code>). So it should be well-formed. The standard should say otherwise if it wants this to be ill-formed, just like it does so with functions."}, {"owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "edited": false, "score": 0, "creation_date": 1536795629, "post_id": 52304410, "comment_id": 91557093, "body": "Sure, logically but the standard wording says otherwise ... maybe it is a defect ... not sure yet. I am reaching out to other language lawyers to see but I think my analysis is correct."}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1536798101, "post_id": 52304410, "comment_id": 91557565, "body": "If this were ill formed then this would mean that defining global variable with <code>auto</code> would be ill formed unless you took extraordinary measures to make sure the extern declaration did not appear in the header when included in the same translation unit as the global definition it declares. Which seems a little bit absurd to me."}, {"owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "reply_to_user": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1537020534, "post_id": 52304410, "comment_id": 91636718, "body": "@Galik I recieved a response from Richard Smith on twitter and he seems to agree that clang is correct."}, {"owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "edited": false, "score": 0, "creation_date": 1537020643, "post_id": 52304410, "comment_id": 91636749, "body": "I am requesting a question merge."}], "answers": [{"comments": [{"owner": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "edited": false, "score": 1, "creation_date": 1536794752, "post_id": 52304509, "comment_id": 91556896, "body": "What do you mean by this: &quot;variables can&#39;t be overloaded, so who knows&quot;? Why could it matter in this case that functions can be overloaded?"}, {"owner": {"reputation": 123967, "user_id": 251153, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4b25144c09555e7d5b5e288469e011ef?s=128&d=identicon&r=PG", "display_name": "zneak", "link": "https://stackoverflow.com/users/251153/zneak"}, "reply_to_user": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "edited": false, "score": 0, "creation_date": 1536795207, "post_id": 52304509, "comment_id": 91557008, "body": "@geza, I feel that there is room for more ambiguity when resolving function types than when resolving variable types. If you feel differently, feel free to discard that comment and assume that your construction is illegal."}], "tags": [], "owner": {"reputation": 123967, "user_id": 251153, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4b25144c09555e7d5b5e288469e011ef?s=128&d=identicon&r=PG", "display_name": "zneak", "link": "https://stackoverflow.com/users/251153/zneak"}, "is_accepted": false, "score": 5, "last_activity_date": 1536793339, "last_edit_date": 1536793339, "creation_date": 1536792909, "answer_id": 52304509, "question_id": 52304410, "link": "https://stackoverflow.com/questions/52304410/is-it-well-formed-if-i-redefine-a-variable-as-auto-and-the-deduced-type-is-the/52304509#52304509", "title": "Is it well-formed, if I redefine a variable as auto, and the deduced type is the same?", "body": "<p><a href=\"https://godbolt.org/z/ZbbFTq\" rel=\"nofollow noreferrer\">Clang</a>, <a href=\"https://godbolt.org/z/Ycirqy\" rel=\"nofollow noreferrer\">GCC</a>, <a href=\"https://godbolt.org/z/4200cr\" rel=\"nofollow noreferrer\">MSVC</a>. (This answer previous stated that all 3 compilers would refuse to build it, but that was incorrect.)</p>\n\n<p><a href=\"http://eel.is/c++draft/dcl.spec.auto\" rel=\"nofollow noreferrer\">dcl.spec.auto</a> does not address the compatibility of multiple declarations of the same variable when mixing the <code>auto</code> type specifier with other type specifiers. However, it <a href=\"http://eel.is/c++draft/dcl.spec.auto#11\" rel=\"nofollow noreferrer\">addresses it for function return types</a>:</p>\n\n<pre><code>auto f();\nauto f() { return 42; } // return type is int\nauto f();               // OK\nint f();                // error, cannot be overloaded with auto f()\ndecltype(auto) f();     // error, auto and decltype(auto) don't match\n</code></pre>\n\n<p>So my intuition is that this is an oversight in the standard and the behavior is currently unspecified, but if/when it gets specified, there would be precedent to make it illegal. (On the other hand, variables can't be overloaded, so who knows.)</p>\n"}, {"comments": [{"owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "edited": false, "score": 0, "creation_date": 1536905987, "post_id": 52304618, "comment_id": 91598882, "body": "As already said, I don&#39;t see how [dcl.spec.auto]p5 applies here. <code>auto b = a;</code> is a valid use of <code>auto</code>."}, {"owner": {"reputation": 67968, "user_id": 584192, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YBSIc.png?s=128&g=1", "display_name": "Samuel Liew", "link": "https://stackoverflow.com/users/584192/samuel-liew"}, "edited": false, "score": 1, "creation_date": 1538031270, "post_id": 52304618, "comment_id": 92001530, "body": "You can repost on the duplicate and delete this answer if you wish. Alternatively, you can provide a shorter answer here linking to a more generic/broad answer on the duplicate."}], "tags": [], "owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "is_accepted": true, "score": 3, "last_activity_date": 1538426762, "last_edit_date": 1592644375, "creation_date": 1536793887, "answer_id": 52304618, "question_id": 52304410, "link": "https://stackoverflow.com/questions/52304410/is-it-well-formed-if-i-redefine-a-variable-as-auto-and-the-deduced-type-is-the/52304618#52304618", "title": "Is it well-formed, if I redefine a variable as auto, and the deduced type is the same?", "body": "<h3>Tl;DR;</h3>\n<p>clang is correct, the logic is that this is allowed by <code>[dcl.spec.auto]</code> and to restrict this for deduced return types <a href=\"http://eel.is/c++draft/dcl.spec.auto#11\" rel=\"nofollow noreferrer\">[dcl.spec.auto]p11</a> was added otherwise there is no restriction and therefore this is not restricted for the variables case.</p>\n<p>See <a href=\"https://stackoverflow.com/a/52598631/1708801\">my more complete answer in the duplicate</a></p>\n"}], "owner": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 325, "favorite_count": 1, "closed_date": 1536798737, "accepted_answer_id": 52304618, "answer_count": 2, "score": 11, "last_activity_date": 1538426762, "creation_date": 1536792105, "last_edit_date": 1536793446, "question_id": 52304410, "link": "https://stackoverflow.com/questions/52304410/is-it-well-formed-if-i-redefine-a-variable-as-auto-and-the-deduced-type-is-the", "closed_reason": "Duplicate", "title": "Is it well-formed, if I redefine a variable as auto, and the deduced type is the same?", "body": "<p>Look at this snippet:</p>\n\n<pre><code>int a;\nextern int b;\nauto b = a;\n</code></pre>\n\n<p>Is it well-formed? Clang successfully compiles it, but GCC and MSVC don't.</p>\n\n<p>(This issue has come up when I answered <a href=\"https://stackoverflow.com/questions/51493143/how-to-declare-and-define-a-static-member-with-deduced-type\">How to declare and define a static member with deduced type?</a>)</p>\n"}, {"tags": ["c++", "namespaces"], "comments": [{"owner": {"reputation": 2298, "user_id": 6427477, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oYQ8Y.png?s=128&g=1", "display_name": "C.M.", "link": "https://stackoverflow.com/users/6427477/c-m"}, "edited": false, "score": 4, "creation_date": 1536790833, "post_id": 52304243, "comment_id": 91556011, "body": "Because iostreams libraray doesn&#39;t know how to print value of type <code>void</code>. Silly library..."}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1536791013, "post_id": 52304243, "comment_id": 91556078, "body": "Please adjust the indentation in the code. As currently written it&#39;s very confusing."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1536791139, "post_id": 52304243, "comment_id": 91556111, "body": "A function that returns <code>void</code> returns nothing. As such there is nothing to print."}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 3, "creation_date": 1536791157, "post_id": 52304243, "comment_id": 91556117, "body": "It&#39;s nothing to do with namespaces. <b><i>What</i></b> is <code>cout &lt;&lt; ns2::pp() &lt;&lt; endl;</code> supposed to print?"}], "answers": [{"comments": [{"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 0, "creation_date": 1536792749, "post_id": 52304468, "comment_id": 91556498, "body": "You cannot write a function which takes in <code>void</code> as an argument. Writing an <code>operator&lt;&lt;</code> that &quot;handles <code>void</code>&quot; is impossible"}, {"owner": {"reputation": 13, "user_id": 10355629, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04f1c5899031ef5d3bc404f438e31b79?s=128&d=identicon&r=PG&f=1", "display_name": "proceooo", "link": "https://stackoverflow.com/users/10355629/proceooo"}, "edited": false, "score": 0, "creation_date": 1536853371, "post_id": 52304468, "comment_id": 91581878, "body": "Thanks ! I started learning c++ few days ago so I did not think about all you mentioned! By the way, what is the overload for the class ??"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "reply_to_user": {"reputation": 13, "user_id": 10355629, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04f1c5899031ef5d3bc404f438e31b79?s=128&d=identicon&r=PG&f=1", "display_name": "proceooo", "link": "https://stackoverflow.com/users/10355629/proceooo"}, "edited": false, "score": 0, "creation_date": 1536860870, "post_id": 52304468, "comment_id": 91585725, "body": "@proceooo If you have just started learning C++ it may be too soon to be worrying about operator overloading to handle custom classes. The first thing you need is a decent grip on <a href=\"https://stackoverflow.com/a/11912039/4581301\">overloading and overriding</a> in general. Both should be covered in detail in a good C++ text. If you don&#39;t have a <a href=\"https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list\">good C++ reference, get one</a>. C++ is very hard to learn from Internet tutorials and trial and error. Some call it impossible."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1536861738, "post_id": 52304468, "comment_id": 91586129, "body": "Once you get what&#39;s going on with overloads, give <a href=\"https://stackoverflow.com/questions/4421706/what-are-the-basic-rules-and-idioms-for-operator-overloading\">What are the basic rules and idioms for operator overloading?</a> a read-through. It has an excellent section on writing streaming operators for your classes and packs quite a bit of added wisdom and technique about other related problems."}, {"owner": {"reputation": 13, "user_id": 10355629, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04f1c5899031ef5d3bc404f438e31b79?s=128&d=identicon&r=PG&f=1", "display_name": "proceooo", "link": "https://stackoverflow.com/users/10355629/proceooo"}, "edited": false, "score": 0, "creation_date": 1536866072, "post_id": 52304468, "comment_id": 91588119, "body": "@user4581301 Thank you so much! I will read through one by one !"}], "tags": [], "owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "is_accepted": true, "score": 0, "last_activity_date": 1536793272, "last_edit_date": 1536793272, "creation_date": 1536792579, "answer_id": 52304468, "question_id": 52304243, "link": "https://stackoverflow.com/questions/52304243/c-error-to-call-void-function-in-namespace/52304468#52304468", "title": "C++ error to call void function in namespace", "body": "<p>First, let's reduce the problem to a <a href=\"https://stackoverflow.com/help/mcve\">MCVE</a> and remove as much noise as possible from the program.</p>\n\n<pre><code>#include &lt;iostream&gt;\nvoid pp()\n{\n}\n\nint main()\n{\n    std::cout &lt;&lt; pp();\n}\n</code></pre>\n\n<p>This produces the exact same error with no namespaces or other distractions. </p>\n\n<p>The crux of the problem is <code>pp</code> returns <code>void</code>, that is nothing, from the function. Since nothing is returned, there is nothing to output. </p>\n\n<p>Because writing an output function that outputs nothing is essentially wasted programmer time, no one has seen fit to specify that standard library implementors must implement an <code>operator&lt;&lt;</code> that handles <code>void</code>. As Justin points out in the comments below you can't use <code>void</code> as a function parameter because variables of type <code>void</code> cannot be instantiated. This makes it not just a waste of time but impossible.</p>\n\n<p>You will find you will have a similar problem with custom classes. Unless someone has taken the time to write a <code>&lt;&lt;</code> overload for the class, the class cannot be printed unless it can first be converted into a class or datatype that can be printed.</p>\n\n<p>In the case of Standard Library containers there is no agreed upon default way a container should be output, so there are no built-in <code>&lt;&lt;</code> overloads for the library containers. This is often a shock the first time you try to print a <code>std::vector</code>.</p>\n"}], "owner": {"reputation": 13, "user_id": 10355629, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04f1c5899031ef5d3bc404f438e31b79?s=128&d=identicon&r=PG&f=1", "display_name": "proceooo", "link": "https://stackoverflow.com/users/10355629/proceooo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 285, "favorite_count": 0, "accepted_answer_id": 52304468, "answer_count": 1, "score": 0, "last_activity_date": 1536793272, "creation_date": 1536790762, "last_edit_date": 1536791082, "question_id": 52304243, "link": "https://stackoverflow.com/questions/52304243/c-error-to-call-void-function-in-namespace", "title": "C++ error to call void function in namespace", "body": "<p>I just started learning c++ and got an error while doing practicing. I was practicing using namespace and cin, cout. </p>\n\n<p>I tried to print out the function of each namespace by each input. Here below is the code I wrote :</p>\n\n<pre><code>#include \"iostream\"\n\nusing namespace std;\n\nnamespace ns1\n{\n    int pp()\n    {\n        int x = 1;\n        for (int i = 0; i &lt; 9; i++)\n        {\n            cout &lt;&lt; x &lt;&lt; endl;\n            x++;\n        }\n        return 0;\n    }\n}\nnamespace ns2\n{\n    void pp()\n    {\n        double x = 2;\n        while (x &lt; 6)\n        {\n            cout &lt;&lt; x &lt;&lt; endl;\n            x += 1.7;\n        }\n    }\n}\nint main()\n{\n    bool check = 0;\n    cout &lt;&lt; \"Type 0 or 1 then you will have the following answer\" &lt;&lt; endl;\n    cin &gt;&gt; check;\n    if (check == 0)\n    {\n        cout &lt;&lt; ns1::pp() &lt;&lt; endl;\n    }\n    else\n    {\n        cout &lt;&lt; ns2::pp() &lt;&lt; endl;\n    }\n    return 0;\n}\n</code></pre>\n\n<p>I don't know why void pp() cannot be printed out.</p>\n\n<p>Could anyone let me know why it happens?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 9602, "user_id": 7151494, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-a_FzvY-b2O0/AAAAAAAAAAI/AAAAAAAAAEw/kNwilSAvQTI/photo.jpg?sz=128", "display_name": "Fureeish", "link": "https://stackoverflow.com/users/7151494/fureeish"}, "edited": false, "score": 1, "creation_date": 1536790545, "post_id": 52304089, "comment_id": 91555936, "body": "Have you tried debugging your code with a debugger?"}, {"owner": {"reputation": 47, "user_id": 9898325, "user_type": "registered", "profile_image": "https://graph.facebook.com/1530562710402763/picture?type=large", "display_name": "Levon  Muradyan", "link": "https://stackoverflow.com/users/9898325/levon-muradyan"}, "reply_to_user": {"reputation": 9602, "user_id": 7151494, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-a_FzvY-b2O0/AAAAAAAAAAI/AAAAAAAAAEw/kNwilSAvQTI/photo.jpg?sz=128", "display_name": "Fureeish", "link": "https://stackoverflow.com/users/7151494/fureeish"}, "edited": false, "score": 0, "creation_date": 1536790676, "post_id": 52304089, "comment_id": 91555969, "body": "I always debugg in my mind,because it&#39;s more efficiant for me :)"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 1, "creation_date": 1536790761, "post_id": 52304089, "comment_id": 91555997, "body": "split your function, one for permutation iteration, one to compute the <a href=\"https://en.wikipedia.org/wiki/Hamming_distance\" rel=\"nofollow noreferrer\">Hamming distance</a>."}, {"owner": {"reputation": 5162, "user_id": 2785528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fc85984f1234637fa4ec24d93ae51bc?s=128&d=identicon&r=PG&f=1", "display_name": "2785528", "link": "https://stackoverflow.com/users/2785528/2785528"}, "edited": false, "score": 0, "creation_date": 1536791044, "post_id": 52304089, "comment_id": 91556089, "body": "I expected a swap somewhere?  (i.e. re-arrangement)"}, {"owner": {"reputation": 1680, "user_id": 5282154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a468ae12f72b587ad0c4e89ffde11839?s=128&d=identicon&r=PG", "display_name": "doug", "link": "https://stackoverflow.com/users/5282154/doug"}, "edited": false, "score": 0, "creation_date": 1536791171, "post_id": 52304089, "comment_id": 91556122, "body": "Go through each string and compute the hamming distance for the others. If, for each string tested, any are 0 or all are 2 or more then it&#39;s not possible, otherwise it is."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 2, "creation_date": 1536791489, "post_id": 52304089, "comment_id": 91556194, "body": "<i>I always debugg in my mind,because it&#39;s more efficiant for me :)</i> I salute your tenaciousness, but it doesn&#39;t appear to be working particularly well in this case. Might I recommend being pragmatic and using all of the tools at your disposal?"}, {"owner": {"reputation": 4562, "user_id": 9254539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b45538511384660bfaef5092e30b7ea?s=128&d=identicon&r=PG&f=1", "display_name": "BessieTheCookie", "link": "https://stackoverflow.com/users/9254539/bessiethecookie"}, "edited": false, "score": 0, "creation_date": 1536791542, "post_id": 52304089, "comment_id": 91556207, "body": "The fact that you&#39;ve tried to debug this for your mind for four hours but still can&#39;t find the bug proves that you can&#39;t efficiently debug with your mind. Debuggers are there for a reason. Use it, It will make your life a ton easier."}, {"owner": {"reputation": 47, "user_id": 9898325, "user_type": "registered", "profile_image": "https://graph.facebook.com/1530562710402763/picture?type=large", "display_name": "Levon  Muradyan", "link": "https://stackoverflow.com/users/9898325/levon-muradyan"}, "edited": false, "score": 0, "creation_date": 1536792212, "post_id": 52304089, "comment_id": 91556372, "body": "Thank you for your advise,i will remember,but i hate debugger and never use it for 2 years,since i am a programmer i always use my mind to debugg,and it never gives me ,what about this problem ,i know that i can find the mistake,but i have a little time,i hoped that you can help me ."}, {"owner": {"reputation": 1018, "user_id": 5139329, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/158ef694537ec940c35905b4b20062d0?s=128&d=identicon&r=PG", "display_name": "crazypeter", "link": "https://stackoverflow.com/users/5139329/crazypeter"}, "edited": false, "score": 0, "creation_date": 1536796074, "post_id": 52304089, "comment_id": 91557176, "body": "Looks like homework to me..."}], "answers": [{"comments": [{"owner": {"reputation": 47, "user_id": 9898325, "user_type": "registered", "profile_image": "https://graph.facebook.com/1530562710402763/picture?type=large", "display_name": "Levon  Muradyan", "link": "https://stackoverflow.com/users/9898325/levon-muradyan"}, "edited": false, "score": 0, "creation_date": 1536792671, "post_id": 52304434, "comment_id": 91556480, "body": "the result of isAnRearrangement({&quot;aa&quot;, &quot;ab&quot;, &quot;bb&quot;}) is True"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "reply_to_user": {"reputation": 47, "user_id": 9898325, "user_type": "registered", "profile_image": "https://graph.facebook.com/1530562710402763/picture?type=large", "display_name": "Levon  Muradyan", "link": "https://stackoverflow.com/users/9898325/levon-muradyan"}, "edited": false, "score": 0, "creation_date": 1536793121, "post_id": 52304434, "comment_id": 91556558, "body": "@LevonMuradyan: I know that expected result is <code>true</code>, and that my implementation returns <code>true</code> too. I would just explain that the sub-problem can be tested alone with different input and be debugged alone. so for wrong result with <code>stringsRearrangement</code>, you may test when <code>isAnArrangement</code> fails and so on."}, {"owner": {"reputation": 47, "user_id": 9898325, "user_type": "registered", "profile_image": "https://graph.facebook.com/1530562710402763/picture?type=large", "display_name": "Levon  Muradyan", "link": "https://stackoverflow.com/users/9898325/levon-muradyan"}, "edited": false, "score": 0, "creation_date": 1536793905, "post_id": 52304434, "comment_id": 91556721, "body": "Thank you @Jarod42 ,i found the mistake,as you said the value of <code>i&#47;j</code> would be respectively <code>v.size()-1</code> and <code>v[0].size()</code>.But i don&#39;t understand why <code>i</code> an <code>j</code> increase by 1 when in cycle last <code>i</code> was <code>v.size()-2</code> and <code>j</code> was <code>v[0].size()-1</code>?"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "reply_to_user": {"reputation": 47, "user_id": 9898325, "user_type": "registered", "profile_image": "https://graph.facebook.com/1530562710402763/picture?type=large", "display_name": "Levon  Muradyan", "link": "https://stackoverflow.com/users/9898325/levon-muradyan"}, "edited": false, "score": 0, "creation_date": 1536796381, "post_id": 52304434, "comment_id": 91557235, "body": "@LevonMuradyan: Way to thanks is the upvote. There is also one answer to accept if it solves your issue (yours is ok BTW)."}, {"owner": {"reputation": 47, "user_id": 9898325, "user_type": "registered", "profile_image": "https://graph.facebook.com/1530562710402763/picture?type=large", "display_name": "Levon  Muradyan", "link": "https://stackoverflow.com/users/9898325/levon-muradyan"}, "edited": false, "score": 0, "creation_date": 1536798629, "post_id": 52304434, "comment_id": 91557653, "body": "I can&#39;t ,my reputation less than 15,so i can&#39;t upvote any answer"}], "tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": false, "score": 1, "last_activity_date": 1536792755, "last_edit_date": 1536792755, "creation_date": 1536792311, "answer_id": 52304434, "question_id": 52304089, "link": "https://stackoverflow.com/questions/52304089/given-an-array-of-equal-length-strings/52304434#52304434", "title": "Given an array of equal-length strings", "body": "<p>Split your function by sub-problem to simplify the code:</p>\n\n<pre><code>std::size_t hamming_distance(const std::string&amp; s1, const std::string&amp; s2)\n{\n    std::size_t res = 0;\n    for (std::size_t i = 0; i != s1.size(); ++i) {\n        res += s1[i] != s2[i];\n    }\n    return res;\n#if 0 // or in C++17\n    return std::transform_reduce(\n        s1.begin(), s1.end(),\n        s2.begin(),\n        0u,\n        std::not_equal_to&lt;&gt;{},\n        std::plus&lt;&gt;{});\n#endif\n}\n\nbool isAnRearrangement(const std::vector&lt;std::string&gt;&amp; v)\n{\n    return std::adjacent_find(v.begin(), v.end(),\n                              [](const std::string&amp; s1, const std::string&amp; s2){\n                                  return hamming_distance(s1, s2) != 1;   \n                              }) == v.end();\n}\n\nbool stringsRearrangement(std::vector&lt;std::string&gt; v) {\n    std::sort(v.begin(), v.end());\n    do {\n        if (isAnRearrangement(v)) {\n            return true;\n        }\n    } while (std::next_permutation(v.begin(),v.end()));\n    return false;\n}\n</code></pre>\n\n<p><a href=\"https://ideone.com/LnKeFp\" rel=\"nofollow noreferrer\">Demo</a></p>\n\n<p>Then you might test each part easily:</p>\n\n<ul>\n<li>Do you compute correctly <code>hamming_distance(\"aba\", \"bbb\")</code> ?</li>\n<li>Which is the result of  <code>isAnRearrangement({\"aa\", \"ab\", \"bb\"})</code> ?</li>\n<li>and so on...</li>\n</ul>\n\n<p>For your code, you break your loop in case of error, and so your condition is to check that the loop ends without break at the end, but value of <code>i</code>/<code>j</code> would be respectively <code>v.size()-1</code> and <code>v[0].size()</code>. So with sub function, you would just have <code>return false;</code> instead of <code>break;</code> and <code>return true;</code> instead of your conditional <code>return true;</code>.</p>\n\n<p><a href=\"https://ideone.com/PEY1b1\" rel=\"nofollow noreferrer\">Demo</a></p>\n"}, {"comments": [{"owner": {"reputation": 47, "user_id": 9898325, "user_type": "registered", "profile_image": "https://graph.facebook.com/1530562710402763/picture?type=large", "display_name": "Levon  Muradyan", "link": "https://stackoverflow.com/users/9898325/levon-muradyan"}, "edited": false, "score": 0, "creation_date": 1536793436, "post_id": 52304539, "comment_id": 91556636, "body": "When i use <code>break</code> in <code>for(i=0;i&lt;v.size()-1;i++)</code> ,why <code>i</code> increase by 1?"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1536795064, "post_id": 52304539, "comment_id": 91556972, "body": "For <code>int i; for (i = 0; i != 42; ++i) {}</code> final value of <code>i</code> is <code>42</code> . the first value for which <code>i != 42</code> is <code>false</code> and so stop the loop."}], "tags": [], "owner": {"reputation": 47, "user_id": 9898325, "user_type": "registered", "profile_image": "https://graph.facebook.com/1530562710402763/picture?type=large", "display_name": "Levon  Muradyan", "link": "https://stackoverflow.com/users/9898325/levon-muradyan"}, "is_accepted": false, "score": 0, "last_activity_date": 1536793629, "last_edit_date": 1536793629, "creation_date": 1536793166, "answer_id": 52304539, "question_id": 52304089, "link": "https://stackoverflow.com/questions/52304089/given-an-array-of-equal-length-strings/52304539#52304539", "title": "Given an array of equal-length strings", "body": "<p>Yeah i found the mistake. Value of <code>i/j</code> would be respectively <code>v.size()-1</code> and <code>v[0].size()</code>.Below is the correct code that real working,thank you Jarod42</p>\n\n<pre><code>bool stringsRearrangement(std::vector&lt;std::string&gt; v) {\n    sort(v.begin(), v.end());\n    int i,j,count=0;\n    do {\n        for(i=0;i&lt;v.size()-1;i++) {\n            count=0; \n            for(j=0;j&lt;v[0].size();j++) \n                if(v[i][j]!=v[i+1][j]) {\n                    count++;\n                    if(count==2)\n                        break;\n                }\n            if(count!=1) \n                break;\n\n        }\n        if(i==v.size()-1 &amp;&amp; j==v[0].size() &amp;&amp; count==1)\n            return true;\n\n    } while(next_permutation(v.begin(),v.end()));\n\n    return false;\n}\n</code></pre>\n"}], "owner": {"reputation": 47, "user_id": 9898325, "user_type": "registered", "profile_image": "https://graph.facebook.com/1530562710402763/picture?type=large", "display_name": "Levon  Muradyan", "link": "https://stackoverflow.com/users/9898325/levon-muradyan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1265, "favorite_count": 0, "answer_count": 2, "score": -5, "last_activity_date": 1601871947, "creation_date": 1536789767, "last_edit_date": 1536791346, "question_id": 52304089, "link": "https://stackoverflow.com/questions/52304089/given-an-array-of-equal-length-strings", "title": "Given an array of equal-length strings", "body": "<p>Given an array of equal-length strings, check if it is possible to rearrange the strings in such a way that after the rearrangement the strings at consecutive positions would differ by exactly one character.</p>\n\n<p>Example</p>\n\n<p>For inputArray = [\"aba\", \"bbb\", \"bab\"], the output should be\nstringsRearrangement(inputArray) = false.</p>\n\n<p>All rearrangements don't satisfy the description condition.</p>\n\n<p>For inputArray = [\"ab\", \"bb\", \"aa\"], the output should be\nstringsRearrangement(inputArray) = true.</p>\n\n<p>Strings can be rearranged in the following way: \"aa\", \"ab\", \"bb\".</p>\n\n<p>THE CODE:</p>\n\n<pre><code>    bool stringsRearrangement(std::vector&lt;std::string&gt; v) {\n    sort(v.begin(), v.end());\n    int i,j,count=0;\n    do {\n        for(i=0;i&lt;v.size()-1;i++) {\n            count=0; \n            for(j=0;j&lt;v[0].size();j++) \n                if(v[i][j]!=v[i+1][j]) {\n                    count++;\n                    if(count==2)\n                        break;\n                }\n            if(count!=1) \n                break;\n\n        }\n        if(i==v.size()-2 &amp;&amp; j==v[0].size()-1 &amp;&amp; count==1)\n            return true;\n\n    } while(next_permutation(v.begin(),v.end()));\n\n    return false;\n}\n</code></pre>\n\n<p>The code not work for example <code>inputArray: [\"ab\", \"bb\", \"aa\"]</code> or <code>inputArray: [\"a\", \"b\", \"c\"]</code>,after 4 hours thinking can't find the mistake.</p>\n"}, {"tags": ["c++", "c++17", "variadic-templates"], "answers": [{"comments": [{"owner": {"reputation": 3669, "user_id": 151150, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f94204ef0e70b23ad7653348b1e9e3c2?s=128&d=identicon&r=PG", "display_name": "PiotrK", "link": "https://stackoverflow.com/users/151150/piotrk"}, "edited": false, "score": 0, "creation_date": 1536790333, "post_id": 52304116, "comment_id": 91555875, "body": "Nice, I&#39;ve upvoted that - but @Jarod42 answer is just shorter :)"}, {"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "reply_to_user": {"reputation": 3669, "user_id": 151150, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f94204ef0e70b23ad7653348b1e9e3c2?s=128&d=identicon&r=PG", "display_name": "PiotrK", "link": "https://stackoverflow.com/users/151150/piotrk"}, "edited": false, "score": 1, "creation_date": 1536790548, "post_id": 52304116, "comment_id": 91555937, "body": "@PiotrK Indeed. The only real benefit this answer provides is that it enables partial application. I also have a hunch that this <i>might</i> be faster in terms of how long it takes to compile, but it depends on how the templated variable works and how often you call them with different values; I&#39;d have to measure to be sure."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 1, "creation_date": 1536796679, "post_id": 52304116, "comment_id": 91557310, "body": "@Justin: as <code>value</code> to check in both cases are not part of template value, it should not create extra instantiations and so I expect similar compilation time. But as you said, the only ways to be sure is to measure."}], "tags": [], "owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "is_accepted": false, "score": 8, "last_activity_date": 1536789915, "creation_date": 1536789915, "answer_id": 52304116, "question_id": 52304068, "link": "https://stackoverflow.com/questions/52304068/how-to-find-out-if-integer-sequence-contains-given-number-in-compile-time/52304116#52304116", "title": "How to find out if integer_sequence contains given number in compile-time?", "body": "<p>Unpack the integers and use a fold expression:</p>\n\n<pre><code>template &lt;typename AllowedIntegers&gt;\nstruct contains\n{};\n\ntemplate &lt;typename Int, Int... Is&gt;\nstruct contains&lt;std::integer_sequence&lt;Int, Is...&gt;&gt;\n{\n    template &lt;Int value&gt;\n    static constexpr bool contains = ((value == Is) || ...);\n};\n\n// ...\n\ntemplate &lt;int arg&gt;\nvoid foo()\n{\n    static_assert(contains&lt;allowed_args_t&gt;::contains&lt;arg&gt;);\n}\n</code></pre>\n\n<p><a href=\"https://godbolt.org/z/bkW-cS\" rel=\"noreferrer\">Godbolt link</a></p>\n"}, {"comments": [{"owner": {"reputation": 3669, "user_id": 151150, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f94204ef0e70b23ad7653348b1e9e3c2?s=128&d=identicon&r=PG", "display_name": "PiotrK", "link": "https://stackoverflow.com/users/151150/piotrk"}, "edited": false, "score": 0, "creation_date": 1536790281, "post_id": 52304126, "comment_id": 91555862, "body": "Thanks, I was not aware that unpacking <code>...</code> can be used in such way! I&#39;ll accept this in 5 minutes (I seriously don&#39;t know who added such limitation onto StackOverflow...)"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "reply_to_user": {"reputation": 3669, "user_id": 151150, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f94204ef0e70b23ad7653348b1e9e3c2?s=128&d=identicon&r=PG", "display_name": "PiotrK", "link": "https://stackoverflow.com/users/151150/piotrk"}, "edited": false, "score": 1, "creation_date": 1536790363, "post_id": 52304126, "comment_id": 91555883, "body": "Fold expression has been added in C++17, and requires around parenthesis."}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 2, "creation_date": 1536806243, "post_id": 52304126, "comment_id": 91559084, "body": "Will be nice to have template lambdas in C++20 so we can do this all inline: <a href=\"https://wandbox.org/permlink/hT6R6SxcEQtVFcsj\" rel=\"nofollow noreferrer\">wandbox.org/permlink/hT6R6SxcEQtVFcsj</a>"}], "tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": true, "score": 13, "last_activity_date": 1536845345, "last_edit_date": 1536845345, "creation_date": 1536789992, "answer_id": 52304126, "question_id": 52304068, "link": "https://stackoverflow.com/questions/52304068/how-to-find-out-if-integer-sequence-contains-given-number-in-compile-time/52304126#52304126", "title": "How to find out if integer_sequence contains given number in compile-time?", "body": "<p>You might want to use:</p>\n\n<pre><code>template &lt;int ... Is&gt;\nconstexpr bool is_in(int i, std::integer_sequence&lt;int, Is...&gt;)\n{\n    return ((i == Is) || ...);\n}\n\n\ntypedef std::integer_sequence&lt;int, 0, 4, 7&gt; allowed_args_t;\n\n\ntemplate&lt;int arg&gt; void foo()\n{\n    static_assert(is_in(arg, allowed_args_t{}));\n}\n</code></pre>\n"}], "owner": {"reputation": 3669, "user_id": 151150, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f94204ef0e70b23ad7653348b1e9e3c2?s=128&d=identicon&r=PG", "display_name": "PiotrK", "link": "https://stackoverflow.com/users/151150/piotrk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 199, "favorite_count": 0, "accepted_answer_id": 52304126, "answer_count": 2, "score": 4, "last_activity_date": 1536845345, "creation_date": 1536789610, "question_id": 52304068, "link": "https://stackoverflow.com/questions/52304068/how-to-find-out-if-integer-sequence-contains-given-number-in-compile-time", "title": "How to find out if integer_sequence contains given number in compile-time?", "body": "<p>Given:</p>\n\n<pre><code>typedef std::integer_sequence&lt;int, 0,4,7&gt; allowed_args_t;\n</code></pre>\n\n<p>and:</p>\n\n<pre><code>template&lt;int arg&gt; void foo()\n{\n    static_assert( /*fire if arg not in allowed_args_t!*/ )\n}\n</code></pre>\n\n<p>How should I write that <code>static_assert</code> to be as cheap as possible in compile-time?</p>\n\n<p>I'm using C++17.</p>\n"}, {"tags": ["c++", "pointers", "boost-spirit"], "answers": [{"tags": [], "owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "is_accepted": true, "score": 2, "last_activity_date": 1536823470, "creation_date": 1536823470, "answer_id": 52308555, "question_id": 52303985, "link": "https://stackoverflow.com/questions/52303985/are-boostspirit-pointer-attributes-initialized-with-nullptr/52308555#52308555", "title": "Are boost::spirit pointer attributes initialized with nullptr?", "body": "<blockquote>\n  <p>does boost::spirit actually take care of initializing pointer-type attributes?</p>\n</blockquote>\n\n<p>Effectively, yes.</p>\n\n<p>Spirit uses a <code>make_attribute</code>. The comment seems to indicate this would only happen for semantic actions, but it's actually also used inside the <code>rule</code> parser (but what gets passed to subparser expressions might be transformed).</p>\n\n<p><code>make_attribute</code> uses the <a href=\"https://www.boost.org/doc/libs/1_68_0/libs/utility/value_init.htm\" rel=\"nofollow noreferrer\"><code>boost::value_initialized</code> trait</a>:</p>\n\n<blockquote>\n  <p>Constructing and initializing objects in a generic way is difficult in C++. The problem is that there are several different rules that apply for initialization. Depending on the type, the value of a newly constructed object can be zero-initialized (logically 0), default-constructed (using the default constructor), or indeterminate. When writing generic code, this problem must be addressed. The template value_initialized provides a solution with consistent syntax for value initialization of scalar, union and class types. Moreover, value_initialized offers a workaround to various compiler issues regarding value-initialization. Furthermore, a const object, initialized_value is provided, to avoid repeating the type name when retrieving the value from a value_initialized object. </p>\n</blockquote>\n\n<p>So, barring any custom defined specializations in your code, the default behavior does offer value-initialization.</p>\n"}], "owner": {"reputation": 1955, "user_id": 1162878, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p0Kk8.jpg?s=128&g=1", "display_name": "Victor Matar&#233;", "link": "https://stackoverflow.com/users/1162878/victor-matar%c3%a9"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "accepted_answer_id": 52308555, "answer_count": 1, "score": 1, "last_activity_date": 1536823470, "creation_date": 1536789086, "question_id": 52303985, "link": "https://stackoverflow.com/questions/52303985/are-boostspirit-pointer-attributes-initialized-with-nullptr", "title": "Are boost::spirit pointer attributes initialized with nullptr?", "body": "<p>I think I saw in a debugger somewhere that a <code>boost::spirit</code> attribute of some pointer-type was set to <code>nullptr</code>, but I didn't do that. Was that just coincidence or does <code>boost::spirit</code> actually take care of initializing pointer-type attributes?</p>\n\n<p>Currently I put an <code>eps [ _val = nullptr ]</code> at the start of a rule when I need to be sure, but it would be nice to know so I could omit that.</p>\n"}, {"tags": ["c++", "validation"], "comments": [{"owner": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "edited": false, "score": 0, "creation_date": 1536787399, "post_id": 52303608, "comment_id": 91554948, "body": "Don&#39;t use <code>std::endl</code> when all you want to say is <code>&#39;\\n&#39;</code> (<code>&quot;...\\n...&quot;</code>). If you *really* want to flush the stream then be explicit and use <code>std::flush</code>. Also, <code>std::getline()</code> and <code>std::cin</code> are not declared in <code>&lt;cctype&gt;</code>"}, {"owner": {"reputation": 2055, "user_id": 6564148, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u3HL5.png?s=128&g=1", "display_name": "George", "link": "https://stackoverflow.com/users/6564148/george"}, "edited": false, "score": 3, "creation_date": 1536787626, "post_id": 52303608, "comment_id": 91555048, "body": "<code>bool Validate(std::string const&amp; str) { return std::all_of(str.begin(), str.end(), [](char ele){ return isalpha(ele) || ele == &#39; &#39;; }); }</code>"}, {"owner": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "reply_to_user": {"reputation": 2055, "user_id": 6564148, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u3HL5.png?s=128&g=1", "display_name": "George", "link": "https://stackoverflow.com/users/6564148/george"}, "edited": false, "score": 0, "creation_date": 1536787727, "post_id": 52303608, "comment_id": 91555069, "body": "@George OP: &quot;I&#39;m just at chapter 4&quot; ... i doubt that captures (no pun) lambdas"}, {"owner": {"reputation": 2055, "user_id": 6564148, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u3HL5.png?s=128&g=1", "display_name": "George", "link": "https://stackoverflow.com/users/6564148/george"}, "reply_to_user": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "edited": false, "score": 1, "creation_date": 1536787910, "post_id": 52303608, "comment_id": 91555146, "body": "@Swordfish I know, that&#39;s why I left it as a comment :) The op could pick it apart and write it without the lambda, or just take it if no one answers."}, {"owner": {"reputation": 2969, "user_id": 5191073, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/628f44cad275ff1e2fd7230f8cdd5cbb?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Pisz", "link": "https://stackoverflow.com/users/5191073/christopher-pisz"}, "edited": false, "score": 1, "creation_date": 1536788311, "post_id": 52303608, "comment_id": 91555317, "body": "Anytime you write &quot;cin &gt;&gt; something&quot; make sure you check the error. Rewrite as &quot;if((cin &gt;&gt; something).fail()) { // handle error }&quot; See return value: <a href=\"http://www.cplusplus.com/reference/istream/istream/operator%3E%3E/\" rel=\"nofollow noreferrer\">cplusplus.com/reference/istream/istream/operator%3E%3E</a>"}, {"owner": {"reputation": 4562, "user_id": 9254539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b45538511384660bfaef5092e30b7ea?s=128&d=identicon&r=PG&f=1", "display_name": "BessieTheCookie", "link": "https://stackoverflow.com/users/9254539/bessiethecookie"}, "reply_to_user": {"reputation": 2055, "user_id": 6564148, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u3HL5.png?s=128&g=1", "display_name": "George", "link": "https://stackoverflow.com/users/6564148/george"}, "edited": false, "score": 1, "creation_date": 1536792216, "post_id": 52303608, "comment_id": 91556374, "body": "@George You should probably add a <code>static_cast</code> because <a href=\"https://en.cppreference.com/w/cpp/string/byte/isalpha\" rel=\"nofollow noreferrer\"><code>std::isalpha()</code> expects a value representable as an unsigned char</a>. Also, there is <code>std::isspace()</code>."}, {"owner": {"reputation": 3, "user_id": 10348829, "user_type": "registered", "profile_image": "https://graph.facebook.com/2075999515784371/picture?type=large", "display_name": "Han Bui", "link": "https://stackoverflow.com/users/10348829/han-bui"}, "reply_to_user": {"reputation": 2055, "user_id": 6564148, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u3HL5.png?s=128&g=1", "display_name": "George", "link": "https://stackoverflow.com/users/6564148/george"}, "edited": false, "score": 0, "creation_date": 1536795956, "post_id": 52303608, "comment_id": 91557158, "body": "@George thank you for your response. I saw these codes earlier on other sites too but I couldn&#39;t follow it  But it&#39;ll come in handy later on for me."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1536798216, "post_id": 52303608, "comment_id": 91557589, "body": "@HanBui -- <i>I saw these codes earlier on other sites too but I couldn&#39;t follow it</i> -- There is hardly anything to really follow.  A couple of syntax issues but that&#39;s all there is.  If you read the line of code out loud, it practically describes what it does.  &quot;<i>return true if all_of the characters between the begin() of the string and end() of the string are either alpha() or is a space</i>&quot;."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "is_accepted": false, "score": 1, "last_activity_date": 1536793538, "creation_date": 1536793538, "answer_id": 52304579, "question_id": 52303608, "link": "https://stackoverflow.com/questions/52303608/validate-string-input-in-c-for-letters-and-spaces-only/52304579#52304579", "title": "Validate string input in c++ for letters and spaces only", "body": "<p>You might want to use something like</p>\n\n<pre><code>#include &lt;cctype&gt;\n#include &lt;string&gt;\n#include &lt;iostream&gt;\n\nint main()\n{\n    std::string foo;\n\n    bool valid;\n    do {\n        std::getline(std::cin, foo);\n\n        valid = true;\n        for (std::size_t i{}; i &lt; foo.length() &amp;&amp; valid; ++i) {\n            if (!(std::isalpha(static_cast&lt;unsigned char&gt;(foo[i])) ||\n                  std::isspace(static_cast&lt;unsigned char&gt;(foo[i]))))\n                valid = false;\n        }\n    } while (!valid);\n}\n</code></pre>\n\n<p>which checks every character for being a letter or a space.</p>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "edited": false, "score": 2, "creation_date": 1536800840, "post_id": 52304921, "comment_id": 91558016, "body": "don&#39;t use magic numbers. if you want to say &#39;A&#39; then write &#39;A&#39;."}, {"owner": {"reputation": 1, "user_id": 10355813, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c45103f7717db9259d68e10ab6548b7?s=128&d=identicon&r=PG&f=1", "display_name": "Programming_Wiz", "link": "https://stackoverflow.com/users/10355813/programming-wiz"}, "reply_to_user": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "edited": false, "score": 0, "creation_date": 1536812344, "post_id": 52304921, "comment_id": 91560354, "body": "@Swordfish, I don&#39;t know what you&#39;re talking about but whatever"}, {"owner": {"reputation": 2055, "user_id": 6564148, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u3HL5.png?s=128&g=1", "display_name": "George", "link": "https://stackoverflow.com/users/6564148/george"}, "edited": false, "score": 0, "creation_date": 1536825877, "post_id": 52304921, "comment_id": 91565444, "body": "@PlayBoi_Darski ASCII isn&#39;t the only character set that can be used with C++ (though it is the most common). It&#39;s almost always preferable to use a char rather than digit representation to make the code&#39;s intent clear without having to refer to some character table and make it portable."}, {"owner": {"reputation": 2055, "user_id": 6564148, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u3HL5.png?s=128&g=1", "display_name": "George", "link": "https://stackoverflow.com/users/6564148/george"}, "edited": false, "score": 0, "creation_date": 1536826493, "post_id": 52304921, "comment_id": 91565817, "body": "On the portability note, alpha characters are not guaranteed to be contiguous by the C++ standard. I don&#39;t know of any char set where that&#39;s the case, but it might be handy to know as it would mean that a different approach would be needed for production code."}, {"owner": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "edited": false, "score": 1, "creation_date": 1536826848, "post_id": 52304921, "comment_id": 91566024, "body": "@PlayBoi_Darski you should write <code>if ((toCheck[i] &gt;= &#39;A&#39; &amp;&amp; toCheck[i] &lt;= &#39;Z&#39;) || (toCheck[i] &gt;= &#39;a&#39; &amp;&amp; toCheck[i] &lt;= &#39;z&#39;) || toCheck[i] == &#39; &#39;)</code> for better readability."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1536844509, "post_id": 52304921, "comment_id": 91576239, "body": "@PlayBoi_Darski Use <code>isalpha()</code>, not magic numbers such as 65 and 97, and not assume characters lie in the contiguous range.  The <code>isalpha()</code> knows whether what you give it is an alphabetic character, regardless of what system is being used, ASCII, EBCDIC, etc."}], "tags": [], "owner": {"reputation": 1, "user_id": 10355813, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c45103f7717db9259d68e10ab6548b7?s=128&d=identicon&r=PG&f=1", "display_name": "Programming_Wiz", "link": "https://stackoverflow.com/users/10355813/programming-wiz"}, "is_accepted": false, "score": -1, "last_activity_date": 1536799398, "last_edit_date": 1536799398, "creation_date": 1536796881, "answer_id": 52304921, "question_id": 52303608, "link": "https://stackoverflow.com/questions/52303608/validate-string-input-in-c-for-letters-and-spaces-only/52304921#52304921", "title": "Validate string input in c++ for letters and spaces only", "body": "<p>Here is my proposal for a solution:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n\nbool validateString(std::string toCheck) {\n\nbool correct = false;\n\nfor (int i = 0; i&lt;toCheck.length(); i++) {\n\n    if ((toCheck[i] &gt;= 65 &amp;&amp; toCheck[i] &lt;= 90) || (toCheck[i] &gt;= 97 &amp;&amp; toCheck[i] &lt;= 122) || toCheck[i] == 32) {\n        correct = true;\n    }\n    else {\n        return false;\n    }\n}\n\nreturn correct;\n}\n\nint main()\n{\n    std::cout &lt;&lt; validateString(\"Whats up peeps\") &lt;&lt; std::endl;\n    std::cout &lt;&lt; validateString(\"234235\") &lt;&lt; std::endl;\n\n    system(\"pause\");\n    return 0;\n}\n</code></pre>\n\n<p>Using <a href=\"http://www.asciitable.com/\" rel=\"nofollow noreferrer\">ASCII Table</a>.</p>\n\n<p><strong>Note:</strong> Might not be the best way to do it but it works.</p>\n"}, {"comments": [{"owner": {"reputation": 9345, "user_id": 1021920, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/VukgG.jpg?s=128&g=1", "display_name": "hellow", "link": "https://stackoverflow.com/users/1021920/hellow"}, "edited": false, "score": 0, "creation_date": 1536818991, "post_id": 52306226, "comment_id": 91562317, "body": "While this might answer the authors question, it lacks some explaining words and links to documentation. Raw code snippets are not very helpful without some phrases around it. You may also find <a href=\"https://stackoverflow.com/help/how-to-answer\">how to write a good answer</a> very helpful. Please edit your answer."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user10356313"}, "is_accepted": true, "score": 1, "last_activity_date": 1536912491, "last_edit_date": 1536912491, "creation_date": 1536809288, "answer_id": 52306226, "question_id": 52303608, "link": "https://stackoverflow.com/questions/52303608/validate-string-input-in-c-for-letters-and-spaces-only/52306226#52306226", "title": "Validate string input in c++ for letters and spaces only", "body": "<p>This routine will do the validation:</p>\n\n<pre><code>bool validateString(const std::string&amp; s)\n{\n    for (const char c : s) {\n        if (!isalpha(c) &amp;&amp; !isspace(c))\n            return false;\n    }\n\n    return true;\n}\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 10348829, "user_type": "registered", "profile_image": "https://graph.facebook.com/2075999515784371/picture?type=large", "display_name": "Han Bui", "link": "https://stackoverflow.com/users/10348829/han-bui"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5506, "favorite_count": 0, "closed_date": 1536837262, "accepted_answer_id": 52306226, "answer_count": 3, "score": -2, "last_activity_date": 1536912491, "creation_date": 1536787087, "last_edit_date": 1536795732, "question_id": 52303608, "link": "https://stackoverflow.com/questions/52303608/validate-string-input-in-c-for-letters-and-spaces-only", "closed_reason": "Not suitable for this site", "title": "Validate string input in c++ for letters and spaces only", "body": "<p>I haven't got to know a lot about functions yet since I'm just at chapter 4 (which is decision making using if, else) of Starting Out with C++ book. \nHere my problem asks me to enter the inputs of runner names and their timer so I could rank them in 1st 2nd and 3rd place. </p>\n\n<p>I'm having trouble to validate the input for the string for runners's names as letters and spaces only. \nI'm thinking about using loop or bool but I don't know what is the proper way to put it. </p>\n\n<p>Can somebody show me what function I can use best in this case without repeating step into multiple lines of codes.\nI'm sorry in advance for my long version code, I'm also looking for the way to shorten it.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;iomanip&gt; // for setw, setpresicion, control output\n#include &lt;cctype&gt; // for getline, cin.\n\nusing namespace std;\n\nint main()\n{\n    string runner1, runner2, runner3;\n    double time1, time2, time3;\n\n\n    cout &lt;&lt; \"Enter Runner 1 name: \";\n    getline(cin, runner1);\n    cout &lt;&lt; \"Enter Runner 2 name: \";\n    getline(cin, runner2);\n    cout &lt;&lt; \"Enter Runner 3 name: \";\n    getline(cin, runner3);\n\n    cout &lt;&lt; runner1 &lt;&lt; \"'s finishing time: \";\n    cin &gt;&gt; time1;\n    while (!cin || (time1 &lt; 0)){              //the # is negative\n        cout &lt;&lt; \"Please enter a non-negative number!\\n\";\n        cin &gt;&gt; time1;\n    }\n    cout &lt;&lt; runner2 &lt;&lt; \"'s finishing time: \";\n    cin &gt;&gt; time2;\n    while (!cin || (time2 &lt; 0)){              //the # is negative\n        cout &lt;&lt; \"Please enter a non-negative number!\\n\";\n        cin &gt;&gt; time2;\n    }\n    cout &lt;&lt; runner3 &lt;&lt; \"'s finishing time: \";\n    cin &gt;&gt; time3;\n    while (!cin || (time3 &lt; 0)){\n        cout &lt;&lt; \"Please enter a non-negative number!\\n\";\n        cin &gt;&gt; time3;\n    }\n\n    // This is for Rank1----------------------------\n        cout &lt;&lt; \"1st place : \";\n        if((time1 &lt; time2)&amp;&amp;(time1 &lt; time3))\n        {\n            cout &lt;&lt; left &lt;&lt; setw(5) &lt;&lt; runner1 &lt;&lt; \" \" &lt;&lt; right\n            &lt;&lt; setw(5) &lt;&lt; time1 &lt;&lt; endl;\n        }\n        else if (time2 &lt; time3){\n            cout &lt;&lt; left &lt;&lt; setw(5) &lt;&lt; runner2 &lt;&lt; \" \" &lt;&lt; right\n            &lt;&lt; setw(5)  &lt;&lt; time2 &lt;&lt; endl;\n        }\n        else {\n            cout &lt;&lt; left &lt;&lt; setw(5) &lt;&lt; runner3 &lt;&lt; \" \" &lt;&lt; right\n            &lt;&lt; setw(5) &lt;&lt; time3 &lt;&lt; endl;\n        }\n        //Rank2------------------------------------\n        cout &lt;&lt; \"2nd place : \";\n        if ((time1 &lt; time2)&amp;&amp;(time3 &lt; time1)){\n            cout &lt;&lt; left &lt;&lt; setw(5) &lt;&lt; runner1 &lt;&lt; \" \" &lt;&lt; right\n            &lt;&lt; setw(5) &lt;&lt; time1 &lt;&lt; endl;\n        }\n        else if ((time3 &lt; time2)&amp;&amp;(time1 &lt; time3)){\n            cout &lt;&lt; left &lt;&lt; setw(5) &lt;&lt; runner3 &lt;&lt; \" \" &lt;&lt; right\n            &lt;&lt; setw(5) &lt;&lt; time3 &lt;&lt; endl;\n        }\n        else {\n            cout &lt;&lt; left &lt;&lt; setw(5) &lt;&lt; runner2 &lt;&lt; \" \" &lt;&lt; right\n            &lt;&lt;setw(5) &lt;&lt; time2 &lt;&lt; endl;\n        }\n        // RANK 3-----------------------------------\n        cout &lt;&lt; \"3rd place : \";\n        if ((time1 &gt; time2)&amp;&amp;(time1 &gt; time3)){\n            cout &lt;&lt; left &lt;&lt; setw(5) &lt;&lt; runner1 &lt;&lt; \" \" &lt;&lt; right\n            &lt;&lt; setw(5) &lt;&lt; time1 &lt;&lt; endl;\n        }\n        else if ((time1 &lt; time3)&amp;&amp;(time3 &gt; time2)){\n            cout &lt;&lt; left &lt;&lt; setw(5) &lt;&lt; runner3 &lt;&lt; \" \" &lt;&lt; right\n            &lt;&lt; setw(5) &lt;&lt; time3 &lt;&lt; endl;\n        }\n        else {\n            cout &lt;&lt; left &lt;&lt; setw(5) &lt;&lt; runner2 &lt;&lt; \" \" &lt;&lt; right\n            &lt;&lt;setw(5) &lt;&lt; time2 &lt;&lt; endl;\n        }\n\n\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "c++17", "c++-standard-library"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1536785893, "post_id": 52303316, "comment_id": 91554412, "body": "Aren&#39;t you just looking for <a href=\"https://en.cppreference.com/w/cpp/utility/variant/index\" rel=\"nofollow noreferrer\"><code>std::variant::index()</code></a>?"}, {"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1536786094, "post_id": 52303316, "comment_id": 91554478, "body": "@NathanOliver I believe the OP is working on the type level, not on the value level, so that wouldn&#39;t work. Something like <code>get_index_of&lt;B, std::variant&lt;A, B, C&gt;&gt;</code> returning <code>1</code>"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 0, "creation_date": 1536786147, "post_id": 52303316, "comment_id": 91554492, "body": "@Justin Ah, that makes sense.  That&#39;s probably what they want."}, {"owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "edited": false, "score": 0, "creation_date": 1536786215, "post_id": 52303316, "comment_id": 91554507, "body": "Good question also for <code>std::tuple</code>, IMHO"}], "answers": [{"comments": [{"owner": {"reputation": 422, "user_id": 3289485, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf9c5396caf71b676374a3c3601079b1?s=128&d=identicon&r=PG&f=1", "display_name": "Bargor", "link": "https://stackoverflow.com/users/3289485/bargor"}, "edited": false, "score": 0, "creation_date": 1536787861, "post_id": 52303569, "comment_id": 91555115, "body": "Thanks for showing the implementation without if constexpr!"}], "tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": false, "score": 3, "last_activity_date": 1536787332, "last_edit_date": 1536787332, "creation_date": 1536786816, "answer_id": 52303569, "question_id": 52303316, "link": "https://stackoverflow.com/questions/52303316/get-index-by-type-in-stdvariant/52303569#52303569", "title": "Get index by type in std::variant", "body": "<p>One fun way to do this is to take your <code>variant&lt;Ts...&gt;</code> and turn it into a custom class hierarchy that all implement a particular static member function with a different result that you can query.</p>\n\n<p>In other words, given <code>variant&lt;A, B, C&gt;</code>, create a hierarchy that looks like:</p>\n\n<pre><code>struct base_A {\n    static integral_constant&lt;int, 0&gt; get(tag&lt;A&gt;);\n};\nstruct base_B {\n    static integral_constant&lt;int, 1&gt; get(tag&lt;B&gt;);\n};\nstruct base_C {\n    static integral_constant&lt;int, 2&gt; get(tag&lt;C&gt;);\n};\nstruct getter : base_A, base_B, base_C {\n    using base_A::get, base_B::get, base_C::get;\n};\n</code></pre>\n\n<p>And then, <code>decltype(getter::get(tag&lt;T&gt;()))</code> is the index (or doesn't compile). Hopefully that makes sense.</p>\n\n<hr />\n\n<p>In real code, the above becomes:</p>\n\n<pre><code>template &lt;typename T&gt; struct tag { };\n\ntemplate &lt;std::size_t I, typename T&gt;\nstruct base {\n    static std::integral_constant&lt;size_t, I&gt; get(tag&lt;T&gt;);\n};\n\ntemplate &lt;typename S, typename... Ts&gt;\nstruct getter_impl;\n\ntemplate &lt;std::size_t... Is, typename... Ts&gt;\nstruct getter_impl&lt;std::index_sequence&lt;Is...&gt;, Ts...&gt;\n    : base&lt;Is, Ts&gt;...\n{\n    using base&lt;Is, Ts&gt;::get...;\n};\n\ntemplate &lt;typename... Ts&gt;\nstruct getter : getter_impl&lt;std::index_sequence_for&lt;Ts...&gt;, Ts...&gt;\n{ };\n</code></pre>\n\n<p>And once you establish a getter, actually using it is much more straightforward:</p>\n\n<pre><code>template &lt;typename T, typename V&gt;\nstruct get_index;\n\ntemplate &lt;typename T, typename... Ts&gt;\nstruct get_index&lt;T, std::variant&lt;Ts...&gt;&gt;\n    : decltype(getter&lt;Ts...&gt;::get(tag&lt;T&gt;()))\n{ };\n</code></pre>\n\n<hr />\n\n<p>That only works in the case where the types are distinct. If you need it to work with independent types, then the best you can do is probably a linear search?</p>\n\n<pre><code>template &lt;typename T, typename&gt;\nstruct get_index;\n\ntemplate &lt;size_t I, typename... Ts&gt; \nstruct get_index_impl\n{ };\n\ntemplate &lt;size_t I, typename T, typename... Ts&gt; \nstruct get_index_impl&lt;I, T, T, Ts...&gt;\n    : std::integral_constant&lt;size_t, I&gt;\n{ };\n\ntemplate &lt;size_t I, typename T, typename U, typename... Ts&gt; \nstruct get_index_impl&lt;I, T, U, Ts...&gt;\n    : get_index_impl&lt;I+1, T, Ts...&gt;\n{ };\n\ntemplate &lt;typename T, typename... Ts&gt; \nstruct get_index&lt;T, std::variant&lt;Ts...&gt;&gt;\n    : get_index_impl&lt;0, T, Ts...&gt;\n{ };\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 422, "user_id": 3289485, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf9c5396caf71b676374a3c3601079b1?s=128&d=identicon&r=PG&f=1", "display_name": "Bargor", "link": "https://stackoverflow.com/users/3289485/bargor"}, "is_accepted": true, "score": 10, "last_activity_date": 1536788120, "last_edit_date": 1536788120, "creation_date": 1536787424, "answer_id": 52303671, "question_id": 52303316, "link": "https://stackoverflow.com/questions/52303316/get-index-by-type-in-stdvariant/52303671#52303671", "title": "Get index by type in std::variant", "body": "<p>I found <a href=\"https://stackoverflow.com/questions/46091671/c-template-recursive-to-check-type-in-stdtuple\">this</a> answer for tuple and slightly modificated it:</p>\n\n<pre><code>template&lt;typename VariantType, typename T, std::size_t index = 0&gt;\nconstexpr std::size_t variant_index() {\n    if constexpr (index == std::variant_size_v&lt;VariantType&gt;) {\n        return index;\n    } else if constexpr (std::is_same_v&lt;std::variant_alternative_t&lt;index, VariantType&gt;, T&gt;) {\n        return index;\n    } else {\n        return variant_index&lt;VariantType, T, index + 1&gt;();\n    }\n} \n</code></pre>\n\n<p>It works for me, but now I'm curious how to do it in old way without constexpr if, as a structure.</p>\n"}, {"comments": [{"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1536787756, "post_id": 52303687, "comment_id": 91555076, "body": "That&#39;s clever, huh."}, {"owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "edited": false, "score": 0, "creation_date": 1536788137, "post_id": 52303687, "comment_id": 91555242, "body": "Great solution!"}, {"owner": {"reputation": 1812, "user_id": 5945883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17f8de79f057abb63afb9ce7bee0ca51?s=128&d=identicon&r=PG&f=1", "display_name": "R2RT", "link": "https://stackoverflow.com/users/5945883/r2rt"}, "edited": false, "score": 0, "creation_date": 1536842442, "post_id": 52303687, "comment_id": 91575005, "body": "Just wondering: wouldn&#39;t std::declval&lt;T&gt; do in place of tag&lt;T&gt;?"}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 1812, "user_id": 5945883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17f8de79f057abb63afb9ce7bee0ca51?s=128&d=identicon&r=PG&f=1", "display_name": "R2RT", "link": "https://stackoverflow.com/users/5945883/r2rt"}, "edited": false, "score": 1, "creation_date": 1536842748, "post_id": 52303687, "comment_id": 91575171, "body": "@R2RT No. That wouldn&#39;t address the issue of some types not being literal types, and you can&#39;t use <code>declval</code> in an evaluated context anyway."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1544099518, "post_id": 52303687, "comment_id": 94161080, "body": "Buggered in MSVS2017, sadly. <a href=\"https://stackoverflow.com/q/53651609/560648\">Any ideas</a>? :)"}], "tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": false, "score": 17, "last_activity_date": 1536787508, "creation_date": 1536787508, "answer_id": 52303687, "question_id": 52303316, "link": "https://stackoverflow.com/questions/52303316/get-index-by-type-in-stdvariant/52303687#52303687", "title": "Get index by type in std::variant", "body": "<p>We could take advantage of the fact that <a href=\"https://en.cppreference.com/w/cpp/utility/variant/index\" rel=\"noreferrer\"><code>index()</code></a> almost already does the right thing.</p>\n\n<p>We can't arbitrarily create instances of various types - we wouldn't know how to do it, and arbitrary types might not be literal types. But we can create instances of specific types that we know about:</p>\n\n<pre><code>template &lt;typename&gt; struct tag { }; // &lt;== this one IS literal\n\ntemplate &lt;typename T, typename V&gt;\nstruct get_index;\n\ntemplate &lt;typename T, typename... Ts&gt; \nstruct get_index&lt;T, std::variant&lt;Ts...&gt;&gt;\n    : std::integral_constant&lt;size_t, std::variant&lt;tag&lt;Ts&gt;...&gt;(tag&lt;T&gt;()).index()&gt;\n{ };\n</code></pre>\n\n<p>That is, to find the index of <code>B</code> in <code>variant&lt;A, B, C&gt;</code> we construct a <code>variant&lt;tag&lt;A&gt;, tag&lt;B&gt;, tag&lt;C&gt;&gt;</code> with a <code>tag&lt;B&gt;</code> and find its index. </p>\n\n<p>This only works with distinct types. </p>\n"}, {"tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": false, "score": 4, "last_activity_date": 1536792005, "creation_date": 1536792005, "answer_id": 52304395, "question_id": 52303316, "link": "https://stackoverflow.com/questions/52303316/get-index-by-type-in-stdvariant/52304395#52304395", "title": "Get index by type in std::variant", "body": "<p>You can also do this with a fold expression:</p>\n\n<pre><code>template &lt;typename T, typename... Ts&gt;\nconstexpr size_t get_index(std::variant&lt;Ts...&gt; const&amp;) {\n    size_t r = 0;\n    auto test = [&amp;](bool b){\n        if (!b) ++r;\n        return b;\n    };\n    (test(std::is_same_v&lt;T,Ts&gt;) || ...);\n    return r;\n}\n</code></pre>\n\n<p>The fold expression stops the first time we match a type, at which point we stop incrementing <code>r</code>. This works even with duplicate types. If a type is not found, the size is returned. This could be easily changed to not <code>return</code> in this case if that's preferable, since missing <code>return</code> in a <code>constexpr</code> function is ill-formed.</p>\n\n<p>If you dont want to take an instance of <code>variant</code>, the argument here could instead be a <code>tag&lt;variant&lt;Ts...&gt;&gt;</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1536804026, "post_id": 52305530, "comment_id": 91558589, "body": "You should note that the second one won&#39;t work with duplicate types. And you can&#39;t distinguish between absence and index 0. You can fix the second one by, for instance, multiplying by <code>Is+1</code> instead and then subtracting 1. But the duplicate problem would require adding another local flag or something, which is now getting to complicated imo..."}, {"owner": {"reputation": 3425, "user_id": 3621421, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/995874e8bbb9cf8df99e63de231709cc?s=128&d=identicon&r=PG&f=1", "display_name": "Nikita Kniazev", "link": "https://stackoverflow.com/users/3621421/nikita-kniazev"}, "reply_to_user": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1536839402, "post_id": 52305530, "comment_id": 91573179, "body": "Variants with duplicate types are strange beasts (it is against sum types nature), you can only have one with value of duplicate type by default constructing or constructing it with <code>in_place_index_t&lt;I&gt;</code>. Because of that the <code>.index()</code> trick proposed in your answer will not compile. Also, variants cannot be in &#39;absence&#39; state."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1536839774, "post_id": 52305530, "comment_id": 91573419, "body": "&quot;Not compile&quot; is a better choice than &quot;give wrong/misleading answer.&quot; I&#39;m also not talking about absent state, I&#39;m talking about absent types: your <code>variant_index_v&lt;int, variant&lt;double&gt;&gt;</code> and <code>variant_index_v&lt;double, variant&lt;double&gt;&gt;</code> both are <code>0</code>."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1536839941, "post_id": 52305530, "comment_id": 91573523, "body": "Also not compiling matches what <code>get&lt;int&gt;(make_tuple(1,1))</code> does, for instance."}, {"owner": {"reputation": 3425, "user_id": 3621421, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/995874e8bbb9cf8df99e63de231709cc?s=128&d=identicon&r=PG&f=1", "display_name": "Nikita Kniazev", "link": "https://stackoverflow.com/users/3621421/nikita-kniazev"}, "reply_to_user": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1536840437, "post_id": 52305530, "comment_id": 91573767, "body": "You know that it could be fixed with a static assert :) The static assert will be even more meaningful than a compiler error of not finding a suitable constructor. As for me, instantiating variant with duplicate types should not succeed, as it is a logical error, loophole in the standard."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1536840794, "post_id": 52305530, "comment_id": 91573975, "body": "So... fix it, please."}], "tags": [], "owner": {"reputation": 3425, "user_id": 3621421, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/995874e8bbb9cf8df99e63de231709cc?s=128&d=identicon&r=PG&f=1", "display_name": "Nikita Kniazev", "link": "https://stackoverflow.com/users/3621421/nikita-kniazev"}, "is_accepted": false, "score": 1, "last_activity_date": 1536842281, "last_edit_date": 1536842281, "creation_date": 1536803054, "answer_id": 52305530, "question_id": 52303316, "link": "https://stackoverflow.com/questions/52303316/get-index-by-type-in-stdvariant/52305530#52305530", "title": "Get index by type in std::variant", "body": "<p>My two <del>cents</del> solutions:</p>\n\n<pre><code>template &lt;typename T, typename... Ts&gt;\nconstexpr std::size_t variant_index_impl(std::variant&lt;Ts...&gt;**)\n{\n    std::size_t i = 0; ((!std::is_same_v&lt;T, Ts&gt; &amp;&amp; ++i) &amp;&amp; ...); return i;\n}\n\ntemplate &lt;typename T, typename V&gt;\nconstexpr std::size_t variant_index_v = variant_index_impl&lt;T&gt;(static_cast&lt;V**&gt;(nullptr));\n</code></pre>\n\n<hr>\n\n<pre><code>template &lt;typename T, typename V, std::size_t... Is&gt;\nconstexpr std::size_t variant_index_impl(std::index_sequence&lt;Is...&gt;)\n{\n    return ((std::is_same_v&lt;T, std::variant_alternative_t&lt;Is, V&gt;&gt; * Is) + ...);\n}\n\ntemplate &lt;typename T, typename V&gt;\nconstexpr std::size_t variant_index_v = variant_index_impl&lt;T, V&gt;(std::make_index_sequence&lt;std::variant_size_v&lt;V&gt;&gt;{});\n</code></pre>\n\n<hr>\n\n<p>If you wish a hard error on lookups of not containing type or duplicate type - here are static asserts:</p>\n\n<pre><code>    constexpr auto occurrences = (std::is_same_v&lt;T, Ts&gt; + ...);\n    static_assert(occurrences != 0, \"The variant cannot have the type\");\n    static_assert(occurrences &lt;= 1, \"The variant has duplicates of the type\");\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 951, "user_id": 320418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/923a4f2caad452a44f149f9ec7929b65?s=128&d=identicon&r=PG", "display_name": "jakar", "link": "https://stackoverflow.com/users/320418/jakar"}, "is_accepted": false, "score": 1, "last_activity_date": 1612748191, "last_edit_date": 1612748191, "creation_date": 1612481065, "answer_id": 66055358, "question_id": 52303316, "link": "https://stackoverflow.com/questions/52303316/get-index-by-type-in-stdvariant/66055358#66055358", "title": "Get index by type in std::variant", "body": "<p>Another fun way of implementing <a href=\"https://stackoverflow.com/a/52303687/320418\">Barry's answer</a>, using <a href=\"https://www.boost.org/doc/libs/develop/libs/mp11/doc/html/mp11.html\" rel=\"nofollow noreferrer\">Boost.Mp11</a>:</p>\n<pre class=\"lang-cpp prettyprint-override\"><code>template&lt;class T, class V&gt;\nusing get_index = std::integral_constant&lt;\n  std::size_t,\n  mp11::mp_transform&lt;mp11::mp_list, V&gt;(mp11::mp_list&lt;T&gt;{}).index()\n&gt;;\n</code></pre>\n<p>This also works with <a href=\"https://www.boost.org/doc/libs/1_75_0/libs/variant2/doc/html/variant2.html\" rel=\"nofollow noreferrer\">Boost.Variant2</a>, in case you can't C++17 yet.</p>\n"}, {"tags": [], "owner": {"reputation": 23279, "user_id": 700825, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/6aea6e2f57f2a7b1cd6870375fbdc42f?s=128&d=identicon&r=PG", "display_name": "NoSenseEtAl", "link": "https://stackoverflow.com/users/700825/nosenseetal"}, "is_accepted": false, "score": 0, "last_activity_date": 1614345428, "creation_date": 1614345428, "answer_id": 66386518, "question_id": 52303316, "link": "https://stackoverflow.com/questions/52303316/get-index-by-type-in-stdvariant/66386518#66386518", "title": "Get index by type in std::variant", "body": "<p>With Boost.Mp11 this is a short, one-liner:</p>\n<pre><code>template&lt;typename Variant, typename T&gt;\nconstexpr size_t IndexInVariant = mp_find&lt;Variant, T&gt;::value;\n</code></pre>\n<p>Full <a href=\"https://godbolt.org/z/rqK8x7\" rel=\"nofollow noreferrer\">example</a>:</p>\n<pre><code>#include &lt;variant&gt;\n#include &lt;boost/mp11/algorithm.hpp&gt;\n\nusing namespace boost::mp11;\n\ntemplate&lt;typename Variant, typename T&gt;\nconstexpr size_t IndexInVariant = mp_find&lt;Variant, T&gt;::value;\n\nint main()\n{\n    using V = std::variant&lt;int,double, char, double&gt;;\n    static_assert(IndexInVariant&lt;V, int&gt; == 0);\n    // for duplicates first idx is returned\n    static_assert(IndexInVariant&lt;V, double&gt; == 1);\n    static_assert(IndexInVariant&lt;V, char&gt; == 2);\n    // not found returns &quot;.end()&quot;/ or size of variant\n    static_assert(IndexInVariant&lt;V, float&gt; == 4); \n    // beware that const and volatile and ref are not stripped\n    static_assert(IndexInVariant&lt;V, int&amp;&gt; == 4); \n    static_assert(IndexInVariant&lt;V, const int&gt; == 4); \n    static_assert(IndexInVariant&lt;V, volatile int&gt; == 4); \n}\n</code></pre>\n"}], "owner": {"reputation": 422, "user_id": 3289485, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf9c5396caf71b676374a3c3601079b1?s=128&d=identicon&r=PG&f=1", "display_name": "Bargor", "link": "https://stackoverflow.com/users/3289485/bargor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5023, "favorite_count": 2, "accepted_answer_id": 52303671, "answer_count": 7, "score": 16, "last_activity_date": 1614345428, "creation_date": 1536785565, "last_edit_date": 1536806802, "question_id": 52303316, "link": "https://stackoverflow.com/questions/52303316/get-index-by-type-in-stdvariant", "title": "Get index by type in std::variant", "body": "<p>Is there a utility in the standard library to get the <em>index</em> of a given <em>type</em> in <code>std::variant</code>? Or should I make one for myself? That is, I want to get the index of <code>B</code> in <code>std::variant&lt;A, B, C&gt;</code> and have that return <code>1</code>.</p>\n\n<p>There is <code>std::variant_alternative</code> for the opposite operation. Of course, there could be many same types on <code>std::variant</code>'s list, so this operation is not a bijection, but it isn't a problem for me (I can have first occurrence of type on list, or unique types on <code>std::variant</code> list).</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "edited": false, "score": 0, "creation_date": 1536784518, "post_id": 52303070, "comment_id": 91553851, "body": "with a <code>unique_ptr</code> or a <code>shared_ptr</code>"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 2, "creation_date": 1536784523, "post_id": 52303070, "comment_id": 91553854, "body": "The standard smart pointers can be given custom deleters. Use a deleter that cleans up appropriately, based on the requirements of <code>NotMyFunction()</code>."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 7, "creation_date": 1536784539, "post_id": 52303070, "comment_id": 91553865, "body": "Read the function&#39;s documentation, it should tell you how the memory needs to be freed. You can still use a smart pointer wrapper, just give it an appropriate deleter to free the memory properly"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1536784548, "post_id": 52303070, "comment_id": 91553870, "body": "Is <code>NotMyFunction()</code> actually giving you a resource that you need to clean up?  If it does then you can still use a smart pointer with a custom deleter."}, {"owner": {"reputation": 3047, "user_id": 446303, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/0223ff085aabfc2db1422d5341f28dad?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/446303/max"}, "edited": false, "score": 0, "creation_date": 1536784613, "post_id": 52303070, "comment_id": 91553891, "body": "Shouldn&#39;t you use delete instead of std::free ?"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1536784655, "post_id": 52303070, "comment_id": 91553902, "body": "@RemyLebeau this should be an answer."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1536785252, "post_id": 52303070, "comment_id": 91554147, "body": "@Apollys Down votes don&#39;t mean the question isn&#39;t clear, they mean it is not useful.  The answer to your question is the obvious <i>You read the documentation of that function and do what that documentation tells you to do.</i> so it isn&#39;t very useful. (not a down voter btw)"}, {"owner": {"reputation": 1961, "user_id": 7022459, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/646lY.png?s=128&g=1", "display_name": "Apollys supports Monica", "link": "https://stackoverflow.com/users/7022459/apollys-supports-monica"}, "edited": false, "score": 0, "creation_date": 1536785383, "post_id": 52303070, "comment_id": 91554206, "body": "Why are we assuming there&#39;s such documentation 100% of the time?  That seems like quite a presumptuous assumption.  Of course if there&#39;s documentation the question is trivial."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 3, "creation_date": 1536785440, "post_id": 52303070, "comment_id": 91554233, "body": "@Apollys If there is no such documentation, then who could possibly answer your question? The function becomes essentially unusable except by it&#39;s author. Everyone else would just have to guess if they should free, delete or not manage the pointed object&#39;s lifetime which is not an acceptable position to be in."}, {"owner": {"reputation": 1961, "user_id": 7022459, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/646lY.png?s=128&g=1", "display_name": "Apollys supports Monica", "link": "https://stackoverflow.com/users/7022459/apollys-supports-monica"}, "edited": false, "score": 0, "creation_date": 1536785504, "post_id": 52303070, "comment_id": 91554267, "body": "Perhaps someone who knows more about C++ than I do.  Obviously I asked this question because I wasn&#39;t certain that there wasn&#39;t an answer.  It&#39;s also okay to say &quot;that is impossible&quot; - that too is an informative and useful answer."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1536785601, "post_id": 52303070, "comment_id": 91554307, "body": "@Apollys With well written modern code, it&#39;s safe to assume raw pointers aren&#39;t owning. But that&#39;s not true for legacy, poorly written or untrustworthy code. In those cases you have no choice but to read the documentation, or perhaps dive into that function&#39;s code to try to find out yourself. It&#39;s not a c++ knowledge thing, it varies from function to function."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 3, "creation_date": 1536785799, "post_id": 52303070, "comment_id": 91554387, "body": "@Apollys Regarding your comment&#39;s edit, the answer is not &quot;that is impossible&quot;. The answer is to read the documentation. My earlier comment on documentation was to explain that it&#39;s not presumptuous to assume there is documentation. If a function is being distributed, specially if it returns a pointer, it will have documentation. If it doesn&#39;t, it&#39;s distribution package is incomplete and it is, in effect, not usable without source diving."}], "answers": [{"comments": [{"owner": {"reputation": 1961, "user_id": 7022459, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/646lY.png?s=128&g=1", "display_name": "Apollys supports Monica", "link": "https://stackoverflow.com/users/7022459/apollys-supports-monica"}, "edited": false, "score": 1, "creation_date": 1536786340, "post_id": 52303166, "comment_id": 91554549, "body": "To clarify the phrase &quot;in a spot of bother&quot; into more meaningful terminology, would it be correct for me to infer that you are saying the following? <b>In general, if you are given a raw pointer in C++, it is impossible to guarantee correct memory management of this pointer.</b>"}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "reply_to_user": {"reputation": 1961, "user_id": 7022459, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/646lY.png?s=128&g=1", "display_name": "Apollys supports Monica", "link": "https://stackoverflow.com/users/7022459/apollys-supports-monica"}, "edited": false, "score": 2, "creation_date": 1536786405, "post_id": 52303166, "comment_id": 91554575, "body": "@Apollys You can&#39;t even know if there&#39;s memory to be managed."}, {"owner": {"reputation": 1961, "user_id": 7022459, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/646lY.png?s=128&g=1", "display_name": "Apollys supports Monica", "link": "https://stackoverflow.com/users/7022459/apollys-supports-monica"}, "edited": false, "score": 0, "creation_date": 1536786533, "post_id": 52303166, "comment_id": 91554617, "body": "That is a logical consequence of my bold statement above.  But that is a good point as well."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "reply_to_user": {"reputation": 1961, "user_id": 7022459, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/646lY.png?s=128&g=1", "display_name": "Apollys supports Monica", "link": "https://stackoverflow.com/users/7022459/apollys-supports-monica"}, "edited": false, "score": 3, "creation_date": 1536786837, "post_id": 52303166, "comment_id": 91554743, "body": "@Apollys Perhaps what you are asking for is &quot;It&#39;s not possible to, based strictly on the function prototype, safely deduce the lifetime management responsibilities a function caller has towards objects pointed by raw pointers returned by the function.&quot;"}, {"owner": {"reputation": 1961, "user_id": 7022459, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/646lY.png?s=128&g=1", "display_name": "Apollys supports Monica", "link": "https://stackoverflow.com/users/7022459/apollys-supports-monica"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1536787387, "post_id": 52303166, "comment_id": 91554943, "body": "@Fran&#231;oisAndrieux No, I meant what I wrote - it&#39;s simpler, clearer, more accurate, and grammatically correct."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "reply_to_user": {"reputation": 1961, "user_id": 7022459, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/646lY.png?s=128&g=1", "display_name": "Apollys supports Monica", "link": "https://stackoverflow.com/users/7022459/apollys-supports-monica"}, "edited": false, "score": 1, "creation_date": 1536788363, "post_id": 52303166, "comment_id": 91555333, "body": "@Apollys Then the answer is technically no, it would not be correct to infer that. It&#39;s possible to correctly manage memory pointer to by pointers. It just requires contextual information. Your statement could be made true if you included a clause about basing your guarantee <i>strictly</i> on the fact it&#39;s a raw pointer. Though I wouldn&#39;t suggest what you meant a second time. Maybe I&#39;m misunderstanding a part of the original statement that implies no outside information."}], "tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": false, "score": 8, "last_activity_date": 1536788515, "last_edit_date": 1536788515, "creation_date": 1536784873, "answer_id": 52303166, "question_id": 52303070, "link": "https://stackoverflow.com/questions/52303070/to-delete-or-to-free/52303166#52303166", "title": "To delete or to free", "body": "<blockquote>\n  <p>How do I properly manage the memory allocated by this function?</p>\n</blockquote>\n\n<p>You read the documentation of that function and do what that documentation tells you to do and when to do it, assuming there is anything to be done in the first place. It is important to remember that not all pointers refer to dynamic memory.</p>\n\n<p>Example: The specification of <code>strdup</code> says:</p>\n\n<blockquote>\n  <p>Returns a pointer to a null-terminated byte string, which is a duplicate of the string pointed to by str1. <strong>The returned pointer must be passed to <code>free</code> to avoid a memory leak.</strong></p>\n</blockquote>\n\n<p>If no documentation is available, you can read the source code to see what the function does, and act accordingly. If the source isn't available either, then you're in a spot of bother, and might need to invest in a crystal ball.</p>\n\n<p>Excluding standard functions, C APIs which acquire resources such as dynamic memory and return a handle (pointer in the case of dynamic memory) typically provide a corresponding function to release the resource. Example: <code>SDL_CreateWindow</code> and <code>SDL_DestroyWindow</code>.</p>\n\n<hr>\n\n<blockquote>\n  <p>would it be correct for me to infer that you are saying the following? In general, if you are given a raw pointer in C++, it is impossible to guarantee correct memory management of this pointer.</p>\n</blockquote>\n\n<p>It is unclear what you mean. If you know how to manage the memory, then you can do it correctly. If you don't know how to manage the memory (or whether it needs to be managed by you at all), then you need a way to find the knowledge.  There is no reasonable way in C++ to write the program in a way that would figure out (through introspection) how and when memory should be freed.</p>\n\n<p>The type <code>char*</code> itself tells nothing about how the memory should be dealt with. Even the value of the pointer tells you nothing beyond if it is null, then it doesn't point to an object. If the pointer is non-null, then it might point to an object.</p>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user10356313"}, "is_accepted": false, "score": 0, "last_activity_date": 1536810031, "creation_date": 1536810031, "answer_id": 52306315, "question_id": 52303070, "link": "https://stackoverflow.com/questions/52303070/to-delete-or-to-free/52306315#52306315", "title": "To delete or to free", "body": "<pre><code>int *p = new int();\nstd::free(p);\n</code></pre>\n\n<p>That is uncorrect, it should be:</p>\n\n<pre><code>int *p = new int;\ndelete p;\n</code></pre>\n\n<p>or</p>\n\n<pre><code>int *p =  (int*) malloc(sizeof(int));\nfree(p);\n</code></pre>\n\n<p>Regarding to <code>char* NotMyFunction();</code>, wherever and however you allocate your char*, do not forget to to free or delete it. Do not loose your pointer, you will need it to release the memory.</p>\n\n<pre><code>char *NotMyFunction()\n{\nchar* s = new char[n];\n...\nreturn s;\n}\n</code></pre>\n\n<p>later:</p>\n\n<pre><code>char* nmf = NotMyFunction();\n...\ndelete[] mfc;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1961, "user_id": 7022459, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/646lY.png?s=128&g=1", "display_name": "Apollys supports Monica", "link": "https://stackoverflow.com/users/7022459/apollys-supports-monica"}, "is_accepted": true, "score": 0, "last_activity_date": 1536882772, "creation_date": 1536882772, "answer_id": 52323213, "question_id": 52303070, "link": "https://stackoverflow.com/questions/52303070/to-delete-or-to-free/52323213#52323213", "title": "To delete or to free", "body": "<p>I do not have thorough enough knowledge of C++ to say for myself, but based on what user2079303 has written in their <a href=\"https://stackoverflow.com/a/52303166/7022459\">answer</a>, it seems that the theoretical answer to this question is that <strong>it is impossible</strong>.  However, in practice there are many ways to approach this issue.</p>\n\n<hr>\n\n<p><strong>1. Check the documentation</strong></p>\n\n<p>In most cases, if you're developing software that uses a library, it should have documentation that provides this information.  If not, you may want to question whether or not the benefits of using this library really outweigh the costs.</p>\n\n<p><strong>2. Check the source code</strong></p>\n\n<p>If you have access to the source code, you should be able to find out how the memory in question is being allocated.  This is most likely more difficult than option <strong>1</strong>, but it gives you a definite answer, rather than an answer that someone else wrote (which <em>really should be</em> correct, but doesn't have to be).</p>\n\n<p><strong>3. Use valgrind</strong></p>\n\n<p>Valgrind is a debugging utility tool, not a tool for proving correctness (correct me if I'm wrong), but in the absence of direct access to the resources we need to answer this question, it can be very useful.  We can experiment with the following program, where we imagine that in our application we may not have access to the body of <code>MysteryFunctionOne</code> and <code>MysteryFunctionTwo</code>:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nint* MysteryFunctionOne() {\n  return new int();\n}\n\nint* MysteryFunctionTwo() {\n  return (int *) malloc(sizeof(int));\n}\n\nint main() {\n  int* p1 = MysteryFunctionOne();\n  int* p2 = MysteryFunctionTwo();\n\n  std::cout &lt;&lt; std::hex &lt;&lt; p1 &lt;&lt; std::endl &lt;&lt; p2 &lt;&lt; std::endl;\n\n  // For illustrative purposes, suppose we free both pointers incorrectly\n  free(p1);\n  delete p2;\n\n  return 0;\n}\n</code></pre>\n\n<p><br/>If we compile and run the above program with <code>valgrind program_name</code>, we receive two important error messages, the first of which is:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Mismatched free() / delete / delete []\n   at 0x4C2EDEB: free (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)\n   by 0x400A2E: main (in &lt;path/to/program&gt;)\n Address 0x5ab6c80 is 0 bytes inside a block of size 4 alloc'd\n   at 0x4C2E0EF: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)\n   by 0x4009A3: MysteryFunctionOne() (in &lt;path/to/program&gt;)\n   by 0x4009C8: main (in &lt;path/to/program&gt;)\n</code></pre>\n\n<p><br/>This tells us that we have incorrectly used <code>free</code> in function <code>main</code>.  The lower half of the error message even lets us know that <code>operator new</code> was used in <code>MysteryFunctionOne()</code>.  Thus we know we need to <code>delete</code> the pointer returned by <code>MysteryFunctionOne()</code>, so we change</p>\n\n<pre><code>free(p1);\n</code></pre>\n\n<p>to</p>\n\n<pre><code>delete p1;\n</code></pre>\n\n<p>The second error message we receive is analogous, and from it we learn that we need to <code>free(p2)</code>.</p>\n\n<p>In this case, even without reading the source code or documentation, valgrind was able to guide us towards correct memory management.  In general, this may not always be the case, but it is an option to consider in the absence of the source code or salient documentation.</p>\n"}], "owner": {"reputation": 1961, "user_id": 7022459, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/646lY.png?s=128&g=1", "display_name": "Apollys supports Monica", "link": "https://stackoverflow.com/users/7022459/apollys-supports-monica"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 122, "favorite_count": 0, "accepted_answer_id": 52323213, "answer_count": 3, "score": -4, "last_activity_date": 1536882772, "creation_date": 1536784440, "question_id": 52303070, "link": "https://stackoverflow.com/questions/52303070/to-delete-or-to-free", "title": "To delete or to free", "body": "<p>The C++ language has specific rules about how you must free the memory to which a pointer points.  These rules require you to know how the memory was allocated in order to correctly free it.</p>\n\n<p>For example,</p>\n\n<pre><code>int *p = new int();\nstd::free(p);\n</code></pre>\n\n<p>results in undefined behavior. (<a href=\"https://en.cppreference.com/w/cpp/memory/c/free\" rel=\"nofollow noreferrer\">Reference</a>)</p>\n\n<p>In modern C++, we like to use smart pointers where possible, but sometimes we may want to use libraries or functions that allocate raw pointers.  Suppose I want to use a function of the form:</p>\n\n<pre><code>char* NotMyFunction();\n</code></pre>\n\n<p>How do I properly manage the memory allocated by this function?</p>\n"}, {"tags": ["c++", "linker"], "comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1536781735, "post_id": 52301969, "comment_id": 91552755, "body": "Are you building with optimizations enabled?"}, {"owner": {"reputation": 90367, "user_id": 127724, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/86b3f6d49371d625e0c916944844a678?s=128&d=identicon&r=PG", "display_name": "Artefacto", "link": "https://stackoverflow.com/users/127724/artefacto"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1536781882, "post_id": 52301969, "comment_id": 91552815, "body": "@JesperJuhl yes, but it happens on debug builds as well."}], "answers": [{"comments": [{"owner": {"reputation": 90367, "user_id": 127724, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/86b3f6d49371d625e0c916944844a678?s=128&d=identicon&r=PG", "display_name": "Artefacto", "link": "https://stackoverflow.com/users/127724/artefacto"}, "edited": false, "score": 0, "creation_date": 1536783366, "post_id": 52302581, "comment_id": 91553387, "body": "Thanks, it sort of makes sense, but I still don&#39;t understand why the R_X86_64_GLOB_DAT relocation, why this symbol needs to be resolved at runtime and not at link time when the several compilation units using this method are linked together."}, {"owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "reply_to_user": {"reputation": 90367, "user_id": 127724, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/86b3f6d49371d625e0c916944844a678?s=128&d=identicon&r=PG", "display_name": "Artefacto", "link": "https://stackoverflow.com/users/127724/artefacto"}, "edited": false, "score": 0, "creation_date": 1536783748, "post_id": 52302581, "comment_id": 91553532, "body": "@Artefacto isn&#39;t that because it&#39;s in a shared library?"}, {"owner": {"reputation": 90367, "user_id": 127724, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/86b3f6d49371d625e0c916944844a678?s=128&d=identicon&r=PG", "display_name": "Artefacto", "link": "https://stackoverflow.com/users/127724/artefacto"}, "edited": false, "score": 0, "creation_date": 1536784037, "post_id": 52302581, "comment_id": 91553666, "body": "Why does it matter? Couldn&#39;t the data be put at (different) constant offsets from the instructions that access it, even if these instructions are loaded at different addresses as the library is loaded is itself loaded at different addresses?"}, {"owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "reply_to_user": {"reputation": 90367, "user_id": 127724, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/86b3f6d49371d625e0c916944844a678?s=128&d=identicon&r=PG", "display_name": "Artefacto", "link": "https://stackoverflow.com/users/127724/artefacto"}, "edited": false, "score": 0, "creation_date": 1536784558, "post_id": 52302581, "comment_id": 91553874, "body": "@Artefacto Both the shared library and the main program (and possibly other shared libraries loaded by the program) can contain their own copy of rapidjson, so I think what I said above applies."}], "tags": [], "owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "is_accepted": true, "score": 1, "last_activity_date": 1536782396, "creation_date": 1536782396, "answer_id": 52302581, "question_id": 52301969, "link": "https://stackoverflow.com/questions/52301969/symbol-generated-for-local-static-const-variable/52302581#52302581", "title": "Symbol generated for local static const variable?", "body": "<p>It looks as though the function is being inlined because inlining has been explicitly requested, but while the compiler is inlining the instructions, it has decided to only emit one copy of the <code>escape</code> array, which the linker will merge across translation units, so there will be only one copy in the entire program, so the compiler needs to emit a symbol so that <code>escape</code> can be found by each inlined copy of the function.</p>\n\n<p>(Note: Technically, the standard mandates that a <code>static</code> local variable declared in the body of an inline function with external linkage has a unique address. However, I looked at the source, and it appears that <code>escape</code> is not odr-used, so this unique address is not observable; the compiler could have chosen to inline the content of this array into each translation unit. However, this wastes an additional 256 bytes per translation unit.)</p>\n"}], "owner": {"reputation": 90367, "user_id": 127724, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/86b3f6d49371d625e0c916944844a678?s=128&d=identicon&r=PG", "display_name": "Artefacto", "link": "https://stackoverflow.com/users/127724/artefacto"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "accepted_answer_id": 52302581, "answer_count": 1, "score": 0, "last_activity_date": 1536782396, "creation_date": 1536779818, "last_edit_date": 1536780198, "question_id": 52301969, "link": "https://stackoverflow.com/questions/52301969/symbol-generated-for-local-static-const-variable", "title": "Symbol generated for local static const variable?", "body": "<p>I'm using a rapidjson in a shared library, which at some point starts defining a method like this:</p>\n\n<pre><code>    template&lt;unsigned parseFlags, typename SEncoding, typename TEncoding, typename InputStream, typename OutputStream&gt;\n    RAPIDJSON_FORCEINLINE void ParseStringToStream(InputStream&amp; is, OutputStream&amp; os) {\n//!@cond RAPIDJSON_HIDDEN_FROM_DOXYGEN\n#define Z16 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0\n        static const char escape[256] = {\n            Z16, Z16, 0, 0,'\\\"', 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,'/',\n            Z16, Z16, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,'\\\\', 0, 0, 0,\n            0, 0,'\\b', 0, 0, 0,'\\f', 0, 0, 0, 0, 0, 0, 0,'\\n', 0,\n            0, 0,'\\r', 0,'\\t', 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,\n            Z16, Z16, Z16, Z16, Z16, Z16, Z16, Z16\n        };\n#undef Z16\n//!@endcond\n</code></pre>\n\n<p>What I don't understand is why this generates a relocation:</p>\n\n<p>Output of readelf:</p>\n\n<pre><code>823: 0000000000051b00   256 OBJECT  UNIQUE DEFAULT   14 _ZZN9rapidjson13GenericReaderINS_4UTF8IcEES2_NS_12CrtAllocatorEE19ParseStringToStreamILj0ES2_S2_9PhpStreamNS4_11StackStreamIcEEEEvRT2_RT3_E6escape\n</code></pre>\n\n<p>If the variable is not extern, why the symbol with STB_GNU_UNIQUE binding? Wouldn't just a static offset from the instruction pointer suffice to get to this data?</p>\n"}, {"tags": ["c++", "visual-studio", "cmake", "uwp"], "answers": [{"tags": [], "owner": {"reputation": 91, "user_id": 1879859, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/540eb0ca811c294eab9593519d5c2477?s=128&d=identicon&r=PG&f=1", "display_name": "Poco", "link": "https://stackoverflow.com/users/1879859/poco"}, "is_accepted": false, "score": 1, "last_activity_date": 1548113118, "last_edit_date": 1592644375, "creation_date": 1548113118, "answer_id": 54299156, "question_id": 52301883, "link": "https://stackoverflow.com/questions/52301883/cmake-how-to-add-a-obj-3d-models-to-c-visual-studio-uwp-project/54299156#54299156", "title": "CMake: How to add a .obj 3d models to C++ Visual Studio UWP project", "body": "<p>As per this issue on the cmake gitlab repo <a href=\"https://gitlab.kitware.com/cmake/cmake/issues/18820\" rel=\"nofollow noreferrer\">https://gitlab.kitware.com/cmake/cmake/issues/18820</a>, there is a hacky fix solution but no &quot;correct&quot; fix yet.</p>\n<p>Brad King:</p>\n<blockquote>\n<p>As a very hacky not very futureproof workaround that abuses current implementation details, try:</p>\n<p>get_property(loc SOURCE myfile.obj PROPERTY LOCATION)</p>\n<p>set_property(SOURCE myfile.obj PROPERTY EXTERNAL_OBJECT 0)</p>\n<p>The first line forces <a href=\"https://gitlab.kitware.com/cmake/cmake/blob/v3.13.3/Source/cmSourceFile.cxx#L267-270\" rel=\"nofollow noreferrer\">this code</a> and therefore <a href=\"https://gitlab.kitware.com/cmake/cmake/blob/v3.13.3/Source/cmSourceFile.cxx#L212-216\" rel=\"nofollow noreferrer\">this code</a> to run, causing CMake to initialize the EXTERNAL_OBJECT property earlier than it normally would.  Once that is done then we can set the property back to 0.</p>\n<p>A possible fix would be to teach the latter code (in CheckExtension) to not set the EXTERNAL_OBJECT property if it is already set.  We can't change the default behavior of treating .obj files as objects to link, but we can at least make an explicit property setting work without the above hack.</p>\n</blockquote>\n<p>I have confirmed that this works for the .obj files in our solution.</p>\n"}], "owner": {"reputation": 91, "user_id": 1879859, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/540eb0ca811c294eab9593519d5c2477?s=128&d=identicon&r=PG&f=1", "display_name": "Poco", "link": "https://stackoverflow.com/users/1879859/poco"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 192, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1548113118, "creation_date": 1536779354, "last_edit_date": 1536861841, "question_id": 52301883, "link": "https://stackoverflow.com/questions/52301883/cmake-how-to-add-a-obj-3d-models-to-c-visual-studio-uwp-project", "title": "CMake: How to add a .obj 3d models to C++ Visual Studio UWP project", "body": "<p>I'm trying to add a 3d model to the resources of an Appx in a cmake build.  I have it successfully working with most formats, but files ending in .obj are being treated as compiled object files.</p>\n\n<p>The cmake Visual Studio generator seems to always treat any file with an extension .obj as an object file and adds it to the vcxproj with the  tag.</p>\n\n<p>Is there a way to change the internal type of a file that cmake is using?  Can I specify that this file is NOT an \"EXTERNAL_OBJECT\"?</p>\n\n<p>Setting the VS_DEPLOYMENT_CONTENT to 1 doesn't help.\nAdding it to the RESOURCES property doesn't help.</p>\n\n<p>It looks like it might be an issue in the cmake source code itself where it checks if a file type if EXTERNAL_OBJECT before checking any other flags or types, and I can't figure out how to unset that type.</p>\n"}, {"tags": ["c++", "inheritance", "vector"], "comments": [{"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 2, "creation_date": 1536778906, "post_id": 52301789, "comment_id": 91551478, "body": "The &quot;right solution&quot; is to use free functions if you just want to add some additional methods."}, {"owner": {"reputation": 1469, "user_id": 2397118, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/7241c07b5e6a92c24c2e3e2af011153b?s=128&d=identicon&r=PG", "display_name": "Swiss Frank", "link": "https://stackoverflow.com/users/2397118/swiss-frank"}, "reply_to_user": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 0, "creation_date": 1536779025, "post_id": 52301789, "comment_id": 91551531, "body": "fair enough but why?  Any reason besides  being technically undefined behavior?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 0, "creation_date": 1536779076, "post_id": 52301789, "comment_id": 91551562, "body": "&quot;The spec seems to say that deriving a class with a non-virtual destructor is undefined: Why so?&quot; - It doesn&#39;t say that - it says deleting a derived object through a base pointer is undefined if the base destructor is not virtual."}, {"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 2, "creation_date": 1536779238, "post_id": 52301789, "comment_id": 91551637, "body": "@SwissFrank Actually not UB. It&#39;s perfectly well defined (excepting weird implementations; I&#39;m unsure if <code>std::vector</code> is allowed to be <code>final</code> for instance). As for why, <a href=\"https://youtu.be/WLDT1lDOsb4\" rel=\"nofollow noreferrer\">this CppCon 2017 talk</a> explains it"}, {"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 0, "creation_date": 1536779308, "post_id": 52301789, "comment_id": 91551679, "body": "Personally, I prefer the postfix function call syntax (the member function call syntax), and I am waiting for the day that the proposals which would allow for this get through."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1536790921, "post_id": 52301789, "comment_id": 91556035, "body": "the general rule of thumb is to prefer <a href=\"https://en.wikipedia.org/wiki/Composition_over_inheritance\" rel=\"nofollow noreferrer\">composition over inheritance</a>. The link provides several reasons why."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "is_accepted": false, "score": 1, "last_activity_date": 1536779150, "creation_date": 1536779150, "answer_id": 52301842, "question_id": 52301789, "link": "https://stackoverflow.com/questions/52301789/normally-should-never-public-subclass-vector-but-what-if-just-convenient-metho/52301842#52301842", "title": "normally should never public subclass vector&lt;&gt; but what if just convenient methods?", "body": "<p><a href=\"http://eel.is/c++draft/expr.delete#3\" rel=\"nofollow noreferrer\">expr.delete/3</a>:</p>\n\n<blockquote>\n  <p>In a single-object delete expression, if the static type of the object to be deleted is different from its dynamic type and the selected deallocation function (see below) is not a destroying operator delete, the static type shall be a base class of the dynamic type of the object to be deleted and the static type shall have a virtual destructor or the behavior is undefined. In an array delete expression, if the dynamic type of the object to be deleted differs from its static type, the behavior is undefined.</p>\n</blockquote>\n"}], "owner": {"reputation": 1469, "user_id": 2397118, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/7241c07b5e6a92c24c2e3e2af011153b?s=128&d=identicon&r=PG", "display_name": "Swiss Frank", "link": "https://stackoverflow.com/users/2397118/swiss-frank"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "closed_date": 1536779119, "answer_count": 1, "score": -1, "last_activity_date": 1536779677, "creation_date": 1536778872, "last_edit_date": 1536779677, "question_id": 52301789, "link": "https://stackoverflow.com/questions/52301789/normally-should-never-public-subclass-vector-but-what-if-just-convenient-metho", "closed_reason": "Duplicate", "title": "normally should never public subclass vector&lt;&gt; but what if just convenient methods?", "body": "<p><strong>This is NOT a duplicate of \"Thou shalt not inherit from std::vector\" which is asking about adding \"algorithms\" not methods.</strong></p>\n\n<p>Obviously there'd be a slicing problem if there were extra members, but there aren't.</p>\n\n<p>There could be some other unexpected behavior if any methods were overiden, but they're not.</p>\n\n<p>The spec says that deleting an object via a base-class pointer with a non-virtual destructor is undefined, but assume I have the self-control not to do that and that if I do, my implementation silently succeeds (as I assume all would; any known exceptions?)</p>\n\n<p>There seems to be no problem with ref's or assignments to std vectors as the only things lost would be the additional methods.</p>\n\n<p>Just off the cuff ideas for new methods that I find myself repeating constantly:</p>\n\n<pre><code>T&amp; allow( size_t x ) { // grows the vector when necessary.\n    if ( size() &lt;= x )\n        resize( x+1 );\n}\n\nT&amp; ok( size_t x ) { // get lvalue, growing the vector when necessary.\n    allow( x );\n    return operator[]( x );\n}\n\nint size() { // return type is int, which is much more convenient; limits you to\n             // MAXINT elements but enough for all code I've written in 26 years.\n    return (int) vector&lt;T&gt;::size();\n}\n\nT&amp; back( int i = 0 ) { // gives you back element, or indexed, gives Nth back.\n    return operator[]( size() - i - 1 );\n}\n</code></pre>\n"}, {"tags": ["c++", "lambda", "comparator", "intersection"], "comments": [{"owner": {"reputation": 8027, "user_id": 3282436, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e17caa3e07899b69539433130de1d420?s=128&d=identicon&r=PG&f=1", "display_name": "0x5453", "link": "https://stackoverflow.com/users/3282436/0x5453"}, "edited": false, "score": 2, "creation_date": 1536778981, "post_id": 52301777, "comment_id": 91551514, "body": "The order of the types in your comparator should match the order of the types of the input iterators.  In other words, <code>[](int const&amp; lhs, A const&amp; rhs)</code> should become <code>[](A const&amp; lhs, int const&amp; rhs)</code>."}, {"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 0, "creation_date": 1536779001, "post_id": 52301777, "comment_id": 91551521, "body": "Does it work if you reverse the order of <code>As</code> and <code>Is</code>, meaning <code>std::set_intersection(Is.begin(), Is.end(), As.begin(), As.end(), ...)</code>?"}, {"owner": {"reputation": 19779, "user_id": 878532, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/5fbebb625a289267abd098c0e676c760?s=128&d=identicon&r=PG", "display_name": "Klaus", "link": "https://stackoverflow.com/users/878532/klaus"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1536781420, "post_id": 52301777, "comment_id": 91552623, "body": "@NathanOliver Its not a typo! If providing the reverse order of arguments you get the reverse error message ;) Tested on g++ (GCC) 8.1.1 20180712 (Red Hat 8.1.1-5) on fedora! See my answer, detailed error messages there!"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 19779, "user_id": 878532, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/5fbebb625a289267abd098c0e676c760?s=128&d=identicon&r=PG", "display_name": "Klaus", "link": "https://stackoverflow.com/users/878532/klaus"}, "edited": false, "score": 1, "creation_date": 1536781750, "post_id": 52301777, "comment_id": 91552762, "body": "@Klaus Good point.  I missed that it needs to call the function both ways.  Vote retracted."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1536781804, "post_id": 52301777, "comment_id": 91552782, "body": "If the Q winds up getting closed ping me <a href=\"https://chat.stackoverflow.com/rooms/41570/so-close-vote-reviewers\">SOCVR</a> and I&#39;ll help to get it reopened."}], "answers": [{"comments": [{"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1536782764, "post_id": 52302265, "comment_id": 91553152, "body": "Note that template deduction guides are a C++17 feature (as is pack expansion in a <code>using</code> declaration)"}, {"owner": {"reputation": 19779, "user_id": 878532, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/5fbebb625a289267abd098c0e676c760?s=128&d=identicon&r=PG", "display_name": "Klaus", "link": "https://stackoverflow.com/users/878532/klaus"}, "reply_to_user": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1536782960, "post_id": 52302265, "comment_id": 91553227, "body": "@AndyG: Thanks! Added a note on it."}], "tags": [], "owner": {"reputation": 19779, "user_id": 878532, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/5fbebb625a289267abd098c0e676c760?s=128&d=identicon&r=PG", "display_name": "Klaus", "link": "https://stackoverflow.com/users/878532/klaus"}, "is_accepted": false, "score": 3, "last_activity_date": 1536782939, "last_edit_date": 1536782939, "creation_date": 1536781081, "answer_id": 52302265, "question_id": 52301777, "link": "https://stackoverflow.com/questions/52301777/lambda-comparator-for-stdset-intersection/52302265#52302265", "title": "lambda comparator for `std::set_intersection`", "body": "<p>The problem here is, that the compare function is called in both directions, once with (A,int) and onces with (int,A). I did not inspect the implementation, maybe it is expected that both types are the same.</p>\n\n<p>As a solution you simply can provide both signatures:</p>\n\n<pre><code>class A\n{\n    public:\n        A(int i):a(i){}\n        int a;\n};\n\n// Helper to get Lambda with multiple signatures in place \n// template deduction guide is a C++17 feature! \ntemplate&lt;class... Ts&gt; struct funcs : Ts... { using Ts::operator()...; };\ntemplate&lt;class... Ts&gt; funcs(Ts...) -&gt; funcs&lt;Ts...&gt;;\n\n// if c++17 is not available, you have to write a functor/function\n// with both signatures \n\nint main()\n{\n    std::vector&lt;A&gt; As;\n    As.push_back(A(1)); \n    As.push_back(A(2));\n    As.push_back(A(3));\n    As.push_back(A(4));\n    As.push_back(A(5));\n\n    std::vector&lt;int&gt; Is = {2,4};\n    std::vector&lt;int&gt; Bs = {1,2,3,4,5};\n\n    std::vector&lt;A&gt; intersection;\n\n    std::set_intersection\n        (\n            As.begin(), As.end(),\n            Is.begin(), Is.end(),\n            std::back_inserter(intersection),\n            funcs{\n                [](A const&amp; lhs, int const&amp; rhs)\n                {\n                    return lhs.a &lt; rhs;\n                },\n                [](int const&amp; lhs, A const&amp; rhs)\n                {\n                    return lhs &lt; rhs.a;\n                }\n            }\n        );\n}\n</code></pre>\n\n<p>I run this under g++ (GCC) 8.1.1 20180712 (Red Hat 8.1.1-5) on fedora. If I only provide one signature, independent of using int or A first, I got the error :</p>\n\n<p>1)</p>\n\n<pre><code>no match for call to '(main()::&lt;lambda(const A&amp;, const int&amp;)&gt;) (int&amp;, A&amp;)'\n</code></pre>\n\n<p>or</p>\n\n<p>2)</p>\n\n<pre><code>no match for call to '(main()::&lt;lambda(const int&amp;, const A&amp;)&gt;) (A&amp;, int&amp;)'\n</code></pre>\n\n<p>So it is needed to provide a comp function which accepts both signatures here.</p>\n"}, {"tags": [], "owner": {"reputation": 14929, "user_id": 2051137, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/1sIMq.jpg?s=128&g=1", "display_name": "Remi.b", "link": "https://stackoverflow.com/users/2051137/remi-b"}, "is_accepted": false, "score": 0, "last_activity_date": 1536785929, "creation_date": 1536785929, "answer_id": 52303399, "question_id": 52301777, "link": "https://stackoverflow.com/questions/52301777/lambda-comparator-for-stdset-intersection/52303399#52303399", "title": "lambda comparator for `std::set_intersection`", "body": "<p>Following @Klaus suggestion to use a funktor, here is a working example using a funktor.</p>\n\n<pre><code>class A\n{\npublic:\n    A(int i):a(i){}\n    int a;\n};\n\nclass comparatorsForSetIntersection\n{\npublic:\n    bool operator()(int lhs, A rhs) {return lhs + rhs.a;}\n    bool operator()(A lhs, int rhs) {return lhs.a + rhs;}\n};\n\nint main()\n{\n  std::vector&lt;A&gt; As;\n  As.push_back(A(1));\n  As.push_back(A(2));\n  As.push_back(A(3));\n  As.push_back(A(4));\n  As.push_back(A(5));\n\n  std::vector&lt;int&gt; Is = {2,4};\n  std::vector&lt;int&gt; Bs = {1,2,3,4,5};\n\n  std::vector&lt;A&gt; intersection;\n\n  comparatorsForSetIntersection comps;\n  std::set_intersection\n  (\n    As.begin(), As.end(),\n    Is.begin(), Is.end(),\n    std::back_inserter(intersection),\n    comps\n  );\n}\n</code></pre>\n"}], "owner": {"reputation": 14929, "user_id": 2051137, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/1sIMq.jpg?s=128&g=1", "display_name": "Remi.b", "link": "https://stackoverflow.com/users/2051137/remi-b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 405, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1536785929, "creation_date": 1536778785, "question_id": 52301777, "link": "https://stackoverflow.com/questions/52301777/lambda-comparator-for-stdset-intersection", "title": "lambda comparator for `std::set_intersection`", "body": "<p>The following code throw a compilation error</p>\n\n<pre><code>class A\n{\npublic:\n    A(int i):a(i){}\n    int a;\n};\n\n\nint main()\n{\n  std::vector&lt;A&gt; As;\n  As.push_back(A(1));\n  As.push_back(A(2));\n  As.push_back(A(3));\n  As.push_back(A(4));\n  As.push_back(A(5));\n\n  std::vector&lt;int&gt; Is = {2,4};\n  std::vector&lt;int&gt; Bs = {1,2,3,4,5};\n\n  std::vector&lt;A&gt; intersection;\n\n  std::set_intersection\n  (\n    As.begin(), As.end(),\n    Is.begin(), Is.end(),\n    std::back_inserter(intersection),\n    [](int const&amp; lhs, A const&amp; rhs)\n    {\n        return lhs &lt; rhs.a;\n    }\n  );\n}\n</code></pre>\n\n<blockquote>\n  <p>error: no matching function for call to object of type '(lambda at c.cpp:33:4)' if (__comp(*__first1, *__first2))</p>\n</blockquote>\n\n<p>I failed to implement a lambda function for the comparator of this <code>std::set_intersection</code>. I have also tried to overload the <code>operator&gt;</code>, <code>operator&lt;</code> and <code>operator==</code> in class <code>A</code> but it still fail. Can you help me out?</p>\n"}, {"tags": ["c++", "qt", "qt5"], "comments": [{"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1536779030, "post_id": 52301744, "comment_id": 91551535, "body": "Qt has JSON support."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1536779068, "post_id": 52301744, "comment_id": 91551556, "body": "<code>QTableWidget *ui_userTokens = new QTableWidget();</code> you will have memory leaks if you don&#39;t set the parents."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1536779110, "post_id": 52301744, "comment_id": 91551582, "body": "You probably want a JSON model <a href=\"https://github.com/dridk/QJsonModel\" rel=\"nofollow noreferrer\">github.com/dridk/QJsonModel</a> or maybe <a href=\"https://github.com/poulh/qjsontablemodel\" rel=\"nofollow noreferrer\">github.com/poulh/qjsontablemodel</a>"}, {"owner": {"reputation": 4576, "user_id": 3156300, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/Oo88B.png?s=128&g=1", "display_name": "JokerMartini", "link": "https://stackoverflow.com/users/3156300/jokermartini"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1536779432, "post_id": 52301744, "comment_id": 91551738, "body": "@drescherjm how do i assign the parent when ill be eventually adding it into a gridlayout with a specific column/grid order?"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1536779819, "post_id": 52301744, "comment_id": 91551906, "body": "Change <code>QVBoxLayout * layout = new QVBoxLayout();</code> to <code>QVBoxLayout * layout = new QVBoxLayout(this);</code>"}, {"owner": {"reputation": 4576, "user_id": 3156300, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/Oo88B.png?s=128&g=1", "display_name": "JokerMartini", "link": "https://stackoverflow.com/users/3156300/jokermartini"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1536779868, "post_id": 52301744, "comment_id": 91551923, "body": "@drescherjm and from there im fine to leave everything else as is? Thank you for your kind help on this. i appreciate it."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1536780003, "post_id": 52301744, "comment_id": 91551972, "body": "The layout will become the parent of <code>ui_userTokens</code>. Here is the info on that: <a href=\"http://doc.qt.io/qt-5/qlayout.html#addItem\" rel=\"nofollow noreferrer\">doc.qt.io/qt-5/qlayout.html#addItem</a>"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1536780195, "post_id": 52301744, "comment_id": 91552052, "body": "After you add a JSON model you would switch your QTableWidget  to a QTableView and use <a href=\"http://doc.qt.io/qt-5/qtableview.html#setModel\" rel=\"nofollow noreferrer\">doc.qt.io/qt-5/qtableview.html#setModel</a>"}, {"owner": {"reputation": 4576, "user_id": 3156300, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/Oo88B.png?s=128&g=1", "display_name": "JokerMartini", "link": "https://stackoverflow.com/users/3156300/jokermartini"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1536780842, "post_id": 52301744, "comment_id": 91552339, "body": "@drescherjm I&#39;m assuming the json model would be ideal, since I&#39;ll eventually be making it possible for users to right-click an item in the table and Remove or Edit the item. Being slightly familiar with models from python, i can see why. If you were interested in helping me out i would gladly paypal you for your time. Would you be interested in that?"}, {"owner": {"reputation": 4576, "user_id": 3156300, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/Oo88B.png?s=128&g=1", "display_name": "JokerMartini", "link": "https://stackoverflow.com/users/3156300/jokermartini"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1536781389, "post_id": 52301744, "comment_id": 91552608, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/179934/discussion-between-jokermartini-and-drescherjm\">continue this discussion in chat</a>."}], "answers": [{"comments": [{"owner": {"reputation": 4576, "user_id": 3156300, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/Oo88B.png?s=128&g=1", "display_name": "JokerMartini", "link": "https://stackoverflow.com/users/3156300/jokermartini"}, "edited": false, "score": 0, "creation_date": 1536780990, "post_id": 52302059, "comment_id": 91552414, "body": "Thank you for your example on this eyllanesc, This is certainly helpful. Based on the users comments above, im assuming it would be beneficial to use a Model approach since I intend on making it possible for users to doubleclick a row item to change it&#39;s key and value, as well as remove items from the table by right-clicking and doing Edit or Remove. The edit would popupte a dialog with two fields pre-populated with Key and Value where the user can edit them and hit Ok or Cancel."}, {"owner": {"reputation": 6908, "user_id": 5366641, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/71e9ba6e3cdac2461999d9c32ad9d507?s=128&d=identicon&r=PG", "display_name": "scopchanov", "link": "https://stackoverflow.com/users/5366641/scopchanov"}, "edited": false, "score": 0, "creation_date": 1536781200, "post_id": 52302059, "comment_id": 91552511, "body": "@eyllanesc, could you please explain what <code>R&quot;</code> means. I haven&#39;t met this notation before and because of its syntax I don&#39;t get relevant results when I search for it."}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "reply_to_user": {"reputation": 6908, "user_id": 5366641, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/71e9ba6e3cdac2461999d9c32ad9d507?s=128&d=identicon&r=PG", "display_name": "scopchanov", "link": "https://stackoverflow.com/users/5366641/scopchanov"}, "edited": false, "score": 0, "creation_date": 1536781463, "post_id": 52302059, "comment_id": 91552644, "body": "@scopchanov read <a href=\"https://en.cppreference.com/w/cpp/language/string_literal\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/language/string_literal</a>"}, {"owner": {"reputation": 6908, "user_id": 5366641, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/71e9ba6e3cdac2461999d9c32ad9d507?s=128&d=identicon&r=PG", "display_name": "scopchanov", "link": "https://stackoverflow.com/users/5366641/scopchanov"}, "edited": false, "score": 0, "creation_date": 1536781773, "post_id": 52302059, "comment_id": 91552769, "body": "@eyllanesc, so it is something like <code>verbatim</code> in <code>LaTeX</code>. Do I understand it right?"}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "reply_to_user": {"reputation": 4576, "user_id": 3156300, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/Oo88B.png?s=128&g=1", "display_name": "JokerMartini", "link": "https://stackoverflow.com/users/3156300/jokermartini"}, "edited": false, "score": 1, "creation_date": 1536781842, "post_id": 52302059, "comment_id": 91552801, "body": "@JokerMartini QTableWidget is a QTableView with a model, so in a certain way it is using the model but the objective of QTableWidget is that the developer does not know about it and can work without problems, for example the QTableWidget allows you to change the values but not the keys since there is no access or representation, in the end if you want to generate the json you just have to retrieve the QTableWidget and build it. If you want to edit the keys, your view should be a QTreeView or its equivalent a QTreeWidget."}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "reply_to_user": {"reputation": 4576, "user_id": 3156300, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/Oo88B.png?s=128&g=1", "display_name": "JokerMartini", "link": "https://stackoverflow.com/users/3156300/jokermartini"}, "edited": false, "score": 1, "creation_date": 1536781850, "post_id": 52302059, "comment_id": 91552808, "body": "@JokerMartini [cont] It will depend on how much customization I want to give you and your knowledge, I see that you know few models so I would recommend starting with a QTreeWidget. The right-click functionalities all views have since they inherit from QAbstractItemView."}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "reply_to_user": {"reputation": 6908, "user_id": 5366641, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/71e9ba6e3cdac2461999d9c32ad9d507?s=128&d=identicon&r=PG", "display_name": "scopchanov", "link": "https://stackoverflow.com/users/5366641/scopchanov"}, "edited": false, "score": 0, "creation_date": 1536782041, "post_id": 52302059, "comment_id": 91552871, "body": "@scopchanov you could say that if, for example with string literals you can use \\ without placing \\\\."}, {"owner": {"reputation": 6908, "user_id": 5366641, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/71e9ba6e3cdac2461999d9c32ad9d507?s=128&d=identicon&r=PG", "display_name": "scopchanov", "link": "https://stackoverflow.com/users/5366641/scopchanov"}, "edited": false, "score": 0, "creation_date": 1536782157, "post_id": 52302059, "comment_id": 91552911, "body": "@eyllanesc, I see. I didn&#39;t know that and it was helpful for me. Thank you very much!"}, {"owner": {"reputation": 4576, "user_id": 3156300, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/Oo88B.png?s=128&g=1", "display_name": "JokerMartini", "link": "https://stackoverflow.com/users/3156300/jokermartini"}, "edited": false, "score": 0, "creation_date": 1536783269, "post_id": 52302059, "comment_id": 91553358, "body": "@eyllanesc I emailed you about a question"}], "tags": [], "owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "is_accepted": true, "score": 3, "last_activity_date": 1536780197, "creation_date": 1536780197, "answer_id": 52302059, "question_id": 52301744, "link": "https://stackoverflow.com/questions/52301744/populating-qtablewidget-from-value/52302059#52302059", "title": "Populating QTableWidget from value", "body": "<p>As noted in the comments Qt supports Json, in the next part I show you an example, plus you should consider that C ++ gives freedom to handle memory so take into account in eliminating it if necessary, in the case of Qt many times it is give that responsibility to Qt through the kinship tree.</p>\n\n<p><strong>*.h</strong></p>\n\n<pre><code>#ifndef TOKENEDITOR_H\n#define TOKENEDITOR_H\n\n#include &lt;QWidget&gt;\n\nclass QTableWidget;\n\nclass TokenEditor : public QWidget\n{\n    Q_OBJECT\n\npublic:\n    explicit TokenEditor(QWidget *parent = nullptr);\n    ~TokenEditor();\n\nprivate:\n    QTableWidget *ui_userTokens;\n};\n\n#endif // TOKENEDITOR_H\n</code></pre>\n\n<p><strong>*.cpp</strong></p>\n\n<pre><code>#include \"tokeneditor.h\"\n\n#include &lt;QJsonDocument&gt;\n#include &lt;QJsonObject&gt;\n#include &lt;QJsonArray&gt;\n\n#include &lt;QTableWidget&gt;\n#include &lt;QVBoxLayout&gt;\n\nTokenEditor::TokenEditor(QWidget *parent) :\n    QWidget(parent),\n    ui_userTokens(new QTableWidget)\n{\n    const std::string json = R\"([{\n                             \"key\": \"SHOT\",\n                             \"value\": \"\",\n                             \"description\": \"Current Shot node name\"\n                             },\n                             {\n                             \"key\": \"PASS\",\n                             \"value\": \"\",\n                             \"description\": \"Current Pass node name\"\n                             },\n                             {\n                             \"key\": \"SELF\",\n                             \"value\": \"\",\n                             \"description\": \"Current node name\"\n                             },\n                             {\n                             \"key\": \"MM\",\n                             \"value\": \"\",\n                             \"description\": \"Current month as integer ex: 12\"\n                             },\n                             {\n                             \"key\": \"DD\",\n                             \"value\": \"\",\n                             \"description\": \"Current day as integer ex: 07\"\n                             }\n                             ])\";\n\n    QJsonDocument doc = QJsonDocument::fromJson(QByteArray::fromStdString(json));\n\n    auto layout = new QVBoxLayout(this);\n    layout-&gt;setMargin(0);\n    layout-&gt;setSpacing(0);\n    layout-&gt;addWidget(ui_userTokens);\n\n    ui_userTokens-&gt;setRowCount(5);\n    ui_userTokens-&gt;setColumnCount(3);\n    ui_userTokens-&gt;setHorizontalHeaderLabels({\"key\", \"value\", \"description\"});\n\n    int r=0;\n    for(const QJsonValue &amp; val : doc.array()){\n        QJsonObject obj = val.toObject();\n        int c=0;\n        for(const QString &amp; key: obj.keys()){\n            auto *it = new QTableWidgetItem(obj[key].toString());\n            ui_userTokens-&gt;setItem(r, c, it);\n            c++;\n        }\n        r++;\n    }\n}\n\nTokenEditor::~TokenEditor()\n{\n}\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/05imr.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/05imr.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 4576, "user_id": 3156300, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/Oo88B.png?s=128&g=1", "display_name": "JokerMartini", "link": "https://stackoverflow.com/users/3156300/jokermartini"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 493, "favorite_count": 0, "accepted_answer_id": 52302059, "answer_count": 1, "score": 2, "last_activity_date": 1555825133, "creation_date": 1536778643, "last_edit_date": 1555825133, "question_id": 52301744, "link": "https://stackoverflow.com/questions/52301744/populating-qtablewidget-from-value", "title": "Populating QTableWidget from value", "body": "<p>I'm coming from a background of python and pyside. So I apologize for anything that may appear as an odd practice in C++.</p>\n\n<p><a href=\"https://i.stack.imgur.com/fXnAT.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/fXnAT.png\" alt=\"enter image description here\"></a></p>\n\n<p>Two questions:</p>\n\n<ol>\n<li><p>I want to populate a table with a set of data which is currently a list of dictionaries, as seen in my original python code. How would this be translated into my C++ Qt project so i can populate my tablewidget using this data? It doesn't appear that Qt uses dictionaries like python, it uses QMap.</p></li>\n<li><p>It looks like Qt uses a QMap variant, not dictionaries. I'm open to formatting the data differently if there is a more efficient way of doing so. Whatever will make it easy to save to a text file and at the same time load from a file it populate the ui. It's important to mention that this data will eventually be saved to a file and loaded from a file. That's why my old python project uses json as the format.</p></li>\n</ol>\n\n<p>My goal is to eventually extend my subclass of QTableWidget to add methods for loading from a file and saving to a file. Similar to presets.</p>\n\n<p>List of Dictionaries:</p>\n\n<pre><code>[\n    {\n        \"key\":\"SHOT\",\n        \"value\":\"\",\n        \"description\":\"Current Shot node name\",\n    },\n    {\n        \"key\":\"PASS\",\n        \"value\":\"\",\n        \"description\":\"Current Pass node name\",\n    },\n    {\n        \"key\":\"SELF\",\n        \"value\":\"\",\n        \"description\":\"Current node name\",\n    },\n    {\n        \"key\":\"MM\",\n        \"value\":\"\",\n        \"description\":\"Current month as integer ex: 12\",\n    },\n    {\n        \"key\":\"DD\",\n        \"value\":\"\",\n        \"description\":\"Current day as integer ex: 07\",\n    }\n]\n</code></pre>\n\n<p>cpp</p>\n\n<pre><code>#include \"tokeneditor.h\"\n#include &lt;QTableWidget&gt;\n#include &lt;QVBoxLayout&gt;\n\nTokenEditor::TokenEditor(QWidget *parent) : QWidget(parent)\n{\n    // Controls\n    QTableWidget *ui_userTokens = new QTableWidget();\n\n    // Layout\n    QVBoxLayout * layout = new QVBoxLayout();\n    layout-&gt;setMargin(0);\n    layout-&gt;setSpacing(0);\n    layout-&gt;addWidget(ui_userTokens);\n    setLayout(layout);\n\n    // populate table with data...\n}\n</code></pre>\n"}, {"tags": ["c++", "doxygen"], "answers": [{"comments": [{"owner": {"reputation": 2862, "user_id": 4858640, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/c3eef6d48a6bc20ea9c2c2825dc9c6d6?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4858640/peter"}, "edited": false, "score": 0, "creation_date": 1536779305, "post_id": 52301586, "comment_id": 91551674, "body": "I have already documented the class they appear in (by adding a comment block containing the <code>@file</code> tag at the top of the file), so that does not seem to work. Documenting the containing namespace does work, I did not want to document it but maybe I&#39;ll just live with that (or try grouping)."}, {"owner": {"reputation": 5891, "user_id": 1657886, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34d48ba7c8258ef5c613ba129411a6b0?s=128&d=identicon&r=PG", "display_name": "albert", "link": "https://stackoverflow.com/users/1657886/albert"}, "reply_to_user": {"reputation": 2862, "user_id": 4858640, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/c3eef6d48a6bc20ea9c2c2825dc9c6d6?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4858640/peter"}, "edited": false, "score": 2, "creation_date": 1536781687, "post_id": 52301586, "comment_id": 91552727, "body": "@peter please add an example to your question including the changes to your Doxyfile. It might be that something is not 100% correct in respect to your settings."}], "tags": [], "owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "is_accepted": true, "score": 3, "last_activity_date": 1536778957, "last_edit_date": 1536778957, "creation_date": 1536777928, "answer_id": 52301586, "question_id": 52301544, "link": "https://stackoverflow.com/questions/52301544/doxygen-no-hyperlinks-generated-for-non-member-functions/52301586#52301586", "title": "Doxygen: no hyperlinks generated for non-member functions", "body": "<p>Doxygen, being derived from JavaDoc to a degree, is somewhat class-centric. As such, documented elements which are not members of a class need to be members of <em>something</em> for them to appear in the documentation.</p>\n\n<p>Your choices are to make them members of a documented file (which requires that you document the file they appear within), a documented namespace, or to add them to an existing documentation module/group via <code>\\addtogroup</code> and similar documentation tools.</p>\n\n<p>This is not necessarily a bad thing. Documentation modules are very useful for separating out related functions/classes. And documenting files and namespaces is good too, so that users can see a list of what is a part of each file or namespace.</p>\n"}], "owner": {"reputation": 2862, "user_id": 4858640, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/c3eef6d48a6bc20ea9c2c2825dc9c6d6?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4858640/peter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 215, "favorite_count": 0, "accepted_answer_id": 52301586, "answer_count": 1, "score": 1, "last_activity_date": 1536778957, "creation_date": 1536777669, "question_id": 52301544, "link": "https://stackoverflow.com/questions/52301544/doxygen-no-hyperlinks-generated-for-non-member-functions", "title": "Doxygen: no hyperlinks generated for non-member functions", "body": "<p>I'm using Doxygen 1.8.14, in my generated documentation, the brief descriptions of class member functions at the top of each html file corresponding to a class and all mentions of such functions in the same html document point to the full function documentation further down on the page via hyperlinks.</p>\n\n<p>However, this does not happen (both cases) for functions which are not class members.</p>\n\n<p>To me this seems like Doxygen is broken or is there something I'm missing? I believe that according to the documentation this should work.</p>\n"}, {"tags": ["c++", "arrays", "inheritance"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 3, "creation_date": 1536777137, "post_id": 52301418, "comment_id": 91550640, "body": "Why does <code>Vector</code> (not to be confused with <code>std::vector</code>) have an array of itself inside of itself? Do you mean <code>Base* vec[N]</code>?"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1536777159, "post_id": 52301418, "comment_id": 91550655, "body": "Use an array of pointers to base. That&#39;ll work."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1536777207, "post_id": 52301418, "comment_id": 91550685, "body": "If you must avoid <code>std::vector</code>, at least implement the same API. <code>push_back</code> not <code>add</code>."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 1, "creation_date": 1536777216, "post_id": 52301418, "comment_id": 91550693, "body": "<code>class DerivedCar : Base</code> - you almost certainly want <code>class DerivedCar : public Base</code> and similar elsewhere."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1536777375, "post_id": 52301418, "comment_id": 91550761, "body": "@NeilButterworth completely agree, this is fantasy code regardless. At least the desired intent is stated, even if the code is nowhere close to valid C++."}, {"owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 3, "creation_date": 1536777744, "post_id": 52301418, "comment_id": 91550899, "body": "Arrays by definitions may only contain objects of the same type. In order to overcome this you will need an extra layer of indirection, for example by storing pointers to (polymorphic) base class (as suggested above) or some sort of <code>variant</code> combining all the types to be stored."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1536778191, "post_id": 52301418, "comment_id": 91551098, "body": "Why don&#39;t you simply use different arrays for different types?"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1536778740, "post_id": 52301418, "comment_id": 91551382, "body": "Vector can&#39;t contain an array of Vector. That would make it infinity large because each of these Vectors in the array would have to have an array of Vectors.."}], "answers": [{"tags": [], "owner": {"reputation": 9434, "user_id": 528720, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZpqMk.png?s=128&g=1", "display_name": "&#214;&#246; Tiib", "link": "https://stackoverflow.com/users/528720/%c3%96%c3%b6-tiib"}, "is_accepted": false, "score": 0, "last_activity_date": 1536783477, "last_edit_date": 1536783477, "creation_date": 1536782984, "answer_id": 52302719, "question_id": 52301418, "link": "https://stackoverflow.com/questions/52301418/how-to-add-derived-class-objects-to-an-array-of-base-class-type/52302719#52302719", "title": "How to add derived class objects to an array of base class type?", "body": "<blockquote>\n  <p>How to add derived class objects to an array of base class type?</p>\n</blockquote>\n\n<p>You can not put derived class objects into raw array or <code>std::vector</code> of base class because the derived class objects are usually larger and so simply do not fit there.</p>\n\n<blockquote>\n  <p>Is there a better approach to this other than the way I did? </p>\n</blockquote>\n\n<p>Better approaches are certainly out there. One good example of such containers with polymorphic elements is <a href=\"https://www.boost.org/doc/libs/1_68_0/doc/html/poly_collection.html\" rel=\"nofollow noreferrer\">boost::base_collection</a>. Read its documentation and its source code. If you do not understand some detail in it then ask about that detail in Stack Overflow. </p>\n\n<blockquote>\n  <p>What would be the best way to keep copying of objects at a minimum.</p>\n</blockquote>\n\n<p>Containers that only contain pointers to objects and intrusive containers\nkeep copying of objects at minimum. However such containers do not \nmanage the objects and so responsibility of objects life time has\nto be taken by something outside.</p>\n"}, {"tags": [], "owner": {"reputation": 884, "user_id": 9238288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0dbf252a32c63647e64ea7b1a534be4a?s=128&d=identicon&r=PG&f=1", "display_name": "jackw11111", "link": "https://stackoverflow.com/users/9238288/jackw11111"}, "is_accepted": false, "score": 0, "last_activity_date": 1536808332, "creation_date": 1536808332, "answer_id": 52306126, "question_id": 52301418, "link": "https://stackoverflow.com/questions/52301418/how-to-add-derived-class-objects-to-an-array-of-base-class-type/52306126#52306126", "title": "How to add derived class objects to an array of base class type?", "body": "<p>Here is a possible way that implements a linked list:</p>\n\n<pre><code>class Base\n{\n\n};\n\nclass DerivedCar : public Base\n{\npublic:\n    DerivedCar(int a) { _a = a; };\nprivate:\n    int _a;\n};\n\nclass DerivedHouse : public Base \n{\npublic:\n    DerivedHouse(float b) { _b = b; };\nprivate:\n    float _b;\n};\n\nclass Object\n{\npublic:\n    const Base *data;\n    const Object *next; \n};\n\nclass Vector \n{\npublic:\n    void add(const Base&amp; v)\n    {\n        Object item;\n        item.data = &amp;v;\n        head.next = &amp;item;\n        index++;\n    }\nprivate:\n    Object head;\n    int index = 0;\n};\n\nint main()\n{\n    Vector vector;\n    DerivedCar car(100);\n    DerivedHouse house(2.f);\n    vector.add(car);\n    vector.add(house);\n}\n</code></pre>\n"}], "owner": {"reputation": 103, "user_id": 8763949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14e5b882250fa6755657b5b3ad0a0bc9?s=128&d=identicon&r=PG&f=1", "display_name": "DummySenior", "link": "https://stackoverflow.com/users/8763949/dummysenior"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 570, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1536808332, "creation_date": 1536777017, "question_id": 52301418, "link": "https://stackoverflow.com/questions/52301418/how-to-add-derived-class-objects-to-an-array-of-base-class-type", "title": "How to add derived class objects to an array of base class type?", "body": "<p>unfortunately, I can't use <code>std::vector</code> and have to use plain C++ arrays. I got the following code:</p>\n\n<pre><code>class Base\n{\n\n}\n\nclass DerivedCar : Base\n{\npublic:\n    DerivedCar(int a) a(a) {};\nprivate:\n    int a;\n}\n\nclass DerivedHouse : Base\n{\n  public:\n    DerivedHouse(float b) b(b) {};\nprivate:\n    float b;  \n}\n\nclass Vector\n{\n    Vector() :\n    index(0)\n\n    void add(const DerivedCar&amp; car)\n    {\n       vec[index] = new DerivedCar(car.a);\n       index++;\n    }\n\n    void add(const DerivedHouse&amp; house)\n    {\n       vec[index] = new DerivedHouse(house.b);\n       index++;\n    }\n\nprivate:\n    Vector vec[100];\n    int index;\n}\n\nint main()\n{\n    Vector vector;\n    DerivedCar car(100);\n    DerivedHouse house(2.f);\n\n    vector.add(car);\n    vector.add(house);\n}\n</code></pre>\n\n<p>I would like to have an array of type <code>Base</code> and add objects of a derived type. \nIs there a better approach to this other than the way I did? What would be the best way to keep copying of objects at a minimum.</p>\n"}, {"tags": ["c++", "templates", "design-patterns", "polymorphism"], "comments": [{"owner": {"reputation": 293, "user_id": 10354734, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dc48e8a615be1bdf21d83863ff452e7?s=128&d=identicon&r=PG&f=1", "display_name": "notnonuninvisible", "link": "https://stackoverflow.com/users/10354734/notnonuninvisible"}, "edited": false, "score": 0, "creation_date": 1536777716, "post_id": 52301325, "comment_id": 91550885, "body": "I could, but the big picture is - it&#39;s a graph of e.g. cities. The cities might have airports (a member), train stations (+ a schedule), ports, museums (+ prices), etc. I could just use Json::Value for all of it, but changing it to anything else would mean: typedef &amp;&amp; recompile. I would like a &quot;generic&quot; approach without templates because then I have graph, vertex, edge (different costs of a train ticket if train present), etc. I&#39;d have to carry the Json::Value &quot;data&quot; template parameter throughout the code. Or typedef and recompile."}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1536818198, "post_id": 52301325, "comment_id": 91562020, "body": "This has a bit of smell of bad design... In a polymorphic approach, Base class should provide all the means that are necessary to get along with without having to cast to a derived type. Maybe you have just not the appropriate base classes; assuming <code>Airport</code>, <code>Station</code>, <code>Port</code> and <code>Museum</code> all share a common base class - then you&#39;ll discover that a museum has much less in common with the others as these with each other."}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1536818203, "post_id": 52301325, "comment_id": 91562024, "body": "Maybe you should consider a common base <code>TransportFacility</code> for <code>A</code>, <code>S</code> and <code>P</code>, but not for <code>M</code>, where TF and M still inherit from the old base, so that you e. g. can check if cities are connected by iterating over the TF only? Of course, this is just an example, if this <i>really</i> is appropriate depends on what you <i>actually</i> intend to do, which you did not tell, though."}], "answers": [{"comments": [{"owner": {"reputation": 293, "user_id": 10354734, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dc48e8a615be1bdf21d83863ff452e7?s=128&d=identicon&r=PG&f=1", "display_name": "notnonuninvisible", "link": "https://stackoverflow.com/users/10354734/notnonuninvisible"}, "edited": false, "score": 0, "creation_date": 1536912457, "post_id": 52306711, "comment_id": 91602035, "body": "Thanks for pointing me to std::variant, i&#39;ll have a look at it. Basically I&#39;m trying to avoid carrying template parameter just because one class in the hierarchy is supposed to hold a blob of any data which the different parts of the program would interpret/serialize/process depending on the blob&#39;s type. I could use boost::any or simply void* and maybe hold a tag/number representing what type it is. However I am looking for a type-safe way in the language. Let&#39;s say it&#39;s a linked list where a node holds a value, a pointer and arbitrary metadata about this node (in various formats)."}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "reply_to_user": {"reputation": 293, "user_id": 10354734, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dc48e8a615be1bdf21d83863ff452e7?s=128&d=identicon&r=PG&f=1", "display_name": "notnonuninvisible", "link": "https://stackoverflow.com/users/10354734/notnonuninvisible"}, "edited": false, "score": 0, "creation_date": 1536914647, "post_id": 52306711, "comment_id": 91603081, "body": "Sounds like an example for the virtual getters: all other classes return their respective value, the one holding the blob calculates the desired value (you&#39;d otherwise have to fetch and calculate from the variant) and returns this one. Or you spare the virtual function call entirely and do those calculations in the constructor, storing the result - well, in the common member..."}], "tags": [], "owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "is_accepted": false, "score": 0, "last_activity_date": 1536819146, "last_edit_date": 1536819146, "creation_date": 1536813367, "answer_id": 52306711, "question_id": 52301325, "link": "https://stackoverflow.com/questions/52301325/member-of-derived-by-pointer-to-base-static-cast-crtp-removing-templates/52306711#52306711", "title": "Member of derived by pointer to base, static_cast, crtp, removing templates", "body": "<p>A virtual getter can solve the issue for you; as data types differ, you might pack them into a <a href=\"https://en.cppreference.com/w/cpp/utility/variant\" rel=\"nofollow noreferrer\"><code>std::variant</code></a>.</p>\n\n<pre><code>class Base\n{\n    // having private members probably is more appropriate\n    int member_of_base;\n\npublic:\n    using Data = std::variant&lt;int, double&gt;;\n\n    virtual ~Base() { } // virtual functions -&gt; have a virtual destructor!\n\n    virtual Data getMember() // or just \"member\", if you prefer without prefix\n    {\n        return member_of_base;\n    }\n};\n\nclass Derived : public Base\n{\n    double member_of_derived;\n\npublic:   \n    Data getMember() override\n    {\n        return member_of_derived;\n    }\n};\n\nstd::unique_ptr&lt;Base&gt; foo = new Base();\nfoo-&gt;getMember(); // member_of_base;\nstd::unique_ptr&lt;Base&gt; bar = new Derived();\nbar-&gt;getMember(); // member_of_derived;\n</code></pre>\n\n<p>Admitted, not yet totally without templates, <code>std::variant</code> is one, but I suppose in that form it is acceptable...</p>\n\n<p>There are some issues with, though:</p>\n\n<ol>\n<li>Accessing the value is not the simplest, you might consider <a href=\"https://en.cppreference.com/w/cpp/utility/variant/visit\" rel=\"nofollow noreferrer\"><code>visit</code></a> function for.</li>\n<li>More severe: Base class (or wherever else you define the variant to be used) needs to be aware of all types that might be in use, adding a new type will force to recompile all other classes.</li>\n<li>It has the smell of bad design. Why should it be necessary for a derived class to return something different than the base that shall serve the same purpose, though???</li>\n</ol>\n\n<p>If you can delegate the work to be done to the classes themselves, you get around all these problems:</p>\n\n<pre><code>class Base\n{\n    int member_of_base;\n\npublic:\n    virtual ~Base() { }\n\n    virtual void doSomething()\n    {\n        /* use member_of_base */\n    }\n};\n\nclass Derived : public Base\n{\n    double member_of_derived;\n\npublic:\n    void doSomething() override\n    {\n        /* use member_of_derived */   \n    }\n};\n</code></pre>\n\n<p>The latter would be the true polymorphic approach and normally the way to go; whereas the sample above returns void, you might just do all the calculations necessary in base and derived classes until you finally get to some common data type and return this one. Example:</p>\n\n<pre><code>class Base\n{\n    int64_t m_balance; // in 100th of currency in use\n\npublic:\n    virtual ~Base() { }\n\n    virtual int64_t balance()\n    {\n        return m_balance;\n    }\n};\n\nclass Derived : public Base\n{\n    long double m_balance; // arbitrary values in whole currency entities\n\npublic:\n    int64_t balance() override\n    {\n        // calculate 100th of currency, correctly rounded:\n        return std::llround(m_balance * 100);\n    }\n};\n</code></pre>\n\n<p>Admitted, I doubt pretty much representing a balance in double (even if long) is a good idea (issues with rounding, precision, etc)...</p>\n"}], "owner": {"reputation": 293, "user_id": 10354734, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dc48e8a615be1bdf21d83863ff452e7?s=128&d=identicon&r=PG&f=1", "display_name": "notnonuninvisible", "link": "https://stackoverflow.com/users/10354734/notnonuninvisible"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 90, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1536819146, "creation_date": 1536776551, "last_edit_date": 1536776730, "question_id": 52301325, "link": "https://stackoverflow.com/questions/52301325/member-of-derived-by-pointer-to-base-static-cast-crtp-removing-templates", "title": "Member of derived by pointer to base, static_cast, crtp, removing templates", "body": "<p>Looking for: accessing member of a derived class from a pointer to base.</p>\n\n<p>Reductio ad absurdum:</p>\n\n<pre><code>class Base\n{\npublic:\n    int member_of_base;\n};\n\nclass Derived : public Base\n{\npublic:\n    int member_of_derived;\n};\n</code></pre>\n\n<p>I'm currently using templates:</p>\n\n<pre><code>template &lt;class T&gt;\nclass Client\n{\n    T* data; // T is Base or Derived\n};\n</code></pre>\n\n<p>There are few levels of composition in the class hierarchy, so I have to carry the template type parameter through all of the hierarchy. What is the best approach to overcome this?\nObviously I cannot access the member of Derived via a pointer to Base, i.e:</p>\n\n<pre><code>Base* foo = new Derived();\nfoo-&gt;member_of_derived; // no go\n</code></pre>\n\n<p>Thus, I'm using:</p>\n\n<pre><code>Client&lt;Base&gt;\nClient&lt;Derived&gt;\n</code></pre>\n\n<p>I'm trying to come up with a solution that works without the templates. Options that I know would work:</p>\n\n<ul>\n<li>void* //plain old C and casting as necessary, they're all pointers\n(as in memory addresses) in the machine</li>\n<li><code>static_cast&lt;Derived*&gt;(pointer_to_base);</code> //type safe at compile time.</li>\n<li>wrapping the cast in a Client's template method (not to be confused with a design pattern here) </li>\n</ul>\n\n<p>The last option seems to be the most \"elegant\", i.e:</p>\n\n<pre><code>template &lt;class T&gt;\nT* get_data() const { return static_cast&lt;T*&gt;(data); }\n</code></pre>\n\n<p>However, looking here and there tells me there might exist a way unknown to me.\nI saw CRTP, but that brings me back to templates, which is the original thing I want to go without.\nWhat are the ways, or popular approaches, to achieve such a goal?</p>\n\n<p>The real code uses shared_ptr, weak_ptr and enable_shared_from_this with weak_from_this. I'm looking for a type safe \"polymorphic member\" access.</p>\n\n<p>EDIT: they're not just \"ints\". They can be totally different types, as in protobuf in base and Json::Value in derived. And I'm trying to use the pointers to Base/Derived, which in turn would give me access to their respective members.</p>\n"}, {"tags": ["c++", "c++11", "vector", "syntax", "language-lawyer"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1536775662, "post_id": 52301100, "comment_id": 91549939, "body": "Anything particular you didn&#39;t get from the <a href=\"https://en.cppreference.com/w/cpp/container/vector/erase\" rel=\"nofollow noreferrer\">documentation</a>?"}, {"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 1, "creation_date": 1536775667, "post_id": 52301100, "comment_id": 91549945, "body": "I strongly recommend not using the standard as reference documentation. Only use it when you need to be a language lawyer. <a href=\"https://en.cppreference.com/w/cpp/container/vector/erase\" rel=\"nofollow noreferrer\">cppreference has good C++ reference documentation</a>"}, {"owner": {"reputation": 3747, "user_id": 1280794, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/acaf89e21130377466e0caa60c839ec8?s=128&d=identicon&r=PG", "display_name": "spin_eight", "link": "https://stackoverflow.com/users/1280794/spin-eight"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1536775773, "post_id": 52301100, "comment_id": 91549996, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 you take for granted anything that is put on the internet? ))"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1536775776, "post_id": 52301100, "comment_id": 91549997, "body": "Possible duplicate: <a href=\"https://stackoverflow.com/questions/347441/erasing-elements-from-a-vector\" title=\"erasing elements from a vector\">stackoverflow.com/questions/347441/&hellip;</a>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "reply_to_user": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 0, "creation_date": 1536775785, "post_id": 52301100, "comment_id": 91550002, "body": "@Justin Actually, I think the text the OP provided is slightly clearer than that of cppreference, in this case. Anyway, they are semantically identical."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1536775853, "post_id": 52301100, "comment_id": 91550029, "body": "@spin_eight I don&#39;t know anything about your google fu, but that documentation is granted to be at the internet, yes :). If you have doubts about the standard conformance tag your question <a href=\"https://stackoverflow.com/questions/tagged/language-lawyer\">language-lawyer</a> please."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 2, "creation_date": 1536775887, "post_id": 52301100, "comment_id": 91550042, "body": "@spin_eight cppreference is a well known, high quality reference site. It is trustworthy unless proven otherwise."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 1, "creation_date": 1536775919, "post_id": 52301100, "comment_id": 91550058, "body": "@spin_eight cppreference.com is a pretty reliable and well known source. Trusting it is very different from trusting &quot;anything that is put on the internet&quot;. I&#39;ve found more compiler bugs than errors in cppreference.com"}, {"owner": {"reputation": 2969, "user_id": 5191073, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/628f44cad275ff1e2fd7230f8cdd5cbb?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Pisz", "link": "https://stackoverflow.com/users/5191073/christopher-pisz"}, "edited": false, "score": 1, "creation_date": 1536775943, "post_id": 52301100, "comment_id": 91550073, "body": "What you Googled is correct. The desire to find it in the standard is not."}, {"owner": {"reputation": 3747, "user_id": 1280794, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/acaf89e21130377466e0caa60c839ec8?s=128&d=identicon&r=PG", "display_name": "spin_eight", "link": "https://stackoverflow.com/users/1280794/spin-eight"}, "reply_to_user": {"reputation": 2969, "user_id": 5191073, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/628f44cad275ff1e2fd7230f8cdd5cbb?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Pisz", "link": "https://stackoverflow.com/users/5191073/christopher-pisz"}, "edited": false, "score": 0, "creation_date": 1536776015, "post_id": 52301100, "comment_id": 91550099, "body": "@ChristopherPisz why not? The standard is an official document, that describes the language. Could you please elaborate on your comment?"}, {"owner": {"reputation": 2969, "user_id": 5191073, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/628f44cad275ff1e2fd7230f8cdd5cbb?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Pisz", "link": "https://stackoverflow.com/users/5191073/christopher-pisz"}, "edited": false, "score": 0, "creation_date": 1536776335, "post_id": 52301100, "comment_id": 91550255, "body": "@spin_eight People typically don&#39;t pay 100s of dollars for every ISO that comes out over the years in order to look up the return type of a method. Also, the standard is not written to be a reference for every method on every stl type, it&#39;s written to be the language standard. Just type the method name into google with &quot;C++&quot; and read the results. If you find the results on 3 different sites all being the same, you win and continue your project."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1536776360, "post_id": 52301100, "comment_id": 91550268, "body": "@spin_eight It&#39;s not always practical to rely purely on the standard. Many times, the information you want is not spelled out in the standard but must be pieced together from the interaction between multiple passages. Other times it can just be time consuming to find <i>where</i> the information is written. It&#39;s fine to be curious and try to find that information, but I think Christohper&#39;s point is that in practice it&#39;s also fine to rely on reliable sources like cppreference."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "reply_to_user": {"reputation": 2969, "user_id": 5191073, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/628f44cad275ff1e2fd7230f8cdd5cbb?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Pisz", "link": "https://stackoverflow.com/users/5191073/christopher-pisz"}, "edited": false, "score": 1, "creation_date": 1536776485, "post_id": 52301100, "comment_id": 91550340, "body": "@ChristopherPisz: Regardless of why people do or do not pay for the standard, it is the definition of the language (including the standard library), and it definitely should specify the return type of <code>erase</code>. (And as we can see from NathanOliver&#39;s answer, it does.)"}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "reply_to_user": {"reputation": 2969, "user_id": 5191073, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/628f44cad275ff1e2fd7230f8cdd5cbb?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Pisz", "link": "https://stackoverflow.com/users/5191073/christopher-pisz"}, "edited": false, "score": 1, "creation_date": 1536776658, "post_id": 52301100, "comment_id": 91550419, "body": "@ChristopherPisz: There&#39;s absolutely nothing wrong with wanting to get information from the definitive source. If you&#39;re not interested, that&#39;s fine, but it&#39;s a perfectly valid question."}], "answers": [{"comments": [{"owner": {"reputation": 259, "user_id": 7886227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hec3U.jpg?s=128&g=1", "display_name": "Dr t", "link": "https://stackoverflow.com/users/7886227/dr-t"}, "edited": false, "score": 0, "creation_date": 1536776741, "post_id": 52301284, "comment_id": 91550452, "body": "Just to make sure I get this right:  You say: The iterator returned from a.erase(q) points to the element immediately following q prior to the element being erased. If no such element exists, a.end() is returned.                                                                                                                                              Which I interpret as:  The iterator returned from a.erase(q) points to the element immediately following q and then q is erased. If no such element exists, a.end() is returned.  Just trying to learn something here..."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 259, "user_id": 7886227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hec3U.jpg?s=128&g=1", "display_name": "Dr t", "link": "https://stackoverflow.com/users/7886227/dr-t"}, "edited": false, "score": 0, "creation_date": 1536776876, "post_id": 52301284, "comment_id": 91550521, "body": "@Drt The iterator returned will point to element immediately after the element(s) that were erased.  If there is no such element (erased the last element in the vector) then it returns <code>end()</code>."}, {"owner": {"reputation": 2969, "user_id": 5191073, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/628f44cad275ff1e2fd7230f8cdd5cbb?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Pisz", "link": "https://stackoverflow.com/users/5191073/christopher-pisz"}, "reply_to_user": {"reputation": 259, "user_id": 7886227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hec3U.jpg?s=128&g=1", "display_name": "Dr t", "link": "https://stackoverflow.com/users/7886227/dr-t"}, "edited": false, "score": 0, "creation_date": 1536776980, "post_id": 52301284, "comment_id": 91550571, "body": "@Drt See Dalle&#39;s answer in <a href=\"https://stackoverflow.com/questions/347441/erasing-elements-from-a-vector\" title=\"erasing elements from a vector\">stackoverflow.com/questions/347441/&hellip;</a> for the usage in a loop to see why it works the way it works."}], "tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": true, "score": 13, "last_activity_date": 1536776366, "creation_date": 1536776366, "answer_id": 52301284, "question_id": 52301100, "link": "https://stackoverflow.com/questions/52301100/what-is-return-value-from-stdvector-erase-operator-according-to-the-standard/52301284#52301284", "title": "What is return value from std::vector erase operator, according to the standard?", "body": "<p>The information is in a slightly un-intuitive place.  What <code>erase</code> returns is detailed under the sequence containers section of general container requirements section, specificly <a href=\"https://timsong-cpp.github.io/cppwp/sequence.reqmts#11\" rel=\"noreferrer\">[sequence.reqmts]/11</a></p>\n\n<blockquote>\n  <p>The iterator returned from <code>a.erase(q)</code> points to the element immediately following <code>q</code> prior to the element being erased. If no such element exists, <code>a.end()</code> is returned.</p>\n</blockquote>\n\n<p>and <a href=\"https://timsong-cpp.github.io/cppwp/sequence.reqmts#12\" rel=\"noreferrer\">[sequence.reqmts]/12</a></p>\n\n<blockquote>\n  <p>The iterator returned by <code>a.erase(q1, q2)</code> points to the element pointed to by <code>q2</code> prior to any elements being erased. If no such element exists, <code>a.end()</code> is returned.</p>\n</blockquote>\n"}], "owner": {"reputation": 3747, "user_id": 1280794, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/acaf89e21130377466e0caa60c839ec8?s=128&d=identicon&r=PG", "display_name": "spin_eight", "link": "https://stackoverflow.com/users/1280794/spin-eight"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1784, "favorite_count": 0, "accepted_answer_id": 52301284, "answer_count": 1, "score": 4, "last_activity_date": 1536776733, "creation_date": 1536775534, "last_edit_date": 1592644375, "question_id": 52301100, "link": "https://stackoverflow.com/questions/52301100/what-is-return-value-from-stdvector-erase-operator-according-to-the-standard", "title": "What is return value from std::vector erase operator, according to the standard?", "body": "<p>I prefer to get info from the source, for this case this is ISO-IEC 14882,\nwhere erase method is described as the following:</p>\n<blockquote>\n<p>&quot;iterator erase(const_iterator position);<br />\niterator erase(const_iterator first, const_iterator last);</p>\n<p>Effects: Invalidates\niterators and references at or after the point of the erase.</p>\n<p>Complexity: The destructor of T is called the number of times equal to\nthe number of the elements erased, but the move assignment operator of\nT is called the number of times equal to the number of elements in the\nvector after the erased elements.</p>\n<p>Throws: Nothing unless an exception\nis thrown by the copy constructor, move constructor, assignment\noperator, or move assignment operator of T.&quot;</p>\n</blockquote>\n<p>Can't find information about returned iterator,\nof course, I Googled and got:</p>\n<blockquote>\n<p>An iterator pointing to the new location of the element that followed\nthe last element erased by the function call</p>\n</blockquote>\n<p>Can't understand there this is described in the standard<br />\nCould you point me on it?</p>\n<p><strong>Update:</strong> my question is not about how <code>vector::erase</code> works,<br />\nbut rather from where in the standard, as I accept as reliable source of information we can deduce information about returned value</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 154, "user_id": 5908973, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d49e8e2ae710bd689ad93c48cd31260?s=128&d=identicon&r=PG&f=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/5908973/mike"}, "edited": false, "score": 0, "creation_date": 1536775064, "post_id": 52300961, "comment_id": 91549654, "body": "Its a null initializer, meaning its making the map start out empty. Theres a few differnt ways/syntax for this."}, {"owner": {"reputation": 6058, "user_id": 3871028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbe44ff5c56628e85683c8918602c96?s=128&d=identicon&r=PG&f=1", "display_name": "Ripi2", "link": "https://stackoverflow.com/users/3871028/ripi2"}, "edited": false, "score": 0, "creation_date": 1536775066, "post_id": 52300961, "comment_id": 91549657, "body": "<code>={}</code> means: Intialize with empty data."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 3, "creation_date": 1536775159, "post_id": 52300961, "comment_id": 91549703, "body": "Make your question self contained please, don&#39;t require people to follow links to grasp what your problem is."}, {"owner": {"reputation": 9427, "user_id": 1470092, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/0eeda48676f683d04c1431b2542954af?s=128&d=identicon&r=PG", "display_name": "huseyin tugrul buyukisik", "link": "https://stackoverflow.com/users/1470092/huseyin-tugrul-buyukisik"}, "edited": false, "score": 0, "creation_date": 1536775587, "post_id": 52300961, "comment_id": 91549895, "body": "Templates are very useful to write something for everything only once. Here, map is written only once, but applicable for any type, including &lt;string,int&gt; version you looking at."}], "answers": [{"comments": [{"owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "reply_to_user": {"reputation": 255, "user_id": 6236959, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2xhZS.jpg?s=128&g=1", "display_name": "Shubham Kumar Gupta Ggps", "link": "https://stackoverflow.com/users/6236959/shubham-kumar-gupta-ggps"}, "edited": false, "score": 3, "creation_date": 1536775104, "post_id": 52300977, "comment_id": 91549679, "body": "@ShubhamGuptaGgps You may like to get a C++ book."}, {"owner": {"reputation": 255, "user_id": 6236959, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2xhZS.jpg?s=128&g=1", "display_name": "Shubham Kumar Gupta Ggps", "link": "https://stackoverflow.com/users/6236959/shubham-kumar-gupta-ggps"}, "edited": false, "score": 0, "creation_date": 1536775173, "post_id": 52300977, "comment_id": 91549709, "body": "Can you suggest me a good one..  sorry if it was a stupid question"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "reply_to_user": {"reputation": 255, "user_id": 6236959, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2xhZS.jpg?s=128&g=1", "display_name": "Shubham Kumar Gupta Ggps", "link": "https://stackoverflow.com/users/6236959/shubham-kumar-gupta-ggps"}, "edited": false, "score": 0, "creation_date": 1536775180, "post_id": 52300977, "comment_id": 91549712, "body": "@Shubham Gupta Ggps - they are template arguments. They tell <code>std::map</code> the <i>types</i> to use for key and value."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 6, "creation_date": 1536775226, "post_id": 52300977, "comment_id": 91549731, "body": "Good books: <a href=\"https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list\" title=\"the definitive c book guide and list\">stackoverflow.com/questions/388242/&hellip;</a>"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 255, "user_id": 6236959, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2xhZS.jpg?s=128&g=1", "display_name": "Shubham Kumar Gupta Ggps", "link": "https://stackoverflow.com/users/6236959/shubham-kumar-gupta-ggps"}, "edited": false, "score": 1, "creation_date": 1536775242, "post_id": 52300977, "comment_id": 91549738, "body": "@ShubhamGuptaGgps We keep a list of good books: <a href=\"https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list\" title=\"the definitive c book guide and list\">stackoverflow.com/questions/388242/&hellip;</a>"}], "tags": [], "owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "is_accepted": true, "score": 4, "last_activity_date": 1536830411, "last_edit_date": 1536830411, "creation_date": 1536774996, "answer_id": 52300977, "question_id": 52300961, "link": "https://stackoverflow.com/questions/52300961/what-is-the-meaning-of-mapstring-int-m-in-c/52300977#52300977", "title": "What is the meaning of map&lt;string, int&gt; m= {}; in C++?", "body": "<p><code>std::map&lt;Key, Value&gt;</code> is an associative container that maps keys to values. See <a href=\"https://en.cppreference.com/w/cpp/container/map\" rel=\"nofollow noreferrer\">std::map</a> for full details.</p>\n\n<p><code>map&lt;string, int&gt; m = {};</code> invokes the default constructor of <code>map&lt;string, int&gt;</code>. In fact, <code>= {}</code> part is unnecessary <code>map&lt;string, int&gt; m;</code> does the same thing in a less verbose way.</p>\n\n<p>Also, if both the default constructor and the initializer list constructors are available, <code>= {}</code> calls the default constructor.</p>\n"}], "owner": {"reputation": 255, "user_id": 6236959, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2xhZS.jpg?s=128&g=1", "display_name": "Shubham Kumar Gupta Ggps", "link": "https://stackoverflow.com/users/6236959/shubham-kumar-gupta-ggps"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 828, "favorite_count": 0, "accepted_answer_id": 52300977, "answer_count": 1, "score": -3, "last_activity_date": 1536830411, "creation_date": 1536774906, "last_edit_date": 1536783076, "question_id": 52300961, "link": "https://stackoverflow.com/questions/52300961/what-is-the-meaning-of-mapstring-int-m-in-c", "title": "What is the meaning of map&lt;string, int&gt; m= {}; in C++?", "body": "<p>I was going through a program in C++. I am a beginner, so I was bit confused what's the meaning of this. </p>\n\n<p>Problem was this:</p>\n\n<p><a href=\"https://www.codechef.com/problems/H1\" rel=\"nofollow noreferrer\">https://www.codechef.com/problems/H1</a></p>\n\n<p>I saw someone's solution and am confused what the meaning of \n<code>map&lt;string, int&gt; m= {};</code> is. </p>\n\n<p><a href=\"https://www.codechef.com/viewsolution/20124020\" rel=\"nofollow noreferrer\">https://www.codechef.com/viewsolution/20124020</a></p>\n"}, {"tags": ["c++", "clang-format"], "comments": [{"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 2, "creation_date": 1536774163, "post_id": 52300755, "comment_id": 91549255, "body": "You can go through <a href=\"https://clang.llvm.org/docs/ClangFormatStyleOptions.html\" rel=\"nofollow noreferrer\">the documentation</a> and look for it. It&#39;s not too big of a list."}, {"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 2, "creation_date": 1536775187, "post_id": 52300755, "comment_id": 91549715, "body": "I don&#39;t think this is something clang format will ever handle. I think clang format works solely with the spaces between tokens, not with the ordering of tokens. This seems more suited for clang tidy. At any rate neither supports it at this time. Perhaps you could submit a feature request for it, or even a patch after discussing with them"}, {"owner": {"reputation": 2581, "user_id": 1242646, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/2b686cb8d225bf0023e20013bbd3a987?s=128&d=identicon&r=PG", "display_name": "roalz", "link": "https://stackoverflow.com/users/1242646/roalz"}, "edited": false, "score": 3, "creation_date": 1536824670, "post_id": 52300755, "comment_id": 91564823, "body": "&lt;joke mode on&gt; Don&#39;t join the dark side (east const)!!! :-)"}, {"owner": {"reputation": 46978, "user_id": 856199, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/CPtki.png?s=128&g=1", "display_name": "Nikos C.", "link": "https://stackoverflow.com/users/856199/nikos-c"}, "edited": false, "score": 0, "creation_date": 1554142908, "post_id": 52300755, "comment_id": 97635238, "body": "To arms! They&#39;re storming through the gates!"}], "answers": [{"tags": [], "owner": {"reputation": 1453, "user_id": 2018010, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/fwCYF.gif?s=128&g=1", "display_name": "magras", "link": "https://stackoverflow.com/users/2018010/magras"}, "is_accepted": false, "score": 2, "last_activity_date": 1554142638, "creation_date": 1554142638, "answer_id": 55461265, "question_id": 52300755, "link": "https://stackoverflow.com/questions/52300755/how-to-force-east-const-in-clang-format/55461265#55461265", "title": "How to force east const in clang format?", "body": "<p>AFAIK it isn't implemented yet, but there is <a href=\"https://bugs.llvm.org/show_bug.cgi?id=34220\" rel=\"nofollow noreferrer\">a feature request</a> in their bugtracker.</p>\n"}], "owner": {"reputation": 2519, "user_id": 140311, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69d7765491ded8ee7f4059ce5d504d11?s=128&d=identicon&r=PG", "display_name": "Marco M.", "link": "https://stackoverflow.com/users/140311/marco-m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1095, "favorite_count": 0, "answer_count": 1, "score": 9, "last_activity_date": 1554142638, "creation_date": 1536774020, "question_id": 52300755, "link": "https://stackoverflow.com/questions/52300755/how-to-force-east-const-in-clang-format", "title": "How to force east const in clang format?", "body": "<p>Is there a flag in clang-format to change 'const west' to 'east const', so that the following:</p>\n\n<pre><code>void fun(const std::string &amp;s);\n</code></pre>\n\n<p>would be reformatted to:</p>\n\n<pre><code>void fun(std::string const &amp;s);\n</code></pre>\n"}, {"tags": ["c++", "templates", "c++17"], "comments": [{"owner": {"reputation": 355, "user_id": 5343120, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/6ko5d.png?s=128&g=1", "display_name": "Harrand", "link": "https://stackoverflow.com/users/5343120/harrand"}, "edited": false, "score": 5, "creation_date": 1536773748, "post_id": 52300657, "comment_id": 91549051, "body": "What specific version of C++ are you using?"}, {"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 6, "creation_date": 1536773894, "post_id": 52300657, "comment_id": 91549129, "body": "What information can you tell us about <code>option1</code> and <code>option2</code>? Are they two completely unrelated types? Must they be created on the heap for some reason (and why)? Are they both derived from some common <code>base</code>?"}, {"owner": {"reputation": 145, "user_id": 10354589, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24e1b678a0f6b2b1d1a1b879c73f1627?s=128&d=identicon&r=PG&f=1", "display_name": "Gar", "link": "https://stackoverflow.com/users/10354589/gar"}, "edited": false, "score": 0, "creation_date": 1536773992, "post_id": 52300657, "comment_id": 91549174, "body": "I have access to GCC 8 so can use modern C++ but realise my code is a bit of a mix."}, {"owner": {"reputation": 145, "user_id": 10354589, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24e1b678a0f6b2b1d1a1b879c73f1627?s=128&d=identicon&r=PG&f=1", "display_name": "Gar", "link": "https://stackoverflow.com/users/10354589/gar"}, "reply_to_user": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 0, "creation_date": 1536774178, "post_id": 52300657, "comment_id": 91549261, "body": "@Justin Yes I can use C++17. option1 and option2 are classes that will produce large amounts of data (to be stored in vectors within the object (by this I mean the option1 or option2 class itself). I need to create any number of these and want to be able to access the data they create"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 2, "creation_date": 1536774255, "post_id": 52300657, "comment_id": 91549303, "body": "@JackEvans -- Need more information.  Justin asked the pertinent questions."}, {"owner": {"reputation": 33645, "user_id": 2630032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hQF09.jpg?s=128&g=1", "display_name": "Stephan Lechner", "link": "https://stackoverflow.com/users/2630032/stephan-lechner"}, "edited": false, "score": 3, "creation_date": 1536774337, "post_id": 52300657, "comment_id": 91549343, "body": "With C++17 available, have a look at std::variant (e.g. <a href=\"https://en.cppreference.com/w/cpp/utility/variant\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/utility/variant</a>)"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1536775386, "post_id": 52300657, "comment_id": 91549806, "body": "If all you want is call a single member function on each of your option objects, just push an std::function instead."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1536775609, "post_id": 52300657, "comment_id": 91549912, "body": "And what with the obsession with std::option? Inheritance-based polymothism works better, maybe not every time, but this time definitely."}, {"owner": {"reputation": 3819, "user_id": 4289700, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-GGKsgSVN_n4/AAAAAAAAAAI/AAAAAAAAAvQ/_IAucbb8ss8/photo.jpg?sz=128", "display_name": "HugoTeixeira", "link": "https://stackoverflow.com/users/4289700/hugoteixeira"}, "edited": false, "score": 0, "creation_date": 1536775632, "post_id": 52300657, "comment_id": 91549922, "body": "For a second I wondered about <code>std::vector&lt;std::any&gt;</code>, but it wouldn&#39;t work in this case because the contained object must be copy-constructible and <code>std::unique_ptr</code> is move-only."}, {"owner": {"reputation": 4599, "user_id": 2055064, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/815c89ab1784fd780fe7faf44ebfc79f?s=128&d=identicon&r=PG", "display_name": "Thomas", "link": "https://stackoverflow.com/users/2055064/thomas"}, "edited": false, "score": 0, "creation_date": 1536777890, "post_id": 52300657, "comment_id": 91550957, "body": "why not just give storage_class a template parameter?"}, {"owner": {"reputation": 145, "user_id": 10354589, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24e1b678a0f6b2b1d1a1b879c73f1627?s=128&d=identicon&r=PG&f=1", "display_name": "Gar", "link": "https://stackoverflow.com/users/10354589/gar"}, "reply_to_user": {"reputation": 4599, "user_id": 2055064, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/815c89ab1784fd780fe7faf44ebfc79f?s=128&d=identicon&r=PG", "display_name": "Thomas", "link": "https://stackoverflow.com/users/2055064/thomas"}, "edited": false, "score": 0, "creation_date": 1537286203, "post_id": 52300657, "comment_id": 91725942, "body": "@Thomas could you write a quick answer to show what you mean?"}, {"owner": {"reputation": 4599, "user_id": 2055064, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/815c89ab1784fd780fe7faf44ebfc79f?s=128&d=identicon&r=PG", "display_name": "Thomas", "link": "https://stackoverflow.com/users/2055064/thomas"}, "edited": false, "score": 1, "creation_date": 1537297980, "post_id": 52300657, "comment_id": 91731474, "body": "@JackEvans ok, done. hope you find it useful."}, {"owner": {"reputation": 4599, "user_id": 2055064, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/815c89ab1784fd780fe7faf44ebfc79f?s=128&d=identicon&r=PG", "display_name": "Thomas", "link": "https://stackoverflow.com/users/2055064/thomas"}, "edited": false, "score": 0, "creation_date": 1537299244, "post_id": 52300657, "comment_id": 91732063, "body": "@JackEvans If you need to change dynamically, you can also use <code>std::variant</code>. I&#39;ve added a variant for that to my answer."}], "answers": [{"comments": [{"owner": {"reputation": 145, "user_id": 10354589, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24e1b678a0f6b2b1d1a1b879c73f1627?s=128&d=identicon&r=PG&f=1", "display_name": "Gar", "link": "https://stackoverflow.com/users/10354589/gar"}, "edited": false, "score": 0, "creation_date": 1537529669, "post_id": 52301278, "comment_id": 91828363, "body": "With this method how can I pass into the constructors of my option classes?"}, {"owner": {"reputation": 18084, "user_id": 2700898, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/V3RkV.jpg?s=128&g=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/2700898/matt"}, "reply_to_user": {"reputation": 145, "user_id": 10354589, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24e1b678a0f6b2b1d1a1b879c73f1627?s=128&d=identicon&r=PG&f=1", "display_name": "Gar", "link": "https://stackoverflow.com/users/10354589/gar"}, "edited": false, "score": 0, "creation_date": 1537542164, "post_id": 52301278, "comment_id": 91835730, "body": "An example was added for passing in a single <code>double</code> to the constructors, but you can add any number of parameters."}, {"owner": {"reputation": 18084, "user_id": 2700898, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/V3RkV.jpg?s=128&g=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/2700898/matt"}, "reply_to_user": {"reputation": 145, "user_id": 10354589, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24e1b678a0f6b2b1d1a1b879c73f1627?s=128&d=identicon&r=PG&f=1", "display_name": "Gar", "link": "https://stackoverflow.com/users/10354589/gar"}, "edited": false, "score": 0, "creation_date": 1537797030, "post_id": 52301278, "comment_id": 91903097, "body": "Great. Which solution best fits your needs, and why?"}], "tags": [], "owner": {"reputation": 18084, "user_id": 2700898, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/V3RkV.jpg?s=128&g=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/2700898/matt"}, "is_accepted": false, "score": 2, "last_activity_date": 1537542121, "last_edit_date": 1537542121, "creation_date": 1536776324, "answer_id": 52301278, "question_id": 52300657, "link": "https://stackoverflow.com/questions/52300657/a-vector-for-different-classes/52301278#52301278", "title": "A vector for different classes", "body": "<p>Standard way is to make <code>option1</code> and <code>option2</code> derived classes from a <code>base_class</code> which seems consistent with your sample <code>main()</code>. Using a generic <code>Factory</code> class template, here is an example:</p>\n\n<pre><code>#include &lt;functional&gt;\n#include &lt;iostream&gt;\n#include &lt;memory&gt;\n#include &lt;unordered_map&gt;\n#include &lt;vector&gt;\n\n// Generic Factory class template\ntemplate&lt;typename K,typename T,typename... Ts&gt;\nclass Factory\n{\n    using Map = std::unordered_map&lt;K, std::function&lt;std::unique_ptr&lt;T&gt;(Ts...)&gt;&gt;;\n    const Map mMap;\n  public:\n    Factory(Map&amp;&amp; map):mMap(std::move(map)) { }\n    std::unique_ptr&lt;T&gt; operator()(const K&amp; key, Ts... args) const\n    {\n        const typename Map::const_iterator itr = mMap.find(key);\n        return itr == mMap.cend() ? nullptr : itr-&gt;second(std::forward&lt;Ts&gt;(args)...);\n    }\n};\n\nclass base_class\n{\n  public:\n    virtual void create_data() = 0;\n};\n\nclass option1 : public base_class\n{\n  public:\n    void create_data() override\n    {\n        std::cout &lt;&lt; \"I'm option1.\" &lt;&lt; std::endl;\n    }\n};\n\nclass option2 : public base_class\n{\n  public:\n    void create_data() override\n    {\n        std::cout &lt;&lt; \"I'm option2.\" &lt;&lt; std::endl;\n    }\n};\n\nclass storage_class \n{\n    using SimulationFactory = Factory&lt;int,base_class&gt;; // Optionally add constructor parameter types\n    const SimulationFactory simulation_factory; // This can be made static const.\npublic:\n    storage_class(int sel, int n)\n    :   simulation_factory(\n            { { 1, []() { return std::make_unique&lt;option1&gt;(); } }\n            , { 2, []() { return std::make_unique&lt;option2&gt;(); } }\n            })\n    {\n        for (int i = 0; i &lt; n; i++) \n            my_store.push_back(simulation_factory(sel));\n    }\n\n    std::vector&lt;std::unique_ptr&lt;base_class&gt;&gt; my_store;\n};\n\nint main()\n{\n    int n_iterations = 4;\n\n    storage_class store(1, n_iterations);\n\n    for(int i = 0; i &lt; n_iterations; i++)\n    {\n        store.my_store[i]-&gt;create_data();\n    }\n}\n</code></pre>\n\n<p>This compiled for me on linux using <code>g++ -std=c++17 main.cc</code>.</p>\n\n<p>There are improvements that can be made to this code, but I copied your <code>main()</code> function in order to illustrate the basic idea(s). Hope that helps.</p>\n\n<hr>\n\n<h3>Edit 21 Sept 2018 - Example of how to pass parameters into constructors.</h3>\n\n<p>File: factory.h</p>\n\n<pre><code>#pragma once\n\n#include &lt;functional&gt;\n#include &lt;memory&gt;\n#include &lt;unordered_map&gt;\n\n// Generic Factory class template\ntemplate&lt;typename K,typename T,typename... Ts&gt;\nclass Factory\n{\n    using Map = std::unordered_map&lt;K, std::function&lt;std::unique_ptr&lt;T&gt;(Ts...)&gt;&gt;;\n    const Map mMap;\n  public:\n    Factory(Map&amp;&amp; map):mMap(std::move(map)) { }\n    std::unique_ptr&lt;T&gt; operator()(const K&amp; key, Ts... args) const\n    {\n        const typename Map::const_iterator itr = mMap.find(key);\n        return itr == mMap.cend() ? nullptr : itr-&gt;second(std::forward&lt;Ts&gt;(args)...);\n    }\n};\n</code></pre>\n\n<p>File: main.cc</p>\n\n<pre><code>#include \"factory.h\"\n\n#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;vector&gt;\n\nclass base_class\n{\n  public:\n    virtual void create_data() = 0;\n};\n\nclass option1 : public base_class\n{\n    const double mD;\n  public:\n    option1(double d)\n    :   mD(d)\n    { }\n    void create_data() override\n    {\n        std::cout &lt;&lt; \"I'm option1: mD(\"&lt;&lt;mD&lt;&lt;')' &lt;&lt; std::endl;\n    }\n};\n\nclass option2 : public base_class\n{\n    const double mD;\n  public:\n    option2(double d)\n    :   mD(d)\n    { }\n    void create_data() override\n    {\n        std::cout &lt;&lt; \"I'm option2: mD(\"&lt;&lt;mD&lt;&lt;')' &lt;&lt; std::endl;\n    }\n};\n\nclass storage_class \n{\n    using SimulationFactory = Factory&lt;int,base_class,double&gt;; // Optionally add constructor parameter types\n    const SimulationFactory simulation_factory; // This can be made static const.\npublic:\n    storage_class(int sel, int n)\n    :   simulation_factory(\n            { { 1, [](double d) { return std::make_unique&lt;option1&gt;(d); } }\n            , { 2, [](double d) { return std::make_unique&lt;option2&gt;(d); } }\n            })\n    {\n        for (int i = 0; i &lt; n; i++) \n            my_store.push_back(simulation_factory(sel,static_cast&lt;double&gt;(i)));\n    }\n\n    std::vector&lt;std::unique_ptr&lt;base_class&gt;&gt; my_store;\n};\n\nint main()\n{\n    int n_iterations = 4;\n\n    storage_class store1(1, n_iterations);\n    storage_class store2(2, n_iterations);\n\n    for(int i = 0; i &lt; n_iterations; i++)\n    {\n        store1.my_store[i]-&gt;create_data();\n        store2.my_store[i]-&gt;create_data();\n    }\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>I'm option1: mD(0)\nI'm option2: mD(0)\nI'm option1: mD(1)\nI'm option2: mD(1)\nI'm option1: mD(2)\nI'm option2: mD(2)\nI'm option1: mD(3)\nI'm option2: mD(3)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 449, "user_id": 7949231, "user_type": "registered", "profile_image": "https://graph.facebook.com/400549150331480/picture?type=large", "display_name": "neonxc", "link": "https://stackoverflow.com/users/7949231/neonxc"}, "edited": false, "score": 0, "creation_date": 1536833121, "post_id": 52301552, "comment_id": 91569702, "body": "a cutting edge solution, nice"}, {"owner": {"reputation": 19779, "user_id": 878532, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/5fbebb625a289267abd098c0e676c760?s=128&d=identicon&r=PG", "display_name": "Klaus", "link": "https://stackoverflow.com/users/878532/klaus"}, "reply_to_user": {"reputation": 449, "user_id": 7949231, "user_type": "registered", "profile_image": "https://graph.facebook.com/400549150331480/picture?type=large", "display_name": "neonxc", "link": "https://stackoverflow.com/users/7949231/neonxc"}, "edited": false, "score": 0, "creation_date": 1536833411, "post_id": 52301552, "comment_id": 91569883, "body": "@neonxc: :-) Thanks!"}], "tags": [], "owner": {"reputation": 19779, "user_id": 878532, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/5fbebb625a289267abd098c0e676c760?s=128&d=identicon&r=PG", "display_name": "Klaus", "link": "https://stackoverflow.com/users/878532/klaus"}, "is_accepted": false, "score": 3, "last_activity_date": 1536778172, "last_edit_date": 1536778172, "creation_date": 1536777727, "answer_id": 52301552, "question_id": 52300657, "link": "https://stackoverflow.com/questions/52300657/a-vector-for-different-classes/52301552#52301552", "title": "A vector for different classes", "body": "<p>As you have c++17 in use, you can simply use a <code>std::variant</code> as type for the container which itself can keep all types you want to have.</p>\n\n<p>Example:</p>\n\n<pre><code>class A { public: void Do() { std::cout &lt;&lt; \"A::Do\" &lt;&lt; std::endl; } };\nclass B { public: void Go() { std::cout &lt;&lt; \"B::Go\" &lt;&lt; std::endl; } };\n\n\ntemplate&lt;class... Ts&gt; struct funcs : Ts... { using Ts::operator()...; };\ntemplate&lt;class... Ts&gt; funcs(Ts...) -&gt; funcs&lt;Ts...&gt;;\n\nint main()\n{\n    std::vector&lt;std::variant&lt;A,B&gt;&gt; vec;\n    vec.push_back(A{});\n    vec.push_back(B{});\n\n    for ( auto&amp; el: vec)\n    {\n        std::visit( funcs{ [](A&amp; a){ a.Do(); }, [](B&amp; b) { b.Go(); } }, el);\n    }\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>A::Do\nB::Go\n</code></pre>\n\n<p>The classes are fully independent and the methods can be simply called with <code>std::visit</code> and passing a callable object herein. I provide a simple <code>funcs</code> implementation, which simply collect all callable entities to simplify to interface the call to different methods of different unrelated classes here.</p>\n\n<p>As <code>std::variant</code> is some kind of a tagged union, it needs the storage for the biggest type you have in use. If this wastes to much memory, you can store a pointer to the instance instead, maybe with <code>std::unique_ptr</code> or <code>std::shared_ptr</code> if you like some assistance for memory management ;) </p>\n"}, {"tags": [], "owner": {"reputation": 4599, "user_id": 2055064, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/815c89ab1784fd780fe7faf44ebfc79f?s=128&d=identicon&r=PG", "display_name": "Thomas", "link": "https://stackoverflow.com/users/2055064/thomas"}, "is_accepted": true, "score": 2, "last_activity_date": 1537299122, "last_edit_date": 1537299122, "creation_date": 1537297767, "answer_id": 52393154, "question_id": 52300657, "link": "https://stackoverflow.com/questions/52300657/a-vector-for-different-classes/52393154#52393154", "title": "A vector for different classes", "body": "<p>Here is an example that tries to stay as close to your example as it can using a template parameter on class <code>storage_class</code>. See working version <a href=\"http://coliru.stacked-crooked.com/a/78dee920eca21d1a\" rel=\"nofollow noreferrer\">here</a>. I've added only <code>option1</code> and made the member <code>my_store</code> public as you access it in your <code>main</code> function.</p>\n\n<pre><code>#include &lt;memory&gt;\n#include &lt;vector&gt;\n#include &lt;iostream&gt;\n\nstruct option1{\n    void create_data(){ std::cout &lt;&lt; \"created\\n\"; }\n};\n\n\ntemplate&lt;typename T&gt;\nclass storage_class \n{\npublic:\n    storage_class(int n)\n    {\n       for(int i = 0; i &lt; n; i++) \n           my_store.push_back(std::make_unique&lt;T&gt;());    \n    }\n\n    std::vector&lt;std::unique_ptr&lt;T&gt;&gt; my_store;\n};\n\nint main()\n{\n    storage_class&lt;option1&gt; store(4);\n\n    int n_iterations = 4;\n\n    for(int i = 0; i &lt; n_iterations; i++)\n    {\n        store.my_store[i]-&gt;create_data();\n    }\n}\n</code></pre>\n\n<p>another option would be to use <code>std::variant</code>. See workign version <a href=\"http://coliru.stacked-crooked.com/a/773d85bafb7d2f6e\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<pre><code>#include &lt;memory&gt;\n#include &lt;vector&gt;\n#include &lt;variant&gt;\n#include &lt;iostream&gt;\n\nstruct option1{\n    void create_data(){ std::cout &lt;&lt; \"created 1\\n\"; }\n};\n\nstruct option2{\n    void create_data(){ std::cout &lt;&lt; \"created 2\\n\"; }\n};\n\n\nclass storage_class \n{\npublic:\n\n    using option = std::variant&lt;std::unique_ptr&lt;option1&gt;,std::unique_ptr&lt;option2&gt;&gt;;\n\n    storage_class(int sel, int n)\n    {\n        if(sel == 0)\n           for(int i = 0; i &lt; n; i++) \n               my_store.push_back(option(std::make_unique&lt;option1&gt;()));    \n        else if(sel == 1)\n           for(int i = 0; i &lt; n; i++)\n               my_store.push_back(option(std::make_unique&lt;option2&gt;()));\n    }\n\n\n    std::vector&lt;option&gt; my_store;\n};\n\nint main()\n{\n    storage_class store(1, 4);\n\n    int n_iterations = 4;\n\n    for(int i = 0; i &lt; n_iterations; i++)\n    {\n        std::get&lt;1&gt;(store.my_store[i])-&gt;create_data();\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 145, "user_id": 10354589, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24e1b678a0f6b2b1d1a1b879c73f1627?s=128&d=identicon&r=PG&f=1", "display_name": "Gar", "link": "https://stackoverflow.com/users/10354589/gar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 465, "favorite_count": 1, "accepted_answer_id": 52393154, "answer_count": 3, "score": 5, "last_activity_date": 1537542121, "creation_date": 1536773620, "last_edit_date": 1536775013, "question_id": 52300657, "link": "https://stackoverflow.com/questions/52300657/a-vector-for-different-classes", "title": "A vector for different classes", "body": "<p>I have a class with a vector I'd like to fill with one of two types of class, selected by the user. Let's call my classes option1 and option2</p>\n\n<p>What I'd like to do it something like</p>\n\n<pre><code>class storage_class \n{\npublic:\n    storage_class(int sel, int n)\n    {\n        if(sel == 1)\n           for(int i = 0; i &lt; n; i++) \n               my_store.push_back(std::make_unique&lt;option1&gt;());    \n        else if(sel == 2)\n           for(int i = 0; i &lt; n; i++)\n               my_store.push_back(std::make_unique&lt;option2&gt;());\n    }\n\nprivate:\n    // Something like this but that actually works\n    std::vector&lt;T&gt; my_store;\n};\n</code></pre>\n\n<p>Then I'd like to use it like this, or something similar, so there's no need to modify this usage dependent on the option chosen.</p>\n\n<pre><code>int main()\n{\n    storage_class store(1);\n\n    int n_iterations = 4;\n\n    for(int i = 0; i &lt; n_iterations; i++)\n    {\n        store.my_store[i]-&gt;create_data();\n    }\n}\n</code></pre>\n\n<p>The classes option1 and option2 will be mathematical simulations that will be creating data and themselves store this data in a vector that are members of the class. </p>\n\n<p>I want to store multiple instances of either option in a vector and then manipulate them from there. I can use C++17.</p>\n"}, {"tags": ["c++", "performance", "min"], "comments": [{"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 0, "creation_date": 1536773581, "post_id": 52300579, "comment_id": 91548976, "body": "You can&#39;t compute the transformed values in parallel without storing them. With maximum parallelism you can find the max in log(n) steps, just bubbling it up through a binary tree, since then you have one task per item. Not sure how to fit that to the standard library&#39;s functionality, though."}, {"owner": {"reputation": 2602, "user_id": 4341534, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/001c92ef74cb305ff8318eebeaa04ab3?s=128&d=identicon&r=PG&f=1", "display_name": "patatahooligan", "link": "https://stackoverflow.com/users/4341534/patatahooligan"}, "reply_to_user": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 1, "creation_date": 1536773914, "post_id": 52300579, "comment_id": 91549138, "body": "@Cheersandhth.-Alf It seems that I could get away with storing only as many values as I have threads and then doing an extra search for <code>min</code> on those. Because the number of threads is expected to be low, this is negligible storage requirement.."}, {"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 0, "creation_date": 1536774107, "post_id": 52300579, "comment_id": 91549235, "body": "Hm, I can&#39;t even use the coffee excuse this time. Thanks."}], "answers": [{"tags": [], "owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "is_accepted": true, "score": 5, "last_activity_date": 1536773916, "creation_date": 1536773916, "answer_id": 52300734, "question_id": 52300579, "link": "https://stackoverflow.com/questions/52300579/is-there-an-idiomatic-way-to-find-min-max-of-transform-of-array-without-storing/52300734#52300734", "title": "Is there an idiomatic way to find min/max of transform of array without storing the transform or needlessly recalculating?", "body": "<p>Use the <code>std::transform_reduce</code> algorithm:</p>\n\n<pre><code>std::transform_reduce(std::execution::par_unseq, my_container.begin(), my_container.end(),\n                      std::numeric_limits&lt;T&gt;::max(),\n                      [](const auto&amp; x, const auto&amp; y) { return std::min(x, y); },\n                      long_calculation);\n</code></pre>\n"}], "owner": {"reputation": 2602, "user_id": 4341534, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/001c92ef74cb305ff8318eebeaa04ab3?s=128&d=identicon&r=PG&f=1", "display_name": "patatahooligan", "link": "https://stackoverflow.com/users/4341534/patatahooligan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "accepted_answer_id": 52300734, "answer_count": 1, "score": 3, "last_activity_date": 1536773916, "creation_date": 1536773310, "question_id": 52300579, "link": "https://stackoverflow.com/questions/52300579/is-there-an-idiomatic-way-to-find-min-max-of-transform-of-array-without-storing", "title": "Is there an idiomatic way to find min/max of transform of array without storing the transform or needlessly recalculating?", "body": "<p>I have an array of some data type <code>T</code> on which I have to perform some <code>long_calculation(const T&amp;)</code> and find its minimum value. Because the array is pretty large and the function takes a significant amount of my run-time, I want to do it in a multi-threaded way and in the most efficient way possible. The closest thing to what I'm looking for seems to be <code>std::min_element</code> but it is not a perfect fit because it doesn't seem to work internally with the values it calculates and it doesn't even return the value I want. This forces me to do something like the following.</p>\n\n<pre><code>const auto iter = std::min_element(std::execution::par_unseq,\n    my_container.begin(), my_container.end(), [](const T&amp; t1, const T&amp; t2) {\n        return long_calculation(t1) &lt; long_calculation(t2);\n    }\nconst auto value = long_calculation(*T1);\n</code></pre>\n\n<p>The standard guarantees at most N-1 comparisons but without storing the result of <code>long_calculation</code> I expect 2N-2 calculations rather than the optimal N. Or rather 2N-1 because of the final line.</p>\n\n<p>On the other hand, pre-calculating the values and doing the search does N <code>long_calculation</code>s but uses <code>O(N)</code> extra storage which will also have to be dynamically allocated in my case.</p>\n\n<p>Is there any way to do this in a generic fashion in the standard or some 3rd party library? If not, what is the most appropriate way to do this? The ideal solution would be a multi-threaded function that can be called somewhat like this.</p>\n\n<pre><code>const auto min_value = min_of_transform(\n    my_container.begin(), my_container.end(), long_calculation);\n</code></pre>\n"}, {"tags": ["c++", "opencv", "computer-vision", "mat"], "comments": [{"owner": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "edited": false, "score": 0, "creation_date": 1536774076, "post_id": 52300578, "comment_id": 91549221, "body": "Based on the documentation of <a href=\"https://docs.opencv.org/3.4.3/d2/de8/group__core__array.html#ga45dd56da289494ce874be2324856898f\" rel=\"nofollow noreferrer\"><code>cv::sort</code></a>, you can only sort rows or columns, that&#39;s it."}, {"owner": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "edited": false, "score": 0, "creation_date": 1536774419, "post_id": 52300578, "comment_id": 91549381, "body": "Although... reshape it temporarily into a single channel matrix with 9 rows, sort that row-wise, and reshape back."}, {"owner": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "edited": false, "score": 0, "creation_date": 1536791758, "post_id": 52300578, "comment_id": 91556260, "body": "So, does that (along with what I describe in the answer) work for you? I used <code>cv::Mat1f</code> explicitly since you have <code>CV_32FC1</code> as the data type and it lets me be more terse. Shouldn&#39;t be too hard to modify to make it more generic, if you need that."}], "answers": [{"tags": [], "owner": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "is_accepted": true, "score": 4, "last_activity_date": 1536777938, "creation_date": 1536777938, "answer_id": 52301589, "question_id": 52300578, "link": "https://stackoverflow.com/questions/52300578/sort-by-a-depth-dimension-in-opencv-with-c/52301589#52301589", "title": "Sort by a depth dimension in OpenCV with C++", "body": "<p>The documentation of <a href=\"https://docs.opencv.org/3.4.3/d2/de8/group__core__array.html#ga45dd56da289494ce874be2324856898f\" rel=\"nofollow noreferrer\"><code>cv::sort</code></a> states:</p>\n\n<blockquote>\n  <p>Sorts each row or each column of a matrix.</p>\n</blockquote>\n\n<p>Hence, you can not use it to sort the 3rd dimension ... directly.</p>\n\n<p>However, you can take advantage of the <a href=\"https://docs.opencv.org/3.4.3/d3/d63/classcv_1_1Mat.html#details\" rel=\"nofollow noreferrer\">in-memory layout</a> of the data, and <a href=\"https://docs.opencv.org/3.4.3/d3/d63/classcv_1_1Mat.html#ab2e41a510891e548f744832cf9b8ab89\" rel=\"nofollow noreferrer\"><code>reshape</code></a> it into a 2d Mat. Then you can sort it row-wise, and reshape the result back to the original shape. In this particular case, you'd reshape into a matrix with 9 rows and 4 columns.</p>\n\n<pre><code>void sort3rd(cv::Mat1f const&amp; src, cv::Mat1f&amp; dest, int direction)\n{\n    assert(src.size.dims() == 3);\n    std::vector&lt;int&gt; original_size(src.size.p, src.size.p + 3);\n    std::vector&lt;int&gt; new_size{ original_size[0] * original_size[1], original_size[2] };\n    cv::Mat1f temp(src.reshape(1, new_size));\n    cv::sort(temp, temp, cv::SORT_EVERY_ROW | direction);\n    dest = temp.reshape(1, original_size);\n}\n</code></pre>\n\n<p>NB: Reshaping the mat is very cheap operation, it's just a matter of generating a new header for the shared data.</p>\n\n<hr>\n\n<p>Demo Code:</p>\n\n<pre><code>#include &lt;opencv2/opencv.hpp&gt;\n\n#include &lt;numeric&gt;\n\nvoid dump(cv::Mat1f const&amp; m)\n{\n    assert(m.size.dims() == 3);\n\n    std::cout &lt;&lt; \"[ \";\n    for (int r(0); r &lt; m.size[0]; ++r) {\n        for (int c(0); c &lt; m.size[1]; ++c) {\n            for (int d(0); d &lt; m.size[2]; ++d) {\n                std::cout &lt;&lt; m.at&lt;float&gt;(r,c,d) &lt;&lt; \" \";\n            }\n            std::cout &lt;&lt; \"; \";\n        }\n        std::cout &lt;&lt; \"\\n\";\n    }\n    std::cout &lt;&lt; \"  ]\\n\";\n}\n\nvoid sort3rd(cv::Mat1f const&amp; src, cv::Mat1f&amp; dest, int direction)\n{\n    assert(src.size.dims() == 3);\n    std::vector&lt;int&gt; original_size(src.size.p, src.size.p + 3);\n    std::vector&lt;int&gt; new_size{ original_size[0] * original_size[1], original_size[2] };\n    cv::Mat1f temp(src.reshape(1, new_size));\n    std::cout &lt;&lt; \"Reshaped before sort\\n\" &lt;&lt; temp &lt;&lt; \"\\n\";\n    cv::sort(temp, temp, cv::SORT_EVERY_ROW | direction);\n    std::cout &lt;&lt; \"Reshaped after sort\\n\" &lt;&lt; temp &lt;&lt; \"\\n\";\n    dest = temp.reshape(1, original_size);\n}\n\n\nint main()\n{\n    std::vector&lt;int&gt; sz{3, 3, 4};\n    cv::Mat1f M(static_cast&lt;int&gt;(sz.size()), sz.data());\n\n    std::iota(M.begin(), M.end(), 0.0f);\n\n    std::cout &lt;&lt; \"Input\\n\";\n    dump(M);\n\n    sort3rd(M, M, cv::SORT_DESCENDING);\n\n    std::cout &lt;&lt; \"Output\\n\";\n    dump(M);\n\n    return 0;\n}\n</code></pre>\n\n<p>Console Output:</p>\n\n<pre><code>Input\n[ 0 1 2 3 ; 4 5 6 7 ; 8 9 10 11 ;\n12 13 14 15 ; 16 17 18 19 ; 20 21 22 23 ;\n24 25 26 27 ; 28 29 30 31 ; 32 33 34 35 ;\n  ]\nReshaped before sort\n[0, 1, 2, 3;\n 4, 5, 6, 7;\n 8, 9, 10, 11;\n 12, 13, 14, 15;\n 16, 17, 18, 19;\n 20, 21, 22, 23;\n 24, 25, 26, 27;\n 28, 29, 30, 31;\n 32, 33, 34, 35]\nReshaped after sort\n[3, 2, 1, 0;\n 7, 6, 5, 4;\n 11, 10, 9, 8;\n 15, 14, 13, 12;\n 19, 18, 17, 16;\n 23, 22, 21, 20;\n 27, 26, 25, 24;\n 31, 30, 29, 28;\n 35, 34, 33, 32]\nOutput\n[ 3 2 1 0 ; 7 6 5 4 ; 11 10 9 8 ;\n15 14 13 12 ; 19 18 17 16 ; 23 22 21 20 ;\n27 26 25 24 ; 31 30 29 28 ; 35 34 33 32 ;\n  ]\n</code></pre>\n"}], "owner": {"reputation": 45, "user_id": 4250860, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-2_QTEMW1HPc/AAAAAAAAAAI/AAAAAAAAAY0/OXKhisfgs18/photo.jpg?sz=128", "display_name": "Leo Quiroa", "link": "https://stackoverflow.com/users/4250860/leo-quiroa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 140, "favorite_count": 0, "accepted_answer_id": 52301589, "answer_count": 1, "score": 1, "last_activity_date": 1536777938, "creation_date": 1536773307, "question_id": 52300578, "link": "https://stackoverflow.com/questions/52300578/sort-by-a-depth-dimension-in-opencv-with-c", "title": "Sort by a depth dimension in OpenCV with C++", "body": "<p>I have a multidimensional matrix, how can I sort the cube by the third dimension? using a proper function of opencv?</p>\n\n<pre><code>std::vector&lt;int&gt; sz = { 3,3,4 };\ncv::Mat M(3, sz.data(), CV_32FC1, cv::Scalar(0));\n</code></pre>\n\n<p>In the documentation there is only an option of</p>\n\n<pre><code>CV_SORT_EVERY_COLUMN //dimension-1\nCV_SORT_EVERY_ROW //dimension-2\n</code></pre>\n"}, {"tags": ["c++", "sorting", "search", "vector", "find"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 1, "creation_date": 1536773370, "post_id": 52300550, "comment_id": 91548883, "body": "See <a href=\"https://en.cppreference.com/w/cpp/algorithm#Set_operations_.28on_sorted_ranges.29\" rel=\"nofollow noreferrer\"><code>&lt;algorithm&gt;</code></a>&#39;s set operations."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1536773552, "post_id": 52300550, "comment_id": 91548967, "body": "This is a solved problem. The standard library already has pre-built functions for this. As @Fran&#231;ois Andrieux mentions."}], "answers": [{"comments": [{"owner": {"reputation": 310760, "user_id": 12711, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c330bdee507c95c603a93ca91d9145a9?s=128&d=identicon&r=PG", "display_name": "Michael Burr", "link": "https://stackoverflow.com/users/12711/michael-burr"}, "edited": false, "score": 0, "creation_date": 1536775620, "post_id": 52300661, "comment_id": 91549918, "body": "It should be noted that this solution only works if there are no duplicates in <code>v2</code> that are in <code>v1</code>."}, {"owner": {"reputation": 310760, "user_id": 12711, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c330bdee507c95c603a93ca91d9145a9?s=128&d=identicon&r=PG", "display_name": "Michael Burr", "link": "https://stackoverflow.com/users/12711/michael-burr"}, "edited": false, "score": 0, "creation_date": 1536775742, "post_id": 52300661, "comment_id": 91549978, "body": "Also it doesn&#39;t properly handle the &#39;U&#39; case."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 310760, "user_id": 12711, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c330bdee507c95c603a93ca91d9145a9?s=128&d=identicon&r=PG", "display_name": "Michael Burr", "link": "https://stackoverflow.com/users/12711/michael-burr"}, "edited": false, "score": 0, "creation_date": 1536776033, "post_id": 52300661, "comment_id": 91550105, "body": "@MichaelBurr I had a problem with the A case which I jut fixed.  Can you share which case doesn&#39;t provide correct results?"}, {"owner": {"reputation": 310760, "user_id": 12711, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c330bdee507c95c603a93ca91d9145a9?s=128&d=identicon&r=PG", "display_name": "Michael Burr", "link": "https://stackoverflow.com/users/12711/michael-burr"}, "edited": false, "score": 0, "creation_date": 1536798065, "post_id": 52300661, "comment_id": 91557554, "body": "Declare <code>v2</code> like so: <code>std::vector&lt;int&gt; v2{1,1};</code>.  That should result in case &#39;A&#39; - all elements of <code>y</code> are in <code>x</code> (or perhaps the OP wasn&#39;t very precise in his specification).  The code in the current edit says it&#39;s case &#39;B&#39;: some, but not all, elements of <code>y</code> are in <code>x</code>."}], "tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": true, "score": 4, "last_activity_date": 1536776613, "last_edit_date": 1536776613, "creation_date": 1536773639, "answer_id": 52300661, "question_id": 52300550, "link": "https://stackoverflow.com/questions/52300550/are-all-elements-of-x-present-in-y-sorted-vectors/52300661#52300661", "title": "Are all elements of `x` present in `y` (sorted vectors)?", "body": "<p>For the cost of <code>O(N)</code> additional space you can use <a href=\"https://en.cppreference.com/w/cpp/algorithm/set_intersection\" rel=\"nofollow noreferrer\"><code>std::set_intersection</code></a>.  It has <code>O(2(N1+N2-1))</code> complexity and generates a \"set\" of all the common elements between the two vectors.  You can then check that new \"set\"'s size to figure out A, B, C and U.</p>\n\n<pre><code>int main()\n{\n    std::vector&lt;int&gt; v1{1,2,3,4,5,6,7,8};\n    std::vector&lt;int&gt; v2{5,7,9,10};\n\n    std::vector&lt;int&gt; intersection;\n\n    std::set_intersection(v1.begin(), v1.end(),\n                          v2.begin(), v2.end(),\n                          std::back_inserter(intersection));\n    if (intersection.size() == v2.size() &amp;&amp; v2.size() &gt; 0)\n        std::cout &lt;&lt; \"A\";\n    else if (intersection.size() &gt; 0)\n        std::cout &lt;&lt; \"B\";\n    else if (intersection.size() == 0 &amp;&amp; v2.size() &gt; 0)\n        std::cout &lt;&lt; \"C\";\n    else\n        std::cout &lt;&lt; \"U\";\n}\n</code></pre>\n"}], "owner": {"reputation": 14929, "user_id": 2051137, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/1sIMq.jpg?s=128&g=1", "display_name": "Remi.b", "link": "https://stackoverflow.com/users/2051137/remi-b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "accepted_answer_id": 52300661, "answer_count": 1, "score": 1, "last_activity_date": 1536776613, "creation_date": 1536773163, "question_id": 52300550, "link": "https://stackoverflow.com/questions/52300550/are-all-elements-of-x-present-in-y-sorted-vectors", "title": "Are all elements of `x` present in `y` (sorted vectors)?", "body": "<p>Let <code>x</code> and <code>y</code> be two sorted vectors. I would like to figure out which of the three is correct</p>\n\n<pre><code>A. All elements of `y` are present in `x`\nB. Some but not all elements of `y` are present in `x`\nC. No element of `y` is present in `x`\nU. Undefined (because `y` is empty)\n</code></pre>\n\n<p>A naive way to achieve this is with</p>\n\n<pre><code>template&lt;typename T&gt;\nchar f(std::vector&lt;T&gt; x, std::vector&lt;T&gt; y)\n{\n    if (y.size() == 0)\n    {\n        return 'U';\n    }\n\n    bool whereAnyElementFound = false;\n    bool whereAnyElementNotFound = false;\n    for (T&amp; y_element : y)\n    {\n        bool isElementFound = std::find(x.begin(),x.end(),y_element) != x.end();\n        if (isElementFound)\n        {\n            whereAnyElementFound = true;\n            if (whereAnyElementNotFound)\n            {\n                return 'B';\n            }\n        } else\n        {\n            whereAnyElementNotFound = true;\n            if (whereAnyElementFound)\n            {\n                return 'B';\n            }\n        }\n    }\n    if (whereAnyElementFound)\n    {\n        return 'A';\n    } else if (whereAnyElementNotFound)\n    {\n        return 'C';\n    }\n    abort();\n}\n</code></pre>\n\n<p>The function correctly match the following inputs to outputs</p>\n\n<pre><code>inputs: x = {1,2,4,5} y = {2,5}\noutput: A\n\ninputs: x = {1,2,4,5} y = {2,7}\noutput: B\n\ninputs: x = {1,2,4,5} y = {6,7}\noutput: C\n\ninputs: x = {1,2,4,5} y = {}\noutput: U\n</code></pre>\n\n<p>However, this method does not take advantage of the fact that both vectors are sorted. How can this function made faster for larger vectors?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1536773138, "post_id": 52300518, "comment_id": 91548761, "body": "Why don&#39;t you use a <code>std::array</code> in 1st place?"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1536773252, "post_id": 52300518, "comment_id": 91548815, "body": "You can use an array (or <i>better</i> <code>std::array</code> or <code>std::vector</code>) of <code>std::reference_wrapper&lt;char&gt;</code> to get a new &quot;view&quot; of the existing array without modifying it."}, {"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 1, "creation_date": 1536773300, "post_id": 52300518, "comment_id": 91548840, "body": "You can always just define an logical array object with a suitable <code>operator[]</code>, if the goal is to use the <code>[i]</code> notation to access every other byte. But that focus on a particular notation seems suspect. Why do you want that notation?"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1536773722, "post_id": 52300518, "comment_id": 91549042, "body": "Why create a separate array? Just write <code>arr[i * 2]</code> where you have <code>arr[i]</code> now."}, {"owner": {"reputation": 3092, "user_id": 701263, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/f145997aeec8662800ea27abbe7e796a?s=128&d=identicon&r=PG", "display_name": "Kyle", "link": "https://stackoverflow.com/users/701263/kyle"}, "edited": false, "score": 0, "creation_date": 1536775255, "post_id": 52300518, "comment_id": 91549749, "body": "Sorry everyone. I forgot to mention that I don&#39;t have control of the library that I&#39;ll be passing the array to. And that I have to pass the array as a pointer. That&#39;s a pretty big thing to forget. My bad."}, {"owner": {"reputation": 26838, "user_id": 135769, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/Pghgx.jpg?s=128&g=1", "display_name": "3Dave", "link": "https://stackoverflow.com/users/135769/3dave"}, "edited": false, "score": 1, "creation_date": 1536788822, "post_id": 52300518, "comment_id": 91555481, "body": "Many stl containers (including <code>vector</code> and <code>array</code>) have a <code>.data()</code> method which returns a pointer to the first element in the collection, which you can pass to your library in the same way you&#39;d pass a pointer to the first element in your array. Also, I&#39;d just use a second array defining the view, or mapping, between indices. You&#39;re still doubling the amount of storage required, but it&#39;s better than 8x. (Or just re-order the original array in-place before passing it.)"}], "answers": [{"tags": [], "owner": {"reputation": 4580, "user_id": 218774, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ejff2.png?s=128&g=1", "display_name": "J. Calleja", "link": "https://stackoverflow.com/users/218774/j-calleja"}, "is_accepted": true, "score": 1, "last_activity_date": 1536787550, "creation_date": 1536787550, "answer_id": 52303694, "question_id": 52300518, "link": "https://stackoverflow.com/questions/52300518/swizzle-modify-array-access/52303694#52303694", "title": "swizzle/modify array access", "body": "<p>I do not think you can use less memory than one pointer per element</p>\n\n<p>If you need to pass an array of <code>char*</code> to an uncontrolled library, I understand that you have to allocate the whole array because that is what the library is expecting. The code would like:</p>\n\n<pre><code>std::array&lt;char*, 50&gt; bytes_ref;\nfor(size_t i = 0; i &lt; bytes_ref.size(); ++i){\n    bytes_ref[i] = &amp;bytes[i * 2];\n}\n</code></pre>\n\n<p>Then, you can pass the array as:</p>\n\n<pre><code>f(bytes_ref.data());\n</code></pre>\n\n<p>If you would not need to use <code>char**</code>, you would have more options. You may use <code>std::reference_wrapper</code> although its size is similar to a pointer. If you always have to skip 2 elements, you may create an object for this. For example:</p>\n\n<pre><code>class Wrapper {\npublic:\n    Wrapper(char *origin) : m_origin(origin) {}\n    char* operator[](size_t index) {return m_origin + 2*index;}\nprivate:\n    char *m_origin;\n};\n</code></pre>\n\n<p>The above will return a pointer to every 2 elements using the [] operator.</p>\n"}], "owner": {"reputation": 3092, "user_id": 701263, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/f145997aeec8662800ea27abbe7e796a?s=128&d=identicon&r=PG", "display_name": "Kyle", "link": "https://stackoverflow.com/users/701263/kyle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "accepted_answer_id": 52303694, "answer_count": 1, "score": 0, "last_activity_date": 1536787550, "creation_date": 1536773035, "last_edit_date": 1536775382, "question_id": 52300518, "link": "https://stackoverflow.com/questions/52300518/swizzle-modify-array-access", "title": "swizzle/modify array access", "body": "<p>I have an array of bytes that I want to change how it's accessed. Here's the array:</p>\n\n<pre><code>char bytes[100];\n</code></pre>\n\n<p>I want to have another array that changes how the original array is accessed. If we could put references in array, it would look something like this:</p>\n\n<pre><code>char&amp; bytes_ref[50];\nfor(size_t i = 0; i &lt; 50; i++){\n    bytes_ref[i] = bytes[i * 2];\n}\n</code></pre>\n\n<p>Though array of references aren't valid. I came up with this that in theory does what I want:</p>\n\n<pre><code>#include &lt;iostream&gt;\nstruct Byte {\n    char* ref;\n\n    Byte(){}\n\n    Byte(char&amp; c){\n        ref = &amp;c;\n    }\n\n    operator char&amp;() const {\n        return *ref;\n    }\n};\n\nint main(){\n    char bytes[100];\n    Byte bytes_ref[50];\n    for(size_t i = 0; i &lt; 50; i++){\n        bytes_ref[i] = bytes[i * 2];\n    }\n}\n</code></pre>\n\n<p>Though this works like I want it to, it takes up a ton of space.</p>\n\n<p>Is there some way to do this without using up 7 more bytes per entry? My instinct is no, but I'm hopeful there may be some kind of special functionality in C++ that could do this, or maybe do some direct memory manipulation and access.</p>\n\n<p>The reason I want to do this is I have an array of bytes that represent an image in NV21 format. I want to create a separate array that references the bytes in the original buffer but takes half the pixels, effectively resizing the image on the fly.</p>\n\n<p>I have to pass a char** to an uncontrolled library.</p>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["c++", "eigen"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1536772862, "post_id": 52300460, "comment_id": 91548640, "body": "Check the call stack, where it came from."}, {"owner": {"reputation": 1824, "user_id": 8704463, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/8fbfeed2e9c309c1c5d030eb9fe75707?s=128&d=identicon&r=PG&f=1", "display_name": "R zu", "link": "https://stackoverflow.com/users/8704463/r-zu"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1536772866, "post_id": 52300460, "comment_id": 91548644, "body": "I know I can use debugger, but that will only step into the internal of the library. Won&#39;t help me as a user of the library."}, {"owner": {"reputation": 1824, "user_id": 8704463, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/8fbfeed2e9c309c1c5d030eb9fe75707?s=128&d=identicon&r=PG&f=1", "display_name": "R zu", "link": "https://stackoverflow.com/users/8704463/r-zu"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1536773060, "post_id": 52300460, "comment_id": 91548720, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6: most of the time, I get some kind of runtime warning, unless I <code>#define EIGEN_NO_DEBUG</code>. But no run time warning this time. just segfault."}, {"owner": {"reputation": 1824, "user_id": 8704463, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/8fbfeed2e9c309c1c5d030eb9fe75707?s=128&d=identicon&r=PG&f=1", "display_name": "R zu", "link": "https://stackoverflow.com/users/8704463/r-zu"}, "edited": false, "score": 0, "creation_date": 1536773243, "post_id": 52300460, "comment_id": 91548808, "body": "If the code that I write is wrong, I use debugger. If it involves the internal of a library not made by me, I ask."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1536773279, "post_id": 52300460, "comment_id": 91548830, "body": "... why? We didn&#39;t write the library either."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 1, "creation_date": 1536773583, "post_id": 52300460, "comment_id": 91548979, "body": "What sizes you expect <code>mat_b</code>, <code>mat_c</code> and result one to be?"}], "answers": [{"comments": [{"owner": {"reputation": 1824, "user_id": 8704463, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/8fbfeed2e9c309c1c5d030eb9fe75707?s=128&d=identicon&r=PG&f=1", "display_name": "R zu", "link": "https://stackoverflow.com/users/8704463/r-zu"}, "edited": false, "score": 0, "creation_date": 1536775850, "post_id": 52300856, "comment_id": 91550026, "body": "They could add an assert to the <code>&lt;&lt;</code> operator to check if the dimension of the object is specified. Then no one will ask this kind of question again."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 1824, "user_id": 8704463, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/8fbfeed2e9c309c1c5d030eb9fe75707?s=128&d=identicon&r=PG&f=1", "display_name": "R zu", "link": "https://stackoverflow.com/users/8704463/r-zu"}, "edited": false, "score": 0, "creation_date": 1536778436, "post_id": 52300856, "comment_id": 91551218, "body": "Contact library creator/supporters and suggest, I am not related to them."}, {"owner": {"reputation": 1824, "user_id": 8704463, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/8fbfeed2e9c309c1c5d030eb9fe75707?s=128&d=identicon&r=PG&f=1", "display_name": "R zu", "link": "https://stackoverflow.com/users/8704463/r-zu"}, "edited": false, "score": 0, "creation_date": 1536778672, "post_id": 52300856, "comment_id": 91551345, "body": "They will see this. They always check here."}], "tags": [], "owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "is_accepted": true, "score": 1, "last_activity_date": 1536774439, "last_edit_date": 1592644375, "creation_date": 1536774439, "answer_id": 52300856, "question_id": 52300460, "link": "https://stackoverflow.com/questions/52300460/segfault-in-tranposed-matrix-multiplication-with-eval-with-eigen-3-library/52300856#52300856", "title": "Segfault in Tranposed matrix multiplication with .eval() with Eigen 3 library", "body": "<p>As stated in <a href=\"http://eigen.tuxfamily.org/dox/group__TutorialAdvancedInitialization.html\" rel=\"nofollow noreferrer\">documentatipon</a></p>\n<blockquote>\n<p>The comma initializer</p>\n<p>Eigen offers a comma initializer syntax which allows the user to easily set all the coefficients of a matrix, vector or array. Simply list the coefficients, starting at the top-left corner and moving from left to right and from the top to the bottom. <strong>The size of the object needs to be specified beforehand</strong>. If you list too few or too many coefficients, Eigen will complain.</p>\n</blockquote>\n<p>emphasis is mine. If you expect that <code>Matrix</code> ctor would deduce size from your formatting, that simply not possible in C++. Looks like you created 16x1 and 24x1 matrix and then try to multiply 1x16 (transposed first one) to 24x1 which is not legal.</p>\n"}], "owner": {"reputation": 1824, "user_id": 8704463, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/8fbfeed2e9c309c1c5d030eb9fe75707?s=128&d=identicon&r=PG&f=1", "display_name": "R zu", "link": "https://stackoverflow.com/users/8704463/r-zu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 218, "favorite_count": 0, "accepted_answer_id": 52300856, "answer_count": 1, "score": -3, "last_activity_date": 1536774439, "creation_date": 1536772781, "question_id": 52300460, "link": "https://stackoverflow.com/questions/52300460/segfault-in-tranposed-matrix-multiplication-with-eval-with-eigen-3-library", "title": "Segfault in Tranposed matrix multiplication with .eval() with Eigen 3 library", "body": "<p>I added two <code>.eval()</code> just in case. I got no compilation error, and no run time warning. Just segfault.</p>\n\n<p>Thanks for helping me to fix this.</p>\n\n<p>Test:</p>\n\n<pre><code>#include &lt;Eigen/Eigen&gt;\n#include &lt;iostream&gt;\nusing namespace Eigen;\n\nint main() {\n    Matrix&lt;float, Dynamic, Dynamic&gt; mat_b;\n    Matrix&lt;float, Dynamic, Dynamic&gt; mat_c;\n\n    mat_b &lt;&lt; 1.0, 0.0, 0.5, 0.5,\n             0.0, 1.0, 0.5, 0.5,\n             1.0, 0.0, 1.0, 0.0,\n             0.0, 1.0, 0.0, 1.0;\n\n    mat_c &lt;&lt; 0.0, 0.0, 0.0, 0.0, 1.0, 0.0,\n             0.0, 0.0, 0.0, 0.0, 0.0, 1.0,\n             1.0, 0.0, 1.0, 0.0, 0.0, 0.0,\n             1.0, 0.0, 0.0, 1.0, 0.0, 0.0;\n\n    std::cout &lt;&lt; (mat_b.transpose().eval() * mat_c).eval() &lt;&lt; \"\\n\";\n}\n</code></pre>\n\n<p>Result:</p>\n\n<pre><code>Segmentation fault (core dumped)\n</code></pre>\n"}, {"tags": ["c++", "user-defined-functions"], "comments": [{"owner": {"reputation": 58292, "user_id": 34824, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ri8DI.jpg?s=128&g=1", "display_name": "abelenky", "link": "https://stackoverflow.com/users/34824/abelenky"}, "edited": false, "score": 5, "creation_date": 1536771546, "post_id": 52300156, "comment_id": 91548006, "body": "What input did you give it? what result did you get? what result did you <b><i>expect</i></b> to get?"}, {"owner": {"reputation": 2721, "user_id": 8767209, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f22597b536b07b41525099a8c16e23ce?s=128&d=identicon&r=PG&f=1", "display_name": "MFisherKDX", "link": "https://stackoverflow.com/users/8767209/mfisherkdx"}, "edited": false, "score": 1, "creation_date": 1536771710, "post_id": 52300156, "comment_id": 91548098, "body": "additionally, you don&#39;t want to use == to compare floating point numbers."}, {"owner": {"reputation": 2721, "user_id": 8767209, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f22597b536b07b41525099a8c16e23ce?s=128&d=identicon&r=PG&f=1", "display_name": "MFisherKDX", "link": "https://stackoverflow.com/users/8767209/mfisherkdx"}, "edited": false, "score": 1, "creation_date": 1536771831, "post_id": 52300156, "comment_id": 91548158, "body": "print the values a, b, and c.  Are they what you entered?"}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "reply_to_user": {"reputation": 2721, "user_id": 8767209, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f22597b536b07b41525099a8c16e23ce?s=128&d=identicon&r=PG&f=1", "display_name": "MFisherKDX", "link": "https://stackoverflow.com/users/8767209/mfisherkdx"}, "edited": false, "score": 1, "creation_date": 1536772148, "post_id": 52300156, "comment_id": 91548331, "body": "@MFisherKDX -- &quot;you don&#39;t want to use ==&quot; -- sure you do. It&#39;s exactly what&#39;s needed here. If <code>delta</code> is <b>exactly 0</b> there is <b>exactly 1</b>solution."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 3, "creation_date": 1536772557, "post_id": 52300156, "comment_id": 91548511, "body": "Your function has a <b>single</b> <code>double</code> as the return type.  So, what do you expect <code>return solution1, solution2;</code> to do?"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 2, "creation_date": 1536772899, "post_id": 52300156, "comment_id": 91548658, "body": "What did you learn when you stepped through your program in your debugger and inspected the control flow and variable values? How, and where, did the actual behaviour differ from your expectations? Aka <i>debugging step 1</i>."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "reply_to_user": {"reputation": 2721, "user_id": 8767209, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f22597b536b07b41525099a8c16e23ce?s=128&d=identicon&r=PG&f=1", "display_name": "MFisherKDX", "link": "https://stackoverflow.com/users/8767209/mfisherkdx"}, "edited": false, "score": 0, "creation_date": 1536774708, "post_id": 52300156, "comment_id": 91549484, "body": "@MFisherKDX: I&#39;m not stating anything about checking.  All I&#39;m saying is that the <code>return</code> statement should have one value not two.  The <i>comma operator</i> will evaluate the first variable then return the second.  The <code>return</code> statement will not return two values.  I don&#39;t see where I made comments about comparisons in these comments."}, {"owner": {"reputation": 2721, "user_id": 8767209, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f22597b536b07b41525099a8c16e23ce?s=128&d=identicon&r=PG&f=1", "display_name": "MFisherKDX", "link": "https://stackoverflow.com/users/8767209/mfisherkdx"}, "reply_to_user": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1536774841, "post_id": 52300156, "comment_id": 91549543, "body": "@Pete Becker -- I really don&#39;t want to turn this into an argument. I get your point. And I don&#39;t think there is anything necessarily &quot;wrong&quot; here with checking == 0. But I think it&#39;s important for newbies to understand they should not expect == to &quot;work&quot; for floating point values. I&#39;ve seen too many bugs from very bright developers who did not learn this. For instance you enter 1.0 0.2 0.01 for a, b, and c, you will get two roots instead of 1."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1536774848, "post_id": 52300156, "comment_id": 91549547, "body": "@AlexWatson:  You could make your program more efficient by assigning <code>sqrt(delta)</code> to a constant temporary variable and <code>2 * a</code> to a temporary variable before your first <code>if</code> statement."}, {"owner": {"reputation": 9311, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "reply_to_user": {"reputation": 2721, "user_id": 8767209, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f22597b536b07b41525099a8c16e23ce?s=128&d=identicon&r=PG&f=1", "display_name": "MFisherKDX", "link": "https://stackoverflow.com/users/8767209/mfisherkdx"}, "edited": false, "score": 0, "creation_date": 1536779750, "post_id": 52300156, "comment_id": 91551872, "body": "@MFisherKDX Yes you&#39;ll get two roots instead of one, but you are not <i>really</i> entering those values, <a href=\"https://wandbox.org/permlink/7UMHZZtJce8lETN2\" rel=\"nofollow noreferrer\">don&#39;t you</a> ;)?"}], "answers": [{"comments": [{"owner": {"reputation": 5319, "user_id": 2754173, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24b0a0fd9004b29fa441e5bbf6904e69?s=128&d=identicon&r=PG&f=1", "display_name": "Geezer", "link": "https://stackoverflow.com/users/2754173/geezer"}, "edited": false, "score": 0, "creation_date": 1536779496, "post_id": 52300186, "comment_id": 91551765, "body": "So why is <code>solutionFun()</code> defined to return <code>double</code>?"}], "tags": [], "owner": {"reputation": 58292, "user_id": 34824, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ri8DI.jpg?s=128&g=1", "display_name": "abelenky", "link": "https://stackoverflow.com/users/34824/abelenky"}, "is_accepted": true, "score": 2, "last_activity_date": 1536771978, "last_edit_date": 1536771978, "creation_date": 1536771590, "answer_id": 52300186, "question_id": 52300156, "link": "https://stackoverflow.com/questions/52300156/quadratic-formula-c-user-defined-function/52300186#52300186", "title": "Quadratic Formula c++ - user-defined function", "body": "<p>This code is not how you get multiple inputs:</p>\n\n<pre><code>cin &gt;&gt; a ,b ,c;\n</code></pre>\n\n<p>Instead, you want:</p>\n\n<pre><code>cin &gt;&gt; a &gt;&gt; b &gt;&gt; c;\n</code></pre>\n\n<hr>\n\n<p>This code is not how you display answers:</p>\n\n<pre><code>cout &lt;&lt; \"The solutions are:\";\nreturn solution1, solution2;\n</code></pre>\n\n<p>Instead you want:</p>\n\n<pre><code>cout &lt;&lt; \"The solutions are:\" &lt;&lt; solution1 &lt;&lt; \" and also \" &lt;&lt; solution2;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5319, "user_id": 2754173, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24b0a0fd9004b29fa441e5bbf6904e69?s=128&d=identicon&r=PG&f=1", "display_name": "Geezer", "link": "https://stackoverflow.com/users/2754173/geezer"}, "is_accepted": false, "score": 2, "last_activity_date": 1536783261, "last_edit_date": 1536783261, "creation_date": 1536771849, "answer_id": 52300239, "question_id": 52300156, "link": "https://stackoverflow.com/questions/52300156/quadratic-formula-c-user-defined-function/52300239#52300239", "title": "Quadratic Formula c++ - user-defined function", "body": "<p>A few issues with regards to code validity and desired behavior (coding practice/design aside). First see how to return multiple values from your <code>solutionFun()</code> (currently defined to return<code>double) by using</code>std::vector<code>-- even though you are not using anything returned in this piece of code. Second, you didn't print (</code>cout &lt;&lt;<code>) the solution values themselves, and it seemed like you were going for it. Third, see how to use</code>std::cin` for multiple inputs in one line of code. Fixed version is this:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;cmath&gt;\n#include &lt;vector&gt;\n\nusing namespace std;\n\nstd::vector&lt;double&gt; solutionFun (double a, double b, double c) {\n\n  double  delta, solution1, solution2;\n\n  delta = b*b - 4*a*c;\n\n  if (delta &gt; 0 ){\n    solution1 = (-b + sqrt(delta)) / (2*a);\n    solution2 = (-b - sqrt(delta)) / (2*a);\n\n    cout &lt;&lt; \"There are 2 solutions.\" &lt;&lt; endl;\n    cout &lt;&lt; \"The solutions are: \" &lt;&lt; solution1 &lt;&lt; \" and \" &lt;&lt; solution2;\n    return {solution1, solution2};\n  }\n\n  else if (delta == 0){\n    solution1 = (-b) / (2*a);\n    cout &lt;&lt; \"There is 1 solution.\" &lt;&lt; endl;\n    cout &lt;&lt; \"The solution is: \" &lt;&lt; solution1;\n    return {solution1};\n  }\n\n  else {\n    cout &lt;&lt; \"There is no solution.\";\n    return {};\n  }    \n}\n\nint main(){\n\n  double a ,b ,c;\n\n  cout &lt;&lt; \"Please enter the values of a, b, and c respectively:\";\n  cin &gt;&gt; a &gt;&gt; b &gt;&gt; c;\n\n  auto result = solutionFun(a ,b ,c);\n\n  for (auto scalar : result)\n  {\n    // Do something with a component, or don't return anything from the function : )\n  }\n\n  return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "is_accepted": false, "score": 0, "last_activity_date": 1536772950, "creation_date": 1536772950, "answer_id": 52300499, "question_id": 52300156, "link": "https://stackoverflow.com/questions/52300156/quadratic-formula-c-user-defined-function/52300499#52300499", "title": "Quadratic Formula c++ - user-defined function", "body": "<p>Another method is pass your <code>solution</code> variables on the command line:  </p>\n\n<pre><code>void solutionFun (double a, double b, double c,\n                  double&amp; solution1, double&amp; solution2, size_t&amp; solution_count) {\n\n  double  delta;\n\n  delta = b*b - 4*a*c;\n  solution2 = 0.0;\n\n  if (delta &gt; 0 ){\n    solution1 = (-b + sqrt(delta)) / (2*a);\n    solution2 = (-b - sqrt(delta)) / (2*a);\n    solution_count = 2;\n\n    cout &lt;&lt; \"There are 2 solutions.\" &lt;&lt; endl;\n    cout &lt;&lt; \"The solutions are: \" &lt;&lt; solution1 &lt;&lt; \" and \" &lt;&lt; solution2;\n    return;\n  }\n\n  else if (delta == 0){\n    solution1 = (-b) / (2*a);\n    solution_count = 1;\n    cout &lt;&lt; \"There is 1 solution.\" &lt;&lt; endl;\n    cout &lt;&lt; \"The solution is: \" &lt;&lt; solution1;\n    return;\n  }\n\n  else {\n    cout &lt;&lt; \"There is no solution.\";\n    solution_count = 0;\n    return;\n  }    \n}\n</code></pre>\n\n<p>The <code>solution1, solution2</code> and <code>solution_count</code> are passed <em>by reference</em> which means that the function can modify the caller's variables.  </p>\n"}], "owner": {"reputation": 35, "user_id": 10354458, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-XcwomMSYJgw/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaMwBVO0D4QmhtTLAcPshSyJFHyJ2Q/mo/photo.jpg?sz=128", "display_name": "Alex Watson", "link": "https://stackoverflow.com/users/10354458/alex-watson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1100, "favorite_count": 0, "accepted_answer_id": 52300186, "answer_count": 3, "score": 1, "last_activity_date": 1536783261, "creation_date": 1536771385, "question_id": 52300156, "link": "https://stackoverflow.com/questions/52300156/quadratic-formula-c-user-defined-function", "title": "Quadratic Formula c++ - user-defined function", "body": "<p>I wrote this code with a user-defined function, but it seems not to work. I've trying to find out where the mistake is for hours. But couldn't find anything. it looks like the problem is in passing the parameter. But I don't know, I'm pretty new to this! </p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;cmath&gt;\nusing namespace std;\n\ndouble solutionFun (double a, double b, double c) {\n\n  double  delta, solution1, solution2;\n\n  delta = b*b - 4*a*c;\n\n  if (delta &gt; 0 ){\n    solution1 = (-b + sqrt(delta)) / (2*a);\n    solution2 = (-b - sqrt(delta)) / (2*a);\n\n    cout &lt;&lt; \"There are 2 solutions.\" &lt;&lt; endl;\n    cout &lt;&lt; \"The solutions are:\";\n    return solution1, solution2;\n  }\n\n  else if (delta == 0){\n    solution1 = (-b) / (2*a);\n    cout &lt;&lt; \"There is 1 solution.\" &lt;&lt; endl;\n    cout &lt;&lt; \"The solution is:\";\n    return solution1;\n  }\n\n  else {\n    cout &lt;&lt; \"There is no solution.\";\n    return 0;\n  }\n\n}\n\nint main(){\n\n  double a ,b ,c;\n\n  cout &lt;&lt; \"Please enter the values of a, b, and c respectively:\";\n  cin &gt;&gt; a ,b ,c;\n\n  solutionFun(a ,b ,c);\n\n  return 0;\n}         \n</code></pre>\n"}, {"tags": ["c++", "opencv"], "comments": [{"owner": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "edited": false, "score": 0, "creation_date": 1536779391, "post_id": 52300011, "comment_id": 91551720, "body": "Is your subject well illuminated? Exposure time gives you the upper limit of the frame rate you can get, so if the camera has auto-exposure enabled (which it likely does) it might be trying to compensate for a dark environment."}, {"owner": {"reputation": 144839, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1536784913, "post_id": 52300011, "comment_id": 91554014, "body": "Try setting the height and width <b>before</b> setting the framerate."}, {"owner": {"reputation": 65, "user_id": 10060978, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab682bdbdd6a5dd4cc87c89863f6693f?s=128&d=identicon&r=PG&f=1", "display_name": "ub0baa", "link": "https://stackoverflow.com/users/10060978/ub0baa"}, "reply_to_user": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "edited": false, "score": 0, "creation_date": 1536785503, "post_id": 52300011, "comment_id": 91554266, "body": "@DanMa\u0161ek, i&#39;ve tried it in the dark room and fps didn&#39;t change, same thing with all the lights on. so i guess auto exposure is disabled"}, {"owner": {"reputation": 65, "user_id": 10060978, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab682bdbdd6a5dd4cc87c89863f6693f?s=128&d=identicon&r=PG&f=1", "display_name": "ub0baa", "link": "https://stackoverflow.com/users/10060978/ub0baa"}, "reply_to_user": {"reputation": 144839, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1536785510, "post_id": 52300011, "comment_id": 91554269, "body": "@MarkSetchell, thanks, tried it, but fps is solid 17 unfortunately"}, {"owner": {"reputation": 864, "user_id": 10320907, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a781c80933f17fa87d97b70e3fca260?s=128&d=identicon&r=PG", "display_name": "tunglt", "link": "https://stackoverflow.com/users/10320907/tunglt"}, "edited": false, "score": 0, "creation_date": 1536786731, "post_id": 52300011, "comment_id": 91554699, "body": "Perhap std:cout is the most costly operation in your while loop, try to remove it and calculate the fps by using a long bench mark time."}, {"owner": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "reply_to_user": {"reputation": 864, "user_id": 10320907, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a781c80933f17fa87d97b70e3fca260?s=128&d=identicon&r=PG", "display_name": "tunglt", "link": "https://stackoverflow.com/users/10320907/tunglt"}, "edited": false, "score": 0, "creation_date": 1536787114, "post_id": 52300011, "comment_id": 91554854, "body": "@TungLeThanh It can be slowish, but not on the order of many milliseconds per frame just to display a number. If anything, I&#39;d drop the <code>imshow</code>/<code>waitKey</code>, but even those shouldn&#39;t have so much overhead at 320x240 on any reasonable hardware..."}, {"owner": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "edited": false, "score": 0, "creation_date": 1536787501, "post_id": 52300011, "comment_id": 91554987, "body": "@ub0baa Hmm. What sort of hardware is this running on? What about the connection -- I&#39;d try different ports to make sure you&#39;re not getting bandwidth limited due to some other device on the same host controller, or even being on a lower quality controller. Can some other software on the same machine get better framerate? Can you try reproduce the issue on different machine?"}, {"owner": {"reputation": 864, "user_id": 10320907, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a781c80933f17fa87d97b70e3fca260?s=128&d=identicon&r=PG", "display_name": "tunglt", "link": "https://stackoverflow.com/users/10320907/tunglt"}, "edited": false, "score": 0, "creation_date": 1536788031, "post_id": 52300011, "comment_id": 91555188, "body": "Did you try CAP_DSHOW as option passed to open() function ? I dont see it in your commented code."}, {"owner": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "edited": false, "score": 0, "creation_date": 1536823842, "post_id": 52300011, "comment_id": 91564407, "body": "not using MJPG will give higher fps?"}], "answers": [{"tags": [], "owner": {"reputation": 65, "user_id": 10060978, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab682bdbdd6a5dd4cc87c89863f6693f?s=128&d=identicon&r=PG&f=1", "display_name": "ub0baa", "link": "https://stackoverflow.com/users/10060978/ub0baa"}, "is_accepted": false, "score": 0, "last_activity_date": 1536835622, "creation_date": 1536835622, "answer_id": 52312087, "question_id": 52300011, "link": "https://stackoverflow.com/questions/52300011/opencv-webcam-mjpg-low-fps/52312087#52312087", "title": "OpenCV webcam MJPG low FPS", "body": "<p>Thanks fo suggestions everybody!\nLooks like the answer is camera-specific: i had to install Logitech Webcam Software and disable RightLight feature, now FPS is about 30.\nMaybe there is some way to disable RightLight from OpenCV using cap.set(...), but this is subject for further investigation.</p>\n"}], "owner": {"reputation": 65, "user_id": 10060978, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab682bdbdd6a5dd4cc87c89863f6693f?s=128&d=identicon&r=PG&f=1", "display_name": "ub0baa", "link": "https://stackoverflow.com/users/10060978/ub0baa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 268, "favorite_count": 1, "answer_count": 1, "score": 3, "last_activity_date": 1536835622, "creation_date": 1536770798, "question_id": 52300011, "link": "https://stackoverflow.com/questions/52300011/opencv-webcam-mjpg-low-fps", "title": "OpenCV webcam MJPG low FPS", "body": "<p>The problem is that I am keep getting low FPS from Logitech C270 webcam capture in OpenCV3. \nThings i've tried are described in code comments</p>\n\n<pre><code>Mat frame;\nint main(int argc, char *argv[])\n\n{\n    // i've tried it this way\n//int apiBackend = cv::CAP_DSHOW;\n//cv::VideoCapture cap(0+apiBackend);\n\n//and tis way\nVideoCapture cap(0);\ncap.open(0);\n\ncap.set(CAP_PROP_FOURCC ,cv::VideoWriter::fourcc('M', 'J', 'P', 'G') );\n\n//cap.set(CAP_PROP_EXPOSURE , 1); //changing this gives no result\n//cap.set(CAP_PROP_GAIN , 10);    // same with this\n\ncap.set(CAP_PROP_FPS, 100);\ncap.set(CAP_PROP_FRAME_WIDTH, 640);\ncap.set(CAP_PROP_FRAME_HEIGHT, 480);\n\nwhile(1)\n{\n    float e1 = cv::getTickCount();\n\n    cap &gt;&gt; frame; // get a new frame from camera\n\n    imshow(\"frame\", frame);\n\n    float e2 = cv::getTickCount();\n    float t = (e2 - e1)/cv::getTickFrequency();\n    float fps = 1.0 / t;\n    std::cout &lt;&lt; fps &lt;&lt; std::endl;\n\n    if(waitKey(1) &gt;= 0) break;\n}\n\nreturn 0;\n}\n</code></pre>\n\n<p>Changing CAP_PROP_FPS to 5 works, and FPS drops ok.</p>\n\n<p>Playing with resolution didn't help: from 320*240 to 1280*720 i keep getting about 16 FPS.</p>\n\n<p>Webcam drivers are latest.\nAm i missing something?</p>\n"}, {"tags": ["c++", "recursion", "lua"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1536771944, "post_id": 52299717, "comment_id": 91548208, "body": "TGhat&#39;s apparently not C, but C++. Use the corect language tags."}], "answers": [{"comments": [{"owner": {"reputation": 209, "user_id": 2510649, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5781c6d9c059c227908b29f0be5bec7d?s=128&d=identicon&r=PG", "display_name": "Danny Diaz", "link": "https://stackoverflow.com/users/2510649/danny-diaz"}, "edited": false, "score": 0, "creation_date": 1536772609, "post_id": 52300234, "comment_id": 91548523, "body": "awesome.  The fact that &quot;no special actions are required&quot; helps alot.  It looks like the main difference from the example you provided and my code, is that I don&#39;t have the &quot;lua function&quot; on the stack when I recursively call pcall.  I&#39;ll try that to see if it cleans me up. tx!"}], "tags": [], "owner": {"reputation": 5108, "user_id": 5675002, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06b0aaa2c9904c7543220c849d6a29d3?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad", "link": "https://stackoverflow.com/users/5675002/vlad"}, "is_accepted": true, "score": 0, "last_activity_date": 1536771836, "creation_date": 1536771836, "answer_id": 52300234, "question_id": 52299717, "link": "https://stackoverflow.com/questions/52299717/recursive-pcall-function/52300234#52300234", "title": "recursive pCall function", "body": "<p>There should be no problems with recursive calls, as long as you don't <code>yield</code> across such calls. Yielding is using <code>longjmp</code>, so it breaks the chain of calls, but that doesn't apply to regular <code>lua_pcall</code> uses.</p>\n\n<p>Try this example (tested with Lua 5.2), there's function <code>foo</code>, calling native function <code>bar</code> which in turn calls <code>foo</code> again, decrementing the counter. No special actions are required to handle recursive calls.</p>\n\n<pre><code>#include &lt;lualib.h&gt;\n#include &lt;lauxlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint bar(lua_State* L)\n{\n    int num = lua_tointeger(L, 1);\n    printf(\"bar: %d\\n\", num);\n    if(num&gt;0)\n    {\n        // call foo with decremented iteration count\n        lua_getglobal(L, \"foo\");\n        lua_pushinteger(L, num-1);\n        lua_pcall(L, 1, 1, 0);\n        lua_pop(L, 1);\n    }\n    return 0;\n}\n\n\nint main()\n{\n    lua_State *L = luaL_newstate();\n    luaL_openlibs(L);\n\n    lua_pushcfunction(L, bar);\n    lua_setglobal(L, \"bar\");\n\n    luaL_dostring(L, \"function foo(x)\\n\"\n                     \"  print(\\\"foo: \\\"..x)\\n\"\n                     \"  bar(x)\\n\"\n                     \"end\\n\");\n\n    // call foo with 7 as iterations count\n    lua_getglobal(L, \"foo\");\n    lua_pushinteger(L, 7);\n    lua_pcall(L, 1, 1, 0);\n    lua_pop(L, 1);\n\n    lua_close(L);\n\n    return 0;\n}\n</code></pre>\n\n<p>Whatever is wrong in your case (not working as expected, etc) might be related to your scripts and logic behind it, and not to the fact that the calls are recursive.</p>\n"}], "owner": {"reputation": 209, "user_id": 2510649, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5781c6d9c059c227908b29f0be5bec7d?s=128&d=identicon&r=PG", "display_name": "Danny Diaz", "link": "https://stackoverflow.com/users/2510649/danny-diaz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 102, "favorite_count": 0, "closed_date": 1536779627, "accepted_answer_id": 52300234, "answer_count": 1, "score": 0, "last_activity_date": 1536771922, "creation_date": 1536769583, "last_edit_date": 1536771922, "question_id": 52299717, "link": "https://stackoverflow.com/questions/52299717/recursive-pcall-function", "closed_reason": "Not suitable for this site", "title": "recursive pCall function", "body": "<p>I have a situation where a lua_pcall can sometimes be called recursively.  The recursive call does not work as expected.  I think it is because the 2nd call  still has the state of the previous lua_pcall.  The stack can still contain variables of the first lua_pcall, not to mention all the other internal variables that lua may use inside lua_State.</p>\n\n<p>My setup is as follows..</p>\n\n<pre><code>class LuaObject\n{\n    public:\n\n    lua_State* m_pLuaState;\n\n    void Execute\n    {\n        //push processed script\n        lua_pushvalue( m_pLuaState , -1 );\n\n        //now run it\n        int iStatus = lua_pcall( m_pLuaState, 0, 1, 0 );\n\n        //remove the return value from the stack\n        lua_pop( m_pLuaState, 1 );\n    }\n}\n</code></pre>\n\n<p>So, given the above setup.  LuaObject::Execute() can be called and then inside, it could call the same LuaObject::Execute(), which will run the lua_pcall with the same lua_State as the previous pcall.  Should I somehow ensure that m_pLuaState is prepared before each recursive call? \n Or should I create a new lua_State for each lua_pcall?  I feel that preparing the same m_pLuaState is the correct way, but how do i do it?  Maybe push the lua_TFunction from when this script was processed onto the stack?</p>\n"}, {"tags": ["c++", "node.js", "segmentation-fault", "node.js-addon", "magick++"], "comments": [{"owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 0, "creation_date": 1536768359, "post_id": 52299253, "comment_id": 91546483, "body": "<code>printf</code> will not show all your data because it stops at a NUL byte. It&#39;s designed for text data not the binary data that you have."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1536768404, "post_id": 52299253, "comment_id": 91546503, "body": "Time to fire up your debugger."}, {"owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 0, "creation_date": 1536768436, "post_id": 52299253, "comment_id": 91546520, "body": "Also for binary data <code>node::encoding::UTF8</code> seems wrong. PNG files are not UTF-8 encoded. That could easily be the cause of your crash (but I&#39;m only guessing)."}, {"owner": {"reputation": 27488, "user_id": 1778465, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/NxIPr.jpg?s=128&g=1", "display_name": "Get Off My Lawn", "link": "https://stackoverflow.com/users/1778465/get-off-my-lawn"}, "edited": false, "score": 0, "creation_date": 1536768797, "post_id": 52299253, "comment_id": 91546721, "body": "I have also tried using <code>node::encoding::BINARY</code>, and <code>blob.length()</code> in place of the encoding, that also gives a segment fault..."}, {"owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 0, "creation_date": 1536770636, "post_id": 52299253, "comment_id": 91547577, "body": "@GetOffMyLawn According to <a href=\"https://github.com/nodejs/node/blob/master/src/node_buffer.h\" rel=\"nofollow noreferrer\">this</a> the third parameter to <code>node::Buffer::New</code> is a length not an encoding. You need to do better than guess at the API you are using."}, {"owner": {"reputation": 27488, "user_id": 1778465, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/NxIPr.jpg?s=128&g=1", "display_name": "Get Off My Lawn", "link": "https://stackoverflow.com/users/1778465/get-off-my-lawn"}, "edited": false, "score": 0, "creation_date": 1536770779, "post_id": 52299253, "comment_id": 91547649, "body": "To me, it shows both an encoding or a length... This is also my first c++ program, so I don&#39;t know the language super well yet."}], "answers": [{"comments": [{"owner": {"reputation": 27488, "user_id": 1778465, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/NxIPr.jpg?s=128&g=1", "display_name": "Get Off My Lawn", "link": "https://stackoverflow.com/users/1778465/get-off-my-lawn"}, "edited": false, "score": 0, "creation_date": 1536851383, "post_id": 52314231, "comment_id": 91580781, "body": "I tried using <code>blob.length()</code> which also gave the same issue. I am trying to use <code>copy</code> as you mentioned, and that so far has been working...."}], "tags": [], "owner": {"reputation": 20869, "user_id": 438117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dec2e8d45b1a0210065d1a4e3800f151?s=128&d=identicon&r=PG", "display_name": "emcconville", "link": "https://stackoverflow.com/users/438117/emcconville"}, "is_accepted": false, "score": 1, "last_activity_date": 1536853234, "last_edit_date": 1536853234, "creation_date": 1536843371, "answer_id": 52314231, "question_id": 52299253, "link": "https://stackoverflow.com/questions/52299253/save-an-imagemagick-blob-to-a-node-buffer/52314231#52314231", "title": "Save an imagemagick blob to a node buffer", "body": "<p>As pointed out in the comments, you need to tell Node's <code>Buffer</code> how large the blob size is.</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code> Blob blob;\n obj-&gt;image.write(&amp;blob)\n MaybeLocal&lt;Object&gt; buffer = node::Buffer::Copy(isolate,\n                                                (char *)blob.data(),\n                                                blob.length());\n</code></pre>\n\n<p>Looking at the <a href=\"https://github.com/nodejs/node/blob/master/src/node_buffer.h#L48\" rel=\"nofollow noreferrer\"><code>node_buffer.h</code></a> file, it may be more appropriate to use the <code>node::Buffer::Copy</code> constructor, or risk additional faults during deallocation.</p>\n"}], "owner": {"reputation": 27488, "user_id": 1778465, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/NxIPr.jpg?s=128&g=1", "display_name": "Get Off My Lawn", "link": "https://stackoverflow.com/users/1778465/get-off-my-lawn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 135, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1559936255, "creation_date": 1536767843, "last_edit_date": 1559936255, "question_id": 52299253, "link": "https://stackoverflow.com/questions/52299253/save-an-imagemagick-blob-to-a-node-buffer", "title": "Save an imagemagick blob to a node buffer", "body": "<p>I am writing an imagemagick extension for node, and when I try to save the blob to the buffer, I get <strong>Segmentation fault</strong>.</p>\n\n<pre><code>using Magick::Blob;\nusing v8::MaybeLocal;\nusing v8::Object;\n\nIsolate *isolate = args.GetIsolate();\nNodeMagick *obj = ObjectWrap::Unwrap&lt;NodeMagick&gt;(args.Holder());\n\nBlob blob;\nobj-&gt;image.write(&amp;blob);\nMaybeLocal&lt;Object&gt; buffer = node::Buffer::New(isolate, (char *)blob.data(), node::encoding::UTF8);\n</code></pre>\n\n<p>If I print out the Blob, I get some data back, not everything though...</p>\n\n<pre><code>printf((char*)blob.data());\n// Displays:\n// \u00ebPNG\n</code></pre>\n\n<p>I am not exactly sure why this is happening. Is my data not getting fully saved to the blob?</p>\n\n<p>If I change <code>obj-&gt;image.write(&amp;blob);</code> to <code>obj-&gt;image.write(\"out.png\");</code> and remove the <code>buffer = ...</code> the file gets created and is viewable, so what am I missing here with the Blob?</p>\n"}, {"tags": ["c++", "math", "matrix", "boost", "algebra"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user8705939"}, "edited": false, "score": 0, "creation_date": 1536769992, "post_id": 52299153, "comment_id": 91547255, "body": "Are you talking about the round-off error?"}, {"owner": {"reputation": 11458, "user_id": 3435400, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/61726fe80facc93d76754f0226b49eb9?s=128&d=identicon&r=PG&f=1", "display_name": "alain", "link": "https://stackoverflow.com/users/3435400/alain"}, "edited": false, "score": 1, "creation_date": 1536770191, "post_id": 52299153, "comment_id": 91547337, "body": "If the problem is that the (2,2) member is -2.22e-16 instead of 0.0, I&#39;d say it&#39;s not a problem. Take a look at <a href=\"https://stackoverflow.com/questions/588004/is-floating-point-math-broken\">this.</a>"}, {"owner": {"reputation": 17, "user_id": 9552734, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5abaf6e29d95d83d762db8986ff94c0?s=128&d=identicon&r=PG&f=1", "display_name": "Artur Bondar", "link": "https://stackoverflow.com/users/9552734/artur-bondar"}, "edited": false, "score": 0, "creation_date": 1536770374, "post_id": 52299153, "comment_id": 91547432, "body": "@OZ17, I can&#39;t classify that error. Just for clarify, I&#39;m talking about the bottom right member."}, {"owner": {"reputation": 17, "user_id": 9552734, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5abaf6e29d95d83d762db8986ff94c0?s=128&d=identicon&r=PG&f=1", "display_name": "Artur Bondar", "link": "https://stackoverflow.com/users/9552734/artur-bondar"}, "reply_to_user": {"reputation": 11458, "user_id": 3435400, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/61726fe80facc93d76754f0226b49eb9?s=128&d=identicon&r=PG&f=1", "display_name": "alain", "link": "https://stackoverflow.com/users/3435400/alain"}, "edited": false, "score": 0, "creation_date": 1536770657, "post_id": 52299153, "comment_id": 91547590, "body": "@alain, I have changed double to float and it&#39;s works now. So many text there, are you have an idea how to fix problem with double?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user8705939"}, "edited": false, "score": 0, "creation_date": 1536770814, "post_id": 52299153, "comment_id": 91547666, "body": "Ok, these round-off errors are normal due to finite precision. You usuallly can safely ignore them. If you still insist, you could round them by a tolerance of sqrt(precision)."}, {"owner": {"reputation": 11458, "user_id": 3435400, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/61726fe80facc93d76754f0226b49eb9?s=128&d=identicon&r=PG&f=1", "display_name": "alain", "link": "https://stackoverflow.com/users/3435400/alain"}, "edited": false, "score": 0, "creation_date": 1536771062, "post_id": 52299153, "comment_id": 91547781, "body": "I can&#39;t say more than OZ17 already did, these small errors are normal and you can ignore them."}, {"owner": {"reputation": 17, "user_id": 9552734, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5abaf6e29d95d83d762db8986ff94c0?s=128&d=identicon&r=PG&f=1", "display_name": "Artur Bondar", "link": "https://stackoverflow.com/users/9552734/artur-bondar"}, "reply_to_user": {"reputation": 11458, "user_id": 3435400, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/61726fe80facc93d76754f0226b49eb9?s=128&d=identicon&r=PG&f=1", "display_name": "alain", "link": "https://stackoverflow.com/users/3435400/alain"}, "edited": false, "score": 0, "creation_date": 1536828692, "post_id": 52299153, "comment_id": 91566994, "body": "@alain, big thanks"}], "owner": {"reputation": 17, "user_id": 9552734, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5abaf6e29d95d83d762db8986ff94c0?s=128&d=identicon&r=PG&f=1", "display_name": "Artur Bondar", "link": "https://stackoverflow.com/users/9552734/artur-bondar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 76, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1536767920, "creation_date": 1536767486, "last_edit_date": 1536767920, "question_id": 52299153, "link": "https://stackoverflow.com/questions/52299153/lu-factorize-damages-data-determinant", "title": "lu_factorize damages data (determinant)", "body": "<p>Folks. When I'm trying to calculate determinant, I got a trouble with my matrix <strong>sometimes</strong>. <a href=\"https://i.stack.imgur.com/VUEKV.png\" rel=\"nofollow noreferrer\">At this picture you can see the problem with the (2, 2) member.</a>\nThat is so rare case. <strong>My function:</strong> </p>\n\n<pre><code>    double_t Determinant(const ublas::matrix&lt;double_t&gt; &amp; matrix)\n    {\n        // boost::numeric::ublas\n        ublas::matrix&lt;double_t&gt; mLu(matrix);\n        ublas::permutation_matrix&lt;std::size_t&gt; pivots(matrix.size1());\n\n        std::cout &lt;&lt; \"BEFORE FACTORIZE\" &lt;&lt; std::endl;\n        PrintMatrix(mLu); // just printing the matrix\n\n        if (ublas::lu_factorize(mLu, pivots)) // there are some problems here\n        {\n            return 0.0;\n        }\n\n        std::cout &lt;&lt; std::endl &lt;&lt; \"AFTER FACTORIZE\" &lt;&lt; std::endl;\n        PrintMatrix(mLu); // just printing the matrix\n\n        double_t det = 1.0;\n        for (std::size_t i = 0; i &lt; pivots.size(); ++i)\n        {\n            det *= (pivots(i) != i ? -1. : 1.) * mLu(i, i);\n        }\n\n        return det;\n    }\n</code></pre>\n\n<p>How to fix that? Thanks. </p>\n"}, {"tags": ["c++", "macos", "qt", "qsettings"], "comments": [{"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1536769688, "post_id": 52299114, "comment_id": 91547125, "body": "It almost looks as if you were running multiple copies of your process... Could you write a short reproducer?"}, {"owner": {"reputation": 2166, "user_id": 3282410, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/b979985fbfcd3c12f6397bf5a6e480b4?s=128&d=identicon&r=PG", "display_name": "Mikey A. Leonetti", "link": "https://stackoverflow.com/users/3282410/mikey-a-leonetti"}, "reply_to_user": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1536770644, "post_id": 52299114, "comment_id": 91547582, "body": "@KubaOber added as requested."}], "answers": [{"comments": [{"owner": {"reputation": 2166, "user_id": 3282410, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/b979985fbfcd3c12f6397bf5a6e480b4?s=128&d=identicon&r=PG", "display_name": "Mikey A. Leonetti", "link": "https://stackoverflow.com/users/3282410/mikey-a-leonetti"}, "edited": false, "score": 0, "creation_date": 1536771754, "post_id": 52300125, "comment_id": 91548115, "body": "Okay! It now. Thank you. I can just use defaults then to do the same dern thing. Using &quot;defaults write [plist path] have Yes&quot; it works just fine. This more than solves the issue."}], "tags": [], "owner": {"reputation": 6715, "user_id": 2899280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4458bb90b869271c5787c7e600b4ed8e?s=128&d=identicon&r=PG&f=1", "display_name": "Brad Allred", "link": "https://stackoverflow.com/users/2899280/brad-allred"}, "is_accepted": true, "score": 2, "last_activity_date": 1536771816, "last_edit_date": 1536771816, "creation_date": 1536771269, "answer_id": 52300125, "question_id": 52299114, "link": "https://stackoverflow.com/questions/52299114/qsettings-weird-behaviour-on-macos/52300125#52300125", "title": "QSettings weird behaviour on MacOS", "body": "<p>I <em>think</em> this is due to <code>QSettings</code> being implemented on top of Apple's <code>CFPreferences</code> database. This is expected behavior and the \"fix\" is to call <a href=\"https://developer.apple.com/documentation/corefoundation/1515504-cfpreferencessynchronize?language=objc\" rel=\"nofollow noreferrer\">CFPreferencesSynchronize()</a></p>\n\n<p>Docs:</p>\n\n<blockquote>\n  <p>writes all pending changes to preference data to permanent storage,\n  and reads latest preference data from permanent storage</p>\n</blockquote>\n\n<p>Luckily it appears that QT wraps this in its <a href=\"https://github.com/radekp/qt/blob/master/src/corelib/io/qsettings_mac.cpp\" rel=\"nofollow noreferrer\">Mac implementation</a> for <code>QSettings</code> and you should be able to call <code>QSettings::sync()</code> to do this in a platform agnostic way.</p>\n\n<p>Basically you need to synchronize your settings before you will see any changes from external writes**. This is also why the file doesn't appear to always be rewritten (it should on application exit when things are automatically flushed).</p>\n\n<p>Note that you will also need synchronize your settings from the external application by calling <code>CFPreferencesSynchronize()</code> within that application in order to see changes made by your QT app.</p>\n\n<p>It also might be interesting to know that there is a command line utility available called <code>defaults</code> that you can use to perform syncronized writes from a shell script or terminal.</p>\n\n<p>** This occurs naturally at certain points automatically.</p>\n"}], "owner": {"reputation": 2166, "user_id": 3282410, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/b979985fbfcd3c12f6397bf5a6e480b4?s=128&d=identicon&r=PG", "display_name": "Mikey A. Leonetti", "link": "https://stackoverflow.com/users/3282410/mikey-a-leonetti"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 196, "favorite_count": 0, "accepted_answer_id": 52300125, "answer_count": 1, "score": 1, "last_activity_date": 1536771816, "creation_date": 1536767373, "last_edit_date": 1536770628, "question_id": 52299114, "link": "https://stackoverflow.com/questions/52299114/qsettings-weird-behaviour-on-macos", "title": "QSettings weird behaviour on MacOS", "body": "<p>Using Qt 5.11.1 via homebrew on MacOS 10.13.6, I'm using QSettings in my application. This is a working program that I'm porting from Linux and Windows now to MacOS.</p>\n\n<p>The issue I'm having on MacOS is that it'll save the file to <strong>/Users/michaelleonetti/Library/Preferences/com.sonarcloud.Sonarcloud Service.plist</strong>, which it's supposed to, on first program execution.</p>\n\n<p>If I delete the file <em>sometimes</em> it comes back. <em>Sometimes</em> it doesn't. If I edit the plist file with Xcode and save it, the values I write in \"have\" won't be there.</p>\n\n<p>I can't identify a rhyme or a reason to make it work.</p>\n\n<p>I've created a minimal example:</p>\n\n<pre><code>#include &lt;QSettings&gt;\n\n#include &lt;iostream&gt;\n\nint main( int argc, char *argv[] )\n{\n\n    { // Scope\n        QSettings settings( QSettings::NativeFormat, QSettings::UserScope, \"My Application Company\", \"My Application\" );\n        if( settings.contains( \"have\" ) )\n            std::cout &lt;&lt; \"We have: \" &lt;&lt; settings.value( \"have\" ).toString().toStdString() &lt;&lt; std::endl;\n        else\n            std::cout &lt;&lt; \"You do not have\" &lt;&lt; std::endl;\n\n        settings.setValue( \"version\", 10 );\n        std::cout &lt;&lt; \"Path is: \" &lt;&lt; settings.fileName().toStdString() &lt;&lt; std::endl;\n    }\n\n    return( EXIT_SUCCESS );\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>$ ./src/reproduce\nYou do not have\nPath is: /Users/michaelleonetti/Library/Preferences/com.my-application-company.My Application.plist\n</code></pre>\n\n<p>File check</p>\n\n<pre><code>$ cat \"/Users/michaelleonetti/Library/Preferences/com.my-application-company.My Application.plist\"\ncat: /Users/michaelleonetti/Library/Preferences/com.my-application-company.My Application.plist: No such file or directory\n</code></pre>\n\n<p>How can I get this issue solved?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 10, "creation_date": 1536767396, "post_id": 52299111, "comment_id": 91545911, "body": "The data type very firmly specifies the size of an object."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 3, "creation_date": 1536767474, "post_id": 52299111, "comment_id": 91545962, "body": "Could you supply a more comprehensive example? What you are currently presenting doesn&#39;t make too much sense in the context of a statically typed language such as C++. Are you thinking in terms of <code>std::variant</code>?"}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1536767592, "post_id": 52299111, "comment_id": 91546017, "body": "Why not use <code>std::uint16_t</code> for a 16 bits unsigned?"}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1536767772, "post_id": 52299111, "comment_id": 91546134, "body": "There&#39;s <code>auto i = 0x0147</code> which makes it <i>enough</i> bits. But it very much changes the data type. The problem with this question appears to be a rather fuzzy understanding of the type system. All chars have the same size, even if they hold different values."}, {"owner": {"reputation": 537, "user_id": 7869621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1bd1e52c50a93fb4403a9dd0d2192276?s=128&d=identicon&r=PG&f=1", "display_name": "Rob", "link": "https://stackoverflow.com/users/7869621/rob"}, "edited": false, "score": 2, "creation_date": 1536767886, "post_id": 52299111, "comment_id": 91546203, "body": "Not sure why this is getting downvoted and people are freaking out here lol don&#39;t overthink it Lightness&#39;s answer was perfectly acceptable."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 1, "creation_date": 1536768062, "post_id": 52299111, "comment_id": 91546299, "body": "@Rob: I agree, this is an intriguing question, and the current single answer ain&#39;t so bad either. Upped and voted to reopen."}], "answers": [{"comments": [{"owner": {"reputation": 537, "user_id": 7869621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1bd1e52c50a93fb4403a9dd0d2192276?s=128&d=identicon&r=PG&f=1", "display_name": "Rob", "link": "https://stackoverflow.com/users/7869621/rob"}, "edited": false, "score": 0, "creation_date": 1536768438, "post_id": 52299190, "comment_id": 91546524, "body": "So shift changes the data itself then? So I could alter 0x0147 to a different value with shift? You mentioned initializing a new int16_t from the char. Do you just mean int16_t newInt = static_cast&lt;char&gt;(0x0147) sort of thing?"}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "reply_to_user": {"reputation": 537, "user_id": 7869621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1bd1e52c50a93fb4403a9dd0d2192276?s=128&d=identicon&r=PG&f=1", "display_name": "Rob", "link": "https://stackoverflow.com/users/7869621/rob"}, "edited": false, "score": 2, "creation_date": 1536769742, "post_id": 52299190, "comment_id": 91547148, "body": "@Rob a shift is an <i>arithmetic</i> operation, very similar to a multiplication (or division) <code>0x0147 &lt;&lt; 4</code> is <code>0x1470</code>, which is the same as <code>0x0147 * 16</code> (2 to the 4th power)"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 537, "user_id": 7869621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1bd1e52c50a93fb4403a9dd0d2192276?s=128&d=identicon&r=PG&f=1", "display_name": "Rob", "link": "https://stackoverflow.com/users/7869621/rob"}, "edited": false, "score": 0, "creation_date": 1536770175, "post_id": 52299190, "comment_id": 91547331, "body": "@Rob Just <code>int16_t newInt = 0x0147;</code> will be fine mate .. your computer knows what to do"}], "tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": true, "score": 6, "last_activity_date": 1536767598, "creation_date": 1536767598, "answer_id": 52299190, "question_id": 52299111, "link": "https://stackoverflow.com/questions/52299111/appending-bits-to-increase-the-size-of-a-char/52299190#52299190", "title": "Appending bits to increase the size of a char", "body": "<p>No.</p>\n\n<p>The size of the object is not only related to its type; the size is <em>defined</em> by the type.</p>\n\n<p>You cannot change one and not the other.</p>\n\n<p>Just initialize a new <code>int16_t</code> from this <code>char</code> if that's what you want.</p>\n\n<p>Or, you could have a <code>vector&lt;char&gt;</code> and add new elements to this collection as needed.</p>\n\n<p>(Shifting has nothing to do with it; that's about transforming <em>data</em>.)</p>\n"}], "owner": {"reputation": 537, "user_id": 7869621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1bd1e52c50a93fb4403a9dd0d2192276?s=128&d=identicon&r=PG&f=1", "display_name": "Rob", "link": "https://stackoverflow.com/users/7869621/rob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "closed_date": 1536767639, "accepted_answer_id": 52299190, "answer_count": 1, "score": 0, "last_activity_date": 1536767993, "creation_date": 1536767366, "last_edit_date": 1536767993, "question_id": 52299111, "link": "https://stackoverflow.com/questions/52299111/appending-bits-to-increase-the-size-of-a-char", "closed_reason": "Needs details or clarity", "title": "Appending bits to increase the size of a char", "body": "<p>Is there any way I can append the size of a particular variable? For instance, if I have:</p>\n\n<pre><code>static_cast&lt;char&gt;(0x0147)\n</code></pre>\n\n<p>an 8 bit char and I want to increase it to say 16 bits without changing the data type, is that possible?</p>\n"}, {"tags": ["c++", "templates", "sfinae"], "comments": [{"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "reply_to_user": {"reputation": 1327, "user_id": 2990896, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/hSkaq.jpg?s=128&g=1", "display_name": "cplusplusrat", "link": "https://stackoverflow.com/users/2990896/cplusplusrat"}, "edited": false, "score": 0, "creation_date": 1536768427, "post_id": 52299062, "comment_id": 91546513, "body": "@cplusplusrat the point is that it&#39;s an unnamed parameter, needed only to test sunstitution (the S in SFINAE)."}, {"owner": {"reputation": 35, "user_id": 5677574, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-_JXQNAyIAw4/AAAAAAAAAAI/AAAAAAAAAIQ/3gDo6-XBW_Q/photo.jpg?sz=128", "display_name": "Abhishek Tripathi", "link": "https://stackoverflow.com/users/5677574/abhishek-tripathi"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1536768660, "post_id": 52299062, "comment_id": 91546647, "body": "@n.m. but how exactly does it test for substitution? Whatever i write after =  will be evaluated at compile time and will assign the default value to Typename. And so if i am not calling the second parameter in my driver code, then it will take the default value..so my question is can you give an example where the substitution fails at compile time"}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1536769423, "post_id": 52299062, "comment_id": 91547012, "body": "As written, this is really overly broad. Do you have a specific example in mind you want to ask about? Default arguments have lots of uses..."}], "answers": [{"comments": [{"owner": {"reputation": 35, "user_id": 5677574, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-_JXQNAyIAw4/AAAAAAAAAAI/AAAAAAAAAIQ/3gDo6-XBW_Q/photo.jpg?sz=128", "display_name": "Abhishek Tripathi", "link": "https://stackoverflow.com/users/5677574/abhishek-tripathi"}, "edited": false, "score": 0, "creation_date": 1536770852, "post_id": 52299629, "comment_id": 91547687, "body": "Makes sense. I got confused with nameless and default parameter..thanks"}, {"owner": {"reputation": 35, "user_id": 5677574, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-_JXQNAyIAw4/AAAAAAAAAAI/AAAAAAAAAIQ/3gDo6-XBW_Q/photo.jpg?sz=128", "display_name": "Abhishek Tripathi", "link": "https://stackoverflow.com/users/5677574/abhishek-tripathi"}, "edited": false, "score": 0, "creation_date": 1536771548, "post_id": 52299629, "comment_id": 91548007, "body": "But if i explicitly use an identifier instead of nameless parameter and i specify its value as well while using it outside, will the substitution for evaluating default value still be executed?"}, {"owner": {"reputation": 19779, "user_id": 878532, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/5fbebb625a289267abd098c0e676c760?s=128&d=identicon&r=PG", "display_name": "Klaus", "link": "https://stackoverflow.com/users/878532/klaus"}, "reply_to_user": {"reputation": 35, "user_id": 5677574, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-_JXQNAyIAw4/AAAAAAAAAAI/AAAAAAAAAIQ/3gDo6-XBW_Q/photo.jpg?sz=128", "display_name": "Abhishek Tripathi", "link": "https://stackoverflow.com/users/5677574/abhishek-tripathi"}, "edited": false, "score": 0, "creation_date": 1536772472, "post_id": 52299629, "comment_id": 91548476, "body": "@AbhishekTripathi: Done!"}, {"owner": {"reputation": 35, "user_id": 5677574, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-_JXQNAyIAw4/AAAAAAAAAAI/AAAAAAAAAIQ/3gDo6-XBW_Q/photo.jpg?sz=128", "display_name": "Abhishek Tripathi", "link": "https://stackoverflow.com/users/5677574/abhishek-tripathi"}, "edited": false, "score": 0, "creation_date": 1536788026, "post_id": 52299629, "comment_id": 91555186, "body": "What I meant to ask was if my template is like this   template&lt;typename  T, \ttypename = typename std::enable_if&lt;std::is_arithmetic&lt;T&gt;::value, T&gt;::type&gt; \tclass Fraction{ .....}  and I use it like   Fraction&lt;std::string, std::string&gt; frac();  where I explicitly specify the second argument as well, then in that case the default argument will not be evaluated and hence it is compiled successfully. It is only if we don&#39;t explicitly use the second parameter that the default argument is evaluated and the substitution fails for invalid types."}], "tags": [], "owner": {"reputation": 19779, "user_id": 878532, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/5fbebb625a289267abd098c0e676c760?s=128&d=identicon&r=PG", "display_name": "Klaus", "link": "https://stackoverflow.com/users/878532/klaus"}, "is_accepted": true, "score": 2, "last_activity_date": 1536772460, "last_edit_date": 1536772460, "creation_date": 1536769228, "answer_id": 52299629, "question_id": 52299062, "link": "https://stackoverflow.com/questions/52299062/template-specialization-for-sfinae/52299629#52299629", "title": "Template specialization for SFINAE", "body": "<p>That is simply how SFINAE works ;)</p>\n\n<p>As you know, you have to \"create a failure\" within the template declaration and not inside the template definition. As this:</p>\n\n<pre><code>template &lt; typename X, typename = ... here is the code which may generate an error     during instantiation &gt;\nvoid Bla() {}\n</code></pre>\n\n<p>The only chance to put some \"code\" in the declaration is to define something in the template parameter list or inside the template function declaration itself like:</p>\n\n<pre><code>template &lt; typename X&gt;\nvoid Bla( ... something which may generates an error ) {}\n</code></pre>\n\n<p>Example:</p>\n\n<pre><code>template &lt;typename T, typename = std::enable_if_t&lt; std::is_same_v&lt; int, T&gt;&gt;&gt;\nvoid Bla()\n{\n    std::cout &lt;&lt; \"with int\" &lt;&lt; std::endl;\n}\n\ntemplate &lt;typename T, typename = std::enable_if_t&lt; !std::is_same_v&lt; int, T&gt;&gt;&gt;\nvoid Bla(int=0)\n{\n    std::cout &lt;&lt; \"with something else\" &lt;&lt; std::endl;\n}\n\nint main()\n{\n    Bla&lt;int&gt;();\n    Bla&lt;std::string&gt;();\n}\n</code></pre>\n\n<p>But what is the background of \"creating an substitution failure\" here?</p>\n\n<p>The trick is somewhere behind <code>std::enable_if</code>. We can also use it without that:</p>\n\n<pre><code>template &lt;typename T, typename = char[ std::is_same_v&lt; int, T&gt;]&gt;\nvoid Bla()\n{   \n    std::cout &lt;&lt; \"with int\" &lt;&lt; std::endl;\n}   \n\ntemplate &lt;typename T, typename = char[ !std::is_same_v&lt; int, T&gt;]&gt;\nvoid Bla(int=0)\n{   \n    std::cout &lt;&lt; \"with something else\" &lt;&lt; std::endl;\n}   \n</code></pre>\n\n<p>Take a look on: <code>typename = char[ !std::is_same_v&lt; int, T&gt;]</code>\nHere <code>std::is_same_v</code> gives us a bool value back which is casted to 0 if not valid and to any postive number if valid. And creating a <code>char[0]</code> is simply an error in c++! So with the negation of our expression with <code>!</code> we got one for \"is int\" and one for \"is not int\". Once it tries to create an array of size 0, which is a failure and the template will not be instantiated and once it generates the type <code>char[!0]</code> which is a valid expression.</p>\n\n<p>And as the last step:</p>\n\n<pre><code>... typename = ...\n</code></pre>\n\n<p>is meant as: there will be defined a type, here without a template parameter name, as the parameter itself is not used later. You also can write:</p>\n\n<pre><code>... typename X = ... \n</code></pre>\n\n<p>but as X is not used, leave it!</p>\n\n<p>Summary: You have to provide some code, which generates an error or not, depending on the type or value of a given expression. The expression must be part of the function declaration or part of the template parameter list. It is <em>not</em> allowed to put an error inside the function/class definition, as this will not longer be \"not an error\" in the sense of SFINAE.</p>\n\n<p>Update: Can the results of SFINAE expressions be used for further expressions: Yes</p>\n\n<p>Example:</p>\n\n<pre><code>    template &lt; typename TYPE &gt;\nvoid CheckForType()\n{\n    std::cout &lt;&lt; __PRETTY_FUNCTION__ &lt;&lt; std::endl;\n}\n\n    template &lt;typename T, typename X = std::enable_if_t&lt; std::is_same_v&lt; int, T&gt;, float&gt;&gt;\nvoid Bla()\n{\n    std::cout &lt;&lt; \"with int\" &lt;&lt; std::endl;\n    CheckForType&lt;X&gt;();\n}\n\n    template &lt;typename T, typename X = std::enable_if_t&lt; !std::is_same_v&lt; int, T&gt;, double &gt;&gt;\nvoid Bla(int=0)\n{\n    std::cout &lt;&lt; \"with something else\" &lt;&lt; std::endl;\n    CheckForType&lt;X&gt;();\n}\n\nint main()\n{\n    Bla&lt;int&gt;();\n    Bla&lt;std::string&gt;();\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>with int\nvoid CheckForType() [with TYPE = float]\nwith something else\nvoid CheckForType() [with TYPE = double]\n</code></pre>\n\n<p>Explanation:\n<code>std::enable_if</code> has a second template parameter which is used as return type, if the first parameter of it will be <code>true</code>. As this, you can use that type here. As you can see, the function <code>CheckForType</code> is called with this defined type for <code>X</code> from the SFINAE expression.</p>\n"}, {"tags": [], "owner": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "is_accepted": false, "score": 1, "last_activity_date": 1536769251, "creation_date": 1536769251, "answer_id": 52299634, "question_id": 52299062, "link": "https://stackoverflow.com/questions/52299062/template-specialization-for-sfinae/52299634#52299634", "title": "Template specialization for SFINAE", "body": "<p>An example :</p>\n\n<pre><code>//for enum types.\ntemplate &lt;typename T, typename std::enable_if&lt;std::is_enum_v&lt;T&gt;, int&gt;::type = 0&gt;\nvoid Foo(T value)\n{\n  //stuff..\n}\n</code></pre>\n\n<p>I only want this <code>Foo</code> to be picked if <code>T</code> is an enum type. We can achieve this using the rule of Substitute Failure Is Not An Error (SFINAE).</p>\n\n<hr>\n\n<p>This rule states that if there's a failure during substitution this shouldn't be a compilation error. The compiler should only eliminate the function for this substitution.</p>\n\n<p>So then, how do we make sure <code>Foo</code> is only called with an enum type? Well that's easy, we find a way to trigger a substitution failure!</p>\n\n<p>If we check <a href=\"https://en.cppreference.com/w/cpp/types/enable_if\" rel=\"nofollow noreferrer\">cppreference for <code>std::enable_if</code></a> it says:</p>\n\n<pre><code>template&lt; bool B, class T = void &gt;\nstruct enable_if;\n</code></pre>\n\n<blockquote>\n  <p>If <code>B</code> is <code>true</code>, <code>std::enable_if</code> has a public member typedef <code>type</code>, equal\n  to <code>T</code>; otherwise, there is no member typedef.</p>\n</blockquote>\n\n<p>This means, if <code>std::is_enum&lt;T&gt;::value</code> is <code>true</code> (which is the case for enum types for <code>T</code>) then <code>B</code> will be <code>true</code> and thus <code>type</code> will be a valid type, an <code>int</code> as specified.</p>\n\n<p>If however <code>std::is_enum::value</code> is <code>false</code> then <code>B</code> will be <code>false</code> and thus <code>type</code> won't even exist. In this case the code is trying to use <code>::type</code> while it doesn't exist and thus that's a substitution error. So SFINAE kicks in and eliminates it from the candidate list.</p>\n\n<hr>\n\n<p>The reason we use <code>= 0</code> is to provide a default template parameter value since we're not actually interested in using this type or its value, we only use it to trigger SFINAE.</p>\n"}, {"comments": [{"owner": {"reputation": 35, "user_id": 5677574, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-_JXQNAyIAw4/AAAAAAAAAAI/AAAAAAAAAIQ/3gDo6-XBW_Q/photo.jpg?sz=128", "display_name": "Abhishek Tripathi", "link": "https://stackoverflow.com/users/5677574/abhishek-tripathi"}, "edited": false, "score": 0, "creation_date": 1536770681, "post_id": 52299724, "comment_id": 91547604, "body": "You raised a good point about omitting the identifier. Thats where I was struggling. So if i dont omit and use identifier as well with the default argument and in my driver code I call  X&lt;t1, t2&gt;, will there still be a substitution coz now i m providing the second argument as well so technically it shouldn&#39;t evaluate the defauly argument"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "reply_to_user": {"reputation": 35, "user_id": 5677574, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-_JXQNAyIAw4/AAAAAAAAAAI/AAAAAAAAAIQ/3gDo6-XBW_Q/photo.jpg?sz=128", "display_name": "Abhishek Tripathi", "link": "https://stackoverflow.com/users/5677574/abhishek-tripathi"}, "edited": false, "score": 0, "creation_date": 1536772997, "post_id": 52299724, "comment_id": 91548693, "body": "The identifier is not needed but you can still supply it if you want, it will affect nothing at all. But you should NOT provide the argument when you instantiate. In many cased you cannot do that because it only appears only in template specialisations, not in the main template. You only supply arguments for the main template."}], "tags": [], "owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "is_accepted": false, "score": 1, "last_activity_date": 1536770508, "last_edit_date": 1536770508, "creation_date": 1536769601, "answer_id": 52299724, "question_id": 52299062, "link": "https://stackoverflow.com/questions/52299062/template-specialization-for-sfinae/52299724#52299724", "title": "Template specialization for SFINAE", "body": "<p>This construct is a <em>nameless</em> template parameter supplied with a default argument. Normally a template parameter would look like</p>\n\n<pre><code>typename &lt;identifier&gt; [ = &lt;type&gt; ]\n</code></pre>\n\n<p>but the identifier may be omitted.</p>\n\n<p>You can see this construction often in SFINAE templates because it's a convenient way to enable a specialisation if and only if some condition holds, or if some piece of code is valid. Thus one can often see </p>\n\n<pre><code>template &lt;typename T, typename = std::enable_if&lt;(some-constexpr-involving-T)&gt;::type&gt; ...\n</code></pre>\n\n<p>If the expression happens to evaluate to true, all is well: <code>std::enable_if&lt;true&gt;::type</code> is just <code>void</code>, and we have a good working template specialisation.</p>\n\n<p>Now if the expression above happens to be false, <code>std::enable_if&lt;false&gt;</code> doesn't have a member named <code>type</code>, Substitution Failure (the SF in SFINAE) happens, and the template specialisation is not considered.</p>\n\n<p>And here the role of tge parameter ends. It is not used for anything in the template itself, so it doesn't need a name.</p>\n"}], "owner": {"reputation": 35, "user_id": 5677574, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-_JXQNAyIAw4/AAAAAAAAAAI/AAAAAAAAAIQ/3gDo6-XBW_Q/photo.jpg?sz=128", "display_name": "Abhishek Tripathi", "link": "https://stackoverflow.com/users/5677574/abhishek-tripathi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 606, "favorite_count": 1, "accepted_answer_id": 52299629, "answer_count": 3, "score": 0, "last_activity_date": 1536772460, "creation_date": 1536767215, "last_edit_date": 1536768041, "question_id": 52299062, "link": "https://stackoverflow.com/questions/52299062/template-specialization-for-sfinae", "title": "Template specialization for SFINAE", "body": "<p>I have been working with templates for quite some time now but recently I encountered a weird template programming for SFINAE. \nMy question is why do we write \n<code>typename = {something}</code> as a template parameter in C++?</p>\n"}, {"tags": ["c++", "c++11", "arguments", "language-lawyer", "list-initialization"], "comments": [{"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 0, "creation_date": 1536767094, "post_id": 52298990, "comment_id": 91545744, "body": "Do you want a theoretical answer or a practical one?"}, {"owner": {"reputation": 665, "user_id": 1332171, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2fb562d62f2c81a5ffba5e07338c6f5?s=128&d=identicon&r=PG&f=1", "display_name": "yggdrasil", "link": "https://stackoverflow.com/users/1332171/yggdrasil"}, "reply_to_user": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 0, "creation_date": 1536767150, "post_id": 52298990, "comment_id": 91545776, "body": "A theoretical one, if possible. I know that pratically it will always be elided by any proper compiler."}, {"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 1, "creation_date": 1536767181, "post_id": 52298990, "comment_id": 91545793, "body": "In this case, you should provide a complete example (no &quot;assuming X exists&quot;) and tag your question with language-lawyers."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1536767247, "post_id": 52298990, "comment_id": 91545833, "body": "@A.S. Certain elisions are required by the language. To ignore <i>all</i> elisions will not give you a meaningful answer. Though you could assume <i>optional</i> elisions do not occur."}, {"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 0, "creation_date": 1536767250, "post_id": 52298990, "comment_id": 91545836, "body": "And finally, bound your question to c++98, c++11, c++14, c++17 or c++2a."}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1536769170, "post_id": 52298990, "comment_id": 91546889, "body": "@Fran&#231;oisAndrieux: &quot;<i>Certain elisions are required by the language.</i>&quot; No, they&#39;re not. Elision of any form <i>by definition</i> is optional. Even C++17&#39;s &quot;guaranteed elision&quot; is a misnomer. It works by redefining the meaning of a prvalue so that temporary objects that might have been elided simply are not generated."}], "answers": [{"comments": [{"owner": {"reputation": 665, "user_id": 1332171, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2fb562d62f2c81a5ffba5e07338c6f5?s=128&d=identicon&r=PG&f=1", "display_name": "yggdrasil", "link": "https://stackoverflow.com/users/1332171/yggdrasil"}, "edited": false, "score": 0, "creation_date": 1536801049, "post_id": 52299499, "comment_id": 91558049, "body": "This is exactly the answer I was looking for (thanks to user2079303 too for the equally good answer). Together with the answer here <a href=\"https://stackoverflow.com/questions/38043319/how-does-guaranteed-copy-elision-work\" title=\"how does guaranteed copy elision work\">stackoverflow.com/questions/38043319/&hellip;</a> everything became clear :)"}], "tags": [], "owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "is_accepted": true, "score": 2, "last_activity_date": 1536768775, "creation_date": 1536768775, "answer_id": 52299499, "question_id": 52298990, "link": "https://stackoverflow.com/questions/52298990/brace-initializer-list-as-function-argument/52299499#52299499", "title": "brace initializer list as function argument", "body": "<p>When a braced-init-list is used to initialize an object, it is used to initialize the object. Period.</p>\n\n<p>Applying a braced-init-list to a function parameter means to initialize that parameter with the list of values, in accord with the rules of list initialization. When you return a braced-init-list, it is used to initialize the return value object with the list of values, in accord with the rules of list initialization.</p>\n\n<p>There is no temporary object theoretically being copied into the parameter/return value.</p>\n\n<p>Now (pre-C++17), if you had done <code>acceptsFoo(foo{1, 2, 3});</code> or <code>return foo{1, 2, 3}</code>, then that would provoke the creation of a temporary, which would then be used to initialize the parameter/return value.</p>\n"}, {"tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": false, "score": 1, "last_activity_date": 1536769156, "last_edit_date": 1592644375, "creation_date": 1536768914, "answer_id": 52299539, "question_id": 52298990, "link": "https://stackoverflow.com/questions/52298990/brace-initializer-list-as-function-argument/52299539#52299539", "title": "brace initializer list as function argument", "body": "<blockquote>\n<pre><code>void acceptsFoo(foo a);\n\nacceptsFoo({1, 2, 3});\n</code></pre>\n</blockquote>\n<p>No, there would not be a temporary in this case. The parameter is initialized directly from the argument expression.</p>\n<hr />\n<blockquote>\n<pre><code>//ignoring RVO optimization\nfoo returnsFoo()\n{\n   return {1, 2, 3};\n}\n</code></pre>\n</blockquote>\n<p>Just like in the case of the argument, the return value is initialized directly from the return-statement.</p>\n<p>However, the result of the function call expression would be a temporary object, yes. So, if you called the function like this: <code>foo f = returnsFoo();</code> There would be two instances created. First the return value is initialized from the brace-initializer, then the variable bound object is copy initialized from the temporary (by move, if <code>foo</code> is movable).</p>\n<p>That is from the perspective of the abstract machine; the copy/move could be elided in practice (this is what RVO does).</p>\n<hr />\n<p>However starting from C++17, in the statement <code>foo f = returnsFoo();</code>, there would be no temporary and no copy/move to elide. On the other hand, in the statement <code>returnsFoo();</code>, there would be a temporary created (which is destroyed immediately).</p>\n"}], "owner": {"reputation": 665, "user_id": 1332171, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2fb562d62f2c81a5ffba5e07338c6f5?s=128&d=identicon&r=PG&f=1", "display_name": "yggdrasil", "link": "https://stackoverflow.com/users/1332171/yggdrasil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 976, "favorite_count": 0, "accepted_answer_id": 52299499, "answer_count": 2, "score": 1, "last_activity_date": 1536769156, "creation_date": 1536766912, "last_edit_date": 1536767259, "question_id": 52298990, "link": "https://stackoverflow.com/questions/52298990/brace-initializer-list-as-function-argument", "title": "brace initializer list as function argument", "body": "<p>Ignoring the copy/move elision from the compiler, I would like to know if the following code (assuming foo has a constructor accepting three ints) \"syntactically\" creates a temporary object and then copy/move initializes the function argument, or directly calls the constructor:</p>\n\n<pre><code>void acceptsFoo(foo a);\n\nacceptsFoo({1, 2, 3});\n</code></pre>\n\n<p>And what about this case?</p>\n\n<pre><code>//ignoring RVO optimization\nfoo returnsFoo()\n{\n   return {1, 2, 3};\n}\n</code></pre>\n\n<p>I know that the code below, even without copy/move elision, is the same as calling the constructor so will not generate any temporary, but I couldn't find info about the code above.</p>\n\n<pre><code>foo = { 1, 2, 3 } //assuming the constructor is non-explicit\nfoo { 1, 2, 3 }\n</code></pre>\n"}, {"tags": ["c++", "multithreading", "c++11"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 3, "creation_date": 1536766586, "post_id": 52298859, "comment_id": 91545462, "body": "Have you tried a <code>std::shared_ptr&lt;Foo&gt;</code>?"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 2, "creation_date": 1536766593, "post_id": 52298859, "comment_id": 91545465, "body": "Just have <code>std::shared_ptr</code> in both threads"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 3, "creation_date": 1536766671, "post_id": 52298859, "comment_id": 91545514, "body": "Since it looks like you only use <code>foo</code> once, this might be a use case for the far simpler <code>std::promise</code>/<code>std::future</code>."}, {"owner": {"reputation": 446, "user_id": 10050942, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/896d0e87b08f04037bec7a1b3818b932?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Stephens", "link": "https://stackoverflow.com/users/10050942/daniel-stephens"}, "edited": false, "score": 1, "creation_date": 1536766696, "post_id": 52298859, "comment_id": 91545528, "body": "Because of the existing code I am working on I can&#39;t use std::shared_ptr at the moment"}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 0, "creation_date": 1536767079, "post_id": 52298859, "comment_id": 91545739, "body": "Then, how about using some other implementation of shared pointer?"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 2, "creation_date": 1536767167, "post_id": 52298859, "comment_id": 91545787, "body": "@DanielStephens Then it sounds like maybe Thread1 should be responsible for <code>foo</code> and not Thread2."}, {"owner": {"reputation": 5319, "user_id": 2754173, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24b0a0fd9004b29fa441e5bbf6904e69?s=128&d=identicon&r=PG&f=1", "display_name": "Geezer", "link": "https://stackoverflow.com/users/2754173/geezer"}, "edited": false, "score": 2, "creation_date": 1536768621, "post_id": 52298859, "comment_id": 91546622, "body": "@DanielStephens How come you can use <a href=\"https://en.cppreference.com/w/cpp/thread/condition_variable\" rel=\"nofollow noreferrer\"><code>std::condition_variable</code></a> but not <a href=\"https://en.cppreference.com/w/cpp/memory/shared_ptr\" rel=\"nofollow noreferrer\"><code>std::shared_ptr</code></a>? They were introduced together at C++11..."}, {"owner": {"reputation": 446, "user_id": 10050942, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/896d0e87b08f04037bec7a1b3818b932?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Stephens", "link": "https://stackoverflow.com/users/10050942/daniel-stephens"}, "reply_to_user": {"reputation": 5319, "user_id": 2754173, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24b0a0fd9004b29fa441e5bbf6904e69?s=128&d=identicon&r=PG&f=1", "display_name": "Geezer", "link": "https://stackoverflow.com/users/2754173/geezer"}, "edited": false, "score": 0, "creation_date": 1536770432, "post_id": 52298859, "comment_id": 91547468, "body": "@SkepticalEmpiricist I am just fixing a bug and can&#39;t change more than necessary.. historically grown code :-)"}, {"owner": {"reputation": 6715, "user_id": 2899280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4458bb90b869271c5787c7e600b4ed8e?s=128&d=identicon&r=PG&f=1", "display_name": "Brad Allred", "link": "https://stackoverflow.com/users/2899280/brad-allred"}, "edited": false, "score": 1, "creation_date": 1536772688, "post_id": 52298859, "comment_id": 91548566, "body": "@DanielStephens if you truly want a real fix free of race conditions you need to change the design. at the very least each thread needs a <code>shared_ptr</code> to <code>foo</code>"}, {"owner": {"reputation": 283, "user_id": 10291999, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5dec25f1d614fd4d883d7c6f386f925?s=128&d=identicon&r=PG&f=1", "display_name": "besmirched", "link": "https://stackoverflow.com/users/10291999/besmirched"}, "edited": false, "score": 2, "creation_date": 1536779071, "post_id": 52298859, "comment_id": 91551558, "body": "If you have to ask, &quot;will this funny-looking trick work?,&quot; then you potentially are forcing anybody else who reads your code to ask the same question. If you use too many tricky tricks in your code, you may find that other developers don&#39;t like to collaborate with you."}], "answers": [{"tags": [], "owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "is_accepted": false, "score": 1, "last_activity_date": 1536776639, "creation_date": 1536776639, "answer_id": 52301343, "question_id": 52298859, "link": "https://stackoverflow.com/questions/52298859/destroying-condition-variable-while-waiting/52301343#52301343", "title": "Destroying condition_variable while waiting", "body": "<p>One easy fix: move <code>delete foo</code> into thread 1 after <code>foo-&gt;cv.wait(...);</code>.</p>\n\n<p>A better fix would be to change the design to work with <code>std::shared_ptr</code>, no manual <code>delete</code> invocations.</p>\n"}, {"comments": [{"owner": {"reputation": 6746, "user_id": 1143634, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/e7lca.png?s=128&g=1", "display_name": "StaceyGirl", "link": "https://stackoverflow.com/users/1143634/staceygirl"}, "edited": false, "score": 0, "creation_date": 1536777707, "post_id": 52301535, "comment_id": 91550881, "body": "There was a request to clarify this behavior for <code>pthread_cond_t</code> and it was confirmed to be the same. I cannot find the link at the moment. But C++ primities should have similar guarantees as POSIX primitives when it comes to destruction."}, {"owner": {"reputation": 6715, "user_id": 2899280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4458bb90b869271c5787c7e600b4ed8e?s=128&d=identicon&r=PG&f=1", "display_name": "Brad Allred", "link": "https://stackoverflow.com/users/2899280/brad-allred"}, "edited": false, "score": 0, "creation_date": 1536777765, "post_id": 52301535, "comment_id": 91550908, "body": "i did not realize this. +1, but please provide a link too."}, {"owner": {"reputation": 6746, "user_id": 1143634, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/e7lca.png?s=128&g=1", "display_name": "StaceyGirl", "link": "https://stackoverflow.com/users/1143634/staceygirl"}, "reply_to_user": {"reputation": 6715, "user_id": 2899280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4458bb90b869271c5787c7e600b4ed8e?s=128&d=identicon&r=PG&f=1", "display_name": "Brad Allred", "link": "https://stackoverflow.com/users/2899280/brad-allred"}, "edited": false, "score": 0, "creation_date": 1536778027, "post_id": 52301535, "comment_id": 91551018, "body": "@BradAllred <a href=\"http://austingroupbugs.net/view.php?id=609\" rel=\"nofollow noreferrer\">Here</a>. I will add this to the answer soon. Also <a href=\"https://sourceware.org/bugzilla/show_bug.cgi?id=13165\" rel=\"nofollow noreferrer\">this</a> bug in glibc."}, {"owner": {"reputation": 6746, "user_id": 1143634, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/e7lca.png?s=128&g=1", "display_name": "StaceyGirl", "link": "https://stackoverflow.com/users/1143634/staceygirl"}, "reply_to_user": {"reputation": 6715, "user_id": 2899280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4458bb90b869271c5787c7e600b4ed8e?s=128&d=identicon&r=PG&f=1", "display_name": "Brad Allred", "link": "https://stackoverflow.com/users/2899280/brad-allred"}, "edited": false, "score": 0, "creation_date": 1536778319, "post_id": 52301535, "comment_id": 91551168, "body": "And the original clatification that was added to C++ is <a href=\"http://cplusplus.github.io/LWG/lwg-defects.html#2190\" rel=\"nofollow noreferrer\">here</a>"}], "tags": [], "owner": {"reputation": 6746, "user_id": 1143634, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/e7lca.png?s=128&g=1", "display_name": "StaceyGirl", "link": "https://stackoverflow.com/users/1143634/staceygirl"}, "is_accepted": true, "score": 9, "last_activity_date": 1549733318, "last_edit_date": 1549733318, "creation_date": 1536777625, "answer_id": 52301535, "question_id": 52298859, "link": "https://stackoverflow.com/questions/52298859/destroying-condition-variable-while-waiting/52301535#52301535", "title": "Destroying condition_variable while waiting", "body": "<p>You can delete it right away.</p>\n\n<p>Quote from C++ standard:</p>\n\n<blockquote>\n  <p><code>~ condition_variable();</code></p>\n  \n  <p><em>Requires</em>: There shall be no thread blocked on <code>*this</code>. [Note: That is,\n  all threads shall have been notified; they may subsequently block on\n  the lock specified in the <code>wait</code>. This relaxes the usual rules, which\n  would have required all <code>wait</code> calls to happen before destruction. <strong>Only\n  the notification to unblock the <code>wait</code> must happen before destruction.</strong></p>\n</blockquote>\n\n<p>Basically <code>wait</code> functions are required to perform locking and waiting atomically:</p>\n\n<blockquote>\n  <p>The execution of <code>notify_one</code> and <code>notify_all</code> shall be atomic. The execution \n  of <code>wait</code>, <code>wait_for</code>, and <code>wait_until</code> shall be performed in three atomic parts:</p>\n  \n  <ol>\n  <li>the release of the mutex and entry into the waiting state;</li>\n  <li>the unblocking of the <code>wait</code>; and</li>\n  <li>the reacquisition of the lock.</li>\n  </ol>\n</blockquote>\n\n<p>Once <code>notify</code> wakes a thread, it should be considered \"unblocked\" and should contest the mutex.</p>\n\n<hr>\n\n<p>There are similar guarantees about <code>std::mutex</code>: threads are not required to leave <code>unlock</code> before mutex is destroyed.</p>\n\n<p>Quote from C++ standard:</p>\n\n<blockquote>\n  <p>The implementation shall provide <code>lock</code> and <code>unlock</code> operations, as\n  described below. For purposes of determining the existence of a data\n  race, these behave as atomic operations. The <code>lock</code> and <code>unlock</code>\n  operations on a single mutex shall appear to occur in a single total\n  order.</p>\n</blockquote>\n\n<p>Later:</p>\n\n<blockquote>\n  <p>Note: After a thread A has called <code>unlock()</code>, releasing a mutex, it is\n  possible for another thread B to lock the same mutex, observe that it\n  is no longer in use, unlock it, and <strong>destroy it, before thread A\n  appears to have returned from its <code>unlock</code> call</strong>.</p>\n</blockquote>\n\n<p>Such guarantees are required to avoid issues like <a href=\"https://lwn.net/Articles/575460/\" rel=\"nofollow noreferrer\">this</a>, when mutex inside an object is used to protect object reference counter.</p>\n\n<hr>\n\n<p>Note that this does not guarantee that your implementation has no bugs in this regard. In the past glibc had multiple bugs related to the destruction of synchronization objects, in particular <code>pthread_mutex_unlock</code> was <a href=\"https://sourceware.org/bugzilla/show_bug.cgi?id=13690\" rel=\"nofollow noreferrer\">accessing mutex before returning</a>.</p>\n"}], "owner": {"reputation": 446, "user_id": 10050942, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/896d0e87b08f04037bec7a1b3818b932?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Stephens", "link": "https://stackoverflow.com/users/10050942/daniel-stephens"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 685, "favorite_count": 0, "accepted_answer_id": 52301535, "answer_count": 2, "score": 5, "last_activity_date": 1549733318, "creation_date": 1536766475, "last_edit_date": 1536777066, "question_id": 52298859, "link": "https://stackoverflow.com/questions/52298859/destroying-condition-variable-while-waiting", "title": "Destroying condition_variable while waiting", "body": "<p>First my code to make my explanation more clear:</p>\n\n<pre><code>struct Foo {\n    std::condition_variable cv;\n};\nstatic Foo* foo; // dynamically created object\n\n// Thread1\nfoo-&gt;cv.wait(...);\n\n\n// Thread2\nfoo-&gt;cv.notify();\ndelete foo; // thread1 might have not left the wait function yet\n</code></pre>\n\n<p>I am trying to delete a <code>std::condition_variable</code> while it is in <code>wait</code>. So from my understanding, I have to notify it first to make it leave it's waiting for routine, and then I can delete it. But after calling <code>notify*</code> I can't delete it right away, because it might still be in wait because it needs a few cycles. What is a common way to achieve this?</p>\n"}, {"tags": ["c++", "linux", "gcc"], "comments": [{"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 1, "creation_date": 1536767943, "post_id": 52298842, "comment_id": 91546229, "body": "Have you tried <code>yum reinstall gcc</code> ?"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 2, "creation_date": 1536768909, "post_id": 52298842, "comment_id": 91546776, "body": "In the future; when you want a newer compiler than the system one on a RedHat/CentOS system, consider using the &quot;devtoolset&quot; packages. See fx <a href=\"https://access.redhat.com/documentation/en-us/red_hat_developer_toolset/7/\" rel=\"nofollow noreferrer\">Product Documentation for Red Hat Developer Toolset 7</a>. Devtoolset nicely solves the problem of preserving the system compiler while also giving you access to newer tools that are compatible with everything built with the system compiler and fully supported by RedHat."}], "answers": [{"comments": [{"owner": {"reputation": 1064, "user_id": 2856552, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/1a9a2cb2960580df2a7e0724a306c2d8?s=128&d=identicon&r=PG&f=1", "display_name": "Zilore Mumba", "link": "https://stackoverflow.com/users/2856552/zilore-mumba"}, "edited": false, "score": 0, "creation_date": 1536774896, "post_id": 52298991, "comment_id": 91549577, "body": "Thank you @Basile for the very useful hints. My problem is that sudo yum install gcc gcc-c++ says gcc is already installed, and sudo yum install gcc-4.4 says gcc-4.4 does not exist"}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "reply_to_user": {"reputation": 1064, "user_id": 2856552, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/1a9a2cb2960580df2a7e0724a306c2d8?s=128&d=identicon&r=PG&f=1", "display_name": "Zilore Mumba", "link": "https://stackoverflow.com/users/2856552/zilore-mumba"}, "edited": false, "score": 0, "creation_date": 1536777407, "post_id": 52298991, "comment_id": 91550777, "body": "Yes, you need to forcibly <i>reinstall</i> <code>gcc</code>. I am not familiar enough with <code>yum</code> to help. But how to do that should be asked on <a href=\"https://unix.stackexchange.com/\">unix.stackexchange.com</a> ; if you don&#39;t know how to <i>reinstall</i> <code>gcc</code> you could consider reinstalling your entire system. In other words, you have messed your system quite badly"}, {"owner": {"reputation": 1064, "user_id": 2856552, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/1a9a2cb2960580df2a7e0724a306c2d8?s=128&d=identicon&r=PG&f=1", "display_name": "Zilore Mumba", "link": "https://stackoverflow.com/users/2856552/zilore-mumba"}, "edited": false, "score": 0, "creation_date": 1537347394, "post_id": 52298991, "comment_id": 91747677, "body": "Problem has been solved, see edit at the end of the original post."}], "tags": [], "owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "is_accepted": false, "score": 3, "last_activity_date": 1536777702, "last_edit_date": 1536777702, "creation_date": 1536766916, "answer_id": 52298991, "question_id": 52298842, "link": "https://stackoverflow.com/questions/52298842/how-to-recover-system-gcc-compiler-on-centos-6/52298991#52298991", "title": "How to recover system gcc compiler on centos 6", "body": "<p>This is more a sysadmin question than a programming one.</p>\n\n<p>My recommendations:</p>\n\n<ul>\n<li><p>don't mess your <code>/usr/bin/</code>. Leave your package manager <code>yum</code> to fill it -and never add anything inside it without <code>yum</code> ; so remove manually any symlinks you made there (by mistake)</p></li>\n<li><p>reinstall the old system <code>gcc</code> 4.4 and <code>g++</code> 4.4 (using <code>yum</code>)</p></li>\n<li><p>rebuild your GCC 8 from scratch from its source code. Configure it with <code>--program-suffix=-8</code> (but no <code>--prefix</code>, or a <code>--prefix=$HOME/soft/</code> if you don't have root access). So it will install <code>/usr/local/bin/gcc-8</code> and <code>/usr/local/bin/g++-8</code>  etc... (or, if you have given <code>--prefix=$HOME/soft/</code> , a <code>$HOME/soft/bin/gcc-8</code> etc...)</p></li>\n<li><p>create a <code>$HOME/bin/</code> if you don't have already one</p></li>\n<li><p>be sure to have <code>$HOME/bin/</code> <em>early</em> in your <a href=\"https://en.wikipedia.org/wiki/PATH_(variable)\" rel=\"nofollow noreferrer\"><code>$PATH</code></a> (before <code>/usr/bin/</code>)</p></li>\n<li><p>add a symlink <code>ln -sv /usr/local/bin/gcc-8 $HOME/bin/gcc</code> and likewise for <code>g++</code> etc..</p></li>\n</ul>\n\n<p>Then, when you type <code>gcc</code> you are getting that symlink to <code>/usr/local/bin/gcc-8</code> etc.</p>\n\n<p>If you cannot write to <code>/usr/local/</code> (e.g. because you don't have root permission...) you could pass <code>--prefix=$HOME/soft/</code> to GCC 8 <code>.../configure</code> then replace <code>/usr/local/</code> above with <code>$HOME/soft/</code></p>\n\n<p>If you are the sysadmin and can write to <code>/usr/local/</code> and have to set up things for many users: add a symlink <code>ln -s /usr/local/bin/gcc-8 /usr/local/bin/gcc</code> etc and ask your users to put <code>/usr/local/bin/</code> in <em>their</em> <code>$PATH</code>  before <code>/usr/bin/</code></p>\n\n<p>BTW, notice that it is <em>explicitly</em> documented that GCC 8 (or others) need to be built <em>outside</em> of its source tree: in <a href=\"https://gcc.gnu.org/install/configure.html\" rel=\"nofollow noreferrer\">Installing GCC</a> you can read:</p>\n\n<blockquote>\n  <p>First, we <strong>highly recommend</strong> that GCC be built into a separate directory from the sources which does not reside within the source tree.</p>\n</blockquote>\n\n<p>(the \"highly recommend\" should be considered as a polite way to say \"you absolutely should\")</p>\n\n<p>So your <code>./configure</code> was another mistake.</p>\n\n<p>It could happen that <strong>you messed up your system</strong> more seriously than you thought (and perhaps you need to reinstall, or to call Redhat support).</p>\n\n<p>PS. I don't know Redhat (used it only in the previous century). My favorite distro is Debian/testing or Debian/unstable (and my computers are desktops, not clusters).</p>\n"}, {"comments": [{"owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "edited": false, "score": 0, "creation_date": 1537432933, "post_id": 52419560, "comment_id": 91785003, "body": "This is not a good solution. You could have removed the silly symlink you created and then done <code>yum reinstall gcc gcc-c++</code> instead, to restore the original system compiler. Don&#39;t replace the system compiler, see Basile&#39;s answer."}, {"owner": {"reputation": 1064, "user_id": 2856552, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/1a9a2cb2960580df2a7e0724a306c2d8?s=128&d=identicon&r=PG&f=1", "display_name": "Zilore Mumba", "link": "https://stackoverflow.com/users/2856552/zilore-mumba"}, "reply_to_user": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "edited": false, "score": 0, "creation_date": 1537471124, "post_id": 52419560, "comment_id": 91807349, "body": "Your clever answer does not work, my silly solution works! There is no silly link. The other one was saying my system is messed up, what messed up? i can have as many compiler versions as I want. this forum is for sharing information , not identifying who is more silly, that can go to another forum."}], "tags": [], "owner": {"reputation": 1064, "user_id": 2856552, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/1a9a2cb2960580df2a7e0724a306c2d8?s=128&d=identicon&r=PG&f=1", "display_name": "Zilore Mumba", "link": "https://stackoverflow.com/users/2856552/zilore-mumba"}, "is_accepted": false, "score": 0, "last_activity_date": 1537427602, "creation_date": 1537427602, "answer_id": 52419560, "question_id": 52298842, "link": "https://stackoverflow.com/questions/52298842/how-to-recover-system-gcc-compiler-on-centos-6/52419560#52419560", "title": "How to recover system gcc compiler on centos 6", "body": "<p>This problem was solved by the following commands</p>\n\n<pre><code>sudo yum install compat-gcc-34-c++\nsudo yum install compat-gcc-34-g77\n</code></pre>\n\n<p>Once this older version of gcc is installed, the latest version, gcc-8.2 was built and the system is no longer messed terribly. It is very healthy and fit.</p>\n"}], "owner": {"reputation": 1064, "user_id": 2856552, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/1a9a2cb2960580df2a7e0724a306c2d8?s=128&d=identicon&r=PG&f=1", "display_name": "Zilore Mumba", "link": "https://stackoverflow.com/users/2856552/zilore-mumba"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 626, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1537427602, "creation_date": 1536766423, "last_edit_date": 1537278984, "question_id": 52298842, "link": "https://stackoverflow.com/questions/52298842/how-to-recover-system-gcc-compiler-on-centos-6", "title": "How to recover system gcc compiler on centos 6", "body": "<p>I am running centos 6 on a cluster. I installed the latest gcc-8.2.0.  and made a link \"ln -sf /usr/bin/gcc-8.2 gcc\".\nI did the same for g++ and gfortran.\nI wanted to reinstall gcc-8.2.0 and went ahead to</p>\n\n<pre><code>make clean\n</code></pre>\n\n<p>in the gcc-8.2 directory.\nWhen I try</p>\n\n<pre><code>./configure\n</code></pre>\n\n<p>I get that C compiler cannot create executables\nThe links I made are broken.\nThe system gcc-4.4.7 cannot be found</p>\n\n<pre><code>which gcc\n</code></pre>\n\n<p>gives no gcc</p>\n\n<pre><code>sudo yum install gcc gcc-c++\n</code></pre>\n\n<p>gives gcc is already installed.\nI tried to install an rpm, which fails because of dependencies.\nI have pg compilers installed in /opt/pgi\nWhen I configure with</p>\n\n<pre><code>CC=/path to/pgi/bin/pgcc FC=/path to/pgi/bin/pgfortran ./configure\n</code></pre>\n\n<p>I still get C compiler cannot create executables\nI tried the following c++ programm</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\nint main() {\ncout &lt;&lt; \"Hello world!\" &lt;&lt; endl;\nreturn 0;\n}\n</code></pre>\n\n<p>With the command</p>\n\n<pre><code>/opt/pgi/linux_86_64/12.08/bin/pgcpp hello.cpp -o hello\n</code></pre>\n\n<p>It gives compilation error that float.h not found. On another linux PC with working gcc, the program works with the command</p>\n\n<pre><code>g++ hello.cpp -o hello\n</code></pre>\n\n<p>I will appreciate any assistance to either find the systemgcc or use pg compilers to compile gcc if possible</p>\n\n<p>I admit it is a big mess which will require OS reinstallation and reconfiguration. But then I did</p>\n\n<pre><code>sudo yum install compat-gcc-34\n</code></pre>\n\n<p>Now I have gcc34 and configure of gcc-8.2 goes through without \"c compiler cannot create executables\". (Note that the ./configure referred to in earlier post was actually</p>\n\n<pre><code>../gcc_8_2_release/configure\n</code></pre>\n\n<p>inside \"gcc_8_2_release_build, so gcc was not being built in its source directory.\nThe problem I have now is with make, which needs g++, giving error</p>\n\n<pre><code>uint_t(64) or int_t(64) not found.\n</code></pre>\n\n<p>Thanks all who have gone through this post, for your patience.\nAny assistance will be appreciated.</p>\n\n<p>Here is how I got out of this mess.\nWith the following two commands</p>\n\n<pre><code>sudo yum install compat-gcc-34-c++\nsudo yum install compat-gcc-34-g77\n</code></pre>\n\n<p>I was able to install the older version of gcc, c++ and g77. Then I was able to build gcc-8.2.\nNow I have a functional system with the latest gcc, yes it may need re-installation/re-configuring but it is fully functional.\nI have learnt a lot and very much appreciate the comments and guidelines of @Basile. However, at one point he was rather negative and discouraging.\nBut thanks to my belief and perseverance, and more importantly browsing the knowledge shared by others, I have been able to recover what I was beginning  to be convinced was a lost cause.\nThanks all.</p>\n"}, {"tags": ["c++", "grpc"], "answers": [{"comments": [{"owner": {"reputation": 3204, "user_id": 2228338, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-b3jn9hCpWYU/AAAAAAAAAAI/AAAAAAAAAAs/-1U-aoxnBOc/photo.jpg?sz=128", "display_name": "Yuki", "link": "https://stackoverflow.com/users/2228338/yuki"}, "edited": false, "score": 0, "creation_date": 1537451624, "post_id": 52301414, "comment_id": 91796745, "body": "I have checked <code>ResourceQuota</code>, I think it is only memory configuration? The only thing I found is<code>GRPC_ARG_MAX_CONCURRENT_STREAMS</code> that limits HTTP2 stream number."}, {"owner": {"reputation": 121, "user_id": 5523159, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d3945af9c4cc435e5be4eaf548a55cf?s=128&d=identicon&r=PG&f=1", "display_name": "Yang", "link": "https://stackoverflow.com/users/5523159/yang"}, "reply_to_user": {"reputation": 3204, "user_id": 2228338, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-b3jn9hCpWYU/AAAAAAAAAAI/AAAAAAAAAAs/-1U-aoxnBOc/photo.jpg?sz=128", "display_name": "Yuki", "link": "https://stackoverflow.com/users/2228338/yuki"}, "edited": false, "score": 0, "creation_date": 1537545682, "post_id": 52301414, "comment_id": 91837600, "body": "It is a recent change I believe. See <code>ResourceQuota::SetMaxThreads</code>"}], "tags": [], "owner": {"reputation": 121, "user_id": 5523159, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d3945af9c4cc435e5be4eaf548a55cf?s=128&d=identicon&r=PG&f=1", "display_name": "Yang", "link": "https://stackoverflow.com/users/5523159/yang"}, "is_accepted": false, "score": 4, "last_activity_date": 1536776990, "creation_date": 1536776990, "answer_id": 52301414, "question_id": 52298811, "link": "https://stackoverflow.com/questions/52298811/c-grpc-thread-number-configuration/52301414#52301414", "title": "C++ gRPC thread number configuration", "body": "<p>It depends whether you are using sync or async API.\nFor a sync client, your RPC calls blocks the calling thread, so it is not really relevant. For a sync server, there is an internal threadpool handling all the incoming requests, you can use a <code>grpc::ResourceQuota</code> on a <code>ServerBuilder</code> to limit the max number of threads used by the threadpool.</p>\n\n<p>For async client and server, gRPC uses <code>CompletionQueue</code> as a way for users to define their own threading model. A common way of building clients and servers is to use a user-provided threadpool to run <code>CompletionQueue::Next</code> in each thread. Then once it gets some tag from the <code>Next</code> call, you can cast it to a user-defined type and run some methods to proceed the state. In this case, the user has full control of threads being used.</p>\n\n<p>Note gRPC does create some internal threads, but they should not be used for the majority of the rpc work.</p>\n"}], "owner": {"reputation": 3204, "user_id": 2228338, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-b3jn9hCpWYU/AAAAAAAAAAI/AAAAAAAAAAs/-1U-aoxnBOc/photo.jpg?sz=128", "display_name": "Yuki", "link": "https://stackoverflow.com/users/2228338/yuki"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5488, "favorite_count": 2, "answer_count": 1, "score": 6, "last_activity_date": 1536776990, "creation_date": 1536766288, "question_id": 52298811, "link": "https://stackoverflow.com/questions/52298811/c-grpc-thread-number-configuration", "title": "C++ gRPC thread number configuration", "body": "<p>Does gRPC server/client have any concept of thread pool for connections? That it is possible to reuse threads, pre-allocate threads, queue request on thread limit reached, etc.</p>\n\n<p>If no, how does it work, is it just allocating/destroying a thread when it need, without any limitation and/or reuse? If yes, is it possible to configure it?</p>\n"}, {"tags": ["c++", "node.js", "node-gyp", "node.js-addon"], "owner": {"reputation": 1566, "user_id": 2313464, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/733F6.jpg?s=128&g=1", "display_name": "Dennington-bear", "link": "https://stackoverflow.com/users/2313464/dennington-bear"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 275, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1536766137, "creation_date": 1536766137, "question_id": 52298771, "link": "https://stackoverflow.com/questions/52298771/adding-opencv-library-onto-node-gyp-bindings-gyp", "title": "adding opencv library onto node-gyp bindings.gyp", "body": "<p>Im trying to connect the opencv library to my node C++ addon. Im using windows and I have downloaded opencv and extracted it. I added it to my project directory like below:</p>\n\n<pre><code>|   app.js\n|   binding.gyp\n|\n+---.vscode\n|       c_cpp_properties.json\n|\n+---build\n|       config.gypi\n|\n+---c\n|       test.cc\n|       opencv.cc\n|\n\\---libs\n    \\---opencv\n         \\---more files\n</code></pre>\n\n<p>I want to use the opencv library in my opencv.cc file but I cant find a way to include it as anyway I've tried has produced errors.</p>\n\n<p>Ive looked into adding the lib file but I got errors when gyp tried to read the file and gave out about unknown symbols.</p>\n\n<p>When trying to add a header file that includes other header files i then run into a relative pathing issue as the headers seem to use relative but from what it looks like the compilation of gyp seems to use an absoloute path.\nMy binding.gyp is where the issue is but I cant figure it out.Any help would be appreciated!\nThe binding.gyp file itself</p>\n\n<pre><code>{\n    \"targets\" : [\n        {\n            \"target_name\" : \"opencvTest\",\n            \"sources\" : [\"./c/opencv.cc\"],\n            \"include_dirs\": [ \"C:/Users/test/Desktop/nodeCExample/libs/opencv/build/include/opencv2/\" ]\n        }\n    ]\n}\n</code></pre>\n\n<p>The output error: </p>\n\n<pre><code>c:\\users\\test\\desktop\\nodecexample\\libs\\opencv\\build\\include\\opencv2\\opencv.hpp(48): fatal error C1083: Cannot open include file: 'opencv2/opencv_modules.hpp': No such file or directory (compiling source file ..\\c\n\\opencv.cc) [C:\\Users\\test\\Desktop\\nodeCExample\\build\\opencvTest.vcxproj]\n</code></pre>\n"}, {"tags": ["c++", "opencv3.0", "dji-sdk"], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 10354027, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ed5fc1843ccc41c91df46651efb95cb?s=128&d=identicon&r=PG&f=1", "display_name": "M. Schorn", "link": "https://stackoverflow.com/users/10354027/m-schorn"}, "is_accepted": true, "score": 0, "last_activity_date": 1536931416, "creation_date": 1536931416, "answer_id": 52332989, "question_id": 52298723, "link": "https://stackoverflow.com/questions/52298723/dji-m210-calibrate-front-stereo-cameras-for-depth-perception/52332989#52332989", "title": "DJI M210 calibrate front stereo cameras for depth perception", "body": "<p>Solve, the problem was that the xml file containing the list of images need to looks like this :</p>\n\n<pre><code>   \"data/left01.jpg\"\n   \"data/right01.jpg\"\n   \"data/left02.jpg\"\n   \"data/right02.jpg\"\n   \"data/left03.jpg\"\n   ...\n</code></pre>\n\n<p>And mine xml file was more like this :</p>\n\n<pre><code>   \"data/left01.jpg\"\n   \"data/left02.jpg\"\n   \"data/left03.jpg\"\n   ...\n   \"data/right01.jpg\"\n   \"data/right02.jpg\"\n</code></pre>\n\n<p>So, if you use this example, check if your xml file alternate left-right pictures. </p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 12137008, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/9bb245c2aa048da1745a69825147bf99?s=128&d=identicon&r=PG", "display_name": "Lin", "link": "https://stackoverflow.com/users/12137008/lin"}, "is_accepted": false, "score": -1, "last_activity_date": 1569724425, "creation_date": 1569724425, "answer_id": 58151786, "question_id": 52298723, "link": "https://stackoverflow.com/questions/52298723/dji-m210-calibrate-front-stereo-cameras-for-depth-perception/58151786#58151786", "title": "DJI M210 calibrate front stereo cameras for depth perception", "body": "<p>I asked the the tech support of DJI and he told me that the M210 does not support the calibration. In this case, you should not have these problems. Just use the original one.</p>\n"}], "owner": {"reputation": 1, "user_id": 10354027, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ed5fc1843ccc41c91df46651efb95cb?s=128&d=identicon&r=PG&f=1", "display_name": "M. Schorn", "link": "https://stackoverflow.com/users/10354027/m-schorn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 0, "accepted_answer_id": 52332989, "answer_count": 2, "score": -1, "last_activity_date": 1569724425, "creation_date": 1536765999, "last_edit_date": 1592644375, "question_id": 52298723, "link": "https://stackoverflow.com/questions/52298723/dji-m210-calibrate-front-stereo-cameras-for-depth-perception", "title": "DJI M210 calibrate front stereo cameras for depth perception", "body": "<p>I'm trying to get the calibration values to put in the m210_stereo_param.yaml, like it's suggested in the official developer website (<a href=\"https://developer.dji.com/onboard-sdk/documentation/sample-doc/advanced-sensing-stereo-depth-perception.html\" rel=\"nofollow noreferrer\">OnboardSDK for Linux</a>). The objective is to have good values to test the depth perception sample. The website suggest different approach for the calibration, and I chose the OpenCV one.</p>\n<p>I found an example of calibration on this Github repository: <a href=\"https://github.com/ruchirchauhan/Opencv/tree/master/stereo_calibrate_rc\" rel=\"nofollow noreferrer\">Opencv - stereo_calibrate_rc</a> (some explanations are given on this link: <a href=\"https://ruchirchauhan.wordpress.com/tag/stereo-calibration/\" rel=\"nofollow noreferrer\">Stereo Camera Calibration in Opencv 3</a>)</p>\n<p>The problem is that after getting the final Matrix (in the intrinsics.yaml and extrinsics.yaml), I modified the values in the m210_stereo_param.yaml, and tried to run the sample. I got this result (which is not correct, even the default values of the m210_stereo_param.yaml had a better result).</p>\n<p><img src=\"https://i.stack.imgur.com/ZmJEM.png\" alt=\"screenshot of the depth perception sample running\" /></p>\n<p>Do you have any idea of what is going wrong with the calibration ? It's quite complicated to found a clear approach to get values to put in the yaml.</p>\n"}, {"tags": ["c++", "libraries", "lnk2001", "caffe2", "linkageerror"], "owner": {"reputation": 11, "user_id": 10354080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57ce987aa12cf4381d23165ac63373eb?s=128&d=identicon&r=PG&f=1", "display_name": "ariangc", "link": "https://stackoverflow.com/users/10354080/ariangc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 19, "favorite_count": 0, "closed_date": 1536771581, "answer_count": 0, "score": 1, "last_activity_date": 1536765971, "creation_date": 1536765971, "question_id": 52298716, "link": "https://stackoverflow.com/questions/52298716/lnk2001-caffe2-inference", "closed_reason": "Duplicate", "title": "LNK2001: Caffe2 Inference", "body": "<p>I'm trying to build a simple program to make inferences with Caffe2 Library on C++. I took some examples from the web and the code looks like this:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include \"caffe2/caffe2.hpp\"\n#include \"google/protobuf/io/coded_stream.h\"\n#include \"google/protobuf/io/zero_copy_stream_impl_lite.h\"\n\nusing namespace caffe2;\nusing namespace std;\n\nNetDef m_Init_net, m_Predict_net;\nWorkspace m_Workspace;\nmap&lt;string, DeviceOption&gt; m_BlobOptionMap;\n\nvoid readNetwork(const string&amp; proto_file, const string trained_file) {\n    CAFFE_ENFORCE(ReadProtoFromFile(proto_file, &amp;m_Init_net));\n    CAFFE_ENFORCE(ReadProtoFromFile(trained_file, &amp;m_Predict_net));\n}\n\nbool enableCPU() {\n    m_Predict_net.mutable_device_option()-&gt;set_device_type((int)CPU);\n    m_Init_net.mutable_device_option()-&gt;set_device_type((int)CPU);\n    for (int i = 0; i&lt;m_Predict_net.op_size(); ++i) {\n        m_Predict_net.mutable_op(i)-&gt;mutable_device_option()-&gt;set_device_type((int)CPU);\n    }\n    for (int i = 0; i&lt;m_Init_net.op_size(); ++i) {\n        m_Init_net.mutable_op(i)-&gt;mutable_device_option()-&gt;set_device_type((int)CPU);\n    }\n}\n\nvoid initializeNetwork() {\n    enableCPU();\n    CAFFE_ENFORCE(m_Workspace.RunNetOnce(m_Init_net));\n    CAFFE_ENFORCE(m_Workspace.CreateNet(m_Predict_net));\n}\n\nbool setInput(float* input, vector&lt;TIndex&gt; vInputDims, string sBlobName) {\n    if (!m_Workspace.HasBlob(sBlobName)) {\n        cerr &lt;&lt; \"The workspace doesn't have the blob \" + sBlobName &lt;&lt; endl;\n        return false;\n    }\n    cerr &lt;&lt; \"Success finding blob \" + sBlobName &lt;&lt; endl;\n\n    auto _tensor = m_Workspace.GetBlob(sBlobName)-&gt;GetMutableTensor(CPU);\n    _tensor-&gt;Resize(vInputDims);\n\n    cerr &lt;&lt; \"Dimensions set\" &lt;&lt; endl;\n\n    auto tensor_ = m_Workspace.GetBlob(sBlobName)-&gt;GetMutableTensor(CPU);\n    CPUContext context(m_BlobOptionMap[sBlobName]);\n    context.SwitchToDevice();\n    context.template CopyBytes&lt; CPUContext, CPUContext&gt;(tensor_-&gt;size() * sizeof(float), static_cast&lt;void*&gt;(input), tensor_-&gt;raw_mutable_data());\n    context.FinishDeviceComputation();\n    cerr &lt;&lt; \"Input set\" &lt;&lt; endl;\n\n    return true;\n}\n\nbool run() {\n    bool result = m_Workspace.RunNet(m_Predict_net.name());\n    return result;\n}\n\nTensorCPU getTensorByName(string sBlobName) {\n    return TensorCPU(m_Workspace.GetBlob(sBlobName)-&gt;Get&lt;TensorCPU&gt;());\n}\n\nvector&lt;float&gt; getBlobContentByName(std::string name) {\n    TensorCPU cpudata = getTensorByName(name); // need a instance to save\n    const float *data = cpudata.data&lt;float&gt;();\n    const int size = cpudata.size();\n    return std::vector&lt;float&gt;(data, data + size);\n}\n\nint main() {\n    srand(time(NULL));\n    string s1, s2;\n    cin &gt;&gt; s1 &gt;&gt; s2;\n    readNetwork(s1, s2);\n    initializeNetwork();\n    getchar();\n    float* input = new float[227*227*3];\n    for (int i = 0; i &lt; 227 * 227 * 3; i++) input[i] = static_cast &lt;float&gt; (rand()) / static_cast &lt;float&gt; (RAND_MAX);;\n    vector&lt;TIndex&gt; inputshape({1,3,224,224});\n    setInput(input, inputshape, \"data\");\n\n    vector&lt;float&gt; result = getBlobContentByName(\"softmaxout\");\n    sort(result.begin(), result.end());\n    for (int i = 999; i &gt; 990; i--) cout &lt;&lt; result[i] &lt;&lt; endl;\n    return 0;\n}\n</code></pre>\n\n<p>\"caffe2/caffe2.hpp\" contains all the necessary include files to compile this code. Also, I included protobuf libraries and static libraries as well. </p>\n\n<p>Unfortunately, it shows the following error:</p>\n\n<pre><code>1&gt;Source.obj : error LNK2001: unresolved external symbol \"__declspec(dllimport) protected: __cdecl c10::intrusive_ptr_target::intrusive_ptr_target(void)\" (__imp_??0intrusive_ptr_target@c10@@IEAA@XZ)\n1&gt;Source.obj : error LNK2001: unresolved external symbol \"__declspec(dllimport) public: __cdecl at::BaseContext::BaseContext(void)\" (__imp_??0BaseContext@at@@QEAA@XZ)\n1&gt;Source.obj : error LNK2001: unresolved external symbol \"__declspec(dllimport) public: void __cdecl at::BaseContext::SwitchToDevice(void)\" (__imp_?SwitchToDevice@BaseContext@at@@QEAAXXZ)\n1&gt;Source.obj : error LNK2001: unresolved external symbol \"__declspec(dllimport) public: static class caffe2::TypeIdentifier __cdecl caffe2::TypeMeta::Id&lt;class caffe2::Tensor&gt;(void)\" (__imp_??$Id@VTensor@caffe2@@@TypeMeta@caffe2@@SA?AVTypeIdentifier@1@XZ)\n1&gt;Source.obj : error LNK2001: unresolved external symbol \"__declspec(dllimport) public: static class caffe2::TypeIdentifier __cdecl caffe2::TypeMeta::Id&lt;float&gt;(void)\" (__imp_??$Id@M@TypeMeta@caffe2@@SA?AVTypeIdentifier@1@XZ)\n1&gt;Source.obj : error LNK2001: unresolved external symbol \"__declspec(dllimport) public: void (__cdecl*__cdecl caffe2::TypeMeta::dtor(void)const )(void *,unsigned __int64)\" (__imp_?dtor@TypeMeta@caffe2@@QEBAP6AXPEAX_K@ZXZ)\n1&gt;Source.obj : error LNK2001: unresolved external symbol \"__declspec(dllimport) public: void (__cdecl*__cdecl caffe2::TypeMeta::ctor(void)const )(void *,unsigned __int64)\" (__imp_?ctor@TypeMeta@caffe2@@QEBAP6AXPEAX_K@ZXZ)\n1&gt;Source.obj : error LNK2001: unresolved external symbol \"__declspec(dllimport) public: unsigned __int64 const &amp; __cdecl caffe2::TypeMeta::itemsize(void)const \" (__imp_?itemsize@TypeMeta@caffe2@@QEBAAEB_KXZ)\n1&gt;Source.obj : error LNK2001: unresolved external symbol \"__declspec(dllimport) public: class caffe2::TypeIdentifier const &amp; __cdecl caffe2::TypeMeta::id(void)const \" (__imp_?id@TypeMeta@caffe2@@QEBAAEBVTypeIdentifier@2@XZ)\n1&gt;Source.obj : error LNK2001: unresolved external symbol \"__declspec(dllimport) private: __cdecl caffe2::TypeMeta::TypeMeta(class caffe2::TypeIdentifier,unsigned __int64,void (__cdecl*)(void *,unsigned __int64),void (__cdecl*)(void const *,void *,unsigned __int64),void (__cdecl*)(void *,unsigned __int64))\" (__imp_??0TypeMeta@caffe2@@AEAA@VTypeIdentifier@1@_KP6AXPEAX1@ZP6AXPEBX21@Z3@Z)\n1&gt;Source.obj : error LNK2001: unresolved external symbol \"__declspec(dllimport) public: __cdecl caffe2::TypeMeta::TypeMeta(void)\" (__imp_??0TypeMeta@caffe2@@QEAA@XZ)\n1&gt;Source.obj : error LNK2001: unresolved external symbol \"__declspec(dllimport) public: static class caffe2::TypeIdentifier __cdecl caffe2::TypeIdentifier::uninitialized(void)\" (__imp_?uninitialized@TypeIdentifier@caffe2@@SA?AV12@XZ)\n1&gt;D:\\UserData\\z003yjnk\\Documents\\Visual Studio 2015\\Projects\\Project1\\x64\\Release\\Project1.exe : fatal error LNK1120: 12 unresolved externals\n========== Build: 0 succeeded, 1 failed, 0 up-to-date, 0 skipped ==========\n</code></pre>\n\n<p>It seems to be a missing .lib file or so. Any ideas?</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["c++", "linux", "opengl", "glut"], "comments": [{"owner": {"reputation": 47449, "user_id": 44729, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tyWaU.png?s=128&g=1", "display_name": "genpfault", "link": "https://stackoverflow.com/users/44729/genpfault"}, "edited": false, "score": 0, "creation_date": 1536765535, "post_id": 52298473, "comment_id": 91544828, "body": "Why are you running GCC as root?  Where&#39;s the code for <code>init2D()</code>?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user8412759"}, "reply_to_user": {"reputation": 47449, "user_id": 44729, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tyWaU.png?s=128&g=1", "display_name": "genpfault", "link": "https://stackoverflow.com/users/44729/genpfault"}, "edited": false, "score": 0, "creation_date": 1536765812, "post_id": 52298473, "comment_id": 91544976, "body": "@genpfault it&#39;s in display function. isn&#39;t it? in fact i am a beginer in opengl"}, {"owner": {"user_type": "does_not_exist", "display_name": "user8412759"}, "reply_to_user": {"reputation": 47449, "user_id": 44729, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tyWaU.png?s=128&g=1", "display_name": "genpfault", "link": "https://stackoverflow.com/users/44729/genpfault"}, "edited": false, "score": 0, "creation_date": 1536765831, "post_id": 52298473, "comment_id": 91544988, "body": "if i don&#39;t root it. it results the same"}, {"owner": {"reputation": 47449, "user_id": 44729, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tyWaU.png?s=128&g=1", "display_name": "genpfault", "link": "https://stackoverflow.com/users/44729/genpfault"}, "edited": false, "score": 0, "creation_date": 1536765888, "post_id": 52298473, "comment_id": 91545022, "body": "I&#39;m not seeing <code>init2D()</code> defined anywhere, just called in <code>main()</code>."}, {"owner": {"user_type": "does_not_exist", "display_name": "user8412759"}, "reply_to_user": {"reputation": 47449, "user_id": 44729, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tyWaU.png?s=128&g=1", "display_name": "genpfault", "link": "https://stackoverflow.com/users/44729/genpfault"}, "edited": false, "score": 0, "creation_date": 1536765980, "post_id": 52298473, "comment_id": 91545080, "body": "it  even works without that."}, {"owner": {"user_type": "does_not_exist", "display_name": "user8412759"}, "reply_to_user": {"reputation": 47449, "user_id": 44729, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tyWaU.png?s=128&g=1", "display_name": "genpfault", "link": "https://stackoverflow.com/users/44729/genpfault"}, "edited": false, "score": 0, "creation_date": 1536766182, "post_id": 52298473, "comment_id": 91545226, "body": "i am not sure what to do and not finding anything helpful on google as well"}, {"owner": {"reputation": 138010, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "edited": false, "score": 0, "creation_date": 1536769032, "post_id": 52298473, "comment_id": 91546829, "body": "@Nancy If it still doesn&#39;t work, then try to use double buffering. <code>GLUT_DOUBLE</code> instead of <code>GLUT_SINGLE</code> and <code>glutSwapBuffers()</code> instead of <code>glFlush()</code>."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user8412759"}, "edited": false, "score": 0, "creation_date": 1536766715, "post_id": 52298854, "comment_id": 91545541, "body": "please have a look at the question"}, {"owner": {"reputation": 1281, "user_id": 1356096, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YTexs.png?s=128&g=1", "display_name": "YesThatIsMyName", "link": "https://stackoverflow.com/users/1356096/yesthatismyname"}, "edited": false, "score": 0, "creation_date": 1536767076, "post_id": 52298854, "comment_id": 91545738, "body": "@TungLeThanh Please have a look at the answer ... because it tells you that you don&#39;t have a valid viewport ... I think the default is 1 by 1 ... and you start drawing at position 10. Increasing the pixels just stretches the 1-by-1 viewport."}, {"owner": {"user_type": "does_not_exist", "display_name": "user8412759"}, "edited": false, "score": 0, "creation_date": 1536767166, "post_id": 52298854, "comment_id": 91545786, "body": "can you please take a look at the question again and explain what you suggested?"}, {"owner": {"reputation": 138010, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "edited": false, "score": 0, "creation_date": 1536768189, "post_id": 52298854, "comment_id": 91546371, "body": "Since the window size is (500, 500), I suggest to set an orthographic projection in the same range. So the world coordinates would be projected 1:1 to the window coordinates: <a href=\"https://www.khronos.org/registry/OpenGL-Refpages/gl2.1/xhtml/gluOrtho2D.xml\" rel=\"nofollow noreferrer\"><code>gluOrtho2D (0.0, 500.0, 0.0, 500.0)</code></a>"}], "tags": [], "owner": {"reputation": 864, "user_id": 10320907, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a781c80933f17fa87d97b70e3fca260?s=128&d=identicon&r=PG", "display_name": "tunglt", "link": "https://stackoverflow.com/users/10320907/tunglt"}, "is_accepted": false, "score": 1, "last_activity_date": 1536766462, "creation_date": 1536766462, "answer_id": 52298854, "question_id": 52298473, "link": "https://stackoverflow.com/questions/52298473/opengl-not-displaying-2d-lines/52298854#52298854", "title": "OpenGL not displaying 2D lines", "body": "<p>As shown in the exemple <a href=\"https://alala666888.wordpress.com/2010/06/06/opengl2d-draw-points-and-lines/\" rel=\"nofollow noreferrer\">here</a>, you need a correct init2D function to initialize the 3D projection matrix before drawing. </p>\n\n<pre><code>void init2D(float r, float g, float b)\n{\n    glClearColor(r,g,b,0.0);  \n    glMatrixMode (GL_PROJECTION);\n    gluOrtho2D (0.0, 200.0, 0.0, 150.0);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1281, "user_id": 1356096, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YTexs.png?s=128&g=1", "display_name": "YesThatIsMyName", "link": "https://stackoverflow.com/users/1356096/yesthatismyname"}, "is_accepted": false, "score": 0, "last_activity_date": 1536767596, "last_edit_date": 1592644375, "creation_date": 1536767596, "answer_id": 52299189, "question_id": 52298473, "link": "https://stackoverflow.com/questions/52298473/opengl-not-displaying-2d-lines/52299189#52299189", "title": "OpenGL not displaying 2D lines", "body": "<p>As Tung Le Thanh told you, you need a correct projection matrix initialization, and this is what it does:</p>\n<p><code>glMatrixMode (GL_PROJECTION)</code></p>\n<blockquote>\n<p>glMatrixMode \u2014 specify which matrix is the current matrix</p>\n<pre><code>                GL_PROJECTION\n                    Applies subsequent matrix operations to the projection matrix stack.\n                GL_TEXTURE\n                    Applies subsequent matrix operations to the texture matrix stack.\n                GL_COLOR\n                    Applies subsequent matrix operations to the color matrix stack.\n                \n        To find out which matrix stack is currently the target of all matrix\n        operations, call glGet with argument GL_MATRIX_MODE. The initial\n        value is GL_MODELVIEW.\n</code></pre>\n</blockquote>\n<p><code>gluOrtho2D</code></p>\n<blockquote>\n<p>gluOrtho2D \u2014 define a 2D orthographic projection matrix</p>\n<p>Specification</p>\n<pre><code>void gluOrtho2D(GLdouble left,  GLdouble right,  GLdouble bottom,  GLdouble top); \n</code></pre>\n<p>Parameters</p>\n<pre><code>  left, right\n            Specify the coordinates for the left and right vertical clipping planes.\n  bottom, top\n            Specify the coordinates for the bottom and top horizontal clipping planes.\n</code></pre>\n<p>Description</p>\n<pre><code>        gluOrtho2D sets up a two-dimensional orthographic viewing region.  \n</code></pre>\n</blockquote>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user8412759"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 117, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1536767596, "creation_date": 1536765251, "last_edit_date": 1536767114, "question_id": 52298473, "link": "https://stackoverflow.com/questions/52298473/opengl-not-displaying-2d-lines", "title": "OpenGL not displaying 2D lines", "body": "<p>I am using Ubuntu 18.04 LTS and trying to implement 2d lines using OpenGl but it isn't displaying anything.  i am using ubuntu compiler.  I have installed the library using <strong>terminal</strong>.</p>\n\n<p>here is my code</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>#include &lt;GL/glut.h&gt;\nvoid display()\n{\n    glClear(GL_COLOR_BUFFER_BIT);\n    glBegin(GL_LINES);\n    glVertex2i(10,10);\n    glVertex2i(100,100);\n    glEnd();\n\n    glFlush();\n}\n\nint main(int argc, char** argv)\n{\n    glutInit(&amp;argc,argv);\n    glutInitDisplayMode (GLUT_SINGLE | GLUT_RGB);\n    glutInitWindowSize (500, 500);\n    glutInitWindowPosition (100, 100);\n    glutCreateWindow (\"points and lines\");\n    glutDisplayFunc(display);\n    glutMainLoop();\n\n    return 0;\n}\n</code></pre>\n\n<p>this is how i am compiling and running my program    </p>\n\n<pre><code> g++ jamshaid.cpp -o jamoo -lglut -lGLU -lGL\n./jamoo\n</code></pre>\n\n<h1>Update 1</h1>\n\n<p>added init2D and tried other answer as well but not working. it even doesn't changing the title of the window.</p>\n\n<h1>update 2</h1>\n\n<p>after updating the code from <a href=\"https://alala666888.wordpress.com/2010/06/06/opengl2d-draw-points-and-lines/\" rel=\"nofollow noreferrer\">this</a> site. i now have this code and it's working. can you please explain the reason why is that so. thanks</p>\n\n<pre><code>#include &lt;GL/glut.h&gt;\n\n void init2D(float r, float g, float b)\n {\n glClearColor(r,g,b,0.0);  \n glMatrixMode (GL_PROJECTION);\ngluOrtho2D (0.0, 200.0, 0.0, 150.0);\n}\n\nvoid display(void)\n{\nglClear(GL_COLOR_BUFFER_BIT);\nglColor3f(1.0, 0.0, 0.0);\nglBegin(GL_LINES);\n    glVertex2i(10,10);\n    glVertex2i(100,100);\n glEnd();\n glFlush();\n }\n\nint main(int argc,char *argv[])\n {\n glutInit(&amp;argc,argv);\n glutInitDisplayMode (GLUT_SINGLE | GLUT_RGB);\n glutInitWindowSize (500, 500);\n glutInitWindowPosition (100, 100);\n glutCreateWindow (\"points and lines\");\n init2D(0.0,0.0,0.0);\n glutDisplayFunc(display);\n glutMainLoop();\n return 0;}\n</code></pre>\n"}, {"tags": ["c++", "linux", "perf"], "comments": [{"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 1, "creation_date": 1536764882, "post_id": 52298242, "comment_id": 91544444, "body": "What if you turn optimization on?"}, {"owner": {"reputation": 7262, "user_id": 4955498, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-DQswbNCOBTs/AAAAAAAAAAI/AAAAAAAAADE/avTd-sX467I/photo.jpg?sz=128", "display_name": "Michael Veksler", "link": "https://stackoverflow.com/users/4955498/michael-veksler"}, "edited": false, "score": 2, "creation_date": 1536765424, "post_id": 52298242, "comment_id": 91544761, "body": "Try to run <code>top</code> to see if something else is running in parallel and taking up CPU, like a web browser. A parallel task could cause all these context switches."}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 4, "creation_date": 1536767669, "post_id": 52298242, "comment_id": 91546061, "body": "You&#39;re starting as many threads as you have CPUs, so <i>anything</i> else the OS  wants to run will need to deschedule one of your threads.  This includes a blinking cursor on your graphical desktop, a clock, or any of the crap that a lot of Linux distros have running in the background by default.  Or like Michael mentioned, a web browser with any tabs open that run a Javascript loop in the background, or whatever.  (It doesn&#39;t include hardware interrupt handlers, though. Well maybe the bottom-half IRQ Linux handlers that run in a kernel thread, but not the &quot;top half&quot; that run directly from an int)"}, {"owner": {"reputation": 1519, "user_id": 74837, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/41ae74504b47badabd482700f4e7cd76?s=128&d=identicon&r=PG", "display_name": "aaron", "link": "https://stackoverflow.com/users/74837/aaron"}, "edited": false, "score": 1, "creation_date": 1536776077, "post_id": 52298242, "comment_id": 91550131, "body": "it&#39;ll be very hard to eliminate contention with other things going on on the machine (as already mentioned), but you can change the process priority to highest by running <code>nice -n -20 ...</code> as well. Also: is this running in a VM or locally? that&#39;ll also have a big impact."}, {"owner": {"reputation": 20828, "user_id": 620382, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bf285996e4e7188feac84786a47d9f3a?s=128&d=identicon&r=PG", "display_name": "Zulan", "link": "https://stackoverflow.com/users/620382/zulan"}, "edited": false, "score": 0, "creation_date": 1536776303, "post_id": 52298242, "comment_id": 91550240, "body": "Good question - but please never include screenshots of text - always put the text itself."}], "answers": [{"tags": [], "owner": {"reputation": 20828, "user_id": 620382, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bf285996e4e7188feac84786a47d9f3a?s=128&d=identicon&r=PG", "display_name": "Zulan", "link": "https://stackoverflow.com/users/620382/zulan"}, "is_accepted": true, "score": 7, "last_activity_date": 1536776231, "creation_date": 1536776231, "answer_id": 52301255, "question_id": 52298242, "link": "https://stackoverflow.com/questions/52298242/why-perf-has-such-high-context-switches/52301255#52301255", "title": "why perf has such high context-switches?", "body": "<p>We can't tell you exactly what is being scheduled - but you can find out yourself using <code>perf</code>.</p>\n\n<pre><code>perf record -e sched:sched_switch ./test\n</code></pre>\n\n<p>Note this requires a mounted debugfs and root permissions. Now a <code>perf report</code> will give you an overview of what the scheduler was switching to (or see <code>perf script</code> for a full listing). Now there is no apparent thing in your code that would cause a context switch (e.g. sleep, waiting for I/O), so it is most likely another task that is being scheduled on these cores.</p>\n\n<p>The reason why <code>sleep</code> has almost no context switches is simple. It goes to sleep almost immediately - which is one context switch. While the task is not active, it cannot be displaced by another task.</p>\n"}, {"tags": [], "owner": {"reputation": 18599, "user_id": 4230618, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KRWgI.jpg?s=128&g=1", "display_name": "Hadi Brais", "link": "https://stackoverflow.com/users/4230618/hadi-brais"}, "is_accepted": false, "score": 5, "last_activity_date": 1617831634, "last_edit_date": 1617831634, "creation_date": 1536799787, "answer_id": 52305198, "question_id": 52298242, "link": "https://stackoverflow.com/questions/52298242/why-perf-has-such-high-context-switches/52305198#52305198", "title": "why perf has such high context-switches?", "body": "<p>You can use <code>sudo perf sched record -- ./test</code> to determine which processes are being scheduled to run in place of the one of the threads of your application. When I execute this command on my system, I get:</p>\n<pre><code>sudo perf sched record -- ./test\nLaunching 4 threads\n[ perf record: Woken up 10 times to write data ]\n[ perf record: Captured and wrote 23.886 MB perf.data (212100 samples) ]\n</code></pre>\n<p>Note that I have four cores and the name of the executable is <code>test</code>. <code>perf sched</code> has captured all the <code>sched:sched_switch</code> events and dumped the data into a file called <code>perf.data</code> by default. The size of the file is about 23 MBs and contains abut 212100 events. The duration of profiling will be from the time <code>perf</code> starts until <code>test</code> terminates.</p>\n<p>You can use <code>sudo perf sched map</code> to print all the recorded events in a nice format that looks like this:</p>\n<pre><code>             *.         448826.757400 secs .  =&gt; swapper:0\n              *A0       448826.757461 secs A0 =&gt; perf:15875\n          *.   A0       448826.757477 secs \n  *.       .   A0       448826.757548 secs \n   .       .  *B0       448826.757601 secs B0 =&gt; migration/3:22\n   .       .  *.        448826.757608 secs \n  *A0      .   .        448826.757625 secs \n   A0     *C0  .        448826.757775 secs C0 =&gt; rcu_sched:7\n   A0     *.   .        448826.757777 secs \n  *D0      .   .        448826.757803 secs D0 =&gt; ksoftirqd/0:3\n  *A0      .   .        448826.757807 secs \n   A0 *E0  .   .        448826.757862 secs E0 =&gt; kworker/1:3:13786\n   A0 *F0  .   .        448826.757870 secs F0 =&gt; kworker/1:0:5886\n   A0 *G0  .   .        448826.757874 secs G0 =&gt; hud-service:1609\n   A0 *.   .   .        448826.758614 secs \n   A0 *H0  .   .        448826.758714 secs H0 =&gt; kworker/u8:2:15585\n   A0 *.   .   .        448826.758721 secs \n   A0  .  *I0  .        448826.758740 secs I0 =&gt; gnome-terminal-:8878\n   A0  .   I0 *J0       448826.758744 secs J0 =&gt; test:15876\n   A0  .   I0 *B0       448826.758749 secs \n</code></pre>\n<p>The two-letter names <code>A0</code>, <code>B0</code>, <code>C0</code>, <code>E0</code>, and so on, are short names given by <code>perf</code> to every thread running on the system. The first four columns shows which thread was running on each of the four cores. For example, in the second-to-last row, you can see that the first thread that got created in your <code>for</code> loop. The name assigned to this thread is <code>J0</code>. The thread is running on the fourth core. The asterisk indicates that it has just been context-switched to from some other thread. Without an asterisk, it means that the same thread has continued to run on the same core for another time slice. A dot represents an idle core. To determine the names for all of the four threads, run the following command:</p>\n<pre><code>sudo perf sched map | grep 'test'\n</code></pre>\n<p>On my system, this prints:</p>\n<pre><code>   A0  .   I0 *J0       448826.758744 secs J0 =&gt; test:15876\n   J0  A0 *K0  .        448826.758868 secs K0 =&gt; test:15878\n   J0 *L0  K0  .        448826.758889 secs L0 =&gt; test:15877\n   J0  L0  K0 *M0       448826.758894 secs M0 =&gt; test:15879\n</code></pre>\n<p>Now that you know the two-letter names assigned to your threads (and all other threads). you can determine which other threads are causing your threads to be context-switched. For example, if you see this:</p>\n<pre><code>  *G1  L0  K0  M0       448826.822555 secs G1 =&gt; firefox:2384\n</code></pre>\n<p>then you'd know that three of your app threads are running, but the one of the cores is being used to run Firefox. So the fourth thread needs to wait until the scheduler decides when to schedule again.</p>\n<p>If you want all the scheduler slots where at least one of your threads is occupying, then you can use the following command:</p>\n<pre><code>sudo perf sched map &gt; mydata\ngrep -E 'J0|K0|L0|M0' mydata &gt; mydata2\nwc -l mydata\nwc -l mydata2\n</code></pre>\n<p>The last two commands tell you how many rows (time slices) where at least one thread of your app was running. You can compare that to the total number of time slices. Since there are four cores, the total number of scheduler slots is 4 * (number of time slices). Then you can do all sorts of manual calculations and figure out exactly what's happened.</p>\n"}], "owner": {"reputation": 1606, "user_id": 6719992, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uHsSI.jpg?s=128&g=1", "display_name": "daoliker", "link": "https://stackoverflow.com/users/6719992/daoliker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 471, "favorite_count": 0, "accepted_answer_id": 52301255, "answer_count": 2, "score": 11, "last_activity_date": 1617831634, "creation_date": 1536764512, "last_edit_date": 1536775693, "question_id": 52298242, "link": "https://stackoverflow.com/questions/52298242/why-perf-has-such-high-context-switches", "title": "why perf has such high context-switches?", "body": "<p>I was trying to understand the linux <code>perf</code>, and found some really confusing behavior: </p>\n\n<p>I wrote a simple multi-threading example with one thread pinned to each core; each thread runs computation locally and does not communicate with each other (see <code>test.cc</code> below). I was thinking that this example should have really low, if not zero, context switches. However, using linux <code>perf</code> to profile the example shows thousands of context-switches - much more than what I expected. I further profiled the linux command <code>sleep 20</code> for a comparison, showing much fewer context switches. </p>\n\n<p>This profile result does not make any sense to me. What is causing so many context switches?</p>\n\n<pre><code>&gt; sudo perf stat -e sched:sched_switch ./test\n Performance counter stats for './test':\n\n                 6,725  sched:sched_switch                                          \n\n      20.835 seconds time elapsed\n\n&gt; sudo perf stat -e sched:sched_switch sleep 20\n\n Performance counter stats for 'sleep 20':\n\n                 1      sched:sched_switch                                          \n\n      20.001 seconds time elapsed\n</code></pre>\n\n<p>For reproducing the results, please run the following code:</p>\n\n<pre><code>perf stat -e context-switches sleep 20\nperf stat -e context-switches ./test\n</code></pre>\n\n<p>To compile the source code, please type the following code:</p>\n\n<pre><code>g++ -std=c++11 -pthread -o test test.cc\n</code></pre>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>// test.cc\n#include &lt;iostream&gt;\n#include &lt;thread&gt;\n#include &lt;vector&gt;\n\nint main(int argc, const char** argv) {\n  unsigned num_cpus = std::thread::hardware_concurrency();\n  std::cout &lt;&lt; \"Launching \" &lt;&lt; num_cpus &lt;&lt; \" threads\\n\";\n\n  std::vector&lt;std::thread&gt; threads(num_cpus);\n  for (unsigned i = 0; i &lt; num_cpus; ++i) {\n    threads[i] = std::thread([i] {\n      int j = 0;\n      while (j++ &lt; 100) {\n        int tmp = 0;\n        while (tmp++ &lt; 110000000) { }\n      }\n    });\n\n    cpu_set_t cpuset;\n    CPU_ZERO(&amp;cpuset);\n    CPU_SET(i, &amp;cpuset);\n    int rc = pthread_setaffinity_np(threads[i].native_handle(),\n                                    sizeof(cpu_set_t), &amp;cpuset);\n    if (rc != 0) {\n      std::cerr &lt;&lt; \"Error calling pthread_setaffinity_np: \" &lt;&lt; rc &lt;&lt; \"\\n\";\n    }\n  }\n\n  for (auto&amp; t : threads) {\n    t.join();\n  }\n  return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "console", "keyboard"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1536764518, "post_id": 52298217, "comment_id": 91544233, "body": "Why does it have to be a &quot;console&quot; window? Why not simply add a text-box input field to your program? It could be added in a new windows as well if that&#39;s what you want."}, {"owner": {"reputation": 165, "user_id": 9009270, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-8zdKrjuXydo/AAAAAAAAAAI/AAAAAAAAACs/MxAX_HFhojI/photo.jpg?sz=128", "display_name": "Draden Merenox", "link": "https://stackoverflow.com/users/9009270/draden-merenox"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1536765113, "post_id": 52298217, "comment_id": 91544578, "body": "Guess that would work just as well."}], "answers": [{"comments": [{"owner": {"reputation": 165, "user_id": 9009270, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-8zdKrjuXydo/AAAAAAAAAAI/AAAAAAAAACs/MxAX_HFhojI/photo.jpg?sz=128", "display_name": "Draden Merenox", "link": "https://stackoverflow.com/users/9009270/draden-merenox"}, "edited": false, "score": 0, "creation_date": 1536805965, "post_id": 52298370, "comment_id": 91559035, "body": "Dev c++ doesn&#39;t have the glut.h header file. Would any other have a function like that?"}, {"owner": {"reputation": 5319, "user_id": 2754173, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24b0a0fd9004b29fa441e5bbf6904e69?s=128&d=identicon&r=PG&f=1", "display_name": "Geezer", "link": "https://stackoverflow.com/users/2754173/geezer"}, "reply_to_user": {"reputation": 165, "user_id": 9009270, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-8zdKrjuXydo/AAAAAAAAAAI/AAAAAAAAACs/MxAX_HFhojI/photo.jpg?sz=128", "display_name": "Draden Merenox", "link": "https://stackoverflow.com/users/9009270/draden-merenox"}, "edited": false, "score": 0, "creation_date": 1536819322, "post_id": 52298370, "comment_id": 91562440, "body": "@DradenMerenox OK no problem I&#39;ve edited the answer with instructions to get any missing headers for your opengl application code."}], "tags": [], "owner": {"reputation": 5319, "user_id": 2754173, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24b0a0fd9004b29fa441e5bbf6904e69?s=128&d=identicon&r=PG&f=1", "display_name": "Geezer", "link": "https://stackoverflow.com/users/2754173/geezer"}, "is_accepted": false, "score": 0, "last_activity_date": 1536819218, "last_edit_date": 1536819218, "creation_date": 1536764957, "answer_id": 52298370, "question_id": 52298217, "link": "https://stackoverflow.com/questions/52298217/c-how-to-remotely-call-a-console-window-within-opengl-program/52298370#52298370", "title": "c++ how to remotely call a console window within opengl program", "body": "<blockquote>\n  <p>but in order to do <em>that</em> I need to be able to generate a console window\n  within the program [...]</p>\n</blockquote>\n\n<p>If by <em>that</em> you mean:</p>\n\n<blockquote>\n  <p>takes certain character inputs</p>\n</blockquote>\n\n<p>then <strong>no, you dont <em>need to be able to generate a console window</em></strong>. This being titled <em>opengl program</em>, a better fitting solution is to register keyboard callbacks for <em>the current window</em> (<a href=\"http://freeglut.sourceforge.net/docs/api.php#WindowCallback\" rel=\"nofollow noreferrer\">see here under <em>glutKeyboardFunc</em></a>) and handle everything through there. Other callbacks, for mouse, etc. are documented there as well.</p>\n\n<p>There's no problem <a href=\"http://freeglut.sourceforge.net/index.php#download\" rel=\"nofollow noreferrer\">downloading <em>freeglut</em></a> (preserves same API and extends GLUT) in case you're missing any header(s)/libraries. Using Dev C++ is not a limiting factor for doing so.</p>\n"}, {"tags": [], "owner": {"reputation": 165, "user_id": 9009270, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-8zdKrjuXydo/AAAAAAAAAAI/AAAAAAAAACs/MxAX_HFhojI/photo.jpg?sz=128", "display_name": "Draden Merenox", "link": "https://stackoverflow.com/users/9009270/draden-merenox"}, "is_accepted": false, "score": 0, "last_activity_date": 1543358310, "creation_date": 1543358310, "answer_id": 53509326, "question_id": 52298217, "link": "https://stackoverflow.com/questions/52298217/c-how-to-remotely-call-a-console-window-within-opengl-program/53509326#53509326", "title": "c++ how to remotely call a console window within opengl program", "body": "<p>For the purpose that I've submitted, you don't need to call a console. If you don't want to use the glut method above, what you can do instead is use a few functions present in the windows.h header file to take inputs. </p>\n\n<p>The best way to implement inputs without glut involves creating a thread in your program that takes the inputs, and modifies a few variables that the main thread can use. Lets take a simple program here as an example:</p>\n\n<pre><code>#include &lt;windows.h&gt;\n#include &lt;pthread.h&gt;\n\n//the thread that takes the inputs\nvoid * takeInputs(void * outputVariable)\n{\n    //casts the output type so the compiler won't complain about setting void* to something\n    char * output = (char*) outputVariable;\n    //generic loop to stay alive\n    while (1 == 1) {\n        //checks to see if the key is in the on state, by getting only the needed bit in the data.\n        //In this case, we're checking to see if the A key on the keyboard is pressed\n        //You can use different keys like the arrow keys, using VK_UP VK_RIGHT\n        if (GetAsyncKeyState('A') &amp; 0x8000 != 0)\n        {\n            *output = 1;\n        }\n    //put a delay in here so that the input doesn't consume a lot of cpu power\n    Sleep(100);\n    }\n    pthread_exit(0);\n}\n\n\n\nint WINAPI WinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance, LPSTR lpCmdLine, int iCmdShow)\n{\n    //DoUnimportantWindowsSetup\n    char option = 0;\n    pthread_t Inputs;\n    //order: pointer to handle, Pointer to thread output, pointer to function, pointer to input\n    pthread_create(&amp;Inputs, NULL, takeInputs, &amp;option);\n\n    //Do stuff\n\n    if (option == 1) doWorks();\n    else doNotWorks();\n\n\n    //Order: thread handle, pointer to variable that stores output\n    pthread_join(Inputs, NULL);\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 165, "user_id": 9009270, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-8zdKrjuXydo/AAAAAAAAAAI/AAAAAAAAACs/MxAX_HFhojI/photo.jpg?sz=128", "display_name": "Draden Merenox", "link": "https://stackoverflow.com/users/9009270/draden-merenox"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 96, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1543358310, "creation_date": 1536764416, "last_edit_date": 1536765747, "question_id": 52298217, "link": "https://stackoverflow.com/questions/52298217/c-how-to-remotely-call-a-console-window-within-opengl-program", "title": "c++ how to remotely call a console window within opengl program", "body": "<p>What I am trying to do is make a graphing calculator that takes certain character inputs to transform the graph, but in order to do that I need to be able to generate a console window within the program. Is there any way in c++ to do that? </p>\n\n<p>using Dev C++</p>\n"}, {"tags": ["python", "c++", "tensorflow"], "comments": [{"owner": {"reputation": 4923, "user_id": 992489, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8568528b37ad2e84830c2c9aa9260369?s=128&d=identicon&r=PG", "display_name": "Alexandre Passos", "link": "https://stackoverflow.com/users/992489/alexandre-passos"}, "edited": false, "score": 0, "creation_date": 1537217920, "post_id": 52297864, "comment_id": 91696020, "body": "This should probably be filed as an issue on github"}], "owner": {"reputation": 21, "user_id": 10353869, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-KpiMiSadDOM/AAAAAAAAAAI/AAAAAAAAACg/V20j0vKpGO8/photo.jpg?sz=128", "display_name": "Priyank Jain", "link": "https://stackoverflow.com/users/10353869/priyank-jain"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 78, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1536765275, "creation_date": 1536763330, "last_edit_date": 1536765275, "question_id": 52297864, "link": "https://stackoverflow.com/questions/52297864/tf-1-10-intra-op-issue", "title": "TF 1.10 intra op issue", "body": "<p>In tensorflow 1.7.0, getting the number of threads in the intra_op pool was possible with the following line of code in C++:</p>\n\n<pre><code>context-&gt;device()-&gt;tensorflow_cpu_worker_threads()-&gt;num_threads\n</code></pre>\n\n<p>where context is an object of type OpKernelContext. (because of <a href=\"https://github.com/tensorflow/tensorflow/blob/7bccde15ce0dd29dce62092a5e9d48ffdc772963/tensorflow/core/common_runtime/local_device.cc#L44\" rel=\"nofollow noreferrer\">https://github.com/tensorflow/tensorflow/blob/7bccde15ce0dd29dce62092a5e9d48ffdc772963/tensorflow/core/common_runtime/local_device.cc#L44</a>).</p>\n\n<p>If the corresponding ConfigProto was set using the following python code:</p>\n\n<pre><code>import tensorflow as tf\nconf = tf.ConfigProto(inter_op_parallelism_threads=5, intra_op_parallelism_threads=4)\nsess = tf.Session(config=conf)\n</code></pre>\n\n<p>TF 1.7 would output the value of <code>context-&gt;device()-&gt;tensorflow_cpu_worker_threads()-&gt;num_threads</code> as 4.</p>\n\n<p>TF 1.10 outputs the value of <code>context-&gt;device()-&gt;tensorflow_cpu_worker_threads()-&gt;num_threads as 1</code>, irrespective of the intra_op_parallelism_threads value specified in the ConfigProto.</p>\n\n<p>I was wondering if something changed in the TF upgrade from 1.7.0 to 1.10.0 to cause this piece of code to give a different value or is the number of threads in the threadpool truly 1?</p>\n\n<p>Other relevant information:</p>\n\n<ul>\n<li>macOS High Sierra version 10.13.6 </li>\n<li>Working TF version: 1.7.0</li>\n<li>Breaking TF version: 1.10.0 </li>\n<li>Python information: Python 2.7.10 (default, Oct  6\n2017, 22:29:07) [GCC 4.2.1 Compatible Apple LLVM 9.0.0\n(clang-900.0.31)] on darwin </li>\n<li>Detailed debugging information from\ntensorflow (by setting TF_CPP_MIN_VLOG_LEVEL=3 before running the\npython program) says that TF 1.10 is indeed planning to create a\nthread pool of size 4 on this line of <a href=\"https://github.com/tensorflow/tensorflow/blob/7bccde15ce0dd29dce62092a5e9d48ffdc772963/tensorflow/core/common_runtime/local_device.cc#L41\" rel=\"nofollow noreferrer\">C++ code</a>. The C++ piece of\ncode at the start of this post however outputs value 1. </li>\n<li>This is the\nfirst and only session being created in the program.</li>\n</ul>\n"}, {"tags": ["c++", "time"], "comments": [{"owner": {"reputation": 9215, "user_id": 5212827, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7e9f9b0d7e2d571c9f8886dd54bd50f9?s=128&d=identicon&r=PG&f=1", "display_name": "DeiDei", "link": "https://stackoverflow.com/users/5212827/deidei"}, "edited": false, "score": 1, "creation_date": 1536762957, "post_id": 52297643, "comment_id": 91543264, "body": "<code>Do we have to split it to 2 and then * 60 ?</code> Yes."}, {"owner": {"reputation": 69, "user_id": 3519407, "user_type": "registered", "profile_image": "https://graph.facebook.com/1152430118/picture?type=large", "display_name": "Nanev", "link": "https://stackoverflow.com/users/3519407/nanev"}, "edited": false, "score": 1, "creation_date": 1536763011, "post_id": 52297643, "comment_id": 91543300, "body": "Check this out: <a href=\"https://stackoverflow.com/questions/11213326/how-to-convert-a-string-variable-containing-time-to-time-t-type-in-c\" title=\"how to convert a string variable containing time to time t type in c\">stackoverflow.com/questions/11213326/&hellip;</a>"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 1, "creation_date": 1536763730, "post_id": 52297643, "comment_id": 91543734, "body": "@YSC I&#39;m unsure about the dupe.  There is no need at all to convert the string into a <code>time_t</code> to just have to do more math to convert it&#39;s hours and minutes into total minutes.  We can do that directly from the sting like <code>((time[0] - &#39;0&#39;) * 600) + ((time[1] - &#39;0&#39;) * 60) + ((time[3] - &#39;0&#39;) * 10) + (time[4] - &#39;0&#39;)</code>"}, {"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 0, "creation_date": 1536763889, "post_id": 52297643, "comment_id": 91543835, "body": "That&#39;s true, it might answer OP&#39;s question, but it is no certainty."}], "answers": [{"tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": true, "score": 1, "last_activity_date": 1536764414, "creation_date": 1536764414, "answer_id": 52298213, "question_id": 52297643, "link": "https://stackoverflow.com/questions/52297643/does-there-has-any-easy-way-to-convert-0200-to-minutes-say-120/52298213#52298213", "title": "Does there has any easy way to convert &quot;02:00&quot; to minutes say 120?", "body": "<p>You don't need to split anything here.  In <code>\"12:34\"</code> the <code>1</code> represents the tens of hours, the <code>2</code> is how many single hours, the <code>3</code> is the tens of minutes and the <code>4</code> is the single minutes.  Knowing that you can multiply each position by how many minutes it represents.</p>\n\n<p>If we have</p>\n\n<pre><code>std::sting time = \"12:34\"\n</code></pre>\n\n<p>then <code>(time[0] - '0') * 600</code> would give use 600 minutes (<code>time[0] - '0'</code> converts the character <code>'1'</code> to the number <code>1</code>).  <code>(time[1] - '0') * 60</code> would be 120 more minutes.  If we keep going we'd have</p>\n\n<pre><code>((time[0] - '0') * 600) + ((time[1] - '0') * 60) + ((time[3] - '0') * 10) + (time[4] - '0')\n</code></pre>\n\n<p>And all of that added up gives use 754 minutes.  You can put that into a function if you have to do it multiple times.</p>\n"}, {"tags": [], "owner": {"reputation": 19779, "user_id": 878532, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/5fbebb625a289267abd098c0e676c760?s=128&d=identicon&r=PG", "display_name": "Klaus", "link": "https://stackoverflow.com/users/878532/klaus"}, "is_accepted": false, "score": 1, "last_activity_date": 1536765677, "creation_date": 1536765677, "answer_id": 52298619, "question_id": 52297643, "link": "https://stackoverflow.com/questions/52297643/does-there-has-any-easy-way-to-convert-0200-to-minutes-say-120/52298619#52298619", "title": "Does there has any easy way to convert &quot;02:00&quot; to minutes say 120?", "body": "<p>Maybe you like this one: </p>\n\n<pre><code>std::tm tm = {}; \nstd::stringstream ss(\"20:05\");\nss &gt;&gt; std::get_time(&amp;tm, \"%H:%M\");\nstd::cout &lt;&lt; tm.tm_hour * 60 + tm.tm_min &lt;&lt; std::endl;\n</code></pre>\n\n<p>Maybe it is much to much overhead using this big library calls in your case, but maybe you have to deal with more complex time strings.</p>\n"}, {"tags": [], "owner": {"reputation": 177852, "user_id": 576911, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2a2941970f141aad669d13375dc57c4f?s=128&d=identicon&r=PG", "display_name": "Howard Hinnant", "link": "https://stackoverflow.com/users/576911/howard-hinnant"}, "is_accepted": false, "score": 2, "last_activity_date": 1536847855, "last_edit_date": 1536847855, "creation_date": 1536782564, "answer_id": 52302617, "question_id": 52297643, "link": "https://stackoverflow.com/questions/52297643/does-there-has-any-easy-way-to-convert-0200-to-minutes-say-120/52302617#52302617", "title": "Does there has any easy way to convert &quot;02:00&quot; to minutes say 120?", "body": "<p>Here's how to do it using <a href=\"https://github.com/HowardHinnant/date\" rel=\"nofollow noreferrer\">Howard Hinnant's date/time library</a>:</p>\n\n<pre><code>#include \"date/date.h\"\n#include &lt;cassert&gt;\n#include &lt;iostream&gt;\n#include &lt;sstream&gt;\n\nint\nmain()\n{\n    using namespace date;\n    using namespace std;\n    using namespace std::chrono;\n    istringstream in{\"02:00\"};\n    minutes m;\n    in &gt;&gt; parse(\"%H:%M\", m);\n    assert(m == 120min);\n}\n</code></pre>\n\n<p>Additionally this should port to the upcoming C++20 spec by simply removing <code>#include \"date/date.h\"</code> and <code>using namespace date;</code>.</p>\n\n<p>The advantage of this technique includes:</p>\n\n<ul>\n<li>No need to manually split the string</li>\n<li>No need for manual conversion from hours to minutes</li>\n<li>The result goes straight into the <code>chrono</code> type safe units</li>\n<li>No need to dip down to the old C API</li>\n</ul>\n"}], "owner": {"reputation": 104, "user_id": 7877309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf3953b47a6aa5d5b8058e0bbf665280?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Young", "link": "https://stackoverflow.com/users/7877309/thomas-young"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 116, "favorite_count": 0, "closed_date": 1537118266, "accepted_answer_id": 52298213, "answer_count": 3, "score": 0, "last_activity_date": 1536847855, "creation_date": 1536762734, "question_id": 52297643, "link": "https://stackoverflow.com/questions/52297643/does-there-has-any-easy-way-to-convert-0200-to-minutes-say-120", "closed_reason": "Duplicate", "title": "Does there has any easy way to convert &quot;02:00&quot; to minutes say 120?", "body": "<p>Does there has any easy way to convert \"02:00\" to minutes say 120 ?</p>\n\n<p>Do we have to split it to 2 and then * 60 ?</p>\n"}, {"tags": ["c++", "opencv", "image-processing"], "comments": [{"owner": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "edited": false, "score": 1, "creation_date": 1536771779, "post_id": 52297602, "comment_id": 91548128, "body": "Please, provide a proper <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> -- complete (as in nothing is missing, such as include statements), minimal (as in there&#39;s only the code necessary to demonstrate/reproduce the issue -- certainly not the case here). | &quot;it doesn&#39;t work&quot; is a poor description of the problem. Provide more details (do you get an error message? does the computer explode? etc.)"}, {"owner": {"reputation": 3, "user_id": 10224234, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ETBtRDgjTOk/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7qrNQTGoM4La9AA9j4ybKlBIeabyQ/mo/photo.jpg?sz=128", "display_name": "Yasmine Mrd", "link": "https://stackoverflow.com/users/10224234/yasmine-mrd"}, "reply_to_user": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "edited": false, "score": 0, "creation_date": 1536785810, "post_id": 52297602, "comment_id": 91554390, "body": "@Dan Ma\u0161ek  yes i get an error message"}, {"owner": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "edited": false, "score": 0, "creation_date": 1536786451, "post_id": 52297602, "comment_id": 91554590, "body": "What does the error message say? :) And what&#39;s the shape of, and the data type of the elements of <code>nrmimg</code>, and <code>dst</code> at the time you call <code>bitwise_and</code>? I highly suspect that <code>nrmimg</code> is 3 channel, and <code>dst</code> is 1 channel. Both input images must have the same size and type (including depth/channel count)."}, {"owner": {"reputation": 3, "user_id": 10224234, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ETBtRDgjTOk/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7qrNQTGoM4La9AA9j4ybKlBIeabyQ/mo/photo.jpg?sz=128", "display_name": "Yasmine Mrd", "link": "https://stackoverflow.com/users/10224234/yasmine-mrd"}, "reply_to_user": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "edited": false, "score": 0, "creation_date": 1536814980, "post_id": 52297602, "comment_id": 91561007, "body": "yes nrmlimg is 3 channel and dst is just the red channel"}], "owner": {"reputation": 3, "user_id": 10224234, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ETBtRDgjTOk/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7qrNQTGoM4La9AA9j4ybKlBIeabyQ/mo/photo.jpg?sz=128", "display_name": "Yasmine Mrd", "link": "https://stackoverflow.com/users/10224234/yasmine-mrd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 52, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1539821897, "creation_date": 1536762595, "last_edit_date": 1539821897, "question_id": 52297602, "link": "https://stackoverflow.com/questions/52297602/combine-red-channel-with-the-normalized-image", "title": "combine red channel with the normalized image", "body": "<p>After using the Hough transform, I get this result (<code>image 1</code>)<br></p>\n\n<p><a href=\"https://i.stack.imgur.com/PsY0p.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/PsY0p.png\" alt=\"image\"></a><br></p>\n\n<p>Now I want to get this detected area (area detected in green channel) in the normalized image.<br></p>\n\n<p>This exactly what I want to do (<code>image 2</code>) <a href=\"https://i.stack.imgur.com/LvxC7.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/LvxC7.png\" alt=\"steps\"></a></p>\n\n<p>I use <code>bitwise_and</code> but it doesn't work </p>\n\n<p>Here the code:</p>\n\n<pre><code>/// Global variables\nMat dst, outimg, nrmimg;\n\nint morph_elem = 0;\nint morph_size = 0;\nint morph_operator = 0;\nint const max_operator = 4;\nint const max_elem = 2;\nint const max_kernel_size = 21;\nMat red, red1, blue, green;\n\nchar* window_name = \"Morphology Transformations Demo\";\n\nint main() {\n    //read image\n    cv::Mat img = imread(\"C:\\\\Users\\\\ASUS\\\\Desktop\\\\eye.jpg \", CV_LOAD_IMAGE_COLOR);\n\n    cv::imshow(\"thinng10\", img);\n    // resize\n    cv::resize(img, outimg, cv::Size(720, 576));\n\n    cv::imshow(\"resize\", outimg);\n    // normalisation\n    cv::normalize(outimg, nrmimg, 0, 255, NORM_MINMAX, -1);\n\n    cv::imshow(\"normz\", nrmimg);\n    // SPlit\n    Mat bgr[3];   //destination array\n    split(nrmimg, bgr);//split source  \n\n    blue.push_back(bgr[0]);\n    green.push_back(bgr[1]);\n    red.push_back(bgr[2]);\n    cv::imshow(\"green\", green);\n    cv::imshow(\"red\", red);\n\n    // pass-low filters\n    Mat plimg;\n    float sum;\n\n    // define the kernel\n    float Kernel[9][9] = {\n        { 1 / 9.0, 1 / 9.0, 1 / 9.0,1 / 9.0, 1 / 9.0, 1 / 9.0,1 / 9.0, 1 / 9.0, 1 / 9.0 },\n        { 1 / 9.0, 1 / 9.0, 1 / 9.0,1 / 9.0, 1 / 9.0, 1 / 9.0,1 / 9.0, 1 / 9.0, 1 / 9.0 },\n        { 1 / 9.0, 1 / 9.0, 1 / 9.0,1 / 9.0, 1 / 9.0, 1 / 9.0,1 / 9.0, 1 / 9.0, 1 / 9.0 },\n        { 1 / 9.0, 1 / 9.0, 1 / 9.0,1 / 9.0, 1 / 9.0, 1 / 9.0,1 / 9.0, 1 / 9.0, 1 / 9.0 },\n        { 1 / 9.0, 1 / 9.0, 1 / 9.0,1 / 9.0, 1 / 9.0, 1 / 9.0,1 / 9.0, 1 / 9.0, 1 / 9.0 },\n        { 1 / 9.0, 1 / 9.0, 1 / 9.0,1 / 9.0, 1 / 9.0, 1 / 9.0,1 / 9.0, 1 / 9.0, 1 / 9.0 },\n        { 1 / 9.0, 1 / 9.0, 1 / 9.0,1 / 9.0, 1 / 9.0, 1 / 9.0,1 / 9.0, 1 / 9.0, 1 / 9.0 },\n        { 1 / 9.0, 1 / 9.0, 1 / 9.0,1 / 9.0, 1 / 9.0, 1 / 9.0,1 / 9.0, 1 / 9.0, 1 / 9.0 },\n        { 1 / 9.0, 1 / 9.0, 1 / 9.0,1 / 9.0, 1 / 9.0, 1 / 9.0,1 / 9.0, 1 / 9.0, 1 / 9.0 }\n    };\n    plimg = green.clone();\n    for (int y = 0; y &lt; green.rows; y++)\n        for (int x = 0; x &lt; green.cols; x++)\n            plimg.at&lt;uchar&gt;(y, x) = 0.0;\n    //convolution operation\n    for (int y = 1; y &lt; green.rows - 1; y++) {\n        for (int x = 1; x &lt; green.cols - 1; x++) {\n            sum = 0.0;\n            for (int k = -1; k &lt;= 1;k++) {\n                for (int j = -1; j &lt;= 1; j++) {\n                    sum = sum + Kernel[j + 1][k + 1] * green.at&lt;uchar&gt;(y - j, x - k);\n                }\n            }\n            plimg.at&lt;uchar&gt;(y, x) = sum;\n        }\n    }\n\n    namedWindow(\"pass-low-image\");\n    imshow(\"pass-low-image\", plimg);\n\n    /// transformation de fourier \n    Mat padded;                            //expand input image to optimal size\n    int m = getOptimalDFTSize(plimg.rows);\n    int n = getOptimalDFTSize(plimg.cols); // on the border add zero values\n    copyMakeBorder(green, padded, 0, m - plimg.rows, 0, n - plimg.cols, BORDER_CONSTANT, Scalar::all(0));\n\n    Mat planes[] = { Mat_&lt;float&gt;(padded), Mat::zeros(padded.size(), CV_32F) };\n    Mat complexI;\n    merge(planes, 2, complexI);         // Add to the expanded another plane with zeros\n\n    dft(complexI, complexI);            // this way the result may fit in the source matrix\n\n                                        // compute the magnitude and switch to logarithmic scale\n                                        // =&gt; log(1 + sqrt(Re(DFT(I))^2 + Im(DFT(I))^2))\n    split(complexI, planes);                   // planes[0] = Re(DFT(I), planes[1] = Im(DFT(I))\n    magnitude(planes[0], planes[1], planes[0]);// planes[0] = magnitude\n    Mat magI = planes[0];\n\n    magI += Scalar::all(1);                    // switch to logarithmic scale\n    log(magI, magI);\n\n    // crop the spectrum, if it has an odd number of rows or columns\n    magI = magI(Rect(0, 0, magI.cols &amp; -2, magI.rows &amp; -2));\n\n    // rearrange the quadrants of Fourier image  so that the origin is at the image center\n    int cx = magI.cols / 2;\n    int cy = magI.rows / 2;\n\n    Mat q0(magI, Rect(0, 0, cx, cy));   // Top-Left - Create a ROI per quadrant\n    Mat q1(magI, Rect(cx, 0, cx, cy));  // Top-Right\n    Mat q2(magI, Rect(0, cy, cx, cy));  // Bottom-Left\n    Mat q3(magI, Rect(cx, cy, cx, cy)); // Bottom-Right\n\n    Mat tmp;                           // swap quadrants (Top-Left with Bottom-Right)\n    q0.copyTo(tmp);\n    q3.copyTo(q0);\n    tmp.copyTo(q3);\n\n    q1.copyTo(tmp);                    // swap quadrant (Top-Right with Bottom-Left)\n    q2.copyTo(q1);\n    tmp.copyTo(q2);\n\n    normalize(magI, magI, 0, 1, CV_MINMAX); // Transform the matrix with float values into a\n                                            // viewable image form (float between values 0 and 1).\n                                            // Show the result\n    imshow(\"spectrum magnitude\", magI);\n    Mat inverseTransform1;\n\n    dft(magI, inverseTransform1, DFT_INVERSE | DFT_REAL_OUTPUT);\n\n    cv::Mat out1, out2;\n    inverseTransform1.convertTo(out1, CV_8U);\n\n    namedWindow(\"result image 1\");\n    imshow(\"result image 1\", out1);\n\n    double thresh = 50;\n    double maxValue = 255;\n\n    // ROI AUTRE METHODE \n    int px2 = 500;\n    int py2 = 250;\n    Point p1 = cv::Point(px2, py2);\n    Mat maskcirc = cv::Mat::zeros(red.size(), red.type());\n    cv::circle(maskcirc, p1, 200, 50, -1);\n    Mat image2(red.size(), CV_32F);\n    red.copyTo(image2, maskcirc);\n    imshow(\"img\", image2);\n\n    //closing\n    Mat element = getStructuringElement(MORPH_ELLIPSE, Size(6, 6));\n    Mat closeImg;\n\n    morphologyEx(image2, closeImg, MORPH_CLOSE, element);\n    namedWindow(\"CLOSE\");\n    imshow(\"CLOSE\", closeImg);\n\n    Mat openImg;\n\n    morphologyEx(closeImg, openImg, MORPH_OPEN, element);\n    namedWindow(\"open\");\n    imshow(\"open\", openImg);\n    //filtre prewitt\n\n    //GaussianBlur(openImg, openImg, Size(9,9), 0, 0, BORDER_DEFAULT);\n    //GaussianBlur(openImg, openImg, Size(9, 9), 0, 0);\n    vector&lt;Vec3f&gt; circles;\n\n    /// Apply the Hough Transform to find the circles;\n    HoughCircles(openImg, circles, CV_HOUGH_GRADIENT, 1,1,67, 17,35, 80);\n\n    /// Draw the circles detected\n    /*for (size_t i = 0; i &lt; circles.size(); i++)\n    {\n        Point center(cvRound(circles[i][0]), cvRound(circles[i][1]));\n        int radius = cvRound(circles[i][2]);\n        // circle center\n        circle(openImg, center, 1, Scalar(255, 255, 255), -1, 8, 0);\n        // circle outline\n        circle(openImg, center, radius, Scalar(255, 255, 255), 1, 4, 0);\n\n    }*/\n    Rect bounding_rect;\n    // remember biggest radius\n    float radiusBiggest = 0;\n    // remember the index of the biggest radius / circle\n    int indexBiggest = -1;\n    // loop through all circles\n    for (size_t i = 0; i &lt; circles.size(); i++)\n    {\n        // get the radius\n        float radius = circles[i][2];\n        // check if this radius is bigger than any previous\n        if (radius &gt; radiusBiggest)\n        {\n            // this radius/circle is the biggest so far. remember it\n            radiusBiggest = radius;\n            indexBiggest = i;\n        }\n    }\n    // if we found a circle then draw it\n    if (indexBiggest != -1)\n    {\n        Point center(cvRound(circles[indexBiggest][0]), cvRound(circles[indexBiggest][1]));\n        int radius = cvRound(circles[indexBiggest][2]);\n        // circle center\n        circle(openImg, center, 1, Scalar(255, 255, 255), -1, 8, 0);\n        // circle outline\n        circle(openImg, center,radius, Scalar(255, 255, 255), 1, 4, 0);\n\n        cv::Mat mask = cv::Mat::zeros(openImg.rows,openImg.cols, CV_8UC1);\n        circle(mask, center,radius, Scalar(255, 255, 255), -1, 8, 0); //-1 means filled\n        openImg.copyTo(dst, mask);\n    }\n\n    /// Show your results\n    namedWindow(\"Hough Circle Transform Demo\", CV_WINDOW_AUTOSIZE);\n    imshow(\"Hough Circle Transform Demo\", dst);\n\n    Mat C;\n    bitwise_and(nrmimg, dst, C);\n\n    namedWindow(\"AND\", CV_WINDOW_AUTOSIZE);\n    imshow(\"AND\", C);\n\n    cv::waitKey(0);\n\n    return 0;\n}\n</code></pre>\n\n<p>I use <code>bitwise_and</code> but it doesn't work  </p>\n"}, {"tags": ["c++", "iterator", "c++17"], "comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1536762729, "post_id": 52297521, "comment_id": 91543135, "body": "<code>transform_iterator</code> (from boost or range library)."}, {"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 0, "creation_date": 1536762736, "post_id": 52297521, "comment_id": 91543142, "body": "If you could make a <a href=\"https://www.boost.org/doc/libs/1_66_0/libs/iterator/doc/transform_iterator.html\" rel=\"nofollow noreferrer\">transformation</a> <a href=\"https://codereview.stackexchange.com/questions/155866/preprocessing-iterator\">iterator</a> <code>tit</code>, you could use <code>d(tit, end(v))</code>."}], "answers": [{"tags": [], "owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "is_accepted": true, "score": 2, "last_activity_date": 1536762766, "last_edit_date": 1536762766, "creation_date": 1536762748, "answer_id": 52297649, "question_id": 52297521, "link": "https://stackoverflow.com/questions/52297521/create-a-discrete-distribution-from-transformed-container-elements/52297649#52297649", "title": "Create a discrete distribution from transformed container elements", "body": "<p>Something like <a href=\"https://www.boost.org/doc/libs/1_53_0/libs/iterator/doc/transform_iterator.html\" rel=\"nofollow noreferrer\"><code>boost::transform_iterator</code></a> can do that. You'll just need to create those from the vector's iterators.</p>\n"}, {"tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": false, "score": 1, "last_activity_date": 1536764347, "last_edit_date": 1536764347, "creation_date": 1536762834, "answer_id": 52297689, "question_id": 52297521, "link": "https://stackoverflow.com/questions/52297521/create-a-discrete-distribution-from-transformed-container-elements/52297689#52297689", "title": "Create a discrete distribution from transformed container elements", "body": "<p>If you can add a <code>operator double</code> to <code>T</code> then you can have that return <code>f()</code> and then use the iterator constructor of <code>std::discrete_distribution</code> like</p>\n\n<pre><code>struct Foo\n{\n    operator double() const { return f(); }\n    double f() const { return 1.0; }\n};\n\nint main()\n{\n    std::vector&lt;Foo&gt; foo(10);\n    std::discrete_distribution dd{foo.begin(), foo.end()};\n}\n</code></pre>\n"}], "owner": {"reputation": 14402, "user_id": 547231, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/4dbfd610336a9667e0b11eac69b9cc34?s=128&d=identicon&r=PG", "display_name": "0xbadf00d", "link": "https://stackoverflow.com/users/547231/0xbadf00d"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "accepted_answer_id": 52297649, "answer_count": 2, "score": 3, "last_activity_date": 1536764630, "creation_date": 1536762349, "question_id": 52297521, "link": "https://stackoverflow.com/questions/52297521/create-a-discrete-distribution-from-transformed-container-elements", "title": "Create a discrete distribution from transformed container elements", "body": "<p>Suppose we have a <code>std::vector&lt;T&gt; v</code> and <code>T</code> is a class with a member function <code>U T::f() const</code>, where <code>U</code> is convertible to <code>double</code>. I want to create a <code>std::discrete_distribution&lt;&gt; d(/* v[0].f(), ..., v[v.size() - 1].f() */)</code>. Is this possible without creating a new container containing the values <code>v[0].f(), ..., v[v.size() - 1].f()</code>?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 0, "creation_date": 1536762084, "post_id": 52297406, "comment_id": 91542695, "body": "What could you do to check that hypothesis?"}, {"owner": {"reputation": 173, "user_id": 8368058, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b814ec6552a907455c035926af8fb876?s=128&d=identicon&r=PG&f=1", "display_name": "NAlexP", "link": "https://stackoverflow.com/users/8368058/nalexp"}, "reply_to_user": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 0, "creation_date": 1536762148, "post_id": 52297406, "comment_id": 91542747, "body": "Remove the read from file thingie, and hard code an array to get sorted. But why would I test something that already has been tested?"}, {"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 0, "creation_date": 1536762187, "post_id": 52297406, "comment_id": 91542775, "body": "So you <i>know</i> it&#39;s from the file reading part. How could you investigate that part?"}, {"owner": {"reputation": 173, "user_id": 8368058, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b814ec6552a907455c035926af8fb876?s=128&d=identicon&r=PG&f=1", "display_name": "NAlexP", "link": "https://stackoverflow.com/users/8368058/nalexp"}, "reply_to_user": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 0, "creation_date": 1536762252, "post_id": 52297406, "comment_id": 91542820, "body": "I don&#39;t know that."}, {"owner": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "edited": false, "score": 0, "creation_date": 1536762266, "post_id": 52297406, "comment_id": 91542835, "body": "If you look at the documentation for <code>open</code> you should be able to figure out how to check for errors. ETA: what if <code>fin.is_open()</code> isn&#39;t true? What are you sorting?"}, {"owner": {"reputation": 173, "user_id": 8368058, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b814ec6552a907455c035926af8fb876?s=128&d=identicon&r=PG&f=1", "display_name": "NAlexP", "link": "https://stackoverflow.com/users/8368058/nalexp"}, "edited": false, "score": 0, "creation_date": 1536762344, "post_id": 52297406, "comment_id": 91542896, "body": "Where can I find that? Also, could the problem be the fact that I did not close the file?"}, {"owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 1, "creation_date": 1536762389, "post_id": 52297406, "comment_id": 91542926, "body": "@NAlexP You did close the file, the destructor did that for you."}, {"owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 1, "creation_date": 1536762440, "post_id": 52297406, "comment_id": 91542951, "body": "@NAlexP Always the most likely reason for these problems is that either a) the file isn&#39;t where you think it is or b) the program isn&#39;t looking for the file where you think it is."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 2, "creation_date": 1536762462, "post_id": 52297406, "comment_id": 91542969, "body": "<i><code>for (i = 1; i &lt;= siz; i++)</code></i>. C++ uses 0-indexing, not 1-indexing. (so you have out of bound access leading to <b>U</b>ndefined <b>B</b>ehaviour)."}, {"owner": {"reputation": 173, "user_id": 8368058, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b814ec6552a907455c035926af8fb876?s=128&d=identicon&r=PG&f=1", "display_name": "NAlexP", "link": "https://stackoverflow.com/users/8368058/nalexp"}, "edited": false, "score": 0, "creation_date": 1536762551, "post_id": 52297406, "comment_id": 91543025, "body": "Thanks for the tip, Jarod. I only used that to see if the sort actually works, I started from 0 in the other places. John, does the file have to be in the same folder as the project?"}, {"owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 0, "creation_date": 1536762573, "post_id": 52297406, "comment_id": 91543040, "body": "@NAlexP I&#39;ve just noticed &#39;Note:the text files are not in the same folder as the project, but in a subfolder.&#39; that&#39;s the problem, add the subfolder to the file name in the program, or move the file."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1536762585, "post_id": 52297406, "comment_id": 91543045, "body": "Same as working directory (which might be specified in most IDE)."}, {"owner": {"reputation": 706, "user_id": 4070330, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5de272559ba2ec727fe9b3108afa222f?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Kashpur", "link": "https://stackoverflow.com/users/4070330/andrew-kashpur"}, "edited": false, "score": 1, "creation_date": 1536762607, "post_id": 52297406, "comment_id": 91543061, "body": "slightly offtopic, but: you can copy content of file into std::vector using std::copy with 1 line of code, and sort vector with std::sort - another line of code. Doing it this way you practically have no room for mistake/error."}, {"owner": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "edited": false, "score": 0, "creation_date": 1536762667, "post_id": 52297406, "comment_id": 91543095, "body": "I think the important question is, what happens if the file isn&#39;t open?"}, {"owner": {"reputation": 173, "user_id": 8368058, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b814ec6552a907455c035926af8fb876?s=128&d=identicon&r=PG&f=1", "display_name": "NAlexP", "link": "https://stackoverflow.com/users/8368058/nalexp"}, "reply_to_user": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 0, "creation_date": 1536762682, "post_id": 52297406, "comment_id": 91543106, "body": "@john can you please answer that so I can give you your internet points?"}, {"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "reply_to_user": {"reputation": 10008, "user_id": 462006, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/37peF.jpg?s=128&g=1", "display_name": "scrappedcola", "link": "https://stackoverflow.com/users/462006/scrappedcola"}, "edited": false, "score": 0, "creation_date": 1536763065, "post_id": 52297406, "comment_id": 91543334, "body": "@scrappedcola cplusplus.com is often outdated, incomplete, or plain wrong. Give a try to cppreference.com, you won&#39;t go back ;)"}, {"owner": {"reputation": 10008, "user_id": 462006, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/37peF.jpg?s=128&g=1", "display_name": "scrappedcola", "link": "https://stackoverflow.com/users/462006/scrappedcola"}, "reply_to_user": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 0, "creation_date": 1536764957, "post_id": 52297406, "comment_id": 91544489, "body": "@YSC Good to know. The last reference I used for C++ was the Stroustrup book (before web was a thing), so in general my C++ references are dated."}], "answers": [{"tags": [], "owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "is_accepted": false, "score": 1, "last_activity_date": 1536762666, "creation_date": 1536762666, "answer_id": 52297628, "question_id": 52297406, "link": "https://stackoverflow.com/questions/52297406/bubble-sort-read-from-file-generates-random-numbers/52297628#52297628", "title": "Bubble sort read from file generates random numbers", "body": "<p>In case that file cannot be opened or reading fails in middle your sorting function access unitialized data and you get undefined behavior. So you can improve your code:</p>\n\n<p>1 Initialize your data - <code>int a[1000] = {}</code>;</p>\n\n<p>2 If file is not opened provide error message and exit</p>\n\n<pre><code>ifstream fin(\"rand1k.txt\");\nif( !fin ) {\n    std::cerr &lt;&lt; \"error: cannot open file\" &lt;&lt; std::endl;\n    return 100; // or whatever error code you prefer\n}\n</code></pre>\n\n<p>3 Check that each input is successful:</p>\n\n<pre><code>    for(i=0;i&lt;1000;i++) {\n        fin&gt;&gt;a[i];\n        if( !fin ) {\n            std::cerr &lt;&lt; \"error on reading \" &lt;&lt; i &lt;&lt; \" element\" &lt;&lt; std::endl;\n            return 101; // or whatever error code you prefer\n        }\n    }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 173, "user_id": 8368058, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b814ec6552a907455c035926af8fb876?s=128&d=identicon&r=PG&f=1", "display_name": "NAlexP", "link": "https://stackoverflow.com/users/8368058/nalexp"}, "is_accepted": false, "score": 0, "last_activity_date": 1536762991, "creation_date": 1536762991, "answer_id": 52297741, "question_id": 52297406, "link": "https://stackoverflow.com/questions/52297406/bubble-sort-read-from-file-generates-random-numbers/52297741#52297741", "title": "Bubble sort read from file generates random numbers", "body": "<p>The problem was indeed that I did not provide a path to a file that was not in the same work directory as my project. Thank you guys.</p>\n"}], "owner": {"reputation": 173, "user_id": 8368058, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b814ec6552a907455c035926af8fb876?s=128&d=identicon&r=PG&f=1", "display_name": "NAlexP", "link": "https://stackoverflow.com/users/8368058/nalexp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 151, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1536762991, "creation_date": 1536762037, "last_edit_date": 1536762371, "question_id": 52297406, "link": "https://stackoverflow.com/questions/52297406/bubble-sort-read-from-file-generates-random-numbers", "title": "Bubble sort read from file generates random numbers", "body": "<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\nusing namespace std;\n\nint bubble(int arr[], int siz)\n{\n    int i;\n    int sortat;\n    do\n    {\n        sortat = 1;\n        for (i = 0; i &lt;= siz-1; i++)\n        {\n            if (arr[i] &gt; arr[i+1])\n            {\n                int aux = arr[i];\n                arr[i] = arr[i+1];\n                arr[i+1] = aux;\n                sortat = 0;\n            }\n        }\n    }\n    while(sortat == 0);\n    for (i = 1; i &lt;= siz; i++)\n        cout&lt;&lt;arr[i]&lt;&lt;\" \";\n    return 0;\n}\n\nint main()\n{\n    int a[1000];\n    int i;\n    ifstream fin;\n    fin.open(\"rand1k.txt\");\n    if(fin.is_open())\n    {\n        for(i=0;i&lt;1000;i++)\n            fin&gt;&gt;a[i];\n    }\n    bubble(a,1000);\n}\n</code></pre>\n\n<p>I believe the problem lies with readin from the text file, as the sort worked really well before I added that.\nNote:the text files are not in the same folder as the project, but in a subfolder.</p>\n"}, {"tags": ["c++", "qt", "widget"], "comments": [{"owner": {"reputation": 1140, "user_id": 9252020, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PDrj2.jpg?s=128&g=1", "display_name": "Rhathin", "link": "https://stackoverflow.com/users/9252020/rhathin"}, "edited": false, "score": 2, "creation_date": 1536761792, "post_id": 52297273, "comment_id": 91542463, "body": "You should use layouts. You can read more about them <a href=\"http://doc.qt.io/qt-5/layout.html\" rel=\"nofollow noreferrer\">here</a>."}, {"owner": {"reputation": 117, "user_id": 9783010, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mtG20.png?s=128&g=1", "display_name": "Flone", "link": "https://stackoverflow.com/users/9783010/flone"}, "reply_to_user": {"reputation": 1140, "user_id": 9252020, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PDrj2.jpg?s=128&g=1", "display_name": "Rhathin", "link": "https://stackoverflow.com/users/9252020/rhathin"}, "edited": false, "score": 0, "creation_date": 1536762620, "post_id": 52297273, "comment_id": 91543068, "body": "@Rhathin I know what layout is but how do I use it in this case? The problem is that I need to put child widget in any place (and move it anywere, for ex. move child widget to 1 pixel to right) of parent widget but layouts place widgets not how I want. They place widgets in special order that depends on layout. Or maybe I don&#39;t know something about layouts?"}, {"owner": {"reputation": 8160, "user_id": 1035613, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/b4d6ce44848765d7b02e4309c9efe9bb?s=128&d=identicon&r=PG", "display_name": "Dmitry Sazonov", "link": "https://stackoverflow.com/users/1035613/dmitry-sazonov"}, "edited": false, "score": 0, "creation_date": 1536766052, "post_id": 52297273, "comment_id": 91545133, "body": "1. Custom layout. 2. Custom resize handling."}], "answers": [{"tags": [], "owner": {"reputation": 8919, "user_id": 8873508, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2uDHi.png?s=128&g=1", "display_name": "p-a-o-l-o", "link": "https://stackoverflow.com/users/8873508/p-a-o-l-o"}, "is_accepted": false, "score": 1, "last_activity_date": 1536766084, "creation_date": 1536766084, "answer_id": 52298747, "question_id": 52297273, "link": "https://stackoverflow.com/questions/52297273/how-to-change-the-size-of-child-widget-when-the-parent-size-changes/52298747#52298747", "title": "How to change the size of child widget when the parent size changes?", "body": "<p>Well, the no-layouts solution is quite obvious: override <code>resizeEvent</code> method in your parent and drive the children resizing from there.</p>\n\n<p>On the other hand, keeping the child widget in the parent widget layout would grant it would resize along with its parent automatically, but your issue is: how to set the child widget position to a coordinate of choice? </p>\n\n<p>I suggest a technique. </p>\n\n<p>Say you want the child to move horizontally. Give the parent a <code>QHBoxLayout</code> layout (set the layout margins and spacing properties to <code>0</code>), and add the child to it, so it will take the whole space, horizontally. Then add a <code>QWidget</code> to the same layout, at the child left: this widget will act as a filler. If you want the child <code>x</code> be 42, set the filler <code>width</code> to 42, using its <code>setFixedWidth</code> method, programmatically, or set its minimum and maximum width to 42 from designer.</p>\n\n<p>Obviously, if you have many children, and they can move anywhere (and overlap, maybe) drop layouts altogether and resort to my very first suggestion, because, generally speaking, layouts are intended to keep things anchored to each others, and maybe that's not the case.</p>\n"}, {"comments": [{"owner": {"reputation": 117, "user_id": 9783010, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mtG20.png?s=128&g=1", "display_name": "Flone", "link": "https://stackoverflow.com/users/9783010/flone"}, "edited": false, "score": 0, "creation_date": 1536768697, "post_id": 52298785, "comment_id": 91546671, "body": "I already did this, but without using the resize() method. But now I copied your resizeEvent code. That&#39;s not complete solution. On my child widget there is a diagonal line from top-left to down-right corner (made by QPainter). Child widget placed in center of parent widget. So when I resize parent widget my diagonal line resizes too but it has pivot point in top-left corner."}, {"owner": {"reputation": 117, "user_id": 9783010, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mtG20.png?s=128&g=1", "display_name": "Flone", "link": "https://stackoverflow.com/users/9783010/flone"}, "edited": false, "score": 0, "creation_date": 1536768714, "post_id": 52298785, "comment_id": 91546682, "body": "(continue) When I resize my parent widget and make it smaller in width the line is becoming vertical line and then disappears. I need to move pivot point too in proportion with parent widget. For ex. pivot point is in place that is 20% of parent width. I&#39;m resizing parent to smaller width and pivot point still should be on place that is 20% of new parent width size. And so with height. The question is how do I properly move this pivot point?"}, {"owner": {"reputation": 6908, "user_id": 5366641, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/71e9ba6e3cdac2461999d9c32ad9d507?s=128&d=identicon&r=PG", "display_name": "scopchanov", "link": "https://stackoverflow.com/users/5366641/scopchanov"}, "reply_to_user": {"reputation": 117, "user_id": 9783010, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mtG20.png?s=128&g=1", "display_name": "Flone", "link": "https://stackoverflow.com/users/9783010/flone"}, "edited": false, "score": 0, "creation_date": 1536769178, "post_id": 52298785, "comment_id": 91546898, "body": "@Flone, no, the question is <i>How to change the size of child widget when the parent size changes?</i> If you have another problem, post a new question with enough details for someone to be able to help."}, {"owner": {"reputation": 6908, "user_id": 5366641, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/71e9ba6e3cdac2461999d9c32ad9d507?s=128&d=identicon&r=PG", "display_name": "scopchanov", "link": "https://stackoverflow.com/users/5366641/scopchanov"}, "reply_to_user": {"reputation": 117, "user_id": 9783010, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mtG20.png?s=128&g=1", "display_name": "Flone", "link": "https://stackoverflow.com/users/9783010/flone"}, "edited": false, "score": 0, "creation_date": 1536769395, "post_id": 52298785, "comment_id": 91546987, "body": "@Flone, <i>But now I copied your resizeEvent code. That&#39;s not complete solution</i>. Of course it is not a complete solution. How could it be, when you didn&#39;t provide those details originally. However it is working and demonstrates how to accomplish what you have asked about. Again, if you have another problem, namely <i>how do I properly move this pivot point</i>, ask a new question, targeting this specific issue."}, {"owner": {"reputation": 117, "user_id": 9783010, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mtG20.png?s=128&g=1", "display_name": "Flone", "link": "https://stackoverflow.com/users/9783010/flone"}, "edited": false, "score": 0, "creation_date": 1536769447, "post_id": 52298785, "comment_id": 91547020, "body": "well thanks for the info anyway. I&#39;m glad that you have took your time to answer to such noob as me."}, {"owner": {"reputation": 117, "user_id": 9783010, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mtG20.png?s=128&g=1", "display_name": "Flone", "link": "https://stackoverflow.com/users/9783010/flone"}, "edited": false, "score": 0, "creation_date": 1536769540, "post_id": 52298785, "comment_id": 91547066, "body": "and I know how to move pivot point but I have some problems with it. will see if I fix this thing."}, {"owner": {"reputation": 6908, "user_id": 5366641, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/71e9ba6e3cdac2461999d9c32ad9d507?s=128&d=identicon&r=PG", "display_name": "scopchanov", "link": "https://stackoverflow.com/users/5366641/scopchanov"}, "reply_to_user": {"reputation": 117, "user_id": 9783010, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mtG20.png?s=128&g=1", "display_name": "Flone", "link": "https://stackoverflow.com/users/9783010/flone"}, "edited": false, "score": 0, "creation_date": 1536769927, "post_id": 52298785, "comment_id": 91547223, "body": "@Flone, instead of getting frustrated, please try to understand how it works. It is not about being noob (I never said that). But when you ask on Stack Overflow, you get help with the specific question you have asked, not with all the problems you have with your project. The thing I&#39;ve suggested is perfectly normal. You&#39;ve shared an issue you have, you&#39;ve received some quality answers and comments. Now share the other issue, you have and you will get help from someone for sure. I would be glad to take a look and help if I am able to. But is goes about another question, although connected."}, {"owner": {"reputation": 117, "user_id": 9783010, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mtG20.png?s=128&g=1", "display_name": "Flone", "link": "https://stackoverflow.com/users/9783010/flone"}, "edited": false, "score": 0, "creation_date": 1536770218, "post_id": 52298785, "comment_id": 91547353, "body": "first of all I will try to fix this problem by myself. And maybe then I&#39;m gonna create a new question here."}], "tags": [], "owner": {"reputation": 6908, "user_id": 5366641, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/71e9ba6e3cdac2461999d9c32ad9d507?s=128&d=identicon&r=PG", "display_name": "scopchanov", "link": "https://stackoverflow.com/users/5366641/scopchanov"}, "is_accepted": true, "score": 0, "last_activity_date": 1536766501, "last_edit_date": 1592644375, "creation_date": 1536766181, "answer_id": 52298785, "question_id": 52297273, "link": "https://stackoverflow.com/questions/52297273/how-to-change-the-size-of-child-widget-when-the-parent-size-changes/52298785#52298785", "title": "How to change the size of child widget when the parent size changes?", "body": "<h1>Cause</h1>\n<p>To automaticaly respond to the size changes of its parent widget, a child widget has to be added to its layout.</p>\n<h1>Solution</h1>\n<p>Since you do not want to use automatic layout, you have to resize the child widget manually. For that purpose reimplement <code>QWidget::resizeEvent</code> in your custom widget.</p>\n<h1>Example</h1>\n<p>Provided you have a pointer to your child widget <code>m_child</code> and this child is already positioned and resized, e.g. something like that:</p>\n<pre><code>m_child-&gt;move(10, 20);\nm_child-&gt;resize(60, 40);\n</code></pre>\n<p>a possible implementation of the <code>resizeEvent</code>, preserving the margins, i.e. the distance between the edges of the child and the edges of the parent, could be the following:</p>\n<pre><code>void ParentWidget::resizeEvent(QResizeEvent *event)\n{\n    QWidget::resizeEvent(event);\n\n    int oldWidth = event-&gt;oldSize().width();\n\n    if (oldWidth &gt;= 0)\n        m_child-&gt;resize(m_child-&gt;width() + event-&gt;size().width() - oldWidth,\n                        m_child-&gt;height() + event-&gt;size().height() - event-&gt;oldSize().height());\n}\n</code></pre>\n<p>The full code of the example I have prepared for you is available on <a href=\"https://github.com/scopchanov/SO-ParentChildSize\" rel=\"nofollow noreferrer\">GitHub</a>.</p>\n<p><strong>Note:</strong> The reimplementation of the <code>QWidget::paintEvent</code> in the example is purely for demonstration purposes.</p>\n"}], "owner": {"reputation": 117, "user_id": 9783010, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mtG20.png?s=128&g=1", "display_name": "Flone", "link": "https://stackoverflow.com/users/9783010/flone"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1777, "favorite_count": 1, "accepted_answer_id": 52298785, "answer_count": 2, "score": 0, "last_activity_date": 1536766501, "creation_date": 1536761601, "last_edit_date": 1536763122, "question_id": 52297273, "link": "https://stackoverflow.com/questions/52297273/how-to-change-the-size-of-child-widget-when-the-parent-size-changes", "title": "How to change the size of child widget when the parent size changes?", "body": "<p>I have 2 widgets, second widget is child of first one. I thought that if you change the size of the parent widget, the child widget will also change its size, but it's not. I searched the internet for a solution to my problem, but maybe I did not correctly formulate my question when looking for a solution. I did not find a solution and therefore wrote here.</p>\n\n<p>What should I do to make child widget change its size when the parent is resized?</p>\n"}, {"tags": ["c++", "boost"], "comments": [{"owner": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "edited": false, "score": 0, "creation_date": 1536766818, "post_id": 52297195, "comment_id": 91545585, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/25934157/using-gzip-compressor-with-boostiostreamsfiltering-wostream-compiler-error\">using gzip_compressor with boost::iostreams::filtering_wostream, compiler error</a>"}, {"owner": {"reputation": 19147, "user_id": 1031769, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/YIkCC.jpg?s=128&g=1", "display_name": "Searene", "link": "https://stackoverflow.com/users/1031769/searene"}, "reply_to_user": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "edited": false, "score": 0, "creation_date": 1536847806, "post_id": 52297195, "comment_id": 91578376, "body": "@AlanBirtles Thanks for providing a relevant question, I just checked it, but it&#39;s not a duplicate, I added some texts in the question to explain why."}], "owner": {"reputation": 19147, "user_id": 1031769, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/YIkCC.jpg?s=128&g=1", "display_name": "Searene", "link": "https://stackoverflow.com/users/1031769/searene"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 42, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1536847664, "creation_date": 1536761353, "last_edit_date": 1536847664, "question_id": 52297195, "link": "https://stackoverflow.com/questions/52297195/how-to-use-boostiostreamsfiltering-wistream-to-read-a-gz-file-in-utf-16le", "title": "How to use boost::iostreams::filtering_wistream to read a gz file in UTF-16LE?", "body": "<p>I have a file <code>test.txt</code> written in UTF16-LE, whose contents are as follows:</p>\n\n<pre><code>ab\nc\n</code></pre>\n\n<p>Now I compressed it with <code>gz</code> and got a new file <code>test.txt.gz</code>, I want to read this gz file and get the original contents(which is <code>ab</code> and <code>c</code>).</p>\n\n<p>I decided to use <code>boost::iostreams::filtering_wistream</code> to do it. Here is what I've tried.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;boost/iostreams/device/file.hpp&gt;\n#include &lt;boost/iostreams/filtering_stream.hpp&gt;\n#include &lt;boost/iostreams/filter/gzip.hpp&gt;\n#include &lt;codecvt&gt;\n\nint main() {\n    std::wifstream wInputFileStream(\"/tmp/test.txt.gz\");\n    wInputFileStream.imbue(std::locale(wInputFileStream.getloc(), new std::codecvt_utf16&lt;\n            wchar_t, 0x10ffff, static_cast&lt;std::codecvt_mode&gt;(std::little_endian | std::consume_header)&gt;));\n\n    boost::iostreams::filtering_wistream wFilteringInputStream;\n    wFilteringInputStream.push(boost::iostreams::gzip_decompressor());\n    wFilteringInputStream.push(wInputFileStream);\n\n    wchar_t c;\n    wInputFileStream.get(c); // trying to get the first character in the file, as a test\n    std::cout &lt;&lt; c &lt;&lt; std::endl;\n\n    return 0;\n}\n</code></pre>\n\n<p>But it doesn't work, I got a lot of errors, here are some of them.</p>\n\n<pre><code>In file included from /usr/include/boost/iostreams/filtering_streambuf.hpp:17,\n                 from /usr/include/boost/iostreams/filtering_stream.hpp:22,\n                 from /home/searene/CLionProjects/cmake-test/hello.cpp:6:\n/usr/include/boost/iostreams/chain.hpp: In instantiation of \u2018void boost::iostreams::detail::chain_base&lt;Self, Ch, Tr, Alloc, Mode&gt;::push_impl(const T&amp;, std::streamsize, std::streamsize) [with T = boost::iostreams::basic_gzip_decompressor&lt;&gt;; Self = boost::iostreams::chain&lt;boost::iostreams::input, wchar_t, std::char_traits&lt;wchar_t&gt;, std::allocator&lt;wchar_t&gt; &gt;; Ch = wchar_t; Tr = std::char_traits&lt;wchar_t&gt;; Alloc = std::allocator&lt;wchar_t&gt;; Mode = boost::iostreams::input; std::streamsize = long int]\u2019:\n/usr/include/boost/iostreams/chain.hpp:205:5:   required from \u2018void boost::iostreams::detail::chain_base&lt;Self, Ch, Tr, Alloc, Mode&gt;::push(const T&amp;, std::streamsize, std::streamsize, typename boost::disable_if&lt;boost::iostreams::is_std_io&lt;T&gt; &gt;::type*) [with T = boost::iostreams::basic_gzip_decompressor&lt;&gt;; Self = boost::iostreams::chain&lt;boost::iostreams::input, wchar_t, std::char_traits&lt;wchar_t&gt;, std::allocator&lt;wchar_t&gt; &gt;; Ch = wchar_t; Tr = std::char_traits&lt;wchar_t&gt;; Alloc = std::allocator&lt;wchar_t&gt;; Mode = boost::iostreams::input; std::streamsize = long int; typename boost::disable_if&lt;boost::iostreams::is_std_io&lt;T&gt; &gt;::type = void]\u2019\n/usr/include/boost/iostreams/chain.hpp:496:7:   required from \u2018void boost::iostreams::detail::chain_client&lt;Chain&gt;::push_impl(const T&amp;, std::streamsize, std::streamsize) [with T = boost::iostreams::basic_gzip_decompressor&lt;&gt;; Chain = boost::iostreams::chain&lt;boost::iostreams::input, wchar_t, std::char_traits&lt;wchar_t&gt;, std::allocator&lt;wchar_t&gt; &gt;; std::streamsize = long int]\u2019\n/usr/include/boost/iostreams/chain.hpp:484:5:   required from \u2018void boost::iostreams::detail::chain_client&lt;Chain&gt;::push(const T&amp;, std::streamsize, std::streamsize, typename boost::disable_if&lt;boost::iostreams::is_std_io&lt;T&gt; &gt;::type*) [with T = boost::iostreams::basic_gzip_decompressor&lt;&gt;; Chain = boost::iostreams::chain&lt;boost::iostreams::input, wchar_t, std::char_traits&lt;wchar_t&gt;, std::allocator&lt;wchar_t&gt; &gt;; std::streamsize = long int; typename boost::disable_if&lt;boost::iostreams::is_std_io&lt;T&gt; &gt;::type = void]\u2019\n/home/searene/CLionProjects/cmake-test/hello.cpp:16:69:   required from here\n/usr/include/boost/iostreams/chain.hpp:258:9: error: no matching function for call to \u2018std::__cxx11::list&lt;boost::iostreams::detail::linked_streambuf&lt;wchar_t, std::char_traits&lt;wchar_t&gt; &gt;*, std::allocator&lt;boost::iostreams::detail::linked_streambuf&lt;wchar_t, std::char_traits&lt;wchar_t&gt; &gt;*&gt; &gt;::push_back(std::unique_ptr&lt;boost::iostreams::stream_buffer&lt;boost::iostreams::basic_gzip_decompressor&lt;&gt;, std::char_traits&lt;wchar_t&gt;, std::allocator&lt;wchar_t&gt;, boost::iostreams::input&gt;, std::default_delete&lt;boost::iostreams::stream_buffer&lt;boost::iostreams::basic_gzip_decompressor&lt;&gt;, std::char_traits&lt;wchar_t&gt;, std::allocator&lt;wchar_t&gt;, boost::iostreams::input&gt; &gt; &gt;::pointer)\u2019\n         list().push_back(buf.get());\n         ^~~~\n</code></pre>\n\n<p>What have I done wrong? How to make it work?</p>\n\n<hr>\n\n<p>About the duplicate:</p>\n\n<p>I've already checked <a href=\"https://stackoverflow.com/questions/25934157/using-gzip-compressor-with-boostiostreamsfiltering-wostream-compiler-error\">this question</a>, it's different from mine. That question is about how to write, and mine is about how to read. Also, the most important thing is, I cannot hold all the data in a variable when the file I want to read is very large. But for that question, it's not a problem, since it already has a <code>wstring</code> that holds all the data. So the answer to that question isn't helpful to me, either.</p>\n"}, {"tags": ["c++", "windows", "driver", "umdf"], "comments": [{"owner": {"reputation": 23294, "user_id": 6345, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1f5ce0fac6a8d23e6dced87ab200e669?s=128&d=identicon&r=PG", "display_name": "Johann Gerell", "link": "https://stackoverflow.com/users/6345/johann-gerell"}, "edited": false, "score": 0, "creation_date": 1536761562, "post_id": 52297155, "comment_id": 91542295, "body": "How is this question stated too broadly? (votes to close for that reason...)"}, {"owner": {"reputation": 1778, "user_id": 1110642, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/c9330d13cc8dcc109f541b4eed800e8e?s=128&d=identicon&r=PG", "display_name": "arminb", "link": "https://stackoverflow.com/users/1110642/arminb"}, "edited": false, "score": 1, "creation_date": 1537776518, "post_id": 52297155, "comment_id": 91891549, "body": "You are practically writing a user mode application. The name says it all, no reason to overthink. Just do what you would do in a &quot;normal&quot; application."}], "owner": {"reputation": 23294, "user_id": 6345, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1f5ce0fac6a8d23e6dced87ab200e669?s=128&d=identicon&r=PG", "display_name": "Johann Gerell", "link": "https://stackoverflow.com/users/6345/johann-gerell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 280, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1536761240, "creation_date": 1536761240, "question_id": 52297155, "link": "https://stackoverflow.com/questions/52297155/using-the-c-standard-library-in-a-windows-user-mode-driver", "title": "Using the C++ standard library in a Windows User Mode Driver", "body": "<p>I recently got tasked with writing Windows user mode drivers for our devices and have a good grasp of the WDF and UMDF basics, after reading up on the topic and studying the template projects in Visual Studio 2017.</p>\n\n<p>I'm determined to use as much modern C++ as possible, and if that can include the standard library too, then I'll be much happier than if I need to make my own corresponding functionalities.</p>\n\n<p>Are there any best practices around using modern C++ in Windows user mode drivers in general, and using modern C++ <em>standard library</em> features in specific?</p>\n\n<p>What are the pitfalls I need to look out for, that can be circumvented?</p>\n\n<p>Should I avoid it completely? If so, on what grounds?</p>\n"}, {"tags": ["c#", "c++", "windows", "python-3.x", "screenshot"], "comments": [{"owner": {"reputation": 10328, "user_id": 4798077, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/A03gw.jpg?s=128&g=1", "display_name": "Ron Beyer", "link": "https://stackoverflow.com/users/4798077/ron-beyer"}, "edited": false, "score": 0, "creation_date": 1536760984, "post_id": 52297003, "comment_id": 91541930, "body": "Hiding the mouse cursor is easy, you can disable it for as long as the screenshot takes, showing/hiding large boxes may cause a flicker effect, but you can use the same principle... Don&#39;t show the boxes while the screenshot code is running, then show them again after it is complete."}, {"owner": {"reputation": 860, "user_id": 3472951, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2851abe81ca80137d03e427ac38f53f6?s=128&d=identicon&r=PG&f=1", "display_name": "Gareth", "link": "https://stackoverflow.com/users/3472951/gareth"}, "edited": false, "score": 1, "creation_date": 1536761781, "post_id": 52297003, "comment_id": 91542450, "body": "You could also try something with layers. For example, you might have a foreground layer with your rectangle on and then a background layer with your main image on. When you came to capture your image you&#39;d only capture the contents of the background layer, ignoring the foreground and your rectangles."}, {"owner": {"reputation": 4525, "user_id": 9423721, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-58LFQeZ--9E/AAAAAAAAAAI/AAAAAAAAAHg/qzH7iR1C4zs/photo.jpg?sz=128", "display_name": "Markus Dresch", "link": "https://stackoverflow.com/users/9423721/markus-dresch"}, "edited": false, "score": 0, "creation_date": 1536763926, "post_id": 52297003, "comment_id": 91543862, "body": "alright, go ahead and implement it then..."}, {"owner": {"reputation": 111, "user_id": 9772861, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Neria Nabeth", "link": "https://stackoverflow.com/users/9772861/neria-nabeth"}, "reply_to_user": {"reputation": 10328, "user_id": 4798077, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/A03gw.jpg?s=128&g=1", "display_name": "Ron Beyer", "link": "https://stackoverflow.com/users/4798077/ron-beyer"}, "edited": false, "score": 0, "creation_date": 1538663338, "post_id": 52297003, "comment_id": 92230322, "body": "@RonBeyer. Thanks it works. Perhaps you also know how to draw above everything, as I asked also in the question?"}], "owner": {"reputation": 111, "user_id": 9772861, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Neria Nabeth", "link": "https://stackoverflow.com/users/9772861/neria-nabeth"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 314, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1536760799, "creation_date": 1536760799, "last_edit_date": 1592644375, "question_id": 52297003, "link": "https://stackoverflow.com/questions/52297003/draw-on-screen-without-it-to-be-seen-in-a-screenshot", "title": "Draw on screen without it to be seen in a screenshot", "body": "<p>Overall what I want to do is drawing a simple rectangle that will be drawn over everything on the screen (even say, over the task view in windows) in run time, and then when I take a screenshot of the screen in my program code, (I'm currently using mss in python) that the rectangle will not be captured in the image</p>\n<p>I got this idea when I saw that the mouse cursor (when you take a simple screenshot) is invisible in the photo. (as shown)</p>\n<p><a href=\"https://i.stack.imgur.com/5B4CC.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/5B4CC.jpg\" alt=\"enter image description here\" /></a></p>\n<p>I'd love to implement this code if possible in python or if not python then in c++ or even in c#</p>\n"}, {"tags": ["c++", "variant", "boost-variant"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 18, "creation_date": 1536760522, "post_id": 52296889, "comment_id": 91541638, "body": "You seem to be under the impression that <code>std::variant</code>&#39;s template arguments must share a common base. You can store unrelated types in an <code>std::variant</code>."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1536760552, "post_id": 52296889, "comment_id": 91541655, "body": "imho too broad, though the most obvious is that you can put any types into a variant, while you cannot use a <code>Circle</code> and a <code>Rectangle</code> polymorphically, unless they both inherit <code>Shape</code>, thats a small but big difference"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 3, "creation_date": 1536760667, "post_id": 52296889, "comment_id": 91541735, "body": "eg <code>std::variant&lt;int,double,std::string&gt;</code>, no chance to get anywhere close to that via inheritance"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1536760857, "post_id": 52296889, "comment_id": 91541853, "body": "FWIW: <code>Shape process(const Shape&amp; s)</code> isn&#39;t the same as <code>std::variant&lt;Circle, Line, Point&gt; process(const Shape &amp;s)</code> as the former <a href=\"https://stackoverflow.com/questions/274626/what-is-object-slicing\">slices the object</a>.  You need to return by reference/smart pointer/pointer."}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1536760899, "post_id": 52296889, "comment_id": 91541874, "body": "@user463035818 &quot;no chance&quot;: You could define wrapper classes around with common base class. Close to? I&#39;d say so - maybe.... Ugly? Sure..."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1536760961, "post_id": 52296889, "comment_id": 91541915, "body": "@Aconcagua But then you wouldn&#39;t have a <code>std::variant&lt;int,double,std::string&gt;</code> anymore."}, {"owner": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "edited": false, "score": 2, "creation_date": 1536761028, "post_id": 52296889, "comment_id": 91541962, "body": "Nice comparison is here: <a href=\"http://cpptruths.blogspot.com/2018/02/inheritance-vs-stdvariant-based.html\" rel=\"nofollow noreferrer\">Inheritance vs <code>std::variant</code></a>"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "reply_to_user": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1536761098, "post_id": 52296889, "comment_id": 91541999, "body": "@Aconcagua yeah i was expecting someone to disagree. Replace &quot;no chance to get anywhere close to&quot; as &quot;it would be so tedious and not nice that you wouldnt usually consider it as an option&quot; and I guess we can agree ;)"}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1536761697, "post_id": 52296889, "comment_id": 91542375, "body": "@user463035818 Sure... Hm, and I must admit I did not consider aesthetics being a potential measure for distance - with that one, it would get quite large..."}], "answers": [{"tags": [], "owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "is_accepted": true, "score": 7, "last_activity_date": 1536761282, "last_edit_date": 1536761282, "creation_date": 1536761237, "answer_id": 52297152, "question_id": 52296889, "link": "https://stackoverflow.com/questions/52296889/what-are-the-advantages-of-using-stdvariant-as-opposed-to-traditional-polymorp/52297152#52297152", "title": "What are the advantages of using std::variant as opposed to traditional polymorphic processing?", "body": "<blockquote>\n  <p>So, is variant just a convenience?</p>\n</blockquote>\n\n<p>No, they are different concepts. Main difference that on one side <code>std::variant</code> can work with unrelated types including builtins like <code>int</code> which is not possible with virtual functions directly. On another side <code>std::variant</code> must know types it is working with at compile time. For example it is possible to add a type with virtual function(s) by just linking additional object module without recompiling rest of the code or loading a shared library dynamically to existing application (you do not even have to restart the app) while with <code>std::variant</code> you must recompile code dealing with types <code>std::variant</code> contains.</p>\n"}, {"tags": [], "owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "is_accepted": false, "score": 2, "last_activity_date": 1536763236, "creation_date": 1536763236, "answer_id": 52297830, "question_id": 52296889, "link": "https://stackoverflow.com/questions/52296889/what-are-the-advantages-of-using-stdvariant-as-opposed-to-traditional-polymorp/52297830#52297830", "title": "What are the advantages of using std::variant as opposed to traditional polymorphic processing?", "body": "<blockquote>\n  <p>However, I can just make that function virtual in my base class and have each derived class implement it.</p>\n</blockquote>\n\n<p>Yes.... if all the elements in the <code>variant</code> share a common Base (which <a href=\"https://stackoverflow.com/a/52297152/27678\">Slava already mentioned</a>).</p>\n\n<p>Another big difference is that, with a <code>variant</code>, there's not necessarily <em>any</em> dynamic polymorphism happening at all (no RTTI needed) during visitation.</p>\n\n<p>In conjunction with <code>std::visit</code>, there are a lot of tricks under the hood to make sure that there's (basically) zero runtime overhead in calling the appropriate function for a given <code>std::variant</code>. Although there could be non-trivial additional compile time and memory usage because it does this by creating a big matrix of function pointers (<a href=\"https://mpark.github.io/programming/2015/07/07/variant-visitation/\" rel=\"nofollow noreferrer\">See this excellent blog post from Michael Park</a> about it)</p>\n"}], "owner": {"reputation": 2202, "user_id": 3357481, "user_type": "registered", "accept_rate": 68, "profile_image": "https://graph.facebook.com/100006348219116/picture?type=large", "display_name": "Mutating Algorithm", "link": "https://stackoverflow.com/users/3357481/mutating-algorithm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2477, "favorite_count": 1, "accepted_answer_id": 52297152, "answer_count": 2, "score": 4, "last_activity_date": 1536763236, "creation_date": 1536760453, "last_edit_date": 1536760953, "question_id": 52296889, "link": "https://stackoverflow.com/questions/52296889/what-are-the-advantages-of-using-stdvariant-as-opposed-to-traditional-polymorp", "title": "What are the advantages of using std::variant as opposed to traditional polymorphic processing?", "body": "<p>Suppose I have a <code>Shape</code> base class and <code>Circle</code>, <code>Line</code>, and <code>Point</code> derived classes. I have two functions.</p>\n\n<pre><code>std::variant&lt;Circle, Line, Point&gt; process(const Shape &amp;s);\nShape process(const Shape&amp; s);\n</code></pre>\n\n<p>I can pass in any of my derived classes and return a Shape object in the second function, a variant is just a union that can hold any of my derived class variables at any given time.</p>\n\n<p>Now with <code>std::variant</code> I can also employ a <code>visitor</code> where I can process some function depending on what type my variant is currently holding (I could just create a function object and pass it <code>std::transform</code> and apply it to each of my objects). However, I can just make that function <code>virtual</code> in my base class and have each derived class implement it.</p>\n\n<p>So, is <code>variant</code> just a convenience?</p>\n"}, {"tags": ["c++", "ios", "makefile", "compiler-errors"], "comments": [{"owner": {"reputation": 15619, "user_id": 1548468, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0745dce203d52699e63a575b3103ad70?s=128&d=identicon&r=PG", "display_name": "Botje", "link": "https://stackoverflow.com/users/1548468/botje"}, "edited": false, "score": 1, "creation_date": 1536760643, "post_id": 52296864, "comment_id": 91541718, "body": "<code>CPPFLAGS</code> applies to C++. You are compiling C, so you should add the <code>-I</code> declaration to your <code>CFLAGS</code> as well. Alternatively, add the path to your <code>CPATH</code> or <code>C_INCLUDE_PATH</code> environment variable (sans <code>-I</code>)."}, {"owner": {"reputation": 45838, "user_id": 1362568, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/EAFi0.jpg?s=128&g=1", "display_name": "Mike Kinghan", "link": "https://stackoverflow.com/users/1362568/mike-kinghan"}, "reply_to_user": {"reputation": 15619, "user_id": 1548468, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0745dce203d52699e63a575b3103ad70?s=128&d=identicon&r=PG", "display_name": "Botje", "link": "https://stackoverflow.com/users/1548468/botje"}, "edited": false, "score": 1, "creation_date": 1536765840, "post_id": 52296864, "comment_id": 91544992, "body": "@Botje According to <a href=\"https://www.gnu.org/software/make/manual/html_node/Implicit-Variables.html\" rel=\"nofollow noreferrer\">GNU Make and autotools conventions</a>, <code>CPPFLAGS</code> denotes C Preprocessor Flags and is the right place for <code>-I</code> options. C++ compilations flags are <code>CXXFLAGS</code>."}, {"owner": {"reputation": 69991, "user_id": 939557, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/3VPea.png?s=128&g=1", "display_name": "MadScientist", "link": "https://stackoverflow.com/users/939557/madscientist"}, "edited": false, "score": 0, "creation_date": 1536777859, "post_id": 52296864, "comment_id": 91550945, "body": "If you&#39;re using CMake to generate your makefiles then your question is a CMake question.  Simply setting common make variables like <code>CPPFLAGS</code> may not have any effect, unless your CMake files (<code>CMakeLists.txt</code>) are set up to accept those variables which hardly any do.  You should investigate the documentation of your software package for how to configure CMake to find OpenSSL, and/or modify the tags of this question to contain cmake.  This is not a compiler question or a makefile question: it&#39;s purely a CMake configuration question."}], "owner": {"reputation": 7855, "user_id": 1022707, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/7ceaaf20ad52edf11c49125c8bf0a0e8?s=128&d=identicon&r=PG", "display_name": "clankill3r", "link": "https://stackoverflow.com/users/1022707/clankill3r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 73, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1536760387, "creation_date": 1536760387, "question_id": 52296864, "link": "https://stackoverflow.com/questions/52296864/add-a-extra-path-to-cpp-v", "title": "add a extra path to cpp -v", "body": "<p>I try to build with make and I get:</p>\n\n<pre><code>[ 50%] Building C object CMakeFiles/lws-minimal-http-server.dir/minimal-http-server.c.o\nIn file included from /Data/github/libwebsockets/minimal-examples/http-server/minimal-http-server/minimal-http-server.c:16:\n/usr/local/include/libwebsockets.h:223:10: fatal error: 'openssl/ssl.h' file not found\n#include &lt;openssl/ssl.h&gt;\n         ^~~~~~~~~~~~~~~\n1 error generated.\nmake[2]: *** [CMakeFiles/lws-minimal-http-server.dir/minimal-http-server.c.o] Error 1\nmake[1]: *** [CMakeFiles/lws-minimal-http-server.dir/all] Error 2\nmake: *** [all] Error 2\n</code></pre>\n\n<p>When I run <code>cpp -v</code> I get the following:</p>\n\n<pre><code>Apple LLVM version 9.0.0 (clang-900.0.39.2)\nTarget: x86_64-apple-darwin16.7.0\nThread model: posix\nInstalledDir: /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin\n \"/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang\" -cc1 -triple x86_64-apple-macosx10.12.0 -Wdeprecated-objc-isa-usage -Werror=deprecated-objc-isa-usage -E -disable-free -disable-llvm-verifier -discard-value-names -main-file-name - -mrelocation-model pic -pic-level 2 -mthread-model posix -mdisable-fp-elim -fno-strict-return -masm-verbose -munwind-tables -target-cpu penryn -target-linker-version 305 -v -dwarf-column-info -debugger-tuning=lldb -resource-dir /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/lib/clang/9.0.0 -I /usr/include -fdebug-compilation-dir /Data/github/libwebsockets/minimal-examples/http-server/minimal-http-server -ferror-limit 19 -fmessage-length 204 -stack-protector 1 -fblocks -fobjc-runtime=macosx-10.12.0 -fencode-extended-block-signature -fmax-type-align=16 -fdiagnostics-show-option -fcolor-diagnostics -traditional-cpp -o - -x c -\nclang -cc1 version 9.0.0 (clang-900.0.39.2) default target x86_64-apple-darwin16.7.0\nignoring duplicate directory \"/usr/include\"\n  as it is a non-system directory that duplicates a system directory\n#include \"...\" search starts here:\n#include &lt;...&gt; search starts here:\n /usr/local/include\n /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/lib/clang/9.0.0/include\n /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/include\n /usr/include\n /System/Library/Frameworks (framework directory)\n /Library/Frameworks (framework directory)\nEnd of search list.\n</code></pre>\n\n<p>In my <code>.bash_profile</code> I have:</p>\n\n<p><code>\nexport OPENSSL_ROOT_DIR=/usr/local/opt/openssl/include\nexport LDFLAGS=\"-L/usr/local/opt/openssl/lib\"\nexport CPPFLAGS=\"-I/usr/local/opt/openssl/include\"\nexport PATH=\"/usr/local/opt/openssl/bin:$PATH\"\n</code></p>\n"}, {"tags": ["c++", "sockets", "server", "winsock"], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 10205116, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98966fc412001a400e95ff9f7fc90bd7?s=128&d=identicon&r=PG&f=1", "display_name": "\u0412\u0435\u043d\u0438\u0430\u043c\u0438\u043d \u041d\u0438\u043a\u043e\u043b\u0430\u0435\u0432\u0438\u0447", "link": "https://stackoverflow.com/users/10205116/%d0%92%d0%b5%d0%bd%d0%b8%d0%b0%d0%bc%d0%b8%d0%bd-%d0%9d%d0%b8%d0%ba%d0%be%d0%bb%d0%b0%d0%b5%d0%b2%d0%b8%d1%87"}, "edited": false, "score": 0, "creation_date": 1536766364, "post_id": 52296942, "comment_id": 91545335, "body": "I understand the client needs to pass his name to the represented structure, how do this?"}], "tags": [], "owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": true, "score": 2, "last_activity_date": 1536760604, "creation_date": 1536760604, "answer_id": 52296942, "question_id": 52296863, "link": "https://stackoverflow.com/questions/52296863/name-for-new-socket/52296942#52296942", "title": "Name for new socket", "body": "<p>You don't. I mean that you don't \"assign a name to a socket\". Instead you should keep a structure of some kind containing the socket, and all associated data that's needed for that connection, like the connected users name.</p>\n\n<p>For example something similar to</p>\n\n<pre><code>struct user\n{\n    SOCKET      socket;  // The users connected socket\n    std::string name;    // The name of the connected user\n    // TODO: Other attributes needed for the user or the users connection\n};\n</code></pre>\n\n<p>Exactly how to get the user-name is another matter for another question (though I could give you a hint: States).</p>\n"}], "owner": {"reputation": 13, "user_id": 10205116, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98966fc412001a400e95ff9f7fc90bd7?s=128&d=identicon&r=PG&f=1", "display_name": "\u0412\u0435\u043d\u0438\u0430\u043c\u0438\u043d \u041d\u0438\u043a\u043e\u043b\u0430\u0435\u0432\u0438\u0447", "link": "https://stackoverflow.com/users/10205116/%d0%92%d0%b5%d0%bd%d0%b8%d0%b0%d0%bc%d0%b8%d0%bd-%d0%9d%d0%b8%d0%ba%d0%be%d0%bb%d0%b0%d0%b5%d0%b2%d0%b8%d1%87"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "accepted_answer_id": 52296942, "answer_count": 1, "score": 0, "last_activity_date": 1536760604, "creation_date": 1536760381, "question_id": 52296863, "link": "https://stackoverflow.com/questions/52296863/name-for-new-socket", "title": "Name for new socket", "body": "<p>I am learning socket programming, i had a problem. I want when people connecting to my server, i see his name(For example \"on server connected Richard\" ). How assign name to socket. P.S. Sorry for my English.</p>\n"}, {"tags": ["c++", "qt", "signals-slots"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1536760087, "post_id": 52296702, "comment_id": 91541352, "body": "maybe related : <a href=\"https://stackoverflow.com/questions/29985844/why-is-my-mousepressevent-called-twice\" title=\"why is my mousepressevent called twice\">stackoverflow.com/questions/29985844/&hellip;</a>"}, {"owner": {"reputation": 2682, "user_id": 7602551, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e81b7fabc768e5360e25c5875f757883?s=128&d=identicon&r=PG&f=1", "display_name": "unlut", "link": "https://stackoverflow.com/users/7602551/unlut"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1536760290, "post_id": 52296702, "comment_id": 91541480, "body": "@user463035818 Further info: <a href=\"http://doc.qt.io/qt-5/designer-using-a-ui-file.html#automatic-connections\" rel=\"nofollow noreferrer\">doc.qt.io/qt-5/&hellip;</a>"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1536760461, "post_id": 52296702, "comment_id": 91541593, "body": "on the other hand, it seems like the naming convention for auto connection requires a <code>on_</code> prefix while you have a <code>On</code>... anyhow try to remove the <code>connect</code> to see what happens. If thats the &quot;problem&quot; the fix is trivial"}, {"owner": {"reputation": 767718, "user_id": 14860, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vXG1F.png?s=128&g=1", "display_name": "paxdiablo", "link": "https://stackoverflow.com/users/14860/paxdiablo"}, "edited": false, "score": 0, "creation_date": 1536760894, "post_id": 52296702, "comment_id": 91541872, "body": "<a href=\"https://bugreports.qt.io/browse/QTBUG-14259\" rel=\"nofollow noreferrer\">bugreports.qt.io/browse/QTBUG-14259</a> ??"}, {"owner": {"reputation": 6908, "user_id": 5366641, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/71e9ba6e3cdac2461999d9c32ad9d507?s=128&d=identicon&r=PG", "display_name": "scopchanov", "link": "https://stackoverflow.com/users/5366641/scopchanov"}, "edited": false, "score": 0, "creation_date": 1536761536, "post_id": 52296702, "comment_id": 91542280, "body": "I&#39;ve just tested this (without the camera stuff) and it works as expected, i.e. the slot is called only once per click, unless I press and hold. I am using Qt5.10.1."}, {"owner": {"reputation": 2714, "user_id": 843458, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/e600bfa3509ddea2d693514cbe11bbdb?s=128&d=identicon&r=PG", "display_name": "Matthias Pospiech", "link": "https://stackoverflow.com/users/843458/matthias-pospiech"}, "edited": false, "score": 0, "creation_date": 1536762136, "post_id": 52296702, "comment_id": 91542737, "body": "If the connect is removed the slot is not called."}, {"owner": {"reputation": 705, "user_id": 4849439, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/049ab7c04b283ef0c73cba0046427335?s=128&d=identicon&r=PG&f=1", "display_name": "JLev", "link": "https://stackoverflow.com/users/4849439/jlev"}, "edited": false, "score": 0, "creation_date": 1536764838, "post_id": 52296702, "comment_id": 91544414, "body": "Maybe         <code>camera-&gt;setExposure(exposure);</code> triggers the slot?"}, {"owner": {"reputation": 6908, "user_id": 5366641, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/71e9ba6e3cdac2461999d9c32ad9d507?s=128&d=identicon&r=PG", "display_name": "scopchanov", "link": "https://stackoverflow.com/users/5366641/scopchanov"}, "reply_to_user": {"reputation": 705, "user_id": 4849439, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/049ab7c04b283ef0c73cba0046427335?s=128&d=identicon&r=PG&f=1", "display_name": "JLev", "link": "https://stackoverflow.com/users/4849439/jlev"}, "edited": false, "score": 0, "creation_date": 1536767371, "post_id": 52296702, "comment_id": 91545897, "body": "@JLev, that is easy to be tested. Let Matthias comment everything in the slot and put only one debug message. Basically my test was exactly the same."}, {"owner": {"reputation": 2714, "user_id": 843458, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/e600bfa3509ddea2d693514cbe11bbdb?s=128&d=identicon&r=PG", "display_name": "Matthias Pospiech", "link": "https://stackoverflow.com/users/843458/matthias-pospiech"}, "edited": false, "score": 0, "creation_date": 1536772413, "post_id": 52296702, "comment_id": 91548446, "body": "I removed all code not needed for testing this issue. It can be tested without an actual camera (using a simulated one). It is reproducable. However - only with aktive debugging. If I run the same debug binary without debugging the problem does not occur. To me this looks like a Qt bug?! The camera interface does not trigger any slot. The spinbox is also not called after any command within the function, but only after the function is completed. The next trigger comes from the event loop not a function in my code."}, {"owner": {"reputation": 2714, "user_id": 843458, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/e600bfa3509ddea2d693514cbe11bbdb?s=128&d=identicon&r=PG", "display_name": "Matthias Pospiech", "link": "https://stackoverflow.com/users/843458/matthias-pospiech"}, "edited": false, "score": 0, "creation_date": 1536773019, "post_id": 52296702, "comment_id": 91548702, "body": "I uploaded the code I am testing here to:<a href=\"https://github.com/pospiech/code/tree/master/libdev/devices/CameraViewer\" rel=\"nofollow noreferrer\">github.com/pospiech/code/tree/master/libdev/devices/&hellip;</a>"}, {"owner": {"reputation": 5700, "user_id": 4934640, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2f69527ae459cbbda0ab5c2e08686a50?s=128&d=identicon&r=PG&f=1", "display_name": "user", "link": "https://stackoverflow.com/users/4934640/user"}, "edited": false, "score": 0, "creation_date": 1589919937, "post_id": 52296702, "comment_id": 109483663, "body": "Related to <a href=\"https://stackoverflow.com/questions/36808257/pyqt-radiobutton-ischecked-is-executed-twice\">pyQt: radioButton.isChecked() is executed twice</a>"}], "answers": [{"comments": [{"owner": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "edited": false, "score": 0, "creation_date": 1536817691, "post_id": 52306815, "comment_id": 91561830, "body": "Why do you think the slot blocks? I am not seeing it."}, {"owner": {"reputation": 2714, "user_id": 843458, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/e600bfa3509ddea2d693514cbe11bbdb?s=128&d=identicon&r=PG", "display_name": "Matthias Pospiech", "link": "https://stackoverflow.com/users/843458/matthias-pospiech"}, "edited": false, "score": 0, "creation_date": 1536821079, "post_id": 52306815, "comment_id": 91563151, "body": "There is nothing that freezes the gui. There is no load at all. This issue only happens when I debug the code with breakpoints. Wihtout the problem does not occur."}, {"owner": {"reputation": 99, "user_id": 10354561, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-2iT7vjOnduE/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaNJ0VHmjIjKAUYXrsgos7nxWSe0UA/mo/photo.jpg?sz=128", "display_name": "FrozenM", "link": "https://stackoverflow.com/users/10354561/frozenm"}, "edited": false, "score": 0, "creation_date": 1536825537, "post_id": 52306815, "comment_id": 91565238, "body": "It is because of autorepeating timer, i think."}, {"owner": {"reputation": 99, "user_id": 10354561, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-2iT7vjOnduE/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaNJ0VHmjIjKAUYXrsgos7nxWSe0UA/mo/photo.jpg?sz=128", "display_name": "FrozenM", "link": "https://stackoverflow.com/users/10354561/frozenm"}, "edited": false, "score": 0, "creation_date": 1536828464, "post_id": 52306815, "comment_id": 91566845, "body": "I didnt see that its only in debug-mode. Sorry."}], "tags": [], "owner": {"reputation": 99, "user_id": 10354561, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-2iT7vjOnduE/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaNJ0VHmjIjKAUYXrsgos7nxWSe0UA/mo/photo.jpg?sz=128", "display_name": "FrozenM", "link": "https://stackoverflow.com/users/10354561/frozenm"}, "is_accepted": false, "score": 0, "last_activity_date": 1536921883, "last_edit_date": 1536921883, "creation_date": 1536814135, "answer_id": 52306815, "question_id": 52296702, "link": "https://stackoverflow.com/questions/52296702/qt-slot-called-twice/52306815#52306815", "title": "Qt slot called twice", "body": "<p>It looks like you have a freezing gui-thread with your slot.\nYou can try this code in your slot</p>\n\n<pre><code>void WidgetCameraParameter::OndoubleSpinBoxExposure_valueChanged(double value)\n{\n#define NUM_LOOPS 1000000000\n    qDebug() &lt;&lt; value;\n    quint64 i = NUM_LOOPS;\n    while(i--);\n}\n</code></pre>\n\n<p>To avoid this, you have to move to another thread an operation that consumes a lot of CPU time.</p>\n\n<p>In debug mode its because of autorepeating timer.\nTry this code to disable autorepeating in debug and, i think, you`ll understand:</p>\n\n<p>*.h</p>\n\n<p>...</p>\n\n<pre><code>#ifdef QT_DEBUG\n    bool eventFilter(QObject *watched, QEvent *event) override;\n#endif\n</code></pre>\n\n<p>...</p>\n\n<p>*.c</p>\n\n<p>...</p>\n\n<pre><code>    ui-&gt;setupUi(this);\n#ifdef QT_DEBUG\n    ui-&gt;doubleSpinBoxExposure-&gt;installEventFilter(this);\n#endif\n</code></pre>\n\n<p>...</p>\n\n<pre><code>#ifdef QT_DEBUG\nbool WidgetCameraParameter::eventFilter(QObject *watched, QEvent *event)\n{\n    QDoubleSpinBox *castSBox = static_cast&lt;QDoubleSpinBox*&gt;(watched);\n    if(castSBox &amp;&amp; event-&gt;type()==QEvent::Timer)\n    {\n        QTimerEvent *tEvent = static_cast&lt;QTimerEvent*&gt;(event);\n        if(tEvent)\n            qDebug() &lt;&lt; \"&lt;--QEvent::Timer--&gt;\" &lt;&lt; tEvent-&gt;timerId();\n        return true;\n    }\n    return QObject::eventFilter(watched,event);\n}\n#endif\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2714, "user_id": 843458, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/e600bfa3509ddea2d693514cbe11bbdb?s=128&d=identicon&r=PG", "display_name": "Matthias Pospiech", "link": "https://stackoverflow.com/users/843458/matthias-pospiech"}, "edited": false, "score": 0, "creation_date": 1536823866, "post_id": 52308560, "comment_id": 91564418, "body": "Indeed, this solves the problem. However the style is modified as well, which is not wanted. How can I keep the style?"}, {"owner": {"reputation": 8919, "user_id": 8873508, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2uDHi.png?s=128&g=1", "display_name": "p-a-o-l-o", "link": "https://stackoverflow.com/users/8873508/p-a-o-l-o"}, "reply_to_user": {"reputation": 2714, "user_id": 843458, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/e600bfa3509ddea2d693514cbe11bbdb?s=128&d=identicon&r=PG", "display_name": "Matthias Pospiech", "link": "https://stackoverflow.com/users/843458/matthias-pospiech"}, "edited": false, "score": 0, "creation_date": 1536824960, "post_id": 52308560, "comment_id": 91564968, "body": "Hi Matthias, I just provided some hints to debug the issue. If it happens at debug time only, and release builds are fine, just live with it (and don&#39;t bother editing the style the way I&#39;ve shown). It happens because of debugging, which, generally speaking, slow down things, and can yield timing issues like yours."}, {"owner": {"reputation": 2714, "user_id": 843458, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/e600bfa3509ddea2d693514cbe11bbdb?s=128&d=identicon&r=PG", "display_name": "Matthias Pospiech", "link": "https://stackoverflow.com/users/843458/matthias-pospiech"}, "edited": false, "score": 0, "creation_date": 1536825151, "post_id": 52308560, "comment_id": 91565075, "body": "Ok, that was also my approach, I just thought the style could be kept with simple adjustments in your code."}, {"owner": {"reputation": 8919, "user_id": 8873508, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2uDHi.png?s=128&g=1", "display_name": "p-a-o-l-o", "link": "https://stackoverflow.com/users/8873508/p-a-o-l-o"}, "reply_to_user": {"reputation": 2714, "user_id": 843458, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/e600bfa3509ddea2d693514cbe11bbdb?s=128&d=identicon&r=PG", "display_name": "Matthias Pospiech", "link": "https://stackoverflow.com/users/843458/matthias-pospiech"}, "edited": false, "score": 0, "creation_date": 1536825575, "post_id": 52308560, "comment_id": 91565263, "body": "There was a mistake in my code, anyway (derive from QProxyStyle, not QCommonStyle). Edited."}], "tags": [], "owner": {"reputation": 8919, "user_id": 8873508, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2uDHi.png?s=128&g=1", "display_name": "p-a-o-l-o", "link": "https://stackoverflow.com/users/8873508/p-a-o-l-o"}, "is_accepted": true, "score": 1, "last_activity_date": 1536825527, "last_edit_date": 1536825527, "creation_date": 1536823486, "answer_id": 52308560, "question_id": 52296702, "link": "https://stackoverflow.com/questions/52296702/qt-slot-called-twice/52308560#52308560", "title": "Qt slot called twice", "body": "<p>Looking at the <code>QStyle::StyleHint</code> enum, there is an interesting <code>SH_SpinBox_ClickAutoRepeatThreshold</code> constant. You can check its current value for your spin box, like this:</p>\n\n<pre><code>qDebug() &lt;&lt; ui-&gt;doubleSpinBoxExposure-&gt;style()-&gt;styleHint(QStyle::SH_SpinBox_ClickAutoRepeatThreshold);\n</code></pre>\n\n<p>This generally returns <code>500</code>, which is the number of milliseconds after which the auto repeat gets triggered (i.e. if the user holds the mouse press on the <code>up</code> spin button for longer than that threshold, the spin box value will start increasing continuously).</p>\n\n<p>To see if you have a timing issue, try changing that value, using a custom <code>QStyle</code> class like this:</p>\n\n<pre><code>#include &lt;QProxyStyle&gt;\n\nclass MyStyle : public QProxyStyle\n{\npublic:\n    int styleHint(StyleHint stylehint, const QStyleOption *opt, const QWidget *widget, QStyleHintReturn *returnData) const\n    {\n        if(stylehint == QStyle::SH_SpinBox_ClickAutoRepeatThreshold)\n        {\n            return 2000; //2 seconds threshold\n        }\n        return QProxyStyle::styleHint(stylehint, opt, widget, returnData);\n    }\n};\n</code></pre>\n\n<p>and setting an instance of it to the spin box style:</p>\n\n<pre><code>ui-&gt;doubleSpinBoxExposure-&gt;setStyle(new MyStyle());\n</code></pre>\n\n<p>Now it takes a lot (two long seconds) before the auto repeat gets triggered, and your issue should be gone, accordingly.</p>\n"}], "owner": {"reputation": 2714, "user_id": 843458, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/e600bfa3509ddea2d693514cbe11bbdb?s=128&d=identicon&r=PG", "display_name": "Matthias Pospiech", "link": "https://stackoverflow.com/users/843458/matthias-pospiech"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 512, "favorite_count": 0, "accepted_answer_id": 52308560, "answer_count": 2, "score": 1, "last_activity_date": 1536921883, "creation_date": 1536759903, "last_edit_date": 1536821270, "question_id": 52296702, "link": "https://stackoverflow.com/questions/52296702/qt-slot-called-twice", "title": "Qt slot called twice", "body": "<p>I have a code with a QDoubleSpinBox</p>\n\n<pre><code>ui-&gt;doubleSpinBoxExposure-&gt;setMinimum(0.001);\nui-&gt;doubleSpinBoxExposure-&gt;setMaximum(1000);\nui-&gt;doubleSpinBoxExposure-&gt;setSingleStep(1.0);\n\nconnect(ui-&gt;doubleSpinBoxExposure, SIGNAL(valueChanged(double)),\n        this, SLOT(OndoubleSpinBoxExposure_valueChanged(double)));\n\nvoid WidgetCameraParameter::OndoubleSpinBoxExposure_valueChanged(double value)\n{\n    if (!camera)\n        return;\n    if (camera-&gt;isOpen())\n    {        \n        float exposure = static_cast&lt;float&gt;(value);\n        float cameraExposure;\n        camera-&gt;setExposure(exposure);\n        LOG_INFO() &lt;&lt;\" setting exposure to \" &lt;&lt; value &lt;&lt; \" ms\";\n        cameraExposure = camera-&gt;exposure();\n        LOG_INFO() &lt;&lt;\" resulting exposure is \" &lt;&lt; cameraExposure &lt;&lt; \" ms\";\n    }\n}\n</code></pre>\n\n<p>The problem is, when I step up in the gui or down, this happens twice.\nThe starting parameter is value = 2. StepUp calls this function with 3, and directly afterwards with 4. And I have no idea why.</p>\n\n<p>The stack trace is not helpfull:</p>\n\n<blockquote>\n  <p>1  WidgetCameraParameter::OndoubleSpinBoxExposure_valueChanged      widgetcameraparameter.cpp      311  0x406c17<br>\n  2  WidgetCameraParameter::qt_static_metacall                        moc_widgetcameraparameter.cpp  110  0x40811f<br>\n  3  QMetaObject::activate                                            qobject.cpp                    3771 0x12bc2e1<br>\n  4  QMetaObject::activate                                            qobject.cpp                    3633 0x12bc575<br>\n  5  QDoubleSpinBox::valueChanged                                     moc_qspinbox.cpp               436  0x15e66190 \n  6  QDoubleSpinBoxPrivate::emitSignals                               qspinbox.cpp                   1112 0x15e663b2 \n  7  QAbstractSpinBoxPrivate::setValue                                qabstractspinbox.cpp           1741 0x15e6174d \n  8  QAbstractSpinBox::stepBy                                         qabstractspinbox.cpp           643  0x15e62aba \n  9  QAbstractSpinBox::timerEvent                                     qabstractspinbox.cpp           1246 0x15e5ffea \n  10 QObject::event                                                   qobject.cpp                    1232 0x12bc918<br>\n  11 QWidget::event                                                   qwidget.cpp                    9347 0x15d0c544 \n  12 QAbstractSpinBox::event                                          qabstractspinbox.cpp           795  0x15e65930 \n  13 QApplicationPrivate::notify_helper                               qapplication.cpp               3727 0x15cc85ca \n  14 QApplication::notify                                             qapplication.cpp               3690 0x15cd1f4f \n  15 QCoreApplication::notifyInternal2                                qcoreapplication.cpp           1048 0x1295119<br>\n  16 QCoreApplication::sendEvent                                      qcoreapplication.h             234  0x12e4d87<br>\n  17 QEventDispatcherWin32Private::sendTimerEvent                     qeventdispatcher_win.cpp       447  0x12e4d87<br>\n  18 qt_internal_proc(HWND__ *, unsigned int, unsigned int, long) *16 qeventdispatcher_win.cpp       242  0x12e53d5<br>\n  19 gapfnScSendMessage                                                                                   0x771162fa \n  20 ??                                                                                                   0x5c0f30<br>\n  21 USER32!GetThreadDesktop                                                                              0x77116d3a \n  22 QEventDispatcherWin32Private::sendTimerEvent                     qeventdispatcher_win.cpp       456  0x12e4dc9<br>\n  23 ??                                                                                                   0x5c0f30<br>\n  24 USER32!CharPrevW                                                                                     0x771177c4 \n  25 USER32!DispatchMessageW                                                                              0x7711788a \n  26 QEventDispatcherWin32::processEvents                             qeventdispatcher_win.cpp       629  0x12e4ae8<br>\n  27 QWindowsGuiEventDispatcher::processEvents                        qwindowsguieventdispatcher.cpp 74   0x2496dab7 \n  28 QEventLoop::processEvents                                        qeventloop.cpp                 136  0x12937c8<br>\n  29 QEventLoop::exec                                                 qeventloop.cpp                 214  0x1293c20<br>\n  30 QCoreApplication::exec                                           qcoreapplication.cpp           1336 0x129c30e<br>\n  31 QGuiApplication::exec                                            qguiapplication.cpp            1761 0x8461552<br>\n  32 QApplication::exec                                               qapplication.cpp               2901 0x15cc84a9 \n  33 qMain                                                            main.cpp                       28   0x40183d<br>\n  34 WinMain *16                                                      qtmain_win.cpp                 104  0x4094c5<br>\n  35 main                                                                                                 0x4179ad   </p>\n</blockquote>\n\n<p>Any idea how to debug this further?</p>\n\n<p>EDIT:\nThis only happens when I debug with breakpoints in the slot. Without the slot is only called once.\nThe second call of the slot does not happen from any function within the slot function, but only after the slot has ended from the event loop.</p>\n\n<p>You can loop at the complete code:\n<a href=\"https://github.com/pospiech/code/tree/master/libdev/devices/CameraViewer\" rel=\"nofollow noreferrer\">https://github.com/pospiech/code/tree/master/libdev/devices/CameraViewer</a></p>\n"}, {"tags": ["c++", "googletest"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1536759909, "post_id": 52296403, "comment_id": 91541233, "body": "i fixed the code formatting, would be cool if you could insert one or more . / ? somewhere in the last paragraph to make it readable ;)"}], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 6847452, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0e3e650bcc4769e1b45765688aeead8?s=128&d=identicon&r=PG&f=1", "display_name": "Tal V.", "link": "https://stackoverflow.com/users/6847452/tal-v"}, "edited": false, "score": 0, "creation_date": 1536910484, "post_id": 52296431, "comment_id": 91601005, "body": "Ill try to explain my concern : Lets assume I have states 1 to 5 and I want to test behavior on state number 3 I agree that the output is not an issue since there is no point if there is no output to the outside world, but I have a mechanism that &quot;publish&quot; the output to listeners and I wanted to make the test simple.  Regarding the input, In order to get to step 3 &quot;legally&quot; my test needs to provide all inputs to pass states 1,2 and again, I want to make the test simple and not check a process of my system ,  Only state 3 behavior. For that reason I wanted to &quot;bend the rules&quot;"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 31, "user_id": 6847452, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0e3e650bcc4769e1b45765688aeead8?s=128&d=identicon&r=PG&f=1", "display_name": "Tal V.", "link": "https://stackoverflow.com/users/6847452/tal-v"}, "edited": false, "score": 0, "creation_date": 1538397696, "post_id": 52296431, "comment_id": 92117395, "body": "@TalV. Sounds like my final paragraph is relevant to you then"}], "tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": false, "score": 5, "last_activity_date": 1536759044, "creation_date": 1536759044, "answer_id": 52296431, "question_id": 52296403, "link": "https://stackoverflow.com/questions/52296403/how-to-test-behavior-based-on-private-class-using-members-c-using-gtest/52296431#52296431", "title": "How to test behavior based on private class using members c++ using gtest", "body": "<p>You don't. You do the same thing that your actual program will do, which is provide an input, then examine the result; you say there's no output, but there must be <em>some</em> effect, otherwise the class is pointless!</p>\n\n<p>Failing that, you <em>could</em> make the test a \"friend\" of the class so that it can inspect its internals, or add an immutable getter for the current state (and who really cares if your class's users get to see that?) but neither option is really in the spirit of the thing.</p>\n\n<p>In my experience, you'll occasionally realise that you're not really unit testing any more but instead <em>functional</em> testing, and Google Test may not be the right tool for that job. If your class is as big as it sounds, that could be the case here. Conversely, you could help yourself by splitting the class into smaller chunks, then unit testing <em>those</em>. Depends what you're going for, really.</p>\n"}, {"tags": [], "owner": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "is_accepted": false, "score": 4, "last_activity_date": 1536759237, "last_edit_date": 1536759237, "creation_date": 1536759210, "answer_id": 52296482, "question_id": 52296403, "link": "https://stackoverflow.com/questions/52296403/how-to-test-behavior-based-on-private-class-using-members-c-using-gtest/52296482#52296482", "title": "How to test behavior based on private class using members c++ using gtest", "body": "<p><a href=\"https://stackoverflow.com/a/52296431/598696\">Lightness Races in Orbit is correct</a>. However, if  sometimes you feel like it's useful to test the private member functions of your class, it often means that your class could be split in multiple smaller pieces.</p>\n\n<p>If you don't think those smaller components are useful to the clients of your library, you can simply hide them in a <code>detail::</code> namespace and then create unit tests as usual. This will allow you to test the internal behavior of your classes without polluting your public API.</p>\n"}, {"tags": [], "owner": {"reputation": 31, "user_id": 6847452, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0e3e650bcc4769e1b45765688aeead8?s=128&d=identicon&r=PG&f=1", "display_name": "Tal V.", "link": "https://stackoverflow.com/users/6847452/tal-v"}, "is_accepted": false, "score": 0, "last_activity_date": 1536920231, "creation_date": 1536920231, "answer_id": 52329876, "question_id": 52296403, "link": "https://stackoverflow.com/questions/52296403/how-to-test-behavior-based-on-private-class-using-members-c-using-gtest/52329876#52329876", "title": "How to test behavior based on private class using members c++ using gtest", "body": "<p>After much considerations I decided to wrap my UUT with a helper which provides set and get to the relevant private members.and use it in the test procedure before calling the tested API </p>\n\n<pre><code>Original code\n=============== \n\nclass UUT //That's the actual class I want to test\n{\n  protected: \n     int m_protectedMember;\n  public:\n     void methodToTest()\n     {\n        //Do something with m_protectedMember use its value as input \n        //and set it as output \n     }\n};\n\nIn the tester \n==============\nclass UUTHelper: public UUT\n{\n   public:\n     int getProtectedMember() { return m_protectedMember; }\n     void setProtectedMember(int value) { m_protectedMember = value; } \n};\n</code></pre>\n\n<p>The pros:</p>\n\n<ul>\n<li>My test code is very simple and I easily create complicated scenarios .</li>\n<li>I test the real code without any \"friends\" or any other manipulations.</li>\n</ul>\n\n<p>The cons:</p>\n\n<ul>\n<li>As written in the discussion, not the best \"good practice\", touching private members </li>\n</ul>\n\n<p>Thank you all :)</p>\n"}], "owner": {"reputation": 31, "user_id": 6847452, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0e3e650bcc4769e1b45765688aeead8?s=128&d=identicon&r=PG&f=1", "display_name": "Tal V.", "link": "https://stackoverflow.com/users/6847452/tal-v"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 495, "favorite_count": 0, "answer_count": 3, "score": 2, "last_activity_date": 1536920231, "creation_date": 1536758948, "last_edit_date": 1536759861, "question_id": 52296403, "link": "https://stackoverflow.com/questions/52296403/how-to-test-behavior-based-on-private-class-using-members-c-using-gtest", "title": "How to test behavior based on private class using members c++ using gtest", "body": "<p>I want to use Google test to test my class.\nLets assume I have a state machine implementation and the current state is private \nso I have a method SetNextState that looks  like that:</p>\n\n<pre><code>void setNextState\n{\n  switch(m_currentState) //m_currentState is a private member\n  {\n    case INIT_STATE:\n    {\n       if some conditions occurred m_currentState=GO_STATE\n    } \n......\n  }\n}\n</code></pre>\n\n<p>so I have several cases and each define the behavior to move from certain state to another.\nMy question:\nHow do I perform tests on that method assuming the state is relevant only to this class so there is no output \nHow do I set its value to be, for example \"GO_STATE\" to test the GO_STATE case \nand how do i check the m_currentState at the end of the test \nIm trying to avoid putting friends etc. in my UUT code since I want it to be as original as possible </p>\n"}, {"tags": ["c++", "c++17", "variadic-templates"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1536758941, "post_id": 52296332, "comment_id": 91540572, "body": "what is &#39;test&#39;? Is this really the error from the code you show here?"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1536759015, "post_id": 52296332, "comment_id": 91540626, "body": "also <code>while(inst)</code>, how is this supposed to compile? probably not related to the actual problem, but still distracting"}], "answers": [{"comments": [{"owner": {"reputation": 833, "user_id": 6113678, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/DcqSN.jpg?s=128&g=1", "display_name": "Alexey Subbota", "link": "https://stackoverflow.com/users/6113678/alexey-subbota"}, "edited": false, "score": 0, "creation_date": 1536759375, "post_id": 52296413, "comment_id": 91540885, "body": "I read <a href=\"https://en.cppreference.com/w/cpp/language/template_parameters#Non-type_template_parameter\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/language/&hellip;</a>  and pointer to object <i>can</i> be template argument. Why not?"}, {"owner": {"reputation": 9602, "user_id": 7151494, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-a_FzvY-b2O0/AAAAAAAAAAI/AAAAAAAAAEw/kNwilSAvQTI/photo.jpg?sz=128", "display_name": "Fureeish", "link": "https://stackoverflow.com/users/7151494/fureeish"}, "reply_to_user": {"reputation": 833, "user_id": 6113678, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/DcqSN.jpg?s=128&g=1", "display_name": "Alexey Subbota", "link": "https://stackoverflow.com/users/6113678/alexey-subbota"}, "edited": false, "score": 1, "creation_date": 1536759489, "post_id": 52296413, "comment_id": 91540963, "body": "@AlexeySubbota <code>&quot;hi&quot;</code> is not of a type <code>const char*</code>. It&#39;s <code>const char[3]</code>, <b>which is not the same</b>"}, {"owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "edited": false, "score": 2, "creation_date": 1536759540, "post_id": 52296413, "comment_id": 91540994, "body": "Even with P0732 string literals cannot be used with a <code>const char*</code> template parameter, you will have to use your own type."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1536759729, "post_id": 52296413, "comment_id": 91541127, "body": "Seems a bit of a pain not to actually include P0732&#39;s sample implementation in the library. It looks decent"}], "tags": [], "owner": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "is_accepted": false, "score": 3, "last_activity_date": 1536759000, "creation_date": 1536759000, "answer_id": 52296413, "question_id": 52296332, "link": "https://stackoverflow.com/questions/52296332/non-type-variadic-template-parameter/52296413#52296413", "title": "Non-type variadic template parameter", "body": "<p>This has nothing to do with the template parameter being <em>variadic</em> or <em>non-type</em> - string literals cannot simply be used as template parameters (until <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2018/p0732r0.pdf\" rel=\"nofollow noreferrer\">P0732</a> - which was accepted - becomes reality).</p>\n\n<pre><code>template &lt;const char*&gt; struct foo { };\nfoo&lt;\"hi\"&gt; x;\n</code></pre>\n\n<p>Will fail as well. <a href=\"https://gcc.godbolt.org/z/FonH12\" rel=\"nofollow noreferrer\"><strong>live example on godbolt.org</strong></a></p>\n\n<blockquote>\n  <p>error: '\"hi\"' is not a valid template argument for type 'const char*' because string literals can never be used in this context</p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1536759505, "post_id": 52296476, "comment_id": 91540978, "body": "Literally did this last week for the same reason. Was a bit annoying. Fortunately shortly thereafter discovered my whole approach was stupid and was able to delete it all, but still... ;)"}, {"owner": {"reputation": 14474, "user_id": 2064761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GoIUL.png?s=128&g=1", "display_name": "Michael Kenzel", "link": "https://stackoverflow.com/users/2064761/michael-kenzel"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 1, "creation_date": 1536760284, "post_id": 52296476, "comment_id": 91541478, "body": "Yeah, personally I would just try to keep strings out of my template stuffs. But if you must, the above would seem to be the simplest solution for the particular problem at the moment. And it&#39;s kinda forward-compatible, assuming we will eventually be able to pass string literals as template arguments\u2026"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1536761690, "post_id": 52296476, "comment_id": 91542370, "body": "Yep, agreed. :)"}, {"owner": {"reputation": 3355, "user_id": 4114447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/aa93321ad023953eaaae28b490855e7a?s=128&d=identicon&r=PG&f=1", "display_name": "Dan M.", "link": "https://stackoverflow.com/users/4114447/dan-m"}, "edited": false, "score": 2, "creation_date": 1536768378, "post_id": 52296476, "comment_id": 91546492, "body": "Note, that template will be parametrized by pointers, i.e. their addresses, and not their contents. So if you write the same code in different function (i.e. using different instances of <code>a</code> and <code>b</code>) you&#39;ll get different template instantiation."}], "tags": [], "owner": {"reputation": 14474, "user_id": 2064761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GoIUL.png?s=128&g=1", "display_name": "Michael Kenzel", "link": "https://stackoverflow.com/users/2064761/michael-kenzel"}, "is_accepted": true, "score": 3, "last_activity_date": 1536759199, "creation_date": 1536759199, "answer_id": 52296476, "question_id": 52296332, "link": "https://stackoverflow.com/questions/52296332/non-type-variadic-template-parameter/52296476#52296476", "title": "Non-type variadic template parameter", "body": "<p>What's wrong is <a href=\"http://eel.is/c++draft/temp.arg.nontype#2.3\" rel=\"nofollow noreferrer\">[temp.arg.nontype] \u00a72.3</a>. String literals cannot (currently) be used as template arguments. What you could do, for example, is declare named array objects and use those as arguments:</p>\n\n<pre><code>template&lt;const wchar_t* ...properties&gt;\nclass my_iterator {};\n\n\nint main()\n{\n    static constexpr const wchar_t a[] = L\"hello\";\n    static constexpr const wchar_t b[] = L\"world\";\n\n    my_iterator&lt;a, b&gt; inst;\n}\n</code></pre>\n\n<p>working example <a href=\"https://godbolt.org/#g:!((g:!((g:!((g:!((h:codeEditor,i:(j:1,lang:c%2B%2B,source:&#39;%0A%0Atemplate%3Cconst+wchar_t*+...properties%3E%0Aclass+my_iterator+%7B%7D%3B%0A%0A%0Aint+main()%0A%7B%0A++++static+constexpr+const+wchar_t+a%5B%5D+%3D+L%22hello%22%3B%0A++++static+constexpr+const+wchar_t+b%5B%5D+%3D+L%22world%22%3B%0A%0A++++my_iterator%3Ca,+b%3E+inst%3B%0A%7D%0A&#39;),l:&#39;5&#39;,n:&#39;0&#39;,o:&#39;C%2B%2B+source+%231&#39;,t:&#39;0&#39;)),k:55.359173878387125,l:&#39;4&#39;,m:67.91383219954649,n:&#39;0&#39;,o:&#39;&#39;,s:0,t:&#39;0&#39;),(g:!((h:output,i:(compiler:1,editor:1,wrap:&#39;1&#39;),l:&#39;5&#39;,n:&#39;0&#39;,o:&#39;%231+with+x86-64+clang+(trunk)&#39;,t:&#39;0&#39;)),header:(),l:&#39;4&#39;,m:32.08616780045352,n:&#39;0&#39;,o:&#39;&#39;,s:0,t:&#39;0&#39;)),k:60.93994778067885,l:&#39;3&#39;,n:&#39;0&#39;,o:&#39;&#39;,t:&#39;0&#39;),(g:!((h:compiler,i:(compiler:clang_trunk,filters:(b:&#39;0&#39;,binary:&#39;1&#39;,commentOnly:&#39;0&#39;,demangle:&#39;0&#39;,directives:&#39;0&#39;,execute:&#39;1&#39;,intel:&#39;0&#39;,trim:&#39;0&#39;),lang:c%2B%2B,libs:!(),options:&#39;-std%3Dc%2B%2B17+-O3+-stdlib%3Dlibc%2B%2B&#39;,source:1),l:&#39;5&#39;,n:&#39;0&#39;,o:&#39;x86-64+clang+(trunk)+(Editor+%231,+Compiler+%231)+C%2B%2B&#39;,t:&#39;0&#39;)),k:39.06005221932115,l:&#39;4&#39;,n:&#39;0&#39;,o:&#39;&#39;,s:0,t:&#39;0&#39;)),l:&#39;2&#39;,n:&#39;0&#39;,o:&#39;&#39;,t:&#39;0&#39;)),version:4\" rel=\"nofollow noreferrer\">here</a></p>\n"}, {"tags": [], "owner": {"reputation": 2826, "user_id": 1575632, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/SPw2f.jpg?s=128&g=1", "display_name": "amin", "link": "https://stackoverflow.com/users/1575632/amin"}, "is_accepted": false, "score": 2, "last_activity_date": 1536759457, "creation_date": 1536759457, "answer_id": 52296560, "question_id": 52296332, "link": "https://stackoverflow.com/questions/52296332/non-type-variadic-template-parameter/52296560#52296560", "title": "Non-type variadic template parameter", "body": "<p>Another alternative is to pass the characters one by one,</p>\n\n<pre><code>#include &lt;tuple&gt;\n\ntemplate&lt;wchar_t ...properties&gt;\nclass my_iterator{\npublic:\n     std::tuple&lt;decltype(properties)...&gt; get(); // quantity of wstrings depend on quantity of template parameters\n};\n\nmy_iterator&lt;L'h', L'e',  L'l', L'l', L'o'&gt; inst;\n</code></pre>\n"}], "owner": {"reputation": 833, "user_id": 6113678, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/DcqSN.jpg?s=128&g=1", "display_name": "Alexey Subbota", "link": "https://stackoverflow.com/users/6113678/alexey-subbota"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 385, "favorite_count": 0, "closed_date": 1536759439, "accepted_answer_id": 52296476, "answer_count": 3, "score": 3, "last_activity_date": 1536759457, "creation_date": 1536758730, "last_edit_date": 1536759076, "question_id": 52296332, "link": "https://stackoverflow.com/questions/52296332/non-type-variadic-template-parameter", "closed_reason": "Duplicate", "title": "Non-type variadic template parameter", "body": "<p>I want to make class with variadic wchar* value arguments. Consider the following example.</p>\n\n<pre><code>template&lt;const wchar_t* ...properties&gt;\nclass my_iterator{\npublic:\n     std::tuple&lt;std::wstring...&gt; get(); // quantity of wstrings depend on quantity of template parameters\n};\n</code></pre>\n\n<p>I want to use that like the following</p>\n\n<pre><code>my_iterator&lt;L\"hello\", L\"world\"&gt; inst(object_collection);\nwhile(inst.next()){\n    auto x = inst.get();\n}\n</code></pre>\n\n<p>But I receive compile error, when I instantiate the class.</p>\n\n<blockquote>\n  <p>error C2762: 'my_iterator': invalid expression as a template argument for\n  'properties'</p>\n</blockquote>\n\n<p>What's wrong and what to do?</p>\n"}, {"tags": ["c++", "arrays", "arduino", "nodemcu", "string-conversion"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 3, "creation_date": 1536757795, "post_id": 52296003, "comment_id": 91539733, "body": "What have you tried? How did your attempt work, or not work? Please read about <a href=\"http://stackoverflow.com/help/how-to-ask\">how to ask good questions</a>, as well as <a href=\"https://codeblog.jonskeet.uk/2012/11/24/stack-overflow-question-checklist/\" rel=\"nofollow noreferrer\">this question checklist</a>. Lastly learn how to create a <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable Example</a>."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1536757813, "post_id": 52296003, "comment_id": 91539746, "body": "Does ardunio support the stream library?"}, {"owner": {"reputation": 19779, "user_id": 878532, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/5fbebb625a289267abd098c0e676c760?s=128&d=identicon&r=PG", "display_name": "Klaus", "link": "https://stackoverflow.com/users/878532/klaus"}, "edited": false, "score": 0, "creation_date": 1536758639, "post_id": 52296003, "comment_id": 91540368, "body": "If you have a programming question, why you have &quot;Arduino IDE&quot; in your head line. Your question is C++ and not for the IDE! You may tell us that you run on avr 8 bit, because of low resources available. But the rest is useless here..."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "reply_to_user": {"reputation": 19779, "user_id": 878532, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/5fbebb625a289267abd098c0e676c760?s=128&d=identicon&r=PG", "display_name": "Klaus", "link": "https://stackoverflow.com/users/878532/klaus"}, "edited": false, "score": 0, "creation_date": 1536758798, "post_id": 52296003, "comment_id": 91540485, "body": "@Klaus I dont know the proper name, but it is some C++ dialect on arduino, not really C++, though &quot;IDE&quot; is really misplaced..."}, {"owner": {"reputation": 19779, "user_id": 878532, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/5fbebb625a289267abd098c0e676c760?s=128&d=identicon&r=PG", "display_name": "Klaus", "link": "https://stackoverflow.com/users/878532/klaus"}, "edited": false, "score": 0, "creation_date": 1536758949, "post_id": 52296003, "comment_id": 91540582, "body": "no! it is not a dialect, it is simply c++ but not all library stuff is available. So it is worth to tell it is avr but the question is not related to the IDE at all. So please remove this. Other users which have questions for the IDE may find this question without any help."}, {"owner": {"reputation": 147, "user_id": 7581695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/10212338111949666/picture?type=large", "display_name": "Julian ", "link": "https://stackoverflow.com/users/7581695/julian"}, "reply_to_user": {"reputation": 19779, "user_id": 878532, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/5fbebb625a289267abd098c0e676c760?s=128&d=identicon&r=PG", "display_name": "Klaus", "link": "https://stackoverflow.com/users/878532/klaus"}, "edited": false, "score": 1, "creation_date": 1536761645, "post_id": 52296003, "comment_id": 91542345, "body": "@Klaus Removed IDE from the title. Thanks."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 1, "creation_date": 1536761742, "post_id": 52296003, "comment_id": 91542419, "body": "We need sehe to come in with some Boost.Spirit monstrosity :D"}], "answers": [{"comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 2, "creation_date": 1536758377, "post_id": 52296132, "comment_id": 91540157, "body": "That <code>char*</code> initialisation is invalid in C++. Make it <code>const</code> and you&#39;re ok though"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1536758655, "post_id": 52296132, "comment_id": 91540382, "body": "It&#39;s a little problematic if the size of the input is long, and even worse if it&#39;s unknown."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1536758713, "post_id": 52296132, "comment_id": 91540425, "body": "@Someprogrammerdude agreed but this fits the OP&#39;s constraints (the size of the input is known and, assuming we take the example literally, small enough)"}, {"owner": {"reputation": 19779, "user_id": 878532, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/5fbebb625a289267abd098c0e676c760?s=128&d=identicon&r=PG", "display_name": "Klaus", "link": "https://stackoverflow.com/users/878532/klaus"}, "edited": false, "score": 0, "creation_date": 1536758789, "post_id": 52296132, "comment_id": 91540476, "body": "and also the format string can be constructed during runtime... a bit of transfer power is requested here ;)"}, {"owner": {"reputation": 2826, "user_id": 1575632, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/SPw2f.jpg?s=128&g=1", "display_name": "amin", "link": "https://stackoverflow.com/users/1575632/amin"}, "edited": false, "score": 0, "creation_date": 1536758911, "post_id": 52296132, "comment_id": 91540553, "body": "ok so something like <code>while(sscanf(buffer + offset, &quot;%x&quot;, &amp;array[inx]) == 1) offset += 5;</code> is another alternative"}], "tags": [], "owner": {"reputation": 2826, "user_id": 1575632, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/SPw2f.jpg?s=128&g=1", "display_name": "amin", "link": "https://stackoverflow.com/users/1575632/amin"}, "is_accepted": false, "score": 0, "last_activity_date": 1536758719, "last_edit_date": 1536758719, "creation_date": 1536758106, "answer_id": 52296132, "question_id": 52296003, "link": "https://stackoverflow.com/questions/52296003/convert-comma-separated-hex-string-to-unsigned-char-array-in-arduino/52296132#52296132", "title": "Convert (comma separated hex) String to unsigned char array in Arduino", "body": "<p>Use <code>sscanf(\"%x\", ...)</code>, here an example of just 3 hex numbers:</p>\n\n<pre><code>const char *buffer = \"{0X00,0X01,0XC8}\";\nunsigned int data[3];\nint read_count = sscanf(buffer, \"{%x,%x,%x}\", data, data+1, data+2);\n// if successful read_count will be 3\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 5319, "user_id": 2754173, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24b0a0fd9004b29fa441e5bbf6904e69?s=128&d=identicon&r=PG&f=1", "display_name": "Geezer", "link": "https://stackoverflow.com/users/2754173/geezer"}, "edited": false, "score": 0, "creation_date": 1536761833, "post_id": 52296511, "comment_id": 91542494, "body": "@Julian I just saw you update to the question and accordingly edited the answer."}], "tags": [], "owner": {"reputation": 5319, "user_id": 2754173, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24b0a0fd9004b29fa441e5bbf6904e69?s=128&d=identicon&r=PG&f=1", "display_name": "Geezer", "link": "https://stackoverflow.com/users/2754173/geezer"}, "is_accepted": false, "score": 0, "last_activity_date": 1536767581, "last_edit_date": 1536767581, "creation_date": 1536759296, "answer_id": 52296511, "question_id": 52296003, "link": "https://stackoverflow.com/questions/52296003/convert-comma-separated-hex-string-to-unsigned-char-array-in-arduino/52296511#52296511", "title": "Convert (comma separated hex) String to unsigned char array in Arduino", "body": "<p>If using <a href=\"https://en.cppreference.com/w/c/io/fscanf\" rel=\"nofollow noreferrer\"><code>sscanf()</code></a> (<code>#include &lt;stdio.h&gt;</code>) is within your limitations then you can call with it <code>\"%hhx\"</code> to extract each individual hex value into an <code>unsigned char</code> like this:</p>\n\n<pre><code>const int PAYLOAD_LENGTH = 14; // Known in advance\nunsigned char gImage_test[PAYLOAD_LENGTH];\n\n#include &lt;stdio.h&gt;\n\nint main()\n{\n    const char* bufferPtr = \"{0X00,0X01,0XC8,0X00,0XC8,0X00,0XFF,0XFF,0XFF,0XFF,0XFF,0XFF,0XFF,0XFF}\";\n    for (int i = 0; i &lt; PAYLOAD_LENGTH &amp;&amp; sscanf(bufferPtr + 1, \"%hhx\", &amp;gImage_test[i]); i++, bufferPtr += 5);\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 147, "user_id": 7581695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/10212338111949666/picture?type=large", "display_name": "Julian ", "link": "https://stackoverflow.com/users/7581695/julian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 664, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1536767581, "creation_date": 1536757663, "last_edit_date": 1536761553, "question_id": 52296003, "link": "https://stackoverflow.com/questions/52296003/convert-comma-separated-hex-string-to-unsigned-char-array-in-arduino", "title": "Convert (comma separated hex) String to unsigned char array in Arduino", "body": "<p>The response payload of my http request looks like this (but can be modified to any string best suitable for the task): </p>\n\n<pre><code>\"{0X00,0X01,0XC8,0X00,0XC8,0X00,\n0XFF,0XFF,0XFF,0XFF,0XFF,0XFF,0XFF,0XFF,}\"\n</code></pre>\n\n<p>How do I turn it into an unsigned char array containing the hex values like this: </p>\n\n<pre><code>unsigned char gImage_test[14] = { 0X00,0X01,0XC8,0X00,0XC8,0X00,\n0XFF,0XFF,0XFF,0XFF,0XFF,0XFF,0XFF,0XFF,}\n</code></pre>\n\n<p>Additional information: The length of the payload string is known in advance and always the same. Some partial solution I found can't be directly applied due to the limitations of the wrapper nature of Arduino for c++. Looking for a simple solution within the Arduino IDE.</p>\n"}, {"tags": ["c++", "g++"], "comments": [{"owner": {"reputation": 22818, "user_id": 1387438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ad806758c356c915ea08a4bfd79131e3?s=128&d=identicon&r=PG", "display_name": "Marek R", "link": "https://stackoverflow.com/users/1387438/marek-r"}, "edited": false, "score": 0, "creation_date": 1536756639, "post_id": 52295433, "comment_id": 91538840, "body": "can you paste exact command yup are exacting to perform a compilation? For example something like this should do the trick: <code>g++ prog.cpp -Wall -std=c++17 -o prog</code>"}, {"owner": {"reputation": 307, "user_id": 8011179, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/qHEyI.jpg?s=128&g=1", "display_name": "Thijmen", "link": "https://stackoverflow.com/users/8011179/thijmen"}, "reply_to_user": {"reputation": 22818, "user_id": 1387438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ad806758c356c915ea08a4bfd79131e3?s=128&d=identicon&r=PG", "display_name": "Marek R", "link": "https://stackoverflow.com/users/1387438/marek-r"}, "edited": false, "score": 0, "creation_date": 1536756681, "post_id": 52295433, "comment_id": 91538877, "body": "I used only &#39;g++ prog.cpp&#39;. Using your command results in the same error as stated in my original post."}, {"owner": {"reputation": 22818, "user_id": 1387438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ad806758c356c915ea08a4bfd79131e3?s=128&d=identicon&r=PG", "display_name": "Marek R", "link": "https://stackoverflow.com/users/1387438/marek-r"}, "edited": false, "score": 0, "creation_date": 1536756762, "post_id": 52295433, "comment_id": 91538955, "body": "So looks like installation was not completed successfully. It should work out of the box. Offtopic: you are using Mac so why you do not use clang?"}, {"owner": {"reputation": 307, "user_id": 8011179, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/qHEyI.jpg?s=128&g=1", "display_name": "Thijmen", "link": "https://stackoverflow.com/users/8011179/thijmen"}, "reply_to_user": {"reputation": 22818, "user_id": 1387438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ad806758c356c915ea08a4bfd79131e3?s=128&d=identicon&r=PG", "display_name": "Marek R", "link": "https://stackoverflow.com/users/1387438/marek-r"}, "edited": false, "score": 0, "creation_date": 1536756838, "post_id": 52295433, "comment_id": 91539018, "body": "Do I have to perform any actions before trying to install g++ again? Also, do you have a good source of how to install g++ correctly on Mac? Sorry, I really am new to all of this."}, {"owner": {"reputation": 307, "user_id": 8011179, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/qHEyI.jpg?s=128&g=1", "display_name": "Thijmen", "link": "https://stackoverflow.com/users/8011179/thijmen"}, "reply_to_user": {"reputation": 22818, "user_id": 1387438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ad806758c356c915ea08a4bfd79131e3?s=128&d=identicon&r=PG", "display_name": "Marek R", "link": "https://stackoverflow.com/users/1387438/marek-r"}, "edited": false, "score": 0, "creation_date": 1536759051, "post_id": 52295433, "comment_id": 91540658, "body": "We are obliged to use the GNU g++ compiler."}, {"owner": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 0, "creation_date": 1536759589, "post_id": 52295433, "comment_id": 91541034, "body": "<code>using namespace std;</code> can cause unexpected name collisions.  It is better to prefix calls with <code>std::</code> rather than import all of std into your source."}, {"owner": {"reputation": 307, "user_id": 8011179, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/qHEyI.jpg?s=128&g=1", "display_name": "Thijmen", "link": "https://stackoverflow.com/users/8011179/thijmen"}, "edited": false, "score": 0, "creation_date": 1536759631, "post_id": 52295433, "comment_id": 91541065, "body": "Thank you. However, said error is still present."}, {"owner": {"reputation": 22818, "user_id": 1387438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ad806758c356c915ea08a4bfd79131e3?s=128&d=identicon&r=PG", "display_name": "Marek R", "link": "https://stackoverflow.com/users/1387438/marek-r"}, "reply_to_user": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 0, "creation_date": 1536760676, "post_id": 52295433, "comment_id": 91541742, "body": "@stark error happens inside include and <code>using namespace std;</code> is after that. Anyway issue is missing system header file, so he can&#39;t do anything to fix it on source code side. Problem is incomplete or damaged gcc installation."}, {"owner": {"reputation": 307, "user_id": 8011179, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/qHEyI.jpg?s=128&g=1", "display_name": "Thijmen", "link": "https://stackoverflow.com/users/8011179/thijmen"}, "reply_to_user": {"reputation": 22818, "user_id": 1387438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ad806758c356c915ea08a4bfd79131e3?s=128&d=identicon&r=PG", "display_name": "Marek R", "link": "https://stackoverflow.com/users/1387438/marek-r"}, "edited": false, "score": 0, "creation_date": 1536760928, "post_id": 52295433, "comment_id": 91541890, "body": "@marekR I understand the issues have to do with a corrupt or incomplete installation. Installing GCC came up with some errors most likely related to permission issues. The only way to change this was by disabling SIP. After trying to install GCC again, it came through without any errors. The issue however still persists..."}], "answers": [{"tags": [], "owner": {"reputation": 338, "user_id": 4697337, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/edf84f3e42d40b60140f27cd772c6905?s=128&d=identicon&r=PG&f=1", "display_name": "Kevlar", "link": "https://stackoverflow.com/users/4697337/kevlar"}, "is_accepted": false, "score": 1, "last_activity_date": 1548859966, "creation_date": 1548859966, "answer_id": 54443358, "question_id": 52295433, "link": "https://stackoverflow.com/questions/52295433/c-header-file-wchar-h-not-found-using-g-macos/54443358#54443358", "title": "C++ header file &#39;wchar.h&#39; not found using g++ (MacOS)", "body": "<p>For me, reinstalling Xcode Command Line Tools and g++ solved the same issue:</p>\n\n<pre><code>xcode-select --install\nbrew reinstall gcc\n</code></pre>\n\n<p>The last line is assuming you have installed <a href=\"https://brew.sh\" rel=\"nofollow noreferrer\">homebrew</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 12231199, "user_type": "registered", "profile_image": "https://graph.facebook.com/2500641900164670/picture?type=large", "display_name": "Shiyu  Xia", "link": "https://stackoverflow.com/users/12231199/shiyu-xia"}, "is_accepted": false, "score": 0, "last_activity_date": 1574082379, "creation_date": 1574082379, "answer_id": 58915255, "question_id": 52295433, "link": "https://stackoverflow.com/questions/52295433/c-header-file-wchar-h-not-found-using-g-macos/58915255#58915255", "title": "C++ header file &#39;wchar.h&#39; not found using g++ (MacOS)", "body": "<p>I just found out the easiest way of this mess is just download the missing header file to your compiler folder. It will fix everything.</p>\n"}], "owner": {"reputation": 307, "user_id": 8011179, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/qHEyI.jpg?s=128&g=1", "display_name": "Thijmen", "link": "https://stackoverflow.com/users/8011179/thijmen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1963, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1585123808, "creation_date": 1536756026, "question_id": 52295433, "link": "https://stackoverflow.com/questions/52295433/c-header-file-wchar-h-not-found-using-g-macos", "title": "C++ header file &#39;wchar.h&#39; not found using g++ (MacOS)", "body": "<p>Disclaimer - I am completely new to C++ and the way this language works regarding compiling / linking. Using MacOS Mojave.</p>\n\n<p>For a school course we are obliged to use the g++ compiler to compile our c++ projects. G++ seems to be successfully installed; g++ -v results in the following output:</p>\n\n<pre><code>COLLECT_GCC=g++\nCOLLECT_LTO_WRAPPER=/usr/local/libexec/gcc/x86_64-apple-darwin17.5.0/8.1.0/lto-wrapper\nTarget: x86_64-apple-darwin17.5.0\nConfigured with: ../gcc-8.1.0/configure --enable-languages=c++,fortran\nThread model: posix\ngcc versie 8.1.0 (GCC) \n</code></pre>\n\n<p>I created my first \"hello world\" program:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nusing namespace std;\n\nint main() {\n    cout &lt;&lt; \"Hello, World!\" &lt;&lt; endl;\n    return 0;\n}\n</code></pre>\n\n<p>When I tried to compile this code (using 'g++ file.cpp), the following terminal output prompted:</p>\n\n<pre><code>In file included from /usr/local/include/c++/8.1.0/bits/postypes.h:40,\n                 from /usr/local/include/c++/8.1.0/iosfwd:40,\n                 from /usr/local/include/c++/8.1.0/ios:38,\n                 from /usr/local/include/c++/8.1.0/ostream:38,\n                 from /usr/local/include/c++/8.1.0/iostream:39,\n                 from ex1.cpp:1:\n/usr/local/include/c++/8.1.0/cwchar:44:10: fatale fout: wchar.h: No such file or directory\n #include &lt;wchar.h&gt;\n          ^~~~~~~~~\ncompilation ended.\n</code></pre>\n\n<p>The whcar.h file is indeed not present in the above folder. After some digging, I found the whcar file in the following folder: <code>/Library/Developer/CommandLineTools/usr/include/c++/v1</code></p>\n\n<p>Unfortunately I am a bit lost and don't really know what I am talking about, consindering everything is really new for me.</p>\n\n<p>It is greatly appreciated if anyone can guide me in the right direction.</p>\n\n<p>Kind regards,</p>\n\n<p>Thijmen.</p>\n"}, {"tags": ["c++", "qt", "ide", "qt-creator"], "comments": [{"owner": {"reputation": 4795, "user_id": 683905, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/7bc5b9f8f9c6f0e5d25b2d88e2cc1386?s=128&d=identicon&r=PG", "display_name": "Jaa-c", "link": "https://stackoverflow.com/users/683905/jaa-c"}, "edited": false, "score": 2, "creation_date": 1536759060, "post_id": 52295248, "comment_id": 91540665, "body": "For me, the limits set in settings work. If I use &quot;copy current value to clipboard&quot;, it copies the string limited by &quot;display string length&quot; setting. Note that you  have to reload values in debugger window if you change the settings. I&#39;m using 4.5.0."}, {"owner": {"reputation": 1454, "user_id": 2414842, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/sjcCk.jpg?s=128&g=1", "display_name": "Fabiotk", "link": "https://stackoverflow.com/users/2414842/fabiotk"}, "reply_to_user": {"reputation": 4795, "user_id": 683905, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/7bc5b9f8f9c6f0e5d25b2d88e2cc1386?s=128&d=identicon&r=PG", "display_name": "Jaa-c", "link": "https://stackoverflow.com/users/683905/jaa-c"}, "edited": false, "score": 0, "creation_date": 1536771968, "post_id": 52295248, "comment_id": 91548224, "body": "I&#39;m on 4.1.0, maybe it is the outdated version"}], "answers": [{"comments": [{"owner": {"reputation": 311, "user_id": 2870336, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf81b6bd6ea15c35c2b8aebf11931acf?s=128&d=identicon&r=PG&f=1", "display_name": "Kjell", "link": "https://stackoverflow.com/users/2870336/kjell"}, "edited": false, "score": 0, "creation_date": 1572865682, "post_id": 52298088, "comment_id": 103681563, "body": "I am using the &quot;Separate Window&quot; display, because by default Creator ends longer strings with &quot;...&quot; , even when I copy the value to the clipboard (which feels kinda buggy to do).  But sometimes, the option to show a variable in a separate windows just disappears, I did not yet find out why and how to bring it back. Creator 4.8.2"}], "tags": [], "owner": {"reputation": 932, "user_id": 2426559, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/07c882b7b629b021477a2427cbfa8458?s=128&d=identicon&r=PG", "display_name": "Phiber", "link": "https://stackoverflow.com/users/2426559/phiber"}, "is_accepted": false, "score": 6, "last_activity_date": 1536763978, "creation_date": 1536763978, "answer_id": 52298088, "question_id": 52295248, "link": "https://stackoverflow.com/questions/52295248/how-to-access-the-complete-value-of-string-variables-when-debugging-in-qt-creato/52298088#52298088", "title": "How to access the complete value of string variables when debugging in qt creator?", "body": "<p>In <em>Local and Expressions</em>, right click on the variable and click on <em>Change Value Display Format</em>, then under <strong>Change Display for type QString</strong> click on <em>Separate Window</em></p>\n"}], "owner": {"reputation": 1454, "user_id": 2414842, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/sjcCk.jpg?s=128&g=1", "display_name": "Fabiotk", "link": "https://stackoverflow.com/users/2414842/fabiotk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1384, "favorite_count": 1, "answer_count": 1, "score": 7, "last_activity_date": 1536763978, "creation_date": 1536755473, "last_edit_date": 1536756031, "question_id": 52295248, "link": "https://stackoverflow.com/questions/52295248/how-to-access-the-complete-value-of-string-variables-when-debugging-in-qt-creato", "title": "How to access the complete value of string variables when debugging in qt creator?", "body": "<p>I'm debugging my c++ application and I have some string variables which can have 2000 characters or more. When debugging, the variable's value is shown incomplete (ending with \"...\") instead of showing the correct value. Also when I right click the variable and select \"Copy current VALUE to clipboard\" it is also copied incomplete. I think this must be a very basic thing but I didn't found in qt creator how to show the actual complete content of the variable? Thanks in advance.</p>\n\n<p>In <em>Tools -> debugger -> Locals &amp; Expressions</em> I've already changed the \"maximum string length\" and \"display string length\" to values above 10.000 but it is still only showing 500 characters.</p>\n"}, {"tags": ["c++", "reference"], "comments": [{"owner": {"reputation": 188064, "user_id": 635608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oIJia.png?s=128&g=1", "display_name": "Mat", "link": "https://stackoverflow.com/users/635608/mat"}, "edited": false, "score": 2, "creation_date": 1536755471, "post_id": 52295148, "comment_id": 91537995, "body": "<a href=\"https://stackoverflow.com/questions/40167231/is-it-safe-to-create-a-const-reference-to-result-of-ternary-operator-in-c\" title=\"is it safe to create a const reference to result of ternary operator in c\">stackoverflow.com/questions/40167231/&hellip;</a> - I think this is a dup but haven&#39;t read through enough to confirm"}, {"owner": {"reputation": 9602, "user_id": 7151494, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-a_FzvY-b2O0/AAAAAAAAAAI/AAAAAAAAAEw/kNwilSAvQTI/photo.jpg?sz=128", "display_name": "Fureeish", "link": "https://stackoverflow.com/users/7151494/fureeish"}, "edited": false, "score": 0, "creation_date": 1536755500, "post_id": 52295148, "comment_id": 91538020, "body": "The funny thing is when you remove the <code>&gt; 0 ? start : 9;</code>, it behaves as expected. Maybe something with binding the reference to a literal has to do with it?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user743382"}, "reply_to_user": {"reputation": 188064, "user_id": 635608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oIJia.png?s=128&g=1", "display_name": "Mat", "link": "https://stackoverflow.com/users/635608/mat"}, "edited": false, "score": 0, "creation_date": 1536755682, "post_id": 52295148, "comment_id": 91538148, "body": "@Mat You&#39;re right, this is a duplicate. Short summary for the OP: <code>start &gt; 0 ? start : 9</code> gives you an rvalue (and therefore a temporary object is created), <code>start &gt; 0 ? start : end</code> gives you an lvalue. Also fun to think about is what happens with <code>start &gt; 0 ? start : (const int &amp;) 9</code>."}, {"owner": {"reputation": 9602, "user_id": 7151494, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-a_FzvY-b2O0/AAAAAAAAAAI/AAAAAAAAAEw/kNwilSAvQTI/photo.jpg?sz=128", "display_name": "Fureeish", "link": "https://stackoverflow.com/users/7151494/fureeish"}, "edited": false, "score": 0, "creation_date": 1536755795, "post_id": 52295148, "comment_id": 91538229, "body": "Solution: <b>don&#39;t use magic numbers</b>. Instead of <code>&gt; 0 ? start : 9;</code> you should have introduces a <code>const int</code> of a value <code>9</code> and then proceed to evaluate the ternary operator. If you do: <code>int start = 1;const int literal9 = 9; const int &amp;eRef = start &gt; 0 ? start : literal9;</code>, everything works as expected"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 9602, "user_id": 7151494, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-a_FzvY-b2O0/AAAAAAAAAAI/AAAAAAAAAEw/kNwilSAvQTI/photo.jpg?sz=128", "display_name": "Fureeish", "link": "https://stackoverflow.com/users/7151494/fureeish"}, "edited": false, "score": 4, "creation_date": 1536755859, "post_id": 52295148, "comment_id": 91538276, "body": "@Fureeish Are you serious? You&#39;re recommending a constant called <code>literal9</code>??"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1536756094, "post_id": 52295148, "comment_id": 91538449, "body": "@Pi It&#39;s &quot;literally&quot; stupid ;)"}, {"owner": {"reputation": 9602, "user_id": 7151494, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-a_FzvY-b2O0/AAAAAAAAAAI/AAAAAAAAAEw/kNwilSAvQTI/photo.jpg?sz=128", "display_name": "Fureeish", "link": "https://stackoverflow.com/users/7151494/fureeish"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1536756098, "post_id": 52295148, "comment_id": 91538454, "body": "@LightnessRacesInOrbit well, are either you or OP recommending writing something similiar to the code in the original question in real code? Obviously not. I called it <code>literal9</code> just beacuse I had to come up with <i>some</i> name. The name should indicate what is the use of this variable. Tbh, if there is no justification to use any other name, one should consider whether the logic is not flawed"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 9602, "user_id": 7151494, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-a_FzvY-b2O0/AAAAAAAAAAI/AAAAAAAAAEw/kNwilSAvQTI/photo.jpg?sz=128", "display_name": "Fureeish", "link": "https://stackoverflow.com/users/7151494/fureeish"}, "edited": false, "score": 0, "creation_date": 1536756151, "post_id": 52295148, "comment_id": 91538481, "body": "@Fureeish No, and where did I say that I recommended that? Your suggestion to replace the magic number with a constant is spot-on, but <code>literal9</code> is the worst way to do that (worse than the original approach). The name should describe the thing that is 9, not 9 itself. Your comment didn&#39;t say that."}, {"owner": {"reputation": 9602, "user_id": 7151494, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-a_FzvY-b2O0/AAAAAAAAAAI/AAAAAAAAAEw/kNwilSAvQTI/photo.jpg?sz=128", "display_name": "Fureeish", "link": "https://stackoverflow.com/users/7151494/fureeish"}, "edited": false, "score": 0, "creation_date": 1536756379, "post_id": 52295148, "comment_id": 91538637, "body": "And I didn&#39;t say I recommend such names. It&#39;s neither an answer nor a gudeline. It&#39;s a code that illustrates the idea with a potential fix and if you really want to waste your time arguing about a name of a variable in a comment, you are free to do so. If it really hurts your eyes, image there is a more convinient name :&gt;"}], "owner": {"reputation": 2636, "user_id": 4635560, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iv67d.jpg?s=128&g=1", "display_name": "Manthan Tilva", "link": "https://stackoverflow.com/users/4635560/manthan-tilva"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 106, "favorite_count": 0, "closed_date": 1536755616, "answer_count": 0, "score": 4, "last_activity_date": 1536755287, "creation_date": 1536755159, "last_edit_date": 1592644375, "question_id": 52295148, "link": "https://stackoverflow.com/questions/52295148/strange-behavior-while-working-with-reference", "closed_reason": "Duplicate", "title": "Strange behavior while working with reference", "body": "<p>I am working on big code base. While refactoring some code I found some strange behavior related to reference. Below is minimal code to explain my question.</p>\n<pre><code>#include &lt;iostream&gt;\n\nint main() {\n  // case 1\n  {\n    int start = 1;\n    const int &amp;eRef = start &gt; 0 ? start : 9;\n    start = 2;\n    std::cout &lt;&lt; start &lt;&lt; eRef;\n  }\n  std::cout &lt;&lt; std::endl;\n  // case 2\n  {\n    int start = 1;\n    int end = 9;\n    const int &amp;eRef = start &gt; 0 ? start : end;\n    start = 2;\n    std::cout &lt;&lt; start &lt;&lt; eRef;\n  }\n  std::cout &lt;&lt; std::endl;\n  return 0;\n}\n</code></pre>\n<p>Output of above code is</p>\n<blockquote>\n<p>21</p>\n<p>22</p>\n</blockquote>\n<p>I am expecting output <code>22</code> for both case. But getting different output for both case.</p>\n<p>It might be as per standard, but I would like to know reason behind it.</p>\n"}, {"tags": ["c++", "multithreading", "list", "qudpsocket"], "comments": [{"owner": {"reputation": 8430, "user_id": 2742717, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d1dec1aa6accf3589489ebd42634f7a0?s=128&d=identicon&r=PG", "display_name": "Swift - Friday Pie", "link": "https://stackoverflow.com/users/2742717/swift-friday-pie"}, "edited": false, "score": 3, "creation_date": 1536754752, "post_id": 52294896, "comment_id": 91537552, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/38725768/threading-safe-stdlist-c\">Threading-Safe std:list C++</a>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user8705939"}, "edited": false, "score": 2, "creation_date": 1536755276, "post_id": 52294896, "comment_id": 91537871, "body": "Any particular reason for using a list? Looks like a queue to me and moving data before popping is usually a good thing."}, {"owner": {"reputation": 113, "user_id": 7297988, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-JMvQfSBK-qU/AAAAAAAAAAI/AAAAAAAAADM/_IEsQArQYfk/photo.jpg?sz=128", "display_name": "Bertinchamps", "link": "https://stackoverflow.com/users/7297988/bertinchamps"}, "reply_to_user": {"reputation": 8430, "user_id": 2742717, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d1dec1aa6accf3589489ebd42634f7a0?s=128&d=identicon&r=PG", "display_name": "Swift - Friday Pie", "link": "https://stackoverflow.com/users/2742717/swift-friday-pie"}, "edited": false, "score": 0, "creation_date": 1536755641, "post_id": 52294896, "comment_id": 91538113, "body": "In my opinion, it is not a duplicate as, in @Swift-FridayPie&#39;s question, mutexes are used. If I understood well, it however provides the answer. Lists can not be shared by threads directly because it could lead to thread corruptions."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1536755671, "post_id": 52294896, "comment_id": 91538139, "body": "@Bertinchamps It&#39;s not exactly the same question but we generally use duplicates also to indicate &quot;your answer may be found here&quot;. However in this instance it&#39;s kind of borderline so I&#39;m leaving it"}, {"owner": {"reputation": 113, "user_id": 7297988, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-JMvQfSBK-qU/AAAAAAAAAAI/AAAAAAAAADM/_IEsQArQYfk/photo.jpg?sz=128", "display_name": "Bertinchamps", "link": "https://stackoverflow.com/users/7297988/bertinchamps"}, "edited": false, "score": 0, "creation_date": 1536756252, "post_id": 52294896, "comment_id": 91538550, "body": "@OZ17 No particular reason for the List. I am pretty new to C++ and found out the list could be used for FIFO processing. I checked the difference here <a href=\"https://stackoverflow.com/questions/1262808/which-stl-container-should-i-use-for-a-fifo\" title=\"which stl container should i use for a fifo\">stackoverflow.com/questions/1262808/&hellip;</a> and I should indeed be using this kind of structure for the sake of clarity."}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1536756340, "post_id": 52294896, "comment_id": 91538614, "body": "Very unsafe. There is no guarantee of thread safety here."}, {"owner": {"reputation": 8430, "user_id": 2742717, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d1dec1aa6accf3589489ebd42634f7a0?s=128&d=identicon&r=PG", "display_name": "Swift - Friday Pie", "link": "https://stackoverflow.com/users/2742717/swift-friday-pie"}, "edited": false, "score": 0, "creation_date": 1536778353, "post_id": 52294896, "comment_id": 91551189, "body": "You&#39;re using  Qt. You have QSemaphore and QQueue which give some shortcuts in implementation. Imho, linked list is not always the most optimal implementation of queue.. in most of realistic cases you&#39;d like to have a cyclic buffer. E.g. allowing creation of infinite amount of  requests may represent a Possible Weakness of system."}], "answers": [{"comments": [{"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 3, "creation_date": 1536755073, "post_id": 52295015, "comment_id": 91537732, "body": "The O(1) complexity requirement on <code>size</code> implies problems are still likely"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 0, "creation_date": 1536755194, "post_id": 52295015, "comment_id": 91537826, "body": "@Caleth: Indeed - while this means a race inside <code>size()</code> is unlikely, I expect some small amount of state inside the container to be modified by this operations, though since this is likely not much more than integer increment/decrement operations, I&#39;d be frankly astounded to witness real problems. But, still, code to spec...."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 0, "creation_date": 1536755230, "post_id": 52295015, "comment_id": 91537845, "body": "@Caleth: Actually, if you&#39;re performing some batch operation <i>maybe</i> you could have a <code>size += n</code> situation and then there&#39;s trouble. But the list interface goes to substantial lengths to stop you from doing things like that anyway"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 0, "creation_date": 1536755306, "post_id": 52295015, "comment_id": 91537898, "body": "@Caleth: Final note, above I&#39;ve assumed that increment/decrement is inherently atomic on amd64 but I just realised I&#39;m almost certainly thinking of something else, assignment to bool probably. Lol, whatever, doesn&#39;t matter, which is the point :)"}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 1, "creation_date": 1536755455, "post_id": 52295015, "comment_id": 91537980, "body": "producer <code>push_back</code>ing  on an empty list whilst consumer reads <code>size</code> is a race."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 1, "creation_date": 1536755525, "post_id": 52295015, "comment_id": 91538034, "body": "@Caleth Yes it is. Again, I was trying to talk about possible <i>practical outcomes</i> of that race, but, again, it doesn&#39;t matter - the answer is simply <i>not to do this</i>"}, {"owner": {"reputation": 8430, "user_id": 2742717, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d1dec1aa6accf3589489ebd42634f7a0?s=128&d=identicon&r=PG", "display_name": "Swift - Friday Pie", "link": "https://stackoverflow.com/users/2742717/swift-friday-pie"}, "reply_to_user": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 0, "creation_date": 1536778225, "post_id": 52295015, "comment_id": 91551115, "body": "@Caleth yeah.. it essentially suggest that std::list got some member field <code>_size</code> to store &quot;supposed&quot; size of linked list, which deepens the problem of race condition."}], "tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": true, "score": 6, "last_activity_date": 1536754804, "creation_date": 1536754804, "answer_id": 52295015, "question_id": 52294896, "link": "https://stackoverflow.com/questions/52294896/could-stdlist-be-used-for-a-simple-lock-free-queue/52295015#52295015", "title": "Could std::list be used for a simple lock-free queue?", "body": "<p><strong>No.</strong></p>\n\n<p>You're on the right lines, but actually you can't call <em>any</em> container member function from different threads at the same time and expect it to work reliably, because the implementation of those member functions themselves are not [guaranteed to be] thread-safe.</p>\n\n<blockquote>\n  <p>I don't see why it would be a problem</p>\n</blockquote>\n\n<p>Off the record, I'd agree that in the particular case of <code>std::list</code> I wouldn't expect much in the way of practical problems here. Some shops may consider this sufficient reason to go ahead and use this in production. I wouldn't accept it at code review though. The point is that we simply can't* know exactly what the innards do.</p>\n\n<p>That being said, if you have some special stdlib implementation (or a stdlib implementation with a special flag/switch/option) that does provide this guarantee, then knock yourself out ;) * And at the end of the day you could inspect its code and make that determination for yourself, but honestly that way madness lies!</p>\n"}, {"tags": [], "owner": {"reputation": 4732, "user_id": 8477999, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f8172e1919af53269de92316dcf03a03?s=128&d=identicon&r=PG&f=1", "display_name": "Gem Taylor", "link": "https://stackoverflow.com/users/8477999/gem-taylor"}, "is_accepted": false, "score": 3, "last_activity_date": 1536756228, "last_edit_date": 1536756228, "creation_date": 1536755850, "answer_id": 52295377, "question_id": 52294896, "link": "https://stackoverflow.com/questions/52294896/could-stdlist-be-used-for-a-simple-lock-free-queue/52295377#52295377", "title": "Could std::list be used for a simple lock-free queue?", "body": "<p>NO</p>\n\n<p>Imagine the list had just 1 element and your 2 threads tried to \"simultaneously\" push and pop. </p>\n\n<p>If you have many elements, then popping an element off the front is unlikely to interact with the back pointer, and pushing an element on the back is unlikely to interfere with the front pointer, so the two operations /should/ be safe in terms of the list's integrity.</p>\n\n<p>But clearly, when you pop the last element from the front, then the back pointer will also get updated, to say there are no more elements, and when you push an element to the back and the list is empty, then the front pointer is updated. Can you guarantee the order of those operations, and that they won't snaggle? You have protection for if the size is zero, but not for if the size is 1.</p>\n\n<p>Another thing that concerns me is that since c++11 size() is an \"instant\" answer O(0), not a scan O(n), and to do this list keeps an integer count. If both push and pop modify the size counter \"simultaneously\", then they may snaggle and end up with an incorrect size value. If the internals of list use the value of size as an \"is_empty()\" check, perhaps to optimise inserting to an empty list, or popping the last element, then they may be fooled into performing inappropriate operations.</p>\n"}], "owner": {"reputation": 113, "user_id": 7297988, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-JMvQfSBK-qU/AAAAAAAAAAI/AAAAAAAAADM/_IEsQArQYfk/photo.jpg?sz=128", "display_name": "Bertinchamps", "link": "https://stackoverflow.com/users/7297988/bertinchamps"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 261, "favorite_count": 0, "accepted_answer_id": 52295015, "answer_count": 2, "score": 2, "last_activity_date": 1536756228, "creation_date": 1536754392, "last_edit_date": 1536754762, "question_id": 52294896, "link": "https://stackoverflow.com/questions/52294896/could-stdlist-be-used-for-a-simple-lock-free-queue", "title": "Could std::list be used for a simple lock-free queue?", "body": "<p>I am implementing a multi-threaded application in C++11 which uses a thread to poll data from a QUdpSocket (QT5 framework) and another one to process the collected data . </p>\n\n<p>When incoming data is detected by the socket, a <code>ReadyRead()</code> signal is emitted and all datagrams are extracted from a <code>QUdpSocket</code> and copied into a <code>std::list</code>.</p>\n\n<pre><code>void SocketWrapper::QueuePendingDatagrams()\n{    \n  while (hasPendingDatagrams()) {\n    int dataSize = pendingDatagramSize();\n    QByteArray tmpQByte = receiveDatagram().data();\n    datagramList.push_back(tmpQByte); // see const_data\n  }\n  emit newDatagrams(&amp;datagramList);\n}\n</code></pre>\n\n<p>In another thread, the consumer is then started and retrieves the first element of the list until the list is empty.</p>\n\n<pre><code>void Worker::ProcessDatagrams(std::list&lt;QByteArray&gt;* pDatagramList)\n{\n  while (pDatagramList-&gt;size() &gt; 0) {\n      QByteArray tmpDatagram = pDatagramList-&gt;front();\n      pDatagramList-&gt;pop_front();\n\n      // Process and log the data within the datagram...\n}\n</code></pre>\n\n<p>My question is: \nAs I am always popping the first element and pushing after the last one, is this lock-free approach <strong>thread-safe</strong>?</p>\n\n<p>I might (and will) receive more data to the socket during the data processing so both threads will end up running at the same time. To me, it seems that the only data race that might occur could overestimate <code>DatagramList-&gt;size()</code> but I don't see why it would be a problem. If I continuously receive data, I believe that the whole list will be consumed anyway.</p>\n"}, {"tags": ["c++", "qt", "spdlog"], "comments": [{"owner": {"reputation": 4795, "user_id": 683905, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/7bc5b9f8f9c6f0e5d25b2d88e2cc1386?s=128&d=identicon&r=PG", "display_name": "Jaa-c", "link": "https://stackoverflow.com/users/683905/jaa-c"}, "edited": false, "score": 0, "creation_date": 1536754074, "post_id": 52294586, "comment_id": 91537170, "body": "Do you happen to have a debugger attached when running the program?"}, {"owner": {"reputation": 1622, "user_id": 4131835, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/CG2Yh.jpg?s=128&g=1", "display_name": "Main", "link": "https://stackoverflow.com/users/4131835/main"}, "reply_to_user": {"reputation": 4795, "user_id": 683905, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/7bc5b9f8f9c6f0e5d25b2d88e2cc1386?s=128&d=identicon&r=PG", "display_name": "Jaa-c", "link": "https://stackoverflow.com/users/683905/jaa-c"}, "edited": false, "score": 0, "creation_date": 1536754138, "post_id": 52294586, "comment_id": 91537209, "body": "I ran with debugger and also without debugger, both does not output the spdlogging."}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1536755389, "post_id": 52294586, "comment_id": 91537941, "body": "Do you have any other debuggers/IDEs running? Perhaps the platform debug output (Windows has one) can only be consumed by one receiver?"}, {"owner": {"reputation": 1622, "user_id": 4131835, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/CG2Yh.jpg?s=128&g=1", "display_name": "Main", "link": "https://stackoverflow.com/users/4131835/main"}, "edited": false, "score": 0, "creation_date": 1536755576, "post_id": 52294586, "comment_id": 91538064, "body": "No, I am currently only running the Qt Creator."}], "answers": [{"tags": [], "owner": {"reputation": 1622, "user_id": 4131835, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/CG2Yh.jpg?s=128&g=1", "display_name": "Main", "link": "https://stackoverflow.com/users/4131835/main"}, "is_accepted": true, "score": 1, "last_activity_date": 1536821480, "creation_date": 1536821480, "answer_id": 52308093, "question_id": 52294586, "link": "https://stackoverflow.com/questions/52294586/why-qt-creators-application-output-does-not-print-from-spdlog-logger/52308093#52308093", "title": "Why Qt Creator&#39;s application output does not print from spdlog logger", "body": "<p>Yes, the application output does not output the spdlogs. But, I manage to output to terminal by following steps.</p>\n\n<ol>\n<li>Go to Projects, then choose Run configuration for selected kit</li>\n<li>In run settings, check the \"Run in terminal\" option</li>\n<li>Next, add console to CONFIG in Project pro file</li>\n<li>Clean the project</li>\n<li>Build and run.</li>\n</ol>\n\n<p>If these steps don't help, you can delete entire build directory and run the steps again.</p>\n"}, {"tags": [], "owner": {"reputation": 5229, "user_id": 311124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8390def0aea7023b5cd1b7a64306b7e?s=128&d=identicon&r=PG", "display_name": "rakke", "link": "https://stackoverflow.com/users/311124/rakke"}, "is_accepted": false, "score": 1, "last_activity_date": 1539284604, "creation_date": 1539284604, "answer_id": 52767204, "question_id": 52294586, "link": "https://stackoverflow.com/questions/52294586/why-qt-creators-application-output-does-not-print-from-spdlog-logger/52767204#52767204", "title": "Why Qt Creator&#39;s application output does not print from spdlog logger", "body": "<p>I had the same issue, and only way I could get the log messages to appear in the application output tab was to use the msvc logger.</p>\n\n<pre><code>auto sink   = std::make_shared&lt;spdlog::sinks::msvc_sink_mt&gt;();\nauto logger = std::make_shared&lt;spdlog::logger&gt;(\"msvc_logger\", sink);\n</code></pre>\n\n<p>The flip side of this logger is that it doesn't print to the console/terminal. </p>\n\n<p>To write to both the application output and the console using the same logger you could create a distributed sink as this:</p>\n\n<pre><code>auto console_sink = std::make_shared&lt;spdlog::sinks::stdout_color_sink_mt&gt;();\nauto msvc_sink    = std::make_shared&lt;spdlog::sinks::msvc_sink_mt&gt;();\nauto dist_sink    = std::make_shared&lt;spdlog::sinks::dist_sink_st&gt;();\ndist_sink-&gt;add_sink(msvc_sink);\ndist_sink-&gt;add_sink(console_sink);\nauto logger = std::make_shared&lt;spdlog::logger&gt;(\"multi_sink\", dist_sink)\nlogger-&gt;info(\"testing multiple sinks\");\n</code></pre>\n"}], "owner": {"reputation": 1622, "user_id": 4131835, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/CG2Yh.jpg?s=128&g=1", "display_name": "Main", "link": "https://stackoverflow.com/users/4131835/main"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 837, "favorite_count": 0, "accepted_answer_id": 52308093, "answer_count": 2, "score": 1, "last_activity_date": 1539284604, "creation_date": 1536753380, "question_id": 52294586, "link": "https://stackoverflow.com/questions/52294586/why-qt-creators-application-output-does-not-print-from-spdlog-logger", "title": "Why Qt Creator&#39;s application output does not print from spdlog logger", "body": "<p>I have working logging in Visual studio project using spdlog. I used the same project in Qt creator, then the spdlog logging does not output anything. But the std::cout still works and prints to Qt creator's application output window. </p>\n\n<pre><code>std::vector&lt;spdlog::sink_ptr&gt; sinks;\nsinks.push_back(std::make_shared&lt;spdlog::sinks::stdout_color_sink_mt&gt;());\nsinks.push_back(std::make_shared&lt;spdlog::sinks::basic_file_sink_mt&gt;(\"multisink.txt\", true));\nauto appLogger = std::make_shared&lt;spdlog::logger&gt;(\"appLogger\", begin(sinks), end(sinks));\nappLogger-&gt;set_level(spdlog::level::debug);\nspdlog::register_logger(appLogger);\nspdlog::flush_on(spdlog::level::debug);    \nappLogger-&gt;warn(\"this should appear in both console and file\");\n</code></pre>\n"}, {"tags": ["c++", "mysql-connector", "connection-timeout", "mysql-connect"], "comments": [{"owner": {"reputation": 46142, "user_id": 773113, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/FKKLW.jpg?s=128&g=1", "display_name": "Mike Nakis", "link": "https://stackoverflow.com/users/773113/mike-nakis"}, "edited": false, "score": 0, "creation_date": 1536753846, "post_id": 52294500, "comment_id": 91537031, "body": "Can&#39;t you let this thread run to completion while you start another thread to attempt another connection with new parameters?"}, {"owner": {"reputation": 13, "user_id": 9457140, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Fi_BaZxqsBA/AAAAAAAAAAI/AAAAAAAAABY/XgB72Ny_hgo/photo.jpg?sz=128", "display_name": "Greezlock", "link": "https://stackoverflow.com/users/9457140/greezlock"}, "reply_to_user": {"reputation": 46142, "user_id": 773113, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/FKKLW.jpg?s=128&g=1", "display_name": "Mike Nakis", "link": "https://stackoverflow.com/users/773113/mike-nakis"}, "edited": false, "score": 0, "creation_date": 1536754968, "post_id": 52294500, "comment_id": 91537671, "body": "@MikeNakis I thought that &quot;sql::mysql::get_driver_instance()&quot; could create the only &quot;driver&quot; instance (like a singleton) and because of that I had to create only one new connection simultaneously by protecting the process with a mutex. So I can just protect only the &quot;sql::mysql::get_driver_instance();&quot; method with the mutex and then start creating a new connection without any mutexes, right? P.S. I don&#39;t know what made me think that the &quot;connect&quot; method must have been protected with a mutext as well :/"}, {"owner": {"reputation": 46142, "user_id": 773113, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/FKKLW.jpg?s=128&g=1", "display_name": "Mike Nakis", "link": "https://stackoverflow.com/users/773113/mike-nakis"}, "edited": false, "score": 0, "creation_date": 1536771732, "post_id": 52294500, "comment_id": 91548104, "body": "okay, I do not know about that.  I find it hard to believe that either <code>get_driver_instance()</code> or <code>driver-&gt;connect()</code> need protection against re-entrance, but I do not really know."}, {"owner": {"reputation": 13, "user_id": 9457140, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Fi_BaZxqsBA/AAAAAAAAAAI/AAAAAAAAABY/XgB72Ny_hgo/photo.jpg?sz=128", "display_name": "Greezlock", "link": "https://stackoverflow.com/users/9457140/greezlock"}, "reply_to_user": {"reputation": 46142, "user_id": 773113, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/FKKLW.jpg?s=128&g=1", "display_name": "Mike Nakis", "link": "https://stackoverflow.com/users/773113/mike-nakis"}, "edited": false, "score": 0, "creation_date": 1536773619, "post_id": 52294500, "comment_id": 91548990, "body": "@MikeNakis as its <a href=\"https://dev.mysql.com/doc/connector-cpp/1.1/en/connector-cpp-examples-connecting.html\" rel=\"nofollow noreferrer\">documentation</a> says that the only thing we need is to avoid calling this function simultaneously by several threads. But now I&#39;m really in doubt whether we need to call it every time before starting a connection (this resembles an initialisation of the driver).What if it has to be called only once with a mutex protection and there is no any need to call it again any more?It would make my code easier and more pleasurable,to be honest. Any ideas how I could get known about it exactly?Thanks!"}], "answers": [{"tags": [], "owner": {"reputation": 46142, "user_id": 773113, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/FKKLW.jpg?s=128&g=1", "display_name": "Mike Nakis", "link": "https://stackoverflow.com/users/773113/mike-nakis"}, "is_accepted": true, "score": 0, "last_activity_date": 1536778597, "creation_date": 1536778597, "answer_id": 52301729, "question_id": 52294500, "link": "https://stackoverflow.com/questions/52294500/mysql-connector-c-trying-to-stop-connecting-to-a-db-in-the-process-of-it/52301729#52301729", "title": "MySQL Connector/C++. Trying to stop connecting to a DB in the process of it", "body": "<p>So, the documentation of <code>get_driver_instance()</code> says that you must not simultaneously invoke it from multiple threads.  I suppose that's because the first time it is invoked it will create the driver, so re-entrance of that method may result in the creation of multiple instances of the driver.  That's all very fine, because you can invoke this method during the static initialization of your program, outside of any spawned threads, so there is no need to guard it with a mutex.  So, you obtain the driver once and store it for use by the rest of your program.</p>\n\n<p>The documentation of <code>driver-&gt;connect()</code> does <strong><em>not</em></strong> say that it is not re-entrant, so it probably <strong><em>is</em></strong> re-entrant.  This means that you can spawn one thread to try and connect, and spawn additional threads which also try to connect with different parameters.</p>\n\n<p>So, you should not need a mutex anywhere.  If for some reason you really don't want to obtain the driver once and store it for later use, then you can make use of the mutex to guard against re-entering the call to <code>get_driver_instance()</code>, but you do not (and should not) use the mutex to guard against re-entering the call to <code>driver-&gt;connect()</code>.  Thus, you will be able to invoke <code>driver-&gt;connect()</code> in parallel from multiple threads.</p>\n\n<p>Incidentally, <code>get_driver_instance()</code> should return immediately; it is the <code>driver-&gt;connect()</code> call which may take a long time.</p>\n"}], "owner": {"reputation": 13, "user_id": 9457140, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Fi_BaZxqsBA/AAAAAAAAAAI/AAAAAAAAABY/XgB72Ny_hgo/photo.jpg?sz=128", "display_name": "Greezlock", "link": "https://stackoverflow.com/users/9457140/greezlock"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 0, "accepted_answer_id": 52301729, "answer_count": 1, "score": 0, "last_activity_date": 1536778597, "creation_date": 1536753148, "question_id": 52294500, "link": "https://stackoverflow.com/questions/52294500/mysql-connector-c-trying-to-stop-connecting-to-a-db-in-the-process-of-it", "title": "MySQL Connector/C++. Trying to stop connecting to a DB in the process of it", "body": "<pre><code>...\noptions[\"OPT_WRITE_TIMEOUT\"] = timeout;   \nstd::lock_guard&lt;std::recursive_mutex&gt; locker(mutex_); \nauto driver = sql::mysql::get_driver_instance();\nconnection_.reset(driver-&gt;connect(options));\n...\n</code></pre>\n\n<p>This code is being executed in a single thread. It's like a connection thread.</p>\n\n<p>All what I want is to halt this connection during the process of establishing a connection to start a new connection, say, with new changed options. Mustn't there be a safe way to do that or I'm doomed to wait until the current connection attempt has exceeded the timeout?</p>\n"}, {"tags": ["c++", "mfc", "toolbar", "cmfctoolbar", "cmfcmenubutton"], "comments": [{"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1536755710, "post_id": 52294485, "comment_id": 91538169, "body": "As the <a href=\"https://docs.microsoft.com/en-us/cpp/mfc/reference/cmfctoolbar-class#restoreoriginalstate\" rel=\"nofollow noreferrer\">documentation</a> points out: <i>&quot;This method loads the toolbar <b>from the resource file</b> [...]&quot;</i>. If your toolbar isn&#39;t defined in a resource, you cannot use this class member. After all, where should the system load the layout from? You are going to have to recreate your toolbar manually, if you there is no resource to load from. Try to get a copy of Petzold&#39;s <i>&quot;Programming Windows&quot;</i> to learn about resources."}], "answers": [{"comments": [{"owner": {"reputation": 27, "user_id": 10075400, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-rncal5MShRU/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7oWutErUGyJqerUy4rEZZhtdX3P4g/mo/photo.jpg?sz=128", "display_name": "Fatema", "link": "https://stackoverflow.com/users/10075400/fatema"}, "edited": false, "score": 0, "creation_date": 1536760648, "post_id": 52295664, "comment_id": 91541720, "body": "while overriding this function i am using &#39;MFCToolBarButton* pButton = (CMFCToolBarButton*) m_Buttons.GetHead();&#39; and pButton-&gt;SetVisible(); to make the first button visible and it works. Can anyone tell how traverse through all buttons like this and set them visible?"}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "reply_to_user": {"reputation": 27, "user_id": 10075400, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-rncal5MShRU/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7oWutErUGyJqerUy4rEZZhtdX3P4g/mo/photo.jpg?sz=128", "display_name": "Fatema", "link": "https://stackoverflow.com/users/10075400/fatema"}, "edited": false, "score": 0, "creation_date": 1536761080, "post_id": 52295664, "comment_id": 91541986, "body": "@fat: If you have a new question, click the <a href=\"https://stackoverflow.com/questions/ask\">Ask Question</a> button."}, {"owner": {"reputation": 27, "user_id": 10075400, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-rncal5MShRU/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7oWutErUGyJqerUy4rEZZhtdX3P4g/mo/photo.jpg?sz=128", "display_name": "Fatema", "link": "https://stackoverflow.com/users/10075400/fatema"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1536772723, "post_id": 52295664, "comment_id": 91548583, "body": "@IInspectable No, its not a new question. The solution to the problem is not yet found."}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "reply_to_user": {"reputation": 27, "user_id": 10075400, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-rncal5MShRU/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7oWutErUGyJqerUy4rEZZhtdX3P4g/mo/photo.jpg?sz=128", "display_name": "Fatema", "link": "https://stackoverflow.com/users/10075400/fatema"}, "edited": false, "score": 0, "creation_date": 1536773224, "post_id": 52295664, "comment_id": 91548800, "body": "@fat: You accepted this answer, thereby indicating, that it solved your issue (ignoring the fake code). The question you now asked may be part of a larger problem you are trying to solve, but it is a new question, so use the <a href=\"https://stackoverflow.com/questions/ask\">Ask Question</a> button."}, {"owner": {"reputation": 864, "user_id": 10320907, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a781c80933f17fa87d97b70e3fca260?s=128&d=identicon&r=PG", "display_name": "tunglt", "link": "https://stackoverflow.com/users/10320907/tunglt"}, "reply_to_user": {"reputation": 27, "user_id": 10075400, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-rncal5MShRU/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7oWutErUGyJqerUy4rEZZhtdX3P4g/mo/photo.jpg?sz=128", "display_name": "Fatema", "link": "https://stackoverflow.com/users/10075400/fatema"}, "edited": false, "score": 0, "creation_date": 1536785129, "post_id": 52295664, "comment_id": 91554103, "body": "@fat: to set visible all buttons in your collection m_Buttons, using a for loop is an advice, if it does not help, please show us your codes in an other question."}], "tags": [], "owner": {"reputation": 864, "user_id": 10320907, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a781c80933f17fa87d97b70e3fca260?s=128&d=identicon&r=PG", "display_name": "tunglt", "link": "https://stackoverflow.com/users/10320907/tunglt"}, "is_accepted": true, "score": 0, "last_activity_date": 1536762414, "last_edit_date": 1592644375, "creation_date": 1536756642, "answer_id": 52295664, "question_id": 52294485, "link": "https://stackoverflow.com/questions/52294485/how-to-setoriginalstate-of-a-dynamically-created-cmfctoolbar/52295664#52295664", "title": "How to SetOriginalState of a dynamically created CMFCToolbar?", "body": "<p>You should override RestoreOriginalstate() as stated in the <a href=\"https://msdn.microsoft.com/fr-fr/library/bb983298.aspx\" rel=\"nofollow noreferrer\">Note section</a>:</p>\n<blockquote>\n<p>This method is called when the user selects Reset from the customization menu.You can also manually call this method to programmatically reset the state of the menu bar.This method loads the original state from the resource file.</p>\n<p>Override this method if you want to do any processing when the user selects the Reset option.</p>\n</blockquote>\n<p>You should also override CanBeRestored() function, the <a href=\"https://docs.microsoft.com/fr-fr/cpp/mfc/reference/cmfctoolbar-class#canberestored\" rel=\"nofollow noreferrer\">defaut implementation</a> returns FALSE if the resource ID is 0.</p>\n<p>Here is <a href=\"https://github.com/Microsoft/VCSamples/blob/master/VC2010Samples/MFC/Visual%20C++%202008%20Feature%20Pack/IEDemo/LinksBar.cpp\" rel=\"nofollow noreferrer\">an exemple</a> of RestoreOriginalstate() :</p>\n<pre><code>BOOL CLinksBar::RestoreOriginalstate ()\n{\n    RemoveAllButtons ();\n\n    InsertButton (CLinkButton (_T(&quot;MSDN Home&quot;), _T(&quot;http://www.msdn.com&quot;)));\n    InsertButton (CLinkButton (_T(&quot;Microsoft Home&quot;), _T(&quot;http://www.microsoft.com&quot;)));\n    InsertButton (CLinkButton (_T(&quot;Visual C++ Developer Center&quot;), _T(&quot;http://msdn2.microsoft.com/visualc/&quot;)));\n\n    EnableCustomizeButton (TRUE, -1, _T(&quot;&quot;));\n\n    AdjustLayout ();\n    Invalidate ();\n\n    return TRUE;\n} \n</code></pre>\n"}], "owner": {"reputation": 27, "user_id": 10075400, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-rncal5MShRU/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7oWutErUGyJqerUy4rEZZhtdX3P4g/mo/photo.jpg?sz=128", "display_name": "Fatema", "link": "https://stackoverflow.com/users/10075400/fatema"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 249, "favorite_count": 0, "accepted_answer_id": 52295664, "answer_count": 1, "score": 0, "last_activity_date": 1536762414, "creation_date": 1536753102, "question_id": 52294485, "link": "https://stackoverflow.com/questions/52294485/how-to-setoriginalstate-of-a-dynamically-created-cmfctoolbar", "title": "How to SetOriginalState of a dynamically created CMFCToolbar?", "body": "<p>I have create some toolbars dynamically in my mfc application</p>\n\n<pre><code>m_cToolBarEx.CreateEx(this, TBSTYLE_FLAT , WS_CHILD | WS_VISIBLE | CBRS_TOP | CBRS_GRIPPER | CBRS_TOOLTIPS | CBRS_FLYBY | CBRS_SIZE_DYNAMIC | CBRS_HIDE_INPLACE);\n</code></pre>\n\n<p>the toolbar has no bitmap or resource id. I used the function InsertButton to add buttons in my toolbar</p>\n\n<p>When I try to reset this toolbar through <a href=\"https://i.stack.imgur.com/oTDhd.png\" rel=\"nofollow noreferrer\">Reset Toolbar</a> button from menu. The toolbar does not reset to its original state only the <a href=\"https://i.stack.imgur.com/oDX3F.png\" rel=\"nofollow noreferrer\">message box</a> is prompted and no changes are restored.</p>\n\n<p>I assume the problem is when the <code>CMFCToolBar::RestoreOriginalstate()</code> is executed the condtion: </p>\n\n<pre><code>if (m_uiOriginalResID == 0)\n    {\n        return FALSE;\n    }\n</code></pre>\n\n<p>gets true and the function returns false as there is no resource id in the m_uiOriginalResID. </p>\n\n<p>Is there any way to load the dynamically created toolbar or I have to inherit RestoreOriginalstate function and write my own.</p>\n"}, {"tags": ["c++", "java-native-interface", "singleton", "shared-libraries"], "comments": [{"owner": {"reputation": 144, "user_id": 3047226, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000497727031/picture?type=large", "display_name": "NjamNjam", "link": "https://stackoverflow.com/users/3047226/njamnjam"}, "edited": false, "score": 0, "creation_date": 1536752322, "post_id": 52294137, "comment_id": 91536113, "body": "<code>DataStore</code> and <code>Dispatcher</code> are both c++ classes?"}], "answers": [{"comments": [{"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "reply_to_user": {"reputation": 144, "user_id": 3047226, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000497727031/picture?type=large", "display_name": "NjamNjam", "link": "https://stackoverflow.com/users/3047226/njamnjam"}, "edited": false, "score": 0, "creation_date": 1536753060, "post_id": 52294350, "comment_id": 91536494, "body": "@NjamNjam: That <code>private</code> in the class is redundant, class members are private by default."}, {"owner": {"reputation": 144, "user_id": 3047226, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000497727031/picture?type=large", "display_name": "NjamNjam", "link": "https://stackoverflow.com/users/3047226/njamnjam"}, "edited": false, "score": 1, "creation_date": 1536753238, "post_id": 52294350, "comment_id": 91536620, "body": "yep, anyway i prefer it because it explicitly states that you want this constructor to be private and makes it imho more readable and maintainable"}], "tags": [], "owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "is_accepted": true, "score": 2, "last_activity_date": 1536752652, "creation_date": 1536752652, "answer_id": 52294350, "question_id": 52294137, "link": "https://stackoverflow.com/questions/52294137/how-to-store-data-through-the-life-of-a-shared-library/52294350#52294350", "title": "How to store data through the life of a shared library", "body": "<p>You can guarantee that only <code>Dispatcher</code> calls these methods by making them private, and then making <code>Dispatcher</code> a <code>friend</code>.</p>\n\n<p>P.S. a <code>_read_only_variable</code> would be <code>const</code> in C++. The compiler will loudly complain of you try to modify it. But it only guarantees that there is one <code>_read_only_variable</code> <em>per  Datastore</em>, which is pretty trivial and not what you wanted.</p>\n"}], "owner": {"reputation": 583, "user_id": 8244162, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d479d19f773c7128a475d899bf66beba?s=128&d=identicon&r=PG&f=1", "display_name": "J&#243;n&#225;s Bal&#225;zs", "link": "https://stackoverflow.com/users/8244162/j%c3%b3n%c3%a1s-bal%c3%a1zs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 2, "accepted_answer_id": 52294350, "answer_count": 1, "score": 0, "last_activity_date": 1536816036, "creation_date": 1536751916, "last_edit_date": 1536816036, "question_id": 52294137, "link": "https://stackoverflow.com/questions/52294137/how-to-store-data-through-the-life-of-a-shared-library", "title": "How to store data through the life of a shared library", "body": "<p>I'm writing a shared library in C++ which will be called through <code>JNI</code>. I have a class which receives messages from Java and forwards to the appropriate object. Let's call it <code>Dispatcher</code>. There is a <code>DataStore</code> which must exist through the life of the program. Actually some data must be accessible between <code>JNI</code> calls.</p>\n\n<p>My current sketch consists of the two classes as singletons. <code>DataStore</code> looks like this:</p>\n\n<pre><code>class DataStore {\n    // constructors, get_instance() etc. are skipped\n    int _read_only_variable{};\npublic:\n    DataStore (int param) : _read_only_variable(param) {}\n    // or\n    void set_data(int param) {\n        _read_only_variable = param\n    }\n};\n</code></pre>\n\n<p>How can I guarantee that only a <code>Dispatcher</code> object can create a <code>DataStore</code> object or only <code>Dispatcher</code> can call <code>set_data</code>?</p>\n\n<p>From the other side if I guarantee that the <code>_read_only_variable</code> is really written only in the constructor what will make sure that only one instance exists.</p>\n\n<p>I also want to fit <code>SOLID</code> principle thus I would avoid nested classes.</p>\n"}, {"tags": ["c++", "linux", "qt", "qtwebengine", "mpv"], "owner": {"reputation": 63, "user_id": 8457805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e3599209c146df5b803bdef522d2a0b?s=128&d=identicon&r=PG", "display_name": "themusicalduck", "link": "https://stackoverflow.com/users/8457805/themusicalduck"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 152, "favorite_count": 0, "answer_count": 0, "score": 4, "last_activity_date": 1536751331, "creation_date": 1536751331, "question_id": 52293986, "link": "https://stackoverflow.com/questions/52293986/qt-video-playback-with-libmpv-makes-qtwebengine-jquery-content-unsmooth-ubuntu", "title": "Qt video playback with libmpv makes QtWebEngine jquery content unsmooth - Ubuntu", "body": "<p>I have a project that uses libmpv with the opengl widget (as per the examples that come with libmpv) along with a QtWebEngine widget that displays information, graphics and animations (a scrolling ticker for example).</p>\n\n<p>I found that of the video playback options in Qt, mpv was the smoothest and most reliable. It will play back perfectly smoothly any video up to 1080p.</p>\n\n<p>However while video is playing, any animations in QtWebEngine are unsmooth and jittery. Video is also slightly less smooth when something is moving in the webpage.</p>\n\n<p>The system I'm testing with is not struggling for resources (cpu use is around 45%). There is also not any video decoding, as it's playing back raw video (but while it plays back encoded video, the effect is the same, regardless if hardware acceleration is enabled or not).</p>\n\n<p>I figure that the mpv widget is interrupting the MainWindow thread while it processes frames and causing it to freeze every few milliseconds.</p>\n\n<p>As far as I know there is no way to separate the mpv thread from the MainWindow thread though.</p>\n\n<p>I don't know if it'll be possible to make mpv and webengine work together smoothly. I feel like there must be some way to run two widgets at once in one window and not have them mess with each other.</p>\n\n<p>I'm testing with Ubuntu 18.04, QT 5.11 and the latest mpv from git.</p>\n\n<p>Does anyone have any advice or pointers for what to try first? I realise this is somewhat of a broad question but my knowledge of graphics is limited. If anyone has advice on a conceptual level (I don't need someone to code me a fix) I can investigate myself.</p>\n\n<p>Thank you.</p>\n"}, {"tags": ["c++", "ios", "cocoapods", "podspec"], "comments": [{"owner": {"reputation": 17713, "user_id": 1801544, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4CcSB.jpg?s=128&g=1", "display_name": "Larme", "link": "https://stackoverflow.com/users/1801544/larme"}, "edited": false, "score": 0, "creation_date": 1536754897, "post_id": 52293771, "comment_id": 91537637, "body": "Copy/paste content of podspec and errors, not screenshots."}, {"owner": {"reputation": 31, "user_id": 4630427, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-4lBtLBRoGXQ/AAAAAAAAAAI/AAAAAAAAABQ/sxOLGQcETmY/photo.jpg?sz=128", "display_name": "Wildson Lee", "link": "https://stackoverflow.com/users/4630427/wildson-lee"}, "reply_to_user": {"reputation": 17713, "user_id": 1801544, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4CcSB.jpg?s=128&g=1", "display_name": "Larme", "link": "https://stackoverflow.com/users/1801544/larme"}, "edited": false, "score": 0, "creation_date": 1536808159, "post_id": 52293771, "comment_id": 91559462, "body": "@Larme Hi, thank you ! I updated my issues."}, {"owner": {"reputation": 745, "user_id": 3869284, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09d3cc566c040428712d1c9eeacc333c?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan", "link": "https://stackoverflow.com/users/3869284/ryan"}, "edited": false, "score": 0, "creation_date": 1541357674, "post_id": 52293771, "comment_id": 93179885, "body": "You may need to copy/add libstdc++.6.0.9.tbd to the project (<a href=\"https://stackoverflow.com/questions/50694822/xcode-10-ios-12-does-not-contain-libstdc6-0-9\" title=\"xcode 10 ios 12 does not contain libstdc6 0 9\">stackoverflow.com/questions/50694822/&hellip;</a>)"}, {"owner": {"reputation": 7751, "user_id": 83938, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/81b900db36308bed1289e374c32cb4a2?s=128&d=identicon&r=PG&f=1", "display_name": "Nik", "link": "https://stackoverflow.com/users/83938/nik"}, "edited": false, "score": 0, "creation_date": 1604506896, "post_id": 52293771, "comment_id": 114369355, "body": "@WildsonLee what was the solution? Fighting the same problem right now"}], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 4630427, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-4lBtLBRoGXQ/AAAAAAAAAAI/AAAAAAAAABQ/sxOLGQcETmY/photo.jpg?sz=128", "display_name": "Wildson Lee", "link": "https://stackoverflow.com/users/4630427/wildson-lee"}, "edited": false, "score": 0, "creation_date": 1536808118, "post_id": 52297169, "comment_id": 91559456, "body": "thank you so much ! But I run my project in xcode have the same error, maybe the option &quot;-skip-import-validation&quot; just pass the validation&#39;s pod"}], "tags": [], "owner": {"reputation": 21404, "user_id": 556617, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b1a73cc2ef5c749baf9d09a8273c18be?s=128&d=identicon&r=PG", "display_name": "Paul Beusterien", "link": "https://stackoverflow.com/users/556617/paul-beusterien"}, "is_accepted": false, "score": 2, "last_activity_date": 1536761284, "creation_date": 1536761284, "answer_id": 52297169, "question_id": 52293771, "link": "https://stackoverflow.com/questions/52293771/cocoapod-podspec-linting-errors-when-using-c-in-header-files/52297169#52297169", "title": "CocoaPod - Podspec linting errors when using C++ in header files", "body": "<p>It is a <a href=\"https://github.com/CocoaPods/CocoaPods/issues/5152\" rel=\"nofollow noreferrer\">known CocoaPods issue</a> to fail to lint C++ headers.</p>\n\n<p>The workaround is the option <code>--skip-import-validation</code></p>\n"}, {"tags": [], "owner": {"reputation": 1143, "user_id": 7179594, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7f971995c7f5543341b792410b594453?s=128&d=identicon&r=PG&f=1", "display_name": "riguang zheng", "link": "https://stackoverflow.com/users/7179594/riguang-zheng"}, "is_accepted": false, "score": 0, "last_activity_date": 1606402938, "creation_date": 1606402938, "answer_id": 65024522, "question_id": 52293771, "link": "https://stackoverflow.com/questions/52293771/cocoapod-podspec-linting-errors-when-using-c-in-header-files/65024522#65024522", "title": "CocoaPod - Podspec linting errors when using C++ in header files", "body": "<p>Add your c++ header files to the private header group.</p>\n<p>With podspec you can add like this</p>\n<pre><code>spec.private_header_files = 'Headers/Private/*.h'\n</code></pre>\n<p>Inside the private header files, you can safely include stdlib headers</p>\n"}], "owner": {"reputation": 31, "user_id": 4630427, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-4lBtLBRoGXQ/AAAAAAAAAAI/AAAAAAAAABQ/sxOLGQcETmY/photo.jpg?sz=128", "display_name": "Wildson Lee", "link": "https://stackoverflow.com/users/4630427/wildson-lee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1083, "favorite_count": 0, "answer_count": 2, "score": 3, "last_activity_date": 1606402938, "creation_date": 1536750646, "last_edit_date": 1536808011, "question_id": 52293771, "link": "https://stackoverflow.com/questions/52293771/cocoapod-podspec-linting-errors-when-using-c-in-header-files", "title": "CocoaPod - Podspec linting errors when using C++ in header files", "body": "<p>I have an issue when linting headers file include C++.</p>\n\n<pre><code>pod lib lint MyLibrary.podspec\n</code></pre>\n\n<p>Here is my header file declare:</p>\n\n<pre><code>#include &lt;memory&gt;\n#include &lt;string&gt;\n#include &lt;vector&gt;\n#include &lt;stdexcept&gt;\n</code></pre>\n\n<p>I get the following error\nPathToMyHeader:31:10: fatal error: 'memory' file not found</p>\n\n<p>I think 'string', 'vector', 'stdexpept' will be the same errors</p>\n\n<p>Here is my podspec</p>\n\n<pre><code>  s.source_files = 'Pod/Classes/Include/*', 'Pod/Frameworks/MyFramework.framework/Headers/*.h'\n\n  s.resource_bundles = {\n      'Pod' =&gt; ['Pod/Resources/*']\n  }\n\n  s.public_header_files = 'Pod/Frameworks/MyFramework.framework/Headers/*.h'\n  s.vendored_frameworks = 'Pod/Frameworks/MyFramework.framework'\n  s.frameworks = 'Accelerate', 'Security', 'QuartzCore', 'OpenGLES', 'CoreBluetooth', 'CoreGraphics', 'CoreFoundation', 'CoreText', 'MyFramework'\n  s.vendored_libraries = 'Pod/Libraries/*.a'\n  s.libraries = 'z', 'stdc++', 'MyLib'\n  s.pod_target_xcconfig = {\n      'CLANG_CXX_LANGUAGE_STANDARD' =&gt; 'compiler-default',\n      'CLANG_CXX_LIBRARY' =&gt; 'libc++',\n      'OTHER_LDFLAGS' =&gt; '$(inherited) -ObjC'\n  }\n</code></pre>\n\n<p>Errors after linting</p>\n\n<pre><code>While building module 'MyPod' imported from /var/folders/mg/0ckz5wr564sf3ctkr_lbtt440000gn/T/CocoaPods-Lint-20180913-4902-prtn4r-MyPod/App/main.m:3:\n    In file included from &lt;module-includes&gt;:1:\n    In file included from /Users/xxx/Library/Developer/Xcode/DerivedData/App-gtcyhyyxmkxxbbfdxoqxlqrpwaaq/Build/Products/Release-iphonesimulator/MyPod/MyPod.framework/Headers/MyPod-umbrella.h:22:\n    /Users/xxx/Library/Developer/Xcode/DerivedData/App-gtcyhyyxmkxxbbfdxoqxlqrpwaaq/Build/Products/Release-iphonesimulator/MyPod/MyPod.framework/Headers/Header-cpp.h:30:10: fatal error: 'memory' file not found\n    #include &lt;memory&gt;\n             ^~~~~~~~\n    94 warnings and 1 error generated.\n    /var/folders/mg/0ckz5wr564sf3ctkr_lbtt440000gn/T/CocoaPods-Lint-20180913-4902-prtn4r-MyPod/App/main.m:3:9: fatal error: could not build module 'MyPod'\n    @import MyPod;\n     ~~~~~~~^~~~~~~~~~~~~~~~~~~~~~~~~~~\n    94 warnings and 2 errors generated.\n\n    ** BUILD FAILED **\n</code></pre>\n\n<p>Update 09/13/2018\n@Paul Beusterien, thank you so much for help me, it works now.\npod using:</p>\n\n<pre><code>pod lib lint MyPodSpec.podspec --skip-import-validation\n</code></pre>\n\n<p>but after I call pod install for my project in workplace, its seem just passed the pod, but show the same errors when I run my project\n<a href=\"https://i.stack.imgur.com/YioAk.png\" rel=\"nofollow noreferrer\">Error</a></p>\n"}, {"tags": ["c++", "qt", "vtk"], "comments": [{"owner": {"reputation": 6908, "user_id": 5366641, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/71e9ba6e3cdac2461999d9c32ad9d507?s=128&d=identicon&r=PG", "display_name": "scopchanov", "link": "https://stackoverflow.com/users/5366641/scopchanov"}, "edited": false, "score": 0, "creation_date": 1541526807, "post_id": 52293729, "comment_id": 93244679, "body": "May I ask you to mark the answer as accepted. Thank you!"}], "answers": [{"comments": [{"owner": {"reputation": 6908, "user_id": 5366641, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/71e9ba6e3cdac2461999d9c32ad9d507?s=128&d=identicon&r=PG", "display_name": "scopchanov", "link": "https://stackoverflow.com/users/5366641/scopchanov"}, "edited": false, "score": 0, "creation_date": 1537808376, "post_id": 52300144, "comment_id": 91909623, "body": "@AmarKumar did you try this solution?"}, {"owner": {"reputation": 45, "user_id": 10159792, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-RKYI3O0MS7g/AAAAAAAAAAI/AAAAAAAAABI/wifeP_ZJ7oI/photo.jpg?sz=128", "display_name": "Amar Kumar", "link": "https://stackoverflow.com/users/10159792/amar-kumar"}, "edited": false, "score": 0, "creation_date": 1537866964, "post_id": 52300144, "comment_id": 91929639, "body": "from mainwindow.cpp . I am getting the index and inside the ViewerManager.cpp I am increasing the value( changing the value)."}], "tags": [], "owner": {"reputation": 6908, "user_id": 5366641, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/71e9ba6e3cdac2461999d9c32ad9d507?s=128&d=identicon&r=PG", "display_name": "scopchanov", "link": "https://stackoverflow.com/users/5366641/scopchanov"}, "is_accepted": true, "score": 0, "last_activity_date": 1536771341, "creation_date": 1536771341, "answer_id": 52300144, "question_id": 52293729, "link": "https://stackoverflow.com/questions/52293729/how-to-set-the-correct-zoom-factor-of-vtkcamera/52300144#52300144", "title": "How to set the correct zoom-factor of vtkCamera?", "body": "<p>From what you have shared I see two issues:</p>\n\n<ul>\n<li><p><code>vtkCamera::Zoom</code> accepts <code>double</code> as an argument.</p></li>\n<li><p>That redundancy in the code is not necessary. Actually there is a more elegant way to accomplish that using <a href=\"http://doc.qt.io/qt-5/qhash.html\" rel=\"nofollow noreferrer\">QHash</a>.</p></li>\n</ul>\n\n<p>Taking this into consideration, I have prepared and example you could try:</p>\n\n<pre><code>QHash&lt;int, double&gt; hash;\nauto *comboZoom = new QComboBox(this);\n\nhash.insert(0, 0.5);\nhash.insert(1, 1.0);\nhash.insert(2, 2.0);\nhash.insert(3, 4.0);\nhash.insert(4, 8.0);\n\ncomboZoom-&gt;addItems(QStringList{\"50%\", \"100%\", \"200%\", \"400%\", \"800%\"});\n\nconnect(comboZoom, static_cast&lt;void (QComboBox::*)(int)&gt;(&amp;QComboBox::currentIndexChanged), [hash](int index){\n    for (int n = 0; n &lt; numberOfViewers; n++) {\n        viewerDerived[n]-&gt;GetRenderer()-&gt;GetActiveCamera()-&gt;Zoom(hash.value(index));\n    }\n});\n</code></pre>\n"}], "owner": {"reputation": 45, "user_id": 10159792, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-RKYI3O0MS7g/AAAAAAAAAAI/AAAAAAAAABI/wifeP_ZJ7oI/photo.jpg?sz=128", "display_name": "Amar Kumar", "link": "https://stackoverflow.com/users/10159792/amar-kumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 392, "favorite_count": 0, "accepted_answer_id": 52300144, "answer_count": 1, "score": 1, "last_activity_date": 1544425857, "creation_date": 1536750516, "last_edit_date": 1544425857, "question_id": 52293729, "link": "https://stackoverflow.com/questions/52293729/how-to-set-the-correct-zoom-factor-of-vtkcamera", "title": "How to set the correct zoom-factor of vtkCamera?", "body": "<p>I want to increase the size of image equal to 50%,100%, 200%, 400% and 800%. For zooming the DICOM image.for this i will take QComboBox inside my viewer and its index to (50,100,200,400,800).</p>\n\n<p>From the combobox I am getting the index of what percent I need to increase.for\n(example- index(0)-50%,index(1)-100%....so on).</p>\n\n<p>I am using \"vtk(getActiveCamera())\" to increase the size of the image according to the selected index.</p>\n\n<p>I am facing the problem that when I set the size up to 200% it will be set correctly. But when I increase the size to 400% it will be set to 200%+400% =600%. Obviously, I want to set the size only 400%.</p>\n\n<p>Here is my code:</p>\n\n<pre><code>    void ViewerManager::vtkZoomCaller(int index)\n    {\n        int i;\n        switch (index)\n        {\n        case 0:\n            //qDebug() &lt;&lt; \"hello50\";\n            for (i = 0; i &lt; NumberOfViewers; i++) {\n                    viewerDerived[i]-&gt;GetRenderer()-&gt;GetActiveCamera()-&gt;Zoom(0.5);\n                }\n            break;\n        case 1:\n            //qDebug() &lt;&lt; \"hello100\";\n            for (i = 0; i &lt; NumberOfViewers; i++) {\n                viewerDerived[i]-&gt;GetRenderer()-&gt;GetActiveCamera()-&gt;Zoom(1);\n\n            }\n break;\n        case 2:\n            //qDebug() &lt;&lt; \"hello200\";\n            for (i = 0; i &lt; NumberOfViewers; i++) {\n                viewerDerived[i]-&gt;GetRenderer()-&gt;GetActiveCamera()-&gt;Zoom(2);\n                }\n\n            break;\n        case 3:\n            //qDebug() &lt;&lt; \"hello400\";\n            for (i = 0; i &lt; NumberOfViewers; i++) {\n                viewerDerived[i]-&gt;GetRenderer()-&gt;GetActiveCamera()-&gt;Zoom(4);\n                }\nbreak;\n        case 4:\n            //qDebug() &lt;&lt; \"hello800\";\n            for (i = 0; i &lt; NumberOfViewers; i++) {\n                viewerDerived[i]-&gt;GetRenderer()-&gt;GetActiveCamera()-&gt;Zoom(8);\n                }\n            break;\n        default:\n            break;\n        }\n    }\n</code></pre>\n\n<p>When I want to select 100% after the 200% and above any percent then it will not decrease the size.\nAny help is very useful for me.\nThanks in advance</p>\n"}, {"tags": ["c++", "c++11", "pointers"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 2, "creation_date": 1536750594, "post_id": 52293684, "comment_id": 91535150, "body": "which loop ? which pointer? your code is too little to be complete and too much to know what you are refering to...suggested read: <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}, {"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 1, "creation_date": 1536750615, "post_id": 52293684, "comment_id": 91535162, "body": "<code>memcpy(&amp;vector_bytes + k, vector_p + k, 1);</code> invokes undefined behavior, not sure what you are attempting to do here"}, {"owner": {"reputation": 27279, "user_id": 857132, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4fd51ed5980999c7c6ce3729d6cb2184?s=128&d=identicon&r=PG", "display_name": "John3136", "link": "https://stackoverflow.com/users/857132/john3136"}, "edited": false, "score": 3, "creation_date": 1536750681, "post_id": 52293684, "comment_id": 91535199, "body": "What is the point of calling <code>memcpy()</code> 4 times to copy 1 byte each time? The ptr arithmetic is wrong anyway, but even if it wasn&#39;t, what is the point?"}], "answers": [{"comments": [{"owner": {"reputation": 523, "user_id": 5600470, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfcd0c7072c1d224a07a021710cff107?s=128&d=identicon&r=PG&f=1", "display_name": "Vincent Kenbeek", "link": "https://stackoverflow.com/users/5600470/vincent-kenbeek"}, "edited": false, "score": 0, "creation_date": 1536751406, "post_id": 52293795, "comment_id": 91535610, "body": "Thank you very much john. That fixed it. The reason I had it in a for loop was that I wanted to look at each individual byte as well while debugging."}], "tags": [], "owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "is_accepted": true, "score": 3, "last_activity_date": 1536750736, "creation_date": 1536750736, "answer_id": 52293795, "question_id": 52293684, "link": "https://stackoverflow.com/questions/52293684/pointer-changes-on-last-iteration-of-foor-loop/52293795#52293795", "title": "Pointer changes on last iteration of foor loop", "body": "<p>Your <code>vector_bytes</code> variable is typed as <code>uint32_t</code> so <code>&amp;vector_bytes + k</code> does not add <code>k</code> bytes to <code>&amp;vector_bytes</code>, it adds <code>k*sizeof(uint32_t)</code> bytes. As a result your memcpy is overwriting other variables in your program.</p>\n\n<p>You could add a cast, like this</p>\n\n<pre><code>uint32_t vector_bytes;\nfor (int k = 0; k &lt; 4; k++) {\n    memcpy((char*)&amp;vector_bytes + k, vector_p + k, 1);\n}\n</code></pre>\n\n<p>or you could do it without a loop.</p>\n\n<pre><code>uint32_t vector_bytes;\nmemcpy(&amp;vector_bytes, vector_p, 4);\n</code></pre>\n\n<p>Much simpler.</p>\n"}], "owner": {"reputation": 523, "user_id": 5600470, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfcd0c7072c1d224a07a021710cff107?s=128&d=identicon&r=PG&f=1", "display_name": "Vincent Kenbeek", "link": "https://stackoverflow.com/users/5600470/vincent-kenbeek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "accepted_answer_id": 52293795, "answer_count": 1, "score": -1, "last_activity_date": 1536750736, "creation_date": 1536750395, "question_id": 52293684, "link": "https://stackoverflow.com/questions/52293684/pointer-changes-on-last-iteration-of-foor-loop", "title": "Pointer changes on last iteration of foor loop", "body": "<p>I'm trying to implement a streaming ACN receiver in C++. For this I have created a socket which receives data from a test source I got from the internet but runs locally. I receive the data just fine. However when I loop through the individual bytes of the vector in the root layer, the pointer I use suddenly changes on the last iteration of the for loop.  </p>\n\n<p>The code I use for checking the fields in the root layer looks as follows.  </p>\n\n<pre><code>// Locations for each field of the root layer in the packet in the raw data\nchar *preamble_size_p    = &amp;this-&gt;raw[0];\nchar *postamble_size_p   = &amp;this-&gt;raw[2];\nchar *acn_pid_p          = &amp;this-&gt;raw[4];\nchar *flags_and_length_p = &amp;this-&gt;raw[16];\nchar * const vector_p    = &amp;this-&gt;raw[18];\n\nint i;\nuint8_t acn_pid_byte;\n\n// get preamble size and check it\nmemcpy(&amp;this-&gt;packet.root_layer.preamble_size, preamble_size_p, 2);\nthis-&gt;packet.root_layer.preamble_size = htons(this-&gt;packet.root_layer.preamble_size);\nif (this-&gt;packet.root_layer.preamble_size != PREAMBLE_SIZE)\n    return PACKET_ERROR_INVALID_PREAMBLE_SIZE;\n\n// get postamble size and check it\nmemcpy(&amp;this-&gt;packet.root_layer.postamble_size, postamble_size_p, 2);\nthis-&gt;packet.root_layer.postamble_size = htons(this-&gt;packet.root_layer.postamble_size);\nif (this-&gt;packet.root_layer.postamble_size != POSTAMBLE_SIZE)\n    return PACKET_ERROR_INVALID_POSTAMBLE_SIZE;\n\n// get ACN pid and check if valid\nfor (i = 0; i &lt; ACN_PID_SIZE; i++) {\n    memcpy(&amp;acn_pid_byte, acn_pid_p + i, 1);\n    if (acn_pid_byte != ACN_PID[i]) {\n        return PACKET_ERROR_INVALID_ACN_PID;\n    }\n    this-&gt;packet.root_layer.acn_pid[i] = acn_pid_byte;\n}\n\n// get flags and length\nmemcpy(&amp;this-&gt;packet.root_layer.flength, flags_and_length_p, 2);\nthis-&gt;packet.root_layer.flength = htons(this-&gt;packet.root_layer.flength);\n\n/* ERROR HAPPENS IN LOOP BELOW */\n\n// get vector and check if valid\nuint32_t vector_bytes;\nfor (int k = 0; k &lt; 4; k++) {\n    memcpy(&amp;vector_bytes + k, vector_p + k, 1);\n}\n</code></pre>\n\n<p>As you can see I made the vector pointer a constant. It used to be a regular pointer like the others. Even though it is a constant it still changes value.  </p>\n\n<p>raw is just <code>char *raw</code> which is assigned in the constructor of the class and contains the bytes my program receives from the source.</p>\n\n<pre><code>char *raw;  \nint size;\n\nPacket(char *raw, int size) {\n    this-&gt;raw = raw;\n    this-&gt;size = size;\n}\n</code></pre>\n\n<p>The code for receiving the data.</p>\n\n<pre><code>char buffer[MAXLINE] = {0}; // MAXLINE is 1024\nn = recvfrom(sock_fd, (char *)buffer, MAXLINE, MSG_WAITALL, ( struct sockaddr *) &amp;cli_addr, &amp;len);\nPacket packet = Packet(buffer, n);\n</code></pre>\n\n<p>Immediately after this <code>packet.process()</code> is called which starts running the code in the top code block. </p>\n\n<p>I have tried setting a watchpoint in gdb and this is the result. </p>\n\n<pre><code>Breakpoint 1, Packet::processRootLayer (this=0x7fffffffd5e0) at server.cpp:45\n45          memcpy(&amp;this-&gt;packet.root_layer.preamble_size, preamble_size_p, 2);\n(gdb) watch vector_p\nHardware watchpoint 2: vector_p\n(gdb) c\nContinuing.\n\nHardware watchpoint 2: vector_p\n\nOld value = 0x7fffffffdcc2 \"\"\nNew value = 0x7fffffffdc00 \"\"\nPacket::processRootLayer (this=0x7fffffffd5e0) at server.cpp:71\n71          for (int k = 0; k &lt; 4; k++) {\n(gdb) \n</code></pre>\n\n<p>Any help would be appreciated and if you need more information please let me know.</p>\n"}, {"tags": ["c++", "winapi", "design-patterns", "dll"], "comments": [{"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1536749247, "post_id": 52293218, "comment_id": 91534434, "body": "The DLL shouldn&#39;t be the monitor; the main application should. Even then timing becomes an issue. One need look no further than the various gyrations MS went through when attempting to get the DllCanUnloadNow nuances to semi-reliably work (especially with ATL) in the in-proc COM architecture to see this is not a trivial problem to solve."}, {"owner": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "edited": false, "score": 1, "creation_date": 1536749363, "post_id": 52293218, "comment_id": 91534510, "body": "presumably you&#39;ll need to notify the application that the dll should be unloaded then the application will asynchronously on a separate thread wait for nobody to be using the dll (using mutexes?) then unload."}], "answers": [{"comments": [{"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1536755135, "post_id": 52293473, "comment_id": 91537786, "body": "Mandatory reading: <a href=\"https://blogs.msdn.microsoft.com/oldnewthing/20131105-00/?p=2733\" rel=\"nofollow noreferrer\">What is the point of FreeLibraryAndExitThread?</a>"}], "tags": [], "owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "is_accepted": false, "score": 2, "last_activity_date": 1536749714, "creation_date": 1536749714, "answer_id": 52293473, "question_id": 52293218, "link": "https://stackoverflow.com/questions/52293218/how-do-i-unload-a-dll-module-upon-a-request-from-the-dll-side-to-unload-it/52293473#52293473", "title": "How do I unload a DLL module upon a request from the DLL side to unload it?", "body": "<p>There's a function exactly for this purpose: <code>FreeLibraryAndExitThread</code>.  </p>\n"}], "owner": {"reputation": 9543, "user_id": 245376, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/i8mL8.png?s=128&g=1", "display_name": "hkBattousai", "link": "https://stackoverflow.com/users/245376/hkbattousai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 117, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1536749714, "creation_date": 1536748827, "question_id": 52293218, "link": "https://stackoverflow.com/questions/52293218/how-do-i-unload-a-dll-module-upon-a-request-from-the-dll-side-to-unload-it", "title": "How do I unload a DLL module upon a request from the DLL side to unload it?", "body": "<p>I have a main program and a DLL library. Both codes can be summarized as below.</p>\n\n<pre><code>// DLL Module (Start)\nclass DllModuleClass : public IDllModuleInterFace\n{\n    public:\n        // ...\n        void Terminate() override\n        {\n            // ...\n            pMainModuleObject-&gt;OnDllModuleObjectTerminated();   // Notify the main program that the DLL can be unloaded now.\n            // Error occurs at this point (as soon as OnDllModuleObjectTerminated() returns), because it frees the DLL module and this region does not exist anymore.\n        }\n        // ...\n    private:\n        IMainModuleInterFace * pMainModuleObject;\n}\n\nIDllModuleInterFace * GetDllModuleClassInstance();\n// DLL Module (End)\n\n// Main Module (Start)\nclass MainModuleClass : public IMainModuleInterFace\n{\n    public:\n        // ...\n        void OnDllModuleObjectTerminated() override\n        {\n            FreeLibrary(hDllModule); // DLL module is freed from memory here.\n        }   // Tries to go back to `Terminate()` inside the DLL module, but the DLL module is freed now.\n        // ...\n    private:\n        IDllModuleInterFace * pDllModuleObject;\n}\n// Main Module (End)\n</code></pre>\n\n<p>In my code, the DLL module calls a function in the main module in order to notify the main module that the DLL can be unloaded. The main module does so, unloads the DLL from the memory. But the caller from the DLL hasn't return yet. So, after unloading the DLL, there is still a function in the DLL which is still running. This causes an obvious and inevitable runtime error.</p>\n\n<p>Can you suggest a proper way of unloading the DLL in this structure?</p>\n"}, {"tags": ["c++", "header", "include", "configure", "automake"], "answers": [{"comments": [{"owner": {"reputation": 4732, "user_id": 8477999, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f8172e1919af53269de92316dcf03a03?s=128&d=identicon&r=PG&f=1", "display_name": "Gem Taylor", "link": "https://stackoverflow.com/users/8477999/gem-taylor"}, "edited": false, "score": 0, "creation_date": 1536756526, "post_id": 52293246, "comment_id": 91538746, "body": "Agreed, configure is slow enough that you don&#39;t want to run it every day. I just wish recursive project configure could reuse the answers!"}], "tags": [], "owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "is_accepted": true, "score": 5, "last_activity_date": 1536748917, "creation_date": 1536748917, "answer_id": 52293246, "question_id": 52293196, "link": "https://stackoverflow.com/questions/52293196/how-does-configure-script-detect-if-my-system-support-some-header-files-or-cpp/52293246#52293246", "title": "How does &quot;configure&quot; script detect if my system support some header files or cpp feature?", "body": "<blockquote>\n  <p>Does \"configure\" try to generate some c/c++ source code and compile it, in order to see if some features are supported?</p>\n</blockquote>\n\n<p>Yes.</p>\n\n<blockquote>\n  <p>As you know the \"configure\" script usually run very fast [...]</p>\n</blockquote>\n\n<p>Not in my experience. <code>configure</code> is slowwwwww...</p>\n\n<blockquote>\n  <p>So how does \"configure\" achieve this header/feature \"check\"?</p>\n</blockquote>\n\n<p>See Q #1.</p>\n"}], "owner": {"reputation": 8007, "user_id": 5890784, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/dec46088a284202a3be71897845a669d?s=128&d=identicon&r=PG&f=1", "display_name": "Hind Forsum", "link": "https://stackoverflow.com/users/5890784/hind-forsum"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 215, "favorite_count": 0, "accepted_answer_id": 52293246, "answer_count": 1, "score": 0, "last_activity_date": 1536748917, "creation_date": 1536748738, "question_id": 52293196, "link": "https://stackoverflow.com/questions/52293196/how-does-configure-script-detect-if-my-system-support-some-header-files-or-cpp", "title": "How does &quot;configure&quot; script detect if my system support some header files or cpp feature?", "body": "<p>I'm trying to compile google rpc(grpc) on my RHEL 5 box, the configure script checks and throws this error:</p>\n\n<pre><code>configure: error: sched_yield was not found on your system\n</code></pre>\n\n<p>I checked config.log file and found sth like this:</p>\n\n<pre><code>| /* Override any GCC internal prototype to avoid an error.\n|    Use char because int might match the return type of a GCC\n|    builtin and then its argument prototype would still apply.  */\n| #ifdef __cplusplus\n| extern \"C\"\n| #endif\n| char sched_yield ();\n| int\n| main ()\n| {\n| return sched_yield ();\n|   ;\n|   return 0;\n| }\nconfigure:19729: result: no\nconfigure:19736: error: in `/downloads/grpc/third_party/protobuf':\nconfigure:19738: error: sched_yield was not found on your system\n</code></pre>\n\n<p>Well, it's correct, I did a manual test and  is not found. No problem.</p>\n\n<pre><code>But, I just wish to know the principle behind \"configure\"!\n</code></pre>\n\n<p>Does \"configure\" try to generate some c/c++ source code and compile it, in order to see if some features are supported? As you know the \"configure\" script usually run very fast, much faster than calling a lot of gcc/g++ processes to try headers/features.</p>\n\n<p>So how does \"configure\" achieve this header/feature \"check\"?</p>\n"}, {"tags": ["c++", "qt", "googletest"], "comments": [{"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 1, "creation_date": 1536750742, "post_id": 52293172, "comment_id": 91535238, "body": "Could you show the entire error message?  Usually it says the two types..."}, {"owner": {"reputation": 4046, "user_id": 2178238, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WOJwa.png?s=128&g=1", "display_name": "Alberto Miola", "link": "https://stackoverflow.com/users/2178238/alberto-miola"}, "edited": false, "score": 0, "creation_date": 1536750961, "post_id": 52293172, "comment_id": 91535367, "body": "Please try with <code>QString(&quot;text here&quot;).toUtf8().constData();</code> and let me know if it works! You could also check the <code>.toStdString().c_str()</code>. There is also the toStdString() method, but more info: <a href=\"http://doc.qt.io/qt-5/qstring.html\" rel=\"nofollow noreferrer\">doc.qt.io/qt-5/qstring.html</a>"}, {"owner": {"reputation": 1705, "user_id": 9103250, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3c613d7186c7314ee818673ea4c79fd?s=128&d=identicon&r=PG&f=1", "display_name": "CharonX", "link": "https://stackoverflow.com/users/9103250/charonx"}, "reply_to_user": {"reputation": 4046, "user_id": 2178238, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WOJwa.png?s=128&g=1", "display_name": "Alberto Miola", "link": "https://stackoverflow.com/users/2178238/alberto-miola"}, "edited": false, "score": 0, "creation_date": 1536752457, "post_id": 52293172, "comment_id": 91536171, "body": "@AlbertoMiola Thanks. <code>ADD_FAILURE() &lt;&lt; </code>QString(&quot;Test!&quot;).toUtf8().constData()` works of course (it is - in essence - what the <code>qUtf8Printable()</code> macro does) as does <code>.toStdString()</code> - but the intent is to be able to <b>directly</b> use <code>QString</code> and avoiding having to write <code>ADD_FAILURE() &lt;&lt; QString(&quot;blablabla&quot;).toUtf8().constData()</code> each and every time I want to use <code>ADD_FAILURE()</code>, i.e. so that it is enough to write <code>ADD_FAILURE() &lt;&lt; QString(&quot;blablabla&quot;)</code>"}, {"owner": {"reputation": 1705, "user_id": 9103250, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3c613d7186c7314ee818673ea4c79fd?s=128&d=identicon&r=PG&f=1", "display_name": "CharonX", "link": "https://stackoverflow.com/users/9103250/charonx"}, "reply_to_user": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1536753637, "post_id": 52293172, "comment_id": 91536882, "body": "@Yakk-AdamNevraumont Here ya go, but the original error message is in German (which is why I put the translated version there)... <code>googletest\\include\\gtest\\gtest-message.h(131): error C2679: Bin&#228;rer Operator &quot;&lt;&lt;&quot;: Es konnte kein Operator gefunden werden, der einen rechtsseitigen Operanden vom Typ &quot;const QString&quot; akzeptiert (oder keine geeignete Konvertierung m&#246;glich)</code> The compiler tries to look for a match for the &quot;&lt;&lt;&quot; operator but can&#39;t find one (nor a conversion of QString - which I had hoped the <code>PrintTo()</code> function might perform, like it does for Printing <code>QString</code> in <code>EXPECT_EQ()</code> etc.)"}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1536755857, "post_id": 52293172, "comment_id": 91538271, "body": "@CharonX When a compiler cannot match an operator, it tells you what the types on the left and right are that it cannot match.  Are you looking at some kind of summary view, and not the actual output of the compiler?"}, {"owner": {"reputation": 1705, "user_id": 9103250, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3c613d7186c7314ee818673ea4c79fd?s=128&d=identicon&r=PG&f=1", "display_name": "CharonX", "link": "https://stackoverflow.com/users/9103250/charonx"}, "reply_to_user": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1536765803, "post_id": 52293172, "comment_id": 91544965, "body": "@Yakk-AdamNevraumont I fear adding the entire raw compiler message to the question would be not very productive as it encompasses 132 lines of errors listing the things it tried to use as match, but failed..."}], "answers": [{"comments": [{"owner": {"reputation": 1705, "user_id": 9103250, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3c613d7186c7314ee818673ea4c79fd?s=128&d=identicon&r=PG&f=1", "display_name": "CharonX", "link": "https://stackoverflow.com/users/9103250/charonx"}, "edited": false, "score": 0, "creation_date": 1536828497, "post_id": 52298696, "comment_id": 91566869, "body": "Thanks, that is exactly what I was looking for! I can extend the gtest header that contains the PrintTo() extensions for Qt and directly use QStrings with gtest&#39;s Macros that invoke <code>::testing::internal::AssertHelper()</code> (like <code>ADD_FAILURE()</code>)"}], "tags": [], "owner": {"reputation": 1758, "user_id": 8724882, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/d88f8198fb4ae68267aced911e3533f9?s=128&d=identicon&r=PG&f=1", "display_name": "sandwood", "link": "https://stackoverflow.com/users/8724882/sandwood"}, "is_accepted": true, "score": 1, "last_activity_date": 1536765915, "creation_date": 1536765915, "answer_id": 52298696, "question_id": 52293172, "link": "https://stackoverflow.com/questions/52293172/is-it-possible-to-directly-feed-a-qstring-into-e-g-googletests-add-failure/52298696#52298696", "title": "Is it possible to directly feed a QString into (e.g.) googletest&#39;s ADD_FAILURE() macro?", "body": "<p>QString does not provide a related non member for streaming insertion, that is the cause of your problem. (the compiler does not find any binary operator function accepting a const QString&amp;  as parameter)</p>\n\n<p>See this Question that is related to your problem : \n<a href=\"https://stackoverflow.com/questions/16281014/operator-for-qstring\">Operator &lt;&lt; for QString</a></p>\n\n<p>I guess that you have in your Qt config file</p>\n\n<pre><code> DEFINES += QT_NO_CAST_TO_ASCII \n</code></pre>\n\n<p>that prevents the compiler for converting your QString to a char* </p>\n\n<p>In this case you can write somewhere this global operator</p>\n\n<pre><code>std::ostream &amp; operator&lt;&lt;(std::ostream &amp; stream, const QString &amp; str)\n{\n    const QByteArray data = str.toUtf8();\n    stream &lt;&lt; std::string(data.constData(), data.size());\n    return stream;\n}\n</code></pre>\n"}], "owner": {"reputation": 1705, "user_id": 9103250, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3c613d7186c7314ee818673ea4c79fd?s=128&d=identicon&r=PG&f=1", "display_name": "CharonX", "link": "https://stackoverflow.com/users/9103250/charonx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 167, "favorite_count": 1, "accepted_answer_id": 52298696, "answer_count": 1, "score": 2, "last_activity_date": 1536766482, "creation_date": 1536748636, "last_edit_date": 1536766482, "question_id": 52293172, "link": "https://stackoverflow.com/questions/52293172/is-it-possible-to-directly-feed-a-qstring-into-e-g-googletests-add-failure", "title": "Is it possible to directly feed a QString into (e.g.) googletest&#39;s ADD_FAILURE() macro?", "body": "<p>I've already enhanced my googletest environment to handle a handful of Qt Types, like QString (for more details see <a href=\"https://stackoverflow.com/questions/42597726/how-to-pretty-print-qstring-with-googletest-framework/42597727#42597727\">this question</a>).</p>\n\n<pre><code>inline void PrintTo(const QString&amp; str, ::std::ostream* os)\n{\n    *os &lt;&lt; \"&lt;\" &lt;&lt; qUtf8Printable(str) &lt;&lt; \"&gt;\";\n}\n</code></pre>\n\n<p>This works fine for most gtest macros like <code>EXPECT_EQ</code> etc.</p>\n\n<p>However when I try to directly pipe a QString into a e.g. <code>ADD_FAILURE()</code> macro the compiler complaints...</p>\n\n<pre><code>//...\nADD_FAILURE() &lt;&lt; QString(\"Test!\");\n//...    \n\ngtest-message.h(131): error C2679: Binary Operator \"&lt;&lt;\": Could not find an operator that accepts \"const QString\" (...)\n</code></pre>\n\n<p>Is there a way to enhance my gtest further to be able to directly use <code>QStrings</code>, or is there no way to avoid wrapping those <code>QStrings</code> in <code>qUtf8Printable()</code>?</p>\n\n<p>To Clarify:<br>\nWriting <code>ADD_FAILURE() &lt;&lt; qUtf8Printable(QString(\"Test!\"));</code> works, as does <code>ADD_FAILURE() &lt;&lt; QString(\"Test!\").toStdString();</code>.<br>\nBut it would be much nicer if those explicit conversions/calls could be avoided, e.g. by enabling <code>ADD_FAILURE()</code> to directly handle <code>QString</code>. (Code duplication is bad - even if this only is only one additional short function call to write each time, you <strong>can</strong> expect to repeat the construct across <strong>thousands</strong> of tests...)</p>\n\n<p>Here an excerpt of the raw (untranslated) error message (the entire error message consists of 132 lines listing what the compiler could not match the function to)</p>\n\n<pre><code>2&gt;c:\\development\\external\\googletest\\include\\gtest\\gtest-message.h(131): error C2679: Bin\u00e4rer Operator \"&lt;&lt;\": Es konnte kein Operator gefunden werden, der einen rechtsseitigen Operanden vom Typ \"const QString\" akzeptiert (oder keine geeignete Konvertierung m\u00f6glich)  \n2&gt;  c:\\program files (x86)\\microsoft visual studio 14.0\\vc\\include\\ostream(495): note: kann \"std::basic_ostream&lt;char,std::char_traits&lt;char&gt;&gt; &amp;std::basic_ostream&lt;char,std::char_traits&lt;char&gt;&gt;::operator &lt;&lt;(std::basic_streambuf&lt;char,std::char_traits&lt;char&gt;&gt; *)\"  \n2&gt;  c:\\program files (x86)\\microsoft visual studio 14.0\\vc\\include\\ostream(475): note: oder \"std::basic_ostream&lt;char,std::char_traits&lt;char&gt;&gt; &amp;std::basic_ostream&lt;char,std::char_traits&lt;char&gt;&gt;::operator &lt;&lt;(const void *)\"  \n2&gt;  c:\\program files (x86)\\microsoft visual studio 14.0\\vc\\include\\ostream(455): note: oder \"std::basic_ostream&lt;char,std::char_traits&lt;char&gt;&gt; &amp;std::basic_ostream&lt;char,std::char_traits&lt;char&gt;&gt;::operator &lt;&lt;(long double)\" sein  \n ... **(snip)** ...  \n2&gt;  c:\\program files (x86)\\microsoft visual studio 14.0\\vc\\include\\ostream(981): note: oder \"std::basic_ostream&lt;char,std::char_traits&lt;char&gt;&gt; &amp;std::operator &lt;&lt;&lt;char,std::char_traits&lt;char&gt;,T&gt;(std::basic_ostream&lt;char,std::char_traits&lt;char&gt;&gt; &amp;&amp;,const _Ty &amp;)\"  \n2&gt;          with  \n2&gt;          [  \n2&gt;              T=QString,  \n2&gt;              _Ty=QString  \n2&gt;          ]  \n2&gt;  c:\\program files (x86)\\microsoft visual studio 14.0\\vc\\include\\ostream(1019): note: oder \"std::basic_ostream&lt;char,std::char_traits&lt;char&gt;&gt; &amp;std::operator &lt;&lt;&lt;char,std::char_traits&lt;char&gt;&gt;(std::basic_ostream&lt;char,std::char_traits&lt;char&gt;&gt; &amp;,const std::error_code &amp;)\"  \n2&gt;  c:\\development\\external\\googletest\\include\\gtest\\gtest-message.h(131): note: bei Anpassung der Argumentliste \"(std::stringstream, const QString)\"  \n2&gt;  c:\\development\\test\\src\\codetest.cpp(390): note: Siehe Verweis auf die Instanziierung der gerade kompilierten Funktions-template \"testing::Message &amp;testing::Message::operator &lt;&lt;&lt;QString&gt;(const T &amp;)\".  \n2&gt;          with  \n2&gt;          [  \n2&gt;              T=QString  \n2&gt;          ] \n</code></pre>\n"}, {"tags": ["c++", "linux", "rhel5"], "comments": [{"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 1, "creation_date": 1536748410, "post_id": 52293084, "comment_id": 91533916, "body": "The man page is likely for the <code>sched_yield</code> function. It should also mention what header you actually need to include. (<code>sched.h</code>?)"}, {"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 1, "creation_date": 1536748738, "post_id": 52293084, "comment_id": 91534120, "body": "IIRC rhel5 have it declared in <code>&lt;pthread.h&gt;</code> and  <code>&lt;sched.h&gt;</code>."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 1, "creation_date": 1536749024, "post_id": 52293084, "comment_id": 91534315, "body": "RHEL5 isn&#39;t updated at all any more (well okay there&#39;s ELS for another couple of years). Insert obligatory emphasis on the importance of upgrading when possible. I&#39;ve been trying to get customers off RHEL6 for years."}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1536764155, "post_id": 52293084, "comment_id": 91544006, "body": "Also see <a href=\"https://unix.stackexchange.com/q/85715/56041\">How do I find packages with Yum?</a> and <a href=\"https://unix.stackexchange.com/q/111377/56041\">Searching for packages using apt-get</a> on <a href=\"http://unix.stackexchange.com/\">Unix &amp; Linux Stack Exchange</a>."}, {"owner": {"reputation": 16607, "user_id": 267482, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/fd69625825bed998b63fef68a23592aa?s=128&d=identicon&r=PG", "display_name": "bobah", "link": "https://stackoverflow.com/users/267482/bobah"}, "edited": false, "score": 1, "creation_date": 1536772301, "post_id": 52293084, "comment_id": 91548405, "body": "I usually <code>fgrep -rw</code> them in <code>&#47;usr&#47;include</code> :-)"}], "answers": [{"tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": true, "score": 5, "last_activity_date": 1536749067, "creation_date": 1536749067, "answer_id": 52293282, "question_id": 52293084, "link": "https://stackoverflow.com/questions/52293084/include-file-sched-yield-h-not-found-on-my-rhel-5/52293282#52293282", "title": "Include file &lt;sched_yield.h&gt; not found on my RHEL 5", "body": "<p><a href=\"https://linux.die.net/man/2/sched_yield\" rel=\"noreferrer\">The manpage I'm looking at</a> says <code>#include &lt;sched.h&gt;</code>.</p>\n\n<p>It's the <em>function</em> that's called <code>sched_yield</code>.</p>\n"}], "owner": {"reputation": 8007, "user_id": 5890784, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/dec46088a284202a3be71897845a669d?s=128&d=identicon&r=PG&f=1", "display_name": "Hind Forsum", "link": "https://stackoverflow.com/users/5890784/hind-forsum"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "accepted_answer_id": 52293282, "answer_count": 1, "score": 1, "last_activity_date": 1536749144, "creation_date": 1536748322, "last_edit_date": 1536749144, "question_id": 52293084, "link": "https://stackoverflow.com/questions/52293084/include-file-sched-yield-h-not-found-on-my-rhel-5", "title": "Include file &lt;sched_yield.h&gt; not found on my RHEL 5", "body": "<p>I'm using a fairly old dev environment, when I \"man sched_yield\" I can see this man page, but if I try to use it, </p>\n\n<p>$cat m.cpp</p>\n\n<pre><code>#include&lt;sched_yield.h&gt;\nint main(){\n    return 0;\n}\n</code></pre>\n\n<p>g++ will say:</p>\n\n<pre><code>error: sched_yield.h: No such file or directory\n</code></pre>\n\n<p>So should I install any extra yum package on this box? How to fix it?</p>\n"}, {"tags": ["c++", "structure"], "comments": [{"owner": {"reputation": 538, "user_id": 9379842, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-AneDlPPq_xc/AAAAAAAAAAI/AAAAAAAAAGY/y4-NHmeaHO8/photo.jpg?sz=128", "display_name": "Hello World", "link": "https://stackoverflow.com/users/9379842/hello-world"}, "edited": false, "score": 1, "creation_date": 1536747770, "post_id": 52292896, "comment_id": 91533525, "body": "Please provide some codes"}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1536747788, "post_id": 52292896, "comment_id": 91533534, "body": "C+++ would require an rvalue; maximal munch parses it as C++ +"}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1536747844, "post_id": 52292896, "comment_id": 91533567, "body": "Even more facetiously, can you wait until C++20 when we get <i>reflection</i>?"}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1536747901, "post_id": 52292896, "comment_id": 91533610, "body": "@Bathsheba - <i>Static</i> reflection. Which doesn&#39;t seem likely to help here."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1536747923, "post_id": 52292896, "comment_id": 91533631, "body": "@StoryTeller: Rats."}, {"owner": {"reputation": 538, "user_id": 9379842, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-AneDlPPq_xc/AAAAAAAAAAI/AAAAAAAAAGY/y4-NHmeaHO8/photo.jpg?sz=128", "display_name": "Hello World", "link": "https://stackoverflow.com/users/9379842/hello-world"}, "edited": false, "score": 0, "creation_date": 1536748932, "post_id": 52292896, "comment_id": 91534252, "body": "Follow this link, it ma help: <a href=\"https://stackoverflow.com/questions/582331/is-there-a-way-to-instantiate-objects-from-a-string-holding-their-class-name\" title=\"is there a way to instantiate objects from a string holding their class name\">stackoverflow.com/questions/582331/&hellip;</a>"}, {"owner": {"reputation": 51, "user_id": 9559030, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Sridhar Lanka", "link": "https://stackoverflow.com/users/9559030/sridhar-lanka"}, "edited": false, "score": 0, "creation_date": 1536749386, "post_id": 52292896, "comment_id": 91534524, "body": "Thank you. I went through this earlier, but in that case we could assign the derived class objects to a common base class pointer. But in my case all the structures that I want to instantiate [based on a string&#39;s text] are totally independent of each other."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1536750067, "post_id": 52292896, "comment_id": 91534882, "body": "@SridharLanka: But then, what return type would you use for the return type of the function that does all this be? Or would you be satisfied with <i>static polymorphism</i>; i.e. a template function?"}], "answers": [{"comments": [{"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 0, "creation_date": 1536748453, "post_id": 52293008, "comment_id": 91533949, "body": "According to the types <code>alice</code> and <code>bob</code> really are, you should make them polymorphic or give the proper destructor to <code>std::unique_ptr</code>."}, {"owner": {"reputation": 51, "user_id": 9559030, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Sridhar Lanka", "link": "https://stackoverflow.com/users/9559030/sridhar-lanka"}, "edited": false, "score": 0, "creation_date": 1536748568, "post_id": 52293008, "comment_id": 91534011, "body": "I have few structures which are already predefined in a header file. I have to use this header file and create an object of those structures based on which one&#39;s name is present in the string variable"}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 0, "creation_date": 1536748827, "post_id": 52293008, "comment_id": 91534186, "body": "<i>Introspection</i> wouldn&#39;t be sufficient to achieve unbounded creation of an object by class name determined at runtime. (Runtime) <i>reflection</i> is the name for a language feature that would be needed."}, {"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "reply_to_user": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 0, "creation_date": 1536749103, "post_id": 52293008, "comment_id": 91534354, "body": "@user2079303 IIRC reflection is introspection on itself, right? If yes, edit welcomed."}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1536749304, "post_id": 52293008, "comment_id": 91534470, "body": "For emphasis: <code>1. Question your design</code>. The question probably indicates a wrong design. If there is a valid reason for it, there should be a proper, fleshed-out example. For instance, even if you could dynamically instantiate an object of some arbitrary type, how would that be useful if you could only default-initialise it? What would the subsequent code do with the instance? etc. If your answer is &#39;I would then check the string and execute different code paths accordingly&#39;, then (A) that may well be poor design again and (B) why don&#39;t you just do that for the instantiation, too?"}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 0, "creation_date": 1536749500, "post_id": 52293008, "comment_id": 91534588, "body": "@YSC as far as I know, introspection is the ability of a program to determine the type of an object at runtime. C++ has limited support for that in the form of RTTI (dynamic languages can go further inspect properties of an object as well). Reflection goes beyond and allows modifying the state of the program (i.e. set values of properties, create new instances etc.)"}], "tags": [], "owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "is_accepted": false, "score": 5, "last_activity_date": 1536748047, "creation_date": 1536748047, "answer_id": 52293008, "question_id": 52292896, "link": "https://stackoverflow.com/questions/52292896/dynamically-instantiate-a-structure-whose-name-is-being-stored-in-a-string-c/52293008#52293008", "title": "Dynamically instantiate a structure whose name is being stored in a string - C++", "body": "<p>The feature you're looking for is called <a href=\"/questions/tagged/introspection\" class=\"post-tag\" title=\"show questions tagged &#39;introspection&#39;\" rel=\"tag\">introspection</a>. This is something C++ has not. So you should fallback to, in this order:</p>\n\n<ol>\n<li>Question your design</li>\n<li>Write a hack</li>\n</ol>\n\n<p>Here's an idea of a hack:</p>\n\n<pre><code>using result_type = /* some type, possibly void */;\nstd::unique_ptr&lt;result_type&gt; factory(std::string const&amp; kind)\n{\n    if (kind == \"alice\") return new alice;\n    if (kind == \"bob\")   return new bob;\n    // ...\n    return nullptr;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": false, "score": 0, "last_activity_date": 1536758353, "last_edit_date": 1536758353, "creation_date": 1536758024, "answer_id": 52296100, "question_id": 52292896, "link": "https://stackoverflow.com/questions/52292896/dynamically-instantiate-a-structure-whose-name-is-being-stored-in-a-string-c/52296100#52296100", "title": "Dynamically instantiate a structure whose name is being stored in a string - C++", "body": "<p>It is not possible in C++ to create an instance of a class by name determined at runtime. C++ has very little ability to <a href=\"https://en.wikipedia.org/wiki/Reflection_(computer_programming)\" rel=\"nofollow noreferrer\">reflect</a>.</p>\n\n<p>You could however build the support for it yourself. The idea here is to create a map of name-string to a factory function which returns an instance of that type. The returned instance needs to be wrapped within <code>std::any</code> because C++ - as a strongly and statically typed language - cannot let the return type to be determined at runtime.</p>\n\n<p>There is a function <code>add_factory</code>, which must be called for <em>all</em> types that you want to be able to instantiate using the name. There is also a helper macro, which like all macros, works because of magic.</p>\n\n<pre><code>auto&amp; factories() {\n    static std::unordered_map&lt;std::string, std::any(*)()&gt; factories;\n    return factories;\n}\n\ntemplate&lt;class T&gt;\nvoid\nadd_factory(const char* name) {\n    // further development: take function as argument so that\n    // non-default-constructible classes can be supported\n    factories()[name] = []() -&gt; std::any {\n        return T{};\n    };\n}\n\nstd::any\ncreate(const char* name)\n{\n    const auto&amp; f = factories();\n    if (f.find(name) != f.end())\n        return f.find(name)-&gt;second();\n    throw std::runtime_error(\"I haven't heard of this type\");\n}\n\n// don't use this macro in header files\n#define ADD_FACTORY(name) namespace { auto dummy_##name = (add_factory&lt;name&gt;(#name), 0); }\n\n// ----- usage -----\n\nstruct a {\n    int i;\n};\nADD_FACTORY(a)\n\nstruct b {\n    double d;\n};\nADD_FACTORY(b)\n\n// factories are not limited to classes\nADD_FACTORY(int)\n\n\nint main()\n{\n    std::any instance = create(\"a\");\n    assert(std::any_cast&lt;a&gt;(&amp;instance));\n}\n</code></pre>\n"}], "owner": {"reputation": 51, "user_id": 9559030, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Sridhar Lanka", "link": "https://stackoverflow.com/users/9559030/sridhar-lanka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1536758353, "creation_date": 1536747735, "last_edit_date": 1536748203, "question_id": 52292896, "link": "https://stackoverflow.com/questions/52292896/dynamically-instantiate-a-structure-whose-name-is-being-stored-in-a-string-c", "title": "Dynamically instantiate a structure whose name is being stored in a string - C++", "body": "<p>I have a string variable which contains the name of the structure. This structure is declared in a header file. I would like to create an object of a structure based on the value of the structure name which is held in the string variable in C++.</p>\n\n<pre><code>struct myStruct{\n    int a;\n    char b;\n};\n\nstring structName = \"myStruct\";\n// Instantiate a structure variable [like this: \"struct myStruct\"]\n</code></pre>\n\n<p>Could anyone please help me with this?</p>\n"}, {"tags": ["c++", "vector", "std", "eigen"], "comments": [{"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1536751478, "post_id": 52292592, "comment_id": 91535645, "body": "This story is rater unlikely to be complete. Please post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. This means two separate <i>buildable</i> (full, complete, no <code>#include</code> directives or other &quot;small&quot; parts omitted) sets of files which reproduce the problem."}, {"owner": {"reputation": 25324, "user_id": 1641621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h50hY.png?s=128&g=1", "display_name": "ggael", "link": "https://stackoverflow.com/users/1641621/ggael"}, "edited": false, "score": 0, "creation_date": 1536752082, "post_id": 52292592, "comment_id": 91535982, "body": "If <code>test_vector.size()</code>  returns 12 and not 10, then you have a severe memory issue, likely out of bound  write. Run your program within <code>valgrind</code> to find the origin of the issue."}, {"owner": {"reputation": 11, "user_id": 10352298, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb1f35802bb64f064e4c3488fe428242?s=128&d=identicon&r=PG&f=1", "display_name": "sfttokyo", "link": "https://stackoverflow.com/users/10352298/sfttokyo"}, "edited": false, "score": 0, "creation_date": 1536808553, "post_id": 52292592, "comment_id": 91559531, "body": "n.m: you are right, it looks like inclusion of gtsam headers is causing confusion of Eigen version - so I&#39;ll push forward with trying to configure properly,"}, {"owner": {"reputation": 11, "user_id": 10352298, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb1f35802bb64f064e4c3488fe428242?s=128&d=identicon&r=PG&f=1", "display_name": "sfttokyo", "link": "https://stackoverflow.com/users/10352298/sfttokyo"}, "edited": false, "score": 0, "creation_date": 1536808599, "post_id": 52292592, "comment_id": 91559542, "body": "ggael: I ran valgrind, results in original, thanks for the tip"}], "owner": {"reputation": 11, "user_id": 10352298, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb1f35802bb64f064e4c3488fe428242?s=128&d=identicon&r=PG&f=1", "display_name": "sfttokyo", "link": "https://stackoverflow.com/users/10352298/sfttokyo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 246, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1536808396, "creation_date": 1536746710, "last_edit_date": 1536808396, "question_id": 52292592, "link": "https://stackoverflow.com/questions/52292592/problem-using-stdvector-with-a-class-struct-containing-eigen-types-defined-in", "title": "Problem using std::vector with a class/struct containing Eigen types defined in separate file", "body": "<p>EDIT  >>conclusion, conflicting Eigen versions because of crappy local configuration? &lt;&lt;</p>\n\n<p>I am trying to define a struct which contains an Eigen::Matrix.\nWhen I use a std::vector and populate the array using some function some strange things occur.</p>\n\n<p>EDIT >> full source code below &lt;&lt;</p>\n\n<p>When I define everything in same file, like above no problem. Vector is populated and returns properly, calling size()accessing  the resultant vector is fine. (size() = 10).</p>\n\n<p>When I define the types and function in  separate .h and .cpp files to the main and do the same thing, the returned data is shifted so that size() returns 12.</p>\n\n<p>Looking at the matrix elements I can observe that the data shifts 1 element to the right for each object in the vector.</p>\n\n<p>The only way I can get it to work when defined in a separate file is to declare the matrix as</p>\n\n<pre><code>Eigen::Matrix&lt;float, 4, 4, Eigen::DontAlign&gt; tf\n</code></pre>\n\n<p>but I guess that is not good for efficiency later.\nAny ideas what the problem is? I assume its due to aligning the matrix when allocating, but why is this a problem when compiling/linking from different source files?</p>\n\n<p>Ubuntu 16.04\ngcc 5.4.0\nc++std 11\nEigen 3.2.1 (provided by GTSAM slam package)</p>\n\n<p>EDIT->>>></p>\n\n<p>complete source code:</p>\n\n<p>key_frames.h</p>\n\n<pre><code>#ifndef __KEY_FRAMES_H__\n#define __KEY_FRAMES_H__\n\n#include &lt;Eigen/Dense&gt;\n\nstruct test_t {\n    EIGEN_MAKE_ALIGNED_OPERATOR_NEW\n    Eigen::Matrix&lt;float, 4, 4&gt; tf;\n    int key;\n};\n\nvoid load_test_v(std::vector&lt;test_t,\n             Eigen::aligned_allocator&lt;test_t&gt; &gt; &amp; test_vector);\n#endif\n</code></pre>\n\n<p>key_frames.cc</p>\n\n<pre><code>#include &lt;vector&gt;\n\n#include \"key_frames.h\"\n\nvoid load_test_v(std::vector&lt;test_t,\n             Eigen::aligned_allocator&lt;test_t&gt; &gt; &amp; test_vector){\n\n     for (int i = 0; i &lt; 10; i++) {\n     test_t tt;\n     tt.tf = Eigen::Matrix4f::Random();\n     tt.key = i;\n     test_vector.push_back(tt);\n    }\n }\n</code></pre>\n\n<p>opt_key_frames.cc</p>\n\n<pre><code>#include &lt;iostream&gt;\n\n#include &lt;gtsam/geometry/Pose2.h&gt;\n\n#include \"key_frames.h\"\n\nint main(int argc, const char** argv) {\n   std::vector&lt;test_t,\n          Eigen::aligned_allocator&lt;test_t&gt; &gt; test_vector;\n   test_vector.clear();\n   std::cout &lt;&lt; \"size of test vector \" &lt;&lt; test_vector.size() &lt;&lt; \"\\n\";\n   load_test_v(test_vector);\n   std::cout &lt;&lt; \"size of test vector \" &lt;&lt; test_vector.size() &lt;&lt; \"\\n\";\n}\n</code></pre>\n\n<p>This is the minimum replicable source. To build I link to gtsam libraries.\nOf interest, if I remove the</p>\n\n<pre><code>#include &lt;gtsam/geometry/Pose2.h&gt;\n</code></pre>\n\n<p>the code works (size() returns 10).\nAlso if I copy the exact code and make file to different directory it works .</p>\n\n<p>out put from valgrid:</p>\n\n<pre><code>--14269-- REDIR: 0x5c0abb0 (libc.so.6:bcmp) redirected to 0x4a28770 (_vgnU_ifunc_wrapper)\n--14269-- REDIR: 0x5cea430 (libc.so.6:__memcmp_sse4_1) redirected to 0x4c33780 (__memcmp_sse4_1)\nsize of test vector 0\n--14269-- REDIR: 0x5c03600 (libc.so.6:posix_memalign) redirected to 0x4c2fd12 (posix_memalign)\nsize of test vector 12\n==14269== \n==14269== HEAP SUMMARY:\n==14269==     in use at exit: 72,736 bytes in 2 blocks\n==14269==   total heap usage: 259 allocs, 257 frees, 98,174 bytes allocated\n==14269== \n==14269== Searching for pointers to 2 not-freed blocks\n==14269== Checked 2,634,840 bytes\n==14269== \n==14269== LEAK SUMMARY:\n==14269==    definitely lost: 0 bytes in 0 blocks\n==14269==    indirectly lost: 0 bytes in 0 blocks\n==14269==      possibly lost: 0 bytes in 0 blocks\n==14269==    still reachable: 72,736 bytes in 2 blocks\n==14269==         suppressed: 0 bytes in 0 blocks\n==14269== Reachable blocks (those to which a pointer was found) are not shown.\n</code></pre>\n\n<p>if remove the gtsam include:</p>\n\n<pre><code>--14359-- REDIR: 0x54613b0 (libc.so.6:__GI_mempcpy) redirected to    0x4c34a90 (__GI_mempcpy)\nsize of test vector 0\n--14359-- REDIR: 0x5459600 (libc.so.6:posix_memalign) redirected to 0x4c2fd12 (posix_memalign)\n--14359-- REDIR: 0x54564f0 (libc.so.6:free) redirected to 0x4c2ec69 (free)\nsize of test vector 10\n==14359== \n</code></pre>\n\n<p>So something is changing there.</p>\n\n<p>Conclusion: my setup is messed up.\nI suspect including Eigen/Dense is targeting Eigen3.3 installed system wide. While GTSam uses Eigen 3.2 shipped with the package, and for whatever reason my local setup is getting them confused, while when I run the code in a different directory, only GTSam Eigen is getting used.</p>\n\n<p>Anyway thanks for the help. Working through it, helped me understand.</p>\n"}, {"tags": ["c++", "std", "chrono"], "comments": [{"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 0, "creation_date": 1536746388, "post_id": 52292391, "comment_id": 91532710, "body": "Could you make your example <i>more</i> minimal, and complete please?"}, {"owner": {"reputation": 31408, "user_id": 243245, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/aed5c13647d581ae231f019a886e05a8?s=128&d=identicon&r=PG", "display_name": "Rup", "link": "https://stackoverflow.com/users/243245/rup"}, "reply_to_user": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 0, "creation_date": 1536746507, "post_id": 52292391, "comment_id": 91532783, "body": "@YSC What do you need to know that isn&#39;t in the error message?"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 31408, "user_id": 243245, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/aed5c13647d581ae231f019a886e05a8?s=128&d=identicon&r=PG", "display_name": "Rup", "link": "https://stackoverflow.com/users/243245/rup"}, "edited": false, "score": 1, "creation_date": 1536746566, "post_id": 52292391, "comment_id": 91532815, "body": "@Rup It&#39;s polite to provide something we can copy/paste to tinker with - this also rules out hidden bugs in omitted code (though indeed that appears unlikely in this case) - or at least to follow the clear instructions of the site, which one should know at 12.7k"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1536747123, "post_id": 52292391, "comment_id": 91533141, "body": "@BenjaminBarrois Though the function argument is a reference, lvalue-to-rvalue conversion drops it when you use that name inside the function later. Consider as a related example how, if you have a <code>SomeType&amp;&amp; foo</code> argument, you still need <code>std::move(foo)</code> later to get the ref back"}, {"owner": {"reputation": 2581, "user_id": 1242646, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/2b686cb8d225bf0023e20013bbd3a987?s=128&d=identicon&r=PG", "display_name": "roalz", "link": "https://stackoverflow.com/users/1242646/roalz"}, "edited": false, "score": 0, "creation_date": 1536747537, "post_id": 52292391, "comment_id": 91533399, "body": "IMHO If you really need high_resolution_clock, you probably need to output a very precise and narrow time representation, not a full date-time. So why not using time_since_epoch() or something like that?"}, {"owner": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "edited": false, "score": 0, "creation_date": 1536748201, "post_id": 52292391, "comment_id": 91533806, "body": "I think I can just switch to system_clock but wanted to make sure there is no easier way, introducing less changes to the code base. Thanks, I think the question is answered sufficiently."}], "answers": [{"tags": [], "owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "is_accepted": true, "score": 4, "last_activity_date": 1536747155, "creation_date": 1536747155, "answer_id": 52292737, "question_id": 52292391, "link": "https://stackoverflow.com/questions/52292391/convert-high-resolution-clocktime-point-to-time-t-with-vc141/52292737#52292737", "title": "Convert high_resolution_clock::time_point to time_t with VC141", "body": "<p>This comes from the fact that <a href=\"https://en.cppreference.com/w/cpp/chrono/high_resolution_clock\" rel=\"nofollow noreferrer\"><code>std::chrono::high_resolution_clock</code></a> is a type alias for  <code>std::chrono::system_clock</code> or <code>std::chrono::steady_clock</code>:</p>\n\n<blockquote>\n  <p>Class <code>std::chrono::high_resolution_clock</code> represents the clock with the smallest tick period provided by the implementation. It may be an alias of <code>std::chrono::system_clock</code> or <code>std::chrono::steady_clock</code>, or a third, independent clock.</p>\n</blockquote>\n\n<p>This means <code>std::chrono::high_resolution_clock::time_point</code> can be a type alias for <code>std::chrono::system_clock::time_point</code>, or it can be an other type. From your question, one can guess it does for MSVC2013, making your code valid, but is not for MSVC2017, making your code invalid.</p>\n\n<p>As a conclusion, the following code might or might not be valid, in an unspecified manner (it depends on the compiler and its target architecture):</p>\n\n<pre><code>std::chrono::high_resolution_clock::time_point timePoint = /* something */;\nstd::chrono::system_clock::to_time_t(timePoint);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 5775, "user_id": 83839, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/d927b767c21dd35ad22bfefcb091266a?s=128&d=identicon&r=PG", "display_name": "Kevin Anderson", "link": "https://stackoverflow.com/users/83839/kevin-anderson"}, "edited": false, "score": 0, "creation_date": 1584643190, "post_id": 52296562, "comment_id": 107506691, "body": "Note that this is somewhat environment-dependent.  For example, on VS2019 in C++17 mode this fails because the <code>output</code> variable does not conform to the <code>system_clock::time_point</code> format for <code>duration</code>.  the solution is to surround the duration with a <code>duration_cast</code> call.  So that line becomes: <code>auto output = systemNow + std::chrono::duration_cast&lt;std::chrono::system_clock::durati&zwnj;&#8203;on&gt;(highResNow - input);</code>  This is because the <code>high_resolution_clock</code> duration has more resolution (nanosecond) which makes the type of <code>output</code> incompatible without the cast."}], "tags": [], "owner": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "is_accepted": false, "score": 1, "last_activity_date": 1536759460, "creation_date": 1536759460, "answer_id": 52296562, "question_id": 52292391, "link": "https://stackoverflow.com/questions/52292391/convert-high-resolution-clocktime-point-to-time-t-with-vc141/52296562#52296562", "title": "Convert high_resolution_clock::time_point to time_t with VC141", "body": "<p>You can only convert between <code>time_point</code>s from the same clock. <code>std::chrono::high_resolution_clock</code> is an alias for another clock. If that happens to be <code>std::chrono::system_clock</code> then you can convert to time_t.</p>\n\n<p>If <code>std::chrono::high_resolution_clock</code> is another clock you can approximately convert it to <code>std::chrono::system_clock</code> by taking the difference between the current time and the input time in <code>std::chrono::high_resolution_clock</code> and adding that difference to the system time:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;chrono&gt;\n\nint main()\n{\n  auto input = std::chrono::high_resolution_clock::now();\n\n  auto highResNow = std::chrono::high_resolution_clock::now();\n  auto systemNow = std::chrono::system_clock::now();\n  auto output = systemNow + (highResNow - input);\n  std::cout &lt;&lt; std::chrono::system_clock::to_time_t( output ) &lt;&lt; \"\\n\";\n}\n</code></pre>\n\n<p>Note that the conversion is only approximate, ideally <code>highResNow</code> and <code>systemNow</code> need to be calculated at the same time but there will be a small gap between them. The conversion will also be more unreliable the further apart the input time and the current time are.</p>\n"}], "owner": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1667, "favorite_count": 1, "accepted_answer_id": 52292737, "answer_count": 2, "score": 1, "last_activity_date": 1536759460, "creation_date": 1536746162, "last_edit_date": 1536747475, "question_id": 52292391, "link": "https://stackoverflow.com/questions/52292391/convert-high-resolution-clocktime-point-to-time-t-with-vc141", "title": "Convert high_resolution_clock::time_point to time_t with VC141", "body": "<p>In Visual Studio 2013 I just used</p>\n\n<pre><code>#include &lt;chrono&gt;\n#include &lt;ctime&gt;\n#include &lt;iostream&gt;\n#include &lt;iomanip&gt;\n#include &lt;sstream&gt;\n\nstd::string Time_Point_String(const std::chrono::high_resolution_clock::time_point &amp; timePoint)\n{\n    time_t timeNow = std::chrono::system_clock::to_time_t(timePoint);\n\n    tm time = *localtime(&amp;timeNow);\n\n    std::stringstream timeString;\ntimeString &lt;&lt; std::setfill('0') &lt;&lt; 1900 + time.tm_year &lt;&lt; \"-\" &lt;&lt; std::setw(2) &lt;&lt; time.tm_mon + 1 &lt;&lt; \"-\" &lt;&lt; std::setw(2) &lt;&lt; time.tm_mday &lt;&lt; \" \" &lt;&lt; std::setw(2) &lt;&lt; time.tm_hour &lt;&lt; \":\" &lt;&lt; std::setw(2) &lt;&lt; time.tm_min &lt;&lt; \":\" &lt;&lt; std::setw(2) &lt;&lt; time.tm_sec;\n\n    return timeString.str();\n}\n\nint main()\n{\n    const std::chrono::high_resolution_clock::time_point &amp; timePoint = std::chrono::high_resolution_clock::now();\n\n    std::cout &lt;&lt; Time_Point_String(timePoint);\n    return 0;\n}\n</code></pre>\n\n<p>But with Visual Studio 2017 I get a compiler error:</p>\n\n<blockquote>\n  <p>Error C2664 '__time64_t std::chrono::system_clock::to_time_t(const std::chrono::system_clock::time_point &amp;) noexcept': cannot convert argument 1 from 'const std::chrono::steady_clock::time_point' to 'const std::chrono::system_clock::time_point &amp;'  </p>\n</blockquote>\n\n<p>So it isn't possible anymore to convert a <code>high_resolution_clock::time_point</code> to a different <code>time_point</code> like <code>system_clock::time_point</code> and there is no possibility to convert <code>high_resolution_clock::time_point</code> to <code>time_t</code> directly?</p>\n\n<p>How can I handle this situation?\nIs it possible at all (some SO postings say they are just completely different clocks and conversion doesn't make sense)?\nAs far as I've seen, the function did what I expected it to do in Visual Studio 2013 application, it has provided the right local time for a high_resolution time_point.</p>\n"}, {"tags": ["c++", "directory", "virtual-machine", "virtualbox", "administrator"], "comments": [{"owner": {"reputation": 772, "user_id": 4043866, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/104dac269b12649d6df8386b88962745?s=128&d=identicon&r=PG", "display_name": "JulianH", "link": "https://stackoverflow.com/users/4043866/julianh"}, "edited": false, "score": 0, "creation_date": 1536746144, "post_id": 52292313, "comment_id": 91532556, "body": "Are you using relative paths? Show us the call to std::filesystem::create_directory."}, {"owner": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "edited": false, "score": 1, "creation_date": 1536746267, "post_id": 52292313, "comment_id": 91532638, "body": "where are you creating the directory? what are the permissions on the parent directory? We need a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 2581, "user_id": 1242646, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/2b686cb8d225bf0023e20013bbd3a987?s=128&d=identicon&r=PG", "display_name": "roalz", "link": "https://stackoverflow.com/users/1242646/roalz"}, "edited": false, "score": 0, "creation_date": 1536746810, "post_id": 52292313, "comment_id": 91532962, "body": "What you ask (running part of code impersonating a different user) is very OS dependent. But there may be alternative approaches to solve your problem, please describe better what you want to obtain and in which scenario."}, {"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 1, "creation_date": 1536746866, "post_id": 52292313, "comment_id": 91532999, "body": "There is probably a difference of environment.   For example, using a relative path, which resolves differently for different accounts.   Without a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> accompanied by such information (environment variables, current working directory, etc) no better guesses are possible."}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1536747771, "post_id": 52292313, "comment_id": 91533526, "body": "what is error code returned by <code>CreateDirectory</code> ? always begin from this. call <code>GetLastError()</code> or better <code>RtlGetLastNtStatus()</code> after this api fail"}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1536749828, "post_id": 52292313, "comment_id": 91534753, "body": "Are you running <i>with administrator rights</i> or <i>as administrator</i>? They&#39;re very much not the same thing."}, {"owner": {"reputation": 1, "user_id": 10352415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f40479d88b3e16e1307c3bbc12f03469?s=128&d=identicon&r=PG&f=1", "display_name": "Foly", "link": "https://stackoverflow.com/users/10352415/foly"}, "edited": false, "score": 0, "creation_date": 1536750214, "post_id": 52292313, "comment_id": 91534952, "body": "I am logged in as normal user and run the program as administrator."}], "owner": {"reputation": 1, "user_id": 10352415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f40479d88b3e16e1307c3bbc12f03469?s=128&d=identicon&r=PG&f=1", "display_name": "Foly", "link": "https://stackoverflow.com/users/10352415/foly"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 349, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1536757865, "creation_date": 1536745948, "last_edit_date": 1536757865, "question_id": 52292313, "link": "https://stackoverflow.com/questions/52292313/createdirectory-or-filesystemcreate-directory-fails-on-a-windows-10-virtua", "title": "CreateDirectory() or filesystem::create_directory() fails on a Windows 10 Virtual Machine with administrator rights", "body": "<p>When I use <code>std::filesystem::create_directory()</code> of the C++ filesystem or <code>CreateDirectory()</code> on a shared folder of a virtual machine it fails to create a directory when I am running the application as administrator. However, when I run it normally on an account and not as administrator, it seems to work fine.</p>\n\n<p>I am using VirtualBox with windows 10 as host system and also windows 10 within the virtual machine. The shared folder is auto mounted and visible within the virtual machine as the E:\\ drive. The error that is returned says \"Path not found\" and the error code given by <code>CreateDirectory()</code> is number 3 on this list: <a href=\"https://docs.microsoft.com/en-us/windows/desktop/debug/system-error-codes--0-499-\" rel=\"nofollow noreferrer\">https://docs.microsoft.com/en-us/windows/desktop/debug/system-error-codes--0-499-</a>. I've used multiple ways to return this error, for <code>std::filesystem::create_directory()</code> I've used its second argument and with <code>CreateDirectory()</code> I've used <code>GetLastError()</code>.</p>\n\n<p>Is there any option to run these functions with no administrator privilege when the application itself runs with administrator rights?</p>\n\n<p>Or is there any other solution?</p>\n\n<p>Example code using filesystem that produces the error:</p>\n\n<pre><code>#include &lt;filesystem&gt;\n\nint main(int argc, char* argv[])\n{\n    std::filesystem::path targetPath = \"E:\\\\TestPath\";\n    std::filesystem::create_directory(targetPath);\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "qt", "qtstylesheets"], "comments": [{"owner": {"reputation": 5396, "user_id": 304090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea21a0ee88ea25ce0fba351149362b29?s=128&d=identicon&r=PG", "display_name": "Jens", "link": "https://stackoverflow.com/users/304090/jens"}, "edited": false, "score": 0, "creation_date": 1536747844, "post_id": 52292184, "comment_id": 91533568, "body": "Can you explain, what you want to achieve? I see a list with consecutive numbers, that should be easy!?"}, {"owner": {"reputation": 107, "user_id": 7117846, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35aff16a0cfaaa61cd25abf884c2c6cb?s=128&d=identicon&r=PG&f=1", "display_name": "Shun", "link": "https://stackoverflow.com/users/7117846/shun"}, "reply_to_user": {"reputation": 5396, "user_id": 304090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea21a0ee88ea25ce0fba351149362b29?s=128&d=identicon&r=PG", "display_name": "Jens", "link": "https://stackoverflow.com/users/304090/jens"}, "edited": false, "score": 0, "creation_date": 1536802656, "post_id": 52292184, "comment_id": 91558322, "body": "@Jens I want to achieve each item has <code>border-top:2px solid</code> exclude the first item."}, {"owner": {"reputation": 5396, "user_id": 304090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea21a0ee88ea25ce0fba351149362b29?s=128&d=identicon&r=PG", "display_name": "Jens", "link": "https://stackoverflow.com/users/304090/jens"}, "edited": false, "score": 1, "creation_date": 1536909634, "post_id": 52292184, "comment_id": 91600550, "body": "I see - that was the point. Qt styles are very limited indeed, so scopchanov&#39;s way must be correct."}], "answers": [{"tags": [], "owner": {"reputation": 5396, "user_id": 304090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea21a0ee88ea25ce0fba351149362b29?s=128&d=identicon&r=PG", "display_name": "Jens", "link": "https://stackoverflow.com/users/304090/jens"}, "is_accepted": false, "score": 0, "last_activity_date": 1536747716, "creation_date": 1536747716, "answer_id": 52292889, "question_id": 52292184, "link": "https://stackoverflow.com/questions/52292184/how-to-set-the-style-of-the-first-last-item-of-qlistwidget/52292889#52292889", "title": "How to set the style of the first/last item of QListWidget?", "body": "<p>Take a look at the <a href=\"http://doc.qt.io/qt-5/stylesheet-reference.html\" rel=\"nofollow noreferrer\">Style Reference</a> for an overview over widget specific styles.</p>\n"}, {"comments": [{"owner": {"reputation": 6908, "user_id": 5366641, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/71e9ba6e3cdac2461999d9c32ad9d507?s=128&d=identicon&r=PG", "display_name": "scopchanov", "link": "https://stackoverflow.com/users/5366641/scopchanov"}, "edited": false, "score": 0, "creation_date": 1536830265, "post_id": 52301737, "comment_id": 91567933, "body": "@Shun, if you like the answer, you might also consider upvoting it."}, {"owner": {"reputation": 107, "user_id": 7117846, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35aff16a0cfaaa61cd25abf884c2c6cb?s=128&d=identicon&r=PG&f=1", "display_name": "Shun", "link": "https://stackoverflow.com/users/7117846/shun"}, "edited": false, "score": 0, "creation_date": 1536914597, "post_id": 52301737, "comment_id": 91603059, "body": "it seems must add some border style to <code>QListWidget::Item</code> that can see effect. I add <code>border-top:0px</code>.Also, when select item, the item text will be disappeared."}, {"owner": {"reputation": 6908, "user_id": 5366641, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/71e9ba6e3cdac2461999d9c32ad9d507?s=128&d=identicon&r=PG", "display_name": "scopchanov", "link": "https://stackoverflow.com/users/5366641/scopchanov"}, "reply_to_user": {"reputation": 107, "user_id": 7117846, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35aff16a0cfaaa61cd25abf884c2c6cb?s=128&d=identicon&r=PG&f=1", "display_name": "Shun", "link": "https://stackoverflow.com/users/7117846/shun"}, "edited": false, "score": 0, "creation_date": 1536915497, "post_id": 52301737, "comment_id": 91603568, "body": "@Shun, if you use delegate, do not set Stylesheet, but paint what you need. As for the disappearing text, I think I might know the cause. However, following the rule for one problem per post, I suggest you to ask a new question. Please put there all the code needed to reproduce the issue and you will most certainly get help."}, {"owner": {"reputation": 6908, "user_id": 5366641, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/71e9ba6e3cdac2461999d9c32ad9d507?s=128&d=identicon&r=PG", "display_name": "scopchanov", "link": "https://stackoverflow.com/users/5366641/scopchanov"}, "reply_to_user": {"reputation": 107, "user_id": 7117846, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35aff16a0cfaaa61cd25abf884c2c6cb?s=128&d=identicon&r=PG&f=1", "display_name": "Shun", "link": "https://stackoverflow.com/users/7117846/shun"}, "edited": false, "score": 0, "creation_date": 1536915961, "post_id": 52301737, "comment_id": 91603849, "body": "@Shun, if you want to make the border 2px tick, just set the pen of the painter before drawing the line: painter-&gt;setPen(QPen(Qt:black, 2));"}, {"owner": {"reputation": 107, "user_id": 7117846, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35aff16a0cfaaa61cd25abf884c2c6cb?s=128&d=identicon&r=PG&f=1", "display_name": "Shun", "link": "https://stackoverflow.com/users/7117846/shun"}, "edited": false, "score": 0, "creation_date": 1536919745, "post_id": 52301737, "comment_id": 91606151, "body": "Also I need custom widget item, so I use <code>listWidget.setItemWidget()</code> that does not cause the issue."}, {"owner": {"reputation": 6908, "user_id": 5366641, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/71e9ba6e3cdac2461999d9c32ad9d507?s=128&d=identicon&r=PG", "display_name": "scopchanov", "link": "https://stackoverflow.com/users/5366641/scopchanov"}, "reply_to_user": {"reputation": 107, "user_id": 7117846, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35aff16a0cfaaa61cd25abf884c2c6cb?s=128&d=identicon&r=PG&f=1", "display_name": "Shun", "link": "https://stackoverflow.com/users/7117846/shun"}, "edited": false, "score": 0, "creation_date": 1536919884, "post_id": 52301737, "comment_id": 91606229, "body": "@Shun, so it is hard to understand what you have and what you need to do. Please post a new question and describe the problem in details. You can also like to this question, since the problems have something in common."}], "tags": [], "owner": {"reputation": 6908, "user_id": 5366641, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/71e9ba6e3cdac2461999d9c32ad9d507?s=128&d=identicon&r=PG", "display_name": "scopchanov", "link": "https://stackoverflow.com/users/5366641/scopchanov"}, "is_accepted": true, "score": 3, "last_activity_date": 1538657304, "last_edit_date": 1538657304, "creation_date": 1536778635, "answer_id": 52301737, "question_id": 52292184, "link": "https://stackoverflow.com/questions/52292184/how-to-set-the-style-of-the-first-last-item-of-qlistwidget/52301737#52301737", "title": "How to set the style of the first/last item of QListWidget?", "body": "<h1>Cause</h1>\n\n<p><em>QListView</em>, resp. <em>QListWidget</em> indeed does not support <code>::item:first</code>, so you are not able to achieve what you want with the use of stylesheets.</p>\n\n<h1>Solution</h1>\n\n<p>You can use a delegate instead. Subclass <a href=\"http://doc.qt.io/qt-5/qstyleditemdelegate.html\" rel=\"nofollow noreferrer\">QStyledItemDelegate</a>, reimplement <a href=\"http://doc.qt.io/qt-5/qabstractitemdelegate.html#paint\" rel=\"nofollow noreferrer\">QAbstractItemDelegate::paint</a> and <a href=\"http://doc.qt.io/qt-5/qabstractitemdelegate.html#sizeHint\" rel=\"nofollow noreferrer\">QAbstractItemDelegate::sizeHint</a> and adjust them to your liking.</p>\n\n<h1>Example</h1>\n\n<p>Here is an example of how this solution could be implemented:</p>\n\n<ol>\n<li>Create a class <code>Delegate : public QStyledItemDelegate</code></li>\n</ol>\n\n<p>In <em>Delegate.cpp</em>:</p>\n\n<pre><code>void Delegate::paint(QPainter *painter, const QStyleOptionViewItem &amp;option, const QModelIndex &amp;index) const\n{\n    int b = option.rect.bottom() - 1;\n\n    painter-&gt;save();\n    painter-&gt;setClipping(true);\n    painter-&gt;setClipRect(option.rect);\n\n    if (index.row() &lt; index.model()-&gt;rowCount() - 1)\n        painter-&gt;drawLine(option.rect.left() + 5, b, option.rect.right() - 5, b);\n\n    painter-&gt;restore();\n\n    QStyledItemDelegate::paint(painter, option, index);\n}\n\nQSize Delegate::sizeHint(const QStyleOptionViewItem &amp;option, const QModelIndex &amp;index) const\n{\n    QSize sz(QStyledItemDelegate::sizeHint(option, index));\n\n    sz.setHeight(32);\n\n    return sz;\n}\n</code></pre>\n\n<ol start=\"2\">\n<li>Test the class in a Qt widgets application</li>\n</ol>\n\n<p>In <em>MainWindow.cpp</em>:</p>\n\n<pre><code>MainWindow::MainWindow(QWidget *parent) :\n    QMainWindow(parent)\n{\n    auto *list = new QListWidget(this);\n\n    list-&gt;addItems(QStringList{\"1\", \"2\", \"3\", \"4\", \"5\", \"6\"});\n    list-&gt;setItemDelegate(new Delegate(this));\n    list-&gt;setFrameStyle(QFrame::NoFrame);\n\n    setCentralWidget(list);\n    setContentsMargins(9, 9, 9, 9);\n    resize(200, 300);\n}\n</code></pre>\n\n<h1>Result</h1>\n\n<p>The provided example produces the following result:</p>\n\n<p><a href=\"https://i.stack.imgur.com/T7TeA.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/T7TeA.png\" alt=\"Window with QListWidget containing 6 items separated by a line\"></a></p>\n"}], "owner": {"reputation": 107, "user_id": 7117846, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35aff16a0cfaaa61cd25abf884c2c6cb?s=128&d=identicon&r=PG&f=1", "display_name": "Shun", "link": "https://stackoverflow.com/users/7117846/shun"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1006, "favorite_count": 0, "accepted_answer_id": 52301737, "answer_count": 2, "score": 2, "last_activity_date": 1540715618, "creation_date": 1536745533, "last_edit_date": 1540715618, "question_id": 52292184, "link": "https://stackoverflow.com/questions/52292184/how-to-set-the-style-of-the-first-last-item-of-qlistwidget", "title": "How to set the style of the first/last item of QListWidget?", "body": "<p>I want to implement the following effect in a <em>QListWidget</em>:</p>\n\n<p><a href=\"https://i.stack.imgur.com/4u8AW.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/4u8AW.png\" alt=\"enter image description here\"></a></p>\n\n<p>Unfortunatelly, there is no <code>QListWidget::item:first</code> in the stylesheet of <em>QListWidget</em>.</p>\n\n<p>Ist there something like <code>css</code>'s brother selector <code>li~li</code> in <code>qss</code>? </p>\n\n<p>I have examined the <a href=\"http://doc.qt.io/qt-5/stylesheet-examples.html\" rel=\"nofollow noreferrer\">Qt Style example</a>, but the info there is not sufficient for me.</p>\n"}, {"tags": ["c++", "qt", "user-interface", "passwords"], "comments": [{"owner": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "edited": false, "score": 0, "creation_date": 1536746545, "post_id": 52292171, "comment_id": 91532800, "body": "You can&#39;t use <code>QMessageBox</code>, it only supports yes/no/cancel etc. Look at <code>QInputDialog</code> and use <code>textEchoMode</code> to hide the password"}, {"owner": {"reputation": 47, "user_id": 9735024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8ec1a398b0aa4716b4895cc3594aa7c?s=128&d=identicon&r=PG&f=1", "display_name": "Minikornio", "link": "https://stackoverflow.com/users/9735024/minikornio"}, "reply_to_user": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 0, "creation_date": 1536833850, "post_id": 52292171, "comment_id": 91570112, "body": "It worked!! Thanks @YSC"}, {"owner": {"reputation": 6908, "user_id": 5366641, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/71e9ba6e3cdac2461999d9c32ad9d507?s=128&d=identicon&r=PG", "display_name": "scopchanov", "link": "https://stackoverflow.com/users/5366641/scopchanov"}, "edited": false, "score": 0, "creation_date": 1541525817, "post_id": 52292171, "comment_id": 93244196, "body": "@Minikornio, may I ask you to mark the answer as accepted."}], "answers": [{"tags": [], "owner": {"reputation": 6908, "user_id": 5366641, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/71e9ba6e3cdac2461999d9c32ad9d507?s=128&d=identicon&r=PG", "display_name": "scopchanov", "link": "https://stackoverflow.com/users/5366641/scopchanov"}, "is_accepted": false, "score": 0, "last_activity_date": 1537152401, "last_edit_date": 1592644375, "creation_date": 1537152401, "answer_id": 52360157, "question_id": 52292171, "link": "https://stackoverflow.com/questions/52292171/how-to-require-a-password-to-close-a-window/52360157#52360157", "title": "How to require a password to close a window?", "body": "<h1>Solution</h1>\n<p>Instead of <code>QMessageBox</code> use <code>QDialog</code> and shape it to your needs.</p>\n<h1>Example</h1>\n<p>Here is an example I have prepared for you in order to demonstrate how the proposed solution could be implemented:</p>\n<pre><code>void MainWindow::closeEvent(QCloseEvent *event) {\n    QDialog dialog(this);\n    auto *layoutDialog = new QVBoxLayout(&amp;dialog);\n    auto *lineEdit = new QLineEdit(&amp;dialog);\n    auto *label = new QLabel(tr(&quot;Enter password to close the window:&quot;), &amp;dialog);\n\n    lineEdit-&gt;setEchoMode(QLineEdit::Password);\n\n    layoutDialog-&gt;addWidget(label);\n    layoutDialog-&gt;addWidget(lineEdit);\n    layoutDialog-&gt;addStretch();\n\n    connect(lineEdit, &amp;QLineEdit::editingFinished, [&amp;]() {\n        dialog.done(lineEdit-&gt;text() == &quot;11223344&quot;);\n    });\n\n    dialog.resize(250, 100);\n\n    if (dialog.exec())\n        event-&gt;accept();\n    else\n        event-&gt;ignore();\n}\n</code></pre>\n<p><strong>Note:</strong> Of course you have to come up with a smarter way of how to keep the password safe.</p>\n"}], "owner": {"reputation": 47, "user_id": 9735024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8ec1a398b0aa4716b4895cc3594aa7c?s=128&d=identicon&r=PG&f=1", "display_name": "Minikornio", "link": "https://stackoverflow.com/users/9735024/minikornio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 207, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1537152401, "creation_date": 1536745507, "last_edit_date": 1537152198, "question_id": 52292171, "link": "https://stackoverflow.com/questions/52292171/how-to-require-a-password-to-close-a-window", "title": "How to require a password to close a window?", "body": "<p>I would like to protect a window from closing, so when the user attempts to do that, a password has to be entered in order to complete the action. There is no need for a username to be entered.</p>\n\n<p>I know how to intercept the <code>QWidget::closeEvent</code>, as in this example:</p>\n\n<pre><code>void MainWindow::closeEvent(QCloseEvent *event) {\n    QMessageBox msgBox;\n    msgBox.setText(tr(\"Do you want to close the window?\"));\n    msgBox.setStandardButtons(QMessageBox::Yes | QMessageBox::No);\n    msgBox.setDefaultButton(QMessageBox::No);\n    msgBox.setModal(true);\n    int ret = msgBox.exec();\n    if (ret == QMessageBox::Yes)\n        event-&gt;accept();\n    else\n        event-&gt;ignore();\n}\n</code></pre>\n\n<p>The problem is, that the example uses <code>QMessageBox</code>, which does not allow a text to be entered, hence it does not suit my needs.</p>\n\n<p>How to modify the code in order to prompt for a password?</p>\n"}, {"tags": ["c++", "memory-management", "delete-operator"], "comments": [{"owner": {"reputation": 2055, "user_id": 6564148, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u3HL5.png?s=128&g=1", "display_name": "George", "link": "https://stackoverflow.com/users/6564148/george"}, "edited": false, "score": 2, "creation_date": 1536745467, "post_id": 52292122, "comment_id": 91532102, "body": "<a href=\"https://en.cppreference.com/w/cpp/language/ub\" rel=\"nofollow noreferrer\">Undefined behaviour</a> is undefined."}], "answers": [{"comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1536745536, "post_id": 52292159, "comment_id": 91532155, "body": "@melpomene: Dammit \ud83d\ude02"}, {"owner": {"reputation": 2055, "user_id": 6564148, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u3HL5.png?s=128&g=1", "display_name": "George", "link": "https://stackoverflow.com/users/6564148/george"}, "edited": false, "score": 2, "creation_date": 1536745548, "post_id": 52292159, "comment_id": 91532159, "body": "Can it be so undefined, that it changes the standard to become defined?"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 2055, "user_id": 6564148, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u3HL5.png?s=128&g=1", "display_name": "George", "link": "https://stackoverflow.com/users/6564148/george"}, "edited": false, "score": 0, "creation_date": 1536745557, "post_id": 52292159, "comment_id": 91532164, "body": "@George ... Dammit! \ud83d\ude02"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 2055, "user_id": 6564148, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u3HL5.png?s=128&g=1", "display_name": "George", "link": "https://stackoverflow.com/users/6564148/george"}, "edited": false, "score": 0, "creation_date": 1536745628, "post_id": 52292159, "comment_id": 91532212, "body": "@George: To be fair, by the as-if rule, combined with the notion that the code could &quot;appear to work&quot;, I suppose the answer is yes."}, {"owner": {"reputation": 13, "user_id": 8268963, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3943db230dd1c3f27b0e5db9c2a21f48?s=128&d=identicon&r=PG&f=1", "display_name": "Tousif", "link": "https://stackoverflow.com/users/8268963/tousif"}, "reply_to_user": {"reputation": 2055, "user_id": 6564148, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u3HL5.png?s=128&g=1", "display_name": "George", "link": "https://stackoverflow.com/users/6564148/george"}, "edited": false, "score": 0, "creation_date": 1536746377, "post_id": 52292159, "comment_id": 91532705, "body": "@George but why does delete q work Should not the memory be marked as unavailable and further call to delete cause a runtime error.   Does calling delete again on the same memory location just mark it as unavailable again or is the behavior still undefined"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 13, "user_id": 8268963, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3943db230dd1c3f27b0e5db9c2a21f48?s=128&d=identicon&r=PG&f=1", "display_name": "Tousif", "link": "https://stackoverflow.com/users/8268963/tousif"}, "edited": false, "score": 0, "creation_date": 1536746415, "post_id": 52292159, "comment_id": 91532736, "body": "@Tousif Your assumption that there should be a runtime error has been invented. Who told you that there must be a runtime error? They may not be a runtime error. It&#39;s chance. It&#39;s undefined. It depends on the implementation."}, {"owner": {"reputation": 13, "user_id": 8268963, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3943db230dd1c3f27b0e5db9c2a21f48?s=128&d=identicon&r=PG&f=1", "display_name": "Tousif", "link": "https://stackoverflow.com/users/8268963/tousif"}, "edited": false, "score": 0, "creation_date": 1536746436, "post_id": 52292159, "comment_id": 91532743, "body": "@LightnessRacesinOrbit I am just trying to wrap my head around the concept of memory deallocation. Your comment is really appreciated."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 13, "user_id": 8268963, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3943db230dd1c3f27b0e5db9c2a21f48?s=128&d=identicon&r=PG&f=1", "display_name": "Tousif", "link": "https://stackoverflow.com/users/8268963/tousif"}, "edited": false, "score": 0, "creation_date": 1536746473, "post_id": 52292159, "comment_id": 91532760, "body": "@Tousif I think the key point you may be missing is that memory &quot;availability&quot; is not checked on every access by the runtime - this would be an unacceptable performance hit. But from the C++ standards POV it <i>could be</i> - it&#39;s undefined!!"}, {"owner": {"reputation": 13, "user_id": 8268963, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3943db230dd1c3f27b0e5db9c2a21f48?s=128&d=identicon&r=PG&f=1", "display_name": "Tousif", "link": "https://stackoverflow.com/users/8268963/tousif"}, "edited": false, "score": 0, "creation_date": 1536746623, "post_id": 52292159, "comment_id": 91532844, "body": "@LightnessRacesinOrbit Thanks a lot. So, to be safe the delete q should not be called."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 13, "user_id": 8268963, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3943db230dd1c3f27b0e5db9c2a21f48?s=128&d=identicon&r=PG&f=1", "display_name": "Tousif", "link": "https://stackoverflow.com/users/8268963/tousif"}, "edited": false, "score": 0, "creation_date": 1536747433, "post_id": 52292159, "comment_id": 91533333, "body": "@Tousif Absolutely. A double-delete is a serious bug. Ideally you wouldn&#39;t be doing manual memory management at all..."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "reply_to_user": {"reputation": 13, "user_id": 8268963, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3943db230dd1c3f27b0e5db9c2a21f48?s=128&d=identicon&r=PG&f=1", "display_name": "Tousif", "link": "https://stackoverflow.com/users/8268963/tousif"}, "edited": false, "score": 0, "creation_date": 1536747440, "post_id": 52292159, "comment_id": 91533339, "body": "@Tousif to be safe you shouldnt have used <code>new</code> in the first place"}, {"owner": {"reputation": 13, "user_id": 8268963, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3943db230dd1c3f27b0e5db9c2a21f48?s=128&d=identicon&r=PG&f=1", "display_name": "Tousif", "link": "https://stackoverflow.com/users/8268963/tousif"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1536747967, "post_id": 52292159, "comment_id": 91533665, "body": "@user463035818 it was a toy example to clarify my doubt."}], "tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": false, "score": 1, "last_activity_date": 1536745514, "last_edit_date": 1536745514, "creation_date": 1536745472, "answer_id": 52292159, "question_id": 52292122, "link": "https://stackoverflow.com/questions/52292122/calling-delete-on-the-shallow-copy-not-blow-up/52292159#52292159", "title": "calling delete on the shallow copy not blow up", "body": "<p>Undefined behaviour means anything can happen.</p>\n\n<p>It might crash.</p>\n\n<p>It might crash your car.</p>\n\n<p>It might crash your brain.</p>\n\n<p>It might crash Sagittarius A* into your brain.</p>\n\n<p>It might crash your brain into your car, then crash them both into Sagittarius A*.</p>\n\n<p>It might appear to work.</p>\n\n<p>But it's still undefined.</p>\n\n<p>Don't expect results.</p>\n"}], "owner": {"reputation": 13, "user_id": 8268963, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3943db230dd1c3f27b0e5db9c2a21f48?s=128&d=identicon&r=PG&f=1", "display_name": "Tousif", "link": "https://stackoverflow.com/users/8268963/tousif"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "closed_date": 1536745513, "answer_count": 1, "score": 0, "last_activity_date": 1536745514, "creation_date": 1536745376, "question_id": 52292122, "link": "https://stackoverflow.com/questions/52292122/calling-delete-on-the-shallow-copy-not-blow-up", "closed_reason": "Duplicate", "title": "calling delete on the shallow copy not blow up", "body": "<p>In the below code, memory is allocated for an integer and later a shallow copy is being made and finally delete is being called on it. How does it still print 23 as the output and why doesn't the delete call on q, cause a run time exception.   </p>\n\n<pre><code>#include &lt;iostream&gt;\n\nusing namespace std;\n\nint main() {\n    int* p = new int(23);\n    int* q = p;\n\n    delete p;\n    cout &lt;&lt; *p &lt;&lt; endl;\n    delete q;\n\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "division", "modulo", "integer-division", "greatest-common-divisor"], "comments": [{"owner": {"reputation": 488, "user_id": 5811284, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/6ba5aaacb39e60b76187811a6007e215?s=128&d=identicon&r=PG&f=1", "display_name": "Raph Schim", "link": "https://stackoverflow.com/users/5811284/raph-schim"}, "edited": false, "score": 3, "creation_date": 1536744173, "post_id": 52291672, "comment_id": 91531310, "body": "Have you tried brute force ?"}, {"owner": {"reputation": 11435, "user_id": 6328256, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PyZe2.png?s=128&g=1", "display_name": "Sash Sinha", "link": "https://stackoverflow.com/users/6328256/sash-sinha"}, "edited": false, "score": 0, "creation_date": 1536744211, "post_id": 52291672, "comment_id": 91531333, "body": "Seems like a good problem to use Dynamic programming"}, {"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "edited": false, "score": 0, "creation_date": 1536744837, "post_id": 52291672, "comment_id": 91531724, "body": "please define &quot;fragment&quot; ?"}, {"owner": {"reputation": 47, "user_id": 10306318, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-h7DByi_BUrM/AAAAAAAAAAI/AAAAAAAAJVo/Rc60AkqxgZ4/photo.jpg?sz=128", "display_name": "Adarsh Pandey", "link": "https://stackoverflow.com/users/10306318/adarsh-pandey"}, "edited": false, "score": 1, "creation_date": 1536745026, "post_id": 52291672, "comment_id": 91531833, "body": "Fragments are continuous parts of number for example if number is 12345 fragments are 1,2,3,4,5,12,23,34,45,123,234,345,1234,2345 and 12345 respectively."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1536745286, "post_id": 52291672, "comment_id": 91531991, "body": "@AdarshPandey: &quot;respectively&quot; is not relevant."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1536746261, "post_id": 52291672, "comment_id": 91532632, "body": "@AdarshPandey the definition of &quot;fragment&quot; belongs into the question."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1536746408, "post_id": 52291672, "comment_id": 91532729, "body": "So your actual question is: &quot;How can I split a string into &quot;continuous fractions&quot;? The definition of &quot;continuous fraction&quot; being the one you provided in your comment."}, {"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "edited": false, "score": 0, "creation_date": 1536771646, "post_id": 52291672, "comment_id": 91548066, "body": "@Jaberwocky I believe his <code>num % 11 == 0</code> already suffices for a &quot;divisible by 11&quot; check, though I expect the OP would be open to other options. In any case yes, I think the &quot;continuous fragments&quot; are the real question here."}], "answers": [{"tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": false, "score": 0, "last_activity_date": 1536745034, "creation_date": 1536745034, "answer_id": 52292028, "question_id": 52291672, "link": "https://stackoverflow.com/questions/52291672/how-to-check-divisibility-of-a-number-in-continuous-fragments-by-11-in-c/52292028#52292028", "title": "How to check divisibility of a number in continuous fragments by 11 in c++", "body": "<p>Imagine that the question was to identify divisibility by 10. That would be trivial (look for fragments ending with zero, the only complication is dealing with more than one 0 in the number.). This is what I suggest you start with.</p>\n\n<p>Testing divisibility by 11 is similarly trivial if you restate the number with a radix of 11. (Again, look for fragments ending with zero.)</p>\n"}, {"tags": [], "owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "is_accepted": false, "score": 0, "last_activity_date": 1536771673, "last_edit_date": 1536771673, "creation_date": 1536756712, "answer_id": 52295686, "question_id": 52291672, "link": "https://stackoverflow.com/questions/52291672/how-to-check-divisibility-of-a-number-in-continuous-fragments-by-11-in-c/52295686#52295686", "title": "How to check divisibility of a number in continuous fragments by 11 in c++", "body": "<p>To simplify the solution I'm going to assume the next base 10 digit larger than the number is <em>exactly</em> representable by a <code>double</code> (if this isn't true, you'll have to find your own way to write <code>pow</code>, <code>floor</code>, and <code>log10</code>). Given this, your input is stored in <code>num</code>, and you're storing the count in <code>count</code> you really just want to find all \"substrings\" of your number. Which is best done by just selecting all valid combinations of begining and ending characters:</p>\n\n<pre><code>for(auto MSD = num &lt;= 0 ? 1U : static_cast&lt;unsigned&gt;(pow(10.0, floor(log10(num)) + 1.0)); MSD &gt; 1U; MSD /= 10) {\n    for(auto LSD = MSD / 10U; LSD &gt; 0U; LSD /= 10U) {\n        if(num % MSD / LSD % 11 == 0U) {\n            ++count;\n        }\n    }\n}\n</code></pre>\n\n<p><a href=\"https://ideone.com/LibXrY\" rel=\"nofollow noreferrer\"><kbd>Live Example</kbd></a></p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 14400374, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7292b47b18a14ec6575fbb2fcf2b287f?s=128&d=identicon&r=PG", "display_name": "Nikhil Sharma", "link": "https://stackoverflow.com/users/14400374/nikhil-sharma"}, "is_accepted": false, "score": 1, "last_activity_date": 1602055921, "last_edit_date": 1602055921, "creation_date": 1601983209, "answer_id": 64224738, "question_id": 52291672, "link": "https://stackoverflow.com/questions/52291672/how-to-check-divisibility-of-a-number-in-continuous-fragments-by-11-in-c/64224738#64224738", "title": "How to check divisibility of a number in continuous fragments by 11 in c++", "body": "<p>You can use this code:</p>\n<pre class=\"lang-cs prettyprint-override\"><code>#include&lt;bits/stdc++.h&gt;\n\nusing namespace std;\n\nint main()\n{\n  int n,i,j,l=0,w,m=0;\n  cin&gt;&gt;n;\n  int temp = n;\n  int temp2 = n;\n \n  while(n!=0)\n  {\n    n=n/10;\n    l++;\n  }\n  int k = l;\n\n  l = (l*(l+1))/2;//Total number of possible continuous fragments of number\n  int arr[l];\n  l=k;\n  for(i=0;i&lt;l;i++)\n  {\n     w=(int)pow(10,i+1);\n     if(i%2!=0)\n       w=w+1;\n     for(j=0;j&lt;k;j++)\n     {\n       arr[m++] = temp%w;\n       temp = temp/10;\n     }\n    temp = temp2;\n    k--;\n  }\n  sort(arr,arr+m);\n  for(i=0;i&lt;m;i++)\n  {\n     if(arr[i]%11==0)\n     cout&lt;&lt;arr[i]&lt;&lt;&quot; &quot;;\n  }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 4461723, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-eC6FfsFKNbk/AAAAAAAAAAI/AAAAAAAAAAA/t8Z8RCuJQM0/photo.jpg?sz=128", "display_name": "mister sharma", "link": "https://stackoverflow.com/users/4461723/mister-sharma"}, "edited": false, "score": 0, "creation_date": 1610533099, "post_id": 65699834, "comment_id": 116161685, "body": "This is working as expected.   121 12155 15598 55"}], "tags": [], "owner": {"reputation": 1, "user_id": 4461723, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-eC6FfsFKNbk/AAAAAAAAAAI/AAAAAAAAAAA/t8Z8RCuJQM0/photo.jpg?sz=128", "display_name": "mister sharma", "link": "https://stackoverflow.com/users/4461723/mister-sharma"}, "is_accepted": false, "score": 0, "last_activity_date": 1610533012, "creation_date": 1610533012, "answer_id": 65699834, "question_id": 52291672, "link": "https://stackoverflow.com/questions/52291672/how-to-check-divisibility-of-a-number-in-continuous-fragments-by-11-in-c/65699834#65699834", "title": "How to check divisibility of a number in continuous fragments by 11 in c++", "body": "<pre><code>using System;\nusing System.Collections.Generic;\nusing System.Text;\nnamespace test\n{\n    class MainClass\n    {\n        public static void Main(string[] args)\n        {\n            int num = 1215598;\n            callme(num);\n            Console.ReadLine();\n        }\n        public static void callme(int number)\n        {\n            int mynumber = number;\n            List&lt;int&gt; arr = new List&lt;int&gt;();\n            List&lt;int&gt; newarr = new List&lt;int&gt;();\n`separating numbers `\n            while (mynumber != 0)\n            {\n                int test = mynumber % 10;\n                mynumber /= 10;\n                arr.Add(test);\n            }\n`reverse add to another array`\n            for (int i = arr.Count - 1, k = i; i &gt;= 0; i--, k--)\n            {\n                int cont = 1;\n                while (cont &lt;= i + 1)\n                {\n                    StringBuilder str = new StringBuilder();\n                    for (int j = 0; j &lt; cont; j++)\n                    {\n                        str.Append(arr[k - j]);\n                    }\n                    newarr.Add(Convert.ToInt32(str.ToString()));\n                    cont++;\n                }\n            }\n`divide and print`\n            foreach (int val in newarr)\n            {\n                if (val % 11 == 0)\n                    Console.WriteLine(val);\n            }\n\n        }\n    }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1912, "user_id": 13903942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YEj2M.png?s=128&g=1", "display_name": "Federico Ba&#249;", "link": "https://stackoverflow.com/users/13903942/federico-ba%c3%b9"}, "edited": false, "score": 0, "creation_date": 1611649552, "post_id": 65891849, "comment_id": 116511959, "body": "Welcome to StackOverflow. While this code may solve the question, including an explanation of how and why this solves the problem would really help to improve the quality of your post, and probably result in more up-votes. Remember that you are answering the question for readers in the future, not just the person asking now. Please edit your answer to add explanations and give an indication of what limitations and assumptions apply.  Have a look here \u2192 <a href=\"https://stackoverflow.com/help/how-to-answer\">How do I write a good answer?</a>"}], "tags": [], "owner": {"reputation": 11, "user_id": 15079602, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AOh14Ggv16bGGP8aoMtWK69qDwPi7kLw3QjSe0wxHxHd_w=k-s128", "display_name": "Guru prasad", "link": "https://stackoverflow.com/users/15079602/guru-prasad"}, "is_accepted": false, "score": 1, "last_activity_date": 1611607072, "last_edit_date": 1611607072, "creation_date": 1611605886, "answer_id": 65891849, "question_id": 52291672, "link": "https://stackoverflow.com/questions/52291672/how-to-check-divisibility-of-a-number-in-continuous-fragments-by-11-in-c/65891849#65891849", "title": "How to check divisibility of a number in continuous fragments by 11 in c++", "body": "<p>You can do this in java ............................</p>\n<pre><code>public class Eleven {\n\n    public static void main(String[] args) {\n        // TODO Auto-generated method stub\n        int n =1215598367,count = 0,c=0,x=0;\n        int t=n;\n        int j=10;\n        while(t&gt;0) {\n            t/=10;\n            count++;\n            }\n        System.out.println(count);\n        int b = n;\n        while(b&gt;0) {\n        while(x&lt;count) {\n                int a = b%j;\n                System.out.println(a);\n                if(a%11==0) {\n                    c++;\n                }   \n                x++;\n                j*=10;\n        }\n        b=b/10;\n        x=0;\n        count = count-1;\n        j=10;\n        }\n        System.out.println(c);\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 15744713, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AOh14GiFl1ccxH0gh4-xKXaOADT_7SvTxbToCSHxSTH_=k-s128", "display_name": "Samarth Subhash Chitley", "link": "https://stackoverflow.com/users/15744713/samarth-subhash-chitley"}, "is_accepted": false, "score": 0, "last_activity_date": 1619151639, "creation_date": 1619151639, "answer_id": 67223964, "question_id": 52291672, "link": "https://stackoverflow.com/questions/52291672/how-to-check-divisibility-of-a-number-in-continuous-fragments-by-11-in-c/67223964#67223964", "title": "How to check divisibility of a number in continuous fragments by 11 in c++", "body": "<p>Solution in Python:</p>\n<pre><code>def DivisibilityByEleven(num):\n    str_num = str(num)\n    count = 0\n    for i in range(len(str_num)):\n        for j in range(len(str_num)):\n            my_num = str_num[i:j+1]\n            if my_num != '':\n                if int(my_num) % 11 == 0:\n                    count += 1\n    return count\n\nif __name__ == '__main__':\n    num = int(input())\n    result = DivisibilityByEleven(num)\n    print(result)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 705, "user_id": 12215054, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4ELRc.png?s=128&g=1", "display_name": "Pawara Siriwardhane", "link": "https://stackoverflow.com/users/12215054/pawara-siriwardhane"}, "edited": false, "score": 0, "creation_date": 1619163080, "post_id": 67224727, "comment_id": 118826416, "body": "Please provide some context to your answer so that others can easily understand your approach."}], "tags": [], "owner": {"reputation": 1, "user_id": 15745269, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/fb601882fc8715ece2b32615ae09a413?s=128&d=identicon&r=PG", "display_name": "user15745269", "link": "https://stackoverflow.com/users/15745269/user15745269"}, "is_accepted": false, "score": 0, "last_activity_date": 1619157808, "creation_date": 1619157808, "answer_id": 67224727, "question_id": 52291672, "link": "https://stackoverflow.com/questions/52291672/how-to-check-divisibility-of-a-number-in-continuous-fragments-by-11-in-c/67224727#67224727", "title": "How to check divisibility of a number in continuous fragments by 11 in c++", "body": "<pre><code>//IN C programming\n  #include &lt;stdio.h&gt;\n    int main()\n    {\n        int num=1215598,c=10,l=0,n=10,a=0,d,count=0,dummy,o=0,num1;\n        dummy=num;\n        while(num)\n        {\n            num=num/10;\n            a++;\n        }\n        num=dummy;\n       while(num&gt;0){\n        while(o&lt;a)\n        {\n            d=num%c;\n            printf(&quot;%d\\n&quot;,d);\n            if(d%11==0)\n            {\n                //printf(&quot;%d&quot;,d);\n                count++;\n            }\n            c*=10;\n            o++;\n        }\n        num=num/n;\n        c=10;\n        a-=1;\n        o=0;\n       }\n       printf(&quot;\\n%d&quot;,count);\n        return 0;\n    }\n</code></pre>\n"}], "owner": {"reputation": 47, "user_id": 10306318, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-h7DByi_BUrM/AAAAAAAAAAI/AAAAAAAAJVo/Rc60AkqxgZ4/photo.jpg?sz=128", "display_name": "Adarsh Pandey", "link": "https://stackoverflow.com/users/10306318/adarsh-pandey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5423, "favorite_count": 0, "answer_count": 7, "score": -1, "last_activity_date": 1619157808, "creation_date": 1536743901, "last_edit_date": 1536757248, "question_id": 52291672, "link": "https://stackoverflow.com/questions/52291672/how-to-check-divisibility-of-a-number-in-continuous-fragments-by-11-in-c", "title": "How to check divisibility of a number in continuous fragments by 11 in c++", "body": "<p>Given a number <code>num</code> find out how many continuous fragments of the given number is divisible by 11 for example given 1215598 these continuous fragments could be formed:</p>\n\n<ul>\n<li>1</li>\n<li>12</li>\n<li>121</li>\n<li>1215</li>\n<li>12155</li>\n<li>121559</li>\n<li>1215598</li>\n<li>2</li>\n<li>21</li>\n<li>215</li>\n<li>2155</li>\n<li>21559</li>\n<li>215598</li>\n<li>1</li>\n<li>15</li>\n<li>155</li>\n<li>1559</li>\n<li>15598</li>\n<li>5</li>\n<li>55</li>\n<li>559</li>\n<li>5598</li>\n<li>5</li>\n<li>59</li>\n<li>598</li>\n<li>9</li>\n<li>98</li>\n<li>8</li>\n</ul>\n\n<p>The correct answer then, would be 4, because these continuous fragments are divisible by 11:</p>\n\n<ul>\n<li>121</li>\n<li>12155</li>\n<li>15598</li>\n<li>55</li>\n</ul>\n\n<p>I want to write a program in C++ to solve this but I am unable to figure out an efficient and suitable way.</p>\n\n<p>So far I have taken a number input and stored it in an array and now I am not able to understand how I can break the number into continuous fragments and check for the divisibility of the same.</p>\n\n<pre><code>#include&lt;iostream&gt;\n#include&lt;vector&gt;\n#include&lt;algorithm&gt;\nusing namespace std;\nint DivisibilityByEleven(int num);\nint num;\nint main()\n{\n   int result=DivisibilityByEleven(num);\n   return 0;\n}\n\nint DivisibilityByEleven(int num)\n{\n    int counter=0;\n    cin&gt;&gt;num;   \n    vector&lt;int&gt; arr;\n    while(num!=0)\n    {\n        int temp=num%10;\n        num=num/10;\n        arr.push_back(temp);\n    }     \n    reverse(arr.begin(),arr.end());\n    for(int i=0;i&lt;arr.size();i++)\n    {\n        cout&lt;&lt;arr[i];\n    }\n\n    if(num%11==0)\n    {\n        counter++;\n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "header", "gsoap"], "comments": [{"owner": {"reputation": 126499, "user_id": 1531124, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/zw18i.png?s=128&g=1", "display_name": "GhostCat", "link": "https://stackoverflow.com/users/1531124/ghostcat"}, "edited": false, "score": 0, "creation_date": 1536744140, "post_id": 52291486, "comment_id": 91531291, "body": "Welcome to Stack Overflow! Other users marked your question for low quality and need for improvement. I re-worded/formatted your input to make it easier to read/understand. Please review my changes to ensure they reflect your intentions. Feel free to drop me a comment in case you have further questions or feedback for me."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 10395016, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82fda76b45286ee2511f822c559f7a52?s=128&d=identicon&r=PG&f=1", "display_name": "Krishna", "link": "https://stackoverflow.com/users/10395016/krishna"}, "is_accepted": false, "score": 0, "last_activity_date": 1537510443, "creation_date": 1537510443, "answer_id": 52437650, "question_id": 52291486, "link": "https://stackoverflow.com/questions/52291486/how-to-pass-non-xml-data-in-header-in-gsoap-c-from-client/52437650#52437650", "title": "How to pass non xml data in header in gsoap C++ from client?", "body": "<p>Soap_Env_header sends default by xml it is not possible to push it in json try some other library hopefully cpprest (Casablanca)</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 10351849, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-IAjEpzsdD3M/AAAAAAAAAAI/AAAAAAAAAAA/CuSlRFuup7A/photo.jpg?sz=128", "display_name": "Parikshit Nangre", "link": "https://stackoverflow.com/users/10351849/parikshit-nangre"}, "is_accepted": false, "score": 0, "last_activity_date": 1537777737, "creation_date": 1537777737, "answer_id": 52475311, "question_id": 52291486, "link": "https://stackoverflow.com/questions/52291486/how-to-pass-non-xml-data-in-header-in-gsoap-c-from-client/52475311#52475311", "title": "How to pass non xml data in header in gsoap C++ from client?", "body": "<p>Finally i found a solution to pass header info in rest call in c++ gsoap -</p>\n\n<pre><code>#include \"json.h\"\n#include &lt;string.h&gt;\n#include \"jsonStub.h\"\n\nstruct Namespace namespaces[] = { {NULL, NULL} };\nint main()\n{\n   struct soap *ctx = soap_new1(SOAP_XML_NOTYPE);\n   soap_init(ctx);\n   struct value *request = new_value(ctx);\n   struct value response;\n\n   ctx-&gt;sendfd = 1;   \n   ctx-&gt;http_extra_header = \"userName:abcd\\r\\npassword:xyz\";\n   *string_of(value_at(value_at(request, \"add\"), \"i\")) = \"10\";\n   *string_of(value_at(value_at(request, \"add\"), \"j\")) = \"20\";\n\n   json_write(ctx, request);\n   printf(\"\\n\");\n   if (json_call(ctx, \"endpoint\",request, &amp;response))\n   {\n         printf( \"json call failed \" );\n         soap_print_fault(ctx, stderr);\n         printf(\"\\n%d\", ctx-&gt;error);\n         printf(\"\\n1: SOAP faultcode = %s\\n\", *soap_faultcode(ctx));\n         printf(\"2: SOAP faultstring = %s\\n\", *soap_faultstring(ctx));\n         printf(\"3: SOAP faultdetail = %s\\n\\n\", *soap_faultdetail(ctx));\n         soap_print_fault_location(ctx, stderr);\n\n   }\n\n   else\n   {\n         printf(\"Success !!!\");\n         json_write(ctx, &amp;response);\n   }\n\n   soap_destroy(ctx);\n   soap_end(ctx);\n   soap_free(ctx);\n   return 0;\n\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 10351849, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-IAjEpzsdD3M/AAAAAAAAAAI/AAAAAAAAAAA/CuSlRFuup7A/photo.jpg?sz=128", "display_name": "Parikshit Nangre", "link": "https://stackoverflow.com/users/10351849/parikshit-nangre"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 272, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1537777737, "creation_date": 1536743309, "last_edit_date": 1536744135, "question_id": 52291486, "link": "https://stackoverflow.com/questions/52291486/how-to-pass-non-xml-data-in-header-in-gsoap-c-from-client", "title": "How to pass non xml data in header in gsoap C++ from client?", "body": "<p>I am using gsoap c++ library to make a java web service call. </p>\n\n<p>I can pass a json file by calling json_call, but i want to add header information. For that i modified the struct SOAP_ENV__Header as:</p>\n\n<pre><code>struct ns3__Header   {       \n  char *username;          \n  char* password;   };   \nstruct SOAP_ENV__Header    {\n  #ifdef WITH_NOEMPTYSTRUCT\n  char dummy;    \n  #endif\n  struct ns3__Header *ns3__MyHeader;\n};\n</code></pre>\n\n<p>Now i can add values in header, but my problem is they are getting added in xml format to the header. But I want just tag:value format. How to achieve that?</p>\n\n<p>When I pass a header, it looks like:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;   &lt;username id=\"_300\"&gt;        &lt;ns3:MyHeader&gt; \n        in soap_out_SOAP_ENV__Header\n    &lt;/ns3:MyHeader&gt;   &lt;/username&gt;   {     \"add\":      {       \"i\": 10,      \"j\": 20,  \n }   }\n</code></pre>\n\n<p>But it should look like:</p>\n\n<pre><code>username:xyz\npassword:abcd\n...\n...\n{\n  \"add\": \n  {\n    \"i\": 10,\n    \"j\": 20,\n\n  }\n} \n</code></pre>\n"}, {"tags": ["c++", "arrays", "arduino", "image-conversion", "e-ink"], "answers": [{"tags": [], "owner": {"reputation": 845, "user_id": 7953924, "user_type": "registered", "profile_image": "https://graph.facebook.com/1651707548176162/picture?type=large", "display_name": "Liudvikas Akelis", "link": "https://stackoverflow.com/users/7953924/liudvikas-akelis"}, "is_accepted": true, "score": 2, "last_activity_date": 1536743696, "creation_date": 1536743696, "answer_id": 52291601, "question_id": 52291396, "link": "https://stackoverflow.com/questions/52291396/arduino-eink-image2lcd-size-of-c-array/52291601#52291601", "title": "Arduino eInk Image2LCD - Size of c-array", "body": "<p>Shooting from the hip here, but if you're using monochrome, you only need one <strong>bit</strong> per pixel (Byte = 8 bits). These bits can be packed into bytes for storage efficiency. Say the first 8 pixels of your image are these:</p>\n\n<pre><code>0 1 0 0 0 0 0 1  \n</code></pre>\n\n<p>If we interpret these eight bits as one binary number, this is <code>1000001</code>, which is <code>65</code> in decimal - so just storing <code>65</code> in an 8-bit integer, taking up only one byte, will store all 8 monochrome pixels. The downside is that it's not as intuitive as having each pixel as a separate value in the array.</p>\n\n<p>I may be wrong, but 1/8th points straight to this kind of compression.</p>\n"}], "owner": {"reputation": 147, "user_id": 7581695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/10212338111949666/picture?type=large", "display_name": "Julian ", "link": "https://stackoverflow.com/users/7581695/julian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 308, "favorite_count": 0, "accepted_answer_id": 52291601, "answer_count": 1, "score": 0, "last_activity_date": 1536743696, "creation_date": 1536743077, "question_id": 52291396, "link": "https://stackoverflow.com/questions/52291396/arduino-eink-image2lcd-size-of-c-array", "title": "Arduino eInk Image2LCD - Size of c-array", "body": "<p>This Image2LCD software (<a href=\"https://www.buydisplay.com/default/image2lcd\" rel=\"nofollow noreferrer\">https://www.buydisplay.com/default/image2lcd</a>) converts images to c-arrays. I want to write this basic operation myself, but I dont understand why the software outputs an array of length 5000 for an input image of size 200x200. For 400x400 the array size is 20000. It seems like its always 1/8 of the number of pixels.</p>\n\n<p>The output array for the square 200x200 image begins and ends like this:</p>\n\n<pre><code>const unsigned char gImage_test[5000] = { /* 0X00,0X01,0XC8,0X00,0XC8,0X00, */\n0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,\n0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,\n0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,\n0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,\n0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X60,0X00,0X00,0X00,0X00,\n0X3C,0X60,0X00,0X0C,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,\n0X00,0X00,0X00,0X00,0X70,0X00,0X00,0X00,0X00,0X7E,0X70,0X00,0X0E,0X00,0X00,0X00,\n0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X78,0X00,0X00,\n0X00,0X00,0X7F,0X78,0X00,0X0F,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,\n0X00,0X00,0X00,0X00,0X00,0X00,0X7F,0XFC,0X3C,0X3E,0X3C,0X3F,0XF8,0X3C,0X7F,0X00,\n0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X7F,\n\n...\n\n,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,\n0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,};\n</code></pre>\n\n<p>(Yes there is a lot of white in the image.)</p>\n\n<p>Why don't you need one value for each pixel?</p>\n"}, {"tags": ["c++", "types", "floating-point", "std", "typeid"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1536743236, "post_id": 52291371, "comment_id": 91530703, "body": "You&#39;re lucky <code>decltype</code> is a compile-time feature, as <code>std::vector&lt; float &gt;()</code> creates an empty vector where even index <code>0</code> is out of bounds and otherwise lead to <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\"><i>undefined behavior</i></a>."}, {"owner": {"reputation": 368, "user_id": 4508185, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d9299cab75146229de06c236fc9223d?s=128&d=identicon&r=PG&f=1", "display_name": "Cl&#232;m", "link": "https://stackoverflow.com/users/4508185/cl%c3%a8m"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1536743675, "post_id": 52291371, "comment_id": 91530989, "body": "It is not relevant, I guess, since I am not using the created std::vector. And I used std::vector in the example for everyone to be able to try, I am using other libraries in my code."}, {"owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1536744006, "post_id": 52291371, "comment_id": 91531193, "body": "@Someprogrammerdude Yup, <a href=\"https://stackoverflow.com/a/28723577/1708801\">there should be no UB in unevaluated operands</a>"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1536744048, "post_id": 52291371, "comment_id": 91531234, "body": "Like I said, in this case it&#39;s okay, but you should really be careful."}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 4, "creation_date": 1536750799, "post_id": 52291371, "comment_id": 91535266, "body": "There&#39;s <code>declval</code> to be really safe. Doesn&#39;t even require a default ctor."}, {"owner": {"reputation": 5668, "user_id": 4083309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6b4ef5a2e912153069b82607789a717?s=128&d=identicon&r=PG&f=1", "display_name": "Arne Vogel", "link": "https://stackoverflow.com/users/4083309/arne-vogel"}, "reply_to_user": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 2, "creation_date": 1536751562, "post_id": 52291371, "comment_id": 91535699, "body": "@MSalters In fact does not even require any accessible c&#39;tor (in particular, it can be used with abstract types like <code>std::istream</code>)."}, {"owner": {"reputation": 23279, "user_id": 700825, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/6aea6e2f57f2a7b1cd6870375fbdc42f?s=128&d=identicon&r=PG", "display_name": "NoSenseEtAl", "link": "https://stackoverflow.com/users/700825/nosenseetal"}, "edited": false, "score": 0, "creation_date": 1536757057, "post_id": 52291371, "comment_id": 91539200, "body": "I asked similar question recently... <a href=\"https://stackoverflow.com/questions/51896941/is-there-a-reason-why-numeric-limits-do-not-work-on-reference-types\" title=\"is there a reason why numeric limits do not work on reference types\">stackoverflow.com/questions/51896941/&hellip;</a> Basically for some reason type traits are dumb, and dont know/want to remove reference"}], "answers": [{"comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 2, "creation_date": 1536745733, "post_id": 52291421, "comment_id": 91532279, "body": "@Fred You don&#39;t need <code>return</code> in <code>main</code>, as the live demo shows, and I deliberately removed it for brevity as it is pointless. Thanks for the suggestion though."}, {"owner": {"reputation": 414, "user_id": 5853141, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce8326b6ce3356066944f644e5c0ba0c?s=128&d=identicon&r=PG&f=1", "display_name": "Frederik De Ruyck", "link": "https://stackoverflow.com/users/5853141/frederik-de-ruyck"}, "edited": false, "score": 0, "creation_date": 1536746614, "post_id": 52291421, "comment_id": 91532840, "body": "True, clang-tidy doesn&#39;t complains about it. In a regular non-void returning function, not having a return statement is undefined behavior."}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 2, "creation_date": 1536747102, "post_id": 52291421, "comment_id": 91533134, "body": "IMO, it&#39;s still bad style to omit the <code>return</code> from <code>main()</code>, and I get the impression that the language only made it allowed because so many people were using said bad style and it wanted to legitimise them for some reason."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 1, "creation_date": 1536747246, "post_id": 52291421, "comment_id": 91533219, "body": "@underscore_d But in an example like this it is literally, completely, 100% pointless. I don&#39;t write code that doesn&#39;t do anything!"}, {"owner": {"reputation": 5668, "user_id": 4083309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6b4ef5a2e912153069b82607789a717?s=128&d=identicon&r=PG&f=1", "display_name": "Arne Vogel", "link": "https://stackoverflow.com/users/4083309/arne-vogel"}, "edited": false, "score": 0, "creation_date": 1536751850, "post_id": 52291421, "comment_id": 91535859, "body": "These &quot;type of reference&quot; discussions are perfect for language lawyers. Technically, the <i>type</i> of the expression is <code>float</code>, but the <i>value category</i> of the expression is <i>lvalue</i>. <code>decltype(</code> <i>expr</i> <code>)</code> takes the type of <i>expr</i> and optionally adds a reference qualifier to it (i.e. if the value category of <i>expr</i> is <i>lvalue</i>). If <code>decltype(</code> <i>expr</i> <code>)</code> simply gave the type of the expression, then the type trait instance would indeed evaluate to a true type. Not sure if even this is 100% correct."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 5668, "user_id": 4083309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6b4ef5a2e912153069b82607789a717?s=128&d=identicon&r=PG&f=1", "display_name": "Arne Vogel", "link": "https://stackoverflow.com/users/4083309/arne-vogel"}, "edited": false, "score": 2, "creation_date": 1536752144, "post_id": 52291421, "comment_id": 91536008, "body": "@Arne: I think you&#39;re correct. I do try to ignore these rules wherever possible because they give me a headache and just seem so arcane in a sense ;) though they are constructed so as to produce the &quot;expected&quot; outcome in precisely situations like this, so there is certainly logic there"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1536752529, "post_id": 52291421, "comment_id": 91536217, "body": "(By this I mean that I&#39;ve deliberately abstracted such things away for this answer, but indeed we could look at it in a more scholarly fashion if we were to be lawyer-like about it rather than practical)"}], "tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": true, "score": 30, "last_activity_date": 1536743544, "last_edit_date": 1536743544, "creation_date": 1536743116, "answer_id": 52291421, "question_id": 52291371, "link": "https://stackoverflow.com/questions/52291371/stdis-floating-point-returns-false-for-float-in-some-cases/52291421#52291421", "title": "std::is_floating_point returns false for float in some cases", "body": "<p><strong>There is no bug, and <code>std::is_floating_point</code> is giving you the right answer.</strong></p>\n\n<p><code>vector&lt;float&gt;[n]</code> doesn't give you a <code>float</code>; <a href=\"https://en.cppreference.com/w/cpp/container/vector/operator_at\" rel=\"noreferrer\">it gives you a <code>float&amp;</code></a>.</p>\n\n<p><a href=\"https://en.cppreference.com/w/cpp/language/typeid\" rel=\"noreferrer\"><code>typeid</code> ignores this</a> for convenience but, as more \"powerful\" tools, <code>decltype</code> and <code>std::is_floating_point</code> do not.</p>\n\n<p>You can use <a href=\"https://en.cppreference.com/w/cpp/types/remove_reference\" rel=\"noreferrer\"><code>std::remove_reference</code></a> to fix this:</p>\n\n<pre><code>if (::std::is_floating_point_v&lt;std::remove_reference_t&lt;\n   decltype(::std::vector&lt; float &gt;()[::std::vector&lt; float &gt;().size()])\n&gt;&gt;)\n</code></pre>\n\n<p>You might also consider <a href=\"https://en.cppreference.com/w/cpp/types/decay\" rel=\"noreferrer\"><code>std::decay</code></a>.</p>\n\n<p>You don't need <code>decltype</code> anyway as containers have handy type aliases for times like this.</p>\n\n<p>Here's what I'd do:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;type_traits&gt;\n#include &lt;vector&gt;\n\nint main()\n{\n    using V = std::vector&lt;float&gt;;\n\n    ::std::cout &lt;&lt; typeid(V::value_type).name() &lt;&lt; '\\n';\n    if (::std::is_floating_point_v&lt;V::value_type&gt;)\n        ::std::cout &lt;&lt; \"floating point\\n\";\n    else\n        ::std::cout &lt;&lt; \"not floating point\\n\";\n}\n\n// Output:\n//   f\n//   floating point\n</code></pre>\n\n<h3><a href=\"http://coliru.stacked-crooked.com/a/55a5178cb5893737\" rel=\"noreferrer\">Live demo</a></h3>\n"}], "owner": {"reputation": 368, "user_id": 4508185, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d9299cab75146229de06c236fc9223d?s=128&d=identicon&r=PG&f=1", "display_name": "Cl&#232;m", "link": "https://stackoverflow.com/users/4508185/cl%c3%a8m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1721, "favorite_count": 0, "accepted_answer_id": 52291421, "answer_count": 1, "score": 15, "last_activity_date": 1536743544, "creation_date": 1536742981, "question_id": 52291371, "link": "https://stackoverflow.com/questions/52291371/stdis-floating-point-returns-false-for-float-in-some-cases", "title": "std::is_floating_point returns false for float in some cases", "body": "<p>In some cases, see one example below, <code>std::is_floating_point</code> is returning <code>false</code> for <code>float</code>.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;type_traits&gt;\n#include &lt;vector&gt;\n\nint main()\n{\n    ::std::cout &lt;&lt; typeid(decltype(::std::vector&lt; float &gt;()[::std::vector&lt; float &gt;().size()])).name() &lt;&lt; ::std::endl;\n    if (::std::is_floating_point&lt; decltype(::std::vector&lt; float &gt;()[::std::vector&lt; float &gt;().size()]) &gt;::value)\n    {\n        ::std::cout &lt;&lt; \"floating point\" &lt;&lt; ::std::endl;\n    }\n    else\n    {\n        ::std::cout &lt;&lt; \"not floating point\" &lt;&lt; ::std::endl;\n    }\n    return 0;\n}\n</code></pre>\n\n<p>Output from GCC</p>\n\n<pre><code>f\nnot floating point\n</code></pre>\n\n<p>In this example, one can see that <code>typeid</code> considers <code>::std::vector&lt; float &gt;()[::std::vector&lt; float &gt;().size()]</code> as a <code>float</code> as it returns the correct name. One can also check that <code>typeid(decltype(::std::vector&lt; float &gt;()[::std::vector&lt; float &gt;().size()])) == typeid(flat)</code> returns <code>true</code>. However, <code>std::is_floating_point</code> is returning false. Why? Is that a bug from C++?</p>\n\n<p>FYI, I checked with both GCC and VisualStudio. In this example, I used std::vector, but one can also try with other libraries, such as Eigen.</p>\n"}, {"tags": ["c++", "c++11"], "comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 1, "creation_date": 1536761646, "post_id": 52291366, "comment_id": 91542349, "body": "Note also that your output depends of endianess."}, {"owner": {"reputation": 779, "user_id": 1727703, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/lLjZS.jpg?s=128&g=1", "display_name": "Max", "link": "https://stackoverflow.com/users/1727703/max"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1536761787, "post_id": 52291366, "comment_id": 91542457, "body": "@Jarod42 Yeees of course! But in this case it doesn&#39;t matter."}], "answers": [{"comments": [{"owner": {"reputation": 779, "user_id": 1727703, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/lLjZS.jpg?s=128&g=1", "display_name": "Max", "link": "https://stackoverflow.com/users/1727703/max"}, "edited": false, "score": 0, "creation_date": 1536743431, "post_id": 52291428, "comment_id": 91530827, "body": "Thank you, Adam. It worked  10 0 0 0  11 0 0 0  12 0 0 0  13 0 0 0    \\n 10 0 0 0  11 0 0 0  12 0 0 0"}], "tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": true, "score": 1, "last_activity_date": 1536743136, "creation_date": 1536743136, "answer_id": 52291428, "question_id": 52291366, "link": "https://stackoverflow.com/questions/52291366/variadic-function-with-recursion/52291428#52291428", "title": "Variadic function with recursion", "body": "<p>The recursion only outputs anything when:</p>\n\n<pre><code>if ((sizeof...(Args))==0) {\n    copy_data(ar, offset, data);\n}\n</code></pre>\n\n<p>and that only happens after you strip every argument except the last off.</p>\n\n<p>Remove the <code>if</code> clause.</p>\n"}], "owner": {"reputation": 779, "user_id": 1727703, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/lLjZS.jpg?s=128&g=1", "display_name": "Max", "link": "https://stackoverflow.com/users/1727703/max"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 94, "favorite_count": 0, "accepted_answer_id": 52291428, "answer_count": 1, "score": 0, "last_activity_date": 1536761504, "creation_date": 1536742970, "last_edit_date": 1536761504, "question_id": 52291366, "link": "https://stackoverflow.com/questions/52291366/variadic-function-with-recursion", "title": "Variadic function with recursion", "body": "<p>I trying to write a recursive function with variadic parameters for copy my data. But this function copy only last parameter. What I do wrong?</p>\n\n<p>This is output:</p>\n\n<pre><code>13 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0\n\n12 0 0 0 0 0 0 0 0 0 0 0 \n</code></pre>\n\n<p>Best regards.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;cstdint&gt;\n#include &lt;cstring&gt;\nusing namespace std;\n\nvoid copy_data(unsigned char* ar, unsigned&amp; offset, int data) {\n    std::memcpy(ar + offset, (void*)&amp;data, sizeof(data));\n    offset += sizeof(data);\n}\n\ntemplate&lt;class... Args&gt;\nvoid copy_data(unsigned char* ar, unsigned&amp; offset, int data, Args... args) {\n    if ((sizeof...(Args)) == 0) {\n        copy_data(ar, offset, data);\n    }\n    copy_data(ar, offset, args...);\n}\n\nvoid printf_data(const unsigned char* ar, int s) {\n    for (int i = 0; i &lt; s; ++i) {\n        std::cout &lt;&lt; (int)ar[i] &lt;&lt; \" \";\n    }\n    std::cout&lt;&lt;\"\\n\";\n}\n\nint main() {\n    unsigned char *arr0 = new unsigned char[16];\n    unsigned char *arr1 = new unsigned char[12];\n\n    int p0 = 10;\n    int p1 = 11;\n    int p2 = 12;\n    int p3 = 13;\n\n    unsigned offset = 0;\n\n    copy_data(arr0, offset, p0, p1, p2, p3);\n\n    offset = 0;\n    copy_data(arr1, offset, p0, p1, p2);\n\n    printf_data(arr0, 16);\n    printf_data(arr1, 12);\n\n    delete [] arr1;\n    delete [] arr0;\n    return 0;\n}\n</code></pre>\n\n<p>UPDATE: corrected function</p>\n\n<pre><code>template &lt;typename T&gt;\nvoid copy_data(unsigned char* ar, unsigned&amp; offset, T data) {\n    std::memcpy(ar + offset, (void*)&amp;data, sizeof(data));\n    offset += sizeof(data);\n}\n\ntemplate &lt;typename T, typename... Args&gt;\nvoid copy_data(unsigned char* ar, unsigned&amp; offset, T data, Args... args) {\n    copy_data(ar, offset, data);\n    copy_data(ar, offset, args...);\n}\n</code></pre>\n"}, {"tags": ["c++", "webrtc"], "answers": [{"comments": [{"owner": {"reputation": 55, "user_id": 10071455, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-M_4DPyvsXoQ/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7rL-cVZrYSZ3Xy8dvk3I1LkepxyUQ/mo/photo.jpg?sz=128", "display_name": "Andriy Buchynskyy", "link": "https://stackoverflow.com/users/10071455/andriy-buchynskyy"}, "edited": false, "score": 0, "creation_date": 1545129240, "post_id": 52324237, "comment_id": 94510522, "body": "Can you tell me which classes and methods I should use to do that?"}], "tags": [], "owner": {"reputation": 1992, "user_id": 2232094, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7015c58a5e3fba9106be2e03448303f?s=128&d=identicon&r=PG", "display_name": "Dr. Alex Gouaillard", "link": "https://stackoverflow.com/users/2232094/dr-alex-gouaillard"}, "is_accepted": false, "score": 1, "last_activity_date": 1536892517, "creation_date": 1536892517, "answer_id": 52324237, "question_id": 52291168, "link": "https://stackoverflow.com/questions/52291168/difference-between-webrtcvideoframe-and-webrtcencodedimage/52324237#52324237", "title": "difference between webrtc::VideoFrame and webrtc::EncodedImage", "body": "<p>If you have an encoded frame, you need to push it down to the packetizer. </p>\n\n<p>filters:</p>\n\n<p>Capturer => Encoder => RTP Packetizer => Encryption => Transport</p>\n\n<p>Data types:</p>\n\n<ol>\n<li><strong>Capturer</strong>    => Video Frame</li>\n<li>Video   Frame => <strong>Encoder</strong>     => Encoded Frame</li>\n<li>Encoded Frame => <strong>RTP Packet.</strong> => RTP Packet(s)</li>\n<li>RTP Packet    => <strong>Encryption</strong>  => SRTP packet</li>\n<li>SRTP Packet   => <strong>Transport</strong>   => UDP or TCP packet</li>\n</ol>\n"}], "owner": {"reputation": 55, "user_id": 10071455, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-M_4DPyvsXoQ/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7rL-cVZrYSZ3Xy8dvk3I1LkepxyUQ/mo/photo.jpg?sz=128", "display_name": "Andriy Buchynskyy", "link": "https://stackoverflow.com/users/10071455/andriy-buchynskyy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 234, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1536892517, "creation_date": 1536742353, "last_edit_date": 1536743067, "question_id": 52291168, "link": "https://stackoverflow.com/questions/52291168/difference-between-webrtcvideoframe-and-webrtcencodedimage", "title": "difference between webrtc::VideoFrame and webrtc::EncodedImage", "body": "<p>The question is what is the difference between <code>webrtc::VideoFrame</code> and <code>webrtc::EncodedImage</code>. The purpose of the question is that I have <code>webrtc::EncoededImage</code> and I need to send it to another peer. But I can't find any way to do that in <code>cricket::VideoCapturer</code>. But there is onFrame method. As I understand it was made to send that frame. So I just thought that if I could convert<code>webrtc::EncodedImage</code> to <code>webrtc::VideoFrame</code> I could send that image to another peer. Thank you</p>\n"}, {"tags": ["android", "c++", "sip", "c++builder"], "comments": [{"owner": {"reputation": 2020, "user_id": 2817399, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bTdrv.png?s=128&g=1", "display_name": "blong", "link": "https://stackoverflow.com/users/2817399/blong"}, "edited": false, "score": 0, "creation_date": 1537033923, "post_id": 52291105, "comment_id": 91640115, "body": "Minor point: do you realise there is a pre-defined compiler symbol for the Android platform: <code>__ANDROID__</code> - maybe there is some mileage in using that rather then (and I&#39;m guessing on this point) crafting a custom one: <code>_PLAT_ANDROID</code> ?"}, {"owner": {"reputation": 1, "user_id": 10348416, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e171f4c99c9867600e20ee5a0bed18c?s=128&d=identicon&r=PG&f=1", "display_name": "LRA", "link": "https://stackoverflow.com/users/10348416/lra"}, "reply_to_user": {"reputation": 2020, "user_id": 2817399, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bTdrv.png?s=128&g=1", "display_name": "blong", "link": "https://stackoverflow.com/users/2817399/blong"}, "edited": false, "score": 0, "creation_date": 1537171262, "post_id": 52291105, "comment_id": 91670525, "body": "It is a predefined symbol for the compilation mode in Android"}, {"owner": {"reputation": 2020, "user_id": 2817399, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bTdrv.png?s=128&g=1", "display_name": "blong", "link": "https://stackoverflow.com/users/2817399/blong"}, "edited": false, "score": 0, "creation_date": 1537171699, "post_id": 52291105, "comment_id": 91670741, "body": "LRA, thanks for the clarification. Odd that it doesn&#39;t appear in the list of predefined symbols at <a href=\"http://docwiki.embarcadero.com/RADStudio/en/Predefined_Macros\" rel=\"nofollow noreferrer\">docwiki.embarcadero.com/RADStudio/en/Predefined_Macros</a> - I wonder what declares it: compiler of some Android platform header.... I may have to go seek it out unless you happen to know."}, {"owner": {"reputation": 2020, "user_id": 2817399, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bTdrv.png?s=128&g=1", "display_name": "blong", "link": "https://stackoverflow.com/users/2817399/blong"}, "edited": false, "score": 0, "creation_date": 1537172315, "post_id": 52291105, "comment_id": 91671041, "body": "typo: &quot;compiler <i>or</i> some Android platform header&quot;"}, {"owner": {"reputation": 1, "user_id": 10348416, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e171f4c99c9867600e20ee5a0bed18c?s=128&d=identicon&r=PG&f=1", "display_name": "LRA", "link": "https://stackoverflow.com/users/10348416/lra"}, "reply_to_user": {"reputation": 2020, "user_id": 2817399, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bTdrv.png?s=128&g=1", "display_name": "blong", "link": "https://stackoverflow.com/users/2817399/blong"}, "edited": false, "score": 0, "creation_date": 1537282862, "post_id": 52291105, "comment_id": 91723835, "body": "I don&#39;t know what header calls it, I have based myself on previously implemented code."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 10348416, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e171f4c99c9867600e20ee5a0bed18c?s=128&d=identicon&r=PG&f=1", "display_name": "LRA", "link": "https://stackoverflow.com/users/10348416/lra"}, "edited": false, "score": 0, "creation_date": 1537171510, "post_id": 52349465, "comment_id": 91670653, "body": "Thank you very much for your reply. I have tested it and it also works for me, I will continue with the implementation of SIP."}], "tags": [], "owner": {"reputation": 2020, "user_id": 2817399, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bTdrv.png?s=128&g=1", "display_name": "blong", "link": "https://stackoverflow.com/users/2817399/blong"}, "is_accepted": true, "score": 0, "last_activity_date": 1537172237, "last_edit_date": 1537172237, "creation_date": 1537051054, "answer_id": 52349465, "question_id": 52291105, "link": "https://stackoverflow.com/questions/52291105/instantiate-android-sipmanager-in-c-builder/52349465#52349465", "title": "Instantiate Android SipManager in c++ builder", "body": "<p>Let's go through your offerings and see why they don't work:</p>\n\n<p>1) you are calling the parameterless Java constructor, surfaced as <code>init()</code> but this class is not meant to be constructed through a regular constructor. One presumes that constructor is private, but regardless, the documentation says you create an instance through <code>newInstance()</code>.</p>\n\n<p>2) invoking the import class <code>Create()</code> class method is normally much the same as calling <code>init()</code>, but done through a different avenue. Given <code>init</code> is not available it fails, just with a different symptom here.</p>\n\n<p>3) You have declared a variable of the Delphi <code>JSipManager</code> instance methods interface type, but then assigned it the <code>JavaClass</code> property, which gives the Delphi <code>JSipManagerClass</code> class methods interface type. Those 2 are not the same. An error is to be expected.</p>\n\n<p>4) The template class <code>TJSipManager</code> is a helper to gain access to the class methods interface (through the <code>JavaClass</code> property) or to instance methods via an instance created by invoking a constructor (maybe via <code>Create()</code> or <code>JavaClass-&gt;init()</code>. You shouldn't construct an instance of this template class - it serves no valid purpose.\nProceeding to cast (via <code>Wrap()</code>) the context object into a <code>SipManager</code> smacks of desperation - they are wholly disparate types.</p>\n\n<p>OK, now let's see why what should work doesn't work.</p>\n\n<p>The reason the <code>newInstance()</code> method (and others) are commented out of the <code>JSipManagerClass</code> class methods interface in the original Delphi unit, Androidapi.JNI.Net.pas, is that they all have a parameter or a return type such as <code>JContext</code> or <code>JIntent</code> that is defined and exposed from a unit that already uses Androidapi.JNI.Net.pas, namely the unit Androidapi.JNI.GraphicsContentViewText.pas.</p>\n\n<p>Java2OP has left the methods there because they exist, but commented them out to avoid a circular unit reference error.</p>\n\n<p>What will work is to redefine the <code>SipManager</code> JNI Bridge types in a new Delphi unit, add that new unit to your C++ project, include its generated header and proceed from there.</p>\n\n<p>To make the unit you can right-click on the project in the Project Manager and choose Add New, Unit - Delphi. If you are using C++ Builder only (with no Delphi support) just create the unit in a text editor. It's called Androidapi.JNI.SIP.pas and contains the import of just one type: <code>SipManager</code> - to avoid fighting with ambiguity I've called the base import interface <code>JSipManager2</code>:</p>\n\n<pre><code>unit Androidapi.JNI.SIP;\n\ninterface\n\nuses\n  Androidapi.JNIBridge,\n  Androidapi.JNI.Net,\n  Androidapi.JNI.GraphicsContentViewText,\n  Androidapi.JNI.JavaTypes,\n  Androidapi.JNI.Os;\n\ntype\n// ===== Forward declarations =====\n\n  JSipManager2 = interface;//android.net.sip.SipManager\n\n  JSipManager2Class = interface(JObjectClass)\n    ['{62C12348-C7E4-4B5E-AE75-715EAAFD4465}']\n    {class} function _GetEXTRA_CALL_ID: JString; cdecl;\n    {class} function _GetEXTRA_OFFER_SD: JString; cdecl;\n    {class} function _GetINCOMING_CALL_RESULT_CODE: Integer; cdecl;\n    {class} function getCallId(incomingCallIntent: JIntent): JString; cdecl;\n    {class} function getOfferSessionDescription(incomingCallIntent: JIntent): JString; cdecl;\n    {class} function isApiSupported(context: JContext): Boolean; cdecl;\n    {class} function isIncomingCallIntent(intent: JIntent): Boolean; cdecl;\n    {class} function isSipWifiOnly(context: JContext): Boolean; cdecl;\n    {class} function isVoipSupported(context: JContext): Boolean; cdecl;\n    {class} function newInstance(context: JContext): JSipManager2; cdecl;\n    {class} property EXTRA_CALL_ID: JString read _GetEXTRA_CALL_ID;\n    {class} property EXTRA_OFFER_SD: JString read _GetEXTRA_OFFER_SD;\n    {class} property INCOMING_CALL_RESULT_CODE: Integer read _GetINCOMING_CALL_RESULT_CODE;\n  end;\n\n  [JavaSignature('android/net/sip/SipManager')]\n  JSipManager2 = interface(JObject)\n    ['{EDE899E1-4774-41FB-BC53-03BB69565231}']\n    procedure close(localProfileUri: JString); cdecl;\n    function createSipSession(localProfile: JSipProfile; listener: JSipSession_Listener): JSipSession; cdecl;\n    //function getSessionFor(incomingCallIntent: JIntent): JSipSession; cdecl;\n    function isOpened(localProfileUri: JString): Boolean; cdecl;\n    function isRegistered(localProfileUri: JString): Boolean; cdecl;\n    function makeAudioCall(localProfile: JSipProfile; peerProfile: JSipProfile; listener: JSipAudioCall_Listener; timeout: Integer): JSipAudioCall; cdecl; overload;\n    function makeAudioCall(localProfileUri: JString; peerProfileUri: JString; listener: JSipAudioCall_Listener; timeout: Integer): JSipAudioCall; cdecl; overload;\n    procedure open(localProfile: JSipProfile); cdecl; overload;\n    //procedure open(localProfile: JSipProfile; incomingCallPendingIntent: JPendingIntent; listener: JSipRegistrationListener); cdecl; overload;\n    procedure register(localProfile: JSipProfile; expiryTime: Integer; listener: JSipRegistrationListener); cdecl;\n    procedure setRegistrationListener(localProfileUri: JString; listener: JSipRegistrationListener); cdecl;\n    //function takeAudioCall(incomingCallIntent: JIntent; listener: JSipAudioCall_Listener): JSipAudioCall; cdecl;\n    procedure unregister(localProfile: JSipProfile; listener: JSipRegistrationListener); cdecl;\n  end;\n  TJSipManager2 = class(TJavaGenericImport&lt;JSipManager2Class, JSipManager2&gt;) end;\n\nimplementation\n\nprocedure RegisterTypes;\nbegin\n  TRegTypes.RegisterType('Androidapi.JNI.SIP.JSipManager2', TypeInfo(Androidapi.JNI.SIP.JSipManager2));\nend;\n\ninitialization\n  RegisterTypes;\nend.\n</code></pre>\n\n<p>Then use it in some C++ code like this:</p>\n\n<pre><code>...\n// Cleanse build of lots of errors about __cdecl...\n#define __cdecl\n#include \"Androidapi.JNI.SIP.hpp\"\n#include &lt;Androidapi.Helpers.hpp&gt;\n...\n    _di_JSipManager2 manager = TJSipManager2::JavaClass-&gt;newInstance(TAndroidHelper::Context);\n    // use manager as needed...\n</code></pre>\n\n<p>This seems to compile and execute OK, but I have no SIP service so cannot get further than that.</p>\n\n<p>As a parting comment, the global <code>SharedActivityContext()</code> function is deprecated - the <code>TAndroidHelper</code> class now contains all that sort of thing as static methods/properties such as <code>TAndroidHelper::Context</code>.</p>\n"}], "owner": {"reputation": 1, "user_id": 10348416, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e171f4c99c9867600e20ee5a0bed18c?s=128&d=identicon&r=PG&f=1", "display_name": "LRA", "link": "https://stackoverflow.com/users/10348416/lra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 286, "favorite_count": 0, "accepted_answer_id": 52349465, "answer_count": 1, "score": 0, "last_activity_date": 1537172237, "creation_date": 1536742111, "last_edit_date": 1537028524, "question_id": 52291105, "link": "https://stackoverflow.com/questions/52291105/instantiate-android-sipmanager-in-c-builder", "title": "Instantiate Android SipManager in c++ builder", "body": "<p>I'm trying to instantiate the SipManager (developer.android.com) in Embarcadero with c++ builder but I'm not able to find the right way.\nFor this, I'm using Delphi Interface instances.</p>\n\n<p>In Java it is like this:</p>\n\n<pre><code>public static SipManager manager;\nmanager = SipManager.newInstance(context);\n//Context is the application context for creating the manager object.\n</code></pre>\n\n<p>For the correct compilation of the code that will appear next, it is necessary to include the following:</p>\n\n<pre><code>#include &lt;System.Classes.hpp&gt;\n#if defined (_PLAT_ANDROID)\n    #include &lt;Androidapi.Helpers.HPP&gt;\n    #include &lt;Androidapi.JNI.Net.HPP&gt;\n    #include &lt;Androidapi.JNI.os.HPP&gt;\n    #include &lt;Androidapi.JNI.Support.HPP&gt;\n    #include &lt;Androidapi.JNI.Media.HPP&gt;\n#endif\n</code></pre>\n\n<p>In addition, the \"Use Sip\" and \"Internet\" permissions must also be added to the manifest.</p>\n\n<p>I tried to do it in many ways, based on the fact that I already knew how to install the WifiManager:</p>\n\n<pre><code>#if defined (_PLAT_ANDROID)\n    _di_JObject obj;\n    _diJWifiManager wm;\n    obj = SharedActivityContext()-&gt;getSystemService(TJContext::JavaClass-&gt;WIFI_SERVICE);\n    wm = TJWifiManager::Wrap(((_di_ILocalObject)obj)-&gt;GetObjectID());\n    wm-&gt;setWifiEnabled(true);\n#endif\n</code></pre>\n\n<p>For my application I have done the following:</p>\n\n<ol>\n<li><p>This compiles but when running the application it says that the method init() is not found.</p>\n\n<pre><code>#if defined (_PLAT_ANDROID)\n    _di_JObject obj;\n    _di_JSipManager sipm;\n    obj = TJSipManager::JavaClass-&gt;init();\n    sipm = TJSipManager::Wrap(((_di_ILocalObject)obj)-&gt;GetObjectID());\n#endif\n</code></pre></li>\n<li><p>This compiles too, but when running the application, this one has an exception kind of \"Abort\".</p>\n\n<pre><code>#if defined (_PLAT_ANDROID)\n    _di_JSipManager sipm;\n    sipm = TJSipManager::Create();\n#endif\n</code></pre></li>\n<li><p>This compiles too, but when running the application, this one has an exception kind of \"Access Violation\".</p>\n\n<pre><code>#if defined (_PLAT_ANDROID)\n    _di_JSipManager sipm;\n    sipm = TJSipManager::JavaClass;\n#endif\n</code></pre></li>\n<li><p>This compiles too, but it has an exception kind of \"Abort\" when I try to open the profile.</p>\n\n<pre><code>#if defined (_PLAT_ANDROID)\n    _di_JSipManager sipm;\n    _di_JContext context;\n    _di_JSipProfileBuilder sippb;\n    _di_JSipProfile sipp;\n    context = SharedActivityContext()-&gt;getApplicationContext();\n    TJSipManager *sipn = new TJSipManager();\n    sipm = sipn-&gt;Wrap(((_di_ILocalObject)context) &gt;GetObjectID());\n    _di_JString uri;\n    uri = StringToJString(\"sip:165@40.134.279.145:5060\");\n    sippb = TJSipProfile_Builder::JavaClass-&gt;init(uri);\n    sipp = sippb-&gt;build();\n    sipm-&gt;open(sipp);\n#endif\n</code></pre></li>\n</ol>\n\n<p>If I do only the part of the SipProfile, there is no problem and the profile is built.</p>\n\n<pre><code>#if defined (_PLAT_ANDROID)\n    _di_JSipProfileBuilder sippb;\n    _di_JSipProfile sipp;\n    _di_JString uri;\n    uri = StringToJString(\"sip:165@40.134.279.145:5060\");\n    sippb = TJSipProfile_Builder::JavaClass-&gt;init(uri);\n    sipp = sippb-&gt;build();\n#endif\n</code></pre>\n\n<p>And in Java it is like this:</p>\n\n<pre><code>public static SipProfile me;\nSipProfile.Builder builder = new SipProfile.Builder(\"uri\");\nme = builder.build();\n</code></pre>\n\n<p>I would like to know how to instantiate the SipManager for c++ builder.\nIn Java, it has been seen that it uses the method \"newInstance(context)\" for it, \nbut when I try to instantiate it in C++ builder it doesn't appear any similar method that belongs to this class.</p>\n\n<ol>\n<li><p>Can I instantiate in C++ builder?</p></li>\n<li><p>What's the right way to do it?</p></li>\n<li><p>If not possible, is there another library to make a Sip application in Embarcadero with c++ builder?</p></li>\n</ol>\n\n<hr>\n\n<p>In another forum, Remy replied:</p>\n\n<p>\"It SHOULD be something as simple as this in C++Builder:</p>\n\n<pre><code>#if defined (_PLAT_ANDROID)\n    _di_JSipManager manager = TJSipManager::JavaClass-&gt;newInstance(SharedActivityContext());\n    // use manager as needed...\n#endif\n</code></pre>\n\n<p>But in actuality, this doesn't work (at least in Seattle, don't know about later versions) because the static newInstance() method is MISSING from the JSipManagerClass interface in Androidapi.JNI.Net.hpp!</p>\n\n<p>You could try using Java2OP to re-import the SipManager class, but I don't know if that will end up suffering from the same problem or not.\"</p>\n\n<hr>\n\n<p>But I have the last release of Tokio and I still have the same problem.\nI will try to re-import the SipManager.</p>\n"}, {"tags": ["c++", "c++11", "inheritance", "operator-overloading"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 2, "creation_date": 1536741381, "post_id": 52290777, "comment_id": 91529534, "body": "I would recommend against defining an <code>operator=</code> that takes an unrelated type."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1536742275, "post_id": 52290777, "comment_id": 91530079, "body": "Better. Though all those missing semicolons are also one of the things I was talking about. I fixed it for you myself though."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1536744550, "post_id": 52290777, "comment_id": 91531544, "body": "Write a function <code>from_int</code> or define an <i>explicit</i> constructor. <code>operator=</code> like you want to define is highly confusing and needs some serious justification."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1536744744, "post_id": 52290777, "comment_id": 91531667, "body": "Unrelated, but an hierarchy without any virtual functions is highly dubious."}], "answers": [{"comments": [{"owner": {"reputation": 165, "user_id": 9117064, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed07a0aa6b568fd89bbed3051da4c08d?s=128&d=identicon&r=PG&f=1", "display_name": "umbreLLaJYL", "link": "https://stackoverflow.com/users/9117064/umbrellajyl"}, "edited": false, "score": 0, "creation_date": 1536742492, "post_id": 52291134, "comment_id": 91530203, "body": "I have try. but the program <code>Segmentation fault (core dumped)</code> while I run it"}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 165, "user_id": 9117064, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed07a0aa6b568fd89bbed3051da4c08d?s=128&d=identicon&r=PG&f=1", "display_name": "umbreLLaJYL", "link": "https://stackoverflow.com/users/9117064/umbrellajyl"}, "edited": false, "score": 2, "creation_date": 1536742643, "post_id": 52291134, "comment_id": 91530298, "body": "@umbreLLaJYL - The segmentation fault is due to a bug in your program. In code you don&#39;t show here. This answers the question you <i>asked</i>. If you have a new unrelated question about your seg fault, you can post another question with another <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "reply_to_user": {"reputation": 165, "user_id": 9117064, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed07a0aa6b568fd89bbed3051da4c08d?s=128&d=identicon&r=PG&f=1", "display_name": "umbreLLaJYL", "link": "https://stackoverflow.com/users/9117064/umbrellajyl"}, "edited": false, "score": 0, "creation_date": 1536742685, "post_id": 52291134, "comment_id": 91530328, "body": "@umbreLLaJYL it seems to work fine, you might ask another question with this specific issue. When you write this new question, please provide directly a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 165, "user_id": 9117064, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed07a0aa6b568fd89bbed3051da4c08d?s=128&d=identicon&r=PG&f=1", "display_name": "umbreLLaJYL", "link": "https://stackoverflow.com/users/9117064/umbrellajyl"}, "reply_to_user": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1536742944, "post_id": 52291134, "comment_id": 91530510, "body": "@StoryTeller I mean that the program runs well. it crash after I add that line."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 165, "user_id": 9117064, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed07a0aa6b568fd89bbed3051da4c08d?s=128&d=identicon&r=PG&f=1", "display_name": "umbreLLaJYL", "link": "https://stackoverflow.com/users/9117064/umbrellajyl"}, "edited": false, "score": 0, "creation_date": 1536742997, "post_id": 52291134, "comment_id": 91530552, "body": "@umbreLLaJYL - I understood what you meant. Your program has a bug. It&#39;s not this line that introduced it, though it likely uncovered it."}, {"owner": {"reputation": 772, "user_id": 4043866, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/104dac269b12649d6df8386b88962745?s=128&d=identicon&r=PG", "display_name": "JulianH", "link": "https://stackoverflow.com/users/4043866/julianh"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1536743001, "post_id": 52291134, "comment_id": 91530557, "body": "@Jabberwocky Isn&#39;t the operator= calling the copy consturcotr if the operator= isn&#39;t user defined? And as second point: If the operator= isn&#39;t considered as constructor I guess it shouldn&#39;t be necessary to pull the operator explicitly into scope. That&#39;s why I was thinking you have to pull the operator into the scope of the class like you do in constructor inheriting, like they do here: <a href=\"https://en.cppreference.com/w/cpp/language/using_declaration\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/language/using_declaration</a>"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1536743248, "post_id": 52291134, "comment_id": 91530712, "body": "@JulianH not it isn&#39;t, when the operator is called here: <code>exec1 = id1;</code> the <code>exec1</code> object has already been constructed. The constructor is called here: <code>Executor1 exec1;</code>"}, {"owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "edited": false, "score": 4, "creation_date": 1536743262, "post_id": 52291134, "comment_id": 91530720, "body": "@JulianH No, it&#39;s most definitely not calling the copy ctor. It&#39;s just that the class has the implicitly-defined <code>operator=</code>, which hides the inherited <code>operator=</code>. That is why it has to be brought into scope."}, {"owner": {"reputation": 165, "user_id": 9117064, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed07a0aa6b568fd89bbed3051da4c08d?s=128&d=identicon&r=PG&f=1", "display_name": "umbreLLaJYL", "link": "https://stackoverflow.com/users/9117064/umbrellajyl"}, "reply_to_user": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1536743299, "post_id": 52291134, "comment_id": 91530744, "body": "@StoryTeller it do have a bug in my code! thanks to everyone!"}, {"owner": {"reputation": 772, "user_id": 4043866, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/104dac269b12649d6df8386b88962745?s=128&d=identicon&r=PG", "display_name": "JulianH", "link": "https://stackoverflow.com/users/4043866/julianh"}, "reply_to_user": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "edited": false, "score": 0, "creation_date": 1536743424, "post_id": 52291134, "comment_id": 91530826, "body": "@Angew this does make more sense to me, thank you. I was wrong."}, {"owner": {"reputation": 165, "user_id": 9117064, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed07a0aa6b568fd89bbed3051da4c08d?s=128&d=identicon&r=PG&f=1", "display_name": "umbreLLaJYL", "link": "https://stackoverflow.com/users/9117064/umbrellajyl"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1536743558, "post_id": 52291134, "comment_id": 91530912, "body": "@Jabberwocky I read that. its my mistake. the answer have deal with my case. thanks to all!"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "reply_to_user": {"reputation": 165, "user_id": 9117064, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed07a0aa6b568fd89bbed3051da4c08d?s=128&d=identicon&r=PG&f=1", "display_name": "umbreLLaJYL", "link": "https://stackoverflow.com/users/9117064/umbrellajyl"}, "edited": false, "score": 0, "creation_date": 1536743646, "post_id": 52291134, "comment_id": 91530970, "body": "@umbreLLaJYL OK, I misunderstood your comment due to your poor english."}, {"owner": {"reputation": 165, "user_id": 9117064, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed07a0aa6b568fd89bbed3051da4c08d?s=128&d=identicon&r=PG&f=1", "display_name": "umbreLLaJYL", "link": "https://stackoverflow.com/users/9117064/umbrellajyl"}, "edited": false, "score": 0, "creation_date": 1536743797, "post_id": 52291134, "comment_id": 91531055, "body": "that&#39;s so embarrassed."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "reply_to_user": {"reputation": 165, "user_id": 9117064, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed07a0aa6b568fd89bbed3051da4c08d?s=128&d=identicon&r=PG&f=1", "display_name": "umbreLLaJYL", "link": "https://stackoverflow.com/users/9117064/umbrellajyl"}, "edited": false, "score": 0, "creation_date": 1536744049, "post_id": 52291134, "comment_id": 91531235, "body": "@umbreLLaJYL no problem."}], "tags": [], "owner": {"reputation": 772, "user_id": 4043866, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/104dac269b12649d6df8386b88962745?s=128&d=identicon&r=PG", "display_name": "JulianH", "link": "https://stackoverflow.com/users/4043866/julianh"}, "is_accepted": true, "score": 6, "last_activity_date": 1567188346, "last_edit_date": 1567188346, "creation_date": 1536742212, "answer_id": 52291134, "question_id": 52290777, "link": "https://stackoverflow.com/questions/52290777/how-to-implement-a-operator-use-in-hierarchy/52291134#52291134", "title": "how to implement a operator use in hierarchy?", "body": "<p>You have to pull the =-operator into the scope of the class:</p>\n\n<pre><code>class Base\n{\npublic:\n    long id;\n\n    Base&amp; operator=(long id)\n    {\n        this-&gt;id = id;\n        return *this;\n    }\n};\n\nclass Temp2\n    : public Base\n{\npublic:\n    using Base::operator=;\n};\n</code></pre>\n\n<p>You have to pull the operator= into the scope because the implicitly generated copy operator= of Temp2 was hiding the operator= of Base. Got this hint from @Angew from's comment.</p>\n"}], "owner": {"reputation": 165, "user_id": 9117064, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed07a0aa6b568fd89bbed3051da4c08d?s=128&d=identicon&r=PG&f=1", "display_name": "umbreLLaJYL", "link": "https://stackoverflow.com/users/9117064/umbrellajyl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "accepted_answer_id": 52291134, "answer_count": 1, "score": 3, "last_activity_date": 1567188346, "creation_date": 1536741020, "last_edit_date": 1536742290, "question_id": 52290777, "link": "https://stackoverflow.com/questions/52290777/how-to-implement-a-operator-use-in-hierarchy", "title": "how to implement a operator use in hierarchy?", "body": "<p>I have a <code>Base</code> class with several derived classes:</p>\n\n<pre><code>class Base {\nprivate:\n    long id;\npublic:\n    Base() {}\n    ~Base() {}\n    Base &amp;operator = (long temp) {\n        id = temp;\n        return *this;\n    }\n};\n\ntemplate &lt;class C&gt;\nclass Temp1 : public Base {\npublic:\n    Temp1() {}\n    ~Temp1() {}\n    //do something;\n};\n\ntemplate &lt;class C&gt;\nclass Temp2 : public Base {\npublic:\n    Temp2() {}\n    ~ Temp2() {}\n    //do something;\n};\n\nclass Executor1 : public Temp1&lt;int&gt; {\npublic:\n    Executor1() {}\n    ~Executor1() {}\n};\n\nclass Executor2 : public Temp2&lt;char&gt; {\npublic:\n    Executor2() {}\n    ~Executor2() {}\n};\n</code></pre>\n\n<p>I want those classes to support <code>operator =</code>.<br>\ne.g:  </p>\n\n<pre><code>int main()\n{\n    long id1 = 0x00001111, id2 = 0x00002222;\n    Executor1 exec1;\n    Executor2 exec2;\n\n    exec1 = id1;  //exec2.id = id1;\n    exec2 = id2;  //exec2.id = id2;\n}\n</code></pre>\n\n<p>I define <code>operator =</code> in <code>Base</code> whose declaration is <code>Base &amp;operator = (long);</code>.  </p>\n\n<p>But there is a problem clearly that <code>=</code> doesn't work to derive classes. So I have to define <code>operator =</code> totally do the same thing to every <code>Executor</code>.  </p>\n\n<p>How to deal with this case in <code>Base</code> in a better way?</p>\n"}, {"tags": ["c++", "arrays", "loops", "dynamic"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 4, "creation_date": 1536740252, "post_id": 52290526, "comment_id": 91528853, "body": "Is <code>size</code> the number of elements in your array, or the top index? You do know that the top index is one less than the number of elements?"}, {"owner": {"reputation": 81, "user_id": 9537137, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ebb34db9e70d774a0392fc7489457190?s=128&d=identicon&r=PG&f=1", "display_name": "PKPython", "link": "https://stackoverflow.com/users/9537137/pkpython"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1536740710, "post_id": 52290526, "comment_id": 91529137, "body": "@Someprogrammerdude size is the number of elements which is 2."}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 1, "creation_date": 1536741012, "post_id": 52290526, "comment_id": 91529320, "body": "@PKPython What is the type of <code>arr</code>? &quot;Normal&quot; C++ arrays start at index <code>0</code> and end at index <code>size-1</code>, so in that case your <code>for</code> loop must terminate at <code>i &lt; size</code>, not <code>i &lt;= size</code>. Play through it with <code>size=2</code>: <code>i</code> will become <code>0</code>, <code>1</code> and <code>2</code> - that&#39;s three elements you are accessing of an array with only two elements. You do this in several other places, so take a look at each array access and ask yourself &quot;can this index I access ever be larger than <code>size-1</code>?&quot;. Using a debugger will also help you understand what happens at each step in the program - it will really help a lot."}, {"owner": {"reputation": 8430, "user_id": 2742717, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d1dec1aa6accf3589489ebd42634f7a0?s=128&d=identicon&r=PG", "display_name": "Swift - Friday Pie", "link": "https://stackoverflow.com/users/2742717/swift-friday-pie"}, "edited": false, "score": 0, "creation_date": 1536741279, "post_id": 52290526, "comment_id": 91529460, "body": "collegial programming without council how to implement data storage and segregate code into functional parts results in a nightmare-inducing code. Maybe professor wants to illustrate that for students. Or may be he doesn&#39;t care or just wants them to struggle with language  as an educational effort. Anyway problem is that this is incomplete code, it&#39;s not clear what we work with. Only clear that separation of concerns is not used at all."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1536741678, "post_id": 52290526, "comment_id": 91529721, "body": "Also consider using <code>std::array</code> or <code>std::vector</code> instead of raw C++ arrays. They will usually show a diagnostic message when your array indexes get out of bounds, where as accessing a raw C++ array out of bounds just results in <i>undefined bahaviour</i> (google that)."}], "answers": [{"tags": [], "owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "is_accepted": false, "score": 0, "last_activity_date": 1536742627, "creation_date": 1536742627, "answer_id": 52291247, "question_id": 52290526, "link": "https://stackoverflow.com/questions/52290526/deleting-array-from-user-input/52291247#52291247", "title": "Deleting array from user input", "body": "<p>The problem seems to be caused by confusion over array indexes. In C++ arrays start at 0 so the valid indexes for an array of size n are 0,1,...,n - 1. There are good reasons for this and once you become an experienced programmer it becomes second nature but annoyingly users insist on counting from 1 and so for users the valid indexes of an array of size n are 1,2,...,n.</p>\n\n<p>The best way to avoid confusion is to convert user indexes to C++ indexes immediately on input (or immediately before output). So that way most of your code is using the C++ indexing scheme (reasonable enough since it's a C++ program).</p>\n\n<p>Applying that to the code above you get</p>\n\n<pre><code>int pos;\ncin &gt;&gt; pos;\n--pos; // convert from user indexes to C++ indexes\nif (pos &gt;= 0 &amp;&amp; pos &lt; size) // C++ indexes\n{\n    for (i = pos + 1; i &lt; size; i++) // C++ indexes\n    {\n        arr[i - 1] = arr[i];\n    }\n    --size; // array is now smaller\n    cout &lt;&lt; \"Elements now:\" &lt;&lt; endl;\n    for (i = 0; i &lt; size; i++) // C++ indexes\n        cout &lt;&lt; arr[i] &lt;&lt; endl;\n}\nelse\n    cout &lt;&lt; \"Element doesn't exist\" &lt;&lt; endl;\n</code></pre>\n\n<p>The bit I'm confused about in your code is the <code>count</code> variable. I've no idea what that is, the way you use it makes no sense to me so I've ignored it, but you probably shouldn't.</p>\n"}, {"tags": [], "owner": {"reputation": 8430, "user_id": 2742717, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d1dec1aa6accf3589489ebd42634f7a0?s=128&d=identicon&r=PG", "display_name": "Swift - Friday Pie", "link": "https://stackoverflow.com/users/2742717/swift-friday-pie"}, "is_accepted": true, "score": 0, "last_activity_date": 1536743193, "creation_date": 1536743193, "answer_id": 52291449, "question_id": 52290526, "link": "https://stackoverflow.com/questions/52290526/deleting-array-from-user-input/52291449#52291449", "title": "Deleting array from user input", "body": "<p>Let assume, that:</p>\n\n<ol>\n<li><code>arr</code> is a fixed size array.</li>\n<li><code>size</code> is actually variable that stores count of currently \"used\" elements of array.</li>\n<li>your input policy accepts indexes starting with 1, so <code>arr[0]</code> corresponds to input <code>pos = 1</code>.</li>\n</ol>\n\n<p>There are a few problems with this part:</p>\n\n<pre><code>            for (i = pos; i &lt;= size; i++)\n            {\n                arr[i - 1] = arr[i];\n            }\n            arr[size] = 0;\n</code></pre>\n\n<p>First, if size is equal to array's size, you get undefined behavior, because arr[size]\ndoesn't exist. That's where you get strange values, they are result of trying to read outside of array bounds. It's a undefined behaviour.</p>\n\n<p>Second after shifting array you have to decrements size if you do not want to print \"unused\" elements.</p>\n\n<pre><code>for (int i = pos-1; ++i &lt; size;  ) \n// array should stop when i &lt; size, but increment happens at beginning of loop. \n{\n     arr[i-1] = arr[i];\n}\narr[size-1] = 0;  // set last element to zero\nsize--;           \n</code></pre>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user10356313"}, "is_accepted": false, "score": 0, "last_activity_date": 1536811875, "creation_date": 1536811875, "answer_id": 52306540, "question_id": 52290526, "link": "https://stackoverflow.com/questions/52290526/deleting-array-from-user-input/52306540#52306540", "title": "Deleting array from user input", "body": "<p>You have missing the <code>arr</code> declaration</p>\n"}], "owner": {"reputation": 81, "user_id": 9537137, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ebb34db9e70d774a0392fc7489457190?s=128&d=identicon&r=PG&f=1", "display_name": "PKPython", "link": "https://stackoverflow.com/users/9537137/pkpython"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 374, "favorite_count": 0, "accepted_answer_id": 52291449, "answer_count": 3, "score": 1, "last_activity_date": 1536811875, "creation_date": 1536740099, "question_id": 52290526, "link": "https://stackoverflow.com/questions/52290526/deleting-array-from-user-input", "title": "Deleting array from user input", "body": "<p>I am new to C++ and programming in general and have a group assignment for class. We all worked on different parts and I have to make the 'delete' part of the program. I have to delete the specific variable a user ask (if it's in the array) than shift the array to the right. After it does what it needs to do it 'shrinks' the array by half.</p>\n\n<p>I think I can do the shrink easy, but I am having weird issues with my code giving me weird memory addresses it looks like.</p>\n\n<p>Here is my part of my code :)</p>\n\n<pre><code>else if (option == 'd') {\n        cout &lt;&lt; \"Delete element:\" &lt;&lt; endl; //Ask user which array position to delete//\n        for (int i = 0; i &lt; count; ++i) {\n\n            cout &lt;&lt; arr[i]; //print out which array index we have///\n            cout &lt;&lt; endl;\n            int pos; //starts new variable for position///\n            cin &gt;&gt; pos;\n            if (pos &gt;= 1 &amp;&amp; pos &lt;= size) //As long as position is greater than 1 and less than size it loops//\n            {\n                for (i = pos; i &lt;= size; i++)\n                {\n                    arr[i - 1] = arr[i];\n                }\n                arr[size] = 0;\n                cout &lt;&lt; \"Elements now:\" &lt;&lt; endl;\n                for\n                    (i = 0; i &lt;= size; i++)\n                    cout &lt;&lt; arr[i] &lt;&lt; endl;\n            }\n            else\n                cout &lt;&lt; \"Element doesn't exist\" &lt;&lt; endl; //Tells user it doesn't exist if the position doesn't exist//\n</code></pre>\n\n<p>So if I add the element such as like 2, it shows me that 2 is in the array. I enter 2 into the input, and it gives me </p>\n\n<p><code>Elements now:\n2\n-33686019\n0\n</code></p>\n\n<p>I am sorry if this is confusing! I am trying to learn myself. Thank you for your patience!</p>\n"}, {"tags": ["c++", "c++11", "boost", "udp", "boost-asio"], "answers": [{"tags": [], "owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "is_accepted": true, "score": 2, "last_activity_date": 1536763425, "last_edit_date": 1536763425, "creation_date": 1536763098, "answer_id": 52297780, "question_id": 52290390, "link": "https://stackoverflow.com/questions/52290390/boostasio-cancel-or-close-doesnt-work-on-async-handle/52297780#52297780", "title": "boost::asio cancel or close doesn&#39;t work on async_handle", "body": "<p>Asynchronous operations do not complete immediately. Your code looks like you expect them to.</p>\n\n<p>Simplifying your code to:</p>\n\n<p><strong><kbd><a href=\"http://coliru.stacked-crooked.com/a/c649099d1160be83\" rel=\"nofollow noreferrer\">Live On Coliru</a></kbd></strong></p>\n\n<pre><code>#include &lt;boost/asio.hpp&gt;\n#include &lt;iostream&gt;\n\nusing boost::asio::ip::udp;\n\nint main() {\n    std::cout &lt;&lt; std::boolalpha;\n\n    boost::asio::io_context io;\n    boost::asio::ip::udp::socket s {io, udp::v4()};\n    boost::asio::ip::udp::endpoint const ep {{}, 9999};\n\n    auto trace = [&amp;s](char const* caption) { std::cout &lt;&lt; caption &lt;&lt; s.is_open() &lt;&lt; std::endl; };\n    auto handler = [=](boost::system::error_code, size_t) { trace(\"handler: \"); };\n\n    trace(\"main #1: \");\n\n    char buff[200] = {};\n    s.async_send_to(boost::asio::buffer(buff), ep, handler);\n\n    trace(\"main #2: \");\n    s.close();\n\n    s.async_send_to(boost::asio::buffer(buff), ep, handler);\n\n    trace(\"main #3: \");\n    s.close();\n\n    io.run();\n}\n</code></pre>\n\n<p>It makes sense that the handler only run AFTER <code>io.run()</code>; And obviously the socket is only \"open\" until it got first closed:</p>\n\n<pre><code>main #1: true\nmain #2: true\nmain #3: false\nhandler: false\nhandler: false\n</code></pre>\n\n<p>This is exactly expected. So, either you should handle errors:</p>\n\n<p><strong><kbd><a href=\"http://coliru.stacked-crooked.com/a/70f17f2f6bc898e1\" rel=\"nofollow noreferrer\">Live On Coliru</a></kbd></strong></p>\n\n<pre><code>auto trace = [&amp;s](char const* caption) { std::cout &lt;&lt; caption &lt;&lt; (s.is_open()?\"open\":\"closed\") &lt;&lt; std::endl; };\nauto handler = [=](boost::system::error_code ec, size_t) { \n    trace((\"handler(\" + ec.message() + \"): \").c_str()); \n};\n</code></pre>\n\n<p>Printing instead:</p>\n\n<pre><code>main #1: open\nmain #2: open\nmain #3: closed\nhandler(Success): closed\nhandler(Bad file descriptor): closed\n</code></pre>\n\n<blockquote>\n  <p><strong>Note</strong> that perhaps surprisingly, the first send operation still succeeded. Contrary to what I expected this indicates that the send is actually initiated right at the <code>async_send_to</code> call, but the completion is delayed until after <code>io.run()</code> (the socket is still shown to be already closed).</p>\n</blockquote>\n\n<p>And maybe you did not want async operations at all:</p>\n\n<p><strong><kbd><a href=\"http://coliru.stacked-crooked.com/a/f64f244418827852\" rel=\"nofollow noreferrer\">Live On Coliru</a></kbd></strong></p>\n\n<pre><code>#include &lt;boost/asio.hpp&gt;\n#include &lt;iostream&gt;\n\nusing boost::asio::ip::udp;\n\nint main() {\n    std::cout &lt;&lt; std::boolalpha;\n\n    boost::asio::io_context io;\n    boost::asio::ip::udp::socket s {io, udp::v4()};\n    boost::asio::ip::udp::endpoint const ep {{}, 9999};\n\n    auto trace = [&amp;s](char const* caption) { std::cout &lt;&lt; caption &lt;&lt; s.is_open() &lt;&lt; std::endl; };\n\n    trace(\"main #1: \");\n\n    char buff[200] = {};\n    try {\n        /*size_t wlen =*/ s.send_to(boost::asio::buffer(buff), ep);\n        trace(\"sent #1: \");\n    } catch(boost::system::system_error const&amp; e) {\n        std::cout &lt;&lt; \"Send #1 failed: \" &lt;&lt; e.code().message() &lt;&lt; std::endl;\n    }\n\n    trace(\"main #2: \");\n    s.close();\n\n    try {\n        /*size_t wlen =*/ s.send_to(boost::asio::buffer(buff), ep);\n        trace(\"sent #2: \");\n    } catch(boost::system::system_error const&amp; e) {\n        std::cout &lt;&lt; \"Send #2 failed: \" &lt;&lt; e.code().message() &lt;&lt; std::endl;\n    }\n\n    trace(\"main #3: \");\n    s.close();\n\n    io.run();\n}\n</code></pre>\n\n<p>Prints</p>\n\n<pre><code>main #1: true\nsent #1: true\nmain #2: true\nSend #2 failed: Bad file descriptor\nmain #3: false\n</code></pre>\n"}], "owner": {"reputation": 97, "user_id": 9782619, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "YNX", "link": "https://stackoverflow.com/users/9782619/ynx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 271, "favorite_count": 0, "accepted_answer_id": 52297780, "answer_count": 1, "score": 2, "last_activity_date": 1536763425, "creation_date": 1536739602, "last_edit_date": 1536763281, "question_id": 52290390, "link": "https://stackoverflow.com/questions/52290390/boostasio-cancel-or-close-doesnt-work-on-async-handle", "title": "boost::asio cancel or close doesn&#39;t work on async_handle", "body": "<p>boost::asio::ip::udp:socket can not cancel() the async_handle, nor close().</p>\n\n<p>This is the test program:</p>\n\n<pre><code>{\n    boost::asio::io_context io_core;\n    boost::asio::ip::udp::socket udp_socket1(io_core, udp::v4());\n    char buff[200];\n    boost::asio::ip::udp::endpoint endpoint1(boost::asio::ip::address::from_string(\"127.0.0.1\"), 9999);\n\n    cout &lt;&lt; udp_socket1.is_open() &lt;&lt; endl;\n    udp_socket1.async_send_to(boost::asio::buffer(buff, 200), endpoint1, [&amp;udp_socket1](const boost::system::error_code&amp; ec, size_t wlen) {\n        cout &lt;&lt; udp_socket1.is_open() &lt;&lt; endl;\n        //assert(0);\n    });\n    cout &lt;&lt; udp_socket1.is_open() &lt;&lt; endl;\n    udp_socket1.close();\n    udp_socket1.async_send_to(boost::asio::buffer(buff, 200), endpoint1, [&amp;udp_socket1](const boost::system::error_code&amp; ec, size_t wlen) {\n        cout &lt;&lt; udp_socket1.is_open() &lt;&lt; endl;\n        //assert(0);\n    });\n    cout &lt;&lt; udp_socket1.is_open() &lt;&lt; endl;\n\n    udp_socket1.close();\n    io_core.run();\n    system(\"pause\");\n}\n</code></pre>\n\n<p>with boost 1.67.0, WIN10, vs2017 BOOST_ASIO_DISABLE_IOCP and BOOST_ASIO_CANCELIO defined according to the <a href=\"https://www.boost.org/doc/libs/1_68_0/doc/html/boost_asio/reference/basic_stream_socket/cancel/overload2.html\" rel=\"nofollow noreferrer\">documentation</a></p>\n\n<p>Did i fail to get the point?</p>\n\n<p>If i am correct , how to fix this problem ?</p>\n"}, {"tags": ["c++", "opengl-es-2.0", "post-processing"], "answers": [{"comments": [{"owner": {"reputation": 98, "user_id": 4828838, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b5dfe74bb09ea0372b96676156c22767?s=128&d=identicon&r=PG&f=1", "display_name": "Nico", "link": "https://stackoverflow.com/users/4828838/nico"}, "edited": false, "score": 0, "creation_date": 1536837834, "post_id": 52304033, "comment_id": 91572259, "body": "Indeed this is probably what I was missing. I thought I was forced to read FBO content into a texture to reuse its data but look like I can send my FBO texture directly as an uniform to the next processing step. Will definitely try this out. Thank you for your time !"}], "tags": [], "owner": {"reputation": 6020, "user_id": 4052193, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6062c93ce987aa90ac59d06e758f03b6?s=128&d=identicon&r=PG&f=1", "display_name": "Columbo", "link": "https://stackoverflow.com/users/4052193/columbo"}, "is_accepted": false, "score": 2, "last_activity_date": 1536789407, "creation_date": 1536789407, "answer_id": 52304033, "question_id": 52290278, "link": "https://stackoverflow.com/questions/52290278/opengl-es-2-0-multiple-post-processing-effects/52304033#52304033", "title": "OpenGL ES 2.0 - Multiple post processing effects", "body": "<p>If your 2 post-processing effects can be done in a single shader then you should do that, it's much more efficient that way because the memory bandwidth costs of reading and writing entire framebuffers often dwarfs the cost of a few extra shader calculations.</p>\n\n<p>However, many post-processing effects need to operate on the finished result of previous post-processing pass. The typical solution is to setup two FBOs and 'ping-pong' between them. So, if you had 3 post-processing effects that need to be chained, you'd have 3 passes:</p>\n\n<ul>\n<li>Pass 1. Texture=Input Data, Shader=Effect1, Render Target=FBO A.</li>\n<li>Pass 2. Texture=FBO A, Shader=Effect2, Render Target=FBO B.</li>\n<li>Pass 3. Texture=FBO B, Shader=Effect1, Render Target=FBO A.</li>\n</ul>\n\n<p>I think the bit you're missing is that you can use the texture from a framebuffer directly without having to create a brand new texture populated with data from <code>glReadPixels</code>. This <a href=\"http://opengles2learning.blogspot.com/2014/02/render-to-texture-rtt.html\" rel=\"nofollow noreferrer\">tutorial</a> might help.</p>\n"}], "owner": {"reputation": 98, "user_id": 4828838, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b5dfe74bb09ea0372b96676156c22767?s=128&d=identicon&r=PG&f=1", "display_name": "Nico", "link": "https://stackoverflow.com/users/4828838/nico"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 475, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1536789407, "creation_date": 1536739269, "last_edit_date": 1536739652, "question_id": 52290278, "link": "https://stackoverflow.com/questions/52290278/opengl-es-2-0-multiple-post-processing-effects", "title": "OpenGL ES 2.0 - Multiple post processing effects", "body": "<p><strong>Hello</strong></p>\n\n<p>I want to apply multiple image processing effects to an input texture using OpenGL ES.</p>\n\n<p>I successfully managned to apply one post processing effect using a <strong>Framebuffer Object</strong> but I do not quite understand how, without repeating every single step of my step of my process, I can apply numerous post processing effect without having to redo every step each time.</p>\n\n<p>The steps I am going through right now are the following:</p>\n\n<ol>\n<li>Loading my shader(s) and getting the desired location to transfer my data</li>\n<li>Initializating my FBO</li>\n<li>Creating a texture using my input data</li>\n<li>Binding FBO </li>\n<li>Activating TEXTURE0 and binding the previously generated texture</li>\n<li>Sending data using the acquired location</li>\n<li>Drawing a full screen quad and making it use my shader program</li>\n<li>Reading the FBO texture (using glReadPixels) and saving the result to an image</li>\n<li>Unbinding everything to clean up.</li>\n</ol>\n\n<p>From what I understand I do need to repeat the step 5,6,7 with my other post processing shader and using the texture I finally got in step 8 but I do not think this is the right way to go as it wil force me to read data from FBO into a texture to then retransfert them which is really costy.</p>\n\n<p>Am I missing something ?</p>\n"}, {"tags": ["c++", "unordered-map"], "comments": [{"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 1, "creation_date": 1536739151, "post_id": 52290200, "comment_id": 91528230, "body": "An unordererd map seems like the wrong tool here. Why not use <code>std::array&lt;std::array&lt;int, 3&gt;, 3&gt;</code> and zero-index?"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1536739154, "post_id": 52290200, "comment_id": 91528231, "body": "Do you know how to iterate over any other container? Do you know what the <i>value type</i> of a <a href=\"http://en.cppreference.com/w/cpp/container/unordered_map\" rel=\"nofollow noreferrer\"><code>std::unordered_map</code></a>? When you know that it should become easy."}, {"owner": {"reputation": 1820, "user_id": 1476075, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/AGQTc.jpg?s=128&g=1", "display_name": "Teererai Marange", "link": "https://stackoverflow.com/users/1476075/teererai-marange"}, "edited": false, "score": 0, "creation_date": 1536739326, "post_id": 52290200, "comment_id": 91528326, "body": "Because I dont know how large it will get."}, {"owner": {"reputation": 1755, "user_id": 5986881, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/7a607dd49a0116e3ba869a66d6fd1ba0?s=128&d=identicon&r=PG", "display_name": "Samer Tufail", "link": "https://stackoverflow.com/users/5986881/samer-tufail"}, "edited": false, "score": 2, "creation_date": 1536739331, "post_id": 52290200, "comment_id": 91528332, "body": "sum = 0, for(auto&amp; pair : f_table[1]) sum += pair.second; you might want to check if f_table[1] exists first."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1536739459, "post_id": 52290200, "comment_id": 91528410, "body": "How about using <i>vectors</i> then? Or will the &quot;indexes&quot; ever be non-consecutive?"}, {"owner": {"reputation": 1820, "user_id": 1476075, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/AGQTc.jpg?s=128&g=1", "display_name": "Teererai Marange", "link": "https://stackoverflow.com/users/1476075/teererai-marange"}, "edited": false, "score": 0, "creation_date": 1536739489, "post_id": 52290200, "comment_id": 91528427, "body": "yes. the indices would be non-consecutive in some cases."}, {"owner": {"reputation": 1820, "user_id": 1476075, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/AGQTc.jpg?s=128&g=1", "display_name": "Teererai Marange", "link": "https://stackoverflow.com/users/1476075/teererai-marange"}, "edited": false, "score": 0, "creation_date": 1536739622, "post_id": 52290200, "comment_id": 91528509, "body": "What about if I wanted to sum up the elements with a second key of 3 ie. f[?][3]."}], "answers": [{"comments": [{"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1536739530, "post_id": 52290321, "comment_id": 91528453, "body": "If we mention C++17, then <code>std::accumulate</code> can be substituted for the paralleled version of <code>std::reduce</code>"}, {"owner": {"reputation": 33577, "user_id": 9593596, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JdCIQ.jpg?s=128&g=1", "display_name": "lubgr", "link": "https://stackoverflow.com/users/9593596/lubgr"}, "reply_to_user": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1536739735, "post_id": 52290321, "comment_id": 91528571, "body": "That&#39;s a good idea, but is it available? Doesn&#39;t seem to be supported according to <a href=\"https://en.cppreference.com/w/cpp/compiler_support\" rel=\"nofollow noreferrer\">this</a>."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 1, "creation_date": 1536739777, "post_id": 52290321, "comment_id": 91528604, "body": "Doesn&#39;t matter. Answers are not only for the benefit of the OP <i>now</i>, but for future readers too."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1536745325, "post_id": 52290321, "comment_id": 91532016, "body": "Well, it does matter, if the solution doesn&#39;t work. There may be <i>some</i> value if it could work in 10 years&#39; time but then post it in 10 years time"}], "tags": [], "owner": {"reputation": 33577, "user_id": 9593596, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JdCIQ.jpg?s=128&g=1", "display_name": "lubgr", "link": "https://stackoverflow.com/users/9593596/lubgr"}, "is_accepted": false, "score": 7, "last_activity_date": 1536742069, "last_edit_date": 1536742069, "creation_date": 1536739394, "answer_id": 52290321, "question_id": 52290200, "link": "https://stackoverflow.com/questions/52290200/iterating-through-elements-in-unordered-map-of-unordered-maps-cpp/52290321#52290321", "title": "iterating through elements in unordered map of unordered_maps cpp", "body": "<p>One approach is using <code>std::accumulate</code> like this:</p>\n\n<pre><code>#include &lt;numeric&gt;\n\nconst int result = std::accumulate(f_table[1].cbegin(), f_table[1].cend(),\n    0, [](int result, const auto&amp; entry){ return result + entry.second; });\n</code></pre>\n\n<p>Note that as @StoryTeller pointed out in the comments, you might want to prefer a parallel version of this algorithm, which will ship with fully conforming C++17 implementations, i.e., <a href=\"https://en.cppreference.com/w/cpp/algorithm/reduce\" rel=\"nofollow noreferrer\"><code>std::reduce</code></a>. </p>\n\n<p>Another option is a range based for loop. With structured bindings (again available in C++17), you might consider this more readable:</p>\n\n<pre><code>int result = 0;\n\nfor (const auto&amp; [key, value] : f_table[1])\n   result += value;\n</code></pre>\n\n<p>And finally a solution based on <a href=\"https://ericniebler.github.io/range-v3/\" rel=\"nofollow noreferrer\">range-v3</a>:</p>\n\n<pre><code>#include &lt;range/v3/all.hpp&gt;\n\nusing ranges::view::values;\nusing ranges::accumulate;\n\nconst int result = accumulate(f_table[1] | values, 0);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 772, "user_id": 4043866, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/104dac269b12649d6df8386b88962745?s=128&d=identicon&r=PG", "display_name": "JulianH", "link": "https://stackoverflow.com/users/4043866/julianh"}, "is_accepted": true, "score": 1, "last_activity_date": 1536739413, "creation_date": 1536739413, "answer_id": 52290329, "question_id": 52290200, "link": "https://stackoverflow.com/questions/52290200/iterating-through-elements-in-unordered-map-of-unordered-maps-cpp/52290329#52290329", "title": "iterating through elements in unordered map of unordered_maps cpp", "body": "<pre><code>int32_t sum = 0;\nfor (auto&amp; p : f_table[1])\n{\n    sum += p.second\n}\n</code></pre>\n"}], "owner": {"reputation": 1820, "user_id": 1476075, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/AGQTc.jpg?s=128&g=1", "display_name": "Teererai Marange", "link": "https://stackoverflow.com/users/1476075/teererai-marange"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 119, "favorite_count": 0, "accepted_answer_id": 52290329, "answer_count": 2, "score": 0, "last_activity_date": 1536742069, "creation_date": 1536738989, "question_id": 52290200, "link": "https://stackoverflow.com/questions/52290200/iterating-through-elements-in-unordered-map-of-unordered-maps-cpp", "title": "iterating through elements in unordered map of unordered_maps cpp", "body": "<p>Suppose I have an unordered_map defined as below: </p>\n\n<pre><code>unordered_map&lt;int, unordered_map&lt;int, int&gt;&gt; f_table;\nf_table[1][3] = 10;\nf_table[1][2] = 1;\nf_table[1][1] = 2;\nf_table[2][3] = 11;\nf_table[2][2] = 22;\nf_table[2][1] = 4;\nf_table[3][3] = 1;\nf_table[3][2] = 3;\nf_table[3][1] = 2;\n</code></pre>\n\n<p>And I wanted to sum up all elements in f_table[1] which should add up to 13. How would I go about it?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 3, "creation_date": 1536737531, "post_id": 52289729, "comment_id": 91527318, "body": "Since sets are a <i>key-only</i> your declaration of <code>my_set</code> is invalid. Do you mean to use <a href=\"http://en.cppreference.com/w/cpp/container/unordered_map\" rel=\"nofollow noreferrer\"><code>std::unordered_map</code></a> instead?"}, {"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 0, "creation_date": 1536737546, "post_id": 52289729, "comment_id": 91527328, "body": "What about <code>my_set[1] = MyClass(...);</code>? This may involve a copy. If that&#39;s not intended it&#39;s a bit more complicated."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1536737565, "post_id": 52289729, "comment_id": 91527338, "body": "And if you mean <code>std::unordered_map</code>, then no there&#39;s no other way than to have a default constructor."}, {"owner": {"reputation": 551, "user_id": 4012075, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1f7fe00688375b85568e4b4c8ce51995?s=128&d=identicon&r=PG&f=1", "display_name": "250", "link": "https://stackoverflow.com/users/4012075/250"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1536737792, "post_id": 52289729, "comment_id": 91527467, "body": "@Someprogrammerdude Yeah I meant std::unordered_map."}, {"owner": {"reputation": 1825, "user_id": 8118147, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/AeaWX.jpg?s=128&g=1", "display_name": "Benjamin Barrois", "link": "https://stackoverflow.com/users/8118147/benjamin-barrois"}, "edited": false, "score": 0, "creation_date": 1536740346, "post_id": 52289729, "comment_id": 91528911, "body": "You should create a method getMyMap(key, ...) which returns my_map[key] and creates it right before using the parameters &quot;...&quot; for construction. Otherwise I see no other way. Moreover I would not advise to take the habit to using <code>operator []</code> for maps, because if you make an error in your algorithm (retrieving a non existing key you thought existed) it will compile and run and you will not know why you get the wrong result."}], "answers": [{"comments": [{"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 0, "creation_date": 1536740013, "post_id": 52290044, "comment_id": 91528723, "body": "@Aconcagua You&#39;re right. (I focused on the &quot;non-default constructible&quot; as I didn&#39;t agree with SomeProgrammerDude&#39;s comment but I wanted to check it out before realizing some wrong imagination of mine.) However, I edit the answer."}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 1, "creation_date": 1536740202, "post_id": 52290044, "comment_id": 91528830, "body": "(Adjustment of previous, deleted comment): emplace <a href=\"https://en.cppreference.com/w/cpp/container/map/emplace\" rel=\"nofollow noreferrer\"><i>might</i></a> construct the MyClass element even if existing; if constructing is a cheap operation, this might be fine, if it is expensive, we might prefer something like <code>auto i = find; auto mc = i != end ? *i : *(emplace().first);</code>..."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1536741778, "post_id": 52290044, "comment_id": 91529787, "body": "For these types, this seems like an overcomplicated solution. Why not just <code>insert</code>?"}, {"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1536742108, "post_id": 52290044, "comment_id": 91529986, "body": "@LightnessRacesinOrbit There are many ways to get stuff into a <code>std::map</code> or <code>std::unordered_map</code>. Some of them are quite easy and other a bit more complicated but worth in special situations. The example <code>struct T</code> is quite simple for demonstration (and to keep the code as small as possible). <code>emplace()</code> has the IMHO big advance of in-place construction and hence worth to be mentioned. (May be, I should&#39;ve mentioned this fact explicitly.) You might add an alternative answer showing how simple it would be with an <code>insert()</code>. ;-)"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1536742648, "post_id": 52290044, "comment_id": 91530300, "body": "@Scheff I did. Generally speaking you should start with the simple solution (especially when teaching), and only get complicated when it&#39;s needed. Your code will be clearer and more maintainable that way."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1536743584, "post_id": 52290044, "comment_id": 91530933, "body": "Your hint is wrong (always <code>aMap.end()</code> instead of <code>aMap.lower_bound(key)</code>) but then checking key is already present is more verbose :/. <code>try_emplace</code> (C++17) is a good alternative."}, {"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1536744164, "post_id": 52290044, "comment_id": 91531304, "body": "@Jarod42 <code>lower_bound()</code>? <code>lower_bound()</code> would come in mind when I use a <code>std::map</code>. In a <code>std::unordered_map</code>, there is no order. (Hence, they called it <code>unordered_map</code>. ;-) ) So, <code>lower_bound</code> shouldn&#39;t be an option (but <code>find()</code> hopefully will be even more effective -&gt; O(1) for an <code>unordered_map</code> instead of O(ld N).) I&#39;m afraid you commented the wrong answer... ;-)"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1536745374, "post_id": 52290044, "comment_id": 91532049, "body": "Part of my comment is wrong (only apply only to <code>std::map</code>). but <code>hint</code> for <code>emplace_hint</code> is only useful is <code>hint</code> represent already present key (which is not the case of <code>.end()</code> anyway). So you have two look-up."}, {"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1536745571, "post_id": 52290044, "comment_id": 91532176, "body": "@Jarod42 Got it. Yepp, I didn&#39;t care about it. (For my luck, the implementation considers even the case where the hint is wrong.) I will fix it. I translated it wrong from my usual case in <code>std::map</code> where it works (in combination with <code>lower_bound</code> - here we are). ;-)"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1536758942, "post_id": 52290044, "comment_id": 91540575, "body": "@Jarod42 I seem to recall hints generally not being very widely used, but I could be remembering wrong or it could have changed"}], "tags": [], "owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "is_accepted": false, "score": 2, "last_activity_date": 1536748029, "last_edit_date": 1536748029, "creation_date": 1536738482, "answer_id": 52290044, "question_id": 52289729, "link": "https://stackoverflow.com/questions/52289729/c-map-initialize-object-using-non-default-constructor/52290044#52290044", "title": "C++ Map Initialize object using non-default constructor", "body": "<p>Imagine a <code>struct T</code>:</p>\n\n<pre><code>struct T {\n  int i1, i2;\n  // no default constructor\n  explicit T(int i1, int i2): i1(i1), i2(i2) { }\n};\n</code></pre>\n\n<p>With a default constructor it's quite easy:</p>\n\n<pre><code>aMap[123] = T(1, 23);\n</code></pre>\n\n<p>The <code>operator[]</code> grants that a non-existing entry is created on demand (but for this it needs the default constructor of the mapped type).</p>\n\n<hr>\n\n<p>If the class of <code>mapped_type</code> doesn't provide a default constructor OP's intention can be matched by a simple combination of <a href=\"https://en.cppreference.com/w/cpp/container/unordered_map/find\" rel=\"nofollow noreferrer\"><code>std::unordered_map::find()</code></a> and <a href=\"https://en.cppreference.com/w/cpp/container/unordered_map/insert\" rel=\"nofollow noreferrer\"><code>std::unordered_map::insert()</code></a> (or just only the latter with check of success).</p>\n\n<p>(This part was inserted later as A Lightness Races in Orbit pointed out that I skipped this simple solution and directly moved to the more complicated.) He wrote an <a href=\"https://stackoverflow.com/a/52291049/7478597\">alternative answer</a> concerning this. As it is lacking a demonstrational <a href=\"http://stackoverflow.com/help/mcve\">MCVE</a>, I took mine and adapted it:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;unordered_map&gt;\n\nstruct T {\n  int i1, i2;\n  // no default constructor\n  explicit T(int i1, int i2): i1(i1), i2(i2)\n  {\n    std::cout &lt;&lt; \"T::T(\" &lt;&lt; i1 &lt;&lt; \", \" &lt;&lt; i2 &lt;&lt; \")\\n\";\n  }\n};\n\nint main()\n{\n  typedef std::unordered_map&lt;int, T&gt; Map;\n  Map aMap;\n  //aMap[123] = T(1, 23); doesn't work without default constructor.\n  for (int i = 0; i &lt; 2; ++i) {\n    Map::key_type key = 123;\n    Map::iterator iter = aMap.find(key);\n    if (iter == aMap.end()) {\n      std::pair&lt;Map::iterator, bool&gt; ret\n        = aMap.insert(Map::value_type(key, T(1 + i, 23)));\n      if (ret.second) std::cout &lt;&lt; \"Insertion done.\\n\";\n      else std::cout &lt;&lt; \"Insertion failed! Key \" &lt;&lt; key &lt;&lt; \" already there.\\n\";\n    } else {\n      std::cout &lt;&lt; \"Key \" &lt;&lt; key &lt;&lt; \" found.\\n\";\n    }\n  }\n  for (const auto &amp;entry : aMap) {\n    std::cout &lt;&lt; entry.first &lt;&lt; \" -&gt; (\" &lt;&lt; entry.second.i1 &lt;&lt; \", \" &lt;&lt; entry.second.i2 &lt;&lt; \")\\n\";\n  }\n  return 0;\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>T::T(1, 23)\nInsertion done.\nKey 123 found.\n123 -&gt; (1, 23)\n</code></pre>\n\n<p><kbd><a href=\"http://coliru.stacked-crooked.com/a/d7f3a30815953abc\" rel=\"nofollow noreferrer\"><strong>Live Demo on coliru</strong></a></kbd></p>\n\n<hr>\n\n<p>If the mapped type does lack a copy constructor as well then it's still solvable using <a href=\"https://en.cppreference.com/w/cpp/container/map/emplace\" rel=\"nofollow noreferrer\"><code>std::unordered_map::emplace()</code></a> (again with or without pre-check with <a href=\"https://en.cppreference.com/w/cpp/container/unordered_map/find\" rel=\"nofollow noreferrer\"><code>std::unordered_map::find()</code></a>):</p>\n\n<pre><code>aMap.emplace(std::piecewise_construct,\n  std::forward_as_tuple(123),\n  std::forward_as_tuple(1, 23));\n</code></pre>\n\n<p>The adapted sample:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;unordered_map&gt;\n\nstruct T {\n  int i1, i2;\n  // no default constructor\n  explicit T(int i1, int i2): i1(i1), i2(i2)\n  {\n    std::cout &lt;&lt; \"T::T(\" &lt;&lt; i1 &lt;&lt; \", \" &lt;&lt; i2 &lt;&lt; \")\\n\";\n  }\n  // copy constructor and copy assignment disabled\n  T(const T&amp;) = delete;\n  T&amp; operator=(const T&amp;);\n};\n\nint main()\n{\n  typedef std::unordered_map&lt;int, T&gt; Map;\n  Map aMap;\n  for (int i = 0; i &lt; 2; ++i) {\n    Map::key_type key = 123;\n    Map::iterator iter = aMap.find(key);\n    if (iter == aMap.end()) {\n      std::pair&lt;Map::iterator, bool&gt; ret\n        = aMap.emplace(std::piecewise_construct,\n          std::forward_as_tuple(key),\n          std::forward_as_tuple(1 + i, 23));\n      if (ret.second) std::cout &lt;&lt; \"Insertion done.\\n\";\n      else std::cout &lt;&lt; \"Insertion failed! Key \" &lt;&lt; key &lt;&lt; \" already there.\\n\";\n    } else {\n      std::cout &lt;&lt; \"Key \" &lt;&lt; key &lt;&lt; \" found.\\n\";\n    }\n  }\n  for (const auto &amp;entry : aMap) {\n    std::cout &lt;&lt; entry.first &lt;&lt; \" -&gt; (\" &lt;&lt; entry.second.i1 &lt;&lt; \", \" &lt;&lt; entry.second.i2 &lt;&lt; \")\\n\";\n  }\n  return 0;\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>T::T(1, 23)\nInsertion done.\nKey 123 found.\n123 -&gt; (1, 23)\n</code></pre>\n\n<p><kbd><a href=\"http://coliru.stacked-crooked.com/a/54f46b618ca0a239\" rel=\"nofollow noreferrer\"><strong>Live Demo on coliru</strong></a></kbd></p>\n\n<p>As Aconcagua mentioned in comment, without the pre-checking <code>find()</code>, the <code>emplace()</code> might construct the mapped value even if the insertion will fail.</p>\n\n<p>The doc. of <a href=\"https://en.cppreference.com/w/cpp/container/map/emplace\" rel=\"nofollow noreferrer\">`std::unordered_map::emplace()</a> on cppreference mentions this:</p>\n\n<blockquote>\n  <p>The element may be constructed even if there already is an element with the key in the container, in which case the newly constructed element will be destroyed immediately.</p>\n</blockquote>\n\n<hr>\n\n<p>As Jarod42 mentioned, <a href=\"https://en.cppreference.com/w/cpp/container/unordered_map/try_emplace\" rel=\"nofollow noreferrer\"><code>std::unordered_map::try_emplace()</code></a> is an alternative in C++17 worth to be mentioned as</p>\n\n<blockquote>\n  <p>Unlike insert or emplace, these functions do not move from rvalue arguments if the insertion does not happen, which makes it easy to manipulate maps whose values are move-only types, such as <code>std::unordered_map&lt;std::string, std::unique_ptr&lt;foo&gt;&gt;</code>. In addition, <code>try_emplace</code> treats the key and the arguments to the <code>mapped_type</code> separately, unlike emplace, which requires the arguments to construct a <code>value_type</code> (that is, a <code>std::pair</code>) </p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1536741696, "post_id": 52290376, "comment_id": 91529737, "body": "<a href=\"https://en.cppreference.com/w/cpp/container/unordered_map/insert\" rel=\"nofollow noreferrer\"><code>insert</code> is already &quot;add_if_missing&quot;</a>; you don&#39;t need to find first"}, {"owner": {"reputation": 16607, "user_id": 267482, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/fd69625825bed998b63fef68a23592aa?s=128&d=identicon&r=PG", "display_name": "bobah", "link": "https://stackoverflow.com/users/267482/bobah"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 1, "creation_date": 1536741908, "post_id": 52290376, "comment_id": 91529871, "body": "@LightnessRacesinOrbit - yes, but you don\u2019t usually want to construct a <code>value_type</code> unnecessarily, which is not possible with just using the <code>insert</code>."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1536742414, "post_id": 52290376, "comment_id": 91530163, "body": "Okay - it wasn&#39;t clear that this is a constraint you meant for the hypothetical <code>add_if_missing</code>. Anyway in this case it seems to be of little to no cost in the grand scheme of things."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1536742515, "post_id": 52290376, "comment_id": 91530219, "body": "Anyway.. this, then, combined with my answer, is pretty thorough."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1536742604, "post_id": 52290376, "comment_id": 91530274, "body": "Nah too complicated they can stand apart :) If you want to just quickly note something about unnecessary construction you can have a +1 :P"}, {"owner": {"reputation": 16607, "user_id": 267482, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/fd69625825bed998b63fef68a23592aa?s=128&d=identicon&r=PG", "display_name": "bobah", "link": "https://stackoverflow.com/users/267482/bobah"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1536744123, "post_id": 52290376, "comment_id": 91531277, "body": "@LightnessRacesinOrbit - just did :-)"}], "tags": [], "owner": {"reputation": 16607, "user_id": 267482, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/fd69625825bed998b63fef68a23592aa?s=128&d=identicon&r=PG", "display_name": "bobah", "link": "https://stackoverflow.com/users/267482/bobah"}, "is_accepted": false, "score": 1, "last_activity_date": 1536744107, "last_edit_date": 1536744107, "creation_date": 1536739552, "answer_id": 52290376, "question_id": 52289729, "link": "https://stackoverflow.com/questions/52289729/c-map-initialize-object-using-non-default-constructor/52290376#52290376", "title": "C++ Map Initialize object using non-default constructor", "body": "<p><code>[]</code> implements <code>get_add_if_missing</code>. Semantically, an overhead-free implementation would be something like:</p>\n\n<pre><code>value_type&amp; get_add_if_missing(key_type const&amp; k, auto&amp;&amp; factory) {\n    auto b = bucket_for(k);\n    auto pos = pos_for(k, b);\n    if (pos == b.end()) {\n        return b.append(k, factory());\n    } else {\n        return *pos;\n    }\n}\n</code></pre>\n\n<p>A full equivalent is not there on the API yet (as of <code>C++17</code>), so for now, you need to decide what suboptimality to have based on how expensive it is to creating a temporary <code>value_type</code>:</p>\n\n<ul>\n<li>do an extra lookup (search then insert if missing)</li>\n<li>extra temporary (<code>insert/emplace</code> always, covered well in other answers)</li>\n</ul>\n\n<p>An extra lookup version is:</p>\n\n<pre><code>final itr = m.find(key);\nif (itr == m.end()) {\n    // insert or emplace a new element with the constructor of your choice\n}\n</code></pre>\n\n<p>The <a href=\"https://en.cppreference.com/w/cpp/container/unordered_map\" rel=\"nofollow noreferrer\">std::unordered_map</a> article on cppreference should have enough usage examples for <code>insert</code> / <code>emplace</code>.</p>\n\n<p>With a tree-based implementation (<code>std::map</code>) a zero overhead <code>get_add_if_missing</code> emulation is quite possible with <code>lower_bound</code> followed by a hint-enabled <code>insert</code> / <code>emplace</code>.</p>\n\n<p>And finally the good news -- if you can accept <a href=\"https://www.boost.org/doc/libs/1_68_0/doc/html/intrusive.html\" rel=\"nofollow noreferrer\">Boost.Intrusive</a> (a header-only library) as a dependency, you can build a truly zero-overhead <code>get_add_if_missing</code> (no temporaries or repeated hash calculation). An API of the hash map from there is sufficiently detailed for that.</p>\n"}, {"comments": [{"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1536757679, "post_id": 52291049, "comment_id": 91539653, "body": "&quot;you can always do a find first&quot;  - or use <code>try_emplace</code> instead, if C++17 available. That would make the (in my eyes at least) so far best answer complete..."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1536758748, "post_id": 52291049, "comment_id": 91540449, "body": "@Aconcagua You still have to have all your ctor args ready to go, which may or may not be a problem. Could be good though"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1536758773, "post_id": 52291049, "comment_id": 91540465, "body": "@Aconcagua At the very least it&#39;s a drop-in replacement for the piecewise approach"}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1536759578, "post_id": 52291049, "comment_id": 91541023, "body": "If value-type construction is expensive, but arguments are cheap we spare the preceding lookup with find. And as the drop-in is simpler than the piece-wise stuff (well, I might now cite your own words from comment to Scheff&#39;s answer)..."}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1536760561, "post_id": 52291049, "comment_id": 91541662, "body": "Hm, hope I&#39;m not getting pedantic, but &quot;equivalently&quot; is not correct in detail: While the element &quot;may be created even if there already is[...]&quot; with the former, it won*t be with the latter..."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1536761434, "post_id": 52291049, "comment_id": 91542221, "body": "@Aconcagua Oh, I see, that&#39;s <i>not</i> true for the piecewise <code>emplace</code> - ok, thanks! Wow, piecewise <code>emplace</code> is kind of useless then, no? At least in this sense"}], "tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": false, "score": 7, "last_activity_date": 1536761540, "last_edit_date": 1536761540, "creation_date": 1536741917, "answer_id": 52291049, "question_id": 52289729, "link": "https://stackoverflow.com/questions/52289729/c-map-initialize-object-using-non-default-constructor/52291049#52291049", "title": "C++ Map Initialize object using non-default constructor", "body": "<p>You're right that <code>operator[]</code> needs the value type to be default-constructible.</p>\n\n<p><a href=\"https://en.cppreference.com/w/cpp/container/unordered_map/insert\" rel=\"noreferrer\"><code>insert</code></a> does not:</p>\n\n<pre><code>std::unordered_map&lt;int, MyClass&gt; my_map;\n// Populate the map here\n\n// Get element with key \"1\", creating a new one\n// from the given value if it doesn't already exist\nauto result = my_map.insert({1, &lt;your value here&gt;});\n</code></pre>\n\n<p>This gives you a pair containing an iterator to the element (whether created new, or already present), and a boolean (telling you which was the case).</p>\n\n<p>So:</p>\n\n<pre><code>auto&amp; my_class = *result.first;\nconst bool was_inserted = result.second;\n</code></pre>\n\n<p>Now you can do whatever you like with this information. Often you won't even care about <code>result.second</code> and can just ignore it.</p>\n\n<p>For more complex value types you can play around with <code>emplace</code>, which is like <code>insert</code> but, um, better. Say you really don't want the value to be constructed if it won't be used, and you have C++17:</p>\n\n<pre><code>auto result = my_map.try_emplace(1, &lt;your value's ctor args here here&gt;);\n</code></pre>\n\n<p>If you don't care (or don't have C++17):</p>\n\n<pre><code>auto result = my_map.emplace(1, &lt;your value&gt;);\n</code></pre>\n\n<p>This is still better than <code>insert</code> as it can move the value into the map, rather than copying it.</p>\n\n<p>Ultimately, and if you don't even want to unnecessarily produce your ctor args, you can always just do a <code>find</code> first, but it's nice to try to avoid that, as the insertion operation itself will be doing a find too.</p>\n"}], "owner": {"reputation": 551, "user_id": 4012075, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1f7fe00688375b85568e4b4c8ce51995?s=128&d=identicon&r=PG&f=1", "display_name": "250", "link": "https://stackoverflow.com/users/4012075/250"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4515, "favorite_count": 2, "answer_count": 3, "score": 5, "last_activity_date": 1536761540, "creation_date": 1536737396, "last_edit_date": 1536742993, "question_id": 52289729, "link": "https://stackoverflow.com/questions/52289729/c-map-initialize-object-using-non-default-constructor", "title": "C++ Map Initialize object using non-default constructor", "body": "<p>In C++ suppose I have an unordered map defined as follows:</p>\n\n<pre><code>unordered_map&lt;int, MyClass&gt; my_map;\nauto my_class = my_map[1];\n</code></pre>\n\n<p>In the above code if 1 is not present as key in my_map it will initialize MyClass with default constructor and return. But is there a way to use non-default constructor of MyClass for initialization?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1536737616, "post_id": 52289720, "comment_id": 91527365, "body": "Don&#39;t forget that literal strings are really arrays of <b><i>constant</i></b> characters, so your pointer <code>time</code> should be of type <code>const char*</code>."}, {"owner": {"reputation": 8430, "user_id": 2742717, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d1dec1aa6accf3589489ebd42634f7a0?s=128&d=identicon&r=PG", "display_name": "Swift - Friday Pie", "link": "https://stackoverflow.com/users/2742717/swift-friday-pie"}, "edited": false, "score": 0, "creation_date": 1536737744, "post_id": 52289720, "comment_id": 91527436, "body": "what s <i>expected</i> output?"}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 0, "creation_date": 1536739464, "post_id": 52289720, "comment_id": 91528412, "body": "<code>\u2560</code> is 0xCC in codepage 437. So basically you&#39;re printing a bunch of 0xCC &quot;\u2560\u2560\u2560\u2560\u2560\u2560\u2560&quot; which means you <a href=\"https://stackoverflow.com/q/370195/995714\">printed some uninitialized memory</a>, probably due to a non-terminating C string"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "reply_to_user": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 0, "creation_date": 1536743256, "post_id": 52289720, "comment_id": 91530717, "body": "@phuclv <code>std::string</code> are not c-strings, they are not null-terminated"}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1536743837, "post_id": 52289720, "comment_id": 91531080, "body": "@user463035818 I&#39;ve yet to look at the code but std::string does contain a null-terminated string which can be accessed with <code>data()</code> or <code>c_str()</code>"}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 0, "creation_date": 1536744026, "post_id": 52289720, "comment_id": 91531210, "body": "<a href=\"https://stackoverflow.com/q/8889522/995714\">Is (4 &gt; y &gt; 1) a valid statement in C++? How do you evaluate it if so?</a>, <a href=\"https://stackoverflow.com/q/4090845/995714\">Language support for chained comparison operators (x &lt; y &lt; z)</a>, <a href=\"https://stackoverflow.com/q/4089284/995714\">Why does (0 &lt; 5 &lt; 3) return true?</a>"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "reply_to_user": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 0, "creation_date": 1536744053, "post_id": 52289720, "comment_id": 91531238, "body": "@phuclv you get a null terminated c string when you call <code>c_str</code>, but that doesnt mean that <code>std::string</code> is a c string. If you dont believe me check this out <code>std::string s = &quot;asdasd&quot;; s[1] = &#39;\\0&#39;; std::cout &lt;&lt; s.size();</code>"}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1536744803, "post_id": 52289720, "comment_id": 91531701, "body": "@user463035818 I didn&#39;t say that std::string is a C-string and you can mutate the string like that. I&#39;m talking about the place the OP constructs the std::string from <code>holds</code> and if he forgot to null-terminate that array, the output will be undefined"}], "answers": [{"comments": [{"owner": {"reputation": 8430, "user_id": 2742717, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d1dec1aa6accf3589489ebd42634f7a0?s=128&d=identicon&r=PG", "display_name": "Swift - Friday Pie", "link": "https://stackoverflow.com/users/2742717/swift-friday-pie"}, "edited": false, "score": 0, "creation_date": 1536738855, "post_id": 52289822, "comment_id": 91528069, "body": "a bug, second iterator is &quot;end&quot; of source string, i.e. it  is the element <i>after</i> its last one."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 8430, "user_id": 2742717, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d1dec1aa6accf3589489ebd42634f7a0?s=128&d=identicon&r=PG", "display_name": "Swift - Friday Pie", "link": "https://stackoverflow.com/users/2742717/swift-friday-pie"}, "edited": false, "score": 1, "creation_date": 1536739231, "post_id": 52289822, "comment_id": 91528281, "body": "@Swift-FridayPie True, fixed. Thank you."}, {"owner": {"reputation": 8430, "user_id": 2742717, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d1dec1aa6accf3589489ebd42634f7a0?s=128&d=identicon&r=PG", "display_name": "Swift - Friday Pie", "link": "https://stackoverflow.com/users/2742717/swift-friday-pie"}, "edited": false, "score": 1, "creation_date": 1536739565, "post_id": 52289822, "comment_id": 91528473, "body": "You&#39;re welcome. we essentially could just designate three references to char of each section and use their addresses. Just as another &quot;simple&quot;  code. But you got a good illustration how C++ can contract whole program written in &quot;C++ dialect&quot; of C  to a single output line :P"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 8430, "user_id": 2742717, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d1dec1aa6accf3589489ebd42634f7a0?s=128&d=identicon&r=PG", "display_name": "Swift - Friday Pie", "link": "https://stackoverflow.com/users/2742717/swift-friday-pie"}, "edited": false, "score": 1, "creation_date": 1536740088, "post_id": 52289822, "comment_id": 91528758, "body": "@Swift-FridayPie Which becomes very simple with <a href=\"https://en.cppreference.com/w/cpp/string/basic_string_view\" rel=\"nofollow noreferrer\"><code>std::string_view</code></a>. :)"}, {"owner": {"reputation": 8430, "user_id": 2742717, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d1dec1aa6accf3589489ebd42634f7a0?s=128&d=identicon&r=PG", "display_name": "Swift - Friday Pie", "link": "https://stackoverflow.com/users/2742717/swift-friday-pie"}, "edited": false, "score": 0, "creation_date": 1536740789, "post_id": 52289822, "comment_id": 91529193, "body": "Too new but if I understand documentation right, yeah. I actually never saw an example of its use and it seems to be C++17. Because of platforms are a bit behind, it&#39;s mostly C++11\\14."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 1, "creation_date": 1536746092, "post_id": 52289822, "comment_id": 91532519, "body": "Lovely story start to finish :)"}], "tags": [], "owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 4, "last_activity_date": 1536746260, "last_edit_date": 1536746260, "creation_date": 1536737715, "answer_id": 52289822, "question_id": 52289720, "link": "https://stackoverflow.com/questions/52289720/dividing-pointer-char-array-to-other-arrays/52289822#52289822", "title": "Dividing pointer char array to other arrays", "body": "<p>The expression <code>2 &lt;= t &lt; 4</code> is equal to <code>(2 &lt;= t) &lt; 4</code>. That is, check if the result of <code>2 &lt;= t</code> (which is a bool <code>true</code> or <code>false</code>) is smaller than <code>4</code>, which is will <em>always</em> be as boolean results are either <code>0</code> (for <code>false</code>) or <code>1</code> (for <code>true</code>).</p>\n\n<p>If you want to compare a range, you need to to e.g. <code>2 &lt;= t &amp;&amp; t &lt; 4</code>.</p>\n\n<hr>\n\n<p>More generally, I advice you to <em>not</em> use a loop for this. Do the assignments directly instead:</p>\n\n<pre><code>// Create three arrays and initialize all elements to zero\nchar holdh[3] = {};\nchar holdM[3] = {};\nchar holds[3] = {};\n\nholdh[0] = time[0];\nholdh[1] = time[1];\nholdM[0] = time[2];\nholdM[1] = time[3];\nholds[0] = time[4];\nholds[1] = time[5];\n</code></pre>\n\n<p>Much simpler <em>and</em> show your intent much more clearly.</p>\n\n<hr>\n\n<p>And you don't even <em>need</em> the temporary <code>holdX</code> variables, as you can just get the sub-strings from <code>time</code> and initialize <code>h</code>, <code>M</code> and <code>s</code> directly:</p>\n\n<pre><code>const char* time = \"173324\";\n\nstd::string h(time + 0, time + 2);\nstd::string M(time + 2, time + 4);\nstd::string s(time + 4, time + 6);\n</code></pre>\n\n<p>And do you <em>really</em> need the <em>also</em> temporary <code>h</code>, <code>M</code> and <code>s</code> variables?</p>\n\n<pre><code>std::cout &lt;&lt; std::string(time + 0, time + 2) &lt;&lt; ':'\n          &lt;&lt; std::string(time + 2, time + 4) &lt;&lt; ':'\n          &lt;&lt; std::string(time + 4, time + 6) &lt;&lt; '\\n';\n</code></pre>\n\n<p>And do you <em>really</em> need freshly allocated strings?</p>\n\n<pre><code>std::cout &lt;&lt; std::string_view(time + 0, 2) &lt;&lt; ':'\n          &lt;&lt; std::string_view(time + 2, 2) &lt;&lt; ':'\n          &lt;&lt; std::string_view(time + 4, 2) &lt;&lt; '\\n';\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1536743105, "post_id": 52290109, "comment_id": 91530621, "body": "&quot;you made assumption that if() checks every comparison inside its expression&quot; there is no comparison that wont get checked in OPs code, its just their precedence that OP got wrong"}, {"owner": {"reputation": 8430, "user_id": 2742717, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d1dec1aa6accf3589489ebd42634f7a0?s=128&d=identicon&r=PG", "display_name": "Swift - Friday Pie", "link": "https://stackoverflow.com/users/2742717/swift-friday-pie"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1536743585, "post_id": 52290109, "comment_id": 91530936, "body": "@user463035818 there are languages were <code>if  0 &lt; x &lt; 2</code> means  that x is greater than 0 and less than two. But C and consequently C++ do not use that syntax for obvious problems with implementation of it  that would be &quot;close-to-metal&quot;.  It&#39;s not precedence , it&#39;s complete lack of understanding that C doesn&#39;t have <i>comparisons</i>. It have  comparison operator that return boolean value."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1536743712, "post_id": 52290109, "comment_id": 91531010, "body": "<code>0 &lt; x</code> is a comparison and <code>(0&lt;x) &lt; 2</code> is another one ;)"}, {"owner": {"reputation": 8430, "user_id": 2742717, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d1dec1aa6accf3589489ebd42634f7a0?s=128&d=identicon&r=PG", "display_name": "Swift - Friday Pie", "link": "https://stackoverflow.com/users/2742717/swift-friday-pie"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1536743833, "post_id": 52290109, "comment_id": 91531077, "body": "@user463035818 two subsequent comparision operator calls, yeah. It&#39;s not a comparision though, which would be a predicate solution, not a boolean expression. Semantics. C\\C++ do not work with predicates."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1536743950, "post_id": 52290109, "comment_id": 91531159, "body": "sorry I dont get why you think <code>a &lt; b</code> is not a comparison. Maybe I will do some reading later, but dont think we will converge here"}, {"owner": {"reputation": 8430, "user_id": 2742717, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d1dec1aa6accf3589489ebd42634f7a0?s=128&d=identicon&r=PG", "display_name": "Swift - Friday Pie", "link": "https://stackoverflow.com/users/2742717/swift-friday-pie"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1536744212, "post_id": 52290109, "comment_id": 91531334, "body": "@user463035818 because C++ semantics consider it being equal to a call of a function <code>bool operator&lt;(int a,int b)</code>. That&#39;s not how OP  was reading that notation though."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1536744295, "post_id": 52290109, "comment_id": 91531389, "body": "maybe we can agree on this: &quot;(a &lt;= t) &lt; b is always true, if b is grater than zero.&quot;... but if <code>b==1</code> and <code>(a&lt;=t) == true</code> then <code>(a &lt;= t) &lt; b</code> is <code>false</code>"}, {"owner": {"reputation": 8430, "user_id": 2742717, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d1dec1aa6accf3589489ebd42634f7a0?s=128&d=identicon&r=PG", "display_name": "Swift - Friday Pie", "link": "https://stackoverflow.com/users/2742717/swift-friday-pie"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1536744486, "post_id": 52290109, "comment_id": 91531505, "body": "@user463035818 fruits of distraction"}], "tags": [], "owner": {"reputation": 8430, "user_id": 2742717, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d1dec1aa6accf3589489ebd42634f7a0?s=128&d=identicon&r=PG", "display_name": "Swift - Friday Pie", "link": "https://stackoverflow.com/users/2742717/swift-friday-pie"}, "is_accepted": false, "score": 1, "last_activity_date": 1536744451, "last_edit_date": 1536744451, "creation_date": 1536738693, "answer_id": 52290109, "question_id": 52289720, "link": "https://stackoverflow.com/questions/52289720/dividing-pointer-char-array-to-other-arrays/52290109#52290109", "title": "Dividing pointer char array to other arrays", "body": "<p>Your code is an textbook example of bad use of <code>if()</code> statement inside of loop.</p>\n\n<p>What happens that you repeat all same checks in every iterations, while you actually <em>know</em> where iterations must stop.</p>\n\n<p>And you made assumption that if() checks every comparison inside its expression. It doesn't. It evaluates expression and checks if result is equivalent of  non-zero value or  boolean <code>true</code>. Thus <code>if(4 &lt;= t &lt; 6)</code> is a bug. It's an equivalent of <code>if( (4 &lt;= t) &lt; 6 )</code>. <code>(a &lt;= t) &lt; b</code> is always true, if b is grater than 1.</p>\n\n<p>SImplest conversion of your code would be:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;cstdlib&gt;\n#include &lt;iomanip&gt;\n#include &lt;string&gt;\n\nusing std::string;\nusing std::cout;\n\nint main()\n{\n    const char* time = \"173324\"; \n    // note, that making it non-const is a not standard compliant\n\n    char hold[3][3] = {};  // zero initialization\n\n    for (int t = 0; t &lt; 6;t++)\n    {\n        hold[t / 2][t % 2] = time[t];\n    }\n\n\n    string h(hold[0]);\n    string M(hold[1]);\n    string s(hold[2]);\n    string datex = h + \":\" + M + \":\" + s;\n    cout &lt;&lt; datex;\n    return 0;\n}\n</code></pre>\n\n<p>Or maybe even so:</p>\n\n<pre><code>string hold[3];  \nfor (int t = 0; t &lt; 6;t++)\n{\n    hold[t / 2] += time[t];\n}\nstring datex = hold[0] + \":\" + hold[1] + \":\" + hold[2];\n</code></pre>\n\n<p>But better you should avoid making loops at all, provided string got constructor that receives iterators for beginning and end of source.</p>\n\n<pre><code>std::string h(time + 0, time + 2);\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 10351671, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce46d84a7457ec0deee98c639d8d7d24?s=128&d=identicon&r=PG&f=1", "display_name": "funarchist", "link": "https://stackoverflow.com/users/10351671/funarchist"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 1, "answer_count": 2, "score": -2, "last_activity_date": 1536746260, "creation_date": 1536737369, "last_edit_date": 1536741639, "question_id": 52289720, "link": "https://stackoverflow.com/questions/52289720/dividing-pointer-char-array-to-other-arrays", "title": "Dividing pointer char array to other arrays", "body": "<p>When I printed it I got error like this <code>17:1733\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u256017:\u2560\u2560</code>.\nI couldn't figure it out. I would appreciate if you solve and give me a better approach? Thanks for your help.</p>\n\n<pre><code>#include \"stdafx.h\"\n#include &lt;iostream&gt;\n#include &lt;conio.h&gt;\n#include &lt;cstdlib&gt;\n#include &lt;iomanip&gt;\n#include &lt;string&gt;\nusing namespace std;\n\nint main()\n{\n\n\n    char* time = \"173324\";\n\n    char holdh[3];\n    char holdM[3];\n    char holds[3];\n    holdh[2] = '\\0';\n    holdM[2] = '\\0';\n    holds[2] = '\\0';\n\n    int t;\n    for (t = 0; t &lt; 6;t++)\n    {\n        if (t &lt; 2)\n            holdh[t] = *(time + t);\n        else if (2 &lt;= t &lt; 4) {\n            t = t - 2;\n            holdM[t] = *(time + t);\n            t = t + 2;\n        }\n        else if (4 &lt;= t &lt; 6)\n        {\n            t = t - 4;\n            holds[t] = *(time + t);\n            t = t + 4;\n        }\n    }\n\n\n    string h(holdh);\n    string M(holdM);\n    string s(holds);\n    string datex = h + \":\" + M + \":\" + s;\n    cout &lt;&lt; datex;\n    return 0;\n}\n</code></pre>\n\n<p>It might be overflow of memory but I tried to prevent that by assigning <code>null</code> values. So if I have a problem in there too please inform. Thanks again.</p>\n"}]