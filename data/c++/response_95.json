[{"tags": ["c++", "xml", "parsing", "xerces"], "answers": [{"comments": [{"owner": {"reputation": 55, "user_id": 6510727, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da70050c392c01a31c4f53a526e7e91d?s=128&d=identicon&r=PG&f=1", "display_name": "govCode", "link": "https://stackoverflow.com/users/6510727/govcode"}, "edited": false, "score": 0, "creation_date": 1478134568, "post_id": 40391760, "comment_id": 68035856, "body": "I&#39;m not sure I understand what you mean. I have been playing with this code and it either prints the same thing or empty tags"}, {"owner": {"reputation": 3864, "user_id": 620908, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2abd643ecb33f1a18a7a4f976cef0dbe?s=128&d=identicon&r=PG", "display_name": "Adrian Colomitchi", "link": "https://stackoverflow.com/users/620908/adrian-colomitchi"}, "reply_to_user": {"reputation": 55, "user_id": 6510727, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da70050c392c01a31c4f53a526e7e91d?s=128&d=identicon&r=PG&f=1", "display_name": "govCode", "link": "https://stackoverflow.com/users/6510727/govcode"}, "edited": false, "score": 0, "creation_date": 1478139930, "post_id": 40391760, "comment_id": 68037094, "body": "@govCode Because the way you capture the title is a dummy one. If you don&#39;t know how to get you actual title content, raise another question. Otherwise, to test the code, add an <code>id</code> attribute to your title elements in your input doc and use the value of it (via <code>attrs</code> parameter) into the <code>titleBuffer</code>"}], "tags": [], "owner": {"reputation": 3864, "user_id": 620908, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2abd643ecb33f1a18a7a4f976cef0dbe?s=128&d=identicon&r=PG", "display_name": "Adrian Colomitchi", "link": "https://stackoverflow.com/users/620908/adrian-colomitchi"}, "is_accepted": false, "score": 0, "last_activity_date": 1478131172, "creation_date": 1478131172, "answer_id": 40391760, "question_id": 40391625, "link": "https://stackoverflow.com/questions/40391625/how-to-parse-only-1-tag-when-there-are-mutiple-of-the-same-name-using-xerces-c/40391760#40391760", "title": "How to Parse only 1 tag when there are mutiple of the same name using Xerces c++", "body": "<p>Make the <code>title</code> flag a <code>size_t</code> and init it to <code>size_t(-1)</code></p>\n\n<p>Then change the <code>if (book &amp;&amp; strcmp(message, \"title\") == 0)</code> into:</p>\n\n<pre><code>else if (book &amp;&amp; strcmp(message, \"title\") == 0 ) {\n    title++;\n    if(0 == title) { // this is the one we want\n      titleBuffer = \"\";\n      // perhaps registering a callback with the parser - say, firstTitleFound\n      // would allow you to do something like\n      // firstTitleFound(titleBuffer);\n      // and then capture the first titles of all the books in your document\n    }\n}\n</code></pre>\n\n<p>Maybe also reset the title to <code>size_t(-1)</code> whenever you encounter any element that can contain a title.</p>\n"}], "owner": {"reputation": 55, "user_id": 6510727, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da70050c392c01a31c4f53a526e7e91d?s=128&d=identicon&r=PG&f=1", "display_name": "govCode", "link": "https://stackoverflow.com/users/6510727/govcode"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 66, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1478131172, "creation_date": 1478130187, "question_id": 40391625, "link": "https://stackoverflow.com/questions/40391625/how-to-parse-only-1-tag-when-there-are-mutiple-of-the-same-name-using-xerces-c", "title": "How to Parse only 1 tag when there are mutiple of the same name using Xerces c++", "body": "<p>I am trying to parse an xml file and I have located the correct title tag but there are multiple title tags and I need to parse just the first one.  Currently, my code outputs all title tags\nFor example:</p>\n\n<pre><code>&lt;book&gt;\n   &lt;title&gt;\n   &lt;title&gt;\n   &lt;title&gt;\n&lt;book&gt;\n&lt;movie&gt;\n   &lt;title&gt;\n&lt;movie&gt;\n</code></pre>\n\n<p>I need just the first title in book.</p>\n\n<p>My current code pulls all the title tags in book and outputs them.  Is there a way to stop after the first title?  Thanks.</p>\n\n<pre><code>void MySaxHandler::startElement(\nconst XMLCh* const uri,\nconst XMLCh* const localname,\nconst XMLCh* const qname,\nconst Attributes&amp; attrs\n) {\nchar* message = XMLString::transcode(localname);\nif (strcmp(message, \"book\") == 0) {\n    book = true;\n}\nelse if (book &amp;&amp; strcmp(message, \"title\") == 0) {\n    title = true;\n    titleBuffer = \"\";\n}\nelse if (strcmp(message, \"movie\") == 0) {\n    book = false;\n}\nelse if (book &amp;&amp; strcmp(message, \"name\") == 0) {\n    title = false;\n}\nXMLString::release(&amp;message);\n</code></pre>\n"}, {"tags": ["c++", "types", "sympy"], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 7107212, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0c5f703e643ce3214f2ab01e9014d88?s=128&d=identicon&r=PG&f=1", "display_name": "samwise", "link": "https://stackoverflow.com/users/7107212/samwise"}, "edited": false, "score": 0, "creation_date": 1478780302, "post_id": 40407813, "comment_id": 68295029, "body": "Thanks, @asmeurer, that&#39;s a great help. Since I wanted to remove all occurrences of <code>L</code>, I then used <code>CCodePrinter._print_Rational = MyCCodePrinter._print_Rational</code> to rebind the <code>_print_Rational</code> function used by <code>sympy.printing.ccode()</code> to my subclass. This is exactly what I was looking for."}, {"owner": {"reputation": 75386, "user_id": 161801, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/0383e4cae325f65a1bbd906be4be2276?s=128&d=identicon&r=PG", "display_name": "asmeurer", "link": "https://stackoverflow.com/users/161801/asmeurer"}, "reply_to_user": {"reputation": 23, "user_id": 7107212, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0c5f703e643ce3214f2ab01e9014d88?s=128&d=identicon&r=PG&f=1", "display_name": "samwise", "link": "https://stackoverflow.com/users/7107212/samwise"}, "edited": false, "score": 0, "creation_date": 1478811370, "post_id": 40407813, "comment_id": 68313197, "body": "There&#39;s no need to monkey patch the SymPy code. You can print from your class with <code>doprint</code>. See my updated answer."}, {"owner": {"reputation": 23, "user_id": 7107212, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0c5f703e643ce3214f2ab01e9014d88?s=128&d=identicon&r=PG&f=1", "display_name": "samwise", "link": "https://stackoverflow.com/users/7107212/samwise"}, "edited": false, "score": 0, "creation_date": 1480003318, "post_id": 40407813, "comment_id": 68803469, "body": "Ah thank you, that is much neater. Apologies, I&#39;m quite new to Python. If I had enough rep to upvote your answer I would!"}], "tags": [], "owner": {"reputation": 75386, "user_id": 161801, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/0383e4cae325f65a1bbd906be4be2276?s=128&d=identicon&r=PG", "display_name": "asmeurer", "link": "https://stackoverflow.com/users/161801/asmeurer"}, "is_accepted": true, "score": 1, "last_activity_date": 1478811350, "last_edit_date": 1478811350, "creation_date": 1478194208, "answer_id": 40407813, "question_id": 40391602, "link": "https://stackoverflow.com/questions/40391602/sympy-ccode-number-type/40407813#40407813", "title": "sympy ccode number type", "body": "<p>Right now there isn't an option for this (I opened an <a href=\"https://github.com/sympy/sympy/issues/11803\" rel=\"nofollow noreferrer\">issue</a> for it). </p>\n\n<p>A workaround is to subclass <code>sympy.printing.ccode.CCodePrinter</code> and override <code>_print_Rational</code>. This is the current definition:</p>\n\n<pre><code>def _print_Rational(self, expr):\n    p, q = int(expr.p), int(expr.q)\n    return '%d.0L/%d.0L' % (p, q)\n</code></pre>\n\n<p>So you can write something like</p>\n\n<pre><code>class MyCCodePrinter(CCodePrinter):\n    def _print_Rational(self, expr):\n        p, q = int(expr.p), int(expr.q)\n        return '%d.0/%d.0' % (p, q)\n</code></pre>\n\n<p>You can then print expressions with <code>MyCCodePrinter().doprint(expr)</code>.</p>\n"}], "owner": {"reputation": 23, "user_id": 7107212, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0c5f703e643ce3214f2ab01e9014d88?s=128&d=identicon&r=PG&f=1", "display_name": "samwise", "link": "https://stackoverflow.com/users/7107212/samwise"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 137, "favorite_count": 0, "accepted_answer_id": 40407813, "answer_count": 1, "score": 2, "last_activity_date": 1478811350, "creation_date": 1478130038, "question_id": 40391602, "link": "https://stackoverflow.com/questions/40391602/sympy-ccode-number-type", "title": "sympy ccode number type", "body": "<p>I am using Sympy to manipulate and differentiate a user-defined input function in order to generate a C++ library to be used with an external C++ program. It works great, except that for the fact that Sympy insists on expressing 1/2 as 1.0L/2.0L. Fine, except some of the variables in the main code are of type std::complex, so this is causing a compile-time error since it can't (implicitly) multiply/add/subtract a complex with long doubles (or ints, for that matter). I tried compiling with -std=c++14 since this has more support for implicit type casting, but the \"problem\" persists.</p>\n\n<p>In the meantime, I've written a set of helper functions to deal with those operations, but I was wondering if there is any way to tell Sympy to output any numerical value it has as a double? For example, instead of outputting 1.0L/2.0L to the C code, can I force it to just write 1.0/2.0 (or even 0.5)? Likewise, instead of writing an int such as 2, I'd like it to write 2.0. I tried setting the precision flag (in the sympy.printing.ccode function call) but it did not change anything. I couldn't seem to find anything online </p>\n\n<p>I'd be very grateful for any advice.</p>\n\n<p>Many thanks,\nSam</p>\n"}, {"tags": ["c++", "c", "visual-studio", "visual-studio-2010"], "comments": [{"owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "edited": false, "score": 5, "creation_date": 1478129121, "post_id": 40391444, "comment_id": 68034583, "body": "If it creates a .dll but not a .lib, that <i>usually</i> means that you haven&#39;t exported anything from your dll."}, {"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 1, "creation_date": 1478166372, "post_id": 40391444, "comment_id": 68046596, "body": "You will <i>always</i> get .obj files, the compiler needs to create them.  Then they get linked to produce the final .dll file.  If you don&#39;t see a .lib file at all then you forgot to export anything.  Use <code>__declspec(dllexport)</code> or a .def file."}, {"owner": {"reputation": 10812, "user_id": 1241782, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/576b21d9efadc9217270e971fd6d5027?s=128&d=identicon&r=PG", "display_name": "Mike S", "link": "https://stackoverflow.com/users/1241782/mike-s"}, "reply_to_user": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1478187482, "post_id": 40391444, "comment_id": 68061425, "body": "@HansPassant I need to export the entire project. I&#39;m trying to create a library that can be used by another application. Does Visual Studio have an option to export the whole thing?"}], "answers": [{"tags": [], "owner": {"reputation": 488, "user_id": 6344366, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/8EB8C.jpg?s=128&g=1", "display_name": "Cherkesgiller", "link": "https://stackoverflow.com/users/6344366/cherkesgiller"}, "is_accepted": false, "score": 0, "last_activity_date": 1478130364, "creation_date": 1478130364, "answer_id": 40391656, "question_id": 40391444, "link": "https://stackoverflow.com/questions/40391444/visual-studio-outputs-obj-but-not-lib/40391656#40391656", "title": "Visual Studio outputs .obj but not .lib", "body": "<p>Does your dll have any actual exports? If there are no , the linker will not generate an import library .lib file.</p>\n"}], "owner": {"reputation": 10812, "user_id": 1241782, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/576b21d9efadc9217270e971fd6d5027?s=128&d=identicon&r=PG", "display_name": "Mike S", "link": "https://stackoverflow.com/users/1241782/mike-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 599, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1478188048, "creation_date": 1478129034, "last_edit_date": 1495540415, "question_id": 40391444, "link": "https://stackoverflow.com/questions/40391444/visual-studio-outputs-obj-but-not-lib", "title": "Visual Studio outputs .obj but not .lib", "body": "<p>I have a large Visual Studio project with C and C++ code. The Target Extension is .dll and the Configuration Type is Dynamic Link Library. It builds the .dll just fine and outputs tons of .obj files. How do I get Visual Studio to give me one .lib (object library) file instead of tons of .obj files?</p>\n\n<p>I've tried <a href=\"https://stackoverflow.com/a/584066/1241782\">entering a value for the Import Library option</a> but it doesn't change anything. I need the .lib because when I create a new test program referencing my .dll I get tons of <code>error LNK2001: unresolved external symbol</code> errors, which indicates that I need the object library.</p>\n\n<p>Close vote: this question is <strong>well within</strong> <a href=\"https://stackoverflow.com/help/on-topic\">What topics can I ask here?</a></p>\n"}, {"tags": ["c++", "opencv"], "answers": [{"tags": [], "owner": {"reputation": 3468, "user_id": 1254714, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/O9eQB.png?s=128&g=1", "display_name": "Alejandro Silvestri", "link": "https://stackoverflow.com/users/1254714/alejandro-silvestri"}, "is_accepted": false, "score": 0, "last_activity_date": 1558359878, "creation_date": 1558359878, "answer_id": 56222252, "question_id": 40391399, "link": "https://stackoverflow.com/questions/40391399/are-cvvizwidget-clickable-opencv-c/56222252#56222252", "title": "Are cv::viz::Widget clickable? (OpenCV C++)", "body": "<p>No, Widgets are not clickable.</p>\n\n<p>You can:</p>\n\n<ol>\n<li>get an MouseEvent</li>\n<li>check the click checking if type == MouseButtonPress</li>\n<li>get the Point in window where click happened</li>\n<li>use converTo3DRay to get a ray representing click's all depths in 3D</li>\n<li>iterate your widgets looking for intersection.  Intersection is computed differently in each king of widget.</li>\n</ol>\n\n<p>getWidgetPose gives you the pose in reference to the camera.  getWidgetPose(...).translation() gives you the place the widget is.  If you aren't comfortable with this translation, you can apply converTo3DRay.</p>\n\n<p>If you find many widgets, you can order by z coordinate (the lower, the closer to camera).  It works for points, it's harder for other geomtry.</p>\n"}], "owner": {"reputation": 358, "user_id": 5112486, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/055d9302c2a0e6c1aff1876a69c6e29c?s=128&d=identicon&r=PG&f=1", "display_name": "Caladbolgll", "link": "https://stackoverflow.com/users/5112486/caladbolgll"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 146, "favorite_count": 0, "answer_count": 1, "score": 4, "last_activity_date": 1558359878, "creation_date": 1478128703, "last_edit_date": 1592644375, "question_id": 40391399, "link": "https://stackoverflow.com/questions/40391399/are-cvvizwidget-clickable-opencv-c", "title": "Are cv::viz::Widget clickable? (OpenCV C++)", "body": "<p>I've seen that there can be <a href=\"http://docs.opencv.org/trunk/dc/d3b/classcv_1_1viz_1_1MouseEvent.html\" rel=\"nofollow noreferrer\">an event handler for mouse click in viz</a>, but not an equivalent for the <a href=\"http://cartucho.github.io/d7/dcd/classcv_1_1viz_1_1Widget.html\" rel=\"nofollow noreferrer\">Widget</a>.</p>\n<p>Is there any way to use the <code>Point</code> returned from <code>viz::MouseEvent()</code> to detect a click on a widget?</p>\n"}, {"tags": ["c++", "multithreading", "pthreads", "affinity", "thread-priority"], "comments": [{"owner": {"reputation": 9192, "user_id": 2040040, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/FD6QD.png?s=128&g=1", "display_name": "johnchen902", "link": "https://stackoverflow.com/users/2040040/johnchen902"}, "edited": false, "score": 0, "creation_date": 1478137384, "post_id": 40391337, "comment_id": 68036469, "body": "Sadly I cannot reproduce the problem."}, {"owner": {"reputation": 164, "user_id": 7079892, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab3641874cdfed343275c3b0c53a06b2?s=128&d=identicon&r=PG&f=1", "display_name": "hhy", "link": "https://stackoverflow.com/users/7079892/hhy"}, "reply_to_user": {"reputation": 9192, "user_id": 2040040, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/FD6QD.png?s=128&g=1", "display_name": "johnchen902", "link": "https://stackoverflow.com/users/2040040/johnchen902"}, "edited": false, "score": 0, "creation_date": 1478169602, "post_id": 40391337, "comment_id": 68048692, "body": "@johnchen902 Maybe it&#39;s OS related? I&#39;m using Ubuntu14.04-LTS. And the problem won&#39;t show up if the thread priority is not set. For example, if I run it without <code>sudo</code>, everything works just fine."}, {"owner": {"reputation": 164, "user_id": 7079892, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab3641874cdfed343275c3b0c53a06b2?s=128&d=identicon&r=PG&f=1", "display_name": "hhy", "link": "https://stackoverflow.com/users/7079892/hhy"}, "reply_to_user": {"reputation": 9192, "user_id": 2040040, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/FD6QD.png?s=128&g=1", "display_name": "johnchen902", "link": "https://stackoverflow.com/users/2040040/johnchen902"}, "edited": false, "score": 0, "creation_date": 1478169977, "post_id": 40391337, "comment_id": 68048931, "body": "Problem solved. See my comment under Tav&#39;s answer."}, {"owner": {"reputation": 27440, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1478170858, "post_id": 40391337, "comment_id": 68049530, "body": "@hhy - As I commented below, I don&#39;t think that&#39;s a &quot;solution&quot;.  From looking at your code, the output to <code>stdout</code> shouldn&#39;t be blocked.  I&#39;m not sure why you got downvoted, because it seems like a real issue."}], "answers": [{"comments": [{"owner": {"reputation": 164, "user_id": 7079892, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab3641874cdfed343275c3b0c53a06b2?s=128&d=identicon&r=PG&f=1", "display_name": "hhy", "link": "https://stackoverflow.com/users/7079892/hhy"}, "edited": false, "score": 0, "creation_date": 1478169956, "post_id": 40392014, "comment_id": 68048918, "body": "Well actually you&#39;re an expert! If I comment out all the <code>printf</code> in the child thread the problem goes away. Guess the while loop in the child thread is stopping other threads from getting access to stdout if <code>printf</code> is called before the while loop."}, {"owner": {"reputation": 27440, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "reply_to_user": {"reputation": 164, "user_id": 7079892, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab3641874cdfed343275c3b0c53a06b2?s=128&d=identicon&r=PG&f=1", "display_name": "hhy", "link": "https://stackoverflow.com/users/7079892/hhy"}, "edited": false, "score": 0, "creation_date": 1478170715, "post_id": 40392014, "comment_id": 68049421, "body": "@hhy - Commenting out the <code>printf</code> in the child thread should not effect the result.  If the child thread is holding a lock on <code>stdout</code> <i>after <code>printf</code> returns</i>, I&#39;d consider that a bug in the implementation."}], "tags": [], "owner": {"reputation": 198, "user_id": 6313023, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h9HB9.jpg?s=128&g=1", "display_name": "Tav", "link": "https://stackoverflow.com/users/6313023/tav"}, "is_accepted": true, "score": 1, "last_activity_date": 1478133377, "creation_date": 1478133377, "answer_id": 40392014, "question_id": 40391337, "link": "https://stackoverflow.com/questions/40391337/pthread-freezes-stdout/40392014#40392014", "title": "Pthread freezes stdout?", "body": "<p>I won't claim to be an expert but you appear to have a single resource, stdout, and two threads attempting to use it. I believe printf is thread safe, but not reentrent.\nMy fist instinct would be to use some kind of thread safe locking around the access to printf and stdout to ensure only one thread is calling it at a time.</p>\n"}], "owner": {"reputation": 164, "user_id": 7079892, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab3641874cdfed343275c3b0c53a06b2?s=128&d=identicon&r=PG&f=1", "display_name": "hhy", "link": "https://stackoverflow.com/users/7079892/hhy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 735, "favorite_count": 0, "accepted_answer_id": 40392014, "answer_count": 1, "score": 1, "last_activity_date": 1478169492, "creation_date": 1478128323, "last_edit_date": 1478169492, "question_id": 40391337, "link": "https://stackoverflow.com/questions/40391337/pthread-freezes-stdout", "title": "Pthread freezes stdout?", "body": "<p>Let's say there're two threads(pthread) in a C++ program: </p>\n\n<ul>\n<li>the <code>main thread</code> </li>\n<li>the <code>child thread</code></li>\n</ul>\n\n<p>What the program does is simple:</p>\n\n<ol>\n<li>Bind the two threads to two different cores.</li>\n<li>Set the priorities of the two threads to some very high values (-99 for the <code>child thread</code> and -98 for the <code>main thread</code>).</li>\n<li>The <code>child thread</code> is doing some heavy task that is using 100% of the CPU.</li>\n<li>The <code>main thread</code> is trying the call printf() after the <code>child thread</code> is created.</li>\n</ol>\n\n<p>The problem is that once the child thread is created, it freezes stdout and nothing gets printed on the console anymore. However, when the program exits, all the messages suddenly shown up in the console. Below is a .cpp file demonstrating this effect:</p>\n\n<p><strong>main.cpp:</strong></p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;pthread.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;signal.h&gt;\n#include &lt;sys/mman.h&gt;\n\nbool EXIT = false;\n\nvoid signal_handler(int signal){\n    EXIT = true;\n}\n\nvoid *child_thread(void *x_args){\n    printf(\"Setting child thread CPU affinity (Core #1)...\\n\");\n    cpu_set_t cpuset;\n    CPU_ZERO(&amp;cpuset);\n    CPU_SET(1, &amp;cpuset);\n    if (pthread_setaffinity_np(pthread_self(), sizeof(cpu_set_t), &amp;cpuset)){\n        perror(\"Cannot set child thread CPU affinity\");\n        printf(\"Exit\\n\");\n        exit(1);\n    }\n\n    printf(\"Locking memory of child thread...\\n\");\n    mlockall(MCL_CURRENT | MCL_FUTURE);\n\n    printf(\"Setting child thread priority (-99)...\\n\");\n    struct sched_param sched_param;\n    sched_param.sched_priority = sched_get_priority_max(SCHED_FIFO)-1;\n    if (sched_setscheduler(0, SCHED_FIFO, &amp;sched_param)){\n        perror(\"Cannot set child thread priority\");\n        printf(\"Exit\\n\");\n        exit(1);  \n    }\n\n    printf(\"Entering while loop inside child thread...\\n\");\n    while(!EXIT){}\n    return NULL;\n}\n\nint main(){\n    signal(SIGINT, signal_handler);\n\n    pthread_t thread;\n\n    printf(\"Setting main thread CPU affinity (Core #0)...\\n\");\n    cpu_set_t cpuset;\n    CPU_ZERO(&amp;cpuset);\n    CPU_SET(0, &amp;cpuset);\n    if (pthread_setaffinity_np(pthread_self(), sizeof(cpu_set_t), &amp;cpuset)){\n        perror(\"Cannot set main thread CPU affinity\");\n        printf(\"Exit.\\n\");\n        exit(1);\n    }\n\n    printf(\"Locking memory of main thread...\\n\");\n    mlockall(MCL_CURRENT | MCL_FUTURE);\n\n    printf(\"Setting main thread priority (-98)...\\n\");\n    struct sched_param sched_param;\n    sched_param.sched_priority = sched_get_priority_max(SCHED_FIFO)-2;\n    if (sched_setscheduler(0, SCHED_FIFO, &amp;sched_param)){\n        perror(\"Cannot set main thread priority\");\n        printf(\"Exit.\\n\");\n        exit(1);\n    }\n\n    printf(\"Creating child thread...\\n\");\n    if (pthread_create(&amp;thread, NULL, child_thread, NULL)){\n        perror(\"Cannot create child thread\");\n        printf(\"Exit.\\n\");\n        exit(1);\n    }\n\n    printf(\"Entering while loop in main thread...\\n\");\n    while(!EXIT){\n        sleep(1);\n        printf(\"I can't see this until I press Ctrl+C!\\n\");\n    }\n    pthread_join(thread, NULL);\n\n    printf(\"Exit.\\n\");\n    return 0;\n}\n</code></pre>\n\n<p>You can compile it with:</p>\n\n<pre><code>g++ main.cpp -pthread -o main\n</code></pre>\n\n<p>Then run it with:</p>\n\n<pre><code>sudo ./main\n</code></pre>\n\n<p>Then you should see stdout freezes after outputing the following:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Setting main thread CPU affinity (Core #0)...\nLocking memory of main thread...\nSetting main thread priority (-98)...\nCreating child thread...\nEntering while loop in main thread...\nSetting child thread CPU affinity (Core #1)...\n</code></pre>\n\n<p>Even after an hour you just won't see anymore outputs. But when <code>Ctrl+C</code> is pressed. You will see all the messages coming out:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>I can't see this until I press Ctrl+C!\nI can't see this until I press Ctrl+C!\nI can't see this until I press Ctrl+C!\nI can't see this until I press Ctrl+C!\nI can't see this until I press Ctrl+C!\nI can't see this until I press Ctrl+C!\nI can't see this until I press Ctrl+C!\nI can't see this until I press Ctrl+C!\n</code></pre>\n\n<p>The <code>main thread</code> is actually running in the background because if you comment out the two lines inside the while loop (the sleep and printf), you can see that it is also using 100% of CPU. But ht</p>\n\n<p>What am I missing here?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1478128165, "post_id": 40391279, "comment_id": 68034297, "body": "This is all handled by your compiler and/or the C++ library. Sufficient to say that The Right Thing Will Happen."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 2, "creation_date": 1478128326, "post_id": 40391279, "comment_id": 68034347, "body": "The short answer is &quot;however it wants to&quot;."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1478128408, "post_id": 40391279, "comment_id": 68034364, "body": "<a href=\"https://isocpp.org/wiki/faq/freestore-mgmt#num-elems-in-new-array\" rel=\"nofollow noreferrer\">isocpp.org/wiki/faq/freestore-mgmt#num-elems-in-new-array</a>"}], "answers": [{"comments": [{"owner": {"reputation": 15544, "user_id": 1908347, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e1305fee562b70958e65b557ce049e31?s=128&d=identicon&r=PG", "display_name": "Nir Friedman", "link": "https://stackoverflow.com/users/1908347/nir-friedman"}, "edited": false, "score": 0, "creation_date": 1478135345, "post_id": 40391306, "comment_id": 68036026, "body": "The deallocate function of allocator traits that allocator aware containers call actually does take a size along with a pointer, which is supposed to represent the size of the previous allocation. So to use an allocator generically you are obligated to track your own heap request sizes in some fashion and pass them back. So it&#39;s quite different from the situation with new and delete."}], "tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": true, "score": 12, "last_activity_date": 1478128171, "creation_date": 1478128171, "answer_id": 40391306, "question_id": 40391279, "link": "https://stackoverflow.com/questions/40391279/deallocating-memory-while-deleting-an-array-in-c/40391306#40391306", "title": "Deallocating memory while deleting an array in C++", "body": "<p>The <code>new</code> operator ends up creating an entry on the heap, and the heap allocator knows how to de-allocate things it's previously allocated. This information isn't normally available to your code because it's all C++ internals you're not supposed to mess with.</p>\n\n<p>So basically the heap metadata describes this allocation.</p>\n\n<p>Remember that in C++ you can <a href=\"http://en.cppreference.com/w/cpp/memory/allocator\" rel=\"noreferrer\">write your own allocator</a>, so <code>new</code> and <code>delete[]</code> might end up interfacing with that if you so desire. If you look at how <code>std::allocator</code> is defined, note that you're not obligated to tell anyone what allocations have been made, nor how big any particular allocation is. The allocator has a tremendous amount of freedom here, and the specification doesn't allow for a lot of interrogation.</p>\n"}], "owner": {"reputation": 131, "user_id": 4784797, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/6753d8e2165204de6655310e13dc1a22?s=128&d=identicon&r=PG&f=1", "display_name": "Hamza Khan", "link": "https://stackoverflow.com/users/4784797/hamza-khan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 1, "accepted_answer_id": 40391306, "answer_count": 1, "score": 4, "last_activity_date": 1478128934, "creation_date": 1478128003, "last_edit_date": 1478128934, "question_id": 40391279, "link": "https://stackoverflow.com/questions/40391279/deallocating-memory-while-deleting-an-array-in-c", "title": "Deallocating memory while deleting an array in C++", "body": "<p>In C++ when we assign an array there is no way to find out the size of the array once it has been initialized. Then how does the delete operator know the amount of memory to delete when I am trying to deallocate memory at the end of my program. </p>\n\n<pre><code>int main()\n{\n    int* p = new int[10];\n    int* q = new int[30];\n    //... bunch of code\n    //...\n    // ... bunch of code\n    delete[] p;\n    delete[] q;\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 1, "creation_date": 1478128111, "post_id": 40391265, "comment_id": 68034283, "body": "Cannot be done. The only thing you can do is Make the constructor private, and have a <code>static</code> factory that constructs a <code>new</code> instance of the class."}, {"owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "edited": false, "score": 3, "creation_date": 1478128412, "post_id": 40391265, "comment_id": 68034365, "body": "Creating such a class <i>is</i> certainly a problem. The solution is, just don&#39;t do it. Seriously, this sounds like an XY problem to me, and to get a meaningful answer you should tell us what you&#39;re trying to accomplish by doing this, and perhaps then we can help you work out a better way of accomplishing your end goal."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1478128465, "post_id": 40391265, "comment_id": 68034384, "body": "That&#39;s a very odd requirement. Why would you impose such restrictions? Trying to prevent programmers from doing things they&#39;d normally do without explanation is really frustrating."}], "answers": [{"comments": [{"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1478128093, "post_id": 40391288, "comment_id": 68034277, "body": "And how do you propose to <code>delete</code> those objects?"}, {"owner": {"reputation": 488, "user_id": 6344366, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/8EB8C.jpg?s=128&g=1", "display_name": "Cherkesgiller", "link": "https://stackoverflow.com/users/6344366/cherkesgiller"}, "reply_to_user": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1478128156, "post_id": 40391288, "comment_id": 68034294, "body": "we create a friend function destruct() which can be called by users of class to destroy objects."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1478128534, "post_id": 40391288, "comment_id": 68034403, "body": "That seems backwards. Couldn&#39;t I circumvent that by using placement new?"}], "tags": [], "owner": {"reputation": 488, "user_id": 6344366, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/8EB8C.jpg?s=128&g=1", "display_name": "Cherkesgiller", "link": "https://stackoverflow.com/users/6344366/cherkesgiller"}, "is_accepted": true, "score": 0, "last_activity_date": 1478128055, "creation_date": 1478128055, "answer_id": 40391288, "question_id": 40391265, "link": "https://stackoverflow.com/questions/40391265/how-to-make-a-c-class-whose-objects-can-only-be-dynamically-allocated/40391288#40391288", "title": "How to make a C++ class whose objects can only be dynamically allocated?", "body": "<p>Create a private destructor in the class. When you make a private destructor, the compiler would generate a compiler error for non-dynamically allocated objects because compiler need to remove them from stack segment once they are not in use.</p>\n"}, {"tags": [], "owner": {"reputation": 3321, "user_id": 2229099, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e38c3d513304b29e79cb8a6d903c18e?s=128&d=identicon&r=PG&f=1", "display_name": "Gabriel", "link": "https://stackoverflow.com/users/2229099/gabriel"}, "is_accepted": false, "score": 2, "last_activity_date": 1478128069, "creation_date": 1478128069, "answer_id": 40391292, "question_id": 40391265, "link": "https://stackoverflow.com/questions/40391265/how-to-make-a-c-class-whose-objects-can-only-be-dynamically-allocated/40391292#40391292", "title": "How to make a C++ class whose objects can only be dynamically allocated?", "body": "<p>You need to make your constructors private and make a factory returning a shared pointer on the object.</p>\n"}, {"comments": [{"owner": {"reputation": 86516, "user_id": 701092, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/xYrM0.jpg?s=128&g=1", "display_name": "0x499602D2", "link": "https://stackoverflow.com/users/701092/0x499602d2"}, "edited": false, "score": 0, "creation_date": 1478129427, "post_id": 40391329, "comment_id": 68034659, "body": "Did you mean <code>S()=delete</code>?"}, {"owner": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "reply_to_user": {"reputation": 86516, "user_id": 701092, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/xYrM0.jpg?s=128&g=1", "display_name": "0x499602D2", "link": "https://stackoverflow.com/users/701092/0x499602d2"}, "edited": false, "score": 0, "creation_date": 1478129637, "post_id": 40391329, "comment_id": 68034715, "body": "@0x499602D2 No, I meant <code>S() = default;</code>. Try to use it in the example and add this line to the <code>main</code> function: <code>S s{};</code>. You&#39;ll see the <i>unexpected</i> (?) result then. I would do that for you, but godbolt is not usable from mobile. :-("}], "tags": [], "owner": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "is_accepted": false, "score": 5, "last_activity_date": 1478129644, "last_edit_date": 1478129644, "creation_date": 1478128294, "answer_id": 40391329, "question_id": 40391265, "link": "https://stackoverflow.com/questions/40391265/how-to-make-a-c-class-whose-objects-can-only-be-dynamically-allocated/40391329#40391329", "title": "How to make a C++ class whose objects can only be dynamically allocated?", "body": "<p>You can do something like this:</p>\n\n<pre><code>#include &lt;memory&gt;\n\nstruct S {\n    static std::unique_ptr&lt;S&gt; create() {\n        return std::unique_ptr&lt;S&gt;(new S);\n    }\n\nprivate:\n    S() {}\n};\n\nint main() {\n    auto ptr = S::create();\n}\n</code></pre>\n\n<p>Note that using the following doesn't work as expected:</p>\n\n<pre><code>S() = default;\n</code></pre>\n\n<p>I guess it is due to the fact that the class is treated as an aggregate and thus the following still works for it:</p>\n\n<pre><code>S s{};\n</code></pre>\n\n<p>Moreover, the following <code>create</code> function does not work in the example above:</p>\n\n<pre><code>static std::unique_ptr&lt;S&gt; create() {\n    return std::make_unique&lt;S&gt;();\n}\n</code></pre>\n\n<p>That's because <code>make_unique</code> must be able to access the constructor to do its work, but this is not possible for the constructor is private.</p>\n"}], "owner": {"reputation": 39, "user_id": 7107053, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3394830588845f25d6100c73e11be674?s=128&d=identicon&r=PG&f=1", "display_name": "Nicolas", "link": "https://stackoverflow.com/users/7107053/nicolas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 391, "favorite_count": 0, "accepted_answer_id": 40391288, "answer_count": 3, "score": 3, "last_activity_date": 1478129644, "creation_date": 1478127938, "question_id": 40391265, "link": "https://stackoverflow.com/questions/40391265/how-to-make-a-c-class-whose-objects-can-only-be-dynamically-allocated", "title": "How to make a C++ class whose objects can only be dynamically allocated?", "body": "<p>The problem is to create a class such that the non-dynamic allocation of object causes compiler error. </p>\n\n<p>For example :</p>\n\n<pre><code>Employee e1;  // compiler error\nEmployee *e3 = new Employee; // works fine\n</code></pre>\n"}, {"tags": ["c++", "boost", "c++14", "gcc4.9", "boost-optional"], "comments": [{"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 0, "creation_date": 1478132752, "post_id": 40391244, "comment_id": 68035424, "body": "There&#39;s a difference between assignment and initialization..."}, {"owner": {"reputation": 1156, "user_id": 3738040, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zKsuP.png?s=128&g=1", "display_name": "dlavila", "link": "https://stackoverflow.com/users/3738040/dlavila"}, "reply_to_user": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 0, "creation_date": 1478154001, "post_id": 40391244, "comment_id": 68040677, "body": "yes sure, but the question is, why the assignment is different between boost::optional and std::experimental::optional, and why this work for boost::optional with non integer types"}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 1, "creation_date": 1478165928, "post_id": 40391244, "comment_id": 68046275, "body": "Basically, <code>std::experimental::optional</code> plays some special tricks to ensure that <code>o = {}</code> always resets it. <code>boost::optional</code> doesn&#39;t have those tricks."}, {"owner": {"reputation": 4415, "user_id": 838509, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c3baf4aa5bebf6d1407ed4e3b0981864?s=128&d=identicon&r=PG", "display_name": "Andrzej", "link": "https://stackoverflow.com/users/838509/andrzej"}, "edited": false, "score": 1, "creation_date": 1482828842, "post_id": 40391244, "comment_id": 69886014, "body": "Note that in Boost 1.63 this problem is fixed: <code>boost::optional</code> behaves in the same way as <code>std::opitonal</code>: <code>o = {}</code> is always a reset to no-value."}], "answers": [{"tags": [], "owner": {"reputation": 4415, "user_id": 838509, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c3baf4aa5bebf6d1407ed4e3b0981864?s=128&d=identicon&r=PG", "display_name": "Andrzej", "link": "https://stackoverflow.com/users/838509/andrzej"}, "is_accepted": true, "score": 11, "last_activity_date": 1479476758, "last_edit_date": 1479476758, "creation_date": 1479472200, "answer_id": 40677193, "question_id": 40391244, "link": "https://stackoverflow.com/questions/40391244/difference-between-boost-optional-and-stdexperimental-optional-assignment/40677193#40677193", "title": "Difference between boost optional and std::experimental optional assignment", "body": "<p>To understand what is going on, consider this example first:</p>\n\n<pre><code>void fun(int) { puts(\"f int\"); }\nvoid fun(double) { puts(\"f double\"); }\n\nint main() {\n  fun({}); // error\n}\n</code></pre>\n\n<p>This results in a compiler error, because the overload resolution is inconclusive: <code>double</code> and <code>int</code> fit equally well. But, if a non-scalar type comes into play, the situation is different:</p>\n\n<pre><code>struct Wrap{};\nvoid fun(int) { puts(\"f(int)\"); }\nvoid fun(Wrap) { puts(\"f(Wrap)\"); }\n\nint main() {\n  fun({}); // ok: f(int) selected\n}\n</code></pre>\n\n<p>This is because a scalar is a better match. If, for some reason, I want the same two overloads but at the same time I would like <code>fun({})</code> to select overload <code>fun(Wrap)</code>, I can tweak the definitions a bit:</p>\n\n<pre><code>template &lt;typename T&gt;\nstd::enable_if_t&lt;std::is_same&lt;int, std::decay_t&lt;T&gt;&gt;::value&gt;\nfun(T) { puts(\"f int\"); }\n\nvoid fun(Wrap) { puts(\"f(Wrap)\"); }\n</code></pre>\n\n<p>That is, <code>fun(Wrap)</code> remains unchanged, but the first overload is now a template that takes any <code>T</code>. But with <code>enable_if</code> we constrain it, so that it only works with type <code>int</code>. So, this is quite an 'artificial' template, but it does the job. If I call:</p>\n\n<pre><code>fun(0); // picks fun(T)\n</code></pre>\n\n<p>The artificial template gets selected. But if I type:</p>\n\n<pre><code>fun({}); // picks fun(Wrap)\n</code></pre>\n\n<p>The artificial template is still a template, so it is never considered in type deduction in this case, and the only visible overload is <code>fun(Wrap)</code>, so it gets selected.</p>\n\n<p>The same trick is employed in <code>std::optional&lt;T&gt;</code>: it does not have an assignment from <code>T</code>. Instead it has a similar artificial assignment template that takes any <code>U</code>, but is later constrained, so that <code>T == U</code>. You can see it in the reference implementation <a href=\"https://github.com/akrzemi1/Optional/blob/master/optional.hpp#L460-L466\" rel=\"noreferrer\">here</a>.</p>\n\n<p><code>boost::optional&lt;T&gt;</code> has been implemented before C++11, unaware of this 'reset idiom'. Therefore it has a normal assignment from <code>T</code>, and in cases where <code>T</code> happens to be a scalar this assignment from <code>T</code> is preferred. Hence the difference.</p>\n\n<p>Given all that, I think that Boost.Optional has a bug that it does something opposite than <code>std::optional</code>. Even if it is not implementable in Boost.Optional, it should at least fail to compile, in order to avoid run-time surprises.</p>\n"}], "owner": {"reputation": 1156, "user_id": 3738040, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zKsuP.png?s=128&g=1", "display_name": "dlavila", "link": "https://stackoverflow.com/users/3738040/dlavila"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3715, "favorite_count": 2, "accepted_answer_id": 40677193, "answer_count": 1, "score": 10, "last_activity_date": 1479476758, "creation_date": 1478127858, "last_edit_date": 1478157774, "question_id": 40391244, "link": "https://stackoverflow.com/questions/40391244/difference-between-boost-optional-and-stdexperimental-optional-assignment", "title": "Difference between boost optional and std::experimental optional assignment", "body": "<p>Usually when a function returns <code>boost::optional</code> I've seen a lot of people returning an empty brace <code>{}</code> to designate an empty value, that works fine and is shorter than returning <code>boost::none</code>.</p>\n\n<p>I tried to do something similar to empty a <code>boost::optional&lt;int&gt;</code>, but when calling the copy assignment operator (or most probably the move assignment op) with an empty brace in the right side, the empty brace is converted to an int and then that value is assigned to the optional, so I end up with the variable set to 0 and not an empty value as I was expecting. Here's an example <a href=\"https://godbolt.org/g/HiF92v\" rel=\"noreferrer\">https://godbolt.org/g/HiF92v</a>, if I try the same with <code>std::experimental::optional</code> I get the result I'm expecting (just replace with std::experimental::optional in the example and you will see that the instruction becomes <code>mov eax, eax</code>).</p>\n\n<p>Also if I try with a different template argument for the boost optional (a non integer type) some compilers compile (with the behavior I'm expecting, an example here <a href=\"http://cpp.sh/5j7n\" rel=\"noreferrer\">http://cpp.sh/5j7n</a>) and others don't. So even for the same lib the behavior is different according to the template arg.</p>\n\n<p>I'd like to understand what is going on here, I know it has something to do with the fact that I'm using a C++14 feature for a library that doesn't consider that into the design. I read the <code>boost/optional</code> header but I got lost in the details, I also tried to study the compiled code without inlining with a similar result.</p>\n\n<p>I'm using gcc 4.9.2 with -std=c++14 and boost 1.57.</p>\n\n<p>btw: I known I should have used <code>boost::optional::reset</code> or <code>boost::none</code>, but I was trying to be consistent with the semantics in the rest of the code base.</p>\n"}, {"tags": ["c++", "gdb"], "comments": [{"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 1, "creation_date": 1478127925, "post_id": 40391201, "comment_id": 68034226, "body": "In <code>generateCounters </code>, the first line <code>all_counters = </code> means nothing to the <i>caller</i> of that function. You&#39;re just modifying a local variable, and ultimately, the caller&#39;s pointer remains unchanged. There are <i>hundreds</i> of duplicate questions for this, <a href=\"http://stackoverflow.com/questions/35330331/trying-to-dynamically-allocate-a-parent-pointer-to-a-child-inside-a-function-is\">such as <b>this</b> one</a>"}], "answers": [{"tags": [], "owner": {"reputation": 450, "user_id": 3726703, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/IzEdC.png?s=128&g=1", "display_name": "BugsFree", "link": "https://stackoverflow.com/users/3726703/bugsfree"}, "is_accepted": false, "score": 2, "last_activity_date": 1478127930, "creation_date": 1478127930, "answer_id": 40391264, "question_id": 40391201, "link": "https://stackoverflow.com/questions/40391201/segmentation-fault-11-when-using-dynamic-3d-array-parameter/40391264#40391264", "title": "Segmentation fault: 11 when using dynamic 3D array parameter", "body": "<p>The problem is that you are instantiating the array inside the function <code>generateCounters()</code> but you are passing <code>allCounters</code> by value instead you need to pass it by reference or by pointer. You should change the function in this way:</p>\n\n<pre><code>void generateCounters(double **** all_counters) {}\n</code></pre>\n\n<p>or more C++ style:</p>\n\n<pre><code>void generateCounters(double ***&amp; all_counters) {}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 183, "user_id": 1702529, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/263b3d3107a0b0ad8e1f68f5217878ad?s=128&d=identicon&r=PG", "display_name": "herteladrian", "link": "https://stackoverflow.com/users/1702529/herteladrian"}, "edited": false, "score": 0, "creation_date": 1478128147, "post_id": 40391275, "comment_id": 68034291, "body": "Holy... shit.... i have been working on figuring this out for hours and can&#39;t believe i didn&#39;t see that. Wouldn&#39;t chainging it to void generateCounters(double *** &amp;all_counters) {} also work. I&#39;m testing that now as a matter of fact"}, {"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "reply_to_user": {"reputation": 183, "user_id": 1702529, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/263b3d3107a0b0ad8e1f68f5217878ad?s=128&d=identicon&r=PG", "display_name": "herteladrian", "link": "https://stackoverflow.com/users/1702529/herteladrian"}, "edited": false, "score": 1, "creation_date": 1478128262, "post_id": 40391275, "comment_id": 68034330, "body": "Yes, this will work too. Some may scoff at this approach, but this is really a matter of personal taste."}, {"owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "edited": false, "score": 0, "creation_date": 1478176397, "post_id": 40391275, "comment_id": 68053079, "body": "You may have failed to notice, but virtually every one of your &quot;Good news! Today on stackoverflow.com...&quot; comments has been flagged and deleted. Please stop leaving them. They&#39;re snarky and not constructive, and they&#39;re only going to confuse new users who may not have a good grasp of English idiom. Please stop posting them."}, {"owner": {"reputation": 183, "user_id": 1702529, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/263b3d3107a0b0ad8e1f68f5217878ad?s=128&d=identicon&r=PG", "display_name": "herteladrian", "link": "https://stackoverflow.com/users/1702529/herteladrian"}, "reply_to_user": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "edited": false, "score": 0, "creation_date": 1478201801, "post_id": 40391275, "comment_id": 68069784, "body": "@meagar are you talking to me or to sam? I don&#39;t think i&#39;ve ever made such comments"}, {"owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "reply_to_user": {"reputation": 183, "user_id": 1702529, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/263b3d3107a0b0ad8e1f68f5217878ad?s=128&d=identicon&r=PG", "display_name": "herteladrian", "link": "https://stackoverflow.com/users/1702529/herteladrian"}, "edited": false, "score": 0, "creation_date": 1478201822, "post_id": 40391275, "comment_id": 68069799, "body": "@herteladrian Sam."}], "tags": [], "owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "is_accepted": true, "score": 2, "last_activity_date": 1478127991, "creation_date": 1478127991, "answer_id": 40391275, "question_id": 40391201, "link": "https://stackoverflow.com/questions/40391201/segmentation-fault-11-when-using-dynamic-3d-array-parameter/40391275#40391275", "title": "Segmentation fault: 11 when using dynamic 3D array parameter", "body": "<pre><code>all_counters = new double ** [2];\n</code></pre>\n\n<p>The <code>all_counters</code> parameter is passed by value to <code>generateCounters()</code>.</p>\n\n<p>This allocates a new array in dynamic scope, and assigns it to the parameter named \"all_counters\", in the function called <code>generateCounters()</code>.</p>\n\n<p>The <code>all_counters</code> in your <code>main()</code> is not affected at all.</p>\n\n<p>Instead of passing it by value, you should, instead, declare it in <code>generateCounters()</code>, <code>return</code> it from the function, and assign it to the variable in <code>main()</code>.</p>\n"}], "owner": {"reputation": 183, "user_id": 1702529, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/263b3d3107a0b0ad8e1f68f5217878ad?s=128&d=identicon&r=PG", "display_name": "herteladrian", "link": "https://stackoverflow.com/users/1702529/herteladrian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 0, "accepted_answer_id": 40391275, "answer_count": 2, "score": 1, "last_activity_date": 1478127991, "creation_date": 1478127535, "question_id": 40391201, "link": "https://stackoverflow.com/questions/40391201/segmentation-fault-11-when-using-dynamic-3d-array-parameter", "title": "Segmentation fault: 11 when using dynamic 3D array parameter", "body": "<p>using gdb to find the source of the Seg Fault I get this</p>\n\n<pre><code>Program received signal SIGSEGV, Segmentation fault.\n0x00000001000082bf in matchCounters (input=..., size=5, \n    valid_entries=0x100020cd0 &lt;VALID_REGIONS&gt;, nums=0x7fff5fbff460, \n    counters=0x100020588 &lt;VTT for std::__1::basic_ifstream&lt;char, std::__1::char_traits&lt;char&gt; &gt;+8&gt;) at akh70P3.cpp:524\n524     cout &lt;&lt; \"counters[4][1] = \" &lt;&lt; counters[4][1] &lt;&lt; endl;\n</code></pre>\n\n<h1>main()</h1>\n\n<pre><code>double *** all_counters;\ngenerateCounters(all_counters);\nmatchCounters(/*some more parameters here*/ all_counters[0]);\n</code></pre>\n\n<h1>matchCounters()</h1>\n\n<p>accessing counters here causes a segmentation fault: 11</p>\n\n<pre><code>void matchCounters(/*some more parameters here*/ double ** counters) {\n\n    //this causes segmentation fault 11\n    cout &lt;&lt; \"counters[4][1] = \" &lt;&lt; counters[4][1] &lt;&lt; endl;\n}\n</code></pre>\n\n<h1>generateCounters()</h1>\n\n<p>accessing counters here works just fine</p>\n\n<pre><code>void generateCounters(double *** all_counters) {\n    all_counters = new double ** [2];\n    //region counters\n    all_counters[0] = new double * [VALID_REGIONS_SIZE];\n    //move kind counters\n    all_counters[1] = new double * [VALID_MOVE_TYPES_SIZE];\n    for(int i = 0; i &lt; VALID_REGIONS_SIZE; i++) {\n        all_counters[0][i] = new double [CATEGORIES];\n    }\n    for(int i = 0; i &lt; VALID_MOVE_TYPES_SIZE; i++) {\n        all_counters[1][i] = new double [CATEGORIES];\n    }\n    //this works just fine! why?\n    cout &lt;&lt; \"all_counters[0][4][1] = \" &lt;&lt; all_counters[0][4][1] &lt;&lt; endl;\n\n}\n</code></pre>\n"}, {"tags": ["c++", "openssl", "libcurl"], "answers": [{"comments": [{"owner": {"reputation": 775, "user_id": 1990747, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e768662f51a5df9eb2f247a5ddfc90e?s=128&d=identicon&r=PG", "display_name": "Tim Beaudet", "link": "https://stackoverflow.com/users/1990747/tim-beaudet"}, "edited": false, "score": 0, "creation_date": 1484156442, "post_id": 41592466, "comment_id": 70397430, "body": "I am currently using WinSSL on Windows, however my initial approach was identical to the superuser link you&#39;ve provided, shipping the CA bundle with the application, something I felt was/is a little odd- it also resulted in errors on corporate networks; those seemed to have gone away, or changed to DNS/Firewall issue since the WinSSL change.  On Linux the link you gave shows the specific location for Redhat and similar distros, but on Debian/Ubuntu the ca-certificates package seems to place them in a different location, and so setting CAPATH to one will miss the other."}, {"owner": {"reputation": 1, "user_id": 3877145, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d83131a4f555028fa10198980f7147d?s=128&d=identicon&r=PG&f=1", "display_name": "Anardael", "link": "https://stackoverflow.com/users/3877145/anardael"}, "reply_to_user": {"reputation": 775, "user_id": 1990747, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e768662f51a5df9eb2f247a5ddfc90e?s=128&d=identicon&r=PG", "display_name": "Tim Beaudet", "link": "https://stackoverflow.com/users/1990747/tim-beaudet"}, "edited": false, "score": 0, "creation_date": 1485449416, "post_id": 41592466, "comment_id": 70939386, "body": "Probably you should leave it blank and it should take default CA path. But, it will not work for some distros (there are some bug reports in the net). So you will need to do some testing on different releases and use path accordingly..."}, {"owner": {"reputation": 775, "user_id": 1990747, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e768662f51a5df9eb2f247a5ddfc90e?s=128&d=identicon&r=PG", "display_name": "Tim Beaudet", "link": "https://stackoverflow.com/users/1990747/tim-beaudet"}, "edited": false, "score": 0, "creation_date": 1485452933, "post_id": 41592466, "comment_id": 70941480, "body": "I actually do not specify the CA PATH on linux, so that is what -should- be happening, I see how my last comment made it seem like I set it, sorry I was just meaning to say using that option could work in one place but not another."}], "tags": [], "owner": {"reputation": 1, "user_id": 3877145, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d83131a4f555028fa10198980f7147d?s=128&d=identicon&r=PG&f=1", "display_name": "Anardael", "link": "https://stackoverflow.com/users/3877145/anardael"}, "is_accepted": false, "score": 0, "last_activity_date": 1484141926, "last_edit_date": 1495542329, "creation_date": 1484141926, "answer_id": 41592466, "question_id": 40391006, "link": "https://stackoverflow.com/questions/40391006/secure-server-communication-from-application-using-c-libcurl-openssl/41592466#41592466", "title": "Secure Server Communication from application using C++/libcurl/openssl", "body": "<p>In my opinion, it is better to use system certificate then package certificates with application (if you are not using some special certs). For the linux it should be easy according to <a href=\"https://serverfault.com/questions/394815/how-to-update-curl-ca-bundle-on-redhat\">https://serverfault.com/questions/394815/how-to-update-curl-ca-bundle-on-redhat</a> And for windows you can either use winssl or create the file from system <a href=\"https://superuser.com/questions/442793/why-cant-curl-properly-verify-a-certificate-on-windows\">https://superuser.com/questions/442793/why-cant-curl-properly-verify-a-certificate-on-windows</a>  <a href=\"https://stackoverflow.com/questions/37551409/configure-curl-to-use-default-system-cert-store\">Configure cURL to use default system cert store</a></p>\n"}, {"tags": [], "owner": {"reputation": 43751, "user_id": 93747, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dbf187b5b45c400649ed7f946e8f00d6?s=128&d=identicon&r=PG", "display_name": "Daniel Stenberg", "link": "https://stackoverflow.com/users/93747/daniel-stenberg"}, "is_accepted": false, "score": 0, "last_activity_date": 1558262792, "creation_date": 1558262792, "answer_id": 56207009, "question_id": 40391006, "link": "https://stackoverflow.com/questions/40391006/secure-server-communication-from-application-using-c-libcurl-openssl/56207009#56207009", "title": "Secure Server Communication from application using C++/libcurl/openssl", "body": "<p>A default libcurl build is setup to attempt to use the \"right\" CA bundle.</p>\n\n<h2>Linux</h2>\n\n<p>A libcurl built on Linux will scan and check where the CA store is located on your system and use that. If you install libcurl on a regular Linux distro, it should've been built to use the distro's \"typical\" CA store.</p>\n\n<h2>macOS</h2>\n\n<p>If you build libcurl for mac and tell it to use the Secure Transport backend, it will automatically use the macOS CA store. So will the default-installed curl and libcurls that come shipped bundled with macOS from Apple.</p>\n\n<h2>Windows</h2>\n\n<p>If you build libcurl for Windows to use Schannel (the windows TLS system) it will by default use the Windows CA store.</p>\n\n<h2>Other setups</h2>\n\n<p>If you deviate from these setups, you basically opt to not use the CA store that comes bundled in the operating system you're using. Then you need to handle and update the CA store yourself. </p>\n"}], "owner": {"reputation": 775, "user_id": 1990747, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e768662f51a5df9eb2f247a5ddfc90e?s=128&d=identicon&r=PG", "display_name": "Tim Beaudet", "link": "https://stackoverflow.com/users/1990747/tim-beaudet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 762, "favorite_count": 3, "answer_count": 2, "score": 8, "last_activity_date": 1558262792, "creation_date": 1478126382, "last_edit_date": 1483728850, "question_id": 40391006, "link": "https://stackoverflow.com/questions/40391006/secure-server-communication-from-application-using-c-libcurl-openssl", "title": "Secure Server Communication from application using C++/libcurl/openssl", "body": "<p>I'm developing application in C++ (cross-platform; Windows, Mac and Linux) that needs to communicate securely with servers using https protocol with libcurl <em>(built with winssl/darwinssl/openssl on Windows/Mac/Linux respectively)</em>. I've changed a curl option, <code>CURLOPT_SSL_VERIFYPEER</code> from <code>0</code> to <code>1</code> which should help prevent MitM issues.</p>\n\n<p>This has caused issues that an initial search points to turning that option off, but after digging deeper I found:</p>\n\n<blockquote>\n  <p>Get a CA certificate that can verify the remote server and use the proper option to point out this CA cert for verification when connecting. For libcurl hackers: <code>curl_easy_setopt(curl, CURLOPT_CAPATH, capath);</code> <a href=\"https://curl.haxx.se/docs/sslcerts.html\" rel=\"nofollow noreferrer\">from curl docs</a></p>\n</blockquote>\n\n<p>and</p>\n\n<blockquote>\n  <p>Get a better/different/newer CA cert bundle! One option is to extract the one a recent Firefox browser uses by running 'make ca-bundle' in the curl build tree root, or possibly download a version that was generated this way for you.\n  <a href=\"https://curl.haxx.se/docs/sslcerts.html\" rel=\"nofollow noreferrer\">from curl docs</a></p>\n</blockquote>\n\n<p>I actually use <code>CURLOPT_CAINFO</code> to the bundle as I had seen some word of issues using <code>CURLOPT_CAPATH</code> on Windows; <a href=\"https://curl.haxx.se/libcurl/c/CURLOPT_CAPATH.html\" rel=\"nofollow noreferrer\">curl docs</a>. I have downloaded and installed this bundle along with the application on Windows and Mac and I'd like to know if this is the correct way to do it or if there is a better practice.</p>\n\n<p>Initially this caused issues for users of the application running behind some corporate networks or proxy which seemed to get fixed by building libcurl against winssl instead of openssl on Windows; though potentially disguising itself as a firewall issue, still unclear although it seems likely.</p>\n\n<p><em>Sorry for the length.</em></p>\n\n<p>Is anything silly about installing the <code>ca-cert-bundle.crt</code> along with the application, and is there anything that should be done differently to communicate securely with the server from this installed application?</p>\n\n<p>A slightly separate, but still very related, issue I have is <code>CURLOPT_CAINFO</code> on Linux giving the error:</p>\n\n<p><code>error setting certificate verify locations:\nCAfile: ../share/my_application/curl-ca-bundle.crt\nCApath: none</code></p>\n\n<p>Though attempting to open the file for reading from within the application does work successfully. <strong>Edit:</strong> This issue I solved by NOT setting the <code>CURLOPT_CAINFO</code> field on Linux <em>(leaving it blank)</em> and adding the dependency package <code>ca-certificates</code> to the application package. The default path is correctly <code>/etc/ssl/certs/ca-certificates.crt</code> and seems to be working. To <em>me</em> this feels a bit better than installing the bundle with the application. </p>\n\n<p><strong>Edit2:</strong> Although solved it appears the ca-certificates package sometimes doesn't install ca-certificates.crt and instead ca-bundle.crt and the locations vary on different distros as <a href=\"https://www.happyassassin.net/2015/01/12/a-note-about-ssltls-trusted-certificate-stores-and-platforms/\" rel=\"nofollow noreferrer\">this source, happyassassin.net</a> shows that different Linux systems store the CA bundles in different locations. It did not seem to have a clear answer as to <strong>HOW to handle this</strong>. Should I be using a value in the configuration file that the user can then modify, or any other thoughts on the subject? </p>\n\n<p><strong>Edit3:</strong> Some users have pointed out that my name exists in one of the paths curl looks for, I'm not entirely sure how that is possible as the only thing I've specified for curl is where I built openssl/cares libraries... </p>\n\n<p>I realize this is a loaded/multipart question but it is all on the same subject as the title states, I'd appreciate any help.</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["c++", "pointers"], "comments": [{"owner": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "edited": false, "score": 0, "creation_date": 1478125526, "post_id": 40390832, "comment_id": 68033380, "body": "What does your Note mean?  Have you made any attempt to understand this yourself?"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1478125567, "post_id": 40390832, "comment_id": 68033400, "body": "To print out the pointer address use <code>cout&lt;&lt;(void*)ch;</code>. That line is pretty meaningless from that context though."}, {"owner": {"reputation": 519, "user_id": 6191539, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tzjJY.jpg?s=128&g=1", "display_name": "Catsunami", "link": "https://stackoverflow.com/users/6191539/catsunami"}, "edited": false, "score": 0, "creation_date": 1478125628, "post_id": 40390832, "comment_id": 68033430, "body": "Do you mean the 2 you&#39;re seeing is a superscript 2?"}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 7, "creation_date": 1478125934, "post_id": 40390832, "comment_id": 68033549, "body": "You can&#39;t learn <code>C++</code> by picking up random pieces of code that you don&#39;t understand and asking people on the internet to explain them. You need to apply yourself to a course or a book that explains everything from the beginning. Recommended books: <a href=\"https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list\" title=\"the definitive c book guide and list\">stackoverflow.com/questions/388242/&hellip;</a>"}, {"owner": {"reputation": 429, "user_id": 6327588, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/126694204402513/picture?type=large", "display_name": "kryptokinght", "link": "https://stackoverflow.com/users/6327588/kryptokinght"}, "edited": false, "score": 0, "creation_date": 1478125978, "post_id": 40390832, "comment_id": 68033565, "body": "Yes, the 2 is a superscript of 2."}], "answers": [{"tags": [], "owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "is_accepted": false, "score": 1, "last_activity_date": 1478127680, "last_edit_date": 1478127680, "creation_date": 1478127377, "answer_id": 40391168, "question_id": 40390832, "link": "https://stackoverflow.com/questions/40390832/a-program-in-c-involving-pointers/40391168#40391168", "title": "A program in C++ involving pointers", "body": "<p>In your statement:  </p>\n\n<pre><code>char ch=*(char*)&amp;d;  \n</code></pre>\n\n<p>You are performing the following:<br>\n1. Taking the address or location of the variable.<br>\n2. Creating a pointer of type character to point to the variable.<br>\n3. Dereferencing (converting the first location of the variable) to a type of character (no transformations have occurred yet.<br>\n4. Assigning the first memory location of <code>d</code> to a character type variable (no conversions yet).  </p>\n\n<p>You are then printing the value in <code>ch</code>.</p>\n\n<p>If the value in <code>ch</code> is a printable value, you are in luck; however, I doubt it will be meaningful.  Otherwise, you won't be able to see it.  </p>\n\n<p>If you want to convert or transform from internal representation to textual representation, use:  </p>\n\n<pre><code>cout &lt;&lt; d;\n</code></pre>\n\n<p>I highly recommend using a debugger on this code and view the memory location of variable <code>d</code>.  Take the value and see if it is printable.</p>\n\n<p><strong>Edit 1:</strong><br>\nThe value printed in line 4 depends on how the value <code>3.1416</code> is stored in memory.  </p>\n\n<p>Since it is a floating point variable, we can guess that it is split into:  sign, mantissa and exponent.  The big question, is how many bits are dedicated to the three groups.  Usually, one bit is the sign.  The others depend on your platform.  If the <code>char</code> type on your platform is 8 bit, and the order is mantissa, exponent, then sign, your character will be the first 8 bits of the mantissa, which is probably not a printable character.</p>\n"}], "owner": {"reputation": 429, "user_id": 6327588, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/126694204402513/picture?type=large", "display_name": "kryptokinght", "link": "https://stackoverflow.com/users/6327588/kryptokinght"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "answer_count": 1, "score": -8, "last_activity_date": 1478127680, "creation_date": 1478125410, "question_id": 40390832, "link": "https://stackoverflow.com/questions/40390832/a-program-in-c-involving-pointers", "title": "A program in C++ involving pointers", "body": "<p>I cannot understand the output of this program:</p>\n\n<pre><code>void main(){\n    double d=3.1416;\n    char ch=*(char*)&amp;d;\n    cout&lt;&lt;ch;\n    }\n</code></pre>\n\n<p>OUTPUT: 2</p>\n\n<p>Note: The 2 is of much smaller size than the usual 2.</p>\n\n<p>Can you please explain the meaning of line 3.\nThank You.</p>\n"}, {"tags": ["c++", "opengl", "nvidia", "glx"], "comments": [{"owner": {"reputation": 279, "user_id": 6693522, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/69c0011bdde11c8f6166e2d1a5ffc102?s=128&d=identicon&r=PG&f=1", "display_name": "omusil", "link": "https://stackoverflow.com/users/6693522/omusil"}, "edited": false, "score": 0, "creation_date": 1478130595, "post_id": 40390811, "comment_id": 68043458, "body": "Have you tried stepping the code in a debugger and watching the values of the variables during that time? Also, what happens when you change the call to <code>glXMakeCurrent(0, 0, 0);</code>? And when you change the condition to <code>if (false)</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 149158, "user_id": 524368, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/oZ8Up.png?s=128&g=1", "display_name": "datenwolf", "link": "https://stackoverflow.com/users/524368/datenwolf"}, "edited": false, "score": 1, "creation_date": 1478178793, "post_id": 40391736, "comment_id": 68054919, "body": "You&#39;re using Mint. Mint is derived from Ubuntu. This is a Ubuntu bug. Somewhere in the build configuration of Ubuntu the Xlib is improperly linked against pthread which leads to this bizarre problem. It&#39;s been open in the bug tracker for ages and apparently nobody can be bothered to fix it properly."}], "tags": [], "owner": {"reputation": 1375, "user_id": 507970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/598fe86b1351a16d76eb66e4df0a3b1d?s=128&d=identicon&r=PG", "display_name": "Algoman", "link": "https://stackoverflow.com/users/507970/algoman"}, "is_accepted": true, "score": 1, "last_activity_date": 1478130976, "last_edit_date": 1495542312, "creation_date": 1478130976, "answer_id": 40391736, "question_id": 40390811, "link": "https://stackoverflow.com/questions/40390811/unreachable-glxmakecurrent-crashes-c-application/40391736#40391736", "title": "Unreachable glXMakeCurrent crashes c++ application", "body": "<p>Duplicate of <a href=\"https://stackoverflow.com/questions/31579243/segmentation-fault-before-main-when-using-glut-and-stdstring\">Segmentation Fault before main() when using glut, and std::string?</a>\nThe workaround there works for me also: forcing libpthread to be linked, for example by</p>\n\n<pre><code>export LD_PRELOAD=/lib/x86_64-linux-gnu/libpthread.so.0\n./wtf\n</code></pre>\n\n<p>Still one of the most bizarre and illogical problems I have ever encountered.</p>\n"}], "owner": {"reputation": 1375, "user_id": 507970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/598fe86b1351a16d76eb66e4df0a3b1d?s=128&d=identicon&r=PG", "display_name": "Algoman", "link": "https://stackoverflow.com/users/507970/algoman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 201, "favorite_count": 0, "closed_date": 1488453393, "accepted_answer_id": 40391736, "answer_count": 1, "score": 0, "last_activity_date": 1478160574, "creation_date": 1478125338, "last_edit_date": 1478129392, "question_id": 40390811, "link": "https://stackoverflow.com/questions/40390811/unreachable-glxmakecurrent-crashes-c-application", "closed_reason": "Duplicate", "title": "Unreachable glXMakeCurrent crashes c++ application", "body": "<p>usually I am able to solve almost all my programming questions on my own, but this one really amazes me and I guess you will also find it very interesting.</p>\n\n<p>So I am working on a low level OpenGL application using GLX and it crashes with a segmentation fault. I have broken the code down to this minimal example:</p>\n\n<pre><code>#include &lt;string&gt;\n#include &lt;GL/glx.h&gt;\n\nint main(int argc, char** argv)\n{\n    Display* display = NULL;\n    if(display)\n        glXMakeCurrent(display, 0, 0);\n    std::string title(\"Hello GLX\");\n    return 0;\n}\n</code></pre>\n\n<p>I compile with </p>\n\n<pre><code>g++ -g -o wtf wtf.cpp -lGL\n</code></pre>\n\n<p>I am using 64 bit Linux Mint 17.3 by the way.</p>\n\n<p>As you can see, there is nothing suspicious - I mean it doesn't even do anything, but as I said, it crashes... The Segfault disappears if I comment out the <code>glXMakeCurrent</code> which makes absolutely no sense, because that isn't even ever reached.\nIt also doesn't crash if I remove the instantiation of the string. Swapping the instantiations or the includes doesn't help, it still crashes.</p>\n\n<p>Here is a GDB Backtrace:</p>\n\n<pre><code>Program received signal SIGSEGV, Segmentation fault.\n0x0000000000000000 in ?? ()\n(gdb) bt\n#0  0x0000000000000000 in ?? ()\n#1  0x00007ffff3deb291 in init () at dlerror.c:177\n#2  0x00007ffff3deb6d7 in _dlerror_run (operate=operate@entry=0x7ffff3deb130 &lt;dlsym_doit&gt;, args=args@entry=0x7fffffffdc50)\n    at dlerror.c:129\n#3  0x00007ffff3deb198 in __dlsym (handle=&lt;optimized out&gt;, name=&lt;optimized out&gt;) at dlsym.c:70\n#4  0x00007ffff7b4ee1e in ?? () from /usr/lib/nvidia-352/libGL.so.1\n#5  0x00007ffff7af9b47 in ?? () from /usr/lib/nvidia-352/libGL.so.1\n#6  0x00007ffff7dea0cd in call_init (l=0x7ffff7ff94c0, argc=argc@entry=1, argv=argv@entry=0x7fffffffdda8, \n    env=env@entry=0x7fffffffddb8) at dl-init.c:64\n#7  0x00007ffff7dea1f3 in call_init (env=&lt;optimized out&gt;, argv=&lt;optimized out&gt;, argc=&lt;optimized out&gt;, l=&lt;optimized out&gt;)\n    at dl-init.c:36\n#8  _dl_init (main_map=0x7ffff7ffe1c8, argc=1, argv=0x7fffffffdda8, env=0x7fffffffddb8) at dl-init.c:126\n#9  0x00007ffff7ddb30a in _dl_start_user () from /lib64/ld-linux-x86-64.so.2\n#10 0x0000000000000001 in ?? ()\n#11 0x00007fffffffe101 in ?? ()\n#12 0x0000000000000000 in ?? ()\n(gdb) \n</code></pre>\n\n<p>and my <code>glxinfo</code> output (except for the extensions)</p>\n\n<pre><code>name of display: :0\ndisplay: :0  screen: 0\ndirect rendering: Yes\nserver glx vendor string: NVIDIA Corporation\nserver glx version string: 1.4\n...\nclient glx vendor string: NVIDIA Corporation\nclient glx version string: 1.4\n...\nGLX version: 1.4\n...\nOpenGL vendor string: NVIDIA Corporation\nOpenGL renderer string: GeForce GTX 560 Ti/PCIe/SSE2\nOpenGL core profile version string: 4.3.0 NVIDIA 352.63\nOpenGL core profile shading language version string: 4.30 NVIDIA via Cg compiler\nOpenGL core profile context flags: (none)\nOpenGL core profile profile mask: core profile\n...\nOpenGL version string: 4.5.0 NVIDIA 352.63\nOpenGL shading language version string: 4.50 NVIDIA\nOpenGL context flags: (none)\nOpenGL profile mask: (none)\n</code></pre>\n\n<p>I am really amazed by this, because IMHO it makes absolutely no sense. Does one of you have an idea what the problem could be? I was thinking that some call might have corrupted the classes VTable, but in this example there aren't even classes. It's also not an 32-vs-64-bit conflict with libGL.so.</p>\n\n<p>When I put an <code>std::cerr &lt;&lt; \"foo\";</code> and <code>std::cerr.flush();</code> (to be sure although it shouldn't be necessary) at the beginning of the main function, I get no output, so it seems like a problem with loading the library, but I can run the code from opengl.org/wiki/Tutorial:_OpenGL_3.0_Context_Creation_(GLX), so the problem cannot be the discovery of the library or the graphics chip being in some faulty state or so (I even rebooted... a linux machine... that's how out of ideas I am!)</p>\n"}, {"tags": ["c++", "windows", "pid", "handle"], "comments": [{"owner": {"reputation": 519, "user_id": 6191539, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tzjJY.jpg?s=128&g=1", "display_name": "Catsunami", "link": "https://stackoverflow.com/users/6191539/catsunami"}, "edited": false, "score": 0, "creation_date": 1478125492, "post_id": 40390747, "comment_id": 68033368, "body": "The answer <a href=\"http://stackoverflow.com/questions/6569405/how-to-get-active-process-name-in-c\">here</a> might help you."}, {"owner": {"reputation": 57, "user_id": 5245210, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh6.googleusercontent.com/-ENd4FLQPSyU/AAAAAAAAAAI/AAAAAAAAB5A/likL3ctLvAA/photo.jpg?sz=128", "display_name": "Vancer", "link": "https://stackoverflow.com/users/5245210/vancer"}, "reply_to_user": {"reputation": 519, "user_id": 6191539, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tzjJY.jpg?s=128&g=1", "display_name": "Catsunami", "link": "https://stackoverflow.com/users/6191539/catsunami"}, "edited": false, "score": 0, "creation_date": 1478125772, "post_id": 40390747, "comment_id": 68033492, "body": "@Catsunami I&#39;ll try this asap."}, {"owner": {"reputation": 57, "user_id": 5245210, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh6.googleusercontent.com/-ENd4FLQPSyU/AAAAAAAAAAI/AAAAAAAAB5A/likL3ctLvAA/photo.jpg?sz=128", "display_name": "Vancer", "link": "https://stackoverflow.com/users/5245210/vancer"}, "reply_to_user": {"reputation": 519, "user_id": 6191539, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tzjJY.jpg?s=128&g=1", "display_name": "Catsunami", "link": "https://stackoverflow.com/users/6191539/catsunami"}, "edited": false, "score": 0, "creation_date": 1478125976, "post_id": 40390747, "comment_id": 68033564, "body": "@Catsunami Sorry, but it is way different than C++ and i&#39;m quite confused."}, {"owner": {"reputation": 42446, "user_id": 902497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff13ece6277497484bfa2911c6183a30?s=128&d=identicon&r=PG", "display_name": "Raymond Chen", "link": "https://stackoverflow.com/users/902497/raymond-chen"}, "edited": false, "score": 0, "creation_date": 1478126163, "post_id": 40390747, "comment_id": 68033645, "body": "What is your question?"}, {"owner": {"reputation": 1655, "user_id": 6945651, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WXXfN.jpg?s=128&g=1", "display_name": "J. Piquard", "link": "https://stackoverflow.com/users/6945651/j-piquard"}, "edited": false, "score": 0, "creation_date": 1478126166, "post_id": 40390747, "comment_id": 68033647, "body": "Just before calling the <code>GetWindowThreadProcessId()</code> function, you have to check if the returned <code>windowHandle</code> is not NULL. I have tested under Windows 7 and it works at expected."}, {"owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "edited": false, "score": 0, "creation_date": 1478126240, "post_id": 40390747, "comment_id": 68033674, "body": "The code could use some cleanup (e.g., more error checking) but it looks like you have the general idea correct. Are you having problems with the code? If so, what?"}, {"owner": {"reputation": 57, "user_id": 5245210, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh6.googleusercontent.com/-ENd4FLQPSyU/AAAAAAAAAAI/AAAAAAAAB5A/likL3ctLvAA/photo.jpg?sz=128", "display_name": "Vancer", "link": "https://stackoverflow.com/users/5245210/vancer"}, "reply_to_user": {"reputation": 1655, "user_id": 6945651, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WXXfN.jpg?s=128&g=1", "display_name": "J. Piquard", "link": "https://stackoverflow.com/users/6945651/j-piquard"}, "edited": false, "score": 0, "creation_date": 1478126743, "post_id": 40390747, "comment_id": 68033832, "body": "@J.Piquard The thing is, it doesn&#39;t return the correct processID for the Calculator App on Windows 8.1, I ran the compiled executable outside of the IDE too, same thing it returns the processID of another running service.  Plus yes, it doesn&#39;t return NULL, it picks up the Calculator window, I made a previous check using and if statement to see wether it detects it or now depending on this line of code   <code>HWND windowHandle = FindWindowA(NULL, &quot;Calculator&quot;);</code>"}, {"owner": {"reputation": 57, "user_id": 5245210, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh6.googleusercontent.com/-ENd4FLQPSyU/AAAAAAAAAAI/AAAAAAAAB5A/likL3ctLvAA/photo.jpg?sz=128", "display_name": "Vancer", "link": "https://stackoverflow.com/users/5245210/vancer"}, "reply_to_user": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "edited": false, "score": 0, "creation_date": 1478126954, "post_id": 40390747, "comment_id": 68033909, "body": "@JerryCoffin I answered your question up there too ^^"}, {"owner": {"reputation": 57, "user_id": 5245210, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh6.googleusercontent.com/-ENd4FLQPSyU/AAAAAAAAAAI/AAAAAAAAB5A/likL3ctLvAA/photo.jpg?sz=128", "display_name": "Vancer", "link": "https://stackoverflow.com/users/5245210/vancer"}, "edited": false, "score": 0, "creation_date": 1478127645, "post_id": 40390747, "comment_id": 68034141, "body": "Okay guys i fixed the code thanks for the help, turned out i had to declare the <code>GetWindowThreadProcessId(windowHandle, &amp;processID);</code> function like <code>DWORD trpi = GetWindowThreadProcessId(windowHandle, &amp;processID);</code> then use the variable trpi in the if statement! Thanks for your time."}, {"owner": {"reputation": 1655, "user_id": 6945651, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WXXfN.jpg?s=128&g=1", "display_name": "J. Piquard", "link": "https://stackoverflow.com/users/6945651/j-piquard"}, "edited": false, "score": 0, "creation_date": 1478127688, "post_id": 40390747, "comment_id": 68034157, "body": "Did you try to replace <code>HWND windowHandle = FindWindowA(NULL, &quot;Calculator&quot;);</code> by <code>HWND windowHandle = GetForegroundWindow();</code> to check if the ProcessID is correct ? It should be the ProcessId of your testing software."}, {"owner": {"reputation": 57, "user_id": 5245210, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh6.googleusercontent.com/-ENd4FLQPSyU/AAAAAAAAAAI/AAAAAAAAB5A/likL3ctLvAA/photo.jpg?sz=128", "display_name": "Vancer", "link": "https://stackoverflow.com/users/5245210/vancer"}, "reply_to_user": {"reputation": 1655, "user_id": 6945651, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WXXfN.jpg?s=128&g=1", "display_name": "J. Piquard", "link": "https://stackoverflow.com/users/6945651/j-piquard"}, "edited": false, "score": 0, "creation_date": 1478127742, "post_id": 40390747, "comment_id": 68034174, "body": "@J.Piquard The problem is now fixed thank you soo much for your time brother."}, {"owner": {"reputation": 1655, "user_id": 6945651, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WXXfN.jpg?s=128&g=1", "display_name": "J. Piquard", "link": "https://stackoverflow.com/users/6945651/j-piquard"}, "edited": false, "score": 0, "creation_date": 1478128022, "post_id": 40390747, "comment_id": 68034252, "body": "@Vancer, if the solution is useful, you should be pleased to add a detailed as answer."}, {"owner": {"reputation": 26606, "user_id": 4603670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7eabc1427aa3c8185153cc81978289a?s=128&d=identicon&r=PG&f=1", "display_name": "Barmak Shemirani", "link": "https://stackoverflow.com/users/4603670/barmak-shemirani"}, "edited": false, "score": 1, "creation_date": 1478145309, "post_id": 40390747, "comment_id": 68038355, "body": "<i>&quot;I want to validate that the window is open...&quot;</i> If the window is not open then <code>windowHandle</code> is zero."}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1478160479, "post_id": 40390747, "comment_id": 68043415, "body": "It sounds like you have solved the wrong problem. If you need to be notified when any particular window is created, use WinEvents instead."}], "owner": {"reputation": 57, "user_id": 5245210, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh6.googleusercontent.com/-ENd4FLQPSyU/AAAAAAAAAAI/AAAAAAAAB5A/likL3ctLvAA/photo.jpg?sz=128", "display_name": "Vancer", "link": "https://stackoverflow.com/users/5245210/vancer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 5682, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1478151097, "creation_date": 1478125058, "last_edit_date": 1478151097, "question_id": 40390747, "link": "https://stackoverflow.com/questions/40390747/getting-a-processid-from-a-findwindow-handle-c", "title": "Getting a ProcessID from a FindWindow Handle - C++", "body": "<p>I was trying to get the process ID of 'Calculator' on C++ using this code.</p>\n\n<pre><code>#define _WIN32_WINNT 0x0501\n#include &lt;windows.h&gt;\n#include &lt;iostream&gt;\nusing namespace std;\n\nint main(){\n    int wait;\n    //Handle - Window name\n    HWND windowHandle = FindWindowA(NULL, \"Calculator\");\n\n    //Getting  ProcessID\n    DWORD processID;\n    GetWindowThreadProcessId(windowHandle, &amp;processID);\n\n    if(processID){\n        cout &lt;&lt; \"Process ID is: \" &lt;&lt; processID &lt;&lt; endl;\n        cin &gt;&gt; wait;\n    } else {\n        cout &lt;&lt; \"Unable to find the process id !\" &lt;&lt; endl;\n        cin &gt;&gt; wait;\n    }\n    return 0;\n}\n</code></pre>\n\n<p>Okay, so i know what you are thinking, that I'm using  GetWindowThreadProcessId(), how do I expect to get the actual processID, well I researched a bit and that was all I found. </p>\n\n<p>I want to validate that the window is open by checking the handle from FindWindow using an IF , then if available get it's processID.</p>\n\n<p>Thanks!</p>\n\n<h2><strong>THE PROBLEM IS NOW SOLVED</strong></h2>\n\n<p>What I was doing is that to check if it's getting the processID I would <code>cout &lt;&lt; processID &lt;&lt; endl;</code> which is wrong and here is why. The whole line of code  <code>GetWindowThreadProcessId(windowHandle, &amp;processID);</code> is what grabs the processID, so to <code>cout</code> the ProcessID we need to store the whole function / line of code in a DWORD. So what I did is edited this line <code>GetWindowThreadProcessId(windowHandle, &amp;processID);</code> </p>\n\n<p>to this:</p>\n\n<p><code>DWORD actualProcID = GetWindowThreadProcessId(windowHandle, &amp;processID);</code></p>\n\n<p>Biggest of them all the problem was in the if condition.\nHere is how it should like (it works):</p>\n\n<pre><code>DWORD processID;\nDWORD actualProcId = GetWindowThreadProcessId(windowHandle, &amp;processID);\n\nif(actualProcId){ //We test the DWORD we declared.\n    cout &lt;&lt; \"Process ID is: \" &lt;&lt; processID &lt;&lt; endl; // If true, we cout the process id\n    cin &gt;&gt; wait;\n} else {\n    cout &lt;&lt; \"Unable to find the process id !\" &lt;&lt; endl;\n    cin &gt;&gt; wait;\n}\n</code></pre>\n\n<p>Thank you for your time!</p>\n"}, {"tags": ["c++", "c++11", "lambda", "containers", "std"], "answers": [{"comments": [{"owner": {"reputation": 11096, "user_id": 2749717, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46af1ef54856d737d52b7667afd240ee?s=128&d=identicon&r=PG&f=1", "display_name": "bipll", "link": "https://stackoverflow.com/users/2749717/bipll"}, "edited": false, "score": 0, "creation_date": 1478201287, "post_id": 40390809, "comment_id": 68069529, "body": "<code>for_each</code> makes much less sense these days when range-for is on the track."}], "tags": [], "owner": {"reputation": 101, "user_id": 2708072, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3d109adaffa634df6f23fc08447244a5?s=128&d=identicon&r=PG", "display_name": "dridk", "link": "https://stackoverflow.com/users/2708072/dridk"}, "is_accepted": false, "score": 0, "last_activity_date": 1478125336, "creation_date": 1478125336, "answer_id": 40390809, "question_id": 40390705, "link": "https://stackoverflow.com/questions/40390705/how-to-make-a-c-intention-list/40390809#40390809", "title": "How to make a C++ intention list", "body": "<p>I found this solution. But it's not very nice . </p>\n\n<pre><code>std::vector&lt;int&gt; list = {1,2,3,4};\nstd::vector&lt;int&gt; newList;\nstd::for_each(list.begin(), list.end(),[&amp;newList](int val){newList.push_back(val*2);});\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 28662, "user_id": 10311, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ee697b9dc2411d50fb66a4f330ba4df?s=128&d=identicon&r=PG", "display_name": "porges", "link": "https://stackoverflow.com/users/10311/porges"}, "is_accepted": true, "score": 1, "last_activity_date": 1478199649, "last_edit_date": 1478199649, "creation_date": 1478126411, "answer_id": 40391014, "question_id": 40390705, "link": "https://stackoverflow.com/questions/40390705/how-to-make-a-c-intention-list/40391014#40391014", "title": "How to make a C++ intention list", "body": "<p><a href=\"http://en.cppreference.com/w/cpp/algorithm/transform\" rel=\"nofollow noreferrer\"><code>std::transform</code></a> lets you transform values and put them somewhere else:</p>\n\n<pre><code>std::vector&lt;int&gt; list = {1,2,3,4};\nstd::vector&lt;int&gt; newList;\n\nstd::transform(\n    list.cbegin(),\n    list.cend(),\n    back_inserter(newList),\n    [](int x) { return x * 2; });\n</code></pre>\n\n<p>But really, C++ is not the language for conciseness.</p>\n"}], "owner": {"reputation": 101, "user_id": 2708072, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3d109adaffa634df6f23fc08447244a5?s=128&d=identicon&r=PG", "display_name": "dridk", "link": "https://stackoverflow.com/users/2708072/dridk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "accepted_answer_id": 40391014, "answer_count": 2, "score": 0, "last_activity_date": 1478245506, "creation_date": 1478124833, "last_edit_date": 1478245506, "question_id": 40390705, "link": "https://stackoverflow.com/questions/40390705/how-to-make-a-c-intention-list", "title": "How to make a C++ intention list", "body": "<p>I would like to make an intention list like python does. </p>\n\n<pre><code>list = [1,2,3,4]\nnewList = [ i * 2 for i in list ]\u00a0\n</code></pre>\n\n<p>Using std,iterator and lambda function, it should be possible to do the same things in one line. </p>\n\n<pre><code>std::vector&lt;int&gt; list = {1,2,3,4} ; \nstd::vector&lt;int&gt; newList = \n</code></pre>\n\n<p>Could you complete it ? </p>\n"}, {"tags": ["c++", "linux", "bash", "shell", "execvp"], "comments": [{"owner": {"reputation": 58, "user_id": 3419129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58f0f32b6ddc74ee19995d9424a604bf?s=128&d=identicon&r=PG&f=1", "display_name": "a_caban", "link": "https://stackoverflow.com/users/3419129/a-caban"}, "edited": false, "score": 0, "creation_date": 1478130282, "post_id": 40390602, "comment_id": 68034883, "body": "You&#39;re right, the ls command ran. If I understand your problem statement correctly, you want to determine if the command sent a failure. In which case you want the &quot;error code&quot; (exit code) returned by the command."}, {"owner": {"reputation": 1094, "user_id": 5081265, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/989bdc7ec91fc4e2accea93f2d5bc78a?s=128&d=identicon&r=PG", "display_name": "ecain", "link": "https://stackoverflow.com/users/5081265/ecain"}, "reply_to_user": {"reputation": 58, "user_id": 3419129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58f0f32b6ddc74ee19995d9424a604bf?s=128&d=identicon&r=PG&f=1", "display_name": "a_caban", "link": "https://stackoverflow.com/users/3419129/a-caban"}, "edited": false, "score": 0, "creation_date": 1478130372, "post_id": 40390602, "comment_id": 68034898, "body": "What I did, was look at the <code>status</code> value of of <code>waitpid</code>. I found that any value that was not 0 was invalid. I made a boolean flag to handle this. Is this valid?"}], "answers": [{"tags": [], "owner": {"reputation": 1094, "user_id": 5081265, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/989bdc7ec91fc4e2accea93f2d5bc78a?s=128&d=identicon&r=PG", "display_name": "ecain", "link": "https://stackoverflow.com/users/5081265/ecain"}, "is_accepted": true, "score": 0, "last_activity_date": 1500587926, "creation_date": 1500587926, "answer_id": 45225892, "question_id": 40390602, "link": "https://stackoverflow.com/questions/40390602/implementing-bash-operators-for-shell-in-c/45225892#45225892", "title": "Implementing bash operators for shell in c++", "body": "<p>The solution was to look at the number that <code>status</code> returns. The sign would tell you whether it was successful or not. </p>\n"}], "owner": {"reputation": 1094, "user_id": 5081265, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/989bdc7ec91fc4e2accea93f2d5bc78a?s=128&d=identicon&r=PG", "display_name": "ecain", "link": "https://stackoverflow.com/users/5081265/ecain"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 378, "favorite_count": 1, "accepted_answer_id": 45225892, "answer_count": 1, "score": 0, "last_activity_date": 1500587926, "creation_date": 1478124243, "question_id": 40390602, "link": "https://stackoverflow.com/questions/40390602/implementing-bash-operators-for-shell-in-c", "title": "Implementing bash operators for shell in c++", "body": "<p>I'm trying to implement the <code>||</code>, <code>&amp;&amp;</code>, and <code>;</code> operators in a bash shell I am making. What I am trying to do, is use a <code>int</code> as a flag that would be set to 1 if it was successful or 0 if it was not. My issue is that even if I enter an invalid operation such as <code>ls -apples</code> it sets the flag to 1. I also get the error message </p>\n\n<blockquote>\n  <p>ls: invalid option -- 'e'\n  Try 'ls --help' for more information</p>\n</blockquote>\n\n<p>so I think that means it technically is executing? \nHow do I keep track of whether <code>execvp</code> took a invalid operation?\nHere is my code: </p>\n\n<pre><code>    pid_t pid;\n    pid_t waitId; \n    int status; \n    //forks into two processes \n    pid = fork();\n    //There was an error during fork\n    if (pid &lt; 0) \n    {\n        successFlag = 0; \n        perror(\"There was an error\");\n    } \n    else if (pid == 0) \n    {\n        //must be cast because our function expects a char *const argv[]\n        if (execvp(command[0], (char**)command) &lt; 0) \n        { \n            //error at execvp\n            successFlag = 0; \n            perror(\"There was an error executing the process\");\n        }\n            exit(EXIT_FAILURE);\n    }\n\n    else \n    {\n        do \n        {\n          waitId = waitpid(pid, &amp;status, WUNTRACED | WCONTINUED);\n          if(waitId == -1){\n              successFlag = 0; \n              perror(\"Error in parent process\");\n              exit(EXIT_FAILURE);\n          }\n\n        } \n\n        while (!WIFEXITED(status) &amp;&amp; !WIFSIGNALED(status));\n    }\n    //use this flag to determine whether the process was a success\n    successFlag = 1;\n</code></pre>\n"}, {"tags": ["c++", "c", "gcc", "assembly"], "answers": [{"comments": [{"owner": {"reputation": 2640, "user_id": 802302, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/053d7640a7c3364e34c4b9a1a7a84406?s=128&d=identicon&r=PG", "display_name": "csteifel", "link": "https://stackoverflow.com/users/802302/csteifel"}, "edited": false, "score": 0, "creation_date": 1478125614, "post_id": 40390760, "comment_id": 68033425, "body": "So the documentation saying that the second part of it should be a long is just legacy from when bool&#39;s weren&#39;t first class citizens? Cause then it wouldn&#39;t make sense for the second arg to be anything other than 1 or 0 no?"}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 2640, "user_id": 802302, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/053d7640a7c3364e34c4b9a1a7a84406?s=128&d=identicon&r=PG", "display_name": "csteifel", "link": "https://stackoverflow.com/users/802302/csteifel"}, "edited": false, "score": 0, "creation_date": 1478125780, "post_id": 40390760, "comment_id": 68033494, "body": "@legion Note that this is also a C builtin. But yeah, it doesn&#39;t make much sense to pass a value other than 0 or 1."}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 1, "creation_date": 1478132396, "post_id": 40390760, "comment_id": 68035353, "body": "I&#39;m pretty sure the macros are supposed to be <code>#define likely(expr)   __builtin_expect(!!(expr), 1)</code> and <code>#define unlikely(expr) __builtin_expect(!!(expr), 0)</code>, which allows the idiomatic was of writing <code>if (likely(expr))</code> even if <code>expr</code> is not exclusively zero or one."}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1478134398, "post_id": 40390760, "comment_id": 68035814, "body": "@Barry: At least not in an if statement. In a switch, on the other hand, other values may be useful."}, {"owner": {"reputation": 9192, "user_id": 2040040, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/FD6QD.png?s=128&g=1", "display_name": "johnchen902", "link": "https://stackoverflow.com/users/2040040/johnchen902"}, "reply_to_user": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1478137804, "post_id": 40390760, "comment_id": 68036590, "body": "@EOF Is <code>(bool)</code> better than <code>!!</code>?"}, {"owner": {"reputation": 15145, "user_id": 4271923, "user_type": "registered", "profile_image": "https://graph.facebook.com/543414580/picture?type=large", "display_name": "Ped7g", "link": "https://stackoverflow.com/users/4271923/ped7g"}, "reply_to_user": {"reputation": 9192, "user_id": 2040040, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/FD6QD.png?s=128&g=1", "display_name": "johnchen902", "link": "https://stackoverflow.com/users/2040040/johnchen902"}, "edited": false, "score": 0, "creation_date": 1478177856, "post_id": 40390760, "comment_id": 68054195, "body": "@johnchen902: <code>!!</code> is shorter. The compiler should consider them same in terms of final machine code produced."}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "reply_to_user": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1478194766, "post_id": 40390760, "comment_id": 68065946, "body": "@KerrekSB: The problem is that <code>__builtin_expect()</code> returns an <code>int</code>, not whatever type the expression had. It&#39;s a terrible design choice that makes it far less useful than it could be. For example, if it returned the original type, you could tell the compiler how many iterations you expect a loop to run, which could be useful to make choices about unrolling/vectorizing. But if you do the sane thing and use <code>size_t</code> for your iterator, you get <code>signed&#47;unsigned</code> ickyness."}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "reply_to_user": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1478204375, "post_id": 40390760, "comment_id": 68071183, "body": "@EOF: According to <a href=\"https://gcc.gnu.org/onlinedocs/gcc-6.1.0/gcc/Other-Builtins.html\" rel=\"nofollow noreferrer\">the GCC documentation</a>, the return type is <code>long</code>. And indeed it&#39;s not meant for the kind of thing you&#39;d like to do. (And in general you should be doing FDO, not annotating source code.)"}], "tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": true, "score": 5, "last_activity_date": 1478125102, "creation_date": 1478125102, "answer_id": 40390760, "question_id": 40390583, "link": "https://stackoverflow.com/questions/40390583/gccs-builtin-expect-assembly-dump-seems-to-always-go-down-branch/40390760#40390760", "title": "GCC&#39;s __builtin_expect assembly dump seems to always go down branch", "body": "<p>From <a href=\"https://gcc.gnu.org/onlinedocs/gcc-4.0.2/gcc/Other-Builtins.html#index-g_t_005f_005fbuiltin_005fexpect-2284\" rel=\"nofollow noreferrer\">the docs</a>:</p>\n\n<blockquote>\n  <p>The return value is the value of <em>exp</em>, which should be an integral expression.</p>\n</blockquote>\n\n<p>So the logical semantics of:</p>\n\n<pre><code>if(__builtin_expect(num,4)) { ... }\n</code></pre>\n\n<p>are:</p>\n\n<pre><code>if (num) { ... }\n</code></pre>\n\n<p>which is different than what you say you want. If you want to write that you expect that <code>num == 4</code> to be very likely, you want:</p>\n\n<pre><code>if (__builtin_expect(num == 4, 1)) { ... }\n</code></pre>\n\n<p>Commonly, you'd just wrap these in macros:</p>\n\n<pre><code>#define likely(expr)   __builtin_expect((expr), 1)\n#define unlikely(expr) __builtin_expect((expr), 0)\n</code></pre>\n\n<p>and then the usage becomes more natural:</p>\n\n<pre><code>if (likely(num == 4)) { ... }\n</code></pre>\n"}], "owner": {"reputation": 2640, "user_id": 802302, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/053d7640a7c3364e34c4b9a1a7a84406?s=128&d=identicon&r=PG", "display_name": "csteifel", "link": "https://stackoverflow.com/users/802302/csteifel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 182, "favorite_count": 0, "accepted_answer_id": 40390760, "answer_count": 1, "score": 3, "last_activity_date": 1478125106, "creation_date": 1478124145, "last_edit_date": 1478125106, "question_id": 40390583, "link": "https://stackoverflow.com/questions/40390583/gccs-builtin-expect-assembly-dump-seems-to-always-go-down-branch", "title": "GCC&#39;s __builtin_expect assembly dump seems to always go down branch", "body": "<p>Ok so I have been playing around with __builtin_expect a bit and I just created a simple test program that I put through godbolt.org to get the assembly output (<a href=\"https://godbolt.org/g/FZo5fP\" rel=\"nofollow noreferrer\">https://godbolt.org/g/FZo5fP</a>)</p>\n\n<pre><code>int main(){\n  volatile int num = 4;\n  //if(num == 4){\n  if(__builtin_expect(num,4)){\n    return num*800;\n  }else{\n    return num*500;\n  }\n}\n</code></pre>\n\n<p>When compiled with -O1 or greater produces:</p>\n\n<pre><code>main:\n        mov     DWORD PTR [rsp-4], 4\n        mov     eax, DWORD PTR [rsp-4]\n        test    eax, eax\n        mov     eax, DWORD PTR [rsp-4]\n        je      .L2\n        imul    eax, eax, 800\n        ret\n.L2:\n        imul    eax, eax, 500\n        ret\n</code></pre>\n\n<p>It seems as though the part that says <code>test eax,eax</code> would always set zero flag to 0 unless <code>num</code> was equal to 0. So it seems as though if <code>num</code> is not set to 0 it will always multiply by 800 instead of only when <code>num=4</code>. My understanding of __builtin_expect is that while it will  optimize to assume that it will go to that branch it should still be comparing to ensure that it should use that branch.</p>\n\n<p>If I switch __builtin_expect to just == it produces </p>\n\n<pre><code>main:\n        mov     DWORD PTR [rsp-4], 2\n        mov     eax, DWORD PTR [rsp-4]\n        cmp     eax, 4\n        mov     eax, DWORD PTR [rsp-4]\n        je      .L5\n        imul    eax, eax, 500\n        ret\n.L5:\n        imul    eax, eax, 800\n        ret\n</code></pre>\n\n<p>Which makes much more sense to me in that it actually compares against 4. Is my understanding of __builtin_expect wrong? Does __builtin_expect actually only work with 0 or 1 even though it specifies that it takes a long?</p>\n"}, {"tags": ["c++", "input", "object-files"], "comments": [{"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1478124637, "post_id": 40390571, "comment_id": 68033052, "body": "<code>-858993460</code> is <code>0xCCCCCCCC</code> in hex. It&#39;s the pattern the debug version of the CRT that ships with Visual Studio assigns to uninitialized data. Since we cannot how you <i>&quot;display the x value in the first if statement&quot;</i>, we cannot help you, or provide an explanation."}, {"owner": {"reputation": 729, "user_id": 4296407, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/5b6394226433412b0d1ad46bb0318b28?s=128&d=identicon&r=PG&f=1", "display_name": "JMV12", "link": "https://stackoverflow.com/users/4296407/jmv12"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1478125109, "post_id": 40390571, "comment_id": 68033227, "body": "I placed the cout where I did to test it. Also, what would be the best way to test that all the values have been successfully stored?"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1478125304, "post_id": 40390571, "comment_id": 68033303, "body": "The right tool to solve such problems is your debugger. You should step through your code line-by-line <i>before</i> asking on Stack Overflow. For more help, please read <a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">How to debug small programs (by Eric Lippert)</a>. At a minimum, you should &#91;edit] your question to include a <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable</a> example that reproduces your problem, along with the observations you made in the debugger."}], "answers": [{"comments": [{"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1478125923, "post_id": 40390777, "comment_id": 68033544, "body": "Why read the first character into a dummy character, instead of reading it into a proper <code>char</code> variable, and using that as the input for a <code>switch</code>/<code>case</code> statement?"}, {"owner": {"reputation": 729, "user_id": 4296407, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/5b6394226433412b0d1ad46bb0318b28?s=128&d=identicon&r=PG&f=1", "display_name": "JMV12", "link": "https://stackoverflow.com/users/4296407/jmv12"}, "edited": false, "score": 0, "creation_date": 1478126490, "post_id": 40390777, "comment_id": 68033759, "body": "Checking the char allows me to save either the floats for v or ints for f to use in future calculations. I need to differentiate between sets of values."}, {"owner": {"reputation": 871, "user_id": 2679594, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5ur4D.jpg?s=128&g=1", "display_name": "Harry", "link": "https://stackoverflow.com/users/2679594/harry"}, "edited": false, "score": 0, "creation_date": 1478126539, "post_id": 40390777, "comment_id": 68033778, "body": "I wanted to show how to get the code running without too much changes. If I would implement this I wouldn&#39;t use stringstreams and that stuff and would implement a simple parser (FSM) and therefore would also branch on the first char(s) of the line."}], "tags": [], "owner": {"reputation": 871, "user_id": 2679594, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5ur4D.jpg?s=128&g=1", "display_name": "Harry", "link": "https://stackoverflow.com/users/2679594/harry"}, "is_accepted": false, "score": 0, "last_activity_date": 1478125174, "creation_date": 1478125174, "answer_id": 40390777, "question_id": 40390571, "link": "https://stackoverflow.com/questions/40390571/read-in-points-from-obj-file-c/40390777#40390777", "title": "Read In Points From OBJ File C++", "body": "<p>instead of writing your own obj file reader you could for example use assimp (<a href=\"http://www.assimp.org\" rel=\"nofollow noreferrer\">http://www.assimp.org</a>)</p>\n\n<p>regarding your code: you should check if line is empty before accessing the string at index 0.\nThen, when reading the float values, you must first skip char from the line (\"v\" in the case of a vertex). You could for example just read it into a dummy char variable.\nAnd finally, >> changes the state of the input stream. You could for example use a stringstream and initialize it with the current line and then read from this stream.</p>\n\n<p>Something like this:</p>\n\n<pre><code>if(line.empty())\n    continue;\n\nif (line[0] == 'v')\n{\n    float x, y, z;\n    char dummy;\n    std::stringstream ss(line);\n    ss &gt;&gt; dummy &gt;&gt; x &gt;&gt; y &gt;&gt; z;\n    cout &lt;&lt; x &lt;&lt; \";\" &lt;&lt; y &lt;&lt; \";\" &lt;&lt; z &lt;&lt; \"\\n\";\n}\n</code></pre>\n"}], "owner": {"reputation": 729, "user_id": 4296407, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/5b6394226433412b0d1ad46bb0318b28?s=128&d=identicon&r=PG&f=1", "display_name": "JMV12", "link": "https://stackoverflow.com/users/4296407/jmv12"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 838, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1478125174, "creation_date": 1478124094, "last_edit_date": 1478125068, "question_id": 40390571, "link": "https://stackoverflow.com/questions/40390571/read-in-points-from-obj-file-c", "title": "Read In Points From OBJ File C++", "body": "<p>I am trying to read in the following OBJ file</p>\n\n<pre><code>#--- ObjWriter ---\nv -0.599972 -0.599972 -0.599972\nv -0.304591 -0.834531 0.539150\n.\n.\n.\nf 1 2 6 \nf 1 6 5 \nf 1 5 7 \n.\n.\n.\n</code></pre>\n\n<p>I am trying to set up a function that will store the values of a vertex (3 values following the char v) to a vector of points (Pt being made up of a x, y, and z) and the values of a face (3 values following the char f) to another vector of faces (Face being made up of 3 ints). So far, I have attempted this with the following function:</p>\n\n<pre><code>void readFile(char *inFile)\n{\n    ifstream inF(inFile);\n    string line;\n\n    while (getline(inF, line))\n    {\n        if (line[0] == 'v')\n        {\n            float x, y, z;\n            inF &gt;&gt; x &gt;&gt; y &gt;&gt; z;\n\n            // cout &lt;&lt; x;\n\n            verts.push_back(Pt(x, y, z));\n        }\n        else if (line[0] == 'f')\n        {\n            int x, y, z;\n            inF &gt;&gt; x &gt;&gt; y &gt;&gt; z;\n            faces.push_back(Face(x, y, z));\n        }\n        else if (line[0] == '#')\n            continue;\n    }\n}\n</code></pre>\n\n<p>Whenever I test this method by displaying the x value in the first if statement, I get the value \"-858993460\". How can I fix this function? Placement of the cout line is shown commented out.</p>\n"}, {"tags": ["c++", "regex"], "comments": [{"owner": {"reputation": 481647, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1478124042, "post_id": 40390514, "comment_id": 68032793, "body": "That is not how capturing works. You need to use a simple <code>R&quot;(\\([A-Z],[A-Z]\\))&quot;</code> with a regex iterator to collect <i>multiple matches</i>, not captured group values."}], "answers": [{"tags": [], "owner": {"reputation": 481647, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "is_accepted": true, "score": 4, "last_activity_date": 1478124562, "creation_date": 1478124562, "answer_id": 40390658, "question_id": 40390514, "link": "https://stackoverflow.com/questions/40390514/c-stdregex-smatch-retains-subexpressions-only-once-for-their-apperance-in-a/40390658#40390658", "title": "c++ std::regex, smatch retains subexpressions only once for their apperance in a pattern string", "body": "<p>It is not a bug, but almost a universal behavior (except for PyPi Python <code>regex</code> module, .NET and (if compiled with appropriate options) Boost) when repeated captures only store the last matched item in its buffer.</p>\n\n<p>For more details, read <a href=\"http://www.regular-expressions.info/captureall.html\" rel=\"nofollow noreferrer\"><strong>Repeating a Capturing Group vs. Capturing a Repeated Group</strong></a> article.</p>\n\n<p>In your case, you may use a regular <a href=\"http://en.cppreference.com/w/cpp/regex/regex_iterator\" rel=\"nofollow noreferrer\"><em><code>std::sregex_iterator</code></em></a>:</p>\n\n<pre><code>int main() {\n    std::regex reg_expr(R\"(\\([A-Z],[A-Z]\\))\");\n    string input(\"(A,B) (C,D) (F,W) (G,K) (R,M)\");\n    for(std::sregex_iterator i = std::sregex_iterator(input.begin(), input.end(), reg_expr);\n        i != std::sregex_iterator();\n        ++i)\n    {\n        std::cout &lt;&lt; (*i).str() &lt;&lt; std::endl;\n    }\n    return 0;\n}\n</code></pre>\n\n<p>See the <a href=\"https://ideone.com/GBtCsv\" rel=\"nofollow noreferrer\">C++ demo</a></p>\n\n<p>Note I am using a raw string literal <code>R\"(...)\"</code> where only 1 backslash is needed to escape regex metacharacters.</p>\n"}], "owner": {"reputation": 25, "user_id": 6909917, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a75c6bd4b0ea5dc29ceab0ca9898023?s=128&d=identicon&r=PG&f=1", "display_name": "RadioTransmission", "link": "https://stackoverflow.com/users/6909917/radiotransmission"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 744, "favorite_count": 0, "accepted_answer_id": 40390658, "answer_count": 1, "score": 3, "last_activity_date": 1478126430, "creation_date": 1478123874, "last_edit_date": 1478126430, "question_id": 40390514, "link": "https://stackoverflow.com/questions/40390514/c-stdregex-smatch-retains-subexpressions-only-once-for-their-apperance-in-a", "title": "c++ std::regex, smatch retains subexpressions only once for their apperance in a pattern string", "body": "<p>I have the following code:</p>\n\n<pre><code>    int main()\n    {\n        regex reg_expr(\"(\\\\([A-Z],[A-Z]\\\\))(?:\\\\s(\\\\([A-Z],[A-Z]\\\\)))*\");\n        //regex reg_expr(\"(\\\\([A-Z],[A-Z]\\\\))(?:\\\\s(\\\\([A-Z],[A-Z]\\\\)))*\\\\s(\\\\([A-Z],[A-Z]\\\\))\");\n        smatch sm;\n        string input(\"(A,B) (C,D) (F,W) (G,K) (R,M)\");\n        //string input(\"(A,B) (C,D) (F,W)\");\n        if (regex_match(input, sm, reg_expr)) {\n            cout &lt;&lt; \"true\\n\";\n            cout &lt;&lt; sm.size() &lt;&lt; \"\\n\";\n            for (int i = 0; i &lt; sm.size(); i++) {\n                //if (sm[i].length())\n                    cout &lt;&lt; \"submatch number \" &lt;&lt; i &lt;&lt; \": \" &lt;&lt; sm[i].str() &lt;&lt; '\\n';\n            }\n        } else\n            cout &lt;&lt; \"false\";\n    return 0;\n    }\n</code></pre>\n\n<p>Everything works fine except that \"smatch sm\" has only one substring for each subexpression specified in the regular expression string.\nFor example, for the following test string:</p>\n\n<pre><code> (A,B) (C,D) (F,W) (G,K) (R,M)\n</code></pre>\n\n<p>which is correctly matched against the</p>\n\n<pre><code> (\\([A-Z],[A-Z]\\))(?:\\s(\\([A-Z],[A-Z]\\)))*\n</code></pre>\n\n<p>regular expression, the \"sm\" has only tree substrings: one is for the whole string, and the other two are  \"(A,B)\" and \"(R,M)\", the \"(C,D)\", \"(F,W)\", \"(G,K)\" are missing but they are matched.</p>\n\n<p>It looks like the <code>(?:\\s(\\([A-Z],[A-Z]\\)))*</code> is understood correctly by regex that 0 or more of the subexpressions should be matched, but there seems to be an error that just one subexpression is stored in the <code>std::smatch sm</code>.<br>\nIs it a library error (which is less likely) or I am doing something wrong? Your help and advice is wellcome!</p>\n"}, {"tags": ["c++", "include", "include-guards"], "comments": [{"owner": {"reputation": 310760, "user_id": 12711, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c330bdee507c95c603a93ca91d9145a9?s=128&d=identicon&r=PG", "display_name": "Michael Burr", "link": "https://stackoverflow.com/users/12711/michael-burr"}, "edited": false, "score": 0, "creation_date": 1478124038, "post_id": 40390505, "comment_id": 68032790, "body": "It&#39;s just defining the macro to have a value 1 instead of merely defining the macro with no value.  If the macro isn&#39;t used elsewhere then it doesn&#39;t matter much whether or not it has a value, it only matters whether or not it&#39;s defined."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1478124055, "post_id": 40390505, "comment_id": 68032800, "body": "Its <i>pointless</i> if that macro is only being used as an include guard. If it is being used as a value expansion somewhere, then it&#39;s meaningful."}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 2, "creation_date": 1478124566, "post_id": 40390505, "comment_id": 68033019, "body": "It defines the macro with a particular value, which means that it&#39;s being used as something other than a simple include guard. Or it means that whoever wrote it is trying too hard."}, {"owner": {"reputation": 519, "user_id": 6191539, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tzjJY.jpg?s=128&g=1", "display_name": "Catsunami", "link": "https://stackoverflow.com/users/6191539/catsunami"}, "edited": false, "score": 1, "creation_date": 1478125362, "post_id": 40390505, "comment_id": 68033323, "body": "I suppose it might be used to tell between different versions of the same file (and see which one was actually included) using the macro value."}, {"owner": {"reputation": 3864, "user_id": 620908, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2abd643ecb33f1a18a7a4f976cef0dbe?s=128&d=identicon&r=PG", "display_name": "Adrian Colomitchi", "link": "https://stackoverflow.com/users/620908/adrian-colomitchi"}, "reply_to_user": {"reputation": 519, "user_id": 6191539, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tzjJY.jpg?s=128&g=1", "display_name": "Catsunami", "link": "https://stackoverflow.com/users/6191539/catsunami"}, "edited": false, "score": 0, "creation_date": 1478126801, "post_id": 40390505, "comment_id": 68033850, "body": "@Catsunami (a sudden fit of pedantry, ignore it) &quot;to tell between different versions of the same <i>declarations, possibly included from a different file</i>&quot;"}, {"owner": {"reputation": 519, "user_id": 6191539, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tzjJY.jpg?s=128&g=1", "display_name": "Catsunami", "link": "https://stackoverflow.com/users/6191539/catsunami"}, "reply_to_user": {"reputation": 3864, "user_id": 620908, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2abd643ecb33f1a18a7a4f976cef0dbe?s=128&d=identicon&r=PG", "display_name": "Adrian Colomitchi", "link": "https://stackoverflow.com/users/620908/adrian-colomitchi"}, "edited": false, "score": 0, "creation_date": 1478126943, "post_id": 40390505, "comment_id": 68033902, "body": "@AdrianColomitchi, makes sense! I was actually thinking of a situation where main.c (or whatever) includes &quot;processor.h&quot;, and that processor.h contains definitions specific to some hardware. But the hardware might change and the main needs to know which processor was selected? I&#39;ve never used it like that, but I could imagine it might be."}], "owner": {"reputation": 23, "user_id": 4621281, "user_type": "registered", "profile_image": "https://graph.facebook.com/10204545438929530/picture?type=large", "display_name": "Luca Cavallini", "link": "https://stackoverflow.com/users/4621281/luca-cavallini"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 62, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1478123821, "creation_date": 1478123821, "question_id": 40390505, "link": "https://stackoverflow.com/questions/40390505/include-guards-in-c", "title": "Include guards in C++", "body": "<p>I use include guards quite a lot, but I've recently found a strange use of them which I cannot understand.</p>\n\n<pre><code>#ifndef B1SteppingAction_h\n#define B1SteppingAction_h 1\n\n// rest of my code\n\n#endif\n</code></pre>\n\n<p>What's that \"1\" in the define guard? I haven't found this anywhere else.\nThank you!</p>\n"}, {"tags": ["c++", "opengl", "lighting", "shadow-mapping", "qt5.6"], "owner": {"reputation": 167, "user_id": 551609, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/72a98b7bc2f09c1ead44c215b9c3f323?s=128&d=identicon&r=PG", "display_name": "zufryy", "link": "https://stackoverflow.com/users/551609/zufryy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 81, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1478123568, "creation_date": 1478123568, "question_id": 40390434, "link": "https://stackoverflow.com/questions/40390434/calculate-shadow-map-for-te", "title": "Calculate shadow map for te", "body": "<p>I have a problem when trying to generate shadow map from the terrain map from my data. I already success to use lighting procedure like show in picture below (directional lighting, azimuth:180', elevation:90').</p>\n\n<p><a href=\"https://i.stack.imgur.com/bslxe.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/bslxe.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>Eventually I need to apply more shadow there so I tried to create the shadowMap</p>\n\n<p>here is my code when I initialize the shader</p>\n\n<pre><code>bool BFB_Patch::initialise(QString filePath_ = \"\")\n{\ninitializeOpenGLFunctions();\nif(initialised_) return true;\n\nopenFile(filePath_);\n\nprogram = new QOpenGLShaderProgram();\nprogram-&gt;addShaderFromSourceCode(QOpenGLShader::Vertex, vtxshdr_source);\nprogram-&gt;addShaderFromSourceCode(QOpenGLShader::Fragment, frgshdr_source);\nprogram-&gt;link();\nprogram-&gt;bind();\n\nif(!vao.create() || !vbo.create() || !ibo.create()) {\n    qDebug() &lt;&lt; \"Error creating VAO or VBO or IBO\";\n    return false;\n}\n\n// Bind all\nvao.bind(); vbo.bind(); ibo.bind();\n\nvbo.setUsagePattern(QOpenGLBuffer::DynamicDraw);\nibo.setUsagePattern(QOpenGLBuffer::DynamicDraw);\n\n// Release (unbind) all\nvao.release(); vbo.release(); ibo.release(); program-&gt;release();\n\n// Bind all\n//vao.bind(); vbo.bind(); ibo.bind();\n\nprogramShadow = new QOpenGLShaderProgram();\nprogramShadow-&gt;addShaderFromSourceCode(QOpenGLShader::Vertex, svtxshdr_source);\nprogramShadow-&gt;addShaderFromSourceCode(QOpenGLShader::Fragment, sfrgshdr_source);\nprogramShadow-&gt;link();\nprogramShadow-&gt;bind();\n\nif(m_shadowMapFBO != 0)\n    return false;\n\n// Create a frame-buffer and associate the texture with it.\nglGenFramebuffers(1, &amp;m_shadowMapFBO);\n\n// Create a texture for storing the depth map\nglGenTextures(1, &amp;m_shadowMapTex);\nglBindTexture(GL_TEXTURE_2D, m_shadowMapTex);\nglTexImage2D(GL_TEXTURE_2D, 0, GL_DEPTH_COMPONENT,\n             1024, 1024, 0, GL_DEPTH_COMPONENT, GL_FLOAT, NULL);\nglTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_NEAREST);\nglTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_NEAREST);\nglTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_REPEAT);\nglTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_REPEAT);\n\nglBindFramebuffer(GL_FRAMEBUFFER, m_shadowMapFBO);\nglFramebufferTexture2D(GL_FRAMEBUFFER, GL_DEPTH_ATTACHMENT, GL_TEXTURE_2D, m_shadowMapTex, 0);\n\n// Let OpenGL know that we are not interested in colors for this buffer\nglDrawBuffer(GL_NONE);\nglReadBuffer(GL_NONE);\n\n// Cleanup for now.\nglBindFramebuffer(GL_FRAMEBUFFER, 0);\n\nprogramShadow-&gt;release();\n\ninitialised_ = true;\n\nreturn false;\n}\n</code></pre>\n\n<p>Here is my code to draw the scene</p>\n\n<pre><code>void BFB_Patch::draw(mat4 mvpMatrix, vec2 range)\n{\nif(!initialised_) return;\n\nint viewport[4];\nglGetIntegerv(GL_VIEWPORT, viewport);\n\nglEnable(GL_DEPTH_TEST);\nglViewport(0, 0, 1024, 1024);\nglBindFramebuffer(GL_FRAMEBUFFER, m_shadowMapFBO);\nglClear(GL_DEPTH_BUFFER_BIT);\n\nprogramShadow-&gt;bind();\nvbo.bind(); ibo.bind();\n\nprogramShadow-&gt;enableAttributeArray(\"posAttrH\");\nprogramShadow-&gt;setAttributeBuffer(\"posAttrH\", GL_FLOAT, 0, 3, 3*sizeof(vec3));\nprogramShadow-&gt;enableAttributeArray(\"posAttrL\");\nprogramShadow-&gt;setAttributeBuffer(\"posAttrL\", GL_FLOAT, sizeof(vec3), 3, 3*sizeof(vec3));\n\n\nvec3 lightPos = vec3(-lightDir[0]*range[1]/2, -lightDir[1]*range[1]/2, lightDir[2]);\n\nmat4 lightMatrix;\nlightMatrix.setToIdentity();\nlightMatrix.lookAt(lightPos, vec3(0.0f, 0.0f, 0.0f), vec3(0.0f, 1.0f, 0.0f));\n\nm_projection.setToIdentity();\nm_projection.ortho(-range[0]/2, range[0]/2,\n                   -range[1]/2, range[1]/2,\n                    10.0f, 0.0f);\n\nprogramShadow-&gt;setUniformValue(\"mvpMatrix\", m_projection*lightMatrix);\nprogramShadow-&gt;setUniformValue(\"centerEyeH\", centerEyeH);\nprogramShadow-&gt;setUniformValue(\"centerEyeL\", centerEyeL);\n\nglDrawElements(GL_TRIANGLE_STRIP, indices.size(), GL_UNSIGNED_INT, 0);\n\nvbo.release(); ibo.release();\nprogramShadow-&gt;release();\n\nglBindFramebuffer(GL_FRAMEBUFFER, 0);\n\n// Rendering\nglViewport(viewport[0], viewport[1], viewport[2], viewport[3]);\nglClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);\n\nif(m_shadowMapTex &gt; 0) {\n    glActiveTexture(GL_TEXTURE0);\n    glBindTexture(GL_TEXTURE_2D, m_shadowMapTex);\n}\n\nprogram-&gt;bind();\nvao.bind(); vbo.bind(); ibo.bind(); //\n\nprogram-&gt;enableAttributeArray(\"posAttrH\");\nprogram-&gt;setAttributeBuffer(\"posAttrH\", GL_FLOAT, 0, 3, 3*sizeof(vec3));\nprogram-&gt;enableAttributeArray(\"posAttrL\");\nprogram-&gt;setAttributeBuffer(\"posAttrL\", GL_FLOAT, sizeof(vec3), 3, 3*sizeof(vec3));\nprogram-&gt;enableAttributeArray(\"normalAttr\");\nprogram-&gt;setAttributeBuffer(\"normalAttr\", GL_FLOAT, 2*sizeof(vec3), 3, 3*sizeof(vec3));\n\nprogram-&gt;setUniformValueArray(\"colorTable\", rainbowTable.data(), rainbowTable.size());\nprogram-&gt;setUniformValue(\"mvpMatrix\", mvpMatrix);\nprogram-&gt;setUniformValue(\"pMat\", m_projection*lightMatrix);\nprogram-&gt;setUniformValue(\"centerEyeH\", centerEyeH);\nprogram-&gt;setUniformValue(\"centerEyeL\", centerEyeL);\nprogram-&gt;setUniformValue(\"colorSize\", float(rainbowTable.size()) - 1.0f);\nprogram-&gt;setUniformValue(\"heightSize\", float(maxZ - minZ));\nprogram-&gt;setUniformValue(\"heightMin\", float(minZ));\nprogram-&gt;setUniformValue(\"lightDir\", lightDir);\nprogram-&gt;setUniformValue(\"qt_ShadowMap\", m_shadowMapTex);\n\n//    glPolygonMode(GL_FRONT_AND_BACK, GL_LINE);\n    glLineWidth(2.0f);\n    glEnable(GL_PRIMITIVE_RESTART_FIXED_INDEX);\n//    glEnable(GL_DEPTH_TEST);\n    glDrawElements(GL_TRIANGLE_STRIP, indices.size(), GL_UNSIGNED_INT, 0);\n    glDisable(GL_PRIMITIVE_RESTART_FIXED_INDEX);\n//    glPolygonMode(GL_FRONT_AND_BACK, GL_FILL);\n\nvao.release(); vbo.release(); ibo.release();\nprogram-&gt;release();\nif(m_shadowMapTex &gt; 0) {\n    glActiveTexture(GL_TEXTURE0);\n    glBindTexture(GL_TEXTURE_2D, 0);\n}\nglDisable(GL_DEPTH_TEST);\n}\n</code></pre>\n\n<p>Here is my code vertex and fragment shader code for shadow, respectively</p>\n\n<pre><code>const char* const svtxshdr_source =\n        \"attribute highp vec3 posAttrH;\\n\"\n        \"attribute highp vec3 posAttrL;\\n\"\n        \"uniform mat4 mvpMatrix;\\n\"\n        \"uniform vec3 centerEyeH;\\n\"\n        \"uniform vec3 centerEyeL;\\n\"\n        \"void main() {\\n\"\n        \"   vec3 t1 = posAttrL - centerEyeL;\\n\"\n        \"   vec3 e = t1 - posAttrL;\\n\"\n        \"   vec3 t2 = ((-centerEyeL - e) + (posAttrL - (t1 - e))) + posAttrH - centerEyeH;\\n\"\n        \"   vec3 highDiff = t1 + t2;\\n\"\n        \"   vec3 lowDiff = t2 - (highDiff - t1);\\n\"\n        \"   gl_Position = mvpMatrix*vec4(highDiff + lowDiff, 1.0f);\\n\"\n        \"}\\n\";\n\n const char* const sfrgshdr_source =\n        \"void main() {\\n\"\n        \"   gl_FragDepth = gl_FragCoord.z;\\n\"\n        \"}\\n\";\n</code></pre>\n\n<p>And the last code is for my vertex and fragment shader to display the scene + shadow.</p>\n\n<pre><code>const char* const vtxshdr_source =\n        \"attribute highp vec3 posAttrH;\\n\"\n        \"attribute highp vec3 posAttrL;\\n\"\n        \"attribute highp vec3 normalAttr;\\n\"\n        \"uniform mat4 mvpMatrix;\\n\"\n        \"uniform mat4 pMat;\\n\"\n        \"uniform vec3 centerEyeH;\\n\"\n        \"uniform vec3 centerEyeL;\\n\"\n        \"varying float height;\\n\"\n        \"varying vec3 normal;\\n\"\n        \"varying vec4 posShadow;\\n\"\n        \"void main() {\\n\"\n        \"   vec3 t1 = posAttrL - centerEyeL;\\n\"\n        \"   vec3 e = t1 - posAttrL;\\n\"\n        \"   vec3 t2 = ((-centerEyeL - e) + (posAttrL - (t1 - e))) + posAttrH - centerEyeH;\\n\"\n        \"   vec3 highDiff = t1 + t2;\\n\"\n        \"   vec3 lowDiff = t2 - (highDiff - t1);\\n\"\n        \"   normal = normalAttr;\\n\"\n        \"   height = highDiff.z + lowDiff.z;\\n\"\n        \"   posShadow = pMat*vec4(highDiff + lowDiff, 1.0f);\\n\"\n        \"   gl_Position = mvpMatrix*vec4(highDiff + lowDiff, 1.0f);\\n\"\n        \"}\\n\";\n\nconst char* const frgshdr_source =\n        \"uniform const float colorSize;\\n\"\n        \"uniform vec3 colorTable[512];\"\n        \"uniform vec3 lightDir;\"\n        \"varying float height;\\n\"\n        \"varying vec3 normal;\\n\"\n        \"varying vec3 fragPos;\\n\"\n        \"varying vec4 posShadow;\\n\"\n        \"uniform float heightSize;\\n\"\n        \"uniform float heightMin;\\n\"\n        \"uniform sampler2D qt_ShadowMap;\\n\"\n        \"\\n\"\n        \"float evaluateShadow(vec4 shadowPos) {\\n\"\n        \"   vec3 shadowCoords = shadowPos.xyz/shadowPos.w;\\n\"\n        \"   shadowCoords = shadowCoords*0.5f + 0.5f;\\n\"\n        \"   float closestDepth = texture2D(qt_ShadowMap, shadowCoords.xy).r;\\n\"\n        \"   float currentDepth = shadowCoords.z;\\n\"\n        \"   float shadow = (currentDepth &gt; closestDepth) ? 1.0 : 0.0;\\n\"\n        \"   return shadow;\\n\"\n        \"}\\n\"\n        \"void main() {\\n\"\n        \"   vec3 ambient = vec3(0.0f, 0.0f, 0.0f);\\n\"\n        \"   float diff = max(dot(normal, lightDir), 0.0f);\\n\"\n        \"   vec3 diffuse = vec3(1.0f, 1.0f, 1.0f) * diff;\\n\"\n        \"   float h = (height - heightMin)/heightSize;\\n\"\n        \"   int i = 0;\\n\"\n        \"   while (h &gt;= float(i + 1)/colorSize) {\\n\"\n        \"       i += 1;}\\n\"\n        \"   vec3 base = mix(colorTable[i], colorTable[i+1], colorSize*(h - (float(i)/colorSize)));\\n\"\n        \"   float shadow = evaluateShadow(posShadow);\\n\"\n        \"   vec3 lighting = (ambient + (1.0 - shadow)*diffuse)*base;\\n\"\n        \"   gl_FragColor = vec4(lighting, 1.0f);\\n\"\n        \"}\\n\";\n</code></pre>\n\n<p>I believe by using the code above I don't need to put biasMatrix to normalize the texture.</p>\n\n<p>The picture below are the screenshot from what I achieve now. Still no shadow, but there is black artefact in the upper parts (it will move If I move the light position)</p>\n\n<p><a href=\"https://i.stack.imgur.com/B5jLv.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/B5jLv.png\" alt=\"enter image description here\"></a></p>\n\n<p>This is the example of image of something that I want to achieve.\n<a href=\"https://i.stack.imgur.com/1EYEZ.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/1EYEZ.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>Also, I need to applied Geometry Transform Precision to handle my high number in my geometry (x and y axis)</p>\n\n<p>I am not sure where I made mistakes. I suspecting it's in the matrix transformation but have no idea to fix that.  Anyway, thank you in advance for your help.</p>\n"}, {"tags": ["c++", "assembly", "inline-assembly"], "comments": [{"owner": {"reputation": 58, "user_id": 3419129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58f0f32b6ddc74ee19995d9424a604bf?s=128&d=identicon&r=PG&f=1", "display_name": "a_caban", "link": "https://stackoverflow.com/users/3419129/a-caban"}, "edited": false, "score": 1, "creation_date": 1478123789, "post_id": 40390391, "comment_id": 68032689, "body": "That&#39;s a tough one. You&#39;re probably using multi-core CPU also, which complicates things. The result will output vastly different times because the kernel will execute instructions from other programs at the same time that your program is running."}, {"owner": {"reputation": 535, "user_id": 6749614, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/160bc73160460f27c6f58b1b91d3dd54?s=128&d=identicon&r=PG&f=1", "display_name": "kemsbe", "link": "https://stackoverflow.com/users/6749614/kemsbe"}, "reply_to_user": {"reputation": 58, "user_id": 3419129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58f0f32b6ddc74ee19995d9424a604bf?s=128&d=identicon&r=PG&f=1", "display_name": "a_caban", "link": "https://stackoverflow.com/users/3419129/a-caban"}, "edited": false, "score": 0, "creation_date": 1478123982, "post_id": 40390391, "comment_id": 68032764, "body": "@a_caban thank you, that makes things much clearer now, so, as I understand, C++ and inline asm isn&#39;t the way to go for such calculations?"}, {"owner": {"reputation": 58, "user_id": 3419129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58f0f32b6ddc74ee19995d9424a604bf?s=128&d=identicon&r=PG&f=1", "display_name": "a_caban", "link": "https://stackoverflow.com/users/3419129/a-caban"}, "edited": false, "score": 1, "creation_date": 1478129634, "post_id": 40390391, "comment_id": 68034711, "body": "To be honest, I&#39;m not quite sure what the best means is for that type off measurement. From your assembly it looks like you&#39;re trying to measure an old 386 processor for the time it takes to perform a register move operation. If your processor had only one core and you wrote a pure assembly image that ran at boot time then you could make the claim that &quot;fast instructions run a million times complete X second&quot; with some certainty."}, {"owner": {"reputation": 15145, "user_id": 4271923, "user_type": "registered", "profile_image": "https://graph.facebook.com/543414580/picture?type=large", "display_name": "Ped7g", "link": "https://stackoverflow.com/users/4271923/ped7g"}, "edited": false, "score": 0, "creation_date": 1478130454, "post_id": 40390391, "comment_id": 68034918, "body": "<a href=\"http://www.agner.org/optimize/#testp\" rel=\"nofollow noreferrer\">agner.org/optimize/#testp</a>"}], "owner": {"reputation": 535, "user_id": 6749614, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/160bc73160460f27c6f58b1b91d3dd54?s=128&d=identicon&r=PG&f=1", "display_name": "kemsbe", "link": "https://stackoverflow.com/users/6749614/kemsbe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 112, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1478123339, "creation_date": 1478123339, "question_id": 40390391, "link": "https://stackoverflow.com/questions/40390391/c-and-assembler-measuring-mips", "title": "C++ and assembler: measuring mips", "body": "<p>I need to measure millions of operations per second using inline assembler in C++, I'm a newbie in both, so I have some inconsistent output from my program, but I don't know, what number the output should be close to, so I can't really compare them.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;time.h&gt;\n#include &lt;stdio.h&gt;\n\nusing namespace std;\nint main()\n{   clock_t t1, t2, t3;\n    long n = 500000000;\n    long i = 0;\n\n    t1 = clock();\n    for(i = 0; i &lt; n; i++){\n        __asm__ volatile (\n        \".intel_syntax noprefix\\n\\t\"\n        \"mov ax, bx\\n\\t\"\n        );\n    }\n    t2 = clock();\n\n    for(i = 0; i &lt; n; i++){\n        __asm__ volatile (\n        \".intel_syntax noprefix\\n\\t\"\n        \"mov ax, bx\\n\\t\"\n        \"mov bx, ax\\n\\t\"\n        );\n    }\n    t3 = clock();\n\n    int d1 = t2 - t1;\n    int d2 = t3 - t2;\n    double operation = (d2 - d1) / (double) n;\n\n    cout &lt;&lt;\"n + loop:    \" &lt;&lt; d1 &lt;&lt; \" ms\" &lt;&lt; endl;\n    cout &lt;&lt;\"2n + loop:   \" &lt;&lt; d2 &lt;&lt; \" ms\" &lt;&lt; endl;\n    cout &lt;&lt; \"n operations:  \" &lt;&lt; d2 - d1 &lt;&lt; \" ms\" &lt;&lt; endl;\n    cout &lt;&lt; \"1 operation:  \" &lt;&lt; operation &lt;&lt; \" ms\" &lt;&lt; endl;\n    cout &lt;&lt; \"mops:  \"&lt;&lt; 1000 / (operation * 1024 * 1024) &lt;&lt;endl;\n    return (0);\n}\n</code></pre>\n\n<p>And output is like:</p>\n\n<pre><code>n + loop:    1590078 ms\n2n + loop:   1598367 ms\nn operations:  8289 ms\n1 operation:  1.6578e-05 ms\nmops:  57.5265\n</code></pre>\n\n<p>or</p>\n\n<pre><code>n + loop:    1593836 ms\n2n + loop:   1593969 ms\nn operations:  133 ms\n1 operation:  2.66e-07 ms\nmops:  3585.24\n</code></pre>\n\n<p>or</p>\n\n<pre><code>n + loop:    1582123 ms\n2n + loop:   1592557 ms\nn operations:  10434 ms\n1 operation:  2.0868e-05 ms\nmops:  45.7003\n</code></pre>\n\n<p>So my question basically is: is it a proper way to measure, even roughly, mips?</p>\n"}, {"tags": ["c++", "qt", "c++11"], "comments": [{"owner": {"reputation": 7466, "user_id": 2146682, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7120fc7548c43237662da906e3c84f43?s=128&d=identicon&r=PG", "display_name": "MrEricSir", "link": "https://stackoverflow.com/users/2146682/mrericsir"}, "edited": false, "score": 1, "creation_date": 1478128421, "post_id": 40390247, "comment_id": 68034369, "body": "If the .lib is an import module, it&#39;s going to attempt to load its corresponding DLL."}, {"owner": {"reputation": 69264, "user_id": 256138, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ed9e8c0ff767e38f8fade11f5af00a45?s=128&d=identicon&r=PG", "display_name": "rubenvb", "link": "https://stackoverflow.com/users/256138/rubenvb"}, "edited": false, "score": 0, "creation_date": 1478169379, "post_id": 40390247, "comment_id": 68048543, "body": "Note that Qmake can handle <code>LIBS += L$$PWD&#47;..&#47;..&#47;libname&#47;lib&#47; -luhd</code> even on Windows."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1478245711, "post_id": 40390247, "comment_id": 68084325, "body": "You either need the DLL or you need a standalone library. It seems like you don&#39;t have either."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1478246168, "post_id": 40390247, "comment_id": 68084558, "body": "You are lacking some operating system specific (perhaps Windows, or Win32) tag"}], "answers": [{"tags": [], "owner": {"reputation": 744, "user_id": 6026551, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d77a72e48d3fe41516ccd399373e9237?s=128&d=identicon&r=PG&f=1", "display_name": "Elcan", "link": "https://stackoverflow.com/users/6026551/elcan"}, "is_accepted": false, "score": -1, "last_activity_date": 1478168801, "creation_date": 1478168801, "answer_id": 40399126, "question_id": 40390247, "link": "https://stackoverflow.com/questions/40390247/c-program-cant-start-because-a-dll-is-missing-but-it-should-be-looking-for/40399126#40399126", "title": "C++ program can&#39;t start because a .dll is missing, but it should be looking for a .lib", "body": "<p>You need to compile your library as a .dll.</p>\n\n<p>Windows programs rely on .dll to run, while Linux ones rely on .lib. Your issue here is that you try to use a Linux library file on a Windows executable.</p>\n\n<p>Find/build the .dll for your library using a Windows compiler (MSVC/MinGW), then put it next to your executable, the same way you did for the Qt DLLs</p>\n"}], "owner": {"reputation": 9, "user_id": 1486726, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f022769665bd5db7feaa63f6ceafa58?s=128&d=identicon&r=PG", "display_name": "123248", "link": "https://stackoverflow.com/users/1486726/123248"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 269, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1478245518, "creation_date": 1478122663, "last_edit_date": 1478245518, "question_id": 40390247, "link": "https://stackoverflow.com/questions/40390247/c-program-cant-start-because-a-dll-is-missing-but-it-should-be-looking-for", "title": "C++ program can&#39;t start because a .dll is missing, but it should be looking for a .lib", "body": "<p>I'm using QT Creator to develop an app. Running the code in QTC results in the program crashing so I went to the path of the program's executable. When I try to run it, I get the message: \"The program can't start because libname.dll is missing from your computer.\" This is strange because libname.dll doesn't exist, though libname.lib does.</p>\n\n<p>In the .pro file of my app, the following lines were automatically inserted when linking the appropriate library:</p>\n\n<pre><code>    unix:!macx|win32: LIBS += -L$$PWD/../../libname/lib/ -luhd\n\n    win32:!win32-g++: PRE_TARGETDEPS += $$PWD/../../libname/lib/uhd.lib\n    else:unix:!macx|win32-g++: PRE_TARGETDEPS +=   $$PWD/../../libname/lib/libuhd.a\n</code></pre>\n\n<p>I looked through the qmake files and there is no mention of a libname.dll so is there anything I could be missing here?</p>\n"}, {"tags": ["c++", "visual-studio", "c++11", "visual-studio-2015"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1478122526, "post_id": 40390168, "comment_id": 68032141, "body": "As long as vs2015 claims to be c++11 standard compliant, it should be thread safe. <i>&quot;Which indicates that initializing static variable s is actually not thread safe.&quot;</i> What let&#39;s you doubt about it? The function can be called multiple times from different threads though."}, {"owner": {"reputation": 20670, "user_id": 26039, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/15aacb48f4c894a6341e1013e9b5a42f?s=128&d=identicon&r=PG", "display_name": "eran", "link": "https://stackoverflow.com/users/26039/eran"}, "edited": false, "score": 0, "creation_date": 1478122830, "post_id": 40390168, "comment_id": 68032253, "body": "How does this show initialization isn&#39;t thread safe? Your prints are confusing, but it seems thread 0 prints first and then creates the sleeper, and all others print the &quot;Sleeper StartN&quot; and stall, waiting for the static sleeper to be created. Are there some &quot;Sleeper Done&quot; prints eventually, to complete the picture?"}, {"owner": {"reputation": 20670, "user_id": 26039, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/15aacb48f4c894a6341e1013e9b5a42f?s=128&d=identicon&r=PG", "display_name": "eran", "link": "https://stackoverflow.com/users/26039/eran"}, "reply_to_user": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 1, "creation_date": 1478123164, "post_id": 40390168, "comment_id": 68032417, "body": "@NicolBolas of course. But how does the print show more threads are initializing it? Note that the word &quot;Sleeper&quot; is printed both in <code>MyThreadFunction</code> and in <code>Sleeper</code>&#39;s constructor, which is confusing. Changing the print in the constructor would probably made things clearer, and prove it was only called once."}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "reply_to_user": {"reputation": 20670, "user_id": 26039, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/15aacb48f4c894a6341e1013e9b5a42f?s=128&d=identicon&r=PG", "display_name": "eran", "link": "https://stackoverflow.com/users/26039/eran"}, "edited": false, "score": 0, "creation_date": 1478123216, "post_id": 40390168, "comment_id": 68032441, "body": "@eran: Yes, the naming is very confusing."}, {"owner": {"reputation": 86, "user_id": 6270034, "user_type": "registered", "profile_image": "https://graph.facebook.com/1058977297496611/picture?type=large", "display_name": "Sushanth Rajasankar", "link": "https://stackoverflow.com/users/6270034/sushanth-rajasankar"}, "edited": false, "score": 0, "creation_date": 1478123547, "post_id": 40390168, "comment_id": 68032583, "body": "Thanks for pointing my mistake. Removing the word sleeper from MyThreadFunction gives the expected result."}], "answers": [{"tags": [], "owner": {"reputation": 86, "user_id": 6270034, "user_type": "registered", "profile_image": "https://graph.facebook.com/1058977297496611/picture?type=large", "display_name": "Sushanth Rajasankar", "link": "https://stackoverflow.com/users/6270034/sushanth-rajasankar"}, "is_accepted": false, "score": 0, "last_activity_date": 1478123961, "creation_date": 1478123961, "answer_id": 40390535, "question_id": 40390168, "link": "https://stackoverflow.com/questions/40390168/is-c-local-static-variable-initialization-thread-safe-in-vs2015/40390535#40390535", "title": "Is C++ local static variable initialization thread-safe in VS2015", "body": "<p>Yes it does. The test was wrong. Removing the word sleeper from MyThreadFunction shows the expected output</p>\n\n<blockquote>\n  <p>Start1 Sleeper Start4 Start3 Start0 Start2 Done3 Done1 Done0 Done2\n  Done4</p>\n</blockquote>\n"}], "owner": {"reputation": 86, "user_id": 6270034, "user_type": "registered", "profile_image": "https://graph.facebook.com/1058977297496611/picture?type=large", "display_name": "Sushanth Rajasankar", "link": "https://stackoverflow.com/users/6270034/sushanth-rajasankar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 703, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1478123961, "creation_date": 1478122274, "question_id": 40390168, "link": "https://stackoverflow.com/questions/40390168/is-c-local-static-variable-initialization-thread-safe-in-vs2015", "title": "Is C++ local static variable initialization thread-safe in VS2015", "body": "<p>According to <a href=\"https://msdn.microsoft.com/en-us/library/hh567368.aspx\" rel=\"nofollow noreferrer\">https://msdn.microsoft.com/en-us/library/hh567368.aspx</a></p>\n\n<p>Magic statics (<a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2008/n2660.htm\" rel=\"nofollow noreferrer\">http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2008/n2660.htm</a>)\nare supported on VS2015</p>\n\n<p>However testing the following code in debug x64 Vs2015 Update 3</p>\n\n<pre><code>#include \"stdafx.h\"\n#include &lt;iostream&gt;\n#include &lt;windows.h&gt;\n#include &lt;tchar.h&gt;\n\n#define MAX_THREADS 5\n\nclass Sleeper\n{\npublic:\n    Sleeper()\n    {\n        std::cout &lt;&lt; \"Sleeper \\n\";\n        Sleep(100000);\n    }\n};\n\nDWORD WINAPI MyThreadFunction(LPVOID lpParam)\n{\n    std::cout &lt;&lt; \"Sleeper Start\" &lt;&lt; (int)lpParam &lt;&lt; \"\\n\";\n    static Sleeper s;\n    std::cout &lt;&lt; \"Sleeper Done\" &lt;&lt; (int)lpParam &lt;&lt; \"\\n\";\n    return 0;\n}\n\nint main(int, char**)\n{\n    DWORD   dwThreadIdArray[MAX_THREADS];\n    HANDLE  hThreadArray[MAX_THREADS];\n\n    // Create MAX_THREADS worker threads.\n\n    for (int i = 0; i&lt;MAX_THREADS; i++)\n    {\n        // Create the thread to begin execution on its own.\n        hThreadArray[i] = CreateThread(\n            NULL,                   // default security attributes\n            0,                      // use default stack size  \n            MyThreadFunction,      // thread function name\n            (LPVOID)i,               // argument to thread function \n            0,                     // use default creation flags \n            &amp;dwThreadIdArray[i]);   // returns the thread identifier \n\n                                    // Check the return value for success.\n                                    // If CreateThread fails, terminate execution. \n                                    // This will automatically clean up threads and memory. \n        if (hThreadArray[i] == NULL)\n        {\n            ExitProcess(3);\n        }\n    } // End of main thread creation loop.\n\n      // Wait until all threads have terminated.\n    WaitForMultipleObjects(MAX_THREADS, hThreadArray, TRUE, INFINITE);\n\n    // Close all thread handles and free memory allocations.\n    for (int i = 0; i&lt;MAX_THREADS; i++)\n    {\n        CloseHandle(hThreadArray[i]);\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>gives output </p>\n\n<blockquote>\n  <p>Sleeper Start0 Sleeper Sleeper Start2 Sleeper Start3 Sleeper Start1\n  Sleeper Start4</p>\n</blockquote>\n\n<p>Which indicates that initializing static variable s is actually not thread safe.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 3, "creation_date": 1478121875, "post_id": 40390028, "comment_id": 68031842, "body": "The question text is the opposite of the title"}], "answers": [{"comments": [{"owner": {"reputation": 457352, "user_id": 87234, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/FkjBe.png?s=128&g=1", "display_name": "GManNickG", "link": "https://stackoverflow.com/users/87234/gmannickg"}, "edited": false, "score": 0, "creation_date": 1478121895, "post_id": 40390055, "comment_id": 68031853, "body": "<code>foo</code> may live on a stack in typical implementations, but in those same implementations it almost certainly won&#39;t point anywhere in the stack."}], "tags": [], "owner": {"reputation": 58, "user_id": 3419129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58f0f32b6ddc74ee19995d9424a604bf?s=128&d=identicon&r=PG&f=1", "display_name": "a_caban", "link": "https://stackoverflow.com/users/3419129/a-caban"}, "is_accepted": false, "score": -2, "last_activity_date": 1478122053, "last_edit_date": 1478122053, "creation_date": 1478121789, "answer_id": 40390055, "question_id": 40390028, "link": "https://stackoverflow.com/questions/40390028/in-c-does-initializing-a-string-but-not-assigning-it-to-anything-result-in-me/40390055#40390055", "title": "In C++, does initializing a string but not assigning it to anything result in memory usage?", "body": "<p>I suggest looking into this link: <a href=\"http://www.learncpp.com/cpp-tutorial/79-the-stack-and-the-heap/\" rel=\"nofollow noreferrer\">http://www.learncpp.com/cpp-tutorial/79-the-stack-and-the-heap/</a></p>\n\n<p>foo points to a location on the stack in your case. So, yes, it takes up memory.</p>\n\n<p>Edit: Sorry misread your code. You aren't assigning \"hello\" to anything.\nSo in your case, no.</p>\n"}, {"comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1478122553, "post_id": 40390087, "comment_id": 68032155, "body": "When an executable is loaded, the static data may be mapped or loaded into memory, e.g. the pointer doesn&#39;t actually point at the hard disk."}], "tags": [], "owner": {"reputation": 3725, "user_id": 2209008, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/MceJL.jpg?s=128&g=1", "display_name": "Colin Basnett", "link": "https://stackoverflow.com/users/2209008/colin-basnett"}, "is_accepted": false, "score": 1, "last_activity_date": 1478121953, "creation_date": 1478121953, "answer_id": 40390087, "question_id": 40390028, "link": "https://stackoverflow.com/questions/40390028/in-c-does-initializing-a-string-but-not-assigning-it-to-anything-result-in-me/40390087#40390087", "title": "In C++, does initializing a string but not assigning it to anything result in memory usage?", "body": "<p><code>\"hello\";</code></p>\n\n<p>This does not take any memory because any modern compiler would optimize this away since it literally does <em>nothing</em>. If it was something more like:</p>\n\n<p><code>const char* foo = \"hello\";</code></p>\n\n<p>As you stated in your question, <code>foo</code> would be a <code>char*</code> to a static string that is baked into the program executable. Therefore the only run-time memory is the pointer to that string location.</p>\n"}, {"comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1478122390, "post_id": 40390090, "comment_id": 68032065, "body": "It could be in the &quot;code segment&quot; (or anywhere really)"}], "tags": [], "owner": {"reputation": 23009, "user_id": 3613500, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/lIfov.png?s=128&g=1", "display_name": "David Haim", "link": "https://stackoverflow.com/users/3613500/david-haim"}, "is_accepted": false, "score": 1, "last_activity_date": 1478121974, "creation_date": 1478121974, "answer_id": 40390090, "question_id": 40390028, "link": "https://stackoverflow.com/questions/40390028/in-c-does-initializing-a-string-but-not-assigning-it-to-anything-result-in-me/40390090#40390090", "title": "In C++, does initializing a string but not assigning it to anything result in memory usage?", "body": "<p>Interesting question.</p>\n\n<p>a string literal must take space in the static storage (the \"data segment\"), so yes, that string literal does take a place somewhere in the process memory.</p>\n\n<p>but a good optimize will recognize that this literal is not reference nowhere, and will probably remove that string away. so I highly doubt that a program compiled with optimization on will retain that string.</p>\n"}, {"tags": [], "owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "is_accepted": false, "score": 1, "last_activity_date": 1478122861, "creation_date": 1478122861, "answer_id": 40390288, "question_id": 40390028, "link": "https://stackoverflow.com/questions/40390028/in-c-does-initializing-a-string-but-not-assigning-it-to-anything-result-in-me/40390288#40390288", "title": "In C++, does initializing a string but not assigning it to anything result in memory usage?", "body": "<p>If you simply execute <code>\"hello\";</code> as an expression, almost any compiler will (probably even with optimization disabled) optimize it away to nothing.</p>\n\n<p>That doesn't necessarily relate well to your starting point though. Given:</p>\n\n<pre><code>const char * foo = \"hello\";\n</code></pre>\n\n<p>You have another issue to consider: is that at namespace scope (i.e., outside any function)? If it's at global scope, the compiler probably <em>can't</em> optimize it away, even if it's not used. The problem is pretty simple: if it's outside any function, then some <em>other</em> source file could contain something like <code>extern char const *foo;</code>, and by doing so get access to <code>foo</code>, even though it's not used in the current file. Since the compiler only looks at one source file at a time, it has no way of detecting such a situation.</p>\n\n<p>Depending on how smart it is, the linker (which <em>does</em> look at all the object files at once) may be able to detect that <code>foo</code> is never used, and based on that it could optimize it away.</p>\n\n<p>If this definition is inside a function, then the compiler can detect whether it's used based solely on the content of that function, so we're back to a situation where it can be optimized away much more dependably.</p>\n"}], "owner": {"reputation": 1083, "user_id": 6458245, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/2ec6741905a7fde013a7c33ecf1a370f?s=128&d=identicon&r=PG&f=1", "display_name": "JobHunter69", "link": "https://stackoverflow.com/users/6458245/jobhunter69"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "closed_date": 1478123182, "answer_count": 4, "score": -1, "last_activity_date": 1478122861, "creation_date": 1478121652, "question_id": 40390028, "link": "https://stackoverflow.com/questions/40390028/in-c-does-initializing-a-string-but-not-assigning-it-to-anything-result-in-me", "closed_reason": "Duplicate", "title": "In C++, does initializing a string but not assigning it to anything result in memory usage?", "body": "<p>I'm trying to understand how <code>const char * foo = \"hello\";</code> works under the hood. I interpret it as a string is created, and then a pointer points to it in memory.</p>\n\n<p>So, does this line of code:</p>\n\n<p><code>\"hello\";</code></p>\n\n<p>take any memory?</p>\n"}, {"tags": ["c++", "dll", "shared-libraries", "abi", "libc++"], "answers": [{"comments": [{"owner": {"reputation": 10953, "user_id": 776473, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/dbfcfc0e3c4b2b0baef2383fbc97f687?s=128&d=identicon&r=PG", "display_name": "acm", "link": "https://stackoverflow.com/users/776473/acm"}, "edited": false, "score": 0, "creation_date": 1478184642, "post_id": 40392187, "comment_id": 68059304, "body": "I like that answer fine, and thanks for taking the time to reply. It sounds like we can probably go ahead and re-evaluate whether our cargo-culting of __forceinline is unnecessary and should be removed. It sounds like it might well be. Also, if you are interested in seeing the approach we are taking or providing any feedback, the library in question is libmongocxx: <a href=\"https://github.com/mongodb/mongo-cxx-driver/tree/master\" rel=\"nofollow noreferrer\">github.com/mongodb/mongo-cxx-driver/tree/master</a>"}], "tags": [], "owner": {"reputation": 177852, "user_id": 576911, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2a2941970f141aad669d13375dc57c4f?s=128&d=identicon&r=PG", "display_name": "Howard Hinnant", "link": "https://stackoverflow.com/users/576911/howard-hinnant"}, "is_accepted": true, "score": 4, "last_activity_date": 1478134733, "creation_date": 1478134733, "answer_id": 40392187, "question_id": 40389994, "link": "https://stackoverflow.com/questions/40389994/why-does-libcxx-apply-forceinline-or-the-gcc-equivalent-to-its-already-hidden/40392187#40392187", "title": "Why does libcxx apply __forceinline or the GCC equivalent to its already hidden inline functions?", "body": "<p>I'm probably in the best position to address this as I'm the one who did it.  And you may not like the answer. :-)</p>\n\n<p>When I was creating libc++ my only target was macOS (OS X).  This was way before libc++ was open-sourced.  And my main motivation for forcing inline was to control the ABI of the dylib that would be pushed out with OS releases.  A forced inline function would never appear in a dylib, and thus I could count on it living exclusively in a header (which had a different delivery system than OS releases).</p>\n\n<p>I never considered the additional attribute of \"hidden\" as part of this decision because it was simply an unnecessary complication for me.  I wanted the function to live in a header, and never be put into a dylib and that was that.  So your first bullet is I believe correct.</p>\n\n<p>I am thrilled that libc++ has grown beyond its original scope and I wish you the best in continuing that effort.  I'm happy to supply any additional information I might have to aid you in your goal.</p>\n"}], "owner": {"reputation": 10953, "user_id": 776473, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/dbfcfc0e3c4b2b0baef2383fbc97f687?s=128&d=identicon&r=PG", "display_name": "acm", "link": "https://stackoverflow.com/users/776473/acm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 371, "favorite_count": 0, "accepted_answer_id": 40392187, "answer_count": 1, "score": 8, "last_activity_date": 1478134733, "creation_date": 1478121571, "last_edit_date": 1478122029, "question_id": 40389994, "link": "https://stackoverflow.com/questions/40389994/why-does-libcxx-apply-forceinline-or-the-gcc-equivalent-to-its-already-hidden", "title": "Why does libcxx apply __forceinline or the GCC equivalent to its already hidden inline functions?", "body": "<p>I'd like to understand exactly why the libc++ visibility macro for an inline function uses <code>__forceinline</code> or <code>__attribute__((__always_inline__))</code> as part of the attributes it associates with inline functions.</p>\n\n<p>For background see:</p>\n\n<ul>\n<li><a href=\"https://github.com/llvm-mirror/libcxx/blob/f333beee2ce44299b1ce219371bdef60290ac175/docs/DesignDocs/VisibilityMacros.rst\" rel=\"nofollow noreferrer\" title=\"The libc++ visibility design doc\">The libcxx visibility design document</a></li>\n<li><a href=\"https://github.com/llvm-mirror/libcxx/blob/f333beee2ce44299b1ce219371bdef60290ac175/include/__config#L603-L609\" rel=\"nofollow noreferrer\" title=\"The definition of INLINE_VISIBILITY\">The definition of INLINE_VISIBILITY</a></li>\n</ul>\n\n<p>If these inline functions are going to be marked as <code>__visibility__(\"hidden\")</code> anyway, why is it necessary to additionally force the compiler to inline them?</p>\n\n<p>I've thought about it a bit, and I have a few hypotheses, but none seems entirely satisfactory to me:</p>\n\n<ul>\n<li>It is to ensure that the symbol does not accidentally become part of the ABI. If, while building the library, the compiler chose not to inline the function, it could potentially become an external symbol, and therefore part of the ABI. But wouldn't the <code>hidden</code> attribute be sufficient? Similarly, wouldn't it only be necessary to force inline the function when building the library? Consumers shouldn't care.</li>\n<li>It is to ensure that the function never has a definition, to avoid ODR issues, where the compiler choses not to inline the function in the library itself, and choses not to inline in the function in the code generated by a client of the library, resulting in two different definitions. But isn't that an expected (and accepted) outcome of using <code>visibility(\"hidden\")</code>?</li>\n<li>It is something specific to the design of libc++ as an implementation of the standard library.</li>\n</ul>\n\n<p>I ask this because I'm working on building a C++ library for which I hope to someday standardize an ABI, and I'm using libc++ as a guide. So far, it has worked well, but this issue has caused some head scratching.</p>\n\n<p>In particular, we have had reports of users complaining that MSVC has refused to honor the <code>__forceinline</code> attribute, leading to warnings. Our proposed solution is to have the expansion of our analogue to INLINE_VISIBILITY only include <code>__forceinline</code> (or the GCC equivalent) when building the library, assuming the first explanation above.</p>\n\n<p>However, since we aren't entirely confident that we understand the reasoning behind forcing inline functions to be <code>__forceinline</code> or <code>__attribute__((__always_inline__))</code> in the first place, we are somewhat hesitant to adopt this solution.</p>\n\n<p>Can anyone provide a definitive answer for why libc++ feels the need to force inline its inline functions, even though they are already decorated as having hidden visibility?</p>\n"}, {"tags": ["c++", "compiler-errors", "c-preprocessor", "header-files"], "comments": [{"owner": {"reputation": 1685, "user_id": 6261331, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2uNHq.png?s=128&g=1", "display_name": "Asu", "link": "https://stackoverflow.com/users/6261331/asu"}, "edited": false, "score": 0, "creation_date": 1478121497, "post_id": 40389937, "comment_id": 68031650, "body": "Not that I know of. Suggestion: are you sure you are compiling in the right standard, and that you have those libraries installed?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1478121506, "post_id": 40389937, "comment_id": 68031656, "body": "1) C is not C++ is not C. 2) Your question is not clear. Headers are <b>source</b> code. They are not used in any way at run-time. And <code>#include</code> is the standard way to use external definitions. What other way are you thinking about?"}, {"owner": {"reputation": 4567, "user_id": 1320751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eee0011ba2ca995b31e464fc2e2ad885?s=128&d=identicon&r=PG", "display_name": "Anon Mail", "link": "https://stackoverflow.com/users/1320751/anon-mail"}, "edited": false, "score": 1, "creation_date": 1478121611, "post_id": 40389937, "comment_id": 68031718, "body": "In Visual Studio the is definitely a way to do this - it will include a file(s) in all .cpp file in a project.  It&#39;s one of the preprocessor options."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1478121695, "post_id": 40389937, "comment_id": 68031762, "body": "Be there a way or not. Don&#39;t go that path! You probably break more than you fix. What&#39;s the problem adding the dependencies the way they are meant to be?"}, {"owner": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1478122383, "post_id": 40389937, "comment_id": 68032056, "body": "@Olaf Obviously that you have to touch many source files which you may not want, for example for integrity, because you don&#39;t have write permission on them, because there are too many of them for just experimenting... I understand that the OP asks this not as a best  practice for SW engineering but for a quick test."}, {"owner": {"reputation": 263, "user_id": 2308876, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d611f1f1752dd4e8146bd0703b201196?s=128&d=identicon&r=PG&f=1", "display_name": "Some Java Programmer", "link": "https://stackoverflow.com/users/2308876/some-java-programmer"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1478122583, "post_id": 40389937, "comment_id": 68032168, "body": "@Olaf In this particular situation, I&#39;m attempting to compile a large, vendor-provided codebase. I need to code to compile, but I would like to make as few changes as possible. I agree that using the -include option can lead to obfuscated code, and should be avoided when possible. It&#39;s important to know that it exists, though, in order to understand why certain compilation errors may occur."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1478122822, "post_id": 40389937, "comment_id": 68032249, "body": "@PeterA.Schneider: Wrong question: why are the dependencies missing in the first place? The question is about a work-around for code which is broken by design."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1478122906, "post_id": 40389937, "comment_id": 68032285, "body": "@SomeJavaProgrammer: Kick the vendor where it hurts for providing broken-by-design code. Twice if you pay for it. If they already fail at such basics, I&#39;d suspect there are much more serious problems with that code. (I&#39;m was not always that relentless, but had to learn it the hard way)"}, {"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 0, "creation_date": 1478126635, "post_id": 40389937, "comment_id": 68033807, "body": "My answer has accumulated 3 downvotes. Does anyone know what they&#39;re downvoting for? With just the 1 original downvote, which came immediately, I was sure it was a social downvote, designed to prevent upvotes. It&#39;s common. But 3 downvotes sounds less like purely social, and more like some common misconception out there; after all they&#39;re downvoting simple facts. Does anyone know (or suspect) what it is?"}, {"owner": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "reply_to_user": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 0, "creation_date": 1478136825, "post_id": 40389937, "comment_id": 68036362, "body": "@Cheersandhth.-Alf I wondered about that -- your answer is a superset of mine (and none of the additional information is wrong, afaics). It should get <i>more</i> net votes, not fewer. Maybe more than one person doesn&#39;t like you. Don&#39;t waste time with idiots."}], "answers": [{"comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1478121625, "post_id": 40390001, "comment_id": 68031726, "body": "That&#39;s a really bad idea and defies build-tools."}, {"owner": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1478121689, "post_id": 40390001, "comment_id": 68031759, "body": "@Olaf I have never used it, but I cannot see immediately the validity of either claim. Can you elaborate?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1478121857, "post_id": 40390001, "comment_id": 68031835, "body": "How would e.g. Scons detect the additional dependencies? Let alone if you change dependencies, you have to edit an unexpected file (the build file) instead of the one which is actually is affected (the source code). Much the opposite of the important &quot;least surprise&quot; design principle."}, {"owner": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1478122313, "post_id": 40390001, "comment_id": 68032024, "body": "@Olaf Ah, I see. Yes, dependency analyzers will likely ignore it (unless you use gcc proper for it...) But then, it should be trivial to edit this dependency into SCons since the config files are Python..."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1478122684, "post_id": 40390001, "comment_id": 68032198, "body": "Not sure if gcc will respect incoudes from the command line. Re manually editing: That&#39;s exactly my second issue with that. However you see it: it is a very bad idea and bad design practice."}], "tags": [], "owner": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "is_accepted": false, "score": 2, "last_activity_date": 1478121581, "last_edit_date": 1495541960, "creation_date": 1478121581, "answer_id": 40390001, "question_id": 40389937, "link": "https://stackoverflow.com/questions/40389937/does-c-support-global-headers-at-compile-time/40390001#40390001", "title": "Does C++ Support Global Headers At Compile Time?", "body": "<p>Yes, at least with gcc and compatibles.: Use the <code>-include</code> option. See <a href=\"https://stackoverflow.com/a/3387518/3150802\">https://stackoverflow.com/a/3387518/3150802</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 2, "creation_date": 1478122026, "post_id": 40390003, "comment_id": 68031918, "body": "Anonymous downvoter: please explain your downvote, so that readers may more easily ignore your comments and votes in the future. Thank you."}], "tags": [], "owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "is_accepted": true, "score": 3, "last_activity_date": 1478121588, "creation_date": 1478121588, "answer_id": 40390003, "question_id": 40389937, "link": "https://stackoverflow.com/questions/40389937/does-c-support-global-headers-at-compile-time/40390003#40390003", "title": "Does C++ Support Global Headers At Compile Time?", "body": "<p>The C++ language standard does not support \"global headers\", but individual compilers do.</p>\n\n<p>It's called a <strong>forced include</strong>.</p>\n\n<p>With Visual C++ it's the option <code>/FI</code>, and with g++ it's option <code>-include</code>.</p>\n\n<hr>\n\n<p>With Visual C++, however, the usual way to include common headers is to place those includes in a file called <code>stdafx.h</code>, and include that file in every translation unit, first of all. That's part of Visual C++'s precompiled header support. It's problematic because when it's turned on (and it's on by default in a Visual Studio project) it changes the preprocessing rules so that some standard code may not compile, but it can speed up larger builds considerably.</p>\n"}], "owner": {"reputation": 263, "user_id": 2308876, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d611f1f1752dd4e8146bd0703b201196?s=128&d=identicon&r=PG&f=1", "display_name": "Some Java Programmer", "link": "https://stackoverflow.com/users/2308876/some-java-programmer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 213, "favorite_count": 0, "accepted_answer_id": 40390003, "answer_count": 2, "score": 1, "last_activity_date": 1478121588, "creation_date": 1478121358, "last_edit_date": 1478121415, "question_id": 40389937, "link": "https://stackoverflow.com/questions/40389937/does-c-support-global-headers-at-compile-time", "title": "Does C++ Support Global Headers At Compile Time?", "body": "<p>When attempting to compile an externally provided C++ codebase, I've encountered a confusing problem:</p>\n\n<p>Several of the header files are missing <code>#include &lt;MyLibrary.h&gt;</code>, where MyLibrary is an obvious dependency that is simply missing, and preventing compilation. </p>\n\n<p>My question is:\nWhen compiling C++ code, is there a way to automatically include a dependency header file, without needing to #include it in each of the .h/.cpp files where it is required? In other words, a way to provide the C++ preprocessor a list of header files to automatically include when compiling all of the source code?</p>\n\n<p>I understand that this is probably a very bad idea, but I'm trying to determine if the code I've been provided is simply broken, or if there's some way it could be compiled without manually fixing each file with missing dependencies.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 8289, "user_id": 391806, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/88a2ea78dadbdaf73e1033fe7cbdeb73?s=128&d=identicon&r=PG", "display_name": "Dale Wilson", "link": "https://stackoverflow.com/users/391806/dale-wilson"}, "edited": false, "score": 3, "creation_date": 1478121435, "post_id": 40389935, "comment_id": 68031619, "body": "you need to study c++ syntax -- in particular the comma operator doesn&#39;t do what you think it does."}, {"owner": {"reputation": 8087, "user_id": 733637, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/444bbb295cc6185a5464e2250c1a35de?s=128&d=identicon&r=PG&f=1", "display_name": "CiaPan", "link": "https://stackoverflow.com/users/733637/ciapan"}, "edited": false, "score": 0, "creation_date": 1478121500, "post_id": 40389935, "comment_id": 68031653, "body": "Of course it works! However, it may work in a way different from what you expected. How do you expect the program to work?"}, {"owner": {"reputation": 332, "user_id": 3698909, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0271c301dac5048d98ba662da9c44871?s=128&d=identicon&r=PG&f=1", "display_name": "DaveB", "link": "https://stackoverflow.com/users/3698909/daveb"}, "edited": false, "score": 1, "creation_date": 1478121684, "post_id": 40389935, "comment_id": 68031756, "body": "works for me, what output are you expecting?"}, {"owner": {"reputation": 8289, "user_id": 391806, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/88a2ea78dadbdaf73e1033fe7cbdeb73?s=128&d=identicon&r=PG", "display_name": "Dale Wilson", "link": "https://stackoverflow.com/users/391806/dale-wilson"}, "reply_to_user": {"reputation": 332, "user_id": 3698909, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0271c301dac5048d98ba662da9c44871?s=128&d=identicon&r=PG&f=1", "display_name": "DaveB", "link": "https://stackoverflow.com/users/3698909/daveb"}, "edited": false, "score": 0, "creation_date": 1478121748, "post_id": 40389935, "comment_id": 68031789, "body": "@DaveB To be pedantic, it doesn&#39;t work for you since as written it contains undefined behavior.  the <code>a</code> variable is uninitialized."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1478121814, "post_id": 40389935, "comment_id": 68031819, "body": "Because it is equivalent to <code>for(b=0; b != 55; b++)</code>."}, {"owner": {"reputation": 332, "user_id": 3698909, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0271c301dac5048d98ba662da9c44871?s=128&d=identicon&r=PG&f=1", "display_name": "DaveB", "link": "https://stackoverflow.com/users/3698909/daveb"}, "reply_to_user": {"reputation": 8289, "user_id": 391806, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/88a2ea78dadbdaf73e1033fe7cbdeb73?s=128&d=identicon&r=PG", "display_name": "Dale Wilson", "link": "https://stackoverflow.com/users/391806/dale-wilson"}, "edited": false, "score": 1, "creation_date": 1478122033, "post_id": 40389935, "comment_id": 68031922, "body": "@DaleWilson good point, I should have said I get the output I expected."}, {"owner": {"reputation": 5465, "user_id": 398630, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/8ac777cca059f2e12510475f85dcc19a?s=128&d=identicon&r=PG", "display_name": "BrainSlugs83", "link": "https://stackoverflow.com/users/398630/brainslugs83"}, "edited": false, "score": 0, "creation_date": 1478122387, "post_id": 40389935, "comment_id": 68032062, "body": "Seems the OP needs to define &quot;doesn&#39;t work&quot; -- not really clear what is expected here; are they expecting the <code>a</code> variable to magically define itself? -- to magically increment itself? -- (Because as defined, the program says that <code>a</code> outputs garbage, and that&#39;s exactly what it does, and it&#39;s exactly what you would expect it to do -- so, the OP will need to define their expected behavior a little better.)"}, {"owner": {"reputation": 63, "user_id": 3124292, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/262bfc556ba01ca43bd38556a516b487?s=128&d=identicon&r=PG&f=1", "display_name": "Semaphore", "link": "https://stackoverflow.com/users/3124292/semaphore"}, "edited": false, "score": 0, "creation_date": 1478123038, "post_id": 40389935, "comment_id": 68032357, "body": "I expected to see both variables to be incremented."}, {"owner": {"reputation": 63, "user_id": 3124292, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/262bfc556ba01ca43bd38556a516b487?s=128&d=identicon&r=PG&f=1", "display_name": "Semaphore", "link": "https://stackoverflow.com/users/3124292/semaphore"}, "edited": false, "score": 0, "creation_date": 1478123612, "post_id": 40389935, "comment_id": 68032616, "body": "I changed it to be more specific."}, {"owner": {"reputation": 63, "user_id": 3124292, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/262bfc556ba01ca43bd38556a516b487?s=128&d=identicon&r=PG&f=1", "display_name": "Semaphore", "link": "https://stackoverflow.com/users/3124292/semaphore"}, "reply_to_user": {"reputation": 5465, "user_id": 398630, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/8ac777cca059f2e12510475f85dcc19a?s=128&d=identicon&r=PG", "display_name": "BrainSlugs83", "link": "https://stackoverflow.com/users/398630/brainslugs83"}, "edited": false, "score": 0, "creation_date": 1478123822, "post_id": 40389935, "comment_id": 68032700, "body": "@BrainSlugs83 Respectively, If I understood it, I wouldn&#39;t need to have asked it, the previous comments covered what needed to be asked and to me it seems like that was a bit much."}], "answers": [{"tags": [], "owner": {"reputation": 8289, "user_id": 391806, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/88a2ea78dadbdaf73e1033fe7cbdeb73?s=128&d=identicon&r=PG", "display_name": "Dale Wilson", "link": "https://stackoverflow.com/users/391806/dale-wilson"}, "is_accepted": true, "score": 5, "last_activity_date": 1478183868, "last_edit_date": 1478183868, "creation_date": 1478121581, "answer_id": 40390000, "question_id": 40389935, "link": "https://stackoverflow.com/questions/40389935/unexpected-behaviour-in-a-for-loop/40390000#40390000", "title": "Unexpected behaviour in a for loop", "body": "<p>The comma operator says execute the expression on the left then execute the expression on the right:</p>\n\n<pre><code>  a, b=0\n</code></pre>\n\n<p>first executes <code>a</code> which does nothing, then it executes <code>b=0</code> which assigns zero to b.</p>\n\n<p>Why does the comma operator exist?  The comma operator can be useful when the expressions have side effects.  </p>\n\n<p>It also serves a sequence point which tell the compiler \"everything on the left must be complete before anything on the right happens.  This constrains the optimizations allowed by the compiler, so for example a += 1, b = a + c[a] will always add one to a before using it as an index.  Something like b = ++a + c[a] is undefined because the compiler can increment a before or after it uses it as an index.</p>\n"}], "owner": {"reputation": 63, "user_id": 3124292, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/262bfc556ba01ca43bd38556a516b487?s=128&d=identicon&r=PG&f=1", "display_name": "Semaphore", "link": "https://stackoverflow.com/users/3124292/semaphore"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "closed_date": 1478122186, "accepted_answer_id": 40390000, "answer_count": 1, "score": -3, "last_activity_date": 1573270056, "creation_date": 1478121345, "last_edit_date": 1573270056, "question_id": 40389935, "link": "https://stackoverflow.com/questions/40389935/unexpected-behaviour-in-a-for-loop", "closed_reason": "Duplicate", "title": "Unexpected behaviour in a for loop", "body": "<p>This compiles and runs, but produces garbage values for \"a\". Why doesn't \"a\" increment like \"b\"? Why is it producing garbage?</p>\n\n<pre><code>for(a,b=0; a,b != 55; a,b++)\n{\n    //outputs garbage\n    std::cout &lt;&lt; \"a = \" &lt;&lt; a &lt;&lt; std::endl;\n    //outputs expected results \n    std::cout &lt;&lt; \"b = \" &lt;&lt; b &lt;&lt; std::endl;\n}\n</code></pre>\n"}, {"tags": ["c++", "casting", "reference"], "comments": [{"owner": {"reputation": 15670, "user_id": 10468, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/f21uW.jpg?s=128&g=1", "display_name": "DarenW", "link": "https://stackoverflow.com/users/10468/darenw"}, "edited": false, "score": 0, "creation_date": 1478121399, "post_id": 40389933, "comment_id": 68031604, "body": "Yee, this is ugly formatting.  Will fix it when i get home."}, {"owner": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 3, "creation_date": 1478121579, "post_id": 40389933, "comment_id": 68031703, "body": "You can use <code>reinterpret_cast</code> if you&#39;re willing to risk undefined behavior."}, {"owner": {"reputation": 58, "user_id": 3419129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58f0f32b6ddc74ee19995d9424a604bf?s=128&d=identicon&r=PG&f=1", "display_name": "a_caban", "link": "https://stackoverflow.com/users/3419129/a-caban"}, "edited": false, "score": 1, "creation_date": 1478123327, "post_id": 40389933, "comment_id": 68032487, "body": "As an aside, consider templates if your code can afford it: <code>template &lt;typename T&gt; void blarf(std::vector&lt;T&gt; &amp;);</code>"}], "answers": [{"comments": [{"owner": {"reputation": 107, "user_id": 7201994, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/683680b67a1c5139f1803293cbedc585?s=128&d=identicon&r=PG&f=1", "display_name": "Catriel", "link": "https://stackoverflow.com/users/7201994/catriel"}, "edited": false, "score": 1, "creation_date": 1614269597, "post_id": 40390098, "comment_id": 117340120, "body": "or simply reinterpet_cast&lt;std::vector&lt;long&gt;&amp;&gt; (vec)"}], "tags": [], "owner": {"reputation": 1685, "user_id": 6261331, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2uNHq.png?s=128&g=1", "display_name": "Asu", "link": "https://stackoverflow.com/users/6261331/asu"}, "is_accepted": true, "score": 9, "last_activity_date": 1478122543, "last_edit_date": 1478122543, "creation_date": 1478121991, "answer_id": 40390098, "question_id": 40389933, "link": "https://stackoverflow.com/questions/40389933/casting-vectorint-to-vectorlong-when-they-are-the-same-size/40390098#40390098", "title": "casting vector&lt;int&gt; to vector&lt;long&gt; when they are the same size?", "body": "<p>No, you can't. <code>int</code> and <code>long</code> will stay different types, this would break strict aliasing rules.</p>\n\n<p>You can create a <code>vector&lt;long&gt;</code> from your <code>vector&lt;int&gt;</code> very easily:</p>\n\n<pre><code>std::vector&lt;int&gt; vec{5, 3, 7, 9};\nstd::vector&lt;long&gt; veclong(begin(vec), end(vec));\n</code></pre>\n\n<p>This will copy <code>vec</code> into <code>veclong</code>, with the constructor of <code>vector</code> that takes two iterators.</p>\n\n<p>If you want to do it the bad way (i.e. that exhibits undefined behavior), then feel free to use:</p>\n\n<pre><code>*reinterpret_cast&lt;std::vector&lt;long&gt;*&gt;(&amp;vec)\n</code></pre>\n"}], "owner": {"reputation": 15670, "user_id": 10468, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/f21uW.jpg?s=128&g=1", "display_name": "DarenW", "link": "https://stackoverflow.com/users/10468/darenw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4041, "favorite_count": 0, "accepted_answer_id": 40390098, "answer_count": 1, "score": 2, "last_activity_date": 1478122543, "creation_date": 1478121338, "last_edit_date": 1478121517, "question_id": 40389933, "link": "https://stackoverflow.com/questions/40389933/casting-vectorint-to-vectorlong-when-they-are-the-same-size", "title": "casting vector&lt;int&gt; to vector&lt;long&gt; when they are the same size?", "body": "<p>I have a function taking a reference to a vector of longs</p>\n\n<pre><code>Void blarf(std::vector&lt;long&gt;&amp;);\n</code></pre>\n\n<p>This is given and shouldn't be modified.   Deep into xyz.cpp is an attempt to feed <code>blarf()</code> a <code>vector</code> of <code>int</code>s:</p>\n\n<pre><code>std::vector&lt;int&gt;  gooddata;\n. . . \nblarf(gooddata);\n</code></pre>\n\n<p>In my case and all cases for this software, <code>int</code> and <code>long</code> are the same size.  Of course I can't change the definition of <code>gooddata</code> either.</p>\n\n<p>What kind of typecast is appropriate here?  I tried <code>dynamic_cast</code> but that's only for polymorphic class conversion.  <code>static_cast</code> no worky either.  I'm no genius at c++ type casts.</p>\n"}, {"tags": ["c++", "realloc"], "comments": [{"owner": {"reputation": 1655, "user_id": 6945651, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WXXfN.jpg?s=128&g=1", "display_name": "J. Piquard", "link": "https://stackoverflow.com/users/6945651/j-piquard"}, "edited": false, "score": 2, "creation_date": 1478122834, "post_id": 40389878, "comment_id": 68032257, "body": "The <code>realloc()</code> function could be apply only to a still allocated array with the function as &#39;malloc()` or <code>calloc()</code>. The variable <code>kE</code> is a integer allocated on the stack."}], "answers": [{"comments": [{"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 1, "creation_date": 1478122753, "post_id": 40390238, "comment_id": 68032227, "body": "Casting from <code>malloc</code> and <code>realloc</code> is <i>required</i> in C++. I think you may be thinking of <code>C</code>, where it is both <i>not</i> required, <a href=\"https://stackoverflow.com/questions/605845/do-i-cast-the-result-of-malloc\">and strongly discouraged</a>"}], "tags": [], "owner": {"reputation": 488, "user_id": 6344366, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/8EB8C.jpg?s=128&g=1", "display_name": "Cherkesgiller", "link": "https://stackoverflow.com/users/6344366/cherkesgiller"}, "is_accepted": false, "score": -1, "last_activity_date": 1478362259, "last_edit_date": 1478362259, "creation_date": 1478122586, "answer_id": 40390238, "question_id": 40389878, "link": "https://stackoverflow.com/questions/40389878/how-to-use-realloc-in-cpp/40390238#40390238", "title": "How to use realloc in cpp", "body": "<p>Try without do it like this :</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main(void)\n{\n    int *pa = malloc(10 * sizeof *pa); // allocate an array of 10 int\n    if(pa) {\n        printf(\"%zu bytes allocated. Storing ints: \", 10*sizeof(int));\n        for(int n = 0; n &lt; 10; ++n)\n            printf(\"%d \", pa[n] = n);\n    }\n\n    int *pb = realloc(pa, 1000000 * sizeof *pb); // reallocate array to a larger size\n    if(pb) {\n        printf(\"\\n%zu bytes allocated, first 10 ints are: \", 1000000*sizeof(int));\n        for(int n = 0; n &lt; 10; ++n)\n            printf(\"%d \", pb[n]); // show the array\n        free(pb);\n    } else { // if realloc failed, the original pointer needs to be freed\n        free(pa);\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "is_accepted": false, "score": 1, "last_activity_date": 1478343036, "creation_date": 1478343036, "answer_id": 40437339, "question_id": 40389878, "link": "https://stackoverflow.com/questions/40389878/how-to-use-realloc-in-cpp/40437339#40437339", "title": "How to use realloc in cpp", "body": "<p>You are passing <code>int kE</code> as the first parameter here:</p>\n\n<pre><code>realloc(kE , sizeof(int))\n</code></pre>\n\n<p>However, <a href=\"https://linux.die.net/man/3/realloc\" rel=\"nofollow noreferrer\"><code>realloc</code> is declared like this</a>:</p>\n\n<pre><code>void *realloc(void *ptr, size_t size);\n</code></pre>\n\n<p>In other words it expects a pointer! Please read the manual page I link to above to get more details. In short, you probably want something like this for the error line:</p>\n\n<pre><code>if (!(dec = (int *)realloc(dec , sizeof(int))))\n</code></pre>\n\n<p>Note that this is slightly bad, because if <code>realloc</code> fails, you lose the original value of <code>dec</code>, causing a memory leak. It doesn't really matter if you are going to exit on error, but otherwise you should keep the original value of <code>dec</code>, so you can handle error more gracefully than just exiting.</p>\n\n<p>Another note, you <em>really</em> should use C++ container classes like <code>vector</code> instead of fooling around with C memory allocation functions.</p>\n\n<p>There are probably other issues in your code, but this answer doesn't try to be code review, but just explain why you get the error you get.</p>\n"}], "owner": {"reputation": 37, "user_id": 2648464, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62bf65e0eea9ed780e68910d5b5d6a64?s=128&d=identicon&r=PG", "display_name": "Amirhossein", "link": "https://stackoverflow.com/users/2648464/amirhossein"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 129, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1478368890, "creation_date": 1478121166, "last_edit_date": 1478368890, "question_id": 40389878, "link": "https://stackoverflow.com/questions/40389878/how-to-use-realloc-in-cpp", "title": "How to use realloc in cpp", "body": "<p>I have following cpp code </p>\n\n<pre><code>#include &lt;stdio.h&gt;         /*utiliser printf*/\n#include &lt;fcntl.h&gt;\n#include &lt;math.h&gt;          /*utiliser pour les formules de math*/\n#include &lt;malloc.h&gt;\n#include &lt;iostream.h&gt;\n#include &lt;assert.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;time.h&gt;\n\n  /* Le type nombre complexe */\ntypedef struct {\n  double Preel;\n  double Pimaginaire;\n} COMPLEXE;\n\n#define ALLOC_ERROR 1\n\nvoid indienne(double *MatE, int tE, int nE, double *SortieExp, double *Tempbis)\n{\n  double *TempE=NULL, *SortieE=NULL;\n  int *dec=NULL;\n  int i, tampon, kE;\n  kE=(int)(log(nE)/log(2));\n  if(nE==8)\n    kE=3;\n\n  /* ALLOCATION DES MATRICES*/\n\n  if (!(TempE = (double *)calloc(tE * tE, sizeof(double))))\n    exit(ALLOC_ERROR);\n\n  printf(\"check1  te=%d, nE=%d\",tE,nE);\n\n  if (!(dec = (int *)realloc(kE , sizeof(int))))\n    exit(ALLOC_ERROR);\n\n  if (!(SortieE = (double *)calloc(tE * tE, sizeof(double))))\n    exit(ALLOC_ERROR);\n\n  printf(\"check2  te=%d\",tE);\n  memcpy(TempE,MatE,tE * tE * sizeof(double));\n\n  for (i=0; i&lt;tE; i++)\n    *(Tempbis+(tE * i) + i) = 1.0;\n\n  if (nE==1) \n  {\n    memcpy(SortieExp, MatE, tE*tE*sizeof(double));\n  }\n  else\n  {\n    printf(\"kE=%d, nE=%d\\n\", kE, nE);\n    if (nE%2==0) \n      decompose(kE, nE,dec);\n    else \n      decompose(kE, nE-1, dec);\n\n    for (i=0; i&lt;kE; i++)\n    {\n      carre(TempE, tE, SortieE);\n      memcpy(TempE, SortieE, tE*tE*sizeof(double));\n      tampon=*(dec+i);\n\n      if (tampon==1)\n      {\n        mult(Tempbis, tE, tE, SortieE, tE, tE, SortieExp);\n        memcpy(Tempbis, SortieExp, tE*tE*sizeof(double));\n      }\n    }\n    if (nE%2 !=0)\n    {\n      memcpy(Tempbis, SortieExp, tE*tE*sizeof(double));\n      mult(Tempbis, tE, tE, MatE, tE, tE, SortieExp);\n    }\n  }\n  free(TempE);\n  free(SortieE);\n  free(dec);\n}\n</code></pre>\n\n<p>When I compile this code following error occurres</p>\n\n<blockquote>\n  <p>invalid conversion from 'int' to 'void*' [-fpermissive]| </p>\n</blockquote>\n\n<p>that is about following line of code </p>\n\n<pre><code>if (!(dec = (int *)realloc(kE , sizeof(int))))\n</code></pre>\n\n<p>How can I remove this error?</p>\n"}, {"tags": ["c++", "stl"], "comments": [{"owner": {"reputation": 1685, "user_id": 6261331, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2uNHq.png?s=128&g=1", "display_name": "Asu", "link": "https://stackoverflow.com/users/6261331/asu"}, "edited": false, "score": 0, "creation_date": 1478121178, "post_id": 40389854, "comment_id": 68031485, "body": "<a href=\"http://en.cppreference.com/w/cpp/algorithm/transform\" rel=\"nofollow noreferrer\"><code>std::transform</code></a>?"}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 2, "creation_date": 1478121374, "post_id": 40389854, "comment_id": 68031593, "body": "Why would there be an algorithm for doing something so specific?"}], "answers": [{"tags": [], "owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "is_accepted": false, "score": 2, "last_activity_date": 1478121577, "creation_date": 1478121577, "answer_id": 40389999, "question_id": 40389854, "link": "https://stackoverflow.com/questions/40389854/equivalent-of-this-in-stl/40389999#40389999", "title": "equivalent of this in STL", "body": "<p>This should work:</p>\n\n<pre><code>inline std::string inlineConvertPackFilename(std::string name)\n{\n    std::transform( name.begin(), name.end(), name.begin(), []( char c ) {\n        if( c == '\\\\' ) return '/';\n        return tolower(c);\n    } );\n    return name;\n}\n</code></pre>\n\n<p>usage:</p>\n\n<pre><code>auto filename = inlineConvertPackFilename( tmpFilename );\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 10380, "user_id": 8877, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZfOB5.png?s=128&g=1", "display_name": "&#208;\u0430n", "link": "https://stackoverflow.com/users/8877/%c3%90%d0%b0n"}, "is_accepted": true, "score": 0, "last_activity_date": 1478121837, "creation_date": 1478121837, "answer_id": 40390067, "question_id": 40389854, "link": "https://stackoverflow.com/questions/40389854/equivalent-of-this-in-stl/40390067#40390067", "title": "equivalent of this in STL", "body": "<p>This uses <code>std::for_each()</code> because you asked for STL:</p>\n\n<pre><code>#include &lt;string.h&gt;\n#include &lt;string&gt;\n#include &lt;algorithm&gt;\n\nvoid inlineConvertPackFilename(std::string&amp; name)\n{\n    std::for_each(name.begin(), name.end(), [](auto&amp; c) {\n        if (c == '\\\\')\n        {\n            c = '/';\n        }\n        else\n        {\n            c = tolower(c);\n        }\n    });\n}\n\n\nint main()\n{\n    static std::string filename(\"C:\\\\FOO\\\\bar\\\\Baz.txt\");\n    inlineConvertPackFilename(filename);\n    return 0;\n}\n</code></pre>\n\n<p>But that's really unnecessary as you can use a range <code>for</code> instead:</p>\n\n<pre><code>void inlineConvertPackFilename(std::string&amp; name)\n{\n    for (auto&amp; c : name)\n    {\n        if (c == '\\\\')\n        {\n            c = '/';\n        }\n        else\n        {\n            c = tolower(c);\n        }\n    }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 1, "creation_date": 1478124961, "post_id": 40390221, "comment_id": 68033180, "body": "Another (minor) drawback is that this approach makes two passes through the input string, while the original code made only one. So it&#39;s slightly slower."}], "tags": [], "owner": {"reputation": 173, "user_id": 7106582, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/578159e9aea5266d81950ee3b83cad9e?s=128&d=identicon&r=PG&f=1", "display_name": "SpinyNormam", "link": "https://stackoverflow.com/users/7106582/spinynormam"}, "is_accepted": false, "score": 1, "last_activity_date": 1478122492, "creation_date": 1478122492, "answer_id": 40390221, "question_id": 40389854, "link": "https://stackoverflow.com/questions/40389854/equivalent-of-this-in-stl/40390221#40390221", "title": "equivalent of this in STL", "body": "<p>You can do it like this:</p>\n\n<pre><code>#include &lt;algorithm&gt;\n\nvoid convert(std::string &amp;name)\n{\n  std::replace(name.begin(), name.end(), '\\\\', '/');\n\n  std::transform(name.begin(), name.end(), name.begin(), ::tolower);\n}\n</code></pre>\n\n<p>The trouble is that std::replace() only works for 1:1 replacements (e.g. replace one character by another character). It's OK for your use, but if you need to do a more general multi-character substring replacement, you'd have to roll your own with string::find() and string::replace().</p>\n"}], "owner": {"reputation": 3, "user_id": 6686334, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8ed3f628358be42ad2daa33020c6557?s=128&d=identicon&r=PG&f=1", "display_name": "fraky", "link": "https://stackoverflow.com/users/6686334/fraky"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "closed_date": 1478158696, "accepted_answer_id": 40390067, "answer_count": 3, "score": -5, "last_activity_date": 1478122492, "creation_date": 1478121050, "last_edit_date": 1478121602, "question_id": 40389854, "link": "https://stackoverflow.com/questions/40389854/equivalent-of-this-in-stl", "closed_reason": "Needs more focus", "title": "equivalent of this in STL", "body": "<p>Give the following code </p>\n\n<pre><code>inline void inlineConvertPackFilename(char *name)\n{\n    while(*name)\n    {\n        if(*name == '\\\\')\n        {\n            *name = '/';\n        }\n        else\n        {\n            *name = (int) tolower(*name);\n        }\n\n        name++;\n    }\n}\n</code></pre>\n\n<p>Question is simple, is exist intro <code>STL</code> any equivalnet of this function ?</p>\n\n<p>Usage is :</p>\n\n<pre><code>static char filename[MAX_PATH + 1];\ninlineConvertPackFilename(filename);\n</code></pre>\n\n<p>Yes i know that is an <code>C</code> code but i want the equivalent in c++.</p>\n"}, {"tags": ["c++", "iterator", "compiler-optimization"], "comments": [{"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 1, "creation_date": 1478121225, "post_id": 40389811, "comment_id": 68031507, "body": "There&#39;s no way to know with just the code provided. Can we see what the update code looks like?"}, {"owner": {"reputation": 231, "user_id": 7028009, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/349b6027c9173c93af13079fbdc5238d?s=128&d=identicon&r=PG&f=1", "display_name": "dot dot dot", "link": "https://stackoverflow.com/users/7028009/dot-dot-dot"}, "reply_to_user": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1478121352, "post_id": 40389811, "comment_id": 68031579, "body": "Something like <code>chunk_.fake_index_ += 8*sizeof(int);</code> for every <code>++</code> operation of the iterator."}, {"owner": {"reputation": 231, "user_id": 7028009, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/349b6027c9173c93af13079fbdc5238d?s=128&d=identicon&r=PG&f=1", "display_name": "dot dot dot", "link": "https://stackoverflow.com/users/7028009/dot-dot-dot"}, "reply_to_user": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 1, "creation_date": 1478122400, "post_id": 40389811, "comment_id": 68032069, "body": "if there is no answer, i guess i will just go ahead and write the test code. check it in gcc god bolt, and then see if I should write the actual code."}], "owner": {"reputation": 231, "user_id": 7028009, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/349b6027c9173c93af13079fbdc5238d?s=128&d=identicon&r=PG&f=1", "display_name": "dot dot dot", "link": "https://stackoverflow.com/users/7028009/dot-dot-dot"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 876, "favorite_count": 0, "answer_count": 0, "score": 4, "last_activity_date": 1478125041, "creation_date": 1478120859, "last_edit_date": 1478125041, "question_id": 40389811, "link": "https://stackoverflow.com/questions/40389811/range-based-for-loop-index", "title": "Range based for loop index", "body": "<p>A custom iterator on a std::vector returns an object of the following class:</p>\n\n<pre><code>class chunk {\npublic:\n    int    value_;\n    size_t fake_index_;\n};\n</code></pre>\n\n<p>The iterator updates both the <code>fake_index_</code> and <code>value_</code>.</p>\n\n<p>After that I create a range class with the iterator. Then in a range base for loop over the range class, I only use the <code>value_</code>, but not <code>fake_index_</code>.</p>\n\n<p>Does that means the compiler will optimize out the iterator's update of <code>fake_index_</code> ?</p>\n\n<p>Test Code (with all the iterator stuff...)</p>\n\n<pre><code>#include &lt;vector&gt;\n#include &lt;iterator&gt;\n\nclass Iterator;\n\nclass Chunk {\n\npublic:\n    int value_;\n    int base_bit_index_;\n    int real_index_;\n    std::vector&lt;int&gt;&amp; data_;\n    Chunk (std::vector&lt;int&gt;&amp; data, size_t real_index)\n            : data_{data}\n    {\n        base_bit_index_ = real_index*sizeof(int);\n        real_index_ = real_index;\n        value_ = data[real_index_];\n    }\n    int value() { return value_; }\nprivate:\n    void increment_index() {\n        ++real_index_;\n        base_bit_index_ += sizeof(int);\n        value_ = data_[real_index_];\n    }\n    friend class Iterator;\n};\n\nclass Iterator : public std::iterator&lt;std::input_iterator_tag, int&gt;\n{\nprivate:\n    Chunk chunk_;\npublic:\n    Iterator(Chunk chunk) :chunk_(chunk) {}\n    Iterator(const Iterator&amp; mit) : chunk_(mit.chunk_) {}\n    Iterator&amp; operator++() {\n        chunk_.increment_index();\n        return *this;\n    }\n    Iterator operator++(int) {Iterator tmp(*this); operator++(); return tmp;}\n    bool operator==(const Iterator&amp; rhs)\n    {\n        return chunk_.real_index_== rhs.chunk_.real_index_;\n    }\n    bool operator!=(const Iterator&amp; rhs)\n    {\n        return !(operator==(rhs));\n    }\n    Chunk&amp; operator*() {return chunk_;}\n};\nclass Range\n{\nprivate:\n    std::vector&lt;int&gt;&amp; data_;\npublic:\n    Range(std::vector&lt;int&gt;&amp; data)\n        : data_{data}\n    {\n    }\n    Iterator begin()\n    {\n        Chunk chunk(data_, 0);\n        Iterator tmp(chunk);\n        return tmp;\n    }\n    Iterator end()\n    {\n        Chunk chunk(data_, data_.size());\n        Iterator tmp(chunk);\n        return tmp;\n    }\n};\nint main()\n{\n    std::vector&lt;int&gt; v1;\n    v1.resize(100);\n    std::vector&lt;int&gt; v2;\n    Range X(v1);\n    for (auto chunk : X) {\n        v2.push_back(chunk.real_index_);\n    }\n}\n</code></pre>\n\n<p><a href=\"https://godbolt.org/#z:OYLghAFBqd5QCxAYwPYFsAOBLANgUwCcAabECNLPIkYANgCZiAzPAFyIGdyAjEAcgAM/YpXT4AdmwDyE3AE8Bw4gBNshfMjbYAbvm5CR2KflxL%2BASmKpM21BIMBaacwCGnNpeJn%2BAVhES5tYCAKQMAMwAjADUAO7YbAjRAB4AHHSOdAAs0cDIyNF0AHQMImzmFlYA1iC%2Bgt4CWQFBqAIi3PXlhlZwsEhoKvgAompsqCRkEABWIJHWttj23BSouKgAroTYnPgAgpzoQZQ4BLIAwgiuEsD4FcScG4TIt/xh4cbIuOuD0SHhZ3otOM/kMQoJdm8Pl8fn8zgkiK4xoQQWCIREod98L9/osPBpXOgUeDPu5ONEAJIcQiI4HhABCqNRJM4ZIu6wkVV%2BAHYGeDUZh1jxcNhkCBUdEJdFjGxojpXF98AB9P683aSqVSaI8dxKngJRXGQbJZX08WS6XRfG4A0SI0m1XqjwqEAgQFI2HSlEMOjRFSI1z2s0Stkc6IQJ0ut20uFSL0%2Bv1sVzEaKcbAALyVMqtNqNFiD6oLIF9/uVPITrhCXIAIvnKw6CxLtTtFXq2Dn8MbsVXLfh5e3kgAqVMZ1DMCDSvOm8ENiXZw0dxVdnt9%2BfJFX59VyhWLv7d8shXx0ue2hcHmtTtWSys16fmzVb9b4CAWbl0ntsTYSWXyx/27k33ZMC2OUODFW8JR0VBsBUDVkA0cQpH7Z9Xw3K8GAZdDjztddwILJtdX1Vcd3Q3cU3TfBR3HKRJ3rBsHyVJdy2VQ8sNPXxz1o/982YLZJBg5kyUpBF3Qva8cIhYlcFJCkqRpQhoiLAUhRFFM2GdEB4WpESzgjDSJAFNtNLkxVE2AZNPXCUE%2BR5flgMRW58xDTlkAQdkqkDcElOFUV8yErTxggJzohctyXxQVyOUVCgIqqF86zE3C/LklYHBlJL3W9aJ0ASMLgpiqLsrYIoQsiuKbOrXzZIyn0bGE4ESPQ5D4tw9USvcooPngyRDJPZJn3Emd30/aIB0SbYBqvCrEqq8Zolq/zkQaukqLYMq6XS2a2CwCBRoQbYaLmzA6sWjDloOjQP0IL8tswdcpsvRtUFWQ7jt3XcUo8GTXsywgEE4PNcOah6Cwu4a2sVIpWONN7wm7X7OGK/LId7a0iImiUEuBngntwF6FrAMB3rQVKvoWsIfXhgHgaBwbQau6ICYgea5JhqsIEpmja3u9UnPJvG5IHJqeTpr9wbugCxIvATogAJSuG5GRszy7NA/NdKjZEcVjSy%2BaY8SvJFMDgbl64n3VzRtIs0FMvLKnBqLPWy39TH1RpyaAPVDb5J4fBgGMfrAaV4GeZivK3IgJjk0ETmWslL3ohu6LQvRkH8Eu66sBTl245m%2BS%2BID6mg8GoK2ojktkyYophyfSoU893OE%2B2tqY%2BDyURcb26L1d%2B7JdVC10Fcf2qbdiVzaBTWYzYEFZUiFOdEiZHq4gSJBGjlOx8t7WhllBgU5Nm5ogADQgeeW/VZhZogVx1jGMPQyLQ%2B1tQiCGCKAVOAQFtXGQKok45ZGVy9UVGfd2isqxeB8P4YggR%2BCRBEK0fgZwwinRTI8Z4vwIhwOIF0YQlRiA1DqA0fgTRoEtDaPcEAnQKhWB8KUUhhhgj8DKNQ4gehCCpnsCALIQA\" rel=\"nofollow noreferrer\">gcc godbolt</a></p>\n\n<p>Test Code (without all the iterator stuff)</p>\n\n<pre><code>#include &lt;vector&gt;\n#include &lt;iostream&gt;\nint main()\n{\n    std::vector&lt;int&gt; v2;\n    for (size_t i = 0; i &lt; 100; ++i) {\n        v2.push_back(i);\n        // std::cout&lt;&lt;i&lt;&lt;\"\\n\";\n    }\n}\n</code></pre>\n\n<p><a href=\"https://godbolt.org/#g:!((g:!((g:!((h:compiler,i:(compiler:g62,filters:(b:&#39;0&#39;,commentOnly:&#39;0&#39;,directives:&#39;0&#39;,intel:&#39;0&#39;),options:&#39;-Ofast&#39;),l:&#39;5&#39;,n:&#39;0&#39;,o:&#39;%231+with+x86-64+gcc+6.2&#39;,t:&#39;0&#39;)),k:50,l:&#39;4&#39;,n:&#39;0&#39;,o:&#39;&#39;,s:0,t:&#39;0&#39;),(g:!((h:codeEditor,i:(j:1,options:(colouriseAsm:&#39;0&#39;,compileOnChange:&#39;0&#39;),source:&#39;%23include+%3Cvector%3E%0A%23include+%3Ciostream%3E%0A%0Aint+main()%0A%7B%0A++++std::vector%3Cint%3E+v2%3B%0A++++for+(size_t+i+%3D+0%3B+i+%3C+100%3B+%2B%2Bi)+%7B%0A++++++++v2.push_back(i)%3B%0A++++%7D%0A%7D%0A&#39;),l:&#39;5&#39;,n:&#39;1&#39;,o:&#39;C%2B%2B+source+%231&#39;,t:&#39;0&#39;)),k:50,l:&#39;4&#39;,n:&#39;0&#39;,o:&#39;&#39;,s:0,t:&#39;0&#39;)),l:&#39;2&#39;,n:&#39;0&#39;,o:&#39;&#39;,t:&#39;0&#39;)),version:4\" rel=\"nofollow noreferrer\">gcc godbolt</a></p>\n\n<p>My first impression: Looks like the iterator sucks horribly anyway.</p>\n"}, {"tags": ["c++", "rvalue"], "comments": [{"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1478120924, "post_id": 40389782, "comment_id": 68031340, "body": "Create a class called <code>MatrixView</code> that holds a matrix, and defines its own copy/move ctors and operators so that you can get all the sharing you want."}, {"owner": {"reputation": 173, "user_id": 7106582, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/578159e9aea5266d81950ee3b83cad9e?s=128&d=identicon&r=PG&f=1", "display_name": "SpinyNormam", "link": "https://stackoverflow.com/users/7106582/spinynormam"}, "reply_to_user": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1478122941, "post_id": 40389782, "comment_id": 68032301, "body": "Thanks Andy. I&#39;ve tried using a separate view class, but since I want to be able to use matrix views anywhere I use matrices (e.g. pass to add()) I had the MatrixView class being derived from Matrix which means that MatrixView&amp;&amp; is passable to Matrix&amp;&amp; :-("}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1478123120, "post_id": 40389782, "comment_id": 68032393, "body": "This is unclear. It sounds like you use the same class name <code>Matrix</code> to represent both a matrix, and a view onto a different matrix.   If so, stop doing this - use a different class name for each. (And don&#39;t use inheritance).  If you want a function to accept a view, then declare to to accept a view. You can provide an implicit conversion operator from matrix to view if you want."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1478123153, "post_id": 40389782, "comment_id": 68032408, "body": "<code>T add(T lhs, T const &amp;rhs);</code> is the usual signature for an addition function, with the body doing <code>lhs += rhs; return lhs;</code>"}, {"owner": {"reputation": 173, "user_id": 7106582, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/578159e9aea5266d81950ee3b83cad9e?s=128&d=identicon&r=PG&f=1", "display_name": "SpinyNormam", "link": "https://stackoverflow.com/users/7106582/spinynormam"}, "edited": false, "score": 0, "creation_date": 1478124087, "post_id": 40389782, "comment_id": 68032814, "body": "Thanks MM. How exactly would you define the view class to avoid this problem? I&#39;ve tried a view class derived from matrix which allows me to pass both to functions like add(), but doesn&#39;t help the rvalue problem. If I derive both matrix and view from a common base class, and define all functions to take the base type then I avoid the rvalue issue but it becomes messy in terms of having to mix const Base&amp; and Matrix&amp;&amp; types to optimize. Your addition function prototype doesn&#39;t help in cases like add(x, add(y, z)) where it&#39;d be more optimal to do rhs += lhs; return (rhs)."}, {"owner": {"reputation": 173, "user_id": 7106582, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/578159e9aea5266d81950ee3b83cad9e?s=128&d=identicon&r=PG&f=1", "display_name": "SpinyNormam", "link": "https://stackoverflow.com/users/7106582/spinynormam"}, "edited": false, "score": 0, "creation_date": 1478135909, "post_id": 40389782, "comment_id": 68036145, "body": "MM, I don&#39;t see how this use of types helps. If the view generating functions, e.g. row(), return some view type, and any rvalue-optimized functions, e.g. add(), have an rvalue reference parameter that accepts rvalue reference to the same view type, then the problem still exists."}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1478174068, "post_id": 40389782, "comment_id": 68051493, "body": "@SpinyNormam: Still create a MatrixView class that holds onto a Matrix resource, but create an <code>operator Matrix</code> so that it has implicit conversion to an actual Matrix. In this way you have full control over how the held Matrix object is shared (or not). Deriving is not necessary."}, {"owner": {"reputation": 173, "user_id": 7106582, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/578159e9aea5266d81950ee3b83cad9e?s=128&d=identicon&r=PG&f=1", "display_name": "SpinyNormam", "link": "https://stackoverflow.com/users/7106582/spinynormam"}, "reply_to_user": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1478182981, "post_id": 40389782, "comment_id": 68057962, "body": "@AndyG: That works as far as the rvalue problem, but the trouble is that my matrix (tensor, actually) class is fairly complex, having 300+ member functions, and I&#39;d like those member functions to be available for views as well. If I don&#39;t use inheritence than I&#39;d have to reimplement them all in the view class (albeit only as pass-thrus)."}, {"owner": {"reputation": 173, "user_id": 7106582, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/578159e9aea5266d81950ee3b83cad9e?s=128&d=identicon&r=PG&f=1", "display_name": "SpinyNormam", "link": "https://stackoverflow.com/users/7106582/spinynormam"}, "edited": false, "score": 0, "creation_date": 1478183009, "post_id": 40389782, "comment_id": 68057991, "body": "Having thought about this some more, I&#39;m thinking of inverting the relationship between maxtix and view and having MatrixView (implementing all the core functionality) being the base class, with Matrix derived from MatrixView... This way, Matrix is convertible to MatrixView, but not vice versa, so I can use const MatrixView&amp; as my default read-only parameter type and Matrix&amp;&amp; for rvalue optimization."}], "owner": {"reputation": 173, "user_id": 7106582, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/578159e9aea5266d81950ee3b83cad9e?s=128&d=identicon&r=PG&f=1", "display_name": "SpinyNormam", "link": "https://stackoverflow.com/users/7106582/spinynormam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 94, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1478121048, "creation_date": 1478120758, "last_edit_date": 1478121048, "question_id": 40389782, "link": "https://stackoverflow.com/questions/40389782/non-temporary-rvalue-design-pattern", "title": "non-temporary rvalue design pattern?", "body": "<p>I'm writing a C++ matrix-like class that allocates memory and has methods (e.g. <code>row()</code>, <code>col()</code>) that returns views of itself referencing the same memory via <code>shared_ptr</code>.</p>\n\n<p>e.g.</p>\n\n<pre><code>Matrix Matrix::row(int r)\n</code></pre>\n\n<p>The fundamental problem is that C++ regards an expression such as <code>m.row(0)</code> to be an rvalue whereas the return type of <code>row()</code> is not a self-contained temporary that can be moved but rather a view (with shared memory) into the non-temporary parent matrix.</p>\n\n<p>The problem manifests whenever I want to use move semantics such as:</p>\n\n<pre><code>Matrix add(const Matrix &amp;a, const Matrix &amp;b);\n\nMatrix add(Matrix &amp;&amp;a, Matrix &amp;&amp;b);\n</code></pre>\n\n<p>If I write <code>add(m.row(0), m.row(1))</code> then the compiler will call the rvalue version of <code>add()</code> which may modify it's <em>temporary</em> parameters and therefore the non-temporary parent matrix m! :-(</p>\n\n<p>I don't want to avoid rvalues and always pass by value instead:</p>\n\n<pre><code>Matrix add(Matrix a, Matrix b);\n</code></pre>\n\n<p>Since although this handles the rvalue case efficiently (via move construction), it also means I'm always copying non-rvalues which is inefficient.</p>\n\n<p>I also don't want to make the return type of <code>row()</code> const since I want to be able to treat it as an lvalue:</p>\n\n<pre><code>m.row(0) = m.row(1);\n</code></pre>\n\n<p>I've considered explicitly testing whether rvalue parameters are views via <code>shared_ptr</code> <code>use_count()</code>, but this seems messy since the whole point of rvalues is that it's meant to be a type signature of temporary values that are inherently modifiable.</p>\n\n<p>Can anyone suggest a design pattern for this type of situation where a function return value is a non-temporary value (such as a view onto something else), but you also want to use rvalue optimizations?</p>\n"}, {"tags": ["c++", "c++11", "boost"], "comments": [{"owner": {"reputation": 4567, "user_id": 1320751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eee0011ba2ca995b31e464fc2e2ad885?s=128&d=identicon&r=PG", "display_name": "Anon Mail", "link": "https://stackoverflow.com/users/1320751/anon-mail"}, "edited": false, "score": 1, "creation_date": 1478120439, "post_id": 40389575, "comment_id": 68031091, "body": "Why can&#39;t you make a function in your base.dll that just returns a std::string?"}, {"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1478120617, "post_id": 40389575, "comment_id": 68031184, "body": "Win32 API: <code>GetModuleHandle</code> passing in NULL; then <code>GetModuleFileName</code> passing in the module handle; then <code>GetFileVersionInfo</code> passing in the file name.  Boost no idea.  Links <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms683199(v=vs.85).aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/windows/desktop/&hellip;</a>  <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms683197(v=vs.85).aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/windows/desktop/&hellip;</a>  <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms647003(v=vs.85).aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/windows/desktop/&hellip;</a>"}, {"owner": {"reputation": 395, "user_id": 4686445, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/950866421598653/picture?type=large", "display_name": "Umang Mukesh Mehta", "link": "https://stackoverflow.com/users/4686445/umang-mukesh-mehta"}, "reply_to_user": {"reputation": 4567, "user_id": 1320751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eee0011ba2ca995b31e464fc2e2ad885?s=128&d=identicon&r=PG", "display_name": "Anon Mail", "link": "https://stackoverflow.com/users/1320751/anon-mail"}, "edited": false, "score": 0, "creation_date": 1478120815, "post_id": 40389575, "comment_id": 68031285, "body": "@AnonMail can you elaborate on the implementation of function? I need the product version from the exe. I am setting that version in the application using CMAKE."}, {"owner": {"reputation": 4567, "user_id": 1320751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eee0011ba2ca995b31e464fc2e2ad885?s=128&d=identicon&r=PG", "display_name": "Anon Mail", "link": "https://stackoverflow.com/users/1320751/anon-mail"}, "edited": false, "score": 0, "creation_date": 1478120963, "post_id": 40389575, "comment_id": 68031364, "body": "@UmangMukeshMehta when you say you are setting the version, what exactly does that mean?  Having the version as part of the exe name?"}, {"owner": {"reputation": 395, "user_id": 4686445, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/950866421598653/picture?type=large", "display_name": "Umang Mukesh Mehta", "link": "https://stackoverflow.com/users/4686445/umang-mukesh-mehta"}, "reply_to_user": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1478121035, "post_id": 40389575, "comment_id": 68031410, "body": "@RichardCritten I did get info on the API by following the S.O <a href=\"http://stackoverflow.com/questions/940707/how-do-i-programatically-get-the-version-of-a-dll-or-exe-file\" title=\"how do i programatically get the version of a dll or exe file\">stackoverflow.com/questions/940707/&hellip;</a>. But I am looking for something that can be cross compiled so that I can use it for Linux too."}, {"owner": {"reputation": 395, "user_id": 4686445, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/950866421598653/picture?type=large", "display_name": "Umang Mukesh Mehta", "link": "https://stackoverflow.com/users/4686445/umang-mukesh-mehta"}, "reply_to_user": {"reputation": 4567, "user_id": 1320751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eee0011ba2ca995b31e464fc2e2ad885?s=128&d=identicon&r=PG", "display_name": "Anon Mail", "link": "https://stackoverflow.com/users/1320751/anon-mail"}, "edited": false, "score": 0, "creation_date": 1478121267, "post_id": 40389575, "comment_id": 68031534, "body": "@AnonMail I am using cmake to compile all the dll&#39;s and the application. I set the BUILD_NUMBER in cmake which is used for all my projects. So for one of the application in csharp I use the BUILD_NUMBER from CMAKE and set the AssemblyFileVersion and AssemblyVersion when compiling. What I need is during run-time of the application a way for it to convey to the dll the version."}, {"owner": {"reputation": 4567, "user_id": 1320751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eee0011ba2ca995b31e464fc2e2ad885?s=128&d=identicon&r=PG", "display_name": "Anon Mail", "link": "https://stackoverflow.com/users/1320751/anon-mail"}, "edited": false, "score": 0, "creation_date": 1478121487, "post_id": 40389575, "comment_id": 68031646, "body": "I&#39;m not familiar with CMAKE and the Asssembly terms you&#39;ve used.  Sorry."}], "owner": {"reputation": 395, "user_id": 4686445, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/950866421598653/picture?type=large", "display_name": "Umang Mukesh Mehta", "link": "https://stackoverflow.com/users/4686445/umang-mukesh-mehta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 95, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1478119930, "creation_date": 1478119930, "question_id": 40389575, "link": "https://stackoverflow.com/questions/40389575/api-to-get-product-version-for-application-in-the-dll", "title": "Api to get product version for application in the dll?", "body": "<p>I am working on a cpp application which generates a dll e.g <code>base.dll</code> . I have some applications that use this dll e.g <code>A.exe</code>, <code>B.exe</code> . </p>\n\n<p>I am trying to get the product version of <code>A.exe</code> and <code>B.exe</code> in <code>base.dll</code>. I am using c++11 and boost.\nI am compiling this dll for both Windows and Linux.</p>\n\n<p>Currently I am able to get the process name using boost by doing something like this:</p>\n\n<p><code>std::string pname = boost::log::aux::get_process_name();</code></p>\n\n<p>I am looking for a similar API to get the product version. Any feedback would be appreciated.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1478120002, "post_id": 40389562, "comment_id": 68030829, "body": "No, it&#39;s not possible. Use a <code>std::vector</code> or a <code>std::map</code> if you insist you need a variable name."}], "answers": [{"tags": [], "owner": {"reputation": 58, "user_id": 3419129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58f0f32b6ddc74ee19995d9424a604bf?s=128&d=identicon&r=PG&f=1", "display_name": "a_caban", "link": "https://stackoverflow.com/users/3419129/a-caban"}, "is_accepted": false, "score": 2, "last_activity_date": 1478120022, "creation_date": 1478120022, "answer_id": 40389600, "question_id": 40389562, "link": "https://stackoverflow.com/questions/40389562/is-it-possible-to-store-a-users-input-in-a-new-variable-after-each-while-loop-it/40389600#40389600", "title": "is it possible to store a users input in a new variable after each while loop iteration", "body": "<p>That's why we have std::vector <a href=\"http://en.cppreference.com/w/cpp/container/vector\" rel=\"nofollow noreferrer\">http://en.cppreference.com/w/cpp/container/vector</a> ... cin into a temporary variable then push it in.</p>\n"}], "owner": {"reputation": 1, "user_id": 4360435, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ihMZydWhNJs/AAAAAAAAAAI/AAAAAAAAEU8/ksc7rvpQc9s/photo.jpg?sz=128", "display_name": "Merak_Dubhe", "link": "https://stackoverflow.com/users/4360435/merak-dubhe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 33, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1478120022, "creation_date": 1478119886, "question_id": 40389562, "link": "https://stackoverflow.com/questions/40389562/is-it-possible-to-store-a-users-input-in-a-new-variable-after-each-while-loop-it", "title": "is it possible to store a users input in a new variable after each while loop iteration", "body": "<p>As the question stated before is it possible to store the input from the user into a new || next variable after each while loop iteration.</p>\n\n<p>for example </p>\n\n<pre><code>double average;\ndouble test0, test1, test2,test3, test4;\n\nwhile (int i = 0; i &lt; 6; i++){\n\ncout &lt;&lt; \"Enter a test score\" &lt;&lt; endl;\ncin &gt;&gt; test0... net iteration is test1.....test2 endl;\n\n}\n</code></pre>\n\n<p>or would it make more sense to store the test scores in an array?</p>\n"}, {"tags": ["c++", "initializer-list"], "answers": [{"tags": [], "owner": {"reputation": 65820, "user_id": 1741542, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/QdVqh.jpg?s=128&g=1", "display_name": "Olaf Dietsche", "link": "https://stackoverflow.com/users/1741542/olaf-dietsche"}, "is_accepted": true, "score": 5, "last_activity_date": 1562916429, "last_edit_date": 1562916429, "creation_date": 1478120128, "answer_id": 40389624, "question_id": 40389492, "link": "https://stackoverflow.com/questions/40389492/c-initializer-list-capabilities-call-functions-without-initializing-member/40389624#40389624", "title": "C++ initializer list capabilities: call functions without initializing member?", "body": "<p>You can utilize the <a href=\"http://en.cppreference.com/w/cpp/language/operator_other#Built-in_comma_operator\" rel=\"nofollow noreferrer\">comma operator</a>.</p>\n\n<p>In your example </p>\n\n<pre><code>class Foo\n{\npublic:\n    Foo()\n        : mContainer((SingletonService&lt;OneOfMe&gt;::InstallInstance(new OneOfMe),\n                      SingletonService&lt;OneOfMe&gt;::Instance()))\n    {}\n    virtual ~Foo();\nprotected:\n    Container mContainer;\n};\n</code></pre>\n\n<p>Note the additional parentheses around the two expressions, otherwise these would be interpreted as two instead of one parameter.</p>\n\n<hr>\n\n<p>Another approach to this particular problem could be to return the singleton from <code>InstallInstance()</code> as well, e.g.</p>\n\n<pre><code>template &lt;class T&gt;\nclass SingletonService {\npublic:\n    static T *InstallInstance(T *pT) { LOG; return mpT = pT; }\n};\n</code></pre>\n\n<p>and then</p>\n\n<pre><code>class Foo {\npublic:\n    Foo()\n        : mContainer(SingletonService&lt;OneOfMe&gt;::InstallInstance(new OneOfMe)) {}\n    virtual ~Foo();\nprotected:\n    Container mContainer;\n};\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3787, "user_id": 5437543, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/ad76496c936d384dac2888bae0126dde?s=128&d=identicon&r=PG&f=1", "display_name": "StoneThrow", "link": "https://stackoverflow.com/users/5437543/stonethrow"}, "edited": false, "score": 0, "creation_date": 1478120727, "post_id": 40389626, "comment_id": 68031243, "body": "Thank you; I got to Olaf&#39;s answer before yours, but thanks to you also for introducing me to the comma operator."}], "tags": [], "owner": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "is_accepted": false, "score": 2, "last_activity_date": 1478120746, "last_edit_date": 1478120746, "creation_date": 1478120132, "answer_id": 40389626, "question_id": 40389492, "link": "https://stackoverflow.com/questions/40389492/c-initializer-list-capabilities-call-functions-without-initializing-member/40389626#40389626", "title": "C++ initializer list capabilities: call functions without initializing member?", "body": "<blockquote>\n  <p>Is it possible to call functions from initializer lists without them being arguments to member object constructors?</p>\n</blockquote>\n\n<p>Something like this maybe works as intended:</p>\n\n<pre><code>void f() {}\n\nstruct S {\n    S(): i{(f(), 0)} {}\n    int i;\n};\n\nint main() {\n    S s;\n}\n</code></pre>\n\n<p>The basic idea is to rely on the comma operator. In this case, the value returned by the function (if any) is discarded and not used to initialize a member.<br>\nOf course, we still exploit the fact that a data member exists, so maybe it is not exactly what you are looking for.</p>\n\n<p>If you want to get rid completely of data members, you can do something similar with a delegated constructor like in the following example:</p>\n\n<pre><code>void f() {}\n\nclass S {\n    S(int) {}\n\npublic:\n    S(): S{(f(), 0)} {}\n};\n\nint main() {\n    S s{};\n}\n</code></pre>\n\n<p>No matters what's the return type of the invoked function. By means of the comma operator, the <code>int</code> value is used as a tag to dispatch the call to the right compiler and then it is discarded.</p>\n"}], "owner": {"reputation": 3787, "user_id": 5437543, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/ad76496c936d384dac2888bae0126dde?s=128&d=identicon&r=PG&f=1", "display_name": "StoneThrow", "link": "https://stackoverflow.com/users/5437543/stonethrow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2770, "favorite_count": 0, "accepted_answer_id": 40389624, "answer_count": 2, "score": 4, "last_activity_date": 1562916429, "creation_date": 1478119615, "last_edit_date": 1478120205, "question_id": 40389492, "link": "https://stackoverflow.com/questions/40389492/c-initializer-list-capabilities-call-functions-without-initializing-member", "title": "C++ initializer list capabilities: call functions without initializing member?", "body": "<p>This is a question on the syntax of C++ initializer lists.</p>\n\n<p>Is it possible to call functions from initializer lists without them being arguments to member object constructors?</p>\n\n<p>Code example listed below is paraphrased (paracoded?) from a similar situation at work.</p>\n\n<p><strong>The Situation</strong></p>\n\n<ul>\n<li>A member variable takes a pointer to a singleton as constructor\nargument.</li>\n<li>The member variable is constructed by initializer list in its containing class' constructor.</li>\n<li>The singleton has not been created prior to the containing class being constructed.</li>\n</ul>\n\n<p><strong>The Code</strong></p>\n\n<pre><code>#include &lt;iostream&gt;\n\n#define LOG { std::cout &lt;&lt; __PRETTY_FUNCTION__ &lt;&lt; std::endl; }\n\nnamespace\n{\n\ntemplate &lt;class T&gt;\nclass SingletonService\n{\npublic:\n    static T* Instance() { LOG; return mpT; }\n    static void InstallInstance(T* pT) { LOG; mpT = pT; }\n    static void DeleteInstance() { if (mpT) delete mpT; }\n\nprotected:\n    static T* mpT;\n};\n\ntemplate &lt;class T&gt;\nT* SingletonService&lt;T&gt;::mpT = NULL;\n\nclass OneOfMe\n{\npublic:\n    OneOfMe() { LOG; };\n    virtual ~OneOfMe() { };\n};\n\nclass Container\n{\npublic:\n    Container(OneOfMe* pObj) { LOG; /* Do something with pObj */ }\n    virtual ~Container() { }\n};\n\nint GenerateNum()\n{\n    return 42;\n}\n\nclass Baz\n{\npublic:\n    Baz(int num) : mNum(num) { LOG; }\n    virtual ~Baz() { }\nprotected:\n    int mNum;\n};\n\nclass Bar\n{\npublic:\n    Bar() : mBaz(GenerateNum()) { LOG; } // Perfectly OK to call function that is argument to member object's non-default ctor.\n    virtual ~Bar() { };\n\nprotected:\n    Baz mBaz;\n};\n\nclass Foo\n{\npublic:\n    Foo()\n        : SingletonService&lt;OneOfMe&gt;::InstallInstance(new OneOfMe) // Compile error\n        , mContainer(SingletonService&lt;OneOfMe&gt;::Instance()) { }\n    virtual ~Foo() { };\nprotected:\n    Container mContainer;\n};\n\n}\n\nint main(int argc, char* argv[])\n{\n    LOG;\n    Bar bar;\n\n    SingletonService&lt;OneOfMe&gt;::InstallInstance(new OneOfMe);    // This works.\n    Container container(SingletonService&lt;OneOfMe&gt;::Instance()); // And this works.\n    SingletonService&lt;OneOfMe&gt;::DeleteInstance();\n    return 0;\n}\n</code></pre>\n\n<p><strong>The compile error</strong></p>\n\n<pre><code>&gt;g++ main.cpp\nmain.cpp: In constructor \u2018&lt;unnamed&gt;::Foo::Foo()\u2019:\nmain.cpp:45: error: expected class-name before \u2018(\u2019 token\nmain.cpp:45: error: no matching function for call to\n\u2018&lt;unnamed&gt;::Container::Container()\u2019\nmain.cpp:37: note: candidates are:\n&lt;unnamed&gt;::Container::Container(&lt;unnamed&gt;::OneOfMe*)\nmain.cpp:35: note:\n&lt;unnamed&gt;::Container::Container(const&lt;unnamed&gt;::Container&amp;)\nmain.cpp:45: error: expected \u2018{\u2019 before \u2018(\u2019 token\n</code></pre>\n\n<p><strong>The Question</strong></p>\n\n<p>Is it syntactically possible to call a function from a class constructor's initializer list <em>without being an argument to a member object's non-default constructor</em>?</p>\n\n<p>The question is for academic curiosity. I know at least one other solutions is to instantiate the singleton before creating the containing class.</p>\n"}, {"tags": ["c++", "qt", "qmake", "qscintilla"], "answers": [{"comments": [{"owner": {"reputation": 63, "user_id": 7068260, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d312cf2ee3900100101eca3cd7a4d64?s=128&d=identicon&r=PG&f=1", "display_name": "M.Duchemin", "link": "https://stackoverflow.com/users/7068260/m-duchemin"}, "edited": false, "score": 0, "creation_date": 1478120335, "post_id": 40389474, "comment_id": 68031024, "body": "mmm, okay, I understand how work -L attribut but when I add &#39;-lqscintilla2&#39; like the tutorial I get another error : &#39;connot find -lqscintilla2&#39;"}, {"owner": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "reply_to_user": {"reputation": 63, "user_id": 7068260, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d312cf2ee3900100101eca3cd7a4d64?s=128&d=identicon&r=PG&f=1", "display_name": "M.Duchemin", "link": "https://stackoverflow.com/users/7068260/m-duchemin"}, "edited": false, "score": 0, "creation_date": 1478120603, "post_id": 40389474, "comment_id": 68031176, "body": "Well, then, you need to look at the actual link command and the directories added to it with <code>-L</code>. Does that include the directory which contains your <code>qscintilla2.dll</code> or <code>libqscintilla2.so</code> (depending on OS)?"}, {"owner": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "reply_to_user": {"reputation": 63, "user_id": 7068260, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d312cf2ee3900100101eca3cd7a4d64?s=128&d=identicon&r=PG&f=1", "display_name": "M.Duchemin", "link": "https://stackoverflow.com/users/7068260/m-duchemin"}, "edited": false, "score": 0, "creation_date": 1478120758, "post_id": 40389474, "comment_id": 68031260, "body": "Normally you shouldn&#39;t expand/change the question after someone has answered (because that invalidates the answer), but in this case, feel free to go ahead and edit the question to update the <i>.pro</i> file with this fix, and then include the actual link command, which gives the error (the only current answer is mine, and I won&#39;t mind in this case)."}, {"owner": {"reputation": 63, "user_id": 7068260, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d312cf2ee3900100101eca3cd7a4d64?s=128&d=identicon&r=PG&f=1", "display_name": "M.Duchemin", "link": "https://stackoverflow.com/users/7068260/m-duchemin"}, "edited": false, "score": 0, "creation_date": 1478121584, "post_id": 40389474, "comment_id": 68031706, "body": "okay, as you can see i&#39;m new haha, thanks for advice, i edited the question. So, i don&#39;t have any <code>qscintilla2.dll</code> or <code>libqscintilla2.so</code> in the directory. oh and for more precision, i&#39;m on linux (fedora 24)"}, {"owner": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "reply_to_user": {"reputation": 63, "user_id": 7068260, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d312cf2ee3900100101eca3cd7a4d64?s=128&d=identicon&r=PG&f=1", "display_name": "M.Duchemin", "link": "https://stackoverflow.com/users/7068260/m-duchemin"}, "edited": false, "score": 0, "creation_date": 1478168752, "post_id": 40389474, "comment_id": 68048177, "body": "@M.Duchemin Did you perhaps forget to build QScintilla library, then? :)"}, {"owner": {"reputation": 63, "user_id": 7068260, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d312cf2ee3900100101eca3cd7a4d64?s=128&d=identicon&r=PG&f=1", "display_name": "M.Duchemin", "link": "https://stackoverflow.com/users/7068260/m-duchemin"}, "edited": false, "score": 0, "creation_date": 1478178711, "post_id": 40389474, "comment_id": 68054860, "body": "oh god, yes I miss it XD that work now, thank you again for your help ;)"}, {"owner": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "reply_to_user": {"reputation": 63, "user_id": 7068260, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d312cf2ee3900100101eca3cd7a4d64?s=128&d=identicon&r=PG&f=1", "display_name": "M.Duchemin", "link": "https://stackoverflow.com/users/7068260/m-duchemin"}, "edited": false, "score": 0, "creation_date": 1478190790, "post_id": 40389474, "comment_id": 68063654, "body": "@M.Duchemin No problem. Btw, the usual way to say &quot;thank you&quot; here is to upvote the post (up-arrowhead at upper left of each post), which made you want to say &quot;thanks&quot; :)"}, {"owner": {"reputation": 63, "user_id": 7068260, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d312cf2ee3900100101eca3cd7a4d64?s=128&d=identicon&r=PG&f=1", "display_name": "M.Duchemin", "link": "https://stackoverflow.com/users/7068260/m-duchemin"}, "edited": false, "score": 0, "creation_date": 1478191488, "post_id": 40389474, "comment_id": 68064096, "body": "Yes, of course, it&#39;s normal, but I need 15 reputation points to upvote the post haha. So, when I will get this 15 points, I upvote your post ;)"}, {"owner": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "reply_to_user": {"reputation": 63, "user_id": 7068260, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d312cf2ee3900100101eca3cd7a4d64?s=128&d=identicon&r=PG&f=1", "display_name": "M.Duchemin", "link": "https://stackoverflow.com/users/7068260/m-duchemin"}, "edited": false, "score": 0, "creation_date": 1478195716, "post_id": 40389474, "comment_id": 68066471, "body": "@M.Duchemin I <i>think</i> you can always upvote answers to your own questions, same as you can always comment on them."}], "tags": [], "owner": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "is_accepted": true, "score": 0, "last_activity_date": 1478190541, "last_edit_date": 1478190541, "creation_date": 1478119564, "answer_id": 40389474, "question_id": 40389285, "link": "https://stackoverflow.com/questions/40389285/add-qscintilla-library-to-qt-problems/40389474#40389474", "title": "Add Qscintilla library to Qt Problems", "body": "<p>Your .pro file is missing this:</p>\n\n<pre><code>LIBS += -lqscintilla2\n</code></pre>\n\n<p>This is mentioned also in the tutorial you linked to...</p>\n\n<p>The <code>-L</code> you now have only adds directories to library search path, but it alone does not cause any new libraries to be added. You basically never have just the <code>-L</code> alone, because it doesn't really <em>do</em> anything alone (in a normal toolchain setup). The <code>-l</code> switch is used to tell the actual library to add to linking, and then linker searches the library paths it has. So if you have library in its own directory, you need both switches.</p>\n\n<hr>\n\n<p>After edit: Then if the actual library file is missing, you should make sure that</p>\n\n<ul>\n<li>You have actually built it.</li>\n<li>You have built the right debug/release version, or probably both.</li>\n<li>The built library is in the expected directory, matching what you have in the application <em>.pro</em> file.</li>\n</ul>\n"}], "owner": {"reputation": 63, "user_id": 7068260, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d312cf2ee3900100101eca3cd7a4d64?s=128&d=identicon&r=PG&f=1", "display_name": "M.Duchemin", "link": "https://stackoverflow.com/users/7068260/m-duchemin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 719, "favorite_count": 1, "accepted_answer_id": 40389474, "answer_count": 1, "score": 2, "last_activity_date": 1478190541, "creation_date": 1478118822, "last_edit_date": 1478121340, "question_id": 40389285, "link": "https://stackoverflow.com/questions/40389285/add-qscintilla-library-to-qt-problems", "title": "Add Qscintilla library to Qt Problems", "body": "<p>i'm trying to add <a href=\"https://riverbankcomputing.com/software/qscintilla/intro\" rel=\"nofollow noreferrer\">Qscintilla</a> with this <a href=\"http://qtsimplify.blogspot.fr/2013/08/code-editor-in-making.html\" rel=\"nofollow noreferrer\">tutorial</a> to my Qt Project. The library is successfully installed but there is lot of undefined references on class (undefined reference to 'QsciScintilla::QsciScintilla(QWidget*)' or undefined reference to 'QsciScintilla::SetFont(QFont const&amp;)' for example)</p>\n\n<p>this is my .pro file : </p>\n\n<pre><code>QT       += core gui\n\ngreaterThan(QT_MAJOR_VERSION, 4): QT += widgets\n\nTARGET = QscintillaTest\nTEMPLATE = app\n\n\nSOURCES += main.cpp\\\n    mainwindow.cpp\n\nHEADERS  += mainwindow.h\n\nFORMS    += mainwindow.ui\n\nwin32:CONFIG(release, debug|release): LIBS += -L$$PWD/./QScintilla/Qt4Qt5/release/ -lqscintilla2\nelse:win32:CONFIG(debug, debug|release): LIBS += -L$$PWD/./QScintilla/Qt4Qt5/debug/ -lqscintilla2\nelse:unix: LIBS += -L$$PWD/./QScintilla/Qt4Qt5/ -lqscintilla2\nINCLUDEPATH += $$PWD/./QScintilla/Qt4Qt5/\nDEPENDPATH += $$PWD/./QScintilla/Qt4Qt5/\n</code></pre>\n\n<p>I hope someone will help me.</p>\n\n<p>EDIT : \nAfter adding <code>-lqscintilla2</code> I get this error :</p>\n\n<pre><code>Cannot find -lqscintilla2\n</code></pre>\n"}, {"tags": ["c++", "opengl", "visual-studio-2015"], "comments": [{"owner": {"reputation": 488, "user_id": 6344366, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/8EB8C.jpg?s=128&g=1", "display_name": "Cherkesgiller", "link": "https://stackoverflow.com/users/6344366/cherkesgiller"}, "edited": false, "score": 0, "creation_date": 1478119213, "post_id": 40389249, "comment_id": 68030443, "body": "You should look to this <a href=\"https://www.opengl.org/archives/resources/faq/technical/selection.htm\" rel=\"nofollow noreferrer\">opengl.org/archives/resources/faq/technical/selection.htm</a>"}, {"owner": {"reputation": 41485, "user_id": 2521214, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/nd58V.jpg?s=128&g=1", "display_name": "Spektre", "link": "https://stackoverflow.com/users/2521214/spektre"}, "edited": false, "score": 0, "creation_date": 1478162883, "post_id": 40389249, "comment_id": 68044545, "body": "simply by after rendering whole scene you render the selected stuff again but with different color (make sure depth test does not screw that up). If you need help with the selection itself see <a href=\"http://stackoverflow.com/a/20924609/2521214\">simple C++ Drag&amp;Drop example</a> the architecture of the code should be almost the same as your editors ... unless you are using different techniques ofcoarse. For complex shapes and many entities gfx approach is better see edit1 in <a href=\"http://stackoverflow.com/a/35917976/2521214\">Improving performance of click detection on a staggered column isometric grid</a>"}, {"owner": {"reputation": 41485, "user_id": 2521214, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/nd58V.jpg?s=128&g=1", "display_name": "Spektre", "link": "https://stackoverflow.com/users/2521214/spektre"}, "edited": false, "score": 0, "creation_date": 1478163416, "post_id": 40389249, "comment_id": 68044806, "body": "btw I am not sure if ti is wise to call <code>glFlush</code> after each entity ... I call it usually after the whole scene is pended for render. It may or may not be a performance problem on some implementations."}, {"owner": {"reputation": 51, "user_id": 7043583, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/6187dcf218bea753b16e842ffa30cf17?s=128&d=identicon&r=PG&f=1", "display_name": "Ben Tanos", "link": "https://stackoverflow.com/users/7043583/ben-tanos"}, "edited": false, "score": 0, "creation_date": 1478192922, "post_id": 40389249, "comment_id": 68064999, "body": "I&#39;ve kind of got it working, I made an if statement that checks its location when I click, and if its true, I made it exit the application to test if the statement works properly, and it does. Now I want to call the drawSquare() function again with a different colour when the statement is true, how would I do this?"}, {"owner": {"reputation": 41485, "user_id": 2521214, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/nd58V.jpg?s=128&g=1", "display_name": "Spektre", "link": "https://stackoverflow.com/users/2521214/spektre"}, "edited": false, "score": 0, "creation_date": 1478509010, "post_id": 40389249, "comment_id": 68167224, "body": "that does not sound right ... why exit anything? On mouse event just compute the actual mouse position and the selection state and store the result into some &quot;global&quot; variables like <code>float mx,my;</code> for mouse position and <code>int sel_tp=-1,sel_ix=-1;</code> for selected item type and index in the list of objects. Then in your render routine after all the items are rendered render selected item again with different color if <code>sel_tp&gt;=0</code>. You can even draw the mouse cursor or what ever. The selection computation code is in booth links I provided in previous  comment..."}, {"owner": {"reputation": 41485, "user_id": 2521214, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/nd58V.jpg?s=128&g=1", "display_name": "Spektre", "link": "https://stackoverflow.com/users/2521214/spektre"}, "edited": false, "score": 0, "creation_date": 1478509266, "post_id": 40389249, "comment_id": 68167374, "body": "simpler would be determine selection from mouse position inside rendering the square but for your editor purposes I recommend not to do this as it will bring you problems with other functionality you would need later"}], "owner": {"reputation": 51, "user_id": 7043583, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/6187dcf218bea753b16e842ffa30cf17?s=128&d=identicon&r=PG&f=1", "display_name": "Ben Tanos", "link": "https://stackoverflow.com/users/7043583/ben-tanos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 542, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1478119807, "creation_date": 1478118675, "question_id": 40389249, "link": "https://stackoverflow.com/questions/40389249/opengl-highlighting-squares", "title": "OpenGL - Highlighting squares", "body": "<p>I'm making a 2D drawing canvas in OpenGL that allows you to draw shapes on the drawing canvas by simply selecting which shape you want to draw. </p>\n\n<p>I have created the entire interface for the 2D drawing canvas and also added in a mouse function that reads a screen size of <code>1000x800</code> that works perfectly fine also, however with some squares that I have drawn out, I want to be able to <strong>change the colour</strong> of them depending on which is click (<strong>Highlighting them basically</strong>).</p>\n\n<p>Here's my <code>drawSquare</code> function that draws the 4 points to make a square:</p>\n\n<pre><code>void drawSquare(GLfloat length, GLfloat x, GLfloat y, GLfloat outline)\n    {\n        // x1,y1 is the top left-hand corner coordinate\n        // and so on...\n        GLfloat x1, y1, x2, y2, x3, y3, x4, y4;\n\n    x1 = x - length / 2;\n    y1 = y + length / 2;\n    x2 = x + length / 2;\n    y2 = y + length / 2;\n    x3 = x + length / 2;\n    y3 = y - length / 2;\n    x4 = x - length / 2;\n    y4 = y - length / 2;\n\n    // ACTUAL SQUARE OBJECT\n    glColor3f(0.0, 1.0, 1.0); // Colour: Cyan\n    glBegin(GL_POLYGON);\n    glVertex2f(x1, y1);     // vertex for BLUE SQUARES\n    glVertex2f(x2, y2);\n    glVertex2f(x3, y3);\n    glVertex2f(x4, y4);\n    glEnd();\n\n    if (outline == true)\n    {\n        // SQUARE OUTLINE\n        glColor3f(0.0, 0.0, 0.0);   // Colour: Black\n        glBegin(GL_LINE_LOOP);\n        glLineWidth(2);\n        glVertex2f(x1, y1);     // vertex for OUTLINE\n        glVertex2f(x2, y2);\n        glVertex2f(x3, y3);\n        glVertex2f(x4, y4);\n        glEnd();\n    }\n    glFlush();\n}\n</code></pre>\n\n<p>And to draw it, I simply call the function in my <code>display()</code> function using <code>drawSquare(100, 50, 350,true);</code>.</p>\n\n<p>But if I want to be able to <strong>highlight each square when clicked</strong>, how would I do this?</p>\n"}, {"tags": ["c++", "compiler-errors"], "answers": [{"comments": [{"owner": {"reputation": 87, "user_id": 7106712, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/e198b8d8f4e305c516c57598d4691649?s=128&d=identicon&r=PG&f=1", "display_name": "Greg", "link": "https://stackoverflow.com/users/7106712/greg"}, "edited": false, "score": 0, "creation_date": 1478118134, "post_id": 40389010, "comment_id": 68029832, "body": "int balance gives me an error of &quot;expected primary-expression before &#39;:&#39; token."}], "tags": [], "owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "is_accepted": false, "score": 4, "last_activity_date": 1478117809, "creation_date": 1478117809, "answer_id": 40389010, "question_id": 40388998, "link": "https://stackoverflow.com/questions/40388998/c-error-invalid-constructor-your-probably-meant-account-const-account/40389010#40389010", "title": "C++ error &quot;invalid constructor; your probably meant &#39;Account (const Account&amp;)", "body": "<p>Replace</p>\n\n<pre><code>Account (Account balance) \n</code></pre>\n\n<p>with</p>\n\n<pre><code>Account (int balance) \n//       ^^^\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 87, "user_id": 7106712, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/e198b8d8f4e305c516c57598d4691649?s=128&d=identicon&r=PG&f=1", "display_name": "Greg", "link": "https://stackoverflow.com/users/7106712/greg"}, "edited": false, "score": 0, "creation_date": 1478120100, "post_id": 40389186, "comment_id": 68030900, "body": "Ahh yes thank you. I see now that I put   : accountBalance (balance);  Within the function of explicit Account (int balance). And I also put a semi-colon at the end. ^.^ Thank you for your help."}, {"owner": {"reputation": 1438, "user_id": 3732337, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5LzGs.jpg?s=128&g=1", "display_name": "HazemGomaa", "link": "https://stackoverflow.com/users/3732337/hazemgomaa"}, "reply_to_user": {"reputation": 87, "user_id": 7106712, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/e198b8d8f4e305c516c57598d4691649?s=128&d=identicon&r=PG&f=1", "display_name": "Greg", "link": "https://stackoverflow.com/users/7106712/greg"}, "edited": false, "score": 0, "creation_date": 1478120355, "post_id": 40389186, "comment_id": 68031034, "body": "@Greg you welcome ! .. you might accept one of the answers to your question .. for more info <a href=\"http://stackoverflow.com/help/accepted-answer\">stackoverflow.com/help/accepted-answer</a>"}], "tags": [], "owner": {"reputation": 1438, "user_id": 3732337, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5LzGs.jpg?s=128&g=1", "display_name": "HazemGomaa", "link": "https://stackoverflow.com/users/3732337/hazemgomaa"}, "is_accepted": true, "score": 3, "last_activity_date": 1478118440, "creation_date": 1478118440, "answer_id": 40389186, "question_id": 40388998, "link": "https://stackoverflow.com/questions/40388998/c-error-invalid-constructor-your-probably-meant-account-const-account/40389186#40389186", "title": "C++ error &quot;invalid constructor; your probably meant &#39;Account (const Account&amp;)", "body": "<p>you need to fix your constructor and the initialization list, as follows</p>\n\n<pre><code>explicit Account (int balance):accountBalance (balance){}\n</code></pre>\n\n<p>you need to provide an argument when creating <code>Account</code> object, as follows</p>\n\n<pre><code>int startBalance = 0;\nAccount myAccount1(startBalance);\n</code></pre>\n"}], "owner": {"reputation": 87, "user_id": 7106712, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/e198b8d8f4e305c516c57598d4691649?s=128&d=identicon&r=PG&f=1", "display_name": "Greg", "link": "https://stackoverflow.com/users/7106712/greg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 635, "favorite_count": 0, "accepted_answer_id": 40389186, "answer_count": 2, "score": 1, "last_activity_date": 1478131475, "creation_date": 1478117764, "last_edit_date": 1478131475, "question_id": 40388998, "link": "https://stackoverflow.com/questions/40388998/c-error-invalid-constructor-your-probably-meant-account-const-account", "title": "C++ error &quot;invalid constructor; your probably meant &#39;Account (const Account&amp;)", "body": "<p>I keep getting the error</p>\n\n<blockquote>\n  <p>invalid constructor; your probably meant <code>Account (const Account&amp;)</code>.</p>\n</blockquote>\n\n<pre><code>explicit Account (Account balance) {\n   : accountBalance (balance);\n}\n</code></pre>\n\n<p>I've tried changing the input to be <code>(Account balance)</code> and tried also using <code>(int balance)</code>. int balance gives me an error</p>\n\n<blockquote>\n  <p>\"expected primary-expression before ':' token.</p>\n</blockquote>\n\n<p>Full code</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\nusing namespace std;\n\nclass Account {\npublic:\n\n    explicit Account (Account balance) {\n       : accountBalance (balance);\n    }\n\n    void setAccountBalance (int balance) {\n        accountBalance = balance;\n    }\n\n    int getAccountBalance () const {\n        return accountBalance;\n    }\n\n    void displayBalance () const {\n        std::cout &lt;&lt; \"Welcome to the Account. The balance is : $\" &lt;&lt; getAccountBalance() &lt;&lt; std::endl;\n    }\n\nprivate:\n    int accountBalance;\n};\n\nint main () {\n    int startBalance = 0;\n    Account myAccount1;\n\n    cout &lt;&lt; \"Initial Dollar Amount is : \" &lt;&lt; myAccount1.getAccountBalance() &lt;&lt; endl;\n    cout &lt;&lt; \"Please enter new balance : \" &lt;&lt; endl;\n    cin &gt;&gt; startBalance;\n\n    myAccount1.setAccountBalance(startBalance);\n    myAccount1.displayBalance();\n}\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 2, "creation_date": 1478117587, "post_id": 40388918, "comment_id": 68029547, "body": "Well, how do you imagine your <code>n</code> player objects would be initialized?"}, {"owner": {"reputation": 49, "user_id": 6787704, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/ae834d2e1f1d7059532930b047db70ff?s=128&d=identicon&r=PG&f=1", "display_name": "monterinio", "link": "https://stackoverflow.com/users/6787704/monterinio"}, "reply_to_user": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1478117840, "post_id": 40388918, "comment_id": 68029685, "body": "I imagine it that somewhere in the main function I will have definitions: Team t1(2); Player p1(1); Player p2(1); And then setFunction invokes."}, {"owner": {"reputation": 249985, "user_id": 147192, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/E78Vj.png?s=128&g=1", "display_name": "Matthieu M.", "link": "https://stackoverflow.com/users/147192/matthieu-m"}, "edited": false, "score": 0, "creation_date": 1478186442, "post_id": 40388918, "comment_id": 68060699, "body": "@monterinio: What do you think happens when calling <code>AssociationsP = new Player[n];</code> ?"}], "answers": [{"comments": [{"owner": {"reputation": 49, "user_id": 6787704, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/ae834d2e1f1d7059532930b047db70ff?s=128&d=identicon&r=PG&f=1", "display_name": "monterinio", "link": "https://stackoverflow.com/users/6787704/monterinio"}, "edited": false, "score": 0, "creation_date": 1478119177, "post_id": 40389345, "comment_id": 68030427, "body": "Does it make a huge difference if I use a list instead of vector?"}, {"owner": {"reputation": 249985, "user_id": 147192, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/E78Vj.png?s=128&g=1", "display_name": "Matthieu M.", "link": "https://stackoverflow.com/users/147192/matthieu-m"}, "reply_to_user": {"reputation": 49, "user_id": 6787704, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/ae834d2e1f1d7059532930b047db70ff?s=128&d=identicon&r=PG&f=1", "display_name": "monterinio", "link": "https://stackoverflow.com/users/6787704/monterinio"}, "edited": false, "score": 0, "creation_date": 1478186508, "post_id": 40389345, "comment_id": 68060742, "body": "@monterinio: You don&#39;t get indexing (so you can&#39;t say <code>AssociationsP[3]</code>), you can&#39;t pass it to C code and a <code>list</code> is usually less efficient, apart from that not really."}], "tags": [], "owner": {"reputation": 10380, "user_id": 8877, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZfOB5.png?s=128&g=1", "display_name": "&#208;\u0430n", "link": "https://stackoverflow.com/users/8877/%c3%90%d0%b0n"}, "is_accepted": true, "score": 0, "last_activity_date": 1478119013, "creation_date": 1478119013, "answer_id": 40389345, "question_id": 40388918, "link": "https://stackoverflow.com/questions/40388918/representation-of-association-in-c/40389345#40389345", "title": "representation of association in c++", "body": "<p>It looks like you might want something along the lines of the following:</p>\n\n<pre><code>#include &lt;string&gt;\n#include &lt;vector&gt;\n\nclass Team;\n\nclass Player {\n    const std::string name_;\n    std::vector&lt;const Team*&gt; AssociationsT;\npublic:\n    Player(const std::string&amp; name) : name_(name) { }\n    void setTeam(const Team&amp; t) {\n        AssociationsT.push_back(&amp;t);\n    }\n};\n\nclass Team {\n    const std::string name_;\n    std::vector&lt;const Player*&gt; AssociationsP;\npublic:\n    Team(const std::string&amp; name) : name_(name) { }\n    void setPlayer(const Player&amp; p) {\n        AssociationsP.push_back(&amp;p);\n    }\n};\n\nvoid assignPlayerToTeam(Player&amp; player, Team&amp; team)\n{\n    team.setPlayer(player);\n    player.setTeam(team);\n}\n\nint main()\n{\n    Player bill(\"Bill\");\n    Team cubs(\"Cubs\");\n\n    assignPlayerToTeam(bill, cubs);\n}\n</code></pre>\n"}], "owner": {"reputation": 49, "user_id": 6787704, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/ae834d2e1f1d7059532930b047db70ff?s=128&d=identicon&r=PG&f=1", "display_name": "monterinio", "link": "https://stackoverflow.com/users/6787704/monterinio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 149, "favorite_count": 0, "accepted_answer_id": 40389345, "answer_count": 1, "score": -2, "last_activity_date": 1478119013, "creation_date": 1478117487, "question_id": 40388918, "link": "https://stackoverflow.com/questions/40388918/representation-of-association-in-c", "title": "representation of association in c++", "body": "<p>I want to represent UML type of association using C++. Unfortunetely I get error at </p>\n\n<pre><code>AssociationsP = new Player[n];\n</code></pre>\n\n<p>which is: \"no matching function for call to 'Player::Player()'. What am I missing? Is this concept even okay?</p>\n\n<pre><code>class Player;\nclass Team;\n\nclass Player {\nprivate:\n    int n;\n    Team * AssociationsT;\npublic:\n    Player(int x) : n(x) {\n        AssociationsT = new Team[n];\n    }\n    void setTeam(Team * t) {\n        for(int i = 0; i &lt; n; i++) {\n            AssociationsT[i] = t[i];\n        }\n    }\n};\n\nclass Team {\nprivate:\n    int n;\n    Player * AssociationsP;\npublic:\n    Team(int x) : n(x) {\n        AssociationsP = new Player[n];\n    }\n    void setPlayer(Player * p) {\n        for(int i = 0; i &lt; n; i++) {\n            AssociationsP[i] = p[i];\n        }\n    }\n};\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 18146, "user_id": 646619, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/bd61a0f309ebc135d2661710c2faf379?s=128&d=identicon&r=PG", "display_name": "Colonel Thirty Two", "link": "https://stackoverflow.com/users/646619/colonel-thirty-two"}, "edited": false, "score": 1, "creation_date": 1478117043, "post_id": 40388776, "comment_id": 68029255, "body": "Please include the full error message in your question."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1478117512, "post_id": 40388776, "comment_id": 68029514, "body": "This is probably related to the simulation software. I mean does it generate source files in the /var/tmp folder?"}, {"owner": {"reputation": 95, "user_id": 7089022, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9cd44e513f351772186b37c557ff6608?s=128&d=identicon&r=PG&f=1", "display_name": "SPLASH", "link": "https://stackoverflow.com/users/7089022/splash"}, "edited": false, "score": 0, "creation_date": 1478117651, "post_id": 40388776, "comment_id": 68029580, "body": "I&#39;m using Putty (Unix) to compile and I don&#39;t have access to the /var/tmp to check"}, {"owner": {"reputation": 149158, "user_id": 524368, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/oZ8Up.png?s=128&g=1", "display_name": "datenwolf", "link": "https://stackoverflow.com/users/524368/datenwolf"}, "edited": false, "score": 0, "creation_date": 1478118246, "post_id": 40388776, "comment_id": 68029904, "body": "@SPLASH: Of course you have access to <code>&#47;var&#47;tmp</code>. You have a shell. <code>cd</code>, <code>ls</code> and so on are your friend. That being said, this is not the cause of your problem."}], "answers": [{"comments": [{"owner": {"reputation": 95, "user_id": 7089022, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9cd44e513f351772186b37c557ff6608?s=128&d=identicon&r=PG&f=1", "display_name": "SPLASH", "link": "https://stackoverflow.com/users/7089022/splash"}, "edited": false, "score": 0, "creation_date": 1478120594, "post_id": 40389115, "comment_id": 68031170, "body": "As soon as you said library I slapped myself.  I went back and checked the libraries I found that I&#39;m missing &#39;conio.h&#39;. It didn&#39;t solve all the errors but it did remove some of them. Thanks buddy I will try to solve the other errors before posting another question XD"}], "tags": [], "owner": {"reputation": 149158, "user_id": 524368, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/oZ8Up.png?s=128&g=1", "display_name": "datenwolf", "link": "https://stackoverflow.com/users/524368/datenwolf"}, "is_accepted": true, "score": 1, "last_activity_date": 1478118198, "creation_date": 1478118198, "answer_id": 40389115, "question_id": 40388776, "link": "https://stackoverflow.com/questions/40388776/what-is-var-tmp-ccz0ct2g-o/40389115#40389115", "title": "What is /var/tmp//ccz0ct2G.o?", "body": "<blockquote>\n  <p>I don't understand why I'm getting these errors</p>\n</blockquote>\n\n<p>Your program tries to use something that's part of an external library or a different object file, but you're not passing that to the linker as well.</p>\n\n<blockquote>\n  <p>and what is /var/tmp//ccz0ct2G.o? </p>\n</blockquote>\n\n<p>A temporary object file, that contains intermediate data that's going to be used in later stages of the compilation process.</p>\n\n<p>Let me guess: You tried to compile with a command that went something like</p>\n\n<pre><code>g++ somesource.cc\n</code></pre>\n\n<p>You see, compilation consists of several stages:</p>\n\n<pre><code>1. compiling the individual source files (`*.c`, `*.cc` and so on) into *object files* (`*.o`).\n2. linking the produced object files together into the actual program or library\n</code></pre>\n\n<p>When you call the compiler like you did, this is a shorthand that does both operations from a single call. But for the sake of simplicity and also because object files can grow rather large and it can pose a problem to keep them all in memory, the result of compiling the source file is placed into a temporary object file. That's what you have there.</p>\n"}], "owner": {"reputation": 95, "user_id": 7089022, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9cd44e513f351772186b37c557ff6608?s=128&d=identicon&r=PG&f=1", "display_name": "SPLASH", "link": "https://stackoverflow.com/users/7089022/splash"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "accepted_answer_id": 40389115, "answer_count": 1, "score": -3, "last_activity_date": 1478118198, "creation_date": 1478116986, "last_edit_date": 1478117526, "question_id": 40388776, "link": "https://stackoverflow.com/questions/40388776/what-is-var-tmp-ccz0ct2g-o", "title": "What is /var/tmp//ccz0ct2G.o?", "body": "<p>So, I'm running a CPU scheduling smulation code but I came across a few errors while compiling</p>\n\n<pre><code>Undefined                       first referenced\n symbol                             in file\nstd::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt;::basic_string(std::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt; const&amp;) /var/tmp//ccz0ct2G.o\nstd::basic_ostream&lt;char, std::char_traits&lt;char&gt; &gt;::operator&lt;&lt;(std::basic_ostream&lt;char, std::char_traits&lt;char&gt; &gt;&amp; (*)(std::basic_ostream&lt;char, std::char_traits&lt;char&gt; &gt;&amp;)) /var/tmp//ccz0ct2G.o\nstd::cout                           /var/tmp//ccz0ct2G.o\nstd::basic_ofstream&lt;char, std::char_traits&lt;char&gt; &gt;::close() /var/tmp//ccz0ct2G.o\nstd::ios_base::Init::~Init()        /var/tmp//ccz0ct2G.o\nstd::ios_base::Init::Init()         /var/tmp//ccz0ct2G.o\nstd::basic_ios&lt;char, std::char_traits&lt;char&gt; &gt;::operator!() const /var/tmp//ccz0ct2G.o\n__gxx_personality_v0                /var/tmp//ccz0ct2G.o\nstd::basic_ostream&lt;char, std::char_traits&lt;char&gt; &gt;&amp; std::operator&lt;&lt; &lt;std::char_traits&lt;char&gt; &gt;(std::basic_ostream&lt;char, std::char_traits&lt;char&gt; &gt;&amp;, char const*) /var/tmp//ccz0ct2G.o\nstd::basic_ifstream&lt;char, std::char_traits&lt;char&gt; &gt;::basic_ifstream(char const*, std::_Ios_Openmode) /var/tmp//ccz0ct2G.o\nstd::basic_ostream&lt;char, std::char_traits&lt;char&gt; &gt;&amp; std::endl&lt;char, std::char_traits&lt;char&gt; &gt;(std::basic_ostream&lt;char, std::char_traits&lt;char&gt; &gt;&amp;) /var/tmp//ccz0ct2G.o\nld: fatal: Symbol referencing errors. No output written to a.out\ncollect2: ld returned 1 exit status\n</code></pre>\n\n<p>I don't understand why I'm getting these errors and what is     <code>/var/tmp//ccz0ct2G.o</code>? </p>\n\n<p>Almost all the errors have it.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 2, "creation_date": 1478117304, "post_id": 40388760, "comment_id": 68029404, "body": "Would you be happy with code that allows you to say <code>member_less&lt;T, &amp;T::y&gt;()</code> ?"}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1478117517, "post_id": 40388760, "comment_id": 68029516, "body": "@Nathan: But that doesn&#39;t allow you to select which member to sort by, at the call to <code>std::sort</code>."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1478117677, "post_id": 40388760, "comment_id": 68029592, "body": "@BenVoigt Ah.  I did not see that was what the OP was trying to do.  silly me."}, {"owner": {"reputation": 17676, "user_id": 4523099, "user_type": "registered", "accept_rate": 85, "profile_image": "https://lh5.googleusercontent.com/-p3t1IDsNokk/AAAAAAAAAAI/AAAAAAAAABE/EsrSYS8ok2Y/photo.jpg?sz=128", "display_name": "Humam Helfawi", "link": "https://stackoverflow.com/users/4523099/humam-helfawi"}, "reply_to_user": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1478117968, "post_id": 40388760, "comment_id": 68029757, "body": "@BenVoigt Yup I would"}], "answers": [{"comments": [{"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1478117821, "post_id": 40389000, "comment_id": 68029673, "body": "This is not compile-tested... if you share a test case that creates the vector, prints the results, etc., I&#39;ll be happy to add this to the test."}], "tags": [], "owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "is_accepted": true, "score": 7, "last_activity_date": 1478117771, "creation_date": 1478117771, "answer_id": 40389000, "question_id": 40388760, "link": "https://stackoverflow.com/questions/40388760/comparer-that-takes-the-wanted-attribute/40389000#40389000", "title": "Comparer that takes the wanted attribute", "body": "<pre><code>template&lt;typename T, typename MT&gt;\nstruct memberwise_less\n{\n    MT T::* const mptr;\n    auto operator()(const T&amp; left, const T&amp; right) const\n    { return (left.*mptr) &lt; (right.*mptr); }\n};\n\ntemplate&lt;typename T, typename MT&gt;\nmemberwise_less&lt;T, MT&gt; member_less(MT T::*mptr)\n{\n    return { mptr };\n}\n</code></pre>\n\n<p>and then you can do</p>\n\n<pre><code>std::sort(v.begin(), v.end(), member_less(&amp;T::y));\n</code></pre>\n"}], "owner": {"reputation": 17676, "user_id": 4523099, "user_type": "registered", "accept_rate": 85, "profile_image": "https://lh5.googleusercontent.com/-p3t1IDsNokk/AAAAAAAAAAI/AAAAAAAAABE/EsrSYS8ok2Y/photo.jpg?sz=128", "display_name": "Humam Helfawi", "link": "https://stackoverflow.com/users/4523099/humam-helfawi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 1, "accepted_answer_id": 40389000, "answer_count": 1, "score": 7, "last_activity_date": 1478117771, "creation_date": 1478116938, "question_id": 40388760, "link": "https://stackoverflow.com/questions/40388760/comparer-that-takes-the-wanted-attribute", "title": "Comparer that takes the wanted attribute", "body": "<p>In order to use a standard function like <code>std::sort</code> on some standard container <code>Container&lt;T&gt;</code></p>\n\n<pre><code>struct T{\n    int x,y;\n};\n</code></pre>\n\n<p>based on the <code>y</code> value, you need to write something like (for example):</p>\n\n<pre><code>std::vector&lt;T&gt; v;\n//fill v\nstd::sort(v.begin(),v.end(),[](const auto&amp; l,const auto&amp; r){\n    return l.y&lt;r.y;\n});\n</code></pre>\n\n<p>The comparer that was written as lambda function is used too much and re-written again and again during the code for various classes and attributes.</p>\n\n<p>Considering the case where <code>y</code>'s type is comparable (either like <code>int</code> or there is an overload for the <code>&lt; operator</code>), is there any way to achieve something like:</p>\n\n<pre><code>std::sort(v.begin(),v.end(),imaginary::less(T::y)); // Imaginary code\n</code></pre>\n\n<p>Is it possible in C++ to write such a function like <code>less</code>? or anything similar?</p>\n\n<p>I am asking because I remember something like that in some managed language (I am not sure maybe C# or Java). However, I am not sure even about this information if it is true or not.</p>\n"}, {"tags": ["c++", "operator-overloading", "assignment-operator"], "comments": [{"owner": {"reputation": 9690, "user_id": 1707560, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/8VK4M.jpg?s=128&g=1", "display_name": "imreal", "link": "https://stackoverflow.com/users/1707560/imreal"}, "edited": false, "score": 0, "creation_date": 1478115882, "post_id": 40388405, "comment_id": 68028636, "body": "Do types in the Standard Library count?"}, {"owner": {"reputation": 32394, "user_id": 528724, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/b428b7a4d372791efff952dafecd5782?s=128&d=identicon&r=PG", "display_name": "Mahesh", "link": "https://stackoverflow.com/users/528724/mahesh"}, "edited": false, "score": 0, "creation_date": 1478116163, "post_id": 40388405, "comment_id": 68028795, "body": "Are you asking when you assignment operator should be overloaded ? If yes, check <a href=\"https://en.wikipedia.org/wiki/Rule_of_three_(C%2B%2B_programming)\" rel=\"nofollow noreferrer\">Rule of three</a>."}, {"owner": {"reputation": 47412, "user_id": 3141234, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/78b45a835031f4ce03a6653b3262b5d3?s=128&d=identicon&r=PG", "display_name": "Alexander", "link": "https://stackoverflow.com/users/3141234/alexander"}, "reply_to_user": {"reputation": 9690, "user_id": 1707560, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/8VK4M.jpg?s=128&g=1", "display_name": "imreal", "link": "https://stackoverflow.com/users/1707560/imreal"}, "edited": false, "score": 0, "creation_date": 1478116377, "post_id": 40388405, "comment_id": 68028909, "body": "@imreal Sure, can you explain an example?"}, {"owner": {"reputation": 47412, "user_id": 3141234, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/78b45a835031f4ce03a6653b3262b5d3?s=128&d=identicon&r=PG", "display_name": "Alexander", "link": "https://stackoverflow.com/users/3141234/alexander"}, "reply_to_user": {"reputation": 32394, "user_id": 528724, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/b428b7a4d372791efff952dafecd5782?s=128&d=identicon&r=PG", "display_name": "Mahesh", "link": "https://stackoverflow.com/users/528724/mahesh"}, "edited": false, "score": 0, "creation_date": 1478116432, "post_id": 40388405, "comment_id": 68028935, "body": "@Mahesh I&#39;ve seen the Rule of Three, but I don&#39;t quite understand the (semantic) difference between defining a copy constructor, and overloading the assignment operator."}, {"owner": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 1, "creation_date": 1478117143, "post_id": 40388405, "comment_id": 68029313, "body": "You&#39;re probably confused by <code>MyClass c = thing_to_copy;</code> which calls the copy constructor instead of an assignment operator. If you replace that with <code>MyClass c; c = thing_to_copy;</code> you&#39;ll get the assignment operator."}], "answers": [{"comments": [{"owner": {"reputation": 47412, "user_id": 3141234, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/78b45a835031f4ce03a6653b3262b5d3?s=128&d=identicon&r=PG", "display_name": "Alexander", "link": "https://stackoverflow.com/users/3141234/alexander"}, "edited": false, "score": 0, "creation_date": 1478118353, "post_id": 40388621, "comment_id": 68029968, "body": "I see. This distinction between when a copy constructor is invoked vs when the assignment operator is invoked is what cleared it up for me."}, {"owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "reply_to_user": {"reputation": 47412, "user_id": 3141234, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/78b45a835031f4ce03a6653b3262b5d3?s=128&d=identicon&r=PG", "display_name": "Alexander", "link": "https://stackoverflow.com/users/3141234/alexander"}, "edited": false, "score": 0, "creation_date": 1478120349, "post_id": 40388621, "comment_id": 68031030, "body": "@AlexanderMomchliov Glad it helped!"}], "tags": [], "owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "is_accepted": true, "score": 3, "last_activity_date": 1478116402, "creation_date": 1478116402, "answer_id": 40388621, "question_id": 40388405, "link": "https://stackoverflow.com/questions/40388405/example-applications-of-overloading-the-assignment-operator/40388621#40388621", "title": "Example applications of overloading the assignment operator", "body": "<p>Example:</p>\n\n<pre><code>struct X\n{\n    int *p;\n    X(): p{new int[42]}\n    ~X() { delete p; }\n};\n</code></pre>\n\n<p>What will happen if you do</p>\n\n<pre><code>X x, y;\nx = y;\n</code></pre>\n\n<p>? The default assignment operator will copy the raw pointer, and you'll end up delete-ing the same pointer twice by the destructors of <code>x</code> and <code>y</code>. In fact, you'd better declare a copy constructor here too (or, even better, use smart pointers). Note that in</p>\n\n<pre><code>X x = some_obj;\n</code></pre>\n\n<p>the copy constructor is invoked (or <a href=\"http://en.cppreference.com/w/cpp/language/copy_elision\" rel=\"nofollow noreferrer\">elided</a> if the rhs is a prvalue). The assignment operator is invoked only <strong>after</strong> construction, when you say</p>\n\n<pre><code>x = some_other_obj; // x is already constructed here\n</code></pre>\n\n<p>If you ask whether the <code>operator=</code> should exist at all (in contrast to e.g. Java), then it's probably a matter of personal preference.</p>\n"}], "owner": {"reputation": 47412, "user_id": 3141234, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/78b45a835031f4ce03a6653b3262b5d3?s=128&d=identicon&r=PG", "display_name": "Alexander", "link": "https://stackoverflow.com/users/3141234/alexander"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "accepted_answer_id": 40388621, "answer_count": 1, "score": 1, "last_activity_date": 1478116402, "creation_date": 1478115635, "question_id": 40388405, "link": "https://stackoverflow.com/questions/40388405/example-applications-of-overloading-the-assignment-operator", "title": "Example applications of overloading the assignment operator", "body": "<p>I hope this isn't seen \"primarily opinion based\" or \"too broad\". It's fairly straight forward question:</p>\n\n<p>What are some example problems to which overloading the assignment operator offers a solution?</p>\n\n<p>I don't think I've yet seen a situation in which it would be useful, especially considering the negative implications of having a program full of surprise implicit behaviours and \"smoke and mirrors\".</p>\n"}, {"tags": ["c++", "extern"], "comments": [{"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 3, "creation_date": 1478115543, "post_id": 40388336, "comment_id": 68028449, "body": "<code>a</code> is a pointer. It&#39;s probably not been initialised. Where is <code>a</code> declared?"}, {"owner": {"reputation": 32394, "user_id": 528724, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/b428b7a4d372791efff952dafecd5782?s=128&d=identicon&r=PG", "display_name": "Mahesh", "link": "https://stackoverflow.com/users/528724/mahesh"}, "edited": false, "score": 0, "creation_date": 1478115576, "post_id": 40388336, "comment_id": 68028470, "body": "Pointer needs to point a valid memory location."}, {"owner": {"reputation": 13337, "user_id": 4324224, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/YF2EX.png?s=128&g=1", "display_name": "W.F.", "link": "https://stackoverflow.com/users/4324224/w-f"}, "edited": false, "score": 2, "creation_date": 1478115578, "post_id": 40388336, "comment_id": 68028471, "body": "You should provide <a href=\"http://stackoverflow.com/help/mcve\">mcve</a> to let other people help you..."}, {"owner": {"reputation": 389, "user_id": 5219032, "user_type": "registered", "profile_image": "https://graph.facebook.com/1469151279/picture?type=large", "display_name": "Enes Altuncu", "link": "https://stackoverflow.com/users/5219032/enes-altuncu"}, "edited": false, "score": 0, "creation_date": 1478115707, "post_id": 40388336, "comment_id": 68028545, "body": "a is the same a with the extern A* a"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1478115767, "post_id": 40388336, "comment_id": 68028578, "body": "@qwerty Again: How do you initialize that pointer? (I removed the irrelevant tags)"}, {"owner": {"reputation": 26583, "user_id": 1441, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fb7f1cd450084fdb4bfc9376c7dba2a7?s=128&d=identicon&r=PG", "display_name": "crashmstr", "link": "https://stackoverflow.com/users/1441/crashmstr"}, "edited": false, "score": 1, "creation_date": 1478115888, "post_id": 40388336, "comment_id": 68028638, "body": "An <code>extern</code> declaration says that the definition is elsewhere. Where do you <i>define</i> <code>a</code>? Also, where do you assign to <code>a</code> a valid pointer to <code>A</code>?"}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 2, "creation_date": 1478115957, "post_id": 40388336, "comment_id": 68028680, "body": "The problem here has nothing to do with <code>extern</code> or <code>inline</code>. It&#39;s just an uninitialized (or possibly null) pointer."}, {"owner": {"reputation": 389, "user_id": 5219032, "user_type": "registered", "profile_image": "https://graph.facebook.com/1469151279/picture?type=large", "display_name": "Enes Altuncu", "link": "https://stackoverflow.com/users/5219032/enes-altuncu"}, "edited": false, "score": 0, "creation_date": 1478115989, "post_id": 40388336, "comment_id": 68028697, "body": "The codes above are in my .h file. In cpp file I also declared &quot;a&quot; as &quot;A* a&quot;."}, {"owner": {"reputation": 389, "user_id": 5219032, "user_type": "registered", "profile_image": "https://graph.facebook.com/1469151279/picture?type=large", "display_name": "Enes Altuncu", "link": "https://stackoverflow.com/users/5219032/enes-altuncu"}, "edited": false, "score": 0, "creation_date": 1478116024, "post_id": 40388336, "comment_id": 68028720, "body": "How can I initialize this pointer according to my class?"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1478116964, "post_id": 40388336, "comment_id": 68029212, "body": "@qwerty Well again (again): <b>How do you initialize that pointer in your <code>.cpp</code> file??</b>"}, {"owner": {"reputation": 389, "user_id": 5219032, "user_type": "registered", "profile_image": "https://graph.facebook.com/1469151279/picture?type=large", "display_name": "Enes Altuncu", "link": "https://stackoverflow.com/users/5219032/enes-altuncu"}, "edited": false, "score": 0, "creation_date": 1478117189, "post_id": 40388336, "comment_id": 68029335, "body": "I didn&#39;t initialize it. I just declared and fill it in Func()"}], "answers": [{"comments": [{"owner": {"reputation": 13337, "user_id": 4324224, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/YF2EX.png?s=128&g=1", "display_name": "W.F.", "link": "https://stackoverflow.com/users/4324224/w-f"}, "edited": false, "score": 2, "creation_date": 1478116518, "post_id": 40388585, "comment_id": 68028979, "body": "you could explain OP what the <code>Func</code> should do by some example... don&#39;t hesitate to edit your answer to make it better"}], "tags": [], "owner": {"reputation": 61, "user_id": 6875267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f905922bd6633055f9798ff568c92cd?s=128&d=identicon&r=PG&f=1", "display_name": "mich1985", "link": "https://stackoverflow.com/users/6875267/mich1985"}, "is_accepted": true, "score": 2, "last_activity_date": 1478116375, "last_edit_date": 1478116375, "creation_date": 1478116281, "answer_id": 40388585, "question_id": 40388336, "link": "https://stackoverflow.com/questions/40388336/usage-of-extern-inline/40388585#40388585", "title": "Usage of extern &amp; inline", "body": "<p>Use <code>a = new A()</code> somewhere in your initilization code. A more better way would be to call <code>Func(A *a)</code> with an argument instead of using your \"extern\" statement.</p>\n"}], "owner": {"reputation": 389, "user_id": 5219032, "user_type": "registered", "profile_image": "https://graph.facebook.com/1469151279/picture?type=large", "display_name": "Enes Altuncu", "link": "https://stackoverflow.com/users/5219032/enes-altuncu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "accepted_answer_id": 40388585, "answer_count": 1, "score": -1, "last_activity_date": 1478116375, "creation_date": 1478115392, "last_edit_date": 1478115786, "question_id": 40388336, "link": "https://stackoverflow.com/questions/40388336/usage-of-extern-inline", "title": "Usage of extern &amp; inline", "body": "<p>In my C++ code, I have a definition like that;</p>\n\n<pre><code>class A {\n    int i;\npublic:\n    void setI(int temp) {\n        i = temp;\n    }\n};\n\nextern A* a;\n</code></pre>\n\n<p>After that I have a function which fills the variable of a with some stream obtained from arguments.</p>\n\n<pre><code>inline void Func() {\n    ... // Stream definition with ifstream etc.\n    int k;\n    stream &gt;&gt; k;\n    a-&gt;setI(k);    // Gives segmentation fault...\n}\n</code></pre>\n\n<p>What can be the reason?\nThanks in advance...</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 5296, "user_id": 418066, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/38yuw.png?s=128&g=1", "display_name": "Biffen", "link": "https://stackoverflow.com/users/418066/biffen"}, "edited": false, "score": 7, "creation_date": 1478115439, "post_id": 40388328, "comment_id": 68028389, "body": "<code>x == 5 || 6</code> means if <i>either</i> <code>x == 5</code> is true <i>or</i> <code>6</code> is true, and the latter always is. To test whether <code>x</code> is <code>5</code> or <code>6</code> use <code>x == 5 || x == 6</code>."}, {"owner": {"reputation": 76876, "user_id": 287586, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/tB5AG.png?s=128&g=1", "display_name": "dan04", "link": "https://stackoverflow.com/users/287586/dan04"}, "edited": false, "score": 2, "creation_date": 1478115459, "post_id": 40388328, "comment_id": 68028398, "body": "And <code>6</code> is true, because it&#39;s nonzero."}, {"owner": {"reputation": 3238, "user_id": 3042438, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b930cad6b909cf6546dfe29bdeb8af88?s=128&d=identicon&r=PG&f=1", "display_name": "SunKnight0", "link": "https://stackoverflow.com/users/3042438/sunknight0"}, "edited": false, "score": 3, "creation_date": 1478115496, "post_id": 40388328, "comment_id": 68028426, "body": "What you probably mean to do is <code>(x == 5 || x == 6) </code>"}], "answers": [{"tags": [], "owner": {"reputation": 2307, "user_id": 1264727, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4a1fbb1447f3c3c2bc500e2b744ee6c9?s=128&d=identicon&r=PG", "display_name": "DUman", "link": "https://stackoverflow.com/users/1264727/duman"}, "is_accepted": false, "score": 5, "last_activity_date": 1478115587, "creation_date": 1478115587, "answer_id": 40388391, "question_id": 40388328, "link": "https://stackoverflow.com/questions/40388328/how-does-the-or-operator-work-in-c/40388391#40388391", "title": "How does the &quot;Or&quot; operator work? (In C++)", "body": "<pre><code>if (x == 5 || 6)\n</code></pre>\n\n<p>should be </p>\n\n<pre><code>if (x == 5 || x == 6) \n</code></pre>\n\n<p>You think you're checking \"if x is 5 or x is 6\", but you're actually checking \"if x is 5, or if 6\". In C++, any non-zero number by itself in an if-statement evaluates to true, so your initial <code>if</code> is equivalent to:</p>\n\n<pre><code>if (x == 5 || true)\n</code></pre>\n\n<p>The behaviour is specified in the C++ standard as follows:</p>\n\n<blockquote>\n  <p>A zero value, null\n    pointer value, or null member pointer value is converted to false; any\n    other value is converted to true.</p>\n</blockquote>\n"}], "owner": {"reputation": 7, "user_id": 7076239, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-YKDU7cdXwxU/AAAAAAAAAAI/AAAAAAAAAD4/28YOHe52_Ac/photo.jpg?sz=128", "display_name": "Northern Guy", "link": "https://stackoverflow.com/users/7076239/northern-guy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "closed_date": 1478195780, "answer_count": 1, "score": -8, "last_activity_date": 1478115659, "creation_date": 1478115357, "question_id": 40388328, "link": "https://stackoverflow.com/questions/40388328/how-does-the-or-operator-work-in-c", "closed_reason": "Not suitable for this site", "title": "How does the &quot;Or&quot; operator work? (In C++)", "body": "<pre><code>#include \"stdafx.h\"\n#include &lt;iostream&gt;\n\nint x = 0;\n\nint main(){\nstd::cin &gt;&gt; x;\nif (x == 5 || 6) {\nstd::cout &lt;&lt; \"5 or 6\\n\";\n}\nelse {\nstd::cout &lt;&lt; \"Not 5 or 6\\n\";\n}\n    return 0; \n}\n</code></pre>\n\n<p>This simple code only returns \"5 or 6\" to the console, no matter what number you put in it.  I really don't understand why. If || is the or operator, then it should work. If x is 5 or 6 it should display \"5 or 6\". If it's not, display \"Not 5 or 6\". Could someone please explain?</p>\n"}, {"tags": ["c++", "opencv", "ffmpeg"], "answers": [{"tags": [], "owner": {"reputation": 323, "user_id": 4236833, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/e67cbaedc42f43f4b17b895dab825099?s=128&d=identicon&r=PG", "display_name": "Akihiko", "link": "https://stackoverflow.com/users/4236833/akihiko"}, "is_accepted": true, "score": 0, "last_activity_date": 1502269504, "creation_date": 1502269504, "answer_id": 45586189, "question_id": 40388321, "link": "https://stackoverflow.com/questions/40388321/opencv-c-videocapture-fails-to-open-video-files/45586189#45586189", "title": "OpenCV-C++ VideoCapture fails to open video files", "body": "<p>So, I've solved this issue.</p>\n\n<p>By analyzing the program with <code>ldd</code>, I found that it was linked to, for example, <code>/usr/lib/libopencv_highgui.so</code>.  However, in x86_64 system, it should be <code>/usr/lib/x86_64-linux-gnu/libopencv_highgui.so</code>.  In my system, both files were installed.</p>\n\n<p>The issue was caused by <code>/usr/lib/libopencv_*.so</code> (I'm not sure how I installed them.  Maybe from source code...?).  I removed these files, and compiled the above program again.  Then it worked without errors.</p>\n"}], "owner": {"reputation": 323, "user_id": 4236833, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/e67cbaedc42f43f4b17b895dab825099?s=128&d=identicon&r=PG", "display_name": "Akihiko", "link": "https://stackoverflow.com/users/4236833/akihiko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 925, "favorite_count": 0, "accepted_answer_id": 45586189, "answer_count": 1, "score": 1, "last_activity_date": 1502269504, "creation_date": 1478115333, "question_id": 40388321, "link": "https://stackoverflow.com/questions/40388321/opencv-c-videocapture-fails-to-open-video-files", "title": "OpenCV-C++ VideoCapture fails to open video files", "body": "<p>Recently I upgraded my OS from Ubuntu Precise Saucy (13.10) to Trusty (14.04).  After this upgrade, cv::VideoCapture became not working properly.  The program aborts when reading a video file.  For example,</p>\n\n<pre><code>int main(int argc, char**argv)\n{\n  cv::VideoCapture vin(\"sample/vout2l.avi\");\n...\n</code></pre>\n\n<p>Executing this program, it aborts with a message:</p>\n\n<pre><code>*** Error in `./cv2-videoread.out': malloc(): memory corruption: 0x0000000000e3eff0 ***\nAbort (core dumped)\n</code></pre>\n\n<p>The backtrace looks like:</p>\n\n<pre><code>[New LWP 15586]\n[New LWP 15587]\n[Thread debugging using libthread_db enabled]\nUsing host libthread_db library \"/lib/x86_64-linux-gnu/libthread_db.so.1\".\nCore was generated by `./cv2-videoread.out'.\nProgram terminated with signal SIGABRT, Aborted.\n#0  0x00007ff953e61c37 in raise () from /lib/x86_64-linux-gnu/libc.so.6\n(gdb) bt\n#0  0x00007ff953e61c37 in raise () from /lib/x86_64-linux-gnu/libc.so.6\n#1  0x00007ff953e65028 in abort () from /lib/x86_64-linux-gnu/libc.so.6\n#2  0x00007ff953e9e2a4 in ?? () from /lib/x86_64-linux-gnu/libc.so.6\n#3  0x00007ff953eabe26 in ?? () from /lib/x86_64-linux-gnu/libc.so.6\n#4  0x00007ff953eac1ab in ?? () from /lib/x86_64-linux-gnu/libc.so.6\n#5  0x00007ff953eadba4 in ?? () from /lib/x86_64-linux-gnu/libc.so.6\n#6  0x00007ff953eaf7d2 in posix_memalign () from /lib/x86_64-linux-gnu/libc.so.6\n#7  0x00007ff94fa640fe in av_malloc () from /usr/lib/x86_64-linux-gnu/libavutil.so.52\n#8  0x00007ff94fa641b1 in av_strdup () from /usr/lib/x86_64-linux-gnu/libavutil.so.52\n#9  0x00007ff94fa5e5db in av_dict_set ()\n  from /usr/lib/x86_64-linux-gnu/libavutil.so.52\n#10 0x00007ff954738574 in CvCapture_FFMPEG::open(char const*) ()\n  from /usr/lib/libopencv_highgui.so.2.4\n#11 0x00007ff954738719 in cvCreateFileCapture_FFMPEG ()\n  from /usr/lib/libopencv_highgui.so.2.4\n#12 0x00007ff95473aac9 in cvCreateFileCapture_FFMPEG_proxy(char const*) ()\n  from /usr/lib/libopencv_highgui.so.2.4\n---Type &lt;return&gt; to continue, or q &lt;return&gt; to quit---\n#13 0x00007ff954722d89 in cvCreateFileCapture ()\n  from /usr/lib/libopencv_highgui.so.2.4\n#14 0x00007ff954723045 in cv::VideoCapture::open(std::string const&amp;) ()\n  from /usr/lib/libopencv_highgui.so.2.4\n#15 0x00007ff95472315c in cv::VideoCapture::VideoCapture(std::string const&amp;) ()\n  from /usr/lib/libopencv_highgui.so.2.4\n#16 0x0000000000401281 in main (argc=1, argv=0x7fff1f938388) at cv2-videoread.cpp:30\n(gdb)\n</code></pre>\n\n<p>NOTE: <code>cv::VideoCapture vin(...</code> is 30th line.</p>\n\n<p>Before upgrading the OS, this code was working with the same input file.</p>\n\n<p>From the backtrace, it seems that the trouble happens at <code>CvCapture_FFMPEG</code> and <code>libavutil</code>.  I upgraded the packages <code>ffmpeg libavutil-dev libavutil51 libavutil52</code> but they were already up-to-date.\nAlso, OpenCV packages are up-to-date (I checked <code>libopencv-core-dev libopencv-core2.4 libopencv-dev libopencv-highgui-dev libopencv-highgui2.4</code>).</p>\n\n<p>I also tested OpenCV built from source, but got the same results.</p>\n\n<p>Do you have ideas to figure this out?</p>\n"}, {"tags": ["c++", "fstream"], "comments": [{"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1478115536, "post_id": 40388303, "comment_id": 68028444, "body": "What operating system? What compiler? What compilation options?"}, {"owner": {"reputation": 6610, "user_id": 2403810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84c63a4cc13b434306ccc00ba2cd64d6?s=128&d=identicon&r=PG&f=1", "display_name": "tinstaafl", "link": "https://stackoverflow.com/users/2403810/tinstaafl"}, "edited": false, "score": 1, "creation_date": 1478115542, "post_id": 40388303, "comment_id": 68028447, "body": "It would seem to me that the file isn&#39;t in the same folder as the executable, therefore it can&#39;t find it to open it.  Also many online compilers will use command-line arguments instead of literals."}], "answers": [{"tags": [], "owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "is_accepted": false, "score": 1, "last_activity_date": 1478116006, "last_edit_date": 1478116006, "creation_date": 1478115645, "answer_id": 40388410, "question_id": 40388303, "link": "https://stackoverflow.com/questions/40388303/error-in-a-cfiles-and-streams-program-for-creating-a-file/40388410#40388410", "title": "Error in a C++(files and streams) program for creating a file", "body": "<p>The <a href=\"http://en.cppreference.com/w/cpp/io/basic_fstream/basic_fstreamhttp://en.cppreference.com/w/cpp/io/basic_fstream/basic_fstream\" rel=\"nofollow noreferrer\">fstream constructor</a> and <a href=\"http://en.cppreference.com/w/cpp/io/basic_fstream/open\" rel=\"nofollow noreferrer\">open function</a> open for read/write by default. The file must already exist to be opened in this mode. Instead, open for write:</p>\n\n<pre><code>file.open(\"a.txt\", ios::out);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1324, "user_id": 6212666, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6979ce8911c0f0e6c27f93bb6b39f09?s=128&d=identicon&r=PG", "display_name": "John D", "link": "https://stackoverflow.com/users/6212666/john-d"}, "is_accepted": false, "score": 2, "last_activity_date": 1478115852, "creation_date": 1478115852, "answer_id": 40388475, "question_id": 40388303, "link": "https://stackoverflow.com/questions/40388303/error-in-a-cfiles-and-streams-program-for-creating-a-file/40388475#40388475", "title": "Error in a C++(files and streams) program for creating a file", "body": "<p><code>fstream.open()</code> will fail if the file does not exist.\nTo create the file if it doesn't exist</p>\n\n<pre><code>file.open(\"a.txt\", ios_base::out);\n</code></pre>\n\n<p>Or use <code>ofstream</code></p>\n\n<pre><code>ofstream file;\nfile.open(\"a.txt\");\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 0, "creation_date": 1478116318, "post_id": 40388480, "comment_id": 68028878, "body": "The question does say it&#39;s attempting to <i>create</i> a file."}], "tags": [], "owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "is_accepted": false, "score": 0, "last_activity_date": 1478158794, "last_edit_date": 1495535252, "creation_date": 1478115872, "answer_id": 40388480, "question_id": 40388303, "link": "https://stackoverflow.com/questions/40388303/error-in-a-cfiles-and-streams-program-for-creating-a-file/40388480#40388480", "title": "Error in a C++(files and streams) program for creating a file", "body": "<p>Your program's behavior is probably depending upon the <a href=\"https://en.wikipedia.org/wiki/Operating_system\" rel=\"nofollow noreferrer\">operating system</a>. BTW, if you want to learn more about them, read <a href=\"http://pages.cs.wisc.edu/~remzi/OSTEP/\" rel=\"nofollow noreferrer\"><em>Operating Systems: Three Easy Pieces</em></a>. Perhaps the current <a href=\"https://en.wikipedia.org/wiki/Working_directory\" rel=\"nofollow noreferrer\">working directory</a> already contains the file to be written or does not have the appropriate permissions (it should be writable to enable file creation). Details are operating system (and perhaps <a href=\"https://en.wikipedia.org/wiki/File_system\" rel=\"nofollow noreferrer\">file system</a>) specific. IIRC, some OSes (<a href=\"https://en.wikipedia.org/wiki/Microsoft_Windows\" rel=\"nofollow noreferrer\">Windows</a> probably) disallow opening a file which is already opened by some other process.</p>\n\n<p>On Linux, you could use <a href=\"http://man7.org/linux/man-pages/man1/strace.1.html\" rel=\"nofollow noreferrer\">strace(1)</a> to find out what system calls have failed (actually, it tells you all the <a href=\"https://en.wikipedia.org/wiki/System_call\" rel=\"nofollow noreferrer\">system calls</a> that have been executed by some given program or <a href=\"https://en.wikipedia.org/wiki/Process_%28computing%29\" rel=\"nofollow noreferrer\">process</a>).</p>\n\n<p>This is [probably] not <em>always</em> guaranteed by C++ standards (but see <a href=\"http://en.cppreference.com/w/cpp/io/ios_base/sync_with_stdio\" rel=\"nofollow noreferrer\">sync_with_stdio</a>), but many C++ standard libraries are above (and compatible with) the C standard library which sets <a href=\"http://man7.org/linux/man-pages/man3/errno.3.html\" rel=\"nofollow noreferrer\">errno(3)</a> (see also <a href=\"http://man7.org/linux/man-pages/man3/strerror.3.html\" rel=\"nofollow noreferrer\">strerror(3)</a> and <a href=\"http://man7.org/linux/man-pages/man3/perror.3.html\" rel=\"nofollow noreferrer\">perror(3)</a> ...) on <em>failure</em>; then you might try:</p>\n\n<pre><code> fstream file; \n\n file.open(\"a.txt\", ios::out);\n if (!file) {\n     // perror(\"a.txt\");\n     cout&lt;&lt;\"Error in creating file!!!\" &lt;&lt; strerror(errno) &lt;&lt; endl;\n }\n</code></pre>\n\n<p>Of course, as other answers told you (<a href=\"https://stackoverflow.com/a/40388410/841108\">this</a> &amp; <a href=\"https://stackoverflow.com/a/40388475/841108\">that</a>) you need the correct mode for <a href=\"http://en.cppreference.com/w/cpp/io/basic_ofstream/open\" rel=\"nofollow noreferrer\">open</a>...</p>\n\n<p>See also <a href=\"http://en.cppreference.com/w/cpp/error/system_error\" rel=\"nofollow noreferrer\">std::system_error</a></p>\n"}], "owner": {"reputation": 1, "user_id": 7099287, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3eb3865a44c92f03bbfb139f4aa0838d?s=128&d=identicon&r=PG&f=1", "display_name": "Abdullah Khan", "link": "https://stackoverflow.com/users/7099287/abdullah-khan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "answer_count": 3, "score": -1, "last_activity_date": 1478158794, "creation_date": 1478115270, "last_edit_date": 1478116830, "question_id": 40388303, "link": "https://stackoverflow.com/questions/40388303/error-in-a-cfiles-and-streams-program-for-creating-a-file", "title": "Error in a C++(files and streams) program for creating a file", "body": "<p>I have written this program in order to create a file using <code>fstream</code> and the output should show either the file has been created or not. I have run it on several online compilers like <strong>Codechef</strong>,<strong>C++</strong> shell etc. The compilers has successfully compiled this program but the output is not coming accordingly, instead of saying file created compiler says error in creating file.\nCan this be due to development tool?</p>\n\n<p>Following is the code for this program:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\nusing namespace std;\n\nint main()\n{\n    fstream file; \n\n    file.open(\"a.txt\");\n    if(!file)\n    {\n        cout&lt;&lt;\"Error in creating file!!!\";\n\n    }\n    else \n    {\n        cout&lt;&lt;\"File created successfully.\";\n        file.close();\n    }\n} \n</code></pre>\n"}, {"tags": ["c++", "arrays"], "comments": [{"owner": {"reputation": 1580, "user_id": 6667256, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c939d82ad703536dcfc9f9eee6dd819?s=128&d=identicon&r=PG&f=1", "display_name": "Franck", "link": "https://stackoverflow.com/users/6667256/franck"}, "edited": false, "score": 0, "creation_date": 1478115469, "post_id": 40388299, "comment_id": 68028407, "body": "In the case <code>DATA[i]&gt;largestNumber</code> you should add <code>loc2 = loc1;</code> before <code>loc1 = i</code>: each time you assign <code>secondLargestNumber</code>, you have to assign <code>loc2</code>."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1478116260, "post_id": 40388299, "comment_id": 68028845, "body": "Note you do not need to keep values, positions are enough. This will simplify code significantly"}], "answers": [{"comments": [{"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1478122041, "post_id": 40388523, "comment_id": 68031926, "body": "your code has possible UB, nobody says that values are unique. It may have different result as OP&#39;s code. Though it is not clear if OP&#39;s code is correct."}], "tags": [], "owner": {"reputation": 2673, "user_id": 4558644, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/b6c0ca1e65b6c1e58eae9dc635702243?s=128&d=identicon&r=PG&f=1", "display_name": "mkmostafa", "link": "https://stackoverflow.com/users/4558644/mkmostafa"}, "is_accepted": false, "score": 2, "last_activity_date": 1478118537, "last_edit_date": 1478118537, "creation_date": 1478116038, "answer_id": 40388523, "question_id": 40388299, "link": "https://stackoverflow.com/questions/40388299/largest-and-second-largest-number-in-array-c/40388523#40388523", "title": "Largest and second largest number in array C++", "body": "<p>may I suggest a simpler solution?</p>\n\n<pre><code>#include &lt;functional&gt;\n#include &lt;set&gt;\n#include &lt;iostream&gt;\n\nint main() {\n  std::set&lt;int, std::greater&lt;int&gt;&gt; s;\n  int input;\n  while(true) { // choose your stopping condition\n    cin &gt;&gt; input;\n    s.insert(input);\n  }\n  std::cout &lt;&lt; (*s.begin()) &lt;&lt; (*std::next(s.begin())) &lt;&lt; std::endl;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "is_accepted": false, "score": 0, "last_activity_date": 1478117109, "creation_date": 1478117109, "answer_id": 40388808, "question_id": 40388299, "link": "https://stackoverflow.com/questions/40388299/largest-and-second-largest-number-in-array-c/40388808#40388808", "title": "Largest and second largest number in array C++", "body": "<p>if you only keep positions, not values, your code can be significantly simplified:</p>\n\n<pre><code> int largest = 0, second = -1;\n\n for (int i = 1; i &lt; 10; i++) {\n    if( second == -1 || DATA[i] &gt; DATA[second] ) {\n        second = i;\n        if( DATA[second] &gt; DATA[largest] )\n            std::swap( largest, second );\n    }\n }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 56, "user_id": 7084149, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2bbef4913099f624536e66b5042e8c85?s=128&d=identicon&r=PG&f=1", "display_name": "Harikumar S.", "link": "https://stackoverflow.com/users/7084149/harikumar-s"}, "is_accepted": false, "score": 0, "last_activity_date": 1478231490, "last_edit_date": 1478231490, "creation_date": 1478166163, "answer_id": 40398208, "question_id": 40388299, "link": "https://stackoverflow.com/questions/40388299/largest-and-second-largest-number-in-array-c/40398208#40398208", "title": "Largest and second largest number in array C++", "body": "<p>use \"loc2=loc1\" statement at first if block I think it will work ,check this code,</p>\n\n<pre><code>for (int i = 2; i &lt; 10; i++)\n{\n    if (DATA[i]&gt;largestNumber)\n    {\n        secondLargestNumber = largestNumber;\n        loc2=loc1;\n        largestNumber = DATA[i];\n        loc1 = i;\n\n    }\n    else if (DATA[i]&gt;secondLargestNumber)\n    {\n        secondLargestNumber = DATA[i];\n        loc2 = i;\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 2158736, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69bc8e1eb0d0d20bb380a7fb36fe8480?s=128&d=identicon&r=PG", "display_name": "user2158736", "link": "https://stackoverflow.com/users/2158736/user2158736"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3709, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1502040622, "creation_date": 1478115258, "last_edit_date": 1478121707, "question_id": 40388299, "link": "https://stackoverflow.com/questions/40388299/largest-and-second-largest-number-in-array-c", "title": "Largest and second largest number in array C++", "body": "<p><a href=\"https://i.stack.imgur.com/eZQK6.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/eZQK6.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>I have written a code in C++ for finding largest and second largest element in a array. Code works fine but the problem is location of second largest number is not updated. Although value of second largest number is correct but its location is not correct.</p>\n\n<pre><code>    #include&lt;iostream&gt;\nusing namespace std;\nvoid main()\n{\n    int DATA[10];\n    int largestNumber, secondLargestNumber, loc1, loc2;\n    cout &lt;&lt; \"Enter 10 numbers of array DATA\" &lt;&lt; endl;\n    for (int i = 0; i &lt; 10; i++)\n    {\n        cin &gt;&gt; DATA[i];\n    }\n    largestNumber = DATA[1];\n    secondLargestNumber = DATA[2];\n    loc1 = 1;\n    loc2 = 2;\n    if (largestNumber &lt; secondLargestNumber)\n    {\n        largestNumber = DATA[2];\n        secondLargestNumber = DATA[1];\n    }\n    for (int i = 2; i &lt; 10; i++)\n    {\n        if (DATA[i]&gt;largestNumber)\n        {\n            secondLargestNumber = largestNumber;\n            largestNumber = DATA[i];\n            loc1 = i;\n\n        }\n        else if (DATA[i]&gt;secondLargestNumber)\n        {\n            secondLargestNumber = DATA[i];\n            loc2 = i;\n        }\n    }\n    cout &lt;&lt; \"Largest Number with location   :\"&lt;&lt;largestNumber&lt;&lt;\"    \"&lt;&lt;loc1 &lt;&lt; endl;\n    cout &lt;&lt; \"Second Largest Number location     :\" &lt;&lt; secondLargestNumber&lt;&lt;\"    \"&lt;&lt;loc2 &lt;&lt; endl;\n    cin.get();\n    cin.get();\n}\n</code></pre>\n"}, {"tags": ["c++", "boost", "optional"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1478115291, "post_id": 40388229, "comment_id": 68028292, "body": "Probably to stay consistent with other type naming practices.  The actual value is <code>nullopt</code> and it is of type <code>nullopt_t</code>.  Just like <code>nullptr</code> is a value of type <code>nullptr_t</code>."}, {"owner": {"reputation": 8223, "user_id": 805579, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/0d2eb3294e0905aa3c750998db351ddc?s=128&d=identicon&r=PG", "display_name": "Niall Douglas", "link": "https://stackoverflow.com/users/805579/niall-douglas"}, "edited": false, "score": 0, "creation_date": 1478182157, "post_id": 40388229, "comment_id": 68057396, "body": "<code>nullopt</code> is also specific to <code>optional&lt;T&gt;</code>, whereas <code>none</code> could apply to anything. It&#39;s an interesting problem for the standardisation of <code>expected&lt;T, E&gt;</code> where <code>expected&lt;T, nullopt_t&gt;</code> is explicitly supposed to be semantically equivalent to <code>optional&lt;T&gt;</code>."}, {"owner": {"reputation": 4564, "user_id": 1908650, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/f316929a9cb85ac26281f87cae2f56f3?s=128&d=identicon&r=PG", "display_name": "Mohan", "link": "https://stackoverflow.com/users/1908650/mohan"}, "reply_to_user": {"reputation": 8223, "user_id": 805579, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/0d2eb3294e0905aa3c750998db351ddc?s=128&d=identicon&r=PG", "display_name": "Niall Douglas", "link": "https://stackoverflow.com/users/805579/niall-douglas"}, "edited": false, "score": 0, "creation_date": 1478186474, "post_id": 40388229, "comment_id": 68060716, "body": "@NiallDouglas That&#39;s what namespaces are for..."}], "answers": [{"comments": [{"owner": {"reputation": 4564, "user_id": 1908650, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/f316929a9cb85ac26281f87cae2f56f3?s=128&d=identicon&r=PG", "display_name": "Mohan", "link": "https://stackoverflow.com/users/1908650/mohan"}, "edited": false, "score": 0, "creation_date": 1479496769, "post_id": 40677908, "comment_id": 68599479, "body": "Very glad to hear about work on <code>none</code>.  <code>nullopt</code> <i>really</i> hurts readability.  And, more importantly: thank you for your work on this!"}], "tags": [], "owner": {"reputation": 4415, "user_id": 838509, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c3baf4aa5bebf6d1407ed4e3b0981864?s=128&d=identicon&r=PG", "display_name": "Andrzej", "link": "https://stackoverflow.com/users/838509/andrzej"}, "is_accepted": true, "score": 4, "last_activity_date": 1479474397, "creation_date": 1479474397, "answer_id": 40677908, "question_id": 40388229, "link": "https://stackoverflow.com/questions/40388229/experimentaloptional-nullopt-t-naming-rationale/40677908#40677908", "title": "experimental::optional &quot;nullopt_t&quot; naming rationale", "body": "<p>Funnily, it turned out to be easier to standardize <code>boost::optional</code> than to standardize <code>boost::none</code>. <code>boost::none</code>, while it serves its purpose of initializing <code>boost::optional</code>s, it doesn't have well-defined semantics.</p>\n\n<p>A good well-behaved value-semantic alternative to <code>void</code> is useful, but requires a lot of questions to be answered. Should it have <code>operator&lt;</code> and be an Ordered type? Should it be inter-convertibe with <code>nullptr</code>? Comparable with <code>nullptr</code>? I did not want these questions to impede the adoption of <code>boost::optional</code>, so we agreed on a compromise. For now, go with <code>nullopt</code> whose only purpose is to initialize <code>optional</code> objects. Add a well-behaved <code>none</code> later. And indeed a work on 'prefect' <code>none</code> is in progress. <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2016/p0196r2.pdf\" rel=\"nofollow noreferrer\">See here</a>.</p>\n"}], "owner": {"reputation": 4564, "user_id": 1908650, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/f316929a9cb85ac26281f87cae2f56f3?s=128&d=identicon&r=PG", "display_name": "Mohan", "link": "https://stackoverflow.com/users/1908650/mohan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 264, "favorite_count": 0, "accepted_answer_id": 40677908, "answer_count": 1, "score": 2, "last_activity_date": 1479474397, "creation_date": 1478115024, "question_id": 40388229, "link": "https://stackoverflow.com/questions/40388229/experimentaloptional-nullopt-t-naming-rationale", "title": "experimental::optional &quot;nullopt_t&quot; naming rationale", "body": "<p>The <code>boost::optional</code> C++ library has 'no value' indicated by <code>boost::none</code>, which is a well-chosen name as code like</p>\n\n<pre><code>f(..., optional&lt;T&gt; default_argument = boost::none)\n</code></pre>\n\n<p>or</p>\n\n<pre><code>f(..., optional&lt;T&gt; default_argument = none)\n</code></pre>\n\n<p>is very readable -- the intent is clearly communicated to the reader. It's also similar to the 'no value' provided in standard classes in other languages. This Boost library was absorbed into the standard as <code>std::experimental::optional</code>, but <code>none</code> was renamed to the inscrutable <code>nullopt_t</code>. Does anyone know why?</p>\n"}, {"tags": ["c++", "macos", "qt", "qt-creator", "dylib"], "answers": [{"tags": [], "owner": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "is_accepted": true, "score": 1, "last_activity_date": 1478115425, "creation_date": 1478115425, "answer_id": 40388340, "question_id": 40388203, "link": "https://stackoverflow.com/questions/40388203/how-do-you-use-a-dynamic-library-with-qt-gui-application/40388340#40388340", "title": "How do you use a dynamic library with qt gui application?", "body": "<p>If you are using a <code>.pro</code> file, from the <a href=\"http://doc.qt.io/qt-5/qmake-project-files.html\" rel=\"nofollow\">documentation</a>, you can easily use the <code>LIBS</code> keyword and set properly the include paths.<br>\nAs an example (from the documentation):</p>\n\n<pre><code>LIBS += -L/usr/local/lib -lmath\nINCLUDEPATH = c:/msdev/include d:/stl/include\n</code></pre>\n\n<p>If you are using cmake, instead, you can use <code>target_include_libraries</code> and <code>target_link_libraries</code> to do almost the same.<br>\nSee <a href=\"https://cmake.org/cmake/help/v3.4/manual/cmake-commands.7.html\" rel=\"nofollow\">here</a> for further details about the available commands.</p>\n\n<p>If you are launching it from the command line, you can use <code>-I</code> and <code>-L</code> arguments to do that.<br>\nSee the documentation of your compiler for further details.</p>\n\n<p>And so on. How to do that mostly depends on the build process you decided to follow.</p>\n"}], "owner": {"reputation": 355, "user_id": 3960991, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1641737821/picture?type=large", "display_name": "Andr&#233; Foote", "link": "https://stackoverflow.com/users/3960991/andr%c3%a9-foote"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 198, "favorite_count": 0, "accepted_answer_id": 40388340, "answer_count": 1, "score": 1, "last_activity_date": 1478115425, "creation_date": 1478114927, "question_id": 40388203, "link": "https://stackoverflow.com/questions/40388203/how-do-you-use-a-dynamic-library-with-qt-gui-application", "title": "How do you use a dynamic library with qt gui application?", "body": "<p>I think I've created a .dylib file using this line in Terminal</p>\n\n<pre><code>g++ -dynamiclib -o myLib.dylib myLib.cpp\n</code></pre>\n\n<p>I've created QT widget application in a separate location.</p>\n\n<p>I've tried to find a solution on SO and elsewhere, but I can't figure out how to get my application to use the dylib file.</p>\n\n<p>Any help is much appreciated.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 16783, "user_id": 264325, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/q8UVK.jpg?s=128&g=1", "display_name": "Ajay", "link": "https://stackoverflow.com/users/264325/ajay"}, "edited": false, "score": 6, "creation_date": 1478114936, "post_id": 40388185, "comment_id": 68028088, "body": "Use <code>==</code> for comparison, not <code>=</code>. See <code>if (b = yes)</code>, for example."}, {"owner": {"reputation": 1149, "user_id": 3019756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/945be356f8aad32de4f13bce9a897113?s=128&d=identicon&r=PG&f=1", "display_name": "duncan", "link": "https://stackoverflow.com/users/3019756/duncan"}, "reply_to_user": {"reputation": 16783, "user_id": 264325, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/q8UVK.jpg?s=128&g=1", "display_name": "Ajay", "link": "https://stackoverflow.com/users/264325/ajay"}, "edited": false, "score": 2, "creation_date": 1478114988, "post_id": 40388185, "comment_id": 68028118, "body": "Same issue as @Ajay said found at <code>while (yes = true);</code>"}, {"owner": {"reputation": 6009, "user_id": 3313438, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/Ks9C6.jpg?s=128&g=1", "display_name": "Ziezi", "link": "https://stackoverflow.com/users/3313438/ziezi"}, "edited": false, "score": 0, "creation_date": 1478115184, "post_id": 40388185, "comment_id": 68028236, "body": "Welcome to Stack Overflow! Please do not change the original, initial code."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1478115274, "post_id": 40388185, "comment_id": 68028282, "body": "Explicit comparing a <code>bool</code> is bad style. Just use <code>while ( yes )</code>. (Better change the name to e.g. <code>redo</code>, <code>once_more</code>, etc.)"}, {"owner": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "edited": false, "score": 1, "creation_date": 1478115376, "post_id": 40388185, "comment_id": 68028353, "body": "What do you expect to happen with <code>do { ... } while ( ... ); { ... }</code>?"}, {"owner": {"reputation": 9, "user_id": 7102214, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-1kLY03rKFtM/AAAAAAAAAAI/AAAAAAAACO4/hEbchDncUWw/photo.jpg?sz=128", "display_name": "Jesse Maher-Watson", "link": "https://stackoverflow.com/users/7102214/jesse-maher-watson"}, "edited": false, "score": 0, "creation_date": 1478115494, "post_id": 40388185, "comment_id": 68028419, "body": "wow, I wasn&#39;t entirely expecting so many replies so soon. I wanted it to make it so the code could beak off if someone didn&#39;t want to do another equation"}, {"owner": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "edited": false, "score": 0, "creation_date": 1478115732, "post_id": 40388185, "comment_id": 68028562, "body": "Okay, good. From your indentation/formatting style it seemed almost like you expected the <code>while</code> to interact with the second curly brace block in a special way. Just wanted to be sure you didn&#39;t have a misunderstanding there."}], "answers": [{"tags": [], "owner": {"reputation": 19, "user_id": 7019565, "user_type": "registered", "profile_image": "https://graph.facebook.com/10207318970634216/picture?type=large", "display_name": "Mircea", "link": "https://stackoverflow.com/users/7019565/mircea"}, "is_accepted": false, "score": 1, "last_activity_date": 1478115103, "last_edit_date": 1478115103, "creation_date": 1478115084, "answer_id": 40388247, "question_id": 40388185, "link": "https://stackoverflow.com/questions/40388185/how-do-i-prevent-this-loop-c/40388247#40388247", "title": "How do I prevent this loop? C++", "body": "<p>You are not modifying the value of variable <code>yes</code>. It is always set to <code>true</code>.  </p>\n"}, {"tags": [], "owner": {"reputation": 6009, "user_id": 3313438, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/Ks9C6.jpg?s=128&g=1", "display_name": "Ziezi", "link": "https://stackoverflow.com/users/3313438/ziezi"}, "is_accepted": false, "score": 2, "last_activity_date": 1478116885, "last_edit_date": 1478116885, "creation_date": 1478115439, "answer_id": 40388345, "question_id": 40388185, "link": "https://stackoverflow.com/questions/40388185/how-do-i-prevent-this-loop-c/40388345#40388345", "title": "How do I prevent this loop? C++", "body": "<p>The behaviour of your code is probably due to:</p>\n\n<ul>\n<li><p>unintentional reassignment of the termination condition <code>bool</code> value: <code>yes</code> to: <code>true</code>, instead of checking its value, which is done with <code>==</code>, not with the assignment <code>=</code>.</p></li>\n<li><p>no modification of the value <code>yes</code> within the <code>while</code> loop.     </p></li>\n</ul>\n\n<p>A possible update is:</p>\n\n<pre><code>#include \"stdafx.h\"\n#include &lt;iostream&gt;\n#include &lt;cmath&gt;\n\nusing namespace std;\n\nint main()\n{\n    // initialise the sentinel\n    bool yes = true;\n\n    do {\n        // define variables\n        float x, y, z, a;\n\n        // read input\n        cout &lt;&lt; \"Enter The amount you are investing:\" &lt;&lt; endl;\n        cin &gt;&gt; x;\n        cout &lt;&lt; \"Enter the rate:\" &lt;&lt; endl;\n        cin &gt;&gt; y;\n        cout &lt;&lt; \"Enter the investment period (years):\" &lt;&lt; endl;\n        cin &gt;&gt; z;\n        cout &lt;&lt; \"Enter the compounding period:\" &lt;&lt; endl;\n        cin &gt;&gt; a;\n        cout &lt;&lt; pow((1 + y / a), a * z) * x &lt;&lt; endl;\n\n        // redo calculation or exit\n        cout &lt;&lt; \"Want to do another? (yes/no)\";\n        cin &gt;&gt; yes;\n\n        // check termination condition\n    } while (yes == true);\n\n    return 0;\n}\n</code></pre>\n\n<p>Additionally, watch out for the uninitialised variables: <code>x</code>, <code>y</code>, <code>z</code>, <code>a</code> and think for a proper default value that will indicate possible wrong result.</p>\n\n<p>Lastly, withing the calculation: <code>1 + y / a</code> is ambiguous, it could mean both: <code>(1 + y) / a</code> and: <code>1 + (y / a)</code>, put parentheses to enforce precedence in the wanted order.   </p>\n"}], "owner": {"reputation": 9, "user_id": 7102214, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-1kLY03rKFtM/AAAAAAAAAAI/AAAAAAAACO4/hEbchDncUWw/photo.jpg?sz=128", "display_name": "Jesse Maher-Watson", "link": "https://stackoverflow.com/users/7102214/jesse-maher-watson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1478116885, "creation_date": 1478114843, "last_edit_date": 1478115264, "question_id": 40388185, "link": "https://stackoverflow.com/questions/40388185/how-do-i-prevent-this-loop-c", "title": "How do I prevent this loop? C++", "body": "<p>I'm new to C++ and stack overflow in general so please excuse me if a make a mistake somewhere.\nI posted my code down below, but my issue is that when I type either <code>yes</code> or <code>no</code> at after the calculation is complete, <code>no</code> is supposed to end the program (which I was still working on) and <code>yes</code> is supposed to set it up for another calculation.</p>\n\n<p>However I end up with a glitchy loop. </p>\n\n<pre><code>#include \"stdafx.h\"\n#include &lt;iostream&gt;\n#include &lt;cmath&gt;\n\nusing namespace std;\n\nint main()\n{\n    bool b;\n    bool yes = b;\n    do {\n        float x;\n        float y;\n        float z;\n        float a;\n        cout &lt;&lt; \"Enter The amount you are investing:\" &lt;&lt; endl;\n        cin &gt;&gt; x;\n        cout &lt;&lt; \"Enter the rate:\" &lt;&lt; endl;\n        cin &gt;&gt; y;\n        cout &lt;&lt; \"Enter the investment period (years):\" &lt;&lt; endl;\n        cin &gt;&gt; z;\n        cout &lt;&lt; \"Enter the compounding period:\" &lt;&lt; endl;\n        cin &gt;&gt; a;\n        cout &lt;&lt; pow((1 + y / a), (a*z))*x &lt;&lt; endl &lt;&lt; \"Want to do another? (yes/no)\";\n        cin &gt;&gt; b;\n        cin.ignore();\n\n    } while (yes = true); {\n        cin.clear();\n        if (b = yes) {\n        }\n        else {\n            }\n        }\n        return 0;\n    }\n</code></pre>\n"}, {"tags": ["c++", "function", "constructor", "move", "rvalue-reference"], "comments": [{"owner": {"reputation": 86516, "user_id": 701092, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/xYrM0.jpg?s=128&g=1", "display_name": "0x499602D2", "link": "https://stackoverflow.com/users/701092/0x499602d2"}, "edited": false, "score": 0, "creation_date": 1478114665, "post_id": 40388094, "comment_id": 68027929, "body": "The error and the code are showing two completely different things. Also what is <code>Bar</code>?"}, {"owner": {"reputation": 15610, "user_id": 2456565, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xa8D9.png?s=128&g=1", "display_name": "krzaq", "link": "https://stackoverflow.com/users/2456565/krzaq"}, "edited": false, "score": 1, "creation_date": 1478114711, "post_id": 40388094, "comment_id": 68027952, "body": "Do you have <code>Foo&amp; operator=(Foo&amp;&amp;)=default;</code>? Because it will not be generated implicitly."}], "answers": [{"comments": [{"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 86516, "user_id": 701092, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/xYrM0.jpg?s=128&g=1", "display_name": "0x499602D2", "link": "https://stackoverflow.com/users/701092/0x499602d2"}, "edited": false, "score": 0, "creation_date": 1478115356, "post_id": 40388145, "comment_id": 68028343, "body": "@0x499602D2 Thanks!"}], "tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": true, "score": 7, "last_activity_date": 1478114767, "last_edit_date": 1478114767, "creation_date": 1478114717, "answer_id": 40388145, "question_id": 40388094, "link": "https://stackoverflow.com/questions/40388094/why-is-the-compiler-trying-to-copy-instead-of-moving-the-return-value/40388145#40388145", "title": "Why is the compiler trying to copy instead of moving the return value?", "body": "<p>This:</p>\n\n<pre><code>result = f(); // I am aiming to move 'x' to 'result'\n</code></pre>\n\n<p>isn't an attempt at move <em>construction</em>, it's an attempt at move <em>assignment</em>. And, as the compiler is telling you:</p>\n\n<blockquote>\n  <p>object of type <code>Foo</code> cannot be assigned because its copy assignment operator is implicitly deleted</p>\n</blockquote>\n\n<p>The copy assignment operator is implicitly deleted (and the move assignment operator is simply absent entirely) because you added the move constructor. Presumably, if your type is move constructible, it's also move assignable. So just add:</p>\n\n<pre><code>Foo&amp; operator=(Foo&amp;&amp; ) = default;\n</code></pre>\n"}], "owner": {"reputation": 14929, "user_id": 2051137, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/1sIMq.jpg?s=128&g=1", "display_name": "Remi.b", "link": "https://stackoverflow.com/users/2051137/remi-b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 427, "favorite_count": 0, "accepted_answer_id": 40388145, "answer_count": 1, "score": 1, "last_activity_date": 1478114767, "creation_date": 1478114543, "last_edit_date": 1495535561, "question_id": 40388094, "link": "https://stackoverflow.com/questions/40388094/why-is-the-compiler-trying-to-copy-instead-of-moving-the-return-value", "title": "Why is the compiler trying to copy instead of moving the return value?", "body": "<p>My code looks like</p>\n\n<pre><code>// definition of class 'Foo'\nclass Foo\n{\n  private:\n    vector&lt;Bar&gt; v;\n  public:\n    ...\n    Foo(Foo&amp;&amp;) = default; // move constructor\n};\n\n// definition of function 'f'\nFoo f()\n{\n  Foo x;\n  DoStuff(x);\n  return x;\n}\n\n// Somewhere in main\nresult = f(); // I am aiming to move 'x' to 'result'\n</code></pre>\n\n<p>When I try to compile I receive</p>\n\n<pre><code>EAL_1.6.cpp:314:13: error: object of type 'Foo' cannot be assigned because its copy assignment operator is implicitly deleted\n        x = f(x);\n            ^\nEAL_1.6.cpp:232:5: note: copy assignment operator is implicitly deleted because 'Foo' has a user-declared move constructor\n    Foo(Foo&amp;&amp;) = default;\n    ^\n</code></pre>\n\n<p>I was tempted to try</p>\n\n<pre><code>return move(x);\n</code></pre>\n\n<p>but it does not appear to be a clever solution according to <a href=\"https://stackoverflow.com/questions/17473753/c11-return-value-optimization-or-move\">this post</a>. I understand that the cop constructor is deleted when defining a move constructor (as explained in <a href=\"https://stackoverflow.com/questions/11255027/why-user-defined-move-constructor-disables-the-implicit-copy-constructor\">this post</a>) but I don't understand how to tell the compiler that I would like 'x' to be moved to 'result'.</p>\n"}, {"tags": ["c++", "c++11", "templates"], "comments": [{"owner": {"reputation": 3796, "user_id": 4859885, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9HcTm.jpg?s=128&g=1", "display_name": "Brian Rodriguez", "link": "https://stackoverflow.com/users/4859885/brian-rodriguez"}, "edited": false, "score": 0, "creation_date": 1478194435, "post_id": 40388044, "comment_id": 68065781, "body": "You&#39;ve marked the question as both c++ and c++11, do you mean to say that c++14 is allowed?  If so, this becomes a lot simpler."}, {"owner": {"reputation": 750, "user_id": 4818802, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/a760701b7a9260a73bc49ffcdb0567af?s=128&d=identicon&r=PG&f=1", "display_name": "Xeverous", "link": "https://stackoverflow.com/users/4818802/xeverous"}, "reply_to_user": {"reputation": 3796, "user_id": 4859885, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9HcTm.jpg?s=128&g=1", "display_name": "Brian Rodriguez", "link": "https://stackoverflow.com/users/4859885/brian-rodriguez"}, "edited": false, "score": 0, "creation_date": 1478202179, "post_id": 40388044, "comment_id": 68069965, "body": "Thanks for C++14 answer, but Is it even possible to do in C++11?"}, {"owner": {"reputation": 3796, "user_id": 4859885, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9HcTm.jpg?s=128&g=1", "display_name": "Brian Rodriguez", "link": "https://stackoverflow.com/users/4859885/brian-rodriguez"}, "edited": false, "score": 1, "creation_date": 1478203222, "post_id": 40388044, "comment_id": 68070571, "body": "The answer does compile with c++11, see: <a href=\"http://coliru.stacked-crooked.com/a/7c822ec41ff40ba5\" rel=\"nofollow noreferrer\">coliru.stacked-crooked.com/a/7c822ec41ff40ba5</a>"}, {"owner": {"reputation": 750, "user_id": 4818802, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/a760701b7a9260a73bc49ffcdb0567af?s=128&d=identicon&r=PG&f=1", "display_name": "Xeverous", "link": "https://stackoverflow.com/users/4818802/xeverous"}, "reply_to_user": {"reputation": 3796, "user_id": 4859885, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9HcTm.jpg?s=128&g=1", "display_name": "Brian Rodriguez", "link": "https://stackoverflow.com/users/4859885/brian-rodriguez"}, "edited": false, "score": 0, "creation_date": 1478203547, "post_id": 40388044, "comment_id": 68070730, "body": "Much Thanks. I will look It later, I have no time now but I guess I will underdstand everything"}], "answers": [{"comments": [{"owner": {"reputation": 750, "user_id": 4818802, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/a760701b7a9260a73bc49ffcdb0567af?s=128&d=identicon&r=PG&f=1", "display_name": "Xeverous", "link": "https://stackoverflow.com/users/4818802/xeverous"}, "edited": false, "score": 0, "creation_date": 1478115170, "post_id": 40388206, "comment_id": 68028229, "body": "Changed the typedef and static_cast. I get now: <code>invalid static_cast from type &#39;std_sort&#39; to type &#39;void (*)(std::vector&lt;std::shared_ptr&lt;Item&gt; &gt;::iterator, std::vector&lt;std::shared_ptr&lt;Item&gt; &gt;::iterator, std::function&lt;bool(const std::shared_ptr&lt;Item&gt;&amp;, const std::shared_ptr&lt;Item&gt;&amp;)&gt;) {aka void (*)(__gnu_cxx::__normal_iterator&lt;std::shared_ptr&lt;Item&gt;*, std::vector&lt;std::shared_ptr&lt;Item&gt; &gt; &gt;, __gnu_cxx::__normal_iterator&lt;std::shared_ptr&lt;Item&gt;*, std::vector&lt;std::shared_ptr&lt;Item&gt; &gt; &gt;, std::function&lt;bool(const std::shared_ptr&lt;Item&gt;&amp;, const std::shared_ptr&lt;Item&gt;&amp;)&gt;)}</code>"}, {"owner": {"reputation": 3796, "user_id": 4859885, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9HcTm.jpg?s=128&g=1", "display_name": "Brian Rodriguez", "link": "https://stackoverflow.com/users/4859885/brian-rodriguez"}, "reply_to_user": {"reputation": 750, "user_id": 4818802, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/a760701b7a9260a73bc49ffcdb0567af?s=128&d=identicon&r=PG&f=1", "display_name": "Xeverous", "link": "https://stackoverflow.com/users/4818802/xeverous"}, "edited": false, "score": 0, "creation_date": 1478115586, "post_id": 40388206, "comment_id": 68028475, "body": "@Xeverous I don&#39;t think a <code>static_cast</code> is possible in this context.  If you create the function before passing it to <code>std::bind</code>, however, it should work fine."}, {"owner": {"reputation": 750, "user_id": 4818802, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/a760701b7a9260a73bc49ffcdb0567af?s=128&d=identicon&r=PG&f=1", "display_name": "Xeverous", "link": "https://stackoverflow.com/users/4818802/xeverous"}, "edited": false, "score": 0, "creation_date": 1478116227, "post_id": 40388206, "comment_id": 68028828, "body": "Now I get <code>no known conversion for argument 5 from &#39;std::_Bind&lt;std::function&lt;void(__gnu_cxx::__normal_iterator&lt;&zwnj;&#8203;std::shared_ptr&lt;Item&zwnj;&#8203;&gt;*, std::vector&lt;std::shared_ptr&lt;Item&gt; &gt; &gt;, __gnu_cxx::__normal_iterator&lt;std::shared_ptr&lt;Item&gt;*, std::vector&lt;std::shared_ptr&lt;Item&gt; &gt; &gt;, std::function&lt;bool(const std::shared_ptr&lt;Item&gt;&amp;, const std::shared_ptr&lt;Item&gt;&amp;)&gt;)&gt; (*(std::_Placeholder&lt;1&gt;, std::_Placeholder&lt;2&gt;, std::_Placeholder&lt;3&gt;))(std_sort (*)())&gt;&#39; to &#39;sorting_function&#39;</code>"}, {"owner": {"reputation": 3796, "user_id": 4859885, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9HcTm.jpg?s=128&g=1", "display_name": "Brian Rodriguez", "link": "https://stackoverflow.com/users/4859885/brian-rodriguez"}, "reply_to_user": {"reputation": 750, "user_id": 4818802, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/a760701b7a9260a73bc49ffcdb0567af?s=128&d=identicon&r=PG&f=1", "display_name": "Xeverous", "link": "https://stackoverflow.com/users/4818802/xeverous"}, "edited": false, "score": 0, "creation_date": 1478116318, "post_id": 40388206, "comment_id": 68028877, "body": "Updated my answer, take a look."}, {"owner": {"reputation": 750, "user_id": 4818802, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/a760701b7a9260a73bc49ffcdb0567af?s=128&d=identicon&r=PG&f=1", "display_name": "Xeverous", "link": "https://stackoverflow.com/users/4818802/xeverous"}, "edited": false, "score": 0, "creation_date": 1478117240, "post_id": 40388206, "comment_id": 68029369, "body": "This time <code>no known conversion for argument 5 from &#39;[...]&#39; to &#39;sorting_function&#39;</code>. But the error points to the line <code>&amp;inst, _1, _2);</code>"}, {"owner": {"reputation": 3796, "user_id": 4859885, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9HcTm.jpg?s=128&g=1", "display_name": "Brian Rodriguez", "link": "https://stackoverflow.com/users/4859885/brian-rodriguez"}, "reply_to_user": {"reputation": 750, "user_id": 4818802, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/a760701b7a9260a73bc49ffcdb0567af?s=128&d=identicon&r=PG&f=1", "display_name": "Xeverous", "link": "https://stackoverflow.com/users/4818802/xeverous"}, "edited": false, "score": 0, "creation_date": 1478117361, "post_id": 40388206, "comment_id": 68029441, "body": "Could you post an <a href=\"http://stackoverflow.com/help/mcve\">MCVE</a> for me?  I can take a better look there."}, {"owner": {"reputation": 750, "user_id": 4818802, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/a760701b7a9260a73bc49ffcdb0567af?s=128&d=identicon&r=PG&f=1", "display_name": "Xeverous", "link": "https://stackoverflow.com/users/4818802/xeverous"}, "edited": false, "score": 0, "creation_date": 1478122974, "post_id": 40388206, "comment_id": 68032324, "body": "<a href=\"http://ideone.com/cFy3Rt\" rel=\"nofollow noreferrer\">ideone.com/cFy3Rt</a> It compiles if I dont invoke the function. I think that something is wrong with compare function signature"}, {"owner": {"reputation": 3796, "user_id": 4859885, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9HcTm.jpg?s=128&g=1", "display_name": "Brian Rodriguez", "link": "https://stackoverflow.com/users/4859885/brian-rodriguez"}, "reply_to_user": {"reputation": 750, "user_id": 4818802, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/a760701b7a9260a73bc49ffcdb0567af?s=128&d=identicon&r=PG&f=1", "display_name": "Xeverous", "link": "https://stackoverflow.com/users/4818802/xeverous"}, "edited": false, "score": 0, "creation_date": 1478194881, "post_id": 40388206, "comment_id": 68065998, "body": "@Xeverous You&#39;re accessing your arguments incorrectly, I&#39;ve updated the answer with a compiling sample."}, {"owner": {"reputation": 750, "user_id": 4818802, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/a760701b7a9260a73bc49ffcdb0567af?s=128&d=identicon&r=PG&f=1", "display_name": "Xeverous", "link": "https://stackoverflow.com/users/4818802/xeverous"}, "edited": false, "score": 0, "creation_date": 1478282191, "post_id": 40388206, "comment_id": 68106476, "body": "I&#39;ve checked your solution. Apparently the only thing I was doing wrong was <code>vect[0](v.begin(), v.end(), Compare);</code> because vect is a vector of shared Algorithms, not functions. When I saw the arrow in <code>vect[0]-&gt;func(v.begin(), v.end(), Compare);</code> I realized everything, also why I had such compiler errors"}], "tags": [], "owner": {"reputation": 3796, "user_id": 4859885, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9HcTm.jpg?s=128&g=1", "display_name": "Brian Rodriguez", "link": "https://stackoverflow.com/users/4859885/brian-rodriguez"}, "is_accepted": true, "score": 0, "last_activity_date": 1478195556, "last_edit_date": 1478195556, "creation_date": 1478114935, "answer_id": 40388206, "question_id": 40388044, "link": "https://stackoverflow.com/questions/40388044/c11-bind-stdsort-for-user-defined-type-and-then-use-that-bind-as-an-argumen/40388206#40388206", "title": "C++11: bind std::sort for user-defined type and then use that bind as an argument in ctor", "body": "<p>First, this call:</p>\n\n<pre><code>vect[0](array.begin(), array.end(), compare_func);\n</code></pre>\n\n<p>Is giving <em>iterators</em> to <code>vect[0]</code>, but expecting an actual instance.  You should change the type of your <code>sorting_function</code> to:</p>\n\n<pre><code>typedef std::function\n    &lt;void(\n            std::vector&lt;std::shared_ptr&lt;Item&gt;&gt;::iterator a,\n            std::vector&lt;std::shared_ptr&lt;Item&gt;&gt;::iterator b,\n            std::function\n            &lt;bool(\n                std::shared_ptr&lt;Item&gt; const&amp; c, std::shared_ptr&lt;Item&gt; const&amp; d\n            )&gt;\n    )&gt;\n    sorting_function;\n</code></pre>\n\n<p>Second, you can't bind to the struct directly, because it isn't a function.  <code>std_sort::operator()</code>, however, <em>is</em> a function.  But since it's a template, it gets a bit more complicated to set up:</p>\n\n<pre><code>std_sort inst();\nauto fn = std::bind(\n    &amp;std_sort::operator()&lt;const std::shared_ptr&lt;Item&gt;&amp;,\n                          std::less&lt;std::shared_ptr&lt;Item&gt;&gt;&gt;,\n    &amp;inst, _1, _2);\n</code></pre>\n\n<p>Although, it seems you'd be better off creating an instance of <code>std::function</code> directly, and then binding to that.</p>\n\n<pre><code>sorting_function fn(std_sort());\nvect.push_back(std::make_shared&lt;Algorithm&gt;(..., std::bind(fn, ...)));\n</code></pre>\n\n<p>Or even better, just use lambdas:</p>\n\n<pre><code>vect.push_back(std::make_shared&lt;Algorithm&gt;(...,\n    [](std::vector&lt;std::shared_ptr&lt;Item&gt;&gt;::iterator first,\n       std::vector&lt;std::shared_ptr&lt;Item&gt;&gt;::iterator last,\n       std::function\n            &lt;bool(\n                std::shared_ptr&lt;Item&gt; const&amp; c, std::shared_ptr&lt;Item&gt; const&amp; d\n            )&gt; compare_func) {\n        std_sort()(first, last, compare_func);\n    }));\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/5c750683551be174\" rel=\"nofollow noreferrer\">Live Demo</a></p>\n"}], "owner": {"reputation": 750, "user_id": 4818802, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/a760701b7a9260a73bc49ffcdb0567af?s=128&d=identicon&r=PG&f=1", "display_name": "Xeverous", "link": "https://stackoverflow.com/users/4818802/xeverous"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 180, "favorite_count": 0, "accepted_answer_id": 40388206, "answer_count": 1, "score": 0, "last_activity_date": 1478195556, "creation_date": 1478114329, "last_edit_date": 1478116787, "question_id": 40388044, "link": "https://stackoverflow.com/questions/40388044/c11-bind-stdsort-for-user-defined-type-and-then-use-that-bind-as-an-argumen", "title": "C++11: bind std::sort for user-defined type and then use that bind as an argument in ctor", "body": "<p><strong>This is complicated</strong>. I wanted to create a class than can hold a sorting algorithm (mostly to compare how they work). Array that is to be sorted will be of type: <code>std::vector&lt;std::shared_ptr&lt;Item&gt;&gt;</code>. I am going to use different functions to sort it, I have tested <code>std::sort()</code> with a function looking like <code>bool compare_func(std::shared_ptr&lt;Item&gt; const&amp; a, std::shared_ptr&lt;Item&gt; const&amp; b)</code> and it worked correctly</p>\n\n<p>The algorithm class also contains other data, for example name (std::string) and amount (int) of items to be sorted</p>\n\n<p>The problem begins when I want to create and put an object of type algorithm into <code>std::vector&lt;std::shared_ptr&lt;Algorithm&gt;&gt;</code></p>\n\n<p>I have already found on SO that std::bind is not an object, so first I need to create something like this:</p>\n\n<pre><code>struct std_sort {\n    template &lt;typename RndIt, typename Cmp&gt;\n    void operator()(RndIt begin, RndIt end, Cmp cmp) {\n        std::sort(begin, end, cmp);\n    }\n};\n</code></pre>\n\n<p>The problem begins when I try to add an object of type algorithm</p>\n\n<pre><code>vect.push_back(std::make_shared&lt;Algorithm&gt;(std::string(\"std::sort()\"), zero, zero, amount,\n        std::bind\n        (\n            static_cast&lt;void(*)\n            (\n                std::shared_ptr&lt;Item&gt; a,\n                std::shared_ptr&lt;Item&gt; b,\n                std::function\n                &lt;bool(\n                        std::shared_ptr&lt;Item&gt; const&amp; c, std::shared_ptr&lt;Item&gt; const&amp; d\n                )&gt;\n            )&gt;\n            (std_sort()), //error on this line\n            std::placeholders::_1, std::placeholders::_2, std::placeholders::_3\n        )\n    ));\n</code></pre>\n\n<p>The plan was to call this vector's algorithms to sort a gievn array, It would look like <code>vect[0](array.begin(), array.end(), compare_func);</code></p>\n\n<p>Everything goes well except for the last argument, the expected argument is of this type:</p>\n\n<pre><code>typedef std::function\n    &lt;void(\n            std::shared_ptr&lt;Item&gt; a,\n            std::shared_ptr&lt;Item&gt; b,\n            std::function\n            &lt;bool(\n                std::shared_ptr&lt;Item&gt; const&amp; c, std::shared_ptr&lt;Item&gt; const&amp; d\n            )&gt;\n    )&gt;\n    sorting_function;\n</code></pre>\n\n<p>The error I get (from MinGW)</p>\n\n<pre><code>error: invalid static_cast from type 'std_sort' to type 'void (*)(std::shared_ptr&lt;Item&gt;, std::shared_ptr&lt;Item&gt;, std::function&lt;bool(const std::shared_ptr&lt;Item&gt;&amp;, const std::shared_ptr&lt;Item&gt;&amp;)&gt;)'\n</code></pre>\n\n<p>If I remove static_cast I get tons of typical template errors</p>\n"}, {"tags": ["c++", "gcc", "c++17", "decltype", "trailing-return-type"], "answers": [{"comments": [{"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 2, "creation_date": 1478145452, "post_id": 40388969, "comment_id": 68038390, "body": "The motivation -- not requiring compilers to compile the template function body just to determine which overload to select -- might be worth mentioning."}], "tags": [], "owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "is_accepted": false, "score": 6, "last_activity_date": 1478121126, "last_edit_date": 1478121126, "creation_date": 1478117687, "answer_id": 40388969, "question_id": 40387970, "link": "https://stackoverflow.com/questions/40387970/inconsistency-with-lambda-trailing-return-types/40388969#40388969", "title": "Inconsistency with lambda trailing return types", "body": "<p>By putting the expression in the return type, you permit the compiler to invoke SFINAE. This means that if <code>id == 10</code> is not a legal expression after template substitution, then a compile error will not result. This permits <code>is_detected</code> to determine if that's a legal expression or not and therefore return a value based on that determination.</p>\n\n<p>But SFINAE only works on the function's <em>signature</em>. And for the second case, the signature is <code>decltype(auto)</code>. SFINAE cannot reach into the function to pull the return expression into the signature. Therefore, if you try to instantiate this function with a type for which <code>id == 10</code> is not legal, this will only be caught when the function is instantiated. And by then, it's too late for SFINAE to protect you.</p>\n\n<p><code>decltype(auto)</code> is not identical to <code>decltype(expression)</code>. They're similar, but not identical.</p>\n"}, {"tags": [], "owner": {"reputation": 4160, "user_id": 371239, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/decd51f67e3f34f4d6c526fed9b4a2dd?s=128&d=identicon&r=PG", "display_name": "Vahagn", "link": "https://stackoverflow.com/users/371239/vahagn"}, "is_accepted": true, "score": 0, "last_activity_date": 1478616222, "creation_date": 1478616222, "answer_id": 40489773, "question_id": 40387970, "link": "https://stackoverflow.com/questions/40387970/inconsistency-with-lambda-trailing-return-types/40489773#40489773", "title": "Inconsistency with lambda trailing return types", "body": "<p>The standard <a href=\"http://en.cppreference.com/w/cpp/language/function\" rel=\"nofollow noreferrer\">says</a>:</p>\n\n<blockquote>\n  <p>Function templates can use return type deduction. The deduction takes\n  place at instantiation even if the expression in the return statement\n  is not dependent. <strong>This instantiation is not in an immediate context\n  for the purposes of SFINAE.</strong></p>\n</blockquote>\n\n<p>So there is no bug in GCC, it follows the standard and <code>lambda1</code> is <strong>NOT</strong> equivalent to <code>lambda2</code>.</p>\n"}], "owner": {"reputation": 4160, "user_id": 371239, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/decd51f67e3f34f4d6c526fed9b4a2dd?s=128&d=identicon&r=PG", "display_name": "Vahagn", "link": "https://stackoverflow.com/users/371239/vahagn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 154, "favorite_count": 1, "accepted_answer_id": 40489773, "answer_count": 2, "score": 2, "last_activity_date": 1478616222, "creation_date": 1478114023, "last_edit_date": 1478124325, "question_id": 40387970, "link": "https://stackoverflow.com/questions/40387970/inconsistency-with-lambda-trailing-return-types", "title": "Inconsistency with lambda trailing return types", "body": "<p>Consider <a href=\"http://gcc.godbolt.org/#g:!((g:!((g:!((h:codeEditor,i:(j:1,options:(colouriseAsm:&#39;0&#39;,compileOnChange:&#39;0&#39;),source:&#39;%23include+%3Cstring%3E%0A%23include+%3Cfunctional%3E%0A%23include+%3Ctype_traits%3E%0A%23include+%3Cexperimental/type_traits%3E%0A%0A%0Atemplate+%3C+typename+Callable,+typename...+Args+%3E%0Ausing+ResultOfT+%3D+std::result_of_t%3CCallable(Args...)%3E%3B%0A++%0Aint+main()%0A%7B%0A++auto+lambda1+%3D+%5B%5D(auto%26%26+id)+-%3E+decltype(id+%3D%3D+10)+%7B+return+id+%3D%3D+10%3B+%7D%3B%0A++auto+lambda2+%3D+%5B%5D(auto%26%26+id)+-%3E+decltype(auto)+++++%7B+return+id+%3D%3D+10%3B+%7D%3B%0A++%0A++static_assert(!!std::experimental::is_detected_v%3CResultOfT,decltype(lambda1),std::string%3E)%3B%0A++//static_assert(!!std::experimental::is_detected_v%3CResultOfT,decltype(lambda2),std::string%3E)%3B%0A++//+This+doesn!&#39;t+even+compile!!%3F%0A++auto+bb+%3D+std::experimental::is_detected_v%3CResultOfT,decltype(lambda2),std::string%3E%3B%0A++%0A++return+0%3B%0A%7D&#39;),l:&#39;5&#39;,n:&#39;1&#39;,o:&#39;C%2B%2B+source+%231&#39;,t:&#39;0&#39;)),k:50,l:&#39;4&#39;,n:&#39;0&#39;,o:&#39;&#39;,s:0,t:&#39;0&#39;),(g:!((h:compiler,i:(compiler:g7snapshot,filters:(b:&#39;0&#39;,commentOnly:&#39;0&#39;,directives:&#39;0&#39;,intel:&#39;0&#39;),options:&#39;-std%3Dc%2B%2B1z+-O3&#39;),l:&#39;5&#39;,n:&#39;0&#39;,o:&#39;%231+with+x86-64+gcc+7+(snapshot)&#39;,t:&#39;0&#39;)),k:50,l:&#39;4&#39;,n:&#39;0&#39;,o:&#39;&#39;,s:0,t:&#39;0&#39;)),l:&#39;2&#39;,n:&#39;0&#39;,o:&#39;&#39;,t:&#39;0&#39;)),version:4\" rel=\"nofollow noreferrer\">this</a> code with gcc-7.0.0 latest snapshot:</p>\n\n<pre><code>auto lambda1 = [](auto&amp;&amp; id) -&gt; decltype(id == 10) { return id == 10; };\nauto lambda2 = [](auto&amp;&amp; id) -&gt; decltype(auto)     { return id == 10; };\n\nstatic_assert(!std::experimental::is_detected_v&lt;ResultOfT,decltype(lambda1),std::string&gt;);\n//static_assert(!std::experimental::is_detected_v&lt;ResultOfT,decltype(lambda2),std::string&gt;);\n// This doesn't even compile!?\nauto bb = std::experimental::is_detected_v&lt;ResultOfT,decltype(lambda2),std::string&gt;;\n</code></pre>\n\n<p>where <code>ResultOfT</code> is just a wrapper over <code>std::result_of</code>.</p>\n\n<p>Why <code>lambda1</code> and <code>lambda2</code> are not equivalent in this sense?</p>\n\n<p>Per my understanding <code>decltype(auto)</code> at <code>lambda2</code> should be just the short form of <code>decltype(id == 10)</code>, but in fact it isn't, so what is the reason?</p>\n\n<p>Is this a bug in GCC?</p>\n"}, {"tags": ["c++", "arm", "stack-trace", "libunwind"], "owner": {"reputation": 21, "user_id": 7106231, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Jx7zU.png?s=128&g=1", "display_name": "ChriD", "link": "https://stackoverflow.com/users/7106231/chrid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 485, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1478880418, "creation_date": 1478114021, "last_edit_date": 1478880418, "question_id": 40387969, "link": "https://stackoverflow.com/questions/40387969/using-libunwind-on-armv7hf-or-armv5te-daemon-app-has-no-stack-trace-depth", "title": "Using libunwind on ARMV7HF or ARMV5TE daemon app has no stack trace depth", "body": "<p>I have written a C++ application (deamon) which has some issues with application crashing due segmentation faults.</p>\n\n<p>To get information about the code where the crash(es) happens i use libunwind. Which works very well on x86_x64 linux systems. There i get a nice stacktrace.\nBut on ARM architectures, the stacktrace only consists of the stack up to the \"Deamon-code\" iself and not into the shared libraries i use</p>\n\n<p>I am using gcc 4.9 (for arm arm-linux-gnueabihf-g++4.9)\nI am building the libraries and the deamon in debug mode (-g) with following parameters to get the tables for stack tracing</p>\n\n<pre><code>-funwind-tables -fasynchronous-unwind-tables -mapcs-frame -g\n</code></pre>\n\n<p>for the linker i use for the shared libs</p>\n\n<pre><code>-shared -pthread -static-libgcc -static-libstdc++ -rdynamic\n</code></pre>\n\n<p>Here is the sample stack trace of x86</p>\n\n<pre><code>1  0x0000000000403f68 sp=0x00007f0c2be8d630 crit_err_hdlr(int, siginfo_t*, void*) + 0x28\n2  0x00007f0c2dfa33d0 sp=0x00007f0c2be8d680 __restore_rt + 0x0\n3  0x00007f0c2dfa32a9 sp=0x00007f0c2be8dc18 raise + 0x29\n4  0x00007f0c2e958bab sp=0x00007f0c2be8dc20 Raumserver::Request::RequestAction_Crash::crashLevel4() + 0x2b\n5  0x00007f0c2e958d9c sp=0x00007f0c2be8dc60 Raumserver::Request::RequestAction_Crash::executeAction() + 0x12c\n6  0x00007f0c2e96f045 sp=0x00007f0c2be8dce0 Raumserver::Request::RequestAction::execute() + 0x55\n7  0x00007f0c2e940c83 sp=0x00007f0c2be8de00 Raumserver::Manager::RequestActionManager::requestProcessingWorkerThread()\n+ 0x113\n8  0x00007f0c2ee86380 sp=0x00007f0c2be8df00 execute_native_thread_routine + 0x20\n9  0x00007f0c2df996fa sp=0x00007f0c2be8df20 start_thread + 0xca\n10 0x00007f0c2dccfb5d sp=0x00007f0c2be8dfc0 clone + 0x6d\n11 0x0000000000000000 sp=0x00007f0c2be8dfc8  + 0x6d\n</code></pre>\n\n<p>and here the trace from the arm devices. It seems that the stack information \nfor the shared libs is not present?!</p>\n\n<pre><code>1  0x0000000000013403 sp=0x00000000b49fe930 crit_err_hdlr(int, siginfo_t*, void*) + 0x1a\n2  0x00000000b6a3b6a0 sp=0x00000000b49fe960 __default_rt_sa_restorer_v2 + 0x0\n3  0x00000000b6b5774c sp=0x00000000b49fecd4 raise + 0x24\n</code></pre>\n\n<p>Here is a summary from the code for building the stacktrace which is called from the signal handler:</p>\n\n<pre><code>#ifdef __arm__\n  #include &lt;libunwind.h&gt;\n  #include &lt;libunwind-arm.h&gt;\n#else\n  #include &lt;libunwind.h&gt;\n  #include &lt;libunwind-x86_64.h&gt;\n#endif\n\n...\n\nvoid backtrace()\n{\n  unw_cursor_t cursor;\n  unw_context_t context;\n  unw_getcontext(&amp;context);\n  unw_init_local(&amp;cursor, &amp;context);\n\n  int n=0;\n  int err = unw_step(&amp;cursor);\n  while ( err ) \n  {\n    unw_word_t ip, sp, off;\n\n    unw_get_reg(&amp;cursor, UNW_REG_IP, &amp;ip);\n    unw_get_reg(&amp;cursor, UNW_REG_SP, &amp;sp);\n\n    char symbol[256] = {\"&lt;unknown&gt;\"};\n    char buffer[256];\n    char *name = symbol;\n\n    if ( !unw_get_proc_name(&amp;cursor, symbol, sizeof(symbol), &amp;off) ) \n    {\n      int status;\n      if ( (name = abi::__cxa_demangle(symbol, NULL, NULL, &amp;status)) == 0 )\n        name = symbol;\n    }\n\n    sprintf(buffer, \"#%-2d 0x%016\" PRIxPTR \" sp=0x%016\" PRIxPTR \" %s + 0x%\" PRIxPTR \"\\n\",\n        ++n,\n        static_cast&lt;uintptr_t&gt;(ip),\n        static_cast&lt;uintptr_t&gt;(sp),\n        name,\n        static_cast&lt;uintptr_t&gt;(off));\n\n    if ( name != symbol )\n        free(name);\n\n    ...\n\n    err = unw_step(&amp;cursor);\n  }\n}\n</code></pre>\n\n<p>And here the summary for the deamon itself:</p>\n\n<pre><code>int main(int argc, char *argv[])\n{\n    Raumserver::Raumserver  raumserverObject;\n\n    //Set our Logging Mask and open the Log\n    setlogmask(LOG_UPTO(LOG_NOTICE));\n    openlog(DAEMON_NAME, LOG_CONS | LOG_NDELAY | LOG_PERROR | LOG_PID, LOG_USER);\n\n    pid_t pid, sid;\n\n    //Fork the Parent Process\n    pid = fork();\n    if (pid &lt; 0) {  syslog (LOG_NOTICE, \"Error forking the parent process\"); exit(EXIT_FAILURE); }\n    //We got a good pid, Close the Parent Process\n    if (pid &gt; 0) {  syslog (LOG_NOTICE, \"Got pid, closing parent process\"); exit(EXIT_SUCCESS); }\n\n    //Change File Mask\n    umask(0);\n\n    //Create a new Signature Id for our child\n    sid = setsid();\n    if (sid &lt; 0) {  syslog (LOG_NOTICE, \"Signature ID for child process could not be created!\"); exit(EXIT_FAILURE); }\n    // get the working directory of the executable\n    std::string workingDirectory = getWorkingDirectory();\n\n    //Change Directory\n    //If we cant find the directory we exit with failure.\n    if ((chdir(\"/\")) &lt; 0) { exit(EXIT_FAILURE); }\n\n    //Close Standard File Descriptors\n    close(STDIN_FILENO);\n    close(STDOUT_FILENO);\n    close(STDERR_FILENO);\n\n    // Add some system signal handlers for crash reporting\n    //raumserverObject.addSystemSignalHandlers();\n    AddSignalHandlers();\n\n    // set the log adapters we want to use (because we do not want to use the standard ones which includes console output)\n    std::vector&lt;std::shared_ptr&lt;Raumkernel::Log::LogAdapter&gt;&gt; adapters;\n    auto logAdapterFile = std::shared_ptr&lt;Raumkernel::Log::LogAdapter_File&gt;(new Raumkernel::Log::LogAdapter_File());\n    logAdapterFile-&gt;setLogFilePath(workingDirectory + \"logs/\");\n    adapters.push_back(logAdapterFile);\n\n    // create raumserver object and do init \n    raumserverObject.setSettingsFile(workingDirectory + \"settings.xml\");\n    raumserverObject.initLogObject(Raumkernel::Log::LogType::LOGTYPE_ERROR, workingDirectory + \"logs/\", adapters);\n    raumserverObject.init();\n\n    // go into an endless loop and wait until daemon is killed by the syste,\n    while(true)\n    {\n        sleep(60);    //Sleep for 60 seconds\n    }\n\n    //Close the log\n    closelog ();\n}\n</code></pre>\n\n<p>Anybody an idea if i have missed some compiler flags? Is something missing?\nI have found a lot of posts and all refere to the mentioned compiler flags or to libunwind. I have tried several other codes i found but they only give me a stack depth of 1 \nThanks!</p>\n\n<p><strong>EDIT 11.11.2016:</strong><br>\nFor testing i built static libs instead of shared ones and added them to the application, so there are no dynamic links anymore. Unfortunetaly the stack trace is the same bad one.</p>\n\n<p>I have even tried to compile the whole stuff with the thumb mode and changed the arm compiler to to gcc5/g++5</p>\n\n<pre><code>-mthumb -mtpcs-frame -mtpcs-leaf-frame\n</code></pre>\n\n<p>Same issue :-(</p>\n"}, {"tags": ["c++", "getline", "getch"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1478114178, "post_id": 40387944, "comment_id": 68027685, "body": "No, there isn&#39;t in standard c++. That&#39;s OS and terminal specific."}, {"owner": {"reputation": 230, "user_id": 2658313, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/1308aa2bd1c9c1d525138acc5b02cf09?s=128&d=identicon&r=PG", "display_name": "Gugg", "link": "https://stackoverflow.com/users/2658313/gugg"}, "edited": false, "score": 0, "creation_date": 1478114257, "post_id": 40387944, "comment_id": 68027718, "body": "why don&#39;t you use stdin or scanf?"}, {"owner": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 1, "creation_date": 1478114414, "post_id": 40387944, "comment_id": 68027796, "body": "Did you read the part of the documentation which explains the values <code>_getch</code> can return? Are you aware that you may need to call <code>_getch</code> twice to get a single key code?"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 230, "user_id": 2658313, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/1308aa2bd1c9c1d525138acc5b02cf09?s=128&d=identicon&r=PG", "display_name": "Gugg", "link": "https://stackoverflow.com/users/2658313/gugg"}, "edited": false, "score": 0, "creation_date": 1478114439, "post_id": 40387944, "comment_id": 68027811, "body": "@Gugg That won&#39;t help either."}, {"owner": {"reputation": 1, "user_id": 7106370, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/477109c6618ada5bac22f7d03b5a3aba?s=128&d=identicon&r=PG&f=1", "display_name": "dan32", "link": "https://stackoverflow.com/users/7106370/dan32"}, "reply_to_user": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 0, "creation_date": 1478116217, "post_id": 40387944, "comment_id": 68028822, "body": "@CaptainObvlious I read, but even if I can detect those keycodes, what can I do with it ? For example, I can detect arrows keys codes, but all I have as solutions remaining is only to emulate the cursor shifting. Or, U wanted to get back the &quot;native cursor shifting&quot; feature. I&#39;m sorry if I&#39;m not so clear"}], "answers": [{"tags": [], "owner": {"reputation": 76876, "user_id": 287586, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/tB5AG.png?s=128&g=1", "display_name": "dan04", "link": "https://stackoverflow.com/users/287586/dan04"}, "is_accepted": false, "score": 1, "last_activity_date": 1478129140, "creation_date": 1478129140, "answer_id": 40391459, "question_id": 40387944, "link": "https://stackoverflow.com/questions/40387944/how-to-use-keyboards-function-with-getch-as-it-is-possible-with-getline/40391459#40391459", "title": "How to use keyboards function with _getch(), as it is possible with getline()?", "body": "<p>Assuming you mean the <a href=\"https://msdn.microsoft.com/en-us/library/078sfkak.aspx\" rel=\"nofollow noreferrer\">_getch()</a> function from the Microsoft C runtime library:</p>\n\n<blockquote>\n  <p>The <strong>_getch</strong> and <strong>_getwch</strong> functions read a single character from the\n  console without echoing the character. None of these functions can be\n  used to read CTRL+C. When reading a function key or an arrow key, each\n  function must be called twice; the first call returns 0 or 0xE0, and\n  the second call returns the actual key code.</p>\n</blockquote>\n\n<p>So, if <code>_getch()</code> returns either 0 or 0xE0 (224), you'll have to call the function <em>again</em> to see which specific key was pressed.</p>\n\n<p>At least on my machine, these \u201cextended\u201d character codes are as follows (in decimal):</p>\n\n<ul>\n<li>0 59 = F1</li>\n<li>0 60 = F2</li>\n<li>0 61 = F3</li>\n<li>0 62 = F4</li>\n<li>0 63 = F5</li>\n<li>0 64 = F6</li>\n<li>0 65 = F7</li>\n<li>0 66 = F8</li>\n<li>0 67 = F9</li>\n<li>0 68 = F10</li>\n<li>224 71 = Home</li>\n<li>224 72 = &uarr; (up arrow)</li>\n<li>224 73 = Page Up</li>\n<li>224 75 = &larr; (left arrow)</li>\n<li>224 77 = &rarr; (right arrow)</li>\n<li>224 79 = End</li>\n<li>224 80 = &darr; (down arrow)</li>\n<li>224 81 = Page Down</li>\n<li>224 82 = Insert</li>\n<li>224 83 = Delete</li>\n<li>224 133 = F11</li>\n<li>224 134 = F12</li>\n</ul>\n\n<p>As for what to <em>do</em> with these codes, take a look at <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms686025(v=vs.85).aspx\" rel=\"nofollow noreferrer\">SetConsoleCursorPosition</a> and related console API functions.</p>\n"}], "owner": {"reputation": 1, "user_id": 7106370, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/477109c6618ada5bac22f7d03b5a3aba?s=128&d=identicon&r=PG&f=1", "display_name": "dan32", "link": "https://stackoverflow.com/users/7106370/dan32"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 560, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1478129140, "creation_date": 1478113918, "last_edit_date": 1478127490, "question_id": 40387944, "link": "https://stackoverflow.com/questions/40387944/how-to-use-keyboards-function-with-getch-as-it-is-possible-with-getline", "title": "How to use keyboards function with _getch(), as it is possible with getline()?", "body": "<p>My problem is that I want to do a special thing when my user is pushing tabulation in the terminal. My first code explains that :</p>\n\n<pre><code>char buffer[100];\n\nwhile (true)\n{\n    std::cin.getline(buffer, 100); // do IMMEDIATELY something if 'tabulation' was used ?\n\n}\n</code></pre>\n\n<p>So I asked myself how to check every chars ? I tried with <strong>_getch();</strong></p>\n\n<pre><code>while (true)\n{\n    c = _getch();\n\n    if (c == '\\t')\n        // do something special\n    else\n        std::cout &lt;&lt; (char)c;\n}\n</code></pre>\n\n<p>But now, I can't use any specials functions keys as arrows, del, suppr, etc... I can't <strong><em>move</em></strong> into what am I typing as I can with <code>getline()</code></p>\n\n<p>So is there any solutions to do a special interruption in a middle of a <code>getline()</code> ? \nOr is it possible to use <code>_getch()</code> in a different way ?\nI also tried to do an other thread (one with <code>getline()</code> and the other with <code>_getch()</code> for checking every ) but I'm not so sure about what I can do with threads. </p>\n\n<p>It could be possible to handle every special function (arrows keys, del, suppr, etc...) 'manually' but I'm looking for another solution.</p>\n"}, {"tags": ["c++", "class", "constructor", "overloading", "constructor-overloading"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1478114036, "post_id": 40387922, "comment_id": 68027622, "body": "<code>MyContainer&lt;Type&gt;(const Type&amp;   a)</code> instead of the value type?"}, {"owner": {"reputation": 425, "user_id": 4064263, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/9Wh3i.jpg?s=128&g=1", "display_name": "Fine Man", "link": "https://stackoverflow.com/users/4064263/fine-man"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1478114150, "post_id": 40387922, "comment_id": 68027673, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 &amp; jrok -- Yes, thank you both! It works now. Is it because under the hood, literals (in the case of a <code>int</code> literal) are <code>const int</code>s? That would make sense, I guess."}], "answers": [{"comments": [{"owner": {"reputation": 425, "user_id": 4064263, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/9Wh3i.jpg?s=128&g=1", "display_name": "Fine Man", "link": "https://stackoverflow.com/users/4064263/fine-man"}, "edited": false, "score": 1, "creation_date": 1478114583, "post_id": 40388042, "comment_id": 68027883, "body": "Does this also mean I can remove the first constructor (given that I don&#39;t change the argument in the constructor)?"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 425, "user_id": 4064263, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/9Wh3i.jpg?s=128&g=1", "display_name": "Fine Man", "link": "https://stackoverflow.com/users/4064263/fine-man"}, "edited": false, "score": 0, "creation_date": 1478114691, "post_id": 40388042, "comment_id": 68027944, "body": "@SirJony Yes, as long you don&#39;t want to change the input parameter. I already wondered why you wanted to distinguish the cases."}], "tags": [], "owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "is_accepted": true, "score": 2, "last_activity_date": 1478114326, "creation_date": 1478114326, "answer_id": 40388042, "question_id": 40387922, "link": "https://stackoverflow.com/questions/40387922/constructor-overloading-ambiguity-when-trying-to-support-literals/40388042#40388042", "title": "Constructor Overloading Ambiguity When Trying to Support Literals", "body": "<p>Just change from the value type parameter to a <code>const</code> reference:</p>\n\n<pre><code>template &lt;typename Type&gt;\nclass MyContainer\n{\nprivate:\n    Type contained;\npublic:\n    MyContainer&lt;Type&gt;(Type &amp; a): contained(a) { std::cout &lt;&lt; \"&amp;\\n\"; }\n    MyContainer&lt;Type&gt;(const Type&amp; a): contained(a) { std::cout &lt;&lt; \"_\\n\"; }\n                   // ^^^^^     ^\n};\n</code></pre>\n"}], "owner": {"reputation": 425, "user_id": 4064263, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/9Wh3i.jpg?s=128&g=1", "display_name": "Fine Man", "link": "https://stackoverflow.com/users/4064263/fine-man"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 0, "accepted_answer_id": 40388042, "answer_count": 1, "score": 1, "last_activity_date": 1478114326, "creation_date": 1478113820, "last_edit_date": 1478114050, "question_id": 40387922, "link": "https://stackoverflow.com/questions/40387922/constructor-overloading-ambiguity-when-trying-to-support-literals", "title": "Constructor Overloading Ambiguity When Trying to Support Literals", "body": "<h2>Code</h2>\n\n<pre><code>#include &lt;iostream&gt;\n\ntemplate &lt;typename Type&gt;\nclass MyContainer\n{\nprivate:\n    Type contained;\npublic:\n    MyContainer&lt;Type&gt;(Type &amp; a): contained(a) { std::cout &lt;&lt; \"&amp;\\n\"; }\n    MyContainer&lt;Type&gt;(Type   a): contained(a) { std::cout &lt;&lt; \"_\\n\"; }\n};\n\nclass Epidemic\n{\nprivate:\n    int criticality;\npublic:\n    Epidemic(int c): criticality(c);\n};\n\nint main()\n{\n    // using objects //\n    Epidemic ignorance(10);\n    MyContainer&lt;Epidemic&gt; testtube(ignorance); // should print \"&amp;\"; error instead\n\n    // using primitive //\n    double irrationalnumber = 3.1415;\n    MyContainer&lt;double&gt; blasphemousnumber(irrationalnumber); // should print \"&amp;\"; error instead\n\n    // using literal //\n    MyContainer&lt;double&gt; digits(123456789.0); // prints \"_\"\n}\n</code></pre>\n\n<hr>\n\n<h2>Description</h2>\n\n<p><code>MyContainer&lt;Type&gt;(Type &amp; a)</code> is meant for most everything. However, it won't work with literals (e.g. <code>1.732</code>). That's why I added a <code>MyContainer&lt;Type&gt;(Type a)</code>. However, by adding this, I end up with an ambiguity because non-literals can use either constructor.</p>\n\n<hr>\n\n<h2>Question</h2>\n\n<blockquote>\n  <p><strong>Is there a way to satisfy all parameters (both literal and non-literal) given to a constructor?</strong></p>\n</blockquote>\n"}, {"tags": ["c++", "tcp", "server", "connection", "connection-timeout"], "comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1478114229, "post_id": 40387881, "comment_id": 68027706, "body": "So what is the actual question?"}, {"owner": {"reputation": 9, "user_id": 5355997, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lO9uc.jpg?s=128&g=1", "display_name": "Filip Geib", "link": "https://stackoverflow.com/users/5355997/filip-geib"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1478114611, "post_id": 40387881, "comment_id": 68027898, "body": "I would appreciate if someone can help me to set timeout for each client. Point me to right way how to do it. Give me some tip how can I do it..."}], "answers": [{"comments": [{"owner": {"reputation": 9, "user_id": 5355997, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lO9uc.jpg?s=128&g=1", "display_name": "Filip Geib", "link": "https://stackoverflow.com/users/5355997/filip-geib"}, "edited": false, "score": 0, "creation_date": 1478120045, "post_id": 40389372, "comment_id": 68030862, "body": "I have already tried it but with a little succeed. I set setsockopt() for new client each time when function accept() was called. Then I was checking after FD_ISSET the walue of read(). That did not do anything. When I checked it before FD_ISSET it disconnect client correctly but it destroy recieving data at all. When timeout overflow the value of read() is -1, correct?"}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "reply_to_user": {"reputation": 9, "user_id": 5355997, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lO9uc.jpg?s=128&g=1", "display_name": "Filip Geib", "link": "https://stackoverflow.com/users/5355997/filip-geib"}, "edited": false, "score": 0, "creation_date": 1478122097, "post_id": 40389372, "comment_id": 68031944, "body": "Correct, <i>and</i> the value of <code>errno</code> is EAGAIN/EWOULDBLOCK. Don&#39;t treat all errors as timeouts. But as you&#39;re using <code>select()</code> you should never get a read timeout from <code>recv()</code>."}], "tags": [], "owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "is_accepted": false, "score": 0, "last_activity_date": 1478119083, "creation_date": 1478119083, "answer_id": 40389372, "question_id": 40387881, "link": "https://stackoverflow.com/questions/40387881/tcp-server-set-timeout-for-each-client/40389372#40389372", "title": "TCP server set timeout for each client", "body": "<p>You call <code>setsockopt()</code> with the <code>SO_RCVTIMEO</code> option.</p>\n"}], "owner": {"reputation": 9, "user_id": 5355997, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lO9uc.jpg?s=128&g=1", "display_name": "Filip Geib", "link": "https://stackoverflow.com/users/5355997/filip-geib"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 800, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1478119083, "creation_date": 1478113640, "question_id": 40387881, "link": "https://stackoverflow.com/questions/40387881/tcp-server-set-timeout-for-each-client", "title": "TCP server set timeout for each client", "body": "<p>I am working with this code:</p>\n\n<pre><code>int main(int argc , char *argv[]) {\nint device, step=0;\nbool writeFuse = false;\n\nint max_clients=CLIENTS;\nint opt=TRUE;\nint master_socket, activity, new_socket, valread, max_sd;\n\nstruct timeval timeout;\n    timeout.tv_sec = 3;\n    timeout.tv_usec = 0;\n\n//set of socket descriptors\nfd_set readfds;\n\n//initialise all client_socket[] to 0 so not checked\nfor(int i=0; i&lt;max_clients; i++) {\n    client_socket[i] = 0;\n}\n\n//create a master socket\nif((master_socket = socket(AF_INET, SOCK_STREAM, 0)) == 0) {\n    perror(\"ERROR - Socket creation failed\");\n    exit(EXIT_FAILURE);\n}\nelse cout &lt;&lt; \"OK - Socket created.\" &lt;&lt; endl;\n\n//set master socket to allow multiple connections , this is just a good habit, it will work without this\nif(setsockopt(master_socket, SOL_SOCKET, SO_REUSEADDR, (char *)&amp;opt, sizeof(opt)) &lt; 0 ) {\n    perror(\"ERROR - Socket initialization failed\");\n    exit(EXIT_FAILURE);\n}\nelse cout &lt;&lt; \"OK - Socket initializated.\" &lt;&lt; endl;\n\n//type of socket created\naddress.sin_family = AF_INET;\naddress.sin_addr.s_addr = INADDR_ANY;\naddress.sin_port = htons( PORT );\n\n//bind the socket to localhost port\nif(bind(master_socket, (struct sockaddr *)&amp;address, sizeof(address))&lt;0) {\n    perror(\"ERROR - Bind failed\");\n    exit(EXIT_FAILURE);\n}\nelse cout &lt;&lt; \"OK - Bind successful.\" &lt;&lt; endl;\n\ncout &lt;&lt; \"Listening on port \" &lt;&lt; PORT &lt;&lt; \":\" &lt;&lt; endl &lt;&lt; endl;\n\n//try to specify maximum of 3 pending connections for the master socket\nif(listen(master_socket, 3) &lt; 0) {\n    perror(\"listen\");\n    exit(EXIT_FAILURE);\n}\n\n//accept the incoming connection\naddrlen = sizeof(address);\n\nwhile (TRUE) {\n    //clear the socket set\n    FD_ZERO(&amp;readfds);\n\n    //add master socket to set\n    FD_SET(master_socket, &amp;readfds);\n    max_sd = master_socket;\n\n    //add child sockets to set\n    for(int i=0; i&lt;max_clients ; i++) {\n        //socket descriptor\n        int sd = client_socket[i];\n\n        //if valid socket descriptor then add to read list\n        if(sd &gt; 0)\n            FD_SET( sd , &amp;readfds);\n\n        //highest file descriptor number, need it for the select function\n        if(sd &gt; max_sd)\n            max_sd = sd;\n    }\n\n    //wait for an activity on one of the sockets , timeout is NULL , so wait indefinitely\n    activity = select(max_sd + 1, &amp;readfds, NULL, NULL, NULL);\n\n    if((activity &lt; 0) &amp;&amp; (errno!=EINTR))\n        cout &lt;&lt; \"ERROR - Selection error.\" &lt;&lt; endl;\n\n    //if something happened on the master socket , then its an incoming connection\n    if(FD_ISSET(master_socket, &amp;readfds)) {\n        if((new_socket = accept(master_socket, (struct sockaddr *)&amp;address, (socklen_t*)&amp;addrlen))&lt;0) {\n            perror(\"accept\");\n            exit(EXIT_FAILURE);\n        }\n\n        //inform user of socket number - used in send and receive commands\n        cout &lt;&lt; \"New connection accepted. Socket fd: \" &lt;&lt; new_socket &lt;&lt; \", ip: \" &lt;&lt; inet_ntoa(address.sin_addr) &lt;&lt; \", port: \" &lt;&lt; ntohs(address.sin_port) &lt;&lt; \".\" &lt;&lt; endl;\n\n        //add new socket to array of sockets\n        for(int i = 0; i&lt;max_clients; i++) {\n            //if position is empty\n            if(client_socket[i] == 0) {\n                client_socket[i] = new_socket;\n                cout &lt;&lt; \"Adding to list of sockets as \" &lt;&lt; i &lt;&lt; \".\" &lt;&lt; endl;\n                client_status[i] = false;\n\n                int sum=0;\n                for(int j=0; j&lt;CLIENTS; j++)\n                    sum += client_socket[j];\n                if(sum == new_socket)\n                    message_done(i);\n\n                break;\n            }\n        }\n    }\n\n    //else its some IO operation on some other socket :)\n    for(int i=0; i&lt;max_clients; i++) {\n        int sd = client_socket[i];\n\n        if(FD_ISSET(sd, &amp;readfds)) {\n            //check if it was for closing, and also read the incoming message\n            if((valread = read(sd, buffer, 1024)) == 0) {\n                //somebody disconnected, process it\n                disconnection(sd, i);\n            }\n\n            //everything is ok, can process data\n            else {\n                //set the string terminating NULL byte on the end of the data read\n                if(buffer[valread] != '\\0')\n                    buffer[valread] = '\\0';\n                int data = atoi(buffer);\n                cout &lt;&lt; \"Client \" &lt;&lt; i &lt;&lt; \" send message: \" &lt;&lt; data &lt;&lt; endl;\n\n                //some data processing stuff\n            }\n        }\n    }\n}\n\nreturn 0;\n}\n</code></pre>\n\n<p>It is a simple TCP server with multiple connections. I am trying to set a receive timeout for each of the connected clients. I have been searching via Internet and have done few tries. But with no suceed. </p>\n"}, {"tags": ["c++", "c", "visual-studio-2015", "compiler-errors", "coding-style"], "comments": [{"owner": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "edited": false, "score": 1, "creation_date": 1478113844, "post_id": 40387870, "comment_id": 68027532, "body": "<i>and since c and c++ are compatible that&#39;s awesome for me</i>, bad news: this is false :("}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1478114346, "post_id": 40387870, "comment_id": 68027759, "body": "Build everything using the same compiler. Sometimes even a service pack difference will not work with precompiled headers."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1478114503, "post_id": 40387870, "comment_id": 68027840, "body": "<b><i>Wouldn&#39;t it just precompile it again ?</i></b> You can have it do that if you delete the old <code>.pch</code> files."}], "answers": [{"tags": [], "owner": {"reputation": 63, "user_id": 7042812, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/f6cf86ff676392540d88fc168299c77e?s=128&d=identicon&r=PG&f=1", "display_name": "user7042812", "link": "https://stackoverflow.com/users/7042812/user7042812"}, "is_accepted": true, "score": 2, "last_activity_date": 1478685075, "creation_date": 1478685075, "answer_id": 40504009, "question_id": 40387870, "link": "https://stackoverflow.com/questions/40387870/precompiled-header-is-from-previous-version-of-compiler/40504009#40504009", "title": "Precompiled header is from previous version of compiler", "body": "<p>Fixed this by following steps:</p>\n\n<ol>\n<li>Turned off precompiled headers</li>\n<li>Deleted .pch file</li>\n</ol>\n\n<p>Since this was not fixing the error I did some few more things:</p>\n\n<ol start=\"3\">\n<li>Changed extension of <strong>send.c to send.cpp</strong></li>\n<li>Properties->C/C++->Advanced-><strong>Compile As C Code (/TC)</strong></li>\n<li>Properties->General-> character set changed to <strong>Use Multi-Byte Character Set</strong></li>\n</ol>\n\n<p>And this fixed my problem :)</p>\n"}], "owner": {"reputation": 63, "user_id": 7042812, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/f6cf86ff676392540d88fc168299c77e?s=128&d=identicon&r=PG&f=1", "display_name": "user7042812", "link": "https://stackoverflow.com/users/7042812/user7042812"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5053, "favorite_count": 0, "accepted_answer_id": 40504009, "answer_count": 1, "score": 1, "last_activity_date": 1478685075, "creation_date": 1478113592, "question_id": 40387870, "link": "https://stackoverflow.com/questions/40387870/precompiled-header-is-from-previous-version-of-compiler", "title": "Precompiled header is from previous version of compiler", "body": "<p>How do I use c library in large C++ codebase?</p>\n\n<p>I have found some good <a href=\"https://github.com/Azure/azure-event-hubs\" rel=\"nofollow noreferrer\">c library</a>, and since c and c++ are compatible that's awesome for me. I have this big codebase with many projects, and i want to use that library inside one of projects.</p>\n\n<p>So I built library on C drive, and after that I just placed it into folder with the project i want to use it with, changed references in project properties to target that library etc.</p>\n\n<p>After that I have called from one of cpp files function in my send.c file which included some library files, and got error during building </p>\n\n<pre><code>Precompiled header is from previous version of compiler \n</code></pre>\n\n<p>So I wanted to ask:</p>\n\n<ol>\n<li>Should I build separately library or is it ok to do this way as I did ?</li>\n<li>How should i fix these errors ? (I tried changing from .c into .cpp but library than has many errors)</li>\n<li>Where should i put library ? Are there any good conventions ? Since now it is just there pasted next to the project</li>\n<li>How can if it can, previous compiling have impact on new build ?! Wouldn't it just precompile it again ?</li>\n<li>In this large codebase i don't see that many libraries so autonomous like this one. Can i turn it somehow into one .lib file and somehow use it easier by just importing it? Since I wont be changing it, it will always be used just for message sending. And like this there is a bunch of things that need to be configured in each project that would use it maybe in the future</li>\n</ol>\n\n<p>Thanks !</p>\n\n<p><strong>Note 1:</strong> \n  I am using Visual Studio 2015 on Windows Server 2012 R2.</p>\n"}, {"tags": ["c++", "arrays", "file", "filestream", "stringstream"], "comments": [{"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 4, "creation_date": 1478113497, "post_id": 40387823, "comment_id": 68027340, "body": "<code>for(int j = 0; j &lt; 10; j++){     while(getline(fin, line)){</code> That looks fishy"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 2, "creation_date": 1478113662, "post_id": 40387823, "comment_id": 68027434, "body": "The right tool to solve such problems is your debugger. You should step through your code line-by-line <i>before</i> asking on Stack Overflow. For more help, please read <a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">How to debug small programs (by Eric Lippert)</a>. At a minimum, you should &#91;edit] your question to include a <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable</a> example that reproduces your problem, along with the observations you made in the debugger."}], "answers": [{"comments": [{"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1478114328, "post_id": 40387988, "comment_id": 68027749, "body": "Probably won&#39;t help. OP would still need to break out of the inner while loop after reading a student somehow."}, {"owner": {"reputation": 23, "user_id": 7066402, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/32e79a325a8b1759463bc423089276ec?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Santoro", "link": "https://stackoverflow.com/users/7066402/michael-santoro"}, "edited": false, "score": 0, "creation_date": 1478114742, "post_id": 40387988, "comment_id": 68027977, "body": "I think my problem might be with the totalStudents variable. The max size of the array is 10 but I think the while loop will try and exceed the value of 10 because totalStudents keeps increasing. I don&#39;t know how to change that without creating an infinite loop."}, {"owner": {"reputation": 6610, "user_id": 2403810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84c63a4cc13b434306ccc00ba2cd64d6?s=128&d=identicon&r=PG&f=1", "display_name": "tinstaafl", "link": "https://stackoverflow.com/users/2403810/tinstaafl"}, "reply_to_user": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1478115101, "post_id": 40387988, "comment_id": 68028191, "body": "@AndyG - oops my bad, didn&#39;t look at it close enough.  I added better code, which should help."}, {"owner": {"reputation": 23, "user_id": 7066402, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/32e79a325a8b1759463bc423089276ec?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Santoro", "link": "https://stackoverflow.com/users/7066402/michael-santoro"}, "edited": false, "score": 0, "creation_date": 1478115357, "post_id": 40387988, "comment_id": 68028345, "body": "Thank you so much, I added a counter for totalstudents and made sure it was less than 10, the limit. Appreciate the help."}], "tags": [], "owner": {"reputation": 6610, "user_id": 2403810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84c63a4cc13b434306ccc00ba2cd64d6?s=128&d=identicon&r=PG&f=1", "display_name": "tinstaafl", "link": "https://stackoverflow.com/users/2403810/tinstaafl"}, "is_accepted": true, "score": 0, "last_activity_date": 1478114988, "last_edit_date": 1478114988, "creation_date": 1478114110, "answer_id": 40387988, "question_id": 40387823, "link": "https://stackoverflow.com/questions/40387823/code-cant-accept-file-that-exceeds-array-size/40387988#40387988", "title": "Code can&#39;t accept file that exceeds array size?", "body": "<p>It looks to me that after finding the empty line you should try using a <code>continue</code> statement, instead:</p>\n\n<pre><code>for (int j = 0; j &lt; 10; j++) {\n    while (getline(fin, line)) {\n        sin.clear();\n\n        if (line.empty())\n        {\n            continue;\n        }\n        else {\n            sin.str(line);\n            while (sin &gt;&gt; firstName &gt;&gt; lastName) {\n                stu.fname = firstName;\n                stu.lname = lastName;\n\n                while (sin &gt;&gt; score) {\n                    total += score;\n                    i++;\n                    stu.average = (total / i);\n                }\n            }\n            s[j] = stu;\n            stu.average = 0;\n            total = 0;\n            i = 0;\n\n        }\n    }\n}\n</code></pre>\n\n<p>As per comments, I missed that about the for loop.  It can be eliminated altogether and just have the while loop and a counter:</p>\n\n<pre><code>int j = 0;\nwhile (getline(fin, line) &amp;&amp; j &lt; 10)\n{\n    sin.clear();\n\n    if (line.empty())\n    {\n        continue;\n    }\n    else\n    {\n        sin.str(line);\n        while (sin &gt;&gt; firstName &gt;&gt; lastName)\n        {\n            stu.fname = firstName;\n            stu.lname = lastName;\n\n            while (sin &gt;&gt; score)\n            {\n                total += score;\n                i++;\n                stu.average = (total / i);\n            }\n        }\n        s[j] = stu;\n        stu.average = 0;\n        total = 0;\n        i = 0;\n        j++;\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 7066402, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/32e79a325a8b1759463bc423089276ec?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Santoro", "link": "https://stackoverflow.com/users/7066402/michael-santoro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "accepted_answer_id": 40387988, "answer_count": 1, "score": -3, "last_activity_date": 1478114988, "creation_date": 1478113377, "question_id": 40387823, "link": "https://stackoverflow.com/questions/40387823/code-cant-accept-file-that-exceeds-array-size", "title": "Code can&#39;t accept file that exceeds array size?", "body": "<p>Below I have my current code for a project I am working on. It is meant to take a file of students and their grades, average the grades, and then place them all back into an output file. The amount of students should not exceed 10, so if there is more than 10 students it should only read the first 10 then reverse the order. My code works perfectly excpepty when given a file with more than 10 students. It appears it is trying to access a part in memory that doesn't exist. I tried getting the code to ignore empty lines, which it should, but that doesn't seem to fix it. My \"read\" function is where I believe the problem is.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;sstream&gt;\n#include &lt;iomanip&gt;\n\nusing namespace std;\n\n//My student structure that holds the variable for each student object.\nstruct Student\n{\n    string fname;\n    string lname;\n    double average;\n};\n\n//Prototyping the functions to read the input file into an array and then reverse it.\nint read(ifstream &amp;fin, Student s[]);\n\nvoid print(ofstream &amp;fout, Student s[], int amount);\n\nvoid reverse(Student s[], int amount);\n\nint main()\n{\n    //Creating the file streams and global constant for the array and the filling it with I/O.\n    const int size = 10;\n    ifstream fin;\n    ofstream fout;\n    string inputFile;\n    string outputFile;\n    Student s[size];\n\n    cout &lt;&lt; \"Enter input filename: \";\n    cin &gt;&gt; inputFile;\n    cout &lt;&lt; \"Enter output filename: \";\n    cin &gt;&gt; outputFile;\n\n    //opeining the files given by the user and then testing if the opened.\n    fin.open(inputFile.c_str());\n    fout.open(outputFile.c_str());\n\n    if(fin.fail()) {\n        cout &lt;&lt; \"Unable to open input file.\\n\";\n        return 1;\n    }\n\n\n    //calling my 3 functions and then returning to main(). Closing files as well.\n    int count = read(fin , s);\n    reverse(s, count);\n    print(fout, s, count);\n    count = 0;\n\n    fin.close();\n    fout.close();\n\n}\n\n//This function reads the file given and breaks it up using string stream. It then calculates the averages for each stuent and assigns it to the array.\nint read(ifstream &amp;fin, Student s[])\n{\n    istringstream sin;\n    string line;\n    string firstName;\n    string lastName;\n    double score;\n    double total;\n    double i=0;\n    int totalStudents=0;\n    Student stu;\n    for(int j = 0; j &lt; 10; j++){\n    while(getline(fin, line)){\n        sin.clear();\n\n        if(line.empty())\n        {\n            j--;\n        }else{\n            sin.str(line);\n        while(sin &gt;&gt; firstName &gt;&gt; lastName){\n            stu.fname = firstName;\n            stu.lname = lastName;\n\n            while(sin &gt;&gt; score){\n            total += score;\n            i++;\n            stu.average = (total/i);\n            }\n        }\n        s[totalStudents]=stu;\n        totalStudents++;\n        stu.average = 0;\n        total = 0;\n        i = 0;\n\n    }\n    }\n    }\n\n    //returning the number of students in the file so it can later be used for the variable of total students.\n    return totalStudents;\n}\n\n//My print function that puts the array into a given output file.\nvoid print(ofstream &amp;fout, Student s[], int amount)\n{\n    for(int i = 0; i&lt;amount; i++)\n    {\n        if(s[i].lname.empty())\n        {\n            fout&lt;&lt;\"No students to report.\";\n        }else{\n        ostringstream sout;\n        sout &lt;&lt; s[i].lname.c_str() &lt;&lt; \", \" &lt;&lt; s[i].fname.c_str();\n        fout &lt;&lt;setw(21)&lt;&lt; left &lt;&lt; sout.str() &lt;&lt; setprecision(2) &lt;&lt; fixed &lt;&lt; \"= \" &lt;&lt; s[i].average &lt;&lt; '\\n';\n    }\n    }\n}\n\n//the function that reverses the order of the students by copying the last student into a temporary variable and casting it to the beggining.\nvoid reverse(Student s[], int amount)\n{\n    Student temp;\n    for(int i=0; i&lt; amount/2; i++)\n    {\n\n        temp=s[i];\n        s[i]=s[amount-i-1];\n        s[amount - i - 1] = temp;\n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "c++11", "templates"], "comments": [{"owner": {"reputation": 4815, "user_id": 3087601, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/ad2f9879fa1dea6fd47a45052ad02a09?s=128&d=identicon&r=PG&f=1", "display_name": "Zereges", "link": "https://stackoverflow.com/users/3087601/zereges"}, "edited": false, "score": 1, "creation_date": 1478113339, "post_id": 40387760, "comment_id": 68027256, "body": "What about <code>template&lt;typename T&gt; using Task = tasks::TaskWrapper&lt;T, task1&gt;;</code> and then use it as <code>Task&lt;uint8_t&gt;</code>."}], "answers": [{"tags": [], "owner": {"reputation": 124806, "user_id": 121747, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/9fcebb68b105446c0d9eebbce1146044?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/121747/jack"}, "is_accepted": false, "score": 2, "last_activity_date": 1478115574, "creation_date": 1478115574, "answer_id": 40388388, "question_id": 40387760, "link": "https://stackoverflow.com/questions/40387760/functions-as-template-arguments/40388388#40388388", "title": "functions as template arguments", "body": "<p>You can move the template argument to the site of invocation, but this will make it correspond to the argument passed for the deduction, eg:</p>\n\n<pre><code>template &lt;typename F, F functor&gt;\nstruct TaskWrapper {\n  template&lt;typename T&gt;\n  static inline T run(T clock) {\n    return functor(clock);\n  }\n};\n\nuint16_t task1(uint16_t clock) { return clock + 1; }\ntypedef TaskWrapper&lt;decltype(task1), task1&gt; Task;\n\nint main(int argc, const char * argv[])\n{\n  Task task;\n  Task::run(10);\n  return 0;\n}\n</code></pre>\n\n<p>So that it will generate a <code>static inline int run(int clock)</code>, which is not the same argument type of the initial function but could be enough for your purpose.</p>\n"}, {"tags": [], "owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "is_accepted": false, "score": 1, "last_activity_date": 1478116538, "creation_date": 1478116538, "answer_id": 40388659, "question_id": 40387760, "link": "https://stackoverflow.com/questions/40387760/functions-as-template-arguments/40388659#40388659", "title": "functions as template arguments", "body": "<p>I don't think it's possible what do you exactly ask: if you want to pass the functions as template <strong>value</strong>, without express the type, you have to know the type before; but the type of the function is what do you want to deduce.</p>\n\n<p>If you accept to pass the <strong>type</strong> of the function, as follows</p>\n\n<pre><code>template &lt;typename&gt;\nstruct taskWrapper;\n\ntemplate &lt;typename T&gt;\nstruct taskWrapper&lt;std::function&lt;T(T)&gt;&gt;\n {\n   static inline T run (std::function&lt;T(T)&gt; const &amp; F, T clock)\n    { return F(clock); };\n };\n</code></pre>\n\n<p>you can define define your <code>typedef</code>s </p>\n\n<pre><code>typedef taskWrapper&lt;std::function&lt;decltype(task8)&gt;&gt;  tsk8;\ntypedef taskWrapper&lt;std::function&lt;decltype(task16)&gt;&gt; tsk16;\ntypedef taskWrapper&lt;std::function&lt;decltype(task32)&gt;&gt; tsk32;\n</code></pre>\n\n<p>but you can see that <code>taskWrapper&lt;std::function&lt;decltype(task8)&gt;&gt;</code> know only the <strong>type</strong> of <code>task8()</code>, not the <code>task8()</code> function itself; so you have to pass the function to <code>run()</code>.</p>\n\n<p>The following is a working example.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;functional&gt;\n\ntemplate &lt;typename&gt;\nstruct taskWrapper;\n\ntemplate &lt;typename T&gt;\nstruct taskWrapper&lt;std::function&lt;T(T)&gt;&gt;\n {\n   static inline T run (std::function&lt;T(T)&gt; const &amp; F, T clock)\n    { return F(clock); };\n };\n\nuint8_t task8 (uint8_t clock)\n { return ++clock; }\n\nuint16_t task16 (uint16_t clock)\n { return ++clock; }\n\nuint32_t task32 (uint32_t clock)\n { return ++clock; }\n\ntypedef taskWrapper&lt;std::function&lt;decltype(task8)&gt;&gt;  tsk8;\ntypedef taskWrapper&lt;std::function&lt;decltype(task16)&gt;&gt; tsk16;\ntypedef taskWrapper&lt;std::function&lt;decltype(task32)&gt;&gt; tsk32;\n\nint main ()\n {\n   tsk8   t8;\n   tsk16  t16;\n   tsk32  t32;\n\n   std::cout &lt;&lt; t8.run(task8,   uint8_t(64)) &lt;&lt; std::endl;  // print A\n   std::cout &lt;&lt; t16.run(task16, uint16_t(65)) &lt;&lt; std::endl; // print 66\n   std::cout &lt;&lt; t32.run(task32, uint32_t(66)) &lt;&lt; std::endl; // print 67\n }\n</code></pre>\n\n<p>Hope this helps.</p>\n"}, {"comments": [{"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1478118722, "post_id": 40389160, "comment_id": 68030178, "body": "Oh I like!  Would have been very useful in <a href=\"http://stackoverflow.com/a/40389000/103167\">this snippet I just wrote</a>"}], "tags": [], "owner": {"reputation": 11117, "user_id": 1554020, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/49118fbd7e64a00bc99b19d41e5e28e0?s=128&d=identicon&r=PG", "display_name": "yuri kilochek", "link": "https://stackoverflow.com/users/1554020/yuri-kilochek"}, "is_accepted": true, "score": 3, "last_activity_date": 1478118353, "creation_date": 1478118353, "answer_id": 40389160, "question_id": 40387760, "link": "https://stackoverflow.com/questions/40387760/functions-as-template-arguments/40389160#40389160", "title": "functions as template arguments", "body": "<p>Only since C++17's <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2016/p0127r2.html\" rel=\"nofollow noreferrer\">template &lt;auto&gt;</a> feature:</p>\n\n<pre><code>template &lt;auto F&gt;\nstruct TaskWrapper {\n  template &lt;typename T&gt;\n  static inline auto run(T clock) {\n    return F(clock);\n  }\n};\n\nuint16_t task1(uint16_t clock) { return clock + 1; }\ntypedef TaskWrapper&lt;&amp;task1&gt; Task; // ok\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1097, "user_id": 327725, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/76b7586c7c3043034741acc7a1c89048?s=128&d=identicon&r=PG", "display_name": "olpa", "link": "https://stackoverflow.com/users/327725/olpa"}, "is_accepted": false, "score": 2, "last_activity_date": 1478170296, "last_edit_date": 1478170296, "creation_date": 1478120710, "answer_id": 40389770, "question_id": 40387760, "link": "https://stackoverflow.com/questions/40387760/functions-as-template-arguments/40389770#40389770", "title": "functions as template arguments", "body": "<p>Templates are easy when using types and not values as arguments. Can you convert your functions to functors? If yes, then a possible solution were:</p>\n\n<pre><code>template&lt;class F&gt;\nstruct TaskWrapper {\n  using T = decltype(F::operator());\n  static inline T run(T clock) {\n    return F(clock);\n  }\n};\n\nstruct task1_t {\n  uint16_t operator()(uint16_t clock) {\n    return clock + 1;\n  }\n};\n\nusing Task = TaskWrapper&lt;task1_t&gt;;\n</code></pre>\n"}], "owner": {"reputation": 308, "user_id": 2991669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b87cca0aa251dc71a9d7078e366a32b3?s=128&d=identicon&r=PG&f=1", "display_name": "close2", "link": "https://stackoverflow.com/users/2991669/close2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 101, "favorite_count": 0, "accepted_answer_id": 40389160, "answer_count": 4, "score": 3, "last_activity_date": 1478170296, "creation_date": 1478113159, "question_id": 40387760, "link": "https://stackoverflow.com/questions/40387760/functions-as-template-arguments", "title": "functions as template arguments", "body": "<p>I have a TaskWrapper:</p>\n\n<pre><code>template &lt;typename T, T (*F)(T)&gt;\nstruct TaskWrapper {\n  static inline T run(T clock) {\n    return F(clock);\n  }\n};\n</code></pre>\n\n<p>to use it I have to specify the T template argument:</p>\n\n<pre><code>uint16_t task1(uint16_t clock) { return clock + 1; }\ntypedef tasks::TaskWrapper&lt;uint16_t, task1&gt; Task;\n</code></pre>\n\n<p>I would like to simply write:</p>\n\n<pre><code>typedef tasks::TaskWrapper&lt;task1&gt; Task;\n</code></pre>\n\n<p>and let the compiler figure out that the return and argument type is uint16_t.</p>\n\n<p>Notes:</p>\n\n<p>The TaskWrapper is obviously simplified and in reality has a few other arguments, which are passed during the typedef.</p>\n\n<p>The wrapped functions can only be:</p>\n\n<pre><code>uint8_t task(uint8_t clock);\nuint16_t task(uint16_t clock); // or\nuint32_t task(uint32_t clock);\n</code></pre>\n\n<p>The TaskWrapper is passed as template argument to another class, which will at some point call Task::run(...);</p>\n\n<p>C++11 would be fine.</p>\n"}, {"tags": ["c++", "c++11", "inheritance", "memory-management", "smart-pointers"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1478113201, "post_id": 40387700, "comment_id": 68027189, "body": "What about a <code>virtual</code> destructor in <code>Base</code> instead of a custom deleter?"}], "answers": [{"tags": [], "owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "is_accepted": true, "score": 6, "last_activity_date": 1478113657, "last_edit_date": 1478113657, "creation_date": 1478113216, "answer_id": 40387776, "question_id": 40387700, "link": "https://stackoverflow.com/questions/40387700/smart-pointers-and-derived-classes/40387776#40387776", "title": "Smart pointers and derived classes", "body": "<p>Just mark the destructor of <code>Base</code> as <code>virtual</code>. Then the default deleter will invoke <code>delete pointer_to_raw_object;</code>, which will call the right destructor based on the dynamic type of <code>object</code>.</p>\n\n<p>Example:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;memory&gt;\n#include &lt;list&gt;\n\nstruct Base\n{\n    virtual ~Base(){std::cout &lt;&lt; __PRETTY_FUNCTION__ &lt;&lt; std::endl;}\n};\n\nstruct Derived : Base\n{\n    ~Derived() override {std::cout &lt;&lt; __PRETTY_FUNCTION__ &lt;&lt; std::endl;}\n};\n\nint main()\n{\n    std::list&lt;std::unique_ptr&lt;Base&gt;&gt; l;\n    l.emplace_back(new Base);\n    l.emplace_back(new Derived);\n}\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/7ef368cb48ac1305\" rel=\"nofollow noreferrer\"><kbd>Live on Coliru</kbd></a></p>\n\n<p>PS: consider using <a href=\"http://en.cppreference.com/w/cpp/container/list/emplace_back\" rel=\"nofollow noreferrer\"><code>std::list::emplace_back</code></a> for cleaner (and more efficient) code.</p>\n"}], "owner": {"reputation": 1841, "user_id": 6245072, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/e93796ec6c5c6a3f05ff00d232200208?s=128&d=identicon&r=PG", "display_name": "user6245072", "link": "https://stackoverflow.com/users/6245072/user6245072"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2964, "favorite_count": 0, "accepted_answer_id": 40387776, "answer_count": 1, "score": 3, "last_activity_date": 1478113657, "creation_date": 1478112954, "question_id": 40387700, "link": "https://stackoverflow.com/questions/40387700/smart-pointers-and-derived-classes", "title": "Smart pointers and derived classes", "body": "<p>I am going to store a large quantity of objects in a <code>std::list</code>.</p>\n\n<p>Since I need those objects to store different types of data, I am storing pointers to a base class which only holds an attribute of an <code>enum</code> type which tells the objects to which of the derived classes it should be casted to. Each derived class has then its own type of data:</p>\n\n<pre><code>struct Base {\n    enum class Type {\n        D1,\n        D2,\n        ...\n    } type;\n\n    Base(Type new_type):\n        type(new_type) {}\n};\n\nstruct D1: public Base {\n    std::string data;\n\n    D1(std::string new_data):\n        Base(Base::Type::D1), data(new_data) {}\n};\n\nstruct D2: public Base {\n    double data;\n\n    D2(double new_data):\n        Base(Base::Type::D2), data(new_data) {}\n};\n</code></pre>\n\n<p>To hold pointers to these objects, I am using smart pointers:</p>\n\n<pre><code>std::list&lt;std::unique_ptr&lt;Base&gt;&gt; list;\nlist.push_back(std::unique_ptr&lt;Base&gt;(new D1(\"Somestring\")));\nlist.push_back(std::unique_ptr&lt;Base&gt;(new D2(3.14)));\n</code></pre>\n\n<p>However, while each Base object knows what type it should be casted to to get deleted properly, the smart pointer only knows that it must call Base's destructor. Which would leave undeleted the memory each subclass allocated.</p>\n\n<p>How would I pass a custom deleter to the smart pointers so that they know how to properly cast and free each object's memory? What should I implement that custom deleter?</p>\n"}, {"tags": ["c++", "rvalue", "universal-reference"], "comments": [{"owner": {"reputation": 3257, "user_id": 3578468, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/c7957773c9ae23195b8a064ade49af29?s=128&d=identicon&r=PG&f=1", "display_name": "lo tolmencre", "link": "https://stackoverflow.com/users/3578468/lo-tolmencre"}, "reply_to_user": {"reputation": 18687, "user_id": 3552770, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b0404d5b5bd565aa720c6b3d190716b3?s=128&d=identicon&r=PG", "display_name": "LogicStuff", "link": "https://stackoverflow.com/users/3552770/logicstuff"}, "edited": false, "score": 0, "creation_date": 1478113116, "post_id": 40387675, "comment_id": 68027148, "body": "can you rephrase that? I don\\t understand what you are saying."}, {"owner": {"reputation": 86516, "user_id": 701092, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/xYrM0.jpg?s=128&g=1", "display_name": "0x499602D2", "link": "https://stackoverflow.com/users/701092/0x499602d2"}, "edited": false, "score": 0, "creation_date": 1478113150, "post_id": 40387675, "comment_id": 68027160, "body": "Why do you say <code>T&amp;&amp;</code> is an rvalue reference in that case?"}], "answers": [{"comments": [{"owner": {"reputation": 3257, "user_id": 3578468, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/c7957773c9ae23195b8a064ade49af29?s=128&d=identicon&r=PG&f=1", "display_name": "lo tolmencre", "link": "https://stackoverflow.com/users/3578468/lo-tolmencre"}, "edited": false, "score": 0, "creation_date": 1478113548, "post_id": 40387764, "comment_id": 68027381, "body": "I see, yes I supplied it explicitly. Thanks. Will look up that decay function."}, {"owner": {"reputation": 15610, "user_id": 2456565, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xa8D9.png?s=128&g=1", "display_name": "krzaq", "link": "https://stackoverflow.com/users/2456565/krzaq"}, "reply_to_user": {"reputation": 3257, "user_id": 3578468, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/c7957773c9ae23195b8a064ade49af29?s=128&d=identicon&r=PG&f=1", "display_name": "lo tolmencre", "link": "https://stackoverflow.com/users/3578468/lo-tolmencre"}, "edited": false, "score": 1, "creation_date": 1478113645, "post_id": 40387764, "comment_id": 68027426, "body": "@lotolmencre <code>decay_t</code> is there to make sure you don&#39;t end up with <code>T&amp;</code>, which isn&#39;t a legal type for <code>std::array</code>"}], "tags": [], "owner": {"reputation": 15610, "user_id": 2456565, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xa8D9.png?s=128&g=1", "display_name": "krzaq", "link": "https://stackoverflow.com/users/2456565/krzaq"}, "is_accepted": true, "score": 3, "last_activity_date": 1478113170, "creation_date": 1478113170, "answer_id": 40387764, "question_id": 40387675, "link": "https://stackoverflow.com/questions/40387675/universal-reference-for-template-type-error/40387764#40387764", "title": "universal reference for template type error", "body": "<p>That's because you supplied the parameter type explicitly (I am assuming this much, but this is the only way to make your example compile).</p>\n\n<p><code>f&lt;int,5&gt;</code> performs no type deductions at all, and its parameter is <code>int&amp;&amp;</code>. There is no reference collapsing going on.</p>\n\n<p>You could work around this by writing the <code>f</code> template as such:</p>\n\n<pre><code>template&lt;unsigned n, typename T&gt;\narray&lt;decay_t&lt;T&gt;, n&gt;\nf(T&amp;&amp; t);\n</code></pre>\n\n<p>Now, <code>t</code> is a forwarding/universal reference <em>if you don't provide the second template argument explicitly</em>.</p>\n"}], "owner": {"reputation": 3257, "user_id": 3578468, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/c7957773c9ae23195b8a064ade49af29?s=128&d=identicon&r=PG&f=1", "display_name": "lo tolmencre", "link": "https://stackoverflow.com/users/3578468/lo-tolmencre"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 100, "favorite_count": 0, "accepted_answer_id": 40387764, "answer_count": 1, "score": 0, "last_activity_date": 1478113170, "creation_date": 1478112856, "question_id": 40387675, "link": "https://stackoverflow.com/questions/40387675/universal-reference-for-template-type-error", "title": "universal reference for template type error", "body": "<p>Excuse the bad title...</p>\n\n<p>So, normally in a function like this:</p>\n\n<pre><code>template &lt;class T&gt;\nvoid f(T&amp;&amp; i){\n}\n</code></pre>\n\n<p><code>T&amp;&amp;</code> is a universal reference. In a context like this it is an rvalue-reference:</p>\n\n<pre><code>template &lt;class T&gt;\nstruct s{\n\n    void f(T&amp;&amp; t){}\n\n};\n</code></pre>\n\n<p>This makes sense, as <code>T</code> is a fixed type relative to <code>s</code> of which <code>f()</code> is a method.</p>\n\n<p>However, apparently in this context:</p>\n\n<pre><code>template &lt;class T, unsigned n&gt;\nstd::array&lt;T, n&gt;\nf(T&amp;&amp;){\n}\n</code></pre>\n\n<p><code>T&amp;&amp;</code> is an rvalue-reference as well. This case is different from the above one though. So, what is the reason for <code>T&amp;&amp;</code> being an rvalue-reference here as well rather than a universal one?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 1, "creation_date": 1478112970, "post_id": 40387662, "comment_id": 68027071, "body": "The exact size of core types, like <code>short</code> and <code>int</code>, are not guaranteed to be consistent across platforms.  That is why types like <code>int16_t</code> and <code>int32_t</code> exist at all. Some Windows compilers do have <code>stdint.h</code> (or equivalent). Just be sure to use <code>#include &lt;cstdint&gt;</code> (C++) rather than <code>#include &lt;stdint.h&gt;</code> (C)."}, {"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1478113273, "post_id": 40387662, "comment_id": 68027226, "body": "Most obvious way to rely on stdint.h on Windows is to use GCC of course.  MSVC++ had as well at least for the past 3 years."}, {"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 0, "creation_date": 1478113409, "post_id": 40387662, "comment_id": 68027293, "body": "Is it important that your types has an <i>exact</i> width? Or is it just an advantage if <code>int</code> is 36 bits instead of 32 on <a href=\"http://stackoverflow.com/questions/6971886/exotic-architectures-the-standards-committees-care-about\">some systems</a>, rather than the code not compiling at all?"}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 1, "creation_date": 1478113743, "post_id": 40387662, "comment_id": 68027475, "body": "In fact Microsoft&#39;s implementation <i>does</i> support <code>&lt;stdint.h&gt;</code> (at least in recent versions). <a href=\"https://msdn.microsoft.com/en-us/library/323b6b3k.aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/323b6b3k.aspx</a>"}, {"owner": {"reputation": 286, "user_id": 1733021, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/03ed805a4aafb43d47bf106f6e7fea6a?s=128&d=identicon&r=PG", "display_name": "Sza\u0142 Pa\u0142", "link": "https://stackoverflow.com/users/1733021/sza%c5%82-pa%c5%82"}, "reply_to_user": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 0, "creation_date": 1478114740, "post_id": 40387662, "comment_id": 68027975, "body": "@BoPersson So if it is important, I should use the exact <code>int16_t</code> for example?"}], "answers": [{"comments": [{"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 1, "creation_date": 1478114265, "post_id": 40387873, "comment_id": 68027722, "body": "Any conforming C or C++ implementation must make <code>int</code> at least 16 bits wide, even if it requires extra CPU instructions to implement operations on it. And don&#39;t confuse <code>int</code> and &quot;integer&quot;. For example, <code>char</code> is an integer type that&#39;s typically 8 bits wide."}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1478114377, "post_id": 40387873, "comment_id": 68027775, "body": "I&#39;d go further and state that there&#39;s no sane <i>or</i> insane C compiler out there that has 8 bit <code>int</code>s (not unless you tweak a fork of one just to prove me wrong)."}], "tags": [], "owner": {"reputation": 4815, "user_id": 3087601, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/ad2f9879fa1dea6fd47a45052ad02a09?s=128&d=identicon&r=PG&f=1", "display_name": "Zereges", "link": "https://stackoverflow.com/users/3087601/zereges"}, "is_accepted": false, "score": 3, "last_activity_date": 1478116615, "last_edit_date": 1478116615, "creation_date": 1478113597, "answer_id": 40387873, "question_id": 40387662, "link": "https://stackoverflow.com/questions/40387662/stdint-h-or-standard-types/40387873#40387873", "title": "&lt;stdint.h&gt; or standard types?", "body": "<p>C++ standard does not specify much about sizes of integer types (such as <code>int</code>, <code>long</code> or <code>char</code>). If you want to be sure, that certain type has fixed size across platforms, you can use C++11's <a href=\"http://en.cppreference.com/w/cpp/types/integer\" rel=\"nofollow noreferrer\">Fixed-width integer types</a>, which are standardized and guaranteed to have given size.</p>\n\n<p>To use them, <code>#include &lt;cstdint&gt;</code>.</p>\n\n<blockquote>\n  <p>Does C++ standard guarantee, that sizes of standard types will be unchanged in future?</p>\n</blockquote>\n\n<p>Not likely. On 8bit computers, sizes of integers types were different to what they are today. In the future, in 2042, with 1024-bit <em>computers</em>, I assume <code>long long</code> to be 1024-bit long.</p>\n\n<p>However, we can be almost absolutely sure, that <code>std::uint32_t</code> will stay 32-bit long.</p>\n"}, {"tags": [], "owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "is_accepted": true, "score": 6, "last_activity_date": 1478114115, "creation_date": 1478114115, "answer_id": 40387989, "question_id": 40387662, "link": "https://stackoverflow.com/questions/40387662/stdint-h-or-standard-types/40387989#40387989", "title": "&lt;stdint.h&gt; or standard types?", "body": "<p>First off, Microsoft's implementation <a href=\"https://msdn.microsoft.com/en-us/library/323b6b3k.aspx\" rel=\"noreferrer\">does support</a> <code>&lt;stdint.h&gt;</code>.</p>\n\n<p>Use the appropriate type for what you're doing.</p>\n\n<p>If you need, for example, an unsigned type that's exactly 16 bits wide with no padding bits, use <code>uint16_t</code>, defined in <code>&lt;stdint.h&gt;</code>.</p>\n\n<p>If you need an unsigned type that's <em>at least</em> 16 bits wide, you can use <code>uint_least16_t</code>, or <code>uint_fast16_t</code>, or <code>short</code>, or <code>int</code>.</p>\n\n<p>You probably don't need exact-width types as often as you think you do. Very often what matters is not the exact size of a type, but the range of values it supports. But exact representation is important when you're interfacing to some externally defined data format. In that case, you should already have declarations that tell you what types to use.</p>\n\n<p>There are specific requirements on the ranges of the predefined types: <code>char</code> is at least 8 bits, <code>short</code> and <code>int</code> are at least 16 bits, <code>long</code> is at least 32 bits, and <code>long long</code> is at least 64 bits. Also, <code>short</code> is at least as wide as <code>char</code>, <code>int</code> is at least as wide as <code>short</code>, and so forth. (The standard specifies minimum ranges, but the minimum sizes can be derived from the ranges and the fact that a binary representation is required.)</p>\n\n<p>Note that <code>&lt;stdint.h&gt;</code> is a C header. If you <code>#include</code> it in a C++ program, the type names will be imported directly into the global namespace, and <em>may or may not</em> also be imported into the <code>std</code> namespace.  If you <code>#include &lt;cstdint&gt;</code>, then the type names will be imported into the <code>std</code> namespace, and <em>may or may not</em> also be imported into the global namespace. Macro names such as <code>UINT32_MAX</code> are not in any namespace; they're always global. You can use either version of the header; just be consistent about using or not using the <code>std::</code> prefix.</p>\n"}], "owner": {"reputation": 286, "user_id": 1733021, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/03ed805a4aafb43d47bf106f6e7fea6a?s=128&d=identicon&r=PG", "display_name": "Sza\u0142 Pa\u0142", "link": "https://stackoverflow.com/users/1733021/sza%c5%82-pa%c5%82"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1800, "favorite_count": 0, "accepted_answer_id": 40387989, "answer_count": 2, "score": 2, "last_activity_date": 1478116615, "creation_date": 1478112799, "question_id": 40387662, "link": "https://stackoverflow.com/questions/40387662/stdint-h-or-standard-types", "title": "&lt;stdint.h&gt; or standard types?", "body": "<p>Which types should I use when programming C++ on Linux? Is it good idea to use types from <code>stdint.h</code>, such as <code>int16_t</code> and <code>uint8_t</code>?</p>\n\n<p>On one hand, surely <code>stdint.h</code> won't be available for programming on Windows. On the other though, size of e.g. <code>short</code> isn't clear on the first batch of an eye. And it's even more intuitive to write <code>int8_t</code> instead of <code>char</code>...</p>\n\n<p>Does C++ standard guarantee, that sizes of standard types will be unchanged in future?</p>\n"}, {"tags": ["c++", "c++11"], "comments": [{"owner": {"reputation": 41213, "user_id": 215568, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b05685e6c3945f4bd23bf1f967861aeb?s=128&d=identicon&r=PG", "display_name": "Donnie", "link": "https://stackoverflow.com/users/215568/donnie"}, "edited": false, "score": 2, "creation_date": 1478112784, "post_id": 40387619, "comment_id": 68026971, "body": "Yes, yes you can."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1478112854, "post_id": 40387619, "comment_id": 68027005, "body": "<code>fin.oef()</code> typo and not recommended: <a href=\"http://stackoverflow.com/questions/5605125/why-is-iostreameof-inside-a-loop-condition-considered-wrong\" title=\"why is iostreameof inside a loop condition considered wrong\">stackoverflow.com/questions/5605125/&hellip;</a>"}, {"owner": {"reputation": 17031, "user_id": 185915, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/207045374ab195353388d9fcc77af9c5?s=128&d=identicon&r=PG", "display_name": "Chad", "link": "https://stackoverflow.com/users/185915/chad"}, "edited": false, "score": 0, "creation_date": 1478113421, "post_id": 40387619, "comment_id": 68027300, "body": "Yes you can, but it will be woefully inefficient, and not very nice to the disk either."}, {"owner": {"reputation": 11, "user_id": 7102807, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-kXh0f4kFY44/AAAAAAAAAAI/AAAAAAAAY8Y/T7V6uEUjHyU/photo.jpg?sz=128", "display_name": "Sysco Shroder", "link": "https://stackoverflow.com/users/7102807/sysco-shroder"}, "edited": false, "score": 0, "creation_date": 1478135365, "post_id": 40387619, "comment_id": 68036033, "body": "So what would there be a different way to produce the same effect?"}], "owner": {"reputation": 11, "user_id": 7102807, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-kXh0f4kFY44/AAAAAAAAAAI/AAAAAAAAY8Y/T7V6uEUjHyU/photo.jpg?sz=128", "display_name": "Sysco Shroder", "link": "https://stackoverflow.com/users/7102807/sysco-shroder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 39, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1478112676, "creation_date": 1478112676, "question_id": 40387619, "link": "https://stackoverflow.com/questions/40387619/can-a-file-be-opened-read-edited-output-into-a-txt-file-and-repeated-multipl", "title": "Can a file be opened, read, edited, output into a .txt file and repeated multiple times in a program?", "body": "<p>So I have had an idea for a program to create a text / console output game. I wanted to make the game solely in the console output using <code>cout</code> but had a different idea.</p>\n\n<p>I understand that a program can open a file, read the information, edit / manipulate the information and output that information into a different file. So something like this:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;iomanip&gt;\n#include &lt;string&gt;\n\nusing namespace std;\n\nvoid fileWrite(int Health);  // Prototype for fileWrite\n\nint main()\n{  \n  string inFile = \"inFile.txt\";\n  string outFile = \"outFile.txt\";\n  int Health = 100;\n\n  ifstream fin;\n  ofstream fout;\n\n  fin.open(\"inFile.txt\");\n  fout.open(\"outFile.txt);\n\n  while (!fin.oef())\n  {\n   fin &gt;&gt; Health;\n   fileWrite(Health);\n  }\n\n fin.close();\n fout.close();\n return 0;\n}\n\nvoid fileWrite(int Health)\n{ \n fout &lt;&lt; setw(10) &lt;&lt; left &lt;&lt; \"Health\" &lt;&lt; endl;\n fout &lt;&lt; setw(10) &lt;&lt; left &lt;&lt; Health &lt;&lt; endl;\n}\n</code></pre>\n\n<p>So let's say <code>inFile.txt</code> simply has <code>50</code> in the file.\nLike so:</p>\n\n<pre><code>50\n</code></pre>\n\n<p>In theory, the file should be read, <code>health</code> is now set to <code>50</code>, the function <code>fileWrite</code> is called and the output should look like this in the <code>outFile.txt</code> </p>\n\n<pre><code>Health:\n50\n</code></pre>\n\n<p>So what I am wanting to do is make it so that say instead of reading in a file for the health, could I modify <code>Health</code> multiple times during the duration of the program and call <code>fileWrite</code>? Say that health pertains to the main character, and I create a variable named <code>potion</code> and it does +20 towards health, could I open the file. See that the character has <code>50</code> health, output the information into the <code>outFile.txt</code> then take <code>potion</code> which would increase the health to <code>70</code> and reprint the file?</p>\n\n<p>The reason I am trying to find a way to do this is so that the user can use the console for inputting commands, and have the .txt file show the results of the commands.</p>\n\n<p>Can a <code>function</code> be created to handle the printing and be called multiple times in main?</p>\n"}, {"tags": ["python", "c++", "distutils"], "comments": [{"owner": {"reputation": 2577, "user_id": 6263317, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Imx4J.jpg?s=128&g=1", "display_name": "Jon Deaton", "link": "https://stackoverflow.com/users/6263317/jon-deaton"}, "edited": false, "score": 0, "creation_date": 1502003886, "post_id": 40387488, "comment_id": 78019462, "body": "I was having this same exact error and this post helped me fix it: <a href=\"https://stackoverflow.com/questions/28305731/compiler-cant-find-py-initmodule-is-it-deprecated-and-if-so-what-should-i\" title=\"compiler cant find py initmodule is it deprecated and if so what should i\">stackoverflow.com/questions/28305731/&hellip;</a>"}], "owner": {"reputation": 925, "user_id": 4701228, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a51e05717e2b8a78ae0876d705757d41?s=128&d=identicon&r=PG&f=1", "display_name": "semore_1267", "link": "https://stackoverflow.com/users/4701228/semore-1267"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 136, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1478112185, "creation_date": 1478112185, "last_edit_date": 1495542798, "question_id": 40387488, "link": "https://stackoverflow.com/questions/40387488/replace-python-config-files-for-c-extension", "title": "Replace python config files for C++ extension", "body": "<p>I'm trying to write a simple module in C++ and import it into Python. However, when I try to import the module using <code>import greet</code>, I get a <code>ImportError: dynamic module does not define module export function (PyInit_greet)</code> error.</p>\n\n<p>After reading another SO question related to this problem (<a href=\"https://stackoverflow.com/questions/29657319/dynamic-module-does-not-define-init-function-pyinit-fuzzy\">here</a>) I thought that I may be having version problems (since I'm using Python3.5). But then again, every command I'm using to build and install, I'm using with Python3.5, so how could I be having version problems? (<code>python3.5 build setup.py</code> and <code>python3.5 setup.py install</code>). </p>\n\n<p>I'm trying to create a modified version of the simple project described in the Python Docs (<a href=\"https://docs.python.org/3.5/extending/building.html\" rel=\"nofollow noreferrer\">here</a>), and everything works fine until I try to import the module.</p>\n\n<p>Here is my <code>setup.py</code> file:</p>\n\n<pre><code>from distutils.core import setup, Extension\n\ngreet_module = Extension('greet',\n        define_macros=[('MAJOR_VERSION','1'),\n                   ('MINOR_VERSION','0')],\n        include_dirs=['/usr/local/include'],\n        # clang: warning: libstdc++ is deprecated; move to\n        # libc++ with a minimum deployment target of OS X 10.9\n        sources=['greet.cpp'])\n\nsetup (name='Greet_Package',\n       version='1.0',\n       description='This is a demo package',\n       author='ralston',\n       author_email='null',\n       url='https://google.com',\n       long_description='''This is really just a demo package''',\n       ext_modules=[greet_module])\n</code></pre>\n\n<p>Could it be related to my <code>include_dirs</code> parameter? My Python3.5 isn't actually installed there, but I tried putting my Python3.5 path in <code>include_dirs</code> but I got the same error. When I build <code>setup.py</code> here's my output:</p>\n\n<pre><code>running build\nrunning build_ext\nbuilding 'greet' extension\ncreating build\ncreating build/temp.macosx-10.6-intel-3.5\n/usr/bin/clang -fno-strict-aliasing -Wsign-compare -fno-common -dynamic -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -arch i386 -arch x86_64 -g -DMAJOR_VERSION=1 -DMINOR_VERSION=0 -I/usr/local/include -I/Library/Frameworks/Python.framework/Versions/3.5/include/python3.5m -c greet.cpp -o build/temp.macosx-10.6-intel-3.5/greet.o\ncreating build/lib.macosx-10.6-intel-3.5\n/usr/bin/clang++ -bundle -undefined dynamic_lookup -arch i386 -arch x86_64 -g     build/temp.macosx-10.6-intel-3.5/greet.o -L/usr/lib -o build/lib.macosx-10.6-intel-3.5/greet.cpython-35m-darwin.so\nclang: warning: libstdc++ is deprecated; move to libc++ with a minimum deployment target of OS X 10.9\nclang: warning: libstdc++ is deprecated; move to libc++ with a minimum deployment target of OS X 10.9\n</code></pre>\n\n<p>Any help would be greatly appreciated.</p>\n"}, {"tags": ["c++", "arrays", "variables"], "answers": [{"comments": [{"owner": {"reputation": 554, "user_id": 2366830, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/ifTJM.jpg?s=128&g=1", "display_name": "CTOverton", "link": "https://stackoverflow.com/users/2366830/ctoverton"}, "edited": false, "score": 0, "creation_date": 1478113447, "post_id": 40387491, "comment_id": 68027316, "body": "Would you mind writing an example? I don&#39;t quite follow"}, {"owner": {"reputation": 3238, "user_id": 3042438, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b930cad6b909cf6546dfe29bdeb8af88?s=128&d=identicon&r=PG&f=1", "display_name": "SunKnight0", "link": "https://stackoverflow.com/users/3042438/sunknight0"}, "reply_to_user": {"reputation": 554, "user_id": 2366830, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/ifTJM.jpg?s=128&g=1", "display_name": "CTOverton", "link": "https://stackoverflow.com/users/2366830/ctoverton"}, "edited": false, "score": 0, "creation_date": 1478113972, "post_id": 40387491, "comment_id": 68027587, "body": "I edited my post but be aware that it may not be valid C++ and in need of tweaking."}, {"owner": {"reputation": 554, "user_id": 2366830, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/ifTJM.jpg?s=128&g=1", "display_name": "CTOverton", "link": "https://stackoverflow.com/users/2366830/ctoverton"}, "edited": false, "score": 0, "creation_date": 1478114076, "post_id": 40387491, "comment_id": 68027637, "body": "Ahhh awesome okay I get it. Thanks so much!"}], "tags": [], "owner": {"reputation": 3238, "user_id": 3042438, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b930cad6b909cf6546dfe29bdeb8af88?s=128&d=identicon&r=PG&f=1", "display_name": "SunKnight0", "link": "https://stackoverflow.com/users/3042438/sunknight0"}, "is_accepted": true, "score": 1, "last_activity_date": 1478113934, "last_edit_date": 1478113934, "creation_date": 1478112195, "answer_id": 40387491, "question_id": 40387360, "link": "https://stackoverflow.com/questions/40387360/manually-setting-values-in-2darrays-c/40387491#40387491", "title": "Manually setting values in 2Darrays C++", "body": "<p>A two dimensional array is the same as a one dimensional array in memory. They are both just pointers. Create your array as one-dimensional, initialize it, then create your two dimensional array and point it to the same pointer.</p>\n\n<p>I do not have a testing environment handy and have not worked with C++ in a while so use this with caution and just as a starting point:</p>\n\n<pre><code>int tempArray[rowSize*colSize]={4,3,8,9,5,1,2...};\nint magicArray[rowSize][colSize];\nmagicArray=tempArray;\n</code></pre>\n"}], "owner": {"reputation": 554, "user_id": 2366830, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/ifTJM.jpg?s=128&g=1", "display_name": "CTOverton", "link": "https://stackoverflow.com/users/2366830/ctoverton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 17, "favorite_count": 0, "accepted_answer_id": 40387491, "answer_count": 1, "score": 0, "last_activity_date": 1523379219, "creation_date": 1478111733, "last_edit_date": 1523379219, "question_id": 40387360, "link": "https://stackoverflow.com/questions/40387360/manually-setting-values-in-2darrays-c", "title": "Manually setting values in 2Darrays C++", "body": "<p>Simply put an array can be defined with</p>\n\n<pre><code>int arrayValues = {1,2,3,4,5};\n</code></pre>\n\n<p>How do you define in a similar manor with a double array to avoid writing this out...</p>\n\n<pre><code>int magicArray[rowSize][colSize];\n\nmagicArray[0][0] = 4;\nmagicArray[0][1] = 3;\nmagicArray[0][2] = 8;\n\nmagicArray[1][0] = 9;\nmagicArray[1][1] = 5;\nmagicArray[1][2] = 1;\n\nmagicArray[2][0] = 2;\nmagicArray[2][1] = 7;\nmagicArray[2][2] = 6;\n</code></pre>\n\n<p>Is it possible to write something like...</p>\n\n<pre><code>int magicArray[rowSize][colSize] = { {x,y,value}, {0,0,1}} \n</code></pre>\n"}, {"tags": ["c++", "object", "constructor", "move", "move-semantics"], "comments": [{"owner": {"reputation": 9737, "user_id": 1460794, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/7lOXx.png?s=128&g=1", "display_name": "wally", "link": "https://stackoverflow.com/users/1460794/wally"}, "edited": false, "score": 0, "creation_date": 1478111466, "post_id": 40387180, "comment_id": 68026268, "body": "Have a look at <a href=\"http://thbecker.net/articles/rvalue_references/section_05.html\" rel=\"nofollow noreferrer\">this</a>."}], "answers": [{"comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1478111584, "post_id": 40387259, "comment_id": 68026331, "body": "@LogicStuff even better <code>A(A&amp;&amp; other) = default;</code>"}, {"owner": {"reputation": 14929, "user_id": 2051137, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/1sIMq.jpg?s=128&g=1", "display_name": "Remi.b", "link": "https://stackoverflow.com/users/2051137/remi-b"}, "edited": false, "score": 0, "creation_date": 1478111609, "post_id": 40387259, "comment_id": 68026346, "body": "Ok, that&#39;s helpful. But is it really going to work even if the class <code>B</code> does not have a move constructur (nor do the attributed of <code>B</code>)? As soon as the only attribute of <code>A</code> is a vector (and therefore has a move constructor), then we don&#39;t have to care about what the vector contains?"}, {"owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1478111615, "post_id": 40387259, "comment_id": 68026350, "body": "@NathanOliver Even better: I.e, nothing :) The move ctor is not implicitly disabled."}, {"owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "reply_to_user": {"reputation": 14929, "user_id": 2051137, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/1sIMq.jpg?s=128&g=1", "display_name": "Remi.b", "link": "https://stackoverflow.com/users/2051137/remi-b"}, "edited": false, "score": 0, "creation_date": 1478111827, "post_id": 40387259, "comment_id": 68026458, "body": "@Remi.b If the members have a deleted move ctor, then your object move ctor will be implicitly deleted. If the members have  a move ctor, then the default move ctor of your object will take care of business."}, {"owner": {"reputation": 14929, "user_id": 2051137, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/1sIMq.jpg?s=128&g=1", "display_name": "Remi.b", "link": "https://stackoverflow.com/users/2051137/remi-b"}, "edited": false, "score": 0, "creation_date": 1478111869, "post_id": 40387259, "comment_id": 68026485, "body": "Should it be <code>Bs(std::move(other.Bs))</code> instead of <code>Bs(std::move(other))</code>?"}, {"owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "reply_to_user": {"reputation": 14929, "user_id": 2051137, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/1sIMq.jpg?s=128&g=1", "display_name": "Remi.b", "link": "https://stackoverflow.com/users/2051137/remi-b"}, "edited": false, "score": 0, "creation_date": 1478112215, "post_id": 40387259, "comment_id": 68026674, "body": "@Remi.b Yes, if you insist to have the move ctor user-defined."}], "tags": [], "owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "is_accepted": true, "score": 4, "last_activity_date": 1478112447, "last_edit_date": 1495540845, "creation_date": 1478111402, "answer_id": 40387259, "question_id": 40387180, "link": "https://stackoverflow.com/questions/40387180/do-move-constructors-need-attribute-that-are-moveable/40387259#40387259", "title": "Do move constructors need attribute that are moveable?", "body": "<p>If your object contains objects that are move-able (such as <code>std::vector</code>), the default move constructor will take care of the move, so you don't need to do anything. Try to use the <a href=\"http://en.cppreference.com/w/cpp/language/rule_of_three\" rel=\"nofollow noreferrer\">Rule of Zero</a>.</p>\n\n<p>In your case, no, the move ctor won't do the right thing. It will copy, since in</p>\n\n<pre><code>Bs = other.Bs;\n</code></pre>\n\n<p><code>other.Bs</code> is a lvalue inside the function since it has a name (yes, it refers to a rvalue reference but <code>other</code> itself is a lvalue). You need </p>\n\n<pre><code>Bs = std::move(other.Bs);\n</code></pre>\n\n<p>or better</p>\n\n<pre><code>A(A&amp;&amp; other) : Bs(std::move(other.Bs)) {}\n</code></pre>\n\n<p>But again, in this case you really shouldn't write any user-defined move constructor at all.</p>\n\n<p>Highly recommended read from <a href=\"https://stackoverflow.com/users/576911/howard-hinnant\">Howard Hinnant</a>, the person who contributed probably the most to the concept of move semantics: <a href=\"http://www.slideshare.net/ripplelabs/howard-hinnant-accu2014\" rel=\"nofollow noreferrer\">http://www.slideshare.net/ripplelabs/howard-hinnant-accu2014</a></p>\n"}, {"comments": [{"owner": {"reputation": 14929, "user_id": 2051137, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/1sIMq.jpg?s=128&g=1", "display_name": "Remi.b", "link": "https://stackoverflow.com/users/2051137/remi-b"}, "edited": false, "score": 0, "creation_date": 1478112536, "post_id": 40387311, "comment_id": 68026830, "body": "That was very helpful +1. (1) There is no reason not to add <code>A(A&amp;&amp;) = default;</code> just in case for any class for which one does not want to explicitly write a move constructor, right? (2) If I understand correctly, one would expect  <code>A(A&amp;&amp;) = default;</code>  to do exactly the same (althoguh it may depends on compilers) than the &#39;hand-made&#39; move constructor you wrote in your answer"}, {"owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "reply_to_user": {"reputation": 14929, "user_id": 2051137, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/1sIMq.jpg?s=128&g=1", "display_name": "Remi.b", "link": "https://stackoverflow.com/users/2051137/remi-b"}, "edited": false, "score": 1, "creation_date": 1478112799, "post_id": 40387311, "comment_id": 68026980, "body": "@Remi.b The nice thing about default move constructors is the fact that if in the future you decide to add another movable member to your class, you won&#39;t need to keep modifying your move ctor."}, {"owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "edited": false, "score": 0, "creation_date": 1478112815, "post_id": 40387311, "comment_id": 68026988, "body": "When you define a copy constructor, it prevent the compiler from implementing it&#39;s own move constructor. In that case, the <code>A(A&amp;&amp;) = default;</code> is quite useful. Otherwise, the compiler will add the default one by default."}, {"owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "reply_to_user": {"reputation": 14929, "user_id": 2051137, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/1sIMq.jpg?s=128&g=1", "display_name": "Remi.b", "link": "https://stackoverflow.com/users/2051137/remi-b"}, "edited": false, "score": 0, "creation_date": 1478113093, "post_id": 40387311, "comment_id": 68027133, "body": "@Remi.b For your (2), no it will be slightly different. Even if you roll your own move constructor that does exactly the same as the compile generated one, it will make your class non-trivially move constructible. If your class contains a bunch of trivially movable variables, the compiler generated one will be better, because it knows that it&#39;s a trivial constructor."}], "tags": [], "owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "is_accepted": false, "score": 3, "last_activity_date": 1478112336, "last_edit_date": 1478112336, "creation_date": 1478111575, "answer_id": 40387311, "question_id": 40387180, "link": "https://stackoverflow.com/questions/40387180/do-move-constructors-need-attribute-that-are-moveable/40387311#40387311", "title": "Do move constructors need attribute that are moveable?", "body": "<p>No it is not. Your line here:</p>\n\n<pre><code>Bs = other.Bs;\n</code></pre>\n\n<p>You are doing copy assignment. Being in the move constructor body won't change expression value type. lvalue are still lvalues and rvalue are still rvalue.</p>\n\n<p>To do move assignment, it would look like this:</p>\n\n<pre><code>Bs = std::move(other.Bs);\n</code></pre>\n\n<p>But it is still not as efficient as it could be.</p>\n\n<p>There's another problem. Your code is not compiling because you have committed the braces for the <code>std::vector</code> constructor. In fact, this is where you should move the value. Here's an example:</p>\n\n<pre><code>// a kitten dies when your move constructor is not noexcept\nA(A&amp;&amp; other) noexcept\n  // in the move constructor of A, we move construct it's member too.\n: Bs{std::move(other.Bs)}\n// empty body\n{}\n</code></pre>\n\n<p>The best solution of all is this:<code></code></p>\n\n<p>You are right, it's empty. If you don't put any constructors, the compiler will do it for you.</p>\n\n<p>If you want to add other constructor but let the compiler add it's own move constructor, you can explicitly default it:</p>\n\n<pre><code>// bonus: noexcept when it can.\nA(A&amp;&amp;) = default;\n</code></pre>\n\n<hr>\n\n<p>One last thing. If your class contains another one that is not moveable but copiable, it will do what it can: copy construct it.</p>\n\n<p>Let the type <code>C</code> be a non-moveable class but copiable.</p>\n\n<p>Here's an example:</p>\n\n<pre><code>// the `C&amp;&amp;` from the move will bind to the `const C&amp;` of the operator=\nauto anotherC = std::move(aC);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "is_accepted": false, "score": 1, "last_activity_date": 1478112158, "last_edit_date": 1478112158, "creation_date": 1478111710, "answer_id": 40387346, "question_id": 40387180, "link": "https://stackoverflow.com/questions/40387180/do-move-constructors-need-attribute-that-are-moveable/40387346#40387346", "title": "Do move constructors need attribute that are moveable?", "body": "<p>The move constructor here will be \"effective\" in that it will be called when an <code>A</code> object is constructed from an rvalue of type <code>A</code>. It will work just fine, creating a valid copy of the other object. However, it's not as effective as it could be, since it copies the internal <code>std::vector</code> object. That's a performance issue, not a correctness issue.</p>\n\n<p>There are actually two performance issues here. The first is that the constructor default constructs the <code>B</code> subobject, then assigns to it. That's wasteful. To fix that:</p>\n\n<pre><code>A::A(A&amp;&amp; other) : B(other.B) {\n}\n</code></pre>\n\n<p>The second is that a move constructor  is allowed to steal from the other object. To do that, the implementation should move from the <code>B</code> subobject:</p>\n\n<pre><code>A::A(A&amp;&amp; other) : B(std::move(other.B)) {\n}\n</code></pre>\n\n<p>Finally, to answer the question in the title, <code>std::move</code> works just fine with types that aren't movable. All it does is convert an lvalue to an rvalue; non-movable types can (usually) be copied from rvalues, so unless you're dealing with a very perverse type, just use <code>std::move</code> on pretty much everything in the object. (It might look strange to move an int value, but it's harmless).</p>\n"}], "owner": {"reputation": 14929, "user_id": 2051137, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/1sIMq.jpg?s=128&g=1", "display_name": "Remi.b", "link": "https://stackoverflow.com/users/2051137/remi-b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 201, "favorite_count": 1, "accepted_answer_id": 40387259, "answer_count": 3, "score": 2, "last_activity_date": 1478112447, "creation_date": 1478111142, "last_edit_date": 1478111982, "question_id": 40387180, "link": "https://stackoverflow.com/questions/40387180/do-move-constructors-need-attribute-that-are-moveable", "title": "Do move constructors need attribute that are moveable?", "body": "<p>I am trying to wrap my head around move constructors and am hoping to get some more insights through this question. Here is a simple class.</p>\n\n<pre><code>class A\n{\n private:\n   vector&lt;B&gt; Bs;\n public:\n   /*\n   ..\n   */\n\n   A(A&amp;&amp; other)\n   : Bs\n   {\n      Bs = other.Bs;\n   }\n}\n</code></pre>\n\n<p>Does my move constructor looks correct even if <code>B</code> does not have a move constructor? Will the move constructor be effective even if I haven't explicitly written a move assignment for the object of class <code>B</code>? If not, does it mean that if one wants to move any object, (s)he first have to ensure each attribute is also moveable?</p>\n"}, {"tags": ["c++", "visual-c++", "operator-overloading"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user743382"}, "edited": false, "score": 2, "creation_date": 1478111271, "post_id": 40387151, "comment_id": 68026164, "body": "<code>LogEntry entry(LOG_LEVEL_DEFAULT) &lt;&lt; &quot;This is a string&quot; &lt;&lt; 1234;</code> is a syntax error and it&#39;s not clear what you meant to type."}, {"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1478111404, "post_id": 40387151, "comment_id": 68026231, "body": "Doesn&#39;t compile: <code>error: expected &#39;,&#39; or &#39;;&#39; before &#39;&lt;&lt;&#39; token</code> on your intended use line."}, {"owner": {"reputation": 285, "user_id": 2479950, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/7076cdc4e576974a9ac58bfe9ab65295?s=128&d=identicon&r=PG", "display_name": "pabloxrl", "link": "https://stackoverflow.com/users/2479950/pabloxrl"}, "edited": false, "score": 0, "creation_date": 1478113522, "post_id": 40387151, "comment_id": 68027353, "body": "Well, I edited the code. I guess I made a mistake transcribing as I&#39;m not in a PC with my IDE. I hope now you can address the question."}, {"owner": {"user_type": "does_not_exist", "display_name": "user743382"}, "edited": false, "score": 0, "creation_date": 1478113796, "post_id": 40387151, "comment_id": 68027503, "body": "That code, as mentioned in Donghui Zhang&#39;s answer, won&#39;t call <code>LogEntry</code>&#39;s destructor until after the operator functions have been called. When you get back to your PC, can you check what you actually have that doesn&#39;t work?"}, {"owner": {"reputation": 1083, "user_id": 6826608, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f02198302f3fb7b19ad09d9a9713a4e0?s=128&d=identicon&r=PG&f=1", "display_name": "Donghui Zhang", "link": "https://stackoverflow.com/users/6826608/donghui-zhang"}, "edited": false, "score": 0, "creation_date": 1478114089, "post_id": 40387151, "comment_id": 68027646, "body": "I&#39;m with @hvd. I&#39;d go one step further by suggesting you NOT post a question UNLESS you are in front of a PC to ensure your question is valid. In this case, the lvalue reference vs. universal reference problem I pointed out will prevent your code from compiling; and you made a false claim that the destructor is called before the operators. There are many many people monitoring stackoverflow.com trying to help, and you shouldn&#39;t waste people time."}, {"owner": {"reputation": 285, "user_id": 2479950, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/7076cdc4e576974a9ac58bfe9ab65295?s=128&d=identicon&r=PG", "display_name": "pabloxrl", "link": "https://stackoverflow.com/users/2479950/pabloxrl"}, "edited": false, "score": 0, "creation_date": 1478114251, "post_id": 40387151, "comment_id": 68027714, "body": "Sorry I wasted your most valuable time. Way to go promoting a good atmosphere in the community. Cheers."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user743382"}, "edited": false, "score": 0, "creation_date": 1478111941, "post_id": 40387368, "comment_id": 68026523, "body": "This doesn&#39;t try to answer the question, so shouldn&#39;t have been posted as an answer. You don&#39;t cover the temporary&#39;s destruction (the whole point of the question) at all. It could be useful as a comment though, I think."}, {"owner": {"reputation": 1083, "user_id": 6826608, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f02198302f3fb7b19ad09d9a9713a4e0?s=128&d=identicon&r=PG&f=1", "display_name": "Donghui Zhang", "link": "https://stackoverflow.com/users/6826608/donghui-zhang"}, "edited": false, "score": 0, "creation_date": 1478112290, "post_id": 40387368, "comment_id": 68026714, "body": "@hvd  the code I gave does call the operators before the destructor. I&#39;ve updated the answer to include that statement."}, {"owner": {"user_type": "does_not_exist", "display_name": "user743382"}, "edited": false, "score": 0, "creation_date": 1478113700, "post_id": 40387368, "comment_id": 68027450, "body": "You&#39;re right, and now that you mentioned it, it should&#39;ve been a valid answer to the question. The OP has edited the question claiming that exactly this doesn&#39;t work though."}], "tags": [], "owner": {"reputation": 1083, "user_id": 6826608, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f02198302f3fb7b19ad09d9a9713a4e0?s=128&d=identicon&r=PG&f=1", "display_name": "Donghui Zhang", "link": "https://stackoverflow.com/users/6826608/donghui-zhang"}, "is_accepted": false, "score": 4, "last_activity_date": 1478112236, "last_edit_date": 1478112236, "creation_date": 1478111755, "answer_id": 40387368, "question_id": 40387151, "link": "https://stackoverflow.com/questions/40387151/operator-overloading-on-temporary/40387368#40387368", "title": "Operator overloading on temporary", "body": "<p>As pointed out by @hvd and @Richard Critten in the comment, your code does not compile. If you want a temporary variable that only lives in the statement, you could do so without giving it a name, such as:</p>\n\n<pre><code>LogEntry(LOG_LEVEL_DEFAULT) &lt;&lt; \"This is a string\" &lt;&lt; 1234;\n</code></pre>\n\n<p>And if you do so, the two operators will be called BEFORE the destructor is called.</p>\n\n<p>But there is another problem. Your operator&lt;&lt;(T&amp; arg) takes as input an lvalue reference, while 1234 is NOT an lvalue. To fix this second problem, you could change the operator to take as argument a universal reference: operator&lt;&lt;(T&amp;&amp; arg).</p>\n"}], "owner": {"reputation": 285, "user_id": 2479950, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/7076cdc4e576974a9ac58bfe9ab65295?s=128&d=identicon&r=PG", "display_name": "pabloxrl", "link": "https://stackoverflow.com/users/2479950/pabloxrl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 284, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1478117120, "creation_date": 1478111023, "last_edit_date": 1478117120, "question_id": 40387151, "link": "https://stackoverflow.com/questions/40387151/operator-overloading-on-temporary", "title": "Operator overloading on temporary", "body": "<p>I'm having some problem trying to use bitshift operator on a temporary object returned by a method.</p>\n\n<p>The idea is to create a Log object as a temporary, and through the bitshift operator, append values which would be stored in a std::stringstream object.</p>\n\n<p>On the destruction of the temporary, the std::stringstream would dump its contents, however, the destructor gets called before I can append the first string.</p>\n\n<p>A small example:</p>\n\n<pre><code>class LogEntry\n{\npublic:\n    LogEntry(int level) : m_level{level}\n    {\n    }\n\n    ~LogEntry()\n    {\n        // dump m_out on destruction\n        Widget(m_out.str());\n    }\n\n    template &lt;typename T&gt;\n    LogEntry&amp; operator&lt;&lt;(T&amp; arg)\n    {\n        m_out &lt;&lt; arg;\n\n        return *this;\n    }\n\nprivate:\n    std::stringstream m_out;\n    const int m_level;\n}\n</code></pre>\n\n<p>And this is how I intend to use it:</p>\n\n<pre><code>LogEntry(LOG_LEVEL_DEFAULT) &lt;&lt; \"This is a string\" &lt;&lt; 1234;\n</code></pre>\n\n<p>So far, the destructor is being called before the bitshift operator, meaning that the memory is already corrupted when appending the contents to m_out.</p>\n\n<p>Does anyone know how to ensure that the operator will be called before the temporary's destruction?</p>\n"}, {"tags": ["c++", "floating-point", "valarray"], "comments": [{"owner": {"reputation": 86516, "user_id": 701092, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/xYrM0.jpg?s=128&g=1", "display_name": "0x499602D2", "link": "https://stackoverflow.com/users/701092/0x499602d2"}, "edited": false, "score": 0, "creation_date": 1478111165, "post_id": 40387115, "comment_id": 68026111, "body": "Promotion is not the problem. <code>valarray</code>&#39;s <code>operator-</code> deduces the same type for both the left hand side (<code>T const&amp;</code>) and right hand side (<code>valarray&lt;T&gt; const&amp;</code>). It&#39;s conflicted because it gets both <code>float</code> and <code>double</code> for the same template argument. You should be able to fix it by doing  <code>1.0</code>."}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 0, "creation_date": 1478111413, "post_id": 40387115, "comment_id": 68026236, "body": "&quot;Why cant float be promoted to double here?&quot; What specific point in your code are you referring to as &quot;here&quot;? What promotion are you talking about?"}, {"owner": {"reputation": 2281, "user_id": 564540, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c90d6ea33525dbe1e4e58c63bb1f8c52?s=128&d=identicon&r=PG", "display_name": "Max Ehrlich", "link": "https://stackoverflow.com/users/564540/max-ehrlich"}, "reply_to_user": {"reputation": 86516, "user_id": 701092, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/xYrM0.jpg?s=128&g=1", "display_name": "0x499602D2", "link": "https://stackoverflow.com/users/701092/0x499602d2"}, "edited": false, "score": 0, "creation_date": 1478111435, "post_id": 40387115, "comment_id": 68026250, "body": "@0x499602D2 You&#39;re right but why shouldnt an implicit conversion happen here? I cant really fix it by doing 1.0 because I don&#39;t have prior knowledge of <code>scalar_t</code> (or assume I don&#39;t for this discussion)"}, {"owner": {"reputation": 2281, "user_id": 564540, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c90d6ea33525dbe1e4e58c63bb1f8c52?s=128&d=identicon&r=PG", "display_name": "Max Ehrlich", "link": "https://stackoverflow.com/users/564540/max-ehrlich"}, "reply_to_user": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 0, "creation_date": 1478111491, "post_id": 40387115, "comment_id": 68026282, "body": "@AnT At the point of compiler failure, which I probably should have said in the post is at the return from <code>logit</code> (you can see that in the coliru sample)"}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 0, "creation_date": 1478111520, "post_id": 40387115, "comment_id": 68026292, "body": "@Max Ehrlich: In deduction context it is too early to think about any &quot;promotions&quot;. E.g. <code>std::max(1.0, 1.0f)</code> does not compile for the same reason, even though the types are convertible. It is not the conversion that fails, it is the deductin that fails."}, {"owner": {"reputation": 86516, "user_id": 701092, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/xYrM0.jpg?s=128&g=1", "display_name": "0x499602D2", "link": "https://stackoverflow.com/users/701092/0x499602d2"}, "edited": false, "score": 0, "creation_date": 1478111566, "post_id": 40387115, "comment_id": 68026323, "body": "@MaxEhrlich Deduction of the template argument must happen before any conversion occurs. <code>T</code> is getting different types (<code>float</code> and <code>double</code>) compilation halts there. You can probably fix it by doing <code>T(1.0)</code> if you don&#39;t know the type of <code>T</code>."}, {"owner": {"reputation": 2281, "user_id": 564540, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c90d6ea33525dbe1e4e58c63bb1f8c52?s=128&d=identicon&r=PG", "display_name": "Max Ehrlich", "link": "https://stackoverflow.com/users/564540/max-ehrlich"}, "reply_to_user": {"reputation": 86516, "user_id": 701092, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/xYrM0.jpg?s=128&g=1", "display_name": "0x499602D2", "link": "https://stackoverflow.com/users/701092/0x499602d2"}, "edited": false, "score": 0, "creation_date": 1478111654, "post_id": 40387115, "comment_id": 68026373, "body": "@0x499602D2 Well that would work except that T could be a <code>scalar_t</code> or a <code>valarray&lt;scalar_t&gt;</code> in which case <code>T(1.0)</code> wouldnt work"}, {"owner": {"reputation": 2281, "user_id": 564540, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c90d6ea33525dbe1e4e58c63bb1f8c52?s=128&d=identicon&r=PG", "display_name": "Max Ehrlich", "link": "https://stackoverflow.com/users/564540/max-ehrlich"}, "reply_to_user": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 0, "creation_date": 1478111740, "post_id": 40387115, "comment_id": 68026416, "body": "@AnT Right, the mechanism makes sense to me, I am just wondering how I can use a constant in a template function like this. All the operators work out to allow this to work fine on a scalar type or a <code>valarray</code> it&#39;s just that if I have a constant in my expression, then what type can it be?"}, {"owner": {"reputation": 19034, "user_id": 780717, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/eead3a6ab011b880ca6ec354ca00f0b3?s=128&d=identicon&r=PG", "display_name": "njuffa", "link": "https://stackoverflow.com/users/780717/njuffa"}, "edited": false, "score": 0, "creation_date": 1478113251, "post_id": 40387115, "comment_id": 68027219, "body": "@MaxEhrlich Instead of editing the question, it would have been better to put the solution in an answer (nothing wrong with answering your own question)"}, {"owner": {"reputation": 2281, "user_id": 564540, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c90d6ea33525dbe1e4e58c63bb1f8c52?s=128&d=identicon&r=PG", "display_name": "Max Ehrlich", "link": "https://stackoverflow.com/users/564540/max-ehrlich"}, "reply_to_user": {"reputation": 19034, "user_id": 780717, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/eead3a6ab011b880ca6ec354ca00f0b3?s=128&d=identicon&r=PG", "display_name": "njuffa", "link": "https://stackoverflow.com/users/780717/njuffa"}, "edited": false, "score": 0, "creation_date": 1478115979, "post_id": 40387115, "comment_id": 68028691, "body": "@njuffa True it would have been cleaner but what I have doesn&#39;t really answer the asked question (why doesnt this compile as written) which NathOliver did well"}], "answers": [{"comments": [{"owner": {"reputation": 2281, "user_id": 564540, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c90d6ea33525dbe1e4e58c63bb1f8c52?s=128&d=identicon&r=PG", "display_name": "Max Ehrlich", "link": "https://stackoverflow.com/users/564540/max-ehrlich"}, "edited": false, "score": 0, "creation_date": 1478111258, "post_id": 40387195, "comment_id": 68026157, "body": "&quot;no conversions happen during template argument deduction&quot; I think is the problem. So the obvious next question is, how can I fix it assuming I don&#39;t know about <code>scalar_t</code>? Also why shouldnt implicit conversions be allowed in this scenario?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 2281, "user_id": 564540, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c90d6ea33525dbe1e4e58c63bb1f8c52?s=128&d=identicon&r=PG", "display_name": "Max Ehrlich", "link": "https://stackoverflow.com/users/564540/max-ehrlich"}, "edited": false, "score": 0, "creation_date": 1478111405, "post_id": 40387195, "comment_id": 68026233, "body": "@MaxEhrlich Simplest would be to convert the literals to <code>scalar_t</code>&#39;s.  If the function will only be used for standard types you could always you the <code>value_type</code> member and cast the literals to that type."}, {"owner": {"reputation": 2281, "user_id": 564540, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c90d6ea33525dbe1e4e58c63bb1f8c52?s=128&d=identicon&r=PG", "display_name": "Max Ehrlich", "link": "https://stackoverflow.com/users/564540/max-ehrlich"}, "edited": false, "score": 0, "creation_date": 1478111591, "post_id": 40387195, "comment_id": 68026333, "body": "That would solve it for this sample, but assume I have no prior knowledge of <code>scalar_t</code> and no knowledge of the type of <code>T</code> at all (as you can see I&#39;ve used it in the same as a <code>scalar_t</code> as well as a <code>valarray&lt;scalar_t&gt;</code> both of which should work fine except for the missing implicit conversion)"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 2281, "user_id": 564540, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c90d6ea33525dbe1e4e58c63bb1f8c52?s=128&d=identicon&r=PG", "display_name": "Max Ehrlich", "link": "https://stackoverflow.com/users/564540/max-ehrlich"}, "edited": false, "score": 0, "creation_date": 1478111706, "post_id": 40387195, "comment_id": 68026403, "body": "@MaxEhrlich Really I would just add a overload for a <code>std::valarray</code>.  Do the special case in there and then you have the main template for everything else."}, {"owner": {"reputation": 2281, "user_id": 564540, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c90d6ea33525dbe1e4e58c63bb1f8c52?s=128&d=identicon&r=PG", "display_name": "Max Ehrlich", "link": "https://stackoverflow.com/users/564540/max-ehrlich"}, "edited": false, "score": 0, "creation_date": 1478111787, "post_id": 40387195, "comment_id": 68026443, "body": "That&#39;s how I handled it in the production code, but for my own purposes I am wondering if we can&#39;t do better. It seems maybe not"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 2281, "user_id": 564540, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c90d6ea33525dbe1e4e58c63bb1f8c52?s=128&d=identicon&r=PG", "display_name": "Max Ehrlich", "link": "https://stackoverflow.com/users/564540/max-ehrlich"}, "edited": false, "score": 0, "creation_date": 1478111880, "post_id": 40387195, "comment_id": 68026495, "body": "@MaxEhrlich I do not see one.  If you find one or someone else gives you a way I would love to hear about it."}, {"owner": {"reputation": 2281, "user_id": 564540, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c90d6ea33525dbe1e4e58c63bb1f8c52?s=128&d=identicon&r=PG", "display_name": "Max Ehrlich", "link": "https://stackoverflow.com/users/564540/max-ehrlich"}, "edited": false, "score": 0, "creation_date": 1478112089, "post_id": 40387195, "comment_id": 68026601, "body": "Well you&#39;re not going to flippin believe this but I actually did it I think. I was looking at <code>sigmoid</code> and realized that it doesnt have the same issue because by the time it gets to the constants it is a template expression which works for whatever reason. The solution is to add a unary + before doing anything with the valarray <a href=\"http://coliru.stacked-crooked.com/a/4c8c11cc06cb706f\" rel=\"nofollow noreferrer\">coliru.stacked-crooked.com/a/4c8c11cc06cb706f</a>"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 2281, "user_id": 564540, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c90d6ea33525dbe1e4e58c63bb1f8c52?s=128&d=identicon&r=PG", "display_name": "Max Ehrlich", "link": "https://stackoverflow.com/users/564540/max-ehrlich"}, "edited": false, "score": 0, "creation_date": 1478115086, "post_id": 40387195, "comment_id": 68028184, "body": "@MaxEhrlich I believe that is because unary + states <i>The function can be implemented with the return type different from std::valarray. In this case[...]</i>  So the type you have is no longer a <code>valarray</code> but something like it and that can be used with the <code>float</code>."}, {"owner": {"reputation": 2281, "user_id": 564540, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c90d6ea33525dbe1e4e58c63bb1f8c52?s=128&d=identicon&r=PG", "display_name": "Max Ehrlich", "link": "https://stackoverflow.com/users/564540/max-ehrlich"}, "edited": false, "score": 0, "creation_date": 1478116017, "post_id": 40387195, "comment_id": 68028711, "body": "Exactly. It&#39;s using the expression templates which seems to provide a valid overload for the double or float (and I suspect int) case"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 2281, "user_id": 564540, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c90d6ea33525dbe1e4e58c63bb1f8c52?s=128&d=identicon&r=PG", "display_name": "Max Ehrlich", "link": "https://stackoverflow.com/users/564540/max-ehrlich"}, "edited": false, "score": 0, "creation_date": 1478116107, "post_id": 40387195, "comment_id": 68028760, "body": "@MaxEhrlich I would remove the solution you found from your question and put it up as an answer since it shows how you could overcome the problem."}], "tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": true, "score": 4, "last_activity_date": 1478111180, "creation_date": 1478111180, "answer_id": 40387195, "question_id": 40387115, "link": "https://stackoverflow.com/questions/40387115/why-does-this-code-fail-to-compile/40387195#40387195", "title": "Why does this code fail to compile?", "body": "<p>The <code>operator -</code> you are using is defined as</p>\n\n<pre><code>template &lt;class T&gt; std::valarray&lt;T&gt; operator- (const T&amp; val, const std::valarray&lt;T&gt;&amp; rhs);\n</code></pre>\n\n<p>This meas that it expects <code>val</code> to be the same type as the elements in the <code>valarray</code>.  Since you are using a <code>float</code> when template argument deduction happens it sees that <code>val</code> is a <code>float</code> but <code>rhs</code> has a element type of <code>double</code>.  since these types do not match the deduction fails and you get a compiler error.  Remember no conversions happen during template argument deduction.</p>\n"}, {"tags": [], "owner": {"reputation": 2281, "user_id": 564540, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c90d6ea33525dbe1e4e58c63bb1f8c52?s=128&d=identicon&r=PG", "display_name": "Max Ehrlich", "link": "https://stackoverflow.com/users/564540/max-ehrlich"}, "is_accepted": false, "score": 1, "last_activity_date": 1478124112, "creation_date": 1478124112, "answer_id": 40390575, "question_id": 40387115, "link": "https://stackoverflow.com/questions/40387115/why-does-this-code-fail-to-compile/40390575#40390575", "title": "Why does this code fail to compile?", "body": "<p>This spawned a pretty interesting discussion about how to use constants in these type agnostic templates. Surprisingly there seems to be an answer. Examining the <code>sigmoid</code> function, we see that it also uses <code>float</code> constants with a <code>valarray&lt;double&gt;</code> but doesnt exhibit a compiler error. This is because, the <code>std::exp(-in)</code> line converts the <code>valarray&lt;double&gt;</code> to an expression template used the the standard library to optimize the computation, and for whatever reason it doesn't care about <code>float</code> or <code>double</code> (e.g. they provide the overload). So the solution I came up with was to add a unary + operator to the <code>logit</code> function which does absolutely nothing except convert the <code>valarray&lt;double&gt;</code> to an expression template which can work with the <code>float</code> constant. </p>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/4c8c11cc06cb706f\" rel=\"nofollow noreferrer\">Here</a> is the update code sample </p>\n\n<p>and the new <code>logit</code> function looks like this</p>\n\n<pre><code>template&lt;typename T&gt;\nT logit(const T &amp;in)\n{\n    return std::log(in / (1.f - (+in)));\n}\n</code></pre>\n\n<p>Note the unary + operator <code>(+in)</code></p>\n\n<p>Also note that NathanOliver's accepted solution answers the question as asked</p>\n"}], "owner": {"reputation": 2281, "user_id": 564540, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c90d6ea33525dbe1e4e58c63bb1f8c52?s=128&d=identicon&r=PG", "display_name": "Max Ehrlich", "link": "https://stackoverflow.com/users/564540/max-ehrlich"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 100, "favorite_count": 0, "accepted_answer_id": 40387195, "answer_count": 2, "score": 1, "last_activity_date": 1478124112, "creation_date": 1478110899, "last_edit_date": 1478124099, "question_id": 40387115, "link": "https://stackoverflow.com/questions/40387115/why-does-this-code-fail-to-compile", "title": "Why does this code fail to compile?", "body": "<p>I know it's a pretty general title, but I have some code and it strikes me as weird that it cant compile.</p>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/6d4a5f2c0f0254e0\" rel=\"nofollow noreferrer\">Here</a> is a demo of the issue. If you change <code>scalar_t</code> from <code>double</code> to <code>float</code> the code compiles fine. Why cant float be promoted to double here? In fact, if you change the constants to <code>double</code>s (<code>1.0</code>) or <code>int</code>s (<code>1</code>) they also cant be promoted. Isn't this the kind of thing that should just work?</p>\n\n<p>Full code sample:</p>\n\n<pre><code>#include &lt;valarray&gt;\n#include &lt;numeric&gt;\n#include &lt;iterator&gt;\n#include &lt;iostream&gt;\n\ntemplate&lt;typename T&gt;\nT sigmoid(const T &amp;in)\n{\n    return 1.f / (1.f + std::exp(-in));\n}\n\ntemplate&lt;typename T&gt;\nT logit(const T &amp;in)\n{\n    return std::log(in / (1.f - in));\n}\n\nusing scalar_t = double;\n\nint main(int argc, char **argv)\n{\n    std::valarray&lt;scalar_t&gt; f = { 0.1f, 0.3f, 0.5f, 0.9f };\n\n    scalar_t alpha = 0.5f;\n    scalar_t beta = -1.f;\n\n    auto lC = logit(f);    \n    std::valarray&lt;scalar_t&gt; skC = alpha * lC + beta;\n    auto sC = sigmoid(skC);\n\n    std::copy(std::begin(sC), std::end(sC), std::ostream_iterator&lt;scalar_t&gt;(std::cout, \" \"));\n    std::cout &lt;&lt; std::endl;\n\n    scalar_t num = 0.7f;\n    auto lS = logit(num);\n    auto sS = sigmoid(alpha * lS + beta);\n\n    std::cout &lt;&lt; sS &lt;&lt; std::endl;\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1478111027, "post_id": 40386986, "comment_id": 68026024, "body": "Try <code>foo&lt;sizeof(a)&gt;(a);</code>"}, {"owner": {"reputation": 86516, "user_id": 701092, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/xYrM0.jpg?s=128&g=1", "display_name": "0x499602D2", "link": "https://stackoverflow.com/users/701092/0x499602d2"}, "edited": false, "score": 0, "creation_date": 1478111451, "post_id": 40386986, "comment_id": 68026260, "body": "<code>foo&lt;&gt;(&quot;hello&quot;)</code> can force the template version."}], "owner": {"reputation": 547, "user_id": 1322848, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/f9787a9df41c4727933f734ef9b4a64b?s=128&d=identicon&r=PG", "display_name": "Derek", "link": "https://stackoverflow.com/users/1322848/derek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 76, "favorite_count": 1, "closed_date": 1478110953, "answer_count": 0, "score": 4, "last_activity_date": 1478110479, "creation_date": 1478110479, "question_id": 40386986, "link": "https://stackoverflow.com/questions/40386986/const-char-n-vs-const-char-for-string-literal", "closed_reason": "Duplicate", "title": "const char (&amp;)[N] vs const char * for string literal", "body": "<p><code>foo(const char *)</code> is chosen over template version for <code>\"hello\"</code>. How to make the compiler choose template version instead? </p>\n\n<pre><code>#include &lt;iostream&gt;\n\ntemplate &lt;size_t N&gt;\nvoid foo(const char (&amp;)[N])\n{\n    std::cout &lt;&lt; N &lt;&lt; std::endl;\n}\n\nvoid foo(const char *)\n{\n    std::cout &lt;&lt; \"char*\" &lt;&lt; std::endl;\n}\n\nint main()\n{\n    foo(\"hello\");\n    char a[] = \"world\";\n    foo(a);\n}\n</code></pre>\n"}, {"tags": ["c++", "language-lawyer", "c++17"], "comments": [{"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 0, "creation_date": 1478112919, "post_id": 40386696, "comment_id": 68027044, "body": "I believe the rule is for alignments less than <code>max_align</code>. If you request 2 or 4 bytes alignment, you might get 8 instead if that&#39;s the only thing the system offers."}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "reply_to_user": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 1, "creation_date": 1478114297, "post_id": 40386696, "comment_id": 68027735, "body": "@BoPersson But by definition, something 8-byte aligned is also 2- and 4-byte aligned."}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1478118816, "post_id": 40386696, "comment_id": 68030238, "body": "The implementations I&#39;ve seen don&#39;t throw exceptions in that case."}, {"owner": {"reputation": 23468, "user_id": 4137916, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6bab91fda70af7e9beb8934d323540e8?s=128&d=identicon&r=PG", "display_name": "Jeroen Mostert", "link": "https://stackoverflow.com/users/4137916/jeroen-mostert"}, "edited": false, "score": 0, "creation_date": 1478176153, "post_id": 40386696, "comment_id": 68052919, "body": "The answer to your question should be &quot;yes&quot;: you&#39;ll get back memory aligned to <code>max_align</code> or an exception is thrown if the implementation can&#39;t return memory of the requested size aligned to <code>max_align</code>. The alternative would be to throw an exception on every alignment requested that isn&#39;t supported, which would render the clause on falling back to <code>max_align</code> inoperative, so that&#39;s clearly not the intent. But since &quot;requested [...] alignment&quot; is rather unambiguous and implies otherwise, this is probably a minor defect. It&#39;s definitely a defect if the intent was to throw on large alignments."}, {"owner": {"reputation": 1050, "user_id": 483421, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9fb2ffc399dbb9bec5567d4a63dc0a4c?s=128&d=identicon&r=PG", "display_name": "iolo", "link": "https://stackoverflow.com/users/483421/iolo"}, "edited": false, "score": 0, "creation_date": 1478291908, "post_id": 40386696, "comment_id": 68111138, "body": "Thanks! I reported the issue <a href=\"https://github.com/cplusplus/draft/issues/966\" rel=\"nofollow noreferrer\">here</a>"}], "owner": {"reputation": 1050, "user_id": 483421, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9fb2ffc399dbb9bec5567d4a63dc0a4c?s=128&d=identicon&r=PG", "display_name": "iolo", "link": "https://stackoverflow.com/users/483421/iolo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 156, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1478109502, "creation_date": 1478109502, "last_edit_date": 1592644375, "question_id": 40386696, "link": "https://stackoverflow.com/questions/40386696/behaviour-of-stdpmrmemory-resourceallocate-on-large-alignments", "title": "Behaviour of `std::pmr::memory_resource::allocate()` on large alignments", "body": "<p>To quote N4606:</p>\n<blockquote>\n<p><code>virtual void* do_allocate(size_t bytes, size_t alignment) = 0;</code></p>\n<p>Requires: Alignment shall be a power of two.</p>\n<p>Returns: A derived class shall implement this function to return a pointer to allocated storage (3.7.4.2) with a size of at least <strong>bytes</strong>. The returned storage is aligned to the specified alignment, if such alignment is supported; otherwise it is aligned to <strong>max_align</strong>.</p>\n<p>Throws: A derived class implementation shall throw an appropriate exception if it is unable to allocate memory with the requested size and alignment.</p>\n</blockquote>\n<p>This is IMHO unclear: What happens if the alignment is a power of two but unsupported (e.g larger than <strong>max_align</strong>)? Is the returned storage aligned to <strong>max_align</strong> or is an exception thrown?<br />\nThere is of course the note concerning <strong>a derived class implementation</strong>, but since <code>std::pmr::memory_resource</code> is a virtual base class, every implementation must be such.</p>\n"}, {"tags": ["c++", "serialization", "struct"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1478109088, "post_id": 40386476, "comment_id": 68024819, "body": "It looks like you are trying to implement your own string class.  You can tak a look at <code>std::string</code> and see how they do from a pointer to a <code>string</code>."}, {"owner": {"reputation": 718, "user_id": 4869038, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/a3Kxj.jpg?s=128&g=1", "display_name": "spektr", "link": "https://stackoverflow.com/users/4869038/spektr"}, "edited": false, "score": 0, "creation_date": 1478109144, "post_id": 40386476, "comment_id": 68024844, "body": "what do you expect to see?"}, {"owner": {"reputation": 1167, "user_id": 5339807, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed5db3c9fa9b80760fc44ae03008f7a1?s=128&d=identicon&r=PG&f=1", "display_name": "mascoj", "link": "https://stackoverflow.com/users/5339807/mascoj"}, "edited": false, "score": 0, "creation_date": 1478109207, "post_id": 40386476, "comment_id": 68024883, "body": "The character <code>&#39;4&#39;</code> is not the same as the integer <code>4</code>. Not in size nor representation."}, {"owner": {"reputation": 1838, "user_id": 4525052, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0780adfbbb6b445dac0c9e12d3c73f50?s=128&d=identicon&r=PG&f=1", "display_name": "RyanP", "link": "https://stackoverflow.com/users/4525052/ryanp"}, "edited": false, "score": 0, "creation_date": 1478109317, "post_id": 40386476, "comment_id": 68024946, "body": "As mentioned <code>4</code> the character and 4 the integer are different in size and value. Additionally, even if you accounted for that, the compiler could pad your structure so that there is space between adjacent data members... so there is no predictable way to do what you are trying to do. At least not the way you are attempting to do it."}, {"owner": {"reputation": 253, "user_id": 998677, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/cbe5e8802661f60a564697656bc69aa5?s=128&d=identicon&r=PG", "display_name": "Raj", "link": "https://stackoverflow.com/users/998677/raj"}, "edited": false, "score": 0, "creation_date": 1478109633, "post_id": 40386476, "comment_id": 68025157, "body": "How I can achieve printing 4 (nsize), can any one guide?"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1478109766, "post_id": 40386476, "comment_id": 68025227, "body": "@Raj you need to understand language basics first, how integer and pointer is represented in memory"}], "answers": [{"comments": [{"owner": {"reputation": 376, "user_id": 4107516, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/590700e7fec0dfcce5b5b9542736dcad?s=128&d=identicon&r=PG&f=1", "display_name": "osuka_", "link": "https://stackoverflow.com/users/4107516/osuka"}, "edited": false, "score": 0, "creation_date": 1478110020, "post_id": 40386589, "comment_id": 68025399, "body": "It is, nonetheless, correct, and even though nobody is required to explain their vote, you&#39;re not doing anyone a favor by downvoting and walking away."}], "tags": [], "owner": {"reputation": 1083, "user_id": 6826608, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f02198302f3fb7b19ad09d9a9713a4e0?s=128&d=identicon&r=PG&f=1", "display_name": "Donghui Zhang", "link": "https://stackoverflow.com/users/6826608/donghui-zhang"}, "is_accepted": false, "score": 1, "last_activity_date": 1478109151, "creation_date": 1478109151, "answer_id": 40386589, "question_id": 40386476, "link": "https://stackoverflow.com/questions/40386476/buffer-to-struct-conversion/40386589#40386589", "title": "buffer to struct conversion", "body": "<p>In an SData object, an integer occupies four bytes. Your buffer uses one byte. Further, a character '4' is different from a binary form of an integer 4.</p>\n"}, {"tags": [], "owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "is_accepted": false, "score": 3, "last_activity_date": 1478110143, "creation_date": 1478110143, "answer_id": 40386886, "question_id": 40386476, "link": "https://stackoverflow.com/questions/40386476/buffer-to-struct-conversion/40386886#40386886", "title": "buffer to struct conversion", "body": "<p>Your approach is utterly wrong. First of all binary representation of integer depends on platform, ie <code>sizeof</code> of <code>int</code> and endiannes of hardware. Second, you will not be able to populate <code>char</code> pointer this way, so you need to create some marshalling code that reads bytes according to format, convert them to int and then allocate memory and copy the rest there. Simple approach with casting block of memory to your struct will not work with this structure.</p>\n"}, {"tags": [], "owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "is_accepted": false, "score": 1, "last_activity_date": 1478110524, "creation_date": 1478110524, "answer_id": 40387002, "question_id": 40386476, "link": "https://stackoverflow.com/questions/40386476/buffer-to-struct-conversion/40387002#40387002", "title": "buffer to struct conversion", "body": "<p>if you want to make an ASCII representation of a piece of data then , yes, you need to do serialization. This is not simply a matter of hoping that a human readable version of what you think of as the contents of a struct can simply be cast to that data. You have to choose a serialization format then either write code to do it or use an existing library.</p>\n\n<p>Popular Choices:</p>\n\n<ul>\n<li>xml</li>\n<li>json</li>\n<li>yaml</li>\n</ul>\n\n<p>I would use json - google for \"c++ json library\"</p>\n"}], "owner": {"reputation": 253, "user_id": 998677, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/cbe5e8802661f60a564697656bc69aa5?s=128&d=identicon&r=PG", "display_name": "Raj", "link": "https://stackoverflow.com/users/998677/raj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1478110524, "creation_date": 1478108836, "last_edit_date": 1478109742, "question_id": 40386476, "link": "https://stackoverflow.com/questions/40386476/buffer-to-struct-conversion", "title": "buffer to struct conversion", "body": "<p>I'm trying to convert a string to a structure.the struct in first field stores number of chars present in second field.\nPlease let me know what I'm missing in this program.\nI'm getting output wrongly(some big integer value)</p>\n\n<p>update: Can this program be corrected to print 4 (nsize) ?</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nstruct SData\n{\n    int nsize;\n    char* str;\n};\n\nvoid main()\n{\n    void* buffer = \"4ABCD\";\n\n    SData *obj = reinterpret_cast&lt; SData*&gt;(buffer);\n\n    cout&lt;&lt;obj-&gt;nsize;\n}\n</code></pre>\n"}, {"tags": ["c++", "opencv", "computer-vision"], "comments": [{"owner": {"reputation": 5192, "user_id": 2318649, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rW1HG.jpg?s=128&g=1", "display_name": "barny", "link": "https://stackoverflow.com/users/2318649/barny"}, "edited": false, "score": 0, "creation_date": 1478121355, "post_id": 40386321, "comment_id": 68031582, "body": "What are the pixel dimensions of the target in the picture you are starting with? (The physical size doesn&#39;t matter) If the calibration target is 400pix square then one pixel error exceeds your 0.25% objective. Your sample image is jpeg, this introduces noise - is this the original? I&#39;d have thought that to stand the remotest chance of achieving that sort of accuracy the target will have to be completely flat, in the picture it appears to be not completely flat."}, {"owner": {"reputation": 5192, "user_id": 2318649, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rW1HG.jpg?s=128&g=1", "display_name": "barny", "link": "https://stackoverflow.com/users/2318649/barny"}, "edited": false, "score": 0, "creation_date": 1478122060, "post_id": 40386321, "comment_id": 68031930, "body": "How accurately do you know the size of the target? You will have to measure it to considerably better than 0.25% accuracy - if you say at worst 0.1% that&#39;s to within 0.01inches for a 10&quot; target - you anywhere near that accurate?"}, {"owner": {"reputation": 21, "user_id": 4971361, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TePPu.jpg?s=128&g=1", "display_name": "Phaedrus", "link": "https://stackoverflow.com/users/4971361/phaedrus"}, "reply_to_user": {"reputation": 5192, "user_id": 2318649, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rW1HG.jpg?s=128&g=1", "display_name": "barny", "link": "https://stackoverflow.com/users/2318649/barny"}, "edited": false, "score": 0, "creation_date": 1478201124, "post_id": 40386321, "comment_id": 68069456, "body": "Pixel dimensions are 484 x 342 (outermost rows of circles). So, I see how that will limit accuracy. Thanks.  We used precision calipers to measure the pattern on the target image. So, we do have 0.01 inches &quot;accuracy&quot;. Well, that too is limited by the accuracy of the calipers... You are right the printed paper is not perfectly flat. If the approach is good enough, then we will print it on plastic cards so it will stay flatter."}, {"owner": {"reputation": 21, "user_id": 4971361, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TePPu.jpg?s=128&g=1", "display_name": "Phaedrus", "link": "https://stackoverflow.com/users/4971361/phaedrus"}, "reply_to_user": {"reputation": 5192, "user_id": 2318649, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rW1HG.jpg?s=128&g=1", "display_name": "barny", "link": "https://stackoverflow.com/users/2318649/barny"}, "edited": false, "score": 0, "creation_date": 1478201444, "post_id": 40386321, "comment_id": 68069599, "body": "And yes, it is jpeg. We are using mobile phone cameras, but only from a browser so don&#39;t think we have access to other formats right now. I guess from <a href=\"http://stackoverflow.com/questions/15358527/set-type-of-an-image-captured-using-iphone-camera\">here</a>, it would be possible to save as png if we built an app for it. Would png help? Thanks so much for your time."}, {"owner": {"reputation": 5192, "user_id": 2318649, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rW1HG.jpg?s=128&g=1", "display_name": "barny", "link": "https://stackoverflow.com/users/2318649/barny"}, "edited": false, "score": 0, "creation_date": 1478215255, "post_id": 40386321, "comment_id": 68075759, "body": "As long as it isn&#39;t just a png saved from a jpeg then it might help reduce the noise in the image. Anything that reduces the noise/increases the precision of your image of the target should help. However it is difficult to imagine how you can improve on the basic noise content built in to your data by its resolution - if your image is already at or above a 0.25% floor then you are very very unlikely to be able to get overall projection accuracy anywhere near that. IMO you need much higher resolution/precision of the images to stand any chance of getting better projection estimates."}, {"owner": {"reputation": 5192, "user_id": 2318649, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rW1HG.jpg?s=128&g=1", "display_name": "barny", "link": "https://stackoverflow.com/users/2318649/barny"}, "edited": false, "score": 0, "creation_date": 1478276447, "post_id": 40386321, "comment_id": 68103248, "body": "Can you adapt the feature extraction to get sub-pixel coordinates for the target centres?? (That might allow you to increase precision) Can you make the target full-frame? Do you need the array of targets? (if the target is truly planar then four corner points, or dots along the boundary, might be just as good). Would making the target points cross-hairs allow more precise location?"}, {"owner": {"reputation": 21, "user_id": 4971361, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TePPu.jpg?s=128&g=1", "display_name": "Phaedrus", "link": "https://stackoverflow.com/users/4971361/phaedrus"}, "reply_to_user": {"reputation": 5192, "user_id": 2318649, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rW1HG.jpg?s=128&g=1", "display_name": "barny", "link": "https://stackoverflow.com/users/2318649/barny"}, "edited": false, "score": 0, "creation_date": 1478559324, "post_id": 40386321, "comment_id": 68196869, "body": "Thanks for the thoughts, @barny. I can look at feature extracting in sub-pixel coordinates. I suspect it is doing that because it is using OpenCV and most of our information is in floats, but I&#39;ll look into it. Can&#39;t make the target full-frame because the application is to measure the sizes of objects around the target  The array of targets is useful for OpenCV to find the card. will look at smaller array sizes, or perhaps a checkerboard pattern which has the precise intersection points."}], "owner": {"reputation": 21, "user_id": 4971361, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TePPu.jpg?s=128&g=1", "display_name": "Phaedrus", "link": "https://stackoverflow.com/users/4971361/phaedrus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 228, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1478108326, "creation_date": 1478108326, "question_id": 40386321, "link": "https://stackoverflow.com/questions/40386321/what-accuracy-should-i-expect-from-basic-opencv-ortho-rectification-algorithms", "title": "What accuracy should I expect from basic opencv ortho-rectification algorithms?", "body": "<p>So, I'm taking over the work on an ortho-rectification algorithm that is intended to produce \"accurate\" results. I'm running into trouble trying to increase the accuracy and could use a little help.</p>\n\n<p>Here is the basic approach.</p>\n\n<ol>\n<li>Extract a calibration pattern from an image that was taken from a mobile phone.</li>\n<li>Rectify the image based on a calibration pattern in the image</li>\n<li>Scale the image to get the real world size of the scene around the pattern.</li>\n</ol>\n\n<p>The calibration pattern is held against a flat surface, like a wall, counter, table, floor and the user takes a picture. With that picture, we want to measure artifacts on the same surface as the calibration pattern. We have tried this with calibration patterns ranging from the size of a credit card to a sheet of paper (8.5\" x 11\")</p>\n\n<p>Here is an example <a href=\"https://i.stack.imgur.com/XttRx.jpg\" rel=\"nofollow noreferrer\">input picture</a></p>\n\n<p>With this resulting <a href=\"https://i.stack.imgur.com/p5cqQ.jpg\" rel=\"nofollow noreferrer\">output image</a></p>\n\n<p>Right now our measurements are usually within 1-2% of what we expect. This is sufficient for small areas (less than 25cm away from the calibration pattern. However, we'd like the algorithm to scale so that we can accurately measure a 2x2 meter area. However, at that size, the current error is too much (2-4 cm). </p>\n\n<p>Here is the algorithm we are following.</p>\n\n<pre><code>// convert original image to grayscale and perform morphological dilation to reduce false matches when finding circle grid\nMat imgGray;\ncvtColor(imgOriginal, imgGray, CV_BGR2GRAY);\n\n// find calibration pattern in original image\nSize patternSize(4, 11);\nvector &lt;Point2f&gt; circleCenters_OriginalImage;\nif (!findCirclesGrid(imgGray, patternSize, circleCenters_OriginalImage, CALIB_CB_ASYMMETRIC_GRID))\n{\n    return false;\n}\n\nPoint2f inputQuad[4];\ninputQuad[0] = Point2f(circleCenters_OriginalImage[0].x, circleCenters_OriginalImage[0].y);\ninputQuad[1] = Point2f(circleCenters_OriginalImage[3].x, circleCenters_OriginalImage[3].y);\ninputQuad[2] = Point2f(circleCenters_OriginalImage[43].x, circleCenters_OriginalImage[43].y);\ninputQuad[3] = Point2f(circleCenters_OriginalImage[40].x, circleCenters_OriginalImage[40].y);\n\n// create model points for calibration pattern\nvector &lt;Point2f&gt; circleCenters_ObjectSpace = GeneratePatternPointsInObjectSpace(circleCenters_OriginalImage[0], Distance(circleCenters_OriginalImage[0], circleCenters_OriginalImage[1]) / 2.0f, ioData.marker_up);\n\nPoint2f outputQuad[4];\noutputQuad[0] = Point2f(circleCenters_ObjectSpace[0].x, circleCenters_ObjectSpace[0].y);\noutputQuad[1] = Point2f(circleCenters_ObjectSpace[3].x, circleCenters_ObjectSpace[3].y);\noutputQuad[2] = Point2f(circleCenters_ObjectSpace[43].x, circleCenters_ObjectSpace[43].y);\noutputQuad[3] = Point2f(circleCenters_ObjectSpace[40].x, circleCenters_ObjectSpace[40].y);\n\nMat lambda(2,4,CV_32FC1);\nlambda = Mat::zeros(imgOriginal.rows, imgOriginal.cols, imgOriginal.type());\nlambda = getPerspectiveTransform(inputQuad, outputQuad);\n\nwarpPerspective(imgOriginal, imgOrthorectified, lambda, imgOrthorectified.size());\n...\n</code></pre>\n\n<p><strong>My Questions:</strong> \nIs it reasonable to shoot for error &lt; 0.25%? Is there a different algorithm that would yield more accurate results? What are the most valuable sources of error to identify and resolve?</p>\n\n<p>As I've worked on this, I've also looked at removing pincushion / barrel distortions, and trying homographies to find the perspective transform. The best approaches I have found so far remain in the 1-2% error.</p>\n\n<p>Any suggestions of where to go next would be really helpful</p>\n"}, {"tags": ["c++", "arrays", "struct"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 4, "creation_date": 1478108189, "post_id": 40386264, "comment_id": 68024311, "body": "Why not hit compile and see if it works?"}, {"owner": {"reputation": 2385, "user_id": 1009270, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/33fcdc9c0604cf69abb15e17840d2a3c?s=128&d=identicon&r=PG", "display_name": "john elemans", "link": "https://stackoverflow.com/users/1009270/john-elemans"}, "edited": false, "score": 2, "creation_date": 1478108237, "post_id": 40386264, "comment_id": 68024336, "body": "of course it does. The array contains pointers to structs, not structs. You have to allocate each one as you want to use it."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 1, "creation_date": 1478108241, "post_id": 40386264, "comment_id": 68024337, "body": "<code>Node* leaves[26] = {NULL};</code> would initialize the array of pointer to NULL. Better than nothing I guess. We would need to see your context code to help you further."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 2, "creation_date": 1478108320, "post_id": 40386264, "comment_id": 68024393, "body": "How are you initialize these <code>Node*</code> pointers? Can you provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> that reproduces your problem please?"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1478108401, "post_id": 40386264, "comment_id": 68024442, "body": "@NathanOliver If the code segfaults, they appearantly already compilled the code."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1478108413, "post_id": 40386264, "comment_id": 68024453, "body": "Please show a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> that segfaults. Without seeing your code it is pretty hard to guess why your program segfaults. And also why is this tagged c++ ?"}, {"owner": {"reputation": 14460, "user_id": 1404311, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/j4CQ5.jpg?s=128&g=1", "display_name": "Scott Mermelstein", "link": "https://stackoverflow.com/users/1404311/scott-mermelstein"}, "edited": false, "score": 0, "creation_date": 1478109750, "post_id": 40386264, "comment_id": 68025221, "body": "Welcome to Stack Overflow.  Your question has two aspects, at least one of which the community doesn&#39;t like.  First aspect: can you have a pointer to a structure inside the structure?  Yes.  This is a standard thing to do in C++.  It&#39;s not what&#39;s causing your problem.  You&#39;re getting a seg fault, which is almost certainly due to you referencing memory badly.  People are downvoting and advocating putting your question on hold, because you haven&#39;t given sufficient information for us to tell you exactly what&#39;s causing the seg fault.  Edit your question with more code, and you&#39;ll get good answers."}], "answers": [{"tags": [], "owner": {"reputation": 9511, "user_id": 7023590, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/82052fbf0815ce82c4eded8fd941be14?s=128&d=identicon&r=PG&f=1", "display_name": "MarianD", "link": "https://stackoverflow.com/users/7023590/mariand"}, "is_accepted": true, "score": 1, "last_activity_date": 1478110268, "creation_date": 1478110268, "answer_id": 40386919, "question_id": 40386264, "link": "https://stackoverflow.com/questions/40386264/declaring-an-array-of-structs-within-the-same-struct/40386919#40386919", "title": "Declaring an array of structs within the same struct", "body": "<p>In your <code>struct</code> you didn't use an array of the <code>same struct</code>, but an array of the <code>pointers to the same struct</code> - and it makes the difference.</p>\n\n<p><strong><code>Pointers</code></strong> have <strong>known length</strong> (e. g. 32-bit in 32-bit operating systems) <em>regardless of the object they point to</em>, so your struct simply allocates (probably)</p>\n\n<ul>\n<li>32 bits = 4 bytes for <code>mumMatches</code></li>\n<li><p>26 * 32 bits = 26 * 4 bytes = 104 bytes for <code>leaves</code></p>\n\n<hr></li>\n<li><p>108 bytes altogether</p></li>\n</ul>\n"}], "owner": {"reputation": 65, "user_id": 3822171, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/1510400428/picture?type=large", "display_name": "user3822171", "link": "https://stackoverflow.com/users/3822171/user3822171"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 98, "favorite_count": 1, "accepted_answer_id": 40386919, "answer_count": 1, "score": 1, "last_activity_date": 1478110268, "creation_date": 1478108108, "question_id": 40386264, "link": "https://stackoverflow.com/questions/40386264/declaring-an-array-of-structs-within-the-same-struct", "title": "Declaring an array of structs within the same struct", "body": "<p>I'm not positive this is even possible, but I am basically trying to define a struct with an array of the same struct inside of it, like so</p>\n\n<pre><code>struct Node {\n    int numMatches = 0;\n    Node* leaves[26] = {};\n};\n</code></pre>\n\n<p>Each node would contain a fixed-length array of pointers to other nodes (representing letters). I'm trying to recurse through these nodes, going into the relevant leaf whenever I need. I would initialize a \"head\" Node* array and bubble down that way. It's seg faulting immediately, and I can see why that might be - it doesn't know how much memory to alloc to an array of such structs. Not quite sure how to solve the problem though.</p>\n\n<p>Pretty simple issue, but I haven't found any C++/C specific threads with this same question.</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["c++", "matlab", "function", "mex"], "answers": [{"comments": [{"owner": {"reputation": 513, "user_id": 5779175, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/c3fbdb68c4506f159deddfebb998f852?s=128&d=identicon&r=PG&f=1", "display_name": "selmaohneh", "link": "https://stackoverflow.com/users/5779175/selmaohneh"}, "edited": false, "score": 0, "creation_date": 1478109199, "post_id": 40386556, "comment_id": 68024879, "body": "This would use Matlab to evaluate the expression. But I need the inline function as an argument for another c++ function like doStuff(function)"}, {"owner": {"reputation": 4011, "user_id": 1477064, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/cd12123a743db34ac0b055a6fa736788?s=128&d=identicon&r=PG", "display_name": "xvan", "link": "https://stackoverflow.com/users/1477064/xvan"}, "reply_to_user": {"reputation": 513, "user_id": 5779175, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/c3fbdb68c4506f159deddfebb998f852?s=128&d=identicon&r=PG&f=1", "display_name": "selmaohneh", "link": "https://stackoverflow.com/users/5779175/selmaohneh"}, "edited": false, "score": 0, "creation_date": 1478109792, "post_id": 40386556, "comment_id": 68025239, "body": "Use an Anonymous Function instead of  <code>inline</code>, call it with <code>feval()</code> via <code>mexCallMATLAB()</code>"}, {"owner": {"reputation": 513, "user_id": 5779175, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/c3fbdb68c4506f159deddfebb998f852?s=128&d=identicon&r=PG&f=1", "display_name": "selmaohneh", "link": "https://stackoverflow.com/users/5779175/selmaohneh"}, "edited": false, "score": 0, "creation_date": 1478109954, "post_id": 40386556, "comment_id": 68025362, "body": "Same here. I explicitly don&#39;t want Matlab to compute the function. I just want to get a function somehow from Matlab to C++."}, {"owner": {"reputation": 4011, "user_id": 1477064, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/cd12123a743db34ac0b055a6fa736788?s=128&d=identicon&r=PG", "display_name": "xvan", "link": "https://stackoverflow.com/users/1477064/xvan"}, "reply_to_user": {"reputation": 513, "user_id": 5779175, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/c3fbdb68c4506f159deddfebb998f852?s=128&d=identicon&r=PG&f=1", "display_name": "selmaohneh", "link": "https://stackoverflow.com/users/5779175/selmaohneh"}, "edited": false, "score": 2, "creation_date": 1478110172, "post_id": 40386556, "comment_id": 68025510, "body": "<code>&#39;sin(x)+3&#39;</code> is a string, at execution time you&#39;ll need a math parser for C++ to do the work, ie <a href=\"https://fastmathparser.codeplex.com/\" rel=\"nofollow noreferrer\">fastmathparser.codeplex.com</a>. Calling LUA or  python might also do the work, But if you&#39;re using mex, what&#39;s the reason for not using MATLAB?"}, {"owner": {"reputation": 513, "user_id": 5779175, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/c3fbdb68c4506f159deddfebb998f852?s=128&d=identicon&r=PG&f=1", "display_name": "selmaohneh", "link": "https://stackoverflow.com/users/5779175/selmaohneh"}, "edited": false, "score": 0, "creation_date": 1478111436, "post_id": 40386556, "comment_id": 68026251, "body": "I want to use c++ to save some time while my intensive calculations. When I give those calculations back to Matlab, I save no time at all. I want to compare the time of Matlab and the c++ execution."}, {"owner": {"reputation": 1214, "user_id": 5207515, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-yxD7VoPb1-A/AAAAAAAAAAI/AAAAAAAAADw/kaBYqeByyfQ/photo.jpg?sz=128", "display_name": "mpaskov", "link": "https://stackoverflow.com/users/5207515/mpaskov"}, "edited": false, "score": 0, "creation_date": 1478112574, "post_id": 40386556, "comment_id": 68026856, "body": "so you want to compare the c++ implementation of the inline function with the one from matlab? But you do not want to implement the inline function explicitly in c++, cause you want to compared multiple different functions."}, {"owner": {"reputation": 513, "user_id": 5779175, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/c3fbdb68c4506f159deddfebb998f852?s=128&d=identicon&r=PG&f=1", "display_name": "selmaohneh", "link": "https://stackoverflow.com/users/5779175/selmaohneh"}, "edited": false, "score": 0, "creation_date": 1478114674, "post_id": 40386556, "comment_id": 68027934, "body": "That sounds like one of my use cases, yes."}, {"owner": {"reputation": 1214, "user_id": 5207515, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-yxD7VoPb1-A/AAAAAAAAAAI/AAAAAAAAADw/kaBYqeByyfQ/photo.jpg?sz=128", "display_name": "mpaskov", "link": "https://stackoverflow.com/users/5207515/mpaskov"}, "edited": false, "score": 0, "creation_date": 1478115383, "post_id": 40386556, "comment_id": 68028358, "body": "I too wish to implement algorithms in Matlab and just get c++ of them for free. <a href=\"https://www.mathworks.com/products/matlab-coder/\" rel=\"nofollow noreferrer\">Matlab Coder</a> kind of does that with some extra catches, it is also a separate package and the generated code is not always readable. My advice for any function that you write in matlab in &#39;straigh-forward&#39; (for-loops etc) way it will be faster in C++. For function with vectorization it becomes more tricky and the difference might be small but it <b>depends</b> a lot on the function."}], "tags": [], "owner": {"reputation": 4011, "user_id": 1477064, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/cd12123a743db34ac0b055a6fa736788?s=128&d=identicon&r=PG", "display_name": "xvan", "link": "https://stackoverflow.com/users/1477064/xvan"}, "is_accepted": false, "score": 1, "last_activity_date": 1478109045, "creation_date": 1478109045, "answer_id": 40386556, "question_id": 40386165, "link": "https://stackoverflow.com/questions/40386165/transfering-and-using-a-matlab-inline-function-to-a-c-mex-file/40386556#40386556", "title": "Transfering and using a Matlab inline function to a c++ mex file", "body": "<p>use <a href=\"https://www.mathworks.com/help/matlab/apiref/mexcallmatlab.html\" rel=\"nofollow noreferrer\"><code>mexCallMATLAB()</code></a> and <a href=\"https://www.mathworks.com/help/matlab/apiref/mexcallmatlabwithtrap.html\" rel=\"nofollow noreferrer\"><code>mexCallMATLABWithTrap()</code></a></p>\n"}], "owner": {"reputation": 513, "user_id": 5779175, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/c3fbdb68c4506f159deddfebb998f852?s=128&d=identicon&r=PG&f=1", "display_name": "selmaohneh", "link": "https://stackoverflow.com/users/5779175/selmaohneh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 169, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1478109045, "creation_date": 1478107781, "question_id": 40386165, "link": "https://stackoverflow.com/questions/40386165/transfering-and-using-a-matlab-inline-function-to-a-c-mex-file", "title": "Transfering and using a Matlab inline function to a c++ mex file", "body": "<p>I am trying to generate a mex file for a c++ library, so that i can call its methods directly from matlab.</p>\n\n<p>As my first argument I want to transfer an inline function, for example <code>inline('sin(x)+3')</code>. </p>\n\n<p>But now I want to use this function dynamically in my c++ program. There is no method like mxGetInlineFunction(), right? Is there a way I can get my inline item from the array and use it as a math-function in my c++ code?</p>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["c++", "c++11", "boost"], "comments": [{"owner": {"reputation": 6673, "user_id": 777689, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/19JOo.jpg?s=128&g=1", "display_name": "PeterT", "link": "https://stackoverflow.com/users/777689/petert"}, "edited": false, "score": 1, "creation_date": 1478108314, "post_id": 40386135, "comment_id": 68024385, "body": "the boost filesystem path class <code>string()</code> function returns by const value or const&amp; you can&#39;t bind that result to a string&amp;&amp;. Just use <code>void putDir(const std::string &amp; dir) { }</code>. (there&#39;s also a template member function &quot;string&quot; of path that will return by value but that is for converting to custom string types)"}, {"owner": {"reputation": 13520, "user_id": 2315602, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/8rKPi.jpg?s=128&g=1", "display_name": "lisyarus", "link": "https://stackoverflow.com/users/2315602/lisyarus"}, "edited": false, "score": 1, "creation_date": 1478108703, "post_id": 40386135, "comment_id": 68024614, "body": "<code>(T &amp;&amp;)</code> in the function signature is an anti-pattern, and you have faced one of the reasons. If you need a copy of the argument, declare <code>(T)</code>, otherwise declare <code>(T const &amp;)</code>."}, {"owner": {"reputation": 1189, "user_id": 6887528, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/29783d4ad32259755cba45af1fd8394f?s=128&d=identicon&r=PG&f=1", "display_name": "Oli", "link": "https://stackoverflow.com/users/6887528/oli"}, "edited": false, "score": 0, "creation_date": 1478108792, "post_id": 40386135, "comment_id": 68024653, "body": "why the error is not  <code>const std::string&amp;</code>?"}], "owner": {"reputation": 1189, "user_id": 6887528, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/29783d4ad32259755cba45af1fd8394f?s=128&d=identicon&r=PG&f=1", "display_name": "Oli", "link": "https://stackoverflow.com/users/6887528/oli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 112, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1478107695, "creation_date": 1478107695, "question_id": 40386135, "link": "https://stackoverflow.com/questions/40386135/boost-string-type-mismatch", "title": "boost string type mismatch", "body": "<p>In the followring code, </p>\n\n<pre><code>class MonitorResult {\npublic:\n    void putDir(std::string &amp;&amp; dir) { }\n};\n\nvoid listDir(boost::filesystem::path &amp;&amp; dir, MonitorResult &amp; result) {\n\n    for(boost::filesystem::directory_iterator it(dir);\n        it != boost::filesystem::directory_iterator(); ++it) {\n        if(boost::filesystem::is_symlink( it-&gt;path()) ) {\n            continue;\n        }\n        else if(boost::filesystem::is_directory(it-&gt;path())) {\n            result.putDir(it-&gt;path().string() );  // Error here\n        }\n    }\n}\n</code></pre>\n\n<blockquote>\n  <p>error: no matching function for call to <code>MonitorResult::putDir(const string&amp;)</code>\n     candidate is <code>void MonitorResult::putDir(std::string&amp;&amp;)</code></p>\n</blockquote>\n\n<p>I am not getting <code>std::string</code>, but just <code>string</code>. How can type error be resolved? Thanks.</p>\n"}, {"tags": ["c++", "c-preprocessor", "doxygen"], "comments": [{"owner": {"reputation": 1283, "user_id": 2747160, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/xE6Dt.png?s=128&g=1", "display_name": "m8mble", "link": "https://stackoverflow.com/users/2747160/m8mble"}, "edited": false, "score": 0, "creation_date": 1478109657, "post_id": 40386042, "comment_id": 68025167, "body": "Whats the question?"}, {"owner": {"reputation": 5845, "user_id": 2725810, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/520b9e3418a19d3e442f5713613ef9b8?s=128&d=identicon&r=PG", "display_name": "AlwaysLearning", "link": "https://stackoverflow.com/users/2725810/alwayslearning"}, "reply_to_user": {"reputation": 1283, "user_id": 2747160, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/xE6Dt.png?s=128&g=1", "display_name": "m8mble", "link": "https://stackoverflow.com/users/2747160/m8mble"}, "edited": false, "score": 0, "creation_date": 1478152420, "post_id": 40386042, "comment_id": 68040150, "body": "@m8mble Don&#39;t you find the described phenomenon strange and requiring an explanation?"}, {"owner": {"reputation": 1283, "user_id": 2747160, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/xE6Dt.png?s=128&g=1", "display_name": "m8mble", "link": "https://stackoverflow.com/users/2747160/m8mble"}, "edited": false, "score": 0, "creation_date": 1478160153, "post_id": 40386042, "comment_id": 68043260, "body": "So, your question is about my opinion? Please read <a href=\"http://stackoverflow.com/help/dont-ask\">this</a>."}, {"owner": {"reputation": 5845, "user_id": 2725810, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/520b9e3418a19d3e442f5713613ef9b8?s=128&d=identicon&r=PG", "display_name": "AlwaysLearning", "link": "https://stackoverflow.com/users/2725810/alwayslearning"}, "reply_to_user": {"reputation": 1283, "user_id": 2747160, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/xE6Dt.png?s=128&g=1", "display_name": "m8mble", "link": "https://stackoverflow.com/users/2747160/m8mble"}, "edited": false, "score": 0, "creation_date": 1478166447, "post_id": 40386042, "comment_id": 68046637, "body": "@m8mble No, my question is about your explanation of the described phenomenon."}, {"owner": {"reputation": 1283, "user_id": 2747160, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/xE6Dt.png?s=128&g=1", "display_name": "m8mble", "link": "https://stackoverflow.com/users/2747160/m8mble"}, "edited": false, "score": 1, "creation_date": 1478171809, "post_id": 40386042, "comment_id": 68050081, "body": "It&#39;s probably some form of doxygen bug, but since you&#39;ve already discovered a workaround there is not much to explain. Doxygen neither is a preprocessor nor a compiler - it will never fully understand C++."}], "owner": {"reputation": 5845, "user_id": 2725810, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/520b9e3418a19d3e442f5713613ef9b8?s=128&d=identicon&r=PG", "display_name": "AlwaysLearning", "link": "https://stackoverflow.com/users/2725810/alwayslearning"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 110, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1478107379, "creation_date": 1478107379, "question_id": 40386042, "link": "https://stackoverflow.com/questions/40386042/include-guards-and-commented-out-doxygen-comments-affect-the-output-of-doxygen", "title": "Include-guards and commented out Doxygen comments affect the output of Doxygen", "body": "<p>The behavior of Doxygen 1.8.11 for the following example is really bizarre:</p>\n\n<p>File <code>test.h</code>:</p>\n\n<pre><code>/// \\file\n\n/// \\namespace N1\n/// Namespace N1.\nnamespace N1 {\n\n#include \"a.h\"\n\n} // namespace\n\nint main() {\n  return 0;\n} \n</code></pre>\n\n<p>File <code>a.h</code>:</p>\n\n<pre><code>/// \\file\n\n/// \\namespace N1::N2\n/// Namespace N2\nnamespace N2 {\n\n#include \"b.h\"\n\n} // namespace\n</code></pre>\n\n<p>File <code>b.h</code>:</p>\n\n<pre><code>/// \\file\n\n// class A does not appear without the commented Doxygen comments below!\n// /// \\cond None\n#ifndef GUARD\n#define GUARD\n// /// \\endcond\n\n/// Class A\nclass A {};\n\n// /// \\cond None\n#endif\n// /// \\endcond\n</code></pre>\n\n<p>The class <code>A</code> appears in the documentation of <code>N1::N2</code> only if the include-guard in <code>b.h</code> is not present or is conditioned out. Interestingly, even having the conditioning comments commented out as in the example suffices to have the class <code>A</code> appear!  </p>\n"}, {"tags": ["c++", "arrays", "pointers", "char"], "comments": [{"owner": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "edited": false, "score": 2, "creation_date": 1478107405, "post_id": 40386020, "comment_id": 68023869, "body": "in this case, an array decays to a pointer of that type, so both are exactly the same."}, {"owner": {"reputation": 13521, "user_id": 654953, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/f6453f58b70e93dbfa8998b71a95bb09?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan", "link": "https://stackoverflow.com/users/654953/ryan"}, "edited": false, "score": 1, "creation_date": 1478107410, "post_id": 40386020, "comment_id": 68023873, "body": "no no no no no no | what bates said is correct."}, {"owner": {"reputation": 180, "user_id": 4126370, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c37b46af03d6ab4e3c89042a85044862?s=128&d=identicon&r=PG&f=1", "display_name": "Kushan Mehta", "link": "https://stackoverflow.com/users/4126370/kushan-mehta"}, "edited": false, "score": 0, "creation_date": 1478107479, "post_id": 40386020, "comment_id": 68023910, "body": "So basically both do the same thing but are just different ways of representation right?"}, {"owner": {"reputation": 3820, "user_id": 2542856, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/9YUxb.jpg?s=128&g=1", "display_name": "Matt C", "link": "https://stackoverflow.com/users/2542856/matt-c"}, "edited": false, "score": 2, "creation_date": 1478107787, "post_id": 40386020, "comment_id": 68024073, "body": "This question has already been answered <a href=\"http://stackoverflow.com/questions/5573310/difference-between-passing-array-and-array-pointer-into-function-in-c\">here</a>."}, {"owner": {"reputation": 3596, "user_id": 1753435, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b81cf3b8c8432e0bcac7322120a09b56?s=128&d=identicon&r=PG", "display_name": "andreee", "link": "https://stackoverflow.com/users/1753435/andreee"}, "edited": false, "score": 0, "creation_date": 1558428550, "post_id": 40386020, "comment_id": 99087794, "body": "I completely disagree on this question being marked as a duplicate since it explicitely addresses <i>C++</i>, while the other question is asking about <i>C</i>. In fact, even the accepted answer refers to a C99 draft. Folks at SO are usually very picky (and correct) about C not being C++, so I don&#39;t understand why this should be a dupe."}], "answers": [{"comments": [{"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 180, "user_id": 4126370, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c37b46af03d6ab4e3c89042a85044862?s=128&d=identicon&r=PG&f=1", "display_name": "Kushan Mehta", "link": "https://stackoverflow.com/users/4126370/kushan-mehta"}, "edited": false, "score": 2, "creation_date": 1478107623, "post_id": 40386066, "comment_id": 68023973, "body": "@KushanMehta copy of the variable is created in both cases, variable is a pointer, which is copied, not data where it points to."}, {"owner": {"reputation": 180, "user_id": 4126370, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c37b46af03d6ab4e3c89042a85044862?s=128&d=identicon&r=PG&f=1", "display_name": "Kushan Mehta", "link": "https://stackoverflow.com/users/4126370/kushan-mehta"}, "edited": false, "score": 0, "creation_date": 1478107707, "post_id": 40386066, "comment_id": 68024027, "body": "Oh this helped me solve my doubt entirely. Thanks a ton. Will accept your answer in 9 minutes (time limit)."}, {"owner": {"reputation": 3820, "user_id": 2542856, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/9YUxb.jpg?s=128&g=1", "display_name": "Matt C", "link": "https://stackoverflow.com/users/2542856/matt-c"}, "reply_to_user": {"reputation": 180, "user_id": 4126370, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c37b46af03d6ab4e3c89042a85044862?s=128&d=identicon&r=PG&f=1", "display_name": "Kushan Mehta", "link": "https://stackoverflow.com/users/4126370/kushan-mehta"}, "edited": false, "score": 1, "creation_date": 1478107733, "post_id": 40386066, "comment_id": 68024038, "body": "@KushanMehta you&#39;re correct, the variables aren&#39;t copied. Instead, a single pointer is passed to the function which points to the array. So in either function you&#39;re working with the <b>very same</b> array."}, {"owner": {"reputation": 180, "user_id": 4126370, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c37b46af03d6ab4e3c89042a85044862?s=128&d=identicon&r=PG&f=1", "display_name": "Kushan Mehta", "link": "https://stackoverflow.com/users/4126370/kushan-mehta"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1478107768, "post_id": 40386066, "comment_id": 68024058, "body": "@Slava I got that thing. So is there really a difference in memory between pointer and original char array. Thanks"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 180, "user_id": 4126370, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c37b46af03d6ab4e3c89042a85044862?s=128&d=identicon&r=PG&f=1", "display_name": "Kushan Mehta", "link": "https://stackoverflow.com/users/4126370/kushan-mehta"}, "edited": false, "score": 0, "creation_date": 1478107936, "post_id": 40386066, "comment_id": 68024146, "body": "@KushanMehta your question does not make much sense. Array is an area of memory, pointer is an address. In C/C++ array name can decay to the pointer of the first element, but array and a pointer are different things."}, {"owner": {"reputation": 180, "user_id": 4126370, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c37b46af03d6ab4e3c89042a85044862?s=128&d=identicon&r=PG&f=1", "display_name": "Kushan Mehta", "link": "https://stackoverflow.com/users/4126370/kushan-mehta"}, "edited": false, "score": 0, "creation_date": 1478107997, "post_id": 40386066, "comment_id": 68024188, "body": "Yes you are correct . sorry didnt keep that in mind. Forgot about the concept of First pocket pointer :-) Thanks"}], "tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": true, "score": 7, "last_activity_date": 1478107550, "last_edit_date": 1478107550, "creation_date": 1478107457, "answer_id": 40386066, "question_id": 40386020, "link": "https://stackoverflow.com/questions/40386020/are-passing-char-array-by-char-ar-and-char-ar-same-c/40386066#40386066", "title": "Are passing char array by (char* ar) and (char ar[ ]) same? c++", "body": "<p>They are both <em>exactly</em> the same.</p>\n\n<p>When passed as a function parameter, <code>val</code> <em>decays</em> to a pointer type: it's type too is <code>char*</code>.</p>\n\n<p><strong>In <em>neither</em> case is a deep copy of any array taken.</strong></p>\n\n<p>Whether you use <code>val[i]</code>, <code>ptr[i]</code>, <code>*(val + i)</code>, or <code>*(ptr + i)</code> to access array elements is purely a matter of personal taste.</p>\n"}], "owner": {"reputation": 180, "user_id": 4126370, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c37b46af03d6ab4e3c89042a85044862?s=128&d=identicon&r=PG&f=1", "display_name": "Kushan Mehta", "link": "https://stackoverflow.com/users/4126370/kushan-mehta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 192, "favorite_count": 1, "closed_date": 1478108016, "accepted_answer_id": 40386066, "answer_count": 1, "score": 1, "last_activity_date": 1478107550, "creation_date": 1478107333, "last_edit_date": 1478107438, "question_id": 40386020, "link": "https://stackoverflow.com/questions/40386020/are-passing-char-array-by-char-ar-and-char-ar-same-c", "closed_reason": "Duplicate", "title": "Are passing char array by (char* ar) and (char ar[ ]) same? c++", "body": "<p>I am new to c++ and I need help as I am bit confused if the two ways which I thought would be different are actually the same thing.\nSo here is my code of passing down the character array to a function.</p>\n\n<pre><code>     // This is the first style I use\n   void functionPTR( char *ptr ) // Pass by reference \n               {\n                     // just put up some random code\n                 strcpy(ptr,\"BY_POINTER\"); \n                 cout&lt;&lt;ptr[0]; // random thing\n                }\n</code></pre>\n\n<hr>\n\n<pre><code>// This is the Second style I use\n   void functionVAL( char val[] ) // Pass by value\n                 {\n                  ... code here\n                }\n</code></pre>\n\n<p>This is the confusion that I have.\nI always thought that the first one is basically pass by reference and any changes in the variable in function would change the original passed variable and thought that the second is the traditional pass by value way where function creates its own value and uses it to modify which does not affect the original passed variable.\n<br><br>\nBut things here are not as expected by me. In both the cases any change made in the function to the variable is reflected in the original passed variable.\n<Br>\nCan anyone please explain me how this thing actually works. Please dont be harsh on me as I am still learning it on my own.\n<br>\n<br>\nThanks for stopping by to read my que and help me out.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 2, "creation_date": 1478107371, "post_id": 40386017, "comment_id": 68023851, "body": "Step 1. Don&#39;t use default parameters. This is one of the many reasons why."}, {"owner": {"reputation": 762, "user_id": 3127141, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/hylYK.jpg?s=128&g=1", "display_name": "Paa K", "link": "https://stackoverflow.com/users/3127141/paa-k"}, "reply_to_user": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 0, "creation_date": 1478107778, "post_id": 40386017, "comment_id": 68024064, "body": "@CoryKramer what if the default parameters are there for a good reason?"}, {"owner": {"reputation": 987, "user_id": 2627487, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/17454b0724fc732d0a1e9a708fc1f49b?s=128&d=identicon&r=PG", "display_name": "MrPisarik", "link": "https://stackoverflow.com/users/2627487/mrpisarik"}, "reply_to_user": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 0, "creation_date": 1478107980, "post_id": 40386017, "comment_id": 68024178, "body": "@CoryKramer can you give some link to explanation? (to know other reasons, or maybe answer with explanation)"}, {"owner": {"reputation": 95188, "user_id": 440119, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5ec9ca2a92a94a5470396073129d79e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Lindley", "link": "https://stackoverflow.com/users/440119/benjamin-lindley"}, "edited": false, "score": 2, "creation_date": 1478108186, "post_id": 40386017, "comment_id": 68024308, "body": "Why would you want 2 separate constructors for this? If the user has separate RGB values, they can trivially pass <code>Color(r, g, b)</code> for the color parameter."}, {"owner": {"reputation": 987, "user_id": 2627487, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/17454b0724fc732d0a1e9a708fc1f49b?s=128&d=identicon&r=PG", "display_name": "MrPisarik", "link": "https://stackoverflow.com/users/2627487/mrpisarik"}, "reply_to_user": {"reputation": 95188, "user_id": 440119, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5ec9ca2a92a94a5470396073129d79e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Lindley", "link": "https://stackoverflow.com/users/440119/benjamin-lindley"}, "edited": false, "score": 0, "creation_date": 1478109301, "post_id": 40386017, "comment_id": 68024937, "body": "@BenjaminLindley you are right! Maybe it is bad example. Lets imagine that there is no ways to do <code>Color(r, g, b)</code> :) Is it better solution, to write a some sort of convertor from one to another (becuse they have one essence) and force users to use convertor if they want Bubble from <code>r, g, b</code>"}, {"owner": {"reputation": 95188, "user_id": 440119, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5ec9ca2a92a94a5470396073129d79e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Lindley", "link": "https://stackoverflow.com/users/440119/benjamin-lindley"}, "edited": false, "score": 0, "creation_date": 1478109564, "post_id": 40386017, "comment_id": 68025119, "body": "@MrPisarik: Come up with a realistic example problem, and maybe I can offer a reasonable solution."}, {"owner": {"reputation": 987, "user_id": 2627487, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/17454b0724fc732d0a1e9a708fc1f49b?s=128&d=identicon&r=PG", "display_name": "MrPisarik", "link": "https://stackoverflow.com/users/2627487/mrpisarik"}, "reply_to_user": {"reputation": 95188, "user_id": 440119, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5ec9ca2a92a94a5470396073129d79e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Lindley", "link": "https://stackoverflow.com/users/440119/benjamin-lindley"}, "edited": false, "score": 0, "creation_date": 1478110166, "post_id": 40386017, "comment_id": 68025503, "body": "@BenjaminLindley unfortunately it&#39;s just matter of curiosity. I haven&#39;t real example. But maybe better example in which we want to create <code>Point</code> in cartesian system and in polar system. So we will have two constructors with two double parameters and both are default."}, {"owner": {"reputation": 95188, "user_id": 440119, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5ec9ca2a92a94a5470396073129d79e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Lindley", "link": "https://stackoverflow.com/users/440119/benjamin-lindley"}, "edited": false, "score": 1, "creation_date": 1478110951, "post_id": 40386017, "comment_id": 68025966, "body": "@MrPisarik: That&#39;s a perfect example. And the solution to that is the Named Constructor Idiom. <a href=\"https://isocpp.org/wiki/faq/ctors#named-ctor-idiom\" rel=\"nofollow noreferrer\">isocpp.org/wiki/faq/ctors#named-ctor-idiom</a>"}, {"owner": {"reputation": 987, "user_id": 2627487, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/17454b0724fc732d0a1e9a708fc1f49b?s=128&d=identicon&r=PG", "display_name": "MrPisarik", "link": "https://stackoverflow.com/users/2627487/mrpisarik"}, "reply_to_user": {"reputation": 95188, "user_id": 440119, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5ec9ca2a92a94a5470396073129d79e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Lindley", "link": "https://stackoverflow.com/users/440119/benjamin-lindley"}, "edited": false, "score": 0, "creation_date": 1478111264, "post_id": 40386017, "comment_id": 68026161, "body": "@BenjaminLindley, wow, didn&#39;t know about this. Thank you very much! I will edit question with this example."}], "answers": [{"tags": [], "owner": {"reputation": 69, "user_id": 4658132, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/874631382603210/picture?type=large", "display_name": "Armen Yeganyan", "link": "https://stackoverflow.com/users/4658132/armen-yeganyan"}, "is_accepted": false, "score": 0, "last_activity_date": 1478108500, "creation_date": 1478108500, "answer_id": 40386381, "question_id": 40386017, "link": "https://stackoverflow.com/questions/40386017/how-to-avoid-ambiguity-in-constructors-with-default-parameters/40386381#40386381", "title": "How to avoid ambiguity in constructors with default parameters?", "body": "<p>In such cases it makes sense to use GOF's Builder pattern.</p>\n\n<p>Something like this,</p>\n\n<pre><code>BubbleBulder bb;\nbb.setGeomtery(x, y, radius); // or separate setters for each members\nbb.setColor(new Color(0, 0 ,0));\nstd::unique_ptr&lt;Bubble&gt; bubblePtr = bb.createInstance(); // or move\n</code></pre>\n"}], "owner": {"reputation": 987, "user_id": 2627487, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/17454b0724fc732d0a1e9a708fc1f49b?s=128&d=identicon&r=PG", "display_name": "MrPisarik", "link": "https://stackoverflow.com/users/2627487/mrpisarik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 114, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1478111643, "creation_date": 1478107318, "last_edit_date": 1478111643, "question_id": 40386017, "link": "https://stackoverflow.com/questions/40386017/how-to-avoid-ambiguity-in-constructors-with-default-parameters", "title": "How to avoid ambiguity in constructors with default parameters?", "body": "<p>Suppose I have a <code>class Point</code>, which can be constructed with rectangular  coordinates and polar coordinates. And also I want to have default parameters, which will create <code>Point</code> in coordinates (0, 0).</p>\n\n<p>So, I would like to have some sort of code:</p>\n\n<pre><code>Class Point{\n public:\n    Point(double x = 0, double y = 0); // Rectangular coordinates\n    Pount(double r = 0, double a = 0); // Polar coordinates (radius and angle)\n    ...\n}\n</code></pre>\n\n<p>But obviously this is a bad decision, because we can't even make a call <code>Point()</code>. So as workaround we can make one of the constructors with non-default first parameter (i.e. just <code>int x, ...</code>). But what if we want to specify only x,  then we again get an error about ambiguity.</p>\n\n<p>How to design such constructors correctly?</p>\n"}, {"tags": ["c++", "object"], "comments": [{"owner": {"reputation": 1233, "user_id": 5366130, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ce3d4bd07d1115070e7727de382560ba?s=128&d=identicon&r=PG&f=1", "display_name": "Omid CompSCI", "link": "https://stackoverflow.com/users/5366130/omid-compsci"}, "edited": false, "score": 0, "creation_date": 1478107115, "post_id": 40385932, "comment_id": 68023710, "body": "So why can&#39;t you do secondPerson-&gt;printData()?"}, {"owner": {"reputation": 211, "user_id": 6291931, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7aca7ecf839e315922ded2236a7b7003?s=128&d=identicon&r=PG&f=1", "display_name": "Tjatte", "link": "https://stackoverflow.com/users/6291931/tjatte"}, "reply_to_user": {"reputation": 1233, "user_id": 5366130, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ce3d4bd07d1115070e7727de382560ba?s=128&d=identicon&r=PG&f=1", "display_name": "Omid CompSCI", "link": "https://stackoverflow.com/users/5366130/omid-compsci"}, "edited": false, "score": 0, "creation_date": 1478107456, "post_id": 40385932, "comment_id": 68023898, "body": "Not sure why but i didnt think about that solution, thanks."}], "answers": [{"tags": [], "owner": {"reputation": 5673, "user_id": 2376156, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/2s2R4.jpg?s=128&g=1", "display_name": "edtheprogrammerguy", "link": "https://stackoverflow.com/users/2376156/edtheprogrammerguy"}, "is_accepted": true, "score": 1, "last_activity_date": 1478107158, "creation_date": 1478107158, "answer_id": 40385983, "question_id": 40385932, "link": "https://stackoverflow.com/questions/40385932/c-how-to-access-the-dynamical-objects-attributes/40385983#40385983", "title": "C++ How to access the dynamical objects attributes", "body": "<p>Since <code>secondPerson</code> is a pointer do this: <code>secondPerson-&gt;printData();</code></p>\n"}], "owner": {"reputation": 211, "user_id": 6291931, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7aca7ecf839e315922ded2236a7b7003?s=128&d=identicon&r=PG&f=1", "display_name": "Tjatte", "link": "https://stackoverflow.com/users/6291931/tjatte"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 34, "favorite_count": 0, "accepted_answer_id": 40385983, "answer_count": 1, "score": 2, "last_activity_date": 1478107158, "creation_date": 1478107002, "question_id": 40385932, "link": "https://stackoverflow.com/questions/40385932/c-how-to-access-the-dynamical-objects-attributes", "title": "C++ How to access the dynamical objects attributes", "body": "<p>in my code, i've got two different objects. One \"normal\" object and one dynamical object: </p>\n\n<p>1.)</p>\n\n<pre><code>Person firstPerson(\"Bernd\",22);\n</code></pre>\n\n<p>2.)</p>\n\n<pre><code>Person* secondPerson = new Person(\"Andria\", 33);\n</code></pre>\n\n<p>Now i want to create a method that can print the objects values (Name, Age) on the console. The Method below is working for the first object(1.) but not for the second object (2.):</p>\n\n<pre><code>void Person::printData(){\n    std::cout &lt;&lt; \"Name: \" &lt;&lt; Person::getName() &lt;&lt; \" ; Age: \" &lt;&lt; Person::getAge() &lt;&lt; \".\" &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>How do i access the attributes of a dynamical created object? I know that i have to use \"->\" but i dont know how. \nAnd is there a way to create only one method that is working for both methods?\nLike:</p>\n\n<pre><code>firstPerson.printData();\nsecondPerson.printData();\n</code></pre>\n\n<p>Thanks in advance</p>\n"}, {"tags": ["c++", "mongodb", "mongo-cxx-driver"], "answers": [{"comments": [{"owner": {"reputation": 3444, "user_id": 531116, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/cc7ddd2dac7ecfefe2e25b68cc59f13f?s=128&d=identicon&r=PG", "display_name": "Dean Chen", "link": "https://stackoverflow.com/users/531116/dean-chen"}, "edited": false, "score": 0, "creation_date": 1478594096, "post_id": 40402969, "comment_id": 68208406, "body": "After restart my ArchLinux, no error output, the pkg-config works for me now. Thanks."}], "tags": [], "owner": {"reputation": 2855, "user_id": 11800, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d37a63484d9878cf6c07dcc08adda9e2?s=128&d=identicon&r=PG", "display_name": "xdg", "link": "https://stackoverflow.com/users/11800/xdg"}, "is_accepted": true, "score": 2, "last_activity_date": 1478180343, "creation_date": 1478180343, "answer_id": 40402969, "question_id": 40385679, "link": "https://stackoverflow.com/questions/40385679/pkg-config-error-when-compiling-mongodb-c-v3-test-code/40402969#40402969", "title": "pkg-config error when compiling mongodb c++ v3 test code", "body": "<p><a href=\"https://en.wikipedia.org/wiki/Pkg-config\" rel=\"nofollow noreferrer\">pkg-config</a> is a tool to locate headers and libraries and provide compiler flags for them.  It looks like you probably don't have it installed on your system.  Either install it, or remove the <code>pkg-config</code> stanza and specify your compiler flags manually based on where you installed mongocxx.</p>\n"}], "owner": {"reputation": 3444, "user_id": 531116, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/cc7ddd2dac7ecfefe2e25b68cc59f13f?s=128&d=identicon&r=PG", "display_name": "Dean Chen", "link": "https://stackoverflow.com/users/531116/dean-chen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 98, "favorite_count": 0, "accepted_answer_id": 40402969, "answer_count": 1, "score": 1, "last_activity_date": 1478355107, "creation_date": 1478106237, "last_edit_date": 1478355107, "question_id": 40385679, "link": "https://stackoverflow.com/questions/40385679/pkg-config-error-when-compiling-mongodb-c-v3-test-code", "title": "pkg-config error when compiling mongodb c++ v3 test code", "body": "<p>Following this <a href=\"https://mongodb.github.io/mongo-cxx-driver/mongocxx-v3/installation/\" rel=\"nofollow noreferrer\">guid</a></p>\n\n<p>I ran into an error:</p>\n\n<pre><code>export PKG_CONFIG_PATH=\"/usr/local/lib/pkgconfig\"\nc++ --std=c++11 test.cc -o test $(pkg-config --cflags --libs libmongocxx)\nc++: error: Symbol\u2019s function definition is void: pkg-config: No such file or directory\n</code></pre>\n\n<p>What's $(pkg-config --cflags --libs libmongocxx), never use this? How to fix this?</p>\n"}, {"tags": ["c++", "opengl"], "comments": [{"owner": {"reputation": 38487, "user_id": 2327517, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0Bulc.jpg?s=128&g=1", "display_name": "derhass", "link": "https://stackoverflow.com/users/2327517/derhass"}, "edited": false, "score": 1, "creation_date": 1478114330, "post_id": 40385567, "comment_id": 68027752, "body": "I&#39;m not sure if this &quot;trick&quot; still works, but just copying the original <code>opengl32.dll</code> from <code>Windows&#47;system32</code> (or <code>Windows&#47;SysWoW64</code> for the 32 bit version)  to the direcotry containing the executable used to be enough to trigger a fallback to the Microsoft GDI software renderer."}, {"owner": {"reputation": 47449, "user_id": 44729, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tyWaU.png?s=128&g=1", "display_name": "genpfault", "link": "https://stackoverflow.com/users/44729/genpfault"}, "edited": false, "score": 0, "creation_date": 1478117348, "post_id": 40385567, "comment_id": 68029433, "body": "Which aspect of the software rasterizer are you trying to exercise?  The slowness of software rasterization or the GL 1.1-ness?"}, {"owner": {"reputation": 173, "user_id": 3825739, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d69f2622ba93367618e9db169f3010c?s=128&d=identicon&r=PG&f=1", "display_name": "Roman Khvostikov", "link": "https://stackoverflow.com/users/3825739/roman-khvostikov"}, "edited": false, "score": 0, "creation_date": 1478117639, "post_id": 40385567, "comment_id": 68029573, "body": "No. I just want to <code>glGetString</code> do not return extension, <code>wglGetProcAddress</code> not return addresses, and so on"}], "owner": {"reputation": 173, "user_id": 3825739, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d69f2622ba93367618e9db169f3010c?s=128&d=identicon&r=PG&f=1", "display_name": "Roman Khvostikov", "link": "https://stackoverflow.com/users/3825739/roman-khvostikov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 238, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1478117421, "creation_date": 1478105894, "last_edit_date": 1478117421, "question_id": 40385567, "link": "https://stackoverflow.com/questions/40385567/create-opengl-context-without-hardware-acceleration", "title": "Create OpenGL context without hardware acceleration", "body": "<p>How do I force Windows/OpenGL to create a window context without hardware acceleration?</p>\n\n<p>Actually I want to simulate the situation when Windows provides only software 1.1 implementation (generic microsoft one). You get such a context when you use Remote Desktop Connection (with the exception of new nVidia drivers). My code must work on such a context, so I need an ease way to test it.</p>\n\n<p>I tried to play with <code>PIXELFORMATDESCRIPTOR</code> and its <code>dwFlags</code>. But specifying <code>PFD_GENERIC_FORMAT</code> instead of <code>PFD_SUPPORT_OPENGL</code> still returns pixel format with accelerated OpenGL.</p>\n\n<p>Is there any way to make life easier?</p>\n"}, {"tags": ["c++", "vector", "range", "erase"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1478106218, "post_id": 40385541, "comment_id": 68023127, "body": "Looks like you might need the erase remove idiom"}, {"owner": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "edited": false, "score": 0, "creation_date": 1478106218, "post_id": 40385541, "comment_id": 68023129, "body": "<code>numrange.resize(numrange.size()&#47;2);</code> will resize <code>numsize</code> to contain only the first <code>numrange.size()&#47;2</code> elements, destructing the latter half of the elements in the vector."}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 0, "creation_date": 1478106578, "post_id": 40385541, "comment_id": 68023357, "body": "When you say &quot;the vector size should also be reduced&quot;, do you mean &quot;reduce the value returned by<code>size</code>&quot;, or do you mean &quot;reduce the value returned by <code>size</code> and <code>capacity</code>&quot;?  The latter is harder (it was almost impossible in C++98, I think there are mechanisms in more recent versions)."}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 0, "creation_date": 1478106771, "post_id": 40385541, "comment_id": 68023484, "body": "The mechanism is <a href=\"http://en.cppreference.com/w/cpp/container/vector/shrink_to_fit\" rel=\"nofollow noreferrer\"><code>shrink_to_fit</code></a>"}, {"owner": {"reputation": 71, "user_id": 6810775, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d08f62b941f8db70b136c74d26e00be?s=128&d=identicon&r=PG&f=1", "display_name": "pusrob", "link": "https://stackoverflow.com/users/6810775/pusrob"}, "reply_to_user": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 0, "creation_date": 1478113773, "post_id": 40385541, "comment_id": 68027487, "body": "@Martin Bonner By &quot;the vector size should also be reduced&quot; I meant the value returned by numrange.size(); the capacity is not relevant at the moment."}, {"owner": {"reputation": 71, "user_id": 6810775, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d08f62b941f8db70b136c74d26e00be?s=128&d=identicon&r=PG&f=1", "display_name": "pusrob", "link": "https://stackoverflow.com/users/6810775/pusrob"}, "reply_to_user": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "edited": false, "score": 0, "creation_date": 1478113916, "post_id": 40385541, "comment_id": 68027569, "body": "@jaggedSpire Will this method enable me to remove the first half of elements if need be? I&#39;d like to have a very adaptable method to remove elements, which ultimately would enable me to remove any range from anywhere within the original vector. Thanks"}, {"owner": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "edited": false, "score": 0, "creation_date": 1478114052, "post_id": 40385541, "comment_id": 68027630, "body": "@pusrob nope, for that you&#39;ll want the <code>vector::erase</code> member function user2296177 mentions in their answer."}], "answers": [{"tags": [], "owner": {"reputation": 2725, "user_id": 2296177, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/854fa6632f9806fae99a1b49b4e07e08?s=128&d=identicon&r=PG", "display_name": "user2296177", "link": "https://stackoverflow.com/users/2296177/user2296177"}, "is_accepted": false, "score": 2, "last_activity_date": 1478108360, "last_edit_date": 1478108360, "creation_date": 1478106221, "answer_id": 40385673, "question_id": 40385541, "link": "https://stackoverflow.com/questions/40385541/how-to-remove-a-range-of-elements-of-a-vector-ever-changing-its-size-c/40385673#40385673", "title": "How to remove a range of elements of a vector ever changing its size (C++)?", "body": "<p><code>std::vector&lt;&gt;</code>'s <code>erase()</code> member function takes an iterator of type <code>std::vector&lt;&gt;::const_iterator</code>. You are supplying an <code>int</code> to the function, thus the call cannot be made as an <code>int</code> does not implicitly convert to <code>std::vector&lt;&gt;::const_iterator</code>.</p>\n\n<p>You need to offset an iterator in the following way:</p>\n\n<pre><code>numrange.erase(numrange.cbegin() + i);\n</code></pre>\n\n<p>However, please note that you initialize <code>i</code> to <code>vectsize</code>, which was itself initialized to <code>numrange.size()</code>. This means that you try to erase one element past the end of your range. You should use <code>numrange.size() - 1</code>.</p>\n\n<p>Additionally, there are overloads that erase a range to which you can apply the same offset principle:</p>\n\n<pre><code>numrange.erase(numrange.cbegin() + numrange.size() / 2, numrange.cend());\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1136, "user_id": 2999921, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0564f700a2fe14bc0aa8152a5b97925?s=128&d=identicon&r=PG", "display_name": "cwschmidt", "link": "https://stackoverflow.com/users/2999921/cwschmidt"}, "is_accepted": false, "score": 0, "last_activity_date": 1478106249, "creation_date": 1478106249, "answer_id": 40385683, "question_id": 40385541, "link": "https://stackoverflow.com/questions/40385541/how-to-remove-a-range-of-elements-of-a-vector-ever-changing-its-size-c/40385683#40385683", "title": "How to remove a range of elements of a vector ever changing its size (C++)?", "body": "<p>The method <code>erase</code> of <code>std::vector</code> expects an iterator instead of an <code>int</code> index as argument.</p>\n\n<p>You can use the begin-iterator and just add the amount of elements to skip to reach the desired iterator:</p>\n\n<pre><code>for (int i=vectsize; i&gt;=(vectsize/2); --i) {numrange.erase(numrange.begin()+i);}\n</code></pre>\n"}], "owner": {"reputation": 71, "user_id": 6810775, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d08f62b941f8db70b136c74d26e00be?s=128&d=identicon&r=PG&f=1", "display_name": "pusrob", "link": "https://stackoverflow.com/users/6810775/pusrob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 554, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1478108360, "creation_date": 1478105824, "question_id": 40385541, "link": "https://stackoverflow.com/questions/40385541/how-to-remove-a-range-of-elements-of-a-vector-ever-changing-its-size-c", "title": "How to remove a range of elements of a vector ever changing its size (C++)?", "body": "<p>I have a rather interesting problem (interesting to me anyway, being a beginner and all): In C++ one can rather easily grow a vector with push_back(), which one can then simply put into a loop to grow as much as needed. The problem is, that I found no similar easy functionality for reducing its size. What I really want to do, is to have a vector with a predefined size,  and then let's say remove the second half of it entirely (not just the elements contained, but the vector size should also be reduced). An example:</p>\n\n<pre><code>vector&lt;int&gt; numrange;\nfor (int i=0; i&lt;=100; ++i) {numrange.push_back(i);}\n</code></pre>\n\n<p>This works perfectly for growing the vector and filling it with a numbers. But this doesn't seem to be allowed:</p>\n\n<pre><code>int vectsize=numrange.size();\nfor (int i=vectsize; i&gt;=(vectsize/2); --i) {numrange.erase(i);}\n</code></pre>\n\n<p>You see, I want to erase every element above 50, but it won't work. Something to do with \"no known conversion from int to const iterator\"</p>\n\n<p>Thanks for the help.</p>\n"}, {"tags": ["c++", "c++11", "variadic-templates"], "comments": [{"owner": {"reputation": 19910, "user_id": 1621391, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ec331963e9d60347c1e80e294b14940c?s=128&d=identicon&r=PG", "display_name": "WhiZTiM", "link": "https://stackoverflow.com/users/1621391/whiztim"}, "edited": false, "score": 2, "creation_date": 1478105314, "post_id": 40385347, "comment_id": 68022550, "body": "Missing <code>typename</code>?"}, {"owner": {"reputation": 9690, "user_id": 1707560, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/8VK4M.jpg?s=128&g=1", "display_name": "imreal", "link": "https://stackoverflow.com/users/1707560/imreal"}, "edited": false, "score": 1, "creation_date": 1478105423, "post_id": 40385347, "comment_id": 68022616, "body": "When making &quot;my code doesn&#39;t compile&quot; questions it is always better to paste the actual errors."}], "answers": [{"tags": [], "owner": {"reputation": 19910, "user_id": 1621391, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ec331963e9d60347c1e80e294b14940c?s=128&d=identicon&r=PG", "display_name": "WhiZTiM", "link": "https://stackoverflow.com/users/1621391/whiztim"}, "is_accepted": true, "score": 1, "last_activity_date": 1478105461, "creation_date": 1478105461, "answer_id": 40385419, "question_id": 40385347, "link": "https://stackoverflow.com/questions/40385347/making-a-tuple-of-nested-types/40385419#40385419", "title": "Making a tuple of nested types", "body": "<p><code>T</code> is a dependent name, you need to add <code>typename</code>. like this:</p>\n\n<pre><code>template&lt;typename ...T&gt;\nstruct my_tuple\n{\n     typedef std::tuple&lt;typename T::value_type...&gt; tuple_type;\n};\n</code></pre>\n"}], "owner": {"reputation": 2178, "user_id": 3209505, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/89cdc5a35bbffb1f0dbc1a1026642d2c?s=128&d=identicon&r=PG&f=1", "display_name": "Evgeniy", "link": "https://stackoverflow.com/users/3209505/evgeniy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "closed_date": 1478105366, "accepted_answer_id": 40385419, "answer_count": 1, "score": 0, "last_activity_date": 1478105461, "creation_date": 1478105244, "question_id": 40385347, "link": "https://stackoverflow.com/questions/40385347/making-a-tuple-of-nested-types", "closed_reason": "Duplicate", "title": "Making a tuple of nested types", "body": "<p>I have some classes A and B:</p>\n\n<pre><code>struct A\n{\n    typedef int value_type;\n};\nstruct B\n{\n    typedef float value_type;\n};\n</code></pre>\n\n<p>I want to make a tuple of A::value_type and B::value type via variadic template.\nI am expecting something like this:</p>\n\n<pre><code>template&lt;typename ...T&gt;\nstruct my_tuple\n{\n     typedef std::tuple&lt;T::value_type...&gt; tuple_type;\n};\n</code></pre>\n\n<p>This doesnt compile. How can I make such kind of tuple?</p>\n"}, {"tags": ["c++", "arrays", "pointers"], "comments": [{"owner": {"reputation": 6596, "user_id": 5021321, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/29f10a1b457e63d44e3a221e89e32c17?s=128&d=identicon&r=PG", "display_name": "Eli Sadoff", "link": "https://stackoverflow.com/users/5021321/eli-sadoff"}, "edited": false, "score": 0, "creation_date": 1478105025, "post_id": 40385237, "comment_id": 68022380, "body": "Where are you getting the error? <code>new Car</code> seems like invalid syntax."}, {"owner": {"reputation": 1, "user_id": 7091498, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d04b3a7d8ebde575cd97e531a1e53aae?s=128&d=identicon&r=PG&f=1", "display_name": "BlackHawk", "link": "https://stackoverflow.com/users/7091498/blackhawk"}, "reply_to_user": {"reputation": 6596, "user_id": 5021321, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/29f10a1b457e63d44e3a221e89e32c17?s=128&d=identicon&r=PG", "display_name": "Eli Sadoff", "link": "https://stackoverflow.com/users/5021321/eli-sadoff"}, "edited": false, "score": 0, "creation_date": 1478105222, "post_id": 40385237, "comment_id": 68022485, "body": "I get error when I try to pass reference of &#39;fresh&#39; to &#39;number-1&#39; index of &#39;cars&#39; array in last line of function."}, {"owner": {"reputation": 6596, "user_id": 5021321, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/29f10a1b457e63d44e3a221e89e32c17?s=128&d=identicon&r=PG", "display_name": "Eli Sadoff", "link": "https://stackoverflow.com/users/5021321/eli-sadoff"}, "edited": false, "score": 0, "creation_date": 1478105294, "post_id": 40385237, "comment_id": 68022537, "body": "Did you <code>malloc</code> cars before you passed it in as a pointer?"}, {"owner": {"reputation": 31823, "user_id": 1960455, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/d22bdc5c04b48a9054586eb64174ea99?s=128&d=identicon&r=PG", "display_name": "t.niese", "link": "https://stackoverflow.com/users/1960455/t-niese"}, "edited": false, "score": 1, "creation_date": 1478105335, "post_id": 40385237, "comment_id": 68022564, "body": "The compiler should print an error for <code>delete[number-1]</code> that it is not valid (and for <code>Cars *fresh = new Car;</code> because <code>Cars</code> and <code>Car</code> do not match), and would not compile as of that. Why do you assume that you get an error for <code>cars[number-1] = fresh</code>? Anyway in c++ you should use standard containers like <code>std::list</code>, <code>std::vector</code> or <code>std::array</code>."}, {"owner": {"reputation": 1014, "user_id": 6047952, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a56a0a74a9848b8796170a9bce83e9fa?s=128&d=identicon&r=PG", "display_name": "infixed", "link": "https://stackoverflow.com/users/6047952/infixed"}, "edited": false, "score": 0, "creation_date": 1478105421, "post_id": 40385237, "comment_id": 68022613, "body": "Your compiler lets you <code>delete[number-1] cars;</code> ?   And I&#39;m pretty sure you are not done with <code>cars</code> at that point, so why are you returning what it points to to the memory pool?"}, {"owner": {"reputation": 1, "user_id": 7091498, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d04b3a7d8ebde575cd97e531a1e53aae?s=128&d=identicon&r=PG&f=1", "display_name": "BlackHawk", "link": "https://stackoverflow.com/users/7091498/blackhawk"}, "edited": false, "score": 0, "creation_date": 1478105587, "post_id": 40385237, "comment_id": 68022708, "body": "Sorry, I made mistake &#39;fresh&#39; is of type Car."}, {"owner": {"reputation": 1, "user_id": 7091498, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d04b3a7d8ebde575cd97e531a1e53aae?s=128&d=identicon&r=PG&f=1", "display_name": "BlackHawk", "link": "https://stackoverflow.com/users/7091498/blackhawk"}, "edited": false, "score": 0, "creation_date": 1478106016, "post_id": 40385237, "comment_id": 68023001, "body": "What I basically want to do is to add a new object to the very last index of array of pointers to objects <code>cars</code>. I might be wrong with implementation, so  if somebody would give me a hint on how to fix it or how to do it correctly I would be thankful."}, {"owner": {"reputation": 1014, "user_id": 6047952, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a56a0a74a9848b8796170a9bce83e9fa?s=128&d=identicon&r=PG", "display_name": "infixed", "link": "https://stackoverflow.com/users/6047952/infixed"}, "edited": false, "score": 0, "creation_date": 1478115105, "post_id": 40385237, "comment_id": 68028193, "body": "Unless you are really wed to the idea of using a C style array, @Genarito  was trying to direct you to a better way, like using <code>std::vector</code> as a container to hold your Car objects"}], "answers": [{"comments": [{"owner": {"reputation": 1014, "user_id": 6047952, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a56a0a74a9848b8796170a9bce83e9fa?s=128&d=identicon&r=PG", "display_name": "infixed", "link": "https://stackoverflow.com/users/6047952/infixed"}, "edited": false, "score": 0, "creation_date": 1478115363, "post_id": 40385310, "comment_id": 68028346, "body": "Though things might get more complex if a <code>Car</code> is not a PlainOldData type object"}], "tags": [], "owner": {"reputation": 1899, "user_id": 7058363, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zppXn.jpg?s=128&g=1", "display_name": "Genarito", "link": "https://stackoverflow.com/users/7058363/genarito"}, "is_accepted": false, "score": -1, "last_activity_date": 1478105135, "creation_date": 1478105135, "answer_id": 40385310, "question_id": 40385237, "link": "https://stackoverflow.com/questions/40385237/adding-object-to-array-of-pointers-to-objects/40385310#40385310", "title": "Adding object to array of pointers to objects", "body": "<p>It could be better if you use </p>\n\n<pre><code>std::vector&lt;Car&gt; cars;\n</code></pre>\n\n<p>So you could do the next:</p>\n\n<pre><code>cars.push_back(fresh);\n</code></pre>\n\n<p>And that's all. Sorry about my english</p>\n"}, {"tags": [], "owner": {"reputation": 1239, "user_id": 2776571, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/vkCQf.jpg?s=128&g=1", "display_name": "Pabitra Dash", "link": "https://stackoverflow.com/users/2776571/pabitra-dash"}, "is_accepted": false, "score": 0, "last_activity_date": 1478105753, "creation_date": 1478105753, "answer_id": 40385522, "question_id": 40385237, "link": "https://stackoverflow.com/questions/40385237/adding-object-to-array-of-pointers-to-objects/40385522#40385522", "title": "Adding object to array of pointers to objects", "body": "<p>No need of delete statement. The code would be like this if you already allocated memory for 'cars'.</p>\n\n<pre><code>Car *fresh = new Car;\ncars[number-1] = fresh; //number here should be index starting from 1 not number of Car objects\n</code></pre>\n\n<p>The cars would be initialised like following before calling method add().</p>\n\n<pre><code>Car ** cars = new (Car *)[number]; \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1438, "user_id": 3732337, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5LzGs.jpg?s=128&g=1", "display_name": "HazemGomaa", "link": "https://stackoverflow.com/users/3732337/hazemgomaa"}, "is_accepted": false, "score": 0, "last_activity_date": 1478117470, "last_edit_date": 1478117470, "creation_date": 1478114634, "answer_id": 40388124, "question_id": 40385237, "link": "https://stackoverflow.com/questions/40385237/adding-object-to-array-of-pointers-to-objects/40388124#40388124", "title": "Adding object to array of pointers to objects", "body": "<p>if you need to delete the allocated memory for <code>cars[number-1]</code> use </p>\n\n<pre><code>delete cars[number-1];\n</code></pre>\n\n<p>Otherwise, you don't need to call <code>new</code> twice to allocate <code>fresh</code>.\nSo, the following should work</p>\n\n<pre><code>void add(Car **cars, int number) {\n  Car *fresh = new Car;\n\n  cout &lt;&lt; \"Enter the name of your car.\" &lt;&lt; endl;\n  cin &gt;&gt; fresh-&gt;name;\n\n  delete cars[number-1];\n  cars[number-1] = fresh; \n}\n</code></pre>\n\n<p>and you need to make sure that <code>number</code> is the size of your cars array.</p>\n"}], "owner": {"reputation": 1, "user_id": 7091498, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d04b3a7d8ebde575cd97e531a1e53aae?s=128&d=identicon&r=PG&f=1", "display_name": "BlackHawk", "link": "https://stackoverflow.com/users/7091498/blackhawk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 97, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1478117470, "creation_date": 1478104897, "last_edit_date": 1478105545, "question_id": 40385237, "link": "https://stackoverflow.com/questions/40385237/adding-object-to-array-of-pointers-to-objects", "title": "Adding object to array of pointers to objects", "body": "<p>I have problem with adding object to array of pointers of objects. Here's a function I'll be talking about:</p>\n\n<pre><code>void add(Car **cars, int number) {\n    Car *fresh = new Car;\n    fresh = new Car;\n    cout &lt;&lt; \"Enter the name of your car.\" &lt;&lt; endl;\n    cin &gt;&gt; fresh-&gt;name;\n    cout &lt;&lt; \"Enter max velocity of your car.\" &lt;&lt; endl;\n    cin &gt;&gt; fresh-&gt;maxV;\n    cout &lt;&lt; \"Enter weight of your car.\" &lt;&lt; endl;\n    cin &gt;&gt; fresh-&gt;weight;\n    delete[number-1] cars;\n    cars[number-1] = fresh; // here's something wrong\n}\n</code></pre>\n\n<p>I allocated memory for <code>number</code>-of cars in array of pointers <code>**cars</code> and then I try to add new object <code>fresh</code> at the end of array, firstly deleting memory in last index of array of pointers of objects and then passing reference to last index of array, but I get an error. I tried to solve problem myself, by I didn't found similiar topic in web. I hope somebody will guide me how to solve it. Thanks for help.</p>\n"}, {"tags": ["c++", "mfc"], "comments": [{"owner": {"reputation": 1778, "user_id": 2440728, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1fWyQ.jpg?s=128&g=1", "display_name": "VuVirt", "link": "https://stackoverflow.com/users/2440728/vuvirt"}, "edited": false, "score": 2, "creation_date": 1478106740, "post_id": 40385203, "comment_id": 68023462, "body": "Try to add CToolBar myToolBar as a member variable of your CMainFrame class, the same way as m_wndToolBar."}, {"owner": {"reputation": 109, "user_id": 6135601, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/113be28bd4953c74f74156dbfbe661b8?s=128&d=identicon&r=PG&f=1", "display_name": "StevoStephenson", "link": "https://stackoverflow.com/users/6135601/stevostephenson"}, "reply_to_user": {"reputation": 1778, "user_id": 2440728, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1fWyQ.jpg?s=128&g=1", "display_name": "VuVirt", "link": "https://stackoverflow.com/users/2440728/vuvirt"}, "edited": false, "score": 0, "creation_date": 1478165096, "post_id": 40385203, "comment_id": 68045758, "body": "@VuVirt Top man that worked... What was the difference between using CToolBar myToolBar like I had compared to making it a member variable? Also would you like to make that a proper answer so I can give it a tick?"}], "answers": [{"tags": [], "owner": {"reputation": 1778, "user_id": 2440728, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1fWyQ.jpg?s=128&g=1", "display_name": "VuVirt", "link": "https://stackoverflow.com/users/2440728/vuvirt"}, "is_accepted": true, "score": 1, "last_activity_date": 1478165219, "creation_date": 1478165219, "answer_id": 40397878, "question_id": 40385203, "link": "https://stackoverflow.com/questions/40385203/how-to-add-a-second-toolbar-into-mainframe/40397878#40397878", "title": "How To Add A Second Toolbar Into Mainframe?", "body": "<p>You need to add CToolBar myToolBar as a member variable of your CMainFrame class, the same way as m_wndToolBar. Otherwise, it gets destroyed if you define it as a local variable after the OnCreate exits.</p>\n"}], "owner": {"reputation": 109, "user_id": 6135601, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/113be28bd4953c74f74156dbfbe661b8?s=128&d=identicon&r=PG&f=1", "display_name": "StevoStephenson", "link": "https://stackoverflow.com/users/6135601/stevostephenson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 279, "favorite_count": 0, "accepted_answer_id": 40397878, "answer_count": 1, "score": 1, "last_activity_date": 1478165219, "creation_date": 1478104729, "last_edit_date": 1495541957, "question_id": 40385203, "link": "https://stackoverflow.com/questions/40385203/how-to-add-a-second-toolbar-into-mainframe", "title": "How To Add A Second Toolbar Into Mainframe?", "body": "<p>I would like to add a second toolbar in my main frame window to sit under the existing toolbar.</p>\n\n<p>Reading the following tutorials:<br>\n<a href=\"http://forums.codeguru.com/showthread.php?495887-Add-a-toolbar-to-an-MFC-application\" rel=\"nofollow noreferrer\">http://forums.codeguru.com/showthread.php?495887-Add-a-toolbar-to-an-MFC-application</a></p>\n\n<p><a href=\"http://www.codersource.net/2010/01/30/mfc-tutorial-toolbars/\" rel=\"nofollow noreferrer\">http://www.codersource.net/2010/01/30/mfc-tutorial-toolbars/</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/6448702/mfc-toolbar-on-dialog\">MFC Toolbar on Dialog?</a></p>\n\n<p>I have come to a similar conclusion to this unanswered thread:<br>\n<a href=\"https://stackoverflow.com/questions/35736580/how-to-add-a-second-toolbar-to-an-mfc-application-so-that-the-toolbar-is-added-o\">https://stackoverflow.com/questions/35736580/how-to-add-a-second-toolbar-to-an-mfc-application-so-that-the-toolbar-is-added-o</a></p>\n\n<p>This is my code:</p>\n\n<pre><code>int CMainFrame::OnCreate(LPCREATESTRUCT lpCreateStruct)\n{\n    if (CFrameWnd::OnCreate(lpCreateStruct) == -1)\n        return -1;\n    // create a view to occupy the client area of the frame\n    if (!m_wndView.Create(NULL, NULL, AFX_WS_DEFAULT_VIEW,\n        CRect(0, 0, 0, 0), this, AFX_IDW_PANE_FIRST, NULL))\n    {\n        TRACE0(\"Failed to create view window\\n\");\n        return -1;\n    }\n    if (!m_wndToolBar.CreateEx(this, TBSTYLE_FLAT, WS_CHILD | WS_VISIBLE | CBRS_TOP\n    | CBRS_GRIPPER | CBRS_TOOLTIPS | CBRS_FLYBY | CBRS_SIZE_DYNAMIC) ||\n    !m_wndToolBar.LoadToolBar(IDR_MAINFRAME))\n{\n    TRACE0(\"Failed to create toolbar\\n\");\n    return -1;      // fail to create\n}\nif (!m_wndStatusBar.Create(this) ||\n    !m_wndStatusBar.SetIndicators(indicators,\n      sizeof(indicators)/sizeof(UINT)))\n{\n    TRACE0(\"Failed to create status bar\\n\");\n    return -1;      // fail to create\n}\n\nm_wndStatusBar.SetPaneInfo(EWF_PANE_INDEX, ID_SEPARATOR, SBPS_NORMAL, EWF_PANE_WIDTH);\n\nfor (int i=0;i&lt;5; i++) {\n    // Change Status Bar style to make it Owner-drawn\n    m_wndStatusBar.GetStatusBarCtrl().SetText(\"\", i, SBT_OWNERDRAW); \n}\n\nCToolBar myToolBar;\n\nif (!myToolBar.CreateEx(this, TBSTYLE_FLAT, WS_CHILD | WS_VISIBLE | CBRS_TOP\n    | CBRS_GRIPPER | CBRS_TOOLTIPS | CBRS_FLYBY | CBRS_SIZE_DYNAMIC) ||\n    !myToolBar.LoadToolBar(IDR_MAINFRAME_B))\n{\n    TRACE0(\"Failed to create toolbar\\n\");   \n    return -1; // fail to create\n}\n\n\nreturn 0;\n}\n</code></pre>\n\n<p>I have added:</p>\n\n<pre><code>CToolBar myToolBar;\n\nif (!myToolBar.CreateEx(this, TBSTYLE_FLAT, WS_CHILD | WS_VISIBLE | CBRS_TOP\n    | CBRS_GRIPPER | CBRS_TOOLTIPS | CBRS_FLYBY | CBRS_SIZE_DYNAMIC) ||\n    !myToolBar.LoadToolBar(IDR_MAINFRAME_B))\n{\n    TRACE0(\"Failed to create toolbar\\n\");   \n    return -1; // fail to create\n}\n</code></pre>\n\n<p>At the bottom for my second toolbar but it does not appear when the app is opened and it compiles with no errors.<br>\nIn comparison to the already supplied toolbar which is called from <code>InitInstance()</code> by <code>pFrame-&gt;LoadFrame(IDR_MAINFRAME, WS_OVERLAPPEDWINDOW | FWS_ADDTOTITLE , NULL, NULL);</code><br>\nIf I call this <code>pFrame-&gt;LoadFrame</code> with my second toolbar in the next line the app will not load all together.<br>\nHow do I need to call my second toolbar?<br>\nHave I missed something completely?  </p>\n"}, {"tags": ["c++", "qt", "c++11", "virtual", "operator-keyword"], "comments": [{"owner": {"reputation": 8788, "user_id": 6866309, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/CFXxE.jpg?s=128&g=1", "display_name": "Pavan Chandaka", "link": "https://stackoverflow.com/users/6866309/pavan-chandaka"}, "edited": false, "score": 0, "creation_date": 1478104638, "post_id": 40385110, "comment_id": 68022148, "body": "looks like function object."}, {"owner": {"reputation": 26796, "user_id": 4834, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/6a04e124482c3750617f8dacde3388ce?s=128&d=identicon&r=PG", "display_name": "quamrana", "link": "https://stackoverflow.com/users/4834/quamrana"}, "edited": false, "score": 0, "creation_date": 1478112010, "post_id": 40385110, "comment_id": 68026565, "body": "It looks like <code>Resizer</code> is a way of having a callback so that the client of <code>SizeGripItem</code> can have access to the <code>rect_</code> member when one of the <code>set_x_</code> member functions (which call <code>doResize()</code>) are called."}], "answers": [{"comments": [{"owner": {"reputation": 8788, "user_id": 6866309, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/CFXxE.jpg?s=128&g=1", "display_name": "Pavan Chandaka", "link": "https://stackoverflow.com/users/6866309/pavan-chandaka"}, "edited": false, "score": 0, "creation_date": 1478105819, "post_id": 40385450, "comment_id": 68022877, "body": "Yes. I am missing two things. One, it is declared as pure virtual, so some where there should be overridden version before usage. And more over these function object types are mostly used as predicate (like we use in STL functions), but here it is used as just normal function."}, {"owner": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "reply_to_user": {"reputation": 8788, "user_id": 6866309, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/CFXxE.jpg?s=128&g=1", "display_name": "Pavan Chandaka", "link": "https://stackoverflow.com/users/6866309/pavan-chandaka"}, "edited": false, "score": 0, "creation_date": 1478106042, "post_id": 40385450, "comment_id": 68023017, "body": "@PAVANCHANDAKA Pure virtual methods are a feature of the language. I suppose it wasn&#39;t possible to give a proper definition and the library designer chosen to let the users define it. The other question is questionable, normal functions can be used as predicates, so I don&#39;t get the problem."}], "tags": [], "owner": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "is_accepted": true, "score": 3, "last_activity_date": 1478105820, "last_edit_date": 1478105820, "creation_date": 1478105566, "answer_id": 40385450, "question_id": 40385110, "link": "https://stackoverflow.com/questions/40385110/what-is-the-purpose-of-a-virtual-operator-here/40385450#40385450", "title": "What is the purpose of a virtual operator ()() here?", "body": "<p>Regarding point 2, consider this line:</p>\n\n<pre><code>(*resizer_)(parentItem(), rect_);\n</code></pre>\n\n<p><code>resizer_</code> is likely a pointer to an object of an unknown type <code>T</code>, thus <code>*resizer</code> is a reference to an object of the same type <code>T</code>.<br>\nIf it has a definition for <code>operator()</code> that accepts two parameters having types (let me say) <code>decltype(parentItem())</code> and <code>decltype(rect_)</code>, you can invoke it as it happens in the example.<br>\nIn other terms, it's equivalent to:</p>\n\n<pre><code>resizer_-&gt;operator()(parentItem(), rect_);\n</code></pre>\n\n<p>It doesn't modify the value of <code>resizer_</code> at all.</p>\n\n<blockquote>\n  <p>Can someone provide insight as to why this operator is necessary or useful?</p>\n</blockquote>\n\n<p>Well, it mostly depends on the context and the actual problem it aims to solve.<br>\nIt's hard to say from a line of code.<br>\nIf you find it useless, don't use it. That's all.</p>\n"}, {"comments": [{"owner": {"reputation": 44162, "user_id": 991484, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/fc34739487a5e7e115acdbadf95c8fb3?s=128&d=identicon&r=PG", "display_name": "dtech", "link": "https://stackoverflow.com/users/991484/dtech"}, "edited": false, "score": 0, "creation_date": 1478108738, "post_id": 40386325, "comment_id": 68024632, "body": "Technically, it should be safe to not have a virtual destructor if you have nothing to destruct."}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "reply_to_user": {"reputation": 44162, "user_id": 991484, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/fc34739487a5e7e115acdbadf95c8fb3?s=128&d=identicon&r=PG", "display_name": "dtech", "link": "https://stackoverflow.com/users/991484/dtech"}, "edited": false, "score": 3, "creation_date": 1478112141, "post_id": 40386325, "comment_id": 68026631, "body": "@ddriver That class is polymorphic and abstract: it&#39;s <b>meant</b> to be overloaded. The absence of a virtual destructor is an error in each and every such class. There&#39;s no point to using a functor (instead of a function pointer) if the functor can&#39;t hold state. Since a functor can hold state (it&#39;s an object for a reason!), it must have a virtual destructor. No ifs nor buts about it. In C++, a functor is an idiom for a callable that can hold state. If you want to force a stateless callable, use a function pointer: that&#39;s an idiom that clearly indicates &quot;no state allowed&quot;."}, {"owner": {"reputation": 44162, "user_id": 991484, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/fc34739487a5e7e115acdbadf95c8fb3?s=128&d=identicon&r=PG", "display_name": "dtech", "link": "https://stackoverflow.com/users/991484/dtech"}, "edited": false, "score": 0, "creation_date": 1478113495, "post_id": 40386325, "comment_id": 68027337, "body": "It is in theory undefined behavior, but in practice what ends up happening is the destructor for the type pointer is being called, that would be a destructor for a base class. If the derived adds no extra members and just overrides functionality then no members will remain non-destructed. Freeing the memory is not an issue either, as the fragment size is usually stored first thing in the fragment itself. Overloading does not necessary imply adding members. It can override functionality, or add functionality, in both cases running the base instead of derived destructor will be practically OK."}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "reply_to_user": {"reputation": 44162, "user_id": 991484, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/fc34739487a5e7e115acdbadf95c8fb3?s=128&d=identicon&r=PG", "display_name": "dtech", "link": "https://stackoverflow.com/users/991484/dtech"}, "edited": false, "score": 3, "creation_date": 1478113782, "post_id": 40386325, "comment_id": 68027497, "body": "@ddriver No, it will never be OK. A polymorphic functor is a <b>contract</b> between you and your user. By not providing a virtual destructor, you&#39;re breaking your end of the contract. Now you might argue that the absence of the destructor specifies that the functor is not meant to have any data members: if so, then why on Earth would you make it a functor and not a function pointer. So yeah, this is definitely broken, and there&#39;s nothing theoretical about it. As a user of such an API, I&#39;d be mighty pissed. Polymorphic functors are an idiom, and you&#39;re supposed to use it correctly in your design."}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "reply_to_user": {"reputation": 44162, "user_id": 991484, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/fc34739487a5e7e115acdbadf95c8fb3?s=128&d=identicon&r=PG", "display_name": "dtech", "link": "https://stackoverflow.com/users/991484/dtech"}, "edited": false, "score": 0, "creation_date": 1478113951, "post_id": 40386325, "comment_id": 68027581, "body": "@ddriver Think of it like this: C++ idioms are no different than idioms in a natural language like English. Suppose someone were to keep saying &quot;add insult to laceration&quot; instead of &quot;add insult to injury&quot;. You might chuckle, but it&#39;s grating, and it&#39;s not correct. Such idioms carry with them the range of expected uses: a context of applicability. To anyone proficient, a polymorphic functor has certain meaning, a certain expectation. A key part of that expectation is that it is stateful in a <b>useful</b> manner. Otherwise it&#39;d be a stateless function pointer without a <code>void*</code> parameter."}, {"owner": {"reputation": 44162, "user_id": 991484, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/fc34739487a5e7e115acdbadf95c8fb3?s=128&d=identicon&r=PG", "display_name": "dtech", "link": "https://stackoverflow.com/users/991484/dtech"}, "edited": false, "score": 0, "creation_date": 1478115206, "post_id": 40386325, "comment_id": 68028243, "body": "It would only be a problem if a derived type introduces new members. If the &quot;state&quot; members are defined in the base class, and the derived only overrides functionality, then running the base class destructor for a derived instance will not leave any members non-destructed."}, {"owner": {"reputation": 459, "user_id": 5095372, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/10152956463043461/picture?type=large", "display_name": "Graeme Rock", "link": "https://stackoverflow.com/users/5095372/graeme-rock"}, "edited": false, "score": 0, "creation_date": 1478116074, "post_id": 40386325, "comment_id": 68028745, "body": "@Kuba I added the virtual destructor as you recommended, and it made a number of warnings I was receiving cease and desist. (Thanks!) Other than that, I see no change in functionality overall - why is this good bookkeeping again?"}, {"owner": {"reputation": 13070, "user_id": 1639256, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8KYbp.jpg?s=128&g=1", "display_name": "Oktalist", "link": "https://stackoverflow.com/users/1639256/oktalist"}, "reply_to_user": {"reputation": 459, "user_id": 5095372, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/10152956463043461/picture?type=large", "display_name": "Graeme Rock", "link": "https://stackoverflow.com/users/5095372/graeme-rock"}, "edited": false, "score": 0, "creation_date": 1478126119, "post_id": 40386325, "comment_id": 68033617, "body": "@GraemeRock The <code>SizeGripItem</code> destructor does <code>delete resizer_;</code>. Without a virtual destructor, this will not find the destructor of the subclass of <code>Resizer</code>, and is undefined behaviour. Avoidance of raw <code>delete</code> is another good reason to use <code>std::function</code> here."}, {"owner": {"reputation": 583, "user_id": 1948525, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd5bccd182ec2401b4f8e031067b45d1?s=128&d=identicon&r=PG", "display_name": "SJHowe", "link": "https://stackoverflow.com/users/1948525/sjhowe"}, "edited": false, "score": 0, "creation_date": 1478213899, "post_id": 40386325, "comment_id": 68075370, "body": "@Kuba You are incorrect. The standard makes it clear that virtual destructor is only needed if you new a Derived object and assign it to a Base pointer or reference and later apply delete to the Base pointer. If the Base destructor is not virtual, then it undefined behaviour. The standard is very clear on that. But if you create objects on the stack and not  the heap, the Base destructor can be non-virtual and that is fine,"}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "reply_to_user": {"reputation": 583, "user_id": 1948525, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd5bccd182ec2401b4f8e031067b45d1?s=128&d=identicon&r=PG", "display_name": "SJHowe", "link": "https://stackoverflow.com/users/1948525/sjhowe"}, "edited": false, "score": 0, "creation_date": 1478265712, "post_id": 40386325, "comment_id": 68095673, "body": "@SJHowe 1. We&#39;re talking of specific code here, and that code does not allow a non-dynamically-allocated instance of <code>Resizer</code>. 2. The standard only defines what&#39;s legal, not what&#39;s a good API. An API that <b>arbitrarily</b> restricts the functionality of a polymorphic functor is still broken, even if under such arbitrary restrictions it would not invoke undefined behavior."}], "tags": [], "owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "is_accepted": false, "score": 4, "last_activity_date": 1478111960, "last_edit_date": 1495541234, "creation_date": 1478108336, "answer_id": 40386325, "question_id": 40385110, "link": "https://stackoverflow.com/questions/40385110/what-is-the-purpose-of-a-virtual-operator-here/40386325#40386325", "title": "What is the purpose of a virtual operator ()() here?", "body": "<p>The <code>Resizer</code> is a <a href=\"https://stackoverflow.com/q/461203/1329652\">broken</a> attempt at a <a href=\"https://stackoverflow.com/q/30047137/1329652\">polymorphic functor</a> (function object). Such an idiom was useful before C++11. It's broken because such functors are useless without a virtual destructor. It should have looked as follows:</p>\n\n<pre><code>class Resizer {\npublic:\n  virtual void operator()(QGraphicsItem* item, const QRectF&amp; rect) = 0;\n  virtual ~Resizer() {}\n};\n</code></pre>\n\n<p>Such objects are callable:</p>\n\n<pre><code>void invokeResizer(Resizer * resizer, QGraphicsItem * item, const QRectF &amp; rect) {\n  (*resizer)(item, rect);\n}\n</code></pre>\n\n<p>The above will execute the method <code>operator()(QGraphicsItem*,const QRectF&amp;)</code> on the <code>resizer</code> object.</p>\n\n<p>In modern code, instead of such hacks, one should use <code>std::function&lt;void(QGraphicsItem*, const QRectF &amp;)&gt;</code>.</p>\n"}], "owner": {"reputation": 459, "user_id": 5095372, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/10152956463043461/picture?type=large", "display_name": "Graeme Rock", "link": "https://stackoverflow.com/users/5095372/graeme-rock"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 453, "favorite_count": 0, "accepted_answer_id": 40385450, "answer_count": 2, "score": 4, "last_activity_date": 1478111960, "creation_date": 1478104464, "last_edit_date": 1478108383, "question_id": 40385110, "link": "https://stackoverflow.com/questions/40385110/what-is-the-purpose-of-a-virtual-operator-here", "title": "What is the purpose of a virtual operator ()() here?", "body": "<p>I'm trying to modify <a href=\"https://github.com/cesarbs/sizegripitem\" rel=\"nofollow noreferrer\">code I found</a>, but I'm blocked by my lack of understanding of the purpose, importance, and/or relevance of this virtual operator:</p>\n\n<ol>\n<li>Can someone provide insight as to why this operator is necessary or useful? </li>\n<li>Am I right in thinking it takes <code>parentItem()</code>, <code>rect_</code>, and <code>resizer_</code> as parameters, then modifies the value of <code>resizer_</code>?</li>\n</ol>\n\n<p><strong>Constructor in .h:</strong> </p>\n\n<p><code>virtual void operator()(QGraphicsItem* item, const QRectF&amp; rect) = 0;</code></p>\n\n<p><strong>Call in .cpp:</strong> </p>\n\n<p><code>(*resizer_)(parentItem(), rect_);</code></p>\n\n<p><strong>Trimmed context for the constructor for reference:</strong></p>\n\n<pre><code>class SizeGripItem : public QGraphicsItem\n{\n    private:\n\n        class HandleItem : public QGraphicsRectItem\n        {\n            public:\n                HandleItem(int positionFlags, SizeGripItem* parent);\n\n            private:    \n                SizeGripItem* parent_;\n        };\n\n    public:\n        class Resizer\n        {\n            public:\n                virtual void operator()(QGraphicsItem* item,\n                                        const QRectF&amp; rect) = 0;\n        };\n\n        SizeGripItem(Resizer* resizer = 0, QGraphicsItem* parent = 0);\n        virtual ~SizeGripItem();\n\n    private:\n        void doResize();\n        QRectF rect_;\n        Resizer* resizer_;\n};\n</code></pre>\n"}, {"tags": ["c++", "ode"], "comments": [{"owner": {"reputation": 4826, "user_id": 193789, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/a17cc57e47435930a48f7c80bcd53863?s=128&d=identicon&r=PG", "display_name": "kebs", "link": "https://stackoverflow.com/users/193789/kebs"}, "edited": false, "score": 0, "creation_date": 1478104559, "post_id": 40384952, "comment_id": 68022095, "body": "Nice question but off-topic here, see <a href=\"http://stackoverflow.com/help/on-topic\">stackoverflow.com/help/on-topic</a>"}, {"owner": {"reputation": 8441, "user_id": 6045390, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/acff74b868ac0a23f75cddd53d9a7380?s=128&d=identicon&r=PG&f=1", "display_name": "J_F", "link": "https://stackoverflow.com/users/6045390/j-f"}, "edited": false, "score": 0, "creation_date": 1478106307, "post_id": 40384952, "comment_id": 68023185, "body": "Of course it is possible in R, see <a href=\"http://stackoverflow.com/documentation/r/7448/solving-odes-in-r\">here</a>"}, {"owner": {"reputation": 1, "user_id": 3786239, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/156b92ca4ed20dae13ad90b77a51d35f?s=128&d=identicon&r=PG&f=1", "display_name": "Chad Dean", "link": "https://stackoverflow.com/users/3786239/chad-dean"}, "reply_to_user": {"reputation": 8441, "user_id": 6045390, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/acff74b868ac0a23f75cddd53d9a7380?s=128&d=identicon&r=PG&f=1", "display_name": "J_F", "link": "https://stackoverflow.com/users/6045390/j-f"}, "edited": false, "score": 0, "creation_date": 1478107908, "post_id": 40384952, "comment_id": 68024133, "body": "@J_F thanks, I know that it is possible with other languages, but I&#39;ve to stick with c++"}], "owner": {"reputation": 1, "user_id": 3786239, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/156b92ca4ed20dae13ad90b77a51d35f?s=128&d=identicon&r=PG&f=1", "display_name": "Chad Dean", "link": "https://stackoverflow.com/users/3786239/chad-dean"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 96, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1478103978, "creation_date": 1478103978, "question_id": 40384952, "link": "https://stackoverflow.com/questions/40384952/fitting-data-into-ode-system-model-in-c-c", "title": "Fitting data into ODE system/model in c/c++", "body": "<p>I've got an Octave program that fits experimental data into a model of different ODEs. The Octave program uses the leasqr() function to fit the data.</p>\n\n<p>My task is to reimplement this in C++, but I haven't found any library, which provides a similar function. ALG and GSL both provide functions to simulate an ODE system without experimental data, or fit data into a single ODE.</p>\n\n<p>The ODE system look like that:</p>\n\n<pre><code>dA/dt = -k1*A\ndB/dt = k1*A-k2*B-k3*B\ndC/dt = k3*B-k4*C\n</code></pre>\n\n<p>Has anyone an idea how to solve this problem or what library to use? I can't imagine that this is possible in Octave (or R), but nobody has accomplished that before in C++.</p>\n\n<p>Thanks for your help!</p>\n"}, {"tags": ["c++", "c++11"], "comments": [{"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1478103613, "post_id": 40384759, "comment_id": 68021524, "body": "Same difference as with integers."}, {"owner": {"reputation": 100407, "user_id": 16406, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fadf252892475e9b177d5cd5e8b24145?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Dodd", "link": "https://stackoverflow.com/users/16406/chris-dodd"}, "edited": false, "score": 0, "creation_date": 1478103889, "post_id": 40384759, "comment_id": 68021695, "body": "Because non random access iterators don&#39;t allow random access."}], "answers": [{"tags": [], "owner": {"reputation": 60956, "user_id": 8922, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f1634a09333f7b391db92e1d2bea6253?s=128&d=identicon&r=PG", "display_name": "Sebastian Redl", "link": "https://stackoverflow.com/users/8922/sebastian-redl"}, "is_accepted": false, "score": 0, "last_activity_date": 1478103936, "creation_date": 1478103936, "answer_id": 40384937, "question_id": 40384759, "link": "https://stackoverflow.com/questions/40384759/the-difference-between-reduce-and-decrease-in-iterator/40384937#40384937", "title": "The difference between reduce and decrease in iterator", "body": "<p>A linked list cannot jump to an arbitrary element in constant time. To find an element at an index, you have to follow the links between nodes one by one.</p>\n\n<p>Because arbitrary jumping is not an O(1) operation, providing it as a primitive operation on list iterators would be misleading, and cause programmers to accidentally write very inefficient algorithms. Thus the operation <code>it - n</code> does not exist.</p>\n\n<p>The compiler cannot distinguish between <code>it - 1</code> and other values for n, so this operation is forbidden too. You are left with using the decrement operator.</p>\n\n<p>Vector iterators, on the other hand, can jump around arbitrarily in constant time.</p>\n"}, {"tags": [], "owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "is_accepted": false, "score": 2, "last_activity_date": 1478104249, "last_edit_date": 1478104249, "creation_date": 1478103975, "answer_id": 40384951, "question_id": 40384759, "link": "https://stackoverflow.com/questions/40384759/the-difference-between-reduce-and-decrease-in-iterator/40384951#40384951", "title": "The difference between reduce and decrease in iterator", "body": "<p><code>std::vector</code>'s iterators are <a href=\"http://en.cppreference.com/w/cpp/concept/RandomAccessIterator\" rel=\"nofollow noreferrer\">Random Access Iterators</a> -- they can be shifted by an arbitrary offset with <code>+</code> and <code>-</code>, and <code>1</code> is just a particular offset.</p>\n\n<p><code>std::list</code>'s iterators can't do that: they're only <a href=\"http://en.cppreference.com/w/cpp/concept/BidirectionalIterator\" rel=\"nofollow noreferrer\">Bidirectional Iterators</a>, which can only be incremented (<code>++</code>) and decremented (<code>--</code>) one element at a time.</p>\n\n<p>You can write code that shifts an arbitrary iterator, using either of theses methods depending on the iterator's capabilities, with <a href=\"http://en.cppreference.com/w/cpp/iterator/advance\" rel=\"nofollow noreferrer\"><code>std::advance</code></a>.</p>\n\n<p>In your situation, that is, the very common shift by a single element, you can use <a href=\"http://en.cppreference.com/w/cpp/iterator/prev\" rel=\"nofollow noreferrer\"><code>std::prev</code></a> and <a href=\"http://en.cppreference.com/w/cpp/iterator/next\" rel=\"nofollow noreferrer\"><code>std::next</code></a>.</p>\n"}], "owner": {"reputation": 13, "user_id": 4227936, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-VXU0LiUmQEQ/AAAAAAAAAAI/AAAAAAAAAXc/CqwXoLHCRGw/photo.jpg?sz=128", "display_name": "Leslie Yuan", "link": "https://stackoverflow.com/users/4227936/leslie-yuan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 825, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1478245606, "creation_date": 1478103424, "last_edit_date": 1478245606, "question_id": 40384759, "link": "https://stackoverflow.com/questions/40384759/the-difference-between-reduce-and-decrease-in-iterator", "title": "The difference between reduce and decrease in iterator", "body": "<p>Code like:</p>\n\n<pre><code>list&lt;const char *&gt; lst_city = {\"NewYork\", \"Tokoyo\", \"ShenZhen\"};\nvector&lt;string&gt; vs_city;\nvs_city.assign(lst_city.cbegin(), --lst_city.cend()); \n</code></pre>\n\n<p>This is right.But if i do like this ,will be wrong:</p>\n\n<pre><code>vs_city.assign(lst_city.cbegin(), lst_city.cend() - 1);\n</code></pre>\n\n<p>What's the difference  -- and - 1,i am not very clear.\nIf it was a vector, it will be good too.So it was just because the bilateral of the list?</p>\n"}, {"tags": ["c++", "qt", "debugging", "sigabrt"], "comments": [{"owner": {"reputation": 7072, "user_id": 1816262, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IcKpN.png?s=128&g=1", "display_name": "OMGtechy", "link": "https://stackoverflow.com/users/1816262/omgtechy"}, "edited": false, "score": 0, "creation_date": 1478103599, "post_id": 40384693, "comment_id": 68021519, "body": "<code>MainWindow::on_btnState_clicked</code> is common between the two, perhaps start by looking there."}, {"owner": {"reputation": 32308, "user_id": 20270, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37335856df5e5e73d82bca5a805bd647?s=128&d=identicon&r=PG", "display_name": "Hasturkun", "link": "https://stackoverflow.com/users/20270/hasturkun"}, "edited": false, "score": 0, "creation_date": 1478103622, "post_id": 40384693, "comment_id": 68021530, "body": "<code>malloc_printerr</code> in your backtrace suggests that you&#39;ve got some sort of memory corruption somewhere. <code>realloc</code> should be printing an error message (hopefully informative). You might want to run your code under Valgrind to track it down.You might also want to try running your program with the <code>MALLOC_CHECK_</code> environment variable set to 2, to hopefully make it abort earlier, closer to the code causing the issue."}, {"owner": {"reputation": 1283, "user_id": 2747160, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/xE6Dt.png?s=128&g=1", "display_name": "m8mble", "link": "https://stackoverflow.com/users/2747160/m8mble"}, "edited": false, "score": 1, "creation_date": 1478109878, "post_id": 40384693, "comment_id": 68025300, "body": "Maybe also use <code>valgrind</code> to search for memory problems more thoroughly."}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1478179182, "post_id": 40384693, "comment_id": 68055211, "body": "You&#39;re facing fallout from bugs elsewhere in your code. By the time the aborting code runs, the state of your process has already been corrupted. This question is off-topic as there&#39;s no self-contained test case that reproduces it."}, {"owner": {"reputation": 249985, "user_id": 147192, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/E78Vj.png?s=128&g=1", "display_name": "Matthieu M.", "link": "https://stackoverflow.com/users/147192/matthieu-m"}, "edited": false, "score": 0, "creation_date": 1478180375, "post_id": 40384693, "comment_id": 68056056, "body": "Pass <code>-fsanitize=&lt;something&gt;</code> to your compiler (<code>address</code> or <code>memory</code> would be good starts) or learn to use valgrind. You have a memory corruption, and it might be painful..."}], "owner": {"reputation": 1623, "user_id": 4628115, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b3a6c65cdd121a35b1dcf348c6b0c9b6?s=128&d=identicon&r=PG", "display_name": "CybeX", "link": "https://stackoverflow.com/users/4628115/cybex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 456, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1478180297, "creation_date": 1478103227, "last_edit_date": 1495540122, "question_id": 40384693, "link": "https://stackoverflow.com/questions/40384693/getting-random-sigabrts-in-code", "title": "getting random SIGABRT&#39;s in code", "body": "<p>I am getting random <code>SIGABRT</code> signals terminating my program.</p>\n\n<p>I have looked at what <a href=\"https://stackoverflow.com/questions/11161126/what-causes-a-sigabrt-fault\">causes</a> these but found no matching error I have performed as well as finding a <a href=\"https://stackoverflow.com/questions/8072135/how-to-track-down-cause-of-sigabrt\">cause</a>, but this has also been fruitless. See the first example of how this cannot be a cause.</p>\n\n<p><em>please note: I added to of a few SIGABRT error, since I am unsure of what might cause it, thus giving the reader a beter understanding of the code</em></p>\n\n<p>I have 2 occurences of these <code>SIGABRT</code>'s (of a number, most are not mentioned).</p>\n\n<p><strong>First Occurence:</strong>\nan example:</p>\n\n<pre><code>CONF_FILE_LINUX = QString(\"a;string;here\");\n</code></pre>\n\n<p>and</p>\n\n<pre><code>QStringList opts = CONF_FILE_LINUX.split(delim);\n</code></pre>\n\n<p>The above code should take a string of contents separated by <code>delim = ;</code> with no spaces and create a <code>QStringList</code> from this.</p>\n\n<p>Sometimes it passes without a <code>SIGABRT</code> error, sometimes it does not.</p>\n\n<p>Full backtrace of the signal (see #10):</p>\n\n<pre><code>1   __GI_raise                                                               raise.c               58   0x7ffff586e7ef \n2   __GI_abort                                                               abort.c               89   0x7ffff58703ea \n3   __libc_message                                                           libc_fatal.c          175  0x7ffff58b20d0 \n4   malloc_printerr                                                          malloc.c              5046 0x7ffff58be58c \n5   _int_realloc                                                             malloc.c              4333 0x7ffff58be58c \n6   __GI___libc_realloc                                                      malloc.c              3080 0x7ffff58bf4b6 \n7   QListData::realloc_grow(int)                                                                        0x7ffff67cdc75 \n8   QListData::append(int)                                                                              0x7ffff67cdd0e \n9   ??                                                                                                  0x7ffff675d545 \n10  QString::split(QChar, QString::SplitBehavior, Qt::CaseSensitivity) const                            0x7ffff6801805 \n11  OpenVPN_Interface::createConfigFile                                      openvpn_interface.cpp 181  0x555555578bfe \n12  OpenVPN_Interface::connect                                               openvpn_interface.cpp 80   0x555555577fc7 \n13  MainWindow::on_btnState_clicked                                          mainwindow.cpp        301  0x55555555f6de \n14  MainWindow::qt_static_metacall                                           moc_mainwindow.cpp    105  0x55555557cb48 \n15  MainWindow::qt_metacall                                                  moc_mainwindow.cpp    138  0x55555557cc40 \n16  QMetaObject::activate(QObject *, int, int, void * *)                                                0x7ffff695f700 \n17  QAbstractButton::clicked(bool)                                                                      0x7ffff77c0682 \n</code></pre>\n\n<p><strong>Second Occurrence:</strong></p>\n\n<p>Code:</p>\n\n<pre><code>QFile vpn_config(conf_path);\nQTextStream fout(&amp;vpn_config)\n</code></pre>\n\n<p>Same symptoms of previous error. The <code>conf_path</code> is a predefined non empty string.</p>\n\n<p>Full backtrace:</p>\n\n<pre><code>1   malloc_consolidate                                                                                      malloc.c              4204 0x7ffff58b9e8b \n2   _int_malloc                                                                                             malloc.c              3485 0x7ffff58bcd7f \n3   __GI___libc_malloc                                                                                      malloc.c              2925 0x7ffff58bede4 \n4   QArrayData::allocate(unsigned long, unsigned long, unsigned long, QFlags&lt;QArrayData::AllocationOption&gt;)                            0x7ffff6772510 \n5   QByteArray::resize(int)                                                                                                            0x7ffff67750b3 \n6   QRingBuffer::reserve(long long)                                                                                                    0x7ffff67ed2be \n7   QRingBuffer::append(const char *, long long)                                                                                       0x7ffff67ed3e4 \n8   QFileDevice::writeData(const char *, long long)                                                                                    0x7ffff6867ab2 \n9   QIODevice::write(const char *, long long)                                                                                          0x7ffff686ff9e \n10  ??                                                                                                                                 0x7ffff68802d7 \n11  QTextStream::~QTextStream()                                                                                                        0x7ffff6880438 \n12  dataManager::FILE_writeOVPNConfig                                                                       datamanager.cpp       333  0x555555574cfb \n13  OpenVPN_Interface::createConfigFile                                                                     openvpn_interface.cpp 221  0x55555557910c \n14  OpenVPN_Interface::connect                                                                              openvpn_interface.cpp 80   0x555555577fc7 \n15  MainWindow::on_btnState_clicked                                                                         mainwindow.cpp        301  0x55555555f6de   \n</code></pre>\n\n<p>On each new debugging session, the \"code takes turns\" throwing a SIGABRT error and I am completely lost!</p>\n\n<p>Any advice on how to proceed? </p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1478103141, "post_id": 40384617, "comment_id": 68021246, "body": "Have you looked at <a href=\"http://en.cppreference.com/w/cpp/string/basic_string/getline\" rel=\"nofollow noreferrer\">getline</a>?"}], "answers": [{"comments": [{"owner": {"reputation": 5269, "user_id": 4192691, "user_type": "registered", "accept_rate": 32, "profile_image": "https://i.stack.imgur.com/dzokh.jpg?s=128&g=1", "display_name": "varad", "link": "https://stackoverflow.com/users/4192691/varad"}, "edited": false, "score": 1, "creation_date": 1478103407, "post_id": 40384705, "comment_id": 68021395, "body": "I did that but it gives me empty character constant... also it only takes single quotation llike <code>if (message == &#39;&#39;)</code>"}], "tags": [], "owner": {"reputation": 60, "user_id": 7020598, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e53bffbe765450970d4429edcd7f7b80?s=128&d=identicon&r=PG&f=1", "display_name": "danielku97", "link": "https://stackoverflow.com/users/7020598/danielku97"}, "is_accepted": false, "score": 0, "last_activity_date": 1478103261, "creation_date": 1478103261, "answer_id": 40384705, "question_id": 40384617, "link": "https://stackoverflow.com/questions/40384617/c-char-check-for-empty-character/40384705#40384705", "title": "c++ char check for empty character", "body": "<p>You can do a simple if statement to check for blanks</p>\n\n<pre><code>do {\n    cin.get(message);\n\n    if (message == \"\") //No message\n      {\n        //custom message/action here\n      }\n    cout &lt;&lt; \"message \" &lt;&lt; message &lt;&lt; endl;\n}while(message != '\\n');\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 5269, "user_id": 4192691, "user_type": "registered", "accept_rate": 32, "profile_image": "https://i.stack.imgur.com/dzokh.jpg?s=128&g=1", "display_name": "varad", "link": "https://stackoverflow.com/users/4192691/varad"}, "edited": false, "score": 0, "creation_date": 1478103542, "post_id": 40384718, "comment_id": 68021482, "body": "Yes I want to read one character at a time. Is there anyway I can do what I want"}, {"owner": {"reputation": 9645, "user_id": 1465553, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/5b559f395549789c041652429444dc0a?s=128&d=identicon&r=PG", "display_name": "Saurav Sahu", "link": "https://stackoverflow.com/users/1465553/saurav-sahu"}, "reply_to_user": {"reputation": 5269, "user_id": 4192691, "user_type": "registered", "accept_rate": 32, "profile_image": "https://i.stack.imgur.com/dzokh.jpg?s=128&g=1", "display_name": "varad", "link": "https://stackoverflow.com/users/4192691/varad"}, "edited": false, "score": 0, "creation_date": 1478103690, "post_id": 40384718, "comment_id": 68021577, "body": "You can still read each character from the <i>string</i> line. If you are really reluctant to store the line as string at first place, then that is a different thing."}, {"owner": {"reputation": 9645, "user_id": 1465553, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/5b559f395549789c041652429444dc0a?s=128&d=identicon&r=PG", "display_name": "Saurav Sahu", "link": "https://stackoverflow.com/users/1465553/saurav-sahu"}, "reply_to_user": {"reputation": 5269, "user_id": 4192691, "user_type": "registered", "accept_rate": 32, "profile_image": "https://i.stack.imgur.com/dzokh.jpg?s=128&g=1", "display_name": "varad", "link": "https://stackoverflow.com/users/4192691/varad"}, "edited": false, "score": 0, "creation_date": 1478104964, "post_id": 40384718, "comment_id": 68022342, "body": "@aryan check the newly added code. Read about delim of <i>get</i> : <a href=\"http://www.cplusplus.com/reference/istream/istream/get/\" rel=\"nofollow noreferrer\">cplusplus.com/reference/istream/istream/get</a>"}], "tags": [], "owner": {"reputation": 9645, "user_id": 1465553, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/5b559f395549789c041652429444dc0a?s=128&d=identicon&r=PG", "display_name": "Saurav Sahu", "link": "https://stackoverflow.com/users/1465553/saurav-sahu"}, "is_accepted": false, "score": 1, "last_activity_date": 1478105117, "last_edit_date": 1478105117, "creation_date": 1478103307, "answer_id": 40384718, "question_id": 40384617, "link": "https://stackoverflow.com/questions/40384617/c-char-check-for-empty-character/40384718#40384718", "title": "c++ char check for empty character", "body": "<p>All you are trying to do is read the input line; reading one character at a time. Instead use <em>getline</em></p>\n\n<pre><code>istream&amp; getline (istream&amp; is, string&amp; str);\n</code></pre>\n\n<p>It extracts characters from <em>is</em> and stores them into <em>str</em> until the delimitation character <em>newline character</em>, '\\n', is found.</p>\n\n<pre><code>string line;\ngetline(cin, line);  //Get sentence\n</code></pre>\n\n<p>Otherwise, you can do:</p>\n\n<pre><code>while(cin.get(message)){\n   cout &lt;&lt; \"message \" &lt;&lt; message &lt;&lt; endl;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1478104109, "post_id": 40384767, "comment_id": 68021835, "body": "What if the character codetables aren&#39;t ASCII? Don&#39;t suggest using magic numbers please."}, {"owner": {"reputation": 488, "user_id": 6344366, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/8EB8C.jpg?s=128&g=1", "display_name": "Cherkesgiller", "link": "https://stackoverflow.com/users/6344366/cherkesgiller"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1478104333, "post_id": 40384767, "comment_id": 68021975, "body": "So the question must be ask in more detail to decide what to do :)"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1478104494, "post_id": 40384767, "comment_id": 68022055, "body": "I don&#39;t see in any way, how the statement <code>if(int(message) == 32)</code> should be superior to <code>if(imessage == &#39; &#39;)</code>. If you wan&#39;t to comment, gain enough rep to do so."}, {"owner": {"reputation": 488, "user_id": 6344366, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/8EB8C.jpg?s=128&g=1", "display_name": "Cherkesgiller", "link": "https://stackoverflow.com/users/6344366/cherkesgiller"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1478104653, "post_id": 40384767, "comment_id": 68022161, "body": "I didnt say it superior to &#39; &#39; . Read comment again."}], "tags": [], "owner": {"reputation": 488, "user_id": 6344366, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/8EB8C.jpg?s=128&g=1", "display_name": "Cherkesgiller", "link": "https://stackoverflow.com/users/6344366/cherkesgiller"}, "is_accepted": false, "score": -2, "last_activity_date": 1478103436, "creation_date": 1478103436, "answer_id": 40384767, "question_id": 40384617, "link": "https://stackoverflow.com/questions/40384617/c-char-check-for-empty-character/40384767#40384767", "title": "c++ char check for empty character", "body": "<p>You can use ASCII values smth like <code>if(int(message) == 32) cout &lt;&lt; \"SPACE\" &lt;&lt; \"\\n\";</code></p>\n"}, {"tags": [], "owner": {"reputation": 101, "user_id": 7099637, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hPrJ2.jpg?s=128&g=1", "display_name": "Wala Al Ramadhani", "link": "https://stackoverflow.com/users/7099637/wala-al-ramadhani"}, "is_accepted": false, "score": 0, "last_activity_date": 1478105677, "creation_date": 1478105677, "answer_id": 40385495, "question_id": 40384617, "link": "https://stackoverflow.com/questions/40384617/c-char-check-for-empty-character/40385495#40385495", "title": "c++ char check for empty character", "body": "<p>To check if the user didnt enter any string at the first time just add an if statement before looping <code>if(message =='\\n')</code></p>\n\n<hr>\n\n<p>To check for space in the loop add and if else statement   </p>\n\n<pre><code> if(message == ' ')\n      //message here\n  else\n     cout &lt;&lt; \"message \" &lt;&lt; message &lt;&lt; endl;\n</code></pre>\n"}], "owner": {"reputation": 5269, "user_id": 4192691, "user_type": "registered", "accept_rate": 32, "profile_image": "https://i.stack.imgur.com/dzokh.jpg?s=128&g=1", "display_name": "varad", "link": "https://stackoverflow.com/users/4192691/varad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5172, "favorite_count": 0, "answer_count": 4, "score": 0, "last_activity_date": 1478105677, "creation_date": 1478103032, "question_id": 40384617, "link": "https://stackoverflow.com/questions/40384617/c-char-check-for-empty-character", "title": "c++ char check for empty character", "body": "<p>I have a simple c++ program like:</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nint main() {\n    char message;\n    cout &lt;&lt; \"Enter a message\"&lt;&lt;endl;\n\n    do {\n        cin.get(message);\n        cout &lt;&lt; \"message \" &lt;&lt; message &lt;&lt; endl;\n    }while(message != '\\n');\n\n    return 0;\n}\n</code></pre>\n\n<p>Here it works fine but what I want is if user does not enter any string and just hit the enter I should show some message. </p>\n\n<p>How can I check if user has entered some character except space only. If the first character is space then also I want to show same message.</p>\n\n<p>If only user enters any string I want to display all the characters in the message.</p>\n\n<p>I am learning c++. I am very new. Need help</p>\n"}, {"tags": ["c++", "templates", "c++17", "default-arguments"], "comments": [{"owner": {"reputation": 30558, "user_id": 1013719, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/U8X0A.jpg?s=128&g=1", "display_name": "Ryan Haining", "link": "https://stackoverflow.com/users/1013719/ryan-haining"}, "edited": false, "score": 1, "creation_date": 1478106308, "post_id": 40384483, "comment_id": 68023187, "body": "what you have is the way to go, imo"}], "answers": [{"tags": [], "owner": {"reputation": 13337, "user_id": 4324224, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/YF2EX.png?s=128&g=1", "display_name": "W.F.", "link": "https://stackoverflow.com/users/4324224/w-f"}, "is_accepted": false, "score": 0, "last_activity_date": 1478107572, "last_edit_date": 1478107572, "creation_date": 1478105980, "answer_id": 40385585, "question_id": 40384483, "link": "https://stackoverflow.com/questions/40384483/how-to-obtain-a-template-parameter-pack-of-integers-int-a-function/40385585#40385585", "title": "How to obtain a template parameter pack of integers int a function?", "body": "<p>You could make use of generic lambda and some helper struct like this:</p>\n\n<pre><code>#include &lt;utility&gt;\n#include &lt;type_traits&gt;\n#include &lt;tuple&gt;\n\ntemplate &lt;std::size_t N, class = std::make_index_sequence&lt;N&gt;&gt;\nstruct iterate;\n\ntemplate &lt;std::size_t N, std::size_t... Is&gt;\nstruct iterate&lt;N, std::index_sequence&lt;Is...&gt;&gt; {\n   template &lt;class Lambda&gt;\n   void operator()(Lambda lambda) {\n      lambda(std::integral_constant&lt;std::size_t, Is&gt;{}...);\n   }\n};\n\nstruct Foo {\n   void reset() {}\n};\n\nvoid reset() {\n   std::tuple&lt;Foo, Foo, Foo&gt; bar;\n   iterate&lt;std::tuple_size&lt;decltype(bar)&gt;::value&gt;{}([&amp;](auto... is) {\n      (std::get&lt;is&gt;(bar).reset(), ...);\n   });\n}\n\nint main() {\n   reset();\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": true, "score": 1, "last_activity_date": 1506708254, "last_edit_date": 1506708254, "creation_date": 1478106158, "answer_id": 40385650, "question_id": 40384483, "link": "https://stackoverflow.com/questions/40384483/how-to-obtain-a-template-parameter-pack-of-integers-int-a-function/40385650#40385650", "title": "How to obtain a template parameter pack of integers int a function?", "body": "<p>You can achieve something like this with a defaulted template parameter:</p>\n\n<pre><code>template &lt;class S = std::make_index_sequence&lt;5&gt;&gt;\nstruct reset; // intentionally undefined\n\ntemplate &lt;size_t... Is&gt;\nstruct reset&lt;std::index_sequence&lt;Is...&gt;&gt; {\n    template &lt;class Tuple&gt;\n    static void impl(Tuple&amp; t) {\n        (std::get&lt;Is&gt;(t).reset(), ...);\n    }\n};\n\nreset&lt;&gt;::impl(someTuple);\n</code></pre>\n\n<p>but not in a function (since such a thing would require partial specialization of function templates, which is not supported by the language).</p>\n\n<p>Instead, just create a helper lambda for inline parameter pack unpacking:</p>\n\n<pre><code>void reset() {\n    indexer&lt;5&gt;()([&amp;](auto I){\n        std::get&lt;I&gt;(someTuple).reset();\n    });\n}\n</code></pre>\n"}], "owner": {"reputation": 4160, "user_id": 371239, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/decd51f67e3f34f4d6c526fed9b4a2dd?s=128&d=identicon&r=PG", "display_name": "Vahagn", "link": "https://stackoverflow.com/users/371239/vahagn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1655, "favorite_count": 0, "accepted_answer_id": 40385650, "answer_count": 2, "score": 1, "last_activity_date": 1506708254, "creation_date": 1478102582, "last_edit_date": 1478106165, "question_id": 40384483, "link": "https://stackoverflow.com/questions/40384483/how-to-obtain-a-template-parameter-pack-of-integers-int-a-function", "title": "How to obtain a template parameter pack of integers int a function?", "body": "<p>Say I want to have a function like:</p>\n\n<pre><code>void reset()\n{\n    (std::get&lt;/*pack of integers from 0 to 4*/&gt;(someTuple).reset(), ...);\n}\n</code></pre>\n\n<p>I did it with a helper function like this:</p>\n\n<pre><code>template &lt; size_t... Indexes &gt;\nvoid reset(std::integer_sequence&lt;size_t, Indexes...&gt;)\n{\n    (std::get&lt;Indexes&gt;(someTuple).reset(), ...);\n}\nvoid reset()\n{\n    reset(std::make_integer_sequence&lt;size_t,5&gt;{});\n}\n</code></pre>\n\n<p>But can I achieve this with just one function? The attempt like:</p>\n\n<pre><code>template &lt; size_t... Indexes &gt;\nvoid reset(std::integer_sequence&lt;size_t, Indexes...&gt; = std::make_integer_sequence&lt;size_t,5&gt;{})\n{\n    (std::get&lt;Indexes&gt;(someTuple).reset(), ...);\n}\n</code></pre>\n\n<p>failed as the call <code>reset()</code> resolved to <code>reset&lt;&gt;(std::integer_sequence&lt;size_t&gt;)</code> rather than to <code>reset&lt;0,1,2,3,4&gt;(std::integer_sequence&lt;size_t,0,1,2,3,4&gt;)</code>. I am using the latest snapshot of GCC-7.0.0</p>\n"}, {"tags": ["javascript", "c++", "multithreading", "web-worker", "emscripten"], "comments": [{"owner": {"reputation": 23009, "user_id": 3613500, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/lIfov.png?s=128&g=1", "display_name": "David Haim", "link": "https://stackoverflow.com/users/3613500/david-haim"}, "edited": false, "score": 0, "creation_date": 1478104726, "post_id": 40384421, "comment_id": 68022210, "body": "my guess is that web workers are just a threadpool in desguise"}], "answers": [{"tags": [], "owner": {"reputation": 6045, "user_id": 3983557, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/01A0D.jpg?s=128&g=1", "display_name": "JF Bastien", "link": "https://stackoverflow.com/users/3983557/jf-bastien"}, "is_accepted": true, "score": 4, "last_activity_date": 1478143506, "creation_date": 1478143506, "answer_id": 40393358, "question_id": 40384421, "link": "https://stackoverflow.com/questions/40384421/is-web-worker-heavier-or-lighter-than-a-native-thread/40393358#40393358", "title": "Is web worker heavier or lighter than a native thread", "body": "<p>At the moment, WebWorkers are pretty heavyweight because the VM duplicates a bunch of its internal state (sometimes even re-JITs code for a worker). That state is <strong>much</strong> bigger than a native thread's few MiBs of initial stack space and associated state.</p>\n\n<p>Some of this can be fixed by implementations, and I expect that if <a href=\"http://tc39.github.io/ecmascript_sharedmem/shmem.html\" rel=\"nofollow noreferrer\">SharedArrayBuffer</a> or <a href=\"http://webassembly.org\" rel=\"nofollow noreferrer\">WebAssembly</a> + <a href=\"http://webassembly.org/docs/future-features/#threads\" rel=\"nofollow noreferrer\">threads</a> become popular then browser engines will want to optimize things.</p>\n\n<p>That being said, the end of your question hints at a misunderstanding of what thread overheads are, and how the proposal for SharedArrayBuffer (which Emscripten relies on to support pthreads) works. WebWorkers are heavy at the moment, but they can communicate through SABs in exactly the same way native code such as C++ can: by accessing exactly the same memory, at the same virtual address. SAB adds a new kind of ArrayBuffer to JavaScript which doesn't get neutered when you <code>postMessage</code> it to another worker. Multiple workers can then see other worker's updates to the buffer in exactly the same way C++ code when you use <code>std::atomic</code>.</p>\n\n<p>At the same time, workers can't block the main thread by definition and therefore have a more \"native\" feel. Some web APIs aren't available to all workers, but that's been changing. This becomes relevant if you e.g. write a game and have network / audio / render / AI / input in different threads. The web is slowly finding its own way of doing these things.</p>\n\n<p><strong>The details are a bit trickier</strong></p>\n\n<p>SAB currently only supports non-atomic accesses, and sequentially-consistent accesses (i.e. the only available <code>Atomic</code> access at the moment is the same as C++'s <code>std::memory_order_seq_cst</code>). Doing non-atomic accesses should be about as performant as C++'s non-atomics (big compiler caveats here which I won't get into), and using <code>Atomic</code> should be about as performant as C++'s <code>std::atomic</code> default (which is <code>std::memory_order_seq_cst</code>). C++ has 5 other memory orders (<code>relaxed</code>, <code>consume</code>, <code>acquire</code>, <code>release</code>, <code>acq_rel</code>) which SAB doesn't support at the moment. These other memory orders allow native code to be faster in some circumstances, but are harder to use correctly and portably. They might be added to future updates to SAB, e.g. through <a href=\"https://github.com/tc39/ecmascript_sharedmem/issues/15\" rel=\"nofollow noreferrer\">this issue</a>.</p>\n\n<p>SAB also supports <code>Futex</code> which native programs rely on under the hood to implement efficient <code>mutex</code>.</p>\n\n<p>There are even trickier details when comparing to C++, <a href=\"https://github.com/tc39/ecmascript_sharedmem/issues/88\" rel=\"nofollow noreferrer\">I've detailed some of them</a> but there are even more.</p>\n"}], "owner": {"reputation": 4733, "user_id": 1068497, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/32c20ce344a5b5edf654c9bdfb61b947?s=128&d=identicon&r=PG", "display_name": "swang", "link": "https://stackoverflow.com/users/1068497/swang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 472, "favorite_count": 0, "accepted_answer_id": 40393358, "answer_count": 1, "score": 1, "last_activity_date": 1478143506, "creation_date": 1478102395, "question_id": 40384421, "link": "https://stackoverflow.com/questions/40384421/is-web-worker-heavier-or-lighter-than-a-native-thread", "title": "Is web worker heavier or lighter than a native thread", "body": "<p>Is web worker just a normal native thread created by browser to run and communicate with other browser threads with a messaging queue? Or doesn't it contain other things when created?</p>\n\n<p>I'm looking at the <a href=\"https://groups.google.com/forum/#!topic/emscripten-discuss/gQQRjajQ6iY\" rel=\"nofollow noreferrer\">experimental support of pthread</a> in emscripten, multiple threads in C++ will be translated to web workers once compiled. But will it have the same level of performance as native code? After all fine grained multithreading is a key feature in C++.</p>\n"}, {"tags": ["c++", "macros", "this"], "comments": [{"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 3, "creation_date": 1478102075, "post_id": 40384266, "comment_id": 68020550, "body": "1. What is the actual question? 2. What have you tried doing so far?"}, {"owner": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1478102088, "post_id": 40384266, "comment_id": 68020560, "body": "C++ macros don&#39;t have a lot of capability, I&#39;d suggest finding another way to do what you want."}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "reply_to_user": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 1, "creation_date": 1478102164, "post_id": 40384266, "comment_id": 68020613, "body": "@MarkRansom Boost.PP disagrees with you :)"}, {"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 0, "creation_date": 1478102223, "post_id": 40384266, "comment_id": 68020658, "body": "duplicate of <a href=\"http://stackoverflow.com/questions/3046889/optional-parameters-with-c-macros\" title=\"optional parameters with c macros\">stackoverflow.com/questions/3046889/&hellip;</a>"}, {"owner": {"reputation": 13, "user_id": 3348108, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e27f99d9828380b3d28380147d1a6e1?s=128&d=identicon&r=PG&f=1", "display_name": "user3348108", "link": "https://stackoverflow.com/users/3348108/user3348108"}, "reply_to_user": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 0, "creation_date": 1478103363, "post_id": 40384266, "comment_id": 68021365, "body": "@UnholySheep The question is really long, so I came up with this abstract but very neat question. The reason I am emphasizing the &#39;this&#39; pointer is because the macro can&#39;t be replaced by a template or factory function. Here is a thread with more details <a href=\"http://stackoverflow.com/questions/40362672/a-macro-to-choose-the-object-instantiation-based-on-the-amount-of-the-arguments\" title=\"a macro to choose the object instantiation based on the amount of the arguments\">stackoverflow.com/questions/40362672/&hellip;</a>"}, {"owner": {"reputation": 13, "user_id": 3348108, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e27f99d9828380b3d28380147d1a6e1?s=128&d=identicon&r=PG&f=1", "display_name": "user3348108", "link": "https://stackoverflow.com/users/3348108/user3348108"}, "reply_to_user": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1478103373, "post_id": 40384266, "comment_id": 68021371, "body": "@MarkRansom I&#39;ve tried a lot and solving this puzzle looks the most promising."}, {"owner": {"reputation": 13, "user_id": 3348108, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e27f99d9828380b3d28380147d1a6e1?s=128&d=identicon&r=PG&f=1", "display_name": "user3348108", "link": "https://stackoverflow.com/users/3348108/user3348108"}, "reply_to_user": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 0, "creation_date": 1478103402, "post_id": 40384266, "comment_id": 68021391, "body": "@UKMonkey No it is not duplicate. Please read carefully: I am asking about a macro with a variable number of arguments not a macro argument default value."}, {"owner": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "reply_to_user": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1478103462, "post_id": 40384266, "comment_id": 68021426, "body": "@Quentin let me provide some advice then - only use macros if they make your code clearer. That&#39;s unlikely to be the case here, the macro itself will be nearly unintelligible."}, {"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 0, "creation_date": 1478103557, "post_id": 40384266, "comment_id": 68021492, "body": "@user3348108 what you&#39;re asking for is an &quot;optional number of arguments&quot; - as you know, the definition of an optional argument is one that has a default value assigned to a value that marks it as invalid."}, {"owner": {"reputation": 41122, "user_id": 2101267, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/06383b51463f855d7cc0f07d4566bd42?s=128&d=identicon&r=PG", "display_name": "Dark Falcon", "link": "https://stackoverflow.com/users/2101267/dark-falcon"}, "edited": false, "score": 0, "creation_date": 1478105260, "post_id": 40384266, "comment_id": 68022509, "body": "I agree with the others. The macro doesn&#39;t seem worth saving the 4-6 characters for <code>this, </code>, which would make things 10x clearer to future developers. It also reduces the problem to just a few function overloads instead of a huge, difficult-to-understand set of macros."}, {"owner": {"reputation": 13, "user_id": 3348108, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e27f99d9828380b3d28380147d1a6e1?s=128&d=identicon&r=PG&f=1", "display_name": "user3348108", "link": "https://stackoverflow.com/users/3348108/user3348108"}, "reply_to_user": {"reputation": 41122, "user_id": 2101267, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/06383b51463f855d7cc0f07d4566bd42?s=128&d=identicon&r=PG", "display_name": "Dark Falcon", "link": "https://stackoverflow.com/users/2101267/dark-falcon"}, "edited": false, "score": 0, "creation_date": 1478105520, "post_id": 40384266, "comment_id": 68022670, "body": "@DarkFalcon the automatic detection of a cv-qualifier reduces the chance of a deadlock a lot."}, {"owner": {"reputation": 41122, "user_id": 2101267, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/06383b51463f855d7cc0f07d4566bd42?s=128&d=identicon&r=PG", "display_name": "Dark Falcon", "link": "https://stackoverflow.com/users/2101267/dark-falcon"}, "edited": false, "score": 0, "creation_date": 1478105715, "post_id": 40384266, "comment_id": 68022786, "body": "You can auto-detect the cv-qualifier with function overloads or with templates."}, {"owner": {"reputation": 5760, "user_id": 1863564, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/XU4XS.png?s=128&g=1", "display_name": "Fund Monica&#39;s Lawsuit", "link": "https://stackoverflow.com/users/1863564/fund-monicas-lawsuit"}, "edited": false, "score": 0, "creation_date": 1478106168, "post_id": 40384266, "comment_id": 68023097, "body": "As far as I can tell, you <i>never actually asked a question</i>. Please <a href=\"https://stackoverflow.com/posts/40384266/edit\">edit</a> your question to contain one -- a one-or-two-sentence summary of what you&#39;re trying to get out of this site, phrased so that ending it with <code>?</code> is grammatically correct. (P.S. Neat project! Best of luck.)"}, {"owner": {"reputation": 13, "user_id": 3348108, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e27f99d9828380b3d28380147d1a6e1?s=128&d=identicon&r=PG&f=1", "display_name": "user3348108", "link": "https://stackoverflow.com/users/3348108/user3348108"}, "reply_to_user": {"reputation": 41122, "user_id": 2101267, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/06383b51463f855d7cc0f07d4566bd42?s=128&d=identicon&r=PG", "display_name": "Dark Falcon", "link": "https://stackoverflow.com/users/2101267/dark-falcon"}, "edited": false, "score": 0, "creation_date": 1478106603, "post_id": 40384266, "comment_id": 68023364, "body": "@DarkFalcon The produced object cannot be copied, and the move constructor cannot be added, so overloads or templates can&#39;t be used."}, {"owner": {"reputation": 13, "user_id": 3348108, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e27f99d9828380b3d28380147d1a6e1?s=128&d=identicon&r=PG&f=1", "display_name": "user3348108", "link": "https://stackoverflow.com/users/3348108/user3348108"}, "reply_to_user": {"reputation": 5760, "user_id": 1863564, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/XU4XS.png?s=128&g=1", "display_name": "Fund Monica&#39;s Lawsuit", "link": "https://stackoverflow.com/users/1863564/fund-monicas-lawsuit"}, "edited": false, "score": 0, "creation_date": 1478106920, "post_id": 40384266, "comment_id": 68023575, "body": "@QPaysTaxes sarcasm? I added a question mark, but I&#39;m sure the question was clear anyway."}, {"owner": {"reputation": 5760, "user_id": 1863564, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/XU4XS.png?s=128&g=1", "display_name": "Fund Monica&#39;s Lawsuit", "link": "https://stackoverflow.com/users/1863564/fund-monicas-lawsuit"}, "edited": false, "score": 0, "creation_date": 1478106990, "post_id": 40384266, "comment_id": 68023627, "body": "@user3348108 Look at the question before. It used to be &quot;Here&#39;s what I&#39;m trying to do,&quot; with no statement of why you&#39;re not able to. Now, it&#39;s a grammatically incorrect &quot;How can I do this&quot;, which makes it clear what you&#39;re actually asking."}, {"owner": {"reputation": 41122, "user_id": 2101267, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/06383b51463f855d7cc0f07d4566bd42?s=128&d=identicon&r=PG", "display_name": "Dark Falcon", "link": "https://stackoverflow.com/users/2101267/dark-falcon"}, "edited": false, "score": 0, "creation_date": 1478107021, "post_id": 40384266, "comment_id": 68023644, "body": "And why can you not overload the constructor? If the answer is because it isn&#39;t your class, then wrap it in your class. And don&#39;t try to micro-optimize that until you have tried it and proved that that is suboptimal and not just optimized out by your compiler."}, {"owner": {"reputation": 13, "user_id": 3348108, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e27f99d9828380b3d28380147d1a6e1?s=128&d=identicon&r=PG&f=1", "display_name": "user3348108", "link": "https://stackoverflow.com/users/3348108/user3348108"}, "reply_to_user": {"reputation": 41122, "user_id": 2101267, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/06383b51463f855d7cc0f07d4566bd42?s=128&d=identicon&r=PG", "display_name": "Dark Falcon", "link": "https://stackoverflow.com/users/2101267/dark-falcon"}, "edited": false, "score": 0, "creation_date": 1478107464, "post_id": 40384266, "comment_id": 68023900, "body": "@DarkFalcon as can be seen from the code, this is a synchronization class which is forbidden to be copied. Even if I wrap it I would still have to copy the object of the base class type which is forbidden."}, {"owner": {"reputation": 41122, "user_id": 2101267, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/06383b51463f855d7cc0f07d4566bd42?s=128&d=identicon&r=PG", "display_name": "Dark Falcon", "link": "https://stackoverflow.com/users/2101267/dark-falcon"}, "edited": false, "score": 0, "creation_date": 1478107705, "post_id": 40384266, "comment_id": 68024025, "body": "......... This does <i>not</i> require copying. Why would you think it requires copying? I didn&#39;t say don&#39;t use any macro, I just said don&#39;t use a complicated macro. So your macro looks like <code>#define ENC_LOCK(...) MyLocker thelock(__VA_ARGS__);</code>. No copies."}, {"owner": {"reputation": 13, "user_id": 3348108, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e27f99d9828380b3d28380147d1a6e1?s=128&d=identicon&r=PG&f=1", "display_name": "user3348108", "link": "https://stackoverflow.com/users/3348108/user3348108"}, "reply_to_user": {"reputation": 5760, "user_id": 1863564, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/XU4XS.png?s=128&g=1", "display_name": "Fund Monica&#39;s Lawsuit", "link": "https://stackoverflow.com/users/1863564/fund-monicas-lawsuit"}, "edited": false, "score": 0, "creation_date": 1478107930, "post_id": 40384266, "comment_id": 68024139, "body": "@QPaysTaxes sorry for the grammar, I&#39;m not a native speaker but trying hard. That is great that the question became clearer so now you can understand that. I am very upset and stressed that there is so much flood and downvoting and unrelated solutions because someone didn&#39;t read all the question details and no one is trying to help me fix the damn macro."}, {"owner": {"reputation": 13, "user_id": 3348108, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e27f99d9828380b3d28380147d1a6e1?s=128&d=identicon&r=PG&f=1", "display_name": "user3348108", "link": "https://stackoverflow.com/users/3348108/user3348108"}, "reply_to_user": {"reputation": 41122, "user_id": 2101267, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/06383b51463f855d7cc0f07d4566bd42?s=128&d=identicon&r=PG", "display_name": "Dark Falcon", "link": "https://stackoverflow.com/users/2101267/dark-falcon"}, "edited": false, "score": 0, "creation_date": 1478108347, "post_id": 40384266, "comment_id": 68024407, "body": "@DarkFalcon I&#39;m still convinced the overloads won&#39;t do the job. The default value for the argument would be the &quot;this&quot; pointer of a calling object. Your solution implies (I suppose) passing &quot;this&quot; to all overloads. But the object might be instantiated (with an argument which should replace &quot;this&quot;) from a function where &quot;this&quot; is not defined."}, {"owner": {"reputation": 41122, "user_id": 2101267, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/06383b51463f855d7cc0f07d4566bd42?s=128&d=identicon&r=PG", "display_name": "Dark Falcon", "link": "https://stackoverflow.com/users/2101267/dark-falcon"}, "edited": false, "score": 0, "creation_date": 1478108598, "post_id": 40384266, "comment_id": 68024559, "body": "I&#39;m saying you <i>manually specify</i> this. Then the need for a complicated macro goes away. See my first comment. <a href=\"https://godbolt.org/g/ycgPnB\" rel=\"nofollow noreferrer\">godbolt.org/g/ycgPnB</a>"}, {"owner": {"reputation": 13, "user_id": 3348108, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e27f99d9828380b3d28380147d1a6e1?s=128&d=identicon&r=PG&f=1", "display_name": "user3348108", "link": "https://stackoverflow.com/users/3348108/user3348108"}, "reply_to_user": {"reputation": 41122, "user_id": 2101267, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/06383b51463f855d7cc0f07d4566bd42?s=128&d=identicon&r=PG", "display_name": "Dark Falcon", "link": "https://stackoverflow.com/users/2101267/dark-falcon"}, "edited": false, "score": 0, "creation_date": 1478108985, "post_id": 40384266, "comment_id": 68024767, "body": "@DarkFalcon Please read the initial question on the very first line. It asks about a macro with a zero to one arguments. Manually specifying makes no sense in the context of this question."}, {"owner": {"reputation": 41122, "user_id": 2101267, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/06383b51463f855d7cc0f07d4566bd42?s=128&d=identicon&r=PG", "display_name": "Dark Falcon", "link": "https://stackoverflow.com/users/2101267/dark-falcon"}, "edited": false, "score": 1, "creation_date": 1478109345, "post_id": 40384266, "comment_id": 68024970, "body": "I am fully aware of what you are asking. I&#39;m saying you are doing it wrong. Read my first comment again. Stop being one of those people so fixated on one idea that they refuse to listen to any other idea. The down votes are intended to be a clue that you are doing something wrong here. I and most of the other commenters are indicating that the goal in the question is either unclear or just plain a bad idea. I gave my reasons why in the very first comment and have since provided a close alternative. I understand this doesn&#39;t answer the direct question, but it is giving a recommended alternative"}, {"owner": {"reputation": 13, "user_id": 3348108, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e27f99d9828380b3d28380147d1a6e1?s=128&d=identicon&r=PG&f=1", "display_name": "user3348108", "link": "https://stackoverflow.com/users/3348108/user3348108"}, "reply_to_user": {"reputation": 41122, "user_id": 2101267, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/06383b51463f855d7cc0f07d4566bd42?s=128&d=identicon&r=PG", "display_name": "Dark Falcon", "link": "https://stackoverflow.com/users/2101267/dark-falcon"}, "edited": false, "score": 0, "creation_date": 1478109715, "post_id": 40384266, "comment_id": 68025200, "body": "@DarkFalcon thank you for your answers. What am I trying to say is that your solution is already implemented. That is what I have now in my code. I am astonished that getting rid of a single argument is so challenging and I like solving hard riddles."}, {"owner": {"reputation": 41122, "user_id": 2101267, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/06383b51463f855d7cc0f07d4566bd42?s=128&d=identicon&r=PG", "display_name": "Dark Falcon", "link": "https://stackoverflow.com/users/2101267/dark-falcon"}, "edited": false, "score": 0, "creation_date": 1478110226, "post_id": 40384266, "comment_id": 68025542, "body": "Then on future questions, it might be helpful to provide that up front. Otherwise everyone will think you&#39;re trying to engineer something from scratch with no idea what you&#39;re doing. Hence a lot of people wasting time telling you you&#39;re doing it wrong. Some might still take time to tell you your doing it wrong, but I bet you&#39;d get a lot less arguments and downvotes. Do note that many questions on this site do come from people who have no idea how to architect a system and thus choose the most difficult way possible. Your question sounds like one of them."}, {"owner": {"reputation": 41122, "user_id": 2101267, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/06383b51463f855d7cc0f07d4566bd42?s=128&d=identicon&r=PG", "display_name": "Dark Falcon", "link": "https://stackoverflow.com/users/2101267/dark-falcon"}, "edited": false, "score": 0, "creation_date": 1478110453, "post_id": 40384266, "comment_id": 68025679, "body": "(I do still think you&#39;re doing it wrong though. I still think you should always require the user to specify the locked object for clarity&#39;s sake.)"}, {"owner": {"reputation": 24394, "user_id": 146041, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/tFOb6.jpg?s=128&g=1", "display_name": "Aaron McDaid", "link": "https://stackoverflow.com/users/146041/aaron-mcdaid"}, "edited": false, "score": 0, "creation_date": 1478120316, "post_id": 40384266, "comment_id": 68031010, "body": "@user3348108, at the start of your question, you claim that you want to accept zero or one arguments. Then at the end you say you want to be able to pass zero, one, or <i>two</i> arguments to <code>ENC_LOCK</code>. Which is it? This is the kind of reason that causes great confusion here"}, {"owner": {"reputation": 13, "user_id": 3348108, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e27f99d9828380b3d28380147d1a6e1?s=128&d=identicon&r=PG&f=1", "display_name": "user3348108", "link": "https://stackoverflow.com/users/3348108/user3348108"}, "reply_to_user": {"reputation": 24394, "user_id": 146041, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/tFOb6.jpg?s=128&g=1", "display_name": "Aaron McDaid", "link": "https://stackoverflow.com/users/146041/aaron-mcdaid"}, "edited": false, "score": 0, "creation_date": 1478121655, "post_id": 40384266, "comment_id": 68031746, "body": "@AaronMcDaid Initially I simplified the case, does it really matter?"}, {"owner": {"reputation": 24394, "user_id": 146041, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/tFOb6.jpg?s=128&g=1", "display_name": "Aaron McDaid", "link": "https://stackoverflow.com/users/146041/aaron-mcdaid"}, "edited": false, "score": 0, "creation_date": 1478121941, "post_id": 40384266, "comment_id": 68031874, "body": "I&#39;ve just done a major reedit of this question, trying to make it more readable. It&#39;s still a mess, but better than it was"}, {"owner": {"reputation": 13, "user_id": 3348108, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e27f99d9828380b3d28380147d1a6e1?s=128&d=identicon&r=PG&f=1", "display_name": "user3348108", "link": "https://stackoverflow.com/users/3348108/user3348108"}, "edited": false, "score": 0, "creation_date": 1478122645, "post_id": 40384266, "comment_id": 68032191, "body": "The initial question was very short and clear. The mess appeared when I started answering all these questions which didn&#39;t change anything"}], "answers": [{"tags": [], "owner": {"reputation": 1083, "user_id": 6826608, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f02198302f3fb7b19ad09d9a9713a4e0?s=128&d=identicon&r=PG&f=1", "display_name": "Donghui Zhang", "link": "https://stackoverflow.com/users/6826608/donghui-zhang"}, "is_accepted": false, "score": 0, "last_activity_date": 1478102714, "creation_date": 1478102714, "answer_id": 40384529, "question_id": 40384266, "link": "https://stackoverflow.com/questions/40384266/this-of-a-calling-object-as-a-default-argument-c/40384529#40384529", "title": "this of a calling object as a default argument C++", "body": "<p>You could use boost to write a macro that allows you to count how many parameters there are. However this only works if you have at least one parameter. When you have zero parameter boost thinks you have one. So this is not exactly an answer to your question (unless you can live with passing at least one parameter). I nonetheless post it as an answer because it might be helpful to people with similar situations, and the other \"duplicate\" issue's accepted answer does not provide this solution.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;boost/preprocessor/tuple/elem.hpp&gt;\n\n#define CALL(...)                                    \\\n  {                                                  \\\n    auto num = BOOST_PP_VARIADIC_SIZE(__VA_ARGS__);  \\\n    std::cout &lt;&lt; \"called with \" &lt;&lt; num &lt;&lt; \" args.\" &lt;&lt; std::endl; \\\n  }\n\nint main() {\n  CALL(1, 2);\n  CALL(1);\n}\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 3348108, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e27f99d9828380b3d28380147d1a6e1?s=128&d=identicon&r=PG&f=1", "display_name": "user3348108", "link": "https://stackoverflow.com/users/3348108/user3348108"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 100, "favorite_count": 0, "answer_count": 1, "score": -4, "last_activity_date": 1479124317, "creation_date": 1478101952, "last_edit_date": 1479124317, "question_id": 40384266, "link": "https://stackoverflow.com/questions/40384266/this-of-a-calling-object-as-a-default-argument-c", "title": "this of a calling object as a default argument C++", "body": "<p>I'm trying to create a C++ macro with a variable number of arguments (0 to 1) which will act as a wrapper to a function call in order to supply the this pointer of a calling object as a default argument value.</p>\n\n<p>So that the user could make the calls:</p>\n\n<pre><code>    CALL(pointer) // An argument is supplied, pass it to the call\n    CALL()        // No argument supplied, pass the this pointer value instead\n</code></pre>\n"}, {"tags": ["c++", "visual-studio", "compute-shader"], "comments": [{"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1478104642, "post_id": 40384261, "comment_id": 68022151, "body": "I&#39;m unfamiliar with the syntax &quot;<code>[numthreads(1,1,1)]</code>&quot;, what is it doing?"}, {"owner": {"reputation": 11, "user_id": 7087433, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5d60bb17c46484189f1c473ad99321e?s=128&d=identicon&r=PG&f=1", "display_name": "Peter Lynch", "link": "https://stackoverflow.com/users/7087433/peter-lynch"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1478109403, "post_id": 40384261, "comment_id": 68025017, "body": "From my understanding it tells the shader to use a 3 dimensional array of threads for processing, so 1x1x1 in this case, you can pass in threads in the dispatch call too"}], "owner": {"reputation": 11, "user_id": 7087433, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5d60bb17c46484189f1c473ad99321e?s=128&d=identicon&r=PG&f=1", "display_name": "Peter Lynch", "link": "https://stackoverflow.com/users/7087433/peter-lynch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 179, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1478101933, "creation_date": 1478101933, "question_id": 40384261, "link": "https://stackoverflow.com/questions/40384261/how-do-i-return-an-array-of-float3s-from-my-compute-shader", "title": "How do I return an array of float3&#39;s from my compute shader?", "body": "<p>Basically I'm trying to handle ray-tracing on my compute shader and I've tested that it does work and outputs any individual float3 correctly, I made a much slower implementation where individual pixels were rendered on the GPU and copied back to the CPU every time, very slow but it proved my maths in the GPU ray tracing function were sound and gave the right results.</p>\n\n<p>However I'm having difficulty outputting an array of float3's as the RWStructuredBuffer confuses me somewhat</p>\n\n<p>Here is my RWStructuredBuffer</p>\n\n<pre><code>RWStructuredBuffer&lt;float3&gt; Data: register(u0);\n</code></pre>\n\n<p>Nothing special but there for reference</p>\n\n<p>Here is my function on the compute shader that I call with Dispatch</p>\n\n<pre><code>groupshared uint things;\n[numthreads(1, 1, 1)]\nvoid RenderRay(uint3 Gid : SV_GroupID, uint3 DTid : SV_DispatchThreadID, uint3 GTid : SV_GroupThreadID, uint GI : SV_GroupIndex)\n{\n    float4 empty = { 0, 0, 0, 0 };\n    uint offset = 0;\n    float3 pixel;\n    float invWidth = 1 / float(width.x), invHeight = 1 / float(height.x);\n    float fov = 30, aspectratio = width.x / float(height.x);\n    float angle = tan(M_PI * 0.5 * fov / 180.);\n    GroupMemoryBarrierWithGroupSync();\n    for (uint y = 0; y &lt; height.x; ++y) \n    {\n        if(y&gt;0)\n        offset += height.x;\n        for (uint x = 0; x &lt; width.x; ++x)\n        {\n            float xx = (2 * ((x + 0.5) * invWidth) - 1) * angle * aspectratio;\n            float yy = (1 - 2 * ((y + 0.5) * invHeight)) * angle;\n            float4 raydirection = { xx, yy, -1, 0 };\n            normalize(raydirection);\n            pixel = trace(empty, raydirection, 0);\n\n            Data[0][x] = pixel;\n\n        }\n    }\n    GroupMemoryBarrierWithGroupSync();\n</code></pre>\n\n<p>Setting Data[0] = pixel worked for the pixel by pixel implementation since I only needed to return the one value, but I can't achieve the same results trying to output the whole image at once as I can't quite figure out how to add these into an array</p>\n\n<p>Writing it out it sounds like a silly problem but nontheless I'm quite stuck.</p>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["c++", "qt", "syntax-highlighting"], "answers": [{"tags": [], "owner": {"reputation": 2385, "user_id": 1009270, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/33fcdc9c0604cf69abb15e17840d2a3c?s=128&d=identicon&r=PG", "display_name": "john elemans", "link": "https://stackoverflow.com/users/1009270/john-elemans"}, "is_accepted": false, "score": -2, "last_activity_date": 1478102746, "creation_date": 1478102746, "answer_id": 40384540, "question_id": 40384258, "link": "https://stackoverflow.com/questions/40384258/how-to-store-syntax-highlighted-text/40384540#40384540", "title": "How to store syntax-highlighted text?", "body": "<p>This question is probably too broad. But you could probably use HTML markup. It would give you an easy way to test, as well, as you could open up the output in a browser.</p>\n"}, {"tags": [], "owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "is_accepted": false, "score": 0, "last_activity_date": 1478108571, "creation_date": 1478108571, "answer_id": 40386398, "question_id": 40384258, "link": "https://stackoverflow.com/questions/40384258/how-to-store-syntax-highlighted-text/40386398#40386398", "title": "How to store syntax-highlighted text?", "body": "<p>I'll suggest two methods.  </p>\n\n<p><strong>Method 1: Store text with attributes</strong><br>\nChange your data structure to a container of structures.  The structure would contain a text string and a style variable:  </p>\n\n<pre><code>struct Text_With_Properties\n{\n  std::string text;\n  Properties  text_properties;\n};\n</code></pre>\n\n<p>This may take up a lot more space and may not be the most efficient method.  </p>\n\n<p><strong>Method 2: Parse for Style Changes</strong><br>\nMany editors will display the text in normal font, then make another pass parsing for style changes.  For example, when a C++ keyword is found during the 2nd pass, the editor would change its style.  </p>\n\n<p>This method does not require any more space for the data, but does require more processing time.  </p>\n"}], "owner": {"reputation": 5195, "user_id": 4005175, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/3N6Ze.jpg?s=128&g=1", "display_name": "Martin Heraleck&#253;", "link": "https://stackoverflow.com/users/4005175/martin-heraleck%c3%bd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 64, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1478108571, "creation_date": 1478101928, "question_id": 40384258, "link": "https://stackoverflow.com/questions/40384258/how-to-store-syntax-highlighted-text", "title": "How to store syntax-highlighted text?", "body": "<p>I am creating a simple text editor with syntax highlighting from scratch as a school project. Right now, I use <code>QStringList</code> for storing the text data but later I'll be adding the syntax highlighting functionality and I don't know how should I store the data.</p>\n\n<p>One option would be not to save the color information at all and continuously getting it from the code parser. But this would be probably very inefficient.</p>\n\n<p>Maybe better idea is that there would be some list of structs (containing the color and the string) for every line which would store the color for every word in the text. But I'm not so sure how fast will this be either.</p>\n\n<p>What is the best way to store these data?</p>\n\n<p>Thank you</p>\n"}, {"tags": ["c++", "deep-copy", "shallow-copy"], "comments": [{"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 0, "creation_date": 1478101932, "post_id": 40384195, "comment_id": 68020435, "body": "How? You are directing a pointer to point at the same object as <code>ptr</code>. There is no copying happening here"}, {"owner": {"reputation": 4125, "user_id": 3426025, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yxLev.png?s=128&g=1", "display_name": "BeyelerStudios", "link": "https://stackoverflow.com/users/3426025/beyelerstudios"}, "edited": false, "score": 0, "creation_date": 1478102055, "post_id": 40384195, "comment_id": 68020533, "body": "<code>myCString *ptr2 = ptr;</code> invokes a copy on the type <code>myCString*</code> and not <code>myCString</code> so your constructor won&#39;t get called. If you wrote <code>myCString obj2 = ptr;</code> or <code>new myCString(ptr)</code> only then the copy ctor of <code>myCString</code> is used. Also allowing copy from a pointer makes very few sense and only adds to the confusion."}, {"owner": {"reputation": 178, "user_id": 7105542, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bcd0ebb7ea91524d21503d1fcc0d1356?s=128&d=identicon&r=PG&f=1", "display_name": "lifeOfPi", "link": "https://stackoverflow.com/users/7105542/lifeofpi"}, "edited": false, "score": 0, "creation_date": 1478102101, "post_id": 40384195, "comment_id": 68020566, "body": "so, there is no way so that ptr2 and ptr have two different memory spaces?"}, {"owner": {"reputation": 4125, "user_id": 3426025, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yxLev.png?s=128&g=1", "display_name": "BeyelerStudios", "link": "https://stackoverflow.com/users/3426025/beyelerstudios"}, "edited": false, "score": 1, "creation_date": 1478102179, "post_id": 40384195, "comment_id": 68020625, "body": "Yes there is a way, allocate memory... the syntax <code>T *a = b;</code> will always copy a pointer (of type <code>T*</code>) and not its pointee however."}, {"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 0, "creation_date": 1478102188, "post_id": 40384195, "comment_id": 68020631, "body": "<code>ptr</code> and <code>ptr2</code> do occupy two different spaces in memory. However they are pointers and both pointing at the same memory location (where the object is)"}, {"owner": {"reputation": 4125, "user_id": 3426025, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yxLev.png?s=128&g=1", "display_name": "BeyelerStudios", "link": "https://stackoverflow.com/users/3426025/beyelerstudios"}, "edited": false, "score": 0, "creation_date": 1478102425, "post_id": 40384195, "comment_id": 68020806, "body": "Here&#39;s the obligatory <a href=\"https://www.youtube.com/watch?v=f-pJlnpkLp0\" rel=\"nofollow noreferrer\">binky reference</a>..."}, {"owner": {"reputation": 178, "user_id": 7105542, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bcd0ebb7ea91524d21503d1fcc0d1356?s=128&d=identicon&r=PG&f=1", "display_name": "lifeOfPi", "link": "https://stackoverflow.com/users/7105542/lifeofpi"}, "edited": false, "score": 1, "creation_date": 1478102461, "post_id": 40384195, "comment_id": 68020826, "body": "ok... my bad... :) what i wanted to ask is; is there a way these two pointers become independant, so that even if i delete the 1st one, the 2nd one is still usable without changing the code in main()?"}, {"owner": {"reputation": 178, "user_id": 7105542, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bcd0ebb7ea91524d21503d1fcc0d1356?s=128&d=identicon&r=PG&f=1", "display_name": "lifeOfPi", "link": "https://stackoverflow.com/users/7105542/lifeofpi"}, "edited": false, "score": 1, "creation_date": 1478145812, "post_id": 40384195, "comment_id": 68038478, "body": "one more thing, what if i overload = operator? i tried doing that too, but that didn&#39;t help. Can anyone explain why?"}], "answers": [{"comments": [{"owner": {"reputation": 178, "user_id": 7105542, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bcd0ebb7ea91524d21503d1fcc0d1356?s=128&d=identicon&r=PG&f=1", "display_name": "lifeOfPi", "link": "https://stackoverflow.com/users/7105542/lifeofpi"}, "edited": false, "score": 0, "creation_date": 1478102219, "post_id": 40384309, "comment_id": 68020650, "body": "Thanks for the suggestion; but that wont solve this issue right?"}], "tags": [], "owner": {"reputation": 2670, "user_id": 346104, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/31duc.jpg?s=128&g=1", "display_name": "franji1", "link": "https://stackoverflow.com/users/346104/franji1"}, "is_accepted": false, "score": 0, "last_activity_date": 1478102093, "creation_date": 1478102093, "answer_id": 40384309, "question_id": 40384195, "link": "https://stackoverflow.com/questions/40384195/deep-copying-using-copy-constructor-c/40384309#40384309", "title": "deep copying using copy constructor c++", "body": "<p>Change your\n<code>myCString(char* strParam)</code> signature to</p>\n\n<p><code>myCString(const char* strParam)</code></p>\n"}, {"tags": [], "owner": {"reputation": 336, "user_id": 3951733, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44b978c87a1a9309f04bd7c15c4266f5?s=128&d=identicon&r=PG&f=1", "display_name": "Roland", "link": "https://stackoverflow.com/users/3951733/roland"}, "is_accepted": true, "score": 0, "last_activity_date": 1478530490, "creation_date": 1478530490, "answer_id": 40468130, "question_id": 40384195, "link": "https://stackoverflow.com/questions/40384195/deep-copying-using-copy-constructor-c/40468130#40468130", "title": "deep copying using copy constructor c++", "body": "<p>Your request is to make a deep copy of the objekt in the line  <code>myCString *ptr2 = ptr</code>, \n but this aim is not reachable by object's class programing, because this line only copies a pointer and does not involve the object's class.\n If you like to call the copy constructor, You must write as You suggested:\n <code>myCString *ptr2 = new myCString(ptr)</code>; \n or You can write:</p>\n\n<pre><code>myCString mystr(\"Hi! This is myCString\\n\");\ncout&lt;&lt;mystr;\nmyCString mystr2 =mystr;\ncout&lt;&lt;mystr;\n</code></pre>\n\n<p>Another problem: calling function <code>ostream&amp; operator&lt;&lt;(ostream&amp; os, myCString obj)</code> the\n     copy operator <code>myCString(const myCString&amp; obj)</code> is called for parameter obj. You should write </p>\n\n<pre><code>ostream&amp; operator&lt;&lt;(ostream&amp; os, const myCString&amp; obj)\n</code></pre>\n\n<p>to avoid this.</p>\n"}], "owner": {"reputation": 178, "user_id": 7105542, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bcd0ebb7ea91524d21503d1fcc0d1356?s=128&d=identicon&r=PG&f=1", "display_name": "lifeOfPi", "link": "https://stackoverflow.com/users/7105542/lifeofpi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 621, "favorite_count": 0, "accepted_answer_id": 40468130, "answer_count": 2, "score": 0, "last_activity_date": 1478530490, "creation_date": 1478101776, "question_id": 40384195, "link": "https://stackoverflow.com/questions/40384195/deep-copying-using-copy-constructor-c", "title": "deep copying using copy constructor c++", "body": "<p>I am trying to implement my own CString class. I am facing some problem in shallow copying the pointer.\nHere is the class</p>\n\n<pre><code>#include&lt;iostream&gt;\n#include&lt;string.h&gt;\nusing namespace std;\n\nclass myCString{\npublic:\n    myCString(){\n        m_value = NULL;\n    }\n    myCString(char* strParam){\n        int len = length(strParam);\n        m_value = new char[len+1];\n        for(int i=0;i&lt;len; i++)\n        {\n            m_value[i] = strParam[i];\n        }\n        m_value[len]='\\0';\n\n    }\n    myCString(const myCString&amp; obj)\n    {\n        int len = obj.length();\n        m_value = new char[len+1];\n        for(int i=0;i&lt;len; i++)\n        {\n            m_value[i] = obj.m_value[i];\n        }\n        m_value[len]='\\0';\n    }\n        myCString(const myCString *obj)\n    {\n        int len = obj-&gt;length();\n        m_value = new char[len+1];\n        for(int i=0;i&lt;len; i++)\n        {\n            m_value[i] = obj-&gt;m_value[i];\n        }\n        m_value[len]='\\0';\n    }\n     const int length() const\n    {\n        return length(m_value);\n    }\n    myCString operator=(myCString obj)\n    {\n        int i=0;\n        int length= obj.length();\n        m_value = new char[length + 1];\n        for(;i&lt;obj.length(); i++)\n        {\n            m_value[i] = obj.m_value[i];\n        }\n        m_value[length]='\\0';\n        return m_value;\n    }\n\n    ~myCString()\n    {\n        delete []m_value;\n        m_value = NULL;\n    }\n    friend ostream&amp; operator&lt;&lt;(ostream&amp; os, const myCString obj);\nprivate:\n    const int length(char* strParam)const\n    {\n        int i=0;\n        while(strParam[i]!='\\0'){\n        i++;\n        }\n        return i;\n    }\n    char *m_value;\n};\nostream&amp; operator&lt;&lt;(ostream&amp; os, myCString obj)\n    {\n        os&lt;&lt;obj.m_value;\n        return os;\n    }\n</code></pre>\n\n<p>and here is the main():</p>\n\n<pre><code>#include\"myCString.h\"\nint main()\n{\n    myCString *ptr = new myCString(\"Hi! This is myCString\\n\");\n    cout&lt;&lt;*ptr;\n    myCString *ptr2 = ptr;\n    delete ptr;\n    cout&lt;&lt;*ptr2;\n    delete ptr2;\n    return 0;\n}\n</code></pre>\n\n<p>The issue is when shallow copy happens; i know that writing </p>\n\n<pre><code>myCString *ptr2 = new myCString(ptr); \n</code></pre>\n\n<p>will fix the issue; but i want to keep the main function intact and make some changes in the class. \nIs there anyway i can do it?\nThanks in advance.</p>\n"}, {"tags": ["c++", "visual-studio", "gcc", "assert", "dynamic-cast"], "answers": [{"comments": [{"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1478102289, "post_id": 40384301, "comment_id": 68020709, "body": "Re: &quot;answer below me&quot; -- SO rearranges answers depending on various factors, so &quot;below&quot; and &quot;above&quot; can change. Right now, for instance, I don&#39;t see any answer below yours, but I do see one above it."}, {"owner": {"reputation": 9215, "user_id": 5212827, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7e9f9b0d7e2d571c9f8886dd54bd50f9?s=128&d=identicon&r=PG&f=1", "display_name": "DeiDei", "link": "https://stackoverflow.com/users/5212827/deidei"}, "reply_to_user": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1478102357, "post_id": 40384301, "comment_id": 68020759, "body": "@PeteBecker I spent 20 seconds searching for the right word and <i>below</i> was my last resort..."}, {"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "edited": false, "score": 0, "creation_date": 1478102380, "post_id": 40384301, "comment_id": 68020771, "body": "@DeiDei Just link the answer."}], "tags": [], "owner": {"reputation": 9215, "user_id": 5212827, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7e9f9b0d7e2d571c9f8886dd54bd50f9?s=128&d=identicon&r=PG&f=1", "display_name": "DeiDei", "link": "https://stackoverflow.com/users/5212827/deidei"}, "is_accepted": true, "score": 9, "last_activity_date": 1478102429, "last_edit_date": 1478102429, "creation_date": 1478102058, "answer_id": 40384301, "question_id": 40384192, "link": "https://stackoverflow.com/questions/40384192/dynamic-cast-in-assert-causing-error/40384301#40384301", "title": "dynamic_cast in assert Causing Error", "body": "<p><code>assert</code> is a macro. It's handled by the preprocessor which knows nothing about C++ constructs. So the following:</p>\n\n<pre><code>assert(dynamic_cast&lt;Foo&lt;pair&lt;int, int&gt;&gt;*&gt;(test) != NULL)\n</code></pre>\n\n<p>expands to a function-like macro taking two arguments, which in this case are:</p>\n\n<pre><code>dynamic_cast&lt;Foo&lt;pair&lt;int\n</code></pre>\n\n<p>and</p>\n\n<pre><code>int&gt;&gt;*&gt;(test) != NULL\n</code></pre>\n\n<p>Remember that function-like macro arguments are separated by commas. That is all the preprocessor sees. So in this case it sees 2 arguments instead of the 1 argument required by <code>assert</code>.</p>\n\n<p>Your C-style cast version works incidentally because of the parentheses, which have higher precedence than the comma. Putting them around the <code>dynamic_cast</code> does the job as well.</p>\n"}, {"tags": [], "owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "is_accepted": false, "score": 9, "last_activity_date": 1478103711, "last_edit_date": 1478103711, "creation_date": 1478102071, "answer_id": 40384304, "question_id": 40384192, "link": "https://stackoverflow.com/questions/40384192/dynamic-cast-in-assert-causing-error/40384304#40384304", "title": "dynamic_cast in assert Causing Error", "body": "<p>Yup: macros treat top-level commas as argument separators. The simplest fix is to put parentheses around the offending code:</p>\n\n<pre><code>assert((dynamic_cast&lt;Foo&lt;pair&lt;int, int&gt;&gt;*&gt;(test)) != NULL)\n</code></pre>\n\n<p>or, if you prefer, parentheses around the entire content:</p>\n\n<pre><code>assert((dynamic_cast&lt;Foo&lt;pair&lt;int, int&gt;&gt;*&gt;(test) != NULL))\n</code></pre>\n\n<p>The reason the C-style cast in the question compiles is not that it's a C-style cast, but that it puts the template code in parentheses, so the comma is no longer at the outermost level.</p>\n"}], "owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 421, "favorite_count": 0, "accepted_answer_id": 40384301, "answer_count": 2, "score": 11, "last_activity_date": 1478106660, "creation_date": 1478101765, "last_edit_date": 1478106660, "question_id": 40384192, "link": "https://stackoverflow.com/questions/40384192/dynamic-cast-in-assert-causing-error", "title": "dynamic_cast in assert Causing Error", "body": "<p><strike>I'm using the antiquated Visual Studio 2008 (let me save you the trouble \"there's your problem\".) This seems to be a problem with Visual Studio: <a href=\"http://rextester.com/XKFR77690\" rel=\"noreferrer\">http://rextester.com/XKFR77690</a></strike> This seems to be a problem with the <code>assert</code> macro: <a href=\"http://ideone.com/bhxMi0\" rel=\"noreferrer\">http://ideone.com/bhxMi0</a></p>\n\n<p>Given these structs:</p>\n\n<pre><code>struct base { virtual ~base() {} };\n\ntemplate &lt;typename T&gt;\nstruct Foo : base { T foo; };\n</code></pre>\n\n<p>I can do this:</p>\n\n<pre><code>base* test = new Foo&lt;pair&lt;int, int&gt;&gt;;\n\nif(dynamic_cast&lt;Foo&lt;pair&lt;int, int&gt;&gt;*&gt;(test) != NULL) cout &lt;&lt; \"hello world\\n\";\n</code></pre>\n\n<p>But when I use the exact same code as is in the <code>if</code>-statement in an <code>assert</code>: <code>assert(dynamic_cast&lt;Foo&lt;pair&lt;int, int&gt;&gt;*&gt;(test) != NULL)</code> I get an error:</p>\n\n<blockquote>\n  <p>warning C4002: too many actual parameters for macro <code>assert</code><br>\n  error C2143: syntax error : missing ',' before ')'</p>\n</blockquote>\n\n<p>Incidentally I can fix this by using a C-style cast: <code>assert((Foo&lt;pair&lt;int, int&gt;&gt;*)(test) != NULL)</code> But I think that the C-Style cast will do a <code>static_cast</code> not a <code>dynamic_cast</code> which I don't want.</p>\n"}, {"tags": ["c++", "gstreamer"], "answers": [{"tags": [], "owner": {"reputation": 111, "user_id": 3106013, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad1b2e1c781745d064617ba552c51462?s=128&d=identicon&r=PG&f=1", "display_name": "Devarsh Thakkar", "link": "https://stackoverflow.com/users/3106013/devarsh-thakkar"}, "is_accepted": false, "score": 0, "last_activity_date": 1478161384, "creation_date": 1478161384, "answer_id": 40396725, "question_id": 40383979, "link": "https://stackoverflow.com/questions/40383979/how-include-c-binary-in-gstreamer-plugin/40396725#40396725", "title": "How include c++ binary in gstreamer plugin?", "body": "<p>When running gst-inspect the binary is not able to find c++ symbols needed during runtime, so you need to set LD_LIBRARY_PATH to point to libstdc++ shared library.</p>\n\n<pre><code>export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/path/to/libstdc++.so.6\n</code></pre>\n\n<p>Also the libstdc++ version should be same as the one expected by kodo binary file you mentioned. You can check it by using </p>\n\n<pre><code>ldd &lt;kodo_binary&gt;\n</code></pre>\n\n<p>Also to check other missing dependencies please use </p>\n\n<pre><code>ldd /usr/local/lib/gstreamer-1.0/libgstmykodoenc.so\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 7103702, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66406ea2d342e8111297f154973eb68b?s=128&d=identicon&r=PG&f=1", "display_name": "Claudio F.", "link": "https://stackoverflow.com/users/7103702/claudio-f"}, "is_accepted": false, "score": 0, "last_activity_date": 1478508911, "creation_date": 1478508911, "answer_id": 40461152, "question_id": 40383979, "link": "https://stackoverflow.com/questions/40383979/how-include-c-binary-in-gstreamer-plugin/40461152#40461152", "title": "How include c++ binary in gstreamer plugin?", "body": "<p>I solved adding -lstdc++ in the correct place in the makefile.</p>\n\n<pre><code>libgstmykododec_la_SOURCES = gstmykododec.c gstmykododec.h kodoc.h\n</code></pre>\n\n<p>libgstmykododec_la_CFLAGS = $(GST_CFLAGS) -I./kodolib/include</p>\n\n<p>libgstmykododec_la_LIBADD = $(GST_LIBS)  -L./kodolib  -lkodoc_static -lfifi -lcpuid -lstdc++ </p>\n\n<p>libgstmykododec_la_LDFLAGS = $(GST_PLUGIN_LDFLAGS)  -Wl,-Bdynamic -lm </p>\n\n<p>libgstmykododec_la_LIBTOOLFLAGS = --tag=disable-static</p>\n"}], "owner": {"reputation": 1, "user_id": 7103702, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66406ea2d342e8111297f154973eb68b?s=128&d=identicon&r=PG&f=1", "display_name": "Claudio F.", "link": "https://stackoverflow.com/users/7103702/claudio-f"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 440, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1478879818, "creation_date": 1478101096, "last_edit_date": 1478879818, "question_id": 40383979, "link": "https://stackoverflow.com/questions/40383979/how-include-c-binary-in-gstreamer-plugin", "title": "How include c++ binary in gstreamer plugin?", "body": "<p>I'm trying to develop a gstreamer plugin that includes KODO linear network coding. Kodo comes as a binary file c++. At the time of creating and filling with autogen.sh make and sudo make install does not detect any error. When I run gst-inspect mykodoenc the result is:</p>\n\n<blockquote>\n  <p>GStreamer-WARNING **: Failed to load plugin\n  '/usr/local/lib/gstreamer-1.0/libgstmykodoenc.so':\n  /usr/local/lib/gstreamer-1.0/libgstmykodoenc.so: undefined symbol:\n  _ZTVN10__cxxabiv117__class_type_infoE</p>\n</blockquote>\n\n<p>How can include c++ binary module on my gstreamer plugin?</p>\n"}, {"tags": ["c++", "visual-studio", "visual-studio-2013", "breakpoints"], "comments": [{"owner": {"reputation": 69264, "user_id": 256138, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ed9e8c0ff767e38f8fade11f5af00a45?s=128&d=identicon&r=PG", "display_name": "rubenvb", "link": "https://stackoverflow.com/users/256138/rubenvb"}, "edited": false, "score": 0, "creation_date": 1478101790, "post_id": 40383904, "comment_id": 68020336, "body": "You cannot break on a type. You need specific functions or data which have memory addresses."}, {"owner": {"reputation": 1539, "user_id": 2223978, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/e4ac087f1604ecff0fcc1c872aeb2e4c?s=128&d=identicon&r=PG", "display_name": "H&#39;H", "link": "https://stackoverflow.com/users/2223978/hh"}, "reply_to_user": {"reputation": 69264, "user_id": 256138, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ed9e8c0ff767e38f8fade11f5af00a45?s=128&d=identicon&r=PG", "display_name": "rubenvb", "link": "https://stackoverflow.com/users/256138/rubenvb"}, "edited": false, "score": 0, "creation_date": 1478101948, "post_id": 40383904, "comment_id": 68020449, "body": "Actually CustomAllocator is a class. It is not a type."}, {"owner": {"reputation": 69264, "user_id": 256138, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ed9e8c0ff767e38f8fade11f5af00a45?s=128&d=identicon&r=PG", "display_name": "rubenvb", "link": "https://stackoverflow.com/users/256138/rubenvb"}, "edited": false, "score": 0, "creation_date": 1478102052, "post_id": 40383904, "comment_id": 68020528, "body": "I fail to see the difference. It&#39;s not a object, nor a function, so it&#39;s a type. So is <code>CustomAllocator::*</code>. Its a &quot;pointer to member of <code>CustomAllocator</code>&quot;. Everything in quotes in the previous sentence sums up to a typename."}, {"owner": {"reputation": 1539, "user_id": 2223978, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/e4ac087f1604ecff0fcc1c872aeb2e4c?s=128&d=identicon&r=PG", "display_name": "H&#39;H", "link": "https://stackoverflow.com/users/2223978/hh"}, "reply_to_user": {"reputation": 69264, "user_id": 256138, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ed9e8c0ff767e38f8fade11f5af00a45?s=128&d=identicon&r=PG", "display_name": "rubenvb", "link": "https://stackoverflow.com/users/256138/rubenvb"}, "edited": false, "score": 0, "creation_date": 1478102106, "post_id": 40383904, "comment_id": 68020572, "body": "please see: <a href=\"https://blogs.msdn.microsoft.com/habibh/2009/09/10/class-breakpoint-how-to-set-a-breakpoint-on-a-c-class-in-the-visual-studio-debugger/\" rel=\"nofollow noreferrer\">blogs.msdn.microsoft.com/habibh/2009/09/10/&hellip;</a>"}, {"owner": {"reputation": 69264, "user_id": 256138, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ed9e8c0ff767e38f8fade11f5af00a45?s=128&d=identicon&r=PG", "display_name": "rubenvb", "link": "https://stackoverflow.com/users/256138/rubenvb"}, "edited": false, "score": 0, "creation_date": 1478102173, "post_id": 40383904, "comment_id": 68020621, "body": "Ah, I did not know about this. I wouldn&#39;t be surprised all versions beyond VS2008 do not have this feature though..."}], "owner": {"reputation": 1539, "user_id": 2223978, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/e4ac087f1604ecff0fcc1c872aeb2e4c?s=128&d=identicon&r=PG", "display_name": "H&#39;H", "link": "https://stackoverflow.com/users/2223978/hh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 58, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1478101216, "creation_date": 1478100848, "last_edit_date": 1478101216, "question_id": 40383904, "link": "https://stackoverflow.com/questions/40383904/a-breakpoint-on-a-class-visual-studio-2013", "title": "a Breakpoint on a Class Visual Studio 2013", "body": "<p>I am trying to set a Breakpoint on a Class c++. As explained <a href=\"https://blogs.msdn.microsoft.com/habibh/2009/09/10/class-breakpoint-how-to-set-a-breakpoint-on-a-c-class-in-the-visual-studio-debugger/\" rel=\"nofollow noreferrer\"><strong>here</strong></a>, I have to set a breakpoint such as <em>MyClass</em>::* in order to insert a break to all methods inside <em>MyClass</em>. </p>\n\n<p>However, when I do local window debugging in visual studio (v.2013), there is a exclamation mark on the breakpoint saying that the breakpoint will not currently be hit, The function cannot be found.</p>\n\n<p>Any idea would be appreciated. </p>\n\n<p><a href=\"https://i.stack.imgur.com/xyq70.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/xyq70.png\" alt=\"enter image description here\"></a></p>\n"}]