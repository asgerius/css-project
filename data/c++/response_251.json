[{"tags": ["c++", "qt"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 12198829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a013eec759459f0dd6c353f178745b60?s=128&d=identicon&r=PG&f=1", "display_name": "io_r", "link": "https://stackoverflow.com/users/12198829/io-r"}, "edited": false, "score": 0, "creation_date": 1572484557, "post_id": 58635217, "comment_id": 103578128, "body": "These alternatives work, thank you!, and responding to your question, the listOfNames is a string type array."}], "tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": false, "score": 0, "last_activity_date": 1572485407, "last_edit_date": 1572485407, "creation_date": 1572480053, "answer_id": 58635217, "question_id": 58635093, "link": "https://stackoverflow.com/questions/58635093/recording-user-input-to-string-array-from-editline/58635217#58635217", "title": "recording user input to string array from editLine", "body": "<p>You did not show what <code>v.listOfNames</code> is declared as, but it like a static array, is that right?  You should use a <code>std::vector&lt;std::string&gt;</code> instead.</p>\n\n<p>In any case, in your QT code, your <code>while</code> loop runs endlessly if the user enters a non-blank string, since you don't modify <code>v.getNames</code> so that its <code>length()</code> can decrease over time. You probably don't need the <code>while</code> loop at all if the user can enter only 1 string per button click.</p>\n\n<p>Also, you are incrementing <code>namesEntered</code> too soon, and not validating when <code>namesEntered</code> exceeds the bounds of <code>listOfNames</code> if it is indeed a static array.</p>\n\n<p>Try something more like this instead:</p>\n\n<p>CLI</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>enteredNames = 0;\n...\nstd::cout &lt;&lt; \"Enter a name\\tor enter nothing to quit\" &lt;&lt; std::endl &lt;&lt; \"&gt;&gt;&gt;\"; \nwhile (getline(std::cin, getNames) &amp;&amp; !getNames.empty())\n{\n    listOfNames[enteredNames] = getNames;\n    ++enteredNames;\n\n    std::cout &lt;&lt; \"Enter another name\\tor enter nothing to quit\" &lt;&lt; std::endl &lt;&lt; \"&gt;&gt;&gt;\"; \n}\n</code></pre>\n\n<p>QT</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>void MainWindow ... initialize(){\n    v.namesEntered = 0;\n}\n\nvoid MainWindow ... buttonClicked(){\n    v.getNames = ui-&gt;nameInputBox-&gt;text().toStdString();\n    if (!v.getNames.empty()) {\n        if (v.namesEntered &gt;= std::size(v.listOfNames)) {\n            // the list is full, do something else ...\n        }\n        else {\n            v.listOfNames[v.namesEntered] = v.getNames;\n            v.namesEntered++;\n        }\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 12198829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a013eec759459f0dd6c353f178745b60?s=128&d=identicon&r=PG&f=1", "display_name": "io_r", "link": "https://stackoverflow.com/users/12198829/io-r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 30, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1572485407, "creation_date": 1572479061, "question_id": 58635093, "link": "https://stackoverflow.com/questions/58635093/recording-user-input-to-string-array-from-editline", "title": "recording user input to string array from editLine", "body": "<p>Building a simple GUI in QT. I want to collect a list of strings every time a user inserts a name from the insert button. I got the raw logic to work for cli, however it is not the same when I convert logic to QT/C++ because the program just closes forcefully. I am using lineEdit from the input widgets. What am I doing wrong and what could have been a better alternative?</p>\n\n<p>CLI Logic:</p>\n\n<pre><code>std::cout&lt;&lt;\"Enter a name\\tor enter nothing to quit\"&lt;&lt;std::endl\n&lt;&lt;\"&gt;&gt;&gt;\"; \ngetline(std::cin, getNames);\nlistOfNames[enteredNames] = getNames;\n\nwhile(getNames.length() &gt; 0){\n    enteredNames++;\n\n    std::cout&lt;&lt;\"Enter another name\\tor enter nothing to quit\"&lt;&lt;std::endl\n    &lt;&lt;\"&gt;&gt;&gt;\"; \n    getline(std::cin, getNames);\n    listOfNames[enteredNames] = getNames;\n}\n</code></pre>\n\n<p>QT Logic:</p>\n\n<pre><code>void MainWindow ... buttonClicked(){\n  v.namesEntered = 0;\n  v.listOfNames[50]={0};\n\n  v.getNames = ui-&gt;nameInputBox-&gt;text().toStdString();\n  while(v.getNames.length() &gt; 0){\n    v.namesEntered++;\n    v.listOfNames[v.namesEntered] = v.getNames;\n  }\n}\n</code></pre>\n\n<p>In case you are wondering the dot notations on v data is because I made a structure in mainwindow.h and needed my variables to be global for other functions.</p>\n"}, {"tags": ["c++", "language-lawyer", "undefined-behavior", "constexpr"], "comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 1, "creation_date": 1572479738, "post_id": 58635074, "comment_id": 103577136, "body": "(Bugs aside) Compilers might have different numbers limits (as for template recursion instantiation) for constexpr functions which might explain difference between those compilers"}, {"owner": {"reputation": 2302, "user_id": 1583122, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/61e3c0a15501f879955689b3cfa71ac5?s=128&d=identicon&r=PG", "display_name": "B&#233;renger", "link": "https://stackoverflow.com/users/1583122/b%c3%a9renger"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1572480009, "post_id": 58635074, "comment_id": 103577198, "body": "@Jarod42 Yes but generally they say something like &quot;step limit reached&quot;. Here, GCC just says &quot;its not constexpr&quot; (more precisely &quot;&quot;the value of \u2018&lt;anonymous&gt;\u2019 is not usable in a constant expression&quot;&quot;)"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 3, "creation_date": 1572480053, "post_id": 58635074, "comment_id": 103577205, "body": "There are limtations on what expressions are allowed in constexpr contexts and those rules by nature exclude all of the &quot;difficult to detect&quot; UB scenarios such as halting problems"}, {"owner": {"reputation": 2302, "user_id": 1583122, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/61e3c0a15501f879955689b3cfa71ac5?s=128&d=identicon&r=PG", "display_name": "B&#233;renger", "link": "https://stackoverflow.com/users/1583122/b%c3%a9renger"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1572480311, "post_id": 58635074, "comment_id": 103577273, "body": "@M.M Ok so assuming Clang is correct, it means GCC has a bug in the sense that it flags UB something that is provably not ?"}, {"owner": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 0, "creation_date": 1572480693, "post_id": 58635074, "comment_id": 103577365, "body": "You may find this blog post of relevance <a href=\"http://blog.llvm.org/2011/05/what-every-c-programmer-should-know.html\" rel=\"nofollow noreferrer\">What Every C Programmer Should Know About Undefined Behavior</a>."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1572480953, "post_id": 58635074, "comment_id": 103577423, "body": "@B&#233;renger I don&#39;t understand your last comment , is there a code sample where you think gcc has a bug?"}, {"owner": {"reputation": 2302, "user_id": 1583122, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/61e3c0a15501f879955689b3cfa71ac5?s=128&d=identicon&r=PG", "display_name": "B&#233;renger", "link": "https://stackoverflow.com/users/1583122/b%c3%a9renger"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 2, "creation_date": 1572481325, "post_id": 58635074, "comment_id": 103577486, "body": "@M.M Yes. Clang and GCC disagree, so either Clang accepts a constexpr it should not, or GCC does not accept a constexpr it should. But I can&#39;t extract the code easily (I will post a specific question if I can)"}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1572555772, "post_id": 58635074, "comment_id": 103607053, "body": "@B&#233;renger: If expansion of a 200-deep function call would allow a value to be recognized as a constant, would a compiler not be allowed to at its leisure either treat the value as a constant, or treat the expression as something that could be computed at runtime?"}, {"owner": {"reputation": 2302, "user_id": 1583122, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/61e3c0a15501f879955689b3cfa71ac5?s=128&d=identicon&r=PG", "display_name": "B&#233;renger", "link": "https://stackoverflow.com/users/1583122/b%c3%a9renger"}, "reply_to_user": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1572560899, "post_id": 58635074, "comment_id": 103608556, "body": "@supercat I am not sure I understand what you mean. If the function is constexpr and called in a constexpr context, then the standard requires the compiler to find the value no matter what"}, {"owner": {"reputation": 2302, "user_id": 1583122, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/61e3c0a15501f879955689b3cfa71ac5?s=128&d=identicon&r=PG", "display_name": "B&#233;renger", "link": "https://stackoverflow.com/users/1583122/b%c3%a9renger"}, "edited": false, "score": 0, "creation_date": 1572560960, "post_id": 58635074, "comment_id": 103608578, "body": "Or issue an error if it encounters UB (or incorrect syntax and the like)"}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1572613282, "post_id": 58635074, "comment_id": 103622412, "body": "@B&#233;renger: If a compiler doesn&#39;t have as much memory available to it as might be available at run-time, an expression that would require more memory to evaluate than the compiler has available would be a valid expression that could be evaluated in any context not requiring compile-time evaluation.  The only sense in which the expression would be invalid is that it wouldn&#39;t be a constant."}], "answers": [{"tags": [], "owner": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "is_accepted": false, "score": 3, "last_activity_date": 1572480575, "last_edit_date": 1572480575, "creation_date": 1572480214, "answer_id": 58635236, "question_id": 58635074, "link": "https://stackoverflow.com/questions/58635074/how-do-compilers-know-c-constexpr-computations-do-not-trigger-undefined-behavi/58635236#58635236", "title": "How do compilers know C++ constexpr computations do not trigger undefined behavior?", "body": "<p>The point you are missing is that constant expressions only allow for a restricted subset of the language.</p>\n\n<p>If you go outside that, you no longer have a constant expression, and if you are in a context needing one the standard mandates diagnosing the error.</p>\n\n<p>A <code>constexpr</code>-function only has to have at least one input where it is a constant expression, no diagnostic required. All the rest might not be.</p>\n\n<p>In the general case, compilers just note paths leading to UB to prune presumably dead code, and explore the freedom they have in optimizing what remains. They are not required to find all, most, or even any of those opportunities though.</p>\n"}, {"comments": [{"owner": {"reputation": 2302, "user_id": 1583122, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/61e3c0a15501f879955689b3cfa71ac5?s=128&d=identicon&r=PG", "display_name": "B&#233;renger", "link": "https://stackoverflow.com/users/1583122/b%c3%a9renger"}, "edited": false, "score": 0, "creation_date": 1572481094, "post_id": 58635296, "comment_id": 103577444, "body": "Ok but then even if you can determine it. Isn&#39;t there some cases where you have a lot of pointer running around, and it is just too expansive to check whether they are all refering to something valid? Plus you have to ensure that pointer substraction is done from pointers of the same array and so on..."}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "reply_to_user": {"reputation": 2302, "user_id": 1583122, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/61e3c0a15501f879955689b3cfa71ac5?s=128&d=identicon&r=PG", "display_name": "B&#233;renger", "link": "https://stackoverflow.com/users/1583122/b%c3%a9renger"}, "edited": false, "score": 0, "creation_date": 1572481136, "post_id": 58635296, "comment_id": 103577452, "body": "@B&#233;renger: It&#39;s <i>compile time</i>. Performance of execution is not the most important thing going on. It should also be noted that debugging code at compile time is exceedingly difficult. Better to stop those bugs from happening to begin with."}, {"owner": {"reputation": 2302, "user_id": 1583122, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/61e3c0a15501f879955689b3cfa71ac5?s=128&d=identicon&r=PG", "display_name": "B&#233;renger", "link": "https://stackoverflow.com/users/1583122/b%c3%a9renger"}, "edited": false, "score": 0, "creation_date": 1572481177, "post_id": 58635296, "comment_id": 103577457, "body": "Do we have an idea of the complexity of running the &quot;UB-checker&quot;? Because if it is exponential, it does&#39;nt matter that this is decidable in theory"}, {"owner": {"reputation": 2302, "user_id": 1583122, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/61e3c0a15501f879955689b3cfa71ac5?s=128&d=identicon&r=PG", "display_name": "B&#233;renger", "link": "https://stackoverflow.com/users/1583122/b%c3%a9renger"}, "edited": false, "score": 0, "creation_date": 1572481224, "post_id": 58635296, "comment_id": 103577466, "body": "I mean at the end, the compilation time should still be reasonnable"}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "reply_to_user": {"reputation": 2302, "user_id": 1583122, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/61e3c0a15501f879955689b3cfa71ac5?s=128&d=identicon&r=PG", "display_name": "B&#233;renger", "link": "https://stackoverflow.com/users/1583122/b%c3%a9renger"}, "edited": false, "score": 0, "creation_date": 1572481233, "post_id": 58635296, "comment_id": 103577469, "body": "@B&#233;renger: What makes you think it is a &quot;UB-checker&quot;? The compiler can implement constant evaluation however it wants. That &quot;pointer&quot; you&#39;re passing around doesn&#39;t have to have any relationship to what the computer uses."}, {"owner": {"reputation": 2302, "user_id": 1583122, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/61e3c0a15501f879955689b3cfa71ac5?s=128&d=identicon&r=PG", "display_name": "B&#233;renger", "link": "https://stackoverflow.com/users/1583122/b%c3%a9renger"}, "edited": false, "score": 0, "creation_date": 1572481504, "post_id": 58635296, "comment_id": 103577520, "body": "I mean, let&#39;s say I dereference a pointer. Then the compiler (interpreter part of it I should say) could just dereference it and take the value, whatever it is. But it also checks that it has the right to do that (what I call UB checker)"}, {"owner": {"reputation": 2302, "user_id": 1583122, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/61e3c0a15501f879955689b3cfa71ac5?s=128&d=identicon&r=PG", "display_name": "B&#233;renger", "link": "https://stackoverflow.com/users/1583122/b%c3%a9renger"}, "edited": false, "score": 0, "creation_date": 1572481541, "post_id": 58635296, "comment_id": 103577527, "body": "Or do I misunderstand something?"}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "reply_to_user": {"reputation": 2302, "user_id": 1583122, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/61e3c0a15501f879955689b3cfa71ac5?s=128&d=identicon&r=PG", "display_name": "B&#233;renger", "link": "https://stackoverflow.com/users/1583122/b%c3%a9renger"}, "edited": false, "score": 0, "creation_date": 1572482066, "post_id": 58635296, "comment_id": 103577646, "body": "@B&#233;renger: Again, you assume that the implementation is such that the ability to dereference a pointer is decoupled from the ability to know whether you have the right to."}, {"owner": {"reputation": 2302, "user_id": 1583122, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/61e3c0a15501f879955689b3cfa71ac5?s=128&d=identicon&r=PG", "display_name": "B&#233;renger", "link": "https://stackoverflow.com/users/1583122/b%c3%a9renger"}, "edited": false, "score": 0, "creation_date": 1572482286, "post_id": 58635296, "comment_id": 103577680, "body": "I don&#39;t really understand. Even if it is done all at once, I would be very surprised if you don&#39;t need additionnal logic (and storage) in order to check this kind of things"}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "reply_to_user": {"reputation": 2302, "user_id": 1583122, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/61e3c0a15501f879955689b3cfa71ac5?s=128&d=identicon&r=PG", "display_name": "B&#233;renger", "link": "https://stackoverflow.com/users/1583122/b%c3%a9renger"}, "edited": false, "score": 0, "creation_date": 1572484203, "post_id": 58635296, "comment_id": 103578067, "body": "@B&#233;renger: You&#39;re asking the question backwards. The question, as I stated in an update to my answer, really is about why C++ doesn&#39;t simply eliminate UB generally. Once you understand why UB exists, then it becomes apparent that most of those reasons just don&#39;t apply to compile-time code. And the only reason that might still apply (performance) isn&#39;t nearly as important at compile time because... it&#39;s <i>compile time</i>."}], "tags": [], "owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "is_accepted": false, "score": 4, "last_activity_date": 1573269976, "last_edit_date": 1573269976, "creation_date": 1572480732, "answer_id": 58635296, "question_id": 58635074, "link": "https://stackoverflow.com/questions/58635074/how-do-compilers-know-c-constexpr-computations-do-not-trigger-undefined-behavi/58635296#58635296", "title": "How do compilers know C++ constexpr computations do not trigger undefined behavior?", "body": "<blockquote>\n  <p>In this talk, Chandler Carruth states that \"you will run out of the ability to detect errors\" when checking for UB, and that in the general case, detecting UB is related to the halting problem, so provably impossible to decide.</p>\n</blockquote>\n\n<p>The Halting Problem is when you take a program and try to decide whether the program, if it were to execute, would definitely halt. By definition, the Halting Problem only looks at the program as a locked-off object.</p>\n\n<p>Constant evaluation is... <em>evaluation</em>. You are executing the program, not merely looking at the source code.</p>\n\n<p>Undefined behavior happens when your program's <em>execution</em> does something undefined. Most cases of UB cannot be determined to be well-defined or not just from inspecting the source code. Consider this code:</p>\n\n<pre><code>void foo(void *ptr)\n{\n  *reinterpret_cast&lt;int*&gt;(ptr) = 20;\n}\n</code></pre>\n\n<p>Is that UB or not? It depends; if a pointer to an <code>int</code> were passed into <code>foo</code>, it would be well-defined. Whether this code is well-defined or not can only be determined by how it is <em>executed</em>.</p>\n\n<p>Constant evaluation requires executing code; that's why we often refer to it as compile-time execution. When you're executing code, it is possible to know if a particular execution of <code>foo</code> has been passed a pointer to an actual <code>int</code> (ignore the fact that <code>reinterpret_cast</code> is forbidden in <code>constexpr</code> code). As such, at evaluation time, you can know whether UB is happening.</p>\n\n<blockquote>\n  <p>So what do compilers do when they cannot decide if a program is UB or not?</p>\n</blockquote>\n\n<p>That's not actually a thing that can happen. Assuming the specification is complete and without holes, whether an <em>execution</em> of a program exhibits well-defined behavior or not is merely a matter of following the specification.</p>\n\n<p>The problem you're having with GCC vs. Clang is not due to whether UB can be determined or not.</p>\n\n<blockquote>\n  <p>More fundamentally, why is UB-free requested by the standard? Is there a technical reason?</p>\n</blockquote>\n\n<p>Hypothetically, we could rip all undefined behavior out of C++ or even C. We could have everything be a priori well-defined and remove anything from the language whose evaluation could not be definitely determinable from first principles.</p>\n\n<p>The standard doesn't do that because it would be bad. It would prevent us from doing all kinds of useful, low-level things. It would prevent useful compiler optimizations. And so forth.</p>\n\n<p>None of those reasons apply to compile-time code execution. Especially that whole \"useful, low-level things\" part. For compiled code, there is an actual real machine that the generated code executes on. So having a back door to talk to the real machine makes sense. At compile-time however, there is no real machine to talk to; there is only the C++-defined abstract machine. So what's the point of allowing UB?</p>\n\n<p>The compiler doesn't generate machine language and execute it; constant evaluation is basically executing a scripting language within the compiler. And like most scripting languages, you want it to evaluate safely and correctly. You want errors (and UB <strong><em>is an error</em></strong>) to be caught quickly and provide a clean error message at the point of failure, rather than dying arbitrarily later in the process.</p>\n"}], "owner": {"reputation": 2302, "user_id": 1583122, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/61e3c0a15501f879955689b3cfa71ac5?s=128&d=identicon&r=PG", "display_name": "B&#233;renger", "link": "https://stackoverflow.com/users/1583122/b%c3%a9renger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 197, "favorite_count": 3, "answer_count": 2, "score": 4, "last_activity_date": 1573269976, "creation_date": 1572478892, "last_edit_date": 1572482126, "question_id": 58635074, "link": "https://stackoverflow.com/questions/58635074/how-do-compilers-know-c-constexpr-computations-do-not-trigger-undefined-behavi", "title": "How do compilers know C++ constexpr computations do not trigger undefined behavior?", "body": "<p>The C++ standard <strong>mandates</strong> compilers to check for <strong>undefined behavior</strong> in C++ <strong>constexpr computations</strong>.</p>\n\n<p>In <a href=\"https://www.youtube.com/watch?v=yG1OZ69H_-o\" rel=\"nofollow noreferrer\">this talk</a>, Chandler Carruth states that \"you will run out of the ability to detect errors\" when checking for UB, and that in the general case, detecting UB is related to the <a href=\"https://en.wikipedia.org/wiki/Halting_problem\" rel=\"nofollow noreferrer\">halting problem</a>, so provably <strong>impossible to decide</strong>.</p>\n\n<p>He is not talking about UB in constexpr, but <strong>constexpr computations are as general as a regular programs since C++14</strong>, so this still applies.</p>\n\n<p><strong>So what do compilers do when they cannot decide if a program is UB or not</strong>? Do they still accept the program and go on compiling with fingers crossed? Or are they more conservative and reject the program, even if it is potentially correct? (My personnal feeling is they do that)</p>\n\n<p>For me, this is of practical importance since I have a constexpr evaluation with non-trivial pointer arithmetics compiling fine with Clang but failing with GCC, and I am pretty sure this not UB. You can say it is a GCC bug, but if UB is undecidable, all compilers are and will be buggy in this regard.</p>\n\n<p>More fundamentally, <strong>why is UB-free requested</strong> by the standard? Is there a technical reason? Or more a philosophical one (\"if the compiler can't check, the programmer can trigger UB, and bad things will result\")?</p>\n\n<p>I think this is inconsistent with the rest of C++ that never prevents you from shooting yourself in the foot. I would prefer GCC to accept my constexpr code and crash, or emit trash if UB; rather than not compiling when it does not know if it is UB.</p>\n\n<p>====== \n<strong>EDIT</strong> ======</p>\n\n<p>As pointed out by M.M and Nicol Bolas, the standard specifies limitations (even in C++14) so that we are never in a halting problem type of UB. However, I am still wondering if checking for UB is maybe too complex and if compiler heuristics fail, then they flag it (potentially incorrectly) as non-constexpr.</p>\n\n<p>But I have the feeling from the comments that this is more a problem of non-mature implementations.</p>\n"}, {"tags": ["c++", "string", "numbers"], "comments": [{"owner": {"reputation": 1975, "user_id": 6070341, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YHHZU.png?s=128&g=1", "display_name": "Costantino Grana", "link": "https://stackoverflow.com/users/6070341/costantino-grana"}, "edited": false, "score": 0, "creation_date": 1572478827, "post_id": 58634979, "comment_id": 103576959, "body": "Can you at least try to formulate the problem correctly? The &quot;write to console&quot; part is not the problem. Now, you are given an array of elements (are these ordered?) and you need to find &quot;the bigest string of numbers&quot;? The sequence which satisfies which property? Playing the guess game, I&#39;d select 2-8, since 8-2=6 which is larger than the examples. And please, please: provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}, {"owner": {"reputation": 25, "user_id": 12300283, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9e45922f384943e55c0d88f749d23e2?s=128&d=identicon&r=PG&f=1", "display_name": "Awarestor", "link": "https://stackoverflow.com/users/12300283/awarestor"}, "reply_to_user": {"reputation": 1975, "user_id": 6070341, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YHHZU.png?s=128&g=1", "display_name": "Costantino Grana", "link": "https://stackoverflow.com/users/6070341/costantino-grana"}, "edited": false, "score": 0, "creation_date": 1572479419, "post_id": 58634979, "comment_id": 103577089, "body": "I need to find the longest growing row, which increases by 1. 2 3 4 (2+1=3, 3+1=4 and 4+1= 7 it&#39;s wrong. And in 2 3 4 row has 2 element and it&#39;s the longest not 7 8 where it is just 1"}, {"owner": {"reputation": 1975, "user_id": 6070341, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YHHZU.png?s=128&g=1", "display_name": "Costantino Grana", "link": "https://stackoverflow.com/users/6070341/costantino-grana"}, "edited": false, "score": 0, "creation_date": 1572479645, "post_id": 58634979, "comment_id": 103577126, "body": "Ok, now take the time to edit your question (text and title) so that the problem definition is clear to everyone, including yourself. Then keep editing until your example code (which is not the correct solution) can be copy and pasted into a file and compiled without errors."}], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 12300283, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9e45922f384943e55c0d88f749d23e2?s=128&d=identicon&r=PG&f=1", "display_name": "Awarestor", "link": "https://stackoverflow.com/users/12300283/awarestor"}, "edited": false, "score": 0, "creation_date": 1572480865, "post_id": 58635240, "comment_id": 103577398, "body": "the result is 7 8 for me :("}, {"owner": {"reputation": 25, "user_id": 12300283, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9e45922f384943e55c0d88f749d23e2?s=128&d=identicon&r=PG&f=1", "display_name": "Awarestor", "link": "https://stackoverflow.com/users/12300283/awarestor"}, "edited": false, "score": 0, "creation_date": 1572481168, "post_id": 58635240, "comment_id": 103577456, "body": "But i look your code again and it will be good, but i got wrong result"}, {"owner": {"reputation": 482, "user_id": 6105985, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-lEqxGMHWDuM/AAAAAAAAAAI/AAAAAAAAACU/VsqqqzUhbNI/photo.jpg?sz=128", "display_name": "Bruce Shen", "link": "https://stackoverflow.com/users/6105985/bruce-shen"}, "reply_to_user": {"reputation": 25, "user_id": 12300283, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9e45922f384943e55c0d88f749d23e2?s=128&d=identicon&r=PG&f=1", "display_name": "Awarestor", "link": "https://stackoverflow.com/users/12300283/awarestor"}, "edited": false, "score": 0, "creation_date": 1572481716, "post_id": 58635240, "comment_id": 103577566, "body": "replace <code>cur = max</code> with <code>max = cur</code> in the middle"}], "tags": [], "owner": {"reputation": 482, "user_id": 6105985, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-lEqxGMHWDuM/AAAAAAAAAAI/AAAAAAAAACU/VsqqqzUhbNI/photo.jpg?sz=128", "display_name": "Bruce Shen", "link": "https://stackoverflow.com/users/6105985/bruce-shen"}, "is_accepted": true, "score": 0, "last_activity_date": 1572481675, "last_edit_date": 1572481675, "creation_date": 1572480221, "answer_id": 58635240, "question_id": 58634979, "link": "https://stackoverflow.com/questions/58634979/how-can-i-find-the-biggest-string-of-numbers/58635240#58635240", "title": "How can I find the biggest string of numbers?", "body": "<p>The following function takes an int array and size as input, as in your example code. And return the maximum increasing size. It may not be what you are looking for exactly, but your question is not very clear.</p>\n\n<pre><code>int func(int[] arr, int size) {\n    // trivial case\n    if (size == 0) \n        return 1;\n\n    int max = 1; // At least 1 when there is an element\n    int cur = 1; // At least 1 when there is an element\n    int first;\n    int second;\n    int cur_first; \n\n    cur_first = arr[0];\n\n    for (int i = 0; i &lt; size-1; i++) {\n        if (arr[i] == arr[i+1] -1) {\n            cur ++;\n        }\n        else {\n            if (cur &gt; max) {\n                max = cur;\n                first = cur_first;\n                second = arr[i];\n            }\n            cur = 1;\n            cur_first = arr[i+1];\n        }\n    }\n    if (cur &gt; max) {\n        cur = max;\n        first = cur_first;\n        second = arr[size-1];\n    }\n    return max\n}\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 12300283, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9e45922f384943e55c0d88f749d23e2?s=128&d=identicon&r=PG&f=1", "display_name": "Awarestor", "link": "https://stackoverflow.com/users/12300283/awarestor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 58635240, "answer_count": 1, "score": 0, "last_activity_date": 1572630069, "creation_date": 1572478105, "last_edit_date": 1572630069, "question_id": 58634979, "link": "https://stackoverflow.com/questions/58634979/how-can-i-find-the-biggest-string-of-numbers", "title": "How can I find the biggest string of numbers?", "body": "<p>There are array elements e.g.: 2 3 4 7 8. I need to write to console what is the biggest string of numbers, so the solution will be 2-4, because 2 3 4 --> 4-2=2 is bigger than 7 8 -> 8-7=1</p>\n\n<p>I need to find the longest growing row, which increases by 1. 2 3 4 (2+1=3, 3+1=4 and 4+1= 7 it's wrong. And in 2 3 4 row has 2 element and it's the longest not 7 8 where it is just 1</p>\n\n<pre><code>int first=0;\nint last=0;\n\nfor(int i=0; i &lt; n; i++)\n{\n    if(t[i]-t[i-1]==1)\n    {\n        first=t[i];\n    }\n    else\n    {\n       last=t[i];\n    }\n}\n</code></pre>\n\n<p>With this code the solution is 7 8, so the code will the last pair (7 8).</p>\n"}, {"tags": ["c++", "compiler-errors"], "comments": [{"owner": {"reputation": 487, "user_id": 433544, "user_type": "registered", "accept_rate": 14, "profile_image": "https://i.stack.imgur.com/TGcqU.png?s=128&g=1", "display_name": "gsmaker", "link": "https://stackoverflow.com/users/433544/gsmaker"}, "edited": false, "score": 0, "creation_date": 1572478966, "post_id": 58634975, "comment_id": 103576981, "body": "Would you please check below link? <a href=\"https://developercommunity.visualstudio.com/content/problem/259283/error-unable-to-open-file-mainobj-error-code-0x800.html\" rel=\"nofollow noreferrer\">developercommunity.visualstudio.com/content/problem/259283/&hellip;</a>"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1572498917, "post_id": 58634975, "comment_id": 103580884, "body": "What are the compiler errors? Which lines are associated with the errors?  Please edit <b>your post</b> with the compiler errors (verbatim) and indication of which lines."}], "answers": [{"comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1572483128, "post_id": 58635265, "comment_id": 103577865, "body": "You should highlight the modification and explain how it solves the asker&#39;s problem."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1572498976, "post_id": 58635265, "comment_id": 103580894, "body": "BTW, you don&#39;t need to initialize <code>std::string</code> variables. The default constructor already initializes them."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1572499050, "post_id": 58635265, "comment_id": 103580909, "body": "Prefer to pass <code>std::string</code> by reference and by <code>const</code> reference if the function doesn&#39;t modify the parameter.  This prevents the compiler from generating code that makes copies of the strings.  (See <code>Investment</code> constructor)"}, {"owner": {"reputation": 487, "user_id": 433544, "user_type": "registered", "accept_rate": 14, "profile_image": "https://i.stack.imgur.com/TGcqU.png?s=128&g=1", "display_name": "gsmaker", "link": "https://stackoverflow.com/users/433544/gsmaker"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1572679554, "post_id": 58635265, "comment_id": 103640372, "body": "@user4581301 thanks for your comment. Have updated accordingly."}, {"owner": {"reputation": 487, "user_id": 433544, "user_type": "registered", "accept_rate": 14, "profile_image": "https://i.stack.imgur.com/TGcqU.png?s=128&g=1", "display_name": "gsmaker", "link": "https://stackoverflow.com/users/433544/gsmaker"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1572679602, "post_id": 58635265, "comment_id": 103640379, "body": "@Thomas Matthews: Thanks for your suggestion. Its goes fine as you mentioned."}], "tags": [], "owner": {"reputation": 487, "user_id": 433544, "user_type": "registered", "accept_rate": 14, "profile_image": "https://i.stack.imgur.com/TGcqU.png?s=128&g=1", "display_name": "gsmaker", "link": "https://stackoverflow.com/users/433544/gsmaker"}, "is_accepted": false, "score": 0, "last_activity_date": 1572679508, "last_edit_date": 1572679508, "creation_date": 1572480507, "answer_id": 58635265, "question_id": 58634975, "link": "https://stackoverflow.com/questions/58634975/error-occurred-when-i-compile-the-following-code/58635265#58635265", "title": "Error occurred when I compile the following code", "body": "<p>I have successfully compiled your source code into Visual Studio 2017 with very slight modification. Please have a look.</p>\n\n<pre><code>#include &lt;vector&gt;\n#include &lt;string&gt;\n#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;sstream&gt;\n#include &lt;cmath&gt;\n#include &lt;numeric&gt;\n\nusing namespace std;\n\nstruct Investment\n{\nstd::string Name;\n    std::string BankAccount;\n    std::string SortCode;\n    float Invest; // Changed due the variable name goes same as struct name if use Investment\n    float Contribution;\n};\n\nstring Trim(string &amp;str)\n{\n    str.erase(0, str.find_first_not_of(\" \\t\\r\\n\"));\n    str.erase(str.find_last_not_of(\" \\t\\r\\n\") + 1);\n    return str;\n}\n\nvoid Get_Data(const string&amp; filename, vector&lt;Investment&gt;&amp; data)\n{\n    ifstream fin(filename);\n    if (!fin.is_open())\n        return;\n\n    string line;\n    if (!getline(fin, line))\n        return;\n\n    while (getline(fin, line))\n    {\n        istringstream sin(line);\n        vector&lt;string&gt; fields;\n        string field;\n\n        while (getline(sin, field, ','))\n        {\n            fields.push_back(field);\n        }\n\n        Investment inv;\n        inv.Name = Trim(fields[0]);\n        inv.BankAccount = Trim(fields[1]);\n        inv.SortCode = Trim(fields[2]);\n        inv.Invest = atof(Trim(fields[3]).c_str());\n        inv.Contribution = 0.0f;\n\n        data.push_back(inv);\n    }\n}\n\nvoid Save_Data(const string&amp; filename, const vector&lt;Investment&gt;&amp; data)\n{\n    ofstream fout(filename);\n    if (!fout.is_open())\n        return;\n\n    fout &lt;&lt; \"NAME, BANK ACCOUNT, SORT CODE, INVESTMENT, Contribution\\n\";\n\n    for (auto&amp; inv : data)\n    {\n        fout &lt;&lt; inv.Name &lt;&lt; \" \"\n            &lt;&lt; inv.BankAccount &lt;&lt; \" \"\n            &lt;&lt; inv.SortCode &lt;&lt; \" \"\n            &lt;&lt; inv.Invest &lt;&lt; \" \"\n            &lt;&lt; inv.Contribution &lt;&lt; \"\\n\";\n    }\n}\n\nint main()\n{\n    vector&lt;Investment&gt; Data_investment;\n    Get_Data(\"aaa.csv\", Data_investment);\n\n    float total = accumulate(Data_investment.begin(), Data_investment.end(), 0.0f, [](float sum, const Investment&amp; inv) { return sum + inv.Invest; }\n    );\n\n    for (auto&amp; inv : Data_investment)\n    {\n        float percentage = (inv.Invest * 100.0f) / total;\n        inv.Contribution = percentage;\n    }\n\n    Save_Data(\"aaa_new.csv\", Data_investment);\n\n    return 0;\n}\n</code></pre>\n\n<p>Below is the modified part</p>\n\n<pre><code>std::string Name;\nstd::string BankAccount;\nstd::string SortCode;\nfloat Invest; // Changed due the variable name goes same as struct name if use Investment\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 12293276, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-XzBpHc_5YmY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdiaC8uvYmaH8d6-2hScj4IrKPxOg/photo.jpg?sz=128", "display_name": "Williamwyn", "link": "https://stackoverflow.com/users/12293276/williamwyn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 38, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1572679508, "creation_date": 1572478077, "question_id": 58634975, "link": "https://stackoverflow.com/questions/58634975/error-occurred-when-i-compile-the-following-code", "title": "Error occurred when I compile the following code", "body": "<p>When I was trying to run the program Visual Studio threw the error like this: \" Error: Unable to open file C:\\Users...\\test1\\Debug\\investment.obj. Error code = 0x80070002.</p>\n\n<p>I have tried many ways mentioned online but still not working. So, I was thinking if there was any problem in the code.</p>\n\n<p>What's going on? Please help.</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;vector&gt;\n#include &lt;string&gt;\n#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;sstream&gt;\n#include &lt;cmath&gt;\n#include &lt;numeric&gt;\n\nusing namespace std;\n\nstruct Investment\n{\n    string Name;\n    string BankAccount;\n    string SortCode;\n    float Investment;\n    float Contribution;\n};\n\nstring Trim(string str)\n{\n    str.erase(0, str.find_first_not_of(\" \\t\\r\\n\"));\n    str.erase(str.find_last_not_of(\" \\t\\r\\n\") + 1);\n    return str;\n}\n\nvoid Get_Data(const string&amp; filename, vector&lt;Investment&gt;&amp; data)\n{\n    ifstream fin(filename);\n    if (!fin.is_open())\n        return;\n\n    string line;\n    if (!getline(fin, line))\n        return;\n\n    while (getline(fin, line))\n    {\n        istringstream sin(line);\n        vector&lt;string&gt; fields;\n        string field;\n\n        while (getline(sin, field, ','))\n        {\n            fields.push_back(field);\n        }\n\n        Investment inv;\n        inv.Name = Trim(fields[0]);\n        inv.BankAccount = Trim(fields[1]);\n        inv.SortCode = Trim(fields[2]);\n        inv.Investment = atof(Trim(fields[3]).c_str());\n        inv.Contribution = 0.0f;\n\n        data.push_back(inv);\n    }\n}\n\nvoid Save_Data(const string&amp; filename, const vector&lt;Investment&gt;&amp; data)\n{\n    ofstream fout(filename);\n    if (!fout.is_open())\n        return;\n\n    fout &lt;&lt; \"NAME, BANK ACCOUNT, SORT CODE, INVESTMENT, Contribution\\n\";\n\n    for (auto&amp; inv : data)\n    {\n        fout &lt;&lt; inv.Name &lt;&lt; \" \"\n            &lt;&lt; inv.BankAccount &lt;&lt; \" \"\n            &lt;&lt; inv.SortCode &lt;&lt; \" \"\n            &lt;&lt; inv.Investment &lt;&lt; \" \"\n            &lt;&lt; inv.Contribution &lt;&lt; \"\\n\";\n    }\n}\n\nint main()\n{\n    vector&lt;Investment&gt; Data_investment;\n    Get_Data(\"aaa.csv\", Data_investment);\n\n    float total = accumulate(Data_investment.begin(), Data_investment.end(), 0.0f,[](float sum, const Investment&amp; inv) { return sum + inv.Investment; }\n    );\n\n    for (auto&amp; inv : Data_investment)\n    {\n        float percentage = (inv.Investment * 100.0f) / total;\n        inv.Contribution = percentage;\n    }\n\n    Save_Data(\"aaa_new.csv\", Data_investment);\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 25894, "user_id": 4304, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5MIg7.jpg?s=128&g=1", "display_name": "zdan", "link": "https://stackoverflow.com/users/4304/zdan"}, "edited": false, "score": 0, "creation_date": 1572478773, "post_id": 58634970, "comment_id": 103576943, "body": "Do you want another float/double with the value 1.5 or a string with the characters &quot;1.5&quot;?"}, {"owner": {"reputation": 8101, "user_id": 9199167, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BqdLV.jpg?s=128&g=1", "display_name": "Max Vollmer", "link": "https://stackoverflow.com/users/9199167/max-vollmer"}, "edited": false, "score": 0, "creation_date": 1572478989, "post_id": 58634970, "comment_id": 103576986, "body": "Are you asking how to print a float with only one digit after the decimal point, or are you asking how to round/convert a float to another numerical type that stores a single digit after the decimal point? In the first case, use setprecision, that&#39;s what it&#39;s for. In the latter case it really depends on your specific use case. Can you provide example code with input and desired output, and give more context for what you are trying to do exactly? (Maybe nitpicky, but <code>1.523</code> cannot be represented in a float (or double) in most C++ implementations, so it&#39;s not clear what your input actually is.)"}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 0, "creation_date": 1572481696, "post_id": 58634970, "comment_id": 103577561, "body": "it&#39;s called a <a href=\"https://en.wikipedia.org/wiki/Radix_point\" rel=\"nofollow noreferrer\">radix point</a>. It&#39;s not a geographical thing so we don&#39;t call it a &quot;spot&quot;"}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "reply_to_user": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 0, "creation_date": 1572483181, "post_id": 58634970, "comment_id": 103577878, "body": "@phuclv The terminology people use around real numbers is frequently appalling, but what the OP is talking about is called a &#39;decimal place&#39;, not the point, which is the &#39;.&#39;."}, {"owner": {"reputation": 5, "user_id": 12275632, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCTQuQeyc1hLMHBfMZ1IYtUC9xio5LU2YL5bQU5iw=k-s128", "display_name": "Dominik Kukovec", "link": "https://stackoverflow.com/users/12275632/dominik-kukovec"}, "reply_to_user": {"reputation": 25894, "user_id": 4304, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5MIg7.jpg?s=128&g=1", "display_name": "zdan", "link": "https://stackoverflow.com/users/4304/zdan"}, "edited": false, "score": 0, "creation_date": 1572499018, "post_id": 58634970, "comment_id": 103580903, "body": "@zdan I want a float/double afterwards"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1572499421, "post_id": 58634970, "comment_id": 103580975, "body": "Multiply by 10, then <a href=\"https://en.cppreference.com/w/cpp/numeric/math/trunc\" rel=\"nofollow noreferrer\">truncate</a>, then divide by 10.  Powers of 10 perform <i>shifting</i>.  See also <code>std::floor</code> and <code>std::ceil</code>."}, {"owner": {"reputation": 5, "user_id": 12275632, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCTQuQeyc1hLMHBfMZ1IYtUC9xio5LU2YL5bQU5iw=k-s128", "display_name": "Dominik Kukovec", "link": "https://stackoverflow.com/users/12275632/dominik-kukovec"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1572500234, "post_id": 58634970, "comment_id": 103581139, "body": "@Thomas Matthews Thanks! Just what I needed."}], "answers": [{"comments": [{"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1572480745, "post_id": 58635022, "comment_id": 103577375, "body": "Which is exactly what <code>std::cout &lt;&lt; std:::setprecision(2)</code> does internally."}, {"owner": {"reputation": 427, "user_id": 9988199, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gWaFH.jpg?s=128&g=1", "display_name": "H4ze", "link": "https://stackoverflow.com/users/9988199/h4ze"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1572480818, "post_id": 58635022, "comment_id": 103577392, "body": "But, it doesn&#39;t require including library."}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 0, "creation_date": 1572481635, "post_id": 58635022, "comment_id": 103577547, "body": "@benjaminkljn who said no? You must include <code>iostream</code> in order for it to work"}], "tags": [], "owner": {"reputation": 427, "user_id": 9988199, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gWaFH.jpg?s=128&g=1", "display_name": "H4ze", "link": "https://stackoverflow.com/users/9988199/h4ze"}, "is_accepted": false, "score": 0, "last_activity_date": 1572478457, "creation_date": 1572478457, "answer_id": 58635022, "question_id": 58634970, "link": "https://stackoverflow.com/questions/58634970/is-there-a-way-to-set-the-number-of-decimal-places-without-setprecision/58635022#58635022", "title": "Is there a way to set the number of decimal places without setprecision?", "body": "<p>You can use <code>precision()</code> directly on the cout, e.g.</p>\n\n<p><code>std::cout.precision(2);</code></p>\n"}], "owner": {"reputation": 5, "user_id": 12275632, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCTQuQeyc1hLMHBfMZ1IYtUC9xio5LU2YL5bQU5iw=k-s128", "display_name": "Dominik Kukovec", "link": "https://stackoverflow.com/users/12275632/dominik-kukovec"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 223, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1572483091, "creation_date": 1572478038, "last_edit_date": 1572483091, "question_id": 58634970, "link": "https://stackoverflow.com/questions/58634970/is-there-a-way-to-set-the-number-of-decimal-places-without-setprecision", "title": "Is there a way to set the number of decimal places without setprecision?", "body": "<p>I have a really specific question.\nCan I arithmetically get 1.5 from 1.523, in c++ but without using the iomanip library?\nThanks.</p>\n"}, {"tags": ["c++", "constructor", "language-lawyer", "terminology", "object-lifetime"], "comments": [{"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "reply_to_user": {"reputation": 16020, "user_id": 9716597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f97c613dca0b157b40551a0d756abeb?s=128&d=identicon&r=PG&f=1", "display_name": "L. F.", "link": "https://stackoverflow.com/users/9716597/l-f"}, "edited": false, "score": 0, "creation_date": 1572572242, "post_id": 58634922, "comment_id": 103610878, "body": "@L.F. &quot;<i>Can you provide an example to show how the word &quot;exist&quot; is used in the standard?</i>&quot; How is that relevant? &quot;<i>To explain exist, exist should exist</i>&quot; No. Existence is the concept of being something. <b>Do you believe that existence is an attribute of an object?</b> Do you talk about non existing things? Anything, that is, <b>any idea we talk about exists, by definition</b>."}], "answers": [{"comments": [{"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "edited": false, "score": 0, "creation_date": 1572479085, "post_id": 58635066, "comment_id": 103577009, "body": "At the end they are only bytes in memory, but at the abstract level, they are more than that; and the abstract machine relies on that abstract semantic."}, {"owner": {"reputation": 3008, "user_id": 1863938, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96ec4e16681460302ea67bfc201b76f3?s=128&d=identicon&r=PG", "display_name": "parktomatomi", "link": "https://stackoverflow.com/users/1863938/parktomatomi"}, "reply_to_user": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "edited": false, "score": 0, "creation_date": 1572480662, "post_id": 58635066, "comment_id": 103577355, "body": "I&#39;m too pedestrian to think like that. To me, lifetime isn&#39;t even part of the abstract machine, it&#39;s just an metric for static analyzers and such.   On the abstract level, I&#39;m gonna say the tree didn&#39;t make a sound if no one was around. The object didn&#39;t exist until the program initialized it, and it stopped existing after the program stopped caring about it. Life is easier this way."}, {"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "edited": false, "score": 0, "creation_date": 1572481048, "post_id": 58635066, "comment_id": 103577436, "body": "The whole C++ standard seems to be built around lifetime, an ill defined concept..."}, {"owner": {"reputation": 3008, "user_id": 1863938, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96ec4e16681460302ea67bfc201b76f3?s=128&d=identicon&r=PG", "display_name": "parktomatomi", "link": "https://stackoverflow.com/users/1863938/parktomatomi"}, "reply_to_user": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "edited": false, "score": 0, "creation_date": 1572481726, "post_id": 58635066, "comment_id": 103577567, "body": "That&#39;s fair. If only I had 198 swiss francs, I could just look it up."}, {"owner": {"reputation": 269338, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1572560390, "post_id": 58635066, "comment_id": 103608405, "body": "In C++, to say an object exists means more than just bytes of memory allocated for it. The bytes may continue to exist, but the object does not."}], "tags": [], "owner": {"reputation": 3008, "user_id": 1863938, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96ec4e16681460302ea67bfc201b76f3?s=128&d=identicon&r=PG", "display_name": "parktomatomi", "link": "https://stackoverflow.com/users/1863938/parktomatomi"}, "is_accepted": false, "score": -2, "last_activity_date": 1572479128, "last_edit_date": 1572479128, "creation_date": 1572478851, "answer_id": 58635066, "question_id": 58634922, "link": "https://stackoverflow.com/questions/58634922/is-object-existence-distinct-from-object-lifetime/58635066#58635066", "title": "Is object existence distinct from object lifetime?", "body": "<p>An object in C++ is an abstract concept. To machine code, it's just a big virtual array of bytes.</p>\n\n<p>The physical \"object\" is a bunch of bytes in memory that get allocated for some purpose, and are associated some functions that act on those bytes. The lifetime of that object is the time when those bytes are used for that object's purpose, to when they are no longer used. They still exist afterwards, but they're available to be used by some other object.</p>\n"}, {"comments": [{"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "edited": false, "score": 0, "creation_date": 1572570990, "post_id": 58651756, "comment_id": 103610657, "body": "&quot;<i>The statement you quoted</i>&quot; I quoted no statement."}, {"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "edited": false, "score": 0, "creation_date": 1572572995, "post_id": 58651756, "comment_id": 103610974, "body": "I&#39;m not interesting in automatic variables, but on objects where the duration of existence isn&#39;t as clear."}, {"owner": {"reputation": 12194, "user_id": 4474419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04ce27f0ebe4713b51911cd8475c3b42?s=128&d=identicon&r=PG", "display_name": "Davislor", "link": "https://stackoverflow.com/users/4474419/davislor"}, "edited": false, "score": 0, "creation_date": 1572582744, "post_id": 58651756, "comment_id": 103612593, "body": "Which implies that <code>malloc(sizeof(plain_old_data_t))</code> never creates anything that meets the definition of a C++ object. One of the types guaranteed by the Standard to be trivially copyable with no padding bits or trap representations might be an even better example."}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "reply_to_user": {"reputation": 12194, "user_id": 4474419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04ce27f0ebe4713b51911cd8475c3b42?s=128&d=identicon&r=PG", "display_name": "Davislor", "link": "https://stackoverflow.com/users/4474419/davislor"}, "edited": false, "score": 0, "creation_date": 1572583756, "post_id": 58651756, "comment_id": 103612759, "body": "@Davislor: It doesn&#39;t &quot;imply&quot; anything; those are the <i>only</i> C++ constructs that create objects. <code>malloc</code> doesn&#39;t create <i>any objects</i> as far as the C++ standard is concerned. Or at least, as the standard currently stands; [there are plans to change that](wg21.link/P0593)."}, {"owner": {"reputation": 12194, "user_id": 4474419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04ce27f0ebe4713b51911cd8475c3b42?s=128&d=identicon&r=PG", "display_name": "Davislor", "link": "https://stackoverflow.com/users/4474419/davislor"}, "edited": false, "score": 0, "creation_date": 1572598106, "post_id": 58651756, "comment_id": 103616243, "body": "@NicolBolas Well, yeah, but will there ever be an implementation where <code>malloc()</code> requires placement <code>new</code> to work? I guess if you want to be absolutely and strictly compliant with C++17, and use memory obtained from a C-style allocator, that\u2019s what you have to do."}, {"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "edited": false, "score": 0, "creation_date": 1573379317, "post_id": 58651756, "comment_id": 103857128, "body": "@NicolBolas Now if you claim to take the std extremely seriously on what creates an object, do you also never use a string literal?"}], "tags": [], "owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "is_accepted": true, "score": 1, "last_activity_date": 1572582139, "last_edit_date": 1572582139, "creation_date": 1572559639, "answer_id": 58651756, "question_id": 58634922, "link": "https://stackoverflow.com/questions/58634922/is-object-existence-distinct-from-object-lifetime/58651756#58651756", "title": "Is object existence distinct from object lifetime?", "body": "<p>This is best understood with <a href=\"https://timsong-cpp.github.io/cppwp/n4659/intro.object\" rel=\"nofollow noreferrer\">[intro.object]/1</a>:</p>\n\n<blockquote>\n  <p>An object is created by a definition, by a new-expression, when implicitly changing the active member of a union, or when a temporary object is created ([conv.rval], [class.temporary]). An object occupies a region of storage in its period of construction ([class.cdtor]), throughout its lifetime, and in its period of destruction ([class.cdtor]).</p>\n</blockquote>\n\n<p>The second sentence there answers your question. If an object is able to occupy a region of storage outside of the period described as \"its lifetime\" (like during its construction and destruction), then clearly an object must be able to <em>exist</em> outside of its lifetime.</p>\n"}], "owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 102, "favorite_count": 0, "accepted_answer_id": 58651756, "answer_count": 2, "score": 0, "last_activity_date": 1573379402, "creation_date": 1572477696, "last_edit_date": 1573379402, "question_id": 58634922, "link": "https://stackoverflow.com/questions/58634922/is-object-existence-distinct-from-object-lifetime", "title": "Is object existence distinct from object lifetime?", "body": "<p>It may sound philosophical, but it isn't: in C++, can various (classes, scalars) objects <em>exist</em> outside of their <em>lifetime</em>? What is the existence of an object? What is the creation of an object? Is an object created when its lifetime starts?</p>\n\n<p>(Edited for clarity: the question is not specifically about class types.)</p>\n\n<p>I'm extremely confused and need someone to explain the terminology and basic concepts to me.</p>\n\n<p>Note: Existing is the fact of being a thing. It's the most fundamental philosophical concept. It isn't an attribute of an object and I don't know nor do I care about the number of occurrences of the word \"exist\" in the standard text. Textbooks probably very rarely say that things \"exist\". I don't remember ever reading that numbers \"exist\" in registers or that expressions \"exist\" in the source code. Numbers fit in registers and the source code has expressions in it.</p>\n\n<p><strong>If we can refer to an object, it means it exists. If a pointer points to an object, that object exists.</strong></p>\n"}, {"tags": ["c++", "c++11", "smart-pointers"], "comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 1, "creation_date": 1572476992, "post_id": 58634777, "comment_id": 103576513, "body": "Most resources can be handled by smart pointer and custom deleter, avoiding to write custom class to handle them (or is a way to implement it)."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 4, "creation_date": 1572477127, "post_id": 58634777, "comment_id": 103576556, "body": "Why using Rule of 3/5 when you can have rule of 0 :)"}], "answers": [{"comments": [{"owner": {"reputation": 1617, "user_id": 6864265, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f01bd0f9716eca1ad35cf30c47ae8f6f?s=128&d=identicon&r=PG&f=1", "display_name": "Itachi Uchiwa", "link": "https://stackoverflow.com/users/6864265/itachi-uchiwa"}, "edited": false, "score": 0, "creation_date": 1572477023, "post_id": 58634822, "comment_id": 103576522, "body": "Thank you! But my class can have an <code>std::vector</code> as a data member."}, {"owner": {"reputation": 124806, "user_id": 121747, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/9fcebb68b105446c0d9eebbce1146044?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/121747/jack"}, "reply_to_user": {"reputation": 1617, "user_id": 6864265, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f01bd0f9716eca1ad35cf30c47ae8f6f?s=128&d=identicon&r=PG&f=1", "display_name": "Itachi Uchiwa", "link": "https://stackoverflow.com/users/6864265/itachi-uchiwa"}, "edited": false, "score": 3, "creation_date": 1572477116, "post_id": 58634822, "comment_id": 103576552, "body": "And you can have a <code>std::unique_ptr&lt;Foo&gt;</code> as a data member, I don&#39;t see the difference."}, {"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 1, "creation_date": 1572478205, "post_id": 58634822, "comment_id": 103576809, "body": "Also note: It can be surprisingly difficult to manage the resources by hand. It&#39;s not just &quot;make sure it&#39;s set correctly in plain constructor and cleared in destructor&quot;, you also typically want the various assignment operators to provide even a basic exception guarantee (no memory leaks if exception occurs), let alone strong exception guarantees, need to make sure move construction/assignment leaves the instance being emptied in a legal state for the destructor, etc. Proper use of smart pointers and other managed resources usually means you don&#39;t have to even <i>write</i> all of that."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1572482314, "post_id": 58634822, "comment_id": 103577687, "body": "Yep. Your number one problem isn&#39;t the bugs you expected. If you&#39;ve got any hope of survival, you&#39;ve eliminated all of the known risks that can be eliminated and mitigated the rest. It&#39;s the stuff you didn&#39;t see coming that gets you."}], "tags": [], "owner": {"reputation": 124806, "user_id": 121747, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/9fcebb68b105446c0d9eebbce1146044?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/121747/jack"}, "is_accepted": true, "score": 5, "last_activity_date": 1572476874, "creation_date": 1572476874, "answer_id": 58634822, "question_id": 58634777, "link": "https://stackoverflow.com/questions/58634777/if-my-class-manages-a-resource-correctly-then-what-is-the-point-in-having-smart/58634822#58634822", "title": "If my class manages a resource correctly then what is the point in having smart poointers?", "body": "<p>Your question can be read as</p>\n\n<blockquote>\n  <p>If I implement correct semantics for memory ownership of a smart pointer by hand in each class I use, can I avoid using smart pointers?</p>\n</blockquote>\n\n<p><strong>Yes</strong>, but why? When you need a dynamic array do you reimplement basic <code>std::vector</code> semantics by hand every time you need it? I don't think so.</p>\n\n<p>It's the purpose of libraries, avoiding reinventing the wheel every time.</p>\n"}, {"tags": [], "owner": {"reputation": 3797, "user_id": 2874856, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/kWxOm.jpg?s=128&g=1", "display_name": "Raindrop7", "link": "https://stackoverflow.com/users/2874856/raindrop7"}, "is_accepted": false, "score": 0, "last_activity_date": 1572477821, "last_edit_date": 1572477821, "creation_date": 1572477423, "answer_id": 58634886, "question_id": 58634777, "link": "https://stackoverflow.com/questions/58634777/if-my-class-manages-a-resource-correctly-then-what-is-the-point-in-having-smart/58634886#58634886", "title": "If my class manages a resource correctly then what is the point in having smart poointers?", "body": "<p>As you've read in your book: They solve the issues raw-pointers facing thus: consider this:</p>\n\n<pre><code>int* ptr = new int[1024];\n// oh my God! forgot to free it then welcome to memory leak\n\nstd::string* pStr = new std::string(\"Hello\");\ndelete pStr;\n\n//...\n// and at some point in the program you think it is time to free pStr which has been already freed (among hundreds of code lines) then welcome to U.B.\n std::cout &lt;&lt; *pStr &lt;&lt; std::endl; // pStr is a dangling pointer. U.B\n</code></pre>\n\n<p>To solve this using smart pointers:</p>\n\n<pre><code>std::unique_ptr&lt;int&gt; upi = std::make_unique(7);\n// use upi effectively and don't care about freeing it because it automatically will be freed for you.\n</code></pre>\n\n<ul>\n<li><p>Another reason your class cannot support is sharing the same object among many objects effectively. In fact you can achieve that through applying a shallow-copy in your class but the Problem is who will free that resource then you end up implementing the functionality of a shared_ptr in your maybe small class! </p></li>\n<li><p>Each new version of C++ comes with new facilities and new powerful features so you should stick to these libraries instead re-inventing the well. If only for some educational reason then it is OK to practice.</p></li>\n<li><p>If you look you'll find real programs contains smart pointers as members which make your class robust.</p></li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 9073173, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0071026b53cdd2df882f0c2bbb8fb970?s=128&d=identicon&r=PG&f=1", "display_name": "L. Payne", "link": "https://stackoverflow.com/users/9073173/l-payne"}, "is_accepted": false, "score": 1, "last_activity_date": 1572477943, "creation_date": 1572477943, "answer_id": 58634952, "question_id": 58634777, "link": "https://stackoverflow.com/questions/58634777/if-my-class-manages-a-resource-correctly-then-what-is-the-point-in-having-smart/58634952#58634952", "title": "If my class manages a resource correctly then what is the point in having smart poointers?", "body": "<p>Another benefit of smart pointers that has not been mentioned yet is that they give whoever is reading the code a decent idea of the lifetime of that object. The thing with a raw pointer is (especially as code gets more complicated) it can be difficult to figure out who is responsible for calling delete on the object whereas if you have a unique pointer instead we know immediately that the deletion will happen automatically when the pointer goes out of scope.</p>\n"}], "owner": {"reputation": 1617, "user_id": 6864265, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f01bd0f9716eca1ad35cf30c47ae8f6f?s=128&d=identicon&r=PG&f=1", "display_name": "Itachi Uchiwa", "link": "https://stackoverflow.com/users/6864265/itachi-uchiwa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 1, "accepted_answer_id": 58634822, "answer_count": 3, "score": 2, "last_activity_date": 1572477943, "creation_date": 1572476606, "last_edit_date": 1572477935, "question_id": 58634777, "link": "https://stackoverflow.com/questions/58634777/if-my-class-manages-a-resource-correctly-then-what-is-the-point-in-having-smart", "title": "If my class manages a resource correctly then what is the point in having smart poointers?", "body": "<p>I am new to smart pointers, I liked using them for the safety and power of sharing object... </p>\n\n<p>I have one question: If my class manages a resource in its constructors and destructors applying some rules of thumb like the Big 5 and the Big 3... Should I still use smart pointers? or my class is an alternative to them. Because as I've read in C++ primer 5 edition that smart pointers came to solve problems raw pointers were facing like memory-leaks, double-deleting pointers and accessing a dangling pointer... My class can avoid those problems:</p>\n\n<pre><code>class BallGame {\n    public:\n        using Resource = int;\n\n        BallGame(int);\n        BallGame(const BallGame&amp;);\n        BallGame(BallGame&amp;&amp;);\n        BallGame&amp; operator=(const BallGame&amp;);\n        BallGame&amp; operator=(BallGame&amp;&amp;);\n        ~BallGame();\n    private:\n        Resource m_res;\n};\n</code></pre>\n\n<ul>\n<li><p>Consider that the member of my class are doing the right job so can I avoid smart pointer?</p></li>\n<li><p>I want to know some scenarios when I should use smart pointers rather than managing resources in my class.</p></li>\n<li><p>Are they really for \"dumb classes\" (classes that define constructors but not well-behaved destructors) like in C++ primer book.</p></li>\n</ul>\n"}, {"tags": ["c++", "memory", "text"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user10957435"}, "edited": false, "score": 1, "creation_date": 1572476282, "post_id": 58634693, "comment_id": 103576335, "body": "What do you mean by &quot;text&quot;?"}, {"owner": {"reputation": 17298, "user_id": 1540468, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2f7d0c7668a2f3b53cf22c01ae63f32b?s=128&d=identicon&r=PG", "display_name": "Paul Rooney", "link": "https://stackoverflow.com/users/1540468/paul-rooney"}, "edited": false, "score": 0, "creation_date": 1572476287, "post_id": 58634693, "comment_id": 103576336, "body": "Are you talking about segments of the binary layout i.e. <a href=\"https://en.wikipedia.org/wiki/Code_segment\" rel=\"nofollow noreferrer\">.text</a> and <a href=\"https://en.wikipedia.org/wiki/Data_segment\" rel=\"nofollow noreferrer\">.data</a>?"}, {"owner": {"reputation": 63, "user_id": 11940604, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-18mNVPLyg2Y/AAAAAAAAAAI/AAAAAAAAAfE/Wz2eeuc2fM8/photo.jpg?sz=128", "display_name": "Huang Molly", "link": "https://stackoverflow.com/users/11940604/huang-molly"}, "edited": false, "score": 0, "creation_date": 1572477004, "post_id": 58634693, "comment_id": 103576517, "body": "No, I was talking about the memory location, likes heap, stack. For the .text, I am not sure because professor didn&#39;t mention that."}, {"owner": {"reputation": 17298, "user_id": 1540468, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2f7d0c7668a2f3b53cf22c01ae63f32b?s=128&d=identicon&r=PG", "display_name": "Paul Rooney", "link": "https://stackoverflow.com/users/1540468/paul-rooney"}, "edited": false, "score": 1, "creation_date": 1572477299, "post_id": 58634693, "comment_id": 103576591, "body": "Heap or stack depends on how you write the code. If you allocate memory (using new) it will be on the heap. For <a href=\"https://en.wikipedia.org/wiki/Automatic_variable\" rel=\"nofollow noreferrer\">automatic</a> variables they will be on the stack."}, {"owner": {"reputation": 1486, "user_id": 6871623, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/HtbWQ.jpg?s=128&g=1", "display_name": "Everyone", "link": "https://stackoverflow.com/users/6871623/everyone"}, "edited": false, "score": 0, "creation_date": 1572477378, "post_id": 58634693, "comment_id": 103576611, "body": "@HuangMolly There you go: <a href=\"https://www.geeksforgeeks.org/memory-layout-of-c-program/\" rel=\"nofollow noreferrer\">geeksforgeeks.org/memory-layout-of-c-program</a>"}, {"owner": {"reputation": 63, "user_id": 11940604, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-18mNVPLyg2Y/AAAAAAAAAAI/AAAAAAAAAfE/Wz2eeuc2fM8/photo.jpg?sz=128", "display_name": "Huang Molly", "link": "https://stackoverflow.com/users/11940604/huang-molly"}, "reply_to_user": {"reputation": 17298, "user_id": 1540468, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2f7d0c7668a2f3b53cf22c01ae63f32b?s=128&d=identicon&r=PG", "display_name": "Paul Rooney", "link": "https://stackoverflow.com/users/1540468/paul-rooney"}, "edited": false, "score": 0, "creation_date": 1572477608, "post_id": 58634693, "comment_id": 103576664, "body": "@PaulRooney Like int *array = new int [3]{1,2 ,3}?"}, {"owner": {"reputation": 63, "user_id": 11940604, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-18mNVPLyg2Y/AAAAAAAAAAI/AAAAAAAAAfE/Wz2eeuc2fM8/photo.jpg?sz=128", "display_name": "Huang Molly", "link": "https://stackoverflow.com/users/11940604/huang-molly"}, "reply_to_user": {"reputation": 1486, "user_id": 6871623, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/HtbWQ.jpg?s=128&g=1", "display_name": "Everyone", "link": "https://stackoverflow.com/users/6871623/everyone"}, "edited": false, "score": 0, "creation_date": 1572477618, "post_id": 58634693, "comment_id": 103576668, "body": "@Everyone Thank you !"}, {"owner": {"reputation": 17298, "user_id": 1540468, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2f7d0c7668a2f3b53cf22c01ae63f32b?s=128&d=identicon&r=PG", "display_name": "Paul Rooney", "link": "https://stackoverflow.com/users/1540468/paul-rooney"}, "edited": false, "score": 0, "creation_date": 1572479522, "post_id": 58634693, "comment_id": 103577108, "body": "@HuangMolly yes that an allocation on the heap, unless you <code>delete[]</code> it that memory is leaked. For stack use <code>int array2[3] = {1,2,3};</code>, which requires no delete but that stack space will be reused after the current scope (basically after &#39;}&#39;) ends."}, {"owner": {"reputation": 63, "user_id": 11940604, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-18mNVPLyg2Y/AAAAAAAAAAI/AAAAAAAAAfE/Wz2eeuc2fM8/photo.jpg?sz=128", "display_name": "Huang Molly", "link": "https://stackoverflow.com/users/11940604/huang-molly"}, "edited": false, "score": 0, "creation_date": 1572481194, "post_id": 58634693, "comment_id": 103577461, "body": "That helps a lot, thank you!"}, {"owner": {"reputation": 2323, "user_id": 8350647, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zJNHD.png?s=128&g=1", "display_name": "Nina", "link": "https://stackoverflow.com/users/8350647/nina"}, "edited": false, "score": 0, "creation_date": 1572485152, "post_id": 58634693, "comment_id": 103578256, "body": "No variables go in the .text section. It&#39;s either the heap, stack or data."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1572499649, "post_id": 58634693, "comment_id": 103581036, "body": "In many executable formats, the <i>text</i> section is a read-only section where the code is placed.  Since it is read-only, only compile-time constants are placed into the <i>text</i> section.  Variables are not constants, so they are not placed into the <i>text</i> section.  Although this policy may be changed by supplying instructions to the linkers. YMMV."}], "owner": {"reputation": 63, "user_id": 11940604, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-18mNVPLyg2Y/AAAAAAAAAAI/AAAAAAAAAfE/Wz2eeuc2fM8/photo.jpg?sz=128", "display_name": "Huang Molly", "link": "https://stackoverflow.com/users/11940604/huang-molly"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 61, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1572477040, "creation_date": 1572475951, "last_edit_date": 1572477040, "question_id": 58634693, "link": "https://stackoverflow.com/questions/58634693/what-kinds-of-variables-will-be-stored-in-text", "title": "What kinds of variables will be stored in Text?", "body": "<p>I know that global variables (memory)  will be stored in Data but what kinds of variable will be stored in Text (Memory location)?</p>\n"}, {"tags": ["c++", "linked-list", "nodes", "singly-linked-list"], "comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1572476228, "post_id": 58634666, "comment_id": 103576317, "body": "If the user asks for a node to be inserted in position 6 and there are less than five nodes, where should you insert the node? Should you insert the node?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1572476395, "post_id": 58634666, "comment_id": 103576370, "body": "How does <code>if (current-&gt;next==nullptr) &#47;&#47;adding to end of list</code> work? <code>current-&gt;next</code> only inspects node 2. What if the end of the list is node 3?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1572476619, "post_id": 58634666, "comment_id": 103576421, "body": "Recommendation: Draw pictures. Start with an empty list. Draw an unconnected node.  Draw all of the connections you need to make to add this node into the list. Then redraw the list  step by step as you add a node to the end, Ans then again as you insert a node at the beginning. And then again as you insert a node int the middle of the list. Those drawings should describe all of the cases. Then see if there is any duplication in the steps you had to perform that you can exploit to reduce the number of different cases you have to cover."}], "answers": [{"comments": [{"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1572759495, "post_id": 58677627, "comment_id": 103655975, "body": "Or simply use a <i>pointer-to-pointer</i> storing the node at the current address in the list and setting the next pointer to the current <a href=\"https://grisha.org/blog/2013/04/02/linus-on-understanding-pointers/\" rel=\"nofollow noreferrer\">Linus on understanding pointers</a>"}, {"owner": {"reputation": 159, "user_id": 11789959, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SduSq.jpg?s=128&g=1", "display_name": "Sourish Mukherjee", "link": "https://stackoverflow.com/users/11789959/sourish-mukherjee"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1572759656, "post_id": 58677627, "comment_id": 103655991, "body": "Yeah even that can but i was trying to point out where he might have gone wrong and made him understand that"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 1, "creation_date": 1572759713, "post_id": 58677627, "comment_id": 103656000, "body": "No dings, you have a good answer, I was just passing other info along. (and killer job on the artwork -- an 8.5x11 sheet of paper and a pencil is the best way to learn lists) Here is a short example <a href=\"https://pastebin.com/5MPLU4wB\" rel=\"nofollow noreferrer\">Singly Linked List (node only, no wrapper)</a>"}], "tags": [], "owner": {"reputation": 159, "user_id": 11789959, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SduSq.jpg?s=128&g=1", "display_name": "Sourish Mukherjee", "link": "https://stackoverflow.com/users/11789959/sourish-mukherjee"}, "is_accepted": false, "score": 2, "last_activity_date": 1572768570, "last_edit_date": 1572768570, "creation_date": 1572758688, "answer_id": 58677627, "question_id": 58634666, "link": "https://stackoverflow.com/questions/58634666/adding-a-node-in-a-singly-linked-lists-supports-adding-in-front-end-and-middle/58677627#58677627", "title": "Adding a Node in a Singly linked lists (supports adding in front, end and middle)", "body": "<p>There is a little problem in your while condition which is decribed below:<br></p>\n\n<pre><code>i=1;\nwhile ( i&lt;pos &amp;&amp; current-&gt;next != nullptr) //traverse thru list\n{\n    current=current-&gt;next;\n    i = i+1;\n}\n</code></pre>\n\n<p>Now think of this scenario where I want to insert the node at the place of 6, which is at pos 2.</p>\n\n<p><a href=\"https://i.stack.imgur.com/dbpsR.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/dbpsR.png\" alt=\"Vivid Idea\"></a></p>\n\n<p>According to your code, my <strong>pos</strong> will be 2 right?\nHere is where the problem is occurring according to your code:</p>\n\n<blockquote>\n  <p>while(i\n</blockquote>\n\n<p>What will happen is </p>\n\n<ul>\n<li>when i =1, i&lt; pos and your current will shift to the next node of the head.</li>\n<li>Now i has become 2, because of i=i+1;</li>\n<li>Now i is not less than pos, so it goes out of the loop, keeping in mind your current node is pointing to the next node of the head.</li>\n</ul>\n\n<blockquote>\n  <p>Node * oldNext = current->next; </p>\n\n<pre><code>current -&gt; next = newNode;\n\nnewNode -&gt; next = oldNext;\n</code></pre>\n</blockquote>\n\n<p>What's happening here is your old next is pointing to the 3rd node, since the current node is 2nd node.</p>\n\n<p>You need to fix it by changing the loop condition so that the loop stops at <strong>i&lt; pos-1</strong> the previous node from where it needs to be changed.</p>\n"}, {"tags": [], "owner": {"reputation": 929, "user_id": 12136319, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nZLSt.jpg?s=128&g=1", "display_name": "Problematic Dude", "link": "https://stackoverflow.com/users/12136319/problematic-dude"}, "is_accepted": false, "score": 0, "last_activity_date": 1572797706, "creation_date": 1572797706, "answer_id": 58682072, "question_id": 58634666, "link": "https://stackoverflow.com/questions/58634666/adding-a-node-in-a-singly-linked-lists-supports-adding-in-front-end-and-middle/58682072#58682072", "title": "Adding a Node in a Singly linked lists (supports adding in front, end and middle)", "body": "<p>You don't need to write separate condition for insertion at end. All you need to do is </p>\n\n<ol>\n<li>First, check if it will be head node(by checking if position ==1).</li>\n<li>Otherwise, just go to position one less than the position you want to insert like if insertion is at 5th then go to 4th and then do as follow.\nLet us assume that we are traversing the list by temp2 and the node to  be inserted is node temp1. Now temp2 is at 4th position. So in temp1->next put temp2->next. At this moment both are pointing to required 5th position. Now just break the link between temp2 and position by strong temp1 in temp2->next. Below is the implementation.</li>\n</ol>\n\n<pre><code>NODE* insert_n(NODE* head,int data,int position)\n{\n    int i;\n    NODE* temp1 = (NODE*)malloc(sizeof(NODE));\n    temp1-&gt;data=data;\n    temp1-&gt;next = NULL;\n    if(position==1)\n    {\n        temp1-&gt;next = head;\n\n        head = temp1;\n        return head;\n    }\n    NODE* temp2 = head;\n    for(i=0;i&lt;position-2;i++)\n    {\n        temp2= temp2-&gt;next;\n    }\n    temp1-&gt;next =temp2-&gt;next;\n    temp2-&gt;next = temp1;\n    return (head);\n}\n\n\n</code></pre>\n"}], "owner": {"reputation": 121, "user_id": 9732828, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55ba3c3d305444bb55ba37aec48e477d?s=128&d=identicon&r=PG&f=1", "display_name": "Michel", "link": "https://stackoverflow.com/users/9732828/michel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 141, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1572797706, "creation_date": 1572475792, "last_edit_date": 1572476007, "question_id": 58634666, "link": "https://stackoverflow.com/questions/58634666/adding-a-node-in-a-singly-linked-lists-supports-adding-in-front-end-and-middle", "title": "Adding a Node in a Singly linked lists (supports adding in front, end and middle)", "body": "<p>I am trying to write an \"add\" function that takes in the value held in the node (denoted 'n'), and the position the node is to be added into the linkedlist (denoted 'pos'). </p>\n\n<p>I have seen code where there are 3 separate add functions - addAtBeginning, addAtMiddle, addAtEnd, but I want one add function that does all of these. </p>\n\n<p>I have written code for the add(int n, int pos), but it is not giving me my expected output. </p>\n\n<p>For instance, in my main, i have:</p>\n\n<pre><code>LinkedList num;\nnum.add(5,1);\n\n\nnum.add(6,2);\n\nnum.add(7,2);\nnum.printList();\n</code></pre>\n\n<p>And I am expecting output: 5 7 6, (as the 7 will get shifted into the second position, and the 6 will then shift to the third position), except I am getting output: 5 6 7, where the 7 is added to the 3rd position. </p>\n\n<p>Also, I have already written my Node class and LinkedList class. I have been testing my functions in these classes in small increments, and everything else seems to be fine except for my add function.</p>\n\n<pre><code>Node * newNode = new Node();\n\nnewNode-&gt;setValue(n); //Node gets value n\n\nint i=1; //ie. first position is 1, not 0\n\nNode * current = head;\n\nif (current == nullptr) //ie. then new node IS the head\n{\n    head = newNode;\n    head-&gt;next=nullptr;\n    return;\n}\n\nif (current-&gt;next==nullptr) //adding to end of list\n{\n\n    current-&gt;next = newNode;\n    newNode-&gt;next = nullptr;\n\n}\nelse //if inserting Node at middle, (neither at beginning or end)\n{\n\n\n    while ( i&lt;pos &amp;&amp; current-&gt;next != nullptr) //traverse thru list\n    {\n        current=current-&gt;next;\n        i = i+1;\n    }\n\n    Node * oldNext = current-&gt;next; \n\n    current -&gt; next = newNode;\n\n    newNode -&gt; next = oldNext;\n\n\n\n}\n</code></pre>\n\n<p>There are no error messages when I compile.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 3, "creation_date": 1572475333, "post_id": 58634569, "comment_id": 103576078, "body": "Hint: Set your string formatting options on the stream. The default presentation omits leading zeroes, but you can set zero-padding to arbitrary sizes."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 2, "creation_date": 1572476103, "post_id": 58634569, "comment_id": 103576280, "body": "Unrelated: Careful with <code>while (!stream.eof())</code>. <a href=\"https://stackoverflow.com/questions/5605125/why-is-iostreameof-inside-a-loop-condition-i-e-while-stream-eof-cons\">It doesn&#39;t work</a>."}], "answers": [{"tags": [], "owner": {"reputation": 805, "user_id": 7908019, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-wBTC1gSxMPU/AAAAAAAAAAI/AAAAAAAAABY/85JVWoAxQI0/photo.jpg?sz=128", "display_name": "Gerard097", "link": "https://stackoverflow.com/users/7908019/gerard097"}, "is_accepted": true, "score": 2, "last_activity_date": 1572476442, "creation_date": 1572476442, "answer_id": 58634762, "question_id": 58634569, "link": "https://stackoverflow.com/questions/58634569/reading-a-hex-file-c/58634762#58634762", "title": "Reading a hex file C++", "body": "<p>If you are going to show only 2 digits numbers, you can enable 1 leading zero to your output:</p>\n\n<pre><code>#include &lt;iomanip&gt;\n\n...\n\ncout &lt;&lt; std::hex &lt;&lt; setfill('0'); //Set the leading character as a 0\n\ncout &lt;&lt; std::setw(2) //If output is less than 2 charaters then it will fill with setfill character\n     &lt;&lt; 8; //Displays 08\n\n//In your example\nunsigned char c;\nstream &gt;&gt; c;\ncout &lt;&lt; std::setw(2) &lt;&lt; (short)c &lt;&lt;'\\n';\n</code></pre>\n"}], "owner": {"reputation": 57, "user_id": 9359682, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/acea76f6b515b05462e203145228ee8e?s=128&d=identicon&r=PG&f=1", "display_name": "Vishwa Shankar", "link": "https://stackoverflow.com/users/9359682/vishwa-shankar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "accepted_answer_id": 58634762, "answer_count": 1, "score": 1, "last_activity_date": 1572476442, "creation_date": 1572475230, "question_id": 58634569, "link": "https://stackoverflow.com/questions/58634569/reading-a-hex-file-c", "title": "Reading a hex file C++", "body": "<p>I am trying to read using the hex format with two characters at a time from a file. The problem is whenever the hex char has a 0 in it it is ignored while printing. ex. 08 just shows up as 8. How can I make sure it doesn't omit 0? Does it involve some kind of bit shifting?</p>\n\n<pre><code>std::ifstream stream;\nstream.open(file_path, std::ios_base::binary);\nif (!stream.bad()) {\nstd::cout &lt;&lt; std::hex;\nstd::cout.width(2);\n\n    while (!stream.eof()) {\n        unsigned char c;\n        stream &gt;&gt; c;\n        cout &lt;&lt; (short)c &lt;&lt;'\\n';\n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "eclipse", "vector", "stl"], "comments": [{"owner": {"reputation": 25744, "user_id": 2089675, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/sBz5q.jpg?s=128&g=1", "display_name": "smac89", "link": "https://stackoverflow.com/users/2089675/smac89"}, "edited": false, "score": 1, "creation_date": 1572474486, "post_id": 58634410, "comment_id": 103575853, "body": "<code>shrink_to_fit</code> was introduced in C++11. Make sure your ide/compiler flags is set to allow at least C++11"}, {"owner": {"reputation": 31, "user_id": 10591484, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-t8rWdHxiZUo/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbDM4Wdmw-N24Af3xp38_QSdn8TNqQ/mo/photo.jpg?sz=128", "display_name": "Ritik Saxena", "link": "https://stackoverflow.com/users/10591484/ritik-saxena"}, "reply_to_user": {"reputation": 25744, "user_id": 2089675, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/sBz5q.jpg?s=128&g=1", "display_name": "smac89", "link": "https://stackoverflow.com/users/2089675/smac89"}, "edited": false, "score": 0, "creation_date": 1572476672, "post_id": 58634410, "comment_id": 103576437, "body": "I am using C++14 i.e. ISO C++1y (-std=c++1y) but still getting error"}, {"owner": {"reputation": 25744, "user_id": 2089675, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/sBz5q.jpg?s=128&g=1", "display_name": "smac89", "link": "https://stackoverflow.com/users/2089675/smac89"}, "edited": false, "score": 0, "creation_date": 1572476775, "post_id": 58634410, "comment_id": 103576465, "body": "I&#39;m just saying I can&#39;t reproduce the error you are getting. <a href=\"https://onlinegdb.com/rJMIv9D9r\" rel=\"nofollow noreferrer\">onlinegdb.com/rJMIv9D9r</a>. This seems to be a problem with your IDE"}, {"owner": {"reputation": 25744, "user_id": 2089675, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/sBz5q.jpg?s=128&g=1", "display_name": "smac89", "link": "https://stackoverflow.com/users/2089675/smac89"}, "edited": false, "score": 0, "creation_date": 1572476866, "post_id": 58634410, "comment_id": 103576483, "body": "See if this question helps you: <a href=\"https://stackoverflow.com/questions/9131763/how-to-enable-c11-c0x-support-in-eclipse-cdt\" title=\"how to enable c11 c0x support in eclipse cdt\">stackoverflow.com/questions/9131763/&hellip;</a> or this one: <a href=\"https://stackoverflow.com/questions/33314814/how-to-enable-c11-in-eclipse-luna\" title=\"how to enable c11 in eclipse luna\">stackoverflow.com/questions/33314814/&hellip;</a>"}, {"owner": {"reputation": 31, "user_id": 10591484, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-t8rWdHxiZUo/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbDM4Wdmw-N24Af3xp38_QSdn8TNqQ/mo/photo.jpg?sz=128", "display_name": "Ritik Saxena", "link": "https://stackoverflow.com/users/10591484/ritik-saxena"}, "reply_to_user": {"reputation": 25744, "user_id": 2089675, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/sBz5q.jpg?s=128&g=1", "display_name": "smac89", "link": "https://stackoverflow.com/users/2089675/smac89"}, "edited": false, "score": 0, "creation_date": 1572476975, "post_id": 58634410, "comment_id": 103576509, "body": "I know because I ran the same program in Dev C++ and it works fine. But I mainly prefer Eclipse. BTW thanks for help."}], "answers": [{"tags": [], "owner": {"reputation": 59, "user_id": 11714718, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-KtrBXH5MuNs/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdW7iGTUyd2plJ8adG-cDTDi0xv6A/photo.jpg?sz=128", "display_name": "Robin Schwendele", "link": "https://stackoverflow.com/users/11714718/robin-schwendele"}, "is_accepted": false, "score": 0, "last_activity_date": 1572477174, "creation_date": 1572477174, "answer_id": 58634848, "question_id": 58634410, "link": "https://stackoverflow.com/questions/58634410/method-shrink-to-fit-could-not-be-resolved/58634848#58634848", "title": "Method &#39;shrink_to_fit&#39; could not be resolved", "body": "<p>Works fine for me.\nTry compile 'by hand' to find out if it is about the ide: </p>\n\n<pre><code>g++ foo.cpp -o foo\n./foo\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 141, "user_id": 12062748, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1d258a33fd96f1f8579389c3f8f4025?s=128&d=identicon&r=PG&f=1", "display_name": "nae9on", "link": "https://stackoverflow.com/users/12062748/nae9on"}, "is_accepted": false, "score": 1, "last_activity_date": 1572528010, "creation_date": 1572528010, "answer_id": 58644279, "question_id": 58634410, "link": "https://stackoverflow.com/questions/58634410/method-shrink-to-fit-could-not-be-resolved/58644279#58644279", "title": "Method &#39;shrink_to_fit&#39; could not be resolved", "body": "<p>It works fine for me (with -std=c++11 flag, and MinGW distro from <a href=\"https://nuwen.net/mingw.html#install\" rel=\"nofollow noreferrer\">https://nuwen.net/mingw.html#install</a>) on</p>\n\n<p>Eclipse IDE for C/C++ Developers,\nVersion: 2019-09 R (4.13.0)\nBuild id: 20190917-1200\nOS: Windows 10, v.10.0, x86_64 / win32\nJava version: 13.0.1</p>\n\n<p>as well as on Linux (with -std=c++11 flag and GCC 7.4.0 compiler). It could be a problem with your IDE, compiler (with right flag) or STL implementation. There can't be a 4th reason in my view.</p>\n"}], "owner": {"reputation": 31, "user_id": 10591484, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-t8rWdHxiZUo/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbDM4Wdmw-N24Af3xp38_QSdn8TNqQ/mo/photo.jpg?sz=128", "display_name": "Ritik Saxena", "link": "https://stackoverflow.com/users/10591484/ritik-saxena"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 130, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1572528010, "creation_date": 1572474057, "last_edit_date": 1572474214, "question_id": 58634410, "link": "https://stackoverflow.com/questions/58634410/method-shrink-to-fit-could-not-be-resolved", "title": "Method &#39;shrink_to_fit&#39; could not be resolved", "body": "<p>I am facing a problem with <strong>shrink_to_fit()</strong> function of STL C++. The problem is which I use it, the compiler gives error \"Method 'shrink_to_fit' could not be resolved\" on Eclipse Luna (32 bit) with MinGW compiler but the same program works fine in Dev C++.</p>\n\n<p>Image of the program:\n<a href=\"https://i.stack.imgur.com/2vVFO.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/2vVFO.png\" alt=\"enter image description here\"></a></p>\n\n<p>Error:\n<a href=\"https://i.stack.imgur.com/46odn.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/46odn.png\" alt=\"enter image description here\"></a></p>\n\n<p>Compiler do not recommend shrink_to_fit() after using dot(.):\n<a href=\"https://i.stack.imgur.com/1uIDO.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/1uIDO.png\" alt=\"enter image description here\"></a></p>\n\n<p>Original code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n\nusing namespace std;\n\nint main(void) {\n   vector&lt;int&gt; v(128);\n\n   cout &lt;&lt; \"Initial capacity = \" &lt;&lt; v.capacity() &lt;&lt; endl;\n\n   v.resize(25);\n   cout &lt;&lt; \"Capacity after resize = \" &lt;&lt; v.capacity() &lt;&lt; endl;\n\n   v.shrink_to_fit();\n   cout &lt;&lt; \"Capacity after shrink_to_fit = \" &lt;&lt; v.capacity() &lt;&lt; endl;\n\n   return 0;\n}\n</code></pre>\n\n<p>Please let me know is this my fault or IDE's.</p>\n\n<p>P.S. I am using C++14.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 1, "creation_date": 1572474379, "post_id": 58634395, "comment_id": 103575830, "body": "Please indicate the sample input, the expected output, and the observed output. Also, see <a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">How to debug small programs</a>."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1572475871, "post_id": 58634395, "comment_id": 103576212, "body": "Unrelated: Rather than computing primes every time and repeating a lot of work for each prime number checked, <a href=\"https://en.wikipedia.org/wiki/Memoization\" rel=\"nofollow noreferrer\">memoize the results</a>. You may find prime number sieving algorithms help with this and are much MUCH faster than the brute force approach."}], "answers": [{"tags": [], "owner": {"reputation": 457, "user_id": 9584001, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IxBn4.png?s=128&g=1", "display_name": "Rotartsi", "link": "https://stackoverflow.com/users/9584001/rotartsi"}, "is_accepted": true, "score": 2, "last_activity_date": 1572476803, "creation_date": 1572476803, "answer_id": 58634813, "question_id": 58634395, "link": "https://stackoverflow.com/questions/58634395/print-prime-factorization-in-exponential-form-in-c/58634813#58634813", "title": "Print prime factorization in exponential form in C++", "body": "<p>You can use an <code>std::unordered_map&lt;int, int&gt;</code> to store two numbers (<code>x</code> and <code>n</code> for <code>x^n</code>). Basically, factorize the number normally by looping through prime numbers smaller than the number itself, dividing the number by the each prime as many times as possible, and recording each prime you divide by. Each time you divide by a prime number <code>p</code>, increment the counter at <code>map[p]</code>. </p>\n\n<p>I've put together a sample implementation, from some old code I had. It asks for a number and factorizes it, displaying everything in <code>x^n</code>.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;unordered_map&gt;\n#include &lt;cmath&gt;\n\n\nbool isPrime(const int&amp; x) {\n    if (x &lt; 3 || x % 2 == 0) {\n        return x == 2;\n    } else {\n        for (int i = 3; i &lt; (int) (std::pow(x, 0.5) + 2); i += 2) {\n            if (x % i == 0) {\n                return false;\n            }\n        }\n        return true;\n    }\n}\n\nstd::unordered_map&lt;int, int&gt; prime_factorize(const int &amp;x) {\n    int currentX = abs(x);\n    if (isPrime(currentX) || currentX &lt; 4) {\n        return {{currentX, 1}};\n    }\n    std::unordered_map&lt;int, int&gt; primeFactors = {};\n    while (currentX % 2 == 0) {\n        if (primeFactors.find(2) != primeFactors.end()) {\n            primeFactors[2]++;\n        } else {\n            primeFactors[2] = 1;\n        }\n        currentX /= 2;\n    }\n\n    for (int i = 3; i &lt;= currentX; i += 2) {\n        if (isPrime(i)) {\n            while (currentX % i == 0) {\n                if (primeFactors.find(i) != primeFactors.end()) {\n                    primeFactors[i]++;\n                } else {\n                    primeFactors[i] = 1;\n                }\n                currentX /=  i;\n            }\n        }\n    }\n\n    return primeFactors;\n}\n\n\nint main() {\n    int x;\n    std::cout &lt;&lt; \"Enter a number: \";\n    std::cin &gt;&gt; x;\n\n    auto factors = prime_factorize(x);\n\n    std::cout &lt;&lt; x &lt;&lt; \" = \";\n    for (auto p : factors) {\n        std::cout &lt;&lt; \"(\" &lt;&lt; p.first &lt;&lt; \" ^ \" &lt;&lt; p.second &lt;&lt; \")\";\n    }\n}\n</code></pre>\n\n<p>Sample output:</p>\n\n<pre><code>Enter a number: 1238\n1238 = (619 ^ 1)(2 ^ 1)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1975, "user_id": 6070341, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YHHZU.png?s=128&g=1", "display_name": "Costantino Grana", "link": "https://stackoverflow.com/users/6070341/costantino-grana"}, "is_accepted": false, "score": 0, "last_activity_date": 1572530570, "creation_date": 1572530570, "answer_id": 58645019, "question_id": 58634395, "link": "https://stackoverflow.com/questions/58634395/print-prime-factorization-in-exponential-form-in-c/58645019#58645019", "title": "Print prime factorization in exponential form in C++", "body": "<p>To begin with, avoid <a href=\"https://stackoverflow.com/questions/1452721/why-is-using-namespace-std-considered-bad-practice\"><code>using namespace std</code></a> at the top of your program. Second, don't use function declarations when you can put your definitions before the use of those functions (but this may be a matter of preference).</p>\n\n<p>When finding primes, I'd divide the number by 2, then by 3, and so on. I can also try with 4, but I'll never be able to divide by 4 if 2 was a divisor, so non primes are automatically skipped. </p>\n\n<p>This is a possible solution:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nint main(void)\n{\n    int n = 3 * 5 * 5 * 262417;\n\n    bool first = true;\n    int i = 2;\n    int count = 0;\n    while (i &gt; 1) {\n        if (n % i == 0) {\n            n /= i;\n            ++count;\n        }\n        else {\n            if (count &gt; 0) {\n                if (!first)\n                    std::cout &lt;&lt; \", \";\n                std::cout &lt;&lt; i;\n                if (count &gt; 1)\n                    std::cout &lt;&lt; \"^\" &lt;&lt; count;\n                first = false;\n                count = 0;\n            }\n            i++;\n            if (i * i &gt; n)\n                i = n;\n        }\n    }\n    std::cout &lt;&lt; \"\\n\";\n\n    return 0;\n}\n</code></pre>\n\n<p>Note the <code>i * i &gt; n</code> which is an alternative to the <code>sqrt()</code> you are using.</p>\n"}], "owner": {"reputation": 3, "user_id": 12300020, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-qz98sVD5WWU/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reD7NM3fZG97aNABPAEZ0fRMGG_yw/photo.jpg?sz=128", "display_name": "Ivancito", "link": "https://stackoverflow.com/users/12300020/ivancito"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 202, "favorite_count": 0, "accepted_answer_id": 58634813, "answer_count": 2, "score": 0, "last_activity_date": 1572530570, "creation_date": 1572473973, "question_id": 58634395, "link": "https://stackoverflow.com/questions/58634395/print-prime-factorization-in-exponential-form-in-c", "title": "Print prime factorization in exponential form in C++", "body": "<p>So far I have this code. I'm trying to print prime factorization with exponents. For example, if my input is 20, the output should be 2^2, 5   </p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;cmath&gt;\nusing namespace std;\n\nvoid get_divisors (int n);\nbool prime( int n);\nint main(int argc, char** argv) {\n   int n = 0 ;\ncout &lt;&lt; \"Enter a number and press Enter: \";\ncin &gt;&gt;n;\ncout &lt;&lt; \" Number n is \" &lt;&lt; n &lt;&lt; endl;\nget_divisors(n);\ncout &lt;&lt; endl;\n\nreturn 0;\n}\nvoid get_divisors(int n){\n  double sqrt_of_n = sqrt(n);\n  for (int i =2; i &lt;= sqrt_of_n; ++i){\n    if (prime (i)){\n\n\n      if (n % i == 0){\n        cout &lt;&lt; i &lt;&lt; \", \"; \n        get_divisors(n / i);\n        return;\n      }\n    }\n  }\n  cout &lt;&lt; n;\n}\nbool prime (int n){\ndouble sqrt_of_n = sqrt (n);\nfor (int i = 2; i &lt;= sqrt_of_n; ++i){\n  if ( n % i == 0) return 0;\n  }\nreturn 1;\n}\n</code></pre>\n\n<p>I hope someone can help me with this.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 21162, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 3, "creation_date": 1572473763, "post_id": 58634329, "comment_id": 103575649, "body": "Please understand that StackOverflow is meant to help you by answering specific question on programming problems you have encountered whiole programming yourself. Or to put it differently, not to write programs for you. Please show what you have tried and explain in detail where you are stuck. If your problem is &quot;No idea where to start&quot; then the question is off-topic for being too broad to be answered, because any helpful question would amount to a C++ tutorial."}, {"owner": {"user_type": "does_not_exist", "display_name": "user12300071"}, "reply_to_user": {"reputation": 21162, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1572478746, "post_id": 58634329, "comment_id": 103576935, "body": "Thank you  @Robin Schwendele"}, {"owner": {"reputation": 21162, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1572504674, "post_id": 58634329, "comment_id": 103582409, "body": "Good edit. :-) Now it is an acceptable question. And it got you at least one helpful answer. Nice to see this."}], "answers": [{"comments": [{"owner": {"reputation": 21162, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1572504796, "post_id": 58634628, "comment_id": 103582431, "body": "Code-only answers are usually not considered helpful. They tend to spread the misunderstanding that StackOverflow is a free code writing service. Please augment it with some explanation. Why and how does your proposal solve the problem."}], "tags": [], "owner": {"reputation": 1, "user_id": 3641755, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UYruq.jpg?s=128&g=1", "display_name": "maszoka", "link": "https://stackoverflow.com/users/3641755/maszoka"}, "is_accepted": false, "score": 0, "last_activity_date": 1572531390, "last_edit_date": 1572531390, "creation_date": 1572475564, "answer_id": 58634628, "question_id": 58634329, "link": "https://stackoverflow.com/questions/58634329/how-to-make-a-program-to-calculate-this-equation/58634628#58634628", "title": "How to make a program to calculate this equation", "body": "<p>Besides the 3 obvious issues (infinite loop, missed initialization, missing function declaration) already listed above, we can optimize performance by calculating A^k iteratively, rather than re-calculating in each step:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nauto combinations(float A, unsigned short M) {\n    float ret_val = 1.0f;                  // For k=0: A^0 / 0! = 1\n    float num = A;  \n    float denum = 1;\n    for (int k = 1; k &lt;= M; ) {\n        ret_val += num / denum;\n        num *= A;\n        denum *= ++k;\n    }\n    return ret_val;\n}\n\nint main()\n{\n    printf(\"Value for A=2, M=10: %f\\n\\r\", combinations(2.0f, 10));\n    return 0;\n}\n\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 59, "user_id": 11714718, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-KtrBXH5MuNs/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdW7iGTUyd2plJ8adG-cDTDi0xv6A/photo.jpg?sz=128", "display_name": "Robin Schwendele", "link": "https://stackoverflow.com/users/11714718/robin-schwendele"}, "is_accepted": true, "score": 0, "last_activity_date": 1572476830, "last_edit_date": 1572476830, "creation_date": 1572475998, "answer_id": 58634702, "question_id": 58634329, "link": "https://stackoverflow.com/questions/58634329/how-to-make-a-program-to-calculate-this-equation/58634702#58634702", "title": "How to make a program to calculate this equation", "body": "<p>There are some errors in your code. At first, it will not compile, because the variable <code>k</code> is undefined.<br>\nNext, there is an endles loop, because of <code>k++</code> instead of <code>i++</code>.<br>\nAnd third, <code>sum</code> is not initialized (with 1, if you start your <code>i</code> and <code>k</code> at 1, too).</p>\n\n<p>so your modified code would look like this:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;cmath&gt;\nusing namespace std;\n\nint main(int argc, char** argv)\n{\n    int M, A;\n    cout &lt;&lt; \"A: \"; cin &gt;&gt; A;\n    cout &lt;&lt; \"M: \"; cin &gt;&gt; M;\n    float sum = 1;\n    int k = 1;\n    for(int i = 1; i &lt;= M; i++)\n    {\n        k = k * i;\n        float A1 = pow(A, i);\n        sum +=  A1 / k;\n    }\n    cout &lt;&lt; \"result: \" &lt;&lt; sum &lt;&lt; endl;\n}\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user12300071"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "closed_date": 1572519324, "accepted_answer_id": 58634702, "answer_count": 2, "score": 1, "last_activity_date": 1572531390, "creation_date": 1572473518, "last_edit_date": 1572481276, "question_id": 58634329, "link": "https://stackoverflow.com/questions/58634329/how-to-make-a-program-to-calculate-this-equation", "closed_reason": "Needs more focus", "title": "How to make a program to calculate this equation", "body": "<p>Hello I'm a beginner in C++, and I need to make a program to calculate this equation. Can anybody help me? <code>A</code> and <code>M</code> reads from the keyboard</p>\n\n<p>Equation:</p>\n\n<p><a href=\"https://i.stack.imgur.com/hOq8N.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/hOq8N.png\" alt=\"image\"></a></p>\n\n<p>I tried with this code:</p>\n\n<pre><code>int M = 1;\nint A;\ncin &gt;&gt; A;\ncin &gt;&gt; M;\nfloat sum;\nfor(int i = 1; i&lt;=M; k++){\n    k = k*i;\n    float A1 = pow(A, i);\n    sum += A1 / k;\n}\n</code></pre>\n"}, {"tags": ["c++", "perforce", "p4api"], "answers": [{"comments": [{"owner": {"reputation": 577, "user_id": 4577467, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-QeCEV_3eDeM/AAAAAAAAAAI/AAAAAAAAAE0/KhDbuC4MGs4/photo.jpg?sz=128", "display_name": "Mike Finch", "link": "https://stackoverflow.com/users/4577467/mike-finch"}, "edited": false, "score": 1, "creation_date": 1572476434, "post_id": 58634513, "comment_id": 103576377, "body": "Thank you, you explain it very well.  You should be writing the p4api documentation!"}, {"owner": {"reputation": 31669, "user_id": 3799759, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5820aa24337a2f622b78e92c39e3e3d6?s=128&d=identicon&r=PG", "display_name": "Samwise", "link": "https://stackoverflow.com/users/3799759/samwise"}, "reply_to_user": {"reputation": 577, "user_id": 4577467, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-QeCEV_3eDeM/AAAAAAAAAAI/AAAAAAAAAE0/KhDbuC4MGs4/photo.jpg?sz=128", "display_name": "Mike Finch", "link": "https://stackoverflow.com/users/4577467/mike-finch"}, "edited": false, "score": 0, "creation_date": 1572479401, "post_id": 58634513, "comment_id": 103577081, "body": "As it happens, I wrote (most of) the first draft of it about 15 years ago.  :D"}], "tags": [], "owner": {"reputation": 31669, "user_id": 3799759, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5820aa24337a2f622b78e92c39e3e3d6?s=128&d=identicon&r=PG", "display_name": "Samwise", "link": "https://stackoverflow.com/users/3799759/samwise"}, "is_accepted": true, "score": 2, "last_activity_date": 1572474811, "creation_date": 1572474811, "answer_id": 58634513, "question_id": 58634240, "link": "https://stackoverflow.com/questions/58634240/specify-global-options-for-a-perforce-command-run-using-p4api/58634513#58634513", "title": "Specify global options for a Perforce command run using p4api", "body": "<p>The global options are arguments to the client app, not the server.  The <code>Run()</code> method is for sending commands/arguments to the server; if you send it the client-side args it won't know what to do with them.</p>\n\n<p>To tell the client to set the \"tag\" protocol, do:</p>\n\n<pre><code>client.SetProtocol(\"tag\", \"\");\n</code></pre>\n\n<p>Note that this must be called <strong>before</strong> you call <code>Run()</code> since it modifies the protocol that is used by <code>Run()</code>.</p>\n\n<p>If you want to see how the various global options are implemented, you can just look at the <code>p4</code> source code.  </p>\n\n<ul>\n<li>Here's where the connection settings are set: \n<a href=\"https://swarm.workshop.perforce.com/files/guest/perforce_software/p4/2018-2/client/clientmain.cc#286\" rel=\"nofollow noreferrer\">https://swarm.workshop.perforce.com/files/guest/perforce_software/p4/2018-2/client/clientmain.cc#286</a></li>\n<li>Here's where protocol variables are set:\n<a href=\"https://swarm.workshop.perforce.com/files/guest/perforce_software/p4/2018-2/client/clientmain.cc#508\" rel=\"nofollow noreferrer\">https://swarm.workshop.perforce.com/files/guest/perforce_software/p4/2018-2/client/clientmain.cc#508</a></li>\n<li>Here's where the -F flag is implemented: <a href=\"https://swarm.workshop.perforce.com/files/guest/perforce_software/p4/2018-2/client/clientmain.cc#562\" rel=\"nofollow noreferrer\">https://swarm.workshop.perforce.com/files/guest/perforce_software/p4/2018-2/client/clientmain.cc#562</a>   </li>\n</ul>\n\n<p>Note that most of the global options correspond directly to <code>ClientApi</code> methods, which you can see in the header (<code>clientapi.h</code>) or in the documentation: <a href=\"https://www.perforce.com/manuals/v15.1/p4api/chapter.methods.html#clientapi\" rel=\"nofollow noreferrer\">https://www.perforce.com/manuals/v15.1/p4api/chapter.methods.html#clientapi</a></p>\n"}], "owner": {"reputation": 577, "user_id": 4577467, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-QeCEV_3eDeM/AAAAAAAAAAI/AAAAAAAAAE0/KhDbuC4MGs4/photo.jpg?sz=128", "display_name": "Mike Finch", "link": "https://stackoverflow.com/users/4577467/mike-finch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 101, "favorite_count": 0, "accepted_answer_id": 58634513, "answer_count": 1, "score": 1, "last_activity_date": 1572476863, "creation_date": 1572472977, "last_edit_date": 1572476863, "question_id": 58634240, "link": "https://stackoverflow.com/questions/58634240/specify-global-options-for-a-perforce-command-run-using-p4api", "title": "Specify global options for a Perforce command run using p4api", "body": "<p>I am using the Perforce, a.k.a. Helix Core, C++ API to programmatically run a Perforce command.  How do I specify a global option for the command?  </p>\n\n<p>For example, I want to programmatically run the <code>clients</code> command with several global options.  If run from a command shell, it would look like the following.</p>\n\n<pre class=\"lang-bsh prettyprint-override\"><code>p4 -z tag -F %client% clients -u mikef\n</code></pre>\n\n<p>The global options I want, <code>-z</code> and <code>-F</code>, are not ones that you can specify via environment variables, as far as I know.  But even if you could, I cannot rely on the user to set them.</p>\n\n<p>On a lark, I added the global options to the argument array provided to the <code>ClientApi</code> object.  For example: </p>\n\n<pre><code>#include &lt;p4/clientapi.h&gt;\n#include \"CustomClientUser.h\"  // A class I derived from ClientUser\n\n// Connect to server.\nStrBuf msg;\nError e;\nClientApi client;\nclient.SetProtocol( \"tag\", \"\" );\nclient.Init( &amp;e );\nif ( e.Test() )\n{\n  e.Fmt( &amp;msg );\n  fprintf( \"%s\\n\", msg.Text() );\n  return;\n}\n\n// Use my own client user.\nCustomClientUser cu;\n\n// Run the command.  Try adding global options at the beginning of the arg array.\nchar * argv[] = { \"-z\", \"tag\", \"-u\", \"td27117\" };\nint argc = sizeof( argv ) / sizeof( char * );\nclient.SetArgv( argc, argv );\nclient.Run( \"clients\", &amp;cu );\n</code></pre>\n\n<p>But, that did not work.  The error output is what you would expect when you give it a command option it does not understand.</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Usage: clients [ -t ] [ -u user ] [ -U ] [ [-e|-E] query -m max ] [ -a | -s serverID ] [ -S stream ]\nInvalid option: -z.\n</code></pre>\n"}, {"tags": ["c++", "binary-search-tree"], "comments": [{"owner": {"reputation": 3320, "user_id": 3480808, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbca64f49de22131b4b51fddfa8a7df4?s=128&d=identicon&r=PG", "display_name": "Michael Doubez", "link": "https://stackoverflow.com/users/3480808/michael-doubez"}, "edited": false, "score": 0, "creation_date": 1572473366, "post_id": 58634222, "comment_id": 103575525, "body": "Is your question specific to a c++ code ? (since you flagged it). In this case, please provide a minimal code, your exact issue and what you tried. If your question is more general, the answer is in understanding what a BST is."}], "answers": [{"tags": [], "owner": {"reputation": 1515, "user_id": 7702120, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kCI6Q.jpg?s=128&g=1", "display_name": "ashwin agrawal", "link": "https://stackoverflow.com/users/7702120/ashwin-agrawal"}, "is_accepted": false, "score": 0, "last_activity_date": 1572473406, "creation_date": 1572473406, "answer_id": 58634305, "question_id": 58634222, "link": "https://stackoverflow.com/questions/58634222/how-to-find-the-immediate-larger-element-in-a-bst-given-a-specific-node/58634305#58634305", "title": "How to find the immediate larger element in a BST given a specific node?", "body": "<p>So basically you want the inorder successor of the given node: Below is the solution:</p>\n\n<pre><code>struct node * inOrderSuccessor(struct node *root, struct node *n) \n{ \n\n    if( n-&gt;right != NULL ) \n        return minValue(n-&gt;right); \n\n    struct node *succ = NULL; \n\n    // Start from root and search for successor down the tree \n    while (root != NULL) \n    { \n        if (n-&gt;data &lt; root-&gt;data) \n        { \n            succ = root; \n            root = root-&gt;left; \n        } \n        else if (n-&gt;data &gt; root-&gt;data) \n            root = root-&gt;right; \n        else\n           break; \n    } \n\n    return succ; \n} \n</code></pre>\n\n<p>Logic of the algorithm is (it does not require parent node pointer): </p>\n\n<p>1) If right subtree of node is not NULL, then succ lies in right subtree. Do following.\nGo to right subtree and return the node with minimum key value in right subtree.</p>\n\n<p>2) If right subtree of node is NULL, then start from root and use search like technique. Do following.\nTravel down the tree, if a node\u2019s data is greater than root\u2019s data then go right side, otherwise go to left side.</p>\n"}], "owner": {"reputation": 11, "user_id": 12300036, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf704e563645e76a43eba8ecc42c0999?s=128&d=identicon&r=PG&f=1", "display_name": "pangolinpoacher8281", "link": "https://stackoverflow.com/users/12300036/pangolinpoacher8281"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 180, "favorite_count": 0, "closed_date": 1572524224, "answer_count": 1, "score": 1, "last_activity_date": 1572473406, "creation_date": 1572472782, "question_id": 58634222, "link": "https://stackoverflow.com/questions/58634222/how-to-find-the-immediate-larger-element-in-a-bst-given-a-specific-node", "closed_reason": "Duplicate", "title": "How to find the immediate larger element in a BST given a specific node?", "body": "<p>I'm using a BST. Given a specific node, how do I find the immediate larger element in the tree?</p>\n"}, {"tags": ["c++", "gradle"], "answers": [{"tags": [], "owner": {"reputation": 59, "user_id": 11714718, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-KtrBXH5MuNs/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdW7iGTUyd2plJ8adG-cDTDi0xv6A/photo.jpg?sz=128", "display_name": "Robin Schwendele", "link": "https://stackoverflow.com/users/11714718/robin-schwendele"}, "is_accepted": false, "score": 0, "last_activity_date": 1572481122, "creation_date": 1572481122, "answer_id": 58635338, "question_id": 58634214, "link": "https://stackoverflow.com/questions/58634214/how-to-link-static-library-from-gradle-subproject-in-application-subproject/58635338#58635338", "title": "how to link static library from gradle subproject in application subproject", "body": "<p>So finally i found the answer by myself and its quite simple.</p>\n\n<p>in <code>MyCppApp/build.gradle</code></p>\n\n<p>it has to be </p>\n\n<pre><code>apply plugin: \"cpp-application\"\n\napplication {\n    dependencies {\n        implementation project(':MyCppLib')\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 59, "user_id": 11714718, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-KtrBXH5MuNs/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdW7iGTUyd2plJ8adG-cDTDi0xv6A/photo.jpg?sz=128", "display_name": "Robin Schwendele", "link": "https://stackoverflow.com/users/11714718/robin-schwendele"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 84, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1572481122, "creation_date": 1572472751, "last_edit_date": 1572476651, "question_id": 58634214, "link": "https://stackoverflow.com/questions/58634214/how-to-link-static-library-from-gradle-subproject-in-application-subproject", "title": "how to link static library from gradle subproject in application subproject", "body": "<p>I have a project structure like this:</p>\n\n<pre><code>MyProject/  \n\u251c\u2500\u2500 gradle.build  \n\u251c\u2500\u2500 gradle.settings  \n\u251c\u2500\u2500 MyCppApp/  \n|   \u251c\u2500\u2500 gradle.build  \n|   \u251c\u2500\u2500 gradle.settings  \n\u2502   \u2514\u2500\u2500 src/  \n|       \u2514\u2500\u2500 main/  \n|           \u2514\u2500\u2500 cpp/  \n|               \u2514\u2500\u2500 my_cpp_app.cpp  \n\u2514\u2500\u2500 MyCppLib/  \n    \u251c\u2500\u2500 gradle.build  \n    \u251c\u2500\u2500 gradle.settings  \n    \u2514\u2500\u2500 src/  \n        \u251c\u2500\u2500 main/  \n        |   \u251c\u2500\u2500 cpp/  \n        |   |   \u2514\u2500\u2500 my_cpp_lib.h\n        |   \u2514\u2500\u2500 public/\n        |       \u2514\u2500\u2500 my_cpp_lib.h\n        \u2514\u2500\u2500 test/\n            \u2514\u2500\u2500 cpp/\n                \u2514\u2500\u2500 my_cpp_lib_test.cpp\n</code></pre>\n\n<p>My gradle files:</p>\n\n<p><code>settings.gradle</code></p>\n\n<pre><code>include 'MyCppLib'\ninclude 'MyCppApp'\n</code></pre>\n\n<p><code>build.gradle</code></p>\n\n<pre><code>configure(':MyCppApp') {\n    dependencies {\n//        compile project(':MyCppLib')   &lt;-- this does not work\n    }\n}\n</code></pre>\n\n<p><code>MyCppApp/build.gradle</code></p>\n\n<pre><code>apply plugin: \"cpp-application\"\n\n\ndependencies {\n//    compile project(':MyCppLib')  &lt;-- this does not work\n}\n</code></pre>\n\n<p><code>MyCppLib/build.gradle</code></p>\n\n<pre><code>apply plugin: \"cpp-library\"\napply plugin: \"cpp-unit-test\"\n\n\nlibrary {\n    linkage = [Linkage.STATIC]\n}\n</code></pre>\n\n<p>I tired <code>compile project(':MyCppLib')</code> in both shown places, and also <code>implementation project(':MyCppLib')</code>. The error is always that the corresponding function is not found, but in my understanding, the tasks should automatically added by the plugins.<br>\nI expect a simple solution, as the goal is obvious but besides some android project im very new to gradle and was not able to figgure it out jet.</p>\n"}, {"tags": ["c++", "pointers", "shared-ptr"], "comments": [{"owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "edited": false, "score": 1, "creation_date": 1572473045, "post_id": 58634161, "comment_id": 103575425, "body": "You couldn&#39;t initialize a raw pointer like that either. Have you considered <a href=\"https://en.cppreference.com/w/cpp/memory/shared_ptr/make_shared\" rel=\"nofollow noreferrer\">make_shared</a> or similar?"}, {"owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "edited": false, "score": 0, "creation_date": 1572473167, "post_id": 58634161, "comment_id": 103575467, "body": "Oh, also, correct code and the full error please. I&#39;m just assuming that the error is the obvious one, but you haven&#39;t shown it, and as Jarod42 pointed out, your code isn&#39;t consistent."}], "answers": [{"tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": false, "score": 0, "last_activity_date": 1572481459, "creation_date": 1572481459, "answer_id": 58635372, "question_id": 58634161, "link": "https://stackoverflow.com/questions/58634161/how-to-declare-a-shared-pointer-in-member-initialization-list/58635372#58635372", "title": "How to declare a shared pointer in member initialization list", "body": "<p><code>std::shared_ptr&lt;T&gt;</code> does not have a constructor that accepts a <code>std::shared_ptr&lt;Y&gt;</code> when <code>Y</code> does not derive from <code>T</code>.</p>\n\n<p>Assuming your <code>Cartridge</code> does not derive from <code>memory::Mmu</code> (you did not show the declaration of <code>Cartridge</code>), then you cannot construct a <code>std::shared_ptr&lt;memory::Mmu&gt;</code> directly from a <code>std::shared_ptr&lt;Cartridge&gt;</code>.  Hence the error message.</p>\n\n<p>If you need to construct a new <code>memory::Mm</code> that references a <code>Cartridge</code>, then in the <code>Gameboy</code> member initialization list, change this:</p>\n\n<pre><code>mmu(cartridge)\n</code></pre>\n\n<p>To either:</p>\n\n<pre><code>mmu(new memory::Mm(cartridge))\n</code></pre>\n\n<p>Or:</p>\n\n<pre><code>mmu(std::make_shared&lt;memory::Mm&gt;(cartridge))\n</code></pre>\n"}], "owner": {"reputation": 159, "user_id": 12299993, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e1879829fd0ee1fb59811b28812566f?s=128&d=identicon&r=PG&f=1", "display_name": "toaster_fan", "link": "https://stackoverflow.com/users/12299993/toaster-fan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 71, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1572481459, "creation_date": 1572472462, "last_edit_date": 1572474837, "question_id": 58634161, "link": "https://stackoverflow.com/questions/58634161/how-to-declare-a-shared-pointer-in-member-initialization-list", "title": "How to declare a shared pointer in member initialization list", "body": "<p>I'm trying to add a shared pointer to my initialization list. This pointer has already been declared in my header file. Once i add it to the list, the compiler errors out with <code>error: no matching function for call to std::shared_ptr&lt;memory::Mmu&gt;::shared_ptr(std::shared_ptr&lt;Cartridge&gt;&amp;)</code></p>\n\n<p>header file:</p>\n\n<pre><code>class Gameboy {\n    public:\n        Gameboy(std::vector&lt;uint8_t&gt;);\n        void run();\n    private:\n        void tick();\n        std::shared_ptr&lt;Cartridge&gt; cartridge;\n        std::shared_ptr&lt;memory::Mmu&gt; mmu;\n};\n</code></pre>\n\n<p>c file:</p>\n\n<pre><code>Gameboy::Gameboy(std::vector&lt;uint8_t&gt; cartridgeData)\n    : cartridge(getCartridge(std::move(cartridgeData))),\n      mmu(cartridge)\n    {\n\n    }\n</code></pre>\n\n<p>mmu.h</p>\n\n<pre><code>\nnamespace memory {\n    class Mmu {\n        public:\n            std::shared_ptr&lt;Cartridge&gt; cartridge;\n            Mmu(std::shared_ptr&lt;Cartridge&gt;&amp;);\n\n        private:\n            bool bootRomActive() const;\n    };\n}\n</code></pre>\n\n<p>I expect it to call the mmu constructor which takes <code>std::shared_ptr&lt;Cartridge&gt;&amp;</code> as first param.</p>\n"}, {"tags": ["c++", "c", "pointers", "fork", "shared-memory"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 2, "creation_date": 1572472697, "post_id": 58634111, "comment_id": 103575317, "body": "You&#39;d need to copy the object into the shared memory. The pointer points to non-shared memory."}, {"owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "edited": false, "score": 0, "creation_date": 1572472863, "post_id": 58634111, "comment_id": 103575370, "body": "The only way to share that object directly is to make sure it is allocated in memory which is shared. If you can&#39;t  change the library, provide the storage for it or copy the object yourself, you&#39;re limited to hacks like figuring out what allocator it uses and intercepting that."}, {"owner": {"reputation": 3, "user_id": 12299900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58b62cafb853317b8869fb0206cb5d83?s=128&d=identicon&r=PG", "display_name": "Cristiano Urban", "link": "https://stackoverflow.com/users/12299900/cristiano-urban"}, "edited": false, "score": 0, "creation_date": 1572473098, "post_id": 58634111, "comment_id": 103575444, "body": "The point is that I think the only way to access that object is through a pointer, since the function I call in the main() belongs to another library and returns a pointer."}, {"owner": {"reputation": 3320, "user_id": 3480808, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbca64f49de22131b4b51fddfa8a7df4?s=128&d=identicon&r=PG", "display_name": "Michael Doubez", "link": "https://stackoverflow.com/users/3480808/michael-doubez"}, "edited": false, "score": 0, "creation_date": 1572473551, "post_id": 58634111, "comment_id": 103575587, "body": "The shared memory can be mounted at different address in different process. You nees to use offsets instead of pointer value. Boost a a library specifically designed to replicate STL in shared memory: interprocess. Look it up for inspiration."}, {"owner": {"reputation": 3, "user_id": 12299900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58b62cafb853317b8869fb0206cb5d83?s=128&d=identicon&r=PG", "display_name": "Cristiano Urban", "link": "https://stackoverflow.com/users/12299900/cristiano-urban"}, "edited": false, "score": 0, "creation_date": 1572551626, "post_id": 58634111, "comment_id": 103605566, "body": "I think I will change approach in order to solve my problem. Thank you all for your suggestions!"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1572626700, "post_id": 58634111, "comment_id": 103628888, "body": "a pointer means nothing when in a different process"}, {"owner": {"reputation": 3, "user_id": 12299900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58b62cafb853317b8869fb0206cb5d83?s=128&d=identicon&r=PG", "display_name": "Cristiano Urban", "link": "https://stackoverflow.com/users/12299900/cristiano-urban"}, "edited": false, "score": 0, "creation_date": 1573124654, "post_id": 58634111, "comment_id": 103783240, "body": "I know, in fact I had to think to a different solution."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 12299900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58b62cafb853317b8869fb0206cb5d83?s=128&d=identicon&r=PG", "display_name": "Cristiano Urban", "link": "https://stackoverflow.com/users/12299900/cristiano-urban"}, "edited": false, "score": 0, "creation_date": 1573124349, "post_id": 58718220, "comment_id": 103783061, "body": "Thank you very much Luis, super exhaustive explanation!"}, {"owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "reply_to_user": {"reputation": 3, "user_id": 12299900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58b62cafb853317b8869fb0206cb5d83?s=128&d=identicon&r=PG", "display_name": "Cristiano Urban", "link": "https://stackoverflow.com/users/12299900/cristiano-urban"}, "edited": false, "score": 0, "creation_date": 1573198978, "post_id": 58718220, "comment_id": 103811167, "body": "youre welcome... you should select the answer as your preferred, if you are satisfied with it."}], "tags": [], "owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "is_accepted": true, "score": 0, "last_activity_date": 1572982340, "creation_date": 1572982340, "answer_id": 58718220, "question_id": 58634111, "link": "https://stackoverflow.com/questions/58634111/fork-shared-memory-and-pointers-in-c/58718220#58718220", "title": "fork(), shared memory and pointers in C", "body": "<p>Basically a pointer is an address of some data in the virtual space of one process.  You cannot share pointers between processes because those pointers will be interpreted in a different address space  (in general, this also applies to the kernel mode virtual space and the user mode of <em>the same</em> process).  Let's use an example... you have make some allocations (between them you have made a <code>mmap(2)</code> allocation) and then you <code>fork(2)</code> another process.  Until then, all memory addresses pointed to the same places if we consider that both processes had existed before the fork, they would have been doing the same, getting the same results, etc.</p>\n\n<p>But once both processes depart from each other, all the allocations made in one process can be differently positioned than <em>the same allocations in the other process</em>, as the different histories of each process could provide different results from any allocator. Just assume some temporal order in the tasks and some time dependant state change... after it, the states of both processes will be different. </p>\n\n<p>Now let's suppose you have a pointer in one process, that points to an structure of data, that you want to share with the other.  But the other process has not even allocated the same thing... so passing e.g. <code>0x00456211ff</code> to the other process will point to a place in the other process where nothing has been allocated (leading to a <code>SIGSEGV</code> signal and process abort)</p>\n\n<p>Once the processes divert their virtual spaces store different things, and virtual pointers in one space are not interpretable in the other process'.</p>\n"}], "owner": {"reputation": 3, "user_id": 12299900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58b62cafb853317b8869fb0206cb5d83?s=128&d=identicon&r=PG", "display_name": "Cristiano Urban", "link": "https://stackoverflow.com/users/12299900/cristiano-urban"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 154, "favorite_count": 0, "accepted_answer_id": 58718220, "answer_count": 1, "score": 0, "last_activity_date": 1572982340, "creation_date": 1572472112, "last_edit_date": 1572472564, "question_id": 58634111, "link": "https://stackoverflow.com/questions/58634111/fork-shared-memory-and-pointers-in-c", "title": "fork(), shared memory and pointers in C", "body": "<p>I cannot share a pointer to an object among processes with shared memory.</p>\n\n<p>I can successfully share a struct like the one below among different processes:</p>\n\n<pre><code>    // Data to be shared among processes\n    struct Shared_data {\n        int setPointCounter;\n        struct Point old_point;\n        pthread_mutex_t my_mutex;\n    } *shd;\n</code></pre>\n\n<p>The struct is declared as global (it is located before the main(), let's say).</p>\n\n<p>I initialize the shared memory into the main:</p>\n\n<pre><code>shd = (struct Shared_data *) (mmap(NULL, sizeof *shd, PROT_READ | PROT_WRITE, MAP_SHARED | MAP_ANONYMOUS, -1, 0));\n</code></pre>\n\n<p>and then at a certain point I do a fork(). It works fine.</p>\n\n<p>The problem arises when I have to share something like this:</p>\n\n<pre><code>    // Data to be shared among processes\n    struct Shared_data {\n        int setPointCounter;\n        struct Point old_point;\n        MyObject *obj;\n        pthread_mutex_t my_mutex;\n    } *shd;\n</code></pre>\n\n<p>In the main I call a function from a third-party library which returns a pointer to an object of MyObject type and I would like to share it in some way. How can I do this?</p>\n\n<p>By searching on the web I've found something related to relative pointers but I'm not sure it will work and, at the same time, I don't know how to do it the right way.</p>\n\n<p>I'm working on Linux (Slackware 64 14.2) and the language is C/C++ (mostly is C, actually).</p>\n\n<p>Thank you in advance for your time.</p>\n"}, {"tags": ["c++", "pointers", "constants", "pass-by-reference"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1572472237, "post_id": 58634095, "comment_id": 103575172, "body": "Your <code>const char*</code> overloads should look exactly like you other overloads.  Give that a try."}, {"owner": {"reputation": 298, "user_id": 12127295, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89e07b6af34c7bccf3e50e2e61fcafa1?s=128&d=identicon&r=PG&f=1", "display_name": "John C.", "link": "https://stackoverflow.com/users/12127295/john-c"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1572472395, "post_id": 58634095, "comment_id": 103575224, "body": "didn&#39;t work, you mean to change the arguments type to <code>int</code> or <code>float</code>"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1572472466, "post_id": 58634095, "comment_id": 103575248, "body": "Just like you did <code>int temp =x;     x=y;     y=temp;</code> for <code>int</code>&#39;s, you should be using <code>const char* temp =x;     x=y;     y=temp;</code> for <code>const char *</code>&#39;s."}, {"owner": {"reputation": 298, "user_id": 12127295, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89e07b6af34c7bccf3e50e2e61fcafa1?s=128&d=identicon&r=PG&f=1", "display_name": "John C.", "link": "https://stackoverflow.com/users/12127295/john-c"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1572472639, "post_id": 58634095, "comment_id": 103575301, "body": "thank! but can you explain why that happened?"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1572490302, "post_id": 58634095, "comment_id": 103579230, "body": "@NathanOliver-ReinstateMonica (the sooner the better) Bishoy, what happened (depending on your machine x86_64, etc..) is <code>sizeof (int)</code> is only 1/2 the <code>sizeof(a_pointer)</code>, (generally <code>int</code> is 4-bytes and <code>a_pointer</code> is 8-bytes on 64-bit systems). When you use <code>int help = *x;</code> (should be just <code>x</code>, not <code>*x</code> a <code>char</code>), <code>help</code> isn&#39;t large enough to hold the complete address, so things go off the rails at that point in your <code>str1</code>, <code>str2</code> pointer swap. Also, enable compiler warnings and do not accept code until it compile without warning (<code>-Wall -Wextra -pedantic</code> for gcc/clang or <code>&#47;W3</code> for VS)"}], "answers": [{"tags": [], "owner": {"reputation": 671, "user_id": 7898100, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef63bacd8554153c3ad9127ce502180d?s=128&d=identicon&r=PG&f=1", "display_name": "Tobias Wollgam", "link": "https://stackoverflow.com/users/7898100/tobias-wollgam"}, "is_accepted": false, "score": 1, "last_activity_date": 1572617730, "creation_date": 1572617730, "answer_id": 58660732, "question_id": 58634095, "link": "https://stackoverflow.com/questions/58634095/modifying-const-char-pointers-in-c/58660732#58660732", "title": "Modifying &quot;Const Char Pointers&quot; in C++", "body": "<p>As suggested in the comments:</p>\n\n<pre><code>void swapping(const char*&amp; x, const char*&amp; y)\n{\n    auto t = x;\n    x = y;\n    y = t;\n}\n</code></pre>\n\n<p>Now you should consider to use a template:</p>\n\n<pre><code>template&lt;typename Type&gt;\nvoid swapping(Type&amp; a, Type&amp; b)\n{\n    auto t = a;\n    a = b;\n    b = t;\n}\n</code></pre>\n"}], "owner": {"reputation": 298, "user_id": 12127295, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89e07b6af34c7bccf3e50e2e61fcafa1?s=128&d=identicon&r=PG&f=1", "display_name": "John C.", "link": "https://stackoverflow.com/users/12127295/john-c"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1572617730, "creation_date": 1572471997, "question_id": 58634095, "link": "https://stackoverflow.com/questions/58634095/modifying-const-char-pointers-in-c", "title": "Modifying &quot;Const Char Pointers&quot; in C++", "body": "<p>I am doing a program to test swapping couple of things by reference.\nI managed to get the first two functions in my code to work but can't get to change the <code>char *</code> in the third function. </p>\n\n<p>I think the problem is that it's a constant and only valid to <code>read-only</code> \nthat's what the error is telling me but How to be able to work with it in this way?</p>\n\n<p>Here is the code:</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nvoid swapping(int &amp;x, int &amp;y) \n{\n    int temp =x;\n    x=y;\n    y=temp;\n\n}\n\nvoid swapping(float &amp;x, float &amp;y)\n{\n    float temp=x;\n    x=y;\n    y=temp;\n\n} \n\n\nvoid swapping(const char *&amp;x,const char *&amp;y) \n{\n\n    int help = *x;\n    (*x)=(*y);\n    (*y)=help;\n\n} // swap char pointers\n\n\n\nint main(void) {\n    int a = 7, b = 15;\n    float x = 3.5, y = 9.2;\n\n    const char *str1 = \"One\";\n    const char *str2 = \"Two\";\n\n\n\n    cout &lt;&lt; \"a=\" &lt;&lt; a &lt;&lt; \", b=\" &lt;&lt; b &lt;&lt; endl;\n    cout &lt;&lt; \"x=\" &lt;&lt; x &lt;&lt; \", y=\" &lt;&lt; y &lt;&lt; endl;\n    cout &lt;&lt; \"str1=\" &lt;&lt; str1 &lt;&lt; \", str2=\" &lt;&lt; str2 &lt;&lt; endl;\n\n    swapping(a, b);\n    swapping(x, y);\n    swapping(str1, str2);\n\n    cout &lt;&lt; \"\\n\";\n    cout &lt;&lt; \"a=\" &lt;&lt; a &lt;&lt; \", b=\" &lt;&lt; b &lt;&lt; endl;\n    cout &lt;&lt; \"x=\" &lt;&lt; x &lt;&lt; \", y=\" &lt;&lt; y &lt;&lt; endl;\n    cout &lt;&lt; \"str1=\" &lt;&lt; str1 &lt;&lt; \", str2=\" &lt;&lt; str2 &lt;&lt; endl;\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "templates", "sfinae"], "comments": [{"owner": {"reputation": 7540, "user_id": 4474230, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/713c7ce18010e541853962264a719d83?s=128&d=identicon&r=PG&f=1", "display_name": "Jeffrey", "link": "https://stackoverflow.com/users/4474230/jeffrey"}, "edited": false, "score": 0, "creation_date": 1572470736, "post_id": 58633834, "comment_id": 103574682, "body": "<code>template&lt;&gt;void Do(A* data)</code> calling <code>template&lt;&gt;void Do(const A* data)</code> ? Or do you want to avoid even the intermediate call?"}, {"owner": {"reputation": 4438, "user_id": 5427663, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9f9c9fe9199349793db217d3a9e9596?s=128&d=identicon&r=PG&f=1", "display_name": "TheOperator", "link": "https://stackoverflow.com/users/5427663/theoperator"}, "edited": false, "score": 0, "creation_date": 1572471904, "post_id": 58633834, "comment_id": 103575066, "body": "In case you go with overloads instead of specialization, a related and very common problem is code reuse for const/non-const <i>member</i> functions. There are different solutions to that one, which can also be applied to const-qualified parameters in general. I proposed mine <a href=\"https://stackoverflow.com/a/56694496/5427663%5D\">here</a>."}], "answers": [{"tags": [], "owner": {"reputation": 7540, "user_id": 4474230, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/713c7ce18010e541853962264a719d83?s=128&d=identicon&r=PG&f=1", "display_name": "Jeffrey", "link": "https://stackoverflow.com/users/4474230/jeffrey"}, "is_accepted": false, "score": 0, "last_activity_date": 1572470971, "creation_date": 1572470971, "answer_id": 58633896, "question_id": 58633834, "link": "https://stackoverflow.com/questions/58633834/same-template-specialization-for-const-non-const-type/58633896#58633896", "title": "Same template specialization for const &amp; non const type", "body": "<p>You could use this pattern, if you are willing to write a small stub:</p>\n\n<pre><code>template&lt;&gt;\nvoid Do(const A* data)\n{\n    std::cout &lt;&lt; \"Do(A*)\\n\";\n}\n\ntemplate&lt;&gt;\nvoid Do(A* data)\n{\n    Do((const A*)data);\n}\n</code></pre>\n\n<p>The main code you don't want to duplicate uses <code>const A*</code>, because, well, you want it to work on const data too. The non-const one simply forward to it.</p>\n"}, {"comments": [{"owner": {"reputation": 7540, "user_id": 4474230, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/713c7ce18010e541853962264a719d83?s=128&d=identicon&r=PG&f=1", "display_name": "Jeffrey", "link": "https://stackoverflow.com/users/4474230/jeffrey"}, "edited": false, "score": 0, "creation_date": 1572471194, "post_id": 58633909, "comment_id": 103574831, "body": "I like the new name."}, {"owner": {"reputation": 383, "user_id": 2158951, "user_type": "registered", "accept_rate": 21, "profile_image": "https://www.gravatar.com/avatar/90e9102d8eb4a5568575f9fe6918d8c1?s=128&d=identicon&r=PG", "display_name": "mezo", "link": "https://stackoverflow.com/users/2158951/mezo"}, "edited": false, "score": 0, "creation_date": 1572472035, "post_id": 58633909, "comment_id": 103575107, "body": "this is basically what i was looking for, thanks. You missed couple of typename&#39;s tho."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 383, "user_id": 2158951, "user_type": "registered", "accept_rate": 21, "profile_image": "https://www.gravatar.com/avatar/90e9102d8eb4a5568575f9fe6918d8c1?s=128&d=identicon&r=PG", "display_name": "mezo", "link": "https://stackoverflow.com/users/2158951/mezo"}, "edited": false, "score": 0, "creation_date": 1572472103, "post_id": 58633909, "comment_id": 103575130, "body": "@mezo The typenames aren&#39;t required when using <code>enable_if_t</code>.  If I was using <code>std::enable_if&lt;std::is_same_v&lt;std::decay_t&lt;T&gt;, A&gt;, bool&gt;::type</code> then I would since <code>::type</code> is a dependent type."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1572472149, "post_id": 58633909, "comment_id": 103575145, "body": "See the code working here without them: <a href=\"http://coliru.stacked-crooked.com/a/94b0b64bfc0039af\" rel=\"nofollow noreferrer\">coliru.stacked-crooked.com/a/94b0b64bfc0039af</a>"}], "tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": false, "score": 3, "last_activity_date": 1572471367, "last_edit_date": 1572471367, "creation_date": 1572471064, "answer_id": 58633909, "question_id": 58633834, "link": "https://stackoverflow.com/questions/58633834/same-template-specialization-for-const-non-const-type/58633909#58633909", "title": "Same template specialization for const &amp; non const type", "body": "<p>Instead of specializing, you can overload.  Using</p>\n\n<pre><code>template&lt;typename T, std::enable_if_t&lt;std::is_same_v&lt;std::decay_t&lt;T&gt;, A&gt;, bool&gt; = true&gt;\nvoid Do(T* data)\n{\n    std::cout &lt;&lt; \"Do(A*)\\n\";\n}\n\ntemplate&lt;typename T, std::enable_if_t&lt;std::is_same_v&lt;std::decay_t&lt;T&gt;, B&gt;, bool&gt; = true&gt;\nvoid Do(T* data)\n{\n    std::cout &lt;&lt; \"Do(B*)\\n\";\n}\n</code></pre>\n\n<p>These functions will be called when you pass <code>const A*</code>/<code>A*</code>/<code>const B*</code>/<code>B*</code> since they are a better match then the generic template.  The reason they are a better match is because <code>T</code> is more constrained.  It is considered <em>more specialized</em> and so it will win in a tie breaker with the generic template in overload resolution.</p>\n"}, {"tags": [], "owner": {"reputation": 4438, "user_id": 5427663, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9f9c9fe9199349793db217d3a9e9596?s=128&d=identicon&r=PG&f=1", "display_name": "TheOperator", "link": "https://stackoverflow.com/users/5427663/theoperator"}, "is_accepted": true, "score": 0, "last_activity_date": 1572473544, "creation_date": 1572473544, "answer_id": 58634335, "question_id": 58633834, "link": "https://stackoverflow.com/questions/58633834/same-template-specialization-for-const-non-const-type/58634335#58634335", "title": "Same template specialization for const &amp; non const type", "body": "<h1>C++14</h1>\n\n<p>I upvoted <a href=\"https://stackoverflow.com/a/58633909/5427663\">this answer</a> which is a good showcase for SFINAE. To extend on it, you can simplify the SFINAE expression with <code>std::is_convertible</code>. This is more analogous how overload resolution would work (adding const qualifier).</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>template&lt;typename T, std::enable_if_t&lt;std::is_convertible_v&lt;T*, const A*&gt;, int&gt; = 0&gt;\nvoid Do(T* data)\n{\n    std::cout &lt;&lt; \"Do(A*)\\n\";\n}\n\ntemplate&lt;typename T, std::enable_if_t&lt;std::is_convertible_v&lt;T*, const B*&gt;, int&gt; = 0&gt;\nvoid Do(T* data)\n{\n    std::cout &lt;&lt; \"Do(B*)\\n\";\n}\n</code></pre>\n\n<hr>\n\n<h1>C++17</h1>\n\n<p>As a bonus, in C++17 with <code>constexpr if</code>, you can use a single function for all cases:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>template&lt;typename T&gt;\nvoid Do(T data)\n{\n    if constexpr (std::is_convertible_v&lt;T, const A*&gt;)\n        std::cout &lt;&lt; \"Do(A*)\\n\";\n    else if constexpr (std::is_convertible_v&lt;T, const B*&gt;)\n        std::cout &lt;&lt; \"Do(B*)\\n\";\n    else    \n        std::cout &lt;&lt; \"Do() default\\n\";\n}\n</code></pre>\n"}], "owner": {"reputation": 383, "user_id": 2158951, "user_type": "registered", "accept_rate": 21, "profile_image": "https://www.gravatar.com/avatar/90e9102d8eb4a5568575f9fe6918d8c1?s=128&d=identicon&r=PG", "display_name": "mezo", "link": "https://stackoverflow.com/users/2158951/mezo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 143, "favorite_count": 0, "accepted_answer_id": 58634335, "answer_count": 3, "score": 1, "last_activity_date": 1572473544, "creation_date": 1572470575, "question_id": 58633834, "link": "https://stackoverflow.com/questions/58633834/same-template-specialization-for-const-non-const-type", "title": "Same template specialization for const &amp; non const type", "body": "<p>I have a following code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nclass A\n{};\n\nclass B\n{};\n\ntemplate&lt;typename T&gt;\nvoid Do(T data)\n{\n    std::cout &lt;&lt; \"Do() default\\n\";\n}\n\ntemplate&lt;&gt;\nvoid Do(A* data)\n{\n    std::cout &lt;&lt; \"Do(A*)\\n\";\n}\n\ntemplate&lt;&gt;\nvoid Do(B* data)\n{\n    std::cout &lt;&lt; \"Do(B*)\\n\";\n}\n\nint main(int argc, char* argv[])\n{\n    A* a = nullptr;\n    B* b = nullptr;\n\n    const A* aConst = nullptr;\n    const B* bConst = nullptr;\n\n    Do(a);\n    Do(aConst);\n\n    Do(b);\n    Do(bConst);\n\n    return 0;\n}\n</code></pre>\n\n<p>which outputs:</p>\n\n<pre><code>Do(A*)\nDo() default\nDo(B*)\nDo() default\n</code></pre>\n\n<p>How should I rewrite the code to share template specialization for const &amp; non-const type without copy pasting the specialization with const keyword specifier so it produces output:</p>\n\n<pre><code>Do(A*)\nDo(A*)\nDo(B*)\nDo(B*)\n</code></pre>\n"}, {"tags": ["c++", "visual-c++"], "comments": [{"owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "edited": false, "score": 0, "creation_date": 1572472271, "post_id": 58633825, "comment_id": 103575184, "body": "If the shared pointers are relevant to your overall project but not necessary to reproduce the problem,  remove them. Producing a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> helps you understand your problem. As a bonus, if it doesn&#39;t help quite enough, it leaves you with code suitable for posting here."}], "answers": [{"tags": [], "owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "is_accepted": true, "score": 1, "last_activity_date": 1572472630, "creation_date": 1572472630, "answer_id": 58634190, "question_id": 58633825, "link": "https://stackoverflow.com/questions/58633825/how-to-insert-a-struct-with-pointers-into-map/58634190#58634190", "title": "How to insert a struct with pointers into map?", "body": "<pre><code>array = std::make_shared&lt;std::vector&lt;S1&gt;&gt;();\n</code></pre>\n\n<p>On each iteration of the <code>for</code> loop that has this statement, this overwrites the previous value of <code>array</code> that was created on the last iteration of this <code>for</code> loop.</p>\n\n<p>Since this is the only and the last smart pointer reference to the vector, the previous <code>array</code> always gets destroyed. On each iteration of the for-loop, because this <code>std::shared_ptr</code> does not wind up anywhere else, the vector created on the previous iteration of the loop will go to the big bit bucket in the sky.</p>\n\n<p>But before this happens, with each reincarnation of <code>std::vector</code>, later in this <code>for</code> loop we have:</p>\n\n<pre><code> std::move(array-&gt;data())\n</code></pre>\n\n<p>Two problems here:</p>\n\n<p>1) This <code>std::move</code> accomplishes absolutely nothing useful whatsoever, here. But, more importantly:</p>\n\n<p>2) As you know, <code>data()</code> returns an internal pointer to the vector's underlying storage. But on the next iteration of the loop, this <code>array</code> gets destroyed, as I explained above, leaving a dangling pointer to the contents of the destroyed vector, behind.</p>\n\n<p>As such, subsequent usage of the pointer becomes undefined behavior. With or without <code>std::move</code> (which means nothing here).</p>\n\n<p>To fix this, you need to take into greater consideration what smart pointers are; and how they work; what <code>std::vector</code> is, what its <code>data()</code> method returns; object lifetime and scoping in C++; then combine this together in a way that makes it work for your program correctly.</p>\n"}], "owner": {"reputation": 1310, "user_id": 1718761, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/3a981d1625c3419e383fd57633c4e5a1?s=128&d=identicon&r=PG", "display_name": "Ender", "link": "https://stackoverflow.com/users/1718761/ender"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 139, "favorite_count": 0, "accepted_answer_id": 58634190, "answer_count": 1, "score": 0, "last_activity_date": 1572472630, "creation_date": 1572470527, "last_edit_date": 1572471788, "question_id": 58633825, "link": "https://stackoverflow.com/questions/58633825/how-to-insert-a-struct-with-pointers-into-map", "title": "How to insert a struct with pointers into map?", "body": "<p>I'm trying to insert a C struct from a third-pary library into a map. The problem is, the struct contains a pointer to other structs as a member field and when inserting this into my_map, the S2.arr field seems to be getting over written and I'm not sure why.</p>\n\n<p>I've been able to reproduce this have have it running here.</p>\n\n<pre><code>http://coliru.stacked-crooked.com/a/7c47a5c7c7294a49\n</code></pre>\n\n<p>I know the shared_ptr's may seem to confuse things, but I've left my main containers in place as it's how my larger app is accessing things. Here's what I've pieced together to reproduce the problem I'm having.</p>\n\n<pre><code>typedef struct {\n    int index;\n    int value;\n} S1;\n\ntypedef struct {\n    int index;\n    int num;\n    S1 *arr;\n} S2;\n\n// populate new_vec with S1 if idx equals S1.index.\nvoid find(int idx, \n    std::shared_ptr&lt;std::vector&lt;S1&gt;&gt; vec, \n    std::shared_ptr&lt;std::vector&lt;S1&gt;&gt; new_vec)\n{\n    for (const auto&amp; s1 : *vec) {\n        if (idx == s1.index) {\n            new_vec-&gt;push_back(s1);\n        }\n    }\n}\n\nint main()\n{\n    bool found = false;\n\n    std::shared_ptr&lt;std::vector&lt;S1&gt;&gt; array;\n    std::shared_ptr&lt;std::map&lt;int, S2&gt;&gt; my_map = std::make_shared&lt;std::map&lt;int, S2&gt;&gt;();\n    std::shared_ptr&lt;std::vector&lt;S1&gt;&gt; vec = std::make_shared&lt;std::vector&lt;S1&gt;&gt;();\n    std::shared_ptr&lt;std::vector&lt;S1&gt;&gt; new_vec = std::make_shared&lt;std::vector&lt;S1&gt;&gt;();\n\n    // initialize vec\n    for (int i = 0; i &lt; 3; ++i)\n        vec-&gt;push_back(S1 { 1, i});\n\n    for (int i = 0; i &lt; 4; ++i) \n        vec-&gt;push_back(S1 { 2, i});\n\n    for (const auto&amp; s1 : *vec) {\n        found = false;\n\n        array = std::make_shared&lt;std::vector&lt;S1&gt;&gt;();\n\n        // populate array with S1.indices that equal 1.\n        find(s1.index, vec, array);\n\n        my_map-&gt;insert(std::pair&lt;int, S2&gt;(s1.index, \n            S2 {\n                s1.index,\n                static_cast&lt;int&gt;(array-&gt;size()), \n                std::move(array-&gt;data())\n            } \n        ));\n    }\n\n    for (const auto&amp; [key, val] : *my_map) {\n        std::cout &lt;&lt; \"key: \" &lt;&lt; key &lt;&lt; std::endl;\n\n        for (int i = 0; i &lt; val.num; ++i) {\n            S1 s = val.arr[i];\n            std::cout &lt;&lt; \"  index: \" &lt;&lt; s.index &lt;&lt; \", val: \" &lt;&lt; s.value &lt;&lt; std::endl;\n        }\n    }\n}\n</code></pre>\n\n<p>My intention is to have this print the following:</p>\n\n<pre><code>key: 1\n  index: 1, val: 0\n  index: 1, val: 1\n  index: 1, val: 2\nkey: 2\n  index: 2, val: 0\n  index: 2, val: 1\n  index: 2, val: 2\n  index: 2, val: 3\n</code></pre>\n\n<p>Yet what I'm getting is this:</p>\n\n<pre><code>key: 1\n  index: 2, val: 0\n  index: 2, val: 1\n  index: 2, val: 2\nkey: 2\n  index: 2, val: 0\n  index: 2, val: 1\n  index: 2, val: 2\n  index: 2, val: 3\n</code></pre>\n\n<p>Update:\nMade some edits as maps only contain unique keys.</p>\n"}, {"tags": ["c++", "file"], "comments": [{"owner": {"reputation": 98775, "user_id": 421195, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9a9793fdeb3b94e185c8c99c0238372f?s=128&d=identicon&r=PG", "display_name": "paulsm4", "link": "https://stackoverflow.com/users/421195/paulsm4"}, "edited": false, "score": 0, "creation_date": 1572470586, "post_id": 58633788, "comment_id": 103574628, "body": "If you&#39;re taking a class, your instructor must have given you some clues.  If you&#39;re just cuious, there are many good books and tutorials to get you started with C++ programming in general.  For this particular problem, you&#39;ll need to know 1) how to write and compile a simple program, 2) How to open and read a text file, 3) how to choose a data structure to hold your numbers (array or vector, for example) and 4) how specifically to read the text file (in the format you&#39;ve written) in to your data structure (the structure you decided on)."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user10957435"}, "reply_to_user": {"reputation": 5162, "user_id": 2785528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fc85984f1234637fa4ec24d93ae51bc?s=128&d=identicon&r=PG&f=1", "display_name": "2785528", "link": "https://stackoverflow.com/users/2785528/2785528"}, "edited": false, "score": 0, "creation_date": 1572471566, "post_id": 58633833, "comment_id": 103574955, "body": "It doesn&#39;t need it that I know. If <code>cin::operator&gt;&gt;()</code> fails, then that should mean we&#39;re done."}, {"owner": {"reputation": 98775, "user_id": 421195, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9a9793fdeb3b94e185c8c99c0238372f?s=128&d=identicon&r=PG", "display_name": "paulsm4", "link": "https://stackoverflow.com/users/421195/paulsm4"}, "edited": false, "score": 0, "creation_date": 1572472583, "post_id": 58633833, "comment_id": 103575282, "body": "The OP&#39;s question is hopelessly vague.  Your original, one line response, while &quot;not untrue&quot;, left a lot to be desired.  Your subsequent edit - with a complete example showing <a href=\"http://www.cplusplus.com/reference/sstream/stringstream/stringstream/\" rel=\"nofollow noreferrer\">stringstream</a> and <a href=\"http://www.cplusplus.com/reference/fstream/ifstream/\" rel=\"nofollow noreferrer\">ifstream</a> was a huge improvement :)  Great contribution!"}, {"owner": {"user_type": "does_not_exist", "display_name": "user10957435"}, "reply_to_user": {"reputation": 98775, "user_id": 421195, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9a9793fdeb3b94e185c8c99c0238372f?s=128&d=identicon&r=PG", "display_name": "paulsm4", "link": "https://stackoverflow.com/users/421195/paulsm4"}, "edited": false, "score": 0, "creation_date": 1572472674, "post_id": 58633833, "comment_id": 103575314, "body": "@paulsm4 I personally think that it&#39;s better to use not use 2 lines when only 1 will suffice, but I recon you had a point on both accounts."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user10957435"}, "is_accepted": false, "score": 2, "last_activity_date": 1572471990, "last_edit_date": 1572471990, "creation_date": 1572470562, "answer_id": 58633833, "question_id": 58633788, "link": "https://stackoverflow.com/questions/58633788/what-should-i-use-to-read-integers-from-a-file/58633833#58633833", "title": "What should I use to read integers from a file", "body": "<p>Try using a <code>while</code> to loop through every integer in the file:</p>\n\n<pre><code>while(infile&gt;&gt;x) {\n    // Do something with the integer\n}\n</code></pre>\n\n<hr>\n\n<p>Note that if you want it in a 2 dimensional array of rows and columns, you could do something more elaborate like this using a <a href=\"https://en.cppreference.com/w/cpp/io/basic_stringstream\" rel=\"nofollow noreferrer\"><code>std::stringstream</code></a>:</p>\n\n<pre><code>#include &lt;sstream&gt;\n#include &lt;string&gt;\n\n//...\n\nstd::vector&lt;std::vector&lt;int&gt;&gt; result;\nstd::string tmp;\nwhile(getline(infile,tmp)) {\n    stringstream stream;\n    stream &lt;&lt; tmp;\n\n    // add new row\n    std::vector&lt;int&gt; row;\n    while (ss &gt;&gt; x) {\n        // add x to the new row\n   }\n\n   result.push_back(row);\n}\n\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 12299680, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-3_wvfXYtW0I/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfTvF8EnYwjS4t5Ax1qLGTNU6gPQQ/photo.jpg?sz=128", "display_name": "Sweet Candy", "link": "https://stackoverflow.com/users/12299680/sweet-candy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1572471990, "creation_date": 1572470309, "last_edit_date": 1572471348, "question_id": 58633788, "link": "https://stackoverflow.com/questions/58633788/what-should-i-use-to-read-integers-from-a-file", "title": "What should I use to read integers from a file", "body": "<p>Hi I am a beginner in programming, and I want to read many integers distributed in row and columns, and how many integer is there. Whenever I try infile>>x it just take the first value.</p>\n\n<p>I would appreciate it so much ,if you can just explain how can you do it to me. \nthe file looks like this:(much longer but I want you to get the idea):</p>\n\n<pre><code>41  467 334 500 169 724 478 358 962 464 705 145 281 827 961 491 995 942 827 436 391 604 902 153 292 382 421 716 718 895 447 726 771 538 869 912 667 299 35  894 703 811 322 333 673 664 141 711 253 868 547 644 662 757 37  859 723 741 529 778 316 35  190 842 288 106 40  942 264 648 446 805 890 729 370 350 6   101 393 548 629 623 84  954 756 840 966 376 931 308 944 439 626 323 537 538 118 82  929 541 833 115 639 658 704 930 977 306 673 386 21  745 924 72  270 829 777 573 97  512 986 290 161 636 355 767 655 574 31  52  350 150 941 724 966 430 107 191 7   337 457 287 753 383 945 909 209 758 221 588 422 946 506 30  413 168 900 591 762 655 410 359 624 537 548 483 595 41  602 350 291 836 374 20  596 21  348 199 668 484 281 734 53  999 418 938 900 788 127 467 728 893 648 483 807 421 310 617 813 514 309 616 935 451 600 249 519 556 798 303 224 8   844 609 989 702 195 485 93  343 523 587 314 503 448 200 458 618 580 796 798 281 589 798 9   157 472 622 538 292 38  179 190 657 958 191 815 888 156 511 202 634 272 55  328 646 362 886 875 433 869 142 844 416 881 998 322 651 21  699 557 476 892 389 75  712 600 510 3   869 861 688 401 789 255 423 2   585 182 285 88  426 617 757 832 932 169 154 721 189 976 329 368 692 425 555 434 549 441 512 145 60  718 753 139 423 279 996 687 529 549 437 866 949 193 195 297 416 286 105 488 282 455 734 114 701 316 671 786 263 313 355 185 53  912 808 832 945 313 756 321 558 646 982 481 144 196 222 129 161 535 450 173 466 44  659 292 439 253 24  154 510 745 649 186 313 474 22  168 18  787 905 958 391 202 625 477 414 314 824 334 874 372 159 833 70  487 297 518 177 773 270 763 668 192 985 102 480 213 627 802 99  527 625 543 924 23  972 61  181 3   432 505 593 725 31  492 142 222 286 64  900 187 360 413 974 270 170 235 833 711 760 896 667 285 550 140 694 695 624 19  125 576 694 658 302 371 466 678 593 851 484 18  464 119 152 800 87  60  926 10  757 170 315 576 \n</code></pre>\n"}, {"tags": ["c++", "windows", "keyboard"], "comments": [{"owner": {"reputation": 22357, "user_id": 3439404, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5YzGh.jpg?s=128&g=1", "display_name": "JosefZ", "link": "https://stackoverflow.com/users/3439404/josefz"}, "edited": false, "score": 0, "creation_date": 1574527671, "post_id": 58633725, "comment_id": 104267782, "body": "Can you accept a solution if written as a <code>Powershell</code> script + <code>C#</code> P/Invoke?"}, {"owner": {"reputation": 793, "user_id": 955611, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/09fc3f620331ded19e87cadfefd08fce?s=128&d=identicon&r=PG", "display_name": "rkjnsn", "link": "https://stackoverflow.com/users/955611/rkjnsn"}, "reply_to_user": {"reputation": 22357, "user_id": 3439404, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5YzGh.jpg?s=128&g=1", "display_name": "JosefZ", "link": "https://stackoverflow.com/users/3439404/josefz"}, "edited": false, "score": 0, "creation_date": 1574617451, "post_id": 58633725, "comment_id": 104286618, "body": "I&#39;m sure I could adapt it to fit my needs."}], "answers": [{"tags": [], "owner": {"reputation": 22357, "user_id": 3439404, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5YzGh.jpg?s=128&g=1", "display_name": "JosefZ", "link": "https://stackoverflow.com/users/3439404/josefz"}, "is_accepted": false, "score": 0, "last_activity_date": 1574723334, "creation_date": 1574723334, "answer_id": 59041425, "question_id": 58633725, "link": "https://stackoverflow.com/questions/58633725/windows-detect-if-right-alt-generates-ctrlalt-altgr-in-current-layout/59041425#59041425", "title": "Windows: Detect if right alt generates Ctrl+Alt (AltGr) in current layout", "body": "<p><a href=\"https://docs.microsoft.com/en-gb/windows/win32/api/winuser/nf-winuser-vkkeyscanexw\" rel=\"nofollow noreferrer\"><code>VkKeyScanExW</code> function</a> has the following <strong>Return Value</strong>:</p>\n\n<blockquote>\n  <p>Type: <code>SHORT</code></p>\n  \n  <p>If the function succeeds, the low-order byte of the return value\n  contains the virtual-key code and the high-order byte contains the\n  shift state, which can be a combination of the following flag bits.</p>\n\n<pre><code>Return value  Description\n 1              Either SHIFT key is pressed.\n 2              Either CTRL key is pressed.\n 4              Either ALT key is pressed.\n 8              The Hankaku key is pressed\n16              Reserved (defined by the keyboard layout driver).\n32              Reserved (defined by the keyboard layout driver).\n</code></pre>\n  \n  <p>If the function finds no key that translates to the passed character\n  code, both the low-order and high-order bytes contain <code>\u20131</code>.</p>\n  \n  <p>\u2026 For keyboard layouts that use the right-hand ALT key as a shift key\n  (for example, the French keyboard layout), the shift state is\n  represented by the value <code>6</code>, because <strong>the <em>right-hand ALT</em> key is\n  converted internally into <em>CTRL+ALT</em></strong>.</p>\n</blockquote>\n\n<p>The function translates a character to the corresponding virtual-key code and shift state. The function translates the character using the input language and physical keyboard layout identified by the input locale identifier. </p>\n\n<p>Unfortunately, I don't know an inverse function (translate virtual-key code and shift state to the corresponding character using the input language and physical keyboard layout).<BR>\nThe function <code>Get-KeyboardRightAlt</code> defined in the following PowerShell script <code>58633725_RightAltFinder.ps1</code> mimics such an inverse function for particular shift state <code>6</code> (which corresponds to <kbd>RightAlt</kbd>) and for any <em>installed</em> input locale identifier applying brute-force approach: checks output from <code>VkKeyScanExW</code> for each possible character (Unicode range from <code>U+0020</code> to <code>U+FFFD</code>).</p>\n\n<pre><code>Function Get-KeyboardRightAlt {\n[cmdletbinding()]\nParam (\n    [parameter(Mandatory=$False)] [int32]$HKL=0,\n    [parameter(Mandatory=$False)][switch]$All    # returns all `RightAlt` codes\n)\nbegin {\n    $InstalledInputLanguages = [System.Windows.Forms.InputLanguage]::InstalledInputLanguages\n    if ( $HKL -eq 0 ) {\n        $DefaultInputLanguage = [System.Windows.Forms.InputLanguage]::DefaultInputLanguage\n        $HKL = $DefaultInputLanguage.Handle\n        Write-Warning ( \"input language {0:x8}: system default\" -f $HKL )\n    } else {\n        if ( $HKL -notin $InstalledInputLanguages.Handle ) {\n            Write-Warning ( \"input language {0:x8}: not installed!\" -f $HKL )\n        }\n    }\n    $resultFound = $False\n    $result = [PSCustomObject]@{\n        VkKey         = '{0:x4}' -f 0\n        Unicode       = '{0:x4}' -f 0\n        Char          = ''\n        RightAltKey   = ''\n    }\n}\nProcess {\n    Write-Verbose ( \"input language {0:x8}: processed\" -f $HKL )\n    for ( $i   = 0x0020;  # Space (1st \"printable\" character)\n          $i -le 0xFFFD;  # Replacement Character\n          $i++ ) {\n        if ( $i -ge 0xD800 -and # &lt;Non Private Use High Surrogate, First&gt;\n                  #   DB7F      # &lt;Non Private Use High Surrogate, Last&gt;\n                  #   DB80      # &lt;Private Use High Surrogate, First&gt;\n                  #   DBFF      # &lt;Private Use High Surrogate, Last&gt;\n                  #   DC00      # &lt;Low Surrogate, First&gt;\n                  #   DFFF      # &lt;Low Surrogate, Last&gt;\n                  #   E000      # &lt;Private Use, First&gt;\n             $i -le 0xF8FF      # &lt;Private Use, Last&gt;\n            ) { continue }      # skip some codepoints\n        $VkKey = [Win32Functions.KeyboardScan]::VkKeyScanEx([char]$i, $HKL)\n        if ( ( $VkKey -ne -1 ) -and ( ($VkKey -band 0x0600) -eq 0x0600) ) {\n            $resultFound = $True\n            if ( $All.IsPresent ) {\n                $result.VkKey       = '{0:x4}' -f $VkKey\n                $result.Unicode     = '{0:x4}' -f $i\n                $result.Char        = [char]$i\n                $result.RightAltKey = [Win32Functions.KeyboardScan]::\n                            VKCodeToUnicodeHKL($VkKey % 0x100, $HKL)\n                $result\n            } else {\n                break\n            }\n        }\n    }\n    if ( -not ($All.IsPresent) ) { $resultFound }\n}\n} # Function Get-KeyboardRightAlt\n  # abbreviation HKL (Handle Keyboard Layout) = an input locale identifier\n\nif ( $null -eq  ( 'Win32Functions.KeyboardScan' -as [type]) ) {\n    Add-Type -Name KeyboardScan -Namespace Win32Functions -MemberDefinition @'\n\n    [DllImport(\"user32.dll\", CharSet = CharSet.Unicode)]\n    public static extern short VkKeyScanEx(char ch, IntPtr dwhkl);\n\n    [DllImport(\"user32.dll\")]\n    public static extern uint MapVirtualKeyEx(uint uCode, uint uMapType, IntPtr dwhkl);\n\n    [DllImport(\"user32.dll\")]\n    static extern int GetKeyNameText(int lParam, \n        [Out] System.Text.StringBuilder lpString,\n        int nSize);\n\n    [DllImport(\"user32.dll\")]\n    static extern int ToUnicodeEx( \n        uint wVirtKey, uint wScanCode, byte [] lpKeyState, \n        [Out, MarshalAs(UnmanagedType.LPWStr)] System.Text.StringBuilder pwszBuff, \n        int cchBuff, uint wFlags, IntPtr dwhkl);\n\n    [DllImport(\"user32.dll\")]\n    public static extern bool GetKeyboardState(byte [] lpKeyState);\n\n    [DllImport(\"user32.dll\")]\n    static extern uint MapVirtualKey(uint uCode, uint uMapType);\n\n    [DllImport(\"user32.dll\")]\n    public static extern IntPtr GetKeyboardLayout(uint idThread);\n\n    public static string VKCodeToUnicodeHKL(uint VKCode, IntPtr HKL)\n    {\n        System.Text.StringBuilder sbString = new System.Text.StringBuilder();\n        byte[] bKeyState  = new byte[255];\n        bool bKeyStateStatus = GetKeyboardState(bKeyState);\n        if (!bKeyStateStatus) \n            return \"\";\n        uint lScanCode = MapVirtualKey(VKCode,0);\n        uint xflags = 4; // If bit 2 is set, keyboard state is not changed (Windows 10, version 1607 and newer)\n\n        ToUnicodeEx(VKCode, lScanCode, bKeyState, sbString, (int)5, xflags, HKL);\n        return sbString.ToString();\n    }\n\n    // \u2193 for the present: unsuccessful\n    public static string VKCodeToUnicodeHKLRightAlt(uint VKCode, IntPtr HKL)\n    {\n        System.Text.StringBuilder sbString = new System.Text.StringBuilder();\n        byte[] bKeyState  = new byte[255];\n        // bool bKeyStateStatus = GetKeyboardState(bKeyState);\n        // if (!bKeyStateStatus) \n        //    return \"\";\n        bKeyState[118] = 128; // LeftCtrl\n        bKeyState[120] = 128; // LeftAlt\n        bKeyState[121] = 128; // RightAlt\n        uint lScanCode = MapVirtualKey(VKCode,0);\n        uint xflags = 4; // If bit 2 is set, keyboard state is not changed (Windows 10, version 1607 and newer)\n\n        ToUnicodeEx(VKCode, lScanCode, bKeyState, sbString, (int)5, xflags, HKL);\n        return sbString.ToString();\n    // \u2191 for the present: unsuccessful\n    }\n'@\n}\n\nif ( -not ('System.Windows.Forms.InputLanguage' -as [type]) ) {\n    Add-Type -AssemblyName System.Windows.Forms\n}\n\n# EOF 58633725_RightAltFinder.ps1\n</code></pre>\n\n<p><strong>Output</strong>. The function returns either </p>\n\n<ul>\n<li>boolean value (<code>true</code> if supplied keyboard layout supports <kbd>RightAlt</kbd> functionality, <code>false</code> otherwise), or</li>\n<li>(with <code>-all</code> switch) an object containing full <kbd>RightAlt</kbd>+<kbd>?</kbd> list with following properties:\n\n<ul>\n<li><code>VkKey\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0</code> - (used for debugging),</li>\n<li><code>Unicode\u00a0\u00a0\u00a0\u00a0</code>\u00a0- codepoint of resultant character,</li>\n<li><code>Char\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0</code> - resultant character itself,</li>\n<li><code>RightAltKey</code> - character pressed while holding <kbd>RightAlt</kbd>.</li>\n</ul></li>\n</ul>\n\n<p>Of course, sometimes a resultant character in some layout can be a deadkey, like diaeresis (<code>\u00a8</code>) in the <a href=\"https://docs.microsoft.com/en-gb/globalization/keyboards/kbdrum.html\" rel=\"nofollow noreferrer\">Russian example</a> below.</p>\n\n<pre><code>. D:\\PShell\\SO\\58633725_RightAltFinder.ps1 # activate the function\n\nGet-KeyboardRightAlt -HKL 0x04090405       # US keyboard\n</code></pre>\n\n<blockquote>\n<pre><code>False\n</code></pre>\n</blockquote>\n\n<pre><code>Get-KeyboardRightAlt -HKL 0xf0330419       # Russian - Mnemonic\n</code></pre>\n\n<blockquote>\n<pre><code>True\n</code></pre>\n</blockquote>\n\n<pre><code>Get-KeyboardRightAlt -HKL 0xf0330419 -all  # Russian - Mnemonic\n</code></pre>\n\n<blockquote>\n<pre><code>VkKey Unicode Char RightAltKey\n----- ------- ---- -----------\n06c0  00a8       \u00a8 \u044a          \n06de  2019       \u2019 \u044c          \n0638  20bd       \u20bd 8\n</code></pre>\n</blockquote>\n\n<hr>\n\n<p>Another problem is determining <em>currently active keyboard layout</em>. The following PowerShell script declares <code>Get-KeyboardLayoutForPid</code> function which reliably gets the Current Windows Keyboard Layout for any process (described in <a href=\"https://stackoverflow.com/a/59038452/3439404\">this my answer</a>):</p>\n\n<pre><code>if ( $null -eq ('Win32Functions.KeyboardLayout' -as [type]) ) {\n    Add-Type -MemberDefinition @'\n        [DllImport(\"user32.dll\")] \n        public static extern IntPtr GetKeyboardLayout(uint thread);\n'@ -Name KeyboardLayout -Namespace Win32Functions\n}\n\nFunction Get-KeyboardLayoutForPid {\n    [cmdletbinding()]\n    Param (\n        [parameter(Mandatory=$False, ValueFromPipeline=$False)]\n        [int]$Id = $PID,\n        # used formerly for debugging\n        [parameter(Mandatory=$False, DontShow=$True)]\n        [switch]$Raw\n    )\n\n    $InstalledInputLanguages = [System.Windows.Forms.InputLanguage]::InstalledInputLanguages\n    $CurrentInputLanguage    = [System.Windows.Forms.InputLanguage]::DefaultInputLanguage # CurrentInputLanguage\n    $CurrentInputLanguageHKL = $CurrentInputLanguage.Handle # just an assumption\n    ### Write-Verbose ('CurrentInputLanguage: {0}, 0x{1:X8} ({2}), {3}' -f $CurrentInputLanguage.Culture, ($CurrentInputLanguageHKL -band 0xffffffff), $CurrentInputLanguageHKL, $CurrentInputLanguage.LayoutName)\n\n    Function GetRealLayoutName ( [IntPtr]$HKL ) {\n    $regBase = 'Registry::' + \n                'HKLM\\SYSTEM\\CurrentControlSet\\Control\\Keyboard Layouts'\n    $LayoutHex = '{0:x8}' -f ($hkl -band 0xFFFFFFFF)\n    if ( ($hkl -band 0xFFFFFFFF) -lt 0 ) {\n        $auxKeyb = Get-ChildItem -Path $regBase | \n            Where-Object { \n            $_.Property -contains 'Layout Id' -and \n                (Get-ItemPropertyValue -Path \"Registry::$($_.Name)\" `\n                    -Name 'Layout Id' `\n                    -ErrorAction SilentlyContinue\n                ) -eq $LayoutHex.Substring(2,2).PadLeft(4,'0')\n        } | Select-Object -ExpandProperty PSChildName\n    } else {\n        $auxKeyb = $LayoutHex.Substring(0,4).PadLeft(8,'0')\n    }\n    $KbdLayoutName  = Get-ItemPropertyValue -Path (\n        Join-Path -Path $regBase -ChildPath $auxKeyb\n    ) -ErrorAction SilentlyContinue -Name 'Layout Text'\n    $KbdLayoutName\n    # Another option: grab localized string from 'Layout Display Name'\n    } # Function GetRealLayoutName\n\n    Function  GetKbdLayoutForPid {\n    Param (\n        [parameter(Mandatory=$True, ValueFromPipeline=$False)]\n        [int]$Id,\n        [parameter(Mandatory=$False, DontShow=$True)]\n        [string]$Parent = ''\n    ) \n    $Processes = Get-Process -Id $Id\n    $Weirds  = @('powershell_ise','explorer') # not implemented yet\n\n    $allLayouts = foreach ( $Proces in $Processes ) {\n        $LayoutsExtra = [ordered]@{}\n        $auxKLIDs = @( for ( $i=0; $i -lt $Proces.Threads.Count; $i++ ) {\n            $thread = $Proces.Threads[$i]\n            ## The return value is the input locale identifier for the thread:\n            $LayoutInt = [Win32Functions.KeyboardLayout]::GetKeyboardLayout( $thread.Id )\n            $LayoutsExtra[$LayoutInt] = $thread.Id\n            if ($Raw.IsPresent) {\n                $auxIndicator = if ($LayoutInt -notin ($CurrentInputLanguageHKL, [System.IntPtr]::Zero)) { '#' } else { '' }\n                Write-Verbose ('thread {0,6} {1,8} {2,1} {3,8} {4,8}' -f $i, \n                (('{0:x8}' -f ($LayoutInt -band 0xffffffff)) -replace '00000000'), \n                $auxIndicator,\n                ('{0:x}' -f $thread.Id), \n                $thread.Id)\n            }\n        })\n        Write-Verbose ('{0,6} ({1,6}) {2}: {3}' -f $Proces.Id, $Parent, \n            $Proces.ProcessName, (($LayoutsExtra.Keys | \n                Select-Object -Property @{ N='Handl';E={('{0:x8}' -f ($_ -band 0xffffffff))}} | \n                Select-Object -ExpandProperty Handl) -join ', '))\n        foreach ( $auxHandle in $LayoutsExtra.Keys ) {\n            $InstalledInputLanguages | Where-Object { $_.Handle -eq $auxHandle }\n        }\n        $ConHost = Get-WmiObject Win32_Process -Filter \"Name = 'conhost.exe'\"\n        $isConsoleApp = $ConHost | Where-Object { $_.ParentProcessId -eq $Proces.Id }\n        if ( $null -ne $isConsoleApp ) {\n            GetKbdLayoutForPid -Id ($isConsoleApp.ProcessId) -Parent ($Proces.Id -as [string])\n        }\n    }\n    if ( $null -eq $allLayouts ) {\n        # Write-Verbose ('{0,6} ({1,6}) {2}: {3}' -f $Proces.Id, $Parent, $Proces.ProcessName, '')\n    } else {\n        $allLayouts\n    }\n    } # GetKbdLayoutForPid\n\n    $allLayoutsRaw = GetKbdLayoutForPid -Id $Id\n    if ( $null -ne $allLayoutsRaw ) {\n        if ( ([bool]$PSBoundParameters['Raw']) ) {\n            $allLayoutsRaw\n        } else {\n            $retLayouts = $allLayoutsRaw | \n                Sort-Object -Property Handle -Unique | \n                Where-Object { $_.Handle -ne $CurrentInputLanguageHKL }\n            if ( $null -eq $retLayouts ) { $retLayouts = $CurrentInputLanguage }\n            $RealLayoutName = $retLayouts.Handle | \n                ForEach-Object { GetRealLayoutName -HKL $_ }\n            $ProcessAux = Get-Process -Id $Id\n            $retLayouts | Add-Member -MemberType NoteProperty -Name 'ProcessId' -Value \"$Id\"\n            $retLayouts | Add-Member -MemberType NoteProperty -Name 'ProcessName' -Value ($ProcessAux | Select-Object -ExpandProperty ProcessName )\n            # $retLayouts | Add-Member -MemberType NoteProperty -Name 'WindowTitle' -Value ($ProcessAux | Select-Object -ExpandProperty MainWindowTitle )\n            $retLayouts | Add-Member -MemberType NoteProperty -Name 'RealLayoutName' -Value ($RealLayoutName -join ';')\n            $retLayouts\n        }\n    }\n&lt;#\n\n.Synopsis\nGet the current Windows Keyboard Layout for a process.\n\n.Description\nGets the current Windows Keyboard Layout for a process. Identify the process\nusing -Id parameter.\n\n.Parameter Id\nA process Id, e.g.\n- Id property of System.Diagnostics.Process instance (Get-Process), or\n- ProcessId property (an instance of the Win32_Process WMI class), or \n- PID property from \"TaskList.exe /FO CSV\", \u2026\n\n.Parameter Raw\nParameter -Raw is used merely for debugging. \n\n.Example\nGet-KeyboardLayoutForPid\n\nThis example shows output for the current process (-Id $PID). \nNote that properties RealLayoutName and LayoutName could differ (the latter is wrong; a bug in [System.Windows.Forms.InputLanguage] implementation?)\n\nProcessId      : 2528\nProcessName    : powershell\nRealLayoutName : United States-International\nCulture        : cs-CZ\nHandle         : -268368891\nLayoutName     : US\n\n.Example\n. D:\\PShell\\tests\\Get-KeyboardLayoutForPid.ps1  # activate the function\n\nGet-Process -Name * | \n    ForEach-Object { Get-KeyboardLayoutForPid -Id $_.Id -Verbose }\n\nThis example shows output for each currently running process, unfortunately\neven (likely unusable) info about utility/service processes. \n\nThe output itself can be empty for most processes, but the verbose stream\nshows (hopefully worthwhile) info where current keboard layout is held.\n\nNote different placement of the current keboard layout ID:\n- console application      (cmd, powershell, ubuntu): conhost\n- combined GUI/console app (powershell_ise)         : the app itself\n- classic  GUI apps        (notepad, notepad++, \u2026)  : the app itself\n- advanced GUI apps        (iexplore)               : Id \u2258 tab\n- \"modern\" GUI apps        (MicrosoftEdge*)         : Id \u225f tab (unclear)\n- combined GUI/service app (explorer)               : indiscernible\n- etc\u2026                     (this list is incomplete).\n\nFor instance, iexplore.exe creates a separate process for each open window \nor tab, so their identifying and assigning input languages is an easy task.\n\nOn the other side, explorer.exe creates the only process, regardless of \nopen visible window(s), so they are indistinguishable by techniques used here\u2026\n\n.Example\ngps -Name explorer | % { Get-KeyboardLayoutForPid -Id $_.Id } | ft -au\n\nThis example shows where the function could fail in a language multifarious environment:\n\nProcessId ProcessName RealLayoutName Culture     Handle LayoutName \n--------- ----------- -------------- -------     ------ ---------- \n5344      explorer    Greek (220);US el-GR   -266992632 Greek (220)\n5344      explorer    Greek (220);US cs-CZ     67699717 US         \n\n- scenario: \n  open three different file explorer windows and set their input languages\n  as follows (their order does not matter):\n    - 1st window: let default input language   (e.g. Czech, in my case),\n    - 2nd window: set different input language (e.g. US English),\n    - 3rd window: set different input language (e.g. Greek).\n- output:\n  an array (and note that default input language window isn't listed).\n\n.Inputs\nNo object can be piped to the function. Use -Id pameter instead,\nnamed or positional.\n\n.Outputs\n[System.Windows.Forms.InputLanguage] extended as follows:\n                                     note the &lt;\u2026&gt; placeholder\n\nGet-KeyboardLayoutForPid | Get-Member -MemberType Properties\n\n   TypeName: System.Windows.Forms.InputLanguage\n\nName           MemberType   Definition\n----           ----------   ----------\nProcessId      NoteProperty string ProcessId=&lt;\u2026&gt;\nProcessName    NoteProperty System.String ProcessName=powershell\nRealLayoutName NoteProperty string RealLayoutName=&lt;\u2026&gt;\nCulture        Property     cultureinfo Culture {get;}\nHandle         Property     System.IntPtr Handle {get;}\nLayoutName     Property     string LayoutName {get;}\n\n.Notes\nTo add the `Get-KeyboardLayoutForPid` function to the current scope,\nrun the script using `.` dot sourcing operator, e.g. as \n. D:\\PShell\\tests\\Get-KeyboardLayoutForPid.ps1\n\nAuhor:     https://stackoverflow.com/users/3439404/josefz\nCreated:   2019-11-24\nRevisions:  \n\n.Link\n\n.Component\nP/Invoke\n\n&lt;##&gt;\n\n} # Function Get-KeyboardLayoutForPid\n\nif ( -not ('System.Windows.Forms.InputLanguage' -as [type]) ) {\n    Add-Type -AssemblyName System.Windows.Forms\n}\n\n# EOF Get-KeyboardLayoutForPid.ps1\n</code></pre>\n"}], "owner": {"reputation": 793, "user_id": 955611, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/09fc3f620331ded19e87cadfefd08fce?s=128&d=identicon&r=PG", "display_name": "rkjnsn", "link": "https://stackoverflow.com/users/955611/rkjnsn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 599, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1574723334, "creation_date": 1572469986, "last_edit_date": 1572564441, "question_id": 58633725, "link": "https://stackoverflow.com/questions/58633725/windows-detect-if-right-alt-generates-ctrlalt-altgr-in-current-layout", "title": "Windows: Detect if right alt generates Ctrl+Alt (AltGr) in current layout", "body": "<p>Some keyboard layouts in Windows (e.g., US-QWERTY), treat right Alt as a regular Alt key, while others (e.g., US International) treat it as AltGr and generate both Ctrl and Alt when it is pressed. The Microsoft Keyboard Layout Creator offers a \"Right Alt treated as Ctrl+Alt (also known as AltGr)\" options to determine the mode used by a given layout.</p>\n\n<p>Is there a way on Windows to determine programmatically which way the currently active keyboard layout treats right Alt?</p>\n\n<p>The on-screen keyboard in Windows 10 appears to differentiate the two (labeling the key either \"Alt\" or \"AltGr\" depending on the layout), but I'm not sure if it's determining that through public APIs, through deeper hooks into the OS, or just by having knowledge of the layouts that ship with Windows.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 2, "creation_date": 1572469833, "post_id": 58633666, "comment_id": 103574360, "body": "Explain to <a href=\"https://en.wikipedia.org/wiki/Rubber_duck_debugging\" rel=\"nofollow noreferrer\">your Rubber duck</a> what will happen at <code>while (p-&gt;value &lt; data)</code> if <code>head</code> is null."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1572470026, "post_id": 58633666, "comment_id": 103574431, "body": "You also need to consider the case where the <code>head</code> node itself needs to be replaced."}, {"owner": {"reputation": 52186, "user_id": 1553090, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Wj4s1.png?s=128&g=1", "display_name": "paddy", "link": "https://stackoverflow.com/users/1553090/paddy"}, "edited": false, "score": 1, "creation_date": 1572470061, "post_id": 58633666, "comment_id": 103574445, "body": "You also mixed up the meaning of <code>p</code> and <code>prev</code> after the loop.  Try choosing better identifier names.  Draw 3 boxes on a piece of paper,  write a value inside each box, and label the boxes <code>prev</code>, <code>newnode</code>, and <code>p</code>.  Then connect them with arrows.  Now look at your code and check it&#39;s doing what your drawing says it should do."}, {"owner": {"reputation": 13, "user_id": 12192117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adfe1e57e87918e9a35d53a674d6b4ae?s=128&d=identicon&r=PG&f=1", "display_name": "ronnie", "link": "https://stackoverflow.com/users/12192117/ronnie"}, "edited": false, "score": 0, "creation_date": 1572470900, "post_id": 58633666, "comment_id": 103574735, "body": "so would I do something like if(head== nullptr) p =head ?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1572471644, "post_id": 58633666, "comment_id": 103574982, "body": "More like <code>if(head== nullptr) { head = new NodeType { data, head }; return; }</code>. If there is no <code>head</code>, the new node has nowhere else but the <code>head</code> to go."}], "answers": [{"comments": [{"owner": {"reputation": 805, "user_id": 7908019, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-wBTC1gSxMPU/AAAAAAAAAAI/AAAAAAAAABY/85JVWoAxQI0/photo.jpg?sz=128", "display_name": "Gerard097", "link": "https://stackoverflow.com/users/7908019/gerard097"}, "edited": false, "score": 0, "creation_date": 1572472618, "post_id": 58633965, "comment_id": 103575294, "body": "(*p)-&gt;next will crash if *p is nullptr."}], "tags": [], "owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "is_accepted": true, "score": 1, "last_activity_date": 1572475127, "last_edit_date": 1572475127, "creation_date": 1572471318, "answer_id": 58633965, "question_id": 58633666, "link": "https://stackoverflow.com/questions/58633666/sorted-insert-function-for-linked-list/58633965#58633965", "title": "Sorted insert function for linked list", "body": "<p>A possible solution:</p>\n\n<p>What's going on is tricky, so I explain it line by line as it happens.</p>\n\n<pre><code>void sortedInsert( NodeType * &amp; head, int data )\n{\n    NodeType ** p = &amp;head; // You don't really want to find a node, you want to\n                           // find where the new node goes, so rather than\n                           // tracking nodes, track their next pointers. Once \n                           // you find it, you know exactly where to put the \n                           // new node\n\n                           // head exists to tell you where the first node is. \n                           // That makes it a glorified next pointer. We can \n                           // hide the different name by adding an extra level \n                           // of indirection. Now head and any next all look the \n                           // same and no special cases are needed to manage\n                           // insertion at the head\n\n    while (*p &amp;&amp;  // make sure there is a node. Don't want to peek into a node \n                  // that doesn't exist. This also finds the end of the list \n                  // for us\n           (*p)-&gt;value &lt; data) // the current node goes before the new node\n                               // don't want to insert here, so keep looking\n    {\n        p= &amp;(*p) -&gt; next; // advance p to point at the current node's next\n    }\n\n    // now we've found where the new node has to go - the end of the list or\n    // the insertion point before the first larger node\n    NodeType * newnode = new NodeType;\n    newnode -&gt; value = data; // set the data\n    newnode -&gt; next = *p; // point at the current node's next\n    *p = newnode ; // insert new node at insertion point found earlier \n\n    // note: the preceding four lines probably could be\n    // *p = new NodeType{data, *p};\n}\n</code></pre>\n\n<p>And once more without all the commentary and fluff</p>\n\n<pre><code>void sortedInsert( NodeType * &amp; head, int data )\n{\n    NodeType ** p = &amp;head; \n    while (*p &amp;&amp;  (*p)-&gt;value &lt; data)\n    {\n        p= &amp;(*p) -&gt; next;\n    }\n    *p = new NodeType{data, *p};\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 31, "user_id": 12276843, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/M0KdA.png?s=128&g=1", "display_name": "pastoruri", "link": "https://stackoverflow.com/users/12276843/pastoruri"}, "is_accepted": false, "score": 0, "last_activity_date": 1572472001, "creation_date": 1572472001, "answer_id": 58634097, "question_id": 58633666, "link": "https://stackoverflow.com/questions/58633666/sorted-insert-function-for-linked-list/58634097#58634097", "title": "Sorted insert function for linked list", "body": "<p>You are redefining pointers in these lines:</p>\n\n<pre><code>prev = p;\np = p -&gt; next;\n</code></pre>\n\n<p>You are defining prev as p, then you are changing p, because you are using pointers, you are also redifining prev.\nYou can avoid doing this by doing something like this</p>\n\n<pre><code>while(p-&gt;next -&gt; value &lt; data){\np = p-&gt;next;\n} //Whats this is doing is analizing the next value, so there's no need to use a prev\nbecause your p is prev.\n</code></pre>\n\n<p>Once you have reached the point where it stops, you are going to have something like this:</p>\n\n<p>eg:</p>\n\n<p>Say I have data = 12, when the process stops, my p is going to be in this position in this example array.</p>\n\n<pre><code>5 7 9 10  11 14\n---------[P]--\n</code></pre>\n\n<p>Now I must do (pseudo code)</p>\n\n<pre><code>auto aux = p.next;\n\nnode mynode(data);\n\nmynode.next = aux;\n\np.next = mynode; \n</code></pre>\n\n<p>Hope this is useful :)</p>\n"}], "owner": {"reputation": 13, "user_id": 12192117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adfe1e57e87918e9a35d53a674d6b4ae?s=128&d=identicon&r=PG&f=1", "display_name": "ronnie", "link": "https://stackoverflow.com/users/12192117/ronnie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "accepted_answer_id": 58633965, "answer_count": 2, "score": 0, "last_activity_date": 1572477005, "creation_date": 1572469633, "last_edit_date": 1572477005, "question_id": 58633666, "link": "https://stackoverflow.com/questions/58633666/sorted-insert-function-for-linked-list", "title": "Sorted insert function for linked list", "body": "<p>I need to insert a node into a sorted link list, but I'm getting errors. Can someone help with what's wrong?</p>\n\n<pre><code>struct NodeType\n{\nItemType value;\nNodeType * next;\n}\n\n\nvoid sortedInsert( NodeType * &amp; head, int data )\n{\n    NodeType * p = head;\n    NodeType * prev = NULL;\n    while (p-&gt;value &lt; data)\n    {\n        prev = p;\n        p= p -&gt; next;\n    }\n    NodeType * newnode = new NodeType;\n    newnode -&gt; value = data;\n    newnode -&gt; next = prev;\n    p -&gt; next = newnode ;\n</code></pre>\n\n<p>I changed the program below but I'm getting an <em>Thread 1: EXC_BAD_ACCESS (code=1, address=0x8)</em> error on the line <em>prev -> next = newnode</em>, how can I change that line?</p>\n\n<pre><code>void sortedInsert( NodeType * &amp; head, int data ){\n\nNodeType * p = head;\nNodeType * prev = NULL;\nwhile (p-&gt;value &lt; data)\n    {\n        prev = p;\n        p= p -&gt; next;\n    }\nNodeType * newnode = new NodeType;\n    newnode -&gt; value = data;\n    newnode -&gt; next = p;\n    prev -&gt; next = newnode;\nif(head== nullptr)\n{\n    NodeType * newnode = new NodeType;\n    newnode -&gt; value = data;\n    newnode -&gt; next = head;\n    return;\n}\n}\n</code></pre>\n"}, {"tags": ["c++", "csv", "vector"], "comments": [{"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 5, "creation_date": 1572469530, "post_id": 58633624, "comment_id": 103574270, "body": "You would have to read in the existing file, and for each line add the extra column data as needed and write the new line out to a new file, then replace the old file with the new file when done"}, {"owner": {"reputation": 13, "user_id": 12293276, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-XzBpHc_5YmY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdiaC8uvYmaH8d6-2hScj4IrKPxOg/photo.jpg?sz=128", "display_name": "Williamwyn", "link": "https://stackoverflow.com/users/12293276/williamwyn"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1572470473, "post_id": 58633624, "comment_id": 103574582, "body": "@RemyLebeau Could you please show me how to add the extra column data for each line?"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1572471470, "post_id": 58633624, "comment_id": 103574925, "body": "You are already reading the existing lines as strings, so what is stopping you from simply appending the new column data to the end of each string when writing it back out?"}, {"owner": {"reputation": 13, "user_id": 12293276, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-XzBpHc_5YmY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdiaC8uvYmaH8d6-2hScj4IrKPxOg/photo.jpg?sz=128", "display_name": "Williamwyn", "link": "https://stackoverflow.com/users/12293276/williamwyn"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1572472714, "post_id": 58633624, "comment_id": 103575324, "body": "@RemyLebeau I mean the data I want to append is presented as float and I don&#39;t know how to put it into the csv file in the form the figure above."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1572473299, "post_id": 58633624, "comment_id": 103575502, "body": "Again, what is stopping you from simply taking data you already have from the original file for any given line, appending the new column data to the end of that, and writing that to a new file? Please be more specific about what exactly you need help with. Take the first line <code>NAME, BANK ACCOUNT, SORT CODE, INVESTMENT</code>, append <code>Contribution</code> to the end of it, and save it to the new file.  Take the second line <code>A     123            XXX         1000</code>, append <code>16.67</code> to the end of it, and save it to the new file.  And so on for the rest of the remaining lines."}, {"owner": {"reputation": 13, "user_id": 12293276, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-XzBpHc_5YmY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdiaC8uvYmaH8d6-2hScj4IrKPxOg/photo.jpg?sz=128", "display_name": "Williamwyn", "link": "https://stackoverflow.com/users/12293276/williamwyn"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1572473596, "post_id": 58633624, "comment_id": 103575602, "body": "@RemyLebeau Sorry I don&#39;t know any function that can append the data to the end of the line..."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1572473827, "post_id": 58633624, "comment_id": 103575667, "body": "So, you are saying you don&#39;t know how to append values to the end of a <code>std::string</code>? Or how to write values to an <code>std::ostream</code> using <code>operator&lt;&lt;</code> before writing a line break to it?"}, {"owner": {"reputation": 13, "user_id": 12293276, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-XzBpHc_5YmY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdiaC8uvYmaH8d6-2hScj4IrKPxOg/photo.jpg?sz=128", "display_name": "Williamwyn", "link": "https://stackoverflow.com/users/12293276/williamwyn"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1572474000, "post_id": 58633624, "comment_id": 103575726, "body": "@RemyLebeau I don&#39;t know either of them. I am just a beginner in C++."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1572475221, "post_id": 58633624, "comment_id": 103576046, "body": "&lt;sigh&gt; You should have lead with that. I have posted an answer now."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 12293276, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-XzBpHc_5YmY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdiaC8uvYmaH8d6-2hScj4IrKPxOg/photo.jpg?sz=128", "display_name": "Williamwyn", "link": "https://stackoverflow.com/users/12293276/williamwyn"}, "edited": false, "score": 0, "creation_date": 1572477460, "post_id": 58634563, "comment_id": 103576630, "body": "Sorry, but it not working. Error link is threw  Error: Unable to open file C:\\Users...\\test1\\Debug\\investment.obj. Error code = 0x80070002"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 13, "user_id": 12293276, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-XzBpHc_5YmY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdiaC8uvYmaH8d6-2hScj4IrKPxOg/photo.jpg?sz=128", "display_name": "Williamwyn", "link": "https://stackoverflow.com/users/12293276/williamwyn"}, "edited": false, "score": 0, "creation_date": 1572478203, "post_id": 58634563, "comment_id": 103576808, "body": "That is not a compiler error. In any case, I found a few minor mistakes in the code and corrected them. See the <a href=\"https://ideone.com/ewVtQm\" rel=\"nofollow noreferrer\">working demo</a> I added a link to"}], "tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": false, "score": 0, "last_activity_date": 1572478148, "last_edit_date": 1572478148, "creation_date": 1572475182, "answer_id": 58634563, "question_id": 58633624, "link": "https://stackoverflow.com/questions/58633624/how-to-write-data-to-a-csv-file-as-an-extra-column/58634563#58634563", "title": "How to write data to a .csv file as an extra column", "body": "<p>Try something like this:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;vector&gt;\n#include &lt;string&gt;\n#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;sstream&gt;\n#include &lt;cmath&gt;\n#include &lt;numeric&gt;\n\nusing namespace std;\n\nstruct Investment\n{\n    string Name;\n    string BankAccount;\n    string SortCode;\n    float Investment;\n    float Contribution;\n};\n\nstring Trim(string str)\n{\n    str.erase(0, str.find_first_not_of(\" \\t\\r\\n\"));\n    str.erase(str.find_last_not_of(\" \\t\\r\\n\") + 1);\n    return str;\n}\n\nvoid Get_Data(const string &amp;filename, vector&lt;Investment&gt; &amp;data)\n{\n    ifstream fin(filename);\n    if (!fin.is_open())\n        return;\n\n    string line;\n    if (!getline(fin, line))\n        return;\n\n    while (getline(fin, line))\n    {\n        istringstream sin(line);\n        vector&lt;string&gt; fields;\n        string field;\n\n        while (getline(sin, field, ','))\n        {\n            fields.push_back(field);  \n        }\n\n        Investment inv;\n        inv.Name = Trim(fields[0]);\n        inv.BankAccount = Trim(fields[1]);\n        inv.SortCode = Trim(fields[2]);\n        inv.Investment = atof(Trim(fields[3]).c_str());\n        inv.Contribution = 0.0f;\n\n        data.push_back(inv);\n    }\n}\n\nvoid Save_Data(const string &amp;filename, const vector&lt;Investment&gt; &amp;data)\n{\n    ofstream fout(filename);\n    if (!fout.is_open())\n        return;\n\n    fout &lt;&lt; \"NAME,BANK ACCOUNT,SORT CODE,INVESTMENT,Contribution\\n\";\n\n    for (auto &amp;inv : data)\n    {\n        fout &lt;&lt; inv.Name &lt;&lt; \",\"\n            &lt;&lt; inv.BankAccount &lt;&lt; \",\"\n            &lt;&lt; inv.SortCode &lt;&lt; \",\"\n            &lt;&lt; inv.Investment &lt;&lt; \",\"\n            &lt;&lt; inv.Contribution &lt;&lt; \"\\n\";\n    }\n}\n\nint main()\n{\n    vector&lt;Investment&gt; Data_investment;\n    Get_Data(\"aaa.csv\", Data_investment);\n\n    float total = accumulate(Data_investment.begin(), Data_investment.end(), 0.0f,\n        [](float sum, const Investment &amp;inv){ return sum + inv.Investment; }\n    );\n\n    for (auto &amp;inv : Data_investment)\n    {\n        inv.Contribution = (inv.Investment * 100.0f) / total;\n    }\n\n    Save_Data(\"aaa_new.csv\", Data_investment);\n\n    return 0;\n}\n</code></pre>\n\n<p><a href=\"https://ideone.com/ewVtQm\" rel=\"nofollow noreferrer\">Live Demo</a></p>\n"}], "owner": {"reputation": 13, "user_id": 12293276, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-XzBpHc_5YmY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdiaC8uvYmaH8d6-2hScj4IrKPxOg/photo.jpg?sz=128", "display_name": "Williamwyn", "link": "https://stackoverflow.com/users/12293276/williamwyn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 64, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1572478148, "creation_date": 1572469428, "last_edit_date": 1572475198, "question_id": 58633624, "link": "https://stackoverflow.com/questions/58633624/how-to-write-data-to-a-csv-file-as-an-extra-column", "title": "How to write data to a .csv file as an extra column", "body": "<p>I have a csv file like this </p>\n\n<pre><code>NAME, BANK ACCOUNT, SORT CODE, INVESTMENT\n A     123            XXX         1000\n B     456            XXX         2000\n C     789            XXX         3000\n</code></pre>\n\n<p>I want to add an extra column that makes the file look like</p>\n\n<pre><code>NAME, BANK ACCOUNT, SORT CODE, INVESTMENT, Contribution\n A     123            XXX         1000         16.67\n B     456            XXX         2000         33.33\n C     789            XXX         3000          50\n</code></pre>\n\n<p>I have worked out a <code>float percentage</code> that contains all the elements required and now I am confused about how to add it to the data file as an extra line.</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;vector&gt;\n#include &lt;string&gt;\n#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;sstream&gt;\n#include &lt;cmath&gt;\n#include &lt;numeric&gt;\n\nusing namespace std;\n\n#define W1 0.2\n\nvector&lt;float&gt;Data_investment;\nstring Trim(string&amp; str);\n\nstring Trim(string&amp; str)\n{\n\n    str.erase(0, str.find_first_not_of(\" \\t\\r\\n\"));\n    str.erase(str.find_last_not_of(\" \\t\\r\\n\") + 1);\n    return str;\n}\n\nvoid Get_Data(const string&amp; s, vector&lt;float&gt;&amp; data)\n{\n    ifstream fin(s);\n    string line;\n    int flag = 0;\n    while (getline(fin, line))\n    {\n        if (flag)\n        {\n            istringstream sin(line);\n            vector&lt;string&gt; fields;\n            string field;\n            while (getline(sin, field, ',')) \n            {\n                fields.push_back(field);  \n            }\n            string investment = Trim(fields[3]);\n            data.push_back(atof(const_cast&lt;const char*&gt;(investment.c_str())));\n        }\n        ++flag;\n    }\n}\n\nint main()\n{\n    Get_Data(\"aaa.csv\", Data_investment);\n\n    int sum = 0;\n    for (auto i : Data_investment) {\n        sum += i;\n    }\n\n    float total = accumulate(Data_investment.begin(), Data_investment.end(), 0);\n    const unsigned int quantity = Data_investment.size();\n    for (unsigned int i = 0; i &lt; quantity; ++i)\n    {\n        float percentage = (Data_investment[i] * 100.0f) / total;\n        cout &lt;&lt; percentage &lt;&lt; \", \";\n    }\n    cout &lt;&lt; endl;\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "c++11", "visual-c++"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 2, "creation_date": 1572469287, "post_id": 58633544, "comment_id": 103574155, "body": "your code is not calcualting any minimum... anyhow, I think you are looking for <a href=\"https://en.cppreference.com/w/cpp/algorithm/min_element\" rel=\"nofollow noreferrer\"><code>std::min_element</code></a>"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 1, "creation_date": 1572469320, "post_id": 58633544, "comment_id": 103574171, "body": "Put the 3 values into an array, then then use <a href=\"https://en.cppreference.com/w/cpp/algorithm/min_element\" rel=\"nofollow noreferrer\"><code>std::min_element()</code></a> to find the minimum value in that array"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1572469343, "post_id": 58633544, "comment_id": 103574181, "body": "do you want to find the minimum in each array or do you want to find the minimum among the three arrays for each index?"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1572469387, "post_id": 58633544, "comment_id": 103574198, "body": "btw if your question is about code you better show the code, the part you posted is only remotely related to the question. See also: <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1572469536, "post_id": 58633544, "comment_id": 103574272, "body": "btw if you find yourself naming variables <code>foo1</code>, <code>foo2</code> and <code>foo3</code> it is likely that you rather want a <code>vector</code> called <code>foo</code>."}, {"owner": {"reputation": 21, "user_id": 6035790, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e79927ecc33290f03204df373c756870?s=128&d=identicon&r=PG&f=1", "display_name": "Farhan", "link": "https://stackoverflow.com/users/6035790/farhan"}, "edited": false, "score": 0, "creation_date": 1572469551, "post_id": 58633544, "comment_id": 103574275, "body": "I want to find the minimum among the three arrays for each index"}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 0, "creation_date": 1572560966, "post_id": 58633544, "comment_id": 103608583, "body": "@Farhan I added an update to my answer since I started to suspect that you are using VS2015 and that it doesn&#39;t support the version of <code>std::min</code> I used in my answer."}], "answers": [{"comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1572469823, "post_id": 58633641, "comment_id": 103574356, "body": "question wasnt quite clear, but in comments it turned out that OP wants something else"}], "tags": [], "owner": {"reputation": 331, "user_id": 9285776, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LxFNE.jpg?s=128&g=1", "display_name": "Marcelino", "link": "https://stackoverflow.com/users/9285776/marcelino"}, "is_accepted": false, "score": 0, "last_activity_date": 1572469518, "creation_date": 1572469518, "answer_id": 58633641, "question_id": 58633544, "link": "https://stackoverflow.com/questions/58633544/how-to-find-the-minimum-value-between-three-for-loop/58633641#58633641", "title": "How to find the minimum value between three (for loop)?", "body": "<p>You should use <a href=\"http://www.cplusplus.com/reference/algorithm/min_element/\" rel=\"nofollow noreferrer\">std::min_element ()</a> to find the minimum element of each array an then use <a href=\"https://es.cppreference.com/w/cpp/algorithm/min\" rel=\"nofollow noreferrer\">std::min ()</a> to find the minimum of the three values.</p>\n"}, {"tags": [], "owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "is_accepted": false, "score": 0, "last_activity_date": 1572469751, "creation_date": 1572469751, "answer_id": 58633689, "question_id": 58633544, "link": "https://stackoverflow.com/questions/58633544/how-to-find-the-minimum-value-between-three-for-loop/58633689#58633689", "title": "How to find the minimum value between three (for loop)?", "body": "<blockquote>\n  <p>I want to find the minimum among the three arrays for each index </p>\n</blockquote>\n\n<p>As Remy Lebeau suggested, put them inside an array and use <a href=\"https://en.cppreference.com/w/cpp/algorithm/min_element\" rel=\"nofollow noreferrer\"><code>std::min_element</code></a>:</p>\n\n<pre><code>for (size_t i=0;i &lt; 8; ++i){\n    std::array&lt;int,3&gt; x{ sonarRange[i], sonarRange2[i], sonarRange3[i] };\n    int min = *std::min_element(x.begin(),x.end());\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "is_accepted": false, "score": 0, "last_activity_date": 1572560785, "last_edit_date": 1572560785, "creation_date": 1572471548, "answer_id": 58634020, "question_id": 58633544, "link": "https://stackoverflow.com/questions/58633544/how-to-find-the-minimum-value-between-three-for-loop/58634020#58634020", "title": "How to find the minimum value between three (for loop)?", "body": "<p>If you have 3 plain arrays with 8 elements in each, this should be sufficient:</p>\n\n<pre><code>#include &lt;algorithm&gt;\n#include &lt;iostream&gt;\n\nusing range_type = double; // change to the type you are using\n\nint main() {\n    range_type sonarRange[8];\n    range_type sonarRange2[8];\n    range_type sonarRange3[8];\n\n    // fill sonarRanges\n\n    // find and store the minimum at each index\n    range_type result[8];\n\n    for(size_t i = 0; i &lt; 8; ++i) {\n        result[i] = std::min({sonarRange[i], sonarRange2[i], sonarRange3[i]});\n    }\n}\n</code></pre>\n\n<p>If your compiler does not accept that version of <code>std::min</code>, you can add it yourself:</p>\n\n<pre><code>&lt;initializer_list&gt;\ntemplate&lt;class T&gt;\nT my_min(std::initializer_list&lt;T&gt; ilist)\n{\n    return *std::min_element(ilist.begin(), ilist.end());\n}\n</code></pre>\n\n<p>And then use <code>my_min({sonarRange[i], sonarRange2[i], sonarRange3[i]})</code> instead of <code>std::min</code> above.</p>\n"}], "owner": {"reputation": 21, "user_id": 6035790, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e79927ecc33290f03204df373c756870?s=128&d=identicon&r=PG&f=1", "display_name": "Farhan", "link": "https://stackoverflow.com/users/6035790/farhan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 81, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1572560785, "creation_date": 1572469054, "last_edit_date": 1572474614, "question_id": 58633544, "link": "https://stackoverflow.com/questions/58633544/how-to-find-the-minimum-value-between-three-for-loop", "title": "How to find the minimum value between three (for loop)?", "body": "<p>I need to find the minimum of sonarRange[i], sonarRange2[i] and sonarRange3[i]. Each one of the three previous arrays is in an individual (for loop) as it showed the code</p>\n\n<p>I used the If statement to calculate the minimum value. It works but I wrote much code. </p>\n\n<pre><code>    for (int i = 0; i &lt; 8; i++) {\n        sonarSensor[i] = robot.getSonarReading(i);\n        sonarRange[i] = sonarSensor[i]-&gt;getRange();\n\n    }\n    for (int i = 0; i &lt; 8; i++) {\n        sonarSensor[i] = robot.getSonarReading(i);\n        sonarRange2[i] = sonarSensor[i]-&gt;getRange();\n\n    }\n\n    for (int i = 0; i &lt; 8; i++) {\n        sonarSensor[i] = robot.getSonarReading(i);\n        sonarRange3[i] = sonarSensor[i]-&gt;getRange();\n\n    }\n</code></pre>\n"}, {"tags": ["python", "c++", "shared-ptr", "swig"], "comments": [{"owner": {"reputation": 81653, "user_id": 168175, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/qxeUf.jpg?s=128&g=1", "display_name": "Flexo", "link": "https://stackoverflow.com/users/168175/flexo"}, "edited": false, "score": 0, "creation_date": 1572475464, "post_id": 58633514, "comment_id": 103576112, "body": "Did you meant to do <code>%include &quot;aiCamera.h&quot;</code> instead perhaps?"}, {"owner": {"reputation": 1304, "user_id": 1927753, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/0f9533437be5bdcf493bfbbd101747a2?s=128&d=identicon&r=PG", "display_name": "Totte Karlsson", "link": "https://stackoverflow.com/users/1927753/totte-karlsson"}, "reply_to_user": {"reputation": 81653, "user_id": 168175, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/qxeUf.jpg?s=128&g=1", "display_name": "Flexo", "link": "https://stackoverflow.com/users/168175/flexo"}, "edited": false, "score": 0, "creation_date": 1572475650, "post_id": 58633514, "comment_id": 103576161, "body": "hoops, editing the post. It is in fact &quot;%included&quot;"}, {"owner": {"reputation": 81653, "user_id": 168175, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/qxeUf.jpg?s=128&g=1", "display_name": "Flexo", "link": "https://stackoverflow.com/users/168175/flexo"}, "edited": false, "score": 1, "creation_date": 1572812325, "post_id": 58633514, "comment_id": 103667773, "body": "What&#39;s the smallest complete example that can reproduce this? I&#39;d have answered it already without a bounty if you&#39;d shown that."}, {"owner": {"reputation": 131156, "user_id": 235698, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KjvlE.png?s=128&g=1", "display_name": "Mark Tolonen", "link": "https://stackoverflow.com/users/235698/mark-tolonen"}, "edited": false, "score": 0, "creation_date": 1572887214, "post_id": 58633514, "comment_id": 103692369, "body": "What Flexo said...having an example the reproduces the problem goes a long way to getting an answer."}, {"owner": {"reputation": 1304, "user_id": 1927753, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/0f9533437be5bdcf493bfbbd101747a2?s=128&d=identicon&r=PG", "display_name": "Totte Karlsson", "link": "https://stackoverflow.com/users/1927753/totte-karlsson"}, "edited": false, "score": 0, "creation_date": 1572909330, "post_id": 58633514, "comment_id": 103700570, "body": "Had been happy to give away bounty for solution. However, while creating a short example, the problem was found. A third party library had its own shared_ptr implementation and had a using directive of it causing two shared pointer classes (with the same name(!) (shared_ptr), but different namespaces) being in the mix. Did not see any warning about it when building. Not sure how to do with this post. Perhaps writing it as an answer may help someone else?"}, {"owner": {"reputation": 1304, "user_id": 1927753, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/0f9533437be5bdcf493bfbbd101747a2?s=128&d=identicon&r=PG", "display_name": "Totte Karlsson", "link": "https://stackoverflow.com/users/1927753/totte-karlsson"}, "reply_to_user": {"reputation": 81653, "user_id": 168175, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/qxeUf.jpg?s=128&g=1", "display_name": "Flexo", "link": "https://stackoverflow.com/users/168175/flexo"}, "edited": false, "score": 0, "creation_date": 1572909758, "post_id": 58633514, "comment_id": 103700677, "body": "Thanks for the suggestion of creating a small example, @Flexo and Mark Tolonen. It helped fixing the problem!"}, {"owner": {"reputation": 9551, "user_id": 9837301, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9414V.png?s=128&g=1", "display_name": "JaMiT", "link": "https://stackoverflow.com/users/9837301/jamit"}, "edited": false, "score": 0, "creation_date": 1573360359, "post_id": 58633514, "comment_id": 103854382, "body": "@TotteKarlsson Yes, writing it as an answer instead of editing it into the question would make it more likely to help someone else."}], "answers": [{"tags": [], "owner": {"reputation": 1304, "user_id": 1927753, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/0f9533437be5bdcf493bfbbd101747a2?s=128&d=identicon&r=PG", "display_name": "Totte Karlsson", "link": "https://stackoverflow.com/users/1927753/totte-karlsson"}, "is_accepted": true, "score": 1, "last_activity_date": 1573414714, "creation_date": 1573414714, "answer_id": 58792272, "question_id": 58633514, "link": "https://stackoverflow.com/questions/58633514/wrapping-shared-pointer-object-with-swig-dont-give-access-to-class-member-funct/58792272#58792272", "title": "Wrapping shared pointer object with SWIG don&#39;t give access to class member functions", "body": "<p>The question above are dealing with a C/C++ API from Allied Vision, controlling their cameras. They have defined their own shared pointer class and named it using the same name as the std shared pointer class, i.e. shared_ptr. </p>\n\n<p>The client code for this API is using std::shared_ptr's, and at some point the usage of a shared_ptr, without specifying the namespace caused the above problems with Swig. \nBy explicitly specifying the std namespace when using a shared_ptr, the problems were resolved and the resulting swigged objects, using shared pointers, started working perfectly fine.</p>\n"}], "owner": {"reputation": 1304, "user_id": 1927753, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/0f9533437be5bdcf493bfbbd101747a2?s=128&d=identicon&r=PG", "display_name": "Totte Karlsson", "link": "https://stackoverflow.com/users/1927753/totte-karlsson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 376, "favorite_count": 0, "accepted_answer_id": 58792272, "answer_count": 1, "score": 5, "last_activity_date": 1573414764, "creation_date": 1572468914, "last_edit_date": 1573414764, "question_id": 58633514, "link": "https://stackoverflow.com/questions/58633514/wrapping-shared-pointer-object-with-swig-dont-give-access-to-class-member-funct", "title": "Wrapping shared pointer object with SWIG don&#39;t give access to class member functions", "body": "<p>I have a C++ CameraManager class that manages a list of Camera objects. \nThe camera objects are managed by a std::list, as shared pointers, i.e. each list item is of type: shared_ptr &lt; Camera > .</p>\n\n<p>I can obtain a Camera from a CameraManager object as</p>\n\n<pre><code> std::shared_ptr&lt;Camera&gt; c = cameraManager.getCamera();\n</code></pre>\n\n<p>Creating a Python module using Swig, the above is translated to python code as:</p>\n\n<pre><code>  camera = cameraManager.getCamera()\n</code></pre>\n\n<p>The camera Python object above, however, don't allow me to access any of the Camera classes functions. Python says is an object of type: 'Swig object of type 'std::shared_ptr *' at ####</p>\n\n<p>Adding the following in the Swig interface file</p>\n\n<pre><code>%include &lt;std_shared_ptr.i&gt;\n%shared_ptr(Camera)\n</code></pre>\n\n<p>before including</p>\n\n<pre><code>%include \"aiCamera.h\"\n</code></pre>\n\n<p>don't change the behavior in the resulting Python module. Any ideas what might be missing?</p>\n\n<p>Additional info: \nThe C++ code uses a typedef:</p>\n\n<pre><code>typedef CameraSP std::shared_ptr&lt;Camera&gt;;\n</code></pre>\n\n<p>The Camera class is derived from a base class, that is virtually empty.</p>\n\n<pre><code>class MVR_API MVRObject\n{\npublic:\n                                     MVRObject();\n                                     MVRObject(const MVRObject&amp; obj);\n    virtual                         ~MVRObject();\n\n};\n</code></pre>\n\n<p>The code is compiled using VS 2013 and CMake. The CMake code looks like this: </p>\n\n<pre><code>set_source_files_properties(${PyModule}.i PROPERTIES CPLUSPLUS ON)\nset_source_files_properties(${PyModule}.i PROPERTIES SWIG_FLAGS \"-threads\")\n\nSWIG_ADD_LIBRARY(${PyModule}\n    TYPE MODULE \n    LANGUAGE python \n    SOURCES ${PyModule}.i\n    )\n\n\nSWIG_LINK_LIBRARIES (${PyModule}\n    ${PYTHON_LIB_FOLDER}/Python37.lib    \n    dslFoundation\n    aimvr\n)\n\n# INSTALL PYTHON BINDINGS\n# Get the python site packages directory by invoking python\nexecute_process(COMMAND python -c \"import site; print(site.getsitepackages()[0])\" OUTPUT_VARIABLE PYTHON_SITE_PACKAGES OUTPUT_STRIP_TRAILING_WHITESPACE)\nmessage(\"PYTHON_SITE_PACKAGES = ${PYTHON_SITE_PACKAGES}\")\n\nSET(SWIG_RUNTIME ${CMAKE_CURRENT_BINARY_DIR}/mvr_swigpyrun.h)\nexecute_process(COMMAND ${SWIG_EXECUTABLE} -python -external-runtime ${SWIG_RUNTIME})\n\n</code></pre>\n\n<p>UPDATE:\nThe problem was not Swig and usage of shared pointers. It was a third party library having its own implementation of shared_ptr. Resolving the shared pointers by namespace names fixed the problem and the resulting Python module started working as expected.</p>\n"}, {"tags": ["c++", "language-lawyer", "unions", "lvalue", "object-lifetime"], "comments": [{"owner": {"reputation": 21162, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1572470073, "post_id": 58633465, "comment_id": 103574447, "body": "What is the difference between &#39;a simple union with a changed &quot;active member&quot;&#39; and &#39;a simple union&#39;? The latter is how I would describe the one in the shown code."}, {"owner": {"reputation": 1680, "user_id": 5282154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a468ae12f72b587ad0c4e89ffde11839?s=128&d=identicon&r=PG", "display_name": "doug", "link": "https://stackoverflow.com/users/5282154/doug"}, "edited": false, "score": 0, "creation_date": 1572470291, "post_id": 58633465, "comment_id": 103574516, "body": "A union object w/o an active member still has an address just like <code>int i;</code> you can take the address of i, and declare a reference to it, but using its value w/o initializing is UB."}, {"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "reply_to_user": {"reputation": 1680, "user_id": 5282154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a468ae12f72b587ad0c4e89ffde11839?s=128&d=identicon&r=PG", "display_name": "doug", "link": "https://stackoverflow.com/users/5282154/doug"}, "edited": false, "score": 0, "creation_date": 1572470554, "post_id": 58633465, "comment_id": 103574614, "body": "@doug Are you doubting that <code>int i;</code> creates an <code>int</code> object?"}, {"owner": {"reputation": 2339, "user_id": 1102805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2de42f74b5509b8af4bd0f255d05fd94?s=128&d=identicon&r=PG", "display_name": "darcamo", "link": "https://stackoverflow.com/users/1102805/darcamo"}, "edited": false, "score": 0, "creation_date": 1572471231, "post_id": 58633465, "comment_id": 103574844, "body": "Union is just a way to save memory by storing different things in the same memory <b>at different times</b>. There is nothing special about them and if you try to access a member before initializing it, then it is just like accessing any other variable without initializing it. You have undefined behavior."}, {"owner": {"reputation": 1680, "user_id": 5282154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a468ae12f72b587ad0c4e89ffde11839?s=128&d=identicon&r=PG", "display_name": "doug", "link": "https://stackoverflow.com/users/5282154/doug"}, "edited": false, "score": 0, "creation_date": 1572471427, "post_id": 58633465, "comment_id": 103574908, "body": "<code>int i;</code> has uninitialized storage but it&#39;s lifetime hasn&#39;t begun."}, {"owner": {"reputation": 820, "user_id": 12062017, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DXiJu.jpg?s=128&g=1", "display_name": "Pickle Rick", "link": "https://stackoverflow.com/users/12062017/pickle-rick"}, "edited": false, "score": 0, "creation_date": 1572471903, "post_id": 58633465, "comment_id": 103575065, "body": "The compiler will treat it however your code does. If you try to pass the integer to <code>printf</code> you will get a compiler error. <i>You can really think of a union in that sense as multiple fields in an object that just happen to share the same memory.</i> It can be useful for example having a field defining some type and a separate union field holding it by value."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 1, "creation_date": 1572474231, "post_id": 58633465, "comment_id": 103575789, "body": "More interesting scenarios arise with array objects within unions, since an expression like <code>union.arrayMember[i]=something</code> has to take the address of <code>union.arrayMember[0]</code> as a non-l value and then dereference that to form the lvalue upon which the assignment is performed, which would imply that <code>arrayMember</code> must exist before the assignment."}, {"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "reply_to_user": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1572476900, "post_id": 58633465, "comment_id": 103576491, "body": "@supercat Yes but want a clear explanation of the most simple possible case of setting an active member first. Even in the simplest case I think the std is defective."}, {"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "reply_to_user": {"reputation": 820, "user_id": 12062017, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DXiJu.jpg?s=128&g=1", "display_name": "Pickle Rick", "link": "https://stackoverflow.com/users/12062017/pickle-rick"}, "edited": false, "score": 0, "creation_date": 1572476957, "post_id": 58633465, "comment_id": 103576505, "body": "@PickleRick &quot;<i>You can really think of a union in that sense as multiple fields in an object that just happen to share the same memory</i>&quot; Think you, I know what they are for, I want to know about the semantic of that fundamental stuff is defined, in particular, <b>what an object is.</b>"}, {"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "reply_to_user": {"reputation": 21162, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1572477068, "post_id": 58633465, "comment_id": 103576538, "body": "@Yunnosch Without the ability to change the active member, there isn&#39;t much practical use for even a simple union..."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1572477152, "post_id": 58633465, "comment_id": 103576560, "body": "@curiousguy: In the abstraction used by Ritchie&#39;s Language, allocating a region of storage simultaneously creates every object of every type that will fit anywhere within it; writing to any of those objects will change the contents of the storage, and reading an object will interpret whatever is there as a value of the proper type.  In C++, for standard-layout types with trivial constructors, there&#39;s no reason the same rule couldn&#39;t apply if all accesses to storage had to be done via glvalues that were related somehow, or separated by a &quot;something is weird is happening&quot; indication."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1572477308, "post_id": 58633465, "comment_id": 103576594, "body": "@curiousguy: The real problem is that the authors of the C Standard described the situations where compilers must allow for aliasing between <i>seemingly-unrelated</i> lvalues, and never imagined that compiler writers would use that as an excuse to ignore obvious relationships between lvalues that were, at time of use, each individually freshly derived from a common base."}, {"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "reply_to_user": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1572477361, "post_id": 58633465, "comment_id": 103576610, "body": "@supercat Several ppl on SO told me that the idea of many obj (infinitely many actually, there are inf. many scalar types) &quot;existing&quot; at the same location is patently absurd and impossible; yet nobody was able to show a contradiction or impl difficulty arising from such hypothesis."}, {"owner": {"reputation": 820, "user_id": 12062017, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DXiJu.jpg?s=128&g=1", "display_name": "Pickle Rick", "link": "https://stackoverflow.com/users/12062017/pickle-rick"}, "edited": false, "score": 0, "creation_date": 1572477630, "post_id": 58633465, "comment_id": 103576673, "body": "Sorry, maybe I&#39;m misunderstanding your question. What I really mean is the behavior for a union is really the same as having that type outside of a union. Whenever you access the object as one particular type, the same rules will apply. It will reside in memory as long as it&#39;s in scope like you would expect. There&#39;s really no difference other than sharing a memory address so I&#39;m not sure how else to answer. Although there are some subtle differences such as not being automatically destructed, you can handle that in a custom destructor for that though."}, {"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "reply_to_user": {"reputation": 820, "user_id": 12062017, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DXiJu.jpg?s=128&g=1", "display_name": "Pickle Rick", "link": "https://stackoverflow.com/users/12062017/pickle-rick"}, "edited": false, "score": 0, "creation_date": 1572477859, "post_id": 58633465, "comment_id": 103576728, "body": "@PickleRick The Q is about the existence of objects. <b>Do more than one scalar obj exist at the same location?</b>"}, {"owner": {"reputation": 820, "user_id": 12062017, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DXiJu.jpg?s=128&g=1", "display_name": "Pickle Rick", "link": "https://stackoverflow.com/users/12062017/pickle-rick"}, "edited": false, "score": 0, "creation_date": 1572477959, "post_id": 58633465, "comment_id": 103576754, "body": "Ah, I&#39;m sorry, the answer to that is no. The union will only ever have one entry at a time held in memory."}, {"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "reply_to_user": {"reputation": 820, "user_id": 12062017, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DXiJu.jpg?s=128&g=1", "display_name": "Pickle Rick", "link": "https://stackoverflow.com/users/12062017/pickle-rick"}, "edited": false, "score": 0, "creation_date": 1572478033, "post_id": 58633465, "comment_id": 103576771, "body": "@PickleRick If the other obj does not exist, how can assign it a value? <b>What is the expression naming an non existing obj actually referring to?</b>"}, {"owner": {"reputation": 820, "user_id": 12062017, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DXiJu.jpg?s=128&g=1", "display_name": "Pickle Rick", "link": "https://stackoverflow.com/users/12062017/pickle-rick"}, "edited": false, "score": 0, "creation_date": 1572478216, "post_id": 58633465, "comment_id": 103576816, "body": "All of these things happen the same as they normally would. So doing <code>obj.u.val = 32;</code> is no different than <code>obj.val = 32;</code> assuming they&#39;re the same type. There&#39;s not really a defined relationship in a union, it&#39;s more like a <code>void*</code> pointer used to store different data of the same size."}, {"owner": {"reputation": 820, "user_id": 12062017, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DXiJu.jpg?s=128&g=1", "display_name": "Pickle Rick", "link": "https://stackoverflow.com/users/12062017/pickle-rick"}, "edited": false, "score": 0, "creation_date": 1572478335, "post_id": 58633465, "comment_id": 103576844, "body": "If you have a union holding an integer and a float, setting the float to 1.0 would in effect set the integer to 0x3F800000 for example."}, {"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "reply_to_user": {"reputation": 820, "user_id": 12062017, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DXiJu.jpg?s=128&g=1", "display_name": "Pickle Rick", "link": "https://stackoverflow.com/users/12062017/pickle-rick"}, "edited": false, "score": 0, "creation_date": 1572478607, "post_id": 58633465, "comment_id": 103576904, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/201626/discussion-between-curiousguy-and-pickle-rick\">continue this discussion in chat</a>."}, {"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 0, "creation_date": 1572485844, "post_id": 58633465, "comment_id": 103578402, "body": "It looks to me like the Standard ought to say only that <code>u.p = 0</code> begins the lifetime of <code>u.p</code>, not that it creates the subobject."}], "answers": [{"comments": [{"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "edited": false, "score": 0, "creation_date": 1572487515, "post_id": 58635959, "comment_id": 103578725, "body": "So is there an object there? What is the &quot;original object&quot;? And how can we know what will happen in future? <b>Time travel?</b>"}, {"owner": {"reputation": 820, "user_id": 12062017, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DXiJu.jpg?s=128&g=1", "display_name": "Pickle Rick", "link": "https://stackoverflow.com/users/12062017/pickle-rick"}, "edited": false, "score": 1, "creation_date": 1572488893, "post_id": 58635959, "comment_id": 103578997, "body": "I feel like you&#39;re mistaking an <i>object</i> for its <i>memory</i>. If you have a union field in some object and that objects lifetime starts, it will <b>NOT</b> start the lifetime of the union object fields. Storage is allocated for the union but it hasn&#39;t started its lifetime yet. If, at any point, you assign any union field then that objects lifetime will begin. If you set the same field, its previously set fields lifetime will end. If you set a different field, the previously sets field will mistakenly still be <i>alive</i>."}, {"owner": {"reputation": 820, "user_id": 12062017, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DXiJu.jpg?s=128&g=1", "display_name": "Pickle Rick", "link": "https://stackoverflow.com/users/12062017/pickle-rick"}, "edited": false, "score": 0, "creation_date": 1572489105, "post_id": 58635959, "comment_id": 103579042, "body": "Think of every field in the union as being an uninitialized object. Any time a specific field is that union is accessed it&#39;s no different than if it were outside of a union. However, accessing one field in the union will not <i>notify</i> other types in any way. Finally, when the lifetime of the union ends it will not inherently destroy all the types in the union because, of course, they all share the same memory and can only be one at a time. So in this case you override the union destructor to cleanup the appropriate field."}, {"owner": {"reputation": 820, "user_id": 12062017, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DXiJu.jpg?s=128&g=1", "display_name": "Pickle Rick", "link": "https://stackoverflow.com/users/12062017/pickle-rick"}, "edited": false, "score": 0, "creation_date": 1572489414, "post_id": 58635959, "comment_id": 103579088, "body": "The absolute simplest way to think about it is that a union is an object of its own where all fields share the same address. Setting &#39;u.ptr&#39; to something new will initialize that object, setting &#39;u.ptr&#39; to nullptr will destroy that object, but setting &#39;u.val&#39; to 0 will not destroy the &#39;u.ptr&#39; object currently held in that memory space. When ParentObj lifetime ends, it will not destroy anything in the union because it is its own type, but you can use your own destructor for that."}, {"owner": {"reputation": 2216, "user_id": 9585016, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Language Lawyer", "link": "https://stackoverflow.com/users/9585016/language-lawyer"}, "reply_to_user": {"reputation": 820, "user_id": 12062017, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DXiJu.jpg?s=128&g=1", "display_name": "Pickle Rick", "link": "https://stackoverflow.com/users/12062017/pickle-rick"}, "edited": false, "score": 0, "creation_date": 1572496946, "post_id": 58635959, "comment_id": 103580521, "body": "@PickleRick <i>If, at any point, you assign any union field then that objects lifetime will begin</i> No, a new object will be created: <i>if modification of <code>X</code> would have undefined behavior under [basic.life], an object of the type of <code>X</code> is implicitly created</i>"}, {"owner": {"reputation": 820, "user_id": 12062017, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DXiJu.jpg?s=128&g=1", "display_name": "Pickle Rick", "link": "https://stackoverflow.com/users/12062017/pickle-rick"}, "edited": false, "score": 0, "creation_date": 1572499767, "post_id": 58635959, "comment_id": 103581056, "body": "<a href=\"https://en.cppreference.com/w/cpp/language/lifetime\" rel=\"nofollow noreferrer\">Lifetime of a member of a union begins when that member is made active.</a>."}, {"owner": {"reputation": 2216, "user_id": 9585016, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Language Lawyer", "link": "https://stackoverflow.com/users/9585016/language-lawyer"}, "reply_to_user": {"reputation": 820, "user_id": 12062017, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DXiJu.jpg?s=128&g=1", "display_name": "Pickle Rick", "link": "https://stackoverflow.com/users/12062017/pickle-rick"}, "edited": false, "score": 0, "creation_date": 1572503483, "post_id": 58635959, "comment_id": 103582033, "body": "@PickleRick Are you seriously using cppreference as a counterargument to the Standard? \ud83e\udd26\u200d\u2642\ufe0f"}, {"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "edited": false, "score": 0, "creation_date": 1572514384, "post_id": 58635959, "comment_id": 103586254, "body": "The issue is that the object seems to be created after the user used its name to refer to it, so an lvalue refers to a future entity. It&#39;s pretty weird."}, {"owner": {"reputation": 2216, "user_id": 9585016, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Language Lawyer", "link": "https://stackoverflow.com/users/9585016/language-lawyer"}, "reply_to_user": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "edited": false, "score": 0, "creation_date": 1572523303, "post_id": 58635959, "comment_id": 103591124, "body": "@curiousguy <i>The issue is that the object seems to be created after the user used its name to refer to it</i> Who told you this? Maybe the object is created before the evaluation of <code>E1 = E2</code>."}, {"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "reply_to_user": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "edited": false, "score": 1, "creation_date": 1572525355, "post_id": 58635959, "comment_id": 103592253, "body": "@curiousguy There are other cases where a name can refer to storage that doesn&#39;t have a live object in it. E.g. <code>MyClass c; c.~MyClass(); new(&amp;c) MyClass;</code>."}, {"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "reply_to_user": {"reputation": 2216, "user_id": 9585016, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Language Lawyer", "link": "https://stackoverflow.com/users/9585016/language-lawyer"}, "edited": false, "score": 0, "creation_date": 1572525856, "post_id": 58635959, "comment_id": 103592528, "body": "@LanguageLawyer The standard is very explicit about the sequence of events: &quot;...the beginning of its lifetime is sequenced after the value computation of the left and right operands and before the assignment.&quot; Until right before the assignment, <code>E1</code> only manipulates storage. It&#39;s in this limbo of <b>[basic.life]</b> where the storage has already been allocated but the lifetime has not yet started."}, {"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "reply_to_user": {"reputation": 2216, "user_id": 9585016, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Language Lawyer", "link": "https://stackoverflow.com/users/9585016/language-lawyer"}, "edited": false, "score": 0, "creation_date": 1572526152, "post_id": 58635959, "comment_id": 103592690, "body": "@LanguageLawyer That said, it doesn&#39;t matter much in practice. This way of activating a union member only works with a built-in or trivial assignment, which means it only applies to simple types for which there isn&#39;t much difference between &quot;has storage&quot; and &quot;is alive&quot;. This whole discussion is mostly of academic interest."}, {"owner": {"reputation": 820, "user_id": 12062017, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DXiJu.jpg?s=128&g=1", "display_name": "Pickle Rick", "link": "https://stackoverflow.com/users/12062017/pickle-rick"}, "reply_to_user": {"reputation": 2216, "user_id": 9585016, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Language Lawyer", "link": "https://stackoverflow.com/users/9585016/language-lawyer"}, "edited": false, "score": 0, "creation_date": 1572535819, "post_id": 58635959, "comment_id": 103598353, "body": "@LanguageLawyer Sorry, bad form, I&#39;ll just quote the remainder of what you shared. &quot;If modification of X would have undefined behavior under [basic.life], an object of the type of X is implicitly created in the nominated storage; no initialization is performed <i>and the beginning of its lifetime is sequenced after the value computation of the left and right operands and before the assignment</i>. [ Note: This ends the lifetime of the previously-active member of the union, if any ([basic.life]).&quot;"}, {"owner": {"reputation": 820, "user_id": 12062017, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DXiJu.jpg?s=128&g=1", "display_name": "Pickle Rick", "link": "https://stackoverflow.com/users/12062017/pickle-rick"}, "edited": false, "score": 1, "creation_date": 1572536106, "post_id": 58635959, "comment_id": 103598487, "body": "It should be added that if the active union member has a non trivial destructor when setting the inactive member, you will need to manually ensure the active objects destructor is called."}, {"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "edited": false, "score": 0, "creation_date": 1572571899, "post_id": 58635959, "comment_id": 103610818, "body": "@IgorTandetnik A &quot;<i>discussion is mostly of academic interest</i>&quot; is the diff between sound and unsound formal semantics (or semiformal or any specification). Even if &quot;everybody knows what should happen&quot;, as is obviously the case WRT to such simple uses of a union. Note that <b>historically &quot;everybody knows&quot; was OK</b> because it was source code=&gt;abs tree=&gt;codegen, <b>now it isn&#39;t, as UB cases are exploited to transform programs.</b> Compiler writers reject bad codegen bug reports based on &quot;that was always UB&quot; <b>so we need to agree on the exact definition of things.</b> That cannot be overstated."}, {"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "edited": false, "score": 0, "creation_date": 1572574104, "post_id": 58635959, "comment_id": 103611172, "body": "@IgorTandetnik &quot;<i>where a name can refer to storage that doesn&#39;t have a live object</i>&quot; <i>YES</i> and BTW that other case is equally deeply troubling to me. I don&#39;t feel any of this is adequately described (= rigorously described)."}], "tags": [], "owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "is_accepted": false, "score": 2, "last_activity_date": 1572487019, "creation_date": 1572487019, "answer_id": 58635959, "question_id": 58633465, "link": "https://stackoverflow.com/questions/58633465/is-any-use-of-a-union-clearly-well-defined-in-any-revision-of-c/58635959#58635959", "title": "Is any use of a union clearly well defined, in any revision of C++?", "body": "<p><code>u.p</code> refers to storage allocated for an object whose lifetime has not yet started, as permitted by <a href=\"http://eel.is/c++draft/basic.life#7\" rel=\"nofollow noreferrer\"><strong>[basic.life]</strong>/7</a>: \"Before the lifetime of an object has started but after the storage which the object will occupy has been allocated... any glvalue that refers to the original object may be used but only in limited ways.\"</p>\n\n<p>Then there's the special magic by which an assignment to a union member starts the lifetime of the object:</p>\n\n<blockquote>\n  <p><a href=\"http://eel.is/c++draft/class.union#5\" rel=\"nofollow noreferrer\"><strong>[class.union]/5</strong></a> When the left operand of an assignment operator involves a member access expression ([expr.ref]) that nominates a union member, it may begin the lifetime of that union member, as described below...</p>\n  \n  <p>In an assignment expression of the form <code>E1 = E2</code> that uses either the built-in assignment operator ([expr.ass]) or a trivial assignment operator ([class.copy.assign]), for each element <code>X</code> of <code>S(E1)</code>, if modification of <code>X</code> would have undefined behavior under [basic.life], an object of the type of <code>X</code> is implicitly created in the nominated storage; no initialization is performed and the beginning of its lifetime is sequenced after the value computation of the left and right operands and before the assignment.</p>\n</blockquote>\n"}], "owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 117, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1572487019, "creation_date": 1572468666, "last_edit_date": 1572477950, "question_id": 58633465, "link": "https://stackoverflow.com/questions/58633465/is-any-use-of-a-union-clearly-well-defined-in-any-revision-of-c", "title": "Is any use of a union clearly well defined, in any revision of C++?", "body": "<p>Consider a simple union with a changed \"active member\":</p>\n\n<pre><code>union U {\n  int i;\n  char *p;\n};\n\nU u = { 1 };\nu.p = 0;\n</code></pre>\n\n<p>Is there <em>any revision</em> of the C++ standard that can properly define what happens here?</p>\n\n<p>In particular, what is <code>u.p</code> semantically? It's a lvalue at compile time, <strong>but what does its evaluation refer to at run time?</strong></p>\n\n<p>Can a pointer object exist in <code>u</code> before it's assigned to? </p>\n\n<p><strong>Can objects exist before their lifetime even begins?</strong></p>\n\n<p>Can two scalar objects (of distinct types) <strong>coexist at the same time at the same address</strong>?</p>\n"}, {"tags": ["c++", "stl", "c++14", "c++17"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1572468604, "post_id": 58633393, "comment_id": 103573860, "body": "I dont really understand. Take pointers for example, they always have been and always will be &quot;compliant&quot; iterators"}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 2, "creation_date": 1572470093, "post_id": 58633393, "comment_id": 103574455, "body": "Can you give a concrete example of a C++14 iterator that you believe will need to be changed? Are you thinking of using <a href=\"https://en.cppreference.com/w/cpp/iterator/iterator\" rel=\"nofollow noreferrer\">std::iterator</a> and worry about it being deprecated? Since you haven&#39;t written the iterators yet, just don&#39;t use <code>std::iterator</code>. C++14 doesn&#39;t need it."}], "answers": [{"tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": false, "score": 4, "last_activity_date": 1572550186, "last_edit_date": 1572550186, "creation_date": 1572474515, "answer_id": 58634472, "question_id": 58633393, "link": "https://stackoverflow.com/questions/58633393/is-it-possible-to-create-iterators-with-c14-that-are-c17-compliant/58634472#58634472", "title": "Is it possible to create iterators with C++14 that are C++17 compliant?", "body": "<p>The change I believe you where talking about was the removal of the class template <code>std::iterator</code>.</p>\n\n<p><code>std::iterator</code> was and always will be nothing but a utility helper; it was removed because it is a simple utility, and because people where assuming it was more than just a utility helper.</p>\n\n<p>Don't use <code>std::iterator</code>, just define the typedefs yourself.</p>\n\n<p>If updating a code base that already uses <code>std::iterator</code>, create your own (it is like 6 lines of code) and search/replace.</p>\n"}], "owner": {"reputation": 7769, "user_id": 271599, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/de267f213b375efca5da07890e5efc25?s=128&d=identicon&r=PG", "display_name": "dromodel", "link": "https://stackoverflow.com/users/271599/dromodel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1572550186, "creation_date": 1572468313, "question_id": 58633393, "link": "https://stackoverflow.com/questions/58633393/is-it-possible-to-create-iterators-with-c14-that-are-c17-compliant", "title": "Is it possible to create iterators with C++14 that are C++17 compliant?", "body": "<p>I'm using GCC 6.2.0, which uses C++14 by default. At some point in the future, we'd like to move to C++17. I'd like to add some C++ iterators to some of our classes but they've changed between C++14 and C++17. If I write them now, will I have to rewrite them later when we upgrade compiler versions or is there a way to write them once now and have them be forwards compatible?</p>\n"}, {"tags": ["c++", "android-ndk", "linker", "clang", "llvm"], "answers": [{"comments": [{"owner": {"reputation": 7617, "user_id": 2878070, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/42b5fba5761d7e519d05b642be0b2e14?s=128&d=identicon&r=PG&f=1", "display_name": "Sergio", "link": "https://stackoverflow.com/users/2878070/sergio"}, "edited": false, "score": 0, "creation_date": 1572476750, "post_id": 58634412, "comment_id": 103576457, "body": "Thanks for reply! I tried <code>-Wl,--no-fatal-warnings</code> - same error. I forgot to add an important detail - both prebuilt stuff and source compilation are <code>-flto</code>, so it looks like this error comes from mismatch in bitcode metadata that comes to the final link stage. If it is possible to ask lld in LTO mode to ignore this meta and use user-supplied DWARF version to generate debug sections - it would solve my problem I guess."}, {"owner": {"reputation": 8554, "user_id": 632035, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8ed69ad748c440a055502c1b213757e5?s=128&d=identicon&r=PG", "display_name": "Dan Albert", "link": "https://stackoverflow.com/users/632035/dan-albert"}, "reply_to_user": {"reputation": 7617, "user_id": 2878070, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/42b5fba5761d7e519d05b642be0b2e14?s=128&d=identicon&r=PG&f=1", "display_name": "Sergio", "link": "https://stackoverflow.com/users/2878070/sergio"}, "edited": false, "score": 0, "creation_date": 1572481808, "post_id": 58634412, "comment_id": 103577581, "body": "Check your link command (the actual invocation of lld if possible, but the clang command will probably tell you what you need as well). Check to make sure that your <code>-Wl,--no-fatal-warnings</code> not only is used, but comes <i>after</i> <code>-Wl,--fatal-warnings</code>. If it comes first then it&#39;ll be overridden. It could also be that this is just always an error with LTO. Using LTO on libraries that weren&#39;t built with the same compiler and flags is something that&#39;s always going to cause trouble."}], "tags": [], "owner": {"reputation": 8554, "user_id": 632035, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8ed69ad748c440a055502c1b213757e5?s=128&d=identicon&r=PG", "display_name": "Dan Albert", "link": "https://stackoverflow.com/users/632035/dan-albert"}, "is_accepted": false, "score": 0, "last_activity_date": 1572474066, "creation_date": 1572474066, "answer_id": 58634412, "question_id": 58633287, "link": "https://stackoverflow.com/questions/58633287/force-lld-to-link-relocatables-that-use-debug-info-in-different-dwarf-versions/58634412#58634412", "title": "Force lld to link relocatables that use debug info in different DWARF versions", "body": "<p>The NDK defaults to passing <code>-Wl,--fatal-warnings</code> to the linker because the most common type of linker warning is that something isn't defined, which means your app is broken. More warnings have been added to the linkers over the years, and some (and I believe this is the case here) are fairly innocuous.</p>\n\n<p>Unfortunately, as far as I know there's no way to control the fatal warnings on a per-warning basis like you can with <code>-Werror=warning-name</code> with the compiler. If you're okay with disabling <em>all</em> of the fatal linker warnings, you can disable that feature with <code>-Wl,--no-fatal-warnings</code> (add it to your ldflags). If you're using ndk-build you can do this on a per-module basis with <code>LOCAL_DISABLE_FATAL_LINKER_WARNINGS := true</code>.</p>\n"}], "owner": {"reputation": 7617, "user_id": 2878070, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/42b5fba5761d7e519d05b642be0b2e14?s=128&d=identicon&r=PG&f=1", "display_name": "Sergio", "link": "https://stackoverflow.com/users/2878070/sergio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 355, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1572474066, "creation_date": 1572467787, "question_id": 58633287, "link": "https://stackoverflow.com/questions/58633287/force-lld-to-link-relocatables-that-use-debug-info-in-different-dwarf-versions", "title": "Force lld to link relocatables that use debug info in different DWARF versions", "body": "<p>There is a project that has a prebuilt dependencies (a bunch of static libs), all these libraries have debug info sections generated in default toolchain format - DWARF-4. I'm trying to compile my sources with <code>-gdwarf-5</code>, but linker fails to link final loadable binary:</p>\n\n<pre><code>  ld.lld: error: linking module flags 'Dwarf Version': IDs have conflicting values ('i32 4' from foo/bar/baz.cc with 'i32 5' from ld-temp.o)\n</code></pre>\n\n<p>Is there any way to convince linker to continue even if different TU use different DWARF versions? After some googling I've found this ticket <a href=\"https://reviews.llvm.org/D52952\" rel=\"nofollow noreferrer\">https://reviews.llvm.org/D52952</a>, where the same issue was reported as warning, wich makes me think that there might be some chances to suppress it.</p>\n\n<p>P.S. All above is about LLVM toolchain from Android NDK r20 (claims to be LLVM 8), linker is lld.</p>\n\n<p>P.S.S. I have no chance to recompile dependencies, that is why I'm looking for a way to allow different DWARF versions in final binary.</p>\n"}, {"tags": ["c++", "cmake", "ubuntu-16.04", "linker-errors", "undefined-reference"], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 12299413, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32f1e6947031277d43f8d85395ad0b3a?s=128&d=identicon&r=PG&f=1", "display_name": "sh_aldeen", "link": "https://stackoverflow.com/users/12299413/sh-aldeen"}, "edited": false, "score": 0, "creation_date": 1572491177, "post_id": 58633840, "comment_id": 103579364, "body": "Thank you very much that really solved the issue.  I am facing another problem that I don&#39;t know where to put the t1.join(); where it should be some where because I am running the program infinitly.  if run once and then give me &quot;terminate called without an active exception&quot;  if you have any clue please help"}], "tags": [], "owner": {"reputation": 11727, "user_id": 3987854, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/OV64v.jpg?s=128&g=1", "display_name": "squareskittles", "link": "https://stackoverflow.com/users/3987854/squareskittles"}, "is_accepted": false, "score": 1, "last_activity_date": 1572470617, "creation_date": 1572470617, "answer_id": 58633840, "question_id": 58633195, "link": "https://stackoverflow.com/questions/58633195/c-cmake-project-recipe-for-target-main-app-failed/58633840#58633840", "title": "C++ CMake Project: Recipe for target &#39;main_app&#39; failed", "body": "<p>The important section of your <code>make</code> output is the linker error: <code>undefined reference to 'pthread_create'</code>. This indicates that the linker cannot find the definition for this pthread function. You have not <em>linked</em> the pthread libraries in your CMake, so you should try doing that to fix your error. After your CMake call to <code>add_executable()</code>, add the line:</p>\n\n<pre><code>target_link_libraries(main_app PRIVATE Threads::Threads)\n</code></pre>\n\n<p>This assumes that your call to <code>find_package(Threads REQUIRED)</code> correctly found the pthread libraries and populated the imported target <a href=\"https://cmake.org/cmake/help/latest/module/FindThreads.html\" rel=\"nofollow noreferrer\"><code>Threads::Threads</code></a>. If that doesn't work, you can also try linking directly to the <code>pthread</code> library instead with the following:</p>\n\n<pre><code>target_link_libraries(main_app PRIVATE pthread)\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 12299413, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32f1e6947031277d43f8d85395ad0b3a?s=128&d=identicon&r=PG&f=1", "display_name": "sh_aldeen", "link": "https://stackoverflow.com/users/12299413/sh-aldeen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 900, "favorite_count": 0, "closed_date": 1572475249, "answer_count": 1, "score": 2, "last_activity_date": 1572475273, "creation_date": 1572467339, "last_edit_date": 1572471700, "question_id": 58633195, "link": "https://stackoverflow.com/questions/58633195/c-cmake-project-recipe-for-target-main-app-failed", "closed_reason": "Duplicate", "title": "C++ CMake Project: Recipe for target &#39;main_app&#39; failed", "body": "<p>I am trying to build a CMake project, below is a sample code of what I am trying to do.</p>\n\n<p>I have two header files I am developing and I want to call a member function in class <strong>Processor</strong> from class <strong>Loader</strong> using the thread header. Here is the code, along with the CMake, and the error message I got after running the <code>make</code> command.</p>\n\n<p>CMakeLists.txt</p>\n\n<pre><code>cmake_minimum_required(VERSION 3.2.2)\nproject(c-plus-assignment)\n## C++11 Flags\nadd_compile_options(-std=c++11)\nadd_compile_options(-pthread)\nadd_compile_options(-Werror=return-type)                   # error on missing return type\nadd_compile_options(-Werror=format)                        # error on wrong printf formats\nadd_compile_options(-Werror=parentheses)                   # error when using ambiguous syntax\ninclude_directories(${PROJECT_SOURCE_DIR}/include)\n\nset(THREADS_PREFER_PTHREAD_FLAG ON)\nfind_package(Threads REQUIRED)\n\n\nadd_executable(main_app\n        main.cpp\n        src/Processor.cpp\n        src/Loader.cpp\n        src/Logger.cpp)\n</code></pre>\n\n<p>Loader.hpp</p>\n\n<pre><code>#pragma once\n#include &lt;string&gt;\n#include &lt;c-assignment/Processor.hpp&gt;\n\nusing namespace std;\nclass Loader\n{\nprivate:\n  Processor *Processor_obj; // creating an object out of the Processor class\n  std::thread t1;\n  Processor boo;\n\n\npublic:\n    Loader();\n    ~Loader();\n    void thr(int time);\n    string usr_input;\n    void read_usr_input(void);\n};\n</code></pre>\n\n<p>Processor.hpp</p>\n\n<pre><code>#pragma once\n#include &lt;string&gt;\n#include &lt;thread&gt;\n\nusing namespace std;\n\nclass Processor\n{\npublic:\n\n    bool status;       //status of processing true = free, false = busy\n    float wait_amount; //variable to store the random generated float\n    Processor();\n    void process(string);\n};\n</code></pre>\n\n<p>Loader.cpp</p>\n\n<pre><code>#include &lt;c-assignment/Loader.hpp&gt;\n#include &lt;c-assignment/Logger.hpp&gt;\n#include &lt;c-assignment/Processor.hpp&gt;\n#include &lt;iostream&gt;\n#include &lt;thread&gt;\n\nLoader::Loader()\n{\n  Processor_obj = new Processor(); // creating an object out of the Processor class\n}\nLoader::~Loader()\n{\n  t1.join();\n}\nvoid Loader::read_usr_input(void)\n{\n\n  std::cout &lt;&lt; \"Please enter a command\" &lt;&lt; '\\n';\n  std::cin &gt;&gt; Loader::usr_input;\n  if (Processor_obj-&gt;status == true) //check if the Processor is busy or not\n  {\n    if (Loader::usr_input == \"fc\" || Loader::usr_input == \"out\")\n    {\n      //Processor_obj-&gt;process(Loader::usr_input);\n      Loader::t1 = std::thread(&amp;Processor::process,Loader::boo,Loader::usr_input);\n    }\n    //else if (){}\n    //else if (){}\n    else\n    {\n    std::cout &lt;&lt; \"Unknown command\" &lt;&lt; '\\n';\n    }\n    std::cout &lt;&lt; '\\n' &lt;&lt; \"you entered the command\" &lt;&lt; Loader::usr_input &lt;&lt; '\\n';\n  }\n  else {std::cout &lt;&lt; \"Processor class is busy\" &lt;&lt; '\\n';}\n}\n</code></pre>\n\n<p>Processor.cpp</p>\n\n<pre><code>#include &lt;c-assignment/Processor.hpp&gt;\n#include &lt;c-assignment/Logger.hpp&gt;\n#include &lt;iostream&gt;\n#include &lt;thread&gt;\n#include &lt;chrono&gt;\n#include &lt;string&gt;\n#include &lt;random&gt;\n#include &lt;ctime&gt;\nusing namespace std;\n\nProcessor::Processor()\n{\n  Processor::status = true;\n}\nvoid Processor::process(string usr_input)\n{\n  srand(time(NULL));\n  Processor::wait_amount = ((float)rand() / RAND_MAX) * (3.00f - 1.00f) + 1.00f;\n  std::cout &lt;&lt; \"waiting time is\" &lt;&lt; (Processor::wait_amount)*1000 &lt;&lt; \"milliseconds\" &lt;&lt; '\\n';\n  Processor::status = false;\n  std::this_thread::sleep_for(std::chrono::milliseconds((int)(Processor::wait_amount)*1000));\n  Processor::status = true;\n  std::cout &lt;&lt; \"/Processed/\" &lt;&lt; '\\n';\n}\n</code></pre>\n\n<p>main.cpp</p>\n\n<pre><code>#include &lt;c-assignment/Processor.hpp&gt;\n#include &lt;c-assignment/Loader.hpp&gt;\n#include &lt;c-assignment/Logger.hpp&gt;\n\nint main()\n{\n\n    while (true) {\n        Processor a;\n        Loader b;\n        Logger c;\n        //a.process(\"rfc\");\n        b.read_usr_input();\n\n    }\n    return 0;\n}\n</code></pre>\n\n<p>And this is the output when I run <code>make</code>: </p>\n\n<pre><code>    [ 20%] Linking CXX executable main_app\nCMakeFiles/main_app.dir/src/Loader.cpp.o: In function `std::thread::thread&lt;void (Processor::*)(std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt;), Processor&amp;, std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt;&amp;&gt;(void (Processor::*&amp;&amp;)(std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt;), Processor&amp;, std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt;&amp;)':\nLoader.cpp:(.text._ZNSt6threadC2IM9ProcessorFvNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEEEJRS1_RS7_EEEOT_DpOT0_[_ZNSt6threadC5IM9ProcessorFvNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEEEJRS1_RS7_EEEOT_DpOT0_]+0xb4): undefined reference to `pthread_create'\ncollect2: error: ld returned 1 exit status\nCMakeFiles/main_app.dir/build.make:172: recipe for target 'main_app' failed\nmake[2]: *** [main_app] Error 1\nCMakeFiles/Makefile2:67: recipe for target 'CMakeFiles/main_app.dir/all' failed\nmake[1]: *** [CMakeFiles/main_app.dir/all] Error 2\nMakefile:83: recipe for target 'all' failed\nmake: *** [all] Error 2\n</code></pre>\n"}, {"tags": ["c++", "file", "polynomials"], "comments": [{"owner": {"reputation": 1038, "user_id": 9775850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdbb2fe93c368d757bc6e0cfe6eaa68a?s=128&d=identicon&r=PG&f=1", "display_name": "skeller", "link": "https://stackoverflow.com/users/9775850/skeller"}, "edited": false, "score": 1, "creation_date": 1572466979, "post_id": 58633033, "comment_id": 103573188, "body": "recommendation: read the full line and use regular expressions to parse"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1572467061, "post_id": 58633033, "comment_id": 103573224, "body": "Test the input stream to ensure that the reads succeeded. Always validate the IO before proceeding to use the results."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1572467374, "post_id": 58633033, "comment_id": 103573337, "body": "<code>p1-&gt;create(p1,c,b,e)</code> looks unusual. An object passing itself into one of its own methods should set off alarm bells because an object always knows itself. An object with a create method that is a non-<code>static</code> member should set off alarm bells because a create method called on an existing instance isn&#39;t creating anything. It might be configuring, but not creating. I think constructing a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> will help you clear out some of the noise and focus on what the problem really is."}, {"owner": {"reputation": 3667, "user_id": 3288910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2c2b8044eca80b9a707c716c530d9f5?s=128&d=identicon&r=PG", "display_name": "Jason", "link": "https://stackoverflow.com/users/3288910/jason"}, "edited": false, "score": 0, "creation_date": 1572476756, "post_id": 58633033, "comment_id": 103576458, "body": "There are a lot of errors in your code.  For example, you&#39;re writing <code>std::endl</code> to the <code>fstream</code>.  You aren&#39;t checking any of the input for errors (e.g. &quot;2X6+aX5&quot;).  You aren&#39;t storing the signs of the terms.  What happens when you read two terms with the same degree?  Maybe first try to figure out what all the possible inputs are and handle them without an error?  If you can handle two terms of the same degree in one polynomial, you should be able to handle adding two polynomials pretty easily."}], "answers": [{"tags": [], "owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "is_accepted": false, "score": 1, "last_activity_date": 1572467440, "creation_date": 1572467440, "answer_id": 58633220, "question_id": 58633033, "link": "https://stackoverflow.com/questions/58633033/reading-polynomial-from-file-in-c/58633220#58633220", "title": "Reading Polynomial From File in C++?", "body": "<p>Most important thing to do: <strong>Write a function</strong> which reads just one monomial component - the next one on the input. Then invoke it repeatedly until you get to the end of the line.</p>\n\n<p>Of course, before <em>implementing</em> the function, take the time to carefully consider what the <em>signature</em> of that function needs to be; and how a polynomial should be represented, when you don't know its degree in advance.</p>\n\n<p>Notes:</p>\n\n<ul>\n<li>You absolutely must take care to check for errors, like @user4581301 suggests - so that you don't end up in an infinite loop if the reading fails, or if you hit the end of the line in the middle of a supposed monomial etc.</li>\n<li>Using this function, you'll get the added bonus of avoiding some of the code duplication you have now in reading the two polynomials. To avoid all of it, write a second function which reads an entire single polynomial.</li>\n</ul>\n"}], "owner": {"reputation": 15, "user_id": 12088176, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mByKRFH6kW6Yv_Idah96euLl1pgkQ09z8TESzNnng=k-s128", "display_name": "Tooba", "link": "https://stackoverflow.com/users/12088176/tooba"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 612, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1572467440, "creation_date": 1572466623, "last_edit_date": 1572466978, "question_id": 58633033, "link": "https://stackoverflow.com/questions/58633033/reading-polynomial-from-file-in-c", "title": "Reading Polynomial From File in C++?", "body": "<p>I am trying to read two polynomials from a text file in my c++ program and i have written the following code, my issue is that its <em>only reading the first one</em> and the second one is coming out as all zeroes? \nAlso im thinking its probably because idk how to stop reading the first poly because apparently you cannot write:<br>\n<strong><em>while(f!='=')</em></strong><br>\n anyways heres the code: </p>\n\n<pre><code>....\nint main()\n{\n    poly *p1,*p2;\n    p1=NULL;\n    p2=NULL;\n    fstream f;                                               //error: only reading first polynomial\n    f.open(\"input1.txt\");\n//  string x1=\"4X7-2X6-1X3+4X2+3X0=0\";                  //these are the polynomials im trying to read\n//  string x2=\"2X6+3X2-2X0=0\";\n    int c,e; \n    char b;\n    int x,i=0;\n    cout&lt;&lt;\"Number of terms of poly 1: \";\n    cin&gt;&gt;x;\n    while(i&lt;x)\n    {\n        f&gt;&gt;c&gt;&gt;b&gt;&gt;e;\n        cout&lt;&lt;c&lt;&lt;b&lt;&lt;e;\n        p1=p1-&gt;create(p1,c,b,e);\n        i++;\n    }\n    p1-&gt;display(p1);\n    cout&lt;&lt;\"\\nNumber of terms of poly 2: \";\n    cin&gt;&gt;x;\n    i=0;\n    while(i&lt;x)\n    {\n        f&lt;&lt;endl;\n        f&gt;&gt;c&gt;&gt;b&gt;&gt;e;\n        cout&lt;&lt;c&lt;&lt;b&lt;&lt;e;\n        p2=p2-&gt;create(p2,c,b,e);\n        i++;\n    }\n    p1-&gt;display(p2);\n    poly *p3;\n    cout&lt;&lt;\"\\nThe addition of polynomials is:\";\n    p3=p3-&gt;polyaddition(p1,p2);\n    p3-&gt;display(p3);\n}\n</code></pre>\n\n<p>i wanted to read the polynomials without asking the number of elements on console. Any help would be appreciated. Thanks!</p>\n"}, {"tags": ["c++", "boost", "multi-index", "latency", "boost-multi-index"], "answers": [{"tags": [], "owner": {"reputation": 4756, "user_id": 213114, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wWib4.jpg?s=128&g=1", "display_name": "Joaqu&#237;n M L&#243;pez Mu&#241;oz", "link": "https://stackoverflow.com/users/213114/joaqu%c3%adn-m-l%c3%b3pez-mu%c3%b1oz"}, "is_accepted": true, "score": 0, "last_activity_date": 1572786017, "creation_date": 1572786017, "answer_id": 58680369, "question_id": 58632950, "link": "https://stackoverflow.com/questions/58632950/boostmulti-index-running-totals/58680369#58680369", "title": "Boost::Multi_Index running totals", "body": "<p>Your post does not provide an <strong><a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">MCVE</a></strong> and the code in it does have a number of errors that prevent it from compiling even after adding the extra code (headers and stuff) needed.</p>\n\n<p>So, I rewrote the thing fixing the errors I found along the way, you can find the result below. Regarding your primary question, you don't need ranked indices for this, ordered indices do suffice. What you want is the sum of <code>orderQuantity</code>s of blocks with the same <code>productID</code>, <code>desiredPrice</code> and buy/sell mark and a lower <code>priorityAtPrice</code> than a given block: you need then an index that groups blocks by (<code>productID</code>, <code>desiredPrice</code>, <code>buy</code>, <code>priorityAtPrice</code>):</p>\n\n<pre><code>boost::multi_index::ordered_non_unique&lt;\n    boost::multi_index::tag&lt;ObtainSublistByProductPriceAndBuy&gt;\n    ,boost::multi_index::composite_key&lt;\n        Block,\n        boost::multi_index::member&lt;Block, const int32_t, &amp;Block::productID&gt;\n        ,boost::multi_index::member&lt;Block, const int64_t, &amp;Block::desiredPrice&gt;\n        ,boost::multi_index::member&lt;Block, bool, &amp;Block::buy&gt;\n        ,boost::multi_index::member&lt;Block, const uint64_t, &amp;Block::priorityAtPrice&gt;\n    &gt;\n&gt;\n</code></pre>\n\n<p>and a function that retrieves the appropriate range and does the sum of quantities:</p>\n\n<pre><code>uint32_t placeInLine(const BlockDatabase&amp; bd, const Block&amp; b)\n{\n    auto&amp; index = bd.get&lt;ObtainSublistByProductPriceAndBuy&gt;();\n    auto  first = index.lower_bound(\n        std::make_tuple(b.productID, b.desiredPrice, b.buy));\n    auto  last  = index.lower_bound(\n        std::make_tuple(b.productID, b.desiredPrice, b.buy, b.priorityAtPrice));\n    return std::accumulate(\n      first, last, uint32_t(0),\n      [](uint32_t n, const Block* pb){ return n + pb-&gt;orderQuantity; });\n}\n</code></pre>\n\n<p>Complete example follows.</p>\n\n<p><strong><kbd><a href=\"http://coliru.stacked-crooked.com/a/2762aea7ae19f6f1\" rel=\"nofollow noreferrer\">Live On Coliru</a></kbd></strong></p>\n\n<pre><code>#include &lt;array&gt;\n#include &lt;boost/multi_index_container.hpp&gt;\n#include &lt;boost/multi_index/composite_key.hpp&gt;\n#include &lt;boost/multi_index/hashed_index.hpp&gt;\n#include &lt;boost/multi_index/member.hpp&gt;\n#include &lt;boost/multi_index/ordered_index.hpp&gt;\n#include &lt;boost/multi_index/random_access_index.hpp&gt;\n#include &lt;iostream&gt;\n#include &lt;numeric&gt;\n\nstruct Block{\n\n    const int32_t productID;\n    mutable uint32_t orderQuantity;\n    const int64_t desiredPrice;\n    mutable uint64_t priorityAtPrice;\n    const uint64_t blockID;\n    bool buy;\n\n    bool operator&lt;(const Block&amp; lilBlock)const{return blockID&lt;lilBlock.blockID;}\n};\n\nstruct ObtainElementByBlockID {};\nstruct RandomAccess {};\nstruct ObtainSublistByProductAndPrice {};\nstruct ObtainSublistByProductPriceAndBuy {};\n\ntypedef boost::multi_index_container&lt;\nBlock*,\nboost::multi_index::indexed_by&lt;\n    boost::multi_index::hashed_unique&lt;\n        boost::multi_index::tag&lt;ObtainElementByBlockID&gt;\n        ,boost::multi_index::member&lt;Block,const uint64_t,&amp;Block::blockID&gt;\n    &gt;\n    ,boost::multi_index::random_access&lt;\n        boost::multi_index::tag&lt;RandomAccess&gt;\n    &gt;   \n    ,boost::multi_index::ordered_non_unique&lt;\n        boost::multi_index::tag&lt;ObtainSublistByProductAndPrice&gt;\n        ,boost::multi_index::composite_key&lt;\n            Block,\n            boost::multi_index::member&lt;Block, const int32_t, &amp;Block::productID&gt;\n            ,boost::multi_index::member&lt;Block, const int64_t, &amp;Block::desiredPrice&gt;\n            ,boost::multi_index::member&lt;Block, const uint64_t, &amp;Block::priorityAtPrice&gt;\n        &gt;\n    &gt;\n    ,boost::multi_index::ordered_non_unique&lt;\n        boost::multi_index::tag&lt;ObtainSublistByProductPriceAndBuy&gt;\n        ,boost::multi_index::composite_key&lt;\n            Block,\n            boost::multi_index::member&lt;Block, const int32_t, &amp;Block::productID&gt;\n            ,boost::multi_index::member&lt;Block, const int64_t, &amp;Block::desiredPrice&gt;\n            ,boost::multi_index::member&lt;Block, bool, &amp;Block::buy&gt;\n            ,boost::multi_index::member&lt;Block, const uint64_t, &amp;Block::priorityAtPrice&gt;\n        &gt;\n    &gt;\n&gt;\n&gt; BlockDatabase;\n\nuint32_t placeInLine(const BlockDatabase&amp; bd, const Block&amp; b)\n{\n    auto&amp; index = bd.get&lt;ObtainSublistByProductPriceAndBuy&gt;();\n    auto  first = index.lower_bound(\n        std::make_tuple(b.productID, b.desiredPrice, b.buy));\n    auto  last  = index.lower_bound(\n        std::make_tuple(b.productID, b.desiredPrice, b.buy, b.priorityAtPrice));\n    return std::accumulate(\n      first, last, uint32_t(0),\n      [](uint32_t n, const Block* pb){ return n + pb-&gt;orderQuantity; });\n}\n\nint main()\n{\n    const int32_t chairsID = 0;\n\n    auto blocks = std::array{\n      Block{chairsID,  5, 5,   2, 753, true},\n      Block{chairsID, 12, 5,   6,  54, true},\n      Block{chairsID,  3, 5, 896, 712, true}\n    };\n\n    BlockDatabase bd;\n    for(auto&amp; b: blocks) bd.insert(&amp;b);\n\n    // retrieve block with blockID 712\n    auto it = bd.find(712);\n\n    // output sum of quantities for blocks with same productID, desiredPrice\n    // and buy tag and lower priorityAtPrice\n    std::cout &lt;&lt; placeInLine(bd, **it) &lt;&lt; \"\\n\";\n}\n</code></pre>\n\n<p><strong>Output</strong></p>\n\n<pre><code>17\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 12298112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbf76d30ebc6fcbbb86c0c5ff4b7bbbd?s=128&d=identicon&r=PG&f=1", "display_name": "SimplicityExpounded", "link": "https://stackoverflow.com/users/12298112/simplicityexpounded"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "accepted_answer_id": 58680369, "answer_count": 1, "score": 0, "last_activity_date": 1572786017, "creation_date": 1572466285, "last_edit_date": 1572476306, "question_id": 58632950, "link": "https://stackoverflow.com/questions/58632950/boostmulti-index-running-totals", "title": "Boost::Multi_Index running totals", "body": "<p>Firstly, sorry about the poor formatting, I am new and know I did not make it pretty.</p>\n\n<p>I am implementing a system to keep track of orders which I am storing as blocks, and I haven't gained the experience with templates to fully understand the reference docs. (Which I've read through as best I can, and gained a lot of respect for Joaquin. There just doesn't seem to be examples with ranked, composite keys)</p>\n\n<pre><code>struct Block{//Variable types apart from the bool are immutable, values may be modified though\n/*  \nThis is to replace the previous lookup structure consisting of a map of buys and sells, to a map of products, to a map of prices, to a map of priorities, pointing to a struct holding the blockID and quantity\n\nFor a modify, if they are changing products or prices, it will create a new order, else they can shrink quantity desired without changing the priorityAtPrice\nIf they want to increase the quantity they lose their priority, but the order will keep the other values\n*/\n    const int32_t productID; //One of ~20 different products \n    mutable uint32_t orderQuantity;//Number of products wanted at that price\n    const int64_t desiredPrice; //Prices are not unique\n    mutable uint64_t priorityAtPrice;//It's a global priority, in case someone alters their order\n    const uint64_t blockID;//Unique to every block\n    bool buy;//Tag to note if they are a looking to sell or buy\n\n    bool operator&lt;(const Block&amp; lilBlock)const{return blockID&lt;lilBlock.blockID&gt;}\n\n};\nstruct idHash{\n    uint64_t operator()(const Block&amp; lilBlock)const{\n        return lilBlock.blockID;\n    }\n}\nstruct ObtainElementByBlockID {};\nstruct ObtainSublistByProductAndPrice {};\nstruct PlaceInLine {};\nstruct randomAccess {};\n\ntypedef boost::multi_index_container&lt;\nBlock*,//Data type being stored, in this case, it is a pointer to Block.\n//I'd like to store the block objects in an array[size uint64_t] indexed by the BlockIDs, since they are unique and will be accessed often, so keeping as much in cache is desirable\nboost::multi_index::indexed_by&lt;\n    boost::multi_index::hashed_unique&lt;//Ideally should be fed an ID and retrieve the orderBlock in O(1) time\n    //It is never needed to compare IDs beyond checking if that is the ID being queried for\n        boost::multi_index::tag&lt;ObtainElementByBlockID&gt;\n        ,boost::multi_index::member&lt;Block,uint64_t, blockID&gt;\n        ,idHash\n    &gt;\n    ,boost::multi_index::random_access&lt;\n        boost::multi_index::tag&lt;randomAccess&gt;\n        ,boost::multi_index::member&lt;Block,uint64_t,blockID&gt;\n    &gt;   \n    ,boost::multi_index::ordered_non_unique&lt;//Should return a sublist at a product/price pair ordered by priorityAtPrice\n        boost::multi_index::tag&lt;ObtainSublistByProductAndPrice&gt;\n        ,boost::multi_index::composite_key&lt;\n            Block,\n            boost::multi_index::member&lt;Block, int32_t, &amp;Block::productID&gt;\n            ,boost::multi_index::member&lt;Block, int64_t, &amp;Block::desiredPrice&gt;\n            ,boost::multi_index::member&lt;Block, uint64_t, &amp;Block::priorityAtPrice&gt;\n        &gt;\n        ,boost::multi_index::composite_key_compare&lt;\n            std::equal&lt;int32_t&gt;\n            ,std::equal&lt;uint64_t&gt;\n            ,std::less&lt;uint64_t&gt;\n        &gt;\n    &gt;\n    /*\n    I think what I want has to do with rank\n    At product/price/buy, the value returned should be the sum of the quantities with a lower priority. \n\n    Say at   [chairs, 5$, buy=true]   there are orders(priority,quantity)\n    such that {(2,5),(6,12),(896, 3)}\n    with block IDs {753, 54, 712}\n    Querying for the place in line of a block, given the blockID 712\n    It should return 17, since there are orders ahead of block 712 with quantities 5+12=17\n    (It might actually need to return 18, but that's trivial)\n    */\n    ,boost::multi_index::ranked_non_unique&lt;\n        boost::multi_index::tag&lt;PlaceInLine&gt;\n        ,boost::multi_index::composite_key&lt;\n            Block,\n            boost::multi_index::member&lt;Block, int32_t, &amp;Block::productID&gt;\n            ,boost::multi_index::member&lt;Block, int64_t, &amp;Block::desiredPrice&gt;\n            ,boost::multi_index::member&lt;Block,priorityAtPrice&gt;\n        &gt;\n        ,boost::multi_index::composite_key_compare&lt;\n            std::equal&lt;int32_t&gt;\n            ,std::equal&lt;uint64_t&gt;\n            ,std::less&lt;uint64_t&gt;\n        &gt;\n    &gt;\n\n&gt; BlockDatabase;\n</code></pre>\n\n<p>I need help making sure my multi_index is correctly formatted.</p>\n\n<p>P.S. - Any help on being able to quickly pull the quantity sums  of buys or sells from a given product/price would be appreciated.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user10957435"}, "edited": false, "score": 0, "creation_date": 1572466591, "post_id": 58632917, "comment_id": 103573048, "body": "Note that a <code>S *</code> should work, though I can&#39;t properly articulate why."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1572466672, "post_id": 58632917, "comment_id": 103573078, "body": "Since the <code>S</code> definition is incomplete by the time you reference it, you can&#39;t do this. I&#39;m at a loss as to why you&#39;d want to here. Can&#39;t <code>N</code> be independent? If it&#39;s for namespacing purposes, put <code>N</code> and <code>S</code> on the same level and ideally declare <code>S</code> first."}, {"owner": {"user_type": "does_not_exist", "display_name": "user10957435"}, "edited": false, "score": 0, "creation_date": 1572466844, "post_id": 58632917, "comment_id": 103573148, "body": "&quot;If it works with a template it should work with a normal class. Shouldn&#39;t it?&quot; Uh, it depends. As noted below, classes and templates aren&#39;t the same. There are some differences in how they work.."}], "answers": [{"comments": [{"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 2, "creation_date": 1572466901, "post_id": 58633024, "comment_id": 103573165, "body": "Perhaps something like this is worth mentioning? <a href=\"https://godbolt.org/z/FL4o81\" rel=\"nofollow noreferrer\">godbolt.org/z/FL4o81</a>"}, {"owner": {"reputation": 768, "user_id": 6530474, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qeyoz.png?s=128&g=1", "display_name": "Hrisip", "link": "https://stackoverflow.com/users/6530474/hrisip"}, "edited": false, "score": 0, "creation_date": 1572467029, "post_id": 58633024, "comment_id": 103573211, "body": "now as I think about that, it makes sense. And any inline method would be inlined when the size is already known"}], "tags": [], "owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": true, "score": 4, "last_activity_date": 1572466596, "creation_date": 1572466596, "answer_id": 58633024, "question_id": 58632917, "link": "https://stackoverflow.com/questions/58632917/different-rules-for-class-and-template-class/58633024#58633024", "title": "Different rules for class and template class?", "body": "<p>To create an object of a class the compiler needs to know the size of the class. If the class isn't fully defined yet (which it isn't until the closing <code>}</code>) then the size is unknown, the compiler can't know if there's more members or not, and can thus not be able to create instance of the class.</p>\n\n<p>A template isn't a class in itself, it's kind of like a blueprint for a class that will be defined sometime in the future. That's why templates can be nested, because it's only a <em>template</em> not an actual class. The class is known when the template is instantiated, which is it when you do e.g. <code>S&lt;&gt;</code>, and by then the compiler can use the template to create the actual class.</p>\n\n<hr>\n\n<p>As noted pointers to classes works, because the size of a pointer is known.</p>\n"}], "owner": {"reputation": 768, "user_id": 6530474, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qeyoz.png?s=128&g=1", "display_name": "Hrisip", "link": "https://stackoverflow.com/users/6530474/hrisip"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "accepted_answer_id": 58633024, "answer_count": 1, "score": 0, "last_activity_date": 1572466596, "creation_date": 1572466082, "question_id": 58632917, "link": "https://stackoverflow.com/questions/58632917/different-rules-for-class-and-template-class", "title": "Different rules for class and template class?", "body": "<p>doesn't work with a normal class. The infamous </p>\n\n<blockquote>\n  <p>error: field 's' has incomplete type 'S'</p>\n</blockquote>\n\n<pre><code>struct S\n{\n    struct N\n    {\n        S s;\n    };\n};\n\nint main()\n{\n    S s;\n}\n</code></pre>\n\n<p>Though why not? Doesn't make much sense. Why then the methods of <code>S</code> have a complete type. And methods of <code>N</code> have a complete type</p>\n\n<pre><code>struct S\n{\n    struct N\n    {\n        N(){ S s; }\n    };\n};\n\nint main()\n{\n    S s;\n}\n</code></pre>\n\n<p>and so the moment where it should work but doesn't, works with template classes</p>\n\n<pre><code>template&lt;class=void&gt;\nstruct S\n{\n    struct N\n    {\n        S s;\n    };\n};\n\nint main()\n{\n    S&lt;&gt; s;\n}\n</code></pre>\n\n<p>If it works with a template it should work with a normal class. Shouldn't it?</p>\n"}, {"tags": ["c++", "json", "parsing"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user10957435"}, "edited": false, "score": 3, "creation_date": 1572466071, "post_id": 58632884, "comment_id": 103572845, "body": "If both are invalid, does it make a difference?"}, {"owner": {"reputation": 133051, "user_id": 501250, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c39ae7fe43cf30bc0f4d4051defcbd87?s=128&d=identicon&r=PG", "display_name": "cdhowie", "link": "https://stackoverflow.com/users/501250/cdhowie"}, "edited": false, "score": 0, "creation_date": 1572467406, "post_id": 58632884, "comment_id": 103573347, "body": "<i>&quot;while tokenizing strings, should it be the lexer responsibility to check if the string is valid (for instance if a backslash is only followed by the allowable escape characters)&quot;</i> -- Yes. The lexer is concerned with what the input <i>says</i> and the parser is concerned with what the input <i>means.</i> String escape sequences, IMO, fall into the former category."}], "answers": [{"comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1572474085, "post_id": 58632960, "comment_id": 103575751, "body": "<i>&quot;Invalid is invalid&quot;</i>. In fact, it might be more complicated with how error handling is done/wanted. if we stop at first error or try to report &quot;all&quot; (relevant) errors... In later case, having &quot;invalid token <code>0.x123</code>&quot; seems better than &quot;invalid token <code>0.x</code>&quot; and &quot;cannot have 2 numbers in sequence <code>0.x</code>(Error) and <code>123</code>&quot;."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1572474901, "post_id": 58632960, "comment_id": 103575961, "body": "@Jarod42 Usually errors are reported like &quot;invalid token at position X (0.x123...)&quot; where the user can figure out the details. It&#39;s really not possible to guess what happened in most cases, especially if the number is pure garbage like this. MySQL does a fantastic job of pinpointing errors in this specific way."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 1, "creation_date": 1572475574, "post_id": 58632960, "comment_id": 103576137, "body": "I just meant that is not always clear if it is a lexer error (invalid token <code>0.x123</code>) parser error (<code>0.</code> <code>x123</code>) and that lexing strategy might have influence on result."}, {"owner": {"reputation": 85, "user_id": 8322006, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e844b3bd88065c3e44f83d1abd8b7c1?s=128&d=identicon&r=PG&f=1", "display_name": "Moaning Neighbors", "link": "https://stackoverflow.com/users/8322006/moaning-neighbors"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 1, "creation_date": 1572544997, "post_id": 58632960, "comment_id": 103602707, "body": "I will mark this answer as accepted because of @Jarod42 comments. I should have mentioned that I am trying to parse the file in its entirety and report all errors found. I tend to agree with Jarod42 in that it seems better to report it as a single invalid number, although I can&#39;t explain why that is."}], "tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": true, "score": 4, "last_activity_date": 1572466331, "creation_date": 1572466331, "answer_id": 58632960, "question_id": 58632884, "link": "https://stackoverflow.com/questions/58632884/should-json-lexer-be-greedy/58632960#58632960", "title": "Should JSON lexer be greedy?", "body": "<p>Invalid is invalid. If you can't parse it, bail at the earliest opportunity and raise an error.</p>\n\n<p>There's no need to be greedy here because you'll just waste time processing data that has zero impact on the situation.</p>\n"}], "owner": {"reputation": 85, "user_id": 8322006, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e844b3bd88065c3e44f83d1abd8b7c1?s=128&d=identicon&r=PG&f=1", "display_name": "Moaning Neighbors", "link": "https://stackoverflow.com/users/8322006/moaning-neighbors"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 146, "favorite_count": 0, "accepted_answer_id": 58632960, "answer_count": 1, "score": 1, "last_activity_date": 1572466331, "creation_date": 1572465944, "question_id": 58632884, "link": "https://stackoverflow.com/questions/58632884/should-json-lexer-be-greedy", "title": "Should JSON lexer be greedy?", "body": "<p>I am building a toy JSON parser in C++, just for the learning experience.<br>\nWhile building the lexer, I came across a dilemma: should the lexer be greedy? If so, where is this defined? I could not find any directive in either <a href=\"https://www.json.org/\" rel=\"nofollow noreferrer\">JSON</a> or <a href=\"http://www.ecma-international.org/publications/files/ECMA-ST/ECMA-404.pdf\" rel=\"nofollow noreferrer\">ECMA-404</a>.  </p>\n\n<p>In particular, while trying to tokenize the following (invalid number):<br>\n0.x123</p>\n\n<p>Should my lexer try to parse it as the invalid number \"0.x123\" (greedy behavior) or the invalid number \"0.x\" followed by by the valid number \"123\" (but ultimately parsing it as an invalid sequence of tokens)?  </p>\n\n<p>Also, while tokenizing strings, should it be the lexer responsibility to check if the string is valid (for instance if a backslash is only followed by the allowable escape characters) or should I check this constraint in a different semantic analysis step? I guess this is more of an architectural preference, but I am curious about your opinions.</p>\n"}, {"tags": ["c++", "callstack"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1572465712, "post_id": 58632775, "comment_id": 103572711, "body": "C dupe: <a href=\"https://stackoverflow.com/questions/1677415/does-stack-grow-upward-or-downward\" title=\"does stack grow upward or downward\">stackoverflow.com/questions/1677415/&hellip;</a> trying to find the C++ version"}, {"owner": {"reputation": 6607, "user_id": 6717178, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/QbOLx.jpg?s=128&g=1", "display_name": "JHBonarius", "link": "https://stackoverflow.com/users/6717178/jhbonarius"}, "edited": false, "score": 0, "creation_date": 1572465773, "post_id": 58632775, "comment_id": 103572735, "body": "No, not all. Static variables can be created out of order for instance. What you are doing is  UB: you have no guarantees at all... anything can happen."}, {"owner": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 3, "creation_date": 1572465790, "post_id": 58632775, "comment_id": 103572738, "body": "I believe this is an implementation detail, and not mandated by the standard.  Using (or abusing) the implementation detail is not supported by C++, and is squarely in the realm of undefined behavior.  And that&#39;s where bad things happen."}, {"owner": {"user_type": "does_not_exist", "display_name": "user10957435"}, "edited": false, "score": 0, "creation_date": 1572465915, "post_id": 58632775, "comment_id": 103572775, "body": "That could happen, but AFAIK, it&#39;s not guaranteed."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1572465919, "post_id": 58632775, "comment_id": 103572777, "body": "<a href=\"https://en.cppreference.com/w/cpp/language/ub\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/language/ub</a> - Your program contains Undefined Behaviour and thus has <i>no meaning</i>. <i>Anything</i> can happen (and is a valid interpretation)."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1572465921, "post_id": 58632775, "comment_id": 103572778, "body": "This more or less covers it: <a href=\"https://stackoverflow.com/questions/230584/where-are-variables-in-c-stored\" title=\"where are variables in c stored\">stackoverflow.com/questions/230584/&hellip;</a>"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1572466362, "post_id": 58632775, "comment_id": 103572955, "body": "Just don&#39;t write code like that.."}], "answers": [{"tags": [], "owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "is_accepted": true, "score": 0, "last_activity_date": 1572466524, "creation_date": 1572466524, "answer_id": 58633012, "question_id": 58632775, "link": "https://stackoverflow.com/questions/58632775/are-all-variables-stored-contiguously-based-on-the-order-in-which-they-are-decla/58633012#58633012", "title": "are all variables stored contiguously based on the order in which they are declared in the program?", "body": "<blockquote>\n  <p>this made me wonder if all variables are stored contiguously in the order in which they are declared</p>\n</blockquote>\n\n<p>No, the only thing that C++ guarantees in this case, that when your read value by using variable name you will get it. The order they stored in memory or even if they would be stored in memory at all is not guaranteed and the worst thing for you by doing this - accessing out of bounds is actually invalidates your whole program and from the language point of view you cannot expect anything anymore from your program.</p>\n"}, {"tags": [], "owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "is_accepted": false, "score": 2, "last_activity_date": 1572466751, "last_edit_date": 1592644375, "creation_date": 1572466751, "answer_id": 58633063, "question_id": 58632775, "link": "https://stackoverflow.com/questions/58632775/are-all-variables-stored-contiguously-based-on-the-order-in-which-they-are-decla/58633063#58633063", "title": "are all variables stored contiguously based on the order in which they are declared in the program?", "body": "<p>From the standard (<a href=\"https://timsong-cpp.github.io/cppwp/expr.rel#4\" rel=\"nofollow noreferrer\">7.6.9.4</a>) :</p>\n<blockquote>\n<p>The result of comparing unequal pointers to objects is defined in terms of a partial order consistent with the following rules:</p>\n<ul>\n<li><p>If two pointers point to different elements of the same array, or to subobjects thereof, the pointer to the element with the higher subscript is required to compare greater.</p>\n</li>\n<li><p>If two pointers point to different non-static data members of the same object, or to subobjects of such members, recursively, the pointer to the later declared member is required to compare greater provided the two members have the same access control ([class.access]), neither member is a subobject of zero size, and their class is not a union.</p>\n</li>\n<li><p><strong>Otherwise, neither pointer is required to compare greater than the other.</strong></p>\n</li>\n</ul>\n</blockquote>\n<p>Since the first two clause don't apply for comparing the address of <code>x</code> with the address of <code>vowels</code> or it's elements, their address are not meaningfully comparable.</p>\n<p>But in this scenario specifically the pointer <code>vowels + 5</code> (the address that <code>vowels[5]</code> tries to dereference) has a special meaning. Any pointer to the hypothetical element at index <code>n</code> of an array with <code>n</code> elements is known as a &quot;one past the end pointer&quot;. It represents the first byte after the end of the array. It's permitted to calculate this address but not dereference it. The standard has a note that explicitly indicates that you can't use <code>vowels[5]</code> at all (<a href=\"https://timsong-cpp.github.io/cppwp/basic.compound#3\" rel=\"nofollow noreferrer\">6.8.2.3</a>) :</p>\n<blockquote>\n<p>[...] A pointer past the end of an object ([expr.add]) is not considered to point to an unrelated object of the object's type that might be located at that address. [...]</p>\n</blockquote>\n<p>So even if <code>x</code> is exactly at <code>vowels + 5</code> you still aren't allowed to access it via <code>vowels[5]</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 3667, "user_id": 3288910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2c2b8044eca80b9a707c716c530d9f5?s=128&d=identicon&r=PG", "display_name": "Jason", "link": "https://stackoverflow.com/users/3288910/jason"}, "is_accepted": false, "score": 0, "last_activity_date": 1572469894, "creation_date": 1572469894, "answer_id": 58633710, "question_id": 58632775, "link": "https://stackoverflow.com/questions/58632775/are-all-variables-stored-contiguously-based-on-the-order-in-which-they-are-decla/58633710#58633710", "title": "are all variables stored contiguously based on the order in which they are declared in the program?", "body": "<blockquote>\n  <p>this made me wonder if all variables are stored contiguously in the\n  order in which they are declared.</p>\n</blockquote>\n\n<p>No, or at least the language doesn't specify it (see Fran\u00e7ois Andrieux's <a href=\"https://stackoverflow.com/a/58633063/3288910\">answer</a>).  The layout of variables in memory (specifically non-member variables on the stack) is up to the discretion of the compiler.  Since the compiler has to handle architecture requirements like alignment it can re-arrange variables and leave gaps between them.  This can be important for optimization.</p>\n\n<p>Here's an example (x86-64) where the compiler (clang-9) does not layout variables in declaration order...</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;iostream&gt;\n\nint main() {\n\n  char a[] {'a', 'b'};\n  int x;\n\n  std::cout &lt;&lt; \"&amp;a[0] = \" &lt;&lt; (void*) &amp;a[0] &lt;&lt; std::endl;\n  std::cout &lt;&lt; \"&amp;a[1] = \" &lt;&lt; (void*) &amp;a[1] &lt;&lt; std::endl;\n  std::cout &lt;&lt; \"&amp;x = \" &lt;&lt; &amp;x &lt;&lt; std::endl;\n\n  return 0;\n}\n</code></pre>\n\n<pre><code>&amp;a[0] = 0x7ffd5becf02a\n&amp;a[1] = 0x7ffd5becf02b\n&amp;x = 0x7ffd5becf024\n</code></pre>\n"}], "owner": {"reputation": 29, "user_id": 8580481, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SahbD.jpg?s=128&g=1", "display_name": "LoserIRL", "link": "https://stackoverflow.com/users/8580481/loserirl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 122, "favorite_count": 0, "accepted_answer_id": 58633012, "answer_count": 3, "score": 2, "last_activity_date": 1572470107, "creation_date": 1572465438, "last_edit_date": 1572470107, "question_id": 58632775, "link": "https://stackoverflow.com/questions/58632775/are-all-variables-stored-contiguously-based-on-the-order-in-which-they-are-decla", "title": "are all variables stored contiguously based on the order in which they are declared in the program?", "body": "<p>I was learning about arrays and how when you try to write to an out of bounds it can be detrimental to your program. Upon discovering this, I tried to read out of bounds. </p>\n\n<p>I played around with a char array and a char variable. </p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>   //this occurs within int main()\n\n   char vowels[]{'a', 'e', 'i', 'o', 'u'};\n   char x = 'x';\n\n   std::cout &lt;&lt; vowels[5]; //this outputs x\n</code></pre>\n\n<p>this made me wonder if all variables are stored contiguously in the order in which they are declared.</p>\n"}, {"tags": ["c++", "windows", "security", "winapi", "dacl"], "comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1572465063, "post_id": 58632655, "comment_id": 103572441, "body": "What are you actually trying to <i>achieve</i>?"}, {"owner": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "edited": false, "score": 0, "creation_date": 1572465175, "post_id": 58632655, "comment_id": 103572487, "body": "Deny ACEs need to be added to the head of the ACL, otherwise a prior Allow ACE will match. <a href=\"https://docs.microsoft.com/en-us/windows/win32/secauthz/order-of-aces-in-a-dacl\" rel=\"nofollow noreferrer\">docs.microsoft.com/en-us/windows/win32/secauthz/&hellip;</a>"}, {"owner": {"reputation": 11, "user_id": 12275550, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ybyZW.jpg?s=128&g=1", "display_name": "Ilya Petrov", "link": "https://stackoverflow.com/users/12275550/ilya-petrov"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1572465769, "post_id": 58632655, "comment_id": 103572732, "body": "@JesperJuhl we have process, i need to write program which will get Security Descriptor of process and modify it so that no one can close the process without debug priveleges."}, {"owner": {"reputation": 11, "user_id": 12275550, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ybyZW.jpg?s=128&g=1", "display_name": "Ilya Petrov", "link": "https://stackoverflow.com/users/12275550/ilya-petrov"}, "reply_to_user": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "edited": false, "score": 0, "creation_date": 1572466000, "post_id": 58632655, "comment_id": 103572812, "body": "@JonathanPotter yep, maybe! I&#39;ll try it, thx a lot for advice!"}, {"owner": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "edited": false, "score": 0, "creation_date": 1572467361, "post_id": 58632655, "comment_id": 103573331, "body": "You can simplify this code by using <code>GetSecurityInfo</code>, <code>SetEntriesinAclW</code>, and <code>SetSecurityInfo</code>. This will also do the right thing in terms of canonical ordering of entries."}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1572467454, "post_id": 58632655, "comment_id": 103573364, "body": "you not need add any ace to acl, enumerate existing and remove from <code>Mask</code>  <code>PROCESS_TERMINATE</code> access if this is not LocalSystem or Administrators sid"}, {"owner": {"reputation": 11, "user_id": 12275550, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ybyZW.jpg?s=128&g=1", "display_name": "Ilya Petrov", "link": "https://stackoverflow.com/users/12275550/ilya-petrov"}, "reply_to_user": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "edited": false, "score": 0, "creation_date": 1572467596, "post_id": 58632655, "comment_id": 103573414, "body": "@JonathanPotter so, i add denied ace to the head, when in code execute     OpenProcess(PROCESS_TERMINATE, false, pID) i really get ERROR 5 (Access Denied). It&#39;s ok. But why when i close &quot;calc.exe&quot; ,in my case, by click cross it closes as usuall, without any messagebox about access denied?"}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1572467729, "post_id": 58632655, "comment_id": 103573478, "body": "because window handle wm_close message and exit itself"}, {"owner": {"reputation": 11, "user_id": 12275550, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ybyZW.jpg?s=128&g=1", "display_name": "Ilya Petrov", "link": "https://stackoverflow.com/users/12275550/ilya-petrov"}, "reply_to_user": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1572467897, "post_id": 58632655, "comment_id": 103573544, "body": "@RbMm But if there is a denied ACE on the head of ACL, then it will not check the lower ones in ACL, right?"}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1572468086, "post_id": 58632655, "comment_id": 103573630, "body": "but for what you need add denied ace ?"}, {"owner": {"reputation": 11, "user_id": 12275550, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ybyZW.jpg?s=128&g=1", "display_name": "Ilya Petrov", "link": "https://stackoverflow.com/users/12275550/ilya-petrov"}, "reply_to_user": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1572468351, "post_id": 58632655, "comment_id": 103573743, "body": "@RbMm <b>I need to modify DACL ( security descriptor) in Windows 10 to prevent kill process without Debug Privilege of user.</b> So, I googled it and there said it is necessary to denied PROCESS_TERMINATE to WorldSid(Everyone), what i do in my code"}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1572468774, "post_id": 58632655, "comment_id": 103573941, "body": "but i ask for what you need <b>add</b> denied ace ? you can for example set empty dacl to process. this denied access too. or remove <code>PROCESS_TERMINATE</code> access right from mask"}, {"owner": {"reputation": 11, "user_id": 12275550, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ybyZW.jpg?s=128&g=1", "display_name": "Ilya Petrov", "link": "https://stackoverflow.com/users/12275550/ilya-petrov"}, "reply_to_user": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1572469004, "post_id": 58632655, "comment_id": 103574032, "body": "@RbMm At first, when i started to write code, I thought it was easiest to add a denied ACE. Okey, which way is easier and more reliable in the end?"}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1572469189, "post_id": 58632655, "comment_id": 103574117, "body": "no , you select most worst and hard solution. you can simply set empty dacl to process for example. or if want selective disable access - remove PROCESS_TERMINATE access right from some sids in <code>ACCESS_ALLOWED_ACE_TYPE</code>"}, {"owner": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "edited": false, "score": 1, "creation_date": 1572469278, "post_id": 58632655, "comment_id": 103574153, "body": "If you need to block <code>WM_CLOSE</code> messages to a process for which you don&#39;t have source control, you can run it elevated &quot;as administrator&quot;. UIPI will block messages sent from a standard-user security context, e.g. sent by taskkill.exe from non-elevated command prompt. Or, more radically, I suppose you can run the process on another Desktop in WinSta0, to which you lock down access."}], "owner": {"reputation": 11, "user_id": 12275550, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ybyZW.jpg?s=128&g=1", "display_name": "Ilya Petrov", "link": "https://stackoverflow.com/users/12275550/ilya-petrov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 204, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1572512625, "creation_date": 1572464832, "last_edit_date": 1572468738, "question_id": 58632655, "link": "https://stackoverflow.com/questions/58632655/modify-dacl-to-prevent-everybody-kill-process-without-debug-priveleges", "title": "Modify DACL to prevent everybody kill process without Debug Priveleges", "body": "<p>I have some code which i have wrote. I need to modify <strong>DACL</strong> ( security descriptor) in <strong>Windows 10</strong> to <em>prevent kill process</em> without <em>Debug Privilege</em> of user. How can i do this one? I learned at the internet algorithm, looked for some functions for that, but process still closes without any problems. I tried debug it a lot of time, code works without errors, but unsuccessfully.</p>\n\n<p>How should i solve this problem? For my example below,i Add ACE for Denied PROCESS_TERMINATE. Is it right way?</p>\n\n<p>Also advice me how can i check that. I know that i will get MessageBox of Permission Denied, yep?</p>\n\n<p>My code (p.s. updated):</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;Windows.h&gt;\nPSECURITY_DESCRIPTOR GetProcessSecurityDescriptor(HANDLE processHandle, DWORD &amp;buffSizeNeeded);\nvoid SecurityDescriptorModifier(HANDLE hProcess);\n\nint main()\n{\n    DWORD pID;\n    std::cin &gt;&gt; pID;\n\n    HANDLE processHandle = OpenProcess(PROCESS_ALL_ACCESS, false, pID);\n    SecurityDescriptorModifier(processHandle);\n\n    HANDLE pHandle = OpenProcess(PROCESS_TERMINATE, false, pID);\n\n    return 0;\n}\n\n\n\nvoid SecurityDescriptorModifier(HANDLE hProcess)\n{\n    DWORD                 SIDLength = 0;\n    PSID                 SID;\n    PACL                 pACL;   \n    PACL                 pNewAcl;\n    BOOL                 bDaclExist;\n    BOOL                 bDaclPresent;\n    PSECURITY_DESCRIPTOR pSecurityDescriptor;\n    PSECURITY_DESCRIPTOR pSecurityDescriptorNew;\n    ACL_SIZE_INFORMATION aclSizeInfo;\n    DWORD                 dwNewAclSize;\n    ACCESS_ALLOWED_ACE*  pACE;\n    PVOID                pTempAce;\n    DWORD buffSizeNeeded = -1;\n\n\n    // \"everyone\" group\n    //CreateWellKnownSid(WinWorldSid, NULL, NULL, &amp;SIDLength);\n    // Allocate enough memory for the largest possible SID.\n    SIDLength = SECURITY_MAX_SID_SIZE;\n    if (!(SID = LocalAlloc(LMEM_FIXED, SIDLength)))\n    {\n        fprintf(stderr, \"Could not allocate memory.\\n\");\n        exit(1);\n    }\n\n    //SID = new byte[SECURITY_MAX_SID_SIZE];\n    if (!CreateWellKnownSid(WinWorldSid, NULL, SID, &amp;SIDLength))\n    {\n        fprintf(stderr,\n            \"CreateWellKnownSid Error %u\",\n            GetLastError());\n        LocalFree(SID);\n    }\n\n    pSecurityDescriptor = GetProcessSecurityDescriptor(hProcess, buffSizeNeeded);\n\n    BOOL executionResult = GetSecurityDescriptorDacl(pSecurityDescriptor, &amp;bDaclPresent, &amp;pACL, &amp;bDaclExist);\n\n    if(!executionResult)\n    {\n        fprintf(stderr, \"GetSecurityDescriptorDacl() failed, error %d\\n\", GetLastError());\n        exit(1);\n    }\n\n    pSecurityDescriptorNew = (PSECURITY_DESCRIPTOR)HeapAlloc(GetProcessHeap(), HEAP_ZERO_MEMORY, buffSizeNeeded);\n\n    if (pSecurityDescriptorNew == NULL)\n        exit(1);\n    else\n        printf(\"Heap allocated for psdNew!\\n\");\n\n    // Create a new security descriptor\n    if (!InitializeSecurityDescriptor(pSecurityDescriptorNew, SECURITY_DESCRIPTOR_REVISION))\n    {\n        fprintf(stderr, \"InitializeSecurityDescriptor() failed, error %d\\n\", GetLastError());\n        exit(1);\n    }\n\n    // Obtain the DACL from the security descriptor\n    if (!GetSecurityDescriptorDacl(pSecurityDescriptor, &amp;bDaclPresent, &amp;pACL, &amp;bDaclExist))\n    {\n        fprintf(stderr, \"GetSecurityDescriptorDacl() failed, error %d\\n\", GetLastError());\n        exit(1);\n    }\n\n    // Initialize\n    ZeroMemory(&amp;aclSizeInfo, sizeof(ACL_SIZE_INFORMATION));\n    aclSizeInfo.AclBytesInUse = sizeof(ACL);\n\n\n    // Call only if NULL DACL\n    if (pACL != NULL)\n    {\n        // Determine the size of the ACL information\n        if (!GetAclInformation(pACL, (LPVOID)&amp; aclSizeInfo, sizeof(ACL_SIZE_INFORMATION), AclSizeInformation))\n        {\n            fprintf(stderr, \"GetAclInformation() failed, error %d\\n\", GetLastError());\n            exit(1);\n        }\n    }\n\n    // Compute the size of the new ACL\n    dwNewAclSize = aclSizeInfo.AclBytesInUse + sizeof(ACCESS_DENIED_ACE) + GetLengthSid(SID) - sizeof(DWORD);\n\n    // Allocate buffer for the new ACL\n    pNewAcl = (PACL)HeapAlloc(GetProcessHeap(), HEAP_ZERO_MEMORY, dwNewAclSize);\n\n    if (pNewAcl == NULL)\n        exit(1);\n\n    // Initialize the new ACL\n    if (!InitializeAcl(pNewAcl, dwNewAclSize, ACL_REVISION))\n    {\n\n        fprintf(stderr, \"InitializeAcl() failed, error %d\\n\", GetLastError());\n        exit(1);\n    }\n        static const DWORD dwPoison = PROCESS_TERMINATE;\n\n    BOOL bResult = AddAccessDeniedAce(pNewAcl, ACL_REVISION, dwPoison, SID);\n\n    if (FALSE == bResult)\n    {\n        printf(\"AddAccessDenied Error %d\\n\", GetLastError());\n    }\n\n\n    // If DACL is present, copy it to a new DACL\n    if (!bDaclPresent)\n    {\n        // Copy the ACEs to the new ACL.\n        if (aclSizeInfo.AceCount)\n        {\n            for (int i = 0; i &lt; aclSizeInfo.AceCount; i++)\n            {\n                // Get an ACE.\n                if (!GetAce(pACL, i, &amp;pTempAce))\n                {\n                    fprintf(stderr, \"GetAce() failed, error %d\\n\", GetLastError());\n                    exit(1);\n                }\n                else\n                    fprintf(stderr, \"GetAce working\\n\");\n\n\n                // Add the ACE to the new ACL.\n                if (!AddAce(pNewAcl, ACL_REVISION, MAXDWORD, pTempAce, ((PACE_HEADER)pTempAce)-&gt;AceSize))\n                {\n                    fprintf(stderr, \"AddAce() failed, error %d\\n\", GetLastError());\n                    exit(1);\n                }\n                else\n                    fprintf(stderr, \"AddAce() is working!\\n\");\n            }\n\n        }\n\n    }\n\n\n    if (!SetSecurityDescriptorDacl(pSecurityDescriptorNew, TRUE, pNewAcl, FALSE))\n    {\n        printf(\"SetSecurityDescriptorDacl() failed, error %d\\n\", GetLastError());\n        exit(1);\n    }\n    else\n        printf(\"SetSecurityDescriptorDacl() is working!\\n\");\n\n    // Set the new security descriptor for the window station\n    if (!SetKernelObjectSecurity(hProcess, DACL_SECURITY_INFORMATION, pSecurityDescriptorNew))\n    {\n        printf(\"SetUserObjectSecurity() failed, error %d\\n\", GetLastError());\n        exit(1);\n    }\n    else\n        printf(\"SetUserObjectSecurity() is working!\\n\");\n}\n\n\nPSECURITY_DESCRIPTOR GetProcessSecurityDescriptor(HANDLE processHandle, DWORD &amp;buffSizeNeeded)\n{\n    PSECURITY_DESCRIPTOR pSD = new byte[0];\n    SECURITY_INFORMATION si = DACL_SECURITY_INFORMATION;\n\n    // To understand actual needed size for pSD\n    // GetKernelObject, what diff?\n    GetKernelObjectSecurity(processHandle, si, pSD, 0, &amp;buffSizeNeeded);\n\n    if (buffSizeNeeded &lt;= 0)\n    {\n        fprintf(stderr, \":GetKernelObjectSecurity ERROR: %u\\n\", GetLastError());\n        exit(1);\n    }\n\n    pSD = (PSECURITY_DESCRIPTOR)HeapAlloc(GetProcessHeap(), HEAP_ZERO_MEMORY, buffSizeNeeded);\n\n    if (pSD == NULL)\n        exit(1);\n    else\n        printf(\"Heap allocated for psdNew!\\n\");\n\n    //Allocate Memory &amp; get DACL\n    if (!GetKernelObjectSecurity(processHandle, si, pSD, buffSizeNeeded, &amp;buffSizeNeeded))\n    {\n        fprintf(stderr, \":GetKernelObjectSecurity(With Alloc) ERROR: %u\\n\", GetLastError());\n        exit(1);\n    }\n\n    return pSD;\n}\n</code></pre>\n"}, {"tags": ["c++", "c++20", "c++-coroutine"], "comments": [{"owner": {"reputation": 7273, "user_id": 2193968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1beed39f2b04409ff584a0af1d59325c?s=128&d=identicon&r=PG", "display_name": "Jerry Jeremiah", "link": "https://stackoverflow.com/users/2193968/jerry-jeremiah"}, "edited": false, "score": 0, "creation_date": 1572468800, "post_id": 58632651, "comment_id": 103573953, "body": "It&#39;s compiler magic.  Other things that need compiler magic are std::initializer_list and std::has_trivial_constructor and std::has_virtual_destructor"}], "answers": [{"tags": [], "owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "is_accepted": true, "score": 6, "last_activity_date": 1572467382, "creation_date": 1572467382, "answer_id": 58633207, "question_id": 58632651, "link": "https://stackoverflow.com/questions/58632651/how-coroutine-handlepromisefrom-promise-works-in-c/58633207#58633207", "title": "How coroutine_handle&lt;Promise&gt;::from_promise() works in C++", "body": "<p>It works by fiat. That is, it works because the standard <em>says</em> that it works, and implementations must therefore find a way to implement coroutines in such a way that it is possible.</p>\n\n<p>When creating a coroutine, the implementation creates two things: the coroutine_handle and the promise object. The location of both of these things is controlled entirely by the compiler. So, the compiler could very easily allocate them contiguously with each other, such that a coroutine's stack would essentially start with a <code>struct {coroutine_handle&lt;Promise&gt; handle; Promise promise};</code>.</p>\n\n<p>Given that knowledge, you know that the handle for any promise type lives <code>sizeof(coroutine_handle&lt;Promise&gt;)</code> bytes before any <code>promise</code> object's address (alignment requirements of the <code>Promise</code> type can adjust this, but such things can be queried from the type). And since <code>from_promise</code> takes a promise object, you can just offset the pointer and cast it to a <code>coroutine_handle&lt;Promise&gt;</code>.</p>\n\n<p>Now, that is just one way of doing it; an implementation doesn't have to do it this way. What matters is that the implementation has control over where the promise object lives relative to the coroutine internal data. Or more specifically, the promise lives <em>inside</em> of that internal data. Regardless of how you look at it, the compiler knows everything it needs to in order to convert the address of a promise into the internal data needed to fill in a <code>coroutine_handle</code>.</p>\n"}], "owner": {"reputation": 1093, "user_id": 858071, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/3021798df81b7c46691c32291064428e?s=128&d=identicon&r=PG", "display_name": "mentalmushroom", "link": "https://stackoverflow.com/users/858071/mentalmushroom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 436, "favorite_count": 1, "accepted_answer_id": 58633207, "answer_count": 1, "score": 2, "last_activity_date": 1572467382, "creation_date": 1572464804, "question_id": 58632651, "link": "https://stackoverflow.com/questions/58632651/how-coroutine-handlepromisefrom-promise-works-in-c", "title": "How coroutine_handle&lt;Promise&gt;::from_promise() works in C++", "body": "<p>I <a href=\"https://lewissbaker.github.io/2018/09/05/understanding-the-promise-type\" rel=\"nofollow noreferrer\">read</a> that <code>coroutine_handle</code> can be reconstructed from a reference to the coroutine's promise object using <code>coroutine_handle&lt;Promise&gt;::from_promise()</code> function. To my knowledge, the promise object is defined like this:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>class resumable{\npublic:\n  struct promise_type;\n  bool resume();\n};\n\nstruct resumable::promise_type{\n  resumable get_return_object() {/**/}\n  auto initial_suspend() {/**/}\n  auto final_suspend() {/**/}\n  void return_void() {}\n  void unhandled_exception();\n};\n</code></pre>\n\n<p>I am failing to figure out how reconstruction could work given the fact that <code>promise_type</code> doesn't hold any reference to the coroutine handle. Just the opposite, the coroutine handle stores the reference to the promise object, which can be returned by the <code>promise()</code> method of the handle. I can't find any information on what actually happens in <code>from_promise</code> function. </p>\n"}, {"tags": ["c++", "vector"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 2, "creation_date": 1572464675, "post_id": 58632580, "comment_id": 103572269, "body": "Couldn&#39;t you just find the first prime, searching backwards?"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 1, "creation_date": 1572464739, "post_id": 58632580, "comment_id": 103572302, "body": "Zero is not a prime number, much less a factor of any other number."}, {"owner": {"reputation": 19, "user_id": 12271389, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDGw_FkxBfhG5tdldYYYhOygg35mt5nnO_WwnNGoQ=k-s128", "display_name": "dummy097", "link": "https://stackoverflow.com/users/12271389/dummy097"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1572464878, "post_id": 58632580, "comment_id": 103572366, "body": "Adding the numbers 1 and 0 shouldn&#39;t affect max_element though"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1572464923, "post_id": 58632580, "comment_id": 103572386, "body": "It doesn&#39;t, but a container called <code>myVectorOfPrimes</code> containing <code>0</code> and <code>1</code> is unexpected."}, {"owner": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 0, "creation_date": 1572464970, "post_id": 58632580, "comment_id": 103572409, "body": "Just rename it <code>myVectorOfPrimesAndOneAndZeroJustBecause</code>."}], "answers": [{"tags": [], "owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "is_accepted": false, "score": 3, "last_activity_date": 1572464655, "creation_date": 1572464655, "answer_id": 58632617, "question_id": 58632580, "link": "https://stackoverflow.com/questions/58632580/cant-stdcout-a-max-element-function/58632617#58632617", "title": "Can&#39;t std::cout a max_element function", "body": "<p>The <code>std::max_element</code> function returns an iterator to the max element. You have to write:</p>\n\n<pre><code>cout &lt;&lt; *value;\n</code></pre>\n\n<p>(You'll probably want to change the name of the variable.)</p>\n\n<p>You can also get the index of the max element by subtracting the begin iterator from the iterator that <code>max_element</code> returns.</p>\n"}], "owner": {"reputation": 19, "user_id": 12271389, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDGw_FkxBfhG5tdldYYYhOygg35mt5nnO_WwnNGoQ=k-s128", "display_name": "dummy097", "link": "https://stackoverflow.com/users/12271389/dummy097"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "closed_date": 1572524365, "answer_count": 1, "score": 0, "last_activity_date": 1572464655, "creation_date": 1572464476, "question_id": 58632580, "link": "https://stackoverflow.com/questions/58632580/cant-stdcout-a-max-element-function", "closed_reason": "Duplicate", "title": "Can&#39;t std::cout a max_element function", "body": "<p>I am trying to find the biggest prime factor for 600851475143. </p>\n\n<pre><code>#include &lt;vector&gt;\n#include &lt;iostream&gt;\n#include &lt;algorithm&gt;\n\nusing namespace std;\n\nbool isPrime(long long int number) {\n    if (number &lt; 2)\n        return false;\n    if (number &gt; 2 &amp;&amp; (number % 2) == 0)\n        return false;\n    for (long long int i = 2; i &lt; number; i++)\n    {\n        if ((number % i) == 0)\n        {\n            return false;\n        }\n    }\n    return true;\n}\n\nint main()\n{\n    vector&lt;long long int&gt; myVectorOfPrimes;\n    myVectorOfPrimes.push_back(1);\n    myVectorOfPrimes.push_back(0);\n    for(long long i = 2; i &lt; 600851475143; i++) {\n        if (isPrime(i)) {\n            myVectorOfPrimes.push_back(i);\n        }\n    }\n    auto value = max_element(myVectorOfPrimes.cbegin(), myVectorOfPrimes.cend());\n    cout &lt;&lt; value;\n}   \n</code></pre>\n\n<p>I expect the max_element function to be able to find the biggest prime factor in the myVectorOfPrimes, find its data type, then cout it. Instead, I get the error E0349: no operator \"&lt;&lt;\" matches these operands, and Error: C2679 binary '&lt;&lt;': no operator found which takes a right-hand operand of type '_FwdIt' (or there is no acceptable conversion)</p>\n"}, {"tags": ["c++", "arrays", "matrix-multiplication"], "comments": [{"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 4, "creation_date": 1572464118, "post_id": 58632504, "comment_id": 103572042, "body": "<a href=\"https://gcc.godbolt.org/z/E89p2V\" rel=\"nofollow noreferrer\">Turn on compiler warnings</a>"}, {"owner": {"reputation": 56858, "user_id": 131930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91536fe27d32713b8a154a0bf42f6748?s=128&d=identicon&r=PG", "display_name": "Jeremy Friesner", "link": "https://stackoverflow.com/users/131930/jeremy-friesner"}, "edited": false, "score": 3, "creation_date": 1572464247, "post_id": 58632504, "comment_id": 103572106, "body": "It&#39;s not printing memory addresses -- however you are starting with uninitialized values in your <code>b[2][2]</code> array, so it&#39;s undefined what the results of the calculation will be."}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1572464382, "post_id": 58632504, "comment_id": 103572160, "body": "<code>int b[2][2];</code> Did you mean <code>int b[2][2] = {};</code>?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 3, "creation_date": 1572464403, "post_id": 58632504, "comment_id": 103572174, "body": "Those aren&#39;t memory addresses. When you see a weird number like -858993450, convert it to hex and see if it is more recognizable as an error code. In this case we get CCCCCCD6 which is CCCCCCCC plus what you added. According to <a href=\"https://en.wikipedia.org/wiki/Magic_number_(programming)#Magic_debug_values\" rel=\"nofollow noreferrer\">a reputable list of common debugging codes</a>, CCCCCCCC is uninitialized stack memory"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1572464488, "post_id": 58632504, "comment_id": 103572198, "body": "<code>b[i][j] += a[i][k] * a[k][j];</code> - you never <i>initialized</i> the members of <code>b</code>, so you are just adding values to garbage (elements with indeterminate value). That code has Undefined Behaviour. Your program is broken and has no meaning. In C++ values of an array are not magically initialized to zero. <i>You</i> have to do that (if needed) and you cannot just read uninitialised variables with well defined results."}], "answers": [{"tags": [], "owner": {"reputation": 291, "user_id": 10760901, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-RK5qa5vqPvg/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-iROQ6MnXIpZkRtQ8i2lJj6nZU7Xg/mo/photo.jpg?sz=128", "display_name": "emsiiggy", "link": "https://stackoverflow.com/users/10760901/emsiiggy"}, "is_accepted": true, "score": 4, "last_activity_date": 1572464464, "last_edit_date": 1572464464, "creation_date": 1572464393, "answer_id": 58632562, "question_id": 58632504, "link": "https://stackoverflow.com/questions/58632504/why-is-this-printing-memory-addresses-instead-of-values/58632562#58632562", "title": "Why is this printing memory addresses instead of values", "body": "<p>You wrote:</p>\n\n<pre><code>int b[2][2];\n</code></pre>\n\n<p>and then</p>\n\n<pre><code>b[i][j] += ...\n</code></pre>\n\n<p>Where did you initialize b ?</p>\n\n<pre><code>int b[2][2] = {};\n</code></pre>\n\n<p>or</p>\n\n<pre><code>int b[2][2] = {0,0};\n</code></pre>\n\n<p>Should do the job.</p>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 2, "creation_date": 1572464941, "post_id": 58632601, "comment_id": 103572398, "body": "Maybe add a reference to <a href=\"https://en.cppreference.com/w/cpp/language/ub\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/language/ub</a> and explain that reading uninitialised variables is UB.."}], "tags": [], "owner": {"reputation": 72, "user_id": 3550316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63bbf089c1d89387f993c65cafda604e?s=128&d=identicon&r=PG&f=1", "display_name": "michael_fortunato", "link": "https://stackoverflow.com/users/3550316/michael-fortunato"}, "is_accepted": false, "score": 2, "last_activity_date": 1572464588, "creation_date": 1572464588, "answer_id": 58632601, "question_id": 58632504, "link": "https://stackoverflow.com/questions/58632504/why-is-this-printing-memory-addresses-instead-of-values/58632601#58632601", "title": "Why is this printing memory addresses instead of values", "body": "<p>Garbage values are being printed, not the address of the array. \nHere is why.\nIn this snippet of code</p>\n\n<pre><code>void matrixMulti(const int a[][2], const int rows) {\n\n    int b[2][2];\n\n    for (int i = 0; i &lt; 2; i++) {\n        for (int j = 0; j &lt; 2; j++) {\n            for (int k = 0; k &lt; 2; k++) {\n                b[i][j] += a[i][k] * a[k][j];\n            }\n        }\n    }\n</code></pre>\n\n<p>You allocated space for <code>int b[2][2]</code>, but you do not initialize it to a value. This would be fine except in the for-loop body. \n<code>b[i][j] += a[i][k] * a[k][j];</code> &lt;=> <code>b[i][j] = b[i][j] + a[i][k] * a[k][j];</code>\nyou are referencing the value of <code>b[i][j]</code> before it is initialized. In other words you say <code>b[i][j]</code> is equal to <code>b[i][j] + a[i][k] * a[k][j]</code>, but you can't do this as, the value of <code>b[i][j]</code> is unknown.</p>\n\n<p>The solution to this is to initialize <code>int b[2][2] = {{0,0},{0,0}};</code></p>\n"}], "owner": {"reputation": 55, "user_id": 9104121, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55cef638515a3a20f4c13c4296c1c7ea?s=128&d=identicon&r=PG&f=1", "display_name": "JJaco", "link": "https://stackoverflow.com/users/9104121/jjaco"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 139, "favorite_count": 0, "accepted_answer_id": 58632562, "answer_count": 2, "score": 0, "last_activity_date": 1572465308, "creation_date": 1572464042, "last_edit_date": 1572465308, "question_id": 58632504, "link": "https://stackoverflow.com/questions/58632504/why-is-this-printing-memory-addresses-instead-of-values", "title": "Why is this printing memory addresses instead of values", "body": "<p>Here is my driver </p>\n\n<pre><code>int square[2][2] = {\n    {1,2},\n    {3,4}\n};\n\nmatrixMulti(square, 2);\n</code></pre>\n\n<p>Here is my function </p>\n\n<pre><code>void matrixMulti(const int a[][2], const int rows) {\n\n    int b[2][2];\n\n    for (int i = 0; i &lt; 2; i++) {\n        for (int j = 0; j &lt; 2; j++) {\n            for (int k = 0; k &lt; 2; k++) {\n                b[i][j] += a[i][k] * a[k][j];\n            }\n        }\n    }\n\n    cout &lt;&lt; \"new matrix \" &lt;&lt; endl;\n    for (int i = 0; i &lt; 2; i++) {\n        for (int j = 0; j &lt; 2; j++) {\n            cout &lt;&lt; b[i][j] &lt;&lt; \" \";\n        }\n        cout &lt;&lt; endl;\n    }\n}\n</code></pre>\n\n<p>The output is: </p>\n\n<pre><code>new matrix\n-858993453 -858993450\n-858993445 -858993438\n</code></pre>\n\n<p>I am confused as to why it is printing the memory addresses rather then the values stored in them and what can be done to get it to print the values rather than the memory address. </p>\n"}, {"tags": ["c++", "char", "int", "ascii"], "comments": [{"owner": {"reputation": 6607, "user_id": 6717178, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/QbOLx.jpg?s=128&g=1", "display_name": "JHBonarius", "link": "https://stackoverflow.com/users/6717178/jhbonarius"}, "edited": false, "score": 1, "creation_date": 1572465465, "post_id": 58632475, "comment_id": 103572616, "body": "So it&#39;s about the number of bits that represent a type. A <code>char</code> is (at least, but almost always exactly) 8 bits. An <code>int</code> is at least 16 bits, but more often 32 bits. By assigning an <code>int</code> to a <code>char</code>, 32-8=24 bits are dropped in an implicit type conversion.  This will often result in a &quot;loss of precision&quot; compiler warning by the way."}], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 12299521, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-_uGWyB1GB1E/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfTXLlNQjS-qKNK8TqoVM0SS1WW1Q/photo.jpg?sz=128", "display_name": "thomas thurston", "link": "https://stackoverflow.com/users/12299521/thomas-thurston"}, "is_accepted": false, "score": 1, "last_activity_date": 1572470754, "last_edit_date": 1572470754, "creation_date": 1572465352, "answer_id": 58632755, "question_id": 58632475, "link": "https://stackoverflow.com/questions/58632475/assigning-char-type-to-int-to-print-corresponding-ascii-character/58632755#58632755", "title": "Assigning char type to int to print corresponding ASCII character", "body": "<p>I could be wrong here so maybe someone else can weigh in, but I believe I know the answer.</p>\n\n<p>If you assign a character a number, when you print that <code>char</code> it prints the corresponding character. Since <code>c</code> is of type <code>char</code>, the line <code>c = code</code> converts the integer entered into a character. You can test this yourself by assigning any <code>int</code> to a <code>char</code> variable and printing it out. </p>\n\n<p>The second assignment, <code>code = c</code>, seems to be completely unnecessary. </p>\n"}, {"tags": [], "owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "is_accepted": true, "score": 0, "last_activity_date": 1572467567, "last_edit_date": 1572467567, "creation_date": 1572466884, "answer_id": 58633097, "question_id": 58632475, "link": "https://stackoverflow.com/questions/58632475/assigning-char-type-to-int-to-print-corresponding-ascii-character/58633097#58633097", "title": "Assigning char type to int to print corresponding ASCII character", "body": "<p>That's not a swap. <code>c</code> is assigned the same value as <code>code</code> and then this value is assigned back to <code>code</code>. The original value of <code>code</code> is lost.</p>\n\n<p>We can see this because <code>unsigned char c</code> is (usually) much smaller than <code>unsigned int code</code> and some information may be lost stuffing the value in <code>code</code> into <code>c</code>. </p>\n\n<p>For example, <code>code</code> = 257. After <code>c = code;</code> <code>code</code> is still 257 and <code>c</code>, assuming an 8 bit <code>char</code> will be 1. After <code>code = c;</code>, both <code>code</code> and <code>c</code> will be 1. 257 has been lost.</p>\n\n<p>Why is this being done? when given a <code>char</code>, <code>operator&lt;&lt;</code> will print out the character encoded, completely ignoring the request to print as <code>hex</code>, <code>dec</code>, or <code>oct</code>. So</p>\n\n<pre><code>&lt;&lt; \"\\n decimal: \" &lt;&lt; setw(3) &lt;&lt; dec &lt;&lt; c\n</code></pre>\n\n<p>is wasted.  Given an <code>int</code> <code>&lt;&lt;</code> will respect the modifiers, but if <code>c</code> and <code>code</code> have different values, you're comparing apples and Sasquatches.</p>\n"}], "owner": {"reputation": 159, "user_id": 12189862, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/saRhp.png?s=128&g=1", "display_name": "Hibou", "link": "https://stackoverflow.com/users/12189862/hibou"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "accepted_answer_id": 58633097, "answer_count": 2, "score": 0, "last_activity_date": 1572470754, "creation_date": 1572463910, "question_id": 58632475, "link": "https://stackoverflow.com/questions/58632475/assigning-char-type-to-int-to-print-corresponding-ascii-character", "title": "Assigning char type to int to print corresponding ASCII character", "body": "<p>The code asks for a positive integer, than the first output shows the corresponding ASCII code, the others are made to convert the integer to decimal, octal and hexadecimal equivalents. I understand the logic of the code, but I don't understand the assignment made on line 10 <code>c=code</code> than the assignment made on line 12 <code>code=c</code>. What happens on background when we 'swap' the two variables.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;iomanip&gt;\nusing namespace std;\n\nint main(){\n    unsigned char c = 0;\n    unsigned int code = 0;\n    cout &lt;&lt; \"\\nPlease enter a decimal character code: \";\n    cin &gt;&gt; code;\n    c = code; \n    cout &lt;&lt; \"\\nThe corresponding character: \" &lt;&lt; c &lt;&lt; endl;\n    code = c; \n    cout &lt;&lt; \"\\nCharacter codes\"\n    &lt;&lt; \"\\n decimal: \" &lt;&lt; setw(3) &lt;&lt; dec &lt;&lt; code\n    &lt;&lt; \"\\n octal: \" &lt;&lt; setw(3) &lt;&lt; oct &lt;&lt; code\n    &lt;&lt; \"\\n hexadecimal: \" &lt;&lt; setw(3) &lt;&lt; hex &lt;&lt; code\n    &lt;&lt; endl;\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "crash", "malloc", "dynamic-memory-allocation", "double-pointer"], "comments": [{"owner": {"reputation": 37, "user_id": 12299255, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2b0f1726b1125d216621cb573d505d2?s=128&d=identicon&r=PG&f=1", "display_name": "ric", "link": "https://stackoverflow.com/users/12299255/ric"}, "edited": false, "score": 0, "creation_date": 1572463490, "post_id": 58632370, "comment_id": 103571773, "body": "function allocaMatrice is the dynamic-allocation ,leggiMatrice is the matrix insert,scriviMatrice is the print and deallocaMatrice is the deallocation"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1572463723, "post_id": 58632370, "comment_id": 103571869, "body": "Why are you using <code>malloc</code> and <code>calloc</code> in a C++ program? Please stop. Why are you doing manual memory management <i>at all</i> when you could just be using <code>std::array</code> or <code>std::vector</code>? And if you <i>insist</i> on not using containers, then, <i>please</i>, at least use smart pointers (<code>std::unique_ptr</code>/<code>std::shared_ptr</code>). And remember, &quot;more stars don&#39;t mean you&#39;re a better programmer&quot; - more likely, quite the opposite. I&#39;d never (or at least not without a <i>really</i> good reason) let anything like <code>void allocaMatrice(int *** matrice,int * r,int * c);</code> pass code review."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1572463970, "post_id": 58632370, "comment_id": 103571992, "body": "When you have your code corrected and working, consider asking for input on how to make it better at <a href=\"https://codereview.stackexchange.com/\">Code Review</a>."}, {"owner": {"reputation": 37, "user_id": 12299255, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2b0f1726b1125d216621cb573d505d2?s=128&d=identicon&r=PG&f=1", "display_name": "ric", "link": "https://stackoverflow.com/users/12299255/ric"}, "edited": false, "score": 0, "creation_date": 1572464069, "post_id": 58632370, "comment_id": 103572027, "body": "i&#39;m using malloc and calloc because this is an homework exercise and the prof have just taught us malloc calloc new and double pointer so in this exercise we have to use these function. in a another version i have to use new for example.As far i know malloc and calloce can be used also in c++ ."}, {"owner": {"reputation": 37, "user_id": 12299255, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2b0f1726b1125d216621cb573d505d2?s=128&d=identicon&r=PG&f=1", "display_name": "ric", "link": "https://stackoverflow.com/users/12299255/ric"}, "edited": false, "score": 0, "creation_date": 1572464338, "post_id": 58632370, "comment_id": 103572146, "body": "i use the third-pointer, so to speak,because i have to make a void function to allocate the matrix , if i use a type of return int ** it would be more easy"}], "answers": [{"comments": [{"owner": {"reputation": 37, "user_id": 12299255, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2b0f1726b1125d216621cb573d505d2?s=128&d=identicon&r=PG&f=1", "display_name": "ric", "link": "https://stackoverflow.com/users/12299255/ric"}, "edited": false, "score": 0, "creation_date": 1572464714, "post_id": 58632465, "comment_id": 103572287, "body": "i can&#39;t use std::vector, i have to do necessarily like"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 37, "user_id": 12299255, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2b0f1726b1125d216621cb573d505d2?s=128&d=identicon&r=PG&f=1", "display_name": "ric", "link": "https://stackoverflow.com/users/12299255/ric"}, "edited": false, "score": 0, "creation_date": 1572464794, "post_id": 58632465, "comment_id": 103572322, "body": "@ric, I understand. It&#39;s unfornunate that you are forced to use C++ like C. Terrible."}, {"owner": {"reputation": 37, "user_id": 12299255, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2b0f1726b1125d216621cb573d505d2?s=128&d=identicon&r=PG&f=1", "display_name": "ric", "link": "https://stackoverflow.com/users/12299255/ric"}, "edited": false, "score": 0, "creation_date": 1572464853, "post_id": 58632465, "comment_id": 103572349, "body": "i know your method is more easy but unfortunately the exercise ask what i wrote"}, {"owner": {"reputation": 6607, "user_id": 6717178, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/QbOLx.jpg?s=128&g=1", "display_name": "JHBonarius", "link": "https://stackoverflow.com/users/6717178/jhbonarius"}, "edited": false, "score": 0, "creation_date": 1572466512, "post_id": 58632465, "comment_id": 103573013, "body": "Uhmm... what&#39;s with your for loops? Either use iterators or range based for loops please..."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 6607, "user_id": 6717178, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/QbOLx.jpg?s=128&g=1", "display_name": "JHBonarius", "link": "https://stackoverflow.com/users/6717178/jhbonarius"}, "edited": false, "score": 0, "creation_date": 1572466629, "post_id": 58632465, "comment_id": 103573065, "body": "@JHBonarius, good call although it&#39;s moot as far as the OP is concerned."}, {"owner": {"reputation": 37, "user_id": 12299255, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2b0f1726b1125d216621cb573d505d2?s=128&d=identicon&r=PG&f=1", "display_name": "ric", "link": "https://stackoverflow.com/users/12299255/ric"}, "reply_to_user": {"reputation": 6607, "user_id": 6717178, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/QbOLx.jpg?s=128&g=1", "display_name": "JHBonarius", "link": "https://stackoverflow.com/users/6717178/jhbonarius"}, "edited": false, "score": 0, "creation_date": 1572467234, "post_id": 58632465, "comment_id": 103573279, "body": "sorry @JHBonarius what do you mean with use iterators or range based for loops?"}, {"owner": {"reputation": 6607, "user_id": 6717178, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/QbOLx.jpg?s=128&g=1", "display_name": "JHBonarius", "link": "https://stackoverflow.com/users/6717178/jhbonarius"}, "reply_to_user": {"reputation": 37, "user_id": 12299255, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2b0f1726b1125d216621cb573d505d2?s=128&d=identicon&r=PG&f=1", "display_name": "ric", "link": "https://stackoverflow.com/users/12299255/ric"}, "edited": false, "score": 0, "creation_date": 1572469531, "post_id": 58632465, "comment_id": 103574271, "body": "@ric <a href=\"https://stackoverflow.com/questions/4925148/c-proper-way-to-iterate-over-stl-containers#21345143\" title=\"c proper way to iterate over stl containers%2321345143\">stackoverflow.com/questions/4925148/&hellip;</a> &lt;-- though a bit old. But don&#39;t worry. This stuff is probably too complex for your terrible professor..."}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 1, "last_activity_date": 1572470087, "last_edit_date": 1572470087, "creation_date": 1572463861, "answer_id": 58632465, "question_id": 58632370, "link": "https://stackoverflow.com/questions/58632370/why-this-program-crash-after-i-insert-the-first-2-input/58632465#58632465", "title": "why this program crash after i insert the first 2 input", "body": "<p>The line</p>\n\n<pre><code>*matrice=(int **) calloc (*r,sizeof(int));\n</code></pre>\n\n<p>is not right. It allocates memory for <code>*r</code> number of <code>int</code>s. You need to allocate memory for <code>*r</code> number of <code>int*</code>s (pointers not <code>int</code>s)</p>\n\n<p>It needs to be:</p>\n\n<pre><code>*matrice=(int **) calloc (*r, sizeof(int*));\n</code></pre>\n\n<hr>\n\n<p>You're using C++ as the language tag but your code is designed to work like a C program. Use C++ properly and make your program cleaner.</p>\n\n<ol>\n<li>Use <code>std::vector</code> for containers and remove the need to manage memory.</li>\n<li>Use reference types to pass arguments between functions.</li>\n</ol>\n\n<p>thus:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n\ntemplate&lt;typename T&gt;\nusing VecVec = std::vector&lt;std::vector&lt;T&gt;&gt;;\nusing IntVecVec = VecVec&lt;int&gt;;\n\nvoid allocaMatrice(IntVecVec&amp; matrice);\nvoid leggiMatrice(IntVecVec&amp; matrice);\nvoid scriviMatrice(IntVecVec const&amp; matrice);\n\n// Not necessary.\n// void deallocaMatrice(int ** matrice,int r);\n\nint main() {\n    IntVecVec matrice;\n    allocaMatrice(matrice);\n    leggiMatrice(matrice);\n    scriviMatrice(matrice);\n\n    std::cin.get();\n}\n\nvoid allocaMatrice(IntVecVec&amp; matrice) {\n    int righe, colonne;\n    std::cout &lt;&lt; \"Dimmi il numero di righe della matrice\\n\";\n    std::cin &gt;&gt; righe;\n    //while (cin.get() != '\\n');???\n    std::cout &lt;&lt; \"Dimmi il numero di colonne della matrice\\n\";\n    std::cin &gt;&gt; colonne;\n    //while (cin.get() != '\\n');??\n\n    matrice.resize(righe, std::vector&lt;int&gt;(colonne, 0));\n}\n\nvoid leggiMatrice(IntVecVec&amp; matrice) {\n    for (auto&amp; riga : matrice) {\n        for (auto&amp; elemeno : riga) {\n            std::cout &lt;&lt; \"Dimmi l'elemeno alla riga e colonna corrente\\n\";\n            std::cin &gt;&gt; elemeno;\n            //while(cin.get()!='\\n'); // what does this add?\n        }\n    }\n}\n\nvoid scriviMatrice(IntVecVec const&amp; matrice) {\n    for (auto const&amp; riga : matrice) {\n        for (auto const&amp; elemeno : riga) {\n            std::cout &lt;&lt; elemeno &lt;&lt; '\\t';\n        }\n        std::cout &lt;&lt; '\\n';\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 6607, "user_id": 6717178, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/QbOLx.jpg?s=128&g=1", "display_name": "JHBonarius", "link": "https://stackoverflow.com/users/6717178/jhbonarius"}, "is_accepted": false, "score": 0, "last_activity_date": 1572470987, "creation_date": 1572470987, "answer_id": 58633899, "question_id": 58632370, "link": "https://stackoverflow.com/questions/58632370/why-this-program-crash-after-i-insert-the-first-2-input/58633899#58633899", "title": "why this program crash after i insert the first 2 input", "body": "<p>I'll append the previous answer with an important concept in C++: classes. You use C++ for object oriented programming. Else you could as well use C. </p>\n\n<p>See if you can follow.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n\ntemplate&lt;typename T&gt;\nclass Matrice {\nprivate:\n    std::vector&lt;std::vector&lt;T&gt;&gt; matrice;\npublic:\n    void alloca();\n    void leggi();\n    void scrivi() const;\n};\n\nint main() {\n    Matrice&lt;int&gt; matrice;\n\n    matrice.alloca();\n    matrice.leggi();\n    matrice.scrivi();\n\n    std::cin.get();\n}\n\ntemplate&lt;typename T&gt;\nT Read() {\n    T output;\n    std::cin &gt;&gt; output;\n    return output;\n}\n\ntemplate&lt;typename T&gt;\nvoid Matrice&lt;T&gt;::alloca() {\n    std::cout &lt;&lt; \"Dimmi il numero di righe della matrice\\n\";\n    auto righe = Read&lt;int&gt;();\n\n    std::cout &lt;&lt; \"Dimmi il numero di colonne della matrice\\n\";\n    auto colonne = Read&lt;int&gt;();\n\n    matrice.resize(righe, std::vector&lt;T&gt;(colonne, 0));\n}\n\ntemplate&lt;typename T&gt;\nvoid Matrice&lt;T&gt;::leggi() {\n    for (auto&amp; riga : matrice) {\n        for (auto&amp; elemeno : riga) {\n            std::cout &lt;&lt; \"Dimmi l'elemeno alla riga e colonna corrente\\n\";\n            std::cin &gt;&gt; elemeno;\n        }\n    }\n}\n\ntemplate&lt;typename T&gt;\nvoid Matrice&lt;T&gt;::scrivi() const {\n    for (auto const&amp; riga : matrice) {\n        for (auto const&amp; elemeno : riga) {\n            std::cout &lt;&lt; elemeno &lt;&lt; '\\t';\n        }\n        std::cout &lt;&lt; '\\n';\n    }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 6607, "user_id": 6717178, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/QbOLx.jpg?s=128&g=1", "display_name": "JHBonarius", "link": "https://stackoverflow.com/users/6717178/jhbonarius"}, "edited": false, "score": 0, "creation_date": 1572471618, "post_id": 58633918, "comment_id": 103574975, "body": "again: <code>calloc</code> and <code>free</code> is for C. C++ really prefers <code>new</code> and <code>delete</code>...or even <code>std::vector</code>..."}], "tags": [], "owner": {"reputation": 37, "user_id": 12299255, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2b0f1726b1125d216621cb573d505d2?s=128&d=identicon&r=PG&f=1", "display_name": "ric", "link": "https://stackoverflow.com/users/12299255/ric"}, "is_accepted": false, "score": 0, "last_activity_date": 1572471082, "creation_date": 1572471082, "answer_id": 58633918, "question_id": 58632370, "link": "https://stackoverflow.com/questions/58632370/why-this-program-crash-after-i-insert-the-first-2-input/58633918#58633918", "title": "why this program crash after i insert the first 2 input", "body": "<p>I think I found the solution :\nin the function allocaMatrice after the first dynamic-allocation (*matrice=(int **) calloc (*r,sizeof(int));) \ni made a mistake in the second dynamic-allocation, instead of :</p>\n\n<pre><code>for(int i=0;i&lt;*c;i++){\n        *matrice[i]=(int *) malloc ((*c)*sizeof(int));\n}\n</code></pre>\n\n<p>i should have written this:</p>\n\n<pre><code>for(int i=0;i&lt;*c;i++){\n        (*matrice)[i]=(int *) malloc ((*c)*sizeof(int));\n}   \n</code></pre>\n\n<p>So the final progam would be this:\n    #include \n    #include </p>\n\n<pre><code>using namespace std;\n\nvoid allocaMatrice(int *** matrice,int  &amp;r,int &amp;c);\nvoid leggiMatrice(int ** matrice,int r,int c);\nvoid scriviMatrice(int ** matrice,int r,int c);\nvoid deallocaMatrice(int ** matrice,int r);\n\nint main (){\n   int **matrice;\n   int r, c;\n   allocaMatrice(&amp;matrice,r,c);\n   leggiMatrice(matrice,r,c);\n   scriviMatrice(matrice,r,c);\n   deallocaMatrice(matrice,r);\n\n   cin.get();\n   return 0;\n}\n\nvoid allocaMatrice(int *** matrice,int  &amp;r,int &amp;c){\n    int i;\n    cout&lt;&lt;\"Dimmi il numero di righe della matrice\"&lt;&lt;endl;\n    cin&gt;&gt;r;\n    while(cin.get()!='\\n');\n    cout&lt;&lt;\"Dimmi il numero di colonne della matrice\"&lt;&lt;endl;\n    cin&gt;&gt;c;\n    while(cin.get()!='\\n');\n\n   *matrice=(int **) calloc (r, sizeof(int*));\n   cout&lt;&lt;\"c\";\n   for(i=0;i&lt;c;i++){\n       (*matrice)[i]=(int *) calloc (c,sizeof(int));\n   }    \n}\n\nvoid leggiMatrice(int ** matrice,int r,int c){\n    for(int i=0;i&lt;r;i++){\n        for(int j=0;j&lt;c;j++){\n            cout&lt;&lt;\"Dimmi l'elemeno alla riga \"&lt;&lt;i+1&lt;&lt;\" e alla colonna     \"&lt;&lt;j+1&lt;&lt;endl;\n            cin&gt;&gt;matrice[i][j];\n            while(cin.get()!='\\n');\n        }\n    }\n}\n\nvoid scriviMatrice(int ** matrice,int r,int c){\n\n    for(int i=0;i&lt;r;i++){\n        for(int j=0;j&lt;c;j++){\n            cout&lt;&lt;matrice[i][j]&lt;&lt;\"\\t\";\n        }  \n        cout&lt;&lt;endl;;\n    }\n\n}\n\nvoid deallocaMatrice(int ** matrice,int r){\n    int i;\n    for(i=0;i&lt;r;i++){\n        free((*matrice)+1);\n    }\n    free(matrice);\n}\n</code></pre>\n"}], "owner": {"reputation": 37, "user_id": 12299255, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2b0f1726b1125d216621cb573d505d2?s=128&d=identicon&r=PG&f=1", "display_name": "ric", "link": "https://stackoverflow.com/users/12299255/ric"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "answer_count": 3, "score": -1, "last_activity_date": 1572471082, "creation_date": 1572463350, "question_id": 58632370, "link": "https://stackoverflow.com/questions/58632370/why-this-program-crash-after-i-insert-the-first-2-input", "title": "why this program crash after i insert the first 2 input", "body": "<p>i have to do a dynamic-allocation (double-pointer) in a function and then i have to put in the matrix some number and then deallocate it</p>\n\n<p>i have also tried to write **matrice instead of *(matrice[i]) in first function when i have to create a matrix after the first dynamic-allocation but it is always wrong and in this case the program exit after i insert the first line of the matrix</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;stdlib.h&gt;\n\nusing namespace std;\n\nvoid allocaMatrice(int *** matrice,int * r,int * c);\nvoid leggiMatrice(int ** matrice,int r,int c);\nvoid scriviMatrice(int ** matrice,int r,int c);\nvoid deallocaMatrice(int ** matrice,int r);\n\nint main (){\nint **matrice;\n    int r, c;\n    allocaMatrice(&amp;matrice,&amp;r,&amp;c);\n    leggiMatrice(matrice,r,c);\n    scriviMatrice(matrice,r,c);\n    deallocaMatrice(matrice,r);\n\n    cin.get();\n    return 0;\n}\n\nvoid allocaMatrice(int *** matrice,int * r,int * c){\n    cout&lt;&lt;\"Dimmi il numero di righe della matrice\"&lt;&lt;endl;\n    cin&gt;&gt;*r;\n    while(cin.get()!='\\n');\n    cout&lt;&lt;\"Dimmi il numero di colonne della matrice\"&lt;&lt;endl;\n    cin&gt;&gt;*c;\n    while(cin.get()!='\\n');\n\n    *matrice=(int **) calloc (*r,sizeof(int));\n\n    for(int i=0;i&lt;*c;i++){\n        *matrice[i]=(int *) malloc ((*c)*sizeof(int));\n    }   \n}\n\nvoid leggiMatrice(int ** matrice,int r,int c){\n    for(int i=0;i&lt;r;i++){\n        for(int j=0;j&lt;c;j++){\n           cout&lt;&lt;\"Dimmi l'elemeno alla riga e colonna corrente\"&lt;&lt;endl;\n            cin&gt;&gt;matrice[i][j];\n            while(cin.get()!='\\n');\n        }\n    }\n}\n\nvoid scriviMatrice(int ** matrice,int r,int c){\n\nfor(int i=0;i&lt;r;i++){\n    for(int j=0;j&lt;c;j++){\n        cout&lt;&lt;matrice[i][j]&lt;&lt;\"\\t\";\n    }\n    cout&lt;&lt;endl;;\n}\n\n}\n\nvoid deallocaMatrice(int ** matrice,int r){\n    int i;\n    for(i=0;i&lt;r;i++){\n       free((*matrice)+1);\n    }\n    free(matrice);\n}\n</code></pre>\n\n<p>the debug error is \"Program received signal SIGSEGV, Segmentation fault\"</p>\n"}, {"tags": ["c++", "vector", "percentage"], "comments": [{"owner": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 0, "creation_date": 1572463267, "post_id": 58632334, "comment_id": 103571680, "body": "Sum the values, then divide each value by the sum, and then multiply the result by 100, and push_back that result into <code>b</code>."}, {"owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "edited": false, "score": 0, "creation_date": 1572463302, "post_id": 58632334, "comment_id": 103571698, "body": "Do you know how to add the elements of the vector to get a total? Do you know how to divide each element by the total to get a percentage? Do you know how to add those results to an output? Where are you running into a problem?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1572463678, "post_id": 58632334, "comment_id": 103571850, "body": "Quite often the way you would do something in a computer is the same as you would do it with a pen, and when it isn&#39;t starting with the pen approach at least gives you something you can experiment with to find a better path."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 12293276, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-XzBpHc_5YmY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdiaC8uvYmaH8d6-2hScj4IrKPxOg/photo.jpg?sz=128", "display_name": "Williamwyn", "link": "https://stackoverflow.com/users/12293276/williamwyn"}, "edited": false, "score": 0, "creation_date": 1572471013, "post_id": 58632495, "comment_id": 103574776, "body": "Thank you. May I ask if it is possible to output put a float-type array?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user10957435"}, "reply_to_user": {"reputation": 13, "user_id": 12293276, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-XzBpHc_5YmY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdiaC8uvYmaH8d6-2hScj4IrKPxOg/photo.jpg?sz=128", "display_name": "Williamwyn", "link": "https://stackoverflow.com/users/12293276/williamwyn"}, "edited": false, "score": 0, "creation_date": 1572471140, "post_id": 58632495, "comment_id": 103574815, "body": "You&#39;re saying create a new array instead of in place? Yeah, should be fine. If it is a <code>std::vector</code> you should be able to use <code>percentages.push_back(...)</code> instead of <code>percentage = ...</code>"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user10957435"}, "is_accepted": false, "score": 0, "last_activity_date": 1572464002, "creation_date": 1572464002, "answer_id": 58632495, "question_id": 58632334, "link": "https://stackoverflow.com/questions/58632334/how-to-calculate-the-percentage-of-a-single-element-in-the-sum-of-all-elements-i/58632495#58632495", "title": "How to calculate the percentage of a single element in the sum of all elements in a vector&lt;float&gt;", "body": "<p>You need to first sum the whole array first like this:</p>\n\n<pre><code>float sum = 0;\nfor(size_t i =0; i&lt;a.size(); i++) {\n    // add to sum. I'll let you figure this part out\n}\n</code></pre>\n\n<p>Then, once you know the <code>sum</code>, you simple need to loop again and divide each variable in the vector/array by <code>sum</code>. I'll let you figure that part out too.</p>\n\n<hr>\n\n<p>Edit: Actually, I was wrong. This will give you a probability, not a true percentage. It you want the percentage, then you will need to multiply by 100. This converts things like 0.05 into 5 (% is implied). You can do this in the same loop as the original division by doing something like this:</p>\n\n<pre><code>percentage = (item / sum) * 100; // () not necessary here, I think, but just for clarity...\n</code></pre>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user10957435"}, "edited": false, "score": 0, "creation_date": 1572464345, "post_id": 58632516, "comment_id": 103572148, "body": "An answer that uses the STL. I like it. However, I feel like there is an STL algorithm that does a <code>foreach</code> as well that could simplify the loop."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1572464753, "post_id": 58632516, "comment_id": 103572309, "body": "@Chipster:  The loop is simple, so I think any use of looping STL algorithms would produce a negligible effect or make the code more readable. :-("}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1572465567, "post_id": 58632516, "comment_id": 103572659, "body": "Do note that your call to <code>std::accumulate</code> won&#39;t compile.  You need to supply an initial value as the third parameter. <code>float total = std::accumulate(a.begin(), a.end(), 0.0f);</code> is what you need in this case."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1572467231, "post_id": 58632516, "comment_id": 103573278, "body": "Added initial value per recommendation from Nathan Oliver."}, {"owner": {"reputation": 13, "user_id": 12293276, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-XzBpHc_5YmY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdiaC8uvYmaH8d6-2hScj4IrKPxOg/photo.jpg?sz=128", "display_name": "Williamwyn", "link": "https://stackoverflow.com/users/12293276/williamwyn"}, "edited": false, "score": 0, "creation_date": 1572468100, "post_id": 58632516, "comment_id": 103573636, "body": "@ThomasMatthews Thank you so much. I have another question that the output of your code &quot;percentage&quot; is in type float, is it possible to output a float type array?"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1572475221, "post_id": 58632516, "comment_id": 103576045, "body": "Yes, it is possible to output a float array.  Use a loop to print out each element and <code>cout</code>.  See also <code>std::set_precision</code>.    If you want something challenging use an <i>output iterator</i> for the stream."}], "tags": [], "owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "is_accepted": true, "score": 1, "last_activity_date": 1572467203, "last_edit_date": 1572467203, "creation_date": 1572464125, "answer_id": 58632516, "question_id": 58632334, "link": "https://stackoverflow.com/questions/58632334/how-to-calculate-the-percentage-of-a-single-element-in-the-sum-of-all-elements-i/58632516#58632516", "title": "How to calculate the percentage of a single element in the sum of all elements in a vector&lt;float&gt;", "body": "<p>First you need to calculate the <em>total</em> or sum:  </p>\n\n<pre><code>float total = std::accumulate(a.begin(), a.end(), 0.0f);\n</code></pre>\n\n<p>Next, you need to calculate the percentage of each item:  </p>\n\n<pre><code>const unsigned int quantity = a.size();\nfor (unsigned int i = 0; i &lt; quantity; ++i)\n{\n  float percentage = (a[i] * 100.0f) / total;\n  cout &lt;&lt; percentage &lt;&lt; \", \";\n}\ncout &lt;&lt; endl;\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 12293276, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-XzBpHc_5YmY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdiaC8uvYmaH8d6-2hScj4IrKPxOg/photo.jpg?sz=128", "display_name": "Williamwyn", "link": "https://stackoverflow.com/users/12293276/williamwyn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 180, "favorite_count": 0, "accepted_answer_id": 58632516, "answer_count": 2, "score": 1, "last_activity_date": 1572478172, "creation_date": 1572463175, "last_edit_date": 1572478172, "question_id": 58632334, "link": "https://stackoverflow.com/questions/58632334/how-to-calculate-the-percentage-of-a-single-element-in-the-sum-of-all-elements-i", "title": "How to calculate the percentage of a single element in the sum of all elements in a vector&lt;float&gt;", "body": "<p>I have got a\n <code>vector&lt;float&gt;a = {1,2,3,4,5,6,7,8,9}</code>\nand for each element I want to get the percentage of each value within the total sum.\nWhich means the final result should be like \n<code>vector&lt;float&gt;b = {2.2%,4.4%,6.6%,8.8,11.1%,13.3%,15.6%,17.8%,20%}</code></p>\n\n<p>The size of the array is not certain. The above is just an example.</p>\n"}, {"tags": ["c++", "windows", "certificate"], "comments": [{"owner": {"reputation": 81087, "user_id": 104458, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/cc46b8a10ecb92e61aaeb1efe436a0c8?s=128&d=identicon&r=PG", "display_name": "selbie", "link": "https://stackoverflow.com/users/104458/selbie"}, "edited": false, "score": 0, "creation_date": 1572464154, "post_id": 58632317, "comment_id": 103572060, "body": "Code signing validation?  Where in the certificate store is your certificate located?"}, {"owner": {"reputation": 4836, "user_id": 222651, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d2b59170cac71c6c8746afc01ce537dc?s=128&d=identicon&r=PG", "display_name": "Deep", "link": "https://stackoverflow.com/users/222651/deep"}, "reply_to_user": {"reputation": 81087, "user_id": 104458, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/cc46b8a10ecb92e61aaeb1efe436a0c8?s=128&d=identicon&r=PG", "display_name": "selbie", "link": "https://stackoverflow.com/users/104458/selbie"}, "edited": false, "score": 0, "creation_date": 1572465018, "post_id": 58632317, "comment_id": 103572424, "body": "Root certificate of signing cert is in &quot;Trusted Root Certification Authorities\\Certificates&quot;"}, {"owner": {"reputation": 81087, "user_id": 104458, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/cc46b8a10ecb92e61aaeb1efe436a0c8?s=128&d=identicon&r=PG", "display_name": "selbie", "link": "https://stackoverflow.com/users/104458/selbie"}, "edited": false, "score": 1, "creation_date": 1572465270, "post_id": 58632317, "comment_id": 103572530, "body": "signtool.exe with the verify option gives the same result?"}, {"owner": {"reputation": 4836, "user_id": 222651, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d2b59170cac71c6c8746afc01ce537dc?s=128&d=identicon&r=PG", "display_name": "Deep", "link": "https://stackoverflow.com/users/222651/deep"}, "reply_to_user": {"reputation": 81087, "user_id": 104458, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/cc46b8a10ecb92e61aaeb1efe436a0c8?s=128&d=identicon&r=PG", "display_name": "selbie", "link": "https://stackoverflow.com/users/104458/selbie"}, "edited": false, "score": 0, "creation_date": 1572465935, "post_id": 58632317, "comment_id": 103572786, "body": "signtool.exe gives &quot;Successfully verified:&quot;  zero warning or error."}, {"owner": {"reputation": 4836, "user_id": 222651, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d2b59170cac71c6c8746afc01ce537dc?s=128&d=identicon&r=PG", "display_name": "Deep", "link": "https://stackoverflow.com/users/222651/deep"}, "reply_to_user": {"reputation": 81087, "user_id": 104458, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/cc46b8a10ecb92e61aaeb1efe436a0c8?s=128&d=identicon&r=PG", "display_name": "selbie", "link": "https://stackoverflow.com/users/104458/selbie"}, "edited": false, "score": 0, "creation_date": 1572466354, "post_id": 58632317, "comment_id": 103572951, "body": "Update: &quot;signtool.exe verify /pa /v filepath&quot; passed but &quot;signtool.exe verify filepath&quot; filed with &quot;SignTool Error: A certificate chain processed, but terminated in a root certificate which is not trusted by the trust provider.&quot; When I open signing cert it looks fine and I get message &quot;Certificate is okay&quot; . Why would that be?"}], "owner": {"reputation": 4836, "user_id": 222651, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d2b59170cac71c6c8746afc01ce537dc?s=128&d=identicon&r=PG", "display_name": "Deep", "link": "https://stackoverflow.com/users/222651/deep"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 83, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1572463101, "creation_date": 1572463101, "question_id": 58632317, "link": "https://stackoverflow.com/questions/58632317/getting-trust-e-no-signer-cert-from-winverifytrust", "title": "Getting TRUST_E_NO_SIGNER_CERT from WinVerifyTrust", "body": "<p>I am getting TRUST_E_NO_SIGNER_CERT from <a href=\"https://docs.microsoft.com/en-us/windows/win32/api/wintrust/nf-wintrust-winverifytrustex\" rel=\"nofollow noreferrer\">WinVerifyTrustEx</a>. error code is \"0x80096002\" and message is \"The certificate for the signer of the message is invalid or not found.\" </p>\n\n<p>I checked that certificate is fine and it is trusted. Exporting and opening up signing certificate I can see that Certificate is okay. Can somebody help me understand what can cause WinVerifyTrustEx to return TRUST_E_NO_SIGNER_CERT?</p>\n\n<pre><code> WINTRUST_FILE_INFO fileInfo;\n    ZeroMemory(&amp;fileInfo, sizeof(fileInfo));\n    fileInfo.cbStruct = sizeof(fileInfo);\n    fileInfo.pcwszFilePath = filePath;\n\n    CERT_STRONG_SIGN_PARA strongSignParam;\n    ZeroMemory(&amp;strongSignParam, sizeof(strongSignParam));\n    strongSignParam.cbSize = sizeof(strongSignParam);\n    strongSignParam.dwInfoChoice = CERT_STRONG_SIGN_OID_INFO_CHOICE;\n    strongSignParam.pszOID = szOID_CERT_STRONG_SIGN_OS_1;\n\n    WINTRUST_SIGNATURE_SETTINGS signatureSettings;\n    ZeroMemory(&amp;signatureSettings, sizeof(signatureSettings));\n    signatureSettings.cbStruct = sizeof(signatureSettings);\n    signatureSettings.pCryptoPolicy = &amp;strongSignParam;\n\n    WINTRUST_DATA_WIN8 wintrustData;\n    ZeroMemory(&amp;wintrustData, sizeof(wintrustData));\n    wintrustData.cbStruct = sizeof(wintrustData);\n    wintrustData.pSignatureSettings = &amp;signatureSettings;\n    wintrustData.dwUIChoice = WTD_UI_NONE;  \n    wintrustData.fdwRevocationChecks = WTD_REVOKE_WHOLECHAIN;  \n    wintrustData.dwUnionChoice = WTD_CHOICE_FILE;  \n    wintrustData.pFile = &amp;fileInfo;  \n    wintrustData.dwStateAction = WTD_STATEACTION_VERIFY; \n    wintrustData.dwProvFlags =  WTD_REVOCATION_CHECK_CHAIN_EXCLUDE_ROOT;\n\n    GUID guidGenericVerifyV2 = WINTRUST_ACTION_GENERIC_VERIFY_V2;\n\n    HRESULT hr = WinVerifyTrustEx(static_cast&lt;HWND&gt;(INVALID_HANDLE_VALUE), &amp;guidGenericVerifyV2, &amp;wintrustData);\n</code></pre>\n"}, {"tags": ["python", "c++", "swig"], "answers": [{"comments": [{"owner": {"reputation": 81653, "user_id": 168175, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/qxeUf.jpg?s=128&g=1", "display_name": "Flexo", "link": "https://stackoverflow.com/users/168175/flexo"}, "edited": false, "score": 0, "creation_date": 1572733568, "post_id": 58675832, "comment_id": 103652794, "body": "@paige It&#39;s worth pointing out that what I suspect you&#39;re trying to achieve might well lend itself to neater solutions for a Python/C++ binding generation than either of these options, but it&#39;s hard to say for sure without more detail"}], "tags": [], "owner": {"reputation": 81653, "user_id": 168175, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/qxeUf.jpg?s=128&g=1", "display_name": "Flexo", "link": "https://stackoverflow.com/users/168175/flexo"}, "is_accepted": false, "score": 0, "last_activity_date": 1572733517, "creation_date": 1572733517, "answer_id": 58675832, "question_id": 58632303, "link": "https://stackoverflow.com/questions/58632303/how-to-access-c-typedefd-structures-in-python-with-swig-interface/58675832#58675832", "title": "How to access C++ typedef&#39;d structures in python with SWIG interface", "body": "<p>As a general rule SWIG tries to mirror the behaviour of C as closely as possible in the target language. Sometimes that's a little bit tricky though when there's no general case mapping of typedef semantics into many of the languages SWIG targets. In this particular instance though you can still achieve the behaviour you're looking for in Python, using one of two possible options. To simplify things though you're going to want to be more consistent in your header, so either always typedef the <code>TestN</code> structs, or never typedef them.</p>\n\n<p>Firstly you could write a little bit of extra Python code, inside <code>%pythoncode</code> which makes sure there's an alias for every type in Python that matches what you're expecting. The following interface shows that:</p>\n\n<pre><code>%module test\n\n\n%inline %{\n\nstruct Test {\n    uint8_t uValue;\n};\ntypedef Test TestTypedef;\n\nstruct Test2 {\n    uint8_t uValue;\n};\ntypedef Test2 Test2Typedef;\n\nstruct Test3 {\n    uint8_t uValue;\n};\n typedef Test3 Test3Typedef1, Test3Typedef2;\n\n%}\n\n%pythoncode %{\n  TestTypedef = Test\n  Test2Typedef = Test2\n  Test3Typedef1 = Test3\n  Test3Typedef2 = Test3\n%}\n</code></pre>\n\n<p>The alternative approach however is to do some trickery within the C++ layer. All we have to do in reality is make sure that SWIG generate the interface we want and it's all legal, correct, compilable C++ code. It doesn't matter however if we lie to SWIG about what our C++ code is really like. So in practice if we claim that each of our typedefs is actually a derived class, but in reality they're simply typedefs then we'll still end up with a perfectly working interface from it. And as a bonus things will mostly be more typesafe in the target language which is probably good:</p>\n\n<pre><code>%module test\n\n\n%{\n// This is what the C++ compiler sees:    \nstruct Test {\n    uint8_t uValue;\n};\ntypedef Test TestTypedef;\n\nstruct Test2 {\n    uint8_t uValue;\n};\ntypedef Test2 Test2Typedef;\n\nstruct Test3 {\n    uint8_t uValue;\n};\ntypedef Test3 Test3Typedef1, Test3Typedef2;\n\n%}\n\n// This is the lie we tell SWIG, but it's compatible with what the C++ code really is doing\nstruct Test {\n    uint8_t uValue;\n};\n\nstruct Test2 {\n    uint8_t uValue;\n};\n\nstruct Test3 {\n    uint8_t uValue;\n};\n\nstruct Test2Typedef : Test2 {};\nstruct Test3Typedef1 : Test3 {};\nstruct Test3Typedef2 : Test3 {};\n</code></pre>\n\n<p>Either of these lets us run this Python code:</p>\n\n<pre><code>import test\n\na = test.Test3Typedef2()\n</code></pre>\n\n<p>If it were me doing this I'd define a macro for the typedef generation:</p>\n\n<pre><code>#ifndef SWIG\n#define MAKE_TYPEDEF(original, renamed) typedef original renamed\n#else\n#define MAKE_TYPEDEF(original, renamed) struct renamed : original {}\n#endif \n</code></pre>\n\n<p>Which could live in a header file then and would allow you to use <code>%include</code> still.</p>\n"}], "owner": {"reputation": 11, "user_id": 11461831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7396f4122c6286486aeec829bfd194e9?s=128&d=identicon&r=PG&f=1", "display_name": "Paige", "link": "https://stackoverflow.com/users/11461831/paige"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 152, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1572733517, "creation_date": 1572463045, "question_id": 58632303, "link": "https://stackoverflow.com/questions/58632303/how-to-access-c-typedefd-structures-in-python-with-swig-interface", "title": "How to access C++ typedef&#39;d structures in python with SWIG interface", "body": "<p>I am trying to configure my SWIG interface to expose all defined typedefs.</p>\n\n<p>Example: For the following in my C++ header file I want my python code to be able to create objects A, B, C, D, E. </p>\n\n<pre><code>//MyHeader.h\nstruct Common\n{\n    uint8_t     eId;\n};\ntypedef Common A, B, C, D, E;\n</code></pre>\n\n<p>I have tested with the following structs in my header file and the objects available through the SWIG interface are Test, Test2Typedef, and Test3Typedef1, but not TestTypedef, Test2, Test3, or Test3Typedef2.</p>\n\n<pre><code>//MyHeader.h\nstruct Test {\n    uint8_t uValue;\n};\ntypedef Test TestTypedef;\n\ntypedef struct Test2 {\n    uint8_t uValue;\n} Test2Typedef;\n\ntypedef struct Test3 {\n    uint8_t uValue;\n} Test3Typedef1, Test3Typedef2;\n\n</code></pre>\n\n<p>I have tried adding the following typedefs to my .i file, and still cannot access TestTypedef:</p>\n\n<pre><code>//MyHeader.i\n%{\n#include \"MyHeader.h\"\ntypedef Test TestTypedef;\n%}\n\ntypedef Test TestTypedef;\n%include \"MyHeader.h\"\n</code></pre>\n"}, {"tags": ["c++", "algorithm"], "comments": [{"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 2, "creation_date": 1572463106, "post_id": 58632285, "comment_id": 103571619, "body": "This is really not a C++ issue -- it is an algorithms/data structure issue.  Once you do this: <code>for(int i = 0; i &lt; N; i++) { for(int j = 0; j &lt; N; j++){</code>, you&#39;ve lost the game in terms of speed, no matter how much you want to tweak the structs."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1572463108, "post_id": 58632285, "comment_id": 103571620, "body": "If the objects you are comparing are both PODs, you probably cannot do better than <code>memcmp()</code>. But, probably <code>operator==</code> does that for you under the hood and is the more sensible choice.."}, {"owner": {"reputation": 1487, "user_id": 4954108, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/35e4ac731500b39e1284406a3e90b765?s=128&d=identicon&r=PG&f=1", "display_name": "rtpax", "link": "https://stackoverflow.com/users/4954108/rtpax"}, "edited": false, "score": 1, "creation_date": 1572463728, "post_id": 58632285, "comment_id": 103571871, "body": "Is there a minimum and maximum <code>erkezes</code> and <code>tavozas</code>? If so, that opens up some options for algorithms."}, {"owner": {"reputation": 357, "user_id": 12117801, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50f0b1a5a3f823ef8adbd669c294bee1?s=128&d=identicon&r=PG&f=1", "display_name": "erdostamasa", "link": "https://stackoverflow.com/users/12117801/erdostamasa"}, "edited": false, "score": 1, "creation_date": 1572464242, "post_id": 58632285, "comment_id": 103572100, "body": "Sorry, I realized this is indeed a generic question, not a specifically c++ one. erkezes and tavozas are both between 1 and 1000000."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1572464371, "post_id": 58632285, "comment_id": 103572157, "body": "It would be good if you changed the variable names to english. Having varible names that have no meaning to me makes reading the code difficult to a point that honestly I didnt even bother to try to understand it in every detail"}, {"owner": {"reputation": 357, "user_id": 12117801, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50f0b1a5a3f823ef8adbd669c294bee1?s=128&d=identicon&r=PG&f=1", "display_name": "erdostamasa", "link": "https://stackoverflow.com/users/12117801/erdostamasa"}, "edited": false, "score": 1, "creation_date": 1572464526, "post_id": 58632285, "comment_id": 103572216, "body": "I would like to repost this question in an algorithm/data structure topic but as I&#39;m not a native speaker, I don&#39;t know how to phrase my question correctly. Could you give me some tips?"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1572464569, "post_id": 58632285, "comment_id": 103572226, "body": "you dont have to repost anything, simply change the c++ tag with the algorithm one. Or perhaps leave the c++ tag as you already have an implementation in c++"}, {"owner": {"reputation": 357, "user_id": 12117801, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50f0b1a5a3f823ef8adbd669c294bee1?s=128&d=identicon&r=PG&f=1", "display_name": "erdostamasa", "link": "https://stackoverflow.com/users/12117801/erdostamasa"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1572464578, "post_id": 58632285, "comment_id": 103572231, "body": "@formerlyknownas_463035818 you are right, I will change them to English. Sorry!"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1572464588, "post_id": 58632285, "comment_id": 103572233, "body": "added the tag for you"}, {"owner": {"reputation": 11552, "user_id": 8112138, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f3b1ddf31abbf37d5fe71ad387e2772c?s=128&d=identicon&r=PG&f=1", "display_name": "Primusa", "link": "https://stackoverflow.com/users/8112138/primusa"}, "edited": false, "score": 1, "creation_date": 1572465014, "post_id": 58632285, "comment_id": 103572421, "body": "Break each person into an open (+1) and a close (-1) event. Let&#39;s say we had an array <code>arr</code> of events, where if a person had datestamps <code>[L, R]</code> then we have <code>arr[L] += 1</code> and <code>arr[R + 1] -= 1</code>. The culmulative sum of the array will result in an array where <code>arr[i]</code> is the number of people with a meeting a time <code>i</code>. The number of people who  intersect <code>[L, R]</code> is simply the number of people who already had a meeting at <code>L</code> (<code>arr[L]</code>) plus the number of number of open events on <code>[L, R]</code>. With preprocessing both of these can be computed in <code>O(1)</code>."}, {"owner": {"reputation": 357, "user_id": 12117801, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50f0b1a5a3f823ef8adbd669c294bee1?s=128&d=identicon&r=PG&f=1", "display_name": "erdostamasa", "link": "https://stackoverflow.com/users/12117801/erdostamasa"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1572465115, "post_id": 58632285, "comment_id": 103572465, "body": "@formerlyknownas_463035818 Thanks for the tag, I cleaned up the code! I hope it is more clear now."}, {"owner": {"reputation": 357, "user_id": 12117801, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50f0b1a5a3f823ef8adbd669c294bee1?s=128&d=identicon&r=PG&f=1", "display_name": "erdostamasa", "link": "https://stackoverflow.com/users/12117801/erdostamasa"}, "reply_to_user": {"reputation": 11552, "user_id": 8112138, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f3b1ddf31abbf37d5fe71ad387e2772c?s=128&d=identicon&r=PG&f=1", "display_name": "Primusa", "link": "https://stackoverflow.com/users/8112138/primusa"}, "edited": false, "score": 1, "creation_date": 1572465162, "post_id": 58632285, "comment_id": 103572477, "body": "@Primusa This sounds interesting, I need a little time while I try to understand it. I&#39;m still a beginner so this process will be a little slower for me"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1572465202, "post_id": 58632285, "comment_id": 103572502, "body": "@Primuse please post answers as answers"}, {"owner": {"reputation": 11552, "user_id": 8112138, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f3b1ddf31abbf37d5fe71ad387e2772c?s=128&d=identicon&r=PG&f=1", "display_name": "Primusa", "link": "https://stackoverflow.com/users/8112138/primusa"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1572465420, "post_id": 58632285, "comment_id": 103572591, "body": "@formerlyknownas_463035818 i don&#39;t really know enough cpp to make an adequate answer, but if i throw the idea out there maybe someone who does will :)"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "reply_to_user": {"reputation": 11552, "user_id": 8112138, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f3b1ddf31abbf37d5fe71ad387e2772c?s=128&d=identicon&r=PG&f=1", "display_name": "Primusa", "link": "https://stackoverflow.com/users/8112138/primusa"}, "edited": false, "score": 2, "creation_date": 1572465516, "post_id": 58632285, "comment_id": 103572641, "body": "@Primusa the quesiton is about the algorithm, look at my answer, the little code I added is just to illustrate what I am saying, I guess pseudo code would be fine as well"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "reply_to_user": {"reputation": 11552, "user_id": 8112138, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f3b1ddf31abbf37d5fe71ad387e2772c?s=128&d=identicon&r=PG&f=1", "display_name": "Primusa", "link": "https://stackoverflow.com/users/8112138/primusa"}, "edited": false, "score": 0, "creation_date": 1572533981, "post_id": 58632285, "comment_id": 103597236, "body": "@Primusa The key to all of this is to sort the data in some strategic way, and then linearly process the sorted data.  Sorting is logarithmic using <code>std::sort</code>, thus cutting the time down drastically."}, {"owner": {"reputation": 357, "user_id": 12117801, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50f0b1a5a3f823ef8adbd669c294bee1?s=128&d=identicon&r=PG&f=1", "display_name": "erdostamasa", "link": "https://stackoverflow.com/users/12117801/erdostamasa"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1572711581, "post_id": 58632285, "comment_id": 103647629, "body": "@PaulMcKenzie do you have any idea how should I sort the data?"}, {"owner": {"reputation": 357, "user_id": 12117801, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50f0b1a5a3f823ef8adbd669c294bee1?s=128&d=identicon&r=PG&f=1", "display_name": "erdostamasa", "link": "https://stackoverflow.com/users/12117801/erdostamasa"}, "reply_to_user": {"reputation": 11552, "user_id": 8112138, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f3b1ddf31abbf37d5fe71ad387e2772c?s=128&d=identicon&r=PG&f=1", "display_name": "Primusa", "link": "https://stackoverflow.com/users/8112138/primusa"}, "edited": false, "score": 1, "creation_date": 1572715834, "post_id": 58632285, "comment_id": 103648835, "body": "@Primusa what do you mean by &quot;both of these can be computed in O(1)&quot; ?"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "reply_to_user": {"reputation": 11552, "user_id": 8112138, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f3b1ddf31abbf37d5fe71ad387e2772c?s=128&d=identicon&r=PG&f=1", "display_name": "Primusa", "link": "https://stackoverflow.com/users/8112138/primusa"}, "edited": false, "score": 0, "creation_date": 1572723299, "post_id": 58632285, "comment_id": 103650640, "body": "@Primusa -- Forget about writing a program for now.  Take out a pencil and paper, look at the data you have in the question.  Can you arrange it in a way where the problem becomes easier?  What if you could put the &quot;1 10&quot; first in the list, then &quot;2 3&quot;, etc.?  Then process this list in some way, now that the start times are sorted.  If that doesn&#39;t work, then sort by a different criteria, again, all on paper first.  That&#39;s how these problems are solved -- not by writing a program and looking at loops, but by visualizing how to solve the problem on paper using pictures, lines, etc."}, {"owner": {"reputation": 11552, "user_id": 8112138, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f3b1ddf31abbf37d5fe71ad387e2772c?s=128&d=identicon&r=PG&f=1", "display_name": "Primusa", "link": "https://stackoverflow.com/users/8112138/primusa"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1572726688, "post_id": 58632285, "comment_id": 103651372, "body": "@PaulMcKenzie you do realize that I&#39;m not the one asking the question right?"}, {"owner": {"reputation": 11552, "user_id": 8112138, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f3b1ddf31abbf37d5fe71ad387e2772c?s=128&d=identicon&r=PG&f=1", "display_name": "Primusa", "link": "https://stackoverflow.com/users/8112138/primusa"}, "edited": false, "score": 0, "creation_date": 1572726805, "post_id": 58632285, "comment_id": 103651399, "body": "@erdostamasa both of these can be computed in <code>O(1)</code> means that they are both constant time operations. In the soution I described above the number of people who had a meeting starting at <code>L</code> is just <code>arr[L]</code> (getting an element in an array happens in constant time), and the number of open events in <code>[L, R]</code> can be found by preprocessing with prefix sums and then querying each sum in <code>O(1)</code>."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1572737725, "post_id": 58632285, "comment_id": 103653514, "body": "Yes, sorry, the comments were meant for @erdostamasa."}], "answers": [{"comments": [{"owner": {"reputation": 357, "user_id": 12117801, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50f0b1a5a3f823ef8adbd669c294bee1?s=128&d=identicon&r=PG&f=1", "display_name": "erdostamasa", "link": "https://stackoverflow.com/users/12117801/erdostamasa"}, "edited": false, "score": 1, "creation_date": 1572464347, "post_id": 58632493, "comment_id": 103572149, "body": "Thanks for the tips, I will think about this! Yes, my solution is good for small samples but completely useless for bigger data sizes. I need a radically different approach indeed."}], "tags": [], "owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "is_accepted": false, "score": 2, "last_activity_date": 1572464002, "creation_date": 1572464002, "answer_id": 58632493, "question_id": 58632285, "link": "https://stackoverflow.com/questions/58632285/how-to-compare-structs-faster-who-met-the-most-people-problem/58632493#58632493", "title": "How to compare structs faster (who met the most people problem)", "body": "<p>I will only give you a starting point...</p>\n\n<p>If I had to solve it, i would start by defining the following structure:</p>\n\n<pre><code> struct come_or_go {\n      size_t person_index;\n      int time;\n      bool arrival; // true for arrival, false for leaving\n };\n</code></pre>\n\n<p>Next I would read the input into a <code>vector&lt;come_or_go&gt;</code> with two entries for each person. One when it arrives and one when it leaves. Next I'd sort that vector with respect to the elements <code>time</code> member. Finally I'd try to come up with a clever idea that requires to traverse this vector only once.</p>\n\n<p>So far thats all I can provide, maybe I will update when I can give more hints. Hope this helps to push you into a differernt direction, because your brute force simply looses by complexity. Instead of trying to get details of it \"faster\" you need to change your overall approach.</p>\n"}, {"tags": [], "owner": {"reputation": 357, "user_id": 12117801, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50f0b1a5a3f823ef8adbd669c294bee1?s=128&d=identicon&r=PG&f=1", "display_name": "erdostamasa", "link": "https://stackoverflow.com/users/12117801/erdostamasa"}, "is_accepted": true, "score": 0, "last_activity_date": 1574177465, "creation_date": 1574177465, "answer_id": 58937568, "question_id": 58632285, "link": "https://stackoverflow.com/questions/58632285/how-to-compare-structs-faster-who-met-the-most-people-problem/58937568#58937568", "title": "How to compare structs faster (who met the most people problem)", "body": "<p>I managed to do it by creating a vector and storing the 100.000 points of time in it.\nI added 1 to each index where a person came in, stayed, and left.</p>\n\n<p>Working with 100.000 long vectors, I managed to solve this problem with only one for loop se it ran reasonably fast.</p>\n"}], "owner": {"reputation": 357, "user_id": 12117801, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50f0b1a5a3f823ef8adbd669c294bee1?s=128&d=identicon&r=PG&f=1", "display_name": "erdostamasa", "link": "https://stackoverflow.com/users/12117801/erdostamasa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 103, "favorite_count": 0, "accepted_answer_id": 58937568, "answer_count": 2, "score": 0, "last_activity_date": 1574177465, "creation_date": 1572462909, "last_edit_date": 1572465332, "question_id": 58632285, "link": "https://stackoverflow.com/questions/58632285/how-to-compare-structs-faster-who-met-the-most-people-problem", "title": "How to compare structs faster (who met the most people problem)", "body": "<p>I will start by saying that I'm not a native speaker so please excuse me my grammatical errors.</p>\n\n<p>I'm an university student and my task is the following: I have an input that tells me the number of people, and then every line contains the time of arrival and the time of exit, both natural numbers separated by a space.</p>\n\n<p>I have to find the (index of the) person who met the most people and then output the number of meetings that person had.</p>\n\n<p>Example input and output:</p>\n\n<p><a href=\"https://i.stack.imgur.com/6E0Nj.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/6E0Nj.png\" alt=\"enter image description here\"></a></p>\n\n<p>If person A has datestamps of 3 and 6 and person B has 6 and 7, it is still considered a meeting.</p>\n\n<p>I already solved this problem with a fixed size array of structs that compares every person to everybody else to find out the number of meetings and then searched for the person with the most meetings.</p>\n\n<p>My problem is that this code is very slow and I must hadle inputs consisting of maximum 200000 people and timestamps ranging from 1 to 1000000.</p>\n\n<p>This - compare everyone with everyone else - solution works for small sample sizes, but there is no way it can work for 200000 structs.\nAlso, this code has to successfully run under 0.2 sec.</p>\n\n<p>What is a faster way to solve this?</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nusing namespace std;\n\nconst int maxN = 20000;\n\nstruct Data {\n    int arrival;\n    int departure;\n    int meetings = -1;\n};\n\nint main()\n{\n    Data x[maxN];\n    int N;\n\n    ///input\n    cin &gt;&gt; N;\n    for (int i = 0; i &lt; N; i++) {\n        cin &gt;&gt; x[i].arrival;\n        cin &gt;&gt; x[i].departure;\n    }\n\n    for(int i = 0; i &lt; N; i++) {\n        for(int j = 0; j &lt; N; j++){\n            if ( ((x[i].arrival &gt;= x[j].arrival &amp;&amp; x[i].arrival &lt;= x[j].departure) || (x[i].departure &gt;= x[j].arrival &amp;&amp; x[i].departure &lt;= x[j].departure)) ||  ((x[j].arrival &gt;= x[i].arrival &amp;&amp; x[j].arrival &lt;= x[i].departure) || (x[j].departure &gt;= x[i].arrival &amp;&amp; x[j].departure &lt;= x[i].departure)) ) {\n                x[i].meetings++;\n\n            }\n        }\n    }\n\n    int maxInd = 0;\n    int maximum = 0;\n    for(int i = 0; i &lt; N; i++) {\n        if (x[i].meetings &gt; maximum){\n            maxInd = i;\n            maximum = x[i].meetings;\n        }\n    }\n\n    ///output\n    cout &lt;&lt; maxInd+1 &lt;&lt; endl;\n    cout &lt;&lt; maximum &lt;&lt; endl;\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "conio"], "comments": [{"owner": {"reputation": 12749, "user_id": 7976805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92a559df8b4b287aad23724b4c66d67c?s=128&d=identicon&r=PG&f=1", "display_name": "Yksisarvinen", "link": "https://stackoverflow.com/users/7976805/yksisarvinen"}, "edited": false, "score": 4, "creation_date": 1572462815, "post_id": 58632255, "comment_id": 103571491, "body": "Please don&#39;t spam tags. It will never help you."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 2, "creation_date": 1572462910, "post_id": 58632255, "comment_id": 103571542, "body": "You use a third party library. C++ is too low-level to know what a cursor is."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1572462958, "post_id": 58632255, "comment_id": 103571560, "body": "<i>I am not able to figure out how to move cursor to random position</i> -- And neither does standard C++."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1572463083, "post_id": 58632255, "comment_id": 103571613, "body": "conio.h suggests a Microsoft OS is the target. I believe there is at least one port or off-shoot of <a href=\"https://en.wikipedia.org/wiki/Curses_(programming_library)\" rel=\"nofollow noreferrer\">the Curses library</a> targeting Windows"}, {"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 0, "creation_date": 1572463209, "post_id": 58632255, "comment_id": 103571656, "body": "Try <a href=\"https://code-reference.com/c/conio.h/gotoxy\" rel=\"nofollow noreferrer\"><code>gotoxy()</code></a>?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1572463385, "post_id": 58632255, "comment_id": 103571733, "body": "That would be the go to, but I don&#39;t think it is supported anymore. Prakash, what compiler and version are you using?"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1572465288, "post_id": 58632255, "comment_id": 103572541, "body": "<a href=\"https://www.gnu.org/software/ncurses/ncurses.html\" rel=\"nofollow noreferrer\">gnu.org/software/ncurses/ncurses.html</a>"}], "answers": [{"tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": false, "score": 0, "last_activity_date": 1572463004, "creation_date": 1572463004, "answer_id": 58632297, "question_id": 58632255, "link": "https://stackoverflow.com/questions/58632255/how-can-i-use-cursor-positioning-in-c/58632297#58632297", "title": "How can I use cursor positioning in C++", "body": "<p>There is no standard way to affect the terminal cursor in C++. So, the first step in implementing this is to figure out what system you are targetting, and what API it offers.</p>\n"}], "owner": {"reputation": 1, "user_id": 12299116, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-De40IsF1NCM/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rd2fqBLSjQgX7qjb5lpgUkTE1hXMQ/photo.jpg?sz=128", "display_name": "Prakash Jha", "link": "https://stackoverflow.com/users/12299116/prakash-jha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 143, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1572473689, "creation_date": 1572462769, "last_edit_date": 1572473689, "question_id": 58632255, "link": "https://stackoverflow.com/questions/58632255/how-can-i-use-cursor-positioning-in-c", "title": "How can I use cursor positioning in C++", "body": "<p>I am too confused with console screen. I am not able to figure out how to move cursor to random position. This is my code:</p>\n\n<pre><code>#include&lt;iostream&gt;\n#include&lt;conio.h&gt;\nmain()\n{\n   cout&lt;&lt;\"Hello World\";\n   return 0;\n}\n</code></pre>\n\n<p>I want to move cursor to random position, not at the beginning after pressing Enter.</p>\n"}, {"tags": ["c++", "c++11"], "comments": [{"owner": {"reputation": 541, "user_id": 11940036, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-tLBpBbR78o8/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3ree9N3MhezutNrJbE47t1iqPr77uw/photo.jpg?sz=128", "display_name": "MD.Tabish Mahfuz", "link": "https://stackoverflow.com/users/11940036/md-tabish-mahfuz"}, "edited": false, "score": 0, "creation_date": 1572462587, "post_id": 58632132, "comment_id": 103571395, "body": "T1 and T2 are private in your class and thus you cannot just access them like <code>s1.T1</code>. And for <code>s2.Team()</code>, what are trying to do? You cannot just call a constructor of one class as a member function of another"}, {"owner": {"reputation": 417, "user_id": 4700064, "user_type": "registered", "accept_rate": 39, "profile_image": "https://graph.facebook.com/1015981228429901/picture?type=large", "display_name": "Kirasiris", "link": "https://stackoverflow.com/users/4700064/kirasiris"}, "reply_to_user": {"reputation": 541, "user_id": 11940036, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-tLBpBbR78o8/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3ree9N3MhezutNrJbE47t1iqPr77uw/photo.jpg?sz=128", "display_name": "MD.Tabish Mahfuz", "link": "https://stackoverflow.com/users/11940036/md-tabish-mahfuz"}, "edited": false, "score": 0, "creation_date": 1572462827, "post_id": 58632132, "comment_id": 103571499, "body": "Well, I tried to delete them from there and it still throws me the same error."}, {"owner": {"user_type": "does_not_exist", "display_name": "user10957435"}, "edited": false, "score": 0, "creation_date": 1572462935, "post_id": 58632132, "comment_id": 103571553, "body": "What error do you get specifically?"}, {"owner": {"reputation": 541, "user_id": 11940036, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-tLBpBbR78o8/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3ree9N3MhezutNrJbE47t1iqPr77uw/photo.jpg?sz=128", "display_name": "MD.Tabish Mahfuz", "link": "https://stackoverflow.com/users/11940036/md-tabish-mahfuz"}, "edited": false, "score": 0, "creation_date": 1572463178, "post_id": 58632132, "comment_id": 103571647, "body": "Okay, I&#39;ve provided an example of how you can do this. See if that helps you. Do ask if something is still not clear to you."}], "answers": [{"comments": [{"owner": {"reputation": 417, "user_id": 4700064, "user_type": "registered", "accept_rate": 39, "profile_image": "https://graph.facebook.com/1015981228429901/picture?type=large", "display_name": "Kirasiris", "link": "https://stackoverflow.com/users/4700064/kirasiris"}, "edited": false, "score": 0, "creation_date": 1572463961, "post_id": 58632275, "comment_id": 103571986, "body": "Yes I know how to use that but If I continue doing that it then tells me &#39;use of undeclared identifier T1 , T2&#39; even after declaring it."}, {"owner": {"reputation": 541, "user_id": 11940036, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-tLBpBbR78o8/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3ree9N3MhezutNrJbE47t1iqPr77uw/photo.jpg?sz=128", "display_name": "MD.Tabish Mahfuz", "link": "https://stackoverflow.com/users/11940036/md-tabish-mahfuz"}, "reply_to_user": {"reputation": 417, "user_id": 4700064, "user_type": "registered", "accept_rate": 39, "profile_image": "https://graph.facebook.com/1015981228429901/picture?type=large", "display_name": "Kirasiris", "link": "https://stackoverflow.com/users/4700064/kirasiris"}, "edited": false, "score": 0, "creation_date": 1572464096, "post_id": 58632275, "comment_id": 103572036, "body": "Where have I used <code>T1</code> or <code>T2</code> in this example?"}, {"owner": {"reputation": 417, "user_id": 4700064, "user_type": "registered", "accept_rate": 39, "profile_image": "https://graph.facebook.com/1015981228429901/picture?type=large", "display_name": "Kirasiris", "link": "https://stackoverflow.com/users/4700064/kirasiris"}, "edited": false, "score": 0, "creation_date": 1572464144, "post_id": 58632275, "comment_id": 103572055, "body": "main I&#39;m assuming."}, {"owner": {"reputation": 541, "user_id": 11940036, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-tLBpBbR78o8/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3ree9N3MhezutNrJbE47t1iqPr77uw/photo.jpg?sz=128", "display_name": "MD.Tabish Mahfuz", "link": "https://stackoverflow.com/users/11940036/md-tabish-mahfuz"}, "reply_to_user": {"reputation": 417, "user_id": 4700064, "user_type": "registered", "accept_rate": 39, "profile_image": "https://graph.facebook.com/1015981228429901/picture?type=large", "display_name": "Kirasiris", "link": "https://stackoverflow.com/users/4700064/kirasiris"}, "edited": false, "score": 0, "creation_date": 1572464221, "post_id": 58632275, "comment_id": 103572093, "body": "No, i meant, this code just above, it uses <code>t1</code> and <code>t2</code> and shouldn&#39;t throw any error."}, {"owner": {"reputation": 541, "user_id": 11940036, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-tLBpBbR78o8/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3ree9N3MhezutNrJbE47t1iqPr77uw/photo.jpg?sz=128", "display_name": "MD.Tabish Mahfuz", "link": "https://stackoverflow.com/users/11940036/md-tabish-mahfuz"}, "reply_to_user": {"reputation": 417, "user_id": 4700064, "user_type": "registered", "accept_rate": 39, "profile_image": "https://graph.facebook.com/1015981228429901/picture?type=large", "display_name": "Kirasiris", "link": "https://stackoverflow.com/users/4700064/kirasiris"}, "edited": false, "score": 0, "creation_date": 1572464308, "post_id": 58632275, "comment_id": 103572129, "body": "This code was just to point you out that you were doing it incorrectly like this <code>s2.Team1().setName()</code>"}], "tags": [], "owner": {"reputation": 541, "user_id": 11940036, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-tLBpBbR78o8/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3ree9N3MhezutNrJbE47t1iqPr77uw/photo.jpg?sz=128", "display_name": "MD.Tabish Mahfuz", "link": "https://stackoverflow.com/users/11940036/md-tabish-mahfuz"}, "is_accepted": false, "score": 0, "last_activity_date": 1572490193, "last_edit_date": 1572490193, "creation_date": 1572462857, "answer_id": 58632275, "question_id": 58632132, "link": "https://stackoverflow.com/questions/58632132/how-to-unify-the-scoreboard-class-to-have-team-classes-as-members/58632275#58632275", "title": "How to unify the Scoreboard class to have Team classes as members?", "body": "<p>Since <code>T1</code> and <code>T2</code> are <code>private</code> members of <code>Scoreboard</code>, you cannot directly access them from the object <code>s1</code> of the <code>Scoreboard</code> class. Instead you have to use a setter to assign values ( an object of <code>Team</code> class in your case). </p>\n\n<p>As you've already written a setter, <code>setTeam</code>, just create two teams separately and assign them to the object of Scoreboard class using it. Refer the code below for the example.</p>\n\n<pre><code>Scoreboard s1; \n\n// s1.T1 and s1.T2 will not be available here \n// since they are private in Scoreboard class\n\nTeam t1;\nt1.setName(\"Team 1\");\n\nTeam t2;\nt2.setName(\"Team 2\");\n\ns1.setTeam1(t1);  // Assigning the Team t1 to s1\ns1.setTeam2(t2);  // Assigning the Team t2 to s1\n</code></pre>\n\n<p>This should clear things up for you.</p>\n"}], "owner": {"reputation": 417, "user_id": 4700064, "user_type": "registered", "accept_rate": 39, "profile_image": "https://graph.facebook.com/1015981228429901/picture?type=large", "display_name": "Kirasiris", "link": "https://stackoverflow.com/users/4700064/kirasiris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 35, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1572490193, "creation_date": 1572462222, "question_id": 58632132, "link": "https://stackoverflow.com/questions/58632132/how-to-unify-the-scoreboard-class-to-have-team-classes-as-members", "title": "How to unify the Scoreboard class to have Team classes as members?", "body": "<p>I want to be able to declare statements in int main() like:</p>\n\n<pre><code>Scoreboard s1; //assuming T1 and T2 as public members\n\ns1.T1.setName(\"Dallas Cowboys\");\ns1.T2.setName(\"Houston Texans\");\n\nScoreboard s2; //assuming T1 and T2 as private members passed as parameters accessed with setters and getters\n\ns2.Team1().setName(\"Dallas Cowboys\"); \ns2.Team2().setName(\"Houston Texans\"); \n</code></pre>\n\n<p>That what I have in my main but it currently throws an error of:</p>\n\n<ul>\n<li>No member named T1 in scoreboard</li>\n<li>No member named T2 in scoreboard</li>\n</ul>\n\n<p>The second error comes from the second Scoreboard and throws exactly the same error but with the difference that instead of using T1, T2. It uses Team1(), Team2(). I tried changing their names to T1 &amp; T2 but still its not working :/.</p>\n\n<p>My scoreboard class pretty much just looks like this but I just can not figure out my problem:</p>\n\n<pre><code>class Scoreboard{\n  private:\n    Team T1;\n    Team T2;\n  public:\n    Scoreboard(){\n      T1.setName(\"\"); \n      T2.setName(\"\"); \n    }\n    // Setters\n    void setTeam1(Team team1) { T1 = team1; }\n    void setTeam2(Team team2) { T2 = team2; }\n\n    // Getters\n    Team getTeamOne() const { return T1; }\n    Team getTeamTwo() const { return T2; }\n    // Print current data stored at Student on demand\n    void showScoreboard(){\n      cout &lt;&lt; \"SCOREBOARD CURRENT DATA\" &lt;&lt; endl;\n      cout &lt;&lt; \"Team1                          Visitor\" &lt;&lt; endl;\n      cout &lt;&lt; \" \" &lt;&lt; T1 &lt;&lt; \"\\t\\t\\t\\t\\t\\t\\t\\t\" &lt;&lt; T2 &lt;&lt; endl;\n    }\n};\n</code></pre>\n\n<p>Do you guys have any idea of where my error comes from?</p>\n"}, {"tags": ["c++", "visual-studio", "member-functions"], "comments": [{"owner": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "edited": false, "score": 0, "creation_date": 1572462168, "post_id": 58632103, "comment_id": 103571240, "body": "Triggering a breakpoint doesn&#39;t sound like an error; how are you being informed of this?"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1572462218, "post_id": 58632103, "comment_id": 103571257, "body": "Have you tried running it in your debugger? What did you learn when doing so?"}, {"owner": {"reputation": 35578, "user_id": 3000206, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/BK1fo.jpg?s=128&g=1", "display_name": "Carcigenicate", "link": "https://stackoverflow.com/users/3000206/carcigenicate"}, "edited": false, "score": 0, "creation_date": 1572462333, "post_id": 58632103, "comment_id": 103571303, "body": "A breakpoint most likely means that you&#39;ve clicked on a dot on the left hand margin in your editor which tells the debugger to pause execution there. Either that or its a exception breakpoint in which case double check the message to see what the underlying error was. In either case, the breakpoint isn&#39;t an error. Check the left hand margin next to the code to see if there&#39;s any dots there which indicate a breakpoint."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 2, "creation_date": 1572462380, "post_id": 58632103, "comment_id": 103571325, "body": "Looks like you have a <a href=\"https://en.cppreference.com/w/cpp/language/rule_of_three\" rel=\"nofollow noreferrer\">Rule of Three</a> violation. Need a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> to confirm."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 2, "creation_date": 1572462492, "post_id": 58632103, "comment_id": 103571363, "body": "Breakpoints are also triggered when your program does something that really upsets the system and will lead to a crash. The debugger halts at the site of the crash and allows you to perform a postmortem. The aftermath of a Rule of Three violation often is a crash.,"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1572462627, "post_id": 58632103, "comment_id": 103571410, "body": "Random comments on your code: 1) <code>data = NULL;</code> - No. Please use <code>nullptr</code> in new code (and update old code). 2) <code>if (data) delete[] data;</code> - No. That conditional is completely pointless, <code>delete[]()</code> can handle being passed <code>nullptr</code>, it is a no-op. Get rid of the pointless <code>if</code>. 3) Why are you doing manual memory management in C++ code written in 2019 that is not implementing the guts of a container or similar? Use <code>std::array</code>, <code>std::vector</code> or some other appropriate container, or <i>at least</i> use smart pointers - naked <code>new</code>/<code>delete</code> is a code smell."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 3, "creation_date": 1572462735, "post_id": 58632103, "comment_id": 103571457, "body": "<i>I still do not know what the error is.</i> -- Put a breakpoint in your destructor.  Watch that same pointer value <code>data</code> being deleted twice.  Double deletion error, crash."}], "answers": [{"comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1572462822, "post_id": 58632184, "comment_id": 103571494, "body": "The one you really want is <a href=\"https://stackoverflow.com/questions/4172722/what-is-the-rule-of-three\">What is The Rule of Three?</a>. That said, this would be the duplicate if A) you&#39;re right and B) this question was complete enough to provide a concrete answer"}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1572462972, "post_id": 58632184, "comment_id": 103571563, "body": "@user4581301 True... perhaps better to remove the answer and close as a dupe once it&#39;s confirmed? ... or I can add example ctors/assignment operators for this specific case?"}], "tags": [], "owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "is_accepted": false, "score": 3, "last_activity_date": 1572466150, "last_edit_date": 1572466150, "creation_date": 1572462478, "answer_id": 58632184, "question_id": 58632103, "link": "https://stackoverflow.com/questions/58632103/how-to-solve-error-projectname-has-triggered-breakpoint/58632184#58632184", "title": "How to solve error (projectname has triggered breakpoint)?", "body": "<p>Your <code>AClass</code> member <code>double* data;</code> will be copied here:</p>\n\n<p><code>AClass y = *x;</code></p>\n\n<p>Since you haven't provided copy/move constructors/assignment operators, the raw pointer will be copied <em>as-is</em> in these situations and <code>delete[] data</code> will be done by both <code>x</code> and <code>y</code> in the destructor.</p>\n\n<p>Mandatory read when dealing with raw pointers:\n<a href=\"https://en.cppreference.com/w/cpp/language/rule_of_three\" rel=\"nofollow noreferrer\">https://en.cppreference.com/w/cpp/language/rule_of_three</a></p>\n\n<p>And these:<br>\n<a href=\"https://stackoverflow.com/questions/4172722/what-is-the-rule-of-three\">What is The Rule of Three?</a><br>\n<a href=\"https://stackoverflow.com/questions/4782757/rule-of-three-becomes-rule-of-five-with-c11\">Rule-of-Three becomes Rule-of-Five with C++11?</a></p>\n\n<p>Here's an example implementation of the member functions mentioned in the above articles. It's a little much - and error prone, which is why it's almost always better to use a standard container.</p>\n\n<pre><code>#include &lt;algorithm&gt;\n#include &lt;iostream&gt;\n#include &lt;utility&gt;\n\nclass AClass {\npublic:\n    AClass(size_t len, double val);\n\n    // rule of five:\n    AClass(const AClass&amp; rhs);            // copy constructor\n    AClass(AClass&amp;&amp; rhs);                 // move constructor\n    AClass&amp; operator=(const AClass&amp; rhs); // copy assignment\n    AClass&amp; operator=(AClass&amp;&amp; rhs);      // move assignment\n    ~AClass();\n\nprivate:\n    size_t length; // use an unsigned type since you only accept unsigned values\n    double* data;\n};\n\n// destructor\nAClass::~AClass() {\n    delete[] data;\n}\n\nAClass::AClass(size_t len, double val) : \n    length(len),\n    data(new double[length])\n{\n    std::fill_n(data, length, val);\n}\n\n// copy constructor\nAClass::AClass(const AClass&amp; rhs) :\n    length(rhs.length),\n    data(new double[length])\n{\n    std::copy_n(rhs.data, length, data);\n}\n\n// move constructor\nAClass::AClass(AClass&amp;&amp; rhs) :\n    length(std::exchange(rhs.length, 0)),\n    data(std::exchange(rhs.data, nullptr))\n{}\n\n// copy assignment\nAClass&amp; AClass::operator=(const AClass&amp; rhs) {\n    double* tmpdata = new double[rhs.length];\n    delete[] data;\n    length = rhs.length;\n    data = tmpdata;\n    std::copy_n(rhs.data, length, data);\n    return *this;\n}\n\n// move assignment\nAClass&amp; AClass::operator=(AClass&amp;&amp; rhs) {\n    // leave the destruction up to the moved-from object\n    std::swap(length, rhs.length);\n    std::swap(data, rhs.data);\n    return *this;\n}\n\nint main() {\n    AClass* x = new AClass(10, -1.0);\n    AClass y = *x;\n    delete x;\n}\n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 12293632, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-K1lk95eHZqg/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rd0OjhPV54KUdotwq6i9-XYuqlNvQ/photo.jpg?sz=128", "display_name": "Venom2901", "link": "https://stackoverflow.com/users/12293632/venom2901"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1572466150, "creation_date": 1572462085, "last_edit_date": 1572463752, "question_id": 58632103, "link": "https://stackoverflow.com/questions/58632103/how-to-solve-error-projectname-has-triggered-breakpoint", "title": "How to solve error (projectname has triggered breakpoint)?", "body": "<p>After I run the program I get an error saying projectname has triggered a breakpoint. I still do not know what the error is. I think there's a member function missing but someone help me out?</p>\n\n<pre><code>#include \"AClass.h\"\n#include &lt;iostream&gt;\n\nusing namespace std;\n\nint main()\n{\n    AClass* x = new AClass(10, -1.0);\n    AClass y = *x;\n    delete x;\n    return 0;\n}\n</code></pre>\n\n<p>Code from my cpp file is as follows:</p>\n\n<pre><code>#include \"AClass.h\"\n#include &lt;iostream&gt;\nusing namespace std;\n\n// Constructor\nAClass::AClass(int len, double val)\n    : length(len)\n{\n    if (len &lt; 0) {\n        cout &lt;&lt; \"Invalid data length = \" &lt;&lt; len &lt;&lt; endl;\n        data = NULL;\n    }\n\n    else {\n        data = new double[length];\n        for (int i = 0; i &lt; length; i++)\n            data[i] = val;\n    }\n}\n\n// Destructor\nAClass::~AClass()\n{\n    // delete data if it is not NULL\n    if (data) delete[] data;\n}\n</code></pre>\n"}, {"tags": ["c++", "c++11", "enums", "switch-statement", "enum-class"], "answers": [{"comments": [{"owner": {"reputation": 9958, "user_id": 225186, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/dbc60362bf2df08202ff198e00085a5c?s=128&d=identicon&r=PG", "display_name": "alfC", "link": "https://stackoverflow.com/users/225186/alfc"}, "edited": false, "score": 0, "creation_date": 1572462947, "post_id": 58631945, "comment_id": 103571557, "body": "I found that MSVC doesn&#39;t actually complain about that particularly: <a href=\"https://godbolt.org/z/ScGhhL\" rel=\"nofollow noreferrer\">godbolt.org/z/ScGhhL</a>"}], "tags": [], "owner": {"reputation": 4313, "user_id": 2706707, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BoAxS.gif?s=128&g=1", "display_name": "D&#250;thomhas", "link": "https://stackoverflow.com/users/2706707/d%c3%bathomhas"}, "is_accepted": false, "score": 0, "last_activity_date": 1572461276, "creation_date": 1572461276, "answer_id": 58631945, "question_id": 58631852, "link": "https://stackoverflow.com/questions/58631852/handling-of-switch-enum-class-returns-in-clang-gcc-and-icc-consistently/58631945#58631945", "title": "Handling of switch enum class returns in clang, gcc and icc consistently", "body": "<p>This has nothing to do with <code>enum</code> or <code>switch</code> and everything to do with the compiler\u2019s ability to prove a valid return statement through every path. Some compilers are better at this than others.</p>\n\n<p>The correct way is to just add a <em>valid</em> <code>return</code> at the end of the function.</p>\n\n<pre><code>A fun(E e){\n  switch(c){\n    case E::e1: return A{11};\n    ...\n  }\n  return A{11}; // can't get here, so return anything\n}\n</code></pre>\n\n<p>Edit: some compilers (like MSVC) will complain if you have a return from an unreachable path. Just bracket the return by an #if for the compiler. Or as I often do, just have a RETURN(x) defined that is defined based on the compiler.</p>\n"}, {"comments": [{"owner": {"reputation": 9958, "user_id": 225186, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/dbc60362bf2df08202ff198e00085a5c?s=128&d=identicon&r=PG", "display_name": "alfC", "link": "https://stackoverflow.com/users/225186/alfc"}, "edited": false, "score": 0, "creation_date": 1572462595, "post_id": 58632016, "comment_id": 103571398, "body": "This is very useful. I can even put this after the closing curly to avoid extra lines. <code>... } __builtin_unreachable();</code>."}, {"owner": {"reputation": 9958, "user_id": 225186, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/dbc60362bf2df08202ff198e00085a5c?s=128&d=identicon&r=PG", "display_name": "alfC", "link": "https://stackoverflow.com/users/225186/alfc"}, "edited": false, "score": 0, "creation_date": 1572463921, "post_id": 58632016, "comment_id": 103571973, "body": "Not that I use MSVC but for reference MSVC doesn&#39;t have <code>__builtin_unreachable()</code> <a href=\"https://godbolt.org/z/1FRDEK\" rel=\"nofollow noreferrer\">godbolt.org/z/1FRDEK</a>"}, {"owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "reply_to_user": {"reputation": 9958, "user_id": 225186, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/dbc60362bf2df08202ff198e00085a5c?s=128&d=identicon&r=PG", "display_name": "alfC", "link": "https://stackoverflow.com/users/225186/alfc"}, "edited": false, "score": 1, "creation_date": 1572465294, "post_id": 58632016, "comment_id": 103572544, "body": "@alfC It&#39;s best to hide it behind a macro rather than use it directly, in case some compiler you might want to support doesn&#39;t have it. I use <code>*(char*)0=0</code> as my alternative <code>__builtin_unreachable()</code>. That doesn&#39;t help to silence the warning on msvc, but you could do something like <code>UNREACHABLE; return 11 &#47;*anything valid*&#47;;</code> and then the warning vanishes and the extra <code>return 11;</code> after <code>UNREACHABLE</code> doesn&#39;t make the code on gcc/clang/icc any worse: <a href=\"https://godbolt.org/z/pbcnWC\" rel=\"nofollow noreferrer\">godbolt.org/z/pbcnWC</a>."}, {"owner": {"reputation": 9958, "user_id": 225186, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/dbc60362bf2df08202ff198e00085a5c?s=128&d=identicon&r=PG", "display_name": "alfC", "link": "https://stackoverflow.com/users/225186/alfc"}, "edited": false, "score": 0, "creation_date": 1591998961, "post_id": 58632016, "comment_id": 110277246, "body": "Do you know why <code>(char*)0=0</code> can be an alternative for <code>unreachable</code>?"}, {"owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "reply_to_user": {"reputation": 9958, "user_id": 225186, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/dbc60362bf2df08202ff198e00085a5c?s=128&d=identicon&r=PG", "display_name": "alfC", "link": "https://stackoverflow.com/users/225186/alfc"}, "edited": false, "score": 0, "creation_date": 1591999509, "post_id": 58632016, "comment_id": 110277389, "body": "@alfC <code>*(char*)0=someInt</code> can&#39;t ever be executed or the program behavior is undefined. The only way a program with <code>*(char*)0=someInt</code> can be valid is if this statement is unreachable. So <code>*(char*)0=someInt</code> should have the same effect as <code>__builtin_unreachable()</code>. Practically  on gcc/clang it doesn&#39;t, but this is unfortunate because if compilers did treat it that way, then the <code>__builtin_unreachable()</code> extension wouldn&#39;t be needed."}], "tags": [], "owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "is_accepted": true, "score": 3, "last_activity_date": 1572461618, "creation_date": 1572461618, "answer_id": 58632016, "question_id": 58631852, "link": "https://stackoverflow.com/questions/58631852/handling-of-switch-enum-class-returns-in-clang-gcc-and-icc-consistently/58632016#58632016", "title": "Handling of switch enum class returns in clang, gcc and icc consistently", "body": "<p>All of these three compilers have the <code>__builtin_unreachable()</code> extension. You can use it to both suppress the warning (even if the return value has constructor problems) and to elicit better code generation:</p>\n\n<pre><code>enum class E{e1, e2};\n\n\nint fun(E e){\n    switch(e){\n        case E::e1: return 11;\n        case E::e2: return 22;\n    }\n    __builtin_unreachable();\n\n}\n</code></pre>\n\n<p><a href=\"https://godbolt.org/z/0VP9af\" rel=\"nofollow noreferrer\">https://godbolt.org/z/0VP9af</a></p>\n"}, {"tags": [], "owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "is_accepted": false, "score": 5, "last_activity_date": 1577637364, "creation_date": 1577637364, "answer_id": 59521265, "question_id": 58631852, "link": "https://stackoverflow.com/questions/58631852/handling-of-switch-enum-class-returns-in-clang-gcc-and-icc-consistently/59521265#59521265", "title": "Handling of switch enum class returns in clang, gcc and icc consistently", "body": "<p>It is important to note that, given your initial definition of <code>fun</code>, it is <em>entirely legal C++</em> to do the following:</p>\n\n<pre><code>fun(static_cast&lt;E&gt;(2));\n</code></pre>\n\n<p>Any enumeration type can assume any value within the number of bits of its representation. The representation for a type with an explicit underlying type (<code>enum class</code> <em>always</em> has an underlying type; <code>int</code> by default) is the entirety of that underlying type. Therefore, an <code>enum class</code> by default can assume the value of any <code>int</code>.</p>\n\n<p>This is <em>not</em> undefined behavior in C++.</p>\n\n<p>As such, GCC is well within its rights to assume that <code>fun</code> may get any value within the range of its underlying type, rather than only one of its enumerators.</p>\n\n<p>Standard C++ doesn't really have an answer for this. In an ideal world, C++ would have a contract system where you can declare up-front that <code>fun</code> requires that the parameter <code>e</code> be one of the enumerators. With that knowledge, GCC would know that the switch will take all control paths. Of course, even if C++20 had contracts (which is being retooled for C++23), there still isn't a way to test if an enum value only has values equal to one of its enumerators.</p>\n\n<p>In a slightly less ideal world, C++ would have a way to explicitly tell the compiler that a piece of code is expected to be unreachable, and therefore the compiler can ignore the possibility of execution getting there. Unfortunately, that feature didn't make C++20 either.</p>\n\n<p>So for the time being, you're stuck with compiler-specific alternatives.</p>\n"}], "owner": {"reputation": 9958, "user_id": 225186, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/dbc60362bf2df08202ff198e00085a5c?s=128&d=identicon&r=PG", "display_name": "alfC", "link": "https://stackoverflow.com/users/225186/alfc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 403, "favorite_count": 1, "accepted_answer_id": 58632016, "answer_count": 3, "score": 5, "last_activity_date": 1615193448, "creation_date": 1572460873, "last_edit_date": 1615193448, "question_id": 58631852, "link": "https://stackoverflow.com/questions/58631852/handling-of-switch-enum-class-returns-in-clang-gcc-and-icc-consistently", "title": "Handling of switch enum class returns in clang, gcc and icc consistently", "body": "<p>I am generally using <code>clang</code> to develop code, using all reasonable warnings I can (<code>-Wall -Wextra [-Wpedantic]</code>). One of the nice things about this setup is that the compiler checks for the consistency of the <code>switch</code> stataments in relation to the enumeration used. For example in this code:</p>\n<pre class=\"lang-cpp prettyprint-override\"><code>enum class E{e1, e2};\n\nint fun(E e){\n    switch(e){\n        case E::e1: return 11;\n        case E::e2: return 22; // if I forget this line, clang warns\n    }\n}\n</code></pre>\n<p><code>clang</code> would complain (warn) <strong>if</strong>: I omit either the <code>e1</code> or the <code>e2</code> case, <strong>and</strong> there is no-default case.</p>\n<pre><code>&lt;source&gt;:4:12: warning: enumeration value 'e2' not handled in switch [-Wswitch]\n    switch(e){\n</code></pre>\n<p>This behavior is great because</p>\n<ol>\n<li>it checks for consistency at compile time between enums and switches, making them a very useful and inseparable pair of features.</li>\n<li>I don't need to define an artificial <code>default</code> case for which I wouldn't have a good thing to do.</li>\n<li>It allows me to omit a global return for which I wouldn't have a good thing to return (sometimes the return is not a simple type like <code>int</code>, it could be a type without a default constructor for example.</li>\n</ol>\n<p>(Note that I am using an <code>enum class</code> so I assume only valid cases, as an invalid case can only be generated by a nasty cast on the callers end.)</p>\n<p><strong>Now the bad news:</strong>\nUnfortunately this breaks down quickly when switching to other compilers.\nIn GCC and Intel (icc) the above code warns (using the same flags) that I am not returning from a non-void function.</p>\n<pre><code>&lt;source&gt;: In function 'int fun(E)':\n&lt;source&gt;:11:1: warning: control reaches end of non-void function [-Wreturn-type]\n   11 | }\n      | ^\nCompiler returned: 0\n</code></pre>\n<p>The only solution I found for this working to both have a <code>default</code> case and return a non-sensical value.</p>\n<pre><code>int fun(E e){\n    switch(e){\n        case E::e1: return 11;\n        case E::e2: return 22;\n        default: return {}; // or int{} // needed by GCC and icc\n    }\n}\n</code></pre>\n<p>This is bad because of the reasons I stated above (and not even getting to the case where the return type has no default constructor).\nBut it is also bad because I can forget again one of the enum cases and now <code>clang</code> will not complain because there is a default case.</p>\n<p>So what I ended up doing is to have this ugly code that works on these compilers and warns when it can for the right reasons.</p>\n<pre><code>enum E{e1, e2};\n\nint fun(E e){\n    switch(e){\n        case E::e1: return 11;\n        case E::e2: return 22;\n#ifndef __clang__    \n        default: return {};\n#endif\n    }\n}\n</code></pre>\n<p>or</p>\n<pre><code>int fun(E e){\n    switch(e){\n        case E::e1: return 11;\n        case E::e2: return 22;\n    }\n#ifndef __clang__    \n    return {};\n#endif\n}\n</code></pre>\n<p><strong>Is there a better way to do this?</strong></p>\n<p>This is the example: <a href=\"https://godbolt.org/z/h5_HAs\" rel=\"nofollow noreferrer\">https://godbolt.org/z/h5_HAs</a></p>\n<hr />\n<p>In the case on <em>non-default constructible</em> classes I am really out of good options completely:</p>\n<pre><code>A fun(E e){\n    switch(e){\n        case E::e1: return A{11};\n        case E::e2: return A{22};\n    }\n#ifndef __clang__\n    return reinterpret_cast&lt;A const&amp;&gt;(e);  // :P, because return A{} could be invalid\n#endif\n}\n</code></pre>\n<p><a href=\"https://godbolt.org/z/3WC5v8\" rel=\"nofollow noreferrer\">https://godbolt.org/z/3WC5v8</a></p>\n"}, {"tags": ["c++", "opengl", "glut", "wavefront", "opengl-compat"], "answers": [{"comments": [{"owner": {"reputation": 51, "user_id": 11037784, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ge0BY5sc5aA/AAAAAAAAAAI/AAAAAAAAM_c/EBzE96UZc_o/photo.jpg?sz=128", "display_name": "lambozsolty", "link": "https://stackoverflow.com/users/11037784/lambozsolty"}, "edited": false, "score": 0, "creation_date": 1572460733, "post_id": 58631776, "comment_id": 103570658, "body": "It&#39;s not working, I don&#39;t see the object now in the window"}], "tags": [], "owner": {"reputation": 731, "user_id": 8184859, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/9G1p6.jpg?s=128&g=1", "display_name": "Mode77", "link": "https://stackoverflow.com/users/8184859/mode77"}, "is_accepted": false, "score": 2, "last_activity_date": 1572460998, "last_edit_date": 1572460998, "creation_date": 1572460560, "answer_id": 58631776, "question_id": 58631717, "link": "https://stackoverflow.com/questions/58631717/how-to-set-the-size-of-an-opengl-object/58631776#58631776", "title": "How to set the size of an opengl object?", "body": "<p>You need to increase the scale factor.</p>\n\n<pre><code>void drawObject()\n{\n    glPushMatrix();\n    glTranslatef(0, -40.00, -105);\n    glColor3f(255, 255, 255);\n    glScalef(1.0, 1.0, 1.0);\n    glRotatef(objectrot, 0, 1, 0);\n    glCallList(object);\n    glPopMatrix();\n    objectrot += 0.001;\n    if (objectrot &gt; 360)objectrot -= 360;\n}\n</code></pre>\n\n<p>You should pass in a larger number to <code>glScalef()</code>. Try 1.0 and see if that works.</p>\n"}], "owner": {"reputation": 51, "user_id": 11037784, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ge0BY5sc5aA/AAAAAAAAAAI/AAAAAAAAM_c/EBzE96UZc_o/photo.jpg?sz=128", "display_name": "lambozsolty", "link": "https://stackoverflow.com/users/11037784/lambozsolty"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 724, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1572463927, "creation_date": 1572460253, "last_edit_date": 1572463927, "question_id": 58631717, "link": "https://stackoverflow.com/questions/58631717/how-to-set-the-size-of-an-opengl-object", "title": "How to set the size of an opengl object?", "body": "<p>I have to display an object in opengl(it's a homework) and I found a good code on the internet,but the size of the displayed object is very small,and I don't know how to change it to display the object in bigger size.</p>\n\n<p>I think that I have to modify reshape, drawObject and display functions, but I don't know opengl and it's functions so I don't know that which part of the code should I modify.</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include\"glut.h\"\n\nGLuint object;\nfloat objectrot;\nchar ch = '1';\n\nvoid loadObj(const char* fname)\n{\n    FILE* fp;\n    int read;\n    GLfloat x, y, z;\n    char ch;\n\n    object = glGenLists(1);\n    fp = fopen(fname, \"r\");\n\n    if (!fp)\n    {\n        printf(\"can't open file %s\\n\", fname);\n        exit(1);\n    }\n    glPointSize(2.0);\n    glNewList(object, GL_COMPILE);\n    {\n        glPushMatrix();\n        glBegin(GL_POINTS);\n        while (!(feof(fp)))\n        {\n            read = fscanf(fp, \"%c %f %f %f\", &amp;ch, &amp;x, &amp;y, &amp;z);\n            if (read == 4 &amp;&amp; ch == 'v')\n            {\n                glVertex3f(x, y, z);\n            }\n        }\n        glEnd();\n    }\n\n    glPopMatrix();\n    glEndList();\n\n    fclose(fp);\n}\n\nvoid reshape(int w, int h)\n{\n    glViewport(0, 0, w, h);\n    glMatrixMode(GL_PROJECTION);\n    glLoadIdentity();\n    gluPerspective(60, (GLfloat)w / (GLfloat)h, 0.1, 1000.0);\n    glMatrixMode(GL_MODELVIEW);\n}\n\nvoid drawObject()\n{\n    glPushMatrix();\n    glTranslatef(0, -40.00, -105);\n    glColor3f(255, 255, 255);\n    glScalef(0.1, 0.1, 0.1);\n    glRotatef(objectrot, 0, 1, 0);\n    glCallList(object);\n    glPopMatrix();\n    objectrot += 0.001;\n    if (objectrot &gt; 360)objectrot -= 360;\n}\n\nvoid display(void)\n{\n    glClearColor(0.0, 0.0, 0.0, 1.0);\n    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);\n    glLoadIdentity();\n    drawObject();\n    glutSwapBuffers(); \n}\n\nint main(int argc, char** argv)\n{\n    glutInit(&amp;argc, argv);\n    glutInitDisplayMode(GLUT_DOUBLE | GLUT_RGB | GLUT_DEPTH);\n    glutInitWindowSize(800, 450);\n    glutInitWindowPosition(20, 20);\n    glutCreateWindow(\"ObjLoader\");\n    glutReshapeFunc(reshape);\n    glutDisplayFunc(display);\n    glutIdleFunc(display);\n    loadObj(\"cat.obj\");\n    glutMainLoop();\n    return 0;\n}\n</code></pre>\n\n<p>I expect a larger object in the window,but it is very small</p>\n"}, {"tags": ["c++", "vector", "getline"], "comments": [{"owner": {"reputation": 67968, "user_id": 584192, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YBSIc.png?s=128&g=1", "display_name": "Samuel Liew", "link": "https://stackoverflow.com/users/584192/samuel-liew"}, "edited": false, "score": 0, "creation_date": 1572467718, "post_id": 58631690, "comment_id": 103573469, "body": "Comments are not for extended discussion; this conversation has been <a href=\"https://chat.stackoverflow.com/rooms/201622/discussion-on-question-by-cpt-crazy-c-getline-line-has-weird-numbers-additi\">moved to chat</a>."}, {"owner": {"reputation": 671, "user_id": 7898100, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef63bacd8554153c3ad9127ce502180d?s=128&d=identicon&r=PG&f=1", "display_name": "Tobias Wollgam", "link": "https://stackoverflow.com/users/7898100/tobias-wollgam"}, "edited": false, "score": 0, "creation_date": 1572618279, "post_id": 58631690, "comment_id": 103624897, "body": "49 and 48 is the integer representation of &#39;1&#39; and &#39;0&#39; and that is the first line of you file. Your code must skip first two lines."}], "owner": {"reputation": 75, "user_id": 12299146, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAje6ZNLdJoOsnKfglFyNbcYAftF3pBfQmYhTs5=k-s128", "display_name": "Cpt. Crazy", "link": "https://stackoverflow.com/users/12299146/cpt-crazy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 67, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1572460123, "creation_date": 1572460123, "question_id": 58631690, "link": "https://stackoverflow.com/questions/58631690/c-getline-line-has-weird-numbers-additionaly-instead-of-just-chars-as-entrie", "title": "c++ getline() line has weird numbers additionaly instead of just chars as entries", "body": "<p>I've tried to read a file and put every single char in a 2d vector matrix (<code>vector&lt;vector&lt;char&gt;&gt;</code>), but when I use <code>getline()</code> the line does not only contain the chararcter, but also some number and when I try to access the values of the line with e.g. <code>line[1]</code>, I get something like 49 '1'. But all I want is the '1' and I don't know what 49 is and how to get rid of it.</p>\n\n<p><code>matrix</code> is a predefined type <code>vector&lt;vector&lt;char&gt;&gt;</code></p>\n\n<pre><code>matrix mapMatrix;\nifstream map(pathToMap);\nif (!map.is_open()) {\n    throw runtime_error(\"file not found\");\n}\n\nstring line;\nvector&lt;char&gt; lineVec;\nwhile (getline(map, line)) {\n    for (int i = 0; i &lt; (signed)line.size(); i++) {\n\n        lineVec.push_back((char)line[i]);\n    }\n    mapMatrix.push_back(lineVec);\n    lineVec.clear();\n}\n\nreturn mapMatrix;\n</code></pre>\n\n<p>The .txt file looks something like this: </p>\n\n<pre><code>10\n10\nMMMMMMMMMM\nM6...   pM\nMMMM.. MMM\nMMM... xMM\nM..... xxM\nM....ggxxM\nM MMMMMMMM\nM.M..... M\nM...OO..PM\nMMMMMMMMMM\n</code></pre>\n\n<p>And in the while-loop the first line looks something like this: </p>\n\n<pre><code>[size]: 2\n[capacity]: 15\n[allocator]: allocator\n[0]: 49 '1'\n[1]: 48 '0'\n[Rohdatenansicht]: {_Mypair=allocator }\n</code></pre>\n\n<p>and I dont know where the 49 and 48 are coming from.</p>\n\n<p>Thanks in advance</p>\n"}, {"tags": ["c++", "duffs-device"], "comments": [{"owner": {"reputation": 168120, "user_id": 102937, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1233ec65168f4aae4d939ae8fe6cde1e?s=128&d=identicon&r=PG", "display_name": "Robert Harvey", "link": "https://stackoverflow.com/users/102937/robert-harvey"}, "edited": false, "score": 1, "creation_date": 1572460006, "post_id": 58631602, "comment_id": 103570318, "body": "Does that even compile?"}, {"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1572460074, "post_id": 58631602, "comment_id": 103570346, "body": "Compiles ok <a href=\"https://godbolt.org/z/8VZw1w\" rel=\"nofollow noreferrer\">godbolt.org/z/8VZw1w</a>  and I think it ok from a standards perspective"}, {"owner": {"reputation": 500, "user_id": 11101828, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2edfd65d32e06b6627ed29f7b3d2dd6f?s=128&d=identicon&r=PG&f=1", "display_name": "ezegoing", "link": "https://stackoverflow.com/users/11101828/ezegoing"}, "edited": false, "score": 0, "creation_date": 1572460085, "post_id": 58631602, "comment_id": 103570350, "body": "gcc 7.4.0 no problem :)"}, {"owner": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 1, "creation_date": 1572460105, "post_id": 58631602, "comment_id": 103570356, "body": "The compilers job is to generate the code with proper side effects. Why would a c++ compiler not going to &quot;respect&quot; (what does that mean?) the &quot;jump&quot;? What &quot;problems with opting-out&quot; do you see? Do you ask if the function can be optimized to <code>if (part == 1) std::cout &lt;&lt; .... ;</code> ?"}, {"owner": {"reputation": 168120, "user_id": 102937, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1233ec65168f4aae4d939ae8fe6cde1e?s=128&d=identicon&r=PG", "display_name": "Robert Harvey", "link": "https://stackoverflow.com/users/102937/robert-harvey"}, "edited": false, "score": 0, "creation_date": 1572460154, "post_id": 58631602, "comment_id": 103570382, "body": "Yeah, this is something that you probably shouldn&#39;t do at all.  Find a better way to do whatever it is that you&#39;re trying to do."}, {"owner": {"user_type": "does_not_exist", "display_name": "user10957435"}, "edited": false, "score": 0, "creation_date": 1572460294, "post_id": 58631602, "comment_id": 103570448, "body": "Keep in mind that compilers are allowed to optimize anything as long as the effect is still the same. So if this isn&#39;t breaking any rules (UB, ill-formed, syntax errors, etc), then the compiler has to honor it . But again, that&#39;s only if you&#39;re not breaking rules."}, {"owner": {"reputation": 500, "user_id": 11101828, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2edfd65d32e06b6627ed29f7b3d2dd6f?s=128&d=identicon&r=PG&f=1", "display_name": "ezegoing", "link": "https://stackoverflow.com/users/11101828/ezegoing"}, "reply_to_user": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 0, "creation_date": 1572460391, "post_id": 58631602, "comment_id": 103570498, "body": "@KamilCuk First I was concerned - like others here - if that is even going to compile for all compilers. Then I was thinking how much of OPT flags could play a role, something like could -O3 cause problems here..."}, {"owner": {"reputation": 500, "user_id": 11101828, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2edfd65d32e06b6627ed29f7b3d2dd6f?s=128&d=identicon&r=PG&f=1", "display_name": "ezegoing", "link": "https://stackoverflow.com/users/11101828/ezegoing"}, "edited": false, "score": 0, "creation_date": 1572460461, "post_id": 58631602, "comment_id": 103570526, "body": "@Chipster So am I breaking any rules here?"}, {"owner": {"reputation": 7540, "user_id": 4474230, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/713c7ce18010e541853962264a719d83?s=128&d=identicon&r=PG&f=1", "display_name": "Jeffrey", "link": "https://stackoverflow.com/users/4474230/jeffrey"}, "edited": false, "score": 3, "creation_date": 1572460514, "post_id": 58631602, "comment_id": 103570558, "body": "if you have such code in your code base, compiler bugs are the least of your problems"}, {"owner": {"reputation": 26552, "user_id": 448932, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QgLLl.png?s=128&g=1", "display_name": "500 - Internal Server Error", "link": "https://stackoverflow.com/users/448932/500-internal-server-error"}, "edited": false, "score": 0, "creation_date": 1572460707, "post_id": 58631602, "comment_id": 103570642, "body": "This should be illegal, IMHO."}, {"owner": {"reputation": 500, "user_id": 11101828, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2edfd65d32e06b6627ed29f7b3d2dd6f?s=128&d=identicon&r=PG&f=1", "display_name": "ezegoing", "link": "https://stackoverflow.com/users/11101828/ezegoing"}, "reply_to_user": {"reputation": 7540, "user_id": 4474230, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/713c7ce18010e541853962264a719d83?s=128&d=identicon&r=PG&f=1", "display_name": "Jeffrey", "link": "https://stackoverflow.com/users/4474230/jeffrey"}, "edited": false, "score": 0, "creation_date": 1572460710, "post_id": 58631602, "comment_id": 103570644, "body": "@Jeffrey fair enough. I&#39;m deferring functions and this is what it ended up to be. I also dont know how much different it could look..."}, {"owner": {"reputation": 20522, "user_id": 11941443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f27a880243178eedf3abdab24898b335?s=128&d=identicon&r=PG&f=1", "display_name": "walnut", "link": "https://stackoverflow.com/users/11941443/walnut"}, "edited": false, "score": 0, "creation_date": 1572460869, "post_id": 58631602, "comment_id": 103570721, "body": "@ezegoing No you are not breaking any rules. This will print <code>hello</code> once through the <code>func(1)</code> call and that can&#39;t be changed by the compiler."}, {"owner": {"user_type": "does_not_exist", "display_name": "user10957435"}, "edited": false, "score": 0, "creation_date": 1572460941, "post_id": 58631602, "comment_id": 103570752, "body": "<code>case 0:{             case 1:    }</code> definitely feels like is should be breaking rules because you are jumping into the middle of a block. Although the ancient now out of favor <code>goto</code> could do things like this I think, so maybe not."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 3, "creation_date": 1572461023, "post_id": 58631602, "comment_id": 103570793, "body": "@Chipster <code>switch</code> is a <code>goto</code> table. It uses labels exactly like a <code>goto</code> does. And it has the same rules about skipping declarations as <code>goto</code>. It&#39;s no surprise it behaves exactly like a <code>goto</code>. Edit : This is why it&#39;s able to produce the example used in this question."}, {"owner": {"reputation": 500, "user_id": 11101828, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2edfd65d32e06b6627ed29f7b3d2dd6f?s=128&d=identicon&r=PG&f=1", "display_name": "ezegoing", "link": "https://stackoverflow.com/users/11101828/ezegoing"}, "reply_to_user": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "edited": false, "score": 0, "creation_date": 1572461340, "post_id": 58631602, "comment_id": 103570921, "body": "@jxh, my question is really bout the if(false) jump and not the jump itself, should have chosen a silly goto then. I don&#39;t care about the duffs toy, this stuff is being used by my colleagues frequently. So i dont see a duplicate to this linked thread :S"}, {"owner": {"user_type": "does_not_exist", "display_name": "user10957435"}, "edited": false, "score": 0, "creation_date": 1572461512, "post_id": 58631602, "comment_id": 103570986, "body": "@ezegoing <a href=\"https://stackoverflow.com/posts/58631602/edit\">edit your question</a> and add that information in."}, {"owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "edited": false, "score": 0, "creation_date": 1572461541, "post_id": 58631602, "comment_id": 103571000, "body": "@ezegoing: The compiler can perform dead code elimination if the code is dead. The code after <code>case 1:</code> isn&#39;t dead. The reason it isn&#39;t dead is because your code is Duff&#39;s Device. QED."}, {"owner": {"reputation": 500, "user_id": 11101828, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2edfd65d32e06b6627ed29f7b3d2dd6f?s=128&d=identicon&r=PG&f=1", "display_name": "ezegoing", "link": "https://stackoverflow.com/users/11101828/ezegoing"}, "edited": false, "score": 0, "creation_date": 1572461599, "post_id": 58631602, "comment_id": 103571024, "body": "@Chipster well that is the question title *Is there any problem in jumping into if(false) block? [duplicate] * lol and the whole question..."}, {"owner": {"user_type": "does_not_exist", "display_name": "user10957435"}, "edited": false, "score": 0, "creation_date": 1572461672, "post_id": 58631602, "comment_id": 103571046, "body": "@ezegoing Yes, but since it&#39;s now been confused as a duplicate, it&#39;s a good idea to add a statement why it&#39;s not a duplicate in the question."}, {"owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "edited": false, "score": 0, "creation_date": 1572462040, "post_id": 58631602, "comment_id": 103571193, "body": "If your question is really about &quot;jumping&quot;, you can rewrite your example with a <code>goto</code> instead. But, the crux of the answer is the same: if the code is reachable via a jump, then it is not dead code, and so the compiler will not apply DCE."}, {"owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "edited": false, "score": 0, "creation_date": 1572462632, "post_id": 58631602, "comment_id": 103571413, "body": "I do want to stress: The question was well composed and straightforward to understand. I am just saying if you recognized the <code>switch</code> into <code>if</code> construction as Duff&#39;s Device, you would have known the code would not be subject to being optimized out. Upvote for the question!"}], "answers": [{"comments": [{"owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "edited": false, "score": 1, "creation_date": 1572460803, "post_id": 58631750, "comment_id": 103570690, "body": "The technique is a well-known one, so it should be idiomatic in the code bases that use it. If it isn&#39;t used in a code base, then it may be best not to introduce it."}, {"owner": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "reply_to_user": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "edited": false, "score": 2, "creation_date": 1572461129, "post_id": 58631750, "comment_id": 103570840, "body": "@jxh Interesting. In fact now that I think of it, I could have had a use case for exactly this a week or two ago... except it wouldn&#39;t ever fly in code review :-D"}, {"owner": {"reputation": 500, "user_id": 11101828, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2edfd65d32e06b6627ed29f7b3d2dd6f?s=128&d=identicon&r=PG&f=1", "display_name": "ezegoing", "link": "https://stackoverflow.com/users/11101828/ezegoing"}, "edited": false, "score": 1, "creation_date": 1572461773, "post_id": 58631750, "comment_id": 103571083, "body": "@hyde dont forget to cite me XD"}], "tags": [], "owner": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "is_accepted": true, "score": 8, "last_activity_date": 1572460436, "creation_date": 1572460436, "answer_id": 58631750, "question_id": 58631602, "link": "https://stackoverflow.com/questions/58631602/is-there-any-problem-in-jumping-into-iffalse-block/58631750#58631750", "title": "Is there any problem in jumping into if(false) block?", "body": "<p>The code doesn't appear to be Undefined Behavior. Therefore any optimizations are not allowed to produce any effects which would affect the behavior of the code.</p>\n\n<p>Note: Related to this <em>kind</em> of code, one thing you are not allowed to do is \"goto\" over definitions of local variables. But this code doesn't do that, so no problem.</p>\n\n<p>Another note: If you have this kind of code in a \"real\" (not toy, experiment, obfuscation exercise etc) program, you should really refactor it into something which doesn't elicit quite so many WTFs from anybody reading the code.</p>\n"}], "owner": {"reputation": 500, "user_id": 11101828, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2edfd65d32e06b6627ed29f7b3d2dd6f?s=128&d=identicon&r=PG&f=1", "display_name": "ezegoing", "link": "https://stackoverflow.com/users/11101828/ezegoing"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 151, "favorite_count": 1, "accepted_answer_id": 58631750, "answer_count": 1, "score": 5, "last_activity_date": 1572462657, "creation_date": 1572459829, "last_edit_date": 1572460591, "question_id": 58631602, "link": "https://stackoverflow.com/questions/58631602/is-there-any-problem-in-jumping-into-iffalse-block", "title": "Is there any problem in jumping into if(false) block?", "body": "<p>I've read already a couple times (e.g. here <a href=\"https://stackoverflow.com/questions/39034558/compiler-what-if-condition-is-always-true-false\">Compiler: What if condition is always true / false</a>) that any decent c++ compiler will opt-out something like</p>\n\n<pre><code>if(false)\n{\n ...\n}\n</code></pre>\n\n<p>But what if there is an intentional jump into this <code>if(false)</code> block. I'm having something like this in mind</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nvoid func(int part){\n    switch (part) {\n    case 0:{\n        if(false)\n            case 1:{std::cout &lt;&lt; \"hello\" &lt;&lt; std::endl;}\n        break;\n    }\n    default:\n        break;\n    }\n}\n\nint main()\n{\n    func(0);\n    func(1);\n    return 0;\n}\n</code></pre>\n\n<p>Is any decent c++ compiler going to respect the jump or will there eventually going to be some problems with opting-out?</p>\n"}, {"tags": ["c++", "signals", "squid"], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 10085940, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-XmB7zpaxLPI/AAAAAAAAAAI/AAAAAAAAABQ/QEd0OJ1fHKc/photo.jpg?sz=128", "display_name": "leonyuuu", "link": "https://stackoverflow.com/users/10085940/leonyuuu"}, "is_accepted": true, "score": 0, "last_activity_date": 1572743428, "creation_date": 1572743428, "answer_id": 58676642, "question_id": 58631513, "link": "https://stackoverflow.com/questions/58631513/how-to-restart-a-squid-server-that-is-launched-by-exec/58676642#58676642", "title": "How to restart a squid server that is launched by exec", "body": "<p>By looking into the cache.log file, I find out that the squid only recognize full path for the configuration file. So just type full path of file when launch the squid, and it will successfully reload with the same configuration when you send HUP signal to the squid process.  </p>\n"}], "owner": {"reputation": 11, "user_id": 10085940, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-XmB7zpaxLPI/AAAAAAAAAAI/AAAAAAAAABQ/QEd0OJ1fHKc/photo.jpg?sz=128", "display_name": "leonyuuu", "link": "https://stackoverflow.com/users/10085940/leonyuuu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 180, "favorite_count": 0, "accepted_answer_id": 58676642, "answer_count": 1, "score": 0, "last_activity_date": 1572743428, "creation_date": 1572459518, "last_edit_date": 1572495813, "question_id": 58631513, "link": "https://stackoverflow.com/questions/58631513/how-to-restart-a-squid-server-that-is-launched-by-exec", "title": "How to restart a squid server that is launched by exec", "body": "<p>I am currently writing a program that will control the launch of squid server, in which I use fork-exec to launch squid server with non-background mode and with designated configuration file. And in the main process, I will periodically reload the squid server by sending signal to the child process.</p>\n\n<p>However, it seems like that it doesn't work for me to reload the squid process by using \"kill -HUP\". So later I tried to verify if the \"SIGHUP\" is really working for reloading squid server by launching the server in a separate shell, and it doesn't work too. </p>\n\n<p>So am i wrong with reloading squid server? </p>\n\n<p>In the implementation I use kill command with SIGHUP to restart the server with child process id (followed by what systemd configuration of squid tells me how to reload the squid, <a href=\"https://github.com/squid-cache/squid/blob/master/tools/systemd/squid.service\" rel=\"nofollow noreferrer\">https://github.com/squid-cache/squid/blob/master/tools/systemd/squid.service</a>). </p>\n\n<p>expected: I can reload squid with kill -HUP any times in my main process. \nactual: failed with reloading, and the child process will exit when I send SIGHUP.</p>\n"}, {"tags": ["c++", "binary-tree", "smart-pointers", "unique-ptr"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1572459896, "post_id": 58631505, "comment_id": 103570271, "body": "<code>make_unique</code> constructs a new object. It&#39;s not a &quot;cast&quot; to <code>unique_ptr</code>."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1572459931, "post_id": 58631505, "comment_id": 103570289, "body": "What is <code>root</code>? Presumably a <code>unique_ptr&lt;TreeNode&lt;T&gt;&gt;</code> but it&#39;s not shown. Please be sure to share a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 11800102, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64e5385c606bbfb5bdeb189c55ab2a86?s=128&d=identicon&r=PG&f=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/11800102/kris"}, "edited": false, "score": 0, "creation_date": 1572462951, "post_id": 58631688, "comment_id": 103571559, "body": "If I want to return a unique_ptr, do I do <code>return std::move(node)</code> after modifying the tree in-place using <code>std::swap(root-&gt;left, root-&gt;right)</code> ? I&#39;m getting a compiler error indicating that the copy constructor is trying to be called."}, {"owner": {"reputation": 4394, "user_id": 11218687, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-q9OQOfewRmE/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rf6UauF-z1wrWfcYS38osHELYqJMA/mo/photo.jpg?sz=128", "display_name": "Dmitry Kuzminov", "link": "https://stackoverflow.com/users/11218687/dmitry-kuzminov"}, "reply_to_user": {"reputation": 25, "user_id": 11800102, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64e5385c606bbfb5bdeb189c55ab2a86?s=128&d=identicon&r=PG&f=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/11800102/kris"}, "edited": false, "score": 0, "creation_date": 1572463740, "post_id": 58631688, "comment_id": 103571884, "body": "@Kris It doesn&#39;t make any harm if you explicitly show your intention to move an object with the <code>std::move</code> function. In my example the RVO optimization should work: compiler can easily detect that the object doesn&#39;t need to be copied. In case you don&#39;t have the elegance that allows compiler to do the optimization, just use <code>std::move</code> explicitly"}, {"owner": {"reputation": 6607, "user_id": 6717178, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/QbOLx.jpg?s=128&g=1", "display_name": "JHBonarius", "link": "https://stackoverflow.com/users/6717178/jhbonarius"}, "edited": false, "score": 0, "creation_date": 1572467210, "post_id": 58631688, "comment_id": 103573270, "body": "I think adding std::move where RVO is expected is generally considered code smell."}], "tags": [], "owner": {"reputation": 4394, "user_id": 11218687, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-q9OQOfewRmE/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rf6UauF-z1wrWfcYS38osHELYqJMA/mo/photo.jpg?sz=128", "display_name": "Dmitry Kuzminov", "link": "https://stackoverflow.com/users/11218687/dmitry-kuzminov"}, "is_accepted": true, "score": 3, "last_activity_date": 1572460983, "last_edit_date": 1572460983, "creation_date": 1572460119, "answer_id": 58631688, "question_id": 58631505, "link": "https://stackoverflow.com/questions/58631505/inverting-binary-tree-with-stdunique-ptr/58631688#58631688", "title": "Inverting Binary Tree with std::unique_ptr", "body": "<p>What you actually need is to <code>swap</code> pointers. The <code>unique_ptr</code> doesn't allow copying, but that is not required in your case: each inversion can be made inplace. Try this to swap two subtrees:</p>\n\n<pre><code>std::swap(root-&gt;left, root-&gt;right);\n</code></pre>\n\n<p>If you need to make an inversed copy, try something like that:</p>\n\n<pre><code>unique_ptr&lt;TreeNode&lt;int&gt;&gt; InvertTree(const unique_ptr&lt;const TreeNode&lt;int&gt;&gt;&amp; node) {\n    unique_ptr&lt;TreeNode&lt;int&gt;&gt; inverted_node;\n    if (node != nullptr) {\n        inverted_node.left = InvertTree(node-&gt;right);\n        inverted_node.right = InvertTree(node-&gt;left);\n    }\n    return inverted_node;\n}\n</code></pre>\n\n<p>Some comments regarding your code.</p>\n\n<ol>\n<li><p>Don't return raw pointers if you started working with smart pointers internally.</p></li>\n<li><p>Consider implementing the constructor of your <code>struct TreeNode</code>.</p></li>\n</ol>\n"}], "owner": {"reputation": 25, "user_id": 11800102, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64e5385c606bbfb5bdeb189c55ab2a86?s=128&d=identicon&r=PG&f=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/11800102/kris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 129, "favorite_count": 0, "accepted_answer_id": 58631688, "answer_count": 1, "score": 0, "last_activity_date": 1572460983, "creation_date": 1572459480, "question_id": 58631505, "link": "https://stackoverflow.com/questions/58631505/inverting-binary-tree-with-stdunique-ptr", "title": "Inverting Binary Tree with std::unique_ptr", "body": "<p>I'm pretty comfortable with dealing with inverting a binary tree, with using raw pointers, but I'm struggling when trying to do it with unique_ptrs.</p>\n\n<p>I have a TreeNode class defined as follows:</p>\n\n<pre><code>template&lt;typename T&gt;\nstruct TreeNode {\n    T val;\n    unique_ptr&lt;TreeNode&lt;T&gt;&gt; left, right;\n};\n</code></pre>\n\n<p>I currently have this function to invert a binary tree:</p>\n\n<pre><code>TreeNode&lt;int&gt;* InvertTree(const unique_ptr&lt;TreeNode&lt;int&gt;&gt;&amp; root) {\n    if (root == nullptr) {\n        return nullptr;\n    }\n    auto left = InvertTree(root-&gt;left);\n    auto right = InvertTree(root-&gt;right);\n    root-&gt;left = make_unique&lt;TreeNode&lt;int&gt;&gt;(right);\n    root-&gt;right = make_unique&lt;TreeNode&lt;int&gt;&gt;(left);\n\n    return root.get();\n}\n</code></pre>\n\n<p>Is this how it should be done? What's the best way to go about this?</p>\n"}, {"tags": ["c++", "pytorch", "libtorch"], "comments": [{"owner": {"reputation": 7941, "user_id": 300908, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/kzI36.png?s=128&g=1", "display_name": "JoshVarty", "link": "https://stackoverflow.com/users/300908/joshvarty"}, "edited": false, "score": 0, "creation_date": 1572460229, "post_id": 58631466, "comment_id": 103570413, "body": "Can you use <a href=\"https://github.com/pytorch/pytorch/blob/master/c10/core/TensorOptions.h\" rel=\"nofollow noreferrer\"><code>TensorOptions</code></a> to set the device at the same time you create your tensor? Something like <code>auto options = torch::TensorOptions().dtype(torch::kFloat64).device(torch::&zwnj;&#8203;kCUDA, 1)</code>"}], "answers": [{"comments": [{"owner": {"reputation": 2874, "user_id": 1207193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7185bb03c994eb9bb9cc15e4b1443c19?s=128&d=identicon&r=PG", "display_name": "eusoubrasileiro", "link": "https://stackoverflow.com/users/1207193/eusoubrasileiro"}, "edited": false, "score": 0, "creation_date": 1579867996, "post_id": 58631791, "comment_id": 105920009, "body": "no it doesn&#39;t work, it still creates on CPU, a <code>to.device</code> is still needed"}, {"owner": {"reputation": 2120, "user_id": 600791, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/PFky4.jpg?s=128&g=1", "display_name": "JacKeown", "link": "https://stackoverflow.com/users/600791/jackeown"}, "edited": false, "score": 3, "creation_date": 1581025658, "post_id": 58631791, "comment_id": 106302355, "body": "Does it? How can you tell if it&#39;s on the CPU or GPU?"}, {"owner": {"reputation": 2874, "user_id": 1207193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7185bb03c994eb9bb9cc15e4b1443c19?s=128&d=identicon&r=PG", "display_name": "eusoubrasileiro", "link": "https://stackoverflow.com/users/1207193/eusoubrasileiro"}, "reply_to_user": {"reputation": 2120, "user_id": 600791, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/PFky4.jpg?s=128&g=1", "display_name": "JacKeown", "link": "https://stackoverflow.com/users/600791/jackeown"}, "edited": false, "score": 2, "creation_date": 1581699815, "post_id": 58631791, "comment_id": 106536588, "body": "Yes it works! you are right @JacKeown I was confused by this issue here <a href=\"https://github.com/pytorch/pytorch/issues/12506#issuecomment-429573396\" rel=\"nofollow noreferrer\">github.com/pytorch/pytorch/issues/12506#issuecomment-4295733&zwnj;&#8203;96</a>"}, {"owner": {"reputation": 7941, "user_id": 300908, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/kzI36.png?s=128&g=1", "display_name": "JoshVarty", "link": "https://stackoverflow.com/users/300908/joshvarty"}, "edited": false, "score": 0, "creation_date": 1614459662, "post_id": 58631791, "comment_id": 117394065, "body": "This doesn&#39;t seem to work for me anymore... I&#39;ve raise a question about this at: <a href=\"https://discuss.pytorch.org/t/create-tensor-on-cuda-device-in-c/113232\" rel=\"nofollow noreferrer\">discuss.pytorch.org/t/create-tensor-on-cuda-device-in-c/1132&zwnj;&#8203;32</a>"}], "tags": [], "owner": {"reputation": 7941, "user_id": 300908, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/kzI36.png?s=128&g=1", "display_name": "JoshVarty", "link": "https://stackoverflow.com/users/300908/joshvarty"}, "is_accepted": true, "score": 10, "last_activity_date": 1572460622, "creation_date": 1572460622, "answer_id": 58631791, "question_id": 58631466, "link": "https://stackoverflow.com/questions/58631466/create-a-torchtensor-from-c-c-array-without-using-from-blob/58631791#58631791", "title": "Create a torch::Tensor from C/C++ array without using &quot;from_blob(...)...&quot;", "body": "<p>You can read more about tensor creation here: <a href=\"https://pytorch.org/cppdocs/notes/tensor_creation.html\" rel=\"noreferrer\">https://pytorch.org/cppdocs/notes/tensor_creation.html</a></p>\n\n<p>I don't know of any way to create a tensor from an array without using <code>from_blob</code> but you can use <code>TensorOptions</code> to control various things about the tensor including its device.</p>\n\n<p>Based on your example you could create your tensor on the GPU as follows: </p>\n\n<pre><code>double array[] = { 1, 2, 3, 4, 5};\nauto options = torch::TensorOptions().dtype(torch::kFloat64).device(torch::kCUDA, 1);\ntorch::Tensor tharray = torch::from_blob(array, {5}, options);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 103, "user_id": 4885713, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fb4b2a2229a49b5b3b7c089c5e52275?s=128&d=identicon&r=PG&f=1", "display_name": "helloswift123", "link": "https://stackoverflow.com/users/4885713/helloswift123"}, "is_accepted": false, "score": 0, "last_activity_date": 1591418944, "last_edit_date": 1591418944, "creation_date": 1585728878, "answer_id": 60966328, "question_id": 58631466, "link": "https://stackoverflow.com/questions/58631466/create-a-torchtensor-from-c-c-array-without-using-from-blob/60966328#60966328", "title": "Create a torch::Tensor from C/C++ array without using &quot;from_blob(...)...&quot;", "body": "<p>I do not have cleaner way, but I would give you another way to do it.</p>\n\n<pre><code>double array[5] = {1, 2, 3, 4, 5};\nauto tharray = torch::zeros(5,torch::kFloat64) //or use kF64\nstd::memcpy(tharray.data_ptr(),array,sizeof(double)*tharray.numel())\n</code></pre>\n\n<p>Hope its helpful.</p>\n\n<p>Corrected <code>KF64</code> to <code>kFloat64</code> because <code>KF64</code> does not exist in torch</p>\n"}, {"tags": [], "owner": {"reputation": 83, "user_id": 12564547, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/onSeV.jpg?s=128&g=1", "display_name": "Sholto Armstrong", "link": "https://stackoverflow.com/users/12564547/sholto-armstrong"}, "is_accepted": false, "score": 5, "last_activity_date": 1595529270, "creation_date": 1595529270, "answer_id": 63060936, "question_id": 58631466, "link": "https://stackoverflow.com/questions/58631466/create-a-torchtensor-from-c-c-array-without-using-from-blob/63060936#63060936", "title": "Create a torch::Tensor from C/C++ array without using &quot;from_blob(...)...&quot;", "body": "<p>I usually use:</p>\n<pre><code>torch::Tensor tharray = torch::tensor({1, 2, 3, 4, 5}, {torch::kFloat64});\n</code></pre>\n"}], "owner": {"reputation": 2874, "user_id": 1207193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7185bb03c994eb9bb9cc15e4b1443c19?s=128&d=identicon&r=PG", "display_name": "eusoubrasileiro", "link": "https://stackoverflow.com/users/1207193/eusoubrasileiro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5753, "favorite_count": 1, "accepted_answer_id": 58631791, "answer_count": 3, "score": 3, "last_activity_date": 1595588775, "creation_date": 1572459298, "last_edit_date": 1595588775, "question_id": 58631466, "link": "https://stackoverflow.com/questions/58631466/create-a-torchtensor-from-c-c-array-without-using-from-blob", "title": "Create a torch::Tensor from C/C++ array without using &quot;from_blob(...)...&quot;", "body": "<p>Using the C++ libtorch frontend for <a href=\"https://pytorch.org/\" rel=\"nofollow noreferrer\"><code>Pytorch</code></a></p>\n<p>I want to create a  <code>torch::Tensor</code> from a C++ <code>double[]</code> array.  Comming from a legacy C/C++ API.\nI could not find a simple documentation about the subject not in <a href=\"https://pytorch.org/cppdocs/frontend.html\" rel=\"nofollow noreferrer\">docs</a> nor in the forums.</p>\n<p>Something like:</p>\n<pre><code>double array[5] = {1, 2, 3, 4, 5};\nauto tharray = torch::Tensor(array, 5, torch::Device(torch::kCUDA));\n</code></pre>\n<p>The only thing I found is to use <code>torch::from_blob</code> but then I would have to <code>clone()</code> and use <code>to(device)</code> if I wanted to use it with CUDA.</p>\n<pre><code>double array[] = { 1, 2, 3, 4, 5};\nauto options = torch::TensorOptions().dtype(torch::kFloat64);\ntorch::Tensor tharray = torch::from_blob(array, {5}, options);\n</code></pre>\n<p>Is there any cleaner way of doing so?</p>\n"}, {"tags": ["c++", "c++17", "glfw", "stb-image"], "comments": [{"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1572459792, "post_id": 58631465, "comment_id": 103570228, "body": "Quick test is to use an absolute path.  If this works then the problem is the current working directory is not where you think it is when the application is running (so amend the paths).  If the absolute path does not work you either have an API (bad parameters) or data content (icon not in the right format)  issue"}, {"owner": {"reputation": 37, "user_id": 12102199, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mBWRe11IHFLJOaJ29T3Kr0EB9fQN0k4snumv-IS=k-s128", "display_name": "Kenny Tutorials", "link": "https://stackoverflow.com/users/12102199/kenny-tutorials"}, "reply_to_user": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1572461029, "post_id": 58631465, "comment_id": 103570796, "body": "Thanks, i&#39;ll check now"}], "answers": [{"tags": [], "owner": {"reputation": 23, "user_id": 12656417, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mC5WAifJQStH7_ASZnIMVNjdh8AP93vpb0n-Hq3qg=k-s128", "display_name": "Kshitij azad", "link": "https://stackoverflow.com/users/12656417/kshitij-azad"}, "is_accepted": false, "score": 0, "last_activity_date": 1605174390, "creation_date": 1605174390, "answer_id": 64801519, "question_id": 58631465, "link": "https://stackoverflow.com/questions/58631465/c-glfw-setwindowicon/64801519#64801519", "title": "C++ GLFW setWindowIcon", "body": "<p>I think you are confused in path. The path of the image should be relative to your .vcxproj files</p>\n<pre><code>\u251c\u2500\u2500\u2500assets\n\u2502   \u251c\u2500\u2500\u2500Logos\n|   |   |_ Icon.png\n|   |   \n\u2502   \u251c\u2500\u2500\u2500Shaders\n\u2502   \u2514\u2500\u2500\u2500textures\n\u2514\u2500\u2500\u2500src\n|\n|___.vcxproj \n</code></pre>\n<p>I used this code:</p>\n<pre><code>int width, height, chennal;\nstbi_uc* img = stbi_load(&quot;assets/Logos/Icon.png&quot;, &amp;width, &amp;height, &amp;chennal, 0); //rgba channels \nif (img == NULL) std::cout &lt;&lt; &quot;Icon Can Not Be Loaded\\n&quot;;\nm_Images-&gt;height = height;\nm_Images-&gt;width = width;\nm_Images[0].pixels = img;\nglfwSetWindowIcon(m_Window, 1, m_Images);\n</code></pre>\n"}], "owner": {"reputation": 37, "user_id": 12102199, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mBWRe11IHFLJOaJ29T3Kr0EB9fQN0k4snumv-IS=k-s128", "display_name": "Kenny Tutorials", "link": "https://stackoverflow.com/users/12102199/kenny-tutorials"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 452, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1605174390, "creation_date": 1572459297, "question_id": 58631465, "link": "https://stackoverflow.com/questions/58631465/c-glfw-setwindowicon", "title": "C++ GLFW setWindowIcon", "body": "<p>So with created a window in C ++ using the GLFW library which also creates an OpenGL context. And after that I decided to add an icon to this window. There were 2 options, use either STB or SOIL to load the icon. I chose STB Image. I downloaded it and added it to my project. Everything works no errors, but for some reason my icon does not appear. It seems like the path I indicated is correct and included the path in the project in VS 2019.</p>\n\n<p>Since I use premake5 to set the paths and to simplify the assembly, my path is specified how <code>\"%{prj.name}/libs/stb/include\"</code> and in VS 2019 there is just a path based on the name of the application <code>libs/stb/include</code> .</p>\n\n<p><a href=\"https://i.stack.imgur.com/WPMYn.png\" rel=\"nofollow noreferrer\">Here the image</a></p>\n\n<p>And it's my code:</p>\n\n<pre><code>#define STB_IMAGE_IMPLEMENTATION\n#include \"CTXEngine/utils/stb_image.h\"\n\nvoid WinWindow::setIcon()\n{\n    //stb load \n\n    GLFWimage images[2];\n    images[0].pixels = stbi_load(\"assets/textures/logo_16x16.png\", &amp;images[0].width, &amp;images[0].height, 0, 4);\n    images[1].pixels = stbi_load(\"assets/textures/logo_32x32.png\", &amp;images[1].width, &amp;images[1].height, 0, 4);\n    glfwSetWindowIcon(this-&gt;window, 1, images);\n\n    stbi_image_free(images[0].pixels);\n    stbi_image_free(images[1].pixels);\n}\n</code></pre>\n\n<p>If you need see my window creating code, here it its:</p>\n\n<pre><code>#include \"GLFW/glfw3.h\"\n\n/*\n    Intialize the WINDOWS GLFW library for window. If library is not \n    initialize, then application will be closed.\n*/\nvoid WinWindow::initLibrary()\n{\n    if (!glfwInit())\n    {\n        this-&gt;glfwInitialized = false;\n    }\n    else\n    {\n        this-&gt;glfwInitialized = true;\n    }\n\n    if (!this-&gt;glfwInitialized)\n    {\n        CTX_ENGINE_ERROR(\"Glfw window is not initialized.\")\n        CTX_ENGINE_INFO(\"Shuttdown internal servers...\")\n        exit(-1);\n    }\n}\n\n/*\n    Create new WINDOWS GLFW window and create the context form graphical API\n    OpenGl.\n*/\nvoid WinWindow::createWindow()\n{\n    CTX_ENGINE_INFO(\"Creating GLFW window...\")\n    this-&gt;initLibrary();\n\n    /* Create a windowed mode window and its OpenGL context */\n    this-&gt;window = glfwCreateWindow(this-&gt;width, this-&gt;height, this-&gt;title, this-&gt;fullscreen ? glfwGetPrimaryMonitor() : NULL, NULL);\n\n    if (!window)\n    {\n        CTX_ENGINE_ERROR(\"Glfw window is not initialized.\")\n        CTX_ENGINE_INFO(\"Shuttdown internal servers...\")\n        this-&gt;terminateAPI();\n        exit(-1);\n    }\n\n    this-&gt;videoMode = glfwGetVideoMode(glfwGetPrimaryMonitor());\n\n    /* Make the window's context current */\n    glfwMakeContextCurrent(this-&gt;window);\n    glfwSetWindowTitle(this-&gt;window, this-&gt;title);\n    glfwSetWindowSize(this-&gt;window, this-&gt;width, this-&gt;height);\n    glfwSetWindowAspectRatio(this-&gt;window, 16, 9);\n    glfwSetWindowSizeLimits(this-&gt;window, 854, 480, 1600, 900);\n    glfwSetWindowPos(this-&gt;window, ((this-&gt;videoMode-&gt;width - this-&gt;width) / 2),\n        ((this-&gt;videoMode-&gt;height - this-&gt;height) / 2));\n}\n</code></pre>\n\n<p>And finally code in the init function:</p>\n\n<pre><code>#include \"CTXImportHeaders.h\"\n#include \"CTXEngine/core/Core.h\"              //its just my class\n#include \"CTXEngine/core/CoreBehaviour.h\"     //its just my class\n#include \"CTXEngine/settings/GameSettings.h\"  //its just my class\n\nusing namespace std;\n\n/*\n    This method be inititalize all core engine classes, structs, namespaces,\n    and other parameters, and configurations.\n*/\nvoid Core::init()\n{\n    GameSettings settings;\n\n    this-&gt;window.setTitle(settings.gameTitle); // move params to game configuration\n    this-&gt;window.setWindowResolution(settings.gameWidth, settings.gameHeight); // move params to game configuration\n    this-&gt;window.setFullscreen(settings.gameFullscreen);\n    this-&gt;window.setIcon();\n    this-&gt;window.createWindow();\n\n}\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/t1tYc.png\" rel=\"nofollow noreferrer\">Its screenshot of my window without icon</a></p>\n"}, {"tags": ["c++", "arrays", "vector", "floating-point", "floating"], "comments": [{"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 1, "creation_date": 1572462031, "post_id": 58631459, "comment_id": 103571189, "body": "You seem to misunderstand how floating point numbers work. When assigned to a <code>float</code>, all of <code>1</code>, <code>1.0f</code>, <code>1.00000f</code> yield exactly the same number. If <code>f</code> or the exact amount of zeroes after the <code>.</code> matter, you should store the numbers as strings."}], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 9843341, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b33c4071fd0edf3dea232462c9776e9?s=128&d=identicon&r=PG&f=1", "display_name": "Alex Tsypurdei", "link": "https://stackoverflow.com/users/9843341/alex-tsypurdei"}, "edited": false, "score": 0, "creation_date": 1572462423, "post_id": 58632044, "comment_id": 103571343, "body": "this stuff works for output , but I need to save in vector  these numbers(1.00000f    -1.00000f   1.00000f) instead  of (1 , -1 , 1)"}, {"owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "reply_to_user": {"reputation": 41, "user_id": 9843341, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b33c4071fd0edf3dea232462c9776e9?s=128&d=identicon&r=PG&f=1", "display_name": "Alex Tsypurdei", "link": "https://stackoverflow.com/users/9843341/alex-tsypurdei"}, "edited": false, "score": 2, "creation_date": 1572462824, "post_id": 58632044, "comment_id": 103571495, "body": "@AlexTsypurdei: What you save in the vector has whatever precision the type supports, so with a <code>float</code> it&#39;ll typically have around 6 decimal digits of precision. By default, however, trailing zeros won&#39;t show when you print them out."}], "tags": [], "owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "is_accepted": true, "score": 1, "last_activity_date": 1572461752, "creation_date": 1572461752, "answer_id": 58632044, "question_id": 58631459, "link": "https://stackoverflow.com/questions/58631459/floating-numbers-c-how-to-add-f-in-the-end-for-each-element-of-array/58632044#58632044", "title": "Floating numbers C++ , How to add &quot;f&quot; in the end for each element of array", "body": "<p>It sounds like you want something on the order of:</p>\n\n<pre><code>std::cout &lt;&lt; std::fixed &lt;&lt; std::setprecision(5) &lt;&lt; value &lt;&lt; \"f\";\n</code></pre>\n\n<p>for example:</p>\n\n<pre><code>float values[] = { 1.0f, -1.0f, 1.0f };\n\nfor (auto const &amp;value : values)\n    std::cout &lt;&lt; std::fixed &lt;&lt; std::setprecision(5) &lt;&lt; value &lt;&lt; \"f\\t\";\n</code></pre>\n\n<p>Result:</p>\n\n<pre><code>1.00000f    -1.00000f   1.00000f\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 9843341, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b33c4071fd0edf3dea232462c9776e9?s=128&d=identicon&r=PG&f=1", "display_name": "Alex Tsypurdei", "link": "https://stackoverflow.com/users/9843341/alex-tsypurdei"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "accepted_answer_id": 58632044, "answer_count": 1, "score": 0, "last_activity_date": 1572461752, "creation_date": 1572459283, "question_id": 58631459, "link": "https://stackoverflow.com/questions/58631459/floating-numbers-c-how-to-add-f-in-the-end-for-each-element-of-array", "title": "Floating numbers C++ , How to add &quot;f&quot; in the end for each element of array", "body": "<p>I just opend  filename.file , saved each floating number in vector \"vertices\" but they are saved as ineteger numbers.Need to convert all numbers correctly to float.\nFor example : from \"1\" to \"1.00000f\" or atleast from \"1\" to \"1.0f\".</p>\n\n<pre><code>/////filename.file\n...\nv 1.000000 1.000000 -1.000000\nv 1.000000 -1.000000 -1.000000\nv 1.000000 1.000000 1.000000\nv 1.000000 -1.000000 1.000000\nv -1.000000 1.000000 -1.000000\nv -1.000000 -1.000000 -1.000000\nv -1.000000 1.000000 1.000000\n...\n//////\n\n\nstd::vector&lt;float&gt; vertices;\n\nstd::ifstream file(filename); \n\n    std::string line;\n\n    while (std::getline(file, line))\n    {\n\n        std::istringstream iss(line);\n\n        std::string result;\n\n        if (std::getline(iss, result, ' '))\n        {\n\n            if (result == \"v\")\n            {\n\n\n\n                while (std::getline(iss, token, ' '))\n                {\n                    std::istringstream iss1(token);\n\n                    if (std::getline(iss1, word))\n                    {\n                        float word_float = std::stof(word);\n\n                        //std::cout &lt;&lt; word_float &lt;&lt; std::endl;\n                        vertices.push_back(word_float);\n                    }\n                }\n            }\n        }\n    }\n\n//Look what I got\nfor(std::size_t i = 0 ; i &lt; vertices.size(); i++) {\n std::cout &lt;&lt; vertices[i] &lt;&lt; \" \";\n}\n</code></pre>\n\n<p>/* Each element\n1\n-1\n1\n...</p>\n\n<p>// But these numbers should be saved exactly so</p>\n\n<p>1.000000f\n-1.000000f\n1.000000f\n...\n*/</p>\n"}, {"tags": ["c++", "multithreading", "tbb", "intel-inspector"], "comments": [{"owner": {"reputation": 42446, "user_id": 902497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff13ece6277497484bfa2911c6183a30?s=128&d=identicon&r=PG", "display_name": "Raymond Chen", "link": "https://stackoverflow.com/users/902497/raymond-chen"}, "edited": false, "score": 1, "creation_date": 1572462174, "post_id": 58631333, "comment_id": 103571242, "body": "The comment explains. If it returns <code>false</code>, then it means that the lock was released and reacquired, so the data that the lock was protecting was momentarily unprotected."}, {"owner": {"reputation": 7769, "user_id": 271599, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/de267f213b375efca5da07890e5efc25?s=128&d=identicon&r=PG", "display_name": "dromodel", "link": "https://stackoverflow.com/users/271599/dromodel"}, "reply_to_user": {"reputation": 42446, "user_id": 902497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff13ece6277497484bfa2911c6183a30?s=128&d=identicon&r=PG", "display_name": "Raymond Chen", "link": "https://stackoverflow.com/users/902497/raymond-chen"}, "edited": false, "score": 0, "creation_date": 1572468193, "post_id": 58631333, "comment_id": 103573674, "body": "So I should be wary of the value having changed if the return value was false?"}, {"owner": {"reputation": 42446, "user_id": 902497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff13ece6277497484bfa2911c6183a30?s=128&d=identicon&r=PG", "display_name": "Raymond Chen", "link": "https://stackoverflow.com/users/902497/raymond-chen"}, "edited": false, "score": 0, "creation_date": 1572468820, "post_id": 58631333, "comment_id": 103573961, "body": "That&#39;s what the comment says, yes."}, {"owner": {"reputation": 26552, "user_id": 448932, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QgLLl.png?s=128&g=1", "display_name": "500 - Internal Server Error", "link": "https://stackoverflow.com/users/448932/500-internal-server-error"}, "edited": false, "score": 0, "creation_date": 1572468901, "post_id": 58631333, "comment_id": 103573995, "body": "Odd design choice, it seems, to release a held reader lock in an attempt to upgrade it."}, {"owner": {"reputation": 796, "user_id": 2611220, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a5966b6236b635eeb2b2a05427f6dad?s=128&d=identicon&r=PG", "display_name": "cahuson", "link": "https://stackoverflow.com/users/2611220/cahuson"}, "edited": false, "score": 0, "creation_date": 1572479917, "post_id": 58631333, "comment_id": 103577179, "body": "On some architectures it is necessary.  It will tell you if it released, and you know the value may have changed if it had to be released."}, {"owner": {"reputation": 11603, "user_id": 654891, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/156c04def2a7958f8254305ecffc9822?s=128&d=identicon&r=PG", "display_name": "Alexey Kukanov", "link": "https://stackoverflow.com/users/654891/alexey-kukanov"}, "edited": false, "score": 0, "creation_date": 1573046740, "post_id": 58631333, "comment_id": 103752877, "body": "If two or more readers hold the lock and try to upgrade simultaneously, only one can succeed, no matter which architecture is used. The only alternative to this design choice would be to release the lock without re-acquiring, which seems to be worse."}], "owner": {"reputation": 7769, "user_id": 271599, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/de267f213b375efca5da07890e5efc25?s=128&d=identicon&r=PG", "display_name": "dromodel", "link": "https://stackoverflow.com/users/271599/dromodel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 65, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1572461251, "creation_date": 1572458648, "last_edit_date": 1572461251, "question_id": 58631333, "link": "https://stackoverflow.com/questions/58631333/what-is-the-significance-of-dropping-the-reader-lock-for-a-read-write-mutex", "title": "What is the significance of dropping the reader lock for a read/write mutex?", "body": "<p>I'm writing some TBB code and would like to use the TBB <a href=\"https://www.threadingbuildingblocks.org/docs/help/reference/synchronization/mutexes/readerwritermutex_concept.html\" rel=\"nofollow noreferrer\">read/write mutex</a>. There is a return value for upgrading to a writer shown:</p>\n\n<pre><code>//Change reader lock to writer lock. Return false if lock\n// was released and reacquired. true otherwise, including if\n// the lock was already a writer lock.\nbool RW::scoped_lock::upgrade_to_writer()\n</code></pre>\n\n<p>What is the significance of this return value? For reference, my implementation looks correct to me but Intel Inspector is reporting a data race inside the critical section and I'm suspicious that it may have something to do with this variable.</p>\n"}, {"tags": ["c++", "c++11"], "comments": [{"owner": {"reputation": 67968, "user_id": 584192, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YBSIc.png?s=128&g=1", "display_name": "Samuel Liew", "link": "https://stackoverflow.com/users/584192/samuel-liew"}, "edited": false, "score": 1, "creation_date": 1572467718, "post_id": 58631260, "comment_id": 103573467, "body": "Comments are not for extended discussion; this conversation has been <a href=\"https://chat.stackoverflow.com/rooms/201623/discussion-on-question-by-noodlez-how-can-i-find-and-display-something-in-a-data\">moved to chat</a>."}], "answers": [{"tags": [], "owner": {"reputation": 96, "user_id": 10872971, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KyzoD.png?s=128&g=1", "display_name": "Mustafa Kemal GILOR", "link": "https://stackoverflow.com/users/10872971/mustafa-kemal-gilor"}, "is_accepted": true, "score": 1, "last_activity_date": 1572511839, "creation_date": 1572511839, "answer_id": 58639655, "question_id": 58631260, "link": "https://stackoverflow.com/questions/58631260/how-can-i-find-and-display-something-in-a-data-file/58639655#58639655", "title": "How can I find and display something in a data file?", "body": "<p>The case 3 requires to perform filtering on data. You need to check the filter condition before printing the data out.  <strong>Very</strong> crude way of doing this is as follows;</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>/* ... */\n\ncin &gt;&gt; payamount;\n\nifstream inFile(\"personnel.dat\", ios::in);\n\nwhile((inFile &gt;&gt; firstname &gt;&gt; lastname &gt;&gt; employid &gt;&gt; hours &gt;&gt; payrate &gt;&gt;\n                taxrate &gt;&gt; grosspay &gt;&gt; taxes &gt;&gt; netpay)) {\n    if(netpay &lt; payamount) // this might not be correct, change it to your own criteria if it's wrong\n    {\n\n        count++;\n        taxp = taxrate * 100;\n        cout &lt;&lt; \"\\n\\n Record Number: \" &lt;&lt; count;\n        cout &lt;&lt; \"\\n\\n First Name: \" &lt;&lt; firstname;\n        cout &lt;&lt; \"\\n\\n Last Name: \" &lt;&lt; lastname;\n        cout &lt;&lt; \"\\n\\n Employee's ID #: \" &lt;&lt; employid;\n        cout &lt;&lt; \"\\n\\n Hours Worked: \" &lt;&lt; hours;\n        cout &lt;&lt; \"\\n\\n Pay Rate: \" &lt;&lt; payrate;\n        cout &lt;&lt; \"\\n\\n Gross Pay: $\" &lt;&lt; grosspay;\n        cout &lt;&lt; \"\\n\\n Taxes: \" &lt;&lt; taxes;\n        cout &lt;&lt; \"\\n\\n Net Pay: $\" &lt;&lt; netpay;\n        cout &lt;&lt; \"\\n\\n Tax Rate: \" &lt;&lt; taxp &lt;&lt; \"%\";\n    }\n}\n\ncout &lt;&lt; \"\\n\\n Total Numbers of Files: \" &lt;&lt; count;\ninFile.close();\ncount = 0;\ncout &lt;&lt; \"\\n\\n Press Any Keys to Continue...\";\ngetch();\nbreak;\n/* ... */\n</code></pre>\n\n<p>... but I strongly recommend defining a struct/class for employee and making employee print code block to a function. Also I replaced (!inFile.eof()) with stream expression, suggested by others in discussion for this question.</p>\n"}], "owner": {"reputation": 53, "user_id": 10704930, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-TZ6ofXAArHI/AAAAAAAAAAI/AAAAAAAAG_E/Za88IKVxSDM/photo.jpg?sz=128", "display_name": "Noodlez", "link": "https://stackoverflow.com/users/10704930/noodlez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "accepted_answer_id": 58639655, "answer_count": 1, "score": 0, "last_activity_date": 1572511839, "creation_date": 1572458351, "last_edit_date": 1572459647, "question_id": 58631260, "link": "https://stackoverflow.com/questions/58631260/how-can-i-find-and-display-something-in-a-data-file", "title": "How can I find and display something in a data file?", "body": "<pre><code>#include &lt;fstream&gt;\n#include &lt;iomanip&gt;\n#include &lt;iostream&gt;\n#include &lt;conio.h&gt;\n#include &lt;math.h&gt;\n#include &lt;stdlib.h&gt;\n\nusing namespace std;\n\nint main() {\n    int option, recordnum, count = 0;\n    float grosspay, hours, payrate, taxes, taxrate, netpay, taxp, payamount;\n    char firstname[10], lastname[10], employid[10], again = 'y';\n\n    do {\n        system(\"cls\");\n        cout &lt;&lt; \"Enter An Option.\\n\";\n        cout &lt;&lt; \"1. Write new Records to the Data File.\\n\";\n        cout &lt;&lt; \"2. Display Records from the Data File.\\n\";\n        cout &lt;&lt; \"3. Find all records with a pay rate less than $ N dollar per \"\n                \"hour.\\n\";\n        cout &lt;&lt; \"4. Exit\\n\";\n        cout &lt;&lt; \"What would you like to do?: \";\n        cin &gt;&gt; option;\n        option = fabs(option);\n\n        if(option &lt; 1 or option &gt; 4) {\n            system(\"cls\");\n            cout &lt;&lt; \"Enter An Option.\\n\";\n            cout &lt;&lt; \"1. Write new Records to the Data File.\\n\";\n            cout &lt;&lt; \"2. Display Records from the Data File.\\n\";\n            cout &lt;&lt; \"3. Find all records with a pay rate less than $ N dollar per \"\n                    \"hour.\\n\";\n            cout &lt;&lt; \"4. Exit\\n\";\n            cout &lt;&lt; \"What would you like to do?: \"\n                 &lt;&lt; \"\\n\";\n            cin &gt;&gt; option;\n        }\n\n        system(\"cls\");\n        switch(option) {\n        case 1: {\n            ofstream outFile(\"personnel.dat\", ios::out | ios::app);\n            outFile.precision(2);\n            outFile.setf(ios::fixed);\n\n            cout &lt;&lt; \"How Many Records Do You Want to Enter?: \";\n            cin &gt;&gt; recordnum;\n            recordnum = abs(recordnum);\n\n            if(recordnum == 0) break;\n\n            for(int count = 1; count &lt;= recordnum; count++) {\n                system(\"cls\");\n                cout &lt;&lt; \"Enter Employee's First Name: \";\n                cin &gt;&gt; firstname;\n                cout &lt;&lt; \"Enter Employee's Last Name: \";\n                cin &gt;&gt; lastname;\n                cout &lt;&lt; \"Enter Employee's ID #: \";\n                cin &gt;&gt; employid;\n                cout &lt;&lt; \"Enter Employee's Hours Worked: \";\n                cin &gt;&gt; hours;\n                hours = fabs(hours);\n                cout &lt;&lt; \"Enter Employee's Pay Rate: \";\n                cin &gt;&gt; payrate;\n                payrate = fabs(payrate);\n                cout &lt;&lt; \"Enter Employee's Tax Rate: \";\n                cin &gt;&gt; taxrate;\n                taxrate = fabs(taxrate);\n\n                grosspay = hours * payrate;\n                taxes = grosspay * taxrate;\n                netpay = grosspay * taxes;\n\n                outFile &lt;&lt; firstname &lt;&lt; \" \" &lt;&lt; lastname &lt;&lt; \" \" &lt;&lt; employid &lt;&lt; \" \"\n                        &lt;&lt; hours &lt;&lt; \" \" &lt;&lt; payrate &lt;&lt; \" \" &lt;&lt; taxrate &lt;&lt; \" \"\n                        &lt;&lt; grosspay &lt;&lt; \" \" &lt;&lt; taxes &lt;&lt; \" \" &lt;&lt; netpay &lt;&lt; \" \"\n                        &lt;&lt; \"\\n\";\n            }\n            outFile.close();\n            break;\n        }\n        case 2: {\n            ifstream inFile(\"personnel.dat\", ios::in);\n            inFile &gt;&gt; firstname &gt;&gt; lastname &gt;&gt; employid &gt;&gt; hours &gt;&gt; payrate &gt;&gt;\n                taxrate &gt;&gt; grosspay &gt;&gt; taxes &gt;&gt; netpay;\n\n            while(!inFile.eof()) {\n                count++;\n                taxp = taxrate * 100;\n                cout &lt;&lt; \"\\n\\n Record Number: \" &lt;&lt; count;\n                cout &lt;&lt; \"\\n\\n First Name: \" &lt;&lt; firstname;\n                cout &lt;&lt; \"\\n\\n Last Name: \" &lt;&lt; lastname;\n                cout &lt;&lt; \"\\n\\n Employee's ID #: \" &lt;&lt; employid;\n                cout &lt;&lt; \"\\n\\n Hours Worked: \" &lt;&lt; hours;\n                cout &lt;&lt; \"\\n\\n Pay Rate: \" &lt;&lt; payrate;\n                cout &lt;&lt; \"\\n\\n Gross Pay: $\" &lt;&lt; grosspay;\n                cout &lt;&lt; \"\\n\\n Taxes: \" &lt;&lt; taxes;\n                cout &lt;&lt; \"\\n\\n Net Pay: $\" &lt;&lt; netpay;\n                cout &lt;&lt; \"\\n\\n Tax Rate: \" &lt;&lt; taxp &lt;&lt; \"%\";\n                inFile &gt;&gt; firstname &gt;&gt; lastname &gt;&gt; employid &gt;&gt; hours &gt;&gt; payrate &gt;&gt;\n                    taxrate &gt;&gt; grosspay &gt;&gt; taxes &gt;&gt; netpay;\n            }\n\n            cout &lt;&lt; \"\\n\\n Total Numbers of Files: \" &lt;&lt; count;\n            inFile.close();\n            count = 0;\n            cout &lt;&lt; \"\\n\\n Press Any Keys to Continue...\";\n            getch();\n            break;\n        }\n        case 3: {\n            cout &lt;&lt; \"Enter the Pay Rate amount to Find All Employee's Pay Rate Less \"\n                    \"than: \";\n            cin &gt;&gt; payamount;\n\n            for(payamount = payamount; payamount &lt;= payamount; payamount++) {\n            }\n        }\n        }\n        while(again == 'y')\n            ;\n    }\n}\n</code></pre>\n\n<p>So for case 3, I have to find the pay amount that is less than the pay amount inputted and display it. But i also have to display everything along with that pay amount, ie the first name, last name, empid, etc. Would i need to do another inFile along with a for loop? or would I have to do something else?</p>\n"}, {"tags": ["c++", "struct"], "comments": [{"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 0, "creation_date": 1572458473, "post_id": 58631258, "comment_id": 103569609, "body": "The function doesn&#39;t seem to be part of the struct/class, at least not from what you have shown. Although you are missing quite a bit for a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}, {"owner": {"reputation": 789, "user_id": 8120642, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-OX8-_3nAbeE/AAAAAAAAAAI/AAAAAAAAAAA/of7PUZBmbk4/photo.jpg?sz=128", "display_name": "hegel5000", "link": "https://stackoverflow.com/users/8120642/hegel5000"}, "edited": false, "score": 4, "creation_date": 1572458634, "post_id": 58631258, "comment_id": 103569689, "body": "Structs aren&#39;t a thing in C++.  The <code>struct</code> keyword is just an alternate way to declare a class (and a C++ class happens to be similar to a C struct in many ways).  It&#39;s also grammatical to stick the keyword <code>struct</code> in front of a class name, but that doesn&#39;t do anything: it&#39;s just there to maintain compatibility with C."}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 0, "creation_date": 1572458669, "post_id": 58631258, "comment_id": 103569701, "body": "Why do you include the word <code>struct</code> in <code>int freq_sort(unsigned char* source, struct freq_pair* target);</code>? You don&#39;t put <code>class</code> in similar places, do you?"}, {"owner": {"reputation": 45, "user_id": 7124242, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LuuJv.jpg?s=128&g=1", "display_name": "Trent Wilson", "link": "https://stackoverflow.com/users/7124242/trent-wilson"}, "reply_to_user": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 0, "creation_date": 1572458715, "post_id": 58631258, "comment_id": 103569721, "body": "No functions are part of the struct- only the unsigned char &amp; int as shown in the last code snippet. But I may not be fully understanding your comment. @UnholySheep"}, {"owner": {"reputation": 45, "user_id": 7124242, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LuuJv.jpg?s=128&g=1", "display_name": "Trent Wilson", "link": "https://stackoverflow.com/users/7124242/trent-wilson"}, "reply_to_user": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 0, "creation_date": 1572458982, "post_id": 58631258, "comment_id": 103569852, "body": "Perhaps its in C only and not C++, but I find the keyword struct to essentially be part of the type definition. I could not for instance, instantiate a new struct local variable without it. That is why I thought (incorrectly here) to add it in the parameter list. @TedLyngmo"}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 2, "creation_date": 1572459050, "post_id": 58631258, "comment_id": 103569882, "body": "&quot;<i>I could not for instance, instantiate a new struct local variable without it</i>&quot; - Try it, you will get surprised :-) <code>freq_pair my_local_instance;</code>"}, {"owner": {"reputation": 20522, "user_id": 11941443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f27a880243178eedf3abdab24898b335?s=128&d=identicon&r=PG&f=1", "display_name": "walnut", "link": "https://stackoverflow.com/users/11941443/walnut"}, "edited": false, "score": 0, "creation_date": 1572459129, "post_id": 58631258, "comment_id": 103569914, "body": "@TrentWilson That is true in C, but not the case in C++. Make sure you are indeed always compiling as C++ and if you get an error while compiling as C++ this means that you didn&#39;t actually declare the <code>struct</code> before you used it. If you then add <code>struct</code> as a keyword in the variable definition, you are declaring a new <code>struct</code> in the scope of the variable definition, which may be a <i>different class</i> than the <code>struct</code> defined later in a different scope that you intended to refer to."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "reply_to_user": {"reputation": 789, "user_id": 8120642, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-OX8-_3nAbeE/AAAAAAAAAAI/AAAAAAAAAAA/of7PUZBmbk4/photo.jpg?sz=128", "display_name": "hegel5000", "link": "https://stackoverflow.com/users/8120642/hegel5000"}, "edited": false, "score": 1, "creation_date": 1572459206, "post_id": 58631258, "comment_id": 103569936, "body": "@hegel5000 There <i>are</i> small differences between <code>struct</code> and <code>class</code> in C++. In a <code>struct</code>, members are <code>public</code> by default, in a <code>class</code> they are <code>private</code> by default. The <i>default</i> inheritance relationship for a <code>struct</code> is <i>public inheritance</i>, for a <code>class</code> it is <i>private inheritance</i>."}, {"owner": {"reputation": 789, "user_id": 8120642, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-OX8-_3nAbeE/AAAAAAAAAAI/AAAAAAAAAAA/of7PUZBmbk4/photo.jpg?sz=128", "display_name": "hegel5000", "link": "https://stackoverflow.com/users/8120642/hegel5000"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1572459747, "post_id": 58631258, "comment_id": 103570202, "body": "@JesperJuhl  I had completely forgotten about the inheritance thing! (I&#39;ve always defensively stuck the <code>public</code> keyword on when inheriting)"}, {"owner": {"reputation": 20522, "user_id": 11941443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f27a880243178eedf3abdab24898b335?s=128&d=identicon&r=PG&f=1", "display_name": "walnut", "link": "https://stackoverflow.com/users/11941443/walnut"}, "reply_to_user": {"reputation": 789, "user_id": 8120642, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-OX8-_3nAbeE/AAAAAAAAAAI/AAAAAAAAAAA/of7PUZBmbk4/photo.jpg?sz=128", "display_name": "hegel5000", "link": "https://stackoverflow.com/users/8120642/hegel5000"}, "edited": false, "score": 3, "creation_date": 1572459965, "post_id": 58631258, "comment_id": 103570305, "body": "@hegel5000 For this question it is probably also important to realize that <code>struct</code> in a variable declaration <i>does do something</i>: If name lookup does not find a declaration for the type, <code>struct</code> will (instead of failing) declare a new class in the scope of the variable declaration. That is probably what is happening here one way or another, but there is no way to say for sure until OP provides more code."}, {"owner": {"reputation": 1487, "user_id": 4954108, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/35e4ac731500b39e1284406a3e90b765?s=128&d=identicon&r=PG&f=1", "display_name": "rtpax", "link": "https://stackoverflow.com/users/4954108/rtpax"}, "edited": false, "score": 0, "creation_date": 1572463074, "post_id": 58631258, "comment_id": 103571610, "body": "Is the definition of freq_pair in this header file (if so is the definition before the definition of TargaImage)? In another header file (if so have you included that file)? Since you only need a pointer you could also put the line <code>struct freq_pair;</code> before the definition of TargaImage (but you will need the full definition before you can implement it)"}], "answers": [{"comments": [{"owner": {"reputation": 20522, "user_id": 11941443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f27a880243178eedf3abdab24898b335?s=128&d=identicon&r=PG&f=1", "display_name": "walnut", "link": "https://stackoverflow.com/users/11941443/walnut"}, "edited": false, "score": 0, "creation_date": 1572471375, "post_id": 58632838, "comment_id": 103574883, "body": "The unintuitive forward declaration into the global scope is indeed specified by the standard, see my answer or e.g. <a href=\"https://stackoverflow.com/questions/24423481/a-class-name-introduced-inside-a-class-is-not-treated-as-a-nested-class-name\">this question</a>."}, {"owner": {"reputation": 1536, "user_id": 631266, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a6ba5d18865bebe8b087f8e0209b892?s=128&d=identicon&r=PG", "display_name": "Avi Berger", "link": "https://stackoverflow.com/users/631266/avi-berger"}, "reply_to_user": {"reputation": 20522, "user_id": 11941443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f27a880243178eedf3abdab24898b335?s=128&d=identicon&r=PG&f=1", "display_name": "walnut", "link": "https://stackoverflow.com/users/11941443/walnut"}, "edited": false, "score": 0, "creation_date": 1572475655, "post_id": 58632838, "comment_id": 103576163, "body": "@uneven_mark Thank you. I found part of this, but was missing a few pieces in trying to sort out the standard. +1 to your answer."}], "tags": [], "owner": {"reputation": 1536, "user_id": 631266, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a6ba5d18865bebe8b087f8e0209b892?s=128&d=identicon&r=PG", "display_name": "Avi Berger", "link": "https://stackoverflow.com/users/631266/avi-berger"}, "is_accepted": false, "score": 2, "last_activity_date": 1572474934, "last_edit_date": 1572474934, "creation_date": 1572465744, "answer_id": 58632838, "question_id": 58631258, "link": "https://stackoverflow.com/questions/58631258/what-is-different-about-c-class-function-parameter-syntax-when-one-of-them-is/58632838#58632838", "title": "What is different about C++ class function parameter syntax when one of them is a struct?", "body": "<p>The keyword struct is optional, and normally not used, in C++ except when defining or (forward) declaring the type.</p>\n\n<p>If you remove \"struct\" from the parameter list in the function declaration, you will get a different error indicating that the type freq_pair has not been declared.</p>\n\n<p>If you move the definition of freq_pair before the function definition in the class it will compile as expected. Alternatively, a forward declaration of the type in the class before the function will also work.</p>\n\n<p>This is normal.</p>\n\n<p>What I found surprising here is the error message you received. It indicated that due to your use of the keyword struct in the function declaration parameter list, the compiler has registered that parameter specifier as a forward declaration of a globally scoped struct freq_pair which is never defined in your code and is different from your nested type.</p>\n\n<p>This form of forward declaration is a part of the standard as described and documented with references in uneven_mark's answer. In short, using the class or struct keyword makes this an \"elaborated type specifier\" and triggers this behavior. Further, also as pointed out in that answer, class scope is not considered by the standard to be an eligible scoping for the forward declared type, so in your case you end up with the type declared at global scope.</p>\n"}, {"tags": [], "owner": {"reputation": 20522, "user_id": 11941443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f27a880243178eedf3abdab24898b335?s=128&d=identicon&r=PG&f=1", "display_name": "walnut", "link": "https://stackoverflow.com/users/11941443/walnut"}, "is_accepted": true, "score": 3, "last_activity_date": 1572472325, "last_edit_date": 1572472325, "creation_date": 1572470255, "answer_id": 58633772, "question_id": 58631258, "link": "https://stackoverflow.com/questions/58631258/what-is-different-about-c-class-function-parameter-syntax-when-one-of-them-is/58633772#58633772", "title": "What is different about C++ class function parameter syntax when one of them is a struct?", "body": "<p>C++ is compiled from the top down to the bottom of the source code. Except in templates, each time an identifier is encountered, <em>name lookup</em> is performed. This means the compiler tries to find a reachable declaration of the identifier in the previous part of the source code.</p>\n\n<p>Here you use the identifier <code>freq_pair</code> the first time in the function parameter inside</p>\n\n<pre><code>int freq_sort(unsigned char* source, struct freq_pair* target);\n</code></pre>\n\n<p>Because it was not declared beforehand, the compiler does not know yet what <code>freq_pair</code> is supposed to be. Usually that would result in an error saying that <code>freq_pair</code> is undeclared. However the <code>struct</code> keyword basically tells the compiler: \"<em><code>freq_pair</code> is a class type and if you don't find such a class type, then declare it here.</em>\"</p>\n\n<p>Therefore <code>freq_pair</code> will be declared, but the question is <em>where exactly</em> (i.e. in which <em>scope</em>) it will be declared. It could be declared as a nested class (<code>struct</code> and <code>class</code> both introduce classes, in C++ there is no distinction between the two with regards to type identity) inside <code>TargaImage</code>, as a local class to the function or as a global class. In fact the latter is the case, as <a href=\"https://timsong-cpp.github.io/cppwp/n4659/basic.scope#pdecl-7.2\" rel=\"nofollow noreferrer\">[basic.scope.pdecl]/7.2</a> of the C++17 standard (draft N4659) specifies (see also <a href=\"https://stackoverflow.com/questions/24423481/a-class-name-introduced-inside-a-class-is-not-treated-as-a-nested-class-name\">this question</a> for a similar case):</p>\n\n<blockquote>\n  <p>for an <em>elaborated-type-specifier</em> of the form</p>\n  \n  <blockquote>\n    <p><em>class-key identifier</em></p>\n  </blockquote>\n  \n  <p>if [...]; otherwise, except as a friend declaration, the identifier is declared in the smallest namespace or block scope that contains the declaration.</p>\n</blockquote>\n\n<p>An <em>elaborated-type-specifier</em> is a type specifier that uses <code>struct</code> or one of the other <em>class-key</em> keywords, i.e. exactly what you have with <code>struct freq_pair</code>. Your function declaration is inside a class scope (which is neither a namespace scope nor a block scope), therefore the declaration of <code>freq_pair</code> cannot be placed there. The next smallest scope containing <code>class TargaImage {...};</code> is the global scope, which <em>is</em> considered a namespace scope. Thus the line</p>\n\n<pre><code>int freq_sort(unsigned char* source, struct freq_pair* target);\n</code></pre>\n\n<p>declares a global <code>struct freq_pair</code> and the type referred to in the declaration is that type.</p>\n\n<p>Then</p>\n\n<pre><code>struct freq_pair {\n   unsigned char val;\n   int count;\n};\n</code></pre>\n\n<p>defines a class <code>freq_pair</code> nested inside the class <code>TargaImage</code>. This is <em>not the same</em> class as the global one your declared beforehand.</p>\n\n<p>Then we come to the definition</p>\n\n<pre><code>int TargaImage::freq_sort(unsigned char* source, struct freq_pair* target){\n    return 0;  \n}\n</code></pre>\n\n<p>Here, because we are defining a function which is part of <code>TargaImage</code>, the name <code>freq_pair</code> is first looked up inside <code>TargaImage</code>, where we <em>now</em> see the definition <code>struct freq_pair {...};</code> which declared a <code>freq_pair</code> nested inside <code>TargaImage</code>, i.e. <code>TargaImage::freq_pair</code>. The <code>struct</code> keyword does not have any further effect if a type matching the name <em>can</em> be found, so <code>freq_pair</code> in this definition now refers to <code>TargaImage::freq_pair</code>.</p>\n\n<p>As a result you have declared a member function taking a pointer to the global <code>::freq_pair</code>, but tried to define a member function taking a pointer to the nested <code>::TargaImage::freq_pair</code>. The compiler complains that these do not match up.</p>\n\n<hr>\n\n<p>To resolve the issue remove all the <code>struct</code> keywords inside variable declarations and use it only to define or explicitly forward-declare classes. As you can see, using it as elaborated type specifier only causes headaches. The same rule applies to the other elaborated type specifiers, i.e. those beginning with <code>class</code>/<code>enum</code>/<code>union</code>.</p>\n\n<p>Doing so will however result in an error because <code>freq_pair</code> is not found in the member declaration as I explained above. This is easily resolved by moving the definition of <code>freq_pair</code> before the point of use:</p>\n\n<pre><code>class TargaImage\n{\npublic:\n    //data member \n    struct freq_pair {\n       unsigned char val;\n       int count;\n    };\n\n    //function\n    int freq_sort(unsigned char* source, freq_pair* target);\n};\n\nint TargaImage::freq_sort(unsigned char* source, freq_pair* target){\n  return 0;  \n}\n</code></pre>\n\n<p>If that is not possible for whatever reason, then you can use a forward declaration to make sure that the first lookup finds the correct type (even if it is <em>incomplete</em> at that point):</p>\n\n<pre><code>class TargaImage\n{\n  public:\n\n    //explicit forward declaration\n    struct freq_pair;\n\n    //function\n    int freq_sort(unsigned char* source, freq_pair* target);\n\n    //data member \n    struct freq_pair {\n       unsigned char val;\n       int count;\n    };\n};\n\nint TargaImage::freq_sort(unsigned char* source, freq_pair* target){\n  return 0;  \n}\n</code></pre>\n\n<hr>\n\n<p>Also note that <code>freq_pair</code> is a <em>nested class</em>, not a <em>data member</em>.</p>\n"}], "owner": {"reputation": 45, "user_id": 7124242, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LuuJv.jpg?s=128&g=1", "display_name": "Trent Wilson", "link": "https://stackoverflow.com/users/7124242/trent-wilson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 197, "favorite_count": 2, "accepted_answer_id": 58633772, "answer_count": 2, "score": 2, "last_activity_date": 1572474934, "creation_date": 1572458333, "last_edit_date": 1572462163, "question_id": 58631258, "link": "https://stackoverflow.com/questions/58631258/what-is-different-about-c-class-function-parameter-syntax-when-one-of-them-is", "title": "What is different about C++ class function parameter syntax when one of them is a struct?", "body": "<p>When writing a new class function, it is usually safe for me to copy the function definition's first line (from a source file) to the class header to add the declaration so that it is part of the class. I don't usually use structs in C++ but now that I have, I ran into the case where there seems to be some special case about specifying the struct in the parameter list in the definition. The struct is a data member of the same class.</p>\n\n<p>Function definition in header file:</p>\n\n<pre><code>int freq_sort(unsigned char* source, struct freq_pair* target);\n\n</code></pre>\n\n<p>First line of that function definition in the source file:</p>\n\n<pre><code>int TargaImage::freq_sort(unsigned char* source, struct freq_pair* target){\n</code></pre>\n\n<p>Compiler error regarding declaration:</p>\n\n<pre><code>TargaImage.cpp:324:5: error: no declaration matches \u2018int TargaImage::freq_sort(unsigned char*, TargaImage::freq_pair*)\u2019\n  324 | int TargaImage::freq_sort(unsigned char* source, struct freq_pair* target){\n      |     ^~~~~~~~~~\n</code></pre>\n\n<p>Compiler error suggesting the correct definition:</p>\n\n<pre><code>TargaImage.h:96:13: note: candidate is: \u2018int TargaImage::freq_sort(unsigned char*, freq_pair*)\u2019\n   96 |         int freq_sort(unsigned char* source, struct freq_pair* target);\n      |             ^~~~~~~~~\n</code></pre>\n\n<p>Struct data member:</p>\n\n<pre><code>        struct freq_pair {\n            unsigned char val;\n            int count;\n        };\n</code></pre>\n\n<p>I see the key difference in what the compiler sees is the scope resolution operator used with the struct parameter in the definition but not the declaration. I do not understand why this is. What is happening here?</p>\n\n<p>I tried to add class scope to the struct parameter in either the definition, the declaration, or both in order to cajole it into working but to no avail. Even if it did though, I wouldn't understand what the issue is.</p>\n\n<p>What's my next step to finding the issue here?</p>\n\n<p>Thanks,<br>\nTrent</p>\n\n<p><strong>EDIT 1:</strong></p>\n\n<p>Here is the minimum reproducible code of the original problem with no changes from insights gained from the comments. </p>\n\n<pre><code>class TargaImage\n{\n  public:\n    //function\n    int freq_sort(unsigned char* source, struct freq_pair* target);\n\n    //data member \n    struct freq_pair {\n       unsigned char val;\n       int count;\n    };\n};\n\nint TargaImage::freq_sort(unsigned char* source, struct freq_pair* target){\n  return 0;  \n}\n\nint main(){\n  TargaImage obj;\n  return 0;\n}\n</code></pre>\n\n<p>Now I understand to think of structs in a similar way as classes.  So, if I'm essentially defining a new \"class\"(struct) inside my original class, the rules for including that class for use must be different than the usual preprocessor directive. I'd think that since the new freq_pair \"class\"(struct) is inside the original TargaImage class that its definition is within the scope of a TargaImage member function. So, remove struct keyword from parameters. But I get the error: </p>\n\n<pre><code>main.cpp:6:42: error: \u2018freq_pair\u2019 has not been declared\n    6 |     int freq_sort(unsigned char* source, freq_pair* target);\n      |   \n</code></pre>\n\n<p>So my conclusion is that freq_pair is out of scope of TargaImage although it is defined inside the class. Is this conclusion correct? How should I inform TargaImage::freq_sort(...) of the class type freq_pair? </p>\n\n<p>I thought adding a C style struct as a data member was a good idea, but a main takeaway may be to define a class elsewhere that holds the pair of data members that the struct was holding.</p>\n"}, {"tags": ["c#", "c++", ".net", "unmanaged"], "comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 7, "creation_date": 1572458514, "post_id": 58631216, "comment_id": 103569632, "body": "Recommendation: Don&#39;t translate code literally. <a href=\"https://en.wikipedia.org/wiki/All_your_base_are_belong_to_us\" rel=\"nofollow noreferrer\">You wind up with garbage all too often</a>, and the programs that do work are almost always poor. What you need to do to get a good result is fully understand the behaviour of the source program and re-implement that behaviour in the new language, using the structure, libraries, and idioms of that new language to the fullest."}, {"owner": {"reputation": 4400, "user_id": 574531, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c32fe01c48edccb228f69feb0377b7a?s=128&d=identicon&r=PG", "display_name": "Herohtar", "link": "https://stackoverflow.com/users/574531/herohtar"}, "edited": false, "score": 2, "creation_date": 1572458515, "post_id": 58631216, "comment_id": 103569633, "body": "If you&#39;re moving away from C++ it would probably be best to rewrite the code using the C#/.NET ways of doing things instead of trying to do a one-to-one mapping using pointers and such, otherwise you might as well just leave your code in C++."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 2, "creation_date": 1572458648, "post_id": 58631216, "comment_id": 103569692, "body": "For example, I would be quite surprised if the .Net libraries do not already have a bitmap file reader/writer that you can use instead."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1572459700, "post_id": 58631216, "comment_id": 103570174, "body": "<i>This code is taking the pointer and adding the size of BITMAPHeader and adding another pointer data to it</i> --  You need to understand the code at a higher-level.  Your C++ code shows low-level BMP handling in C or C++.  There is no need to go low-level for .NET languages, since handling images and bitmaps should be available in one or more of the .NET classes."}, {"owner": {"reputation": 10586, "user_id": 170383, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4d9f7a30948dca1bbd05eaf27f277ae6?s=128&d=identicon&r=PG", "display_name": "David R Tribble", "link": "https://stackoverflow.com/users/170383/david-r-tribble"}, "edited": false, "score": 0, "creation_date": 1572460164, "post_id": 58631216, "comment_id": 103570386, "body": "Looks like you are copying raw image data from a bitmap struct. This data would be stored as a byte array in C#, so use <code>Array.Copy()</code>."}], "answers": [{"comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1572468507, "post_id": 58631451, "comment_id": 103573808, "body": "I&#39;d say you have to worry about pointers less. You can still blow a program up with them, it&#39;s just harder and less frequent."}], "tags": [], "owner": {"reputation": 166, "user_id": 634805, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KiUeA.jpg?s=128&g=1", "display_name": "Smolakian", "link": "https://stackoverflow.com/users/634805/smolakian"}, "is_accepted": false, "score": 3, "last_activity_date": 1572459236, "creation_date": 1572459236, "answer_id": 58631451, "question_id": 58631216, "link": "https://stackoverflow.com/questions/58631216/how-to-copy-data-from-pointer-to-pointer-in-c/58631451#58631451", "title": "How to copy data from Pointer to Pointer in C#?", "body": "<p>You don't need to worry about pointers in C# everything is managed!</p>\n\n<p>If you're trying to work with bitmap data use the managed <a href=\"https://docs.microsoft.com/en-us/dotnet/api/system.drawing.bitmap?view=netframework-4.8\" rel=\"nofollow noreferrer\">Bitmap</a> class and create the bitmap using a stream set to the raw byte data. Alternatively, you can use the <a href=\"https://docs.microsoft.com/en-us/dotnet/api/system.windows.media.imaging.bitmapsource?view=netframework-4.8\" rel=\"nofollow noreferrer\">BitmapSource</a> class.</p>\n\n<p>If you <em>are</em> actually still interacting with unmanaged code and trying to get data in and out of that, you can use <a href=\"https://docs.microsoft.com/en-us/dotnet/api/system.runtime.interopservices.gchandle?view=netframework-4.8\" rel=\"nofollow noreferrer\">GCHandle</a> and pinned buffers. But if you are converting something into pure C#, you should be able to ditch the pointers entirely. Just think of them as object instances and architect from that...</p>\n"}], "owner": {"reputation": 195, "user_id": 2093914, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/f3323737736f684566dbc1e56f3ff80a?s=128&d=identicon&r=PG&f=1", "display_name": "Suresh Kumar", "link": "https://stackoverflow.com/users/2093914/suresh-kumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 227, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1572459236, "creation_date": 1572458173, "last_edit_date": 1572458345, "question_id": 58631216, "link": "https://stackoverflow.com/questions/58631216/how-to-copy-data-from-pointer-to-pointer-in-c", "title": "How to copy data from Pointer to Pointer in C#?", "body": "<p>I am converting a legacy C++ code and need help with memcpy_s equivalent in C#. I need to copy data that is in one pointer to a another pointer as shown in this C++ code. </p>\n\n<p>I tried C++ CopyMemory, Array.Copy and other methods as per google, however none of them seem to be helping. I would like to convert the equivalent in C# of the following code shown below. any help would be highly appreciated. </p>\n\n<pre><code>memcpy_s((char*)pDIB + sizeof(BITMAPINFOHEADER), bmpHeader.biSizeImage,\n            pRawData, bmpHeader.biSizeImage);\n</code></pre>\n\n<p>This code is taking the pointer and adding the size of BITMAPHeader and adding another pointer data to it. I dont see any Marshal.PointerToPointer in C# and not sure how to write this.</p>\n"}, {"tags": ["c++", "arrays"], "comments": [{"owner": {"reputation": 1975, "user_id": 6070341, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YHHZU.png?s=128&g=1", "display_name": "Costantino Grana", "link": "https://stackoverflow.com/users/6070341/costantino-grana"}, "edited": false, "score": 4, "creation_date": 1572457766, "post_id": 58631105, "comment_id": 103569295, "body": "What can you use?"}, {"owner": {"reputation": 1975, "user_id": 6070341, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YHHZU.png?s=128&g=1", "display_name": "Costantino Grana", "link": "https://stackoverflow.com/users/6070341/costantino-grana"}, "edited": false, "score": 3, "creation_date": 1572457804, "post_id": 58631105, "comment_id": 103569312, "body": "I mean, can you use std::vector?"}, {"owner": {"reputation": 1975, "user_id": 6070341, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YHHZU.png?s=128&g=1", "display_name": "Costantino Grana", "link": "https://stackoverflow.com/users/6070341/costantino-grana"}, "edited": false, "score": 2, "creation_date": 1572457825, "post_id": 58631105, "comment_id": 103569322, "body": "What about malloc?"}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1572458131, "post_id": 58631105, "comment_id": 103569466, "body": "Do you mean &#39;without heap allocations&#39;?"}, {"owner": {"reputation": 7526, "user_id": 4108376, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/163807162a115b27e50f5f5f2b90de26?s=128&d=identicon&r=PG&f=1", "display_name": "tmlen", "link": "https://stackoverflow.com/users/4108376/tmlen"}, "edited": false, "score": 0, "creation_date": 1572458167, "post_id": 58631105, "comment_id": 103569481, "body": "maybe make a class with a private <code>std::vector&lt;std::vector&lt;T&gt;&gt;</code>"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1572458212, "post_id": 58631105, "comment_id": 103569504, "body": "How about <code>std::make_unique</code>? <a href=\"https://stackoverflow.com/a/2076668/4581301\">But seriously, here&#39;s the right&lt;sup&gt;1&lt;/sup&gt; way.</a> &lt;sup&gt;1&lt;/sup&gt;Right for for a common pool of problems."}, {"owner": {"reputation": 480272, "user_id": 1968, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fdd630f72eef3790bfb4ef38d08c7f85?s=128&d=identicon&r=PG", "display_name": "Konrad Rudolph", "link": "https://stackoverflow.com/users/1968/konrad-rudolph"}, "reply_to_user": {"reputation": 7526, "user_id": 4108376, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/163807162a115b27e50f5f5f2b90de26?s=128&d=identicon&r=PG&f=1", "display_name": "tmlen", "link": "https://stackoverflow.com/users/4108376/tmlen"}, "edited": false, "score": 2, "creation_date": 1572458333, "post_id": 58631105, "comment_id": 103569558, "body": "@tmlen That\u2019s a <i>nested</i> array instead of a 2D array. I know that nested arrays are occasionally used to implement multi-dimensional arrays but they\u2019re a <i>bad</i> implementation."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1572461527, "post_id": 58631105, "comment_id": 103570994, "body": "I expect this is a request to use a VLA even though they are illegal in standard <code>c++</code> <a href=\"https://stackoverflow.com/questions/1887097/why-arent-variable-length-arrays-part-of-the-c-standard\">https://stackoverflow.com/questions/1887097/why-arent-variab&zwnj;&#8203;le-length-arrays-par&zwnj;&#8203;t-of-the-c-standard</a>"}, {"owner": {"reputation": 9311, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1572466983, "post_id": 58631105, "comment_id": 103573190, "body": "Do they give you a <i>maximum</i> size for those matrices? Those pointers they are talking about must point somewhere."}, {"owner": {"reputation": 33, "user_id": 12282180, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-5cfQeP0q_SU/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reasB3gmoWP5ymGT5oIVPP5yZ8K1g/photo.jpg?sz=128", "display_name": "Max", "link": "https://stackoverflow.com/users/12282180/max"}, "edited": false, "score": 0, "creation_date": 1572467374, "post_id": 58631105, "comment_id": 103573336, "body": "To my understanding, maximum size is input by the user"}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 0, "creation_date": 1572467751, "post_id": 58631105, "comment_id": 103573489, "body": "@Max The size input by the user is the size of the array. The point is that is there a maximum for what the user is allowed to give. If you can assume a maximum, then you don&#39;t need to create the array dynamically."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1572468724, "post_id": 58631105, "comment_id": 103573922, "body": "Confirm with your instructor whether or not you are not allowed to use <code>malloc</code>. It&#39;s old and <a href=\"https://www.youtube.com/watch?v=YnWhqhNdYyk\" rel=\"nofollow noreferrer\">it&#39;s better suited to C programming</a>, but it is probably what the instructor intends for you to use."}, {"owner": {"reputation": 33, "user_id": 12282180, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-5cfQeP0q_SU/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reasB3gmoWP5ymGT5oIVPP5yZ8K1g/photo.jpg?sz=128", "display_name": "Max", "link": "https://stackoverflow.com/users/12282180/max"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1572469130, "post_id": 58631105, "comment_id": 103574091, "body": "@user4581301 we are allowed to use malloc."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1572469230, "post_id": 58631105, "comment_id": 103574134, "body": "Then that&#39;s your last hope. <a href=\"https://en.cppreference.com/w/cpp/memory/c/malloc\" rel=\"nofollow noreferrer\">Read up on how it works</a> and try your best to avoid its many failings."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1572469501, "post_id": 58631105, "comment_id": 103574253, "body": "A recommendation though, make one big allocation of size MxN and perform the mapping between 1 and 2 dimensions with a helper function (<code>index = row * N + column</code>). One allocation is faster and easier to deal with than many. <a href=\"https://isocpp.org/wiki/faq/operator-overloading#matrix-subscript-op\" rel=\"nofollow noreferrer\">Here is a good example</a> the relevant differences to you are you need to replace calls to <code>new</code> with <code>malloc</code> and calls to <code>delete</code> with <code>free</code>."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1572469572, "post_id": 58631105, "comment_id": 103574278, "body": "Pay special attention to the copy constructor and the assignment operator because without them you&#39;ll almost certainly run afoul of <a href=\"https://stackoverflow.com/questions/4172722/what-is-the-rule-of-three\">The Rule of Three</a>."}, {"owner": {"reputation": 33, "user_id": 12282180, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-5cfQeP0q_SU/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reasB3gmoWP5ymGT5oIVPP5yZ8K1g/photo.jpg?sz=128", "display_name": "Max", "link": "https://stackoverflow.com/users/12282180/max"}, "edited": false, "score": 0, "creation_date": 1572471306, "post_id": 58631105, "comment_id": 103574867, "body": "<code>malloc</code> did the trick! Thanks"}, {"owner": {"reputation": 33, "user_id": 12282180, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-5cfQeP0q_SU/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reasB3gmoWP5ymGT5oIVPP5yZ8K1g/photo.jpg?sz=128", "display_name": "Max", "link": "https://stackoverflow.com/users/12282180/max"}, "edited": false, "score": 0, "creation_date": 1572477579, "post_id": 58631105, "comment_id": 103576653, "body": "Thanks! I&#39;ve corrected it."}], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 12282180, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-5cfQeP0q_SU/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reasB3gmoWP5ymGT5oIVPP5yZ8K1g/photo.jpg?sz=128", "display_name": "Max", "link": "https://stackoverflow.com/users/12282180/max"}, "edited": false, "score": 0, "creation_date": 1572466449, "post_id": 58631328, "comment_id": 103572992, "body": "My bad, didn&#39;t specify I can&#39;t use other libraries, just good old <code>int arr [ ]</code> arrays"}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "reply_to_user": {"reputation": 33, "user_id": 12282180, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-5cfQeP0q_SU/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reasB3gmoWP5ymGT5oIVPP5yZ8K1g/photo.jpg?sz=128", "display_name": "Max", "link": "https://stackoverflow.com/users/12282180/max"}, "edited": false, "score": 1, "creation_date": 1572466552, "post_id": 58631328, "comment_id": 103573030, "body": "@Max then your task is impossible in standard c++. <code>new</code> is the only way to create dynamic objects or arrays."}], "tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": false, "score": 4, "last_activity_date": 1572467692, "last_edit_date": 1572467692, "creation_date": 1572458638, "answer_id": 58631328, "question_id": 58631105, "link": "https://stackoverflow.com/questions/58631105/dynamic-2d-array-without-using-new/58631328#58631328", "title": "Dynamic 2D array without using new", "body": "<p><code>new</code> is the only way to create dynamic objects or arrays in standard C++. So, depending on how you interpret the task, it could be considered impossible.</p>\n\n<p>If we assume that it is OK for you to call a standard function that internally calls <code>new</code>, then the problem is solvable. A commonly used way to create a dynamic array in C++ is to use <code>std::vector</code>. Elements of <code>std::vector</code> may not be arrays however, so a 2D dynamic array is not technically possible using it. One workaround is to wrap the array within a class, and use the class as element of the vector. There is a standard template for such array wrapper: <code>std::array</code>. An example of a vector of array wrappers:</p>\n\n<pre><code>std::vector&lt;std::array&lt;type_of_element, 10&gt;&gt; name_of_vector(number_of_arrays);\n</code></pre>\n\n<p>The elements of the arrays within the dynamic array managed by the vector will have effectively the same layout as a 2D array would.</p>\n"}, {"tags": [], "owner": {"reputation": 33, "user_id": 12282180, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-5cfQeP0q_SU/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reasB3gmoWP5ymGT5oIVPP5yZ8K1g/photo.jpg?sz=128", "display_name": "Max", "link": "https://stackoverflow.com/users/12282180/max"}, "is_accepted": false, "score": 2, "last_activity_date": 1572477558, "creation_date": 1572477558, "answer_id": 58634901, "question_id": 58631105, "link": "https://stackoverflow.com/questions/58631105/dynamic-2d-array-without-using-new/58634901#58634901", "title": "Dynamic 2D array without using new", "body": "<p><code>malloc</code> did the trick. Here is the code I used to test it. It was a bit convoluted to figure out how to write the matrix loop but once I got it down I realized how obvious it was.</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>Matriz::Matriz(int numFil, int numCol)\n    :numFil(numFil), numCol(numCol)\n{\n    mat = (int *)malloc(numFil * numCol * sizeof (int));\n\n    int c = 0;\n\n    for(int i = 0; i &lt; numFil; i++)\n    {\n        for(int j = 0; j &lt; numCol; j++)\n        {\n            *(mat + i * numCol + j) = ++c;\n        }\n    }\n}\n\nvoid Matriz::printMat()\n{\n    for(int i = 0; i &lt; numFil; i++)\n    {\n        for(int j = 0; j &lt; numCol; j++)\n        {\n            std::cout &lt;&lt; *(mat + i*numCol + j);\n        }\n         std::cout &lt;&lt; std::endl;\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 12282180, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-5cfQeP0q_SU/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reasB3gmoWP5ymGT5oIVPP5yZ8K1g/photo.jpg?sz=128", "display_name": "Max", "link": "https://stackoverflow.com/users/12282180/max"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 132, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1572477558, "creation_date": 1572457678, "last_edit_date": 1572477538, "question_id": 58631105, "link": "https://stackoverflow.com/questions/58631105/dynamic-2d-array-without-using-new", "title": "Dynamic 2D array without using new", "body": "<p>I've been posed with creating a dynamic 2D array in C++ without using new in C++. I have been trying for a while to make something work but I'm clueless as to what I'm supposed to do. </p>\n\n<p><strong>Edit:</strong> Sorry, should have been more specific. Just to be transparent, yes it is homework, and no I don't want it solved I just want to be pointed (no pun intended) in the right direction to code it myself.</p>\n\n<p>The order, for reference, is as follow: Develop a console application to create a type <code>int</code> matrix of size <em>m x n</em> using pointers. The user must input the values for the size of the matrix from the keyboard and its contents must be randomly generated (1 - 100). Then, the transpose of the matrix must be calculated and shown (it's necessary to create classes). </p>\n\n<p>We can't use new, nor vector, as we have to do it just via pointers with uni-dimensional arrays. So far I created a class that represent the \"rows\", and another class which represents the \"columns\". The columns go into the rows and the rows go into another class called matrix. That was the idea but was having trouble implementing it.</p>\n"}, {"tags": ["c++", "algorithm", "recursion"], "comments": [{"owner": {"reputation": 33, "user_id": 12275549, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f9c854d5ddabcbe243f85144865f9a1?s=128&d=identicon&r=PG&f=1", "display_name": "Matcha_boy98", "link": "https://stackoverflow.com/users/12275549/matcha-boy98"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1572457454, "post_id": 58630975, "comment_id": 103569142, "body": "@tadman done my bad"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1572457629, "post_id": 58630975, "comment_id": 103569233, "body": "You should be able to tear this problem apart by stepping through the program with a debugger and keeping an eye out for the unexpected."}, {"owner": {"reputation": 11552, "user_id": 8112138, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f3b1ddf31abbf37d5fe71ad387e2772c?s=128&d=identicon&r=PG&f=1", "display_name": "Primusa", "link": "https://stackoverflow.com/users/8112138/primusa"}, "edited": false, "score": 2, "creation_date": 1572457748, "post_id": 58630975, "comment_id": 103569285, "body": "Note: It&#39;s not an 11, it&#39;s two ones that don&#39;t have a whitespace between them. Try <code>cout &lt;&lt; n &lt;&lt; &quot; &quot;;</code>"}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 0, "creation_date": 1572458055, "post_id": 58630975, "comment_id": 103569433, "body": "I found <code>int H ( int n ) {     cout &lt;&lt; &#39;#&#39; &lt;&lt; n &lt;&lt; endl;   int retval;   if ( n == 1 ) retval = 0;   else if ( n%2 != 0 ) retval = 1 + H ( 3*n + 1 );   else retval = H ( n&#47;2 );   cout &lt;&lt; &quot; &quot; &lt;&lt; n &lt;&lt; &quot; &quot; &lt;&lt; retval &lt;&lt; endl;   return retval;    }  </code> very informative"}, {"owner": {"reputation": 33, "user_id": 12275549, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f9c854d5ddabcbe243f85144865f9a1?s=128&d=identicon&r=PG&f=1", "display_name": "Matcha_boy98", "link": "https://stackoverflow.com/users/12275549/matcha-boy98"}, "reply_to_user": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 0, "creation_date": 1572458528, "post_id": 58630975, "comment_id": 103569641, "body": "@MartinBonner that makes it much clearer but i cant understand from where we are getting the last two 1&#39;s"}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 1, "creation_date": 1572458809, "post_id": 58630975, "comment_id": 103569772, "body": "The last but one &quot;1&quot; comes from <code>cout &lt;&lt; &quot; &quot; &lt;&lt; n;</code>.  The final &quot;1&quot; comes from <code>cout &lt;&lt; H(10) &lt;&lt; endl;</code> in <code>main</code>."}, {"owner": {"reputation": 33, "user_id": 12275549, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f9c854d5ddabcbe243f85144865f9a1?s=128&d=identicon&r=PG&f=1", "display_name": "Matcha_boy98", "link": "https://stackoverflow.com/users/12275549/matcha-boy98"}, "reply_to_user": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 0, "creation_date": 1572460425, "post_id": 58630975, "comment_id": 103570511, "body": "@MartinBonner so the function basically return n which is the one coming from right 1+H(16)?"}, {"owner": {"reputation": 3226, "user_id": 2928853, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/dbIon.png?s=128&g=1", "display_name": "jrook", "link": "https://stackoverflow.com/users/2928853/jrook"}, "edited": false, "score": 2, "creation_date": 1572460497, "post_id": 58630975, "comment_id": 103570544, "body": "<code>H(10) = H(5) = 1 + H(16) = 1 + H(8) = 1 + H(4) = 1 + H(2) = 1 + H(1) = 1 + 0 = 1</code>"}], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 12275549, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f9c854d5ddabcbe243f85144865f9a1?s=128&d=identicon&r=PG&f=1", "display_name": "Matcha_boy98", "link": "https://stackoverflow.com/users/12275549/matcha-boy98"}, "edited": false, "score": 0, "creation_date": 1572463824, "post_id": 58631840, "comment_id": 103571923, "body": "So it adds 1 to the original value? or is it some indentation mistake because i was able to get 1 1 after adding a space"}, {"owner": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "reply_to_user": {"reputation": 33, "user_id": 12275549, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f9c854d5ddabcbe243f85144865f9a1?s=128&d=identicon&r=PG&f=1", "display_name": "Matcha_boy98", "link": "https://stackoverflow.com/users/12275549/matcha-boy98"}, "edited": false, "score": 0, "creation_date": 1572463967, "post_id": 58631840, "comment_id": 103571990, "body": "@Matcha_boy98 What do you mean? <code>H(10)=H(5)=1+H(16)=1+H(8)=1+H(4)=1+H(2)=1+H(1)=1+0=1</code>then you print <code>10 5 16 8 4 2 1 1</code> that&#39;s all."}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "reply_to_user": {"reputation": 33, "user_id": 12275549, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f9c854d5ddabcbe243f85144865f9a1?s=128&d=identicon&r=PG&f=1", "display_name": "Matcha_boy98", "link": "https://stackoverflow.com/users/12275549/matcha-boy98"}, "edited": false, "score": 0, "creation_date": 1572466575, "post_id": 58631840, "comment_id": 103573040, "body": "@Matcha_boy98 Add a distinct prefix to each <code>cout</code> line (and preferably put on a separate line), and it will become much clearer."}, {"owner": {"reputation": 33, "user_id": 12275549, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f9c854d5ddabcbe243f85144865f9a1?s=128&d=identicon&r=PG&f=1", "display_name": "Matcha_boy98", "link": "https://stackoverflow.com/users/12275549/matcha-boy98"}, "edited": false, "score": 0, "creation_date": 1572466697, "post_id": 58631840, "comment_id": 103573093, "body": "How can i do that, do you mean with a prefix to indent the lines?"}, {"owner": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "reply_to_user": {"reputation": 33, "user_id": 12275549, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f9c854d5ddabcbe243f85144865f9a1?s=128&d=identicon&r=PG&f=1", "display_name": "Matcha_boy98", "link": "https://stackoverflow.com/users/12275549/matcha-boy98"}, "edited": false, "score": 0, "creation_date": 1572511149, "post_id": 58631840, "comment_id": 103584771, "body": "@Matcha_boy98 Take Martin&#39;s proposal as an exercise! How to generate the output you suggested in the question?"}], "tags": [], "owner": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "is_accepted": true, "score": 0, "last_activity_date": 1572461101, "last_edit_date": 1572461101, "creation_date": 1572460790, "answer_id": 58631840, "question_id": 58630975, "link": "https://stackoverflow.com/questions/58630975/trouble-tracking-recursive-function/58631840#58631840", "title": "Trouble tracking recursive function", "body": "<p>At the end of the recursion, the function prints <code>1</code> then the stack pops everything out and the <code>main</code> prints the returned value <code>1</code> (0 is returned at the end of the recursion and only the call to H(5) adds one to the result), so <code>11</code> is printed.</p>\n"}], "owner": {"reputation": 33, "user_id": 12275549, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f9c854d5ddabcbe243f85144865f9a1?s=128&d=identicon&r=PG&f=1", "display_name": "Matcha_boy98", "link": "https://stackoverflow.com/users/12275549/matcha-boy98"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "accepted_answer_id": 58631840, "answer_count": 1, "score": 0, "last_activity_date": 1572463849, "creation_date": 1572457214, "last_edit_date": 1572463849, "question_id": 58630975, "link": "https://stackoverflow.com/questions/58630975/trouble-tracking-recursive-function", "title": "Trouble tracking recursive function", "body": "<p>I have this code which outputs:  10 5 16 8 4 2 11\nHowever, I don't have any clue from where the 11 is coming from since when tracing i get the following:</p>\n\n<pre><code>H(10)\n H(5)\n  1+H(16) //does this result in 17?\n    H(8)\n      H(4)\n        H(2)\n         H(1) -&gt; returns 0\n</code></pre>\n\n<p>Moreover what happens to the (1) in 1+H(16) ?\nThus shouldnt my output of the n values be: 10 5 17 8 4 2 1</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nint H ( int n ) {\n  cout &lt;&lt; \" \" &lt;&lt; n&lt;&lt;\" \";\n  if ( n == 1 ) return 0;\n  if ( n%2 != 0 ) return 1 + H ( 3*n + 1 );\n  else return H ( n/2 );\n} \n\nint main() {\n//   for ( int i=0; ++i&lt;=20; )\n//     cout &lt;&lt; H(i) &lt;&lt; endl;\ncout &lt;&lt; H(10) &lt;&lt; endl;\n}\n</code></pre>\n"}, {"tags": ["c++", "qt"], "comments": [{"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 2, "creation_date": 1572458130, "post_id": 58630972, "comment_id": 103569464, "body": "<b>*//*foundChat = nullptr; // do I need this?</b> No."}, {"owner": {"reputation": 23130, "user_id": 8586227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BRnwg.png?s=128&g=1", "display_name": "Davis Herring", "link": "https://stackoverflow.com/users/8586227/davis-herring"}, "edited": false, "score": 1, "creation_date": 1572467730, "post_id": 58630972, "comment_id": 103573480, "body": "<code>c=gc;</code> is wrong: that just assigns to the local variable.  Maybe you want <code>auto &amp;c=*foundChat;</code>?"}, {"owner": {"reputation": 96, "user_id": 11228816, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/455119fbc790272ca6624e3686ac26bd?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Burns", "link": "https://stackoverflow.com/users/11228816/ian-burns"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1572473998, "post_id": 58630972, "comment_id": 103575724, "body": "@drescherjm Okay great, thanks! @DavisHerring That looks right! So, if I use that, would using <code>c = gc;</code> successfully change the pointer that the iterator found?"}, {"owner": {"reputation": 23130, "user_id": 8586227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BRnwg.png?s=128&g=1", "display_name": "Davis Herring", "link": "https://stackoverflow.com/users/8586227/davis-herring"}, "edited": false, "score": 1, "creation_date": 1572488317, "post_id": 58630972, "comment_id": 103578874, "body": "@IanBurns: Er, probably\u2014so long as <code>QList</code> isn\u2019t doing something weird and error-prone.  (If it doesn\u2019t compile, Qt is being weird but not error-prone.)"}, {"owner": {"reputation": 96, "user_id": 11228816, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/455119fbc790272ca6624e3686ac26bd?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Burns", "link": "https://stackoverflow.com/users/11228816/ian-burns"}, "reply_to_user": {"reputation": 23130, "user_id": 8586227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BRnwg.png?s=128&g=1", "display_name": "Davis Herring", "link": "https://stackoverflow.com/users/8586227/davis-herring"}, "edited": false, "score": 0, "creation_date": 1572491973, "post_id": 58630972, "comment_id": 103579522, "body": "@DavisHerring Perfect! It seems to compile and update, I think I just need to get my QAbstractListModel updating now to reflect the pointer change. Thank you!"}], "owner": {"reputation": 96, "user_id": 11228816, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/455119fbc790272ca6624e3686ac26bd?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Burns", "link": "https://stackoverflow.com/users/11228816/ian-burns"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 73, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1572531239, "creation_date": 1572457207, "last_edit_date": 1572531239, "question_id": 58630972, "link": "https://stackoverflow.com/questions/58630972/deleting-and-reassigning-a-pointer-from-qlistobject-to-new-object-using-iter", "title": "Deleting and Reassigning a pointer from QList&lt;Object *&gt; to new Object using Iterator, is this right?", "body": "<p>I have a QList and I'm trying to replace the objects in the list with new objects. The context is that I have a list of custom objects (the class name is \"Conversation\") to represent a list of group chats in a messaging platform. I use std::find_if to iterate through the list of pointers to find one with the right ID, and I want to take the pointer to that found object, deallocate it (delete?), and reassign that pointer to point at an object I generate with the \"new\" keyword. I think I'm doing this right but I'm not sure how to verify.</p>\n\n<p>I tried a couple different iterations, ran into some issues where I realized I was using a const_iterator rather than just an iterator, so I couldn't modify any data. But I've fixed that and it seems like it's working, but I'm not positive.</p>\n\n<p>Here's what I've got:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>GroupChat *gc = new GroupChat(); // extends Conversation\n// ...I update the member data here...\n\nauto foundChat = std::find_if(conversations_.Conversations.begin2(),\n conversations_.Conversations.end2(),\n [this, gc](Conversation* o) { // my code to find the correct one...\n}\n\nif (foundChat != conversations_.Conversations.end()) {\n    auto c = (*foundChat);\n    delete c; // Is this right? Not positive...\n    //*foundChat = nullptr; // do I need this?\n    c = gc;\n}\n</code></pre>\n\n<p>It seems like it's working but I'm worried about dangling pointers and incorrect memory deallocation/allocation. Could someone spot check me on this? Thanks for any help!</p>\n"}, {"tags": ["c++", "perforce"], "answers": [{"comments": [{"owner": {"reputation": 577, "user_id": 4577467, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-QeCEV_3eDeM/AAAAAAAAAAI/AAAAAAAAAE0/KhDbuC4MGs4/photo.jpg?sz=128", "display_name": "Mike Finch", "link": "https://stackoverflow.com/users/4577467/mike-finch"}, "edited": false, "score": 0, "creation_date": 1572460625, "post_id": 58630794, "comment_id": 103570601, "body": "Thank you, that is helpful."}], "tags": [], "owner": {"reputation": 31669, "user_id": 3799759, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5820aa24337a2f622b78e92c39e3e3d6?s=128&d=identicon&r=PG", "display_name": "Samwise", "link": "https://stackoverflow.com/users/3799759/samwise"}, "is_accepted": true, "score": 2, "last_activity_date": 1572456489, "creation_date": 1572456489, "answer_id": 58630794, "question_id": 58630631, "link": "https://stackoverflow.com/questions/58630631/get-output-of-perforce-command-run-using-p4api/58630794#58630794", "title": "Get output of Perforce command run using p4api", "body": "<p>The <code>ClientUser</code> object receives the output.  If you run this code from the command line, you'll see the <code>p4 info</code> output being printed by the <code>OutputInfo()</code> method.  </p>\n\n<p>If you want to do something different with the output, subclass <code>ClientUser</code> and implement output methods that do something else.</p>\n\n<p><a href=\"https://www.perforce.com/manuals/v15.1/p4api/chapter.methods.html#clientuser.outputinfo\" rel=\"nofollow noreferrer\">https://www.perforce.com/manuals/v15.1/p4api/chapter.methods.html#clientuser.outputinfo</a></p>\n\n<p>There are lots of examples of this in the Perforce Workshop.  <a href=\"https://swarm.workshop.perforce.com/files/guest/sam_stafford/deepannotate/DAUserFilelog.cpp\" rel=\"nofollow noreferrer\">https://swarm.workshop.perforce.com/files/guest/sam_stafford/deepannotate/DAUserFilelog.cpp</a></p>\n"}], "owner": {"reputation": 577, "user_id": 4577467, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-QeCEV_3eDeM/AAAAAAAAAAI/AAAAAAAAAE0/KhDbuC4MGs4/photo.jpg?sz=128", "display_name": "Mike Finch", "link": "https://stackoverflow.com/users/4577467/mike-finch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 137, "favorite_count": 0, "accepted_answer_id": 58630794, "answer_count": 1, "score": 1, "last_activity_date": 1572456489, "creation_date": 1572455781, "question_id": 58630631, "link": "https://stackoverflow.com/questions/58630631/get-output-of-perforce-command-run-using-p4api", "title": "Get output of Perforce command run using p4api", "body": "<p>I am using the Perforce, a.k.a. Helix Core, C++ API to programmatically run a Perforce command.  All the examples I have found so far are brief, and show how to establish a connection to the server and run the command.  But... then what?  How do I access the output of that command?</p>\n\n<p>A simple example:</p>\n\n<pre><code>#include &lt;p4/clientapi.h&gt;\n\n// Connect to server.\nClientApi client;\nclient.SetProtocol( \"tag\", \"\" );\nclient.Init( &amp;e );\nif ( e.Test() )\n{\n  e.Fmt( &amp;msg );\n  fprintf( stderr, \"%s\\n\", msg.Text() );\n  return;\n}\n\n// Run the command.\nClientUser cu;\nclient.Run( \"info\", &amp;cu );\n\n// Access the output.\nummm... ?\n</code></pre>\n\n<p>(This question deserves a \"p4api\" tag.  But, I do not have enough reputation to create a new tag.)</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 69207, "user_id": 1440565, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/ec430cc01ef4cf4ae63ebbe9e8596f72?s=128&d=identicon&r=PG", "display_name": "Code-Apprentice", "link": "https://stackoverflow.com/users/1440565/code-apprentice"}, "edited": false, "score": 3, "creation_date": 1572455739, "post_id": 58630592, "comment_id": 103568367, "body": "<code>operator&gt;&gt;()</code> ignores whitespace. Use  <code>getline()</code> instead to read an entire line. Alternatively, find a library to read and parse CSV files."}, {"owner": {"reputation": 13, "user_id": 12298805, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDq-xT0te_Xc7mwVweoGb3Yr5trveg8uDRnUPCWIg=k-s128", "display_name": "VMH_97", "link": "https://stackoverflow.com/users/12298805/vmh-97"}, "reply_to_user": {"reputation": 69207, "user_id": 1440565, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/ec430cc01ef4cf4ae63ebbe9e8596f72?s=128&d=identicon&r=PG", "display_name": "Code-Apprentice", "link": "https://stackoverflow.com/users/1440565/code-apprentice"}, "edited": false, "score": 0, "creation_date": 1572455904, "post_id": 58630592, "comment_id": 103568451, "body": "Initially I did use getline(fops,s,&#39;\\n&#39;). But I want to read it word by word so that I can assign each word to another variable."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1572455935, "post_id": 58630592, "comment_id": 103568463, "body": "Related ( help for reading csv files): <a href=\"https://stackoverflow.com/questions/1120140/how-can-i-read-and-parse-csv-files-in-c\">https://stackoverflow.com/questions/1120140/how-can-i-read-a&zwnj;&#8203;nd-parse-csv-files-i&zwnj;&#8203;n-c</a>"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 69207, "user_id": 1440565, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/ec430cc01ef4cf4ae63ebbe9e8596f72?s=128&d=identicon&r=PG", "display_name": "Code-Apprentice", "link": "https://stackoverflow.com/users/1440565/code-apprentice"}, "edited": false, "score": 0, "creation_date": 1572455992, "post_id": 58630592, "comment_id": 103568486, "body": "@Code-Apprentice Stop answering in comments"}], "answers": [{"tags": [], "owner": {"reputation": 69207, "user_id": 1440565, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/ec430cc01ef4cf4ae63ebbe9e8596f72?s=128&d=identicon&r=PG", "display_name": "Code-Apprentice", "link": "https://stackoverflow.com/users/1440565/code-apprentice"}, "is_accepted": false, "score": 2, "last_activity_date": 1572463995, "last_edit_date": 1572463995, "creation_date": 1572456252, "answer_id": 58630742, "question_id": 58630592, "link": "https://stackoverflow.com/questions/58630592/n-not-getting-recognised-while-reading-from-file/58630742#58630742", "title": "&quot;\\n&quot; not getting recognised while reading from file", "body": "<p><code>operator&gt;&gt;()</code> ignores whitespace. Use <code>getline()</code> instead to read an entire line. Alternatively, find a library to read and parse CSV files.</p>\n\n<blockquote>\n  <p>I want to read it word by word so that I can assign each word to another variable.</p>\n</blockquote>\n\n<p>With <code>operator&gt;&gt;()</code> you cannot differentiate between a space <code>' '</code> and a new line <code>'\\n'</code>. You should read an entire line and then parse the line into \"words\".</p>\n"}, {"tags": [], "owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "is_accepted": true, "score": 7, "last_activity_date": 1572456333, "creation_date": 1572456333, "answer_id": 58630758, "question_id": 58630592, "link": "https://stackoverflow.com/questions/58630592/n-not-getting-recognised-while-reading-from-file/58630758#58630758", "title": "&quot;\\n&quot; not getting recognised while reading from file", "body": "<blockquote>\n  <p>I need to read data word by word and stop at the end of the line.</p>\n</blockquote>\n\n<pre><code>#include &lt;sstream&gt; // std::stringstream\n\nfstream fops(\"file.csv\");\nif(fops) { // file opened\n    string line;\n    string word;\n    // while(std::getline(fops, line)) { // to read all lines\n    if(std::getline(fops, line)) {       // to read one line\n        std::istringstream is(line);     // put the line in a stringstream\n        while(is &gt;&gt; word) {              // extract word-by-word\n            // use word\n        }\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 12298805, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDq-xT0te_Xc7mwVweoGb3Yr5trveg8uDRnUPCWIg=k-s128", "display_name": "VMH_97", "link": "https://stackoverflow.com/users/12298805/vmh-97"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "accepted_answer_id": 58630758, "answer_count": 2, "score": 1, "last_activity_date": 1572463995, "creation_date": 1572455666, "question_id": 58630592, "link": "https://stackoverflow.com/questions/58630592/n-not-getting-recognised-while-reading-from-file", "title": "&quot;\\n&quot; not getting recognised while reading from file", "body": "<p>Beginner here so please bear with me. So I am reading data from a csv file and I need to read data word by word and stop at the end of the line. This is the code.</p>\n\n<pre><code>fstream fops;\nfops.open(\"file.csv\");\nstring s;\ndo\n{ \n  fops&gt;&gt;s;\n}while(s!=\"\\n\");\n</code></pre>\n\n<p>However the loop continues to the next line until the file ends. Please help me out on this</p>\n"}, {"tags": ["c++", "c++11", "templates", "eigen3"], "comments": [{"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1572455730, "post_id": 58630573, "comment_id": 103568364, "body": "Linux and Windows are operating systems.  What are the compilers and versions you&#39;re using?"}, {"owner": {"reputation": 2112, "user_id": 1644352, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a8c0982f10a17627b74ab9ade7517df6?s=128&d=identicon&r=PG", "display_name": "Matthew", "link": "https://stackoverflow.com/users/1644352/matthew"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1572457217, "post_id": 58630573, "comment_id": 103569037, "body": "Sorry; it&#39;s MSVC 15.9.16 (also added to question). I haven&#39;t gone digging, but I believe it is working on several versions of GCC (I think at least 4.8 and 9.2)."}, {"owner": {"reputation": 14588, "user_id": 6870253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c7ce91530d2dddae7b9fc2bd828ed78?s=128&d=identicon&r=PG&f=1", "display_name": "chtz", "link": "https://stackoverflow.com/users/6870253/chtz"}, "edited": false, "score": 1, "creation_date": 1572480889, "post_id": 58630573, "comment_id": 103577407, "body": "Provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>! What is <code>using vector_type::vector_type;</code> supposed to do?"}, {"owner": {"reputation": 2112, "user_id": 1644352, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a8c0982f10a17627b74ab9ade7517df6?s=128&d=identicon&r=PG", "display_name": "Matthew", "link": "https://stackoverflow.com/users/1644352/matthew"}, "edited": false, "score": 1, "creation_date": 1572532833, "post_id": 58630573, "comment_id": 103596517, "body": "Okay, interesting data point... the error only happens if the class is exported (<code>__declspec(dllexport)</code>). With that tweak, the above <i>is</i> the MRE; link to live demo added as proof. Also, it seems you need to <a href=\"https://en.cppreference.com/w/cpp/language/using_declaration#Inheriting_constructors\" rel=\"nofollow noreferrer\">read up on constructor inheritance</a>. (Also doesn&#39;t seem to be limited to a specific MSVC version.)"}, {"owner": {"reputation": 8038, "user_id": 304748, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc0a40ced265d8fde3bd35d5689c4181?s=128&d=identicon&r=PG", "display_name": "Brian Walker", "link": "https://stackoverflow.com/users/304748/brian-walker"}, "edited": false, "score": 0, "creation_date": 1572533710, "post_id": 58630573, "comment_id": 103597066, "body": "Regarding only happening with dllexport this may shed some light: <a href=\"https://devblogs.microsoft.com/oldnewthing/20190927-00/?p=102932\" rel=\"nofollow noreferrer\">devblogs.microsoft.com/oldnewthing/20190927-00/?p=102932</a>"}, {"owner": {"reputation": 2112, "user_id": 1644352, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a8c0982f10a17627b74ab9ade7517df6?s=128&d=identicon&r=PG", "display_name": "Matthew", "link": "https://stackoverflow.com/users/1644352/matthew"}, "reply_to_user": {"reputation": 8038, "user_id": 304748, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc0a40ced265d8fde3bd35d5689c4181?s=128&d=identicon&r=PG", "display_name": "Brian Walker", "link": "https://stackoverflow.com/users/304748/brian-walker"}, "edited": false, "score": 0, "creation_date": 1572535940, "post_id": 58630573, "comment_id": 103598412, "body": "@BrianWalker, that... doesn&#39;t make sense? I mean, I understand the &quot;because it has to instantiate everything&quot; argument, but why doesn&#39;t an explicit instantiation (which I am also doing) also cause the problem?"}], "answers": [{"comments": [{"owner": {"reputation": 14588, "user_id": 6870253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c7ce91530d2dddae7b9fc2bd828ed78?s=128&d=identicon&r=PG&f=1", "display_name": "chtz", "link": "https://stackoverflow.com/users/6870253/chtz"}, "edited": false, "score": 0, "creation_date": 1572636080, "post_id": 58663647, "comment_id": 103632680, "body": "Without the <code>__declspec</code> MSVC also compiles your code: <a href=\"https://godbolt.org/z/LIVjS-\" rel=\"nofollow noreferrer\">godbolt.org/z/LIVjS-</a>. And as said in the bz-entry, I don&#39;t really see what you actually gain from instantiating a class template here."}, {"owner": {"reputation": 14588, "user_id": 6870253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c7ce91530d2dddae7b9fc2bd828ed78?s=128&d=identicon&r=PG&f=1", "display_name": "chtz", "link": "https://stackoverflow.com/users/6870253/chtz"}, "edited": false, "score": 0, "creation_date": 1572636320, "post_id": 58663647, "comment_id": 103632765, "body": "AND, you can at least workaround the static assertions, by disabling them: <a href=\"https://godbolt.org/z/T_Wb6D\" rel=\"nofollow noreferrer\">godbolt.org/z/T_Wb6D</a>"}, {"owner": {"reputation": 2112, "user_id": 1644352, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a8c0982f10a17627b74ab9ade7517df6?s=128&d=identicon&r=PG", "display_name": "Matthew", "link": "https://stackoverflow.com/users/1644352/matthew"}, "reply_to_user": {"reputation": 14588, "user_id": 6870253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c7ce91530d2dddae7b9fc2bd828ed78?s=128&d=identicon&r=PG&f=1", "display_name": "chtz", "link": "https://stackoverflow.com/users/6870253/chtz"}, "edited": false, "score": 0, "creation_date": 1572649375, "post_id": 58663647, "comment_id": 103636523, "body": "Okay, that&#39;s screwy. I am now less convinced that GCC is wrong. Also, I don&#39;t think I want to turn off assertions, because I <i>don&#39;t</i> want someone using the four-scalars ctor on a <code>my_point&lt;3, T&gt;</code>. Ultimately, I think the issue is using static assertions where <code>enable_if</code> should have been used."}], "tags": [], "owner": {"reputation": 2112, "user_id": 1644352, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a8c0982f10a17627b74ab9ade7517df6?s=128&d=identicon&r=PG", "display_name": "Matthew", "link": "https://stackoverflow.com/users/1644352/matthew"}, "is_accepted": true, "score": 0, "last_activity_date": 1572630531, "creation_date": 1572630531, "answer_id": 58663647, "question_id": 58630573, "link": "https://stackoverflow.com/questions/58630573/why-cant-i-inherit-from-eigenmatrix/58663647#58663647", "title": "Why can&#39;t I inherit from Eigen::Matrix?", "body": "<p>The problem is that Eigen doesn't use SFINAE/<code>enable_if</code> to hide \"inappropriate\" members, it just relies on them never being instantiated (with static assertions if someone tries to use them). As a result, an <code>Eigen</code> class \u2014 at least, <code>Eigen::Matrix</code> \u2014 cannot be explicitly instantiated.</p>\n\n<p>This can be seen with a trivial example:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;Eigen/Core&gt;\ntemplate class Eigen::Matrix&lt; double, 3, 1 &gt;;\n</code></pre>\n\n<p>(<a href=\"https://godbolt.org/z/GciUnH\" rel=\"nofollow noreferrer\">Live demo</a>)</p>\n\n<p>The real mystery is why GCC allows explicit instantiations of classes <em>derived</em> from <code>Eigen::Matrix</code>. MSVC does not, but it seems that MSVC is probably in the right, here.</p>\n\n<p>The short term solution is to not export <code>my_point</code>. This requires, of course, that the definitions of all of <code>my_point</code>'s methods are either visible in the header, or are individually exported (rather than trying to export the whole class).</p>\n\n<p>The longer term solution would be to fix Eigen so that its types can be explicitly instantiated: <a href=\"https://eigen.tuxfamily.org/bz/show_bug.cgi?id=1768\" rel=\"nofollow noreferrer\">https://eigen.tuxfamily.org/bz/show_bug.cgi?id=1768</a>.</p>\n"}], "owner": {"reputation": 2112, "user_id": 1644352, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a8c0982f10a17627b74ab9ade7517df6?s=128&d=identicon&r=PG", "display_name": "Matthew", "link": "https://stackoverflow.com/users/1644352/matthew"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 216, "favorite_count": 0, "accepted_answer_id": 58663647, "answer_count": 1, "score": 0, "last_activity_date": 1572630531, "creation_date": 1572455575, "last_edit_date": 1572533046, "question_id": 58630573, "link": "https://stackoverflow.com/questions/58630573/why-cant-i-inherit-from-eigenmatrix", "title": "Why can&#39;t I inherit from Eigen::Matrix?", "body": "<p>I have <a href=\"https://github.com/Kitware/kwiver/blob/957895f35f0d46a6fd572686e10f83415bdb355d/vital/types/point.h#L52\" rel=\"nofollow noreferrer\">this</a> class:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>template &lt; unsigned N, typename T &gt;\nclass MY_EXPORT my_point : protected Eigen::Matrix&lt; T, N, 1 &gt;\n{\npublic:\n  using vector_type = Eigen::Matrix&lt; T, N, 1 &gt;;\n\n  my_point() : vector_type{ vector_type::Zero() } {}\n  using vector_type::vector_type;\n};\n</code></pre>\n\n<p>My Linux (GCC) build is fine. However, on Windows (MSVC 15.9.16), I get <a href=\"https://open.cdash.org/viewBuildError.php?buildid=6180125\" rel=\"nofollow noreferrer\">really strange errors</a>:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>c:\\include\\eigen3\\eigen\\src\\core\\densebase.h(482): error C2338: THIS_METHOD_IS_ONLY_FOR_1x1_EXPRESSIONS (compiling source file c:\\code\\my_point.cxx) [C:\\workspace\\KwiverWindows\\build\\vital\\vital.vcxproj]\n  c:\\include\\eigen3\\eigen\\src\\core\\densebase.h(481): note: while compiling class template member function 'const float &amp;Eigen::DenseBase&lt;Derived&gt;::value(void) const'\n          with\n          [\n              Derived=Eigen::Matrix&lt;float,4,1,0,4,1&gt;\n          ] (compiling source file c:\\code\\my_point.cxx)\n  c:\\include\\eigen3\\eigen\\src\\core\\matrixbase.h(50): note: see reference to class template instantiation 'Eigen::DenseBase&lt;Derived&gt;' being compiled\n          with\n          [\n              Derived=Eigen::Matrix&lt;float,4,1,0,4,1&gt;\n          ] (compiling source file c:\\code\\my_point.cxx)\n  c:\\include\\eigen3\\eigen\\src\\core\\plainobjectbase.h(100): note: see reference to class template instantiation 'Eigen::MatrixBase&lt;Derived&gt;' being compiled\n          with\n          [\n              Derived=Eigen::Matrix&lt;float,4,1,0,4,1&gt;\n          ] (compiling source file c:\\code\\my_point.cxx)\n  c:\\include\\eigen3\\eigen\\src\\core\\matrix.h(180): note: see reference to class template instantiation 'Eigen::PlainObjectBase&lt;Eigen::Matrix&lt;float,4,1,0,4,1&gt;&gt;' being compiled (compiling source file c:\\code\\my_point.cxx)\n</code></pre>\n\n<p>It looks like the compiler is trying to instantiate inappropriate methods (e.g. a later error is trying to instantiate <code>w()</code> for a 3-vector). What am I doing wrong? (Why is this not a problem when using <code>Eigen::Matrix</code> directly?)</p>\n\n<p><a href=\"https://godbolt.org/z/2-Nb7E\" rel=\"nofollow noreferrer\">Here</a> is a live demo.</p>\n"}, {"tags": ["c++", "qt", "static", "linker"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 2, "creation_date": 1572456155, "post_id": 58630567, "comment_id": 103568567, "body": "<i>&quot;but you can&#39;t do <code>constexpr QString</code> or <code>constexpr std::string</code> for whatever reason&quot;</i> You can&#39;t <code>new</code> or perform dynamic memory allocation during compilation. This is one of the reasons types like <code>std::string</code> don&#39;t have <code>constexpr</code> constructors. You can have a <code>constexpr char[]</code> thought."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "is_accepted": true, "score": 1, "last_activity_date": 1572456921, "last_edit_date": 1572456921, "creation_date": 1572456578, "answer_id": 58630822, "question_id": 58630567, "link": "https://stackoverflow.com/questions/58630567/const-vs-static-const-in-anonymous-namespace/58630822#58630822", "title": "const vs static const in anonymous namespace", "body": "<p><code>static</code> is completely redundant in an anonymous namespace. It does <em>nothing</em>.</p>\n\n<p>Leave it out since it adds nothing but noise and extra typing in that context. \nTools like clang-tidy will even generate a warning about it being redundant (depending on options used), so leaving it out also cuts down on noise from tools.</p>\n"}], "owner": {"reputation": 89, "user_id": 8223925, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/--m3zzL4Wels/AAAAAAAAAAI/AAAAAAAAEHE/WIX3Xi2hDQE/photo.jpg?sz=128", "display_name": "Aaron Fine", "link": "https://stackoverflow.com/users/8223925/aaron-fine"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 188, "favorite_count": 0, "accepted_answer_id": 58630822, "answer_count": 1, "score": 2, "last_activity_date": 1572456921, "creation_date": 1572455564, "question_id": 58630567, "link": "https://stackoverflow.com/questions/58630567/const-vs-static-const-in-anonymous-namespace", "title": "const vs static const in anonymous namespace", "body": "<p>I want to be able to provide a default name to a class so that I can always have a reasonable name to use when logging errors. I don't need (or want) this name to be a part of the class itself. This default name will never change and so is a good candidate for being <code>const</code> or even <code>constexpr</code> but you can't do <code>constexpr QString</code> or <code>constexpr std::string</code> for whatever reason. </p>\n\n<p>In my cpp file, is it better to do</p>\n\n<pre><code>namespace {\n const QString NAME(\"Some Name\");\n}\n</code></pre>\n\n<p>or </p>\n\n<pre><code>namespace {\n static const QString NAME(\"Some Name\");\n}\n</code></pre>\n\n<p>I know that both versions will result in <code>NAME</code> having internal linkage, but what is best practice? I've seen several discussions on moving global variables to an anonymous namespace but none of them mention using <code>static</code> <em>inside</em> the namespace. </p>\n\n<p>References:</p>\n\n<ul>\n<li><p><a href=\"http://www.goldsborough.me/c/c++/linker/2016/03/30/19-34-25-internal_and_external_linkage_in_c++/\" rel=\"nofollow noreferrer\">http://www.goldsborough.me/c/c++/linker/2016/03/30/19-34-25-internal_and_external_linkage_in_c++/</a></p></li>\n<li><p><a href=\"https://stackoverflow.com/questions/1358400/what-is-external-linkage-and-internal-linkage\">What is external linkage and internal linkage?</a></p></li>\n<li><p><a href=\"https://stackoverflow.com/questions/154469/unnamed-anonymous-namespaces-vs-static-functions\">Unnamed/anonymous namespaces vs. static functions</a></p></li>\n<li><p><a href=\"https://softwareengineering.stackexchange.com/questions/297059/static-globals-and-anonymous-namespaces-in-c\">https://softwareengineering.stackexchange.com/questions/297059/static-globals-and-anonymous-namespaces-in-c</a></p></li>\n</ul>\n"}, {"tags": ["c++", "c", "c-preprocessor"], "comments": [{"owner": {"reputation": 21162, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1572455372, "post_id": 58630500, "comment_id": 103568203, "body": "Read up on the &quot;undef-free X-macro&quot; concept. That can do the trick."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1572455392, "post_id": 58630500, "comment_id": 103568210, "body": "please pick one language. They will probably have different solutions. As your code is C++, I guess you want that"}, {"owner": {"reputation": 96, "user_id": 10872971, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KyzoD.png?s=128&g=1", "display_name": "Mustafa Kemal GILOR", "link": "https://stackoverflow.com/users/10872971/mustafa-kemal-gilor"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1572455668, "post_id": 58630500, "comment_id": 103568338, "body": "@formerlyknownas_463035818 I prefer C++, but AFAIK both c &amp; c++  follows the same preprocessor rules, so answer should be applicable to both (assuming the solution does not depend on language-specific constructs like __has_include etc.)"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1572455748, "post_id": 58630500, "comment_id": 103568373, "body": "c++ can avoid the need for most macros, in c I dont know, but if you insist on using them, then actually double tagging is fine"}, {"owner": {"reputation": 96, "user_id": 10872971, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KyzoD.png?s=128&g=1", "display_name": "Mustafa Kemal GILOR", "link": "https://stackoverflow.com/users/10872971/mustafa-kemal-gilor"}, "reply_to_user": {"reputation": 21162, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1572455769, "post_id": 58630500, "comment_id": 103568381, "body": "@Yunnosch thanks for the comment, i&#39;ll check it"}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 0, "creation_date": 1572455795, "post_id": 58630500, "comment_id": 103568395, "body": "Why do you need the <code>_fwd.hpp</code> files? What problem do they solve? A real minimal example would be nice to understand what we&#39;re dealing with."}, {"owner": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 0, "creation_date": 1572455885, "post_id": 58630500, "comment_id": 103568441, "body": "How is this better then just writing two files? One with forward declaration and the other with the definition? Then you include the definition only if you need it. All other files include only the declaration file. In your example you include definition if you include the same file twice."}, {"owner": {"reputation": 96, "user_id": 10872971, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KyzoD.png?s=128&g=1", "display_name": "Mustafa Kemal GILOR", "link": "https://stackoverflow.com/users/10872971/mustafa-kemal-gilor"}, "reply_to_user": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 0, "creation_date": 1572456175, "post_id": 58630500, "comment_id": 103568574, "body": "@TedLyngmo I use them mainly for two purposes, to minimize the amount of indirect include definitions in consuming code, and to reduce compile times. Usual forward declaration benefits."}, {"owner": {"reputation": 96, "user_id": 10872971, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KyzoD.png?s=128&g=1", "display_name": "Mustafa Kemal GILOR", "link": "https://stackoverflow.com/users/10872971/mustafa-kemal-gilor"}, "reply_to_user": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 0, "creation_date": 1572456344, "post_id": 58630500, "comment_id": 103568636, "body": "@KamilCuk The focal point of this question is, that &quot;I don&#39;t want to write two separate files&quot;, and the approach I presented is towards to achieve that. This is more like a style thing."}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1572456571, "post_id": 58630500, "comment_id": 103568759, "body": "You could just add the forward declarations explicitly where required, rather than including a header. I.e. in &quot;bar.hpp&quot;, replace <code>#include &quot;foo.hpp&quot;</code> with <code>struct foo;</code>."}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 0, "creation_date": 1572456572, "post_id": 58630500, "comment_id": 103568760, "body": "@MustafaKemalGILOR I can see how that can help those situations, but it&#39;s quite a bit of work to maintain - and there are caching solutions that can help with keeping the compilation times down."}, {"owner": {"reputation": 96, "user_id": 10872971, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KyzoD.png?s=128&g=1", "display_name": "Mustafa Kemal GILOR", "link": "https://stackoverflow.com/users/10872971/mustafa-kemal-gilor"}, "reply_to_user": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 0, "creation_date": 1572457029, "post_id": 58630500, "comment_id": 103568962, "body": "@TedLyngmo yeah it is. I&#39;m already using ccache, and I&#39;m aware of upcoming &quot;c++ modules&quot; will solve the need of forward declaration and header guards. I just wonder if it&#39;s possible at all to achieve the thing I proposed, because I have never seen a project utilizing stuff like this until now. Pure curiosity."}, {"owner": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 0, "creation_date": 1572457870, "post_id": 58630500, "comment_id": 103569346, "body": "@MustafaKemalGILOR Then i think it&#39;s better to do like the <code>_KERNEL</code> does. And <code>_POSIX_C_SOURCE</code> and <code>_GNU_SOURCE</code> and all the happy <a href=\"http://man7.org/linux/man-pages/man7/feature_test_macros.7.html\" rel=\"nofollow noreferrer\">feature_test_macros</a>. Och, and <code>FUSE_USE_VERSION</code> serves similar purpose. The header that needs the implementation declares a macro like <code>FOO_NEED_DECLARATION</code> before including anything."}, {"owner": {"reputation": 96, "user_id": 10872971, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KyzoD.png?s=128&g=1", "display_name": "Mustafa Kemal GILOR", "link": "https://stackoverflow.com/users/10872971/mustafa-kemal-gilor"}, "reply_to_user": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1572458818, "post_id": 58630500, "comment_id": 103569775, "body": "@IanAbbott yeah, I could do that, but it is harder to maintain, and harder to perform name/namespace changes. also I want to be able to provide forward declarations to consumers, so they don&#39;t have to look up into header files to write their own forward declarations (looking from a library/framework writer&#39;s perspective). It becomes cumbersome especially when template classes are being forward-declared. (and they might have default template parameters and such.). As I library consumer, I wouldn&#39;t want to delve into library internals if I just want to forward-declare a library thing."}, {"owner": {"reputation": 96, "user_id": 10872971, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KyzoD.png?s=128&g=1", "display_name": "Mustafa Kemal GILOR", "link": "https://stackoverflow.com/users/10872971/mustafa-kemal-gilor"}, "reply_to_user": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 0, "creation_date": 1572459055, "post_id": 58630500, "comment_id": 103569887, "body": "@KamilCuk yeah, I thought about <code>FOO_NEED_DECLARATION</code> too, but in most cases you would need to undef it after use, to not interfere with other headers. I thought wrapping #include in a macro but that way is blocked too, as preprocessor processes each unit for only once. A custom <code>_Include</code> built-in would solve the issue (like in #pragma case), but I am not aware of any compiler which implements such a facility."}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 1, "creation_date": 1572460888, "post_id": 58630500, "comment_id": 103570728, "body": "Rather than <code>FOO_NEED_DECLARATION</code>, you could have <code>FOO_FWD_ONLY</code>, so the header that only needs forward declarations from &quot;foo.h&quot; could define that macro before `#include &quot;foo.h&quot; and undefine it afterwards. Or you could undefine it inside &quot;foo.h&quot; itself for ease of maintenance."}, {"owner": {"reputation": 172529, "user_id": 140750, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4c7af12cad08c95bc206a9636d164224?s=128&d=identicon&r=PG", "display_name": "William Pursell", "link": "https://stackoverflow.com/users/140750/william-pursell"}, "edited": false, "score": 0, "creation_date": 1572462931, "post_id": 58630500, "comment_id": 103571550, "body": "What do you mean by &quot;actual declaration&quot;?  Do you mean &quot;definition&quot;?"}, {"owner": {"reputation": 96, "user_id": 10872971, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KyzoD.png?s=128&g=1", "display_name": "Mustafa Kemal GILOR", "link": "https://stackoverflow.com/users/10872971/mustafa-kemal-gilor"}, "reply_to_user": {"reputation": 172529, "user_id": 140750, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4c7af12cad08c95bc206a9636d164224?s=128&d=identicon&r=PG", "display_name": "William Pursell", "link": "https://stackoverflow.com/users/140750/william-pursell"}, "edited": false, "score": 0, "creation_date": 1572463407, "post_id": 58630500, "comment_id": 103571744, "body": "@WilliamPursell what I mean with actual declaration is the non-forward declaration of thing."}], "answers": [{"comments": [{"owner": {"reputation": 96, "user_id": 10872971, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KyzoD.png?s=128&g=1", "display_name": "Mustafa Kemal GILOR", "link": "https://stackoverflow.com/users/10872971/mustafa-kemal-gilor"}, "edited": false, "score": 0, "creation_date": 1572465389, "post_id": 58632130, "comment_id": 103572578, "body": "Your implementation gave me an idea to work around double inclusion issue. Working on it right now."}], "tags": [], "owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "is_accepted": false, "score": 1, "last_activity_date": 1572462220, "creation_date": 1572462220, "answer_id": 58632130, "question_id": 58630500, "link": "https://stackoverflow.com/questions/58630500/is-it-possible-to-merge-forward-declaration-and-regular-declaration-into-a-singl/58632130#58632130", "title": "Is it possible to merge forward declaration and regular declaration into a single file, then use it as if they&#39;re separated?", "body": "<p>Here is a proposal for consideration (maybe not the best). It involves the includer of an include file setting a macro to indicate that it only needs the forward declarations from that include file. When the macro is not defined, it gets everything from the include file. To avoid problems with header files forgetting to undefine the special macro afterwards, the file being included can be made responsible for undefining it.</p>\n\n<p>It goes something like this:</p>\n\n<p><strong>foo.hpp</strong></p>\n\n<pre><code>#if !defined(FOO_FWD_HPP)\n#define FOO_FWD_HPP\n\n// forward declarations go here\n\nstruct foo;\n\n#endif // FOO_FWD_HPP\n\n#if !defined(FOO_FWD_ONLY)\n// includer wants the full monty\n#if !defined(FOO_HPP)\n#define FOO_HPP\n\n// normal declarations go here\n\nstruct foo{\n   foo(){/*....*/}\n};\n\n#endif // FOO_HPP\n#endif // FOO_FWD_ONLY\n\n#undef FOO_FWD_ONLY\n</code></pre>\n\n<p><strong>bar.hpp</strong></p>\n\n<pre><code>#pragma once\n\n// only need forward declarations from foo.hpp\n#define FOO_FWD_ONLY\n#include \"foo.hpp\"\n\nstruct bar {\n    bar(const foo&amp; f);\n};\n</code></pre>\n\n<p><strong>bar.cpp</strong></p>\n\n<pre><code>#include \"bar.hpp\"\n#include \"foo.hpp\"\n\nbar::bar(const foo&amp; f){\n    f.rab(); // requires actual implementation\n}\n</code></pre>\n\n<p>The main benefit is to reduce the amount of code being compiled. It does not do anything to fix the problem of unintended exposure. For example, if \"bar.hpp\" includes some other file that includes \"foo.hpp\" without defining the <code>FOO_FWD_ONLY</code> macro first, the full definitions from \"foo.hpp\" will be exposed to the remainder of \"bar.hpp\".</p>\n"}], "owner": {"reputation": 96, "user_id": 10872971, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KyzoD.png?s=128&g=1", "display_name": "Mustafa Kemal GILOR", "link": "https://stackoverflow.com/users/10872971/mustafa-kemal-gilor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 130, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1572467367, "creation_date": 1572455258, "last_edit_date": 1572467367, "question_id": 58630500, "link": "https://stackoverflow.com/questions/58630500/is-it-possible-to-merge-forward-declaration-and-regular-declaration-into-a-singl", "title": "Is it possible to merge forward declaration and regular declaration into a single file, then use it as if they&#39;re separated?", "body": "<p>I have this crazy idea of merging forward declaration headers and actual declaration files into one by performing some macro trickery. To provide some context, the daily policy I follow for forward declarations is as follows;</p>\n\n<ul>\n<li>Each header file has its \"_fwd.hpp\" complement, which contains forward declarations of all forward-declarable entities in that header file.</li>\n<li>I include the forward declaration header where forward-declaration of the actual thing suffices</li>\n<li>I include the regular declaration header mainly in .cpp files and only when an actual implementation information is required (things requiring size of the implementation, inheritance etc.)</li>\n</ul>\n\n<p>But having a separate _fwd.hpp header for each header pollutes the project, and is kind of hard to maintain. So, I come up with the following idea of merging forward declaration and actual declaration into single file, then enabling them according to include count. I come up with this initial idea of double-inclusion of header;</p>\n\n<p>foo.hpp</p>\n\n<pre><code>#if !defined(FOO_FWD_H)\n#define FOO_FWD_H\n    // Forward declarations goes here\n    struct foo;\n#else // has forward_declaration, include actual if not included yet\n\n#if !defined(FOO_H)\n    #define FOO_H\n    struct foo{\n       foo(){/*....*/}\n    };\n    // Normal declarations goes here\n#endif // FOO_H\n\n#endif // FOO_FWD_H\n</code></pre>\n\n<p>If I include \"foo.hpp\" once, I get forward declaration of foo, but if I include it second time in a translation unit, I get the forward &amp; actual declaration of the foo, which is totally fine by me. (as I'm kinda doing the same thing anyway, include fwdecl in header, actual in cpp). </p>\n\n<p>So, when put into use case described above, it goes like this;</p>\n\n<p><strong>bar.hpp</strong></p>\n\n<pre><code>#pragma once\n\n#include \"foo.hpp\" // forward declaration\n\nstruct bar{\n    bar(const foo&amp; f);\n};\n</code></pre>\n\n<p><strong>bar.cpp</strong></p>\n\n<pre><code>#include \"bar.hpp\" // bar + 1st inclusion of foo.hpp\n#include \"foo.hpp\" // included 2nd time, actual implementation enabled\n\nbar::bar(const foo&amp; f){\n    f.rab(); // requires actual implementation\n}\n</code></pre>\n\n<p>But as you can imagine, this approach has problems. The biggest issue is, if foo.hpp included by another header, tar.hpp, and tar.hpp is included in bar.hpp, causes actual implementation to be exposed to bar.hpp, defeating the purpose. Also, when actual implementation of foo.hpp is required in bar.hpp, it has to be included twice, which looks weird (linters and tools like iwyu might have an issue with that).</p>\n\n<p>So the question boils down to this, can we actually make this work in such a way that;</p>\n\n<ul>\n<li>including headers which using this idiom does not interfere with other headers' inclusion state </li>\n<li>eliminating the need of double-inclusion when actual implementation is needed</li>\n</ul>\n\n<p>Thanks in advance.</p>\n\n<p><strong>UPDATE:</strong> (30/10/19 10:57 PM GMT+2)</p>\n\n<p>Improved version of idiom based on @IanAbbott 's answer:</p>\n\n<p>Try it live : <a href=\"https://repl.it/@mustafakemalgil/single-fwdecl-decl\" rel=\"nofollow noreferrer\">repl.it</a></p>\n\n<p><strong>foo.hpp</strong> (our single fwdecl &amp; decl idiom implementing header)</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>    // (mgilor): we got ourselves quite a lot boilerplate code, \n    // maybe x-macro concept help us to move away boilerplate to\n    // a separate file?\n\n    #if defined(FOO_FWD_ONLY)\n        #undef FOO_FWD_HPP // prevent accidental implementation inclusion on other headers\n    #endif\n\n    #if defined(FOO_FWD_ONLY) &amp;&amp; !defined(FOO_FWD_HPP) \n        #define FOO_FWD_HPP \n        // forward declarations go here\n        struct foo;\n    #elif !defined(FOO_FWD_ONLY)\n\n         // includer wants the full monty\n        #if !defined(FOO_HPP)\n            #define FOO_HPP\n            // actual declarations go here\n\n            struct foo{\n                foo(){/*....*/}\n                void do_things(){}\n            };\n\n        #endif // FOO_HPP\n\n    #endif // FOO_FWD_HPP\n\n    // undef the macro, so future includes does not get affected\n    #undef FOO_FWD_ONLY\n</code></pre>\n\n<p><strong>tar.hpp</strong> (fwdecl only consumer of foo)</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>    #pragma once\n\n    #define FOO_FWD_ONLY\n    #include \"foo.hpp\" // this header needs forward declaration\n\n    #ifdef FOO_FWD_HPP \n        #pragma message ( __FILE__ \" has forward declaration of foo\") \n    #endif\n    #ifdef FOO_HPP\n        #pragma message ( __FILE__ \" has full declaration of foo\") \n    #endif\n\n    struct tar{\n        tar(foo &amp; f){ }\n    };\n</code></pre>\n\n<p><strong>bar.hpp</strong> (fwdecl only consumer of foo, also consumes tar.hpp)</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>    #pragma once\n\n    #include \"tar.hpp\" // tar consumed foo fwdecl-only\n    #define FOO_FWD_ONLY\n    #include \"foo.hpp\" // bar needs fwdecl-only\n\n    #ifdef FOO_FWD_HPP \n        #pragma message ( __FILE__ \" has forward declaration of foo\") \n    #endif\n    #ifdef FOO_HPP\n        #pragma message ( __FILE__ \" has full declaration of foo\") \n    #endif\n\n    struct bar{\n        bar(foo &amp; f);\n    };\n</code></pre>\n\n<p><strong>bar.cpp</strong> (full decl consumer of bar &amp; foo) </p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>    #include \"bar.hpp\"\n    #include \"foo.hpp\" // second inclusion, should enable full definition\n\n    #ifdef FOO_FWD_HPP \n        #pragma message ( __FILE__ \" has forward declaration of foo\") \n    #endif\n    #ifdef FOO_HPP\n        #pragma message ( __FILE__ \" has full declaration of foo\") \n    #endif\n\n    bar::bar(foo&amp; ref){\n        ref.do_things();\n    }\n</code></pre>\n\n<p><strong>baz.hpp</strong> (no dependencies)</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>    #pragma once\n\n    struct baz{\n        void do_baz();\n    };\n</code></pre>\n\n<p><strong>baz.cpp</strong> (full decl consumer of foo &amp; baz) </p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>    #include \"baz.hpp\"\n    #include \"foo.hpp\"  // no prior include of foo, but since FOO_FWD_ONLY is not defined\n                        // baz.cpp will get full declaration.\n\n    #ifdef FOO_FWD_HPP \n        #pragma message ( __FILE__ \" has forward declaration of foo\") \n    #endif\n    #ifdef FOO_HPP\n        #pragma message ( __FILE__ \" has full declaration of foo\") \n    #endif\n\n\n    void baz::do_baz(){\n        foo f;\n        f.do_things(); // completely fine.\n    }\n</code></pre>\n\n<p><strong>main.cpp</strong> (consuming application)</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>    // consuming application\n    #include \"tar.hpp\" \n    #include \"bar.hpp\" \n    #include \"foo.hpp\"  // already has previous foo fwdecl, so second inclusion will enable full declaration. \n                        // (also FOO_FWD_ONLY is not defined, so first inclusion would enable it too)\n    #include \"baz.hpp\"\n    int main(void){\n\n        foo f;\n        tar t(f);\n        bar b(f);\n        baz bz;\n    }\n</code></pre>\n\n<p>Output when compiled:</p>\n\n<pre><code>    tar.hpp:7:13: warning: tar.hpp has forward declaration of foo \n    bar.hpp:8:13: warning: bar.hpp has forward declaration of foo \n    bar.cpp:6:13: warning: bar.cpp has forward declaration of foo \n    bar.cpp:9:13: warning: bar.cpp has full declaration of foo \n    baz.cpp:9:13: warning: baz.cpp has full declaration of foo \n    tar.hpp:7:13: warning: tar.hpp has forward declaration of foo \n    bar.hpp:8:13: warning: bar.hpp has forward declaration of foo \n</code></pre>\n"}, {"tags": ["c++", "integer"], "comments": [{"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 3, "creation_date": 1572454804, "post_id": 58630339, "comment_id": 103567901, "body": "<code>if (choice != 1 || 2 || 3 || 4)</code> is always true. <code>c++</code> does not work as you expect. You can&#39;t skip the <code>choice !=</code> part. <code>while (res == y || Y);</code> same bug here but in this case you have a second bug as well. are <code>y</code> and <code>Y</code> variables? Comparison to a character needs to be single quoted like this: <code>&#39;y&#39;</code>"}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1572454971, "post_id": 58630339, "comment_id": 103567990, "body": "<code>&#47;&#47;int compwin = compwin + 1; </code> makes no sense regardless. The <code>int</code> part of those two decls shouldn&#39;t be there. <code>compwin</code> is already declared above the loop; all you appear to desire is updating its value; not declare a pointless local var that hides the one outside the loop."}, {"owner": {"reputation": 1, "user_id": 12298755, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mBPK2Mp9DEpzdstXUAjzmnDnV62QeOJa_JvyyByWw=k-s128", "display_name": "PolarCosine", "link": "https://stackoverflow.com/users/12298755/polarcosine"}, "edited": false, "score": 0, "creation_date": 1572455195, "post_id": 58630339, "comment_id": 103568112, "body": "Thanks for the help and i have gone and changed the code and everything works as should"}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 0, "creation_date": 1572455242, "post_id": 58630339, "comment_id": 103568133, "body": "Take a look at <a href=\"https://en.cppreference.com/w/cpp/algorithm/all_any_none_of\" rel=\"nofollow noreferrer\">std::none_of</a>"}], "answers": [{"tags": [], "owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "is_accepted": false, "score": 2, "last_activity_date": 1572455599, "last_edit_date": 1572455599, "creation_date": 1572455133, "answer_id": 58630460, "question_id": 58630339, "link": "https://stackoverflow.com/questions/58630339/i-need-help-creating-a-scoring-system-but-it-keeps-giving-me-an-error-the-comm/58630460#58630460", "title": "I need help creating a scoring system, but it keeps giving me an error, the commented out integers are the parts giving me trouble", "body": "<p>This </p>\n\n<pre><code>int compwin = compwin + 1;\n</code></pre>\n\n<p>is a declaration and initialization. A rather weird one, and to discuss why it is allowed would take us on a too big detour. So lets look at a simpler example:</p>\n\n<pre><code>int compwin = 1;   // declares compwin and initializes it with 1\nint compwin = 2;   // compiler error, because compwin is already declared\n</code></pre>\n\n<p>You can only declare the same variable once (again the long complete truth is more involved, search for \"shadowing\" in case you care). You also only need to initialize a variable only once. </p>\n\n<p>If you want to assign something to an already declared variable, you use assignment, as in</p>\n\n<pre><code>int compwin = 1;   // declare and initialize\ncompwin = 2;       // assign\n</code></pre>\n\n<p>Further note that </p>\n\n<pre><code>else if (choice != 1 || 2 || 3 || 4) // Debug\n</code></pre>\n\n<p>is not doing what you expect. The correct way is</p>\n\n<pre><code>else if (choice != 1 &amp;&amp; choice != 2 &amp;&amp; choice != 3 &amp;&amp; choice != 4) \n</code></pre>\n\n<p>The mistake is a combination of ignoring <a href=\"https://en.wikipedia.org/wiki/De_Morgan%27s_laws\" rel=\"nofollow noreferrer\">De Morgan's Law</a> and a wrong combination of several conditions. The <code>operator||</code> expects a <code>bool</code> on both sides and unfortunately numbers happily convert to <code>true</code> (only <code>0</code> becomes <code>false</code>), but a good compiler may spit out warnings on that. Similar mistake is on <code>while (res == y || Y);</code>.</p>\n"}], "owner": {"reputation": 1, "user_id": 12298755, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mBPK2Mp9DEpzdstXUAjzmnDnV62QeOJa_JvyyByWw=k-s128", "display_name": "PolarCosine", "link": "https://stackoverflow.com/users/12298755/polarcosine"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 31, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1572455599, "creation_date": 1572454623, "question_id": 58630339, "link": "https://stackoverflow.com/questions/58630339/i-need-help-creating-a-scoring-system-but-it-keeps-giving-me-an-error-the-comm", "title": "I need help creating a scoring system, but it keeps giving me an error, the commented out integers are the parts giving me trouble", "body": "<p>I found an RPS game and wanted to improve on it by creating a scoring system but the //int compwin = compwin + 1; keeps giving me errors. I am still fairly new to coding in C++ and have no clue where the problem is standing so thanks for helping in advance. Also this code was taken from somewhere this is not my code but I wanted to try and improve on it.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;cstdlib&gt;\n#include &lt;limits&gt;\n#include &lt;ctime&gt;\n#include &lt;string&gt;\nusing namespace std;\nint main()\n{\n    int choice;\n    int i;\n    int y;\n    int Y;\n    int comp;\n    char res;\n    int compwin = 0;\n    int choicewin = 0;\n    unsigned seed;\n    while (1==1) {\n        //The choices\n        cout &lt;&lt; \"Game Choices.\\n\\n\";\n        cout &lt;&lt; \"1.Rock\\n\";\n        cout &lt;&lt; \"2.Paper\\n\";\n        cout &lt;&lt; \"3.Scissors\\n\";\n        cout &lt;&lt; \"4.Quit, exits the game.\\n\\n\";\n        cout &lt;&lt; \"Please enter your choice.\\n\\n\";\n        cin &gt;&gt; choice;\n        //-----------------------Player Imputs-----------------------------------\n        if (choice == 1) //Rock\n        {\n            cout &lt;&lt; \"You picked Rock.\\n\";\n            cout &lt;&lt; \"Now here was my choice.\\n\\n\";\n        }\n        else if (choice == 2) //Paper\n        {\n            cout &lt;&lt; \"You picked Paper.\\n\";\n            cout &lt;&lt; \"Now here was my choice.\\n\\n\";\n        }\n        else if (choice == 3) //Scissors\n        {\n            cout &lt;&lt; \"You picked Scissors.\\n\";\n            cout &lt;&lt; \"Now here was my choice.\\n\\n\";\n        }\n        else if (choice == 4)\n        {\n            return 0;\n        }\n        else if (choice != 1 || 2 || 3 || 4) // Debug\n        {\n            cout &lt;&lt; \"Uhhhh thats not one of the following.\\n\\nGoodbye!\\n\\n\";\n            system(\"pause\");\n            return 0;\n        }\n        //-------------------------Computer Choice-------------------------------\n        seed = time(0);\n        srand(seed); //RNG TIME\n        comp = rand() % 3 + 1; //Computer picks \n        if (comp == 1) //Computer rock\n        {\n            res = 1;\n            cout &lt;&lt; \"Rock!\\n\\n\";\n        }\n        else if (comp == 2) //Computer paper\n        {\n            res = 2;\n            cout &lt;&lt; \"Paper!\\n\\n\";\n        }\n        else if (comp == 3)  // Computer scissors\n        {\n            res = 3;\n            cout &lt;&lt; \"Scissors!\\n\\n\";\n        }\n        //-----------------------Victory Conditions------------------------------\n        if (comp == 1 &amp;&amp; choice == 1) {\n            std::cout &lt;&lt; \"It was a tie!\" &lt;&lt; endl;\n        }\n        else if (comp == 1 &amp;&amp; choice == 3) {\n            std::cout &lt;&lt; \"I Won! Better luck next time!\" &lt;&lt; endl;\n            //int compwin = compwin + 1; This is where the problem occurs\n        }\n        else if (comp == 2 &amp;&amp; choice == 2) {\n            std::cout &lt;&lt; \"It was a tie!\" &lt;&lt; endl;\n        }\n        else if (comp == 2 &amp;&amp; choice == 1) {\n            std::cout &lt;&lt; \"I Won! Better luck next time!\" &lt;&lt; endl;\n            //int compwin = compwin + 1; This is where the problem occurs\n        }\n        else if (comp == 2 &amp;&amp; choice == 3) {\n            std::cout &lt;&lt; \"It was a tie!\" &lt;&lt; endl;\n        }\n        else if (comp == 2 &amp;&amp; choice == 2) {\n            std::cout &lt;&lt; \"I Won! Better luck next time!\" &lt;&lt; endl;\n            //int compwin = compwin + 1; This is where the problem occurs\n        }\n        else {\n            std::cout &lt;&lt; \"Congrats! You won!\" &lt;&lt; endl;\n            //int choicewin = choicewin + 1; This is where the problem occurs\n        }\n        cout &lt;&lt; \"Heres the score, computer =\" &lt;&lt; compwin &lt;&lt; \"and player =\" &lt;&lt; choicewin;\n        cout &lt;&lt; \"Want to go again? (y/n)\";\n        cin &gt;&gt; res;\n        system(\"cls\");\n    }\n    while (res == y || Y);\n    system(\"pause\");\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "templates", "sfinae", "tag-dispatching"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 2, "creation_date": 1572455659, "post_id": 58630192, "comment_id": 103568331, "body": "can you include some relevant context in your question? Not everybody can watch the video"}], "answers": [{"comments": [{"owner": {"reputation": 969, "user_id": 2449761, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/b6ba56b1fad55e985ec2eab81dcfe07c?s=128&d=identicon&r=PG", "display_name": "user2449761", "link": "https://stackoverflow.com/users/2449761/user2449761"}, "edited": false, "score": 0, "creation_date": 1572516398, "post_id": 58630600, "comment_id": 103587337, "body": "what is the definition of substitution failure?"}, {"owner": {"reputation": 575, "user_id": 8242494, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bZWeg.png?s=128&g=1", "display_name": "gonidelis", "link": "https://stackoverflow.com/users/8242494/gonidelis"}, "reply_to_user": {"reputation": 969, "user_id": 2449761, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/b6ba56b1fad55e985ec2eab81dcfe07c?s=128&d=identicon&r=PG", "display_name": "user2449761", "link": "https://stackoverflow.com/users/2449761/user2449761"}, "edited": false, "score": 0, "creation_date": 1595431956, "post_id": 58630600, "comment_id": 111474072, "body": "@user2449761 Given a function call the compiler takes the types of the arguments the user has passed to it and tries to match (substitute) them with the &quot;most proper&quot; function declaration in scope (I don&#39;t need to mention that all candidate functions have the same name). Thus, when a declared function does not match with the call, we have a substitution failure and the compiler proceeds on searching for a better match."}], "tags": [], "owner": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "is_accepted": true, "score": 10, "last_activity_date": 1572517510, "last_edit_date": 1572517510, "creation_date": 1572455681, "answer_id": 58630600, "question_id": 58630192, "link": "https://stackoverflow.com/questions/58630192/difference-between-sfinae-and-tag-dispatch/58630600#58630600", "title": "Difference between SFINAE and tag dispatch", "body": "<p>Tag dispatch takes advantage of overload resolution to select the right overload.</p>\n\n<pre><code>auto f_impl(std::true_type) { return true; }\nauto f_impl(std::false_type) { return std::string(\"No\"); }\n\ntemplate &lt;class T&gt;\nauto f(const T&amp; t) {\n    return f_impl(std::is_integral&lt;T&gt;());\n}\n</code></pre>\n\n<p>SFINAE disables a candidate by making it ineligible due to substitution failure.<br>\nSubstitution failure is just what it says on the tin: Trying to substitute concrete arguments for the template parameters and encountering an error, which in the immediate context only rejects that candidate.</p>\n\n<pre><code>template &lt;class T&gt;\nauto f(const T&amp; t)\n-&gt; std::enable_if_t&lt;std::is_integral_v&lt;T&gt;, bool&gt; {\n    return true;\n}\ntemplate &lt;class T&gt;\nauto f(const T&amp; t)\n-&gt; std::enable_if_t&lt;!std::is_integral_v&lt;T&gt;, std::string&gt; {\n    return std::string(\"No\");\n}\n</code></pre>\n\n<p>Sometimes, one or the other technique is easier to apply. And naturally they can be combined to great effect.</p>\n\n<p>Complementary techniques are partial and full specialization. Also, <code>if constexpr</code> can often simplify things.</p>\n"}], "owner": {"reputation": 969, "user_id": 2449761, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/b6ba56b1fad55e985ec2eab81dcfe07c?s=128&d=identicon&r=PG", "display_name": "user2449761", "link": "https://stackoverflow.com/users/2449761/user2449761"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 212, "favorite_count": 1, "accepted_answer_id": 58630600, "answer_count": 1, "score": 5, "last_activity_date": 1572517510, "creation_date": 1572454119, "question_id": 58630192, "link": "https://stackoverflow.com/questions/58630192/difference-between-sfinae-and-tag-dispatch", "title": "Difference between SFINAE and tag dispatch", "body": "<p>In this video <a href=\"https://youtu.be/Vkck4EU2lOU?t=582\" rel=\"noreferrer\">https://youtu.be/Vkck4EU2lOU?t=582</a> \"tag dispatch\" and SFINAE are being presented as the alternatives, allowing to achieve selection of the desired template function.</p>\n\n<p>Is it correct? Isn't \"tag dispatch\" using SFINAE? \nIf it's correct, what is the difference between SFINAE and tag dispatch exactly?</p>\n"}, {"tags": ["c++", "templates", "c++17", "variadic-functions"], "comments": [{"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 1, "creation_date": 1572455198, "post_id": 58630183, "comment_id": 103568113, "body": "This would be easier for us to work with if you provided a skeleton of the involved types. As it stands, anyone wanting to answer this question is going to have to build this by hand. We are all programmers, so if you want to communicate what the code does, just show code. Don&#39;t try to explain it."}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1572455792, "post_id": 58630183, "comment_id": 103568394, "body": "&quot;<i>I need to upcast the elements in my tuple to shared_ptr&lt;Subject&gt;, then apply getStateFor to each of these elements in order and std::any_cast the results in order of StateTypes..., then forward all these at once as a parameter pack to handleStates.</i>&quot; Why do you need to use a roundabout way to do this? If you have <code>StateTypes</code>, then you know  what types these things contain. So why the conversion to base classes? If they&#39;ve been converted to base classes, why not convert them back to the derived classes with <code>StateTypes</code>? Why use this <code>any</code> approach when you <i>know</i> the types?"}, {"owner": {"reputation": 123, "user_id": 7164767, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/Xf9zx.jpg?s=128&g=1", "display_name": "Dracam", "link": "https://stackoverflow.com/users/7164767/dracam"}, "reply_to_user": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1572456795, "post_id": 58630183, "comment_id": 103568865, "body": "@NicolBolas I added a code skeleton which might help. The point is that I get the <code>handleState</code> function from a higher, more dynamic level of abstraction (which again gets it from a lower level at another point). The whole design needs a paper, which I haven&#39;t written yet. But a simpler version in C# works in production, so I know that I&#39;m on the right track."}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1572457367, "post_id": 58630183, "comment_id": 103569110, "body": "And <code>struct foo { int a, int b };</code> is missing a semicolon after <code>b</code>. I recommend <a href=\"https://godbolt.org\" rel=\"nofollow noreferrer\">godbolt.org</a> (or other online compilers) to quickly check whether your code actually compiles. Anyone trying to answer this will probably paste it in there as a first step, so if that gives no errors your question is off to a good start."}, {"owner": {"reputation": 123, "user_id": 7164767, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/Xf9zx.jpg?s=128&g=1", "display_name": "Dracam", "link": "https://stackoverflow.com/users/7164767/dracam"}, "reply_to_user": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1572457960, "post_id": 58630183, "comment_id": 103569391, "body": "@MaxLanghof Thanks for the hint, I edited the code and added a godbolt link."}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1572457976, "post_id": 58630183, "comment_id": 103569398, "body": "@Dracam Awesome, have an upvote!"}], "answers": [{"comments": [{"owner": {"reputation": 123, "user_id": 7164767, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/Xf9zx.jpg?s=128&g=1", "display_name": "Dracam", "link": "https://stackoverflow.com/users/7164767/dracam"}, "edited": false, "score": 0, "creation_date": 1572457144, "post_id": 58630888, "comment_id": 103568999, "body": "sadly, <code>getStateFor</code> comes from a higher level of abstraction, which manages many of the <code>StateHandler</code>s with partially overlapping types dynamically. So I cannot template it. I still appreciate your insights on my approach."}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "reply_to_user": {"reputation": 123, "user_id": 7164767, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/Xf9zx.jpg?s=128&g=1", "display_name": "Dracam", "link": "https://stackoverflow.com/users/7164767/dracam"}, "edited": false, "score": 0, "creation_date": 1572457247, "post_id": 58630888, "comment_id": 103569050, "body": "@Dracam That shouldn&#39;t really be a problem from what I can tell. It&#39;s just a lot more pointless casting. Working on applying this to your code sample."}, {"owner": {"reputation": 123, "user_id": 7164767, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/Xf9zx.jpg?s=128&g=1", "display_name": "Dracam", "link": "https://stackoverflow.com/users/7164767/dracam"}, "edited": false, "score": 0, "creation_date": 1572458256, "post_id": 58630888, "comment_id": 103569522, "body": "Thank you very much! I am still confused by how the <code>...</code> exactly works, especially since it expends on types and values here, at once. But it makes sense when looking at your solution."}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "reply_to_user": {"reputation": 123, "user_id": 7164767, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/Xf9zx.jpg?s=128&g=1", "display_name": "Dracam", "link": "https://stackoverflow.com/users/7164767/dracam"}, "edited": false, "score": 1, "creation_date": 1572458608, "post_id": 58630888, "comment_id": 103569677, "body": "@Dracam I&#39;m still on the fence about <code>std::any</code> but I guess it won&#39;t be more expensive than a <code>std::dynamic_pointer_cast</code> to derived (that&#39;s basically how <code>std::any</code> works in the first place, which is why this is a weird mix). Do note that in isolation, this problem can be solved without any <code>std::any</code>, common <code>Subject</code> base class or other form of type erasure (and will thus perform much better, in case that&#39;s ever of relevance): <a href=\"https://godbolt.org/z/cAoioW\" rel=\"nofollow noreferrer\">godbolt.org/z/cAoioW</a>"}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "reply_to_user": {"reputation": 123, "user_id": 7164767, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/Xf9zx.jpg?s=128&g=1", "display_name": "Dracam", "link": "https://stackoverflow.com/users/7164767/dracam"}, "edited": false, "score": 1, "creation_date": 1572459217, "post_id": 58630888, "comment_id": 103569942, "body": "Note: The mixing of type and value expansion works because you spell out the argument list of the lambda (you don&#39;t deduce it again). But if you don&#39;t have to manually cast back to the un-erased type, you don&#39;t need to expand both types and values (see last link). This means you can conveniently write <code>auto&amp;&amp;</code> (to not spell out the long type). It will deduce another variadic pack (from the tuple) which you would not be able to mix with the one from the class, but you don&#39;t have to there (you only need to expand the values). It&#39;s ok if this doesn&#39;t make sense for now but maybe it helps a bit."}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "reply_to_user": {"reputation": 123, "user_id": 7164767, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/Xf9zx.jpg?s=128&g=1", "display_name": "Dracam", "link": "https://stackoverflow.com/users/7164767/dracam"}, "edited": false, "score": 1, "creation_date": 1572459370, "post_id": 58630888, "comment_id": 103570023, "body": "(But you could just spell out the types as in the answer, that works just fine. Just pointing out why writing <code>auto&amp;&amp;</code> <i>wouldn&#39;t</i> work in the answer - you&#39;d deduce two conceptually different packs that you can&#39;t simply expand at the same time)."}, {"owner": {"reputation": 123, "user_id": 7164767, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/Xf9zx.jpg?s=128&g=1", "display_name": "Dracam", "link": "https://stackoverflow.com/users/7164767/dracam"}, "edited": false, "score": 0, "creation_date": 1572499922, "post_id": 58630888, "comment_id": 103581078, "body": "Thank you for the additional discussion. It shows that there is always a more elegant solution. Except in this case - the level from where <code>getStateFor</code> comes from is very dynamic during runtime. And that is something you always pay for in performance. In this case, I will most likely end up redirecting to a hashmap lookup. But I am glad to know that there are always ways to further optimize."}], "tags": [], "owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "is_accepted": true, "score": 1, "last_activity_date": 1572458738, "last_edit_date": 1572458738, "creation_date": 1572456874, "answer_id": 58630888, "question_id": 58630183, "link": "https://stackoverflow.com/questions/58630183/apply-function-to-each-element-in-tuple-cast-each-to-a-different-type-in-a-type/58630888#58630888", "title": "Apply function to each element in tuple, cast each to a different type in a type pack, then pass as parameter pack", "body": "<p>The main problem is that your tuple contains <code>std::shared_ptr&lt;WithState&lt;StateTypes&gt;&gt;...</code>  so that's what <code>apply</code> will try to call your given lambda with, but the lambda only takes <code>StateTypes&amp;&amp;...</code>.</p>\n\n<p>There are a few more changes to make it work, but first off the working thing:</p>\n\n<p><a href=\"https://godbolt.org/z/hyFBtV\" rel=\"nofollow noreferrer\">https://godbolt.org/z/hyFBtV</a></p>\n\n<ul>\n<li><p>I changed <code>getStateFor</code> to be a template function where you specify the type you expect:</p>\n\n<pre><code>template&lt;class StateType&gt;\nStateType getStateFor(std::shared_ptr&lt;Subject&gt; s)\n{\n    if (auto withState = std::dynamic_pointer_cast&lt;WithState&lt;StateType&gt;&gt;(s))\n        return withState-&gt;getValue();\n    throw \"AHHH\";\n}\n</code></pre>\n\n<p>You can still assign that to a <code>std::any</code> if you want (or provide a non-templated overload that returns <code>std::any</code>). But for the purposes here casting to <code>std::any</code> and back is just unnecessary overhead - if anything, it's <em>less</em> type-safe.</p></li>\n<li><p>Your lambda arguments were <code>StateTypes&amp;&amp;... withStates</code>. Aside from the type itself needing to be different, the <code>&amp;&amp;</code> doesn't work unless you actually provide temporaries to the lambda (which <code>std::apply</code> won't do), or if you do type deduction via <code>auto&amp;&amp;</code> (which is different). In the code the lambda expression is thus (I took by value for simplicity, you might take by [const] reference):</p>\n\n<pre><code>    [this](std::shared_ptr&lt;WithState&lt;StateTypes&gt;&gt;... withStatePtrs) {\n        handleStates(getStateFor&lt;StateTypes&gt;(withStatePtrs)...);\n    }\n</code></pre></li>\n<li><p>You also don't need a <code>dynamic_pointer_cast</code> to go from <code>std::shared_ptr&lt;WithState&lt;T&gt;&gt;</code> to <code>std::shared_ptr&lt;Subject&gt;</code>.</p></li>\n<li><p>Your tuple type had an extra <code>&gt;</code>.</p></li>\n</ul>\n\n<hr>\n\n<p>Edit: Using the snippet in the updated question, you get this:</p>\n\n<p><a href=\"https://godbolt.org/z/D_AJ1n\" rel=\"nofollow noreferrer\">https://godbolt.org/z/D_AJ1n</a></p>\n\n<p>The same considerations still apply, you just have to put an <code>any_cast</code> in there:</p>\n\n<pre><code>void handleStatesForSubjects(std::function&lt;std::any(std::shared_ptr&lt;Subject&gt;)&gt; getStateFor)\n{\n  std::apply(\n    [this, getStateFor](std::shared_ptr&lt;WithState&lt;StateTypes&gt;&gt;... withStates) {\n      handleStates(std::any_cast&lt;StateTypes&gt;(getStateFor(withStates))...);\n    },\n    subjects\n  );\n}\n</code></pre>\n\n<p>It's probably more straightforward than you expected, but you just write down the operation for each element: Call <code>getStateFor</code>, then <code>any_cast</code> it. Repeat for each variadic argument (<code>...</code>). You don't need any <code>dynamic_pointer_cast</code> or similar - <code>std::shared_ptr&lt;Derived&gt;</code> is implicitly convertible to <code>std::shared_ptr&lt;Base&gt;</code>.</p>\n"}], "owner": {"reputation": 123, "user_id": 7164767, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/Xf9zx.jpg?s=128&g=1", "display_name": "Dracam", "link": "https://stackoverflow.com/users/7164767/dracam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "accepted_answer_id": 58630888, "answer_count": 1, "score": 1, "last_activity_date": 1572458738, "creation_date": 1572454099, "last_edit_date": 1572457935, "question_id": 58630183, "link": "https://stackoverflow.com/questions/58630183/apply-function-to-each-element-in-tuple-cast-each-to-a-different-type-in-a-type", "title": "Apply function to each element in tuple, cast each to a different type in a type pack, then pass as parameter pack", "body": "<p>I am building a complex extensible system. The details are not important, but I really like the design except for this one issue. </p>\n\n<p>I have an interface <code>WithState&lt;T&gt; : Subject</code> for some type T. </p>\n\n<p>The problematic class is templated on <code>template &lt;typename... StateTypes&gt;</code>. </p>\n\n<p>It holds an <code>std::tuple&lt;std::shared_ptr&lt;WithState&lt;StateTypes&gt;&gt;...&gt;&gt;</code>.</p>\n\n<p>I have a function <code>std::any getStateFor(std::shared_ptr&lt;Subject&gt;)</code> (where <code>WithState&lt;T&gt; : Subject</code>).</p>\n\n<p>I also have a function <code>void handleStates(StateTypes... states)</code> (might as well take a tuple at this point, whatever is easier)</p>\n\n<p>Now I need to plug all these parts together: I need to upcast the elements in my tuple to <code>shared_ptr&lt;Subject&gt;</code>, then apply <code>getStateFor</code> to each of these elements in order and <code>std::any_cast</code> the results in order of <code>StateTypes...</code>, then forward all these at once as a parameter pack to <code>handleStates</code>. </p>\n\n<p>(Before this is marked as XY problem: the higher levels of abstractions do not care about concrete state types, whereas I want to implement the lower parts with as much type safety as possible. So far, this approach is looking good for my needs)</p>\n\n<p>I might be able to do this by converting my tuple to a vector, applying <code>getStateFor</code> on each, then writing a recursive function which applies the proper <code>any_cast</code>, but then I still have no idea how to collect my results into a tuple with different types. I wonder if this works with a smart fold expression...</p>\n\n<p>Here is a skeleton of the existing code:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;memory&gt;\n#include &lt;tuple&gt;\n#include &lt;any&gt;\n#include &lt;iostream&gt;\n#include &lt;cassert&gt;\n#include &lt;functional&gt;\n\n// ignoring references and const for brevity\n\nclass Subject { \npublic:\n  /* deleted copy assignment and constructor */ \n  // this is here so that the example works\n  virtual std::any getState() = 0;\n};\n\ntemplate &lt;typename T&gt; class WithState : public Subject { };\n\ntemplate &lt;typename... StateTypes&gt;\nclass StateHandler {\npublic:   \n  std::tuple&lt;std::shared_ptr&lt;WithState&lt;StateTypes&gt;&gt;...&gt; subjects;\n  // this one is actually in another class, but it doesn't matter\n  void handleStates(StateTypes... states);\n\n  void handleStatesForSubjects(std::function&lt;std::any (std::shared_ptr&lt;Subject&gt;)&gt; getStateFor) {\n    // how do I implement this?\n  }\n};\n\nint main() {\n  struct foo { int a; int b; };\n\n  struct WithInt : public WithState&lt;int&gt; { \n    std::any getState() override { return 17; } \n  };\n  struct WithFoo : public WithState&lt;foo&gt; {\n    std::any getState() override { return foo { 1, 2 }; }\n  };\n\n  StateHandler&lt;int, foo&gt; handler;\n\n  handler.subjects = { \n    std::make_shared&lt;WithInt&gt;(), std::make_shared&lt;WithFoo&gt;() };\n\n  handler.handleStatesForSubjects([](auto subj) { return subj-&gt;getState(); });\n}\n</code></pre>\n\n<p><a href=\"https://godbolt.org/z/cBU8_Q\" rel=\"nofollow noreferrer\">on godbolt</a></p>\n\n<p>However, this is still missing the <code>std::any_cast</code>s to the concrete types.</p>\n\n<p>Any ideas?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1572455594, "post_id": 58629872, "comment_id": 103568290, "body": "When you see a highly regular number like <code>0xDDDDDDCD</code>, the program is <a href=\"https://en.wikipedia.org/wiki/Magic_number_(programming)#Magic_debug_values\" rel=\"nofollow noreferrer\">probably trying to tell you something</a>. 0xDDDDDDCD is probably 0xDDDDDDDD with an offset, and looking up 0xDDDDDDDD we find the program is likely trying to use memory that had previously been returned."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1572455710, "post_id": 58629872, "comment_id": 103568357, "body": "Unrelated (probably): You should familiarize yourself with <a href=\"https://en.cppreference.com/w/cpp/language/rule_of_three\" rel=\"nofollow noreferrer\">the Rule of Three and its friends</a>. You can&#39;t safely use a class like this without taking them into account."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1572456026, "post_id": 58629872, "comment_id": 103568503, "body": "<code>void dfs(Graph g, int v, bool vazut[])</code> -- You are passing <code>Graph</code> by value, and <code>Graph</code> does not have correct copy semantics.  The code as posted is not going to work until you implement the Rule of 3 (already mentioned).  No need to look further."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1572456386, "post_id": 58629872, "comment_id": 103568664, "body": "A simple <a href=\"https://coliru.stacked-crooked.com/a/481ad0921c4667d6\" rel=\"nofollow noreferrer\">2 line main program</a> shows the error."}], "answers": [{"comments": [{"owner": {"reputation": 731, "user_id": 8184859, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/9G1p6.jpg?s=128&g=1", "display_name": "Mode77", "link": "https://stackoverflow.com/users/8184859/mode77"}, "edited": false, "score": 0, "creation_date": 1572453427, "post_id": 58629902, "comment_id": 103567222, "body": "Does it matter if they&#39;re calling C code whether to use new/delete vs. *alloc/free in their code?"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 731, "user_id": 8184859, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/9G1p6.jpg?s=128&g=1", "display_name": "Mode77", "link": "https://stackoverflow.com/users/8184859/mode77"}, "edited": false, "score": 0, "creation_date": 1572453552, "post_id": 58629902, "comment_id": 103567288, "body": "@Mode77, no, it does not. Once memory is allocated, rest of the code can use the memory regardless of how it was allocated."}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1572453817, "post_id": 58629902, "comment_id": 103567424, "body": "@RSahu ...although you might have to placement-new objects into that memory first."}, {"owner": {"reputation": 81, "user_id": 10778288, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-cKdVS1J_9k8/AAAAAAAAAAI/AAAAAAAAADY/lsYrvZhirh8/photo.jpg?sz=128", "display_name": "ballow", "link": "https://stackoverflow.com/users/10778288/ballow"}, "edited": false, "score": 0, "creation_date": 1572453911, "post_id": 58629902, "comment_id": 103567472, "body": "even if i do it with new and then i initalize all the matrix with zeros, i still get that error when i deallocate memory, i really dont get it why"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 81, "user_id": 10778288, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-cKdVS1J_9k8/AAAAAAAAAAI/AAAAAAAAADY/lsYrvZhirh8/photo.jpg?sz=128", "display_name": "ballow", "link": "https://stackoverflow.com/users/10778288/ballow"}, "edited": false, "score": 0, "creation_date": 1572454702, "post_id": 58629902, "comment_id": 103567838, "body": "@ballow, when I commented out the call to <code>dfs</code> in <code>main</code>, the  problem went away. You are doing something in that function that causes undefined behavior. You&#39;ll have to step through that code in a debugger to figure out how to resolve it."}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 6, "last_activity_date": 1572453210, "last_edit_date": 1572453210, "creation_date": 1572452953, "answer_id": 58629902, "question_id": 58629872, "link": "https://stackoverflow.com/questions/58629872/access-violation-reading-location-in-a-destructor-of-a-class/58629902#58629902", "title": "Access violation reading location in a destructor of a class", "body": "<p>You cannot use <code>delete</code> to deallocate memory that was allocated by <code>calloc</code> (or any of the <code>malloc</code> family of functions). Use <code>new</code> instead to allocate memory.</p>\n\n<pre><code>Graph(int nr_noduri) {\n    this-&gt;nr_noduri = nr_noduri;\n    mat = new bool*[nr_noduri];\n    for (int i = 0; i &lt; nr_noduri; i++) {\n        mat[i] = new bool[nr_noduri];\n    }\n}\n</code></pre>\n\n<p>Better yet, use <code>std::vector&lt;std::vector&lt;bool&gt;&gt;</code> to hold the data.</p>\n\n<pre><code>class Graph {\n   std::vector&lt;std::vector&lt;bool&gt;&gt; mat;\n\n   Graph(int nr_noduri) : mat(nr_noduri, std::vector&lt;bool&gt;(nr_noduri) {}\n\n   ...\n};\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "is_accepted": true, "score": 2, "last_activity_date": 1572469260, "last_edit_date": 1572469260, "creation_date": 1572458569, "answer_id": 58631313, "question_id": 58629872, "link": "https://stackoverflow.com/questions/58629872/access-violation-reading-location-in-a-destructor-of-a-class/58631313#58631313", "title": "Access violation reading location in a destructor of a class", "body": "<p>This line:</p>\n\n<p><code>void dfs(Graph g, int v, bool vazut[])</code></p>\n\n<p>has the first parameter <code>g</code> passed by value, thus will be a temporary copy of the <code>Graph</code> that is passed in.  If <code>Graph</code> does not have correct copy semantics, then the call to <code>dfs</code> will cause undefined behavior.</p>\n\n<p>The <code>Graph</code> contains a member <code>mat</code> that points to dynamically allocated memory.  In addition, <code>Graph</code> has a destructor that issues a <code>delete []</code> on this memory.  So when <code>Graph</code> is copied, that <code>mat</code> pointer is also copied.  You now have <strong>two</strong> <code>mat</code> pointers pointing to the same memory.  When the temporary goes out of scope, <code>delete []</code> will be issued on the <code>mat</code> pointer.  </p>\n\n<p>That is probably the reason why you are getting runtime issues -- the memory <code>mat</code> was pointing to has already been deleted, and you're deleting it again a second time.</p>\n\n<p>To fix this issue you have two choices:</p>\n\n<ol>\n<li>Pass <code>Graph</code> by reference to <code>dfs</code> instead of by value, or</li>\n<li>Fix your <code>Graph</code> class to handle copies correctly.</li>\n</ol>\n\n<p>For item 1:</p>\n\n<p><code>void dfs(Graph&amp; g, int v, bool vazut[])</code></p>\n\n<p>that avoids the temporary copy from being made.</p>\n\n<hr>\n\n<p>However, that to me is just a band-aid solution to avoid having to hit the copy bug (even though you should pass-by-reference anyway).  </p>\n\n<p>A better one is to make the <code>Graph</code> class safely copyable, meaning that copies can be made correctly, without a \"double deletion\" errors you're seeing now.</p>\n\n<p>To do that, add the following functions to complete the <a href=\"https://stackoverflow.com/questions/4172722/what-is-the-rule-of-three\">rule of 3</a> to allow copying to be performed correctly:</p>\n\n<pre><code>#include &lt;algorithm&gt;\n//\u2026\nGraph(const Graph&amp; rhs) : mat(nullptr), nr_noduri(rhs.nr_noduri)\n{\n    mat = new bool* [rhs.nr_noduri];\n    for (int i = 0; i &lt; rhs.nr_noduri; i++) {\n        mat[i] = new bool[rhs.nr_noduri];\n    }\n    for (int i = 0; i &lt; rhs.nr_noduri; i++) {\n        for (int j = 0; j &lt; rhs.nr_noduri; j++) {\n            mat[i][j] = rhs.mat[i][j];\n        }\n    }\n}\n\nGraph&amp; operator=(const Graph&amp; rhs)\n{\n    if ( this != &amp;rhs )\n    {\n        Graph temp(rhs);\n        std::swap(temp.mat, mat);\n        std::swap(temp.nr_noduri, nr_noduri);\n    }\n    return *this;\n}\n</code></pre>\n\n<p>Your class was lacking a user-defined copy constructor and assignment operator (which uses the <a href=\"https://stackoverflow.com/questions/3279543/what-is-the-copy-and-swap-idiom\">copy / swap idiom</a>). </p>\n\n<hr>\n\n<p>Another unrelated issue is the way you're building your 2D matrix.  You're using one of the worst methods, and that is to allocate pointers, then in a loop, allocate each row.  </p>\n\n<p>It not only is a bottleneck in terms of speed (calling the allocator for each row), it is not cache-friendly due to the rows being allocated in different parts of the heap, in addition to heap fragmentation, and if one of those calls to <code>new[]</code> within the loop fails, you have to rollback all of the successful calls to <code>new[]</code> if you don't want to leak memory.</p>\n\n<p>See <a href=\"https://stackoverflow.com/questions/21943621/how-to-create-a-contiguous-2d-array-in-c/21944048#21944048\">this solution</a> for a better method of creating a 2D array.</p>\n"}], "owner": {"reputation": 81, "user_id": 10778288, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-cKdVS1J_9k8/AAAAAAAAAAI/AAAAAAAAADY/lsYrvZhirh8/photo.jpg?sz=128", "display_name": "ballow", "link": "https://stackoverflow.com/users/10778288/ballow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 135, "favorite_count": 0, "accepted_answer_id": 58631313, "answer_count": 2, "score": 1, "last_activity_date": 1572469260, "creation_date": 1572452806, "last_edit_date": 1572454187, "question_id": 58629872, "link": "https://stackoverflow.com/questions/58629872/access-violation-reading-location-in-a-destructor-of-a-class", "title": "Access violation reading location in a destructor of a class", "body": "<p>I've built the Graph class, one constructor and one destructor. My problem is: when i compile this code, i get an error at this line <code>delete [] mat[i];</code>, the error is 'Access violation reading location 0xDDDDDDCD.' and i'm not sure what am i doing wrong. I mean i only delete the memory i dynamically alocated. \nLater edit: even if i use this instead of my method : </p>\n\n<pre><code>Graph(int nr_noduri) {\n\n\nthis-&gt;nr_noduri = nr_noduri;\n    mat = new bool* [nr_noduri];\n    for (int i = 0; i &lt; nr_noduri; i++) {\n        mat[i] = new bool[nr_noduri];\n    }\n    for (int i = 0; i &lt; nr_noduri; i++) {\n        for (int j = 0; j &lt; nr_noduri; j++) {\n            mat[i][j] = 0;\n        }\n    }\n}\n</code></pre>\n\n<p>My code  is :</p>\n\n<pre><code> #include &lt;iostream&gt;\n#include &lt;cstdlib&gt;\nusing namespace std;\n\nclass Graph {\n    bool** mat;\n    int nr_noduri;\n\npublic:\n    Graph(int nr_noduri) {\n        this-&gt;nr_noduri = nr_noduri;\n        mat = (bool**)calloc(nr_noduri, sizeof(bool*));\n        for (int i = 0; i &lt; nr_noduri; i++) {\n            mat[i] = (bool*)calloc(nr_noduri, sizeof(bool));\n        }\n    }\n\n    int size() {\n        return nr_noduri;\n    }\n\n    void addArc(int v, int w) {\n        if (v &lt; nr_noduri &amp;&amp; w &lt; nr_noduri) {\n            mat[v][w] = true;\n        }\n        else cout &lt;&lt; \"Not enough nodes !\" &lt;&lt; endl;\n    }\n\n    bool isArc(int v, int w) {\n        return (mat[v][w] == true);\n\n    }\n\n    void print() {\n        for (int i = 0; i &lt; nr_noduri; i++) {\n            cout &lt;&lt; endl;\n            for (int j = 0; j &lt; nr_noduri; j++) {\n                cout &lt;&lt; mat[i][j] &lt;&lt; \" \";\n            }\n        }\n        cout &lt;&lt; endl;\n    }\n\n    ~Graph() {\n        //cout &lt;&lt; nr_noduri;\n        for (int i = 0; i &lt; nr_noduri; i++) {\n            delete [] mat[i];\n        }\n        delete[] mat;\n    }\n\n    friend void dfs(Graph g, int v, bool vazut[]);\n};\n\nvoid dfs(Graph g, int v, bool vazut[]) {\n    int w;\n    vazut[v] = true;\n    for (w = 0; w &lt; g.size(); w++) {\n        if (g.isArc(v, w) &amp;&amp; !vazut[w]) {\n            cout &lt;&lt; v &lt;&lt; \"-&gt;\" &lt;&lt; w;\n            dfs(g, w, vazut);\n        }\n    }\n}\n\n\nint main() {\n    int nr_noduri;\n    cin &gt;&gt; nr_noduri;\n    Graph v(nr_noduri);\n    v.print();\n    v.addArc(1, 2);\n    v.addArc(2, 5);\n    cout &lt;&lt; v.isArc(1, 2) &lt;&lt; endl;\n    v.print();\n    bool vazut[100];\n    dfs(v, 1, vazut);\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "constructor", "member", "initializer-list"], "comments": [{"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 1, "creation_date": 1572453000, "post_id": 58629861, "comment_id": 103566988, "body": "<a href=\"https://en.cppreference.com/w/cpp/language/initializer_list\" rel=\"nofollow noreferrer\">Member initializer list</a>."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1572453119, "post_id": 58629861, "comment_id": 103567057, "body": "See: <a href=\"https://en.cppreference.com/w/cpp/language/aggregate_initialization#Designated_initializers\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/language/&hellip;</a>"}, {"owner": {"reputation": 1773, "user_id": 8805095, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a4948ba17681551aa212dbc7be9bff40?s=128&d=identicon&r=PG&f=1", "display_name": "Moia", "link": "https://stackoverflow.com/users/8805095/moia"}, "edited": false, "score": 1, "creation_date": 1572456103, "post_id": 58629861, "comment_id": 103568546, "body": "Short answer is no"}, {"owner": {"user_type": "does_not_exist", "display_name": "user10957435"}, "edited": false, "score": 0, "creation_date": 1572459441, "post_id": 58629861, "comment_id": 103570050, "body": "I hesitate to call it a <a href=\"https://stackoverflow.com/q/18731707/10957435\">duplicate</a>, but good reading on the subject. The sort answer is what you are asking to do is not allowed in C++."}, {"owner": {"user_type": "does_not_exist", "display_name": "user10957435"}, "edited": false, "score": 0, "creation_date": 1572459571, "post_id": 58629861, "comment_id": 103570110, "body": "I stand corrected. It may be possible <a href=\"https://stackoverflow.com/a/29337570/10957435\">in c++20</a> and with boost."}], "answers": [{"comments": [{"owner": {"reputation": 629, "user_id": 7116039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://lh6.googleusercontent.com/-W1XRU2i8SxQ/AAAAAAAAAAI/AAAAAAAAAHs/ceXJf5aD9w4/photo.jpg?sz=128", "display_name": "olegario", "link": "https://stackoverflow.com/users/7116039/olegario"}, "edited": false, "score": 1, "creation_date": 1572455433, "post_id": 58630484, "comment_id": 103568233, "body": "I should say that is a very encrypted way to attributes value for object"}, {"owner": {"reputation": 57, "user_id": 4803349, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/3ddc0ee4a184f46b87b94c046711441e?s=128&d=identicon&r=PG&f=1", "display_name": "Robert Puscasu", "link": "https://stackoverflow.com/users/4803349/robert-puscasu"}, "edited": false, "score": 0, "creation_date": 1572455707, "post_id": 58630484, "comment_id": 103568356, "body": "But i dont want that. Please read my code again. I want to specify which variable to take which value, independent of the order i put them, like this : {s1=&quot;String1&quot;, s2=&quot;String2&quot;}"}], "tags": [], "owner": {"reputation": 415, "user_id": 7865858, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-nN0e1OsYUmE/AAAAAAAAAAI/AAAAAAAAANg/Ar7hJOecy0c/photo.jpg?sz=128", "display_name": "MrProgrammer", "link": "https://stackoverflow.com/users/7865858/mrprogrammer"}, "is_accepted": false, "score": 1, "last_activity_date": 1572456222, "last_edit_date": 1572456222, "creation_date": 1572455210, "answer_id": 58630484, "question_id": 58629861, "link": "https://stackoverflow.com/questions/58629861/is-there-a-way-in-c-to-construct-an-object-by-specifying-each-member-variable/58630484#58630484", "title": "Is there a way in C++ to construct an object by specifying each member variable in a list?", "body": "<p>Your code, with proper constructor:</p>\n\n<pre><code>class A\n{\n    public:\n    string s1, s2, s3;\n    A(string a, string b, string c): s1{a},s2{b},s3{c}\n    {\n\n    }\n};\n</code></pre>\n\n<p>Now you can initialize objects of this class as:</p>\n\n<pre><code>A a(\"String1\",\"String2\",\"String3\");\n</code></pre>\n\n<p>If you are interested you can refer from here: <a href=\"https://en.cppreference.com/w/cpp/language/initializer_list\" rel=\"nofollow noreferrer\">https://en.cppreference.com/w/cpp/language/initializer_list</a></p>\n\n<p>If you want named arguments, well C++ doesn't have named arguments, here is a proposal that might get implemented in future (It's not in C++17): <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2014/n4172.htm\" rel=\"nofollow noreferrer\">http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2014/n4172.htm</a></p>\n\n<p>If you still want named arguments, here is a FluentCpp article on how to get it working: <a href=\"https://www.fluentcpp.com/2018/12/14/named-arguments-cpp/\" rel=\"nofollow noreferrer\">https://www.fluentcpp.com/2018/12/14/named-arguments-cpp/</a></p>\n"}, {"tags": [], "owner": {"reputation": 84, "user_id": 829974, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3050b2f62ff2ee0b31c1a676c8d6bcfb?s=128&d=identicon&r=PG", "display_name": "Jim Lahey", "link": "https://stackoverflow.com/users/829974/jim-lahey"}, "is_accepted": true, "score": 1, "last_activity_date": 1572456141, "creation_date": 1572456141, "answer_id": 58630719, "question_id": 58629861, "link": "https://stackoverflow.com/questions/58629861/is-there-a-way-in-c-to-construct-an-object-by-specifying-each-member-variable/58630719#58630719", "title": "Is there a way in C++ to construct an object by specifying each member variable in a list?", "body": "<p>Not in C++, but C99 does support this (designated initializers).</p>\n\n<pre><code>struct point { int x, y; };\n\nstruct point p = { .y = yvalue, .x = xvalue };\n</code></pre>\n\n<p><a href=\"https://gcc.gnu.org/onlinedocs/gcc/Designated-Inits.html\" rel=\"nofollow noreferrer\">https://gcc.gnu.org/onlinedocs/gcc/Designated-Inits.html</a></p>\n"}], "owner": {"reputation": 57, "user_id": 4803349, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/3ddc0ee4a184f46b87b94c046711441e?s=128&d=identicon&r=PG&f=1", "display_name": "Robert Puscasu", "link": "https://stackoverflow.com/users/4803349/robert-puscasu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "accepted_answer_id": 58630719, "answer_count": 2, "score": 0, "last_activity_date": 1572456222, "creation_date": 1572452771, "question_id": 58629861, "link": "https://stackoverflow.com/questions/58629861/is-there-a-way-in-c-to-construct-an-object-by-specifying-each-member-variable", "title": "Is there a way in C++ to construct an object by specifying each member variable in a list?", "body": "<p>I remember in college there was a way to make initialize an object writing a series of member variables initialization, separated by commas like in the code example from bellow, but i cant remember how it was called.</p>\n\n<pre><code>class A\n{\npublic:\n    string s1, s2, s3;\n    A()\n    {\n\n    }\n};\n</code></pre>\n\n<pre><code>#include \"A.h\"\n\nint main()\n{\n    A a\n    {\n        s1 = \"String1\",\n        s2 = \"String 2\",\n        s3 =\"String 3\"\n    }\n}\n</code></pre>\n\n<p>What else should i type in order for that constructor like list to work?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1572453950, "post_id": 58629839, "comment_id": 103567490, "body": "Note: The <a href=\"https://en.cppreference.com/w/cpp/numeric/random\" rel=\"nofollow noreferrer\">modern random facilities</a> are <i>far</i> superior to <code>srand()</code>/<code>rand()</code>."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1572454369, "post_id": 58629839, "comment_id": 103567672, "body": "it is always more efficient to roll a number in only the range of allowed values rather than rolling a number until it falls within the range of allowed values, in your example, your random number has a range of 5 different values, but only for 3 you do not continue to reroll. Better pick a random number out of 3 from the start"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1572454975, "post_id": 58629839, "comment_id": 103567992, "body": "You can replace the <code>goto</code> with a function. Something that loops forever and returns if case 0, 1, or 4 is reached. In general though, put all of the names in a library container, <code>std::vector</code> probably, then <a href=\"https://en.cppreference.com/w/cpp/algorithm/random_shuffle\" rel=\"nofollow noreferrer\">apply <code>std::shuffle</code></a>. Pick the entries in pairs. The first two are a pair, the second two are a pair..."}], "answers": [{"tags": [], "owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 0, "last_activity_date": 1572452986, "creation_date": 1572452986, "answer_id": 58629908, "question_id": 58629839, "link": "https://stackoverflow.com/questions/58629839/rand-case-switch-runs-to-infinity-after-multiple-iterations/58629908#58629908", "title": "Rand() case switch runs to infinity after multiple iterations", "body": "<p>In this code snippet</p>\n\n<pre><code>jakegen:\n  jake = rand() % 5;\n  if (jake == tommy || jake == kendra) {\n    goto jakegen;\n  }\n  switch (jake) {\n    case 0: std::cout &lt;&lt; \"Jake has: Tommy \\n\";\n      break;\n    case 1: std::cout &lt;&lt; \"Jake has: Kendra \\n\";\n      break;\n    case 2: goto jakegen;\n      break;\n    case 3: goto jakegen;\n      break;\n    case 4: std::cout &lt;&lt; \"Jake has: Abby \\n\";\n      break;\n  }\n</code></pre>\n\n<p>if jake == tommy or jake == kendra the control is passed to the label <code>jakegen</code>. </p>\n\n<p>So it seems the control never is passed to these labels </p>\n\n<pre><code>case 0: std::cout &lt;&lt; \"Jake has: Tommy \\n\";\n  break;\ncase 1: std::cout &lt;&lt; \"Jake has: Kendra \\n\";\n  break;\n</code></pre>\n\n<p>In any other case except when jake is equal to 4 the control is also passed to the label <code>jakegen</code>.</p>\n\n<pre><code>    case 2: goto jakegen;\n      break;\n    case 3: goto jakegen;\n      break;\n</code></pre>\n\n<p>And in the presented code snippet it is unclear when the variables <code>tommy</code> or <code>kendra</code> are assigned.</p>\n"}], "owner": {"reputation": 1, "user_id": 12298512, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-yhtueYV7_UM/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reDF840UlmkNTZ3DcrhQVXIvD1kCw/photo.jpg?sz=128", "display_name": "Thomas Martin", "link": "https://stackoverflow.com/users/12298512/thomas-martin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 35, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1572452986, "creation_date": 1572452700, "question_id": 58629839, "link": "https://stackoverflow.com/questions/58629839/rand-case-switch-runs-to-infinity-after-multiple-iterations", "title": "Rand() case switch runs to infinity after multiple iterations", "body": "<p>I am writing a simple c++ script to randomly assign people in a gift exchange. Yes I know other codes or even excel is probably better for this, but this is more of an exercise in my c++ skills than anything.</p>\n\n<p>Anyway, here is an example of how I am generating a random pick:</p>\n\n<pre><code>jakegen:\n  jake = rand() % 5;\n  if (jake == tommy || jake == kendra) {\n    goto jakegen;\n  }\n  switch (jake) {\n    case 0: std::cout &lt;&lt; \"Jake has: Tommy \\n\";\n      break;\n    case 1: std::cout &lt;&lt; \"Jake has: Kendra \\n\";\n      break;\n    case 2: goto jakegen;\n      break;\n    case 3: goto jakegen;\n      break;\n    case 4: std::cout &lt;&lt; \"Jake has: Abby \\n\";\n      break;\n  }\n</code></pre>\n\n<p>So I generate a random number within my range (0-4), check if it duplicates a previous pick and re-roll if it does, and then the first roll that doesn't match a previous pick goes into a switch to see who the pick is. </p>\n\n<p>I also added the ability to re-roll at the end by going back to the start (after initializing variables, before rolling any random numbers). </p>\n\n<p>My problem is that, if I re-roll a few times, the last person in the pick process will never settle on a number. It will loop between rolling a number, checking it, and re-rolling on into infinity. </p>\n\n<p>I have no idea why this is happening, there should always be one available number by the end. Any obvious problems? I can post the rest of the code if asked for.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 2388, "user_id": 2705567, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/f7d0876172cd6bee4fedd3591bcff1a9?s=128&d=identicon&r=PG&f=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/2705567/chris"}, "edited": false, "score": 2, "creation_date": 1572452821, "post_id": 58629806, "comment_id": 103566879, "body": "std::stof perhaps?"}, {"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 2, "creation_date": 1572453759, "post_id": 58629806, "comment_id": 103567393, "body": "Concerning <i>add a new column in the CSV file</i>: Either read file into memory (and close input stream), then overwrite file with new contents (i.e. added column), or read old file and write new file with different name (concurrently) row by row in one loop."}], "answers": [{"tags": [], "owner": {"reputation": 7744, "user_id": 9666018, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc2959ed405ad18cbca6aa3efe01bc7d?s=128&d=identicon&r=PG&f=1", "display_name": "Armin Montigny", "link": "https://stackoverflow.com/users/9666018/armin-montigny"}, "is_accepted": false, "score": 0, "last_activity_date": 1572603281, "creation_date": 1572603281, "answer_id": 58657458, "question_id": 58629806, "link": "https://stackoverflow.com/questions/58629806/how-to-convert-string-to-an-operable-array/58657458#58657458", "title": "How to convert string to an operable array?", "body": "<p>Seems like you want to read some sort of csv data. I assume that your shown data is just an example and not the real file. Because later on, you are searching for a comma. </p>\n\n<p>The reading of such CSV files is a standard task and I will give you detailed explanations. In the end all the reading of the file will be done in a one-liner. If the file would look different then this would be also OK. </p>\n\n<p>Then you want to do some mathematical operation and stream out the result.</p>\n\n<p>To implement this task I will use \"modern\" C++ elements.</p>\n\n<p>In modern C++ you have algorithms that iterate over ranges. You will often see something like \"someAlgoritm(container.begin(), container.end(), someLambda)\". The idea is that we iterate over some similar elements.</p>\n\n<p>In your case we iterate over tokens in your input string, and create substrings. This is called tokenizing.</p>\n\n<p>And for exactly that purpose, we have the <code>std::sregex_token_iterator</code>. And because we have something that has been defined for such purpose, we should use it.</p>\n\n<p>This thing is an iterator. For iterating over a string, hence sregex. The begin part defines, on what range of input we shall operate, then there is a <code>std::regex</code> for what should be matched / or what should not be matched in the input string. The type of matching strategy is given with last parameter. </p>\n\n<ul>\n<li>1 --> give me the stuff that I defined in the regex and </li>\n<li>-1 --> give me that what is NOT matched based on the regex.</li>\n</ul>\n\n<p>So, now that we understand the iterator, we can std::copy the tokens from the iterator to our target, a <code>std::vector</code> of <code>std::string</code>. And since we do not know, how may columns we have, we will use the <code>std::back_inserter</code> as a target. This will add all tokens that we get from the <code>std::sregex_token_iterator</code> and append it ot our <code>std::vector&lt;std::string&gt;&gt;</code>. It does'nt matter how many columns we have.</p>\n\n<p>Good. Such a statement could look like</p>\n\n<pre><code>std::copy(                          // We want to copy something\n    std::sregex_token_iterator      // The iterator begin, the sregex_token_iterator. Give back first token\n    (\n        line.begin(),               // Evaluate the input string from the beginning\n        line.end(),                 // to the end\n        re,                         // Add match a comma\n        -1                          // But give me back not the comma but everything else \n    ),\n    std::sregex_token_iterator(),   // iterator end for sregex_token_iterator, last token + 1\n    std::back_inserter(cp.columns)  // Append everything to the target container\n);\n</code></pre>\n\n<p>Now we can understand, how this copy operation works.</p>\n\n<p>Please note, The numbers will be converted from a string to a float in th below example. Therefore we will not use <code>std::copy</code> but <code>std::transform</code>. Bu of course the mechanism is the same.</p>\n\n<p>Next step. We want to read from a file. The file contains also some kind of same data. The same data are rows.</p>\n\n<p>And as for above, we can iterate of similar data. If it is the file input or whatever. For this purpose C++ has the <code>std::istream_iterator</code>. This is a template and as a template parameter it gets the type of data that it should read and, as a constructor parameter it gets a reference to an input stream. It doesnt't matter, if the input stream is a <code>std::cin</code>, or a <code>std::ifstream</code> or a <code>std::istringstream</code>. The behaviour is identical for all kinds of streams.</p>\n\n<p>And since we do not have files an SO, I use (in the below example) a <code>std::istringstream</code> to store the input csv file. But of course you can open a file, by defining a <code>std::ifstream testCsv(filename)</code>. No problem.</p>\n\n<p>And with <code>std::istream_iterator</code>, we iterate over the input and read similar data. In our case one problem is that we want to iterate over special data and not over some build in data type.</p>\n\n<p>To solve this, we define a Proxy class, which does the internal work for us (we do not want to know how, that should be encapsulated in the proxy). In the proxy we overwrite the type cast operator, to get the result to our expected type for the <code>std::istream_iterator</code>.</p>\n\n<p>And the last important step. A <code>std::vector</code> has a range constructor. It has also a lot of other constructors that we can use in the definition of a variable of type <code>std::vector</code>. But for our purposes this constructor fits best.</p>\n\n<p>So we define a variable csv and use its range constructor and give it a begin of a range and an end of a range. And, in our specific example, we use the begin and end iterator of <code>std::istream_iterator</code>.</p>\n\n<p>If we combine all the above, reading the complete CSV file is a <em>one-liner</em>, it is the definition of a variable with calling its range constructor.</p>\n\n<p>The mathematical operation is ultra simple. We will calculate the sum and add the resulting percentage as a new column. For that we will use 2 <code>std::for_each</code> statements.</p>\n\n<p>Please see the resulting code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;sstream&gt;\n#include &lt;fstream&gt;\n#include &lt;string&gt;\n#include &lt;vector&gt;\n#include &lt;iterator&gt;\n#include &lt;regex&gt;\n#include &lt;algorithm&gt;\n\nstd::istringstream testCsv{ R\"(00,01,15\n10,11,20\n20,21,25)\" };\n\n// Define Alias for easier Reading\nusing Columns = std::vector&lt;float&gt;;\nusing CSV = std::vector&lt;Columns&gt;;\n// The delimiter\nconst std::regex re(\",\");\n\n// Proxy for the input Iterator\nstruct ColumnProxy {    \n    // Overload extractor. Read a complete line\n    friend std::istream&amp; operator&gt;&gt;(std::istream&amp; is, ColumnProxy&amp; cp) {\n\n        // Read a line\n        std::string line; cp.columns.clear();\n        std::getline(is, line);\n        if (!line.empty()) {\n\n            // Split values and copy into resulting vector\n            std::transform(std::sregex_token_iterator(line.begin(), line.end(), re, -1),\n                std::sregex_token_iterator(),\n                std::back_inserter(cp.columns),\n                [](const std::string&amp; s){ return std::stof(s);});\n        }\n        return is;\n    }\n\n    // Type cast operator overload.  Cast the type 'Columns' to std::vector&lt;std::string&gt;\n    operator Columns() const { return columns; }\nprotected:\n    // Temporary to hold the read vector\n    Columns columns{};\n};\n\n\nint main()\n{\n    // Define variable CSV with its range constructor. Read complete CSV in this statement, So, one liner\n    CSV csv{ std::istream_iterator&lt;ColumnProxy&gt;(testCsv), std::istream_iterator&lt;ColumnProxy&gt;() };\n\n    // Calculate the sum of the 2nd column    \n    float sum{0.0};\n    std::for_each(csv.begin(),csv.end(),[&amp;sum](const Columns&amp; c){sum += c.at(2);});\n    // Calculate the percentage of the element from the overall sum\n    std::for_each(csv.begin(),csv.end(),[&amp;sum](Columns&amp; c){c.push_back(c.at(2)/sum);});\n\n    // Debug Output.  Print matrix to std::cout\n    std::for_each(csv.begin(), csv.end(), [](const Columns &amp;c) {\n        std::copy(c.begin(), c.end(), std::ostream_iterator&lt;float&gt;(std::cout, \" \")); std::cout &lt;&lt; '\\n'; });\n\n    return 0;\n}\n</code></pre>\n\n<p>The result is a ultra simple piece of code with a high flexibility.</p>\n\n<p>In function main, you will see just some statements.</p>\n\n<p>I hope it helps . . .</p>\n"}], "owner": {"reputation": 13, "user_id": 12293276, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-XzBpHc_5YmY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdiaC8uvYmaH8d6-2hScj4IrKPxOg/photo.jpg?sz=128", "display_name": "Williamwyn", "link": "https://stackoverflow.com/users/12293276/williamwyn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 46, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1572603281, "creation_date": 1572452580, "last_edit_date": 1572453561, "question_id": 58629806, "link": "https://stackoverflow.com/questions/58629806/how-to-convert-string-to-an-operable-array", "title": "How to convert string to an operable array?", "body": "<p>I have a CSV file with the following data for example</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>   X1 X2 X3\nY1 aa dd 15\nY2 bb ee 20\nY3 cc ff 25  \n</code></pre>\n\n<p>How can I for the second column calculate the sum and write the percentage of that sum near each value (add a new column in the CSV file)? For example:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>   X1 X2 X3 X4\nY1 aa dd 15 25%\nY2 bb ee 20 33%\nY3 cc ff 25 42%\n</code></pre>\n\n<p>I have already put all values in the fourth column into a vector.</p>\n\n<pre><code>#include&lt;iostream&gt;\n#include&lt;string&gt;\n#include&lt;fstream&gt; \n#include&lt;sstream&gt;\n#include&lt;vector&gt;\nusing namespace std;\n\nint main()\n{\n    string line;\n    ifstream infile(\"aaa.csv\");\n    vector&lt;float&gt; investment;\n\n    int i = 0;\n        while (getline(infile, line))\n    {\n        i++;\n        if (i == 1) {\n            continue;\n        }\n        istringstream sin(line); \n        vector&lt;string&gt; fields; \n        string field;\n        while (getline(sin, field, ',')) \n        {\n            fields.push_back(field); \n        }\n\n        double p;\n        string temp = fields[3];\n\n\n    }\n}\n</code></pre>\n\n<p>Now I am confused about how to convert the string to a float-type array so that I can do some calculation.</p>\n"}, {"tags": ["c++", "pthreads"], "comments": [{"owner": {"reputation": 4732, "user_id": 8477999, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f8172e1919af53269de92316dcf03a03?s=128&d=identicon&r=PG&f=1", "display_name": "Gem Taylor", "link": "https://stackoverflow.com/users/8477999/gem-taylor"}, "edited": false, "score": 1, "creation_date": 1572452523, "post_id": 58629747, "comment_id": 103566709, "body": "You may need to explicitly add the threads library to your link inputs."}, {"owner": {"reputation": 190, "user_id": 5844631, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/164ed13dd2738f25befebf3b3d5782d2?s=128&d=identicon&r=PG&f=1", "display_name": "CrashNeb", "link": "https://stackoverflow.com/users/5844631/crashneb"}, "reply_to_user": {"reputation": 4732, "user_id": 8477999, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f8172e1919af53269de92316dcf03a03?s=128&d=identicon&r=PG&f=1", "display_name": "Gem Taylor", "link": "https://stackoverflow.com/users/8477999/gem-taylor"}, "edited": false, "score": 0, "creation_date": 1572452784, "post_id": 58629747, "comment_id": 103566860, "body": "I have already updated my question - the compiler option does not work.  Could you please unmark this as a duplicate.   It is specifically related to the website:    Godbolt.org and how to make it work there."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 1, "creation_date": 1572452968, "post_id": 58629747, "comment_id": 103566961, "body": "godbolt.org has disabled creating threads. Pay the owner to enable them, use some other service, or get your own computer."}, {"owner": {"reputation": 190, "user_id": 5844631, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/164ed13dd2738f25befebf3b3d5782d2?s=128&d=identicon&r=PG&f=1", "display_name": "CrashNeb", "link": "https://stackoverflow.com/users/5844631/crashneb"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1572453119, "post_id": 58629747, "comment_id": 103567058, "body": "@n.m. I am sorry if I didn&#39;t see something obvious - but I didn&#39;t notice anything on the site that explained this. So I was hoping for confirmation here...    which you provided. If you add an answer I will mark it as such."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1572453334, "post_id": 58629747, "comment_id": 103567172, "body": "I don&#39;t think it&#39;s documented anywere, I deduced it from the error message."}, {"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 0, "creation_date": 1572454268, "post_id": 58629747, "comment_id": 103567620, "body": "You could try <a href=\"http://coliru.stacked-crooked.com/a/3cfbc9f8c46be41b\" rel=\"nofollow noreferrer\"><b>coliru</b></a> instead. It provides g++ 9.2 currently."}], "answers": [{"tags": [], "owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "is_accepted": true, "score": 4, "last_activity_date": 1572453844, "creation_date": 1572453844, "answer_id": 58630123, "question_id": 58629747, "link": "https://stackoverflow.com/questions/58629747/on-the-website-godbolt-org-and-only-there-how-can-i-use-stdthread/58630123#58630123", "title": "On the website: godbolt.org, and only there: how can I use std::thread?", "body": "<p>In all likelyhood, thread creation is disabled on godbolt.org on purpose (to prevent denial of service attacks or other abuse), so there is currently no way to use std::thread on that service.</p>\n"}], "owner": {"reputation": 190, "user_id": 5844631, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/164ed13dd2738f25befebf3b3d5782d2?s=128&d=identicon&r=PG&f=1", "display_name": "CrashNeb", "link": "https://stackoverflow.com/users/5844631/crashneb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 747, "favorite_count": 1, "accepted_answer_id": 58630123, "answer_count": 1, "score": 2, "last_activity_date": 1572453844, "creation_date": 1572452379, "last_edit_date": 1572452988, "question_id": 58629747, "link": "https://stackoverflow.com/questions/58629747/on-the-website-godbolt-org-and-only-there-how-can-i-use-stdthread", "title": "On the website: godbolt.org, and only there: how can I use std::thread?", "body": "<p>Here is my code:</p>\n\n<pre><code>#include &lt;thread&gt;\n#include &lt;chrono&gt;\nusing namespace std::literals::chrono_literals;\n#include &lt;iostream&gt;\n\nvoid f(int n)\n{\n    for (int cnt = 0; cnt &lt; n; ++cnt) {\n        std::this_thread::sleep_for(1s);\n        std::cout &lt;&lt; \".\" &lt;&lt; std::flush;\n    }\n    std::cout &lt;&lt; std::endl;\n}\nint main()\n{\n    std::thread t1 = std::thread(f, 5);\n    //t1.join();\n    t1 = std::thread(f, 5); // &lt;- should abort if t1.join() is not done\n    t1.join();\n}\n</code></pre>\n\n<p>For the website, I am using a gcc9.2 executor to see what happens when an un-joined thread is destructed, but this is content of the compiler output tab:</p>\n\n<pre><code>Could not execute the program\nCompiler returned: 1\nCompiler stderr\n\n/tmp/ccjlEO57.o: In function `std::thread::thread&lt;void (&amp;)(int), int&amp;, void&gt;(void (&amp;)(int), int&amp;)':\n\n/opt/compiler-explorer/gcc-9.2.0/include/c++/9.2.0/thread:126: undefined reference to `pthread_create'\n\ncollect2: error: ld returned 1 exit status\n</code></pre>\n\n<p>Also - when I add \"-lpthread\" to the <em>Compiler options...</em> edit box, I get a different error:</p>\n\n<pre><code>Program returned: 255\nProgram stderr\n\nterminate called after throwing an instance of 'std::system_error'\n  what():  Resource temporarily unavailable\n</code></pre>\n\n<p>Please <em>note</em> that for this 2nd run, the first <code>t1.join()</code> was not commented out (so it should run fine).</p>\n\n<p>Does this mean you can't test anything <code>std::thread</code> related on the otherwise incredibly awesome <strong>godbolt.org</strong> website?</p>\n"}, {"tags": ["c++", "codeblocks", "wxwidgets"], "answers": [{"tags": [], "owner": {"reputation": 33, "user_id": 9011340, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47902acf9ab6e4af36bec76d4a432966?s=128&d=identicon&r=PG&f=1", "display_name": "PaddleStroke", "link": "https://stackoverflow.com/users/9011340/paddlestroke"}, "is_accepted": false, "score": 1, "last_activity_date": 1572454096, "creation_date": 1572454096, "answer_id": 58630181, "question_id": 58629642, "link": "https://stackoverflow.com/questions/58629642/how-to-define-new-frame-type-in-wxsmith/58630181#58630181", "title": "How to define new frame type in wxSmith?", "body": "<p>The frame is defined in XxxMain.h</p>\n"}], "owner": {"reputation": 33, "user_id": 9011340, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47902acf9ab6e4af36bec76d4a432966?s=128&d=identicon&r=PG&f=1", "display_name": "PaddleStroke", "link": "https://stackoverflow.com/users/9011340/paddlestroke"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1572454096, "creation_date": 1572451993, "last_edit_date": 1572452438, "question_id": 58629642, "link": "https://stackoverflow.com/questions/58629642/how-to-define-new-frame-type-in-wxsmith", "title": "How to define new frame type in wxSmith?", "body": "<p>Using codeblocks17.12 + wxwidgets 3.1.2 + wxsmith project template.</p>\n\n<p>I need to add a worker thread as discussed on this wxwidget forum topic : <a href=\"https://forums.wxwidgets.org/viewtopic.php?f=1&amp;t=46472\" rel=\"nofollow noreferrer\">https://forums.wxwidgets.org/viewtopic.php?f=1&amp;t=46472</a></p>\n\n<p>Someone supplied me a demo, but writen on raw wxwidgets. As I am using wxsmith there are some structure differences that makes things different.</p>\n\n<p>One issue is that the demo declares a new frame type deriving from wxFrame, in which he adds a thread class.</p>\n\n<p>My issue is that on wxSmith template created by the CodeBlocks new wxwidgets project, I can't find where the frame class is defined.</p>\n\n<p>In XxxApp.cpp (where Xxx is the project name) there's : </p>\n\n<pre><code>XxxFrame* Frame = new XxxFrame(0);\n</code></pre>\n\n<p>But I cannot find where the XxxFrame is defined.</p>\n\n<p>In XxxMain.cpp there's :</p>\n\n<pre><code>//(*InternalHeaders(XxxFrame)\n#include &lt;wx/intl.h&gt;\n#include &lt;wx/string.h&gt;\n//*)\n\n//(*IdInit(XxxFrame)\nconst long XxxFrame::ID_PANEL1 = wxNewId();\nconst long XxxFrame::idMenuQuit = wxNewId();\nconst long XxxFrame::idMenuAbout = wxNewId();\nconst long XxxFrame::ID_STATUSBAR1 = wxNewId();\n//*)\n\nXxxFrame::XxxFrame (wxWindow* parent,wxWindowID id)\n{\n</code></pre>\n\n<p>But nothing like : </p>\n\n<pre><code>class XxxFrame : public wxFrame\n{\npublic:\n    ...\n};\n</code></pre>\n\n<p>How can I add some changes to the Frame class to add my thread class?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["c++", "tensorflow", "multiprocessing", "c-api"], "comments": [{"owner": {"reputation": 13788, "user_id": 3222797, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/H5JG2.png?s=128&g=1", "display_name": "gobrewers14", "link": "https://stackoverflow.com/users/3222797/gobrewers14"}, "edited": false, "score": 0, "creation_date": 1572451253, "post_id": 58629339, "comment_id": 103565982, "body": "Have you seen <a href=\"https://github.com/tensorflow/serving\" rel=\"nofollow noreferrer\">tensorflow serving</a> for model inference?"}, {"owner": {"reputation": 301, "user_id": 3820662, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3814fbbdb8fa668b032c0bcc725d0a2f?s=128&d=identicon&r=PG&f=1", "display_name": "user10333", "link": "https://stackoverflow.com/users/3820662/user10333"}, "reply_to_user": {"reputation": 13788, "user_id": 3222797, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/H5JG2.png?s=128&g=1", "display_name": "gobrewers14", "link": "https://stackoverflow.com/users/3222797/gobrewers14"}, "edited": false, "score": 0, "creation_date": 1572451681, "post_id": 58629339, "comment_id": 103566218, "body": "we strongly limited to  c++ offline solution. We should provide single  lib that does all without any external interchange"}], "owner": {"reputation": 301, "user_id": 3820662, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3814fbbdb8fa668b032c0bcc725d0a2f?s=128&d=identicon&r=PG&f=1", "display_name": "user10333", "link": "https://stackoverflow.com/users/3820662/user10333"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 49, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1572451067, "creation_date": 1572451067, "question_id": 58629339, "link": "https://stackoverflow.com/questions/58629339/tensorflow-c-session-shared-among-forked-processes-stuck", "title": "TensorFlow c++ session shared among forked processes stuck", "body": "<p>For CPP integration we use TensorFlow  lib from here <a href=\"https://www.tensorflow.org/install/lang_c\" rel=\"nofollow noreferrer\">https://www.tensorflow.org/install/lang_c</a></p>\n\n<p>As we saw the first TensorFlow session run is time-consuming for our specific model it took 20s and next time it took 200ms.\n We strongly limited in time for inference and also we should serve multiple requests so we decided to do next trick:</p>\n\n<p>Use forked processes to serve our TensorFlow for parallel requests. Init TensorFlow session and run blank inference for the first time in the main process and thus next time run session in the forked process. But it stuck without any error message.</p>\n\n<p>Is there a way to deal with such a problem.</p>\n\n<p>Any suggestion is acceptable.</p>\n"}, {"tags": ["android", "c++", "multithreading", "android-ndk", "arguments"], "comments": [{"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1572450638, "post_id": 58629139, "comment_id": 103565609, "body": "What is <code>destination</code>?"}, {"owner": {"reputation": 813, "user_id": 2996857, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/511401325292e095c09ca34079d4e90a?s=128&d=identicon&r=PG&f=1", "display_name": "gone", "link": "https://stackoverflow.com/users/2996857/gone"}, "reply_to_user": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1572450991, "post_id": 58629139, "comment_id": 103565818, "body": "@user253751 is a <code>const char*</code>"}, {"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1572451629, "post_id": 58629139, "comment_id": 103566182, "body": "Note quite enough code, but smells like a race condition with what ever <code>destination</code> is referencing going out off scope / being reused.  The thread constructor only copies the pointer not what is pointed to.  How is <code>destination</code> initialised and what happens to the buffer it points to after the thread is created?"}], "answers": [{"comments": [{"owner": {"reputation": 813, "user_id": 2996857, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/511401325292e095c09ca34079d4e90a?s=128&d=identicon&r=PG&f=1", "display_name": "gone", "link": "https://stackoverflow.com/users/2996857/gone"}, "edited": false, "score": 0, "creation_date": 1572452377, "post_id": 58629574, "comment_id": 103566621, "body": "As I mentioned at the end of my post, if I pass it by reference like <code>std:ref(filePath)</code>, it will get freed, and I will get an empty string in my <code>read</code> function, I guess this is what you are talking about. But if I pass it directly, I will get <b>a part of</b> the <code>filePath</code>, I mean, if my approach is disastrous, why I get <code>&#47;data&#47;user&#47;0&#47;my-package&#47;files</code> <b>every time this happens</b> but not something else? why the file name is missing?"}, {"owner": {"reputation": 51929, "user_id": 1524450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BSzDV.png?s=128&g=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/1524450/michael"}, "reply_to_user": {"reputation": 813, "user_id": 2996857, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/511401325292e095c09ca34079d4e90a?s=128&d=identicon&r=PG&f=1", "display_name": "gone", "link": "https://stackoverflow.com/users/2996857/gone"}, "edited": false, "score": 2, "creation_date": 1572452533, "post_id": 58629574, "comment_id": 103566723, "body": "@WALKER Use-after-free results in undefined behavior. Pretty much anything can happen."}, {"owner": {"reputation": 813, "user_id": 2996857, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/511401325292e095c09ca34079d4e90a?s=128&d=identicon&r=PG&f=1", "display_name": "gone", "link": "https://stackoverflow.com/users/2996857/gone"}, "reply_to_user": {"reputation": 51929, "user_id": 1524450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BSzDV.png?s=128&g=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/1524450/michael"}, "edited": false, "score": 0, "creation_date": 1572452739, "post_id": 58629574, "comment_id": 103566840, "body": "@Michael So, if this is where the problem lies, isn&#39;t my <code>filePath</code> passed by value?"}, {"owner": {"reputation": 1566, "user_id": 4847311, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90fbb34e156577e5c3a5b3b3d1b30f83?s=128&d=identicon&r=PG", "display_name": "Sven Nilsson", "link": "https://stackoverflow.com/users/4847311/sven-nilsson"}, "edited": false, "score": 2, "creation_date": 1572453597, "post_id": 58629574, "comment_id": 103567305, "body": "Yes, the pointer itself is passed by value, but the memory (=the actual string) that it points to is passed by reference."}], "tags": [], "owner": {"reputation": 1566, "user_id": 4847311, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90fbb34e156577e5c3a5b3b3d1b30f83?s=128&d=identicon&r=PG", "display_name": "Sven Nilsson", "link": "https://stackoverflow.com/users/4847311/sven-nilsson"}, "is_accepted": true, "score": 1, "last_activity_date": 1572451810, "creation_date": 1572451810, "answer_id": 58629574, "question_id": 58629139, "link": "https://stackoverflow.com/questions/58629139/c-argument-changes-in-thread-function/58629574#58629574", "title": "c++ argument changes in thread function", "body": "<p>Calling ReleaseStringUTFChars before the thread has finished will be disastrous, since the memory that <strong>filePath</strong> points too will be freed. If you don't fully understand how pointers and memory handling works, I suggest using something like <strong>std::string</strong> instead of <strong>const char*</strong>, and pass that string to your function.</p>\n"}], "owner": {"reputation": 813, "user_id": 2996857, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/511401325292e095c09ca34079d4e90a?s=128&d=identicon&r=PG&f=1", "display_name": "gone", "link": "https://stackoverflow.com/users/2996857/gone"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "accepted_answer_id": 58629574, "answer_count": 1, "score": 0, "last_activity_date": 1572452553, "creation_date": 1572450444, "last_edit_date": 1572452553, "question_id": 58629139, "link": "https://stackoverflow.com/questions/58629139/c-argument-changes-in-thread-function", "title": "c++ argument changes in thread function", "body": "<p>I'm writing an Android application which reads a text file in c++ (NDK).</p>\n\n<p>I copy the file <code>list</code> from <code>assets</code> folder to <code>/data/user/0/my-package/files/list</code> where I can read with my native code, after the copy is done or if the destination file is exist, I do the following:</p>\n\n<pre><code>const char* fileName = env-&gt;GetStringUTFChars(_name, nullptr);\nconst char* filePath = env-&gt;GetStringUTFChars(_destination, nullptr);\nif(copy_file(AAssetManager_fromJava(env, manager),fileName, filePath)){\n    Reader *r = new Reader();\n    log(\"Initializing reader with file: %s\",filePath);\n    thread t(&amp;Reader::read, r, filePath);\n    t.detach();// will crash if no detach, join() will block the UI thread.\n}\n</code></pre>\n\n<p>And my <code>Reader::read</code>:</p>\n\n<pre><code>void Reader::read(const char* filePath){\n    log(\"Reading from file: %s\",filePath);\n    ifstream infile(filePath);\n    string line;\n    while(infile&gt;&gt;line){\n        // read logic ...\n    }\n}\n</code></pre>\n\n<p>I get different output, some times</p>\n\n<pre><code>Initializing reader with file: /data/user/0/my-package/files/list\nReading from file: /data/user/0/my-package/files/list\n</code></pre>\n\n<p>and everything works as expected. <strong>But</strong> some times I get </p>\n\n<pre><code>Initializing reader with file: /data/user/0/my-package/files/list\nReading from file: /data/user/0/my-package/files\n</code></pre>\n\n<p>see? It seems that the file path is cut somehow, and my <code>ifstream</code> is trying to read the directory <code>files</code>.</p>\n\n<p>I was told that the argument <code>filePath</code> will be passed to the thread by value by default, and there's no other thread working with the variable, only thing that happens to <code>filePath</code> after the thread initialization, is:</p>\n\n<pre><code>  env-&gt;ReleaseStringUTFChars(_destination, filePath);\n</code></pre>\n\n<p>I have tried many different ways to pass the file path to new thread, if I pass the <code>filePath</code> like\n<code>std::ref(filePath)</code>, I will get empty string in <code>read</code> function, because the variable is already cleared outside.</p>\n\n<p>Any suggestion on this?</p>\n"}, {"tags": ["android", "c++", "oboe"], "comments": [{"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1572450474, "post_id": 58628935, "comment_id": 103565520, "body": "It might be because the object <code>oboeSinePlayer</code> is destroyed when the function <code>Java_com_example_gettingstartedoboe_MainActivity_oboeSinePla&zwnj;&#8203;yer</code> returns, because it is a local variable."}, {"owner": {"reputation": 129, "user_id": 2055311, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ffa400431e45433ef08c95e0dcb58eea?s=128&d=identicon&r=PG", "display_name": "Al G Johnston", "link": "https://stackoverflow.com/users/2055311/al-g-johnston"}, "reply_to_user": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1572465191, "post_id": 58628935, "comment_id": 103572495, "body": "Why would that stop the activity from being displayed?"}, {"owner": {"reputation": 129, "user_id": 2055311, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ffa400431e45433ef08c95e0dcb58eea?s=128&d=identicon&r=PG", "display_name": "Al G Johnston", "link": "https://stackoverflow.com/users/2055311/al-g-johnston"}, "reply_to_user": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1572470151, "post_id": 58628935, "comment_id": 103574474, "body": "Also, how would I stop oboeSinePlayer from being destroyed?"}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1572516043, "post_id": 58628935, "comment_id": 103587164, "body": "It would crash the whole program when you try to use the object after it&#39;s been destroyed."}, {"owner": {"reputation": 129, "user_id": 2055311, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ffa400431e45433ef08c95e0dcb58eea?s=128&d=identicon&r=PG", "display_name": "Al G Johnston", "link": "https://stackoverflow.com/users/2055311/al-g-johnston"}, "reply_to_user": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1572519973, "post_id": 58628935, "comment_id": 103589371, "body": "How do I stop it from being destroyed?"}, {"owner": {"reputation": 129, "user_id": 2055311, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ffa400431e45433ef08c95e0dcb58eea?s=128&d=identicon&r=PG", "display_name": "Al G Johnston", "link": "https://stackoverflow.com/users/2055311/al-g-johnston"}, "reply_to_user": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1572526005, "post_id": 58628935, "comment_id": 103592619, "body": "I added an edit after looking at logcat and finding the error"}], "answers": [{"comments": [{"owner": {"reputation": 129, "user_id": 2055311, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ffa400431e45433ef08c95e0dcb58eea?s=128&d=identicon&r=PG", "display_name": "Al G Johnston", "link": "https://stackoverflow.com/users/2055311/al-g-johnston"}, "edited": false, "score": 0, "creation_date": 1572879811, "post_id": 58694637, "comment_id": 103688560, "body": "It still crashes"}, {"owner": {"reputation": 12122, "user_id": 824903, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b0903f3a872eef8fded8e48257fde823?s=128&d=identicon&r=PG", "display_name": "donturner", "link": "https://stackoverflow.com/users/824903/donturner"}, "reply_to_user": {"reputation": 129, "user_id": 2055311, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ffa400431e45433ef08c95e0dcb58eea?s=128&d=identicon&r=PG", "display_name": "Al G Johnston", "link": "https://stackoverflow.com/users/2055311/al-g-johnston"}, "edited": false, "score": 0, "creation_date": 1572969934, "post_id": 58694637, "comment_id": 103723623, "body": "Are you getting any build errors? Make sure you are looking in the right place for them: <a href=\"https://stackoverflow.com/questions/55476461/error-computing-cmake-server-result-in-android-studio/55476636#comment99078465_55476636\" title=\"error computing cmake server result in android studio\">stackoverflow.com/questions/55476461/&hellip;</a>"}], "tags": [], "owner": {"reputation": 12122, "user_id": 824903, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b0903f3a872eef8fded8e48257fde823?s=128&d=identicon&r=PG", "display_name": "donturner", "link": "https://stackoverflow.com/users/824903/donturner"}, "is_accepted": false, "score": 0, "last_activity_date": 1572874835, "creation_date": 1572874835, "answer_id": 58694637, "question_id": 58628935, "link": "https://stackoverflow.com/questions/58628935/why-does-the-sample-code-called-oboesineplayer-from-oboe-keep-stopping-on-androi/58694637#58694637", "title": "Why does the sample code called OboeSinePlayer from oboe keep stopping on Android?", "body": "<p>Your app is crashing because <code>oboeSinePlayer</code> goes out of scope almost immediately after you declare it. Solve this by declaring <code>oboeSinePlayer</code> as a global: </p>\n\n<p>Change </p>\n\n<pre><code>extern \"C\" JNIEXPORT jstring JNICALL\nJava_com_example_gettingstartedoboe_MainActivity_oboeSinePlayer(JNIEnv *env, \njobject /* this */) {\n    OboeSinePlayer oboeSinePlayer;\n    oboeSinePlayer.start();\n}\n</code></pre>\n\n<p>to </p>\n\n<pre><code>OboeSinePlayer oboeSinePlayer;\n\nextern \"C\" JNIEXPORT jstring JNICALL\nJava_com_example_gettingstartedoboe_MainActivity_oboeSinePlayer(JNIEnv *env, \njobject /* this */) {\n\n    oboeSinePlayer.start();\n}\n</code></pre>\n"}], "owner": {"reputation": 129, "user_id": 2055311, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ffa400431e45433ef08c95e0dcb58eea?s=128&d=identicon&r=PG", "display_name": "Al G Johnston", "link": "https://stackoverflow.com/users/2055311/al-g-johnston"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 193, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1572874835, "creation_date": 1572449833, "last_edit_date": 1572526948, "question_id": 58628935, "link": "https://stackoverflow.com/questions/58628935/why-does-the-sample-code-called-oboesineplayer-from-oboe-keep-stopping-on-androi", "title": "Why does the sample code called OboeSinePlayer from oboe keep stopping on Android?", "body": "<p>I am adding code from the following page to a hello world c++ application.</p>\n\n<p><a href=\"https://github.com/google/oboe/blob/master/docs/GettingStarted.md\" rel=\"nofollow noreferrer\">https://github.com/google/oboe/blob/master/docs/GettingStarted.md</a></p>\n\n<p>Here is the MainActivity:</p>\n\n<pre><code>package com.example.gettingstartedoboe;\n\nimport androidx.appcompat.app.AppCompatActivity;\nimport android.os.Bundle;\nimport android.widget.TextView;\n\npublic class MainActivity extends AppCompatActivity {\n\n    // Used to load the 'native-lib' library on application startup.\n    static {\n        System.loadLibrary(\"native-lib\");\n    }\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        oboeSinePlayer();\n        setContentView(R.layout.activity_main);\n\n        TextView tv = findViewById(R.id.sample_text);\n        tv.setText(stringFromJNI());\n        play();\n\n    }\n\n    /**\n     * A native method that is implemented by the 'native-lib' native library,\n     * which is packaged with this application.\n     */\n    public native String stringFromJNI();\n\n    public native void oboeSinePlayer();\n}\n</code></pre>\n\n<p>If I comment out oboeSinePlayer(); then the MainActivity stays open, but when it is not commented out, the app keeps stopping.</p>\n\n<p>Here is the code for oboeSinePlayer:</p>\n\n<pre><code>#include &lt;jni.h&gt;\n#include \"OboeSinePlayer.h\"\n\nextern \"C\" JNIEXPORT jstring JNICALL\nJava_com_example_gettingstartedoboe_MainActivity_oboeSinePlayer(JNIEnv *env, jobject /* this */) {\n    OboeSinePlayer oboeSinePlayer;\n    oboeSinePlayer.start();\n}\n\noboe::DataCallbackResult\nOboeSinePlayer::onAudioReady(oboe::AudioStream *oboeStream, void *audioData, int32_t numFrames) {\n    float *floatData = (float *) audioData;\n    for (int i = 0; i &lt; numFrames; i++) {\n        float sampleValue = kAmplitude * sinf(mPhase);\n        for (int j = 0; j &lt; kChannelCount; j++) {\n            floatData[i * kChannelCount + j] = sampleValue;\n        }\n        mPhase += mPhaseIncrement;\n        if (mPhase &gt;= kTwoPi) {\n            mPhase -= kTwoPi;\n        }\n    }\n    return oboe::DataCallbackResult::Continue;\n}\n\nbool OboeSinePlayer::start() {\n    oboe::AudioStreamBuilder builder;\n    builder.setSharingMode(oboe::SharingMode::Shared)\n            -&gt;setPerformanceMode(oboe::PerformanceMode::LowLatency)\n            -&gt;setChannelCount(kChannelCount)\n            -&gt;setSampleRate(kSampleRate)\n            -&gt;setFormat(oboe::AudioFormat::Float)\n            -&gt;setCallback(this)\n            -&gt;openManagedStream(managedStream);\n    managedStream-&gt;requestStart();\n}\n</code></pre>\n\n<p>and the associated header file:</p>\n\n<pre><code>#include &lt;oboe/Oboe.h&gt;\n#include &lt;math.h&gt;\n\n#ifndef GETTINGSTARTEDOBOE_OBOESINEPLAYER_H\n#define GETTINGSTARTEDOBOE_OBOESINEPLAYER_H\n\n#endif //GETTINGSTARTEDOBOE_OBOESINEPLAYER_H\n\nclass OboeSinePlayer : public oboe::AudioStreamCallback {\n\npublic:\n    bool start();\n\n    oboe::DataCallbackResult onAudioReady(oboe::AudioStream *oboeStream, void *audioData, int32_t numFrames) override;\n\nprivate:\n    oboe::ManagedStream managedStream;\n    int kSampleRate = 44100;\n    int kChannelCount = oboe::ChannelCount::Mono;\n    float kAmplitude = 0.5f;\n    float mPhase = 0.0f;\n    float kFrequency = 440.0f;\n    float kTwoPi = 2.0f * M_PI;\n    double mPhaseIncrement = kTwoPi * kFrequency / (double) kSampleRate;\n\n};\n</code></pre>\n\n<p>When run, it sounds like the onAudioReady method is being played once before the app stops. I believe the method is supposed to be called over and over to provide a sustained sine tone.</p>\n\n<p>Any help on how to solve this would be greatly appreciated. Thank you for taking the time to look over my question.</p>\n\n<p>I looked at logcat and found the line\njava.lang.UnsatisfiedLinkError: dalvik.system.PathClassLoader[DexPathList[[zip file \"/data/app/com.example.hellosound-2/base.apk\"],nativeLibraryDirectories=[/data/app/com.example.hellosound-2/lib/x86, /data/app/com.example.hellosound-2/base.apk!/lib/x86, /system/lib, /vendor/lib]]] couldn't find \"liboboe.so\"</p>\n\n<p>Here is my CMakeLists.txt</p>\n\n<pre><code># For more information about using CMake with Android Studio, read the\n# documentation: https://d.android.com/studio/projects/add-native-code.html\n\n# Sets the minimum version of CMake required to build the native library.\n\ncmake_minimum_required(VERSION 3.4.1)\n\n# Creates and names a library, sets it as either STATIC\n# or SHARED, and provides the relative paths to its source code.\n# You can define multiple libraries, and CMake builds them for you.\n# Gradle automatically packages shared libraries with your APK.\n\nadd_library( # Sets the name of the library.\n        native-lib\n\n        # Sets the library as a shared library.\n        SHARED\n\n        # Provides a relative path to your source file(s).\n        native-lib.cpp\n        OboeSinePlayer.cpp)\n\n# For using Oboe\nset(OBOE_DIR \"C:/Users/Al/Documents/Goboe\")\nadd_subdirectory(${OBOE_DIR} ./oboe)\ninclude_directories (${OBOE_DIR}/include)\n\n\n# Searches for a specified prebuilt library and stores the path as a\n# variable. Because CMake includes system libraries in the search path by\n# default, you only need to specify the name of the public NDK library\n# you want to add. CMake verifies that the library exists before\n# completing its build.\n\nfind_library( # Sets the name of the path variable.\n        log-lib\n\n        # Specifies the name of the NDK library that\n        # you want CMake to locate.\n        log)\n\n# Specifies libraries CMake should link to your target library. You\n# can link multiple libraries, such as libraries you define in this\n# build script, prebuilt third-party libraries, or system libraries.\n\ntarget_link_libraries( # Specifies the target library.\n        native-lib\n        oboe\n        # Links the target library to the log library\n        # included in the NDK.\n        ${log-lib})\n</code></pre>\n\n<p>What would cause that error after running through onAudioReady once? </p>\n\n<p>I got rid of the error by refreshing c++ code, now I get the error</p>\n\n<p>/com.example.gettingstartedoboe A/libc: Fatal signal 4 (SIGILL), code 2, fault addr 0xa94b6a47 in tid 15656 (tingstartedoboe)</p>\n"}, {"tags": ["c++", "algorithm", "dynamic-programming", "subset-sum"], "comments": [{"owner": {"reputation": 20722, "user_id": 1625187, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/6vWOZ.jpg?s=128&g=1", "display_name": "Evg", "link": "https://stackoverflow.com/users/1625187/evg"}, "edited": false, "score": 0, "creation_date": 1572458184, "post_id": 58628832, "comment_id": 103569492, "body": "Why would it indicate &quot;yes&quot;? The answer is <code>Q(N, 0)</code>, which corresponds the the second row (two input values) and the third column (<code>-2</code>, <code>-1</code>, <b><code>0</code></b>, <code>1</code>) in your matrix."}], "answers": [{"tags": [], "owner": {"reputation": 20722, "user_id": 1625187, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/6vWOZ.jpg?s=128&g=1", "display_name": "Evg", "link": "https://stackoverflow.com/users/1625187/evg"}, "is_accepted": true, "score": 1, "last_activity_date": 1572461741, "creation_date": 1572461741, "answer_id": 58632042, "question_id": 58628832, "link": "https://stackoverflow.com/questions/58628832/implementing-pseudopolynomial-dp-subset-sum/58632042#58632042", "title": "Implementing Pseudopolynomial DP Subset Sum", "body": "<p>I think the term <code>result[i - 1][abs((s - inp[i]) - A)]</code> is not correct. It should be:</p>\n\n<pre><code>A &lt;= s - inp[i] &amp;&amp; s - inp[i] &lt;= B &amp;&amp; result[i - 1][s - inp[i] - A]\n</code></pre>\n\n<p>You can avoid nested <code>vector</code>s using a simple lambda function to mimic a matrix:</p>\n\n<pre><code>const auto n_rows = inp.size();\nconst auto n_cols = static_cast&lt;std::size_t&gt;(B - A + 1);\nauto q = [qm = std::vector&lt;bool&gt;(n_rows * n_cols), n_rows, A]\n         (auto i, auto j) mutable\n         { return qm[i + (j - A) * n_rows]; };\n\nfor (auto j = A; j &lt;= B; ++j)\n    q(0, j) = (inp[0] == j);\n\nfor (std::size_t i = 1; i &lt; n_rows; ++i)\n    for (auto j = A; j &lt;= B; ++j)\n        q(i, j) = (inp[i] == j || q(i - 1, j) || \n                  (A &lt;= j - inp[i] &amp;&amp; j - inp[i] &lt;= B &amp;&amp; q(i - 1, j - inp[i])));\n\nconst bool has_zero_subset = q(n_rows - 1, 0);\n</code></pre>\n"}], "owner": {"reputation": 305, "user_id": 5318931, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/000a5f268233ec7eb8bb06e7f7fb76e9?s=128&d=identicon&r=PG&f=1", "display_name": "theupandup", "link": "https://stackoverflow.com/users/5318931/theupandup"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 58632042, "answer_count": 1, "score": 1, "last_activity_date": 1572461741, "creation_date": 1572449497, "question_id": 58628832, "link": "https://stackoverflow.com/questions/58628832/implementing-pseudopolynomial-dp-subset-sum", "title": "Implementing Pseudopolynomial DP Subset Sum", "body": "<p>I tried implementing the algorithm proposed on the Wikipedia page for the <a href=\"https://en.wikipedia.org/wiki/Subset_sum_problem\" rel=\"nofollow noreferrer\">pseudo-polynomial time algorithm for subset sum</a> where we aim to determine if there exists a nonempty subset of {x_1, ..., x_N} which sums to zero. So we set a range going from the sum of the negative numbers (A) up to the sum of positive numbers (B), and create a matrix to hold values Q(i, s) for 1 \u2264 i \u2264 N and A \u2264 s \u2264 B.\nThen for filling it up, we should initially set Q(1, s) := (x_1 == s), and for the recursive case we set Q(i, s) := Q(i \u2212 1, s) or (xi == s) or Q(i \u2212 1, s \u2212 xi),  for A \u2264 s \u2264 B.</p>\n\n<p>Here's my shot at this, where inp contains the input set. I keep track of the \"real\" index of s in the variable arrindex, because s may be some negative number and I can't index vectors at a negative.</p>\n\n<pre><code>vector&lt;vector&lt;bool&gt;&gt; result (inp.size(), vector&lt;bool&gt;(abs(B-A)+1)); // initialize results matrix\nfor(int s = A,arrindex=0; s &lt;= B; s++,arrindex++){\n    if(s == inp[0])\n        result[0][arrindex] = true;\nfor(int i = 1; i &lt; inp.size(); i++){\n    for(int s = A,arrindex=0; s &lt;= B; s++,arrindex++){\n        // CHECK: Q(i, s) := Q(i \u2212 1, s) or (xi == s) or Q(i \u2212 1, s \u2212 xi),  for A \u2264 s \u2264 B\n        if(s == inp[i] || result[i-1][arrindex] || result[i-1][abs((s - inp[i])-A)])\n            result[i][arrindex] = true;\n    }\n}\n</code></pre>\n\n<p>My attempt gives an answer, but it seems to often not be correct. As a simple example, if my input is {-2, 1}, the answer should be no, but the matrix I obtain is</p>\n\n<pre><code>1 0 0 0\n1 1 0 1\n</code></pre>\n\n<p>Which I think would indicate a \"yes\", right? So my question is, did I implement this incorrectly? Or am I interpreting incorrectly?</p>\n"}, {"tags": ["c++", "macos", "dylib"], "comments": [{"owner": {"reputation": 15569, "user_id": 2302862, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e264db339bb96e343770fa38018e00f1?s=128&d=identicon&r=PG", "display_name": "Siguza", "link": "https://stackoverflow.com/users/2302862/siguza"}, "edited": false, "score": 0, "creation_date": 1572449989, "post_id": 58628703, "comment_id": 103565185, "body": "This sounds like an <a href=\"https://meta.stackexchange.com/q/66377/299022\">XY Problem</a>. Why don&#39;t you want to include a header file? Also, you say you&#39;re using CLion, Xcode and Visual Studio - which of these is it now?"}, {"owner": {"reputation": 2323, "user_id": 8350647, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zJNHD.png?s=128&g=1", "display_name": "Nina", "link": "https://stackoverflow.com/users/8350647/nina"}, "edited": false, "score": 2, "creation_date": 1572450384, "post_id": 58628703, "comment_id": 103565465, "body": "Header files just provide prototypes to the implementation found in the dylib. The prototype simply tells the compiler how to set up the stack/return value for the function call. BUt if you&#39;re using functions from a dylib why wouldn&#39;t you include the header? You absolutely should include the header."}, {"owner": {"reputation": 11, "user_id": 12297960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5360a10bca6dd6bd6a7f412a7782f333?s=128&d=identicon&r=PG", "display_name": "Margo", "link": "https://stackoverflow.com/users/12297960/margo"}, "edited": false, "score": 0, "creation_date": 1572450836, "post_id": 58628703, "comment_id": 103565737, "body": "It&#39;s my university task. so my teacher wants me to link dylib without the header. I know how to do it using VS. But I can only use Clion or Xcode"}, {"owner": {"reputation": 11, "user_id": 12297960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5360a10bca6dd6bd6a7f412a7782f333?s=128&d=identicon&r=PG", "display_name": "Margo", "link": "https://stackoverflow.com/users/12297960/margo"}, "edited": false, "score": 0, "creation_date": 1572451272, "post_id": 58628703, "comment_id": 103565996, "body": "I mean of course I have to create the header. But how I can avoid writing #include &quot;name_file.h&quot; in my main code"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 12297960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5360a10bca6dd6bd6a7f412a7782f333?s=128&d=identicon&r=PG", "display_name": "Margo", "link": "https://stackoverflow.com/users/12297960/margo"}, "edited": false, "score": 0, "creation_date": 1572453671, "post_id": 58629425, "comment_id": 103567350, "body": "Thank you. But how I can use functions from my lib?"}, {"owner": {"reputation": 2323, "user_id": 8350647, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zJNHD.png?s=128&g=1", "display_name": "Nina", "link": "https://stackoverflow.com/users/8350647/nina"}, "reply_to_user": {"reputation": 11, "user_id": 12297960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5360a10bca6dd6bd6a7f412a7782f333?s=128&d=identicon&r=PG", "display_name": "Margo", "link": "https://stackoverflow.com/users/12297960/margo"}, "edited": false, "score": 0, "creation_date": 1572522341, "post_id": 58629425, "comment_id": 103590618, "body": "Or create the prototype to the function you are going to call, in your c file. Which is no different than just including the header file."}], "tags": [], "owner": {"reputation": 2323, "user_id": 8350647, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zJNHD.png?s=128&g=1", "display_name": "Nina", "link": "https://stackoverflow.com/users/8350647/nina"}, "is_accepted": false, "score": 0, "last_activity_date": 1572451297, "creation_date": 1572451297, "answer_id": 58629425, "question_id": 58628703, "link": "https://stackoverflow.com/questions/58628703/is-it-possible-to-link-dylib-without-header-file/58629425#58629425", "title": "Is it possible to link dylib without header file?", "body": "<p>To link a library in XCode, left click the project name in the source panel to the left. At the top click the \"Build Phase\" tab. You will see a drop down \"Link Binary with Library\" click the drop down then hit the \"+\" symbol and locate the dylib. Then compile your code.\n<a href=\"https://i.stack.imgur.com/FxyAd.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/FxyAd.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 11, "user_id": 12297960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5360a10bca6dd6bd6a7f412a7782f333?s=128&d=identicon&r=PG", "display_name": "Margo", "link": "https://stackoverflow.com/users/12297960/margo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 439, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1572488036, "creation_date": 1572449061, "last_edit_date": 1572488036, "question_id": 58628703, "link": "https://stackoverflow.com/questions/58628703/is-it-possible-to-link-dylib-without-header-file", "title": "Is it possible to link dylib without header file?", "body": "<p>I'm working on Mac OS and using CLion/Xcode IDEs. I've already read a lot of information about dynamic libraries.  Is it possible to link my dylib to the project without writing \"include \"name_file.h\"\" on my Macbook? I know if it is possible in Visual Studio on Windows.  VS on Mac OS doesn't support C++.</p>\n"}, {"tags": ["c++", "networking"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1572449064, "post_id": 58628597, "comment_id": 103564686, "body": "Think of the subnet mask as a bit-mask. Once converted to a an <code>uint32_t</code> it&#39;s easy to figure out what bits you can change to change the network (the first non-zero bit of the subnet mask)."}, {"owner": {"reputation": 4989, "user_id": 3745413, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jQsNL.png?s=128&g=1", "display_name": "Ron Maupin", "link": "https://stackoverflow.com/users/3745413/ron-maupin"}, "edited": false, "score": 1, "creation_date": 1572449237, "post_id": 58628597, "comment_id": 103564802, "body": "There is a section in <a href=\"https://networkengineering.stackexchange.com/a/53994/8499\">this two-part answer</a> that explains how to determine if an address is in a network (&quot;<i>This is the method a source host uses to determine if it a destination host on the same network as the source host.</i>&quot;). There is also a section that explains how to find the common network between two address. Plus, just about everything else you wanted to know about IPv4 addressing and subnetting."}], "answers": [{"tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": true, "score": 1, "last_activity_date": 1572462529, "last_edit_date": 1572462529, "creation_date": 1572461944, "answer_id": 58632072, "question_id": 58628597, "link": "https://stackoverflow.com/questions/58628597/check-if-ip-is-in-other-ips-networks-range-and-find-next-free-ip/58632072#58632072", "title": "Check if IP is in other IPs networks range and find next free IP", "body": "<p>With the IPs and subnet mask in <code>uint32_t</code> format, it is very simple to check if the IPs are on the same subnet.  Simply use the bitwise AND operator to mask the two IPs with the subnet mask and then check if the results are the same value:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>bool isOnSameNetwork = (checkip &amp; othersubnet) == (otherip &amp; othersubnet);\n</code></pre>\n\n<p>For example:</p>\n\n<p><code>(10.0.1.100 &amp; 255.255.0.0) == 10.0.0.0</code><br>\n<code>(10.0.0.1 &amp; 255.255.0.0) == 10.0.0.0</code></p>\n\n<p>So they are on the same subnet.</p>\n\n<p>Given an adapter's IP address and subnet mask, you can determine the entire range of that adapter's subnet fairly easily, again using bitwise operators:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>uint32_t networkAddr = (otherip &amp; othersubnet);\nuint32_t hostMask = ~othersubnet;\nuint32_t firstHost = networkAddr | 1;\nuint32_t lastHost = networkAddr | (hostMask - 1);\nuint32_t broadcastAddr = networkAddr | hostMask;\n</code></pre>\n"}], "owner": {"reputation": 3975, "user_id": 3560981, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/8fa10e8d564dd93ece697b0aebe689dd?s=128&d=identicon&r=PG&f=1", "display_name": "Nidhoegger", "link": "https://stackoverflow.com/users/3560981/nidhoegger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "closed_date": 1572489813, "accepted_answer_id": 58632072, "answer_count": 1, "score": -1, "last_activity_date": 1572462529, "creation_date": 1572448760, "question_id": 58628597, "link": "https://stackoverflow.com/questions/58628597/check-if-ip-is-in-other-ips-networks-range-and-find-next-free-ip", "closed_reason": "Needs more focus", "title": "Check if IP is in other IPs networks range and find next free IP", "body": "<p>I currently try to get a function going that checks if an IP Adress is part of the Network of a network adapter on the system. The IPs are in the format <code>uint32_t</code> (or'd ABCD together).</p>\n\n<p>I have the IP I want to check, lets call it <code>checkip</code>, the IP of the network interface, lets call it <code>otherip</code> and the network adapters subnet mask, lets call it <code>othersubnet</code>.</p>\n\n<p>Now I want to start searching from <code>10.0.0.0</code> on upwards to find an IP that is not part of this network adapters IP Range. I have written something together that manually does an <code>if</code> hell and has a lot of bugs. What I wanted to ask: Is there a way to check if an IP is part of a Networks IP range and if it is, find the next IP that is not part of that network.</p>\n\n<p>Example:</p>\n\n<p>My Network interface has the IP <code>10.0.1.100</code> with the subnet <code>255.255.0.0</code>, then <code>10.0.0.1</code> would be part of that network. But how to check that programatically as simple as possible and how to find out that the next free IP would be <code>10.1.0.1</code>?</p>\n"}, {"tags": ["c++", "qt", "qgraphicspixmapitem"], "answers": [{"comments": [{"owner": {"reputation": 160, "user_id": 7122385, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3c4d82a87a116270eab5b02a632b05ec?s=128&d=identicon&r=PG&f=1", "display_name": "Eddy", "link": "https://stackoverflow.com/users/7122385/eddy"}, "edited": false, "score": 0, "creation_date": 1572450786, "post_id": 58629153, "comment_id": 103565708, "body": "But I want to click on every card. I just want to trigger event only for one card per MousePress"}, {"owner": {"reputation": 2125, "user_id": 11497022, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4YGeg.jpg?s=128&g=1", "display_name": "Soheil Armin", "link": "https://stackoverflow.com/users/11497022/soheil-armin"}, "reply_to_user": {"reputation": 160, "user_id": 7122385, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3c4d82a87a116270eab5b02a632b05ec?s=128&d=identicon&r=PG&f=1", "display_name": "Eddy", "link": "https://stackoverflow.com/users/7122385/eddy"}, "edited": false, "score": 0, "creation_date": 1572451234, "post_id": 58629153, "comment_id": 103565973, "body": "updated my answer :  <code>event-&gt;setAccepted(true);</code>"}, {"owner": {"reputation": 160, "user_id": 7122385, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3c4d82a87a116270eab5b02a632b05ec?s=128&d=identicon&r=PG&f=1", "display_name": "Eddy", "link": "https://stackoverflow.com/users/7122385/eddy"}, "edited": false, "score": 0, "creation_date": 1572452268, "post_id": 58629153, "comment_id": 103566559, "body": "It is still triggers more than one card"}], "tags": [], "owner": {"reputation": 2125, "user_id": 11497022, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4YGeg.jpg?s=128&g=1", "display_name": "Soheil Armin", "link": "https://stackoverflow.com/users/11497022/soheil-armin"}, "is_accepted": false, "score": 0, "last_activity_date": 1572451211, "last_edit_date": 1572451211, "creation_date": 1572450476, "answer_id": 58629153, "question_id": 58628557, "link": "https://stackoverflow.com/questions/58628557/qgraphicspixmapitem-trigger-only-event-of-the-top-object/58629153#58629153", "title": "QGraphicsPixmapItem - trigger only event of the top object", "body": "<p>You need to <a href=\"https://doc.qt.io/qt-5/qevent.html#accept\" rel=\"nofollow noreferrer\">accept</a> the event for that object.</p>\n\n<p>From <a href=\"https://doc.qt.io/qt-5/qevent.html\" rel=\"nofollow noreferrer\">QEvent</a> documentation:</p>\n\n<blockquote>\n  <p>Setting the accept parameter indicates that the event receiver wants\n  the event. Unwanted events might be propagated to the parent widget.</p>\n</blockquote>\n\n<pre><code>bool Card::sceneEvent(QEvent *event)\n{\n    if (event-&gt;type() == QEvent::GraphicsSceneMousePress) {\n        //qDebug() &lt;&lt; event-&gt;MouseButtonPress;\n        event-&gt;setAccepted(true); // this will prevent the event from being propagated to underlaying objects\n        setPos(game-&gt;scene-&gt;width()/2, game-&gt;scene-&gt;height()/2);\n    }\n    return QGraphicsItem::sceneEvent(event);\n}\n</code></pre>\n"}], "owner": {"reputation": 160, "user_id": 7122385, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3c4d82a87a116270eab5b02a632b05ec?s=128&d=identicon&r=PG&f=1", "display_name": "Eddy", "link": "https://stackoverflow.com/users/7122385/eddy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 53, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1572451211, "creation_date": 1572448608, "last_edit_date": 1572448763, "question_id": 58628557, "link": "https://stackoverflow.com/questions/58628557/qgraphicspixmapitem-trigger-only-event-of-the-top-object", "title": "QGraphicsPixmapItem - trigger only event of the top object", "body": "<p>I am trying to make a card game. The player has vector of Cards and(hand) which is represtend in GUI. </p>\n\n<p><a href=\"https://i.stack.imgur.com/Klj9q.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Klj9q.png\" alt=\"Example how it looks\"></a></p>\n\n<p>My cards inherits from QGraphicsPixmapItem and QObject.\nWhat I want to achieve is to set MouseEvent on Card and trigger this event only for one single card. Now there is a problem if I click on Card, there are situation whey ther are close(like in the picture) and event occurs on more than one card.</p>\n\n<p>How can I preventing my Cards from this behaviour?</p>\n\n<p>Here's my Card.cpp (with sceneEvent method)</p>\n\n<pre><code>#include \"Card.h\"\n#include \"Game.h\"\n#include &lt;string&gt;\n#include &lt;QDebug&gt;\n#include &lt;QPixmap&gt;\n#include &lt;QSize&gt;\n#include &lt;QKeyEvent&gt;\n#include &lt;QMouseEvent&gt;\n#include &lt;QEvent&gt;\n\nextern Game * game;\n\nCard::Card(QString pixmapURL, std::string rank, std::string suit, int value)\n{\n    this-&gt;pixmapURL = pixmapURL;\n    this-&gt;rank = rank;\n    this-&gt;suit = suit;\n    this-&gt;value = value;\n\n    setPixmap(QPixmap(this-&gt;pixmapURL));\n    setScale(0.10);\n}\n\nint Card::getValue()\n{\n    return this-&gt;value;\n}\n\nstd::string Card::getSuit()\n{\n    return this-&gt;suit;\n}\n\nstd::string Card::getRank()\n{\n    return this-&gt;rank;\n}\n\nvoid Card::display()\n{\n    qDebug() &lt;&lt; this-&gt;suit.c_str() &lt;&lt; this-&gt;rank.c_str();\n}\n\nbool Card::sceneEvent(QEvent *event)\n{\n    if (event-&gt;type() == QEvent::GraphicsSceneMousePress) {\n        //qDebug() &lt;&lt; event-&gt;MouseButtonPress;\n        setPos(game-&gt;scene-&gt;width()/2, game-&gt;scene-&gt;height()/2);\n    }\n    return QGraphicsItem::sceneEvent(event);\n}\n</code></pre>\n"}, {"tags": ["c++", "c++11", "pthreads", "scheduling", "mingw-w64"], "comments": [{"owner": {"reputation": 4915, "user_id": 10686048, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bffd06d00a80b9b69e83f561ee5a392?s=128&d=identicon&r=PG&f=1", "display_name": "ChrisMM", "link": "https://stackoverflow.com/users/10686048/chrismm"}, "edited": false, "score": 1, "creation_date": 1572449039, "post_id": 58628545, "comment_id": 103564664, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/58436872/stdthis-threadsleep-for-sleeps-for-too-long\">std::this_thread::sleep_for sleeps for too long</a>"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1572449050, "post_id": 58628545, "comment_id": 103564672, "body": "<code>std::this_thread::sleep_for</code> blocks for at least the time you ask for, there is no guarnatee for the maximum time it is blocked afaik"}, {"owner": {"reputation": 35, "user_id": 9005581, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19b0c8a8b03039c5edb7fda39a1ca4f6?s=128&d=identicon&r=PG&f=1", "display_name": "Badope", "link": "https://stackoverflow.com/users/9005581/badope"}, "reply_to_user": {"reputation": 4915, "user_id": 10686048, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bffd06d00a80b9b69e83f561ee5a392?s=128&d=identicon&r=PG&f=1", "display_name": "ChrisMM", "link": "https://stackoverflow.com/users/10686048/chrismm"}, "edited": false, "score": 0, "creation_date": 1572449244, "post_id": 58628545, "comment_id": 103564805, "body": "@ChrisMM I&#39;ve read that post before and I did not find any indication about differences by compiler (or rather the difference with (not) using winpthreads). I don&#39;t think this post is a complete duplicate."}, {"owner": {"reputation": 4915, "user_id": 10686048, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bffd06d00a80b9b69e83f561ee5a392?s=128&d=identicon&r=PG&f=1", "display_name": "ChrisMM", "link": "https://stackoverflow.com/users/10686048/chrismm"}, "edited": false, "score": 0, "creation_date": 1572449295, "post_id": 58628545, "comment_id": 103564833, "body": "The compiler is irrelevant. It&#39;s how the hardware and OS handle threads, scheduling, etc., etc.."}, {"owner": {"reputation": 35, "user_id": 9005581, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19b0c8a8b03039c5edb7fda39a1ca4f6?s=128&d=identicon&r=PG&f=1", "display_name": "Badope", "link": "https://stackoverflow.com/users/9005581/badope"}, "reply_to_user": {"reputation": 4915, "user_id": 10686048, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bffd06d00a80b9b69e83f561ee5a392?s=128&d=identicon&r=PG&f=1", "display_name": "ChrisMM", "link": "https://stackoverflow.com/users/10686048/chrismm"}, "edited": false, "score": 0, "creation_date": 1572449469, "post_id": 58628545, "comment_id": 103564924, "body": "@ChrisMM Then why is the problem not present by using MSVC, i.e. not using winpthreads?"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1572449849, "post_id": 58628545, "comment_id": 103565114, "body": "@Badope the behaviour you see may be different, but the guarantees you get should be the same, and they are not what you need"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1572449873, "post_id": 58628545, "comment_id": 103565126, "body": "Has to do with what lower-level primitives are being used to perform the sleep, and this is done in the Standard library implementation. The library that came with Visual Studio is using calls that result in a finer-grained tick than MinGW is using, allowing for a closer approximation of the requested sleeping period."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1572450080, "post_id": 58628545, "comment_id": 103565245, "body": "Why this is is likely MinGW being based on GCC and GCC supporting a much larger umbrella of possible hardware and operating systems. GCC is more general, but when it comes to performance tuning, sometimes general just isn&#39;t good enough."}, {"owner": {"reputation": 4915, "user_id": 10686048, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bffd06d00a80b9b69e83f561ee5a392?s=128&d=identicon&r=PG&f=1", "display_name": "ChrisMM", "link": "https://stackoverflow.com/users/10686048/chrismm"}, "edited": false, "score": 0, "creation_date": 1572450278, "post_id": 58628545, "comment_id": 103565400, "body": "@Badope, I haven&#39;t looked through the entire source code of winpthreads, but it relies on calls to <code>Sleep</code> anyway. Not sure exactly how G++ implements <code>sleep_for</code> though, so it may rely on functions that don&#39;t use <code>Sleep</code>"}], "owner": {"reputation": 35, "user_id": 9005581, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19b0c8a8b03039c5edb7fda39a1ca4f6?s=128&d=identicon&r=PG&f=1", "display_name": "Badope", "link": "https://stackoverflow.com/users/9005581/badope"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 123, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1572449056, "creation_date": 1572448572, "last_edit_date": 1572449056, "question_id": 58628545, "link": "https://stackoverflow.com/questions/58628545/explanation-why-stdthis-threadsleep-for-sleep-time-differs-between-msvc-an", "title": "Explanation why std::this_thread::sleep_for() sleep time differs between MSVC and MinGW-GCC?", "body": "<h1>Identifying the Problem</h1>\n\n<p>I was busy editing a library for lua bindings to rtmidi. I wanted to fix MinGW-GCC and LLVM/Clang compilation compability. When I was done making the edits and compiling the bindings, I noticed a weird timing issue caused by <code>std::this_thread::sleep_for()</code> when compared to MSVC.</p>\n\n<p>I understand that there are bound to be some scheduling differences between different compilers, but in the following examples you can hear large timing issues:</p>\n\n<ul>\n<li><a href=\"https://vocaroo.com/i/s1YX4fNNdtdA\" rel=\"nofollow noreferrer\">MIDI playback using MSVC compiled bindings</a></li>\n<li><a href=\"https://vocaroo.com/i/s0fZJpBA4FMY\" rel=\"nofollow noreferrer\">MIDI playback using GCC compiled bindings</a></li>\n</ul>\n\n<p>I have narrowed it down that this is the piece of code in question:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>lua_pushliteral(L, \"sleep\");\nlua_pushcfunction(L, [] (lua_State *L) {\n    auto s = std::chrono::duration&lt;lua_Number&gt;(luaL_checknumber(L, 1));\n    std::this_thread::sleep_for(s);\n    return 0;\n});\nlua_rawset(L, -3);\n</code></pre>\n\n<p>Obviously it's about these two lines:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>auto s = std::chrono::duration&lt;lua_Number&gt;(luaL_checknumber(L, 1));\nstd::this_thread::sleep_for(s);\n</code></pre>\n\n<p>The average waiting time that is passed to <code>sleep_for()</code> is around 0.01s, with some calls here and there between 0.002s - 0.005s.</p>\n\n<h1>Troubleshooting</h1>\n\n<p>First off I have checked whether the problem was present with my current version of GCC (9.2.0) by using a different version and even using LLVM/Clang.\nBoth GCC 8.1.0 and LLVM/Clang 9.0.0 yield the same results.</p>\n\n<p>At this point I can conclude there is some weird scheduling going on with the winpthreads runtime, since they depend on it and MSVC does not.</p>\n\n<p>After that I tried to switch out the code with the Windows <code>Sleep()</code> call. I had to multiply by 1000 to adjust for the correct timing.</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>Sleep(luaL_checknumber(L, 1) * 1000);\n</code></pre>\n\n<p>As I expected, the timing issue is not present here; this tells me that winpthreads is indeed the culprit here.</p>\n\n<p>Obviously I do not want to make calls to Windows <code>Sleep()</code> and keep using <code>sleep_for()</code> for the sake of portability (as in crossplatform).</p>\n\n<h1>The Questions</h1>\n\n<p>So based on what I gathered I have the following questions:</p>\n\n<ul>\n<li>Is winpthread indeed the culprit? Am I perhaps missing some compiler defines that would solve the problem?</li>\n<li>If winpthreads is indeed the culprit, why are the timing differences so big?</li>\n<li>If there is no compiler define 'fix', what would you recommend to do tackle the problem?</li>\n</ul>\n\n<p>To partially answer the third question (if it may come to it), I was thinking of doing something like:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#ifdef _WIN32 &amp;&amp; MINGW\n    #include &lt;windows.h&gt;\n#endif\n\n...\n\n#ifdef _WIN32 &amp;&amp; MINGW\n    Sleep(luaL_checknumber(L, 1) * 1000);\n#elif _WIN32 &amp;&amp; MSVC\n    auto s = std::chrono::duration&lt;lua_Number&gt;(luaL_checknumber(L, 1));\n    std::this_thread::sleep_for(s);\n#endif\n</code></pre>\n\n<p>Of course the problem arises that Window's <code>Sleep()</code> call is less precise (or so I've read).</p>\n"}, {"tags": ["c++", "vector", "compiler-errors", "c++14", "push-back"], "comments": [{"owner": {"reputation": 233613, "user_id": 14065, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e1475012bb1630271c9165899bccd548?s=128&d=identicon&r=PG", "display_name": "Martin York", "link": "https://stackoverflow.com/users/14065/martin-york"}, "edited": false, "score": 0, "creation_date": 1572449115, "post_id": 58628485, "comment_id": 103564719, "body": "We can&#39;t reproduce the problem (without making guesses). Please provide enough code so that we can simply cut/paste the code and generate the same result."}], "answers": [{"tags": [], "owner": {"reputation": 1155, "user_id": 6449910, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OvekE.jpg?s=128&g=1", "display_name": "SeSodesa", "link": "https://stackoverflow.com/users/6449910/sesodesa"}, "is_accepted": false, "score": 1, "last_activity_date": 1572449057, "creation_date": 1572449057, "answer_id": 58628700, "question_id": 58628485, "link": "https://stackoverflow.com/questions/58628485/pushing-a-string-to-a-private-member-vector/58628700#58628700", "title": "Pushing a string to a private member vector", "body": "<p>I figured out the source of the problem: the vector<code>tileSet_</code> didn't use to be a member variable, but I made it so out of necessity. I had, however, originally defined the function <code>shuffleTiles</code> as a <code>const</code> function, which of course makes it impossible for it to change the state of the class. Removing the <code>const</code> from the definition fixed the issue.</p>\n\n<p>The error messages in C++ can sure be mystical.</p>\n"}, {"tags": [], "owner": {"reputation": 233613, "user_id": 14065, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e1475012bb1630271c9165899bccd548?s=128&d=identicon&r=PG", "display_name": "Martin York", "link": "https://stackoverflow.com/users/14065/martin-york"}, "is_accepted": true, "score": 3, "last_activity_date": 1572449791, "last_edit_date": 1572449791, "creation_date": 1572449426, "answer_id": 58628813, "question_id": 58628485, "link": "https://stackoverflow.com/questions/58628485/pushing-a-string-to-a-private-member-vector/58628813#58628813", "title": "Pushing a string to a private member vector", "body": "<p>Took me a while to get it all building (with some guesses).</p>\n\n<p>The problem is that the method is marked <code>const</code>. Thus you are not allowed to call any mutating functions on members (ie you can not call none const member functions or none const member functions on any member variables).</p>\n\n<pre><code> void MapWindow::shuffleTiles() const\n                                ^^^^^\n ...\n     tileSet_.push_back(s);  // Attempt to mutate the state of the object.\n</code></pre>\n\n<p>This is explained in greate detail in the error message generated by the compiler:</p>\n\n<pre><code>t2.cpp:61:14: error: no matching member function for call to 'push_back'\n    tileSet_.push_back(s);\n    ~~~~~~~~~^~~~~~~~~\n/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/../include/c++/v1/vector:712:36: note: candidate function not viable: 'this' argument has type\n      'const std::vector&lt;std::string&gt;' (aka 'const vector&lt;basic_string&lt;char, char_traits&lt;char&gt;, allocator&lt;char&gt; &gt; &gt;'), but method is not marked const\n    _LIBCPP_INLINE_VISIBILITY void push_back(const_reference __x);\n                                   ^\n/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/../include/c++/v1/vector:715:36: note: candidate function not viable: 'this' argument has type\n      'const std::vector&lt;std::string&gt;' (aka 'const vector&lt;basic_string&lt;char, char_traits&lt;char&gt;, allocator&lt;char&gt; &gt; &gt;'), but method is not marked const\n    _LIBCPP_INLINE_VISIBILITY void push_back(value_type&amp;&amp; __x);\n</code></pre>\n\n<p>If you go to the end of the line it says: \"<strong>but method is not marked const</strong>\"</p>\n\n<p>Deciphering line:</p>\n\n<blockquote>\n  <p>note: candidate function not viable: 'this' argument has type<br>\n  'const std::vector', but method is not marked const<br>\n  void push_back(const_reference __x);</p>\n  \n  <p>note: candidate function not viable: 'this' argument has type<br>\n  'const std::vector', but method is not marked const<br>\n  void push_back(value_type&amp;&amp; __x);</p>\n</blockquote>\n"}], "owner": {"reputation": 1155, "user_id": 6449910, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OvekE.jpg?s=128&g=1", "display_name": "SeSodesa", "link": "https://stackoverflow.com/users/6449910/sesodesa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 107, "favorite_count": 1, "accepted_answer_id": 58628813, "answer_count": 2, "score": 1, "last_activity_date": 1572449791, "creation_date": 1572448402, "last_edit_date": 1572448812, "question_id": 58628485, "link": "https://stackoverflow.com/questions/58628485/pushing-a-string-to-a-private-member-vector", "title": "Pushing a string to a private member vector", "body": "<p>I have a <code>std::vector&lt;std::string&gt; tileSet_</code> as a member variable of a class. In the constructor of said class I call the function</p>\n\n<pre><code>void MapWindow::shuffleTiles() const\n{\n  std::vector&lt;std::pair&lt;std::string, unsigned&gt;&gt; tileAmounts = {\n    {\"a\", 2}, {\"b\", 4}, {\"c\", 1}, {\"d\", 4},\n    {\"e\", 5}, {\"f\", 2}, {\"g\", 1}, {\"h\", 3},\n    {\"i\", 2}, {\"j\", 3}, {\"k\", 3}, {\"l\", 3},\n    {\"m\", 2}, {\"n\", 3}, {\"o\", 2}, {\"p\", 3},\n    {\"q\", 1}, {\"r\", 3}, {\"s\", 2}, {\"t\", 1},\n    {\"u\", 8}, {\"v\", 9}, {\"w\", 4}, {\"x\", 1}\n  };\n\n  int tileN = 0;\n  for (std::vector&lt;std::pair&lt;std::string, int&gt;&gt;::size_type i = 0;\n    i &lt; tileAmounts.size();i++) {\n    tileN += tileAmounts.at(i).second;\n  }\n\n  // only used once to initialise (seed) engine\n  std::random_device rd;\n  // random-number engine used (Mersenne-Twister in this case)\n  std::mt19937 rng(rd());\n  // guaranteed unbiased\n  std::uniform_int_distribution&lt;int&gt; uni(0,tileAmounts.size() - 1);\n\n  for (int i = 0; i &lt; tileN; i++) {\n    auto random_integer = uni(rng);\n    //qDebug() &lt;&lt; i &lt;&lt; \":\" &lt;&lt; random_integer;\n    std::cout &lt;&lt; i\n              &lt;&lt; \":\"\n              &lt;&lt; tileAmounts.at(random_integer).first\n              &lt;&lt; \":\"\n              &lt;&lt; tileAmounts.at(random_integer).second\n              &lt;&lt; std::endl\n              &lt;&lt; std::endl;\n\n    while (tileAmounts.at(random_integer).second &lt; 1) {\n      std::cout &lt;&lt; \"Reshuffling \"\n               &lt;&lt; tileAmounts.at(random_integer).first\n               &lt;&lt; \":\"\n               &lt;&lt; tileAmounts.at(random_integer).second\n               &lt;&lt; std::endl;\n      random_integer = uni(rng);\n    }\n\n    std::string s = tileAmounts[random_integer].first;\n    std::cout &lt;&lt; s\n              &lt;&lt; std::endl;\n\n    tileSet_.push_back(s);\n    tileAmounts.at(random_integer).second -= 1;\n  }\n\n  for (std::vector&lt;std::string&gt;::size_type i = 0;\n    i &lt; tileSet_.size();i++) {\n    std::cout &lt;&lt; tileSet_.at(i)\n              &lt;&lt; std::endl;\n  }\n}\n</code></pre>\n\n<p>which at the very end attempts to push back a randomly picked string from a pair contained in the vector <code>tileAmounts</code> into the memeber vector. For some reason, this raises the error</p>\n\n<pre><code>no matching member function call to 'push_back'\n</code></pre>\n\n<p>Why does this happen. I'm taking the vector to be pushed back from a <code>std::pair</code>, but surely that shouldn't be causing any type mismatches? A <code>std::string</code> in a <code>std::pair</code> contained in a <code>std::vector</code> is still a <code>std::string</code>, no?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1572448503, "post_id": 58628470, "comment_id": 103564389, "body": "You check if the stream opened, which is good, but you don&#39;t do anything to distinguish between failing to open and opening an empty file. &quot;test.txt&quot; is probably not found."}, {"owner": {"reputation": 2499, "user_id": 5208760, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/L6VNv.jpg?s=128&g=1", "display_name": "Mateusz", "link": "https://stackoverflow.com/users/5208760/mateusz"}, "edited": false, "score": 0, "creation_date": 1572448511, "post_id": 58628470, "comment_id": 103564392, "body": "It doesn&#39;t print anything or doesn&#39;t open at all? Have you checked whether you get inside the condition or not?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1572448516, "post_id": 58628470, "comment_id": 103564397, "body": "Try putting the text file in the same location as the binary"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1572448674, "post_id": 58628470, "comment_id": 103564487, "body": "The input file needs to be in the current &quot;working directory&quot; of your program; all relative paths are resolved relative to that directory. What it is depends on how you&#39;re running the program."}, {"owner": {"reputation": 13, "user_id": 12193935, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad401105876a8db7c79b9714dd3c4232?s=128&d=identicon&r=PG&f=1", "display_name": "OkitaSan498", "link": "https://stackoverflow.com/users/12193935/okitasan498"}, "edited": false, "score": 0, "creation_date": 1572449276, "post_id": 58628470, "comment_id": 103564823, "body": "test.txt actually exists, I put it exactly the same folder with my source code."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1572449400, "post_id": 58628470, "comment_id": 103564892, "body": "@OkitaSan498 Yes, that&#39;s mentioned in the question. But it doesn&#39;t mean that&#39;s the right place to put it. The working directory and the source file directory aren&#39;t necessarily the same. Please read the previous comments carefully, answer the questions and try the suggestions provided in them."}, {"owner": {"reputation": 233613, "user_id": 14065, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e1475012bb1630271c9165899bccd548?s=128&d=identicon&r=PG", "display_name": "Martin York", "link": "https://stackoverflow.com/users/14065/martin-york"}, "edited": false, "score": 0, "creation_date": 1572450029, "post_id": 58628470, "comment_id": 103565216, "body": "@OkitaSan498 If the file name is not absolute the code looks for it based on the current working directory. The current working directory is not always the same as where the source is, the current directory is usually the working direcory of the parent application that started your code. See: <a href=\"https://stackoverflow.com/questions/298510/how-to-get-the-current-directory-in-a-c-program\">How to get the current directory in a C program?</a>"}, {"owner": {"reputation": 233613, "user_id": 14065, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e1475012bb1630271c9165899bccd548?s=128&d=identicon&r=PG", "display_name": "Martin York", "link": "https://stackoverflow.com/users/14065/martin-york"}, "edited": false, "score": 0, "creation_date": 1572450160, "post_id": 58628470, "comment_id": 103565300, "body": "@OkitaSan498 PS. How do you know it successfully opened the file. There is no error message that tells you if it failed."}], "answers": [{"tags": [], "owner": {"reputation": 26, "user_id": 8667003, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b17feccf9311dbe80968abd9a491e530?s=128&d=identicon&r=PG&f=1", "display_name": "kdzumba", "link": "https://stackoverflow.com/users/8667003/kdzumba"}, "is_accepted": true, "score": 0, "last_activity_date": 1572449675, "last_edit_date": 1572449675, "creation_date": 1572449375, "answer_id": 58628793, "question_id": 58628470, "link": "https://stackoverflow.com/questions/58628470/why-the-ifstream-does-not-read-anything/58628793#58628793", "title": "Why the ifstream does not read anything", "body": "<pre><code>#include &lt;fstream&gt;\n#include &lt;string&gt;\n#include &lt;vector&gt;\n#include &lt;iostream&gt;\n\nstd::string contents;\nstd::vector&lt;std::string&gt; ContainerOfString;\n\nint main()\n{\n    std::ifstream ifs;\n    ifs.open(\"test.txt\"); // test.txt is in the same folder with the source code\n\n    if (ifs)\n    {\n        while (ifs &gt;&gt; contents)\n        {\n            ContainerOfString.push_back(contents);\n        }\n        for (auto &amp;i : ContainerOfString)\n        {\n            std::cout &lt;&lt; i &lt;&lt; \" \";\n        }\n    }\n    else\n    {\n        std::cout &lt;&lt; \"file not found\" &lt;&lt; std::endl;\n    }\n    return 0;\n}\n</code></pre>\n\n<p>Have a mechanism to check if the text file is found by your code. It is likely that you spelt your text file wrong, or it is not in the same directory as your main code or something else is preventing your file from being read. Also check to see that the text file is not empty because that will not produce any output from your code as well.</p>\n"}], "owner": {"reputation": 13, "user_id": 12193935, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad401105876a8db7c79b9714dd3c4232?s=128&d=identicon&r=PG&f=1", "display_name": "OkitaSan498", "link": "https://stackoverflow.com/users/12193935/okitasan498"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 58628793, "answer_count": 1, "score": -1, "last_activity_date": 1572449675, "creation_date": 1572448355, "question_id": 58628470, "link": "https://stackoverflow.com/questions/58628470/why-the-ifstream-does-not-read-anything", "title": "Why the ifstream does not read anything", "body": "<p>I was using the <code>ifstream</code> , but the program does not read anything from the input file . The program runs in macOS 10.14 , my complier is clang 10.0.1, I put the source code and the input file in the same folder.</p>\n\n<pre><code>std::string contents;\nstd::vector&lt;std::string&gt; ContainerOfString;\nint main(){\n    std::ifstream ifs;\n    ifs.open(\"test.txt\");// test.txt is in the same folder with the source code\n    if(ifs){\n        while(ifs&gt;&gt;contents){\n            ContainerOfString.push_back(contents);\n        }\n        for(auto &amp;i:ContainerOfString){\n            std::cout&lt;&lt;i&lt;&lt;\" \";\n        }\n    }\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "macos", "clang", "toolchain", "macos-catalina"], "comments": [{"owner": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 0, "creation_date": 1572450226, "post_id": 58628377, "comment_id": 103565356, "body": "Does <code>xcode-select -p</code> match where Xcode is located?  Can you change the code to <code>using std::signbit;</code>, likewise for the others?  Are you compiling as C++11 or later?"}, {"owner": {"reputation": 371, "user_id": 12129612, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-V-Mk3QG-ShU/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfTeeyFEy3HU8D0WqgV5rf2eLAIaA/photo.jpg?sz=128", "display_name": "roman Sztergbaum", "link": "https://stackoverflow.com/users/12129612/roman-sztergbaum"}, "reply_to_user": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 0, "creation_date": 1572450710, "post_id": 58628377, "comment_id": 103565655, "body": "Compiling as C++ 11. I cannot change the code, it&#39;s an external dependencies !  yes <code>xcode-select -p</code> match where <code>XCode</code> is located."}, {"owner": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 0, "creation_date": 1572453512, "post_id": 58628377, "comment_id": 103567261, "body": "That&#39;s not good.  The code is trying to do <code>using ::signbit;</code> and the symbol isn&#39;t in the global namespace, it is in <code>std::</code> namespace.  I presume likewise with the others (I didn&#39;t chase them down)."}], "answers": [{"comments": [{"owner": {"reputation": 393, "user_id": 11101982, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71b86dbfd2eb2b9d421e3c9371fe4ba7?s=128&d=identicon&r=PG&f=1", "display_name": "mkl", "link": "https://stackoverflow.com/users/11101982/mkl"}, "reply_to_user": {"reputation": 2605, "user_id": 5082048, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/dd36d8dd498222faa78903ae6bca538f?s=128&d=identicon&r=PG&f=1", "display_name": "Someone", "link": "https://stackoverflow.com/users/5082048/someone"}, "edited": false, "score": 3, "creation_date": 1584811071, "post_id": 58670035, "comment_id": 107554411, "body": "<code>set(CMAKE_OSX_SYSROOT ...)</code> goes into <code>CMakeLists.txt</code>, not the shell."}], "tags": [], "owner": {"reputation": 393, "user_id": 11101982, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71b86dbfd2eb2b9d421e3c9371fe4ba7?s=128&d=identicon&r=PG&f=1", "display_name": "mkl", "link": "https://stackoverflow.com/users/11101982/mkl"}, "is_accepted": false, "score": 15, "last_activity_date": 1584814547, "last_edit_date": 1584814547, "creation_date": 1572688911, "answer_id": 58670035, "question_id": 58628377, "link": "https://stackoverflow.com/questions/58628377/catalina-c-using-cmath-headers-yield-error-no-member-named-signbit-in-th/58670035#58670035", "title": "Catalina C++: Using &lt;cmath&gt; headers yield error: no member named &#39;signbit&#39; in the global namespace", "body": "<p>I'm curious: What compiler are you using? What's the value of <code>CMAKE_OSX_SYSROOT</code>?</p>\n\n<p>I'm fairly convinced this is the result of a wrong <code>CMAKE_OSX_SYSROOT</code>. I had the problem you're describing when using python bindings for clang (where CMake doesn't manage the compiler call), but I managed to recreate the error in CMake by doing:</p>\n\n<pre><code>set(CMAKE_OSX_SYSROOT \"\")  # Reset.\n</code></pre>\n\n<p>I solved my problem by following the answers to this question: <a href=\"https://stackoverflow.com/questions/58313047/cannot-compile-r-packages-with-c-code-after-updating-to-macos-catalina\">Cannot compile R packages with c++ code after updating to macOS Catalina</a>.</p>\n\n<p>To summarise: On Catalina, <code>/usr/include</code> is purged and protected by SIP. Thus, any project that expects the C headers to be found there will fail to compile. If I remember correctly, Apple recommends to file bug reports to projects that expect C headers in <code>/usr/include</code>. </p>\n\n<p>You must point the build system of the code you're trying to compile to the right headers:</p>\n\n<p>(1) Make sure Xcode is up to date. There's no telling what an outdated Xcode on Catalina might do to your build environment.</p>\n\n<p>(2) Use the <code>-isysroot /sdk/path</code> compiler flag, where <code>/sdk/path</code> is the result of <code>xcrun --show-sdk-path</code>. I'm not sure what CMake's best practice is, but try doing </p>\n\n<pre><code>set(CMAKE_OSX_SYSROOT /sdk/path)\n</code></pre>\n\n<p>or</p>\n\n<pre><code>set(CMAKE_CXX_FLAGS \"[...] -isysroot /sdk/path\")\n</code></pre>\n\n<p>If that solves the problem, you may want to look for a better way to do this in CMake.</p>\n\n<p>Of course, if you're adventurous, you could also disable SIP, as suggested in the answer to my question: <a href=\"https://apple.stackexchange.com/questions/372032/usr-include-missing-on-macos-catalina-with-xcode-11\">/usr/include missing on macOS Catalina (with Xcode 11)\n</a></p>\n"}, {"comments": [{"owner": {"reputation": 460, "user_id": 3444923, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09d93746b27c6d9781eddc2b2061d152?s=128&d=identicon&r=PG", "display_name": "hunzter", "link": "https://stackoverflow.com/users/3444923/hunzter"}, "edited": false, "score": 0, "creation_date": 1591715548, "post_id": 59780819, "comment_id": 110157863, "body": "Thank you for your details explaination. But sadly no solution seems to work for my machine. I am about to goes for the final option to reinstall Catalina. Damn Apple, why they make things so difficult?"}, {"owner": {"reputation": 1744, "user_id": 5943539, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/ptjbp.jpg?s=128&g=1", "display_name": "JerryN", "link": "https://stackoverflow.com/users/5943539/jerryn"}, "edited": false, "score": 0, "creation_date": 1592508455, "post_id": 59780819, "comment_id": 110459118, "body": "I followed these directions, from above, to hard code a path to math.h. That worked fine for a while but I suspect that a newer version of Xcode broke this and I was getting compilation errors involving math.h. So <i>don&#39;t</i> do this <code>Using #include&lt;&#47;Applications&#47;Xcode.app&#47;Contents&#47;Developer&#47;Toolchai&zwnj;&#8203;ns&#47;XcodeDefault.xcto&zwnj;&#8203;olchain&#47;usr&#47;include&#47;&zwnj;&#8203;c++&#47;v1&#47;math.h&gt; instead of &lt;math.h&gt; in &#47;Applications&#47;Xcode.app&#47;Contents&#47;Developer&#47;Toolchains&#47;XcodeD&zwnj;&#8203;efault.xctoolchain&#47;u&zwnj;&#8203;sr&#47;include&#47;c++&#47;v1&#47;cm&zwnj;&#8203;ath</code>!!!"}, {"owner": {"reputation": 4645, "user_id": 1418981, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/0f7a600b7301a23924ae818c812c9540?s=128&d=identicon&r=PG", "display_name": "Vlad", "link": "https://stackoverflow.com/users/1418981/vlad"}, "edited": false, "score": 0, "creation_date": 1602858937, "post_id": 59780819, "comment_id": 113861773, "body": "On my side the problem was fixed by removing directory <code>&#47;Library&#47;Developer&#47;CommandLineTools</code>. I was building Swift for Android on macOS Catalina."}], "tags": [], "owner": {"reputation": 398, "user_id": 3484041, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/j5uq7.jpg?s=128&g=1", "display_name": "solodon", "link": "https://stackoverflow.com/users/3484041/solodon"}, "is_accepted": false, "score": 14, "last_activity_date": 1579231917, "creation_date": 1579231917, "answer_id": 59780819, "question_id": 58628377, "link": "https://stackoverflow.com/questions/58628377/catalina-c-using-cmath-headers-yield-error-no-member-named-signbit-in-th/59780819#59780819", "title": "Catalina C++: Using &lt;cmath&gt; headers yield error: no member named &#39;signbit&#39; in the global namespace", "body": "<p>I am having the same problem while trying to target iOS (both on my MacBook Air and on GitHub Actions runner) and here are a few more thoughts on the problem even though I'm not familiar enough with Apple's ecosystem to suggest a proper solution. The original command line was coming from CMake in cpprestsdk, but once I boiled it down to essentials, here is a short repro.</p>\n\n<ol>\n<li>Create file <code>cmath-bug.cpp</code> with the only line in it:</li>\n</ol>\n\n<pre><code>    #include &lt;cmath&gt;\n</code></pre>\n\n<ol start=\"2\">\n<li>Run (newlines in front of some arguments are for reading convenience, remove them)</li>\n</ol>\n\n<pre><code>clang -v -x c++ -target arm64-apple-ios13.2 -fcolor-diagnostics -std=c++11 -stdlib=libc++ \n-isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS13.2.sdk \n-isystem  /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS13.2.sdk/usr/include\n-c cmath-bug.cpp\n</code></pre>\n\n<p>When I run it, i get the familiar to many facing the same issue:</p>\n\n<pre><code>Apple clang version 11.0.0 (clang-1100.0.33.16)\nTarget: arm64-apple-ios13.2\nThread model: posix\nInstalledDir: /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin\n \"/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang\" -cc1 -triple arm64-apple-ios13.2.0 -Wdeprecated-objc-isa-usage -Werror=deprecated-objc-isa-usage -Werror=implicit-function-declaration -emit-obj -mrelax-all -disable-free -disable-llvm-verifier -discard-value-names -main-file-name cmath-bug.cpp -mrelocation-model pic -pic-level 2 -mthread-model posix -mdisable-fp-elim -fno-strict-return -masm-verbose -munwind-tables -target-sdk-version=13.2 -target-cpu cyclone -target-feature +fp-armv8 -target-feature +neon -target-feature +crypto -target-feature +zcm -target-feature +zcz -target-feature +sha2 -target-feature +aes -target-abi darwinpcs -fallow-half-arguments-and-returns -dwarf-column-info -debugger-tuning=lldb -ggnu-pubnames -target-linker-version 530 -v -coverage-notes-file /Users/myuser/Projects/C++/cmath-bug.gcno -resource-dir /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/lib/clang/11.0.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS13.2.sdk -isystem /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS13.2.sdk/usr/include -stdlib=libc++ -internal-isystem /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/../include/c++/v1 -Wno-framework-include-private-from-public -Wno-atimport-in-framework-header -Wno-extra-semi-stmt -Wno-quoted-include-in-framework-header -std=c++11 -fdeprecated-macro -fdebug-compilation-dir /Users/myuser/Projects/C++ -ferror-limit 19 -fmessage-length 204 -stack-protector 1 -fstack-check -mdarwin-stkchk-strong-link -fblocks -fencode-extended-block-signature -fregister-global-dtors-with-atexit -fobjc-runtime=ios-13.2.0 -fcxx-exceptions -fexceptions -fmax-type-align=16 -fdiagnostics-show-option -fcolor-diagnostics -o cmath-bug.o -x c++ cmath-bug.cpp\nclang -cc1 version 11.0.0 (clang-1100.0.33.16) default target x86_64-apple-darwin19.0.0\nignoring nonexistent directory \"/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS13.2.sdk/usr/include/c++/v1\"\nignoring nonexistent directory \"/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS13.2.sdk/usr/local/include\"\nignoring nonexistent directory \"/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS13.2.sdk/Library/Frameworks\"\nignoring duplicate directory \"/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS13.2.sdk/usr/include\"\n#include \"...\" search starts here:\n#include &lt;...&gt; search starts here:\n /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS13.2.sdk/usr/include\n /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/../include/c++/v1\n /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/lib/clang/11.0.0/include\n /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/include\n /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS13.2.sdk/System/Library/Frameworks (framework directory)\nEnd of search list.\nIn file included from cmath-bug.cpp:1:\n/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/../include/c++/v1/cmath:318:9: error: no member named 'signbit' in the global namespace\nusing ::signbit;\n      ~~^\n/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/../include/c++/v1/cmath:319:9: error: no member named 'fpclassify' in the global namespace\nusing ::fpclassify;\n      ~~^\n/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/../include/c++/v1/cmath:320:9: error: no member named 'isfinite' in the global namespace; did you mean 'finite'?\nusing ::isfinite;\n      ~~^\n</code></pre>\n\n<p>The only 2 include directories I pass on my original command line exist and are:</p>\n\n<pre><code>$ ls -alF /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS13.2.sdk\nlrwxr-xr-x  1 root  wheel    12B Dec 17 11:54 /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS13.2.sdk@ -&gt; iPhoneOS.sdk\n$ ls -alF /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS13.2.sdk/usr/include\ntotal 2160\ndrwxr-xr-x  169 root  wheel   5.3K Dec 17 12:07 ./\ndrwxr-xr-x    5 root  wheel   160B Nov  4 19:22 ../\n ...\n-rw-r--r--    9 root  wheel    32K Nov  4 19:52 math.h\n ...\n</code></pre>\n\n<p>But the interesting bits here are the non-existing include directories it reports as well as the include directories it ends up searching eventually and their order. My guess is that additional directories not mentioned on the command line are inserted by Apple Clang's driver based on some Apple-specific logic.</p>\n\n<p>You can see from the reported error that the <code>&lt;cmath&gt;</code> header is found at: <code>/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/include/c++/v1/cmath</code> and at line 304 of it you can see:</p>\n\n<pre><code>#include &lt;__config&gt;      // Line 304\n#include &lt;math.h&gt;        // This one ends up causing troubles\n#include &lt;__cxx_version&gt;\n</code></pre>\n\n<p>Judging from the fact that in that same folder <code>/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/include/c++/v1/</code> there is a file <code>math.h</code> that provides the necessary definitions, e.g.:</p>\n\n<pre><code>#include &lt;__config&gt;\n\n#if !defined(_LIBCPP_HAS_NO_PRAGMA_SYSTEM_HEADER)\n#pragma GCC system_header\n#endif\n\n#include_next &lt;math.h&gt;\n\n#ifdef __cplusplus\n\n// We support including .h headers inside 'extern \"C\"' contexts, so switch\n// back to C++ linkage before including these C++ headers.\nextern \"C++\" {\n\n#include &lt;type_traits&gt;\n#include &lt;limits&gt;\n\n// signbit\n\n#ifdef signbit\n\ntemplate &lt;class _A1&gt;\n_LIBCPP_INLINE_VISIBILITY\nbool\n__libcpp_signbit(_A1 __lcpp_x) _NOEXCEPT\n{\n    return signbit(__lcpp_x);\n}\n\n#undef signbit\n\ntemplate &lt;class _A1&gt;\ninline _LIBCPP_INLINE_VISIBILITY\ntypename std::enable_if&lt;std::is_floating_point&lt;_A1&gt;::value, bool&gt;::type\nsignbit(_A1 __lcpp_x) _NOEXCEPT\n{\n    return __libcpp_signbit((typename std::__promote&lt;_A1&gt;::type)__lcpp_x);\n}\n\n...\n\n#elif defined(_LIBCPP_MSVCRT)\n...\n#endif  // signbit\n</code></pre>\n\n<p>the authors of <code>&lt;cmath&gt;</code> were expecting the <code>math.h</code> from that same folder be included first and then the <code>#include_next &lt;math.h&gt;</code> directive find the system-specific <code>math.h</code>. That is not what's happening in reality however.</p>\n\n<p>If you look at the first 2 entries in searched directories:</p>\n\n<pre><code>#include &lt;...&gt; search starts here:\n/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS13.2.sdk/usr/include\n/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/../include/c++/v1\n</code></pre>\n\n<p>you see that system-specific include directory ends up being above the Clang-injected standard library directory, which is why the system-specific <code>math.h</code> is being found, not the one in the same folder as the rest of the standard library headers. This is likely the case because if I explicitly add the standard library include directory to my command line BEFORE the other two directories <code>-isystem /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/../include/c++/v1</code> the problem goes away and I am able to compile the file. That's not what Clang's driver or whatever else is involved here does automatically: it adds that standard library directory via <code>-internal-system</code> (not sure what's the semantics of that internal flag) and it adds it AFTER the system directory.</p>\n\n<p>Now if you look at the list of ignored directories, the very first entry in that list is:</p>\n\n<pre><code>ignoring nonexistent directory \"/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS13.2.sdk/usr/include/c++/v1\"\n</code></pre>\n\n<p>of which the trailing <code>c++/v1</code> part does not exist on my machine, making me wonder whether the iPhone SDK installation was supposed to create a symbolic link <code>c++</code> inside the existing part of the path to point to <code>/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/include/c++</code> directory to make the whole thing work.</p>\n\n<p>Anyways, this what I think is happening and I wonder if anyone knows how to properly fix this?</p>\n\n<p>Thank you!</p>\n\n<p>P.S. For the context:</p>\n\n<pre><code>$ xcode-select -p\n/Applications/Xcode.app/Contents/Developer\n$ xcrun --show-sdk-path -sdk iphoneos13.2\n/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS13.2.sdk\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 249319, "user_id": 97337, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ed9a0d8cd44b62539b141f6c10405db1?s=128&d=identicon&r=PG", "display_name": "Rob Napier", "link": "https://stackoverflow.com/users/97337/rob-napier"}, "is_accepted": false, "score": 3, "last_activity_date": 1580859562, "creation_date": 1580859562, "answer_id": 60067098, "question_id": 58628377, "link": "https://stackoverflow.com/questions/58628377/catalina-c-using-cmath-headers-yield-error-no-member-named-signbit-in-th/60067098#60067098", "title": "Catalina C++: Using &lt;cmath&gt; headers yield error: no member named &#39;signbit&#39; in the global namespace", "body": "<p>It is possible your copy of Xcode is corrupted. Check with codesign:</p>\n\n<pre><code>codesign --verify /Applications/Xcode.app\n</code></pre>\n\n<p>This happened to me, and the problem was corrupted Xcode. Reinstalling fixed it.</p>\n\n<p>Something had modified the following:</p>\n\n<pre><code>file added: /Applications/Xcode-11.3.1-.app/Contents/Developer/Library/Frameworks/Python3.framework/Versions/3.7/lib/python3.7/json/__pycache__/scanner.cpython-37.pyc\nfile added: /Applications/Xcode-11.3.1-.app/Contents/Developer/Library/Frameworks/Python3.framework/Versions/3.7/lib/python3.7/json/__pycache__/decoder.cpython-37.pyc\nfile added: /Applications/Xcode-11.3.1-.app/Contents/Developer/Library/Frameworks/Python3.framework/Versions/3.7/lib/python3.7/json/__pycache__/encoder.cpython-37.pyc\nfile added: /Applications/Xcode-11.3.1-.app/Contents/Developer/Library/Frameworks/Python3.framework/Versions/3.7/lib/python3.7/json/__pycache__/__init__.cpython-37.pyc\nfile modified: /Applications/Xcode-11.3.1-.app/Contents/Developer/Platforms/AppleTVOS.platform/Developer/SDKs/AppleTVOS.sdk/usr/include/math.h\nfile modified: /Applications/Xcode-11.3.1-.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk/usr/include/math.h\nfile modified: /Applications/Xcode-11.3.1-.app/Contents/Developer/Platforms/WatchOS.platform/Developer/SDKs/WatchOS.sdk/usr/include/math.h\nfile modified: /Applications/Xcode-11.3.1-.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX.sdk/usr/include/math.h\nfile modified: /Applications/Xcode-11.3.1-.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX.sdk/System/Library/Frameworks/Kernel.framework/Versions/A/Headers/math.h\nfile modified: /Applications/Xcode-11.3.1-.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/DriverKit19.0.sdk/System/DriverKit/usr/include/math.h\nfile modified: /Applications/Xcode-11.3.1-.app/Contents/Developer/Platforms/WatchSimulator.platform/Developer/SDKs/WatchSimulator.sdk/usr/include/math.h\nfile modified: /Applications/Xcode-11.3.1-.app/Contents/Developer/Platforms/AppleTVSimulator.platform/Developer/SDKs/AppleTVSimulator.sdk/usr/include/math.h\nfile modified: /Applications/Xcode-11.3.1-.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/usr/include/math.h\n</code></pre>\n\n<p><code>math.h</code> was empty in all the above places.</p>\n"}, {"comments": [{"owner": {"reputation": 835, "user_id": 4321521, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/d77607c8c4d1e7f05ef347cda4f51993?s=128&d=identicon&r=PG", "display_name": "jbm", "link": "https://stackoverflow.com/users/4321521/jbm"}, "edited": false, "score": 0, "creation_date": 1589748752, "post_id": 60251556, "comment_id": 109410631, "body": "Are there any recommendations on how to fix this? I tried uninstalling both the command line tools and Xcode (11.4.1), but the <code>#include&lt;...&gt; search</code> order is still wrong."}, {"owner": {"reputation": 5198, "user_id": 305383, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Z8GVc.gif?s=128&g=1", "display_name": "Ryan H.", "link": "https://stackoverflow.com/users/305383/ryan-h"}, "reply_to_user": {"reputation": 835, "user_id": 4321521, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/d77607c8c4d1e7f05ef347cda4f51993?s=128&d=identicon&r=PG", "display_name": "jbm", "link": "https://stackoverflow.com/users/4321521/jbm"}, "edited": false, "score": 0, "creation_date": 1589749572, "post_id": 60251556, "comment_id": 109410879, "body": "The only thing I can think of is to look in your login scripts such as <code>~&#47;.bash_profile</code>, <code>~&#47;.zshrc</code> etc. for things that can affect the search order such as compiler environment variables (in my case it was <code>CPLUS_INCLUDE_PATH</code>) or the order of directories in your <code>PATH</code>."}], "tags": [], "owner": {"reputation": 5198, "user_id": 305383, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Z8GVc.gif?s=128&g=1", "display_name": "Ryan H.", "link": "https://stackoverflow.com/users/305383/ryan-h"}, "is_accepted": false, "score": 1, "last_activity_date": 1581876443, "creation_date": 1581876443, "answer_id": 60251556, "question_id": 58628377, "link": "https://stackoverflow.com/questions/58628377/catalina-c-using-cmath-headers-yield-error-no-member-named-signbit-in-th/60251556#60251556", "title": "Catalina C++: Using &lt;cmath&gt; headers yield error: no member named &#39;signbit&#39; in the global namespace", "body": "<p>@solodon's analysis is spot on. The issue is likely that the <code>cmath</code> file is including the wrong version of <code>math.h</code> based on the search order of the header files. At least, this is what was happening to me when I was getting the same error.</p>\n\n<p>Scan your compiler output for <code>#include &lt;...&gt; search starts here:</code>. You can also force this output from the command line with <a href=\"https://stackoverflow.com/a/22181943/305383\">(source)</a>:</p>\n\n<pre><code>gcc -Wp,-v -E -\n</code></pre>\n\n<p>It should look something like this:</p>\n\n<pre><code> /usr/local/include\n /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/lib/clang/11.0.0/include\n /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/include\n /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX.sdk/usr/include\n /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX.sdk/System/Library/Frameworks (framework directory)\n</code></pre>\n\n<p>Notice that the paths with <code>Toolchains</code> come before those with <code>Platforms</code>. If in your case the order is reversed, you need to figure out what in your configuration is causing this. For me, it was an explicit setting of <code>CPLUS_INCLUDE_PATH</code> in my login script.</p>\n\n<p>Offending code:</p>\n\n<pre><code>XCBASE=`xcrun --show-sdk-path`\nexport CPLUS_INCLUDE_PATH=$XCBASE/usr/include\n</code></pre>\n\n<p>This was part of my attempt to work around Xcode 11 no longer providing the installation package for the SDK header files. After removing this code, I was able to successfully include <code>cmath</code> in my C++ code.</p>\n\n<p>If you came here looking for solutions to this issue, you may require a different solution but hopefully this helps to shed light on what seems to be the root cause of this issue, header file search path order.</p>\n"}, {"comments": [{"owner": {"reputation": 3213, "user_id": 286094, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wvo2E.jpg?s=128&g=1", "display_name": "chunkyguy", "link": "https://stackoverflow.com/users/286094/chunkyguy"}, "edited": false, "score": 0, "creation_date": 1611777808, "post_id": 61100667, "comment_id": 116563028, "body": "I had a similar issue due to a file called Math.h in <code>llvm&#47;include&#47;llvm&#47;CodeGen&#47;PBQP&#47;Math.h</code> which gets indirectly referenced from cstdlib."}], "tags": [], "owner": {"reputation": 3624, "user_id": 820795, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/PKv6d.jpg?s=128&g=1", "display_name": "Gralex", "link": "https://stackoverflow.com/users/820795/gralex"}, "is_accepted": false, "score": 2, "last_activity_date": 1586348887, "creation_date": 1586348887, "answer_id": 61100667, "question_id": 58628377, "link": "https://stackoverflow.com/questions/58628377/catalina-c-using-cmath-headers-yield-error-no-member-named-signbit-in-th/61100667#61100667", "title": "Catalina C++: Using &lt;cmath&gt; headers yield error: no member named &#39;signbit&#39; in the global namespace", "body": "<p>I found that inside my project I have file <code>math.h</code>. After rename it the problem was disappear. Seams <code>cmath</code> include my file instead of system.</p>\n"}, {"comments": [{"owner": {"reputation": 875, "user_id": 331379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1eb73b0f6071b878e2333cd625199f31?s=128&d=identicon&r=PG", "display_name": "kkaefer", "link": "https://stackoverflow.com/users/331379/kkaefer"}, "edited": false, "score": 0, "creation_date": 1586886549, "post_id": 61187771, "comment_id": 108292106, "body": "I ran into this issue as well. It turns out that some <code>pkg-config</code> files (e.g. libcurl) from Homebrew add this path automatically, even if you have Xcode installed. This was fixed in Homebrew 2.2.13. More details in <a href=\"https://github.com/Homebrew/brew/issues/5068\" rel=\"nofollow noreferrer\">github.com/Homebrew/brew/issues/5068</a>; PR that fixes this is in <a href=\"https://github.com/Homebrew/brew/pull/7331\" rel=\"nofollow noreferrer\">github.com/Homebrew/brew/pull/7331</a>.  TL;DR: Update homebrew"}, {"owner": {"reputation": 21, "user_id": 10862023, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf58afa2b3434e09bcfd4f25b3145401?s=128&d=identicon&r=PG&f=1", "display_name": "pahjbo", "link": "https://stackoverflow.com/users/10862023/pahjbo"}, "reply_to_user": {"reputation": 875, "user_id": 331379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1eb73b0f6071b878e2333cd625199f31?s=128&d=identicon&r=PG", "display_name": "kkaefer", "link": "https://stackoverflow.com/users/331379/kkaefer"}, "edited": false, "score": 1, "creation_date": 1587014267, "post_id": 61187771, "comment_id": 108343294, "body": "Yes it was an old homebrew pkg_config for zlib that was still somehow lying around, that was causing this for me - despite having an up to date homebrew and not currently  having a zlib installed anyway"}, {"owner": {"reputation": 1661, "user_id": 1464861, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/utp7P.jpg?s=128&g=1", "display_name": "Jake Cobb", "link": "https://stackoverflow.com/users/1464861/jake-cobb"}, "edited": false, "score": 0, "creation_date": 1594749690, "post_id": 61187771, "comment_id": 111233759, "body": "Cause is same as @solodon mentioned.  Got this with MacOSX SDK as described here, picked up the SDK <code>usr&#47;include</code> include due to CMake <code>find_package</code> getting e.g. zlib from it.  Fix was to put the toolchain <code>usr&#47;include&#47;c++&#47;v1</code> folder onto the system includes (<code>-isystem</code> to clang, or <code>include_directories(SYSTEM ...)</code> in CMake). I deduced the toolchain directory off the CMAKE_LINKER path rather than hard-code it."}, {"owner": {"reputation": 2400, "user_id": 1103700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/365175c40356861c03385615db1adfdd?s=128&d=identicon&r=PG", "display_name": "WeakPointer", "link": "https://stackoverflow.com/users/1103700/weakpointer"}, "edited": false, "score": 0, "creation_date": 1603641660, "post_id": 61187771, "comment_id": 114094688, "body": "This answer was very helpful for me too. In my case, I had had such an explicit include in my Go CGO_CPPFLAGS environment variable, left over from a project that hasn&#39;t been updated to know where the Darwin stdio.h file could be found but llvm wasn&#39;t being used explicitly in that one, and I carried that over to a project that was already up to date with building from the latest Darwin but now, needing to have the LLVM c++/v1 files consistent with themselves, that explicit help of where to find Darwin headers was a problem. This was a huge help."}], "tags": [], "owner": {"reputation": 21, "user_id": 10862023, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf58afa2b3434e09bcfd4f25b3145401?s=128&d=identicon&r=PG&f=1", "display_name": "pahjbo", "link": "https://stackoverflow.com/users/10862023/pahjbo"}, "is_accepted": false, "score": 2, "last_activity_date": 1586780465, "creation_date": 1586780465, "answer_id": 61187771, "question_id": 58628377, "link": "https://stackoverflow.com/questions/58628377/catalina-c-using-cmath-headers-yield-error-no-member-named-signbit-in-th/61187771#61187771", "title": "Catalina C++: Using &lt;cmath&gt; headers yield error: no member named &#39;signbit&#39; in the global namespace", "body": "<p>I have just got this error when trying to compile gRPC after recently upgrading to 10.15.4 and Xcode 11.4 and I started to look at all the solutions offered (here and <a href=\"https://stackoverflow.com/questions/58278260/cant-compile-a-c-program-on-a-mac-after-upgrading-to-catalina-10-15\">Can&#39;t compile a C program on a Mac after upgrading to Catalina 10.15</a>), and tried a few of them (though not trying to recreate <code>/usr/include</code> as that would violate the separation that Apple were trying to create) - nothing seemed to work. </p>\n\n<p>I then looked closely at the actual complier invocations that the <code>make</code> process was producing and noticed that there was an explicit </p>\n\n<pre><code>-I/Library/Developer/CommandLineTools/SDKs/MacOSX10.15.sdk/usr/include\n</code></pre>\n\n<p>that was ultimately causing the includes to happen in the wrong order - removing this explicit include path allowed the compilation to succeed with a default install of catalina, Xcode and the Xcode command-line tools, as you would expect, no other tricks/compiler flags needed.</p>\n"}, {"comments": [{"owner": {"reputation": 8946, "user_id": 5675325, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/rM1RC.png?s=128&g=1", "display_name": "Tiago Martins Peres \u674e\u5927\u4ec1", "link": "https://stackoverflow.com/users/5675325/tiago-martins-peres-%e6%9d%8e%e5%a4%a7%e4%bb%81"}, "edited": false, "score": 0, "creation_date": 1588237007, "post_id": 61519060, "comment_id": 108823526, "body": "Hi Niloy Datta! I suggest you to edit this answer removing the question from this answer and include only what answers. If you have a question, then ask separately in the proper way questions should be asked in this community."}, {"owner": {"reputation": 156, "user_id": 5052841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/837c81e52d4aabb4f34103bfb1db411e?s=128&d=identicon&r=PG&f=1", "display_name": "Niloy Datta", "link": "https://stackoverflow.com/users/5052841/niloy-datta"}, "reply_to_user": {"reputation": 8946, "user_id": 5675325, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/rM1RC.png?s=128&g=1", "display_name": "Tiago Martins Peres \u674e\u5927\u4ec1", "link": "https://stackoverflow.com/users/5675325/tiago-martins-peres-%e6%9d%8e%e5%a4%a7%e4%bb%81"}, "edited": false, "score": 1, "creation_date": 1588393038, "post_id": 61519060, "comment_id": 108883593, "body": "@TiagoMartinsPeres\u674e\u5927\u4ec1, removed it. Thanks."}, {"owner": {"reputation": 687, "user_id": 6131111, "user_type": "registered", "profile_image": "https://graph.facebook.com/10207902467831997/picture?type=large", "display_name": "Hector Esteban", "link": "https://stackoverflow.com/users/6131111/hector-esteban"}, "edited": false, "score": 0, "creation_date": 1588699816, "post_id": 61519060, "comment_id": 108997576, "body": "Thanks man, it worked for me. Do you know a cleaner way to deal with this problem though?"}, {"owner": {"reputation": 156, "user_id": 5052841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/837c81e52d4aabb4f34103bfb1db411e?s=128&d=identicon&r=PG&f=1", "display_name": "Niloy Datta", "link": "https://stackoverflow.com/users/5052841/niloy-datta"}, "reply_to_user": {"reputation": 687, "user_id": 6131111, "user_type": "registered", "profile_image": "https://graph.facebook.com/10207902467831997/picture?type=large", "display_name": "Hector Esteban", "link": "https://stackoverflow.com/users/6131111/hector-esteban"}, "edited": false, "score": 0, "creation_date": 1588824170, "post_id": 61519060, "comment_id": 109050098, "body": "@VictorSanchez, still trying to figure it out. Will notify once I get it."}, {"owner": {"reputation": 687, "user_id": 6131111, "user_type": "registered", "profile_image": "https://graph.facebook.com/10207902467831997/picture?type=large", "display_name": "Hector Esteban", "link": "https://stackoverflow.com/users/6131111/hector-esteban"}, "edited": false, "score": 0, "creation_date": 1589409457, "post_id": 61519060, "comment_id": 109287270, "body": "The problem is that when using PCL I have to do the change but other times I just import cmath I have to reverse it"}, {"owner": {"reputation": 1744, "user_id": 5943539, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/ptjbp.jpg?s=128&g=1", "display_name": "JerryN", "link": "https://stackoverflow.com/users/5943539/jerryn"}, "edited": false, "score": 0, "creation_date": 1592508651, "post_id": 61519060, "comment_id": 110459209, "body": "see my comment above about how hard coding a path to math.h is a bad idea."}, {"owner": {"reputation": 191, "user_id": 1172210, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4d899937aede7736809092eb1469ab8?s=128&d=identicon&r=PG", "display_name": "burlyearly", "link": "https://stackoverflow.com/users/1172210/burlyearly"}, "edited": false, "score": 0, "creation_date": 1602766832, "post_id": 61519060, "comment_id": 113828307, "body": "Instead of 2, consider changing &lt;cmath&gt; to do <code>#include &quot;.&#47;math.h&quot;</code>. This avoids having to put the fully-qualified filename in there and still works (for me, at least)."}, {"owner": {"reputation": 42647, "user_id": 7328782, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/treJu.png?s=128&g=1", "display_name": "Cris Luengo", "link": "https://stackoverflow.com/users/7328782/cris-luengo"}, "edited": false, "score": 0, "creation_date": 1603317043, "post_id": 61519060, "comment_id": 114002672, "body": "No matter how I changed the include path order, I couldn&#39;t get &lt;cmath&gt; to load the right &lt;math.h&gt;. <code>#include &quot;.&#47;math.h&quot;</code> didn&#39;t work either. Only including the full path solved the issue for me. I hate that, it&#39;s going to give me headaches later on, but it&#39;s the only thing that worked for me. libclang must be doing something weird with the search path."}], "tags": [], "owner": {"reputation": 156, "user_id": 5052841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/837c81e52d4aabb4f34103bfb1db411e?s=128&d=identicon&r=PG&f=1", "display_name": "Niloy Datta", "link": "https://stackoverflow.com/users/5052841/niloy-datta"}, "is_accepted": false, "score": 8, "last_activity_date": 1603313808, "last_edit_date": 1603313808, "creation_date": 1588235258, "answer_id": 61519060, "question_id": 58628377, "link": "https://stackoverflow.com/questions/58628377/catalina-c-using-cmath-headers-yield-error-no-member-named-signbit-in-th/61519060#61519060", "title": "Catalina C++: Using &lt;cmath&gt; headers yield error: no member named &#39;signbit&#39; in the global namespace", "body": "<p>Using the command:</p>\n<pre class=\"lang-sh prettyprint-override\"><code>gcc -Wp,-v -E -\n</code></pre>\n<p>my #include &lt;...&gt; search sequence:</p>\n<pre class=\"lang-none prettyprint-override\"><code>/usr/local/include\n/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/lib/clang/10.0.1/include\n/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/include\n/Library/Developer/CommandLineTools/SDKs/MacOSX10.15.sdk/usr/include\n/Library/Developer/CommandLineTools/SDKs/MacOSX10.15.sdk/System/Library/Frameworks (framework directory)\n</code></pre>\n<p>The reason of #include error is described below:</p>\n<ul>\n<li><code>#include&lt;cmath&gt;</code> resides in <code>/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/include/c++/v1</code></li>\n<li>It includes <code>&lt;math.h&gt;</code>.</li>\n<li>It searches <code>/usr/local/include</code> directory as this is the first directory to search. There is a <code>math.h</code> in <code>/usr/local/include/c++/9.3.0/</code> directory</li>\n<li>It tries to use this.</li>\n<li>But expectation was to use the <code>math.h</code> of the same directory <code>/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/include/c++/v1</code></li>\n<li>The <code>math.h</code> of <code>/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/include/c++/v1</code> include <code>math.h</code> of <code>/usr/local/include</code> using <code>#include_next&lt;math.h&gt;</code></li>\n<li>As wrong <code>math.h</code> is included/linked with <code>/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/include/c++/v1/cmath</code>, the compilation error happens</li>\n</ul>\n<p>The fix:</p>\n<ol>\n<li><p>If we can alter the search order of <code>#include&lt;...&gt;</code> to search <code>/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/include/c++/v1</code> at first, it can be fixed.</p>\n</li>\n<li><p>Using <code>#include&lt;/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/include/c++/v1/math.h&gt;</code> instead of <code>&lt;math.h&gt;</code> in <code>/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/include/c++/v1/cmath</code></p>\n</li>\n</ol>\n<p>I have followed the #2 option and build is successful now!</p>\n<p>And thanks to <a href=\"https://stackoverflow.com/a/59780819/5052841\">solodon</a> for the detailed answer. I followed the answer to fix the issue.</p>\n"}, {"comments": [{"owner": {"reputation": 3302, "user_id": 596599, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/725d46214b219612268f76be8bb87d4f?s=128&d=identicon&r=PG", "display_name": "PacificSky", "link": "https://stackoverflow.com/users/596599/pacificsky"}, "edited": false, "score": 0, "creation_date": 1606967124, "post_id": 61526989, "comment_id": 115125949, "body": "This IS the fix. Other suggestions like CMAKE_OSX_SYSROOT or setting CPATH did not help."}], "tags": [], "owner": {"reputation": 35, "user_id": 13441976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0f5b2f6c187328f44d5a22118a3a7b55?s=128&d=identicon&r=PG&f=1", "display_name": "Lester Lo", "link": "https://stackoverflow.com/users/13441976/lester-lo"}, "is_accepted": false, "score": 4, "last_activity_date": 1588260211, "creation_date": 1588260211, "answer_id": 61526989, "question_id": 58628377, "link": "https://stackoverflow.com/questions/58628377/catalina-c-using-cmath-headers-yield-error-no-member-named-signbit-in-th/61526989#61526989", "title": "Catalina C++: Using &lt;cmath&gt; headers yield error: no member named &#39;signbit&#39; in the global namespace", "body": "<p>You may try to use the CommandLineTools SDK rather than the XCode.app SDK. </p>\n\n<p>I fix this problem when I compiling PointCloudLibrary (PCL)</p>\n\n<pre><code>#Check the current sdk\nxcrun --show-sdk-path\n\n#Change sdk\nsudo xcode-select -s /Library/Developer/CommandLineTools          #Using CommandLineTools SDK\nsudo xcode-select -s /Applications/Xcode.app/Contents/Developer   #Using XCode.app SDK\n</code></pre>\n\n<p>Also, reinstall XCode.app and CommandLineTools may help.</p>\n"}, {"tags": [], "owner": {"reputation": 26, "user_id": 11162324, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9dea8119d5ecf43b38d80f44e2a6f9c9?s=128&d=identicon&r=PG&f=1", "display_name": "Spikegee", "link": "https://stackoverflow.com/users/11162324/spikegee"}, "is_accepted": false, "score": 0, "last_activity_date": 1588511998, "last_edit_date": 1588511998, "creation_date": 1588511023, "answer_id": 61574900, "question_id": 58628377, "link": "https://stackoverflow.com/questions/58628377/catalina-c-using-cmath-headers-yield-error-no-member-named-signbit-in-th/61574900#61574900", "title": "Catalina C++: Using &lt;cmath&gt; headers yield error: no member named &#39;signbit&#39; in the global namespace", "body": "<p>Summary: in my case, the build script was using an older version of <code>ios-cmake</code> toolchain (2.1.2), and updating it to 3.1.2 fixed the cmath/math include issue.</p>\n\n<p>Adapting the nifty command proposed by @Ryan H. <code>gcc -Wp,-v -E -</code> for my case (clang, c++, iOs target) </p>\n\n<pre><code>clang -x c++ -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS13.4.sdk -Wp, -v -E -\n</code></pre>\n\n<p>yields on two Catalina including a virgin one where only tool ever installed is XCode 11.14.1:</p>\n\n<pre><code> clang -cc1 version 11.0.3 (clang-1103.0.32.59) default target x86_64-apple-darwin19.4.0\nignoring nonexistent directory \"/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS13.4.sdk/usr/include/c++/v1\"\nignoring nonexistent directory \"/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS13.4.sdk/usr/local/include\"\nignoring nonexistent directory \"/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS13.4.sdk/Library/Frameworks\"\n#include \"...\" search starts here:\n#include &lt;...&gt; search starts here:\n /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/../include/c++/v1\n /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/lib/clang/11.0.3/include\n /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS13.4.sdk/usr/include\n /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/include\n /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS13.4.sdk/System/Library/Frameworks (framework directory)\nEnd of search list.\n</code></pre>\n\n<p>So the correct include path is the first non-ignored one, everything should work OK, but it didn't. It appears the issue came from an additional include command appended to the compilation call by the ios-cmake toolchain:</p>\n\n<pre><code>CompileC /Users/&lt;...&gt;/build.Release.ios/&lt;...&gt;.o &lt;...&gt;.cpp normal arm64 c++ com.apple.compilers.llvm.clang.1_0.compiler\n-Isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS13.4.sdk &lt;...&gt;\n -I/Users/&lt;...&gt;/Build_iOS/build.Release.ios/build.arm/Binaries/Release/include\n -Isystem /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS13.4.sdk/usr/include\n -I/Users/&lt;...&gt;/Build_iOS/build.Release.ios/build.arm/src/&lt;...&gt;.build/Release-iphoneos/&lt;...&gt;/DerivedSources/arm64\n...\n</code></pre>\n\n<p>The culprit was the <code>-Isystem ...</code> line, which will cause the <code>#include &lt;math&gt;</code> line in the cmath file to end up loading the wrong file.\nAfter much fiddling around trying to fix the cmake scripts, I noticed the older version of ios-cmake, and updating it had the 'only' effect of removing the unwanted <code>-Isystem</code> line - everything else was almost the same (apart from a few compiler option)</p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 3682709, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/201d19eaa16a75ddab76a8563af05283?s=128&d=identicon&r=PG", "display_name": "Derek Wang", "link": "https://stackoverflow.com/users/3682709/derek-wang"}, "is_accepted": false, "score": 1, "last_activity_date": 1596916398, "last_edit_date": 1596916398, "creation_date": 1591586838, "answer_id": 62254529, "question_id": 58628377, "link": "https://stackoverflow.com/questions/58628377/catalina-c-using-cmath-headers-yield-error-no-member-named-signbit-in-th/62254529#62254529", "title": "Catalina C++: Using &lt;cmath&gt; headers yield error: no member named &#39;signbit&#39; in the global namespace", "body": "<p>@mkl 's <a href=\"https://stackoverflow.com/a/58670035/3682709\">solution</a> helps to fix the similar issue on my side. Thanks.</p>\n<h1>Issue and solution on my side</h1>\n<p>I got the same issue to compile a project on basis of <a href=\"https://github.com/PointCloudLibrary/pcl\" rel=\"nofollow noreferrer\">PCL</a>. The solution is to set CommandLineTools SDK CMAKE_OSX_SYSROOT.</p>\n<p>I tried @mkl's solution to do it in CMakeLists.txt, it doesn't work. So that I can only set it by <code>cmake .. -DCMAKE_OSX_SYSROOT=&quot;/Library/Developer/CommandLineTools/SDKs/MacOSX10.14.sdk&quot;</code></p>\n<p><strong>Another thing to mention:</strong> there are two versions of command line SDKs in my MacOS:</p>\n<pre><code>~ \u00bb /Library/Developer/CommandLineTools/SDKs/MacOSX\n/Library/Developer/CommandLineTools/SDKs/MacOSX\nMacOSX.sdk/       MacOSX10.14.sdk@\n</code></pre>\n<p><code>xcrun --show-sdk-path</code> gives out the default one, but actually only MacOSX10.14.sdk works on my side.</p>\n<p>Discussion of the similar issue in PCL's repo:\n<a href=\"https://github.com/PointCloudLibrary/pcl/issues/2601#issuecomment-621889211\" rel=\"nofollow noreferrer\">https://github.com/PointCloudLibrary/pcl/issues/2601#issuecomment-621889211</a></p>\n<h1>Difference between SDKs</h1>\n<p>I don't know much about cmake and SDKs in c++. The difference I noticed in cmake building log from different SDKs as following:</p>\n<p><code>/Library/Developer/CommandLineTools/SDKs/MacOSX</code>:</p>\n<pre class=\"lang-sh prettyprint-override\"><code>-- Found OpenGL: /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/System/Library/Frameworks/OpenGL.framework\n</code></pre>\n<p><code>/Library/Developer/CommandLineTools/SDKs/MacOSX10.14.sdk</code></p>\n<pre class=\"lang-sh prettyprint-override\"><code>-- Found OpenGL: /Library/Developer/CommandLineTools/SDKs/MacOSX10.14.sdk/System/Library/Frameworks/OpenGL.framework\n</code></pre>\n<p>On default:</p>\n<pre class=\"lang-sh prettyprint-override\"><code>-- Found OpenGL: /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.15.sdk/System/Library/Frameworks/OpenGL.framework\n</code></pre>\n<p>Seems like the issue happens on SDK choice for Opengl.</p>\n<h1>How to do it in CMakeLists.txt?</h1>\n<p>Appreciated it if anyone could advice.</p>\n"}, {"tags": [], "owner": {"reputation": 309, "user_id": 6617146, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4fe843a8d1f235e1d81c764312914303?s=128&d=identicon&r=PG&f=1", "display_name": "mini yang", "link": "https://stackoverflow.com/users/6617146/mini-yang"}, "is_accepted": false, "score": 3, "last_activity_date": 1602938978, "creation_date": 1602938978, "answer_id": 64402656, "question_id": 58628377, "link": "https://stackoverflow.com/questions/58628377/catalina-c-using-cmath-headers-yield-error-no-member-named-signbit-in-th/64402656#64402656", "title": "Catalina C++: Using &lt;cmath&gt; headers yield error: no member named &#39;signbit&#39; in the global namespace", "body": "<p>Reinstalling Xcode, command tools and homebrew,\nand</p>\n<p><code>sudo rm -rf /usr/local/include</code></p>\n<p>fixed this issue for me.</p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 8992050, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de84a3dad60c9ca49b6f3ff5e3b2372c?s=128&d=identicon&r=PG&f=1", "display_name": "Aaron Holtzman", "link": "https://stackoverflow.com/users/8992050/aaron-holtzman"}, "is_accepted": false, "score": 1, "last_activity_date": 1607534704, "creation_date": 1607534704, "answer_id": 65221808, "question_id": 58628377, "link": "https://stackoverflow.com/questions/58628377/catalina-c-using-cmath-headers-yield-error-no-member-named-signbit-in-th/65221808#65221808", "title": "Catalina C++: Using &lt;cmath&gt; headers yield error: no member named &#39;signbit&#39; in the global namespace", "body": "<p>I finally figured out why this was affecting only some people. When Catalina came out, they stopped shipping the command line tools package with the /usr headers. A common workaround was to use CPATH to point to the system headers in your bashrc like this:</p>\n<pre><code>export CPATH=`xcrun --show-sdk-path`/usr/include\n</code></pre>\n<p>However this appears to mess up the C++ include path ordering for cmath and math.h (as found in the other answers). The good news is that it seems that current homebrew builds of clang and gcc don't need CPATH set anymore to find the system headers. So you can just remove the CPATH override and be done with it.</p>\n"}, {"comments": [{"owner": {"reputation": 1233, "user_id": 12451243, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c6d2d4a63ead1b2bc3c18681bf70809?s=128&d=identicon&r=PG&f=1", "display_name": "zkoza", "link": "https://stackoverflow.com/users/12451243/zkoza"}, "edited": false, "score": 0, "creation_date": 1611443998, "post_id": 65864108, "comment_id": 116454346, "body": "Your method is easy, but dangerous, because it  breaks the compiler system (OP may need it for other purposes than Catalina, and will certainly very soon forget about system changes he made). Moreover, it may work only until the next system upgrade. I would not touch the files that come with a compiler, and <code>&#47;usr&#47;local&#47;include&#47;math.h</code> is one of such files."}], "tags": [], "owner": {"reputation": 1, "user_id": 6911817, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35ba03c2a41f261bd06ecc4763e317da?s=128&d=identicon&r=PG&f=1", "display_name": "97littleleaf11", "link": "https://stackoverflow.com/users/6911817/97littleleaf11"}, "is_accepted": false, "score": -1, "last_activity_date": 1611434068, "creation_date": 1611434068, "answer_id": 65864108, "question_id": 58628377, "link": "https://stackoverflow.com/questions/58628377/catalina-c-using-cmath-headers-yield-error-no-member-named-signbit-in-th/65864108#65864108", "title": "Catalina C++: Using &lt;cmath&gt; headers yield error: no member named &#39;signbit&#39; in the global namespace", "body": "<p>The compiler tries to find <code>math.h</code> and usually it will find it under <code>/usr/local/include</code> first and then get a wrong one.</p>\n<p>An easy way to fix it is to rename it using: <code>mv /usr/local/include/math.h  /usr/local/include/math_old.h</code>. Then the compiler would try the following include directories.</p>\n"}], "owner": {"reputation": 371, "user_id": 12129612, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-V-Mk3QG-ShU/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfTeeyFEy3HU8D0WqgV5rf2eLAIaA/photo.jpg?sz=128", "display_name": "roman Sztergbaum", "link": "https://stackoverflow.com/users/12129612/roman-sztergbaum"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 14299, "favorite_count": 8, "answer_count": 13, "score": 33, "last_activity_date": 1611434068, "creation_date": 1572448049, "last_edit_date": 1572690259, "question_id": 58628377, "link": "https://stackoverflow.com/questions/58628377/catalina-c-using-cmath-headers-yield-error-no-member-named-signbit-in-th", "title": "Catalina C++: Using &lt;cmath&gt; headers yield error: no member named &#39;signbit&#39; in the global namespace", "body": "<p>After upgrading to Catalina from Mojave, Setuping: /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.15.sdk in the env.</p>\n\n<p>I'm unable to compile a program that use <code>&lt;cmath&gt;</code> header.</p>\n\n<p>I tried changing CFLAGS, CCFLAGS, CXXFLAGS to point to the MacOSSDK Location that change nothing</p>\n\n<pre><code>Scanning dependencies of target OgreMain\n/Applications/Xcode.app/Contents/Developer/usr/bin/make -f OgreMain/CMakeFiles/OgreMain.dir/build.make OgreMain/CMakeFiles/OgreMain.dir/build\n[  0%] Building CXX object OgreMain/CMakeFiles/OgreMain.dir/src/OgreASTCCodec.cpp.o\ncd /Users/roman/Downloads/ogre-1.12.2/build/OgreMain &amp;&amp; /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/c++  -DOgreMain_EXPORTS -D__ASSERT_MACROS_DEFINE_VERSIONS_WITHOUT_UNDERSCORES=0 -I/Users/roman/Downloads/ogre-1.12.2/OgreMain/src/OSX -I/Users/roman/Downloads/ogre-1.12.2/OgreMain/include/Threading -I/Users/roman/Downloads/ogre-1.12.2/OgreMain/src -I/Users/roman/Downloads/ogre-1.12.2/build/Dependencies/include -I/Users/roman/Downloads/ogre-1.12.2/OgreMain/include -I/Users/roman/Downloads/ogre-1.12.2/build/include -I/Users/roman/Downloads/ogre-1.12.2/OgreMain -isystem /usr/local/include  -Wall -Winit-self -Wcast-qual -Wwrite-strings -Wextra -Wundef -Wmissing-declarations -Wno-unused-parameter -Wshadow -Wno-missing-field-initializers -Wno-long-long -Wno-inconsistent-missing-override  -msse -O3 -DNDEBUG -arch x86_64 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.15.sdk -fPIC -fvisibility=hidden -fvisibility-inlines-hidden   -std=c++11 -o CMakeFiles/OgreMain.dir/src/OgreASTCCodec.cpp.o -c /Users/roman/Downloads/ogre-1.12.2/OgreMain/src/OgreASTCCodec.cpp\nIn file included from /Users/roman/Downloads/ogre-1.12.2/OgreMain/src/OgreASTCCodec.cpp:29:\nIn file included from /Users/roman/Downloads/ogre-1.12.2/OgreMain/src/OgreStableHeaders.h:40:\nIn file included from /Users/roman/Downloads/ogre-1.12.2/OgreMain/include/OgrePrerequisites.h:309:\nIn file included from /Users/roman/Downloads/ogre-1.12.2/OgreMain/include/OgreStdHeaders.h:10:\n/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/../include/c++/v1/cmath:314:9: error: no member named 'signbit' in the global namespace\nusing ::signbit;\n      ~~^\n/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/../include/c++/v1/cmath:315:9: error: no member named 'fpclassify' in the global namespace\nusing ::fpclassify;\n      ~~^\n/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/../include/c++/v1/cmath:316:9: error: no member named 'isfinite' in the global namespace; did you mean 'finite'?\nusing ::isfinite;\n</code></pre>\n\n<p>for example the macro: <code>isless</code> is present in the global namespace and on my computer:</p>\n\n<pre><code>\u279c cat math.h | grep \"isless\"\n\n#define isless(x, y) __builtin_isless((x),(y))\n#define islessequal(x, y) __builtin_islessequal((x),(y))\n#define islessgreater(x, y) __builtin_islessgreater((x),(y))\n\u279c  pwd\n/usr/local/include\n\u279c\n</code></pre>\n\n<p>Even the cmath header include it:</p>\n\n<pre><code>\u279c cat /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/../include/c++/v1/cmath | grep \"math.h\"\n#include &lt;math.h&gt;\n</code></pre>\n\n<p>And my command line have the option <code>-isystem /usr/local/include</code></p>\n\n<p>This should work...</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 56858, "user_id": 131930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91536fe27d32713b8a154a0bf42f6748?s=128&d=identicon&r=PG", "display_name": "Jeremy Friesner", "link": "https://stackoverflow.com/users/131930/jeremy-friesner"}, "edited": false, "score": 4, "creation_date": 1572448086, "post_id": 58628349, "comment_id": 103564143, "body": "Probably <code>xrstring test_var(std_var.c_str());</code>"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1572448192, "post_id": 58628349, "comment_id": 103564215, "body": "You can&#39;t implicitly convert a <code>std::string</code> object to a pointer to <code>char</code> (const or not), and you have never been able to do that. You need to explicitly do it using the <a href=\"https://en.cppreference.com/w/cpp/string/basic_string/c_str\" rel=\"nofollow noreferrer\"><code>c_str</code></a> function. This should be well known to all who studied a little."}, {"owner": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 0, "creation_date": 1572448682, "post_id": 58628349, "comment_id": 103564490, "body": "Note that <code>xrstring test_var = std_var.c_str();</code> the <code>test_var</code> is only valid for as long as the life span of <code>std_var</code>, and only as long as <code>std_var</code> is not modified.  If <code>test_var</code> needs to live longer than that, <code>std::strdup</code> will make a copy, but then you need to <code>std::free</code> that memory when done with <code>test_var</code>."}, {"owner": {"reputation": 33, "user_id": 12292322, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a22b61e97716fe7470510e989f8069d?s=128&d=identicon&r=PG&f=1", "display_name": "Lu&#237;s F.", "link": "https://stackoverflow.com/users/12292322/lu%c3%ads-f"}, "edited": false, "score": 0, "creation_date": 1572448693, "post_id": 58628349, "comment_id": 103564496, "body": "Thanks everyone, c_str work. However, if std_var has special characters, test_var becomes some weird characters. How can I fix this?"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1572448716, "post_id": 58628349, "comment_id": 103564505, "body": "<i>This is a custom function, I am programming TOOLKIT for Creo Parametric.</i> -- I can&#39;t think of a single &quot;toolkit&quot; that has their own string type to not be able to take a <code>char *</code> to a buffer of characters.  The <code>std::string::c_str()</code> function provides such a pointer."}], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 12292322, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a22b61e97716fe7470510e989f8069d?s=128&d=identicon&r=PG&f=1", "display_name": "Lu&#237;s F.", "link": "https://stackoverflow.com/users/12292322/lu%c3%ads-f"}, "edited": false, "score": 0, "creation_date": 1572449163, "post_id": 58628624, "comment_id": 103564751, "body": "Thanks, that works. However, if std_var has special characters, test_var becomes some weird characters. How can I fix this?"}, {"owner": {"reputation": 415, "user_id": 7865858, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-nN0e1OsYUmE/AAAAAAAAAAI/AAAAAAAAANg/Ar7hJOecy0c/photo.jpg?sz=128", "display_name": "MrProgrammer", "link": "https://stackoverflow.com/users/7865858/mrprogrammer"}, "reply_to_user": {"reputation": 33, "user_id": 12292322, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a22b61e97716fe7470510e989f8069d?s=128&d=identicon&r=PG&f=1", "display_name": "Lu&#237;s F.", "link": "https://stackoverflow.com/users/12292322/lu%c3%ads-f"}, "edited": false, "score": 0, "creation_date": 1572449271, "post_id": 58628624, "comment_id": 103564818, "body": "Can you show us one such case here (a std_var with special characters and what it&#39;s test_var looks like)?"}, {"owner": {"reputation": 33, "user_id": 12292322, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a22b61e97716fe7470510e989f8069d?s=128&d=identicon&r=PG&f=1", "display_name": "Lu&#237;s F.", "link": "https://stackoverflow.com/users/12292322/lu%c3%ads-f"}, "edited": false, "score": 0, "creation_date": 1572450931, "post_id": 58628624, "comment_id": 103565785, "body": "I was trying to write in a logfile to check if I was retrieving data correctly from my .csv file. I kept getting weird results whenever I started my program. I figured out through my notepad++ that it was sometimes encoding in ANSI and sometimes UTF-8.  In ANSI It comes out good &quot;Constru&#231;&#227;o&quot;, in UTF-8, instead of a &quot;&#231;&#227;&quot; i have 2 black rectangles with xE7 and xE3  (can&#39;t copy it here). When I use this string in my program, I get this: \ue08b\u0d97\u7ff7."}, {"owner": {"reputation": 415, "user_id": 7865858, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-nN0e1OsYUmE/AAAAAAAAAAI/AAAAAAAAANg/Ar7hJOecy0c/photo.jpg?sz=128", "display_name": "MrProgrammer", "link": "https://stackoverflow.com/users/7865858/mrprogrammer"}, "reply_to_user": {"reputation": 33, "user_id": 12292322, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a22b61e97716fe7470510e989f8069d?s=128&d=identicon&r=PG&f=1", "display_name": "Lu&#237;s F.", "link": "https://stackoverflow.com/users/12292322/lu%c3%ads-f"}, "edited": false, "score": 0, "creation_date": 1572452059, "post_id": 58628624, "comment_id": 103566437, "body": "I guess, you might want to take a look at <code>wchar_t</code> and <code>wstring</code> to get the Unicode support in C++ and define <code>typedef const wchar_t *xrstring;</code> instead. I am not aware of any implementations of C++ where normal <code>char</code> and <code>string</code> are interpreted as UTF-8 by the compiler."}], "tags": [], "owner": {"reputation": 415, "user_id": 7865858, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-nN0e1OsYUmE/AAAAAAAAAAI/AAAAAAAAANg/Ar7hJOecy0c/photo.jpg?sz=128", "display_name": "MrProgrammer", "link": "https://stackoverflow.com/users/7865858/mrprogrammer"}, "is_accepted": true, "score": 2, "last_activity_date": 1572448849, "creation_date": 1572448849, "answer_id": 58628624, "question_id": 58628349, "link": "https://stackoverflow.com/questions/58628349/how-to-convert-a-stdstring-into-a-different-class-of-string/58628624#58628624", "title": "How to convert a std::string into a different class of string?", "body": "<p>The <code>xrstring</code> you speak of is <code>const char *</code> or a C-style string.</p>\n\n<p><code>std::string</code> comes with a convenient function to convert a <code>std::string</code> to C-style string - <code>std::string::c_str()</code></p>\n\n<p>Hence, here is the right way to do what you want to do:</p>\n\n<pre><code>xrstring test_var = std_var.c_str();\n</code></pre>\n\n<p>Also, there does not exist a direct <code>const char *</code> to <code>std::string</code> cast. The Standard Library string is not a mere pointer-to-char. It contains other information like string-length as well.</p>\n\n<p>I personally would recommend you to declare <code>xstring</code> as a class if you want to do a conversion like <code>xrstring test_var = xrstring(std_var);</code>, and make a suitable constructor for the conversion.</p>\n"}], "owner": {"reputation": 33, "user_id": 12292322, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a22b61e97716fe7470510e989f8069d?s=128&d=identicon&r=PG&f=1", "display_name": "Lu&#237;s F.", "link": "https://stackoverflow.com/users/12292322/lu%c3%ads-f"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 110, "favorite_count": 1, "accepted_answer_id": 58628624, "answer_count": 1, "score": 2, "last_activity_date": 1572448849, "creation_date": 1572447944, "question_id": 58628349, "link": "https://stackoverflow.com/questions/58628349/how-to-convert-a-stdstring-into-a-different-class-of-string", "title": "How to convert a std::string into a different class of string?", "body": "<p>I read data from a file and I wanted to use on of its values in a function. This is a custom function, I am programming TOOLKIT for Creo Parametric.</p>\n\n<p>Well, that function is expecting a 'xrstring' but I have a std::string.</p>\n\n<p>How to I convert one into another?</p>\n\n<p>I've tried writing xrstring test_var = xrstring(std_var);</p>\n\n<p>And it doesn't work.</p>\n\n<pre><code>//definition of xrstring\n\ntypedef const char          *xrstring;\n#define xstringuninit   ((xrstring) 2)\n#define xstringnil      ((const char *) 1)\n#define xwstringnil     ((const wchar_t *) 1)\n#define xwstringuninit     ((const wchar_t *) 2)\n\n//definition of pfcCreateStringParamValue\n\npfcParamValue_ptr        pfcCreateStringParamValue (xrstring Value);\n</code></pre>\n\n<p>error C2664: 'pfcParamValue_ptr pfcCreateStringParamValue(xrstring)': cannot convert argument 1 from 'std::string' to 'xrstring'</p>\n"}, {"tags": ["c++", "move-semantics"], "comments": [{"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 7, "creation_date": 1572447779, "post_id": 58628213, "comment_id": 103563945, "body": "<code>Test1</code> contains only a reference to the temporary string that was constructed as argument to its constructor, which died as soon as said constructor finished and left said reference dangling."}, {"owner": {"reputation": 13, "user_id": 11791628, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/075082a07d0bc3dd09a1a380e00f9cf7?s=128&d=identicon&r=PG&f=1", "display_name": "johnjakal", "link": "https://stackoverflow.com/users/11791628/johnjakal"}, "reply_to_user": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1572448028, "post_id": 58628213, "comment_id": 103564118, "body": "@Quentin Oh, Yeah right!"}, {"owner": {"reputation": 4537, "user_id": 1361901, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ea140060e08a193f5814b0ebd2eb6ef?s=128&d=identicon&r=PG", "display_name": "Joseph Larson", "link": "https://stackoverflow.com/users/1361901/joseph-larson"}, "edited": false, "score": 0, "creation_date": 1572448767, "post_id": 58628213, "comment_id": 103564520, "body": "This may not be any help, and I&#39;m not an expert on C++ move semantics, but when I got back into C++, I created a project on github while I worked some of it out. It&#39;s available as <a href=\"https://github.com/jplflyer/CPP-Move-Semantics\" rel=\"nofollow noreferrer\">github.com/jplflyer/CPP-Move-Semantics</a>. I can&#39;t vouch I&#39;m doing everything optimally, however."}, {"owner": {"reputation": 20522, "user_id": 11941443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f27a880243178eedf3abdab24898b335?s=128&d=identicon&r=PG&f=1", "display_name": "walnut", "link": "https://stackoverflow.com/users/11941443/walnut"}, "edited": false, "score": 0, "creation_date": 1572448941, "post_id": 58628213, "comment_id": 103564613, "body": "How did you measure allocations? Even without enabling compiler optimizations, both GCC and Clang do no dynamic memory allocation for your code (short string optimization): <a href=\"https://godbolt.org/z/UIVbF6\" rel=\"nofollow noreferrer\">godbolt.org/z/UIVbF6</a> And even with longer strings, both lines in <code>main</code> make only one allocation: <a href=\"https://godbolt.org/z/Kttrus\" rel=\"nofollow noreferrer\">godbolt.org/z/Kttrus</a>"}, {"owner": {"reputation": 13, "user_id": 11791628, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/075082a07d0bc3dd09a1a380e00f9cf7?s=128&d=identicon&r=PG&f=1", "display_name": "johnjakal", "link": "https://stackoverflow.com/users/11791628/johnjakal"}, "edited": false, "score": 0, "creation_date": 1572450362, "post_id": 58628213, "comment_id": 103565455, "body": "No they don&#39;t. I am using msvc 2019: in degug build.                                                                                             make a static var: static unit32_t allocCount = 0;                                                                   void* operator new(size_t size)                                                                                { std::cout&lt;&lt;&quot;alloc count &quot;&lt;&lt;++allocCount;                                                             return malloc(size);}"}, {"owner": {"reputation": 20522, "user_id": 11941443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f27a880243178eedf3abdab24898b335?s=128&d=identicon&r=PG&f=1", "display_name": "walnut", "link": "https://stackoverflow.com/users/11941443/walnut"}, "edited": false, "score": 0, "creation_date": 1572450864, "post_id": 58628213, "comment_id": 103565756, "body": "@johnjakal I don&#39;t have any means to test msvc locally, however pasting the code from the links I gave above into <a href=\"https://rextester.com/l/cpp_online_compiler_visual\" rel=\"nofollow noreferrer\">rextester.com/l/cpp_online_compiler_visual</a> (which supposedly uses msvc, although a different version) I get the same results. I don&#39;t know flags I should add to correctly mimic debug build mode."}, {"owner": {"reputation": 20522, "user_id": 11941443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f27a880243178eedf3abdab24898b335?s=128&d=identicon&r=PG&f=1", "display_name": "walnut", "link": "https://stackoverflow.com/users/11941443/walnut"}, "edited": false, "score": 0, "creation_date": 1572450923, "post_id": 58628213, "comment_id": 103565783, "body": "&quot;<i>No they don&#39;t.</i>&quot;: They do, at least on gcc and clang. Do you disagree with how I measured it? It should also be at most one allocation, because no copy constructors or modification methods are called in your code. Therefore the only allocation is in the initially constructed <code>std::string</code> for the <code>Test1</code>/<code>Test2</code> constructor parameters. The move constructor for the member should not need to make dynamic allocations."}], "owner": {"reputation": 13, "user_id": 11791628, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/075082a07d0bc3dd09a1a380e00f9cf7?s=128&d=identicon&r=PG&f=1", "display_name": "johnjakal", "link": "https://stackoverflow.com/users/11791628/johnjakal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 86, "favorite_count": 2, "answer_count": 0, "score": 0, "last_activity_date": 1572448679, "creation_date": 1572447565, "last_edit_date": 1572448679, "question_id": 58628213, "link": "https://stackoverflow.com/questions/58628213/which-class-is-better-and-why", "title": "Which Class is better and why", "body": "<p>I am looking into move-semantics, I want to know which class is better and why. I tried counting the number of allocations in both(by overloading new operator).\nt1 will allocate only once, t2 will allocate twice.\nBy the looks of it, t1 seems more optimized but does this has some shortcomings.</p>\n\n<pre><code>class Test1\n{\n    std::string&amp;&amp; s;  \npublic:\n       Test1(std::string&amp;&amp; n) \n   :s(std::move(n)) {} \n};\n\n   class Test2\n{\n     std::string s;\npublic:\n   Test2(std::string&amp;&amp; n) \n   :s(std::move(n)) {} \n};\n\n\nint main()\n{\n   Test1 t1(\"sdfds\");\n   Test2 t2(\"SDf\");     \n    }\n</code></pre>\n"}, {"tags": ["c#", "c++", "vulkan"], "comments": [{"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1572448787, "post_id": 58628192, "comment_id": 103564531, "body": "Are you using C#, C++ or C? Also, what do your validation layers tell you?"}, {"owner": {"reputation": 17, "user_id": 5432947, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-WJnYt4KeHYU/AAAAAAAAAAI/AAAAAAAAAKI/W_YPWc8mFD0/photo.jpg?sz=128", "display_name": "Sainst", "link": "https://stackoverflow.com/users/5432947/sainst"}, "reply_to_user": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1572455639, "post_id": 58628192, "comment_id": 103568312, "body": "I am using c# with a binding for the c++ libraries. The validation layers say absolutely nothing. The segv happens inside the validation layer. If I disable the validation layers the segv happens inside the driver instead."}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1572455870, "post_id": 58628192, "comment_id": 103568433, "body": "&quot;<i>I am using c# with a binding for the c++ libraries.</i>&quot; Is any of the code you&#39;ve shown C#? And if so, which is which language?"}, {"owner": {"reputation": 17, "user_id": 5432947, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-WJnYt4KeHYU/AAAAAAAAAAI/AAAAAAAAAKI/W_YPWc8mFD0/photo.jpg?sz=128", "display_name": "Sainst", "link": "https://stackoverflow.com/users/5432947/sainst"}, "reply_to_user": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1572457896, "post_id": 58628192, "comment_id": 103569364, "body": "I have added labels now. The last bit is my code"}], "answers": [{"tags": [], "owner": {"reputation": 17, "user_id": 5432947, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-WJnYt4KeHYU/AAAAAAAAAAI/AAAAAAAAAKI/W_YPWc8mFD0/photo.jpg?sz=128", "display_name": "Sainst", "link": "https://stackoverflow.com/users/5432947/sainst"}, "is_accepted": false, "score": 0, "last_activity_date": 1572516663, "creation_date": 1572516663, "answer_id": 58640991, "question_id": 58628192, "link": "https://stackoverflow.com/questions/58628192/vkcreategraphicspipelines-causes-segv/58640991#58640991", "title": "vkCreateGraphicsPipelines causes segv", "body": "<p>The crash was caused by me passing in the vertex shader module into both the slot for the vertex shader and fragment shader.</p>\n\n<pre class=\"lang-cs prettyprint-override\"><code>VkPipelineShaderStageCreateInfo[] shaderStages = new VkPipelineShaderStageCreateInfo[2];\n            shaderStages[0] = VkPipelineShaderStageCreateInfo.New();\n            shaderStages[0].flags = (uint)VkShaderStageFlags.Vertex;\n            shaderStages[0].module = vs;\n            byte[] vsFuncName = Encoding.UTF8.GetBytes(\"main\" + char.MinValue);\n            fixed (byte* ptr = &amp;(vsFuncName[0]))\n                shaderStages[0].pName = ptr;\n\n            shaderStages[1] = VkPipelineShaderStageCreateInfo.New();\n            shaderStages[1].flags = (uint)VkShaderStageFlags.Fragment;\n////////////////////////////////////////////////////////////////////////////\n            shaderStages[1].module = vs;//This should be fs not vs\n////////////////////////////////////////////////////////////////////////////\n            byte[] fsFuncName = Encoding.UTF8.GetBytes(\"main\" + char.MinValue);\n            fixed (byte* ptr = &amp;(fsFuncName[0]))\n                shaderStages[1].pName = ptr;\n\n            fixed (VkPipelineShaderStageCreateInfo* ptr = &amp;(shaderStages[0]))\n                pCreateInfo.pStages = ptr;\n            pCreateInfo.stageCount = 2;\n</code></pre>\n"}], "owner": {"reputation": 17, "user_id": 5432947, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-WJnYt4KeHYU/AAAAAAAAAAI/AAAAAAAAAKI/W_YPWc8mFD0/photo.jpg?sz=128", "display_name": "Sainst", "link": "https://stackoverflow.com/users/5432947/sainst"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 314, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1572519874, "creation_date": 1572447479, "last_edit_date": 1572519874, "question_id": 58628192, "link": "https://stackoverflow.com/questions/58628192/vkcreategraphicspipelines-causes-segv", "title": "vkCreateGraphicsPipelines causes segv", "body": "<p>I've been following a coding stream and translating to c# as I go.</p>\n\n<p>When I try to create a VkPipeline with the vkCreateGraphicsPipelines function the program crashes because of a segv.</p>\n\n<p>I have the gdb backtrace but I don't know how to interpret it.</p>\n\n<pre><code>Thread 1 \"VulkanRen\" received signal SIGSEGV, Segmentation fault.\n0x00007fff56fa1cad in StatelessValidation::validate_struct_type_array&lt;VkGraphicsPipelineCreateInfo&gt; (count_required_vuid=0x7fff5715b558 \"VUID-vkCreateGraphicsPipelines-createInfoCount-arraylength\", \n    param_vuid=0x7fff5715bb80 \"VUID-vkCreateGraphicsPipelines-pCreateInfos-parameter\", stype_vuid=0x7fff57054bc0 \"VUID-VkGraphicsPipelineCreateInfo-sType-sType\", arrayRequired=true, countRequired=true, \n    sType=VK_STRUCTURE_TYPE_GRAPHICS_PIPELINE_CREATE_INFO, array=0xf1c038196785ba00, count=&lt;optimized out&gt;, sTypeName=0x7fff571a67a0 \"VK_STRUCTURE_TYPE_GRAPHICS_PIPELINE_CREATE_INFO\", arrayName=..., countName=..., \n    apiName=0x7fff571a052c \"vkCreateGraphicsPipelines\", this=&lt;optimized out&gt;) at /root/sdk-build/1.1.121.1/source/Vulkan-ValidationLayers/layers/stateless_validation.h:318\n318 /root/sdk-build/1.1.121.1/source/Vulkan-ValidationLayers/layers/stateless_validation.h: No such file or directory.\nMissing separate debuginfos, use: dnf debuginfo-install dotnet-hostfxr-3.0-3.0.0-1.x86_64 dotnet-runtime-3.0-3.0.0-1.x86_64\n(gdb) backtrace\n#0  0x00007fff56fa1cad in StatelessValidation::validate_struct_type_array&lt;VkGraphicsPipelineCreateInfo&gt; (count_required_vuid=0x7fff5715b558 \"VUID-vkCreateGraphicsPipelines-createInfoCount-arraylength\", \n    param_vuid=0x7fff5715bb80 \"VUID-vkCreateGraphicsPipelines-pCreateInfos-parameter\", stype_vuid=0x7fff57054bc0 \"VUID-VkGraphicsPipelineCreateInfo-sType-sType\", arrayRequired=true, countRequired=true, \n    sType=VK_STRUCTURE_TYPE_GRAPHICS_PIPELINE_CREATE_INFO, array=0xf1c038196785ba00, count=&lt;optimized out&gt;, sTypeName=0x7fff571a67a0 \"VK_STRUCTURE_TYPE_GRAPHICS_PIPELINE_CREATE_INFO\", arrayName=..., countName=..., \n    apiName=0x7fff571a052c \"vkCreateGraphicsPipelines\", this=&lt;optimized out&gt;) at /root/sdk-build/1.1.121.1/source/Vulkan-ValidationLayers/layers/stateless_validation.h:318\n#1  StatelessValidation::PreCallValidateCreateGraphicsPipelines (this=&lt;optimized out&gt;, device=&lt;optimized out&gt;, pipelineCache=&lt;optimized out&gt;, createInfoCount=&lt;optimized out&gt;, pCreateInfos=&lt;optimized out&gt;, pAllocator=&lt;optimized out&gt;, \n    pPipelines=0x7fffffffbfc8) at /root/sdk-build/1.1.121.1/source/Vulkan-ValidationLayers/layers/generated/parameter_validation.cpp:3086\n#2  0x00007fff56ebc643 in ValidationObject::PreCallValidateCreateGraphicsPipelines (cgpl_state=&lt;optimized out&gt;, pPipelines=0x7fffffffbfc8, pAllocator=&lt;optimized out&gt;, pCreateInfos=&lt;optimized out&gt;, createInfoCount=&lt;optimized out&gt;, \n    pipelineCache=&lt;optimized out&gt;, device=&lt;optimized out&gt;, this=0x1248650) at /root/sdk-build/1.1.121.1/source/Vulkan-ValidationLayers/layers/generated/chassis.h:3688\n#3  vulkan_layer_chassis::CreateGraphicsPipelines (device=&lt;optimized out&gt;, pipelineCache=&lt;optimized out&gt;, createInfoCount=&lt;optimized out&gt;, pCreateInfos=&lt;optimized out&gt;, pAllocator=&lt;optimized out&gt;, pPipelines=0x7fffffffbfc8)\n    at /root/sdk-build/1.1.121.1/source/Vulkan-ValidationLayers/layers/generated/chassis.cpp:749\n#4  0x00007fff5697b1f7 in DispatchCreateGraphicsPipelines (device=device@entry=0xd846d0, pipelineCache=pipelineCache@entry=0x0, createInfoCount=createInfoCount@entry=1, pCreateInfos=0xf1c038196785ba00, pAllocator=pAllocator@entry=0x0, \n    pPipelines=pPipelines@entry=0x7fffffffbfc8) at /root/sdk-build/1.1.121.1/source/Vulkan-ValidationLayers/layers/generated/layer_chassis_dispatch.cpp:210\n#5  0x00007fff568ee2b2 in vulkan_layer_chassis::CreateGraphicsPipelines (device=&lt;optimized out&gt;, pipelineCache=&lt;optimized out&gt;, createInfoCount=&lt;optimized out&gt;, pCreateInfos=&lt;optimized out&gt;, pAllocator=&lt;optimized out&gt;, \n    pPipelines=0x7fffffffbfc8) at /root/sdk-build/1.1.121.1/source/Vulkan-ValidationLayers/layers/generated/chassis.cpp:759\n#6  0x00007fff7dcbf9bc in ?? ()\n#7  0x0000000000000000 in ?? ()\n</code></pre>\n\n<p>The crash seems to be happening inside the validation layers. Here is the function that causes the crash. This is c++.</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>/**\n* Validate an array of Vulkan structures\n*\n* Verify that required count and array parameters are not 0 or NULL.  If\n* the array contains 1 or more structures, verify that each structure's\n* sType field is set to the correct VkStructureType value.\n*\n* @param apiName Name of API call being validated.\n* @param countName Name of count parameter.\n* @param arrayName Name of array parameter.\n* @param sTypeName Name of expected VkStructureType value.\n* @param count Number of elements in the array.\n* @param array Array to validate.\n* @param sType VkStructureType for structure validation.\n* @param countRequired The 'count' parameter may not be 0 when true.\n* @param arrayRequired The 'array' parameter may not be NULL when true.\n* @return Boolean value indicating that the call should be skipped.\n*/\ntemplate &lt;typename T&gt;\nbool validate_struct_type_array(const char *apiName, const ParameterName &amp;countName, const ParameterName &amp;arrayName,\n                                    const char *sTypeName, uint32_t count, const T *array, VkStructureType sType,\n                                    bool countRequired, bool arrayRequired, const char *stype_vuid, const char *param_vuid,\n                                    const char *count_required_vuid) {\n    bool skip_call = false;\n\n    if ((count == 0) || (array == NULL)) {\n        skip_call |= validate_array(apiName, countName, arrayName, count, &amp;array, countRequired, arrayRequired,\n                                        count_required_vuid, param_vuid);\n    } else {\n       // Verify that all structs in the array have the correct type\n        for (uint32_t i = 0; i &lt; count; ++i) {\n            if (array[i].sType != sType) { //&lt;-- This line causes segv\n                skip_call |=\n                    log_msg(report_data, VK_DEBUG_REPORT_ERROR_BIT_EXT, VK_DEBUG_REPORT_OBJECT_TYPE_UNKNOWN_EXT, 0, stype_vuid,\n                                \"%s: parameter %s[%d].sType must be %s\", apiName, arrayName.get_name().c_str(), i, sTypeName);\n            }\n        }\n    }\n\n    return skip_call;\n}\n</code></pre>\n\n<p>And here is my c# code:</p>\n\n<pre class=\"lang-cs prettyprint-override\"><code>static VkShaderModule LoadShader (VkDevice device, string path) {\n    byte[] bytes = File.ReadAllBytes (path);\n\n    uint length = (uint) bytes.Length;\n\n    VkShaderModuleCreateInfo pCreateInfo = VkShaderModuleCreateInfo.New ();\n    pCreateInfo.codeSize = new UIntPtr (length);\n    fixed (byte * ptr = &amp; bytes[0])\n    pCreateInfo.pCode = (uint * ) ptr;\n\n    VkShaderModule shaderModule = new VkShaderModule ();\n    Assert (vkCreateShaderModule (device, &amp; pCreateInfo, null, &amp; shaderModule));\n\n    return shaderModule;\n}\nstatic VkPipelineLayout CreatePipelineLayout (VkDevice device) {\n    VkPipelineLayoutCreateInfo pCreateInfo = VkPipelineLayoutCreateInfo.New ();\n    pCreateInfo.pushConstantRangeCount = 0;\n    pCreateInfo.setLayoutCount = 0;\n\n    VkPipelineLayout layout = VkPipelineLayout.Null;\n    Assert (vkCreatePipelineLayout (device, &amp; pCreateInfo, null, &amp; layout));\n    return layout;\n}\nstatic VkPipeline CreatePipeline (VkDevice device, VkPipelineCache pipelineCache, VkRenderPass renderPass,\n    VkShaderModule vs, VkShaderModule fs, VkPipelineLayout layout) {\n\n    VkGraphicsPipelineCreateInfo pCreateInfo = VkGraphicsPipelineCreateInfo.New ();\n\n    VkPipelineShaderStageCreateInfo[] shaderStages = new VkPipelineShaderStageCreateInfo[2];\n    shaderStages[0] = VkPipelineShaderStageCreateInfo.New ();\n    shaderStages[0].flags = (uint) VkShaderStageFlags.Vertex;\n    shaderStages[0].module = vs;\n    byte[] vsFuncName = Encoding.UTF8.GetBytes (\"main\" + char.MinValue);\n    fixed (byte * ptr = &amp; (vsFuncName[0]))\n    shaderStages[0].pName = ptr;\n\n    shaderStages[1] = VkPipelineShaderStageCreateInfo.New ();\n    shaderStages[1].flags = (uint) VkShaderStageFlags.Fragment;\n    shaderStages[1].module = vs;\n    byte[] fsFuncName = Encoding.UTF8.GetBytes (\"main\" + char.MinValue);\n    fixed (byte * ptr = &amp; (fsFuncName[0]))\n    shaderStages[1].pName = ptr;\n\n    fixed (VkPipelineShaderStageCreateInfo * ptr = &amp; (shaderStages[0]))\n    pCreateInfo.pStages = ptr;\n    pCreateInfo.stageCount = 2;\n\n    VkPipelineVertexInputStateCreateInfo vertexInput = VkPipelineVertexInputStateCreateInfo.New ();\n    pCreateInfo.pVertexInputState = &amp; vertexInput;\n\n    VkPipelineInputAssemblyStateCreateInfo inputAssembly = VkPipelineInputAssemblyStateCreateInfo.New ();\n    inputAssembly.topology = VkPrimitiveTopology.TriangleList;\n    pCreateInfo.pInputAssemblyState = &amp; inputAssembly;\n\n    VkPipelineViewportStateCreateInfo viewportState = VkPipelineViewportStateCreateInfo.New ();\n    viewportState.viewportCount = 1;\n    viewportState.scissorCount = 1;\n    pCreateInfo.pViewportState = &amp; viewportState;\n\n    VkPipelineRasterizationStateCreateInfo rasterizationState = VkPipelineRasterizationStateCreateInfo.New ();\n    rasterizationState.lineWidth = 1;\n    pCreateInfo.pRasterizationState = &amp; rasterizationState;\n\n    VkPipelineMultisampleStateCreateInfo multisampleState = VkPipelineMultisampleStateCreateInfo.New ();\n    multisampleState.rasterizationSamples = VkSampleCountFlags.Count1;\n    pCreateInfo.pMultisampleState = &amp; multisampleState;\n\n    VkPipelineDepthStencilStateCreateInfo depthState = VkPipelineDepthStencilStateCreateInfo.New ();\n    pCreateInfo.pDepthStencilState = &amp; depthState;\n\n    VkPipelineColorBlendAttachmentState colourAttachment = new VkPipelineColorBlendAttachmentState ();\n    colourAttachment.colorWriteMask = VkColorComponentFlags.R | VkColorComponentFlags.G | VkColorComponentFlags.B | VkColorComponentFlags.A;\n\n    VkPipelineColorBlendStateCreateInfo colourState = VkPipelineColorBlendStateCreateInfo.New ();\n    colourState.pAttachments = &amp; colourAttachment;\n    colourState.attachmentCount = 1;\n    pCreateInfo.pColorBlendState = &amp; colourState;\n\n    VkDynamicState[] dynamicStates = new VkDynamicState[2];\n    dynamicStates[0] = VkDynamicState.Viewport;\n    dynamicStates[1] = VkDynamicState.Scissor;\n\n    VkPipelineDynamicStateCreateInfo dynamicState = VkPipelineDynamicStateCreateInfo.New ();\n    dynamicState.dynamicStateCount = (uint) dynamicStates.Length;\n    fixed (VkDynamicState * ptr = &amp; (dynamicStates[0]))\n    dynamicState.pDynamicStates = ptr;\n    pCreateInfo.pDynamicState = &amp; dynamicState;\n\n    pCreateInfo.layout = layout;\n    pCreateInfo.renderPass = renderPass;\n\n    VkPipeline pipeline = VkPipeline.Null;\n    Assert (vkCreateGraphicsPipelines (device, 0, 1, &amp; pCreateInfo, null, &amp; pipeline));\n    return pipeline;\n}\n</code></pre>\n"}, {"tags": ["c++", "arrays", "for-loop", "recursion", "nested-loops"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1572447688, "post_id": 58628189, "comment_id": 103563893, "body": "Welcome to Stack Overflow. Please read <a href=\"http://stackoverflow.com/help\">the help pages</a>, take <a href=\"http://stackoverflow.com/tour\">the SO tour</a>, read about <a href=\"http://stackoverflow.com/help/how-to-ask\">how to ask good questions</a>, as well as <a href=\"https://codeblog.jonskeet.uk/2012/11/24/stack-overflow-question-checklist/\" rel=\"nofollow noreferrer\">this question checklist</a>. Also please learn how to create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> of your own attempt to show us, and describe what problems you have with it. Lastly please note that stackoverflow.com isn&#39;t a free coding service."}, {"owner": {"reputation": 3797, "user_id": 4022608, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/27c9e8430426724a1f39c98b268f0a98?s=128&d=identicon&r=PG&f=1", "display_name": "Baldrickk", "link": "https://stackoverflow.com/users/4022608/baldrickk"}, "edited": false, "score": 1, "creation_date": 1572447697, "post_id": 58628189, "comment_id": 103563897, "body": "Why?  Is this a homework question? what have you tried?"}, {"owner": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 1, "creation_date": 1572448348, "post_id": 58628189, "comment_id": 103564303, "body": "\u26a0\ufe0f Careful!  For a small table, this is fine.  For larger or dynamic tables, recursion in C++ is easy to exceed the stack limit because C++ does not (usually) support tail recursion optimization."}, {"owner": {"reputation": 135, "user_id": 12296812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c02c1d820534c39aa013cd953698ce73?s=128&d=identicon&r=PG&f=1", "display_name": "keanehui", "link": "https://stackoverflow.com/users/12296812/keanehui"}, "edited": false, "score": 0, "creation_date": 1572449116, "post_id": 58628189, "comment_id": 103564720, "body": "Yes it is from homework and I updated my tried code. It seems the recursion never stops."}, {"owner": {"reputation": 3797, "user_id": 4022608, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/27c9e8430426724a1f39c98b268f0a98?s=128&d=identicon&r=PG&f=1", "display_name": "Baldrickk", "link": "https://stackoverflow.com/users/4022608/baldrickk"}, "reply_to_user": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 0, "creation_date": 1572452023, "post_id": 58628189, "comment_id": 103566416, "body": "@Eljay at -O2 and -O3 tail recursion should be optimised out.  At least with GCC."}], "answers": [{"tags": [], "owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 0, "last_activity_date": 1572448131, "creation_date": 1572448131, "answer_id": 58628404, "question_id": 58628189, "link": "https://stackoverflow.com/questions/58628189/c-could-any-help-me-to-translate-this-for-loop-to-recursion-function/58628404#58628404", "title": "C++ - Could any help me to translate this for loop to recursion function?", "body": "<p>The function can be defined the following way as it is shown in the demonstrative program</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nsize_t replace_count( char *s, size_t n, char c1 = 'b', char c2 = 'a' )\n{\n    return n == 0 ? 0 \n                  : ( ( *s == c1 ? ( *s = c2, 1 ) : 0 ) + replace_count( s + 1, n - 1, c1, c2 ) );\n}\n\nint main() \n{\n    const int length = 4;\n    char table[length][length] = {\n        {'a','b','a','a'},\n        {'a','a','a','b'},\n        {'a','a','b','a'},\n        {'b','b','a','a'}\n    };\n\n    std::cout &lt;&lt; replace_count( reinterpret_cast&lt;char *&gt;( table ), length * length )\n              &lt;&lt; '\\n';\n\n    return 0;\n}\n</code></pre>\n\n<p>Its output is</p>\n\n<pre><code>5\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 233613, "user_id": 14065, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e1475012bb1630271c9165899bccd548?s=128&d=identicon&r=PG", "display_name": "Martin York", "link": "https://stackoverflow.com/users/14065/martin-york"}, "is_accepted": true, "score": 0, "last_activity_date": 1572450749, "creation_date": 1572450749, "answer_id": 58629244, "question_id": 58628189, "link": "https://stackoverflow.com/questions/58628189/c-could-any-help-me-to-translate-this-for-loop-to-recursion-function/58629244#58629244", "title": "C++ - Could any help me to translate this for loop to recursion function?", "body": "<p>Very close:</p>\n\n<pre><code>int replace_char(char array[][length], int row, int col) {\n    if (col == length) {\n        return replace_char(array, row + 1, 0); // reach the end of a col increment the\n                                                // row by 1 and reset the col.\n                                                // We are over the end so return\n    }\n    if (row == length) {\n        // Then we have passed the last row simply return.\n        return 0;\n    }\n\n    // Now do the work.\n    int count = 0;\n    if (array[row][col] == 'b') {\n        array[row][col] = 'a';\n        count = 1;\n    }\n    // Once you have done the work\n    // Make the recursive call.\n    return count + replace_char(array, row, col + 1);\n}\n</code></pre>\n"}], "owner": {"reputation": 135, "user_id": 12296812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c02c1d820534c39aa013cd953698ce73?s=128&d=identicon&r=PG&f=1", "display_name": "keanehui", "link": "https://stackoverflow.com/users/12296812/keanehui"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 0, "accepted_answer_id": 58629244, "answer_count": 2, "score": -2, "last_activity_date": 1572451534, "creation_date": 1572447472, "last_edit_date": 1572451534, "question_id": 58628189, "link": "https://stackoverflow.com/questions/58628189/c-could-any-help-me-to-translate-this-for-loop-to-recursion-function", "title": "C++ - Could any help me to translate this for loop to recursion function?", "body": "<p>I have an array, table, with some char, a and b.\nI want to find and replace the 'b' with 'a' then count how many are replaced. How to write a recursive function equivalent to the nested loop?</p>\n\n<pre><code>    const int length = 4;\n    char table[length][length] = {\n        {'a','b','a','a'},\n        {'a','a','a','b'},\n        {'a','a','b','a'},\n        {'b','b','a','a'}\n    };\n\n    int count = 0;\n    for (int i = 0; i &lt; length; i++) {\n        for (int j = 0; j &lt; length; j++) {\n            if (table[i][j] == 'b') {\n                count++;\n                table[i][j] = 'a';\n            }\n        }\n    }\n    cout &lt;&lt; \"Count: \" &lt;&lt; count &lt;&lt; endl;\n</code></pre>\n\n<p>This is what I tried: </p>\n\n<pre><code>int replace_char(char array[][length], int row, int col) {\n    // base cases and recursive\n    if (row+1 != length - 1)\n        replace_char(array, row+1, col);\n    if (col+1 != length - 1)\n        replace_char(array, row, col+1);\n\n    // do this\n    if (array[row][col] == 'b') {\n        array[row][col] = 'a';\n        return 1 + replace_char(array, row, col);\n    }\n    return 0;\n}\n</code></pre>\n\n<p>My idea is, if it's not the end of the col or the row, then go check the next col or row. While checking, if the char is b, then return 1, and start checking from where it stops.\nBut it is not working.</p>\n"}, {"tags": ["c++", "qt", "qt5"], "answers": [{"tags": [], "owner": {"reputation": 113, "user_id": 1169205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4f6b30e68d1620bbafd5c113b708886?s=128&d=identicon&r=PG", "display_name": "JimmyG", "link": "https://stackoverflow.com/users/1169205/jimmyg"}, "is_accepted": false, "score": 0, "last_activity_date": 1573077023, "creation_date": 1573077023, "answer_id": 58739012, "question_id": 58627693, "link": "https://stackoverflow.com/questions/58627693/qt-qjsonobjects-list-deeper-than-one-level/58739012#58739012", "title": "Qt QJsonObjects - list deeper than one level?", "body": "<p>You might want to try something like:</p>\n\n<pre><code>int number = object.value(\"y\").toJsonObject().value(\"value\").toInt();\n</code></pre>\n\n<p>I might not have that exactly right, but you should get the idea...</p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 10386610, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-NK2vl0O0VbM/AAAAAAAAAAI/AAAAAAAAChk/9rH4OR0YfDA/photo.jpg?sz=128", "display_name": "Felipebros", "link": "https://stackoverflow.com/users/10386610/felipebros"}, "is_accepted": true, "score": 0, "last_activity_date": 1573140264, "creation_date": 1573140264, "answer_id": 58751922, "question_id": 58627693, "link": "https://stackoverflow.com/questions/58627693/qt-qjsonobjects-list-deeper-than-one-level/58751922#58751922", "title": "Qt QJsonObjects - list deeper than one level?", "body": "<p>Thank you @JimmyG, this way it worked, I don't know if it's a correct way, I got it by trial and error.</p>\n\n<pre><code>qDebug() &lt;&lt; o.value(\"y\").toObject().value(\"value\").toInt();\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 10386610, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-NK2vl0O0VbM/AAAAAAAAAAI/AAAAAAAAChk/9rH4OR0YfDA/photo.jpg?sz=128", "display_name": "Felipebros", "link": "https://stackoverflow.com/users/10386610/felipebros"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 1, "accepted_answer_id": 58751922, "answer_count": 2, "score": 1, "last_activity_date": 1573140264, "creation_date": 1572445953, "last_edit_date": 1573139768, "question_id": 58627693, "link": "https://stackoverflow.com/questions/58627693/qt-qjsonobjects-list-deeper-than-one-level", "title": "Qt QJsonObjects - list deeper than one level?", "body": "<p>Contrary to this link, how to list the value of y and value:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/50647381/qt-jsonobjects-and-initializer-lists-deeper-than-one-level\">Qt JsonObjects and initializer lists -- deeper than one level?</a></p>\n\n<pre><code>QJsonObject o\n{\n    {\"x\", QJsonObject { {\"value\", 1} }},\n    {\"y\", QJsonObject { {\"value\", 2} }}\n};\n</code></pre>\n\n<p>The way below doesn't work:</p>\n\n<pre><code>int number = obj.value(\"y\", \"value\");\n</code></pre>\n\n<p>I hope to receive the amount below:</p>\n\n<p>number = 2</p>\n"}, {"tags": ["c++", "string", "char", "type-conversion", "int"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 12297925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c028eb3a66af6d18591217d543833d6?s=128&d=identicon&r=PG&f=1", "display_name": "ccolburn32", "link": "https://stackoverflow.com/users/12297925/ccolburn32"}, "edited": false, "score": 0, "creation_date": 1572473493, "post_id": 58627746, "comment_id": 103575570, "body": "This helped. In particular, I was wondering more about saving it in a char but I didn&#39;t think that was possible. For some reason, stoi wasn&#39;t working but atof did. I&#39;m not really sure why but I got it. Thanks for all your help!"}], "tags": [], "owner": {"reputation": 16436, "user_id": 10411602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b534549770aedbc4d7eb03a39d740f6?s=128&d=identicon&r=PG&f=1", "display_name": "Blaze", "link": "https://stackoverflow.com/users/10411602/blaze"}, "is_accepted": false, "score": 3, "last_activity_date": 1572446567, "last_edit_date": 1572446567, "creation_date": 1572446119, "answer_id": 58627746, "question_id": 58627572, "link": "https://stackoverflow.com/questions/58627572/is-it-possible-to-add-two-indexes-of-a-string-to-a-character-to-then-convert-tha/58627746#58627746", "title": "Is it possible to add two indexes of a string to a character to then convert that character to an int in c++?", "body": "<p>You can achieve it like this:</p>\n\n<pre><code>int x = 10*(st[0]-'0') + (st[1]-'0');\n</code></pre>\n\n<p>This works because subtracting <code>'0'</code> from a <code>char</code> representing a number results in that actual number. So for instance <code>'5' - '0' == 5</code>.</p>\n\n<hr>\n\n<blockquote>\n  <p>char ch so that ch = 12</p>\n</blockquote>\n\n<p>That's not possible though. You can do <code>char ch = 12</code>, but that's not going to represent a <code>12</code>, that will most likely just result in something that might not be printable. In ASCII that would be a \"form feed\" and if you tried to print that, it could perhaps put a newline (or skip to the next page if your editor supports that). If you want a string to hold <code>\"12\"</code>, you can do it this way:</p>\n\n<pre><code>std::string twelve = st.substr(0, 2);\n</code></pre>\n\n<p>And from there a general way of converting to <code>int</code> would be</p>\n\n<pre><code>int x = std::stoi(twelve);\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 12297925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c028eb3a66af6d18591217d543833d6?s=128&d=identicon&r=PG&f=1", "display_name": "ccolburn32", "link": "https://stackoverflow.com/users/12297925/ccolburn32"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1572446567, "creation_date": 1572445543, "last_edit_date": 1572446001, "question_id": 58627572, "link": "https://stackoverflow.com/questions/58627572/is-it-possible-to-add-two-indexes-of-a-string-to-a-character-to-then-convert-tha", "title": "Is it possible to add two indexes of a string to a character to then convert that character to an int in c++?", "body": "<p>For example, I have a <code>string st=\"1234567\"</code> and I want to add <code>st[0]</code> and <code>st[1]</code> to char ch so that <code>ch = 12</code>, and then to convert that to an int x so that <code>x = 12</code>.</p>\n\n<p>Is there a way to do this?</p>\n"}, {"tags": ["c++", "undefined-behavior"], "comments": [{"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 3, "creation_date": 1572445511, "post_id": 58627496, "comment_id": 103562524, "body": "In both cases it&#39;s not necessarily UB, only if the statements are actually executed."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 5, "creation_date": 1572445551, "post_id": 58627496, "comment_id": 103562542, "body": "There&#39;s no undefined behavior for <code>i = -1</code>. Overflow during <i>arithmetic</i> leads to undefined behavior. But a cast has a well defined meaning here."}, {"owner": {"reputation": 446, "user_id": 10050942, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/896d0e87b08f04037bec7a1b3818b932?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Stephens", "link": "https://stackoverflow.com/users/10050942/daniel-stephens"}, "reply_to_user": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 0, "creation_date": 1572445707, "post_id": 58627496, "comment_id": 103562658, "body": "@aschepler: it is, see post of duDE, it extends to even parsing which quite answers my question"}, {"owner": {"reputation": 446, "user_id": 10050942, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/896d0e87b08f04037bec7a1b3818b932?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Stephens", "link": "https://stackoverflow.com/users/10050942/daniel-stephens"}, "reply_to_user": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1572445841, "post_id": 58627496, "comment_id": 103562737, "body": "@StoryTeller-UnslanderMonica That sounds reasonable but latter example actually creates false code by compilers since an optimizer assumes it can never be true so UB must have an impact on compile time"}, {"owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "edited": false, "score": 1, "creation_date": 1572445915, "post_id": 58627496, "comment_id": 103562786, "body": "OP, you misunderstand. Compile-time UB, also known as &quot;ill-formed NDR&quot;, can happen if the condition for the UB to happen involves the program text rather than the program execution. However, run-time UB cannot occur at compile-time because the program has to actually be executed in order to determine whether the run-time evaluation that is UB actually occurs or not."}, {"owner": {"reputation": 446, "user_id": 10050942, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/896d0e87b08f04037bec7a1b3818b932?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Stephens", "link": "https://stackoverflow.com/users/10050942/daniel-stephens"}, "reply_to_user": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "edited": false, "score": 0, "creation_date": 1572445967, "post_id": 58627496, "comment_id": 103562814, "body": "@Brian So latter example is actually NDR, but not UB? Means NDR leads to UB but is not UB"}, {"owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "edited": false, "score": 1, "creation_date": 1572446081, "post_id": 58627496, "comment_id": 103562892, "body": "The second example is well-formed, and is not guaranteed to cause UB, because it&#39;s possible that <code>foo</code> will only be called with non-null pointers."}, {"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 1, "creation_date": 1572446116, "post_id": 58627496, "comment_id": 103562917, "body": "There are some requirements which definitely could be diagnosed at compile time but are still described as UB, not ill-formed (with or without NDR)."}, {"owner": {"reputation": 9434, "user_id": 528720, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZpqMk.png?s=128&g=1", "display_name": "&#214;&#246; Tiib", "link": "https://stackoverflow.com/users/528720/%c3%96%c3%b6-tiib"}, "edited": false, "score": 0, "creation_date": 1572447283, "post_id": 58627496, "comment_id": 103563656, "body": "I do not understand example 1, casting int a to unsigned int b is defined behavior for all values of a since unsigned integers shall obey the laws of modular arithmetic."}, {"owner": {"reputation": 446, "user_id": 10050942, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/896d0e87b08f04037bec7a1b3818b932?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Stephens", "link": "https://stackoverflow.com/users/10050942/daniel-stephens"}, "reply_to_user": {"reputation": 9434, "user_id": 528720, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZpqMk.png?s=128&g=1", "display_name": "&#214;&#246; Tiib", "link": "https://stackoverflow.com/users/528720/%c3%96%c3%b6-tiib"}, "edited": false, "score": 0, "creation_date": 1572447865, "post_id": 58627496, "comment_id": 103563996, "body": "@&#214;&#246; Tilb the value - 1 cannot be represented by an unsigned int"}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 1, "creation_date": 1572449766, "post_id": 58627496, "comment_id": 103565069, "body": "@DanielStephens -- yes, the value -1 cannot be represented by an unsigned int. But the result of <b>converting</b> that value to <code>unsigned int</code> is well defined. As an earlier comment said, unsigned integers obey the laws of modular arithmetic. So the result is the largest value that an <code>unsigned int</code> can hold."}], "owner": {"reputation": 446, "user_id": 10050942, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/896d0e87b08f04037bec7a1b3818b932?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Stephens", "link": "https://stackoverflow.com/users/10050942/daniel-stephens"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 96, "favorite_count": 0, "closed_date": 1572445671, "answer_count": 0, "score": 5, "last_activity_date": 1572449174, "creation_date": 1572445333, "last_edit_date": 1572449174, "question_id": 58627496, "link": "https://stackoverflow.com/questions/58627496/undefined-behaviour-during-compile-time-and-run-time", "closed_reason": "Duplicate", "title": "Undefined behaviour during compile time and run time", "body": "<p>I still can't pinpoint exactly on which level undefined behaviour is actually defined. Assume the following code:</p>\n\n<pre><code>int i = value;\nunsigned int x = static_cast&lt;unsigned int&gt;(i);\n</code></pre>\n\n<p>This is valid C++ code and defined if e.g. <code>i</code> is <code>1</code>. But on <code>i = -1</code> it becomes undefined behaviour, so the application is in UB state during runtime.</p>\n\n<p>In the code sample below UB is already apparent during compile time. So my question is, is it correct that UB can be either during compile time or runtime? What is the correct terminology here?</p>\n\n<pre><code>void foo(int* p)\n{\n    int v = *p;\n    if (p == nullptr)\n        return;\n}\n</code></pre>\n"}, {"tags": ["c++", "recursion", "sum"], "comments": [{"owner": {"reputation": 26796, "user_id": 4834, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/6a04e124482c3750617f8dacde3388ce?s=128&d=identicon&r=PG", "display_name": "quamrana", "link": "https://stackoverflow.com/users/4834/quamrana"}, "edited": false, "score": 0, "creation_date": 1572445127, "post_id": 58627399, "comment_id": 103562261, "body": "What do you think that <code>sum(m++, n);</code> does?"}, {"owner": {"reputation": 715, "user_id": 9808614, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc6c3462738284986bc8fa1d18ef30e3?s=128&d=identicon&r=PG", "display_name": "OrdoFlammae", "link": "https://stackoverflow.com/users/9808614/ordoflammae"}, "edited": false, "score": 0, "creation_date": 1572445381, "post_id": 58627399, "comment_id": 103562432, "body": "What is your error? Please include that in your question."}], "answers": [{"comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1572445258, "post_id": 58627442, "comment_id": 103562351, "body": "and maybe catch the case of <code>m &gt; n</code>"}, {"owner": {"reputation": 27055, "user_id": 5923139, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dvoYw.png?s=128&g=1", "display_name": "Aplet123", "link": "https://stackoverflow.com/users/5923139/aplet123"}, "reply_to_user": {"reputation": 22777, "user_id": 133203, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Fp3hB.jpg?s=128&g=1", "display_name": "Federico klez Culloca", "link": "https://stackoverflow.com/users/133203/federico-klez-culloca"}, "edited": false, "score": 0, "creation_date": 1572445304, "post_id": 58627442, "comment_id": 103562383, "body": "@FedericoklezCulloca <code>++m</code> just wastes time incrementing m when it&#39;s not used anywhere else in the function"}, {"owner": {"reputation": 61409, "user_id": 485343, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e18b024a122df74275dd2c4486e8a2b4?s=128&d=identicon&r=PG", "display_name": "rustyx", "link": "https://stackoverflow.com/users/485343/rustyx"}, "edited": false, "score": 2, "creation_date": 1572445448, "post_id": 58627442, "comment_id": 103562473, "body": "@Aplet123 The entire code wastes time. Could just compute it in one go: <code>int sum(int m, int n) { return (std::abs(m - n) + 1) * (m + n) &#47; 2; }</code>"}, {"owner": {"reputation": 7825, "user_id": 3684343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bee557e309dc42d91a706c70c8c0c9f?s=128&d=identicon&r=PG&f=1", "display_name": "mch", "link": "https://stackoverflow.com/users/3684343/mch"}, "reply_to_user": {"reputation": 22777, "user_id": 133203, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Fp3hB.jpg?s=128&g=1", "display_name": "Federico klez Culloca", "link": "https://stackoverflow.com/users/133203/federico-klez-culloca"}, "edited": false, "score": 1, "creation_date": 1572445455, "post_id": 58627442, "comment_id": 103562478, "body": "@FedericoklezCulloca <code>m + sum(m++, n);</code> is undefined behaviour till C++14, it reads and modifies <code>m</code> unsequenced."}, {"owner": {"reputation": 27055, "user_id": 5923139, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dvoYw.png?s=128&g=1", "display_name": "Aplet123", "link": "https://stackoverflow.com/users/5923139/aplet123"}, "reply_to_user": {"reputation": 61409, "user_id": 485343, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e18b024a122df74275dd2c4486e8a2b4?s=128&d=identicon&r=PG", "display_name": "rustyx", "link": "https://stackoverflow.com/users/485343/rustyx"}, "edited": false, "score": 0, "creation_date": 1572445594, "post_id": 58627442, "comment_id": 103562573, "body": "@rustyx while this is true I&#39;m also assuming that this is probably for some exercise in recursion and thus can not be reduced to a single formula"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "reply_to_user": {"reputation": 61409, "user_id": 485343, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e18b024a122df74275dd2c4486e8a2b4?s=128&d=identicon&r=PG", "display_name": "rustyx", "link": "https://stackoverflow.com/users/485343/rustyx"}, "edited": false, "score": 0, "creation_date": 1572446639, "post_id": 58627442, "comment_id": 103563228, "body": "@rustyx if you write the same as a loop, compilers I checked are clever enough to avoid the loop and spit out the result directly (using the formula you quote), didnt try if it also works with a recursion tough"}], "tags": [], "owner": {"reputation": 27055, "user_id": 5923139, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dvoYw.png?s=128&g=1", "display_name": "Aplet123", "link": "https://stackoverflow.com/users/5923139/aplet123"}, "is_accepted": true, "score": 5, "last_activity_date": 1572445341, "last_edit_date": 1572445341, "creation_date": 1572445180, "answer_id": 58627442, "question_id": 58627399, "link": "https://stackoverflow.com/questions/58627399/infinite-loop-when-calculating-recursive-sum/58627442#58627442", "title": "Infinite loop when calculating recursive sum", "body": "<p><code>m++</code> returns the value of <code>m</code> before incrementing, so it will infinitely recurse. You should call <code>sum(m + 1, n)</code> instead. Also, you should consider changing <code>m != n</code> to <code>m &lt; n</code> to prevent the case of <code>m &gt; n</code> from recursing infinitely.</p>\n"}, {"tags": [], "owner": {"reputation": 115, "user_id": 11640307, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-cIqVAlBuJuo/AAAAAAAAAAI/AAAAAAAABEA/ndcavxgK_q0/photo.jpg?sz=128", "display_name": "Siva Rahul", "link": "https://stackoverflow.com/users/11640307/siva-rahul"}, "is_accepted": false, "score": 0, "last_activity_date": 1572445850, "creation_date": 1572445850, "answer_id": 58627661, "question_id": 58627399, "link": "https://stackoverflow.com/questions/58627399/infinite-loop-when-calculating-recursive-sum/58627661#58627661", "title": "Infinite loop when calculating recursive sum", "body": "<p>Don't increment m while calling, instead pass <code>m+1</code></p>\n\n<pre><code>int sum(int m, int n)\n{\n    if(m != n)\n        return m + sum(m+1, n);\n    return m;\n}\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 12297852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f35f214370a7d6eacf736215402f38b?s=128&d=identicon&r=PG&f=1", "display_name": "pango322", "link": "https://stackoverflow.com/users/12297852/pango322"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "accepted_answer_id": 58627442, "answer_count": 2, "score": 0, "last_activity_date": 1572445850, "creation_date": 1572445054, "question_id": 58627399, "link": "https://stackoverflow.com/questions/58627399/infinite-loop-when-calculating-recursive-sum", "title": "Infinite loop when calculating recursive sum", "body": "<p>this function is supposed to calculate the sum inclusive ie. sum(2, 5) should yield 2 + 3 + 4 + 5. </p>\n\n<pre><code>int sum(int m, int n) {\n    if (m != n) {\n        return m + sum(m++, n);\n    }\n    return n;\n}\n</code></pre>\n\n<p>However, i get a run time error every time i run this code.</p>\n"}, {"tags": ["c++", "unix"], "comments": [{"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 1, "creation_date": 1572445429, "post_id": 58627381, "comment_id": 103562459, "body": "You can&#39;t do that, and even if you could, your users would be very upset if you did."}, {"owner": {"reputation": 1176, "user_id": 3498667, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/07ce1e123a816ed08504262882b29504?s=128&d=identicon&r=PG", "display_name": "Neekobus", "link": "https://stackoverflow.com/users/3498667/neekobus"}, "reply_to_user": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1572445554, "post_id": 58627381, "comment_id": 103562546, "body": "Well this could be a feature of the program, and the user would be consentant (I am the user). So it is NOT possible to target the &quot;current&quot; shell ?"}], "answers": [{"tags": [], "owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "is_accepted": false, "score": 0, "last_activity_date": 1572446852, "creation_date": 1572446852, "answer_id": 58627989, "question_id": 58627381, "link": "https://stackoverflow.com/questions/58627381/system-call-not-targeting-a-sub-shell/58627989#58627989", "title": "system() call NOT targeting a sub-shell?", "body": "<p>As far as I know, it's not possible in general.  </p>\n\n<p>If you're using bash, and since this is only for you:</p>\n\n<p>Enable history appending in .bashrc:</p>\n\n<pre><code>shopt -s histappend\n</code></pre>\n\n<p>Launch a login bash shell in <code>main</code>:</p>\n\n<pre><code>system(\"bash -li -c 'history -s SOMETHING'\");\n</code></pre>\n\n<p>and then refresh your history:</p>\n\n<pre><code>history -n\n</code></pre>\n\n<p>The <code>history -n</code> can be automated - you can execute it inside your prompt, for instance.<br>\nFiguring out how to do that left as an exercise.</p>\n\n<p>(Disclaimer: I have only tried this in Ubuntu under the Windows Subsystem for Linux, but it should work very similarly on a Mac.)</p>\n"}, {"tags": [], "owner": {"reputation": 48092, "user_id": 136208, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/8a30f566f1b7c9ae44cf245138850ba4?s=128&d=identicon&r=PG", "display_name": "AProgrammer", "link": "https://stackoverflow.com/users/136208/aprogrammer"}, "is_accepted": false, "score": 0, "last_activity_date": 1572450175, "last_edit_date": 1572450175, "creation_date": 1572447653, "answer_id": 58628244, "question_id": 58627381, "link": "https://stackoverflow.com/questions/58627381/system-call-not-targeting-a-sub-shell/58628244#58628244", "title": "system() call NOT targeting a sub-shell?", "body": "<p>It isn't possible.  The usual work around -- not applicable if there is other wanted output -- is to make your program prints the wanted command and then execute it.  For instance</p>\n\n<pre><code>#include &lt;iostream&gt;\nint main() {\n    std::cout &lt;&lt; \"history -s SOMETHING\\n\";\n    return 0;\n}\n</code></pre>\n\n<p>and then</p>\n\n<pre><code>eval $(/path/to/my/exe)\n</code></pre>\n\n<p>For ease of use, you can put that in a shell function</p>\n\n<pre><code>myfn() {\n    eval $(/path/to/my/exe)\n}\n</code></pre>\n\n<p>that you can simply use</p>\n\n<pre><code>myfn\n</code></pre>\n"}], "owner": {"reputation": 1176, "user_id": 3498667, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/07ce1e123a816ed08504262882b29504?s=128&d=identicon&r=PG", "display_name": "Neekobus", "link": "https://stackoverflow.com/users/3498667/neekobus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 55, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1572450175, "creation_date": 1572445010, "question_id": 58627381, "link": "https://stackoverflow.com/questions/58627381/system-call-not-targeting-a-sub-shell", "title": "system() call NOT targeting a sub-shell?", "body": "<p>Working on a C++ Unix program executed on the command line (MacOs).</p>\n\n<p>I call <code>system(\"history -s SOMETHING\")</code> in it to add <code>SOMETHING</code> to the history of the user's shell, but I guess the call is opening a new sub-shell. </p>\n\n<p>My question is : can I execute the system call on the \"current\" shell (the one used to run the program) ?</p>\n\n<p>To be clear I want to find the <code>SOMETHING</code> in my shell history when I quit the program.</p>\n\n<p>Thanks !</p>\n"}, {"tags": ["c++", "class", "templates", "methods"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1572445095, "post_id": 58627380, "comment_id": 103562242, "body": "Please include a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> and the error message in the question."}, {"owner": {"reputation": 932, "user_id": 6345323, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6dbbb0c750be6073b0d251899c74a47?s=128&d=identicon&r=PG&f=1", "display_name": "yaodav", "link": "https://stackoverflow.com/users/6345323/yaodav"}, "edited": false, "score": 0, "creation_date": 1572445165, "post_id": 58627380, "comment_id": 103562281, "body": "can you add the main?"}], "answers": [{"tags": [], "owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": true, "score": 1, "last_activity_date": 1572445269, "creation_date": 1572445269, "answer_id": 58627474, "question_id": 58627380, "link": "https://stackoverflow.com/questions/58627380/error-while-returning-an-inner-class-from-a-method-c/58627474#58627474", "title": "Error while returning an inner class from a method (C++)", "body": "<p>Define the function like</p>\n\n<pre><code>template &lt;typename Type&gt;\ntypename Outer&lt;Type&gt;::Inner Outer&lt;Type&gt;::function()\n^^^^^^^^\n{\n    return Inner();\n}\n</code></pre>\n\n<p>Here is a demonstrative program</p>\n\n<pre><code>#include &lt;iostream&gt;\n\ntemplate &lt;typename Type&gt;\nclass Outer\n{\npublic:\n    class Inner\n    {\n\n    };\n    Inner function();\n};\n\n\n\nint main()\n{\n    auto obj = Outer&lt;int&gt;().function();\n}\n\ntemplate &lt;typename Type&gt;\ntypename Outer&lt;Type&gt;::Inner Outer&lt;Type&gt;::function()\n{\n    return Inner();\n}\n</code></pre>\n"}], "owner": {"reputation": 54, "user_id": 12297730, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9bdf908380bbc9335705207e284c0043?s=128&d=identicon&r=PG&f=1", "display_name": "Croder", "link": "https://stackoverflow.com/users/12297730/croder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 34, "favorite_count": 0, "closed_date": 1572445319, "accepted_answer_id": 58627474, "answer_count": 1, "score": 2, "last_activity_date": 1572445518, "creation_date": 1572445010, "last_edit_date": 1572445518, "question_id": 58627380, "link": "https://stackoverflow.com/questions/58627380/error-while-returning-an-inner-class-from-a-method-c", "closed_reason": "Duplicate", "title": "Error while returning an inner class from a method (C++)", "body": "<p>This is my first post on the site so I apologise if I've made some sort of a mistake with something related to posting.</p>\n\n<p>I am trying to return an object of an inner class through a method in the outer class and I keep getting random errors that do not seem to be connected to my method.</p>\n\n<p>Before the main:</p>\n\n<pre><code>template &lt;typename Type&gt;\nclass Outer\n{\npublic:\n    class Inner\n    {\n\n    };\n    Inner function();\n};\n</code></pre>\n\n<p>After main:</p>\n\n<pre><code>template &lt;typename Type&gt;\nOuter&lt;Type&gt;::Inner Outer&lt;Type&gt;::function()\n{\n    return Inner();\n}\n</code></pre>\n\n<p>I have tried modifying the method a bit, but I still end up getting errors. Errors that I am getting with this version are visible <a href=\"https://i.stack.imgur.com/4LCos.png\" rel=\"nofollow noreferrer\">the picture</a>.</p>\n"}]