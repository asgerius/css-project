[{"tags": ["c++", "c", "function-pointers"], "comments": [{"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 4, "creation_date": 1525910244, "post_id": 50263615, "comment_id": 87545250, "body": "How to solve it is to add fuel to the fire and add a bunch of explicit casts everywhere. This is very fragile, and type-unsafe. An even better solution is to rewrite the whole thing in typesafe C++."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 2, "creation_date": 1525910297, "post_id": 50263615, "comment_id": 87545263, "body": "C++ has stronger typing rules with respect to what you can do with a <code>void*</code> It demands that you acknowledge that you&#39;re doing something dodgy with a cast."}, {"owner": {"reputation": 5896, "user_id": 1106415, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6fvK.png?s=128&g=1", "display_name": "hlt", "link": "https://stackoverflow.com/users/1106415/hlt"}, "edited": false, "score": 2, "creation_date": 1525910563, "post_id": 50263615, "comment_id": 87545321, "body": "Are you really explicitly casting to <code>bool*</code>? Seems like you should cast to <code>(void (*)(bool))</code> instead..."}, {"owner": {"reputation": 13, "user_id": 9767717, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38c9a5d69836128311157f0050abad96?s=128&d=identicon&r=PG&f=1", "display_name": "ivan braga", "link": "https://stackoverflow.com/users/9767717/ivan-braga"}, "edited": false, "score": 0, "creation_date": 1525910880, "post_id": 50263615, "comment_id": 87545389, "body": "Sam Varshavchik, I know that if everything was in C ++ it would be right, but I try to reuse the code in c, because what I&#39;m trying to do is a RAD tool, ie drag and drop. So, I need the c code, as this will be used by the final application in c."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 2, "creation_date": 1525911135, "post_id": 50263615, "comment_id": 87545456, "body": "You should compile the C files in C.  (Maybe you are unaware that compiled C files can be linked into a C++ project)"}, {"owner": {"reputation": 13, "user_id": 9767717, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38c9a5d69836128311157f0050abad96?s=128&d=identicon&r=PG&f=1", "display_name": "ivan braga", "link": "https://stackoverflow.com/users/9767717/ivan-braga"}, "edited": false, "score": 0, "creation_date": 1525911258, "post_id": 50263615, "comment_id": 87545491, "body": "hit, I applied (void (<i>) (bool)), and the error stopped. You could explain (void (</i>) (bool)), so I understand what happens."}, {"owner": {"reputation": 6058, "user_id": 3871028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbe44ff5c56628e85683c8918602c96?s=128&d=identicon&r=PG&f=1", "display_name": "Ripi2", "link": "https://stackoverflow.com/users/3871028/ripi2"}, "edited": false, "score": 0, "creation_date": 1525911436, "post_id": 50263615, "comment_id": 87545542, "body": "<code>void (*fchd_ptr)(bool)</code> declares a pointer to a function that accepts a <code>bool</code> parameter and returns <code>void</code>"}, {"owner": {"reputation": 13, "user_id": 9767717, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38c9a5d69836128311157f0050abad96?s=128&d=identicon&r=PG&f=1", "display_name": "ivan braga", "link": "https://stackoverflow.com/users/9767717/ivan-braga"}, "edited": false, "score": 0, "creation_date": 1525911666, "post_id": 50263615, "comment_id": 87545600, "body": "M.M, I was going in that direction, compile in c and link."}], "answers": [{"comments": [{"owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "edited": false, "score": 1, "creation_date": 1525912371, "post_id": 50263792, "comment_id": 87545718, "body": "<i>recommend reworking the C API so that it really takes a function pointer</i> -- this will avoid the need of a cast for assignment."}, {"owner": {"reputation": 13, "user_id": 9767717, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38c9a5d69836128311157f0050abad96?s=128&d=identicon&r=PG&f=1", "display_name": "ivan braga", "link": "https://stackoverflow.com/users/9767717/ivan-braga"}, "edited": false, "score": 0, "creation_date": 1525912650, "post_id": 50263792, "comment_id": 87545789, "body": "jxh, Could you give an example? How would you do with the code example above?"}, {"owner": {"reputation": 5896, "user_id": 1106415, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6fvK.png?s=128&g=1", "display_name": "hlt", "link": "https://stackoverflow.com/users/1106415/hlt"}, "edited": false, "score": 1, "creation_date": 1525912773, "post_id": 50263792, "comment_id": 87545818, "body": "Basically the idea is to replace <code>void *fchd_ptr</code> in the function signature with <code>void (*fchd_ptr)(bool)</code> - the same function pointer type that you need later. That lets you avoid the cast, and the errors that can happen with <code>void *</code>"}], "tags": [], "owner": {"reputation": 5896, "user_id": 1106415, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6fvK.png?s=128&g=1", "display_name": "hlt", "link": "https://stackoverflow.com/users/1106415/hlt"}, "is_accepted": true, "score": 1, "last_activity_date": 1525911711, "creation_date": 1525911711, "answer_id": 50263792, "question_id": 50263615, "link": "https://stackoverflow.com/questions/50263615/void-to-void-bool-errors-with-pointers-compiling-files-in-c-with-a-c/50263792#50263792", "title": "&#39;void *&#39; to &#39;void (*) (bool)&#39; Errors with pointers compiling files in c with a c ++ compiler", "body": "<p>Your explicit cast is wrong. You cast to <code>bool *</code> (pointer to object of type <code>bool</code>), when you really should be casting to <code>void (*)(bool)</code> (pointer to function taking a <code>bool</code> and returning nothing).<sup>1</sup></p>\n\n<p>If you replace that line by</p>\n\n<pre><code>ptr-&gt;fchd_ptr = (void (*)(bool)) fchd_ptr;\n</code></pre>\n\n<p>it will compile in both C and C++.</p>\n\n<hr>\n\n<p>If possible, however, you should try to compile your C code in C only - while we might get this one thing working, the two languages are not always fully compatible, and you may well run into trouble down the road. Generally, it is possible to compile C code separately from the C++ parts. If you use <a href=\"https://stackoverflow.com/questions/1041866/what-is-the-effect-of-extern-c-in-c#1041880\"><code>extern \"C\"</code></a> in your header files, you can simply link the C++ objects and the C objects together, or keep the C part in a separate library (static or dynamic).</p>\n\n<p>Additionally, I would recommend reworking the C API so that it really takes a function pointer all the way through if that is at all possible. Aliasing through <code>void *</code> is ugly and can lead to some really nasty bugs and crashes if you pass in the wrong pointer type.</p>\n\n<hr>\n\n<p><sup>1</sup> Function pointers are generally very different from object pointers, and it is implementation-defined whether you are even allowed to cast between the two. Here, you want a pointer to a function, not a pointer to an object (like <code>bool*</code> would be a pointer to an object of type <code>bool</code>) so that you can call it later. You can see in your code sample that <code>void (*fchd_ptr)(bool)</code> is the declaration of the variable that you assign to, which makes <code>void (*)(bool)</code> its type. If you find the notation somewhat confusing, <a href=\"https://cdecl.org\" rel=\"nofollow noreferrer\">cdecl.org</a> is a great way to deal with those convoluted array, pointer and function pointer names that come from C.</p>\n"}, {"tags": [], "owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "is_accepted": false, "score": 1, "last_activity_date": 1525914437, "last_edit_date": 1525914437, "creation_date": 1525912293, "answer_id": 50263861, "question_id": 50263615, "link": "https://stackoverflow.com/questions/50263615/void-to-void-bool-errors-with-pointers-compiling-files-in-c-with-a-c/50263861#50263861", "title": "&#39;void *&#39; to &#39;void (*) (bool)&#39; Errors with pointers compiling files in c with a c ++ compiler", "body": "<p>If you change the signature of the function to accept a function pointer that matches the type expected by <code>ptr-&gt;fchd_ptr</code>. Then, you would not need to use a cast to complete the assignment.</p>\n\n<p>Based on your question, this would be:</p>\n\n<pre><code>void BT_SetHandler(BUTTON_t* ptr, void (*fchd_ptr)(bool))\n</code></pre>\n\n<p>However, if you are not sure what the type is for <code>ptr-&gt;fchd_ptr</code>, you can make the compiler figure it out for you. Previously, this could only be done with a template function and it would derive a type based on what was passed into the function call at compile time. However, C++.11 provdes <code>decltype</code>, which allows you to enforce the type you want for the function parameter, rather than letting the compiler deduce one from callers of the function.</p>\n\n<pre><code>void BT_SetHandler(BUTTON_t* ptr, decltype(ptr-&gt;fchd_ptr) fchd_ptr)\n</code></pre>\n\n<p>This is fine so long as you are intent on compiling your code with a C++ compiler.</p>\n"}], "owner": {"reputation": 13, "user_id": 9767717, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38c9a5d69836128311157f0050abad96?s=128&d=identicon&r=PG&f=1", "display_name": "ivan braga", "link": "https://stackoverflow.com/users/9767717/ivan-braga"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 227, "favorite_count": 0, "accepted_answer_id": 50263792, "answer_count": 2, "score": 0, "last_activity_date": 1525917781, "creation_date": 1525910185, "last_edit_date": 1525917781, "question_id": 50263615, "link": "https://stackoverflow.com/questions/50263615/void-to-void-bool-errors-with-pointers-compiling-files-in-c-with-a-c", "title": "&#39;void *&#39; to &#39;void (*) (bool)&#39; Errors with pointers compiling files in c with a c ++ compiler", "body": "<p>First of all, thank you to whoever is reading and to whom you can respond.</p>\n\n<p>This part of code, is part of an interface library gui, totally written in c.</p>\n\n<p>But I'm tempted to compile these written files in c, with a c ++ compiler to be able to integrate into a program I'm doing with wxwidgets.</p>\n\n<p>Within the c files, I have several function calls that have as arguments, pointers to other functions. </p>\n\n<pre><code> typedef struct {\n      void (*fchd_ptr)(bool);   \n      uint16_t xpos;         \n      uint16_t ypos;          \n        ...\n        ...\n}BUTTON_t;\n\nvoid BT_SetHandler(BUTTON_t* ptr, void* fchd_ptr)\n{\n    if (ptr == NULL)\n        return;\n\n    ptr-&gt;fchd_ptr =  fchd_ptr;  // OK in C, ERROR In C++\n}\n</code></pre>\n\n<p>When I try to compile in C ++, I get this error.</p>\n\n<pre><code>ptr-&gt; fkt_ptr = fkt_ptr;\n// error: invalid conversion from 'void *' to 'void (*) (bool)' [-fpermissive]\n</code></pre>\n\n<p>If I cast an explicit cast.</p>\n\n<pre><code>ptr-&gt; fkt_ptr = (bool *) fkt_ptr;\n// error: can not convert 'bool *' to 'void (*) (bool)' in assignment\n</code></pre>\n\n<p>Any help, and explanation how to solve it will be welcome.</p>\n"}, {"tags": ["c++", "struct", "packing"], "comments": [{"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 3, "creation_date": 1525910027, "post_id": 50263547, "comment_id": 87545199, "body": "It depends on the implementation - there is no &quot;standard C++&quot; answer.   If <code>first</code> and <code>second</code> have different alignment requirements, then the containing struct will probably have padding between the two members, even if they are both packed."}, {"owner": {"reputation": 1256, "user_id": 4130137, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/195f002689d15b2e4f3384d2c169fc68?s=128&d=identicon&r=PG&f=1", "display_name": "Anton", "link": "https://stackoverflow.com/users/4130137/anton"}, "reply_to_user": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 1, "creation_date": 1525910219, "post_id": 50263547, "comment_id": 87545243, "body": "What I mean is that the first case has &quot;no guarantees of packedness&quot;. I understand that in general, it&#39;s always possible to coincidentally have a packed struct, but that&#39;s not what I&#39;m looking for. The second case actually appears to be guaranteed to be packed (see answer below): but I&#39;m not super-clear, and I would love a more authoritative answer if you&#39;ve got one."}, {"owner": {"reputation": 1256, "user_id": 4130137, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/195f002689d15b2e4f3384d2c169fc68?s=128&d=identicon&r=PG&f=1", "display_name": "Anton", "link": "https://stackoverflow.com/users/4130137/anton"}, "reply_to_user": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 1, "creation_date": 1525914170, "post_id": 50263547, "comment_id": 87546102, "body": "If you know this to be implementation-defined, would you mind writing an answer? That&#39;s very helpful information, especially since the only answer here uses just an example. Thanks!"}], "answers": [{"comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1525912676, "post_id": 50263548, "comment_id": 87545801, "body": "What about a struct containing both Packed and NonPacked?  If you intend to only ask about a struct whose only members are Packed, then you should say so clearly in the question."}, {"owner": {"reputation": 1256, "user_id": 4130137, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/195f002689d15b2e4f3384d2c169fc68?s=128&d=identicon&r=PG&f=1", "display_name": "Anton", "link": "https://stackoverflow.com/users/4130137/anton"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1525914229, "post_id": 50263548, "comment_id": 87546115, "body": "Hi, thank you for the suggestion. I have edited the question to specify that the container contains solely member structs which are all packed. But more generally, I would love to get an answer that could define the rules surrounding packing and how it &quot;extends&quot; to enclosing classes, if such rules exist."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 4, "creation_date": 1525916442, "post_id": 50263548, "comment_id": 87546584, "body": "It&#39;s all up to the compiler , there are no independent rules"}, {"owner": {"reputation": 1256, "user_id": 4130137, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/195f002689d15b2e4f3384d2c169fc68?s=128&d=identicon&r=PG&f=1", "display_name": "Anton", "link": "https://stackoverflow.com/users/4130137/anton"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1525963966, "post_id": 50263548, "comment_id": 87568074, "body": "Thanks, that is good to know. Then I won&#39;t depend on this coincidental behaviour."}], "tags": [], "owner": {"reputation": 1256, "user_id": 4130137, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/195f002689d15b2e4f3384d2c169fc68?s=128&d=identicon&r=PG&f=1", "display_name": "Anton", "link": "https://stackoverflow.com/users/4130137/anton"}, "is_accepted": false, "score": 0, "last_activity_date": 1525963896, "last_edit_date": 1525963896, "creation_date": 1525909608, "answer_id": 50263548, "question_id": 50263547, "link": "https://stackoverflow.com/questions/50263547/are-structs-that-contain-packed-structs-packed-themselves/50263548#50263548", "title": "Are structs that contain packed structs packed themselves?", "body": "<p>Edit: it is up to the compiler and is not a behaviour one can depend on.</p>\n\n<p>For the case of GCC and clang, structs that contain only packed structs are themselves \"packed\". They will not have any padding \"holes\" in them.</p>\n\n<p>Here is an example to illustrate (godbolt link: <a href=\"https://godbolt.org/g/2noSpP\" rel=\"nofollow noreferrer\">https://godbolt.org/g/2noSpP</a>):</p>\n\n<p>We have four structs, Packed1, Packed2, NonPacked1, and NonPacked2.</p>\n\n<pre><code>#include &lt;cstdint&gt;\n\nstruct Packed1\n{\n    uint32_t a;\n    uint64_t b;\n} __attribute__((packed));\n\nstruct NonPacked1\n{\n    uint16_t a;\n    // Padding of 2 bytes\n    uint32_t b;\n    uint8_t c;\n};\n\n// We have two structs of the same size, one packed and one not\nstatic_assert(sizeof(NonPacked1) == 12);\nstatic_assert(sizeof(Packed1) == 12);\n\nstruct Packed2\n{\n    uint64_t a;\n    uint64_t b;\n} __attribute__((packed)); // packing has no effect, but better for illustration\n\nstruct NonPacked2\n{\n    uint32_t a;\n    // Padding of 4 bytes\n    uint64_t b;\n};\n\n// And again, two structs of the same size\nstatic_assert(sizeof(Packed2) == 16);\nstatic_assert(sizeof(NonPacked2) == 16);\n</code></pre>\n\n<p>Packed1 and Packed2 go into a ContainerOfPacked struct, and the other two into a ContainerOfNonPacked.</p>\n\n<pre><code>struct ContainerOfNonPacked\n{\n    NonPacked1 first; // 12 bytes\n    // Padding of 4 bytes between the non-packed struct-fields\n    NonPacked2 second; // 16 bytes\n};\n\nstruct ContainerOfPacked\n{\n    Packed1 first; // 12\n    // No padding between the packed struct-fields\n    Packed2 second; // 16\n};\n\nstatic_assert(sizeof(ContainerOfNonPacked) == 32);\nstatic_assert(sizeof(ContainerOfPacked) == 28);\n</code></pre>\n\n<p>As the code comments and static asserts show, the container of packed structs does not have padding holes inside it. It behaves as if it is itself \"packed\".</p>\n\n<p>Although this is an answer, I'm also looking for answers which can cite the relevant parts of the Standard or some other authoritative/theoretical explanations.</p>\n"}], "owner": {"reputation": 1256, "user_id": 4130137, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/195f002689d15b2e4f3384d2c169fc68?s=128&d=identicon&r=PG&f=1", "display_name": "Anton", "link": "https://stackoverflow.com/users/4130137/anton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 121, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1525963896, "creation_date": 1525909608, "last_edit_date": 1525914454, "question_id": 50263547, "link": "https://stackoverflow.com/questions/50263547/are-structs-that-contain-packed-structs-packed-themselves", "title": "Are structs that contain packed structs packed themselves?", "body": "<p>Suppose I have a struct which contains other structs, which are not packed:</p>\n\n<pre><code>struct ContainerOfNonPacked\n{\n    NonPacked1 first;\n    NonPacked2 second;\n};\n</code></pre>\n\n<p>And then I have a struct which contains other structs which are packed:</p>\n\n<pre><code>struct ContainerOfPacked\n{\n    Packed1 first; // declaration of struct had __attribute__((packed))\n    Packed2 second; // ditto\n};\n</code></pre>\n\n<p>The first is not going to be packed by the compiler (i.e. there's no guarantee that there will be no \"holes\" inside the struct). It might coincidentally have no holes, but that's not what the question is about.</p>\n\n<p>What about the second container, that contains packed structs? Is there any <em>guarantee</em> that a struct consisting solely of packed structs as its fields is itself packed?</p>\n"}, {"tags": ["c++", "c", "loops", "if-statement", "while-loop"], "comments": [{"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 5, "creation_date": 1525909565, "post_id": 50263523, "comment_id": 87545084, "body": "Pop quiz: what does <code>=</code> do? What does <code>==</code> do? When should you use one, or the other? Are you using them correctly? (Cheat sheet: the answer to the last one is &quot;no&quot;) Bonus question: <a href=\"https://stackoverflow.com/questions/50263460/c-function-not-receiving-return-value\">do you know the person who asked his question just before you did yours?</a>"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 3, "creation_date": 1525909575, "post_id": 50263523, "comment_id": 87545088, "body": "Sadly <code>=</code> != <code>==</code>."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "reply_to_user": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1525909616, "post_id": 50263523, "comment_id": 87545099, "body": "@SamVarshavchik Ever get the feeling you are repeating yourself?"}, {"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 1, "creation_date": 1525909652, "post_id": 50263523, "comment_id": 87545108, "body": "It&#39;s a thankless task, but someone has to do it..."}, {"owner": {"reputation": 5896, "user_id": 1106415, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6fvK.png?s=128&g=1", "display_name": "hlt", "link": "https://stackoverflow.com/users/1106415/hlt"}, "edited": false, "score": 0, "creation_date": 1525910759, "post_id": 50263523, "comment_id": 87545367, "body": "<i>repetitio est mater studiorum</i>"}, {"owner": {"reputation": 86, "user_id": 14462794, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lPLzy.png?s=128&g=1", "display_name": "Rane", "link": "https://stackoverflow.com/users/14462794/rane"}, "edited": false, "score": 0, "creation_date": 1616059823, "post_id": 50263523, "comment_id": 117886355, "body": "Turn on all warnings (<code>-Wall -Wextra -Wpedantic</code>), read and fix them. This typo could have been avoided."}], "answers": [{"comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1525910846, "post_id": 50263543, "comment_id": 87545382, "body": "Don&#39;t waste time answering trivial typo questions. Just flag them for closing."}], "tags": [], "owner": {"reputation": 159, "user_id": 6224137, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d9239cae05f73d8bed41c693bd45655?s=128&d=identicon&r=PG", "display_name": "Ahmed Abdelaal", "link": "https://stackoverflow.com/users/6224137/ahmed-abdelaal"}, "is_accepted": false, "score": 1, "last_activity_date": 1564029655, "last_edit_date": 1564029655, "creation_date": 1525909592, "answer_id": 50263543, "question_id": 50263523, "link": "https://stackoverflow.com/questions/50263523/c-why-wont-my-program-loop-and-if-statements-not-work/50263543#50263543", "title": "C Why won&#39;t my program loop and &quot;if-statements&quot; not work?", "body": "<p>use <code>==</code> instead of <code>=</code>\nfor example </p>\n\n<pre><code>if (paycode == 1)\n{\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 135, "user_id": 1623055, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69580c601325f2ec7964a43579d9d2a7?s=128&d=identicon&r=PG", "display_name": "Daman Pal Singh Khanna", "link": "https://stackoverflow.com/users/1623055/daman-pal-singh-khanna"}, "edited": false, "score": 0, "creation_date": 1525909887, "post_id": 50263574, "comment_id": 87545165, "body": "Additionally you should look to use switch case instead of if and break down your code into small chunks (functions)"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1525910031, "post_id": 50263574, "comment_id": 87545201, "body": "Recommend an edit to the answer to move that comment into it. It&#39;s a worthwhile addition."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 2, "creation_date": 1525910870, "post_id": 50263574, "comment_id": 87545386, "body": "Don&#39;t waste time answering trivial typo questions. Just flag the question for closing."}, {"owner": {"reputation": 19, "user_id": 9767845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2c30ec020bf5bee1151facffb837e55?s=128&d=identicon&r=PG&f=1", "display_name": "Cronin709", "link": "https://stackoverflow.com/users/9767845/cronin709"}, "edited": false, "score": 0, "creation_date": 1525960394, "post_id": 50263574, "comment_id": 87565752, "body": "Thanks a million! I can&#39;t believe I overlooked this simple fix... I will look more carefully at my coding from now on."}], "tags": [], "owner": {"reputation": 135, "user_id": 1623055, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69580c601325f2ec7964a43579d9d2a7?s=128&d=identicon&r=PG", "display_name": "Daman Pal Singh Khanna", "link": "https://stackoverflow.com/users/1623055/daman-pal-singh-khanna"}, "is_accepted": true, "score": 1, "last_activity_date": 1525909807, "creation_date": 1525909807, "answer_id": 50263574, "question_id": 50263523, "link": "https://stackoverflow.com/questions/50263523/c-why-wont-my-program-loop-and-if-statements-not-work/50263574#50263574", "title": "C Why won&#39;t my program loop and &quot;if-statements&quot; not work?", "body": "<p>your if statements needs to have '==' instead of '='. Do the changes and try it out, if statements will start working.</p>\n"}], "owner": {"reputation": 19, "user_id": 9767845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2c30ec020bf5bee1151facffb837e55?s=128&d=identicon&r=PG&f=1", "display_name": "Cronin709", "link": "https://stackoverflow.com/users/9767845/cronin709"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 0, "closed_date": 1525910719, "accepted_answer_id": 50263574, "answer_count": 2, "score": -3, "last_activity_date": 1616049701, "creation_date": 1525909386, "last_edit_date": 1616049701, "question_id": 50263523, "link": "https://stackoverflow.com/questions/50263523/c-why-wont-my-program-loop-and-if-statements-not-work", "closed_reason": "Not suitable for this site", "title": "C Why won&#39;t my program loop and &quot;if-statements&quot; not work?", "body": "<p>I am trying to write a code for school that allows the user to calculate different salaries based on the type of employee it is working. I believe I have all of the math coding done correctly however I need to make the program loop after each employee is selected. Here is the coding that I have completed thus far:</p>\n<pre><code>int paycode = 0;                                        \ndouble manager_salary;                                  \ndouble worker_salary;                                   \ndouble worker_hours;                                    \ndouble ot;                                              \ndouble worker_wage;                                     \ndouble sales;                                           \ndouble commission;                                      \ndouble pieces;                                          \ndouble piece_wage;                                      \ndouble pieceworker;                                     \n\nwhile (paycode &gt;= 0 &amp;&amp; paycode != 1)                    \n{\n    printf(&quot;\\n Enter the employee paycode (1-4) (-1 to end): &quot;);        \n    scanf_s(&quot;%d&quot;, &amp;paycode);\n\n    if (paycode = 1)                                                    \n    {\n        printf(&quot;\\n Manager Selected&quot;);                                  \n        printf(&quot;\\n Enter weekly Salary: &quot;);                             \n        scanf_s(&quot;%lf&quot;, &amp;manager_salary);\n        printf(&quot;\\nManagers Pay is $%.2f&quot;, manager_salary);              \n    }\n    else if (paycode = 2)\n    {\n        printf(&quot;\\n Hourly Worker Selected&quot;);                            \n        printf(&quot;\\n Enter the hourly salary: &quot;);                         \n        scanf_s(&quot;%lf&quot;, &amp;worker_salary);\n        printf(&quot;\\n Enter the total hours worked: &quot;);                    \n        scanf_s(&quot;%lf&quot;, &amp;worker_hours);\n        if (worker_hours &gt; 40.00)                                               \n            ot = (worker_hours - 40.00) * worker_salary *1.5;                   \n        else\n            ot = 0.00;                                                          \n        if (worker_hours &gt; 40.00)                                               \n            worker_wage = 40 * 16.78 + ot;                                      \n        else\n            worker_wage = worker_hours * worker_salary;                         \n        printf(&quot;\\n Hourly Worker's Pay is $%.2f&quot;, worker_wage);                 \n    }\n    else if (paycode = 3)\n    {\n        printf(&quot;\\n Commission Worker Selected&quot;);                        \n        printf(&quot;\\n Enter gross weekly sales: &quot;);                        \n        scanf_s(&quot;%lf&quot;, &amp;sales);\n        commission = sales * .057 + 250;                                \n        printf(&quot;\\n Commission Worker's Pay is $%.2f&quot;, commission);      \n    }\n    else if (paycode = 4)\n    {\n        printf(&quot;\\n Pieceworker Selected&quot;);                              \n        printf(&quot;\\n Enter number of pieces: &quot;);                          \n        scanf_s(&quot;%lf&quot;, &amp;pieces);\n        printf(&quot;\\n Enter wage per piece: &quot;);                            \n        scanf_s(&quot;%lf&quot;, &amp;piece_wage);\n        pieceworker = pieces * piece_wage;\n        printf(&quot;\\n Pieceworker's pay is $%.2f&quot;, pieceworker);           \n    }\n}\nreturn 0;\n</code></pre>\n<p>}</p>\n<p>When I run the program the if statements don't work and the program just spits out every single printf statement I have written.</p>\n<p>Please help me in telling me how to get my if statements to work and how to properly make a loop when properly filling out an employee salary.</p>\n<p>TIA</p>\n"}, {"tags": ["c++", "algorithm", "permutation", "analysis"], "comments": [{"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 0, "creation_date": 1525941144, "post_id": 50263446, "comment_id": 87555026, "body": "Where do you see O(n*n!)? (&quot;n!&quot;, literally: <a href=\"https://en.wikipedia.org/wiki/Factorial\" rel=\"nofollow noreferrer\">factorial of n</a> would be really terrible but I cannot find it in your sample.) <a href=\"https://en.cppreference.com/w/cpp/algorithm/sort#Complexity\" rel=\"nofollow noreferrer\"><code>std::sort()</code></a> has O(N*log(N)). <a href=\"http://en.cppreference.com/w/cpp/algorithm/next_permutation#Complexity\" rel=\"nofollow noreferrer\"><code>std::next_permutation()</code></a> has at most N/2 swaps."}, {"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 0, "creation_date": 1525941963, "post_id": 50263446, "comment_id": 87555413, "body": "Have a look at the <a href=\"http://en.cppreference.com/w/cpp/algorithm/next_permutation#Possible_implementation\" rel=\"nofollow noreferrer\">Possible implementation</a>  of <code>std::next_permutation()</code>. Though, the mathematical definition of permutation usually might use factorials, there&#39;s no such terrible construct in this implementation - instead a simple loop with checks and swaps - which is &quot;smelling&quot; like O(N)."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "reply_to_user": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 0, "creation_date": 1525995627, "post_id": 50263446, "comment_id": 87582361, "body": "@scheff: std::next_permutation is amortized O(1) if there are no duplicates in the vector. But it is O(n) to print the permutation, as OP says. There are <code>n!</code> permutations, so the whole process takes O(n * n!)"}, {"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "reply_to_user": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1526024178, "post_id": 50263446, "comment_id": 87590542, "body": "@rici Sigh. That&#39;s true. I forgot to consider the <code>do while</code> loop..."}], "owner": {"reputation": 43, "user_id": 7601779, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6de7c1de7df6983992406303fa27fa4b?s=128&d=identicon&r=PG&f=1", "display_name": "RyanP", "link": "https://stackoverflow.com/users/7601779/ryanp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 77, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1525908731, "creation_date": 1525908731, "question_id": 50263446, "link": "https://stackoverflow.com/questions/50263446/analysis-of-algorithm-for-permutation-generation", "title": "Analysis of algorithm for permutation generation", "body": "<p>I've been trying to get around for the analysis of this C++ program for permutation generation. I know in the algorithm that the time complexity is O(n*n!) and O(n) because it requires it to print a permutation. Can someone further explain the analysis of the implementation below? </p>\n\n<pre><code>// permutation generator\n#include &lt;iostream&gt;     // std::cout\n#include &lt;algorithm&gt;    // std::next_permutation, std::sort\n\nint main () {\n  int myints[] = {1,2,3};\n\n  std::sort (myints,myints+3);\n\n  do {\n    std::cout &lt;&lt; myints[0] &lt;&lt; ' ' &lt;&lt; myints[1] &lt;&lt; ' ' &lt;&lt; myints[2] &lt;&lt; '\\n';\n  } while ( std::next_permutation(myints,myints+3) );\n\n  return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "c++builder", "vcl"], "comments": [{"owner": {"reputation": 1304, "user_id": 1927753, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/0f9533437be5bdcf493bfbbd101747a2?s=128&d=identicon&r=PG", "display_name": "Totte Karlsson", "link": "https://stackoverflow.com/users/1927753/totte-karlsson"}, "reply_to_user": {"reputation": 20494, "user_id": 9609840, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XZJmc.png?s=128&g=1", "display_name": "JeJo", "link": "https://stackoverflow.com/users/9609840/jejo"}, "edited": false, "score": 0, "creation_date": 1525909829, "post_id": 50263365, "comment_id": 87545156, "body": "I believe I was looking at old code for TStringList. I&#39;ll update with new code in a second"}], "answers": [{"tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": true, "score": 2, "last_activity_date": 1525911033, "creation_date": 1525911033, "answer_id": 50263731, "question_id": 50263365, "link": "https://stackoverflow.com/questions/50263365/how-to-custom-sort-a-vcl-tlistbox/50263731#50263731", "title": "How to custom sort a VCL TListBox?", "body": "<p>Your sort function is expected to return a value that is <code>&lt; 0</code>, <code>0</code>, or <code>&gt; 0</code>, depending on the desired order of the two input parameters.  But you are not doing that correctly.  You are returning either <code>0</code> or <code>1</code>, but never <code>&lt; 0</code>, because you are returning the (implicitly converted) result of a boolean expression, which can only be <code>false</code> or <code>true</code>.</p>\n\n<p>You need to change this line:</p>\n\n<pre><code>return k1-&gt;mValue &lt; k2-&gt;mValue;\n</code></pre>\n\n<p>To this instead:</p>\n\n<pre><code>if (k1-&gt;mValue &lt; k2-&gt;mValue) return -1;\nelse if (k1-&gt;mValue &gt; k2-&gt;mValue) return 1;\nelse return 0;\n</code></pre>\n\n<p>Alternatively, use the RTL's <a href=\"http://docwiki.embarcadero.com/Libraries/en/System.SysUtils.AnsiCompareStr\" rel=\"nofollow noreferrer\"><code>AnsiCompareStr()</code></a> or <a href=\"http://docwiki.embarcadero.com/Libraries/en/System.SysUtils.CompareStr\" rel=\"nofollow noreferrer\"><code>CompareStr()</code></a> function instead:</p>\n\n<pre><code>return AnsiCompareStr(k1-&gt;mValue, k2-&gt;mValue);\n</code></pre>\n\n<p></p>\n\n<pre><code>return CompareStr(k1-&gt;mValue, k2-&gt;mValue);\n</code></pre>\n"}], "owner": {"reputation": 1304, "user_id": 1927753, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/0f9533437be5bdcf493bfbbd101747a2?s=128&d=identicon&r=PG", "display_name": "Totte Karlsson", "link": "https://stackoverflow.com/users/1927753/totte-karlsson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 200, "favorite_count": 0, "accepted_answer_id": 50263731, "answer_count": 1, "score": 1, "last_activity_date": 1526589983, "creation_date": 1525907951, "last_edit_date": 1526589983, "question_id": 50263365, "link": "https://stackoverflow.com/questions/50263365/how-to-custom-sort-a-vcl-tlistbox", "title": "How to custom sort a VCL TListBox?", "body": "<p>I'm trying to figure out how to supply my own custom sort method to items and strings in a <code>TListBox</code>.</p>\n\n<p>My list box stores a custom object in its <code>Object</code> property, and I need to use that in the custom sort.</p>\n\n<p>I'm basing the below code on this post (Delphi): <a href=\"https://stackoverflow.com/questions/27382906/is-it-possible-to-sort-a-tlistbox-using-a-custom-sort-comparator\">Is it possible to sort a TListBox using a custom sort comparator?</a></p>\n\n<p>My custom sort function looks like this</p>\n\n<pre><code>int __fastcall SortListByValue (TStringList* sl, int item1, int item2)\n{\n    IniKey* k1 = (IniKey*) sl-&gt;Objects[item1];\n    IniKey* k2 = (IniKey*) sl-&gt;Objects[item2];\n    return k1-&gt;mValue &lt; k2-&gt;mValue;\n}\n</code></pre>\n\n<p>The key values are strings. Currently they can be \"-\", \"Yes\", \"No\" and \"Pass\".</p>\n\n<p>And the code where it is called is like this:</p>\n\n<pre><code>void __fastcall TMainForm::sortByValueAExecute(TObject *Sender)\n{\n    Log(lInfo) &lt;&lt; \"Sorting list based on Values\";\n    TStringList* sl = new TStringList();\n    sl-&gt;Assign(imagesLB-&gt;Items);\n    sl-&gt;CustomSort(SortListByValue);\n    imagesLB-&gt;Items-&gt;Assign(sl);\n}\n</code></pre>\n\n<p>The above code does \"something\" to the list, but its not sorted.</p>\n\n<p>The resulting list starts with \"-\" items, and all \"Yes\" items are consecutive. \"No\" and \"Pass\" and \"-\" items are then scrambled.</p>\n\n<p>Any clues?</p>\n"}, {"tags": ["c++", "constexpr", "stdarray"], "comments": [{"owner": {"reputation": 5538, "user_id": 5980430, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e941fd748178dc871ae6a9974d5099d4?s=128&d=identicon&r=PG&f=1", "display_name": "apple apple", "link": "https://stackoverflow.com/users/5980430/apple-apple"}, "edited": false, "score": 0, "creation_date": 1525913566, "post_id": 50263306, "comment_id": 87545966, "body": "I&#39;d like to know why you want it to be <code>std::array</code>. Besides, <code>first_n_fibs&lt;n&gt;</code> create a lot of instance while all these are (prefix) equal."}, {"owner": {"reputation": 23279, "user_id": 700825, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/6aea6e2f57f2a7b1cd6870375fbdc42f?s=128&d=identicon&r=PG", "display_name": "NoSenseEtAl", "link": "https://stackoverflow.com/users/700825/nosenseetal"}, "reply_to_user": {"reputation": 5538, "user_id": 5980430, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e941fd748178dc871ae6a9974d5099d4?s=128&d=identicon&r=PG&f=1", "display_name": "apple apple", "link": "https://stackoverflow.com/users/5980430/apple-apple"}, "edited": false, "score": 0, "creation_date": 1525913768, "post_id": 50263306, "comment_id": 87546018, "body": "because IDK how to operate on C array at compile time. As for instances and duplication: I know about that, but in some cases it is worth the cost."}, {"owner": {"reputation": 5538, "user_id": 5980430, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e941fd748178dc871ae6a9974d5099d4?s=128&d=identicon&r=PG&f=1", "display_name": "apple apple", "link": "https://stackoverflow.com/users/5980430/apple-apple"}, "edited": false, "score": 0, "creation_date": 1525914151, "post_id": 50263306, "comment_id": 87546098, "body": "if you work on C array than any prefix-equal const <code>first_n_fibs</code> can be represent by single pointer to the longest array. can you provide your use case?"}, {"owner": {"reputation": 5538, "user_id": 5980430, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e941fd748178dc871ae6a9974d5099d4?s=128&d=identicon&r=PG&f=1", "display_name": "apple apple", "link": "https://stackoverflow.com/users/5980430/apple-apple"}, "edited": false, "score": 0, "creation_date": 1525914482, "post_id": 50263306, "comment_id": 87546161, "body": "otherwise if you want to get only the <code>nth-fib</code> at compile time a <code>std::array</code> may be overkill."}], "answers": [{"comments": [{"owner": {"reputation": 23279, "user_id": 700825, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/6aea6e2f57f2a7b1cd6870375fbdc42f?s=128&d=identicon&r=PG", "display_name": "NoSenseEtAl", "link": "https://stackoverflow.com/users/700825/nosenseetal"}, "edited": false, "score": 0, "creation_date": 1525909540, "post_id": 50263392, "comment_id": 87545075, "body": "nice workaround, but in general I prefer to have it inside class, since having a bunch of &quot;getter&quot; functions is not nice(and may be slower) from design point of view."}, {"owner": {"reputation": 23279, "user_id": 700825, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/6aea6e2f57f2a7b1cd6870375fbdc42f?s=128&d=identicon&r=PG", "display_name": "NoSenseEtAl", "link": "https://stackoverflow.com/users/700825/nosenseetal"}, "edited": false, "score": 0, "creation_date": 1525914960, "post_id": 50263392, "comment_id": 87546245, "body": "Actually you are right, gcc was giving me lame error, all I did was that I did not initializer ret with {} like you did."}], "tags": [], "owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "is_accepted": true, "score": 5, "last_activity_date": 1525908256, "creation_date": 1525908256, "answer_id": 50263392, "question_id": 50263306, "link": "https://stackoverflow.com/questions/50263306/is-it-possible-to-initialize-constexpr-stdarray-member-in-a-programtic-way/50263392#50263392", "title": "Is it possible to initialize constexpr std::array member in a programtic way", "body": "<p>You don't need anything special, <code>constexpr</code> function requirements are very relaxed these days:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;array&gt;\n\ntemplate &lt;int N&gt; constexpr std::array&lt;int, N&gt; first_n_fibs()\n{\n    std::array&lt;int, N&gt; ret{};\n    ret[0] = 0;\n    if (N == 1) return ret;\n    ret[1] = 1;\n    for (int i = 2; i &lt; N; i++)\n        ret[i] = ret[i-2] + ret[i-1];\n    return ret;\n}\n\nint main()\n{\n    constexpr auto a = first_n_fibs&lt;3&gt;();\n}\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/4429cac6e67661a9\" rel=\"noreferrer\">(try it live)</a></p>\n\n<hr>\n\n<blockquote>\n  <p><code>std::array</code> constructors are not constexpr</p>\n</blockquote>\n\n<p>Apparently it has <a href=\"http://en.cppreference.com/w/cpp/container/array\" rel=\"noreferrer\">no user-defined constructors at all</a>, so nothing stops its construction from being <code>constexpr</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 23279, "user_id": 700825, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/6aea6e2f57f2a7b1cd6870375fbdc42f?s=128&d=identicon&r=PG", "display_name": "NoSenseEtAl", "link": "https://stackoverflow.com/users/700825/nosenseetal"}, "edited": false, "score": 0, "creation_date": 1525914131, "post_id": 50264041, "comment_id": 87546094, "body": "&quot;std::array is totally constexpr constructible&quot; IDK the language terms, but when I put constexpr in front of member it does not compile :)"}, {"owner": {"reputation": 23279, "user_id": 700825, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/6aea6e2f57f2a7b1cd6870375fbdc42f?s=128&d=identicon&r=PG", "display_name": "NoSenseEtAl", "link": "https://stackoverflow.com/users/700825/nosenseetal"}, "edited": false, "score": 0, "creation_date": 1525914183, "post_id": 50264041, "comment_id": 87546106, "body": "&quot;error: constexpr static data member &#39;vals&#39; must have an initializer&quot;"}, {"owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "reply_to_user": {"reputation": 23279, "user_id": 700825, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/6aea6e2f57f2a7b1cd6870375fbdc42f?s=128&d=identicon&r=PG", "display_name": "NoSenseEtAl", "link": "https://stackoverflow.com/users/700825/nosenseetal"}, "edited": false, "score": 0, "creation_date": 1525914282, "post_id": 50264041, "comment_id": 87546126, "body": "@NoSenseEtAl when making a variable constexpr, you must give it a value, as your compiler is telling you. It needs an initializer. Alternatively, you can put your definition inline and mark the definition add constexpr."}, {"owner": {"reputation": 23279, "user_id": 700825, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/6aea6e2f57f2a7b1cd6870375fbdc42f?s=128&d=identicon&r=PG", "display_name": "NoSenseEtAl", "link": "https://stackoverflow.com/users/700825/nosenseetal"}, "edited": false, "score": 0, "creation_date": 1525915046, "post_id": 50264041, "comment_id": 87546266, "body": "Plese see my other comments, bug was me not writing {} when initializing array in my function, and GCC giving me silly error."}, {"owner": {"reputation": 23279, "user_id": 700825, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/6aea6e2f57f2a7b1cd6870375fbdc42f?s=128&d=identicon&r=PG", "display_name": "NoSenseEtAl", "link": "https://stackoverflow.com/users/700825/nosenseetal"}, "edited": false, "score": 0, "creation_date": 1525915094, "post_id": 50264041, "comment_id": 87546275, "body": "I still upvoted your answer, I am sorry you wasted time on helping me, but really error smelled like constexpr problem(it contained &quot;is not usable as a constexpr function because&quot;)"}], "tags": [], "owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "is_accepted": false, "score": 2, "last_activity_date": 1570625412, "last_edit_date": 1570625412, "creation_date": 1525913991, "answer_id": 50264041, "question_id": 50263306, "link": "https://stackoverflow.com/questions/50263306/is-it-possible-to-initialize-constexpr-stdarray-member-in-a-programtic-way/50264041#50264041", "title": "Is it possible to initialize constexpr std::array member in a programtic way", "body": "<p>You can use immediately called lambda:</p>\n\n<pre><code>struct foo {\n    static constexpr auto arr = []{\n        std::array&lt;int, 6&gt; a{};\n\n        for (auto&amp; e : a) {\n            // stuff\n        }\n\n        return a;\n    }();\n};\n</code></pre>\n\n<p>But as HolyBlackCat said, <code>std::array</code> is constexpr constructible, since it has no defined constructor, only compiler defined ones.</p>\n\n<p>Here's <a href=\"http://coliru.stacked-crooked.com/a/01d1756f84606f74\" rel=\"nofollow noreferrer\">live example at coliru</a></p>\n"}], "owner": {"reputation": 23279, "user_id": 700825, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/6aea6e2f57f2a7b1cd6870375fbdc42f?s=128&d=identicon&r=PG", "display_name": "NoSenseEtAl", "link": "https://stackoverflow.com/users/700825/nosenseetal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2967, "favorite_count": 1, "accepted_answer_id": 50263392, "answer_count": 2, "score": 3, "last_activity_date": 1570625412, "creation_date": 1525907547, "question_id": 50263306, "link": "https://stackoverflow.com/questions/50263306/is-it-possible-to-initialize-constexpr-stdarray-member-in-a-programtic-way", "title": "Is it possible to initialize constexpr std::array member in a programtic way", "body": "<p>Lets assume I want to write struct that has a member constexpr std::array that contains first N fibs, where N is a template argument.</p>\n\n<p>Something like this but with vals being avaliable at compile time:</p>\n\n<pre><code>template &lt;int N&gt;\nstruct first_n_fibs {\n    static_assert(N&gt;0);\n    static const std::array&lt;int, N&gt; vals;\n    static std::array&lt;int, N&gt; init_fibs(){\n        std::array&lt;int,N&gt; result;\n        if (N==1) {\n            return std::array&lt;int,N&gt;{1};\n        } else {\n            result[0]=1;\n            result[1]=1;\n            for(int i =2; i&lt;N;++i) {\n                result[i]=result[i-2]+result[i-1];\n            }\n        }\n        return result;\n    }\n};\n\ntemplate&lt;int N&gt;\nconst std::array&lt;int, N&gt; first_n_fibs&lt;N&gt;::vals=init_fibs();\n\n\nint main(){\n    std::cout &lt;&lt; first_n_fibs&lt;2&gt;::vals.back() &lt;&lt; std::endl;\n    std::cout &lt;&lt; first_n_fibs&lt;5&gt;::vals.back() &lt;&lt; std::endl;\n    std::cout &lt;&lt; first_n_fibs&lt;6&gt;::vals.back() &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>I suspect there is no workaround since std::array constructors are not constexpr, so if somebody knows any workarounds involving C arrays or boost I would be happy with that.</p>\n"}, {"tags": ["c++", "readfile"], "comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1525907314, "post_id": 50263246, "comment_id": 87544575, "body": "<code>cout &lt;&lt; r[i];</code>-&gt;<code>cout &lt;&lt; r[i].price;</code>"}, {"owner": {"reputation": 39, "user_id": 9091443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b7927fa21763e6771f92a630307a589?s=128&d=identicon&r=PG&f=1", "display_name": "Niku Nik", "link": "https://stackoverflow.com/users/9091443/niku-nik"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1525907421, "post_id": 50263246, "comment_id": 87544598, "body": "Wait it was that simple?!?!?! You are a god."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1525907596, "post_id": 50263246, "comment_id": 87544641, "body": "Keep an eye on <code>while(ifs.good())</code> It&#39;s testing that the stream is good before reading the stream and leaving you at the mercy of the read failing undetected before the bad values are used. Similar to the problem described here: <a href=\"https://stackoverflow.com/questions/5605125/why-is-iostreameof-inside-a-loop-condition-considered-wrong\" title=\"why is iostreameof inside a loop condition considered wrong\">stackoverflow.com/questions/5605125/&hellip;</a>"}, {"owner": {"reputation": 39, "user_id": 9091443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b7927fa21763e6771f92a630307a589?s=128&d=identicon&r=PG&f=1", "display_name": "Niku Nik", "link": "https://stackoverflow.com/users/9091443/niku-nik"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1525908624, "post_id": 50263246, "comment_id": 87544889, "body": "Going to read that. Thanks a lot again."}, {"owner": {"reputation": 11, "user_id": 9653832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39711c20663671e42797dd9c9c922c82?s=128&d=identicon&r=PG&f=1", "display_name": "WebbDev2018", "link": "https://stackoverflow.com/users/9653832/webbdev2018"}, "edited": false, "score": 0, "creation_date": 1525908881, "post_id": 50263246, "comment_id": 87548362, "body": "You can always look into using <code>#include &lt;stringstream&gt;</code>, this library allows for full line strings to be be broken apart, I suggest reading some documentation on <a href=\"http://www.cplusplus.com/reference/sstream/stringstream/\" rel=\"nofollow noreferrer\">cplusplus.com/reference/sstream/stringstream</a>. By using the \u201c&gt;&gt;\u201d operator (shown in the documentation), It will allow you to extract only the price from your string."}], "answers": [{"tags": [], "owner": {"reputation": 376, "user_id": 4284179, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d28b7a54f846ace2017a022547c5e999?s=128&d=identicon&r=PG&f=1", "display_name": "Willi", "link": "https://stackoverflow.com/users/4284179/willi"}, "is_accepted": false, "score": 0, "last_activity_date": 1525923350, "creation_date": 1525923350, "answer_id": 50265087, "question_id": 50263246, "link": "https://stackoverflow.com/questions/50263246/c-reading-file-search-for-something-in-that-file/50265087#50265087", "title": "C++ reading file search for something in that file", "body": "<p>I have written my own code that reads in your text file and stores the information in a struct. Once you have a vector of MenuList, it is dead simple to only print what you want.</p>\n\n<pre><code>include \"stdafx.h\"\n#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;string&gt;\n#include &lt;vector&gt;\n\nusing namespace std;\n\nstruct MenuList // Define a \"Player\" data structure\n{\n    string itemNo;\n    string category;\n    string descript;\n    double price;\n};\n\nvoid addToList(vector&lt;MenuList*&gt;&amp; vector_menu_list, string&amp; itemNo, string&amp; category, string&amp; descript, string&amp; price)\n{\n    MenuList* p_menu_list = new MenuList;\n    p_menu_list-&gt;itemNo = itemNo;\n    p_menu_list-&gt;category = category;\n    p_menu_list-&gt;descript = descript;\n    p_menu_list-&gt;price = std::stod(price);\n    vector_menu_list.push_back(p_menu_list);\n}\n\nvector&lt;MenuList*&gt; readFile(string filename, bool&amp; error_encountered)\n{\n    vector&lt;MenuList*&gt; vector_menu_list;\n\n    ifstream file;\n    file.open(filename);\n\n    if (file.is_open())\n    {\n        string itemNo;\n        string category;\n        string descript;\n        string price;\n        short number_of_colons_encountered = 0;\n\n        char c;\n        while (file.get(c))\n        {\n            if ('\\n' != c &amp;&amp; EOF != c)\n            {\n                if (':' == c)\n                {\n                    number_of_colons_encountered++;\n                    continue;\n                }\n\n                switch (number_of_colons_encountered)\n                {\n                case 0:\n                    itemNo += c;\n                    break;\n                case 1:\n                    category += c;\n                    break;\n                case 2:\n                    descript += c;\n                    break;\n                case 3: \n                    price += c;\n                    break;\n                default:\n                    error_encountered = true;\n                    file.close();\n                    return vector_menu_list;\n                }\n            }\n            else\n            {\n                addToList(vector_menu_list, itemNo, category, descript, price);\n                itemNo.clear();\n                category.clear();\n                descript.clear();\n                price.clear();\n                number_of_colons_encountered = 0;\n            }\n        }\n\n        addToList(vector_menu_list, itemNo, category, descript, price);\n\n        error_encountered = false;\n    }\n    else\n    {\n        error_encountered = true;\n    }\n\n    file.close();\n\n    return vector_menu_list;\n}\nint main()\n{\n    bool error_encountered;\n    vector&lt;MenuList*&gt; p_menu_list = readFile(\"menu list.txt\", error_encountered);\n\n    if (true == error_encountered)\n    {\n        return -1;\n    }\n\n    cout &lt;&lt; \"List menu items:\" &lt;&lt; endl;\n    for (unsigned long long i = 0; i &lt; p_menu_list.size(); i++)\n    {\n        cout &lt;&lt; p_menu_list.at(i)-&gt;itemNo &lt;&lt; \" \";\n        cout &lt;&lt; p_menu_list.at(i)-&gt;category &lt;&lt; \" \";\n        cout &lt;&lt; p_menu_list.at(i)-&gt;descript &lt;&lt; \" \";\n        cout &lt;&lt; p_menu_list.at(i)-&gt;price &lt;&lt; endl;\n    }\n\n    cout &lt;&lt; \"\\n\\nHere are only the prices: \" &lt;&lt; endl;\n    for (unsigned long long i = 0; i &lt; p_menu_list.size(); i++)\n    {\n        cout &lt;&lt; p_menu_list.at(i)-&gt;price &lt;&lt; endl;\n    }\n\n    for (unsigned long long i = 0; i &lt; p_menu_list.size(); i++)\n    {\n        delete p_menu_list.at(i);\n    }\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 39, "user_id": 9091443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b7927fa21763e6771f92a630307a589?s=128&d=identicon&r=PG&f=1", "display_name": "Niku Nik", "link": "https://stackoverflow.com/users/9091443/niku-nik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 658, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1525923350, "creation_date": 1525907086, "question_id": 50263246, "link": "https://stackoverflow.com/questions/50263246/c-reading-file-search-for-something-in-that-file", "title": "C++ reading file search for something in that file", "body": "<p>So I have a .txt file looking like this:<br>\n<code>1:Meat Dish:Steak:11.5</code><br>\n<code>2:Fish Dish:Fish and chips:12</code><br>\nThe first number is the itemNo, 'Meat Dish' is my category, 'Steak' is my description and finally '11.5' is my price.  </p>\n\n<p>So basically I want to search for the itemNo and I want it to display the price from that line. This is what I have until now:  </p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;string&gt;\n#include &lt;vector&gt; // We will use this to store Players\nusing std::string;\nusing std::ofstream; \nusing std::ifstream; \nusing std::cout;\nusing std::cin;\n\nstruct MenuList // Define a \"Player\" data structure\n{\n    string itemNo;\n    string category;\n    string descript;\n    double price;\n};\n\nstd::istream&amp; operator&gt;&gt;(std::istream&amp; infile, MenuList&amp; menu)\n{\n    // In this function we will define how information is inputted into the player struct\n    // std::cin is derived from the istream class\n    getline(infile, menu.itemNo, ':'); \n    getline(infile, menu.category, ':');\n    getline(infile, menu.descript, ':');\n    infile &gt;&gt; menu.price;\n    // When we have extracted all of our information, return the stream\n    return infile;\n}\n\nstd::ostream&amp; operator&lt;&lt;(std::ostream&amp; os, MenuList&amp; menu)\n{\n    // Just like the istream, we define how a player struct is displayed when using std::cout\n    os &lt;&lt; \"\" &lt;&lt; menu.itemNo &lt;&lt; \" \" &lt;&lt; menu.category &lt;&lt; \" - \" &lt;&lt; menu.descript;\n    // When we have extracted all of our information, return the stream\n    return os;\n}\n\nvoid Load(std::vector&lt;MenuList&gt;&amp; r, string filename) \n{\n    std::ifstream ifs(filename.c_str()); // Open the file name\n    if(ifs)\n    {\n        while(ifs.good()) // While contents are left to be extracted\n        {\n            MenuList temp;\n            ifs &gt;&gt; temp;        // Extract record into a temp object\n            r.push_back(temp);  // Copy it to the record database\n        }\n        cout &lt;&lt; \"Read \" &lt;&lt; r.size() &lt;&lt; \" records.\\n\\n\"; \n    }\n    else\n    {\n        cout &lt;&lt; \"Could not open file.\\n\\n\";\n    }\n}\n\nvoid Read(std::vector&lt;MenuList&gt;&amp; r) // Read record contents\n{\n    for(unsigned int i = 0; i &lt; r.size(); i++)\n        cout &lt;&lt; r[i] &lt;&lt; \"\\n\";\n}\n\nvoid Search(std::vector&lt;MenuList&gt;&amp; r) // Search records for name\n{\n    string n;\n    cout &lt;&lt; \"Search for: \";\n    cin &gt;&gt; n;\n    for(int i = 0; i &lt; r.size(); i++)\n    {\n        if(r[i].itemNo.find(n) != string::npos)\n            cout &lt;&lt; r[i];\n    }\n}\n\nint main()\n{\n    std::vector&lt;MenuList&gt; records;\n    Load(records, \"delete.txt\");\n    Read(records);\n    Search(records);\n    return 0;\n}\n</code></pre>\n\n<p>I don't really know how to make it so it shows just the price without showing the whole line.</p>\n"}, {"tags": ["c++", "sorting", "data-structures", "heapsort", "recursive-datastructures"], "comments": [{"owner": {"reputation": 5896, "user_id": 1106415, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6fvK.png?s=128&g=1", "display_name": "hlt", "link": "https://stackoverflow.com/users/1106415/hlt"}, "edited": false, "score": 0, "creation_date": 1525905578, "post_id": 50263013, "comment_id": 87544151, "body": "You are most likely doing this for practice, but if you ever need a heap in the real world, take a look at <a href=\"https://en.cppreference.com/w/cpp/algorithm/make_heap\" rel=\"nofollow noreferrer\"><code>std::make_heap</code></a> and the related functions."}, {"owner": {"reputation": 3, "user_id": 9347200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5761fc0587177c4a4c15838ee6e591e?s=128&d=identicon&r=PG&f=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/9347200/sam"}, "reply_to_user": {"reputation": 5896, "user_id": 1106415, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6fvK.png?s=128&g=1", "display_name": "hlt", "link": "https://stackoverflow.com/users/1106415/hlt"}, "edited": false, "score": 0, "creation_date": 1525905811, "post_id": 50263013, "comment_id": 87544218, "body": "- hit, This is not practice. Also, I can not change heap function code from the above  which is     for (index = 7; index &gt;1; index--)     {         parent = index / 2;         if (heap[parent] &lt; heap[index])         {             dummy = heap[parent];             heap[parent] = heap[index];             heap[index] = dummy;             flag = 1;         } And this is my assginment, only i have to do is add sorting by using heap"}, {"owner": {"reputation": 3, "user_id": 9347200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5761fc0587177c4a4c15838ee6e591e?s=128&d=identicon&r=PG&f=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/9347200/sam"}, "reply_to_user": {"reputation": 5896, "user_id": 1106415, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6fvK.png?s=128&g=1", "display_name": "hlt", "link": "https://stackoverflow.com/users/1106415/hlt"}, "edited": false, "score": 0, "creation_date": 1525905983, "post_id": 50263013, "comment_id": 87544262, "body": "I am new here, I am sorry that i dont know how to display code in this comment. Also, I want to add new line and i press enter but this make my comment submit."}, {"owner": {"reputation": 5896, "user_id": 1106415, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6fvK.png?s=128&g=1", "display_name": "hlt", "link": "https://stackoverflow.com/users/1106415/hlt"}, "edited": false, "score": 0, "creation_date": 1525906160, "post_id": 50263013, "comment_id": 87544319, "body": "Code formatting in comments works by using backticks (<code>`code`</code>), but not on multiple lines. You should also take the sorting part out of the <i>heapify</i> part - do that after you&#39;ve printed the heap, or you&#39;ll get a weird inconsistent state. Only then can we see if your code actually works"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1525906574, "post_id": 50263013, "comment_id": 87544432, "body": "It&#39;s generally best to edit the initial question to add information rather than putting it in comments."}, {"owner": {"reputation": 3, "user_id": 9347200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5761fc0587177c4a4c15838ee6e591e?s=128&d=identicon&r=PG&f=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/9347200/sam"}, "edited": false, "score": 0, "creation_date": 1525906777, "post_id": 50263013, "comment_id": 87544468, "body": "I take the sorting part out of heapify and place on after the print max-heap. I test it and the result is same problem. And thank you for tell me how to do it."}, {"owner": {"reputation": 3, "user_id": 9347200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5761fc0587177c4a4c15838ee6e591e?s=128&d=identicon&r=PG&f=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/9347200/sam"}, "edited": false, "score": 0, "creation_date": 1525906939, "post_id": 50263013, "comment_id": 87544499, "body": "I try formatting the code but doesnt work"}, {"owner": {"reputation": 3, "user_id": 9347200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5761fc0587177c4a4c15838ee6e591e?s=128&d=identicon&r=PG&f=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/9347200/sam"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1525907409, "post_id": 50263013, "comment_id": 87544594, "body": "@user4581301 that is good idea but how do i edit the question?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1525907665, "post_id": 50263013, "comment_id": 87544656, "body": "Use the <a href=\"https://stackoverflow.com/posts/50263013/edit\">edit link under the question</a>"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1525907760, "post_id": 50263013, "comment_id": 87544687, "body": "@Sam So you wrote code, you know what the code is supposed to do, but it isn&#39;t doing what you want it to do.  So what debugging have you done?  Have you used your debugger to step through the program to see where it deviates from your plan?"}, {"owner": {"reputation": 3, "user_id": 9347200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5761fc0587177c4a4c15838ee6e591e?s=128&d=identicon&r=PG&f=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/9347200/sam"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1525908128, "post_id": 50263013, "comment_id": 87544780, "body": "@PaulMcKenzie No this code from my teacher and I have to add a statement that sorting number by using heapsort. And I have tried debugger but I still don&#39;t understand how it worked."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 9347200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5761fc0587177c4a4c15838ee6e591e?s=128&d=identicon&r=PG&f=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/9347200/sam"}, "edited": false, "score": 0, "creation_date": 1528152442, "post_id": 50271257, "comment_id": 88389236, "body": "This works for me, Thank you for your help. Also, I found a solution, I just added few lines for the heapsort without calling any void function I would like to share my solution with other people who have the same problem as me but unfortunately, I don&#39;t know to share the code in this comment. :("}, {"owner": {"reputation": 187, "user_id": 9446315, "user_type": "registered", "profile_image": "https://graph.facebook.com/582382402100368/picture?type=large", "display_name": "Aleksa Jovanovic", "link": "https://stackoverflow.com/users/9446315/aleksa-jovanovic"}, "reply_to_user": {"reputation": 3, "user_id": 9347200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5761fc0587177c4a4c15838ee6e591e?s=128&d=identicon&r=PG&f=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/9347200/sam"}, "edited": false, "score": 0, "creation_date": 1528200467, "post_id": 50271257, "comment_id": 88408622, "body": "you can not write code in comment, but you can answer your own question"}, {"owner": {"reputation": 187, "user_id": 9446315, "user_type": "registered", "profile_image": "https://graph.facebook.com/582382402100368/picture?type=large", "display_name": "Aleksa Jovanovic", "link": "https://stackoverflow.com/users/9446315/aleksa-jovanovic"}, "reply_to_user": {"reputation": 3, "user_id": 9347200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5761fc0587177c4a4c15838ee6e591e?s=128&d=identicon&r=PG&f=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/9347200/sam"}, "edited": false, "score": 0, "creation_date": 1528215312, "post_id": 50271257, "comment_id": 88418573, "body": "You can accept or like an answer if it helped you \ud83d\ude01"}], "tags": [], "owner": {"reputation": 187, "user_id": 9446315, "user_type": "registered", "profile_image": "https://graph.facebook.com/582382402100368/picture?type=large", "display_name": "Aleksa Jovanovic", "link": "https://stackoverflow.com/users/9446315/aleksa-jovanovic"}, "is_accepted": true, "score": 0, "last_activity_date": 1525949594, "creation_date": 1525949594, "answer_id": 50271257, "question_id": 50263013, "link": "https://stackoverflow.com/questions/50263013/heap-sort-it-not-working-or-incorrect-calculation/50271257#50271257", "title": "Heap sort it not working or incorrect calculation", "body": "<p>You have many bugs in your code.</p>\n\n<p>First one i have noticed is in your while loop</p>\n\n<pre><code>while (heap[0] &gt;= 1) //heap[0] = 0 since you declared your array statically\n    {\n        int last = heap[0]; // last = 0\n        int temp1 = heap[1];\n        heap[1] = heap[last - 1]; //trying to find element heap[-1] ERROR\n        heap[last - 1] = temp1; //heap[-1] = heap[1]\n        heap[0]--; //heap[0] = -1 why?\n    }\n</code></pre>\n\n<p>Second one is that you are starting from index 1 and go to index 6 in your input loop (first for loop in code), but when you are trying to make some difference in your heap in third for loop you are starting from index 7 and you go to index 2.</p>\n\n<p>I couldn't find a way in your code so i will post mine. It is following the algorithm in that wiki page you posted.</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nusing namespace std;\n\n\n\nvoid build_heap(int *heap, int index)\n{\n    if(index&gt;1)\n    {\n       int new_input = heap[index], tmp = 0;\n    //since your index starts from 1 and goes up to n in heap\n    //parent from index k is (k%2==1) ? (k-1)/2 : k/2\n    if(index % 2 == 1)\n        index--;\n    if(heap[index/2] &lt; new_input)\n    {\n\n        tmp = heap[index/2];\n        heap[index/2] = new_input;\n        heap[index] = tmp;\n        build_heap(heap, index/2);\n       }\n    }\n}\n\nvoid make_order_in_heap(int *heap, int n)\n{\nif(n&gt;1)\n{\n    int index = 1;\n    int child_index;\n    bool work = true;\n\n    while(work &amp;&amp; index &lt; n)\n    {\n        //finding child_index\n        if( index * 2 + 1 &lt;= n)\n        {\n            child_index = heap[index*2] &gt; heap[index*2+1] ? index*2 : index*2+1;\n        }\n        else if(index * 2 &lt;= n)\n        {\n            child_index = index*2;\n        }\n        else\n        {\n            //this index has no  children\n            return;\n        }\n        work = false;\n        if(heap[child_index] &gt; heap[index])\n        {\n            int tmp = heap[index];\n            heap[index] = heap[child_index];\n            heap[child_index] = tmp;\n            index = child_index;\n            work = true;\n        }\n    }\n\n}\n}\n\nvoid swap_first_and_last(int *heap, int n)\n{\nif(n&gt;1)\n{\n    int tmp = heap[1];\n    heap[1] = heap[n];\n    heap[n] = tmp;\n}\n}\n\nvoid sort_heap(int *heap, int n)\n{\nif(n&gt;1)\n{\n    swap_first_and_last(heap, n);\n    //we swaped first and last element in heap with n elements\n    //so now first element in heap of n-1 elements is not on his      possiton\n    make_order_in_heap(heap, n-1);\n    sort_heap(heap, n-1);\n}\n}\n\nint main()\n{\nint heap[30];\nint n, index, parent, flag, dummy;\nn = 7; \n\nfor (index = 1; index &lt;= n; index++) \n{\n    cout &lt;&lt; \"Enter value \" &lt;&lt; index &lt;&lt; \": \";\n    cin &gt;&gt; heap[index];\n    build_heap(heap, index);\n}\n\ncout &lt;&lt; \"\\nYour input is:\\n\";\nfor (index = 1; index &lt;= n; index++) \n{\n    cout &lt;&lt; heap[index] &lt;&lt; \" \";\n}\n\n\nsort_heap(heap, n);\n\ncout &lt;&lt; \"\\n Sorted array is:\\n\";\nfor (index = 1; index &lt;= n; index++) \n{\n    cout &lt;&lt; heap[index] &lt;&lt; \" \";\n}\nreturn 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 9347200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5761fc0587177c4a4c15838ee6e591e?s=128&d=identicon&r=PG&f=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/9347200/sam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 160, "favorite_count": 0, "accepted_answer_id": 50271257, "answer_count": 1, "score": 0, "last_activity_date": 1525949594, "creation_date": 1525905423, "last_edit_date": 1525908609, "question_id": 50263013, "link": "https://stackoverflow.com/questions/50263013/heap-sort-it-not-working-or-incorrect-calculation", "title": "Heap sort it not working or incorrect calculation", "body": "<p>The max-heap function is working fine but heapsort is not working.</p>\n\n<p>When I run this code. it shows incorrect calculation.</p>\n\n<pre><code>Your input is:\n9 79 42 86 33 75\n\nYour max-heap is:\n86 79 42 75 33 9\n\nAscending numerical order:\n86 79 42 75 33 9\n</code></pre>\n\n<p>As you can see my last output, the Ascending numerical order is the same value as max-heap but this is not what I am expecting.</p>\n\n<p>My task is that I have to sort a number from the max-heap. Also, I have to swap first and last element from the max-heap array and then ignore the last element. Also, once the last element is ignored I have to do max-heap function again.</p>\n\n<p>An example of how the calculation works. max-heap is: 86, 79, 42, 75, 33, 9. In the sorting section, I have to swap first and last element and then ignore the last element, so the heap sort result should be: 9, 79, 42, 75, 33, [86] <strong>(square bracket mean ignored or removed)</strong>. I have to do max-heap again from the previous sorting. The second max-heap result would be 79, 75, 9, 42, 33. when I come back to the sorting I have to swap the first and last element and then ignore the last element again so the max-heap is 79, 75, 9, 42, 33 and the heap sort result should be: 33, 75, 9, 42, [79], [86]. I have to do the same step all over again until all the number sorted.</p>\n\n<p>An example of output that I want to display on:     </p>\n\n<p>My input is 9, 79, 42, 86, 33, 75</p>\n\n<p>Max- heap should be: 86, 79, 42, 75, 33, 9.</p>\n\n<p>Ascending number should be: 9, 33, 42, 75, 79, 86.</p>\n\n<p>For more example, Please visit the website <a href=\"https://en.wikipedia.org/wiki/Heapsort#Example\" rel=\"nofollow noreferrer\">https://en.wikipedia.org/wiki/Heapsort#Example</a>, See example 2 - Sorting</p>\n\n<p>And Here the code of incorrect calculation:</p>\n\n<pre><code>#include \"stdafx.h\"\n#include &lt;iostream&gt;\n\nusing namespace std;\n\nint heap[30];\n\nvoid main()\n{\nint n, index, parent, flag, dummy;\nn = 7; //size of table\n\n// user input number\nfor (index = 1; index &lt; 7; index++) \n{\n    cout &lt;&lt; \"Enter value \" &lt;&lt; index &lt;&lt; \": \";\n    cin &gt;&gt; heap[index];\n}\n\n// output for user element\ncout &lt;&lt; \"\\nYour input is:\\n\";\nfor (index = 1; index &lt; 7; index++) \n{\n    cout &lt;&lt; heap[index] &lt;&lt; \" \";\n}\n\nflag = 1;\n\nwhile (flag == 1)\n{\n    flag = 0;\n\n    //heapify\n    for (index = 7; index &gt;1; index--)\n    {\n        parent = index / 2;\n        if (heap[parent] &lt; heap[index])\n        {\n            dummy = heap[parent];\n            heap[parent] = heap[index];\n            heap[index] = dummy;\n            flag = 1;\n        }\n\n        // Sorting --&gt; swap first and last of the array and then ignore the \n        //last array and reheap from above until all number sorted.\n\n        while (heap[0] &gt;= 1)\n        {\n            int last = heap[0];\n            int temp1 = heap[1];\n            heap[1] = heap[last - 1];\n            heap[last - 1] = temp1;\n            heap[0]--;\n        }\n    }\n}\n\ncout &lt;&lt; \"\\n\\nYour max-heap is:\\n\";\nfor (index = 1; index &lt; 7; index++) // output for after heap\n{\n    cout &lt;&lt; heap[index] &lt;&lt; \" \";\n}\n\ncout &lt;&lt; \"\\n\\nAscending numerical order:\\n\";\nfor (index = 1; index &lt; 7; index++) //output for sorting.\n{\n    cout &lt;&lt; heap[index] &lt;&lt; \" \";\n}\n\ngetchar();\ngetchar();\n}\n</code></pre>\n\n<p>Also the code that I can not change or replace which are </p>\n\n<pre><code>    while (flag == 1)\n{\n    flag = 0;\n\n    //heapify\n    for (index = 6; index &gt;1; index--)\n    {\n        parent = index / 2;\n        if (heap[parent] &lt; heap[index])\n        {\n            dummy = heap[parent];\n            heap[parent] = heap[index];\n            heap[index] = dummy;\n            flag = 1;\n        }\n    }\n\n}\n</code></pre>\n"}, {"tags": ["c++", "vector", "std-pair", "keyvaluepair"], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user3143781"}, "is_accepted": false, "score": 0, "last_activity_date": 1525905059, "creation_date": 1525905059, "answer_id": 50262969, "question_id": 50262914, "link": "https://stackoverflow.com/questions/50262914/filling-vector-of-pairs-with-pair-of-pair-not-working-as-expected/50262969#50262969", "title": "Filling vector-of-pairs with pair-of-pair not working as expected", "body": "<p>It is working as expected. Tested with G++ compiler.\nNo issue observed.</p>\n\n<pre><code>#include &lt;bits/stdc++.h&gt;\nusing namespace std;\n\nint main() {\n    // your code goes here\n    std::vector&lt;std::pair&lt;double, std::pair&lt;int, int&gt;&gt;&gt; vec;\n    int x = 100, y = 10, z = 20;\n    vec.push_back(std::make_pair((double)x, std::make_pair(y, z)));\n    for (int i = 0; i &lt; vec.size(); i++) {\n        std::cout &lt;&lt; \"x: \" &lt;&lt; vec[i].first &lt;&lt; \"\\n\";\n        std::cout &lt;&lt; \"y: \" &lt;&lt; vec[i].second.first &lt;&lt; \"\\n\";\n        std::cout &lt;&lt; \"z: \" &lt;&lt; vec[i].second.second &lt;&lt; \"\\n\";\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>Please refer <a href=\"https://www.ideone.com/85ZU1i\" rel=\"nofollow noreferrer\">this</a> link</p>\n"}], "owner": {"reputation": 105, "user_id": 5932282, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/8fbe578581f6b5ed9bdce2f21a6deb6e?s=128&d=identicon&r=PG&f=1", "display_name": "henrykorir", "link": "https://stackoverflow.com/users/5932282/henrykorir"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 19, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1551988546, "creation_date": 1525904691, "last_edit_date": 1551988546, "question_id": 50262914, "link": "https://stackoverflow.com/questions/50262914/filling-vector-of-pairs-with-pair-of-pair-not-working-as-expected", "title": "Filling vector-of-pairs with pair-of-pair not working as expected", "body": "<p>I have the following code that fills a vector containing pair of pairs.</p>\n\n<pre><code>std::vector&lt;std::pair&lt;double, std::pair&lt;int, int&gt;&gt;&gt; vec;\nint x=100, y=10, z=20;\nvec.push_back(std::make_pair((double)x,std::make_pair(y,z)));\nfor(int i=0;i&lt;vec.size();i++){\n    std::cout&lt;&lt;\"x: \"&lt;&lt;vec[i].first&lt;&lt;\"\\n\";\n    std::cout&lt;&lt;\"y: \"&lt;&lt;vec[i].second.first&lt;&lt;\"\\n\";\n    std::cout&lt;&lt;\"z: \"&lt;&lt;vec[i].second.second&lt;&lt;\"\\n\";\n}\n</code></pre>\n\n<p>The output:</p>\n\n<pre><code>x: 0\ny: 0\nz: 0\n</code></pre>\n\n<p>Why is it not printing as follows?</p>\n\n<pre><code>x: 100.0\ny: 10\nz: 20\n</code></pre>\n"}, {"tags": ["c++", "visual-studio", "include", "header-files"], "comments": [{"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1525907985, "post_id": 50262830, "comment_id": 87544755, "body": "Add the library header folder to your Additional Include Directories for your other projects."}, {"owner": {"reputation": 14893, "user_id": 4645334, "user_type": "registered", "accept_rate": 87, "profile_image": "https://lh6.googleusercontent.com/-hoIJVId9WIY/AAAAAAAAAAI/AAAAAAAAGQw/r7Es0WqE4rs/photo.jpg?sz=128", "display_name": "Thomas Sablik", "link": "https://stackoverflow.com/users/4645334/thomas-sablik"}, "edited": false, "score": 0, "creation_date": 1525913869, "post_id": 50262830, "comment_id": 87546039, "body": "Are you sure that <code>2ndFunctionSet.h</code> and <code>baseFunctions.h</code> are in the same folder? Can you check with file explorer? Sometimes Visual Studio shows files in wrong paths."}, {"owner": {"reputation": 1255, "user_id": 4842504, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/db303b8e370d567c99d98aa8151455d9?s=128&d=identicon&r=PG", "display_name": "Sirmyself", "link": "https://stackoverflow.com/users/4842504/sirmyself"}, "reply_to_user": {"reputation": 14893, "user_id": 4645334, "user_type": "registered", "accept_rate": 87, "profile_image": "https://lh6.googleusercontent.com/-hoIJVId9WIY/AAAAAAAAAAI/AAAAAAAAGQw/r7Es0WqE4rs/photo.jpg?sz=128", "display_name": "Thomas Sablik", "link": "https://stackoverflow.com/users/4645334/thomas-sablik"}, "edited": false, "score": 0, "creation_date": 1525978715, "post_id": 50262830, "comment_id": 87576119, "body": "I don&#39;t understand the downvote, but anyways... Thanks @thomas-sablik for pointing it out. turns out that the first file were still in the second project folder. So it was not supposed to work either."}], "answers": [{"tags": [], "owner": {"reputation": 1255, "user_id": 4842504, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/db303b8e370d567c99d98aa8151455d9?s=128&d=identicon&r=PG", "display_name": "Sirmyself", "link": "https://stackoverflow.com/users/4842504/sirmyself"}, "is_accepted": true, "score": 1, "last_activity_date": 1525981304, "last_edit_date": 1525981304, "creation_date": 1525980004, "answer_id": 50280074, "question_id": 50262830, "link": "https://stackoverflow.com/questions/50262830/c-how-to-add-header-and-cpp-files-in-a-library-project/50280074#50280074", "title": "c++ - How to add header and cpp files in a library project", "body": "<p>The files are not in the same folder.</p>\n\n<p>You should also check if the files that are \"working\" are in the proper folder :</p>\n\n<ul>\n<li>Go on your file explorer</li>\n<li>Check the library project's folder</li>\n<li>If the files are in the wrong folder\n\n<ul>\n<li>Move them in the correct project folder</li>\n<li>Add reference to the new files' location</li>\n</ul></li>\n</ul>\n\n<p>Now on \"How to include those files in a project of the same solution\" : </p>\n\n<ul>\n<li>Go in your \"2ndProjectName\" project's properties</li>\n<li><code>\"Configuration Properties\"</code> > <code>\"c/c++\"</code> > <code>\"General\"</code></li>\n<li>In \"Additional include directory\" : click > edit and go reach for the library project folder.</li>\n<li>In the Solution Explorer, go in your \"2ndProjectName\" project</li>\n<li>Right click on \"References\" > \"Add Reference\"</li>\n<li>Make sure your library project is checked</li>\n</ul>\n"}], "owner": {"reputation": 1255, "user_id": 4842504, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/db303b8e370d567c99d98aa8151455d9?s=128&d=identicon&r=PG", "display_name": "Sirmyself", "link": "https://stackoverflow.com/users/4842504/sirmyself"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 11465, "favorite_count": 0, "accepted_answer_id": 50280074, "answer_count": 1, "score": 0, "last_activity_date": 1527520841, "creation_date": 1525904194, "last_edit_date": 1527520841, "question_id": 50262830, "link": "https://stackoverflow.com/questions/50262830/c-how-to-add-header-and-cpp-files-in-a-library-project", "title": "c++ - How to add header and cpp files in a library project", "body": "<p>Long story short : I had some functions I thought could be useful in a library instead of just copying the functions from one project to the next one. So I created a library project and put my header file and cpp file in the project, referenced it with my second project (in the same solution) and everything is working fine.</p>\n\n<p>Here's my problem. I want to add an other set of functions in different files. So I created a new header file and a new cpp file, but now I don't seem to be able to <code>include</code> the new header file. the other one works fine, but the new one can't be included and VS gives me these error codes  :</p>\n\n<pre><code>E1696   cannot open source file \"2ndFunctionSet.h\"                  [2ndProjectName]        [FileNameA]\nC1083   include : '2ndFunctionSet.h' : No such file or directory    [2ndProjectName]        [FileNameA]\n</code></pre>\n\n<p>Here's a summary of the current structure of the solution : </p>\n\n<pre><code>SolutionName\n|---project &gt; CommonLibraries\n|   |---{header files}\n|   |   |---baseFunctions.h\n|   |   |---2ndFunctionSet.h\n|   |---{source files}\n|       |---baseFunctions.cpp\n|       |---2ndFunctionSet.cpp\n|\n|---project &gt; 2ndProjectName\n    |---{header files}\n    |   |---someClass.h\n    |   |---mainCode.h\n    |---{source files}\n        |---someClass.cpp\n        |---mainCode.cpp\n</code></pre>\n\n<p>both cpp files from the common libray include their header files and the <code>stdafx.h</code> default precompilation file and both seem to be constructed similarly.</p>\n\n<p>Can you please help me understand what I have done wrong? I haven't been doing c++ for a while, so it is likely I did a procedure error when creating my library project or when I created the new function set file.</p>\n"}, {"tags": ["c++", "c", "memory", "malloc", "free"], "comments": [{"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1525903569, "post_id": 50262641, "comment_id": 87543463, "body": "Are you making sure that <code>cpih</code> is assigned to <code>_cpih</code> nad <code>cpiw</code> is assigned to <code>_cpiw</code>?"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 5, "creation_date": 1525903613, "post_id": 50262641, "comment_id": 87543478, "body": "In cases like this, it&#39;s almost impossible to say where things could go wrong without looking at a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 5896, "user_id": 1106415, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6fvK.png?s=128&g=1", "display_name": "hlt", "link": "https://stackoverflow.com/users/1106415/hlt"}, "edited": false, "score": 0, "creation_date": 1525903692, "post_id": 50262641, "comment_id": 87543517, "body": "Which line in the code that you show is <code>hn_hog.h:320</code>?"}, {"owner": {"reputation": 846, "user_id": 587820, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/d01afc60749606210ff4929a132befb2?s=128&d=identicon&r=PG&f=1", "display_name": "h.nodehi", "link": "https://stackoverflow.com/users/587820/h-nodehi"}, "reply_to_user": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1525904377, "post_id": 50262641, "comment_id": 87543780, "body": "@RSahu yes, <code>_cpih</code> and <code>_cpiw</code> always have the updated value. I edited the code."}, {"owner": {"reputation": 846, "user_id": 587820, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/d01afc60749606210ff4929a132befb2?s=128&d=identicon&r=PG&f=1", "display_name": "h.nodehi", "link": "https://stackoverflow.com/users/587820/h-nodehi"}, "reply_to_user": {"reputation": 5896, "user_id": 1106415, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6fvK.png?s=128&g=1", "display_name": "hlt", "link": "https://stackoverflow.com/users/1106415/hlt"}, "edited": false, "score": 0, "creation_date": 1525904513, "post_id": 50262641, "comment_id": 87543815, "body": "@hlt This: <code>free(_hist[i][j]);</code>. As I&#39;ve mentioned, error always occurs at this line."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1525906742, "post_id": 50262641, "comment_id": 87544462, "body": "Probably not related: <a href=\"https://stackoverflow.com/questions/228783/what-are-the-rules-about-using-an-underscore-in-a-c-identifier\">Keep an eye on the rules for using underscores in identifiers.</a>"}, {"owner": {"reputation": 159, "user_id": 9448914, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Kyle Huff", "link": "https://stackoverflow.com/users/9448914/kyle-huff"}, "edited": false, "score": 0, "creation_date": 1525907806, "post_id": 50262641, "comment_id": 87544703, "body": "What is the scope of i and j in free_memory?  Could another thread be altering these values?"}, {"owner": {"reputation": 846, "user_id": 587820, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/d01afc60749606210ff4929a132befb2?s=128&d=identicon&r=PG&f=1", "display_name": "h.nodehi", "link": "https://stackoverflow.com/users/587820/h-nodehi"}, "reply_to_user": {"reputation": 159, "user_id": 9448914, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Kyle Huff", "link": "https://stackoverflow.com/users/9448914/kyle-huff"}, "edited": false, "score": 0, "creation_date": 1525908492, "post_id": 50262641, "comment_id": 87544864, "body": "@KyleHuff they are static inside the function (free_memory). No threading at all."}, {"owner": {"reputation": 159, "user_id": 9448914, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Kyle Huff", "link": "https://stackoverflow.com/users/9448914/kyle-huff"}, "edited": false, "score": 1, "creation_date": 1525908958, "post_id": 50262641, "comment_id": 87544958, "body": "Well then I don&#39;t see anything wrong with the code.  I have to guess that the heap is getting corrupted somewhere else."}, {"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 1, "creation_date": 1525910212, "post_id": 50262641, "comment_id": 87545241, "body": "Often mistakes like out-of-bounds memory writes won&#39;t cause errors immediately, only later when you try to allocate or deallocate memory. A tool like valgrind might help find the actual source of such a mistake."}, {"owner": {"reputation": 846, "user_id": 587820, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/d01afc60749606210ff4929a132befb2?s=128&d=identicon&r=PG&f=1", "display_name": "h.nodehi", "link": "https://stackoverflow.com/users/587820/h-nodehi"}, "reply_to_user": {"reputation": 159, "user_id": 9448914, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Kyle Huff", "link": "https://stackoverflow.com/users/9448914/kyle-huff"}, "edited": false, "score": 0, "creation_date": 1525910253, "post_id": 50262641, "comment_id": 87545253, "body": "@KyleHuff and everyone, yes, my code was corrupting the heap."}], "owner": {"reputation": 846, "user_id": 587820, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/d01afc60749606210ff4929a132befb2?s=128&d=identicon&r=PG&f=1", "display_name": "h.nodehi", "link": "https://stackoverflow.com/users/587820/h-nodehi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 273, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1525910516, "creation_date": 1525903111, "last_edit_date": 1525910516, "question_id": 50262641, "link": "https://stackoverflow.com/questions/50262641/c-error-while-trying-to-free-allocated-memory-to-a-3-dimensional-array", "title": "C++: Error while trying to &#39;free&#39; allocated memory to a 3-dimensional array", "body": "<p>In my code, I need to build dynamic multidimensional arrays (matrices). I'm using <code>malloc</code> and <code>free</code> to do this, and yes, I know this is not C++ style. The problem is that I get error on freeing the array <strong>sometimes, randomly, not always</strong>!</p>\n\n<p><strong>Allocation code:</strong></p>\n\n<pre><code>void allocate_memory(const int &amp;cpiw, const int &amp;cpih)\n{\n    if (_hist == nullptr)\n    {\n        _hist = (float ***)malloc(cpih * sizeof(float **));\n        for (int i = 0; i &lt; cpih; ++i)\n        {\n            _hist[i] = (float **)malloc(cpiw * sizeof(float *));\n            for (int j = 0; j &lt; cpiw; ++j)\n            {\n                _hist[i][j] = (float *)malloc(bins * sizeof(float));\n            }\n        }\n    }\n    _cpiw = cpiw;\n    _cpih = cpih;\n}\n</code></pre>\n\n<p><strong>Freeing (deallocation) code:</strong></p>\n\n<pre><code>void free_memory()\n{\n    if (_hist != nullptr)\n    {\n        for (i = 0; i &lt; _cpih; ++i)\n        {\n            for (j = 0; j &lt; _cpiw; ++j)\n            {\n                free(_hist[i][j]);\n            }\n            free(_hist[i]);\n        }\n        free(_hist);\n        _hist = nullptr;\n    }\n}\n</code></pre>\n\n<p>My code frees and reallocates the arrays in a loop with 20 iterations. The strangest thing is that the error always occurs (if occurs) in 3rd iteration, always in 'freeing' code, and always in most inner loop (<code>free(_hist[i][j]);</code>). As I said, error raises randomly, and I get three different errors:</p>\n\n<ol>\n<li>Segmentation fault (core dumped)</li>\n<li>*** Error in `./hog': munmap_chunk(): invalid pointer: 0x... *** Aborted (core dumped)</li>\n<li>*** Error in `./hog': double free or corruption (out): 0x... *** Aborted (core dumped)</li>\n</ol>\n\n<p>I get no error on allocation, <code>malloc</code>s never return <code>nullptr</code>. If I comment out the 'freeing' code, everything goes fine, no error, no overflow, no 'out of memory'. But I know this is not OK, and I must free the array.</p>\n\n<p><strong>Edit:</strong> Call stack on error:</p>\n\n<pre><code>__GI_raise(int sig) (/build/glibc-itYbWN/glibc-2.26/sysdeps/unix/sysv/linux/raise.c:51)\n__GI_abort() (/build/glibc-itYbWN/glibc-2.26/stdlib/abort.c:90)\n__libc_message(enum __libc_message_action action, const char * fmt) (/build/glibc-itYbWN/glibc-2.26/sysdeps/posix/libc_fatal.c:181)\nmalloc_printerr(mstate ar_ptr, void * ptr, const char * str, int action) (/build/glibc-itYbWN/glibc-2.26/malloc/malloc.c:5426)\nmunmap_chunk(mchunkptr p) (/build/glibc-itYbWN/glibc-2.26/malloc/malloc.c:2877)\n__GI___libc_free(void * mem) (/build/glibc-itYbWN/glibc-2.26/malloc/malloc.c:3138)\nhn::hog::free_memory() (/home/.../CProjects/HOG/hn_hog.h:320)\nhn::hog::extractHOG_jpg(const JSAMPROW * image, const int &amp; iw, const int &amp; ih, const int &amp; cw, const int &amp; ch, const int &amp; bw, const int &amp; bh, const int &amp; bins, const int &amp; isunsigned) (/home/.../CProjects/HOG/hn_hog.h:458)\nmain(int argc, char ** argv) (/home/.../CProjects/HOG/main.cpp:168)\n</code></pre>\n\n<p><strong>Edit: Problem solved.</strong> Sorry everyone and moderators. By more and more debugging, finally I found out that somewhere in my code 'out-of-bounds' writes (on negative indices) were occurring. Thanks everyone.</p>\n"}, {"tags": ["c++", "vector", "stl"], "comments": [{"owner": {"reputation": 33821, "user_id": 45685, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/y4RJr.jpg?s=128&g=1", "display_name": "AndersK", "link": "https://stackoverflow.com/users/45685/andersk"}, "edited": false, "score": 0, "creation_date": 1526014867, "post_id": 50262632, "comment_id": 87586410, "body": "what are u trying to do here <code>WordMap &amp; Words = (Dictionary.count(word) ? KnownWords : UnknownWords);</code> ?"}], "answers": [{"tags": [], "owner": {"reputation": 12858, "user_id": 6752050, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d5c4caa7ff50e6e492c3957ca20ef6c?s=128&d=identicon&r=PG&f=1", "display_name": "S.M.", "link": "https://stackoverflow.com/users/6752050/s-m"}, "is_accepted": false, "score": 0, "last_activity_date": 1526014324, "creation_date": 1526014324, "answer_id": 50285192, "question_id": 50262632, "link": "https://stackoverflow.com/questions/50262632/how-to-iterate-position-of-the-words-in-a-file-using-vectors-c/50285192#50285192", "title": "How to iterate position of the words in a file using vectors c++", "body": "<pre><code>Words[word].push_back(ifile.tellg());\n</code></pre>\n\n<p>Above <code>ifile.tellg()</code> returns a position after a word. For example if a file contains the word \"word\", you read a first word from a file, then <code>ifile.tellg()</code> returns 4. It seems you expect the position 0 there. You should do like bellow:</p>\n\n<pre><code>Words[word].push_back(ifile.tellg() - word.size());\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 372, "user_id": 9531955, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7dc105e44af106b7e95dcd74fbb6c582?s=128&d=identicon&r=PG&f=1", "display_name": "muzzi", "link": "https://stackoverflow.com/users/9531955/muzzi"}, "edited": false, "score": 1, "creation_date": 1533619171, "post_id": 51719286, "comment_id": 90399368, "body": "I have tried to fix up the code in detail. Just put it in your compiler and try to run."}], "tags": [], "owner": {"reputation": 372, "user_id": 9531955, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7dc105e44af106b7e95dcd74fbb6c582?s=128&d=identicon&r=PG&f=1", "display_name": "muzzi", "link": "https://stackoverflow.com/users/9531955/muzzi"}, "is_accepted": true, "score": 0, "last_activity_date": 1533619098, "creation_date": 1533619098, "answer_id": 51719286, "question_id": 50262632, "link": "https://stackoverflow.com/questions/50262632/how-to-iterate-position-of-the-words-in-a-file-using-vectors-c/51719286#51719286", "title": "How to iterate position of the words in a file using vectors c++", "body": "<pre><code>void WordStats::ReadTxtFile(){\n\nint pos=-1;\nstring word;\n\nstd::ifstream ifile(Filename);\nif(!ifile)\n{\n    std::cerr &lt;&lt; \"Error Opening file \" &lt;&lt; Filename &lt;&lt; std::endl;\n    exit(1);\n}\nfor (std::string word; ifile &gt;&gt; word;  )\n{\n    transform (word.begin(), word.end(), word.begin(), ::tolower);\n    word.erase(std::remove_if(word.begin(), word.end(), [](char c)\n    {\n        return (c &lt; 'a' || c &gt; 'z') &amp;&amp; c != '\\'' ;\n\n    }),  word.end());\n    if (word == \"\") continue;\n    pos++;\n    if (Dictionary.find(word) != Dictionary.end())\n    {\n        Paragraph = KnownWords.find(word);            //adding word to the knownWords\n        if (Paragraph != KnownWords.end())\n        {\n            Paragraph-&gt;second.push_back(pos);         //adding position of the word\n        }         \n        else \n        {\n            KnownWords[word] = vector&lt;int&gt;(1, pos);   //adding record which is new\n        }\n    }\n    else\n    {\n        Paragraph = UnknownWords.find(word);            //adding word to the knownWords\n        if (Paragraph != UnknownWords.end())\n        {\n            Paragraph-&gt;second.push_back(pos);          //adding position of the word\n        }         \n        else \n        {\n            UnknownWords[word] = vector&lt;int&gt;(1, pos);   //adding record which is new\n        }\n    }\n\n}\ncout &lt;&lt; KnownWords.size() &lt;&lt; \" known words read.\" &lt;&lt; endl;\ncout &lt;&lt; UnknownWords.size() &lt;&lt; \" unknown words read.\" &lt;&lt; endl;\n}\n\n\nvoid WordStats::DisplayKnownWordsStats()\n{\nvector&lt;int&gt;::iterator v;\ncout &lt;&lt; \"\\n\";\ncout &lt;&lt; setw(22) &lt;&lt; \"Word\" &lt;&lt; setw(12) &lt;&lt; \"Count\" &lt;&lt; setw(20) &lt;&lt; \"Position(s)\"     &lt;&lt; endl;\nfor (Paragraph = KnownWords.begin(); Paragraph != KnownWords.end(); Paragraph++) \n{\n    string word = (*Paragraph).first;                   \n    vector&lt;int&gt; vect = (*Paragraph).second;\n    int count = vect.size();\n    cout &lt;&lt; setw(22) &lt;&lt; word &lt;&lt; setw(9) &lt;&lt; count ;\n    cout &lt;&lt; \"            \";\n    for ( v = vect.begin(); v &lt; vect.end(); v++)\n    {\n        cout &lt;&lt; *v &lt;&lt; \" \";\n    }   \n    cout &lt;&lt; endl;\n}\ncout &lt;&lt; \"\\n\";\n}\n</code></pre>\n"}], "owner": {"reputation": 282, "user_id": 9766651, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/975c05bf820b255a5f3cbe2dad15655c?s=128&d=identicon&r=PG&f=1", "display_name": "muzzi", "link": "https://stackoverflow.com/users/9766651/muzzi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "accepted_answer_id": 51719286, "answer_count": 2, "score": 2, "last_activity_date": 1537067925, "creation_date": 1525903063, "last_edit_date": 1537067925, "question_id": 50262632, "link": "https://stackoverflow.com/questions/50262632/how-to-iterate-position-of-the-words-in-a-file-using-vectors-c", "title": "How to iterate position of the words in a file using vectors c++", "body": "<p>I have to read <code>dictionary.txt</code> and <code>test.txt</code>. Then, have to check each word in <code>test.txt</code> if it is equal then this word would be added in <code>KnownWords</code> container and the remaining will be in <code>UnknownWords</code> container. I have done so far everything. But, in function <code>DisplayKnownWordStats()</code> I also have to display the position of the words. I tried the following code but it is not giving me correct value of the positions. </p>\n\n<p>Can someone please help me out to get the correct position of the <code>KnownWords</code> from <code>test.txt</code>. </p>\n\n<pre><code>void WordStats::ReadTxtFile()\n{\n    std::ifstream ifile(Filename);\n    if (!ifile)\n    {\n        std::cerr &lt;&lt; \"Error Opening file \" &lt;&lt; Filename &lt;&lt; std::endl;\n        exit(1);\n    }\n    for (std::string word; ifile &gt;&gt; word; )\n    {\n        transform(word.begin(), word.end(), word.begin(), ::tolower);\n        WordMap &amp; Words = (Dictionary.count(word) ? KnownWords : UnknownWords);\n        Words[word].push_back(ifile.tellg());\n    }\n    std::cout &lt;&lt; KnownWords.size() &lt;&lt; \" known words read.\" &lt;&lt; std::endl;\n    std::cout &lt;&lt; UnknownWords.size() &lt;&lt; \" unknown words read.\" &lt;&lt; std::endl;\n}\n\n// Displays stats of words in KnownWords\nvoid WordStats::DisplayKnownWordStats()\n{\n    cout &lt;&lt; \"            \";\n    cout &lt;&lt; \"    Word     Count      Position(s)\\n\";\n    for (Paragraph = KnownWords.begin(); Paragraph != KnownWords.end(); ++Paragraph)\n    {\n        string word = (*Paragraph).first;\n        vector&lt;int&gt; vect = (*Paragraph).second;\n        int cnt = vect.size();\n        cout &lt;&lt; setw(15) &lt;&lt; word &lt;&lt; setw(10) &lt;&lt; cnt &lt;&lt; \"   \";\n        for (int i = 0; i&lt;cnt; i++)\n            cout &lt;&lt; vect[i] &lt;&lt; ' ';   // something wrong with this code\n        cout &lt;&lt; endl;\n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "multithreading", "static-initialization"], "comments": [{"owner": {"reputation": 787, "user_id": 3173858, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/5587dae935b669ef43b93eb5d176a9d7?s=128&d=identicon&r=PG&f=1", "display_name": "Bryce Wagner", "link": "https://stackoverflow.com/users/3173858/bryce-wagner"}, "edited": false, "score": 0, "creation_date": 1525902479, "post_id": 50262460, "comment_id": 87543128, "body": "That&#39;s not an option.  I&#39;m writing plugins for a commercial application compiled with VC++ 6.  It has to use the exact same compiler to be compatible."}, {"owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 0, "creation_date": 1525902753, "post_id": 50262460, "comment_id": 87543211, "body": "The not-so-obvious solution would be to take a grip on the lifetime of the variables. That is completely abandon dynamic initialization stage together with static local variables and always initialize everything explicitly."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1525902762, "post_id": 50262460, "comment_id": 87543217, "body": "Are you okay with using a static global variable?  You could have <code>static A &amp; initialize = A::GetInstance();</code> right after the class so you know the function is called and the object is initialized before anything else happens."}, {"owner": {"reputation": 787, "user_id": 3173858, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/5587dae935b669ef43b93eb5d176a9d7?s=128&d=identicon&r=PG&f=1", "display_name": "Bryce Wagner", "link": "https://stackoverflow.com/users/3173858/bryce-wagner"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1525903090, "post_id": 50262460, "comment_id": 87543320, "body": "@NathanOliver The problem is, any file which uses A::GetInstance() could be the first one to call it.  But I think that does point me in the right direction.  If I ensure every file which needs to use A::GetInstance() calls it once to initialize before doing anything else, including any initializers which start threads, then I don&#39;t have to worry about something not getting initialized before a background thread uses it."}, {"owner": {"reputation": 787, "user_id": 3173858, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/5587dae935b669ef43b93eb5d176a9d7?s=128&d=identicon&r=PG&f=1", "display_name": "Bryce Wagner", "link": "https://stackoverflow.com/users/3173858/bryce-wagner"}, "reply_to_user": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 0, "creation_date": 1525903283, "post_id": 50262460, "comment_id": 87543379, "body": "@VTT I can&#39;t really imagine completely getting rid of statics completely.  I need at least 1 to share state across the process, and having 1 vs. many doesn&#39;t really change the problem."}, {"owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 0, "creation_date": 1525903810, "post_id": 50262460, "comment_id": 87543556, "body": "I haven&#39;t written to abandon statics completely, I only suggest to explicitly initialize them before first use happens. Though I guess this approach can not be used in your situation..."}], "answers": [{"comments": [{"owner": {"reputation": 787, "user_id": 3173858, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/5587dae935b669ef43b93eb5d176a9d7?s=128&d=identicon&r=PG&f=1", "display_name": "Bryce Wagner", "link": "https://stackoverflow.com/users/3173858/bryce-wagner"}, "edited": false, "score": 0, "creation_date": 1525903656, "post_id": 50262662, "comment_id": 87543503, "body": "Is the constant initialization guarantee universal in C++?  I&#39;m trying to figure out how to verify this behavior to my own satisfaction before making large scale changes that depend on it."}, {"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1525903986, "post_id": 50262662, "comment_id": 87543626, "body": "You also you need to check compiler extensions to ensure that <code>volatile</code> can be used when a memory barrier is required. <i>&quot;This makes volatile objects suitable for communication with a signal handler, but not with another thread of execution,...&quot;</i> from: <a href=\"http://en.cppreference.com/w/cpp/language/cv\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/language/cv</a>"}, {"owner": {"reputation": 50907, "user_id": 149138, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/cfd457233c8ebbab383475fc097442d9?s=128&d=identicon&r=PG", "display_name": "BeeOnRope", "link": "https://stackoverflow.com/users/149138/beeonrope"}, "reply_to_user": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1525904189, "post_id": 50262662, "comment_id": 87543717, "body": "@RichardCritten - indeed, but with VC6 your options are limited since this is before the memory model days and AFAIK even before VS started treated volatile specially with respect to threading. In any case, the second solution doesn&#39;t make any such assumptions since it simply passes the object into the <code>Interlocked</code> methods, which work find (and evidently are a MS-specific API outside of the the C++ spec)."}, {"owner": {"reputation": 50907, "user_id": 149138, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/cfd457233c8ebbab383475fc097442d9?s=128&d=identicon&r=PG", "display_name": "BeeOnRope", "link": "https://stackoverflow.com/users/149138/beeonrope"}, "reply_to_user": {"reputation": 787, "user_id": 3173858, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/5587dae935b669ef43b93eb5d176a9d7?s=128&d=identicon&r=PG&f=1", "display_name": "Bryce Wagner", "link": "https://stackoverflow.com/users/3173858/bryce-wagner"}, "edited": false, "score": 0, "creation_date": 1525904500, "post_id": 50262662, "comment_id": 87543813, "body": "@BryceWagner - yes, it is guaranteed and heavily relied on. In practice, it is baked right into the executable format: e.g., the <code>.bss</code> and <code>.data</code> sections in executables contain, <i>on disk</i>, the actual values of zero and constant-initialized variables so spring into being already initialized as soon as the process starts - in a way they are essentially perpetually initialized! See <a href=\"http://en.cppreference.com/w/cpp/language/initialization#Non-local_variables\" rel=\"nofollow noreferrer\">this link</a> for more details."}, {"owner": {"reputation": 1241, "user_id": 8424429, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9002f7998cce992a047bee84a5129c37?s=128&d=identicon&r=PG&f=1", "display_name": "curiousguy12", "link": "https://stackoverflow.com/users/8424429/curiousguy12"}, "edited": false, "score": 0, "creation_date": 1525904562, "post_id": 50262662, "comment_id": 87543833, "body": "Another problem with your first solution (<code>class A</code>) is the lack of memory ordering. Another thread may use the new object while it is still under construction"}, {"owner": {"reputation": 50907, "user_id": 149138, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/cfd457233c8ebbab383475fc097442d9?s=128&d=identicon&r=PG", "display_name": "BeeOnRope", "link": "https://stackoverflow.com/users/149138/beeonrope"}, "reply_to_user": {"reputation": 1241, "user_id": 8424429, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9002f7998cce992a047bee84a5129c37?s=128&d=identicon&r=PG&f=1", "display_name": "curiousguy12", "link": "https://stackoverflow.com/users/8424429/curiousguy12"}, "edited": false, "score": 0, "creation_date": 1525904762, "post_id": 50262662, "comment_id": 87543891, "body": "@curiousguy12 - in theory yes, in practice on VC6 with <code>volatile</code> no (generally OK even without volatile). This was a more-or-less endorsed pattern to do double checked locking. Note that the variable is only swapped in after initialization and using <code>InterlockedCompareExchange</code> which is both a compiler and hardware barrier. Note that you can&#39;t really argue this from a standards PoV since C++ was silent on threads in the VC6 era (far before C++11) and so &quot;what the platform does is practice&quot; is kind of the only peg you can hang your hat on."}, {"owner": {"reputation": 1241, "user_id": 8424429, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9002f7998cce992a047bee84a5129c37?s=128&d=identicon&r=PG&f=1", "display_name": "curiousguy12", "link": "https://stackoverflow.com/users/8424429/curiousguy12"}, "edited": false, "score": 0, "creation_date": 1525904891, "post_id": 50262662, "comment_id": 87543924, "body": "Ah yes, I forgot.. <code>volatile</code> on VC is stronger than usual"}, {"owner": {"reputation": 50907, "user_id": 149138, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/cfd457233c8ebbab383475fc097442d9?s=128&d=identicon&r=PG", "display_name": "BeeOnRope", "link": "https://stackoverflow.com/users/149138/beeonrope"}, "edited": false, "score": 0, "creation_date": 1525904978, "post_id": 50262662, "comment_id": 87543950, "body": "If you want to be totally safe, you can do the initial read <code>A* inst = Instance;</code> with <code>InterlockedExchangeAdd(..., 0)</code> instead, but a plain read was common in practice."}, {"owner": {"reputation": 50907, "user_id": 149138, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/cfd457233c8ebbab383475fc097442d9?s=128&d=identicon&r=PG", "display_name": "BeeOnRope", "link": "https://stackoverflow.com/users/149138/beeonrope"}, "reply_to_user": {"reputation": 1241, "user_id": 8424429, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9002f7998cce992a047bee84a5129c37?s=128&d=identicon&r=PG&f=1", "display_name": "curiousguy12", "link": "https://stackoverflow.com/users/8424429/curiousguy12"}, "edited": false, "score": 0, "creation_date": 1525906338, "post_id": 50262662, "comment_id": 87544355, "body": "@curiousguy12 - yes, Visual Studio for some range of versions gave <code>volatile</code> <i>release</i> semantics much like the Java memory model does. Recent versions do not as they have adopted the C++ <code>atomic</code> classes as the preferred way to get this effect. VS6 didn&#39;t do this either: you won&#39;t get barriers using <code>volatile</code> in VS6. Still, you don&#39;t need a barrier for this read: you just need the compiler not to do anything crazy and VS6 doesn&#39;t. For example, the &quot;double checked locking&quot; pattern &quot;just works&quot; on x86 if the compiler doesn&#39;t do anything unusual due to the strong memory model in x86."}, {"owner": {"reputation": 50907, "user_id": 149138, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/cfd457233c8ebbab383475fc097442d9?s=128&d=identicon&r=PG", "display_name": "BeeOnRope", "link": "https://stackoverflow.com/users/149138/beeonrope"}, "edited": false, "score": 0, "creation_date": 1525906436, "post_id": 50262662, "comment_id": 87544384, "body": "... and the code above has weaker requirements even than double checked locking. Now I&#39;m not one to generally advise stuff that &quot;seems to work but isn&#39;t guaranteed by the standard&quot;, especially when it comes to concurrency, but we have limited options in a pre-C++11 world. In any case, 2 of the 3 options above don&#39;t really rely on any assumptions about compiler or hardware behavior."}], "tags": [], "owner": {"reputation": 50907, "user_id": 149138, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/cfd457233c8ebbab383475fc097442d9?s=128&d=identicon&r=PG", "display_name": "BeeOnRope", "link": "https://stackoverflow.com/users/149138/beeonrope"}, "is_accepted": true, "score": 1, "last_activity_date": 1525906182, "last_edit_date": 1525906182, "creation_date": 1525903281, "answer_id": 50262662, "question_id": 50262460, "link": "https://stackoverflow.com/questions/50262460/vc6-thread-safe-static-initialization/50262662#50262662", "title": "VC++6 thread safe static initialization", "body": "<p>The usual solution to this problem is to use a static object that can be zero-initialized or constant-initialized combined with atomic operations to \"bootstrap\" yourself into a position where you can call more complex initialization safely.</p>\n\n<p>Zero and constant initialization is guaranteed to happen before non-constant initialization and since it effectively happens simultaneously it doesn't rely on order of initialization.</p>\n\n<h2>Use a Lazy-Initialized Object</h2>\n\n<p>A very simple example would use a zero-initialized pointer to the global static instance, that indicates if the static has been initialized, like so:</p>\n\n<pre><code>class A\n{\nprivate:\n    volatile static A* Instance;  // zero-initialized to NULL\npublic:\n    static A&amp; GetInstance() {\n        A* inst = Instance;\n        if (!inst) {\n            A* inst = new Instance(...);\n            A* cur = InterlockedCompareExchange(&amp;Instance, newInst, 0);\n            if (cur) {\n              delete inst;\n              return *cur;\n            }\n        }\n        return *inst;\n    }\n};\n</code></pre>\n\n<p>The downside of the above approach is that two (or more) one <code>A</code> object might be created, if two (or more) threads both initially see <code>A::Instance</code> as null. The code correctly selects only one <code>A</code> object to be the true static global returned to all callers and the others are simply silently deleted, but this may be a problem when it isn't even possible to create more than one <code>Instance</code> object in a process (e.g., because it backed by some fundamentally singleton resource, perhaps a handle to some hardware resource). There is also be some wasted work if more than one <code>Instance</code> is created, which might matter if the creation process is expensive.</p>\n\n<p>This pattern is sometimes called <em>racy single-check</em>.</p>\n\n<h2>Use a Lazy-Initialized Mutex</h2>\n\n<p>A better solution that avoids the above pitfalls would be to use a mutex to guard the creation of the singleton. Of course, now mutex initialization has the same ordering problem, but we can use the above trick to fix that (and we know it's OK to create more than one mutex object).</p>\n\n<pre><code>class MutexHolder\n{\nprivate:\n    volatile static CRITICAL_SECTION* cs;  // zero-initialized to NULL\npublic:\n    static CRITICAL_SECTION* get() {\n        A* inst = cs;\n        if (!inst) {\n            CRITICAL_SECTION* inst = new CRITICAL_SECTION();\n            InitializeCriticalSection(inst);\n            CRITICAL_SECTION* cur = InterlockedCompareExchange(&amp;cs, newInst, 0);\n            if (cur) {\n              DeleteCriticalSection(inst);\n              delete inst;\n              return *cur;\n            }\n        }\n        return *inst;\n    }\n};\n\nclass A\n{\nprivate:\n    static MutexHolder mutex;\n    static A* Instance;  // zero-initialized to NULL\npublic:\n    static A&amp; GetInstance() {\n        A* inst;\n        CRITICAL_SECTION *cs = mutex.get();\n        EnterCriticalSection(cs);\n        if (!(inst = Instance)) {\n            inst = Instance = new A(...);\n        }\n        EnterCriticalSection(cs);\n        return inst;\n    }\n};\n</code></pre>\n\n<p>Here the <code>MutexHolder</code> is a re-usable wrapper around the Windows <code>CRITICAL_SECTION</code> object which performs lazy and thread-safe initialization inside the <code>get()</code> method, and can be zero-initialized. This <code>MutexHolder</code> is then used as a classic mutex to protect the creation of the static <code>A</code> object inside <code>A::GetInstance</code>.</p>\n\n<p>You can make <code>GetInstance</code> faster at the cost of some complexity with the use of <a href=\"https://en.wikipedia.org/wiki/Double-checked_locking\" rel=\"nofollow noreferrer\">double-checked locking</a>: rather than getting the <code>CRITICAL_SECTION</code> unconditionally, first check if <code>Instance</code> is set (like the first example) and then return it directly if it is.</p>\n\n<h2>InitOnceExecuteOnce</h2>\n\n<p>Finally, if you are targeting Windows Vista or later, Microsoft has added a ready-made tool which handles this directly: <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms683493(v=vs.85).aspx\" rel=\"nofollow noreferrer\">InitOnceExecuteOnce</a>. You can find an <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms686934(v=vs.85).aspx\" rel=\"nofollow noreferrer\">worked example here</a>. This is approximately analogous POSIX's to <code>pthead_once</code> and works because initialization is performed using the constant <code>INIT_ONCE_STATIC_INIT</code>.</p>\n\n<p>In your case it would look something like:</p>\n\n<pre><code>INIT_ONCE g_InitOnce = INIT_ONCE_STATIC_INIT;\nA* g_AInstance = 0;  \n\nBOOL CALLBACK MakeA(\n    PINIT_ONCE InitOnce,       \n    PVOID Parameter,           \n    PVOID *lpContext)\n{\n    g_AInstance = new A(...);\n    return TRUE;\n}\n\nclass A\n{\nprivate:\n\npublic:\n    static A&amp; GetInstance() {\n        // Execute the initialization callback function \n        bStatus = InitOnceExecuteOnce(&amp;g_InitOnce,          \n                            MakeA,   \n                            NULL,                 \n                            NULL);          \n        assert(bStatus);\n        return *g_AInstance;\n    }\n};        \n</code></pre>\n\n<p>Raymond Chen wrote a <a href=\"https://blogs.msdn.microsoft.com/oldnewthing/20120420-00/?p=7813\" rel=\"nofollow noreferrer\">blog entry about this function</a> which also makes for good reading.</p>\n"}], "owner": {"reputation": 787, "user_id": 3173858, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/5587dae935b669ef43b93eb5d176a9d7?s=128&d=identicon&r=PG&f=1", "display_name": "Bryce Wagner", "link": "https://stackoverflow.com/users/3173858/bryce-wagner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 173, "favorite_count": 0, "accepted_answer_id": 50262662, "answer_count": 1, "score": 2, "last_activity_date": 1525906182, "creation_date": 1525901995, "question_id": 50262460, "link": "https://stackoverflow.com/questions/50262460/vc6-thread-safe-static-initialization", "title": "VC++6 thread safe static initialization", "body": "<p>I'll start off by saying that I'm already aware that in C++11 standard, static local initialization is now threadsafe.  However, I am still required to maintain compatibility with Microsoft Visual C++ 6, so C++11 behavior isn't applicable.</p>\n\n<p>I have a static library which uses a handful of static variables.  I ran into issues with static variables getting used before they were initialized (single threaded):</p>\n\n<pre><code>class A\n{\nprivate:\n    static A Instance;\npublic:\n    static A&amp; GetInstance() { return Instance; }\n};\n\n// And then from a different file:\n\nA.GetInstance();\n</code></pre>\n\n<p>A.GetInstance() would return an uninitialized instance.  So I followed this advice <a href=\"http://www.cs.technion.ac.il/users/yechiel/c++-faq/static-init-order-on-first-use-members.html\" rel=\"nofollow noreferrer\">http://www.cs.technion.ac.il/users/yechiel/c++-faq/static-init-order-on-first-use-members.html</a> and moved all my static variables into local methods.</p>\n\n<pre><code>class A\n{\npublic:\n    static A&amp; GetInstance()\n    {\n        static A Instance;\n        return Instance;\n    }\n};\n</code></pre>\n\n<p>I thought that fixed the problem, but now I'm finding out that stuff isn't always getting initialized properly because I create other threads during startup.</p>\n\n<p>Raymond Chen described the problem in 2004:  <a href=\"https://blogs.msdn.microsoft.com/oldnewthing/20040308-00/?p=40363\" rel=\"nofollow noreferrer\">https://blogs.msdn.microsoft.com/oldnewthing/20040308-00/?p=40363</a> , but nobody seemed to have any solutions.  The only solutions anyone mentions are to use mutexes to prevent initialization from multiple threads.  But this seems like a chicken and egg problem.  Every type of mutex that I'm aware of requires some kind of initialization before it can be used.  How can I make sure it gets initialized before I use it for the first time.  I guess I'd have to make it static local.  But how do I ensure it get initialized from one thread?</p>\n\n<p>If I could ensure that I have one memory location initialized to a known value before anything else is initialized, I could use interlocked operations on it to spin wait to bootstrap my whole initialization.  Is there any way to ensure one memory location is in a known state from multiple threads before any other initialization occurs?  Or any kind of synchronization that can be done without the chicken and egg problem?</p>\n"}, {"tags": ["c++", "qt", "ros", "qpixmap"], "comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1525901674, "post_id": 50262348, "comment_id": 87542863, "body": "&quot;It is not safe to use pixmaps outside the GUI thread ... Do you have any idea how to solve this?&quot; -   Stick to using them in the main/gui thread.. would be the obvious answer.."}, {"owner": {"reputation": 2028, "user_id": 3636909, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/da875264051dc76606a99aff3b8448a8?s=128&d=identicon&r=PG&f=1", "display_name": "Ja_cpp", "link": "https://stackoverflow.com/users/3636909/ja-cpp"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1525904002, "post_id": 50262348, "comment_id": 87543635, "body": "@JesperJuhl because that&#39;s my question, I don&#39;t know how to go that"}, {"owner": {"reputation": 7482, "user_id": 313175, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/17983e85ea926e9e985c00d1a771f24a?s=128&d=identicon&r=PG", "display_name": "Alexander V", "link": "https://stackoverflow.com/users/313175/alexander-v"}, "edited": false, "score": 1, "creation_date": 1525906741, "post_id": 50262348, "comment_id": 87544461, "body": "Just use QImage between threads and you can at last convert to QPixmap on UI thread. But you don&#39;t even have to: no problem to render QImage on any label with overloading of paint event using QPainter."}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1526060262, "post_id": 50262348, "comment_id": 87611919, "body": "Why do you even use <code>cv_bridge</code>? <code>msg</code> already has the image data that you can wrap in a <code>QImage</code>."}, {"owner": {"reputation": 2028, "user_id": 3636909, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/da875264051dc76606a99aff3b8448a8?s=128&d=identicon&r=PG&f=1", "display_name": "Ja_cpp", "link": "https://stackoverflow.com/users/3636909/ja-cpp"}, "reply_to_user": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1526119247, "post_id": 50262348, "comment_id": 87626257, "body": "@KubaOber What I shared is just a part of my code that is necessary to understand my issue. I need <code>opencv</code> later"}], "answers": [{"comments": [{"owner": {"reputation": 2028, "user_id": 3636909, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/da875264051dc76606a99aff3b8448a8?s=128&d=identicon&r=PG&f=1", "display_name": "Ja_cpp", "link": "https://stackoverflow.com/users/3636909/ja-cpp"}, "edited": false, "score": 0, "creation_date": 1526119337, "post_id": 50265798, "comment_id": 87626277, "body": "Wonderful answer. I know you spent time on it so thank you!"}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "reply_to_user": {"reputation": 2028, "user_id": 3636909, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/da875264051dc76606a99aff3b8448a8?s=128&d=identicon&r=PG&f=1", "display_name": "Ja_cpp", "link": "https://stackoverflow.com/users/3636909/ja-cpp"}, "edited": false, "score": 0, "creation_date": 1526242760, "post_id": 50265798, "comment_id": 87656319, "body": "@Ja_cpp Ingen orsak :)"}], "tags": [], "owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "is_accepted": true, "score": 3, "last_activity_date": 1526060186, "last_edit_date": 1526060186, "creation_date": 1525928488, "answer_id": 50265798, "question_id": 50262348, "link": "https://stackoverflow.com/questions/50262348/how-to-solve-qpixmap-it-is-not-safe-to-use-pixmaps-outside-the-gui-thread/50265798#50265798", "title": "How to solve: QPixmap: It is not safe to use pixmaps outside the GUI thread", "body": "<p>The callback is invoked from an arbitrary thread. Thus the other method calls must be made thread-safe. A simple way to do it is to emit a signal with the image. See <a href=\"https://stackoverflow.com/q/40382820/1329652\">this question</a> for other approaches.</p>\n\n<p>But you're also copying the image data unnecessarily. The callback has full control over image lifetime - the <code>sensor_msgs::ImageConstPtr</code> is a shared pointer, after all. Thus - pass the <code>ImageConstPtr</code> all the way to the target thread, then the <code>QImage</code> becomes a thin wrapper over the <code>Image</code> class, and doesn't copy its data unless a BGR-TO-RGB format conversion is necessary.</p>\n\n<p>There's no need for <code>cvBridge</code> at all -- you're not using OpenCV, after all.</p>\n\n<p>Let's start with a minimal reimplementation of ROS that will allow us to try things out on a desktop platform without installing ROS :)</p>\n\n<pre><code>// https://github.com/KubaO/stackoverflown/tree/master/questions/qimage-ros-50262348\n#include &lt;QtWidgets&gt;\n#include &lt;memory&gt;\n#include &lt;string&gt;\n#include &lt;vector&gt;\n\n// Minimal reimplementation of ROS\n\n#define ROS_ERROR qFatal\nnamespace sensor_msgs {\nnamespace image_encodings {\nconst std::string MONO8{\"mono8\"}, BGR8{\"bgr8\"}, BGRA8{\"bgra8\"}, RGB8{\"rgb8\"}, RGBA8{\"rgba8\"};\n} // image_encodings\nstruct Image {\n   std::vector&lt;quint8&gt; data;\n   std::string encoding;\n   uint32_t height;\n   uint32_t width;\n};\nusing ImagePtr = std::shared_ptr&lt;Image&gt;;\nusing ImageConstPtr = std::shared_ptr&lt;const Image&gt;;\n} // sensor_msgs\n\nnamespace ros {\nstruct Subscriber {};\nstruct NodeHandle {\n   template&lt;class M, class T&gt;\n   Subscriber subscribe(const std::string &amp;, uint32_t, void(T::*fun)(M), T *obj) {\n      struct Thread : QThread {\n         Thread(QObject*p):QThread(p){} ~Thread() override { quit(); wait(); } };\n      static QPointer&lt;Thread&gt; thread = new Thread(qApp);\n      thread-&gt;start(); // no-op if already started\n      auto *timer = new QTimer;\n      timer-&gt;start(1000/60);\n      timer-&gt;moveToThread(thread);\n      QObject::connect(timer, &amp;QTimer::timeout, [obj, fun]{\n         auto const msec = QTime::currentTime().msecsSinceStartOfDay();\n         QImage img{256, 256, QImage::Format_ARGB32_Premultiplied};\n         img.fill(Qt::white);\n         QPainter p{&amp;img};\n         constexpr int period = 3000;\n         p.scale(img.width()/2.0, img.height()/2.0);\n         p.translate(1.0, 1.0);\n         p.rotate((msec % period) * 360.0/period);\n         p.setPen({Qt::darkBlue, 0.1});\n         p.drawLine(QLineF{{-1., 0.}, {1., 0.}});\n         p.end();\n         img = std::move(img).convertToFormat(QImage::Format_RGB888).rgbSwapped();\n         sensor_msgs::ImageConstPtr ptr{new sensor_msgs::Image{\n               {img.constBits(), img.constBits() + img.sizeInBytes()},\n               sensor_msgs::image_encodings::BGR8,\n                     (uint32_t)img.height(), (uint32_t)img.width()}};\n         (*obj.*fun)(ptr);\n      });\n      return {};\n   }\n};\nvoid init(int &amp;, char **, const std::string &amp;) {}\n} // ros\n</code></pre>\n\n<p>The callbacks are invoked from a worker thread, as would happen in ROS.</p>\n\n<p>For demonstration purposes, we can make the main window a <code>QLabel</code>. We need to pass the <code>ImageConstPtr</code> to the main thread, where it will be wrapped in a <code>QImage</code> and set on the label. The signal itself can be the callback. Thus:</p>\n\n<pre><code>// Interface\n\nclass MainWindow : public QLabel {\n   Q_OBJECT\npublic:\n   MainWindow(int argc, char** argv, QWidget *parent = {});\nprotected:\n   Q_SLOT void setImageMsg(const sensor_msgs::ImageConstPtr&amp;);\n   Q_SIGNAL void newImageMsg(const sensor_msgs::ImageConstPtr&amp;);\nprivate:\n   ros::Subscriber sub;\n};\n\nQ_DECLARE_METATYPE(sensor_msgs::ImageConstPtr)\n</code></pre>\n\n<p>First, we need a way to wrap the <code>ImageConstPtr</code> in a <code>QImage</code>. The <code>QImage</code> does not copy the data from the <code>msg</code> unless a format conversion is necessary. The image must be consumed while the <code>msg</code> is kept alive. The <code>std::move(image).conversion()</code> is an idiom for modifying the image in-place. Modern Qt supports this optimization.</p>\n\n<pre><code>// Implementation\n\nstatic QImage toImageShare(const sensor_msgs::ImageConstPtr &amp;msg) {\n   using namespace sensor_msgs::image_encodings;\n   QImage::Format format = {};\n   if (msg-&gt;encoding == RGB8 || msg-&gt;encoding == BGR8)\n      format = QImage::Format_RGB888;\n   else if (msg-&gt;encoding == RGBA8 || msg-&gt;encoding == BGRA8)\n      format = QImage::Format_RGBA8888_Premultiplied;\n   else if (msg-&gt;encoding == MONO8)\n      format = QImage::Format_Grayscale8;\n   else\n      return {};\n   QImage img(msg-&gt;data.data(), msg-&gt;width, msg-&gt;height, format);\n   if (msg-&gt;encoding == BGR8 || msg-&gt;encoding == BGRA8)\n      img = std::move(img).rgbSwapped();\n   return img;\n}\n</code></pre>\n\n<p>The implementation of the <code>MainWindow</code> and the rest of the demo harness is then quite straightforward:</p>\n\n<pre><code>MainWindow::MainWindow(int argc, char** argv, QWidget *parent) : QLabel(parent) {\n   qRegisterMetaType&lt;sensor_msgs::ImageConstPtr&gt;();\n#if QT_VERSION &gt;= QT_VERSION_CHECK(5,0,0)\n   connect(this, &amp;MainWindow::newImageMsg, this, &amp;MainWindow::setImageMsg);\n#else\n   connect(this, SIGNAL(newImageMsg(sensor_msgs::ImageConstPtr)), SLOT(setImageMsg(sensor_msgs::ImageConstPtr)));\n#endif\n   ros::init(argc,argv,\"MainWindow\");\n   ros::NodeHandle n;\n   sub = n.subscribe(\"/usb_cam/image_raw\", 1, &amp;MainWindow::newImageMsg, this);\n}\n\nvoid MainWindow::setImageMsg(const sensor_msgs::ImageConstPtr &amp;msg) {\n   auto img = toImageShare(msg);\n   auto pix = QPixmap::fromImage(std::move(img));\n   setPixmap(pix);\n   resize(pix.size());\n}\n\nint main(int argc, char *argv[])\n{\n   QApplication app{argc, argv};\n   MainWindow w{argc, argv};\n   w.show();\n   return app.exec();\n}\n#include \"main.moc\"\n</code></pre>\n\n<p>This concludes the example.</p>\n"}], "owner": {"reputation": 2028, "user_id": 3636909, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/da875264051dc76606a99aff3b8448a8?s=128&d=identicon&r=PG&f=1", "display_name": "Ja_cpp", "link": "https://stackoverflow.com/users/3636909/ja-cpp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 915, "favorite_count": 0, "accepted_answer_id": 50265798, "answer_count": 1, "score": 0, "last_activity_date": 1526060186, "creation_date": 1525901364, "question_id": 50262348, "link": "https://stackoverflow.com/questions/50262348/how-to-solve-qpixmap-it-is-not-safe-to-use-pixmaps-outside-the-gui-thread", "title": "How to solve: QPixmap: It is not safe to use pixmaps outside the GUI thread", "body": "<p>I'm trying to display a sequence of images coming at 30 image per second in <code>qt label</code> but I'm getting that error of GUI thread. I did little bit research and I read that it is recommended using <code>QImage</code> instead but I'm not sure how to do it in my case.\nHere's a shot of my classes and the method I'm using to get the frames:</p>\n\n<p><strong><em>main_window.hpp</em></strong></p>\n\n<pre><code>class MainWindow : public QMainWindow {\nQ_OBJECT\n\npublic:\n    MainWindow(int argc, char** argv, QWidget *parent = 0);\n    ~MainWindow();\n\npublic Q_SLOTS:\n    void callBackColor(const sensor_msgs::ImageConstPtr&amp; msg);\n\nprivate:\n    Ui::MainWindowDesign ui;\n    ros::Subscriber sub;\n};\n</code></pre>\n\n<p><strong><em>main_window.cpp</em></strong></p>\n\n<pre><code>MainWindow::MainWindow(int argc, char** argv, QWidget *parent)\n    : QMainWindow(parent)\n{\n    ui.setupUi(this);\n\n    ros::init(argc,argv,\"MainWindow\");\n    ros::NodeHandle n;\n    sub = n.subscribe(\"/usb_cam/image_raw\", 1, &amp;MainWindow::callBackColor, this);\n}\n\nvoid MainWindow::callBackColor(const sensor_msgs::ImageConstPtr&amp; msg)\n{\n\n  cv_bridge::CvImagePtr cv_ptr;\n\n  try\n  {\n    cv_ptr = cv_bridge::toCvCopy(msg, sensor_msgs::image_encodings::BGR8);\n  }\n\n  catch (cv_bridge::Exception&amp; e)\n  {\n    ROS_ERROR(\"cv_bridge exception: %s\", e.what());\n    return;\n  }\n  //Here I got the image and I want to display it in a label\n  QImage temp(&amp;(msg-&gt;data[0]), msg-&gt;width, msg-&gt;height, \n  QImage::Format_RGB888);\n  static QLabel *imageLabel = new QLabel;\n  QPixmap pix = QPixmap::fromImage(temp);\n  ui.imageLabel-&gt;setPixmap(pix);\n}\n</code></pre>\n\n<p>Do you have any idea how to solve this?</p>\n"}, {"tags": ["c++", "template-meta-programming", "compile-time"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1525901341, "post_id": 50262315, "comment_id": 87542756, "body": "Just answered a very related question earlier toda: <a href=\"https://stackoverflow.com/questions/50253286/using-stdis-same-why-my-function-still-cant-work-for-2-types\" title=\"using stdis same why my function still cant work for 2 types\">stackoverflow.com/questions/50253286/&hellip;</a>"}, {"owner": {"reputation": 131, "user_id": 6804029, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2aedd04816e2740dcec19e44693ccf9?s=128&d=identicon&r=PG&f=1", "display_name": "Jaeya", "link": "https://stackoverflow.com/users/6804029/jaeya"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1525905088, "post_id": 50262315, "comment_id": 87543990, "body": "Didn&#39;t know about &quot;if constexpr&quot;, thanks! (Also, it&#39;s surprising this wasn&#39;t in the standard until C++17...)"}], "owner": {"reputation": 131, "user_id": 6804029, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2aedd04816e2740dcec19e44693ccf9?s=128&d=identicon&r=PG&f=1", "display_name": "Jaeya", "link": "https://stackoverflow.com/users/6804029/jaeya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 27, "favorite_count": 0, "closed_date": 1525902062, "answer_count": 0, "score": 0, "last_activity_date": 1525901228, "creation_date": 1525901228, "question_id": 50262315, "link": "https://stackoverflow.com/questions/50262315/conditional-code-compilation-with-c-templates", "closed_reason": "Duplicate", "title": "Conditional code compilation with C++ templates", "body": "<p>I have a template class and I would like to conditionally compile code depending on a <code>static constexpr bool</code> member of the template parameter <code>T</code>:</p>\n\n<pre><code>template &lt;typename T&gt;\nclass A : public T {\n  explicit A() {\n     ...\n     if(T::boolmember) {\n        T::intmember1++;\n     } else {\n        T::intmember2++\n     }\n  }\n}\n</code></pre>\n\n<p>This will not compile: only types <code>T</code> which have member <code>boolmember</code> as <code>true</code> contain a member variable <code>intmember1</code>; only types <code>T</code> which have <code>boolmember</code> as <code>false</code> contain a member variable <code>intmember2</code>.</p>\n\n<p>How could I do this? Of course one option is to write template specializations for each function where this situation occurs. There are two issues with this approach:</p>\n\n<ul>\n<li>Variable <code>T::boolmember</code> is not one of the parameters of the class template.</li>\n<li>This situation occurs very often throughout my code, always in small pieces of code, and with different conditions. Doing so would defeat the purpose of template metaprogramming.</li>\n</ul>\n\n<p>Any help is very appreciated.</p>\n"}, {"tags": ["c++", "catch-unit-test"], "answers": [{"tags": [], "owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "is_accepted": true, "score": 1, "last_activity_date": 1525901307, "creation_date": 1525901307, "answer_id": 50262333, "question_id": 50262251, "link": "https://stackoverflow.com/questions/50262251/getting-sections-that-will-be-run-in-catch/50262333#50262333", "title": "Getting sections that will be run in Catch", "body": "<p>I don't think so. <code>SECTION</code> expands into <a href=\"https://github.com/catchorg/Catch2/blob/master/include/internal/catch_section.h\" rel=\"nofollow noreferrer\"><code>INTERNAL_CATCH_SECTION</code></a> which is just an <code>if</code> statement creating <code>SectionInfo</code> class instance\n:</p>\n\n<pre><code>   #define INTERNAL_CATCH_SECTION( ... ) \\\n    if( Catch::Section const&amp; INTERNAL_CATCH_UNIQUE_NAME( catch_internal_Section ) = Catch::SectionInfo( CATCH_INTERNAL_LINEINFO, __VA_ARGS__ ) )\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2991, "user_id": 3276485, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/zPWn4.jpg?s=128&g=1", "display_name": "Xarn", "link": "https://stackoverflow.com/users/3276485/xarn"}, "is_accepted": false, "score": 1, "last_activity_date": 1526050346, "creation_date": 1526050346, "answer_id": 50294991, "question_id": 50262251, "link": "https://stackoverflow.com/questions/50262251/getting-sections-that-will-be-run-in-catch/50294991#50294991", "title": "Getting sections that will be run in Catch", "body": "<p>There is not, especially since sections can be \"dynamic\" in that they can be hidden behind extra ifs, be run inside a loop and so on.</p>\n"}], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 608, "favorite_count": 0, "accepted_answer_id": 50262333, "answer_count": 2, "score": 0, "last_activity_date": 1526050346, "creation_date": 1525900920, "question_id": 50262251, "link": "https://stackoverflow.com/questions/50262251/getting-sections-that-will-be-run-in-catch", "title": "Getting sections that will be run in Catch", "body": "<p>The Catch2 unit test framework allows you to have <a href=\"https://github.com/catchorg/Catch2/blob/master/docs/tutorial.md#test-cases-and-sections\" rel=\"nofollow noreferrer\">test sections</a>. From the docs:</p>\n\n<pre><code>TEST_CASE( \"vectors can be sized and resized\", \"[vector]\" ) {\n\n    std::vector&lt;int&gt; v( 5 );\n\n    REQUIRE( v.size() == 5 );\n    REQUIRE( v.capacity() &gt;= 5 );\n\n    SECTION( \"resizing bigger changes size and capacity\" ) {\n        v.resize( 10 );\n\n        REQUIRE( v.size() == 10 );\n        REQUIRE( v.capacity() &gt;= 10 );\n    }\n    SECTION( \"resizing smaller changes size but not capacity\" ) {\n        v.resize( 0 );\n\n        REQUIRE( v.size() == 0 );\n        REQUIRE( v.capacity() &gt;= 5 );\n    }\n\n    // ...\n}\n</code></pre>\n\n<p>Is there a way to identify <strong>up front</strong>, at the time of <code>testCaseStarting()</code>, what is the list of <code>SECTION</code>s that the particular run? As an example, given:</p>\n\n<pre><code>TEST_CASE(\"a\", \"[tag]\") {\n    SECTION(\"b\") {\n    }\n\n    SECTION(\"c\") {\n        SECTION(\"d\") { }\n        SECTION(\"e\") { }\n    }\n}\n</code></pre>\n\n<p>I want some way to get <code>{b}</code> for the first run, <code>{c, d}</code> for the second, and <code>{c, e}</code> for the third. Is there any way to do this? </p>\n"}, {"tags": ["python", "c++", "opencv"], "comments": [{"owner": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "edited": false, "score": 1, "creation_date": 1525902449, "post_id": 50262079, "comment_id": 87543118, "body": "<code>zip</code> lets you iterate over two arrays at once, and the <code>enumerate</code> adds an index. So the simplest way in c++ is to just do <code>for (int i(0); i &lt; good_new.rows; ++i)</code> and then <code>cv::Mat new_row(good_new.row(i)); cv::Mat old_row(good_old.row(i);</code>. | <code>ravel</code> just flattens the array..."}, {"owner": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "edited": false, "score": 1, "creation_date": 1525902454, "post_id": 50262079, "comment_id": 87543121, "body": "BTW: <a href=\"https://github.com/opencv/opencv/blob/master/samples/cpp/lkdemo.cpp\" rel=\"nofollow noreferrer\">github.com/opencv/opencv/blob/master/samples/cpp/lkdemo.cpp</a>"}, {"owner": {"reputation": 1123, "user_id": 6121695, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/b15074dc4dca52f491bdcd50f9e5d910?s=128&d=identicon&r=PG&f=1", "display_name": "hereForLearing", "link": "https://stackoverflow.com/users/6121695/hereforlearing"}, "reply_to_user": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "edited": false, "score": 1, "creation_date": 1526078571, "post_id": 50262079, "comment_id": 87618978, "body": "Thank you, I&#39;ll see if I can do it now"}, {"owner": {"reputation": 1123, "user_id": 6121695, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/b15074dc4dca52f491bdcd50f9e5d910?s=128&d=identicon&r=PG&f=1", "display_name": "hereForLearing", "link": "https://stackoverflow.com/users/6121695/hereforlearing"}, "reply_to_user": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "edited": false, "score": 0, "creation_date": 1527300934, "post_id": 50262079, "comment_id": 88089369, "body": "By the way, is this numpy.ravel method? because in the docs here (link below), it says that it returns one value, but in the code above it returns two <a href=\"https://docs.scipy.org/doc/numpy/reference/generated/numpy.ravel.html\" rel=\"nofollow noreferrer\">docs.scipy.org/doc/numpy/reference/generated/numpy.ravel.htm&zwnj;&#8203;l</a>"}], "owner": {"reputation": 1123, "user_id": 6121695, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/b15074dc4dca52f491bdcd50f9e5d910?s=128&d=identicon&r=PG&f=1", "display_name": "hereForLearing", "link": "https://stackoverflow.com/users/6121695/hereforlearing"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1783, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1525900529, "creation_date": 1525900102, "last_edit_date": 1525900529, "question_id": 50262079, "link": "https://stackoverflow.com/questions/50262079/lucas-kanade-optical-flow-in-opencv-c-translating-code-from-python", "title": "Lucas-Kanade Optical Flow in OpenCV C++ : Translating code from Python", "body": "<p>I'm trying to draw the \"path\" of several moving objects in a video, and the output will be an image, with the final state (of the moving objects) and the drawn path, <a href=\"https://docs.opencv.org/3.3.1/d7/d8b/tutorial_py_lucas_kanade.html\" rel=\"nofollow noreferrer\">I found a code doing this in Python</a> (see the \"Lucas-Kanade Optical Flow in OpenCV\" part) , and I'm trying to translate it to C++, the problem is that I'm new to both OpenCv and Python, I've been successful to translate the first part, but not to draw the lines, here is what I've done : </p>\n\n<pre><code>#include \"opencv2/imgcodecs.hpp\"\n#include \"opencv2/highgui.hpp\"\n#include \"opencv2/video/tracking.hpp\"\n#include \"opencv2/imgproc.hpp\"\n#include &lt;iostream&gt;\n\nusing namespace cv;\nusing namespace std;\n\n/**\n* @function main\n*/\nint main(int argc, char** argv)\n{\n    //TODO\n    VideoCapture src = VideoCapture(\"C:\\\\Users\\\\youss\\\\Desktop\\\\opencv\\\\movingCars.mp4\");\n    Mat currentFrame, oldGrayedFrame, grayedFrame, mask ;\n    vector&lt;Point2f&gt; prevPts, nextPts;\n    vector&lt;uchar&gt; status;\n    vector&lt;float&gt; err;\n    vector&lt;Point2f&gt; corners;\n    Mat good_new = Mat(), good_old = Mat();\n    int maxCorners = 100,\n        minDistance = 7,\n        blockSize = 7;\n    double qualityLevel = 0.3;\n    src.read(currentFrame);\n    cvtColor(currentFrame, oldGrayedFrame, COLOR_BGR2GRAY);\n\n    goodFeaturesToTrack(oldGrayedFrame, corners, maxCorners, qualityLevel, minDistance, Mat(), blockSize);\n\n    mask = Mat::zeros(currentFrame.size(), currentFrame.type());\n    prevPts = corners;\n    //while (true) {\n        src.read(currentFrame);\n        cvtColor(currentFrame, grayedFrame, COLOR_BGR2GRAY);\n        calcOpticalFlowPyrLK(oldGrayedFrame, grayedFrame, prevPts, nextPts, status, err);\n        int i, k;\n        for (i = k = 0; i &lt; nextPts.size(); i++) {\n            if (!status[i]) continue;\n            prevPts[k] = prevPts[i];\n            nextPts[k] = nextPts[i];\n            err[k] = err[i];\n            k++;\n        }\n        prevPts.resize(k);\n        nextPts.resize(k);\n        err.resize(k);\n    //}\n}\n</code></pre>\n\n<p>I'm not looking for someone to do the work for me, but I will appreciate any explanation/hints on how to translate the remaining part : </p>\n\n<pre><code># draw the tracks\n    for i,(new,old) in enumerate(zip(good_new,good_old)):\n        a,b = new.ravel()\n        c,d = old.ravel()\n        mask = cv2.line(mask, (a,b),(c,d), color[i].tolist(), 2)\n        frame = cv2.circle(frame,(a,b),5,color[i].tolist(),-1)\n    img = cv2.add(frame,mask)\n</code></pre>\n"}, {"tags": ["c++", "vector", "composition"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 3, "creation_date": 1525900043, "post_id": 50262034, "comment_id": 87542227, "body": "None. <code>vec3</code> stores <code>vec2</code>&#39;s, not <code>vec1</code>&#39;s."}, {"owner": {"reputation": 1888, "user_id": 2168706, "user_type": "registered", "accept_rate": 37, "profile_image": "https://i.stack.imgur.com/JB0GQ.jpg?s=128&g=1", "display_name": "Santosh Sahu", "link": "https://stackoverflow.com/users/2168706/santosh-sahu"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1525900121, "post_id": 50262034, "comment_id": 87542262, "body": "@NathanOliver, you are correct, but my problem wants to access vec1&#39;s variable from vec3. The elements all are public here."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1525900211, "post_id": 50262034, "comment_id": 87542296, "body": "The question is which <code>v2</code>&#39;s <code>v1</code>s are you trying to access?"}, {"owner": {"reputation": 5781, "user_id": 8746007, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Wr8CIbEqJ4w/AAAAAAAAAAI/AAAAAAAAAFE/Ym-NjswzViM/photo.jpg?sz=128", "display_name": "Killzone Kid", "link": "https://stackoverflow.com/users/8746007/killzone-kid"}, "edited": false, "score": 1, "creation_date": 1525900313, "post_id": 50262034, "comment_id": 87542345, "body": "<code>v3.v2[0].v1[0].x</code> but it is not possible as <code>v3.v2</code> is empty"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1525900445, "post_id": 50262034, "comment_id": 87542402, "body": "<code>vec3</code> doesn&#39;t inherit <code>vec1</code> or has any other relationship to it, so how would you expect to be able to access a member of <code>vec1</code> via a <code>vec3</code>?? Your question doesn&#39;t make sense. This sounds like a <a href=\"http://xyproblem.info\" rel=\"nofollow noreferrer\">XY problem</a>. What are you <i>actually</i> trying to accomplish?"}, {"owner": {"reputation": 6196, "user_id": 5822075, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1ba9afcd0c36d9685e3e1b5f2f82be2?s=128&d=identicon&r=PG&f=1", "display_name": "e0k", "link": "https://stackoverflow.com/users/5822075/e0k"}, "edited": false, "score": 1, "creation_date": 1525902943, "post_id": 50262034, "comment_id": 87543285, "body": "Don&#39;t confuse instances and classes. Just because a class (<code>vec3</code>) has a data member based on another class (<code>vec2</code>) doesn&#39;t mean that <i>every</i> instance of <code>vec3</code> knows about every instance of <code>vec2</code> (or <code>vec1</code>). Your <code>v3</code> doesn&#39;t know <code>v</code> exists at all."}], "answers": [{"tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 0, "last_activity_date": 1525900623, "creation_date": 1525900623, "answer_id": 50262192, "question_id": 50262034, "link": "https://stackoverflow.com/questions/50262034/accessing-base-class-member-in-a-multiple-level-composite-relationship/50262192#50262192", "title": "Accessing base class member in a multiple level composite relationship", "body": "<blockquote>\n  <p>I want to access class <strong>\"vec1's x variable\" using v3 object</strong></p>\n</blockquote>\n\n<p>That shows lack of clarity on your part as to how the different objects are related.</p>\n\n<p><code>v3</code> holds a <code>std::vector</code> of <code>vec2</code> objects. That is an empty <code>std::vector</code> when <code>v3</code> is constructed the way you have. You have to add an object of type <code>vec2</code> to <code>v3.v2</code> to be able to access any <code>vec2</code> object from <code>v3</code>.</p>\n\n<pre><code>v3.v2.push_back(vec2());\nvec2&amp; v2 = v3.v2[0]; // Now you have access to a vec2 object from v3.\n</code></pre>\n\n<p>However, the <code>vec2</code> object's <code>v1</code> is an empty <code>std::vector</code>. You need to add a <code>vec1</code> object to it before you can access such an object from <code>v3</code>.</p>\n\n<pre><code>v3.v2.push_back(vec2);\nv3.v2[0].v1.push_back(vec1(10));\nvec1&amp; v1 = v3.v2[0].v1[0]; // Now you have access to a vec1 object from v3.\n</code></pre>\n\n<p>Now, you can access and modify the <code>x</code> of the <code>vec1</code> object.</p>\n\n<pre><code>v3.v2.push_back(vec2);\nv3.v2[0].v1.push_back(vec1(10));\n\n// Get the value and print it to cout.\nstd::cout &lt;&lt; v3.v2[0].v1[0].x &lt;&lt; std::endl;\n\nChange the value\nv3.v2[0].v1[0].x = 20;\n</code></pre>\n"}], "owner": {"reputation": 1888, "user_id": 2168706, "user_type": "registered", "accept_rate": 37, "profile_image": "https://i.stack.imgur.com/JB0GQ.jpg?s=128&g=1", "display_name": "Santosh Sahu", "link": "https://stackoverflow.com/users/2168706/santosh-sahu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 45, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1525900623, "creation_date": 1525899897, "question_id": 50262034, "link": "https://stackoverflow.com/questions/50262034/accessing-base-class-member-in-a-multiple-level-composite-relationship", "title": "Accessing base class member in a multiple level composite relationship", "body": "<p>I have three level composite type relationship between classes, with the member being a vector. Below is the code:</p>\n\n<pre><code>class vec1{\n  public: int x;\n  vec1(int n):x(n){}\n};\nclass vec2{\n  public: std::vector&lt;vec1&gt; v1;\n};\nclass vec3{\n  public: std::vector&lt;vec2&gt; v2;\n};\n</code></pre>\n\n<p>In main() function I will create an object</p>\n\n<pre><code> vec1 v(10);\n vec3 v3;\n</code></pre>\n\n<p>I want to access class <strong>\"vec1's x variable\" using v3 object</strong></p>\n\n<p>Which v3 object vector functions can be used to print \"vec1's x variable\"--></p>\n"}, {"tags": ["c++", "winapi", "print-spooler-api", "wtsapi32"], "comments": [{"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 1, "creation_date": 1525948856, "post_id": 50261896, "comment_id": 87559176, "body": "What is your debugger telling you?"}, {"owner": {"reputation": 732, "user_id": 6641300, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/9b14b1e30b33d5cfd2e7d7df59fabc67?s=128&d=identicon&r=PG", "display_name": "David Bentley", "link": "https://stackoverflow.com/users/6641300/david-bentley"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1525960100, "post_id": 50261896, "comment_id": 87565594, "body": "@IInspectable I do not believe there is any good way to get debug data from this as there is no way to simulate the interaction between the spooler service and port monitor DLL file."}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1525962511, "post_id": 50261896, "comment_id": 87567041, "body": "If not using a debugger, how have you determined, that <i>&quot;it literally does nothing&quot;</i>?"}, {"owner": {"reputation": 732, "user_id": 6641300, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/9b14b1e30b33d5cfd2e7d7df59fabc67?s=128&d=identicon&r=PG", "display_name": "David Bentley", "link": "https://stackoverflow.com/users/6641300/david-bentley"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1525966100, "post_id": 50261896, "comment_id": 87569410, "body": "@IInspectable I added a bit more detail on what I mean by &quot;works&quot; in my question. I know my code is good code since I placed it into a small console app and it properly sends data over my virtual channel. When placed into the dll, all other functions of the dll work as intended except for my code."}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1525968889, "post_id": 50261896, "comment_id": 87570942, "body": "<i>&quot;I know my code is good code&quot;</i> - We don&#39;t, and we have no way of telling, since your code is incomplete. We don&#39;t know the function signature, calling convention, or how you are exporting the symbol from your DLL. If you insist that you cannot use a debugger, at least provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 732, "user_id": 6641300, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/9b14b1e30b33d5cfd2e7d7df59fabc67?s=128&d=identicon&r=PG", "display_name": "David Bentley", "link": "https://stackoverflow.com/users/6641300/david-bentley"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1525971472, "post_id": 50261896, "comment_id": 87572468, "body": "@IInspectable I added all my virtual channel code even though I personally feel it will not help. I think the main issue is any DLL or child processes utilized by the spooler service seem to have limited access to windows API calls. If that is the case then I need to attack my problem from a different angle."}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1525986161, "post_id": 50261896, "comment_id": 87579474, "body": "Windows does not impose any API restrictions on DLL&#39;s or child processes. A process is a process, and any module (be it an EXE or a DLL) has access to the same set of API calls. It is still a mystery to me, why you believe that you cannot attach a debugger to the process that is loading your DLL, and take it from there."}, {"owner": {"reputation": 732, "user_id": 6641300, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/9b14b1e30b33d5cfd2e7d7df59fabc67?s=128&d=identicon&r=PG", "display_name": "David Bentley", "link": "https://stackoverflow.com/users/6641300/david-bentley"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1525987084, "post_id": 50261896, "comment_id": 87579834, "body": "@IInspectable I guess I can give that a go. I am likely going in a different direction anyways as it is not smart to directly stream a document since there could be lots of documents that must be sent over the internet so I am going to just create a queue type program and send them over with a service. Much cleaner and easier to do it that way."}, {"owner": {"reputation": 732, "user_id": 6641300, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/9b14b1e30b33d5cfd2e7d7df59fabc67?s=128&d=identicon&r=PG", "display_name": "David Bentley", "link": "https://stackoverflow.com/users/6641300/david-bentley"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1526005552, "post_id": 50261896, "comment_id": 87584529, "body": "@IInspectable I found the the problem in the session identifier overload. Since Spoolsv.exe operates from a session other than the one one connected via RPD, I need to specify the session overload in <code>WTSVirtualChannelOpen</code> correctly."}], "answers": [{"tags": [], "owner": {"reputation": 732, "user_id": 6641300, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/9b14b1e30b33d5cfd2e7d7df59fabc67?s=128&d=identicon&r=PG", "display_name": "David Bentley", "link": "https://stackoverflow.com/users/6641300/david-bentley"}, "is_accepted": true, "score": 0, "last_activity_date": 1526005733, "creation_date": 1526005733, "answer_id": 50284162, "question_id": 50261896, "link": "https://stackoverflow.com/questions/50261896/c-port-monitor-mfilemon-dll-rdp-virtual-channel-code-not-executing/50284162#50284162", "title": "C++ Port Monitor (mfilemon.dll) RDP Virtual Channel code not executing", "body": "<p>Spoolsv.exe is a service and hence operates in session that is NOT the same session as what is connected through RDP. Any DLLs used and child processes spawned are also part of that session.</p>\n\n<pre><code>mHandle = WTSVirtualChannelOpen(NULL, (DWORD)-1, (LPSTR)\"PRINTWP\");\n</code></pre>\n\n<p>The <code>(DWORD)-1</code> needs to be changed to the actual session that is connected via RDP.</p>\n"}], "owner": {"reputation": 732, "user_id": 6641300, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/9b14b1e30b33d5cfd2e7d7df59fabc67?s=128&d=identicon&r=PG", "display_name": "David Bentley", "link": "https://stackoverflow.com/users/6641300/david-bentley"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 393, "favorite_count": 0, "accepted_answer_id": 50284162, "answer_count": 1, "score": 0, "last_activity_date": 1557956169, "creation_date": 1525899261, "last_edit_date": 1534605288, "question_id": 50261896, "link": "https://stackoverflow.com/questions/50261896/c-port-monitor-mfilemon-dll-rdp-virtual-channel-code-not-executing", "title": "C++ Port Monitor (mfilemon.dll) RDP Virtual Channel code not executing", "body": "<p>I recently started working with open source mfilemon.dll and trying to add additional features to it.</p>\n\n<p>The feature I am adding is to transmit data over a virtual channel. I wrote a small console exe to test the code and what I have below successfully sends data (I get a message popup on the other side).</p>\n\n<p>When this code placed into mfilemon.dll, nothing happens. All the other functions of the DLL work like normal but is as this code is just not executed. I think The spooler service along with something in windows is blocking certain API calls but would be nice to know for sure.</p>\n\n<p>Here is the code for the exe I wrote that successfully sends data over my virtual channel (My project is target Win8.1 so I had to add <code>legacy_stdio_definitions.lib</code> to the Linker input files).</p>\n\n<pre><code>#include \"stdafx.h\"\n#include \"conio.h\"\n#include \"iostream\"\nstruct IUnknown; // Workaround for \"combaseapi.h(229): error C2187: syntax error: 'identifier' was unexpected here\" when using /permissive-\n#include \"windows.h\"\n#include \"WtsApi32.h\"\n#pragma comment(lib, \"wtsapi32.lib\")\n\nint main()\n{\n    std::cout &lt;&lt; \"Testing\";\n\n    const char* data = \"You just printed data!\";\n\n    HANDLE mHandle;\n    mHandle = WTSVirtualChannelOpen(NULL, (DWORD)-1, (LPSTR)\"PRINTWP\");\n    PULONG written = 0;\n    bool ret = WTSVirtualChannelWrite(mHandle, (PCHAR)data, 22, written);\n\n    if (!ret || written == (PULONG)13)\n    {\n\n    }\n    else\n    {\n\n    }\n\n    ret = WTSVirtualChannelClose(mHandle);\n\n    _getch();\n    return 0;\n}\n</code></pre>\n\n<p>Here is my virtual channel DLL code.</p>\n\n<pre><code>#include \"stdafx.h\"\n#include &lt;windows.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;Shellapi.h&gt;\n#include &lt;Cchannel.h&gt; // Contains the definition for PCHANNEL_ENTRY_POINTS\n#include &lt;string.h&gt;\n#include &lt;winspool.h&gt;\n#include &lt;fstream&gt;\n#include &lt;iostream&gt;\n\nPCHANNEL_ENTRY_POINTS gpEntryPoints;\nLPHANDLE gphChannel;\nvoid VCAPITYPE VirtualChannelInitEventProc(LPVOID pInitHandle, UINT event, LPVOID pData, UINT dataLength);\n\nvoid VCAPITYPE VirtualChannelOpenEvent_PRINTWP(DWORD openHandle, UINT event, LPVOID pdata, UINT32 dataLength, UINT32 totalLength, UINT32 dataFlags);\nDWORD gdwOpenChannel_PRINTWP;\nconst char* channel_PRINTWP = \"PRINTWP\";\n\nBOOL VCAPITYPE VirtualChannelEntry(PCHANNEL_ENTRY_POINTS pEntryPoints)\n{\n    MessageBox(NULL, TEXT(\"RDP Virtual channel DLL Loaded.\"), TEXT(\"Hosted Channel\"), MB_OK);\n\n    gpEntryPoints = (PCHANNEL_ENTRY_POINTS)LocalAlloc(LPTR, pEntryPoints-&gt;cbSize);\n    CopyMemory(gpEntryPoints, pEntryPoints, pEntryPoints-&gt;cbSize);\n\n    UINT rc_channel;\n    CHANNEL_DEF channel_def[1]; // This is where you can increase the number of registered virtual channels assuming you define them later.\n\n    ZeroMemory(&amp;channel_def[0], sizeof(CHANNEL_DEF));\n    CopyMemory(channel_def[0].name, channel_PRINTWP, strlen(channel_PRINTWP));\n\n    rc_channel = gpEntryPoints-&gt;pVirtualChannelInit((LPVOID *)&amp;gphChannel, channel_def, 1, VIRTUAL_CHANNEL_VERSION_WIN2000, (PCHANNEL_INIT_EVENT_FN)VirtualChannelInitEventProc);\n\n    if (rc_channel != CHANNEL_RC_OK)\n    {\n        MessageBox(NULL, TEXT(\"RDP Virtual Channel registration has failed!\"),TEXT(\"Channel Message\"), MB_OK);\n        return FALSE;\n    }\n\n    if (channel_def[0].options != CHANNEL_OPTION_INITIALIZED)\n    {\n        MessageBox(NULL, TEXT(\"RDP Virtual Channel options initialization failure!\"), TEXT(\"Channel Message\"), MB_OK);\n        return FALSE;\n    }\n\n    MessageBox(NULL, TEXT(\"RDP Virtual Channel initialized.\"), TEXT(\"Channel Message\"), MB_OK);\n    return TRUE;\n}\n\nvoid VCAPITYPE VirtualChannelInitEventProc(LPVOID pInitHandle, UINT event, LPVOID pData, UINT dataLength)\n{\n    UINT rc_channel_HLINK;\n    UINT rc_channel_PREVIEW;\n    UINT rc_channel_PRINTWP;\n\n    switch (event)\n    {\n    case CHANNEL_EVENT_INITIALIZED:\n        break;\n    case CHANNEL_EVENT_CONNECTED:\n\n        rc_channel_PRINTWP = gpEntryPoints-&gt;pVirtualChannelOpen(gphChannel, &amp;gdwOpenChannel_PRINTWP, (PCHAR)channel_PRINTWP, (PCHANNEL_OPEN_EVENT_FN)VirtualChannelOpenEvent_PRINTWP);\n\n        if (rc_channel_PRINTWP != CHANNEL_RC_OK)\n        {\n            MessageBox(NULL, TEXT(\"Open of RDP virtual channel failed\"), TEXT(\"Channel Message\"), MB_OK);\n        }\n        else\n        {\n            MessageBox(NULL, TEXT(\"Open of RDP virtual channel success\"), TEXT(\"Channel Message\"), MB_OK);\n        }\n\n        break;\n\n    case CHANNEL_EVENT_V1_CONNECTED:\n        MessageBox(NULL, TEXT(\"Connecting to a non Windows 2000 Terminal Server\"), TEXT(\"Channel Message\"), MB_OK);\n        break;\n\n    case CHANNEL_EVENT_DISCONNECTED:\n        break;\n\n    case CHANNEL_EVENT_TERMINATED:\n        LocalFree((HLOCAL)gpEntryPoints);\n        break;\n\n    default:\n        break;\n    }\n}\n\nvoid VCAPITYPE VirtualChannelOpenEvent_PRINTWP(DWORD openHandle, UINT event, LPVOID pdata, UINT32 dataLength, UINT32 totalLength, UINT32 dataFlags)\n{\n    switch (event)\n    {\n    case CHANNEL_EVENT_DATA_RECEIVED:\n\n        MessageBox(NULL, TEXT(\"Data received.\"), TEXT(\"Channel Message\"), MB_OK);\n\n        char* data;\n        data = (char*)malloc(dataLength + 1);\n        CopyMemory(data, pdata, dataLength);\n        data[dataLength] = '\\0';\n\n        MessageBoxA(NULL, data, \"PRINTWP\", MB_OK);\n\n        free(data);\n\n        break;\n\n    default:\n        break;\n    }\n}\n</code></pre>\n\n<p>def file:</p>\n\n<pre><code>LIBRARY FrzHostedChannel\nEXPORTS\nVirtualChannelEntry\n</code></pre>\n\n<p>dllmain:</p>\n\n<pre><code>#include \"stdafx.h\"\n</code></pre>\n\n<p>Using this above code requires a registry change so the mstsc.exe knows to load this pluggin.</p>\n\n<p>If anyone is familiar with Port Monitors and executing code that does something other than create a file, that would be swell.</p>\n"}, {"tags": ["c++", "opencv"], "comments": [{"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1525899292, "post_id": 50261793, "comment_id": 87541903, "body": "That sounds like a Visual Studio IDE bug."}, {"owner": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "edited": false, "score": 0, "creation_date": 1525899880, "post_id": 50261793, "comment_id": 87542163, "body": "you should use <code>...build\\x64\\vc15\\bin</code> and <code>...opencv\\build\\x64\\vc15\\lib</code> to begin with... Btw, I never experienced such a problem with VS2017"}, {"owner": {"reputation": 153, "user_id": 5994320, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/49b8cb450a20dfe1cbceb4d91e0d167b?s=128&d=identicon&r=PG&f=1", "display_name": "adem sonmez", "link": "https://stackoverflow.com/users/5994320/adem-sonmez"}, "edited": false, "score": 0, "creation_date": 1525901155, "post_id": 50261793, "comment_id": 87542680, "body": "I tried vc15, but the problem continues."}, {"owner": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "edited": false, "score": 0, "creation_date": 1525901391, "post_id": 50261793, "comment_id": 87542773, "body": "you only linked to <code>opencv_world341d.lib</code>. I hope you linked that in debug mode only, and that you&#39;re running in debug mode. Use <code>opencv_world341.lib</code> for release. If that&#39;s correct.. as last chance I&#39;d upgrade visual studio to the latest version"}, {"owner": {"reputation": 153, "user_id": 5994320, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/49b8cb450a20dfe1cbceb4d91e0d167b?s=128&d=identicon&r=PG&f=1", "display_name": "adem sonmez", "link": "https://stackoverflow.com/users/5994320/adem-sonmez"}, "edited": false, "score": 0, "creation_date": 1525902193, "post_id": 50261793, "comment_id": 87543035, "body": "I am using in Debug mode and x64, I have the latest version of VS."}, {"owner": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "edited": false, "score": 0, "creation_date": 1525902428, "post_id": 50261793, "comment_id": 87543112, "body": "Sorry then... good luck ;)"}], "answers": [{"comments": [{"owner": {"reputation": 155, "user_id": 7969077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19c544c599cfbdb92fd4c004e647f769?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew T", "link": "https://stackoverflow.com/users/7969077/andrew-t"}, "edited": false, "score": 1, "creation_date": 1528745697, "post_id": 50281369, "comment_id": 88615687, "body": "The problem should be resolved in the next update of visual studio 2017. <a href=\"https://developercommunity.visualstudio.com/content/problem/258294/freeze-while-using-quick-info-on-cvmat.html\" rel=\"nofollow noreferrer\">developercommunity.visualstudio.com/content/problem/258294/&hellip;</a>"}], "tags": [], "owner": {"reputation": 155, "user_id": 7969077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19c544c599cfbdb92fd4c004e647f769?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew T", "link": "https://stackoverflow.com/users/7969077/andrew-t"}, "is_accepted": false, "score": 3, "last_activity_date": 1525985734, "creation_date": 1525985734, "answer_id": 50281369, "question_id": 50261793, "link": "https://stackoverflow.com/questions/50261793/visual-studio-2017-freezes-when-i-move-mouse-over-mat-keyword-opencv-3-4-1/50281369#50281369", "title": "Visual Studio 2017 Freezes when I move mouse over Mat keyword (OpenCv 3.4.1)", "body": "<p>You can disable the Auto Quick Info option by starting at the top menu and navigating to <em>Tools, Options, Text Editor, C/C++,</em> Advanced and under IntelliSense change the value for Auto Quick Info to False.</p>\n\n<p>This will turn all of the Quick Info helpers off, but will at least keep the project from freezing.</p>\n"}, {"tags": [], "owner": {"reputation": 153, "user_id": 5994320, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/49b8cb450a20dfe1cbceb4d91e0d167b?s=128&d=identicon&r=PG&f=1", "display_name": "adem sonmez", "link": "https://stackoverflow.com/users/5994320/adem-sonmez"}, "is_accepted": false, "score": 3, "last_activity_date": 1526156048, "creation_date": 1526156048, "answer_id": 50310313, "question_id": 50261793, "link": "https://stackoverflow.com/questions/50261793/visual-studio-2017-freezes-when-i-move-mouse-over-mat-keyword-opencv-3-4-1/50310313#50310313", "title": "Visual Studio 2017 Freezes when I move mouse over Mat keyword (OpenCv 3.4.1)", "body": "<p>It seems the problem is related with VS2017, I tried on VS2015 and did not get such an error.</p>\n"}, {"comments": [{"owner": {"reputation": 664, "user_id": 5707440, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/54a4defbda5f9d7982bde84371a83c87?s=128&d=identicon&r=PG&f=1", "display_name": "Grillteller", "link": "https://stackoverflow.com/users/5707440/grillteller"}, "edited": false, "score": 0, "creation_date": 1531898448, "post_id": 50926036, "comment_id": 89762857, "body": "Still unfixed in 15.7.5: <a href=\"https://stackoverflow.com/questions/51372040/hovering-over-mat-from-opencv-3-4-1-in-vs-15-7-5-still-freezes\" title=\"hovering over mat from opencv 3 4 1 in vs 15 7 5 still freezes\">stackoverflow.com/questions/51372040/&hellip;</a>"}, {"owner": {"reputation": 21, "user_id": 9961357, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-kfF7eUJdufs/AAAAAAAAAAI/AAAAAAAAAAA/L0xA_AKV4wE/photo.jpg?sz=128", "display_name": "TY Sun", "link": "https://stackoverflow.com/users/9961357/ty-sun"}, "reply_to_user": {"reputation": 664, "user_id": 5707440, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/54a4defbda5f9d7982bde84371a83c87?s=128&d=identicon&r=PG&f=1", "display_name": "Grillteller", "link": "https://stackoverflow.com/users/5707440/grillteller"}, "edited": false, "score": 0, "creation_date": 1533549925, "post_id": 50926036, "comment_id": 90371018, "body": "Still unfixed in 15.7.6"}, {"owner": {"reputation": 21, "user_id": 9961357, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-kfF7eUJdufs/AAAAAAAAAAI/AAAAAAAAAAA/L0xA_AKV4wE/photo.jpg?sz=128", "display_name": "TY Sun", "link": "https://stackoverflow.com/users/9961357/ty-sun"}, "reply_to_user": {"reputation": 664, "user_id": 5707440, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/54a4defbda5f9d7982bde84371a83c87?s=128&d=identicon&r=PG&f=1", "display_name": "Grillteller", "link": "https://stackoverflow.com/users/5707440/grillteller"}, "edited": false, "score": 2, "creation_date": 1534340606, "post_id": 50926036, "comment_id": 90671987, "body": "Finally it has been fixed in 15.8.0"}], "tags": [], "owner": {"reputation": 21, "user_id": 9961357, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-kfF7eUJdufs/AAAAAAAAAAI/AAAAAAAAAAA/L0xA_AKV4wE/photo.jpg?sz=128", "display_name": "TY Sun", "link": "https://stackoverflow.com/users/9961357/ty-sun"}, "is_accepted": false, "score": 2, "last_activity_date": 1529403684, "creation_date": 1529403684, "answer_id": 50926036, "question_id": 50261793, "link": "https://stackoverflow.com/questions/50261793/visual-studio-2017-freezes-when-i-move-mouse-over-mat-keyword-opencv-3-4-1/50926036#50926036", "title": "Visual Studio 2017 Freezes when I move mouse over Mat keyword (OpenCv 3.4.1)", "body": "<p>It is still unfixed until 15.7.4 which was published today.</p>\n"}, {"comments": [{"owner": {"reputation": 3656, "user_id": 1952626, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Alehv.png?s=128&g=1", "display_name": "kungfooman", "link": "https://stackoverflow.com/users/1952626/kungfooman"}, "edited": false, "score": 0, "creation_date": 1540960008, "post_id": 52050517, "comment_id": 93050430, "body": "Thanks alot, that fixed it, had same problem with GLFW/glfwCreateWindow."}], "tags": [], "owner": {"reputation": 11, "user_id": 4232460, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-gZUsbN7wE9w/AAAAAAAAAAI/AAAAAAAAAJ4/MVfPLdZtcO4/photo.jpg?sz=128", "display_name": "Nikhil Gupta", "link": "https://stackoverflow.com/users/4232460/nikhil-gupta"}, "is_accepted": false, "score": 1, "last_activity_date": 1535433179, "creation_date": 1535433179, "answer_id": 52050517, "question_id": 50261793, "link": "https://stackoverflow.com/questions/50261793/visual-studio-2017-freezes-when-i-move-mouse-over-mat-keyword-opencv-3-4-1/52050517#52050517", "title": "Visual Studio 2017 Freezes when I move mouse over Mat keyword (OpenCv 3.4.1)", "body": "<p>This error is caused due to a long comment about Mat.\nLook for <strong>mat.hpp</strong> files in your include directory of opencv (use search to find) >> go to Mat function definition >> remove the multiline comment before Mat definition. </p>\n\n<p>There are two mat.hpp files in the include directory. Follow the steps in both.</p>\n\n<p>Save the files. Restart Visual Studio and enjoy !!</p>\n"}], "owner": {"reputation": 153, "user_id": 5994320, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/49b8cb450a20dfe1cbceb4d91e0d167b?s=128&d=identicon&r=PG&f=1", "display_name": "adem sonmez", "link": "https://stackoverflow.com/users/5994320/adem-sonmez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1061, "favorite_count": 7, "answer_count": 4, "score": 8, "last_activity_date": 1535433179, "creation_date": 1525898851, "last_edit_date": 1525899551, "question_id": 50261793, "link": "https://stackoverflow.com/questions/50261793/visual-studio-2017-freezes-when-i-move-mouse-over-mat-keyword-opencv-3-4-1", "title": "Visual Studio 2017 Freezes when I move mouse over Mat keyword (OpenCv 3.4.1)", "body": "<p>I want to develop openCv project in Visual Studio 2017. I downloaded the opencv pre-build libraries and made necessary settings. That is:</p>\n\n<p>1) I added System Path <code>...build\\x64\\vc14\\bin</code></p>\n\n<p>2) In Visual Studio from project properties I added Additional Include Directories <code>...opencv\\build\\include</code> under C/C++ -> General Settings</p>\n\n<p>3) I added Additional Include Directories <code>...opencv\\build\\x64\\vc14\\lib</code> under Linker->General Settings</p>\n\n<p>4) I added Additional Dependecies <code>opencv_world341d.lib</code> under -> Linker->Input Settings</p>\n\n<p>I wrote the following code and it is compiled without an error</p>\n\n<pre><code> // opencv.cpp : Defines the entry point for the console application.\n\n#include \"stdafx.h\"\n#include &lt;opencv2/opencv.hpp&gt;\nusing namespace cv;\n\nint main() {\n    Mat img;\n    return 0;\n}\n</code></pre>\n\n<p>But the problem is when I move curser over Mat keyword after 2-3 seconds VS freezes and does not respond anyway. Do you have any idea why this happens?</p>\n"}, {"tags": ["c++", "include", "std"], "comments": [{"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 2, "creation_date": 1525899022, "post_id": 50261791, "comment_id": 87541763, "body": "The standard headers may (or may not)  include other standard headers.  This is one of the reasons to not do <code>using namespace std;</code>  fyi list of standard headers: <a href=\"http://en.cppreference.com/w/cpp/header\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/header</a>"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1525899025, "post_id": 50261791, "comment_id": 87541764, "body": "c++ allows for standard headers to include each other."}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 2, "creation_date": 1525899075, "post_id": 50261791, "comment_id": 87541792, "body": "1) &quot;<i>Is there an index anywhere of names from std:: so that I can avoid these names in future when I&#39;m writing my own functions</i>&quot; That is one reason to avoid <a href=\"https://stackoverflow.com/questions/1452721/why-is-using-namespace-std-considered-bad-practice\"><code>using namespace std</code></a>. 2) Headers are allowed to include other headers. What headers, which headers include are up to a specific implementation of a compiler, so you shouldn&#39;t count on it."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 2, "creation_date": 1525899107, "post_id": 50261791, "comment_id": 87541808, "body": "Even if you could find a list of all std identifiers, by using <code>using namespace std;</code> you expose yourself to the risk of new identifiers being added in <code>std</code> later on. Just don&#39;t use <code>using namespace std;</code>, this is <i>specifically</i> the problem namespaces solve."}, {"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 0, "creation_date": 1525903457, "post_id": 50261791, "comment_id": 87543429, "body": "Yes, there is an <a href=\"http://eel.is/c++draft/libraryindex\" rel=\"nofollow noreferrer\">Index of library names</a> in the standard. And it is HUGE."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "is_accepted": false, "score": 2, "last_activity_date": 1525899918, "last_edit_date": 1525899918, "creation_date": 1525899339, "answer_id": 50261912, "question_id": 50261791, "link": "https://stackoverflow.com/questions/50261791/c-std-and-include-how-they-fit-together/50261912#50261912", "title": "C++ std:: and include how they fit together?", "body": "<p>Step one, don't do this: <code>using namespace std;</code>. You are pulling <em>all</em> the names of the standard library (at least the ones seen by your direct and <em>transitive</em> includes) in and it just so happens that <code>std::hash</code> is a thing - which ends up clashing with your own <code>hash</code>.</p>\n\n<p>If you instead <em>don't</em> pull in all of std but either refer to std stuff explicitly with a <code>std::</code> prefix or just pull in the stuff you actually <em>want</em> (say <code>std::vector</code>) with something like <code>using std::vector;</code>, then you wouldn't have this problem.</p>\n\n<p>Namespaces exist to sepperate symbols with the same name into seperate domains/boxes. Using <code>using namespace foo;</code> defeats that.</p>\n\n<p>Specifically answering why <code>std::hash</code> is pulled in despite not directly including its header: some other header that you <em>do</em> include includes it or includes some other header which in turn includes it, etc - transitive includes.</p>\n"}, {"tags": [], "owner": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "is_accepted": false, "score": 2, "last_activity_date": 1525899658, "last_edit_date": 1525899658, "creation_date": 1525899496, "answer_id": 50261946, "question_id": 50261791, "link": "https://stackoverflow.com/questions/50261791/c-std-and-include-how-they-fit-together/50261946#50261946", "title": "C++ std:: and include how they fit together?", "body": "<blockquote>\n  <p>why the compiler throws this error because I did never include functional.h?</p>\n</blockquote>\n\n<pre><code>using namespace std;\n</code></pre>\n\n<p>Because you have this in the global namespace, you are <strong><a href=\"https://stackoverflow.com/questions/22903542/\">polluting the global namespace</a></strong>.</p>\n\n<p>It is not well-defined how many symbols you are bringing into the global namespace.  A header is allowed to include other headers, as well as define undocumented symbols.</p>\n\n<p>You are also adding your own symbols to the same namespace.  Any of your global symbols can collide with a symbol defined in namespace <code>std</code>.</p>\n\n<p><strong>Lesson:</strong>  Just don't do that and you won't have that problem.</p>\n"}, {"tags": [], "owner": {"reputation": 78, "user_id": 3606263, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4jRUh.gif?s=128&g=1", "display_name": "GaRaOne", "link": "https://stackoverflow.com/users/3606263/garaone"}, "is_accepted": true, "score": 3, "last_activity_date": 1525900271, "last_edit_date": 1525900271, "creation_date": 1525899881, "answer_id": 50262027, "question_id": 50261791, "link": "https://stackoverflow.com/questions/50261791/c-std-and-include-how-they-fit-together/50262027#50262027", "title": "C++ std:: and include how they fit together?", "body": "<p>The compiler try to get the right hash function. Your hash function is implemented under the global namespace, addressed with ::</p>\n\n<pre><code>::hash(1)\n</code></pre>\n\n<p>In normal cases the compiler would use this namespace, if you call it with</p>\n\n<pre><code>hash(1)\n</code></pre>\n\n<p>But you say to the compile \"hey dude, search every call also in std::\" with:</p>\n\n<pre><code>using namespace std;\n</code></pre>\n\n<p>so he cant decide between</p>\n\n<pre><code>::hash(1)\nand\nstd::hash(1)\n</code></pre>\n\n<hr>\n\n<p><strong>using</strong> in global scope is a problem in header files, because you import this directive to other files, which include your header file.</p>\n\n<p>In a cpp files, this is matter of taste. I prefer not to use it in cpp, also.</p>\n"}], "owner": {"reputation": 686, "user_id": 4772772, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/FuRDj.png?s=128&g=1", "display_name": "Module_art", "link": "https://stackoverflow.com/users/4772772/module-art"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 355, "favorite_count": 1, "accepted_answer_id": 50262027, "answer_count": 3, "score": -1, "last_activity_date": 1525900271, "creation_date": 1525898844, "question_id": 50261791, "link": "https://stackoverflow.com/questions/50261791/c-std-and-include-how-they-fit-together", "title": "C++ std:: and include how they fit together?", "body": "<p>I'm confused. I wrote a function called hash() and I'm using namespace std for \ncout,endl and laziness.</p>\n\n<p>Error reference to 'hash' is ambiguous </p>\n\n<p>I know now that a hash function exist in std::</p>\n\n<p>So my question is why the compiler throws this error because I did never include functional.h? </p>\n\n<p>Is there an index anywhere of names from std:: so that I can avoid these names in future when I'm writing my own functions, I can't find anything with google?</p>\n\n<p>I'm confused because of when \"everything\" is known in std:: why is needed to include the headers? I'm sure that I'm missing something</p>\n\n<p>Maybe my title is not the best but I don't know better.</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nconst int SIZE_TABLE = 10;\n\nint hash(int x)\n{\n    return x%SIZE_TABLE;\n}\n\nint main()\n{\n    cout&lt;&lt;\"hash 24 \"&lt;&lt;hash(24)&lt;&lt;endl;\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "matlab", "combinations", "combinatorics"], "comments": [{"owner": {"reputation": 1352, "user_id": 2198121, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/aa303bed01349a6f8f42a872322c7eb2?s=128&d=identicon&r=PG", "display_name": "NuPagadi", "link": "https://stackoverflow.com/users/2198121/nupagadi"}, "edited": false, "score": 3, "creation_date": 1525898335, "post_id": 50261603, "comment_id": 87541422, "body": "I think what you&#39;re planning to do with all these combinations strongly matters. Or you want just to generate them and store into file?"}, {"owner": {"reputation": 49, "user_id": 9542332, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "proczell", "link": "https://stackoverflow.com/users/9542332/proczell"}, "reply_to_user": {"reputation": 1352, "user_id": 2198121, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/aa303bed01349a6f8f42a872322c7eb2?s=128&d=identicon&r=PG", "display_name": "NuPagadi", "link": "https://stackoverflow.com/users/2198121/nupagadi"}, "edited": false, "score": 1, "creation_date": 1525898423, "post_id": 50261603, "comment_id": 87541472, "body": "The main purpose for this question is to store them in either a file or an array/matrix. I am using the combinations for some calculations later on, but I have all the code needed for this."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1525898563, "post_id": 50261603, "comment_id": 87541544, "body": "Why <code>0 0 0</code> is missing?"}, {"owner": {"reputation": 49, "user_id": 9542332, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "proczell", "link": "https://stackoverflow.com/users/9542332/proczell"}, "edited": false, "score": 0, "creation_date": 1525898654, "post_id": 50261603, "comment_id": 87541592, "body": "I don&#39;t want permutations or repetition, therefore no combination should have all numbers equal"}, {"owner": {"reputation": 9311, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 2, "creation_date": 1525898713, "post_id": 50261603, "comment_id": 87541621, "body": "<i>That</i> ^ should be stated in the question..."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 1, "creation_date": 1525898856, "post_id": 50261603, "comment_id": 87541673, "body": "So 2 numbers equal is ok but all of them not? What else we do not know?"}, {"owner": {"reputation": 15136, "user_id": 4044696, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/54xyv.jpg?s=128&g=1", "display_name": "Severin Pappadeux", "link": "https://stackoverflow.com/users/4044696/severin-pappadeux"}, "edited": false, "score": 0, "creation_date": 1525899923, "post_id": 50261603, "comment_id": 87542182, "body": "n=250, say n=256bits, which is 32bytes, with 6bits set for selection. 32bytes times 3*10^11 is roughly 10^13 bytes, 10 * 10^12, 10 Tb of data. Actually, you could easily just generate and store them all, and then deal with position in the file (or pointer if you prefer memory mapped files)"}, {"owner": {"reputation": 49, "user_id": 9542332, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "proczell", "link": "https://stackoverflow.com/users/9542332/proczell"}, "edited": false, "score": 0, "creation_date": 1525901191, "post_id": 50261603, "comment_id": 87542697, "body": "Where should I store them all? my current matlab solution stores 5 GB at each iteration (RAM limitation), and then re-calculate new 5 GB at next iteration. This works quite well, but I wonder if there are faster ways to do it."}, {"owner": {"reputation": 42647, "user_id": 7328782, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/treJu.png?s=128&g=1", "display_name": "Cris Luengo", "link": "https://stackoverflow.com/users/7328782/cris-luengo"}, "edited": false, "score": 0, "creation_date": 1525928963, "post_id": 50261603, "comment_id": 87549604, "body": "&quot;I am using the combinations for some calculations later on&quot; -&gt; This is relevant. You should ask for a way to generate these combinations on the fly, so your &quot;calculations later on&quot; can have access to these combinations without having to actually store them. It makes no sense to use petabytes of storage for this."}, {"owner": {"reputation": 49, "user_id": 9542332, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "proczell", "link": "https://stackoverflow.com/users/9542332/proczell"}, "edited": false, "score": 0, "creation_date": 1525937123, "post_id": 50261603, "comment_id": 87553080, "body": "This is exactly what I am trying to say in my other comments and original post."}], "answers": [{"comments": [{"owner": {"reputation": 49, "user_id": 9542332, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "proczell", "link": "https://stackoverflow.com/users/9542332/proczell"}, "edited": false, "score": 1, "creation_date": 1525901261, "post_id": 50262259, "comment_id": 87542728, "body": "I used Matlab for a quick solution, but I may have exceeded the maximum limit?   As I stated in my other comment, I use a method of chopping the problem up into smaller files (generate combinations for 5GB at each time). This is somewhat feasible for k = 5, but practically impossible for k=6 due to the fact that each 5GB takes about 70 mins (on a pretty crappy computer) to generate and write to file. Therefore, I was hoping that a C/C++ implementation existed that evaluated the combinations in a shorter time."}, {"owner": {"reputation": 1352, "user_id": 2198121, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/aa303bed01349a6f8f42a872322c7eb2?s=128&d=identicon&r=PG", "display_name": "NuPagadi", "link": "https://stackoverflow.com/users/2198121/nupagadi"}, "reply_to_user": {"reputation": 49, "user_id": 9542332, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "proczell", "link": "https://stackoverflow.com/users/9542332/proczell"}, "edited": false, "score": 0, "creation_date": 1525901395, "post_id": 50262259, "comment_id": 87542776, "body": "Check with documentation the maximum. 32 bits is not enough. 64 is ok."}, {"owner": {"reputation": 1352, "user_id": 2198121, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/aa303bed01349a6f8f42a872322c7eb2?s=128&d=identicon&r=PG", "display_name": "NuPagadi", "link": "https://stackoverflow.com/users/2198121/nupagadi"}, "reply_to_user": {"reputation": 49, "user_id": 9542332, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "proczell", "link": "https://stackoverflow.com/users/9542332/proczell"}, "edited": false, "score": 0, "creation_date": 1525901975, "post_id": 50262259, "comment_id": 87542957, "body": "@proczell <code>C++</code> is much better for this purpose. As I said use memory mapping for disk writing and may be threads. I&#39;ll update my answer with simple solution. You should change <code>ofstream</code> with memory mapped object. And I still encourage you to consider some other ways in couple with your actual goal. Or you really have so much memory?"}, {"owner": {"reputation": 49, "user_id": 9542332, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "proczell", "link": "https://stackoverflow.com/users/9542332/proczell"}, "edited": false, "score": 0, "creation_date": 1525902403, "post_id": 50262259, "comment_id": 87543102, "body": "Yes, this looks very much like something I can use. My next question is then if I want to chop it into several function calls. Could your code be altered to say start at combination:  2 13 54 110 214  and count the following 1e7 combinations?"}, {"owner": {"reputation": 1352, "user_id": 2198121, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/aa303bed01349a6f8f42a872322c7eb2?s=128&d=identicon&r=PG", "display_name": "NuPagadi", "link": "https://stackoverflow.com/users/2198121/nupagadi"}, "reply_to_user": {"reputation": 49, "user_id": 9542332, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "proczell", "link": "https://stackoverflow.com/users/9542332/proczell"}, "edited": false, "score": 0, "creation_date": 1525902795, "post_id": 50262259, "comment_id": 87543234, "body": "@proczell Sure. Move <code>for</code> loop into function, which takes start (<code>i</code>) and end (<code>CombinationsCount</code>) and a pointer where to write. There is no much sense in modifying my example. Anyway you should deal with memory mapping."}, {"owner": {"reputation": 49, "user_id": 9542332, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "proczell", "link": "https://stackoverflow.com/users/9542332/proczell"}, "edited": false, "score": 0, "creation_date": 1525902888, "post_id": 50262259, "comment_id": 87543270, "body": "I see. Thank you, I will give this a try and hopefully it works just as intended."}], "tags": [], "owner": {"reputation": 1352, "user_id": 2198121, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/aa303bed01349a6f8f42a872322c7eb2?s=128&d=identicon&r=PG", "display_name": "NuPagadi", "link": "https://stackoverflow.com/users/2198121/nupagadi"}, "is_accepted": true, "score": 3, "last_activity_date": 1525903683, "last_edit_date": 1525903683, "creation_date": 1525900957, "answer_id": 50262259, "question_id": 50261603, "link": "https://stackoverflow.com/questions/50261603/fast-algorithm-for-generating-all-combinations-n-choose-k-based-on-an-initial/50262259#50262259", "title": "Fast algorithm for generating all combinations (n choose k) based on an initial input", "body": "<p>I think the biggest problem you're going to encounter is not calculation but disk write speed or memory size. By the way, it seems you wrongly determined number of combinations for <code>n = 250</code> and <code>k = 6</code>. Did you use <code>uint64_t</code>? My number is <code>244 140 625 000 000</code>.</p>\n\n<p>So for this number you need <code>~1.4 Petabyte</code> (<code>~1400 Tb</code>) of memory. This is your main problem. If you have that much big hard drive, you'd better use <a href=\"https://www.boost.org/doc/libs/1_67_0/libs/iostreams/doc/classes/mapped_file.html\" rel=\"nofollow noreferrer\">memory mapping</a>, when write. You may consider using several threads to write: each will write its own chunk of memory. </p>\n\n<p>So, I think you should think of other ways for providing combinations for solving your actual goal.</p>\n\n<p>A naive solution. Change <code>std::ofstream</code> with memory mapped object.</p>\n\n<pre><code>int main()\n{\n    const constexpr uint8_t N = 250;\n    const constexpr uint8_t K = 6;\n    const constexpr uint64_t CombinationsCount = std::pow(N, K);\n    using TCombination = std::array&lt;uint8_t, K&gt;;\n\n    std::cout &lt;&lt; CombinationsCount &lt;&lt; std::endl;\n\n    std::ofstream file(\"output.txt\");\n    TCombination c;\n    for (uint64_t i = 0; i &lt; CombinationsCount; ++i)\n    {\n        auto I = i;\n        for (auto j = 0; j &lt; K; ++j)\n        {\n            c[j] = I % N;\n            I /= N;\n            file &lt;&lt; (int)c[j];\n        }\n        file &lt;&lt; std::endl;\n    }\n\n}\n</code></pre>\n\n<p>If you want to use threads, just divide <code>CombinationsCount</code> with cores number and give each thread a task to write from specific address of memory (offset).</p>\n\n<p>You asked for a function-like solution. You can pass different names of files and use different threads. Buy you still need to use memory mapping.</p>\n\n<pre><code>const constexpr uint8_t N = 250;\nconst constexpr uint8_t K = 6;\nconst constexpr uint64_t CombinationsCount = std::pow(N, K);\nusing TCombination = std::array&lt;uint8_t, K&gt;;\n\nvoid Generate(uint64_t start, uint64_t size, const char* fileName)\n{\n    std::ofstream file(fileName);\n    TCombination c;\n    for (uint64_t i = start; i &lt; start + size; ++i)\n    {\n        auto I = i;\n        for (auto j = 0; j &lt; K; ++j)\n        {\n            c[j] = I % N;\n            I /= N;\n            file &lt;&lt; (int)c[j];\n        }\n        file &lt;&lt; std::endl;\n    }\n}\n\nint main()\n{\n    std::cout &lt;&lt; CombinationsCount &lt;&lt; std::endl;\n\n    unsigned int threadsNum = std::thread::hardware_concurrency();\n\n    std::vector&lt;std::thread&gt; workers;\n    for (size_t i = 0; i &lt; threadsNum; ++i)\n        workers.emplace_back(\n            Generate, \n            i * CombinationsCount / threadsNum,\n            CombinationsCount / threadsNum,\n            (std::string(\"output\") + std::to_string(i)).c_str());\n\n    for (size_t i = 0; i &lt; threadsNum; ++i)\n        workers[i].join();\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 49, "user_id": 9542332, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "proczell", "link": "https://stackoverflow.com/users/9542332/proczell"}, "edited": false, "score": 0, "creation_date": 1525902531, "post_id": 50262502, "comment_id": 87543146, "body": "Of course this is not feasible for <i>too large</i> problems, but if I can increase the limit of <i>too large</i>, at least this method can be applied for more problems."}, {"owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "reply_to_user": {"reputation": 49, "user_id": 9542332, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "proczell", "link": "https://stackoverflow.com/users/9542332/proczell"}, "edited": false, "score": 0, "creation_date": 1525905549, "post_id": 50262502, "comment_id": 87544144, "body": "As you yourself observe, n and k will quickly make this infeasible. It&#39;s unlikely that you will get much traction from generating all those configurations."}], "tags": [], "owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "is_accepted": false, "score": 2, "last_activity_date": 1525902302, "creation_date": 1525902302, "answer_id": 50262502, "question_id": 50261603, "link": "https://stackoverflow.com/questions/50261603/fast-algorithm-for-generating-all-combinations-n-choose-k-based-on-an-initial/50262502#50262502", "title": "Fast algorithm for generating all combinations (n choose k) based on an initial input", "body": "<blockquote>\n  <p>I am working on an applied set-covering problem. In this research I want to generate all possible combinations.\n  ...\n  Does anyone know any algorithms that does this quickly in either C/C++/CUDA or Matlab?</p>\n</blockquote>\n\n<p>There is no such thing as generating all possible combinations \"quickly\". That's incredibly slow by definition as n and k increase: n!/((n-k)!k!) rises faster than (k/e)^n , asymptotically as a function of n; so making your combinations generation faster by a constant factor by using a GPU will only let you increase n and/or k by a tiny bit.</p>\n\n<p>Sorry for sounding preachy, but you probably need to do something other than trying to generate all combinations.</p>\n"}], "owner": {"reputation": 49, "user_id": 9542332, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "proczell", "link": "https://stackoverflow.com/users/9542332/proczell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1468, "favorite_count": 0, "closed_date": 1526560115, "accepted_answer_id": 50262259, "answer_count": 2, "score": 0, "last_activity_date": 1525923551, "creation_date": 1525898030, "last_edit_date": 1525923551, "question_id": 50261603, "link": "https://stackoverflow.com/questions/50261603/fast-algorithm-for-generating-all-combinations-n-choose-k-based-on-an-initial", "closed_reason": "Duplicate", "title": "Fast algorithm for generating all combinations (n choose k) based on an initial input", "body": "<p>I am working on an applied set-covering problem. In this research I want to generate all possible combinations. I.e. n = 5 and k = 3 yields</p>\n\n<pre><code>0 0 1\n0 0 2 \n0 0 3\netc..\n</code></pre>\n\n<p>This is no problem for smaller sized problems, but when n and k increases, say n = 250 and k = 6, the number of combinations are 3.1920e+11. All combinations can not be stored in one matrix, therefore I need an algorithm which can compute x combinations and then the x next combinations given the end point of the first matrix. Does anyone know any algorithms that does this quickly in either C/C++/CUDA or Matlab?</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["c++", "templates", "c++17", "friend"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1525897639, "post_id": 50261435, "comment_id": 87541076, "body": "related/dupe: <a href=\"https://stackoverflow.com/questions/991518/c-how-do-i-call-a-friend-template-function-defined-inside-a-class\" title=\"c how do i call a friend template function defined inside a class\">stackoverflow.com/questions/991518/&hellip;</a>"}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1525897972, "post_id": 50261435, "comment_id": 87541239, "body": "@NathanOliver It&#39;s unfortunate which answer is accepted there... Faisal&#39;s answer is great, but I&#39;d be more inclined to close that one as a dupe of this one."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1525898005, "post_id": 50261435, "comment_id": 87541253, "body": "@Barry Yes it is.  I commented a while back but the user never responded."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 1, "creation_date": 1525898094, "post_id": 50261435, "comment_id": 87541294, "body": "@Barry We could delete that one answer and then dupe close or ask a mod to merge."}], "answers": [{"comments": [{"owner": {"reputation": 3524, "user_id": 4950448, "user_type": "registered", "accept_rate": 88, "profile_image": "https://graph.facebook.com/907276442666522/picture?type=large", "display_name": "Antoine Morrier", "link": "https://stackoverflow.com/users/4950448/antoine-morrier"}, "edited": false, "score": 1, "creation_date": 1525898337, "post_id": 50261526, "comment_id": 87541423, "body": "I tried your solution, but it fails : here is the sample : <a href=\"https://wandbox.org/permlink/1u8lrhFZ7ECzd43y\" rel=\"nofollow noreferrer\">wandbox.org/permlink/1u8lrhFZ7ECzd43y</a>"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 3524, "user_id": 4950448, "user_type": "registered", "accept_rate": 88, "profile_image": "https://graph.facebook.com/907276442666522/picture?type=large", "display_name": "Antoine Morrier", "link": "https://stackoverflow.com/users/4950448/antoine-morrier"}, "edited": false, "score": 1, "creation_date": 1525898463, "post_id": 50261526, "comment_id": 87541493, "body": "@AntoineMorrier it does as long as you make the class version return void: <a href=\"https://wandbox.org/permlink/ZwOwa0ks034CKcju\" rel=\"nofollow noreferrer\">wandbox.org/permlink/ZwOwa0ks034CKcju</a>"}], "tags": [], "owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "is_accepted": true, "score": 8, "last_activity_date": 1525898570, "last_edit_date": 1525898570, "creation_date": 1525897721, "answer_id": 50261526, "question_id": 50261435, "link": "https://stackoverflow.com/questions/50261435/friend-template-namespace/50261526#50261526", "title": "friend, template, namespace", "body": "<p>Before C++20, you need to teach the compiler that <code>bar</code> is the name of a template so that it knows that <code>&lt;</code> starts a template argument list and is not the less-than operator:</p>\n\n<pre><code>template&lt;char&gt; void bar() = delete;\n\nint main() {\n    ns::Obj obj;\n    foo(obj); // Compile\n    bar&lt;int&gt;(obj); // Now compiles too\n    return 0;\n}\n</code></pre>\n\n<p>Note that all the <code>bar</code> overload has to do is to <em>be a function template</em>. The signature doesn't matter as long as it's not so good as to interfere with the overload resolution; <code>()</code> is a good choice because by definition we are passing at least one argument, so a function template taking no parameters can never be viable.</p>\n\n<p>Alternatively, you can redesign <code>bar</code> to deduce <code>T</code> from a tag argument:</p>\n\n<pre><code>template&lt;class T&gt;\nstruct type {};\n\nnamespace ns{\nstruct Obj {    \n    // ...\n\n    template&lt;typename T&gt;\n    friend void bar(Obj, type&lt;T&gt;) { /* ... */ }\n};\n}\n// ...\n\nbar(obj, type&lt;int&gt;()); // OK\n</code></pre>\n\n<hr>\n\n<p>In C++20, the compiler will assume that <code>bar</code> names a template when it sees the <code>&lt;</code> and name lookup finds nothing, so your code will <em>just work</em>.</p>\n"}, {"tags": [], "owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "is_accepted": false, "score": 4, "last_activity_date": 1525899240, "last_edit_date": 1525899240, "creation_date": 1525898479, "answer_id": 50261695, "question_id": 50261435, "link": "https://stackoverflow.com/questions/50261435/friend-template-namespace/50261695#50261695", "title": "friend, template, namespace", "body": "<p>The straightforward approach would be to add a forward declaration and let the function be located using qualified lookup:</p>\n\n<pre><code>namespace ns{\nstruct Obj;\n\nvoid foo(Obj);\n\ntemplate&lt;typename T&gt;\nvoid bar(Obj);\n\nstruct Obj {\n    friend void foo(Obj){std::cout &lt;&lt; \"no problem\" &lt;&lt; std::endl;}\n\n    template&lt;typename T&gt;\n    friend void bar(Obj){std::cout &lt;&lt; \"problem \" &lt;&lt; std::endl;}\n};\n} // namespace ns\n\nint main() {\n    ns::Obj obj;\n    ns::foo(obj); // Ok\n    ns::bar&lt;int&gt;(obj); // Ok\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 3524, "user_id": 4950448, "user_type": "registered", "accept_rate": 88, "profile_image": "https://graph.facebook.com/907276442666522/picture?type=large", "display_name": "Antoine Morrier", "link": "https://stackoverflow.com/users/4950448/antoine-morrier"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 99, "favorite_count": 0, "accepted_answer_id": 50261526, "answer_count": 2, "score": 4, "last_activity_date": 1525899240, "creation_date": 1525897332, "question_id": 50261435, "link": "https://stackoverflow.com/questions/50261435/friend-template-namespace", "title": "friend, template, namespace", "body": "<p>I want to have a templated friend function. However, I do not know how to make it works in the same way for no templated function.\nHere is a sample code</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nnamespace ns{\nstruct Obj {\n    friend void foo(Obj){std::cout &lt;&lt; \"no problem\" &lt;&lt; std::endl;}\n\n    template&lt;typename T&gt;\n    friend void bar(Obj){std::cout &lt;&lt; \"problem\" &lt;&lt; std::endl;}\n};\n}\n\nint main() {\n    ns::Obj obj;\n    foo(obj); // Compile\n    bar&lt;int&gt;(obj); // Not compile\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "windows", "serial-port", "libusb"], "comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 2, "creation_date": 1525896092, "post_id": 50261134, "comment_id": 87540409, "body": "Are you sure the device actually <i>has a serial number</i>? You&#39;d be surprised to know how many crap devices either put in garbage or nothing at all into required fields. Just because the spec says that something is required/mandatory does <i>not</i> mean that device manufacturers actually give a damn and adhere to it. And there are <i>many</i> crap devices out there."}, {"owner": {"reputation": 31, "user_id": 9767143, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85a3f34505e12abb88b8ac8a6ce5fcfe?s=128&d=identicon&r=PG&f=1", "display_name": "RGarland", "link": "https://stackoverflow.com/users/9767143/rgarland"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1525896588, "post_id": 50261134, "comment_id": 87540640, "body": "There&#39;s a serial number on the back of the device I&#39;m testing with but I&#39;m not sure there is one written into the device electronically. However, I have another device I am sure has a serial number and I get similar behavior. I&#39;m currently reading that iSerialNumber is the index of the serial number and that I&#39;m supposed to get the number I need from there. Not sure how to do this at the moment, but I&#39;m going down this rabbit hole while I await responses."}, {"owner": {"reputation": 3278, "user_id": 709646, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/14ffa3e0a86607175971ead35d1b717f?s=128&d=identicon&r=PG", "display_name": "FooF", "link": "https://stackoverflow.com/users/709646/foof"}, "edited": false, "score": 0, "creation_date": 1582007413, "post_id": 50261134, "comment_id": 106617279, "body": "You can use <code>lsusb</code> to see if it reports the serial number. I am not sure if this tool is available on Windows, but you can borrow someone&#39;s MacOS or Linux computer or use virtualized Linux and making sure the virtualization software USB mapping makes the USB device visible to the guest OS."}], "owner": {"reputation": 31, "user_id": 9767143, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85a3f34505e12abb88b8ac8a6ce5fcfe?s=128&d=identicon&r=PG&f=1", "display_name": "RGarland", "link": "https://stackoverflow.com/users/9767143/rgarland"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 691, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1525896929, "creation_date": 1525895917, "last_edit_date": 1525896929, "question_id": 50261134, "link": "https://stackoverflow.com/questions/50261134/c-libusb-isnt-bringing-back-serial-number-of-device", "title": "C++ Libusb isn&#39;t bringing back serial number of device", "body": "<p>I'm currently working on a project that involves bringing information back from devices plugged in via true usb. To solve this, I'm attempting to use libusb in my C++ project. I'm on Windows 10, using C++ and QT Creator with QT version 5.2.1. I can get the vendor ID and product ID of my device with .idVendor and idProduct. However, my serial number is returning as 0 with .iSerialNumber. I'll post my code below and hopefully someone can help me figure out what I'm missing or suggest another library for me to try. Thanks!</p>\n\n<pre><code>bool CPumpFinder::pollTrueUSB(boolean &amp;deviceFound, Device &amp;newDevice)\n{\n\nboolean usbFound = FALSE;\nboolean accuCheckFound = FALSE;\nAccuGuideCom *acc = new AccuGuideCom();\n\nlibusb_device **devs; //pointer to pointer of device, used to retrieve a list of devices\nlibusb_context *ctx = NULL; //a libusb session\nint r; //for return values\nssize_t cnt; //holding number of devices in list\nr = libusb_init(&amp;ctx); //initialize a library session\n\nif(r &lt; 0) {\n    return 1;\n}\n\nlibusb_set_debug(ctx, 3); //set verbosity level to 3, as suggested in the documentation\ncnt = libusb_get_device_list(ctx, &amp;devs); //get the list of devices\n\nif(cnt &lt; 0) {\n\n}\n\nssize_t i; //for iterating through the list\nfor(i = 0; i &lt; cnt; i++) {\n      printdev(devs[i], usbFound, accuCheckFound); //print specs of this device\n      if(usbFound == TRUE)\n      {\n          if(accuCheckFound == TRUE)\n          {\n              newDevice.displayName = \"ACCU-CHEK GUIDE\";\n              newDevice.type = DEVICE_ACCUCHECKGUIDE;\n              newDevice.vendorID = accuVID;\n              newDevice.productID = accuPID;\n              newDevice.serial = accuSerial;\n\n          }\n          deviceFound = TRUE;\n          break;\n      }\n}\nlibusb_free_device_list(devs, 1); //free the list, unref the devices in it\nlibusb_exit(ctx); //close the session\n\nreturn deviceFound;\n\n}\n\nboolean CPumpFinder::printdev(libusb_device *dev, boolean &amp;usbFound, boolean \n&amp;accuChekFound) {\n\nlibusb_device_descriptor desc;\nint r = libusb_get_device_descriptor(dev, &amp;desc);\n\nif (r &lt; 0) {\n    return usbFound;\n}\n\nuint16 vID = (uint16)desc.idVendor;\nuint16 pID = (uint16)desc.idProduct; //desc.iSerialNumber\n\n//#define ACCUCHEK_GUIDE_VENDORID                (uint16)0x173A\n//#define ACCUCHEK_GUIDE_PRODUCTID               (uint16)0x21D5\n\nif((vID == 5946) &amp; (pID == 8661))\n{\n    accuPID = pID;\n    accuVID = vID;\n\n    //Do serial?\n    accuSerial = \"Test\";\n\n    write_text_to_log_file(\"we did it\");\n    accuChekFound = TRUE;\n\n    usbFound = TRUE;\n}\n\nif(usbFound == TRUE)\n{\n    libusb_config_descriptor *config;\n    libusb_get_config_descriptor(dev, 0, &amp;config);\n    const libusb_interface *inter;\n    const libusb_interface_descriptor *interdesc;\n    const libusb_endpoint_descriptor *epdesc;\n    for(int i=0; i&lt;(int)config-&gt;bNumInterfaces; i++) {\n        inter = &amp;config-&gt;interface[i];\n        for(int j=0; j&lt;inter-&gt;num_altsetting; j++) {\n            interdesc = &amp;inter-&gt;altsetting[j];\n            for(int k=0; k&lt;(int)interdesc-&gt;bNumEndpoints; k++) {\n                epdesc = &amp;interdesc-&gt;endpoint[k];\n\n                }\n            }\n        }\n\n        libusb_free_config_descriptor(config);\n        if(accuChekFound == TRUE)\n        {\n\n            return accuChekFound;\n        }\n        return usbFound;\n    }\n    return usbFound;\n\n}\n</code></pre>\n"}, {"tags": ["c++", "arrays", "function"], "comments": [{"owner": {"reputation": 5896, "user_id": 1106415, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6fvK.png?s=128&g=1", "display_name": "hlt", "link": "https://stackoverflow.com/users/1106415/hlt"}, "edited": false, "score": 5, "creation_date": 1525896274, "post_id": 50261132, "comment_id": 87540497, "body": "It&#39;s tough to work through a chunk of code that big - please try to create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>..."}], "answers": [{"tags": [], "owner": {"reputation": 846, "user_id": 9572393, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/z7AXs.png?s=128&g=1", "display_name": "GKE", "link": "https://stackoverflow.com/users/9572393/gke"}, "is_accepted": false, "score": 0, "last_activity_date": 1525913167, "creation_date": 1525913167, "answer_id": 50263951, "question_id": 50261132, "link": "https://stackoverflow.com/questions/50261132/arrays-lose-value-upon-return-inventory-menu-program-c/50263951#50263951", "title": "Arrays Lose Value Upon Return (Inventory/Menu Program) C++", "body": "<p>In the<code>addInv()</code> all the arrays are local. Once that function is done executing, all local variables are freed up thus resulting in your deletion. Try place them outside your <code>addInv()</code> function:</p>\n\n<pre><code>    int main(){\n        int quantity[10] = {10, 15, 45};\n        string itemArray[counter] = { \"...\"};\n        string descriptionArray[description] = { \"...\"};\n\n    void addInv() {...}\n    }\n</code></pre>\n"}], "owner": {"reputation": 47, "user_id": 9588325, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b247a51fe390e8da6e497f1a3b4e1a99?s=128&d=identicon&r=PG&f=1", "display_name": "VivMike", "link": "https://stackoverflow.com/users/9588325/vivmike"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 89, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1525913167, "creation_date": 1525895910, "last_edit_date": 1525896643, "question_id": 50261132, "link": "https://stackoverflow.com/questions/50261132/arrays-lose-value-upon-return-inventory-menu-program-c", "title": "Arrays Lose Value Upon Return (Inventory/Menu Program) C++", "body": "<p>So for the most part I understand what I did wrong, the issue is I don't know how to fix it. </p>\n\n<p>Goal: This is a store management system that must include a menu and inventory management functions that can be manipulated. To do this I used arrays to add the store's items, their descriptions, and their quantities. All the arrays are partially filled to the third element and have a max value of ten elements. </p>\n\n<p>Issue: When the program is run the first time it works and the user can see their inventory, description and quantity. However when they exit to the menu and come BACK to inventory, everything past the third element is cleared. This is due to the declarations initializing the arrays past the third element to 0. How do I fix this to guarantee the user has their inventory saved and can view it upon return?</p>\n\n<pre><code>#include &lt;iostream&gt;       \n#include &lt;vector&gt;\n#include &lt;fstream&gt;\n#include &lt;string&gt;\n#include &lt;cmath&gt;\n#include &lt;cstdlib&gt;\n\n\nusing namespace std;\n\n//declarations\nint mainMenu(); //done\nvoid inventoryMgmt();\nvoid addInv(); //working on\nvoid invView(string x[], int sizeofArray, string y[], int secondArray, int z[], int thirdArray);\nvoid editor(string x[], int sizeofArray, string y[], int secondArray, int z[], int thirdArray);\nvoid customerReciept();  //done\nvoid calculatePrice(); //done\nvoid exit(); //done\n\nconst double massTax = 0.0625;\n\n//main\nint main() {\n    int choice;\n    bool repeat = true;\n\n    while (repeat = true) {\n        choice = mainMenu();\n\n        switch (choice) {\n        case 1:\n            customerReciept();\n            break;\n        case 2:\n            inventoryMgmt();\n            break;\n            //case 3:\n            //itemSearcher();\n            //break;\n        case 4:\n            exit();\n            repeat = false;\n            break;\n        }\n    }\n\n    return 0;\n}\n\n//main menu function ***done\nint mainMenu() {\n    cout &lt;&lt; \"\\n\\n\\t\\t\\t\\t Welcome to the Massasoit Store Management System \" &lt;&lt; endl;\n    cout &lt;&lt; \"\\t\\t\\t\\t ________________________________________________ \\n\\n\";\n    cout &lt;&lt; \"\\t\\t\\t\\t\\t Main Menu: \" &lt;&lt; endl;\n    cout &lt;&lt; \"\\t\\t\\t\\t\\t\\t 1. Customer Reciept\" &lt;&lt; endl;\n    cout &lt;&lt; \"\\t\\t\\t\\t\\t\\t 2. Inventory Management\" &lt;&lt; endl;\n    cout &lt;&lt; \"\\t\\t\\t\\t\\t\\t 3. Item Search\" &lt;&lt; endl;\n    cout &lt;&lt; \"\\t\\t\\t\\t\\t\\t 4. Exit\" &lt;&lt; endl &lt;&lt; endl;\n    int choice;\n    cout &lt;&lt; \"\\t\\t\\t\\t\\t\\t Where do you need to go?: \";\n    cin &gt;&gt; choice;\n\n    while (choice &lt; 1 || choice &gt; 4) {\n        cout &lt;&lt; \"\\t\\t\\t\\t\\t Incorrect Selection Please Select Again: \";\n        cin &gt;&gt; choice;\n    }\n    return choice;\n}\n\n//customer reciept function  **done\nvoid customerReciept() {\n    cout &lt;&lt; \"\\n\\n\\t\\t\\t\\t Welcome to the Massasoit Store: Customer Reciept \" &lt;&lt; endl;\n    cout &lt;&lt; \"\\t\\t\\t\\t ________________________________________________ \\n\\n\";\n    cout &lt;&lt; \"\\t\\t\\t\\t\\t Receipt Menu: \" &lt;&lt; endl;\n    cout &lt;&lt; \"\\t\\t\\t\\t\\t\\t 1. Calculate Receipt\" &lt;&lt; endl;\n    cout &lt;&lt; \"\\t\\t\\t\\t\\t\\t 2. Return to Main\" &lt;&lt; endl;\n    int recieptChoice;\n    cout &lt;&lt; \"\\t\\t\\t\\t\\t\\t Where do you need to go?: \";\n    cin &gt;&gt; recieptChoice;\n    while (recieptChoice &lt; 1 || recieptChoice &gt; 2) {\n        cout &lt;&lt; \"Invalid Selection Please Choose Again: \";\n        cin &gt;&gt; recieptChoice;\n    }\n    if (recieptChoice == 1) {\n        calculatePrice();\n    }\n}\n\nvoid calculatePrice() {\n    double cost;\n    double taxAmount;\n    int numOfItems;\n    double finalCost = 0;\n    char tax;\n    int i;\n    cout &lt;&lt; \"\\n\\n\\t\\t\\t\\t Welcome to the Massasoit Store: Customer Reciept \" &lt;&lt; endl;\n    cout &lt;&lt; \"\\t\\t\\t\\t ________________________________________________ \\n\\n\";\n    cout &lt;&lt; \"How many items were purchased?: \";\n    cin &gt;&gt; numOfItems;\n    for (i = 0; i &lt; numOfItems; i++) {\n        cout &lt;&lt; \"What did item \" &lt;&lt; i + 1 &lt;&lt; \" cost? $\";\n        cin &gt;&gt; cost;\n        cout &lt;&lt; \"Is this item taxable? (y/n):\";\n        cin &gt;&gt; tax;\n        if (tax == 'y' || tax == 'Y') {\n\n            taxAmount = (cost * massTax);\n            cost = taxAmount + cost;\n            finalCost = cost + finalCost;\n        }\n        else {\n            finalCost = cost + finalCost;\n        }\n    }\n    cout.setf(ios::fixed);\n    cout.setf(ios::showpoint);\n    cout.precision(2);\n    cout &lt;&lt; \"This customer's total is $\" &lt;&lt; finalCost &lt;&lt; endl;\n}\n\nvoid inventoryMgmt() {\n\n    int invChoice;\n    cout &lt;&lt; \"\\n\\n\\t\\t\\t\\t\\t Welcome to Inventory Management \" &lt;&lt; endl;\n    cout &lt;&lt; \"\\t\\t\\t\\t ______________________________________________ \\n\\n\";\n    cout &lt;&lt; \"\\t\\t\\t\\t\\t Inventory Settings: \" &lt;&lt; endl;\n    cout &lt;&lt; \"\\t\\t\\t\\t\\t\\t 1. Add/View &amp; Edit/Delete Inventory\" &lt;&lt; endl;\n    cout &lt;&lt; \"\\t\\t\\t\\t\\t\\t 2. Return to Main\" &lt;&lt; endl;\n    cout &lt;&lt; \"\\t\\t\\t\\t\\t\\t Where do you need to go?: \";\n    cin &gt;&gt; invChoice;\n    cout &lt;&lt; endl &lt;&lt; endl;\n    while (invChoice &lt; 1 || invChoice &gt; 2) {\n        cout &lt;&lt; \"Invalid Selection Please Choose Again: \";\n        cin &gt;&gt; invChoice;\n    }\n    if (invChoice == 1) {\n\n        addInv();\n    }\n    if (invChoice == 2) {\n        //edit/delete();\n    }\n}\n\nvoid addInv() {\n    //so when this is called, everything is initialized to 0 which makes it wipe the memory\n    //when the user comes back to it from the menu.\n\n    const int description = 20; //this allows a short description for each item\n    const int counter = 10; //slots of inventory allowed\n    int quantity[10] = {10, 15, 45};\n    string itemArray[counter] = { \"Hot Drinks\", \"Cold Drinks\", \"Books\"};\n    string descriptionArray[description] = { \"Coffee, Tea etc\", \"Water, juice, etc\", \"Texts, notebook, etc\"};\n    char addChoice;\n    int destination;\n    cout &lt;&lt; \"\\t\\t\\t\\t\\t\\t 1. Add/View\" &lt;&lt; endl;\n    cout &lt;&lt; \"\\t\\t\\t\\t\\t\\t 2. Edit/Delete\" &lt;&lt; endl;\n    cout &lt;&lt; \"\\t\\t\\t\\t\\t\\t 3. Exit to Main\" &lt;&lt; endl;\n    cout &lt;&lt; \"\\t\\t\\t\\t\\t\\t Where would you like to go?: \" &lt;&lt; endl;\n    cin &gt;&gt; destination;\n\n    while (destination &lt; 1 || destination &gt; 3) {\n        cout &lt;&lt; \"Invalid Selection, Please Select Again: \";\n        cin &gt;&gt; destination;\n    }\n\n    if (destination == 1) {\n        cout &lt;&lt; \"Would you like to add an item? (y/n): \";\n        cin &gt;&gt; addChoice;\n        int i = 3;      //these two are initialized to three to ensure that the store \n        int ii = 3;     //will always have hot drinks, cold drinks and books as options \n        while (addChoice == 'y' &amp;&amp; i &lt; counter) {\n\n            cout &lt;&lt; \"What would you like to add?: \";\n            cin &gt;&gt; itemArray[i];\n            cout &lt;&lt; \"You have added \\\"\" &lt;&lt; itemArray[i] &lt;&lt; \"\\\" to the inventory\\n\";\n            cout &lt;&lt; \"Please Provide a Brief Description: \";\n            cin.ignore();\n            getline(cin, descriptionArray[ii]);\n            cout &lt;&lt; \"You've described \\\"\" &lt;&lt; itemArray[i] &lt;&lt; \"\\\" as  \\\"\" &lt;&lt; descriptionArray[i] &lt;&lt; \"\\\"\" &lt;&lt; endl;\n            cout &lt;&lt; \"What is the quantity of \" &lt;&lt; itemArray[i] &lt;&lt; \" in stock?\";\n            cin &gt;&gt; quantity[i];\n            cout &lt;&lt; \"Would you like to add another item?\";\n            cin &gt;&gt; addChoice;\n            i++;\n            ii++;\n            if (i &gt; counter) {\n                cout &lt;&lt; \"**INVENTORY LIMIT REACHED*** \";\n            }\n        }\n        invView(itemArray, 10, descriptionArray, 10, quantity, 10); //working on this. //so use this for view, edit, and delete.\n    }\n}\n\nvoid invView(string x[], int sizeofArray, string y[], int secondArray, int z[], int thirdArray) {   //add quantity\n\n    int i = 0;\n    int ii = 0;\n    int iii = 0;\n    cout &lt;&lt; \"Your inventory consists of: \";\n    while (i &lt; sizeofArray &amp;&amp; x[i] != \"\" &amp;&amp; ii &lt; secondArray &amp;&amp; y[i] != \"\" &amp;&amp; iii &lt; thirdArray) {\n        cout &lt;&lt; x[i] &lt;&lt; \" - \" &lt;&lt; y[i] &lt;&lt; \" | Quantity: \" &lt;&lt; z[i] &lt;&lt; endl;\n        i++;\n        ii++;\n    }\n}\n\nvoid editor(string x[], int sizeofArray, string y[], int secondArray, int z[], int thirdArray) {\n    cout &lt;&lt; \"Which item would you like to edit?\";\n}\n\nvoid exit() {\n    cout &lt;&lt; \"\\n\\n\\t\\t\\t\\t Welcome to the Massasoit Store Management System \" &lt;&lt; endl;\n    cout &lt;&lt; \"\\t\\t\\t\\t ________________________________________________ \\n\\n\";\n    cout &lt;&lt; \"\\t\\t\\t\\t Thank you for using the Massasoit Store Management System\" &lt;&lt; endl;\n    exit(1);\n}\n</code></pre>\n\n<p>I included the entire code in case it was needed. The issues are centered around the inventoryMgmt() and addInv() functions.\nThanks in advance for any help! </p>\n"}, {"tags": ["c++", "c++11", "initializer-list", "type-narrowing"], "comments": [{"owner": {"reputation": 8027, "user_id": 3282436, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e17caa3e07899b69539433130de1d420?s=128&d=identicon&r=PG&f=1", "display_name": "0x5453", "link": "https://stackoverflow.com/users/3282436/0x5453"}, "edited": false, "score": 2, "creation_date": 1525895318, "post_id": 50260850, "comment_id": 87540028, "body": "Regarding #4, see <a href=\"http://en.cppreference.com/w/c/language/struct_initialization#Nested_initialization\" rel=\"nofollow noreferrer\">here</a>.  Because you omit the braces during initialization of the nested union, it will always initialize the first member.  Since <code>t1.integer</code> is not initialized, reading from it is UB."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1525897180, "post_id": 50260850, "comment_id": 87540870, "body": "&quot;narrow conversion between (double) and (uint64_t), but both have same size&quot; - they may have the same size in number of bits, but that does <i>not</i> mean that they can both accurately represent the same numbers."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1525898313, "post_id": 50260850, "comment_id": 87541413, "body": "&quot;typedef struct ...&quot; Is a C-ism. Pointless crud in C++."}, {"owner": {"user_type": "does_not_exist", "display_name": "user9742369"}, "edited": false, "score": 0, "creation_date": 1525898911, "post_id": 50260850, "comment_id": 87541711, "body": "src\\prova.cpp:95:6: internal compiler error: in reshape_init_class, at cp/decl.c:5462 :   t1 = { 1 ,&quot;a&quot;,{ .integer=2 } } ; g++ 5.1 and g++ 5.3 Win"}], "owner": {"user_type": "does_not_exist", "display_name": "user9742369"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 81, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1525895923, "creation_date": 1525894589, "last_edit_date": 1525895923, "question_id": 50260850, "link": "https://stackoverflow.com/questions/50260850/anonymous-union-in-initializer-list-do-not-handle-the-types-correctly", "title": "anonymous union in initializer list, do not handle the types correctly", "body": "<p>anonymous union in initializer list : do not handle the types correctly</p>\n\n<p>this code works weirdly, I'll explain :\nnothing to say regards points 1 and 2, works perfeclty</p>\n\n<p>however the behavior referred to points 3 and 4 changes :</p>\n\n<p>1) first if i define :</p>\n\n<pre><code>    union {\n        uint64_t    integer ;   \n        double      real;   \n    } ;\n</code></pre>\n\n<p>compiler shows  me error about <strong>narrow conversion</strong> between (double) and (uint64_t), but both have same size, as you can in in assert instruction.</p>\n\n<pre><code>C:\\prj\\cd&gt;g++ -std=c++11 src\\prova.cpp -o bin\\main.exe\nsrc\\prova.cpp: In function 'int main()':\nsrc\\prova.cpp:35:6: error: narrowing conversion of '3.3999999999999999e+0' from 'double' to 'uint64_t {aka long long unsigned int}' inside { } [-Wnarrowing]\n   t1 = { 1 ,\"a\",3.4 } ;\n  ^\n</code></pre>\n\n<p>2) second if i change order types, compiler do not emits error but after execution show me undefined result at point #4</p>\n\n<pre><code>    union {\n        double      real;               \n        uint64_t    integer ;   \n    } ;\n</code></pre>\n\n<p>console output : </p>\n\n<pre><code>C:\\prj\\cd&gt;bin\\main.exe\n6.6\n3\n3.4\n4611686018427387904\n</code></pre>\n\n<p>We know about g++ 5.3 bugs referring <strong>initializer list</strong> in c++14, as you can found in bugzilla :      </p>\n\n<pre><code>t1 = { 1 ,\"a\",{ .real=3.4} } ;  \n</code></pre>\n\n<p>Does is this another bugs or an weirdly undefined behavior ?</p>\n\n<p>here others link about narrowing conversion :</p>\n\n<p><a href=\"https://stackoverflow.com/questions/44031644/narrowing-conversion-required-while-list-initialization\">Narrowing Conversion required while list initialization</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/4434140/narrowing-conversions-in-c0x-is-it-just-me-or-does-this-sound-like-a-breakin\">Narrowing conversions in C++0x. Is it just me, or does this sound like a breaking change?\n</a></p>\n\n<p>source code :</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdint.h&gt;\n#include &lt;assert.h&gt;\n\ntypedef struct  token_s\n{\n    uint8_t         sym ;   \n    std::string     tok ;\n    union {\n        double      real;\n        uint64_t    integer ;               \n    } ;\n\n} token_t ;\n\nint main ( void )\n{\n    assert ( sizeof(uint64_t)==sizeof(double) ) ;\n\n    token_t t1 ;\n\n    //#1\n    t1.real = 6.6 ; // ok\n    std::cout &lt;&lt; t1.real &lt;&lt; \"\\n\" ;\n\n    //#2\n    t1.integer = 3 ; \n    std::cout &lt;&lt; t1.integer &lt;&lt; \"\\n\" ;\n\n    //#3\n    t1 = { 1 ,\"a\",3.4 } ;   \n    std::cout &lt;&lt; t1.real &lt;&lt; \"\\n\" ;\n\n    //#4\n    t1 = { 1 ,\"a\",2 } ;\n    std::cout &lt;&lt; t1.integer &lt;&lt; \"\\n\" ;   \n\n    return 0 ;\n}\n</code></pre>\n"}, {"tags": ["c++", "opengl", "sdl", "photoshop", "alpha-transparency"], "comments": [{"owner": {"reputation": 1533, "user_id": 7361580, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/yu1so.png?s=128&g=1", "display_name": "synchronizer", "link": "https://stackoverflow.com/users/7361580/synchronizer"}, "edited": false, "score": 0, "creation_date": 1525894708, "post_id": 50260764, "comment_id": 87539757, "body": "I already see the votes to close, but may I at least receive feedback on what information to provide / where to ask the question? I haven&#39;t been able to solve the problem for a very long time."}, {"owner": {"reputation": 1533, "user_id": 7361580, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/yu1so.png?s=128&g=1", "display_name": "synchronizer", "link": "https://stackoverflow.com/users/7361580/synchronizer"}, "reply_to_user": {"reputation": 138010, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "edited": false, "score": 0, "creation_date": 1525895738, "post_id": 50260764, "comment_id": 87540233, "body": "top-left: red, top-right: green, bottom-left: blue, bottom-right: yellow"}, {"owner": {"reputation": 1533, "user_id": 7361580, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/yu1so.png?s=128&g=1", "display_name": "synchronizer", "link": "https://stackoverflow.com/users/7361580/synchronizer"}, "reply_to_user": {"reputation": 138010, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "edited": false, "score": 0, "creation_date": 1525896313, "post_id": 50260764, "comment_id": 87540520, "body": "right. Would it help if I tried creating a similar example in photoshop and printed out the data array? Also, I am using RGBA instead of RGBA8. It&#39;s not really clear what I should be setting in Photoshop. hmmm"}, {"owner": {"reputation": 1533, "user_id": 7361580, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/yu1so.png?s=128&g=1", "display_name": "synchronizer", "link": "https://stackoverflow.com/users/7361580/synchronizer"}, "reply_to_user": {"reputation": 138010, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "edited": false, "score": 0, "creation_date": 1525905320, "post_id": 50260764, "comment_id": 87544069, "body": "@Rabbid76 I made a few discoveries. Please see my edit."}], "answers": [{"comments": [{"owner": {"reputation": 1533, "user_id": 7361580, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/yu1so.png?s=128&g=1", "display_name": "synchronizer", "link": "https://stackoverflow.com/users/7361580/synchronizer"}, "edited": false, "score": 0, "creation_date": 1525960832, "post_id": 50267840, "comment_id": 87566019, "body": "That was correct. I also needed to render layers of quads from back to front, but I knew that would probably be necessary. Thank you for your help. Now I have to figure why I&#39;m experiencing issues with lag--but that&#39;s a different problem."}], "tags": [], "owner": {"reputation": 138010, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "is_accepted": true, "score": 2, "last_activity_date": 1525937503, "creation_date": 1525937503, "answer_id": 50267840, "question_id": 50260764, "link": "https://stackoverflow.com/questions/50260764/opengl-transparent-pixels-unexpectedly-white/50267840#50267840", "title": "openGL Transparent pixels unexpectedly White", "body": "<blockquote>\n  <p>I don't know how to explain some of these behaviors, but something seems off. 0 alpha should be the same regardless of color, shouldn't it?</p>\n</blockquote>\n\n<p>If you want to get an identical result for an alpha channel of 0.0, independent on the red, green and blue channels, the you have to change the blend function. See <a href=\"https://www.khronos.org/registry/OpenGL-Refpages/gl4/html/glBlendFunc.xhtml\" rel=\"nofollow noreferrer\"><code>glBlendFunc</code></a>.</p>\n\n<p>Use:</p>\n\n<pre><code>glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);\n</code></pre>\n\n<p>This cause tha the the red, green and blue channel are multiplied by the alpha channel.\nIf the alpha channel is 0.0, the resulting RGB color is (0, 0, 0). \nIf the alpha channel is 1.0, the RGB color channels keep unchanged.</p>\n\n<p><br/>\nSee further <a href=\"http://apoorvaj.io/alpha-compositing-opengl-blending-and-premultiplied-alpha.html#toc5\" rel=\"nofollow noreferrer\">Alpha Compositing, OpenGL Blending and Premultiplied Alpha</a></p>\n"}], "owner": {"reputation": 1533, "user_id": 7361580, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/yu1so.png?s=128&g=1", "display_name": "synchronizer", "link": "https://stackoverflow.com/users/7361580/synchronizer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1354, "favorite_count": 1, "accepted_answer_id": 50267840, "answer_count": 1, "score": 1, "last_activity_date": 1525964122, "creation_date": 1525894189, "last_edit_date": 1525964122, "question_id": 50260764, "link": "https://stackoverflow.com/questions/50260764/opengl-transparent-pixels-unexpectedly-white", "title": "openGL Transparent pixels unexpectedly White", "body": "<p>I noticed a big problem in my openGL texture rendering:</p>\n\n<p>Assumedly transparent pixels are rendered as solid white. According to most solutions to similar issues discussed on StackOverflow, I need to set glBlend / the proper functions, but I have already set the necessary gl state and am positive that textures are loaded correctly as far as I can tell. My texture load function is below:</p>\n\n<pre><code>GLboolean GL_texture_load(Texture* texture_id, const char* const path, const GLboolean alpha, const GLint param_edge_x, const GLint param_edge_y)\n{\n    // load image\n    SDL_Surface* img = nullptr; \n    if (!(img = IMG_Load(path))) {\n        fprintf(stderr, \"SDL_image could not be loaded %s, SDL_image Error: %s\\n\", \n               path, IMG_GetError());\n        return GL_FALSE;\n    }\n\n\n    glBindTexture(GL_TEXTURE_2D, *texture_id);\n    // image assignment\n    GLuint format = (alpha) ? GL_RGBA : GL_RGB;\n    glTexImage2D(GL_TEXTURE_2D, 0, format, img-&gt;w, img-&gt;h, 0, format, GL_UNSIGNED_BYTE, img-&gt;pixels);\n\n    // wrapping behavior\n    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, param_edge_x);\n    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, param_edge_y);\n    // texture filtering\n    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_NEAREST);\n    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_NEAREST);\n    glBindTexture(GL_TEXTURE_2D, 0);\n    // free the surface\n    SDL_FreeSurface(img);\n\n    return GL_TRUE;\n}\n</code></pre>\n\n<p>I use Adobe Photoshop to export \"for the web\" 24-bit + transparency .png files -- 72 pixels/inch, 6400 x 720. I am not sure how to set the color mode (8, 16, 32), but this might have something to do with the issue. I also use the default sRGB color profile, but I thought to remove the color profile at one point. This didn't do anything.\nNo matter what, a png exported from Photoshop displays as solid white over transparent pixels.</p>\n\n<p>If I create an image in e.g. Gimp, I have correct transparency. Importing the Adobe .psd or .png does not seem to work, and in any case I prefer to use Photoshop for editing purposes.</p>\n\n<p>Has anyone experienced this issue? I imagine that Photoshop must add some strange metadata or I am not using the correct color modes--or both.\n(I am concerned that this goes beyond the scope of Stack Overflow, but my issue intersects image editing and programming. Regardless, please let me know if this is not the right place.)</p>\n\n<p>EDIT:</p>\n\n<p>In both Photoshop and Gimp I created a test case-- 8 pixels (red, green, transparent, blue) clockwise.</p>\n\n<p><a href=\"https://i.stack.imgur.com/IVx3d.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/IVx3d.png\" alt=\"tiny square\"></a></p>\n\n<p>In Photoshop, the transparent square is read as 1, 1, 1, 0 and displays as white.\nIn Gimp, the transparent square is 0, 0, 0, 0.</p>\n\n<p>I also checked my fragment shader to see whether transparency works at all. Varying the alpha over time does increase transparency, so the alpha isn't outright ignored. For some reason 1, 1, 1, 0 counts as solid.\nIn addition, setting the background color to black with glClearColor seems to prevent the alpha from increasing transparency.</p>\n\n<p>I don't know how to explain some of these behaviors, but something seems off. 0 alpha should be the same regardless of color, shouldn't it?</p>\n\n<p>(Note that I render a few shapes on top of each other, but I've tried just rendering one for testing purposes.)</p>\n\n<p>The best I can do is post more of my setup code (with bits omitted):</p>\n\n<p>// vertex array and buffers setup</p>\n\n<pre><code>glClearColor(0.0f, 0.0f, 0.0f, 1.0f);\nglClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);\nglViewport(0, 0, SCREEN_WIDTH, SCREEN_HEIGHT);\n\nglEnable(GL_DEPTH_TEST);\nglEnable(GL_BLEND);\n// I think that the blend function may be wrong (GL_ONE that is).\nglBlendFunc(GL_ONE, GL_ONE_MINUS_SRC_ALPHA);\n\nglDepthRange(0, 1);\nglDepthFunc(GL_LEQUAL);\n\nTexture tex0;\n// same function as above, but generates one texture id for me\nif (GL_texture_gen_and_load_1(&amp;tex0, \"./textures/sq2.png\", GL_TRUE,  GL_CLAMP_TO_EDGE, GL_CLAMP_TO_EDGE) == GL_FALSE) {\n    return EXIT_FAILURE;\n}\n\nglUseProgram(shader_2d);\n\nglActiveTexture(GL_TEXTURE0);\nglBindTexture(GL_TEXTURE_2D, tex0);\nglUniform1i(glGetUniformLocation(shader_2d, \"tex0\"), 0);\n\nbool active = true;\nwhile (active) {\n       glClearColor(0.0f, 0.0f, 0.0f, 1.0f);\n       glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);\n\n       // uniforms, game logic, etc.\n\n       glDrawElements(GL_TRIANGLES, tri_data.i_count, GL_UNSIGNED_INT,   (void*)0);\n}\n</code></pre>\n"}, {"tags": ["c++", "merge", "arabic", "roman-numerals"], "comments": [{"owner": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "edited": false, "score": 1, "creation_date": 1525894407, "post_id": 50260758, "comment_id": 87539613, "body": "What is your question?"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1525894497, "post_id": 50260758, "comment_id": 87539660, "body": "Show us your code and ask a specific question."}, {"owner": {"reputation": 11, "user_id": 9766979, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c6f044b7a63a2a7654e5581f241dcb68?s=128&d=identicon&r=PG&f=1", "display_name": "cardib", "link": "https://stackoverflow.com/users/9766979/cardib"}, "reply_to_user": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "edited": false, "score": 0, "creation_date": 1525895093, "post_id": 50260758, "comment_id": 87539930, "body": "@DrewDormann My question is how can I merge these two programs into one single working program"}, {"owner": {"reputation": 11, "user_id": 9766979, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c6f044b7a63a2a7654e5581f241dcb68?s=128&d=identicon&r=PG&f=1", "display_name": "cardib", "link": "https://stackoverflow.com/users/9766979/cardib"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1525895129, "post_id": 50260758, "comment_id": 87539950, "body": "@JesperJuhl I have included the code"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 4, "creation_date": 1525895341, "post_id": 50260758, "comment_id": 87540040, "body": "Merge them by creating two functions. One to do arabic_to_roman() and the other to do roman_to_arabic(), then call either of the functions from <code>main</code> as needed."}, {"owner": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "edited": false, "score": 1, "creation_date": 1525897823, "post_id": 50260758, "comment_id": 87541164, "body": "Do these programs work?  I&#39;m concerned about <code>while (userNum != &#39;end&#39;)</code>, given that <code>userNum</code> is an <code>int</code>."}, {"owner": {"reputation": 11, "user_id": 9766979, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c6f044b7a63a2a7654e5581f241dcb68?s=128&d=identicon&r=PG&f=1", "display_name": "cardib", "link": "https://stackoverflow.com/users/9766979/cardib"}, "reply_to_user": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "edited": false, "score": 0, "creation_date": 1525898103, "post_id": 50260758, "comment_id": 87541298, "body": "@DrewDormann yes both programs work"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1525932729, "post_id": 50260758, "comment_id": 87550958, "body": "Try this tactic: 1. Detect which conversion the user wants, roman-to-arabic or arabic-to-roman. 2. Run the desired conversion. It would be natural and straightforward to express each conversion as a separate function. It is desirable to have conversion functions that can detect invalid input and report the failure, in which case the tactic could be slightly different: 1. read the input. 2. try conversion one. if successful, output the result; otherwise, try conversion two and print the result (or an error message)."}], "answers": [{"tags": [], "owner": {"reputation": 13, "user_id": 9653178, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-ouV_cY_Qu4U/AAAAAAAAAAI/AAAAAAAAANc/2jFsVASVBk8/photo.jpg?sz=128", "display_name": "Andy", "link": "https://stackoverflow.com/users/9653178/andy"}, "is_accepted": false, "score": 0, "last_activity_date": 1583669966, "creation_date": 1583669966, "answer_id": 60587394, "question_id": 50260758, "link": "https://stackoverflow.com/questions/50260758/c-arabic-numbers-to-roman-numerals-vice-versa/60587394#60587394", "title": "C++ Arabic numbers to Roman Numeral&#39;s &amp; vice versa", "body": "<p>Put code (that inside the main block) for Roman to Arabic into <code>void procedureRomanToArabic()</code>\nThe same for Roman to Arabic. Put it into <code>void procedureArabicToRoman()</code>.\nRemove remove ArabicToRoman do-while and move it to main.</p>\n\n<pre><code>void procedureRomanToArabic(){\n    char roman_Numeral;\n    int arabic_Numeral = 0;\n\n    //...\n\n    cout &lt;&lt; arabic_Numeral &lt;&lt; endl;\n}\n\n\n\n\nvoid procedureArabicToRoman()\n{\n    string answers[ARRAY_SIZE] = { \"\", \"\", \"\", \"\" }; //An  array of string to hold the output from the convert function.\n    int accumulator = 0; // Variable to hold number of arabic numbers converted.\n    int userNum = 0;\n    string strUserNum;\n\n    //remove do while here\n    cout &lt;&lt; \"\";\n    cout &lt;&lt; \"Enter an arabic number between 1 and 100: \";\n    cin &gt;&gt; strUserNum;\n\n    //...\n\n    answers[2] = convert(tens, \"X\", \"L\", \"C\");\n    answers[3] = convert(ones, \"I\", \"V\", \"X\");\n\n    cout &lt;&lt; answers[0] &lt;&lt; answers[1] &lt;&lt; answers[2];\n    cout &lt;&lt; answers[3] &lt;&lt; endl;\n    cout &lt;&lt; endl;\n}\n\n\nint main(){\n  char type;\n  do{\n\n    cout&lt;&lt;\"2 for Arabic to Roman, 1 for Roman to Arabic, or anything else for exit\";\n    cin&gt;&gt;type;\n    if(type=='1')\n        procedureArabicToRoman();\n    else if(type =='2')\n        procedureRomanToArabic();\n    else break; //end program\n  } while(true);     \n\n}\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 9766979, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c6f044b7a63a2a7654e5581f241dcb68?s=128&d=identicon&r=PG&f=1", "display_name": "cardib", "link": "https://stackoverflow.com/users/9766979/cardib"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 3362, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1583669966, "creation_date": 1525894166, "last_edit_date": 1525895455, "question_id": 50260758, "link": "https://stackoverflow.com/questions/50260758/c-arabic-numbers-to-roman-numerals-vice-versa", "title": "C++ Arabic numbers to Roman Numeral&#39;s &amp; vice versa", "body": "<p>I am writing a C++ program that converts between Arabic and Roman numbering systems. I wrote one program that converts Arabic to Roman and have another program that converts Roman to Arabic. \nThe problem is that I can't figure out how to merge them into one single program so that the user can input an Arabic or Roman number and as a result, the program would convert said number to the other. </p>\n\n<p>My question is HOW can I merge these two programs into one?</p>\n\n<p>Code for Roman to Arabic</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\nint main()\n{\n    char roman_Numeral;\n    int arabic_Numeral = 0;\n\n    cout &lt;&lt; \"Enter the Roman Numeral in Capital letters (e.g. CCXIX) : \";\n    while (cin.get(roman_Numeral))\n    {\n\n        if (arabic_Numeral &gt; 100)\n        {\n            cout &lt;&lt; \"\\nInvalid Value. Number must be  between I and C\" &lt;&lt; endl;\n            return 0;\n        }\n\n        else if (roman_Numeral == 'C')\n        {\n            roman_Numeral = cin.peek();\n            if (roman_Numeral == 'M' || roman_Numeral == 'D')\n            {\n                arabic_Numeral = arabic_Numeral - 100;\n            }\n            else\n            {\n                arabic_Numeral = arabic_Numeral + 100;\n            }\n\n        }\n\n        else if (roman_Numeral == 'L')\n        {\n            roman_Numeral = cin.peek();\n            if (roman_Numeral == 'M' || roman_Numeral == 'D'\n                    || roman_Numeral == 'C')\n            {\n                arabic_Numeral = arabic_Numeral - 50;\n                continue;\n            }\n            else\n            {\n                arabic_Numeral = arabic_Numeral + 50;\n                continue;\n            }\n        }\n\n        else if (roman_Numeral == 'X')\n        {\n            roman_Numeral = cin.peek();\n            if (roman_Numeral == 'M' || roman_Numeral == 'D'\n                    || roman_Numeral == 'C' || roman_Numeral == 'L')\n            {\n                arabic_Numeral = arabic_Numeral - 10;\n                continue;\n            }\n            else\n            {\n                arabic_Numeral = arabic_Numeral + 10;\n                continue;\n            }\n        }\n\n        else if (roman_Numeral == 'V')\n        {\n            roman_Numeral = cin.peek();\n            if (roman_Numeral == 'M' || roman_Numeral == 'D'\n                    || roman_Numeral == 'C' || roman_Numeral == 'L'\n                    || roman_Numeral == 'X')\n            {\n                arabic_Numeral = arabic_Numeral - 5;\n                continue;\n            }\n            else\n            {\n                arabic_Numeral = arabic_Numeral + 5;\n                continue;\n            }\n        }\n\n        else if (roman_Numeral == 'I')\n        {\n            roman_Numeral = cin.peek();\n            if (roman_Numeral == 'M' || roman_Numeral == 'D'\n                    || roman_Numeral == 'C' || roman_Numeral == 'L'\n                    || roman_Numeral == 'X' || roman_Numeral == 'V')\n            {\n                arabic_Numeral = arabic_Numeral - 1;\n                continue;\n            }\n            else\n            {\n                arabic_Numeral = arabic_Numeral + 1;\n                continue;\n            }\n        }\n\n        else\n            break;\n    }\n    cout &lt;&lt; arabic_Numeral &lt;&lt; endl;\n    return 0;\n}\n</code></pre>\n\n<p>Code for Arabic to Roman </p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n\n#include &lt;iomanip&gt;\nusing namespace std;\n\n#define MAX_INPUT 100 // These constants hold high and low integer numbers,\n#define MIN_INPUT 1\n#define ARRAY_SIZE 4   // and the array size declarator.\n\nstring convert(int digit, string low, string mid, string high);\n\nint main()\n{\n    string answers[ARRAY_SIZE] = { \"\", \"\", \"\", \"\" }; //An  array of string to hold the output from the convert function.\n    int accumulator = 0; // Variable to hold number of arabic numbers converted.\n    int userNum = 0;\n    string strUserNum;\n\n    do\n    {\n        cout &lt;&lt; \"\";\n        cout &lt;&lt; \"Enter an arabic number between 1 and 100: \";\n        cin &gt;&gt; strUserNum;\n\n        userNum = std::stoi(strUserNum);\n\n        if (userNum == 0 || userNum &gt; MAX_INPUT)\n        {\n            cout &lt;&lt; \"\\nInvalid Value. Number must be between 1 and 100\" &lt;&lt; endl;\n            return 0;\n        }\n        else if (userNum == 'end')\n        {\n            cout &lt;&lt; \"Exiting program:\";\n            break;\n        }\n\n        int thous = userNum / 1000;\n\n        int hund = userNum % 1000 / 100;\n\n        int tens = userNum % 100 / 10;\n\n        int ones = userNum % 10 / 1;\n\n        answers[0] = convert(thous, \"M\", \"M\", \"M\");\n        answers[1] = convert(hund, \"C\", \"D\", \"M\");\n\n        answers[2] = convert(tens, \"X\", \"L\", \"C\");\n        answers[3] = convert(ones, \"I\", \"V\", \"X\");\n\n        cout &lt;&lt; answers[0] &lt;&lt; answers[1] &lt;&lt; answers[2];\n        cout &lt;&lt; answers[3] &lt;&lt; endl;\n        cout &lt;&lt; endl;\n        break;\n\n    } while (userNum != 'end');\n\n    system(\"PAUSE\");\n    return 0;\n\n}\nstring convert(int digit, string low, string mid, string high)\n{\n\n    if (digit == 1)\n    {\n        return low;\n    }\n    if (digit == 2)\n    {\n        return low + low;\n    }\n    if (digit == 3)\n    {\n        return low + low + low;\n    }\n    if (digit == 4)\n    {\n        return low + mid;\n    }\n    if (digit == 5)\n    {\n        return mid;\n    }\n    if (digit == 6)\n    {\n        return mid + low;\n    }\n    if (digit == 7)\n    {\n        return mid + low + low;\n    }\n    if (digit == 8)\n    {\n        return mid + low + low + low;\n    }\n    if (digit == 9)\n    {\n        return low + high;\n    }\n    if (digit == 0)\n    {\n        return \"\";\n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "macos", "file-io", "ifstream"], "comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1525894270, "post_id": 50260738, "comment_id": 87539556, "body": "At the moment nothing is being written to the output file. Removed an <code>output &lt;&lt; fileContents;</code> while debugging?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1525894397, "post_id": 50260738, "comment_id": 87539607, "body": "<code>unsigned line_count = std::count(std::istream_iterator&lt;char&gt;(input),std::istream_i&zwnj;&#8203;terator&lt;char&gt;(), &#39;\\n&#39;);</code> should read to the end of <code>input</code>, there is no rewinding of <code>input</code>, so I can&#39;t see how  the loop can be entered."}, {"owner": {"reputation": 49, "user_id": 7983406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/758383bb9868ae0d558471d3bd63aaf6?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Simanski", "link": "https://stackoverflow.com/users/7983406/michael-simanski"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1525894448, "post_id": 50260738, "comment_id": 87539634, "body": "-user4581301 Yes the output file is just a stub, not being used. I want to get to the point where I can at least get the file into memory."}, {"owner": {"reputation": 49, "user_id": 7983406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/758383bb9868ae0d558471d3bd63aaf6?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Simanski", "link": "https://stackoverflow.com/users/7983406/michael-simanski"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1525894541, "post_id": 50260738, "comment_id": 87539685, "body": "-user4581301 Commented out that line, still produces no output."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1525894785, "post_id": 50260738, "comment_id": 87539780, "body": "Test that input was <code>opened</code>. If not check that the program&#39;s working directory is where you expect it to be. Something like <code>char buf[1024]; cout &lt;&lt; getcwd(buf, sizeof(buf));</code>"}, {"owner": {"reputation": 49, "user_id": 7983406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/758383bb9868ae0d558471d3bd63aaf6?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Simanski", "link": "https://stackoverflow.com/users/7983406/michael-simanski"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1525895323, "post_id": 50260738, "comment_id": 87540030, "body": "-user4581301 if (input.is_open()) does not execute :("}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1525895609, "post_id": 50260738, "comment_id": 87540172, "body": "Good odds then that the directory you stored input in is not the same directory the program is being run from. Either use that little code snippet from my last comment or go hunting on your computer for where the program wrote the output.txt file and move input.txt to the same location."}, {"owner": {"reputation": 49, "user_id": 7983406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/758383bb9868ae0d558471d3bd63aaf6?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Simanski", "link": "https://stackoverflow.com/users/7983406/michael-simanski"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1525896194, "post_id": 50260738, "comment_id": 87540458, "body": "-user4581301 That seemed to do the trick! Any idea how to change the location of where it is looking for the files? Should I specify the file path when creating the stream objects?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 2, "creation_date": 1525896484, "post_id": 50260738, "comment_id": 87540592, "body": "I like to use the full path so I can get predictability, but if you&#39;re handing this in as homework, your path probably won&#39;t match the marker&#39;s path (unless the assignment spec specifies a path). There are whole bunch of strategies and philosophies as to where you get that full path from if your program is going to be portable and requires a bunch of supporting files. That&#39;s a question unto itself."}, {"owner": {"reputation": 49, "user_id": 7983406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/758383bb9868ae0d558471d3bd63aaf6?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Simanski", "link": "https://stackoverflow.com/users/7983406/michael-simanski"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1525896782, "post_id": 50260738, "comment_id": 87540714, "body": "-user4581301 For the record this isn&#39;t homework, jut getting practice in C++. I can figure out the path stuff on my own later. Thanks for your help!"}], "owner": {"reputation": 49, "user_id": 7983406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/758383bb9868ae0d558471d3bd63aaf6?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Simanski", "link": "https://stackoverflow.com/users/7983406/michael-simanski"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 49, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1525894066, "creation_date": 1525894066, "question_id": 50260738, "link": "https://stackoverflow.com/questions/50260738/text-file-not-reading-c-macosx", "title": "Text file not reading c++ MacOSX", "body": "<p>I have an issue with some code I have been working on. I am trying to read the contents of a text file (input.txt) into a variable fileContents. The loop in the code enters, but the program produces no output. Some of the variables are not used, I know about this. What is wrong?</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;fstream&gt;\n\nusing namespace std;\n\nint main(int argc, char const *argv[])\n{\n  ifstream input(\"input.txt\");\n  ofstream output(\"output.txt\"); //init output controller\n\n  // new lines will be skipped unless we stop it from happening:\n  //input.unsetf(std::ios_base::skipws);\n\n  // count the newlines with an algorithm specialized for counting:\n  unsigned line_count = std::count(std::istream_iterator&lt;char&gt;(input),std::istream_iterator&lt;char&gt;(), '\\n');\n\n  string fileContents = \"\"; //init message, that will be filled by input.txt\n  string str; //temp string\n\n  while (input &gt;&gt; fileContents)\n  {\n    //cout &lt;&lt; \"loop entered\";\n    cout &lt;&lt; fileContents &lt;&lt; \"\\n\";\n  }\n\n  //cout &lt;&lt; \"test\" &lt;&lt; \"\\n\";\n\n  return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "gcc", "makefile", "gnu-make"], "comments": [{"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 1, "creation_date": 1525893978, "post_id": 50260675, "comment_id": 87539392, "body": "I&#39;d personally recommend using cmake rather than make. It takes care of details such as this for you."}, {"owner": {"reputation": 1130, "user_id": 3927381, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/801e5e2a7b6e032c3ce07b9a9f7e7f8c?s=128&d=identicon&r=PG", "display_name": "solvingJ", "link": "https://stackoverflow.com/users/3927381/solvingj"}, "reply_to_user": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 0, "creation_date": 1525894863, "post_id": 50260675, "comment_id": 87539819, "body": "Thanks for the recommendation, not an option here."}, {"owner": {"reputation": 69991, "user_id": 939557, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/3VPea.png?s=128&g=1", "display_name": "MadScientist", "link": "https://stackoverflow.com/users/939557/madscientist"}, "edited": false, "score": 0, "creation_date": 1526052050, "post_id": 50260675, "comment_id": 87607642, "body": "It&#39;s really not right to create a rule like <code>%.$(OBJ_EXT) : $(C_SRCS)</code>.  This tells make that each individual object file has every source file as a prerequisite.  It means that if you change any one source file, every object file will be rebuilt.  That&#39;s not what you want."}, {"owner": {"reputation": 1130, "user_id": 3927381, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/801e5e2a7b6e032c3ce07b9a9f7e7f8c?s=128&d=identicon&r=PG", "display_name": "solvingJ", "link": "https://stackoverflow.com/users/3927381/solvingj"}, "edited": false, "score": 0, "creation_date": 1526052692, "post_id": 50260675, "comment_id": 87608041, "body": "Agreed, I may find time to create a more precise rule in the future. I don&#39;t like when stuff is wrong but still works.  Currently, this works because all source files are copied to a new directory before each build (because it&#39;s built by CI), so the &quot;change detection&quot; mechanism of Make is irrelevant. Sadly, I think the more precise/correct Makefile will be more complicated. Primarily because we need the rule to deal with $(C_SRCS) being generated, and containing files from any number of sub-directories: path1/file1.c path2/file2.c.  If you have an elegant suggestion for that, would be great!"}], "answers": [{"comments": [{"owner": {"reputation": 1130, "user_id": 3927381, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/801e5e2a7b6e032c3ce07b9a9f7e7f8c?s=128&d=identicon&r=PG", "display_name": "solvingJ", "link": "https://stackoverflow.com/users/3927381/solvingj"}, "edited": false, "score": 0, "creation_date": 1525898480, "post_id": 50261388, "comment_id": 87541502, "body": "I was really optimistic with this approach, and the suffix rules did seem to get the desired effect on GNU make, but I get an error with OPUS MAKE:   &gt; Don&#39;t know how to make &#39;src/Action.o&#39;. Stop."}, {"owner": {"reputation": 826, "user_id": 1402389, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/599c4eaaff0f5d2c3fe5feca6560173b?s=128&d=identicon&r=PG", "display_name": "FBergo", "link": "https://stackoverflow.com/users/1402389/fbergo"}, "reply_to_user": {"reputation": 1130, "user_id": 3927381, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/801e5e2a7b6e032c3ce07b9a9f7e7f8c?s=128&d=identicon&r=PG", "display_name": "solvingJ", "link": "https://stackoverflow.com/users/3927381/solvingj"}, "edited": false, "score": 0, "creation_date": 1525899272, "post_id": 50261388, "comment_id": 87541892, "body": "Oh, I thought you had two different versions of GNU make. This syntax is probably GNU-specific."}, {"owner": {"reputation": 1130, "user_id": 3927381, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/801e5e2a7b6e032c3ce07b9a9f7e7f8c?s=128&d=identicon&r=PG", "display_name": "solvingJ", "link": "https://stackoverflow.com/users/3927381/solvingj"}, "edited": false, "score": 0, "creation_date": 1525955765, "post_id": 50261388, "comment_id": 87562955, "body": "Yes it seems so.  Still looking for an alternative make syntax that solves the problem."}, {"owner": {"reputation": 1130, "user_id": 3927381, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/801e5e2a7b6e032c3ce07b9a9f7e7f8c?s=128&d=identicon&r=PG", "display_name": "solvingJ", "link": "https://stackoverflow.com/users/3927381/solvingj"}, "edited": false, "score": 0, "creation_date": 1525956260, "post_id": 50261388, "comment_id": 87563254, "body": "Actually, it seems that this syntax should be supported in OPUS make, I will revisit the error: <a href=\"http://www.opussoftware.com/tutorial/TutMakefile.htm\" rel=\"nofollow noreferrer\">opussoftware.com/tutorial/TutMakefile.htm</a>"}, {"owner": {"reputation": 1130, "user_id": 3927381, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/801e5e2a7b6e032c3ce07b9a9f7e7f8c?s=128&d=identicon&r=PG", "display_name": "solvingJ", "link": "https://stackoverflow.com/users/3927381/solvingj"}, "edited": false, "score": 0, "creation_date": 1525964193, "post_id": 50261388, "comment_id": 87568239, "body": "Could not get it to work. Instead, i used a different extension for object files from C++ files, thereby removing the ambiguity between the targets."}], "tags": [], "owner": {"reputation": 826, "user_id": 1402389, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/599c4eaaff0f5d2c3fe5feca6560173b?s=128&d=identicon&r=PG", "display_name": "FBergo", "link": "https://stackoverflow.com/users/1402389/fbergo"}, "is_accepted": false, "score": 1, "last_activity_date": 1525897133, "creation_date": 1525897133, "answer_id": 50261388, "question_id": 50260675, "link": "https://stackoverflow.com/questions/50260675/how-to-modify-this-makefile-to-build-c-and-cxx-files-separately/50261388#50261388", "title": "How to modify this Makefile to build c and cxx files separately?", "body": "<p>You can use <a href=\"https://www.gnu.org/software/make/manual/html_node/Suffix-Rules.html\" rel=\"nofollow noreferrer\" title=\"Suffix Rules\">suffix rules</a>:</p>\n\n<pre><code>CC = gcc\nCFLAGS = -O2 -Wall\nCXX = g++\nCXXFLAGS = -std=c++11 -O3 -Wall\n\nOBJS = cobj1.o cobj2.o cppobj1.o\n\n.c.o:\n        $(CC) $(CFLAGS) -c $&lt; -o $@\n\n.cpp.o:\n        $(CXX) $(CXXFLAGS) -c $&lt; -o $@\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1130, "user_id": 3927381, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/801e5e2a7b6e032c3ce07b9a9f7e7f8c?s=128&d=identicon&r=PG", "display_name": "solvingJ", "link": "https://stackoverflow.com/users/3927381/solvingj"}, "is_accepted": false, "score": 0, "last_activity_date": 1525964420, "creation_date": 1525964420, "answer_id": 50275910, "question_id": 50260675, "link": "https://stackoverflow.com/questions/50260675/how-to-modify-this-makefile-to-build-c-and-cxx-files-separately/50275910#50275910", "title": "How to modify this Makefile to build c and cxx files separately?", "body": "<p>Added  </p>\n\n<pre><code>CXX_OBJ_EXT           ?= obj\n</code></pre>\n\n<p>Replaced</p>\n\n<pre><code>CXX_OBJ_FILES         += $(CXX_SRCS:.$(CXX_EXT)=.$(OBJ_EXT))\nCXX_OBJ_FILES         += $(CXX_SRCS:.$(CXX_EXT)=.$(CXX_OBJ_EXT))\n</code></pre>\n\n<p>Replaced  </p>\n\n<pre><code>%.$(OBJ_EXT)          :   $(CXX_SRCS)\n%.$(CXX_OBJ_EXT)      :   $(CXX_SRCS)\n</code></pre>\n"}], "owner": {"reputation": 1130, "user_id": 3927381, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/801e5e2a7b6e032c3ce07b9a9f7e7f8c?s=128&d=identicon&r=PG", "display_name": "solvingJ", "link": "https://stackoverflow.com/users/3927381/solvingj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 514, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1525964420, "creation_date": 1525893814, "last_edit_date": 1525896089, "question_id": 50260675, "link": "https://stackoverflow.com/questions/50260675/how-to-modify-this-makefile-to-build-c-and-cxx-files-separately", "title": "How to modify this Makefile to build c and cxx files separately?", "body": "<p>The following Makefile was working very well for C projects, but when we encountered a directory with <code>.cpp</code> files, we found the first pattern rule is getting used for <code>.cpp</code> files.  I've tried 3 or 4 changes to get the desired effect, and I can't seem to find a way.  I'd like to know if it's possible to make any minor alteration to the rules below so that the <code>.cpp</code> files are built with <code>COMPILE_CXX_COMMAND</code>.</p>\n\n<pre><code>C_EXT             ?= c\nCXX_EXT           ?= cpp\nOBJ_EXT           ?= o\n\nC_SRCS := \\\nsrc/RT_Socket.c \\\nsrc/products.c\n\nCXX_SRCS := \\\nsrc/BurnedInAddress.cpp \\\nsrc/DiskID.cpp \\\n\n\nC_OBJ_FILES       += $(C_SRCS:.$(C_EXT)=.$(OBJ_EXT))\nCXX_OBJ_FILES     += $(CXX_SRCS:.$(CXX_EXT)=.$(OBJ_EXT))\n\n\n$(ARCHIVE_FILENAME) :   $(C_OBJ_FILES) $(CXX_OBJ_FILES)\n    $(CREATE_ARCHIVE_COMMAND)\n\n$(LIBRARY_FILENAME) :   $(ARCHIVE_FILENAME)\n    $(CREATE_LIBRARY_COMMAND)\n\n%.$(OBJ_EXT)        :   $(C_SRCS)\n    $(COMPILE_C_COMMAND)\n\n%.$(OBJ_EXT)        :   $(CXX_SRCS)\n    $(COMPILE_CXX_COMMAND)\n</code></pre>\n\n<p>EDIT:\nI want to add that I tried replacing the pattern targets with the list of <code>OBJ</code> files, and it works.  </p>\n\n<pre><code>$(C_OBJ_FILES)      :   $(C_SRCS)\n    $(COMPILE_C_COMMAND)\n\n$(CXX_OBJ_FILES)    :   $(CXX_SRCS)\n    $(COMPILE_CXX_COMMAND)\n</code></pre>\n\n<p>However, this creates a new problem.  We have to use some different versions of Make, and one of them fails with the following error whenever there are no <code>.cpp</code> files:</p>\n\n<blockquote>\n  <p>No targets on dependency line. Stop.</p>\n</blockquote>\n\n<p>It references this line:  <code>$(CXX_OBJ_FILES) :   $(CXX_SRCS)</code></p>\n\n<p>Gnu make seems to have no problem with this situation, our other one does (OPUS Make).  Can anyone think of a workaround?</p>\n"}, {"tags": ["c++", "gcc", "clang"], "comments": [{"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 7, "creation_date": 1525893482, "post_id": 50260579, "comment_id": 87539148, "body": "Well, it&#39;s initialized and then (possibly) assigned once but it&#39;s never referenced. Of what use is it?"}], "answers": [{"comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 1, "creation_date": 1525893743, "post_id": 50260621, "comment_id": 87539269, "body": "The entire function has no observable behavior."}, {"owner": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1525893861, "post_id": 50260621, "comment_id": 87539329, "body": "@Fran&#231;oisAndrieux - And I believe a release build with most compilers would reflect that."}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 5, "last_activity_date": 1525894127, "last_edit_date": 1525894127, "creation_date": 1525893581, "answer_id": 50260621, "question_id": 50260579, "link": "https://stackoverflow.com/questions/50260579/why-is-this-variable-flagged-as-unused/50260621#50260621", "title": "Why is this variable flagged as &quot;unused&quot;?", "body": "<p>You have code that writes to the variable but you don't have any code that reads from it. The variable is not used in that sense.</p>\n\n<p>The observable behavior of executing the function won't change if you remove the lines that reference the variable. That's a clear indication that the variable is not used.</p>\n"}, {"tags": [], "owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "is_accepted": true, "score": 4, "last_activity_date": 1525893975, "creation_date": 1525893975, "answer_id": 50260719, "question_id": 50260579, "link": "https://stackoverflow.com/questions/50260579/why-is-this-variable-flagged-as-unused/50260719#50260719", "title": "Why is this variable flagged as &quot;unused&quot;?", "body": "<p>\"Used\" in this context means to read the variable. If you repeatedly write to a variable and never read it, it doesn't matter what you wrote to the variable. This is usually a sign that you forgot to do whatever it is you meant to do with it or that the variable can be eliminated. In your example you never read from <code>intVar</code>. Change <code>intVar = 20;</code> to <code>(void)intVar;</code> to \"read\" the value and discard the result. You will find the warning goes away.</p>\n\n<p>Demonstration : <a href=\"https://godbolt.org/g/L3rFqM\" rel=\"nofollow noreferrer\">https://godbolt.org/g/L3rFqM</a></p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "is_accepted": false, "score": 2, "last_activity_date": 1525894277, "creation_date": 1525894277, "answer_id": 50260779, "question_id": 50260579, "link": "https://stackoverflow.com/questions/50260579/why-is-this-variable-flagged-as-unused/50260779#50260779", "title": "Why is this variable flagged as &quot;unused&quot;?", "body": "<p>Just because you assign to it doesn't make it \"used\" - as the function is currently written, an optimizing compiler will just remove the assignment since it has no observable side effects, this makes the variable unused.</p>\n"}], "owner": {"reputation": 1555, "user_id": 1340021, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/7a12d786f68fedfc466c808ba67a5267?s=128&d=identicon&r=PG", "display_name": "Bungles", "link": "https://stackoverflow.com/users/1340021/bungles"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "accepted_answer_id": 50260719, "answer_count": 3, "score": 1, "last_activity_date": 1525894277, "creation_date": 1525893394, "question_id": 50260579, "link": "https://stackoverflow.com/questions/50260579/why-is-this-variable-flagged-as-unused", "title": "Why is this variable flagged as &quot;unused&quot;?", "body": "<p>My C++ compiler issues a warning that the following 'intVar' variable is \"unused\".</p>\n\n<pre><code>void MyClass::MyMethod(bool bFlag)\n{\n    int intVar = 10;\n    if (bFlag)\n        intVar = 20;\n}\n</code></pre>\n\n<p>Why does the compiler do this when the variable so obviously IS used? Is this something the compiler should be fixed to recognize as in fact \"used\"?</p>\n"}, {"tags": ["c++", "recursion", "shared-ptr", "c++17"], "comments": [{"owner": {"reputation": 48100, "user_id": 645551, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/3231cd5016283f6ea5963ab1dfa6e27a?s=128&d=identicon&r=PG", "display_name": "freakish", "link": "https://stackoverflow.com/users/645551/freakish"}, "edited": false, "score": 5, "creation_date": 1525893484, "post_id": 50260555, "comment_id": 87539150, "body": "I&#39;m not sure I fully understand you, but is <a href=\"http://en.cppreference.com/w/cpp/memory/enable_shared_from_this\" rel=\"nofollow noreferrer\">std::enable_shared_from_this</a> what you are looking for?"}, {"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 1, "creation_date": 1525893935, "post_id": 50260555, "comment_id": 87539368, "body": "You insert <code>this</code> into the map, but <code>this</code> is owned by a <code>shared_ptr</code> (via the recursive call) when the owning <code>shared_ptr</code> (in the outer call <code>pA</code>) goes out of scope as the recursion unwinds the object in the map will be destroyed."}, {"owner": {"reputation": 5994, "user_id": 5698738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4tnZ9.jpg?s=128&g=1", "display_name": "Aganju", "link": "https://stackoverflow.com/users/5698738/aganju"}, "reply_to_user": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1525894033, "post_id": 50260555, "comment_id": 87539429, "body": "Yes, @RichardCritten , but how do I keep it alive? The whole reason to use shared_ptr was that it stays alive. Looks like I should scrap the shared-ptr thing here, and use my own logic for when i delete it."}, {"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1525894071, "post_id": 50260555, "comment_id": 87539446, "body": "The question is why have a shared_ptr at all?  If the map is to own the object, either put the object itself (by value) into the map or put a <code>unique_ptr&lt;A&gt;</code> in the map"}, {"owner": {"reputation": 5994, "user_id": 5698738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4tnZ9.jpg?s=128&g=1", "display_name": "Aganju", "link": "https://stackoverflow.com/users/5698738/aganju"}, "edited": false, "score": 0, "creation_date": 1525894142, "post_id": 50260555, "comment_id": 87539483, "body": "I learned to prefer shared and unique ptr to simple new and delete, it is recommended to avoid issues. So I tried to learn to use it. Probably not the right thing for this use case though."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1525894880, "post_id": 50260555, "comment_id": 87539830, "body": "Why doesn&#39;t the map hold shared_ptr&#39;s if it&#39;s supposed to keep the objects alive as long as they are in the map?"}], "answers": [{"tags": [], "owner": {"reputation": 2282, "user_id": 6646408, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6BakX.png?s=128&g=1", "display_name": "besc", "link": "https://stackoverflow.com/users/6646408/besc"}, "is_accepted": false, "score": 2, "last_activity_date": 1525899998, "creation_date": 1525899998, "answer_id": 50262054, "question_id": 50260555, "link": "https://stackoverflow.com/questions/50260555/calling-a-method-of-a-shared-ptr-what-happens-to-reference-count/50262054#50262054", "title": "Calling a method of a *shared_ptr* - what happens to reference count?", "body": "<p>Your understanding is basically correct. This line is your problem:</p>\n\n<pre><code>if (condition) myMap.insert({this,5});\n</code></pre>\n\n<p>Because of the raw <code>this</code> a completely independent <code>shared_ptr</code> with its own independent reference count is created in this line. Later in the outer recursion level at the end of <code>DoSomething()</code> the original shared_ptr <code>pA</code> goes out of scope, its refcount drops to 0, the object is destroyed and the second shared_ptr in the map starts to dangle.</p>\n\n<h3>Solution 1</h3>\n\n<p>You can solve it with <a href=\"http://en.cppreference.com/w/cpp/memory/enable_shared_from_this\" rel=\"nofollow noreferrer\">std::enable_shared_from_this</a>:</p>\n\n<pre><code>class A : public std::enable_shared_from_this&lt;A&gt; { ... }\n\n// Btw: Lose the void pseudo-parameter. This is not C. ;)\nvoid A::DoSomething()\n{\n    if (condition) {\n        myMap.insert({shared_from_this(), 5});\n    }\n}\n</code></pre>\n\n<h3>Potential Solution 2</h3>\n\n<p>From the code snippets you show I find it highly questionable that you need <code>shared_ptr</code> at all. Nothing of what you show indicates shared ownership. If that\u2019s indeed the case, switch to <code>unique_ptr</code>s and <code>std::move()</code> them around. That gets rid of the problem, too.</p>\n"}], "owner": {"reputation": 5994, "user_id": 5698738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4tnZ9.jpg?s=128&g=1", "display_name": "Aganju", "link": "https://stackoverflow.com/users/5698738/aganju"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 598, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1525899998, "creation_date": 1525893301, "question_id": 50260555, "link": "https://stackoverflow.com/questions/50260555/calling-a-method-of-a-shared-ptr-what-happens-to-reference-count", "title": "Calling a method of a *shared_ptr* - what happens to reference count?", "body": "<p>I am trying to identify a nasty bug where an object spontaneously gets corrupted while being inside a map, and after some hours of debugging, I think I might not have fully grasped the idea of <strong><em>std::shared_ptr</em></strong>.</p>\n\n<p>Here is the <strong>Context:</strong>\nInside a method, I declare a <em>std::shared_ptr</em> and initialize it to point to a clone of the current object (created by <em>new</em>). Then - after some modifications to the object - I call the <em>same</em> method on that pointer (recursively).<br>\nInside the next recursion of the method, the decision is made to insert this object into a <em>std::unordered_map</em> (which is a class-attribute, so it is available on all recursion levels).<br>\nThis is some pseudo-code to illustrate what I mean:</p>\n\n<pre><code>class A\n{\n  ...\n  void DoSomething(void); // the recursive function\n  A* Clone(void) const { return new A(this); }  // the clone method\n  ...\n  static std::unordered_map&lt;std::shared_ptr&lt;A&gt;,int&gt; myMap{};\n};\n\nvoid A::DoSomething(void)\n{\n  ...\n  if (condition) myMap.insert({this,5});  // in a deeper recursive call, condition is true\n  ...\n  std::shared_ptr&lt;A&gt; pA(Clone());   // make a copy\n  pA-&gt;...  // modify it \n  pA-&gt;DoSomething();  // here is the recursive call\n  ...\n}\n</code></pre>\n\n<p><strong>Problem:</strong>\nSometimes, the object behind the pointer inside the std::unordered_map is destroyed, and it <em>seems</em> like this happens when the original std::shared_ptr goes out of scope.</p>\n\n<p><strong>My (tentative) understanding:</strong> Calling a method of the object the std::shared_ptr points to does <em>not</em> increase the reference count - inside the called method, I have access to <em>this</em>, which is the ptr the std::shared_ptr points to, but what I do with <em>this</em> in there is not affecting the original std::shared_ptr.<br>\nTo verify this, I added code to make an <em>extra</em> clone into an extra std::shared_ptr, right at the moment of insertion into the map, and then everything works fine (just slower, and uses double the memory, which is both an issue - class A has a lot of complex data).</p>\n\n<p><strong>Question:</strong> Is my understanding correct? If not, <strong>how would I call a method of a <em>std::shared_ptr</em> so that the <em>this</em> inside the method is still the 'std::shared_ptr'?</strong> Or is this not possible, and I have to use another design?</p>\n\n<p>Regarding duplicates: <a href=\"https://stackoverflow.com/questions/3310737/should-we-pass-a-shared-ptr-by-reference-or-by-value/8741626\">Should we pass a shared_ptr by reference or by value?</a> seems to point that way, but is about passing <em>parameters</em> by value or by reference, which is not a choice I have with the <em>this</em> pointer.</p>\n"}, {"tags": ["c++", "opengl", "transformation", "glm-math"], "comments": [{"owner": {"reputation": 6058, "user_id": 3871028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbe44ff5c56628e85683c8918602c96?s=128&d=identicon&r=PG&f=1", "display_name": "Ripi2", "link": "https://stackoverflow.com/users/3871028/ripi2"}, "edited": false, "score": 0, "creation_date": 1525893704, "post_id": 50260553, "comment_id": 87539253, "body": "Try <code>gl_Position = projection * view * transform * model * vec4(aPos,1.0f)</code>"}, {"owner": {"reputation": 313, "user_id": 6620886, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/512eac7f669d64cad36f37e0c8c67cba?s=128&d=identicon&r=PG&f=1", "display_name": "mahesh Rao", "link": "https://stackoverflow.com/users/6620886/mahesh-rao"}, "reply_to_user": {"reputation": 6058, "user_id": 3871028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbe44ff5c56628e85683c8918602c96?s=128&d=identicon&r=PG&f=1", "display_name": "Ripi2", "link": "https://stackoverflow.com/users/3871028/ripi2"}, "edited": false, "score": 0, "creation_date": 1525893884, "post_id": 50260553, "comment_id": 87539341, "body": "@Ripi2 did not work."}, {"owner": {"reputation": 6058, "user_id": 3871028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbe44ff5c56628e85683c8918602c96?s=128&d=identicon&r=PG&f=1", "display_name": "Ripi2", "link": "https://stackoverflow.com/users/3871028/ripi2"}, "edited": false, "score": 0, "creation_date": 1525894076, "post_id": 50260553, "comment_id": 87539449, "body": "Do you understand &quot;transformations&quot;? If not, take a look at <a href=\"https://stackoverflow.com/a/850239/3871028\">this</a>."}, {"owner": {"reputation": 313, "user_id": 6620886, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/512eac7f669d64cad36f37e0c8c67cba?s=128&d=identicon&r=PG&f=1", "display_name": "mahesh Rao", "link": "https://stackoverflow.com/users/6620886/mahesh-rao"}, "reply_to_user": {"reputation": 138010, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "edited": false, "score": 0, "creation_date": 1525894376, "post_id": 50260553, "comment_id": 87539598, "body": "@Rabbid76 first comment. Also, I&#39;ve found that the problem has something to do with scaling."}, {"owner": {"reputation": 313, "user_id": 6620886, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/512eac7f669d64cad36f37e0c8c67cba?s=128&d=identicon&r=PG&f=1", "display_name": "mahesh Rao", "link": "https://stackoverflow.com/users/6620886/mahesh-rao"}, "edited": false, "score": 1, "creation_date": 1525895411, "post_id": 50260553, "comment_id": 87540074, "body": "I&#39;ve got it ! I initialized <code>j</code> variable as an integer. So, for the scale function, <code>j=j+0.035</code> was always 0. Hence, the quad didn&#39;t appear.I&#39;m sorry for all the trouble and thank you for helping me."}], "answers": [{"comments": [{"owner": {"reputation": 313, "user_id": 6620886, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/512eac7f669d64cad36f37e0c8c67cba?s=128&d=identicon&r=PG&f=1", "display_name": "mahesh Rao", "link": "https://stackoverflow.com/users/6620886/mahesh-rao"}, "edited": false, "score": 0, "creation_date": 1525894955, "post_id": 50260818, "comment_id": 87539864, "body": "I tried it. I&#39;ve noticed that the code works with rotation only and doesn&#39;t with scaling only. It has something to do with the scaling of the quad."}], "tags": [], "owner": {"reputation": 6058, "user_id": 3871028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbe44ff5c56628e85683c8918602c96?s=128&d=identicon&r=PG&f=1", "display_name": "Ripi2", "link": "https://stackoverflow.com/users/3871028/ripi2"}, "is_accepted": false, "score": 1, "last_activity_date": 1525894425, "creation_date": 1525894425, "answer_id": 50260818, "question_id": 50260553, "link": "https://stackoverflow.com/questions/50260553/opengl-apply-transformation-to-polygon-in-3d-space/50260818#50260818", "title": "OpenGL - Apply transformation to polygon in 3D space", "body": "<p>Let's think only in 2D.\n<p>The quad is defined in \"world\" coordinates. To rotate it <em>around some point</em> move the quad to that point, then rotate and scale it and then move it back. <p>Doing this with matrices is the same as <code>transform * model</code>  where <code>transform</code> is something like</p>\n\n<pre><code>transform = moveback * scale * rotate * movetopoint\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 313, "user_id": 6620886, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/512eac7f669d64cad36f37e0c8c67cba?s=128&d=identicon&r=PG&f=1", "display_name": "mahesh Rao", "link": "https://stackoverflow.com/users/6620886/mahesh-rao"}, "edited": false, "score": 0, "creation_date": 1525895933, "post_id": 50261081, "comment_id": 87540322, "body": "Yup, that was it. I had initialized j as an integer. So j+0.035, did not make a difference and j was still 0."}], "tags": [], "owner": {"reputation": 138010, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "is_accepted": true, "score": 0, "last_activity_date": 1525896269, "last_edit_date": 1525896269, "creation_date": 1525895653, "answer_id": 50261081, "question_id": 50260553, "link": "https://stackoverflow.com/questions/50260553/opengl-apply-transformation-to-polygon-in-3d-space/50261081#50261081", "title": "OpenGL - Apply transformation to polygon in 3D space", "body": "<p>If <code>scaleAmount == 0.0</code>:</p>\n\n<pre><code>glm::mat4 trans( 1.0f );\nfloat scaleAmount = 0.0f;\ntrans=glm::scale(trans,glm::vec3(scaleAmount,scaleAmount,scaleAmount));\n</code></pre>\n\n<p>then this would cause that <code>trans</code> is </p>\n\n<pre><code>{{0, 0, 0, 0}, {0, 0, 0, 0}, {0, 0, 0, 0}, {0, 0, 0, 1}}\n</code></pre>\n\n<p>Since <code>sin(0.0) == 0.0</code> it has to be ensured that in case of <code>sin(j*0.3);</code>, <code>j</code> is not equal 0.0.</p>\n"}], "owner": {"reputation": 313, "user_id": 6620886, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/512eac7f669d64cad36f37e0c8c67cba?s=128&d=identicon&r=PG&f=1", "display_name": "mahesh Rao", "link": "https://stackoverflow.com/users/6620886/mahesh-rao"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 0, "accepted_answer_id": 50261081, "answer_count": 2, "score": 1, "last_activity_date": 1525896269, "creation_date": 1525893295, "last_edit_date": 1525894456, "question_id": 50260553, "link": "https://stackoverflow.com/questions/50260553/opengl-apply-transformation-to-polygon-in-3d-space", "title": "OpenGL - Apply transformation to polygon in 3D space", "body": "<p>I am trying to rotate a quad in a 3D space. The following code shows the vertex shader utilized to draw the quad:<br/><br/></p>\n\n<pre><code>#version 330 core\nlayout (location = 0) in vec3 aPos;\nlayout (location = 1) in vec3 aColor;\n\nout vec3 ourColor;\n\nuniform mat4 transform;\nuniform mat4 model;\nuniform mat4 view;\nuniform mat4 projection;\n\nvoid main()\n{\n    gl_Position = transform*(projection*view*model*vec4(aPos, 1.0f));\n    ourColor = aColor;\n}\n</code></pre>\n\n<p><br/><br/>\nThe quad is displayed when <code>transform</code> is not multiplied to <code>projection*view*model*vec4(aPos,1.0f)</code> but is not displayed when it is multiplied as above.<br/><br/>\nThe code for transformation:<br/><br/></p>\n\n<pre><code>trans=glm::rotate(trans,(float)(glfwGetTime()),glm::vec3(0.0,0.0,1.0));\nfloat scaleAmount = sin(j*0.3);j=j+0.035;\ntrans=glm::scale(trans,glm::vec3(scaleAmount,scaleAmount,scaleAmount));\nunsigned int transformLoc = glGetUniformLocation(shaderProgram, \"transform\");\nglUniformMatrix4fv(transformLoc, 1, GL_FALSE, glm::value_ptr(trans));\nglBindVertexArray(VAO);\nglDrawElements(GL_TRIANGLES, 6, GL_UNSIGNED_INT, 0);\n</code></pre>\n\n<p><br/>I have set the uniform present in the vertex shader as well.<br/>Why is it not rotating and scaling, or even appearing when I multiply <code>transform</code> with <code>(projection*view*model*vec4(aPos,1.0f))</code> ? \n<br/>\n<strong>Edit:</strong> I figured out that the problem is with scaling, since the code works with rotation only. The code does not work with scaling only.</p>\n"}, {"tags": ["c++", "qt", "qml", "qt5", "qqmlcomponent"], "comments": [{"owner": {"reputation": 5455, "user_id": 2788674, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e2eaf786e0c365b68573e38c4625ce3?s=128&d=identicon&r=PG&f=1", "display_name": "GrecKo", "link": "https://stackoverflow.com/users/2788674/grecko"}, "edited": false, "score": 0, "creation_date": 1525900420, "post_id": 50260441, "comment_id": 87542388, "body": "Note that this is not recommended : <a href=\"http://doc-snapshots.qt.io/qt5-5.11/qtquick-bestpractices.html#interacting-with-qml-from-c\" rel=\"nofollow noreferrer\">doc-snapshots.qt.io/qt5-5.11/&hellip;</a>"}, {"owner": {"reputation": 168, "user_id": 4478401, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/AKhH8.jpg?s=128&g=1", "display_name": "Jhonny Pinheiro", "link": "https://stackoverflow.com/users/4478401/jhonny-pinheiro"}, "reply_to_user": {"reputation": 5455, "user_id": 2788674, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e2eaf786e0c365b68573e38c4625ce3?s=128&d=identicon&r=PG&f=1", "display_name": "GrecKo", "link": "https://stackoverflow.com/users/2788674/grecko"}, "edited": false, "score": 0, "creation_date": 1525958972, "post_id": 50260441, "comment_id": 87564872, "body": "@GrecKo, i know, thanks!"}], "answers": [{"tags": [], "owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "is_accepted": true, "score": 2, "last_activity_date": 1525896771, "last_edit_date": 1525896771, "creation_date": 1525893928, "answer_id": 50260698, "question_id": 50260441, "link": "https://stackoverflow.com/questions/50260441/is-it-possible-to-create-a-qml-component-from-c/50260698#50260698", "title": "Is it possible to create a Qml Component from C++?", "body": "<p>In your case you should follow the following steps:</p>\n\n<ul>\n<li><p>find the item using the objectName through findChild.</p></li>\n<li><p>create the item with QQmlComponent</p></li>\n<li><p>add the <a href=\"http://doc.qt.io/qt-5/qquickitem.html#parent-prop\" rel=\"nofollow noreferrer\">parent</a> as property.</p></li>\n</ul>\n\n<p><strong>main.cpp</strong></p>\n\n<pre><code>#include &lt;QGuiApplication&gt;\n#include &lt;QQmlApplicationEngine&gt;\n#include &lt;QQmlComponent&gt;\n#include &lt;QQmlProperty&gt;\n\nint main(int argc, char *argv[])\n{\n    QCoreApplication::setAttribute(Qt::AA_EnableHighDpiScaling);\n\n    QGuiApplication app(argc, argv);\n\n    QQmlApplicationEngine engine;\n    engine.load(QUrl(QStringLiteral(\"qrc:/main.qml\")));\n    if (engine.rootObjects().isEmpty())\n        return -1;\n\n    QObject *frmHeader = engine.rootObjects().first()-&gt;findChild&lt;QObject *&gt;(\"frmHeader\");\n    QQmlComponent component(&amp;engine);\n    component.setData(\"import QtQuick 2.7 \\n\"\n                      \"TextInput{ \\n\"\n                      \"text: \\\"hello world :D\\\" \\n\"\n                      \"}\", QUrl());\n    QObject *text_object = component.create();\n    if(text_object &amp;&amp; frmHeader)\n        Q_ASSERT(QQmlProperty::write(text_object,\n                                     \"parent\",\n                                     QVariant::fromValue(frmHeader)));\n\n    return app.exec();\n}\n</code></pre>\n"}], "owner": {"reputation": 168, "user_id": 4478401, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/AKhH8.jpg?s=128&g=1", "display_name": "Jhonny Pinheiro", "link": "https://stackoverflow.com/users/4478401/jhonny-pinheiro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 94, "favorite_count": 0, "accepted_answer_id": 50260698, "answer_count": 1, "score": 0, "last_activity_date": 1525896771, "creation_date": 1525892834, "last_edit_date": 1525896751, "question_id": 50260441, "link": "https://stackoverflow.com/questions/50260441/is-it-possible-to-create-a-qml-component-from-c", "title": "Is it possible to create a Qml Component from C++?", "body": "<p>Is there some way to create/append a QML Component from C++?</p>\n\n<p>Example, if i have this QML:</p>\n\n<pre><code>Window {\n    id: window\n    objectName: \"windowName\"\n    title: \"windowName\"\n    width: 480\n    height: 800\n\n    Rectangle {\n        id: frmHeader\n        objectName: \"frmHeader\"\n        width: parent.width\n        height: parent.height\n    }\n}\n</code></pre>\n\n<p>Is it possible append a <code>TextInput</code> on Rectangle?</p>\n"}, {"tags": ["c++", "qt", "msbuild", "cl"], "comments": [{"owner": {"reputation": 8601, "user_id": 1485885, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/tdPE1.jpg?s=128&g=1", "display_name": "cbuchart", "link": "https://stackoverflow.com/users/1485885/cbuchart"}, "edited": false, "score": 0, "creation_date": 1526027693, "post_id": 50260328, "comment_id": 87592534, "body": "I&#39;ve found problems with the Qt VS addon relatd to the moc&#39;ing process, usually related to some of them <i>unexpectedly</i> excluded from project. I&#39;ve had to fix them manually (in the project file). You can take a look at the .vcxproj file to check the paths are correct there, maybe an undefined envvar?"}, {"owner": {"reputation": 14960, "user_id": 3214872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/NJBvG.jpg?s=128&g=1", "display_name": "GPhilo", "link": "https://stackoverflow.com/users/3214872/gphilo"}, "reply_to_user": {"reputation": 8601, "user_id": 1485885, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/tdPE1.jpg?s=128&g=1", "display_name": "cbuchart", "link": "https://stackoverflow.com/users/1485885/cbuchart"}, "edited": false, "score": 0, "creation_date": 1526030847, "post_id": 50260328, "comment_id": 87594334, "body": "The problem is unrelated to the vcproj file. Trying to build via command line with a direct <code>cl.exe</code> invocation raises the same error. Also, excluding the <code>moc_*.cpp</code> file from the built sources and forcefully <code>#include</code>-ing at the end of the relative <code>*.cpp</code> (and adding all the necessary include dirs) also causes the same problem. Again, if I move the files to the root directory, everything compiles. So far my best guess is &quot;black magic is at work&quot;."}], "answers": [{"tags": [], "owner": {"reputation": 14960, "user_id": 3214872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/NJBvG.jpg?s=128&g=1", "display_name": "GPhilo", "link": "https://stackoverflow.com/users/3214872/gphilo"}, "is_accepted": false, "score": 5, "last_activity_date": 1526294964, "creation_date": 1526294964, "answer_id": 50328492, "question_id": 50260328, "link": "https://stackoverflow.com/questions/50260328/cannot-open-source-file-error-with-existing-file-and-correct-path/50328492#50328492", "title": "&quot;Cannot open source file&quot; error with existing file and correct path", "body": "<p>I finally solved this rebuilding the directory structure in a new directory. Apparently, using WSL's git to check out repositories under Windows breaks something in the filesystem in a way that is invisible from Explorer or Ubuntu's command line, but that breaks the compiler (and Visual Studio's intellisense).</p>\n\n<p>Checking out the repository with Git for Windows seems to avoid causing the same problem.</p>\n"}], "owner": {"reputation": 14960, "user_id": 3214872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/NJBvG.jpg?s=128&g=1", "display_name": "GPhilo", "link": "https://stackoverflow.com/users/3214872/gphilo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1095, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1526294964, "creation_date": 1525892338, "last_edit_date": 1525892658, "question_id": 50260328, "link": "https://stackoverflow.com/questions/50260328/cannot-open-source-file-error-with-existing-file-and-correct-path", "title": "&quot;Cannot open source file&quot; error with existing file and correct path", "body": "<p>I'm building some custom Qt components as a static library, but I can't get past the compilation phase.\nMy project is structured as follows:</p>\n\n<pre><code>Root:\n - .h and . cpp files of the custom Qt components\n - GeneratedFiles/Debug/ &lt;-- here the MOC compiler puts the generated moc_*.cpp files (\"Debug\" is automatically deducted from the build configuration, so it's Release for release builds)\n</code></pre>\n\n<p>That's a pretty standard folder setup, but for whatever reason the compiler can't find <em>only the moc files</em>. Anything that is in the root folder builds just fine, but the moc files are not found. Please note, <strong>the moc_ files are generated just fine and exist where they're supposed to be, with the correct content</strong>. The problem seems to be in the evaluation of the path <code>GeneratedFiles\\Debug\\moc_whatever.cpp</code>.</p>\n\n<p>Interestingly enough, if I move a moc file (say, <code>moc_example.cpp</code>) in the root folder and manually adapt the call to <code>CL.exe</code> to compile <code>moc_example.cpp</code> instead of <code>GeneratedFiles\\Debug\\moc_example.cpp</code>, the file gets built.</p>\n\n<p>I'm using VS 2017 version 15.7.1, CL is version 19.00.24215.1 for x64 and I'll update the question with any other detail might be useful, just add ask in a comment.</p>\n\n<p>So... Why is the compiler telling me those files do not exist?</p>\n"}, {"tags": ["c++", "matlab", "mex"], "comments": [{"owner": {"reputation": 32458, "user_id": 1485872, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/9XWSA.png?s=128&g=1", "display_name": "Ander Biguri", "link": "https://stackoverflow.com/users/1485872/ander-biguri"}, "edited": false, "score": 0, "creation_date": 1525891902, "post_id": 50260209, "comment_id": 87538396, "body": "Install a supported version of the compiler"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1525892146, "post_id": 50260209, "comment_id": 87538518, "body": "They kindly provide a download link for the version of mingw they support. Note that it is based around gcc 4.9.2, so it&#39;s an old one."}, {"owner": {"reputation": 175, "user_id": 5873767, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/9274962d4c4c6c2a82b06cd89252ef53?s=128&d=identicon&r=PG&f=1", "display_name": "M.X", "link": "https://stackoverflow.com/users/5873767/m-x"}, "edited": false, "score": 0, "creation_date": 1525892880, "post_id": 50260209, "comment_id": 87538847, "body": "This is exactly the problem. I have installed the latest version of the MingWG64. version (5.3.0). I have also checked it with command &quot;mex.getCompilerConfigurations&quot; but I still get the warning that I use old version. I don&#39;t think it is due to the version of the compiler"}, {"owner": {"reputation": 42647, "user_id": 7328782, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/treJu.png?s=128&g=1", "display_name": "Cris Luengo", "link": "https://stackoverflow.com/users/7328782/cris-luengo"}, "edited": false, "score": 0, "creation_date": 1525904990, "post_id": 50260209, "comment_id": 87543955, "body": "Did you install v 5.3.0 of MinGW as <code>C:\\ProgramData\\MATLAB\\SupportPackages\\R2018a\\3P.instrset\\min&zwnj;&#8203;gw_w64.instrset\\bin\\&zwnj;&#8203;gcc</code>? Because that is the <code>gcc</code> that MATLAB is trying to use. What do you get when you execute <code>C:\\ProgramData\\MATLAB\\SupportPackages\\R2018a\\3P.instrset\\min&zwnj;&#8203;gw_w64.instrset\\bin\\&zwnj;&#8203;gcc --version</code>? Did you run <code>mex -setup</code> to select the compiler?"}, {"owner": {"reputation": 175, "user_id": 5873767, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/9274962d4c4c6c2a82b06cd89252ef53?s=128&d=identicon&r=PG&f=1", "display_name": "M.X", "link": "https://stackoverflow.com/users/5873767/m-x"}, "edited": false, "score": 0, "creation_date": 1525979965, "post_id": 50260209, "comment_id": 87576700, "body": "yes. I installed it through matlab&#39;s add-on button. I also ran mex -setup but no success"}], "owner": {"reputation": 175, "user_id": 5873767, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/9274962d4c4c6c2a82b06cd89252ef53?s=128&d=identicon&r=PG&f=1", "display_name": "M.X", "link": "https://stackoverflow.com/users/5873767/m-x"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 585, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1525894778, "creation_date": 1525891804, "last_edit_date": 1525894778, "question_id": 50260209, "link": "https://stackoverflow.com/questions/50260209/compiling-with-mex-fail-in-matlab", "title": "compiling with mex fail in matlab", "body": "<p>I am trying to compile a c-code using mex. For this I am running following two lines of command as described in this link(mathworks.com/help/matlab/ref/mex.html).</p>\n\n<pre><code>copyfile(fullfile(matlabroot,'extern','examples','mex','yprime.c'),'.','f')\nmex yprime.c\n</code></pre>\n\n<p>however, compilation fails due to following error (see attached screenshot)\n<a href=\"https://i.stack.imgur.com/fBoeh.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/fBoeh.png\" alt=\"enter image description here\"></a></p>\n\n<p>Note: I have matlab R2018a version. Also, Prior to compiling I installed MinGW-w64 through matlab's Add-On button. I checked that gcc is available in the path and I compiled another c-code (through windows command line) to make sure it compiles without problem. there was no problem when compiling through command line but compilation with mex in matlab fail.</p>\n\n<p>I would appreciate if you could advise me how to fix this problem.\nI also tried </p>\n\n<pre><code>mex -v yprime.c\n</code></pre>\n\n<p>and here is the debugging output</p>\n\n<pre><code> Verbose mode is on.\n... Looking for compiler 'MinGW64 Compiler (C)' ...\n... Looking for environment variable 'MW_MINGW64_LOC' ...Yes ('C:\\ProgramData\\MATLAB\\SupportPackages\\R2018a\\3P.instrset\\mingw_w64.instrset').\n... Looking for file 'C:\\ProgramData\\MATLAB\\SupportPackages\\R2018a\\3P.instrset\\mingw_w64.instrset\\bin\\gcc.exe' ...Yes.\n... Looking for folder 'C:\\ProgramData\\MATLAB\\SupportPackages\\R2018a\\3P.instrset\\mingw_w64.instrset' ...Yes.\nFound installed compiler 'MinGW64 Compiler (C)'.\nSet PATH = C:\\ProgramData\\MATLAB\\SupportPackages\\R2018a\\3P.instrset\\mingw_w64.instrset\\bin;C:\\Program Files\\MATLAB\\R2018a\\extern\\include\\win64;C:\\Program Files\\MATLAB\\R2018a\\extern\\include;C:\\Program Files\\MATLAB\\R2018a\\simulink\\include;C:\\Program Files\\MATLAB\\R2018a\\lib\\win64;C:\\Program Files (x86)\\Common Files\\Oracle\\Java\\javapath;C:\\Windows\\system32;C:\\Windows;C:\\Windows\\System32\\Wbem;C:\\Windows\\System32\\WindowsPowerShell\\v1.0\\;C:\\Program Files\\iverilog\\bin;C:\\Program Files\\iverilog\\gtkwave\\bin;C:\\Program Files\\Git\\cmd;C:\\Program Files\\TortoiseGit\\bin;C:\\cygwin\\opt\\verilator\\bin\\;C:\\Program Files\\MATLAB\\R2018a\\runtime\\win64;C:\\Program Files\\MATLAB\\R2018a\\bin;C:\\ProgramData\\MATLAB\\SupportPackages\\R2018a\\3P.instrset\\mingw_w64.instrset\\bin;C:\\Users\\Mehdi\\AppData\\Local\\Microsoft\\WindowsApps;\nSet INCLUDE = C:\\ProgramData\\MATLAB\\SupportPackages\\R2018a\\3P.instrset\\mingw_w64.instrset\\include;;C:\\ProgramData\\MATLAB\\SupportPackages\\R2018a\\3P.instrset\\mingw_w64.instrset\\include;;\nSet LIB = C:\\ProgramData\\MATLAB\\SupportPackages\\R2018a\\3P.instrset\\mingw_w64.instrset\\lib;;C:\\ProgramData\\MATLAB\\SupportPackages\\R2018a\\3P.instrset\\mingw_w64.instrset\\lib;;\nSet MW_TARGET_ARCH = win64;win64;\nSet LIBPATH = C:\\Program Files\\MATLAB\\R2018a\\extern\\lib\\win64;C:\\Program Files\\MATLAB\\R2018a\\extern\\lib\\win64;\nOptions file details\n-------------------------------------------------------------------\n    Compiler location: C:\\ProgramData\\MATLAB\\SupportPackages\\R2018a\\3P.instrset\\mingw_w64.instrset\n    Options file: C:\\Users\\Mehdi\\AppData\\Roaming\\MathWorks\\MATLAB\\R2018a\\mex_C_win64.xml\n    CMDLINE2 : C:\\ProgramData\\MATLAB\\SupportPackages\\R2018a\\3P.instrset\\mingw_w64.instrset\\bin\\gcc -m64 -Wl,--no-undefined -shared -static -s -Wl,\"C:\\Program Files\\MATLAB\\R2018a/extern/lib/win64/mingw64/exportsmexfileversion.def\" C:\\Users\\Mehdi\\AppData\\Local\\Temp\\mex_23913243954585_6736\\yprime.obj C:\\Users\\Mehdi\\AppData\\Local\\Temp\\mex_23913243954585_6736\\c_mexapi_version.obj   -L\"C:\\Program Files\\MATLAB\\R2018a\\extern\\lib\\win64\\mingw64\" -llibmx -llibmex -llibmat -lm -llibmwlapack -llibmwblas -o yprime.mexw64\n    CC : C:\\ProgramData\\MATLAB\\SupportPackages\\R2018a\\3P.instrset\\mingw_w64.instrset\\bin\\gcc\n    COMPILER : C:\\ProgramData\\MATLAB\\SupportPackages\\R2018a\\3P.instrset\\mingw_w64.instrset\\bin\\gcc\n    DEFINES : -DMATLAB_DEFAULT_RELEASE=R2017b  -DUSE_MEX_CMD   -m64 -DMATLAB_MEX_FILE \n    MATLABMEX : -DMATLAB_MEX_FILE \n    CFLAGS : -fexceptions -fno-omit-frame-pointer\n    INCLUDE : -I\"C:\\Program Files\\MATLAB\\R2018a/extern/include\" -I\"C:\\Program Files\\MATLAB\\R2018a/simulink/include\" -I\"C:\\Program Files\\MATLAB\\R2018a/extern\\lib\\win64\\mingw64\"\n    COPTIMFLAGS : -O -DNDEBUG\n    CDEBUGFLAGS : -g\n    LD : C:\\ProgramData\\MATLAB\\SupportPackages\\R2018a\\3P.instrset\\mingw_w64.instrset\\bin\\gcc\n    LINKER : C:\\ProgramData\\MATLAB\\SupportPackages\\R2018a\\3P.instrset\\mingw_w64.instrset\\bin\\gcc\n    LDTYPE : -shared -static\n    LDFLAGS : -m64 -Wl,--no-undefined\n    LINKEXPORT : -Wl,\"C:\\Program Files\\MATLAB\\R2018a/extern/lib/win64/mingw64/mexFunction.def\"\n    LINKEXPORTVER : -Wl,\"C:\\Program Files\\MATLAB\\R2018a/extern/lib/win64/mingw64/exportsmexfileversion.def\"\n    LIBLOC : C:\\Program Files\\MATLAB\\R2018a\\extern\\lib\\win64\\mingw64\n    LINKLIBS : -L\"C:\\Program Files\\MATLAB\\R2018a\\extern\\lib\\win64\\mingw64\" -llibmx -llibmex -llibmat -lm -llibmwlapack -llibmwblas\n    LDOPTIMFLAGS : -s\n    LDDEBUGFLAGS : -g\n    OBJEXT : .obj\n    LDEXT : .mexw64\n    SETENV : set COMPILER=C:\\ProgramData\\MATLAB\\SupportPackages\\R2018a\\3P.instrset\\mingw_w64.instrset\\bin\\gcc\n                set CXXCOMPILER=C:\\ProgramData\\MATLAB\\SupportPackages\\R2018a\\3P.instrset\\mingw_w64.instrset\\bin\\g++\n                set COMPFLAGS=-c -fexceptions -fno-omit-frame-pointer -DMATLAB_DEFAULT_RELEASE=R2017b  -DUSE_MEX_CMD   -m64 -DMATLAB_MEX_FILE  -DMATLAB_MEX_FILE \n                set CXXCOMPFLAGS=-c -fexceptions -fno-omit-frame-pointer -std=c++11 -DMATLAB_DEFAULT_RELEASE=R2017b  -DUSE_MEX_CMD   -m64 -DMATLAB_MEX_FILE  -DMATLAB_MEX_FILE \n                set OPTIMFLAGS=-O -DNDEBUG\n                set DEBUGFLAGS=-g\n                set LINKER=C:\\ProgramData\\MATLAB\\SupportPackages\\R2018a\\3P.instrset\\mingw_w64.instrset\\bin\\gcc\n                set CXXLINKER=C:\\ProgramData\\MATLAB\\SupportPackages\\R2018a\\3P.instrset\\mingw_w64.instrset\\bin\\g++\n                set LINKFLAGS=-m64 -Wl,--no-undefined -shared -static -L\"C:\\Program Files\\MATLAB\\R2018a\\extern\\lib\\win64\\mingw64\" -llibmx -llibmex -llibmat -lm -llibmwlapack -llibmwblas -Wl,\"C:\\Program Files\\MATLAB\\R2018a/extern/lib/win64/mingw64/mexFunction.def\"\n                set LINKDEBUGFLAGS=-g\n                set NAME_OUTPUT=-o \"%OUTDIR%%MEX_NAME%%MEX_EXT%\"\n    MINGWROOT : C:\\ProgramData\\MATLAB\\SupportPackages\\R2018a\\3P.instrset\\mingw_w64.instrset\n    MATLABROOT : C:\\Program Files\\MATLAB\\R2018a\n    ARCH : win64\n    SRC : \"C:\\Users\\Mehdi\\Desktop\\New_folder\\testbench\\yprime.c\";\"C:\\Program Files\\MATLAB\\R2018a\\extern\\version\\c_mexapi_version.c\"\n    OBJ : C:\\Users\\Mehdi\\AppData\\Local\\Temp\\mex_23913243954585_6736\\yprime.obj;C:\\Users\\Mehdi\\AppData\\Local\\Temp\\mex_23913243954585_6736\\c_mexapi_version.obj\n    OBJS : C:\\Users\\Mehdi\\AppData\\Local\\Temp\\mex_23913243954585_6736\\yprime.obj C:\\Users\\Mehdi\\AppData\\Local\\Temp\\mex_23913243954585_6736\\c_mexapi_version.obj \n    SRCROOT : C:\\Users\\Mehdi\\Desktop\\New_folder\\testbench\\yprime\n    DEF : C:\\Users\\Mehdi\\AppData\\Local\\Temp\\mex_23913243954585_6736\\yprime.def\n    EXP : \"yprime.exp\"\n    LIB : \"yprime.lib\"\n    EXE : yprime.mexw64\n    ILK : \"yprime.ilk\"\n    MANIFEST : \"yprime.mexw64.manifest\"\n    TEMPNAME : yprime\n    EXEDIR : \n    EXENAME : yprime\n    OPTIM : -O -DNDEBUG\n    LINKOPTIM : -s\n    CMDLINE1_0 : C:\\ProgramData\\MATLAB\\SupportPackages\\R2018a\\3P.instrset\\mingw_w64.instrset\\bin\\gcc -c -DMATLAB_DEFAULT_RELEASE=R2017b  -DUSE_MEX_CMD   -m64 -DMATLAB_MEX_FILE  -I\"C:\\Program Files\\MATLAB\\R2018a/extern/include\" -I\"C:\\Program Files\\MATLAB\\R2018a/simulink/include\" -I\"C:\\Program Files\\MATLAB\\R2018a/extern\\lib\\win64\\mingw64\" -fexceptions -fno-omit-frame-pointer -O -DNDEBUG \"C:\\Users\\Mehdi\\Desktop\\New_folder\\testbench\\yprime.c\" -o C:\\Users\\Mehdi\\AppData\\Local\\Temp\\mex_23913243954585_6736\\yprime.obj\n    CMDLINE1_1 : C:\\ProgramData\\MATLAB\\SupportPackages\\R2018a\\3P.instrset\\mingw_w64.instrset\\bin\\gcc -c -DMATLAB_DEFAULT_RELEASE=R2017b  -DUSE_MEX_CMD   -m64 -DMATLAB_MEX_FILE  -I\"C:\\Program Files\\MATLAB\\R2018a/extern/include\" -I\"C:\\Program Files\\MATLAB\\R2018a/simulink/include\" -I\"C:\\Program Files\\MATLAB\\R2018a/extern\\lib\\win64\\mingw64\" -fexceptions -fno-omit-frame-pointer -O -DNDEBUG \"C:\\Program Files\\MATLAB\\R2018a\\extern\\version\\c_mexapi_version.c\" -o C:\\Users\\Mehdi\\AppData\\Local\\Temp\\mex_23913243954585_6736\\c_mexapi_version.obj\n-------------------------------------------------------------------\nBuilding with 'MinGW64 Compiler (C)'.\nWarning: You are using an unsupported version of MinGW Compiler. To install the supported version of MinGW compiler, see: Install\nMinGW-w64 Compiler.\n For a list of currently supported compilers visit https://www.mathworks.com/support/compilers. \n&gt; In Untitled (line 4) \nC:\\ProgramData\\MATLAB\\SupportPackages\\R2018a\\3P.instrset\\mingw_w64.instrset\\bin\\gcc -c -DMATLAB_DEFAULT_RELEASE=R2017b  -DUSE_MEX_CMD   -m64 -DMATLAB_MEX_FILE  -I\"C:\\Program Files\\MATLAB\\R2018a/extern/include\" -I\"C:\\Program Files\\MATLAB\\R2018a/simulink/include\" -I\"C:\\Program Files\\MATLAB\\R2018a/extern\\lib\\win64\\mingw64\" -fexceptions -fno-omit-frame-pointer -O -DNDEBUG \"C:\\Users\\Mehdi\\Desktop\\New_folder\\testbench\\yprime.c\" -o C:\\Users\\Mehdi\\AppData\\Local\\Temp\\mex_23913243954585_6736\\yprime.obj\nError using mex\nThe command 'C:\\ProgramData\\MATLAB\\SupportPackages\\R2018a\\3P.instrset\\mingw_w64.instrset\\bin\\gcc' exited with a return value '5'\n\nError in Untitled (line 4)\nmex -v yprime.c\n</code></pre>\n"}, {"tags": ["c++", "clang", "clang-static-analyzer"], "comments": [{"owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 0, "creation_date": 1525891842, "post_id": 50260017, "comment_id": 87538365, "body": "So where is <code>registerMyChecker</code> declared?"}, {"owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 0, "creation_date": 1525891915, "post_id": 50260017, "comment_id": 87538403, "body": "(assuming that code part is from MyChecker.cpp) It is only mentioned on the line <code>void ento::registerMyChecker(CheckerManager &amp;mgr)</code> - but that is definition, not declaration, and this is exact compiler complaint."}, {"owner": {"reputation": 4217, "user_id": 9614249, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eJfci.png?s=128&g=1", "display_name": "Increasingly Idiotic", "link": "https://stackoverflow.com/users/9614249/increasingly-idiotic"}, "reply_to_user": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 0, "creation_date": 1525892017, "post_id": 50260017, "comment_id": 87538456, "body": "I am following the instructions for adding a checker <a href=\"https://clang-analyzer.llvm.org/checker_dev_manual.html#registration\" rel=\"nofollow noreferrer\">here</a>. I don&#39;t know where the declaration is."}, {"owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 0, "creation_date": 1525892192, "post_id": 50260017, "comment_id": 87538537, "body": "That tutorial looks like it is missing about 80% of instructions..."}, {"owner": {"reputation": 4217, "user_id": 9614249, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eJfci.png?s=128&g=1", "display_name": "Increasingly Idiotic", "link": "https://stackoverflow.com/users/9614249/increasingly-idiotic"}, "reply_to_user": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 0, "creation_date": 1525892390, "post_id": 50260017, "comment_id": 87538631, "body": "@VTT The other checkers have the same <code>ento::registerXXXChecker</code> declaration with no definition. You can see the other checkers <a href=\"https://github.com/llvm-mirror/clang/tree/master/lib/StaticAnalyzer/Checkers\" rel=\"nofollow noreferrer\">here</a>. I&#39;m not sure how it works but I believe some macro magic is happening somewhere."}, {"owner": {"reputation": 4217, "user_id": 9614249, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eJfci.png?s=128&g=1", "display_name": "Increasingly Idiotic", "link": "https://stackoverflow.com/users/9614249/increasingly-idiotic"}, "reply_to_user": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 0, "creation_date": 1525892458, "post_id": 50260017, "comment_id": 87538666, "body": "@VTT &quot;<i>missing about 80% of instructions</i>&quot;. Welcome to clang documentation"}, {"owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 0, "creation_date": 1525893473, "post_id": 50260017, "comment_id": 87539144, "body": "All those declarations are generated <a href=\"https://github.com/llvm-mirror/clang/blob/master/lib/StaticAnalyzer/Checkers/ClangSACheckers.h\" rel=\"nofollow noreferrer\">here</a>. But since there is no <code>Checkers.inc</code> in the repo I guess it is generated somehow as well..."}, {"owner": {"reputation": 4217, "user_id": 9614249, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eJfci.png?s=128&g=1", "display_name": "Increasingly Idiotic", "link": "https://stackoverflow.com/users/9614249/increasingly-idiotic"}, "reply_to_user": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 0, "creation_date": 1525893621, "post_id": 50260017, "comment_id": 87539204, "body": "@VTT A <a href=\"https://clang.llvm.org/doxygen/CheckerRegistry_8h_source.html#l00090\" rel=\"nofollow noreferrer\"><code>CheckerInfo</code></a> struct gets created for each checker. The struct includes a function pointer to each checker&#39;s register function that gets called <a href=\"https://clang.llvm.org/doxygen/CheckerRegistry_8cpp_source.html#l00116\" rel=\"nofollow noreferrer\">here</a>"}, {"owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 0, "creation_date": 1525893727, "post_id": 50260017, "comment_id": 87539261, "body": "I mean that <code>ento::registerXXXChecker</code> function declarations are generated from <code>#include &quot;clang&#47;StaticAnalyzer&#47;Checkers&#47;Checkers.inc&quot;</code> Which is probably generated from <a href=\"https://github.com/llvm-mirror/clang/blob/master/include/clang/StaticAnalyzer/Checkers/Checkers.td\" rel=\"nofollow noreferrer\">this</a>."}, {"owner": {"reputation": 4217, "user_id": 9614249, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eJfci.png?s=128&g=1", "display_name": "Increasingly Idiotic", "link": "https://stackoverflow.com/users/9614249/increasingly-idiotic"}, "reply_to_user": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 0, "creation_date": 1525894182, "post_id": 50260017, "comment_id": 87539508, "body": "@VTT My build has a <code>Checkers.inc</code> file that has a line for each checker that looks like this:  <code>CHECKER(&quot;security.insecureAPI.gets&quot;, gets, CheckSecuritySyntaxOnly.cpp, &quot;Warn on uses of the &#39;gets&#39; function&quot;, -1, false)</code>.  As far as I can tell, <code>MyChecker</code> was correctly added to <code>Checkers.inc</code>"}, {"owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 1, "creation_date": 1525894410, "post_id": 50260017, "comment_id": 87539618, "body": "Then you will need to include <code>ClangSACheckers.h</code> into your file so that declaration becomes visible."}, {"owner": {"reputation": 4217, "user_id": 9614249, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eJfci.png?s=128&g=1", "display_name": "Increasingly Idiotic", "link": "https://stackoverflow.com/users/9614249/increasingly-idiotic"}, "reply_to_user": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 0, "creation_date": 1525894894, "post_id": 50260017, "comment_id": 87539837, "body": "@VTT That was it! If you want to post that as an answer with a short explanation I will accept it."}], "answers": [{"tags": [], "owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "is_accepted": true, "score": 1, "last_activity_date": 1525896569, "creation_date": 1525896569, "answer_id": 50261279, "question_id": 50260017, "link": "https://stackoverflow.com/questions/50260017/error-registering-clang-checker-out-of-line-definition-of-register/50261279#50261279", "title": "Error registering Clang Checker: &quot;out-of-line-definition of register&quot;", "body": "<p>So clang static checkers registration relies on file containing generated declarations for static checker registration functions - <a href=\"https://github.com/llvm-mirror/clang/blob/master/lib/StaticAnalyzer/Checkers/ClangSACheckers.h\" rel=\"nofollow noreferrer\"><code>ClangSACheckers.h</code></a>. Static checker source file should include that header file and implement registration function <code>void ento::registerMyChecker(CheckerManager &amp;mgr)</code></p>\n"}], "owner": {"reputation": 4217, "user_id": 9614249, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eJfci.png?s=128&g=1", "display_name": "Increasingly Idiotic", "link": "https://stackoverflow.com/users/9614249/increasingly-idiotic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 151, "favorite_count": 0, "accepted_answer_id": 50261279, "answer_count": 1, "score": 2, "last_activity_date": 1525896569, "creation_date": 1525890948, "last_edit_date": 1525892589, "question_id": 50260017, "link": "https://stackoverflow.com/questions/50260017/error-registering-clang-checker-out-of-line-definition-of-register", "title": "Error registering Clang Checker: &quot;out-of-line-definition of register&quot;", "body": "<p>I am trying to add my own checker to <a href=\"https://clang-analyzer.llvm.org/\" rel=\"nofollow noreferrer\">clang's static analyzer</a>. Following the <a href=\"https://clang-analyzer.llvm.org/checker_dev_manual.html\" rel=\"nofollow noreferrer\">instructions for adding a checker to clang</a>, I have done the following:</p>\n\n<p>Written a skeleton checker in <code>MyChecker.cpp</code>:</p>\n\n<pre><code>using namespace clang;\nusing namespace ento;\n\nnamespace {\n    class MyChecker : public Checker&lt;check::PreCall,\n                                     check::PostCall,\n                                     check::Location&gt; {\n    public:\n      void checkPreCall(const CallEvent &amp;Call, CheckerContext &amp;C) const;\n      void checkPostCall(const CallEvent &amp;Call, CheckerContext &amp;C) const;\n    };\n\n}\n\nvoid MyChecker::checkPreCall(const CallEvent &amp;Call, CheckerContext &amp;C) const {}\nvoid MyChecker::checkPostCall(const CallEvent &amp;Call, CheckerContext &amp;C) const {}\n\nvoid ento::registerMyChecker(CheckerManager &amp;mgr) {\n  mgr.registerChecker&lt;MyChecker&gt;();\n}\n</code></pre>\n\n<p>Added the source file to the Checkers <code>CMakeLists.txt</code> file:</p>\n\n<pre><code>...\nMPI-Checker/MPIFunctionClassifier.cpp\nMyChecker.cpp\nNSAutoreleasePoolChecker.cpp\n...\n</code></pre>\n\n<p>And added an entry to <code>Checkers.td</code>:</p>\n\n<pre><code>def MyChecker : Checker&lt;\"MyChecker\"&gt;,\n  HelpText&lt;\"MyChecker\"&gt;,\n  DescFile&lt;\"MyChecker.cpp\"&gt;;\n</code></pre>\n\n<p>When I try and compile clang I get the following error:</p>\n\n<pre><code>MyChecker.cpp:30:12: error: out-of-line definition of 'registerMyChecker' does not match any declaration in namespace 'clang::ento'\nvoid ento::registerMyChecker(CheckerManager &amp;mgr) {\n           ^~~~~~~~~~~~~~~~~\n1 error generated.\nninja: build stopped: subcommand failed.\n</code></pre>\n\n<p>Why am I not able to register MyChecker?</p>\n"}, {"tags": ["c++", "c++11", "templates", "callback", "constexpr"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1525889782, "post_id": 50259695, "comment_id": 87537277, "body": "Why not make <code>min</code> and <code>max</code> function parameters?"}, {"owner": {"reputation": 376, "user_id": 2465202, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3b62cfbb03720763d3dc825efb085217?s=128&d=identicon&r=PG", "display_name": "dfreese", "link": "https://stackoverflow.com/users/2465202/dfreese"}, "edited": false, "score": 1, "creation_date": 1525890298, "post_id": 50259695, "comment_id": 87537547, "body": "I should have clarified that I&#39;m running in a c++11 environment, so the auto return value isn&#39;t an option."}, {"owner": {"reputation": 376, "user_id": 2465202, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3b62cfbb03720763d3dc825efb085217?s=128&d=identicon&r=PG", "display_name": "dfreese", "link": "https://stackoverflow.com/users/2465202/dfreese"}, "edited": false, "score": 1, "creation_date": 1525891042, "post_id": 50259695, "comment_id": 87537918, "body": "And I haven&#39;t made them into function parameters, as the API only takes a callback with a single parameter.  I could just write the lambda when setting the callback, but it&#39;s a pattern that I would like to make concise and clear as it is reused multiple times."}, {"owner": {"reputation": 4732, "user_id": 8477999, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f8172e1919af53269de92316dcf03a03?s=128&d=identicon&r=PG&f=1", "display_name": "Gem Taylor", "link": "https://stackoverflow.com/users/8477999/gem-taylor"}, "edited": false, "score": 0, "creation_date": 1525893053, "post_id": 50259695, "comment_id": 87538931, "body": "Is the issue here specifically that the float type is excluded from function templates? Could you write an alternate spec for floats where the 2 value arguments were doubles?"}, {"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "reply_to_user": {"reputation": 4732, "user_id": 8477999, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f8172e1919af53269de92316dcf03a03?s=128&d=identicon&r=PG&f=1", "display_name": "Gem Taylor", "link": "https://stackoverflow.com/users/8477999/gem-taylor"}, "edited": false, "score": 0, "creation_date": 1525893093, "post_id": 50259695, "comment_id": 87538957, "body": "@GemTaylor <code>double</code>s aren&#39;t allowed as template non-type arguments either."}, {"owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "edited": false, "score": 2, "creation_date": 1525893199, "post_id": 50259695, "comment_id": 87539010, "body": "Are you sure you&#39;re running a C++11 environment? In your example you write a <code>static_assert()</code> without error message that, if I remember correctly, is a C++17 feature."}, {"owner": {"reputation": 4732, "user_id": 8477999, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f8172e1919af53269de92316dcf03a03?s=128&d=identicon&r=PG&f=1", "display_name": "Gem Taylor", "link": "https://stackoverflow.com/users/8477999/gem-taylor"}, "edited": false, "score": 0, "creation_date": 1525893251, "post_id": 50259695, "comment_id": 87539028, "body": "Fair enough. I had a vague memory that specifically floats were excluded from pemplate types. I have in the past resolved this by inventing a fixed-point enum representation, but it really isn&#39;t pretty. Of course in the particular example, they could just as easily be ints!"}, {"owner": {"reputation": 376, "user_id": 2465202, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3b62cfbb03720763d3dc825efb085217?s=128&d=identicon&r=PG", "display_name": "dfreese", "link": "https://stackoverflow.com/users/2465202/dfreese"}, "reply_to_user": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "edited": false, "score": 0, "creation_date": 1525893395, "post_id": 50259695, "comment_id": 87539102, "body": "@max66, correct.  I added the static assert for the example and forgot that.  The actual code doesn&#39;t actually use that."}, {"owner": {"reputation": 4732, "user_id": 8477999, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f8172e1919af53269de92316dcf03a03?s=128&d=identicon&r=PG&f=1", "display_name": "Gem Taylor", "link": "https://stackoverflow.com/users/8477999/gem-taylor"}, "edited": false, "score": 0, "creation_date": 1525893485, "post_id": 50259695, "comment_id": 87539153, "body": "What about user-defined literals? :-)"}], "answers": [{"tags": [], "owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "is_accepted": true, "score": 4, "last_activity_date": 1525906684, "last_edit_date": 1525906684, "creation_date": 1525890977, "answer_id": 50260032, "question_id": 50259695, "link": "https://stackoverflow.com/questions/50259695/template-arguments-of-the-first-template-type/50260032#50260032", "title": "Template arguments of the first template type", "body": "<p>As floats <a href=\"https://stackoverflow.com/questions/2183087/why-cant-i-use-float-value-as-a-template-parameter\">aren't allowed as template non-type parameters,</a> you'd have to take them as actual function arguments rather than template parameters.</p>\n\n<p>If you want to have a function which only takes one argument, you can avoid the cost of the <code>std::function</code> by returning the lambda directly. If we were using C++14, you could just make it return <code>auto</code>:</p>\n\n<pre><code>template&lt;class T&gt;\nauto in_range(T min, T max) { // Note: could be `constexpr` in C++17\n    return [min, max](T val) {\n        return (val &gt;= min &amp;&amp; val &lt;= max);\n    };\n}\n</code></pre>\n\n<p>However, since you are using C++11, you'd have to write out the callable type manually:</p>\n\n<pre><code>template &lt;typename T&gt;\nclass InRange {\npublic:\n    constexpr InRange(T min, T max)\n        : min(std::move(min))\n        , max(std::move(max))\n    {}\n\n    constexpr bool operator()(T const&amp; val) const {\n        return (val &gt;= min &amp;&amp; val &lt;= max);\n    }\n\nprivate:\n    T min;\n    T max;\n};\n\ntemplate&lt;class T&gt;\nconstexpr InRange&lt;T&gt; in_range(T min, T max) {\n    return InRange&lt;T&gt;(std::move(min), std::move(max));\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "reply_to_user": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 1, "creation_date": 1525892721, "post_id": 50260303, "comment_id": 87538781, "body": "@Barry - Reference template <code>float</code>&#39;s are accepted as template parameter where simple <code>float</code> parameters don&#39;t. So this answer the cited question."}, {"owner": {"reputation": 376, "user_id": 2465202, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3b62cfbb03720763d3dc825efb085217?s=128&d=identicon&r=PG", "display_name": "dfreese", "link": "https://stackoverflow.com/users/2465202/dfreese"}, "edited": false, "score": 0, "creation_date": 1525893923, "post_id": 50260303, "comment_id": 87539363, "body": "What makes static global variables allowable, and literals not?  That&#39;s not something I&#39;m familiar with."}, {"owner": {"reputation": 376, "user_id": 2465202, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3b62cfbb03720763d3dc825efb085217?s=128&d=identicon&r=PG", "display_name": "dfreese", "link": "https://stackoverflow.com/users/2465202/dfreese"}, "edited": false, "score": 0, "creation_date": 1525894209, "post_id": 50260303, "comment_id": 87539522, "body": "Ahh, didn&#39;t realize it was a thing with float.  <a href=\"https://stackoverflow.com/questions/2183087/why-cant-i-use-float-value-as-a-template-parameter\" title=\"why cant i use float value as a template parameter\">stackoverflow.com/questions/2183087/&hellip;</a>"}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "reply_to_user": {"reputation": 376, "user_id": 2465202, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3b62cfbb03720763d3dc825efb085217?s=128&d=identicon&r=PG", "display_name": "dfreese", "link": "https://stackoverflow.com/users/2465202/dfreese"}, "edited": false, "score": 0, "creation_date": 1525894264, "post_id": 50260303, "comment_id": 87539550, "body": "@dfreese: It&#39;s that they are references more like. References are really pointers in disguise, which satisfy the integral constraint of template arguments."}, {"owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "reply_to_user": {"reputation": 376, "user_id": 2465202, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3b62cfbb03720763d3dc825efb085217?s=128&d=identicon&r=PG", "display_name": "dfreese", "link": "https://stackoverflow.com/users/2465202/dfreese"}, "edited": false, "score": 0, "creation_date": 1525894486, "post_id": 50260303, "comment_id": 87539651, "body": "@dfreese - exactly: your original example didn&#39;t works because floating points values aren&#39;t permitted templates argument (14.1.7: &quot;A non-type template-parameter shall not be declared to have floating point, class, or void type&quot;). But, in same point of standard, there is an example that show that a pointer or a reference to a <code>double</code> is OK as not-type template argument."}], "tags": [], "owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "is_accepted": false, "score": 2, "last_activity_date": 1525892928, "last_edit_date": 1525892928, "creation_date": 1525892219, "answer_id": 50260303, "question_id": 50259695, "link": "https://stackoverflow.com/questions/50259695/template-arguments-of-the-first-template-type/50260303#50260303", "title": "Template arguments of the first template type", "body": "<blockquote>\n  <p>Is there a way to write the function more in the form of the first function, so I'm not depending on std::function and lambdas generated at runtime?</p>\n</blockquote>\n\n<p>If you can pass static global variables as template argument instead of <code>float</code> literals, you can pass they by reference</p>\n\n<p>Something as follows</p>\n\n<pre><code>#include &lt;iostream&gt;\n\ntemplate &lt;typename T, T const &amp; min, T const &amp; max&gt;\nconstexpr bool in_range (T val)\n { return (val &gt;= min &amp;&amp; val &lt;= max); }\n\nstatic constexpr float  f0 { 0.0f };\nstatic constexpr float  f1 { 1.0f };\n\nint main ()\n {    \n   static_assert(in_range&lt;float, f0, f1&gt;(0.5f), \"!\");\n }\n</code></pre>\n"}], "owner": {"reputation": 376, "user_id": 2465202, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3b62cfbb03720763d3dc825efb085217?s=128&d=identicon&r=PG", "display_name": "dfreese", "link": "https://stackoverflow.com/users/2465202/dfreese"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 162, "favorite_count": 0, "accepted_answer_id": 50260032, "answer_count": 2, "score": 5, "last_activity_date": 1525906684, "creation_date": 1525889644, "last_edit_date": 1525893282, "question_id": 50259695, "link": "https://stackoverflow.com/questions/50259695/template-arguments-of-the-first-template-type", "title": "Template arguments of the first template type", "body": "<p>I am using an an API that takes a function with a single argument as a callback.  The callback takes a single argument of a certain type, and for simplicity, I'll say it returns a <code>bool</code>.  The main thing I was trying to put together was a range checking function. My intuition would be to write something like this:</p>\n\n<pre><code>template&lt;class T, T min, T max&gt;\nconstexpr bool in_range(T val) {\n    return (val &gt;= min &amp;&amp; val &lt;= max);\n}\n\nstatic_assert(in_range&lt;float, 0.0f, 1.0f&gt;(0.5f), \"doesn't work\")\n</code></pre>\n\n<p>However, that doesn't work, so I defaulted to creating a function this way.</p>\n\n<pre><code>template&lt;class T&gt;\nstd::function&lt;bool(T)&gt; in_range(T min, T max) {\n    auto test = [min, max](T val) {\n        return (val &gt;= min &amp;&amp; val &lt;= max);\n    };\n    return test;\n}\n\n\nassert(in_range&lt;float&gt;(0.0f, 1.0f)(0.5f))\n</code></pre>\n\n<p>Is there a way to write the function more in the form of the first function, so I'm not depending on <code>std::function</code> and lambdas generated at runtime?</p>\n"}, {"tags": ["c++", "winapi", "mfc"], "comments": [{"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 1, "creation_date": 1525894049, "post_id": 50259692, "comment_id": 87539439, "body": "The word is crash not crush, FYI"}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 4793061, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b5575f2040f39a6e171ed876e36978c9?s=128&d=identicon&r=PG&f=1", "display_name": "nizzard0094", "link": "https://stackoverflow.com/users/4793061/nizzard0094"}, "edited": false, "score": 0, "creation_date": 1525891996, "post_id": 50260186, "comment_id": 87538442, "body": "thank you i copied the code from this post <a href=\"https://huitey.wordpress.com/2009/09/11/how-to-get-ihtmldocument2-from-a-hwnd/\" rel=\"nofollow noreferrer\">huitey.wordpress.com/2009/09/11/&hellip;</a>"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 21, "user_id": 4793061, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b5575f2040f39a6e171ed876e36978c9?s=128&d=identicon&r=PG&f=1", "display_name": "nizzard0094", "link": "https://stackoverflow.com/users/4793061/nizzard0094"}, "edited": false, "score": 0, "creation_date": 1525899963, "post_id": 50260186, "comment_id": 87542198, "body": "@nizzard0094 obviously, that post is wrong for the same reason (which I have now commented on). When you request an interface via an IID, you must provide a pointer to the same interface type that you are requesting."}], "tags": [], "owner": {"reputation": 94, "user_id": 9431310, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-FSQJVZcWm8E/AAAAAAAAAAI/AAAAAAAAAAA/zks85M1SlKs/photo.jpg?sz=128", "display_name": "ericpat", "link": "https://stackoverflow.com/users/9431310/ericpat"}, "is_accepted": true, "score": 0, "last_activity_date": 1525899599, "last_edit_date": 1525899599, "creation_date": 1525891684, "answer_id": 50260186, "question_id": 50259692, "link": "https://stackoverflow.com/questions/50259692/get-body-from-ihtmldocument2-crash-program/50260186#50260186", "title": "get_body from IHTMLDocument2 crash program", "body": "<p>On this line:</p>\n\n<pre><code>hr = (*pfObjectFromLresult)(lRes, IID_IHTMLDocument, 0, (void**)&amp;spDoc);\n</code></pre>\n\n<p>You are requesting an <code>IHTMLDocument</code>, but you are giving it a pointer to a <code>IHTMLDocument2</code>.</p>\n"}], "owner": {"reputation": 21, "user_id": 4793061, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b5575f2040f39a6e171ed876e36978c9?s=128&d=identicon&r=PG&f=1", "display_name": "nizzard0094", "link": "https://stackoverflow.com/users/4793061/nizzard0094"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 0, "accepted_answer_id": 50260186, "answer_count": 1, "score": -2, "last_activity_date": 1525974596, "creation_date": 1525889634, "last_edit_date": 1525974596, "question_id": 50259692, "link": "https://stackoverflow.com/questions/50259692/get-body-from-ihtmldocument2-crash-program", "title": "get_body from IHTMLDocument2 crash program", "body": "<p>program crash </p>\n\n<blockquote>\n  <p>First-chance exception at 0x00000000 in MFCApplication4.exe: 0xC0000005: Access violation executing location 0x00000000.</p>\n</blockquote>\n\n<pre><code>    HINSTANCE hInst = ::LoadLibrary(_T(\"OLEACC.DLL\"));\n    CoInitialize(NULL);\n\n\n    if (hInst != NULL)\n    {\n        if (parentWindow != NULL)\n        {\n\n\n            if (childWindow)\n            {\n                CComPtr&lt;IHTMLDocument2&gt; spDoc;\n                LRESULT lRes;\n\n                UINT nMsg = ::RegisterWindowMessage(_T(\"WM_HTML_GETOBJECT\"));\n                ::SendMessageTimeout(childWindow, nMsg, 0L, 0L, SMTO_ABORTIFHUNG, 1000, (DWORD*)&amp;lRes);\n\n                LPFNOBJECTFROMLRESULT pfObjectFromLresult = (LPFNOBJECTFROMLRESULT)::GetProcAddress(hInst, LPCSTR(\"ObjectFromLresult\"));\n                if (pfObjectFromLresult != NULL)\n                {\n                    HRESULT hr;\n                    hr = (*pfObjectFromLresult)(lRes, IID_IHTMLDocument, 0, (void**)&amp;spDoc);\n                    if (SUCCEEDED(hr))\n                    {\n                        CComPtr&lt;IHTMLElement&gt; pHTMLElement;\n                        hr = spDoc-&gt;get_body(&amp;pHTMLElement);// &lt;-this line breaks the program \n                        //BSTR bstrText;\n                        //pHTMLElement-&gt;get_innerText(&amp;bstrText);\n\n                        //edit1-&gt;SetWindowTextW(bstrText);\n\n                    }\n                }\n            }\n        } \n        ::FreeLibrary(hInst);\n    } \n    CoUninitialize();\n</code></pre>\n\n<p>i'm executing this code from a button from MFC dialog app just to test the code\nthis is the autos</p>\n\n<ul>\n<li>&amp;pHTMLElement   0x00ddeb10 0x00000000 <br>\nATL::CComPtr *</li>\n<li>hr  S_OK        HRESULT</li>\n<li>pHTMLElement    0x00000000    ATL::CComPtr</li>\n<li>spDoc   0x03303f7c {...}    ATL::CComPtr</li>\n<li>this    0x00ddfbd8 {hWnd=0x001905b6 {unused=??? }}  CMFCApplication4Dlg *</li>\n</ul>\n\n<p>i don't know what is the mistake</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2486888"}, "edited": false, "score": 2, "creation_date": 1525889700, "post_id": 50259683, "comment_id": 87537240, "body": "urrrr... But why?"}], "answers": [{"comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1525891471, "post_id": 50259786, "comment_id": 87538159, "body": "You cannot use <code>shared_from_this</code> in the object&#39;s constructor. See <a href=\"https://stackoverflow.com/questions/31924396/why-shared-from-this-cant-be-used-in-constructor-from-technical-standpoint\">this question</a>."}, {"owner": {"reputation": 161, "user_id": 9438809, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3dc966e6b8c4d481de93300ed1c4f6d2?s=128&d=identicon&r=PG&f=1", "display_name": "George P.", "link": "https://stackoverflow.com/users/9438809/george-p"}, "edited": false, "score": 0, "creation_date": 1525895005, "post_id": 50259786, "comment_id": 87539890, "body": "Unfortunately, I can not get it to work. If I create a shared pointer <code>std::shared_ptr&lt;Subplayer&gt; player2 = std::make_shared&lt;Subplayer&gt;();</code> the polymorphic behavior is correct, but if I try to get a pointer I get an error <code>std::bad_weak_ptr</code>. If I create it this way: <code>std::shared_ptr&lt;Player&gt; player2 = std::make_shared&lt;Subplayer&gt;();</code>, then there is no error, but there is no polymorphic behavior either (the overridden functions for Subplayer(subclass) are not being used). <a href=\"https://stackoverflow.com/questions/50257337/how-to-run-a-function-of-an-actual-object-which-is-stored-in-the-container-usin\" title=\"how to run a function of an actual object which is stored in the container usin\">stackoverflow.com/questions/50257337/&hellip;</a>"}], "tags": [], "owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "is_accepted": false, "score": 1, "last_activity_date": 1525894009, "last_edit_date": 1525894009, "creation_date": 1525890013, "answer_id": 50259786, "question_id": 50259683, "link": "https://stackoverflow.com/questions/50259683/is-it-possible-to-create-a-smart-pointer-to-an-object-and-pass-this-smart-pointe/50259786#50259786", "title": "Is it possible to create a smart pointer to an object and pass this smart pointer as an argument to the constructor?", "body": "<p>If the object needs a shared pointer to itself it should inherit from <a href=\"http://en.cppreference.com/w/cpp/memory/enable_shared_from_this\" rel=\"nofollow noreferrer\">std::enable_shared_from_this</a> and then obtain the shared pointer by calling <a href=\"https://en.cppreference.com/w/cpp/memory/enable_shared_from_this/shared_from_this\" rel=\"nofollow noreferrer\">shared_from_this()</a> in the member function where it needs it.</p>\n"}, {"comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 2, "creation_date": 1525891278, "post_id": 50259797, "comment_id": 87538047, "body": "Beware that <code>shared_from_this()</code> isn&#39;t available in the constructor. This seems like it solves OP&#39;s problem, but the question does mention the constructor a few times."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 1, "creation_date": 1525891392, "post_id": 50259797, "comment_id": 87538123, "body": "Using <code>shared_from_this</code> on an instance that isn&#39;t managed by a <code>shared_ptr</code> is only undefined behavior until c++17. In c++17 and later it throws <a href=\"http://en.cppreference.com/w/cpp/memory/bad_weak_ptr\" rel=\"nofollow noreferrer\"><code>std::bad_weak_ptr</code></a>."}, {"owner": {"reputation": 161, "user_id": 9438809, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3dc966e6b8c4d481de93300ed1c4f6d2?s=128&d=identicon&r=PG&f=1", "display_name": "George P.", "link": "https://stackoverflow.com/users/9438809/george-p"}, "edited": false, "score": 0, "creation_date": 1525894257, "post_id": 50259797, "comment_id": 87539544, "body": "Unfortunately, I can not get it to work. If I create a shared pointer <code>std::shared_ptr&lt;Subplayer&gt; player2 = std::make_shared&lt;Subplayer&gt;();</code> the polymorphic behavior is correct, but if I try to get a pointer I get an error <code>std::bad_weak_ptr</code>. If I create it this way: <code>std::shared_ptr&lt;Player&gt; player2 = std::make_shared&lt;Subplayer&gt;();</code>, then there is no error, but there is no polymorphic behavior either (the overridden functions for Subplayer are not being used, Subplayer is a subclass)"}, {"owner": {"reputation": 1271, "user_id": 9317835, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0ff9e5ffcbb94507cb9517cde337c91?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/9317835/daniel"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1525895946, "post_id": 50259797, "comment_id": 87540329, "body": "@Fran&#231;oisAndrieux you&#39;re right about the constructor and the thrown exception c++17 and after. I was still thinking in c++14 rules :)"}, {"owner": {"reputation": 1271, "user_id": 9317835, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0ff9e5ffcbb94507cb9517cde337c91?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/9317835/daniel"}, "reply_to_user": {"reputation": 161, "user_id": 9438809, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3dc966e6b8c4d481de93300ed1c4f6d2?s=128&d=identicon&r=PG&f=1", "display_name": "George P.", "link": "https://stackoverflow.com/users/9438809/george-p"}, "edited": false, "score": 0, "creation_date": 1525896016, "post_id": 50259797, "comment_id": 87540363, "body": "@GeorgeP. I&#39;m not sure I follow, and I would need to see some code to see what you are doing (possibly in a new question)"}, {"owner": {"reputation": 161, "user_id": 9438809, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3dc966e6b8c4d481de93300ed1c4f6d2?s=128&d=identicon&r=PG&f=1", "display_name": "George P.", "link": "https://stackoverflow.com/users/9438809/george-p"}, "edited": false, "score": 0, "creation_date": 1525896321, "post_id": 50259797, "comment_id": 87540524, "body": "@Daniel, the code and the initial problem is here: <a href=\"https://stackoverflow.com/questions/50257337/how-to-run-a-function-of-an-actual-object-which-is-stored-in-the-container-usin\" title=\"how to run a function of an actual object which is stored in the container usin\">stackoverflow.com/questions/50257337/&hellip;</a>"}], "tags": [], "owner": {"reputation": 1271, "user_id": 9317835, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0ff9e5ffcbb94507cb9517cde337c91?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/9317835/daniel"}, "is_accepted": false, "score": 3, "last_activity_date": 1525896114, "last_edit_date": 1525896114, "creation_date": 1525890042, "answer_id": 50259797, "question_id": 50259683, "link": "https://stackoverflow.com/questions/50259683/is-it-possible-to-create-a-smart-pointer-to-an-object-and-pass-this-smart-pointe/50259797#50259797", "title": "Is it possible to create a smart pointer to an object and pass this smart pointer as an argument to the constructor?", "body": "<p>If you want a class to have a <code>shared_ptr</code> to itself (or, rather, its <code>this</code> pointer), there is an alternative way to accomplish this instead of your proposed solution via <code>std::enable_shared_from_this</code>. For example:</p>\n\n<pre><code>class Player : public std::enable_shared_from_this&lt;Player&gt; {\n\n//... definition\n\n   std::shared_ptr&lt;Player&gt; GetPtr() { return shared_from_this(); }\n};\n</code></pre>\n\n<p>By inheriting this class, it allows you to get a <code>shared_ptr</code> to the <code>this</code> pointer by calling the inherited member function <code>shared_from_this</code> in any of the class' member functions (although this function would not be available in the constructor). One limitation of this is that the object would need to have been stored in a <code>shared_ptr</code> previously or this will caused undefined behavior (before C++17) or throw <code>std::bad_weak_ptr</code> (C++17 and after).</p>\n\n<p>In any case, this will likely give you the functionality you would like and avoid having to pass a <code>shared_ptr</code> to itself via the constructor.</p>\n"}], "owner": {"reputation": 161, "user_id": 9438809, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3dc966e6b8c4d481de93300ed1c4f6d2?s=128&d=identicon&r=PG&f=1", "display_name": "George P.", "link": "https://stackoverflow.com/users/9438809/george-p"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1525896114, "creation_date": 1525889599, "last_edit_date": 1525889921, "question_id": 50259683, "link": "https://stackoverflow.com/questions/50259683/is-it-possible-to-create-a-smart-pointer-to-an-object-and-pass-this-smart-pointe", "title": "Is it possible to create a smart pointer to an object and pass this smart pointer as an argument to the constructor?", "body": "<p>Is it possible to create a smart pointer to an object and pass this smart pointer as an argument to the constructor? I would like to use a smart pointer to the object in the object itself.</p>\n\n<pre><code>auto player1 = std::make_shared&lt;Player&gt;(argument1, ..smartpointer_to_player1..);\n</code></pre>\n"}, {"tags": ["c++", "qt5", "qgraphicsitem", "qpainter", "qpolygon"], "answers": [{"tags": [], "owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "is_accepted": true, "score": 2, "last_activity_date": 1563981660, "last_edit_date": 1563981660, "creation_date": 1525891116, "answer_id": 50260063, "question_id": 50259197, "link": "https://stackoverflow.com/questions/50259197/draw-arc-and-override-boundingrect-shape/50260063#50260063", "title": "Draw arc and override boundingRect(), shape()", "body": "<p>The rectangle that is needed as <code>boundingRect()</code> must have as bottomLeft the center of the circle, I have also eliminated the <code>nPolygonMath</code> and instead I have used shape to return a <code>QPainterPath</code>, and this is used in <code>boundingRect()</code>:</p>\n\n<p><strong>edge.h</strong></p>\n\n<pre><code>#ifndef EDGE_H\n#define EDGE_H\n\n#include &lt;QGraphicsItem&gt;\n\nclass Node;\n\nclass Edge : public QGraphicsItem\n{\npublic:\n    Edge(Node *sourceNode, Node *destNode);\n    virtual ~Edge();\n    const uint id;\n    Node *sourceNode() const;\n    Node *destNode() const;\n\n    void adjust();\n\n    enum { Type = UserType + 2 };\n    int type() const override { return Type; }\n\nprotected:\n    QRectF boundingRect() const override;\n    QPainterPath shape() const override;\n    void paint(QPainter *painter, const QStyleOptionGraphicsItem *option, QWidget *widget) override;\nprivate:\n    Node *source, *dest;\n    QPointF sourcePoint;\n    QPointF destPoint;\n    qreal arrowSize;\n    static uint _idStatic;\n};\n\n#endif // EDGE_H\n</code></pre>\n\n<p><strong>edge.cpp</strong></p>\n\n<pre><code>#include \"edge.h\"\n#include \"node.h\"\n\n#include &lt;qmath.h&gt;\n#include &lt;QPainter&gt;\n#include &lt;QStyleOption&gt;\n\n\nuint Edge::_idStatic = 0;\n\nEdge::Edge(Node *sourceNode, Node *destNode)\n    : id(_idStatic++), arrowSize(15)\n{\n    setFlag(QGraphicsItem::ItemIsSelectable);\n    source = sourceNode;\n    dest = destNode;\n    source-&gt;addEdge(this);\n    if(source != dest)\n        dest-&gt;addEdge(this);\n    adjust();\n}\n\nEdge::~Edge()\n{\n    source-&gt;removeEdge(this);\n    if (source != dest)\n        dest-&gt;removeEdge(this);\n}\n\nNode *Edge::sourceNode() const\n{\n    return source;\n}\n\nNode *Edge::destNode() const\n{\n    return dest;\n}\n\nvoid Edge::adjust()\n{\n    if (!source || !dest)\n        return;\n\n    if(source != dest) {\n        QLineF line(mapFromItem(source, 0, 0), mapFromItem(dest, 0, 0));\n        qreal length = line.length();\n\n        prepareGeometryChange();\n        if (length &gt; qreal(2 * Node::Radius)) {\n            QPointF edgeOffset((line.dx() * Node::Radius) / length, (line.dy() * Node::Radius) / length);\n            sourcePoint = line.p1() + edgeOffset;\n            destPoint = line.p2() - edgeOffset;\n        } else {\n            sourcePoint = destPoint = line.p1();\n        }\n    } else {\n        sourcePoint = mapFromItem(source, 0, Node::Radius);\n        destPoint = mapFromItem(source, Node::Radius, 0);\n        prepareGeometryChange();\n    }\n}\n\nQPainterPath Edge::shape() const {\n    QPainterPath path;\n    if (source != dest) {\n        QLineF line = QLineF(sourcePoint.x(), sourcePoint.y(), destPoint.x(), destPoint.y());\n        qreal radAngle = line.angle() * M_PI / 180;\n        qreal selectionOffset = 3;\n        qreal dx = selectionOffset * sin(radAngle);\n        qreal dy = selectionOffset * cos(radAngle);\n        QPointF offset1 = QPointF(dx, dy);\n        QPointF offset2 = QPointF(-dx, -dy);\n        path.moveTo(line.p1() + offset1);\n        path.lineTo(line.p1() + offset2);\n        path.lineTo( line.p2() + offset2);\n        path.lineTo( line.p2() + offset1);\n    } else {\n        QRectF r= mapRectFromItem(source, source-&gt;boundingRect());\n        r.moveCenter(r.topRight());\n        path.addRect(r);\n    }\n    return path;\n}\n\nQRectF Edge::boundingRect() const\n{\n    if (!source || !dest)\n        return QRectF();\n\n    return shape().boundingRect();\n\n}\n\nvoid Edge::paint(QPainter *painter, const QStyleOptionGraphicsItem *option, QWidget *)\n{\n    if (!source || !dest)\n        return;\n\n    double angle;\n    QPointF peak, destArrowP1, destArrowP2;\n    painter-&gt;setPen(QPen((option-&gt;state &amp; QStyle::State_Selected ? Qt::cyan: Qt::black), 2, Qt::SolidLine, Qt::RoundCap, Qt::RoundJoin));\n    if (source != dest) {\n        QLineF line(sourcePoint, destPoint);\n        if (qFuzzyCompare(line.length(), qreal(0.)))\n            return;\n\n        // Draw the line itself\n        painter-&gt;drawLine(line);\n\n        // Draw the arrows\n        angle = std::atan2(-line.dy(), line.dx());\n        peak = line.p2();\n        destArrowP1 = destPoint + QPointF(sin(angle - M_PI / 1.8) * qMin(arrowSize, line.length()),\n                                                          cos(angle - M_PI / 1.8) * qMin(arrowSize, line.length()));\n        destArrowP2 = destPoint + QPointF(sin(angle - M_PI + M_PI / 1.8) * qMin(arrowSize, line.length()),\n                                                          cos(angle - M_PI + M_PI / 1.8) * qMin(arrowSize, line.length()));\n\n    } else {\n        painter-&gt;drawArc(boundingRect().toRect(),  16 * -90, 16 * 270);\n        angle = 1.06*M_PI;\n        destArrowP1 = destPoint + QPointF(sin(angle - M_PI / 1.8) * arrowSize,\n                                                  cos(angle - M_PI / 1.8) * arrowSize);\n        destArrowP2 = destPoint + QPointF(sin(angle - M_PI + M_PI / 1.8)* arrowSize,\n                                                  cos(angle - M_PI + M_PI / 1.8) * arrowSize);\n        painter-&gt;setBrush((option-&gt;state &amp; QStyle::State_Selected ? Qt::cyan: Qt::black));\n        peak = QPointF(boundingRect().center().x(), boundingRect().bottom());\n    }\n\n    painter-&gt;setBrush((option-&gt;state &amp; QStyle::State_Selected ? Qt::cyan: Qt::black));\n    painter-&gt;drawPolygon(QPolygonF() &lt;&lt; peak &lt;&lt; destArrowP1 &lt;&lt; destArrowP2);\n\n}\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/2qRth.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/2qRth.png\" alt=\"enter image description here\"></a></p>\n\n<p><sub> The complete example can be found in the following <a href=\"https://github.com/eyllanesc/stackoverflow/tree/master/questions/50259197\" rel=\"nofollow noreferrer\">link</a>. </sub></p>\n"}], "owner": {"reputation": 301, "user_id": 6671163, "user_type": "registered", "profile_image": "https://graph.facebook.com/686529364820372/picture?type=large", "display_name": "Kto  To", "link": "https://stackoverflow.com/users/6671163/kto-to"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 522, "favorite_count": 1, "accepted_answer_id": 50260063, "answer_count": 1, "score": 1, "last_activity_date": 1563981660, "creation_date": 1525887711, "last_edit_date": 1525888031, "question_id": 50259197, "link": "https://stackoverflow.com/questions/50259197/draw-arc-and-override-boundingrect-shape", "title": "Draw arc and override boundingRect(), shape()", "body": "<p>I have a <code>class Edge : public QGraphicsItem</code>, which implements drawing arrows from one Node to another (screen below).<br>\nNow I need to add the ability to draw an arrow on yourself (arc).<br>\nI cannot draw an arc, override <code>boundingRect()</code> and <code>shape()</code>.<br>\nCode below where I draw an arrow or an arc. Full project here -> <a href=\"https://github.com/fryn3/elasticnodes\" rel=\"nofollow noreferrer\">github</a>.<br></p>\n\n<pre><code>Edge::Edge(Node *sourceNode, Node *destNode)\n    : id(_idStatic++), arrowSize(15)\n{\n    setFlag(QGraphicsItem::ItemIsSelectable);\n    source = sourceNode;\n    dest = destNode;\n    source-&gt;addEdge(this);\n    if(source != dest)\n        dest-&gt;addEdge(this);\n    adjust();\n}\n\nQPolygonF Edge::nPolygonMath() const {\n    QPolygonF nPolygon;\n    if (source != dest) {\n        QLineF line = QLineF(sourcePoint.x(), sourcePoint.y(), destPoint.x(), destPoint.y());\n        qreal radAngle = line.angle() * M_PI / 180;\n        qreal selectionOffset = 3;\n        qreal dx = selectionOffset * sin(radAngle);\n        qreal dy = selectionOffset * cos(radAngle);\n        QPointF offset1 = QPointF(dx, dy);\n        QPointF offset2 = QPointF(-dx, -dy);\n        nPolygon &lt;&lt; line.p1() + offset1\n                 &lt;&lt; line.p1() + offset2\n                 &lt;&lt; line.p2() + offset2\n                 &lt;&lt; line.p2() + offset1;\n    } else {\n        nPolygon &lt;&lt; mapFromItem(source, -Node::Radius, -Node::Radius)\n                 &lt;&lt; mapFromItem(source, Node::Radius, -Node::Radius)\n                 &lt;&lt; mapFromItem(source, Node::Radius, Node::Radius)\n                 &lt;&lt; mapFromItem(source, -Node::Radius, Node::Radius);\n    }\n    return nPolygon;\n}\n\nQRectF Edge::boundingRect() const\n{\n    if (!source || !dest)\n        return QRectF();\n\n    return nPolygonMath().boundingRect();\n\n}\n\nQPainterPath Edge::shape() const{\n    QPainterPath ret;\n    ret.addPolygon(nPolygonMath());\n    return ret;\n}\n\nvoid Edge::paint(QPainter *painter, const QStyleOptionGraphicsItem *option, QWidget *)\n{\n    if (!source || !dest)\n        return;\n\n    painter-&gt;setPen(QPen((option-&gt;state &amp; QStyle::State_Selected ? Qt::cyan: Qt::black), 2, Qt::SolidLine, Qt::RoundCap, Qt::RoundJoin));\n    if (source != dest) {\n        QLineF line(sourcePoint, destPoint);\n        if (qFuzzyCompare(line.length(), qreal(0.)))\n            return;\n\n        // Draw the line itself\n        painter-&gt;drawLine(line);\n\n        // Draw the arrows\n        double angle = std::atan2(-line.dy(), line.dx());\n\n        QPointF destArrowP1 = destPoint + QPointF(sin(angle - M_PI / 1.8) * qMin(arrowSize, line.length()),\n                                                  cos(angle - M_PI / 1.8) * qMin(arrowSize, line.length()));\n        QPointF destArrowP2 = destPoint + QPointF(sin(angle - M_PI + M_PI / 1.8) * qMin(arrowSize, line.length()),\n                                                  cos(angle - M_PI + M_PI / 1.8) * qMin(arrowSize, line.length()));\n\n        painter-&gt;setBrush((option-&gt;state &amp; QStyle::State_Selected ? Qt::cyan: Qt::black));\n        painter-&gt;drawPolygon(QPolygonF() &lt;&lt; line.p2() &lt;&lt; destArrowP1 &lt;&lt; destArrowP2);\n    } else {\n        painter-&gt;drawArc(mapFromItem(source, Node::Radius, 0).x(),\n                         mapFromItem(source, Node::Radius, 0).y(),\n                         2 * Node::Radius, 2 * Node::Radius, 16 * -90, 16 * 180);\n\n    }\n}\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/rNXR9.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/rNXR9.png\" alt=\"Screen\"></a><br></p>\n"}, {"tags": ["python", "c++", "swig"], "comments": [{"owner": {"reputation": 131156, "user_id": 235698, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KjvlE.png?s=128&g=1", "display_name": "Mark Tolonen", "link": "https://stackoverflow.com/users/235698/mark-tolonen"}, "edited": false, "score": 0, "creation_date": 1526011570, "post_id": 50259152, "comment_id": 87585747, "body": "That&#39;s not real Python code.  It helps to have a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, but in this case, check out SWIG&#39;s <a href=\"http://www.swig.org/Doc3.0/SWIGDocumentation.html#Customization_ownership\" rel=\"nofollow noreferrer\">%newobject</a> directive."}, {"owner": {"reputation": 131156, "user_id": 235698, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KjvlE.png?s=128&g=1", "display_name": "Mark Tolonen", "link": "https://stackoverflow.com/users/235698/mark-tolonen"}, "edited": false, "score": 0, "creation_date": 1526435610, "post_id": 50259152, "comment_id": 87739262, "body": "Very nice MCVE! I&#39;m not sure of the solution however."}, {"owner": {"reputation": 81653, "user_id": 168175, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/qxeUf.jpg?s=128&g=1", "display_name": "Flexo", "link": "https://stackoverflow.com/users/168175/flexo"}, "edited": false, "score": 0, "creation_date": 1527025618, "post_id": 50259152, "comment_id": 87967339, "body": "So you want <code>addObject</code> to steal the Python created <code>MyObject</code> automatically? Do you require that <code>MyContainer</code> objects can be created by both C++ and Python code, or only Python code? What do you want to happen if you use Python to add an instance that came from C++ to begin with?"}, {"owner": {"reputation": 1304, "user_id": 1927753, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/0f9533437be5bdcf493bfbbd101747a2?s=128&d=identicon&r=PG", "display_name": "Totte Karlsson", "link": "https://stackoverflow.com/users/1927753/totte-karlsson"}, "edited": false, "score": 0, "creation_date": 1527026112, "post_id": 50259152, "comment_id": 87967532, "body": "Yeah, exactly, addObject function should set the thisown flag to zero for the object, hidden from the user. The object will be destroyed when the container is destroyed, or decide to destroy its objects. As both, MyObject and MyContainer originate in C++, it should not matter if python is handed a MyContainer from C++, or creates it."}, {"owner": {"reputation": 81653, "user_id": 168175, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/qxeUf.jpg?s=128&g=1", "display_name": "Flexo", "link": "https://stackoverflow.com/users/168175/flexo"}, "edited": false, "score": 0, "creation_date": 1527026250, "post_id": 50259152, "comment_id": 87967574, "body": "Well where I was heading was a) can I just automatically copy construct everything that gets passed to <code>addObject</code>? b) can I make MyContainer hold a reference to the PyObject behind everything that gets added to it. (Both are neat techniques, besides tweaking <code>thisown</code>, so I might try and write all 3 options up)."}, {"owner": {"reputation": 1304, "user_id": 1927753, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/0f9533437be5bdcf493bfbbd101747a2?s=128&d=identicon&r=PG", "display_name": "Totte Karlsson", "link": "https://stackoverflow.com/users/1927753/totte-karlsson"}, "edited": false, "score": 0, "creation_date": 1527026661, "post_id": 50259152, "comment_id": 87967722, "body": "Copy construct might be fine, although it should not be necessary, I believe? The above code don&#39;t copy construct anything, but have the ugly thisown flag :(   The container will be passed to the  C++ side, and when so, need to behave like the same. Not sure what a reference hold means, when passed to C++?"}], "answers": [{"comments": [{"owner": {"reputation": 1304, "user_id": 1927753, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/0f9533437be5bdcf493bfbbd101747a2?s=128&d=identicon&r=PG", "display_name": "Totte Karlsson", "link": "https://stackoverflow.com/users/1927753/totte-karlsson"}, "edited": false, "score": 1, "creation_date": 1526051547, "post_id": 50285009, "comment_id": 87607305, "body": "Actually,this is not what I want. This still require the objects to be freed in Python. In my case, the above Python function is executed from a C++ program, and after it returns, the memory should be managed on the C++ side.  That&#39;s why I want to set the thisown flag for the objects as they are added to the container. For &#39;pure&#39; Python code, I guess your answer is correct, so I upvoted it."}, {"owner": {"reputation": 131156, "user_id": 235698, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KjvlE.png?s=128&g=1", "display_name": "Mark Tolonen", "link": "https://stackoverflow.com/users/235698/mark-tolonen"}, "reply_to_user": {"reputation": 1304, "user_id": 1927753, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/0f9533437be5bdcf493bfbbd101747a2?s=128&d=identicon&r=PG", "display_name": "Totte Karlsson", "link": "https://stackoverflow.com/users/1927753/totte-karlsson"}, "edited": false, "score": 0, "creation_date": 1526052651, "post_id": 50285009, "comment_id": 87608025, "body": "@TotteKarlsson  provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. Your pseudocode doesn&#39;t  makes sense. If your code is properly reference counted the object wouldn&#39;t get freed."}, {"owner": {"reputation": 1304, "user_id": 1927753, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/0f9533437be5bdcf493bfbbd101747a2?s=128&d=identicon&r=PG", "display_name": "Totte Karlsson", "link": "https://stackoverflow.com/users/1927753/totte-karlsson"}, "edited": false, "score": 0, "creation_date": 1526068001, "post_id": 50285009, "comment_id": 87615224, "body": "I added a minimal and verifiable example, as initial code posted did not, indeed, make sense."}], "tags": [], "owner": {"reputation": 131156, "user_id": 235698, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KjvlE.png?s=128&g=1", "display_name": "Mark Tolonen", "link": "https://stackoverflow.com/users/235698/mark-tolonen"}, "is_accepted": false, "score": 2, "last_activity_date": 1526012904, "creation_date": 1526012904, "answer_id": 50285009, "question_id": 50259152, "link": "https://stackoverflow.com/questions/50259152/adding-swig-pythoncode-to-set-thisown-flag-on-python-object/50285009#50285009", "title": "Adding swig pythoncode to set thisown flag on Python object", "body": "<p>You're looking for <a href=\"http://www.swig.org/Doc3.0/SWIGDocumentation.html#Customization_ownership\" rel=\"nofollow noreferrer\">%newobject</a>.  Here's a small example:</p>\n\n<pre><code>%module test\n\n%newobject create;\n%delobject destroy;\n\n%inline %{\n\n#include &lt;iostream&gt;\nstruct Test\n{\n    Test() { std::cout &lt;&lt; \"create\" &lt;&lt; std::endl; }\n    ~Test() { std::cout &lt;&lt; \"destroy\" &lt;&lt; std::endl; }\n};\n\nTest* create() { return new Test; }\nvoid destroy(Test* t) { delete t; }\n\n%}\n</code></pre>\n\n<p>Use:</p>\n\n<pre><code>&gt;&gt;&gt; import test\n&gt;&gt;&gt; t1 = test.create()    # create a test object\ncreate\n&gt;&gt;&gt; t2 = test.Test()      # don't really need a create function :)\ncreate\n&gt;&gt;&gt; t3 = test.create()    # and another.\ncreate\n&gt;&gt;&gt; test.destroy(t2)      # explicitly destroy one\ndestroy\n&gt;&gt;&gt;\n&gt;&gt;&gt;\n&gt;&gt;&gt;\n&gt;&gt;&gt; ^Z                   # exit Python and the other two get destroyed.\n\ndestroy\ndestroy\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1304, "user_id": 1927753, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/0f9533437be5bdcf493bfbbd101747a2?s=128&d=identicon&r=PG", "display_name": "Totte Karlsson", "link": "https://stackoverflow.com/users/1927753/totte-karlsson"}, "edited": false, "score": 0, "creation_date": 1527104214, "post_id": 50482240, "comment_id": 88005155, "body": "Great treatment! Looking forward testing your answer(s)!"}, {"owner": {"reputation": 1304, "user_id": 1927753, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/0f9533437be5bdcf493bfbbd101747a2?s=128&d=identicon&r=PG", "display_name": "Totte Karlsson", "link": "https://stackoverflow.com/users/1927753/totte-karlsson"}, "edited": false, "score": 0, "creation_date": 1527186662, "post_id": 50482240, "comment_id": 88044418, "body": "I could not get the example with args working. Kept getting args is not defined. But by changing the signature of the pythonprepend function to (Myobject* o), and instead of args.thisown = 0, using o.thisown = 0, got the code working nicely!"}, {"owner": {"reputation": 1304, "user_id": 1927753, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/0f9533437be5bdcf493bfbbd101747a2?s=128&d=identicon&r=PG", "display_name": "Totte Karlsson", "link": "https://stackoverflow.com/users/1927753/totte-karlsson"}, "edited": false, "score": 0, "creation_date": 1527198536, "post_id": 50482240, "comment_id": 88049887, "body": "I got the logic working, using pythonprepend, with some extra to the code. 1) added a namespace and 2) using a template class for the object. Both additions works fine! This extra code is added to the example code in the git repository mentioned above."}, {"owner": {"reputation": 81653, "user_id": 168175, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/qxeUf.jpg?s=128&g=1", "display_name": "Flexo", "link": "https://stackoverflow.com/users/168175/flexo"}, "reply_to_user": {"reputation": 1304, "user_id": 1927753, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/0f9533437be5bdcf493bfbbd101747a2?s=128&d=identicon&r=PG", "display_name": "Totte Karlsson", "link": "https://stackoverflow.com/users/1927753/totte-karlsson"}, "edited": false, "score": 0, "creation_date": 1527227363, "post_id": 50482240, "comment_id": 88056621, "body": "Glad you got it working - out of curiosity did you push your updated example? I couldn&#39;t see it in the git repo."}, {"owner": {"reputation": 1304, "user_id": 1927753, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/0f9533437be5bdcf493bfbbd101747a2?s=128&d=identicon&r=PG", "display_name": "Totte Karlsson", "link": "https://stackoverflow.com/users/1927753/totte-karlsson"}, "edited": false, "score": 0, "creation_date": 1527803232, "post_id": 50482240, "comment_id": 88276749, "body": "The updated example should be available now! Thanks again!"}], "tags": [], "owner": {"reputation": 81653, "user_id": 168175, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/qxeUf.jpg?s=128&g=1", "display_name": "Flexo", "link": "https://stackoverflow.com/users/168175/flexo"}, "is_accepted": true, "score": 3, "last_activity_date": 1527061015, "last_edit_date": 1527061015, "creation_date": 1527060209, "answer_id": 50482240, "question_id": 50259152, "link": "https://stackoverflow.com/questions/50259152/adding-swig-pythoncode-to-set-thisown-flag-on-python-object/50482240#50482240", "title": "Adding swig pythoncode to set thisown flag on Python object", "body": "<p>There are a number of different ways you could solve this problem, so I'll try and explain them each in turn, building on a few things along the way. Hopefully this is useful as a view into the options and innards of SWIG even if you only really need the first example.</p>\n\n<h1>Add Python code to modify <code>thisown</code> directly</h1>\n\n<p>The solution most like what you proposed relies on using SWIG's <code>%pythonprepend</code> directive to add some extra Python code. You can target it based on the C++ declaration of the overload you care about, e.g.:</p>\n\n<pre><code>%module freemenot\n%{    #include \"freemenot.h\"    %}\n%include \"std_string.i\"\n\n%pythonprepend MyContainer::addObject(MyObject*) %{\n# mess with thisown\nprint('thisown was: %d' % args[0].thisown)\nargs[0].thisown = 0\n%}\n\n//Expose to Python\n%include \"freemenot.h\"\n</code></pre>\n\n<p>Where the only notable quirk comes from the fact that the arguments are passed in using <code>*args</code> instead of named arguments, so we have to access it via position number. </p>\n\n<p>There are several other places/methods to inject extra Python code (provided you're not using <code>-builtin</code>) in the <a href=\"http://www.swig.org/Doc3.0/Python.html#Python_nn42\" rel=\"nofollow noreferrer\">SWIG Python documentation</a> and monkey patching is always an option too.</p>\n\n<h1>Use Python's C API to tweak <code>thisown</code></h1>\n\n<p>The next possible option here is to use a typemap calls the Python C API to perform the equivalent functionality. In this instance I've matched on the argument type <em>and</em> argument name, but that does mean the typemap here would get applied to all functions which receive a <code>MyObject *</code> named <code>o</code>. (The easiest solution here is to make the names describe the intended semantics in the headers if that would over-match currently which has the side benefit of making IDEs and documentation clearer).</p>\n\n<pre><code>%module freemenot\n%{    #include \"freemenot.h\"    %}\n%include \"std_string.i\"\n\n%typemap(in) MyObject *o {\n    PyObject_SetAttrString($input, \"thisown\", PyInt_FromLong(0)); // As above, but C API\n    $typemap(in,MyObject*); // use the default typemap\n}\n\n//Expose to Python\n%include \"freemenot.h\"\n</code></pre>\n\n<p>The most noteworthy point about this example other than the typemap matching is the use of <code>$typemap</code> here to 'paste' another typemap, specifically the default one for <code>MyObject*</code> into our own typemap. It's worth having a look inside the generated wrapper file at a before/after example of what this ends up looking like.</p>\n\n<h1>Use SWIG runtime to get at <code>SwigPyObject</code> struct's <code>own</code> member directly</h1>\n\n<p>Since we're already writing C++ instead of going via the <code>setattr</code> in the Python code we can adapt this typemap to use more of SWIG's internals and skip a round-trip from C to Python and back to C again.</p>\n\n<p>Internally within SWIG there's a struct that contains the details of each instance, including the ownership, type etc.</p>\n\n<p>We could just cast from <code>PyObject*</code> to <code>SwigPyObject*</code> ourselves directly, but that would require writing error handling/type checking (is this PyObject even a SWIG one?) ourselves and become dependent on the details of the various differing ways SWIG can produce Python interfaces. Instead there's a single function we can call which just handles all that for us, so we can write our typemap like this now:</p>\n\n<pre><code>%module freemenot\n%{    #include \"freemenot.h\"    %}\n%include \"std_string.i\"\n\n%typemap(in) MyObject *o {\n    // TODO: handle NULL pointer still\n    SWIG_Python_GetSwigThis($input)-&gt;own = 0; // Safely cast $input from PyObject* to SwigPyObject*\n    $typemap(in,MyObject*); // use the default typemap\n}\n\n//Expose to Python\n%include \"freemenot.h\"\n</code></pre>\n\n<p>This is just an evolution of the previous answer really, but implemented purely in the SWIG C runtime.</p>\n\n<h1>Copy construct a new instance before adding</h1>\n\n<p>There are other ways to approach this kind of ownership problem. Firstly in this specific instance your <code>MyContainer</code> assumes it can always call <code>delete</code> on every instance it stores (and hence owns in these semantics).</p>\n\n<p>The motivating example for this would be if we were also wrapping a function like this:</p>\n\n<pre><code>MyObject *getInstanceOfThing() {\n    static MyObject a;\n    return &amp;a;\n}\n</code></pre>\n\n<p>Which introduces a problem with our prior solutions - we set <code>thisown</code> to 0, but here it would already have been 0 and so we still can't legally call <code>delete</code> on the pointer when the container is released.</p>\n\n<p>There's a simple way to deal with this that doesn't require knowing about SWIG proxy internals - assuming <code>MyObject</code> is copy constructable then you can simply make a new instance and be sure that no matter where it came from it's going to be legal for the container to delete it. We can do that by adapting our typemap a little:</p>\n\n<pre><code>%module freemenot\n%{    #include \"freemenot.h\"    %}\n%include \"std_string.i\"\n\n%typemap(in) MyObject *o {\n    $typemap(in,MyObject*); // use the default typemap as before\n    $1 = new $*1_type(*$1); // but afterwards call copy-ctor\n}\n\n//Expose to Python\n%include \"freemenot.h\"\n</code></pre>\n\n<p>The point to note here is the use of several more SWIG features that let us know the type of the typemap inputs - <code>$*1_type</code> is the type of the typemap argument dereferenced once. We could have just written <code>MyObject</code> here, as that's what it resolves to but this lets you handle things like templates if your container is really a template, or re-use the typemap in other similar containers with <code>%apply</code>.</p>\n\n<p>The thing to watch for here now is leaks if you had a C++ function that you were deliberately allowing to return an instance without <code>thisown</code> being set on the assumption that the container would take ownership that wouldn't now hold.</p>\n\n<h1>Give the container a chance to manage ownership</h1>\n\n<p>Finally one of the other techniques I like using a lot isn't directly possible here as currently posed, but is worth mentioning for posterity. If you get the chance to store some additional data along side each instance in the container you can call <code>Py_INCREF</code> and retain a reference to the underlying <code>PyObject*</code> no matter where it came from. Provided you then get a callback at destruction time you can also call <code>Py_DECREF</code> and force the Python runtime to keep the object alive as long as the container.</p>\n\n<p>You can also do that even when it's not possible to keep a 1-1 <code>MyObject*</code>/<code>PyObject*</code> pairing alive, by keeping a shadow container alive somewhere also. That can be hard to do unless you're willing to add another object into the container, subclass it or can be very certain that the initial Python instance of the container will always live long enough.</p>\n"}], "owner": {"reputation": 1304, "user_id": 1927753, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/0f9533437be5bdcf493bfbbd101747a2?s=128&d=identicon&r=PG", "display_name": "Totte Karlsson", "link": "https://stackoverflow.com/users/1927753/totte-karlsson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 740, "favorite_count": 1, "accepted_answer_id": 50482240, "answer_count": 2, "score": 3, "last_activity_date": 1527104570, "creation_date": 1525887557, "last_edit_date": 1527104570, "question_id": 50259152, "link": "https://stackoverflow.com/questions/50259152/adding-swig-pythoncode-to-set-thisown-flag-on-python-object", "title": "Adding swig pythoncode to set thisown flag on Python object", "body": "<p>I have a swigged C++ class container, <em>MyContainer</em>, holding objects of type <em>MyObject</em>, also a C++ class.</p>\n\n<p>The following is the C++ header code (<em>freemenot.h</em>)</p>\n\n<pre><code>#ifndef freemenotH\n#define freemenotH\n#include &lt;vector&gt;\n#include &lt;string&gt;\n\nusing std::string;\nclass MyObject\n{\n    public:\n                        MyObject(const string&amp; lbl);\n                        ~MyObject();\n        string          getLabel();\n\n    private:\n        string          label;\n};\n\nclass MyContainer\n{\n    public:\n                    MyContainer();\n                    ~MyContainer();\n        void        addObject(MyObject* o);\n        MyObject*   getObject(unsigned int t);\n        int         getNrOfObjects();\n\n    private:\n        std::vector&lt;MyObject*&gt;   mObjects;\n};\n\n#endif\n</code></pre>\n\n<p>and this is the source (<em>freemenot.cpp</em>)</p>\n\n<pre><code>#include \"freemenot.h\"\n#include &lt;iostream&gt;\nusing namespace std;\n\n/* MyObject source */\nMyObject::MyObject(const string&amp; lbl)\n:\nlabel(lbl)\n{ cout&lt;&lt;\"In object ctor\"&lt;&lt;endl; }\n\nMyObject::~MyObject() { cout&lt;&lt;\"In object dtor\"&lt;&lt;endl; }\nstring MyObject::getLabel() { return label; }\n\n\n/* MyContainer source */\nMyContainer::MyContainer() { cout&lt;&lt;\"In container ctor\"&lt;&lt;endl; }\n\nMyContainer::~MyContainer()\n{\n    cout&lt;&lt;\"In container dtor\"&lt;&lt;endl;\n    for(unsigned int i = 0; i &lt; mObjects.size(); i++)\n    {\n        delete mObjects[i];\n    }\n}\n\nint MyContainer::getNrOfObjects() { return mObjects.size(); }\nvoid MyContainer::addObject(MyObject* o) { mObjects.push_back(o); }\nMyObject* MyContainer::getObject(unsigned int i) { return mObjects[i]; }\n</code></pre>\n\n<p>Observe that the objects are stored as <strong>RAW POINTERS</strong> in the vector. The class is such designed, and the container is thus responsible to free the objects in its destructor, as being done in the destructors for loop.</p>\n\n<p>In C++ code, like below, an object o1 is added to the container c, which is returned to client code</p>\n\n<pre><code>MyContainer* getAContainerWithSomeObjects()\n{\n  MyContainer* c = new MyContainer();\n  MyObject* o1 = new MyObject();\n  c.add(o1);\n  return c;\n}\n</code></pre>\n\n<p>The returned container owns its objects, and are responsible to de-allocate these objects when done. In C++, access to the containers objects is fine after the function exits above.</p>\n\n<p>Exposing the above classes to python, using Swig, will need an interface file. This interface file looks like this</p>\n\n<pre><code>%module freemenot\n%{    #include \"freemenot.h\"    %}\n%include \"std_string.i\"\n//Expose to Python\n%include \"freemenot.h\"\n</code></pre>\n\n<p>And to generate a Python module, using CMake, the following CMake script was used.</p>\n\n<pre><code>cmake_minimum_required(VERSION 2.8)\nproject(freemenot)\n\nfind_package(SWIG REQUIRED)\ninclude(UseSWIG)\nfind_package(PythonInterp)\nfind_package(PythonLibs)\nget_filename_component(PYTHON_LIB_FOLDER ${PYTHON_LIBRARIES} DIRECTORY CACHE)\nmessage(\"Python lib folder: \" ${PYTHON_LIB_FOLDER})\nmessage(\"Python include folder: \" ${PYTHON_INCLUDE_DIRS})\nmessage(\"Python libraries: \" ${PYTHON_LIBRARIES})\n\nset(PyModule \"freemenot\")\ninclude_directories(\n    ${PYTHON_INCLUDE_PATH}\n    ${CMAKE_CURRENT_SOURCE_DIR}\n)\n\nlink_directories( ${PYTHON_LIB_FOLDER})\n\nset(CMAKE_MODULE_LINKER_FLAGS ${CMAKE_CURRENT_SOURCE_DIR}/${PyModule}.def)\n\nset_source_files_properties(${PyModule}.i PROPERTIES CPLUSPLUS ON)\nset_source_files_properties(${PyModule}.i PROPERTIES SWIG_FLAGS \"-threads\")\n\nSWIG_ADD_LIBRARY(${PyModule}\n    MODULE LANGUAGE python\n    SOURCES ${PyModule}.i freemenot.cpp)\n\nSWIG_LINK_LIBRARIES (${PyModule} ${PYTHON_LIB_FOLDER}/Python37_CG.lib    )\n\n# INSTALL PYTHON BINDINGS\n# Get the python site packages directory by invoking python\nexecute_process(COMMAND python -c \"import site; print(site.getsitepackages()[0])\" OUTPUT_VARIABLE PYTHON_SITE_PACKAGES OUTPUT_STRIP_TRAILING_WHITESPACE)\nmessage(\"PYTHON_SITE_PACKAGES = ${PYTHON_SITE_PACKAGES}\")\n\ninstall(\n    TARGETS _${PyModule}\n    DESTINATION ${PYTHON_SITE_PACKAGES})\n\ninstall(\n    FILES         ${CMAKE_CURRENT_BINARY_DIR}/${PyModule}.py\n    DESTINATION   ${PYTHON_SITE_PACKAGES}\n)\n</code></pre>\n\n<p>Generating the make files using CMake, and compiling using borlands bcc32 compiler, a Python module (<em>freemenot</em>) is generated and installed into a python3 valid sitepackages folder.</p>\n\n<p>Then, in Python, the following script can be used to illuminate the problem</p>\n\n<pre><code>import freemenot as fmn\n\ndef getContainer():\n   c = fmn.MyContainer()\n   o1 = fmn.MyObject(\"This is a label\")\n   o1.thisown = 0\n   c.addObject(o1)\n   return c\n\nc = getContainer()\nprint (c.getNrOfObjects())\n\n#if the thisown flag for objects in the getContainer function\n#is equal to 1, the following call return an undefined object\n#If the flag is equal to 0, the following call will return a valid object\na = c.getObject(0)\nprint (a.getLabel())\n</code></pre>\n\n<p>This Python code may look fine, but <em>don't work</em> as expected. Problem is that, when the function getContainer() returns, <em>the memory for object o1 is freed</em>, if the <strong>thisown</strong> flag is not set to zero. Accessing the object after this line, using the returned container will end up in disaster. Observe, there is not nothing wrong with this per se, as this is how pythons garbage collection works. </p>\n\n<p>For the above use case being able to set the python objects <strong>thisown</strong> flag <em>inside</em> the addObject function, would render the C++ objects usable in Python.\nHaving the user to set this flag is no good solution. \nOne could also extend the python class with an \"addObject\" function, and modifying the thisown flag inside this function, and thereby hiding this memory trick from the user.</p>\n\n<p>Question is, how to get Swig to do this, without extending the class? \nI'm looking for using a <strong>typemap</strong>, or perhaps <strong>%pythoncode</strong>, but I seem not able to find a good working example.</p>\n\n<p>The above code is to be used by, and passed to, a C++ program that is invoking the Python interpreter. The C++ program is responsible to manage the memory allocated in the python function, even after PyFinalize().   </p>\n\n<p>The above code can be downloaded from github <a href=\"https://github.com/TotteKarlsson/miniprojects\" rel=\"nofollow noreferrer\">https://github.com/TotteKarlsson/miniprojects</a></p>\n"}, {"tags": ["c++", "vector", "structure"], "comments": [{"owner": {"reputation": 3213, "user_id": 6084430, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/B0TaE.jpg?s=128&g=1", "display_name": "DimChtz", "link": "https://stackoverflow.com/users/6084430/dimchtz"}, "edited": false, "score": 3, "creation_date": 1525886736, "post_id": 50258929, "comment_id": 87535753, "body": "The error is clear. You need to push something. Try <code>s[i].sum.push_back({});</code> instead. Or just <code>s[i].sum.push_back(some_integer_value);</code>"}, {"owner": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "reply_to_user": {"reputation": 3213, "user_id": 6084430, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/B0TaE.jpg?s=128&g=1", "display_name": "DimChtz", "link": "https://stackoverflow.com/users/6084430/dimchtz"}, "edited": false, "score": 0, "creation_date": 1525886792, "post_id": 50258929, "comment_id": 87535784, "body": "@DimChtz Why would you push_back {} and then assign when you can simply push_back the number itself? That seems silly to me but maybe I missed something."}, {"owner": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "reply_to_user": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 0, "creation_date": 1525886836, "post_id": 50258929, "comment_id": 87535803, "body": "@borgleader I think that was just to keep the uniform and general syntax in case OP used <code>language</code> instead of <code>sum</code>."}, {"owner": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "reply_to_user": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "edited": false, "score": 0, "creation_date": 1525886908, "post_id": 50258929, "comment_id": 87535837, "body": "@SombreroChicken Again though, why push back a default object and assign when you can push back the thing youre going to assign. The type doesnt matter."}, {"owner": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "reply_to_user": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 0, "creation_date": 1525886936, "post_id": 50258929, "comment_id": 87535851, "body": "@Borgleader Yeah you&#39;re right, I&#39;m unsure, don&#39;t shoot the messenger !"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1525886977, "post_id": 50258929, "comment_id": 87535871, "body": "Should also be able to do something like <code>s.push_back(lang_accuracy{{numbers go here},{strings go here}});</code> in cases where you already know what&#39;s going in."}, {"owner": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "reply_to_user": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "edited": false, "score": 0, "creation_date": 1525887034, "post_id": 50258929, "comment_id": 87535902, "body": "@SombreroChicken I&#39;m not shooting, I&#39;m asking questions. Shooting comes later ;)"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1525887281, "post_id": 50258929, "comment_id": 87536015, "body": "Resistance is futile, huh?"}], "answers": [{"tags": [], "owner": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "is_accepted": true, "score": 4, "last_activity_date": 1525886777, "creation_date": 1525886777, "answer_id": 50258961, "question_id": 50258929, "link": "https://stackoverflow.com/questions/50258929/how-to-initialize-a-vector-struct-of-vectors/50258961#50258961", "title": "how to initialize a vector struct of vectors?", "body": "<p>The error is quite clear. You're not providing anything to <code>push_back</code> to add to the vector.</p>\n\n<p>For example, to add something to <code>sum</code> you should specify what you want to add in the first place:</p>\n\n<pre><code>s[i].sum.push_back(42); // add 42 to `sum`\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "is_accepted": false, "score": 2, "last_activity_date": 1525887051, "creation_date": 1525887051, "answer_id": 50259017, "question_id": 50258929, "link": "https://stackoverflow.com/questions/50258929/how-to-initialize-a-vector-struct-of-vectors/50259017#50259017", "title": "how to initialize a vector struct of vectors?", "body": "<p>It would be better to use <code>emplace_back</code> supplying value, this way no temporaries will be involved:</p>\n\n<pre><code>s.emplace_back();\nfor (int k = 0;...)\n{  \n    s[i].sum.emplace_back(42);\n}\ns[i].language.emplace_back(\"whatever\");\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 862, "user_id": 890897, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7846a21f6ef5adf0d5bd0375b04428e?s=128&d=identicon&r=PG", "display_name": "tdk001", "link": "https://stackoverflow.com/users/890897/tdk001"}, "is_accepted": false, "score": 0, "last_activity_date": 1525887127, "creation_date": 1525887127, "answer_id": 50259033, "question_id": 50258929, "link": "https://stackoverflow.com/questions/50258929/how-to-initialize-a-vector-struct-of-vectors/50259033#50259033", "title": "how to initialize a vector struct of vectors?", "body": "<p>The function <code>vector&lt;T&gt;::push_back(T)</code> is not primarily for allocating memory, it is for adding an item to the back of the vector (and allocates more memory for that item if necessary).</p>\n\n<p>Instead of your 2-step approach, you need only one:</p>\n\n<pre><code>s[i].sum.push_back(`some integer value`);\n</code></pre>\n"}], "owner": {"reputation": 61, "user_id": 6805186, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TdMoZ.jpg?s=128&g=1", "display_name": "Cabal", "link": "https://stackoverflow.com/users/6805186/cabal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 119, "favorite_count": 0, "accepted_answer_id": 50258961, "answer_count": 3, "score": 2, "last_activity_date": 1525887127, "creation_date": 1525886643, "last_edit_date": 1525887063, "question_id": 50258929, "link": "https://stackoverflow.com/questions/50258929/how-to-initialize-a-vector-struct-of-vectors", "title": "how to initialize a vector struct of vectors?", "body": "<p>so I have this structure:</p>\n\n<pre><code>struct lang_accuracy{ \n    std::vector&lt;int&gt; sum;\n    vector&lt;string&gt; language;\n};\n</code></pre>\n\n<p>and this vector of type structure</p>\n\n<pre><code>vector&lt;lang_accuracy&gt; s;\n\n...\nfor (int i = 0;...)\n{\n  s.push_back(lang_accuracy());\n  for (int k = 0;...)\n  {  \n      s[i].sum.push_back(); // `&lt;- error`\n      s[i].sum[k]=`some integer value`;\n  }\n  s[i].language.push_back(); // `&lt;- error`\n  s[i].language[i] = `some string`;\n}\n</code></pre>\n\n<p>So, since I have 2 vectors in my structure, I must first allocate more memory with <code>push_back</code> in <code>s</code> and than go on element <code>i</code> of vector <code>s</code> and initialize.\nBut <code>sum</code> and <code>language</code> are also vectors, and for some reason, I can't compile the above because I get this :</p>\n\n<blockquote>\n  <p>error C2661: '<code>std::vector&lt;int,std::allocator&lt;_Ty&gt;&gt;::push_back</code>': no overloaded function takes 0 arguments</p>\n</blockquote>\n\n<p>I know in the case of <code>vector&lt;vector&lt;type&gt;&gt;</code> you <code>push_back</code> elements in the first vector and when that is full, you <code>push_back</code> the whole vector into the other.\nHere I can't do that, because <code>sum</code> and <code>lang</code> are not recognized as stand-alones outside the struct.</p>\n\n<p>How should I populate my <code>sum</code> than?</p>\n"}, {"tags": ["c++", "for-loop", "openmp", "nested-loops"], "answers": [{"comments": [{"owner": {"reputation": 530, "user_id": 2394541, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f9b9b9399b329591f7be92da1c5e442?s=128&d=identicon&r=PG", "display_name": "tim18", "link": "https://stackoverflow.com/users/2394541/tim18"}, "edited": false, "score": 0, "creation_date": 1525948429, "post_id": 50260836, "comment_id": 87558935, "body": "Agreeing with the answer, further, inner loop looks like reduction.  If simple enough, promote simd reduction."}], "tags": [], "owner": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "is_accepted": false, "score": 0, "last_activity_date": 1525894531, "creation_date": 1525894531, "answer_id": 50260836, "question_id": 50258426, "link": "https://stackoverflow.com/questions/50258426/proper-openmp-directives-for-nested-for-loop-operating-on-1d-array/50260836#50260836", "title": "Proper openmp directives for nested for loop operating on 1D array", "body": "<p>You don't want the <code>omp parallel</code> in <code>main</code>.  The <code>omp for</code> you use will only create/reuse threads for the following <code>for (int i</code> loop.  For any particular value of <code>i</code>, the <code>j</code> loop will run entirely on one thread.</p>\n\n<p>One other thing that would help a little is to compute your <code>output[i]</code> result into a local variable, then store that into <code>output[i]</code> once you're done with the <code>j</code> loop.</p>\n"}], "owner": {"reputation": 2602, "user_id": 4341534, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/001c92ef74cb305ff8318eebeaa04ab3?s=128&d=identicon&r=PG&f=1", "display_name": "patatahooligan", "link": "https://stackoverflow.com/users/4341534/patatahooligan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 94, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1525894531, "creation_date": 1525884634, "question_id": 50258426, "link": "https://stackoverflow.com/questions/50258426/proper-openmp-directives-for-nested-for-loop-operating-on-1d-array", "title": "Proper openmp directives for nested for loop operating on 1D array", "body": "<p>I need to iterate over an array and assign each element according to a calculation that requires some iteration itself. Removing all unnecessary details the program boils down to something like this.</p>\n\n<pre><code>float output[n];\nconst float input[n] = ...;\n\nfor (int i = 0; i &lt; n; ++i) {\n    output[i] = 0.0f;\n    for (int j = 0; j &lt; n; ++j) {\n        output[i] += some_calculation(i, input[j]);\n    }\n}\n</code></pre>\n\n<p><code>some_calculation</code> does not alter its arguments, nor does it have an internal state so its thread safe. Looking at the loops, I understand that the outer loop is thread-safe because different iterations output to different memory locations (different <code>output[i]</code>) and the shared elements of <code>input</code> are never altered while the loop runs, but the inner loop is not thread safe because it has a race condition on <code>output[i]</code> because it is altered in all iterations.</p>\n\n<p>Consequently, I'd like to spawn threads and get them working for different values of <code>i</code> but the whole iteration over <code>input</code> should be local to each thread so as not to introduce a race condition on <code>output[i]</code>. I think the following achieves this.</p>\n\n<pre><code>std::array&lt;float, n&gt; output;\nconst std::array&lt;float, n&gt; input[n];\n\n#pragma omp parallel for\nfor (int i = 0; i &lt; n; ++i) {\n    output[i] = 0.0f;\n    for (int j = 0; j &lt; n; ++j) {\n        output[i] += some_calculation(i, input[j]);\n    }\n}\n</code></pre>\n\n<p>I'm not sure how this handles the inner loop. Threads working on different <code>i</code>s should be able to run the loop in parallel but I don't understand if I'm allowing them to without another <code>#pragma omp</code> directive. On the other hand I don't want to accidentally allow threads to run for different values of <code>j</code> over the same <code>i</code> because that introduces a race condition. I'm also not sure if I need some extra specification on how the two arrays should be handled.</p>\n\n<p>Lastly, if this code is in a function that is going to get called repeatedly, does it need the <code>parallel</code> directive or can that be called once before my main loop begins like so.</p>\n\n<pre><code>void iterative_step(const std::array&lt;float, n&gt; &amp;input, const std::array&lt;float, n&gt; &amp;output) {\n    // Threads have already been spawned\n    #pragma omp for\n    for (int i = 0; i &lt; n; ++i) {\n        output[i] = 0.0f;\n        for (int j = 0; j &lt; n; ++j) {\n            output[i] += some_calculation(i, input[j]);\n        }\n    }\n\nint main() {\n    ...\n    // spawn threads once, but not for this loop\n    #pragma omp parallel\n    while (...) {\n        iterative_step(input, output);\n    }\n    ...\n}\n</code></pre>\n\n<p>I looked through various other questions but they were about different problems with different race conditions and I'm confused as to how to generalize the answers.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1525884635, "post_id": 50258396, "comment_id": 87534692, "body": "<code>std::cout &lt;&lt; &quot;It works &quot; &lt;&lt; var</code> will work for any built in type without having to specify the type."}, {"owner": {"reputation": 551, "user_id": 7637816, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a9d3498eeac0ab04f4690d271f8e97d?s=128&d=identicon&r=PG&f=1", "display_name": "kiloalphaindia", "link": "https://stackoverflow.com/users/7637816/kiloalphaindia"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1525884855, "post_id": 50258396, "comment_id": 87534800, "body": "@NathanOliver std::cout can do some formatting with iomanip but printf even if not typesafe has some advantages, when it comes to formatting. however I thing boost provides something that fills the gap"}, {"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 0, "creation_date": 1525888666, "post_id": 50258396, "comment_id": 87536745, "body": "Note that you are still mixing abstractions by assuming that <code>int64_t</code> is the same as <code>long long</code>. If it was, we wouldn&#39;t need both. To be on the safe side you would have to use a format macro like <code>PRId64</code> from <a href=\"http://en.cppreference.com/w/cpp/header/cinttypes\" rel=\"nofollow noreferrer\">&lt;cinttypes&gt;</a>."}], "answers": [{"tags": [], "owner": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "is_accepted": false, "score": 1, "last_activity_date": 1525884641, "creation_date": 1525884641, "answer_id": 50258428, "question_id": 50258396, "link": "https://stackoverflow.com/questions/50258396/use-macro-to-define-print-format-arguments/50258428#50258428", "title": "Use macro to define print format arguments", "body": "<pre><code>printf(\"It works\", CUSTOM_FORMAT, var);\n</code></pre>\n\n<p>That comma <code>,</code> makes no sense. Get rid of it:</p>\n\n<pre><code>printf(\"It works \" CUSTOM_FORMAT, var);\n</code></pre>\n\n<hr>\n\n<p>Then again, since you're using C++ why don't you use <code>std::cout</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "is_accepted": true, "score": 3, "last_activity_date": 1525884661, "creation_date": 1525884661, "answer_id": 50258430, "question_id": 50258396, "link": "https://stackoverflow.com/questions/50258396/use-macro-to-define-print-format-arguments/50258430#50258430", "title": "Use macro to define print format arguments", "body": "<p>You can use string literal concatenation. Since</p>\n\n<pre><code>\"STRING1\" \"STRING2\"\n</code></pre>\n\n<p>is equivalent to</p>\n\n<pre><code>\"STRING1STRING2\"\n</code></pre>\n\n<p>You can write:</p>\n\n<pre><code>#define CUSTOM_FORMAT \"%lld\"\nprintf(\"It works \" CUSTOM_FORMAT, var); // &lt;-- no comma ;)\n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 9722285, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09740c1a50c398b77f9adef9514ef294?s=128&d=identicon&r=PG&f=1", "display_name": "Meley", "link": "https://stackoverflow.com/users/9722285/meley"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "accepted_answer_id": 50258430, "answer_count": 2, "score": 1, "last_activity_date": 1525884661, "creation_date": 1525884475, "question_id": 50258396, "link": "https://stackoverflow.com/questions/50258396/use-macro-to-define-print-format-arguments", "title": "Use macro to define print format arguments", "body": "<p>I want to define the format <code>%lld</code> and use intro <code>printf</code> or <code>snprintf</code></p>\n\n<pre><code>#include \"stdafx.h\"\n#include &lt;cstdint&gt;\n\nusing Custom_DataType = int64_t;\n#define CUSTOM_FORMAT \"%lld\"\n\nint main()\n{\n    Custom_DataType  var = 9999999999;\n    printf(\"It works\", CUSTOM_FORMAT, var);\n\n    return 0;\n</code></pre>\n\n<p>}</p>\n\n<p>I want to do something like</p>\n\n<pre><code>printf(\"It works %lld\", var);\n</code></pre>\n\n<p>I want to replace the <code>%lld</code> with <code>CUSTOM_FORMAT</code>\nBut if i do it like my above example don't work</p>\n"}, {"tags": ["android", "c++", "android-ndk"], "comments": [{"owner": {"reputation": 52300, "user_id": 192373, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/83a45711c4c32eeeb3826d279e50f8ab?s=128&d=identicon&r=PG", "display_name": "Alex Cohn", "link": "https://stackoverflow.com/users/192373/alex-cohn"}, "edited": false, "score": 0, "creation_date": 1525903415, "post_id": 50258387, "comment_id": 87543420, "body": "is that on Windows?"}, {"owner": {"reputation": 31, "user_id": 9604892, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-k3hj4pub1P4/AAAAAAAAAAI/AAAAAAAABcs/J69m7xqHevs/photo.jpg?sz=128", "display_name": "Nathan Tripp", "link": "https://stackoverflow.com/users/9604892/nathan-tripp"}, "reply_to_user": {"reputation": 52300, "user_id": 192373, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/83a45711c4c32eeeb3826d279e50f8ab?s=128&d=identicon&r=PG", "display_name": "Alex Cohn", "link": "https://stackoverflow.com/users/192373/alex-cohn"}, "edited": false, "score": 0, "creation_date": 1525903777, "post_id": 50258387, "comment_id": 87543542, "body": "@AlexCohn yeah I&#39;m using Windows 10, but I&#39;m running the app on my Pixel 2"}], "owner": {"reputation": 31, "user_id": 9604892, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-k3hj4pub1P4/AAAAAAAAAAI/AAAAAAAABcs/J69m7xqHevs/photo.jpg?sz=128", "display_name": "Nathan Tripp", "link": "https://stackoverflow.com/users/9604892/nathan-tripp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 112, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1525884449, "creation_date": 1525884449, "question_id": 50258387, "link": "https://stackoverflow.com/questions/50258387/android-ndk-suddenly-very-slow", "title": "Android NDK suddenly very slow", "body": "<p>So I've return some code using android's NDK to parse information from some files and then write it to a database. Just recently I saw an update for the NDK so I updated it to the latest version (from 16 to 17) ever since then a process that used to take 2 seconds at most for 500 files now takes like 45 to 60 seconds. Has anyone every experienced this before and know of a potential fix or maybe what's causing the problem?</p>\n"}, {"tags": ["c++", "c++11", "fibonacci"], "comments": [{"owner": {"reputation": 31483, "user_id": 502381, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/74b99e687909be449e0130a50950eac7?s=128&d=identicon&r=PG&f=1", "display_name": "JJJ", "link": "https://stackoverflow.com/users/502381/jjj"}, "edited": false, "score": 1, "creation_date": 1525884207, "post_id": 50258273, "comment_id": 87534457, "body": "What are those input numbers supposed to represent? What is the program supposed to calculate?"}, {"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 3, "creation_date": 1525885370, "post_id": 50258273, "comment_id": 87535059, "body": "<code>n=2*k+1</code> is not the same as <code>k = (n + 1)&#47;2</code>"}, {"owner": {"reputation": 380, "user_id": 5103292, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/abd326a3fcfc4ec89e564a1c9bbdab5b?s=128&d=identicon&r=PG&f=1", "display_name": "Francisco Geiman", "link": "https://stackoverflow.com/users/5103292/francisco-geiman"}, "edited": false, "score": 1, "creation_date": 1525990597, "post_id": 50258273, "comment_id": 87581064, "body": "This question is about a problem from an online contest, you should at least wait untill the end of the contest. (<a href=\"https://www.codechef.com/MAY18A/problems/DBFB\" rel=\"nofollow noreferrer\">codechef.com/MAY18A/problems/DBFB</a>)"}, {"owner": {"reputation": 45, "user_id": 7936952, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b700b269914fb5143d505513d0079ec0?s=128&d=identicon&r=PG&f=1", "display_name": "slicebattle", "link": "https://stackoverflow.com/users/7936952/slicebattle"}, "edited": false, "score": 0, "creation_date": 1526029096, "post_id": 50258273, "comment_id": 87593297, "body": "no this was an exercise given at my university, but thank you for letting me know where I can find the solution"}], "owner": {"reputation": 45, "user_id": 7936952, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b700b269914fb5143d505513d0079ec0?s=128&d=identicon&r=PG&f=1", "display_name": "slicebattle", "link": "https://stackoverflow.com/users/7936952/slicebattle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 155, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1525884377, "creation_date": 1525884045, "last_edit_date": 1525884377, "question_id": 50258273, "link": "https://stackoverflow.com/questions/50258273/fibonacci-but-with-different-starting-numbers-code-works-in-most-cases-but-no", "title": "Fibonacci, but with different starting numbers. Code works in most cases, but not all", "body": "<p>So I have an exercise of finding a Fibonacci sequence but with different starting number and I can't figure out why my code works most of the time, but not in some cases.</p>\n\n<p>My code is based on a formula (link: <a href=\"https://www.geeksforgeeks.org/program-for-nth-fibonacci-number/\" rel=\"nofollow noreferrer\">https://www.geeksforgeeks.org/program-for-nth-fibonacci-number/</a>)</p>\n\n<pre><code>If n is even then k = n/2:\nF(n) = [2*F(k-1) + F(k)]*F(k)\n\nIf n is odd then k = (n + 1)/2\nF(n) = F(k)*F(k) + F(k-1)*F(k-1)\n</code></pre>\n\n<p>-</p>\n\n<pre><code>#include &lt;map&gt;\n#include &lt;iostream&gt;\n#include &lt;cmath&gt;\nusing namespace std;\n\n#define long long long\nmap&lt;long, long&gt; F;\n\nlong f(long n, long M) {\n    if (F.count(n)) return F[n];\n    long k = n / 2;\n    if (n % 2 == 0) { // n=2*k\n        return F[n] = (f(k, M)*f(k, M) + f(k - 1, M)*f(k - 1, M)) % M;\n    }\n    else { // n=2*k+1\n        return F[n] = (f(k, M)*f(k + 1, M) + f(k - 1, M)*f(k, M)) % M;\n    }\n}\n\nint main() {\n        long a, b, M, n;\n        cin &gt;&gt; a &gt;&gt; b &gt;&gt; n &gt;&gt; M;\n        M = pow(10, M); //modulo\n        F[0] = b;\n        F[1] = a + b;\n        //base cases\n        for (int i = 2; i &lt; 100; i++) F[i] = (F[i - 1] + F[i - 2]) % M;\n\n\n        if (n != 0) cout &lt;&lt; f(n - 1, M) &lt;&lt; endl;\n        else cout &lt;&lt; a&lt;&lt;endl;\n\n        F.clear();\n\n\n}\n</code></pre>\n\n<p>a - is the first number of the sequence.\nb - the second.\nn - which number of the sequence i want to find.\nm - modulo.</p>\n\n<p>I don't understand why it works with cases like</p>\n\n<pre><code>98 25 1000000000 1              //answer is 3\n</code></pre>\n\n<p>but it doesn't work with</p>\n\n<pre><code>34 88 224242 2     //my answer is 12, correct is 92\n</code></pre>\n\n<p>code works fine with regular Fibonacci starting numbers (0 and 1)</p>\n\n<p>I would be really grateful for your help.</p>\n\n<p>Thank you.</p>\n"}, {"tags": ["c++", "visual-studio-2010"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1525883843, "post_id": 50258186, "comment_id": 87534276, "body": "related/dupe: <a href=\"https://stackoverflow.com/questions/7804955/heterogeneous-containers-in-c\" title=\"heterogeneous containers in c\">stackoverflow.com/questions/7804955/&hellip;</a>"}, {"owner": {"reputation": 551, "user_id": 7637816, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a9d3498eeac0ab04f4690d271f8e97d?s=128&d=identicon&r=PG&f=1", "display_name": "kiloalphaindia", "link": "https://stackoverflow.com/users/7637816/kiloalphaindia"}, "edited": false, "score": 0, "creation_date": 1525884005, "post_id": 50258186, "comment_id": 87534364, "body": "You cannot use a type placeholder in a variable definition. You always have to specify a type."}, {"owner": {"reputation": 551, "user_id": 7637816, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a9d3498eeac0ab04f4690d271f8e97d?s=128&d=identicon&r=PG&f=1", "display_name": "kiloalphaindia", "link": "https://stackoverflow.com/users/7637816/kiloalphaindia"}, "edited": false, "score": 0, "creation_date": 1525884085, "post_id": 50258186, "comment_id": 87534397, "body": "Can you give a little more detail about, waht you are trying to achive?"}, {"owner": {"reputation": 1779, "user_id": 1065992, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/sWiDT.png?s=128&g=1", "display_name": "Blood-HaZaRd", "link": "https://stackoverflow.com/users/1065992/blood-hazard"}, "reply_to_user": {"reputation": 551, "user_id": 7637816, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a9d3498eeac0ab04f4690d271f8e97d?s=128&d=identicon&r=PG&f=1", "display_name": "kiloalphaindia", "link": "https://stackoverflow.com/users/7637816/kiloalphaindia"}, "edited": false, "score": 0, "creation_date": 1525884239, "post_id": 50258186, "comment_id": 87534467, "body": "@kiloalphaindia : I want to insert into my Map let&#39;s say strings as first and sometimes integers smetimes strings as seconds"}, {"owner": {"reputation": 551, "user_id": 7637816, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a9d3498eeac0ab04f4690d271f8e97d?s=128&d=identicon&r=PG&f=1", "display_name": "kiloalphaindia", "link": "https://stackoverflow.com/users/7637816/kiloalphaindia"}, "edited": false, "score": 0, "creation_date": 1525884362, "post_id": 50258186, "comment_id": 87534534, "body": "This is probably a dup of :<a href=\"https://stackoverflow.com/q/39512756/7637816\">stackoverflow.com/q/39512756/7637816</a>"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1525885958, "post_id": 50258186, "comment_id": 87535360, "body": "<code>std::map&lt;std::string, std::any&gt;</code> or <code>std::map&lt;std::string, std::variant&lt;..&gt;&gt;</code> ?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1525886081, "post_id": 50258186, "comment_id": 87535430, "body": "Warning: This can turn into a book-keeping nightmare. Be honest with yourself on why you need to have this and exhaust more than a few alternatives before going with it."}], "owner": {"reputation": 1779, "user_id": 1065992, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/sWiDT.png?s=128&g=1", "display_name": "Blood-HaZaRd", "link": "https://stackoverflow.com/users/1065992/blood-hazard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 40, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1525883889, "creation_date": 1525883727, "last_edit_date": 1525883889, "question_id": 50258186, "link": "https://stackoverflow.com/questions/50258186/unknow-size-templated-map", "title": "unknow size templated map", "body": "<p>My problem is easy and I think the solution is obvious but I couldn't figure it out (even after googling).</p>\n\n<p>I want to create a std::map containing many differents objects (int, char, ...) \nso I thought about telmplate. </p>\n\n<pre><code>#include \"stdafx.h\"\n#include&lt;iostream&gt;\n#include &lt;map&gt;\n\n using namespace std;\n\n\n template&lt;typename T&gt;\n std::map &lt;std::string, T&gt; myMap;\n...\n</code></pre>\n\n<p>When I compile I have this error </p>\n\n<pre><code>error C2133: 'myMap' : unknown size\nerror C2998: std::map&lt;std::string,T&gt; myMap' : cannot be a template definition\n</code></pre>\n\n<p>So how to resolve that !! </p>\n\n<p>Thank you</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 869, "user_id": 698978, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/9AfjX.jpg?s=128&g=1", "display_name": "Joe Schrag", "link": "https://stackoverflow.com/users/698978/joe-schrag"}, "edited": false, "score": 0, "creation_date": 1525883733, "post_id": 50258149, "comment_id": 87534212, "body": "Downvoters care to comment?"}, {"owner": {"reputation": 1791, "user_id": 794606, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9a1d5c337bdddae373bbdcb92fdb7077?s=128&d=identicon&r=PG", "display_name": "Jacek Cz", "link": "https://stackoverflow.com/users/794606/jacek-cz"}, "edited": false, "score": 0, "creation_date": 1525883750, "post_id": 50258149, "comment_id": 87534229, "body": "&quot;I have been trying &quot; so show Your attempts. CODE is international language for programmers"}, {"owner": {"reputation": 49661, "user_id": 781754, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/4ee1072483e3ab3c7302820d04935328?s=128&d=identicon&r=PG", "display_name": "Daniel Mann", "link": "https://stackoverflow.com/users/781754/daniel-mann"}, "edited": false, "score": 0, "creation_date": 1525883828, "post_id": 50258149, "comment_id": 87534263, "body": "Put the error codes in a hashset with the error code as the key. You can&#39;t have identical keys. This will give you a runtime error. Then write some unit tests to validate that there are no runtime errors. Fail your builds when unit tests fail."}, {"owner": {"reputation": 869, "user_id": 698978, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/9AfjX.jpg?s=128&g=1", "display_name": "Joe Schrag", "link": "https://stackoverflow.com/users/698978/joe-schrag"}, "reply_to_user": {"reputation": 1791, "user_id": 794606, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9a1d5c337bdddae373bbdcb92fdb7077?s=128&d=identicon&r=PG", "display_name": "Jacek Cz", "link": "https://stackoverflow.com/users/794606/jacek-cz"}, "edited": false, "score": 0, "creation_date": 1525883900, "post_id": 50258149, "comment_id": 87534305, "body": "@JacekCz As stated in the question, I have looked at a number of C++ logging libraries.  None seem to have this feature.  I have searched StackOverflow, which gave me the guid idea, but I have not found a mechanism to prevent copy/paste.  Other efforts have included Googling for other ideas.  Something I&#39;m missing?"}, {"owner": {"reputation": 1791, "user_id": 794606, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9a1d5c337bdddae373bbdcb92fdb7077?s=128&d=identicon&r=PG", "display_name": "Jacek Cz", "link": "https://stackoverflow.com/users/794606/jacek-cz"}, "edited": false, "score": 0, "creation_date": 1525883963, "post_id": 50258149, "comment_id": 87534343, "body": "agree, C# has totally differet object structure, identyfication comparing to C++. Many language idioms are not portable"}, {"owner": {"reputation": 869, "user_id": 698978, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/9AfjX.jpg?s=128&g=1", "display_name": "Joe Schrag", "link": "https://stackoverflow.com/users/698978/joe-schrag"}, "reply_to_user": {"reputation": 49661, "user_id": 781754, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/4ee1072483e3ab3c7302820d04935328?s=128&d=identicon&r=PG", "display_name": "Daniel Mann", "link": "https://stackoverflow.com/users/781754/daniel-mann"}, "edited": false, "score": 0, "creation_date": 1525883993, "post_id": 50258149, "comment_id": 87534358, "body": "@Daniel Mann That is the &quot;write it myself&quot; scenario.  Certainly an option, but I also want this control across modules so it would have to run from my build server."}, {"owner": {"reputation": 49661, "user_id": 781754, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/4ee1072483e3ab3c7302820d04935328?s=128&d=identicon&r=PG", "display_name": "Daniel Mann", "link": "https://stackoverflow.com/users/781754/daniel-mann"}, "edited": false, "score": 0, "creation_date": 1525884121, "post_id": 50258149, "comment_id": 87534420, "body": "@JosephSchrag My suggestion uses tools and techniques that are readily available in both languages to solve the problem. This does not require building additional external tooling."}, {"owner": {"reputation": 869, "user_id": 698978, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/9AfjX.jpg?s=128&g=1", "display_name": "Joe Schrag", "link": "https://stackoverflow.com/users/698978/joe-schrag"}, "reply_to_user": {"reputation": 49661, "user_id": 781754, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/4ee1072483e3ab3c7302820d04935328?s=128&d=identicon&r=PG", "display_name": "Daniel Mann", "link": "https://stackoverflow.com/users/781754/daniel-mann"}, "edited": false, "score": 0, "creation_date": 1525884424, "post_id": 50258149, "comment_id": 87534570, "body": "@DanielMann The scenario I am getting at is the developer copying the logging line itself ...Log(&lt;Guid&gt;, logMessage); ... I can pull that guid from a hashset, but it doesn&#39;t prevent the line from being copied.  I can write a tool as described before, but it would be a script running from Jenkins because this needs to cover dozens of separate projects.  I don&#39;t see how language features are saving me here."}, {"owner": {"reputation": 32638, "user_id": 2052655, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1mWqp.jpg?s=128&g=1", "display_name": "Rufus L", "link": "https://stackoverflow.com/users/2052655/rufus-l"}, "edited": false, "score": 0, "creation_date": 1525884566, "post_id": 50258149, "comment_id": 87534652, "body": "I didn&#39;t down-vote, but given the 3 close votes for &quot;unclear what you&#39;re asking&quot;, I&#39;d guess &quot;it&#39;s unclear&quot; would be the downvote reason as well. Perhaps a better definition of exactly what you mean by &quot;enforce unique error codes&quot; would be helpful. My first thought when reading your question was, if all error codes are unique why do you need them at all? Surely some failures are due to the same issue, and would have the same error code as some other failure?"}, {"owner": {"reputation": 49661, "user_id": 781754, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/4ee1072483e3ab3c7302820d04935328?s=128&d=identicon&r=PG", "display_name": "Daniel Mann", "link": "https://stackoverflow.com/users/781754/daniel-mann"}, "edited": false, "score": 0, "creation_date": 1525884800, "post_id": 50258149, "comment_id": 87534765, "body": "@JosephSchrag I&#39;m suggesting that you centralize your error codes and messages in a data structure that enforces uniqueness. Log statements would take a guid and retrieve the appropriate error message from the hash collection. Unit tests against the library containing the hash collection will ensure that the application doesn&#39;t suffer from runtime errors as a result of key collision."}, {"owner": {"reputation": 2811, "user_id": 8417363, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/hO0vR.png?s=128&g=1", "display_name": "Jimenemex", "link": "https://stackoverflow.com/users/8417363/jimenemex"}, "edited": false, "score": 0, "creation_date": 1525885194, "post_id": 50258149, "comment_id": 87534971, "body": "You are bound to have duplicate errors. What if the same <code>IndexOutOfBounds</code> or <code>YouCantDoThisHere</code> exception occurs in two different places? Not all errors will be unique. (Yes the place they happen are unique, but imagine how long the list would be to keep track of all the unique places an error can occur)."}, {"owner": {"reputation": 869, "user_id": 698978, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/9AfjX.jpg?s=128&g=1", "display_name": "Joe Schrag", "link": "https://stackoverflow.com/users/698978/joe-schrag"}, "reply_to_user": {"reputation": 32638, "user_id": 2052655, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1mWqp.jpg?s=128&g=1", "display_name": "Rufus L", "link": "https://stackoverflow.com/users/2052655/rufus-l"}, "edited": false, "score": 0, "creation_date": 1525885222, "post_id": 50258149, "comment_id": 87534986, "body": "@RufusL I&#39;ve edited the question.  Is it any clearer now?"}, {"owner": {"reputation": 869, "user_id": 698978, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/9AfjX.jpg?s=128&g=1", "display_name": "Joe Schrag", "link": "https://stackoverflow.com/users/698978/joe-schrag"}, "reply_to_user": {"reputation": 49661, "user_id": 781754, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/4ee1072483e3ab3c7302820d04935328?s=128&d=identicon&r=PG", "display_name": "Daniel Mann", "link": "https://stackoverflow.com/users/781754/daniel-mann"}, "edited": false, "score": 0, "creation_date": 1525885229, "post_id": 50258149, "comment_id": 87534989, "body": "@DanielMann I understand the approach you are suggesting, but I don&#39;t understand how it prevents inline log statements from using the same guid to lookup."}, {"owner": {"reputation": 869, "user_id": 698978, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/9AfjX.jpg?s=128&g=1", "display_name": "Joe Schrag", "link": "https://stackoverflow.com/users/698978/joe-schrag"}, "reply_to_user": {"reputation": 2811, "user_id": 8417363, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/hO0vR.png?s=128&g=1", "display_name": "Jimenemex", "link": "https://stackoverflow.com/users/8417363/jimenemex"}, "edited": false, "score": 0, "creation_date": 1525885402, "post_id": 50258149, "comment_id": 87535074, "body": "@Jimenemex That is the crux of the problem :).  I am looking for a way to make the error unique to the line where it occurred."}, {"owner": {"reputation": 32638, "user_id": 2052655, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1mWqp.jpg?s=128&g=1", "display_name": "Rufus L", "link": "https://stackoverflow.com/users/2052655/rufus-l"}, "edited": false, "score": 0, "creation_date": 1525887347, "post_id": 50258149, "comment_id": 87536047, "body": "Only that you want the line number where the error occurred? Is that what you want as part of the logging - the stack trace info? Why don&#39;t you just log that as well instead of trying to enforce unique ids?"}, {"owner": {"reputation": 869, "user_id": 698978, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/9AfjX.jpg?s=128&g=1", "display_name": "Joe Schrag", "link": "https://stackoverflow.com/users/698978/joe-schrag"}, "edited": false, "score": 0, "creation_date": 1525896653, "post_id": 50258149, "comment_id": 87540669, "body": "Ok, this has been put on hold as unclear.  I&#39;ve made a few edits in an attempt to clarify.  Can someone tell me which portions are still unclear?"}, {"owner": {"reputation": 23462, "user_id": 3077495, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZE6fb.png?s=128&g=1", "display_name": "Cindy Meister", "link": "https://stackoverflow.com/users/3077495/cindy-meister"}, "edited": false, "score": 0, "creation_date": 1525932214, "post_id": 50258149, "comment_id": 87550749, "body": "I&#39;m looking at this in the Re-open queue and I&#39;m seeing a &quot;tool request&quot;, which would make the question off-topic, even if it is now clear (and an interesting question). FWIW someone commented about using the identifier as a unique key in a list (or database, or whatever). Seems to me that would be the best approach. As far as finding an existing tool - that is off-topic for the site. Of course, if someone knows of one and posts in Comments before this is removed from the site, you have what you&#39;re lookng for..."}, {"owner": {"reputation": 869, "user_id": 698978, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/9AfjX.jpg?s=128&g=1", "display_name": "Joe Schrag", "link": "https://stackoverflow.com/users/698978/joe-schrag"}, "reply_to_user": {"reputation": 23462, "user_id": 3077495, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZE6fb.png?s=128&g=1", "display_name": "Cindy Meister", "link": "https://stackoverflow.com/users/3077495/cindy-meister"}, "edited": false, "score": 0, "creation_date": 1525966802, "post_id": 50258149, "comment_id": 87569820, "body": "@CindyMeister Thanks for taking a look! I&#39;ve reworded the question to eliminate the tool request.  As far as storing the unique keys in a list, I don&#39;t think that solves the issue.  What is to prevent two logging statements from using the same unique key?  The key would be unique in the list, but two logging statements could reference it."}, {"owner": {"reputation": 869, "user_id": 698978, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/9AfjX.jpg?s=128&g=1", "display_name": "Joe Schrag", "link": "https://stackoverflow.com/users/698978/joe-schrag"}, "reply_to_user": {"reputation": 1791, "user_id": 794606, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9a1d5c337bdddae373bbdcb92fdb7077?s=128&d=identicon&r=PG", "display_name": "Jacek Cz", "link": "https://stackoverflow.com/users/794606/jacek-cz"}, "edited": false, "score": 0, "creation_date": 1525966954, "post_id": 50258149, "comment_id": 87569912, "body": "@JacekCz I&#39;ve added a list of options already considered to the question.  No code has been written because I have not found anything I think would work on a conceptual level.  No point in writing code."}, {"owner": {"reputation": 23462, "user_id": 3077495, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZE6fb.png?s=128&g=1", "display_name": "Cindy Meister", "link": "https://stackoverflow.com/users/3077495/cindy-meister"}, "edited": false, "score": 0, "creation_date": 1525968261, "post_id": 50258149, "comment_id": 87570626, "body": "@JosephSchrag I&#39;m more database-oriented, understand, so when I think about something like this, I set it up so that the <i>database</i> doesn&#39;t allow a duplicate in that field. If people are adding something to a list or log or whatever, using your code, can&#39;t your code check whether the entry already exists in the list and not allow adding it?"}, {"owner": {"reputation": 869, "user_id": 698978, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/9AfjX.jpg?s=128&g=1", "display_name": "Joe Schrag", "link": "https://stackoverflow.com/users/698978/joe-schrag"}, "reply_to_user": {"reputation": 23462, "user_id": 3077495, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZE6fb.png?s=128&g=1", "display_name": "Cindy Meister", "link": "https://stackoverflow.com/users/3077495/cindy-meister"}, "edited": false, "score": 0, "creation_date": 1525973967, "post_id": 50258149, "comment_id": 87573696, "body": "@CindyMeister I see.  No, in this case, the code isn&#39;t adding the unique id to the collection, it would only be referencing (a lookup).  So, I&#39;m looking for a compile-time means of preventing lookups from two different locations in the code.  Even in a case where the log statements were adding to unique ids to a collection, I would need some sort of test which hit every log statement in the program.  This would not be practical and would not catch errors until runtime."}], "answers": [{"comments": [{"owner": {"reputation": 869, "user_id": 698978, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/9AfjX.jpg?s=128&g=1", "display_name": "Joe Schrag", "link": "https://stackoverflow.com/users/698978/joe-schrag"}, "edited": false, "score": 0, "creation_date": 1525896457, "post_id": 50259556, "comment_id": 87540580, "body": "I don&#39;t want to do this for security reasons.  I don&#39;t think publishing the internal structure of your code is a great idea."}, {"owner": {"reputation": 32638, "user_id": 2052655, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1mWqp.jpg?s=128&g=1", "display_name": "Rufus L", "link": "https://stackoverflow.com/users/2052655/rufus-l"}, "reply_to_user": {"reputation": 869, "user_id": 698978, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/9AfjX.jpg?s=128&g=1", "display_name": "Joe Schrag", "link": "https://stackoverflow.com/users/698978/joe-schrag"}, "edited": false, "score": 1, "creation_date": 1525900989, "post_id": 50259556, "comment_id": 87542613, "body": "Ok, well this shows how to get the line number, and you don&#39;t need to use the method signature, so if there is some way to map the code files to numbers (like a dictionary where Program.cs = 0001), you could do something like &quot;0001.81&quot; which would mean line 81 in Program.cs. Good luck!"}, {"owner": {"reputation": 869, "user_id": 698978, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/9AfjX.jpg?s=128&g=1", "display_name": "Joe Schrag", "link": "https://stackoverflow.com/users/698978/joe-schrag"}, "edited": false, "score": 0, "creation_date": 1525901674, "post_id": 50259556, "comment_id": 87542862, "body": "Well, that is creative.  Downside is maintaining a list of what files match which numbers, but it is a possibility I hadn&#39;t considered."}, {"owner": {"reputation": 32638, "user_id": 2052655, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1mWqp.jpg?s=128&g=1", "display_name": "Rufus L", "link": "https://stackoverflow.com/users/2052655/rufus-l"}, "reply_to_user": {"reputation": 869, "user_id": 698978, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/9AfjX.jpg?s=128&g=1", "display_name": "Joe Schrag", "link": "https://stackoverflow.com/users/698978/joe-schrag"}, "edited": false, "score": 1, "creation_date": 1525902050, "post_id": 50259556, "comment_id": 87542985, "body": "Yeah, I first thought maybe <code>&quot;Program.cs&quot;.GetHashCode()</code> would work, but hash codes are not reliably unique and can change (for the same string) between framework versions. Also consider that, without stack trace information, you won&#39;t know which methods called the method that failed. So having a unique error per line may not be as helpful as we would like. You might want to take a look at <a href=\"https://softwareengineering.stackexchange.com/questions/364918/making-code-findable-by-using-globally-unique-message-ids\">this question and answers</a> if you haven&#39;t already."}], "tags": [], "owner": {"reputation": 32638, "user_id": 2052655, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1mWqp.jpg?s=128&g=1", "display_name": "Rufus L", "link": "https://stackoverflow.com/users/2052655/rufus-l"}, "is_accepted": false, "score": 1, "last_activity_date": 1525889126, "creation_date": 1525889126, "answer_id": 50259556, "question_id": 50258149, "link": "https://stackoverflow.com/questions/50258149/how-to-enforce-unique-error-messages/50259556#50259556", "title": "How to enforce unique error messages", "body": "<p>I don't know if this is really what you're looking for, but you can include the file, method, line number (and other things) in your log message without needing a unique number that you would later search the source code for if you make use of the <code>System.Diagnostics.StackTrace</code> class. This way, even if there's a copy/paste violation, you still know exactly where the call to <code>Log</code> came from.</p>\n\n<p>Here's a simplified example that returns the file name, method signature, and line number of a stack trace item. Note that this code finds the stack trace item for a call to the \"Log\" method and returns the next one. That will be more clear shortly:</p>\n\n<pre><code>using System.Diagnostics;  // Needed for the StackTrace class\n\nprivate static string GetStackTraceInfo()\n{\n    var stackTrace = new StackTrace(true).GetFrames();\n\n    // Find the item just after the call to teh 'Log' method:\n    var item = stackTrace?\n        .SkipWhile(st =&gt; !st.GetMethod().Name.Equals(\"Log\"))\n        .Skip(1)\n        .FirstOrDefault();\n\n    return item == null\n        ? string.Empty\n        : string.Format(\"{0} =&gt; {1}, line #{2}\", Path.GetFileName(item.GetFileName()),\n            item.GetMethod(), item.GetFileLineNumber());\n}\n</code></pre>\n\n<p>Here's the <code>Log</code> method that enforces the stack trace info added to a log (and this is the method name that we were searching for in the code above):</p>\n\n<pre><code>private static void Log(int id, string message)\n{\n    Console.WriteLine($\"Error #{id}: {message} ({GetStackTraceInfo()})\");\n}\n</code></pre>\n\n<p>And an example usage:</p>\n\n<pre><code>private static void Main()\n{\n    DoSomething();\n    DoSomethingElse();\n\n    GetKeyFromUser(\"\\nDone! Press any key to exit...\");\n}\n\nprivate static void DoSomething()\n{\n    Log(1000, \"I copied/pasted this error message from somewhere!\");\n}\n\nprivate static void DoSomethingElse()\n{\n    Log(1000, \"I copied/pasted this error message from somewhere!\");\n}\n</code></pre>\n\n<p><strong>Output</strong></p>\n\n<p><a href=\"https://i.stack.imgur.com/8b4oU.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/8b4oU.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 869, "user_id": 698978, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/9AfjX.jpg?s=128&g=1", "display_name": "Joe Schrag", "link": "https://stackoverflow.com/users/698978/joe-schrag"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 416, "favorite_count": 0, "closed_date": 1525890219, "answer_count": 1, "score": 0, "last_activity_date": 1525966400, "creation_date": 1525883620, "last_edit_date": 1525966400, "question_id": 50258149, "link": "https://stackoverflow.com/questions/50258149/how-to-enforce-unique-error-messages", "closed_reason": "Needs details or clarity", "title": "How to enforce unique error messages", "body": "<p>I have been trying to find a way to enforce unique error messages in our application.  That is, I want to know exactly which line of code produced the error, so when users contact support we know the source of the error from the message logged.</p>\n\n<p>I found <a href=\"https://stackoverflow.com/questions/14176128/how-to-enforce-project-wide-unique-ids-error-codes-for-easily-finding-the-origin\">this question</a> which gave me a mechanism (using guids to enforce uniqueness), but one question remains:  <strong>How do I prevent copy/paste duplication?</strong> - specifically, a developer copying the logging line itself:</p>\n\n<pre><code>Log(&lt;guid&gt;, errorMessage);\n</code></pre>\n\n<p>In this case the guid would be duplicated and no longer useful for identifying the unique line which generated the error.</p>\n\n<p>The one idea I have had which would actually work is writing a tool to be run by our build server which would parse the code for error message guids, keep a list, and fail the build on a duplicate.  I'm wondering if there is a cleaner solution.</p>\n\n<p>Other things I've considered:</p>\n\n<ul>\n<li><p>There are various ideas using some sort of central listing of error messages, but I have not found one which addresses the copy/paste issue.</p></li>\n<li><p>There are also a number of schemes which would require keeping a manual list in some way.  I don't want to pursue something like this as it creates the possibility of discrepancies between the list &amp; production code.</p></li>\n<li><p>I've also seen suggestions to use the stack trace, but I'm a bit hesitant to do that for security &amp; performance reasons.</p></li>\n</ul>\n"}, {"tags": ["c++", "c", "networking", "posix"], "comments": [{"owner": {"reputation": 4989, "user_id": 3745413, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jQsNL.png?s=128&g=1", "display_name": "Ron Maupin", "link": "https://stackoverflow.com/users/3745413/ron-maupin"}, "edited": false, "score": 3, "creation_date": 1525883889, "post_id": 50258143, "comment_id": 87534300, "body": "&quot;<i>User space can call send and only send MTU size packets.</i>&quot; That depends on the transport protocol used. For example, you can give TCP large blocks of data to send, and it will segment the data into MSS sized segments and send it for you. TCP segmentation is <i>not</i> IP fragmentation."}, {"owner": {"reputation": 1639, "user_id": 2073349, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0266d3aafa1813f794a5b71058d5cd27?s=128&d=identicon&r=PG", "display_name": "Ritesh", "link": "https://stackoverflow.com/users/2073349/ritesh"}, "reply_to_user": {"reputation": 4989, "user_id": 3745413, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jQsNL.png?s=128&g=1", "display_name": "Ron Maupin", "link": "https://stackoverflow.com/users/3745413/ron-maupin"}, "edited": false, "score": 0, "creation_date": 1525885036, "post_id": 50258143, "comment_id": 87534889, "body": "@RonMaupin  You are right. TCP does it as part of protocol as it tries to get the MTU of link. The above problem is mainly due to UDP. I have updated my question."}, {"owner": {"reputation": 2137, "user_id": 1212725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/152c2f757fe98760a1cca54a21f63a31?s=128&d=identicon&r=PG", "display_name": "bruceg", "link": "https://stackoverflow.com/users/1212725/bruceg"}, "edited": false, "score": 0, "creation_date": 1525889397, "post_id": 50258143, "comment_id": 87537083, "body": "normally, you would step through your buffer one MTU at a time, and send. But, udp doesn&#39;t guarantee order or success. So, the sender may need to retry, and the receiver may need to reorder the received packets."}, {"owner": {"reputation": 4989, "user_id": 3745413, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jQsNL.png?s=128&g=1", "display_name": "Ron Maupin", "link": "https://stackoverflow.com/users/3745413/ron-maupin"}, "edited": false, "score": 0, "creation_date": 1525890224, "post_id": 50258143, "comment_id": 87537508, "body": "Also, if you wish to avoid IP fragmentation altogether, you need to perform PMTUD (RFC 1191 for IPv4) before sending anything."}], "owner": {"reputation": 1639, "user_id": 2073349, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0266d3aafa1813f794a5b71058d5cd27?s=128&d=identicon&r=PG", "display_name": "Ritesh", "link": "https://stackoverflow.com/users/2073349/ritesh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 124, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1525885098, "creation_date": 1525883603, "last_edit_date": 1525885098, "question_id": 50258143, "link": "https://stackoverflow.com/questions/50258143/how-to-send-large-data-on-network-using-udp-protocol", "title": "How to send large data on network using udp protocol?", "body": "<p>User space can call send and only send MTU size packets.\nThis will force multiple calls to send but will avoid IP fragmentation.\nBut multiple calls to send will force multiple user/kernel context switch.</p>\n\n<p>The other way is that user space can send big packets (may be N*MTU size) and that will cause N IP fragments, but will decrease user/kernel context switch.</p>\n\n<p>On the other hand, IP fragments can slow down the network path too, as all the routers need to accumulate the packet before routing forward.</p>\n\n<p>After my googling research, I came to conclusion that using iovec with readv/writev and sending MTU size is possibly a way to go as it will address both the concerns about context switch and IP fragmentation. </p>\n\n<p>I will appreciate any deep insight and opinion on this.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 1066, "user_id": 3359878, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/9WfKf.jpg?s=128&g=1", "display_name": "Amadeusz", "link": "https://stackoverflow.com/users/3359878/amadeusz"}, "edited": false, "score": 2, "creation_date": 1525882396, "post_id": 50257787, "comment_id": 87533466, "body": "Provide a code sample showing what you are trying to do"}, {"owner": {"reputation": 89, "user_id": 9765998, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-SgSgwI_SRdQ/AAAAAAAAAAI/AAAAAAAAATg/W_fwfd4snkU/photo.jpg?sz=128", "display_name": "WolfHybrid23", "link": "https://stackoverflow.com/users/9765998/wolfhybrid23"}, "reply_to_user": {"reputation": 1066, "user_id": 3359878, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/9WfKf.jpg?s=128&g=1", "display_name": "Amadeusz", "link": "https://stackoverflow.com/users/3359878/amadeusz"}, "edited": false, "score": 0, "creation_date": 1525882773, "post_id": 50257787, "comment_id": 87533676, "body": "<code>static __declspec(dllexport) char* example(&quot;8bit Int&quot; | &quot;16bit Int&quot; | &quot;32bit Int&quot;, int Value) {       &#47;&#47;Add compression code here }</code>"}, {"owner": {"reputation": 1352, "user_id": 2198121, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/aa303bed01349a6f8f42a872322c7eb2?s=128&d=identicon&r=PG", "display_name": "NuPagadi", "link": "https://stackoverflow.com/users/2198121/nupagadi"}, "edited": false, "score": 0, "creation_date": 1525882785, "post_id": 50257787, "comment_id": 87533682, "body": "What arguments do you talk about? How does it deal with lossless binary compression?"}, {"owner": {"reputation": 14053, "user_id": 2189130, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/trlri.png?s=128&g=1", "display_name": "kmdreko", "link": "https://stackoverflow.com/users/2189130/kmdreko"}, "edited": false, "score": 0, "creation_date": 1525886848, "post_id": 50257787, "comment_id": 87535809, "body": "why not just use different functions? <code>compress_int8</code>, <code>compress_int16</code>, etc?"}], "answers": [{"comments": [{"owner": {"reputation": 89, "user_id": 9765998, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-SgSgwI_SRdQ/AAAAAAAAAAI/AAAAAAAAATg/W_fwfd4snkU/photo.jpg?sz=128", "display_name": "WolfHybrid23", "link": "https://stackoverflow.com/users/9765998/wolfhybrid23"}, "edited": false, "score": 0, "creation_date": 1525884280, "post_id": 50258291, "comment_id": 87534493, "body": "I can&#39;t do that because I would need to import that class from the dll before I use it, which would be inconvenient, I was looking for a method that would allow me to restrict the char* array to a few possibilities from within the function&#39;s argument list."}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "reply_to_user": {"reputation": 89, "user_id": 9765998, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-SgSgwI_SRdQ/AAAAAAAAAAI/AAAAAAAAATg/W_fwfd4snkU/photo.jpg?sz=128", "display_name": "WolfHybrid23", "link": "https://stackoverflow.com/users/9765998/wolfhybrid23"}, "edited": false, "score": 0, "creation_date": 1525884340, "post_id": 50258291, "comment_id": 87534518, "body": "@WolfHybrid23 It&#39;s not a class, but rather a variant of <code>enum</code>. You don&#39;t need to import it."}, {"owner": {"reputation": 89, "user_id": 9765998, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-SgSgwI_SRdQ/AAAAAAAAAAI/AAAAAAAAATg/W_fwfd4snkU/photo.jpg?sz=128", "display_name": "WolfHybrid23", "link": "https://stackoverflow.com/users/9765998/wolfhybrid23"}, "edited": false, "score": 0, "creation_date": 1525884398, "post_id": 50258291, "comment_id": 87534558, "body": "It wasn&#39;t an enumerator, And visual studio still wouldn&#39;t have autocomplete work with the enum unless I import it from the dll."}, {"owner": {"reputation": 1352, "user_id": 2198121, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/aa303bed01349a6f8f42a872322c7eb2?s=128&d=identicon&r=PG", "display_name": "NuPagadi", "link": "https://stackoverflow.com/users/2198121/nupagadi"}, "edited": false, "score": 0, "creation_date": 1525884473, "post_id": 50258291, "comment_id": 87534595, "body": "But you still need to include a header. This <code>enum</code> can be placed there."}], "tags": [], "owner": {"reputation": 1352, "user_id": 2198121, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/aa303bed01349a6f8f42a872322c7eb2?s=128&d=identicon&r=PG", "display_name": "NuPagadi", "link": "https://stackoverflow.com/users/2198121/nupagadi"}, "is_accepted": true, "score": 3, "last_activity_date": 1525884114, "creation_date": 1525884114, "answer_id": 50258291, "question_id": 50257787, "link": "https://stackoverflow.com/questions/50257787/specific-parameter-input/50258291#50258291", "title": "Specific Parameter Input", "body": "<p>Like this?</p>\n\n<pre><code>enum class Integer\n{\n    UNKNOWN = 0,\n    Bit8 = 1,\n    Bit16 = 2,\n    Bit32 = 3,\n};\n\nstatic __declspec(dllexport) char* compress(\n    char* buffer, Integer intType, int Value)\n{\n    char* bytes;\n    switch (intType)\n    {\n    case Integer::Bit8:\n        // 8-bits processing.\n        break;\n    case Integer::Bit16:\n        // 16-bits processing.\n        break;\n    case Integer::Bit32:\n        // 32-bits processing.\n        break;\n    }\n    //Enter code to convert integer to bytes\n    strcat_s(bytes, sizeof(bytes) + sizeof(buffer), buffer);\n    return buffer;\n}\n</code></pre>\n\n<p>Then you call it this way:</p>\n\n<pre><code>compress(buf, Integer::Bit8, 42);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1352, "user_id": 2198121, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/aa303bed01349a6f8f42a872322c7eb2?s=128&d=identicon&r=PG", "display_name": "NuPagadi", "link": "https://stackoverflow.com/users/2198121/nupagadi"}, "edited": false, "score": 0, "creation_date": 1525889588, "post_id": 50258716, "comment_id": 87537188, "body": "Consider casting it like this <code>bytes[1] = reinterpret_cast&lt;const int8_t*&gt;(&amp;Value)[1];</code>"}, {"owner": {"reputation": 1352, "user_id": 2198121, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/aa303bed01349a6f8f42a872322c7eb2?s=128&d=identicon&r=PG", "display_name": "NuPagadi", "link": "https://stackoverflow.com/users/2198121/nupagadi"}, "edited": false, "score": 0, "creation_date": 1525889718, "post_id": 50258716, "comment_id": 87537247, "body": "You forgot <code>break</code> in <code>switch</code>. And <code>case</code>."}, {"owner": {"reputation": 89, "user_id": 9765998, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-SgSgwI_SRdQ/AAAAAAAAAAI/AAAAAAAAATg/W_fwfd4snkU/photo.jpg?sz=128", "display_name": "WolfHybrid23", "link": "https://stackoverflow.com/users/9765998/wolfhybrid23"}, "reply_to_user": {"reputation": 1352, "user_id": 2198121, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/aa303bed01349a6f8f42a872322c7eb2?s=128&d=identicon&r=PG", "display_name": "NuPagadi", "link": "https://stackoverflow.com/users/2198121/nupagadi"}, "edited": false, "score": 0, "creation_date": 1526138194, "post_id": 50258716, "comment_id": 87631373, "body": "Thanks for letting me know!"}], "tags": [], "owner": {"reputation": 89, "user_id": 9765998, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-SgSgwI_SRdQ/AAAAAAAAAAI/AAAAAAAAATg/W_fwfd4snkU/photo.jpg?sz=128", "display_name": "WolfHybrid23", "link": "https://stackoverflow.com/users/9765998/wolfhybrid23"}, "is_accepted": false, "score": 0, "last_activity_date": 1525885874, "creation_date": 1525885874, "answer_id": 50258716, "question_id": 50257787, "link": "https://stackoverflow.com/questions/50257787/specific-parameter-input/50258716#50258716", "title": "Specific Parameter Input", "body": "<p>Does this look appropriate?</p>\n\n<pre><code>__declspec(dllexport) enum intType {\n    _8bit, _16bit, _32bit\n};\nclass COMPRESS\n{\npublic:\n    char* CreateBuffer(int Size)\n    {\n        char* buffer = new char[Size];\n        return buffer;\n    }\n    char* BufferWrite(char* Buffer, intType Type, int Value)\n    {\n        char* bytes;\n        switch (Type)\n        {\n        _8bit:\n            {\n                bytes = (char*)Value;\n            }\n        _16bit:\n            {\n                bytes[0] = Value &amp; 0xff;\n                bytes[1] = (Value &gt;&gt; 8) &amp; 0xff;\n            }\n        _32bit:\n            {\n                bytes[0] = Value &amp; 0xff;\n                bytes[1] = (Value &gt;&gt; 8) &amp; 0xff;\n                bytes[2] = (Value &gt;&gt; 16) &amp; 0xff;\n                bytes[3] = (Value &gt;&gt; 24) &amp; 0xff;\n            }\n        }\n\n        strcat_s(Buffer, sizeof(bytes) + sizeof(Buffer), bytes);\n        return Buffer;\n    }\n</code></pre>\n"}], "owner": {"reputation": 89, "user_id": 9765998, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-SgSgwI_SRdQ/AAAAAAAAAAI/AAAAAAAAATg/W_fwfd4snkU/photo.jpg?sz=128", "display_name": "WolfHybrid23", "link": "https://stackoverflow.com/users/9765998/wolfhybrid23"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "accepted_answer_id": 50258291, "answer_count": 2, "score": 1, "last_activity_date": 1525885874, "creation_date": 1525882270, "last_edit_date": 1525883161, "question_id": 50257787, "link": "https://stackoverflow.com/questions/50257787/specific-parameter-input", "title": "Specific Parameter Input", "body": "<p>I am fairly new to C++ so forgive me for being all over the place with my code but here is whats going on, I am creating a Dynamic Link Library that will handle the decompression of my games assets. I am very familiar with lossless binary compression but here's whats happening, I need to know how I can have an argument either be \"Type A\" or \"Type B\" and nothing else, I am using visual studio so I would like the autocomplete hint to tell me I can either use \"A\" or \"B\" as the argument, How would I do this?</p>\n\n<pre><code>cpp\n//People where telling me to add code for visual so here\nstatic __declspec(dllexport) char* compress(char* buffer, \"8bit Int\" | \"16bit Int\" | \"32bit Int\", int Value)\n{\n    char* bytes;\n    //Enter code to convert integer to bytes\n    strcat_s(bytes, sizeof(bytes) + sizeof(buffer), buffer);\n    return buffer;\n}\n</code></pre>\n"}, {"tags": ["c++", "qt"], "answers": [{"comments": [{"owner": {"reputation": 159, "user_id": 7947002, "user_type": "registered", "profile_image": "https://graph.facebook.com/1198181863573776/picture?type=large", "display_name": "Spike Bughdaryan", "link": "https://stackoverflow.com/users/7947002/spike-bughdaryan"}, "edited": false, "score": 0, "creation_date": 1525883079, "post_id": 50257901, "comment_id": 87533853, "body": "That is what i was looking for, Thanks"}], "tags": [], "owner": {"reputation": 1773, "user_id": 8805095, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a4948ba17681551aa212dbc7be9bff40?s=128&d=identicon&r=PG&f=1", "display_name": "Moia", "link": "https://stackoverflow.com/users/8805095/moia"}, "is_accepted": true, "score": 2, "last_activity_date": 1525882728, "creation_date": 1525882728, "answer_id": 50257901, "question_id": 50257739, "link": "https://stackoverflow.com/questions/50257739/how-to-change-qmenubar-item-hover-effect-color-in-qt/50257901#50257901", "title": "How to change Qmenubar item hover effect color in qt?", "body": "<pre><code> QMenuBar::setStyleSheet()\n</code></pre>\n\n<p>will do the trick.</p>\n\n<p>You can fully customize the layout of your component. Be aware of using setStyleSheet means you'll completely override the style of the component with your stylesheet.</p>\n\n<pre><code>QString style = \"QMenuBar::item:selected { background: white; } QMenuBar::item:pressed {  background: white; }\"\n\nmenuBar.setStyleSheet(style);\n</code></pre>\n"}], "owner": {"reputation": 159, "user_id": 7947002, "user_type": "registered", "profile_image": "https://graph.facebook.com/1198181863573776/picture?type=large", "display_name": "Spike Bughdaryan", "link": "https://stackoverflow.com/users/7947002/spike-bughdaryan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 830, "favorite_count": 0, "accepted_answer_id": 50257901, "answer_count": 1, "score": 0, "last_activity_date": 1525882728, "creation_date": 1525882097, "question_id": 50257739, "link": "https://stackoverflow.com/questions/50257739/how-to-change-qmenubar-item-hover-effect-color-in-qt", "title": "How to change Qmenubar item hover effect color in qt?", "body": "<p>I have a QMenuBar in window, and background color is white, so when action is selected, or mouse is point at action, text color becomes white.\nHow can i change hover effect color? I tried to change from pallete by changing selected text color, but that doesn't worked</p>\n\n<p><a href=\"https://i.stack.imgur.com/gop5Q.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/gop5Q.png\" alt=\"No Action is selected\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/eGOMB.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/eGOMB.png\" alt=\"Mouse is pointing at Exit item\"></a></p>\n"}, {"tags": ["c++", "c++11", "cython"], "comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 0, "creation_date": 1525882274, "post_id": 50257738, "comment_id": 87533401, "body": "@YSC: <a href=\"https://gcc.gnu.org/gcc-6/changes.html\" rel=\"nofollow noreferrer\">C++14 is the default in GCC 6</a>. Still, those errors clearly come from libstdc++ so something is very wrong with this installation."}, {"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 0, "creation_date": 1525882430, "post_id": 50257738, "comment_id": 87533498, "body": "Can you compile a simple <a href=\"http://coliru.stacked-crooked.com/a/5a5b25db35f01758\" rel=\"nofollow noreferrer\"><i>Hello, World!</i></a> program?"}, {"owner": {"reputation": 1617, "user_id": 1779806, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/8353c15a495db7c4da312f6a7a900a7b?s=128&d=identicon&r=PG", "display_name": "paugier", "link": "https://stackoverflow.com/users/1779806/paugier"}, "edited": false, "score": 0, "creation_date": 1525883066, "post_id": 50257738, "comment_id": 87533842, "body": "Yes I can compile the Hello world! program."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1525883274, "post_id": 50257738, "comment_id": 87533965, "body": "Can you reduce the failing code to a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> and post that in your question?"}, {"owner": {"reputation": 5896, "user_id": 1106415, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6fvK.png?s=128&g=1", "display_name": "hlt", "link": "https://stackoverflow.com/users/1106415/hlt"}, "edited": false, "score": 1, "creation_date": 1525887565, "post_id": 50257738, "comment_id": 87536166, "body": "<a href=\"https://stackoverflow.com/q/46884363/1106415\">Possibly related</a> (same error message, different scenario) - unfortunately, that one doesn&#39;t have an answer either"}], "answers": [{"tags": [], "owner": {"reputation": 1001, "user_id": 2037613, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d0c8d4844281e31db8e3b89178f6560?s=128&d=identicon&r=PG", "display_name": "jadelord", "link": "https://stackoverflow.com/users/2037613/jadelord"}, "is_accepted": true, "score": 2, "last_activity_date": 1526285413, "creation_date": 1526285413, "answer_id": 50325710, "question_id": 50257738, "link": "https://stackoverflow.com/questions/50257738/compilation-error-error-category-does-not-name-a-type-with-g-6-3-0/50325710#50325710", "title": "Compilation error: `\u2018error_category\u2019 does not name a type` with g++ 6.3.0", "body": "<p>This happens because the package fluidfft's Cython source files relied on <a href=\"https://bitbucket.org/fluiddyn/fluidfft/src/7dd6f55525ffa4cde8d04cc6a4b9b5f2ae4c1e59/include/cpu.h#lines-41:45\" rel=\"nofollow noreferrer\">a C++ header file <code>cpu.h</code></a> wherein the following preprocessor lines caused problems:</p>\n\n<pre><code>#if __STDC_VERSION__ &gt;= 199901L\n  /* \"inline\" is a keyword */\n#else\n# define inline\n#endif\n</code></pre>\n\n<p>My guess is the newer g++ compilers are strict on redefining reserved keywords. Following hints from an <a href=\"http://www.greenend.org.uk/rjk/tech/inline.html\" rel=\"nofollow noreferrer\">essay on inline functions</a>, this block of code was replaced with:</p>\n\n<pre><code>#if __STDC_VERSION__ &gt;= 199901L\n  /* \"inline\" is a keyword */\n#else\n# define INLINE\n#endif\n\n#ifndef INLINE\n# if __GNUC__ &amp;&amp; !__GNUC_STDC_INLINE__\n#  define INLINE static inline\n# else\n#  define INLINE inline\n# endif\n#endif\n</code></pre>\n"}], "owner": {"reputation": 1617, "user_id": 1779806, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/8353c15a495db7c4da312f6a7a900a7b?s=128&d=identicon&r=PG", "display_name": "paugier", "link": "https://stackoverflow.com/users/1779806/paugier"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 707, "favorite_count": 0, "accepted_answer_id": 50325710, "answer_count": 1, "score": 4, "last_activity_date": 1526285413, "creation_date": 1525882096, "last_edit_date": 1525954081, "question_id": 50257738, "link": "https://stackoverflow.com/questions/50257738/compilation-error-error-category-does-not-name-a-type-with-g-6-3-0", "title": "Compilation error: `\u2018error_category\u2019 does not name a type` with g++ 6.3.0", "body": "<p>I try to compile this C++/Python library <a href=\"https://bitbucket.org/fluiddyn/fluidfft\" rel=\"nofollow noreferrer\">https://bitbucket.org/fluiddyn/fluidfft</a></p>\n\n<p>If mpi4py is installed, it works well.</p>\n\n<p>If mpi4py is not installed, code that does not use MPI cannot be compiled.</p>\n\n<p>An error is raise during the compilation of a Cython file.  The error is long and it starts by:</p>\n\n<pre><code>In file included from /usr/include/c++/6/bits/ios_base.h:46:0,\n                 from /usr/include/c++/6/ios:42,\n                 from /usr/include/c++/6/ostream:38,\n                 from /usr/include/c++/6/iostream:39,\n                 from src_cpp/base/base_fft.h:10,\n                 from fluidfft/fft2d/fft2d_with_fftw1d.cpp:543:\n/usr/include/c++/6/system_error:143:31: error: \u2018error_category\u2019 does not name a type\n     error_code(int __v, const error_category&amp; __cat) noexcept\n                               ^~~~~~~~~~~~~~\n/usr/include/c++/6/system_error:152:27: error: \u2018error_category\u2019 does not name a type\n     assign(int __v, const error_category&amp; __cat) noexcept\n                           ^~~~~~~~~~~~~~\n/usr/include/c++/6/system_error:172:11: error: \u2018error_category\u2019 does not name a type\n     const error_category&amp;\n           ^~~~~~~~~~~~~~\n/usr/include/c++/6/system_error:191:11: error: \u2018error_category\u2019 does not name a type\n     const error_category*  _M_cat;\n\n[...]\n</code></pre>\n\n<p>I guess it could be a C++11 problem (<a href=\"http://en.cppreference.com/w/cpp/error/error_category\" rel=\"nofollow noreferrer\">http://en.cppreference.com/w/cpp/error/error_category</a>) but I don't see how to solve the problem.</p>\n\n<p>The compilation command is</p>\n\n<pre><code>g++ -pthread -fwrapv -O3 -Wall -Wno-unused-result -Wsign-compare -Wno-unused-result -Wsign-compare -fwrapv -O3 -Wall -fPIC -I/home/users/me/opt/miniconda3/include/python3.6m -I/home/users/me/opt/miniconda3/include -Isrc_cy -Ifluidfft/fft2d -Ifluidfft/fft3d -Isrc_cpp/base -Isrc_cpp/3d -Isrc_cpp/2d -Iinclude -I/home/users/me/opt/miniconda3/lib/python3.6/site-packages/numpy/core/include -c fluidfft/fft2d/fft2d_with_fftw1d.cpp -o build/temp.linux-x86_64-3.6/fluidfft/fft2d/fft2d_with_fftw1d.o\n</code></pre>\n\n<h1>Edit Minimal, Complete, and Verifiable example</h1>\n\n<p>Thanks to Ashwin Vishnu (see <a href=\"https://bitbucket.org/fluiddyn/fluidfft/issues/7/fluidfft-installation-fails-without-mpi4py\" rel=\"nofollow noreferrer\">https://bitbucket.org/fluiddyn/fluidfft/issues/7/fluidfft-installation-fails-without-mpi4py</a>), I can post a minimal example</p>\n\n<pre><code>/* test.cpp */\n#include &lt;Python.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdio.h&gt;\n\n#include &lt;cpu.h&gt;\n\n#include &lt;sys/time.h&gt;\n#include &lt;complex&gt;\n#include &lt;iostream&gt;\n\n\nint main() {\n  std::cout&lt;&lt;\"Hello world\";\n  return 0;\n}\n</code></pre>\n\n<p>compiled from fluidfft directory as follows:</p>\n\n<pre><code>g++ $(python-config --include) -Iinclude/ test.cpp\n</code></pre>\n\n<p>If we comment out cpu.h include, there are no errors.</p>\n\n<p>The file cpu.h was taken from the pyfftw code: <a href=\"https://github.com/pyFFTW/pyFFTW/blob/master/include/cpu.h\" rel=\"nofollow noreferrer\">https://github.com/pyFFTW/pyFFTW/blob/master/include/cpu.h</a></p>\n"}, {"tags": ["c++", "class", "parsing", "struct"], "comments": [{"owner": {"reputation": 1352, "user_id": 2198121, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/aa303bed01349a6f8f42a872322c7eb2?s=128&d=identicon&r=PG", "display_name": "NuPagadi", "link": "https://stackoverflow.com/users/2198121/nupagadi"}, "edited": false, "score": 0, "creation_date": 1525882229, "post_id": 50257679, "comment_id": 87533378, "body": "I can&#39;t understand the problem. Why do you need inner class? Please, provide an example."}, {"owner": {"reputation": 107, "user_id": 9061958, "user_type": "registered", "profile_image": "https://graph.facebook.com/10212710197602408/picture?type=large", "display_name": "Sadikov", "link": "https://stackoverflow.com/users/9061958/sadikov"}, "reply_to_user": {"reputation": 1352, "user_id": 2198121, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/aa303bed01349a6f8f42a872322c7eb2?s=128&d=identicon&r=PG", "display_name": "NuPagadi", "link": "https://stackoverflow.com/users/2198121/nupagadi"}, "edited": false, "score": 0, "creation_date": 1525882485, "post_id": 50257679, "comment_id": 87533528, "body": "The data that needs to be parsed is huge ~contains around 30 different element values for each instance of Someclass (where the instances are set through &quot;Integer&quot;) . I didn&#39;t want to write all the declarations/definitions in this class file so I wrote another header and cpp file that contains the struct definition and I will write the function somewhere else that parses the file. Just so that the code is more readable."}, {"owner": {"reputation": 1352, "user_id": 2198121, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/aa303bed01349a6f8f42a872322c7eb2?s=128&d=identicon&r=PG", "display_name": "NuPagadi", "link": "https://stackoverflow.com/users/2198121/nupagadi"}, "edited": false, "score": 0, "creation_date": 1525882624, "post_id": 50257679, "comment_id": 87533596, "body": "What does mean &quot;instances are set through &quot;Integer&quot;&quot;?"}, {"owner": {"reputation": 107, "user_id": 9061958, "user_type": "registered", "profile_image": "https://graph.facebook.com/10212710197602408/picture?type=large", "display_name": "Sadikov", "link": "https://stackoverflow.com/users/9061958/sadikov"}, "reply_to_user": {"reputation": 1352, "user_id": 2198121, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/aa303bed01349a6f8f42a872322c7eb2?s=128&d=identicon&r=PG", "display_name": "NuPagadi", "link": "https://stackoverflow.com/users/2198121/nupagadi"}, "edited": false, "score": 0, "creation_date": 1525882750, "post_id": 50257679, "comment_id": 87533664, "body": "I create a class with the constructor by setting the Integer. The parser finds the place in the text file depending on the Integer and extracts around 30 attributes. Every time something needs to be extracted I create a class with constructor Integer, get the values, and then destruct my class."}], "answers": [{"tags": [], "owner": {"reputation": 1352, "user_id": 2198121, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/aa303bed01349a6f8f42a872322c7eb2?s=128&d=identicon&r=PG", "display_name": "NuPagadi", "link": "https://stackoverflow.com/users/2198121/nupagadi"}, "is_accepted": false, "score": 1, "last_activity_date": 1525884777, "last_edit_date": 1525884777, "creation_date": 1525883649, "answer_id": 50258158, "question_id": 50257679, "link": "https://stackoverflow.com/questions/50257679/changing-struct-or-class-inside-a-class-with-or-without-pointers/50258158#50258158", "title": "Changing Struct or Class inside a Class | with or without pointers", "body": "<p>Is this what you're looking for? I'm not much confident I understood you right.</p>\n\n<pre><code>template &lt;int I&gt;\nstruct Someclass;\n\ntemplate &lt;&gt;\nstruct Someclass&lt;1&gt;\n{\n    int Integer = 1;\n    int a, b;\n\n    void func()\n    {\n        a = Integer/2;\n        b = Integer*2;\n    }\n};\n\ntemplate &lt;&gt;\nstruct Someclass&lt;2&gt;\n{\n    int Integer = 2;\n    int a, b, c;\n\n    void func()\n    {\n        a = Integer/2;\n        b = Integer*2;\n        c = Integer*Integer;\n    }\n};\n\nint main()\n{\n    Someclass&lt;1&gt; A;\n    A.func();\n    std::cout &lt;&lt; A.a &lt;&lt; \" \" &lt;&lt; A.b &lt;&lt; std::endl;\n\n    Someclass&lt;2&gt; B;\n    B.func();\n    std::cout &lt;&lt; B.a &lt;&lt; \" \" &lt;&lt; B.b &lt;&lt; \" \" &lt;&lt; B.c &lt;&lt; std::endl;\n\n    return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 107, "user_id": 9061958, "user_type": "registered", "profile_image": "https://graph.facebook.com/10212710197602408/picture?type=large", "display_name": "Sadikov", "link": "https://stackoverflow.com/users/9061958/sadikov"}, "edited": false, "score": 1, "creation_date": 1526024166, "post_id": 50258904, "comment_id": 87590536, "body": "Your understanding is on point. Thank you for the comment, which I find super instructive. I will go for the second approach you mention and try to initialize everything leaving Mystruct read-only.  Thanks again. Cheers!"}], "tags": [], "owner": {"reputation": 54044, "user_id": 3723423, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2c916310a1261b53773de75fc83e5ad?s=128&d=identicon&r=PG&f=1", "display_name": "Christophe", "link": "https://stackoverflow.com/users/3723423/christophe"}, "is_accepted": true, "score": 1, "last_activity_date": 1525886561, "creation_date": 1525886561, "answer_id": 50258904, "question_id": 50257679, "link": "https://stackoverflow.com/questions/50257679/changing-struct-or-class-inside-a-class-with-or-without-pointers/50258904#50258904", "title": "Changing Struct or Class inside a Class | with or without pointers", "body": "<p>I understand that your question is about encapsulation, being understood that the inner struct is a data holder and the outer class has to manage it somehow.  </p>\n\n<p><strong>Weaknesses of your design</strong></p>\n\n<p>In your design, <code>Mystruct</code> is public.  So anything outside <code>Someclass</code> could access the data, but also change it.  This is error prone, as there is no guarantee that the outside code doesn't break some invariant of the structure.    </p>\n\n<p><strong>Ways for improvement</strong></p>\n\n<p>The cleanest thing would certainly to make some getters and setters to access the data.  But with 30 members, it's a lot of code.</p>\n\n<p>If your construction process initialises the struture's data, a second approach could be to limit outside access to read-only.  You'd do that by making <code>Mystruct</code> private and offering a function returning a const reference:  </p>\n\n<pre><code>class Someclass {\n    Somestruct Mystruct; \npublic: \n    ...\n    const Somestruct&amp; get() { return Mystruct; }\n};\n\nstd::cout &lt;&lt; A.get().a &lt;&lt; \" \" &lt;&lt; A.get().b &lt;&lt; std::endl;\n</code></pre>\n\n<p><a href=\"https://ideone.com/3Ch5OX\" rel=\"nofollow noreferrer\">Online demo</a> </p>\n\n<p>Nevertheless before going into that direction, I'd check if access to the structure's raw data couldn't be encapsulated, for example by providing functions that manage the data without need to know the internals:  </p>\n\n<pre><code>class Somestruct {\n    ...\npublic:\n    ostream&amp; show_simplified_specs(ostream&amp; os) {\n        os &lt;&lt; a &lt;&lt; \" \" &lt;&lt; b;\n    }\n}\n</code></pre>\n\n<p>A third approach could be to use the <a href=\"http://www.oodesign.com/builder-pattern.html\" rel=\"nofollow noreferrer\">builder design pattern</a> to encapsulate the construction process of a <code>Someclass</code> based on <code>Somestruct</code> and other parts. </p>\n\n<p><strong>Pointers ?</strong></p>\n\n<p>Pointers should be avoided if possible. For example, suppose you have a vector of <code>Someclass</code> to keep all these classes in memory. At a moment in time, you get a pointer to an element's <code>Mystruct</code>.  Suppose you'd then add a new item to the vector: all the previous pointers might get invalidated.</p>\n\n<p>This same risk potentially exist with references.  But I think that while it's a common idiom to cache a pointer returned by a function,in practice it's less common and appealing to copy a reference returned by a function.   </p>\n"}], "owner": {"reputation": 107, "user_id": 9061958, "user_type": "registered", "profile_image": "https://graph.facebook.com/10212710197602408/picture?type=large", "display_name": "Sadikov", "link": "https://stackoverflow.com/users/9061958/sadikov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 0, "accepted_answer_id": 50258904, "answer_count": 2, "score": 2, "last_activity_date": 1530720072, "creation_date": 1525881901, "last_edit_date": 1530720072, "question_id": 50257679, "link": "https://stackoverflow.com/questions/50257679/changing-struct-or-class-inside-a-class-with-or-without-pointers", "title": "Changing Struct or Class inside a Class | with or without pointers", "body": "<p>Changing values of classes/structs inside classes are a mystery to me. I tried to do some research today and came up with the following solution. I wonder if this is a proper way for a function to change stuff inside the class. Is there a need to for this to be somehow done with pointers? Is there a more proper way to accomplish this?</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nint main()\n{\n\nclass Someclass {\n    private:\n    int Integer;\n\n    public:\n\n    Someclass(int i):\n    Integer(i){} //CTOR\n\n    struct Somestruct { \n        int a, b;\n    };\n    Somestruct Mystruct;\n\n    void func(){\n        Mystruct.a = Integer/2;\n        Mystruct.b = Integer*2;\n    };\n};\n\nSomeclass A(10);\nA.func();\nstd::cout &lt;&lt; A.Mystruct.a &lt;&lt; \" \" &lt;&lt; A.Mystruct.b &lt;&lt; std::endl;\n} \n</code></pre>\n\n<p>The reason I am writing this code, is because I want to parse a file, starting from the line \"Integer\" into a customly defined struct \"Mystruct\" which this class should somehow deliver me. Is this an acceptable way to write such a code?</p>\n"}, {"tags": ["c++", "cmake", "shared-libraries", "pybind11"], "comments": [{"owner": {"reputation": 4097, "user_id": 2646505, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/XGEyF.jpg?s=128&g=1", "display_name": "Tom de Geus", "link": "https://stackoverflow.com/users/2646505/tom-de-geus"}, "edited": false, "score": 0, "creation_date": 1526283728, "post_id": 50257655, "comment_id": 87666178, "body": "You ask multiple questions at once. Part of the solution process (and of asking on StackOverflow) is to isolate one problem, investigate, if needed ask it here, and then continue. So I&#39;d propose you edit, and if needed ask two different questions."}, {"owner": {"reputation": 4097, "user_id": 2646505, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/XGEyF.jpg?s=128&g=1", "display_name": "Tom de Geus", "link": "https://stackoverflow.com/users/2646505/tom-de-geus"}, "edited": false, "score": 0, "creation_date": 1526283911, "post_id": 50257655, "comment_id": 87666296, "body": "Problem one: <code>symbol not found: __ZN5pointC1Eddd</code>. It seems that a member function <code>add</code> is not linked. Well... What you present is not sufficient to judge how to solve this. But probably either include <code>point.cpp</code> in the compilation, or make it header only by making the function <code>inline</code>."}, {"owner": {"reputation": 4097, "user_id": 2646505, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/XGEyF.jpg?s=128&g=1", "display_name": "Tom de Geus", "link": "https://stackoverflow.com/users/2646505/tom-de-geus"}, "edited": false, "score": 0, "creation_date": 1526283964, "post_id": 50257655, "comment_id": 87666334, "body": "Problem two: It seems here that you are making two modules that are completely independent from the Python side. I think that you compile them using two different <code>CMakeLists.txt</code>"}, {"owner": {"reputation": 289, "user_id": 4629173, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3d787dd7446054603f3004b2d95feb36?s=128&d=identicon&r=PG&f=1", "display_name": "Matthijs", "link": "https://stackoverflow.com/users/4629173/matthijs"}, "reply_to_user": {"reputation": 4097, "user_id": 2646505, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/XGEyF.jpg?s=128&g=1", "display_name": "Tom de Geus", "link": "https://stackoverflow.com/users/2646505/tom-de-geus"}, "edited": false, "score": 0, "creation_date": 1526287167, "post_id": 50257655, "comment_id": 87668004, "body": "&quot;You ask multiple questions at once. &quot; I have tried to isolate the problem as much as possible and was not aware that i am dealing with two separate issues. when i had the modules line and point separately, everything works as expected, it only breaks when the dependency between the two modules is introduced (using point in the line constructor)."}, {"owner": {"reputation": 289, "user_id": 4629173, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3d787dd7446054603f3004b2d95feb36?s=128&d=identicon&r=PG&f=1", "display_name": "Matthijs", "link": "https://stackoverflow.com/users/4629173/matthijs"}, "reply_to_user": {"reputation": 4097, "user_id": 2646505, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/XGEyF.jpg?s=128&g=1", "display_name": "Tom de Geus", "link": "https://stackoverflow.com/users/2646505/tom-de-geus"}, "edited": false, "score": 0, "creation_date": 1526287568, "post_id": 50257655, "comment_id": 87668224, "body": "will gladly update/clarify the question, but i don&#39;t really know what is unclear."}, {"owner": {"reputation": 289, "user_id": 4629173, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3d787dd7446054603f3004b2d95feb36?s=128&d=identicon&r=PG&f=1", "display_name": "Matthijs", "link": "https://stackoverflow.com/users/4629173/matthijs"}, "reply_to_user": {"reputation": 4097, "user_id": 2646505, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/XGEyF.jpg?s=128&g=1", "display_name": "Tom de Geus", "link": "https://stackoverflow.com/users/2646505/tom-de-geus"}, "edited": false, "score": 0, "creation_date": 1526287609, "post_id": 50257655, "comment_id": 87668255, "body": "&quot;I think that you compile them using two different CMakeLists.txt&quot; no, i use only the described CMake file"}, {"owner": {"reputation": 4097, "user_id": 2646505, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/XGEyF.jpg?s=128&g=1", "display_name": "Tom de Geus", "link": "https://stackoverflow.com/users/2646505/tom-de-geus"}, "reply_to_user": {"reputation": 289, "user_id": 4629173, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3d787dd7446054603f3004b2d95feb36?s=128&d=identicon&r=PG&f=1", "display_name": "Matthijs", "link": "https://stackoverflow.com/users/4629173/matthijs"}, "edited": false, "score": 0, "creation_date": 1526297712, "post_id": 50257655, "comment_id": 87674491, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/170999/discussion-between-tom-de-geus-and-matthijs\">continue this discussion in chat</a>."}, {"owner": {"reputation": 181, "user_id": 3608301, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/efefb3d53ba61a3b2ec25a26c6f26355?s=128&d=identicon&r=PG&f=1", "display_name": "rchav9", "link": "https://stackoverflow.com/users/3608301/rchav9"}, "edited": false, "score": 0, "creation_date": 1543982239, "post_id": 50257655, "comment_id": 94110002, "body": "was there ever a resolution"}, {"owner": {"reputation": 289, "user_id": 4629173, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3d787dd7446054603f3004b2d95feb36?s=128&d=identicon&r=PG&f=1", "display_name": "Matthijs", "link": "https://stackoverflow.com/users/4629173/matthijs"}, "reply_to_user": {"reputation": 181, "user_id": 3608301, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/efefb3d53ba61a3b2ec25a26c6f26355?s=128&d=identicon&r=PG&f=1", "display_name": "rchav9", "link": "https://stackoverflow.com/users/3608301/rchav9"}, "edited": false, "score": 0, "creation_date": 1544011148, "post_id": 50257655, "comment_id": 94123013, "body": "@rchav9, no i didn&#39;t have anymore time look into this issue. Instead i switched to Cython"}], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 8033739, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tH2uW.png?s=128&g=1", "display_name": "thomas", "link": "https://stackoverflow.com/users/8033739/thomas"}, "is_accepted": false, "score": 1, "last_activity_date": 1573987244, "creation_date": 1573987244, "answer_id": 58899652, "question_id": 50257655, "link": "https://stackoverflow.com/questions/50257655/how-to-use-pybind11-with-cmake-for-linking-2-modules/58899652#58899652", "title": "how to use pybind11 with cmake for linking 2 modules", "body": "<p>Add the <code>PYBIND11_EXPORT</code> macro to all types you want to use from other modules (<a href=\"https://pybind11.readthedocs.io/en/stable/advanced/misc.html#partitioning-code-over-multiple-extension-modules\" rel=\"nofollow noreferrer\">see documentation</a>).</p>\n\n<p>e.g.</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>class PYBIND11_EXPORT Point {\n  ...\n}\n</code></pre>\n"}], "owner": {"reputation": 289, "user_id": 4629173, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3d787dd7446054603f3004b2d95feb36?s=128&d=identicon&r=PG&f=1", "display_name": "Matthijs", "link": "https://stackoverflow.com/users/4629173/matthijs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 981, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1573987244, "creation_date": 1525881795, "last_edit_date": 1525901645, "question_id": 50257655, "link": "https://stackoverflow.com/questions/50257655/how-to-use-pybind11-with-cmake-for-linking-2-modules", "title": "how to use pybind11 with cmake for linking 2 modules", "body": "<p>I am trying to combine a few modules, created by pybind11 and unfortunately can't get it to work. Hopefully someone can help out. I have tried to simplify the problem as much as possible.</p>\n\n<p>Am trying to create the following two modules:</p>\n\n<ul>\n<li><code>point</code>: can be called directly</li>\n<li><code>line</code>: can be called directly and also uses point module.</li>\n</ul>\n\n<p>point.h:</p>\n\n<pre><code>#ifndef UNTITLED1_POINT_H\n#define UNTITLED1_POINT_H\n\n#include &lt;pybind11/pybind11.h&gt;\n#include &lt;pybind11/stl.h&gt;\n\nnamespace py = pybind11;\n\nclass Point {\n\nprivate:\n    double m_x;\n    double m_y;\n    double m_z;\n\npublic:\n    Point()= default;\n    Point(double x, double y, double z);\n};\n\nPYBIND11_MODULE(point, m) {\n\n    py::class_&lt;Point&gt;(m, \"Point\")\n            .def(py::init&lt;double, double, double&gt;());\n\n}\n\n#endif //UNTITLED1_POINT_H\n</code></pre>\n\n<p>point.cpp:</p>\n\n<pre><code>#include \"point.h\"\nPoint::Point (double x, double y, double z){\n    m_x = x;\n    m_y = y;\n    m_z = z;\n}\n</code></pre>\n\n<p>line.h:</p>\n\n<pre><code>#ifndef UNTITLED1_LINE_H\n#define UNTITLED1_LINE_H\n\n#include &lt;pybind11/pybind11.h&gt;\n#include &lt;pybind11/stl.h&gt;\n\nnamespace py = pybind11;\n\n#include \"point.h\"\n\nclass Line {\nprivate:\n    Point m_p1;\n    Point m_p2;\npublic:\n    Line(Point p1, Point p2);\n};\n\nPYBIND11_MODULE(line, m) {\n\n    py::class_&lt;Line&gt;(m, \"line\")\n            .def(py::init&lt;Point, Point&gt;());\n\n}\n\n#endif //UNTITLED1_LINE_H\n</code></pre>\n\n<p>line.cpp:</p>\n\n<pre><code>#include \"line.h\"\n\nLine::Line(Point p1, Point p2) {\n    m_p1 = p1;\n    m_p2 = p2;\n}\n</code></pre>\n\n<p>CMakeLists.txt:</p>\n\n<pre><code>cmake_minimum_required(VERSION 3.0)\nproject(untitled1)\n\nset(CMAKE_CXX_STANDARD 11)\n\nadd_subdirectory(pybind11)\n\npybind11_add_module(point point.cpp)\npybind11_add_module(line line.cpp)\n</code></pre>\n\n<p>Now the following python code is run:</p>\n\n<pre><code>from point import point\nfrom line import line\n\np1 = point(1, 2, 3)\np2 = point(3, 4, 5)\n\nl = line(p1, p2)\n</code></pre>\n\n<p>leading to a undefined symbol error:\n<code>Symbol not found: __ZN5pointC1Eddd</code></p>\n\n<p>Update:</p>\n\n<p>I have also tried the following lines in the cmake file:\n<code>pybind11_add_module(point SHARED point.cpp)</code>\n<code>pybind11_add_module(line line.cpp)</code>\n<code>target_link_libraries(line PRIVATE point)</code></p>\n\n<p>Update:\nmore precise error: </p>\n"}, {"tags": ["c++", "matrix", "c++14"], "comments": [{"owner": {"reputation": 551, "user_id": 7637816, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a9d3498eeac0ab04f4690d271f8e97d?s=128&d=identicon&r=PG&f=1", "display_name": "kiloalphaindia", "link": "https://stackoverflow.com/users/7637816/kiloalphaindia"}, "edited": false, "score": 2, "creation_date": 1525882031, "post_id": 50257630, "comment_id": 87533266, "body": "Push-back invalidates iterators.  You have to use vector::back().push_back(...)"}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 2, "creation_date": 1525883228, "post_id": 50257630, "comment_id": 87533938, "body": "<code>std::vector&lt;std::vector&lt;double&gt;&gt;</code> is not the right type for a matrix anyway. Even if we ignore the performance implications, a matrix is a <i>rectangular</i> block of stuff and not a list of lists. The data structure should reflect that."}, {"owner": {"reputation": 125, "user_id": 8103391, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef857581426b186c22052c493e0fa368?s=128&d=identicon&r=PG&f=1", "display_name": "Nagesh Eranki", "link": "https://stackoverflow.com/users/8103391/nagesh-eranki"}, "reply_to_user": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 0, "creation_date": 1525947156, "post_id": 50257630, "comment_id": 87558217, "body": "@BaummitAugen I agree with you. However, I am novice C++ programmer with no background to data structures and algorithms."}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 0, "creation_date": 1525947607, "post_id": 50257630, "comment_id": 87558483, "body": "Sure, that&#39;s why I&#39;m telling you. This was not meant to be a personal attack."}], "answers": [{"comments": [{"owner": {"reputation": 125, "user_id": 8103391, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef857581426b186c22052c493e0fa368?s=128&d=identicon&r=PG&f=1", "display_name": "Nagesh Eranki", "link": "https://stackoverflow.com/users/8103391/nagesh-eranki"}, "edited": false, "score": 0, "creation_date": 1525882275, "post_id": 50257721, "comment_id": 87533402, "body": "Is there a way around having to reassign the iterator. You see, this is part of a bigger picture to create my &#39;matrix&#39; class. I just tried using it = A.end() , without having to increment (right?). But now I have encountered a segfault"}, {"owner": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "reply_to_user": {"reputation": 125, "user_id": 8103391, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef857581426b186c22052c493e0fa368?s=128&d=identicon&r=PG&f=1", "display_name": "Nagesh Eranki", "link": "https://stackoverflow.com/users/8103391/nagesh-eranki"}, "edited": false, "score": 0, "creation_date": 1525883445, "post_id": 50257721, "comment_id": 87534054, "body": "@NageshEranki Don&#39;t use <code>it = A.end()</code>. Use <code>it = A.back();</code>."}, {"owner": {"reputation": 551, "user_id": 7637816, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a9d3498eeac0ab04f4690d271f8e97d?s=128&d=identicon&r=PG&f=1", "display_name": "kiloalphaindia", "link": "https://stackoverflow.com/users/7637816/kiloalphaindia"}, "reply_to_user": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "edited": false, "score": 0, "creation_date": 1525883702, "post_id": 50257721, "comment_id": 87534188, "body": "@SombreroChicken Correct, however vector::back is not returning an iterator, but is the right way to do it. (see my answer)"}, {"owner": {"reputation": 1271, "user_id": 9317835, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0ff9e5ffcbb94507cb9517cde337c91?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/9317835/daniel"}, "reply_to_user": {"reputation": 125, "user_id": 8103391, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef857581426b186c22052c493e0fa368?s=128&d=identicon&r=PG&f=1", "display_name": "Nagesh Eranki", "link": "https://stackoverflow.com/users/8103391/nagesh-eranki"}, "edited": false, "score": 0, "creation_date": 1525886521, "post_id": 50257721, "comment_id": 87535645, "body": "@NageshEranki I updated my answer to give a potential solution. kiloalphaindia provides another answer that should work in your specific case, but the iterator solution would generalize better to cases where you would like to insert/remove rows within the matrix instead of just the end"}], "tags": [], "owner": {"reputation": 1271, "user_id": 9317835, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0ff9e5ffcbb94507cb9517cde337c91?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/9317835/daniel"}, "is_accepted": true, "score": 2, "last_activity_date": 1525886433, "last_edit_date": 1525886433, "creation_date": 1525882038, "answer_id": 50257721, "question_id": 50257630, "link": "https://stackoverflow.com/questions/50257630/c-matrix-initialization-using-stdvector/50257721#50257721", "title": "c++ matrix initialization using std::vector", "body": "<p>Your <code>vector&lt;&gt;</code> iterators may be invalidated by the call to <code>push_back()</code>. </p>\n\n<pre><code>A.push_back(std::vector&lt;double&gt; {});\n//it may be invalid at this point because of new allocation in the vector\nit++;\n</code></pre>\n\n<p>When you call <code>push_back()</code>, the <code>vector</code> will likely have to reallocate memory in order to accommodate the new data. This will cause the previous iterators to no longer point to a correct location in memory, and using them further will result in undefined behavior.</p>\n\n<p>If you call <code>A.begin()</code> after the <code>push_back()</code> in order to reassign your iterator and then do the increment, then the code works as expected for me. Such as:</p>\n\n<pre><code>A.push_back(std::vector&lt;double&gt; {});\nit = A.begin();\nit++;\n</code></pre>\n\n<p>EDIT</p>\n\n<p>If you would like to partially avoid the reassignment of the iterator to the beginning, you could use this:</p>\n\n<pre><code>it++;\nit = A.insert(it,std::vector&lt;double&gt;{});\n</code></pre>\n\n<p>This will add a new <code>vector&lt;double&gt;</code> right before where <code>it</code> is pointing (in this case, just before the end of the current <code>vector</code>). This will then return an iterator stored in <code>it</code> that will point to the <code>vector</code> you just inserted, so you can use the result of the code as is.</p>\n"}, {"tags": [], "owner": {"reputation": 551, "user_id": 7637816, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a9d3498eeac0ab04f4690d271f8e97d?s=128&d=identicon&r=PG&f=1", "display_name": "kiloalphaindia", "link": "https://stackoverflow.com/users/7637816/kiloalphaindia"}, "is_accepted": false, "score": 0, "last_activity_date": 1525883560, "last_edit_date": 1525883560, "creation_date": 1525883060, "answer_id": 50258000, "question_id": 50257630, "link": "https://stackoverflow.com/questions/50257630/c-matrix-initialization-using-stdvector/50258000#50258000", "title": "c++ matrix initialization using std::vector", "body": "<p>As you want to append data to your outer vector you can also do:</p>\n\n<pre><code>std::vector&lt;std::vector&lt;double&gt;&gt; A {std::vector&lt;double&gt; {}};\nA.back().push_back(1);\nA.back().push_back(2);\nA.back().push_back(3);\nA.push_back(std::vector&lt;double&gt; {});\nA.back().push_back(4);\nA.back().push_back(5);\nA.back().push_back(6);\nprint(A);\n</code></pre>\n\n<p><a href=\"https://stackoverflow.com/a/50257721/7637816\">the author of the previous answer</a> is of cause correct what concerns the invalidation of the iterator</p>\n\n<p>For an implemantation of Matrix functions you may also use <a href=\"http://eigen.tuxfamily.org\" rel=\"nofollow noreferrer\">Eigen Template Libaray</a></p>\n"}], "owner": {"reputation": 125, "user_id": 8103391, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef857581426b186c22052c493e0fa368?s=128&d=identicon&r=PG&f=1", "display_name": "Nagesh Eranki", "link": "https://stackoverflow.com/users/8103391/nagesh-eranki"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 126, "favorite_count": 0, "closed_date": 1525889553, "accepted_answer_id": 50257721, "answer_count": 2, "score": 1, "last_activity_date": 1525886433, "creation_date": 1525881722, "question_id": 50257630, "link": "https://stackoverflow.com/questions/50257630/c-matrix-initialization-using-stdvector", "closed_reason": "Duplicate", "title": "c++ matrix initialization using std::vector", "body": "<p>I am attempting to initialize a matrix that is realized as a vector of vector of doubles. I.e.,</p>\n\n<pre><code>std::vector&lt;std::vector&lt;double&gt;&gt; A {std::vector&lt;double&gt; {}}; \nstd::vector&lt;std::vector&lt;double&gt;&gt;::iterator it = A.begin();\n</code></pre>\n\n<p>My idea is to use a pointer to each \"row\", access the \"push_back\" through this pointer to fill up my rows. To make new rows, I simply use:</p>\n\n<pre><code>A.push_back(std::vector&lt;double&gt; {});\n</code></pre>\n\n<p>And then have my pointer point to the next row by simply:</p>\n\n<pre><code>it++;\n</code></pre>\n\n<p>And then fill my next row. \nThe code complies just fine (I am using C++14 standard). However when I run it, I get this:</p>\n\n<pre><code>terminate called after throwing an instance of 'std::bad_alloc'\n  what():  std::bad_alloc\nAborted (core dumped)\n</code></pre>\n\n<p>Please consider the following code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n\nvoid print(std::vector&lt;std::vector&lt;double&gt;&gt; matrix)\n{\n  typedef std::vector&lt;std::vector&lt;double&gt;&gt; row;\n  typedef std::vector&lt;double&gt; col;\n  for(row::iterator it = matrix.begin();it!=matrix.end();it++)\n  {\n    for(col::iterator ti = it-&gt;begin();ti!=it-&gt;end();ti++)\n    {\n      std::cout &lt;&lt; *ti &lt;&lt; ' ';\n    }\n    std::cout  &lt;&lt; '\\n';\n  }\n}\n\nint main()\n{\n  std::vector&lt;std::vector&lt;double&gt;&gt; A {std::vector&lt;double&gt; {}};\n  std::vector&lt;std::vector&lt;double&gt;&gt;::iterator it = A.begin();\n  it-&gt;push_back(1);\n  it-&gt;push_back(2);\n  it-&gt;push_back(3);\n  A.push_back(std::vector&lt;double&gt; {});\n  it++;\n  it-&gt;push_back(4);\n  it-&gt;push_back(5);\n  it-&gt;push_back(6);\n  print(A);\n  return 0;\n}\n</code></pre>\n\n<p>(You may it for granted that the print function works as intended without errors, during compiling or runtime).</p>\n\n<p>Any inputs will be helpful. \nCheers</p>\n"}, {"tags": ["c++", "namespaces", "operator-overloading", "argument-dependent-lookup"], "comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1525884864, "post_id": 50257432, "comment_id": 87534807, "body": "Even without the alias problem, your understanding of <a href=\"http://en.cppreference.com/w/cpp/language/adl\" rel=\"nofollow noreferrer\">ADL</a> is wrong. overloads of the namespace of argument are considered even is one exists at global namespace. We first build the set of namespace to consider."}], "answers": [{"comments": [{"owner": {"reputation": 3760, "user_id": 6594576, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/448660dad9fcb2bf8b5f7a3ab8813037?s=128&d=identicon&r=PG", "display_name": "Paul Floyd", "link": "https://stackoverflow.com/users/6594576/paul-floyd"}, "edited": false, "score": 1, "creation_date": 1525881809, "post_id": 50257511, "comment_id": 87533149, "body": "Isn&#39;t adding to namespace std UB? <a href=\"http://en.cppreference.com/w/cpp/language/extending_std\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/language/extending_std</a>"}, {"owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "reply_to_user": {"reputation": 3760, "user_id": 6594576, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/448660dad9fcb2bf8b5f7a3ab8813037?s=128&d=identicon&r=PG", "display_name": "Paul Floyd", "link": "https://stackoverflow.com/users/6594576/paul-floyd"}, "edited": false, "score": 0, "creation_date": 1525882095, "post_id": 50257511, "comment_id": 87533308, "body": "@PaulFloyd Not necessary, sometimes it is a proper way of utilizing standard library, for example <code>std::is_error_code_enum</code> or <code>std::default_delete</code> specializations."}, {"owner": {"reputation": 3760, "user_id": 6594576, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/448660dad9fcb2bf8b5f7a3ab8813037?s=128&d=identicon&r=PG", "display_name": "Paul Floyd", "link": "https://stackoverflow.com/users/6594576/paul-floyd"}, "edited": false, "score": 0, "creation_date": 1525882224, "post_id": 50257511, "comment_id": 87533374, "body": "that is mentioned in the link, partial specializations are allowed, declarations and full specializations not allowed."}, {"owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "reply_to_user": {"reputation": 3760, "user_id": 6594576, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/448660dad9fcb2bf8b5f7a3ab8813037?s=128&d=identicon&r=PG", "display_name": "Paul Floyd", "link": "https://stackoverflow.com/users/6594576/paul-floyd"}, "edited": false, "score": 0, "creation_date": 1525882552, "post_id": 50257511, "comment_id": 87533561, "body": "@PaulFloyd That article is somewhat incomplete. <code>std::is_error_code_enum</code> is an example of allowed full specialization. In case of <code>operator &lt;&lt;</code> we can not place it anywhere else because ADL lookup will be performed in <code>std</code> namespace since both arguments are from <code>std</code> namespace. see <a href=\"https://stackoverflow.com/questions/6885063/where-should-i-define-operator-for-my-specialization-of-stdpair\">similar question - Where should I define operator &gt;&gt; for my specialization of std::pair</a>"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1525883091, "post_id": 50257511, "comment_id": 87533859, "body": "&quot;Isn&#39;t adding to namespace std UB?&quot; - Usually, yes. But the standard explicitly allows adding template specializations to namespace std (and, as far as I know, that&#39;s the only thing you are allowed to add)."}], "tags": [], "owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "is_accepted": false, "score": 1, "last_activity_date": 1525881316, "creation_date": 1525881316, "answer_id": 50257511, "question_id": 50257432, "link": "https://stackoverflow.com/questions/50257432/operator-argument-dependent-lookup-does-not-look-in-global-namespace/50257511#50257511", "title": "operator &lt;&lt; argument-dependent lookup does not look in global namespace", "body": "<p>The problem here is that ADL lookup will be performed in <code>std</code> namespace and namespace where <code>CommonType</code> is declared is not relevant, so in order to make this work you need to place operator &lt;&lt; in appropriate namespace:</p>\n\n<pre><code>namespace std\n{\n\nostream&amp; operator &lt;&lt; (ostream&amp; os, const CommonType&amp; bb)\n{\n    for (auto&amp; el : bb)\n    {\n        os &lt;&lt; el;\n    }\n    return os;\n}\n\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1099, "user_id": 6162120, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EeZSp.png?s=128&g=1", "display_name": "piarston", "link": "https://stackoverflow.com/users/6162120/piarston"}, "is_accepted": false, "score": 0, "last_activity_date": 1525882627, "last_edit_date": 1525882627, "creation_date": 1525881914, "answer_id": 50257682, "question_id": 50257432, "link": "https://stackoverflow.com/questions/50257432/operator-argument-dependent-lookup-does-not-look-in-global-namespace/50257682#50257682", "title": "operator &lt;&lt; argument-dependent lookup does not look in global namespace", "body": "<p>If you don't want to move your operator in <code>std</code> namespace as recommended by VTT, you can specify that it lives in the global namespace:</p>\n\n<pre><code>(::operator &lt;&lt;)(ss, bb);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 9765838, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c45e776b4ad73449455c2fa8578b350d?s=128&d=identicon&r=PG&f=1", "display_name": "Iancu", "link": "https://stackoverflow.com/users/9765838/iancu"}, "edited": false, "score": 0, "creation_date": 1525945168, "post_id": 50258256, "comment_id": 87557026, "body": "Thanks for the three solutions!"}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 1, "last_activity_date": 1525884590, "last_edit_date": 1525884590, "creation_date": 1525883978, "answer_id": 50258256, "question_id": 50257432, "link": "https://stackoverflow.com/questions/50257432/operator-argument-dependent-lookup-does-not-look-in-global-namespace/50258256#50258256", "title": "operator &lt;&lt; argument-dependent lookup does not look in global namespace", "body": "<blockquote>\n  <p>My ADL understanding is that it will look into the current namespace (that is <code>AppNamespace::InnerNamespace</code>) and since no &lt;&lt; operator is found, it will look into the <code>namespace</code> of the arguments and as the <code>CommonType</code> is in global namespace I would expect that the &lt;&lt; operator defined in the CommonTypes.h to be found.</p>\n</blockquote>\n\n<p>The misunderstanding is that <code>CommonType</code> is a new type. It is not a new type. It is just an alias.</p>\n\n<p>You can resolve the function lookup problem using various methods.</p>\n\n<ol>\n<li><p>Define both the <code>operator&lt;&lt;</code> functions in the global namespace. </p>\n\n<pre><code>#include &lt;string&gt;\n#include &lt;sstream&gt;\n#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include &lt;cstdint&gt;\n\n// Put everything from CommonTypes.h here to simplify things.\ntypedef std::vector&lt;uint8_t&gt; CommonType;\n\nstd::ostream&amp; operator&lt;&lt;(std::ostream&amp; os, CommonType const&amp; bb)\n{\n   for (auto&amp; el : bb)\n   {\n      os &lt;&lt; el;\n   }\n   return os;\n}\n\nnamespace AppNamespace\n{\n    typedef std::vector&lt;std::string&gt; OtherType;\n}\n\nstd::ostream&amp; operator &lt;&lt; (std::ostream&amp; os, const AppNamespace::OtherType&amp; ot)\n{\n   for (auto&amp; el : ot)\n   {\n      os &lt;&lt; el;\n   }\n   return os;\n}\n\nnamespace AppNamespace\n{\n   namespace InnerNamespace\n   {\n      void function()\n      {\n         CommonType bb;\n         std::stringstream ss;\n         ss &lt;&lt; bb;\n      }\n   }\n}\n\n\nint main()\n{\n   AppNamespace::InnerNamespace::function();\n   return 0;\n}\n</code></pre></li>\n<li><p>Define both the <code>operator&lt;&lt;</code> functions in <code>AppNamespace</code> namespace.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include &lt;cstdint&gt;\n\n// Put everything from CommonTypes.h here to simplify things.\ntypedef std::vector&lt;uint8_t&gt; CommonType;\n\nnamespace AppNamespace\n{\n   std::ostream&amp; operator&lt;&lt;(std::ostream&amp; os, CommonType const&amp; bb)\n   {\n      for (auto&amp; el : bb)\n      {\n         os &lt;&lt; el;\n      }\n      return os;\n   }\n\n   typedef std::vector&lt;std::string&gt; OtherType;\n   std::ostream&amp; operator &lt;&lt; (std::ostream&amp; os, const OtherType&amp; ot)\n   {\n      for (auto&amp; el : ot)\n      {\n         os &lt;&lt; el;\n      }\n      return os;\n   }\n\n   namespace InnerNamespace\n   {\n      void function()\n      {\n         CommonType bb;\n         std::stringstream ss;\n         ss &lt;&lt; bb;\n      }\n   }\n}\n\n\nint main()\n{\n   AppNamespace::InnerNamespace::function();\n   return 0;\n}\n</code></pre></li>\n<li><p>Define <code>std::ostream&amp; operator&lt;&lt;(std::ostream&amp; os, CommonType const&amp; bb)</code> in another namespace and explicitly bring that function into scope in <code>AppNamespace</code>.</p>\n\n<pre><code>#include &lt;string&gt;\n#include &lt;sstream&gt;\n#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include &lt;cstdint&gt;\n\n// Put everything from CommonTypes.h here to simplify things.\ntypedef std::vector&lt;uint8_t&gt; CommonType;\n\nnamespace CommonNamespace\n{\n   std::ostream&amp; operator&lt;&lt;(std::ostream&amp; os, CommonType const&amp; bb)\n   {\n      for (auto&amp; el : bb)\n      {\n         os &lt;&lt; el;\n      }\n      return os;\n   }\n}\n\nnamespace AppNamespace\n{\n   // Bring the operator&lt;&lt; functions in CommonNamespace into the scope of\n   // this namespace.\n   using CommonNamespace::operator&lt;&lt;;\n\n   typedef std::vector&lt;std::string&gt; OtherType;\n   std::ostream&amp; operator &lt;&lt; (std::ostream&amp; os, const OtherType&amp; ot)\n   {\n      for (auto&amp; el : ot)\n      {\n         os &lt;&lt; el;\n      }\n      return os;\n   }\n\n   namespace InnerNamespace\n   {\n      void function()\n      {\n         CommonType bb;\n         std::stringstream ss;\n         ss &lt;&lt; bb;\n      }\n   }\n}\n\n\nint main()\n{\n   AppNamespace::InnerNamespace::function();\n   return 0;\n}\n</code></pre></li>\n</ol>\n"}], "owner": {"reputation": 1, "user_id": 9765838, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c45e776b4ad73449455c2fa8578b350d?s=128&d=identicon&r=PG&f=1", "display_name": "Iancu", "link": "https://stackoverflow.com/users/9765838/iancu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1525884590, "creation_date": 1525881030, "last_edit_date": 1525884132, "question_id": 50257432, "link": "https://stackoverflow.com/questions/50257432/operator-argument-dependent-lookup-does-not-look-in-global-namespace", "title": "operator &lt;&lt; argument-dependent lookup does not look in global namespace", "body": "<p>In the following scenario, inside function(), on line <code>ss &lt;&lt; bb</code>, I get an error:</p>\n\n<blockquote>\n  <p>binary '&lt;&lt;': no operator found which takes a right-hand operand of type 'CommonType' (or there is no acceptable conversion) error.</p>\n</blockquote>\n\n<p>My ADL understanding is that it will look into the current namespace (that is <code>AppNamespace::InnerNamespace</code>) and since no <code>operator &lt;&lt;</code> is found, it will look into the namespace of the arguments and as the <code>CommonType</code> is in global namespace I would expect that the <code>operator &lt;&lt;</code> defined in the CommonTypes.h to be found.\nObviously my understanding is wrong. Can anyone figure out how this should be working?  </p>\n\n<p>Main.cpp</p>\n\n<pre><code>namespace AppNamespace\n{\n\n    typedef std::vector&lt;std::string&gt; OtherType;\n\n    std::ostream&amp; operator &lt;&lt; (std::ostream&amp; os, const OtherType&amp; ot)\n    {\n        for (auto&amp; el : ot)\n        {\n            os &lt;&lt; el;\n        }\n        return os;\n    }\n\n    namespace InnerNamespace\n    {\n        void function()\n        {\n            CommonType bb;\n            std::stringstream ss;\n            ss &lt;&lt; bb;\n        }\n    }\n}\n\n\nint main()\n{\n    AppNamespace::InnerNamespace::function();\n    return 0;\n}\n</code></pre>\n\n<p>CommonTypes.h:</p>\n\n<pre><code>    #pragma once\n\n#include &lt;vector&gt;\n\ntypedef std::vector&lt;uint8_t&gt; CommonType;\n\nstd::ostream&amp; operator &lt;&lt; (std::ostream&amp; os, const CommonType&amp; bb)\n{\n        for (auto&amp; el : bb)\n        {\n            os &lt;&lt; el;\n        }\n        return os;\n}\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1525880849, "post_id": 50257337, "comment_id": 87532569, "body": "Please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1525880896, "post_id": 50257337, "comment_id": 87532604, "body": "Why complicate something like this with threads? Would be much less error prone as a single threaded state machine. IMHO."}, {"owner": {"reputation": 161, "user_id": 9438809, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3dc966e6b8c4d481de93300ed1c4f6d2?s=128&d=identicon&r=PG&f=1", "display_name": "George P.", "link": "https://stackoverflow.com/users/9438809/george-p"}, "edited": false, "score": 0, "creation_date": 1525881081, "post_id": 50257337, "comment_id": 87532728, "body": "Jesper Juhl, threads are the requirement of an assignment"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 2, "creation_date": 1525881379, "post_id": 50257337, "comment_id": 87532910, "body": "Change it to <code>Player &amp;chosenPlayerForFight = *it;</code> you create a copy right there"}, {"owner": {"reputation": 161, "user_id": 9438809, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3dc966e6b8c4d481de93300ed1c4f6d2?s=128&d=identicon&r=PG&f=1", "display_name": "George P.", "link": "https://stackoverflow.com/users/9438809/george-p"}, "edited": false, "score": 0, "creation_date": 1525881793, "post_id": 50257337, "comment_id": 87533138, "body": "Slava, unfortunately, it does not help."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 2, "creation_date": 1525881862, "post_id": 50257337, "comment_id": 87533177, "body": "If you want OOP you store <b>pointers</b> in your container. You can use smart pointers but you cannot use actual objects."}], "answers": [{"comments": [{"owner": {"reputation": 161, "user_id": 9438809, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3dc966e6b8c4d481de93300ed1c4f6d2?s=128&d=identicon&r=PG&f=1", "display_name": "George P.", "link": "https://stackoverflow.com/users/9438809/george-p"}, "edited": false, "score": 0, "creation_date": 1525896178, "post_id": 50258333, "comment_id": 87540452, "body": "If I understand right the smart pointers should be created in the main method: <code>std::shared_ptr&lt;Killer&gt; player1 = std::make_shared&lt;Killer&gt;(...); players.emplace_back(*player1.get());</code> But I need them actually in the <code>Player</code> class itself, where they are pointing to, so that in <code>operator()()</code> I could pass a smart pointer instead of <code>*this</code> etc. I tried <code>shared_from_this</code>, but it didn\u2019t work (<code>std::bad_weak_ptr</code>) or worked but did not offer Killer subclass polymorphic behavior <code>std::shared_ptr&lt;Player&gt; player1 = std::make_shared&lt;Killer&gt;(...)</code>"}, {"owner": {"reputation": 12194, "user_id": 4474419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04ce27f0ebe4713b51911cd8475c3b42?s=128&d=identicon&r=PG", "display_name": "Davislor", "link": "https://stackoverflow.com/users/4474419/davislor"}, "reply_to_user": {"reputation": 161, "user_id": 9438809, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3dc966e6b8c4d481de93300ed1c4f6d2?s=128&d=identicon&r=PG&f=1", "display_name": "George P.", "link": "https://stackoverflow.com/users/9438809/george-p"}, "edited": false, "score": 1, "creation_date": 1525898966, "post_id": 50258333, "comment_id": 87541738, "body": "@GeorgeP. Could you store shared pointers in <code>players</code>, and then dereference them? So, <code>*players[0]()</code> or <code>players[0]-&gt;get()</code>? To get polymorphic behavior of a derived class at runtime, the method must be <code>virtual</code>, which is the case here, and called through a pointer to the base class."}, {"owner": {"reputation": 12194, "user_id": 4474419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04ce27f0ebe4713b51911cd8475c3b42?s=128&d=identicon&r=PG", "display_name": "Davislor", "link": "https://stackoverflow.com/users/4474419/davislor"}, "reply_to_user": {"reputation": 161, "user_id": 9438809, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3dc966e6b8c4d481de93300ed1c4f6d2?s=128&d=identicon&r=PG&f=1", "display_name": "George P.", "link": "https://stackoverflow.com/users/9438809/george-p"}, "edited": false, "score": 0, "creation_date": 1525903677, "post_id": 50258333, "comment_id": 87543511, "body": "@GeorgeP. To cast a <code>shared_ptr&lt;Player&gt;</code> back to a <code>killer&amp;</code>, you would either check <code>is_killer()</code> or check the <code>typeid</code>, then <code>dynamic_cast</code> the contents of the smart pointer to <code>killer&amp;</code>. But avoid this if possible and use polymorphism."}, {"owner": {"reputation": 12194, "user_id": 4474419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04ce27f0ebe4713b51911cd8475c3b42?s=128&d=identicon&r=PG", "display_name": "Davislor", "link": "https://stackoverflow.com/users/4474419/davislor"}, "reply_to_user": {"reputation": 161, "user_id": 9438809, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3dc966e6b8c4d481de93300ed1c4f6d2?s=128&d=identicon&r=PG&f=1", "display_name": "George P.", "link": "https://stackoverflow.com/users/9438809/george-p"}, "edited": false, "score": 0, "creation_date": 1525915260, "post_id": 50258333, "comment_id": 87546311, "body": "@GeorgeP. Creating the pointers and transferring ownership of them to the container item is a good idea!"}, {"owner": {"reputation": 12194, "user_id": 4474419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04ce27f0ebe4713b51911cd8475c3b42?s=128&d=identicon&r=PG", "display_name": "Davislor", "link": "https://stackoverflow.com/users/4474419/davislor"}, "reply_to_user": {"reputation": 161, "user_id": 9438809, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3dc966e6b8c4d481de93300ed1c4f6d2?s=128&d=identicon&r=PG&f=1", "display_name": "George P.", "link": "https://stackoverflow.com/users/9438809/george-p"}, "edited": false, "score": 0, "creation_date": 1525918925, "post_id": 50258333, "comment_id": 87547118, "body": "@GeorgeP. Rewrote the example code so that a smart pointer to the derived class is created and then ownership is transferred to the base-class smart pointer in the container."}], "tags": [], "owner": {"reputation": 12194, "user_id": 4474419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04ce27f0ebe4713b51911cd8475c3b42?s=128&d=identicon&r=PG", "display_name": "Davislor", "link": "https://stackoverflow.com/users/4474419/davislor"}, "is_accepted": false, "score": 0, "last_activity_date": 1525918795, "last_edit_date": 1525918795, "creation_date": 1525884252, "answer_id": 50258333, "question_id": 50257337, "link": "https://stackoverflow.com/questions/50257337/how-to-run-a-function-of-an-actual-object-which-is-stored-in-the-container-usin/50258333#50258333", "title": "How to run a function of an actual object, which is stored in the container using OOP?", "body": "<p>Not a complete answer, since you said this is a homework assignment.</p>\n\n<p>However, one pattern you can use to solve this problem is to have your container store <code>std::unique_ptr&lt;some_base_class&gt;</code> values, or if necessary <code>std::shared_ptr&lt;some_base_class&gt;</code>, and fill them with pointers to derived objects. For example: <code>container.emplace_back(static_cast&lt;some_base_class*&gt;(new derived_class(foo, bar, baz)));</code> will construct everything in place inside your container, so the compiler doesn\u2019t need to make any temporary copies.  You might also write something like:</p>\n\n<pre><code>std::vector&lt;std::unique_ptr&lt;some_base_class&gt;&gt; container;\n\n{\n   std::unique_ptr&lt;derived_class&gt; temp =\n     make_unique&lt;derived_class&gt;();\n   temp-&gt;setup( foo, bar, baz );\n   container.emplace_back(static_cast&lt;some_base_class*&gt;(temp.release()));\n   // temp is now empty, and the pointer in the container now owns the object.\n}\n</code></pre>\n\n<p>You can use the full interface of <code>some_base_class</code> through these smart pointers, with <code>-&gt;</code>, but if you need to turn them back into references to derived objects, you would use RTTI and <code>dynamic_cast</code>.</p>\n\n<p>There are other approaches, including a discriminated union and <code>std::variant</code>, but storing smart pointers to the base class that defines your interface is what I recommend you try here.</p>\n"}], "owner": {"reputation": 161, "user_id": 9438809, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3dc966e6b8c4d481de93300ed1c4f6d2?s=128&d=identicon&r=PG&f=1", "display_name": "George P.", "link": "https://stackoverflow.com/users/9438809/george-p"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 77, "favorite_count": 2, "answer_count": 1, "score": 2, "last_activity_date": 1525918795, "creation_date": 1525880751, "question_id": 50257337, "link": "https://stackoverflow.com/questions/50257337/how-to-run-a-function-of-an-actual-object-which-is-stored-in-the-container-usin", "title": "How to run a function of an actual object, which is stored in the container using OOP?", "body": "<p>How to run a function of an actual object, which is stored in the container using OOP? </p>\n\n<p>Background: I'm writing a game. There is a set of 4 interconnected rooms. There are two different room types and two different player types. Players should run as threads. The Killer should have a fight with a normal player in the Action room. In the second type of room, nothing should happen. The game logic and code is simplified.</p>\n\n<p>When the thread starts, <code>void Player::operator()()</code> is being executed. The player enters the room, does his action <code>initializeAction()</code>, and leaves it. In case of a Killer, his <code>initializeAction()</code> leads to <code>room-&gt;actionInRoom(*this)</code>, which executes <code>player.inActionRoom()</code>.</p>\n\n<p>The problem is in this code <code>void Killer::inActionRoom()</code>:</p>\n\n<pre><code>std::vector&lt;Player&gt; &amp;playersWithoutKillers = room-&gt;getPlayersWithoutKillers();\nauto it = playersWithoutKillers.begin();\nstd::advance(it, 0);\nPlayer chosenPlayerForFight = *it;\n...\nchosenPlayerForFight.decreasePoints();\n</code></pre>\n\n<p>where <code>chosenPlayerForFight.decreasePoints();</code> does not decrease the points for the actual player, but I think it does it for a copy of an object.</p>\n\n<p>If I run the code, this mistake is visible: OtherPlayer's points will always reset to 1. If I'm decreasing it every time the fight occurs, the negative value is expected.</p>\n\n<pre><code>-&gt; Killer in Forth room Killer 11 vs OtherPlayer 1\nStarting decreasing points from 1\nEnding decreasing points from 0\n</code></pre>\n\n<p>I tried to fix the code, mainly by making sure the reference of an object is passed.</p>\n\n<p>Main.cpp:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;memory&gt;\n#include &lt;thread&gt;\n#include \"Room.h\"\n#include \"Player.h\"\n\nstd::mutex globalMessageMutex;\n\nint main() {\n\n    auto first = std::make_shared&lt;RelaxRoom&gt;(\"First room\");\n    auto second = std::make_shared&lt;ActionRoom&gt;(\"Second room\");\n    auto third = std::make_shared&lt;RelaxRoom&gt;(\"Third room\");\n    auto forth = std::make_shared&lt;ActionRoom&gt;(\"Forth room\");\n\n    first-&gt;setRoomPair(second, forth);\n    second-&gt;setRoomPair(third, first);\n    third-&gt;setRoomPair(forth, second);\n    forth-&gt;setRoomPair(first, third);\n\n    std::vector&lt;std::thread&gt; players;\n\n    players.emplace_back(OtherPlayer(\"OtherPlayer\", first));\n    players.emplace_back(Killer(\"Killer\", first));\n\n    for (auto &amp;t : players) {\n        if (t.joinable()) {\n            t.join();\n        }\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>Player.h</p>\n\n<pre><code>#ifndef HW03_PLAYER_H\n#define HW03_PLAYER_H\n\n#include &lt;string&gt;\n#include &lt;memory&gt;\n\nclass Room;\n\nclass Player {\n    friend class Room;\npublic:\n    Player(const std::string &amp;playerName, std::shared_ptr&lt;Room&gt; initialTargetRoom);\n    void operator()();\n    friend bool operator== ( const Player &amp;lhs, const Player &amp;rhs );\n    const std::string &amp;getName() const;\n    virtual void inActionRoom() {};\n    virtual void inRelaxRoom(Room &amp;pRoom) {};\n    virtual bool isKiller()const;\n    virtual bool isOtherPlayer();\n    int getPoints()const;\n    void increasePoints();\n    void decreasePoints();\n    int points;\nprotected:\n    std::shared_ptr&lt;Room&gt; room;\n    virtual void initializeAction();\nprivate:\n    std::string name;\n    std::shared_ptr&lt;Room&gt; initialRoom;\n};\n\nclass OtherPlayer : public Player {\npublic:\n    OtherPlayer(const std::string &amp;playerName, const std::shared_ptr&lt;Room&gt; &amp;initialTargetRoom);\n    void initializeAction() override;\n    void inActionRoom() override;\n    void inRelaxRoom(Room &amp;pRoom) override;\n    bool isOtherPlayer() override;\n};\n\n\nclass Killer : public Player {\npublic:\n    Killer(const std::string &amp;playerName, const std::shared_ptr&lt;Room&gt; &amp;initialTargetRoom);\n    void initializeAction()  override;\n    void inActionRoom() override;\n    void inRelaxRoom(Room &amp;pRoom) override;\n    bool isKiller() const override;\n};\n\n\n#endif //HW03_PLAYER_H\n</code></pre>\n\n<p>Player.cpp</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;chrono&gt;\n#include &lt;thread&gt;\n#include &lt;random&gt;\n#include \"Player.h\"\n#include \"Room.h\"\n\nextern std::mutex globalMessageMutex;\n\nPlayer::Player(const std::string &amp;playerName, std::shared_ptr&lt;Room&gt; initialTargetRoom) {\n    name = playerName;\n    initialRoom = initialTargetRoom;\n    room = initialTargetRoom;\n    points = 1;\n}\n\nvoid Player::operator()() {\n    room-&gt;enter(*this);\n    initializeAction();\n    std::this_thread::sleep_for(std::chrono::milliseconds(20));\n    room-&gt;leave(*this);\n\n    while (auto nextRoom = room-&gt;getNext()) {\n        room = nextRoom;\n        nextRoom-&gt;enter(*this);\n        initializeAction();\n        std::this_thread::sleep_for(std::chrono::milliseconds(20));\n        nextRoom-&gt;leave(*this);\n    }\n}\n\nvoid Player::initializeAction() {}\n\nbool operator==(const Player &amp;lhs, const Player &amp;rhs) {\n    return lhs.name == rhs.name;\n}\n\nconst std::string &amp;Player::getName() const {\n    return name;\n}\n\nbool Player::isKiller() const {\n    return false;\n}\n\nbool Player::isOtherPlayer() {\n    return false;\n}\n\nint Player::getPoints() const {\n    return points;\n}\n\nvoid Player::increasePoints() {\n    points++;\n}\n\nvoid Player::decreasePoints() {\n    std::cout &lt;&lt; \"Starting decreasing points from \" &lt;&lt; points &lt;&lt; std::endl;\n    points--;\n    std::cout &lt;&lt; \"Ending decreasing points from \" &lt;&lt; points &lt;&lt; std::endl;\n}\n\n\nOtherPlayer::OtherPlayer(const std::string &amp;playerName, const std::shared_ptr&lt;Room&gt; &amp;initialTargetRoom) : Player(playerName,\n                                                                                                         initialTargetRoom) {}\n\nvoid OtherPlayer::initializeAction() {\n    room-&gt;actionInRoom(*this);\n}\n\nvoid OtherPlayer::inActionRoom() {}\n\nvoid OtherPlayer::inRelaxRoom(Room &amp;pRoom) {}\n\nbool OtherPlayer::isOtherPlayer() {\n    return true;\n}\n\n\nKiller::Killer(const std::string &amp;playerName, const std::shared_ptr&lt;Room&gt; &amp;initialTargetRoom) : Player(playerName,\n                                                                                                         initialTargetRoom) {}\n\nvoid Killer::initializeAction() {\n    room-&gt;actionInRoom(*this);\n}\n\nvoid Killer::inActionRoom() {\n    std::lock_guard&lt;std::mutex&gt; ml(globalMessageMutex);\n    if (!room-&gt;getPlayersWithoutKillers().empty()) {\n\n        **std::vector&lt;Player&gt; &amp;playersWithoutKillers = room-&gt;getPlayersWithoutKillers();**\n\n        **auto it = playersWithoutKillers.begin();\n        std::advance(it, 0);\n        Player chosenPlayerForFight = *it;**\n\n        auto killersVitality = this-&gt;getPoints();\n        auto othersPlayerPoints = chosenPlayerForFight.getPoints();\n\n        std::cout &lt;&lt; \"-&gt; Killer in \" &lt;&lt; room-&gt;getName() &lt;&lt; \" \" &lt;&lt; this-&gt;getName() &lt;&lt; \" \" &lt;&lt; killersVitality\n                  &lt;&lt; \" vs \" &lt;&lt; chosenPlayerForFight.getName() &lt;&lt; \" \" &lt;&lt; othersPlayerPoints &lt;&lt; std::endl;\n\n        this-&gt;increasePoints();\n        **chosenPlayerForFight.decreasePoints();**\n    }\n}\n\nvoid Killer::inRelaxRoom(Room &amp;pRoom) {\n\n}\n\nbool Killer::isKiller() const {\n    return true;\n}\n</code></pre>\n\n<p>Room.h</p>\n\n<pre><code>#ifndef HW03_ROOM_H\n#define HW03_ROOM_H\n\n#include &lt;string&gt;\n#include &lt;vector&gt;\n#include &lt;condition_variable&gt;\n\n\nclass Player;\nclass Room {\n\npublic:\n    Room(const std::string &amp;roomName);\n    void setRoomPair(std::shared_ptr&lt;Room&gt; firstRoom, std::shared_ptr&lt;Room&gt; secondRoom);\n    std::shared_ptr&lt;Room&gt; getNext();\n    void enter(Player &amp;player);\n    void leave(Player &amp;player);\n    virtual void actionInRoom(Player &amp;player)= 0;\n    const std::string &amp;getName() const;\n    const std::vector&lt;Player&gt; &amp;getPlayers();\n    std::vector&lt;Player&gt; &amp;getPlayersWithoutKillers();\n\nprotected:\n    std::string name;\n    size_t killersCount;\n    size_t playersWithoutKillersCount;\n\nprivate:\n    std::vector&lt;Player&gt; players;\n    std::vector&lt;Player&gt; playersWithoutKillers;\n    std::condition_variable cv;\n    std::mutex mutex;\n    std::pair&lt;std::shared_ptr&lt;Room&gt;, std::shared_ptr&lt;Room&gt;&gt; roomPair;\n    void updateCounterPlayerLeaves(Player &amp;player);\n    void updateCounterPlayerEnters(Player &amp;player);\n};\n\nclass ActionRoom : public Room {\npublic:\n    ActionRoom(const std::string &amp;roomName) : Room(roomName) {}\n    void actionInRoom(Player &amp;player) override;\n};\n\nclass RelaxRoom : public Room {\npublic:\n    RelaxRoom(const std::string &amp;roomName) : Room(roomName) {}\n    void actionInRoom(Player &amp;player) override;\n};\n\n#endif //HW03_ROOM_H\n</code></pre>\n\n<p>Room.cpp</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;algorithm&gt;\n#include &lt;random&gt;\n#include \"Room.h\"\n#include \"Player.h\"\n#include &lt;mutex&gt;\n\nextern std::mutex globalMessageMutex;\n\n\nRoom::Room(const std::string &amp;roomName) {\n    name = roomName;\n}\n\nconst std::string &amp;Room::getName() const {\n    return name;\n}\n\nstd::shared_ptr&lt;Room&gt; Room::getNext() {\n    auto seed = std::chrono::high_resolution_clock::now().time_since_epoch().count();\n    std::mt19937 engine(seed);\n    std::uniform_int_distribution&lt;int&gt; randomGenerator(0, 1);\n    auto randomNumber = randomGenerator(engine);\n    if (randomNumber) {\n        return roomPair.second;\n    }\n    return roomPair.first;\n}\n\nvoid Room::enter(Player &amp;player) {\n    std::unique_lock&lt;std::mutex&gt; lock(mutex);\n\n    cv.wait(lock, [this, &amp;player] {\n                return true;\n            }\n    );\n\n    players.push_back(player);\n\n    updateCounterPlayerEnters(player);\n\n    std::lock_guard&lt;std::mutex&gt; ml(globalMessageMutex);\n    std::cout &lt;&lt; name &lt;&lt; \": killers: \" &lt;&lt; killersCount &lt;&lt; \", other players: \" &lt;&lt; playersWithoutKillersCount &lt;&lt;\n              std::endl;\n}\n\nvoid Room::updateCounterPlayerEnters(Player &amp;player) {\n    if (player.isKiller()) {\n        killersCount++;\n    } else {\n        playersWithoutKillersCount++;\n        playersWithoutKillers.push_back(player);\n    }\n}\n\nvoid Room::leave(Player &amp;player) {\n    {\n        std::lock_guard&lt;std::mutex&gt; lock(mutex);\n        auto it = std::find(players.begin(), players.end(), player);\n        if (it == players.end()) {\n            return;\n        }\n        players.erase(it);\n\n        updateCounterPlayerLeaves(player);\n    }\n\n    cv.notify_all();\n}\n\nvoid Room::updateCounterPlayerLeaves(Player &amp;player) {\n    if (player.isKiller()) {\n        killersCount--;\n    } else {\n        playersWithoutKillersCount--;\n        auto it = std::find(playersWithoutKillers.begin(), playersWithoutKillers.end(), player);\n        if (it == playersWithoutKillers.end()) {\n            return;\n        }\n        playersWithoutKillers.erase(it);\n    }\n}\n\nvoid Room::setRoomPair(std::shared_ptr&lt;Room&gt; firstRoom, std::shared_ptr&lt;Room&gt; secondRoom) {\n    roomPair.first = std::move(firstRoom);\n    roomPair.second = std::move(secondRoom);\n}\n\nconst std::vector&lt;Player&gt; &amp;Room::getPlayers() {\n    return players;\n}\n\nstd::vector&lt;Player&gt; &amp;Room::getPlayersWithoutKillers() {\n    return playersWithoutKillers;\n}\n\nvoid ActionRoom::actionInRoom(Player &amp;player) {\n    player.inActionRoom();\n}\n\nvoid RelaxRoom::actionInRoom(Player &amp;player) {\n    player.inRelaxRoom(*this);\n}\n</code></pre>\n"}, {"tags": ["c++", "windows", "boost", "visual-studio-2015"], "comments": [{"owner": {"reputation": 13, "user_id": 9501648, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "\u5468\u6d2a\u5b87", "link": "https://stackoverflow.com/users/9501648/%e5%91%a8%e6%b4%aa%e5%ae%87"}, "edited": false, "score": 0, "creation_date": 1525882070, "post_id": 50257250, "comment_id": 87533297, "body": "i havent defined BOOST_LOG_DOXYGEN_PASS when building boost with b2, why it is v2s_mt_nt6 not v2_mt_nt6"}, {"owner": {"reputation": 5896, "user_id": 1106415, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6fvK.png?s=128&g=1", "display_name": "hlt", "link": "https://stackoverflow.com/users/1106415/hlt"}, "edited": false, "score": 0, "creation_date": 1525888834, "post_id": 50257250, "comment_id": 87536811, "body": "Could you share a little more context on how your build is set up (what files you link with, or the build command that actually fails)? I suspect you link against a statically built version of Boost, but I need a little more data to back that up"}, {"owner": {"reputation": 13, "user_id": 9501648, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "\u5468\u6d2a\u5b87", "link": "https://stackoverflow.com/users/9501648/%e5%91%a8%e6%b4%aa%e5%ae%87"}, "reply_to_user": {"reputation": 5896, "user_id": 1106415, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6fvK.png?s=128&g=1", "display_name": "hlt", "link": "https://stackoverflow.com/users/1106415/hlt"}, "edited": false, "score": 0, "creation_date": 1525914351, "post_id": 50257250, "comment_id": 87546140, "body": "i downloaded a pre-built version of boost, and now its work,  i encountered some error when building from the boost source code to generate dynamic library. thanks a lot."}, {"owner": {"reputation": 13, "user_id": 9501648, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "\u5468\u6d2a\u5b87", "link": "https://stackoverflow.com/users/9501648/%e5%91%a8%e6%b4%aa%e5%ae%87"}, "reply_to_user": {"reputation": 5896, "user_id": 1106415, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6fvK.png?s=128&g=1", "display_name": "hlt", "link": "https://stackoverflow.com/users/1106415/hlt"}, "edited": false, "score": 0, "creation_date": 1525914422, "post_id": 50257250, "comment_id": 87546154, "body": "so the <code>s</code> in <code>v2s_mt_nt6</code> means static ?"}, {"owner": {"reputation": 5896, "user_id": 1106415, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6fvK.png?s=128&g=1", "display_name": "hlt", "link": "https://stackoverflow.com/users/1106415/hlt"}, "edited": false, "score": 0, "creation_date": 1525914854, "post_id": 50257250, "comment_id": 87546232, "body": "Yes. It&#39;s possible that your build of boost actually ended up generating static libraries - with many of them, you don&#39;t notice the differences, but Boost.Log causes trouble. I&#39;ll post this as an answer so other people can find it when they search for it."}], "answers": [{"tags": [], "owner": {"reputation": 5896, "user_id": 1106415, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6fvK.png?s=128&g=1", "display_name": "hlt", "link": "https://stackoverflow.com/users/1106415/hlt"}, "is_accepted": true, "score": 1, "last_activity_date": 1525915292, "creation_date": 1525915292, "answer_id": 50264176, "question_id": 50257250, "link": "https://stackoverflow.com/questions/50257250/boost-link-error-lnk2038-boost-log-abi-v2s-mt-nt6-doesnt-match-v2-mt-nt6/50264176#50264176", "title": "boost link error LNK2038: \u201cboost_log_abi\u201d \u201cv2s_mt_nt6\u201d doesn&#39;t match \u201cv2_mt_nt6&quot;", "body": "<p>Your Boost.Log library seems to have been built with different flags than your main program.</p>\n\n<p>From <a href=\"https://www.boost.org/doc/libs/1_67_0/boost/log/detail/config.hpp\" rel=\"nofollow noreferrer\"><code>config.hpp</code></a>, we can see what these ABI names mean:</p>\n\n<ul>\n<li><p><code>v2s_mt_nt6</code> is statically linked, with multithreading support, on Windows Vista or higher (version 6)</p></li>\n<li><p><code>v2_mt_nt6</code> is <em>dynamically</em> linked, with multithreading support, on Windows Vista or higher (version 6)</p></li>\n</ul>\n\n<p>The <code>BOOST_LOG_DLL</code> macro decides which of the two paths to use. It is defined if any of <code>BOOST_LOG_DYN_LINK</code> or <code>BOOST_ALL_DYN_LINK</code> are defined.</p>\n\n<p>If you statically link against Boost.Log (via a <code>.lib</code> files or similar), you <em>must not</em> define either of these two macros.<sup>1</sup></p>\n\n<p>This means that you can either remove the extra preprocessor definitions (because you are trying to link to a static library) or use a dynamic library version of Boost (see for example <a href=\"https://stackoverflow.com/q/4619764/1106415\">here</a> on how to set that up on Windows).</p>\n\n<hr>\n\n<p><sup><sup>1</sup> Note that some libraries <a href=\"https://stackoverflow.com/a/3051417/1106415\">ignore those flags outright</a>. Boost.Log seems to be one of the few that actually cause issues if these macros are misconfigured</sup></p>\n"}], "owner": {"reputation": 13, "user_id": 9501648, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "\u5468\u6d2a\u5b87", "link": "https://stackoverflow.com/users/9501648/%e5%91%a8%e6%b4%aa%e5%ae%87"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 474, "favorite_count": 0, "accepted_answer_id": 50264176, "answer_count": 1, "score": 1, "last_activity_date": 1525915292, "creation_date": 1525880462, "question_id": 50257250, "link": "https://stackoverflow.com/questions/50257250/boost-link-error-lnk2038-boost-log-abi-v2s-mt-nt6-doesnt-match-v2-mt-nt6", "title": "boost link error LNK2038: \u201cboost_log_abi\u201d \u201cv2s_mt_nt6\u201d doesn&#39;t match \u201cv2_mt_nt6&quot;", "body": "<p>what does this link error mean ? and how to fix it</p>\n\n<pre><code>error LNK2038: \u201cboost_log_abi\u201d \u201cv2s_mt_nt6\u201d doesn't match  \u201cv2_mt_nt6\"\n</code></pre>\n\n<p>i have tried </p>\n\n<pre><code>  ADD_DEFINITIONS(-DBOOST_ALL_DYN_LINK)\n  ADD_DEFINITIONS(-DBOOST_LOG_DYN_LINK)\n  ADD_DEFINITIONS(-DBOOST_USE_WINAPI_VERSION=0x601)\n</code></pre>\n"}, {"tags": ["c++", "qt", "endianness", "qbytearray"], "comments": [{"owner": {"reputation": 5074, "user_id": 1354854, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/013458c49caa535da7af54d010a8a0b3?s=128&d=identicon&r=PG", "display_name": "bnaecker", "link": "https://stackoverflow.com/users/1354854/bnaecker"}, "edited": false, "score": 1, "creation_date": 1525880572, "post_id": 50257210, "comment_id": 87532390, "body": "A single byte is the same in big- or little-endian. Do these bytes represent some other data type?"}, {"owner": {"reputation": 595, "user_id": 1292838, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6a1f317267d8897b850809e147276d01?s=128&d=identicon&r=PG", "display_name": "sandkasten", "link": "https://stackoverflow.com/users/1292838/sandkasten"}, "reply_to_user": {"reputation": 5074, "user_id": 1354854, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/013458c49caa535da7af54d010a8a0b3?s=128&d=identicon&r=PG", "display_name": "bnaecker", "link": "https://stackoverflow.com/users/1354854/bnaecker"}, "edited": false, "score": 0, "creation_date": 1525880790, "post_id": 50257210, "comment_id": 87532534, "body": "Hmm.. maybe I&#39;m on the false track? Do I need more a reverse function? These bytes comes direct from a measurment unit which sends the data as bytes in little endian encoding. The data is a compound of different values put togehter. So first I need to correct the data bevore working on."}, {"owner": {"reputation": 5074, "user_id": 1354854, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/013458c49caa535da7af54d010a8a0b3?s=128&d=identicon&r=PG", "display_name": "bnaecker", "link": "https://stackoverflow.com/users/1354854/bnaecker"}, "edited": false, "score": 0, "creation_date": 1525880883, "post_id": 50257210, "comment_id": 87532592, "body": "What is the exact data type that the measurement unit sends you? <code>char</code>, <code>uint16_t</code>, <code>double</code>, etc."}, {"owner": {"reputation": 595, "user_id": 1292838, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6a1f317267d8897b850809e147276d01?s=128&d=identicon&r=PG", "display_name": "sandkasten", "link": "https://stackoverflow.com/users/1292838/sandkasten"}, "reply_to_user": {"reputation": 5074, "user_id": 1354854, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/013458c49caa535da7af54d010a8a0b3?s=128&d=identicon&r=PG", "display_name": "bnaecker", "link": "https://stackoverflow.com/users/1354854/bnaecker"}, "edited": false, "score": 0, "creation_date": 1525881057, "post_id": 50257210, "comment_id": 87532708, "body": "As I meantioned bevore, it&#39;s a compounded value which need to be interpreted by decoding the QByteArray. But this is done later. First, I need to change the order. Don&#39;t hang on the data type. As written in the question, I just want another QByteArray in the &#39;right&#39; order."}, {"owner": {"reputation": 5074, "user_id": 1354854, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/013458c49caa535da7af54d010a8a0b3?s=128&d=identicon&r=PG", "display_name": "bnaecker", "link": "https://stackoverflow.com/users/1354854/bnaecker"}, "edited": false, "score": 2, "creation_date": 1525881276, "post_id": 50257210, "comment_id": 87532838, "body": "The concept of endianness only applies to multi-byte data types. So the &quot;right&quot; order depends on what the data type is. But if you just want to reverse the array, I&#39;d use <code>std::reverse</code> from the C++ algorithms library."}, {"owner": {"reputation": 595, "user_id": 1292838, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6a1f317267d8897b850809e147276d01?s=128&d=identicon&r=PG", "display_name": "sandkasten", "link": "https://stackoverflow.com/users/1292838/sandkasten"}, "reply_to_user": {"reputation": 5074, "user_id": 1354854, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/013458c49caa535da7af54d010a8a0b3?s=128&d=identicon&r=PG", "display_name": "bnaecker", "link": "https://stackoverflow.com/users/1354854/bnaecker"}, "edited": false, "score": 0, "creation_date": 1525881373, "post_id": 50257210, "comment_id": 87532906, "body": "Jep, you brought me on the right track,the std::reverse is exactly what I needed! Please put your comments and the solution in an answer I will accept it later, I&#39;m off now, thanks!"}], "answers": [{"tags": [], "owner": {"reputation": 5074, "user_id": 1354854, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/013458c49caa535da7af54d010a8a0b3?s=128&d=identicon&r=PG", "display_name": "bnaecker", "link": "https://stackoverflow.com/users/1354854/bnaecker"}, "is_accepted": true, "score": 6, "last_activity_date": 1525881499, "creation_date": 1525881499, "answer_id": 50257560, "question_id": 50257210, "link": "https://stackoverflow.com/questions/50257210/convert-qbytearray-from-big-endian-to-little-endian/50257560#50257560", "title": "Convert QByteArray from big endian to little endian", "body": "<p>It sounds like you want to reverse the array, rather than manipulate the endianness of any of the multi-byte types inside the array. The standard library has a solution for this:</p>\n\n<pre><code>QByteArray arr;\nstd::reverse(arr.begin(), arr.end());\n// arr is now in reversed order\n</code></pre>\n"}], "owner": {"reputation": 595, "user_id": 1292838, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6a1f317267d8897b850809e147276d01?s=128&d=identicon&r=PG", "display_name": "sandkasten", "link": "https://stackoverflow.com/users/1292838/sandkasten"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5105, "favorite_count": 2, "accepted_answer_id": 50257560, "answer_count": 1, "score": 3, "last_activity_date": 1525890446, "creation_date": 1525880342, "last_edit_date": 1525890446, "question_id": 50257210, "link": "https://stackoverflow.com/questions/50257210/convert-qbytearray-from-big-endian-to-little-endian", "title": "Convert QByteArray from big endian to little endian", "body": "<p>I think I\u2019m a kind of at a loss here. I trying such a simple thing, I can\u2019t believe that there is nothing build-in Qt (using Qt 5.6.2). I try to convert the data inside a QByteArray from big endian to little endian. Always starts with the same test QByteArray like this.</p>\n\n<pre><code>QByteArray value;\nvalue.append(0x01);\nvalue.append(0x02);\nvalue.append(0x03);\nqDebug() &lt;&lt; \"Original value is: \" &lt;&lt; value.toHex(); // \u201c010203\u201d like expected\n</code></pre>\n\n<p>What I need is the little endian, which means the output should be \u201c030201\u201d. Is there any build in thing so far in the Qt Framework? I don\u2019t find one. What I tried so far</p>\n\n<pre><code>// Try with build in QtEndian stuff\nQByteArray test = qToLittleEndian(value);\nqDebug() &lt;&lt; \"Test value is: \" &lt;&lt; test.toHex(); // 010203\n\n// Try via QDataStream\nQByteArray data;\nQDataStream out(&amp;data, QIODevice::ReadWrite);\nout.setByteOrder(QDataStream::LittleEndian);\nout &lt;&lt; value;\nqDebug() &lt;&lt; \"Changed value is: \" &lt;&lt; data.toHex(); // \"03000000010203\"\n</code></pre>\n\n<p>Any good idea? Or do I really need to shift hands by hand? Found nothing helpfull on SO or on google or maybe ask the wrong question...</p>\n"}, {"tags": ["c++", "fftw", "dft"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user7249049"}, "edited": false, "score": 0, "creation_date": 1525880564, "post_id": 50257143, "comment_id": 87532388, "body": "Just found the solution here: <a href=\"http://techdos.com/using-the-library-fftw-in-image-processing/\" rel=\"nofollow noreferrer\">techdos.com/using-the-library-fftw-in-image-processing</a>"}], "answers": [{"tags": [], "owner": {"reputation": 2956, "user_id": 5909388, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-uNuNWo_bCHA/AAAAAAAAAAI/AAAAAAAAABg/rciVxcULLHc/photo.jpg?sz=128", "display_name": "Kaveh Vahedipour", "link": "https://stackoverflow.com/users/5909388/kaveh-vahedipour"}, "is_accepted": false, "score": 0, "last_activity_date": 1526310435, "creation_date": 1526310435, "answer_id": 50333606, "question_id": 50257143, "link": "https://stackoverflow.com/questions/50257143/dc-component-in-the-middle-of-the-image-using-fftw/50333606#50333606", "title": "DC component in the middle of the image using fftw", "body": "<p>No it's not. You would have to write your own shift algorithm. I have written an bunch of helper functions in my medical image reconstruction library here: <a href=\"https://github.com/kvahed/codeare/blob/master/src/matrix/ft/DFT.hpp\" rel=\"nofollow noreferrer\">https://github.com/kvahed/codeare/blob/master/src/matrix/ft/DFT.hpp</a></p>\n\n<p>Feel free to use as you like. There are also more robust filters like hann, hamming etc for artifact reduction and such.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user7249049"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 87, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1526310435, "creation_date": 1525880139, "question_id": 50257143, "link": "https://stackoverflow.com/questions/50257143/dc-component-in-the-middle-of-the-image-using-fftw", "title": "DC component in the middle of the image using fftw", "body": "<p>I want to know if it is possible to get the DC component in around the middle of the image using fttw library in C++. Sometimes it is preferable to centralize the spectrum by shifting the spectrum by M/2 vertically and N/2 horizontally so that the DC component and the low-frequency components are in the middle while the high-frequency components are around the four sides.</p>\n\n<p>I looked in the documentation but they don't provide any information about that. </p>\n\n<p>Best regard,</p>\n"}, {"tags": ["c++", "qt", "qt-creator"], "answers": [{"tags": [], "owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "is_accepted": true, "score": 1, "last_activity_date": 1525882584, "last_edit_date": 1525882584, "creation_date": 1525881708, "answer_id": 50257625, "question_id": 50257069, "link": "https://stackoverflow.com/questions/50257069/qt-how-to-get-the-text-from-an-item-when-dragging-and-dropping-in-a-qgraphicsc/50257625#50257625", "title": "Qt - How to get the text from an item when dragging and dropping in a QGraphicScene?", "body": "<p>You have to decode the data since <code>QListWidget</code>, which is a <code>QAbstractItemView</code>, supports multi-selection.</p>\n\n<pre><code>void MyScene::dragEnterEvent(QGraphicsSceneDragDropEvent *event){\n    if(event-&gt;mimeData()-&gt;hasFormat(\"application/x-qabstractitemmodeldatalist\"))\n        event-&gt;setAccepted(true);\n}\nvoid MyScene::dragMoveEvent(QGraphicsSceneDragDropEvent *event){\n    if(event-&gt;mimeData()-&gt;hasFormat(\"application/x-qabstractitemmodeldatalist\"))\n        event-&gt;setAccepted(true);\n}\nvoid MyScene::dropEvent(QGraphicsSceneDragDropEvent *event){\n\n    QByteArray encoded = event-&gt;mimeData()-&gt;data(\"application/x-qabstractitemmodeldatalist\");\n    QDataStream stream(&amp;encoded, QIODevice::ReadOnly);\n\n    QStringList colors;\n\n    while (!stream.atEnd())\n    {\n        int row, col;\n        QMap&lt;int,  QVariant&gt; roleDataMap;\n        stream &gt;&gt; row &gt;&gt; col &gt;&gt; roleDataMap;\n        colors &lt;&lt; roleDataMap[Qt::DisplayRole].toString();\n    }\n    QPointF posView = event-&gt;scenePos();\n    for(const QString &amp; color: colors){\n        Block *newBlock = new Block(color);\n        newBlock-&gt;setPos(posView);\n        addItem(newBlock);\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 109, "user_id": 9369500, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2d7423e0b31673f734160cf1ed31ff7?s=128&d=identicon&r=PG", "display_name": "Gabriel_Br", "link": "https://stackoverflow.com/users/9369500/gabriel-br"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 282, "favorite_count": 1, "accepted_answer_id": 50257625, "answer_count": 1, "score": 1, "last_activity_date": 1525882584, "creation_date": 1525879883, "question_id": 50257069, "link": "https://stackoverflow.com/questions/50257069/qt-how-to-get-the-text-from-an-item-when-dragging-and-dropping-in-a-qgraphicsc", "title": "Qt - How to get the text from an item when dragging and dropping in a QGraphicScene?", "body": "<p>I'am new to Qt Creator and coding in general and I'am trying to create an application where I have a list of color options and an area where I can drag these options and create a graphic item with the color I chose, here's the code:</p>\n\n<p>I created a <code>QListWidget</code> and added two <code>QListWidgetItem</code> itens for now:</p>\n\n<pre><code>OptionList::OptionList(QWidget *parent) : QListWidget(parent)\n{\nthis-&gt;setDragEnabled(true);\nthis-&gt;setDropIndicatorShown(true);\nthis-&gt;setSelectionMode(QAbstractItemView::SingleSelection);\nthis-&gt;setDefaultDropAction(Qt::CopyAction);\nthis-&gt;setViewMode(QListView::ListMode);\n\nQListWidgetItem *blue = new QListWidgetItem;\nblue-&gt;setText(\"Blue\");\nblue-&gt;setFlags(Qt::ItemIsEnabled | Qt::ItemIsSelectable | \nQt::ItemIsDragEnabled);\naddItem(blue);\n\nQListWidgetItem *red = new QListWidgetItem;\nred-&gt;setText(\"Red\");\nred-&gt;setFlags(Qt::ItemIsEnabled | Qt::ItemIsSelectable | \nQt::ItemIsDragEnabled);\naddItem(red);\n}\n</code></pre>\n\n<p>I Created a <code>QgraphicsPathItem</code> that receives a string, depending on the string, it changes color</p>\n\n<pre><code>Block::Block(QString color, QGraphicsItem *parent) : QGraphicsPathItem(parent)\n{\nQPainterPath p;\np.addRoundedRect(0, 0, 150, 50, 2, 2);\nsetPath(p);\nsetPen(QPen(Qt::black));\nif (color == \"Blue\")\n{\n    setBrush(Qt::blue);\n}\nelse if (color == \"Red\")\n{\n    setBrush(Qt::red);\n}\nsetFlag(QGraphicsItem::ItemIsMovable);\nsetFlag(QGraphicsItem::ItemIsSelectable);\n}\n</code></pre>\n\n<p>then, I created <code>MyScene</code> class derived from <code>QGraphicsScene</code>, and reimplemented the <code>dragEnterEvent</code>, <code>dragMoveEvent</code> and <code>dropEvent</code></p>\n\n<pre><code>#include \"myscene.h\"\n\nMyScene::MyScene()\n{\nsetBackgroundBrush(Qt::lightGray);\n}\n\nvoid MyScene::dragEnterEvent(QGraphicsSceneDragDropEvent *event)\n{\nevent-&gt;setAccepted(true);\n}\n\nvoid MyScene::dragMoveEvent(QGraphicsSceneDragDropEvent *event)\n{\nevent-&gt;setAccepted(true);\n}\n\nvoid MyScene::dropEvent(QGraphicsSceneDragDropEvent *event)\n{\nQString color;\ncolor = event-&gt;mimeData()-&gt;text();\n\nBlock *newBlock = new Block(color);\n\nQPointF posView = event-&gt;scenePos();\nnewBlock-&gt;setPos(posView);\n\naddItem(newBlock);\n}\n</code></pre>\n\n<p>I tried using <code>QString color; color = event-&gt;mimeData()-&gt;text();</code> but it isn't working</p>\n\n<p>I know it has something to do with the <code>QMimeData</code> class but I don't know what to do</p>\n\n<p>How can I get the text from the item in the list and pass it to the Block class to change its color?</p>\n"}, {"tags": ["c++", "segmentation-fault", "cin"], "comments": [{"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1525879854, "post_id": 50257031, "comment_id": 87531949, "body": "1) &quot;<i>Segmentation fault in C with std::cin</i>&quot; That&#39;s impossible. C doesn&#39;t have <code>std::cin</code>. 2) &quot;<i>i am a beginner, sorry if this is a simple question</i>&quot;  If you are beginner, you should learn from a <a href=\"https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list\">good C++ book</a> instead of coding randomly."}, {"owner": {"reputation": 43, "user_id": 9765466, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "byron perez", "link": "https://stackoverflow.com/users/9765466/byron-perez"}, "reply_to_user": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1525879920, "post_id": 50257031, "comment_id": 87531993, "body": "sorry i have edited the question, please forgive me"}, {"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 0, "creation_date": 1525880250, "post_id": 50257031, "comment_id": 87532213, "body": "In addition to Michael Walz: Before <code>cin &gt;&gt; N;</code>, there might be allocation of memory for <code>Stack S1;</code> and <code>Stack S2;</code>. <code>MAX_SIZE</code> has direct effect on <code>sizeof (Stack)</code>. If you make <code>MAX_SIZE</code> big this might exceed your available stack size. Hence, application dies. <code>cin &gt;&gt; N;</code> is the closest source code line to address where your appl. dies. Hence, it looks like this was the one which failed but actually it is unrelated. To prove me, just insert an output before <code>cin &gt;&gt; N;</code> e.g. <code>cout &lt;&lt; &quot;Start\\n&quot;;</code>. I bet then this will seem to fail..."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1525880589, "post_id": 50257031, "comment_id": 87532403, "body": "What do you mean by <i>&quot;how std::cin and macros interact?&quot;</i>"}, {"owner": {"reputation": 261, "user_id": 3296970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2cf279565c0a40258ff31c03d0221a5e?s=128&d=identicon&r=PG&f=1", "display_name": "Archie Yalakki", "link": "https://stackoverflow.com/users/3296970/archie-yalakki"}, "edited": false, "score": 0, "creation_date": 1525881038, "post_id": 50257031, "comment_id": 87532692, "body": "MAX_SIZE is too big for stack, bring it to smaller number to get rid off seg fault. Refer here, <a href=\"https://cs.nyu.edu/exact/core/doc/stackOverflow.txt\" rel=\"nofollow noreferrer\">cs.nyu.edu/exact/core/doc/stackOverflow.txt</a> if you wish to change the stack size for your program."}, {"owner": {"reputation": 43, "user_id": 9765466, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "byron perez", "link": "https://stackoverflow.com/users/9765466/byron-perez"}, "edited": false, "score": 0, "creation_date": 1525881040, "post_id": 50257031, "comment_id": 87532694, "body": "oh, maybe i can say, how cin and that macro definition are related in the way that modifing the one the other becomes affected, sorry for my english"}], "answers": [{"tags": [], "owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "is_accepted": true, "score": 1, "last_activity_date": 1525881883, "last_edit_date": 1525881883, "creation_date": 1525880336, "answer_id": 50257209, "question_id": 50257031, "link": "https://stackoverflow.com/questions/50257031/segmentation-fault-in-c-with-stdcin-while-macro-is-defined/50257209#50257209", "title": "Segmentation fault in C++ with std::cin while macro is defined", "body": "<p><code>MAX_SIZE</code> is far too big. <code>MAX_SIZE</code> determines the size of your <code>Stack</code> objects. As the total size of local variables in a function is limited to a few megabytes (depending on the platform), you simply exceed this size.</p>\n\n<p>In your case you have two local <code>Stack</code> objects in <code>main</code> (<code>S1</code>and <code>S2</code>), each of them taking roughly 20 Mbytes (assuming <code>sizeof int</code> is 4).</p>\n\n<p>This is totally unrelated to <code>cin</code> though.</p>\n"}, {"tags": [], "owner": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "is_accepted": false, "score": 0, "last_activity_date": 1525880843, "creation_date": 1525880843, "answer_id": 50257361, "question_id": 50257031, "link": "https://stackoverflow.com/questions/50257031/segmentation-fault-in-c-with-stdcin-while-macro-is-defined/50257361#50257361", "title": "Segmentation fault in C++ with std::cin while macro is defined", "body": "<p>Your <code>Stack</code> objects are allocated on the stack.</p>\n\n<p>By default the stack is limited to something like 1-8 MB per thread depending on your platform.</p>\n\n<p>Each of your stack objects takes up 20 MB so you are running out of stack space. To fix this change your code to:</p>\n\n<pre><code>std::unique_ptr&lt;Stack&gt; S1(new Stack());\nstd::unique_ptr&lt;Stack&gt; S2(new Stack());\n</code></pre>\n\n<p>This will allocate your objects on the heap which is only limited by the size of the available memory and swap space on your machine.</p>\n"}], "owner": {"reputation": 43, "user_id": 9765466, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "byron perez", "link": "https://stackoverflow.com/users/9765466/byron-perez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 143, "favorite_count": 0, "accepted_answer_id": 50257209, "answer_count": 2, "score": 0, "last_activity_date": 1525881883, "creation_date": 1525879738, "last_edit_date": 1525879917, "question_id": 50257031, "link": "https://stackoverflow.com/questions/50257031/segmentation-fault-in-c-with-stdcin-while-macro-is-defined", "title": "Segmentation fault in C++ with std::cin while macro is defined", "body": "<p>I am trying to solve a problem related to stack data structure, I have an implementation of a stack, and a main method that uses it, this is a for-learning question as i am a beginner, can you guys tell me, why i get this error?:</p>\n\n<pre><code>    GDB trace:\nReading symbols from solution...done.\n[New LWP 24202]\nCore was generated by `solution'.\nProgram terminated with signal SIGSEGV, Segmentation fault.\n#0  main () at solution.cc:70\n70      cin &gt;&gt; N;\n#0  main () at solution.cc:70\n</code></pre>\n\n<p>my code is the following:</p>\n\n<pre><code>#include &lt;cmath&gt;\n#include &lt;cstdio&gt;\n#include &lt;vector&gt;\n#include &lt;iostream&gt;\n#include &lt;algorithm&gt;\nusing namespace std;\n\n#define MAX_SIZE 5000000\n\nclass Stack\n{\nprivate:\n    int A[MAX_SIZE];  // array to store the stack\n    int top;   // variable to mark the top index of stack. \npublic:\n    // constructor\n    Stack()\n    {\n        top = -1; // for empty array, set top = -1\n    }\n\n    // Push operation to insert an element on top of stack. \n    void Push(int x) \n    {\n      if(top == MAX_SIZE -1) { // overflow case. \n            printf(\"Error: stack overflow\\n\");\n            return;\n        }\n        A[++top] = x;\n    }\n\n    // Pop operation to remove an element from top of stack.\n    void Pop() \n    {\n        if(top == -1) { // If stack is empty, pop should throw error. \n            printf(\"Error: No element to pop\\n\");\n            return;\n        }\n        top--;\n    }\n\n    // Top operation to return element at top of stack. \n    int Top() \n    {\n        return A[top];\n    }\n\n    // This function will return 1 (true) if stack is empty, 0 (false) otherwise\n    int IsEmpty()\n    {\n        if(top == -1) return 1;\n        return 0;\n    }\n\n    // ONLY FOR TESTING - NOT A VALID OPERATION WITH STACK \n    // This function is just to test the implementation of stack. \n    // This will print all the elements in the stack at any stage. \n    void Print() {\n        int i;\n        printf(\"Stack: \");\n        for(i = 0;i&lt;=top;i++)\n            printf(\"%d \",A[i]);\n        printf(\"\\n\");\n    }\n};\n\nint main() {\n\n    int N;\n    cin &gt;&gt; N;\n\n    Stack S1;\n    Stack S2;\n\n\n    for(int i = 0; i &lt; N; i++)\n    {\n        int q;\n        cin &gt;&gt; q;\n\n        if(q == 1)\n        {\n            int x;\n            cin &gt;&gt; x;\n\n            if(S1.IsEmpty() || S2.IsEmpty())\n            {\n                S1.Push(x);\n                S2.Push(x);\n            }\n            else\n            {\n                S1.Push(x);\n                if(x &gt;= S2.Top()) S2.Push(x);                \n            }\n        }\n\n        if(q==2)\n        {\n            if(S1.Top() == S2.Top())\n            {\n                S1.Pop();\n                S2.Pop();\n            }else\n            {\n                S1.Pop();\n            }\n        }\n\n        if(q==3)\n        {\n            cout &lt;&lt; S2.Top() &lt;&lt; endl;\n        }\n    }\n\n\n    return 0;\n}\n</code></pre>\n\n<p>if i set MAX_SIZE variable to a lower number the code runs well, i want to know why is that the case, how std::cin and macros interact??, i am a beginner,  sorry if this is a simple question it is the first time that i am asking in stackoverflow, </p>\n"}, {"tags": ["c++", "constructor"], "comments": [{"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 1, "creation_date": 1525879708, "post_id": 50256992, "comment_id": 87531848, "body": "Consider learning from a <a href=\"https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list\">good C++ book</a>."}, {"owner": {"reputation": 2287, "user_id": 5267751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd62e8fd8fbb37abc7e2a39d23828047?s=128&d=identicon&r=PG&f=1", "display_name": "user202729", "link": "https://stackoverflow.com/users/5267751/user202729"}, "edited": false, "score": 0, "creation_date": 1525879910, "post_id": 50256992, "comment_id": 87531986, "body": "Unfortunately, the compiler error is quite misleading this time."}, {"owner": {"reputation": 2287, "user_id": 5267751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd62e8fd8fbb37abc7e2a39d23828047?s=128&d=identicon&r=PG&f=1", "display_name": "user202729", "link": "https://stackoverflow.com/users/5267751/user202729"}, "edited": false, "score": 0, "creation_date": 1525880062, "post_id": 50256992, "comment_id": 87532095, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/4519035/vc6-error-c2059-syntax-error-constant\">VC++6 error C2059: syntax error : &#39;constant&#39;</a>"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 2, "creation_date": 1525880086, "post_id": 50256992, "comment_id": 87532110, "body": "Compiler sees this as function declaration of name <code>test1</code> that returns <code>CTest1</code> and does not accept constants there. Hense the error. @songyuanyao already explained how to fix it"}], "answers": [{"tags": [], "owner": {"reputation": 144568, "user_id": 3309790, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7d1c7e499132b9945b412ac79d0e22f7?s=128&d=identicon&r=PG&f=1", "display_name": "songyuanyao", "link": "https://stackoverflow.com/users/3309790/songyuanyao"}, "is_accepted": true, "score": 4, "last_activity_date": 1525879961, "last_edit_date": 1525879961, "creation_date": 1525879788, "answer_id": 50257048, "question_id": 50256992, "link": "https://stackoverflow.com/questions/50256992/vs-compiling-error-when-passing-arguments-to-c-constructor/50257048#50257048", "title": "VS compiling error when passing arguments to c++ constructor", "body": "<p><a href=\"https://en.cppreference.com/w/cpp/language/data_members#Member_initialization\" rel=\"nofollow noreferrer\">Default member initializer</a> only works with brace or equals initializer. e.g.</p>\n\n<pre><code>class CTest2\n{\npublic:\n    CTest1 test1 = CTest1(BITMAP_1_ID, BITMAP_2_ID);\n    CTest1 test2 {BITMAP_1_ID, BITMAP_2_ID};\n};\n</code></pre>\n\n<p>Or you could use <a href=\"https://en.cppreference.com/w/cpp/language/initializer_list\" rel=\"nofollow noreferrer\">member initializer list</a>.</p>\n\n<pre><code>class CTest2\n{\npublic:\n    CTest2() : test1(BITMAP_1_ID, BITMAP_2_ID) {}\n    CTest1 test1;\n};\n</code></pre>\n"}], "owner": {"reputation": 1210, "user_id": 446647, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/2067334c78d967b570783abfb4ec6a37?s=128&d=identicon&r=PG", "display_name": "Steve A", "link": "https://stackoverflow.com/users/446647/steve-a"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "accepted_answer_id": 50257048, "answer_count": 1, "score": 1, "last_activity_date": 1525879961, "creation_date": 1525879613, "question_id": 50256992, "link": "https://stackoverflow.com/questions/50256992/vs-compiling-error-when-passing-arguments-to-c-constructor", "title": "VS compiling error when passing arguments to c++ constructor", "body": "<p>I'm trying to pass two arguments to a constructor:</p>\n\n<pre><code>class CTest1\n{\npublic:\n    CTest1(const int i8BitImageID, const int i256BitImageID) : m_i8BitImageID(i8BitImageID), m_i256BitImageID(i256BitImageID) {};\nprivate:\n    int m_i8BitImageID;\n    int m_i256BitImageID;\n};\n\n#define BITMAP_1_ID 1\n#define BITMAP_2_ID 2\n\nclass CTest2\n{\npublic:\n    CTest1 test1(BITMAP_1_ID, BITMAP_2_ID); // Compile error here\n};\n</code></pre>\n\n<p>When I compile this (using Visual Studio 2017), the line where I declare \"test1\" results in a \"C2059: syntax error: 'constant'\" error. I've tried with an without \"const\" in the definition of the constructor.</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["c++", "visual-studio-2013", "custom-build-step"], "answers": [{"tags": [], "owner": {"reputation": 135, "user_id": 3642215, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/586c4f3f7812ebec06ceda8a57103dec?s=128&d=identicon&r=PG&f=1", "display_name": "Steve", "link": "https://stackoverflow.com/users/3642215/steve"}, "is_accepted": false, "score": 1, "last_activity_date": 1526021199, "creation_date": 1526021199, "answer_id": 50286536, "question_id": 50256701, "link": "https://stackoverflow.com/questions/50256701/vs2013-c-custom-build-tool-not-working/50286536#50286536", "title": "VS2013 C++ Custom Build Tool not working", "body": "<p>Soooo... I finally figured out that for some reason, modifying the Custom Build Tool configuration using the editor was actually saving the data into the vcxproj under the wrong Configuration.  Even though I had the Configuration and Platform set correctly in the editor, it was writing to a different configuration in the file.  Who the hell knows why that is, but lesson learned - always check your vcxproj file!</p>\n"}], "owner": {"reputation": 135, "user_id": 3642215, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/586c4f3f7812ebec06ceda8a57103dec?s=128&d=identicon&r=PG&f=1", "display_name": "Steve", "link": "https://stackoverflow.com/users/3642215/steve"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 322, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1526021199, "creation_date": 1525878702, "question_id": 50256701, "link": "https://stackoverflow.com/questions/50256701/vs2013-c-custom-build-tool-not-working", "title": "VS2013 C++ Custom Build Tool not working", "body": "<p>My apologies for the lengthy text, but I've been having some trouble using the Custom Build Tool feature in VS2013 for C++ projects.  I want to take a project's \"resource.h\" file and generate an output file which, for these purposes, we'll call \"resource.out\". </p>\n\n<p>I wrote a tool that takes two command-line parameters - the \"resource.h\" file, and the \"resource.out\" file.  I first tried this on a simple app-wizard-generated doc/view application MFCApplication1.  I added file \"resource.x\" as a dummy file to get \"compiled\" using the custom build tool.  On that specific file, I set the \"Item Type\" to \"Custom Build Tool\", and when configuring the tool I have the following:</p>\n\n<pre><code>Command Line: \"&lt;path-to-tool&gt;\" resource.h .\\res\\resource.out\nOutputs: .\\res\\resource.out\nAdditional Dependencies: resource.h\n</code></pre>\n\n<p>This works.  When I build MFCApplication1, I see the following in my output window:</p>\n\n<pre><code>1&gt;  Performing Custom Build Tools\n1&gt;  Successfully generated resource out file ('res\\resource.out') \n</code></pre>\n\n<p>The second line is output from my custom build tool.  So in this simple test, everything works as I'd expect.</p>\n\n<p>Now I'm trying the same thing on my real code.  I have a solution with a number of projects, and one project is reponsible for taking another project's resources and generating a dll.  The directory structure looks like:</p>\n\n<pre><code>Main\n    MainApp\n        resource.h\n    MainRes\n        MainRes.vcxproj references \"..\\MainApp\\resource.h\"\n</code></pre>\n\n<p>So the MainRes project references the resource file from the MainApp project.  Following what was successful in my MFCApplication1 experiment, I added \"resource.x\" to the main app, and reference it in MainRes:</p>\n\n<pre><code>Main\n    MainApp\n        resource.h\n        resource.x\n    MainRes\n        MainRes.vcxproj references \"..\\MainApp\\resource.h\"\n        MainRes.vcxproj references \"..\\MainApp\\resource.x\"\n</code></pre>\n\n<p>In the MainRes project, I selected \"resource.x\" and via the context properties, set its \"Item Type\" to \"Custom Build Tool\", and configured it as:</p>\n\n<pre><code>Command Line: \"&lt;path-to-tool&gt;\" ..\\MainApp\\resource.h ..\\MainApp\\res\\resource.out\nOutputs: ..\\MainApp\\res\\resource.out\nAdditional Dependencies: ..\\MainApp\\resource.h\n</code></pre>\n\n<p>Now when I attempt to compile \"resource.x\" in MainRes, I get the following warning (warning MSB8018: No outputs specified for item \"..\\MainApp\\resource.x\"):</p>\n\n<pre><code>1&gt;C:\\Program Files (x86)\\MSBuild\\Microsoft.Cpp\\v4.0\\V120\\Microsoft.CppCommon.targets(170,5): warning MSB8018: No outputs specified for item \"..\\MainApp\\resource.x\". Its custom build command will be skipped.\n</code></pre>\n\n<p>So I thought maybe it's a context thing and changed the configuration to:</p>\n\n<pre><code>Command Line: \"&lt;path-to-tool&gt;\" resource.h .\\res\\resource.out\nOutputs: .\\res\\resource.out\nAdditional Dependencies: resource.h\n</code></pre>\n\n<p>I get the same warning.  I don't understand what I'm doing wrong here.  I have the 'Outputs' set to a file, and I have the output file in the command line.  Thanks in advance for anyone's help on this one.  I've spent way too much time on it already...</p>\n\n<ul>\n<li>Steve</li>\n</ul>\n"}, {"tags": ["python", "c++", "string", "constructor", "pybind11"], "comments": [{"owner": {"reputation": 1824, "user_id": 8704463, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/8fbfeed2e9c309c1c5d030eb9fe75707?s=128&d=identicon&r=PG&f=1", "display_name": "R zu", "link": "https://stackoverflow.com/users/8704463/r-zu"}, "edited": false, "score": 0, "creation_date": 1525879362, "post_id": 50256698, "comment_id": 87531633, "body": "I think the <code>alpha2</code> argument can be a <code>const std::list&lt;std::string&gt;&amp;</code> But I don&#39;t remember if that would cause any copying of the list. Moreover, you can&#39;t just pass a pointer, you need to specify the length of the array of char. Also, if the list just contains one letter characters, you can pass in one string like &quot;xyz&quot; instead of a list of char like [&#39;x&#39;, &#39;y&#39;, &#39;z&#39;]."}, {"owner": {"user_type": "does_not_exist", "display_name": "user4351223"}, "reply_to_user": {"reputation": 1824, "user_id": 8704463, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/8fbfeed2e9c309c1c5d030eb9fe75707?s=128&d=identicon&r=PG&f=1", "display_name": "R zu", "link": "https://stackoverflow.com/users/8704463/r-zu"}, "edited": false, "score": 0, "creation_date": 1525879889, "post_id": 50256698, "comment_id": 87531971, "body": "The lenght of the array is the second parameter to the constructor. I need to separate characters like [&#39;x&#39;,&#39;y&#39;,&#39;z&#39;]. If I do as you say, to replace const string* in the c++ code with const std::list&lt;std::string&gt;&amp;, it says &quot;no type named &#39;list&#39; in       namespace &#39;std&#39;&quot;"}, {"owner": {"reputation": 1824, "user_id": 8704463, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/8fbfeed2e9c309c1c5d030eb9fe75707?s=128&d=identicon&r=PG&f=1", "display_name": "R zu", "link": "https://stackoverflow.com/users/8704463/r-zu"}, "edited": false, "score": 0, "creation_date": 1525880005, "post_id": 50256698, "comment_id": 87532053, "body": "The python list already has a len. So there is no need for the 2nd parameter."}, {"owner": {"reputation": 1824, "user_id": 8704463, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/8fbfeed2e9c309c1c5d030eb9fe75707?s=128&d=identicon&r=PG&f=1", "display_name": "R zu", "link": "https://stackoverflow.com/users/8704463/r-zu"}, "edited": false, "score": 0, "creation_date": 1525880038, "post_id": 50256698, "comment_id": 87532079, "body": "<code>#include&lt;list&gt;</code> and <code>#include&lt;string&gt;</code>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user4351223"}, "reply_to_user": {"reputation": 1824, "user_id": 8704463, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/8fbfeed2e9c309c1c5d030eb9fe75707?s=128&d=identicon&r=PG&f=1", "display_name": "R zu", "link": "https://stackoverflow.com/users/8704463/r-zu"}, "edited": false, "score": 0, "creation_date": 1525886265, "post_id": 50256698, "comment_id": 87535519, "body": "First of all thank you for your attention. The problem here is that I have a functioning C++ library that I&#39;m not allowed to change. So here the constructor is the one I indicated in the first post, with 3 parameters: 2 integers, and a const string*. If I replace const string* with list, as you say, the compiler says that there is no matching constructor for initialization of &#39;Dfa&#39;. So the problem is that I&#39;m searching some way in python to express a thing similar to a C++ const string*. In other words, I have this constructor which I bind to correctly, but I don&#39;t know how to call it from py"}, {"owner": {"reputation": 1824, "user_id": 8704463, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/8fbfeed2e9c309c1c5d030eb9fe75707?s=128&d=identicon&r=PG&f=1", "display_name": "R zu", "link": "https://stackoverflow.com/users/8704463/r-zu"}, "edited": false, "score": 0, "creation_date": 1525887462, "post_id": 50256698, "comment_id": 87536109, "body": "You can 1. write one extra function at c++ side <code>Dfa_pybind11_wrapper(const int, const std::list&lt;std::string&gt;&amp;)</code> that calls <code>Dfa</code> 2. Change the python code to pass <code>int</code>, <code>int</code>, and <code>str</code> to the c++ function. For 2, see <a href=\"http://pybind11.readthedocs.io/en/stable/advanced/cast/strings.html\" rel=\"nofollow noreferrer\">pybind11.readthedocs.io/en/stable/advanced/cast/strings.html</a>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user4351223"}, "reply_to_user": {"reputation": 1824, "user_id": 8704463, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/8fbfeed2e9c309c1c5d030eb9fe75707?s=128&d=identicon&r=PG&f=1", "display_name": "R zu", "link": "https://stackoverflow.com/users/8704463/r-zu"}, "edited": false, "score": 0, "creation_date": 1525964543, "post_id": 50256698, "comment_id": 87568451, "body": "The second method doesn&#39;t work, because the c++ constructor is expecting a pointer to string, so I can&#39;t pass a string. For the wrapper solution I tried with this code:     .def(py::init([](int n_state,int dim_alf, std::list&lt;std::string&gt;&amp; alph){     std::string* alfabeto=new std::string[dim_alf];     std::list&lt;string&gt;::iterator it=alph.begin();     for(int i=0;it!=alph.end();++i,++it)  alfabeto[i]=*it;     Dfa::Dfa(n_state,dim_alf,alfabeto);     })) The logic is, from python side I&#39;m asking a list&lt;string&gt; and then I call the right constructor, building the correct pointer to string"}, {"owner": {"user_type": "does_not_exist", "display_name": "user4351223"}, "reply_to_user": {"reputation": 1824, "user_id": 8704463, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/8fbfeed2e9c309c1c5d030eb9fe75707?s=128&d=identicon&r=PG&f=1", "display_name": "R zu", "link": "https://stackoverflow.com/users/8704463/r-zu"}, "edited": false, "score": 0, "creation_date": 1525964580, "post_id": 50256698, "comment_id": 87568471, "body": "But I guess I&#39;m missing the point here, because I&#39;m getting two errors:     cannot pass expression of type &#39;void&#39; to variadic function and      static_assert failed &quot;pybind11::init(): init function must return a compatible pointer,       holder, or value&quot;"}, {"owner": {"reputation": 1824, "user_id": 8704463, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/8fbfeed2e9c309c1c5d030eb9fe75707?s=128&d=identicon&r=PG&f=1", "display_name": "R zu", "link": "https://stackoverflow.com/users/8704463/r-zu"}, "edited": false, "score": 0, "creation_date": 1525965900, "post_id": 50256698, "comment_id": 87569299, "body": "Ask new question and show more code. Instead of including the whole library with the <code>Dfa</code> function, do the following. Make a dummy c++ function that does nothing but takes in the same kind of arguments as your c++ function. Show the cpp file with the <code>.def</code>. Only a few people would read 8 comments. You can pass a python unicode string to a c++ function that accepts a <code>const char *s</code> pointer because pybind11 takes care of the conversion. Just look at the first example in <a href=\"http://pybind11.readthedocs.io/en/stable/advanced/cast/strings.html\" rel=\"nofollow noreferrer\">pybind11.readthedocs.io/en/stable/advanced/cast/strings.html</a>"}, {"owner": {"reputation": 1824, "user_id": 8704463, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/8fbfeed2e9c309c1c5d030eb9fe75707?s=128&d=identicon&r=PG&f=1", "display_name": "R zu", "link": "https://stackoverflow.com/users/8704463/r-zu"}, "edited": false, "score": 0, "creation_date": 1525966090, "post_id": 50256698, "comment_id": 87569401, "body": "If you can wait, I might give a complete answer 2 days later."}, {"owner": {"user_type": "does_not_exist", "display_name": "user4351223"}, "reply_to_user": {"reputation": 1824, "user_id": 8704463, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/8fbfeed2e9c309c1c5d030eb9fe75707?s=128&d=identicon&r=PG&f=1", "display_name": "R zu", "link": "https://stackoverflow.com/users/8704463/r-zu"}, "edited": false, "score": 0, "creation_date": 1525976408, "post_id": 50256698, "comment_id": 87574949, "body": "Again, thank you a lot. I asked a new question: <a href=\"https://stackoverflow.com/questions/50279180/pybind11-passing-a-string-argument-to-a-constructor\" title=\"pybind11 passing a string argument to a constructor\">stackoverflow.com/questions/50279180/&hellip;</a>  Take your time don&#39;t worry, any help is super appreciated :)"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user4351223"}, "edited": false, "score": 0, "creation_date": 1526161996, "post_id": 50310190, "comment_id": 87638066, "body": "The constructor is not as you wrote unfortunately. It does not accept <code>const char* alpha</code>but <code>const string* alpha</code>"}, {"owner": {"reputation": 1824, "user_id": 8704463, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/8fbfeed2e9c309c1c5d030eb9fe75707?s=128&d=identicon&r=PG&f=1", "display_name": "R zu", "link": "https://stackoverflow.com/users/8704463/r-zu"}, "edited": false, "score": 0, "creation_date": 1526162095, "post_id": 50310190, "comment_id": 87638096, "body": "See answer to your other question."}], "tags": [], "owner": {"reputation": 1824, "user_id": 8704463, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/8fbfeed2e9c309c1c5d030eb9fe75707?s=128&d=identicon&r=PG&f=1", "display_name": "R zu", "link": "https://stackoverflow.com/users/8704463/r-zu"}, "is_accepted": true, "score": 1, "last_activity_date": 1526154937, "creation_date": 1526154937, "answer_id": 50310190, "question_id": 50256698, "link": "https://stackoverflow.com/questions/50256698/pybind11-constructor-that-uses-pointer-to-string/50310190#50310190", "title": "PyBind11: constructor that uses pointer to string", "body": "<p>main.cpp:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;list&gt;\n#include \"pybind11/pybind11.h\"\n\nvoid Dfa(const int n_state, const std::size_t size, const char* alpha) {\n    std::cout &lt;&lt; \"n_state: \" &lt;&lt; n_state &lt;&lt; \"\\n\";\n    std::cout &lt;&lt; \"size: \" &lt;&lt; size &lt;&lt; \"\\n\";\n    std::cout &lt;&lt; \"alpha: \" &lt;&lt; alpha &lt;&lt; \"\\n\";\n}\n\nvoid dfa_wrapper(int n_state, std::string alpha) {\n    // Copy the python unicode string \n    // and make a c++ std::string.\n    // Modifying this copy won't change\n    // the original python string.\n    Dfa(n_state, alpha.size(), alpha.data());\n}\n\nPYBIND11_MODULE(_cpp, m) {\n    m.def(\"dfa\", &amp;dfa_wrapper, \"Wrapper of your Dfa::dfa\");\n}\n</code></pre>\n\n<p>CMakeLists.txt:</p>\n\n<pre><code>cmake_minimum_required(VERSION 3.9)\nproject(test_pybind11)\n\nset(CMAKE_CXX_STANDARD 11)\n\n# Find packages.\nset(PYTHON_VERSION 3)\nfind_package( PythonInterp ${PYTHON_VERSION} REQUIRED )\nfind_package( PythonLibs ${PYTHON_VERSION} REQUIRED )\n\n# Download pybind11\nset(pybind11_url https://github.com/pybind/pybind11/archive/stable.zip)\n\nset(downloaded_file ${CMAKE_BINARY_DIR}/pybind11-stable.zip)\nfile(DOWNLOAD ${pybind11_url} ${downloaded_file})\nexecute_process(COMMAND ${CMAKE_COMMAND} -E tar xzf ${downloaded_file}\n        SHOW_PROGRESS)\nfile(REMOVE ${downloaded_file})\n\nset(pybind11_dir ${CMAKE_BINARY_DIR}/pybind11-stable)\nadd_subdirectory(${pybind11_dir})\ninclude_directories(${pybind11_dir}/include)\n\n# Make python module\npybind11_add_module(_cpp main.cpp)\n</code></pre>\n\n<p>Python 3 test:</p>\n\n<pre><code>&gt;&gt;&gt; import _cpp\n&gt;&gt;&gt; _cpp.dfa(1, \"xyz\")\nn_state: 1\nsize: 3\nalpha: xyz\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user4351223"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 526, "favorite_count": 0, "accepted_answer_id": 50310190, "answer_count": 1, "score": 2, "last_activity_date": 1526154937, "creation_date": 1525878693, "last_edit_date": 1525886334, "question_id": 50256698, "link": "https://stackoverflow.com/questions/50256698/pybind11-constructor-that-uses-pointer-to-string", "title": "PyBind11: constructor that uses pointer to string", "body": "<p>I succeeded in binding this constructor</p>\n\n<pre><code>.def(py::init&lt;const int, const int, const string *&gt;())\n</code></pre>\n\n<p>My problem is when I have to use an array of strings, if I do like this</p>\n\n<pre><code>alph2=['x','y']\nz=Dfa(3,2,alph2)\n</code></pre>\n\n<p>it fails saying:</p>\n\n<pre><code>TypeError: __init__(): incompatible constructor arguments. The\nfollowing argument types are supported:\ngi_gipy.Dfa(arg0: int, arg1: int, arg2: unicode)\n</code></pre>\n\n<p>So I don't know how to pass from python something that resembles a const string*</p>\n"}, {"tags": ["c++", "boost", "iterator"], "answers": [{"tags": [], "owner": {"reputation": 3638, "user_id": 3893262, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/2c2858a4f4f41634337f78973b0281aa?s=128&d=identicon&r=PG&f=1", "display_name": "O&#39;Neil", "link": "https://stackoverflow.com/users/3893262/oneil"}, "is_accepted": true, "score": 1, "last_activity_date": 1525881102, "creation_date": 1525881102, "answer_id": 50257452, "question_id": 50256682, "link": "https://stackoverflow.com/questions/50256682/set-iterator-bracket-proxy-for-boostiterator-adapter/50257452#50257452", "title": "Set iterator_bracket_proxy for boost::iterator_adapter", "body": "<p>See documentation <a href=\"https://www.boost.org/doc/libs/1_67_0/libs/iterator/doc/facade-and-adaptor.html#id23\" rel=\"nofollow noreferrer\"><code>operator[]</code></a></p>\n\n<blockquote>\n  <p>Writable iterators built with iterator_facade implement the semantics required by the preferred resolution to <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/lwg-active.html#299\" rel=\"nofollow noreferrer\">issue 299</a> and adopted by proposal <a href=\"http://www.open-std.org/JTC1/SC22/WG21/docs/papers/2003/n1550.htm\" rel=\"nofollow noreferrer\">n1550</a>:<br>\n  <sup>(1)</sup><strong>the result of <code>p[n]</code> is an object convertible to the iterator's <code>value_type</code></strong>, and <code>p[n] = x</code> is equivalent to <code>*(p + n) = x</code> (Note: This result object may be implemented as a proxy containing a copy of <code>p+n</code>). This approach will work properly for any random-access iterator regardless of the other details of its implementation.<br>\n  <sup>(2)</sup><strong>A user who knows more about the implementation of her iterator is free to implement an <code>operator[]</code> that returns an lvalue in the derived iterator class; it will hide the one supplied by <code>iterator_facade</code> from clients of her iterator.</strong></p>\n</blockquote>\n\n<p>As of <sup>(1)</sup>, you may write:</p>\n\n<pre><code>std::cout &lt;&lt; static_cast&lt;Node&lt;int&gt;&gt;(a[4]).index_ &lt;&lt; \"\\n\";\n</code></pre>\n\n<p>Or <sup>(2)</sup> implement <code>operator[]</code>:</p>\n\n<pre><code>Node&lt;T&gt; operator[](std::ptrdiff_t n) const {\n    return *std::next(*this,n);\n}\n</code></pre>\n\n\n\n<pre><code>std::cout &lt;&lt; a[4].index_ &lt;&lt; \"\\n\";\n</code></pre>\n\n<p>or write instead:</p>\n\n<pre><code>std::cout &lt;&lt; std::next(a,4)-&gt;index_ &lt;&lt; \"\\n\";\nstd::cout &lt;&lt; (a+4)-&gt;index_ &lt;&lt; \"\\n\";\n</code></pre>\n"}], "owner": {"reputation": 1824, "user_id": 8704463, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/8fbfeed2e9c309c1c5d030eb9fe75707?s=128&d=identicon&r=PG&f=1", "display_name": "R zu", "link": "https://stackoverflow.com/users/8704463/r-zu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "accepted_answer_id": 50257452, "answer_count": 1, "score": 0, "last_activity_date": 1525881102, "creation_date": 1525878650, "question_id": 50256682, "link": "https://stackoverflow.com/questions/50256682/set-iterator-bracket-proxy-for-boostiterator-adapter", "title": "Set iterator_bracket_proxy for boost::iterator_adapter", "body": "<p>I try to make a random access iterator <code>It</code>. </p>\n\n<p>The indexing operation of <code>It</code> should return a <code>Node</code>. </p>\n\n<p>But it doesn't. How to make it do that?</p>\n\n<p>Test:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;boost/iterator/iterator_adaptor.hpp&gt;\n#include &lt;boost/iterator/counting_iterator.hpp&gt;\n\ntemplate&lt;typename T&gt;\nclass Node {\npublic:\n    explicit Node(const T index) : index_(index) {}\n    const T index_;\n};\n\ntemplate&lt;typename T&gt;\nclass It\n        : public boost::iterator_adaptor&lt;\n                It&lt;T&gt;, // Derived\n                boost::counting_iterator&lt;T&gt;, // Base\n                Node&lt;T&gt;, // Value\n                std::random_access_iterator_tag, // CategoryOrTraversal\n                Node&lt;T&gt;, // Reference\n                boost::use_default  // Difference\n        &gt; {\nprotected:\n    using self_type = It&lt;T&gt;;\n    using node_type = Node&lt;T&gt;;\npublic:\n    explicit It(const T&amp; x) : self_type::iterator_adaptor_(x){}\n\n    Node&lt;T&gt; operator*() const {\n        // Dereferencing gives a index instead of a reference.\n        auto&amp; base_iterator = this-&gt;base_reference();\n        return Node&lt;T&gt;(*base_iterator);\n    }\nprotected:\n    friend class boost::iterator_core_access;\n};\n\nint main() {\n    It&lt;int&gt; a(10);\n    std::cout &lt;&lt; (*a).index_ &lt;&lt; \"\\n\";\n    // a[4] is a\n    // class boost::iterators::detail\n    //     ::operator_brackets_proxy&lt;It&lt;int&gt; &gt;\n    // instead of a Node&lt;int&gt;.\n    std::cout &lt;&lt; a[4].index_ &lt;&lt; \"\\n\";\n}\n</code></pre>\n\n<p>Error:</p>\n\n<pre><code>error: \u2018boost::iterators::detail\n    ::operator_brackets_result&lt;It&lt;int&gt;, Node&lt;int&gt;, Node&lt;int&gt; &gt;::type \n{aka class boost::iterators::detail\n    ::operator_brackets_proxy&lt;It&lt;int&gt; &gt;}\u2019 \nhas no member named \u2018index_\u2019\n     std::cout &lt;&lt; a[4].index_ &lt;&lt; \"\\n\";\n                       ^~~~~~\n</code></pre>\n"}, {"tags": ["c++", "qt", "opengl", "opengl-es"], "comments": [{"owner": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 0, "creation_date": 1525879077, "post_id": 50256568, "comment_id": 87531420, "body": "Is there any difference between <code>((pos.z &#47; pos.w) + 1.0) * 0.5;</code> and <code>(pos.z &#47; pos.w) * 0.5 + 0.5;</code> at low z values? Could it be a float precision issue?"}, {"owner": {"reputation": 137, "user_id": 9705404, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78f2529e44ba2e9f996cc05840494394?s=128&d=identicon&r=PG&f=1", "display_name": "PowerNow", "link": "https://stackoverflow.com/users/9705404/powernow"}, "reply_to_user": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 0, "creation_date": 1525880099, "post_id": 50256568, "comment_id": 87532125, "body": "It&#39;s the same, unfortunately no difference. Maybe depth should be calculated in the fragShader, because of interpolation?"}, {"owner": {"reputation": 6058, "user_id": 3871028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbe44ff5c56628e85683c8918602c96?s=128&d=identicon&r=PG&f=1", "display_name": "Ripi2", "link": "https://stackoverflow.com/users/3871028/ripi2"}, "edited": false, "score": 0, "creation_date": 1525881564, "post_id": 50256568, "comment_id": 87533009, "body": "Do you call <code>glDepthRange*</code> or <code>glClipControl</code>? Do you use the default frame buffer?"}, {"owner": {"reputation": 137, "user_id": 9705404, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78f2529e44ba2e9f996cc05840494394?s=128&d=identicon&r=PG&f=1", "display_name": "PowerNow", "link": "https://stackoverflow.com/users/9705404/powernow"}, "edited": false, "score": 0, "creation_date": 1525882031, "post_id": 50256568, "comment_id": 87533267, "body": "I don&#39;t call glDepthRange* or glClipControl. yes I&#39;m using the default framebuffer, mainly for opengl es. but it also deviates on win10."}, {"owner": {"reputation": 6058, "user_id": 3871028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbe44ff5c56628e85683c8918602c96?s=128&d=identicon&r=PG&f=1", "display_name": "Ripi2", "link": "https://stackoverflow.com/users/3871028/ripi2"}, "edited": false, "score": 0, "creation_date": 1525884334, "post_id": 50256568, "comment_id": 87534512, "body": "It seems a float precision issue, specially if you set the depth buffer as of type 24 bits (not all drivers accept a 32 bit depth buffer)."}], "answers": [{"comments": [{"owner": {"reputation": 8286, "user_id": 533037, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/f711473fb27cd269ba5ad2064c15dcd3?s=128&d=identicon&r=PG", "display_name": "solidpixel", "link": "https://stackoverflow.com/users/533037/solidpixel"}, "edited": false, "score": 0, "creation_date": 1526069194, "post_id": 50258797, "comment_id": 87615785, "body": "Also remember most depth buffers are 24-bit unorm values, so cannot represent every value which a 32-bit float in a shader can represent."}, {"owner": {"reputation": 38487, "user_id": 2327517, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0Bulc.jpg?s=128&g=1", "display_name": "derhass", "link": "https://stackoverflow.com/users/2327517/derhass"}, "reply_to_user": {"reputation": 8286, "user_id": 533037, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/f711473fb27cd269ba5ad2064c15dcd3?s=128&d=identicon&r=PG", "display_name": "solidpixel", "link": "https://stackoverflow.com/users/533037/solidpixel"}, "edited": false, "score": 0, "creation_date": 1526071995, "post_id": 50258797, "comment_id": 87617023, "body": "@solidpixel: that&#39;s tru, but irrelevant. neither a user-defined varying nor <code>gl_FragCoord.z</code> comes from the depth buffer."}], "tags": [], "owner": {"reputation": 38487, "user_id": 2327517, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0Bulc.jpg?s=128&g=1", "display_name": "derhass", "link": "https://stackoverflow.com/users/2327517/derhass"}, "is_accepted": true, "score": 1, "last_activity_date": 1525886188, "last_edit_date": 1592644375, "creation_date": 1525886188, "answer_id": 50258797, "question_id": 50256568, "link": "https://stackoverflow.com/questions/50256568/why-differs-gl-fragcoord-z-from-pos-z-pos-w-1-0-0-5/50258797#50258797", "title": "Why differs gl_FragCoord.z from ((pos.z / pos.w) + 1.0) * 0.5?", "body": "<p>There are a couple of issues with your approach, with the main points are:</p>\n<ol>\n<li><p><code>gl_FragCoord.z</code> is hyperbolically distorted window space z value. However, the hyperoblical <code>z/w</code> value for each vertex is just <em>linearily</em> interpolated in screen space for each framgent. But when you use a varying <code>out float depth = (pos.z / pos.w)</code>, the GL will do a perspective-corrected interpolation which is non-linear. You could fix this by using <code>flat out float depth</code>.</p>\n</li>\n<li><p><code>(pos.z/pos.w)</code> doesn't even make sense. Think about it: if the point lies in a plane where the camera is, you'll get <code>pos.w=0</code>, and no valid result. <code>gl_FragCoord.z</code> does not have this issue because the clipping is done before the divide, and it will do the divide for a new vertex which lies on the near plane, and which you'll never going to see (there's no vertex shader invocation for that).</p>\n<p>The issue is also present when points lie behind the camera, they will end up mirrored in front of the camera. If you have a primitive where vertices lie on both sides of the camera, you will get complete bullshit as your interpolated <code>depth</code> value, no matter which interpolation method you chose.</p>\n</li>\n</ol>\n"}], "owner": {"reputation": 137, "user_id": 9705404, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78f2529e44ba2e9f996cc05840494394?s=128&d=identicon&r=PG&f=1", "display_name": "PowerNow", "link": "https://stackoverflow.com/users/9705404/powernow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 131, "favorite_count": 0, "accepted_answer_id": 50258797, "answer_count": 1, "score": 0, "last_activity_date": 1525886188, "creation_date": 1525878244, "last_edit_date": 1525879677, "question_id": 50256568, "link": "https://stackoverflow.com/questions/50256568/why-differs-gl-fragcoord-z-from-pos-z-pos-w-1-0-0-5", "title": "Why differs gl_FragCoord.z from ((pos.z / pos.w) + 1.0) * 0.5?", "body": "<p>Does anyone know why 'depth' (vertShader) differs from 'gl_FragCoord.z' (rendered from opengl)? Especially with decreasing z the difference becomes higher. Is it possible that 'depth' is at higher z values more precise?</p>\n\n<pre><code>.vsh\nout float depth;\nvoid main (void) {\n    vec4 pos = mvpMatrix * vertex;\n    depth = ((pos.z / pos.w) + 1.0) * 0.5;\n    gl_Position = pos;\n}\n\n.fsh\nin float depth;\nvoid main(void) {\n    gl_FragDepth = depth;// or gl_FragCoord.z;\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "visual-studio-2015"], "comments": [{"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1525878180, "post_id": 50256473, "comment_id": 87530811, "body": "Please copy-paste the output as text, instead of providing screenshots of it."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 2, "creation_date": 1525878247, "post_id": 50256473, "comment_id": 87530858, "body": "c and c++ are different languages, there is no c/c++ language. It seems like this is c. It&#39;s important to specify for which language you are asking since answers in c++ and answers in c are frequently very different."}, {"owner": {"reputation": 546, "user_id": 9721071, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "\u043c\u0430\u043b\u0438\u043d \u0447\u0435\u043a\u0443\u0440\u043e\u0432", "link": "https://stackoverflow.com/users/9721071/%d0%bc%d0%b0%d0%bb%d0%b8%d0%bd-%d1%87%d0%b5%d0%ba%d1%83%d1%80%d0%be%d0%b2"}, "edited": false, "score": 0, "creation_date": 1525878367, "post_id": 50256473, "comment_id": 87530940, "body": "It&#39;s unclear what is this code supposed to do, what is wrong with the output and how should it look like?"}, {"owner": {"reputation": 494, "user_id": 1383880, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/258c2172c30ab4b732d6fb83ffb2c586?s=128&d=identicon&r=PG", "display_name": "CannedMoose", "link": "https://stackoverflow.com/users/1383880/cannedmoose"}, "edited": false, "score": 0, "creation_date": 1525878529, "post_id": 50256473, "comment_id": 87531044, "body": "<code>nullptr</code> is only available since C++11"}, {"owner": {"reputation": 31, "user_id": 9468054, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-X0GmZO5JE8k/AAAAAAAAAAI/AAAAAAAAAFI/4DLuGbSLi9w/photo.jpg?sz=128", "display_name": "Tony Mendes", "link": "https://stackoverflow.com/users/9468054/tony-mendes"}, "edited": false, "score": 0, "creation_date": 1525878878, "post_id": 50256473, "comment_id": 87531302, "body": "The dll was written in C++, the main program in C. The first output should be similar to the second. The second output is the &quot;good one&quot;. I can only achieve that if I have breakpoints on the code, and that makes no sense for me. Every iteration of the for loop should give a different output"}], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 9468054, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-X0GmZO5JE8k/AAAAAAAAAAI/AAAAAAAAAFI/4DLuGbSLi9w/photo.jpg?sz=128", "display_name": "Tony Mendes", "link": "https://stackoverflow.com/users/9468054/tony-mendes"}, "edited": false, "score": 0, "creation_date": 1525879184, "post_id": 50256699, "comment_id": 87531497, "body": "Spot on my friend, thanks. Thought that it would trigger a new time on every call"}, {"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "reply_to_user": {"reputation": 31, "user_id": 9468054, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-X0GmZO5JE8k/AAAAAAAAAAI/AAAAAAAAAFI/4DLuGbSLi9w/photo.jpg?sz=128", "display_name": "Tony Mendes", "link": "https://stackoverflow.com/users/9468054/tony-mendes"}, "edited": false, "score": 3, "creation_date": 1525879602, "post_id": 50256699, "comment_id": 87531787, "body": "As an alternative; @TonyMendes there are better rand functions in c++ if you can move it to your dll."}], "tags": [], "owner": {"reputation": 61409, "user_id": 485343, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e18b024a122df74275dd2c4486e8a2b4?s=128&d=identicon&r=PG", "display_name": "rustyx", "link": "https://stackoverflow.com/users/485343/rustyx"}, "is_accepted": true, "score": 3, "last_activity_date": 1525878695, "creation_date": 1525878695, "answer_id": 50256699, "question_id": 50256473, "link": "https://stackoverflow.com/questions/50256473/different-result-when-hitting-breakpoints-using-dll-and-c-c/50256699#50256699", "title": "Different result when hitting breakpoints, using DLL and C/C++", "body": "<p>Yes it's because of the random generator.</p>\n\n<p>You are calling <code>srand(time(nullptr))</code> inside <code>get_powerup</code>.\nThat means the random number generator is seeded from the current time on every call, and because <code>time</code> is on a second granularity, will appear to return the same value when you run the code.</p>\n\n<p>The idea of <code>srand</code> is to be called only once during application startup to seed the PRNG. Move it to the beginning of the <code>main</code> function.</p>\n"}], "owner": {"reputation": 31, "user_id": 9468054, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-X0GmZO5JE8k/AAAAAAAAAAI/AAAAAAAAAFI/4DLuGbSLi9w/photo.jpg?sz=128", "display_name": "Tony Mendes", "link": "https://stackoverflow.com/users/9468054/tony-mendes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "accepted_answer_id": 50256699, "answer_count": 1, "score": 0, "last_activity_date": 1525878695, "creation_date": 1525877973, "last_edit_date": 1525878601, "question_id": 50256473, "link": "https://stackoverflow.com/questions/50256473/different-result-when-hitting-breakpoints-using-dll-and-c-c", "title": "Different result when hitting breakpoints, using DLL and C/C++", "body": "<p>I\u00b4m trying to develop a small game for school using C/C++ and a DLL that I made and linked implicitly. So far so good. \nNow I'm testing some functions and I'm getting different results when I run all code at once or if I put a breakpoint to stop the code.</p>\n\n<p>I'll show some code and I'll try to explain the best I can.</p>\n\n<pre><code>struct powerup get_powerup() {\nstruct powerup aux {};\n\nsrand(time(nullptr));\nint r = rand() % 100 + 1; // random number between 1 and 100\n\nif (r &lt;= 60) //common\n    aux.occurrence = common;\nelse if (r &gt; 60 &amp;&amp; r &lt; 90) //rare\n    aux.occurrence = uncommon;\nelse if (r &gt;= 90) //very rare\n    aux.occurrence = rare;\n\nswitch (aux.occurrence)\n{\ncase common:\n    r = rand() % 2 + 1;\n\n    if (r == 1)\n        aux = set_powerup(shield);\n    if (r == 2)\n        aux = set_powerup(enemy_boost);\n    break;\ncase uncommon:\n    r = rand() % 3 + 1;\n\n    if (r == 1)\n        aux = set_powerup(ice);\n    if (r == 2)\n        aux = set_powerup(battery);\n    else if (r == 3)\n        aux = set_powerup(alchool);\n    break;\ncase rare:\n    r = rand() % 2 + 1;\n\n    if (r == 1)\n        aux = set_powerup(life);\n    if (r == 2)\n        aux = set_powerup(noclip);\n    break;\n}\n\nreturn aux;\n}\n</code></pre>\n\n<p>This is the function I'm testing, very simple and works fine.</p>\n\n<pre><code>int _tmain(int argc, TCHAR *argv[]) {\n#ifdef UNICODE\n_setmode(_fileno(stdin), _O_WTEXT);\n_setmode(_fileno(stdout), _O_WTEXT);\n_setmode(_fileno(stderr), _O_WTEXT);\n#endif\nfor (int i = 0; i &lt; 10; i++)\n{\n    const struct powerup ajux = get_powerup();\n\n    _tprintf(TEXT(\"power up: %hs\\n\"), powerup_type_string[ajux.type]);\n}\n\nsystem(\"Pause\");\n\nreturn 0;\n}\n</code></pre>\n\n<p>This is my main code.\nNow the odd part, at least for me. And before you say \"its because it's a random generator\", hold on for a moment.</p>\n\n<p>When running the code all at once, I get the same result every time:</p>\n\n<pre><code>power up: Enemy Boost\npower up: Enemy Boost\npower up: Enemy Boost\npower up: Enemy Boost\npower up: Enemy Boost\npower up: Enemy Boost\npower up: Enemy Boost\npower up: Enemy Boost\npower up: Enemy Boost\npower up: Enemy Boost\n</code></pre>\n\n<p>But if put a breakpoint someone in the for loop, I get the expected result:</p>\n\n<pre><code>power up: Shield\npower up: Battery\npower up: Ice\npower up: Alchool\npower up: Alchool\npower up: Battery\npower up: No Clip\npower up: Life\npower up: Enemy Boost\npower up: Enemy Boost\n</code></pre>\n\n<p>Any suggestion for this?</p>\n"}, {"tags": ["c++", "initialization", "static-members"], "comments": [{"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 2, "creation_date": 1525878108, "post_id": 50256451, "comment_id": 87530772, "body": "<a href=\"https://isocpp.org/wiki/faq/ctors#static-init-order\" rel=\"nofollow noreferrer\">Static Initialization Order Fiasco</a>, perhaps? You haven&#39;t shown the code for <code>Config</code>."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1525878108, "post_id": 50256451, "comment_id": 87530773, "body": "The initialisation of <code>HttpApi::remoteHost</code> and <code>HttpApi::port</code> probably happens too early and at that time <code>Config::getInstance().getRemoteServer()</code> returns and empty string for whatever reason. Check that first."}, {"owner": {"reputation": 158, "user_id": 9757925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd6d651a96b5da25ab4cd0eb10a596fd?s=128&d=identicon&r=PG", "display_name": "Honey Yadav", "link": "https://stackoverflow.com/users/9757925/honey-yadav"}, "edited": false, "score": 0, "creation_date": 1525878670, "post_id": 50256451, "comment_id": 87531135, "body": "Refet to this <a href=\"https://stackoverflow.com/questions/1563897/c-static-constant-string-class-member\" title=\"c static constant string class member\">stackoverflow.com/questions/1563897/&hellip;</a>"}, {"owner": {"reputation": 261, "user_id": 3296970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2cf279565c0a40258ff31c03d0221a5e?s=128&d=identicon&r=PG&f=1", "display_name": "Archie Yalakki", "link": "https://stackoverflow.com/users/3296970/archie-yalakki"}, "edited": false, "score": 0, "creation_date": 1525879346, "post_id": 50256451, "comment_id": 87531614, "body": "The initialisation of static member objects very much depends on how the whole thing is compiled. The first thing standard says is: The static members are initialised in the order of their definition but not declaration. The second thing standard says is: The static initialisation can occur before the first use of any object or function of the class."}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1525881343, "post_id": 50256451, "comment_id": 87532885, "body": "This may help: <a href=\"https://stackoverflow.com/a/1008289/3807729\">stackoverflow.com/a/1008289/3807729</a>"}, {"owner": {"reputation": 28384, "user_id": 648265, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/4d98e414a47934d66cb78bf73d0845ba?s=128&d=identicon&r=PG", "display_name": "ivan_pozdeev", "link": "https://stackoverflow.com/users/648265/ivan-pozdeev"}, "edited": false, "score": 0, "creation_date": 1525894186, "post_id": 50256451, "comment_id": 87539512, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/185844/how-to-initialize-private-static-members-in-c\">How to initialize private static members in C++?</a>"}], "answers": [{"comments": [{"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 0, "creation_date": 1525879057, "post_id": 50256708, "comment_id": 87531405, "body": "I think your guess is more likely correct than my suggestion of the &quot;fiasco&quot;. But as you said, all we can do is guess."}, {"owner": {"reputation": 1859, "user_id": 910118, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/387fb5a9a7d7358300dbdf0cf041bd15?s=128&d=identicon&r=PG", "display_name": "shijie xu", "link": "https://stackoverflow.com/users/910118/shijie-xu"}, "edited": false, "score": 0, "creation_date": 1525879070, "post_id": 50256708, "comment_id": 87531415, "body": "Thanks. I have not notice the order of static member initialization. I will change my code"}, {"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 0, "creation_date": 1525879156, "post_id": 50256708, "comment_id": 87531481, "body": "In addition to the singleton, I think <code>HttpApi</code> having all members <code>static</code> is a red flag."}, {"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "reply_to_user": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 1, "creation_date": 1525879237, "post_id": 50256708, "comment_id": 87531545, "body": "@FredLarson OP, in only a few lines of code, provides a <i>forest</i> of red flags ;)"}, {"owner": {"reputation": 1859, "user_id": 910118, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/387fb5a9a7d7358300dbdf0cf041bd15?s=128&d=identicon&r=PG", "display_name": "shijie xu", "link": "https://stackoverflow.com/users/910118/shijie-xu"}, "reply_to_user": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 0, "creation_date": 1525879391, "post_id": 50256708, "comment_id": 87531653, "body": "@FredLarson Do you mean this is a bad design to have all static members in a class?"}, {"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 0, "creation_date": 1525879422, "post_id": 50256708, "comment_id": 87531671, "body": "Typically, yes. It essentially becomes just a namespace at that point."}, {"owner": {"reputation": 1859, "user_id": 910118, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/387fb5a9a7d7358300dbdf0cf041bd15?s=128&d=identicon&r=PG", "display_name": "shijie xu", "link": "https://stackoverflow.com/users/910118/shijie-xu"}, "edited": false, "score": 0, "creation_date": 1525879649, "post_id": 50256708, "comment_id": 87531814, "body": "Thanks. So a better way is to define a namespace <code>HttpApi</code>, and then a global method <code>postData</code> in the namespace?"}, {"owner": {"reputation": 261, "user_id": 3296970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2cf279565c0a40258ff31c03d0221a5e?s=128&d=identicon&r=PG&f=1", "display_name": "Archie Yalakki", "link": "https://stackoverflow.com/users/3296970/archie-yalakki"}, "edited": false, "score": 1, "creation_date": 1525879925, "post_id": 50256708, "comment_id": 87531996, "body": "The quick workaround would be to wrap the static member in static member function. So, the members are initialised the first time the function is invoked."}, {"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "reply_to_user": {"reputation": 261, "user_id": 3296970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2cf279565c0a40258ff31c03d0221a5e?s=128&d=identicon&r=PG&f=1", "display_name": "Archie Yalakki", "link": "https://stackoverflow.com/users/3296970/archie-yalakki"}, "edited": false, "score": 1, "creation_date": 1525880040, "post_id": 50256708, "comment_id": 87532081, "body": "@ArchieYalakki +1 but that would change the variables&#39; visibility. If this is acceptable, this is an ok workaround."}, {"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "reply_to_user": {"reputation": 1859, "user_id": 910118, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/387fb5a9a7d7358300dbdf0cf041bd15?s=128&d=identicon&r=PG", "display_name": "shijie xu", "link": "https://stackoverflow.com/users/910118/shijie-xu"}, "edited": false, "score": 0, "creation_date": 1525880891, "post_id": 50256708, "comment_id": 87532599, "body": "@shijiexu: I&#39;d probably just not use <code>static</code> and create an instance."}], "tags": [], "owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "is_accepted": true, "score": 2, "last_activity_date": 1525879692, "last_edit_date": 1525879692, "creation_date": 1525878728, "answer_id": 50256708, "question_id": 50256451, "link": "https://stackoverflow.com/questions/50256451/static-members-erroneously-initialized-as-empty-strings/50256708#50256708", "title": "Static members erroneously initialized as empty strings", "body": "<p>Since you haven't provided a <a href=\"https://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable example</a>, one can only guess what happens.</p>\n\n<p>First, static data member of classes are initialized at the very beginning of your program, in an unspecified order, before <code>main()</code> is invoked<sup>1</sup>. This means that</p>\n\n<pre><code>string HttpApi::remoteHost = Config::getInstance().getRemoteServer();\nstring HttpApi::port = Config::getInstance().getPort();\n</code></pre>\n\n<p>is evaluated before </p>\n\n<pre><code>config.loadConfig(\"config.ini\");\n</code></pre>\n\n<p>Secondly, if we make the assumption that <code>Config::getInstance()</code> returns a default constructed instance before any <code>loadConfig</code> is called, and if we also assume a default constructed <code>Config</code> is only a collection of, say, empty strings, then we can say for sure that <code>HttpApi::remoteHost</code> and <code>HttpApi::port</code> will be initialized from empty strings.</p>\n\n<p>Finally, a possible solution would be to drop the anti-pattern Singleton is, or define a way for <code>HttpApi</code> to use an already loaded configuration:</p>\n\n<pre><code>void HttpApi::load(Config const&amp; conf) // obviously declared as static\n{\n    remoteHost = conf.getRemoteServer();\n    port       = conf.getPort();\n}\n\nint main(int argc, char** argv)\n{\n    Config&amp; config = Config::getInstance();\n    std::cout &lt;&lt; \"Start loading configuration\\n\";\n    config.loadConfig(\"config.ini\");\n    HttpApi::load(config);\n    HttpApi::postData(\"hello world\");\n}\n</code></pre>\n\n<hr>\n\n<p><sup>1)</sup> This is not entirely true, for curious readers:</p>\n\n<blockquote>\n  <h3><a href=\"http://eel.is/c++draft/class.static.data#6\" rel=\"nofollow noreferrer\"><code>[class.static.data]/6</code></a></h3>\n  \n  <p>Static data members are initialized and destroyed exactly like non-local variables (<code>[basic.start.static]</code>, <code>[basic.start.dynamic]</code>, <code>[basic.start.term]</code>).</p>\n</blockquote>\n\n<p>and</p>\n\n<blockquote>\n  <h3><a href=\"http://eel.is/c++draft/basic.start.dynamic#4\" rel=\"nofollow noreferrer\"><code>[basic.start.dynamic]/4</code></a></h3>\n  \n  <p>It is implementation-defined whether the dynamic initialization of a non-local non-inline variable with static storage duration is sequenced before the first statement of main or is deferred.</p>\n</blockquote>\n"}], "owner": {"reputation": 1859, "user_id": 910118, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/387fb5a9a7d7358300dbdf0cf041bd15?s=128&d=identicon&r=PG", "display_name": "shijie xu", "link": "https://stackoverflow.com/users/910118/shijie-xu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "accepted_answer_id": 50256708, "answer_count": 1, "score": 1, "last_activity_date": 1525879692, "creation_date": 1525877901, "last_edit_date": 1525879182, "question_id": 50256451, "link": "https://stackoverflow.com/questions/50256451/static-members-erroneously-initialized-as-empty-strings", "title": "Static members erroneously initialized as empty strings", "body": "<p>I have three files: </p>\n\n<p><code>api.h</code>:</p>\n\n<pre><code>class HttpApi{\n public:\n    static bool postData(string json);\n\n private:\n    static  string remoteHost;\n    static  string port;\n    static  string url;\n};\n</code></pre>\n\n<p><code>api.cpp</code>:</p>\n\n<pre><code>string HttpApi::remoteHost = Config::getInstance().getRemoteServer();\nstring HttpApi::port = Config::getInstance().getPort();\nstring HttpApi::url=\"/api/miner\";\n\nbool HttpApi::postData(string json)\n{\n    //Here I print Config::getInstance.getRemoteServer(), the value is correct set here\n\n    cout&lt;&lt;\"Start resolve \"&lt;&lt; remoteHost&lt;&lt;\"   \"&lt;&lt;port&lt;&lt;endl;\n    cout&lt;&lt;\"Succeed in resolving \"&lt;&lt;endl;\n\n}\n</code></pre>\n\n<p>and finally:</p>\n\n<pre><code>int main(int argc, char** argv)\n{\n    Config&amp;  config = Config::getInstance();\n    cout&lt;&lt;\"Start loading configuration \"&lt;&lt;endl;\n    config.loadConfig(\"config.ini\");\n\n    HttpApi::postData(\"hello world\");\n}\n</code></pre>\n\n<p>The problem for me is that the initialization of two members <code>remoteHost</code>, <code>port</code> is invalid: at runtime, both are empty.</p>\n\n<p>Here <code>Config</code> is a singleton class and it reads values from config.ini. It has some members, such as <code>remoteHost</code>, and <code>port</code>.</p>\n\n<p>Why are both static members empty and how can I fix it?</p>\n"}, {"tags": ["c++", "arrays", "random"], "comments": [{"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 3, "creation_date": 1525877992, "post_id": 50256437, "comment_id": 87530698, "body": "Just initialize array sequencially and use <code>std::shuffle</code> and you do not need to validate."}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 1, "creation_date": 1525878109, "post_id": 50256437, "comment_id": 87530775, "body": "1) &quot;<i>but its not working this way</i>&quot; Not working.. How? 2) &quot;<i>// If there are two equal numbers</i>&quot; That&#39;s <b>not</b> what that line checks.. It checks if two <b>neighboring</b> elements are equal. 3) Did you try stepping through your code with a debugger?"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1525880586, "post_id": 50256437, "comment_id": 87532401, "body": "&quot;but i have to make sure that all 10 of its elements are different&quot; - Then you could simply add numbers to a <code>std::set</code> until it contains 10 elements, then you&#39;ll have 10 unique elements."}], "answers": [{"comments": [{"owner": {"reputation": 47, "user_id": 9151257, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f3b2d838da472849a63c647cd73e2ec2?s=128&d=identicon&r=PG&f=1", "display_name": "Default99", "link": "https://stackoverflow.com/users/9151257/default99"}, "edited": false, "score": 0, "creation_date": 1525878973, "post_id": 50256610, "comment_id": 87531359, "body": "thanks for the answer, but is there a way to do this without implementing vectors?"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 47, "user_id": 9151257, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f3b2d838da472849a63c647cd73e2ec2?s=128&d=identicon&r=PG&f=1", "display_name": "Default99", "link": "https://stackoverflow.com/users/9151257/default99"}, "edited": false, "score": 0, "creation_date": 1525879045, "post_id": 50256610, "comment_id": 87531396, "body": "Yes create array of size 12 and use first 10 elements from it as your numbers"}], "tags": [], "owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "is_accepted": true, "score": 2, "last_activity_date": 1525878374, "creation_date": 1525878374, "answer_id": 50256610, "question_id": 50256437, "link": "https://stackoverflow.com/questions/50256437/how-to-check-that-all-random-array-elements-are-different/50256610#50256610", "title": "How to check that all random array elements are different", "body": "<p>Just use <code>std::vector</code>, <code>std::iota</code> and <code>std::shuffle</code>:</p>\n\n<pre><code>std::vector&lt;int&gt; v( 12 );\nstd::iota( v.begin(), v.end(), 0 ); // initialize with values 0..11\nstd::shuffle(v.begin(), v.end(), std::mt19937{std::random_device{}()});  // make em random\nv.resize( 10 ); // remove extra elements\n</code></pre>\n\n<p>and you do not need to validate that all elements are unique</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 8200988, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Yzuaa2wfVqQ/AAAAAAAAAAI/AAAAAAAAAbQ/uVUQWdE4K7U/photo.jpg?sz=128", "display_name": "Santosh Kumar", "link": "https://stackoverflow.com/users/8200988/santosh-kumar"}, "is_accepted": false, "score": 0, "last_activity_date": 1525883222, "creation_date": 1525883222, "answer_id": 50258042, "question_id": 50256437, "link": "https://stackoverflow.com/questions/50256437/how-to-check-that-all-random-array-elements-are-different/50258042#50258042", "title": "How to check that all random array elements are different", "body": "<p>What I understood from your question that you are trying to read random numbers till all 10 numbers are different. Have a look on code below:</p>\n\n<pre><code>    #include &lt;iostream&gt;\n    #include &lt;time.h&gt;\n    #include &lt;stdlib.h&gt;\n    #include &lt;bitset&gt;\n    using namespace std;\n\n    int main()\n    {\n\n        int Numbers[10] ;\n        srand(time(NULL));\n\n        //Keep flag with all the bits '0' initially\n        bitset&lt;12&gt; flags;\n        flags.reset();\n\n        // keep taking input till all bits are not '1'\n        int i = 0;\n        do\n        {\n            int in_num = rand() % 12;\n            // check if the bit at position \"in_num\" is 0\n            if (!flags[in_num])\n            {\n                Numbers[i++] = in_num;\n                flags.set(in_num);// set the bit 1\n            }\n\n        } while (i &lt; 10);\n        for (int u = 0; u &lt; 10; u++)\n        {\n            cout &lt;&lt; endl &lt;&lt; Numbers[u];\n        }\n        return 0;\n    }\n</code></pre>\n"}], "owner": {"reputation": 47, "user_id": 9151257, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f3b2d838da472849a63c647cd73e2ec2?s=128&d=identicon&r=PG&f=1", "display_name": "Default99", "link": "https://stackoverflow.com/users/9151257/default99"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 1, "accepted_answer_id": 50256610, "answer_count": 2, "score": 1, "last_activity_date": 1525883222, "creation_date": 1525877857, "last_edit_date": 1525880775, "question_id": 50256437, "link": "https://stackoverflow.com/questions/50256437/how-to-check-that-all-random-array-elements-are-different", "title": "How to check that all random array elements are different", "body": "<p>I'm trying to pass random integers (between 0 and 11) to the Numbers[] array, but i have to make sure that all 10 of its elements are different. I've tried to pass the numbers first in the array, and then check if there are any numbers that are equal but its not working this way. Here's my code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;time.h&gt;\n#include &lt;stdlib.h&gt;\n\nusing namespace std;\n\nint main()\n{\n    int Numbers[10];\n    srand( time(NULL) );\n\n    for (int i = 0; i &lt; 10; i++ )\n    {\n        Numbers[i] = rand() % 12;         // First, the integers are passed \n        to the array (They must be between 0 and 11)\n        cout &lt;&lt; Numbers[i] &lt;&lt; endl;        // and printed to the screen\n    }\n\n    cout &lt;&lt; endl &lt;&lt; endl;\n\n    for (int u = 0; u &lt; 10; u++)\n    {\n        if(Numbers[u] == Numbers[u - 1])      // If there are two equal \nnumbers \n     {\n       switch (Numbers[u])     // One of them is incremented (But that \n    causes problems as well because it can lead to another pair of equals)\n       {\n       case 11:     // In case one of them is 11\n        Numbers[u]--;\n        break;\n\n       default:\n        Numbers[u]++;\n        break;\n\n       }\n     }\n     cout &lt;&lt; Numbers[u] &lt;&lt; endl;\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>Halp!</p>\n"}, {"tags": ["c++", "directx", "screenshot"], "comments": [{"owner": {"reputation": 28528, "user_id": 3780494, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vqia1.jpg?s=128&g=1", "display_name": "Chuck Walbourn", "link": "https://stackoverflow.com/users/3780494/chuck-walbourn"}, "edited": false, "score": 0, "creation_date": 1525885477, "post_id": 50256294, "comment_id": 87535106, "body": "Robust capture of fullscreen rendering on modern versions of Windows is quite challenging, and won&#39;t work with legacy Direct3D 9 APIs anyhow since DXGI handles the swapchain. Have you considered using something like Windows 10 Gamebar or <a href=\"http://fraps.com/\" rel=\"nofollow noreferrer\">FRAPS</a> instead?"}, {"owner": {"reputation": 1, "user_id": 2420655, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/620c0d82c920883d5cd8d5ae0ec463f1?s=128&d=identicon&r=PG", "display_name": "user2420655", "link": "https://stackoverflow.com/users/2420655/user2420655"}, "reply_to_user": {"reputation": 28528, "user_id": 3780494, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vqia1.jpg?s=128&g=1", "display_name": "Chuck Walbourn", "link": "https://stackoverflow.com/users/3780494/chuck-walbourn"}, "edited": false, "score": 0, "creation_date": 1526076883, "post_id": 50256294, "comment_id": 87618581, "body": "I don&#39;t need to record gameplay, so FRAPS or gamebar isn&#39;t exactly what I look for. I need something to process get screen for further processing inside aplication. I hoped to make simple bot template. Something that could be easily adapted to any game, to skip most boring grinders (eg. infamous 1000 iron daggers crafting). I don&#39;t have to be necessary DX9, but that would work with lots of games without messing with dll, also easy to restore for edits after reinstalling OS."}, {"owner": {"reputation": 28528, "user_id": 3780494, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vqia1.jpg?s=128&g=1", "display_name": "Chuck Walbourn", "link": "https://stackoverflow.com/users/3780494/chuck-walbourn"}, "edited": false, "score": 0, "creation_date": 1526082999, "post_id": 50256294, "comment_id": 87619816, "body": "If you are just wanting to capture a render target from your own program, use <code>ScreenShot</code> in the <a href=\"https://github.com/Microsoft/DirectXTK/wiki/ScreenGrab\" rel=\"nofollow noreferrer\">DirectX Tool Kit</a>."}], "owner": {"reputation": 1, "user_id": 2420655, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/620c0d82c920883d5cd8d5ae0ec463f1?s=128&d=identicon&r=PG", "display_name": "user2420655", "link": "https://stackoverflow.com/users/2420655/user2420655"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 329, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1525877417, "creation_date": 1525877417, "question_id": 50256294, "link": "https://stackoverflow.com/questions/50256294/directx-full-screen-app-capture", "title": "DirectX Full screen app capture", "body": "<p>I have a problem with capturing screen from full screen application (game). I made code to capture screen based on code from those links:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/30021274/capture-screen-using-directx\">Capture screen using DirectX</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/44004954/directx-partial-screen-capture\">DirectX Partial Screen Capture</a></p>\n\n<p>But it only works when using somewhere on desktop, not in full screen app. Tried to change \"parameters.Windowed\" to false, not worked, tried some options within createdevice function, but when full screen it cannot create device (stays null, hr returned is 0x88760868).</p>\n\n<p>Code:</p>\n\n<pre><code>void get_screen()\n{\n    UINT adapter = D3DADAPTER_DEFAULT;\n    IDirect3D9 *d3d = nullptr;\n    IDirect3DDevice9 *device = nullptr;\n    IDirect3DSurface9 *surface = nullptr;\n    D3DPRESENT_PARAMETERS parameters = { 0 };\n    D3DDISPLAYMODE mode;  //screen resolution\n    D3DLOCKED_RECT rc;\n    UINT pitch;\n    SYSTEMTIME st;\n    LPBYTE shots = nullptr;\n    HRESULT hr;\n\n    // init D3D and get screen size\n    d3d = Direct3DCreate9(D3D_SDK_VERSION);\n    d3d-&gt;GetAdapterDisplayMode(adapter, &amp;mode);\n\n    parameters.Windowed = TRUE;\n    parameters.BackBufferFormat = D3DFMT_A8R8G8B8;\n    parameters.BackBufferHeight = mode.Height;\n    parameters.BackBufferWidth = mode.Width;\n    parameters.SwapEffect = D3DSWAPEFFECT_DISCARD;\n\n    // create device &amp; capture surface\n    d3d-&gt;CreateDevice(adapter, D3DDEVTYPE_HAL, NULL, D3DCREATE_HARDWARE_VERTEXPROCESSING, &amp;parameters, &amp;device);\n    device-&gt;CreateOffscreenPlainSurface(mode.Width, mode.Height, D3DFMT_A8R8G8B8, D3DPOOL_SYSTEMMEM, &amp;surface, nullptr);\n\n    // get the data\n    device-&gt;GetFrontBufferData(0, surface);\n    surface-&gt;LockRect(&amp;rc, NULL, 0);\n    pitch = rc.Pitch;\n    shots = new BYTE[pitch * mode.Height];\n    CopyMemory(shots, rc.pBits, rc.Pitch * mode.Height);\n    surface-&gt;UnlockRect();\n\n    // save all screenshots\n    WCHAR file[100] = L\"test.png\";\n    save_screen(mode.Width, mode.Height, pitch, shots, file, GUID_ContainerFormatPng);\n\n    //cleanup:\n    surface-&gt;Release();\n    device-&gt;Release();\n    d3d-&gt;Release();\n}\n</code></pre>\n"}, {"tags": ["c++", "graph", "weighted-graph"], "comments": [{"owner": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "edited": false, "score": 0, "creation_date": 1525876842, "post_id": 50256056, "comment_id": 87529908, "body": "You need to store vertices in some container member variable, such as <code>std::vector&lt;vertex&gt; vertices_;</code>. The suitable type of container depends heavily on what operations your <code>weighted_graph</code> should support (insertion, removal, lookup, traversing,...)."}, {"owner": {"reputation": 89, "user_id": 6818526, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/38fc1140e39bd7fd832f9c417bb8abb4?s=128&d=identicon&r=PG&f=1", "display_name": "Dan", "link": "https://stackoverflow.com/users/6818526/dan"}, "reply_to_user": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "edited": false, "score": 0, "creation_date": 1525877104, "post_id": 50256056, "comment_id": 87530097, "body": "what would you recommend as some operations that need to be supported are computing the minimum spanning tree, depth and breadth first traversals, and implementing iterators."}, {"owner": {"reputation": 15008, "user_id": 16582, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/febff21383acf755f8b375c322e36f2b?s=128&d=identicon&r=PG", "display_name": "ravenspoint", "link": "https://stackoverflow.com/users/16582/ravenspoint"}, "edited": false, "score": 1, "creation_date": 1525878647, "post_id": 50256056, "comment_id": 87531115, "body": "Creating a graph class is an enormous amount of work with numerous pitfalls.  Not a good idea for a starter project when learning C++!  Suggest trying something easier, or else finding an open source graph class on github and experimenting with that."}], "owner": {"reputation": 89, "user_id": 6818526, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/38fc1140e39bd7fd832f9c417bb8abb4?s=128&d=identicon&r=PG&f=1", "display_name": "Dan", "link": "https://stackoverflow.com/users/6818526/dan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 43, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1525877764, "creation_date": 1525876704, "last_edit_date": 1525877764, "question_id": 50256056, "link": "https://stackoverflow.com/questions/50256056/creating-the-addvertex-function-in-a-weighed-graph", "title": "creating the addvertex function in a weighed graph", "body": "<p>below is my current code and i'm having trouble implementing the addvertex function, i'm not too sure where to start as i am fairly new to c++ any help would be appreciated. I was told using a map would be the simplest way of doing this.</p>\n\n<p>the graph needs to compute the minimum spanning tree, depth and breadth first traversals, and implementing iterators.</p>\n\n<p>the addvertex function will addthe passed vertex to the graph (with no edges).</p>\n\n<pre><code>#ifndef WEIGHTED_GRAPH_H\n#define WEIGHTED_GRAPH_H\n\n#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include &lt;queue&gt;\n#include &lt;stack&gt;\n#include &lt;iostream&gt;\n#include &lt;unordered_set&gt;\n#include &lt;unordered_map&gt;\n#include &lt;set&gt;\n#include &lt;array&gt;\n#include &lt;list&gt;\n#include &lt;forward_list&gt;\n#include &lt;deque&gt;\n#include &lt;map&gt;\n\ntemplate &lt;typename vertex&gt;\nclass weighted_graph {\n    private:\n    class graph_iterator {\n        private:\n        public:\n            graph_iterator(const weighted_graph &amp;);\n            graph_iterator(const weighted_graph &amp;, size_t);\n            ~graph_iterator();\n            graph_iterator operator=(const graph_iterator&amp;);\n            bool operator==(const graph_iterator&amp;) const;\n            bool operator!=(const graph_iterator&amp;) const;\n            graph_iterator operator++();\n            graph_iterator operator++(int);\n            const vertex operator*();\n            const vertex* operator-&gt;();\n    };\n\n    class neighbour_iterator {\n        private:\n        public:\n            neighbour_iterator(const neighbour_iterator&amp;);\n            neighbour_iterator(const weighted_graph &amp;, const vertex&amp;);\n            neighbour_iterator(const weighted_graph &amp;, const vertex&amp;, size_t);\n            ~neighbour_iterator();\n            neighbour_iterator operator=(const neighbour_iterator&amp; it);\n            bool operator==(const neighbour_iterator&amp;) const;\n            bool operator!=(const neighbour_iterator&amp;) const;\n            neighbour_iterator operator++();\n            neighbour_iterator operator++(int);         \n            const std::pair&lt;vertex, int&gt; operator*();\n            const std::pair&lt;const vertex, int&gt;* operator-&gt;();\n    };\n\n    public:\n\n\n    weighted_graph(); \n    ~weighted_graph();\n\n    void add_vertex(const vertex&amp;);\n</code></pre>\n"}, {"tags": ["javascript", "c++", "emscripten"], "owner": {"reputation": 111, "user_id": 8968047, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f4078584910ac7df170c050ff732248d?s=128&d=identicon&r=PG&f=1", "display_name": "JaDoLo", "link": "https://stackoverflow.com/users/8968047/jadolo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 136, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1525879715, "creation_date": 1525876520, "last_edit_date": 1525879715, "question_id": 50256019, "link": "https://stackoverflow.com/questions/50256019/compiling-openface-written-in-c-with-emscripten-get-the-warnings-unresolved", "title": "Compiling OpenFace written in C++ with Emscripten, get the warnings: &quot;unresolved symbol&quot;", "body": "<p>When compiling in bitcode <code>em++ FaceLandmarkVid.cpp -std=c++11 -o OpenFace.bc</code> I get no warnings. When I compile from the bitcode to JavaScript <code>em++ OpenFace.bc source.bc -o OpneFace.js</code> I get the following:<br /></p>\n\n<pre><code>warning: unresolved symbol: _ZN12GazeAnalysis12EstimateGazeERKN16LandmarkDetector4CLNFERN2cv7Point3_IfEEffffb\nwarning: unresolved symbol: _ZN16LandmarkDetector19FaceModelParametersC1ERNSt3__26vectorINS1_12basic_stringIcNS1_11char_\ntraitsIcEENS1_9allocatorIcEEEENS6_IS8_EEEE\nwarning: unresolved symbol: _ZN16LandmarkDetector22DetectLandmarksInVideoERKN2cv4Mat_IhEERNS_4CLNFERNS_19FaceModelParame\ntersE\nwarning: unresolved symbol: _ZN16LandmarkDetector23Calculate3DEyeLandmarksERKNS_4CLNFEdddd\nwarning: unresolved symbol: _ZN16LandmarkDetector24CalculateAllEyeLandmarksERKNS_4CLNFE\nwarning: unresolved symbol: _ZN16LandmarkDetector4CLNF5ResetEv\nwarning: unresolved symbol: _ZN16LandmarkDetector4CLNFC1ENSt3__212basic_stringIcNS1_11char_traitsIcEENS1_9allocatorIcEEE\nE\nwarning: unresolved symbol: _ZN16LandmarkDetector7GetPoseERKNS_4CLNFEffff\nwarning: unresolved symbol: _ZN2cv12VideoCaptureC1Ev\nwarning: unresolved symbol: _ZN2cv12VideoCaptureD1Ev\nwarning: unresolved symbol: _ZN2cv17CascadeClassifierD1Ev\nwarning: unresolved symbol: _ZN2cv3Mat10deallocateEv\nwarning: unresolved symbol: _ZN2cv8fastFreeEPv\nwarning: unresolved symbol: _ZN5boost6system15system_categoryEv\nwarning: unresolved symbol: _ZN5boost6system16generic_categoryEv\nwarning: unresolved symbol: _ZN9Utilities10FpsTracker6GetFPSEv\nwarning: unresolved symbol: _ZN9Utilities10FpsTracker8AddFrameEv\nwarning: unresolved symbol: _ZN9Utilities10FpsTrackerC1Ev\nwarning: unresolved symbol: _ZN9Utilities10Visualizer15ShowObservationEv\nwarning: unresolved symbol: _ZN9Utilities10Visualizer18SetObservationGazeERKN2cv7Point3_IfEES5_RKNSt3__26vectorINS1_6Poi\nnt_IdEENS6_9allocatorIS9_EEEERKNS7_INS2_IdEENSA_ISF_EEEEd\nwarning: unresolved symbol: _ZN9Utilities10Visualizer18SetObservationPoseERKN2cv3VecIdLi6EEEd\nwarning: unresolved symbol: _ZN9Utilities10Visualizer23SetObservationLandmarksERKN2cv4Mat_IdEEdRKNS2_IiEE\nwarning: unresolved symbol: _ZN9Utilities10Visualizer6SetFpsEd\nwarning: unresolved symbol: _ZN9Utilities10Visualizer8SetImageERKN2cv3MatEffff\nwarning: unresolved symbol: _ZN9Utilities10VisualizerC1Ebbb\nwarning: unresolved symbol: _ZN9Utilities15SequenceCapture12GetGrayFrameEv\nwarning: unresolved symbol: _ZN9Utilities15SequenceCapture12GetNextFrameEv\nwarning: unresolved symbol: _ZN9Utilities15SequenceCapture4OpenERNSt3__26vectorINS1_12basic_stringIcNS1_11char_traitsIcE\nENS1_9allocatorIcEEEENS6_IS8_EEEE\nwarning: unresolved symbol: _ZN9Utilities15SequenceCaptureD1Ev\nwarning: unresolved symbol: _ZNK16LandmarkDetector4CLNF15GetVisibilitiesEv`\n</code></pre>\n\n<p>Could that mean that a function has a declaration but no definition?</p>\n"}, {"tags": ["c++", "multithreading", "wxwidgets"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 1, "creation_date": 1525875615, "post_id": 50255642, "comment_id": 87528949, "body": "Perhaps <a href=\"http://en.cppreference.com/w/cpp/thread/async\" rel=\"nofollow noreferrer\"><code>std::async</code></a> could help solve your problem."}], "answers": [{"comments": [{"owner": {"reputation": 28522, "user_id": 459943, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1820b3c909a14f78a3b8c5aa46f9759f?s=128&d=identicon&r=PG", "display_name": "Lion King", "link": "https://stackoverflow.com/users/459943/lion-king"}, "edited": false, "score": 0, "creation_date": 1525883380, "post_id": 50256738, "comment_id": 87534015, "body": "<code>The point is that the secondary thread posts a message to the main thread telling &quot;I&#39;m done, image is available&quot;. </code>.  How do I know that the thread has finished its task and ready?"}, {"owner": {"reputation": 6058, "user_id": 3871028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbe44ff5c56628e85683c8918602c96?s=128&d=identicon&r=PG&f=1", "display_name": "Ripi2", "link": "https://stackoverflow.com/users/3871028/ripi2"}, "reply_to_user": {"reputation": 28522, "user_id": 459943, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1820b3c909a14f78a3b8c5aa46f9759f?s=128&d=identicon&r=PG", "display_name": "Lion King", "link": "https://stackoverflow.com/users/459943/lion-king"}, "edited": false, "score": 0, "creation_date": 1525883640, "post_id": 50256738, "comment_id": 87534159, "body": "@LionKing In the secondary thread, after <code>getPicture()</code> ends, post the message, just before exiting <code>Entry()</code>"}, {"owner": {"reputation": 28522, "user_id": 459943, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1820b3c909a14f78a3b8c5aa46f9759f?s=128&d=identicon&r=PG", "display_name": "Lion King", "link": "https://stackoverflow.com/users/459943/lion-king"}, "edited": false, "score": 0, "creation_date": 1525883777, "post_id": 50256738, "comment_id": 87534241, "body": "Regarding, <code>While getPicture() can be executed in a secondary thread, showPicture() should be executed in the main thread because it&#39;s the right place to draw into the window</code>. when putting the <code>showPicture()</code> in the main window and <code>getPicture()</code> in a thread, the result was that  <code>showPicture()</code> doesn&#39;t display the current image but displays the previos image"}, {"owner": {"reputation": 6058, "user_id": 3871028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbe44ff5c56628e85683c8918602c96?s=128&d=identicon&r=PG&f=1", "display_name": "Ripi2", "link": "https://stackoverflow.com/users/3871028/ripi2"}, "reply_to_user": {"reputation": 28522, "user_id": 459943, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1820b3c909a14f78a3b8c5aa46f9759f?s=128&d=identicon&r=PG", "display_name": "Lion King", "link": "https://stackoverflow.com/users/459943/lion-king"}, "edited": false, "score": 0, "creation_date": 1525884011, "post_id": 50256738, "comment_id": 87534368, "body": "The window must have a member function to handle the received message from the secondary thread. Use <a href=\"http://docs.wxwidgets.org/trunk/classwx_evt_handler.html#a03cc68ca201fb79c7e837919025be71a\" rel=\"nofollow noreferrer\">Bind</a>. In this fuction is where you call <code>showPicture()</code>"}, {"owner": {"reputation": 28522, "user_id": 459943, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1820b3c909a14f78a3b8c5aa46f9759f?s=128&d=identicon&r=PG", "display_name": "Lion King", "link": "https://stackoverflow.com/users/459943/lion-king"}, "edited": false, "score": 0, "creation_date": 1525884305, "post_id": 50256738, "comment_id": 87534501, "body": "<code>Use Bind.</code>, what&#39;s the type of event will be used?"}, {"owner": {"reputation": 6058, "user_id": 3871028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbe44ff5c56628e85683c8918602c96?s=128&d=identicon&r=PG&f=1", "display_name": "Ripi2", "link": "https://stackoverflow.com/users/3871028/ripi2"}, "reply_to_user": {"reputation": 28522, "user_id": 459943, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1820b3c909a14f78a3b8c5aa46f9759f?s=128&d=identicon&r=PG", "display_name": "Lion King", "link": "https://stackoverflow.com/users/459943/lion-king"}, "edited": false, "score": 0, "creation_date": 1525884889, "post_id": 50256738, "comment_id": 87534818, "body": "See the thread sample, searching for <code>wxQueueEvent</code>. The sample uses old event-tables (e.g. <code>EVT_THREAD(...)</code>, You better use Bind(), examples <a href=\"http://docs.wxwidgets.org/trunk/overview_events.html#overview_events_bind\" rel=\"nofollow noreferrer\">here</a>"}], "tags": [], "owner": {"reputation": 6058, "user_id": 3871028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbe44ff5c56628e85683c8918602c96?s=128&d=identicon&r=PG&f=1", "display_name": "Ripi2", "link": "https://stackoverflow.com/users/3871028/ripi2"}, "is_accepted": true, "score": 1, "last_activity_date": 1525878839, "creation_date": 1525878839, "answer_id": 50256738, "question_id": 50255642, "link": "https://stackoverflow.com/questions/50255642/how-to-create-multi-tasks-each-one-in-a-separate-thread/50256738#50256738", "title": "How to create multi tasks each one in a separate thread?", "body": "<p><strong>Quick answer:</strong>\n<br>All instances of a class (wxThread is a class) share its methods. So if you want a different <code>Entry()</code>, you need a new wxThread-derived class.</p>\n\n<p><p><strong>Advice on multithreading:</strong>\n<br>While <code>getPicture()</code> can be executed in a secondary thread, <code>showPicture()</code> should be executed in the main thread because it's the right place to draw into the window. All GUI stuff is strongly recommended to be done <strong>only</strong> in the main thread.\n<br>A rare expection is using OpenGL in a secondary thread instead of drawing by OS commands.</p>\n\n<p><p>The point is that the secondary thread posts a message to the main thread telling \"I'm done, image is available\".\n<br>The new data (image processed) can be put in a placement where the main thread (e.g. the window that is going to draw it) can read it.\n<br>Prevent any other thread from accessing the data while the working thread (that for <code>getPicture()</code>) is writting, by using <code>wxCriticalSectionLocker</code>.</p>\n\n<p><p>More info at <a href=\"http://docs.wxwidgets.org/trunk/overview_thread.html\" rel=\"nofollow noreferrer\">wxWidgets docs</a>, <a href=\"http://docs.wxwidgets.org/trunk/classwx_thread.html\" rel=\"nofollow noreferrer\">more wxWidgets doc</a> an the <code>thread</code>sample provided with wxWidgets distribution.</p>\n"}], "owner": {"reputation": 28522, "user_id": 459943, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1820b3c909a14f78a3b8c5aa46f9759f?s=128&d=identicon&r=PG", "display_name": "Lion King", "link": "https://stackoverflow.com/users/459943/lion-king"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "accepted_answer_id": 50256738, "answer_count": 1, "score": 0, "last_activity_date": 1525878839, "creation_date": 1525875341, "last_edit_date": 1525875727, "question_id": 50255642, "link": "https://stackoverflow.com/questions/50255642/how-to-create-multi-tasks-each-one-in-a-separate-thread", "title": "How to create multi tasks each one in a separate thread?", "body": "<p>I have two static methods:  </p>\n\n<ul>\n<li><code>bool getPicture(const std::string url, const std::string keywords =\"\")</code></li>\n<li><code>bool showPicture(wxStaticBitmap *viewer)</code></li>\n</ul>\n\n<p>Those methods each one does a separate task, so, I want each one to be executed in a separate thread.</p>\n\n<pre><code>#include &lt;wx/thread.h&gt;\n\n// Declaration\n\nclass CThread : public wxThread {\npublic:\n    CThread() = default;\n    ~CThread() = default;\n    void *Entry();\n};\n\n// Implementation\n\nvoid* CThread::Entry() {\n    CPublic::getPicture(mainFrm::getInstance()-&gt;targetURL, CPublic::getConfigItem(\"settings/keywords\").ToStdString());\n    // CPublic::showPicture(mainFrm::getInstance()-&gt;viewer_btmp);\n    return 0;\n}\n\n// Create an instance\n\nwxThread *th = new CThread();\nth-&gt;Create();\nth-&gt;Run();\n</code></pre>\n\n<p>As you seen in the previous code, there's one an <code>Entry()</code> method in each thread class, so, I want another an <code>Entry()</code> method to put my next method <code>showPicture()</code> into it.  </p>\n\n<p><strong>Do I have to create another class which has another</strong> <code>Entry()</code> <strong>method to put my</strong> <code>showPicture()</code> <strong>method into it, to be executed in another separate thread or there's another way?</strong></p>\n"}, {"tags": ["c++", "visual-c++"], "comments": [{"owner": {"reputation": 59, "user_id": 9765204, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-9m7Vy6sCOio/AAAAAAAAAAI/AAAAAAAAB6Y/G6tOvYCtdN8/photo.jpg?sz=128", "display_name": "anup kataria", "link": "https://stackoverflow.com/users/9765204/anup-kataria"}, "edited": false, "score": 0, "creation_date": 1525874820, "post_id": 50255424, "comment_id": 87528405, "body": "Forgot to mention  my TCHAR is char  Multi Byte charater TCHAR  == char"}, {"owner": {"reputation": 768, "user_id": 4623259, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/sNAyd.png?s=128&g=1", "display_name": "iPherian", "link": "https://stackoverflow.com/users/4623259/ipherian"}, "edited": false, "score": 0, "creation_date": 1525875283, "post_id": 50255424, "comment_id": 87528707, "body": "I don&#39;t know how/if it would cause your problem, but memset&#39;s third argument is the number of bytes. If TCHAR is multibyte, it won&#39;t be the same as the array size."}, {"owner": {"reputation": 768, "user_id": 4623259, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/sNAyd.png?s=128&g=1", "display_name": "iPherian", "link": "https://stackoverflow.com/users/4623259/ipherian"}, "edited": false, "score": 0, "creation_date": 1525875343, "post_id": 50255424, "comment_id": 87528742, "body": "try <code>memset(sStr, 0, sizeof(sStr));</code>"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 2, "creation_date": 1525875475, "post_id": 50255424, "comment_id": 87528845, "body": "How do you determine that <code>dwValue</code> changed? The debugger may be confused if <code>CallFoo</code> is the last statement in <code>main</code>."}, {"owner": {"reputation": 9720, "user_id": 6371123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f90991c1b06c79ae4c6e79fb616d608?s=128&d=identicon&r=PG", "display_name": "G.M.", "link": "https://stackoverflow.com/users/6371123/g-m"}, "edited": false, "score": 1, "creation_date": 1525875494, "post_id": 50255424, "comment_id": 87528865, "body": "Is <code>val</code> actually used anywhere in <code>CallFoo</code>?  Also, why do you believe <code>val</code> is changing -- are you viewing this in a debugger?"}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1525875662, "post_id": 50255424, "comment_id": 87528977, "body": "Why do you use <code>memset(sStr, 0, 256);</code> in the first place? What&#39;s wrong with <code>TCHAR sStr[256] = {0};</code>?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1525875936, "post_id": 50255424, "comment_id": 87529158, "body": "Welcome to Stack Overflow! Please <b><a href=\"https://stackoverflow.com/posts/50255424/edit\">edit</a></b> your question with an <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> or <a href=\"http://sscce.org\" rel=\"nofollow noreferrer\">SSCCE (Short, Self Contained, Correct Example)</a>.  The behavior you describe should not happen with the code as shown."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1525876035, "post_id": 50255424, "comment_id": 87529222, "body": "Also <code>memset(sStr, 0, 256);</code> should be <code>memset(sStr, 0, sizeof(sStr));</code>"}, {"owner": {"reputation": 59, "user_id": 9765204, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-9m7Vy6sCOio/AAAAAAAAAAI/AAAAAAAAB6Y/G6tOvYCtdN8/photo.jpg?sz=128", "display_name": "anup kataria", "link": "https://stackoverflow.com/users/9765204/anup-kataria"}, "reply_to_user": {"reputation": 9720, "user_id": 6371123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f90991c1b06c79ae4c6e79fb616d608?s=128&d=identicon&r=PG", "display_name": "G.M.", "link": "https://stackoverflow.com/users/6371123/g-m"}, "edited": false, "score": 0, "creation_date": 1526978100, "post_id": 50255424, "comment_id": 87939438, "body": "@G.M.  Yes I am looking the values in Debugger."}], "owner": {"reputation": 59, "user_id": 9765204, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-9m7Vy6sCOio/AAAAAAAAAAI/AAAAAAAAB6Y/G6tOvYCtdN8/photo.jpg?sz=128", "display_name": "anup kataria", "link": "https://stackoverflow.com/users/9765204/anup-kataria"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 50, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1526977959, "creation_date": 1525874685, "last_edit_date": 1526977959, "question_id": 50255424, "link": "https://stackoverflow.com/questions/50255424/vc-argument-value-changes-inside-function-when-a-function-variable-is-initiali", "title": "VC++ Argument value changes inside function when a function variable is initialize", "body": "<p>Below is the example code with which I am trying to explain the issue: </p>\n\n<p>Environment: VC++ 2013 (Visual Studio) building an exe. </p>\n\n<p>In the <code>main</code> function I have initialized a variable and assigned a value to it. \nAfter passing the variable to another function, inside that function I am initializing another array variable and setting its memset to 0. When I do that my parameter values also gets changed. </p>\n\n<p>TCHAR == char (multibyte)</p>\n\n<pre><code>void CallFoo(DWORD val){\n  TCHAR sStr[256];   // val == 111\n  memset(sStr, 0, sizeof(sStr)); // val == 0  --- Strange Very strange. \n  ....\n}\n\nint _tmain(int argc, _TCHAR* argv[]){\n DWORD dwValue = 111; \n CallFoo(dwValue);\n ....\n}\n</code></pre>\n\n<p>Can you please let me know what I am doing wrong here. </p>\n"}, {"tags": ["c++", "constructor", "constants", "valgrind"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 6, "creation_date": 1525874721, "post_id": 50255397, "comment_id": 87528336, "body": "<code>delete</code> what you <code>new</code> and <code>delete[]</code> what you <code>new[]</code>."}, {"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 3, "creation_date": 1525874822, "post_id": 50255397, "comment_id": 87528408, "body": "And better yet, <a href=\"https://stackoverflow.com/q/6500313/10077\">avoid <code>new</code> and <code>new[]</code></a>."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1525874824, "post_id": 50255397, "comment_id": 87528410, "body": "Please explain why you use <code>new[]</code> then <code>delete</code>."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1525874887, "post_id": 50255397, "comment_id": 87528461, "body": "Not sure what this has to do with <code>const</code>?"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1525874892, "post_id": 50255397, "comment_id": 87528468, "body": "Note that <code>char* const m_data</code> is not an immutable character string. It&#39;s an immutable pointer to a mutable character string. You likely want <code>const char* m_data;</code>."}, {"owner": {"reputation": 415, "user_id": 2208215, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/OLOG1.jpg?s=128&g=1", "display_name": "dustinboettcher", "link": "https://stackoverflow.com/users/2208215/dustinboettcher"}, "edited": false, "score": 0, "creation_date": 1525875262, "post_id": 50255397, "comment_id": 87528699, "body": "That is true the title is a little misleading - although I tried delete [] m_data and still get: still reachable: 72,704 bytes in 1 blocks"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1525875352, "post_id": 50255397, "comment_id": 87528749, "body": "Is <code>s1</code> global or in the scope of <code>main</code>? Please share a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 56858, "user_id": 131930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91536fe27d32713b8a154a0bf42f6748?s=128&d=identicon&r=PG", "display_name": "Jeremy Friesner", "link": "https://stackoverflow.com/users/131930/jeremy-friesner"}, "edited": false, "score": 2, "creation_date": 1525875778, "post_id": 50255397, "comment_id": 87529059, "body": "Note that &quot;still reachable&quot; doesn&#39;t necessarily mean there was a memory leak problem -- it might be deliberate.   <a href=\"https://stackoverflow.com/questions/3840582/still-reachable-leak-detected-by-valgrind?utm_medium=organic&amp;utm_source=google_rich_qa&amp;utm_campaign=google_rich_qa\" title=\"still reachable leak detected by valgrind\">stackoverflow.com/questions/3840582/&hellip;</a>"}, {"owner": {"reputation": 415, "user_id": 2208215, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/OLOG1.jpg?s=128&g=1", "display_name": "dustinboettcher", "link": "https://stackoverflow.com/users/2208215/dustinboettcher"}, "edited": false, "score": 0, "creation_date": 1525876213, "post_id": 50255397, "comment_id": 87529380, "body": "That&#39;s it - I was so focused on the getting a clean log that I didn&#39;t notice that delete [] provided no errors - &quot;just&quot; the 1 block. Thanks everyone this was driving me nuts."}], "answers": [{"tags": [], "owner": {"reputation": 66, "user_id": 9765476, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0bc6c1d9aca1f0f4767c82086f04b4b9?s=128&d=identicon&r=PG&f=1", "display_name": "Robin M.", "link": "https://stackoverflow.com/users/9765476/robin-m"}, "is_accepted": true, "score": 1, "last_activity_date": 1525876402, "creation_date": 1525876402, "answer_id": 50255976, "question_id": 50255397, "link": "https://stackoverflow.com/questions/50255397/deconstruct-const-pointer/50255976#50255976", "title": "Deconstruct const pointer?", "body": "<p>To leave all array memories blocks you have to use delete like this :</p>\n\n<pre><code>delete[] m_data;\n</code></pre>\n\n<p>Thanks,\nRobin.</p>\n"}], "owner": {"reputation": 415, "user_id": 2208215, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/OLOG1.jpg?s=128&g=1", "display_name": "dustinboettcher", "link": "https://stackoverflow.com/users/2208215/dustinboettcher"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "accepted_answer_id": 50255976, "answer_count": 1, "score": 0, "last_activity_date": 1525876402, "creation_date": 1525874609, "last_edit_date": 1525876020, "question_id": 50255397, "link": "https://stackoverflow.com/questions/50255397/deconstruct-const-pointer", "title": "Deconstruct const pointer?", "body": "<p>It's probably very basic but I am stuck and simply don't know what the problem is. </p>\n\n<p>The main code is predefined as a task. The goal is to use const as much as possible. The following constructor is just supposed to copy the literal string to the const m_data and that works fine but I am not able to free the memory - it always leaves 1 block. What am I missing?</p>\n\n<p>main.cpp</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include \"immstring.hpp\"\nusing namespace std;\nusing namespace Util;\n\nint main() \n{\n  const ImmutableString s1(\"Hello\");\n}\n</code></pre>\n\n<p>immu.hpp</p>\n\n<pre><code>#include &lt;cstring&gt;\nnamespace Util {\nclass ImmutableString {\npublic:\n    ImmutableString(const char* src);\n    ~ImmutableString();\n\nprivate:\n    char* const m_data;\n};\n}\n</code></pre>\n\n<p>immu.cpp</p>\n\n<pre><code>#include \"immstring.hpp\"\n#include &lt;iostream&gt;\n#include &lt;cstring&gt;\nnamespace Util \n{\nImmutableString::ImmutableString(const char* src)\n    :m_data{strcpy(new char[strlen(src)+1],src)}{}\n\nImmutableString::~ImmutableString() \n{\n    delete m_data;\n}\n}\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 3, "creation_date": 1525874241, "post_id": 50255200, "comment_id": 87528003, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/2402579/function-pointer-to-member-function\">Function pointer to member function</a>"}, {"owner": {"reputation": 691, "user_id": 1750346, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/wUnr5.png?s=128&g=1", "display_name": "Sebastien DErrico", "link": "https://stackoverflow.com/users/1750346/sebastien-derrico"}, "reply_to_user": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 1, "creation_date": 1525874691, "post_id": 50255200, "comment_id": 87528308, "body": "Is there a way to hide my question temporary to check the link? Then I will close it if it works or I will rephrase my question? Thanks"}, {"owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "edited": false, "score": 1, "creation_date": 1525876901, "post_id": 50255200, "comment_id": 87529953, "body": "@SebastienDErrico: The poster can delete its own question and then undelete it - of course you cannot if it was deleted not by you but by the community or a moderator."}, {"owner": {"reputation": 134, "user_id": 9741323, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/25d9f2331b1dac482c405518962d7740?s=128&d=identicon&r=PG&f=1", "display_name": "he rambled", "link": "https://stackoverflow.com/users/9741323/he-rambled"}, "edited": false, "score": 0, "creation_date": 1525879823, "post_id": 50255200, "comment_id": 87531933, "body": "&quot;After checking the link, the solution seems to embed a specific class. Is there a way to be more generic?&quot; If you want generic function, you can always use template."}, {"owner": {"reputation": 691, "user_id": 1750346, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/wUnr5.png?s=128&g=1", "display_name": "Sebastien DErrico", "link": "https://stackoverflow.com/users/1750346/sebastien-derrico"}, "reply_to_user": {"reputation": 134, "user_id": 9741323, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/25d9f2331b1dac482c405518962d7740?s=128&d=identicon&r=PG&f=1", "display_name": "he rambled", "link": "https://stackoverflow.com/users/9741323/he-rambled"}, "edited": false, "score": 0, "creation_date": 1525881771, "post_id": 50255200, "comment_id": 87533125, "body": "@herambled If our third party supplier used typedef double(*Processor), something that we cannot change, is that means we cannot specified a function from an instance, we are stuck using a global function?"}, {"owner": {"reputation": 134, "user_id": 9741323, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/25d9f2331b1dac482c405518962d7740?s=128&d=identicon&r=PG&f=1", "display_name": "he rambled", "link": "https://stackoverflow.com/users/9741323/he-rambled"}, "edited": false, "score": 0, "creation_date": 1525882159, "post_id": 50255200, "comment_id": 87533345, "body": "Well, at least not elegantly. member functions must be provided <code>this</code> pointer, and <code>Processor</code> typedef in your code does not have it. So, if you really want that, you could assign your class instances to global variable, and write a free function that comports to <code>Processor</code> signiture that invokes member functions using the global variables. Having said that, it is EXTREMELY dirty."}, {"owner": {"reputation": 691, "user_id": 1750346, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/wUnr5.png?s=128&g=1", "display_name": "Sebastien DErrico", "link": "https://stackoverflow.com/users/1750346/sebastien-derrico"}, "reply_to_user": {"reputation": 134, "user_id": 9741323, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/25d9f2331b1dac482c405518962d7740?s=128&d=identicon&r=PG&f=1", "display_name": "he rambled", "link": "https://stackoverflow.com/users/9741323/he-rambled"}, "edited": false, "score": 0, "creation_date": 1525887519, "post_id": 50255200, "comment_id": 87536136, "body": "@herambled this is EXACTLY what I am trying to refactor. I was trying to remove all global elements creating dependencies to others global elements. Because we are not in position to modify the Processor typedef, I conclude that we are stuck to leave the implementation as is."}, {"owner": {"reputation": 691, "user_id": 1750346, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/wUnr5.png?s=128&g=1", "display_name": "Sebastien DErrico", "link": "https://stackoverflow.com/users/1750346/sebastien-derrico"}, "reply_to_user": {"reputation": 134, "user_id": 9741323, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/25d9f2331b1dac482c405518962d7740?s=128&d=identicon&r=PG&f=1", "display_name": "he rambled", "link": "https://stackoverflow.com/users/9741323/he-rambled"}, "edited": false, "score": 0, "creation_date": 1525887584, "post_id": 50255200, "comment_id": 87536176, "body": "@herambled Thank you for your time. Do you want to turn your comment to an answer? I will click it as best answer. Thanks!"}, {"owner": {"reputation": 134, "user_id": 9741323, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/25d9f2331b1dac482c405518962d7740?s=128&d=identicon&r=PG&f=1", "display_name": "he rambled", "link": "https://stackoverflow.com/users/9741323/he-rambled"}, "edited": false, "score": 0, "creation_date": 1525887694, "post_id": 50255200, "comment_id": 87536217, "body": "Sure :) I&#39;ll post it with some example code in case that some  other people might need it."}], "answers": [{"comments": [{"owner": {"reputation": 691, "user_id": 1750346, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/wUnr5.png?s=128&g=1", "display_name": "Sebastien DErrico", "link": "https://stackoverflow.com/users/1750346/sebastien-derrico"}, "edited": false, "score": 0, "creation_date": 1525890422, "post_id": 50259400, "comment_id": 87537622, "body": "Hahaha, thank you for the last paragraph. Unfortunately, our company is integrating a device and the official lib bundled with it force us to use callback with a typedef and I conclude from your answer that the typedef force us to use global instances."}, {"owner": {"reputation": 134, "user_id": 9741323, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/25d9f2331b1dac482c405518962d7740?s=128&d=identicon&r=PG&f=1", "display_name": "he rambled", "link": "https://stackoverflow.com/users/9741323/he-rambled"}, "reply_to_user": {"reputation": 691, "user_id": 1750346, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/wUnr5.png?s=128&g=1", "display_name": "Sebastien DErrico", "link": "https://stackoverflow.com/users/1750346/sebastien-derrico"}, "edited": false, "score": 0, "creation_date": 1525890509, "post_id": 50259400, "comment_id": 87537664, "body": "@sebastien Bad things happen :("}], "tags": [], "owner": {"reputation": 134, "user_id": 9741323, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/25d9f2331b1dac482c405518962d7740?s=128&d=identicon&r=PG&f=1", "display_name": "he rambled", "link": "https://stackoverflow.com/users/9741323/he-rambled"}, "is_accepted": true, "score": 1, "last_activity_date": 1525888560, "creation_date": 1525888560, "answer_id": 50259400, "question_id": 50255200, "link": "https://stackoverflow.com/questions/50255200/assign-to-a-variable-a-function-from-a-specific-instance-of-a-class-to-keep-the/50259400#50259400", "title": "Assign to a variable a function from a specific instance of a class to keep the state", "body": "<p>There is no elegant way. Member functions must be provided with <code>this</code> pointer, and <code>Processor</code> typedef in your code does not have it. Even if it has some kind of <code>void*</code> that can store your instance pointer, the calling convention of free function and member functions are different. It need to use something like <code>std::invoke</code> to properly handle it, which is unlikely for your case.</p>\n\n<p>So, if you really want that, you could assign your class instances to global variable, and write a free function that comports to <code>Processor</code> signiture that invokes member functions using the global variables. Having said that, it is <strong>EXTREMELY</strong> dirty.</p>\n\n<p>For example, you can do this:</p>\n\n<pre><code>typedef double(*Processor) (\n    double  first,\n    double  second\n);\n\nvoid Process(Processor processor)\n{\n    double result = processor(100, 50);\n    std::cout &lt;&lt; \"Multiply=\" &lt;&lt; result &lt;&lt; std::endl;\n}\n\nclass Add\n{\npublic:\n    double Adjustment;\n\n    Add(double adjustment) : Adjustment(adjustment) {}\n\n    double Process(double first, double second)\n    {\n        return first + second + Adjustment;\n    }\n};\n\nAdd* g_add;\n\ndouble add_f(double first, double second)\n{\n    return g_add-&gt;Process(first, second);\n}\n\nint _tmain(int argc, _TCHAR* argv[])\n{\n    g_add = new Add(0.5);\n    Process(add_f);\n    delete g_add; g_add = nullptr;\n\n    getchar();\n}\n</code></pre>\n\n<p>But it leads to <strong>VERY BAD</strong> software design. Replace your third party library to one that supports C++ functors if possible. If not, use this technique only if you are unquestionably sure that you can manage this horrible design.</p>\n"}], "owner": {"reputation": 691, "user_id": 1750346, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/wUnr5.png?s=128&g=1", "display_name": "Sebastien DErrico", "link": "https://stackoverflow.com/users/1750346/sebastien-derrico"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "accepted_answer_id": 50259400, "answer_count": 1, "score": 0, "last_activity_date": 1525888560, "creation_date": 1525874115, "last_edit_date": 1525878000, "question_id": 50255200, "link": "https://stackoverflow.com/questions/50255200/assign-to-a-variable-a-function-from-a-specific-instance-of-a-class-to-keep-the", "title": "Assign to a variable a function from a specific instance of a class to keep the state", "body": "<p>Is it possible to assign a function from a specific instance of a class as a parameter? Multiple classes can have the same signature. Here an example. Thank you!</p>\n\n<p><strong>UPDATE</strong>: The context is that we are using a third party library that supply us with call back after a device finish the process. The typedef is what look like the signature from the third party library.</p>\n\n<p><strong>UPDATE</strong>: After checking the link, the solution seems to embed a specific class. Is there a way to be more generic?</p>\n\n<pre><code>typedef double(*Processor) (\n    double  first,\n    double  second\n);\n\ndouble Adjustment = 0.5;\ndouble Multiply(double first, double second)\n{\n    return first * second * Adjustment;\n}\n\nclass Substract\n{\npublic:\n    double Adjustment;\n\n    Substract(double adjustment) : Adjustment(adjustment) {}\n\n    double Process(double first, double second)\n    {\n        return first - second - Adjustment;\n    }\n};\n\nclass Add\n{\npublic:\n    double Adjustment;\n\n    Add(double adjustment) : Adjustment(adjustment) {}\n\n    double Process(double first, double second)\n    {\n        return first + second + Adjustment;\n    }\n};\n\nvoid Process(Processor processor)\n{\n    double result = processor(100, 50);\n    std::cout &lt;&lt; \"Multiply=\" &lt;&lt; result &lt;&lt; std::endl;\n}\n\nint _tmain(int argc, _TCHAR* argv[])\n{\n    double result;\n\n    Process(Multiply); // &lt;-- success\n\n    Substract* substract = new Substract(0.5);\n    Process(substract-&gt;Process); // &lt;-- not compiling\n    delete substract;\n\n    Add* add = new Add(0.5);\n    Process(add-&gt;Process); // &lt;-- not compiling\n    delete add;\n\n    getchar();\n\n}\n</code></pre>\n"}, {"tags": ["c++", "qt", "qml", "qt5", "qfilesystemmodel"], "answers": [{"tags": [], "owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "is_accepted": true, "score": 1, "last_activity_date": 1525875691, "creation_date": 1525875691, "answer_id": 50255748, "question_id": 50255197, "link": "https://stackoverflow.com/questions/50255197/get-qmodelindex-from-filepath-and-filename-in-qfilesystemmodel/50255748#50255748", "title": "Get QModelIndex from filepath and filename in QFileSystemModel", "body": "<p>You have to overwrite the <a href=\"http://doc.qt.io/qt-5/qfilesystemmodel.html#index-1\" rel=\"nofollow noreferrer\">index()</a> method of QFileSystemModel so that it can be accessed from QML:</p>\n\n<pre><code>class DisplayFileSystemModel : public QFileSystemModel {\n    Q_OBJECT\npublic:\n    ...\n    Q_INVOKABLE QModelIndex index(const QString &amp;path, int column = 0) const\n    {\n        return QFileSystemModel::index(path, column);    \n    }\n    ...\n};\n</code></pre>\n\n<p>And then in QML you use it following form:</p>\n\n<pre><code>your_model.index(your_fullpath)\n</code></pre>\n"}], "owner": {"reputation": 147, "user_id": 9722948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4f91908a299847ca6c829f5b100116b?s=128&d=identicon&r=PG&f=1", "display_name": "maxwell", "link": "https://stackoverflow.com/users/9722948/maxwell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 334, "favorite_count": 0, "accepted_answer_id": 50255748, "answer_count": 1, "score": 0, "last_activity_date": 1525894469, "creation_date": 1525874106, "last_edit_date": 1525894469, "question_id": 50255197, "link": "https://stackoverflow.com/questions/50255197/get-qmodelindex-from-filepath-and-filename-in-qfilesystemmodel", "title": "Get QModelIndex from filepath and filename in QFileSystemModel", "body": "<p>I need to get the QModelIndex from a filepath and filename in a <code>QFileSystemModel</code>. I saw there is the <code>index</code> function which takes a <code>filepath</code> but I don't know what the column argument should do.</p>\n"}, {"tags": ["c++", "c++14"], "comments": [{"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 1, "creation_date": 1525873566, "post_id": 50254912, "comment_id": 87527440, "body": "You know you could just copy/paste your console output rather than providing a screenshot?"}, {"owner": {"reputation": 148, "user_id": 8560086, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-CwHkfUqc-mw/AAAAAAAAAAI/AAAAAAAAAIU/VHOGbx3OVIM/photo.jpg?sz=128", "display_name": "Anupam Raut", "link": "https://stackoverflow.com/users/8560086/anupam-raut"}, "reply_to_user": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 0, "creation_date": 1525873702, "post_id": 50254912, "comment_id": 87527552, "body": "Added before respective ss"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1525873812, "post_id": 50254912, "comment_id": 87527638, "body": "IDEs are just a bit more than fancy text editors. What counts is the compiler you are using (and possibly different flags you are passing)"}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1525873881, "post_id": 50254912, "comment_id": 87527698, "body": "Most likely, the reason for such an issue is undefined behavior somewhere in your code."}, {"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 1, "creation_date": 1525874031, "post_id": 50254912, "comment_id": 87527838, "body": "replace all your <code>[]</code> with <code>at</code> is probably a good start - or read <a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">ericlippert.com/2014/03/05/how-to-debug-small-programs</a>"}, {"owner": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 0, "creation_date": 1525875721, "post_id": 50254912, "comment_id": 87529027, "body": "The output differs because str can be empty.  Add <code>if (str.empty()) continue;</code> after the getline to skip empty strings.  Also can get rid of a lot of code by doing <code>auto m = str.size();</code>, <code>auto str1 = str.substr(0, m &#47; 2);</code> and <code>auto str2 = str.substr(m - m &#47; 2);</code>"}], "answers": [{"tags": [], "owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "is_accepted": false, "score": 0, "last_activity_date": 1525874670, "creation_date": 1525874670, "answer_id": 50255420, "question_id": 50254912, "link": "https://stackoverflow.com/questions/50254912/not-getting-the-same-output-in-different-ides/50255420#50255420", "title": "Not getting the same output in different IDE(s)", "body": "<p>Your program appears to (correctly) check whether the first half and second half of the string contain the same set of characters (ignoring the middle one). In this sense, the first bunch of outputs (YES NO YES YES NO NO) appear to be correct.</p>\n\n<p>If you add outputs of the strings the program ends up with, you can see what is going wrong: <a href=\"https://ideone.com/ap422m\" rel=\"nofollow noreferrer\">https://ideone.com/ap422m</a></p>\n\n<pre><code>if(str1==str2)\n    cout&lt;&lt;\"YES \" &lt;&lt; str1 &lt;&lt; \"|\" &lt;&lt; str2 &lt;&lt;endl;\nelse\n    cout&lt;&lt;\"NO \" &lt;&lt; str1 &lt;&lt; \"|\" &lt;&lt; str2 &lt;&lt;endl;\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>YES |\nYES ag|ag\nNO ab|de\nYES or|or\nYES xy|xy\nNO abb|aab\n</code></pre>\n\n<p>So it does the correct checks, but it reads the initial line ending as the first input. I would just use <code>getline(cin, str);</code> at the start like you do it later to prevent this from happening.</p>\n"}], "owner": {"reputation": 148, "user_id": 8560086, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-CwHkfUqc-mw/AAAAAAAAAAI/AAAAAAAAAIU/VHOGbx3OVIM/photo.jpg?sz=128", "display_name": "Anupam Raut", "link": "https://stackoverflow.com/users/8560086/anupam-raut"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 78, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1525874670, "creation_date": 1525873374, "last_edit_date": 1525873581, "question_id": 50254912, "link": "https://stackoverflow.com/questions/50254912/not-getting-the-same-output-in-different-ides", "title": "Not getting the same output in different IDE(s)", "body": "<p>I am using the same code and same inputs in my program but getting different outputs in different IDE(s).</p>\n\n<p>Question: <a href=\"https://www.codechef.com/FLMOCK01/problems/LAPIN\" rel=\"nofollow noreferrer\">https://www.codechef.com/FLMOCK01/problems/LAPIN</a>\n<br><br>My solution:</p>\n\n<pre><code>#include&lt;iostream&gt;\n#include&lt;bits/stdc++.h&gt;\nusing namespace std;\nint main(){\n    int testCase=0;\n    cin&gt;&gt;testCase;\n    while(testCase&gt;0){\n\n        int i=0,m=0;\n        string str;\n        cin.clear();\n        cin.sync();\n        getline(cin, str);\n        string str1;\n        string str2;\n        if((str.size()%2)==0){\n            m=str.size()/2;\n            str1.resize(m);\n            str2.resize(m);\n            for(i=0;i&lt;m;i++){\n                str1[i] = str[i];\n            }\n            for(i=m;i&lt;str.size();i++){\n                str2[i-m] = str[i];\n            }\n        }\n        else{\n            m=floor(str.size()/2);\n            str1.resize(m);\n            str2.resize(m);\n            for(i=0;i&lt;m;i++){\n                str1[i] = str[i];\n            }\n            for(i=m+1;i&lt;str.size();i++){\n                str2[i-m-1] = str[i];\n            }\n        }\n        sort(str1.begin(), str1.end());\n        sort(str2.begin(), str2.end());\n        if(str1==str2){\n            cout&lt;&lt;\"YES\"&lt;&lt;endl;\n        }\n        else{\n            cout&lt;&lt;\"NO\"&lt;&lt;endl;\n        }\n\n        testCase--;\n    }\n    return 0;\n}\n</code></pre>\n\n<p>Output in VS Code and code::blocks :YES\nNO\nYES\nYES\nNO\nNO</p>\n\n<p><a href=\"https://i.stack.imgur.com/JRrAF.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/JRrAF.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>Output in CodeChef IDE, xCode, ideone:\nYES\nYES\nNO\nYES\nYES\nNO\n<a href=\"https://i.stack.imgur.com/bldVn.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/bldVn.jpg\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["c++", "c++11"], "comments": [{"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 3, "creation_date": 1525872610, "post_id": 50254641, "comment_id": 87526723, "body": "Easiest way to fix it is to remove <code>throw(std::invalid_argument)</code> from the function declaration (since they are deprecated as the compiler is telling you). Also a warning is not the same thing as an error"}, {"owner": {"reputation": 191, "user_id": 8363213, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/0726b16ec76e9b1eb3648a07edc6a7b0?s=128&d=identicon&r=PG&f=1", "display_name": "Ben", "link": "https://stackoverflow.com/users/8363213/ben"}, "edited": false, "score": 0, "creation_date": 1525872654, "post_id": 50254641, "comment_id": 87526750, "body": "I think you should edit your question, since they aren&#39;t actually errors but just warnings."}, {"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 0, "creation_date": 1525873433, "post_id": 50254641, "comment_id": 87527337, "body": "You could compile with <code>#define throw(X) noexcept(false)</code>... (this is a joke, don&#39;t do it)"}, {"owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "reply_to_user": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 0, "creation_date": 1525873583, "post_id": 50254641, "comment_id": 87527452, "body": "@YSC that would potentially break all the code throwing exceptions."}, {"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "reply_to_user": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 0, "creation_date": 1525873626, "post_id": 50254641, "comment_id": 87527486, "body": "@VTT fixed....."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1525874047, "post_id": 50254641, "comment_id": 87527854, "body": "Just include 3rd party library headers as system ones."}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 2, "creation_date": 1525876458, "post_id": 50254641, "comment_id": 87529583, "body": "Dynamic exception specifications are deprecated. That&#39;s a warning from the standards committee that they <b>might</b> be removed in a future version of the standard. In the meantime, they are legal and their behavior is well defined. Most compilers have mechanisms for turning off particular warnings, and that&#39;s what you should use. If you get errors from this code (i.e., the compiler refuses to compile it) then your compiler does not conform to the language definition."}], "answers": [{"comments": [{"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 4, "creation_date": 1525873702, "post_id": 50254930, "comment_id": 87527551, "body": "There is also a way to mark directories as system headers and not generate any warnings.  <code>-isystem</code> instead of <code>-I</code> -- see <a href=\"https://stackoverflow.com/q/1867065/1774667\">stackoverflow.com/q/1867065/1774667</a>"}, {"owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "reply_to_user": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1525873758, "post_id": 50254930, "comment_id": 87527590, "body": "@Yakk-AdamNevraumont Suppressing all the warnings is never a good idea."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 5, "creation_date": 1525873952, "post_id": 50254930, "comment_id": 87527754, "body": "@VTT if you have no intention to modify 3rd party library it actually is."}, {"owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 2, "creation_date": 1525874019, "post_id": 50254930, "comment_id": 87527820, "body": "Instead of removing them completely I would rather suggest to move them into comment section. Even though exception specifiers always  were somewhat useless part of the language they may be still valuable part of code documentation."}, {"owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 4, "creation_date": 1525876528, "post_id": 50254930, "comment_id": 87529651, "body": "@Slava <i>&quot;Engineers are forgiven for making mistakes. They are not forgiven for hiding mistakes.&quot;</i>"}], "tags": [], "owner": {"reputation": 32126, "user_id": 2666289, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/746dd23bbe20769fbd758421e67f455c?s=128&d=identicon&r=PG", "display_name": "Holt", "link": "https://stackoverflow.com/users/2666289/holt"}, "is_accepted": false, "score": 12, "last_activity_date": 1525875609, "last_edit_date": 1525875609, "creation_date": 1525873416, "answer_id": 50254930, "question_id": 50254641, "link": "https://stackoverflow.com/questions/50254641/dynamic-exception-specifications-are-deprecated/50254930#50254930", "title": "dynamic exception specifications are deprecated", "body": "<p>You should remove or comment out these exception specifications wherever you can<sup>1</sup>, e.g.:</p>\n\n<pre><code>static Value getPriorityValue(const std::string&amp; priorityName);\nstatic Value getPriorityValue(const std::string&amp; priorityName) /* throw(...) */;\n</code></pre>\n\n<p>You can use the <code>-Wno-deprecated</code> option to turn-off depreciation warnings for places where you cannot edit the code. I would recommend only using it when compiling third-party libraries. If you need to include a third-party header that raise such warning, you could do<sup>2</sup>:</p>\n\n<pre><code>#pragma GCC diagnostic push\n#pragma GCC diagnostic ignored \"-Wdeprecated\"\n#include \"thirdparty.h\"\n#pragma GCC diagnostic pop\n</code></pre>\n\n<p>This should work with both <code>gcc</code> and <code>clang</code> and will only disable <code>-Wdeprecated</code> for specific includes.</p>\n\n<p><sub><sup>1</sup> Dynamic exception specifications are deprecated since C++11, and are illegal since C++17, so you might want to get rid of them and upgrade third-party libraries you are using as soon as possible.</sub></p>\n\n<p><sub><sup>2</sup> If you include these headers using a <code>-I</code> argument, you could switch to <code>-isystem</code> to disable all warnings for these headers, as mentioned by <a href=\"https://stackoverflow.com/questions/50254641/dynamic-exception-specifications-are-deprecated/50254930#comment87527551_50254930\">@Yakk - Adam Nevraumont</a>. See also <a href=\"https://stackoverflow.com/q/1867065/1774667\">How to suppress GCC warnings from library headers?</a>.</sub></p>\n"}], "owner": {"reputation": 335, "user_id": 846566, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/ae9c4878140493b49f15936991ba8cb5?s=128&d=identicon&r=PG", "display_name": "user846566", "link": "https://stackoverflow.com/users/846566/user846566"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 13399, "favorite_count": 2, "answer_count": 1, "score": 6, "last_activity_date": 1525875609, "creation_date": 1525872536, "last_edit_date": 1525872771, "question_id": 50254641, "link": "https://stackoverflow.com/questions/50254641/dynamic-exception-specifications-are-deprecated", "title": "dynamic exception specifications are deprecated", "body": "<p>I had some code that use to compile (and work), now I get lots of the following warnings.  This happened after I did a dist-upgrade to Ubuntu-Mate.</p>\n\n<p>warning: dynamic exception specifications are deprecated in C++11</p>\n\n<p>It happens on lines as simple as this (in a header):</p>\n\n<pre><code>    static Value getPriorityValue(const std::string&amp; priorityName)\n    throw(std::invalid_argument);\n</code></pre>\n\n<p>I got 2545 warning related to this!  Is there anyway to tell the compiler to ignore this warning?  What is the easiest way to make changes to the code.  </p>\n\n<p>Most of the errors are in a 3rd party package so I don't want to make too many modifications to this package.</p>\n\n<p>I do have the    -std=c++11 flag on in my compiler.</p>\n"}, {"tags": ["c++", "c", "dll", "delay-load"], "comments": [{"owner": {"reputation": 918, "user_id": 2135548, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/fM5xR.png?s=128&g=1", "display_name": "Mandar", "link": "https://stackoverflow.com/users/2135548/mandar"}, "edited": false, "score": 1, "creation_date": 1525873256, "post_id": 50254604, "comment_id": 87527198, "body": "Dont include your libs in your project just LoadLibrary() your dll whenever required. Also there is a flag /DELAYLOAD in VC++."}, {"owner": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "edited": false, "score": 0, "creation_date": 1525873670, "post_id": 50254604, "comment_id": 87527532, "body": "I&#39;m not sure if /DELAYLOAD can be used if the DLL in question is outside your executable&#39;s folder.  But then I&#39;ve never tried."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1525880078, "post_id": 50254604, "comment_id": 87532104, "body": "You cannot call a function from a DLL without having that DLL somewhere, preferably at a place where it can be found. What are your requirements?"}, {"owner": {"reputation": 1120, "user_id": 4623418, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ZIVAuvNP8WE/AAAAAAAAAAI/AAAAAAAAAEw/zzuok1S9_ZM/photo.jpg?sz=128", "display_name": "Bas in het Veld", "link": "https://stackoverflow.com/users/4623418/bas-in-het-veld"}, "reply_to_user": {"reputation": 918, "user_id": 2135548, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/fM5xR.png?s=128&g=1", "display_name": "Mandar", "link": "https://stackoverflow.com/users/2135548/mandar"}, "edited": false, "score": 0, "creation_date": 1525880361, "post_id": 50254604, "comment_id": 87532268, "body": "@mozfox I tried this, but it tells me there&#39;s an unresolved symbol (the library function I&#39;m calling)"}, {"owner": {"reputation": 1120, "user_id": 4623418, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ZIVAuvNP8WE/AAAAAAAAAAI/AAAAAAAAAEw/zzuok1S9_ZM/photo.jpg?sz=128", "display_name": "Bas in het Veld", "link": "https://stackoverflow.com/users/4623418/bas-in-het-veld"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1525880363, "post_id": 50254604, "comment_id": 87532271, "body": "@n.m. I want to delay load it. So I&#39;m manually loading it from code before it&#39;s used."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 1, "creation_date": 1525881041, "post_id": 50254604, "comment_id": 87532695, "body": "If you want to load it with LoadLibrary, you need to use GetProcAddress to get functions you want to call, rather than using function names directly in the code. And you should <i>not</i> link against the .dll or its .lib."}, {"owner": {"reputation": 918, "user_id": 2135548, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/fM5xR.png?s=128&g=1", "display_name": "Mandar", "link": "https://stackoverflow.com/users/2135548/mandar"}, "edited": false, "score": 1, "creation_date": 1525894527, "post_id": 50254604, "comment_id": 87539677, "body": "check <a href=\"https://stackoverflow.com/a/13265148/2135548\">stackoverflow.com/a/13265148/2135548</a>"}, {"owner": {"reputation": 1120, "user_id": 4623418, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ZIVAuvNP8WE/AAAAAAAAAAI/AAAAAAAAAEw/zzuok1S9_ZM/photo.jpg?sz=128", "display_name": "Bas in het Veld", "link": "https://stackoverflow.com/users/4623418/bas-in-het-veld"}, "reply_to_user": {"reputation": 918, "user_id": 2135548, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/fM5xR.png?s=128&g=1", "display_name": "Mandar", "link": "https://stackoverflow.com/users/2135548/mandar"}, "edited": false, "score": 0, "creation_date": 1525901063, "post_id": 50254604, "comment_id": 87542644, "body": "@Mozfox Will try that tomorrow, thanks very much"}, {"owner": {"reputation": 1120, "user_id": 4623418, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ZIVAuvNP8WE/AAAAAAAAAAI/AAAAAAAAAEw/zzuok1S9_ZM/photo.jpg?sz=128", "display_name": "Bas in het Veld", "link": "https://stackoverflow.com/users/4623418/bas-in-het-veld"}, "edited": false, "score": 0, "creation_date": 1526047965, "post_id": 50254604, "comment_id": 87604880, "body": "Figured it all out, thanks for the feedback! I ended up removing the lib files and only loading the DLLs, and calling them using GetProcAddress, not the header files."}], "owner": {"reputation": 1120, "user_id": 4623418, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ZIVAuvNP8WE/AAAAAAAAAAI/AAAAAAAAAEw/zzuok1S9_ZM/photo.jpg?sz=128", "display_name": "Bas in het Veld", "link": "https://stackoverflow.com/users/4623418/bas-in-het-veld"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 118, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1525872435, "creation_date": 1525872435, "question_id": 50254604, "link": "https://stackoverflow.com/questions/50254604/delay-loading-a-c-libary-in-c-code", "title": "Delay-loading a C libary in C++ code", "body": "<p>I'm currently trying to load the ffmpeg library (in C) into my C++ project. The library consists of headers, .lib files and .dll files, all of which I loaded and used successfully.\nHowever, it is strongly desirable for our project to have these dll files loaded in delayed, and this is where I'm failing.</p>\n\n<p>What it boils down to is this:</p>\n\n<ul>\n<li>When I build the project without referring to any of the library's dll functions, it runs correctly and I see (by my logs) that all dlls are correctly loaded where I'm explicitly getting their DLL handle.</li>\n<li>When I build the project and include function calls to the dll, the executable simple fails to load because it's missing 'xx.dll'. This is before the function call is done. IE: Simply by having a dll function call in my code, it seems the program tries to load it when starting.\n\n<ul>\n<li>When I manually add the dlls next to my program's executable, it runs fine in both scenarios, but it is not desirable to have them next to my executable.</li>\n</ul></li>\n</ul>\n\n<p>Is there something obvious that I'm missing or doing wrong?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["c++", "class", "c++11", "enums"], "comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 2, "creation_date": 1525872335, "post_id": 50254507, "comment_id": 87526501, "body": "<i>&quot;I can&#39;t compile my code&quot;</i>, so provide error message."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 3, "creation_date": 1525872380, "post_id": 50254507, "comment_id": 87526538, "body": "Your class definition is missing a closing brace and a semi-colon. It&#39;s better to sort these things out before posting, so the code exhibits just the problem you are asking about."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 3, "creation_date": 1525872395, "post_id": 50254507, "comment_id": 87526549, "body": "<code>MyClass::MyEnum_t &amp;operator|(MyClass::MyEnum_t lhs, MyClass::MyEnum_t rhs)</code> should be placed outside the class."}], "answers": [{"comments": [{"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 4, "creation_date": 1525872701, "post_id": 50254612, "comment_id": 87526795, "body": "Might wanna fix the return type of the operator"}, {"owner": {"reputation": 53, "user_id": 7145371, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4fda60cfb1ee45e519d5faa383b61b92?s=128&d=identicon&r=PG&f=1", "display_name": "Mnemonic", "link": "https://stackoverflow.com/users/7145371/mnemonic"}, "edited": false, "score": 0, "creation_date": 1525875304, "post_id": 50254612, "comment_id": 87528720, "body": "I agree with you that this must be the correct way to do it but it doesn&#39;t compile. If I try to compile it I got the message: &quot;error: \u2018MyEnum_t\u2019 does not name a type&quot; If I try to fix the return value adding &quot;MyClass::&quot; I got: &quot;error: cannot bind non-const lvalue reference of type \u2018MyNamespace::MyClass::MyEnum_t&amp;\u2019 to an rvalue of type \u2018MyNamespace::MyClass::MyEnum_t\u2019&quot;"}, {"owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "reply_to_user": {"reputation": 53, "user_id": 7145371, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4fda60cfb1ee45e519d5faa383b61b92?s=128&d=identicon&r=PG&f=1", "display_name": "Mnemonic", "link": "https://stackoverflow.com/users/7145371/mnemonic"}, "edited": false, "score": 0, "creation_date": 1525895800, "post_id": 50254612, "comment_id": 87540264, "body": "@Mnemonic That&#39;s because of the reference, as StoryTeller correctly pointed out. Answer edited."}, {"owner": {"reputation": 53, "user_id": 7145371, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4fda60cfb1ee45e519d5faa383b61b92?s=128&d=identicon&r=PG&f=1", "display_name": "Mnemonic", "link": "https://stackoverflow.com/users/7145371/mnemonic"}, "edited": false, "score": 0, "creation_date": 1525901894, "post_id": 50254612, "comment_id": 87542933, "body": "@Angew One thing was wrong in your solution. The scope of the return value. After fixing that its compiles. Thank you."}, {"owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "reply_to_user": {"reputation": 53, "user_id": 7145371, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4fda60cfb1ee45e519d5faa383b61b92?s=128&d=identicon&r=PG&f=1", "display_name": "Mnemonic", "link": "https://stackoverflow.com/users/7145371/mnemonic"}, "edited": false, "score": 0, "creation_date": 1525937653, "post_id": 50254612, "comment_id": 87553346, "body": "@Mnemonic &quot;One thing was wrong in your solution&quot;: well, it was just copy-pasted from the Q, so it wasn&#39;t really &quot;my&quot; solution. I just didn&#39;t notice, because the <code>&amp;</code> is placed in an unusual place (it&#39;s more commonly placed by the type, not by the function name). Anyway, that&#39;s what I mentioned as edited in the answer."}], "tags": [], "owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "is_accepted": false, "score": 3, "last_activity_date": 1525895765, "last_edit_date": 1525895765, "creation_date": 1525872471, "answer_id": 50254612, "question_id": 50254507, "link": "https://stackoverflow.com/questions/50254507/c11-overloading-operator-for-in-class-placed-enum-class/50254612#50254612", "title": "C++11 Overloading operator for in class placed enum class", "body": "<p>The enum class can be inside another class, but the operator definition must be at namespace scope.</p>\n\n<p>Also note that the operator is computing a new value and as such, it cannot return a reference, as there would be nothing to which the reference could bind. It should return by value instead.</p>\n\n<p>In total:</p>\n\n<pre><code>namespace MyNamespace\n{\n    class MyClass\n    {\n    public:\n        enum class MyEnum_t\n        {\n            VALUE_0 = 0x0,\n            VALUE_1 = 0x1,\n            VALUE_2 = 0x2,\n            VALUE_3 = 0x4,\n            VALUE_4 = 0x8 \n       };\n    };\n\n    inline MyClass::MyEnum_t operator|(MyClass::MyEnum_t lhs, MyClass::MyEnum_t rhs)\n    {\n       return static_cast&lt;MyEnum_t&gt;(static_cast&lt;std::uint8_t&gt;(lhs) | static_cast&lt;std::uint8_t&gt;(rhs));\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 53, "user_id": 7145371, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4fda60cfb1ee45e519d5faa383b61b92?s=128&d=identicon&r=PG&f=1", "display_name": "Mnemonic", "link": "https://stackoverflow.com/users/7145371/mnemonic"}, "is_accepted": false, "score": 1, "last_activity_date": 1525902236, "creation_date": 1525902236, "answer_id": 50262495, "question_id": 50254507, "link": "https://stackoverflow.com/questions/50254507/c11-overloading-operator-for-in-class-placed-enum-class/50262495#50262495", "title": "C++11 Overloading operator for in class placed enum class", "body": "<p>Fixed code for the operator:</p>\n\n<pre><code>inline MyClass::MyEnum_t operator|(MyClass::MyEnum_t lhs, MyClass::MyEnum_t rhs)\n{\n    return static_cast&lt;MyClass::MyEnum_t&gt;(static_cast&lt;std::uint8_t&gt;(lhs) | static_cast&lt;std::uint8_t&gt;(rhs));\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4175, "user_id": 1082038, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IEql2.jpg?s=128&g=1", "display_name": "Nevin", "link": "https://stackoverflow.com/users/1082038/nevin"}, "is_accepted": false, "score": 3, "last_activity_date": 1525902708, "creation_date": 1525902708, "answer_id": 50262579, "question_id": 50254507, "link": "https://stackoverflow.com/questions/50254507/c11-overloading-operator-for-in-class-placed-enum-class/50262579#50262579", "title": "C++11 Overloading operator for in class placed enum class", "body": "<p>I would write it as:</p>\n\n<pre><code>class MyClass\n{\npublic:\n    enum class MyEnum_t\n    {\n        VALUE_0 = 0x0,\n        VALUE_1 = 0x1,\n        VALUE_2 = 0x2,\n        VALUE_3 = 0x4,\n        VALUE_4 = 0x8,\n    };\n\n    friend MyEnum_t operator|(MyEnum_t lhs, MyEnum_t rhs)\n    {\n        using UT = std::underlying_type&lt;MyEnum_t&gt;::type;\n        return static_cast&lt;MyEnum_t&gt;(static_cast&lt;UT&gt;(lhs) | static_cast&lt;UT&gt;(rhs));\n    }\n};\n</code></pre>\n\n<p>This way, it no longer matters whether or not <code>MyClass</code> is in a <code>namespace</code>, and the correct <code>underlying_type</code> is used to perform the bitwise math.</p>\n"}, {"tags": [], "owner": {"reputation": 111, "user_id": 9769225, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rJSYj.jpg?s=128&g=1", "display_name": "Gal Keren", "link": "https://stackoverflow.com/users/9769225/gal-keren"}, "is_accepted": false, "score": 0, "last_activity_date": 1525949062, "last_edit_date": 1525949062, "creation_date": 1525940047, "answer_id": 50268439, "question_id": 50254507, "link": "https://stackoverflow.com/questions/50254507/c11-overloading-operator-for-in-class-placed-enum-class/50268439#50268439", "title": "C++11 Overloading operator for in class placed enum class", "body": "<p>As you wrote your following main() code line:</p>\n\n<p>test = MyNamespace::MyClass:MyEnum_t::VALUE_1 | MyNamespace::MyClass::MyEnum_t::VALUE_2;</p>\n\n<p>It will expect namespace operator, so the operator should be placed outside the MyClass (but within the MyNamespace):</p>\n\n<pre><code>MyClass::MyEnum_t operator|(MyClass::MyEnum_t lhs, MyClass::MyEnum_t rhs)\n{\n    return static_cast&lt;MyClass::MyEnum_t&gt;(static_cast&lt;std::uint8_t&gt;(lhs) | static_cast&lt;std::uint8_t&gt;(rhs));\n}\n</code></pre>\n\n<p>also, as stated in above answer you can not return a temporary memory (as reference), so either return by-value or define static variable in the operator and return it.</p>\n"}], "owner": {"reputation": 53, "user_id": 7145371, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4fda60cfb1ee45e519d5faa383b61b92?s=128&d=identicon&r=PG&f=1", "display_name": "Mnemonic", "link": "https://stackoverflow.com/users/7145371/mnemonic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 0, "answer_count": 4, "score": 3, "last_activity_date": 1525949062, "creation_date": 1525872150, "last_edit_date": 1525872270, "question_id": 50254507, "link": "https://stackoverflow.com/questions/50254507/c11-overloading-operator-for-in-class-placed-enum-class", "title": "C++11 Overloading operator for in class placed enum class", "body": "<p>this is my first try to use enum classes for my projects, but I have the problem that I can't compile my code if the enum class is placed inside of another class.\nI try to define the operator overloading like my example and I try to do it outside, too.\nAll works fine if I place the enum class outside the class.\nWhats wrong? How to overloading the operator if I what to use it placed in an class?</p>\n\n<pre><code>#include &lt;cstdint&gt;\n\nnamespace MyNamespace\n{\n    class MyClass\n    {\n    public:\n        enum class MyEnum_t\n        {\n            VALUE_0 = 0x0,\n            VALUE_1 = 0x1,\n            VALUE_2 = 0x2,\n            VALUE_3 = 0x4,\n            VALUE_4 = 0x8 \n       };\n\n        inline MyEnum_t &amp;operator|(MyEnum_t lhs, MyEnum_t rhs)\n        {\n            return static_cast&lt;MyEnum_t&gt;(static_cast&lt;std::uint8_t&gt;(lhs) | static_cast&lt;std::uint8_t&gt;(rhs));\n        }\n}\n\nint main()\n{\n    MyNamespace::MyClass::MyEnum_t test = MyNamespace::MyClass::MyEnum_t::VALUE_0;\n\n    test = MyNamespace::MyClass:MyEnum_t::VALUE_1 | MyNamespace::MyClass::MyEnum_t::VALUE_2;\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "initialization", "c++17", "list-initialization"], "comments": [{"owner": {"reputation": 41100, "user_id": 1938163, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/WV0Fi.png?s=128&g=1", "display_name": "Marco A.", "link": "https://stackoverflow.com/users/1938163/marco-a"}, "edited": false, "score": 5, "creation_date": 1525873324, "post_id": 50254467, "comment_id": 87527253, "body": "Looks like it&#39;s initializing the base subobject (D derives from B afterall). Clang also emits a warning <code>missing field &#39;k&#39; initializer</code>. If it weren&#39;t, <a href=\"https://wandbox.org/permlink/onSSh1f6Hzvt7oOU\" rel=\"nofollow noreferrer\">this would be quite blaspheme</a>."}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 6, "creation_date": 1525875189, "post_id": 50254467, "comment_id": 87528648, "body": "The unintuitive behavior in your second example largely follows from circles and rectangles <i>being</i> points. Fankly, it is an abuse of inheritance because rectangles are not points. If the base class was <code>ShapeWithCenter</code> then it would largely (but not fully) be obvious what is happening. Now, I agree that the difference between brace initialization and the ostensibly intended constructor is still dangerous, but that is not new."}, {"owner": {"reputation": 1399, "user_id": 254722, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/9e483298c8d8fe470e537c1cb2087499?s=128&d=identicon&r=PG", "display_name": "Barnett", "link": "https://stackoverflow.com/users/254722/barnett"}, "reply_to_user": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1525875651, "post_id": 50254467, "comment_id": 87528967, "body": "@Max, what is new is that prior to C++17 the compiler would have caught these mistakes."}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1525876025, "post_id": 50254467, "comment_id": 87529215, "body": "@Barnett: Who decides that it is a &quot;mistake&quot;? How would the compiler know that you didn&#39;t mean it?"}, {"owner": {"reputation": 1399, "user_id": 254722, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/9e483298c8d8fe470e537c1cb2087499?s=128&d=identicon&r=PG", "display_name": "Barnett", "link": "https://stackoverflow.com/users/254722/barnett"}, "reply_to_user": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1525876866, "post_id": 50254467, "comment_id": 87529924, "body": "@Nicol, in my code <code>D</code> and <code>E</code> adds no new members to <code>B</code>. I could have used <code>B</code> everywhere, or I could have used <code>using D = B</code> and <code>using E = B</code>. If I did that then yes, it should be possible to initialize an <code>E</code> from a <code>D</code>. But I do NOT want this to be possible, so I am using the type system to create separate types. Before C++17 this was a good way of caching mistakes. But now it is not."}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 9, "creation_date": 1525876960, "post_id": 50254467, "comment_id": 87530003, "body": "@Barnett: &quot;<i>But I do NOT want this to be possible, so I am using the type system to create separate types.</i>&quot; Then use the type system to create <i>separate</i> types. Public inheritance is not a way to create separate types. It never has been. That something is a &quot;mistake&quot; to you doesn&#39;t mean that it is a &quot;mistake&quot; in a language sense."}, {"owner": {"reputation": 1399, "user_id": 254722, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/9e483298c8d8fe470e537c1cb2087499?s=128&d=identicon&r=PG", "display_name": "Barnett", "link": "https://stackoverflow.com/users/254722/barnett"}, "reply_to_user": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 1, "creation_date": 1525880410, "post_id": 50254467, "comment_id": 87532294, "body": "@Nicol, I am not the first person to use public inheritance. In his book &quot;The C++ Programming Language&quot; Bjarne Stroustrup derives <code>Manager</code> and <code>Assistant</code> from <code>Employee</code>. Same thing as my example. So if I am using the language wrong, at least I am in good company. I just don&#39;t think it should be possible to silently convert an <code>Assistant</code> into a <code>Manager</code>."}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 5, "creation_date": 1525880801, "post_id": 50254467, "comment_id": 87532543, "body": "@Barnett: I haven&#39;t seen the example you&#39;re talking about, but given the names, it makes <i>far more</i> sense that <code>Manager</code> and <code>Assistant</code> have an &quot;is a&quot; relationship to <code>Employee</code> than it does for <code>circle</code> and <code>rectangle</code> with <code>point</code>. Circles <i>have</i> points but they are not points; you cannot use them interchangeably with points. Whereas a manager cannot be a manager without also being an employee. I would also wager that none of Stroustrup&#39;s types are <i>aggregates</i>, so that wouldn&#39;t matter."}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 8, "creation_date": 1525880926, "post_id": 50254467, "comment_id": 87532617, "body": "@Barnett: Please read about the <a href=\"https://en.wikipedia.org/wiki/Liskov_substitution_principle\" rel=\"nofollow noreferrer\">Liskov Substitution Principle.</a> Managers and employees have it; circles and points do not. The problem is not that public inheritance exists; it&#39;s that you&#39;re using it inappropriately."}, {"owner": {"reputation": 1399, "user_id": 254722, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/9e483298c8d8fe470e537c1cb2087499?s=128&d=identicon&r=PG", "display_name": "Barnett", "link": "https://stackoverflow.com/users/254722/barnett"}, "edited": false, "score": 0, "creation_date": 1525881817, "post_id": 50254467, "comment_id": 87533151, "body": "I will have a look. But let&#39;s get back to the original question. C++17 introduced new functionality specifically relating to deriving from aggregates. The examples in the motivation section of that proposal is no different from what I have presented here. The problem remains. When you have more than one class deriving from the same aggregate, the one can be silently converted to the other."}, {"owner": {"reputation": 801, "user_id": 1710519, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/c970b786c30c592724d179c312dc097b?s=128&d=identicon&r=PG", "display_name": "stewbasic", "link": "https://stackoverflow.com/users/1710519/stewbasic"}, "reply_to_user": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 1, "creation_date": 1525902435, "post_id": 50254467, "comment_id": 87543114, "body": "I think the conversion from D to B is a red-herring here; as @NicolBolas points out, we expect the language to allow this. What we don&#39;t expect is to be able to convert B to E. I suggest changing the example to have only two types, something like <a href=\"http://cpp.sh/367lw\" rel=\"nofollow noreferrer\">cpp.sh/367lw</a>."}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 2, "creation_date": 1525902960, "post_id": 50254467, "comment_id": 87543287, "body": "@Barnett: &quot;<i>When you have more than one class deriving from the same aggregate, the one can be silently converted to the other.</i>&quot; Conversion is this: <code>D d = e;</code>. That&#39;s not allowed. What you&#39;re doing is <i>initializing</i> an object; that&#39;s what a braced-init-list is for. <code>D d = {e};</code> is not supposed to be the same thing as <code>D d = e;</code>."}, {"owner": {"reputation": 1399, "user_id": 254722, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/9e483298c8d8fe470e537c1cb2087499?s=128&d=identicon&r=PG", "display_name": "Barnett", "link": "https://stackoverflow.com/users/254722/barnett"}, "reply_to_user": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1525943215, "post_id": 50254467, "comment_id": 87555979, "body": "@Nicol, that is exactly the problem. It has been my understanding that as of C++11 brace initialization is the safe option (eg no narrowing conversions). So when I call function <code>E f();</code>, I save the return value in a variable using <code>E e{ f() };</code> and not <code>E e = f();</code>. But as I illustrated, as of C++17, I can now write <code>D d{ f() }</code>, and the compiler will silently accept what is almost certainly an error. The same goes for <code>struct F { F(D d) : e{d} {}  E e; };</code> I think most people will be very surprised that that now compiles."}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1525958976, "post_id": 50254467, "comment_id": 87564876, "body": "@Barnett: &quot;<i>the compiler will silently accept what is almost certainly an error.</i>&quot; Which you could have written in C++14 by using a member; all C++17 changed was that a base class was considered a member for purposes of aggregate initialization. The problem you&#39;re having is that you want list initialization to be something it isn&#39;t, to make promises that it&#39;s not trying to make."}], "answers": [{"comments": [{"owner": {"reputation": 1399, "user_id": 254722, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/9e483298c8d8fe470e537c1cb2087499?s=128&d=identicon&r=PG", "display_name": "Barnett", "link": "https://stackoverflow.com/users/254722/barnett"}, "edited": false, "score": 1, "creation_date": 1525872786, "post_id": 50254668, "comment_id": 87526848, "body": "What if <code>class D</code> and <code>class E</code> does not add any new members, but are used as distinct types (eg for the purposes of overloading)?"}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 1399, "user_id": 254722, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/9e483298c8d8fe470e537c1cb2087499?s=128&d=identicon&r=PG", "display_name": "Barnett", "link": "https://stackoverflow.com/users/254722/barnett"}, "edited": false, "score": 1, "creation_date": 1525874031, "post_id": 50254668, "comment_id": 87527835, "body": "@Barnett I don&#39;t understand the concern. Given <code>void f(D); void f(E);</code>,  <code>f({d})</code> calls the former, <code>f({b})</code> is ambiguous."}, {"owner": {"reputation": 1399, "user_id": 254722, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/9e483298c8d8fe470e537c1cb2087499?s=128&d=identicon&r=PG", "display_name": "Barnett", "link": "https://stackoverflow.com/users/254722/barnett"}, "edited": false, "score": 1, "creation_date": 1525875480, "post_id": 50254668, "comment_id": 87528849, "body": "In my code I am using classes as a form of strong types. This allows me to overload functions based on type, etc... but more importantly, it protects me from accidentally initializing one unrelated type from another. Now, with the C++17 compiler, that protection is gone (if I continue to use brace initialization)."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 1399, "user_id": 254722, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/9e483298c8d8fe470e537c1cb2087499?s=128&d=identicon&r=PG", "display_name": "Barnett", "link": "https://stackoverflow.com/users/254722/barnett"}, "edited": false, "score": 8, "creation_date": 1525875743, "post_id": 50254668, "comment_id": 87529039, "body": "@Barnett That protection is gone... unless you add a constructor. Or compile with warnings. Or not use brace initialization. Or have any member that isn&#39;t default-initialization. Or ..."}, {"owner": {"reputation": 1399, "user_id": 254722, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/9e483298c8d8fe470e537c1cb2087499?s=128&d=identicon&r=PG", "display_name": "Barnett", "link": "https://stackoverflow.com/users/254722/barnett"}, "edited": false, "score": 0, "creation_date": 1525944832, "post_id": 50254668, "comment_id": 87556849, "body": "Unfortunately Visual C++ gives no such warning, not even with <code>&#47;Wall</code>."}], "tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": false, "score": 29, "last_activity_date": 1525879898, "last_edit_date": 1525879898, "creation_date": 1525872612, "answer_id": 50254668, "question_id": 50254467, "link": "https://stackoverflow.com/questions/50254467/has-the-c17-extension-to-aggregate-initialization-made-brace-initialization-da/50254668#50254668", "title": "Has the C++17 extension to aggregate initialization made brace initialization dangerous?", "body": "<p>This isn't new in C++17. Aggregate initialization always allowed you to leave off members (which would be initialized from an empty initializer list, <a href=\"https://timsong-cpp.github.io/cppwp/n3337/dcl.init.aggr#7\" rel=\"noreferrer\">C++11</a>):</p>\n\n<pre><code>struct X {\n    int i, j;\n};\n\nX x{42}; // ok in C++11\n</code></pre>\n\n<p>It's just now that there's more kinds of things that could be left off, since there's more kinds of things that can be included.</p>\n\n<hr />\n\n<p>gcc and clang at least will provide a warning by way of <code>-Wmissing-field-initializers</code> (it's part of <code>-Wextra</code>) that will indicate that something is missing. If this is a huge concern, just compile with that warning enabled (and, possibly, upgraded to an error):</p>\n\n<pre><code>&lt;source&gt;: In function 'void f(const D&amp;)':\n&lt;source&gt;:9:11: warning: missing initializer for member 'E::k' [-Wmissing-field-initializers]\n   E e3{ d };  // OK in C++17 ???\n           ^\n&lt;source&gt;: In constructor 'F::F(D)':\n&lt;source&gt;:14:19: warning: missing initializer for member 'E::k' [-Wmissing-field-initializers]\n   F( D d ) : e{ d } {}  // OK in C++17 ???\n                   ^\n</code></pre>\n\n<p>More direct would be just to add a constructor to these types so that they cease to be aggregates. You don't <em>have</em> to use aggregate initialization, after all. </p>\n"}, {"comments": [{"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "reply_to_user": {"reputation": 1399, "user_id": 254722, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/9e483298c8d8fe470e537c1cb2087499?s=128&d=identicon&r=PG", "display_name": "Barnett", "link": "https://stackoverflow.com/users/254722/barnett"}, "edited": false, "score": 20, "creation_date": 1525875901, "post_id": 50254734, "comment_id": 87529137, "body": "@Barnett: Your new example is no better than the old one. Circles <i>have</i> points; rectangles <i>have</i> points, but they are not points in any real way. So why did you declare an &quot;is a&quot; relationship (ie: inheritance) where that relationship is not reflected in the types? The problem isn&#39;t the language; it&#39;s your use of it."}, {"owner": {"reputation": 182, "user_id": 9662186, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4618e6a8b7712aabdd70f33b1bfece0?s=128&d=identicon&r=PG&f=1", "display_name": "wooooooooosh", "link": "https://stackoverflow.com/users/9662186/wooooooooosh"}, "reply_to_user": {"reputation": 1399, "user_id": 254722, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/9e483298c8d8fe470e537c1cb2087499?s=128&d=identicon&r=PG", "display_name": "Barnett", "link": "https://stackoverflow.com/users/254722/barnett"}, "edited": false, "score": 0, "creation_date": 1525876054, "post_id": 50254734, "comment_id": 87529238, "body": "@Barnett circle can be implicitly converted to point, point can be used to init paint base class of rectangle. The updated question still have no issue with this answer."}, {"owner": {"reputation": 1399, "user_id": 254722, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/9e483298c8d8fe470e537c1cb2087499?s=128&d=identicon&r=PG", "display_name": "Barnett", "link": "https://stackoverflow.com/users/254722/barnett"}, "edited": false, "score": 0, "creation_date": 1525877611, "post_id": 50254734, "comment_id": 87530449, "body": "@Nicol, sorry I don&#39;t agree. If <code>circle</code> and <code>rectangle</code> have significant functionality in common, then it is perfectly acceptable (and desirable) to implement that common functionality in a shared base class. Please don&#39;t focus too much on these trivial examples."}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "reply_to_user": {"reputation": 1399, "user_id": 254722, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/9e483298c8d8fe470e537c1cb2087499?s=128&d=identicon&r=PG", "display_name": "Barnett", "link": "https://stackoverflow.com/users/254722/barnett"}, "edited": false, "score": 8, "creation_date": 1525878318, "post_id": 50254734, "comment_id": 87530913, "body": "@Barnett: You asked why the language works the way it does. I explained the theoretical idea behind inheritance. You don&#39;t have to agree with it, but that&#39;s how the language see it, so that&#39;s how the language behaves. What you are trying to do is not something the language wants to support; that&#39;s why you&#39;re having problems making it work."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 1399, "user_id": 254722, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/9e483298c8d8fe470e537c1cb2087499?s=128&d=identicon&r=PG", "display_name": "Barnett", "link": "https://stackoverflow.com/users/254722/barnett"}, "edited": false, "score": 5, "creation_date": 1525890116, "post_id": 50254734, "comment_id": 87537441, "body": "@Barnett If you use the C++ object model you are constrained by the semantics of it.  <code>struct A:B</code> doesn&#39;t mean &quot;reuse <code>B</code>&#39;s implementation&quot;, it means &quot;an <code>A</code> is a <code>B</code> and can be used anywhere a <code>B</code> can be used&quot;.  If you try to use it <i>without</i> that semantic meaning you can be burned.  You have already stated that a circle is kind of point and a rectangle is kind of point.  It is true that C++17 has now added a new aggregate construction method, but it leading to a problem here relies on your semantic error."}, {"owner": {"reputation": 1399, "user_id": 254722, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/9e483298c8d8fe470e537c1cb2087499?s=128&d=identicon&r=PG", "display_name": "Barnett", "link": "https://stackoverflow.com/users/254722/barnett"}, "reply_to_user": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1525890683, "post_id": 50254734, "comment_id": 87537746, "body": "@Yakk. I understand that <code>struct A : B</code> means that &quot;<code>A</code> can be used anywhere <code>B</code> can be used&quot;, and that <code>struct C : B</code> means that &quot;<code>C</code> can be used anywhere <code>B</code> can be used&quot;... but I don&#39;t understand how you then get to &quot;<code>A</code> can be used to initialize <code>C</code>, and vice versa&quot;."}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "reply_to_user": {"reputation": 1399, "user_id": 254722, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/9e483298c8d8fe470e537c1cb2087499?s=128&d=identicon&r=PG", "display_name": "Barnett", "link": "https://stackoverflow.com/users/254722/barnett"}, "edited": false, "score": 4, "creation_date": 1525891097, "post_id": 50254734, "comment_id": 87537945, "body": "@Barnett: If &quot;<code>B</code> can be used to initialize <code>C</code>&quot; and &quot;<code>A</code> can be used anywhere <code>B</code> can be used&quot;, then by the transitive property, &quot;<code>A</code> can be used to initialize <code>C</code>&quot;. The problem is that you&#39;re trying to think of initialization from a single object as something distinct from initialization from multiple objects."}, {"owner": {"reputation": 1399, "user_id": 254722, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/9e483298c8d8fe470e537c1cb2087499?s=128&d=identicon&r=PG", "display_name": "Barnett", "link": "https://stackoverflow.com/users/254722/barnett"}, "edited": false, "score": 0, "creation_date": 1525893038, "post_id": 50254734, "comment_id": 87538923, "body": "@Nicol, I have a problem with the idea that &quot;<code>B</code> can be used to initialize <code>C</code>&quot;... When I see <code>struct C : B</code>, in my mind <code>C</code>&gt;<code>B</code>, so <code>C</code> can be used to initialize <code>B</code>, but not the other way round."}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "reply_to_user": {"reputation": 1399, "user_id": 254722, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/9e483298c8d8fe470e537c1cb2087499?s=128&d=identicon&r=PG", "display_name": "Barnett", "link": "https://stackoverflow.com/users/254722/barnett"}, "edited": false, "score": 0, "creation_date": 1525893583, "post_id": 50254734, "comment_id": 87539188, "body": "@Barnett: An aggregate can be initialized from a sequence of one or more of its subobjects, in declaration order. <code>B</code> is the first subobject of <code>C</code>, so <code>C</code> can be initialized from <code>B</code>."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 1399, "user_id": 254722, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/9e483298c8d8fe470e537c1cb2087499?s=128&d=identicon&r=PG", "display_name": "Barnett", "link": "https://stackoverflow.com/users/254722/barnett"}, "edited": false, "score": 3, "creation_date": 1525897616, "post_id": 50254734, "comment_id": 87541064, "body": "@Barnett To fix this, you need a <i>constructor</i>.  If <code>C</code>&gt;<code>B</code> write a constructor that takes something that isn&#39;t just a <code>B</code>.  How exactly did you intent people to construct a <code>circle</code> before this change?  Create an uninitialized one then set its values one at a time?"}], "tags": [], "owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "is_accepted": false, "score": 37, "last_activity_date": 1525960117, "last_edit_date": 1525960117, "creation_date": 1525872793, "answer_id": 50254734, "question_id": 50254467, "link": "https://stackoverflow.com/questions/50254467/has-the-c17-extension-to-aggregate-initialization-made-brace-initialization-da/50254734#50254734", "title": "Has the C++17 extension to aggregate initialization made brace initialization dangerous?", "body": "<blockquote>\n  <p>struct D and struct E represent two completely unrelated types.</p>\n</blockquote>\n\n<p>But they're not \"completely unrelated\" types. They both have the same base class type. This means that every <code>D</code> is implicitly convertible to a <code>B</code>. And therefore every <code>D</code> <em>is a</em> <code>B</code>. So doing <code>E e{d};</code> is no different from <code>E e{b};</code> in terms of the invoked operation.</p>\n\n<p>You cannot turn off implicit conversion to base classes.</p>\n\n<p>If this truly bothers you, the only solution is to prevent aggregate initialization by providing an appropriate constructor(s) that forwards the values to the members.</p>\n\n<p>As for whether this makes aggregate initialization more dangerous, I don't think so. You could reproduce the above circumstances with these structs:</p>\n\n<pre><code>struct B { int i; };\nstruct D { B b; char j; operator B() {return b;} };\nstruct E { B b; float k; };\n</code></pre>\n\n<p>So something of this nature was always a possibility. I don't think that using implicit base class conversion makes it that much \"worse\".</p>\n\n<p>A deeper question is why a user tried to initialize an <code>E</code> with a <code>D</code> to begin with.</p>\n\n<blockquote>\n  <p>the idea that you can silently convert from a circle to a rectangle, that to me is a problem.</p>\n</blockquote>\n\n<p>You would have the same problem if you did this:</p>\n\n<pre><code>struct rectangle\n{\n  rectangle(point p);\n\n  int sx; int sy;\n  point p;\n};\n</code></pre>\n\n<p>You can not only perform <code>rectangle r{c};</code> but <code>rectangle r(c)</code>.</p>\n\n<p>Your problem is that you're using inheritance incorrectly. You're saying things about the relationship between <code>circle</code>, <code>rectangle</code> and <code>point</code> which you don't mean. And therefore, the compiler lets you do things you didn't mean to do.</p>\n\n<p>If you had used containment instead of inheritance, this wouldn't be a problem:</p>\n\n<pre><code>struct point { int x; int y; };\nstruct circle { point center; int r; };\nstruct rectangle { point top_left; int sx; int sy; };\n\nvoid move( point&amp; p );\n\nvoid f( circle c )\n{\n  move( c ); // Error, as it should, since a circle is not a point.\n  rectangle r1( c );  // Error, as it should be\n  rectangle r2{ c };  // Error, as it should be.\n}\n</code></pre>\n\n<p>Either <code>circle</code> is <em>always</em> a <code>point</code>, or it is <em>never</em> a <code>point</code>. You're trying to make it a <code>point</code> sometimes and not others. That's logically incoherent. If you create logically incoherent types, then you can write logically incoherent code.</p>\n\n<hr>\n\n<blockquote>\n  <p>the idea that you can silently convert from a circle to a rectangle, that to me is a problem.</p>\n</blockquote>\n\n<p>This brings up an important point. Conversion, strictly speaking, looks like this:</p>\n\n<pre><code>circle cr = ...\nrectangle rect = cr;\n</code></pre>\n\n<p>That is ill-formed. When you do <code>rectangle rect = {cr};</code>, you're <em>not</em> doing a conversion. You are explicitly invoking list-initialization, which for an aggregate will usually provoke aggregate initialization.</p>\n\n<p>Now, list-initialization certainly can perform a conversion. But given merely <code>D d = {e};</code>, one should not expect that this means you're performing conversion from an <code>e</code> to a <code>D</code>. You're list-initializing an object of type <code>D</code> with an <code>e</code>. That can perform conversion if <code>E</code> is convertible to <code>D</code>, but this initialization can still be valid if non-conversion list-initialization forms can work too.</p>\n\n<p>So it is incorrect to say that this feature makes <code>circle</code> convertible to <code>rectangle</code>.</p>\n"}], "owner": {"reputation": 1399, "user_id": 254722, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/9e483298c8d8fe470e537c1cb2087499?s=128&d=identicon&r=PG", "display_name": "Barnett", "link": "https://stackoverflow.com/users/254722/barnett"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4249, "favorite_count": 10, "answer_count": 2, "score": 48, "last_activity_date": 1528020201, "creation_date": 1525872027, "last_edit_date": 1528020201, "question_id": 50254467, "link": "https://stackoverflow.com/questions/50254467/has-the-c17-extension-to-aggregate-initialization-made-brace-initialization-da", "title": "Has the C++17 extension to aggregate initialization made brace initialization dangerous?", "body": "<p>There seems to be a general consensus that <a href=\"https://stackoverflow.com/questions/18222926/why-is-list-initialization-using-curly-braces-better-than-the-alternatives\">brace initialization should be preferred</a> over other forms of initialization, however since the introduction of the C++17 <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2015/p0017r1.html\" rel=\"nofollow noreferrer\">extension to aggregate initialization</a> there seems to be a risk of unintended conversions. Consider the following code:</p>\n\n<pre><code>struct B { int i; };\nstruct D : B { char j; };\nstruct E : B { float k; };\n\nvoid f( const D&amp; d )\n{\n  E e1 = d;   // error C2440: 'initializing': cannot convert from 'D' to 'E'\n  E e2( d );  // error C2440: 'initializing': cannot convert from 'D' to 'E'\n  E e3{ d };  // OK in C++17 ???\n}\n\nstruct F\n{\n  F( D d ) : e{ d } {}  // OK in C++17 ???\n  E e;\n};\n</code></pre>\n\n<p>In the code above <code>struct D</code> and <code>struct E</code> represent two completely unrelated types. So it is a surprise to me that as of C++17 you can \"convert\" from one type to another type without any warning if you use brace (aggregate) initialization. </p>\n\n<p>What would you recommend to avoid these types of accidental conversions? Or am I missing something?</p>\n\n<p>PS: The code above was tested in Clang, GCC and the latest VC++ - they are all the same.</p>\n\n<p>Update: In response to the answer from Nicol. Consider a more practical example:</p>\n\n<pre><code>struct point { int x; int y; };\nstruct circle : point { int r; };\nstruct rectangle : point { int sx; int sy; };\n\nvoid move( point&amp; p );\n\nvoid f( circle c )\n{\n  move( c ); // OK, makes sense\n  rectangle r1( c );  // Error, as it should be\n  rectangle r2{ c };  // OK ???\n}\n</code></pre>\n\n<p>I can understand that you can view a <code>circle</code> as a <code>point</code>, because <code>circle</code> has <code>point</code> as base class, but the idea that you can silently convert from a circle to a rectangle, that to me is a problem.</p>\n\n<p>Update 2: Because my poor choice of class name seems to be clouding the issue for some.</p>\n\n<pre><code>struct shape { int x; int y; };\nstruct circle : shape { int r; };\nstruct rectangle : shape { int sx; int sy; };\n\nvoid move( shape&amp; p );\n\nvoid f( circle c )\n{\n  move( c ); // OK, makes sense\n  rectangle r1( c );  // Error, as it should be\n  rectangle r2{ c };  // OK ???\n}\n</code></pre>\n"}, {"tags": ["c++", "comparison", "type-safety"], "comments": [{"owner": {"reputation": 32126, "user_id": 2666289, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/746dd23bbe20769fbd758421e67f455c?s=128&d=identicon&r=PG", "display_name": "Holt", "link": "https://stackoverflow.com/users/2666289/holt"}, "edited": false, "score": 0, "creation_date": 1525872816, "post_id": 50254409, "comment_id": 87526873, "body": "Slightly off-topic but you should be careful when comparing integer types to floating-point types. While a <code>double</code> is usually large enough to represent <b>exactly</b> any <code>int</code>, a <code>float</code> usually cannot do so."}], "answers": [{"comments": [{"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1525876619, "post_id": 50254493, "comment_id": 87529718, "body": "There is an implicit <b>conversion</b>. There is no such thing as an implicit cast. A cast is something you write in your source code to tell the compiler to do a conversion. (yes, Clang is using the term incorrectly)"}, {"owner": {"reputation": 9737, "user_id": 1460794, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/7lOXx.png?s=128&g=1", "display_name": "wally", "link": "https://stackoverflow.com/users/1460794/wally"}, "reply_to_user": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1525877846, "post_id": 50254493, "comment_id": 87530608, "body": "@PeteBecker Thanks for the clarification. I&#39;ll update accordingly."}], "tags": [], "owner": {"reputation": 9737, "user_id": 1460794, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/7lOXx.png?s=128&g=1", "display_name": "wally", "link": "https://stackoverflow.com/users/1460794/wally"}, "is_accepted": false, "score": 4, "last_activity_date": 1525878394, "last_edit_date": 1525878394, "creation_date": 1525872101, "answer_id": 50254493, "question_id": 50254409, "link": "https://stackoverflow.com/questions/50254409/comparing-double-to-an-int/50254493#50254493", "title": "Comparing double to an int", "body": "<p>Yes, there is an implicit conversion.</p>\n\n<p>Consider the following program:</p>\n\n<pre><code>bool f()\n{\n    return 3 == 3.0;\n}\n</code></pre>\n\n<p>If you <a href=\"https://godbolt.org/g/syKhWf\" rel=\"nofollow noreferrer\">look at the AST</a> generated by Clang then you see where the implicit conversion is done. Clang calls it an <code>ImplicitCastExpr</code>:</p>\n\n<pre><code>  `-BinaryOperator &lt;col:12, col:17&gt; 'bool' '=='\n    |-ImplicitCastExpr &lt;col:12&gt; 'double' &lt;IntegralToFloating&gt;\n    | `-IntegerLiteral &lt;col:12&gt; 'int' 3\n    `-FloatingLiteral &lt;col:17&gt; 'double' 3.000000e+00\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 32126, "user_id": 2666289, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/746dd23bbe20769fbd758421e67f455c?s=128&d=identicon&r=PG", "display_name": "Holt", "link": "https://stackoverflow.com/users/2666289/holt"}, "is_accepted": false, "score": 4, "last_activity_date": 1525872450, "creation_date": 1525872450, "answer_id": 50254606, "question_id": 50254409, "link": "https://stackoverflow.com/questions/50254409/comparing-double-to-an-int/50254606#50254606", "title": "Comparing double to an int", "body": "<p>C++ has a sets of built-in operators defined in <a href=\"http://eel.is/c++draft/over.built\" rel=\"nofollow noreferrer\">[over.built]</a>. The behavior of the equality operator is defined in <a href=\"http://eel.is/c++draft/expr.eq\" rel=\"nofollow noreferrer\">[expr.eq]</a>, in particular:</p>\n\n<blockquote>\n  <p><sup><a href=\"http://eel.is/c++draft/expr.eq#6\" rel=\"nofollow noreferrer\">6</a></sup> If both operands are of arithmetic or enumeration type, the <a href=\"http://eel.is/c++draft/expr.arith.conv\" rel=\"nofollow noreferrer\">usual arithmetic conversions</a> are performed on both operands; each of the operators shall yield true if the specified relationship is true and false if it is false.</p>\n</blockquote>\n\n<p>And <a href=\"http://eel.is/c++draft/expr.arith.conv\" rel=\"nofollow noreferrer\">usual arithmetic conversions</a> implies:</p>\n\n<blockquote>\n  <p><sup><a href=\"http://eel.is/c++draft/expr.arith.conv#1.3\" rel=\"nofollow noreferrer\">(1.3)</a></sup> Otherwise, if either operand is double, the other shall be converted to double.</p>\n</blockquote>\n\n<p>So if you compare an <code>int</code> with a <code>float</code>, a <code>double</code> or a <code>long double</code>, you get implicit conversions from <code>int</code> to <code>float</code>, <code>double</code> or <code>long double</code>.  </p>\n"}], "owner": {"reputation": 457, "user_id": 8455470, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/01e8b42b903732a5fcf2ba3fc7bd28dc?s=128&d=identicon&r=PG&f=1", "display_name": "sangmin park", "link": "https://stackoverflow.com/users/8455470/sangmin-park"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1012, "favorite_count": 1, "answer_count": 2, "score": 4, "last_activity_date": 1525878394, "creation_date": 1525871882, "question_id": 50254409, "link": "https://stackoverflow.com/questions/50254409/comparing-double-to-an-int", "title": "Comparing double to an int", "body": "<p>While reading the book <em>Programming Principles and Practice Using C++</em>, in Chapter 3 it sates that we can;t directly compare a double to an int. However, when I tested it out on Visual Studios, it was running fine with no errors? What does he mean by not being able to compare double to an int. Later, he explains that C++ provides an indirect way. Does he mean implicit conversion?</p>\n"}, {"tags": ["c++", "compilation", "linker"], "comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 1, "creation_date": 1525871974, "post_id": 50254377, "comment_id": 87526225, "body": "Report error to maintainers of jpeglib ?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 0, "creation_date": 1525872060, "post_id": 50254377, "comment_id": 87526287, "body": "&quot;which is a standard c header&quot; - no, it isn&#39;t."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2201041"}, "edited": false, "score": 0, "creation_date": 1525872138, "post_id": 50254377, "comment_id": 87526353, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/8031615/how-do-i-include-stdio-h-in-jpeglib-h-jpeg-8c\">How do I include &lt;stdio.h&gt; in jpeglib.h (jpeg-8c)</a>"}, {"owner": {"reputation": 1011, "user_id": 9583271, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "arcoxia tom", "link": "https://stackoverflow.com/users/9583271/arcoxia-tom"}, "edited": false, "score": 0, "creation_date": 1525872532, "post_id": 50254377, "comment_id": 87526645, "body": "@JETM not a duplicate that post doesn&#39;t answer the question. regards"}, {"owner": {"reputation": 2756, "user_id": 5114342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/725caa4188def46b8c6cf9b09eff7e85?s=128&d=identicon&r=PG&f=1", "display_name": "Aziuth", "link": "https://stackoverflow.com/users/5114342/aziuth"}, "edited": false, "score": 0, "creation_date": 1525874813, "post_id": 50254377, "comment_id": 87528402, "body": "Does it suffice if you put the inclusion of cstddef before the one of jpeglib.h in <i>your</i> code? Sure, somewhat dirty workaround, but makes the program independent of a correct version of jpeglib."}], "owner": {"reputation": 1011, "user_id": 9583271, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "arcoxia tom", "link": "https://stackoverflow.com/users/9583271/arcoxia-tom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 69, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1525872080, "creation_date": 1525871784, "last_edit_date": 1525872080, "question_id": 50254377, "link": "https://stackoverflow.com/questions/50254377/compiling-a-c-program-depending-on-jpeglib-h", "title": "compiling a c++ program depending on jpeglib.h", "body": "<p>I'm trying to compile a C++ program (in eclipse) that includes <code>&lt;jpeglib.h&gt;</code> which is a c header file. I'm getting this error.</p>\n\n<blockquote>\n  <p>usr/include/jpeglib.h:790:3: error: \u2018size_t\u2019 does not name a type<br>\n  size_t free_in_buffer;        /* # of byte spaces remaining in buffer\n  */</p>\n</blockquote>\n\n<p>Should modify <code>&lt;jpeglib.h&gt;</code> to include <code>&lt;cstddef&gt;</code> or is there a better way to resolve this?</p>\n"}, {"tags": ["c++", "fstream", "iostream"], "comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 2, "creation_date": 1525870713, "post_id": 50253963, "comment_id": 87525327, "body": "Use <code>std::cout &lt;&lt; std::endl</code> between both ?"}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 2, "creation_date": 1525870732, "post_id": 50253963, "comment_id": 87525338, "body": "Compile with all warnings and debug info, so <code>g++ -Wall -Wextra -g</code> with <a href=\"http://gcc.gnu.org/\" rel=\"nofollow noreferrer\">GCC</a>. Improve your code to get no warnings. <b>Use the debugger</b>, <a href=\"https://sourceware.org/gdb/current/onlinedocs/gdb/\" rel=\"nofollow noreferrer\">e.g. <code>gdb</code></a> to understand the behavior of your program. Improve and repeat till satisfied"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1525870739, "post_id": 50253963, "comment_id": 87525344, "body": "Btw, you don&#39;t read matrix, but just file content."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 1, "creation_date": 1525870803, "post_id": 50253963, "comment_id": 87525395, "body": "Don&#39;t copy paste code (you don&#39;t fix comment of copied code), create function instead."}, {"owner": {"reputation": 203, "user_id": 9323121, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3f248d19e53292791a6e2e3bdd26438f?s=128&d=identicon&r=PG&f=1", "display_name": "Gladaed", "link": "https://stackoverflow.com/users/9323121/gladaed"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 1, "creation_date": 1525870906, "post_id": 50253963, "comment_id": 87525478, "body": "@Jarod42 std::endl is not equal to newline, as it flushes"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "reply_to_user": {"reputation": 203, "user_id": 9323121, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3f248d19e53292791a6e2e3bdd26438f?s=128&d=identicon&r=PG&f=1", "display_name": "Gladaed", "link": "https://stackoverflow.com/users/9323121/gladaed"}, "edited": false, "score": 2, "creation_date": 1525871095, "post_id": 50253963, "comment_id": 87525636, "body": "@Gladaed: which is &quot;better&quot; for beginners (previous (debug) output is printed before crash, which help to locate the bug)."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1525873597, "post_id": 50253963, "comment_id": 87527460, "body": "Read <a href=\"https://stackoverflow.com/questions/5605125/why-is-iostreameof-inside-a-loop-condition-considered-wrong\">Why is <code>iostream::eof</code> inside a loop condition considered wrong?</a>"}], "answers": [{"tags": [], "owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "is_accepted": true, "score": 3, "last_activity_date": 1525871967, "last_edit_date": 1525871967, "creation_date": 1525870815, "answer_id": 50254057, "question_id": 50253963, "link": "https://stackoverflow.com/questions/50253963/output-for-the-matrix-a-is-overlapped-with-the-matrix-b/50254057#50254057", "title": "Output for the matrix A is overlapped with the Matrix B", "body": "<p>You've just printed a character-by-character copy of the two files, with nothing between them. Apparently \"MatrixA.txt\" does not have a newline at the end of the file.</p>\n\n<p>You can just add a <code>'\\n'</code> character after the output of the first file.</p>\n\n<pre><code>std::cout &lt;&lt; '\\n';\n</code></pre>\n\n<p>In a very real sense you <em>have not</em> read in two matrices, as you don't utilise any arithmetic values present in the files. If you want to do that, you will first have to come up with some <em>representation</em> of a <code>Matrix</code> in your program, and only then can you think about reading it from your files.</p>\n"}], "owner": {"reputation": 3, "user_id": 9521341, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-K8HGOzF5sLI/AAAAAAAAAAI/AAAAAAAAAIM/LOVpL80wwLk/photo.jpg?sz=128", "display_name": "S. Munirah", "link": "https://stackoverflow.com/users/9521341/s-munirah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 0, "accepted_answer_id": 50254057, "answer_count": 1, "score": -1, "last_activity_date": 1525925395, "creation_date": 1525870524, "last_edit_date": 1525925395, "question_id": 50253963, "link": "https://stackoverflow.com/questions/50253963/output-for-the-matrix-a-is-overlapped-with-the-matrix-b", "title": "Output for the matrix A is overlapped with the Matrix B", "body": "<p>So,this is a code for reading matrix A and B from txt files. The following code that i found was able to read both files. However, the output for the matrix A is overlapped with the Matrix B (picture below)\n<a href=\"https://i.stack.imgur.com/mbRhQ.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n\n<pre><code>Matrix A -----\n1       2       3\n4       5       6\n7       8       99 \n\nMatrix B -----\n0       1       1\n2       0       0\n2       0       00 \n</code></pre>\n\n<p>So, how to avoid it overlapping, please help :) </p>\n\n<pre><code>#include&lt;iostream&gt;\n#include&lt;fstream&gt;\nusing namespace std;\n\nint main()\n{\n\n    {   \n        char ch;\n        const char *fileName=\"MatrixA.txt\";     // FOR MATRIX A\n\n        ifstream file;\n\n            file.open(fileName,ios::in);\n                if(!file)\n                {\n                    cout&lt;&lt;\"Error in opening file!!!\"&lt;&lt;endl;\n                    return -1; \n                }\n\n\n                while (!file.eof()) \n                {\n                    file &gt;&gt; noskipws &gt;&gt; ch; \n                    cout &lt;&lt; ch; \n                }\n\n        file.close();\n    }\n\n    {\n        char ch;\n        const char *fileName=\"MatrixB.txt\";     // FOR MATRIX A\n\n        ifstream file;\n\n            file.open(fileName,ios::in);\n                if(!file)\n                {\n                    cout&lt;&lt;\"Error in opening file!!!\"&lt;&lt;endl;\n                    return -1; \n                }\n\n\n                while (!file.eof()) \n                {\n                    file &gt;&gt; noskipws &gt;&gt; ch; \n                    cout &lt;&lt; ch; \n                }\n\n        file.close();\n    }\n\n\n    return 0;\n}\n</code></pre>\n\n<p>EDIT: Thanks everyone! Fixed it and yes i know that this is not a code for reading matrices (sorry for the misinformation). i just want it to look like one hehe so thanks again</p>\n"}, {"tags": ["c++", "linux", "linux-device-driver", "fedora"], "comments": [{"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 0, "creation_date": 1525872686, "post_id": 50253787, "comment_id": 87526782, "body": "Just to check something, what does <code>uname -r</code> returns?"}, {"owner": {"reputation": 117, "user_id": 3830630, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Px8vO.jpg?s=128&g=1", "display_name": "Byers1979", "link": "https://stackoverflow.com/users/3830630/byers1979"}, "reply_to_user": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 0, "creation_date": 1525873139, "post_id": 50253787, "comment_id": 87527105, "body": "it returns the correct kernel version.   I&#39;ve shortened it above, but the one I&#39;m using in my explicit include statements match what I have in the KDIR line in the makefile which both match the uname -r call.    I guess it doesn&#39;t hurt to list the full kernel version, it&#39;s 3.19.8-100.fc20.i686+PAE.   I&#39;ve edited my original question to include this"}], "answers": [{"comments": [{"owner": {"reputation": 117, "user_id": 3830630, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Px8vO.jpg?s=128&g=1", "display_name": "Byers1979", "link": "https://stackoverflow.com/users/3830630/byers1979"}, "edited": false, "score": 0, "creation_date": 1525872371, "post_id": 50253861, "comment_id": 87526535, "body": "So, I tried setting CFLAGS, but I&#39;m still getting the same error.   I used export CFLAGS=&#39;-I /usr/src/kernels/....../include/&quot;    and make still gave an error.    Any other ideas?    And thanks for the quick response"}, {"owner": {"reputation": 117, "user_id": 3830630, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Px8vO.jpg?s=128&g=1", "display_name": "Byers1979", "link": "https://stackoverflow.com/users/3830630/byers1979"}, "edited": false, "score": 0, "creation_date": 1525880554, "post_id": 50253861, "comment_id": 87532381, "body": "This was the most helpful answer, though I had to do a few other things as listed in my own answer below.    Thanks for the help!"}], "tags": [], "owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "is_accepted": true, "score": 1, "last_activity_date": 1525870194, "creation_date": 1525870194, "answer_id": 50253861, "question_id": 50253787, "link": "https://stackoverflow.com/questions/50253787/finding-header-files-for-simple-device-driver-in-fedora-20/50253861#50253861", "title": "finding header files for simple device driver in Fedora 20", "body": "<p>Your compiler should have an option to specify the includes' search path. GnuCC (<code>gcc</code>, <code>g++</code>) and CLang (<code>clang</code>, <code>clang++</code>) both use <code>-I</code>.</p>\n\n<p>If your header file is at <code>/usr/src/kernels/3.19.8-100/include/linux/init.h</code> and you invoke, let say <code>g++</code> with:</p>\n\n<pre><code>g++ -I /usr/src/kernels/3.19.8-100/include/ source.cpp\n</code></pre>\n\n<p>Then <code>source.cpp</code> can <code>#include &lt;linux/init.h&gt;</code>.</p>\n\n<hr>\n\n<p>Now, you need to learn how to provide that command line option to your compiler through the OS makefiles to build modules. This is documented at several places, but the usual is to define an environment variable <code>CPPFLAGS</code> containing the additional options:</p>\n\n<pre><code>$ export CPPFLAGS=\"-I /usr/src/kernels/3.19.8-100/include/\"\n$ make\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 117, "user_id": 3830630, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Px8vO.jpg?s=128&g=1", "display_name": "Byers1979", "link": "https://stackoverflow.com/users/3830630/byers1979"}, "edited": false, "score": 0, "creation_date": 1525874680, "post_id": 50255182, "comment_id": 87528303, "body": "Thanks.   I set up the makefile as specified, but the error persists.    The path to the include headers are just not found unless explicitly defined.     I think that the kernel-devel matches the kernel, but I&#39;ll look to that next."}], "tags": [], "owner": {"reputation": 4790, "user_id": 4491743, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aXCqO.jpg?s=128&g=1", "display_name": "Knud Larsen", "link": "https://stackoverflow.com/users/4491743/knud-larsen"}, "is_accepted": false, "score": 2, "last_activity_date": 1525886661, "last_edit_date": 1525886661, "creation_date": 1525874063, "answer_id": 50255182, "question_id": 50253787, "link": "https://stackoverflow.com/questions/50253787/finding-header-files-for-simple-device-driver-in-fedora-20/50255182#50255182", "title": "finding header files for simple device driver in Fedora 20", "body": "<blockquote>\n  <p>KDIR =/usr/src/kernels/3.19.8-100.fc20.i686+PAE/include</p>\n</blockquote>\n\n<p>I think your \"KDIR line\" is wrong .... This Makefile works (usually) : </p>\n\n<pre><code>obj-m    := hello.o\nKDIR    := /lib/modules/$(shell uname -r)/build\nPWD    := $(shell pwd)\ndefault:\n    $(MAKE) -C $(KDIR) SUBDIRS=$(PWD) modules\nclean:\n    $(MAKE) -C $(KDIR) M=$(PWD) clean\n</code></pre>\n\n<p>Assume <code># dnf install kernel kernel-devel</code> \u2192 I.e. the <code>kernel-devel</code> must be an exact match for <code>kernel</code>.</p>\n\n<p><strong>Note</strong>: /lib/modules/[version]/{<em>build</em>}/ is a link to <code>/usr/src/kernels/[version]/</code>, <strong>not</strong> to /usr/src/kernels/[version]/include/ .... The link is created at the install of <code>kernel-devel</code></p>\n"}, {"tags": [], "owner": {"reputation": 117, "user_id": 3830630, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Px8vO.jpg?s=128&g=1", "display_name": "Byers1979", "link": "https://stackoverflow.com/users/3830630/byers1979"}, "is_accepted": false, "score": 1, "last_activity_date": 1526933659, "last_edit_date": 1526933659, "creation_date": 1525880487, "answer_id": 50257257, "question_id": 50253787, "link": "https://stackoverflow.com/questions/50253787/finding-header-files-for-simple-device-driver-in-fedora-20/50257257#50257257", "title": "finding header files for simple device driver in Fedora 20", "body": "<p>I found the answer.  Thanks to YSC who pointed me on the right path.   I just needed to do some extra things found here <a href=\"http://commandlinefanatic.com/cgi-bin/showarticle.cgi?article=art026\" rel=\"nofollow noreferrer\">Where Does GCC Look to Find its Header Files?</a></p>\n\n<p>Basically, I needed to add the include directory to gcc's header include path.   I did this by typing <code>cpp -I &lt;desired path&gt; -v</code> which for me was /usr/src/kernels/.......etc.</p>\n\n<p>running just <code>cpp -v</code> gave me a list of the include paths gcc searches.   just make sure it's in there.  </p>\n\n<p>so now my driver modules build correctly and load with the the include statements as <code>#include &lt;linux/init.h&gt;</code> just as I wanted.</p>\n"}], "owner": {"reputation": 117, "user_id": 3830630, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Px8vO.jpg?s=128&g=1", "display_name": "Byers1979", "link": "https://stackoverflow.com/users/3830630/byers1979"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 281, "favorite_count": 0, "accepted_answer_id": 50253861, "answer_count": 3, "score": 2, "last_activity_date": 1526933659, "creation_date": 1525869963, "last_edit_date": 1525873275, "question_id": 50253787, "link": "https://stackoverflow.com/questions/50253787/finding-header-files-for-simple-device-driver-in-fedora-20", "title": "finding header files for simple device driver in Fedora 20", "body": "<p>So, I've tried following the simple examples to load a \"Hello World\" device driver found in the O'Rielly Linux Device Drivers manual.  The problem is that for some reason it won't work unless I explicitly define the path for my header files in the include statements; i.e. I must type <code>#include &lt;/usr/src/kernels/3.19.8-100.fc20.i686+PAE/include/linux/init.h&gt;</code> instead of just <code>#include &lt;/linux/init.h&gt;</code></p>\n\n<p>here is my makefile</p>\n\n<pre><code>obj-m := hello.o\nKDIR =/usr/src/kernels/3.19.8-100.fc20.i686+PAE/include\nall:\n    make -C /lib/modules/$(shell uname -r)/build/ M=$(PWD) modules\nclean:\n    make -C /lib/modules/$(shell uname -r)/build/ M=$(PWD) clean\n</code></pre>\n\n<p>and it returns a can't find error on all header files unless explicitly defined as <code>#include &lt;/usr/src/kernels/3.19.8-100.fc20.i686+PAE/include/linux/init.h&gt;</code> which I'd rather not have to do.</p>\n\n<p>Thanks for your help.</p>\n\n<p>In case it helps anyone, if I keep in the explicit include statements and then compile, the hello.mod.c file that results is as follows.</p>\n\n<pre><code>#include &lt;linux/module.h&gt;\n#include &lt;linux/vermagic.h&gt;\n#include &lt;linux/compiler.h&gt;\n\nMODULE_INFO(vermagic, VERMAGIC_STRING);\n\n__visible struct module __this_module\n__attribute__((section(\".gnu.linkonce.this_module\"))) = {\n    .name = KBUILD_MODNAME,\n    .init = init_module,\n#ifdef CONFIG_MODULE_UNLOAD\n    .exit = cleanup_module,\n#endif\n    .arch = MODULE_ARCH_INIT,\n};\n\nstatic const char __module_depends[]\n__used\n__attribute__((section(\".modinfo\"))) =\n\"depends=\";\n</code></pre>\n\n<p>This loads fine using insmod.</p>\n"}, {"tags": ["c++", "c++11", "templates"], "answers": [{"tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": true, "score": 5, "last_activity_date": 1525869573, "creation_date": 1525869573, "answer_id": 50253672, "question_id": 50253622, "link": "https://stackoverflow.com/questions/50253622/template-method-in-template-class-with-definition-outside-class/50253672#50253672", "title": "Template method in template class with definition outside class", "body": "<p>syntax would be</p>\n\n<pre><code>template&lt;typename A&gt;\ntemplate&lt;typename B&gt;\nA Type&lt;A&gt;::Method(B value)\n{\n    // some code here, it's not important for the sake of this example\n}\n</code></pre>\n"}], "owner": {"reputation": 322, "user_id": 6642051, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/A5lf1.png?s=128&g=1", "display_name": "ProgramGamer", "link": "https://stackoverflow.com/users/6642051/programgamer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "accepted_answer_id": 50253672, "answer_count": 1, "score": 4, "last_activity_date": 1525879975, "creation_date": 1525869409, "last_edit_date": 1525879975, "question_id": 50253622, "link": "https://stackoverflow.com/questions/50253622/template-method-in-template-class-with-definition-outside-class", "title": "Template method in template class with definition outside class", "body": "<p>I want to have a template class with a template method inside and also define that method outside the class. I tried looking around for an answer, but couldn't find one.</p>\n\n<p>For example:</p>\n\n<pre><code>template&lt;typename A&gt; class Type {\nprivate:\n    A value;\npublic:\n    template&lt;typename B&gt; A Method(B value) {\n        // some code here, it's not important for the sake of this example\n    }\n}\n</code></pre>\n\n<p>How would I move the definition of method <code>Method</code> to be outside the class body? Thanks in advance.</p>\n"}, {"tags": ["c++", "qt", "borderless"], "comments": [{"owner": {"reputation": 3638, "user_id": 5653461, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/yjvCY.png?s=128&g=1", "display_name": "IAmInPLS", "link": "https://stackoverflow.com/users/5653461/iaminpls"}, "edited": false, "score": 3, "creation_date": 1525868851, "post_id": 50253360, "comment_id": 87523977, "body": "Did you try to set the layout margins to 0 with <code>vLayout-&gt;setContentsMargins(0,0,0,0)</code> ?"}, {"owner": {"reputation": 701, "user_id": 8265841, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/c31729e54e05fd94f818207a1155f4cc?s=128&d=identicon&r=PG&f=1", "display_name": "Theodore Tang", "link": "https://stackoverflow.com/users/8265841/theodore-tang"}, "reply_to_user": {"reputation": 3638, "user_id": 5653461, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/yjvCY.png?s=128&g=1", "display_name": "IAmInPLS", "link": "https://stackoverflow.com/users/5653461/iaminpls"}, "edited": false, "score": 0, "creation_date": 1525869370, "post_id": 50253360, "comment_id": 87524315, "body": "@IAmInPLS Just tried that, that is what I am looking for. Did not except that. Thanks"}], "answers": [{"tags": [], "owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "is_accepted": true, "score": 2, "last_activity_date": 1525928805, "creation_date": 1525928805, "answer_id": 50265855, "question_id": 50253360, "link": "https://stackoverflow.com/questions/50253360/how-to-set-central-widget-fill-in-the-whole-main-window-in-qt/50265855#50265855", "title": "How to set central widget fill in the whole main window in Qt", "body": "<p>Why do you use the <code>QMainWindow</code>? It seems that people use that class without thinking what it is for. You <strong>only ever</strong> want to use <code>QMainWindow</code> if you have toolbars, status bar, or docking sub-windows. Otherwise it's pointless. What you want is the \"central widget\" be the only widget, without being embedded in the main window. If you've designed it in a <code>.ui</code> file, you'll have to edit it manually to change the class to <code>QWidget</code>, and remove the intervening and now redundant <code>centralWidget</code> completely.</p>\n"}, {"tags": [], "owner": {"reputation": 35, "user_id": 4622902, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/m9Hi6.jpg?s=128&g=1", "display_name": "Subrata Das", "link": "https://stackoverflow.com/users/4622902/subrata-das"}, "is_accepted": false, "score": 0, "last_activity_date": 1525934166, "creation_date": 1525934166, "answer_id": 50266953, "question_id": 50253360, "link": "https://stackoverflow.com/questions/50253360/how-to-set-central-widget-fill-in-the-whole-main-window-in-qt/50266953#50266953", "title": "How to set central widget fill in the whole main window in Qt", "body": "<p>According to your Question  QMainwindow frame geometry and QLable geometry should be adjusted.so you can use like this below lines code.</p>\n\n<pre><code>setGeometry(0,0,320,280);\nui-&gt;label-&gt;setGeometry(0,0,320,245);\n</code></pre>\n"}], "owner": {"reputation": 701, "user_id": 8265841, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/c31729e54e05fd94f818207a1155f4cc?s=128&d=identicon&r=PG&f=1", "display_name": "Theodore Tang", "link": "https://stackoverflow.com/users/8265841/theodore-tang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1514, "favorite_count": 0, "accepted_answer_id": 50265855, "answer_count": 2, "score": 0, "last_activity_date": 1525934166, "creation_date": 1525868612, "question_id": 50253360, "link": "https://stackoverflow.com/questions/50253360/how-to-set-central-widget-fill-in-the-whole-main-window-in-qt", "title": "How to set central widget fill in the whole main window in Qt", "body": "<p>I have a minimal example like this:</p>\n\n<pre><code>mWidget = new QWidget;\nvLayout = new QVBoxLayout;\nmLabel = new QLabel;\nmLabel-&gt;setText(\"Text\");\nmLabel-&gt;setAlignment(Qt::AlignCenter);\nmLabel-&gt;setStyleSheet(\"QLabel { border: 2px solid red; }\");\nthis-&gt;setCentralWidget(mWidget);\nmWidget-&gt;setLayout(vLayout);\nvLayout-&gt;addWidget(mLabel);\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/UlLpY.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/UlLpY.png\" alt=\"enter image description here\"></a></p>\n\n<p>As you can see from the above picture, apart from the <code>central widget</code>, there are still some white border outside the red border. What I am trying to do is to let the central widget fill in the whole main window, so there will be no white border outside the red border. Maybe in another way to say is to make a borderless window(do not know if a borderless window is what I am looking for). I googled how to make a borderless window, and I tried <code>setWindowFlags(Qt::FramelessWindowHint)</code>, but it is not what I want. I am pretty confused about how to achieve this now? So is the topic <code>How to make a borderless window</code> what I should look into? If it is, does that mean I should invoke some windows api to make that work? Or I should just do it with some other Qt methods? <br><br>\nHope someone can provide me a way or give me some hints. Thanks.</p>\n"}, {"tags": ["c++", "function", "math", "physics", "factorial"], "comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1525869009, "post_id": 50253359, "comment_id": 87524076, "body": "The <code>fact</code> function is suboptimal. You should do the test <code>if (n == 1)</code> before the <code>for</code> loop and not inside the <code>for</code> loop."}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 3, "creation_date": 1525872210, "post_id": 50253359, "comment_id": 87526403, "body": "Because noone explicitly said it yet: You get overflow in calculating your factorial. Computers can only represent finitely large numbers, and <code>int</code> commonly only goes up to <code>2^31 - 1 = 2147483647</code>, which is smaller than <code>13! = 6227020800</code>. What happens when you go beyond that is technically <b>undefined behavior</b>, in practice you will likely wrap around and get more or less random integers."}], "answers": [{"comments": [{"owner": {"reputation": 1409, "user_id": 6385640, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-muwyWfIjFd8/AAAAAAAAAAI/AAAAAAAAAG0/nctjQMOQOQY/photo.jpg?sz=128", "display_name": "Red.Wave", "link": "https://stackoverflow.com/users/6385640/red-wave"}, "edited": false, "score": 3, "creation_date": 1525871969, "post_id": 50253763, "comment_id": 87526222, "body": "Your code actually calculates &#39;exp&#39;. You must omit odd terms and keep even terms. I would set the condition as &quot;abs(add)&gt;(sum*numeric_limits&lt;decltype(sum)&gt;::epsilon())&quot;"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "reply_to_user": {"reputation": 1409, "user_id": 6385640, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-muwyWfIjFd8/AAAAAAAAAAI/AAAAAAAAAG0/nctjQMOQOQY/photo.jpg?sz=128", "display_name": "Red.Wave", "link": "https://stackoverflow.com/users/6385640/red-wave"}, "edited": false, "score": 0, "creation_date": 1525872560, "post_id": 50253763, "comment_id": 87526670, "body": "@Red.Wave thanks for pointing that out. Feel free to fix it, i wont have time too soon"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "reply_to_user": {"reputation": 1, "user_id": 9764691, "user_type": "registered", "profile_image": "https://graph.facebook.com/1048093105329386/picture?type=large", "display_name": "Mohammad Hassaan", "link": "https://stackoverflow.com/users/9764691/mohammad-hassaan"}, "edited": false, "score": 0, "creation_date": 1525872586, "post_id": 50253763, "comment_id": 87526696, "body": "@MohammadHassaan <code>eps</code> is some small constant that controls your desired accuracy"}, {"owner": {"reputation": 1409, "user_id": 6385640, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-muwyWfIjFd8/AAAAAAAAAAI/AAAAAAAAAG0/nctjQMOQOQY/photo.jpg?sz=128", "display_name": "Red.Wave", "link": "https://stackoverflow.com/users/6385640/red-wave"}, "edited": false, "score": 0, "creation_date": 1525873160, "post_id": 50253763, "comment_id": 87527129, "body": "@user463035818 The problem is I too can&#39;t edit it right now."}], "tags": [], "owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "is_accepted": false, "score": 1, "last_activity_date": 1525904295, "last_edit_date": 1525904295, "creation_date": 1525869898, "answer_id": 50253763, "question_id": 50253359, "link": "https://stackoverflow.com/questions/50253359/calculate-the-value-of-coshx-using-tailor-series-in-cpp/50253763#50253763", "title": "Calculate the value of coshx using tailor series in cpp", "body": "<p>As mentioned in a comment you get wrong results because of overflow. The factorial is particularly suspectible to overflow because it grows extremely fast. The thing is, sloppy speaking, this extreme growth is what makes the taylor series converge. If you consider the full term that you add on each iteration, it actually goes to <code>0</code>, instead of growing towards infinity (factorial is the denominator).  </p>\n\n<p>Instead of calculating the powers of <code>x</code> and the factorial individually you should just keep updating the the full term, ie instead of</p>\n\n<pre><code>sum = sum + (pow(a, c) / fact(c));\n             //  ^ this may grow very fast\n             //           ^ this definitely grows extremely fast\n</code></pre>\n\n<p>you should do something along the line of</p>\n\n<pre><code>double add = x;\ndouble factor = 1;\nwhile (add &gt; eps) {    // with some appropriate value for eps\n   sum += add;\n   add *= (x / factor);   // &lt;-- this will nicely converge to 0 \n   factor++;\n}\n</code></pre>\n\n<p>as others pointed out, this is actually the taylor series for the exponential, but you need only some minor modifications to get the desired result (eg skip the odd ones).</p>\n"}], "owner": {"reputation": 1, "user_id": 9764691, "user_type": "registered", "profile_image": "https://graph.facebook.com/1048093105329386/picture?type=large", "display_name": "Mohammad Hassaan", "link": "https://stackoverflow.com/users/9764691/mohammad-hassaan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 169, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1525904295, "creation_date": 1525868609, "last_edit_date": 1525868879, "question_id": 50253359, "link": "https://stackoverflow.com/questions/50253359/calculate-the-value-of-coshx-using-tailor-series-in-cpp", "title": "Calculate the value of coshx using tailor series in cpp", "body": "<p>I was assigned a task to calculate the value of coshx using tailor series in CPP.\nI tried a simple approach by using factorial and power function, but i noticed that at larger values of x the factorial behaves abruptly and gives very deviating values\nhere is my code</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nusing namespace std;\nlong double fact(int);\nint main()\n{\n    long double a;\n    long double sum = 0;\n    cout &lt;&lt; \"Enter value of x \" &lt;&lt; endl;\n    cin &gt;&gt; a;\n    for (long c = 2; c &lt;= 12; c++)\n    {\n        if (c % 2 == 0)\n        {\n            sum = sum + (pow(a, c) / fact(c));\n            if (sum &lt; 0)\n            {\n                sum=sum*-1;\n            }\n        }\n        else\n            continue;\n    }\n    cout &lt;&lt; \"The answer is \" &lt;&lt; 1 + sum &lt;&lt; endl;\n    system(\"pause\");\n    return 0;\n}\nlong double fact(int x)\n{\n    int n = 1, fact;\n    for (n; n &lt;= x; n++)\n    {\n        if (n == 1)\n    {\n            fact = 1;\n    }\n        else\n    {\n            fact = fact * n;\n    }\n}\n    return fact;\n}\n</code></pre>\n\n<p>even I have used long double to get maximum bits but that changes nothing and it just works well for fewer values(under 10) and less number of loops.</p>\n"}, {"tags": ["c++", "templates", "types"], "comments": [{"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1525868641, "post_id": 50253286, "comment_id": 87523829, "body": "As it stands, the compiler tries to compile both branches of the <code>if</code> statement no matter the type, and it always fails for one of them."}, {"owner": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "edited": false, "score": 11, "creation_date": 1525868659, "post_id": 50253286, "comment_id": 87523844, "body": "Because both branches of <code>if</code>-<code>else</code> statement must be compilable, which are not in your case. You can use <code>if constexpr</code> from C++17, or some solution based on SFINAE, partial specializtion, etc."}], "answers": [{"comments": [{"owner": {"reputation": 2230, "user_id": 2467424, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ee08540f63fa3664e73e6eeb0ef44b3?s=128&d=identicon&r=PG", "display_name": "pambda", "link": "https://stackoverflow.com/users/2467424/pambda"}, "edited": false, "score": 2, "creation_date": 1525869604, "post_id": 50253621, "comment_id": 87524487, "body": "oh this is C++ elegant :thumbs_up:"}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1525869924, "post_id": 50253621, "comment_id": 87524745, "body": "You don&#39;t need structs nor partial specialization, you can just make an overloaded function: <code>template &lt;typename T&gt; auto &amp;element_accessor(const std::stack&lt;T&gt; &amp;s) {return s.top();}</code>, and similarly for <code>queue</code>."}, {"owner": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "reply_to_user": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1525870584, "post_id": 50253621, "comment_id": 87525239, "body": "@HolyBlackCat Sure, but this solution has already appeared in other answer. And OP, for some reason, likes specialization more."}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "reply_to_user": {"reputation": 2230, "user_id": 2467424, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ee08540f63fa3664e73e6eeb0ef44b3?s=128&d=identicon&r=PG", "display_name": "pambda", "link": "https://stackoverflow.com/users/2467424/pambda"}, "edited": false, "score": 0, "creation_date": 1525874022, "post_id": 50253621, "comment_id": 87527824, "body": "@YanTing_ThePanda Is there a reason you consider this more elegant than your solution?"}, {"owner": {"reputation": 2230, "user_id": 2467424, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ee08540f63fa3664e73e6eeb0ef44b3?s=128&d=identicon&r=PG", "display_name": "pambda", "link": "https://stackoverflow.com/users/2467424/pambda"}, "reply_to_user": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1525876430, "post_id": 50253621, "comment_id": 87529566, "body": "@HolyBlackCat Actually, I am looking for a solution using SFINAE but don&#39;t know how to write it, that&#39;s the reason why I accept this answer.   In addition, I personally think <code>element_accessor </code> is a more general abstraction, which can work at more places."}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "reply_to_user": {"reputation": 2230, "user_id": 2467424, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ee08540f63fa3664e73e6eeb0ef44b3?s=128&d=identicon&r=PG", "display_name": "pambda", "link": "https://stackoverflow.com/users/2467424/pambda"}, "edited": false, "score": 2, "creation_date": 1525878100, "post_id": 50253621, "comment_id": 87530768, "body": "@YanTing_ThePanda At least in my opinion your solution is better. It essentially does the same thing as this solution, but with less code. Also, I don&#39;t see any reason to use SFINAE in this case, but should you ever need it, it would easier to use it with function overloads than with class template specializations."}], "tags": [], "owner": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "is_accepted": true, "score": 10, "last_activity_date": 1525870418, "last_edit_date": 1525870418, "creation_date": 1525869407, "answer_id": 50253621, "question_id": 50253286, "link": "https://stackoverflow.com/questions/50253286/using-stdis-same-why-my-function-still-cant-work-for-2-types/50253621#50253621", "title": "using std::is_same, why my function still can&#39;t work for 2 types", "body": "<p>Both branches of <code>if</code>-<code>else</code> statement must be compilable, which are not in your case. One of many possible solutions that is based on partial specialization and should work even in C++98:</p>\n\n<pre><code>template &lt;typename Cont&gt;\nstruct element_accessor;\n\ntemplate &lt;typename T&gt;\nstruct element_accessor&lt;std::stack&lt;T&gt;&gt; {\n   const T&amp; operator()(const std::stack&lt;T&gt;&amp; s) const { return s.top(); }\n};\n\ntemplate &lt;typename T&gt;\nstruct element_accessor&lt;std::queue&lt;T&gt;&gt; {\n   const T&amp; operator()(const std::queue&lt;T&gt;&amp; q) const { return q.front(); }\n};\n\ntemplate&lt;typename Cont&gt;\nvoid print_container(Cont&amp; cont){\n   while(!cont.empty()){\n      auto elem = element_accessor&lt;Cont&gt;{}(cont);\n      std::cout &lt;&lt; elem &lt;&lt; '\\n';\n      cont.pop();\n   }\n}\n</code></pre>\n\n<hr>\n\n<p>A C++17 solution with <code>if constexpr</code>:</p>\n\n<pre><code>template&lt;template&lt;class&gt; typename Cont, typename T&gt;\nvoid print_container(Cont&lt;T&gt;&amp; cont){\n   while(!cont.empty()){\n      if constexpr (std::is_same_v&lt;Cont&lt;T&gt;, std::stack&lt;T&gt;&gt;) \n         std::cout &lt;&lt; cont.top() &lt;&lt; '\\n';\n      else if constexpr (std::is_same_v&lt;Cont&lt;T&gt;, std::queue&lt;T&gt;&gt;) \n         std::cout &lt;&lt; cont.front() &lt;&lt; '\\n';\n      cont.pop();\n   }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "edited": false, "score": 0, "creation_date": 1525870759, "post_id": 50253652, "comment_id": 87525357, "body": "That depends on what is your definition of <i>&quot;better way&quot;</i> :)"}, {"owner": {"reputation": 2230, "user_id": 2467424, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ee08540f63fa3664e73e6eeb0ef44b3?s=128&d=identicon&r=PG", "display_name": "pambda", "link": "https://stackoverflow.com/users/2467424/pambda"}, "reply_to_user": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "edited": false, "score": 0, "creation_date": 1525871012, "post_id": 50253652, "comment_id": 87525566, "body": "@DanielLangr it&#39;s like being more canonical and general, instead of just a dirty hack :-)"}, {"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "edited": false, "score": 1, "creation_date": 1525871473, "post_id": 50253652, "comment_id": 87525874, "body": "In my view this is the best way. ADL allows us to express intent in a uniform way (as you have done) even when the details of how that intent is realised differ for different containers/data types."}, {"owner": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "reply_to_user": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "edited": false, "score": 0, "creation_date": 1525871809, "post_id": 50253652, "comment_id": 87526116, "body": "@RichardHodges Agree. For generic solution, I would just return by (<code>const</code>) reference, since this is what <code>stack&lt;T&gt;::top</code> and <code>queue&lt;T&gt;::front</code> do. Or, better use <code>decltype(auto)</code> as return type if C++14 is available."}], "tags": [], "owner": {"reputation": 2230, "user_id": 2467424, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ee08540f63fa3664e73e6eeb0ef44b3?s=128&d=identicon&r=PG", "display_name": "pambda", "link": "https://stackoverflow.com/users/2467424/pambda"}, "is_accepted": false, "score": 7, "last_activity_date": 1525872005, "last_edit_date": 1525872005, "creation_date": 1525869517, "answer_id": 50253652, "question_id": 50253286, "link": "https://stackoverflow.com/questions/50253286/using-stdis-same-why-my-function-still-cant-work-for-2-types/50253652#50253652", "title": "using std::is_same, why my function still can&#39;t work for 2 types", "body": "<p>I answered my own question by simply using overloads.</p>\n\n<pre><code>template&lt;typename Elem&gt;\nElem get_first_elem(stack&lt;Elem&gt;&amp; cont){\n    return cont.top();\n}\ntemplate&lt;typename Elem&gt;\nElem get_first_elem(queue&lt;Elem&gt;&amp; cont){\n    return cont.front();\n}\n\ntemplate&lt;typename Cont&gt;\nvoid print_container(Cont&amp; cont){\n    while(!cont.empty()){\n        auto elem = get_first_elem(cont);\n        cont.pop();\n        std::cout &lt;&lt; elem &lt;&lt; '\\n';\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": false, "score": 4, "last_activity_date": 1525869929, "creation_date": 1525869929, "answer_id": 50253774, "question_id": 50253286, "link": "https://stackoverflow.com/questions/50253286/using-stdis-same-why-my-function-still-cant-work-for-2-types/50253774#50253774", "title": "using std::is_same, why my function still can&#39;t work for 2 types", "body": "<p>The problem with</p>\n\n<pre><code>if(std::is_same&lt;Cont, stack&lt;int&gt;&gt;::value)\n    ...\nelse\n    +++\n</code></pre>\n\n<p>Is that if <code>...</code> or <code>+++</code> would not compile then you can't use it.  Even though you can only take one branch or the other both branches get compiled and if the syntax isn't valid then you get a compiler error.  With C++17's <a href=\"http://en.cppreference.com/w/cpp/language/if#Constexpr_If\" rel=\"nofollow noreferrer\"><code>if constexpr</code></a> though the behavior is different.  The condition will be resolved at compile time and only the branch that is taken will actually be compiled.  The rest of the code is discarded.  Switching to that you code would look like</p>\n\n<pre><code>template&lt;typename Cont&gt;\nvoid print_container(Cont&amp; cont){\n    while(!cont.empty()){\n        if constexpr(std::is_same&lt;Cont, stack&lt;int&gt;&gt;::value){\n            auto elem = cont.top();\n            std::cout &lt;&lt; elem &lt;&lt; '\\n';\n        } else {\n            auto elem = cont.front();\n            std::cout &lt;&lt; elem &lt;&lt; '\\n';\n        }\n        cont.pop();\n        std::cout &lt;&lt; elem &lt;&lt; '\\n';\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1071, "user_id": 2249341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/bced3a973df39ea9613395d703091926?s=128&d=identicon&r=PG", "display_name": "Mateusz Drost", "link": "https://stackoverflow.com/users/2249341/mateusz-drost"}, "is_accepted": false, "score": 1, "last_activity_date": 1525870069, "creation_date": 1525870069, "answer_id": 50253822, "question_id": 50253286, "link": "https://stackoverflow.com/questions/50253286/using-stdis-same-why-my-function-still-cant-work-for-2-types/50253822#50253822", "title": "using std::is_same, why my function still can&#39;t work for 2 types", "body": "<p>If you can use C++17 then what you want is <a href=\"http://en.cppreference.com/w/cpp/language/if\" rel=\"nofollow noreferrer\"><code>if constexpr</code></a></p>\n\n<pre><code>#include &lt;stack&gt;\n#include &lt;queue&gt;\n#include &lt;iostream&gt;\n\nusing namespace std;\n\ntemplate&lt;typename Cont&gt;\nvoid print_container(Cont&amp; cont){\n    while(!cont.empty()){\n        if constexpr(std::is_same&lt;Cont, stack&lt;int&gt;&gt;::value){\n            auto elem = cont.top();\n            std::cout &lt;&lt; elem &lt;&lt; '\\n';\n        } else {\n            auto elem = cont.front();\n            std::cout &lt;&lt; elem &lt;&lt; '\\n';\n        }\n        cont.pop();\n    }\n}\n\nint main(int argc, char *argv[])\n{\n    stack&lt;int&gt; stk;\n    stk.push(1);\n    stk.push(2);\n    stk.push(3);\n    queue&lt;int&gt; q;\n    q.push(1);\n    q.push(2);\n    q.push(3);\n\n    std::cout &lt;&lt; \"print stack\" &lt;&lt; endl;\n    print_container(stk);\n    std::cout &lt;&lt; \"print queue\" &lt;&lt; endl;\n    print_container(q);\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 2230, "user_id": 2467424, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ee08540f63fa3664e73e6eeb0ef44b3?s=128&d=identicon&r=PG", "display_name": "pambda", "link": "https://stackoverflow.com/users/2467424/pambda"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1371, "favorite_count": 1, "accepted_answer_id": 50253621, "answer_count": 4, "score": 7, "last_activity_date": 1525876504, "creation_date": 1525868427, "last_edit_date": 1525876504, "question_id": 50253286, "link": "https://stackoverflow.com/questions/50253286/using-stdis-same-why-my-function-still-cant-work-for-2-types", "title": "using std::is_same, why my function still can&#39;t work for 2 types", "body": "<p>I am trying to write a function that can print both stack and queue, my code is as following</p>\n\n<pre><code>template&lt;typename Cont&gt;\nvoid print_container(Cont&amp; cont){\n    while(!cont.empty()){\n        if(std::is_same&lt;Cont, stack&lt;int&gt;&gt;::value){\n            auto elem = cont.top();\n            std::cout &lt;&lt; elem &lt;&lt; '\\n';\n        } else {\n            auto elem = cont.front();\n            std::cout &lt;&lt; elem &lt;&lt; '\\n';\n        }\n        cont.pop();\n        std::cout &lt;&lt; elem &lt;&lt; '\\n';\n    }\n}\n\nint main(int argc, char *argv[])\n{\n    stack&lt;int&gt; stk;\n    stk.push(1);\n    stk.push(2);\n    stk.push(3);\n    queue&lt;int&gt; q;\n    q.push(1);\n    q.push(2);\n    q.push(3);\n\n    std::cout &lt;&lt; \"print stack\" &lt;&lt; endl;\n    print_container(stk);\n    std::cout &lt;&lt; \"print queue\" &lt;&lt; endl;\n    print_container(q);\n\n    return 0;\n}\n</code></pre>\n\n<p><strong>But it doesn't work here</strong>, the error info is:</p>\n\n<pre><code>demo_typeof.cpp:35:30: error: no member named 'front' in 'std::__1::stack&lt;int, std::__1::deque&lt;int, std::__1::allocator&lt;int&gt; &gt; &gt;'\n            auto elem = cont.front();\n                        ~~~~ ^\ndemo_typeof.cpp:52:5: note: in instantiation of function template specialization 'print_container&lt;std::__1::stack&lt;int, std::__1::deque&lt;int, std::__1::allocator&lt;int&gt; &gt; &gt; &gt;' requested here\n    print_container(stk);\n    ^\ndemo_typeof.cpp:32:30: error: no member named 'top' in 'std::__1::queue&lt;int, std::__1::deque&lt;int, std::__1::allocator&lt;int&gt; &gt; &gt;'\n            auto elem = cont.top();\n                        ~~~~ ^\ndemo_typeof.cpp:54:5: note: in instantiation of function template specialization 'print_container&lt;std::__1::queue&lt;int, std::__1::deque&lt;int, std::__1::allocator&lt;int&gt; &gt; &gt; &gt;' requested here\n    print_container(q);\n    ^\n2 errors generated.\n</code></pre>\n\n<p>I know it's problematic, and know C++ is statically typed and without too much Runtime support. but I am wondering the specific reason why this doesn't work, and how to deal with it.</p>\n\n<p>P.S.: The actual meaning of judge the typing of a container is that: You can simply change a DFS function into BFS by passing a queue container instead of a stack. So, BFS and DFS can share most of the code.</p>\n\n<p>P.P.S: I am in C++ 11 environment, but answers for older or later standard are also welcomed.</p>\n"}, {"tags": ["c++", "qt"], "comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 1, "creation_date": 1525868610, "post_id": 50253277, "comment_id": 87523807, "body": "Should it be <code>QVariant::fromValue(*param);</code> ?"}, {"owner": {"reputation": 119, "user_id": 9492756, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Juliette Marquis", "link": "https://stackoverflow.com/users/9492756/juliette-marquis"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1525868774, "post_id": 50253277, "comment_id": 87523921, "body": "That was it ahahha - Thank you so much... and sorry for now I realise it was a very dumb question"}], "answers": [{"comments": [{"owner": {"reputation": 119, "user_id": 9492756, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Juliette Marquis", "link": "https://stackoverflow.com/users/9492756/juliette-marquis"}, "edited": false, "score": 0, "creation_date": 1525869482, "post_id": 50253413, "comment_id": 87524384, "body": "Thank you :) Now, if I want to use the following,      <code>QVariant v = QVariant::fromValue(*param);      Parameter *op = v.value&lt;Parameter*&gt;();      qDebug()&lt;&lt; op-&gt;getName();</code> I get this error : static assertion failed qobject_cast requires the type to have a Q_object macro Would you happen to know why ?"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "reply_to_user": {"reputation": 119, "user_id": 9492756, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Juliette Marquis", "link": "https://stackoverflow.com/users/9492756/juliette-marquis"}, "edited": false, "score": 0, "creation_date": 1525869708, "post_id": 50253413, "comment_id": 87524565, "body": "If you store value, retrieve value, if you store pointer, retrieve pointer."}], "tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": true, "score": 1, "last_activity_date": 1525868749, "creation_date": 1525868749, "answer_id": 50253413, "question_id": 50253277, "link": "https://stackoverflow.com/questions/50253277/custom-qvariant-troubles/50253413#50253413", "title": "Custom QVariant troubles", "body": "<p>You store <strong>pointer</strong> in your <code>QVariant</code> instead of value. But want to retrieve value.</p>\n\n<blockquote>\n  <p>If the value cannot be converted, a default-constructed value will be returned.</p>\n</blockquote>\n\n<p>so <code>v.value&lt;Parameter&gt;();</code> returns a default-constructed object as <code>Parameter*</code> cannot be converted to <code>Parameter</code>.</p>\n"}], "owner": {"reputation": 119, "user_id": 9492756, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Juliette Marquis", "link": "https://stackoverflow.com/users/9492756/juliette-marquis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 208, "favorite_count": 0, "accepted_answer_id": 50253413, "answer_count": 1, "score": 0, "last_activity_date": 1525868749, "creation_date": 1525868389, "last_edit_date": 1592644375, "question_id": 50253277, "link": "https://stackoverflow.com/questions/50253277/custom-qvariant-troubles", "title": "Custom QVariant troubles", "body": "<p>I am discovering Custom Types with QVariant and tried to implement it in my project.\nThe problem is, it seems like it creates an object with the default constructor when I thought it would use the copy constructor...</p>\n<p>Maybe there is something I don't understand...</p>\n<p>Here is my custom class :</p>\n<p>Parameter.h</p>\n<pre><code>#ifndef PARAMETER_H\n#define PARAMETER_H\n#include &lt;QDebug&gt;\n#include &lt;QMetaType&gt;\n\n#include &quot;variable.h&quot;\n#include &lt;QAbstractTableModel&gt;\n\nclass Parameter : public Variable, public QAbstractTableModel\n{\npublic:\n    Parameter();\n    Parameter(QString name, int min, int max, int val, QObject *parent);\n    Parameter(const Parameter &amp;source);\n\nprivate:\n    int m_value;\n};\nQ_DECLARE_METATYPE(Parameter)\n\n#endif // PARAMETER_H\n</code></pre>\n<p>Parameter.cpp</p>\n<h1>include &quot;parameter.h&quot;</h1>\n<pre><code>Parameter::Parameter() : Variable()\n{\n    qDebug()&lt;&lt;&quot;Default constructor&quot;;\n    m_value = 0;\n    setName(&quot;Test&quot;);\n}\n\nParameter::Parameter(QString name, int min, int max, int val, QObject     *parent)\n: Variable(name, min, max), QAbstractTableModel(parent)\n{\n    qDebug()&lt;&lt;&quot;constructor&quot;;\n    m_value = val;\n}\n\n Parameter::Parameter(const Parameter &amp;source)\n     : Variable(source.getName(), source.getMin(), source.getMax()),\n      QAbstractTableModel(),\n      m_value(source.m_value)\n{\n    qDebug()&lt;&lt;&quot;copy constructor&quot;;  \n}\n</code></pre>\n<p>I create an instance of Parameter in a class MainWindow. The following code is an extract of the constructor of this class :</p>\n<pre><code>Parameter *param = new Parameter(&quot;Param&quot;,0,100,10, this);\nQVariant v = QVariant::fromValue(param);\nParameter op = v.value&lt;Parameter&gt;();\nqDebug()&lt;&lt; op.getName();\n</code></pre>\n<p>The output of this code is :</p>\n<pre><code>constructor\nDefault constructor \nDefault constructor\n&quot;Test&quot;\n</code></pre>\n<p>I would like to understand why the default constructor is called twice. And what I should do so that it calls the copy constructor instead (in order to get the object I created, whose name is &quot;Param)</p>\n<p>Thank you a lot for your answers :)</p>\n"}, {"tags": ["c++", "windows", "wsd"], "comments": [{"owner": {"reputation": 4074, "user_id": 808101, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cdb24053e79c428dad4e874daa4da0cb?s=128&d=identicon&r=PG", "display_name": "benjarobin", "link": "https://stackoverflow.com/users/808101/benjarobin"}, "edited": false, "score": 0, "creation_date": 1525868436, "post_id": 50253143, "comment_id": 87523673, "body": "You need to link again Wsdapi.dll as explained here <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa386298(v=vs.85).aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/windows/desktop/&hellip;</a>"}, {"owner": {"reputation": 351, "user_id": 5040234, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/d8af41c8e0dae694f55420409c1eb61b?s=128&d=identicon&r=PG&f=1", "display_name": "Ron", "link": "https://stackoverflow.com/users/5040234/ron"}, "reply_to_user": {"reputation": 4074, "user_id": 808101, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cdb24053e79c428dad4e874daa4da0cb?s=128&d=identicon&r=PG", "display_name": "benjarobin", "link": "https://stackoverflow.com/users/808101/benjarobin"}, "edited": false, "score": 0, "creation_date": 1525872657, "post_id": 50253143, "comment_id": 87526758, "body": "I don&#39;t see how this link helps. I tried to clean and rebuild but still stay with same link error. @benjarobin"}], "owner": {"reputation": 351, "user_id": 5040234, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/d8af41c8e0dae694f55420409c1eb61b?s=128&d=identicon&r=PG&f=1", "display_name": "Ron", "link": "https://stackoverflow.com/users/5040234/ron"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 19, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1525868019, "creation_date": 1525868019, "question_id": 50253143, "link": "https://stackoverflow.com/questions/50253143/using-wsdcreatehttpaddress", "title": "Using WSDCreateHttpAddress", "body": "<p>I'm trying to use 'Web Services on Devices' functions\nas listed at that link,</p>\n\n<p><a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa386286(v=vs.85).aspx\" rel=\"nofollow noreferrer\">https://msdn.microsoft.com/en-us/library/windows/desktop/aa386286(v=vs.85).aspx</a></p>\n\n<p>I'm quite new with that functions so I may missed some very basic things.</p>\n\n<p>I tried use the 'WSDCreateHttpAddress' function.</p>\n\n<p>Code:</p>\n\n<pre><code>IWSDHttpAddress *addr;\nHRESULT res = WSDCreateHttpAddress(&amp;addr);\n</code></pre>\n\n<p>I got this error</p>\n\n<blockquote>\n  <p>Error LNK2001 unresolved external symbol _WSDCreateHttpAddress@4      </p>\n</blockquote>\n\n<p>I know that some library is missing but don't know where to look.</p>\n\n<p>I'm using VS2015.</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["c++", "ros", "point-cloud-library"], "comments": [{"owner": {"reputation": 49730, "user_id": 349130, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e4efeebbf6994bb904738c4fb8922bf?s=128&d=identicon&r=PG", "display_name": "Dr. Snoopy", "link": "https://stackoverflow.com/users/349130/dr-snoopy"}, "edited": false, "score": 0, "creation_date": 1525867494, "post_id": 50252855, "comment_id": 87523037, "body": "So what is the problem? That it takes time to compute the normals?"}, {"owner": {"reputation": 11, "user_id": 4449647, "user_type": "registered", "profile_image": "https://graph.facebook.com/1519693296/picture?type=large", "display_name": "Saptadeep Debnath", "link": "https://stackoverflow.com/users/4449647/saptadeep-debnath"}, "reply_to_user": {"reputation": 49730, "user_id": 349130, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e4efeebbf6994bb904738c4fb8922bf?s=128&d=identicon&r=PG", "display_name": "Dr. Snoopy", "link": "https://stackoverflow.com/users/349130/dr-snoopy"}, "edited": false, "score": 0, "creation_date": 1525867716, "post_id": 50252855, "comment_id": 87523159, "body": "Yes that&#39;s it. I am implementing a real-time system, so need continuous data computation without lag."}, {"owner": {"reputation": 49730, "user_id": 349130, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e4efeebbf6994bb904738c4fb8922bf?s=128&d=identicon&r=PG", "display_name": "Dr. Snoopy", "link": "https://stackoverflow.com/users/349130/dr-snoopy"}, "edited": false, "score": 0, "creation_date": 1525867830, "post_id": 50252855, "comment_id": 87523224, "body": "Then you should rewrite the question and mention that as the problem. Right now what is written points to some undefined failure. Also note that computing normals IS an expensive process."}, {"owner": {"reputation": 11, "user_id": 4449647, "user_type": "registered", "profile_image": "https://graph.facebook.com/1519693296/picture?type=large", "display_name": "Saptadeep Debnath", "link": "https://stackoverflow.com/users/4449647/saptadeep-debnath"}, "reply_to_user": {"reputation": 49730, "user_id": 349130, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e4efeebbf6994bb904738c4fb8922bf?s=128&d=identicon&r=PG", "display_name": "Dr. Snoopy", "link": "https://stackoverflow.com/users/349130/dr-snoopy"}, "edited": false, "score": 0, "creation_date": 1525868120, "post_id": 50252855, "comment_id": 87523435, "body": "Thanks for the input. I edited the question!"}, {"owner": {"reputation": 11, "user_id": 4449647, "user_type": "registered", "profile_image": "https://graph.facebook.com/1519693296/picture?type=large", "display_name": "Saptadeep Debnath", "link": "https://stackoverflow.com/users/4449647/saptadeep-debnath"}, "reply_to_user": {"reputation": 49730, "user_id": 349130, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e4efeebbf6994bb904738c4fb8922bf?s=128&d=identicon&r=PG", "display_name": "Dr. Snoopy", "link": "https://stackoverflow.com/users/349130/dr-snoopy"}, "edited": false, "score": 0, "creation_date": 1525868243, "post_id": 50252855, "comment_id": 87523519, "body": "Is there a way to implement this code for a real time system without experiencing the lag? Could it just be rectified by implementing on a better system?"}], "owner": {"reputation": 11, "user_id": 4449647, "user_type": "registered", "profile_image": "https://graph.facebook.com/1519693296/picture?type=large", "display_name": "Saptadeep Debnath", "link": "https://stackoverflow.com/users/4449647/saptadeep-debnath"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 108, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1525868080, "creation_date": 1525867207, "last_edit_date": 1525868080, "question_id": 50252855, "link": "https://stackoverflow.com/questions/50252855/failed-to-execute-pcl-code-in-callback-ros", "title": "Failed to execute PCL code in callback (ROS)", "body": "<p>I have a C++ code in ROS format. The following is the callback function:</p>\n\n<pre><code>void cloud_cb(const boost::shared_ptr&lt;const sensor_msgs::PointCloud2&gt;&amp; input){\n    ROS_INFO(\"callback\");\n    pcl::PCLPointCloud2 pcl_pc2;\n    pcl_conversions::toPCL(*input,pcl_pc2);\n    pcl::PointCloud&lt;pcl::PointXYZ&gt;::Ptr cloud(new pcl::PointCloud&lt;pcl::PointXYZ&gt;);\n    pcl::fromPCLPointCloud2(pcl_pc2,*cloud);\n    if(cloud-&gt;size() &gt; 300) {\n        ROS_INFO(\"if loop\");\n        pcl::search::KdTree&lt;pcl::PointXYZ&gt;::Ptr kdtree (new pcl::search::KdTree&lt;pcl::PointXYZ&gt;);\n        ROS_INFO(\"1\");\n        pcl::NormalEstimation&lt;pcl::PointXYZ, pcl::Normal&gt; normal_estimation; \n        ROS_INFO(\"2\");\n        normal_estimation.setInputCloud (cloud);\n        ROS_INFO(\"3\");\n        normal_estimation.setSearchMethod (kdtree);\n        ROS_INFO(\"4\");\n        pcl::PointCloud&lt;pcl::Normal&gt;::Ptr normals (new pcl::PointCloud&lt; pcl::Normal&gt;);\n        ROS_INFO(\"5\");\n        normal_estimation.setRadiusSearch (0.03);\n        ROS_INFO(\"6\");\n        normal_estimation.compute (*normals);\n        ROS_INFO(\"7\");\n        PFHShapeReco&lt;pcl::PointXYZ&gt; pfh;\n        ROS_INFO(\"8\");\n        pfh.ComputePFH(0.5, cloud, normals);\n        ROS_INFO(\"9\");\n        std_msgs::Float32MultiArray arr;\n        for(int i = 0; i &lt; 625; i++){\n            float f = pfh.GetObjectModel()[i];\n            arr.data.push_back(f);\n        }\n        hist.publish (arr);\n    }\n}\n</code></pre>\n\n<p>Note that I have added the various ROS_INFO messages as checkpoints. The problem here is the lag between checkpoint 6 and 7. The following statement takes a lot of time to implement, </p>\n\n<blockquote>\n  <p>normal_estimation.compute (*normals);</p>\n</blockquote>\n\n<p>The code is exactly the same as in <a href=\"http://pointclouds.org/documentation/tutorials/normal_estimation.php#normal-estimation\" rel=\"nofollow noreferrer\">here</a>. </p>\n\n<p>Could this be a problem with the code? Are these statements incapable to be implemented in a callback function.?</p>\n"}, {"tags": ["android", "c++", "opengl-es", "shader", "opengl-es-2.0"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user1552075"}, "reply_to_user": {"reputation": 138010, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "edited": false, "score": 0, "creation_date": 1525868934, "post_id": 50252778, "comment_id": 87524028, "body": "Sadly no. I just hardcoded the shaders into a char * (as I had issues with spaces etc reading from file before) and it still gives me the exact same issue."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user1552075"}, "edited": false, "score": 0, "creation_date": 1525874644, "post_id": 50253825, "comment_id": 87528283, "body": "Thank you very much. That makes sense, as I translated these shaders back to ES2 from a more recent version. Hard to find OpenGL books that match all requirements."}], "tags": [], "owner": {"reputation": 138010, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "is_accepted": true, "score": 1, "last_activity_date": 1525871664, "last_edit_date": 1525871664, "creation_date": 1525870077, "answer_id": 50253825, "question_id": 50252778, "link": "https://stackoverflow.com/questions/50252778/glgetattriblocation-returns-1-on-one-of-my-attributes/50253825#50253825", "title": "glGetAttribLocation returns -1 on one of my attributes", "body": "<p>See <a href=\"https://www.khronos.org/registry/OpenGL/specs/es/2.0/GLSL_ES_Specification_1.00.pdf\" rel=\"nofollow noreferrer\">OpenGL ES Shading Language 1.00 Specification; 7.2 Fragment Shader Special Variables; page 60</a>:</p>\n\n<blockquote>\n  <p>The output of the fragment shader is processed by the fixed function operations at the back end of the OpenGL ES pipeline. Fragment shaders output values to the OpenGL ES pipeline using the built-in variables <code>gl_FragColor</code> and <code>gl_FragData</code>, unless the discard keyword is executed.</p>\n</blockquote>\n\n<p>This means you have to write to <code>gl_FragColor</code> in the fragment shader (instead of the varaible <code>outColor</code>):</p>\n\n<pre><code>gl_FragColor = texture2D(tex, Texcoord) * vec4(Color, 1.0);\n</code></pre>\n\n<p>In <a href=\"https://www.khronos.org/registry/OpenGL/specs/es/3.0/GLSL_ES_Specification_3.00.pdf\" rel=\"nofollow noreferrer\">OpenGL ES Shading Language 3.00</a> you would be able to use the <code>out</code> qualifier for a fragment shader output variable:</p>\n\n<pre><code>out vec4 outColor;\n\nvoid main()\n{\n    outColor = texture2D(tex, Texcoord) * vec4(Color, 1.0);\n} \n</code></pre>\n\n<p><br/>\nNote if you do not write to <code>gl_FragColor</code>, then the varying variables <code>Color</code> and <code>Texcoord</code> are not used (optimized by the compiler). This causes that the attributes <code>color</code> and <code>texcoord</code> are not used and may not be active.</p>\n\n<p>See <a href=\"https://www.khronos.org/registry/OpenGL/specs/es/2.0/es_full_spec_2.0.pdf\" rel=\"nofollow noreferrer\">OpenGL ES 2 Specifications - 2.10.4 Shader Variables - p. 32</a>:</p>\n\n<blockquote>\n  <p>A generic attribute variable is considered active if it is determined by the compiler and linker that the attribute may be accessed when the shader is executed. Attribute variables that are declared in a vertex shader but never used are not considered active. In cases where the compiler and linker cannot make a conclusive determination, an attribute will be considered active.</p>\n  \n  <p>.....</p>\n  \n  <p>To determine the set of <strong>active</strong> vertex attributes used by a program, and to determine their types, use the command:</p>\n  \n  <p><code>void GetActiveAttrib( uint program, uint index, sizei bufSize, sizei *length, int *size, enum *type, char *name );</code></p>\n  \n  <p>.....</p>\n  \n  <p>After a program object has been linked successfully, the bindings of attribute variable names to indices can be queried. The command</p>\n  \n  <p><code>int GetAttribLocation( uint program, const char *name );</code></p>\n</blockquote>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user1552075"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 572, "favorite_count": 0, "accepted_answer_id": 50253825, "answer_count": 1, "score": 2, "last_activity_date": 1601618789, "creation_date": 1525866951, "last_edit_date": 1601618789, "question_id": 50252778, "link": "https://stackoverflow.com/questions/50252778/glgetattriblocation-returns-1-on-one-of-my-attributes", "title": "glGetAttribLocation returns -1 on one of my attributes", "body": "<p>glGetAttribLocation returns -1 on one of my 3 attributes (color). Checking for errors, state, etc and everything returns positive. Using OpenGL ES2 on Android 7. Just cannot find the cause and the way how color is set up is identical to texcoord for me.</p>\n\n<p>Vertex Shader:</p>\n\n<pre><code>#version 100\nattribute vec2 position;\nattribute vec3 color;\nattribute vec2 texcoord;\n\nvarying vec3 Color;\nvarying vec2 Texcoord;\n\n\nvoid main()\n   {\n         Color = color;\n         gl_Position = vec4(position, 0.0, 1.0);\n         Texcoord = texcoord;\n   }\n</code></pre>\n\n<p>Fragment Shader:</p>\n\n<pre><code>#version 100\nprecision mediump float;\nvarying vec3 Color;\nvarying vec2 Texcoord;\n\nvec4 outColor;\nuniform sampler2D tex;\n\nvoid main()\n\n{\n   outColor = texture2D(tex, Texcoord) * vec4(Color, 1.0);\n} \n</code></pre>\n\n<p>Code:</p>\n\n<pre><code>GLuint GlHelper::loadShader(char* fragment, char* vertex)\n{\noff_t fLength;\nconst char *vertexSource = FileManager::ReadFile(vertex,fLength);\n\n\n// Create vertex shader\nGLuint vertexShader = glCreateShader(GL_VERTEX_SHADER);\nglShaderSource(vertexShader, 1, &amp;vertexSource, NULL);\nglCompileShader(vertexShader);\n\n\nGLint status; GLint logLength;\nglGetShaderiv(vertexShader, GL_COMPILE_STATUS, &amp;status);\nglGetShaderiv(vertexShader,GL_INFO_LOG_LENGTH,&amp;logLength);\n\n\nif (status != GL_TRUE)\n{\n\n    char buffer[logLength];\n    glGetShaderInfoLog(vertexShader, logLength, NULL, buffer);\n\n    __android_log_print(ANDROID_LOG_ERROR, QS_OPENGLTAG, \"%s\",buffer);\n\n    return 0;\n}\n\noff_t fLength2;\nconst char *fragmentSource = FileManager::ReadFile(fragment,fLength2);\n\nGLuint fragmentShader = glCreateShader(GL_FRAGMENT_SHADER);\nglShaderSource(fragmentShader, 1, &amp;fragmentSource, NULL);\nglCompileShader(fragmentShader);\n\nglGetShaderiv(fragmentShader,GL_COMPILE_STATUS, &amp;status);\nglGetShaderiv(fragmentShader,GL_INFO_LOG_LENGTH,&amp;logLength);\n\n\nif (status != GL_TRUE)\n{\n\n    char buffer[logLength];\n    glGetShaderInfoLog(fragmentShader, logLength, NULL, buffer);\n\n    __android_log_print(ANDROID_LOG_ERROR, QS_OPENGLTAG,\"%s\", buffer);\n    return 0;\n}\n\nGLuint shaderProgram = glCreateProgram();\nglAttachShader(shaderProgram, vertexShader);\nglAttachShader(shaderProgram, fragmentShader);\n\nglLinkProgram(shaderProgram);\n\nglGetProgramiv(shaderProgram,GL_LINK_STATUS,&amp;status);\nglGetProgramiv(shaderProgram,GL_INFO_LOG_LENGTH,&amp;logLength);\n\nif(status != GL_TRUE)\n{\n    char buffer[logLength];\n    glGetProgramInfoLog(shaderProgram,logLength,NULL,buffer);\n    __android_log_print(ANDROID_LOG_ERROR,QS_OPENGLTAG,\"%s\",buffer);\n    return 0;\n}\n\n// Validate and error check.\nglValidateProgram(shaderProgram);\n\nglGetProgramiv(shaderProgram, GL_VALIDATE_STATUS, &amp;status);\nif(status != GL_TRUE)\n{\n    char buffer[512];\n    glGetProgramInfoLog(shaderProgram,512,NULL,buffer);\n    __android_log_print(ANDROID_LOG_ERROR,QS_OPENGLTAG,\"%s\",buffer);\n    return 0;\n}\n\nglUseProgram(shaderProgram);\n\nGLenum  err = glGetError();\nif(err != GL_NO_ERROR)\n{\n    __android_log_print(ANDROID_LOG_ERROR,QS_OPENGLTAG,\"%s\",\"OpenGL error code: \"); \n    return 0;\n}\n\n\nGLint posAttrib = glGetAttribLocation(shaderProgram, \"position\"); // works\nglEnableVertexAttribArray(posAttrib);\nglVertexAttribPointer(posAttrib, 2, GL_FLOAT, GL_FALSE, 7*sizeof(float), 0);\n\nGLint colAttrib = glGetAttribLocation(shaderProgram, \"color\"); // returns -1\nglEnableVertexAttribArray(colAttrib);\nglVertexAttribPointer(colAttrib, 3, GL_FLOAT, GL_FALSE, 7*sizeof(float), (void*)(2*sizeof(float)));\n\n\nGLint texAttrib = glGetAttribLocation(shaderProgram, \"texcoord\"); // works\nglEnableVertexAttribArray(texAttrib);\nglVertexAttribPointer(texAttrib, 2, GL_FLOAT, GL_FALSE, 7*sizeof(float), (void*)(5*sizeof(float)));\n\nreturn shaderProgram;\n</code></pre>\n\n<p>Here is my readfile function, in case it does something wrong:</p>\n\n<pre><code>const char* FileManager::ReadFile(const char *path, off_t&amp; length)\n{\n  AAsset* \nasset=AAssetManager_open(FileManager::assetManager,path,AASSET_MODE_BUFFER);\n\n  char* buff = new char[AAsset_getLength(asset)];\n  length = AAsset_getLength(asset);\n  AAsset_read(asset,buff,(size_t)length);\n  AAsset_close(asset);\n  return buff;\n}\n</code></pre>\n"}, {"tags": ["c++", "algorithm", "data-structures"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 2, "creation_date": 1525867011, "post_id": 50252731, "comment_id": 87522738, "body": "what &quot;performance requirements&quot; are making this different from the linked question? You just say you need it efficiently, while the other question is asking for doing it efficiently...."}, {"owner": {"reputation": 8739, "user_id": 5603247, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c27998979eedac7a3737411e77b0bf4b?s=128&d=identicon&r=PG&f=1", "display_name": "Hans Olsson", "link": "https://stackoverflow.com/users/5603247/hans-olsson"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1525867772, "post_id": 50252731, "comment_id": 87523189, "body": "The performance requirement varies dynamically from call to call, so I cannot statically select one alternative. That part wasn&#39;t resolved in the linked question."}, {"owner": {"reputation": 9737, "user_id": 1460794, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/7lOXx.png?s=128&g=1", "display_name": "wally", "link": "https://stackoverflow.com/users/1460794/wally"}, "edited": false, "score": 1, "creation_date": 1525867776, "post_id": 50252731, "comment_id": 87523192, "body": "At this level of optimization (not simply using the standard library) we would really need to see sample data and benchmarks. Once you get to actual data, compilers and hardware then you can always optimize more. Without this information the question really isn&#39;t that much different from the linked one even though it expresses a willingness to switch approaches based on the case at hand (which the standard library may do already)."}, {"owner": {"reputation": 8739, "user_id": 5603247, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c27998979eedac7a3737411e77b0bf4b?s=128&d=identicon&r=PG&f=1", "display_name": "Hans Olsson", "link": "https://stackoverflow.com/users/5603247/hans-olsson"}, "reply_to_user": {"reputation": 9737, "user_id": 1460794, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/7lOXx.png?s=128&g=1", "display_name": "wally", "link": "https://stackoverflow.com/users/1460794/wally"}, "edited": false, "score": 0, "creation_date": 1525867960, "post_id": 50252731, "comment_id": 87523301, "body": "@wally An implementation of the standard set_intersection could possible switch approaches, but does any implementations do that? If so, how?"}, {"owner": {"reputation": 9737, "user_id": 1460794, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/7lOXx.png?s=128&g=1", "display_name": "wally", "link": "https://stackoverflow.com/users/1460794/wally"}, "edited": false, "score": 0, "creation_date": 1525868090, "post_id": 50252731, "comment_id": 87523404, "body": "The standard library has some freedom in how it is implemented internally, so it could be checked. Another approach that may be viable is to write your own parallel function to share the task among multiple cores. Or pehaps to offload to a GPU. In those cases you are certainly considering alternatives outside of the standard library&#39;s mandate."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1525868227, "post_id": 50252731, "comment_id": 87523509, "body": "what about a <code>if ((n1+n2) &lt; n1*log2(n2))</code> then pick the better one? (would of course also need to take into account <code>n2*log2(n1))</code>). Btw, thats not a different requirement, it is just asking how to do it efficiently in the general case. Sorry for nitpicking, just wanted to understand better what you really mean, though i still feel that this is close to being a dupe"}, {"owner": {"reputation": 9737, "user_id": 1460794, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/7lOXx.png?s=128&g=1", "display_name": "wally", "link": "https://stackoverflow.com/users/1460794/wally"}, "edited": false, "score": 0, "creation_date": 1525868594, "post_id": 50252731, "comment_id": 87523786, "body": "<a href=\"https://stackoverflow.com/q/29759884/1460794\">Set intersection on a GPU</a>"}, {"owner": {"reputation": 9737, "user_id": 1460794, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/7lOXx.png?s=128&g=1", "display_name": "wally", "link": "https://stackoverflow.com/users/1460794/wally"}, "edited": false, "score": 0, "creation_date": 1525868693, "post_id": 50252731, "comment_id": 87523866, "body": "<a href=\"https://stackoverflow.com/a/30141130/1460794\">You can</a> make <code>std::set_intersection</code> as well as a bunch of other standard library algorithms run in parallel by defining <code>_GLIBCXX_PARALLEL</code> during compilation."}, {"owner": {"reputation": 8739, "user_id": 5603247, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c27998979eedac7a3737411e77b0bf4b?s=128&d=identicon&r=PG&f=1", "display_name": "Hans Olsson", "link": "https://stackoverflow.com/users/5603247/hans-olsson"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1525868968, "post_id": 50252731, "comment_id": 87524052, "body": "@user463035818 Yes, that is the current approach (with three different variants), and it works  - but I was hoping for something better."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1525869164, "post_id": 50252731, "comment_id": 87524189, "body": "better with respect to what? avoiding the condition and resulting jumps? Make it a template with sizes of the maps as parameters, however, thats not dynamic anymore"}, {"owner": {"reputation": 8739, "user_id": 5603247, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c27998979eedac7a3737411e77b0bf4b?s=128&d=identicon&r=PG&f=1", "display_name": "Hans Olsson", "link": "https://stackoverflow.com/users/5603247/hans-olsson"}, "reply_to_user": {"reputation": 9737, "user_id": 1460794, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/7lOXx.png?s=128&g=1", "display_name": "wally", "link": "https://stackoverflow.com/users/1460794/wally"}, "edited": false, "score": 0, "creation_date": 1525869744, "post_id": 50252731, "comment_id": 87524591, "body": "@wally - Running in parallel is interesting, but some of the code that is used cannot run in parallel yet; just having a simple lock would destroy any benefit of parallelization. Similarly the data is currently not on a GPU so copying the data to the GPU would destroy any performance improvement of the code."}, {"owner": {"reputation": 8739, "user_id": 5603247, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c27998979eedac7a3737411e77b0bf4b?s=128&d=identicon&r=PG&f=1", "display_name": "Hans Olsson", "link": "https://stackoverflow.com/users/5603247/hans-olsson"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1525870271, "post_id": 50252731, "comment_id": 87524998, "body": "@user463035818 Ideally combining the best performance of them - since that avoids having to tune the switch between approaches; but at least making it clear that it is the same code."}, {"owner": {"reputation": 472, "user_id": 4990485, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5853eb83d309719afafb211b70725962?s=128&d=identicon&r=PG&f=1", "display_name": "sv90", "link": "https://stackoverflow.com/users/4990485/sv90"}, "edited": false, "score": 0, "creation_date": 1525880032, "post_id": 50252731, "comment_id": 87532077, "body": "If you are using std::map or std::set one problem could be the bad cache locality. You could try to use a pool allocator or a sorted vector instead of tree depending on your requirements. There are solutions in boost for both approaches."}], "answers": [{"comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "reply_to_user": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 0, "creation_date": 1525872491, "post_id": 50253086, "comment_id": 87526618, "body": "@Caleth uh.. now I get it, too hot in here ;) I completely overlooked that first 2 lines."}], "tags": [], "owner": {"reputation": 1191, "user_id": 825093, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/87f060b749a77b7f6d03c3d6f56d3873?s=128&d=identicon&r=PG", "display_name": "silleknarf", "link": "https://stackoverflow.com/users/825093/silleknarf"}, "is_accepted": false, "score": 0, "last_activity_date": 1525872134, "last_edit_date": 1525872134, "creation_date": 1525867887, "answer_id": 50253086, "question_id": 50252731, "link": "https://stackoverflow.com/questions/50252731/efficient-intersection-of-two-sets/50253086#50253086", "title": "Efficient intersection of two sets", "body": "<p>With regard to the performance requirement, O(n1 + n2) is in most circumstances a very good complexity so only worth considering if you're doing this calc in a tight loop.</p>\n\n<p>If you really do need it, the combination approach isn't too bad, perhaps something like?</p>\n\n<p>Pseudocode:</p>\n\n<pre><code>x' = set_with_min_length([x, y])\ny' = set_with_max_length([x, y])\nif (x'.length * log(y'.length)) &lt;= (x'.length + y'.length):\n     return iterate_over_map_find_elements_in_other(y', x')\n\nreturn std::set_intersection(x, y)\n</code></pre>\n\n<p>I don't think you'll find an algorithm that will beat either of these complexities but happy to be proven wrong.</p>\n"}, {"comments": [{"owner": {"reputation": 8739, "user_id": 5603247, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c27998979eedac7a3737411e77b0bf4b?s=128&d=identicon&r=PG&f=1", "display_name": "Hans Olsson", "link": "https://stackoverflow.com/users/5603247/hans-olsson"}, "edited": false, "score": 0, "creation_date": 1525870991, "post_id": 50253139, "comment_id": 87525548, "body": "First and foremost there are cases with 5 elements and &gt;1000 elements, so it happens. However, I don&#39;t agree with the conclusion. For selection sort vs. quick sort it depends on the complexity of the algorithms. I haven&#39;t tested relative performance of ++ vs find in a map - but they seem more similar. And if the constants are the same for (n1+n2) and n2*log2(n1), then n1=1000 gives n2=111, and gives n1=10 000 gives n2=813."}, {"owner": {"reputation": 2213, "user_id": 7757891, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/472798cf3c4d45c418314f837590985c?s=128&d=identicon&r=PG&f=1", "display_name": "Petar Velev", "link": "https://stackoverflow.com/users/7757891/petar-velev"}, "edited": false, "score": 0, "creation_date": 1525871782, "post_id": 50253139, "comment_id": 87526093, "body": "I mentioned selection sort because its complexity is O(n^2) but it performs better than quick or merge sort for a small number of elements. However if the sizes of the sets are equal then for sets with 10 elements you&#39;ll have 10 + 10 operations or 10*3.32(log(10) operations - over 30. The only possible way for  <code>find</code> to be faster would be when you have collections with less than 4 elements where log(n) will be less than 2."}, {"owner": {"reputation": 8739, "user_id": 5603247, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c27998979eedac7a3737411e77b0bf4b?s=128&d=identicon&r=PG&f=1", "display_name": "Hans Olsson", "link": "https://stackoverflow.com/users/5603247/hans-olsson"}, "edited": false, "score": 0, "creation_date": 1525872107, "post_id": 50253139, "comment_id": 87526325, "body": "@PetarVelev The sets can be of very different lengths. If we have one set with 1024 and another with 100 elements, it is 1024+100=1124 vs. 100*log2(1024)=1000 - and I found cases with &gt;1000 elements intersecting with not only &lt;100 elements, but even &lt;10 elements."}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "reply_to_user": {"reputation": 8739, "user_id": 5603247, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c27998979eedac7a3737411e77b0bf4b?s=128&d=identicon&r=PG&f=1", "display_name": "Hans Olsson", "link": "https://stackoverflow.com/users/5603247/hans-olsson"}, "edited": false, "score": 1, "creation_date": 1525873117, "post_id": 50253139, "comment_id": 87527091, "body": "@HansOlsson you are comparing apples to oranges. <code>std::set_intersection</code> is <i>specified as</i> &quot;At most 2 * (N1+N2-1) comparisons&quot; whereas <code>std::set::find</code> is <i>specified as</i> O(log(<code>size()</code>)). For one you have a <i>strict count</i> of operations, the other is an asymptotic bound"}, {"owner": {"reputation": 8739, "user_id": 5603247, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c27998979eedac7a3737411e77b0bf4b?s=128&d=identicon&r=PG&f=1", "display_name": "Hans Olsson", "link": "https://stackoverflow.com/users/5603247/hans-olsson"}, "reply_to_user": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 0, "creation_date": 1525877041, "post_id": 50253139, "comment_id": 87530055, "body": "@Caleth Theoretically the guarantees differ, but in practice set_intersection actually uses that many comparisons, and set::find has a small constant and no major overhead for small sets, i.e. it is &lt;=c1+c2*log2(size()) for &quot;small&quot; c1 and c2 - which gives similar conclusions. I can also see that changing algorithm to not use set_intersection improves performance of that part of the program from about 90s to 30s in some cases - and that part involves lots of other code as well."}], "tags": [], "owner": {"reputation": 2213, "user_id": 7757891, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/472798cf3c4d45c418314f837590985c?s=128&d=identicon&r=PG&f=1", "display_name": "Petar Velev", "link": "https://stackoverflow.com/users/7757891/petar-velev"}, "is_accepted": false, "score": 4, "last_activity_date": 1525871448, "last_edit_date": 1525871448, "creation_date": 1525868011, "answer_id": 50253139, "question_id": 50252731, "link": "https://stackoverflow.com/questions/50252731/efficient-intersection-of-two-sets/50253139#50253139", "title": "Efficient intersection of two sets", "body": "<p>In almost every case <code>std::set_intersection</code> will be the best choice.\nThe other solution may be better only if the sets contain a very small number of elements.\nDue to the nature of the log with base two. \nWhich scales as:</p>\n\n<blockquote>\n  <p>n = 2,  log(n)= 1<br>\n  n = 4,  log(n)= 2<br>\n  n = 8,  log(n)= 3<br>\n  .....<br>\n  n = 1024 log(n) = 10  </p>\n</blockquote>\n\n<p>O(n1*log(n2) is significantly more complex than O(n1 + n2) if the length of the sets is more than 5-10 elements.</p>\n\n<p>There is a reason such function is added to the STL and it is implemented like that. It will also make the code more readable.  </p>\n\n<p>Selection sort is faster than merge or quick sort for collections with length less than 20 but is rarely used.</p>\n"}, {"comments": [{"owner": {"reputation": 8739, "user_id": 5603247, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c27998979eedac7a3737411e77b0bf4b?s=128&d=identicon&r=PG&f=1", "display_name": "Hans Olsson", "link": "https://stackoverflow.com/users/5603247/hans-olsson"}, "edited": false, "score": 0, "creation_date": 1525871747, "post_id": 50254307, "comment_id": 87526072, "body": "Ok, that  seems like what I was looking for. Do you have any references for it? Is there an implementation in boost or similarly?"}, {"owner": {"reputation": 36328, "user_id": 5483526, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec50563f80bacd2a7fed69bd31d0c810?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Timmermans", "link": "https://stackoverflow.com/users/5483526/matt-timmermans"}, "reply_to_user": {"reputation": 8739, "user_id": 5603247, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c27998979eedac7a3737411e77b0bf4b?s=128&d=identicon&r=PG&f=1", "display_name": "Hans Olsson", "link": "https://stackoverflow.com/users/5603247/hans-olsson"}, "edited": false, "score": 0, "creation_date": 1525909543, "post_id": 50254307, "comment_id": 87545077, "body": "Unfortunately, I think you&#39;d have to roll your own.  The key is usually a set with an efficient skip-until operation.  I&#39;ll update the answer to describe how it&#39;s implemented in terms of that in case you see one."}], "tags": [], "owner": {"reputation": 36328, "user_id": 5483526, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec50563f80bacd2a7fed69bd31d0c810?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Timmermans", "link": "https://stackoverflow.com/users/5483526/matt-timmermans"}, "is_accepted": true, "score": 2, "last_activity_date": 1525910217, "last_edit_date": 1525910217, "creation_date": 1525871594, "answer_id": 50254307, "question_id": 50252731, "link": "https://stackoverflow.com/questions/50252731/efficient-intersection-of-two-sets/50254307#50254307", "title": "Efficient intersection of two sets", "body": "<p>For sets that are implemented as binary trees, there actually <em>is</em> an algorithm that combines the benefits of both the procedures you mention.  Essentially, you do a merge like std::set_intersection, but while iterating in one tree, you skip any branches that are all less than the current value in the other.</p>\n\n<p>The resulting intersection takes <strong>O(min(n1 log n2, n2 log n1, n1 + n2)</strong>, which is just what you want.</p>\n\n<p>Unfortunately, I'm pretty sure std::set doesn't provide interfaces that could support this operation.</p>\n\n<p>I've done it a few times in the past though, when working on joining inverted indexes and similar things.  Usually I make iterators with a skipTo(x) operation that will advance to the next element >= x.  To meet my promised complexity it has to be able to skip N elements in log(N) amortized time. Then an intersection looks like this:</p>\n\n<pre><code>void get_intersection(vector&lt;T&gt; *dest, const set&lt;T&gt; set1, const set&lt;T&gt; set2)\n{\n    auto end1 = set1.end();\n    auto end2 = set2.end();\n    auto it1 = set1.begin();\n    if (it1 == end1)\n        return;\n    auto it2 = set2.begin();\n    if (it2 == end2)\n        return;\n    for (;;)\n    {\n        it1.skipTo(*it2);\n        if (it1 == end1)\n            break;\n        if (*it1 == *it2)\n        {\n            dest-&gt;push_back(*it1);\n            ++it1;\n        }\n        it2.skipTo(*it1);\n        if (it2 == end2)\n            break;\n        if (*it2 == *it1)\n        {\n            dest-&gt;push_back(*it2);\n            ++it2;\n        }\n    }\n}\n</code></pre>\n\n<p>It easily extends to an arbitrary number of sets using a vector of iterators, and pretty much any ordered collection can be extended to provide the iterators required -- sorted arrays, binary trees, b-trees, skip lists, etc.</p>\n"}, {"tags": [], "owner": {"reputation": 51837, "user_id": 2144669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e7393f439028063515255b63ed94cfd?s=128&d=identicon&r=PG", "display_name": "David Eisenstat", "link": "https://stackoverflow.com/users/2144669/david-eisenstat"}, "is_accepted": false, "score": 0, "last_activity_date": 1525872117, "last_edit_date": 1525872117, "creation_date": 1525871729, "answer_id": 50254352, "question_id": 50252731, "link": "https://stackoverflow.com/questions/50252731/efficient-intersection-of-two-sets/50254352#50254352", "title": "Efficient intersection of two sets", "body": "<p>I don't know how to do this using the standard library, but if you wrote your own balanced binary search tree, here is how to implement a limited \"find with hint\". (Depending on your other requirements, a BST reimplementation could also leave out the parent pointers, which could be a performance win over the STL.)</p>\n\n<p>Assume that the hint value is less than the value to be found and that we know the stack of ancestors of the hint node to whose left sub-tree the hint node belongs. First search normally in the right sub-tree of the hint node, pushing nodes onto the stack as warranted (to prepare the hint for next time). If this doesn't work, then while the stack's top node has a value that is less than the query value, pop the stack. Search from the last node popped (if any), pushing as warranted.</p>\n\n<p>I claim that, when using this mechanism to search successively for values in ascending order, (1) each tree edge is traversed at most once, and (2) each find traverses the edges of at most two descending paths. Given 2*n1 descending paths in a binary tree with n2 nodes, the cost of the edges is O(n1 log n2). It's also O(n2), because each edge is traversed once.</p>\n"}], "owner": {"reputation": 8739, "user_id": 5603247, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c27998979eedac7a3737411e77b0bf4b?s=128&d=identicon&r=PG&f=1", "display_name": "Hans Olsson", "link": "https://stackoverflow.com/users/5603247/hans-olsson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 455, "favorite_count": 2, "accepted_answer_id": 50254307, "answer_count": 4, "score": 4, "last_activity_date": 1525910217, "creation_date": 1525866840, "last_edit_date": 1525867785, "question_id": 50252731, "link": "https://stackoverflow.com/questions/50252731/efficient-intersection-of-two-sets", "title": "Efficient intersection of two sets", "body": "<p>I have two sets (or maps) and need to <strong>efficiently</strong> handle their intersection.\nI know that there are two ways of doing this:</p>\n\n<ul>\n<li>iterate over both maps as in std::set_intersection: O(n1+n2)</li>\n<li>iterating over one map and finding elements in the other: O(n1*log(n2))</li>\n</ul>\n\n<p>Depending on the sizes either of these two solution is significantly better (have timed it), and I thus need to either switch between these algorithm based on the sizes (which is a bit messy) - or find a solution outperforming both, e.g. using some variant of map.find() taking the previous iterator as a hint (similarly as map.emplace_hint(...)) - but I could not find such a function.</p>\n\n<p><strong>Question</strong>: Is it possible to combine the performance characteristics of the two solutions directly using STL - or some compatible library?</p>\n\n<p>Note that the performance requirement makes this different from earlier questions such as\n<a href=\"https://stackoverflow.com/questions/20979892/efficient-intersection-of-sets\">Efficient intersection of sets?</a></p>\n"}, {"tags": ["c++", "parsing", "boost-spirit"], "comments": [{"owner": {"reputation": 3425, "user_id": 3621421, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/995874e8bbb9cf8df99e63de231709cc?s=128&d=identicon&r=PG&f=1", "display_name": "Nikita Kniazev", "link": "https://stackoverflow.com/users/3621421/nikita-kniazev"}, "edited": false, "score": 1, "creation_date": 1530272969, "post_id": 50252680, "comment_id": 89189301, "body": "The issue is known for devs, Joel is afraid of adding support for single element sequences (see comments on <a href=\"https://github.com/boostorg/spirit/pull/178\" rel=\"nofollow noreferrer\">github.com/boostorg/spirit/pull/178</a>). You can rise attention to the issue by commenting that PR or opening a new ticket and maybe he will change his mind."}, {"owner": {"reputation": 23, "user_id": 5418854, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3951e33324ebac17b8ddc61f1970a3e0?s=128&d=identicon&r=PG&f=1", "display_name": "rav", "link": "https://stackoverflow.com/users/5418854/rav"}, "reply_to_user": {"reputation": 3425, "user_id": 3621421, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/995874e8bbb9cf8df99e63de231709cc?s=128&d=identicon&r=PG&f=1", "display_name": "Nikita Kniazev", "link": "https://stackoverflow.com/users/3621421/nikita-kniazev"}, "edited": false, "score": 0, "creation_date": 1530876085, "post_id": 50252680, "comment_id": 89399209, "body": "Thanks, that&#39;s nice to know. I managed to work around it following sehe&#39;s advice. While I don&#39;t think this is much of an issue it would be nice to warn others that it&#39;s not supported. This post should do just fine."}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 5418854, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3951e33324ebac17b8ddc61f1970a3e0?s=128&d=identicon&r=PG&f=1", "display_name": "rav", "link": "https://stackoverflow.com/users/5418854/rav"}, "edited": false, "score": 0, "creation_date": 1526162041, "post_id": 50260708, "comment_id": 87638077, "body": "Sorry for the late reply and thanks for taking the time to answer! Pity it&#39;s a limitation. Your fix is on point. Yeah, as I was trying to simplify my code the grammar did get nonsensical. Thanks again."}], "tags": [], "owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "is_accepted": true, "score": 3, "last_activity_date": 1525893961, "creation_date": 1525893961, "answer_id": 50260708, "question_id": 50252680, "link": "https://stackoverflow.com/questions/50252680/boost-spirit-x3-parser-no-type-named-type-in/50260708#50260708", "title": "Boost.Spirit X3 parser &quot;no type named type in(...)&quot;", "body": "<p>Yup. This looks like another limitation with automatic propagation of attributes when single-element sequences are involved.</p>\n\n<p>I'd probably bite the bullet and change the rule definition from what it is (and what you'd expect to work) to:</p>\n\n<pre><code>x3::rule&lt;class program_, std::vector&lt;std::string&gt; &gt;\n</code></pre>\n\n<p>That removes the root of the confusion.</p>\n\n<p>Other notes:</p>\n\n<ul>\n<li><p>you had <code>char_</code> which also eats <code>';'</code> so the grammar would <strong>never</strong> succeed because no <code>';'</code> would follow a \"statement\".</p></li>\n<li><p>your statements aren't lexeme, so whitespace is discarded (is this what you meant? See <a href=\"https://stackoverflow.com/questions/17072987/boost-spirit-skipper-issues/17073965#17073965\">Boost spirit skipper issues</a>)</p></li>\n<li><p>your statement could be empty, which meant parsing would ALWAYS fail at the end of input (where it would <em>always</em> read an empty state, and then discover that the expected <code>';'</code> was missing). Fix it by requiring at least 1 character before accepting a statement.</p></li>\n</ul>\n\n<p>With some simplifications/style changes:</p>\n\n<p><strong><kbd><a href=\"http://coliru.stacked-crooked.com/a/cae277335c65696b\" rel=\"nofollow noreferrer\">Live On Coliru</a></kbd></strong></p>\n\n<pre><code>#include &lt;boost/fusion/adapted.hpp&gt;\n#include &lt;boost/spirit/home/x3.hpp&gt;\n#include &lt;list&gt;\n\nnamespace x3 = boost::spirit::x3;\n\nnamespace ast {\n    using statement = std::string;\n\n    struct program {\n        std::list&lt;statement&gt; stmts;\n    };\n} \n\nBOOST_FUSION_ADAPT_STRUCT(ast::program, stmts)\n\nnamespace grammar {\n    auto statement \n        = x3::rule&lt;class statement_, ast::statement&gt; {\"statement\"}\n        = +~x3::char_(';');\n    auto program \n        = x3::rule&lt;class program_, std::list&lt;ast::statement&gt; &gt; {\"program\"}\n        = *(statement &gt;&gt; ';');\n} \n\n#include &lt;iostream&gt;\n#include &lt;iomanip&gt;\n\nint main() {\n    std::cout &lt;&lt; \"Type an expression...or [q or Q] to quit\\n\\n\";\n\n    using It = std::string::const_iterator;\n\n    for (std::string str; std::getline(std::cin, str);) {\n        if (str.empty() || str[0] == 'q' || str[0] == 'Q')\n            break;\n\n        auto &amp;parser = grammar::program;\n        ast::program program; // Our program (AST)\n\n        It iter = str.begin(), end = str.end();\n        if (phrase_parse(iter, end, parser, x3::space, program)) {\n            std::cout &lt;&lt; \"Parsing succeeded\\n\";\n            for (auto&amp; s : program.stmts) {\n                std::cout &lt;&lt; \"Statement: \" &lt;&lt; std::quoted(s, '\\'') &lt;&lt; \"\\n\";\n            }\n        }\n        else\n            std::cout &lt;&lt; \"Parsing failed\\n\";\n\n        if (iter != end)\n            std::cout &lt;&lt; \"Remaining unparsed: \" &lt;&lt; std::quoted(std::string(iter, end), '\\'') &lt;&lt; \"\\n\";\n    }\n}\n</code></pre>\n\n<p>Which for input \"a;b;c;d;\" prints:</p>\n\n<pre><code>Parsing succeeded\nStatement: 'a'\nStatement: 'b'\nStatement: 'c'\nStatement: 'd'\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 5418854, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3951e33324ebac17b8ddc61f1970a3e0?s=128&d=identicon&r=PG&f=1", "display_name": "rav", "link": "https://stackoverflow.com/users/5418854/rav"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 520, "favorite_count": 0, "accepted_answer_id": 50260708, "answer_count": 1, "score": 2, "last_activity_date": 1525893961, "creation_date": 1525866706, "question_id": 50252680, "link": "https://stackoverflow.com/questions/50252680/boost-spirit-x3-parser-no-type-named-type-in", "title": "Boost.Spirit X3 parser &quot;no type named type in(...)&quot;", "body": "<p><br>\nI was toying with Boost.Spirit X3 calculator example when I encountered an error I couldn't get my head around. <br>\nI minimized the program to reduce complexity still throwing the same error.\nSay I want to parse an input as a list of statements (strings) followed by a delimiter (';').\n<br></p>\n\n<h2>This is my structure:</h2>\n\n<p><br></p>\n\n<pre><code>namespace client { namespace ast\n {    \n     struct program\n    {\n        std::list&lt;std::string&gt; stmts;\n    };\n }}\n\nBOOST_FUSION_ADAPT_STRUCT(client::ast::program,\n            (std::list&lt;std::string&gt;, stmts)\n)\n</code></pre>\n\n<h2>The grammar is as follows:</h2>\n\n<pre><code>namespace client\n{ \n    namespace grammar\n    {\n\n   x3::rule&lt;class program, ast::program&gt; const program(\"program\");\n\n    auto const program_def =\n            *((*char_) &gt; ';')\n            ;\n\n   BOOST_SPIRIT_DEFINE(\n       program\n    );\n    auto calculator = program;\n}\n\nusing grammar::calculator;\n</code></pre>\n\n<p>}</p>\n\n<h2>Invoked</h2>\n\n<p><br></p>\n\n<pre><code>    int\n    main()\n    {\n    std::cout &lt;&lt;\"///////////////////////////////////////////\\n\\n\";\n    std::cout &lt;&lt; \"Expression parser...\\n\\n\";\n    std::cout &lt;&lt; //////////////////////////////////////////////////\\n\\n\";\n    std::cout &lt;&lt; \"Type an expression...or [q or Q] to quit\\n\\n\";\n\n    typedef std::string::const_iterator iterator_type;\n    typedef client::ast::program ast_program;\n\n    std::string str;\n    while (std::getline(std::cin, str))\n    {\n        if (str.empty() || str[0] == 'q' || str[0] == 'Q')\n            break;\n\n        auto&amp; calc = client::calculator;    // Our grammar\n        ast_program program;                // Our program (AST)\n\n        iterator_type iter = str.begin();\n        iterator_type end = str.end();\n        boost::spirit::x3::ascii::space_type space;\n        bool r = phrase_parse(iter, end, calc, space, program);\n\n        if (r &amp;&amp; iter == end)\n        {\n            std::cout &lt;&lt; \"-------------------------\\n\";\n            std::cout &lt;&lt; \"Parsing succeeded\\n\";\n            std::cout&lt;&lt; '\\n';\n            std::cout &lt;&lt; \"-------------------------\\n\";\n        }\n        else\n        {\n            std::cout &lt;&lt; \"-------------------------\\n\";\n            std::cout &lt;&lt; \"Parsing failed\\n\";\n            std::cout &lt;&lt; \"-------------------------\\n\";\n        }\n    }\n\n    std::cout &lt;&lt; \"Bye... :-) \\n\\n\";\n    return 0;\n}\n</code></pre>\n\n<h2>Error I get is</h2>\n\n<pre><code>/opt/boost_1_66_0/boost/spirit/home/x3/support/traits/container_traits.hpp: In instantiation of \u2018struct boost::spirit::x3::traits::container_value&lt;client::ast::program, void&gt;\u2019:\n.\n.\n.\n\n/opt/boost_1_66_0/boost/spirit/home/x3/support/traits/container_traits.hpp:76:12: error: no type named \u2018value_type\u2019 in \u2018struct client::ast::program\u2019\n         struct container_value\n/opt/boost_1_66_0/boost/spirit/home/x3/operator/detail/sequence.hpp:497:72: error: no type named \u2018type\u2019 in \u2018struct boost::spirit::x3::traits::container_value&lt;client::ast::program, void&gt;\u2019\n          , typename traits::is_substitute&lt;attribute_type, value_type&gt;::type());\n                                                                        ^~~~~~\n</code></pre>\n\n<h2>Things I tried:</h2>\n\n<p><br>\nFollowing <a href=\"https://stackoverflow.com/questions/18158376/getting-boostspiritqi-to-use-stl-containers\">Getting boost::spirit::qi to use stl containers</a> <br>\nEven though it uses Qi I nonetheless tried:</p>\n\n<pre><code>namespace boost{namespace spirit{ namespace traits{\ntemplate&lt;&gt;\nstruct container_value&lt;client::ast::program&gt; \n//also with struct container&lt;client::ast::program, void&gt;\n{\n      typedef std::list&lt;std::string&gt; type;\n};\n}}}\n</code></pre>\n\n<p>You see I'm kinda in the dark, so expectably to no avail. </p>\n\n<pre><code>parser2.cpp:41:8: error: \u2018container_value\u2019 is not a class template\n struct container_value&lt;client::ast::program&gt;\n        ^~~~~~~~~~~~~~~\n</code></pre>\n\n<p>In the same SO question I author says <br> <em>\"There is one known limitation though, when you try to use a struct that has a single element that is also a container compilation fails unless you add qi::eps >> ... to your rule.\"</em></p>\n\n<p>I did try adding a dummy eps also without success.</p>\n\n<p>Please, help me decipher what that error means.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1525866722, "post_id": 50252647, "comment_id": 87522577, "body": "It&#39;s not assignment. It&#39;s (copy-)initialization. Just like <code>int i = 1;</code> is"}, {"owner": {"reputation": 11096, "user_id": 2749717, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46af1ef54856d737d52b7667afd240ee?s=128&d=identicon&r=PG&f=1", "display_name": "bipll", "link": "https://stackoverflow.com/users/2749717/bipll"}, "edited": false, "score": 0, "creation_date": 1525866782, "post_id": 50252647, "comment_id": 87522606, "body": "As a side note, in C++ your constructor is usually written as: <code>Person(std::string name, int age): name(new std::string(std::move(name))), age(age) {}</code>. And yes, <code>Person1</code> IS a reference when used as a RHS of initialization."}, {"owner": {"reputation": 17713, "user_id": 226648, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/3196df423fd95dc4fce7dfadb8ec9953?s=128&d=identicon&r=PG", "display_name": "el.pescado", "link": "https://stackoverflow.com/users/226648/el-pescado"}, "edited": false, "score": 0, "creation_date": 1525867037, "post_id": 50252647, "comment_id": 87522755, "body": "I suggest finding a good C++ book."}, {"owner": {"reputation": 6559, "user_id": 4143855, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Gh4vC.jpg?s=128&g=1", "display_name": "Tas", "link": "https://stackoverflow.com/users/4143855/tas"}, "edited": false, "score": 0, "creation_date": 1525867146, "post_id": 50252647, "comment_id": 87522818, "body": "It may help you (or may not) to realise that your second line of code could also be called as <code>Person Person2(Person1);</code>"}, {"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 1, "creation_date": 1525868272, "post_id": 50252647, "comment_id": 87523543, "body": "A reference <i>is</i>  an alias, that is correct. But the reference is <code>p</code>, not anything else. So inside the copy constructor <code>p</code> is an alias for <code>Person1</code>."}, {"owner": {"reputation": 704, "user_id": 7595618, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51cf59e6785bbd9f82f28e8cfc0f2935?s=128&d=identicon&r=PG&f=1", "display_name": "Mike Borkland", "link": "https://stackoverflow.com/users/7595618/mike-borkland"}, "edited": false, "score": 1, "creation_date": 1525868736, "post_id": 50252647, "comment_id": 87523893, "body": "Do you really need to allocate a <code>string</code> on the heap?"}, {"owner": {"reputation": 36513, "user_id": 752976, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/j7Uis.jpg?s=128&g=1", "display_name": "Bartek Banachewicz", "link": "https://stackoverflow.com/users/752976/bartek-banachewicz"}, "reply_to_user": {"reputation": 704, "user_id": 7595618, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51cf59e6785bbd9f82f28e8cfc0f2935?s=128&d=identicon&r=PG&f=1", "display_name": "Mike Borkland", "link": "https://stackoverflow.com/users/7595618/mike-borkland"}, "edited": false, "score": 0, "creation_date": 1525874619, "post_id": 50252647, "comment_id": 87528272, "body": "@MikeBorkland He doesn&#39;t."}, {"owner": {"reputation": 704, "user_id": 7595618, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51cf59e6785bbd9f82f28e8cfc0f2935?s=128&d=identicon&r=PG&f=1", "display_name": "Mike Borkland", "link": "https://stackoverflow.com/users/7595618/mike-borkland"}, "reply_to_user": {"reputation": 36513, "user_id": 752976, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/j7Uis.jpg?s=128&g=1", "display_name": "Bartek Banachewicz", "link": "https://stackoverflow.com/users/752976/bartek-banachewicz"}, "edited": false, "score": 0, "creation_date": 1525874667, "post_id": 50252647, "comment_id": 87528298, "body": "@Bartek Banachewicz  I know. That was my point."}, {"owner": {"reputation": 789, "user_id": 8120642, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-OX8-_3nAbeE/AAAAAAAAAAI/AAAAAAAAAAA/of7PUZBmbk4/photo.jpg?sz=128", "display_name": "hegel5000", "link": "https://stackoverflow.com/users/8120642/hegel5000"}, "edited": false, "score": 1, "creation_date": 1525876032, "post_id": 50252647, "comment_id": 87529218, "body": "Just to be clear: <code>string *name;</code> really ought to be <code>string name;</code> and <code>name = new string(*p.name);</code> really ought to be <code>name = p.name</code>.  However, once you&#39;ve gotten rid of any superfluous pointers and <code>new</code>s, you can instead have <code>Person(const Person&amp;) = default;</code> which will give you an <a href=\"http://en.cppreference.com/w/cpp/language/copy_constructor\" rel=\"nofollow noreferrer\">implicitly-declared copy constructor</a>, which will handle the deep copy."}], "answers": [{"tags": [], "owner": {"reputation": 36513, "user_id": 752976, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/j7Uis.jpg?s=128&g=1", "display_name": "Bartek Banachewicz", "link": "https://stackoverflow.com/users/752976/bartek-banachewicz"}, "is_accepted": true, "score": 0, "last_activity_date": 1525875009, "creation_date": 1525875009, "answer_id": 50255530, "question_id": 50252647, "link": "https://stackoverflow.com/questions/50252647/understanding-the-copy-constructor-and-references/50255530#50255530", "title": "Understanding the copy constructor and references", "body": "<p>I've distilled this as your actual question:</p>\n\n<blockquote>\n  <p>But what happens in this assignment? If the copy constructor gets called, Person1 will be the parameter of it. This is supposed to be a reference. What oes d mean?</p>\n</blockquote>\n\n<p>And the answer is actually pretty straightforward. You've mentioned that:</p>\n\n<blockquote>\n  <p>I figured, a reference simply gives an alias of a variable</p>\n</blockquote>\n\n<p>And this is correct. Consider:</p>\n\n<pre><code>int x = 42;\nint&amp; y = x;\ncout &lt;&lt; y; // prints 42\n</code></pre>\n\n<p>It works the same in functions:</p>\n\n<pre><code>int x = 42;\n\nvoid print(int&amp; y) {\n    cout &lt;&lt; y;\n}\nprint(x); // prints 42\n</code></pre>\n\n<p>And since the copy constructor is just a special function, it works just the same:</p>\n\n<pre><code>Person a;\nPerson b = a;\n\n// Inside:\nPerson(const Person&amp; p) {\n    // p is an alias for \"a\"\n    // \"this\" is referencing \"b\"\n}\n</code></pre>\n\n<p>The constructor has a way to access both the object copied from (by the ref parameter) and the object copied to (by <code>this</code>), so it can do all the necessary copying, be it deep or shallow.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user9158336"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 0, "accepted_answer_id": 50255530, "answer_count": 1, "score": 0, "last_activity_date": 1525875009, "creation_date": 1525866537, "last_edit_date": 1525871297, "question_id": 50252647, "link": "https://stackoverflow.com/questions/50252647/understanding-the-copy-constructor-and-references", "title": "Understanding the copy constructor and references", "body": "<p>I have troubles uderstanding the concept of the copy constructor and also of references: </p>\n\n<p>Here's an example that I found:  </p>\n\n<pre><code>class Person {\nprivate: \n    string *name;\n    int age;\n\npublic: \n    Person(string name, int age) {\n        this -&gt; name = new string(name);\n        this -&gt; age = age;\n    }\n}\n</code></pre>\n\n<p>I understand the code as follows: the constructor is given the parameters <code>name</code>and <code>age</code>. When, in the <code>main()</code>function, an object of class Person is created, the constructor will be invoked and <code>this</code> returns the address of the object. I think. At this address now, a variable <code>name</code> will be created, by using <code>new</code>the necessasry memory will be allocated. Also, afterwards I think, a variable age is stored at the current memory address. </p>\n\n<p>Okay, now the copy constructor is implemented: </p>\n\n<pre><code>Person(const Person &amp;p) {\n    name = new string(*p.name);\n    age = p.age;\n}\n</code></pre>\n\n<p>When, in the <code>main()</code>, an assignment of two objects of class Person is done, the copy constructor will be invoked:</p>\n\n<pre><code>Person Person1(Lukas, 25);\nPerson Person2 = Person1;\n</code></pre>\n\n<p>So, I get that this is needed in order to perform a deep copy instead of a shallow copy. But what happens in this assignment? If the copy constructor gets called, Person1 will be the parameter of it. This is supposed to be a reference. What oes d mean? Until now, I figured, a reference simply gives an alias of a variable, but in this assignment, Person1 is an existing variable, it is no reference! </p>\n"}, {"tags": ["c++", "replace", "find", "c-strings"], "comments": [{"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "reply_to_user": {"reputation": 13016, "user_id": 8751754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7k6Li.png?s=128&g=1", "display_name": "Ron", "link": "https://stackoverflow.com/users/8751754/ron"}, "edited": false, "score": 0, "creation_date": 1525865788, "post_id": 50252370, "comment_id": 87522001, "body": "@Ron Op&#39;s asking for a function (presumably in the standard library) though."}, {"owner": {"reputation": 13016, "user_id": 8751754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7k6Li.png?s=128&g=1", "display_name": "Ron", "link": "https://stackoverflow.com/users/8751754/ron"}, "edited": false, "score": 0, "creation_date": 1525865854, "post_id": 50252370, "comment_id": 87522047, "body": "In that case it is unclear what the question is."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1525865868, "post_id": 50252370, "comment_id": 87522065, "body": "all you need is <code>operator[]</code>. I dont see the problem..."}, {"owner": {"reputation": 21, "user_id": 1802621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64eef331230a2b6ee27a724724653355?s=128&d=identicon&r=PG", "display_name": "Dan.Gurghian", "link": "https://stackoverflow.com/users/1802621/dan-gurghian"}, "edited": false, "score": 0, "creation_date": 1525866501, "post_id": 50252370, "comment_id": 87522457, "body": "Considering the VS version (2008) and the CString existing implementation - I was looking for a CString (based) search an replace function."}, {"owner": {"reputation": 9434, "user_id": 528720, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZpqMk.png?s=128&g=1", "display_name": "&#214;&#246; Tiib", "link": "https://stackoverflow.com/users/528720/%c3%96%c3%b6-tiib"}, "edited": false, "score": 0, "creation_date": 1525867902, "post_id": 50252370, "comment_id": 87523272, "body": "There are no regular expression searches and replaces in CString of Visual C++ 2008 if you were looking for that."}, {"owner": {"reputation": 21, "user_id": 1802621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64eef331230a2b6ee27a724724653355?s=128&d=identicon&r=PG", "display_name": "Dan.Gurghian", "link": "https://stackoverflow.com/users/1802621/dan-gurghian"}, "edited": false, "score": 0, "creation_date": 1525868059, "post_id": 50252370, "comment_id": 87523376, "body": "I was reading about this nonexisting feature that is why I need something similar done with CString. Considering that the development environment is 10 years old - I was thinking that someone did something like this in the past and might give me a hint."}], "answers": [{"comments": [{"owner": {"reputation": 9602, "user_id": 7151494, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-a_FzvY-b2O0/AAAAAAAAAAI/AAAAAAAAAEw/kNwilSAvQTI/photo.jpg?sz=128", "display_name": "Fureeish", "link": "https://stackoverflow.com/users/7151494/fureeish"}, "edited": false, "score": 1, "creation_date": 1525869513, "post_id": 50252951, "comment_id": 87524406, "body": "After briefly reading the <code>CString</code> documentation, I don&#39;t think there is any better way of achieving the goal. This function is a small and simple solution"}, {"owner": {"reputation": 21, "user_id": 1802621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64eef331230a2b6ee27a724724653355?s=128&d=identicon&r=PG", "display_name": "Dan.Gurghian", "link": "https://stackoverflow.com/users/1802621/dan-gurghian"}, "edited": false, "score": 0, "creation_date": 1525870429, "post_id": 50252951, "comment_id": 87525120, "body": "Yes. I agree with that. The sample code logic is fine - I need to adjust it to CString since the conversion of strings can be problematic."}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1525871228, "post_id": 50252951, "comment_id": 87525717, "body": "Huh, I trusted the <code>c-string</code> tag and assumed we were talking about classic C-strings. I now learned that the <code>CString</code> in question is actually a framework class."}, {"owner": {"reputation": 21, "user_id": 1802621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64eef331230a2b6ee27a724724653355?s=128&d=identicon&r=PG", "display_name": "Dan.Gurghian", "link": "https://stackoverflow.com/users/1802621/dan-gurghian"}, "edited": false, "score": 0, "creation_date": 1525872993, "post_id": 50252951, "comment_id": 87527002, "body": "Yes is told old CString but I have managed to make it work. Thank you :)"}], "tags": [], "owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "is_accepted": true, "score": 2, "last_activity_date": 1525867493, "creation_date": 1525867493, "answer_id": 50252951, "question_id": 50252370, "link": "https://stackoverflow.com/questions/50252370/c-cstring-find-and-replace/50252951#50252951", "title": "c++ cstring find and replace", "body": "<p>This is pretty trivial to write manually:</p>\n\n<pre><code>const int DIGIT_COUNT = 4;\nint length = strlen(input);\nint consecutiveDigits = 0;\nfor (int i = 0; i &lt; length; ++i)\n{\n   if (isDigit(input[i]))\n     consecutiveDigits++;\n   else\n     consecutiveDigits = 0;\n\n   if (consecutiveDigits == DIGIT_COUNT)\n     for (int j = 0; j &lt; 4; ++j)\n       input[i - j] = '*';\n}\n</code></pre>\n\n<p>Add an <code>isDigit(char)</code> function and you're good.</p>\n"}], "owner": {"reputation": 21, "user_id": 1802621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64eef331230a2b6ee27a724724653355?s=128&d=identicon&r=PG", "display_name": "Dan.Gurghian", "link": "https://stackoverflow.com/users/1802621/dan-gurghian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 608, "favorite_count": 0, "accepted_answer_id": 50252951, "answer_count": 1, "score": -2, "last_activity_date": 1525867493, "creation_date": 1525865645, "question_id": 50252370, "link": "https://stackoverflow.com/questions/50252370/c-cstring-find-and-replace", "title": "c++ cstring find and replace", "body": "<p>I have a C++ project (Microsoft Visual C++ 2008) that was developed years ago by a colleague of mine and I need to update something. </p>\n\n<p>I have a CString that contains a json and I need to find and replace every combination of 4 consecutive numbers that is present with ****. </p>\n\n<p>Example string </p>\n\n<p>1234567 12 34 78 iioi78ccc8888 aaassd dededeed ed</p>\n\n<p>Resulting string</p>\n\n<p>****567 12 34 78 iioi78ccc**** aaassd dededeed ed</p>\n\n<p>Can you suggest a function that can effectively do this, that is fully compatible with Microsoft Visual C++ 2008. </p>\n\n<p>Thank you. </p>\n\n<p>P.S. My approach would be to use RegEX to find the list of 4 consecutive digits and to replace them but support for Microsoft Visual C++ 2008 is limited \u2013 as I was reading. </p>\n"}]