[{"tags": ["c++", "c"], "comments": [{"owner": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "edited": false, "score": 0, "creation_date": 1501718597, "post_id": 45472754, "comment_id": 77906493, "body": "Depends on what lib types (e.g. <i>libc</i>) you have on your system. Run <code>ldd a.out</code> and look for <i>statically linked</i>."}, {"owner": {"reputation": 897, "user_id": 3830887, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9aa739aedfb6760abc3605091e12810e?s=128&d=identicon&r=PG&f=1", "display_name": "TonyB", "link": "https://stackoverflow.com/users/3830887/tonyb"}, "edited": false, "score": 0, "creation_date": 1501719191, "post_id": 45472754, "comment_id": 77906625, "body": "Have a look at a very verbose output of the compile/link process by doing            &quot;gcc -v helloworld.c -o helloworld&quot;  (without the quotes).."}, {"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 1, "creation_date": 1501719199, "post_id": 45472754, "comment_id": 77906630, "body": "<code>stdio.h</code> isn&#39;t linked to anything. The pre-processor includes it with your main source file, compiles the result into a relocatable object, and links that with standard C libraries, resulting in the <code>helloworld</code> executable."}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "reply_to_user": {"reputation": 5162, "user_id": 2785528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fc85984f1234637fa4ec24d93ae51bc?s=128&d=identicon&r=PG&f=1", "display_name": "2785528", "link": "https://stackoverflow.com/users/2785528/2785528"}, "edited": false, "score": 0, "creation_date": 1501733424, "post_id": 45472754, "comment_id": 77909694, "body": "@DOUGLASO.MOEN but it is a <code>.c</code> file and <code>gcc</code> is being used, not <code>g++</code>. Tags are wrong (or maybe the question is in general about both)."}, {"owner": {"reputation": 17713, "user_id": 226648, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/3196df423fd95dc4fce7dfadb8ec9953?s=128&d=identicon&r=PG", "display_name": "el.pescado", "link": "https://stackoverflow.com/users/226648/el-pescado"}, "edited": false, "score": 0, "creation_date": 1501739761, "post_id": 45472754, "comment_id": 77912161, "body": "See <code>ldd helloworld</code>."}, {"owner": {"reputation": 17713, "user_id": 226648, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/3196df423fd95dc4fce7dfadb8ec9953?s=128&d=identicon&r=PG", "display_name": "el.pescado", "link": "https://stackoverflow.com/users/226648/el-pescado"}, "edited": false, "score": 0, "creation_date": 1501739843, "post_id": 45472754, "comment_id": 77912190, "body": "BTW. <code>stdio.h</code> is not a library. It&#39;s header file, some kind of &quot;operating manual&quot; on how to use a library (a standard library in this case) for compiler."}, {"owner": {"reputation": 5162, "user_id": 2785528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fc85984f1234637fa4ec24d93ae51bc?s=128&d=identicon&r=PG&f=1", "display_name": "2785528", "link": "https://stackoverflow.com/users/2785528/2785528"}, "reply_to_user": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1501771660, "post_id": 45472754, "comment_id": 77936297, "body": "@AjayBrahmakshatriya - you are right, I overlooked the .c of the compile command.  Sorry.  I have removed my comment."}], "answers": [{"comments": [{"owner": {"reputation": 5162, "user_id": 2785528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fc85984f1234637fa4ec24d93ae51bc?s=128&d=identicon&r=PG&f=1", "display_name": "2785528", "link": "https://stackoverflow.com/users/2785528/2785528"}, "edited": false, "score": 0, "creation_date": 1501772105, "post_id": 45472931, "comment_id": 77936672, "body": "Perhaps your next question (if not already answered) might be where / how to find the library (with stdio functions) that gets linked."}], "tags": [], "owner": {"reputation": 5162, "user_id": 2785528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fc85984f1234637fa4ec24d93ae51bc?s=128&d=identicon&r=PG&f=1", "display_name": "2785528", "link": "https://stackoverflow.com/users/2785528/2785528"}, "is_accepted": false, "score": 0, "last_activity_date": 1501772243, "last_edit_date": 1501772243, "creation_date": 1501719792, "answer_id": 45472931, "question_id": 45472754, "link": "https://stackoverflow.com/questions/45472754/static-and-dynamic-linking-using-gcc/45472931#45472931", "title": "static and dynamic linking using gcc", "body": "<blockquote>\n  <p>which type of linking is this?? so the stdio.h is statically or\n  dynamically linked to my project???</p>\n</blockquote>\n\n<p>stdio.h is not linked, it is a header file, and contains code / text, no compiled objects.</p>\n\n<p>The normal link process prefers the '.so' library over the '.a' archive when both are found in the same directory.  Your simple command is linking with the .so (if that is in the correct path) or the .a (if that is found in a path with no .so equivalent).</p>\n\n<p>To achieve static linking, you have several choices, including</p>\n\n<pre><code>1) copy the '.a' archive to a directory you create, then specify that \ndirectory (-L)\n\n2) specify the path to the '.a' in the build command.   Boost example:\n\n$(CC) $(CC_FLAGS)  $&lt;  /usr/local/lib/libboost_chrono.a  -o $@  $(LIB_DIRs) $(LIB_NMs)\n</code></pre>\n\n<p>I have used both techniques, I find the first easier.  </p>\n\n<p>Note that archive code might refer to symbols in another archive.  You can command the linker to search a library multiple times.</p>\n\n<p>If you let the build link with the .so, this does not pull in a copy of the entire .so into the build.  Instead, the .so (the entire lib) is loaded into memory (if not already there) at run-time, after the program starts.  For most applications, this is considered a 'small' start-up performance hit as the program adjusts its memory map (auto-magically behind the scenes) Note that the app itself can control when to load the .so, called dynamic library.</p>\n\n<hr>\n\n<p>Unrelated:</p>\n\n<pre><code>// If your C++ 'Hello World' has no class ... why bother?\n#include &lt;iostream&gt;\n\nclass Hello_t {\npublic:\n   Hello_t()  { std::cout &lt;&lt; \"\\n  Hello\"  &lt;&lt; std::flush; }\n   ~Hello_t() { std::cout &lt;&lt;    \"World!\" &lt;&lt; std::endl; }\n   void operator() () { std::cout &lt;&lt; \" C++ \"; }\n};\nint main(int, char**) { Hello_t()(); }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 8002, "user_id": 1143850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2927fac544c9960cd5433688fe4cae1d?s=128&d=identicon&r=PG", "display_name": "Serge", "link": "https://stackoverflow.com/users/1143850/serge"}, "is_accepted": false, "score": 1, "last_activity_date": 1501722805, "creation_date": 1501722805, "answer_id": 45473253, "question_id": 45472754, "link": "https://stackoverflow.com/questions/45472754/static-and-dynamic-linking-using-gcc/45473253#45473253", "title": "static and dynamic linking using gcc", "body": "<p>Libraries are mostly used as shared resources so, that several different programs can reuse the same pre-compiled code in some manner. Some libraries come as standard libraries which are delivered with the operating system and/or the compiler package. Some libraries come with other third party projects.</p>\n\n<p>When you run just <code>gcc</code> in the manner of your example, you really run a compiler driver which provides you with few compilation-related functions, calling different parts of the compilation process and finally linking your application with a few standard libraries. The type of the libraries is chosen based on the qualifiers you provide. By default it will try to find dynamic (shared) libraries and if missing will attempt for static. Unless you tell it to use static libs only (-static).</p>\n\n<p>When you link to project libraries you tell the gcc/g++ which libraries to use in a manner (-lname). In such a way it will do the same as with the standard libraries, looking for '.so' first and '.a' second, unless -static is used. You can directly specify the path to the full library name as well, actually telling it which library to use. There are several other qualifiers which control the linking process, please look man for 'g++' and 'ld'.</p>\n\n<p>A library must contain real program code and data. The way it is linked to the main executable (and other libraries) is through symbol tables which are parts of the libraries. A symbol table contains entries for global functions an data.</p>\n\n<p>There is a slight difference in the structure of the shared and static libs. The former one is actually a pre-linked object, similar to an executable image with some extra info related to the symbols and relocation (such a library can be loaded at any address in the memory  and still should work correctly). The static library is actually an archive of '.o' files, ready for a full-blown linking. </p>\n\n<p>The usual steps to create a library is to compile multiple parts of your program into '.o' files which in turn could be linked in a shared library by 'ld' (or g++)  or archived in .a with 'ar'. Afterwards you can use them for linking in a manner described above.</p>\n\n<p>An object file (.o) is created one per a .cpp source file. The source file contains code and can include any number of header files, as 'stdio.h' in your case (or cstdio) or whatever. These files become a part of the source which is insured by the cpp preprocessor. The latter takes care of macros and flattening all the #include hierarchies so that the compiler sees only a single text stream which it converts into '.o'. In general header files should not contain executable code, but declarations and macros, though it is not always true. But it does not matter since they become welded with the main source file.</p>\n\n<p>Hope this would explain it. </p>\n"}], "owner": {"reputation": 11, "user_id": 8408433, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b29725cd03dda064b95acd014113079?s=128&d=identicon&r=PG&f=1", "display_name": "m.abdultawab", "link": "https://stackoverflow.com/users/8408433/m-abdultawab"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2105, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1501772243, "creation_date": 1501718244, "question_id": 45472754, "link": "https://stackoverflow.com/questions/45472754/static-and-dynamic-linking-using-gcc", "title": "static and dynamic linking using gcc", "body": "<p>I've been recently reading about static and dynamic linking and I understood the differences and how to create static and dynamic library and link it to my project</p>\n\n<p>But, a question came to my mind that I couldn't answer or find answer for it as It's a specific question ... when I compile my code on linux using the line</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint main()\n{\n  printf(\"hello, world!\\n\");\n}\n</code></pre>\n\n<p>compiling using this command</p>\n\n<pre><code>[root@host ~]# gcc helloworld.c -o helloworld\n</code></pre>\n\n<p>which type of linking is this??\nso the stdio.h is statically or dynamically linked to my project???</p>\n"}, {"tags": ["c++", "opengl", "sfml"], "comments": [{"owner": {"reputation": 36, "user_id": 8371176, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UJ0zs.jpg?s=128&g=1", "display_name": "SimplifiedCode", "link": "https://stackoverflow.com/users/8371176/simplifiedcode"}, "edited": false, "score": 0, "creation_date": 1501719863, "post_id": 45472704, "comment_id": 77906792, "body": "Anyone know? I would really appreciate it!"}, {"owner": {"reputation": 36, "user_id": 8371176, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UJ0zs.jpg?s=128&g=1", "display_name": "SimplifiedCode", "link": "https://stackoverflow.com/users/8371176/simplifiedcode"}, "edited": false, "score": 0, "creation_date": 1501720386, "post_id": 45472704, "comment_id": 77906903, "body": "I guess it&#39;s that weird lol!"}], "answers": [{"comments": [{"owner": {"reputation": 36, "user_id": 8371176, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UJ0zs.jpg?s=128&g=1", "display_name": "SimplifiedCode", "link": "https://stackoverflow.com/users/8371176/simplifiedcode"}, "edited": false, "score": 0, "creation_date": 1501775370, "post_id": 45473687, "comment_id": 77939161, "body": "It didn&#39;t work... it does the same thing but no flash of black and white when ever I click. it is always grey, and it just makes the cube in random fov&#39;s"}], "tags": [], "owner": {"reputation": 666, "user_id": 7144080, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/49830c5c842b4f51af8d4067ac5a37bd?s=128&d=identicon&r=PG&f=1", "display_name": "Omar Martinez", "link": "https://stackoverflow.com/users/7144080/omar-martinez"}, "is_accepted": false, "score": 1, "last_activity_date": 1501726284, "creation_date": 1501726284, "answer_id": 45473687, "question_id": 45472704, "link": "https://stackoverflow.com/questions/45472704/weird-glitch-involving-my-code/45473687#45473687", "title": "Weird glitch involving my code", "body": "<p>You never call <code>glClear(GL_COLOR_BUFFER_BIT)</code> before you draw, so there are always leftover fragments or some overlap in depth information. Adding a clear call should fix your issue.</p>\n"}, {"tags": [], "owner": {"reputation": 6058, "user_id": 3871028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbe44ff5c56628e85683c8918602c96?s=128&d=identicon&r=PG&f=1", "display_name": "Ripi2", "link": "https://stackoverflow.com/users/3871028/ripi2"}, "is_accepted": false, "score": 0, "last_activity_date": 1501792763, "creation_date": 1501792763, "answer_id": 45494108, "question_id": 45472704, "link": "https://stackoverflow.com/questions/45472704/weird-glitch-involving-my-code/45494108#45494108", "title": "Weird glitch involving my code", "body": "<p>Call <code>glPushMatrix</code> before <code>gluPerspective</code> and <code>glPopMatrix</code> at the end of <code>createblock</code></p>\n"}], "owner": {"reputation": 36, "user_id": 8371176, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UJ0zs.jpg?s=128&g=1", "display_name": "SimplifiedCode", "link": "https://stackoverflow.com/users/8371176/simplifiedcode"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 1, "answer_count": 2, "score": -1, "last_activity_date": 1501792763, "creation_date": 1501717853, "last_edit_date": 1501792306, "question_id": 45472704, "link": "https://stackoverflow.com/questions/45472704/weird-glitch-involving-my-code", "title": "Weird glitch involving my code", "body": "<p>So today, I was messing around with some examples and decided I wanted to make an app. So I attempted. When I click once, the screen becomes black, another click then white, and after some spamming the block appears, clicking again makes the background go black, another click, then white. After some more spamming there is another block inside the block, pictures are attached.</p>\n\n<p><strong>CODE:</strong></p>\n\n<pre><code>#include \"SFML/Graphics.hpp\"\n#include \"SFML/OpenGL.hpp\"\n#include &lt;GL\\GLU.h&gt;\n#include &lt;iostream&gt;\n#include \"cube.cpp\"\n\nvoid createblock() {\n\n    gluPerspective(90.f, 1.f, 1.f, 300.0f);\n    glClearColor(0.3f, 0.3f, 0.3f, 0.f);\n    glMatrixMode(GL_PROJECTION);\n    glEnable(GL_DEPTH_TEST);\n    glDepthMask(GL_TRUE);\n\n    glBegin(GL_QUADS);\n    glVertex3f(-50.f, -50.f, -50.f);\n    glVertex3f(-50.f, 50.f, -50.f);\n    glVertex3f(50.f, 50.f, -50.f);\n    glVertex3f(50.f, -50.f, -50.f);\n\n\n    glVertex3f(-50.f, -50.f, 50.f);\n    glVertex3f(-50.f, 50.f, 50.f);\n    glVertex3f(50.f, 50.f, 50.f);\n    glVertex3f(50.f, -50.f, 50.f);\n\n    glColor3f(1, 0, 1);\n    glVertex3f(-50.f, -50.f, -50.f);\n    glVertex3f(-50.f, 50.f, -50.f);\n    glVertex3f(-50.f, 50.f, 50.f);\n    glVertex3f(-50.f, -50.f, 50.f);\n\n    glColor3f(0, 1, 0);\n    glVertex3f(50.f, -50.f, -50.f);\n    glVertex3f(50.f, 50.f, -50.f);\n    glVertex3f(50.f, 50.f, 50.f);\n    glVertex3f(50.f, -50.f, 50.f);\n\n    glColor3f(1, 1, 0);\n    glVertex3f(-50.f, -50.f, 50.f);\n    glVertex3f(-50.f, -50.f, -50.f);\n    glVertex3f(50.f, -50.f, -50.f);\n    glVertex3f(50.f, -50.f, 50.f);\n\n    glColor3f(1, 0, 0);\n    glVertex3f(-50.f, 50.f, 50.f);\n    glVertex3f(-50.f, 50.f, -50.f);\n    glVertex3f(50.f, 50.f, -50.f);\n    glVertex3f(50.f, 50.f, 50.f);\n\n    glEnd();\n}\n\nsf::RenderWindow window(sf::VideoMode(800, 600), \"SimpleBlocks\");\nsf::Event maine;\n\nint main() {\n\n    while (window.isOpen()) {\n        // load defaults here\n\n        while (window.pollEvent(maine)) {\n            // events here\n            if (maine.type == sf::Event::Closed) {\n                window.close();\n            } \n            if (maine.type == sf::Event::MouseButtonPressed) { \n                createblock();\n                window.display();\n\n                // make block later   \n            }\n        }\n    }\n}\n</code></pre>\n\n<p><strong>IMAGES:</strong></p>\n\n<p><a href=\"https://imgur.com/a/72Ngy\" rel=\"nofollow noreferrer\">imgur album here</a></p>\n"}, {"tags": ["c++", "c++14", "metaprogramming", "variadic-templates", "typetraits"], "comments": [{"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 4, "creation_date": 1501716787, "post_id": 45472535, "comment_id": 77906064, "body": "What does mean for a free function to be const?"}, {"owner": {"reputation": 6960, "user_id": 1611307, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/aac7f9a85388beb45df5ee4366240473?s=128&d=identicon&r=PG", "display_name": "ssb", "link": "https://stackoverflow.com/users/1611307/ssb"}, "reply_to_user": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1501717146, "post_id": 45472535, "comment_id": 77906138, "body": "In this case, I am checking if all the pointers and references passed in as arguments are <code>const</code> qualified. This is not sufficient for the function to not change state of the program, but I am assuming no global variables are accessed/changed in the function."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 2, "creation_date": 1501717306, "post_id": 45472535, "comment_id": 77906173, "body": "What would you even do with such a trait? You can&#39;t really ever get this right - in addition to global state, a passed on <code>T const*</code> could still have a <code>mutable</code> member that gets modified, etc."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1501719343, "post_id": 45472535, "comment_id": 77906677, "body": "&quot;<i>I am assuming no global variables are accessed/changed in the function</i>&quot; - there is no way for the compiler to validate that. A free function can&#39;t be <code>const</code> qualified, and may access globals other than its own parameters. A class method can be <code>const</code> qualified to prevent it from altering class data members (its <code>this</code> pointer is <code>const</code>), but it can still access globals and non-const members of other objects. In short, a function/method having <code>const</code> parameters does not make it truly <code>const</code> everywhere. What you are asking for requires a static analysis tool instead."}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1501726280, "post_id": 45472535, "comment_id": 77908167, "body": "As to the narrow question asked, <a href=\"http://en.cppreference.com/w/cpp/types/conjunction\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/types/conjunction</a>. But I agree with others that this is not a useful trait to have."}], "answers": [{"comments": [{"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 0, "creation_date": 1501877447, "post_id": 45473961, "comment_id": 77990911, "body": "Rather than writing <code>all_of</code> as <code>constexpr</code> functions, there&#39;s a nice efficient solution of <code>template &lt;bool... Bs&gt; constexpr bool all_of_v = Bs &amp;&amp; ...;</code> in C++17, or <code>template &lt;bool... Bs&gt; constexpr bool all_of_v = std::is_same&lt;bools&lt;true, Bs...&gt;, bools&lt;Bs..., true&gt;&gt;::value;</code> where <code>bools</code> is a type like <code>template &lt;bools... Bs&gt; struct bools {};</code>"}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 1, "creation_date": 1502142640, "post_id": 45473961, "comment_id": 78072495, "body": "@justin I would make those integral constant values myself not bool constants"}], "tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": true, "score": 2, "last_activity_date": 1501728343, "creation_date": 1501728343, "answer_id": 45473961, "question_id": 45472535, "link": "https://stackoverflow.com/questions/45472535/finding-if-function-is-const/45473961#45473961", "title": "Finding if function is const", "body": "<p>First find an implementation of C++17 std apply.</p>\n\n<p>Next write <code>all_of</code> as a <code>constexpr</code> template functions.</p>\n\n<p>Next, write</p>\n\n<pre><code>struct all_of_t{\n  constexpr all_of_t(){}\n  template&lt;class...Bs&gt;\n  constexpr bool operator()(Bs...bs)const{ return all_of(bs...); }\n};\n</code></pre>\n\n<p>Finally:</p>\n\n<pre><code>static const std::tuple&lt;std::integral_constant&lt;bool,\n  (!std::is_reference&lt;Args&gt;{}&amp;&amp;!std::is_pointer&lt;Args&gt;{})||std::is_const&lt;Args&gt;{}&gt;...\n&gt; arg_state;\nstatic const bool value = apply( all_of_t, arg_state );\n</code></pre>\n\n<p>each step should be easy to search for on SO.</p>\n"}], "owner": {"reputation": 6960, "user_id": 1611307, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/aac7f9a85388beb45df5ee4366240473?s=128&d=identicon&r=PG", "display_name": "ssb", "link": "https://stackoverflow.com/users/1611307/ssb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 99, "favorite_count": 1, "accepted_answer_id": 45473961, "answer_count": 1, "score": 2, "last_activity_date": 1501728343, "creation_date": 1501716603, "question_id": 45472535, "link": "https://stackoverflow.com/questions/45472535/finding-if-function-is-const", "title": "Finding if function is const", "body": "<p>I am trying to find if a lambda or a free function is const using C++14 metaprogramming.</p>\n\n<p>My current strategy is to use the <code>std::is_reference</code>, <code>std::is_pointer</code> and <code>std::is_const</code> on each of the arguments. (Currently ignoring global variables...)</p>\n\n<p>So the type object that checks looks something like this...</p>\n\n<pre><code>template &lt;typename F&gt;\nstruct is_const_func: public function_traits&lt;decltype(&amp;F::operator())&gt; {};\n\ntemplate &lt;typename ClassType, typename ReturnType, typename... Args&gt; \nstruct is_const_func&lt;ReturnType (ClassType::*)(Args...)&gt; {\n  static const std::tuple&lt;std::is_reference&lt;Args&gt;...&gt; ref;\n  static const std::tuple&lt;std::is_pointer&lt;Args&gt;...&gt; ptr;\n  static const std::tuple&lt;std::is_const&lt;Args&gt;...&gt; con;\n  static const bool value = ? // Reduce(&amp;&amp;, (!ref &amp;&amp; !ptr) || con)\n}\n</code></pre>\n\n<p>I want to know how to implement the <code>value</code>. Basically I want to take the ith element from each of the tuples and compute <code>(!ref[i] &amp;&amp; !ptr[i]) || con[I]</code> and reduce the resulting tuple with <code>&amp;&amp;</code>, all at compile time.</p>\n\n<p>How do I implement this? Is there a better way to make this check?</p>\n"}, {"tags": ["c++", "reference", "extern"], "answers": [{"comments": [{"owner": {"reputation": 369, "user_id": 1461209, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/81a4f20653793ec73928ae09b38dcfd3?s=128&d=identicon&r=PG", "display_name": "R.Bahl", "link": "https://stackoverflow.com/users/1461209/r-bahl"}, "edited": false, "score": 0, "creation_date": 1501724689, "post_id": 45472426, "comment_id": 77907794, "body": "Hi Devin .. Thanks for your reply ! Is this mentioned some where in the standard ?"}, {"owner": {"reputation": 386, "user_id": 8242696, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30d156727d19a63b70ba89bf028f23e8?s=128&d=identicon&r=PG&f=1", "display_name": "Devin L.", "link": "https://stackoverflow.com/users/8242696/devin-l"}, "reply_to_user": {"reputation": 369, "user_id": 1461209, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/81a4f20653793ec73928ae09b38dcfd3?s=128&d=identicon&r=PG", "display_name": "R.Bahl", "link": "https://stackoverflow.com/users/1461209/r-bahl"}, "edited": false, "score": 0, "creation_date": 1501731705, "post_id": 45472426, "comment_id": 77909261, "body": "The standard imposes no requirements when it comes to undefined behavior. Sorry I can&#39;t refer you to the actual documentation since it costs money to acquire. I just know this fact from various posts on Stack Overflow."}], "tags": [], "owner": {"reputation": 386, "user_id": 8242696, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30d156727d19a63b70ba89bf028f23e8?s=128&d=identicon&r=PG&f=1", "display_name": "Devin L.", "link": "https://stackoverflow.com/users/8242696/devin-l"}, "is_accepted": false, "score": 0, "last_activity_date": 1501715773, "creation_date": 1501715773, "answer_id": 45472426, "question_id": 45472334, "link": "https://stackoverflow.com/questions/45472334/uninitialized-reference-in-c-declared-using-extern/45472426#45472426", "title": "Uninitialized reference in C++ (declared using extern)", "body": "<p>This is undefined behavior. Different compilers will have different ways of dealing with this. For example, Visual Studio did raise an error when I tried to do what you did.</p>\n"}], "owner": {"reputation": 369, "user_id": 1461209, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/81a4f20653793ec73928ae09b38dcfd3?s=128&d=identicon&r=PG", "display_name": "R.Bahl", "link": "https://stackoverflow.com/users/1461209/r-bahl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 143, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1501715896, "creation_date": 1501715118, "question_id": 45472334, "link": "https://stackoverflow.com/questions/45472334/uninitialized-reference-in-c-declared-using-extern", "title": "Uninitialized reference in C++ (declared using extern)", "body": "<p>I am not able to explain why the following code construct in C++ is not giving any compilation errors or warnings even with -Wall option.</p>\n\n<p>Say there is a header file, referencesTest.hpp, where a reference to int is declared using extern like so :</p>\n\n<pre><code>#ifndef REFERENCES_TEST_HPP\n#define REFERENCES_TEST_HPP\n\nextern int &amp;refToInt;\n\n#endif /* REFERENCES_TEST_HPP */\n</code></pre>\n\n<p>In the corresponding source file, referencesTest.cpp, we then have the reference defined but is left uninitialized and we try to assign it a value at run time like so:</p>\n\n<pre><code>#include \"referencesTest.hpp\"\n\n//Why no error/warning is raised here ?\nint &amp;refToInt;\n\nint main()\n{\n        int testVariable = 8;\n\n        //This crashes on run time with Seg fault but no compilation error/warnings.\n        refToInt = testVariable;\n\n        return 0;\n}\n</code></pre>\n\n<p>When compiled with GCC version 5.4.0</p>\n\n<pre><code>g++ -Wall referencesTest.cpp -o output\n</code></pre>\n\n<p>it crashes with segmentation fault at run time but why did compiler not raise any errors/warning here?\nMy understating was that references in C++ always need to initialized when they are declared. \nCan someone help explain why the above code compilers ?</p>\n"}, {"tags": ["c++", "multiple-inheritance", "virtual-inheritance"], "comments": [{"owner": {"reputation": 8856, "user_id": 4442671, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh4.googleusercontent.com/-nSzcZygTwLs/AAAAAAAAAAI/AAAAAAAAADA/virGKG3deIo/photo.jpg?sz=128", "display_name": "Frank", "link": "https://stackoverflow.com/users/4442671/frank"}, "edited": false, "score": 1, "creation_date": 1501714946, "post_id": 45472286, "comment_id": 77905615, "body": "&quot;Is there any situation where <b>blank</b> is useful and works?&quot; Will default to yes for basically anything in C++ with enough effort."}, {"owner": {"reputation": 121, "user_id": 8358955, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/caea907ba96e55150bfaa66230584127?s=128&d=identicon&r=PG&f=1", "display_name": "Gergely Tomcs&#225;nyi", "link": "https://stackoverflow.com/users/8358955/gergely-tomcs%c3%a1nyi"}, "reply_to_user": {"reputation": 8856, "user_id": 4442671, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh4.googleusercontent.com/-nSzcZygTwLs/AAAAAAAAAAI/AAAAAAAAADA/virGKG3deIo/photo.jpg?sz=128", "display_name": "Frank", "link": "https://stackoverflow.com/users/4442671/frank"}, "edited": false, "score": 0, "creation_date": 1501715583, "post_id": 45472286, "comment_id": 77905772, "body": "@Frank Sorry, but you didn&#39;t answer my question. I am curious, is there any specific problem where the second (U-shape) hierarchy is a great idea and also a good practice to use (with a given example)."}, {"owner": {"reputation": 22377, "user_id": 2288659, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/bBg8v.png?s=128&g=1", "display_name": "Silvio Mayolo", "link": "https://stackoverflow.com/users/2288659/silvio-mayolo"}, "edited": false, "score": 0, "creation_date": 1501717040, "post_id": 45472286, "comment_id": 77906114, "body": "The C++ philosophy is that you don&#39;t pay for what you don&#39;t use. If you don&#39;t <i>need</i> virtual inheritance, then according to the principles on which C++ was built, you shouldn&#39;t have to pay the performance costs associated with building that hierarchy."}], "answers": [{"comments": [{"owner": {"reputation": 121, "user_id": 8358955, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/caea907ba96e55150bfaa66230584127?s=128&d=identicon&r=PG&f=1", "display_name": "Gergely Tomcs&#225;nyi", "link": "https://stackoverflow.com/users/8358955/gergely-tomcs%c3%a1nyi"}, "edited": false, "score": 0, "creation_date": 1501718337, "post_id": 45472590, "comment_id": 77906432, "body": "Nice explanation, thanks! This proves why <i>virtual inheritance</i> makes sense. I need to get good at thinking as a compiler."}, {"owner": {"reputation": 133051, "user_id": 501250, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c39ae7fe43cf30bc0f4d4051defcbd87?s=128&d=identicon&r=PG", "display_name": "cdhowie", "link": "https://stackoverflow.com/users/501250/cdhowie"}, "edited": false, "score": 0, "creation_date": 1501855252, "post_id": 45472590, "comment_id": 77978494, "body": "But the definition of a class <i>does</i> depend on the definition of its superclass(es)! You can&#39;t inherit from an incomplete type, for example. The definitions of <code>B</code> and <code>C</code> necessarily need to be known for <code>D</code> to inherit them."}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "reply_to_user": {"reputation": 133051, "user_id": 501250, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c39ae7fe43cf30bc0f4d4051defcbd87?s=128&d=identicon&r=PG", "display_name": "cdhowie", "link": "https://stackoverflow.com/users/501250/cdhowie"}, "edited": false, "score": 0, "creation_date": 1501858668, "post_id": 45472590, "comment_id": 77981022, "body": "@cdhowie Correct. I changed my wording in case it was unclear that I wasn&#39;t implying otherwise."}], "tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": true, "score": 0, "last_activity_date": 1501858590, "last_edit_date": 1501858590, "creation_date": 1501716991, "answer_id": 45472590, "question_id": 45472286, "link": "https://stackoverflow.com/questions/45472286/multiple-inheritance-usage-of-skipping-virtual-keyword-and-refusing-the-diamo/45472590#45472590", "title": "Multiple inheritance: usage of skipping &#39;virtual&#39; keyword and refusing the diamond hierarchy?", "body": "<blockquote>\n  <p>Is there any programming situation where the second hierarchy is useful and works?</p>\n</blockquote>\n\n<p>Although there might be, that becomes a less interesting question (in my opinion) after I've answered the other one.</p>\n\n<blockquote>\n  <p>Why do we have to tell the compiler (using the virtual keyword) that we want to create a \"diamond\" class hierarchy? Why does the compiler not generate it automatically?</p>\n</blockquote>\n\n<p>No, the compiler cannot generate it automatically.  That is why you have to tell the compiler explicitly when you want inheritance to be virtual.</p>\n\n<p>Assuming such automation existed, in order for the compiler to guess that the base <code>A</code> of <code>B</code> should be virtual, it would have to know that <code>A</code> is also the base of <code>C</code>, and that <code>B</code> and <code>C</code> are both bases of <code>D</code>. So, the meaning of the definition of <code>B</code> would depend on the definition of <code>D</code> (which also depends on <code>C</code>. Essentially, all classes that are part of same hierarchy will depend in all other classes in that hierarchy, except the very top base). But some classes of the hierarchy may be defined in completely different translation units that may be compiled at a completely different time than the others. The C++ compiler simply cannot assume that it has knowledge of all classes.</p>\n\n<p>There is one approach that would make this possible: Make all inheritance virtual. However, virtual inheritance has some (small, but non-zero) overhead, so this is not an ideal solution. Also, virtual inheritance makes static_cast to derived type impossible, so such cast would require dynamic_cast which requires Run Time Type Information and there is interest in allowing limited C++ implementations that lack RTTI support.</p>\n"}, {"tags": [], "owner": {"reputation": 133051, "user_id": 501250, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c39ae7fe43cf30bc0f4d4051defcbd87?s=128&d=identicon&r=PG", "display_name": "cdhowie", "link": "https://stackoverflow.com/users/501250/cdhowie"}, "is_accepted": false, "score": 1, "last_activity_date": 1501717097, "creation_date": 1501717097, "answer_id": 45472614, "question_id": 45472286, "link": "https://stackoverflow.com/questions/45472286/multiple-inheritance-usage-of-skipping-virtual-keyword-and-refusing-the-diamo/45472614#45472614", "title": "Multiple inheritance: usage of skipping &#39;virtual&#39; keyword and refusing the diamond hierarchy?", "body": "<p>Consider the case where <code>A</code> is a <a href=\"https://en.wikipedia.org/wiki/Visitor_pattern\" rel=\"nofollow noreferrer\">visitor</a> interface, while <code>B</code> and <code>C</code> implement this interface independently of each other, and need differing visitation behavior.</p>\n\n<pre><code>class A\n{\npublic:\n    virtual void visit(int) = 0;\n};\n\nclass B : virtual private A\n{\npublic:\n    virtual void visit(int) { }\n};\n\nclass C : virtual private A\n{\npublic:\n    virtual void visit(int) { }\n};\n\nclass D : public B, public C { };\n// error: virtual function 'A::visit' has more than one final overrider in 'D'\n</code></pre>\n\n<p>This <a href=\"http://coliru.stacked-crooked.com/a/101c087efc642b41\" rel=\"nofollow noreferrer\">does not compile</a>.  It is <em>desirable and necessary</em> in this case for <code>B</code> and <code>C</code> to retain separate <code>A</code> subobjects.  Removing the virtual inheritance in this example allows it to compile.</p>\n"}], "owner": {"reputation": 121, "user_id": 8358955, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/caea907ba96e55150bfaa66230584127?s=128&d=identicon&r=PG&f=1", "display_name": "Gergely Tomcs&#225;nyi", "link": "https://stackoverflow.com/users/8358955/gergely-tomcs%c3%a1nyi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "accepted_answer_id": 45472590, "answer_count": 2, "score": 1, "last_activity_date": 1501858590, "creation_date": 1501714773, "last_edit_date": 1501718481, "question_id": 45472286, "link": "https://stackoverflow.com/questions/45472286/multiple-inheritance-usage-of-skipping-virtual-keyword-and-refusing-the-diamo", "title": "Multiple inheritance: usage of skipping &#39;virtual&#39; keyword and refusing the diamond hierarchy?", "body": "<p>I understand how and why do we have to use the <code>virtual</code> keyword to solve the \"diamond problem\", and create a class hierarchy like this:</p>\n\n<pre><code>   A\n  / \\\n /   \\\nB     C\n \\   /\n  \\ /\n   D\n</code></pre>\n\n<p>Code example:</p>\n\n<pre><code>class A { int a; public: A(int a) : a(a) {} };\nclass B : public virtual A { int b; public: B(int a, int b) : A(a), b(b) {} };\nclass C : public virtual A { int c; public: C(int a, int c) : A(a), c(c) {} };\nclass D : public B, public C { public: D(int a, int b, int c) : A(a), B(0, b), C(0, c) {} };\n</code></pre>\n\n<p>I couldn't find an answer to my question: <strong>Why do we have to tell the compiler (using the <code>virtual</code> keyword) that we want to create a \"diamond\" class hierarchy? Why does the compiler not generate it automatically?</strong>\nIf we don't use <code>virtual</code>, the compiler generates the class hierarchy below:</p>\n\n<pre><code>A     A\n|     |\n|     |\nB     C\n \\   /\n  \\ /\n   D\n</code></pre>\n\n<p>Is there any programming situation where the second hierarchy is useful and works?\n<strong>EDIT</strong> (to make my question clear): Why did they want us to use <code>virtual</code>? I suppose, the reason is that they wanted to give an option to us. Any example where the second class hierarchy is the best choice to use?</p>\n"}, {"tags": ["c++", "multithreading", "openmp"], "comments": [{"owner": {"reputation": 1457, "user_id": 2638548, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mkJxQ.jpg?s=128&g=1", "display_name": "dlasalle", "link": "https://stackoverflow.com/users/2638548/dlasalle"}, "edited": false, "score": 2, "creation_date": 1501715219, "post_id": 45472117, "comment_id": 77905689, "body": "Can you add specific platform information to your question (OS, hardware, compiler, OpenMP runtime, etc.)? Can you also try outputting <code>omp_in_parallel()</code> and <code>omp_get_num_threads()</code> before your parallel region? Can you also verify that OMP_NUM_THREADS is unset in your enviornment? Do you observe different behavior if you set it?"}, {"owner": {"reputation": 11, "user_id": 1687796, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f16aedd452688518111f3b2c3a5055a2?s=128&d=identicon&r=PG", "display_name": "Prashant Raina", "link": "https://stackoverflow.com/users/1687796/prashant-raina"}, "reply_to_user": {"reputation": 1457, "user_id": 2638548, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mkJxQ.jpg?s=128&g=1", "display_name": "dlasalle", "link": "https://stackoverflow.com/users/2638548/dlasalle"}, "edited": false, "score": 0, "creation_date": 1501773367, "post_id": 45472117, "comment_id": 77937683, "body": "Thanks, I&#39;ve added the info you suggested. I confirmed that the code outside the parallel region is not in a parallel region and <code>OMP_NUM_THREADS</code> is not declared."}, {"owner": {"reputation": 1457, "user_id": 2638548, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mkJxQ.jpg?s=128&g=1", "display_name": "dlasalle", "link": "https://stackoverflow.com/users/2638548/dlasalle"}, "edited": false, "score": 0, "creation_date": 1501776920, "post_id": 45472117, "comment_id": 77940271, "body": "Can you try adding a call to <code>getenv(&quot;OMP_NUM_THREADS&quot;);</code> from &lt;cstdlib&gt; to the start of your program to ensure it returns NULL? Also, can you expand your code snippet to be complete (i.e., like how @FlashMcQueen wrapped it in <code>main()</code>), and confirm the same behavior? This will help us to rule out some library interfering with threading."}, {"owner": {"reputation": 11, "user_id": 1687796, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f16aedd452688518111f3b2c3a5055a2?s=128&d=identicon&r=PG", "display_name": "Prashant Raina", "link": "https://stackoverflow.com/users/1687796/prashant-raina"}, "reply_to_user": {"reputation": 1457, "user_id": 2638548, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mkJxQ.jpg?s=128&g=1", "display_name": "dlasalle", "link": "https://stackoverflow.com/users/2638548/dlasalle"}, "edited": false, "score": 0, "creation_date": 1501880905, "post_id": 45472117, "comment_id": 77992421, "body": "<code>getenv(&quot;OMP_NUM_THREADS&quot;)</code> is null. As for the &quot;complete snippet&quot;, I&#39;ve already mentioned that this problem does not occur in a simple command-line program which only tests OpenMP. What&#39;s more, setting OMP_NUM_THREADS before running has no effect. I guess that means the problem is coming from a third-party library?"}, {"owner": {"reputation": 11, "user_id": 1687796, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f16aedd452688518111f3b2c3a5055a2?s=128&d=identicon&r=PG", "display_name": "Prashant Raina", "link": "https://stackoverflow.com/users/1687796/prashant-raina"}, "reply_to_user": {"reputation": 1457, "user_id": 2638548, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mkJxQ.jpg?s=128&g=1", "display_name": "dlasalle", "link": "https://stackoverflow.com/users/2638548/dlasalle"}, "edited": false, "score": 0, "creation_date": 1501881290, "post_id": 45472117, "comment_id": 77992558, "body": "What&#39;s more, setting OMP_NUM_THREADS in the environment does not affect <code>omp_get_max_threads</code>."}, {"owner": {"reputation": 274, "user_id": 4326276, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6ea3e8fc07e2dbe03342d93aec6a53dd?s=128&d=identicon&r=PG&f=1", "display_name": "itsnevertoobadtoaskforhelp", "link": "https://stackoverflow.com/users/4326276/itsnevertoobadtoaskforhelp"}, "edited": false, "score": 0, "creation_date": 1502030812, "post_id": 45472117, "comment_id": 78026337, "body": "Does the value change when you explicitly do <code>omp_set_num_threads</code>."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 1687796, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f16aedd452688518111f3b2c3a5055a2?s=128&d=identicon&r=PG", "display_name": "Prashant Raina", "link": "https://stackoverflow.com/users/1687796/prashant-raina"}, "edited": false, "score": 0, "creation_date": 1501773293, "post_id": 45478463, "comment_id": 77937613, "body": "That makes sense, but what on earth could be calling <code>omp_set_num_threads</code>? I did a full search and it does not occur in my code."}, {"owner": {"reputation": 591, "user_id": 5773004, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/1b56505987c4fc700395dc53896785e1?s=128&d=identicon&r=PG&f=1", "display_name": "FlashMcQueen", "link": "https://stackoverflow.com/users/5773004/flashmcqueen"}, "reply_to_user": {"reputation": 11, "user_id": 1687796, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f16aedd452688518111f3b2c3a5055a2?s=128&d=identicon&r=PG", "display_name": "Prashant Raina", "link": "https://stackoverflow.com/users/1687796/prashant-raina"}, "edited": false, "score": 0, "creation_date": 1501773608, "post_id": 45478463, "comment_id": 77937857, "body": "Then if you are sure omp_set_num_threads(1) is not called, try to add omp_get_thread_num outside the single section and inside the parallel section. (second explanation)"}, {"owner": {"reputation": 11, "user_id": 1687796, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f16aedd452688518111f3b2c3a5055a2?s=128&d=identicon&r=PG", "display_name": "Prashant Raina", "link": "https://stackoverflow.com/users/1687796/prashant-raina"}, "edited": false, "score": 0, "creation_date": 1501775763, "post_id": 45478463, "comment_id": 77939412, "body": "Already tried that. Without setting num_threads manually, <code>omp_get_thread_num</code> is always 0."}, {"owner": {"reputation": 591, "user_id": 5773004, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/1b56505987c4fc700395dc53896785e1?s=128&d=identicon&r=PG&f=1", "display_name": "FlashMcQueen", "link": "https://stackoverflow.com/users/5773004/flashmcqueen"}, "reply_to_user": {"reputation": 11, "user_id": 1687796, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f16aedd452688518111f3b2c3a5055a2?s=128&d=identicon&r=PG", "display_name": "Prashant Raina", "link": "https://stackoverflow.com/users/1687796/prashant-raina"}, "edited": false, "score": 0, "creation_date": 1501776441, "post_id": 45478463, "comment_id": 77939922, "body": "Hum outside the pragma omp single section this is weird"}], "tags": [], "owner": {"reputation": 591, "user_id": 5773004, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/1b56505987c4fc700395dc53896785e1?s=128&d=identicon&r=PG&f=1", "display_name": "FlashMcQueen", "link": "https://stackoverflow.com/users/5773004/flashmcqueen"}, "is_accepted": false, "score": 1, "last_activity_date": 1502375122, "last_edit_date": 1502375122, "creation_date": 1501747921, "answer_id": 45478463, "question_id": 45472117, "link": "https://stackoverflow.com/questions/45472117/omp-get-max-threads-returns-1-in-parallel-region-but-it-should-be-8/45478463#45478463", "title": "omp_get_max_threads() returns 1 in parallel region, but it should be 8", "body": "<p>Your program behaves exactly as if omp_set_num_threads(1) was called before.</p>\n\n<p>Considering this snippet:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;vector&gt;\n#include \"omp.h\"\nint main() {\n\nomp_set_num_threads(1);\n\nstd::cout &lt;&lt; \"before parallel section: \" &lt;&lt; std::endl;\nstd::cout &lt;&lt; \"Num threads = \" &lt;&lt; omp_get_num_threads() &lt;&lt; std::endl;\nstd::cout &lt;&lt; \"Max threads = \" &lt;&lt; omp_get_max_threads() &lt;&lt; std::endl;\n\n//without num_threads(5), only 1 thread is created\n#pragma omp parallel num_threads(5) \n  {          \n      #pragma omp single\n      {\n          std::cout &lt;&lt; \"inside parallel section: \" &lt;&lt; std::endl;\n          std::cout &lt;&lt; \"Num threads = \" &lt;&lt; omp_get_num_threads() &lt;&lt; std::endl;\n          std::cout &lt;&lt; \"Max threads = \" &lt;&lt; omp_get_max_threads() &lt;&lt; std::endl;\n      }\n  }\n\n  return 0;\n}\n</code></pre>\n\n<p>the output is </p>\n\n<pre><code>before parallel section: \nNum threads = 1    \nMax threads = 1\ninside parallel section:  \nNum threads = 5\nMax threads = 1\n</code></pre>\n\n<p>When I run it by setting the number of threads by 4 instead of 1 (8 on your machine), the output is as expected:</p>\n\n<pre><code>before parallel section: \nNum threads = 1\nMax threads = 4\ninside parallel section: \nNum threads = 5\nMax threads = 4\n</code></pre>\n\n<p>Have you tried to call omp_set_num_threads(8) at the begining of your code? Or have you set the number of thread to 1 before your program (for example by inside a function calling this...)?</p>\n\n<p>One other explanation could be that openMP API doesn't find it necessary to have more than one thread as only a single section is implemented inside the parallel section. In this case try to add some code that could be executed by several threads to run faster (i.e incrementing all the values of a large array of integers or calling omp_get_thread_num()) outside the single section but inside the parallel section and the number of threads should be different. Calling omp_set_num_threads only sets the upper limit for the number of threads used.</p>\n"}, {"tags": [], "owner": {"reputation": 1807, "user_id": 1900441, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa3540494c1cb556bf1f517992b172fe?s=128&d=identicon&r=PG", "display_name": "Jim Cownie", "link": "https://stackoverflow.com/users/1900441/jim-cownie"}, "is_accepted": false, "score": 1, "last_activity_date": 1501844176, "last_edit_date": 1592644375, "creation_date": 1501844176, "answer_id": 45505026, "question_id": 45472117, "link": "https://stackoverflow.com/questions/45472117/omp-get-max-threads-returns-1-in-parallel-region-but-it-should-be-8/45505026#45505026", "title": "omp_get_max_threads() returns 1 in parallel region, but it should be 8", "body": "<p>The values you are seeing inside the parallel region seem correct (assuming that <code>OMP_NESTED</code> is not true). <code>omp_get_max_threads()</code> returns the maximum number of threads that you might obtain if you were to go parallel form the current thread. Since you are already inside a parallel region (and we're assuming that nested parallelism is disabled) that will be one.</p>\n<blockquote>\n<p>3.2.3 omp_get_max_threads</p>\n<p>Summary<br />\nThe omp_get_max_threads routine returns an upper bound on the number of threads that could be used\nto form a new team if a parallel construct without a num_threads\nclause were encountered after execution returns from this routine.</p>\n</blockquote>\n<p>That doesn't explain why you see the value one outside the parallel region, though. (But it does answer the question in the title, to which the answer is &quot;one is the correct answer&quot;).</p>\n"}], "owner": {"reputation": 11, "user_id": 1687796, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f16aedd452688518111f3b2c3a5055a2?s=128&d=identicon&r=PG", "display_name": "Prashant Raina", "link": "https://stackoverflow.com/users/1687796/prashant-raina"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6178, "favorite_count": 1, "answer_count": 2, "score": 1, "last_activity_date": 1502375122, "creation_date": 1501713545, "last_edit_date": 1501773163, "question_id": 45472117, "link": "https://stackoverflow.com/questions/45472117/omp-get-max-threads-returns-1-in-parallel-region-but-it-should-be-8", "title": "omp_get_max_threads() returns 1 in parallel region, but it should be 8", "body": "<p>I'm compiling a complex C++ project on Linux which uses OpenMP, compiled with CMake and GCC 7.\nThe strange problem I'm encountering in this particular project is that OpenMP is clearly working, but it thinks that only 1 thread is supported, when it should be 8. However, if I manually specify the number of threads, it does indeed accelerate the code.</p>\n\n<pre><code>logOut &lt;&lt; \"In parallel? \" &lt;&lt; omp_in_parallel() &lt;&lt; std::endl;\nlogOut &lt;&lt; \"Num threads = \" &lt;&lt; omp_get_num_threads() &lt;&lt; std::endl;\nlogOut &lt;&lt; \"Max threads = \" &lt;&lt; omp_get_max_threads() &lt;&lt; std::endl;\n\nlogOut &lt;&lt; \"Entering my parallel region: \" &lt;&lt; std::endl;\n\n//without num_threads(5), only 1 thread is created\n#pragma omp parallel num_threads(5) \n  {          \n      #pragma omp single nowait\n      {\n          logOut &lt;&lt; \"In parallel? \" &lt;&lt; omp_in_parallel() &lt;&lt; std::endl;\n          logOut &lt;&lt; \"Num threads = \" &lt;&lt; omp_get_num_threads() &lt;&lt; std::endl;\n          logOut &lt;&lt; \"Max threads = \" &lt;&lt; omp_get_max_threads() &lt;&lt; std::endl;\n      }\n  }\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>[openmp_test] In parallel? 0\n[openmp_test] Num threads = 1\n[openmp_test] Max threads = 1\n[openmp_test] Entering my parallel region: \n[openmp_test] In parallel? 1\n[openmp_test] Num threads = 5\n[openmp_test] Max threads = 1\n</code></pre>\n\n<p>What makes it even stranger is that a simple test OpenMP program directly correctly reports the maximum number of threads as 8, both inside and outside a parallel region.\nI've been combing through all the CMake files trying to find any indicator of why this project behaves differently, but I've turned up nothing so far. There is no mention of <code>omp_set_num_threads</code> in any of my project files, and I can confirm that <code>OMP_NUM_THREADS</code> is not declared. Furthermore, this problem never happened when I compiled the same project on Windows with MSVC.</p>\n\n<p>Any ideas what the problem could be?</p>\n\n<p>(EDIT: I've expanded the code sample to show that it is not a nested parallel block)</p>\n\n<p>CPU: Intel(R) Core(TM) i7-6700K</p>\n\n<p>OS: Manjaro Linux 17.0.2</p>\n\n<p>Compiler: GCC 7.1.1 20170630</p>\n\n<p>_OPENMP = 201511 (I'm guessing that means OpenMP 4.5)</p>\n"}, {"tags": ["javascript", "c++", "rgb", "photoshop", "hsl"], "comments": [{"owner": {"reputation": 21326, "user_id": 1679849, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lpvxY.png?s=128&g=1", "display_name": "r3mainer", "link": "https://stackoverflow.com/users/1679849/r3mainer"}, "edited": false, "score": 0, "creation_date": 1501712797, "post_id": 45471944, "comment_id": 77904977, "body": "I would suggest storing RGB <i>and</i> HSL values, plus a flag to indicate which is active. Otherwise consistency would be impossible to maintain. (For example, with a saturation value of zero, all hue values are equivalent.)"}, {"owner": {"reputation": 313, "user_id": 3591153, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/862b9a84ea5e01f5eec32dfd2a34228b?s=128&d=identicon&r=PG&f=1", "display_name": "user3591153", "link": "https://stackoverflow.com/users/3591153/user3591153"}, "reply_to_user": {"reputation": 21326, "user_id": 1679849, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lpvxY.png?s=128&g=1", "display_name": "r3mainer", "link": "https://stackoverflow.com/users/1679849/r3mainer"}, "edited": false, "score": 0, "creation_date": 1501713072, "post_id": 45471944, "comment_id": 77905076, "body": "yes, I am doing that- however, the problem occurs when I want to switch picker modes. The values change, because the fractions become whole numbers. I don&#39;t want to have to specify fractions in the picker. So I&#39;m wondering how to keep those fractions hidden, yet still be able to pick and convert to the same values as you had picked in the past. Photoshop does that somehow.."}, {"owner": {"reputation": 21326, "user_id": 1679849, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lpvxY.png?s=128&g=1", "display_name": "r3mainer", "link": "https://stackoverflow.com/users/1679849/r3mainer"}, "edited": false, "score": 1, "creation_date": 1501713460, "post_id": 45471944, "comment_id": 77905216, "body": "How about continuing to use the RGB values when the user switches to HSL, and only using HSL values if and when the user moves the colour selection cursor in the HSL dialog?"}, {"owner": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "edited": false, "score": 0, "creation_date": 1501713648, "post_id": 45471944, "comment_id": 77905259, "body": "If you have a <code>Color</code> abstract class with <code>as_rgb</code> and <code>as_hsl</code> methods, you can then have <code>RGBColor</code> and <code>HSLColor</code> inherit from that, implementing one function trivially and the other as a conversion. Then you can keep it as the selected color until a new one is selected."}, {"owner": {"reputation": 313, "user_id": 3591153, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/862b9a84ea5e01f5eec32dfd2a34228b?s=128&d=identicon&r=PG&f=1", "display_name": "user3591153", "link": "https://stackoverflow.com/users/3591153/user3591153"}, "edited": false, "score": 0, "creation_date": 1501714363, "post_id": 45471944, "comment_id": 77905469, "body": "I guess I could keep a list of used colors with their rgb values, and if a color is defined using hsl, I could check that list for similar color and convert that rgb to the hsl integer values. That way the HSL picker will be reliant on previously used RGB values."}], "answers": [{"tags": [], "owner": {"reputation": 12410, "user_id": 5217142, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57daeb5f96b7a591e3447d41e59bbc94?s=128&d=identicon&r=PG&f=1", "display_name": "traktor", "link": "https://stackoverflow.com/users/5217142/traktor"}, "is_accepted": false, "score": 2, "last_activity_date": 1501717176, "creation_date": 1501717176, "answer_id": 45472621, "question_id": 45471944, "link": "https://stackoverflow.com/questions/45471944/how-to-keep-rgb-and-hsl-integer-values-consistent-when-converting-back-and-forth/45472621#45472621", "title": "How to keep RGB and HSL integer values consistent when converting back and forth?", "body": "<p>The color spaces do not have the same size for integral values.</p>\n\n<p>HSL has black (lighness zero), plus white (lightness 100), plus 359 * 100 * 98 other colors (since hue zero is the same as hue 360), making 3,518,202 integer triples.</p>\n\n<p>RGB has 256 * 256 * 256, or 16,777,216 integer triples, so multiple RGB values can map to the same HSL value - in the ration of about 4.7 to 1.</p>\n\n<p>To maintain consistency when changing picker modes you may need to maintain HSL values as floating point values internally, but show integer values in the picker. Maintaining RGB values as floating point internally may help as well.</p>\n\n<p>Another issue I have seen in color software is to <strong>round</strong> RGB values obtained from HSL to RGB conversion to the nearest integer in the range 0 to 255. I regard this as problematic because it means rgb values 1 to 254 contain 1/255th of the range, while zero and 255 only get half of 1/255th of the range each. The alternative I preferred was to map floating point RGB component values of 256 to 255 (or 255.99999 if you wish) and take the integer floor of the resultant color component. That way integer component values of 0 to 255 get (1/256)th of the range each.</p>\n\n<p>At the end of the day, if you wanted users to be able to enter an HSL value that they used before and get exactly the same color, you would need to allow HSL values with decimal places. </p>\n"}], "owner": {"reputation": 313, "user_id": 3591153, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/862b9a84ea5e01f5eec32dfd2a34228b?s=128&d=identicon&r=PG&f=1", "display_name": "user3591153", "link": "https://stackoverflow.com/users/3591153/user3591153"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 570, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1501717176, "creation_date": 1501712494, "question_id": 45471944, "link": "https://stackoverflow.com/questions/45471944/how-to-keep-rgb-and-hsl-integer-values-consistent-when-converting-back-and-forth", "title": "How to keep RGB and HSL integer values consistent when converting back and forth?", "body": "<p>I have code that converts RGB values to HSL values as well as HSL to RGB.\nIt works fine, however, I have a color picker that can work in either rgb or hsl. \nThe problem is, that they both use integer values.. </p>\n\n<p>So if I convert RGB to HSL, I get fractions that need to be rounded. When I convert back to RGB, the values aren't the same as they were- a number is usually of by one (a value of 123 might become 124 after going RGB>HSL>RGB).</p>\n\n<p>I find this odd because in Photoshop, they have the same color picker- you can choose between RGB and HSB, and when you convert back and forth, the RGB values remain consistent and they use integer values when you pick in both modes.\nHow do they accomplish that?</p>\n"}, {"tags": ["c++", "eigen"], "comments": [{"owner": {"reputation": 14588, "user_id": 6870253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c7ce91530d2dddae7b9fc2bd828ed78?s=128&d=identicon&r=PG&f=1", "display_name": "chtz", "link": "https://stackoverflow.com/users/6870253/chtz"}, "edited": false, "score": 1, "creation_date": 1501712507, "post_id": 45471897, "comment_id": 77904875, "body": "As of now, just convert to AngleAxis and multiply the vector by the angle."}, {"owner": {"reputation": 153, "user_id": 4523769, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-t5eV-DdkP6o/AAAAAAAAAAI/AAAAAAAAASI/h02Zz0iF4S4/photo.jpg?sz=128", "display_name": "Rachit Bhargava", "link": "https://stackoverflow.com/users/4523769/rachit-bhargava"}, "reply_to_user": {"reputation": 14588, "user_id": 6870253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c7ce91530d2dddae7b9fc2bd828ed78?s=128&d=identicon&r=PG&f=1", "display_name": "chtz", "link": "https://stackoverflow.com/users/6870253/chtz"}, "edited": false, "score": 1, "creation_date": 1501714986, "post_id": 45471897, "comment_id": 77905622, "body": "Yeah thats what I want to do. Is there a function to convert from quaternion to axis angle?"}, {"owner": {"reputation": 14588, "user_id": 6870253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c7ce91530d2dddae7b9fc2bd828ed78?s=128&d=identicon&r=PG&f=1", "display_name": "chtz", "link": "https://stackoverflow.com/users/6870253/chtz"}, "edited": false, "score": 1, "creation_date": 1501773154, "post_id": 45471897, "comment_id": 77937498, "body": "Just assign your quaternion to an <code>Eigen::AngleAxis</code> object"}], "answers": [{"tags": [], "owner": {"reputation": 58, "user_id": 4056910, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-EMhpLW-LSDg/AAAAAAAAAAI/AAAAAAAAADI/OdAeD5bkkAc/photo.jpg?sz=128", "display_name": "Chris Sketch", "link": "https://stackoverflow.com/users/4056910/chris-sketch"}, "is_accepted": true, "score": 0, "last_activity_date": 1551398790, "creation_date": 1551398790, "answer_id": 54936137, "question_id": 45471897, "link": "https://stackoverflow.com/questions/45471897/eigenquaterniond-to-eigenangleaxis/54936137#54936137", "title": "Eigen::Quaterniond to Eigen::AngleAxis", "body": "<p>You can convert a unit quaternion to an AngleAxis with the equal operator <a href=\"https://eigen.tuxfamily.org/dox/classEigen_1_1AngleAxis.html#aa79ba9655d1b8fe12d75082902cea88b\" rel=\"nofollow noreferrer\">see eigen documentation</a></p>\n"}], "owner": {"reputation": 153, "user_id": 4523769, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-t5eV-DdkP6o/AAAAAAAAAAI/AAAAAAAAASI/h02Zz0iF4S4/photo.jpg?sz=128", "display_name": "Rachit Bhargava", "link": "https://stackoverflow.com/users/4523769/rachit-bhargava"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1912, "favorite_count": 0, "accepted_answer_id": 54936137, "answer_count": 1, "score": 0, "last_activity_date": 1551398790, "creation_date": 1501712234, "question_id": 45471897, "link": "https://stackoverflow.com/questions/45471897/eigenquaterniond-to-eigenangleaxis", "title": "Eigen::Quaterniond to Eigen::AngleAxis", "body": "<p>I want to convert an Eigen::Quaterniond to a Eigen::Vector3d representing a rotation vector (angle * axis). My thought was to convert it into an Eigen::AngleAxis format and then convert that to Eigen::Vector3d . </p>\n\n<p>Is there a direct function to go from Eigen::Quaterniond to Eigen::AngleAxis?</p>\n"}, {"tags": ["c++", "build", "cmake"], "answers": [{"tags": [], "owner": {"reputation": 1271, "user_id": 7942311, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a53d9c375c21733a876826559e827e0a?s=128&d=identicon&r=PG&f=1", "display_name": "utopia", "link": "https://stackoverflow.com/users/7942311/utopia"}, "is_accepted": true, "score": 5, "last_activity_date": 1501713105, "creation_date": 1501713105, "answer_id": 45472045, "question_id": 45471859, "link": "https://stackoverflow.com/questions/45471859/standard-way-of-knowing-if-find-package-defines-include-dir-or-include-dirs/45472045#45472045", "title": "Standard way of knowing if find_package defines INCLUDE_DIR or INCLUDE_DIRS", "body": "<p>The de-facto standard is <code>*_LIBRARIES</code> and <code>*_DIRS</code>, i.e. the plural variable names are <strong>result variables</strong>. So, they are only meant to be read from not written to.</p>\n\n<p>Also, with a well-written modern FindModule even those variables are rarely useful to users because the imported targets will contain all the relevant information. So, users can just do the following without using result variables directly:</p>\n\n<pre><code>add_executable(myexe OpenGL::GL)\nadd_library(mylibrary PUBLIC OpenGL::GL)\n</code></pre>\n\n<p>However, the correct way to know how to use a FindModule is to just read the documentation which will either be in docs explicitly or in CMake comments at the beginning of the <code>FindModule.cmake</code> file.</p>\n\n<p>All the standard module files are in the CMake installation subdirectory 'Modules' and most (all?) have CMake documentation.</p>\n\n<p>The location hint variables will often be named <code>*_INCLUDE_DIR</code> AND <code>*_LIBRARY</code>, which you can set before calling <code>find_package()</code> in your <code>CMakeLists.txt</code> or you can set with <code>cmake -D</code> or <code>cmake-gui</code> or <code>ccmake</code>.</p>\n"}], "owner": {"reputation": 1419, "user_id": 3788493, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/eLdB2.jpg?s=128&g=1", "display_name": "jeanluc", "link": "https://stackoverflow.com/users/3788493/jeanluc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 932, "favorite_count": 0, "accepted_answer_id": 45472045, "answer_count": 1, "score": 2, "last_activity_date": 1501713105, "creation_date": 1501711948, "question_id": 45471859, "link": "https://stackoverflow.com/questions/45471859/standard-way-of-knowing-if-find-package-defines-include-dir-or-include-dirs", "title": "Standard way of knowing if find_package defines INCLUDE_DIR or INCLUDE_DIRS", "body": "<p>I keep running into this problem with cmake when trying to write build files. the <code>find_package</code> command is supposed to define variables to be used with the <code>include_directories</code> directive, but it does so inconsistently. For example, consider the following code:</p>\n\n<pre><code>find_package(OpenGL REQUIRED)\nfind_package(glm REQUIRED)\n\nmessage(STATUS ${GLM_INCLUDE_DIR})\nmessage(STATUS ${GLM_INCLUDE_DIRS})\nmessage(STATUS ${OPENGL_INCLUDE_DIR})\nmessage(STATUS ${OPENGL_INCLUDE_DIRS})\n</code></pre>\n\n<p>Only the second and third <code>message</code> prints, even though one is \"DIR\" and the other is \"DIRS\"</p>\n\n<p>Is there a standard way of determining which one you're supposed to use?</p>\n"}, {"tags": ["c++", "stl", "smart-pointers"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2672107"}, "edited": false, "score": 0, "creation_date": 1501710884, "post_id": 45471536, "comment_id": 77904301, "body": "I think <code>make_unique&lt;Student&gt;({1, 5.5});</code> should compile."}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 0, "creation_date": 1501710950, "post_id": 45471536, "comment_id": 77904331, "body": "@manni66 Nah, that&#39;s not how aggregate initialization works."}], "answers": [{"comments": [{"owner": {"reputation": 3080, "user_id": 7590993, "user_type": "registered", "accept_rate": 94, "profile_image": "https://graph.facebook.com/10154373026397157/picture?type=large", "display_name": "Hariom Singh", "link": "https://stackoverflow.com/users/7590993/hariom-singh"}, "edited": false, "score": 0, "creation_date": 1501710731, "post_id": 45471593, "comment_id": 77904229, "body": "Is there anything could be done on the original stl , so that it doesn&#39;t complain or doesn&#39;t need to constructor"}, {"owner": {"reputation": 3080, "user_id": 7590993, "user_type": "registered", "accept_rate": 94, "profile_image": "https://graph.facebook.com/10154373026397157/picture?type=large", "display_name": "Hariom Singh", "link": "https://stackoverflow.com/users/7590993/hariom-singh"}, "edited": false, "score": 0, "creation_date": 1501710780, "post_id": 45471593, "comment_id": 77904248, "body": "It worked without a constructor  unique_ptr&lt;Student&gt;{ new Student{1,22.5} }"}, {"owner": {"reputation": 16382, "user_id": 5507349, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/IaCUb.jpg?s=128&g=1", "display_name": "Edgar Rokj\u0101n", "link": "https://stackoverflow.com/users/5507349/edgar-rokj%c4%81n"}, "reply_to_user": {"reputation": 3080, "user_id": 7590993, "user_type": "registered", "accept_rate": 94, "profile_image": "https://graph.facebook.com/10154373026397157/picture?type=large", "display_name": "Hariom Singh", "link": "https://stackoverflow.com/users/7590993/hariom-singh"}, "edited": false, "score": 0, "creation_date": 1501710834, "post_id": 45471593, "comment_id": 77904273, "body": "@HariomSingh I don&#39;t see any other options except <code>unique_ptr&lt;Student&gt;{ new Student {...} }</code>, like you mentioned in your question. It uses aggregate initialization, so it works. But there is no way to use aggregate initialization with <code>std::make_unique</code>."}, {"owner": {"reputation": 3080, "user_id": 7590993, "user_type": "registered", "accept_rate": 94, "profile_image": "https://graph.facebook.com/10154373026397157/picture?type=large", "display_name": "Hariom Singh", "link": "https://stackoverflow.com/users/7590993/hariom-singh"}, "edited": false, "score": 0, "creation_date": 1501710929, "post_id": 45471593, "comment_id": 77904321, "body": "Rokyan  Any suggestion what needs be changed to make_unique that is doesn&#39;t need constructor like  unique_ptr&lt;Student&gt;{ new Student{1,22.5} }"}], "tags": [], "owner": {"reputation": 16382, "user_id": 5507349, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/IaCUb.jpg?s=128&g=1", "display_name": "Edgar Rokj\u0101n", "link": "https://stackoverflow.com/users/5507349/edgar-rokj%c4%81n"}, "is_accepted": false, "score": 2, "last_activity_date": 1501710660, "creation_date": 1501710660, "answer_id": 45471593, "question_id": 45471536, "link": "https://stackoverflow.com/questions/45471536/make-unique-error-in-compile-time/45471593#45471593", "title": "make_unique error in compile time", "body": "<p>Basically, <code>std::make_unique&lt;T&gt;</code> forwards its arguments to the constructor of type <code>T</code>. But there is no constructor in class <code>Student</code> accepting <code>int</code> and <code>double</code>. You might add one:</p>\n\n<pre><code>struct Student\n{\n    Student(int id, float Score) : id(id), Score(Score) {}\n    int  id;\n    float Score;\n};\n</code></pre>\n\n<p>to make the code work.</p>\n"}, {"tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": true, "score": 5, "last_activity_date": 1501711009, "creation_date": 1501711009, "answer_id": 45471666, "question_id": 45471536, "link": "https://stackoverflow.com/questions/45471536/make-unique-error-in-compile-time/45471666#45471666", "title": "make_unique error in compile time", "body": "<p>Unfortunately, <code>make_unique</code> does not perform direct list initialization. If you look into it's description <a href=\"http://en.cppreference.com/w/cpp/memory/unique_ptr/make_unique\" rel=\"noreferrer\">here</a>, you will see following statement:</p>\n\n<blockquote>\n  <p>Constructs a non-array type T. The arguments args are passed to the\n  constructor of T. This overload only participates in overload\n  resolution if T is not an array type. The function is equivalent to:\n  unique_ptr(<strong>new T(std::forward(args)...)</strong>)</p>\n</blockquote>\n\n<p>Your class doesn't have a constructor which accepts two arguments. It is an aggregate, though, and could be constructed using aggregate initialization, as in your second example:</p>\n\n<pre><code>auto* p = new Student{2, 3};\n</code></pre>\n\n<p>But make_unique is not calling this form, so this is why it fails. There is a suggestion to make it work like that: <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2015/n4462.html\" rel=\"noreferrer\">http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2015/n4462.html</a></p>\n"}], "owner": {"reputation": 3080, "user_id": 7590993, "user_type": "registered", "accept_rate": 94, "profile_image": "https://graph.facebook.com/10154373026397157/picture?type=large", "display_name": "Hariom Singh", "link": "https://stackoverflow.com/users/7590993/hariom-singh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2279, "favorite_count": 0, "closed_date": 1501711141, "accepted_answer_id": 45471666, "answer_count": 2, "score": 4, "last_activity_date": 1501712485, "creation_date": 1501710429, "last_edit_date": 1501712485, "question_id": 45471536, "link": "https://stackoverflow.com/questions/45471536/make-unique-error-in-compile-time", "closed_reason": "Duplicate", "title": "make_unique error in compile time", "body": "<p>I have just started to learn smart pointers \n<a href=\"http://en.cppreference.com/w/cpp/memory/unique_ptr/make_unique\" rel=\"nofollow noreferrer\">stl::make_unique</a></p>\n\n<p>Have to change old codes to modern c++</p>\n\n<p>I am getting following error when I compile the below line of code(sample of original code )</p>\n\n<pre><code>#include &lt;memory&gt;\n#include &lt;iostream&gt;\n\nusing namespace std;\nstruct Student\n{\n    int  id;\n    float Score;\n};\nauto main()-&gt;int\n{\n    auto Student1 = make_unique&lt;Student&gt;(1, 5.5);\n    //auto Student1 = make_unique&lt;int&gt;(1);  //Works perfectly\n    //auto Student2 = unique_ptr&lt;Student&gt;{ new Student{1,22.5} }; //Works \n    cout &lt;&lt; \"working\";\n    return 0;\n}\n\n1&gt;------ Build started: Project: ConsoleApplication4, Configuration: Debug Win32 ------\n1&gt;Source.cpp\n1&gt;c:\\program files (x86)\\microsoft visual studio\\2017\\enterprise\\vc\\tools\\msvc\\14.10.25017\\include\\memory(2054): error C2661: 'Student::Student': no overloaded function takes 2 arguments\n1&gt;c:\\users\\hsingh\\documents\\visual studio 2017\\projects\\consoleapplication4\\consoleapplication4\\source.cpp(12): note: see reference to function template instantiation 'std::unique_ptr&lt;Student,std::default_delete&lt;_Ty&gt;&gt; std::make_unique&lt;Student,int,double&gt;(int &amp;&amp;,double &amp;&amp;)' being compiled\n1&gt;        with\n1&gt;        [\n1&gt;            _Ty=Student\n1&gt;        ]\n1&gt;Done building project \"ConsoleApplication4.vcxproj\" -- FAILED.\n========== Build: 0 succeeded, 1 failed, 0 up-to-date, 0 skipped ==========\n</code></pre>\n\n<p>I tried to look into the make_unique implementation looks like it should have worked .Looked in the above site and possible implementation was </p>\n\n<pre><code>// note: this implementation does not disable this overload for array types\ntemplate&lt;typename T, typename... Args&gt;\nstd::unique_ptr&lt;T&gt; make_unique(Args&amp;&amp;... args)\n{\n    return std::unique_ptr&lt;T&gt;(new T(std::forward&lt;Args&gt;(args)...));\n}\n</code></pre>\n\n<p>so my question is (work around now what i have is to directly use the unique_ptr)</p>\n\n<ol>\n<li><p>How to make it working using make_unique </p></li>\n<li><p>What changes I can do to the make_unique implementation in STL so that it works </p></li>\n</ol>\n\n<p><strong>After few answers\nAdded question 3</strong> </p>\n\n<p>3.What is best using make_unique with constructor or just directly using unique_ptr </p>\n\n<pre><code>unique_ptr&lt;Student&gt;{ new Student{1,22.5} }\n</code></pre>\n\n<p>I am preferring the later as no need to define constructor .Please do suggest</p>\n"}, {"tags": ["c++", "loops", "if-statement", "set", "logical-or"], "comments": [{"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 2, "creation_date": 1501710324, "post_id": 45471489, "comment_id": 77904073, "body": "In the first case, once <code>set.insert(x).second</code> is true, the loop does nothing at all. In the second case, <code>set.insert(x)</code> is called every time"}], "answers": [{"tags": [], "owner": {"reputation": 8856, "user_id": 4442671, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh4.googleusercontent.com/-nSzcZygTwLs/AAAAAAAAAAI/AAAAAAAAADA/virGKG3deIo/photo.jpg?sz=128", "display_name": "Frank", "link": "https://stackoverflow.com/users/4442671/frank"}, "is_accepted": false, "score": 3, "last_activity_date": 1501710627, "creation_date": 1501710627, "answer_id": 45471587, "question_id": 45471489, "link": "https://stackoverflow.com/questions/45471489/c-difference-in-behavior-between-if-statement-setting-condition-to-true-and-or/45471587#45471587", "title": "C++ difference in behavior between if statement setting condition to true and or-ing a condition in loop", "body": "<pre><code>addedFacts = addedFacts || set.insert(x).second;\n</code></pre>\n\n<p>and </p>\n\n<pre><code>if (set.insert(x).second) {\n    addedFacts = true;\n}\n</code></pre>\n\n<p>Are definitely not the same thing. The first block of code is equivalent to:</p>\n\n<pre><code>if (!addedFacts) {\n    addedFacts = set.insert(x).second;\n}\n</code></pre>\n\n<p>the <code>!addedFacts</code> check makes a big difference.</p>\n"}, {"comments": [{"owner": {"reputation": 37, "user_id": 3285858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7c92a499d301ea8b288bd25155840dd?s=128&d=identicon&r=PG&f=1", "display_name": "lodeous", "link": "https://stackoverflow.com/users/3285858/lodeous"}, "edited": false, "score": 1, "creation_date": 1501717821, "post_id": 45471734, "comment_id": 77906282, "body": "Ok, now I understand what was going on. The program was supposed to evaluate each rule on every pass and within each rule add every new fact. The short circuit evaluation prevented my code from doing so, thus drastically increasing the number of passes required. Thank you!"}], "tags": [], "owner": {"reputation": 33645, "user_id": 2630032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hQF09.jpg?s=128&g=1", "display_name": "Stephan Lechner", "link": "https://stackoverflow.com/users/2630032/stephan-lechner"}, "is_accepted": true, "score": 2, "last_activity_date": 1501711667, "last_edit_date": 1501711667, "creation_date": 1501711277, "answer_id": 45471734, "question_id": 45471489, "link": "https://stackoverflow.com/questions/45471489/c-difference-in-behavior-between-if-statement-setting-condition-to-true-and-or/45471734#45471734", "title": "C++ difference in behavior between if statement setting condition to true and or-ing a condition in loop", "body": "<p>A difference arises because of short-circuit evaluation:\nConsider an expression of the form <code>(expr1 || expr2)</code>. Short-circuit means that if <code>expr1</code> evaluates to <code>true</code>, expression <code>expr2</code> will not get evaluated at all (cf. <a href=\"https://timsong-cpp.github.io/cppwp/n3337/expr.log.or#1\" rel=\"nofollow noreferrer\">this online c++ standard draft</a>, ephasis are mine):</p>\n\n<blockquote>\n  <p><em>5.15 Logical OR operator</em></p>\n  \n  <p>The || operator groups left-to-right. The operands are both\n  contextually converted to bool (Clause [conv]). It returns true if\n  either of its operands is true, and false otherwise. Unlike |, ||\n  guarantees left-to-right evaluation; <strong>moreover, the second operand is\n  not evaluated if the first operand evaluates to true</strong>.</p>\n</blockquote>\n\n<p>Hence, in your expression <code>addedFacts || set.insert(x).second</code>, from the point where <code>addedFacts</code> becomes <code>true</code> the first time, expression <code>set.insert(x).second</code> will not get executed any more. I suppose that this is the \"wrong\" behaviour, as your <code>set</code> will not contain the respective <code>x</code>es then.</p>\n"}], "owner": {"reputation": 37, "user_id": 3285858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7c92a499d301ea8b288bd25155840dd?s=128&d=identicon&r=PG&f=1", "display_name": "lodeous", "link": "https://stackoverflow.com/users/3285858/lodeous"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 0, "accepted_answer_id": 45471734, "answer_count": 2, "score": 1, "last_activity_date": 1501711667, "creation_date": 1501710212, "question_id": 45471489, "link": "https://stackoverflow.com/questions/45471489/c-difference-in-behavior-between-if-statement-setting-condition-to-true-and-or", "title": "C++ difference in behavior between if statement setting condition to true and or-ing a condition in loop", "body": "<p>I was working on Datalog interpreter for my CS class and I ran into a strange problem where my Rule evaluations took too many passes to complete. After looking at my code I made two modifications in the following that fixed my evaluations to execute in the correct number of passes:</p>\n\n<pre><code>//original form\nbool addedFacts = false;\nfor (X x: xs) {\n    addedFacts = addedFacts || set.insert(x).second;\n}\n//modified form\nbool addedFacts = false;\nfor (X x: xs) {\n    if (set.insert(x).second) {\n        addedFacts = true;\n    }\n}\n</code></pre>\n\n<p>To me these two code structures appear logically equivalent. Is there a reason why one executes correctly and one execute incorrectly/inefficiently?\nHere is a buildable example of the problem that was occurring:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;set&gt;\n#include &lt;vector&gt;\n\nusing std::set;\nusing std::vector;\nusing std::cout;\nusing std::endl;\n\nconst int CAP = 100;\n\nclass Rule {\npublic:\n    int factor;\n    Rule(int factor) {\n        this-&gt;factor = factor;\n    }\n    bool evaluateInefficient(set&lt;int&gt;&amp; facts) {\n        vector&lt;int&gt; data;\n        bool addedFacts = false;\n        for (int fact : facts) {\n            data.push_back(fact);\n        }\n        for (int datum : data) {\n            int newFact = datum * factor;\n            if (newFact &lt; CAP) {\n                addedFacts = addedFacts || facts.insert(newFact).second;\n            }\n        }\n        return addedFacts;\n    }\n    bool evaluate(set&lt;int&gt;&amp; facts) {\n        vector&lt;int&gt; data;\n        bool addedFacts = false;\n        for (int fact : facts) {\n            data.push_back(fact);\n        }\n        for (int datum : data) {\n            int newFact = datum * factor;\n            if (newFact &lt; CAP) {\n                if (facts.insert(newFact).second) {\n                    addedFacts = true;\n                }\n            }\n        }\n        return addedFacts;\n    }\n};\n\nint doublyInefficient(vector&lt;Rule&gt;&amp; rules) {\n    set&lt;int&gt; facts;\n    facts.insert(1);\n    bool addedFacts = true;\n    int passes = 0;\n    while (addedFacts) {\n        passes++;\n        addedFacts = false;\n        for (Rule rule : rules) {\n            addedFacts = addedFacts || rule.evaluateInefficient(facts);\n        }\n    }\n    return passes;\n}\n\nint singlyInefficient(vector&lt;Rule&gt;&amp; rules) {\n    set&lt;int&gt; facts;\n    facts.insert(1);\n    bool addedFacts = true;\n    int passes = 0;\n    while (addedFacts) {\n        passes++;\n        addedFacts = false;\n        for (Rule rule : rules) {\n            addedFacts = addedFacts || rule.evaluate(facts);\n        }\n    }\n    return passes;\n}\n\nint efficient(vector&lt;Rule&gt;&amp; rules) {\n    set&lt;int&gt; facts;\n    facts.insert(1);\n    bool addedFacts = true;\n    int passes = 0;\n    while (addedFacts) {\n        passes++;\n        addedFacts = false;\n        for (Rule rule : rules) {\n            if (rule.evaluate(facts)) {\n                addedFacts = true;\n            }\n        }\n    }\n    return passes;\n}\n\nint main(int argc, char* argv[]) {\n    //build the rules\n    vector&lt;Rule&gt; rules;\n    rules.push_back(Rule(2));\n    rules.push_back(Rule(3));\n    rules.push_back(Rule(5));\n    rules.push_back(Rule(7));\n    rules.push_back(Rule(11));\n    rules.push_back(Rule(13));\n    //Show three different codes that should (in my mind) take the same amount of passes over the rules but don't\n    cout &lt;&lt; \"Facts populated after \" &lt;&lt; doublyInefficient(rules) &lt;&lt; \" passes through the Rules.\" &lt;&lt; endl;\n    cout &lt;&lt; \"Facts populated after \" &lt;&lt; singlyInefficient(rules) &lt;&lt; \" passes through the Rules.\" &lt;&lt; endl;\n    cout &lt;&lt; \"Facts populated after \" &lt;&lt; efficient(rules) &lt;&lt; \" passes through the Rules.\" &lt;&lt; endl;\n    getchar();\n}\n</code></pre>\n\n<p>I get the following output when running in debug and release mode (32-bit) on visual studio 2017. To my knowledge the code is not optimized.</p>\n\n<pre><code>Facts populated after 61 passes through the Rules.\nFacts populated after 17 passes through the Rules.\nFacts populated after 7 passes through the Rules.\n</code></pre>\n"}, {"tags": ["c++", "computer-science"], "comments": [{"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1501710406, "post_id": 45471451, "comment_id": 77904096, "body": "<code>position[disc]=dest;</code> modifies <code>position</code> using an out of bounds index in the <code>else</code> block in the first call from <code>main</code>."}, {"owner": {"reputation": 461, "user_id": 4901483, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/XDh38.gif?s=128&g=1", "display_name": "Das", "link": "https://stackoverflow.com/users/4901483/das"}, "edited": false, "score": 0, "creation_date": 1501710510, "post_id": 45471451, "comment_id": 77904131, "body": "Looks like the if block is checking for disc 0-3 and in the else it ends up outputting disc+1. Not going to &#39;give&#39; the answer but looking at how you compare the discs and output should put you on the right track."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 2, "creation_date": 1501710543, "post_id": 45471451, "comment_id": 77904151, "body": "<a href=\"http://ideone.com/5MjTjb\" rel=\"nofollow noreferrer\">Aren&#39;t vectors fun?</a> -- Instant diagnosis of the issue."}], "answers": [{"tags": [], "owner": {"reputation": 1629, "user_id": 6634981, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7cf7315d5991470e856d27c9248ae25b?s=128&d=identicon&r=PG&f=1", "display_name": "Carlos Afonso", "link": "https://stackoverflow.com/users/6634981/carlos-afonso"}, "is_accepted": false, "score": 0, "last_activity_date": 1501711123, "creation_date": 1501711123, "answer_id": 45471702, "question_id": 45471451, "link": "https://stackoverflow.com/questions/45471451/solving-the-hanoi-puzzle-with-recursion/45471702#45471702", "title": "Solving the Hanoi Puzzle with Recursion", "body": "<p>As @Das pointed out your disc starts at 0, but you pass the number of <code>discs = 3</code> the total of discs from <code>0</code> to <code>3</code> is actually 4 (same mistake usually happens with array length). You should actually set <code>discs</code> to be equal to 2.</p>\n"}], "owner": {"reputation": 41, "user_id": 7596741, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/30777215b6dd64b0ced57231be7e1d50?s=128&d=identicon&r=PG&f=1", "display_name": "Quinton Thompson", "link": "https://stackoverflow.com/users/7596741/quinton-thompson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 69, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1501711123, "creation_date": 1501710029, "question_id": 45471451, "link": "https://stackoverflow.com/questions/45471451/solving-the-hanoi-puzzle-with-recursion", "title": "Solving the Hanoi Puzzle with Recursion", "body": "<p>So here I have a program that shows the simulation of solving the Hanoi puzzle. My program works fine for the most part but does not terminate when it should. It should terminate once all discs are on the C peg (C C C), but mine continues to a fourth disc which is not given. There should only be three discs. Any help would be appreciated!</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nconst int num = 3;\nconst char from_peg = 'A';\nconst char to_peg = 'B';\nconst char temp_peg = 'C';\n\nchar position[num];\nvoid moveDiscs(int num,int disc,char source,char dest, char spare){\n    if (disc == 0){\n        position[disc]=dest;\n        cout&lt;&lt;\"Moved disc \"&lt;&lt;disc+1&lt;&lt;\" to peg \"&lt;&lt;dest;\n        cout&lt;&lt;\" ( \";\n        for(int i = 0;i&lt;num;i++){\n            cout&lt;&lt;position[i]&lt;&lt;\" \";\n        }\n        cout&lt;&lt;\")\"&lt;&lt;endl;\n    }else{\n        moveDiscs(num,disc-1,source,spare,dest);\n        position[disc]=dest;\n        cout&lt;&lt;\"Moved disc \"&lt;&lt;disc+1&lt;&lt;\" to peg \"&lt;&lt;dest;\n        cout&lt;&lt;\" ( \";\n                for(int i = 0;i&lt;num;i++){\n                    cout&lt;&lt;position[i]&lt;&lt;\" \";\n                }\n                cout&lt;&lt;\")\"&lt;&lt;endl;\n        moveDiscs(num,disc-1,spare,dest,source);\n    }\n}\nint main() {\n\n    cout&lt;&lt;\"Starting Position for 3 discs are (\";\n    for(int i = 0;i&lt;num;i++){\n        position[i]='A';\n        cout&lt;&lt;position[i]&lt;&lt;\" \";\n    }\n    cout&lt;&lt;\")\"&lt;&lt;endl;\n\n\n    moveDiscs(3,3,from_peg,to_peg,temp_peg);\n    return 0;\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>Starting Position for 3 discs are (A A A )\nMoved disc 1 to peg C ( C A A )\nMoved disc 2 to peg B ( C B A )\nMoved disc 1 to peg B ( B B A )\nMoved disc 3 to peg C ( B B C )\nMoved disc 1 to peg A ( A B C )\nMoved disc 2 to peg C ( A C C )\nMoved disc 1 to peg C ( C C C )\nMoved disc 4 to peg B ( C C C )\nMoved disc 1 to peg B ( B C C )\nMoved disc 2 to peg A ( B A C )\nMoved disc 1 to peg A ( A A C )\nMoved disc 3 to peg B ( A A B )\nMoved disc 1 to peg C ( C A B )\nMoved disc 2 to peg B ( C B B )\nMoved disc 1 to peg B ( B B B )\n</code></pre>\n"}, {"tags": ["c++", "arrays"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2672107"}, "edited": false, "score": 0, "creation_date": 1501709823, "post_id": 45471376, "comment_id": 77903878, "body": "std::string has operator[] and knows its size."}, {"owner": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "edited": false, "score": 0, "creation_date": 1501711477, "post_id": 45471376, "comment_id": 77904525, "body": "decompose the problem: write a function to count vowels in a single string first."}], "answers": [{"tags": [], "owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "is_accepted": false, "score": 3, "last_activity_date": 1501774082, "last_edit_date": 1501774082, "creation_date": 1501709902, "answer_id": 45471422, "question_id": 45471376, "link": "https://stackoverflow.com/questions/45471376/c-how-do-i-loop-through-strings-within-an-array/45471422#45471422", "title": "C++ How do I loop through strings within an array?", "body": "<p>You can loop through each <code>char</code> of the <code>std::string</code></p>\n\n<pre><code>int countAllVowels(const string  array[], int   n)\n{\n    static const std::string all_vowels = \"aeiou\";\n    int vowels = 0;\n    for (int i = 0; i &lt; n; i++)\n    {\n        for (char c : array[i])\n        {\n            if (all_vowels.find(c) != std::string::npos)\n                vowels += 1;\n        }\n    }\n    return(vowels);\n}\n</code></pre>\n\n<p>Alternatively this be done using a couple of functions from <code>&lt;algorithm&gt;</code></p>\n\n<pre><code>std::size_t countAllVowels(std::vector&lt;std::string&gt; const&amp; words)\n{\n    return std::accumulate(words.begin(), words.end(), 0, [](std::size_t total, std::string const&amp; word)\n           {\n               return total + std::count_if(word.begin(), word.end(), [](char c)\n                              {\n                                  static const std::string all_vowels = \"aeiou\";\n                                  return all_vowels.find(c) != std::string::npos;\n                              });\n           });\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 13016, "user_id": 8751754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7k6Li.png?s=128&g=1", "display_name": "Ron", "link": "https://stackoverflow.com/users/8751754/ron"}, "is_accepted": false, "score": 0, "last_activity_date": 1501713769, "creation_date": 1501713769, "answer_id": 45472157, "question_id": 45471376, "link": "https://stackoverflow.com/questions/45471376/c-how-do-i-loop-through-strings-within-an-array/45472157#45472157", "title": "C++ How do I loop through strings within an array?", "body": "<p>Use two loops, the outer one for the array of strings, the inner one for the characters of a particular string in an array. Complete example:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include &lt;algorithm&gt;\n#include &lt;string&gt;\nint countAllVowels(std::string array[], int n){\n    std::vector&lt;char&gt; vowels = { 'a', 'e', 'i', 'o', 'u' };\n    int countvowels = 0;\n    for (int i = 0; i &lt; n; i++){\n        for (auto ch : array[i]){\n            if (std::find(vowels.begin(), vowels.end(), ch) != vowels.end()){\n                countvowels++;\n            }\n        }\n    }\n    return countvowels;\n}\nint main(){\n    std::string arr[] = { \"hello\", \"world\", \"the quick\", \"brown fox\" };\n    std::cout &lt;&lt; \"The number of vowels is: \" &lt;&lt; countAllVowels(arr, 4);\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 8367286, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-HwmiuEuFW-U/AAAAAAAAAAI/AAAAAAAABFQ/P2HiKLtAuao/photo.jpg?sz=128", "display_name": "Noa Kim", "link": "https://stackoverflow.com/users/8367286/noa-kim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1785, "favorite_count": 1, "answer_count": 2, "score": 0, "last_activity_date": 1501774082, "creation_date": 1501709683, "question_id": 45471376, "link": "https://stackoverflow.com/questions/45471376/c-how-do-i-loop-through-strings-within-an-array", "title": "C++ How do I loop through strings within an array?", "body": "<p>I'm required to check for the total number of vowels in a given string array but I can't figure out how to loop through each element of the array...I know how to loop through a string array itself:</p>\n\n<pre><code>int countAllVowels(const string  array[], int   n)\n{\n    for (int i = 0; i &lt; n; i++)\n    {\n        cout &lt;&lt; array[i] &lt;&lt; endl;\n    }\nreturn(vowels);\n}\n</code></pre>\n\n<p>But how do I actually investigate each element of the array?</p>\n"}, {"tags": ["c++", "arrays", "pointers"], "comments": [{"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 5, "creation_date": 1501709117, "post_id": 45471203, "comment_id": 77903590, "body": "If you know that <code>address = (address + 1);</code> is right, then why do you expect <code>address = (address + sizeof(int));</code> to be right, too? Of course you get a different result when you add a different number."}, {"owner": {"reputation": 386, "user_id": 8242696, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30d156727d19a63b70ba89bf028f23e8?s=128&d=identicon&r=PG&f=1", "display_name": "Devin L.", "link": "https://stackoverflow.com/users/8242696/devin-l"}, "edited": false, "score": 1, "creation_date": 1501709129, "post_id": 45471203, "comment_id": 77903596, "body": "The previous 6 questions on c++ have been downvoted to oblivion. Someone is going on a downvoting spree."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1501709382, "post_id": 45471203, "comment_id": 77903718, "body": "If you wanted to actually advance <code>sizeof(int)</code> <i>bytes</i>, that pointer should have been casted to <code>char *</code> and then advanced by <code>sizeof(int)</code>."}, {"owner": {"reputation": 439, "user_id": 1261464, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/gtPyi.png?s=128&g=1", "display_name": "rekotc", "link": "https://stackoverflow.com/users/1261464/rekotc"}, "reply_to_user": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 0, "creation_date": 1501709733, "post_id": 45471203, "comment_id": 77903851, "body": "@BaummitAugen because i couldnt&#39; see the difference between the two"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "reply_to_user": {"reputation": 386, "user_id": 8242696, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30d156727d19a63b70ba89bf028f23e8?s=128&d=identicon&r=PG&f=1", "display_name": "Devin L.", "link": "https://stackoverflow.com/users/8242696/devin-l"}, "edited": false, "score": 0, "creation_date": 1501709780, "post_id": 45471203, "comment_id": 77903864, "body": "@DevinLiu multiple downvotes require multiple people willing to sacrifice rep to express their displeasure with the question. Usually this is a sign of a weak question. Runs of multiple downvotes suggests nothing more than a run of weak questions."}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 1, "creation_date": 1501709834, "post_id": 45471203, "comment_id": 77903883, "body": "Just printing out <code>sizeof(int)</code> might have helped then. Btw, no need to approve every edit proposed on your posts, that last one made it way worse."}, {"owner": {"reputation": 439, "user_id": 1261464, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/gtPyi.png?s=128&g=1", "display_name": "rekotc", "link": "https://stackoverflow.com/users/1261464/rekotc"}, "reply_to_user": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 0, "creation_date": 1501709878, "post_id": 45471203, "comment_id": 77903903, "body": "@baummitAugen ok, i will remember your suggestions, thanks."}, {"owner": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1501715522, "post_id": 45471203, "comment_id": 77905754, "body": "@user4581301 You don\u2019t lose rep for downvoting questions, only answers. And at least in its current state, this question doesn\u2019t seem to deserve nearly as low a score as it has."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "reply_to_user": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "edited": false, "score": 0, "creation_date": 1501716575, "post_id": 45471203, "comment_id": 77906010, "body": "@DanielH Did not know that. I&#39;ll have to start downvoting more questions. Muhuhahahahahaha! The monster is unleashed! But seriously folks, I think I&#39;ll stick to my current downvoting strategy."}], "answers": [{"tags": [], "owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "is_accepted": false, "score": 6, "last_activity_date": 1501709049, "creation_date": 1501709049, "answer_id": 45471241, "question_id": 45471203, "link": "https://stackoverflow.com/questions/45471203/why-is-this-method-for-navigating-through-an-array-wrong/45471241#45471241", "title": "Why is this method for navigating through an array wrong?", "body": "<p>The operator <a href=\"http://en.cppreference.com/w/cpp/language/sizeof\" rel=\"noreferrer\"><code>sizeof</code></a> returns the size of the object in bytes. So (depending on your compiler) you may have just done</p>\n\n<pre><code>address + sizeof(int) == address + 4\n</code></pre>\n\n<p>This will obviously access out of bounds when you dereference the pointer. The problem is that the way you are trying to use <code>sizeof</code> is <em>already accounted for</em> in the <a href=\"https://stackoverflow.com/questions/11713929/c-pointer-arithmetic\">pointer arithmetic</a>. When you add an integral (e.g. <code>1</code>) to an <code>int*</code> it already knows to move <code>1 int</code> over to the next address.</p>\n"}, {"comments": [{"owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "reply_to_user": {"reputation": 13016, "user_id": 8751754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7k6Li.png?s=128&g=1", "display_name": "Ron", "link": "https://stackoverflow.com/users/8751754/ron"}, "edited": false, "score": 1, "creation_date": 1501709475, "post_id": 45471259, "comment_id": 77903754, "body": "@Ron When you cast to <code>char*</code> advancing the pointer moves 1 byte at a time. Then after moving the correct number of bytes, you cast back to <code>int*</code> so the new address is interpreted correctly during the dereference operation."}, {"owner": {"reputation": 8856, "user_id": 4442671, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh4.googleusercontent.com/-nSzcZygTwLs/AAAAAAAAAAI/AAAAAAAAADA/virGKG3deIo/photo.jpg?sz=128", "display_name": "Frank", "link": "https://stackoverflow.com/users/4442671/frank"}, "reply_to_user": {"reputation": 13016, "user_id": 8751754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7k6Li.png?s=128&g=1", "display_name": "Ron", "link": "https://stackoverflow.com/users/8751754/ron"}, "edited": false, "score": 0, "creation_date": 1501709498, "post_id": 45471259, "comment_id": 77903767, "body": "@Ron I interpreted the asker&#39;s question as &quot;I wanted to increment the pointer by a number of bytes, why can&#39;t I do that?&quot; I showed him how to accomplish his intent."}], "tags": [], "owner": {"reputation": 8856, "user_id": 4442671, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh4.googleusercontent.com/-nSzcZygTwLs/AAAAAAAAAAI/AAAAAAAAADA/virGKG3deIo/photo.jpg?sz=128", "display_name": "Frank", "link": "https://stackoverflow.com/users/4442671/frank"}, "is_accepted": true, "score": 4, "last_activity_date": 1501741964, "last_edit_date": 1501741964, "creation_date": 1501709117, "answer_id": 45471259, "question_id": 45471203, "link": "https://stackoverflow.com/questions/45471203/why-is-this-method-for-navigating-through-an-array-wrong/45471259#45471259", "title": "Why is this method for navigating through an array wrong?", "body": "<p>Incrementing a pointer by N will not increment it by <code>N</code> bytes, but by <code>N * sizeof(pointed_type)</code> bytes.</p>\n\n<p>So when you do:</p>\n\n<pre><code>address = (address + sizeof(int));\n</code></pre>\n\n<p>You are incrementing the address by (probably) 4 times the size of int, which is past your original array. </p>\n\n<p>What you intended to do is:</p>\n\n<pre><code>address = reinterpret_cast&lt;int*&gt;(reinterpret_cast&lt;char*&gt;(address) + sizeof(int));\n</code></pre>\n\n<p>Which is pretty horrendous.</p>\n"}, {"tags": [], "owner": {"reputation": 3797, "user_id": 2874856, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/kWxOm.jpg?s=128&g=1", "display_name": "Raindrop7", "link": "https://stackoverflow.com/users/2874856/raindrop7"}, "is_accepted": false, "score": 1, "last_activity_date": 1501712835, "last_edit_date": 1501712835, "creation_date": 1501712523, "answer_id": 45471955, "question_id": 45471203, "link": "https://stackoverflow.com/questions/45471203/why-is-this-method-for-navigating-through-an-array-wrong/45471955#45471955", "title": "Why is this method for navigating through an array wrong?", "body": "<p>An array is a group of elements of the Same Type mapped consecutively in memory one-next to the other.</p>\n\n<p>The size of the array is: </p>\n\n<pre><code>sizeof(any element) * the number of elements\n</code></pre>\n\n<p>So the vice-vers to get the number of elements of an array you can:</p>\n\n<pre><code>Number of elements = sizeof(array) / sizeof(any element).\n</code></pre>\n\n<ul>\n<li><p>These elements are addressable and each one is addressed with the first byte's address.</p>\n\n<pre><code>int a[] = {1, 10, 100, 1000, 10000};\nstd::cout &lt;&lt; sizeof(int) &lt;&lt; std::endl; // 4\nstd::cout &lt;&lt; sizeof(a) &lt;&lt; std::endl; // 20: 5 * 4\n</code></pre></li>\n<li><p>The addresses:</p>\n\n<pre><code>cout &lt;&lt; &amp;a[0] &lt;&lt; \" : \" &lt;&lt; &amp;a[1] &lt;&lt; \" : \" &lt;&lt;\n    &amp;a[2] &lt;&lt; \" : \" &lt;&lt; &amp;a[3] &lt;&lt; endl;\n</code></pre></li>\n<li><p>The outPut:</p>\n\n<pre><code>0018FF38 : 0018FF3C : 0018FF40 : 0018FF44\n</code></pre></li>\n</ul>\n\n<p>As you can see the address is incrementing by sizeof(int) // 4</p>\n\n<ul>\n<li><p>To do it on your way:</p>\n\n<pre><code>for(int* tmp = array; tmp &lt;= a + nElement; tmp++)\n    cout &lt;&lt; tmp &lt;&lt; \" : \";\n</code></pre></li>\n</ul>\n\n<p>The result:</p>\n\n<pre><code>    0018FF38 : 0018FF3C : 0018FF40 : 0018FF44\n</code></pre>\n\n<p>As you can see the result is identical.</p>\n\n<ul>\n<li><p>To move from one element to another just increment / decrement the address as I did above:</p>\n\n<pre><code>tmp++; // incrementing the address by 1 means moving to the next element, element means an integer which means 4 bytes. 1 here is not a single byte but a unit or element which is 4 byte here;\n</code></pre></li>\n<li><p>To move to the n-element just:</p>\n\n<pre><code>tmp += n;\n</code></pre></li>\n</ul>\n\n<p>In your example:</p>\n\n<pre><code>    address = (address + sizeof(int)); : \n    address = address + 4; // moving  to the 0 + 4 element which means fifth element (here outbound).\n</code></pre>\n"}], "owner": {"reputation": 439, "user_id": 1261464, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/gtPyi.png?s=128&g=1", "display_name": "rekotc", "link": "https://stackoverflow.com/users/1261464/rekotc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 100, "favorite_count": 0, "accepted_answer_id": 45471259, "answer_count": 3, "score": -5, "last_activity_date": 1501741964, "creation_date": 1501708861, "last_edit_date": 1501709863, "question_id": 45471203, "link": "https://stackoverflow.com/questions/45471203/why-is-this-method-for-navigating-through-an-array-wrong", "title": "Why is this method for navigating through an array wrong?", "body": "<p>I'm trying to understand C pointers, I set up the following example:</p>\n\n<pre><code>int main()\n{\n    int temp[] = {45,67,99};    \n    int* address;\n    address = &amp;temp[0]; //equivalent to address = temp;\n    std::cout &lt;&lt; \"element 0: \" &lt;&lt; *address &lt;&lt; std::endl;\n    address = (address + sizeof(int));\n    std::cout &lt;&lt; \"element 1: \" &lt;&lt; *address &lt;&lt; std::endl;\n\n    std::getchar();\n    return 0;\n}\n</code></pre>\n\n<p>Now, the first element is printed correctly while the second one is garbage. I know that I can just use:</p>\n\n<pre><code>address = (address + 1);\n</code></pre>\n\n<p>in order to move the pointer to the second element of the array, but I don't understand why the first method is wrong.</p>\n"}, {"tags": ["c++", "qt"], "comments": [{"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1501713655, "post_id": 45471172, "comment_id": 77905263, "body": "what is your qt version?"}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1501713727, "post_id": 45471172, "comment_id": 77905280, "body": "change <code>void updateTotalLosses()</code>  to <code>void updateTotalLosses(int, int)</code>"}, {"owner": {"reputation": 67, "user_id": 8366181, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/907955cedff212784eb43ea1577b4236?s=128&d=identicon&r=PG&f=1", "display_name": "Dan3460", "link": "https://stackoverflow.com/users/8366181/dan3460"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1501718715, "post_id": 45471172, "comment_id": 77906511, "body": "qt version 5.9.1. I will try your suggestion."}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1501718878, "post_id": 45471172, "comment_id": 77906552, "body": "also try: <code>connect(ui-&gt;quality, &amp;QTableWidget::cellChanged ,this, &amp;RepackProcess::updateTotalLosses);</code>"}, {"owner": {"reputation": 67, "user_id": 8366181, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/907955cedff212784eb43ea1577b4236?s=128&d=identicon&r=PG&f=1", "display_name": "Dan3460", "link": "https://stackoverflow.com/users/8366181/dan3460"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1501719334, "post_id": 45471172, "comment_id": 77906669, "body": "Suggestion did not work, crashed at the same point, talking about your firs suggestion"}, {"owner": {"reputation": 67, "user_id": 8366181, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/907955cedff212784eb43ea1577b4236?s=128&d=identicon&r=PG&f=1", "display_name": "Dan3460", "link": "https://stackoverflow.com/users/8366181/dan3460"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1501719514, "post_id": 45471172, "comment_id": 77906714, "body": "@eyllanesc just making sure, that connect does not have SIGNAL and SLOT. Is that correct?"}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1501719719, "post_id": 45471172, "comment_id": 77906759, "body": "read this: <a href=\"https://wiki.qt.io/New_Signal_Slot_Syntax\" rel=\"nofollow noreferrer\">wiki.qt.io/New_Signal_Slot_Syntax</a>"}, {"owner": {"reputation": 67, "user_id": 8366181, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/907955cedff212784eb43ea1577b4236?s=128&d=identicon&r=PG&f=1", "display_name": "Dan3460", "link": "https://stackoverflow.com/users/8366181/dan3460"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1501719723, "post_id": 45471172, "comment_id": 77906761, "body": "No, luck with the second suggestion. Crashed at the same pleace"}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1501719778, "post_id": 45471172, "comment_id": 77906774, "body": "You have to add the parameters to the declaration and the implementation of the method."}, {"owner": {"reputation": 67, "user_id": 8366181, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/907955cedff212784eb43ea1577b4236?s=128&d=identicon&r=PG&f=1", "display_name": "Dan3460", "link": "https://stackoverflow.com/users/8366181/dan3460"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1501719989, "post_id": 45471172, "comment_id": 77906823, "body": "I did. here is what it looks like now: RepackProcess::updateTotalLosses(int col, int row)"}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1501720140, "post_id": 45471172, "comment_id": 77906856, "body": "I did not mean for the second option but for the first option. Study the previous link."}, {"owner": {"reputation": 67, "user_id": 8366181, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/907955cedff212784eb43ea1577b4236?s=128&d=identicon&r=PG&f=1", "display_name": "Dan3460", "link": "https://stackoverflow.com/users/8366181/dan3460"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1501720907, "post_id": 45471172, "comment_id": 77907008, "body": "Yes, that was the first thing i did when implemented the first option"}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1501721144, "post_id": 45471172, "comment_id": 77907056, "body": "please, show the header file of RepackProcess class"}, {"owner": {"reputation": 67, "user_id": 8366181, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/907955cedff212784eb43ea1577b4236?s=128&d=identicon&r=PG&f=1", "display_name": "Dan3460", "link": "https://stackoverflow.com/users/8366181/dan3460"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1501721660, "post_id": 45471172, "comment_id": 77907155, "body": "Added to the end of the post."}], "answers": [{"comments": [{"owner": {"reputation": 67, "user_id": 8366181, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/907955cedff212784eb43ea1577b4236?s=128&d=identicon&r=PG&f=1", "display_name": "Dan3460", "link": "https://stackoverflow.com/users/8366181/dan3460"}, "edited": false, "score": 0, "creation_date": 1503006912, "post_id": 45739559, "comment_id": 78448507, "body": "Thanks for you note, i will try for my self when i have a chance. But, could i use those commands on the constructor? as to block the signals there while the tables are being constructed?"}, {"owner": {"reputation": 5879, "user_id": 8150685, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WV7OV.jpg?s=128&g=1", "display_name": "Error - Syntactical Remorse", "link": "https://stackoverflow.com/users/8150685/error-syntactical-remorse"}, "reply_to_user": {"reputation": 67, "user_id": 8366181, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/907955cedff212784eb43ea1577b4236?s=128&d=identicon&r=PG&f=1", "display_name": "Dan3460", "link": "https://stackoverflow.com/users/8366181/dan3460"}, "edited": false, "score": 0, "creation_date": 1503007529, "post_id": 45739559, "comment_id": 78448734, "body": "Looking at it again I may be wrong since your connect is after your fillQualityRepory.  I don&#39;t think you need it in the constructor. Just try putting it in the update method."}, {"owner": {"reputation": 5879, "user_id": 8150685, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WV7OV.jpg?s=128&g=1", "display_name": "Error - Syntactical Remorse", "link": "https://stackoverflow.com/users/8150685/error-syntactical-remorse"}, "reply_to_user": {"reputation": 67, "user_id": 8366181, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/907955cedff212784eb43ea1577b4236?s=128&d=identicon&r=PG&f=1", "display_name": "Dan3460", "link": "https://stackoverflow.com/users/8366181/dan3460"}, "edited": false, "score": 0, "creation_date": 1503007617, "post_id": 45739559, "comment_id": 78448768, "body": "Or try both since it doesn&#39;t hurt. If it fails let me know."}], "tags": [], "owner": {"reputation": 5879, "user_id": 8150685, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WV7OV.jpg?s=128&g=1", "display_name": "Error - Syntactical Remorse", "link": "https://stackoverflow.com/users/8150685/error-syntactical-remorse"}, "is_accepted": false, "score": 0, "last_activity_date": 1502984511, "creation_date": 1502984511, "answer_id": 45739559, "question_id": 45471172, "link": "https://stackoverflow.com/questions/45471172/updating-a-qtablewidget-with-a-connect/45739559#45739559", "title": "Updating a QtableWidget with a connect", "body": "<p>You are probably right with this statement:</p>\n\n<blockquote>\n  <p>It seems to me that the program is calling the update function before\n  the table is fully</p>\n</blockquote>\n\n<p>Since you are changed a cell:<br> <code>connect(ui-&gt;quality,SIGNAL(cellChanged(int,int)),this,SLOT(updateTotalLosses()));</code> <br>\nis used and thus <code>updateTotalLosses()</code> is called.</p>\n\n<p>To fix it prevent itself from signalling using:</p>\n\n<pre><code>ui-&gt;quality-&gt;blockSignals(true);\nui-&gt;quality-&gt;blockSignals(false);\n</code></pre>\n\n<p>So you need to do something like this:</p>\n\n<pre><code>fillQualityReport()\n{\n    ui-&gt;quality-&gt;blockSignals(true);\n    ... // your code\n    ui-&gt;quality-&gt;blockSignals(false);\n}\n</code></pre>\n\n<p>and</p>\n\n<pre><code>updateTotalLosses()\n{\n    ui-&gt;quality-&gt;blockSignals(true);\n    ... // your code\n    ui-&gt;quality-&gt;blockSignals(false);\n}\n</code></pre>\n"}], "owner": {"reputation": 67, "user_id": 8366181, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/907955cedff212784eb43ea1577b4236?s=128&d=identicon&r=PG&f=1", "display_name": "Dan3460", "link": "https://stackoverflow.com/users/8366181/dan3460"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 308, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1502984511, "creation_date": 1501708709, "last_edit_date": 1501753615, "question_id": 45471172, "link": "https://stackoverflow.com/questions/45471172/updating-a-qtablewidget-with-a-connect", "title": "Updating a QtableWidget with a connect", "body": "<p>I stumble into a problem that I'm a little puzzled by it.</p>\n\n<p>On the constructor of this widget I call a function <code>fillQualityReport()</code> which fills the table:</p>\n\n<pre><code>RepackProcess::RepackProcess(DataBase *d, QPrinter *p, QWidget *parent) : QMdiSubWindow(parent), ui(new Ui::RepackProcess)\n{\n  ui-&gt;setupUi(this);\n  data=d;\n  printer=p;\n  loadDropDownMenus();\n  fillQualityReport();\n  connect(ui-&gt;quality,SIGNAL(cellChanged(int,int)),this,SLOT(updateTotalLosses()));\n}\n</code></pre>\n\n<p>Here is the function to fill up the quality report:</p>\n\n<pre><code>void RepackProcess::fillQualityReport()\n{\n  int commodity;\n  QSqlQuery query, defects;\n  query.prepare(\"select * from commodity where (name=:name)\"); // Looking for the commodity id\n  query.bindValue(\":name\",ui-&gt;Commodity-&gt;currentText());\n  query.exec();\n  query.next();\n  commodity=query.value(0).toInt();\n  query.prepare(\"select * from quality where (id_commodity=:commodity)\");\n  query.bindValue(\":commodity\",commodity);\n  query.exec();\n  query.next();\n  query.last();\n  totalQualityDefects = query.at()&lt;0 ? 0 : query.at()+1;\n  ui-&gt;quality-&gt;setColumnCount(2);       // Setting the column and row counts for the table\n  ui-&gt;quality-&gt;setRowCount(totalQualityDefects);\n  ui-&gt;quality-&gt;setHorizontalHeaderLabels(QString(\"Defect;Percent\").split(\";\"));\n  ui-&gt;quality-&gt;setColumnWidth(0,60);\n  ui-&gt;quality-&gt;setColumnWidth(1,60);\n  query.first();      // Movind the pointer of the query back to before the first record\n  query.previous();\n  int currentRow=0;\n  while (query.next()) {    // Filling the table with the defect names\n      defects.prepare(\"select name from defects where (id=:id)\");\n      defects.bindValue(\":id\",query.value(2).toInt());\n      defects.exec();\n      defects.next();\n      ui-&gt;quality-&gt;setItem(currentRow,0,new QTableWidgetItem(defects.value(0).toString()));\n      ui-&gt;quality-&gt;setItem(currentRow,1,new QTableWidgetItem(QString::number(0.00,'f',2)));\n      ui-&gt;quality-&gt;item(currentRow,1)-&gt;setTextAlignment(Qt::AlignRight|Qt::AlignVCenter);\n      currentRow++;\n    }\n}\n</code></pre>\n\n<p>and here the one to update the table when there are changes on the quality report:</p>\n\n<pre><code>void RepackProcess::updateTotalLosses()\n{\n  totalLoss=0;\n  QSqlQuery query;\n  query.prepare(\"select * from commodity where name=:name\");\n  query.bindValue(\":name\",commodityLabel);\n  query.exec();\n  query.next();\n  int commodityId=query.value(0).toInt();\n  for(int x=0; x&lt;totalQualityDefects;x++)\n    {\n      qDebug()&lt;&lt;x;\n      QString defect=ui-&gt;quality-&gt;item(x,0)-&gt;text();\n      qDebug()&lt;&lt;defect;\n      query.prepare(\"select * from defects where name=:name\");\n      query.bindValue(\":name\",defect);\n      query.exec();\n      query.next();\n      int defectId = query.value(0).toInt();\n      query.prepare(\"select * from quality where (id_commodity=:commodity and id_defects=:defects)\");\n      query.bindValue(\":commodity\",commodityId);\n      query.bindValue(\":defects\",defectId);\n      query.exec();\n      query.next();\n      qDebug()&lt;&lt;query.lastError();\n      if(ui-&gt;quality-&gt;item(x,1)-&gt;text().toFloat()&lt;query.value(3).toFloat())\n        {\n          totalLoss += ui-&gt;quality-&gt;item(x,1)-&gt;text().toFloat() * query.value(4).toFloat();\n        }\n      else if(ui-&gt;quality-&gt;item(x,1)-&gt;text().toFloat()&lt;query.value(5).toFloat())\n        {\n          totalLoss += ui-&gt;quality-&gt;item(x,1)-&gt;text().toFloat() * query.value(6).toFloat();\n        }\n      else\n        {\n          totalLoss += ui-&gt;quality-&gt;item(x,1)-&gt;text().toFloat() * query.value(8).toFloat();\n        }\n    }\n  ui-&gt;totalLoss-&gt;setText(QString::number(totalLoss,'f',2));\n}\n</code></pre>\n\n<p>My problem is the following, with the connect function on the constructor I get an error when filling up the table. It seems to me that the program is calling the update function before the table is fully populated and the program crashes on the second line of the table. As the table is being filled up, the connect notice a change on the data and triggers the update, which knows the number of lines that are in the table</p>\n\n<p>If I take the connect out and replace with a button for update works with no problem. I was looking at all the signals from the table view and could not find one that only triggers when data has been accessed from the screen.</p>\n\n<p>Sorry for the long post, but you always ask for code.</p>\n\n<pre><code>#ifndef REPACKPROCESS_H\n#define REPACKPROCESS_H\n\n#include &lt;QWidget&gt;\n#include &lt;QMdiSubWindow&gt;\n#include &lt;QPrinter&gt;\n\n#include \"database.h\"\n\nnamespace Ui {\n  class RepackProcess;\n}\n\nclass RepackProcess : public QMdiSubWindow\n{\n  Q_OBJECT\n\npublic:\n  explicit RepackProcess(DataBase *d, QPrinter *p, QWidget *parent = 0);\n  ~RepackProcess();\n\n  void fillQualityReport(void);  // This function will resize and change the quality table for imput\n  void loadDropDownMenus(void); // This function reads the tables and adds the selection to the drop down.\n\n  void updateRepackCost(void);  // This function updates the costs table when parameters are changed\n  void updateSheetCalculation(void); // This function updates all the calculations of the sheet\n\n\nprivate slots:\n  void on_Commodity_activated(const QString &amp;arg1);\n  void on_Warehouse_activated(const QString &amp;arg1);\n  void on_Format_activated(const QString &amp;arg1);\n  void on_totalCases_valueChanged(int arg1);\n  void updateTotalLosses(int col, int row);  // This function updates the estimated total loses\n\n  void on_updateLoss_clicked();\n\nprivate:\n  Ui::RepackProcess *ui;\n  DataBase *data;\n  QPrinter *printer;\n\n  QSqlRelationalTableModel *costsModel;\n\n  QString countryLabel, commodityLabel, modeLabel, warehouseLabel, formatLabel;\n\n  int totalCases;  // This is the total number of cases that started the process\n  float totalLoss; // Thi is the percentage of total loses in the process.\n  int totalQualityDefects; // This is the number of defect that are showing on the quality report.\n\n};\n\n#endif // REPACKPROCESS_H\n</code></pre>\n"}, {"tags": ["c++", "max", "min", "c++17", "stdoptional"], "comments": [{"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 10, "creation_date": 1501707020, "post_id": 45470708, "comment_id": 77902514, "body": "I don&#39;t see how this is confusing. <a href=\"http://en.cppreference.com/w/cpp/algorithm/max\" rel=\"nofollow noreferrer\"><code>std::max</code></a> expects its two parameters to have the same type."}, {"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 5, "creation_date": 1501707065, "post_id": 45470708, "comment_id": 77902552, "body": "<a href=\"http://en.cppreference.com/w/cpp/utility/optional/operator_cmp\" rel=\"nofollow noreferrer\"><code>std::optional</code></a> has comparison operators; you might do <code>std::max(oint{x}, oy)</code>"}, {"owner": {"reputation": 56338, "user_id": 4573247, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/JHd9a.png?s=128&g=1", "display_name": "dfrib", "link": "https://stackoverflow.com/users/4573247/dfrib"}, "edited": false, "score": 0, "creation_date": 1501707876, "post_id": 45470708, "comment_id": 77902952, "body": "... or, as a worse alternative, going the roundabout one-off manual way with <code>std::max(x, oy.value_or(std::numeric_limits&lt;int&gt;::min()));</code>."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1501708456, "post_id": 45470708, "comment_id": 77903230, "body": "I don&#39;t see the reason for the down-votes. It&#39;s well written, with a MCVE and a mostly definitive answer."}, {"owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "reply_to_user": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1501708576, "post_id": 45470708, "comment_id": 77903292, "body": "@StoryTeller: It&#39;s StackOverflow. People are unfriendly to say the least."}, {"owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "reply_to_user": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 0, "creation_date": 1501708710, "post_id": 45470708, "comment_id": 77903349, "body": "@Justin: I didn&#39;t say it was confusing. I just don&#39;t know whether there&#39;s an exception planned for <code>std::optional</code>&#39;s."}, {"owner": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 4, "creation_date": 1501708889, "post_id": 45470708, "comment_id": 77903461, "body": "Considering Justin&#39;s solution I dont see why <code>std::max</code> needs an exception for <code>std::optional</code>."}, {"owner": {"reputation": 10203, "user_id": 4672588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edcbc85fb3b43202dab37afb2bd5281e?s=128&d=identicon&r=PG&f=1", "display_name": "cpplearner", "link": "https://stackoverflow.com/users/4672588/cpplearner"}, "edited": false, "score": 6, "creation_date": 1501709068, "post_id": 45470708, "comment_id": 77903566, "body": "Becausr this question does not show any research effort and is written in a way that does not seem helpful to future readers?"}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 10203, "user_id": 4672588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edcbc85fb3b43202dab37afb2bd5281e?s=128&d=identicon&r=PG&f=1", "display_name": "cpplearner", "link": "https://stackoverflow.com/users/4672588/cpplearner"}, "edited": false, "score": 0, "creation_date": 1501709345, "post_id": 45470708, "comment_id": 77903709, "body": "@cpplearner - It shows more research effort than 75% of questions on SO. And since when are we penalizing someone for not knowing <i>where</i> to look? The voting mechanism is to address quality. And helping future readers is what community editing is for, not to mention <i>commenting</i> on the post to let the OP <i>know how to improve</i>."}, {"owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "reply_to_user": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 0, "creation_date": 1501709436, "post_id": 45470708, "comment_id": 77903736, "body": "@Borgleader: I didn&#39;t try to <i>argue</i> for it, I asked if something like this was planned to be in the standard or not, that&#39;s it. I wonder if people downvoted because of this reason..."}, {"owner": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 4, "creation_date": 1501709982, "post_id": 45470708, "comment_id": 77903943, "body": "I&#39;m not saying you did, all I&#39;m saying is I dont see the point of it. Furthermore theres no need for the standard to explicitly &quot;forbid this&quot;, and theres no &quot;undefinability&quot;, max takes 2 arguments <i>of the same type</i> these  dont have the same type so theres nothing to say because by the definition of max it&#39;s not supposed to work. They <i>could</i> make an exception, but again, Justin presented an elegant solution to that and since you&#39;re not making a case for why this should be in the standard or why someone may have wanted this in the standard I&#39;m not sure where you&#39;re going with this question."}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "reply_to_user": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 0, "creation_date": 1501710953, "post_id": 45470708, "comment_id": 77904334, "body": "@Justin <code>std::max({x}, oy)</code> should do it."}, {"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1501711144, "post_id": 45470708, "comment_id": 77904405, "body": "@T.C. That&#39;s <a href=\"https://wandbox.org/permlink/taEts2coVbc9gcmx\" rel=\"nofollow noreferrer\">catching the <code>initializer_list</code> overload</a>, and failing because <code>oy</code> isn&#39;t callable as a comparator."}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "reply_to_user": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 0, "creation_date": 1501711183, "post_id": 45470708, "comment_id": 77904419, "body": "@Justin Bah, <code>std::max(oy, {x})</code> then. I want concepts and properly constrained algorithms <i>now</i>."}, {"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1501711283, "post_id": 45470708, "comment_id": 77904454, "body": "@T.C. Yes, you can do <code>std::max(oy, {x})</code>, but I wouldn&#39;t because it is clearer to me to do <code>std::max(oy, oint{x})</code>. But that comes down to preference, especially if you don&#39;t have the type alias for <code>oint</code> to begin with"}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "reply_to_user": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 0, "creation_date": 1501711317, "post_id": 45470708, "comment_id": 77904473, "body": "@Justin Right, the neat thing about it is not having to repeat the type."}, {"owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "reply_to_user": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 0, "creation_date": 1501712080, "post_id": 45470708, "comment_id": 77904721, "body": "@Justin: Thank you for your comments. I can see why you would think that&#39;s the reasonable thing to expect. My intuition says &quot;if there&#39;s no value in the optional it&#39;s like a maximum with a single argument&quot;."}], "answers": [{"tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": true, "score": 3, "last_activity_date": 1501715329, "creation_date": 1501715329, "answer_id": 45472370, "question_id": 45470708, "link": "https://stackoverflow.com/questions/45470708/does-c-standardize-the-behavior-of-stdoptional-under-stdmin-and-stdmax/45472370#45472370", "title": "Does C++ standardize the behavior of std::optional under std::min and std::max?", "body": "<blockquote>\n  <p>Is something like what I expected standardized in C++17</p>\n</blockquote>\n\n<p>No.</p>\n\n<blockquote>\n  <p>, or proposed for standardization later? </p>\n</blockquote>\n\n<p>There is no such proposal in any of the <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2017/\" rel=\"nofollow noreferrer\">mailings</a>. </p>\n\n<p>Though of course there's plenty of easy workarounds, so there's little reason for such a proposal:</p>\n\n<pre><code>oy ? std::max(x,*oy) : x;\nx &lt; oy ? *oy : x\n*std::max(oint(x), oy)\n*std::max&lt;oint&gt;(x, oy)\n*std::max(oy, {x})\nstd::max(x, oy.value_or(x))\n</code></pre>\n\n<p>There's probably others. The first two can't give you a dangling reference, the last four could. </p>\n"}], "owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 552, "favorite_count": 0, "accepted_answer_id": 45472370, "answer_count": 1, "score": -6, "last_activity_date": 1501715329, "creation_date": 1501706798, "last_edit_date": 1501708661, "question_id": 45470708, "link": "https://stackoverflow.com/questions/45470708/does-c-standardize-the-behavior-of-stdoptional-under-stdmin-and-stdmax", "title": "Does C++ standardize the behavior of std::optional under std::min and std::max?", "body": "<p>I don't have a very recent compiler installed to get a hint of what the final <code>std::optional</code> semantics are going to be. But in C++14, the following:</p>\n\n<pre><code>#include &lt;experimental/optional&gt;\n#include &lt;algorithm&gt;\n\nint main()\n{\n    using oint = std::experimental::optional&lt;int&gt;;\n    int x = std::max(1, 2);\n    auto oy = oint{3};\n    auto z = std::max(x, oy);\n}\n</code></pre>\n\n<p>does not compile. Now, in the future, I would expect/hope that <code>z</code> would get <code>3</code> in this case; and if <code>oy = oint{}</code> then  <code>z</code> could get <code>2</code>. </p>\n\n<p>Is something like what I expected standardized in C++17, or proposed for standardization later? Alternatively, is the <em>undefinability</em> standardized (like it sort of is in C++14)?</p>\n\n<p>Note: The motivation here is possibly implementing something myself, for pre-C++17 code; if something relevant is planned to be standardized I'll try to match that.</p>\n"}, {"tags": ["c++", "lib"], "comments": [{"owner": {"reputation": 3213, "user_id": 6084430, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/B0TaE.jpg?s=128&g=1", "display_name": "DimChtz", "link": "https://stackoverflow.com/users/6084430/dimchtz"}, "edited": false, "score": 5, "creation_date": 1501706798, "post_id": 45470655, "comment_id": 77902405, "body": "You can&#39;t recompile the lib itself. You need the source code."}, {"owner": {"reputation": 4328, "user_id": 920069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd39f0db1f22e1314746491df063602a?s=128&d=identicon&r=PG", "display_name": "Retired Ninja", "link": "https://stackoverflow.com/users/920069/retired-ninja"}, "edited": false, "score": 0, "creation_date": 1501706986, "post_id": 45470655, "comment_id": 77902502, "body": "Those are both related to SafeSEH. You can turn that off in your current project and you may be able to link to the lib then if you do not have the source code to recompile it."}, {"owner": {"reputation": 322, "user_id": 4421970, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-DH9v1ryfMNI/AAAAAAAAAAI/AAAAAAAAAJU/mmvfz1AB9CA/photo.jpg?sz=128", "display_name": "Peter", "link": "https://stackoverflow.com/users/4421970/peter"}, "edited": false, "score": 0, "creation_date": 1501707011, "post_id": 45470655, "comment_id": 77902509, "body": "It seems to me that you can try and remove the /SAFESEH flag from the compiler and try again"}, {"owner": {"reputation": 373, "user_id": 3344076, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/0106491717df6c68ab30a6a83f62ea1c?s=128&d=identicon&r=PG&f=1", "display_name": "Lotzi11", "link": "https://stackoverflow.com/users/3344076/lotzi11"}, "edited": false, "score": 0, "creation_date": 1501707103, "post_id": 45470655, "comment_id": 77902568, "body": "I tried to turn off /SAFESEH, but I get the Error <a href=\"https://msdn.microsoft.com/en-us/library/799kze2z.aspx\" rel=\"nofollow noreferrer\">LNK2019</a> when I do"}, {"owner": {"reputation": 322, "user_id": 4421970, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-DH9v1ryfMNI/AAAAAAAAAAI/AAAAAAAAAJU/mmvfz1AB9CA/photo.jpg?sz=128", "display_name": "Peter", "link": "https://stackoverflow.com/users/4421970/peter"}, "edited": false, "score": 0, "creation_date": 1501707111, "post_id": 45470655, "comment_id": 77902571, "body": "edit: &quot;If /SAFESEH:NO is specified, the linker will not produce an image with a table of safe exceptions handlers even if all modules are compatible with the safe exception handling feature.&quot;"}, {"owner": {"reputation": 322, "user_id": 4421970, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-DH9v1ryfMNI/AAAAAAAAAAI/AAAAAAAAAJU/mmvfz1AB9CA/photo.jpg?sz=128", "display_name": "Peter", "link": "https://stackoverflow.com/users/4421970/peter"}, "edited": false, "score": 0, "creation_date": 1501707185, "post_id": 45470655, "comment_id": 77902617, "body": "If you remove /SAFESEH, then it will try to produce safe exception handler table, so specify /SAFESEH:NO ;)"}, {"owner": {"reputation": 322, "user_id": 4421970, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-DH9v1ryfMNI/AAAAAAAAAAI/AAAAAAAAAJU/mmvfz1AB9CA/photo.jpg?sz=128", "display_name": "Peter", "link": "https://stackoverflow.com/users/4421970/peter"}, "edited": false, "score": 0, "creation_date": 1501707233, "post_id": 45470655, "comment_id": 77902636, "body": "&quot;If /SAFESEH is not specified, the linker will produce an image with a table of safe exceptions handlers if all modules are compatible with the safe exception handling feature.&quot;"}, {"owner": {"reputation": 12286, "user_id": 1607442, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/18451ad16ed8ad45b0a18bf70b2aa002?s=128&d=identicon&r=PG", "display_name": "Ivan Aksamentov - Drop", "link": "https://stackoverflow.com/users/1607442/ivan-aksamentov-drop"}, "edited": false, "score": 0, "creation_date": 1501707980, "post_id": 45470655, "comment_id": 77903008, "body": "Binaries produced by VC++ compilers of different major versions cannot be linked together. They are not ABI-compatible. Even if you figure out safeseh issue, linker will miss some symbols, and even if you figure out this, the behavior of program is still undefined. Forget the idea. You either need source code for the library or to use the same compiler with which it was built back then."}], "owner": {"reputation": 373, "user_id": 3344076, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/0106491717df6c68ab30a6a83f62ea1c?s=128&d=identicon&r=PG&f=1", "display_name": "Lotzi11", "link": "https://stackoverflow.com/users/3344076/lotzi11"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 131, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1501706952, "creation_date": 1501706581, "last_edit_date": 1501706952, "question_id": 45470655, "link": "https://stackoverflow.com/questions/45470655/how-to-recompile-an-old-lib-file", "title": "How to Recompile an old lib file", "body": "<p>I am trying to build a C++ project, that was created in 2003, in VS2015. Whenever I try to build the project, I get the following Linker Tool Errors on one of the lib files:</p>\n\n<p><a href=\"https://msdn.microsoft.com/en-us/library/100ezk17.aspx\" rel=\"nofollow noreferrer\">LNK2026</a>\n<a href=\"https://msdn.microsoft.com/en-us/library/afa9eakh(v=vs.90).aspx\" rel=\"nofollow noreferrer\">LNK1281</a></p>\n\n<p>From all the research I've done, it looks like the lib file is outdated and needs to be recompiled using a new toolkit. However, I'm not sure which toolkit I should use. Does anybody know how to recompile an old lib file?</p>\n"}, {"tags": ["c++", "arrays"], "comments": [{"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 7, "creation_date": 1501705417, "post_id": 45470304, "comment_id": 77901631, "body": "<b><i>What happens?  It should not work, right?</i></b> This is Undefined behavior."}, {"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 0, "creation_date": 1501705717, "post_id": 45470304, "comment_id": 77901800, "body": "And this is why you should prefer containers such as <code>std::vector</code> and <code>std::array</code> (or using smart pointers if you really require pointers) to working with raw pointers and arrays"}, {"owner": {"reputation": 820, "user_id": 4266707, "user_type": "registered", "accept_rate": 69, "profile_image": "https://lh4.googleusercontent.com/-fLyyGXepW68/AAAAAAAAAAI/AAAAAAAAABI/RjSsIhv1dvs/photo.jpg?sz=128", "display_name": "Javia1492", "link": "https://stackoverflow.com/users/4266707/javia1492"}, "reply_to_user": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 0, "creation_date": 1501705881, "post_id": 45470304, "comment_id": 77901906, "body": "@UnholySheep That&#39;s a <b>smart</b> idea. See what I did there?"}, {"owner": {"reputation": 1424, "user_id": 752581, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/2a8efe38a3ac39e29d2323cb10f3f1ba?s=128&d=identicon&r=PG", "display_name": "Tyrel Van Niekerk", "link": "https://stackoverflow.com/users/752581/tyrel-van-niekerk"}, "edited": false, "score": 0, "creation_date": 1501706681, "post_id": 45470304, "comment_id": 77902355, "body": "Thanks Baum, I could not find any answers, probably did not have the correct search string."}], "owner": {"reputation": 1424, "user_id": 752581, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/2a8efe38a3ac39e29d2323cb10f3f1ba?s=128&d=identicon&r=PG", "display_name": "Tyrel Van Niekerk", "link": "https://stackoverflow.com/users/752581/tyrel-van-niekerk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 40, "favorite_count": 0, "closed_date": 1501705798, "answer_count": 0, "score": 0, "last_activity_date": 1501705418, "creation_date": 1501705381, "last_edit_date": 1501705418, "question_id": 45470304, "link": "https://stackoverflow.com/questions/45470304/array-delete-where-the-pointer-to-the-array-is-not-pointing-to-the-start-of-the", "closed_reason": "Duplicate", "title": "Array delete where the pointer to the array is not pointing to the start of the array", "body": "<p>I came across some code in a very old application I am debugging and I fixed it, but I am not sure what the actual behavior is.</p>\n\n<p>So for instance:</p>\n\n<pre><code>char* p = new char[10];\ndelete[] p;\n</code></pre>\n\n<p>So this works because the runtime keeps track of the head of the array and when you delete[] it knows to delete 10 bytes? At least that's what I understand.</p>\n\n<p>However, if some brainiac does this:</p>\n\n<pre><code>char* p = new char[10];\np += 5;\ndelete[] p;\n</code></pre>\n\n<p>What happens?  It should not work, right?  You are trying to delete an array, but at the current location of p the runtime cannot determine what array you are trying to delete.</p>\n"}, {"tags": ["c++", "qt", "deserialization"], "comments": [{"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1501705404, "post_id": 45470225, "comment_id": 77901626, "body": "aside: Many of those <code>if</code> blocks should be <code>else if</code>s, as unless the optimiser is really kind to you, you are making the compiler pointlessly check for things that you have already proven above cannot be true. Or just use <code>switch</code>/<code>case</code>, which also ensures you don&#39;t need to either call getters multiple times redundantly or cache the result in a temporary."}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 1, "creation_date": 1501705499, "post_id": 45470225, "comment_id": 77901673, "body": "Anyway, it seems to me that you should be stepping through the code with a real debugger and identifying where things start to go sideways, instead of parodying a debugger using print statements. :P"}, {"owner": {"reputation": 345, "user_id": 2838027, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/tBf60.jpg?s=128&g=1", "display_name": "Saryk", "link": "https://stackoverflow.com/users/2838027/saryk"}, "reply_to_user": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1501705623, "post_id": 45470225, "comment_id": 77901741, "body": "@underscore_d indeed, changed them to <code>else if</code>s. Not solving the issue though :p"}], "answers": [{"comments": [{"owner": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "edited": false, "score": 2, "creation_date": 1501709159, "post_id": 45470468, "comment_id": 77903616, "body": "About &quot;avoid new&quot;, since this is Qt code: In Qt there usually are quite a lot of <code>new</code> used (but not <code>delete</code>) when creating <code>QObject</code> subclass instances, and this is fine. This is because these objects use parent-child mechanism and parents own their children and delete them on destruction etc (so having double ownership with a strong smart pointer is generally a bad idea)."}, {"owner": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "edited": false, "score": 0, "creation_date": 1501709198, "post_id": 45470468, "comment_id": 77903635, "body": "Of course the question code does not use <code>QObject</code> subclass, so using a smart pointer is the way to go."}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "reply_to_user": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "edited": false, "score": 0, "creation_date": 1501709345, "post_id": 45470468, "comment_id": 77903710, "body": "@hyde Fair enough, good clarification. Indeed, my choice <code>gtkmm</code> defaults to automatic duration, but allows delegating ownership to a parent by creating with <code>Gtk::manage(new SomeClass)</code>, thus granting the &#39;floating reference&#39; behaviour that&#39;s default in GTK+, then sinking the reference by adding it to a container. I never used it before, but I&#39;ve found it&#39;s handy for widgets I never need to use again, instead of e.g. having to declare them as class members if they&#39;re just implementation details. I wish <code>gtkmm</code> had a wrapper func so I didn&#39;t have to type <code>new</code>, i.e. could take my own advice :P"}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "reply_to_user": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "edited": false, "score": 0, "creation_date": 1513606804, "post_id": 45470468, "comment_id": 82705804, "body": "@downvoter: Do you have a point? Or are you just in the middle of a tantrum?"}], "tags": [], "owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "is_accepted": false, "score": 4, "last_activity_date": 1501710120, "last_edit_date": 1501710120, "creation_date": 1501705921, "answer_id": 45470468, "question_id": 45470225, "link": "https://stackoverflow.com/questions/45470225/returning-object-loses-properties/45470468#45470468", "title": "Returning object loses properties", "body": "<h1>The problem</h1>\n\n<p><code>getGameObjectVariable()</code>'s local variable <code>GameObjectVariable *gov</code> is an uninitialised pointer, which you suddenly cast to some other type and then start trying to call methods on.</p>\n\n<p>How did you expect that to end? You are telling the compiler this: <em>Poke at random memory as if it holds an allocated, initialised object. Also, this object might have any of 3 different types.</em></p>\n\n<p>Seriously: What did you think was happening in that function, that it was somehow producing a usable object? I'm genuinely curious.</p>\n\n<p>Anyway, for at least three reasons, this is malformed code that exhibits completely undefined behaviour:</p>\n\n<ul>\n<li>The pointer is uninitialised, so like any uninitialised variable, reading/dereferencing it is UB.</li>\n<li>No object is alive at the (invalid) address to which it points, but you call methods on it as if an object lives there; that is UB.</li>\n<li>Said methods then presumably start writing stuff to whatever arbitrary address you happened to end up at, with no permission, which is <em>lethal</em> UB.</li>\n</ul>\n\n<p>(Also, even if there was valid memory to access and a valid object at it, casting the pointer to another type then using it is only valid if an instance of that other type was specifically allocated at that address - or some more-derived one, but then the C-style cast is (A) bad style and (B) potentially very dangerous if e.g. multiple and/or virtual inheritance are in play.)</p>\n\n<p>Due to all this UB, anything can happen, or nothing might happen, or exactly what you want <em>just might</em> happen - but the code is fundamentally broken.</p>\n\n<p>For example, as seems to have occurred here, the compiler might <em>coincidentally</em> act like there is a valid object while within the same function, but then you return that garbage pointer to <code>getGameObject()</code>, and it suddenly reveals that you fed it rubbish.</p>\n\n<p>UB gives the compiler, and particularly its optimising layers, free reign to do whatever they want, chiefly because they are allowed to assume UB does not happen. So, e.g. they can assume there must be a valid object pointed to by <code>gov</code>, even if there blatantly isn't. That assumption gets lost after you return, though, for whatever reason.</p>\n\n<p>Who knows? The precise reasons for the observed behaviour are pretty uninteresting to speculate about. You can produce assembly output if you really want to know why what happened happened.</p>\n\n<h1>The (immediate) solution</h1>\n\n<p>But the key point is this: You need to replace this particular mess with proper, valid code - and <em>fast</em>. So, you need to assign a valid value to the pointer, by assigning it the address of a newly allocated object of whichever type is required. Only then do you have an address to which you are allowed access, with a living object at it, of the right type. It's then OK to create a cast pointer of the real derived type to call derived methods, but return a pointer-to-base for others to use.</p>\n\n<h1>Conditionally calling methods, etc.</h1>\n\n<p>Also, those conditional casts and calls to <code>setValue()</code> look suspicious. Why not just make that a virtual method and let the compiler resolve the right variation? Generally, if you have some conditional construct deciding which method to call based on the real type... You should just use virtual functions. Most concern about their overhead is FUD, and most attempts to avoid that overhead are no more efficient to execute and much worse to read.</p>\n\n<p>For instance, do you expect all users of any <code>GameObjectVariable</code> to repeat the same hoop-jumping exercise of checking what type it is and casting to the equivalent type of pointer to call the right (derived, hiding-not-overriding) version of <code>setValue()</code>? Hello, boilerplate spaghetti code, for no reason.</p>\n\n<p>I think this points at more general bad patterns in your design. Rather than having huge functions that repeatedly have to check the type and do different things, with different lists depending on the type, etc. - why not simply check the type specified by the input line, and construct a new object of that type with, for example, the rest of the line as an argument, letting it create and populate whatever type of list and any other specific attributes it needs? Then you'll have tidy methods that do single things, not labyrinths that must constantly remind themselves what kind of object they're working with.</p>\n\n<h1>Avoid <code>new</code></h1>\n\n<p>Note that I said said to assign the pointer from \"a newly allocated object\", not <em>a <code>new</code>ly allocated object</em>... Most people should not ever need to use raw <code>new</code> or <code>delete</code> in C++, so you should return a <code>unique_ptr</code>, ideally from <code>std::make_unique&lt;Foo&gt;(args)</code>.</p>\n\n<p>There is a fair exception if, as <a href=\"https://stackoverflow.com/users/1717300/hyde\">hyde</a> points out in the comments, your new object is of a type that should have its lifetime managed by a parent object to which it is then added. Then <code>new</code> is OK - assuming there's no better way to phrase it, like I dunno, <code>make_floating_reference&lt;Foo&gt;(args)</code>. But, as hyde also said, that isn't the case for your <code>GameObjectVariable</code>, so a smart pointer is the way to go for that.</p>\n\n<p>(Normally I would say you probably don't need dynamic allocation at all, but since you appear to need polymorphism and the objects clearly don't comprise a known set on the stack to which you could push non-owning pointers/reference-wrappers into the container, it seems that you do.)</p>\n"}], "owner": {"reputation": 345, "user_id": 2838027, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/tBf60.jpg?s=128&g=1", "display_name": "Saryk", "link": "https://stackoverflow.com/users/2838027/saryk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 0, "closed_date": 1502582306, "answer_count": 1, "score": 0, "last_activity_date": 1501710120, "creation_date": 1501705178, "last_edit_date": 1501706453, "question_id": 45470225, "link": "https://stackoverflow.com/questions/45470225/returning-object-loses-properties", "closed_reason": "Not suitable for this site", "title": "Returning object loses properties", "body": "<p>This is basically my main function :</p>\n\n<pre><code>void    GameObject::deserialize(QList&lt;GameObject*&gt; *list)\n{\n  QFile _file(_filename);\n  if (!_file.open(QIODevice::ReadOnly | QFile::Text))\n  {\n    qDebug() &lt;&lt; \"Couldn't open file to read\";\n    return;\n  }\n  QTextStream in(&amp;_file);\n\n  while (!in.atEnd())\n  {\n    QString currentline = in.readLine();\n    if (currentline.startsWith(\"GameObject {\"))\n    {\n      list-&gt;append(getGameObject(&amp;in, currentline));\n    }\n  }\n  _file.close();\n}\n</code></pre>\n\n<p>It opens a file, and parses it for <code>GameObject</code>s.</p>\n\n<p>The <code>getGameObject</code> <em>(cleaned up)</em> function is this one :</p>\n\n<pre><code>GameObject    *GameObject::getGameObject(QTextStream *in, QString current_line)\n{\n  GameObject *go = new GameObject();\n  QList&lt;GameObjectVariable*&gt; govl;\n\n  bool ok;\n  while (!in-&gt;atEnd() &amp;&amp; !current_line.startsWith(\"} end GameObject\"))\n  {\n    current_line = in-&gt;readLine();\n    if (current_line.startsWith(\"GameObjectVariable\")) {\n      GameObjectVariable *gov = this-&gt;getGameObjectVariable(in, current_line);\n      govl.append(gov);\n      go-&gt;setVariableList(&amp;govl);\n      qDebug() &lt;&lt; QString(\"AR : Type As String of the returned object : \") + gov-&gt;getTypeAsAString();\n      qDebug() &lt;&lt; QString(\"AR : Type as number : \") + QString::number(gov-&gt;getType());\n      if (gov-&gt;getType() == NUMBER_LIST) {\n        qDebug() &lt;&lt; \"Number List\";\n        qDebug() &lt;&lt; QString(\"Value as a string of the number list : \") + ((GameObjectVariableNumberList*)gov)-&gt;getValueAsAString();\n      }\n      else if (gov-&gt;getType() == STRING_LIST) {\n        qDebug() &lt;&lt; \"String List\";\n        qDebug() &lt;&lt; QString(\"Value as a string of the string list : \") + ((GameObjectVariableStringList*)gov)-&gt;getValueAsAString();\n      }\n      else if (gov-&gt;getType() == GAMEOBJECT) {\n        qDebug() &lt;&lt; \"GameOBject\";\n        qDebug() &lt;&lt; QString(\"Value as a string of the gameobject : \") + ((GameObjectVariableGameObject*)gov)-&gt;getValueAsAString();\n      }\n    }\n  }\n  return go;\n}\n</code></pre>\n\n<p>This one basically is a big mess of <code>if</code>s, but it works, up to a point. The goal of this function is to read line by line, and return a gameobject filled with the read info. This is a weird format we use for the project though.</p>\n\n<p>The last bunch of lines are Debug lines I've put in to try to understand where the problem was.</p>\n\n<p>This is the other <em>(cleaned up)</em> function that's related : </p>\n\n<pre><code>GameObjectVariable* GameObject::getGameObjectVariable(QTextStream *in, QString current_line)\n{\n    GameObjectVariable *gov;\n    bool ok;\n    int type;\n    QList&lt;QString&gt; ls;\n    QList&lt;int&gt; ln;\n    QList&lt;GameObject*&gt; lgo;\n\n\n    while (!in-&gt;atEnd() &amp;&amp; !current_line.startsWith(\"} end GameObjectVariable\")) {\n        current_line = in-&gt;readLine();\n        if (current_line.startsWith(\"type: \"))\n        {\n            type = current_line.right(current_line.size() - 5).toInt(&amp;ok, 10);\n        }\n        else if (current_line.startsWith(\"value: \")) {\n            if (current_line.startsWith(\"value: {\"))\n            {\n                while (!in-&gt;atEnd() &amp;&amp; !current_line.startsWith(\"} end value\"))\n                {\n                    current_line = in-&gt;readLine();\n                    if (!current_line.startsWith(\"} end value\"))\n                    {\n                        if (type == GAMEOBJECT_LIST)\n                        {\n                            lgo.append(getGameObject(in, current_line));\n                        }\n                        else if (type == STRING_LIST)\n                        {\n                            ls.append(current_line);\n                        }\n                        else if (type == NUMBER_LIST)\n                        {\n                            ln.append(current_line.toInt(&amp;ok, 10));\n                        }\n                    }\n                }\n                if (type == GAMEOBJECT_LIST)\n                   ((GameObjectVariableGameObjectList*) gov)-&gt;setValue(&amp;lgo);\n                else if (type == STRING_LIST)\n                    ((GameObjectVariableStringList*) gov)-&gt;setValue(&amp;ls);\n                else if (type == NUMBER_LIST)\n                    ((GameObjectVariableNumberList*) gov)-&gt;setValue(&amp;ln);\n            }\n        }\n    }\n    qDebug() &lt;&lt; QString(\"BR : Get the type as string : \") + gov-&gt;getTypeAsAString();\n    qDebug() &lt;&lt; QString(\"BR : Get the type as number : \") + QString::number(gov-&gt;getType());\n    qDebug() &lt;&lt; QString(\"BR : get the value as string of the object : \") + gov-&gt;getValueAsAString();\n\n    return gov;\n}\n</code></pre>\n\n<p>This function reads the lines in the <code>GameObjectVariable</code> 'tag'. The type is a defined int that is macroed to the text type we use for the other <code>if</code> forest. \nNow this again works fine, except for when we have a list of values (the part that starts with <code>else if (current_line.startsWith(\"value: {\"))</code>).</p>\n\n<p><strong>The debug lines at the end of the function (the \"BR :\" ones) show the object properly filled, but the ones at the end of the <code>getGameObject</code> calling function (starting with \"AR :\") crash, because apparently the value is null.</strong></p>\n\n<p><code>GameObjectVariable</code> object is this one <em>(again, cleaned up)</em> : </p>\n\n<pre><code>class GameObjectVariable\n{\npublic:\n    GameObjectVariable(QString name, QList&lt;int&gt; idListEdit = QList&lt;int&gt;(), QList&lt;int&gt; idListView = QList&lt;int&gt;());\n\n    // GETTERS\n    QString                         getName()                                       {return this-&gt;name;}\n    int                             getType()                                       {return this-&gt;type;}\n    void                            *getValue()                                     {return this-&gt;value;}\n\n    // SETTERS\n    void                            setName(QString name)                           {this-&gt;name = name;}\n    void                            setValue(void* value)                           {this-&gt;value = value;}\n\n    QString                         getTypeAsAString();\n    virtual QString                 getValueAsAString() = 0;\n\nprivate:\n    QString                         name;\n\nprotected:\n    void                            *value;\n    int                             type;\n};\n</code></pre>\n\n<p><code>getValueAsAString</code> is set as virtual because every type mentioned in the code above (like <code>GameObjectVariableStringList</code> overwrite this one with a return of their <code>value</code> with the correct type)</p>\n\n<p>Finally, here is an example of file we try to deserialize :</p>\n\n<pre><code>GameObject {\nname: Number 1\ntype: Test\nGameObjectVariableStringList: {\ntype: 3\nname: List String\nvalue: {\nString 1\nString 2\n} end value\n} end GameObjectVariable\n</code></pre>\n\n<p>(<code>type: 3</code> corresponds to <code>STRING_LIST</code>)</p>\n\n<p>The main problem is bolded.</p>\n"}, {"tags": ["c++", "struct"], "comments": [{"owner": {"reputation": 5397, "user_id": 2193020, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/aa10d01a3d48851073bd61877a56b5a7?s=128&d=identicon&r=PG", "display_name": "hnefatl", "link": "https://stackoverflow.com/users/2193020/hnefatl"}, "edited": false, "score": 0, "creation_date": 1501705269, "post_id": 45470213, "comment_id": 77901560, "body": "Assuming you&#39;re using an <code>ostream</code>, can you not just do eg. <code>out_file &lt;&lt; rec.print_this &lt;&lt; rec.also_print_this</code>? See <a href=\"http://www.cplusplus.com/reference/ostream/ostream/operator%3C%3C/\" rel=\"nofollow noreferrer\">here</a> for the docs. If you&#39;re fixed with using binary output, you can use <code>out_file.write((char *)&amp;rec.print_this)</code>."}, {"owner": {"reputation": 1611, "user_id": 8132795, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/872a2440abf9ac210274ed3d78c40a3b?s=128&d=identicon&r=PG&f=1", "display_name": "yinnonsanders", "link": "https://stackoverflow.com/users/8132795/yinnonsanders"}, "reply_to_user": {"reputation": 5397, "user_id": 2193020, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/aa10d01a3d48851073bd61877a56b5a7?s=128&d=identicon&r=PG", "display_name": "hnefatl", "link": "https://stackoverflow.com/users/2193020/hnefatl"}, "edited": false, "score": 0, "creation_date": 1501705459, "post_id": 45470213, "comment_id": 77901650, "body": "That&#39;s definitely a possibility, although sometimes the structs have many fields."}, {"owner": {"reputation": 5397, "user_id": 2193020, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/aa10d01a3d48851073bd61877a56b5a7?s=128&d=identicon&r=PG", "display_name": "hnefatl", "link": "https://stackoverflow.com/users/2193020/hnefatl"}, "edited": false, "score": 0, "creation_date": 1501705516, "post_id": 45470213, "comment_id": 77901687, "body": "So define a member function that takes an <code>ofstream</code> and writes the relevant fields to it - then you can avoid duplicating this sort of code all over the place, and it makes it less likely your code will break later. All the code related to outputting a record is in one place, with the struct itself."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 1, "creation_date": 1501712657, "post_id": 45470213, "comment_id": 77904926, "body": "Note that your basic way to serialize is not portable (endianness issues, sizeof issues, ...)."}], "answers": [{"comments": [{"owner": {"reputation": 1611, "user_id": 8132795, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/872a2440abf9ac210274ed3d78c40a3b?s=128&d=identicon&r=PG&f=1", "display_name": "yinnonsanders", "link": "https://stackoverflow.com/users/8132795/yinnonsanders"}, "edited": false, "score": 0, "creation_date": 1501705775, "post_id": 45470335, "comment_id": 77901845, "body": "I think the parentheses are mismatched, but otherwise this is perfect."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 1611, "user_id": 8132795, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/872a2440abf9ac210274ed3d78c40a3b?s=128&d=identicon&r=PG&f=1", "display_name": "yinnonsanders", "link": "https://stackoverflow.com/users/8132795/yinnonsanders"}, "edited": false, "score": 0, "creation_date": 1501705985, "post_id": 45470335, "comment_id": 77901966, "body": "@yinnonsanders, fixed that :)"}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": true, "score": 1, "last_activity_date": 1501705973, "last_edit_date": 1501705973, "creation_date": 1501705491, "answer_id": 45470335, "question_id": 45470213, "link": "https://stackoverflow.com/questions/45470213/only-write-some-of-the-fields-of-a-struct/45470335#45470335", "title": "Only write some of the fields of a struct", "body": "<p>You could use the <a href=\"http://en.cppreference.com/w/cpp/types/offsetof\" rel=\"nofollow noreferrer\"><code>offsetof</code></a> macro.</p>\n\n<pre><code>out_file.write(((char*)&amp;rec) + offsetof(REC, print_this),\n               sizeof(struct REC) - offsetof(REC, print_this));\n</code></pre>\n"}], "owner": {"reputation": 1611, "user_id": 8132795, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/872a2440abf9ac210274ed3d78c40a3b?s=128&d=identicon&r=PG&f=1", "display_name": "yinnonsanders", "link": "https://stackoverflow.com/users/8132795/yinnonsanders"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35, "favorite_count": 0, "accepted_answer_id": 45470335, "answer_count": 1, "score": 0, "last_activity_date": 1501705973, "creation_date": 1501705126, "question_id": 45470213, "link": "https://stackoverflow.com/questions/45470213/only-write-some-of-the-fields-of-a-struct", "title": "Only write some of the fields of a struct", "body": "<p>Let's say I have a struct that looks like</p>\n\n<pre><code>struct REC { \n    char dont_print;\n    int also_don't_print;\n    long print_this;\n    char also_print_this\n};\n</code></pre>\n\n<p>If I were to write all of the fields, it would look like</p>\n\n<pre><code>out_file.write((char*) &amp;rec, sizeof(struct REC));\n</code></pre>\n\n<p>What's the best way to only write the last fields? I thought of several options, but each of them seem unclear and could break if other parts of the code change.</p>\n\n<ol>\n<li><code>out_file.write((char*) &amp;rec.print_this, sizeof(struct REC) - sizeof(char) - sizeof(int));</code></li>\n<li><code>out_file.write((char*) &amp;rec.print_this, sizeof(long) + sizeof(char));</code></li>\n<li><code>out_file.write((char*) &amp;rec + sizeof(char) + sizeof(int), sizeof(struct REC) - sizeof(char) - sizeof(int));</code></li>\n<li><code>out_file.write((char*) &amp;rec + sizeof(char) + sizeof(int), sizeof(long) + sizeof(char));</code></li>\n</ol>\n\n<p>I was wondering if there's some better way, especially something that references the field names rather than the types.\nNote: In my case I'll be doing this for a few different structs, all of which have the same few fields that I would like to ignore, but have different fields that come after those.</p>\n"}, {"tags": ["c++", "visual-studio", "visual-c++", "g++", "c++14"], "comments": [{"owner": {"reputation": 618, "user_id": 8407771, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c41aca6a3a6dd85b8353a49ec3a9d9d?s=128&d=identicon&r=PG", "display_name": "Recoder", "link": "https://stackoverflow.com/users/8407771/recoder"}, "reply_to_user": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "edited": false, "score": 0, "creation_date": 1501705848, "post_id": 45470205, "comment_id": 77901887, "body": "included the code"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1501706158, "post_id": 45470205, "comment_id": 77902061, "body": "In Visual Studio are you set to produce a debug or release build?"}, {"owner": {"reputation": 618, "user_id": 8407771, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c41aca6a3a6dd85b8353a49ec3a9d9d?s=128&d=identicon&r=PG", "display_name": "Recoder", "link": "https://stackoverflow.com/users/8407771/recoder"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1501706360, "post_id": 45470205, "comment_id": 77902162, "body": "debug build (x86)"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1501706431, "post_id": 45470205, "comment_id": 77902218, "body": "That&#39;s probably it then. Debug builds are un/barely optimized and slow as molasses to make the program easier to debug."}, {"owner": {"reputation": 618, "user_id": 8407771, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c41aca6a3a6dd85b8353a49ec3a9d9d?s=128&d=identicon&r=PG", "display_name": "Recoder", "link": "https://stackoverflow.com/users/8407771/recoder"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1501706495, "post_id": 45470205, "comment_id": 77902251, "body": "well release (x64) gives the output. Thanks"}], "owner": {"reputation": 618, "user_id": 8407771, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c41aca6a3a6dd85b8353a49ec3a9d9d?s=128&d=identicon&r=PG", "display_name": "Recoder", "link": "https://stackoverflow.com/users/8407771/recoder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 46, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1501705775, "creation_date": 1501705093, "last_edit_date": 1501705775, "question_id": 45470205, "link": "https://stackoverflow.com/questions/45470205/ms-vc-2017-takes-too-long-to-produce-output", "title": "MS Vc++ 2017 takes too long to produce output", "body": "<p>It's a simple Union-Find Program. The Problem is when I ran the code on Microsoft Visual Studio 2017, it gives no output although G++ does.</p>\n\n<p>The Code is : <a href=\"https://ideone.com/TMchC7\" rel=\"nofollow noreferrer\">Code on Ideone</a></p>\n\n<p>Code : </p>\n\n<pre><code>`// UnionFind.cpp : Defines the entry point for the console application.\n //\n //#include \"stdafx.h\"\n  #include &lt;iostream&gt;\n  #include &lt;vector&gt;\n  #include &lt;algorithm&gt;\n\n  using namespace std;\n\n  #define ul unsigned long long int\n\n  int root(int child, vector&lt;int&gt; &amp;A) {\n      while (A[child] != child) {\n          A[child] = A[A[child]];\n          child = A[child];\n      }\n      return child;\n  }\n\n\n  void weighted_union(int child, int parent, vector&lt;int&gt; &amp;size, vector&lt;int&gt; &amp;A) {\n\n      int root_child = root(child, A);\n      int root_parent = root(parent, A);\n\n      if (size[root_child] &lt; size[root_parent]) {\n          A[root_child] = A[root_parent];\n          size[root_parent] += size[root_child];\n      } \n      else\n      {\n          A[root_parent] = A[root_child];\n          size[root_child] += size[root_parent];\n      }\n\n  }\n\n  void print(vector&lt;int&gt; &amp;T) {\n\n      for (auto i : T) {\n          cout &lt;&lt; i &lt;&lt; \" \";\n      }\n      cout &lt;&lt; endl;\n  }\n\n  void func(ul t, vector&lt;int&gt; &amp;A, vector&lt;int&gt; &amp;size) {\n      ul x = t, y = t;\n      int in1 = 0, in2 = 0;\n\n      while (x &gt; 0) {\n          y = x &gt;&gt; 1;\n          in2 = in1 + 1;\n          while (y &gt; 0) {\n              if ((x &amp; 1) &amp;&amp; (y &amp; 1)) {\n                  weighted_union(in1, in2, size, A);\n              }\n              in2++;\n              y = y &gt;&gt; 1;\n          }\n          in1++;\n          x = x &gt;&gt; 1;\n      }\n  }\n\n\n\n\n  int connected(vector&lt;int&gt; &amp;A) {\n      int count = 0;\n      for (int i = 0; i &lt; 64; i++) {\n          if (A[i] == i) {\n              count++;\n          }\n      }\n\n      return count;\n  }\n\n  int main()\n  {\n      int n;\n      cin &gt;&gt; n;\n\n      vector&lt;ul&gt; T(n);\n      vector&lt; vector&lt;int&gt; &gt; A(n, vector&lt;int&gt;(64));\n      for (int i = 0; i &lt; n; i++) {\n          for (int j = 0; j &lt; 64; j++) {\n              A[i][j] = j;\n          }\n      }\n\n      vector&lt;int&gt; size(64, 1);\n\n      for (int i = 0; i &lt; n; i++) {\n          cin &gt;&gt; T[i];\n          func(T[i], A[i], size);\n              for (int j = 0; j &lt; 64; j++) {\n                  size[j] = 1;\n              }\n      }\n\n      int count = 0;\n      count += 64;\n      unsigned long long int donot = 0;\n\n      int j = 0;\n      unsigned long long int a;\n      vector&lt;int&gt; temp(64);\n\n      for (unsigned long long int i = 1; i &lt; (1 &lt;&lt; n); i++) {\n          if (i == (1 &lt;&lt; donot)) {\n              count += connected(A[donot]);\n              donot++;\n              continue;\n          }\n\n          j = 0;\n          a = i;\n\n          for (int t = 0; t &lt; 64; t++) {\n              temp[t] = t;\n          }\n\n          while (a &gt; 0) {\n              if ((a &amp; (ul)1) == 1)\n              {\n                  for (int ii = 0; ii &lt; 64; ii++) {\n                      temp[ii] = min(A[j][ii], temp[ii]);\n                  }\n              }\n              a &gt;&gt;= (ul)1;\n              j++;\n          }\n\n          count += connected(temp);\n      }\n\n      cout &lt;&lt; count;\n\n      return 0;\n  }`\n</code></pre>\n\n<p><em>plz note the program is for an online competition problem</em></p>\n\n<p>It compiles successfully but for input such as </p>\n\n<pre><code>20 18446744073709551615 18446744073709551615 18446744073709551615 18446744073709551615 18446744073709551615 18446744073709551615 18446744073709551615 18446744073709551615 18446744073709551615 18446744073709551615 18446744073709551615 18446744073709551615 18446744073709551615 18446744073709551615 18446744073709551615 18446744073709551615 18446744073709551615 18446744073709551615 18446744073709551615 18446744073709551615\n</code></pre>\n\n<p>Well it is a bit too long but MS Vc++ produces no output even after few minutes of waiting although ideone/or G++ compiler does it in 0.62s. </p>\n\n<p>For smaller inputs such as </p>\n\n<pre><code>    3 2 5 9\n</code></pre>\n\n<p>it gives correct output and fast.</p>\n\n<p>For simple programs such as this MS Vc++ and G++ should not affect output.</p>\n\n<p>Am I missing something in the code that prevents msvc++ from giving the output?</p>\n\n<p>System specs : Core i3 5005U @ 2Ghz (2 Core (4 Logical)\n               / 4 GB Ram / Window 10 (64-bit)\n               no other task running while executing the program</p>\n"}, {"tags": ["c++", "c++11", "encryption"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 4, "creation_date": 1501703943, "post_id": 45469895, "comment_id": 77900845, "body": "Welcome to Stack Overflow! It sounds like you may need to learn how to use a debugger to step through your code. With a good debugger, you can execute your program line by line and see where it is deviating from what you expect. This is an essential tool if you are going to do any programming. Further reading: <a href=\"http://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">How to debug small programs</a>"}, {"owner": {"reputation": 5879, "user_id": 8150685, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WV7OV.jpg?s=128&g=1", "display_name": "Error - Syntactical Remorse", "link": "https://stackoverflow.com/users/8150685/error-syntactical-remorse"}, "edited": false, "score": 0, "creation_date": 1501704149, "post_id": 45469895, "comment_id": 77900970, "body": "For your first question good job."}, {"owner": {"reputation": 4024, "user_id": 3307686, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5dd8d815759c23dd52428c7cc0c35324?s=128&d=identicon&r=PG&f=1", "display_name": "Mike Holt", "link": "https://stackoverflow.com/users/3307686/mike-holt"}, "edited": false, "score": 0, "creation_date": 1501704216, "post_id": 45469895, "comment_id": 77901006, "body": "The <code>bash</code> tag seems out of place here. You should consider removing it."}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1501704502, "post_id": 45469895, "comment_id": 77901156, "body": "Hmm, <code>char char_to_rotate = cipher_key.at(0);</code> should probably never happen if <code>bound == 0</code>. You should return from your function in an <code>else</code> in the line above it."}, {"owner": {"reputation": 9, "user_id": 8401579, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8cf9ccd99d3111b8dd76eafaeeeebea?s=128&d=identicon&r=PG&f=1", "display_name": "acrylicpaint", "link": "https://stackoverflow.com/users/8401579/acrylicpaint"}, "edited": false, "score": 0, "creation_date": 1501704512, "post_id": 45469895, "comment_id": 77901158, "body": "Thanks for the advice - removed the bash tag"}, {"owner": {"reputation": 9, "user_id": 8401579, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8cf9ccd99d3111b8dd76eafaeeeebea?s=128&d=identicon&r=PG&f=1", "display_name": "acrylicpaint", "link": "https://stackoverflow.com/users/8401579/acrylicpaint"}, "reply_to_user": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1501705124, "post_id": 45469895, "comment_id": 77901472, "body": "@AndyG - tried that out and it compiles now! Looks like the program still needs some work to work as intended, but this got me past the error which was holding me back. Thank you!!"}], "owner": {"reputation": 9, "user_id": 8401579, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8cf9ccd99d3111b8dd76eafaeeeebea?s=128&d=identicon&r=PG&f=1", "display_name": "acrylicpaint", "link": "https://stackoverflow.com/users/8401579/acrylicpaint"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 681, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1501704474, "creation_date": 1501703882, "last_edit_date": 1501704474, "question_id": 45469895, "link": "https://stackoverflow.com/questions/45469895/terminate-called-after-throwing-an-instance-of-stdout-of-range-should-be-e", "title": "terminate called after throwing an instance of &#39;std::out_of_range&#39; - Should be easy to resolve", "body": "<p>For my introductory C++ class I was tasked with completing this program, which uses file I/O to encode and decrypt text using a cypher.</p>\n\n<p>Most of the function definitions were written by me while everything else was written by my professor. I think the program should work (if it would compile) but I am getting the following error:</p>\n\n<blockquote>\n  <p>terminate called after throwing an instance of 'std::out_of_range'\n   what():  basic_string::at: __n (which is 0) >= this->size() (which is 0)\n  bash: line 12:  5645 Aborted                 $file.o $args</p>\n</blockquote>\n\n<p>I believe this is a very common problem and should be easy to resolve. However, I am a beginner and am not sure how to interpret this seemingly common error message. The \"out of range\" leads me to believe that maybe it's a problem with the loops I wrote to iterate through strings (for example, in the function RotateCipherKey()?) that don't work if the string is of zero length? Hopefully, someone can recognize the problem.</p>\n\n<p>Thank you for the help. Here is my code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;string&gt;\n#include &lt;cstdlib&gt;\n#include &lt;cctype&gt;\n\nusing namespace std;\n\nclass Crypto {\npublic:\n    void DisplayFile(string filename);\n    void EncryptFile(string cipher_key, string filename_from, string filename_to);\n    void DecryptFile(string cipher_key, string filename_from, string filename_to);\n    string EncryptString(string &amp;cipher_key, string string_to_be_encrypted);\n    string DecryptString(string &amp;cipher_key, string string_to_be_decrypted);\nprivate:\n    string cipher_key;\n    void RotateCipherKey();\n    char substitution_cipher(char char_to_encrypt);\n    char reverse_substitution_cipher(char char_to_encrypt);\n};\n\nusing namespace std;\n\n//  Rotate the cipher key. Example: abcdef becames bcdefa\n//\n// Note: Call by reference\nvoid Crypto::RotateCipherKey()\n{\n    int bound = 0;\n    if(cipher_key.length() &gt; 0)\n        bound = cipher_key.length()-1;\n    char char_to_rotate = cipher_key.at(0);\n    int i = 0;\n\n    for(i=0; i&lt;bound; i++){\n        cipher_key.at(i) = cipher_key.at(i+1);\n    }\n\n    cipher_key.at(bound) = char_to_rotate;\n}\n\n// Perform a substitution cipher on a single character\n// using the specified cipher key\n// make sure it is lowercase (switch it if not) and an alpha\n// character\n\nchar Crypto::substitution_cipher(char char_to_encrypt)\n{\n    int cipherLength=0, i=0;\n\n    if(!islower(char_to_encrypt))\n        char_to_encrypt = tolower(char_to_encrypt);\n\n    if(!isalpha(char_to_encrypt)){\n        cout &lt;&lt; \"Character to encrypt must be alphabetical!\";\n        return char_to_encrypt;\n    }\n\n    cipherLength = cipher_key.length();\n\n    for(i=0; i&lt;cipherLength; i++){\n        RotateCipherKey();\n        char_to_encrypt = cipher_key[i];\n        }\n\n    return char_to_encrypt;\n}\n\n\n// Perform a \"reverse\" substitution cipher on a single character\n// using the specified cipher key\n// See reference document for implementation details.\n// You reverse the operation described above\n\nchar Crypto::reverse_substitution_cipher(char char_to_decrypt)\n{\n    int i=0, cipherLength=0;\n    cipherLength = cipher_key.length();\n\n    for(i=0; i&lt;cipherLength; i++){\n        RotateCipherKey();\n        char_to_decrypt = cipher_key[i];\n    }\n\n    return char_to_decrypt;\n}\n\n// Encrypt String and return it\n// You will use the substitution_cipher() function to encrypt the\n// individual characters\n//\n// Think for loop\nstring Crypto::EncryptString(string &amp;cipher_key, \n    string string_to_be_encrypted)\n{\n    int i=0, loopBound=0;\n    char tempChar;\n    if(string_to_be_encrypted.length()&gt;0)\n        loopBound=string_to_be_encrypted.length();\n\n    for(i=0; i &lt; loopBound; i++){\n        tempChar = substitution_cipher(string_to_be_encrypted[i]);\n        RotateCipherKey();\n    }\n\n    string encrypted_string = string_to_be_encrypted;\n    cout &lt;&lt; \" \" &lt;&lt; string_to_be_encrypted;\n    return encrypted_string;\n}\n\n// Decrypt String and return it\n// You will use the reverse_subsitution_cipher() function to \n// decrypt the individual characters\n//\nstring Crypto::DecryptString(string &amp;cipher_key, string string_to_be_decrypted)\n{\n    string decrypted_string = string_to_be_decrypted;\n\n    return decrypted_string;\n}\n\n//\n// Need to finish this one\n//\n// Display file specified by the filname parameter\n// See EncryptFile/DecryptFile for details on how to read and\n// display a file. Use the ifstream infile section to read a file\n// and cout to display it to the screen.\nvoid Crypto::DisplayFile(string filename)\n{\n    string tempString;\n    ifstream infile;\n    infile.open(filename);\n\n    infile &gt;&gt; tempString;\n    while(infile){\n        cout &lt;&lt; \" \" &lt;&lt; tempString;\n        infile &gt;&gt; tempString;\n    }\n\n    cout &lt;&lt; endl;\n}\n\n// Encrypt the specified file using the specified cipher key and\n// write the output to a different file\n// This function is complete\nvoid Crypto::EncryptFile(string cipher_key, \n    string filename_from, string filename_to)\n{\n    string input;\n    ifstream infile;\n    ofstream outfile;\n\n    infile.open (filename_from.c_str());\n    outfile.open (filename_to.c_str());\n\n    if(!infile)\n    {\n        cout &lt;&lt; \"Can not open input file \" + filename_from &lt;&lt; endl;\n        exit(0);\n    }\n\n    if(!outfile)\n    {\n        cout &lt;&lt; \"Can not open Output file \" + filename_to &lt;&lt; endl;\n        exit(0);\n    }\n\n\n    while( getline(infile, input))\n    {\n        outfile &lt;&lt; EncryptString(cipher_key,  input) &lt;&lt; endl;\n    }\n    infile.close();\n    outfile.close();\n}\n\n// Decrypt the specified file using the specified cipher key and\n// write the output to a different file\n// This function is complete\nvoid Crypto::DecryptFile(string cipher_key, \n    string filename_from, string filename_to)\n{\n    string input;\n    ifstream infile;\n    ofstream outfile;\n\n    infile.open (filename_from.c_str());\n    outfile.open (filename_to.c_str());\n\n    if(!infile)\n    {\n        cout &lt;&lt; \"Can not open input file \" + filename_from &lt;&lt; endl;\n        exit(0);\n    }\n\n    if(!outfile)\n    {\n        cout &lt;&lt; \"Can not open Output file \" + filename_to &lt;&lt; endl;\n        exit(0);\n    }\n\n\n    while( getline(infile, input))\n    {\n        outfile &lt;&lt; DecryptString(cipher_key,  input) &lt;&lt; endl;\n    }\n    infile.close();\n    outfile.close();\n}\n\nint main()\n{\n    Crypto Cipher1;\n    Crypto Cipher2;\n    string cipher_key = \"qwertyuiopasdfghjklzxcvbnm\";\n    string cipher_key2 = \"wertyuiopasdgfhjqklzxcvbnm\";\n\n    Cipher1.EncryptFile(cipher_key, \"test.txt\",\n                        \"test-encrypted.txt\");\n    Cipher1.DecryptFile(cipher_key, \"test-encrypted.txt\",\n                        \"test-encrypt-decrypt-test.txt\");\n    Cipher1.DisplayFile(\"test.txt\");\n    Cipher1.DisplayFile(\"test-encrypted.txt\");\n    Cipher1.DisplayFile(\"test-encrypt-decrypt-test.txt\");\n\n    string cipher_key3 = cipher_key2;\n    cout &lt;&lt; Cipher2.EncryptString(cipher_key3,\n        \"C++ Programming Is Fun\") &lt;&lt; endl;\n\n    cipher_key3 = cipher_key2;\n    string cipher_key4 = cipher_key2;\n\n    cout &lt;&lt; Cipher2.DecryptString(cipher_key2, \n        Cipher2.EncryptString(cipher_key3,\"C++ Programming Is Fun\") )\n     &lt;&lt; endl;\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "stl"], "comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1501701876, "post_id": 45469297, "comment_id": 77899590, "body": "Are you sure your iterator header file is included?"}, {"owner": {"reputation": 26087, "user_id": 1312406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5418f577abfa7c529dd026723462b440?s=128&d=identicon&r=PG", "display_name": "Paul Evans", "link": "https://stackoverflow.com/users/1312406/paul-evans"}, "edited": false, "score": 0, "creation_date": 1501701911, "post_id": 45469297, "comment_id": 77899618, "body": "Are you sure you&#39;re not <code>using namespace std;</code> anywhere? Because <code>begin()</code> is defined there."}, {"owner": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "edited": false, "score": 2, "creation_date": 1501702093, "post_id": 45469297, "comment_id": 77899716, "body": "Try to make a small program that demonstrates this problem.  You can see that the comments so far are all questions about code you&#39;re not showing here."}, {"owner": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "edited": false, "score": 0, "creation_date": 1501709156, "post_id": 45469297, "comment_id": 77903613, "body": "Now that you have shown all the code, voting to reopen.  This problem can now be determined."}], "owner": {"reputation": 135, "user_id": 7653905, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c26a1d24f5b2cd4c25e20e104189b18f?s=128&d=identicon&r=PG&f=1", "display_name": "Timur Yalimov", "link": "https://stackoverflow.com/users/7653905/timur-yalimov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 64, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1502032548, "creation_date": 1501701611, "last_edit_date": 1502032477, "question_id": 45469297, "link": "https://stackoverflow.com/questions/45469297/problems-with-self-created-container-missing-before", "title": "Problems with self-created container (missing &#39;;&#39; before &#39;&lt;&#39;)", "body": "<p>I'm trying to create STL container and an iterator for it. I'm getting compile errors:  </p>\n\n<pre><code>\" C2143 Missing ';' before '&lt;' \"\n\" C2238 Unexpected token(s) preceding ';' \" \n</code></pre>\n\n<p>which points me to begin() method </p>\n\n<pre><code>typename MyIterator&lt;data_type&gt; begin();\n</code></pre>\n\n<p>I went to MSDN for this errors, but I still don't understand what am I doing wrong.</p>\n\n<p>Here is the full code: </p>\n\n<p>MyList.h:</p>\n\n<pre><code>#pragma once\n\n#include &lt;iostream&gt;\n\nnamespace lab\n\n{\n    //--------------------------------\n    // SUPPORTING STRUCT FOR CONTAINER\n    //--------------------------------\n    template &lt;class data_type&gt; struct _list\n\n    {\n        data_type data;\n        struct _list&lt;data_type&gt; * next;\n        struct _list&lt;data_type&gt; * previous;\n    };\n\n\n    //----------------\n    // CONTAINER CLASS\n    //----------------\n    template &lt;class data_type&gt; class List\n\n    {\n\n    private:\n\n        _list&lt;data_type&gt; * head;\n        _list&lt;data_type&gt; * tail;\n        size_t list_size;\n\n    public:\n\n        List();\n        ~List();\n\n        typename MyIterator&lt;data_type&gt; begin();\n\n        void push_back(data_type data);\n        size_t size();\n    };\n\n\n    template &lt;class data_type&gt; List&lt;data_type&gt;::List()\n\n    {\n        head = tail = NULL;\n        list_size = NULL;\n    }\n\n    template &lt;class data_type&gt; List&lt;data_type&gt;::~List()\n\n    {\n        _list&lt;data_type&gt; * cur = this-&gt;head;\n        _list&lt;data_type&gt; * tmp = NULL;\n\n        while (cur)\n\n        {\n            tmp = cur-&gt;next;\n            delete cur;\n            cur = tmp;\n        }\n    }\n\n    template &lt;class data_type&gt; size_t List&lt;data_type&gt;::size() \n\n    { \n        return list_size; \n    }\n\n    template &lt;class data_type&gt; void List&lt;data_type&gt;::push_back(data_type data)\n\n    {\n        if (!tail)\n        {\n            head = new _list&lt;data_type&gt;;\n            head-&gt;data = data;\n            head-&gt;next = NULL;\n            head-&gt;previous = NULL;\n            tail = head;\n        }\n        else\n        {\n            _list&lt;data_type&gt; * temp = new _list&lt;data_type&gt;;\n            temp-&gt;data = data;\n            temp-&gt;previous = tail-&gt;next;\n            temp-&gt;next = NULL;\n            tail = temp;\n        }\n        this-&gt;list_size++;\n    }\n\n    // --------------------\n    // ITERATOR CLASS\n    // --------------------\n\n    template&lt;class data_type&gt; class MyIterator : public std::iterator&lt;std::input_iterator_tag, data_type&gt;\n\n    {\n        friend class List&lt;data_type&gt;;\n\n    private:\n\n        _list&lt;data_type&gt; * p;\n\n    public:\n\n        MyIterator(const MyIterator &amp;it);\n        MyIterator(data_type * p);\n        bool operator != (MyIterator const &amp; other) const;\n        bool operator == (MyIterator const &amp; other) const; \n        typename MyIterator::reference operator * () const;\n        MyIterator&amp; operator ++ ();\n    };\n\n    template&lt;typename data_type&gt; MyIterator&lt;data_type&gt;::MyIterator(data_type * p) : p(p) {  }\n\n    template&lt;typename data_type&gt; MyIterator&lt;data_type&gt;::MyIterator(const MyIterator &amp; it) : p(it.p) { }\n\n    template&lt;typename data_type&gt; bool MyIterator&lt;data_type&gt;::operator != (MyIterator const &amp; other) const\n\n    {\n        return p-&gt;data != other.p-&gt;data;\n    }\n\n    template&lt;typename data_type&gt; bool MyIterator&lt;data_type&gt;::operator == (MyIterator const &amp; other) const\n\n    {\n        return p-&gt;data == other.p-&gt;data;\n    }\n\n    template&lt;typename data_type&gt; typename MyIterator&lt;data_type&gt;::reference MyIterator&lt;data_type&gt;::operator * () const\n\n    {\n        return p-&gt;data;\n    }\n\n    template&lt;typename data_type&gt; MyIterator&lt;data_type&gt; &amp; MyIterator&lt;data_type&gt;::operator ++ ()\n\n    {\n        p = p-&gt;next;\n        return *this;\n    }\n}\n</code></pre>\n\n<p>And I have a file called Source.cpp for testing, but it just has an empty <code>main()</code> function.</p>\n"}, {"tags": ["c++", "vector", "valgrind", "smart-pointers", "unique-ptr"], "comments": [{"owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "edited": false, "score": 0, "creation_date": 1501701782, "post_id": 45469295, "comment_id": 77899547, "body": "These bytes are probably coming from <code>bv</code> vector itself. Try moving it into <code>main</code> to make sure its content is deleted."}, {"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 2, "creation_date": 1501701938, "post_id": 45469295, "comment_id": 77899632, "body": "Still reachable memory is not a memory leak"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "edited": false, "score": 1, "creation_date": 1501702159, "post_id": 45469295, "comment_id": 77899751, "body": "@dasblinkenlight, 72K? Unlikely."}, {"owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1501702243, "post_id": 45469295, "comment_id": 77899820, "body": "@SergeyA There&#39;s only one block, what else could it be?"}, {"owner": {"reputation": 33597, "user_id": 2445184, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/0b51ece74c2314ba345a862c4b00d804?s=128&d=identicon&r=PG", "display_name": "cmaster - reinstate monica", "link": "https://stackoverflow.com/users/2445184/cmaster-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1501702354, "post_id": 45469295, "comment_id": 77899882, "body": "Does the behavior change when you move the vector into <code>main()</code>?"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "edited": false, "score": 0, "creation_date": 1501702402, "post_id": 45469295, "comment_id": 77899915, "body": "@dasblinkenlight no idea. I just find it suprising for the vector allocate 72K in this scenario. There are only 10 elements, and each element is (supposedly) 8bytes."}, {"owner": {"reputation": 33597, "user_id": 2445184, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/0b51ece74c2314ba345a862c4b00d804?s=128&d=identicon&r=PG", "display_name": "cmaster - reinstate monica", "link": "https://stackoverflow.com/users/2445184/cmaster-reinstate-monica"}, "edited": false, "score": 4, "creation_date": 1501702540, "post_id": 45469295, "comment_id": 77900000, "body": "I cannot reproduce the problem on my machine (Debian 9, <code>g++</code>). Must be some implementation specific issue. The 72k looks rather large, it&#39;s a size that&#39;s most certainly not associated with the code you&#39;ve shown."}, {"owner": {"reputation": 2423, "user_id": 356922, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Hxmn3.png?s=128&g=1", "display_name": "Sayan", "link": "https://stackoverflow.com/users/356922/sayan"}, "edited": false, "score": 0, "creation_date": 1501704682, "post_id": 45469295, "comment_id": 77901247, "body": "I&#39;m baffled by the 72K thing too (could it be that valgrind is misreporting?), my system is Debian 9, g++ 6.3.0. There is no change when I move <code>bv</code> to <code>main()</code>."}, {"owner": {"reputation": 448, "user_id": 3529616, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cdd863e0eb16833b9366024006a1b30c?s=128&d=identicon&r=PG&f=1", "display_name": "Sergei", "link": "https://stackoverflow.com/users/3529616/sergei"}, "edited": false, "score": 0, "creation_date": 1501705335, "post_id": 45469295, "comment_id": 77901588, "body": "@Sayan memory gets requested from the system by chunks optimized for the common case. In a typical program you would use much more memory then in your example."}], "answers": [{"comments": [{"owner": {"reputation": 2423, "user_id": 356922, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Hxmn3.png?s=128&g=1", "display_name": "Sayan", "link": "https://stackoverflow.com/users/356922/sayan"}, "edited": false, "score": 0, "creation_date": 1501705182, "post_id": 45469590, "comment_id": 77901513, "body": "I want to store instances of Base class. In my real application, the derived class is templated, and since I need to access it later (when I won&#39;t know the template), I store a non-templated pointer to base class."}, {"owner": {"reputation": 448, "user_id": 3529616, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cdd863e0eb16833b9366024006a1b30c?s=128&d=identicon&r=PG&f=1", "display_name": "Sergei", "link": "https://stackoverflow.com/users/3529616/sergei"}, "reply_to_user": {"reputation": 2423, "user_id": 356922, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Hxmn3.png?s=128&g=1", "display_name": "Sayan", "link": "https://stackoverflow.com/users/356922/sayan"}, "edited": false, "score": 1, "creation_date": 1501705487, "post_id": 45469590, "comment_id": 77901668, "body": "@Sayan my comment was based on your example. It&#39;s hard to see why you would want to have object slicing in your code."}, {"owner": {"reputation": 2423, "user_id": 356922, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Hxmn3.png?s=128&g=1", "display_name": "Sayan", "link": "https://stackoverflow.com/users/356922/sayan"}, "edited": false, "score": 0, "creation_date": 1501705723, "post_id": 45469590, "comment_id": 77901807, "body": "Yes, I agree with you."}, {"owner": {"reputation": 33597, "user_id": 2445184, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/0b51ece74c2314ba345a862c4b00d804?s=128&d=identicon&r=PG", "display_name": "cmaster - reinstate monica", "link": "https://stackoverflow.com/users/2445184/cmaster-reinstate-monica"}, "edited": false, "score": 3, "creation_date": 1501708794, "post_id": 45469590, "comment_id": 77903401, "body": "<code>free()</code> may not return memory to the system, but <code>valgrind</code> keeps track on what is returned from <code>malloc()</code> and what is passed into <code>free()</code> anyway. After all, valgrind actually runs the program on a simulated CPU, it&#39;s not just listening on the syscalls as <code>strace</code> does. So, the implementation details are definitely not the answer to this question."}], "tags": [], "owner": {"reputation": 448, "user_id": 3529616, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cdd863e0eb16833b9366024006a1b30c?s=128&d=identicon&r=PG&f=1", "display_name": "Sergei", "link": "https://stackoverflow.com/users/3529616/sergei"}, "is_accepted": true, "score": 5, "last_activity_date": 1501712651, "last_edit_date": 1501712651, "creation_date": 1501702768, "answer_id": 45469590, "question_id": 45469295, "link": "https://stackoverflow.com/questions/45469295/memory-leak-when-storing-pointers-into-vector/45469590#45469590", "title": "Memory leak when storing pointers into vector", "body": "<p>Looks like you actually store instances of Base class. Derived() creates an object on the stack and then make_unique passes it to the constructor of Base. This is object slicing.\nThis won't explain the leak but indicates the code may not do what you expect.</p>\n\n<p>ADDITION:\nDELETED: free() doesn't always return memory back to the system. Libc will keep this memory for future malloc(). This probably explains your observation.</p>\n\n<p>I agree with @cmaster's comment below. Valgrind does keep track of malloc/free. After a bit of research I found another question on stackoverflow which explains the observation.</p>\n\n<p>include iostream</p>\n\n<p>\"Many implementations of the C++ standard libraries use their own memory pool allocators.\" They just don't free their memory.</p>\n\n<p>More details: <a href=\"https://stackoverflow.com/questions/30376601/valgrind-memory-still-reachable-with-trivial-program-using-iostream\">Valgrind: Memory still reachable with trivial program using &lt;iostream&gt;</a></p>\n"}], "owner": {"reputation": 2423, "user_id": 356922, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Hxmn3.png?s=128&g=1", "display_name": "Sayan", "link": "https://stackoverflow.com/users/356922/sayan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 292, "favorite_count": 0, "accepted_answer_id": 45469590, "answer_count": 1, "score": 2, "last_activity_date": 1501712651, "creation_date": 1501701602, "last_edit_date": 1501701954, "question_id": 45469295, "link": "https://stackoverflow.com/questions/45469295/memory-leak-when-storing-pointers-into-vector", "title": "Memory leak when storing pointers into vector", "body": "<p>I have read multiple similar questions on the same topic that have been asked, but I was not able to resolve my issue by following them.</p>\n\n<p>I want to store pointers in a vector, but I see a memory leak. My code is as follows. </p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include &lt;memory&gt;\n\nclass Base \n{\n    public:\n       virtual ~Base() {}\n};\n\nclass Derived : public Base {};\n\nstd::vector&lt;std::unique_ptr&lt;Base&gt;&gt; bv;\n\nint main()\n{\n    for (int i = 0; i &lt; 10; i++)\n       bv.emplace_back(std::make_unique&lt;Base&gt;(Derived()));\n\n    bv.clear();\n\n    return 0;\n}\n</code></pre>\n\n<p>Valgrind reports: \"still reachable: 72,704 bytes in 1 blocks\". I have the same issue if I don't use <code>unique_ptr</code>, and just use <code>bv.emplace_back(new Derived);</code>, and <code>delete</code> the pointers explicitly from the vector. What is causing the leak?</p>\n"}, {"tags": ["c++", "sparse-matrix", "mex", "armadillo"], "answers": [{"comments": [{"owner": {"reputation": 2504, "user_id": 1831512, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/fzxrM.png?s=128&g=1", "display_name": "stackunderflow", "link": "https://stackoverflow.com/users/1831512/stackunderflow"}, "edited": false, "score": 0, "creation_date": 1513403027, "post_id": 45473118, "comment_id": 82649788, "body": "The batch constructor behaves even slower than direct insertion on my mac."}], "tags": [], "owner": {"reputation": 1382, "user_id": 3928744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b904e3280e386d51bd888433c8ab0fa4?s=128&d=identicon&r=PG&f=1", "display_name": "hbrerkere", "link": "https://stackoverflow.com/users/3928744/hbrerkere"}, "is_accepted": false, "score": 1, "last_activity_date": 1501721572, "creation_date": 1501721572, "answer_id": 45473118, "question_id": 45469288, "link": "https://stackoverflow.com/questions/45469288/armadillo-spmatint-extremely-slow-compared-to-matint/45473118#45473118", "title": "Armadillo SpMat&lt;int&gt; extremely slow compared to Mat&lt;int&gt;", "body": "<p>Sparse matrices are stored in a compressed format (<a href=\"https://en.wikipedia.org/wiki/Sparse_matrix#Compressed_sparse_column_.28CSC_or_CCS.29\" rel=\"nofollow noreferrer\">CSC</a>). Every time a non-zero element inserted into a sparse matrix, the entire internal representation has to be updated. This is time consuming.</p>\n\n<p>It's much faster to construct the sparse matrix using <a href=\"http://arma.sourceforge.net/docs.html#batch_constructors_sp_mat\" rel=\"nofollow noreferrer\">batch constructors</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 811, "user_id": 7674962, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/976a934a14c12c0b230ae2c25888d8b2?s=128&d=identicon&r=PG&f=1", "display_name": "kedarps", "link": "https://stackoverflow.com/users/7674962/kedarps"}, "edited": false, "score": 0, "creation_date": 1501772456, "post_id": 45475621, "comment_id": 77936972, "body": "Thank-you for sharing this code. Using <code>std::map</code> seems like the best way to populate sparse matrices. I wish Armadillo did something smarter like this internally."}, {"owner": {"reputation": 3366, "user_id": 1080929, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78ecd4627fdf46fc3b3a217eeb0e5104?s=128&d=identicon&r=PG", "display_name": "mtall", "link": "https://stackoverflow.com/users/1080929/mtall"}, "reply_to_user": {"reputation": 811, "user_id": 7674962, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/976a934a14c12c0b230ae2c25888d8b2?s=128&d=identicon&r=PG&f=1", "display_name": "kedarps", "link": "https://stackoverflow.com/users/7674962/kedarps"}, "edited": false, "score": 1, "creation_date": 1501832753, "post_id": 45475621, "comment_id": 77962761, "body": "@kedarps Armadillo is open source, you can always submit code"}], "tags": [], "owner": {"reputation": 4933, "user_id": 8217180, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9621a549160f738b81303a4a008ddd50?s=128&d=identicon&r=PG&f=1", "display_name": "Tobias Ribizel", "link": "https://stackoverflow.com/users/8217180/tobias-ribizel"}, "is_accepted": true, "score": 2, "last_activity_date": 1501745646, "last_edit_date": 1501745646, "creation_date": 1501738393, "answer_id": 45475621, "question_id": 45469288, "link": "https://stackoverflow.com/questions/45469288/armadillo-spmatint-extremely-slow-compared-to-matint/45475621#45475621", "title": "Armadillo SpMat&lt;int&gt; extremely slow compared to Mat&lt;int&gt;", "body": "<p>As hbrerkere already mentioned, the problem stems from the fact that the values of the matrix are stored in a packed format (CSC) that makes it time-consuming to </p>\n\n<ol>\n<li><p>Find the index of an already existing entry: Depending on whether the column entries are sorted by their row index you need either linear or binary search.</p></li>\n<li><p>Insert a value that was previously zero: Here you need to find the insertion point for your new value and move all elements after that, leading to \u2126(n) worst case time for a single insertion!</p></li>\n</ol>\n\n<p>All these operations are constant-time operations for dense matrices, which mostly explains the runtime difference.</p>\n\n<p>My usual solution was to use a separate sparse matrix type for assembly (where you usually access an element multiple times) <strong>based on the coordinate format</strong> (storing triples (i, j, value)) that uses a map like <code>std::map</code> or <code>std::unordered_map</code> to store the triple index corresponding to a position <code>(i,j)</code> in the matrix.</p>\n\n<p>Some similar approaches are also discussed in <a href=\"https://scicomp.stackexchange.com/questions/14134/how-to-efficiently-assemble-global-stiffness-matrix-in-sparse-storage-format-c\">this question about matrix assembly</a></p>\n\n<p>Example from my most recent use:</p>\n\n<pre><code>class DynamicSparseMatrix {\n    using Number = double;\n    using Index = std::size_t;\n    using Entry = std::pair&lt;Index, Index&gt;;\n    std::vector&lt;Number&gt; values;\n    std::vector&lt;Index&gt; rows;\n    std::vector&lt;Index&gt; cols;\n    std::map&lt;Entry, Index&gt; map; // unordered_map might be faster,\n                                // but you need a suitable hash function\n                                // like boost::hash&lt;Entry&gt; for this.\n    Index num_rows;\n    Index num_cols;\n\n    ...\n\n    Number&amp; value(Index row, Index col) {\n        // just to prevent misuse\n        assert(row &gt;= 0 &amp;&amp; row &lt; num_rows);\n        assert(col &gt;= 0 &amp;&amp; col &lt; num_cols);\n        // Find the entry in the matrix\n        Entry e{row, col};\n        auto it = map.find(e);\n        // If the entry hasn't previously been stored\n        if (it == map.end()) {\n            // Add a new entry by adding its value and coordinates\n            // to the end of the storage vectors.\n            it = map.insert(make_pair(e, values.size())).first;\n            rows.push_back(row);\n            cols.push_back(col);\n            values.push_back(0);\n        }\n        // Return the value\n        return values[(*it).second];\n    }\n\n    ...\n\n};\n</code></pre>\n\n<p>After assembly you can store all the values from <code>rows</code>, <code>cols</code>, <code>values</code> (which actually represent the matrix in Coordinate format), possibly sort them and do a <a href=\"http://arma.sourceforge.net/docs.html#batch_constructors_sp_mat\" rel=\"nofollow noreferrer\">batch insertion</a> into your Armadillo matrix.</p>\n"}], "owner": {"reputation": 811, "user_id": 7674962, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/976a934a14c12c0b230ae2c25888d8b2?s=128&d=identicon&r=PG&f=1", "display_name": "kedarps", "link": "https://stackoverflow.com/users/7674962/kedarps"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 492, "favorite_count": 1, "accepted_answer_id": 45475621, "answer_count": 2, "score": 2, "last_activity_date": 1504706885, "creation_date": 1501701579, "last_edit_date": 1504706885, "question_id": 45469288, "link": "https://stackoverflow.com/questions/45469288/armadillo-spmatint-extremely-slow-compared-to-matint", "title": "Armadillo SpMat&lt;int&gt; extremely slow compared to Mat&lt;int&gt;", "body": "<p>I am trying to utilize sparse matrices in Armadillo, and am noticing a significant difference in access times with <code>SpMat&lt;int&gt;</code> compared to equivalent code using <code>Mat&lt;int&gt;</code>. </p>\n\n<h3>Description:</h3>\n\n<p>Below are two methods, which are identical in every respect except that <code>Method_One</code> uses regular matrices and <code>Method_Two</code> uses sparse matrices. </p>\n\n<p>Both methods take following arguments:</p>\n\n<ul>\n<li><code>WS, DS</code>: Pointers to a <code>NN</code> dimensional array</li>\n<li><code>WW</code>: 13 K [<code>max(WS)</code>]</li>\n<li><code>DD</code>: 1.7 K [<code>max(DS)</code>]</li>\n<li><code>NN</code>: 2.3 M</li>\n<li><code>TT</code>: 50</li>\n</ul>\n\n<p>I am using Visual Studio 2017 for compiling the code into a <code>.mexw64</code> executable which can be called from <code>Matlab</code>.  </p>\n\n<h3>Code:</h3>\n\n<pre><code>void Method_One(int WW, int DD, int TT, int NN, double* WS, double* DS)\n{\n    Mat&lt;int&gt; WP(WW, TT, fill::zeros); // (13000 x 50) matrix\n    Mat&lt;int&gt; DP(DD, TT, fill::zeros); // (1700  x 50) matrix\n    Col&lt;int&gt; ZZ(NN, fill::zeros);     // 2,300,000 column vector\n\n    for (int n = 0; n &lt; NN; n++)\n    {\n        int w_n = (int) WS[n] - 1;\n        int d_n = (int) DS[n] - 1;\n        int t_n = rand() % TT;\n\n        WP(w_n, t_n)++;\n        DP(d_n, t_n)++;\n        ZZ(n) = t_n + 1;\n    }\n    return;\n}\n\nvoid Method_Two(int WW, int DD, int TT, int NN, double* WS, double* DS)\n{\n    SpMat&lt;int&gt; WP(WW, TT);        // (13000 x 50) matrix\n    SpMat&lt;int&gt; DP(DD, TT);        // (1700  x 50) matrix\n    Col&lt;int&gt; ZZ(NN, fill::zeros); // 2,300,000 column vector\n\n    for (int n = 0; n &lt; NN; n++)\n    {\n        int w_n = (int) WS[n] - 1;\n        int d_n = (int) DS[n] - 1;\n        int t_n = rand() % TT;\n\n        WP(w_n, t_n)++;\n        DP(d_n, t_n)++;\n        ZZ(n) = t_n + 1;\n    }\n    return;\n}\n</code></pre>\n\n<h3>Timing:</h3>\n\n<p>I am timing both methods using <a href=\"http://arma.sourceforge.net/docs.html#wall_clock\" rel=\"nofollow noreferrer\"><code>wall_clock</code></a> timer object in Armadillo. For example, </p>\n\n<pre><code>wall_clock timer;\ntimer.tic();\nMethod_One(WW, DD, TT, NN, WS, DS);\ndouble t = timer.toc();\n</code></pre>\n\n<h3>Results:</h3>\n\n<ul>\n<li>Timing elapsed for <code>Method_One</code> using <code>Mat&lt;int&gt;</code>: <code>0.091 sec</code></li>\n<li>Timing elapsed for <code>Method_Two</code> using <code>SpMat&lt;int&gt;</code>: <code>30.227 sec</code> (almost 300 times slower)</li>\n</ul>\n\n<hr>\n\n<p>Any insights into this are highly appreciated!</p>\n\n<hr>\n\n<hr>\n\n<h1>UPDATE:</h1>\n\n<p>This issue has been fixed with newer <a href=\"http://arma.sourceforge.net/download.html\" rel=\"nofollow noreferrer\">version (8.100.1)</a> of Armadillo.</p>\n\n<p>Here are the new results:</p>\n\n<ul>\n<li>Timing elapsed for <code>Method_One</code> using <code>Mat&lt;int&gt;</code>: <code>0.141 sec</code></li>\n<li>Timing elapsed for <code>Method_Two</code> using <code>SpMat&lt;int&gt;</code>: <code>2.127 sec</code> (15 times slower, which is acceptable!)</li>\n</ul>\n\n<p>Thanks to Conrad and Ryan. </p>\n"}, {"tags": ["c++", "integer", "overloading", "negative-number", "ambiguous-call"], "comments": [{"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 4, "creation_date": 1501701461, "post_id": 45469214, "comment_id": 77899385, "body": "Int&#39;s min value is &quot;throwing a compiler error&quot;. What error? You should include it in the question"}, {"owner": {"reputation": 26583, "user_id": 1441, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fb7f1cd450084fdb4bfc9376c7dba2a7?s=128&d=identicon&r=PG", "display_name": "crashmstr", "link": "https://stackoverflow.com/users/1441/crashmstr"}, "edited": false, "score": 11, "creation_date": 1501701507, "post_id": 45469214, "comment_id": 77899406, "body": "I see <code>call of overloaded \u2018display(long int)\u2019 is ambiguous</code>."}, {"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "reply_to_user": {"reputation": 26583, "user_id": 1441, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fb7f1cd450084fdb4bfc9376c7dba2a7?s=128&d=identicon&r=PG", "display_name": "crashmstr", "link": "https://stackoverflow.com/users/1441/crashmstr"}, "edited": false, "score": 1, "creation_date": 1501701526, "post_id": 45469214, "comment_id": 77899415, "body": "@crashmstr Yes, the error should be in the question"}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 6, "creation_date": 1501701558, "post_id": 45469214, "comment_id": 77899432, "body": "Not related, but you should update the compiler. There is already GCC 7.1."}, {"owner": {"reputation": 1253, "user_id": 5558647, "user_type": "registered", "accept_rate": 46, "profile_image": "https://i.stack.imgur.com/qzqCQ.gif?s=128&g=1", "display_name": "infinite loop", "link": "https://stackoverflow.com/users/5558647/infinite-loop"}, "reply_to_user": {"reputation": 26583, "user_id": 1441, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fb7f1cd450084fdb4bfc9376c7dba2a7?s=128&d=identicon&r=PG", "display_name": "crashmstr", "link": "https://stackoverflow.com/users/1441/crashmstr"}, "edited": false, "score": 0, "creation_date": 1501701589, "post_id": 45469214, "comment_id": 77899443, "body": "Yeah the same what @crashmstr has mentioned!"}, {"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 4, "creation_date": 1501701597, "post_id": 45469214, "comment_id": 77899454, "body": "Here&#39;s my guess: <code>typeof(-2147483648) != int</code>. The literal is <code>2147483648</code>, which is too big for an <code>int</code>, so it&#39;s a <code>long</code>, and it&#39;s being negated"}, {"owner": {"reputation": 1253, "user_id": 5558647, "user_type": "registered", "accept_rate": 46, "profile_image": "https://i.stack.imgur.com/qzqCQ.gif?s=128&g=1", "display_name": "infinite loop", "link": "https://stackoverflow.com/users/5558647/infinite-loop"}, "reply_to_user": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1501701619, "post_id": 45469214, "comment_id": 77899460, "body": "@HolyBlackCat, the behaviour is same with MSVC++ 14.0 compiler"}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1501701799, "post_id": 45469214, "comment_id": 77899552, "body": "perhaps somewhat related: <a href=\"https://stackoverflow.com/questions/8771409/why-is-it-ambiguous-to-call-overloaded-ambiglong-and-ambigunsigned-long-with\" title=\"why is it ambiguous to call overloaded ambiglong and ambigunsigned long with\">stackoverflow.com/questions/8771409/&hellip;</a>"}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 1, "creation_date": 1501701879, "post_id": 45469214, "comment_id": 77899591, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/8511598/large-negative-integer-literals\">large negative integer literals</a>"}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 1, "creation_date": 1501701881, "post_id": 45469214, "comment_id": 77899593, "body": "@infiniteloop I&#39;m not saying that&#39;s because of the compiler. (That&#39;s why I said &#39;not related&#39;.) I just suggest getting an ungrade."}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 0, "creation_date": 1501742125, "post_id": 45469214, "comment_id": 77913452, "body": "<a href=\"https://stackoverflow.com/q/11536389/995714\">Casting minimum 32-bit integer (-2147483648) to float gives positive number (2147483648.0)</a>, <a href=\"https://stackoverflow.com/q/14695118/995714\">(-2147483648&gt; 0) returns true in C++?</a>, <a href=\"https://stackoverflow.com/q/9941261/995714\">Warning: this decimal constant is unsigned only in ISO C90</a>"}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 1, "creation_date": 1501742476, "post_id": 45469214, "comment_id": 77913664, "body": "<a href=\"https://stackoverflow.com/q/34725215/995714\">Why does MSVC pick a long long as the type for -2147483648?</a>"}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 3, "creation_date": 1501746707, "post_id": 45469214, "comment_id": 77916465, "body": "Interestingly, g++ (6.4 and 7.1, at least) don&#39;t complain that <code>int j{-2147483648};</code> is a narrowing conversion.  Almost worth a question in itself, that.  It&#39;s probably related to allowing (e.g.) <code>long long</code> constexpr values such as <code>2147483647LL</code> to be narrowed in initialization."}], "answers": [{"tags": [], "owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "is_accepted": false, "score": 36, "last_activity_date": 1555939576, "last_edit_date": 1555939576, "creation_date": 1501701676, "answer_id": 45469312, "question_id": 45469214, "link": "https://stackoverflow.com/questions/45469214/why-does-the-most-negative-int-value-cause-an-error-about-ambiguous-function-ove/45469312#45469312", "title": "Why does the most negative int value cause an error about ambiguous function overloads?", "body": "<p>The expression <code>-2147483648</code> is actually applying the <code>-</code> operator to the constant <code>2147483648</code>. On your platform, <code>int</code> can't store <code>2147483648</code>, it must be represented by a larger type. Therefore, the expression <code>-2147483648</code> is not deduced to be <code>signed int</code> but a larger signed type, <code>signed long int</code>.</p>\n\n<p>Since you do not provide an overload for <code>long</code> the compiler is forced to choose between two overloads that are both equally valid. Your compiler should issue a compiler error about ambiguous overloads.</p>\n"}, {"comments": [{"owner": {"reputation": 32100, "user_id": 1033581, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/e8891617e36b8d1254eb3ce1a5662da4?s=128&d=identicon&r=PG", "display_name": "C\u0153ur", "link": "https://stackoverflow.com/users/1033581/c%c5%93ur"}, "edited": false, "score": 2, "creation_date": 1501736445, "post_id": 45469321, "comment_id": 77910734, "body": "<code>-2147483647 - 1</code> would also work without warning as a negative literal expression"}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 2, "creation_date": 1501750118, "post_id": 45469321, "comment_id": 77918853, "body": "Or <code>INT_MIN</code> for the least verbose option. Less generic, though."}, {"owner": {"reputation": 1253, "user_id": 5558647, "user_type": "registered", "accept_rate": 46, "profile_image": "https://i.stack.imgur.com/qzqCQ.gif?s=128&g=1", "display_name": "infinite loop", "link": "https://stackoverflow.com/users/5558647/infinite-loop"}, "edited": false, "score": 0, "creation_date": 1501775655, "post_id": 45469321, "comment_id": 77939345, "body": "@NathanOliver, Can you kindly explain me this case <code>display(2147483649);</code>. Why can&#39;t it call the unsigned int func in this case? and why it treats the arg <code>2147483649</code> as long int instead of unsigned int?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 1253, "user_id": 5558647, "user_type": "registered", "accept_rate": 46, "profile_image": "https://i.stack.imgur.com/qzqCQ.gif?s=128&g=1", "display_name": "infinite loop", "link": "https://stackoverflow.com/users/5558647/infinite-loop"}, "edited": false, "score": 2, "creation_date": 1501775832, "post_id": 45469321, "comment_id": 77939466, "body": "@infiniteloop Decimal integer literals go from <code>int</code> to <code>long int</code> to <code>long long int</code>.  You wlll never get an unsigned type for a decimal literal unless you use the <code>u</code>/<code>U</code> suffix."}, {"owner": {"reputation": 1253, "user_id": 5558647, "user_type": "registered", "accept_rate": 46, "profile_image": "https://i.stack.imgur.com/qzqCQ.gif?s=128&g=1", "display_name": "infinite loop", "link": "https://stackoverflow.com/users/5558647/infinite-loop"}, "edited": false, "score": 0, "creation_date": 1501776502, "post_id": 45469321, "comment_id": 77939983, "body": "@NathanOliver  So, until explicitly given an unsigned int variable or unsigned cast, the unsigned function cannot be called?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1501776739, "post_id": 45469321, "comment_id": 77940131, "body": "In this example yes.  To call <code>display(unsigned a)</code> you need either <code>display(1234u);</code> or <code>display(static_cast&lt;unsigned&gt;(1234));</code> or <code>unsigned foo = 1234; display(foo);</code>"}], "tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": true, "score": 145, "last_activity_date": 1501847803, "last_edit_date": 1501847803, "creation_date": 1501701701, "answer_id": 45469321, "question_id": 45469214, "link": "https://stackoverflow.com/questions/45469214/why-does-the-most-negative-int-value-cause-an-error-about-ambiguous-function-ove/45469321#45469321", "title": "Why does the most negative int value cause an error about ambiguous function overloads?", "body": "<p>This is a very subtle error.  What you are seeing is a consequence of there being no negative integer literals in C++.  If we look at [lex.icon] we get that a <em>integer-literal</em>,</p>\n\n<blockquote>\n  <p><em>integer-literal</em><br>\n  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<em>decimal-literal integer-suffix<sub>opt</sub></em><br>\n  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[...]</p>\n</blockquote>\n\n<p>can be a <em>decimal-literal</em>,</p>\n\n<blockquote>\n  <p><em>decimal-literal:</em><br>\n  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<em>nonzero-digit</em><br>\n  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<em>decimal-literal \u2019 <sub>opt</sub> digit</em></p>\n</blockquote>\n\n<p>where <em>digit</em> is <code>[0-9]</code> and <em>nonzero-digit</em> is <code>[1-9]</code> and the suffix par can be one of <code>u</code>, <code>U</code>, <code>l</code>, <code>L</code>, <code>ll</code>, or <code>LL</code>.  Nowhere in here does it include <code>-</code> as being part of the decimal literal.</p>\n\n<p>In \u00a72.13.2, we also have:</p>\n\n<blockquote>\n  <p>An <em>integer literal</em> is a sequence of digits that has no period or exponent part, with optional separating single quotes that are ignored when determining its value. An integer literal may have a prefix that specifies its base and a suffix that specifies its type. The lexically first digit of the sequence of digits is the most significant. <strong>A <em>decimal</em> integer literal (base ten) begins with a digit other than 0 and consists of a sequence of decimal digits.</strong></p>\n</blockquote>\n\n<p><sup>(emphasis mine)</sup></p>\n\n<p>Which means the <code>-</code> in <code>-2147483648</code> is the unary <code>operator -</code>.  That means <code>-2147483648</code> is actually treated as <code>-1 * (2147483648)</code>.  Since <code>2147483648</code> is one too many for your <code>int</code> it is promoted to a <code>long int</code> and the ambiguity comes from that not matching.</p>\n\n<p>If you want to get the minimum or maximum value for a type in a portable manner you can use:</p>\n\n<pre><code>std::numeric_limits&lt;type&gt;::min();  // or max()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1781, "user_id": 786356, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/89f98109182b63b001f40cbefec90961?s=128&d=identicon&r=PG", "display_name": "bunkerdive", "link": "https://stackoverflow.com/users/786356/bunkerdive"}, "is_accepted": false, "score": 4, "last_activity_date": 1503331179, "last_edit_date": 1503331179, "creation_date": 1502229726, "answer_id": 45578695, "question_id": 45469214, "link": "https://stackoverflow.com/questions/45469214/why-does-the-most-negative-int-value-cause-an-error-about-ambiguous-function-ove/45578695#45578695", "title": "Why does the most negative int value cause an error about ambiguous function overloads?", "body": "<p><strong>Expanding on others' answers</strong></p>\n\n<hr>\n\n<p><strong>To clarify why the OP is confused, first</strong>: consider the <code>signed int</code> binary representation of <code>2147483647</code>, below.</p>\n\n<p><a href=\"https://i.stack.imgur.com/O7FDn.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/O7FDn.png\" alt=\"Largest signed int\"></a></p>\n\n<p><br/>    </p>\n\n<hr>\n\n<p><br/>\n<strong>Next, add one to this number</strong>: giving another <code>signed int</code> of <code>-2147483648</code> (which the OP wishes to use)\n<a href=\"https://i.stack.imgur.com/ddVHv.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ddVHv.png\" alt=\"Smallest signed int\"></a>\n<br/></p>\n\n<hr>\n\n<p><br/>\n<strong>Finally:</strong> we can see why the OP is confused when <code>-2147483648</code> compiles to a <code>long int</code> instead of a <code>signed int</code>, since it clearly fits in 32 bits.</p>\n\n<p>But, as the current answers mention, the unary operator (<code>-</code>) is applied <strong><em>after</em></strong> resolving <code>2147483648</code> which is a <code>long int</code> and does NOT fit in 32 bits.</p>\n"}], "owner": {"reputation": 1253, "user_id": 5558647, "user_type": "registered", "accept_rate": 46, "profile_image": "https://i.stack.imgur.com/qzqCQ.gif?s=128&g=1", "display_name": "infinite loop", "link": "https://stackoverflow.com/users/5558647/infinite-loop"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4992, "favorite_count": 12, "accepted_answer_id": 45469321, "answer_count": 3, "score": 91, "last_activity_date": 1555939576, "creation_date": 1501701283, "last_edit_date": 1501746043, "question_id": 45469214, "link": "https://stackoverflow.com/questions/45469214/why-does-the-most-negative-int-value-cause-an-error-about-ambiguous-function-ove", "title": "Why does the most negative int value cause an error about ambiguous function overloads?", "body": "<p>I'm learning about function overloading in C++ and came across this:</p>\n\n<pre><code>void display(int a)\n{\n    cout &lt;&lt; \"int\" &lt;&lt; endl;\n}\n\nvoid display(unsigned a)\n{\n    cout &lt;&lt; \"unsigned\" &lt;&lt; endl;\n}\n\nint main()\n{\n    int i = -2147483648;\n    cout &lt;&lt; i &lt;&lt; endl; //will display -2147483648\n    display(-2147483648);\n}\n</code></pre>\n\n<p>From what I understood, any value given in the <code>int</code> range (in my case <code>int</code> is 4 byte) will call <code>display(int)</code> and any value outside this range will be ambiguous (since the compiler cannot decide which function to call). It is valid for the complete range of <code>int</code> values except its min value i.e. <code>-2147483648</code> where compilation fails with the error</p>\n\n<blockquote>\n  <p>call of overloaded <code>display(long int)</code> is ambiguous</p>\n</blockquote>\n\n<p>But taking the same value to an <code>int</code> and printing the value gives <code>2147483648</code>. I'm literally confused with this behavior.</p>\n\n<p>Why is this behavior observed only when the most negative number is passed? (The behavior is the same if a <code>short</code> is used with <code>-32768</code> - in fact, in any case where the negative number and positive number have the same binary representation)</p>\n\n<p>Compiler used: g++ (GCC) 4.8.5</p>\n"}, {"tags": ["c++", "callback", "function-pointers"], "comments": [{"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 1, "creation_date": 1501700275, "post_id": 45468907, "comment_id": 77898744, "body": "Sometimes you don&#39;t know the name of the function you want to call ahead of time."}, {"owner": {"reputation": 203, "user_id": 7939838, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/261f98e589f851d7b69e983f217f82ff?s=128&d=identicon&r=PG&f=1", "display_name": "Gaurav", "link": "https://stackoverflow.com/users/7939838/gaurav"}, "reply_to_user": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1501700312, "post_id": 45468907, "comment_id": 77898764, "body": "@AndyG Can you please explain or post some link. Thanks"}, {"owner": {"reputation": 20114, "user_id": 691711, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/bf26891a2ec4eca6dd1962a6804f5a40?s=128&d=identicon&r=PG", "display_name": "zero298", "link": "https://stackoverflow.com/users/691711/zero298"}, "edited": false, "score": 2, "creation_date": 1501700313, "post_id": 45468907, "comment_id": 77898768, "body": "Please provide more context to your question.  There are a lot of places where callbacks make sense.  Provide an example of where you think it makes less sense to use callbacks than it does to just call a function.  The main use case of callbacks is to address asynchronous-ness."}, {"owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 1, "creation_date": 1501700393, "post_id": 45468907, "comment_id": 77898815, "body": "Dependency injection"}, {"owner": {"reputation": 203, "user_id": 7939838, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/261f98e589f851d7b69e983f217f82ff?s=128&d=identicon&r=PG&f=1", "display_name": "Gaurav", "link": "https://stackoverflow.com/users/7939838/gaurav"}, "reply_to_user": {"reputation": 20114, "user_id": 691711, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/bf26891a2ec4eca6dd1962a6804f5a40?s=128&d=identicon&r=PG", "display_name": "zero298", "link": "https://stackoverflow.com/users/691711/zero298"}, "edited": false, "score": 0, "creation_date": 1501700417, "post_id": 45468907, "comment_id": 77898825, "body": "@zero298 Well I&#39;ve just started studying it and the question is based on the initial learning of the concept - I am looking for clarification for that in the question itself."}, {"owner": {"reputation": 488, "user_id": 1894697, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e31e63c623c67fad9d407a84729c725?s=128&d=identicon&r=PG", "display_name": "ChrisB", "link": "https://stackoverflow.com/users/1894697/chrisb"}, "edited": false, "score": 0, "creation_date": 1501700702, "post_id": 45468907, "comment_id": 77898989, "body": "This is a simple example but in real life your current thread might not know when it is the correct moment to call the callback function. For example, the main thread doesn&#39;t know when a mouse-click event occurs and it cannot always scan the mouse state because it has more important tasks to perform. So, your main function will tell the &quot;mouse-scanner&quot; thread which callback function to call when a click event takes place."}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 2, "creation_date": 1501700755, "post_id": 45468907, "comment_id": 77899012, "body": "@Gaurav: You&#39;re basically asking &quot;what is this feature useful for&quot;. Well, the answer is &quot;lots of stuff&quot;. There are dozens of uses for callbacks in C and C++. None of these uses are more correct than any other. It&#39;s like asking &quot;what is adding integers useful for?&quot;"}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1501704192, "post_id": 45468907, "comment_id": 77900993, "body": "<i>&quot;why not simply call that function instead of calling it through a function pointer&quot;</i> - because you can be given different function pointers to different functions so you don&#39;t know which function is going to be called when you are writing the program, the decision is made by the program while it is running."}, {"owner": {"reputation": 203, "user_id": 7939838, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/261f98e589f851d7b69e983f217f82ff?s=128&d=identicon&r=PG&f=1", "display_name": "Gaurav", "link": "https://stackoverflow.com/users/7939838/gaurav"}, "reply_to_user": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1501771481, "post_id": 45468907, "comment_id": 77936142, "body": "@Galik so why can&#39;t we just make a switch-case statement in that function and pass the choice as a parameter?"}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1501774920, "post_id": 45468907, "comment_id": 77938814, "body": "@Gaurav Because the person who writes the function doesn&#39;t get to choose what to do. They don&#39;t know in advance what callback-function is needed. That choice is made by a different person who writes the callback-function. That&#39;s is why the <i>pointer</i> to the callback-function has to be passed as a parameter."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "is_accepted": false, "score": 1, "last_activity_date": 1501700571, "creation_date": 1501700571, "answer_id": 45469025, "question_id": 45468907, "link": "https://stackoverflow.com/questions/45468907/why-use-call-back-instead-of-directly-calling-the-function/45469025#45469025", "title": "Why use Call Back instead of directly calling the function?", "body": "<p>Sometimes you may be passing a function (or function-object/lambda) that needs to be stored and called later. Sometimes the callback needs to be passed through multiple layers of functions before it it called. Sometimes it needs to be stored in a container (like <code>std::map</code>) and only be called much later by code that has no idea what you put into the container.</p>\n\n<p>There are <em>many</em> good reasons why callbacs can't just be a simple static call of a pre-declared function. You may not even know the <code>this</code> pointer at the time you write the code to call it (for example).</p>\n"}, {"comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 3, "creation_date": 1501700887, "post_id": 45469050, "comment_id": 77899093, "body": "As always, may the venerable downvoter explain the reasons behind downvoting?"}, {"owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "edited": false, "score": 0, "creation_date": 1501701102, "post_id": 45469050, "comment_id": 77899208, "body": "I don&#39;t know why, but maybe it is because you mentioned C, and not C++ (your first sentence). But you can always use <a href=\"http://en.cppreference.com/w/cpp/algorithm/qsort\" rel=\"nofollow noreferrer\"><code>std::qsort</code></a> and remove that paragraph (I suspect that may have tripped people up)."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "edited": false, "score": 0, "creation_date": 1501701231, "post_id": 45469050, "comment_id": 77899276, "body": "@Rakete1111 a donwnvoter is within their right, of course, but I disagree. I used <code>qsort</code> as a simple, and usually familiar, concept which shows the need for callback functions. If somebody can&#39;t see beyond C... Well, I will not argue with them."}, {"owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "edited": false, "score": 0, "creation_date": 1501701271, "post_id": 45469050, "comment_id": 77899294, "body": "Yeah, I found it weird too. Always comment folks, or no one is able to improve :P"}], "tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": false, "score": 2, "last_activity_date": 1501700708, "creation_date": 1501700708, "answer_id": 45469050, "question_id": 45468907, "link": "https://stackoverflow.com/questions/45468907/why-use-call-back-instead-of-directly-calling-the-function/45469050#45469050", "title": "Why use Call Back instead of directly calling the function?", "body": "<p>Although the question is tagged with C++, the simplest callback example I can think of comes from C. It is a C-style <code>qsort</code> function.</p>\n\n<p>Imagine yourself implementing an array sorting function. You want the function to be able to take an array of any type and any size. So, what would be the arguments to such a function? First, you need to know the start of the array. Second, you need to know the size of the array. Third, you need to know the size of a single element of the array. And forth, given to elements, your <code>qsort</code> would need to know if one is bigger than another! The only way to know this for your generic function would be to call some other function, but which one? You would have to accept a pointer to this comparison function as an argument and call it each time you need to compare two elements. Such comparison function is a callback.</p>\n"}], "owner": {"reputation": 203, "user_id": 7939838, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/261f98e589f851d7b69e983f217f82ff?s=128&d=identicon&r=PG&f=1", "display_name": "Gaurav", "link": "https://stackoverflow.com/users/7939838/gaurav"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 399, "favorite_count": 0, "closed_date": 1501701015, "answer_count": 2, "score": -2, "last_activity_date": 1501701034, "creation_date": 1501700150, "last_edit_date": 1501700498, "question_id": 45468907, "link": "https://stackoverflow.com/questions/45468907/why-use-call-back-instead-of-directly-calling-the-function", "closed_reason": "Needs more focus", "title": "Why use Call Back instead of directly calling the function?", "body": "<p>While going through this <a href=\"http://opensourceforu.com/2012/02/function-pointers-and-callbacks-in-c-an-odyssey/\" rel=\"nofollow noreferrer\">CallBack Function</a> article/code (under the heading <strong>A simple callback function</strong>) I found that callback is nothing but simple function calls, then why not simply call that function instead of calling it through a function pointer which has been passed as a parameter? Please tell me if I am wrong in understanding it. This question is based on the learning at initial stage about the concept seeking for some simple clarification. </p>\n"}, {"tags": ["c++", "pointers", "double-pointer"], "comments": [{"owner": {"reputation": 16907, "user_id": 4832499, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/76532994f6efa8d7dc8a3bb5b7b262a8?s=128&d=identicon&r=PG&f=1", "display_name": "Passer By", "link": "https://stackoverflow.com/users/4832499/passer-by"}, "edited": false, "score": 3, "creation_date": 1501699959, "post_id": 45468789, "comment_id": 77898550, "body": "You need to read a <a href=\"https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list\">good C++ book</a>"}, {"owner": {"reputation": 2931, "user_id": 3971172, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/7SZUT.jpg?s=128&g=1", "display_name": "Kemal Tezer Dilsiz", "link": "https://stackoverflow.com/users/3971172/kemal-tezer-dilsiz"}, "reply_to_user": {"reputation": 16907, "user_id": 4832499, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/76532994f6efa8d7dc8a3bb5b7b262a8?s=128&d=identicon&r=PG&f=1", "display_name": "Passer By", "link": "https://stackoverflow.com/users/4832499/passer-by"}, "edited": false, "score": 0, "creation_date": 1501700144, "post_id": 45468789, "comment_id": 77898663, "body": "Is this a bad question to ask here? I thought it was a nice example and I hadn&#39;t grasped the concept. I will look into the books thank you!"}, {"owner": {"reputation": 16907, "user_id": 4832499, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/76532994f6efa8d7dc8a3bb5b7b262a8?s=128&d=identicon&r=PG&f=1", "display_name": "Passer By", "link": "https://stackoverflow.com/users/4832499/passer-by"}, "edited": false, "score": 0, "creation_date": 1501700264, "post_id": 45468789, "comment_id": 77898738, "body": "The question <i>format</i> is not bad, just the triviality of it. There is one particular requirement that is not met: put in as much effort as humanly possible into researching before asking"}], "answers": [{"tags": [], "owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "is_accepted": true, "score": 1, "last_activity_date": 1501700140, "creation_date": 1501700140, "answer_id": 45468905, "question_id": 45468789, "link": "https://stackoverflow.com/questions/45468789/why-do-i-need-double-pointers-for-an-array-of-objects-hashmap-example-in-c/45468905#45468905", "title": "Why do I need double pointers for an array of objects? HashMap Example in C++", "body": "<p>This implementation uses <a href=\"https://en.wikipedia.org/wiki/Hash_table#Separate_chaining_with_linked_lists\" rel=\"nofollow noreferrer\">separate chaining with linked lists</a> for managing hash collisions. Therefore, <code>table</code> is an array of pointers to <code>HashNode</code>, meaning that it needs two asterisks:</p>\n\n<ul>\n<li>One asterisk comes from the type of array element, which is <code>HashNode*</code></li>\n<li>The other asterisk comes from making an array of <code>HashNode*</code></li>\n</ul>\n\n<p>That is also why you have an asterisk in the <code>new</code> expression:</p>\n\n<pre><code>table = new HashNode*[100];\n//                  ^\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 5003054, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Of9Wkq5YgRs/AAAAAAAAAAI/AAAAAAAAAIE/dILp3upP_nY/photo.jpg?sz=128", "display_name": "Himanshu Mahar", "link": "https://stackoverflow.com/users/5003054/himanshu-mahar"}, "is_accepted": false, "score": 0, "last_activity_date": 1501701554, "creation_date": 1501701554, "answer_id": 45469283, "question_id": 45468789, "link": "https://stackoverflow.com/questions/45468789/why-do-i-need-double-pointers-for-an-array-of-objects-hashmap-example-in-c/45469283#45469283", "title": "Why do I need double pointers for an array of objects? HashMap Example in C++", "body": "<p>It seems you are very new to c++ pointers.\nWhat you are currently doing is make array of 100 pointers. So Compiler is not giving you any error because actual objects are not created with this line.\n<strong>HashNode **table = new HashNode*[100];</strong></p>\n\n<p>But when you use \n<strong>HashNode *table = new HashNode[100];</strong>\nThen you are trying to create 100 objects for HashNode;\nBut you do not have default constructor so compiler giving you the above error.</p>\n\n<p>I have attached following working code. check it out.</p>\n\n<pre><code>    #include &lt;iostream&gt;\n    using namespace std;\n\n    struct HashNode{\n\n        HashNode* next;\n        int data;\n        int key;\n        int hashCode;\n\n        HashNode(){}\n\n        HashNode(\n            HashNode* next, \n            const int&amp; data, \n            const int&amp; key, \n            const int&amp; hashCode\n            ) : next(next), data(data), key(key), hashCode(hashCode)\n            {}\n\n    };\n\n    class HashMap{\n        public:\n            HashMap();\n\n        private:\n            //Here is the double pointer\n            HashNode* table;\n    };\n\n    HashMap::HashMap(){\n        //Here is the array initialization \n        table = new HashNode[100];\n    }\n\n    int main() {\n        // your code goes here\n\n        HashMap ob;\n        std::cout &lt;&lt; \"him\" &lt;&lt;  std::endl;\n        return 0;\n    }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 31, "user_id": 13155792, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AOh14Ggv60kd5lVqwzo5JMcOibQwgAvgDfjmMNvTwx7t=k-s128", "display_name": "JOSEPH BENOY", "link": "https://stackoverflow.com/users/13155792/joseph-benoy"}, "is_accepted": false, "score": 0, "last_activity_date": 1598004490, "creation_date": 1598004490, "answer_id": 63520811, "question_id": 45468789, "link": "https://stackoverflow.com/questions/45468789/why-do-i-need-double-pointers-for-an-array-of-objects-hashmap-example-in-c/63520811#63520811", "title": "Why do I need double pointers for an array of objects? HashMap Example in C++", "body": "<p>Here you are declaring array of pointers</p>\n<blockquote>\n<p>HashNode** table;</p>\n</blockquote>\n<p>That is an array named table with pointers of the type hashNode.</p>\n"}], "owner": {"reputation": 2931, "user_id": 3971172, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/7SZUT.jpg?s=128&g=1", "display_name": "Kemal Tezer Dilsiz", "link": "https://stackoverflow.com/users/3971172/kemal-tezer-dilsiz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 763, "favorite_count": 0, "accepted_answer_id": 45468905, "answer_count": 3, "score": 1, "last_activity_date": 1598004490, "creation_date": 1501699791, "question_id": 45468789, "link": "https://stackoverflow.com/questions/45468789/why-do-i-need-double-pointers-for-an-array-of-objects-hashmap-example-in-c", "title": "Why do I need double pointers for an array of objects? HashMap Example in C++", "body": "<p>I am practicing some C++ and I was confused about why I need double pointers for an array of objects(such as a node struct). Here is a simple code snippet to explain my situation:</p>\n\n<pre><code>struct HashNode{\n\n    HashNode* next;\n    int data;\n    int key;\n    int hashCode;\n\n    HashNode::HashNode(\n        HashNode* next, \n        const int&amp; data, \n        const int&amp; key, \n        const int&amp; hashCode\n        ) : next(next), data(data), key(key), hashCode(hashCode)\n        {}\n\n};\n\nclass HashMap{\n    public:\n        HashMap();\n        HashMap(int tableSize);\n        ~HashMap();\n\n    private:\n        //Here is the double pointer\n        HashNode** table;\n};\n\nHashMap::HashMap(){\n    //Here is the array initialization \n    table = new HashNode*[100];\n}\n</code></pre>\n\n<p>I have removed the code that is unnecessary for the question.</p>\n\n<p>If I remove the double pointer as such:</p>\n\n<pre><code>HashNode* table;\n</code></pre>\n\n<p>and</p>\n\n<pre><code>table = new HashNode[100];\n</code></pre>\n\n<p>I get the following error. </p>\n\n<pre><code>hashmap.cpp: In method `HashMap::HashMap()':\nhashmap.cpp:87: no matching function for call to `HashNode::HashNode ()'\nhashmap.cpp:61: candidates are: HashNode::HashNode(const HashNode &amp;)\nhashmap.cpp:58:                 HashNode::HashNode(HashNode *, const int &amp;, cons\nt int &amp;, const int &amp;)\n</code></pre>\n\n<p>which shows me that the HashNode tries to run a constructor. </p>\n\n<p>If I change only the initialization of the array as <code>table = new HashNode*[100];</code> while keeping <code>HashNode* table;</code> then I get the following error.</p>\n\n<pre><code>hashmap.cpp: In method `HashMap::HashMap()':\nhashmap.cpp:87: assignment to `HashNode *' from `HashNode **'\n</code></pre>\n\n<p>My assumption is that when I make an array of objects, I need the lifetime of the objects to be for the duration of the program as well. This requires me to use pointers for the objects as well as the array. Therefore, I need to have double pointers for the array since it points to pointers and I need pointers for the objects.</p>\n\n<p>However, I am still unsure and I cannot really find any good explanations online. Could someone please explain this situation?</p>\n"}, {"tags": ["c++", "arrays", "pointers", "char", "return"], "comments": [{"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 3, "creation_date": 1501699656, "post_id": 45468715, "comment_id": 77898371, "body": "You need to read a textbook ASAP."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1501699732, "post_id": 45468715, "comment_id": 77898427, "body": "<code>int size; char *str=new char[size];</code> what is the value of <code>size</code> here?"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1501699779, "post_id": 45468715, "comment_id": 77898457, "body": "Return a <code>std::string</code> or a <code>std::vector&lt;char&gt;</code>. <i>Don&#39;t</i> return a pointer to a C-style array of <code>char</code>. <i>Please</i>!"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 1, "creation_date": 1501699887, "post_id": 45468715, "comment_id": 77898511, "body": "@Slava - I agree - one of these: <a href=\"https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list\" title=\"the definitive c book guide and list\">stackoverflow.com/questions/388242/&hellip;</a>"}, {"owner": {"reputation": 18763, "user_id": 472495, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/4rtxd.png?s=128&g=1", "display_name": "halfer", "link": "https://stackoverflow.com/users/472495/halfer"}, "edited": false, "score": 1, "creation_date": 1501700690, "post_id": 45468715, "comment_id": 77898983, "body": "Please read <a href=\"//meta.stackoverflow.com/q/326569\">Under what circumstances may I add \u201curgent\u201d or other similar phrases to my question, in order to obtain faster answers?</a> - the summary is that this is not an ideal way to address volunteers, and is probably counterproductive to obtaining answers. Please refrain from adding this to your questions."}, {"owner": {"reputation": 18763, "user_id": 472495, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/4rtxd.png?s=128&g=1", "display_name": "halfer", "link": "https://stackoverflow.com/users/472495/halfer"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1501701046, "post_id": 45468715, "comment_id": 77899183, "body": "@Jesper: good edits. I suggest that additionally if you see chatty material (&quot;I am new here&quot;) or any kind of urgent begging, it can be trimmed."}, {"owner": {"reputation": 21, "user_id": 8026874, "user_type": "registered", "profile_image": "https://graph.facebook.com/10210532715728780/picture?type=large", "display_name": "Saad Shaukatt", "link": "https://stackoverflow.com/users/8026874/saad-shaukatt"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1501701594, "post_id": 45468715, "comment_id": 77899450, "body": "@NathanOliver the size value is give by the user as to &quot;Request memory for the variable&quot;. telling how many of them need be for the array."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1501701768, "post_id": 45468715, "comment_id": 77899537, "body": "@SaadShaukatt Not at that point  You&#39;re using <code>size</code> before you ever fill it in from the user."}, {"owner": {"reputation": 21, "user_id": 8026874, "user_type": "registered", "profile_image": "https://graph.facebook.com/10210532715728780/picture?type=large", "display_name": "Saad Shaukatt", "link": "https://stackoverflow.com/users/8026874/saad-shaukatt"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1501702343, "post_id": 45468715, "comment_id": 77899876, "body": "@NathanOliver yea and.....that is my bad should use before hand . still need a proper return construct for the function which i am confused for ."}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 8026874, "user_type": "registered", "profile_image": "https://graph.facebook.com/10210532715728780/picture?type=large", "display_name": "Saad Shaukatt", "link": "https://stackoverflow.com/users/8026874/saad-shaukatt"}, "edited": false, "score": 0, "creation_date": 1501705420, "post_id": 45469996, "comment_id": 77901634, "body": "thank you , but i need to carry the rerun  to another function to be used. as such for this code  int length(char* str) {     char i;     for(i = 0; str[i] != &#39;\\0&#39;; ++i);    // printf(&quot;Length of string: %d&quot;, i);     return i;  }"}, {"owner": {"reputation": 3624, "user_id": 8013471, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jh4jO.jpg?s=128&g=1", "display_name": "cse", "link": "https://stackoverflow.com/users/8013471/cse"}, "reply_to_user": {"reputation": 21, "user_id": 8026874, "user_type": "registered", "profile_image": "https://graph.facebook.com/10210532715728780/picture?type=large", "display_name": "Saad Shaukatt", "link": "https://stackoverflow.com/users/8026874/saad-shaukatt"}, "edited": false, "score": 0, "creation_date": 1501742910, "post_id": 45469996, "comment_id": 77913912, "body": "Since a function can return only 1 value. So either you can return the string or length of string. I preferred to return string because  you can calculate length in calling function (as stated above). But if you wants to return the length then you can change the function signature to <code>int get(char** str)</code> and change use of <code>str</code> variable accordingly. If you don&#39;t wants the content of <code>str</code> variable then present code is ok except return the <code>size-1</code> from above code."}], "tags": [], "owner": {"reputation": 3624, "user_id": 8013471, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jh4jO.jpg?s=128&g=1", "display_name": "cse", "link": "https://stackoverflow.com/users/8013471/cse"}, "is_accepted": false, "score": 1, "last_activity_date": 1590112113, "last_edit_date": 1590112113, "creation_date": 1501704330, "answer_id": 45469996, "question_id": 45468715, "link": "https://stackoverflow.com/questions/45468715/function-to-return-char-array-via-pointers/45469996#45469996", "title": "Function to return char array via pointers", "body": "<p>Following code may be useful:</p>\n\n<pre><code>char* get()\n{\n    int size;\n\n    cout&lt;&lt;\"enter size\";\n    cin&gt;&gt;size;\n\n    char *str=new char[size + 1]; // +1 for `\\0` character\n\n    for(int i=0;i&lt;size;i++)\n    {\n        str[i]=getche();\n    }\n\n    str[size]='\\0';\n\n    return str;\n}\n</code></pre>\n\n<p>To get string size in calling function(for e.g. in <code>main()</code>), use <code>strlen()</code> function which is available in <code>cstring</code> header file.</p>\n"}], "owner": {"reputation": 21, "user_id": 8026874, "user_type": "registered", "profile_image": "https://graph.facebook.com/10210532715728780/picture?type=large", "display_name": "Saad Shaukatt", "link": "https://stackoverflow.com/users/8026874/saad-shaukatt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 448, "favorite_count": 0, "answer_count": 1, "score": -5, "last_activity_date": 1590112113, "creation_date": 1501699542, "last_edit_date": 1501700681, "question_id": 45468715, "link": "https://stackoverflow.com/questions/45468715/function-to-return-char-array-via-pointers", "title": "Function to return char array via pointers", "body": "<p>I need to make a function (no argument) that will return a char array. The length of the array will be defined by the user. I can not use the <code>gets()</code> function.</p>\n\n<pre><code>char get()\n{\n    int size;\n\n    char *str=new char[size];\n    int i,l;\n\n    cout&lt;&lt;\"enter size\";\n    cin&gt;&gt;size;\n\n    for(i=0;i&lt;size;i++)\n    {\n        str[i]=getche();\n\n    }\n\n    str[size]='\\0';\n\n    return str[size];\n}\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 820, "user_id": 4266707, "user_type": "registered", "accept_rate": 69, "profile_image": "https://lh4.googleusercontent.com/-fLyyGXepW68/AAAAAAAAAAI/AAAAAAAAABI/RjSsIhv1dvs/photo.jpg?sz=128", "display_name": "Javia1492", "link": "https://stackoverflow.com/users/4266707/javia1492"}, "edited": false, "score": 1, "creation_date": 1501698408, "post_id": 45468374, "comment_id": 77897625, "body": "Did you use a debugger to step through line by line?"}, {"owner": {"reputation": 1, "user_id": 8407266, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/543d1980975595727d088af1f7c0fab5?s=128&d=identicon&r=PG&f=1", "display_name": "George Sangiolo", "link": "https://stackoverflow.com/users/8407266/george-sangiolo"}, "reply_to_user": {"reputation": 820, "user_id": 4266707, "user_type": "registered", "accept_rate": 69, "profile_image": "https://lh4.googleusercontent.com/-fLyyGXepW68/AAAAAAAAAAI/AAAAAAAAABI/RjSsIhv1dvs/photo.jpg?sz=128", "display_name": "Javia1492", "link": "https://stackoverflow.com/users/4266707/javia1492"}, "edited": false, "score": 0, "creation_date": 1501698498, "post_id": 45468374, "comment_id": 77897687, "body": "Yes I did--whenever I step through, everything seems to work fine up until it tries to read the line I marked, then it crashes with either sigsegv or sigtrap on getline()"}, {"owner": {"reputation": 820, "user_id": 4266707, "user_type": "registered", "accept_rate": 69, "profile_image": "https://lh4.googleusercontent.com/-fLyyGXepW68/AAAAAAAAAAI/AAAAAAAAABI/RjSsIhv1dvs/photo.jpg?sz=128", "display_name": "Javia1492", "link": "https://stackoverflow.com/users/4266707/javia1492"}, "edited": false, "score": 0, "creation_date": 1501698646, "post_id": 45468374, "comment_id": 77897769, "body": "Well, slightly unrelated but you shouldnt use <code>.eof()</code>. <a href=\"https://stackoverflow.com/questions/5605125/why-is-iostreameof-inside-a-loop-condition-considered-wrong\" title=\"why is iostreameof inside a loop condition considered wrong\">stackoverflow.com/questions/5605125/&hellip;</a>"}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 2, "creation_date": 1501698648, "post_id": 45468374, "comment_id": 77897771, "body": "the obvious thing is that you ran off the end of listOfCells, you dont show its declaration so its hard to guess its size"}, {"owner": {"reputation": 1, "user_id": 8407266, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/543d1980975595727d088af1f7c0fab5?s=128&d=identicon&r=PG&f=1", "display_name": "George Sangiolo", "link": "https://stackoverflow.com/users/8407266/george-sangiolo"}, "edited": false, "score": 0, "creation_date": 1501698813, "post_id": 45468374, "comment_id": 77897880, "body": "I checked for that--listOfCells is declared with a size of 4 * numberCells, which is 256--it only feeds numberCells (64) coordinates, so much less than the max"}, {"owner": {"reputation": 820, "user_id": 4266707, "user_type": "registered", "accept_rate": 69, "profile_image": "https://lh4.googleusercontent.com/-fLyyGXepW68/AAAAAAAAAAI/AAAAAAAAABI/RjSsIhv1dvs/photo.jpg?sz=128", "display_name": "Javia1492", "link": "https://stackoverflow.com/users/4266707/javia1492"}, "edited": false, "score": 0, "creation_date": 1501698858, "post_id": 45468374, "comment_id": 77897917, "body": "@GeorgeSangiolo Did you actually check the size of <code>listOfCells</code> in the debugger?"}, {"owner": {"reputation": 1, "user_id": 8407266, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/543d1980975595727d088af1f7c0fab5?s=128&d=identicon&r=PG&f=1", "display_name": "George Sangiolo", "link": "https://stackoverflow.com/users/8407266/george-sangiolo"}, "edited": false, "score": 0, "creation_date": 1501699037, "post_id": 45468374, "comment_id": 77898031, "body": "OHH--I just realized I declared listOfCells&#39;s size before I read the size in the function"}, {"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 0, "creation_date": 1501699198, "post_id": 45468374, "comment_id": 77898125, "body": "<code>while (!myFile.eof()) </code> is wrong. Google this. Also what is <code>(tok != 0x0)</code> ? Why are you even using <code>tok</code>?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1501699477, "post_id": 45468374, "comment_id": 77898272, "body": "Instead of <code>strtok(thisLine, delim);</code> consider sticking to <code>std::string</code> and using <code>std::string::substr</code> and <code>std::string::find_first_of</code>. It should be a little less explosive."}], "owner": {"reputation": 1, "user_id": 8407266, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/543d1980975595727d088af1f7c0fab5?s=128&d=identicon&r=PG&f=1", "display_name": "George Sangiolo", "link": "https://stackoverflow.com/users/8407266/george-sangiolo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 52, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1501698414, "creation_date": 1501698354, "last_edit_date": 1501698414, "question_id": 45468374, "link": "https://stackoverflow.com/questions/45468374/sigsegv-error-on-getline-function", "title": "Sigsegv error on getline function", "body": "<p>I've spent the last couple hours trying to debug this block of code, and I can't for the life of me track down the source of this error. </p>\n\n<pre><code>void readSaveFile() {\nint cellIdx = 0;\nifstream myFile;\nstring nextWord;\nstring nextLine;\nchar* tok;\nconst char* delim = \" ,;/\\n\\t\";\nchar thisLine[30];\nmyFile.open(\"VoronoiSave1.txt\");\n//int idx = 0;\nif (!myFile.is_open()) {\n    cout &lt;&lt; \"Unable to open file\" &lt;&lt; endl;\n} else {\n    while (!myFile.eof()) {\n        getline(myFile, nextLine);\n        strcpy(thisLine, nextLine.c_str());\n        tok = strtok(thisLine, delim);\n        if (tok != 0x0) {\n            nextWord = tok;\n        } else break;\n            if (nextWord == \"xBound\") {\n                tok = strtok(NULL, delim);\n                xBound = atof(tok);\n                midXBound = xBound /4;\n            } else if (nextWord == \"yBound\") {\n                tok = strtok(NULL, delim);\n                yBound = atof(tok);\n                midYBound = yBound /4;\n            } else if(nextWord == \"sizeFactor\") {\n                tok = strtok(NULL, delim);\n                sizeFactor = atoi(tok);\n            } else if (nextWord == \"numberCells\") {\n                tok = strtok(NULL, delim);\n                numberCells = atoi(tok);\n            } else if (nextWord == \"numberGenerations\") {\n                tok = strtok(NULL, delim);\n                numberGenerations = atoi(tok);\n            } else if (nextWord == \"displayEvery\") {\n                tok = strtok(NULL, delim);\n                displayEvery = atoi(tok);\n            } else if (nextWord == \"A0\") {\n                tok = strtok(NULL, delim);\n                A0 = atof(tok);\n            } else if (nextWord == \"P0\") {\n                tok = strtok(NULL, delim);\n                P0 = atof(tok);\n            } else if (nextWord == \"conA\") {\n                tok = strtok(NULL, delim);\n                conA = atof(tok);\n            } else if (nextWord == \"conB\") {\n                tok = strtok(NULL, delim);\n                conB = atof(tok);\n            } else if (nextWord == \"conC\") {\n                tok = strtok(NULL, delim);\n                conC = atof(tok);\n            } else if (nextWord == \"conE\") {\n                tok = strtok(NULL, delim);\n                conE = atof(tok);\n            } else if (nextWord == \"c1\") {\n                tok = strtok(NULL, delim);\n                c1 = atoi(tok);\n            } else if (nextWord == \"c2\") {\n                tok = strtok(NULL, delim);\n                c2 = atoi(tok);\n            } else if (nextWord == \"c3\") {\n                tok = strtok(NULL, delim);\n                c3 = atoi(tok);\n            } else if (nextWord == \"c4\") {\n                tok = strtok(NULL, delim);\n                c4 = atoi(tok);\n            } else if (nextWord == \"end\") {\n                tok = NULL;\n                break;\n            } else if (nextWord == \"|\"){\n                point p;\n                tok = strtok(NULL, delim);\n                p.x = atof(tok);\n                tok = strtok(NULL, delim);\n                p.y = atof(tok);\n                points.push(p);\n                listOfCells[cellIdx].setLocation(p);\n                cellIdx++;\n            }  \n            else tok = NULL;\n    //  }\n    }\n}\n\nmyFile.close();\n}\n</code></pre>\n\n<p>This function is supposed to read a txt file line by line and assign values from it into variables for my code. The debugger tells me that it fails on the getline() function somewhere in the middle of reading the file (the same line of the text file each time, and I've checked for any irregularities in that line). I have another function that is similar to this one, with the difference being that it reads smaller files, and it works just fine (they're the same except this one also reads sets of coordinates, too).</p>\n\n<p><em>Actually, when I try to debug it now to get the specific error, it just gives me a sigtrap error (ntdll!RtlpntMakeTemporaryKey())</em></p>\n\n<p>This is the text file that it reads:</p>\n\n<pre><code>xBound 20\nyBound 20\nsizeFactor 25\nnumberCells 64\nnumberGenerations 180000\ndisplayEvery 10\nA0 6.25\nP0 15\nconA 1\nconB 0.4\nconC -2\nconE 0.5\nc1 52\nc2 9\nc3 59\nc4 16\n| 0.137451,7.39333\n| 5.42329,4.04438\n| 10.4966,2.11276\n| 14.8588,8.83051\n| 8.51037,9.98535\n| 14.5657,0.96855\n| 12.2967,8.02728\n| 12.67,8.43055\n| 6.71378,9.69364\n| 9.91587,9.71739\n| 0.0102949,14.9428\n| 7.64323,8.52529\n| 8.56282,11.6512\n| 9.4758,4.41921\n| 8.91906,6.94152\n| 6.6964,6.83924\n| 14.3277,10.358\n| 8.52992,11.7173\n| 10.0237,11.6031\n| 6.95512,5.82018\n| 8.91503,9.84806\n| 11.5676,8.50173\n| 4.9829,7.02023\n| 13.3241,7.1157\n| 13.8758,6.79126\n| 11.4524,4.6928\n| 13.792,10.9609\n| 19.8873,10.8045\n| 8.87628,15.5246\n| 10.643,6.70885\n| 5.95795,8.35663 &lt;- this is the line that it fails at\n| 14.3533,10.3611\n| 6.94571,8.4644\n| 7.55378,5.5384\n| 9.64479,5.73394\n| 13.4751,9.00817\n| 8.19452,5.03502\n| 6.15974,6.47267\n| 11.1405,9.72743\n| 5.77898,10.5858\n| 13.3271,7.15259\n| 11.6175,1.17234\n| 10.1269,8.62241\n| 13.5455,9.98899\n| 10.0209,1.27546\n| 10.9164,8.19685\n| 9.07094,6.50686\n| 10.9881,5.52526\n| 10.3319,7.48381\n| 19.9812,14.545\n| 4.91259,8.48509\n| 9.856,6.025\n| 11.7527,5.86879\n| 19.7908,8.19586\n| 11.8846,9.9203\n| 8.53876,11.6635\n| 9.39078,11.2209\n| 0.0414163,14.957\n| 10.9526,7.18578\n| 5.5856,8.55156\n| 1.39154,6.49213\n| 8.45031,11.5184\n| 19.9807,13.2524\n| 6.12546,9.69112\n</code></pre>\n\n<p>Thank you!</p>\n\n<p>Edit: marked the trouble line in the txt file</p>\n"}, {"tags": ["c++", "pointers"], "comments": [{"owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 0, "creation_date": 1501698054, "post_id": 45468256, "comment_id": 77897424, "body": "I would be surprised if any modern compiler didn&#39;t take advantage of RVO and NRVO at every available opportunity. So in that respect I think the latter method is more semantically reasonable and understandable."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1501698109, "post_id": 45468256, "comment_id": 77897457, "body": "<a href=\"http://en.cppreference.com/w/cpp/language/copy_elision\" rel=\"nofollow noreferrer\">Return Value Optimization</a> is mandatory/implicit in many cases now."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1501698158, "post_id": 45468256, "comment_id": 77897494, "body": "Possible dupe: <a href=\"https://stackoverflow.com/questions/33994995/which-is-more-efficient-return-a-value-vs-pass-by-reference\" title=\"which is more efficient return a value vs pass by reference\">stackoverflow.com/questions/33994995/&hellip;</a>"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1501698331, "post_id": 45468256, "comment_id": 77897586, "body": "<a href=\"https://www.youtube.com/watch?v=q0N9Tvf7Bz0&amp;list=PLHTh1InhhwT7J5jl4vAhO1WvGHUUFgUQH&amp;index=108\" rel=\"nofollow noreferrer\">This video</a> does show some interesting edge cases."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1501698479, "post_id": 45468256, "comment_id": 77897669, "body": "If the variable is local, you can&#39;t return by reference or pointer because the variable ceases to exist after execution leaves the function."}, {"owner": {"reputation": 1511, "user_id": 2680879, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/1207905/picture?type=large", "display_name": "Atul Bhatia", "link": "https://stackoverflow.com/users/2680879/atul-bhatia"}, "edited": false, "score": 0, "creation_date": 1501699924, "post_id": 45468256, "comment_id": 77898531, "body": "Indeed -- added the return statement."}], "answers": [{"comments": [{"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1501703595, "post_id": 45468308, "comment_id": 77900629, "body": "Move semantics will only help if the type is efficiently movable."}], "tags": [], "owner": {"reputation": 5782, "user_id": 2832398, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/356c99a077310a35816f852423859f4c?s=128&d=identicon&r=PG&f=1", "display_name": "lilezek", "link": "https://stackoverflow.com/users/2832398/lilezek"}, "is_accepted": false, "score": 0, "last_activity_date": 1501698115, "creation_date": 1501698115, "answer_id": 45468308, "question_id": 45468256, "link": "https://stackoverflow.com/questions/45468256/c-when-to-pass-pointers-versus-returning-objects/45468308#45468308", "title": "c++: When to pass pointers versus returning objects", "body": "<p>In modern compilers, returning an object can be done with move semantics, and even without move semantics it would be fast enough.</p>\n\n<p>It depends on whether you want <em>scope destruction</em> to be applied or you want the programmer to take care of the ownership of the object you are returning.</p>\n"}, {"comments": [{"owner": {"reputation": 1511, "user_id": 2680879, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/1207905/picture?type=large", "display_name": "Atul Bhatia", "link": "https://stackoverflow.com/users/2680879/atul-bhatia"}, "edited": false, "score": 0, "creation_date": 1501699411, "post_id": 45468581, "comment_id": 77898238, "body": "Completely agree about the readability (which was the motivation behind asking this question). I was curious about the performance aspect, and it seems like both scenarios should be equally performant with most compilers"}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "reply_to_user": {"reputation": 1511, "user_id": 2680879, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/1207905/picture?type=large", "display_name": "Atul Bhatia", "link": "https://stackoverflow.com/users/2680879/atul-bhatia"}, "edited": false, "score": 0, "creation_date": 1501699819, "post_id": 45468581, "comment_id": 77898476, "body": "@AtulBhatia For many years now most compilers optimize the return by creating the object in the caller&#39;s stack segment. The C++ standards specifically allow for that optimization."}], "tags": [], "owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "is_accepted": false, "score": 1, "last_activity_date": 1501699109, "creation_date": 1501699109, "answer_id": 45468581, "question_id": 45468256, "link": "https://stackoverflow.com/questions/45468256/c-when-to-pass-pointers-versus-returning-objects/45468581#45468581", "title": "c++: When to pass pointers versus returning objects", "body": "<p>According to the <a href=\"https://github.com/isocpp/CppCoreGuidelines/blob/master/CppCoreGuidelines.md\" rel=\"nofollow noreferrer\">CppCoreGuidelines</a> by Herb Sutter and Bjarne Stroustrup, the second example is the recommended way. It makes reasoning on the code easier and does not force you to create uninitialized objects in some situations.</p>\n\n<p><strong>See</strong> guideline <strong><a href=\"https://github.com/isocpp/CppCoreGuidelines/blob/master/CppCoreGuidelines.md#Rf-out\" rel=\"nofollow noreferrer\">F.20</a></strong>.</p>\n\n<blockquote>\n  <p>A return value is self-documenting, whereas a &amp; could be either in-out or out-only and is liable to be misused.</p>\n</blockquote>\n"}], "owner": {"reputation": 1511, "user_id": 2680879, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/1207905/picture?type=large", "display_name": "Atul Bhatia", "link": "https://stackoverflow.com/users/2680879/atul-bhatia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1501699904, "creation_date": 1501697914, "last_edit_date": 1501699904, "question_id": 45468256, "link": "https://stackoverflow.com/questions/45468256/c-when-to-pass-pointers-versus-returning-objects", "title": "c++: When to pass pointers versus returning objects", "body": "<p>I've just begun using c++ and I was wondering if there was some guideline around when to do the following:</p>\n\n<p>Let's say I want to return a struct or object. Which of these approaches would be better under what circumstances?</p>\n\n<pre><code>void PopulateStruct(MyStruct* struct) {\n      struct-&gt;a = x;\n      struct-&gt;b = y;\n}\n\nvoid Caller() {\n    MyStruct s;\n    PopulateStruct(&amp;s);\n}\n</code></pre>\n\n<p>OR:</p>\n\n<pre><code>MyStruct PopulateStruct() {\n    MyStruct s;\n    s.a = x;\n    s.b = y;\n    return s;\n}\n\nvoid Caller() {\n    MyStruct s = PopulateStruct();\n}\n</code></pre>\n\n<p>My basic understanding is that if the struct / object is pretty small then the latter option is probably fine (better?) since the copy will be fast and compilers might also use RVO to avoid an actual copy.</p>\n\n<p>And perhaps if the object is really large then you want the former to avoid that copy?</p>\n"}, {"tags": ["c++", "pointers"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1501698064, "post_id": 45468254, "comment_id": 77897434, "body": "Are you sure you want to use pointers?  You can pass the strings by reference and if they are empty you can check that with <code>empty()</code>."}, {"owner": {"reputation": 99, "user_id": 3341503, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/uAHGr.jpg?s=128&g=1", "display_name": "PellucidWombat", "link": "https://stackoverflow.com/users/3341503/pellucidwombat"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1501698413, "post_id": 45468254, "comment_id": 77897631, "body": "I already pass by reference as another part of the exercise. So my question is on implementation rather than strategy. Or perhaps what they are asking for in the exercise is technically not doable due to variable scope issues?"}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1501698720, "post_id": 45468254, "comment_id": 77897811, "body": "You can&#39;t. Are you sure this is what the book expects you to do?"}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 1, "creation_date": 1501698818, "post_id": 45468254, "comment_id": 77897887, "body": "Are you allowed to accept a reference to the pointer? Like: <code>void getNameByPointer(string* firstName, string*&amp; lastName)</code> ?"}, {"owner": {"reputation": 99, "user_id": 3341503, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/uAHGr.jpg?s=128&g=1", "display_name": "PellucidWombat", "link": "https://stackoverflow.com/users/3341503/pellucidwombat"}, "edited": false, "score": 0, "creation_date": 1501698839, "post_id": 45468254, "comment_id": 77897898, "body": "Not entirely. They might have worded the example poorly and intended all operations to be inside a single function in this case (it was derived from another earlier example).   As I don&#39;t know what I don&#39;t know, knowing that this can&#39;t be done is a good thing to know! :-)"}, {"owner": {"reputation": 99, "user_id": 3341503, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/uAHGr.jpg?s=128&g=1", "display_name": "PellucidWombat", "link": "https://stackoverflow.com/users/3341503/pellucidwombat"}, "edited": false, "score": 0, "creation_date": 1501698922, "post_id": 45468254, "comment_id": 77897947, "body": "Unfortunately double pointers and references to pointers are introduced in the next chapter, so I feel like while technically that could work, it might be missing the point of the exercise."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 1, "creation_date": 1501702194, "post_id": 45468254, "comment_id": 77899781, "body": "Use separate functions. Rule of thumb is that if you have an &quot;optional&quot; parameter that completely cuts off half the functions processing, the function is doing too much."}, {"owner": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "edited": false, "score": 1, "creation_date": 1501702343, "post_id": 45468254, "comment_id": 77899877, "body": "Show us the full text of the exercise. Maybe you are missing something. Or we can show you a better way to solve it."}], "answers": [{"comments": [{"owner": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "edited": false, "score": 0, "creation_date": 1501702649, "post_id": 45469328, "comment_id": 77900061, "body": "<code>!lastName  || lastName-&gt;empty()</code> underlies the rules of short-circuit evaluation, so if <code>!lastName</code> is <code>true</code>, <code>lastName-&gt;empty()</code> will never be executed; if <code>lastName</code> is a null pointer, it will not be dereferenced. Besides, this does not answer the question. The OP has an exercise to solve and he is having trouble doing so. Passing a null pointer is required by the exercise."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "edited": false, "score": 0, "creation_date": 1501702900, "post_id": 45469328, "comment_id": 77900202, "body": "@Downvoter - The inverted condition is the problem. And <code>if (lastName)</code> <i>is</i> the solution."}, {"owner": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "reply_to_user": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1501703292, "post_id": 45469328, "comment_id": 77900449, "body": "@StoryTeller There are three options in the code, all commented out because none work. The OP is seeking an alternative doing the equivalent thing and that is the question in my eyes. This answer might solve something but not the question. <code>if (lastName)</code> would prompt the user if <code>lastName</code> was already initialized with a non-null pointer and that is definitely not what the OP wants."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "edited": false, "score": 0, "creation_date": 1501703731, "post_id": 45469328, "comment_id": 77900715, "body": "@Downvoter - The first does not work because the OP slips in a nullptr. Recall that <code>lastName</code> is <code>string*</code>, and not <code>string</code>. I.e. that&#39;s why <code>*lastName = tempLastName;</code> crashes, the UB. Those are C-style <i>output parameters</i>. Of course the OP wants to write into the pointed to objects only if the pointers are pointing at <i>valid objects</i>."}, {"owner": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "reply_to_user": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1501706912, "post_id": 45469328, "comment_id": 77902457, "body": "@StoryTeller This answer says &quot;if it is nullptr you cannot call its member function.&quot; I assume the member function call here is <code>lastname-&gt;empty()</code>. It won&#39;t be called upon a null pointer, though, because of short-circuit evaluation, that&#39;s what I want to say. The answer even mentions that, contradicting itself (&quot;you cannot call its member function [...] although in here it does not get called&quot;. Changing it to <code>if (lastName)</code> ignores the exercise because it asks the user for a surname if the argument is <i>not</i> null; exercise 3 requires the exact opposite, so this is wrong to begin with."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "edited": false, "score": 0, "creation_date": 1501707738, "post_id": 45469328, "comment_id": 77902891, "body": "@Downvoter - That&#39;s not a contradiction, it&#39;s a just warning and reassurance. The warning is because the OP tried to call a member inside the body of the conditional (the assignment operator is a member). The reassurance is regarding <code>-&gt;empty()</code> for reasons you noted. As for ignoring the exercise, that was a much later edit. And as phrased feels like a silliness meant to teach about references to pointers. I do believe a comment already suggests that."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "edited": false, "score": 0, "creation_date": 1501707900, "post_id": 45469328, "comment_id": 77902967, "body": "@Downvoter - I would go so far as to say the OP is at fault for editing their post in a way that invalidated an answer only 2 minutes after the answer was given."}, {"owner": {"reputation": 1812, "user_id": 5945883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17f8de79f057abb63afb9ce7bee0ca51?s=128&d=identicon&r=PG&f=1", "display_name": "R2RT", "link": "https://stackoverflow.com/users/5945883/r2rt"}, "reply_to_user": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "edited": false, "score": 0, "creation_date": 1501712892, "post_id": 45469328, "comment_id": 77905008, "body": "@Downvoter When I wrote my answer, there were no exercise descriptions and sample were different, which led to quite a misunderstanding as I can see. I guess I should remove it now, since it has zero relevance."}, {"owner": {"reputation": 1812, "user_id": 5945883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17f8de79f057abb63afb9ce7bee0ca51?s=128&d=identicon&r=PG&f=1", "display_name": "R2RT", "link": "https://stackoverflow.com/users/5945883/r2rt"}, "edited": false, "score": 0, "creation_date": 1501716845, "post_id": 45469328, "comment_id": 77906076, "body": "I have adjusted my answer to new description"}], "tags": [], "owner": {"reputation": 1812, "user_id": 5945883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17f8de79f057abb63afb9ce7bee0ca51?s=128&d=identicon&r=PG&f=1", "display_name": "R2RT", "link": "https://stackoverflow.com/users/5945883/r2rt"}, "is_accepted": false, "score": 2, "last_activity_date": 1501716761, "last_edit_date": 1501716761, "creation_date": 1501701734, "answer_id": 45469328, "question_id": 45468254, "link": "https://stackoverflow.com/questions/45468254/how-do-i-assign-to-a-c-string-null-pointer-parameter/45469328#45469328", "title": "How do I assign to a C++ string null pointer parameter?", "body": "<p>EDIT:\nI believe it is all aboout mistake in excercise 3, where it should be \"not-NULL\" instead of NULL pointer case, but it is not an proper answer, so let's analyze given case and see if it leads to contradiction.</p>\n\n<p>So we have to return value when we give a function a nullptr. Since pointer's value is null it carries no information which object's value should function modify. There are only workarounds, like in your 3rd point, but it's not changing the answer to: \"How do I assign to a string null pointer such that it is preserved outside of the method without using references or double pointers?\" - you simply can't, since only information that nullpointer carries it that it is null. Nothing about caller scope, so it cannot modify it.</p>\n\n<p>OLD:\nYour problem is in if statement:</p>\n\n<pre><code>    // Check for null\n    if (!lastName || lastName-&gt;empty()) \n</code></pre>\n\n<p>Try with </p>\n\n<pre><code>    if (lastName) \n</code></pre>\n\n<p>!lastName makes it go into if it is equal nullptr. You don't have to check if it is empty (unless you don't want to override current string). What is more, if it is nullptr you cannot call its member function (although in here it does not get called, because it is not evaluated, since !lastName is true).</p>\n\n<p>Rest of the code works fine, so it's not about null pointer passing :)</p>\n"}, {"tags": [], "owner": {"reputation": 2179, "user_id": 2630666, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/VIN5F.jpg?s=128&g=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/2630666/matt"}, "is_accepted": true, "score": 1, "last_activity_date": 1501720657, "creation_date": 1501720657, "answer_id": 45473017, "question_id": 45468254, "link": "https://stackoverflow.com/questions/45468254/how-do-i-assign-to-a-c-string-null-pointer-parameter/45473017#45473017", "title": "How do I assign to a C++ string null pointer parameter?", "body": "<p>I think the problem here is a misunderstanding of exercise 1 leading to a problem with exercise 3.  I believe from the provided text that it is poorly worded exercise and hence the confusion.  Here is one possible solution to exercise one.</p>\n\n<pre><code>#include &lt;string&gt;\n#include &lt;iostream&gt;\n\nvoid ExerciseOne(std::string *, std::string *, std::string *);\n\nint main(){\n\n    std::string first, second, result;\n\n    ExerciseOne(&amp;first, &amp;second, &amp;result);\n\n    return 0;\n}\n\nvoid ExerciseOne(std::string *first, std::string *last, std::string *result){\n    std::string temp;\n    std::cout &lt;&lt; \"What is your first name?\\n\";\n    std::getline(std::cin, temp);\n    *first = temp;\n    std::cout &lt;&lt; \"What is your last name?\\n\";\n    std::getline(std::cin, temp);\n    *last = temp;\n    *result = *first + ' ' + *last;\n    return;\n}\n</code></pre>\n\n<p>Note this statement:</p>\n\n<blockquote>\n  <p>This function should return both values to the caller via additional\n  pointer (or reference) parameters that are passed to the function.</p>\n</blockquote>\n\n<p>Why would we need additional parameters?  I can only assume that this means there should be more inputs than simply the first and last names.  Without seeing the complete text I can't be sure.  Perhaps the point is to show that pointers (and references) can be used as both inputs and outputs.  Exercise 3 follows by simply checking that one of the pointers is valid.</p>\n\n<pre><code>void ExerciseThree(std::string *first, std::string *last, std::string *result){\n    *result = *first + ' ';\n    if (last == NULL){\n        std::string temp;\n        std::cout &lt;&lt; \"What is your last name?\\n\";\n        std::getline(std::cin, temp);\n        *result += temp;\n    }\n    else {\n        *result += *last;\n    }\n    return;\n}\n</code></pre>\n\n<p>As you saw in your tests you cannot assign a local <code>string</code> to the pointers and have it remain valid outside your function.  Without more input parameters the exercise doesn't make alot of sense.  Of course you can make the function simply return a <code>string</code> and avoid the third parameter entirely.</p>\n"}], "owner": {"reputation": 99, "user_id": 3341503, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/uAHGr.jpg?s=128&g=1", "display_name": "PellucidWombat", "link": "https://stackoverflow.com/users/3341503/pellucidwombat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1005, "favorite_count": 0, "accepted_answer_id": 45473017, "answer_count": 2, "score": 0, "last_activity_date": 1501720657, "creation_date": 1501697897, "last_edit_date": 1501703997, "question_id": 45468254, "link": "https://stackoverflow.com/questions/45468254/how-do-i-assign-to-a-c-string-null-pointer-parameter", "title": "How do I assign to a C++ string null pointer parameter?", "body": "<p>I am teaching myself C++ and am working through exercises in a tutorial book. In the current problem, I am supposed to pass in a null pointer to a method for the last name parameter that triggers a prompt for assigning the last name. </p>\n\n<p>My problem is that this either:</p>\n\n<ol>\n<li>Throws an exception.</li>\n<li>Does not carry back outside of the method if I assign in ways to avoid the exception.</li>\n<li>Seems to require a double pointer or reference, based on my current search findings. However, I need to use a pointer parameter for the method (I use a reference parameter as another exercise), and double pointers are not introduced yet in the text (so I feel like this is cheating/missing the point of the lesson).</li>\n</ol>\n\n<p>How do I assign to a string null pointer such that it is preserved outside of the method without using references or double pointers?</p>\n\n<p>Current code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n\nusing namespace std;\n\nvoid getNameByPointer(string* firstName, string* lastName)\n{\n    cout &lt;&lt; \"Please enter your first name: \";\n    cin &gt;&gt; *firstName;\n\n    // Check for null. \n    // Only request last name IF null, as per the book exercise statement.\n    if (!lastName) \n    {\n        string tempLastName;\n        cout &lt;&lt; \"Please enter your last name: \";\n        cin &gt;&gt; tempLastName;\n\n        // Note: All assignment methods below fail in some way if lastName is null. \n        // I cannot find a way to assign to a null pointer that carries out \n        // of the method without using a double pointer or pointer \n        // reference, which are not yet introduced in the book.\n\n        // (1) Throws exception 'Read Access violations': std::_String_alloc&lt;std::_String_base_types&lt;char,std::allocator&lt;char&gt; &gt; &gt;::_Myres(...) returned 0x18.\n        // *lastName = tempLastName;    \n\n        // (2) This assignment is limited to the method scope.\n        // lastName = &amp;tempLastName;\n\n        // (3) This assignment is limited to the method scope.\n        // lastName = new string(tempLastName);     \n    }\n}\n\nint main()\n{\n    string firstName;\n    string lastName;\n\n    getNameByPointer(&amp;firstName, &amp;lastName);\n    cout &lt;&lt; \"Your name is \" &lt;&lt; firstName &lt;&lt; \" \" &lt;&lt; lastName &lt;&lt; '\\n';\n\n    cout &lt;&lt; \"Calling method with NULL...\\n\";\n    string firstName1;\n    // Null pointer\n    string *lastName1 = nullptr;\n\n    getNameByPointer(&amp;firstName1, lastName1);\n    if(lastName1)\n    {\n        cout &lt;&lt; \"Your name is \" &lt;&lt; firstName1 &lt;&lt; \" \" &lt;&lt; *lastName1 &lt;&lt; '\\n';\n    }\n    else\n    {\n        cout &lt;&lt; \"Your name is \" &lt;&lt; firstName1 &lt;&lt; '\\n';\n    }\n}\n</code></pre>\n\n<p><strong>Edit: To better clarify if I have misread the problem, or better communicate my restraints, the problem is stated below:</strong></p>\n\n<p><em>Exercise 3</em></p>\n\n<p>Modify the program you wrote for exercise 1 so that instead of always prompting the user for a last name, it does so only if the caller passes in a NULL pointer for the last name.</p>\n\n<p>(Exercise 1 has already been solved but is the basis for Exercise 3.) </p>\n\n<p><em>Exercise 1</em></p>\n\n<p>Write a function that prompts the user to enter his or her first name and last name, as two separate values. This function should return both values to the caller via additional pointer (or reference) parameters that are passed to the function. Try doing this first with pointers and then with references.</p>\n\n<p>(For Exercise 3, a similar solution was done for the reference function by just checking if the variable is empty as NULL cannot be checked for in the reference parameter.)</p>\n"}, {"tags": ["c++", "visual-studio-2015"], "comments": [{"owner": {"reputation": 1518, "user_id": 2434628, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f694c7757c0085ac1f0ed88d960ff657?s=128&d=identicon&r=PG", "display_name": "AresCaelum", "link": "https://stackoverflow.com/users/2434628/arescaelum"}, "edited": false, "score": 1, "creation_date": 1501697858, "post_id": 45468220, "comment_id": 77897296, "body": "how does particle.h know about whats in tools.h?"}, {"owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 0, "creation_date": 1501697934, "post_id": 45468220, "comment_id": 77897350, "body": "Are you compiling with C++11? The <code>override</code> keyword is new to C++11 and later (though I don&#39;t see it used in the code you provided)"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 1, "creation_date": 1501697979, "post_id": 45468220, "comment_id": 77897379, "body": "You are likely including <code>Particle.h</code> in a file other than <code>Particle.cpp</code>. At that point, <code>Tools.h</code> may not be included. Include the headers you need in <code>Particle.h</code>. There&#39;s nothing wrong with including the header twice, specially since it seems to be guarded by both an <code>#include</code> guard and <code>#pragma once</code>."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 1, "creation_date": 1501698089, "post_id": 45468220, "comment_id": 77897445, "body": "Using both pragmas and include guards is overkill. Stick to one. Also, make a habit of including everything your header needs right in the header. Get rid of nasty setters and getters. And last, but not the least, where is &#39;override&#39; coming from?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1501698810, "post_id": 45468220, "comment_id": 77897877, "body": "I don&#39;t think you&#39;re going to get a conclusive answer from the code snippet provided. Please edit your question to contain a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, assuming that producing the MCVE doesn&#39;t make the problem obvious to you and eliminate the need for the question. Include with the MCVE your compiler and version number if you need to proceed with this question. Delete the question or update and self-answer if you don&#39;t."}, {"owner": {"reputation": 8326, "user_id": 53089, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/525dac0c4812e8e8753935590b40ddb6?s=128&d=identicon&r=PG", "display_name": "Rob K", "link": "https://stackoverflow.com/users/53089/rob-k"}, "edited": false, "score": 0, "creation_date": 1501784249, "post_id": 45468220, "comment_id": 77944888, "body": "Do not rely on side-effect includes as you are doing with Tools.h and Particle.h! That way leads to madness! Explicitly <code>#include &lt;Tools.h&gt;</code> in Particle.h so that it will always get what it needs and you will save yourself countless wasted hours."}], "answers": [{"comments": [{"owner": {"reputation": 6673, "user_id": 777689, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/19JOo.jpg?s=128&g=1", "display_name": "PeterT", "link": "https://stackoverflow.com/users/777689/petert"}, "edited": false, "score": 0, "creation_date": 1577110486, "post_id": 45491066, "comment_id": 105094680, "body": "maybe something in <code>stdafx.h</code> included <code>Particle.h</code> before it ever reached the <code>#include &quot;Tools.h&quot;</code>?"}], "tags": [], "owner": {"reputation": 1, "user_id": 7091498, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d04b3a7d8ebde575cd97e531a1e53aae?s=128&d=identicon&r=PG&f=1", "display_name": "BlackHawk", "link": "https://stackoverflow.com/users/7091498/blackhawk"}, "is_accepted": false, "score": 0, "last_activity_date": 1501781703, "creation_date": 1501781703, "answer_id": 45491066, "question_id": 45468220, "link": "https://stackoverflow.com/questions/45468220/unknown-override-specifier/45491066#45491066", "title": "Unknown override specifier", "body": "<p>Placing <code>#include \"Tools.h\"</code> inside <code>stdafx.h</code> seem to eliminate the problem, although I don't understand why. <code>Tools.h</code> was included inside all metioned classes here (<code>Particle</code> and <code>Player</code>) and despite being included multiple times it should be included only once by using <code>#ifndef</code> directive. Despite that fact, it seems to me that compiler couldn't see <code>Tools.h</code> inside <code>Particle</code> class. Someone could please explain why that happened and why placing header inside <code>stdafx.h</code> file solved a problem? </p>\n"}], "owner": {"reputation": 1, "user_id": 7091498, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d04b3a7d8ebde575cd97e531a1e53aae?s=128&d=identicon&r=PG&f=1", "display_name": "BlackHawk", "link": "https://stackoverflow.com/users/7091498/blackhawk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1078, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1577110093, "creation_date": 1501697776, "last_edit_date": 1577110093, "question_id": 45468220, "link": "https://stackoverflow.com/questions/45468220/unknown-override-specifier", "title": "Unknown override specifier", "body": "<p>I am working on CPP project with multiple classes and I have stuck for a while. I have Particle class (header file):</p>\n\n<pre><code>    #pragma once\n    #ifndef PARTICLE_H\n    #define PARTICLE_H\n\n    class Particle {\n    private:\n        vec3 pos; // &lt;- here I get an error\n        vec3 dir;\n        float speed;\n        float size;\n        float amb[3];\n    public:\n        Particle();\n        Particle(bool sludge);\n        inline void setPosX(float posX);\n        inline void setPosY(float posY);\n        inline void setPosZ(float posZ);\n        inline void setSpeed(float speed);\n        inline void setSize(float size);\n        void setAmb(float amb0, float amb1, float amb2);\n        inline float getPosX();\n        inline float getPosY();\n        inline float getPosZ();\n        inline float getDirX();\n        inline float getDirY();\n        inline float getDirZ();\n        inline float getSpeed();\n        inline float getSize();\n        void renderParticle();\n        void renderSludge();\n    };\n\n    #endif\n</code></pre>\n\n<p>and cpp file includes (for simplicity):</p>\n\n<pre><code>    #include \"stdafx.h\"\n    #include \"Tools.h\"\n    #include \"Particle.h\"\n    #include \"Player.h\"\n</code></pre>\n\n<p>and Tools class, which contains struct vec3:</p>\n\n<pre><code>#pragma once\n\n#ifndef TOOLS_H\n#define TOOLS_H\n\nvoid distance(float posX1, float posY1, float posZ1, float radius1, float posX2, float posY2, float posZ2, float radius2);\nint fibonacci(int num);\nGLuint LoadObj(char * file);\nGLuint LoadTexture(char * file, int magFilter, int minFilter);\nvoid drawSphere(float r, int divisions);\nvoid OnRender();\nvoid OnReshape(int, int);\nvoid OnKeyPress(unsigned char, int, int);\nvoid OnKeyDown(unsigned char, int, int);\nvoid OnKeyUp(unsigned char, int, int);\nvoid OnTimer(int);\n\nstruct vec3 {\n    float x, y, z;\n};\n\nstruct SFace {\n    int v[3];\n    int n[3];\n    int t[3];\n};\n#endif\n</code></pre>\n\n<p>I get an: <code>Error    C3646   'pos': unknown override specifier</code>, I don't understand why, because <code>Tools.h</code> seem to be included only once, and Particle class should know that Tools contains <code>vec3</code>. I tried to declare <code>struct vec3</code> at the beginning of Particle class and it didn't work.</p>\n"}, {"tags": ["c++", "qt", "printing", "qt5", "qwidget"], "comments": [{"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 1, "creation_date": 1501697762, "post_id": 45467942, "comment_id": 77897239, "body": "You can show a <a href=\"https://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable example</a> of your widget."}, {"owner": {"reputation": 33, "user_id": 8407201, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-H9iLb9w2mso/AAAAAAAAAAI/AAAAAAAALNw/JGm0ZSWSE7s/photo.jpg?sz=128", "display_name": "Alexey Smirnov", "link": "https://stackoverflow.com/users/8407201/alexey-smirnov"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1501698738, "post_id": 45467942, "comment_id": 77897821, "body": "I tried QWidget::render() solution but didn&#39;t work, showing me this errors:  &quot;QPainter::begin: Paint device returned engine == 0, type: 2&quot; &quot;QWidget::render: Cannot render with an inactive painter&quot;"}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1501698781, "post_id": 45467942, "comment_id": 77897857, "body": "what are errors?"}, {"owner": {"reputation": 33, "user_id": 8407201, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-H9iLb9w2mso/AAAAAAAAAAI/AAAAAAAALNw/JGm0ZSWSE7s/photo.jpg?sz=128", "display_name": "Alexey Smirnov", "link": "https://stackoverflow.com/users/8407201/alexey-smirnov"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1501699003, "post_id": 45467942, "comment_id": 77898013, "body": "answer edited*, pressed enter accidentally"}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1501699036, "post_id": 45467942, "comment_id": 77898029, "body": "<a href=\"https://stackoverflow.com/posts/45467942/edit\">Edit</a> your question and show what you have tried even if it does not work, plus a <a href=\"https://stackoverflow.com/help/mcve\">mvce</a> of your problem."}, {"owner": {"reputation": 33, "user_id": 8407201, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-H9iLb9w2mso/AAAAAAAAAAI/AAAAAAAALNw/JGm0ZSWSE7s/photo.jpg?sz=128", "display_name": "Alexey Smirnov", "link": "https://stackoverflow.com/users/8407201/alexey-smirnov"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1501699078, "post_id": 45467942, "comment_id": 77898057, "body": "I used the same method explained on <a href=\"http://doc.qt.io/qt-4.8/printing.html\" rel=\"nofollow noreferrer\">QWidget::render()</a>"}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1501699262, "post_id": 45467942, "comment_id": 77898162, "body": "I think you have used the following in some part of your code: <code>QPainter(object)</code>, what object did you use?"}], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 8407201, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-H9iLb9w2mso/AAAAAAAAAAI/AAAAAAAALNw/JGm0ZSWSE7s/photo.jpg?sz=128", "display_name": "Alexey Smirnov", "link": "https://stackoverflow.com/users/8407201/alexey-smirnov"}, "edited": false, "score": 0, "creation_date": 1501702237, "post_id": 45469176, "comment_id": 77899814, "body": "This worked perfectly, thank you so much. I&#39;m almost sure I tried this too, but by some reason it didn&#39;t work, maybe I wrote some wrong arguments. Answer tagged as accepted."}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "reply_to_user": {"reputation": 33, "user_id": 8407201, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-H9iLb9w2mso/AAAAAAAAAAI/AAAAAAAALNw/JGm0ZSWSE7s/photo.jpg?sz=128", "display_name": "Alexey Smirnov", "link": "https://stackoverflow.com/users/8407201/alexey-smirnov"}, "edited": false, "score": 0, "creation_date": 1501702604, "post_id": 45469176, "comment_id": 77900030, "body": "@AlexeySmirnov Please place arguments that you had placed erroneously but this question is closed because they will think it is duplicated."}], "tags": [], "owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "is_accepted": true, "score": 5, "last_activity_date": 1538941954, "last_edit_date": 1538941954, "creation_date": 1501701152, "answer_id": 45469176, "question_id": 45467942, "link": "https://stackoverflow.com/questions/45467942/how-can-i-print-a-qwidget-in-qt/45469176#45469176", "title": "How can I print a QWidget in Qt?", "body": "<p>You have to use <code>QPrinter</code> and this is the object that you must use and requires <code>QPainter</code> to draw the widget in <code>QPrinter</code>.</p>\n\n<pre><code>int main(int argc, char *argv[])\n{\n    QApplication a(argc, argv);\n    QDialog w;\n\n    w.setLayout(new QVBoxLayout());\n    w.layout()-&gt;addWidget(new QLineEdit(\"text\"));\n    w.layout()-&gt;addWidget(new QPushButton(\"btn\"));\n    w.layout()-&gt;addWidget(new QPlainTextEdit(\"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Mauris rutrum magna semper nisi faucibus, at auctor dolor ullamcorper. Phasellus facilisis blandit augue sit amet placerat. Aliquam nec imperdiet diam. Proin dignissim vulputate metus, nec tincidunt magna vulputate ac. Praesent vel felis ac dolor viverra tempus eu vitae neque. Nulla efficitur gravida arcu id suscipit. Maecenas placerat egestas velit quis interdum. Nulla diam massa, hendrerit vitae mi et, placerat aliquam nisl. Donec tincidunt lobortis orci, quis egestas augue tempus sed. Nulla vel dolor eget ipsum accumsan placerat ut at magna.\"));\n    w.show();\n\n    QPushButton btn(\"print\");\n    btn.show();\n\n    QObject::connect(&amp;btn, &amp;QPushButton::clicked, [&amp;w](){\n        QPrinter printer(QPrinter::HighResolution);\n        printer.setOutputFormat(QPrinter::PdfFormat);\n        printer.setOutputFileName(\"output.pdf\");\n        printer.setPageMargins(12, 16, 12, 20, QPrinter::Millimeter);\n        printer.setFullPage(false);\n\n        QPainter painter(&amp;printer);\n\n        double xscale = printer.pageRect().width() / double(w.width());\n        double yscale = printer.pageRect().height() / double(w.height());\n        double scale = qMin(xscale, yscale);\n        painter.translate(printer.paperRect().center());\n        painter.scale(scale, scale);\n        painter.translate(-w.width()/ 2, -w.height()/ 2);\n        w.render(&amp;painter);\n    });\n\n    return a.exec();\n}\n</code></pre>\n\n<p>Widget:</p>\n\n<p><a href=\"https://i.stack.imgur.com/IZfXj.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/IZfXj.png\" alt=\"enter image description here\"></a></p>\n\n<p>output.pdf</p>\n\n<p><a href=\"https://i.stack.imgur.com/SDAf2.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/SDAf2.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 33, "user_id": 8407201, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-H9iLb9w2mso/AAAAAAAAAAI/AAAAAAAALNw/JGm0ZSWSE7s/photo.jpg?sz=128", "display_name": "Alexey Smirnov", "link": "https://stackoverflow.com/users/8407201/alexey-smirnov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4227, "favorite_count": 1, "accepted_answer_id": 45469176, "answer_count": 1, "score": 3, "last_activity_date": 1538941954, "creation_date": 1501696811, "last_edit_date": 1502171087, "question_id": 45467942, "link": "https://stackoverflow.com/questions/45467942/how-can-i-print-a-qwidget-in-qt", "title": "How can I print a QWidget in Qt?", "body": "<p>I need to know how to print a QWidget as a PDF file. The Widget (QDialog) contains a lot of labels, some QPlainTextEdit and a background image. The Dialog shows a receipt with all of its field already filled.</p>\n\n<p>I already tried using QTextDocument and html for this purpose, but the complexity of the receipt(lots of image and format customisation) makes the html output completely messed up.</p>\n\n<p>This is the document.</p>\n\n<p>Receipt image</p>\n\n<p><img src=\"https://i.stack.imgur.com/dudKH.jpg\" alt=\"\"></p>\n"}, {"tags": ["c++", "opencv", "visual-studio-2017", "tesseract"], "comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1501696917, "post_id": 45467928, "comment_id": 77896690, "body": "You could <i>at least</i> show us the error messages.. But, this is a Q/A site for <i>specific</i> programming problems. <i>Not</i> a place to ask for tutorials about basic &quot;get my library to work&quot; problems."}, {"owner": {"reputation": 679, "user_id": 6837132, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5b5807337df1982576c7f03e0121e6fe?s=128&d=identicon&r=PG&f=1", "display_name": "SarahData", "link": "https://stackoverflow.com/users/6837132/sarahdata"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1501696970, "post_id": 45467928, "comment_id": 77896728, "body": "I&#39;m going to do so, but I don&#39;t want to be limited to using Tesseract 3.02 since it&#39;s an old version.."}, {"owner": {"reputation": 679, "user_id": 6837132, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5b5807337df1982576c7f03e0121e6fe?s=128&d=identicon&r=PG&f=1", "display_name": "SarahData", "link": "https://stackoverflow.com/users/6837132/sarahdata"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1501697187, "post_id": 45467928, "comment_id": 77896886, "body": "@JesperJuhl errors added in edit :)"}, {"owner": {"reputation": 10050, "user_id": 501196, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kuQ41.png?s=128&g=1", "display_name": "yms", "link": "https://stackoverflow.com/users/501196/yms"}, "edited": false, "score": 1, "creation_date": 1501697245, "post_id": 45467928, "comment_id": 77896918, "body": "The errors are crystal clear... you are using 32 bit lib files with a 64 bit project. Either configure your project as 32 bits, or add the 64 bit lib files to it."}, {"owner": {"reputation": 679, "user_id": 6837132, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5b5807337df1982576c7f03e0121e6fe?s=128&d=identicon&r=PG&f=1", "display_name": "SarahData", "link": "https://stackoverflow.com/users/6837132/sarahdata"}, "edited": false, "score": 0, "creation_date": 1501697296, "post_id": 45467928, "comment_id": 77896943, "body": "I want to find 64 bit lib files, from where can I have them?"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1501697307, "post_id": 45467928, "comment_id": 77896956, "body": "&quot;LNK2019: unresolved external symbol&quot; - that right there indicates that you are not linking with the correct library that provides the symbol. Check your linker options."}, {"owner": {"reputation": 679, "user_id": 6837132, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5b5807337df1982576c7f03e0121e6fe?s=128&d=identicon&r=PG&f=1", "display_name": "SarahData", "link": "https://stackoverflow.com/users/6837132/sarahdata"}, "edited": false, "score": 0, "creation_date": 1501697606, "post_id": 45467928, "comment_id": 77897148, "body": "what options? libtesseract302.lib libtesseract302d.lib liblept168.lib liblept168d.lib"}, {"owner": {"reputation": 679, "user_id": 6837132, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5b5807337df1982576c7f03e0121e6fe?s=128&d=identicon&r=PG&f=1", "display_name": "SarahData", "link": "https://stackoverflow.com/users/6837132/sarahdata"}, "edited": false, "score": 0, "creation_date": 1501697739, "post_id": 45467928, "comment_id": 77897228, "body": "Maybe my question is not clear.. I meant that I failed to do it using source code zip file and didn&#39;t found how (I read issues, wiki,etc) and tried..if you know how please tell me."}], "owner": {"reputation": 679, "user_id": 6837132, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5b5807337df1982576c7f03e0121e6fe?s=128&d=identicon&r=PG&f=1", "display_name": "SarahData", "link": "https://stackoverflow.com/users/6837132/sarahdata"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 257, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1501786201, "creation_date": 1501696769, "last_edit_date": 1501786201, "question_id": 45467928, "link": "https://stackoverflow.com/questions/45467928/compilation-of-tesseract-3-02-on-debug-mode-x64-errors", "title": "Compilation of Tesseract 3.02 on debug mode x64 errors", "body": "<p>I went through Tesseract wiki in order to install <strong>Tesseract 3.05.1</strong> from <a href=\"https://github.com/tesseract-ocr/tesseract/releases/tag/3.05.01\" rel=\"nofollow noreferrer\">source code</a>, but I faced a problem when <a href=\"https://github.com/tesseract-ocr/tesseract/wiki/Compiling\" rel=\"nofollow noreferrer\">compiling with cppan</a> (when I launch it, it stops) and tried the <a href=\"https://github.com/UB-Mannheim/tesseract/wiki\" rel=\"nofollow noreferrer\">unofficael installer</a> but didn't find the libraries I have to include from their builded Tesseract. So, I d't know what to do in order to have a version of Tesseract that works with my windows 64bit on visual studio 2017.</p>\n\n<p>Note:I already generated opencv build using cmake for visual studio 15 2017 64bit.\n=> I want my project to work on x64, not win32(x68).</p>\n\n<p>I have tesseract 3.02 but compiling it in a project, caused errors.(conflicts between x86 and x64) and <strong><em>I don't prefer to use Tesseract 3.02</em></strong> because it's an old version.</p>\n\n<p>The errors I get when trying to test with Tesseract 3.02 are in the following code:</p>\n\n<pre><code>#include &lt;baseapi.h&gt;\n#include &lt;allheaders.h&gt;\n#include &lt;iostream&gt;\n\nusing namespace std;\n\nint main(void) {\n\n    tesseract::TessBaseAPI api;\n    api.Init(\"\", \"eng\", tesseract::OEM_DEFAULT);\n    api.SetPageSegMode(static_cast&lt;tesseract::PageSegMode&gt;(7));\n    api.SetOutputName(\"out\");\n\n    cout &lt;&lt; \"File name : \";\n    char image[256];\n    cin &gt;&gt; image;\n    PIX   *pixs = pixRead(image);\n\n    STRING text_out;\n    api.ProcessPages(image, NULL, 0, &amp;text_out);\n\n    cout &lt;&lt; text_out.string();\n\n}\n</code></pre>\n\n<p>Errors: </p>\n\n<pre><code>1&gt;------ Build started: Project: RedEyeRemover, Configuration: Debug x64 ------\n1&gt;redEyeRemover.obj : error LNK2019: unresolved external symbol \"public: __cdecl STRING::STRING(void)\" (??0STRING@@QEAA@XZ) referenced in function main\n1&gt;redEyeRemover.obj : error LNK2019: unresolved external symbol \"public: __cdecl STRING::~STRING(void)\" (??1STRING@@QEAA@XZ) referenced in function main\n1&gt;redEyeRemover.obj : error LNK2019: unresolved external symbol \"public: char const * __cdecl STRING::string(void)const \" (?string@STRING@@QEBAPEBDXZ) referenced in function main\n1&gt;redEyeRemover.obj : error LNK2019: unresolved external symbol \"public: __cdecl tesseract::TessBaseAPI::TessBaseAPI(void)\" (??0TessBaseAPI@tesseract@@QEAA@XZ) referenced in function main\n1&gt;redEyeRemover.obj : error LNK2019: unresolved external symbol \"public: virtual __cdecl tesseract::TessBaseAPI::~TessBaseAPI(void)\" (??1TessBaseAPI@tesseract@@UEAA@XZ) referenced in function main\n1&gt;redEyeRemover.obj : error LNK2019: unresolved external symbol \"public: void __cdecl tesseract::TessBaseAPI::SetOutputName(char const *)\" (?SetOutputName@TessBaseAPI@tesseract@@QEAAXPEBD@Z) referenced in function main\n1&gt;redEyeRemover.obj : error LNK2019: unresolved external symbol \"public: int __cdecl tesseract::TessBaseAPI::Init(char const *,char const *,enum tesseract::OcrEngineMode,char * *,int,class GenericVector&lt;class STRING&gt; const *,class GenericVector&lt;class STRING&gt; const *,bool)\" (?Init@TessBaseAPI@tesseract@@QEAAHPEBD0W4OcrEngineMode@2@PEAPEADHPEBV?$GenericVector@VSTRING@@@@3_N@Z) referenced in function \"public: int __cdecl tesseract::TessBaseAPI::Init(char const *,char const *,enum tesseract::OcrEngineMode)\" (?Init@TessBaseAPI@tesseract@@QEAAHPEBD0W4OcrEngineMode@2@@Z)\n1&gt;redEyeRemover.obj : error LNK2019: unresolved external symbol \"public: void __cdecl tesseract::TessBaseAPI::SetPageSegMode(enum tesseract::PageSegMode)\" (?SetPageSegMode@TessBaseAPI@tesseract@@QEAAXW4PageSegMode@2@@Z) referenced in function main\n1&gt;redEyeRemover.obj : error LNK2019: unresolved external symbol \"public: bool __cdecl tesseract::TessBaseAPI::ProcessPages(char const *,char const *,int,class STRING *)\" (?ProcessPages@TessBaseAPI@tesseract@@QEAA_NPEBD0HPEAVSTRING@@@Z) referenced in function main\n1&gt;redEyeRemover.obj : error LNK2019: unresolved external symbol pixRead referenced in function main\n1&gt;C:\\Program Files\\tesseract\\lib\\libtesseract302.lib : warning LNK4272: library machine type 'X86' conflicts with target machine type 'x64'\n1&gt;C:\\Program Files\\tesseract\\lib\\libtesseract302d.lib : warning LNK4272: library machine type 'X86' conflicts with target machine type 'x64'\n1&gt;C:\\Program Files\\tesseract\\lib\\liblept168.lib : warning LNK4272: library machine type 'X86' conflicts with target machine type 'x64'\n1&gt;C:\\Program Files\\tesseract\\lib\\liblept168d.lib : warning LNK4272: library machine type 'X86' conflicts with target machine type 'x64'\n1&gt;C:\\Users\\M\\documents\\visual studio 2017\\Projects\\RedEyeRemover\\x64\\Debug\\RedEyeRemover.exe : fatal error LNK1120: 10 unresolved externals\n1&gt;Done building project \"RedEyeRemover.vcxproj\" -- FAILED.\n========== Build: 0 succeeded, 1 failed, 0 up-to-date, 0 skipped ==========\n</code></pre>\n\n<p>I know that these errors are due to debug mode x64 while libraries I'm using are for x86, but How to make them work for x64?</p>\n"}, {"tags": ["c++", "wrapper", "ace"], "answers": [{"comments": [{"owner": {"reputation": 38, "user_id": 7889588, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-JzZfY2zVca8/AAAAAAAAAAI/AAAAAAAAABs/ZCoZHpvUeGw/photo.jpg?sz=128", "display_name": "Hybr13", "link": "https://stackoverflow.com/users/7889588/hybr13"}, "edited": false, "score": 0, "creation_date": 1501706464, "post_id": 45470245, "comment_id": 77902237, "body": "I agree with your 2nd sentence and ignored &#39;ACE_wrappers_*.sln&#39;. I only needed to use <code>ACE_*.sln</code> However, isn&#39;t the gperf utility apart of the <code>ACE_wrappers_*.sln</code> instead of <code>ACE_*.sln</code>? I thought there was a separate <code>tests_*.sln</code> for building tests, so that you can use the Perl script provided for testing (all within \\ACE_wrappers\\tests&#41;? What is gperf btw? (simply put)"}, {"owner": {"reputation": 2841, "user_id": 596545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adb4726914ef76517e96e937ab607455?s=128&d=identicon&r=PG", "display_name": "Johnny Willemsen", "link": "https://stackoverflow.com/users/596545/johnny-willemsen"}, "reply_to_user": {"reputation": 38, "user_id": 7889588, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-JzZfY2zVca8/AAAAAAAAAAI/AAAAAAAAABs/ZCoZHpvUeGw/photo.jpg?sz=128", "display_name": "Hybr13", "link": "https://stackoverflow.com/users/7889588/hybr13"}, "edited": false, "score": 0, "creation_date": 1501755839, "post_id": 45470245, "comment_id": 77923278, "body": "gperf is a perfect hash generator, just have a look at it when you are interested to learn more"}], "tags": [], "owner": {"reputation": 2841, "user_id": 596545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adb4726914ef76517e96e937ab607455?s=128&d=identicon&r=PG", "display_name": "Johnny Willemsen", "link": "https://stackoverflow.com/users/596545/johnny-willemsen"}, "is_accepted": true, "score": 0, "last_activity_date": 1501705218, "creation_date": 1501705218, "answer_id": 45470245, "question_id": 45467566, "link": "https://stackoverflow.com/questions/45467566/difference-between-ace-sln-and-ace-wrappers-sln-within-ace-wrappers/45470245#45470245", "title": "Difference between ACE.sln and ACE_wrappers.sln within ACE_wrappers?", "body": "<p>The <code>ACE_wrappers_*.sln</code> file contain all projects within ACE (including all examples and tests), the <code>ACE_*.sln</code> files only the ACE core library and the gperf utility. At the moment you use ACE and aren't interested in the examples/tests just use the <code>ACE_*.sln</code> ones.</p>\n"}], "owner": {"reputation": 38, "user_id": 7889588, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-JzZfY2zVca8/AAAAAAAAAAI/AAAAAAAAABs/ZCoZHpvUeGw/photo.jpg?sz=128", "display_name": "Hybr13", "link": "https://stackoverflow.com/users/7889588/hybr13"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 172, "favorite_count": 0, "accepted_answer_id": 45470245, "answer_count": 1, "score": 0, "last_activity_date": 1501705979, "creation_date": 1501695501, "last_edit_date": 1501705979, "question_id": 45467566, "link": "https://stackoverflow.com/questions/45467566/difference-between-ace-sln-and-ace-wrappers-sln-within-ace-wrappers", "title": "Difference between ACE.sln and ACE_wrappers.sln within ACE_wrappers?", "body": "<p>ACE = Adaptive Communication Environment<br>\nDownload Source: <a href=\"http://download.dre.vanderbilt.edu/\" rel=\"nofollow noreferrer\">http://download.dre.vanderbilt.edu/</a><br>\nWhen downloading ACE 6.4.0, there are the following VS solution files under 'ACE_WRAPPERS':</p>\n\n<pre><code>    ACE_vc12.sln\n    ACE_vc14.sln\n    ACE_wrappers_vc12.sln\n    ALE_wrappers_vc14.sln\n</code></pre>\n\n<ul>\n<li>I get why there are separate vc12 and vc14 solutions, but why are there separate solutions for 'ACE' and 'ACE_wrappers'?</li>\n<li>Could these solutions be combined? If so, are they separate for usability for unfamiliar developers? If not, why?</li>\n<li>I use 'ACE.sln' to build ACE. When would I need 'ACE_wrappers.sln'? Examples are appreciated. I'm assuming ACE_wrapper.sln exists so that I can build upon it to meet/simplify needs of my software, making ACE and mySoftware compatible?</li>\n</ul>\n"}, {"tags": ["c++", "c++11", "variadic-templates", "template-meta-programming", "polynomials"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 1, "creation_date": 1501695541, "post_id": 45467382, "comment_id": 77895858, "body": "Templates are a compile-time mechanism. If you want a polynomial that&#39;s evaluated at compile time, you could get away with what you are proposing. It&#39;s not possible to use run-time values as template arguments. You would be better off simply taking the maximum degree of your polynom as a single template argument and storing the terms in an <code>std::array</code>."}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1501706426, "post_id": 45467382, "comment_id": 77902210, "body": "What&#39;s wrong with <code>polynom&lt;1,2&gt;</code> being different from <code>polynom&lt;2,1&gt;</code>?"}, {"owner": {"reputation": 4311, "user_id": 1669370, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/E2t7h.jpg?s=128&g=1", "display_name": "Regis Portalez", "link": "https://stackoverflow.com/users/1669370/regis-portalez"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1501751342, "post_id": 45467382, "comment_id": 77919846, "body": "@Fran&#231;oisAndrieux : what if my coefficients are compile time constants?"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 1, "creation_date": 1501753228, "post_id": 45467382, "comment_id": 77921350, "body": "Yes it is quite easy actually, have you tried anything?"}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 1, "creation_date": 1501757098, "post_id": 45467382, "comment_id": 77924221, "body": "have a look at <a href=\"http://en.cppreference.com/w/cpp/utility/integer_sequence\" rel=\"nofollow noreferrer\">std::integer_sequence</a>"}, {"owner": {"reputation": 4311, "user_id": 1669370, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/E2t7h.jpg?s=128&g=1", "display_name": "Regis Portalez", "link": "https://stackoverflow.com/users/1669370/regis-portalez"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1501786941, "post_id": 45467382, "comment_id": 77946391, "body": "@n.m. Fermat theorem is quite easy when you know the proof, but I can&#39;t write it in a comment... of course I tried but I don&#39;t know variadic templates enough..."}], "answers": [{"tags": [], "owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "is_accepted": false, "score": 0, "last_activity_date": 1501705449, "last_edit_date": 1501705449, "creation_date": 1501702986, "answer_id": 45469649, "question_id": 45467382, "link": "https://stackoverflow.com/questions/45467382/compile-time-polynoms/45469649#45469649", "title": "Compile time polynoms", "body": "<p>I don't understand what do you exactly want (can you propose an example of use?) but I suppose that a way is define a set of types based on <code>std::integral_constant</code>.</p>\n\n<p>By example, the unary minus can be defined as follows</p>\n\n<pre><code>template &lt;typename T&gt;\nstruct uminus\n   : std::integral_constant&lt;typename T::value_type, - T::value&gt;\n { };\n</code></pre>\n\n<p>and the add operator as follows</p>\n\n<pre><code>template &lt;typename T1, typename T2&gt;\nstruct add\n   : std::integral_constant&lt;typename T1::value_type, T1::value + T2::value&gt;\n { };\n</code></pre>\n\n<p>To semplify your expression, you can define a single integer as follows</p>\n\n<pre><code>template &lt;int I&gt;\nstruct i : std::integral_constant&lt;int, I&gt;\n { };\n</code></pre>\n\n<p>so you can write expression (computed compile time) as follows</p>\n\n<pre><code>constexpr auto val = add&lt;i&lt;5&gt;, uminus&lt;i&lt;3&gt;&gt;&gt;::value;\n</code></pre>\n\n<p>The following is a full working example</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;type_traits&gt;\n\ntemplate &lt;typename T&gt;\nstruct uminus\n   : std::integral_constant&lt;typename T::value_type, - T::value&gt;\n { };\n\ntemplate &lt;typename T1, typename T2&gt;\nstruct add\n   : std::integral_constant&lt;typename T1::value_type, T1::value + T2::value&gt;\n { };\n\ntemplate &lt;int I&gt;\nstruct i : std::integral_constant&lt;int, I&gt;\n { };\n\nint main ()\n {\n   constexpr auto val = add&lt;i&lt;5&gt;, uminus&lt;i&lt;3&gt;&gt;&gt;::value;\n\n   std::cout &lt;&lt; val &lt;&lt; std::endl; // print 2\n }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "is_accepted": false, "score": 2, "last_activity_date": 1501793515, "creation_date": 1501793515, "answer_id": 45494291, "question_id": 45467382, "link": "https://stackoverflow.com/questions/45467382/compile-time-polynoms/45494291#45494291", "title": "Compile time polynoms", "body": "<p>Here's what I came up with in 10 minutes, probably not the most elegant or efficient solution but quite straightforward one, using only boring bog-standard technique of recursion over the variadic argument list.</p>\n\n<pre><code>#include &lt;iostream&gt;\n\n// our polynomials are little-endian: the first coefficient is for power 0,\n// the second one is for power 1 etc\n// The empty list corresponds to the zero polynomial\ntemplate &lt;int ... coeff&gt; struct Poly {};\n\n// Print it out\ntemplate &lt;int ... coeff&gt; std::ostream&amp; operator&lt;&lt; (std::ostream&amp; os, Poly&lt;coeff...&gt;);\ntemplate &lt;&gt; std::ostream&amp; operator&lt;&lt; (std::ostream&amp; os, Poly&lt;&gt;) { return os; }\ntemplate &lt;int coeff0, int ... coeff&gt; std::ostream&amp; operator&lt;&lt; (std::ostream&amp; os, Poly&lt;coeff0, coeff...&gt;) {\n    os &lt;&lt; coeff0 &lt;&lt; \" \" &lt;&lt; Poly&lt;coeff...&gt;();\n}\n\n// For number coeff0 and polynomial poly(x), return coeff0 + x * poly(x) \ntemplate &lt;int coeff0, class poly&gt; struct poly_shift;\ntemplate &lt;int coeff0, int ... coeff&gt; struct poly_shift&lt;coeff0, Poly&lt;coeff...&gt;&gt;{\n    using type = Poly&lt;coeff0, coeff...&gt;;\n};\n\n// Addition of polynomials \ntemplate &lt;class poly1, class poly2&gt;\nstruct poly_add;\ntemplate &lt;&gt;\nstruct poly_add&lt;Poly&lt;&gt;, Poly&lt;&gt;&gt; { using type = Poly&lt;&gt;; };\ntemplate &lt;int ... coeff&gt;\nstruct poly_add&lt;Poly&lt;coeff...&gt;, Poly&lt;&gt;&gt; { using type = Poly&lt;coeff...&gt;; };\ntemplate &lt;int ... coeff&gt;\nstruct poly_add&lt;Poly&lt;&gt;, Poly&lt;coeff...&gt;&gt; { using type = Poly&lt;coeff...&gt;; };\ntemplate &lt;int coeff_l0, int coeff_r0, int... coeff_l, int... coeff_r&gt;\nstruct poly_add&lt;Poly&lt;coeff_l0, coeff_l...&gt;, Poly&lt;coeff_r0, coeff_r...&gt;&gt; {\n    using type = typename poly_shift&lt;coeff_l0 + coeff_r0, typename poly_add&lt;Poly&lt;coeff_l...&gt;, Poly&lt;coeff_r...&gt;&gt;::type&gt;::type;\n};\n\n// convenient infix operator for values \ntemplate &lt;class poly1, class poly2&gt;\nconstexpr typename poly_add&lt;poly1, poly2&gt;::type  operator+ (poly1 p1, poly2 p2) { return {}; }\n\n// test it\nint main()\n{\n   Poly &lt;1,2,3&gt; a;\n   Poly &lt;3,4,5,6&gt; b;\n   std::cout &lt;&lt; (a+b);\n}\n</code></pre>\n"}], "owner": {"reputation": 4311, "user_id": 1669370, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/E2t7h.jpg?s=128&g=1", "display_name": "Regis Portalez", "link": "https://stackoverflow.com/users/1669370/regis-portalez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 161, "favorite_count": 2, "answer_count": 2, "score": 0, "last_activity_date": 1501793515, "creation_date": 1501694885, "last_edit_date": 1501751309, "question_id": 45467382, "link": "https://stackoverflow.com/questions/45467382/compile-time-polynoms", "title": "Compile time polynoms", "body": "<p>I (finally) recently heard about variadic templates. I'd like to know that if there is a way to make a int - polynomial with compile time operators:</p>\n\n<pre><code>template &lt;int... coefs&gt; \nstruct polynom {}\n</code></pre>\n\n<p>Which coud support add, unary minus and mul operators.</p>\n\n<p>[Edit] : claryfying question: </p>\n\n<p>A int-polynom is basically one integer list (coefficients) : </p>\n\n<pre><code>1 + 2x^2 - 7x^5 &lt;=&gt; (1, 0, 2, 0, 0, -7)\n</code></pre>\n\n<p>I'd like this polynom to be represented by a compile time constant: </p>\n\n<pre><code>polynom&lt;1,0,2,0,0,-7&gt;\n</code></pre>\n\n<p>Let's first consider addition (in which we add elements one by one). </p>\n\n<p>Is it possible to have somehow an operator+ such that: </p>\n\n<pre><code>polynom&lt;1,0,1&gt; + polynom&lt;-1,2,1,3&gt; -&gt; polynom&lt;0, 2, 2, 3&gt;\n</code></pre>\n\n<p>?</p>\n\n<p>For multiplication it would be a similar (but more complex issue). </p>\n\n<p>Does someone here any experience about that?</p>\n"}, {"tags": ["c++", "qt", "makefile"], "answers": [{"tags": [], "owner": {"reputation": 288, "user_id": 5049560, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/34f3c5c41ef1afafe007a0781fe3de8a?s=128&d=identicon&r=PG&f=1", "display_name": "Doug Beney", "link": "https://stackoverflow.com/users/5049560/doug-beney"}, "is_accepted": false, "score": -1, "last_activity_date": 1501694920, "creation_date": 1501694920, "answer_id": 45467394, "question_id": 45467168, "link": "https://stackoverflow.com/questions/45467168/creating-a-qt-makefile-dyld-library-not-loaded-rpath-qtcore-framework-versi/45467394#45467394", "title": "Creating a QT Makefile: &quot;dyld: Library not loaded: @rpath/QtCore.framework/Versions/5/QtCore&quot;", "body": "<p>Figured it out!</p>\n\n<p>It was all in the LFLAGS.</p>\n\n<p>Here is how I changed my Makefile to work:</p>\n\n<pre><code>SOURCES = calculator.cpp\n\nINCPATH = -I. -I/usr/local/qt/5.9.1/clang_64/lib/QtWidgets.framework/Headers -I/usr/local/qt/5.9.1/clang_64/lib/QtGui.framework/Headers -I/usr/local/qt/5.9.1/clang_64/lib/QtCore.framework/Headers -I. -I/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/OpenGL.framework/Headers -I/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/AGL.framework/Headers -I/usr/local/qt/5.9.1/clang_64/mkspecs/macx-clang -F/usr/local/qt/5.9.1/clang_64/lib\n\nDEFINES = -DQT_NO_DEBUG -DQT_WIDGETS_LIB -DQT_GUI_LIB -DQT_CORE_LIB\n\nLFLAGS = -stdlib=libc++ -headerpad_max_install_names  -arch x86_64 -Wl,-syslibroot,/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk -mmacosx-version-min=10.10 -Wl,-rpath,@executable_path/Frameworks -Wl,-rpath,/usr/local/qt/5.9.1/clang_64/lib\n\nFRAMEWORK = -framework QtCore -framework QtGui -framework QtWidgets -framework OpenGL -framework DiskArbitration -framework IOKit -framework OpenGL -framework AGL\n\nall:\n    g++ -std=c++11 $(LFLAGS) $(SOURCES) $(INCPATH) $(FRAMEWORK)\n</code></pre>\n"}], "owner": {"reputation": 288, "user_id": 5049560, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/34f3c5c41ef1afafe007a0781fe3de8a?s=128&d=identicon&r=PG&f=1", "display_name": "Doug Beney", "link": "https://stackoverflow.com/users/5049560/doug-beney"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 714, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1501694920, "creation_date": 1501694179, "question_id": 45467168, "link": "https://stackoverflow.com/questions/45467168/creating-a-qt-makefile-dyld-library-not-loaded-rpath-qtcore-framework-versi", "title": "Creating a QT Makefile: &quot;dyld: Library not loaded: @rpath/QtCore.framework/Versions/5/QtCore&quot;", "body": "<p>For educational purposes, I'm learning to create a QT makefile from scratch - without qmake. </p>\n\n<p>Here is my Makefile:</p>\n\n<pre><code>SOURCES = calculator.cpp\n\nINCPATH = -I. -I/usr/local/qt/5.9.1/clang_64/lib/QtWidgets.framework/Headers -I/usr/local/qt/5.9.1/clang_64/lib/QtGui.framework/Headers -I/usr/local/qt/5.9.1/clang_64/lib/QtCore.framework/Headers -I. -I/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/OpenGL.framework/Headers -I/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/AGL.framework/Headers -I/usr/local/qt/5.9.1/clang_64/mkspecs/macx-clang -F/usr/local/qt/5.9.1/clang_64/lib\n\nDEFINES = -DQT_NO_DEBUG -DQT_WIDGETS_LIB -DQT_GUI_LIB -DQT_CORE_LIB\n\nFRAMEWORK = -framework QtCore -framework QtGui -framework QtWidgets -framework OpenGL -framework DiskArbitration -framework IOKit -framework OpenGL -framework AGL\n\nall:\n    g++ -std=c++11 $(SOURCES) $(INCPATH) $(FRAMEWORK)\n</code></pre>\n\n<p>When I run <code>make</code>, there are no errors and an a.out file is generated successfully. </p>\n\n<p>When I try to run that a.out file by typing <code>./a.out</code>, I get this error:</p>\n\n<pre><code>dyld: Library not loaded: @rpath/QtCore.framework/Versions/5/QtCore\n  Referenced from: /Users/dougbeney/Desktop/Coding/Projects/cpp/Test/./a.out\n  Reason: image not found\nAbort trap: 6\n</code></pre>\n\n<p>Any idea of what I'm missing? I tried checking out the generated qmake Makefile as a reference, but couldn't pinpoint what I needed. </p>\n"}, {"tags": ["c++", "geometry", "computational-geometry", "cgal"], "answers": [{"comments": [{"owner": {"reputation": 401, "user_id": 6558299, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/e65e1d1e173c7dff74930ea70e3ce1a6?s=128&d=identicon&r=PG&f=1", "display_name": "Aedoro", "link": "https://stackoverflow.com/users/6558299/aedoro"}, "edited": false, "score": 0, "creation_date": 1501863978, "post_id": 45468713, "comment_id": 77984111, "body": "Thank you for your answer. The surface mesh is indeed nicer for my usage awell."}, {"owner": {"reputation": 401, "user_id": 6558299, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/e65e1d1e173c7dff74930ea70e3ce1a6?s=128&d=identicon&r=PG&f=1", "display_name": "Aedoro", "link": "https://stackoverflow.com/users/6558299/aedoro"}, "edited": false, "score": 0, "creation_date": 1501878591, "post_id": 45468713, "comment_id": 77991360, "body": "I was however unable to clip to the correct side of the obstacle clipped. I&#39;ve edited my question, is there an obvious mistake you can see?"}, {"owner": {"reputation": 5172, "user_id": 863521, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gGh24.jpg?s=128&g=1", "display_name": "sloriot", "link": "https://stackoverflow.com/users/863521/sloriot"}, "reply_to_user": {"reputation": 401, "user_id": 6558299, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/e65e1d1e173c7dff74930ea70e3ce1a6?s=128&d=identicon&r=PG&f=1", "display_name": "Aedoro", "link": "https://stackoverflow.com/users/6558299/aedoro"}, "edited": false, "score": 0, "creation_date": 1502089030, "post_id": 45468713, "comment_id": 78041737, "body": "Remove everything about normal computation and call the function <a href=\"http://doc.cgal.org/latest/Polygon_mesh_processing/group__PMP__orientation__grp.html#gad8a3439883e3e76651f96d15ba58b2bc\" rel=\"nofollow noreferrer\"><code>reverse_face_orientations()</code></a> on the clipping mesh."}], "tags": [], "owner": {"reputation": 5172, "user_id": 863521, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gGh24.jpg?s=128&g=1", "display_name": "sloriot", "link": "https://stackoverflow.com/users/863521/sloriot"}, "is_accepted": true, "score": 3, "last_activity_date": 1548258964, "last_edit_date": 1548258964, "creation_date": 1501699537, "answer_id": 45468713, "question_id": 45467149, "link": "https://stackoverflow.com/questions/45467149/substract-closed-mesh-from-surface-cgal/45468713#45468713", "title": "Substract closed mesh from surface (CGAL?)", "body": "<p>There is an undocumented function starting from CGAL 4.10 in <code>Polygon_mesh_processing/include/CGAL/Polygon_mesh_processing/internal/clip.h</code>. The function signature is :</p>\n\n<pre><code>/// requires face_index_map, vertex_index_map for np_tm\n/// requires face_index_map for np_c\n/// if edge_is_constrained_map is not provided in np_tm a default one is\n/// provided using boost::unordered_set&lt;edge_descriptor&gt;\ntemplate &lt;class TriangleMesh,\n          class NamedParameters1,\n          class NamedParameters2&gt;\nbool\nclip(      TriangleMesh&amp; tm,\n /*const*/ TriangleMesh&amp; clipper,\n           bool close,\n     const NamedParameters1&amp; np_tm,\n     const NamedParameters2&amp; np_c)\n</code></pre>\n\n<p>The second parameter would be your sphere and the first your surface. The third indicates if you want the output surface to be closed (so false in your case). Note that the function is clipping so if you want the outside part of the sphere you need to reverse the orientation of your sphere (inward normals).</p>\n\n<p>There is a usage example <a href=\"https://github.com/CGAL/cgal/blob/master/Polygon_mesh_processing/test/Polygon_mesh_processing/test_pmp_clip.cpp\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<p>I recommend using <code>Surface_mesh</code> rather than <code>Polyhedron_3</code>.</p>\n\n<p>Note that the function is not documented and the header might disappear in an upcoming release (if it does it means that it got officially documented).</p>\n\n<p><strong>EDIT</strong>: The officially documented function since CGAL 4.13 is <a href=\"https://doc.cgal.org/latest/Polygon_mesh_processing/group__PMP__corefinement__grp.html#ga30082762ba2d947cba304e2884d96a99\" rel=\"nofollow noreferrer\">here</a>.</p>\n"}], "owner": {"reputation": 401, "user_id": 6558299, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/e65e1d1e173c7dff74930ea70e3ce1a6?s=128&d=identicon&r=PG&f=1", "display_name": "Aedoro", "link": "https://stackoverflow.com/users/6558299/aedoro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 410, "favorite_count": 0, "accepted_answer_id": 45468713, "answer_count": 1, "score": 0, "last_activity_date": 1548258964, "creation_date": 1501694121, "last_edit_date": 1501885234, "question_id": 45467149, "link": "https://stackoverflow.com/questions/45467149/substract-closed-mesh-from-surface-cgal", "title": "Substract closed mesh from surface (CGAL?)", "body": "<p>I have the following problem, best described with the picture below.</p>\n\n<p>I have a surface in 3D, so it can have vertical overlap and is a non-closed mesh. And I have an object which I want to subtract from it. The green+yellow area is the original surface, the red lines outline a sphere (as triangulated mesh, not a primitive). The yellow area is the part of the surface intersecting the sphere that needs to be removed from the original surface. The green area is the result of the subtraction: the surface that is needed.</p>\n\n<p>I am already using the CGAL library, but still new to it, so a solution using CGAL would be the most preferred. However if somebody has a solution without CGAL that would be welcome as well.</p>\n\n<p>The best way I can see would be to give the surface a slight thickness (keeping the current surface as the bottom). And then use Nef_polyhedron_3 to substract the other object, then convert to Polyhedron_3 and only keep the bottom faces. But this seems like a bit of a hack.</p>\n\n<p><a href=\"https://i.stack.imgur.com/k3ae2.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/k3ae2.png\" alt=\"Intersection\"></a></p>\n\n<hr>\n\n<p>EDIT:\nUsing the proposed solution I get very close, but I am unable to clip to the correct side using the reversed normals as proposed, using the following code.\nI also tried to see if face vertex ordering (clockwise / counter clockwise) has any effect, but it seems not to have any.</p>\n\n<pre><code>typedef CGAL::Simple_cartesian&lt;double&gt;                  SC;\ntypedef CGAL::Surface_mesh&lt;SC::Point_3&gt;                 SurfaceMesh;\ntypedef SurfaceMesh::Property_map&lt;SM_fid, SC::Vector_3&gt; SM_fnormals;\ntypedef SurfaceMesh::Vertex_index                       SM_vid;\ntypedef SurfaceMesh::Face_index                         SM_fid;\n\nnamespace PMP = CGAL::Polygon_mesh_processing;\nnamespace params = PMP::parameters;\n\nvoid clip(SurfaceMesh P&amp;, SurfaceMesh&amp; Q) {        \n    SM_fnormals fnormals = CGALobstacle-&gt;add_property_map&lt;SM_fid, SC::Vector_3&gt;\n        (\"f:normals\", CGAL::NULL_VECTOR).first;\n\n    PMP::compute_face_normals(Q, fnormals);\n\n    PMP::clip(P, Q, false, params::all_default(), params::face_normal_map(fnormals));\n}\n</code></pre>\n"}, {"tags": ["c++", "c++11", "vector", "stdvector"], "comments": [{"owner": {"reputation": 3213, "user_id": 6084430, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/B0TaE.jpg?s=128&g=1", "display_name": "DimChtz", "link": "https://stackoverflow.com/users/6084430/dimchtz"}, "edited": false, "score": 3, "creation_date": 1501693993, "post_id": 45467076, "comment_id": 77895005, "body": "A simple <code>while</code> loop would do the trick. Don&#39;t overthink it, just wrap your current <code>for</code> loop into a <code>while</code> loop which will check the <code>std::atomic&lt;bool&gt;</code>. However it could be done using only the <code>for</code> loop you already have, you just need to change two things: 1) Reset the iterator at the end, 2) check the <code>std::atomic&lt;bool&gt;</code> you mentioned in order to know when to stop."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1501694522, "post_id": 45467076, "comment_id": 77895307, "body": "Do you want <code>current_it_index</code> to reset back to <code>0</code> after it starts to go through the vector again or should it keep increasing?  Also this kind of sounds like an XY problem.  If you tell us why you&#39;re doing this we might be able to point you to something different."}, {"owner": {"reputation": 4578, "user_id": 6626554, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/Cn7Ya.png?s=128&g=1", "display_name": "TheWaterProgrammer", "link": "https://stackoverflow.com/users/6626554/thewaterprogrammer"}, "edited": false, "score": 0, "creation_date": 1501694568, "post_id": 45467076, "comment_id": 77895333, "body": "Got it. <code>for (auto it = some_vector.begin() ; ; ++it) {   int current_it_index = std::distance(some_vector.begin(), it); if (it == some_vector.end() -1) it = some_vector.begin(); }</code>"}, {"owner": {"reputation": 4578, "user_id": 6626554, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/Cn7Ya.png?s=128&g=1", "display_name": "TheWaterProgrammer", "link": "https://stackoverflow.com/users/6626554/thewaterprogrammer"}, "edited": false, "score": 0, "creation_date": 1501694687, "post_id": 45467076, "comment_id": 77895395, "body": "thanks guys. got it. was too simple. yes, I overthought it"}, {"owner": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 1, "creation_date": 1501694769, "post_id": 45467076, "comment_id": 77895441, "body": "The answer you put in your comment has an off-by-one error."}, {"owner": {"reputation": 4578, "user_id": 6626554, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/Cn7Ya.png?s=128&g=1", "display_name": "TheWaterProgrammer", "link": "https://stackoverflow.com/users/6626554/thewaterprogrammer"}, "reply_to_user": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1501695081, "post_id": 45467076, "comment_id": 77895593, "body": "@MarkRansom yes. it should be <code>it++</code> instead of <code>++it</code>. I think thats the error you pointing at?"}, {"owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "edited": false, "score": 1, "creation_date": 1501695146, "post_id": 45467076, "comment_id": 77895621, "body": "No, your solution would skip over <code>begin()</code> after the first cycle."}, {"owner": {"reputation": 4578, "user_id": 6626554, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/Cn7Ya.png?s=128&g=1", "display_name": "TheWaterProgrammer", "link": "https://stackoverflow.com/users/6626554/thewaterprogrammer"}, "edited": false, "score": 0, "creation_date": 1501695289, "post_id": 45467076, "comment_id": 77895698, "body": "aahh yessss ! I will fix that. superb :)"}], "answers": [{"comments": [{"owner": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "edited": false, "score": 0, "creation_date": 1501694971, "post_id": 45467326, "comment_id": 77895540, "body": "This gets an index instead of an iterator, which might work for <code>vector</code> but doesn\u2019t work for <code>list</code> or any other non-contiguous data structure."}, {"owner": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "edited": false, "score": 0, "creation_date": 1501695152, "post_id": 45467326, "comment_id": 77895626, "body": "Fair enough; my comment was imprecise. It was not in essence incorrect; this doesn\u2019t work without an <code>operator[]</code>, <code>at()</code>, or other method of turning a <code>size_t</code> into an element."}], "tags": [], "owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "is_accepted": false, "score": 1, "last_activity_date": 1501696270, "last_edit_date": 1501696270, "creation_date": 1501694642, "answer_id": 45467326, "question_id": 45467076, "link": "https://stackoverflow.com/questions/45467076/how-to-loop-through-an-stdvector-in-repeating-cycles/45467326#45467326", "title": "How to loop through an std::vector in repeating cycles", "body": "<p>A common trick to iterating through an array that has a power of 2 number of elements is to simply iterate a counter and use a mask operation.</p>\n\n<pre><code>size_t counter = 0;\nconst size_t mask = some_vector.size() - 1U;\n\nwhile (!quit) {\n    size_t i = counter++ &amp; mask;\n    do_something(some_vector[i]);\n}\n</code></pre>\n\n<p>If the array is not a power of two, you could perform modulo arithmetic instead of masking a free running counter.</p>\n\n<pre><code>size_t i = 0;\nconst size_t n = some_vector.size();\n\nwhile (!quit) {\n    do_something(some_vector[i++]);\n    i %= n;\n}\n</code></pre>\n\n<p>If you are using a non-random access container, and need iterators and indexes, then you could implement two loops. This would avoid the expense of computing <code>distance</code> on a non-random access iterator.</p>\n\n<pre><code>for (;;) {\n    size_t idx = 0;\n    for (auto it = some_container.begin();\n         it != some_container.end();\n         ++it) {\n        do_something(it, idx++);\n     }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3923, "user_id": 8309701, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/S44bo.png?s=128&g=1", "display_name": "Chris Uzdavinis", "link": "https://stackoverflow.com/users/8309701/chris-uzdavinis"}, "edited": false, "score": 0, "creation_date": 1501696808, "post_id": 45467738, "comment_id": 77896632, "body": "In general this code has a dangerous reliance that do_something() doesn&#39;t invalidate iterators (or modify the container.)"}], "tags": [], "owner": {"reputation": 15006, "user_id": 2797826, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/3bab2302a0d633206bdcfca569f666c8?s=128&d=identicon&r=PG&f=1", "display_name": "Tristan Brindle", "link": "https://stackoverflow.com/users/2797826/tristan-brindle"}, "is_accepted": false, "score": 1, "last_activity_date": 1501696080, "creation_date": 1501696080, "answer_id": 45467738, "question_id": 45467076, "link": "https://stackoverflow.com/questions/45467076/how-to-loop-through-an-stdvector-in-repeating-cycles/45467738#45467738", "title": "How to loop through an std::vector in repeating cycles", "body": "<p>If I understand correctly, what you want is that when you get to the last element of your container, you simply jump to the beginning of the container again. We can code that easily enough:</p>\n\n<pre><code>auto first = std::begin(c);\nconst auto last = std::end(c);\nstd::size_t idx = 0;\n\nwhile (!should_exit()) {\n    do_something(idx);\n\n    ++idx;\n    if (++first == last) { // reset\n        idx = 0;\n        first = std::begin(c);\n    }\n}\n</code></pre>\n\n<p>This should work for any STL-style container. Having both the iterator and the index is perhaps unnecessary, but this is a KISS solution that will work for non-random-access containers like <code>std::list</code> as well as vector/array.</p>\n"}, {"tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": true, "score": 3, "last_activity_date": 1501697986, "creation_date": 1501697986, "answer_id": 45468274, "question_id": 45467076, "link": "https://stackoverflow.com/questions/45467076/how-to-loop-through-an-stdvector-in-repeating-cycles/45468274#45468274", "title": "How to loop through an std::vector in repeating cycles", "body": "<pre><code>std::vector&lt;some_object&gt; some_vector;\nsome_vector.resize(10);\nbool quit = false;\nwhile (!quit) {\n  for (auto&amp; e:some_vector) {\n    if (quit) break;\n    std::size_t i = std::addressof(e)-some_vector.data();\n    // ...\n  }\n}\n</code></pre>\n"}], "owner": {"reputation": 4578, "user_id": 6626554, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/Cn7Ya.png?s=128&g=1", "display_name": "TheWaterProgrammer", "link": "https://stackoverflow.com/users/6626554/thewaterprogrammer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 349, "favorite_count": 0, "accepted_answer_id": 45468274, "answer_count": 3, "score": 0, "last_activity_date": 1501697986, "creation_date": 1501693878, "last_edit_date": 1501694230, "question_id": 45467076, "link": "https://stackoverflow.com/questions/45467076/how-to-loop-through-an-stdvector-in-repeating-cycles", "title": "How to loop through an std::vector in repeating cycles", "body": "<p>I am using an <code>std::vector</code> with <code>C++</code> to store some items &amp; retrieve them later. Following is how I am iterating through my vector.</p>\n\n<pre><code>std::vector&lt;some_object&gt; some_vector;\nsome_vector.resize(10);\n\nfor (auto it = some_vector.begin(); it != some_vector.end(); ++it) {\n  int current_it_index = std::distance(some_vector.begin(), it);\n}\n</code></pre>\n\n<p>I need the index per iteration. So, fetching it per iteration as demonstrated above.</p>\n\n<p>Above loop <em>works well</em> but I <strong>want to loop through the vector in infinite cycles</strong>. How can I do that?</p>\n\n<p>Now, I understand that the question comes, How do you stop the running loop if you let it run in repeating cycles. I am thinking to use an <code>std::atomic&lt;bool&gt;</code> as a variable to signal &amp; break out of the loop which should work pretty well?</p>\n\n<p><strong>PS:</strong> Do note that I have taken <code>std::vector</code> as an example container to explain the question. It would be great if the suggested solution could work on <code>std::array</code> or other containers as well.</p>\n"}, {"tags": ["c++", "iterator", "set"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1501694874, "post_id": 45467141, "comment_id": 77895500, "body": "Might be worth adding that <code>operator&lt;</code> must implement a <a href=\"https://www.sgi.com/tech/stl/StrictWeakOrdering.html\" rel=\"nofollow noreferrer\">strict weak ordering</a> - that&#39;s something beginners often get wrong."}, {"owner": {"reputation": 40893, "user_id": 1386054, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/424ZW.jpg?s=128&g=1", "display_name": "Adrian McCarthy", "link": "https://stackoverflow.com/users/1386054/adrian-mccarthy"}, "edited": false, "score": 0, "creation_date": 1501708148, "post_id": 45467141, "comment_id": 77903091, "body": "This answer is all true, but it doesn&#39;t actually solve the problem.  Changing the comparator doesn&#39;t help find items that are a partial match."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 40893, "user_id": 1386054, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/424ZW.jpg?s=128&g=1", "display_name": "Adrian McCarthy", "link": "https://stackoverflow.com/users/1386054/adrian-mccarthy"}, "edited": false, "score": 0, "creation_date": 1501766388, "post_id": 45467141, "comment_id": 77931401, "body": "@AdrianMcCarthy if you use comparator that igniores name and only compares phones for this <code>std::set</code> it will solve the problem."}, {"owner": {"reputation": 40893, "user_id": 1386054, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/424ZW.jpg?s=128&g=1", "display_name": "Adrian McCarthy", "link": "https://stackoverflow.com/users/1386054/adrian-mccarthy"}, "edited": false, "score": 0, "creation_date": 1501780793, "post_id": 45467141, "comment_id": 77942801, "body": "@Slava, but it also fundamentally changes what the set contains.  With the OP&#39;s original code (which checks only the name), we&#39;re ensured that each name appears exactly once in the set, and iterating the set gives you the items in lexicographic order by name.  If you change the comparator to phone number, then each number can appear in the set only once, and iterating the set gives the contacts ordered lexicographically by the phone number string."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 40893, "user_id": 1386054, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/424ZW.jpg?s=128&g=1", "display_name": "Adrian McCarthy", "link": "https://stackoverflow.com/users/1386054/adrian-mccarthy"}, "edited": false, "score": 0, "creation_date": 1501782560, "post_id": 45467141, "comment_id": 77943929, "body": "@AdrianMcCarthy according to logic this particular set exists to do lookup by phone number so I explain how to fix broken logic in this particular program. I cannot read mind and if OP would need to change field to lookup my answer would be different, but OP has to specify that."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1501782704, "post_id": 45467141, "comment_id": 77944023, "body": "@JesperJuhl thanks, I think your comment is a good reminder as itself"}, {"owner": {"reputation": 40893, "user_id": 1386054, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/424ZW.jpg?s=128&g=1", "display_name": "Adrian McCarthy", "link": "https://stackoverflow.com/users/1386054/adrian-mccarthy"}, "edited": false, "score": 0, "creation_date": 1501783135, "post_id": 45467141, "comment_id": 77944297, "body": "The <code>find</code> member of <code>std::set</code> (and most of the standard containers) is for finding an exact match.  This is not the right tool for finding a partial match.  For that, there&#39;s <code>std::find_if</code>."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 40893, "user_id": 1386054, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/424ZW.jpg?s=128&g=1", "display_name": "Adrian McCarthy", "link": "https://stackoverflow.com/users/1386054/adrian-mccarthy"}, "edited": false, "score": 0, "creation_date": 1501783408, "post_id": 45467141, "comment_id": 77944434, "body": "@AdrianMcCarthy OP does not say he needs partical match. He needs to find <code>Contact</code> by phone number."}, {"owner": {"reputation": 40893, "user_id": 1386054, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/424ZW.jpg?s=128&g=1", "display_name": "Adrian McCarthy", "link": "https://stackoverflow.com/users/1386054/adrian-mccarthy"}, "edited": false, "score": 0, "creation_date": 1501792958, "post_id": 45467141, "comment_id": 77949966, "body": "@Slava:  The phone number is only part of the ContactItem, so, yes, this is looking for a partial match."}], "tags": [], "owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "is_accepted": false, "score": 0, "last_activity_date": 1501694104, "creation_date": 1501694104, "answer_id": 45467141, "question_id": 45467043, "link": "https://stackoverflow.com/questions/45467043/iterator-through-stdset-using-find-wont-work-whats-going-wrong/45467141#45467141", "title": "Iterator through std::set using find() won&#39;t work. What&#39;s going wrong?", "body": "<p>As stated in <code>std::set</code> <a href=\"http://en.cppreference.com/w/cpp/container/set\" rel=\"nofollow noreferrer\">documentation</a> by default it uses <code>std::less</code> which in this case uses <code>ContactItem::operator&lt;</code> you povided. As you compare structs by <code>name</code> field - this field is used in comparing elements, so basically you are trying to find contact with empty name. You either need to specify different comparator for this <code>std::set</code> or change <code>ContactItem::operator &lt;</code> accordingly.</p>\n\n<p>Note: unlike <code>std::unordered_set</code> <code>std::set</code> does not use <code>operator==</code> in any form, as you can also see in documentatioon:</p>\n\n<blockquote>\n  <p>std::set is an associative container that contains a sorted set of\n  unique objects of type Key. Sorting is done using the key comparison\n  function Compare.</p>\n</blockquote>\n\n<p>and <code>std::less</code> <a href=\"http://en.cppreference.com/w/cpp/utility/functional/less\" rel=\"nofollow noreferrer\">documentation</a> says:</p>\n\n<blockquote>\n  <p>Function object for performing comparisons. Unless specialized,\n  invokes operator&lt; on type T.</p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 40893, "user_id": 1386054, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/424ZW.jpg?s=128&g=1", "display_name": "Adrian McCarthy", "link": "https://stackoverflow.com/users/1386054/adrian-mccarthy"}, "edited": false, "score": 0, "creation_date": 1501708303, "post_id": 45467161, "comment_id": 77903163, "body": "A multi-index container would be a solution, but simply changing the comparator has other, probably undesirable ramifications (for example, two contacts wouldn&#39;t be able to share a phone number)."}], "tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": false, "score": 0, "last_activity_date": 1501694164, "creation_date": 1501694164, "answer_id": 45467161, "question_id": 45467043, "link": "https://stackoverflow.com/questions/45467043/iterator-through-stdset-using-find-wont-work-whats-going-wrong/45467161#45467161", "title": "Iterator through std::set using find() won&#39;t work. What&#39;s going wrong?", "body": "<p>The issue here is that <code>std::set</code> does not use your <code>operator ==</code> to find the element.  Instead it uses the same thing it uses to compare objects which is the <code>operator &lt;</code>.  You're either going to have to change your <code>operator &lt;</code> to compare by <code>phoneNumber</code> or provide a named contact.</p>\n\n<p>You could also consider a boost <a href=\"http://www.boost.org/doc/libs/1_62_0/libs/multi_index/doc/index.html\" rel=\"nofollow noreferrer\">multi-index container</a> that would allow you to index my name and number.</p>\n"}, {"tags": [], "owner": {"reputation": 40893, "user_id": 1386054, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/424ZW.jpg?s=128&g=1", "display_name": "Adrian McCarthy", "link": "https://stackoverflow.com/users/1386054/adrian-mccarthy"}, "is_accepted": true, "score": 2, "last_activity_date": 1501708004, "creation_date": 1501708004, "answer_id": 45471002, "question_id": 45467043, "link": "https://stackoverflow.com/questions/45467043/iterator-through-stdset-using-find-wont-work-whats-going-wrong/45471002#45471002", "title": "Iterator through std::set using find() won&#39;t work. What&#39;s going wrong?", "body": "<p>You don't want to use <code>std::set::find</code> to do this.  <code>std::set::find</code> is to find an exact match, but you're looking for a partial match.  <code>std::set::find</code> is going to look at only a subset of the contacts because it knows they are sorted.  But you need to check all of the contacts, because any one of them could match the phone number.</p>\n\n<p>What you need is <code>std::find_if</code> from <code>&lt;algorithm&gt;</code>.  <code>std::find_if</code> takes a predicate, which is a function or function-like object that can tell if you if this is the right one.</p>\n\n<p>First, include <code>&lt;algorithm&gt;</code></p>\n\n<pre><code>#include &lt;algorithm&gt;\n</code></pre>\n\n<p>We can use a lambda for the predicate:</p>\n\n<pre><code>auto findNumber =\n  std::find_if(contactBook.begin(), contactBook.end(),\n               [&amp;userNumber](const ContactItem &amp;contact) {\n                 return contact.phoneNumber == userNumber;\n               });\n</code></pre>\n\n<p>If you haven't worked with lambdas before, this can look pretty weird.  A lambda is like a nameless function with state.</p>\n\n<p>The square brackets <code>[]</code> tell the compiler that this is a lambda.  The <code>&amp;userNumber</code> says that, in the body of the lambda, we're going to need a reference to the <code>userNumber</code> variable that's in the current scope.  (This is called \"capture by reference.\")</p>\n\n<p>The parentheses enclose a function-like parameter list.  <code>std::find_if</code> is going to invoke this lambda on each contact, as though it were a regular function, by passing in a reference to the contact.</p>\n\n<p>The body of the lambda (in braces <code>{}</code>) is a function body that returns a <code>bool</code> to tell use whether the contact passed in meets our criteria for a match.  The body can reference the arguments passed in as well as anything \"captured\" from the defining scope.  In this case, we just care whether the contact's phone number matches the desired phone number.</p>\n"}], "owner": {"reputation": 41, "user_id": 8218422, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/588e8b72cc04e4d92ce3b71f909d3e87?s=128&d=identicon&r=PG&f=1", "display_name": "Hayden", "link": "https://stackoverflow.com/users/8218422/hayden"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 566, "favorite_count": 1, "accepted_answer_id": 45471002, "answer_count": 3, "score": 1, "last_activity_date": 1501708004, "creation_date": 1501693741, "last_edit_date": 1501694117, "question_id": 45467043, "link": "https://stackoverflow.com/questions/45467043/iterator-through-stdset-using-find-wont-work-whats-going-wrong", "title": "Iterator through std::set using find() won&#39;t work. What&#39;s going wrong?", "body": "<p>I am trying to create a program that has a list of contacts where the user can search for a contact's name based on a phone number.  Sorry for including so much code but it is necessary for understanding my problem:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;set&gt;\nusing namespace std;\n\nstruct ContactItem\n{\n    string name;\n    string phoneNumber;\n    string displayAs;\n\n    ContactItem(const string inName, const string inNumber) : name(inName), phoneNumber(inNumber)\n    {\n        displayAs = name + \": \" + phoneNumber;\n    }\n\n    bool operator== (const ContactItem&amp; searchParameter) const\n    {\n        return (this-&gt;phoneNumber == searchParameter.phoneNumber);\n    }\n\n    bool operator&lt; (const ContactItem&amp; compareResult) const\n    {\n        return (this-&gt;name &lt; compareResult.name);\n    }\n\n    operator const char*() const\n    {\n        return displayAs.c_str();\n    }\n};\n\nint main()\n{\n    //Initialize a set and populate it with contacts of type ContactItem\n    set&lt;ContactItem&gt; contactBook;\n    contactBook.insert(ContactItem(\"Sally\", \"123654864\"));\n    contactBook.insert(ContactItem(\"Joe\", \"8435102654\"));\n    contactBook.insert(ContactItem(\"Steve\", \"8135691234\"));\n    contactBook.insert(ContactItem(\"Alice\", \"8432489425\"));\n\n    //Search for a contact's name by only being given their number\n    cout &lt;&lt; \"Please give the number of one contact whose name you would like to know: \" &lt;&lt; endl;\n    string userNumber;\n    getline(cin, userNumber);\n\n    auto findNumber = contactBook.find(ContactItem(\"\", userNumber));\n\n    if (findNumber != contactBook.end())\n        cout &lt;&lt; \"The name of the contact whose number matches the phone number given is: \" &lt;&lt; (*findNumber).name &lt;&lt; endl;\n    else\n        cout &lt;&lt; \"Contact not found\" &lt;&lt; endl;\n\n    return 0;\n}\n</code></pre>\n\n<p>My problem always seems to be with the line <code>auto findNumber = contactBook.find(userNumber);</code>.  Every single time I run this code, the message \"Contact not found\" is displayed.  I can't figure out what I'm doing wrong.  Is it my redefinition of <code>operator==</code>?</p>\n\n<p>The above code was inspired by Rao, Siddhartha. <em>Sams Teach Yourself C++ in One Hour a Day</em>. 8th ed., Indianapolis, IN, Sams, 2017.</p>\n"}, {"tags": ["c++", "point-cloud-library", "ransac"], "answers": [{"tags": [], "owner": {"reputation": 196, "user_id": 7821523, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d702cac1a93a60ce091d6985ce40025?s=128&d=identicon&r=PG&f=1", "display_name": "Rooscannon", "link": "https://stackoverflow.com/users/7821523/rooscannon"}, "is_accepted": false, "score": 0, "last_activity_date": 1508494268, "creation_date": 1508494268, "answer_id": 46846897, "question_id": 45466976, "link": "https://stackoverflow.com/questions/45466976/sacsegmentation-linux-and-windows-different-results/46846897#46846897", "title": "SACSegmentation Linux and Windows Different Results", "body": "<p>It's about the random engine. If you only run a few iterations (in relation to your cloud size) it might give unreliable results. You could try to add more plane candidates to your RANSAC engine by the .setMaxIterations( ) method to see if the results get closer to each other. </p>\n"}], "owner": {"reputation": 745, "user_id": 6674213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7826731c884808f91e604aae162c2813?s=128&d=identicon&r=PG&f=1", "display_name": "brad", "link": "https://stackoverflow.com/users/6674213/brad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 53, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1508494268, "creation_date": 1501693548, "question_id": 45466976, "link": "https://stackoverflow.com/questions/45466976/sacsegmentation-linux-and-windows-different-results", "title": "SACSegmentation Linux and Windows Different Results", "body": "<p>Given identical inputs and identical code, a different plane model is found on Windows compared to Linux using SACSegmentation in PCL. For one example, the identified plane on Linux has a roll angle of ~7 degrees where the Windows plane is ~0 degrees. Consecutive Windows results are identical as well as consecutive Linux results. Could this be related to GCC and Visual Studio using different sizes for types? Or Windows using a better <code>default_random_engine</code>?</p>\n\n<p><a href=\"https://stackoverflow.com/questions/16744245/same-calculation-on-linux-and-windows-different-results\">Same calculation on Linux and Windows --&gt; different results</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/32730906/random-generates-same-number-in-linux-but-not-in-windows?rq=1\">&lt;random&gt; generates same number in Linux, but not in Windows</a></p>\n\n<p>I know the Windows plane is the better identified plane. How can I best remedy this difference so that the Linux version also finds this same plane? </p>\n"}, {"tags": ["c++", "boost"], "comments": [{"owner": {"reputation": 729, "user_id": 5942006, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1fe054f41dc543395631acc84ac04f60?s=128&d=identicon&r=PG&f=1", "display_name": "systemcpro", "link": "https://stackoverflow.com/users/5942006/systemcpro"}, "edited": false, "score": 0, "creation_date": 1501693818, "post_id": 45466939, "comment_id": 77894900, "body": "Either just change your main function to &quot;int main(int ac, char* av[])&quot; or find every occurrence of &quot;ac&quot; and change it to &quot;argc&quot; and likewise &quot;av&quot; to &quot;argv&quot; and you should be good to go"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1501694026, "post_id": 45466939, "comment_id": 77895025, "body": "As for the names of the arguments, they don&#39;t really matter. <code>argc</code> and <code>argv</code> are just two old common names, as are the abbreviations <code>ac</code> and <code>av</code>. You could name them <code>foo</code> and <code>bar</code> if you want to."}, {"owner": {"reputation": 729, "user_id": 5942006, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1fe054f41dc543395631acc84ac04f60?s=128&d=identicon&r=PG&f=1", "display_name": "systemcpro", "link": "https://stackoverflow.com/users/5942006/systemcpro"}, "edited": false, "score": 0, "creation_date": 1501694749, "post_id": 45466939, "comment_id": 77895430, "body": "True but he cut and pasted the code from the example which uses those specific arguments throughout the code."}], "answers": [{"tags": [], "owner": {"reputation": 729, "user_id": 5942006, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1fe054f41dc543395631acc84ac04f60?s=128&d=identicon&r=PG&f=1", "display_name": "systemcpro", "link": "https://stackoverflow.com/users/5942006/systemcpro"}, "is_accepted": true, "score": 7, "last_activity_date": 1501694841, "creation_date": 1501694841, "answer_id": 45467369, "question_id": 45466939, "link": "https://stackoverflow.com/questions/45466939/parsing-command-line-arguments-with-boost-program-options-c/45467369#45467369", "title": "parsing command-line arguments with boost.program_options - C++", "body": "<p>You also forgot to include exception - here is your code working..</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;iterator&gt;\n#include &lt;boost/program_options.hpp&gt;\n#include &lt;exception&gt;\n\nusing std::cerr;\nusing std::cout;\nusing std::endl;\nusing std::exception;\nnamespace po = boost::program_options;\n\nint main(int ac, char** av){\n\ntry {\n\n    po::options_description desc(\"Allowed options\");\n    desc.add_options()\n        (\"help\", \"produce help message\")\n        (\"compression\", po::value&lt;double&gt;(), \"set compression level\");\n\n    po::variables_map vm;\n    po::store(po::parse_command_line(ac, av, desc), vm);\n    po::notify(vm);\n\n    if (vm.count(\"help\")) {\n        cout &lt;&lt; desc &lt;&lt; \"\\n\";\n        return 0;\n      }\n\n    if (vm.count(\"compression\")) {\n        cout &lt;&lt; \"Compression level was set to \"\n             &lt;&lt; vm[\"compression\"].as&lt;double&gt;() &lt;&lt; \".\\n\";\n      } else {\n            cout &lt;&lt; \"Compression level was not set.\\n\";\n            }\n      }\n    catch(exception&amp; e) {\n        cerr &lt;&lt; \"error: \" &lt;&lt; e.what() &lt;&lt; \"\\n\";\n        return 1;\n    }\n    catch(...) {\n        cerr &lt;&lt; \"Exception of unknown type!\\n\";\n    return 1;\n    }\nreturn 0;\n}\n</code></pre>\n\n<p>Compile this with</p>\n\n<pre><code>g++ -std=c++11 cmd.cpp -l boost_program_options\n</code></pre>\n\n<p>And you should be fine</p>\n\n<p>Actually you can leave out \"std=c++11\" if you want to. I have tried it with both and its ok</p>\n"}], "owner": {"reputation": 41, "user_id": 8396376, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ad561aa127c45466272972b9e40cba0?s=128&d=identicon&r=PG&f=1", "display_name": "Luke Shirley", "link": "https://stackoverflow.com/users/8396376/luke-shirley"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7396, "favorite_count": 2, "accepted_answer_id": 45467369, "answer_count": 1, "score": 2, "last_activity_date": 1501745638, "creation_date": 1501693425, "last_edit_date": 1501745638, "question_id": 45466939, "link": "https://stackoverflow.com/questions/45466939/parsing-command-line-arguments-with-boost-program-options-c", "title": "parsing command-line arguments with boost.program_options - C++", "body": "<p>I'm trying to parse command line arguments with boost. Here's my code (I am only including the part I need help with):</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;iterator&gt;\n#include &lt;boost/program_options.hpp&gt;\n\nusing std::cerr;\nusing std::cout;\nusing std::endl;\nnamespace po = boost::program_options;\n\ntry {\n\n    po::options_description desc(\"Allowed options\");\n    desc.add_options()\n        (\"help\", \"produce help message\")\n        (\"compression\", po::value&lt;double&gt;(), \"set compression level\");\n\n    po::variables_map vm;\n    po::store(po::parse_command_line(ac, av, desc), vm);\n    po::notify(vm);\n\n    if (vm.count(\"help\")) {\n        cout &lt;&lt; desc &lt;&lt; \"\\n\";\n        return 0;\n      }\n\n    if (vm.count(\"compression\")) {\n        cout &lt;&lt; \"Compression level was set to \"\n             &lt;&lt; vm[\"compression\"].as&lt;double&gt;() &lt;&lt; \".\\n\";\n      } else {\n            cout &lt;&lt; \"Compression level was not set.\\n\";\n            }\n      }\n    catch(exception&amp; e) {\n        cerr &lt;&lt; \"error: \" &lt;&lt; e.what() &lt;&lt; \"\\n\";\n        return 1;\n    }\n    catch(...) {\n        cerr &lt;&lt; \"Exception of unknown type!\\n\";\n    }\n</code></pre>\n\n<p>I have my main function set to:</p>\n\n<pre><code>main(int argc, char const *argv[])\n</code></pre>\n\n<p>but, the code I was following <a href=\"https://github.com/boostorg/program_options/blob/develop/example/first.cpp\" rel=\"nofollow noreferrer\">https://github.com/boostorg/program_options/blob/develop/example/first.cpp</a> contained these parameters:</p>\n\n<pre><code>int main(int ac, char* av[])\n</code></pre>\n\n<p>When I comile it, it spits out this and I am completely lost: </p>\n\n<p><a href=\"https://i.stack.imgur.com/TWN7m.png\" rel=\"nofollow noreferrer\">Terminal return</a></p>\n"}, {"tags": ["c++", "c++11"], "comments": [{"owner": {"reputation": 10709, "user_id": 3212865, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/B6qLg.jpg?s=128&g=1", "display_name": "spectras", "link": "https://stackoverflow.com/users/3212865/spectras"}, "edited": false, "score": 1, "creation_date": 1501692786, "post_id": 45466711, "comment_id": 77894206, "body": "If you want python syntax, write python code."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 10, "creation_date": 1501692800, "post_id": 45466711, "comment_id": 77894216, "body": "Why not just use <code>for (auto i : range(4))</code>?"}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1501692810, "post_id": 45466711, "comment_id": 77894222, "body": "That special case is actually doable. (In the sense @NathanOliver mentioned.)"}, {"owner": {"user_type": "does_not_exist", "display_name": "user7507137"}, "edited": false, "score": 1, "creation_date": 1501692844, "post_id": 45466711, "comment_id": 77894243, "body": "Come on be a little curious."}, {"owner": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "edited": false, "score": 0, "creation_date": 1501692851, "post_id": 45466711, "comment_id": 77894246, "body": "You can have <code>for (auto &amp;i: range(4))</code>, though. You&#39;ll have to write <code>range</code> yourself."}, {"owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "reply_to_user": {"reputation": 10709, "user_id": 3212865, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/B6qLg.jpg?s=128&g=1", "display_name": "spectras", "link": "https://stackoverflow.com/users/3212865/spectras"}, "edited": false, "score": 0, "creation_date": 1501692861, "post_id": 45466711, "comment_id": 77894252, "body": "@spectras There are many other reasons for using C++ (have you ever heard about performance?)"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "reply_to_user": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 0, "creation_date": 1501692874, "post_id": 45466711, "comment_id": 77894264, "body": "@Baum But probably shouldn&#39;t be done."}, {"owner": {"reputation": 10709, "user_id": 3212865, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/B6qLg.jpg?s=128&g=1", "display_name": "spectras", "link": "https://stackoverflow.com/users/3212865/spectras"}, "reply_to_user": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "edited": false, "score": 1, "creation_date": 1501692917, "post_id": 45466711, "comment_id": 77894295, "body": "@DYZ&gt; if you want to write c++, use c++ syntax. The point works both ways."}, {"owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "reply_to_user": {"reputation": 10709, "user_id": 3212865, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/B6qLg.jpg?s=128&g=1", "display_name": "spectras", "link": "https://stackoverflow.com/users/3212865/spectras"}, "edited": false, "score": 0, "creation_date": 1501692984, "post_id": 45466711, "comment_id": 77894343, "body": "@spectras The OP may want the performance of C++ and the convenience of Python <code>for</code> loop. There is nothing wrong with this."}, {"owner": {"reputation": 314, "user_id": 5228740, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/nnUZy.png?s=128&g=1", "display_name": "Hannes Hauptmann", "link": "https://stackoverflow.com/users/5228740/hannes-hauptmann"}, "edited": false, "score": 2, "creation_date": 1501693155, "post_id": 45466711, "comment_id": 77894445, "body": "You can make a preprocessor define for that, but this makes no sense. You make the code unnecessary confusing."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 1, "creation_date": 1501693204, "post_id": 45466711, "comment_id": 77894481, "body": "You may be able produce new syntax-like constructs with clever class and template design, but you cannot define new syntax arbitrarily. For example <a href=\"http://en.cppreference.com/w/cpp/io/basic_iostream\" rel=\"nofollow noreferrer\"><code>std::basic_iostream</code></a> uses the bit shift operators and produces a new stream-like &quot;syntax&quot; by using the operator in unexpected ways. However, you are limited to the operators, syntax and keywords of the language."}, {"owner": {"reputation": 10709, "user_id": 3212865, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/B6qLg.jpg?s=128&g=1", "display_name": "spectras", "link": "https://stackoverflow.com/users/3212865/spectras"}, "reply_to_user": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "edited": false, "score": 1, "creation_date": 1501693247, "post_id": 45466711, "comment_id": 77894513, "body": "@DYZ&gt; C++ loops offer the same convenience. <code>for (auto item : container)</code> is the same convenience as <code>for item in container:</code>. What he&#39;s looking for is how to write one language using another language. It&#39;s pretty much the same as asking how to write English using French grammar and vocabulary. That&#39;s nonsense."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 3, "creation_date": 1501693277, "post_id": 45466711, "comment_id": 77894528, "body": "If you redefine the language (using the preprocessor or by making some other pre-compiler or even by modifying the actual compiler to make your own language) then remember that no one else can really use your code. It will be a nightmare for others to read, understand and maintain. And with &quot;others&quot; I include the <b><i>future you</i></b>. If you make such large changes in the basic syntax, then it&#39;s no longer C++. Actually, just straying even the slightest from the C++ standard specification (like introducing variable-length arrays) and you no longer have C++ but another new language."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "reply_to_user": {"reputation": 314, "user_id": 5228740, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/nnUZy.png?s=128&g=1", "display_name": "Hannes Hauptmann", "link": "https://stackoverflow.com/users/5228740/hannes-hauptmann"}, "edited": false, "score": 0, "creation_date": 1501693283, "post_id": 45466711, "comment_id": 77894534, "body": "@Hannes Hauptmann : note: such a <code>define</code> is a <code>macro</code> - terminology is important ;)"}, {"owner": {"reputation": 2663, "user_id": 6301420, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9f4693f2fcba86b5f59737b94120acc2?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Schepler", "link": "https://stackoverflow.com/users/6301420/daniel-schepler"}, "edited": false, "score": 0, "creation_date": 1501694173, "post_id": 45466711, "comment_id": 77895112, "body": "You wouldn&#39;t necessarily have to write <code>range</code> yourself - Boost for example already has it.  <code>for (auto i : boost::irange(0, 4)) { ... }</code>"}, {"owner": {"reputation": 7681, "user_id": 8242698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BjJXu.jpg?s=128&g=1", "display_name": "user0042", "link": "https://stackoverflow.com/users/8242698/user0042"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1501698273, "post_id": 45466711, "comment_id": 77897550, "body": "To extend on @Nathan &#39;s comment, I wrote a small function that comes very near for an implementation."}, {"owner": {"reputation": 15544, "user_id": 1908347, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e1305fee562b70958e65b557ce049e31?s=128&d=identicon&r=PG", "display_name": "Nir Friedman", "link": "https://stackoverflow.com/users/1908347/nir-friedman"}, "edited": false, "score": 0, "creation_date": 1501699430, "post_id": 45466711, "comment_id": 77898243, "body": "If you want to use a language where you can extend the language in arbitrary ways, you want lisp."}], "answers": [{"comments": [{"owner": {"reputation": 7681, "user_id": 8242698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BjJXu.jpg?s=128&g=1", "display_name": "user0042", "link": "https://stackoverflow.com/users/8242698/user0042"}, "edited": false, "score": 0, "creation_date": 1501699143, "post_id": 45467108, "comment_id": 77898099, "body": "<i>&quot;No, C++ is not extensible in the way you&#39;re describing.&quot;</i> Though one can come close to that syntax providing an appropriate <code>range()</code> function."}], "tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": true, "score": 2, "last_activity_date": 1501693998, "creation_date": 1501693998, "answer_id": 45467108, "question_id": 45466711, "link": "https://stackoverflow.com/questions/45466711/is-it-possible-to-add-a-new-piece-of-syntax-to-for-example-c-with-c-code-i/45467108#45467108", "title": "Is it possible to add a new piece of syntax to (for example) c++ with c++ code it self?", "body": "<p>No, C++ is not extensible in the way you're describing. You can use the crude macros provided by the preprocessor to do simple token replacement, and you can use operator overloading to give existing pieces of syntax new meaning, but there's no facility for defining your own custom syntax.</p>\n\n<p>If you want to do that, you can write your own preprocessor or write a compiler for your own language that produces C++ code (which is effectively the same thing).</p>\n"}, {"tags": [], "owner": {"reputation": 15544, "user_id": 1908347, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e1305fee562b70958e65b557ce049e31?s=128&d=identicon&r=PG", "display_name": "Nir Friedman", "link": "https://stackoverflow.com/users/1908347/nir-friedman"}, "is_accepted": false, "score": 1, "last_activity_date": 1501699911, "creation_date": 1501699911, "answer_id": 45468825, "question_id": 45466711, "link": "https://stackoverflow.com/questions/45466711/is-it-possible-to-add-a-new-piece-of-syntax-to-for-example-c-with-c-code-i/45468825#45468825", "title": "Is it possible to add a new piece of syntax to (for example) c++ with c++ code it self?", "body": "<p>The range example:</p>\n\n<pre><code>struct RangeStruct {\n    RangeStruct(int max) : m_max(max) {}\n    int m_max;\n    struct iterator {\n        iterator(int cur) : m_cur(cur) {}\n        iterator&amp; operator++() { ++m_cur; return *this; }\n        friend bool operator==(const iterator&amp; l, const iterator&amp; r) {\n            return l.m_cur == r.m_cur;\n        }\n        friend bool operator!=(const iterator&amp; l, const iterator&amp; r) {\n            return !(l == r);\n        }\n        int&amp; operator*() { return m_cur; }\n        int m_cur;\n    };\n\n    iterator begin() { return iterator(0); }\n    iterator end() { return iterator(m_max); }\n};\n\nRangeStruct range(int max) { return RangeStruct(max); }\n</code></pre>\n\n<p>Similar to python, you can write your own classes that \"hook in\" to the existing for loop syntax. Unfortunately it's rather verbose compared to python (there are libraries that help with that though). Live example: <a href=\"http://coliru.stacked-crooked.com/a/aef190fecd4decd1\" rel=\"nofollow noreferrer\">http://coliru.stacked-crooked.com/a/aef190fecd4decd1</a>.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user7507137"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 110, "favorite_count": 0, "accepted_answer_id": 45467108, "answer_count": 2, "score": -3, "last_activity_date": 1501699911, "creation_date": 1501692731, "last_edit_date": 1501693846, "question_id": 45466711, "link": "https://stackoverflow.com/questions/45466711/is-it-possible-to-add-a-new-piece-of-syntax-to-for-example-c-with-c-code-i", "title": "Is it possible to add a new piece of syntax to (for example) c++ with c++ code it self?", "body": "<p>Operator overloading made me think about this idea\n(I know range based loops are supported in C++11):\nI would like to make a range based loop like the one in python, in C++\n(only for the sake of experimenting):</p>\n\n<pre><code>for i in range(4):\n</code></pre>\n\n<p>Is it possible with C++ code itself? If not, what must one do to accomplish that?</p>\n\n<p>My goal is not performance or simplicity of the code, this is just for academic purposes.</p>\n"}, {"tags": ["c++", "ios", "qt"], "answers": [{"tags": [], "owner": {"reputation": 25, "user_id": 8289087, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/cea715243963332359827c6ea70684bf?s=128&d=identicon&r=PG&f=1", "display_name": "highvoltage379", "link": "https://stackoverflow.com/users/8289087/highvoltage379"}, "is_accepted": true, "score": 0, "last_activity_date": 1501758005, "creation_date": 1501758005, "answer_id": 45482297, "question_id": 45466689, "link": "https://stackoverflow.com/questions/45466689/ios-kit-not-detected-on-qt-macos/45482297#45482297", "title": "iOS kit not detected on Qt (macOS)", "body": "<p>Okay I managed to solve my problem by re installing Qt with version 5.8 (instead of 5.9.1).</p>\n\n<p>But I am not sure this is what was causing the issue though. In deed, I realized I installed Qt prior to configuring XCode the first time(with my Developer Account).</p>\n"}], "owner": {"reputation": 25, "user_id": 8289087, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/cea715243963332359827c6ea70684bf?s=128&d=identicon&r=PG&f=1", "display_name": "highvoltage379", "link": "https://stackoverflow.com/users/8289087/highvoltage379"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 685, "favorite_count": 0, "accepted_answer_id": 45482297, "answer_count": 1, "score": 0, "last_activity_date": 1501758005, "creation_date": 1501692639, "last_edit_date": 1501693945, "question_id": 45466689, "link": "https://stackoverflow.com/questions/45466689/ios-kit-not-detected-on-qt-macos", "title": "iOS kit not detected on Qt (macOS)", "body": "<p>I am currently trying to port an android application on iOS. The application was developped on Linux. But I can't manage to use Qt on macOs for iOS developpement.</p>\n\n<p>I followed those (rather unclear) instructions : <a href=\"http://doc.qt.io/qt-5/ios-support.html\" rel=\"nofollow noreferrer\">http://doc.qt.io/qt-5/ios-support.html</a> </p>\n\n<p>First, I installed successfully XCode and I managed to deploy a dummy app on my iPhone. Then, I installed Qt and opened the \".pro\" project file.\nBut the only kit I can use is \"Desktop Qt 5.4.1 clang 64 bit\". The kits for iOS don't seem to be detected.</p>\n\n<p>Did I do something wrong ? Am I missing something ?</p>\n\n<p>EDIT:</p>\n\n<p>When I launch the \".pro\", I got this error : </p>\n\n<pre><code>Project ERROR: Xcode not set up properly. You may need to confirm the license agreement by running /usr/bin/xcodebuild.\n</code></pre>\n\n<p>Unfortunately, it is NOT related to this well known issue (<a href=\"https://stackoverflow.com/questions/33728905/qt-creator-project-error-xcode-not-set-up-properly-you-may-need-to-confirm-t\">Qt Creator - Project ERROR: Xcode not set up properly. You may need to confirm the license agreement by running /usr/bin/xcodebuild</a>)</p>\n\n<p>When I run the command :</p>\n\n<pre><code>/usr/bin/xcodebuild\n</code></pre>\n\n<p>I get this error:</p>\n\n<pre><code>xcodebuild: error: The directory /Users/&lt;UserName&gt; does not contain an Xcode project\n</code></pre>\n"}, {"tags": ["c++", "linux", "opencv", "cross-compiling", "visualgdb"], "comments": [{"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1501704558, "post_id": 45466607, "comment_id": 77901179, "body": "Thanks to SO not letting me flag after retracting one that the OP made obsolete, I can&#39;t formally flag this, but: Possible duplicate of <a href=\"https://stackoverflow.com/questions/6578484/telling-gcc-directly-to-link-a-library-statically\">Telling gcc directly to link a library statically</a>"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 8406760, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b7904631391e9f1e16d49e8eeaf20c7?s=128&d=identicon&r=PG&f=1", "display_name": "wu_pa", "link": "https://stackoverflow.com/users/8406760/wu-pa"}, "edited": false, "score": 0, "creation_date": 1501703543, "post_id": 45469516, "comment_id": 77900589, "body": "I have tried this before - i linked everything like in the existing,running program. But the linker can&#39;t find that library file. I updated the screenshot and the output."}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "reply_to_user": {"reputation": 1, "user_id": 8406760, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b7904631391e9f1e16d49e8eeaf20c7?s=128&d=identicon&r=PG&f=1", "display_name": "wu_pa", "link": "https://stackoverflow.com/users/8406760/wu-pa"}, "edited": false, "score": 0, "creation_date": 1501703665, "post_id": 45469516, "comment_id": 77900676, "body": "Great, so now you&#39;ve changed the question from underneath me. /sigh"}, {"owner": {"reputation": 1, "user_id": 8406760, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b7904631391e9f1e16d49e8eeaf20c7?s=128&d=identicon&r=PG&f=1", "display_name": "wu_pa", "link": "https://stackoverflow.com/users/8406760/wu-pa"}, "edited": false, "score": 0, "creation_date": 1501706542, "post_id": 45469516, "comment_id": 77902279, "body": "I found this link: <a href=\"https://stackoverflow.com/questions/34867289/opencv-3-x-only-contains-one-lib-opencv-world-lib\" title=\"opencv 3 x only contains one lib opencv world lib\">stackoverflow.com/questions/34867289/&hellip;</a> Here it is mentioned that there should only that one library linked. i have put it now into &quot;Additional Linker&quot; : C:\\OpenCV-3.2.0\\opencv\\build\\x64\\vc14\\lib\\opencv_world320d.l&zwnj;&#8203;ib  But nevertheless i get a lot of &quot; undefined references&quot;."}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "reply_to_user": {"reputation": 1, "user_id": 8406760, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b7904631391e9f1e16d49e8eeaf20c7?s=128&d=identicon&r=PG&f=1", "display_name": "wu_pa", "link": "https://stackoverflow.com/users/8406760/wu-pa"}, "edited": false, "score": 0, "creation_date": 1501706717, "post_id": 45469516, "comment_id": 77902367, "body": "Please edit your question with any updates like this, rather than posting them in comments. Comments are to be considered ephemeral, prone to disappearing at any moment, and besides, it&#39;s not useful to leave up an outdated question and expect readers to pick through comments to get the latest state of things."}], "tags": [], "owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "is_accepted": false, "score": 0, "last_activity_date": 1501704451, "last_edit_date": 1501704451, "creation_date": 1501702460, "answer_id": 45469516, "question_id": 45466607, "link": "https://stackoverflow.com/questions/45466607/crosscompiling-visualgdb-c-cubietruck-linkererror/45469516#45469516", "title": "Crosscompiling VisualGDB/C++ Cubietruck =&gt; Linkererror", "body": "<p>You have only told the toolchain <em>where</em> to look when searching for libraries (\"Library directory\"). You have not told it <strong>which</strong> libraries to link to... So it not being able to find any symbols from those missing libraries is completely unsurprising.</p>\n\n<p>So, in addition to the library search directory/ies, you also need to populate the \"Library names\" field with the names of any libraries whose symbols you are referencing - in this case, at least <code>opencv</code>. That way, the linker can link to those libraries and therefore resolve those symbols.</p>\n\n<p><strong>Edit as per now-completely-different question</strong></p>\n\n<p>Based on this thread:\n<a href=\"https://stackoverflow.com/questions/6578484/telling-gcc-directly-to-link-a-library-statically\">Telling gcc directly to link a library statically</a>\nIt looks like you should move any static libraries into the \"Additional linker\" flags, as the \"Library names\" generates <code>-l</code> switches (not <code>-l:</code>), which are for dynamic libraries, but you are trying to link a static library.</p>\n"}], "owner": {"reputation": 1, "user_id": 8406760, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b7904631391e9f1e16d49e8eeaf20c7?s=128&d=identicon&r=PG&f=1", "display_name": "wu_pa", "link": "https://stackoverflow.com/users/8406760/wu-pa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 224, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1501754233, "creation_date": 1501692390, "last_edit_date": 1501754233, "question_id": 45466607, "link": "https://stackoverflow.com/questions/45466607/crosscompiling-visualgdb-c-cubietruck-linkererror", "title": "Crosscompiling VisualGDB/C++ Cubietruck =&gt; Linkererror", "body": "<p>i am trying to get an <strong>opencv c++</strong> program, which runs on my laptop, on my hardware - furthermore i should mention, that i am new to embedded programming.\nMay someone can help me, because i got problems while cross-compiling with <strong>VisualGDB</strong>. I am using following board: Cubieboard 3 (<strong>Cubietruck</strong>- Dual-Core A20)</p>\n\n<p>The toolchain is stored locally - so not on the board itself.\nAll libraries are included and detected in Visual Studio --> take a look at the Screenshot:</p>\n\n<p><img src=\"https://i.stack.imgur.com/0jHua.png\" /></p>\n\n<p>The \"<strong>opencv_world320d.lib</strong>\" - Library includes all the needed sub libraries - i found that <a href=\"https://stackoverflow.com/questions/34867289/opencv-3-x-only-contains-one-lib-opencv-world-lib\">here</a></p>\n\n<p>The C++ code itself:</p>\n\n<pre><code>#include \"opencv2/highgui/highgui.hpp\"\n#include &lt;iostream&gt;\n\nusing namespace cv;\nusing namespace std;\n\nint main(int argc, const char** argv)\n{\n    Mat img(500, 1000, CV_8UC3, Scalar(0, 0, 100)); //create an image ( 3 channels, 8 bit image depth, 500 high, 1000 wide, (0, 0, 100) assigned for Blue, Green and Red plane respectively. )\n\n    if (img.empty()) //check whether the image is loaded or not\n    {\n        cout &lt;&lt; \"Error : Image cannot be loaded..!!\" &lt;&lt; endl;\n        //system(\"pause\"); //wait for a key press\n        return -1;\n    }\n\n    namedWindow(\"MyWindow\", CV_WINDOW_AUTOSIZE); //create a window with the name \"MyWindow\"\n    imshow(\"MyWindow\", img); //display the image which is stored in the 'img' in the \"MyWindow\" window\n\n    waitKey(0);  //wait infinite time for a keypress\n\n    destroyWindow(\"MyWindow\"); //destroy the window with the name, \"MyWindow\"\n\n    return 0;\n}\n</code></pre>\n\n<p>When I try to build the linker fails with following message:</p>\n\n<pre><code>1&gt;------ Erstellen gestartet: Projekt: LinuxProject2, Konfiguration: Debug VisualGDB ------\n1&gt;  Linking VisualGDB/Debug/LinuxProject2...\n1&gt;  VisualGDB/Debug/LinuxProject2.o: In function `cv::String::String(char const*)':\n1&gt;C:\\OpenCV-3.2.0\\opencv\\build\\include\\opencv2\\core\\cvstd.hpp(622): error : undefined reference to `cv::String::allocate(unsigned int)'\n1&gt;  VisualGDB/Debug/LinuxProject2.o: In function `cv::String::~String()':\n1&gt;C:\\OpenCV-3.2.0\\opencv\\build\\include\\opencv2\\core\\cvstd.hpp(664): error : undefined reference to `cv::String::deallocate()'\n1&gt;  VisualGDB/Debug/LinuxProject2.o: In function `cv::Mat::Mat(int, int, int, cv::Scalar_&lt;double&gt; const&amp;)':\n1&gt;C:\\OpenCV-3.2.0\\opencv\\build\\include\\opencv2\\core\\mat.inl.hpp(352): error : undefined reference to `cv::Mat::operator=(cv::Scalar_&lt;double&gt; const&amp;)'\n1&gt;  VisualGDB/Debug/LinuxProject2.o: In function `cv::Mat::~Mat()':\n1&gt;C:\\OpenCV-3.2.0\\opencv\\build\\include\\opencv2\\core\\mat.inl.hpp(592): error : undefined reference to `cv::fastFree(void*)'\n1&gt;  VisualGDB/Debug/LinuxProject2.o: In function `cv::Mat::create(int, int, int)':\n1&gt;C:\\OpenCV-3.2.0\\opencv\\build\\include\\opencv2\\core\\mat.inl.hpp(684): error : undefined reference to `cv::Mat::create(int, int const*, int)'\n1&gt;  VisualGDB/Debug/LinuxProject2.o: In function `cv::Mat::release()':\n1&gt;C:\\OpenCV-3.2.0\\opencv\\build\\include\\opencv2\\core\\mat.inl.hpp(704): error : undefined reference to `cv::Mat::deallocate()'\n1&gt;  VisualGDB/Debug/LinuxProject2.o: In function `main':\n1&gt;D:\\Softwareentwicklung\\Projects\\LinuxProject2\\LinuxProject2.cpp(18): error : undefined reference to `cv::namedWindow(cv::String const&amp;, int)'\n1&gt;D:\\Softwareentwicklung\\Projects\\LinuxProject2\\LinuxProject2.cpp(19): error : undefined reference to `cv::imshow(cv::String const&amp;, cv::_InputArray const&amp;)'\n1&gt;D:\\Softwareentwicklung\\Projects\\LinuxProject2\\LinuxProject2.cpp(21): error : undefined reference to `cv::waitKey(int)'\n1&gt;D:\\Softwareentwicklung\\Projects\\LinuxProject2\\LinuxProject2.cpp(23): error : undefined reference to `cv::destroyWindow(cv::String const&amp;)'\n1&gt;collect2.exe : error : ld returned 1 exit status\n</code></pre>\n\n<p>Maybe someone had the same problems - i really searched a lot, but i wasn't able to find similar issues.</p>\n"}, {"tags": ["c++", "qt", "mingw"], "comments": [{"owner": {"reputation": 314, "user_id": 5228740, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/nnUZy.png?s=128&g=1", "display_name": "Hannes Hauptmann", "link": "https://stackoverflow.com/users/5228740/hannes-hauptmann"}, "edited": false, "score": 1, "creation_date": 1501692387, "post_id": 45466456, "comment_id": 77893966, "body": "The &#39;glm&#39; lib could be handy for you."}, {"owner": {"reputation": 17, "user_id": 8393671, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd00fbfe2f3ebd86d55da9d0667ed9f6?s=128&d=identicon&r=PG&f=1", "display_name": "StachuOddawajPieniadzeZaLas", "link": "https://stackoverflow.com/users/8393671/stachuoddawajpieniadzezalas"}, "reply_to_user": {"reputation": 314, "user_id": 5228740, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/nnUZy.png?s=128&g=1", "display_name": "Hannes Hauptmann", "link": "https://stackoverflow.com/users/5228740/hannes-hauptmann"}, "edited": false, "score": 0, "creation_date": 1501692799, "post_id": 45466456, "comment_id": 77894215, "body": "I can&#39;t use glm :( My teacher prohibit that."}, {"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 0, "creation_date": 1501746801, "post_id": 45466456, "comment_id": 77916524, "body": "Please, have a look at my answer to <a href=\"https://stackoverflow.com/a/44503376/7478597\">SO: How to compose a matrix to perform isometric (dimetric) projection of a world coordinate?</a>. It contains some basic &quot;3d math&quot; and a simple 3d renderer based on <code>QPainter</code> functions only."}, {"owner": {"reputation": 23771, "user_id": 24283, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/40de04de8152eee3e356895fff1a8e90?s=128&d=identicon&r=PG", "display_name": "timday", "link": "https://stackoverflow.com/users/24283/timday"}, "edited": false, "score": 0, "creation_date": 1501753857, "post_id": 45466456, "comment_id": 77921833, "body": "I&#39;d expect any Qt 3D graphics code to be at least using things like QMatrix4x4 / QTransform, and maybe even the newfangled Qt3DCore::QTransform (although probably not the latter for this sort of SW rendering!)"}], "owner": {"reputation": 17, "user_id": 8393671, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd00fbfe2f3ebd86d55da9d0667ed9f6?s=128&d=identicon&r=PG&f=1", "display_name": "StachuOddawajPieniadzeZaLas", "link": "https://stackoverflow.com/users/8393671/stachuoddawajpieniadzezalas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 413, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1501692191, "creation_date": 1501691906, "last_edit_date": 1501692191, "question_id": 45466456, "link": "https://stackoverflow.com/questions/45466456/3d-transformation-in-qt", "title": "3D transformation in QT", "body": "<p>I want to program 3D transformations in QT. I already wrote code to draw a cube. I don't know what I should to do to program translation, rotate and scaling. I only found matrixes: <a href=\"https://www.tutorialspoint.com/computer_graphics/3d_transformation.htm\" rel=\"nofollow noreferrer\">https://www.tutorialspoint.com/computer_graphics/3d_transformation.htm</a>, but I don't know how to use it. </p>\n\n<pre><code>#include \"widget.h\"\n#include \"ui_widget.h\"\n#include &lt;iostream&gt;\n#include &lt;stdlib.h&gt;\nusing namespace std;\n\nWidget::Widget(QWidget *parent) : QWidget(parent), ui(new Ui::Widget)\n{\n    img = new QImage(600,600,QImage::Format_RGB32);\n    ui-&gt;setupUi(this);\n    drawCube(200, 300);\n}\n\nWidget::~Widget()\n{\n    delete ui;\n}\n\nvoid Widget::paintEvent(QPaintEvent*)\n{\n    QPainter p(this);\n    p.drawImage(0,0,*img);\n}\n\nvoid Widget::drawCube(int x, int y)\n{\n    drawLine(x,y,x+100,y);\n    drawLine(x,y-100,x+100,y-100);\n    drawLine(x+100,y,x+100,y-100);\n    drawLine(x,y,x,y-100);\n    drawLine(x+50,y-50,x+150,y-50);\n    drawLine(x+50,y-150,x+150,y-150);\n    drawLine(x+150,y-50,x+150,y-150);\n    drawLine(x+50,y-50,x+50,y-150);\n    drawLine(x,y,x+50,y-50);\n    drawLine(x+100,y,x+150,y-50);\n    drawLine(x+100,y-100,x+150,y-150);\n    drawLine(x,y-100,x+50,y-150);\n}\n\nvoid Widget::drawLine(int x1, int y1, int x2, int y2)\n{\n    uchar * bits = img-&gt;bits();\n    float a,b;\n    int x;\n    a=(float)(y2-y1)/(x2-x1);\n    b=y1-a*x1;\n    if(x1&gt;x2)\n    {\n        swap(x1,x2);\n        swap(y1,y2);\n    }\n    if(y1&lt;=y2)\n    {\n        for (int y=y1; y&lt;y2; y++)\n        {\n            if(x1!=x2) x=(y-b)/a;\n            else x=x1;\n            colorPixel(x,y,bits);\n        }\n    }\n    if(y1&gt;y2)\n    {\n        for (int y=y2; y&lt;y1; y++)\n        {\n            if(x1!=x2) x=(y-b)/a;\n            else x=x1;\n            colorPixel(x,y,bits);\n         }\n    }\n    for (int x=x1; x&lt;x2; x++)\n    {\n        int y=a*x+b;\n        colorPixel(x,y,bits);\n    }\n}\n\nvoid Widget::colorPixel(int x, int y, unsigned char * bits)\n{\n    if (x &lt; 0 || y &lt; 0 || x &gt;= 600 || y &gt;= 600) return;\n    int p = x * 4 + y * 600 * 4;\n    bits[p] = 255;\n    bits[p+1] = 255;\n    bits[p+2] = 255;\n}\n</code></pre>\n"}, {"tags": ["c++", "c++11", "constexpr"], "comments": [{"owner": {"reputation": 7681, "user_id": 8242698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BjJXu.jpg?s=128&g=1", "display_name": "user0042", "link": "https://stackoverflow.com/users/8242698/user0042"}, "edited": false, "score": 0, "creation_date": 1501691696, "post_id": 45466327, "comment_id": 77893541, "body": "<a href=\"http://coliru.stacked-crooked.com/a/bc0d0fef61b17c97\" rel=\"nofollow noreferrer\">works well for me</a>."}, {"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "edited": false, "score": 0, "creation_date": 1501691732, "post_id": 45466327, "comment_id": 77893565, "body": "not with a non-intrinsic object sadly. Use a static constexpr function to deliver the object."}, {"owner": {"reputation": 472, "user_id": 1992776, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/564eaaa89de37dbcc59c5f95f46f3f36?s=128&d=identicon&r=PG", "display_name": "army007", "link": "https://stackoverflow.com/users/1992776/army007"}, "edited": false, "score": 0, "creation_date": 1501691795, "post_id": 45466327, "comment_id": 77893601, "body": "what is the g++ version of this compiler?"}, {"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "edited": false, "score": 0, "creation_date": 1501692074, "post_id": 45466327, "comment_id": 77893788, "body": "wait.. this works in latest version of gcc and clang."}, {"owner": {"reputation": 10203, "user_id": 4672588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edcbc85fb3b43202dab37afb2bd5281e?s=128&d=identicon&r=PG&f=1", "display_name": "cpplearner", "link": "https://stackoverflow.com/users/4672588/cpplearner"}, "reply_to_user": {"reputation": 7681, "user_id": 8242698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BjJXu.jpg?s=128&g=1", "display_name": "user0042", "link": "https://stackoverflow.com/users/8242698/user0042"}, "edited": false, "score": 1, "creation_date": 1501692155, "post_id": 45466327, "comment_id": 77893843, "body": "@user0042 This is an ODR issue. <a href=\"http://coliru.stacked-crooked.com/a/e6661ed843ce519a\" rel=\"nofollow noreferrer\">Turn off <code>-O2</code> and it will no longer work.</a>"}, {"owner": {"reputation": 8510, "user_id": 6040181, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh3.googleusercontent.com/-dQXdInUPrE0/AAAAAAAAAAI/AAAAAAAAAdg/_OLdfGWclsw/photo.jpg?sz=128", "display_name": "Biagio Festa", "link": "https://stackoverflow.com/users/6040181/biagio-festa"}, "edited": false, "score": 0, "creation_date": 1501692189, "post_id": 45466327, "comment_id": 77893863, "body": "It <a href=\"http://coliru.stacked-crooked.com/a/457d588215a47446\" rel=\"nofollow noreferrer\">works</a> on GCC 4.8"}, {"owner": {"reputation": 472, "user_id": 1992776, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/564eaaa89de37dbcc59c5f95f46f3f36?s=128&d=identicon&r=PG", "display_name": "army007", "link": "https://stackoverflow.com/users/1992776/army007"}, "reply_to_user": {"reputation": 8510, "user_id": 6040181, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh3.googleusercontent.com/-dQXdInUPrE0/AAAAAAAAAAI/AAAAAAAAAdg/_OLdfGWclsw/photo.jpg?sz=128", "display_name": "Biagio Festa", "link": "https://stackoverflow.com/users/6040181/biagio-festa"}, "edited": false, "score": 0, "creation_date": 1501692310, "post_id": 45466327, "comment_id": 77893920, "body": "@BiagioFesta to be specific my <code>g++ --version</code> output is <code>g++ (Ubuntu 4.8.4-2ubuntu1~14.04.3) 4.8.4</code>. It does not work with it."}, {"owner": {"reputation": 7681, "user_id": 8242698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BjJXu.jpg?s=128&g=1", "display_name": "user0042", "link": "https://stackoverflow.com/users/8242698/user0042"}, "edited": false, "score": 0, "creation_date": 1501692373, "post_id": 45466327, "comment_id": 77893958, "body": "@army007 <a href=\"http://coliru.stacked-crooked.com/a/0e8f881f5aa37d10\" rel=\"nofollow noreferrer\">coliru.stacked-crooked.com/a/0e8f881f5aa37d10</a>"}, {"owner": {"reputation": 472, "user_id": 1992776, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/564eaaa89de37dbcc59c5f95f46f3f36?s=128&d=identicon&r=PG", "display_name": "army007", "link": "https://stackoverflow.com/users/1992776/army007"}, "reply_to_user": {"reputation": 7681, "user_id": 8242698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BjJXu.jpg?s=128&g=1", "display_name": "user0042", "link": "https://stackoverflow.com/users/8242698/user0042"}, "edited": false, "score": 0, "creation_date": 1501692528, "post_id": 45466327, "comment_id": 77894052, "body": "@user0042 can you please elaborate on the ODR issue. Why it does not work with -O2?"}, {"owner": {"reputation": 7681, "user_id": 8242698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BjJXu.jpg?s=128&g=1", "display_name": "user0042", "link": "https://stackoverflow.com/users/8242698/user0042"}, "reply_to_user": {"reputation": 10203, "user_id": 4672588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edcbc85fb3b43202dab37afb2bd5281e?s=128&d=identicon&r=PG&f=1", "display_name": "cpplearner", "link": "https://stackoverflow.com/users/4672588/cpplearner"}, "edited": false, "score": 0, "creation_date": 1501692616, "post_id": 45466327, "comment_id": 77894099, "body": "<i>@army007</i> Sounds like it&#39;s rather a job for @cpplearner."}], "answers": [{"comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 2, "creation_date": 1501697856, "post_id": 45468084, "comment_id": 77897294, "body": "I would just add that the ODR-usage here happens due to the fact that get&lt;&gt; returns a reference. I imagine, it should be possible to do my_get&lt;&gt; returning value, which would not trigger the problem."}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1501698460, "post_id": 45468084, "comment_id": 77897659, "body": "<i>defined</i>, not declared. The implicit inline applies to static data members only."}, {"owner": {"reputation": 472, "user_id": 1992776, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/564eaaa89de37dbcc59c5f95f46f3f36?s=128&d=identicon&r=PG", "display_name": "army007", "link": "https://stackoverflow.com/users/1992776/army007"}, "edited": false, "score": 0, "creation_date": 1501704882, "post_id": 45468084, "comment_id": 77901342, "body": "@yakk Thanks for explaining how it violated ODR and suggestion to make it <code>constexpr</code> function."}], "tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": true, "score": 5, "last_activity_date": 1501700899, "last_edit_date": 1501700899, "creation_date": 1501697301, "answer_id": 45468084, "question_id": 45466327, "link": "https://stackoverflow.com/questions/45466327/how-to-use-make-tuple-in-static-constexpr-class-member/45468084#45468084", "title": "How to use make_tuple() in static constexpr class member?", "body": "<p>In C++11/14, <code>static constexpr</code> variables must be <em>defined</em> somewhere if ODR-used (ODR-used means \"used in a way that requires it have an identity\".  As an example, take a real reference or pointer to them.  ODR here means \"one definition rule\", and ODR-used means \"used in a sense that requires it to have exactly one definition\", which I shorten to \"have an identity\").</p>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/a1325a5058f5bf93\" rel=\"nofollow noreferrer\">Simply add:</a></p>\n\n<pre><code>constexpr tuple&lt;int, double&gt; A::z;\n</code></pre>\n\n<p>and we have defined where it exists.  This needs to be in exactly one compilation unit.</p>\n\n<p>In C++17, <code>inline</code> variables were added and I believe <code>constexpr</code> variables were implicitly made inline.  I'm not a C++17 expert, but <a href=\"http://coliru.stacked-crooked.com/a/f553a824fff12233\" rel=\"nofollow noreferrer\">it compiles and runs in C++1z mode</a> without the definition, so my interpretation seems at least half correct.</p>\n\n<p>(<code>inline</code> variables, like <code>inline</code> functions, have the definition in the end created wherever the compiler wants.  <code>inline</code> functions are typically implemented by having a definition in every object file with special notes when someone takes an address of it, then the duplicates are discarded at link time and everyone refers to the last one standing.  I don't know if <code>inline</code> variables tend to be implemented the same way or not.)</p>\n\n<p>If you want to solve this problem in C++11 without having to put something in a <code>.cpp</code> file with hardcoded template arguments, <a href=\"http://coliru.stacked-crooked.com/a/ec83f0b90e680cca\" rel=\"nofollow noreferrer\">change <code>z</code> to a <code>constexpr</code> function</a> and call it when you want to use it.</p>\n\n<hr>\n\n<p>As SergyA has mentioned, ODR is triggered here because <code>get</code> returns a <em>reference</em> to a field in the tuple in question, and that reference implies an identity must exist for the field and hence the entire tuple.</p>\n\n<p>In theory, a carefully crafted <code>value_get</code> that returned by value could avoid this ODR-usage, but it would depend on the implemenation of <code>tuple</code> as it in turn could not call <code>get</code>.</p>\n"}], "owner": {"reputation": 472, "user_id": 1992776, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/564eaaa89de37dbcc59c5f95f46f3f36?s=128&d=identicon&r=PG", "display_name": "army007", "link": "https://stackoverflow.com/users/1992776/army007"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 856, "favorite_count": 0, "accepted_answer_id": 45468084, "answer_count": 1, "score": 2, "last_activity_date": 1501700899, "creation_date": 1501691501, "question_id": 45466327, "link": "https://stackoverflow.com/questions/45466327/how-to-use-make-tuple-in-static-constexpr-class-member", "title": "How to use make_tuple() in static constexpr class member?", "body": "<p>I am trying to use <code>make_tuple()</code> in <code>constexpr</code>. It works in global scope. But it generates link error for <code>static constexpr</code> class member.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;tuple&gt;\n\nusing namespace std;\n\nclass A\n{\npublic:\n    static constexpr auto z = make_tuple(5, 3.0);\n};\n\nconstexpr auto tp = make_tuple(6, 3.2);\n\nint main()\n{\n\n    cout &lt;&lt; get&lt;0&gt;(tp) &lt;&lt; \" \" &lt;&lt; get&lt;1&gt;(tp) &lt;&lt; endl; // OK\n\n    cout &lt;&lt; get&lt;0&gt;(A::z) &lt;&lt; \"  \" &lt;&lt; get&lt;1&gt;(A::z) &lt;&lt; endl; // error: (.text+0x5a): undefined reference to `A::z'\n                                                          //        (.text+0x67): undefined reference to `A::z'\n\n}\n</code></pre>\n\n<p>I have checked <a href=\"http://en.cppreference.com/w/cpp/utility/tuple/make_tuple\" rel=\"nofollow noreferrer\">here</a> <code>make_tuple</code> is not itself a <code>constexpr</code> in <code>c++11</code>. I guess that is not the problem in this case. If it was it would generate a compile error instead of link error.</p>\n\n<p>I have tried to define the <code>constexpr</code> outside the class like bellow as suggested by <a href=\"https://stackoverflow.com/a/35930465/1992776\">this answer</a></p>\n\n<pre><code>class A\n{\npublic:\n    static constexpr tuple&lt;int, double&gt; z;\n};\n\nconstexpr tuple&lt;int, double&gt; A::z = make_tuple(5, 3.0);\n</code></pre>\n\n<p>But, it generates several compile error. That makes sanse according to answers of <a href=\"https://stackoverflow.com/questions/11522399/constexpr-initializing-static-member-using-static-function\">constexpr initializing static member using static function</a></p>\n\n<p>What is the correct way to use <code>make_tuple</code> in <code>static constexpr</code> class member?</p>\n\n<p>Compiler:\n<code>g++ 4.8.4</code> and <code>clang 3.4</code> with <code>-std=c++11</code></p>\n"}, {"tags": ["c++", "qt", "widget", "qgraphicsview", "qmouseevent"], "comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1501692067, "post_id": 45465949, "comment_id": 77893785, "body": "Have you looked into the <code>mapToGlobal</code> and <code>mapToParent</code> functions? Won&#39;t those work for you? If not; why?"}, {"owner": {"reputation": 151, "user_id": 6793328, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/940910b3c9205df889e39965d8bde9a5?s=128&d=identicon&r=PG&f=1", "display_name": "mep", "link": "https://stackoverflow.com/users/6793328/mep"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1501692644, "post_id": 45465949, "comment_id": 77894116, "body": "No, these give me just, what I already have. I am sorry it is not easy to explain... If I use these and click to the left upper corner, I get the same coordinates as when I zoom out a bit and click again to the left upper corner and that&#39;s the problem. I want the coordinated relative to the sceneRectangle (and these would change at the left upper corner when I zoom out)"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1501692865, "post_id": 45465949, "comment_id": 77894257, "body": "There&#39;s also <code>mapTo</code> and <code>mapToScene</code>.. sorry, just guessing here - not sure I quite get what you are trying to do."}, {"owner": {"reputation": 151, "user_id": 6793328, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/940910b3c9205df889e39965d8bde9a5?s=128&d=identicon&r=PG&f=1", "display_name": "mep", "link": "https://stackoverflow.com/users/6793328/mep"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1501693238, "post_id": 45465949, "comment_id": 77894501, "body": "Oh YES!!! mapToScene works! ( or: myPoint = this-&gt;mapToScene(event-&gt;pos()) ) It gives me exactely what I want.I am trying to do this since hours... Finally I can continue.  Thank you very much! PS: How can I select the comment as solution?"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1501693390, "post_id": 45465949, "comment_id": 77894602, "body": "you can&#39;t with a comment, but I&#39;ll post it as an answer in a moment."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "is_accepted": true, "score": 2, "last_activity_date": 1501693480, "creation_date": 1501693480, "answer_id": 45466956, "question_id": 45465949, "link": "https://stackoverflow.com/questions/45465949/get-absolute-mouse-click-location-on-widget-also-when-zoomed-in-qt/45466956#45466956", "title": "Get absolute mouse click location on widget (also when zoomed in) Qt", "body": "<p>You can do what you want with Qt's <code>mapToScene</code> function.</p>\n"}], "owner": {"reputation": 151, "user_id": 6793328, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/940910b3c9205df889e39965d8bde9a5?s=128&d=identicon&r=PG&f=1", "display_name": "mep", "link": "https://stackoverflow.com/users/6793328/mep"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 228, "favorite_count": 1, "accepted_answer_id": 45466956, "answer_count": 1, "score": 1, "last_activity_date": 1501693480, "creation_date": 1501690317, "question_id": 45465949, "link": "https://stackoverflow.com/questions/45465949/get-absolute-mouse-click-location-on-widget-also-when-zoomed-in-qt", "title": "Get absolute mouse click location on widget (also when zoomed in) Qt", "body": "<p>I want to trigger where I click with the mouse on my QGraphicsView.\nProblem here: this QGraphicsView is always zoomed in. But I want to get the point relative to the whole widget and not only to the viewport.\nOr in other words: when I zoomed in and click on the upper left corner, the location should NOT be 0,0 (the QMousePressEvent just gives me this point). It should be the distance from there to the upper left corner of the whole sceneRectangle (or to the middle, doesn't matter).\nIs there any way to do this?\nThanks for answers.</p>\n"}, {"tags": ["android", "c++", "android-ndk"], "comments": [{"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1501690678, "post_id": 45465772, "comment_id": 77892948, "body": "Is <code>libc++_shared.so</code> packaged in the APK?"}, {"owner": {"reputation": 467, "user_id": 7786237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b9ecb760d02112bce299ebb5bc09ba90?s=128&d=identicon&r=PG&f=1", "display_name": "Erwan", "link": "https://stackoverflow.com/users/7786237/erwan"}, "reply_to_user": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1501749457, "post_id": 45465772, "comment_id": 77918380, "body": "The issue seem to happen during packaging. linking <code>libc++_shared.so</code> raise no error but linking our custom code raise symbol not found."}], "answers": [{"comments": [{"owner": {"reputation": 467, "user_id": 7786237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b9ecb760d02112bce299ebb5bc09ba90?s=128&d=identicon&r=PG&f=1", "display_name": "Erwan", "link": "https://stackoverflow.com/users/7786237/erwan"}, "edited": false, "score": 0, "creation_date": 1501828257, "post_id": 45494363, "comment_id": 77960064, "body": "thanks I&#39;ll investigate more, that strange I use r14b to compile everything"}, {"owner": {"reputation": 467, "user_id": 7786237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b9ecb760d02112bce299ebb5bc09ba90?s=128&d=identicon&r=PG&f=1", "display_name": "Erwan", "link": "https://stackoverflow.com/users/7786237/erwan"}, "edited": false, "score": 1, "creation_date": 1501842967, "post_id": 45494363, "comment_id": 77969744, "body": "It seem the problem come from gnustl. I use a lib that is compiled with <code>arm-linux-androideabi-4.9</code>"}, {"owner": {"reputation": 467, "user_id": 7786237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b9ecb760d02112bce299ebb5bc09ba90?s=128&d=identicon&r=PG&f=1", "display_name": "Erwan", "link": "https://stackoverflow.com/users/7786237/erwan"}, "edited": false, "score": 0, "creation_date": 1501853617, "post_id": 45494363, "comment_id": 77977161, "body": "I validate your answer even if I was not able to find a solution yet."}, {"owner": {"reputation": 8554, "user_id": 632035, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8ed69ad748c440a055502c1b213757e5?s=128&d=identicon&r=PG", "display_name": "Dan Albert", "link": "https://stackoverflow.com/users/632035/dan-albert"}, "reply_to_user": {"reputation": 467, "user_id": 7786237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b9ecb760d02112bce299ebb5bc09ba90?s=128&d=identicon&r=PG&f=1", "display_name": "Erwan", "link": "https://stackoverflow.com/users/7786237/erwan"}, "edited": false, "score": 0, "creation_date": 1501890969, "post_id": 45494363, "comment_id": 77995114, "body": "Is your whole app being built every time? No prebuilt middleware? If you have some third-party dependencies it could be caused by them."}, {"owner": {"reputation": 467, "user_id": 7786237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b9ecb760d02112bce299ebb5bc09ba90?s=128&d=identicon&r=PG&f=1", "display_name": "Erwan", "link": "https://stackoverflow.com/users/7786237/erwan"}, "edited": false, "score": 0, "creation_date": 1501924296, "post_id": 45494363, "comment_id": 78001001, "body": "In fact I use two libraries, compiled from source. Opencv which can only be compiled with gcc/gnustl and Mxnet that can only be compile with clang/libc++ :("}, {"owner": {"reputation": 8554, "user_id": 632035, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8ed69ad748c440a055502c1b213757e5?s=128&d=identicon&r=PG", "display_name": "Dan Albert", "link": "https://stackoverflow.com/users/632035/dan-albert"}, "reply_to_user": {"reputation": 467, "user_id": 7786237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b9ecb760d02112bce299ebb5bc09ba90?s=128&d=identicon&r=PG&f=1", "display_name": "Erwan", "link": "https://stackoverflow.com/users/7786237/erwan"}, "edited": false, "score": 0, "creation_date": 1502130546, "post_id": 45494363, "comment_id": 78066813, "body": "Unfortunately the two libraries are incompatible then. All your libraries need to use the same STL."}], "tags": [], "owner": {"reputation": 8554, "user_id": 632035, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8ed69ad748c440a055502c1b213757e5?s=128&d=identicon&r=PG", "display_name": "Dan Albert", "link": "https://stackoverflow.com/users/632035/dan-albert"}, "is_accepted": true, "score": 2, "last_activity_date": 1501793801, "creation_date": 1501793801, "answer_id": 45494363, "question_id": 45465772, "link": "https://stackoverflow.com/questions/45465772/android-link-issue/45494363#45494363", "title": "Android link issue", "body": "<p>Your library is built against a different version of libc++ than the one you've shipped. <code>ZNSt8ios_base4InitD1Ev</code> is the name prior to r11. It's been <code>_ZNSt6__ndk18ios_base4InitD1Ev</code> since then.</p>\n\n<p>Alternatively, your library is built against gnustl or stlport but ships libc++.</p>\n"}], "owner": {"reputation": 467, "user_id": 7786237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b9ecb760d02112bce299ebb5bc09ba90?s=128&d=identicon&r=PG&f=1", "display_name": "Erwan", "link": "https://stackoverflow.com/users/7786237/erwan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 718, "favorite_count": 0, "accepted_answer_id": 45494363, "answer_count": 1, "score": 0, "last_activity_date": 1501793801, "creation_date": 1501689740, "last_edit_date": 1501750776, "question_id": 45465772, "link": "https://stackoverflow.com/questions/45465772/android-link-issue", "title": "Android link issue", "body": "<p>I try to compile C++ code on Android.</p>\n\n<p>android-api=21\nandroid-ndk=r14b</p>\n\n<p>I got this error :</p>\n\n<pre><code>8-02 17:33:32.926 30669-30669/com.example.user.mod2 E/AndroidRuntime: FATAL EXCEPTION: main\n                                                                          Process: com.example.user.mod2, PID: 30669\n                                                                          java.lang.UnsatisfiedLinkError: dlopen failed: cannot locate symbol \"_ZNSt8ios_base4InitD1Ev\" referenced by \"/data/app/com.example.vkhadir.mod2-1/lib/arm/libcustom.so\"...\n                                                                              at java.lang.Runtime.loadLibrary(Runtime.java:372)\n                                                                              at java.lang.System.loadLibrary(System.java:1076)\n                                                                              at com.example.user.mod2.MainActivity.load(MainActivity.java:65)\n                                                                              at com.example.user.mod2.MainActivity.loadlibs(MainActivity.java:37)\n                                                                              at com.example.user.mod2.MainActivity.onCreate(MainActivity.java:30)\n                                                                              at android.app.Activity.performCreate(Activity.java:6272)\n                                                                              at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1108)\n                                                                              at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2387)\n                                                                              at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2494)\n                                                                              at android.app.ActivityThread.access$900(ActivityThread.java:157)\n                                                                              at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1356)\n                                                                              at android.os.Handler.dispatchMessage(Handler.java:102)\n                                                                              at android.os.Looper.loop(Looper.java:148)\n                                                                              at android.app.ActivityThread.main(ActivityThread.java:5551)\n                                                                              at java.lang.reflect.Method.invoke(Native Method)\n                                                                              at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:730)\n                                                                              at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:620)\n</code></pre>\n\n<p>The issue come from <code>ZNSt8ios_base4InitD1Ev</code> (aka<code>ios_base::Init::~Init</code> ), when I check <code>libc++_shared.so</code> file in android standalone toolchain, <code>nm -D</code> only find <code>_ZNSt6__ndk18ios_base4InitD1Ev</code>.</p>\n\n<p>Where did  <code>ZNSt8ios_base4InitD1Ev</code> come from and how can I get it ?</p>\n"}, {"tags": ["c++", "polygon", "cgal"], "answers": [{"comments": [{"owner": {"reputation": 2089, "user_id": 7778713, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/QIG81.png?s=128&g=1", "display_name": "D.J. Klomp", "link": "https://stackoverflow.com/users/7778713/d-j-klomp"}, "edited": false, "score": 0, "creation_date": 1501833415, "post_id": 45470610, "comment_id": 77963120, "body": "Hate to ask but, could you perhaps be bothered to supply a little bit of code with it. I am relatively new to CGAL and can&#39;t seem to get from CGAL::Polygon to the 2D Arrangement and get the degree."}, {"owner": {"reputation": 4125, "user_id": 3426025, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yxLev.png?s=128&g=1", "display_name": "BeyelerStudios", "link": "https://stackoverflow.com/users/3426025/beyelerstudios"}, "edited": false, "score": 0, "creation_date": 1501931589, "post_id": 45470610, "comment_id": 78002817, "body": "You could just iteratively insert each polygon - why build an extra list indeed..."}, {"owner": {"reputation": 665, "user_id": 1915421, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/a3df53aab908397665f6932ed5cec65c?s=128&d=identicon&r=PG", "display_name": "Efi Fogel", "link": "https://stackoverflow.com/users/1915421/efi-fogel"}, "edited": false, "score": 1, "creation_date": 1501974328, "post_id": 45470610, "comment_id": 78014482, "body": "Inserting all segments at once is more efficient, as the function is based on the plane-sweep framework."}, {"owner": {"reputation": 2089, "user_id": 7778713, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/QIG81.png?s=128&g=1", "display_name": "D.J. Klomp", "link": "https://stackoverflow.com/users/7778713/d-j-klomp"}, "edited": false, "score": 0, "creation_date": 1502180722, "post_id": 45470610, "comment_id": 78085178, "body": "@Efi, Thank you for the code explanation and in general your work on the CGAL library. Still learning CGAL but I think it is a great library."}], "tags": [], "owner": {"reputation": 665, "user_id": 1915421, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/a3df53aab908397665f6932ed5cec65c?s=128&d=identicon&r=PG", "display_name": "Efi Fogel", "link": "https://stackoverflow.com/users/1915421/efi-fogel"}, "is_accepted": true, "score": 2, "last_activity_date": 1501973770, "last_edit_date": 1501973770, "creation_date": 1501706400, "answer_id": 45470610, "question_id": 45465361, "link": "https://stackoverflow.com/questions/45465361/get-polygon-intersection-line-with-cgal/45470610#45470610", "title": "Get Polygon Intersection Line with CGAL", "body": "<p>Insert the segments of the two polygons into a 2D Arrangement. Then find the vertices with degree 4. Notice that in the general case there might be more than 2; there might be none, and there might be 1.</p>\n\n<pre><code>std::list&lt;X_monotone_curve_2&gt; segments;\nfor (const auto&amp; pgn : polygons) {\n  for (auto it = pgn.curves_begin(); it != pgn.curves_end(); ++it)\n    segments.push_back(*it);\n}\nArrangement_2 arr;\ninsert(arr, segments.begin(), segments.end());\nfor (auto it = arr.begin_vertices(); it != arr.end_vertices(); ++it) {\n  if (4 == it-&gt;degree())\n  ...\n}\n</code></pre>\n\n<p>You can avoid the construction of the 'segments' list and instead directly insert the segments of the polygons into the arrangement using an iterator adapter. (This is pure generic programming and nothing to do with CGAL.)</p>\n"}], "owner": {"reputation": 2089, "user_id": 7778713, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/QIG81.png?s=128&g=1", "display_name": "D.J. Klomp", "link": "https://stackoverflow.com/users/7778713/d-j-klomp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 775, "favorite_count": 0, "accepted_answer_id": 45470610, "answer_count": 1, "score": 0, "last_activity_date": 1501973770, "creation_date": 1501688636, "question_id": 45465361, "link": "https://stackoverflow.com/questions/45465361/get-polygon-intersection-line-with-cgal", "title": "Get Polygon Intersection Line with CGAL", "body": "<p>How can I easily retrieve the intersection line (from the first to the last intersection point) of two intersecting polygons with CGAL. See the image for clarification, the green line is what I want.</p>\n\n<p><a href=\"https://i.stack.imgur.com/jZ7TW.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/jZ7TW.png\" alt=\"Two intersecting polygons with intersection line\"></a></p>\n\n<p>Currently I use the following algorithm, where I get the intersection polygon and then find the points which are on both polygon boundaries, these should be the intersection points. Here it is in code:</p>\n\n<pre><code>Polygon_2 P,Q;\nPwh_list_2                  intR;\nPwh_list_2::const_iterator  it;\nCGAL::intersection(P, Q, std::back_inserter(intR));\n\n//Loop through intersection polygons\nfor (it = intR.begin(); it != intR.end(); ++it) {\n    boost::numeric::ublas::vector&lt;double&gt; firstIntersectPoint(3), lastIntersectPoint(3);\n    Polygon_2 Overlap = it-&gt;outer_boundary();\n    typename CGAL::Polygon_2&lt;Kernel&gt;::Vertex_iterator vit;\n    int pointNr = 1;\n\n    //Loop through points of intersection polygon to find first and last intersection point.\n    for (vit = Overlap.vertices_begin(); vit != Overlap.vertices_end(); ++vit) {\n        CGAL::Bounded_side bsideThis = P.bounded_side(*vit);\n        CGAL::Bounded_side bsideArg = Q.bounded_side(*vit);\n        if (bsideThis == CGAL::ON_BOUNDARY &amp;&amp; bsideArg == CGAL::ON_BOUNDARY &amp;&amp; pointNr == 1) {\n            firstIntersectPoint &lt;&lt;= 0, CGAL::to_double(vit-&gt;x()), CGAL::to_double(vit-&gt;y());\n            pointNr = 2;\n        }\n        else if (bsideThis == CGAL::ON_BOUNDARY &amp;&amp; bsideArg == CGAL::ON_BOUNDARY &amp;&amp; pointNr == 2) {\n            lastIntersectPoint &lt;&lt;= 0, CGAL::to_double(vit-&gt;x()), CGAL::to_double(vit-&gt;y());\n            pointNr = 2;\n        }\n    }\n\n    //RESULT\n    std::cout &lt;&lt; firstIntersectPoint &lt;&lt; std::endl;\n    std::cout &lt;&lt; lastIntersectPoint &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>Although this works I don't think it is the correct way to go. Can somebody give me an indication whether this is the correct way to do this or give my pointers how to do it better.</p>\n"}, {"tags": ["c++", "list", "struct", "sudoku"], "comments": [{"owner": {"reputation": 4535, "user_id": 59081, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c17b54bbea172f608e552f9bf67d4f9?s=128&d=identicon&r=PG", "display_name": "Tanveer Badar", "link": "https://stackoverflow.com/users/59081/tanveer-badar"}, "edited": false, "score": 2, "creation_date": 1501687654, "post_id": 45464955, "comment_id": 77890783, "body": "Say hello to copy constructors."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 2, "creation_date": 1501687661, "post_id": 45464955, "comment_id": 77890788, "body": "Do not use <code>typedef struct</code> construct in C++. It is not only unnecessary but create problems."}], "answers": [{"comments": [{"owner": {"reputation": 63, "user_id": 8405872, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UPKHs.jpg?s=128&g=1", "display_name": "Liel van der Hoeven", "link": "https://stackoverflow.com/users/8405872/liel-van-der-hoeven"}, "edited": false, "score": 0, "creation_date": 1501688504, "post_id": 45465042, "comment_id": 77891449, "body": "Thanks! works as planned now. I just recently got back to using C++ and I&#39;ve only now started using &quot;for (auto x: name)&quot;. Will definitely keep that in mind for next time I use it"}], "tags": [], "owner": {"reputation": 16382, "user_id": 5507349, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/IaCUb.jpg?s=128&g=1", "display_name": "Edgar Rokj\u0101n", "link": "https://stackoverflow.com/users/5507349/edgar-rokj%c4%81n"}, "is_accepted": true, "score": 11, "last_activity_date": 1501688134, "last_edit_date": 1501688134, "creation_date": 1501687753, "answer_id": 45465042, "question_id": 45464955, "link": "https://stackoverflow.com/questions/45464955/c-why-struct-object-values-reset-back-to-zero-at-end-of-loop/45465042#45465042", "title": "C++ why struct object values reset back to ZERO at end of loop", "body": "<pre><code>for (auto m : missingNumsObjects)\n</code></pre>\n\n<p>Here <code>auto</code> is deduced as <code>matrixMissNumber</code>, so <code>m</code> is a copy of <code>matrixMissNumber</code> object stored in the list. Then you change the copy, not the object in the list <code>missingNumsObjects</code>.</p>\n\n<p>To fix the issue help the compiler to deduce the type properly and change the cycle to:</p>\n\n<pre><code>for (auto&amp; m : missingNumsObjects)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "is_accepted": false, "score": 0, "last_activity_date": 1501688052, "creation_date": 1501688052, "answer_id": 45465154, "question_id": 45464955, "link": "https://stackoverflow.com/questions/45464955/c-why-struct-object-values-reset-back-to-zero-at-end-of-loop/45465154#45465154", "title": "C++ why struct object values reset back to ZERO at end of loop", "body": "<p>The problem you'll gain the most from is actually here </p>\n\n<blockquote>\n  <p>\"I debugged the program and everything works perfectly, until the\n  loops end\".</p>\n</blockquote>\n\n<p>Things weren't working perfectly until the loop finished.  You never inspected the contents of the list as had you done so, you'd have noticed that it never changed.</p>\n\n<p>The moral of this is that when debugging, inspect the thing that should be changing, not what you're assigning to.</p>\n"}], "owner": {"reputation": 63, "user_id": 8405872, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UPKHs.jpg?s=128&g=1", "display_name": "Liel van der Hoeven", "link": "https://stackoverflow.com/users/8405872/liel-van-der-hoeven"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 922, "favorite_count": 0, "accepted_answer_id": 45465042, "answer_count": 2, "score": 2, "last_activity_date": 1501688134, "creation_date": 1501687553, "question_id": 45464955, "link": "https://stackoverflow.com/questions/45464955/c-why-struct-object-values-reset-back-to-zero-at-end-of-loop", "title": "C++ why struct object values reset back to ZERO at end of loop", "body": "<p>I created a simple struct object that holds 2 values - <em>number</em> (specific number) and <em>count</em> (counter for how many times number appears).</p>\n\n<pre><code>typedef struct matrixMissNumber {\n  int number;\n  int count = 0;\n}\n</code></pre>\n\n<p>Then I created a list called, <em>missingNumsObjects</em>, to hold those objects. <em>missNums</em> is a seprate list that simply holds ints.</p>\n\n<pre><code>list&lt;matrixMissNumber&gt; missingNumsObjects;\nfor (auto m : missNums)\n{\n    matrixMissNumber mn;\n    mn.number = m;\n    missingNumsObjects.push_back(mn);\n}\n</code></pre>\n\n<p>I then have 3 for-loops that go through and check 2 conditions. If those conditions are satisfied, count increments by 1. (I added a <em>cout</em> statement for testing purposes). <strong>I debugged the program</strong> and everything works perfectly, <strong>until the loops end</strong>. That's when the count variable for every <em>matrixMissNumber</em> object in <em>missingNumsObjects</em> resets back to 0. I'm not sure if its a problem where different memory addresses are being manipulated, or lists pointers that are the issue.</p>\n\n<pre><code>for (auto m : missingNumsObjects)\n{\n    for (int x = 0; x &lt; 3; x++)\n    {\n        for (int y = 0; y &lt; 3; y++)\n        {\n            if (sudoku[x][y] == 0)\n            {\n                if (checkRowRule(m.number, x) == false &amp;&amp; checkColumnRule(m.number, y) == false)\n                {\n                    m.count++;\n                    cout &lt;&lt; m.number &lt;&lt; \" - \" &lt;&lt; m.count &lt;&lt; endl;\n                }\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>The next lines print out the values of count of the <em>missingNumsObjects</em> after the loop. This is where the values <strong>return back to 0</strong>.</p>\n\n<pre><code>for (auto m : missingNumsObjects)\n    cout &lt;&lt; m.number &lt;&lt; \" - \" &lt;&lt; m.count &lt;&lt; endl;\n</code></pre>\n\n<p>This program's purpose is a Sudoku Solver. This part of the algorithm checks the 3x3 matrix for missing numbers and checks into how many empty spots in the 3x3 matrix that number can go into. </p>\n"}, {"tags": ["c++", "mysql", "memory-leaks"], "comments": [{"owner": {"reputation": 3577, "user_id": 2176813, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Nv7lK.jpg?s=128&g=1", "display_name": "tambre", "link": "https://stackoverflow.com/users/2176813/tambre"}, "edited": false, "score": 0, "creation_date": 1501686646, "post_id": 45464429, "comment_id": 77889980, "body": "C != C++. Tag with only one of them."}, {"owner": {"reputation": 89, "user_id": 8219876, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c66c2b9ee88f4126a3bb2373ac9a6717?s=128&d=identicon&r=PG&f=1", "display_name": "RMRMaster", "link": "https://stackoverflow.com/users/8219876/rmrmaster"}, "reply_to_user": {"reputation": 3577, "user_id": 2176813, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Nv7lK.jpg?s=128&g=1", "display_name": "tambre", "link": "https://stackoverflow.com/users/2176813/tambre"}, "edited": false, "score": 0, "creation_date": 1501686706, "post_id": 45464429, "comment_id": 77890035, "body": "I already fix the tag. It was inadvertently"}, {"owner": {"reputation": 89, "user_id": 8219876, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c66c2b9ee88f4126a3bb2373ac9a6717?s=128&d=identicon&r=PG&f=1", "display_name": "RMRMaster", "link": "https://stackoverflow.com/users/8219876/rmrmaster"}, "reply_to_user": {"reputation": 3577, "user_id": 2176813, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Nv7lK.jpg?s=128&g=1", "display_name": "tambre", "link": "https://stackoverflow.com/users/2176813/tambre"}, "edited": false, "score": 0, "creation_date": 1501686794, "post_id": 45464429, "comment_id": 77890115, "body": "And related to the question, you know some other way? :)"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1501688944, "post_id": 45464429, "comment_id": 77891784, "body": "You may want to post to the MySQL forums."}, {"owner": {"reputation": 1041, "user_id": 6583298, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/5xZmG.jpg?s=128&g=1", "display_name": "Norbert Boros", "link": "https://stackoverflow.com/users/6583298/norbert-boros"}, "edited": false, "score": 0, "creation_date": 1516770961, "post_id": 45464429, "comment_id": 83820189, "body": "I am looking for the same solution, seems nobody can answer...."}], "owner": {"reputation": 89, "user_id": 8219876, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c66c2b9ee88f4126a3bb2373ac9a6717?s=128&d=identicon&r=PG&f=1", "display_name": "RMRMaster", "link": "https://stackoverflow.com/users/8219876/rmrmaster"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 332, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1501686668, "creation_date": 1501686138, "last_edit_date": 1501686668, "question_id": 45464429, "link": "https://stackoverflow.com/questions/45464429/c-mysql-connector-keep-connection-open", "title": "c++ - mysql connector keep connection open", "body": "<p>I'm bulding a rest api in c++ and my program are always running in cloud. I'm using the mysql connector for c++ to communicate with mysql database.</p>\n\n<p>For example, to establish a connection: </p>\n\n<pre><code>sql::mysql::MySQL_Driver *driver;\nsql::Connection *con;\n\ndriver = sql::mysql::get_mysql_driver_instance();\ncon = driver-&gt;connect(\"tcp://127.0.0.1:3306\", \"user\", \"password\");\n\ndelete con;\n</code></pre>\n\n<p>If you see when i dont need more the <code>con</code> object i need to delete it and free the memory (\" Make sure that you free con, the sql::Connection object, as soon as you do not need it any more. \"  by -> <a href=\"https://dev.mysql.com/doc/connector-cpp/en/connector-cpp-examples-connecting.html\" rel=\"nofollow noreferrer\">https://dev.mysql.com/doc/connector-cpp/en/connector-cpp-examples-connecting.html</a>). But in my case i think that no make sense for each request create a new <code>con</code>. </p>\n\n<p>If it is a <code>rest api</code> and they are always running in real time i think that is more elegant to create a single connection and in each request i use that connection. For example if i have 10 requests to the same thing (user info) it is not elegant to create and delete 10 connections...</p>\n\n<p>I try this solution (create one single connection when i run the program in first time and use always the same connection), its works but in future it would originate memory leaks because i never free memory to the <code>con</code> and others objects that its always necessary to use in each request to database. And i cannot free the <code>con</code> object in this case because in some next request i get <code>segmentation fault</code> because i already <code>delete</code> and <code>free</code> the <code>con</code> object and dont create anymore because i only create the connection in first program running and i kept that connection always open.</p>\n\n<p>So there are some way to always keep the connection open without having in future problems with memory leak?</p>\n"}, {"tags": ["c++", "compiler-errors"], "comments": [{"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 5, "creation_date": 1501685813, "post_id": 45464216, "comment_id": 77889346, "body": "Did you look at the documentation of <a href=\"http://en.cppreference.com/w/cpp/algorithm/replace\" rel=\"nofollow noreferrer\"><code>std::replace</code></a>? If you did, you would know, that it is defined in <code>&lt;algorithm&gt;</code>. Did you include it?"}, {"owner": {"reputation": 729, "user_id": 5942006, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1fe054f41dc543395631acc84ac04f60?s=128&d=identicon&r=PG&f=1", "display_name": "systemcpro", "link": "https://stackoverflow.com/users/5942006/systemcpro"}, "edited": false, "score": 2, "creation_date": 1501685857, "post_id": 45464216, "comment_id": 77889383, "body": "s = text    Isn&#39;t &quot;text&quot; just an empty string at this point?"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 1, "creation_date": 1501686658, "post_id": 45464216, "comment_id": 77889993, "body": "You&#39;re writing assignments the wrong way around."}, {"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 0, "creation_date": 1501688230, "post_id": 45464216, "comment_id": 77891234, "body": "Your encryption is the same as your decryption"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1501689062, "post_id": 45464216, "comment_id": 77891865, "body": "Reminder:  characters in C++ are <i>case sensitive</i>, a.k.a &#39;Q&#39; != &#39;q&#39;.  See also &#39;toupper<code>, </code>tolower` and <code>transform</code>."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1501689177, "post_id": 45464216, "comment_id": 77891940, "body": "Looks like you could simplify the code by using a table or <code>std::map</code> (associative container).  Iterate through the container, replacing the original character with the encrypted character.  This will allow easy decryption too, as you replace the encrypted character with the original character."}], "answers": [{"tags": [], "owner": {"reputation": 386, "user_id": 8242696, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30d156727d19a63b70ba89bf028f23e8?s=128&d=identicon&r=PG&f=1", "display_name": "Devin L.", "link": "https://stackoverflow.com/users/8242696/devin-l"}, "is_accepted": false, "score": 0, "last_activity_date": 1501690848, "creation_date": 1501690848, "answer_id": 45466117, "question_id": 45464216, "link": "https://stackoverflow.com/questions/45464216/cipher-code-wont-work/45466117#45466117", "title": "Cipher Code Wont Work", "body": "<p>As mentioned in the comments by @Algirdas Preid\u017eius, you need to include algorithm library. Also, you duplicated this code:</p>\n\n<pre><code>//replaces all characters in the variable \"s\"\nstd::replace(s.begin(), s.end(), 'Q', 'M');\nstd::replace(s.begin(), s.end(), 'E', 'B');\nstd::replace(s.begin(), s.end(), 'T', 'C');\nstd::replace(s.begin(), s.end(), 'U', 'Z');\nstd::replace(s.begin(), s.end(), 'O', 'S');\nstd::replace(s.begin(), s.end(), 'L', 'F');\nstd::replace(s.begin(), s.end(), 'J', 'H');\nstd::replace(s.begin(), s.end(), 'G', 'K');\nstd::replace(s.begin(), s.end(), 'D', 'P');\nstd::replace(s.begin(), s.end(), 'A', 'I');\nstd::replace(s.begin(), s.end(), 'X', 'Y');\nstd::replace(s.begin(), s.end(), 'V', 'R');\nstd::replace(s.begin(), s.end(), 'N', 'W');\nstd::replace(s.begin(), s.end(), ' ', '#');\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 6820923, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ESi6nOoR9Hs/AAAAAAAAAAI/AAAAAAAAABE/GCvUStjnogc/photo.jpg?sz=128", "display_name": "Jacob Gallop", "link": "https://stackoverflow.com/users/6820923/jacob-gallop"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 57, "favorite_count": 0, "answer_count": 1, "score": -5, "last_activity_date": 1501690848, "creation_date": 1501685600, "last_edit_date": 1501690434, "question_id": 45464216, "link": "https://stackoverflow.com/questions/45464216/cipher-code-wont-work", "title": "Cipher Code Wont Work", "body": "<p>I started learning c++ recently and I have been trying to create solutions to challenge myself, one of these challenges was a cipher that encrypts text and eventually saves it to a text file. The code I am currently using will not compile because it wont recognize the replace statement, this is my code so far.</p>\n\n<pre><code>#include \"stdafx.h\"\n#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;Windows.h&gt;\n#include &lt;string&gt;\n\nint main()\n{\n// declare all variables\nstd::string text;\nstd::string s;\nstd::string uncipheredText;\n\n//Introducing the program\nstd::cout &lt;&lt; \"Welcome to Cipher.\" &lt;&lt; std::endl;\n\n//Asks the user to input the text they want to encrypt and saves it to the unciphered text variable.\nstd::cout &lt;&lt; \"Enter the text you want to cipher\" &lt;&lt; std::endl;\nstd::cin &gt;&gt; s;\n\n//replaces all characters in the variable \"s\"\nstd::replace(s.begin(), s.end(), 'Q', 'M');\nstd::replace(s.begin(), s.end(), 'E', 'B');\nstd::replace(s.begin(), s.end(), 'T', 'C');\nstd::replace(s.begin(), s.end(), 'U', 'Z');\nstd::replace(s.begin(), s.end(), 'O', 'S');\nstd::replace(s.begin(), s.end(), 'L', 'F');\nstd::replace(s.begin(), s.end(), 'J', 'H');\nstd::replace(s.begin(), s.end(), 'G', 'K');\nstd::replace(s.begin(), s.end(), 'D', 'P');\nstd::replace(s.begin(), s.end(), 'A', 'I');\nstd::replace(s.begin(), s.end(), 'X', 'Y');\nstd::replace(s.begin(), s.end(), 'V', 'R');\nstd::replace(s.begin(), s.end(), 'N', 'W');\nstd::replace(s.begin(), s.end(), ' ', '#');\n\n\ns = text;\n\nstd::cout &lt;&lt; \"Encrypted Text: \" &lt;&lt; text &lt;&lt; std::endl;\n\n//replaces all characters in the variable \"s\"\nstd::replace(s.begin(), s.end(), 'Q', 'M');\nstd::replace(s.begin(), s.end(), 'E', 'B');\nstd::replace(s.begin(), s.end(), 'T', 'C');\nstd::replace(s.begin(), s.end(), 'U', 'Z');\nstd::replace(s.begin(), s.end(), 'O', 'S');\nstd::replace(s.begin(), s.end(), 'L', 'F');\nstd::replace(s.begin(), s.end(), 'J', 'H');\nstd::replace(s.begin(), s.end(), 'G', 'K');\nstd::replace(s.begin(), s.end(), 'D', 'P');\nstd::replace(s.begin(), s.end(), 'A', 'I');\nstd::replace(s.begin(), s.end(), 'X', 'Y');\nstd::replace(s.begin(), s.end(), 'V', 'R');\nstd::replace(s.begin(), s.end(), 'N', 'W');\nstd::replace(s.begin(), s.end(), ' ', '#');\n\ns = uncipheredText;\n\nstd::cout &lt;&lt; \"Decrypted Text: \" &lt;&lt; uncipheredText &lt;&lt; std::endl;\n\n/*\nofstream myfile;\nmyfile.open(\"dump.txt\");\nmyfile &lt;&lt; text;\nmyfile.close();\n*/\n\nreturn 0;\n}   \n</code></pre>\n"}, {"tags": ["c++", "encryption", "cryptography", "crypto++"], "comments": [{"owner": {"reputation": 79299, "user_id": 589259, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/vJbKg.jpg?s=128&g=1", "display_name": "Maarten Bodewes", "link": "https://stackoverflow.com/users/589259/maarten-bodewes"}, "edited": false, "score": 0, "creation_date": 1501707270, "post_id": 45464198, "comment_id": 77902663, "body": "Well, an AES key consists of bytes/bits, so <code>ArraySource</code> should be more logical. The encryption of a key is also called key wrapping, but a quick search on the internet doesn&#39;t display any direct results. As Crypto++ is a software library there is little difference in encrypting bytes or a key, so that would explain the missing sample code for this."}], "answers": [{"comments": [{"owner": {"reputation": 247, "user_id": 8096090, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/o1UZC.jpg?s=128&g=1", "display_name": "EinderJam", "link": "https://stackoverflow.com/users/8096090/einderjam"}, "edited": false, "score": 0, "creation_date": 1501770793, "post_id": 45483381, "comment_id": 77935481, "body": "Thank you ! yes,i wanted to use &quot;cipher&quot; to hold the aes key in encrypted form,but with your 1st example and FileSink i don&#39;t need it anymore ! I&#39;m now trying to add the decryption part,that&#39;s to say read the key from &quot;sessionkey.enc&quot;,decrypt it using the private key,and then compare the original and the decrypted key to check if all the process is correct. To read and decrypt the key,is that correct ? ` \tCryptoPP::StringSource(readed_key, true, new CryptoPP::PK_DecryptorFilter(rng, decryptor, new CryptoPP::FileSource(&quot;sessionkey.enc&quot;)));` ,or do i need to use something else than FileSource ?"}], "tags": [], "owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "is_accepted": true, "score": 3, "last_activity_date": 1501791845, "last_edit_date": 1501791845, "creation_date": 1501761094, "answer_id": 45483381, "question_id": 45464198, "link": "https://stackoverflow.com/questions/45464198/encrypt-a-symmetric-aes-key-with-rsa-in-crypto/45483381#45483381", "title": "Encrypt a symmetric AES key with RSA in Crypto++", "body": "<blockquote>\n  <p>... after I don't know what to use : CryptoPP::ArraySource ? CryptoPP::StringSource ?</p>\n</blockquote>\n\n<p>After this, use a <code>PK_EncryptorFilter</code> for the RSA encryptor; and use an <code>ArraySource</code> for the key you are trying to encrypt. An <code>ArraySource</code> is just a typedef for a <code>StringSource</code>, so you are really just using a <code>StringSource</code>.</p>\n\n<p>The code would look something like the following. I did not run the examples, so please fix the typos.</p>\n\n<pre><code>SecByteBlock key(AES::MAX_KEYLENGTH);\nrng.GenerateBlock(key, key.size());\n...\n\nRSAES_OAEP_SHA_Encryptor encryptor(publicKey);\n...\n\nArraySource as(key, key.size(), true, /* pump all data */\n    new PK_EncryptorFilter(rng, encryptor,\n        new FileSink(\"session-key.enc\")));\n</code></pre>\n\n<p>You can write it to a <code>std::string</code> with something like:</p>\n\n<pre><code>std::string session_key;\nArraySource as(key, key.size(), true, /* pump all data */\n    new PK_EncryptorFilter(rng, encryptor,\n        new StringSink(session_key)));\n</code></pre>\n\n<p>You could also get fancy and use a <code>ByteQueue</code>. The <code>Redirector</code> breaks the ownership chain. Also see <a href=\"https://www.cryptopp.com/wiki/Redirector\" rel=\"nofollow noreferrer\"><code>Redirector</code></a> on the Crypto++ wiki.</p>\n\n<pre><code>ByteQueue queue;\nArraySource as(key, key.size(), true, /* pump all data */\n    new PK_EncryptorFilter(rng, encryptor,\n        new Redirector(queue)));\n</code></pre>\n\n<p><code>ByteQueue</code> are cool because they wrap <code>SecByteBlock</code>. Once in a <code>ByteQueue</code> you can move the bytes around with <code>TransferTo</code> and <code>CopyTo</code>:</p>\n\n<pre><code>ByteQueue queue;\nArraySource as(key, key.size(), true, /* pump all data */\n    new PK_EncryptorFilter(rng, encryptor,\n        new Redirector(queue)));\n\n// Copy bytes to a file\nFileSink sink1(\"session-key.enc\");\nqueue.CopyTo(sink1);\n\n// Copy bytes to std::out\nHexEncoder encoder(new FileSink(std::cout));\nqueue.CopyTo(encoder);\n\n// Transfer bytes to a SecByteBlock.\nSecByteBlock block(queue.MaxRetrievable());\nArraySink sink2(block, block.size());\nqueue.TransferTo(sink2);\n// No bytes remain in the queue\n</code></pre>\n\n<p>You might also be interested in <a href=\"https://www.cryptopp.com/wiki/Pipelining\" rel=\"nofollow noreferrer\">Pipelines</a> on the Crypto++ wiki. The stuff you see above are sources, filters and sinks used in a pipeline.</p>\n\n<hr>\n\n<p>If this is supposed to hold the encrypted symmetric key, then its too small:</p>\n\n<pre><code>SecByteBlock cipher(AES::MAX_KEYLENGTH);\n</code></pre>\n\n<p>Take a look at <a href=\"https://www.cryptopp.com/wiki/RSA_Encryption_Schemes\" rel=\"nofollow noreferrer\">RSA Encryption Schemes</a> on the Crypto++ wiki. <code>cipher</code> needs to be <code>encryptor.CiphertextLength(AES::MAX_KEYLENGTH);</code>, which is roughly the size of the RSA modulus minus about 50 bytes for the OAEP formatting and padding.</p>\n\n<hr>\n\n<blockquote>\n  <p>(comment) > Now I am trying to add the part to decrypt it using the private key... Is this correct ? </p>\n\n<pre><code>StringSource(readed_key, true,\n    new PK_DecryptorFilter(rng, decryptor, new \n        FileSource(\"sessionkey.enc\")));\n</code></pre>\n</blockquote>\n\n<p>Well, the filter part is correct (the <code>PK_DecryptorFilter</code> part). In Crypto++, data flows from a source to a sink. So the general pattern is as shown below. Its called a <a href=\"https://www.cryptopp.com/wiki/Pipelining\" rel=\"nofollow noreferrer\">Pipeline</a>.</p>\n\n<pre><code>Source(..., new Filter(..., new Filter(..., new Sink(...))));\n</code></pre>\n\n<p>Usually you want something like the following. The <code>Redirector</code> breaks the ownership chain. Also see <a href=\"https://www.cryptopp.com/wiki/Redirector\" rel=\"nofollow noreferrer\"><code>Redirector</code></a> on the Crypto++ wiki.</p>\n\n<pre><code>// decrypted, in-memory\nSecByteBlock session_key(AES::MAX_KEYLENGTH);\nArraySink sink(session_key, session_key.size());\n\nFileSource fs(\"sessionkey.enc\", true,\n    new PK_DecryptorFilter(rng, decryptor, \n        new Redirector(sink)));\n</code></pre>\n\n<hr>\n\n<blockquote>\n  <p>(comment) > ... and then compare the original ...</p>\n</blockquote>\n\n<p>You can compare two byte buffers in nearly constant time with <a href=\"https://www.cryptopp.com/wiki/VerifyBufsEqual\" rel=\"nofollow noreferrer\"><code>VerifyBufsEqual</code></a>. Again, see the Crypto++ wiki.</p>\n"}], "owner": {"reputation": 247, "user_id": 8096090, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/o1UZC.jpg?s=128&g=1", "display_name": "EinderJam", "link": "https://stackoverflow.com/users/8096090/einderjam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1437, "favorite_count": 2, "accepted_answer_id": 45483381, "answer_count": 1, "score": 3, "last_activity_date": 1520530142, "creation_date": 1501685544, "last_edit_date": 1520530142, "question_id": 45464198, "link": "https://stackoverflow.com/questions/45464198/encrypt-a-symmetric-aes-key-with-rsa-in-crypto", "title": "Encrypt a symmetric AES key with RSA in Crypto++", "body": "<p>I'm trying to exchange an AES key between two parts.The AES key would be encrypted with receiver's RSA <code>publicKey</code> and then written to a file.</p>\n\n<p>I'm using Crypto++ library,and here is the beginning of my program:</p>\n\n<pre><code>//generate key pair\nCryptoPP::AutoSeededRandomPool rng;\nCryptoPP::RSAES_OAEP_SHA_Decryptor priv(rng, 4096);\n\nRSA::PrivateKey privateKey(params);\nRSA::PublicKey publicKey(params);\n\n//generate aes key (256bits)\nSecByteBlock key(AES::MAX_KEYLENGTH);\nrnd.GenerateBlock(key, key.size());\n</code></pre>\n\n<p>(You will recognize Crypto++ wiki example)</p>\n\n<p>Then I start the encryption routine:</p>\n\n<pre><code>CryptoPP::SecByteBlock cipher(CryptoPP::AES::MAX_KEYLENGTH), decrypted_data(CryptoPP::AES::MAX_KEYLENGTH);\n\nCryptoPP::RSAES_OAEP_SHA_Encryptor e(publicKey);\n</code></pre>\n\n<p>I don't know which one to use: <code>CryptoPP:: ArraySource</code> or <code>CryptoPP::StringSource</code>?</p>\n"}, {"tags": ["c++", "build", "clang", "compile-time"], "comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1501685352, "post_id": 45464067, "comment_id": 77888967, "body": "Questions asking us to recommend or find a book, tool, software library, tutorial or other off-site resource are off-topic for Stack Overflow as they tend to attract opinionated answers and spam. Instead, describe the problem and what has been done so far to solve it."}, {"owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 0, "creation_date": 1501685391, "post_id": 45464067, "comment_id": 77888988, "body": "There is a plugin for visual studio called <a href=\"https://marketplace.visualstudio.com/items?itemName=Wumpf.IncludeToolbox\" rel=\"nofollow noreferrer\">IncludeToolbox</a> that has a &quot;try and remove includes&quot; feature that I&#39;ve used with moderate success. Just removes headers and re-iterates compiling to see if they were needed. (if you have some downtime on your machine)"}, {"owner": {"reputation": 21118, "user_id": 157971, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/8cbf41a630b52f45e9b54e0ee1445f76?s=128&d=identicon&r=PG", "display_name": "void.pointer", "link": "https://stackoverflow.com/users/157971/void-pointer"}, "edited": false, "score": 0, "creation_date": 1501685618, "post_id": 45464067, "comment_id": 77889175, "body": "FWIW I&#39;ve already seen the SO question linked as a duplicate to my own. It doesn&#39;t really help. I guess I&#39;ll try my luck on reddit, they&#39;re slightly less anal about questions like this."}], "owner": {"reputation": 21118, "user_id": 157971, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/8cbf41a630b52f45e9b54e0ee1445f76?s=128&d=identicon&r=PG", "display_name": "void.pointer", "link": "https://stackoverflow.com/users/157971/void-pointer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 24, "favorite_count": 0, "closed_date": 1501685527, "answer_count": 0, "score": 0, "last_activity_date": 1501685205, "creation_date": 1501685205, "question_id": 45464067, "link": "https://stackoverflow.com/questions/45464067/analyzing-include-directives-for-slow-builds-of-translation-units", "closed_reason": "Duplicate", "title": "Analyzing include directives for slow builds of translation units", "body": "<p>I've been doing a lot of googling to figure out various ways I could analyze my include directives per translation unit to determine why my overall build is so slow. The entire project consists of around 800 translation units, and when combined with the number of header files we maintain and use (e.g. third party) it's difficult to track exactly what we're including at the top-level that may be included by most translation units being built that do not even need it. I feel like eliminating needless includes will help bring our build times down.</p>\n\n<p>Can anyone suggest any techniques or tools that may be useful in analyzing unnecessary includes? For example, maybe something that prints which headers are included the most in descending order across the whole project build (all translation units)? It would be even better if such a tool could provide statistics such as \" included by 600 translation units and not needed by 90% of them\". I do not want to use precompiled headers, so I feel like this is my only option (eliminate unnecessary includes and redesign headers to make use of the pimpl idiom to improve build times).</p>\n\n<p>Note I'm using clang as my compiler on linux &amp; android (NDK). I also build with MSVC on the Windows platform.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 1, "creation_date": 1501685071, "post_id": 45463958, "comment_id": 77888739, "body": "What <i>compiler</i> (probably <a href=\"http://gcc.gnu.org/\" rel=\"nofollow noreferrer\">GCC</a>...) and <i>version</i> are you using? DevCpp is only an IDE..."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 2, "creation_date": 1501685111, "post_id": 45463958, "comment_id": 77888766, "body": "Did you try to run your program in some command window?"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1501688732, "post_id": 45463958, "comment_id": 77891617, "body": "This could be caused by your antivirus."}], "answers": [{"tags": [], "owner": {"reputation": 386, "user_id": 8242696, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30d156727d19a63b70ba89bf028f23e8?s=128&d=identicon&r=PG&f=1", "display_name": "Devin L.", "link": "https://stackoverflow.com/users/8242696/devin-l"}, "is_accepted": false, "score": 0, "last_activity_date": 1501692338, "creation_date": 1501692338, "answer_id": 45466589, "question_id": 45463958, "link": "https://stackoverflow.com/questions/45463958/console-window-not-opening-in-dev-c-even-with-getch-too/45466589#45466589", "title": "Console Window not Opening in Dev C++? Even with getch() too?", "body": "<p>Depending on what compiler you are using, you might want to try using _getch() or getchar() instead of getch().</p>\n"}], "owner": {"reputation": 71, "user_id": 8211909, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/9054c3452281923401dd759840345cbb?s=128&d=identicon&r=PG&f=1", "display_name": "pokemon", "link": "https://stackoverflow.com/users/8211909/pokemon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 229, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1501692338, "creation_date": 1501684915, "last_edit_date": 1501685044, "question_id": 45463958, "link": "https://stackoverflow.com/questions/45463958/console-window-not-opening-in-dev-c-even-with-getch-too", "title": "Console Window not Opening in Dev C++? Even with getch() too?", "body": "<p>I am using Dev cpp 5.1 and it is not opening console window on running the program. One of the basic program which I tried is </p>\n\n<pre><code>#include&lt;iostream&gt;\n#include&lt;conio.h&gt;\n\n  using namespace std;\n\nint main() {\n  cout&lt;&lt;\"A\";\n  getch();\n}\n</code></pre>\n"}, {"tags": ["c++", "class", "oop", "c++14"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2672107"}, "edited": false, "score": 1, "creation_date": 1501683932, "post_id": 45463533, "comment_id": 77887764, "body": "Dont implement templates in a seperate cpp."}, {"owner": {"reputation": 1755, "user_id": 5986881, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/7a607dd49a0116e3ba869a66d6fd1ba0?s=128&d=identicon&r=PG", "display_name": "Samer Tufail", "link": "https://stackoverflow.com/users/5986881/samer-tufail"}, "edited": false, "score": 0, "creation_date": 1501683983, "post_id": 45463533, "comment_id": 77887804, "body": "in your header did you include the templated implementation/cpp file?"}, {"owner": {"reputation": 952, "user_id": 5449818, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eYyPG.jpg?s=128&g=1", "display_name": "ikleschenkov", "link": "https://stackoverflow.com/users/5449818/ikleschenkov"}, "edited": false, "score": 0, "creation_date": 1501684314, "post_id": 45463533, "comment_id": 77888097, "body": "Duplication of <a href=\"https://stackoverflow.com/questions/9191210/templates-and-separate-compilation\" title=\"templates and separate compilation\">stackoverflow.com/questions/9191210/&hellip;</a>"}, {"owner": {"reputation": 1727, "user_id": 3166476, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/tU6SH.jpg?s=128&g=1", "display_name": "lakeweb", "link": "https://stackoverflow.com/users/3166476/lakeweb"}, "edited": false, "score": 0, "creation_date": 1501684656, "post_id": 45463533, "comment_id": 77888395, "body": "Think about it. How can <code>graph&lt;T&gt;::graph()</code> be compiled in isolation. The type is not known so there is nothing to compile. The error should be clearer, with vs14 <code>unrecognizable template declaration&#47;definition</code>"}], "owner": {"reputation": 13, "user_id": 5994685, "user_type": "registered", "profile_image": "https://graph.facebook.com/1272092559484614/picture?type=large", "display_name": "YMY", "link": "https://stackoverflow.com/users/5994685/ymy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1129, "favorite_count": 0, "closed_date": 1501683902, "answer_count": 0, "score": 1, "last_activity_date": 1501685825, "creation_date": 1501683783, "last_edit_date": 1501685825, "question_id": 45463533, "link": "https://stackoverflow.com/questions/45463533/c-undefined-reference-to-constructor", "closed_reason": "Duplicate", "title": "c++ undefined reference to constructor", "body": "<p>I am  making a class for graph, maybe i am not doing it the best way but the idea was to start for somewhere. \nI have this class graph.h</p>\n\n<pre><code>template &lt;class T&gt;\nstruct node\n{\n    int index;\n    T name;\n    vector&lt;int&gt; neighbours;\n};\n\nstruct lengths{\n    int node_1;\n    int node_2;\n    int length;\n};\n\ntemplate &lt;class T&gt;\nclass graph : public vector&lt;node&lt;T&gt;&gt;\n{\n     public:\n        graph();\n\n     ...\n}\n</code></pre>\n\n<p>and graph.cpp</p>\n\n<pre><code>template &lt;class T&gt;\ngraph&lt;T&gt;::graph(){\n    directed = false;     //flag for dir graph, default false\n    nodes = 0;               //number of nodes in the graph\n\n}\n</code></pre>\n\n<p>and in main i have </p>\n\n<pre><code>graph&lt;int&gt; g;\n</code></pre>\n\n<p>but when i try to build it i get error</p>\n\n<pre><code>main.cpp undefined reference to `graph&lt;char&gt;::graph()'\n</code></pre>\n\n<p>I use GNU GCC Compiler [-std=c++14]</p>\n"}, {"tags": ["c++", "pointers", "memory-management", "destructor"], "comments": [{"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1501682861, "post_id": 45463177, "comment_id": 77886959, "body": "Don&#39;t conflate &quot;value&quot; with &quot;memory&quot;. A destructor call (should) only invalidates the value of the object."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1501682871, "post_id": 45463177, "comment_id": 77886970, "body": "A destructor <i>only</i> destroys and cleans up the object. It does not deallocate the memory. That&#39;s managed by a separate mechanism, outside the desctructor."}, {"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 2, "creation_date": 1501682889, "post_id": 45463177, "comment_id": 77886978, "body": "I recommend reading this: <a href=\"https://isocpp.org/wiki/faq/dtors\" rel=\"nofollow noreferrer\">isocpp.org/wiki/faq/dtors</a>"}, {"owner": {"reputation": 752, "user_id": 7654030, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/852379ca630c9bca3c121b1e54ad4a19?s=128&d=identicon&r=PG&f=1", "display_name": "Austin_Anderson", "link": "https://stackoverflow.com/users/7654030/austin-anderson"}, "edited": false, "score": 0, "creation_date": 1501683286, "post_id": 45463177, "comment_id": 77887293, "body": "@matrixisreal you never allocate any memory on the heap, and your referencing a stack variable that goes out of scope, that variable&#39;s memory is cleaned up then completely separate from your destructor"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1501683861, "post_id": 45463177, "comment_id": 77887711, "body": "I do not agree with duplicates. They talk about accessing object after it has been deleted, but the question is &quot;Does the Destructor just deallocates the memory or actually deletes the object&quot;. Provided duplicates do not answer this question."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1501684107, "post_id": 45463177, "comment_id": 77887898, "body": "@SergeyA this is exact duplicate of <a href=\"https://stackoverflow.com/questions/6441218/can-a-local-variables-memory-be-accessed-outside-its-scope/6445794#6445794\" title=\"can a local variables memory be accessed outside its scope\">stackoverflow.com/questions/6441218/&hellip;</a>"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1501684254, "post_id": 45463177, "comment_id": 77888039, "body": "@Slava, how does the answer in this question answer the question &#39;does destructor deallocates the memory&#39;? (sorry for alliterations)"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1501684979, "post_id": 45463177, "comment_id": 77888657, "body": "@SergeyA it perfectly answers &quot;Doesn&#39;t this mean that the object isn&#39;t deleted yet.&quot; and explains why OP observes such behavoir."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1501685006, "post_id": 45463177, "comment_id": 77888685, "body": "@Slava, doesn&#39;t answer the plain question in the title."}, {"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 0, "creation_date": 1501688387, "post_id": 45463177, "comment_id": 77891354, "body": "If it freed the memory, then you&#39;d never have much use for placement new"}], "answers": [{"tags": [], "owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "is_accepted": false, "score": 1, "last_activity_date": 1501682930, "creation_date": 1501682930, "answer_id": 45463238, "question_id": 45463177, "link": "https://stackoverflow.com/questions/45463177/c-does-the-destructor-just-deallocate-the-memory-or-does-it-actually-delete/45463238#45463238", "title": "C++ - Does the Destructor just deallocate the memory or does it actually delete the object?", "body": "<p>It is undefined behavior to use <code>namePointer</code> after that block because it is a <a href=\"https://stackoverflow.com/questions/17997228/what-is-a-dangling-pointer\">dangling pointer</a>. How it behaves after that (correctly or incorrectly) can change on different machines, compilers, etc.</p>\n\n<p>Overriding the destructor to output some text won't change the fact that the object's memory is still deallocated. So in this case the destructor of <code>n</code> will be called at the end of the block, which will delete the object and its member variables.</p>\n"}, {"comments": [{"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1501684620, "post_id": 45463520, "comment_id": 77888360, "body": "I would just say &quot;memory&quot;, not &quot;physical memory&quot; since most of the time it is <i>virtual memory</i> (not physical RAM)"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1501684860, "post_id": 45463520, "comment_id": 77888560, "body": "@BasileStarynkevitch, going too much into too deep. One might argue that virtual memory is also physical in a plain sense, since it is backed by RAM (or any other memory like MMC) or swap - both of which are quite physical. My point was that storage is material, so to say. I do not know how properly express this, I am afraid, we can not really define what &#39;material&#39; means."}], "tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": true, "score": 3, "last_activity_date": 1501684352, "last_edit_date": 1501684352, "creation_date": 1501683749, "answer_id": 45463520, "question_id": 45463177, "link": "https://stackoverflow.com/questions/45463177/c-does-the-destructor-just-deallocate-the-memory-or-does-it-actually-delete/45463520#45463520", "title": "C++ - Does the Destructor just deallocate the memory or does it actually delete the object?", "body": "<p>In C++ parlance, two separate concepts are 'object lifetime' and 'storage duration'. A duration is pretty much the same as lifetime, but Standard uses two distinct words here. Storage refers to the physical memory occupied by the object, while object lifetime refers to the time when it is allowed to access the object.</p>\n\n<p>With this in mind, one has two understand that constructor and destructor determine object lifetime - it is not allowed to access the object before constructor was called and after destructor was called, and do not say anything about storage lifetime. It is obvious that storage duration (or lifetime) should not be smaller than object lifetime - once can not access object that has no physical representation - but can be longer than it. </p>\n\n<p>It is easily seen when <code>placement new</code> is used together with explicit destructor call - storage remains available, but the object has gone.</p>\n"}, {"tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": false, "score": 5, "last_activity_date": 1501688769, "last_edit_date": 1501688769, "creation_date": 1501685412, "answer_id": 45464141, "question_id": 45463177, "link": "https://stackoverflow.com/questions/45463177/c-does-the-destructor-just-deallocate-the-memory-or-does-it-actually-delete/45464141#45464141", "title": "C++ - Does the Destructor just deallocate the memory or does it actually delete the object?", "body": "<blockquote>\n  <p>Does the Destructor just deallocates the memory or actually deletes the object</p>\n</blockquote>\n\n<p>A destructor calls the destructors of subobjects (if any), executes the destructor body (if it is defined). It is technically not the destructor that deallocates the memory. The destrcutor can be called without deallocation, and memory can be deallocated without the call to a destructor.</p>\n\n<p>When a dynamic object is deleted with operator <code>delete</code>, the destructor will be called, and then the memory is deallocated. Likewise, when the life time of an automatic variable (such as your <code>n</code>) ends, its destructor is called, and the memory is deallocated.</p>\n\n<p>It is unclear what you mean by <em>\"deletes the object\"</em>. A destructor will never call the <code>delete</code> operator (unless the body of the destructor {,of a sub object} sub object calls <code>delete</code> operator, but then it is not <code>this</code> that is deleted).</p>\n\n<p>If you mean whether destructor <em>destroys</em> the object, then it is the other way 'round: When an object is being destroyed, its destructor will be called.</p>\n\n<blockquote>\n  <ol>\n  <li>... But the pointer points to the same object</li>\n  </ol>\n</blockquote>\n\n<p>The pointer points to where the object was. That object has been destroyed and no longer exists.</p>\n\n<blockquote>\n  <p>... and its member functions are still accessible.</p>\n</blockquote>\n\n<p>Accessibility of a member function does not depend on what is being pointed. Dereferencing a pointer (including calling a member function) that does not point to an object has undefined behaviour.</p>\n\n<blockquote>\n  <p>Doesn't this mean that the object isn't deleted yet?</p>\n</blockquote>\n\n<p>No. You can't make conclusions from undefined behaviour.</p>\n\n<blockquote>\n  <ol start=\"2\">\n  <li>Does overriding the destructor function ...</li>\n  </ol>\n</blockquote>\n\n<p>This is not <em>overriding</em>. Overriding is a specific language term that involves inheritance and virtual functions.</p>\n\n<p>What you have done is define a destructor.</p>\n\n<blockquote>\n  <ol start=\"2\">\n  <li>... and doing nothing in it (here in ~name()), prevent the object from being deleted?</li>\n  </ol>\n</blockquote>\n\n<p>No. Doing nothing in the body of the destructor is exactly the same what the implicit destructor does (the one that the object had when you left the destructor undefined). It does not \"prevent the object form being deleted\".</p>\n"}, {"comments": [{"owner": {"reputation": 5162, "user_id": 2785528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fc85984f1234637fa4ec24d93ae51bc?s=128&d=identicon&r=PG&f=1", "display_name": "2785528", "link": "https://stackoverflow.com/users/2785528/2785528"}, "edited": false, "score": 0, "creation_date": 1501689536, "post_id": 45465643, "comment_id": 77892197, "body": "UB - in this case, it is the use of a dangling pointer, a pointer to an object that has been dtor&#39;d"}], "tags": [], "owner": {"reputation": 5162, "user_id": 2785528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fc85984f1234637fa4ec24d93ae51bc?s=128&d=identicon&r=PG&f=1", "display_name": "2785528", "link": "https://stackoverflow.com/users/2785528/2785528"}, "is_accepted": false, "score": 1, "last_activity_date": 1501728439, "last_edit_date": 1501728439, "creation_date": 1501689418, "answer_id": 45465643, "question_id": 45463177, "link": "https://stackoverflow.com/questions/45463177/c-does-the-destructor-just-deallocate-the-memory-or-does-it-actually-delete/45465643#45465643", "title": "C++ - Does the Destructor just deallocate the memory or does it actually delete the object?", "body": "<blockquote>\n  <p>1 ... Doesn't this mean that the object isn't deleted yet? </p>\n</blockquote>\n\n<p>No.</p>\n\n<blockquote>\n  <p>2 ... Does overriding the destructor function, and doing nothing in it (here > in ~name()), prevent the object from being deleted?</p>\n</blockquote>\n\n<p>No.</p>\n\n<p>cout's are your friends.</p>\n\n<p>Here is my version of your code (I have applied my coding standards for names)</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nclass Name_t\n{\n   int m_data;\npublic:\n   Name_t(int data) : m_data(data) {\n      std::cout &lt;&lt; \"\\n  Name_t::ctor\" &lt;&lt; std::endl;\n   }\n   ~Name_t() {\n      std::cout &lt;&lt; \"\\n  Name_t::dtor\" &lt;&lt; std::endl;\n   }\n\n   void cout() { std::cout &lt;&lt; \"\\n  Name_t.cout() \"\n                           &lt;&lt; m_data &lt;&lt; std::endl; }\n};\n\nclass T517_t\n{\npublic:\n   T517_t() = default;\n   ~T517_t() = default;\n\n   int exec()\n      {\n         Name_t* Name_tPointer = nullptr;\n         {\n            Name_t n(5);\n            Name_tPointer = &amp;n;\n         }\n         Name_tPointer-&gt;cout();\n         return(0);\n      }    \n}; // class T517_t\n\nint main(int , char** )\n{\n   int retVal = -1;\n   {\n      T517_t   t517;\n      retVal = t517.exec();\n   }\n   return(retVal);\n}\n</code></pre>\n\n<p>Running this, you see both ctor and dtor run before the UB (undefined behavior).</p>\n\n<pre><code>  Name_t::ctor\n\n  Name_t::dtor\n\n  Name_t.cout() 5\n</code></pre>\n\n<p>Another indicator (via cout) is to clear or invalidate the data in the dtor ... I seldom do this except during diagnostics.</p>\n\n<p>Replace dtor with</p>\n\n<pre><code>   ~Name_t() {\n      m_data = -1;\n      std::cout &lt;&lt; \"\\n  Name_t::dtor\" &lt;&lt; std::endl;\n   }\n</code></pre>\n\n<p>One can see that the dtor has invalidated your data.</p>\n\n<pre><code>  Name_t::ctor\n\n  Name_t::dtor\n\n  Name_t.cout() -1\n</code></pre>\n\n<blockquote>\n  <p>Does destructor deallocate memory?</p>\n</blockquote>\n\n<p>Which memory?  </p>\n\n<p>No - The dtor of the object does not deallocate the object. </p>\n\n<p>Yes - The dtor of the object should deallocate any memory allocated in the ctor (Ying and Yang) unless already deleted by some other method of the instance.</p>\n"}], "owner": {"reputation": 183, "user_id": 8015404, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bafe5227c8f3c4c19c1dbc86b4baaa87?s=128&d=identicon&r=PG&f=1", "display_name": "matrixisreal", "link": "https://stackoverflow.com/users/8015404/matrixisreal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2775, "favorite_count": 2, "accepted_answer_id": 45463520, "answer_count": 4, "score": 3, "last_activity_date": 1501728439, "creation_date": 1501682752, "last_edit_date": 1501692424, "question_id": 45463177, "link": "https://stackoverflow.com/questions/45463177/c-does-the-destructor-just-deallocate-the-memory-or-does-it-actually-delete", "title": "C++ - Does the Destructor just deallocate the memory or does it actually delete the object?", "body": "<p>To check this, I have run this small test code.</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nclass name {\npublic:\n  int data;\n  name(int data) {\n    this-&gt;data = data;\n  }\n  void printData() {\n    cout &lt;&lt; data &lt;&lt; endl;\n  }\n};\n\nint main() {\n  name* namePointer;\n  {\n    name n(5);\n    namePointer = &amp;n;\n  }\n  namePointer-&gt;printData();\n}\n</code></pre>\n\n<p>So, two questions:</p>\n\n<ol>\n<li><p>The <code>name</code> object <code>n</code> is created in the block inside <code>main</code> and its pointer is saved, to make sure its destructor is called when we get out of the block. But the pointer points to the same object and its member functions are still accessible. Doesn't this mean that the object isn't deleted yet?</p></li>\n<li><p>Say I add this to my <code>name</code> class:</p>\n\n<pre><code>~name() {\n    cout &lt;&lt; \"destructor called\" &lt;&lt; endl;\n}\n</code></pre>\n\n<p>Does overriding the destructor function, and doing nothing in it (here in <code>~name()</code>), prevent the object from being deleted?</p></li>\n</ol>\n\n<p>Edit: Thanks for the responses, it really helped. But May I know the reason for these down votes, I think this is a really good question. \u00af_(\u30c4)_/\u00af</p>\n"}, {"tags": ["c++", "design-patterns", "polymorphism", "abstract-class"], "comments": [{"owner": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "edited": false, "score": 0, "creation_date": 1501687112, "post_id": 45463160, "comment_id": 77890368, "body": "Why do you have this many levels of indirection in equality comparison?"}, {"owner": {"reputation": 821, "user_id": 4608626, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/1fbbe6bbba08a5ebef91ded5974667be?s=128&d=identicon&r=PG", "display_name": "wesanyer", "link": "https://stackoverflow.com/users/4608626/wesanyer"}, "reply_to_user": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "edited": false, "score": 0, "creation_date": 1501687317, "post_id": 45463160, "comment_id": 77890543, "body": "The first level is in order to avoid making <code>A</code> a template class: thus, I&#39;ve moved the actual logic to <code>A_</code>. The second level, i.e. using <code>A::checkEquality_</code>  is in order to make a distinction between <code>A</code>s publicly exposed methods and the portions that need to be ridden by sub-clases (per the &#39;template method pattern&#39;)."}], "answers": [{"tags": [], "owner": {"reputation": 46, "user_id": 3910497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67bb617a5e5ad12a0ea8e7b073b7ce05?s=128&d=identicon&r=PG&f=1", "display_name": "user3910497", "link": "https://stackoverflow.com/users/3910497/user3910497"}, "is_accepted": false, "score": 0, "last_activity_date": 1501706705, "creation_date": 1501706705, "answer_id": 45470679, "question_id": 45463160, "link": "https://stackoverflow.com/questions/45463160/how-can-i-define-a-parent-class-to-reduce-code-duplication-while-using-an-abstra/45470679#45470679", "title": "How can I define a parent class to reduce code duplication while using an abstract class with an equality operator definition?", "body": "<p>If you can allow <code>Letter</code> to be a template, you can simply have <code>A</code> inherit from a template base:</p>\n\n<pre><code>template&lt;class T&gt;\nclass Letter\n{   \npublic:\n    bool operator==(const Letter&lt;T&gt;&amp; t) const {\n        const T&amp; t1 = static_cast&lt;const T&amp;&gt;(*this);\n        const T&amp; t2 = static_cast&lt;const T&amp;&gt;(t);\n        return t1.checkEquality_(t2);\n    }\nprivate:\n    virtual bool checkEquality_(const T&amp; a) const = 0;\n};\n\nclass A : public Letter&lt;A&gt;\n{\n    public:\n        virtual ~A() = 0;\n        void performTasksSpecificToA();\n};\n...\n</code></pre>\n\n<p>If you absolutely need a common <code>Letter</code>, you probably have to add another layer of CRTP like you did with <code>A_</code> and <code>A</code>.</p>\n"}], "owner": {"reputation": 821, "user_id": 4608626, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/1fbbe6bbba08a5ebef91ded5974667be?s=128&d=identicon&r=PG", "display_name": "wesanyer", "link": "https://stackoverflow.com/users/4608626/wesanyer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 58, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1501706705, "creation_date": 1501682703, "question_id": 45463160, "link": "https://stackoverflow.com/questions/45463160/how-can-i-define-a-parent-class-to-reduce-code-duplication-while-using-an-abstra", "title": "How can I define a parent class to reduce code duplication while using an abstract class with an equality operator definition?", "body": "<p>I have below as 'simple' of an example of what I am trying to do as I could think up. I have an abstract class <code>A</code> which exposes a public interface to the world with two methods: <code>operator==</code> and <code>performTasksSpecificToA</code>. You can see that I'm using the 'Template Method Pattern' as well as the 'curiously recurring template pattern' in order to ensure that users of <code>A</code> don't need to worry about the implementation of <code>A</code>, in other words <code>AImpl</code>, while still being able to check equality against two instances of <code>AImpl</code>. See <a href=\"https://stackoverflow.com/questions/1691007/whats-the-right-way-to-overload-operator-for-a-class-hierarchy/26070512#26070512\">this answer on SO</a> for  a bit more information and context on this approach.</p>\n\n<p>Now, suppose I wish to define a class <code>B</code> as follows:</p>\n\n<pre><code>    class B\n{\n    public:\n        virtual ~B() = 0;\n\n        bool operator(const B&amp; b) const;\n        void performTasksSpecificToB();\n};\n</code></pre>\n\n<p>As you can see, class <code>B</code> shares the same problem as <code>A</code> in terms of defining a public <code>operator==</code> for comparing sub-classes. How can I define a parent-class, let's call it <code>Letter</code>, in order to avoid duplicating code between <code>A</code> and <code>B</code>?</p>\n\n<hr>\n\n<p>Here is my 'simple example', which compiles and runs.</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nclass A\n{\n    public:\n        virtual ~A() = 0;\n\n        bool operator==(const A&amp; a) const;\n        void performTasksSpecificToA();\n    private:\n        virtual bool checkEquality_(const A&amp; a) const = 0;\n};\n\ntemplate &lt;class T&gt;\nclass A_ : public A\n{\n    protected:\n        bool checkEquality_(const A&amp; a) const override;\n    private:\n        virtual bool checkEquality(const T&amp; t) const = 0;\n};\n\nclass AImpl : public A_&lt;AImpl&gt;\n{\n    public:\n        AImpl(int val) : val(val){};\n        bool checkEquality(const AImpl&amp; anAImpl) const override;\n    private:\n        int val;\n};\n\nA::~A(){}\n\nbool A::operator==(const A&amp; a) const{\n    return checkEquality_(a);\n}\n\ntemplate &lt;class T&gt;\nbool A_&lt;T&gt;::checkEquality_(const A&amp; a) const{\n    const T* other = dynamic_cast&lt;const T*&gt;(&amp;a);\n    if (other != nullptr){\n        const T&amp; me = static_cast&lt;const T&amp;&gt;(*this);\n        return other-&gt;checkEquality(me);\n    }\n    return false;\n}\n\nbool AImpl::checkEquality(const AImpl&amp; anAImpl) const{\n    return val == anAImpl.val;\n}\n\nint main(){\n    // factory:\n    AImpl* aImpl1 = new AImpl(1);\n    AImpl* aImpl2 = new AImpl(2);\n    AImpl* aImpl3 = new AImpl(1);\n\n    // client:\n    A&amp; A1 = *aImpl1;\n    A&amp; A2 = *aImpl2;\n    A&amp; A3 = *aImpl3;\n\n\n    std::cout &lt;&lt; \"A1 == A2 -&gt; \";\n    std::cout &lt;&lt; (A1 == A2 ? \"true\" : \"false\");\n    std::cout &lt;&lt; std::endl;\n\n\n    std::cout &lt;&lt; \"A1 == A3 -&gt; \";\n    std::cout &lt;&lt; (A1 == A3 ? \"true\" : \"false\");\n    std::cout &lt;&lt; std::endl; \n\n    delete aImpl1;\n    delete aImpl2;\n    delete aImpl3;\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["java", "c++", "tomcat", "java-native-interface", "gdal"], "comments": [{"owner": {"reputation": 1143, "user_id": 2028440, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/SazkD.jpg?s=128&g=1", "display_name": "B\u1eb1ng Rikimaru", "link": "https://stackoverflow.com/users/2028440/b%e1%ba%b1ng-rikimaru"}, "edited": false, "score": 0, "creation_date": 1501683185, "post_id": 45463133, "comment_id": 77887223, "body": "Seem like it must need to create a jar and put to Tomcat lib then it can start without problem for any application which use native library, <a href=\"https://coderanch.com/t/474442/java/include-native-library-webservice-deployement#2127594\" rel=\"nofollow noreferrer\">coderanch.com/t/474442/java/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 1143, "user_id": 2028440, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/SazkD.jpg?s=128&g=1", "display_name": "B\u1eb1ng Rikimaru", "link": "https://stackoverflow.com/users/2028440/b%e1%ba%b1ng-rikimaru"}, "is_accepted": false, "score": 0, "last_activity_date": 1501686014, "creation_date": 1501686014, "answer_id": 45464380, "question_id": 45463133, "link": "https://stackoverflow.com/questions/45463133/java-jni-gdal-native-library-error-with-classloader-when-redeploying-as-web-appl/45464380#45464380", "title": "Java JNI GDAL native library error with ClassLoader when redeploying as web application", "body": "<p>So to avoid to add library to Tomcat/lib folder, I copy all the GDAL native folder to a temp directory with time stamp (e.g: /tmp/gdal_native/date.time), then I use the code above normally, except when it checks for the previous path, it will override with the new one.</p>\n\n<pre><code>String tmpTargetNativeFolderPath = \"/tmp/gdal_native\" + \"/\" + current date time\nint i = 0;\n// check if the path to add is already present\nfor (String path : paths) {\n    String pathFolder = StringUtils.substringBeforeLast(path, \"/\");\n    if (pathFolder.equals(\"/tmp/gdal_native\")) {\n        // Override the old path with the new one\n        paths[i] = tmpTargetNativeFolderPath;\n        usrPathsField.set(null, paths);\n        return;\n    }\n    i++;\n}\n</code></pre>\n\n<p>Then Classloader will load the library from another folder when the web application is redeployed without the error and the usrPathsField only contains one folder path to /tmp/gdal_native/timestamp.</p>\n"}], "owner": {"reputation": 1143, "user_id": 2028440, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/SazkD.jpg?s=128&g=1", "display_name": "B\u1eb1ng Rikimaru", "link": "https://stackoverflow.com/users/2028440/b%e1%ba%b1ng-rikimaru"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 190, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1501686055, "creation_date": 1501682643, "last_edit_date": 1501686055, "question_id": 45463133, "link": "https://stackoverflow.com/questions/45463133/java-jni-gdal-native-library-error-with-classloader-when-redeploying-as-web-appl", "title": "Java JNI GDAL native library error with ClassLoader when redeploying as web application", "body": "<p>I'm using GDAL native library (C++ and it is installed in  /usr/lib/java/gdal). I found a trick short time ago, to allow Tomcat can load the web application and this library (cannot use System.load() or System.loadLibrary() as all will return error)</p>\n\n<pre><code>Caused by: java.lang.UnsatisfiedLinkError: org.gdal.osr.osrJNI.new_SpatialReference__SWIG_1()J\n</code></pre>\n\n<p>Then I need to use a trick to add the library path to JVM when application starts:</p>\n\n<pre><code>    final Field usrPathsField = ClassLoader.class.getDeclaredField(\"usr_paths\");\n    usrPathsField.setAccessible(true);\n\n    // get array of paths\n    final String[] paths = (String[]) usrPathsField.get(null);\n\n    // check if the path to add is already present\n    for (String path : paths) {\n        if (path.equals(pathToAdd)) {\n            return;\n        }\n    }\n\n    //add the new path\n    final String[] newPaths = Arrays.copyOf(paths, paths.length + 1);\n    newPaths[newPaths.length - 1] = pathToAdd;\n    usrPathsField.set(null, newPaths);\n</code></pre>\n\n<p>This works well when the Tomcat starts with application, however, if I redeploy the application, it will return error:<br>\n    Caused by: java.lang.UnsatisfiedLinkError: Native Library /usr/lib/java/gdal/libgdaljni.so already loaded in another classloader</p>\n\n<p>I could not find any solution in StackOverflow, so I ask here if anyone can give some information. I also cannot change or add library path to environment variable or Tomcat folder, all should be done in Java code only.</p>\n"}, {"tags": ["c++", "qt", "dlib"], "comments": [{"owner": {"reputation": 576, "user_id": 5337612, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-52U8ppyS8iA/AAAAAAAAAAI/AAAAAAAAAhQ/L87ieoMPSTQ/photo.jpg?sz=128", "display_name": "Vahagn Avagyan", "link": "https://stackoverflow.com/users/5337612/vahagn-avagyan"}, "edited": false, "score": 0, "creation_date": 1501684500, "post_id": 45463106, "comment_id": 77888250, "body": "windows operating system??"}, {"owner": {"reputation": 115, "user_id": 7194758, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/ba37e048ca0b27693fa21fc49271bb35?s=128&d=identicon&r=PG&f=1", "display_name": "GDias", "link": "https://stackoverflow.com/users/7194758/gdias"}, "reply_to_user": {"reputation": 576, "user_id": 5337612, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-52U8ppyS8iA/AAAAAAAAAAI/AAAAAAAAAhQ/L87ieoMPSTQ/photo.jpg?sz=128", "display_name": "Vahagn Avagyan", "link": "https://stackoverflow.com/users/5337612/vahagn-avagyan"}, "edited": false, "score": 0, "creation_date": 1501684916, "post_id": 45463106, "comment_id": 77888612, "body": "Yes. Windows 10 x64"}, {"owner": {"reputation": 576, "user_id": 5337612, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-52U8ppyS8iA/AAAAAAAAAAI/AAAAAAAAAhQ/L87ieoMPSTQ/photo.jpg?sz=128", "display_name": "Vahagn Avagyan", "link": "https://stackoverflow.com/users/5337612/vahagn-avagyan"}, "edited": false, "score": 0, "creation_date": 1501685153, "post_id": 45463106, "comment_id": 77888810, "body": "This is the same <a href=\"https://github.com/davisking/dlib/blob/master/examples/dnn_mmod_face_detection_ex.cpp\" rel=\"nofollow noreferrer\">example</a>??"}, {"owner": {"reputation": 115, "user_id": 7194758, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/ba37e048ca0b27693fa21fc49271bb35?s=128&d=identicon&r=PG&f=1", "display_name": "GDias", "link": "https://stackoverflow.com/users/7194758/gdias"}, "reply_to_user": {"reputation": 576, "user_id": 5337612, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-52U8ppyS8iA/AAAAAAAAAAI/AAAAAAAAAhQ/L87ieoMPSTQ/photo.jpg?sz=128", "display_name": "Vahagn Avagyan", "link": "https://stackoverflow.com/users/5337612/vahagn-avagyan"}, "edited": false, "score": 0, "creation_date": 1501685393, "post_id": 45463106, "comment_id": 77888993, "body": "Yes. I didn&#39;t changed anything."}, {"owner": {"reputation": 576, "user_id": 5337612, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-52U8ppyS8iA/AAAAAAAAAAI/AAAAAAAAAhQ/L87ieoMPSTQ/photo.jpg?sz=128", "display_name": "Vahagn Avagyan", "link": "https://stackoverflow.com/users/5337612/vahagn-avagyan"}, "edited": false, "score": 0, "creation_date": 1501685531, "post_id": 45463106, "comment_id": 77889100, "body": "it is written there  &lt;&lt;Note that on windows your compiler might put the test executable in a subfolder called Release. If that&#39;s the case then you have to go to that folder before running the test&gt;&gt;."}, {"owner": {"reputation": 576, "user_id": 5337612, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-52U8ppyS8iA/AAAAAAAAAAI/AAAAAAAAAhQ/L87ieoMPSTQ/photo.jpg?sz=128", "display_name": "Vahagn Avagyan", "link": "https://stackoverflow.com/users/5337612/vahagn-avagyan"}, "edited": false, "score": 0, "creation_date": 1501686077, "post_id": 45463106, "comment_id": 77889557, "body": "<a href=\"https://github.com/davisking/dlib/blob/master/examples/CMakeLists.txt\" rel=\"nofollow noreferrer\">Read this</a>"}, {"owner": {"reputation": 115, "user_id": 7194758, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/ba37e048ca0b27693fa21fc49271bb35?s=128&d=identicon&r=PG&f=1", "display_name": "GDias", "link": "https://stackoverflow.com/users/7194758/gdias"}, "reply_to_user": {"reputation": 576, "user_id": 5337612, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-52U8ppyS8iA/AAAAAAAAAAI/AAAAAAAAAhQ/L87ieoMPSTQ/photo.jpg?sz=128", "display_name": "Vahagn Avagyan", "link": "https://stackoverflow.com/users/5337612/vahagn-avagyan"}, "edited": false, "score": 0, "creation_date": 1501689109, "post_id": 45463106, "comment_id": 77891896, "body": "Thanks for the help man! I tried to execute the program in the release folder. Same crash. I will read the link you sent me and will be back with some answer."}, {"owner": {"reputation": 115, "user_id": 7194758, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/ba37e048ca0b27693fa21fc49271bb35?s=128&d=identicon&r=PG&f=1", "display_name": "GDias", "link": "https://stackoverflow.com/users/7194758/gdias"}, "reply_to_user": {"reputation": 576, "user_id": 5337612, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-52U8ppyS8iA/AAAAAAAAAAI/AAAAAAAAAhQ/L87ieoMPSTQ/photo.jpg?sz=128", "display_name": "Vahagn Avagyan", "link": "https://stackoverflow.com/users/5337612/vahagn-avagyan"}, "edited": false, "score": 0, "creation_date": 1501855404, "post_id": 45463106, "comment_id": 77978613, "body": "Found the solution. Check the answer if you&#39;re interested."}], "answers": [{"tags": [], "owner": {"reputation": 49, "user_id": 6133502, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7913ec0d4f417fb435750c2ed99518a?s=128&d=identicon&r=PG&f=1", "display_name": "Ahmed", "link": "https://stackoverflow.com/users/6133502/ahmed"}, "is_accepted": false, "score": 1, "last_activity_date": 1501845149, "creation_date": 1501845149, "answer_id": 45505359, "question_id": 45463106, "link": "https://stackoverflow.com/questions/45463106/qt-with-dlib-and-cuda/45505359#45505359", "title": "Qt with Dlib and CUDA", "body": "<p>Try this:</p>\n\n<pre><code>LIBS += L\"C:\\Program Files\\NVIDIA GPU Computing Toolkit\\CUDA\\v8.0\\lib\\x64\"\n\nLIBS += -lcurand -lcublas -lcublas_device -lcudnn -lcudart_static\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 115, "user_id": 7194758, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/ba37e048ca0b27693fa21fc49271bb35?s=128&d=identicon&r=PG&f=1", "display_name": "GDias", "link": "https://stackoverflow.com/users/7194758/gdias"}, "is_accepted": true, "score": 1, "last_activity_date": 1501855700, "creation_date": 1501855700, "answer_id": 45508952, "question_id": 45463106, "link": "https://stackoverflow.com/questions/45463106/qt-with-dlib-and-cuda/45508952#45508952", "title": "Qt with Dlib and CUDA", "body": "<p>I just needed to define DLIB_USE_CUDA on my project and it works ok.</p>\n"}], "owner": {"reputation": 115, "user_id": 7194758, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/ba37e048ca0b27693fa21fc49271bb35?s=128&d=identicon&r=PG&f=1", "display_name": "GDias", "link": "https://stackoverflow.com/users/7194758/gdias"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 768, "favorite_count": 0, "accepted_answer_id": 45508952, "answer_count": 2, "score": 0, "last_activity_date": 1501855700, "creation_date": 1501682587, "last_edit_date": 1501682766, "question_id": 45463106, "link": "https://stackoverflow.com/questions/45463106/qt-with-dlib-and-cuda", "title": "Qt with Dlib and CUDA", "body": "<p>I'm trying to run Qt with Dlib. What happens is that every algorithm from Dlib that requires CUDA crashes without errors and if i run the same code on visual studio it works perfectly. Qt and Dlib was built with Visual Studio 2015 x64 and CUDA version is 8.0.</p>\n\n<p>The code is some example from Dlib that can use CUDA for better performance:</p>\n\n<pre><code>    #include &lt;iostream&gt;\n    #include &lt;dlib/dnn.h&gt;\n    #include &lt;dlib/data_io.h&gt;\n    #include &lt;dlib/image_processing.h&gt;\n    #include &lt;dlib/gui_widgets.h&gt;\n\n\n    using namespace std;\n    using namespace dlib;\n\n    // ----------------------------------------------------------------------------------------\n\n    template &lt;long num_filters, typename SUBNET&gt; using con5d = con&lt;num_filters,5,5,2,2,SUBNET&gt;;\n    template &lt;long num_filters, typename SUBNET&gt; using con5  = con&lt;num_filters,5,5,1,1,SUBNET&gt;;\n\n    template &lt;typename SUBNET&gt; using downsampler  = relu&lt;affine&lt;con5d&lt;32, relu&lt;affine&lt;con5d&lt;32, relu&lt;affine&lt;con5d&lt;16,SUBNET&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;;\n    template &lt;typename SUBNET&gt; using rcon5  = relu&lt;affine&lt;con5&lt;45,SUBNET&gt;&gt;&gt;;\n\n    using net_type = loss_mmod&lt;con&lt;1,9,9,1,1,rcon5&lt;rcon5&lt;rcon5&lt;downsampler&lt;input_rgb_image_pyramid&lt;pyramid_down&lt;6&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;;\n\n    // ----------------------------------------------------------------------------------------\n\n\nint main(int argc, char** argv) try\n{\n    if (argc == 1)\n    {\n        cout &lt;&lt; \"Call this program like this:\" &lt;&lt; endl;\n        cout &lt;&lt; \"./dnn_mmod_face_detection_ex mmod_human_face_detector.dat faces/*.jpg\" &lt;&lt; endl;\n        cout &lt;&lt; \"\\nYou can get the mmod_human_face_detector.dat file from:\\n\";\n        cout &lt;&lt; \"http://dlib.net/files/mmod_human_face_detector.dat.bz2\" &lt;&lt; endl;\n        return 0;\n    }\n\n\n    net_type net;\n    deserialize(argv[1]) &gt;&gt; net;  \n\n    image_window win;\n    for (int i = 2; i &lt; argc; ++i)\n    {\n        matrix&lt;rgb_pixel&gt; img;\n        load_image(img, argv[i]);\n\n        // Upsampling the image will allow us to detect smaller faces but will cause the\n        // program to use more RAM and run longer.\n        while(img.size() &lt; 1800*1800)\n            pyramid_up(img);\n\n        // Note that you can process a bunch of images in a std::vector at once and it runs\n        // much faster, since this will form mini-batches of images and therefore get\n        // better parallelism out of your GPU hardware.  However, all the images must be\n        // the same size.  To avoid this requirement on images being the same size we\n        // process them individually in this example.\n        auto dets = net(img);\n        win.clear_overlay();\n        win.set_image(img);\n        for (auto&amp;&amp; d : dets)\n            win.add_overlay(d);\n\n        cout &lt;&lt; \"Hit enter to process the next image.\" &lt;&lt; endl;\n        cin.get();\n    }\n}\ncatch(std::exception&amp; e)\n{\n    cout &lt;&lt; e.what() &lt;&lt; endl;\n}\n</code></pre>\n\n<p>the program crashes on line \"auto dets = net(img);\"</p>\n\n<p>my .pro file:</p>\n\n<pre><code>INCLUDEPATH += C:\\dlib\\dlib-19.4\nLIBS += -LC:\\dlib\\dlib-19.4\\mybuild\\dlib_build\\Release -ldlib\n\nINCLUDEPATH += \"C:\\Program Files\\NVIDIA GPU Computing Toolkit\\CUDA\\v8.0\\include\"\nLIBS +=\"C:\\Program Files\\NVIDIA GPU Computing Toolkit\\CUDA\\v8.0\\lib\\x64\\curand.lib\"\nLIBS +=\"C:\\Program Files\\NVIDIA GPU Computing Toolkit\\CUDA\\v8.0\\lib\\x64\\cublas.lib\"\nLIBS +=\"C:\\Program Files\\NVIDIA GPU Computing Toolkit\\CUDA\\v8.0\\lib\\x64\\cublas_device.lib\"\nLIBS +=\"C:\\Program Files\\NVIDIA GPU Computing Toolkit\\CUDA\\v8.0\\lib\\x64\\cudnn.lib\"\nLIBS +=\"C:\\Program Files\\NVIDIA GPU Computing Toolkit\\CUDA\\v8.0\\lib\\x64\\cudart_static.lib\"\n</code></pre>\n\n<p>Thanks for the attention.</p>\n"}, {"tags": ["c++", "mfc", "legacy"], "answers": [{"comments": [{"owner": {"reputation": 536, "user_id": 5295425, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/t7pza.png?s=128&g=1", "display_name": "bencemeszaros", "link": "https://stackoverflow.com/users/5295425/bencemeszaros"}, "edited": false, "score": 1, "creation_date": 1501822866, "post_id": 45475003, "comment_id": 77958053, "body": "Thank you. It turned out I got the whole thing wrong. We had the dialog data in lets say <code>m_dialogData</code> so I just requested the index of the selected row with <code>GetSelectedIndex()</code> and used it on <code>m_dialgData</code>."}], "tags": [], "owner": {"reputation": 13397, "user_id": 2287576, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/iCua4.jpg?s=128&g=1", "display_name": "Andrew Truckle", "link": "https://stackoverflow.com/users/2287576/andrew-truckle"}, "is_accepted": true, "score": 1, "last_activity_date": 1501751337, "last_edit_date": 1592644375, "creation_date": 1501735439, "answer_id": 45475003, "question_id": 45463100, "link": "https://stackoverflow.com/questions/45463100/clistctrl-do-action-based-on-selected-row-values/45475003#45475003", "title": "CListCtrl do action based on selected row values", "body": "<p>There is a method <a href=\"https://docs.microsoft.com/en-gb/cpp/mfc/reference/clistctrl-class#getitemtext\" rel=\"nofollow noreferrer\">GetItemText</a>. Notice it refers to:</p>\n<blockquote>\n<p><code>nItem</code>\nThe index of the item whose text is to be retrieved.</p>\n<p><code>nSubItem</code>\nSpecifies the subitem whose text is to be retrieved.</p>\n</blockquote>\n<p>Think of them as <em>row</em> and <em>column</em>. Now, look at the <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/bb774773(v=vs.85).aspx\" rel=\"nofollow noreferrer\">NM_LISTVIEW</a> structure in your handler:</p>\n<pre><code>typedef struct tagNMLISTVIEW {\n  NMHDR \u00a0hdr;\n  int \u00a0\u00a0\u00a0iItem;\n  int \u00a0\u00a0\u00a0iSubItem;\n  UINT \u00a0\u00a0uNewState;\n  UINT \u00a0\u00a0uOldState;\n  UINT \u00a0\u00a0uChanged;\n  POINT \u00a0ptAction;\n  LPARAM lParam;\n} NMLISTVIEW, *LPNMLISTVIEW;\n</code></pre>\n<p>It too has those properties:</p>\n<pre><code>int \u00a0\u00a0\u00a0iItem;\nint \u00a0\u00a0\u00a0iSubItem;\n</code></pre>\n<p>So you should be able to get at the item text and perform what you wanted to do. Example:</p>\n<pre><code>// Get text in column 2 (it might 1 - can't remember if it is zero based indexing)\nCString strValue = m_myList.GetItemText(pNMListView-&gt;iItem, 2);\nif(strValue == &quot;DoThis&quot;)\n{\n    // ...\n}\n</code></pre>\n<p>The above code is <strong>not</strong> tested!!</p>\n"}], "owner": {"reputation": 536, "user_id": 5295425, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/t7pza.png?s=128&g=1", "display_name": "bencemeszaros", "link": "https://stackoverflow.com/users/5295425/bencemeszaros"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 326, "favorite_count": 0, "accepted_answer_id": 45475003, "answer_count": 1, "score": 0, "last_activity_date": 1501751337, "creation_date": 1501682572, "question_id": 45463100, "link": "https://stackoverflow.com/questions/45463100/clistctrl-do-action-based-on-selected-row-values", "title": "CListCtrl do action based on selected row values", "body": "<p>I have to enable/disable buttons on a dialog based on values in a CListViewCtrl. Based on the selected row. I got this far:</p>\n\n<pre><code>NOTIFY_HANDLER(IDC_LIST, LVN_ITEMCHANGED, OnMyListChange)\n\n// ....\n\n    LRESULT OnMyListChange(int, LPNMHDR pNMHDR, BOOL&amp;)\n    {\n        NM_LISTVIEW* pNMListView = (NM_LISTVIEW*)pNMHDR;\n        if ((pNMListView-&gt;uChanged &amp; LVIF_STATE) \n            &amp;&amp; (pNMListView-&gt;uNewState &amp; LVIS_SELECTED))\n        {\n            // enable/disable buttons based on row field value\n        }\n        return 0;\n    }\n</code></pre>\n\n<p>Lets say I have <code>column1</code> <code>column2</code> <code>column3</code>. I need to write a condition based on <code>column2</code> value in the selected row. Multiple row selection is not a case. Thank you.</p>\n"}, {"tags": ["c++", "qt", "qtcpsocket", "qdatastream"], "comments": [{"owner": {"reputation": 5548, "user_id": 5068056, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/m53CE.jpg?s=128&g=1", "display_name": "Farhad", "link": "https://stackoverflow.com/users/5068056/farhad"}, "edited": false, "score": 0, "creation_date": 1501682669, "post_id": 45463067, "comment_id": 77886795, "body": "Can you tell me what is Max rate in Bytes ?"}, {"owner": {"reputation": 5548, "user_id": 5068056, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/m53CE.jpg?s=128&g=1", "display_name": "Farhad", "link": "https://stackoverflow.com/users/5068056/farhad"}, "edited": false, "score": 0, "creation_date": 1501683197, "post_id": 45463067, "comment_id": 77887232, "body": "Read a bigger chunk of bytes and count it, to make sure all bytes is receiving in your socket buffer.  then remove <code>QByteArray a</code> before loop.  do NOT define a new part of memory in a loop, define a buffer then append to it."}, {"owner": {"reputation": 25560, "user_id": 2068642, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/DYTnZ.jpg?s=128&g=1", "display_name": "TheDarkKnight", "link": "https://stackoverflow.com/users/2068642/thedarkknight"}, "edited": false, "score": 2, "creation_date": 1501683718, "post_id": 45463067, "comment_id": 77887592, "body": "First consider that Qt is an event driven framework. Using a while(true) is not the best way of doing this. <a href=\"https://stackoverflow.com/questions/26909682/tcp-packets-using-qtcpsocket/26909955#26909955\">This answer</a> should help."}, {"owner": {"reputation": 22818, "user_id": 1387438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ad806758c356c915ea08a4bfd79131e3?s=128&d=identicon&r=PG", "display_name": "Marek R", "link": "https://stackoverflow.com/users/1387438/marek-r"}, "reply_to_user": {"reputation": 25560, "user_id": 2068642, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/DYTnZ.jpg?s=128&g=1", "display_name": "TheDarkKnight", "link": "https://stackoverflow.com/users/2068642/thedarkknight"}, "edited": false, "score": 0, "creation_date": 1501686349, "post_id": 45463067, "comment_id": 77889769, "body": "I agree with a @TheDarkKnight. Probably you you saw a performance issue, you thought: &quot;lets use threads to improve performance&quot;, instead understanding the issue. Multi threading is hard. Bugs for it are extremely hard to find, so since you are newbie do not use them at all until you will gain some exp. It will save you lots of time an pain."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 5227383, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df08d866196adaa7da4dfa9f35494acb?s=128&d=identicon&r=PG&f=1", "display_name": "Famok", "link": "https://stackoverflow.com/users/5227383/famok"}, "edited": false, "score": 0, "creation_date": 1501688377, "post_id": 45464146, "comment_id": 77891343, "body": "Seems like I&#39;ve got the concept on QTcpSocket in combination with QDataStream wrong. It would be great if you could explain your first point a little bit more in detail.  Your question about the binary format: 6 byte, with 0xff 0xff for the first 2 byte and then 4 byte containing the float value (single precission). To use startTransaction() I&#39;ll need to upgrade QT (I&#39;m on 5.6)"}, {"owner": {"reputation": 22818, "user_id": 1387438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ad806758c356c915ea08a4bfd79131e3?s=128&d=identicon&r=PG", "display_name": "Marek R", "link": "https://stackoverflow.com/users/1387438/marek-r"}, "reply_to_user": {"reputation": 3, "user_id": 5227383, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df08d866196adaa7da4dfa9f35494acb?s=128&d=identicon&r=PG&f=1", "display_name": "Famok", "link": "https://stackoverflow.com/users/5227383/famok"}, "edited": false, "score": 0, "creation_date": 1501707907, "post_id": 45464146, "comment_id": 77902970, "body": "When you writting about older qt that it doesn&#39;t have a cache. At leat I checked the source of Qt4.8 and it reads data directly from socket, in case implementation with transactions it has a cache."}, {"owner": {"reputation": 22818, "user_id": 1387438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ad806758c356c915ea08a4bfd79131e3?s=128&d=identicon&r=PG", "display_name": "Marek R", "link": "https://stackoverflow.com/users/1387438/marek-r"}, "reply_to_user": {"reputation": 3, "user_id": 5227383, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df08d866196adaa7da4dfa9f35494acb?s=128&d=identicon&r=PG&f=1", "display_name": "Famok", "link": "https://stackoverflow.com/users/5227383/famok"}, "edited": false, "score": 0, "creation_date": 1501709999, "post_id": 45464146, "comment_id": 77903946, "body": "I&#39;ve checked Qt source I was wrong :(. <code>QDataStream</code> doesn&#39;t have any kind of buffer, this is handled by IODevice (socket)."}, {"owner": {"reputation": 3, "user_id": 5227383, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df08d866196adaa7da4dfa9f35494acb?s=128&d=identicon&r=PG&f=1", "display_name": "Famok", "link": "https://stackoverflow.com/users/5227383/famok"}, "edited": false, "score": 0, "creation_date": 1501746482, "post_id": 45464146, "comment_id": 77916337, "body": "I was able to update to QT5.8 (there is no precompiled Qt5.9 for msvc2013 32bit). Adapted your code and got it running. It seems like I&#39;ve never understood the &gt;&gt; operator. Please correct me if I&#39;m wrong, but if I want 2 bytes to be discarded  I need to do &quot;stream &gt;&gt; someint(2 byte) &gt;&gt; somefloat(4 byte)&quot;? How can I handle many values in stream? Do I need to loop over stream&gt;&gt; then?"}, {"owner": {"reputation": 22818, "user_id": 1387438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ad806758c356c915ea08a4bfd79131e3?s=128&d=identicon&r=PG", "display_name": "Marek R", "link": "https://stackoverflow.com/users/1387438/marek-r"}, "reply_to_user": {"reputation": 3, "user_id": 5227383, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df08d866196adaa7da4dfa9f35494acb?s=128&d=identicon&r=PG&f=1", "display_name": "Famok", "link": "https://stackoverflow.com/users/5227383/famok"}, "edited": false, "score": 0, "creation_date": 1501748540, "post_id": 45464146, "comment_id": 77917727, "body": "<code>QStream</code> data reads data binary manner with defined endian handling no matter what platform  you are running. Qt is handling platforms with big endian too. It also helps maintain floating point numbers which have couple standards and on different platforms the can have various format. Most network standards are using big endian and most processors now are using little endian so you have to handle that."}, {"owner": {"reputation": 3, "user_id": 5227383, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df08d866196adaa7da4dfa9f35494acb?s=128&d=identicon&r=PG&f=1", "display_name": "Famok", "link": "https://stackoverflow.com/users/5227383/famok"}, "edited": false, "score": 0, "creation_date": 1501751048, "post_id": 45464146, "comment_id": 77919615, "body": "I still need to figure out what happens after <code>startTransaction</code>. It seems like stream might contain multiple values for each startTransaction but I&#39;m only reading one value per <code>stream &gt;&gt; toBeDiscarded &gt;&gt; value;</code> I&#39;ve found out, that I get 256 values per readyRead."}, {"owner": {"reputation": 22818, "user_id": 1387438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ad806758c356c915ea08a4bfd79131e3?s=128&d=identicon&r=PG", "display_name": "Marek R", "link": "https://stackoverflow.com/users/1387438/marek-r"}, "reply_to_user": {"reputation": 3, "user_id": 5227383, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df08d866196adaa7da4dfa9f35494acb?s=128&d=identicon&r=PG&f=1", "display_name": "Famok", "link": "https://stackoverflow.com/users/5227383/famok"}, "edited": false, "score": 0, "creation_date": 1501762165, "post_id": 45464146, "comment_id": 77927954, "body": "transactions are a common patter in general (for example in database). In this case when commit of transaction fails state is restored to moment when transaction was started, so you can start reading again when more data are available new transaction can succeed."}, {"owner": {"reputation": 3, "user_id": 5227383, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df08d866196adaa7da4dfa9f35494acb?s=128&d=identicon&r=PG&f=1", "display_name": "Famok", "link": "https://stackoverflow.com/users/5227383/famok"}, "edited": false, "score": 0, "creation_date": 1501848374, "post_id": 45464146, "comment_id": 77973388, "body": "Can you comment on, what the stream contains after startTransaction (how much does it read, and how do i know)? And how do i know I&#39;ve ready every value?"}], "tags": [], "owner": {"reputation": 22818, "user_id": 1387438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ad806758c356c915ea08a4bfd79131e3?s=128&d=identicon&r=PG", "display_name": "Marek R", "link": "https://stackoverflow.com/users/1387438/marek-r"}, "is_accepted": true, "score": 2, "last_activity_date": 1501748728, "last_edit_date": 1501748728, "creation_date": 1501685421, "answer_id": 45464146, "question_id": 45463067, "link": "https://stackoverflow.com/questions/45463067/read-many-values-from-qtcpsocket-fast/45464146#45464146", "title": "Read (many) values from QTcpSocket (fast)", "body": "<p>Your code has couple mistakes.</p>\n\n<p>You are doing direct reading from socket when in the same time you are using <code>QDataStream</code>. This can break stuff.</p>\n\n<p>Also your code is assuming that your application will receive data in same chunks as it was sent by other end. You do not have such warranty! It may happen that you will receive chunk data which are ending in middle of your frame. It works just by pure luck or you are ignoring some bugs of your application.</p>\n\n<p>This should go like this:</p>\n\n<pre><code>while(true)\nif (mysock-&gt;waitForReadyRead()) // IMO doing such loop is terrible approach\n// but this is Out of the scope of question, so ignoring that\n{\n    while (true)\n    {\n        stream.startTransaction();\n        float result;\n        qint32 somedata\n        stream &gt;&gt; somedata &gt;&gt; result; // I do not know binary format your application is using\n\n        if (!in.commitTransaction())\n            break;\n\n        AddDataToModel(result, somedata);\n    } \n}\n</code></pre>\n\n<p><hr>\nEdit:</p>\n\n<p>From comment:</p>\n\n<blockquote>\n  <p>Please correct me if I'm wrong, but if I want 2 bytes to be discarded I need to do \"stream >> someint(2 byte) >> somefloat(4 byte)\"? How can I handle many values in stream?</p>\n</blockquote>\n\n<pre><code>qint16 toBeDiscarded;\nfloat value; \n// note stream.setFloatingPointPrecision(QDataStream::SinglePrecision); \n// is needed to read float as 32 bit floating point number\n\nstream &gt;&gt; toBeDiscarded &gt;&gt; value;\nProcessValue(value);\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 5227383, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df08d866196adaa7da4dfa9f35494acb?s=128&d=identicon&r=PG&f=1", "display_name": "Famok", "link": "https://stackoverflow.com/users/5227383/famok"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 683, "favorite_count": 0, "accepted_answer_id": 45464146, "answer_count": 1, "score": 0, "last_activity_date": 1501761280, "creation_date": 1501682487, "last_edit_date": 1501761280, "question_id": 45463067, "link": "https://stackoverflow.com/questions/45463067/read-many-values-from-qtcpsocket-fast", "title": "Read (many) values from QTcpSocket (fast)", "body": "<p>I'm using a measurement device which sends (binary) float values using a tcp socket with up to 70 kHz.</p>\n\n<p>My goal is to read these values as fast as possible and use them in other parts of my program.</p>\n\n<p>Till now I'm able to extract value by value using a QTcpSocket and QDataStream:</p>\n\n<p>First I create the socket and connect the stream to it</p>\n\n<pre><code>mysock = new QTcpSocket(this);\nmysock-&gt;connectToHost(ip, port);\nQDataStream stream(mysock);\nstream.setByteOrder(QDataStream::LittleEndian);\nstream.setFloatingPointPrecision(QDataStream::SinglePrecision);\n</code></pre>\n\n<p>Then I read from the socket and write the stream data to my float value</p>\n\n<pre><code>while(true) //only for test purpose (dont stop reading)\nif (mysock-&gt;waitForReadyRead())\n{\n    while (mysock-&gt;bytesAvailable() &gt;= 6)\n    {\n        QByteArray a = mysock-&gt;read(6); //each value sent is 6 bytes long\n        stream.skipRawData(2); //first 2 bytes don't belong to the number\n        float result;\n        stream &gt;&gt; result;\n        //qDebug()&lt;&lt;result;\n    }\n}\n</code></pre>\n\n<p>When I measure the iteration frequency of the while(true) loop I'm able to achieve about 30 kHz. \nReading multiple values per read I can reach up to 70 Khz. (Not taking other calculations into account which might slow me down)</p>\n\n<p>My questions are:</p>\n\n<ul>\n<li>If I read multiple values at once, how do I extract these values from the QDataStream? I need a 6 bytes spacing with only 4 bytes containing the value.</li>\n</ul>\n\n<p><strong>Answer:</strong> In my case there is 2 bytes (trash) followed by a known number of values, for example 4 bytes for a float, 4 bytes for another float, 2 bytes for an uint16.</p>\n\n<pre><code>stream &gt;&gt; trashuint16 &gt;&gt; resultfloat1 &gt;&gt; resultfloat2 &gt;&gt; resultuint16\n</code></pre>\n\n<ul>\n<li>Expands 1: I can configure my device to send different values of different type (int, float) which need to be written to different variables. </li>\n</ul>\n\n<p><strong>Answer:</strong> Same.</p>\n\n<ul>\n<li>Is there a more efficient way to read many values from a QTcpSocket? </li>\n</ul>\n\n<p><strong>Answer:</strong> Anwered in the comments.</p>\n\n<h2><strong>Update (to answer some questions):</strong></h2>\n\n<ul>\n<li>Max rate in Bytes: 70 kHz x 6 Byte (for one value) = 420 kB/s (Doesnt seem that much :))</li>\n</ul>\n\n<h2><strong>Update 2</strong></h2>\n\n<ul>\n<li><strong>New Question:</strong> When i start a transaction (using <code>stream.startTransaction</code>) I would like to know whats inside that stream in binary code.</li>\n<li>I dont understand how <code>QDataStream::startTransaction</code> works. How many bytes will be read? what happens with the data I dont extract using <code>&gt;&gt;</code>?</li>\n</ul>\n\n<p>I've tried the following:</p>\n\n<pre><code>if (mysock-&gt;waitForReadyRead())\n{\n    stream.startTransaction();\n\n    char *c = new char[40];\n    stream.readRawData(c, 40);    //I want to know whats really inside    \n    QByteArray a(c);\n    qDebug() &lt;&lt; a &lt;&lt;stream.status();\n    if (!stream.commitTransaction())\n        break;\n}\n</code></pre>\n\n<p>Doing this again and again, I'll sometimes get status = -1 (read too much) and sometimes not. How do I get the \"size\" of the stream?</p>\n"}, {"tags": ["c++", "r", "doparallel", "parallel-foreach"], "comments": [{"owner": {"reputation": 7628, "user_id": 3250126, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/QUYNV.jpg?s=128&g=1", "display_name": "loki", "link": "https://stackoverflow.com/users/3250126/loki"}, "edited": false, "score": 0, "creation_date": 1501681795, "post_id": 45462748, "comment_id": 77886066, "body": "have you monitored the process? Are you working on a 64-bit version of R?"}, {"owner": {"reputation": 7628, "user_id": 3250126, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/QUYNV.jpg?s=128&g=1", "display_name": "loki", "link": "https://stackoverflow.com/users/3250126/loki"}, "edited": false, "score": 0, "creation_date": 1501682005, "post_id": 45462748, "comment_id": 77886252, "body": "Seems to be a c++ error. Have you checked <a href=\"https://stackoverflow.com/a/9456758/3250126\">this</a>?"}, {"owner": {"reputation": 602, "user_id": 7424716, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/u3JJY.jpg?s=128&g=1", "display_name": "deann", "link": "https://stackoverflow.com/users/7424716/deann"}, "reply_to_user": {"reputation": 7628, "user_id": 3250126, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/QUYNV.jpg?s=128&g=1", "display_name": "loki", "link": "https://stackoverflow.com/users/3250126/loki"}, "edited": false, "score": 0, "creation_date": 1501682249, "post_id": 45462748, "comment_id": 77886474, "body": "I am on a 64-bit version of R. I did see that it is a c++ error, however I am not sure how I can &quot; try to ensure a safe program termination by freeing outstanding resources&quot; in R. That is why I thought there could be an option to allocate memory."}, {"owner": {"reputation": 7628, "user_id": 3250126, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/QUYNV.jpg?s=128&g=1", "display_name": "loki", "link": "https://stackoverflow.com/users/3250126/loki"}, "edited": false, "score": 0, "creation_date": 1501682397, "post_id": 45462748, "comment_id": 77886575, "body": "have you tried the <code>gc()</code>?"}, {"owner": {"reputation": 602, "user_id": 7424716, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/u3JJY.jpg?s=128&g=1", "display_name": "deann", "link": "https://stackoverflow.com/users/7424716/deann"}, "reply_to_user": {"reputation": 7628, "user_id": 3250126, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/QUYNV.jpg?s=128&g=1", "display_name": "loki", "link": "https://stackoverflow.com/users/3250126/loki"}, "edited": false, "score": 0, "creation_date": 1501682525, "post_id": 45462748, "comment_id": 77886680, "body": "what do you mean?"}, {"owner": {"reputation": 7628, "user_id": 3250126, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/QUYNV.jpg?s=128&g=1", "display_name": "loki", "link": "https://stackoverflow.com/users/3250126/loki"}, "edited": false, "score": 0, "creation_date": 1501682719, "post_id": 45462748, "comment_id": 77886839, "body": "Have you tried to use the garbage collector <code>gc()</code> in the section of your code? It frees memory which is not used. In my code I put a <code>gc();gc();gc()</code> after some lines, especially after huge calculations. Since you are importing <code>randomForest</code> I would assume a garbage collection can improve the resource usage."}, {"owner": {"reputation": 418, "user_id": 8377456, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/59ea46181d05055c475dbbd47bdc8a6a?s=128&d=identicon&r=PG&f=1", "display_name": "BigTimeStats", "link": "https://stackoverflow.com/users/8377456/bigtimestats"}, "edited": false, "score": 3, "creation_date": 1501683059, "post_id": 45462748, "comment_id": 77887116, "body": "Try to monitor the task manager as your code runs and see if you are reaching the memory limit. My machine also has 256gb of RAM, but when running a parallelization with just 10 cores, it can sometimes reach that limit. I believe this is because everything (incl packages and data) is passed to each node. You can also try to run less cores to see if that helps."}, {"owner": {"reputation": 17207, "user_id": 1869097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/041dd995b50ecacbea065e588a4f81cf?s=128&d=identicon&r=PG", "display_name": "nrussell", "link": "https://stackoverflow.com/users/1869097/nrussell"}, "edited": false, "score": 0, "creation_date": 1501686918, "post_id": 45462748, "comment_id": 77890209, "body": "What is this function: <code>myRoughfix</code>?"}, {"owner": {"reputation": 602, "user_id": 7424716, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/u3JJY.jpg?s=128&g=1", "display_name": "deann", "link": "https://stackoverflow.com/users/7424716/deann"}, "reply_to_user": {"reputation": 17207, "user_id": 1869097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/041dd995b50ecacbea065e588a4f81cf?s=128&d=identicon&r=PG", "display_name": "nrussell", "link": "https://stackoverflow.com/users/1869097/nrussell"}, "edited": false, "score": 0, "creation_date": 1501688127, "post_id": 45462748, "comment_id": 77891158, "body": "@nrussell that is a wrapper around randomForest::na.roughfix(). It just does some data prep in advance. In general, &quot;#some code goes here&quot; part is a sequential code which does custom imputation."}, {"owner": {"reputation": 17207, "user_id": 1869097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/041dd995b50ecacbea065e588a4f81cf?s=128&d=identicon&r=PG", "display_name": "nrussell", "link": "https://stackoverflow.com/users/1869097/nrussell"}, "edited": false, "score": 0, "creation_date": 1501688289, "post_id": 45462748, "comment_id": 77891279, "body": "You probably just need to run this through <code>gdb</code> to figure out what function the failed allocation is triggered in. As it stands, your problem isn&#39;t reproducible, however."}, {"owner": {"reputation": 329671, "user_id": 143305, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e96ca7ae02c37e7d940d17997d780e5?s=128&d=identicon&r=PG", "display_name": "Dirk Eddelbuettel", "link": "https://stackoverflow.com/users/143305/dirk-eddelbuettel"}, "edited": false, "score": 0, "creation_date": 1501697495, "post_id": 45462748, "comment_id": 77897080, "body": "I am removing the Rcpp tag as there is no demonstrated relationship to the Rcpp package here."}, {"owner": {"reputation": 9959, "user_id": 6103040, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/a1eff68533fb4a36cec22c963996c527?s=128&d=identicon&r=PG&f=1", "display_name": "F. Priv&#233;", "link": "https://stackoverflow.com/users/6103040/f-priv%c3%a9"}, "edited": false, "score": 0, "creation_date": 1501761588, "post_id": 45462748, "comment_id": 77927539, "body": "Does it run with <code>registerDoSEQ()</code> (sequential)?"}, {"owner": {"reputation": 2475, "user_id": 2662639, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/59449777185daf5e8d7f372422e58ed0?s=128&d=identicon&r=PG", "display_name": "Parsa", "link": "https://stackoverflow.com/users/2662639/parsa"}, "reply_to_user": {"reputation": 329671, "user_id": 143305, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e96ca7ae02c37e7d940d17997d780e5?s=128&d=identicon&r=PG", "display_name": "Dirk Eddelbuettel", "link": "https://stackoverflow.com/users/143305/dirk-eddelbuettel"}, "edited": false, "score": 0, "creation_date": 1522868165, "post_id": 45462748, "comment_id": 86326079, "body": "@DirkEddelbuettel I&#39;m using the rcpp package and i get the same unexplained error"}], "owner": {"reputation": 602, "user_id": 7424716, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/u3JJY.jpg?s=128&g=1", "display_name": "deann", "link": "https://stackoverflow.com/users/7424716/deann"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 195, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1501697503, "creation_date": 1501681665, "last_edit_date": 1501697503, "question_id": 45462748, "link": "https://stackoverflow.com/questions/45462748/issue-with-dopar-terminate-called-after-throwing-an-instance-of-stdbad-all", "title": "Issue with %dopar% &quot;terminate called after throwing an instance of &#39;std::bad_alloc&#39;&quot;", "body": "<p>I have written a function where I execute some code in parallel:</p>\n\n<pre><code> cl &lt;- makeCluster(nc, outfile = \"\")\n registerDoParallel(cl, nc)\n\n pred &lt;- foreach(s = iter(seq(1L,length(dfr_missings))),\n                 .packages = c('RANN', 'randomForest','magrittr'),\n                 .errorhandling = 'stop',\n                 .verbose = F,\n                 .combine = 'cbind',\n                 .export = c(\"myRoughfix\")) %dopar% {\n                 #\n                 #some code goes here\n                 # \n                 }\n\nstopCluster(cl)\nstopImplicitCluster() \n</code></pre>\n\n<p>The function works as expected with smaller dataframes. However, I need it to run with a bigger ones. </p>\n\n<p>I get the following error:</p>\n\n<pre><code> Error in unserialize(socklist[[n]]) : error reading from connection\n terminate called after throwing an instance of 'std::bad_alloc'\n   what():  std::bad_alloc\n</code></pre>\n\n<p>As far as I understand the error message, it indicates that I ran out of memory. The size of the dataframe I am experiencing issues with is ~770MB. I am working on a 256GB RAM machine with 48 cores. I would expect this machine to be able to handle an object that big. The code does not do anything that is memory intensive. </p>\n\n<p>So my question is - is it possible that there are some memory restrictions set to the workers that could be managed with a global option? Possibly an option to the OS or to makeCluster(). </p>\n\n<p>Any other thoughts are welcomed.</p>\n\n<p>P.S. I am on a preset virtual machine on 64bit oracle linux 6 with R version -  \"Oracle Distribution of R version 3.1.1\"</p>\n"}, {"tags": ["c++", "dll", "crypto++", "delay-load"], "answers": [{"tags": [], "owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "is_accepted": false, "score": 0, "last_activity_date": 1501759938, "last_edit_date": 1501759938, "creation_date": 1501759623, "answer_id": 45482862, "question_id": 45462728, "link": "https://stackoverflow.com/questions/45462728/delay-load-crypto-cryptopp-dll/45482862#45482862", "title": "Delay-load crypto++ cryptopp.dll", "body": "<blockquote>\n  <p>The Crypto++ library supports late binding by compiling against cryptlib.lib and cryptopp.lib...</p>\n</blockquote>\n\n<p>The DLL is a FIPS DLL. The actual purpose of splitting functionality into two separate libraries is to provide the logical module boundary required by FIPS 140-2. The FIPS module boundary is <code>cryptopp.dll</code>.</p>\n\n<p>The FIPS DLL only includes the FIPS algorithms, like AES and RSA. I recommend you avoid the FIPS DLL at all costs. Its a pain to work with. Also see <a href=\"https://www.cryptopp.com/wiki/FIPS_DLL\" rel=\"nofollow noreferrer\">FIPS DLL</a> on the Crypto++ wiki.</p>\n\n<p>If you want a DLL, then write your own wrapper DLL with your own API, and then link to the Crypto++ static library.</p>\n\n<p>In the wrapper DLL case (and since you seem experienced), I highly encourage you to use <a href=\"https://github.com/weidai11/cryptopp/blob/master/cryptest.nmake\" rel=\"nofollow noreferrer\"><code>cryptest.nmake</code></a> as a starting point. If you are familiar with makefiles (I think you are), then you will find it much easier to work with than the <a href=\"https://www.cryptopp.com/wiki/Visual_Studio\" rel=\"nofollow noreferrer\">Visual Studio project files</a>.</p>\n\n<hr>\n\n<blockquote>\n  <p>LINK : fatal error LNK1194: Delay loading \"cryptopp.dll\" not possible because of import of data symbol \"\"__declspec(dllimport) bool (__cdecl* CryptoPP::g_pAssignIntToInteger)(class type_info const &amp;,void *,void const *)\" (__imp_?g_pAssignIntToInteger@CryptoPP@@3P6A_NABVtype_info@@PAXPBX@ZA)\". Link without /DELAYLOAD:cryptopp.dll</p>\n</blockquote>\n\n<p>This is an interesting question because you have two libraries, and its not clear to me which library the symbol is in. The first library is the FIPS DLL (cryptopp.dll), and it includes AES, RSA, etc. The second library is the Static Lib (cryptlib.lib), and it includes HexEncoder, FileSource, and the other supporting stuff.</p>\n\n<p>I believe <code>g_pAssignIntToInteger</code> should be in the Static Lib (cryptlib.lib) because it was part of <code>AlgorithmParamters</code>. See, for example, <a href=\"https://github.com/weidai11/cryptopp/commit/5efb019d8bdc593b3c1a0b57d615b170c7dab02a\" rel=\"nofollow noreferrer\">Commit 5efb019d8bdc593b</a>. However, from the error above, it appears to be residing in the FIPS DLL because of the symbol name <code>__imp_?g_pAssignIntToInteger ...</code>.</p>\n\n<p>Now the added wrinkle is, <code>g_pAssignIntToInteger</code> is a function pointer, and compilers won't optimize them away. So the linker never discards <code>Integer</code> related symbols, which is the point of the decoupling.</p>\n\n<p>At <a href=\"https://github.com/weidai11/cryptopp/commit/0e55f5ac7d98f3c852ace7b4622f40cfa60b629f\" rel=\"nofollow noreferrer\">Commit 0e55f5ac7d98f3c8</a> we removed <code>g_pAssignIntToInteger</code> and added a define <code>CRYPTOPP_NO_ASSIGN_TO_INTEGER</code> to accomplish the task. The define ensures the symbol and unwanted code like <code>Integer</code> code can be discarded.</p>\n"}], "owner": {"reputation": 55, "user_id": 6863317, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/6a808c246ae882f7fd97150a769316db?s=128&d=identicon&r=PG&f=1", "display_name": "Achim Sch&#246;n", "link": "https://stackoverflow.com/users/6863317/achim-sch%c3%b6n"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 344, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1501759938, "creation_date": 1501681612, "question_id": 45462728, "link": "https://stackoverflow.com/questions/45462728/delay-load-crypto-cryptopp-dll", "title": "Delay-load crypto++ cryptopp.dll", "body": "<p>The Crypto++ library supports late binding by compiling against <code>cryptlib.lib</code> and <code>cryptopp.lib</code>. This requires to use the <code>cryptopp.dll</code>. When trying to delay-load this dll by <code>/DELAYLOAD:cryptopp.dll</code> this causes a link error that it could not be delay loaded because of required imports.</p>\n\n<p>As example see the following code:</p>\n\n<pre><code>#include &lt;Crypto++/dll.h&gt;\n#include &lt;crypto++/base64.h&gt;\n\nbool HexDecode(const std::string&amp; strHex, std::string&amp; strData)\n{\n    try\n    {\n        CryptoPP::StringSource(strHex, true,\n            new CryptoPP::Base64Decoder(\n                new CryptoPP::StringSink(strData)));\n    }\n\n    catch(...)\n    {\n        return false;\n    }\n\n    return true;\n}\n</code></pre>\n\n<p>This causes the following link error:</p>\n\n<pre><code>LINK : fatal error LNK1194: Delay loading \"cryptopp.dll\" not possible because of import of data symbol \"\"__declspec(dllimport) bool (__cdecl* CryptoPP::g_pAssignIntToInteger)(class type_info const &amp;,void *,void const *)\" (__imp_?g_pAssignIntToInteger@CryptoPP@@3P6A_NABVtype_info@@PAXPBX@ZA)\". Link without /DELAYLOAD:cryptopp.dll\n</code></pre>\n\n<p>Did anyone already managed to delay load <code>cryptopp.dll</code> successfully?</p>\n"}, {"tags": ["c++", "cmake", "cuda", "clion"], "comments": [{"owner": {"reputation": 8454, "user_id": 958529, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c3ec25db39c63bab1a11037649e326b8?s=128&d=identicon&r=PG", "display_name": "halfelf", "link": "https://stackoverflow.com/users/958529/halfelf"}, "edited": false, "score": 1, "creation_date": 1501832038, "post_id": 45462411, "comment_id": 77962369, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/39980645/enable-code-indexing-of-cuda-in-clion\">Enable code indexing of Cuda in Clion</a>"}, {"owner": {"reputation": 413, "user_id": 360708, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/bb85747520dba7a0442cba55165cb5b0?s=128&d=identicon&r=PG", "display_name": "Kriegalex", "link": "https://stackoverflow.com/users/360708/kriegalex"}, "reply_to_user": {"reputation": 8454, "user_id": 958529, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c3ec25db39c63bab1a11037649e326b8?s=128&d=identicon&r=PG", "display_name": "halfelf", "link": "https://stackoverflow.com/users/958529/halfelf"}, "edited": false, "score": 0, "creation_date": 1501834034, "post_id": 45462411, "comment_id": 77963525, "body": "I have specified in bold at the end that I&#39;ve added .cu type to CLion. Also the special CUDA symbols ( <b>host</b> ) are not the problem."}, {"owner": {"reputation": 8454, "user_id": 958529, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c3ec25db39c63bab1a11037649e326b8?s=128&d=identicon&r=PG", "display_name": "halfelf", "link": "https://stackoverflow.com/users/958529/halfelf"}, "edited": false, "score": 0, "creation_date": 1501835935, "post_id": 45462411, "comment_id": 77964687, "body": "Have you read all the answers there? Others had made it clear Clion cannot parse cuda unless adding preprocessor tricks."}, {"owner": {"reputation": 413, "user_id": 360708, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/bb85747520dba7a0442cba55165cb5b0?s=128&d=identicon&r=PG", "display_name": "Kriegalex", "link": "https://stackoverflow.com/users/360708/kriegalex"}, "reply_to_user": {"reputation": 8454, "user_id": 958529, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c3ec25db39c63bab1a11037649e326b8?s=128&d=identicon&r=PG", "display_name": "halfelf", "link": "https://stackoverflow.com/users/958529/halfelf"}, "edited": false, "score": 0, "creation_date": 1501841963, "post_id": 45462411, "comment_id": 77969074, "body": "I don&#39;t want CLion to correctly parse or understand cuda special symbols or kernels, I just want him to do its standard code resolving, so that the entire file is not red (not the same as having only CUDA symbols red). For some reason, adding an empty CPP file in the CMake compile process, makes him resolve everything correctly..."}, {"owner": {"reputation": 413, "user_id": 360708, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/bb85747520dba7a0442cba55165cb5b0?s=128&d=identicon&r=PG", "display_name": "Kriegalex", "link": "https://stackoverflow.com/users/360708/kriegalex"}, "reply_to_user": {"reputation": 8454, "user_id": 958529, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c3ec25db39c63bab1a11037649e326b8?s=128&d=identicon&r=PG", "display_name": "halfelf", "link": "https://stackoverflow.com/users/958529/halfelf"}, "edited": false, "score": 0, "creation_date": 1501854047, "post_id": 45462411, "comment_id": 77977484, "body": "just to be sure, I also tried to use the #define JETBRAINS_IDE options but as I said this is another issue because it didn&#39;t change anything"}, {"owner": {"reputation": 87, "user_id": 2229899, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MckN5.jpg?s=128&g=1", "display_name": "Palash Bansal", "link": "https://stackoverflow.com/users/2229899/palash-bansal"}, "edited": false, "score": 0, "creation_date": 1519006351, "post_id": 45462411, "comment_id": 84720799, "body": "I wrote a simple starter code, that just works, might be helpful for someone: <a href=\"https://github.com/PalashBansal96/CUDAClionStarterProject\" rel=\"nofollow noreferrer\">github.com/PalashBansal96/CUDAClionStarterProject</a>"}], "answers": [{"tags": [], "owner": {"reputation": 413, "user_id": 360708, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/bb85747520dba7a0442cba55165cb5b0?s=128&d=identicon&r=PG", "display_name": "Kriegalex", "link": "https://stackoverflow.com/users/360708/kriegalex"}, "is_accepted": false, "score": 4, "last_activity_date": 1509547951, "creation_date": 1509547951, "answer_id": 47057616, "question_id": 45462411, "link": "https://stackoverflow.com/questions/45462411/code-parsing-not-working-with-cuda-clion-and-cmake/47057616#47057616", "title": "Code parsing not working with CUDA, Clion and CMake", "body": "<p>It seems like without the intervention of Jetbrains to add official CUDA support, the most I could get out of the combo CLion + CMake + CUDA was achieved by:</p>\n\n<ul>\n<li>adding .cu and .cuh as C++ files in CLion. This allows Clion to recognize cuda code as C++ code and color it correctly.</li>\n<li>adding an empty dummy .cpp file to the cuda source directory if it is only filled by .cu files (one of my \"dirty\" hacks from my question). I could not find better. This allows Clion to not completely derp. A simple thing like recognizing <em>cstdio</em> doesn't work without this \"hack\" and CLion is basically an enhanced notepad.</li>\n<li>using when possible CMake 3.8+ that officially supports CUDA as a language and use the new \"cuda aware\" <em>add_library()</em> instead of the old macro defined <em>cuda_add_library()</em>. This can avoid problems in the future in case of deprecation.</li>\n<li>in the CMakeLists of the cuda module (or main CMakeLists if only one), include the path to the include directory of cuda to allow Clion to \"see\" the cuda headers. CLion can then propose to you to include them so that CLion resolves correctly CUDA API calls like <em>cudaMalloc()</em> or <em>cudaFree()</em>. This is only needed for CLion as the CUDA compiler doesn't need this includes to compile properly (<em>cuda.h</em>, <em>cuda_runtime.h</em>, ...).</li>\n<li>use this <a href=\"https://stackoverflow.com/a/46101718/360708\">answer</a> to create a \"clion helper\" header file, so that it doesn't derp on symbols like <em>__device__</em> or <em>__global__</em>.</li>\n</ul>\n\n<p>I think that if Jetbrains starts adding support for CUDA, not also will it remove the need to add this dummy file, but it will probably also resolve all other things listed.</p>\n\n<p>Here is the link to the nvidia blog with examples about the official cuda language support in CMake and new \"cuda aware\" <em>add_library()</em> : <a href=\"https://devblogs.nvidia.com/parallelforall/building-cuda-applications-cmake/\" rel=\"nofollow noreferrer\">https://devblogs.nvidia.com/parallelforall/building-cuda-applications-cmake/</a></p>\n"}, {"tags": [], "owner": {"reputation": 413, "user_id": 360708, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/bb85747520dba7a0442cba55165cb5b0?s=128&d=identicon&r=PG", "display_name": "Kriegalex", "link": "https://stackoverflow.com/users/360708/kriegalex"}, "is_accepted": true, "score": 0, "last_activity_date": 1592383032, "creation_date": 1592383032, "answer_id": 62424829, "question_id": 45462411, "link": "https://stackoverflow.com/questions/45462411/code-parsing-not-working-with-cuda-clion-and-cmake/62424829#62424829", "title": "Code parsing not working with CUDA, Clion and CMake", "body": "<p>As of the version 2020.1 of CLion, CUDA projects are now officially supported</p>\n\n<p><a href=\"https://blog.jetbrains.com/clion/2020/04/clion-2020-1-cuda-clang-embedded/\" rel=\"nofollow noreferrer\">https://blog.jetbrains.com/clion/2020/04/clion-2020-1-cuda-clang-embedded/</a></p>\n"}], "owner": {"reputation": 413, "user_id": 360708, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/bb85747520dba7a0442cba55165cb5b0?s=128&d=identicon&r=PG", "display_name": "Kriegalex", "link": "https://stackoverflow.com/users/360708/kriegalex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3630, "favorite_count": 1, "accepted_answer_id": 62424829, "answer_count": 2, "score": 5, "last_activity_date": 1592383032, "creation_date": 1501680879, "last_edit_date": 1501855017, "question_id": 45462411, "link": "https://stackoverflow.com/questions/45462411/code-parsing-not-working-with-cuda-clion-and-cmake", "title": "Code parsing not working with CUDA, Clion and CMake", "body": "<p>I have a project divided in modules, here is a dummy example:</p>\n\n<ul>\n<li>root   \n\n<ul>\n<li>CMakeLists.txt       </li>\n<li>modules\n\n<ul>\n<li>utils\n\n<ul>\n<li>CMakeLists.txt</li>\n<li>src\n\n<ul>\n<li>util_file.cpp       </li>\n</ul></li>\n</ul></li>\n<li>cuda\n\n<ul>\n<li>CMakeLists.txt</li>\n<li>src\n\n<ul>\n<li>cuda_file.cu</li>\n</ul></li>\n</ul></li>\n</ul></li>\n</ul></li>\n</ul>\n\n<p><strong>If I edit the cuda_file.cu with CLion, all the symbols are unresolved</strong> (even the includes from standard library) by CLion. <strong>All the code completion/creation features are then of course gone (among other things)</strong>. The problem seems to be that whenever you create a library or an executable with only CUDA files, Clion becomes stupid and doesn't parse or resolve anything anymore. </p>\n\n<p>There is two workarounds I've found but they are not friendly or \"clean\" to use :</p>\n\n<ul>\n<li>add an empty .cpp file to the directory and add it to the add_library() CMake line. </li>\n<li>switch to another library or executable target that has .cpp files (like utils in my dummy example). But then when you want to compile or execute you have to switch again to cuda target (or some subtarget like test_cuda for test units) and then switch back again to continue coding or debugging, etc...</li>\n</ul>\n\n<p>Here is the CMakeLists.txt from the cuda module with the workaround:</p>\n\n<pre><code>cmake_minimum_required(VERSION 3.5)\nmessage(STATUS \"Configuring module cuda\")\n\n# Build module static library\nFILE(GLOB CUDA_SRCS\n    ${CMAKE_CURRENT_SOURCE_DIR}/src/*.cpp)\nFILE(GLOB CUDA_CU_SRCS\n     ${CMAKE_CURRENT_SOURCE_DIR}/src/*.cu)\nFILE(GLOB CUDA_CU_HDRS\n    ${CMAKE_CURRENT_SOURCE_DIR}/include/*.cuh)\n\ncuda_compile(cuda_objs ${CUDA_CU_SRCS} ${CUDA_CU_HDRS})\nadd_library(cuda STATIC ${CUDA_SRCS} ${cuda_objs})\n# because only .cu files, help cmake detect C++ language\nset_target_properties(cuda PROPERTIES LINKER_LANGUAGE CXX)\n</code></pre>\n\n<p>Is there a way to avoid CLion derping when resolving links to other headers and libraries ? </p>\n\n<p><strong>I've already added .cu and .cuh files as C/C++ code in CLion options and tried using JETBRAINS_IDE define option as explained in another similar post, but those two problems are not the same</strong>.</p>\n"}, {"tags": ["c++", "opencv", "hough-transform"], "answers": [{"comments": [{"owner": {"reputation": 513, "user_id": 5105585, "user_type": "registered", "accept_rate": 59, "profile_image": "https://lh3.googleusercontent.com/-MQDERXC5FUk/AAAAAAAAAAI/AAAAAAAAASU/RUhJXR4ae60/photo.jpg?sz=128", "display_name": "Viktoria", "link": "https://stackoverflow.com/users/5105585/viktoria"}, "edited": false, "score": 0, "creation_date": 1501750709, "post_id": 45472585, "comment_id": 77919343, "body": "<code>line1</code> and <code>line2</code> should be 2x4 Points, right? Because I&#39;m actually working with C++ and now I&#39;m trying to implement your approach.."}, {"owner": {"reputation": 513, "user_id": 5105585, "user_type": "registered", "accept_rate": 59, "profile_image": "https://lh3.googleusercontent.com/-MQDERXC5FUk/AAAAAAAAAAI/AAAAAAAAASU/RUhJXR4ae60/photo.jpg?sz=128", "display_name": "Viktoria", "link": "https://stackoverflow.com/users/5105585/viktoria"}, "edited": false, "score": 0, "creation_date": 1501752391, "post_id": 45472585, "comment_id": 77920698, "body": "I&#39;m failing in the third part <code>get intersection points</code> in my C++ code. :/ because my method <code>std::vector&lt;cv::Point&gt; diagonalLines</code> returns a vector"}, {"owner": {"reputation": 17643, "user_id": 5087436, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZyXHE.jpg?s=128&g=1", "display_name": "alkasm", "link": "https://stackoverflow.com/users/5087436/alkasm"}, "reply_to_user": {"reputation": 513, "user_id": 5105585, "user_type": "registered", "accept_rate": 59, "profile_image": "https://lh3.googleusercontent.com/-MQDERXC5FUk/AAAAAAAAAAI/AAAAAAAAASU/RUhJXR4ae60/photo.jpg?sz=128", "display_name": "Viktoria", "link": "https://stackoverflow.com/users/5105585/viktoria"}, "edited": false, "score": 0, "creation_date": 1501754460, "post_id": 45472585, "comment_id": 77922302, "body": "@Viktoria That&#39;s okay, you can just take any two points on the line! I would probably just take the first and the last point in the vector as the &quot;endpoints&quot; of the diagonal line. The formula works for any points on the line though, they don&#39;t have to be endpoints. In my code, maybe just ignore how I store each line. You can store them in the normal C++ vector of points format if you like. As you can see in the function, the important part is just to work with two pairs of points from each line. Pair 1 can be <code>(x1, y1), (x2, y2)</code> and Pair 2 can be <code>(x3, y3), (x4, y4)</code>."}], "tags": [], "owner": {"reputation": 17643, "user_id": 5087436, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZyXHE.jpg?s=128&g=1", "display_name": "alkasm", "link": "https://stackoverflow.com/users/5087436/alkasm"}, "is_accepted": false, "score": 0, "last_activity_date": 1501716968, "creation_date": 1501716968, "answer_id": 45472585, "question_id": 45462293, "link": "https://stackoverflow.com/questions/45462293/draw-vertical-houghlines-till-certain-intersection-points/45472585#45472585", "title": "Draw vertical HoughLines till certain intersection points", "body": "<p>The OpenCV function <code>line()</code> accepts endpoints as the arguments, so all you need to do is calculate the intersections and use those intersection points for the endpoints of the vertical lines. You can calculate the intersection directly from the endpoints you have as the result of <code>HoughLinesP()</code> <a href=\"https://en.wikipedia.org/wiki/Line%E2%80%93line_intersection#Given_two_points_on_each_line\" rel=\"nofollow noreferrer\">using determinants</a>.</p>\n\n<p>In Python, a function to compute the intersection points might look like</p>\n\n<pre><code>def find_intersection(line1, line2):\n    # extract points\n    x1, y1 = line1[0]\n    x2, y2 = line1[1]\n    x3, y3 = line2[0]\n    x4, y4 = line2[1]\n    # compute determinant\n    Px = ((x1*y2 - y1*x2)*(x3-x4) - (x1-x2)*(x3*y4 - y3*x4)) / \n        ((x1-x2)*(y3-y4) - (y1-y2)*(x3-x4))\n    Py = ((x1*y2 - y1*x2)*(y3-y4) - (y1-y2)*(x3*y4 - y3*x4)) /\n        ((x1-x2)*(y3-y4) - (y1-y2)*(x3-x4))\n    return (int(Px), int(Py))\n</code></pre>\n\n<p>Let's show how you might use this. Suppose your image looked like this:</p>\n\n<pre><code># draw image and lines\nimg = np.ones((500, 500, 3)) * 255\ndiag1 = [(0, 0), (499, 100)]\ndiag2 = [(0, 499), (499, 399)]\nvert1 = [(100, 0), (100, 499)]\nvert2 = [(400, 0), (400, 499)]\ncv2.line(img, diag1[0], diag1[1], color=[0, 0, 255])\ncv2.line(img, diag2[0], diag2[1], color=[0, 0, 255])\ncv2.line(img, vert1[0], vert1[1], color=[0, 255, 0])\ncv2.line(img, vert2[0], vert2[1], color=[0, 255, 0])\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/vh8wV.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/vh8wV.png\" alt=\"Full lines drawn\"></a></p>\n\n<p>To cut them off at the intersection, simply use the function to find those points and only draw the vertical lines at the intersection points with each diagonal line.</p>\n\n<pre><code># get intersection points\nvert1_intersect = [find_intersection(diag1, vert1), find_intersection(diag2, vert1)]\nvert2_intersect = [find_intersection(diag1, vert2), find_intersection(diag2, vert2)]\n\n# draw vertical lines from intersection points\nimg = np.ones((500, 500, 3)) * 255\ndiag1 = [(0, 0), (499, 100)]\ndiag2 = [(0, 499), (499, 399)]\nvert1 = [(100, 0), (100, 499)]\nvert2 = [(400, 0), (400, 499)]\ncv2.line(img, diag1[0], diag1[1], color=[0, 0, 255])\ncv2.line(img, diag2[0], diag2[1], color=[0, 0, 255])\ncv2.line(img, vert1_intersect[0], vert1_intersect[1], color=[0, 255, 0])\ncv2.line(img, vert2_intersect[0], vert2_intersect[1], color=[0, 255, 0])\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/vEJkK.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/vEJkK.png\" alt=\"Vertical lines stopping at intersection point\"></a></p>\n"}], "owner": {"reputation": 513, "user_id": 5105585, "user_type": "registered", "accept_rate": 59, "profile_image": "https://lh3.googleusercontent.com/-MQDERXC5FUk/AAAAAAAAAAI/AAAAAAAAASU/RUhJXR4ae60/photo.jpg?sz=128", "display_name": "Viktoria", "link": "https://stackoverflow.com/users/5105585/viktoria"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 261, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1501716968, "creation_date": 1501680612, "question_id": 45462293, "link": "https://stackoverflow.com/questions/45462293/draw-vertical-houghlines-till-certain-intersection-points", "title": "Draw vertical HoughLines till certain intersection points", "body": "<p>My idea is to draw all vertical lines, which are created by calculating the Canny before, from a intersection point to a diagonal lines to another intersection point (also this point comes from a intersection between a vetical and diagonal line). As a reference here an image, the red vertical (Hough)lines should be drawen: \n<a href=\"https://i.stack.imgur.com/oqFFY.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/oqFFY.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>Until yet I just detect all vertical lines with this implementation: </p>\n\n<pre><code>int main(int argc, char *argv[]) {\n  std::vector&lt;cv::Point&gt; diagonalLine = DiagonalLines::diagonalLines(src);\n\n  Mat wdst, cwdst, contRegion;\n  vector&lt;Vec4i&gt; vericalLines;\n  double maxLineGap = 200.0;\n  double threshold = 100;\n\n  std::vector&lt;cv::Vec4i&gt; elemLinesCur;                                              \n\n  cv::Scalar mu, sigma;\n  meanStdDev(src, mu, sigma);\n\n  Canny(src, wdst, mu.val[0] - sigma.val[0], mu.val[0] + sigma.val[0], 3, false);\n  cvtColor(wdst, cwdst, CV_GRAY2BGR);\n\n  HoughLinesP(wdst, vericalLines, 1, CV_PI / 2, threshold, 50, 200);\n\n  cv::Vec4i current, previous;\n  cv::Point pt1, pt2, ppt1, ppt2;\n\n  for (size_t i = 1; i &lt; vericalLines.size(); i++) {\n    current = vericalLines[i];\n    pt1 = cv::Point(current[0], current[1]);\n    pt2 = cv::Point(current[2], current[3]);\n\n    previous = vericalLines[i - 1];\n    ppt1 = cv::Point(previous[0], previous[1]);\n    ppt2 = cv::Point(previous[2], previous[3]);\n\n    if (diagonalLine[i - 1].y &gt; pt2.y &amp;&amp; diagonalLine[i].y &lt; pt1.y) {\n        std::cout &lt;&lt; \"Intersection: \" &lt;&lt; pt2.x &lt;&lt; \"\\n\";\n    }\n\n    double distanceBetweenPointsX = abs(pt1.x - ppt1.x)*sqrt(2);\n\n    if (distanceBetweenPointsX &gt;= 12) {\n        elemLinesCur.push_back(current);\n\n        double angle = atan2(ppt2.y - ppt1.y, ppt2.x - ppt1.x) * 180.0 / CV_PI;     ///draw only vertical lines (90 degree)\n        if (angle) {\n            line(cwdst, pt1, pt2, cv::Scalar(0, 0, 255), 2, CV_AA);\n        }\n//do some stuff\n}\n</code></pre>\n\n<p>...and here a method, which detect only diagonal lines (it looks similiar to the above one):</p>\n\n<pre><code>std::vector&lt;cv::Point&gt; diagonalLines(cv::Mat src) {\nstd::vector&lt;cv::Point&gt; hitPoint;\n\nScalar mu, sigma;\nmeanStdDev(src, mu, sigma);\n\nCanny(src, ddst, mu.val[0] - sigma.val[0], mu.val[0] + sigma.val[0], 3, false);\n\ncvtColor(ddst, cddst, CV_GRAY2BGR);\nHoughLinesP(ddst, vertlines, 1, CV_PI / 180, 100, 50, 10);\n\ncv::Point pt1, pt2;\nfor (size_t i = 1; i &lt; vertlines.size(); i++) {\n    cv::Vec4i current = vertlines[i];\n    pt1 = cv::Point(current[0], current[1]);\n    pt2 = cv::Point(current[2], current[3]);\n\n    double angle = atan2(pt2.y - pt1.y, pt2.x - pt1.x) * 180.0 / CV_PI;\n    if (angle != -90 &amp;&amp; angle != 90) {\n        //line(cddst, pt1, pt2, Scalar(0, 0, 255), 2, CV_AA);\n        hitPoint.push_back(pt1);\n        hitPoint.push_back(pt2);\n    }\n}\nreturn hitPoint;\n}\n</code></pre>\n\n<p><strong>What I know:</strong>\nI should calculate all those intersection points, yes, I also tried it in <code>if (diagonalLine[i - 1].y &gt; pt2.y &amp;&amp; diagonalLine[i].y &lt; pt1.y)</code> but I don't get the further steps. Could some one help me? Thank you in advance!</p>\n"}, {"tags": ["c++", "opengl", "linear-algebra", "assimp"], "comments": [{"owner": {"reputation": 36513, "user_id": 752976, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/j7Uis.jpg?s=128&g=1", "display_name": "Bartek Banachewicz", "link": "https://stackoverflow.com/users/752976/bartek-banachewicz"}, "edited": false, "score": 1, "creation_date": 1501680107, "post_id": 45461893, "comment_id": 77884627, "body": "<i>Is it possible in some way to manually convert every object?</i> - yes, of course. If it only changes the rotation matrix, though, why don&#39;t you simply change it there?"}, {"owner": {"reputation": 755, "user_id": 1009476, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c910254e81e50a7f6c58662aa2d9cb4d?s=128&d=identicon&r=PG", "display_name": "Shepard", "link": "https://stackoverflow.com/users/1009476/shepard"}, "reply_to_user": {"reputation": 36513, "user_id": 752976, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/j7Uis.jpg?s=128&g=1", "display_name": "Bartek Banachewicz", "link": "https://stackoverflow.com/users/752976/bartek-banachewicz"}, "edited": false, "score": 1, "creation_date": 1501691152, "post_id": 45461893, "comment_id": 77893214, "body": "Because in this way scripting objects must be done with Z-up"}, {"owner": {"reputation": 759, "user_id": 1898099, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OSyVe.png?s=128&g=1", "display_name": "Aeluned", "link": "https://stackoverflow.com/users/1898099/aeluned"}, "edited": false, "score": 0, "creation_date": 1501691831, "post_id": 45461893, "comment_id": 77893627, "body": "You could bake the rotation into the vertex data that is read in and then undo the rotation in the matrix. This will of course slow down the reading of the scene depending on amount of vertices."}, {"owner": {"reputation": 755, "user_id": 1009476, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c910254e81e50a7f6c58662aa2d9cb4d?s=128&d=identicon&r=PG", "display_name": "Shepard", "link": "https://stackoverflow.com/users/1009476/shepard"}, "edited": false, "score": 0, "creation_date": 1501695968, "post_id": 45461893, "comment_id": 77896118, "body": "I am not sure it is that easy. Some nodes could carry local (Z-up) transformations like a rotation matrix."}], "owner": {"reputation": 755, "user_id": 1009476, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c910254e81e50a7f6c58662aa2d9cb4d?s=128&d=identicon&r=PG", "display_name": "Shepard", "link": "https://stackoverflow.com/users/1009476/shepard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 416, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1501679625, "creation_date": 1501679625, "question_id": 45461893, "link": "https://stackoverflow.com/questions/45461893/assimp-axis-conversion", "title": "Assimp axis conversion", "body": "<p>Assimp converts the imported scene from Z-up to Y-up with a rotation matrix in the root node; this is fine for displaying but makes scripting objects a nightmare.</p>\n\n<p>Is there a way around this? Is it possible in some way to manually convert every object? I think in that case the matrices should be converted too.</p>\n"}, {"tags": ["c++", "visual-studio-2010", "gcc"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1501679660, "post_id": 45461833, "comment_id": 77884210, "body": "Dereferencing a null pointer leads to <a href=\"http://en.cppreference.com/w/cpp/language/ub\" rel=\"nofollow noreferrer\"><i>undefined behavior</i></a>, and sometimes UB might actually <i>seem</i> to work. It might also be possible that the compiler have optimized out the code. As long as you have UB it&#39;s not really possible to say anything else, or to predict something."}, {"owner": {"reputation": 2897, "user_id": 3392714, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/302ac6bfbe982dcd53aa123f9bde72eb?s=128&d=identicon&r=PG&f=1", "display_name": "dani", "link": "https://stackoverflow.com/users/3392714/dani"}, "edited": false, "score": 0, "creation_date": 1501679685, "post_id": 45461833, "comment_id": 77884237, "body": "When running in debug mode, your favorit ide will give the location of the error."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2672107"}, "edited": false, "score": 1, "creation_date": 1501679904, "post_id": 45461833, "comment_id": 77884434, "body": "Consider using std::optional instead of a pointer and a reference."}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 1, "creation_date": 1501680102, "post_id": 45461833, "comment_id": 77884621, "body": "I&#39;d say you shouldn&#39;t worry about this. In most real cases you&#39;d get a segfault."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 1, "creation_date": 1501680108, "post_id": 45461833, "comment_id": 77884628, "body": "For debugging purposes tools like debuggers (<code>gdb</code>) and <a href=\"http://valgrind.org/\" rel=\"nofollow noreferrer\">valgrind</a> help a lot. But they don&#39;t make your program &quot;fail&quot; on null dereference; it is still undefined behavior (and often but not always your program still crashes). Don&#39;t forget to compile with all warnings &amp; debug info (e.g. <code>g++ -Wall -Wextra -g</code> if using <a href=\"http://gcc.gnu.org/\" rel=\"nofollow noreferrer\">GCC</a>."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1501685207, "post_id": 45461833, "comment_id": 77888856, "body": "You might have some luck with static code analyzer tools."}, {"owner": {"reputation": 4556, "user_id": 1269661, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/5f3a348bd307a1a2c6ecefb06519ab81?s=128&d=identicon&r=PG", "display_name": "Predelnik", "link": "https://stackoverflow.com/users/1269661/predelnik"}, "edited": false, "score": 0, "creation_date": 1596792089, "post_id": 45461833, "comment_id": 111930654, "body": "Don&#39;t think that answers here are that helpful, the behavior is undefined but it doesn&#39;t preclude a compiler from generating nullptr assertion check in debug mode for each dereference/ member access on pointer. However I don&#39;t think that even modern versions of compilers provide such an option. One possibility is to make your own class for raw ptrs and put assertions to relevant operators (also could be used for forbidding pointer arithmetic etc.)"}], "answers": [{"comments": [{"owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 1, "creation_date": 1501679855, "post_id": 45461940, "comment_id": 77884394, "body": "I am under the impression that the OP is searching for a compiler flag or an analysis tool that will catch these kind of bugs."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 1, "creation_date": 1501679924, "post_id": 45461940, "comment_id": 77884455, "body": "@bolov then he at least should mention for which compiler, should he not?"}, {"owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 0, "creation_date": 1501680048, "post_id": 45461940, "comment_id": 77884568, "body": "he wants a way to automatically catch these kinds of errors, similar of how accessing null will throw a NullPointerException in java"}, {"owner": {"reputation": 156, "user_id": 7035250, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b1b1b7c1aacddb9a9b32aea065bc3cbc?s=128&d=identicon&r=PG&f=1", "display_name": "Davidius", "link": "https://stackoverflow.com/users/7035250/davidius"}, "edited": false, "score": 0, "creation_date": 1501680120, "post_id": 45461940, "comment_id": 77884637, "body": "The compiler is MSVC 10.0 and gcc 4.9. I will edit the question to reflect that."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 0, "creation_date": 1501680127, "post_id": 45461940, "comment_id": 77884643, "body": "@bolov the he should use java"}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 156, "user_id": 7035250, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b1b1b7c1aacddb9a9b32aea065bc3cbc?s=128&d=identicon&r=PG&f=1", "display_name": "Davidius", "link": "https://stackoverflow.com/users/7035250/davidius"}, "edited": false, "score": 0, "creation_date": 1501680271, "post_id": 45461940, "comment_id": 77884769, "body": "@Davidius: Added the test for nullness in the answer - simply use that before attempting to dereference."}, {"owner": {"reputation": 156, "user_id": 7035250, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b1b1b7c1aacddb9a9b32aea065bc3cbc?s=128&d=identicon&r=PG&f=1", "display_name": "Davidius", "link": "https://stackoverflow.com/users/7035250/davidius"}, "edited": false, "score": 0, "creation_date": 1501680805, "post_id": 45461940, "comment_id": 77885199, "body": "I know that. I was looking for possibility to move the segmentation fault (or an exception) into a different location so the it is clear who dereferenced the nullpointer. That would ease the process of finding where the nullpointer was used."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 156, "user_id": 7035250, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b1b1b7c1aacddb9a9b32aea065bc3cbc?s=128&d=identicon&r=PG&f=1", "display_name": "Davidius", "link": "https://stackoverflow.com/users/7035250/davidius"}, "edited": false, "score": 0, "creation_date": 1501680902, "post_id": 45461940, "comment_id": 77885267, "body": "@Davidius: No you can&#39;t do that. There is no defined behaviour when dereferencing a nullptr. Your only option is to test it as I state above and throw an exception &amp;c. yourself."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 156, "user_id": 7035250, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b1b1b7c1aacddb9a9b32aea065bc3cbc?s=128&d=identicon&r=PG&f=1", "display_name": "Davidius", "link": "https://stackoverflow.com/users/7035250/davidius"}, "edited": false, "score": 0, "creation_date": 1501680907, "post_id": 45461940, "comment_id": 77885277, "body": "@Davidius when you dereferencing a pointer in C++ you should always think &quot;can this pointer be a nullptr?&quot; and always check (at least by assert) unless you completely sure it is not possible."}, {"owner": {"reputation": 156, "user_id": 7035250, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b1b1b7c1aacddb9a9b32aea065bc3cbc?s=128&d=identicon&r=PG&f=1", "display_name": "Davidius", "link": "https://stackoverflow.com/users/7035250/davidius"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1501739481, "post_id": 45461940, "comment_id": 77912053, "body": "@Slava I&#39;m not the one dereferencing, I&#39;m the one who gets the dereferenced reference."}], "tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": false, "score": 5, "last_activity_date": 1501680206, "last_edit_date": 1501680206, "creation_date": 1501679729, "answer_id": 45461940, "question_id": 45461833, "link": "https://stackoverflow.com/questions/45461833/how-to-create-an-error-on-dereferencing-a-nullpointer/45461940#45461940", "title": "How to create an error on dereferencing a nullpointer?", "body": "<p>The behaviour of your code is <em>undefined</em>.</p>\n\n<p>You might not <em>necessarily</em> get a segmentation fault (the compiler might even optimise out the offending statements), so don't rely on this technique in portable C++.</p>\n\n<p>If you want to crash your program then use <code>std::abort();</code>, or <code>std::terminate();</code></p>\n\n<p>If you want to test a pointer <code>ptr</code> for nullness then use</p>\n\n<pre><code>if (!ptr){\n    // ptr is nullptr\n}\n</code></pre>\n\n<p>References:</p>\n\n<p><a href=\"http://en.cppreference.com/w/cpp/utility/program/abort\" rel=\"nofollow noreferrer\">http://en.cppreference.com/w/cpp/utility/program/abort</a>\n <a href=\"http://en.cppreference.com/w/cpp/error/terminate\" rel=\"nofollow noreferrer\">http://en.cppreference.com/w/cpp/error/terminate</a></p>\n"}, {"tags": [], "owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "is_accepted": false, "score": 0, "last_activity_date": 1501681024, "last_edit_date": 1501681024, "creation_date": 1501680694, "answer_id": 45462331, "question_id": 45461833, "link": "https://stackoverflow.com/questions/45461833/how-to-create-an-error-on-dereferencing-a-nullpointer/45462331#45462331", "title": "How to create an error on dereferencing a nullpointer?", "body": "<blockquote>\n  <p>To ease the finding of the error I want the dereferencing to fail on nullpointers so that the segmentation fault is caused in the above code. Is it possible to achieve this and how?</p>\n</blockquote>\n\n<p>There is no actual dereferencing happens in code snippet you mentioned - I mean no memory access necessary when you define a reference. But things are even worse - even when you start to use that reference compiler is not obligated by C++ standard to check for <code>nullptr</code>, so there is no portable way to check it automatically. Only portable way - provide code that validates it manually:</p>\n\n<pre><code>int* a = 0;\nassert( a );\nint&amp; b = *a;\n</code></pre>\n\n<p>this way you will validate correctness in debug mode and would not have this code in release. Or you can put code that always checks it. Point is - it is your responsibility to decide if you are willing to pay that price of validating pointers. Some of compilers though have options to enable <code>nullptr</code> detection, you should rely on compiler documentation for that. But that way is not portable at all. And even when you use that flag there is no guaratntee that such validation would happen when you declare a reference (especially when optimization enabled).</p>\n"}, {"comments": [{"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1501681242, "post_id": 45462515, "comment_id": 77885576, "body": "I&#39;d prefer throwing something like <code>struct NullReference{};</code> and throwing that, so you can have less ambiguity at catch sites."}], "tags": [], "owner": {"reputation": 669, "user_id": 8250830, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/f0443bc84039aa7bf48e0124a11ae60d?s=128&d=identicon&r=PG&f=1", "display_name": "RottenCheese", "link": "https://stackoverflow.com/users/8250830/rottencheese"}, "is_accepted": false, "score": 0, "last_activity_date": 1501681104, "creation_date": 1501681104, "answer_id": 45462515, "question_id": 45461833, "link": "https://stackoverflow.com/questions/45461833/how-to-create-an-error-on-dereferencing-a-nullpointer/45462515#45462515", "title": "How to create an error on dereferencing a nullpointer?", "body": "<p>Complementing Bathsheba's answer:</p>\n\n<p>You could put that code inside a try-catch statement and raise an exception when the pointer is a nullptr and then do something. For example</p>\n\n<pre><code>enum PointerException {\n     NullReference = 1\n};\n</code></pre>\n\n<p>And then something like:</p>\n\n<pre><code>try {\n    if(!ptr) {\n       //Your pointer ain't null, do something.\n    } else {\n       //Your pointer is null, raise an exception.\n       throw PointerException::NullReference;\n    }\n} catch(PointerException exception) {\n   //Do something with your exception\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 156, "user_id": 7035250, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b1b1b7c1aacddb9a9b32aea065bc3cbc?s=128&d=identicon&r=PG&f=1", "display_name": "Davidius", "link": "https://stackoverflow.com/users/7035250/davidius"}, "edited": false, "score": 0, "creation_date": 1501740203, "post_id": 45463411, "comment_id": 77912372, "body": "I tried a small example, it does not move the error into another place but gives an enhanced error message. The docu at <a href=\"https://github.com/google/sanitizers/wiki/AddressSanitizerAlgorithm\" rel=\"nofollow noreferrer\">link</a> stated that the operator has been replaced. I expected the error to occur at the dereferenciation itself."}], "tags": [], "owner": {"reputation": 1050, "user_id": 4534275, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/671721deaa074d660cc7a13bfbd6b397?s=128&d=identicon&r=PG", "display_name": "nefas", "link": "https://stackoverflow.com/users/4534275/nefas"}, "is_accepted": true, "score": 1, "last_activity_date": 1501683402, "creation_date": 1501683402, "answer_id": 45463411, "question_id": 45461833, "link": "https://stackoverflow.com/questions/45461833/how-to-create-an-error-on-dereferencing-a-nullpointer/45463411#45463411", "title": "How to create an error on dereferencing a nullpointer?", "body": "<p>With gcc, you have the address sanitizer which is a flag make the compiler add some code that cause crashes when you try to access invalid addresses (out of bound, null pointer, ...).</p>\n\n<p>You can search <code>-fsanitize=address</code> in <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Instrumentation-Options.html\" rel=\"nofollow noreferrer\">gcc's documentation for instrumentation</a>.</p>\n\n<p>When using a sanitizer (with gcc) you have to link to the sanitizer.\nFor example:</p>\n\n<pre><code>g++ -fsanitize=address -c -o file.o file.cpp\ng++ -o a.out file.o -fsanitize=address\n</code></pre>\n\n<p>I don't think that MSVC has a similar mechanism.</p>\n"}], "owner": {"reputation": 156, "user_id": 7035250, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b1b1b7c1aacddb9a9b32aea065bc3cbc?s=128&d=identicon&r=PG&f=1", "display_name": "Davidius", "link": "https://stackoverflow.com/users/7035250/davidius"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 861, "favorite_count": 0, "accepted_answer_id": 45463411, "answer_count": 4, "score": 1, "last_activity_date": 1501683402, "creation_date": 1501679461, "last_edit_date": 1501680195, "question_id": 45461833, "link": "https://stackoverflow.com/questions/45461833/how-to-create-an-error-on-dereferencing-a-nullpointer", "title": "How to create an error on dereferencing a nullpointer?", "body": "<p>The following code compiles without error and runs without segmentation fault:</p>\n\n<pre><code>int* a = 0;\nint&amp; b = *a;\n</code></pre>\n\n<p>We do have a nullpointer in the reference. This reference may be moved in the project for a while until it gets used. When it gets used it will produce a segmentation fault.</p>\n\n<p>The currently used compilers are MSVC 10.0 and gcc 4.9.\nTo ease the finding of the error I want the dereferencing to fail on nullpointers so that the segmentation fault is caused in the above code. Is it possible to achieve this and how?</p>\n"}, {"tags": ["c++", "encryption", "aes", "crypto++", "initialization-vector"], "comments": [{"owner": {"reputation": 27269, "user_id": 2320035, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/83d5a6d76755c6a987dd59495698dcfe?s=128&d=identicon&r=PG", "display_name": "sascha", "link": "https://stackoverflow.com/users/2320035/sascha"}, "edited": false, "score": 0, "creation_date": 1501679587, "post_id": 45461770, "comment_id": 77884158, "body": "Is there no pre-made primitive doing that for you in this lib? No? Then be careful and read up base64-encoding."}, {"owner": {"reputation": 247, "user_id": 8096090, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/o1UZC.jpg?s=128&g=1", "display_name": "EinderJam", "link": "https://stackoverflow.com/users/8096090/einderjam"}, "reply_to_user": {"reputation": 27269, "user_id": 2320035, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/83d5a6d76755c6a987dd59495698dcfe?s=128&d=identicon&r=PG", "display_name": "sascha", "link": "https://stackoverflow.com/users/2320035/sascha"}, "edited": false, "score": 0, "creation_date": 1501685159, "post_id": 45461770, "comment_id": 77888817, "body": "I didn&#39;t see anything to do that in the wiki.I can base64 encode the iv (which is a byte[]) to a string,but decode process is more complicated,since it converts the encoded string to a decoded string,and i want to recover my byte array :)"}], "answers": [{"tags": [], "owner": {"reputation": 79299, "user_id": 589259, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/vJbKg.jpg?s=128&g=1", "display_name": "Maarten Bodewes", "link": "https://stackoverflow.com/users/589259/maarten-bodewes"}, "is_accepted": false, "score": 0, "last_activity_date": 1501793260, "creation_date": 1501793260, "answer_id": 45494230, "question_id": 45461770, "link": "https://stackoverflow.com/questions/45461770/storing-the-iv-with-the-ciphertext-crypto-cbc-aes-encryption/45494230#45494230", "title": "Storing the IV with the ciphertext Crypto++ CBC AES encryption", "body": "<p>The <code>StringSink</code> has the following documentation:</p>\n\n<blockquote>\n  <p>A <code>StringSink</code> serves as a destination for string data in the pipelining paradigm. <strong>The data can be binary or ASCII.</strong></p>\n</blockquote>\n\n<p>So although it is a string, it is internally an <em>octet- or byte string</em>. So yes, you can just save the IV and ciphertext that way.</p>\n\n<p>But to be sure, just compare the length of the result with the IV size (16 bytes) and ciphertext size together. If it is equal then you should be fine.</p>\n"}, {"comments": [{"owner": {"reputation": 247, "user_id": 8096090, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/o1UZC.jpg?s=128&g=1", "display_name": "EinderJam", "link": "https://stackoverflow.com/users/8096090/einderjam"}, "edited": false, "score": 0, "creation_date": 1501836035, "post_id": 45494748, "comment_id": 77964746, "body": "Thank you ! There is something i don&#39;t understand : with this FileSource source(fin, true /*pump all*/, NULLPTR); ,where do you store the file content ? I also get an &quot; fin :multiples initialisations with your ifstream/filesource example"}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "reply_to_user": {"reputation": 247, "user_id": 8096090, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/o1UZC.jpg?s=128&g=1", "display_name": "EinderJam", "link": "https://stackoverflow.com/users/8096090/einderjam"}, "edited": false, "score": 0, "creation_date": 1501836364, "post_id": 45494748, "comment_id": 77964957, "body": "@Einder - Ask a new question and show your code. I need to see what you are doing. Also show the full error message."}, {"owner": {"reputation": 247, "user_id": 8096090, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/o1UZC.jpg?s=128&g=1", "display_name": "EinderJam", "link": "https://stackoverflow.com/users/8096090/einderjam"}, "edited": false, "score": 0, "creation_date": 1501837127, "post_id": 45494748, "comment_id": 77965497, "body": "I got the error fixed (fin was the name i was using previously to read the plaintext),but my question remains"}, {"owner": {"reputation": 247, "user_id": 8096090, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/o1UZC.jpg?s=128&g=1", "display_name": "EinderJam", "link": "https://stackoverflow.com/users/8096090/einderjam"}, "edited": false, "score": 0, "creation_date": 1501838171, "post_id": 45494748, "comment_id": 77966249, "body": "As requested,i asked a new question with the code i&#39;m using."}, {"owner": {"reputation": 247, "user_id": 8096090, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/o1UZC.jpg?s=128&g=1", "display_name": "EinderJam", "link": "https://stackoverflow.com/users/8096090/einderjam"}, "edited": false, "score": 0, "creation_date": 1501867059, "post_id": 45494748, "comment_id": 77985734, "body": ":Another problem here: when using StringSource from your example,the executable crashes.according to visual studio the syntax is correct,but it keeps crashing at this point.the same error occurs if i replace the redirector by a StringSink."}, {"owner": {"reputation": 654, "user_id": 4393935, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ftOty.jpg?s=128&g=1", "display_name": "Volkan G&#252;ven", "link": "https://stackoverflow.com/users/4393935/volkan-g%c3%bcven"}, "edited": false, "score": 0, "creation_date": 1521385590, "post_id": 45494748, "comment_id": 85698504, "body": "Sir, I think you should update the answer to the latest version of the framework. As you know <code>EAX</code> mode does not support encryption/decryption via <code>StreamTransformationFilter</code>. For the process of encryption, <code>AuthenticatedEncryptionFilter</code> and for the decryption, <code>AuthenticatedDecryptionFilter</code> must be used."}], "tags": [], "owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "is_accepted": false, "score": 2, "last_activity_date": 1501796233, "last_edit_date": 1501796233, "creation_date": 1501795447, "answer_id": 45494748, "question_id": 45461770, "link": "https://stackoverflow.com/questions/45461770/storing-the-iv-with-the-ciphertext-crypto-cbc-aes-encryption/45494748#45494748", "title": "Storing the IV with the ciphertext Crypto++ CBC AES encryption", "body": "<blockquote>\n  <p>Storing the IV with the ciphertext Crypto++ CBC AES encryption</p>\n</blockquote>\n\n<p>Some of the code you are using is a bit unusual to me. I'll pick a couple things out and show you some of the Crypto++ ways.</p>\n\n<p>Before you begin, take a look at <a href=\"https://www.cryptopp.com/wiki/Pipelining\" rel=\"nofollow noreferrer\">Pipelines</a> and <a href=\"https://www.cryptopp.com/wiki/Pumping_Data\" rel=\"nofollow noreferrer\">Pumping Data</a> on the Crypto++ wiki. Remember that data flows from sources to sinks. In between the data encounters filters which transform the data.</p>\n\n<hr>\n\n<pre><code>std::ifstream fin(file_path, std::ios::binary);\nif (!fin)\n{\n    std::cout &lt;&lt; \"error\";\n}\nstd::ostringstream ostrm;\nostrm &lt;&lt; fin.rdbuf();\nstd::string plaintext(ostrm.str());\nfin.close();\n</code></pre>\n\n<p>A Crypto++ <code>FileSource</code> has a constructor that takes a <code>std::istream</code>. You could do something like the following. Also see <a href=\"https://www.cryptopp.com/wiki/FileSource\" rel=\"nofollow noreferrer\"><code>FileSource</code></a> on the Crypto++ wiki.</p>\n\n<pre><code>std::ifstream fin(file_path, std::ios::binary);\nFileSource source(fin, true /*pump all*/, NULLPTR);\n...\n</code></pre>\n\n<hr>\n\n<blockquote>\n<pre><code>AES::Encryption aesEncryption(key, CryptoPP::AES::MAX_KEYLENGTH);\nCBC_Mode_ExternalCipher::Encryption cbcEncryption(aesEncryption, iv);\n</code></pre>\n</blockquote>\n\n<p><code>ExternalCipher</code> are for the FIPS DLL. You can use them without the DLL, but they exist for the DLL. Usually you use:</p>\n\n<pre><code> CBC_Mode&lt;AES&gt;::Encryption encryptor;\n</code></pre>\n\n<p>Also, you usually want to avoid a <em>confidentiality-only</em> mode. Typically you want to use an <a href=\"https://www.cryptopp.com/wiki/Authenticated_Encryption\" rel=\"nofollow noreferrer\">Authenticated Encryption</a> mode of operation. It provides <em>confidentiality and authenticity</em>.</p>\n\n<p>Crypto++ provides CCM, EAX and GCM authenticated encryption modes of operation. OCB and EAX are very good choices. EAX mode is documented at <a href=\"https://www.cryptopp.com/wiki/EAX_Mode\" rel=\"nofollow noreferrer\">EAX Mode</a> on the Crypto++ wiki. OCB is not available at the moment. We are getting ready to check-in OCB mode.</p>\n\n<hr>\n\n<blockquote>\n  <p>Now,i want to write the encrypted string to a file,and store the IV with it,since the iv doesn't need to be kept secret,ideally at the beginning or the end of the ciphertext</p>\n</blockquote>\n\n<p>Use something like the following. I did not compile it, so you will need to fix the typos.</p>\n\n<pre><code>AutoSeededRandomPool prng;\nSecByteBlock key(AES::MAXIMUM_KEYLENGTH), iv(AES::BLOCKSIZE);\n\nRandomNumberSource rs1(prng, AES::MAXIMUM_KEYLENGTH, new ArraySink(key, key.size()));\nRandomNumberSource rs2(prng, AES::BLOCKSIZE, new ArraySink(iv, iv.size()));\n\nHexEncoder encoder(new FileSink(std::cout));\n\nstd::cout &lt;&lt; \"Key: \";\nencoder.Put(key, key.size());\nencoder.MessageEnd();\nstd::cout &lt;&lt; std::endl;\n\nstd::cout &lt;&lt; \"IV: \";\nencoder.Put(iv, iv.size());\nencoder.MessageEnd();\nstd::cout &lt;&lt; std::endl;\n\nEAX&lt;AES&gt;::Encryption encryptor;\nencryptor.SetKeyWithIV(key, key.size(), iv, iv.size());\n\n// Plaintext message\nstd::string message;\n\n// Output file\nFileSink file(\"message.enc\");\n\n// Source wrappers\nArraySource as(iv, iv.size(), true,\n    new Redirector(file));\n\n// Source wrapper\nStringSource ss(message, true,\n    new StreamTransformationFilter(encryptor,\n       new Redirector(file)));\n</code></pre>\n\n<hr>\n\n<blockquote>\n  <p>When i will try to decrypt this file,how can i extract the iv and ciphertext separately ? </p>\n</blockquote>\n\n<p>Use something like the following.</p>\n\n<pre><code>// Key is from previous example. It cannot change\nSecByteBlock key(AES::MAXIMUM_KEYLENGTH), iv(AES::BLOCKSIZE);    \nFileSource fs(\"message.enc\", false /* DO NOT Pump All */);\n\n// Attach new filter\nArraySink as(iv, iv.size());\nfs.Attach(new Redirector(as));\nfs.Pump(AES::BLOCKSIZE);  // Pump first 16 bytes\n\nEAX&lt;AES&gt;::Decryption decryptor;\ndecryptor.SetKeyWithIV(key, key.size(), iv, iv.size());\n\n// Detach previously attached filter, attach new filter\nByteQueue queue;\nfs.Detach(new StreamTransformationFilter(decryptor, new Redirector(queue)));\nfs.PumpAll();  // Pump remainder of bytes\n</code></pre>\n\n<p>The encrypted data will be in a <code>ByteQueue</code>. It does <em>not</em> provide C++ iterator-like functionality, like a pointer and a size. To get the data out of the <code>ByteQueue</code> you transfer it or copy it to another filter or a sink:</p>\n\n<pre><code>SecByteBlock block(queue.MaxRetrievable());\nArraySink sink(block, block.size());\nqueue.TransferTo(sink);\n</code></pre>\n\n<p>You can get the data out of the <code>ByteQueue</code> and put it in a<code>std::string</code> with:</p>\n\n<pre><code>std::string recovered;\nStringSink sink(recovered);\nqueue.TransferTo(sink);\n</code></pre>\n\n<p>And you can print the IV recovered from the file with:</p>\n\n<pre><code>HexEncoder encoder(new FileSink(std::cout));\n\nstd::cout &lt;&lt; \"IV: \";\nencoder.Put(iv, iv.size());\nencoder.MessageEnd();\nstd::cout &lt;&lt; std::endl;\n</code></pre>\n"}], "owner": {"reputation": 247, "user_id": 8096090, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/o1UZC.jpg?s=128&g=1", "display_name": "EinderJam", "link": "https://stackoverflow.com/users/8096090/einderjam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1888, "favorite_count": 2, "answer_count": 2, "score": 1, "last_activity_date": 1501796233, "creation_date": 1501679307, "last_edit_date": 1501792933, "question_id": 45461770, "link": "https://stackoverflow.com/questions/45461770/storing-the-iv-with-the-ciphertext-crypto-cbc-aes-encryption", "title": "Storing the IV with the ciphertext Crypto++ CBC AES encryption", "body": "<p>I'm trying to encrypt(and decrypt after) a file using AES in CBC mode and Crypto++ library</p>\n\n<p>Here's what I already did:</p>\n\n<pre><code>using namespace CryptoPP;\nAutoSeededRandomPool rnd;\n\n//generating the key and iv\nSecByteBlock key(AES::MAX_KEYLENGTH);\nrnd.GenerateBlock(key, key.size());\nbyte iv[AES::BLOCKSIZE];\nrnd.GenerateBlock(iv, AES::BLOCKSIZE);\n</code></pre>\n\n<p>To encrypt a file,I open it in binary mode,and dump the content to a string :</p>\n\n<pre><code>std::ifstream fin(file_path, std::ios::binary);\nif (!fin)\n{\n    std::cout &lt;&lt; \"error\";\n}\nstd::ostringstream ostrm;\nostrm &lt;&lt; fin.rdbuf();\nstd::string plaintext(ostrm.str());\nfin.close();\n</code></pre>\n\n<p>Then,I encrypt this string using the key and iv previously generated:</p>\n\n<pre><code>std::string ciphertext;\n\nAES::Encryption aesEncryption(key, CryptoPP::AES::MAX_KEYLENGTH);\nCBC_Mode_ExternalCipher::Encryption cbcEncryption(aesEncryption, iv);\n\nStreamTransformationFilter stfEncryptor(cbcEncryption, new CryptoPP::StringSink(ciphertext));\nstfEncryptor.Put(reinterpret_cast&lt;const unsigned char*&gt;(plaintext.c_str()), plaintext.length() + 1);\nstfEncryptor.MessageEnd();\n</code></pre>\n\n<p>Now,i want to write the encrypted string to a file,and store the IV with it,since the iv doesn't need to be kept secret,ideally at the beginning or the end of the ciphertext</p>\n\n<p>Here comes the problem : the IV is a byte array and the ciphertext is a string,do i need to convert one of the two to another type,or can i just do :</p>\n\n<pre><code>std::ofstream fdout(file_path2, std::ios::binary);\nif (!fdout)\n{\n    std::cout &lt;&lt; \"error\";\n}\nfdout &lt;&lt; iv;\nfdout &lt;&lt; ciphertext;\nfdout.close();\n</code></pre>\n\n<p>When i will try to decrypt this file,how can i extract the iv and ciphertext separately ? The IV is 16 Bytes long,but here i'm completely lost and i don't know how to do.</p>\n"}, {"tags": ["c++", "build", "arm"], "answers": [{"comments": [{"owner": {"reputation": 381, "user_id": 6278636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-0am1F8D2FHY/AAAAAAAAAAI/AAAAAAAAAC0/ytu3ro7LQKY/photo.jpg?sz=128", "display_name": "Eduardo Perez", "link": "https://stackoverflow.com/users/6278636/eduardo-perez"}, "edited": false, "score": 0, "creation_date": 1501694688, "post_id": 45461624, "comment_id": 77895396, "body": "Thanks. I just noticed the application says this on it&#39;s source code page: &quot;for the moment, (app) must be compiled with devkitARM r46/libctru 1.2.1/citro3D 1.2.0&quot;"}, {"owner": {"reputation": 381, "user_id": 6278636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-0am1F8D2FHY/AAAAAAAAAAI/AAAAAAAAAC0/ytu3ro7LQKY/photo.jpg?sz=128", "display_name": "Eduardo Perez", "link": "https://stackoverflow.com/users/6278636/eduardo-perez"}, "edited": false, "score": 0, "creation_date": 1501696495, "post_id": 45461624, "comment_id": 77896432, "body": "Even though I installed devkitARM, it seems that it still uses the same compiler instead of devkitARM."}, {"owner": {"reputation": 5397, "user_id": 2193020, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/aa10d01a3d48851073bd61877a56b5a7?s=128&d=identicon&r=PG", "display_name": "hnefatl", "link": "https://stackoverflow.com/users/2193020/hnefatl"}, "reply_to_user": {"reputation": 381, "user_id": 6278636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-0am1F8D2FHY/AAAAAAAAAAI/AAAAAAAAAC0/ytu3ro7LQKY/photo.jpg?sz=128", "display_name": "Eduardo Perez", "link": "https://stackoverflow.com/users/6278636/eduardo-perez"}, "edited": false, "score": 0, "creation_date": 1501701872, "post_id": 45461624, "comment_id": 77899586, "body": "@EduardoPerez Have you tried using the <code>CC=</code> trick? If you tried with the above and it didn&#39;t work, try with <code>CC=arm-none-eabi-gcc</code> and the appropriate for <code>CXX</code>, as that&#39;s what your output implies it&#39;s looking for."}, {"owner": {"reputation": 381, "user_id": 6278636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-0am1F8D2FHY/AAAAAAAAAAI/AAAAAAAAAC0/ytu3ro7LQKY/photo.jpg?sz=128", "display_name": "Eduardo Perez", "link": "https://stackoverflow.com/users/6278636/eduardo-perez"}, "edited": false, "score": 0, "creation_date": 1501706251, "post_id": 45461624, "comment_id": 77902106, "body": "I also noticed if I remove the 2 lines involving zlib, I get a different error. I&#39;ll update the question to reflect that. Would it help if I were to link to the application&#39;s source code?"}, {"owner": {"reputation": 381, "user_id": 6278636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-0am1F8D2FHY/AAAAAAAAAAI/AAAAAAAAAC0/ytu3ro7LQKY/photo.jpg?sz=128", "display_name": "Eduardo Perez", "link": "https://stackoverflow.com/users/6278636/eduardo-perez"}, "edited": false, "score": 1, "creation_date": 1501960287, "post_id": 45461624, "comment_id": 78011087, "body": "I think I figured it out. It seems that I had it setup for my user, but I was running the script as root."}, {"owner": {"reputation": 381, "user_id": 6278636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-0am1F8D2FHY/AAAAAAAAAAI/AAAAAAAAAC0/ytu3ro7LQKY/photo.jpg?sz=128", "display_name": "Eduardo Perez", "link": "https://stackoverflow.com/users/6278636/eduardo-perez"}, "edited": false, "score": 0, "creation_date": 1501982208, "post_id": 45461624, "comment_id": 78015770, "body": "It seems that it can&#39;t find nihstro"}, {"owner": {"reputation": 5397, "user_id": 2193020, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/aa10d01a3d48851073bd61877a56b5a7?s=128&d=identicon&r=PG", "display_name": "hnefatl", "link": "https://stackoverflow.com/users/2193020/hnefatl"}, "reply_to_user": {"reputation": 381, "user_id": 6278636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-0am1F8D2FHY/AAAAAAAAAAI/AAAAAAAAAC0/ytu3ro7LQKY/photo.jpg?sz=128", "display_name": "Eduardo Perez", "link": "https://stackoverflow.com/users/6278636/eduardo-perez"}, "edited": false, "score": 0, "creation_date": 1502007818, "post_id": 45461624, "comment_id": 78020230, "body": "@EduardoPerez This <a href=\"https://wiki.gbatemp.net/wiki/Nihstro\" rel=\"nofollow noreferrer\">nihstro</a>? The step after the installation instructions for devKitARM is one saying you should install libraries. See minor edit to post."}, {"owner": {"reputation": 310, "user_id": 1361174, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e2b138f3b391d5511955b6dd986eeb29?s=128&d=identicon&r=PG", "display_name": "kristof_w", "link": "https://stackoverflow.com/users/1361174/kristof-w"}, "reply_to_user": {"reputation": 381, "user_id": 6278636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-0am1F8D2FHY/AAAAAAAAAAI/AAAAAAAAAC0/ytu3ro7LQKY/photo.jpg?sz=128", "display_name": "Eduardo Perez", "link": "https://stackoverflow.com/users/6278636/eduardo-perez"}, "edited": false, "score": 0, "creation_date": 1521897971, "post_id": 45461624, "comment_id": 85933221, "body": "@EduardoPerez: your comment helped me fix this issue. I had the compiler setup for user, but not for root apparently. I would advice anyone with the same issue to check this option before trying anything else!"}], "tags": [], "owner": {"reputation": 5397, "user_id": 2193020, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/aa10d01a3d48851073bd61877a56b5a7?s=128&d=identicon&r=PG", "display_name": "hnefatl", "link": "https://stackoverflow.com/users/2193020/hnefatl"}, "is_accepted": true, "score": 2, "last_activity_date": 1502007888, "last_edit_date": 1502007888, "creation_date": 1501678884, "answer_id": 45461624, "question_id": 45461498, "link": "https://stackoverflow.com/questions/45461498/compiler-error-reporting-is-too-harsh-for-configure/45461624#45461624", "title": "Compiler error reporting is too harsh for ./configure", "body": "<p>From <a href=\"https://stackoverflow.com/questions/27867271/zlib-harsh-compiler-warnings-and-configure-test\">this question</a>, it looks like it's failing as it can't find a valid compiler.</p>\n\n<p>You'll need to download a cross compiler in order to compile code for one architecture on a different one. You can follow the steps in <a href=\"https://askubuntu.com/questions/250696/cross-compile-for-arm\">this</a> question to get an ARM compiler, and then the <code>./configure</code> script may work on its own (it looks like it's looking for a cross compiler), or you can use eg.:</p>\n\n<pre><code>export CC=arm-linux-gnueabi-gcc\nexport CXX=arm-linux-gnueabi-g++\n</code></pre>\n\n<p>...before running <code>./configure</code> to set the compilers for the build system (assuming it obeys the <code>CC</code> convention).</p>\n\n<p>If this doesn't work, you may need specific DS cross-compilers, rather than just generic ARM ones. It might be worth looking at <a href=\"https://wiki.gbatemp.net/wiki/3DS_Homebrew_Development\" rel=\"nofollow noreferrer\">this site</a> if you haven't already, to see if their <code>devkitARM</code> provides the cross compiler you need.</p>\n\n<p><strong>Edit</strong>: If you look carefully at your new output, you'll see <code>make CC=DEVKITPRO</code>. This is calling <code>make</code> directly with <code>DEVKITPRO</code> set as the compiler, overriding any attempts to change the compiler beforehand.</p>\n\n<p>You should make sure the <code>DEVKITPRO</code> binary is accessible from your <code>PATH</code> - open a terminal and type DEVKITPRO and see if you can execute it, or if it's not found. If it's not found, check over the instructions on the <code>devkitARM</code> page referenced above to make sure you've installed it as they expected, in particular the line in the Linux installation instructions saying <code>echo \"export DEVKITPRO=/opt/devkitPro\" &gt;&gt; ~/.bashrc</code>.</p>\n\n<p><strong>Edit Edit</strong>: There's a list of libraries and toolkits <a href=\"https://wiki.gbatemp.net/wiki/List_of_3DS_development_tools#Libraries_and_tools\" rel=\"nofollow noreferrer\">here</a>. Look on your project's installation page to find any dependencies, and track them down and install them as well.</p>\n"}], "owner": {"reputation": 381, "user_id": 6278636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-0am1F8D2FHY/AAAAAAAAAAI/AAAAAAAAAC0/ytu3ro7LQKY/photo.jpg?sz=128", "display_name": "Eduardo Perez", "link": "https://stackoverflow.com/users/6278636/eduardo-perez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2246, "favorite_count": 0, "accepted_answer_id": 45461624, "answer_count": 1, "score": 0, "last_activity_date": 1502007888, "creation_date": 1501678530, "last_edit_date": 1501982189, "question_id": 45461498, "link": "https://stackoverflow.com/questions/45461498/compiler-error-reporting-is-too-harsh-for-configure", "title": "Compiler error reporting is too harsh for ./configure", "body": "<p>So, I am trying to compile a Homebrew App for CFW Nintendo 3DS. I am doing it on Linux Mint 18.2. The compiler fails to compile some required dependencies.</p>\n\n<p>Here is the code from the compiler:</p>\n\n<pre><code>#!/bin/sh\nset -ex\n\nmkdir -p build\n\n# Install libarchive and libmpg123 for host\napt-get update\napt-get -y install libarchive-dev libmpg123-dev\n\n# Install libarchive for 3ds\ngit clone https://github.com/Cruel/3ds_portlibs.git\ncd 3ds_portlibs\nmake zlib\nmake install-zlib\nmake libarchive\nmake install\n\n# Install libmpg123 for 3ds\nwget -O libmpg123-dev.tar.gz  https://notabug.org/attachments/216a6d61-f167-4f65-84dc-fa98c2247fc1\ntar -xaf libmpg123-dev.tar.gz -C $DEVKITPRO/portlibs/3ds\n\ncd ../build\ncmake -DCMAKE_BUILD_TYPE=Release -DBUILD_EMULATOR=ON -DBUILD_TESTS=ON ..\nmake -j4\n</code></pre>\n\n<p>Here is the output error that I get:</p>\n\n<pre><code>+ mkdir -p build\n+ apt-get update\nIgn:1 http://dl.google.com/linux/chrome/deb stable InRelease\nHit:2 http://dl.google.com/linux/chrome/deb stable Release\nHit:3 http://archive.ubuntu.com/ubuntu xenial InRelease\nHit:4 http://deb.torproject.org/torproject.org xenial InRelease\nHit:7 http://ppa.launchpad.net/alessandro-strada/ppa/ubuntu xenial InRelease\nGet:8 http://security.ubuntu.com/ubuntu xenial-security InRelease [102 kB]\nHit:9 http://archive.ubuntu.com/ubuntu xenial-updates InRelease\nHit:10 http://ppa.launchpad.net/jonathonf/ffmpeg-3/ubuntu xenial InRelease\nHit:6 http://screenshots.getdeb.net xenial-getdeb InRelease\nGet:11 http://archive.ubuntu.com/ubuntu xenial-backports InRelease [102 kB]\nIgn:12 http://packages.linuxmint.com sonya InRelease\nHit:13 http://packages.linuxmint.com sonya Release\nHit:15 http://archive.canonical.com/ubuntu xenial InRelease\nFetched 204 kB in 5s (38.6 kB/s)\nReading package lists...\n+ apt-get -y install libarchive-dev libmpg123-dev\nReading package lists...\nBuilding dependency tree...\nReading state information...\nlibmpg123-dev is already the newest version (1.22.4-1).\nlibarchive-dev is already the newest version (3.2.1-2~ubuntu16.04.1).\n0 upgraded, 0 newly installed, 0 to remove and 100 not upgraded.\n+ git clone https://github.com/Cruel/3ds_portlibs.git\nCloning into '3ds_portlibs'...\n+ cd 3ds_portlibs\n+ CFLAGS=-m64\n+ make zlib\nwget -O zlib-1.2.8.tar.gz \"http://prdownloads.sourceforge.net/libpng/zlib-1.2.8.tar.gz\"\n--2017-08-02 08:47:03--  http://prdownloads.sourceforge.net/libpng/zlib-1.2.8.tar.gz\nResolving prdownloads.sourceforge.net (prdownloads.sourceforge.net)... 216.34.181.59\nConnecting to prdownloads.sourceforge.net (prdownloads.sourceforge.net)|216.34.181.59|:80... connected.\nHTTP request sent, awaiting response... 301 Moved Permanently\nLocation: http://downloads.sourceforge.net/project/libpng/zlib/1.2.8/zlib-1.2.8.tar.gz [following]\n--2017-08-02 08:47:03--  http://downloads.sourceforge.net/project/libpng/zlib/1.2.8/zlib-1.2.8.tar.gz\nResolving downloads.sourceforge.net (downloads.sourceforge.net)... 216.34.181.59\nConnecting to downloads.sourceforge.net (downloads.sourceforge.net)|216.34.181.59|:80... connected.\nHTTP request sent, awaiting response... 302 Found\nLocation: https://versaweb.dl.sourceforge.net/project/libpng/zlib/1.2.8/zlib-1.2.8.tar.gz [following]\n--2017-08-02 08:47:04--  https://versaweb.dl.sourceforge.net/project/libpng/zlib/1.2.8/zlib-1.2.8.tar.gz\nResolving versaweb.dl.sourceforge.net (versaweb.dl.sourceforge.net)... 104.238.205.251\nConnecting to versaweb.dl.sourceforge.net (versaweb.dl.sourceforge.net)|104.238.205.251|:443... connected.\nHTTP request sent, awaiting response... 200 OK\nLength: 571091 (558K) [application/x-gzip]\nSaving to: \u2018zlib-1.2.8.tar.gz\u2019\n\n2017-08-02 08:47:04 (1.95 MB/s) - \u2018zlib-1.2.8.tar.gz\u2019 saved [571091/571091]\n\nUsing ar\nChecking for arm-none-eabi-gcc...\nCompiler error reporting is too harsh for ./configure (perhaps remove -Werror).\n** ./configure aborting.\nMakefile:195: recipe for target 'zlib' failed\nmake: *** [zlib] Error 1\n</code></pre>\n\n<p>I also noticed if I remove the lines about zlib, I get a different error:</p>\n\n<pre><code>+ export CPP3DS=/home/eddy/Documents/FreeShop/cpp3ds\n+ for dev in ''\\''arc13'\\'''\n+ cd /home/eddy/Documents/FreeShop/arc13/freeshop\n+ for dx in '\"3ds_portlibs\"' '\"build\"'\n+ '[' -d 3ds_portlibs ']'\n+ rm -r 3ds_portlibs\n+ for dx in '\"3ds_portlibs\"' '\"build\"'\n+ '[' -d build ']'\n+ rm -r build\n+ mkdir -p build\n+ export CC=arm-none-eabi-gcc\n+ CC=arm-none-eabi-gcc\n+ export CXX=arm-none-eabi-g++\n+ CXX=arm-none-eabi-g++\n+ apt-get update\nIgn:1 http://dl.google.com/linux/chrome/deb stable InRelease\nHit:2 http://deb.torproject.org/torproject.org xenial InRelease\nHit:3 http://dl.google.com/linux/chrome/deb stable Release\nIgn:4 http://packages.linuxmint.com sonya InRelease\nHit:5 http://packages.linuxmint.com sonya Release\nHit:6 http://ppa.launchpad.net/alessandro-strada/ppa/ubuntu xenial InRelease\nHit:7 http://archive.ubuntu.com/ubuntu xenial InRelease\nHit:8 http://security.ubuntu.com/ubuntu xenial-security InRelease\nHit:12 http://archive.canonical.com/ubuntu xenial InRelease\nHit:13 http://ppa.launchpad.net/jonathonf/ffmpeg-3/ubuntu xenial InRelease\nHit:14 http://archive.ubuntu.com/ubuntu xenial-updates InRelease\nHit:10 http://screenshots.getdeb.net xenial-getdeb InRelease\nHit:15 http://archive.ubuntu.com/ubuntu xenial-backports InRelease\nReading package lists...\n+ apt-get -y install libarchive-dev libmpg123-dev\nReading package lists...\nBuilding dependency tree...\nReading state information...\nlibmpg123-dev is already the newest version (1.22.4-1).\nlibarchive-dev is already the newest version (3.2.1-2~ubuntu16.04.1).\n0 upgraded, 0 newly installed, 0 to remove and 103 not upgraded.\n+ git clone https://github.com/Cruel/3ds_portlibs.git\nCloning into '3ds_portlibs'...\n+ cd 3ds_portlibs\n+ make CC=DEVKITPRO\nPlease choose one of the following targets:\n  freetype (requires zlib to be installed)\n  libexif\n  libjpeg-turbo\n  libpng (requires zlib to be installed)\n  sqlite\n  zlib\n  mxml\n  expat\n  libxml2\n  jansson\n  physfs (requires zlib to be installed)\n  libmad\n  libogg\n  libvorbis (requires libogg to be installed)\n  giflib\n  libconfig\n  bzip2\n  xz\n  libarchive\n  nettle\n  wslay\n+ make libarchive\nwget -O libarchive-3.1.2.tar.gz \"http://www.libarchive.org/downloads/libarchive-3.1.2.tar.gz\"\n--2017-08-02 16:36:34--  http://www.libarchive.org/downloads/libarchive-3.1.2.tar.gz\nResolving www.libarchive.org (www.libarchive.org)... 2600:9000:2025:5a00:16:e6b0:f440:93a1, 2600:9000:2025:fe00:16:e6b0:f440:93a1, 2600:9000:2025:2600:16:e6b0:f440:93a1, ...\nConnecting to www.libarchive.org (www.libarchive.org)|2600:9000:2025:5a00:16:e6b0:f440:93a1|:80... connected.\nHTTP request sent, awaiting response... 200 OK\nLength: 4527540 (4.3M) [application/x-gzip]\nSaving to: \u2018libarchive-3.1.2.tar.gz\u2019\n\n2017-08-02 16:36:40 (54.6 MB/s) - \u2018libarchive-3.1.2.tar.gz\u2019 saved [4527540/4527540]\n\npatching file libarchive/archive_ppmd7.c\npatching file libarchive/archive_read_disk_posix.c\npatching file libarchive/archive_write_disk_posix.c\npatching file libarchive/archive_write_set_format_iso9660.c\nchecking for a BSD-compatible install... /usr/bin/install -c\nchecking whether build environment is sane... yes\nchecking for arm-none-eabi-strip... no\nchecking for strip... strip\nchecking for a thread-safe mkdir -p... /bin/mkdir -p\nchecking for gawk... gawk\nchecking whether make sets $(MAKE)... yes\nchecking whether make supports nested variables... yes\nchecking build system type... x86_64-unknown-linux-gnu\nchecking host system type... arm-none-eabi\nchecking for arm-none-eabi-gcc... arm-none-eabi-gcc\nchecking whether the C compiler works... no\nconfigure: error: in `/home/eddy/Documents/FreeShop/arc13/freeshop/3ds_portlibs/libarchive-3.1.2':\nconfigure: error: C compiler cannot create executables\nSee `config.log' for more details\nMakefile:274: recipe for target 'libarchive' failed\nmake: *** [libarchive] Error 77\n</code></pre>\n\n<p>Judging from the error, it seems that I'm compiling an ARM application on a 64-bit system and it fails due to that. However, I need to compile the source code in ARM since it's supposed to be installed on a Nintendo 3DS. How can I fix this error in order to compile the application?</p>\n\n<p>Edit: I tried setting up the compiler for root and got this error:</p>\n\n<pre><code>-- Check for working C compiler: /opt/devkitPro/devkitARM/bin/arm-none-eabi-gcc -- broken\nCMake Error at /usr/share/cmake-3.5/Modules/CMakeTestCCompiler.cmake:61 (message):\n  The C compiler \"/opt/devkitPro/devkitARM/bin/arm-none-eabi-gcc\" is not able\n  to compile a simple test program.\n\n  It fails with the following output:\n\n   Change Dir: /home/eddy/Documents/FreeShop/arc13/freeshop/build/CMakeFiles/CMakeTmp\n\n\n\n  Run Build Command:\"/usr/bin/make\" \"cmTC_ef3eb/fast\"\n\n  /usr/bin/make -f CMakeFiles/cmTC_ef3eb.dir/build.make\n  CMakeFiles/cmTC_ef3eb.dir/build\n\n  make[1]: Entering directory\n  '/home/eddy/Documents/FreeShop/arc13/freeshop/build/CMakeFiles/CMakeTmp'\n\n  Building C object CMakeFiles/cmTC_ef3eb.dir/testCCompiler.c.o\n\n  /opt/devkitPro/devkitARM/bin/arm-none-eabi-gcc -o\n  CMakeFiles/cmTC_ef3eb.dir/testCCompiler.c.o -c\n  /home/eddy/Documents/FreeShop/arc13/freeshop/build/CMakeFiles/CMakeTmp/testCCompiler.c\n\n\n  Linking C executable cmTC_ef3eb\n\n  /usr/bin/cmake -E cmake_link_script CMakeFiles/cmTC_ef3eb.dir/link.txt\n  --verbose=1\n\n  /opt/devkitPro/devkitARM/bin/arm-none-eabi-gcc\n  CMakeFiles/cmTC_ef3eb.dir/testCCompiler.c.o -o cmTC_ef3eb -rdynamic\n\n  arm-none-eabi-gcc: error: unrecognized command line option '-rdynamic'\n\n  CMakeFiles/cmTC_ef3eb.dir/build.make:97: recipe for target 'cmTC_ef3eb'\n  failed\n\n  make[1]: *** [cmTC_ef3eb] Error 1\n\n  make[1]: Leaving directory\n  '/home/eddy/Documents/FreeShop/arc13/freeshop/build/CMakeFiles/CMakeTmp'\n\n  Makefile:126: recipe for target 'cmTC_ef3eb/fast' failed\n\n  make: *** [cmTC_ef3eb/fast] Error 2\n\n\n\n\n\n  CMake will not be able to correctly generate this project.\nCall Stack (most recent call first):\n  CMakeLists.txt:7 (project)\n\n\n-- Configuring incomplete, errors occurred!\nSee also \"/home/eddy/Documents/FreeShop/arc13/freeshop/build/CMakeFiles/CMakeOutput.log\".\nSee also \"/home/eddy/Documents/FreeShop/arc13/freeshop/build/CMakeFiles/CMakeError.log\".\n</code></pre>\n\n<p>I am also getting this error:</p>\n\n<pre><code>-- strip: /opt/devkitPro/devkitARM/bin/arm-none-eabi-strip - found\n-- 3dslink: /opt/devkitPro/devkitARM/bin/3dslink - found\n-- Looking for Picasso...\n-- Picasso: /opt/devkitPro/devkitARM/bin/picasso - found\n-- Looking for nihstro...\n-- nihstro - not found\nCMake Error at /home/eddy/Documents/FreeShop/cpp3ds/cmake/template_emu/CMakeLists.txt:1 (find_package):\n  By not providing \"FindQt5Widgets.cmake\" in CMAKE_MODULE_PATH this project\n  has asked CMake to find a package configuration file provided by\n  \"Qt5Widgets\", but CMake did not find one.\n\n  Could not find a package configuration file provided by \"Qt5Widgets\" with\n  any of the following names:\n\n    Qt5WidgetsConfig.cmake\n    qt5widgets-config.cmake\n\n  Add the installation prefix of \"Qt5Widgets\" to CMAKE_PREFIX_PATH or set\n  \"Qt5Widgets_DIR\" to a directory containing one of the above files.  If\n  \"Qt5Widgets\" provides a separate development package or SDK, be sure it has\n  been installed.\n\n\n-- Configuring incomplete, errors occurred!\nSee also \"/home/eddy/Documents/FreeShop/arc13/freeshop/build/CMakeFiles/CMakeOutput.log\".\n</code></pre>\n"}, {"tags": ["c++", "windows", "pointers", "dll"], "comments": [{"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 2, "creation_date": 1501679234, "post_id": 45461468, "comment_id": 77883862, "body": "Do you know how a OS processes work? What it means to load a DLL?"}, {"owner": {"reputation": 8002, "user_id": 1143850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2927fac544c9960cd5433688fe4cae1d?s=128&d=identicon&r=PG", "display_name": "Serge", "link": "https://stackoverflow.com/users/1143850/serge"}, "edited": false, "score": 0, "creation_date": 1501679499, "post_id": 45461468, "comment_id": 77884086, "body": "should work. it does not matter which type of libraries you link as soon as they are a part of the same process and if you load correct dynamic libs at run."}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1501679545, "post_id": 45461468, "comment_id": 77884122, "body": "all code (EXE, DLLs, etc) in process have common address space. and note that functions addresses - this is also pointers"}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 1, "creation_date": 1501680770, "post_id": 45461468, "comment_id": 77885172, "body": "@TheQuantumPhysicist - I&#39;m not here to cuddle anyone. I politely asked for the scope of his knowledge. Or do you think an entire chapter on virtual memory is appropriate to be an answer on SO?"}], "answers": [{"tags": [], "owner": {"reputation": 23009, "user_id": 3613500, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/lIfov.png?s=128&g=1", "display_name": "David Haim", "link": "https://stackoverflow.com/users/3613500/david-haim"}, "is_accepted": true, "score": 3, "last_activity_date": 1501680233, "last_edit_date": 1501680233, "creation_date": 1501679877, "answer_id": 45462016, "question_id": 45461468, "link": "https://stackoverflow.com/questions/45461468/does-c-pointers-work-across-exes-and-dlls/45462016#45462016", "title": "Does C++ pointers work across EXEs and DLLs", "body": "<p>The short answer is - of course it will work. otherwise your process could not have communicated with any important dlls like <code>kernel32</code> and <code>user32</code>. </p>\n\n<p>For example, the function <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa366597(v=vs.85).aspx\" rel=\"nofollow noreferrer\">HeapAlloc</a> gets a pointer to a heap as the first argument and returns a pointer to the allocated memory. the function itself is implemented in <code>kernel32.dll</code>. if you couldn't pass a pointer to a dll or lib, this would never work. </p>\n\n<p>Another issue to consider is - assuming we have a pointer to a C++ object, the fact that the pointer itself <strong>is</strong> valid across binaries,it doesn't mean that the object is treated the same in the parent EXE and the callee DLL. you need to make sure that the two binaries are ABI compatible. for example, passing a pointer of <code>std::string</code> from an exe that was compiled under VC++ to a DLL that was compiled under GCC is a bad idea.</p>\n"}, {"tags": [], "owner": {"reputation": 20880, "user_id": 1317944, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/OcBMY.png?s=128&g=1", "display_name": "The Quantum Physicist", "link": "https://stackoverflow.com/users/1317944/the-quantum-physicist"}, "is_accepted": false, "score": 1, "last_activity_date": 1501680388, "creation_date": 1501680388, "answer_id": 45462203, "question_id": 45461468, "link": "https://stackoverflow.com/questions/45461468/does-c-pointers-work-across-exes-and-dlls/45462203#45462203", "title": "Does C++ pointers work across EXEs and DLLs", "body": "<p>Yes, that should work. Actually that's how plugins work.</p>\n\n<p>How a plugin works: A program loads a DLL/shared-library, and passes its \"interface\" pointer to the plugin, where a plugin then uses this interface to implement new functionality in the program. You can use <code>dynamic_cast</code> to verify that the pointer is compatible with the interface you're assuming.</p>\n"}], "owner": {"reputation": 3527, "user_id": 485539, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/d10de06616c8f4661387c74a4a40ec22?s=128&d=identicon&r=PG", "display_name": "codeLover", "link": "https://stackoverflow.com/users/485539/codelover"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 900, "favorite_count": 0, "accepted_answer_id": 45462016, "answer_count": 2, "score": 2, "last_activity_date": 1501680388, "creation_date": 1501678458, "last_edit_date": 1592644375, "question_id": 45461468, "link": "https://stackoverflow.com/questions/45461468/does-c-pointers-work-across-exes-and-dlls", "title": "Does C++ pointers work across EXEs and DLLs", "body": "<p>I've a C++ application which is having many static ibs (*.lib) and DLLs.\nI'm creating an object in my EXE then i keep passing the pointer to this object from 1 library to another library using function calls.</p>\n<p>During this process when this pointer moves from main EXE to DLL's function, i wanted to understand will it have any issue or do i need to take care any precautions.</p>\n<blockquote>\n<p>Main.EXE with 3 static libs (A.lib, B.lib,C.lib) Main.EXE also links</p>\n<p>with 2 DLL's - d1.dll, d2.dll. Each of these static library and DLL</p>\n<p>also statically links to a static library X.lib.</p>\n</blockquote>\n<p><strong>Call Flow</strong>:</p>\n<blockquote>\n<p>main() in main.EXE calls AFunc() in A.lib and passes a pointer to an\nobject of some class X which is in X.lib.</p>\n<p>Now AFunc() in A.lib calls BFunc() in B.lib &amp; passes the &quot;same pointer\nto an object of class X&quot; which is in X.lib.</p>\n<p>Now BFunc() in B.lib calls CFunc() in C.lib &amp; passes the &quot;same pointer\nto an object of class X&quot; which is in X.lib.</p>\n<p>Now CFunc() in C.lib calls D1Func() in D1.DLL &amp; passes the &quot;same\npointer to an object of class X&quot; which is in X.lib.</p>\n<p>Now D1Func() in D1.DLL calls D2Func() in D2.DLL &amp; passes the &quot;same\npointer to an object of class X&quot; which is in X.lib.</p>\n</blockquote>\n<p><strong>My query is will the pointer passing across CFunc() in C.lib (part of main.EXE) AND  the D1Func() of D1.DLL work ?</strong></p>\n"}, {"tags": ["c++", "windows", "visual-c++", "visual-studio-2012", "registry"], "comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1501679144, "post_id": 45461452, "comment_id": 77883793, "body": "Could you to post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 117699, "user_id": 62576, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/15264f7bf48e10ce32dfa4865a13763c?s=128&d=identicon&r=PG", "display_name": "Ken White", "link": "https://stackoverflow.com/users/62576/ken-white"}, "edited": false, "score": 0, "creation_date": 1501679165, "post_id": 45461452, "comment_id": 77883810, "body": "<code>sizeof(DWORD)</code> when dealing with a null-terminated string is wrong.  It returns the size of a DWORD (pointer?), not the length of the string. Unless you&#39;re writing a very short string, the value is far too small. You&#39;re also not null terminating your string."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1501679653, "post_id": 45461452, "comment_id": 77884206, "body": "You posted the code for reading/writing DWORD values instead of your failing code reading/writing string values."}, {"owner": {"reputation": 2327, "user_id": 2764789, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ywzQ4.jpg?s=128&g=1", "display_name": "Daniccan", "link": "https://stackoverflow.com/users/2764789/daniccan"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1501740690, "post_id": 45461452, "comment_id": 77912649, "body": "@MichaelWalz I have added the code in the description now."}], "answers": [{"comments": [{"owner": {"reputation": 2327, "user_id": 2764789, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ywzQ4.jpg?s=128&g=1", "display_name": "Daniccan", "link": "https://stackoverflow.com/users/2764789/daniccan"}, "edited": false, "score": 1, "creation_date": 1502361810, "post_id": 45478803, "comment_id": 78181151, "body": "Its still not working for me. Still getting a set of Chinese characters in the registry."}], "tags": [], "owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "is_accepted": false, "score": 0, "last_activity_date": 1501748899, "creation_date": 1501748899, "answer_id": 45478803, "question_id": 45461452, "link": "https://stackoverflow.com/questions/45461452/writing-reading-string-in-registry-in-c/45478803#45478803", "title": "Writing/Reading string in Registry in C++", "body": "<p>The problem with your code is that you are naively casting <code>string</code> type variables to <code>LPBYTE</code>. </p>\n\n<p>This is your code with corrections:</p>\n\n<pre><code>void SetVal(HKEY hKey, LPCTSTR lpValue, string data)\n{\n  const char *x = data.c_str();\n  LONG nError = RegSetValueEx(hKey, lpValue, NULL, REG_SZ, (LPBYTE)data.c_str(), data.size());\n\n  if (nError)\n    cout &lt;&lt; \"Error: \" &lt;&lt; nError &lt;&lt; \" Could not set registry value: \" &lt;&lt; (char*)lpValue &lt;&lt; endl;\n}\n\nstring GetVal(HKEY hKey, LPCTSTR lpValue)\n{\n  string data; \n#define MAXLENGTH 100\n\n  char buffer[100];\n  DWORD size = sizeof(buffer);\n  DWORD type = REG_SZ;\n\n  LONG nError = RegQueryValueEx(hKey, lpValue, NULL, &amp;type, (LPBYTE)buffer, &amp;size);\n\n  if (nError == ERROR_FILE_NOT_FOUND)\n  {\n    data = \"0\"; // The value will be created and set to data next time SetVal() is called.\n    return data;\n  }\n  else if (nError)\n    cout &lt;&lt; \"Error: \" &lt;&lt; nError &lt;&lt; \" Could not get registry value \" &lt;&lt; (char*)lpValue &lt;&lt; endl;\n\n  data = buffer;\n  return data;\n}\n</code></pre>\n\n<p>There is still room for improvement, for example the maximum string length is limited to 100 and the error handling should be improved.</p>\n\n<p><strong>Explanations:</strong></p>\n\n<p>This is your code in <code>SetVal</code></p>\n\n<pre><code>RegSetValueEx(hKey, lpValue, NULL, REG_DWORD, (LPBYTE)&amp;data, sizeof(DWORD));\n</code></pre>\n\n<ul>\n<li>you are naively casting <code>data</code> to <code>LPBYTE</code>.</li>\n<li><code>sizeof(DWORD)</code> is wrong, because you need to provide the length of the string</li>\n</ul>\n\n<p>This is your code in <code>GetVal</code>:</p>\n\n<pre><code>    string data;\n    DWORD size = sizeof(data);\n    DWORD type = REG_SZ;\n    LONG nError = RegQueryValueEx(hKey, lpValue, NULL, &amp;type, (LPBYTE)&amp;data, &amp;size);\n</code></pre>\n\n<ul>\n<li><code>sizeof(data)</code> when <code>data</code> is a <code>string</code> doesn't make any sense. It is not the length of the string, which at that moment is 0 anyway.</li>\n<li>you are again casting naively <code>string</code> to <code>LPBYTE</code> when calling <code>RegQueryValueEx</code></li>\n</ul>\n"}], "owner": {"reputation": 2327, "user_id": 2764789, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ywzQ4.jpg?s=128&g=1", "display_name": "Daniccan", "link": "https://stackoverflow.com/users/2764789/daniccan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2554, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1501748899, "creation_date": 1501678413, "last_edit_date": 1501740662, "question_id": 45461452, "link": "https://stackoverflow.com/questions/45461452/writing-reading-string-in-registry-in-c", "title": "Writing/Reading string in Registry in C++", "body": "<p>How to write/read a string in windows registry in C++ ? </p>\n\n<p>I am able to write/read DWORD (number) in windows registry using the following code. But, unable to write/read a string value, as it gets stored as chinese like characters in the registry.</p>\n\n<pre><code>void SetVal(HKEY hKey, LPCTSTR lpValue, DWORD data)\n{\n    LONG nError = RegSetValueEx(hKey, lpValue, NULL, REG_DWORD, (LPBYTE)&amp;data, sizeof(DWORD));\n\n    if (nError)\n        cout &lt;&lt; \"Error: \" &lt;&lt; nError &lt;&lt; \" Could not set registry value: \" &lt;&lt; (char*)lpValue &lt;&lt; endl;\n}\n\nDWORD GetVal(HKEY hKey, LPCTSTR lpValue)\n{\n    DWORD data;     DWORD size = sizeof(data);  DWORD type = REG_DWORD;\n    LONG nError = RegQueryValueEx(hKey, lpValue, NULL, &amp;type, (LPBYTE)&amp;data, &amp;size);\n\n    if (nError==ERROR_FILE_NOT_FOUND)\n        data = 0; // The value will be created and set to data next time SetVal() is called.\n    else if (nError)\n        cout &lt;&lt; \"Error: \" &lt;&lt; nError &lt;&lt; \" Could not get registry value \" &lt;&lt; (char*)lpValue &lt;&lt; endl;\n\n    return data;\n}\n</code></pre>\n\n<p>Code used to write/read string value (Stored as chinese like characters in the registry): </p>\n\n<pre><code>void SetVal(HKEY hKey, LPCTSTR lpValue, string data)\n{\n    LONG nError = RegSetValueEx(hKey, lpValue, NULL, REG_SZ, (LPBYTE)&amp;data, sizeof(data));\n\n    if (nError)\n        cout &lt;&lt; \"Error: \" &lt;&lt; nError &lt;&lt; \" Could not set registry value: \" &lt;&lt; (char*)lpValue &lt;&lt; endl;\n}\n\nstring GetVal(HKEY hKey, LPCTSTR lpValue)\n{\n    string data;     DWORD size = sizeof(data);  DWORD type = REG_SZ;\n    LONG nError = RegQueryValueEx(hKey, lpValue, NULL, &amp;type, (LPBYTE)&amp;data, &amp;size);\n\n    if (nError==ERROR_FILE_NOT_FOUND)\n        data = \"0\"; // The value will be created and set to data next time SetVal() is called.\n    else if (nError)\n        cout &lt;&lt; \"Error: \" &lt;&lt; nError &lt;&lt; \" Could not get registry value \" &lt;&lt; (char*)lpValue &lt;&lt; endl;\n\n    return data;\n}\n</code></pre>\n"}, {"tags": ["c++", "templates", "constants", "c++14"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1501677027, "post_id": 45460916, "comment_id": 77881984, "body": "Why are you using <code>const</code> here?"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 4, "creation_date": 1501677173, "post_id": 45460916, "comment_id": 77882131, "body": "Constant rvalue references are almost always an error. If you can&#39;t give a detailed explanation about why it&#39;s needed in a specific case, then don&#39;t use it."}, {"owner": {"reputation": 230, "user_id": 8382472, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cae09af1e86c6c82d2d9d758350df398?s=128&d=identicon&r=PG&f=1", "display_name": "Treebeard", "link": "https://stackoverflow.com/users/8382472/treebeard"}, "edited": false, "score": 0, "creation_date": 1501679019, "post_id": 45460916, "comment_id": 77883688, "body": "use std::move( i ); in the utilities header file. Be aware that moving will invalidate what was moved. Also you shouldn&#39;t move from a const as moving is doing something to it. Scott Meyers has a great talk on type deduction on YouTube (and a chapter in Effective Modern C++), sounds like you&#39;d benefit from watching it."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 230, "user_id": 8382472, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cae09af1e86c6c82d2d9d758350df398?s=128&d=identicon&r=PG&f=1", "display_name": "Treebeard", "link": "https://stackoverflow.com/users/8382472/treebeard"}, "edited": false, "score": 0, "creation_date": 1501679564, "post_id": 45460916, "comment_id": 77884141, "body": "@Treebeard - <code>std::move</code> doesn&#39;t invalidate or move anything. It&#39;s a simple cast. It&#39;s what the type does when accepting such a reference that matters."}, {"owner": {"reputation": 230, "user_id": 8382472, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cae09af1e86c6c82d2d9d758350df398?s=128&d=identicon&r=PG&f=1", "display_name": "Treebeard", "link": "https://stackoverflow.com/users/8382472/treebeard"}, "edited": false, "score": 0, "creation_date": 1501680201, "post_id": 45460916, "comment_id": 77884712, "body": "OK, more clarification in what I meant, The object still exists after moving but you cannot guarantee it&#39;s state (e.g. contents might be empty), however it&#39;s still valid in that it can be destructed or reassigned it."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 230, "user_id": 8382472, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cae09af1e86c6c82d2d9d758350df398?s=128&d=identicon&r=PG&f=1", "display_name": "Treebeard", "link": "https://stackoverflow.com/users/8382472/treebeard"}, "edited": false, "score": 0, "creation_date": 1501680911, "post_id": 45460916, "comment_id": 77885280, "body": "@Treebeard - No even that is globally true. <code>std::move</code> on it&#39;s own does nothing to change any object state."}], "answers": [{"tags": [], "owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "is_accepted": true, "score": 17, "last_activity_date": 1501677179, "creation_date": 1501677179, "answer_id": 45461013, "question_id": 45460916, "link": "https://stackoverflow.com/questions/45460916/template-reference-argument-deduction-failure-in-c/45461013#45461013", "title": "Template reference argument deduction failure in C++", "body": "<p>It fails because adding the const prevents it from being a forwarding reference. It becomes a regular reference to a const rvalue:</p>\n\n<p><a href=\"https://timsong-cpp.github.io/cppwp/n4659/temp.deduct#call-3\" rel=\"noreferrer\">[temp.deduct.call/3]</a></p>\n\n<blockquote>\n  <p>... A forwarding reference is an rvalue reference to a <strong>cv-unqualified</strong>\n  template parameter that does not represent a template parameter of a\n  class template (during class template argument deduction\n  ([over.match.class.deduct])). ...</p>\n</blockquote>\n\n<p>And you pass it an lvalue. It fails the match.</p>\n"}, {"tags": [], "owner": {"reputation": 42880, "user_id": 982161, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/kutcC.png?s=128&g=1", "display_name": "\u03a6Xoc\u0119 \uc6c3 \u041fepe&#250;pa \u30c4", "link": "https://stackoverflow.com/users/982161/%ce%a6xoc%c4%99-%ec%9b%83-%d0%9fepe%c3%bapa-%e3%83%84"}, "is_accepted": false, "score": 2, "last_activity_date": 1501677379, "creation_date": 1501677379, "answer_id": 45461097, "question_id": 45460916, "link": "https://stackoverflow.com/questions/45460916/template-reference-argument-deduction-failure-in-c/45461097#45461097", "title": "Template reference argument deduction failure in C++", "body": "<p>This here</p>\n\n<pre><code>int fun(const T&amp;&amp;)\n</code></pre>\n\n<p>means you need to give as parameter a <code>rVal</code></p>\n\n<p>so </p>\n\n<pre><code>const int i = 10;\n</code></pre>\n\n<p>is not making <code>i</code> a candidate to be a <code>rVal</code> (because you can get the address of i)</p>\n"}], "owner": {"reputation": 30168, "user_id": 5612562, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/gzBQY.jpg?s=128&g=1", "display_name": "msc", "link": "https://stackoverflow.com/users/5612562/msc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 467, "favorite_count": 2, "accepted_answer_id": 45461013, "answer_count": 2, "score": 10, "last_activity_date": 1502276530, "creation_date": 1501676913, "last_edit_date": 1502276530, "question_id": 45460916, "link": "https://stackoverflow.com/questions/45460916/template-reference-argument-deduction-failure-in-c", "title": "Template reference argument deduction failure in C++", "body": "<p>Why following code doesn't compile in C++14 compiler? If I use</p>\n\n<pre><code>const int i = 10;\nint n = fun(i);\n</code></pre>\n\n<p>The compiler gives an error.</p>\n\n<p>But, If I use </p>\n\n<pre><code>int n = fun(10);\n</code></pre>\n\n<p>instead of above statements, it's working fine.</p>\n\n<p><strong>Example:</strong></p>\n\n<pre><code>template&lt;typename T&gt;\nint fun(const T&amp;&amp;)\n{\n    cout&lt;&lt;\"fun\"&lt;&lt;endl;\n}\n\nint main()\n{\n // int i = 10;         // Not work\n    const int i = 10;   // Not work\n    int n = fun(i);  \n // int n = fun(10);    // Working fine\n}\n</code></pre>\n"}, {"tags": ["c++", "qt", "text", "input", "console"], "comments": [{"owner": {"reputation": 3687, "user_id": 2509078, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/ZV5ER.jpg?s=128&g=1", "display_name": "Blacktempel", "link": "https://stackoverflow.com/users/2509078/blacktempel"}, "edited": false, "score": 1, "creation_date": 1501676524, "post_id": 45460731, "comment_id": 77881576, "body": "Did you try <a href=\"http://www.cplusplus.com/reference/string/string/getline/\" rel=\"nofollow noreferrer\"><code>std::getline</code></a> ?"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1501676612, "post_id": 45460731, "comment_id": 77881655, "body": "Or the <a href=\"http://doc.qt.io/qt-5/qtextstream.html#readLine\" rel=\"nofollow noreferrer\"><code>QTextStream</code> equivalent</a> of <code>std::getline</code>?"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1501676645, "post_id": 45460731, "comment_id": 77881686, "body": "Also, please don&#39;t name your streams <code>cin</code> and <code>cout</code>. That will be <i>very</i> confusing for readers and maintainers of your code!"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1501676826, "post_id": 45460731, "comment_id": 77881819, "body": "By the way, what is the reason you use the <code>QTextStream</code> objects instead of plain <code>std::cin</code> and <code>std::cout</code>?"}, {"owner": {"reputation": 22818, "user_id": 1387438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ad806758c356c915ea08a4bfd79131e3?s=128&d=identicon&r=PG", "display_name": "Marek R", "link": "https://stackoverflow.com/users/1387438/marek-r"}, "edited": false, "score": 0, "creation_date": 1501686907, "post_id": 45460731, "comment_id": 77890201, "body": "I don&#39;t see a loop so I don&#39;t see relevant part of code. Provide more context."}], "answers": [{"tags": [], "owner": {"reputation": 3687, "user_id": 2509078, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/ZV5ER.jpg?s=128&g=1", "display_name": "Blacktempel", "link": "https://stackoverflow.com/users/2509078/blacktempel"}, "is_accepted": false, "score": 1, "last_activity_date": 1501676983, "creation_date": 1501676983, "answer_id": 45460942, "question_id": 45460731, "link": "https://stackoverflow.com/questions/45460731/qt-reading-from-console-and-stop-when-enter-has-pressed/45460942#45460942", "title": "Qt reading from console and stop when Enter has pressed", "body": "<p>For QT you could use <a href=\"http://doc.qt.io/qt-5/qtextstream.html#readLine\" rel=\"nofollow noreferrer\"><code>QTextStream::readLine</code></a>.</p>\n\n<p>Instead you could also use <a href=\"http://www.cplusplus.com/reference/string/string/getline/\" rel=\"nofollow noreferrer\"><code>std::getline</code></a> along with the normal <code>std::cin</code> and <code>std::cout</code>.</p>\n"}], "owner": {"reputation": 89, "user_id": 5356537, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh6.googleusercontent.com/-XBnNUVA4Xks/AAAAAAAAAAI/AAAAAAAAABA/q4pALwK_aDI/photo.jpg?sz=128", "display_name": "\u0414\u0430\u043d\u0438\u043b\u0430 \u041a\u043e\u043b\u0433\u0430\u043d\u043e\u0432", "link": "https://stackoverflow.com/users/5356537/%d0%94%d0%b0%d0%bd%d0%b8%d0%bb%d0%b0-%d0%9a%d0%be%d0%bb%d0%b3%d0%b0%d0%bd%d0%be%d0%b2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1722, "favorite_count": 2, "answer_count": 1, "score": 1, "last_activity_date": 1501676983, "creation_date": 1501676424, "question_id": 45460731, "link": "https://stackoverflow.com/questions/45460731/qt-reading-from-console-and-stop-when-enter-has-pressed", "title": "Qt reading from console and stop when Enter has pressed", "body": "<pre><code>QTextStream cin(stdin);\nQTextStream cout(stdout);\n\nQString path;\n\ncout &lt;&lt; \"Set directory to save configuration file: \";\ncout.flush();\n// path = cin.readLine();\ncin &gt;&gt; path;\n</code></pre>\n\n<p>Here is the code. It works fine when you need to enter some text into console. It prints message and then waits until you write some text and then press the Enter key. <strong>BUT</strong>, if you don't want to enter any text and you want to leave <em>path</em> string empty, this code doesn't approach: it doesn't recognize Enter as end of the line/new line, so if you try to press Enter without writing any text, cursor would be only switched to the next line and program would still wait until you'll write something.</p>\n\n<p>So, is there any way to recognize Enter key <strong>NO MATTER</strong> if <em>path</em> string empty or not? Simple: you press Enter key - program stops to read from console.</p>\n"}, {"tags": ["c++", "dlib"], "comments": [{"owner": {"reputation": 1140, "user_id": 2908058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a7412e38307b23d1d82e5bc0de15867?s=128&d=identicon&r=PG&f=1", "display_name": "Dmytro Khmara", "link": "https://stackoverflow.com/users/2908058/dmytro-khmara"}, "edited": false, "score": 0, "creation_date": 1501679255, "post_id": 45460675, "comment_id": 77883883, "body": "Show your code and let us know about your environment. It seems you have included libs or dlls, but linker can&#39;t find its."}, {"owner": {"reputation": 1, "user_id": 8405269, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7fc85bd3264bfe6e09102473c0b89f0?s=128&d=identicon&r=PG&f=1", "display_name": "victoriyap", "link": "https://stackoverflow.com/users/8405269/victoriyap"}, "reply_to_user": {"reputation": 1140, "user_id": 2908058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a7412e38307b23d1d82e5bc0de15867?s=128&d=identicon&r=PG&f=1", "display_name": "Dmytro Khmara", "link": "https://stackoverflow.com/users/2908058/dmytro-khmara"}, "edited": false, "score": 0, "creation_date": 1501682078, "post_id": 45460675, "comment_id": 77886316, "body": "I copied code from here <a href=\"http://dlib.net/video_tracking_ex.cpp.html\" rel=\"nofollow noreferrer\">dlib.net/video_tracking_ex.cpp.html</a>"}, {"owner": {"reputation": 1140, "user_id": 2908058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a7412e38307b23d1d82e5bc0de15867?s=128&d=identicon&r=PG&f=1", "display_name": "Dmytro Khmara", "link": "https://stackoverflow.com/users/2908058/dmytro-khmara"}, "edited": false, "score": 0, "creation_date": 1501686101, "post_id": 45460675, "comment_id": 77889582, "body": "You have build and add libs like described here: <a href=\"https://github.com/davisking/dlib\" rel=\"nofollow noreferrer\">github.com/davisking/dlib</a>"}, {"owner": {"reputation": 1, "user_id": 8405269, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7fc85bd3264bfe6e09102473c0b89f0?s=128&d=identicon&r=PG&f=1", "display_name": "victoriyap", "link": "https://stackoverflow.com/users/8405269/victoriyap"}, "reply_to_user": {"reputation": 1140, "user_id": 2908058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a7412e38307b23d1d82e5bc0de15867?s=128&d=identicon&r=PG&f=1", "display_name": "Dmytro Khmara", "link": "https://stackoverflow.com/users/2908058/dmytro-khmara"}, "edited": false, "score": 0, "creation_date": 1501690928, "post_id": 45460675, "comment_id": 77893105, "body": "yes, like there"}], "owner": {"reputation": 1, "user_id": 8405269, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7fc85bd3264bfe6e09102473c0b89f0?s=128&d=identicon&r=PG&f=1", "display_name": "victoriyap", "link": "https://stackoverflow.com/users/8405269/victoriyap"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 47, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1501679277, "creation_date": 1501676253, "last_edit_date": 1501679277, "question_id": 45460675, "link": "https://stackoverflow.com/questions/45460675/error-building-visual-studio-2015", "title": "Error Building Visual Studio 2015", "body": "<p>I am connecting the dlib library to a project in visual studio 2015 \nI don't know what to write in the linker in my case. I think it is the reason why I get many mistakes when I am trying to build solution<a href=\"https://i.stack.imgur.com/iqMpO.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n"}, {"tags": ["c++", "vulkan"], "comments": [{"owner": {"reputation": 410, "user_id": 2129040, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad84ed22b4c3c262a4766a2be3aa6ca1?s=128&d=identicon&r=PG", "display_name": "skalarproduktraum", "link": "https://stackoverflow.com/users/2129040/skalarproduktraum"}, "edited": false, "score": 1, "creation_date": 1501753119, "post_id": 45460516, "comment_id": 77921257, "body": "A few more details would be helpful: What version of the SDK are you using, what version of the Vulkan runtime, does the output of <code>vulkaninfo</code> show anything fishy, are your graphics drivers current?"}], "answers": [{"comments": [{"owner": {"reputation": 8395, "user_id": 3007154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb7293bd97c47febd218463c27b394c6?s=128&d=identicon&r=PG&f=1", "display_name": "krOoze", "link": "https://stackoverflow.com/users/3007154/krooze"}, "edited": false, "score": 0, "creation_date": 1501767211, "post_id": 45465755, "comment_id": 77932168, "body": "It is potentially bad advice to clear a struct beforehand, With uninitialized values it at least fails hard (=good thing) sometimes (especially in debug mode) when I forget to set a value. And in C++ there is probably a better approach to handle this aspect altogether."}, {"owner": {"reputation": 5, "user_id": 4978410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/22dc41e7183999285efb2723b5741ca9?s=128&d=identicon&r=PG", "display_name": "lohikaarme2", "link": "https://stackoverflow.com/users/4978410/lohikaarme2"}, "edited": false, "score": 0, "creation_date": 1501777303, "post_id": 45465755, "comment_id": 77940527, "body": "After compiling validation layer I know that the segment fault happens in <code>validate_pipeline_shader_stage</code>. Line 1290 <code>if (!module-&gt;has_valid_spirv) return false;</code>. <code>module</code> is null for fragment shader."}], "tags": [], "owner": {"reputation": 721, "user_id": 6475143, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-W7eOWiE3v54/AAAAAAAAAAI/AAAAAAAAABk/bKDTDCW_M3k/photo.jpg?sz=128", "display_name": "Karl Schultz", "link": "https://stackoverflow.com/users/6475143/karl-schultz"}, "is_accepted": false, "score": 1, "last_activity_date": 1501689708, "creation_date": 1501689708, "answer_id": 45465755, "question_id": 45460516, "link": "https://stackoverflow.com/questions/45460516/vkcreatepipeline-fails-and-validation-layer-segment-faults/45465755#45465755", "title": "vkCreatePipeline fails and validation layer segment faults", "body": "<p>The most likely explanation is that you are leaving a pointer unassigned and containing an invalid non-NULL pointer value.  Although it looks like you've tried to fill in every struct member field in the code, there's a chance one got overlooked.  It may be worth trying to clear the entire struct before running the code to set the members.</p>\n\n<p>Hopefully your use of \"debug layers\" means enabling the standard validation layer.  The standard validation layer is a meta-layer that enables several validation-related layers, including \"parameter checking\" and \"core validation\".</p>\n\n<p>The parameter checking layer will often report an error message if it finds a NULL pointer where there should be a valid pointer.  That's why I suggested clearing your structs.  This could enable this layer to produce a meaningful message.</p>\n\n<p>The core_validation layer assumes that parameter checking \"passed\" and therefore won't always test pointers for NULL before dereferencing.  And it can't avoid dereferencing bad non-NULL pointers.  The intent is that the parameter checking layer will successfully report an error message that is useful, even though the app might crash later in core validation.  The programmer should then address the error reported by parameter checking which would then permit the core validation to do its job.</p>\n\n<p>So, bottom line, I'd suggest clearing all your structs to zero before filling them in.  Make sure you are using the standard validation meta-layer which includes parameter checking.  Then watch for validation error messages.</p>\n\n<p>If all that fails, then you might want to catch the seg fault in the validation layers to get a clue about what data structure is causing the fault.  It looks like you may have a symbol mismatch between the layer code and your symbol files.  It may be worth trying to resolve that or build your own layers so that you have accurate symbols.</p>\n"}, {"comments": [{"owner": {"reputation": 5, "user_id": 4978410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/22dc41e7183999285efb2723b5741ca9?s=128&d=identicon&r=PG", "display_name": "lohikaarme2", "link": "https://stackoverflow.com/users/4978410/lohikaarme2"}, "edited": false, "score": 0, "creation_date": 1501780609, "post_id": 45486992, "comment_id": 77942684, "body": "Thank it started to work when <code>&amp;&amp;</code> &quot;brain fart&quot; was fixed."}], "tags": [], "owner": {"reputation": 8395, "user_id": 3007154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb7293bd97c47febd218463c27b394c6?s=128&d=identicon&r=PG&f=1", "display_name": "krOoze", "link": "https://stackoverflow.com/users/3007154/krooze"}, "is_accepted": true, "score": 0, "last_activity_date": 1501845737, "last_edit_date": 1501845737, "creation_date": 1501770169, "answer_id": 45486992, "question_id": 45460516, "link": "https://stackoverflow.com/questions/45460516/vkcreatepipeline-fails-and-validation-layer-segment-faults/45486992#45486992", "title": "vkCreatePipeline fails and validation layer segment faults", "body": "<p>There is a bug in the layers (and potentially in the driver &mdash; it does crash my AMD at the least).\nInstead of uninitialized value for <code>pipelineinfo.pTessellationState</code> (valid, but apparently crashes) try <code>NULL</code>.</p>\n\n<p>You have other errors that should be caught by layers if compiled in debug mode:</p>\n\n<ul>\n<li>uninitialized <code>colorattachment.flags</code> (probably should be <code>0</code>)</li>\n<li><code>dynamicstateinfo.dynamicStateCount</code> <strong>must</strong> not be <code>0</code> (if you want to disable dynamic states completelly use <code>pipelineinfo.pDynamicState=NULL</code> instead)</li>\n<li>one shader module won't be loaded due to the <code>&amp;&amp;</code> short-circuiting (I think you meant to use <code>||</code> instead)</li>\n</ul>\n\n<p>Please enable your validation layers (<code>\"VK_LAYER_LUNARG_standard_validation\"</code>) + reporting <strong>and</strong> verify they work as intended. Compile and test your program in compilers debug mode (it will help you by filling uninitialized values by filling them with more detectable pattern). For me those three were cought and properly reported before the crash.</p>\n\n<p>I am in middle of fixing the first, and hopefully it will land in next release of layers.</p>\n"}], "owner": {"reputation": 5, "user_id": 4978410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/22dc41e7183999285efb2723b5741ca9?s=128&d=identicon&r=PG", "display_name": "lohikaarme2", "link": "https://stackoverflow.com/users/4978410/lohikaarme2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 885, "favorite_count": 0, "accepted_answer_id": 45486992, "answer_count": 2, "score": 0, "last_activity_date": 1501845737, "creation_date": 1501675820, "last_edit_date": 1501782227, "question_id": 45460516, "link": "https://stackoverflow.com/questions/45460516/vkcreatepipeline-fails-and-validation-layer-segment-faults", "title": "vkCreatePipeline fails and validation layer segment faults", "body": "<p>I'm trying to draw something to the HTC Vive with Vulkan.</p>\n\n<p>I had validation layer enabled and program gave me segment fault inside <code>vkCreateGraphicsPipeline</code>. The segment fault happened in <code>VkLayer_core_validation.dll</code>. If that wasn't odd enough the function that segment fault happened in was <code>vkEmurateInstanceExtensions</code>. So, I tested without validation layer and then <code>vkCreateGraphicsPipeline</code> failed with <code>VK_ERROR_VALIDATION_FAILED_EXT</code> as a result.</p>\n\n<p>I have now read the pipeline section of the tutorial I am following several times and I have not found anything wrong. Also I tried older version of the Vulkan SDK but the only difference is that that segment fault happens in <code>vkGetInstanceProcAddr</code> inside of <code>vkCreateGraphicsPipeline</code>.</p>\n\n<pre><code>static int loadShader(VrDevice *device,VkShaderModule *module,char *filename){\n    // load the shader\n         .\n         .\n         .\n    // Create the VkShaderModule\n    VkShaderModuleCreateInfo shadermodule;\n    shadermodule.sType=VK_STRUCTURE_TYPE_SHADER_MODULE_CREATE_INFO;\n    shadermodule.flags=0;\n    shadermodule.pNext=NULL;\n    shadermodule.codeSize=buffersize;\n    shadermodule.pCode=(const uint32_t *)buffer;\n    VkResult result=vkCreateShaderModule(device-&gt;logicaldevice,&amp;shadermodule,NULL,module);\n\n    // Check for vulkan error and free allocated memory before exiting\n    delete[] buffer;\n    if(result==VK_SUCCESS) return 1;\n    else return 0;\n}\n\nint renderingInit(VrDevice *device,char *appname){\n     .\n     .\n     .\n\n    VkApplicationInfo appinfo;\n    appinfo.sType=VK_STRUCTURE_TYPE_APPLICATION_INFO;\n    appinfo.pNext=NULL;\n    appinfo.apiVersion=VK_MAKE_VERSION(1,0,0);\n    appinfo.pApplicationName=appname;\n    appinfo.applicationVersion=1;\n    appinfo.pEngineName=appname;\n    appinfo.engineVersion=1;\n\n    VkInstanceCreateInfo instanceinfo;\n    instanceinfo.sType=VK_STRUCTURE_TYPE_INSTANCE_CREATE_INFO;\n    instanceinfo.pNext=NULL;\n    instanceinfo.flags=0;\n    instanceinfo.pApplicationInfo=&amp;appinfo;\n    instanceinfo.enabledExtensionCount=numextension;\n    instanceinfo.ppEnabledExtensionNames=extensions;\n    instanceinfo.enabledLayerCount=layercount;\n    instanceinfo.ppEnabledLayerNames=debuglayers;\n\n    if(vkCreateInstance(&amp;instanceinfo,NULL,&amp;device-&gt;instance)!=VK_SUCCESS) return 0;\n     .\n     .\n     .\n\n    // Graphics card related matters\n    uint32_t devicecount=1;\n    result=vkEnumeratePhysicalDevices(device-&gt;instance,&amp;devicecount,&amp;device-&gt;physicaldevice);\n    if(result==VK_SUCCESS || result==VK_INCOMPLETE){       \n        vkGetPhysicalDeviceProperties(device-&gt;physicaldevice,&amp;device-&gt;physicaldeviceprop);\n        vkGetPhysicalDeviceMemoryProperties(device-&gt;physicaldevice,&amp;device-&gt;physicaldevicememprop);\n        vkGetPhysicalDeviceFeatures(device-&gt;physicaldevice,&amp;device-&gt;physicaldevicefeatures);\n    }\n    else return 0\n\n    uint32_t queuecount;\n    vkGetPhysicalDeviceQueueFamilyProperties(device-&gt;physicaldevice,&amp;queuecount,NULL);\n    if(queuecount&gt;0){\n        VkQueueFamilyProperties *queues=new VkQueueFamilyProperties[queuecount];\n        vkGetPhysicalDeviceQueueFamilyProperties(device-&gt;physicaldevice,&amp;queuecount,queues);\n        uint32_t queue;\n        for(queue=0;queue&lt;queuecount;queue++){\n            if(queues[queue].queueFlags&amp;VK_QUEUE_GRAPHICS_BIT) break;\n        }\n\n        delete[] queues;\n\n        device-&gt;queuefamily=queue;\n\n    }\n    else return 0;\n     .\n     .\n     .                  \n    // Make logical device\n    VkDeviceQueueCreateInfo queueinfo;\n    queueinfo.sType=VK_STRUCTURE_TYPE_DEVICE_QUEUE_CREATE_INFO;\n    queueinfo.pNext=NULL;\n    queueinfo.flags=0;\n    queueinfo.queueCount=1;\n    queueinfo.queueFamilyIndex=device-&gt;queuefamily;\n    float priority=1.0f;\n    queueinfo.pQueuePriorities=&amp;priority;\n\n    VkDeviceCreateInfo createinfo;\n    createinfo.sType=VK_STRUCTURE_TYPE_DEVICE_CREATE_INFO;\n    createinfo.pNext=NULL;\n    createinfo.flags=0;\n    createinfo.pQueueCreateInfos=&amp;queueinfo;\n    createinfo.queueCreateInfoCount=1;\n    createinfo.ppEnabledExtensionNames=extensions;\n    createinfo.enabledExtensionCount=numextensions;\n    createinfo.ppEnabledLayerNames=NULL;\n    createinfo.enabledLayerCount=0;\n    createinfo.pEnabledFeatures=&amp;device-&gt;physicaldevicefeatures;\n\n    if(vkCreateDevice(device-&gt;physicaldevice,&amp;createinfo,NULL,&amp;device-&gt;logicaldevice)!=VK_SUCCESS) return 0;\n    vkGetDeviceQueue(device-&gt;logicaldevice,device-&gt;queuefamily,0,&amp;device-&gt;queue);\n\n    // Create the frame image for the Vive\n\n     .\n     .\n     .      \n\n    // Create renderpass\n    VkAttachmentDescription colorattachment;\n    colorattachment.format = VK_FORMAT_R8G8B8A8_SRGB;\n    colorattachment.samples = VK_SAMPLE_COUNT_1_BIT;\n    colorattachment.loadOp = VK_ATTACHMENT_LOAD_OP_CLEAR;\n    colorattachment.storeOp = VK_ATTACHMENT_STORE_OP_STORE;\n    colorattachment.stencilLoadOp = VK_ATTACHMENT_LOAD_OP_DONT_CARE;\n    colorattachment.stencilStoreOp = VK_ATTACHMENT_STORE_OP_DONT_CARE;\n    colorattachment.initialLayout = VK_IMAGE_LAYOUT_COLOR_ATTACHMENT_OPTIMAL;\n    colorattachment.finalLayout = VK_IMAGE_LAYOUT_COLOR_ATTACHMENT_OPTIMAL;\n\n    VkAttachmentReference attachreferences;\n    attachreferences.attachment=0;\n    attachreferences.layout=VK_IMAGE_LAYOUT_COLOR_ATTACHMENT_OPTIMAL;\n\n    VkSubpassDescription subpass;\n    subpass.flags=0;\n    subpass.pipelineBindPoint=VK_PIPELINE_BIND_POINT_GRAPHICS;\n    subpass.inputAttachmentCount=0;\n    subpass.pInputAttachments=NULL;\n    subpass.colorAttachmentCount=1;\n    subpass.pColorAttachments=&amp;attachreferences;\n    subpass.pResolveAttachments=0;\n    subpass.pDepthStencilAttachment=0;\n    subpass.preserveAttachmentCount=0;\n    subpass.pPreserveAttachments=0;\n\n    VkRenderPassCreateInfo renderpassinfo;\n    renderpassinfo.sType=VK_STRUCTURE_TYPE_RENDER_PASS_CREATE_INFO;\n    renderpassinfo.pNext=NULL;\n    renderpassinfo.flags=0;\n    renderpassinfo.attachmentCount=1;\n    renderpassinfo.pAttachments=&amp;colorattachment;\n    renderpassinfo.subpassCount=1;\n    renderpassinfo.pSubpasses=&amp;subpass;\n    renderpassinfo.dependencyCount=0;\n    renderpassinfo.pDependencies=NULL;\n\n    if(vkCreateRenderPass(device-&gt;logicaldevice,&amp;renderpassinfo,NULL,&amp;device-&gt;renderpass)!=VK_SUCCESS) return 0;\n\n    //** Load shaders and handle pipeline creation **//\n\n    // Pipeline layout\n    VkPipelineLayoutCreateInfo createinfo;\n    createinfo.sType=VK_STRUCTURE_TYPE_PIPELINE_LAYOUT_CREATE_INFO;\n    createinfo.pNext=NULL;\n    createinfo.flags=0;\n    createinfo.setLayoutCount=0;\n    createinfo.pSetLayouts=NULL;\n    createinfo.pushConstantRangeCount=0;\n    createinfo.pPushConstantRanges=NULL;\n    if(vkCreatePipelineLayout(device-&gt;logicaldevice,&amp;createinfo,NULL,&amp;device-&gt;pipelinelayout)!=VK_SUCCESS) return 0;\n\n\n    // Shader modules.\n    VkPipelineShaderStageCreateInfo shaderstages[2];\n    if(loadShader(device,&amp;shaderstages[0].module,VERTEX_SHADER_NAME)==0 &amp;&amp; loadShader(device,&amp;shaderstages[1].module,FRAGMENT_SHADER_NAME)==0) return 0;\n\n    shaderstages[0].sType=VK_STRUCTURE_TYPE_PIPELINE_SHADER_STAGE_CREATE_INFO;\n    shaderstages[0].pNext=NULL;\n    shaderstages[0].flags=0;\n    shaderstages[0].stage=VK_SHADER_STAGE_VERTEX_BIT;\n    shaderstages[0].pSpecializationInfo=NULL;\n    shaderstages[0].pName=\"main\";\n    shaderstages[1].sType=VK_STRUCTURE_TYPE_PIPELINE_SHADER_STAGE_CREATE_INFO;\n    shaderstages[1].pNext=NULL;\n    shaderstages[1].flags=0;\n    shaderstages[1].stage=VK_SHADER_STAGE_FRAGMENT_BIT;\n    shaderstages[1].pSpecializationInfo=NULL;\n    shaderstages[1].pName=\"main\";\n\n    // Descripte the vertex input to pipeline.\n    VkPipelineVertexInputStateCreateInfo vertexinfo;\n    vertexinfo.sType=VK_STRUCTURE_TYPE_PIPELINE_VERTEX_INPUT_STATE_CREATE_INFO;\n    vertexinfo.pNext=NULL;\n    vertexinfo.flags=0;\n    vertexinfo.pVertexAttributeDescriptions=NULL;\n    vertexinfo.vertexAttributeDescriptionCount=0;\n    vertexinfo.pVertexBindingDescriptions=NULL;\n    vertexinfo.vertexBindingDescriptionCount=0;\n\n    VkPipelineInputAssemblyStateCreateInfo inputassembly;\n    inputassembly.sType=VK_STRUCTURE_TYPE_PIPELINE_INPUT_ASSEMBLY_STATE_CREATE_INFO;\n    inputassembly.pNext=NULL;\n    inputassembly.flags=0;\n    inputassembly.topology=VK_PRIMITIVE_TOPOLOGY_TRIANGLE_LIST;\n    inputassembly.primitiveRestartEnable=VK_FALSE;\n\n    // Viewport decide what reqion of framebuffer is used.\n    VkViewport viewport = {0.0f,0.0f,(float)device-&gt;renderwidth,(float)device-&gt;renderheight,0.0f,1.0f};\n    // Scissors decide how much pippeline covers the window (how much info goes to rasterizing).\n    VkRect2D scissor = {0,0,device-&gt;renderwidth,device-&gt;renderheight};\n\n    VkPipelineViewportStateCreateInfo viewportstate;\n    viewportstate.sType=VK_STRUCTURE_TYPE_PIPELINE_VIEWPORT_STATE_CREATE_INFO;\n    viewportstate.pNext=NULL;\n    viewportstate.flags=0;\n    viewportstate.pScissors=&amp;scissor;\n    viewportstate.scissorCount=1;\n    viewportstate.pViewports=&amp;viewport;\n    viewportstate.viewportCount=1;\n\n    // Rasterization infomration\n    VkPipelineRasterizationStateCreateInfo rasterization;\n    rasterization.sType=VK_STRUCTURE_TYPE_PIPELINE_RASTERIZATION_STATE_CREATE_INFO;\n    rasterization.pNext=NULL;\n    rasterization.flags=0;\n    rasterization.depthClampEnable=VK_FALSE;\n    rasterization.rasterizerDiscardEnable=VK_FALSE;\n    rasterization.polygonMode=VK_POLYGON_MODE_FILL;\n    rasterization.cullMode=VK_CULL_MODE_BACK_BIT;\n    rasterization.frontFace=VK_FRONT_FACE_CLOCKWISE;\n    rasterization.depthBiasEnable=VK_FALSE;\n    rasterization.depthBiasConstantFactor=0.0f;\n    rasterization.depthBiasClamp=0.0f;\n    rasterization.lineWidth=1.0f;\n\n    // Multisampling\n    VkPipelineMultisampleStateCreateInfo multisampling;\n    multisampling.sType=VK_STRUCTURE_TYPE_PIPELINE_MULTISAMPLE_STATE_CREATE_INFO;\n    multisampling.pNext=NULL;\n    multisampling.flags=0;\n    multisampling.rasterizationSamples=VK_SAMPLE_COUNT_1_BIT;\n    multisampling.sampleShadingEnable=VK_FALSE;\n    multisampling.minSampleShading=0.0f;\n    multisampling.pSampleMask=NULL;\n    multisampling.alphaToCoverageEnable=VK_FALSE;\n    multisampling.alphaToOneEnable=VK_FALSE;\n\n    // Color blending\n    VkPipelineColorBlendAttachmentState colorblendattachment;\n    colorblendattachment.colorWriteMask=VK_COLOR_COMPONENT_R_BIT | VK_COLOR_COMPONENT_G_BIT | VK_COLOR_COMPONENT_B_BIT | VK_COLOR_COMPONENT_A_BIT;\n    colorblendattachment.blendEnable=VK_FALSE;\n    colorblendattachment.srcAlphaBlendFactor=VK_BLEND_FACTOR_ONE;\n    colorblendattachment.dstAlphaBlendFactor=VK_BLEND_FACTOR_ZERO;\n    colorblendattachment.colorBlendOp=VK_BLEND_OP_ADD;\n    colorblendattachment.srcColorBlendFactor=VK_BLEND_FACTOR_ONE;\n    colorblendattachment.dstColorBlendFactor=VK_BLEND_FACTOR_ZERO;\n    colorblendattachment.alphaBlendOp=VK_BLEND_OP_ADD;\n    VkPipelineColorBlendStateCreateInfo colorblend;\n    colorblend.sType=VK_STRUCTURE_TYPE_PIPELINE_COLOR_BLEND_STATE_CREATE_INFO;\n    colorblend.pNext=NULL;\n    colorblend.flags=0;\n    colorblend.logicOpEnable=VK_FALSE;\n    colorblend.logicOp=VK_LOGIC_OP_COPY;\n    colorblend.attachmentCount=1;\n    colorblend.pAttachments=&amp;colorblendattachment;\n    colorblend.blendConstants[0]=0;\n    colorblend.blendConstants[1]=0;\n    colorblend.blendConstants[2]=0;\n    colorblend.blendConstants[3]=0;\n\n    // If tuo want to change viewport, line width, blend constants you have to change it in this data type.\n    VkPipelineDynamicStateCreateInfo dynamicstateinfo;\n    dynamicstateinfo.sType=VK_STRUCTURE_TYPE_PIPELINE_DYNAMIC_STATE_CREATE_INFO;\n    dynamicstateinfo.pNext=NULL;\n    dynamicstateinfo.flags=0;\n    dynamicstateinfo.dynamicStateCount=0;\n    dynamicstateinfo.pDynamicStates=NULL;\n\n    VkGraphicsPipelineCreateInfo pipelineinfo;\n    pipelineinfo.sType=VK_STRUCTURE_TYPE_GRAPHICS_PIPELINE_CREATE_INFO;\n    pipelineinfo.pNext=NULL;\n    pipelineinfo.flags=0;\n    pipelineinfo.stageCount=2;\n    pipelineinfo.pStages=shaderstages;\n    pipelineinfo.pVertexInputState=&amp;vertexinfo;\n    pipelineinfo.pInputAssemblyState=&amp;inputassembly;\n    pipelineinfo.pViewportState=&amp;viewportstate;\n    pipelineinfo.pRasterizationState=&amp;rasterization;\n    pipelineinfo.pMultisampleState=&amp;multisampling;\n    pipelineinfo.pDepthStencilState=NULL;\n    pipelineinfo.pColorBlendState=&amp;colorblend;\n    pipelineinfo.pDynamicState=&amp;dynamicstateinfo;\n    pipelineinfo.layout=device-&gt;pipelinelayout;\n    pipelineinfo.renderPass=device-&gt;renderpass;\n    pipelineinfo.subpass=0;\n    pipelineinfo.basePipelineHandle=VK_NULL_HANDLE;\n    pipelineinfo.basePipelineIndex=0;\n\n    // ** TODO: SEGMENT FAULT WHILE DEBUG LAYER IS ON! ** //\n    if((result=vkCreateGraphicsPipelines(device-&gt;logicaldevice,VK_NULL_HANDLE,1,&amp;pipelineinfo,NULL,&amp;device-&gt;pipeline))!=VK_SUCCESS) return 0;\n\n    // Destroy shaders after pipeline creation\n    vkDestroyShaderModule(device-&gt;logicaldevice,shaderstages[0].module,NULL);\n    vkDestroyShaderModule(device-&gt;logicaldevice,shaderstages[1].module,NULL);\n}\n</code></pre>\n\n<p>EDIT 1: Changed debug layer to validation layer.</p>\n\n<p>Additional info:\nVulkan SDK version 1.0.54.0</p>\n"}, {"tags": ["c++", "gotw"], "comments": [{"owner": {"reputation": 289239, "user_id": 704848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f9be2c2958e208c8d9b629ac43c9c42?s=128&d=identicon&r=PG", "display_name": "EdChum", "link": "https://stackoverflow.com/users/704848/edchum"}, "edited": false, "score": 0, "creation_date": 1501675717, "post_id": 45460423, "comment_id": 77880933, "body": "isn&#39;t what Sutter is referring to regarding if the member is a reference? e.g. <code>int&amp; x;</code> You&#39;ve defined it <code>x</code> to be a plain member"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1501676316, "post_id": 45460423, "comment_id": 77881413, "body": "That member isn&#39;t a reference, but it might &quot;apparently&quot; work fine even if it were, due to the wonders of undefined behaviour."}, {"owner": {"reputation": 4043, "user_id": 6949852, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/uebCh.png?s=128&g=1", "display_name": "\u9673 \u529b", "link": "https://stackoverflow.com/users/6949852/%e9%99%b3-%e5%8a%9b"}, "reply_to_user": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1501676705, "post_id": 45460423, "comment_id": 77881726, "body": "@molbdnilo the way I evoke <code>A a(1)</code> is UB? can you express in detail? thanks in advance."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1501677141, "post_id": 45460423, "comment_id": 77882096, "body": "@czxyl It&#39;s not undefined, because your member is not a reference. But you can&#39;t tell from observing a program&#39;s execution that it <i>isn&#39;t</i> undefined."}], "answers": [{"tags": [], "owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "is_accepted": true, "score": 5, "last_activity_date": 1501675702, "creation_date": 1501675702, "answer_id": 45460478, "question_id": 45460423, "link": "https://stackoverflow.com/questions/45460423/what-does-it-doesn-t-work-for-references-that-are-members-of-objects-means-in/45460478#45460478", "title": "What does &quot;It doesn\u2019t work for references that are members of objects&quot; means in GotW #88?", "body": "<p>It means that if you do something like this:</p>\n\n<pre><code>string f() { return \"abc\"; }\n\nstruct foo {\n  string const &amp; _s;\n  foo() : _s(f()) {}\n};\n</code></pre>\n\n<p>It won't extend the life of the temporary returned from <code>f</code>. And the reference <code>_s</code> will dangle.</p>\n\n<p>Extending the lifetime of temporaries is a property of references with automatic storage duration. I.e. local variables in function scope.</p>\n"}], "owner": {"reputation": 4043, "user_id": 6949852, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/uebCh.png?s=128&g=1", "display_name": "\u9673 \u529b", "link": "https://stackoverflow.com/users/6949852/%e9%99%b3-%e5%8a%9b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "accepted_answer_id": 45460478, "answer_count": 1, "score": 1, "last_activity_date": 1501676601, "creation_date": 1501675570, "last_edit_date": 1501676601, "question_id": 45460423, "link": "https://stackoverflow.com/questions/45460423/what-does-it-doesn-t-work-for-references-that-are-members-of-objects-means-in", "title": "What does &quot;It doesn\u2019t work for references that are members of objects&quot; means in GotW #88?", "body": "<p><a href=\"https://herbsutter.com/2008/01/01/gotw-88-a-candidate-for-the-most-important-const/\" rel=\"nofollow noreferrer\">Herb Sutter</a>: </p>\n\n<blockquote>\n  <p>Effective Concurrency: Use Lock Hierarchies to Avoid DeadlockEffective\n  Concurrency: Break Amdahl\u2019s Law! \u00bb GotW #88: A Candidate For the \u201cMost\n  Important const\u201d 2008-01-01 by Herb Sutter A friend recently asked me\n  whether Example 1 below is legal, and if so what it means. It led to a\n  nice discussion I thought I\u2019d post here. Since it was in close to GotW\n  style already, I thought I\u2019d do another honorary one after all these\n  years\u2026 no, I have not made a New Year\u2019s Resolution to resume writing\n  regular GotWs. :-)</p>\n  \n  <p>JG Questions Q1: Is the following code legal C++?</p>\n\n<pre><code>// Example 1\n\nstring f() { return \"abc\"; }\n\nvoid g() {\nconst string&amp; s = f();\n  cout &lt;&lt; s &lt;&lt; endl;    // can we still use the \"temporary\" object?\n}\n</code></pre>\n  \n  <p>A1: Yes. This is a C++ feature\u2026 the code is valid and does exactly\n  what it appears to do.</p>\n  \n  <p>Normally, a temporary object lasts only until the end of the full\n  expression in which it appears. However, C++ deliberately specifies\n  that binding a temporary object to a reference to const on the stack\n  lengthens the lifetime of the temporary to the lifetime of the\n  reference itself, and thus avoids what would otherwise be a common\n  dangling-reference error. In the example above, the temporary returned\n  by f() lives until the closing curly brace. (Note this only applies to\n  stack-based references. <strong>It doesn\u2019t work for references that are\n  members of objects</strong>.)</p>\n</blockquote>\n\n<p>Originally, I think the final sentence means: </p>\n\n<pre><code>class A \n{\npublic:\n    int x;\n    A(const int&amp; x_)\n    {\n        x = x_;\n    }\n};\n\nint main()\n{\n    A a(1); // assign lvalue to const int&amp;\n    std::cout &lt;&lt; a.x;\n}\n</code></pre>\n\n<p>However, it works fine apparently. </p>\n\n<p>So, what \"does It doesn\u2019t work for references that are members of objects\" means?</p>\n"}, {"tags": ["python", "c++", "tensorflow", "client", "serving"], "answers": [{"tags": [], "owner": {"reputation": 61, "user_id": 6175691, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/d65bcfdab5cd5fae919a65d4534887ab?s=128&d=identicon&r=PG&f=1", "display_name": "Maja", "link": "https://stackoverflow.com/users/6175691/maja"}, "is_accepted": false, "score": 0, "last_activity_date": 1501748918, "creation_date": 1501748918, "answer_id": 45478810, "question_id": 45460169, "link": "https://stackoverflow.com/questions/45460169/rewriting-mnist-client-to-c-arg0-is-not-a-matrix/45478810#45478810", "title": "Rewriting mnist client to c++ (arg[0] is not a matrix)", "body": "<p>As expected, the fix was obvious. \nAll that had to be done was to add another dimension:</p>\n\n<pre><code>   proto.mutable_tensor_shape()-&gt;add_dim()-&gt;set_size(image_size);\n</code></pre>\n\n<p>to get <code>[image_size,1]</code> shape. </p>\n"}], "owner": {"reputation": 61, "user_id": 6175691, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/d65bcfdab5cd5fae919a65d4534887ab?s=128&d=identicon&r=PG&f=1", "display_name": "Maja", "link": "https://stackoverflow.com/users/6175691/maja"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 414, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1501748918, "creation_date": 1501674835, "last_edit_date": 1501743284, "question_id": 45460169, "link": "https://stackoverflow.com/questions/45460169/rewriting-mnist-client-to-c-arg0-is-not-a-matrix", "title": "Rewriting mnist client to c++ (arg[0] is not a matrix)", "body": "<p>I am trying to rewrite the python code for <code>mnist_client</code> to c++. Since I am new to tensorflow and TF serving I am having some difficulties. I went through the tutorials and the c++ client example (<code>inception_client</code>).\nPython <code>mnist_client</code> works without any problems, but when I run my c++ client it gives me the <code>arg[0] is not a matrix</code> </p>\n\n<pre><code>gRPC call return code: 3: In[0] is not a matrix \n [[Node: MatMul = MatMul[T=DT_FLOAT, _output_shapes=[[?,10]], transpose_a=false, transpose_b=false, _device=\"/job:localhost/replica:0/task:0/cpu:0\"](_arg_x_0_0, Variable/read)]]\n</code></pre>\n\n<p>I trained the model as in the tutorial and I've checked that the minst data I read is ok. </p>\n\n<p>From this:\n<a href=\"https://stackoverflow.com/q/43413232/6175691\">tensorflow Invalid argument: In[0] is not a matrix</a> ,\nI understand <code>MatMul</code> needs at least 2-dim data. But, I went through the c++ code for <code>inception_client</code> and python <code>mnist_client</code> and both read the image data into a 1-dim char array... \nWhat am I missing here? </p>\n\n<p>The code for <code>inception_client</code>: <a href=\"https://github.com/tensorflow/serving/blob/master/tensorflow_serving/example/inception_client.cc\" rel=\"nofollow noreferrer\">https://github.com/tensorflow/serving/blob/master/tensorflow_serving/example/inception_client.cc</a></p>\n\n<p>Any help would be much appreciated. :)</p>\n\n<pre><code>class ServingClient{\npublic:\nServingClient(std::shared_ptr&lt;Channel&gt; channel) : stub_(PredictionService::NewStub(channel)){}\n\ntensorflow::string callPredict( const tensorflow::string &amp;model_name,\n                                const tensorflow::string &amp;model_signature,\n                                const int num_tests){\nPredictRequest request;\nPredictResponse response;\nClientContext context;\nint image_size;\nint image_offset = 16;\nint label_offset = 8;\n\nrequest.mutable_model_spec()-&gt;set_name(model_name);\nrequest.mutable_model_spec()-&gt;set_signature_name(model_signature);\n\ngoogle::protobuf::Map&lt;tensorflow::string, tensorflow::TensorProto&gt; &amp;inputs = *request.mutable_inputs();\n\nstd::fstream imageFile(\"t10k-images-idx3-ubyte\", std::ios::binary | std::ios::in);\nstd::fstream labelFile(\"t10k-labels-idx1-ubyte\", std::ios::binary | std::ios::in);\n\nlabelFile.seekp(0);\nimageFile.seekp(0);\n\nuint32_t magic_number_images;\nuint32_t nImages;\nuint32_t magic_number_labels;\nuint32_t rowsI =0;\nuint32_t rowsL =0;\nuint32_t colsI = 0;\nuint32_t colsL = 0;\n\n\nimageFile.read((char *)&amp;magic_number_images, sizeof(magic_number_images));\nimageFile.read((char *)&amp;nImages, sizeof(nImages));\nimageFile.read((char *)(&amp;rowsI), sizeof(rowsI));\nimageFile.read((char *)&amp;colsI, sizeof(colsI));\n\nimage_size = ReverseInt(rowsI) * ReverseInt(colsI);\n\nlabelFile.read((char *)&amp;magic_number_labels, sizeof(magic_number_labels));\nlabelFile.read((char *)&amp;rowsL, sizeof(rowsL));\n\nfor(int i=0; i&lt;num_tests; i++){\n    tensorflow::TensorProto proto;\n\n    labelFile.seekp(label_offset);\n    imageFile.seekp(image_offset);\n\n    //read mnist image\n    char *img = new char[image_size]();\n    char label = 0;\n    imageFile.read((char *)img, image_size);\n\n    image_offset += image_size;\n    //read label\n    labelFile.read(&amp;label, 1);\n    label_offset++;\n\n    //predict\n    proto.set_dtype(tensorflow::DataType::DT_STRING);\n    proto.add_string_val(img, image_size);\n    proto.mutable_tensor_shape()-&gt;add_dim()-&gt;set_size(1);\n    inputs[\"images\"] = proto;\n\n    Status status = stub_-&gt;Predict(&amp;context, request, &amp;response);\n    delete[] img;\n\n    if(status.ok()){\n    std::cout &lt;&lt; \"status OK.\" &lt;&lt; std::endl;\n    OutMap &amp;map_outputs = *response.mutable_outputs();\n    OutMap::iterator iter;\n    int output_index = 0;\n\n    for(iter = map_outputs.begin(); iter != map_outputs.end(); ++iter){\n        tensorflow::TensorProto &amp;result_tensor_proto = iter-&gt;second;\n        tensorflow::Tensor tensor;\n        //check if response converted succesfully \n        bool converted = tensor.FromProto(result_tensor_proto);\n        if (converted) {\n            std::cout &lt;&lt; \"the result tensor[\" &lt;&lt; output_index &lt;&lt; \"] is:\" &lt;&lt; std::endl\n                        &lt;&lt; tensor.SummarizeValue(10) &lt;&lt; std::endl;\n         } \n         else {\n            std::cout &lt;&lt; \"the result tensor[\" &lt;&lt; output_index\n                        &lt;&lt; \"] convert failed.\" &lt;&lt; std::endl;\n        }\n        ++output_index;\n                }\n        }\n    else{\n        std::cout &lt;&lt; \"gRPC call return code: \" &lt;&lt; status.error_code() &lt;&lt; \": \"\n            &lt;&lt; status.error_message() &lt;&lt; std::endl;\n            }\n        }\nimageFile.close();\nlabelFile.close();\n}\n\nprivate:\n    std::unique_ptr&lt;PredictionService::Stub&gt; stub_;\n\n};\n</code></pre>\n\n<p><strong>EDIT 1:</strong> I assume the problem must be in how the model was created and what dimension is the data the client sends.\nI used the provided python program that trains and exports the model which sets the dimensions:</p>\n\n<pre><code>feature_configs = {'x': tf.FixedLenFeature(shape=[784], dtype=tf.float32),}\ntf_example = tf.parse_example(serialized_tf_example, feature_configs)\nx = tf.identity(tf_example['x'], name='x')  # use tf.identity() to assign name\ny_ = tf.placeholder('float', shape=[None, 10])\nw = tf.Variable(tf.zeros([784, 10]))\nb = tf.Variable(tf.zeros([10]))\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 4535, "user_id": 59081, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c17b54bbea172f608e552f9bf67d4f9?s=128&d=identicon&r=PG", "display_name": "Tanveer Badar", "link": "https://stackoverflow.com/users/59081/tanveer-badar"}, "edited": false, "score": 0, "creation_date": 1501674853, "post_id": 45460128, "comment_id": 77880262, "body": "How are you launching it from C#?"}, {"owner": {"reputation": 8251, "user_id": 2912665, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/XrRhd.jpg?s=128&g=1", "display_name": "CinCout", "link": "https://stackoverflow.com/users/2912665/cincout"}, "edited": false, "score": 0, "creation_date": 1501674933, "post_id": 45460128, "comment_id": 77880323, "body": "What is <code>npos</code>?"}, {"owner": {"reputation": 254, "user_id": 2270556, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/b3c3d81aca0f7fd1201eb7fd75ebe84c?s=128&d=identicon&r=PG", "display_name": "Peter", "link": "https://stackoverflow.com/users/2270556/peter"}, "reply_to_user": {"reputation": 4535, "user_id": 59081, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c17b54bbea172f608e552f9bf67d4f9?s=128&d=identicon&r=PG", "display_name": "Tanveer Badar", "link": "https://stackoverflow.com/users/59081/tanveer-badar"}, "edited": false, "score": 0, "creation_date": 1501675003, "post_id": 45460128, "comment_id": 77880370, "body": "@Tanveer Badar [DllImport(DLLName, CallingConvention = CallingConvention.StdCall,                    CharSet = CharSet.Unicode, EntryPoint = &quot;ReadVulcanCSVFileHeader&quot;)]  public static extern void ReadVulcanCSVFileHeader([In] string FileNameWithPath, ref uint FieldCount,                                                            FeedBack FeedBack, ref int ErrorCode);"}, {"owner": {"reputation": 115745, "user_id": 119527, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/lTjBL.png?s=128&g=1", "display_name": "Jonathon Reinhart", "link": "https://stackoverflow.com/users/119527/jonathon-reinhart"}, "edited": false, "score": 1, "creation_date": 1501675017, "post_id": 45460128, "comment_id": 77880381, "body": "18446744073709551615 is 0xFFFFFFFFFFFFFFFF which is -1 interpreted as an unsigned integer. It sounds like a type mismatch or uninitialized value. However, the code you&#39;re showing seems to have nothing to do with the error you&#39;re reporting so this question is not exactly answerable."}, {"owner": {"reputation": 254, "user_id": 2270556, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/b3c3d81aca0f7fd1201eb7fd75ebe84c?s=128&d=identicon&r=PG", "display_name": "Peter", "link": "https://stackoverflow.com/users/2270556/peter"}, "reply_to_user": {"reputation": 115745, "user_id": 119527, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/lTjBL.png?s=128&g=1", "display_name": "Jonathon Reinhart", "link": "https://stackoverflow.com/users/119527/jonathon-reinhart"}, "edited": false, "score": 0, "creation_date": 1501675105, "post_id": 45460128, "comment_id": 77880451, "body": "@JonathonReinhart I am hoping that someone may be able to confirm that they have also had the same experience and have concluded this is not a problem."}, {"owner": {"reputation": 254, "user_id": 2270556, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/b3c3d81aca0f7fd1201eb7fd75ebe84c?s=128&d=identicon&r=PG", "display_name": "Peter", "link": "https://stackoverflow.com/users/2270556/peter"}, "edited": false, "score": 0, "creation_date": 1501675473, "post_id": 45460128, "comment_id": 77880732, "body": "@Code Gray No, I am not asking why 0XFFFFFFFFFFFFFFFF is the value that it is. I am asking why intellisense does not display something useful instead of what it did display. In particular is this an indication of an error of some kind?"}, {"owner": {"reputation": 221394, "user_id": 366904, "user_type": "moderator", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3f8912af19fe86b7b34a0b011a962460?s=128&d=identicon&r=PG", "display_name": "Cody Gray", "link": "https://stackoverflow.com/users/366904/cody-gray"}, "edited": false, "score": 0, "creation_date": 1501677995, "post_id": 45460128, "comment_id": 77882812, "body": "FYI: You got my name wrong, so the ping didn&#39;t actually work. I just happened to have this tab still open where I could see your reply. Anyway, I don&#39;t understand where your confusion persists. Intellisense is displaying this long integer value because it&#39;s equivalent to -1 as an unsigned integer. You say you already know that. The <code>npos</code> field is -1 because that&#39;s the default value for that field. It&#39;s only an error if you had just previously called a member function that performs a search or otherwise looks for a position; in that case, it would indicate no valid position was found."}], "answers": [{"comments": [{"owner": {"reputation": 254, "user_id": 2270556, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/b3c3d81aca0f7fd1201eb7fd75ebe84c?s=128&d=identicon&r=PG", "display_name": "Peter", "link": "https://stackoverflow.com/users/2270556/peter"}, "edited": false, "score": 0, "creation_date": 1501675532, "post_id": 45460187, "comment_id": 77880771, "body": "Thanks, but is this any reason for concern?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 254, "user_id": 2270556, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/b3c3d81aca0f7fd1201eb7fd75ebe84c?s=128&d=identicon&r=PG", "display_name": "Peter", "link": "https://stackoverflow.com/users/2270556/peter"}, "edited": false, "score": 0, "creation_date": 1501675582, "post_id": 45460187, "comment_id": 77880813, "body": "@Peter It shouldn&#39;t be.  It&#39;s just intellisense being senseless."}], "tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": false, "score": 1, "last_activity_date": 1501674891, "creation_date": 1501674891, "answer_id": 45460187, "question_id": 45460128, "link": "https://stackoverflow.com/questions/45460128/intellisense-on-wstring-displays-npos-18446744/45460187#45460187", "title": "Intellisense on wstring displays: npos = 18446744", "body": "<p>You're just seeing a part of <code>std::string</code>/<code>std::wstring</code>.  <code>std::string::npos</code> is a sentinel value and is used to indicate when a member function doesn't find a valid position in the string.  It is defined as</p>\n\n<pre><code>size_type npos = -1;\n</code></pre>\n\n<p>and since <code>size_type</code> is a unsigned integer type it wraps around to be the largest number that type can hold.  In this case you are seeing the maximum value a 64 bit unsigned integer can hold.</p>\n"}], "owner": {"reputation": 254, "user_id": 2270556, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/b3c3d81aca0f7fd1201eb7fd75ebe84c?s=128&d=identicon&r=PG", "display_name": "Peter", "link": "https://stackoverflow.com/users/2270556/peter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 170, "favorite_count": 0, "closed_date": 1501674971, "answer_count": 1, "score": 0, "last_activity_date": 1501677168, "creation_date": 1501674708, "last_edit_date": 1501677168, "question_id": 45460128, "link": "https://stackoverflow.com/questions/45460128/intellisense-on-wstring-displays-npos-18446744", "closed_reason": "Duplicate", "title": "Intellisense on wstring displays: npos = 18446744", "body": "<p>In a constructor:</p>\n\n<pre><code>CSVBMFBlockModelReader(const wchar_t * const FileNameWithPath, char Delimiter)\n{\n    _FileNameWithPath = FileNameWithPath;\n    _Delimiter = Delimiter;\n}\n</code></pre>\n\n<p>Intellisense then reports \n{npos=18446744073709551615 }\nand the Immediate Window reports something similiar:</p>\n\n<p>{npos=18446744073709551615 }\n    (error): 0\n    (error): 0</p>\n\n<p>Am I doing something wrong or is this just intellisense? The code works as expected and _FileNameWithPath.data() returns the correct result. The compiler issues no warning of any kind. The local private declarations are:</p>\n\n<pre><code>private:\n\n    std::wstring _FileNameWithPath;\n    char _Delimiter;\n</code></pre>\n\n<p>I must state that I am debugging the code after launching it from c#. I am using VS 2015 Enterprise.</p>\n\n<p>Please note I am aware that 0XFFFFFFFFFFFFFFFF is the same value. My interest is in why intellisense displays this value to me.  </p>\n"}, {"tags": ["c++", "approximation", "trigonometry", "boost-geometry"], "comments": [{"owner": {"reputation": 729, "user_id": 5942006, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1fe054f41dc543395631acc84ac04f60?s=128&d=identicon&r=PG&f=1", "display_name": "systemcpro", "link": "https://stackoverflow.com/users/5942006/systemcpro"}, "edited": false, "score": 3, "creation_date": 1501674632, "post_id": 45460051, "comment_id": 77880114, "body": "In embedded systems we normally use lookup tables for trig functions - I&#39;d give that a try."}, {"owner": {"reputation": 406, "user_id": 2102925, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/582cb201d06c59f1521cbe4e2a5667c3?s=128&d=identicon&r=PG", "display_name": "AdityaG", "link": "https://stackoverflow.com/users/2102925/adityag"}, "edited": false, "score": 0, "creation_date": 1501676466, "post_id": 45460051, "comment_id": 77881534, "body": "There was a similar question here <a href=\"https://stackoverflow.com/questions/650797/implementing-table-lookup-based-trig-functions\" title=\"implementing table lookup based trig functions\">stackoverflow.com/questions/650797/&hellip;</a>"}, {"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 0, "creation_date": 1501677696, "post_id": 45460051, "comment_id": 77882544, "body": "What is your point data? If you don&#39;t create many points on the spot and each point has several distances calculated, you could pre-calculate the sines and cosines for each point&#39;s azimuth and elevation."}, {"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 0, "creation_date": 1501677747, "post_id": 45460051, "comment_id": 77882593, "body": "And perhaps you could save some calculations if you designed the algorithm around the big circle distance calculation so that it doesn&#39;t have to call the distance function so often. This depends, of course, on what you want to achieve."}, {"owner": {"reputation": 2401, "user_id": 7431005, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/faf76298f3d4f60915eee51da1ee7c3f?s=128&d=identicon&r=PG&f=1", "display_name": "user7431005", "link": "https://stackoverflow.com/users/7431005/user7431005"}, "edited": false, "score": 0, "creation_date": 1501677893, "post_id": 45460051, "comment_id": 77882717, "body": "Thanks for your help... I have created a own lookup table, which was already a big improvement."}, {"owner": {"reputation": 2401, "user_id": 7431005, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/faf76298f3d4f60915eee51da1ee7c3f?s=128&d=identicon&r=PG&f=1", "display_name": "user7431005", "link": "https://stackoverflow.com/users/7431005/user7431005"}, "edited": false, "score": 0, "creation_date": 1501678042, "post_id": 45460051, "comment_id": 77882853, "body": "unluckily my point looks slightly different each times, so I cannot precalc it. I will play around a bit with lookup tables. Right now I have created a own class &quot;lookup&quot; with an static unordered map."}, {"owner": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 0, "creation_date": 1501692385, "post_id": 45460051, "comment_id": 77893964, "body": "Take first two terms of the series expansion <a href=\"https://en.wikipedia.org/wiki/Taylor_series#Trigonometric_functions\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Taylor_series#Trigonometric_functions</a>"}, {"owner": {"reputation": 23130, "user_id": 8586227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BRnwg.png?s=128&g=1", "display_name": "Davis Herring", "link": "https://stackoverflow.com/users/8586227/davis-herring"}, "edited": false, "score": 0, "creation_date": 1556243258, "post_id": 45460051, "comment_id": 98380403, "body": "@user7431005: You should be able to do better than a map by generating uniformly spaced samples and looking up a value (or two for interpolation) with an array index from scaling the input."}], "owner": {"reputation": 2401, "user_id": 7431005, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/faf76298f3d4f60915eee51da1ee7c3f?s=128&d=identicon&r=PG&f=1", "display_name": "user7431005", "link": "https://stackoverflow.com/users/7431005/user7431005"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 377, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1556219247, "creation_date": 1501674478, "last_edit_date": 1556219247, "question_id": 45460051, "link": "https://stackoverflow.com/questions/45460051/great-circle-distance-performance", "title": "great circle distance performance", "body": "<p>in my c++ program at one point I need to calculate the distance between two spherical points (given in azimuth and elevation) on a sphere. \nThis calculation needs to be done extremely often, but I don't require a high accuracy (1 degree should be enough). \n(The distances are in all ranges [0-180])</p>\n\n<p>I used a profiler (valgrind) to look for bottlenecks. It turns out that 70% of my runtime is spend in my calculation of the great circle distance. In this function 60% of my time is spend calculating the sine or cosine or other trigonometric functions... </p>\n\n<p>I tried different approaches: (all using namespace std;)</p>\n\n<pre><code>double tmp = sin(el1) * sin(el2) + cos(el1) * cos(el2) * cos(az1-az2);\ndouble distance = acos(tmp);\n</code></pre>\n\n<p>or</p>\n\n<pre><code>typedef boost::geometry::model::point&lt;double, 2, boost::geometry::cs::spherical_equatorial&lt;boost::geometry::radian&gt; &gt; spherical_point;\nspherical_point p1(az2,el2);\nspherical_point p2(az1,el2);\ndouble distance = hv.apply(p1,p2); % here hv is a haversine&lt;double&gt; object\n</code></pre>\n\n<p>or </p>\n\n<pre><code>double daz_half = (az2 - az1)/2;\ndouble del_half = (el2 - el1)/2;\ndouble tel = sin(del_half);\ndouble taz = sin(daz_half);\ndouble a = tel*tel + cos(el2) * cos(el1) * taz * taz ;\ndouble distance = 2*atan2(sqrt(a),sqrt(1-a));\n</code></pre>\n\n<p>all calculations lead to similar run times, which are spend in different trigonometric functions... </p>\n\n<p>Does anybody know a good approximation for the great circle distance formula with reduced accuracy? </p>\n\n<p>Or does anybody know how to speed up the calculation of sin cos acos atan2... </p>\n\n<p>Does it make sense to precalc a own trigonometric function lookup table with reduced accuracy? </p>\n\n<p>If yes, how should this best look like (binary search or linear, vector or set...)?</p>\n"}, {"tags": ["python", "c++", "opencv", "image-processing"], "comments": [{"owner": {"reputation": 8368, "user_id": 4669778, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh4.googleusercontent.com/-Iz_f3T23jC4/AAAAAAAAAAI/AAAAAAAADVQ/_H_y2EUoF7c/photo.jpg?sz=128", "display_name": "Ofer Sadan", "link": "https://stackoverflow.com/users/4669778/ofer-sadan"}, "edited": false, "score": 2, "creation_date": 1501674531, "post_id": 45460036, "comment_id": 77880034, "body": "It&#39;s probably possible, yes. But that can&#39;t be your whole question is it? Why don&#39;t you show your code and ask for help improving it?"}, {"owner": {"reputation": 7841, "user_id": 5250746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/A19NH.jpg?s=128&g=1", "display_name": "Arpit Solanki", "link": "https://stackoverflow.com/users/5250746/arpit-solanki"}, "edited": false, "score": 2, "creation_date": 1501674639, "post_id": 45460036, "comment_id": 77880118, "body": "I would suggest read some research papers. This is not a straightforward problem and can not have a small solution. Not really good for stackoverflow"}, {"owner": {"reputation": 2369, "user_id": 3564091, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2d634bf21a64d8d510ddf6e14b2c9ec?s=128&d=identicon&r=PG&f=1", "display_name": "KjMag", "link": "https://stackoverflow.com/users/3564091/kjmag"}, "edited": false, "score": 0, "creation_date": 1501678178, "post_id": 45460036, "comment_id": 77882964, "body": "You need to preprocess such an image first. Try some thresholding methods. Also think bout modyfing acquisition parameters if you can do this. It would be good to provide uniform lighting."}, {"owner": {"reputation": 17633, "user_id": 2858170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4263428b9b0e0aed365e264c7a2b044?s=128&d=identicon&r=PG&f=1", "display_name": "Piglet", "link": "https://stackoverflow.com/users/2858170/piglet"}, "edited": false, "score": 0, "creation_date": 1501691626, "post_id": 45460036, "comment_id": 77893491, "body": "removing the input image from your post was net the best idea. to your problem: your images are very bad for what you want to know. crap in = crap out. 95% of image processing is proper lightig... also there are a lot more things to consider but missing any proper problem description I cannot give you any tips"}], "owner": {"reputation": 1338, "user_id": 1919727, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/mGdLg.jpg?s=128&g=1", "display_name": "Ashvin777", "link": "https://stackoverflow.com/users/1919727/ashvin777"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 480, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1501681614, "creation_date": 1501674433, "last_edit_date": 1501681614, "question_id": 45460036, "link": "https://stackoverflow.com/questions/45460036/is-it-possible-to-detect-holes-inside-this-picture-using-opencv", "title": "Is it possible to detect holes inside this picture using Opencv", "body": "<p>This is the source image of one of my image processing project using OpenCV. I am trying to detect the holes in the image but somehow not able to do it. I tried Hough Circle algorithm but still the holes are not properly detected. It may work for this picture but may not for other picture.</p>\n\n<pre><code>/// Convert it to gray\n        cvtColor( src, src_gray, CV_BGR2GRAY );\n        /// Reduce the noise so we avoid false circle detection\n        GaussianBlur( src_gray, src_gray, Size(9, 9), 2, 2 );\n        vector&lt;Vec3f&gt; circles;\n\n        /// Apply the Hough Transform to find the circles\n        HoughCircles( src_gray, circles, CV_HOUGH_GRADIENT, 1, src_gray.rows/10, 20, 10, 0, 100 );\n\n\n\n        /// Draw the circles detected\n        for( size_t i = 0; i &lt; circles.size(); i++ )\n        {\n            Point center(cvRound(circles[i][0]), cvRound(circles[i][1]));\n            int radius = cvRound(circles[i][2]);\n            putText(src, to_string(i), center, 1, 1, Scalar(0,255,0));\n            circle( src, center, radius, Scalar(0,0,255), 3, 8, 0 );\n        }\n</code></pre>\n\n<p>New image with adjusted lighting. It is canny image. I want to detects the half moon shapes (actual circles).\n<a href=\"https://i.stack.imgur.com/25Cg2.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/25Cg2.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["c++", "observer-pattern"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1501674296, "post_id": 45459928, "comment_id": 77879878, "body": "Have you <i>tried</i> using a simple <code>if</code> check? Have you profiled or otherwise measured it? The impact should be very little if the condition is false."}, {"owner": {"reputation": 822, "user_id": 1570911, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/2ebf2af9aa9347e30775d77eabbcc6c7?s=128&d=identicon&r=PG", "display_name": "Technaton", "link": "https://stackoverflow.com/users/1570911/technaton"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1501674760, "post_id": 45459928, "comment_id": 77880206, "body": "I see that I formulated the question in a way that made it easy to misunderstand; sorry for that. The <code>if (verbose)</code> part is not the problem, even if I employ an observer pattern (<code>if (hasObservers())</code>), because it can still be reduced to a integer comparison. I worry about the actual emission of information if this check resolves to <code>true</code>: How can I emit an information object, e.g. a simple <code>struct</code> with data fields, without impairing the execution of the actual algorithm?"}, {"owner": {"reputation": 430, "user_id": 1725233, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581d84feea8626ba8f91143f7107d150?s=128&d=identicon&r=PG", "display_name": "\u0141ukasz Daniluk", "link": "https://stackoverflow.com/users/1725233/%c5%81ukasz-daniluk"}, "edited": false, "score": 0, "creation_date": 1501675197, "post_id": 45459928, "comment_id": 77880522, "body": "You could allow the user to pass the callback that will be called by your functions as needed (as, for example, clCreateContext does in OpenCL API). If user passes no callback, the if is likely to be ignored. If he does pass it, well, it is up to user to deal with information as he pleases (fast - just break out, panic, store to some tmp variable etc; or slow - log to file, to stdout etc)."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1501675598, "post_id": 45459928, "comment_id": 77880830, "body": "The problem here is not really sending the information to the observer, that will be quick enough. The problem as I see it is that unless it&#39;s done asynchronously then the observer itself could impact the runtime performance in ways that you can not predict. For example, if the observer decides to send the data to a tape-drive and not return control to your algorithm before the tape-write is finished, then it will impact your &quot;performance&quot; is a very big way."}], "answers": [{"comments": [{"owner": {"reputation": 822, "user_id": 1570911, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/2ebf2af9aa9347e30775d77eabbcc6c7?s=128&d=identicon&r=PG", "display_name": "Technaton", "link": "https://stackoverflow.com/users/1570911/technaton"}, "edited": false, "score": 0, "creation_date": 1501827986, "post_id": 45460467, "comment_id": 77959945, "body": "Great, exactly the flexibility I need!"}], "tags": [], "owner": {"reputation": 7393, "user_id": 1690777, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/18ef5bab4c70735313d86c7240e4abed?s=128&d=identicon&r=PG", "display_name": "Sergey", "link": "https://stackoverflow.com/users/1690777/sergey"}, "is_accepted": true, "score": 2, "last_activity_date": 1501675682, "creation_date": 1501675682, "answer_id": 45460467, "question_id": 45459928, "link": "https://stackoverflow.com/questions/45459928/emit-information-from-a-library-without-run-time-cost-if-none-is-wanted/45460467#45460467", "title": "Emit information from a library without run-time cost if none is wanted", "body": "<p>Just move all costs to compile time!</p>\n\n<p>The easiest approach is:</p>\n\n<pre><code>template&lt;bool logging&gt;\nbool fit(vector_t const&amp; data, double targetError)\n{\n    // ... computations ...\n    if (logging) {\n        std::cout &lt;&lt; \"This is log entry\\n\";\n    }\n    // ... computations ...\n}\n</code></pre>\n\n<p>Usage:</p>\n\n<pre><code>fit&lt;true&gt;(data, epsilon); // Will print logs.\nfit&lt;false&gt;(data, epsilon); // Will not print logs with zero overhead.\n</code></pre>\n\n<p>Nowadays almost any compiler will optimize all such checks out while compiling.</p>\n\n<p>A more flexible approach is to pass a logger as a template parameter:</p>\n\n<pre><code>class ConsoleLogger\n{\npublic:\n    template&lt;typename... Args&gt;\n    static void log(Args... args) {\n        // Print args using compile-time recursion.\n        // Anyway, this prototype is only an example.\n        // Your may define any logging interface you wish.\n    }\n};\n\nclass FileLogger\n{\n    // Some implementation of log() ...\n};\n\nclass RemoteCloudLogger\n{\n    // Some implementation of log() ...\n};\n\nclass NullLogger\n{\n    template&lt;typename... Args&gt;\n    static void log(Args... args) {\n        // Intentionally left blank. Any calls will be optimized out.\n    }\n};\n\ntemplate&lt;typename Logger&gt;\nbool fit(vector_t const&amp; data, double targetError)\n{\n    // ... computations ...\n    Logger::log(\"Current error: \", currentError);\n    Logger::log(\"Iterations passed: \", i);\n    // ... computations ...\n}\n</code></pre>\n\n<p>Usage:</p>\n\n<pre><code>fit&lt;ConsoleLogger&gt;(data, epsilon); // Will log to console.\nfit&lt;RemoteCloudLogger&gt;(data, epsilon); // Will log to a file on remote cloud server.\nfit&lt;NullLogger&gt;(data, epsilon); // Any calls to Logger::log will be optimized out, yielding zero overhead.\n</code></pre>\n\n<p>Obviously, you can write a logger class which will collect all logged information to a structure with introspection data.</p>\n\n<p>For example, you might define <code>fit</code>'s interface as follows:</p>\n\n<pre><code>template&lt;typename Logger&gt;\nbool fit(vector_t const&amp; data, double targetError, IntrospectionData&amp; data)\n{...}\n</code></pre>\n\n<p>and define only two logging classes: <code>IntrospectionDataLogger</code> and <code>NullLogger</code>, whose <code>log</code> methods accept a reference to <code>IntrospectionData</code> structure. And again, the last class contains empty methods that will be thrown away by your compiler.</p>\n"}, {"tags": [], "owner": {"reputation": 3193, "user_id": 6608866, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/395a0bd6f09706e701866702448c5924?s=128&d=identicon&r=PG&f=1", "display_name": "PaulR", "link": "https://stackoverflow.com/users/6608866/paulr"}, "is_accepted": false, "score": 0, "last_activity_date": 1501677543, "creation_date": 1501677543, "answer_id": 45461149, "question_id": 45459928, "link": "https://stackoverflow.com/questions/45459928/emit-information-from-a-library-without-run-time-cost-if-none-is-wanted/45461149#45461149", "title": "Emit information from a library without run-time cost if none is wanted", "body": "<p>You could allocate the struct on the stack and pass a reference to the observer. The observer can then do whatever is necessary with the struct, e.g. copy it, print it, display it in a GUI etc. Alternatively, if you want to track only one or two properties you might want to just pass them as separate arguments.</p>\n\n<pre><code>class Observer\n{\n...\npublic:\n     virtual void observe(MyInfoStruct *info) = 0;\n}\n\n...\nif(hasObservers()) // ideally inline\n{\n    MyInfoStruct info = {currentError, bla, bla};\n    for(observer : observers)\n    {\n        observer-&gt;observe(&amp;info);\n    }\n}\n</code></pre>\n\n<p>That way there should be no overhead when there are no observers except for the <code>if</code> statement. The overhead for emitting the information should be dominated by the virtual calls to the observers.</p>\n\n<p>Further optimizations:\nYou may want to outline the presumably cold observer iteration code into a separate function to improve code locality for the hot path.</p>\n\n<p>If there are any frequent virtual calls in your code anyway, consider adding an \"Observed\" version of the interface and try to perform the observation work there, and completely omit it from the original version. If the observed version can easily be injected once upon placement of the observer, you may be able to omit checking for observers redundantly. If you just want to track arguments to a function this is easy, by making the \"Observed\" version just forward to the original, however if you want to track information while an algorith is running this may not be practical.</p>\n\n<p>Depending on what you want to track, it may be possible to write this as a template:</p>\n\n<pre><code>struct NoObserverDispatch {\n     bool hasObservers() {return false;}\n     void observe(MyInfoStruct *) {}\n};\n\nstruct GenericObserverDispatch {\n     bool hasObservers() {return !observers.isEmpty();}\n     void observe(MyInfoStruct *) { for (obs : observers) obs-&gt;observe(info); }\n     private:\n     vector&lt;unique_ptr&lt;Observer&gt; &gt; observers;\n};\n\ntemplate&lt;typename ObserverDispatch&gt;\nclass Fitter\n{\n     ObserverDispatch obs;\n     virtual bool fit(vector_t const&amp; data, double targetError)\n     {\n         ...\n         if(obs.hasObservers()) { // will be optimized away unless needed\n             MyInfoStruct info = {currentError, bla, bla};\n             obs.observe(&amp;info);\n         }\n     }\n};\n</code></pre>\n\n<p>Obviously this assumes that you can replace the <code>Fitter</code> whenever an observer is placed. Another option would be to let the user pick the template instantiation, but that may be less clean and has the drawback that you will have to ship the code.</p>\n"}], "owner": {"reputation": 822, "user_id": 1570911, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/2ebf2af9aa9347e30775d77eabbcc6c7?s=128&d=identicon&r=PG", "display_name": "Technaton", "link": "https://stackoverflow.com/users/1570911/technaton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35, "favorite_count": 0, "accepted_answer_id": 45460467, "answer_count": 2, "score": 3, "last_activity_date": 1501677543, "creation_date": 1501674135, "last_edit_date": 1501674650, "question_id": 45459928, "link": "https://stackoverflow.com/questions/45459928/emit-information-from-a-library-without-run-time-cost-if-none-is-wanted", "title": "Emit information from a library without run-time cost if none is wanted", "body": "<p>I am author of a library with a number of optimization algorithms, in which I already invested quite a bit of profiling/tuning. I am currently writing front-end programs for this library.</p>\n\n<p>At the moment, the library routines themselves are pretty much black boxes. Consider a method along the lines of <code>bool fit(vector_t const&amp; data, double targetError)</code>. They work and do what I want them to do, but for the frontends, a bit of runtime information would be nice. For example, it would be nice if information like \"current error\" or \"number of iterations left\" <em>could</em> be displayed. I do not want a simple <code>if (verbose) cerr &lt;&lt; \"Info\\n\";</code> pattern, since the library should be equally usable in a GUI environment.</p>\n\n<p>I deliberately write <em>could</em>, because I want to keep the impact of this information emission as low as possible. How can I define and implement an interface, that</p>\n\n<ul>\n<li>Emits an object with run-time information whenever an observer is registered</li>\n<li>has minimal run-time costs <em>with regards to the algorithm</em> if an information object is emitted, and</li>\n<li>has close to no run-time costs if no observer is registered?</li>\n</ul>\n\n<p>Basically, the run-time costs of this optional introspection should be as low as possible, and close to zero if no introspection is wanted. How can this be achieved? Do libraries exist for this? (I guess the answer is yes, and probably hidden in the Boost project, but without known what to look for\u2026)</p>\n"}, {"tags": ["c++", "arrays", "initialization"], "comments": [{"owner": {"reputation": 40655, "user_id": 1023390, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/2g9CZ.jpg?s=128&g=1", "display_name": "Walter", "link": "https://stackoverflow.com/users/1023390/walter"}, "edited": false, "score": 0, "creation_date": 1501674157, "post_id": 45459718, "comment_id": 77879791, "body": "Isn&#39;t this an <a href=\"https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem\">XY problem</a>? Why would you want to have that <code>arr</code>? Shouldn&#39;t it be <code>const</code> if you want to initialize it at compile time?"}], "answers": [{"comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 4, "creation_date": 1501674020, "post_id": 45459807, "comment_id": 77879694, "body": "The problem with this is that the string <code>&quot;\\x04asdc&quot;</code> is <i>six</i> characters long. Specifying a to small array size is incorrect."}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1501676035, "post_id": 45459807, "comment_id": 77881172, "body": "@Someprogrammerdude please disregard my previous comments, I accidentally ended up on a C page. The nul-terminator is indeed explicitly mandated in C++."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2672107"}, "is_accepted": true, "score": 1, "last_activity_date": 1501675772, "last_edit_date": 1501675772, "creation_date": 1501673802, "answer_id": 45459807, "question_id": 45459718, "link": "https://stackoverflow.com/questions/45459718/is-there-a-way-to-initialize-arrays-with-mixed-chars-and-strings/45459807#45459807", "title": "Is there a way to initialize arrays with mixed chars and &quot;strings&quot;", "body": "<p>You could integrate the char int the string with escape sequences:</p>\n\n<pre><code>char arr[6] = { \"\\x04asdc\"};\n</code></pre>\n\n<p>edit: corrected the wrog length of the array. </p>\n"}, {"tags": [], "owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 1, "last_activity_date": 1501673831, "creation_date": 1501673831, "answer_id": 45459820, "question_id": 45459718, "link": "https://stackoverflow.com/questions/45459718/is-there-a-way-to-initialize-arrays-with-mixed-chars-and-strings/45459820#45459820", "title": "Is there a way to initialize arrays with mixed chars and &quot;strings&quot;", "body": "<p>No that's not possible. But you <em>could</em> do </p>\n\n<pre><code>char arr[] = \"\\04asdc\";\n</code></pre>\n\n<p>The problem with this is that is would not be <em>exactly</em> like the original array you show, since it would include the string terminator and therefore have six elements.</p>\n"}], "owner": {"reputation": 11, "user_id": 6410349, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95f0a22807314b44ccf36e0ae2dea3e3?s=128&d=identicon&r=PG", "display_name": "TuKeZ", "link": "https://stackoverflow.com/users/6410349/tukez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "accepted_answer_id": 45459807, "answer_count": 2, "score": 0, "last_activity_date": 1501675772, "creation_date": 1501673551, "last_edit_date": 1501673969, "question_id": 45459718, "link": "https://stackoverflow.com/questions/45459718/is-there-a-way-to-initialize-arrays-with-mixed-chars-and-strings", "title": "Is there a way to initialize arrays with mixed chars and &quot;strings&quot;", "body": "<p>I would want to initialize char array during compilation time with least amount of manual work.</p>\n\n<p>Is there a working shorthand format for this</p>\n\n<pre><code>char arr[5] = {0x4, 'a', 's', 'd' 'c'};\n</code></pre>\n\n<p>such as</p>\n\n<pre><code>char arr[5] = {0x4, \"asdc\"};\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1501673544, "post_id": 45459662, "comment_id": 77879372, "body": "Do you have a <code>Game Game::game_;</code> definition in some translation unit? I hope you know that static class objects still need to be defined."}], "answers": [{"comments": [{"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1501673566, "post_id": 45459709, "comment_id": 77879385, "body": "Wrong, and irrelevant. Also a comment at best."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1501673981, "post_id": 45459709, "comment_id": 77879666, "body": "Now your edit is even wronger. This is an implementation of the singleton pattern. Everything you suggest will not solve the linkage error. It will either break the pattern or introduce compiler errors. If you aren&#39;t sure, don&#39;t answer."}, {"owner": {"reputation": 26, "user_id": 8404771, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44b63501afefe61d978976cf9b9c0e72?s=128&d=identicon&r=PG&f=1", "display_name": "HRN", "link": "https://stackoverflow.com/users/8404771/hrn"}, "reply_to_user": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1501674532, "post_id": 45459709, "comment_id": 77880036, "body": "He has commited two fatal syntax errors which should be resolved first then continue to the code itself. I know for a fact that if constructor is made private compiler gets confused and thus a handful of irrelevant errors (such as linkage errors) are reported so I told him to fix these two syntax errors and then get on with the rest of his code. So I suggest wait for him/her to fix the code and see if any problems remain. Anyhow I don&#39;t say his was of defining game_ is quite correct."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 2, "creation_date": 1501674703, "post_id": 45459709, "comment_id": 77880165, "body": "They made no syntax errors, they omitted <b>one</b> definition that causes an ODR-violation. Whatever it is you think you know about the compiler getting confused is guesswork, <a href=\"http://ideone.com/AhZG67\" rel=\"nofollow noreferrer\">since the code can be easily fixed</a>. But because you posted your wild speculations, the OP is likely to waste time making changes that will do anything besides help them."}], "tags": [], "owner": {"reputation": 26, "user_id": 8404771, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44b63501afefe61d978976cf9b9c0e72?s=128&d=identicon&r=PG&f=1", "display_name": "HRN", "link": "https://stackoverflow.com/users/8404771/hrn"}, "is_accepted": false, "score": -3, "last_activity_date": 1501674051, "last_edit_date": 1501674051, "creation_date": 1501673534, "answer_id": 45459709, "question_id": 45459662, "link": "https://stackoverflow.com/questions/45459662/error-lnk2001-unresolved-external-symbol-private-static-class-game-gamegame/45459709#45459709", "title": "error LNK2001: unresolved external symbol &quot;private: static class Game Game::game_&quot;", "body": "<p>Why did you put class constructor inside private section? This could be the cause of your problem. Move Game() to public segment and see what happens.\nAlso I think the way you are trying to define and return a static value is wrong all together</p>\n"}], "owner": {"reputation": 1, "user_id": 4940222, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92f30c2a6426f5d1acf74160f5f9e926?s=128&d=identicon&r=PG&f=1", "display_name": "kokos___", "link": "https://stackoverflow.com/users/4940222/kokos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 62, "favorite_count": 0, "closed_date": 1501674033, "answer_count": 1, "score": -1, "last_activity_date": 1501676098, "creation_date": 1501673438, "last_edit_date": 1501676098, "question_id": 45459662, "link": "https://stackoverflow.com/questions/45459662/error-lnk2001-unresolved-external-symbol-private-static-class-game-gamegame", "closed_reason": "Duplicate", "title": "error LNK2001: unresolved external symbol &quot;private: static class Game Game::game_&quot;", "body": "<pre><code>class Game\n{\npublic:\n    static Game&amp; GetInstance() \n    {\n        return game_;\n    }\nprivate :\n    static Game game_;\n    Game();\n};\n</code></pre>\n\n<p>\u0412\u044b\u0434\u0430\u0435\u0442 \u043e\u0448\u0438\u0431\u043a\u0443 error LNK2001: unresolved external symbol \"private: static class Game Game::game_\" (?game_@Game@@0V1@A)\n\u041d\u0435 \u043f\u043e\u043d\u0438\u043c\u0430\u044e \u0447\u0442\u043e \u043d\u0435 \u043d\u0440\u0430\u0432\u0438\u0442\u0441\u044f \u043a\u043e\u043c\u043f\u0438\u043b\u044f\u0442\u043e\u0440\u0443\n\u0421\u043f\u0430\u0441\u0438\u0431\u043e</p>\n"}, {"tags": ["c++", "arrays", "multidimensional-array", "memory-management", "dynamic-memory-allocation"], "comments": [{"owner": {"reputation": 2375, "user_id": 2757079, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/C6Hsu.jpg?s=128&g=1", "display_name": "Muhammad Ahmad", "link": "https://stackoverflow.com/users/2757079/muhammad-ahmad"}, "edited": false, "score": 0, "creation_date": 1501673516, "post_id": 45459649, "comment_id": 77879345, "body": "Why do you use <code>malloc</code> in c++?"}, {"owner": {"reputation": 115, "user_id": 6111602, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/007d47e4c0d52b034bcc623973767d17?s=128&d=identicon&r=PG&f=1", "display_name": "Sanju", "link": "https://stackoverflow.com/users/6111602/sanju"}, "reply_to_user": {"reputation": 2375, "user_id": 2757079, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/C6Hsu.jpg?s=128&g=1", "display_name": "Muhammad Ahmad", "link": "https://stackoverflow.com/users/2757079/muhammad-ahmad"}, "edited": false, "score": 0, "creation_date": 1501673639, "post_id": 45459649, "comment_id": 77879440, "body": "because the data is large. @Muhammad"}, {"owner": {"reputation": 141, "user_id": 3439675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d959f6b70882ff4ba584b9490d4749c?s=128&d=identicon&r=PG", "display_name": "olgierdh", "link": "https://stackoverflow.com/users/3439675/olgierdh"}, "edited": false, "score": 0, "creation_date": 1501673754, "post_id": 45459649, "comment_id": 77879521, "body": "data = (double <i>)malloc((fullsize</i>fullsize)*sizeof(double *)); You should use sizeof( double ) here."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 1, "creation_date": 1501673829, "post_id": 45459649, "comment_id": 77879573, "body": "Large data doesn&#39;t mean <code>malloc</code>. Use <code>std::vector&lt;std::vector&lt;double&gt;&gt;</code> by default to get your code correct first. If you come from programming C, put everything you know on hold and pick up a <a href=\"https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list\">good C++ book</a> instead."}, {"owner": {"reputation": 4462, "user_id": 147763, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5523105def6892e8d9427fb5c13af04e?s=128&d=identicon&r=PG", "display_name": "Paolo Brandoli", "link": "https://stackoverflow.com/users/147763/paolo-brandoli"}, "reply_to_user": {"reputation": 141, "user_id": 3439675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d959f6b70882ff4ba584b9490d4749c?s=128&d=identicon&r=PG", "display_name": "olgierdh", "link": "https://stackoverflow.com/users/3439675/olgierdh"}, "edited": false, "score": 0, "creation_date": 1501675301, "post_id": 45459649, "comment_id": 77880596, "body": "see the comment from @olgierdh. Also, is any of the malloc returning 0 (failing)? Anyway I would not use malloc to allocate memory in C++"}], "answers": [{"comments": [{"owner": {"reputation": 115, "user_id": 6111602, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/007d47e4c0d52b034bcc623973767d17?s=128&d=identicon&r=PG&f=1", "display_name": "Sanju", "link": "https://stackoverflow.com/users/6111602/sanju"}, "edited": false, "score": 0, "creation_date": 1501673996, "post_id": 45459804, "comment_id": 77879679, "body": "I tried <code>sizeof(double)</code> its still giving the same error, I need arrays for conversion into Eigen matrix;"}, {"owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "reply_to_user": {"reputation": 115, "user_id": 6111602, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/007d47e4c0d52b034bcc623973767d17?s=128&d=identicon&r=PG&f=1", "display_name": "Sanju", "link": "https://stackoverflow.com/users/6111602/sanju"}, "edited": false, "score": 0, "creation_date": 1501675573, "post_id": 45459804, "comment_id": 77880805, "body": "@Sanju Did you try <code>new</code>? Also, <code>2</code> in <code>malloc((2 * fullsize)*sizeof(double))</code> looks suspicious. Is your matrix not square?"}, {"owner": {"reputation": 4462, "user_id": 147763, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5523105def6892e8d9427fb5c13af04e?s=128&d=identicon&r=PG", "display_name": "Paolo Brandoli", "link": "https://stackoverflow.com/users/147763/paolo-brandoli"}, "edited": false, "score": 1, "creation_date": 1501675604, "post_id": 45459804, "comment_id": 77880840, "body": "Is any of the malloc failing (returning 0)?"}, {"owner": {"reputation": 141, "user_id": 3439675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d959f6b70882ff4ba584b9490d4749c?s=128&d=identicon&r=PG", "display_name": "olgierdh", "link": "https://stackoverflow.com/users/3439675/olgierdh"}, "edited": false, "score": 0, "creation_date": 1501687450, "post_id": 45459804, "comment_id": 77890634, "body": "It seems that your malloc returns nullptr somewhere. Also @dasblinkenlight is right you don&#39;t need the 2*fullsize. Try compiling your application using clang with:      <code>-fsanitize=address -fno-omit-frame-pointer -O1 -g</code>    Plus you can do this trick if you want to:   <code>double* data = ( double* ) malloc( fullsize * fullsize * sizeof( double ) );    double** A = static_cast&lt; double** &gt;( &amp;data );</code>  This way you will have both views onto one continuous memory block."}], "tags": [], "owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "is_accepted": false, "score": 1, "last_activity_date": 1501673788, "creation_date": 1501673788, "answer_id": 45459804, "question_id": 45459649, "link": "https://stackoverflow.com/questions/45459649/memory-allocation-for-converting-a-large-2d-array-to-a-1d-array-in-c/45459804#45459804", "title": "Memory allocation for converting a large 2d array to a 1d array in c++", "body": "<p>You are allocating <code>data</code> using size of <code>double</code> pointer:</p>\n\n<pre><code>data = (double *)malloc((fullsize*fullsize)*sizeof(double *));\n//                                                        ^\n</code></pre>\n\n<p>It should be allocated using <code>sizeof(double)</code> instead.</p>\n\n<p>You can avoid using <code>malloc</code> in C++ by using <code>vector</code>s. If you want exact sizes on allocations, use <code>new double[...]</code> instead. In either case you will end up with more readable code:</p>\n\n<pre><code>double **A = new double*[fullsize];\nfor (int i = 0 ; i != fullsize ; i++) {\n    A[i] = new double[fullsize];\n}\ndouble *data = new double[fullsize*fullsize];\n</code></pre>\n"}], "owner": {"reputation": 115, "user_id": 6111602, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/007d47e4c0d52b034bcc623973767d17?s=128&d=identicon&r=PG&f=1", "display_name": "Sanju", "link": "https://stackoverflow.com/users/6111602/sanju"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 369, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1501674292, "creation_date": 1501673410, "question_id": 45459649, "link": "https://stackoverflow.com/questions/45459649/memory-allocation-for-converting-a-large-2d-array-to-a-1d-array-in-c", "title": "Memory allocation for converting a large 2d array to a 1d array in c++", "body": "<p>A is a 2d array and data is 1d array</p>\n\n<pre><code>double **A, *data;\n</code></pre>\n\n<p>fullsize is 9222,\nmemory allocation:</p>\n\n<pre><code>A = (double **)malloc((fullsize)*sizeof(double *));         //allocate memory dynamically for matrix A\nfor (i = 0; i &lt; fullsize; i++)\n    A[i] = (double *)malloc((2 * fullsize)*sizeof(double));\n\ndata = (double *)malloc((fullsize*fullsize)*sizeof(double *));\n</code></pre>\n\n<p>conversion logic:</p>\n\n<pre><code>{\n    for (int n = 0; n&lt;fullsize; n++)\n    for (int m = 0; m&lt;fullsize; m++)\n    {\n        data[n*fullsize + m] = A[n][m];\n    }\n}\n</code></pre>\n\n<p>error log: </p>\n\n<pre><code>The thread 0xad80 has exited with code 0 (0x0).\nUnhandled exception at 0x00F5E6E9 in ConsoleApplication1.exe: 0xC0000005: Access violation writing location 0x69E65000.\n\nThe program '[50964] ConsoleApplication1.exe' has exited with code 0 (0x0).\n</code></pre>\n"}, {"tags": ["c++", "class"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2672107"}, "edited": false, "score": 1, "creation_date": 1501673595, "post_id": 45459638, "comment_id": 77879413, "body": "Classes do not exist at runtime. Objects do exists. Objects can have access to other objects if ypu give them a reference to that other object."}, {"owner": {"reputation": 251, "user_id": 7990220, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/251182d66a8f8f13247560186b2d4219?s=128&d=identicon&r=PG&f=1", "display_name": "Nathaniel G.M.", "link": "https://stackoverflow.com/users/7990220/nathaniel-g-m"}, "edited": false, "score": 0, "creation_date": 1501673989, "post_id": 45459638, "comment_id": 77879670, "body": "How do I pass a reference of objWorld.objPlayer to objInterface.objInventory?"}, {"owner": {"reputation": 42863, "user_id": 577603, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/70c19b44cc2eb6f1a87a08fc892c502b?s=128&d=identicon&r=PG", "display_name": "ComicSansMS", "link": "https://stackoverflow.com/users/577603/comicsansms"}, "edited": false, "score": 0, "creation_date": 1501677847, "post_id": 45459638, "comment_id": 77882666, "body": "Your edit completely changes the focus of the question. Please open a new question for this one. (Hint: It doesn&#39;t compile because <code>Inventory</code> is not default-constructible, and actually cannot be, as long as it has a reference member)."}], "answers": [{"comments": [{"owner": {"reputation": 251, "user_id": 7990220, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/251182d66a8f8f13247560186b2d4219?s=128&d=identicon&r=PG&f=1", "display_name": "Nathaniel G.M.", "link": "https://stackoverflow.com/users/7990220/nathaniel-g-m"}, "edited": false, "score": 0, "creation_date": 1501673887, "post_id": 45459796, "comment_id": 77879612, "body": "But in my code structure Inventory can&#39;t &quot;see&quot; objWorld.objPlayer"}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "reply_to_user": {"reputation": 251, "user_id": 7990220, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/251182d66a8f8f13247560186b2d4219?s=128&d=identicon&r=PG&f=1", "display_name": "Nathaniel G.M.", "link": "https://stackoverflow.com/users/7990220/nathaniel-g-m"}, "edited": false, "score": 0, "creation_date": 1501673990, "post_id": 45459796, "comment_id": 77879672, "body": "@NathanielG.M. Do you mean within a member function of <code>Inventory</code>? It would perhaps make sense then to pass a reference to the player as an argument to that member function."}, {"owner": {"reputation": 251, "user_id": 7990220, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/251182d66a8f8f13247560186b2d4219?s=128&d=identicon&r=PG&f=1", "display_name": "Nathaniel G.M.", "link": "https://stackoverflow.com/users/7990220/nathaniel-g-m"}, "edited": false, "score": 0, "creation_date": 1501674141, "post_id": 45459796, "comment_id": 77879780, "body": "Is there a way to directly modify the vector from inside Inventory instead?"}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "reply_to_user": {"reputation": 251, "user_id": 7990220, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/251182d66a8f8f13247560186b2d4219?s=128&d=identicon&r=PG&f=1", "display_name": "Nathaniel G.M.", "link": "https://stackoverflow.com/users/7990220/nathaniel-g-m"}, "edited": false, "score": 0, "creation_date": 1501674187, "post_id": 45459796, "comment_id": 77879816, "body": "@NathanielG.M. instead of what?"}, {"owner": {"reputation": 251, "user_id": 7990220, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/251182d66a8f8f13247560186b2d4219?s=128&d=identicon&r=PG&f=1", "display_name": "Nathaniel G.M.", "link": "https://stackoverflow.com/users/7990220/nathaniel-g-m"}, "edited": false, "score": 0, "creation_date": 1501674328, "post_id": 45459796, "comment_id": 77879909, "body": "(I assume) instead of &quot;carrying&quot; the vector (passing by reference) for every change I make it to it using the main function as a medium... if that makes sense"}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "reply_to_user": {"reputation": 251, "user_id": 7990220, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/251182d66a8f8f13247560186b2d4219?s=128&d=identicon&r=PG&f=1", "display_name": "Nathaniel G.M.", "link": "https://stackoverflow.com/users/7990220/nathaniel-g-m"}, "edited": false, "score": 0, "creation_date": 1501674777, "post_id": 45459796, "comment_id": 77880211, "body": "@NathanielG.M. you really have just two choices. Either the vector (or the player that owns it, or the world that owns the player) has static storage duration, or you pass (references to) them around. You can make the reference a member variable of <code>Inventory</code> if you would like to not pass it on every member function call, but only to the constructor."}], "tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": false, "score": 0, "last_activity_date": 1501674050, "last_edit_date": 1501674050, "creation_date": 1501673765, "answer_id": 45459796, "question_id": 45459638, "link": "https://stackoverflow.com/questions/45459638/how-to-access-out-of-scope-class/45459796#45459796", "title": "How to access out-of-scope class?", "body": "<p>Class members can be accessed using the member access operator <code>.</code> (period character). The left hand side is (an expression that yields) an instance of the class, and the right hand side is the name of the member.</p>\n\n<p>Let <code>p</code> be an instance of <code>Player</code>. The expression <code>p.Items</code> will yield the vector of that instance. The class has to be defined, before its members can be accessed.</p>\n"}, {"comments": [{"owner": {"reputation": 251, "user_id": 7990220, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/251182d66a8f8f13247560186b2d4219?s=128&d=identicon&r=PG&f=1", "display_name": "Nathaniel G.M.", "link": "https://stackoverflow.com/users/7990220/nathaniel-g-m"}, "edited": false, "score": 0, "creation_date": 1501675260, "post_id": 45460134, "comment_id": 77880560, "body": "Player &quot;owning&quot; the inventory is indeed what I&#39;ll have to do if I can&#39;t figure out any other way to do this. Unfortunately the way my draw calls in my game are set up right now, Player drawing its own inventory would mess things up, especially when it comes to shaders that are applied to everything drawn by the World class. Could you please give me some more clarification on the &quot;somehow&quot; part?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user3458"}, "reply_to_user": {"reputation": 251, "user_id": 7990220, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/251182d66a8f8f13247560186b2d4219?s=128&d=identicon&r=PG&f=1", "display_name": "Nathaniel G.M.", "link": "https://stackoverflow.com/users/7990220/nathaniel-g-m"}, "edited": false, "score": 0, "creation_date": 1501675730, "post_id": 45460134, "comment_id": 77880940, "body": "@NathanielG.M. Player does not have to draw own inventory - it just has to own it. The drawing can be completely separate."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user3458"}, "is_accepted": false, "score": 2, "last_activity_date": 1501675665, "last_edit_date": 1501675665, "creation_date": 1501674719, "answer_id": 45460134, "question_id": 45459638, "link": "https://stackoverflow.com/questions/45459638/how-to-access-out-of-scope-class/45460134#45460134", "title": "How to access out-of-scope class?", "body": "<p>This is not a C++ question, this is Object Oriented Programming question.</p>\n\n<p>There are many ways to do this. But all of them involve more than one object working together. Either the <code>Player</code> has to have a reference (pointer) to <code>Inventory</code>, or the <code>Inventory</code> has to have a reference to player - somehow. </p>\n\n<p>Here are some options:</p>\n\n<p>You can pass a pointer in constructor (this is just a quick example, please use shared pointers)</p>\n\n<pre><code>class Inventory\n{\nprivate:\n   Player *owner;\npublic:\n   Inventory(Player *owner) : owner(owner){}\n};\n</code></pre>\n\n<p>Pass it as method argument</p>\n\n<pre><code>class Inventory\n{\npublic:\n   void drawFor(Player *owner);\n};\n</code></pre>\n\n<p>Set a field value.</p>\n\n<pre><code>class Inventory\n{\nprivate:\n   Player *owner;\npublic:\n   void setOwner(Player *owner) {this-&gt;owner = owner;}\n};\n</code></pre>\n\n<p>As a side note, are you sure that <code>Player</code> has vector of items? I would venture that <code>Player</code> may OWN an <code>Inventory</code>. <code>Inventory</code> is more than just a vector of items. It has (potentially complex) limitations on number of items, it can maintain weight of items that affects player's movement, it can be expanded by adding containers. All of it can be useful to <code>Player</code> or <code>NPC</code>. You just have to come up with a good interface for <code>Inventory</code></p>\n"}, {"comments": [{"owner": {"reputation": 251, "user_id": 7990220, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/251182d66a8f8f13247560186b2d4219?s=128&d=identicon&r=PG&f=1", "display_name": "Nathaniel G.M.", "link": "https://stackoverflow.com/users/7990220/nathaniel-g-m"}, "edited": false, "score": 0, "creation_date": 1501676210, "post_id": 45460291, "comment_id": 77881328, "body": "If I do this, how should objInventory be created inside Interface? Currently not compiling."}], "tags": [], "owner": {"reputation": 40655, "user_id": 1023390, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/2g9CZ.jpg?s=128&g=1", "display_name": "Walter", "link": "https://stackoverflow.com/users/1023390/walter"}, "is_accepted": true, "score": 1, "last_activity_date": 1501684662, "last_edit_date": 1501684662, "creation_date": 1501675186, "answer_id": 45460291, "question_id": 45459638, "link": "https://stackoverflow.com/questions/45459638/how-to-access-out-of-scope-class/45460291#45460291", "title": "How to access out-of-scope class?", "body": "<p>There are several issues which you have to consider.</p>\n\n<ol>\n<li>access rights. From outside a class (i.e. from any code other than the class's member functions etc) only <code>public</code> members are accessible, except for <code>friend</code>s, which have full access.</li>\n<li>visibility. In order to use a member, you must see its declaration.</li>\n</ol>\n\n<p>Thus, you should</p>\n\n<pre><code>// Inventory.hpp\n#pragma once\n#include \"World.hpp\"  // makes class World visible\nclass Inventory\n{\n    World&amp; objWorld;  // reference to 'my' world object\npublic:\n    Inventory(World&amp; w) : objWorld(w) {}\n    void foo()\n    {\n        std::sort(objWorld.objPlayer.Items.begin(),\n                  objWorld.objPlayer.Items.end());\n    }\n};\n</code></pre>\n\n<p>Of course, you must adapt the rest of your code accordingly:</p>\n\n<pre><code>// Interface.hpp\n\n#pragma once\n#include \"Inventory.hpp\"\n\nclass Interface\n{\n    Inventory objInventory;\npublic:\n    Interface(World&amp; w) : objInventory(w) {}\n};\n</code></pre>\n\n<p>and</p>\n\n<pre><code>// main.cpp\n\n#include \"Interface.hpp\"\n\nint main()\n{\n    World objWorld;\n    Interface objInterface(objWorld);\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 251, "user_id": 7990220, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/251182d66a8f8f13247560186b2d4219?s=128&d=identicon&r=PG&f=1", "display_name": "Nathaniel G.M.", "link": "https://stackoverflow.com/users/7990220/nathaniel-g-m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "accepted_answer_id": 45460291, "answer_count": 3, "score": 0, "last_activity_date": 1501684662, "creation_date": 1501673382, "last_edit_date": 1501677859, "question_id": 45459638, "link": "https://stackoverflow.com/questions/45459638/how-to-access-out-of-scope-class", "title": "How to access out-of-scope class?", "body": "<p>First of all, I would like to apologize if I used incorrect terminology in the question. I do not have any sort of formal training in programming. It was the best I could do to convey the problem.</p>\n\n<p>My question is this:</p>\n\n<p>In the following code structure, how can the Inventory class have complete access to Items vector inside the Player class WITHOUT making the vector static?</p>\n\n<p>-- main.cpp</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n\n#include \"World.hpp\"\n#include \"Interface.hpp\"\n\nint main()\n{\n    World objWorld;\n    Interface objInterface;\n    return 0;\n}\n</code></pre>\n\n<p>-- World.hpp</p>\n\n<pre><code>#pragma once\n#include \"Player.hpp\"\n\nclass World\n{\npublic:\n    Player objPlayer;\n};\n</code></pre>\n\n<p>-- Player.hpp</p>\n\n<pre><code>#pragma once\n\nclass Player\n{\npublic:\n    std::vector&lt;int&gt; Items;\n};\n</code></pre>\n\n<p>-- Interface.hpp</p>\n\n<pre><code>#pragma once\n#include \"Inventory.hpp\"\n\nclass Interface\n{\npublic:\n    Inventory objInventory;\n};\n</code></pre>\n\n<p>-- Inventory.hpp</p>\n\n<pre><code>#pragma once\n\nclass Inventory\n{\npublic:\n    // Needs to have complete access to Items, be able to see and modify the vector\n};\n</code></pre>\n"}, {"tags": ["c++", "visual-studio", "visual-studio-community"], "comments": [{"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 4, "creation_date": 1501673126, "post_id": 45459521, "comment_id": 77879083, "body": "Visual Studio is the problem"}, {"owner": {"reputation": 4311, "user_id": 1669370, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/E2t7h.jpg?s=128&g=1", "display_name": "Regis Portalez", "link": "https://stackoverflow.com/users/1669370/regis-portalez"}, "edited": false, "score": 0, "creation_date": 1501673302, "post_id": 45459521, "comment_id": 77879182, "body": "Try to remove the .vs directory, and all database files from your solution directory. Then reload the solution"}, {"owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 0, "creation_date": 1501673488, "post_id": 45459521, "comment_id": 77879317, "body": "Maybe your project file got corrupted. Try creating a new project."}, {"owner": {"reputation": 5397, "user_id": 2193020, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/aa10d01a3d48851073bd61877a56b5a7?s=128&d=identicon&r=PG", "display_name": "hnefatl", "link": "https://stackoverflow.com/users/2193020/hnefatl"}, "edited": false, "score": 0, "creation_date": 1501678383, "post_id": 45459521, "comment_id": 77883140, "body": "Reboot, edit the .vcxproj file to not include the file causing the issue, then try to reload the project."}], "answers": [{"tags": [], "owner": {"reputation": 41, "user_id": 1353540, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77f8eca6c10a92003a90d5bb73fc43bf?s=128&d=identicon&r=PG", "display_name": "Chris Wallace", "link": "https://stackoverflow.com/users/1353540/chris-wallace"}, "is_accepted": false, "score": 0, "last_activity_date": 1527577965, "last_edit_date": 1527577965, "creation_date": 1527244451, "answer_id": 50527224, "question_id": 45459521, "link": "https://stackoverflow.com/questions/45459521/visual-studio-community-cannot-build-one-of-my-files/50527224#50527224", "title": "Visual Studio Community cannot build one of my files", "body": "<p>One cause of this is that the files are in the .filters file, but not in the .vcxproj file. Removing them from the filters file manually and re-adding them should fix the issue.</p>\n"}], "owner": {"reputation": 41430, "user_id": 607407, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5a061a72feb5b6580dadd5dcbc92d3b5?s=128&d=identicon&r=PG", "display_name": "Tom&#225;\u0161 Zato - Reinstate Monica", "link": "https://stackoverflow.com/users/607407/tom%c3%a1%c5%a1-zato-reinstate-monica"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 190, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1527577965, "creation_date": 1501673067, "last_edit_date": 1501673185, "question_id": 45459521, "link": "https://stackoverflow.com/questions/45459521/visual-studio-community-cannot-build-one-of-my-files", "title": "Visual Studio Community cannot build one of my files", "body": "<p>There's a <code>.cpp</code> file in my project. I can see Unresolved external symbol errors related to this file.</p>\n\n<p>I tried to compile the file individually using the context menu in Solution explorer. This was the result:</p>\n\n<pre><code>1&gt;------ Build started: Project: ProjectName, Configuration: Debug x64 ------\n1&gt;Cannot build selected files.\n========== Build: 0 succeeded, 1 failed, 0 up-to-date, 0 skipped ==========\n</code></pre>\n\n<p>When I click properties in the solution explorer context menu for this file, Visual Studio crashes:</p>\n\n<p><a href=\"https://i.stack.imgur.com/rDXH9.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/rDXH9.png\" alt=\"enter image description here\"></a></p>\n\n<p>I tried to remove the file from the project in order to re-add it, this happened:</p>\n\n<p><a href=\"https://i.stack.imgur.com/neelc.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/neelc.png\" alt=\"enter image description here\"></a> </p>\n\n<p>I checked and the file is not locked by another program. What is the problem?</p>\n"}, {"tags": ["c++", "windows"], "comments": [{"owner": {"reputation": 27952, "user_id": 3747990, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qE6kU.png?s=128&g=1", "display_name": "Niall", "link": "https://stackoverflow.com/users/3747990/niall"}, "edited": false, "score": 1, "creation_date": 1501962327, "post_id": 45459293, "comment_id": 78011682, "body": "You mention you don&#39;t know when it stopped working, maybe go back in OS versions etc. to when it last work or when it starts working again. You can then start trawling through the release notes and changes from the version onwards that may affect your code. You also mention that the functions succeed but the port isn&#39;t closed. How do you know it isn&#39;t removed?"}, {"owner": {"reputation": 1755, "user_id": 5986881, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/7a607dd49a0116e3ba869a66d6fd1ba0?s=128&d=identicon&r=PG", "display_name": "Samer Tufail", "link": "https://stackoverflow.com/users/5986881/samer-tufail"}, "edited": false, "score": 0, "creation_date": 1502183227, "post_id": 45459293, "comment_id": 78086935, "body": "Could you try to use <code>XcvDataPort</code> without the last parameter <code>&amp;xcvresult</code> to see if it gives you the same result?"}, {"owner": {"reputation": 613, "user_id": 5777453, "user_type": "registered", "accept_rate": 85, "profile_image": "https://lh3.googleusercontent.com/-4uw5MGjv0bc/AAAAAAAAAAI/AAAAAAAAErE/1e-03RNGDho/photo.jpg?sz=128", "display_name": "Shameel Mohamed", "link": "https://stackoverflow.com/users/5777453/shameel-mohamed"}, "reply_to_user": {"reputation": 27952, "user_id": 3747990, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qE6kU.png?s=128&g=1", "display_name": "Niall", "link": "https://stackoverflow.com/users/3747990/niall"}, "edited": false, "score": 0, "creation_date": 1502390865, "post_id": 45459293, "comment_id": 78202249, "body": "@niall there are few ways to identify the printer ports. One way is using printmanagement.msi from run, it lists all available printer ports, printers and drivers,"}, {"owner": {"reputation": 613, "user_id": 5777453, "user_type": "registered", "accept_rate": 85, "profile_image": "https://lh3.googleusercontent.com/-4uw5MGjv0bc/AAAAAAAAAAI/AAAAAAAAErE/1e-03RNGDho/photo.jpg?sz=128", "display_name": "Shameel Mohamed", "link": "https://stackoverflow.com/users/5777453/shameel-mohamed"}, "reply_to_user": {"reputation": 1755, "user_id": 5986881, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/7a607dd49a0116e3ba869a66d6fd1ba0?s=128&d=identicon&r=PG", "display_name": "Samer Tufail", "link": "https://stackoverflow.com/users/5986881/samer-tufail"}, "edited": false, "score": 0, "creation_date": 1502392071, "post_id": 45459293, "comment_id": 78202957, "body": "@samer I&#39;ll try it tomorrow and update here. But what could be the difference between the two? Checked both functions MSDN pages but it does not talk about any difference except for the parameters as far as I can understand."}, {"owner": {"reputation": 1812, "user_id": 5945883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17f8de79f057abb63afb9ce7bee0ca51?s=128&d=identicon&r=PG&f=1", "display_name": "R2RT", "link": "https://stackoverflow.com/users/5945883/r2rt"}, "edited": false, "score": 0, "creation_date": 1502443525, "post_id": 45459293, "comment_id": 78222119, "body": "Blind shot: do you run this in elevated mode? An admin account?"}, {"owner": {"reputation": 1755, "user_id": 5986881, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/7a607dd49a0116e3ba869a66d6fd1ba0?s=128&d=identicon&r=PG", "display_name": "Samer Tufail", "link": "https://stackoverflow.com/users/5986881/samer-tufail"}, "reply_to_user": {"reputation": 1812, "user_id": 5945883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17f8de79f057abb63afb9ce7bee0ca51?s=128&d=identicon&r=PG&f=1", "display_name": "R2RT", "link": "https://stackoverflow.com/users/5945883/r2rt"}, "edited": false, "score": 0, "creation_date": 1502463003, "post_id": 45459293, "comment_id": 78235502, "body": "@R2RT that wont work, since XcvData would return ERROR_ACCESS_DENIED, but the call suceeds in this case according to op"}, {"owner": {"reputation": 1755, "user_id": 5986881, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/7a607dd49a0116e3ba869a66d6fd1ba0?s=128&d=identicon&r=PG", "display_name": "Samer Tufail", "link": "https://stackoverflow.com/users/5986881/samer-tufail"}, "edited": false, "score": 0, "creation_date": 1502463488, "post_id": 45459293, "comment_id": 78235853, "body": "@Shameel Mohamed Its just I am suspcious of the internals. Secondly I think the handle is a cached one. In vista there was a problem with <code>OpenPrinter</code>, it cached the printer handles. They introduced another call <code>OpenPrinter2</code>. Can you also try <code>OpenPrinter2</code> function with the <code>PRINTER_OPTION_NO_CACHE</code> flag?."}], "answers": [{"comments": [{"owner": {"reputation": 613, "user_id": 5777453, "user_type": "registered", "accept_rate": 85, "profile_image": "https://lh3.googleusercontent.com/-4uw5MGjv0bc/AAAAAAAAAAI/AAAAAAAAErE/1e-03RNGDho/photo.jpg?sz=128", "display_name": "Shameel Mohamed", "link": "https://stackoverflow.com/users/5777453/shameel-mohamed"}, "edited": false, "score": 0, "creation_date": 1505112509, "post_id": 45667477, "comment_id": 79260867, "body": "As u suggested I tried using XcvDataPort instead of XcvData, but it seems the function is removed from the native library, coz I get unresolved external symbol error. I have included the winsplp.h. I tried adding winsplp.lib, it is not available. Other functions of winsplp.h are also not resolved."}], "tags": [], "owner": {"reputation": 1755, "user_id": 5986881, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/7a607dd49a0116e3ba869a66d6fd1ba0?s=128&d=identicon&r=PG", "display_name": "Samer Tufail", "link": "https://stackoverflow.com/users/5986881/samer-tufail"}, "is_accepted": false, "score": 0, "last_activity_date": 1502684837, "creation_date": 1502684837, "answer_id": 45667477, "question_id": 45459293, "link": "https://stackoverflow.com/questions/45459293/deleting-a-standard-tcp-ip-port-using-xcvdata-not-working/45667477#45667477", "title": "Deleting a Standard TCP IP port using xcvdata not working", "body": "<p>It seems the issue might be related to specific version of OS which caches printer handles. To get around this you use an alternate call <code>OpenPrinter2</code> with the <code>PRINTER_OPTION_NO_CACHE</code>. Below is the modified code with the flag set.</p>\n\n<pre><code>HANDLE hPrinter;\nPRINTER_DEFAULTS PrinterDefaults;\nmemset(&amp;PrinterDefaults, 0, sizeof(PrinterDefaults));\n\nPrinterDefaults.pDatatype       = NULL;\nPrinterDefaults.pDevMode        = NULL;\nPrinterDefaults.DesiredAccess   = SERVER_ACCESS_ADMINISTER;\n\nPRINTER_OPTIONS PrinterOptions;\nPrinterOptions.cbSize = sizeof(PrinterOptions);\nPrinterOptions.dwFlags = PRINTER_OPTION_NO_CACHE;\n\nDWORD needed = 0;\nDWORD rslt = 0;\n\n//Port data\nPORT_DATA_1 pOutputData ;\nDWORD error = 0;\n\nif (!OpenPrinter2(L\",XcvMonitor Standard TCP/IP Port\", &amp;hPrinter, &amp;PrinterDefaults, &amp;PrinterOptions))\n{\n    LPVOID lpMsgBuf;\n</code></pre>\n"}], "owner": {"reputation": 613, "user_id": 5777453, "user_type": "registered", "accept_rate": 85, "profile_image": "https://lh3.googleusercontent.com/-4uw5MGjv0bc/AAAAAAAAAAI/AAAAAAAAErE/1e-03RNGDho/photo.jpg?sz=128", "display_name": "Shameel Mohamed", "link": "https://stackoverflow.com/users/5777453/shameel-mohamed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 424, "favorite_count": 2, "answer_count": 1, "score": 5, "last_activity_date": 1505112885, "creation_date": 1501672441, "last_edit_date": 1505112885, "question_id": 45459293, "link": "https://stackoverflow.com/questions/45459293/deleting-a-standard-tcp-ip-port-using-xcvdata-not-working", "title": "Deleting a Standard TCP IP port using xcvdata not working", "body": "<p>Xcvdata() for deleting port.</p>\n\n<pre><code>BOOL DeletePortCus( TCHAR* PortName )\n{\n    HANDLE hPrinter;\n    PRINTER_DEFAULTS PrinterDefaults;\n    memset(&amp;PrinterDefaults, 0, sizeof(PrinterDefaults));\n\n    PrinterDefaults.pDatatype       = NULL;\n    PrinterDefaults.pDevMode        = NULL;\n    PrinterDefaults.DesiredAccess   = SERVER_ACCESS_ADMINISTER;\n\n    DWORD needed = 0;\n    DWORD rslt = 0;\n\n    //Port data\n    PORT_DATA_1 pOutputData ;\n    DWORD error = 0;\n\n\n    if (!OpenPrinter(L\",XcvMonitor Standard TCP/IP Port\", &amp;hPrinter, &amp;PrinterDefaults))\n    {\n        LPVOID lpMsgBuf; \n        FormatMessage(FORMAT_MESSAGE_ALLOCATE_BUFFER | FORMAT_MESSAGE_FROM_SYSTEM | FORMAT_MESSAGE_IGNORE_INSERTS,\n                NULL, GetLastError(), NULL,(LPTSTR) &amp;lpMsgBuf, 0, NULL ); \n\n        _tprintf( TEXT(\"Error in OpenPrinter. Error msg : %s\"),lpMsgBuf);\n        LocalFree( lpMsgBuf );\n\n        return FALSE;\n    }\n\n    DWORD xcvresult= 0;\n\n    if (\n        !XcvData(\n            hPrinter, \n            TEXT(\"DeletePort\"),\n            (PBYTE)PortName,\n            (lstrlen(PortName) +1) * sizeof(TCHAR), //the 1 is for the trailing NULL\n            ( byte * ) &amp;pOutputData,\n            sizeof(PORT_DATA_1), \n            &amp;needed, \n            &amp;xcvresult)\n        )\n    {\n        LPVOID lpMsgBuf; \n\n        FormatMessage(FORMAT_MESSAGE_ALLOCATE_BUFFER | FORMAT_MESSAGE_FROM_SYSTEM | FORMAT_MESSAGE_IGNORE_INSERTS,\n                NULL, GetLastError(), NULL,(LPTSTR) &amp;lpMsgBuf, 0, NULL ); \n\n        _tprintf( TEXT(\"Error in XcvData. Error msg : %s; XcvDataPort status val = %d\"), lpMsgBuf, xcvresult);\n        LocalFree( lpMsgBuf );\n\n        return FALSE;\n    }\n\n    ClosePrinter(hPrinter);\n    return TRUE;\n}\n</code></pre>\n\n<p>The highlight is both the functions (<strong>openprinter</strong> and <strong>xcvdata</strong>) succeed. But the port is not getting removed. I am completely at a loss here as I dont have any error to lookup.</p>\n\n<p>Instead of <code>,XcvMonitor Standard TCP/IP Port</code> I also tried with <code>,XcvPort &lt;portname&gt;</code>. Still same.\nAs Samer suggested below, I tried with <code>OpenPrinter2</code> with no cache option.</p>\n\n<p>PS: I know there's this simple alternative DeletePort(), but it invokes a UI dialog box if it fails, so I don't want to use it.</p>\n"}, {"tags": ["c++", "visual-c++", "stl", "visual-studio-2017"], "comments": [{"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 2, "creation_date": 1501672283, "post_id": 45459173, "comment_id": 77878463, "body": "What do you mean by &#39;vectorizable&#39;?"}, {"owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 0, "creation_date": 1501672414, "post_id": 45459173, "comment_id": 77878557, "body": "No, you should never expect auto vectorization and should not rely on compiler optimizations in general. Typically you should make sure that you are solving the right problem, check that you are using suitable algorithms and only then maybe check whether compiler-generated code is good enough and improve it with some hand-written intrin or assembly or other workarounds."}, {"owner": {"reputation": 5258, "user_id": 1274747, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7a2942e1483b9befa80a61cb98bce39d?s=128&d=identicon&r=PG", "display_name": "axalis", "link": "https://stackoverflow.com/users/1274747/axalis"}, "edited": false, "score": 0, "creation_date": 1501672783, "post_id": 45459173, "comment_id": 77878838, "body": "AFAIK <code>&#47;qvec-report:2</code> also tells about STL function, at least I have seen the reports coming from STL (of course only for the functions you actually instantiate, i.e. use). But might depend on the MSVC version."}, {"owner": {"reputation": 7450, "user_id": 657700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb044bd9a9f6548b9a9bae44617c97c7?s=128&d=identicon&r=PG", "display_name": "fjardon", "link": "https://stackoverflow.com/users/657700/fjardon"}, "edited": false, "score": 0, "creation_date": 1501677525, "post_id": 45459173, "comment_id": 77882420, "body": "Intel has <a href=\"https://software.intel.com/en-us/articles/using-improved-stdvalarray-with-intelr-c-compiler\" rel=\"nofollow noreferrer\">opt-in support</a> for a version of <a href=\"http://en.cppreference.com/w/cpp/numeric/valarray\" rel=\"nofollow noreferrer\">valarray</a> that is passed to their <a href=\"https://software.intel.com/en-us/intel-ipp\" rel=\"nofollow noreferrer\">IPP library</a> (Integrated Performance Primitives API)"}], "answers": [{"tags": [], "owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "is_accepted": false, "score": 1, "last_activity_date": 1501675666, "creation_date": 1501675666, "answer_id": 45460460, "question_id": 45459173, "link": "https://stackoverflow.com/questions/45459173/can-i-expect-certain-stl-function-implementations-to-be-auto-vectorizable/45460460#45460460", "title": "Can I expect certain STL function implementations to be auto-vectorizable?", "body": "<p>Beginning with C++17 there are parallel versions of many of the standard library algorithms. You call the parallel version with <code>std::execution::par</code> or <code>std::execution::par_unseq</code> as the first argument. <code>std::execution::par_unseq</code> permits (but doesn't require) vectorization.</p>\n\n<pre><code>#include &lt;algorithm&gt;\n#include &lt;execution&gt;\n#include &lt;vector&gt;\n\nint main() {\n    std::vector&lt;int&gt; vec = /* whatever */\n    auto res = std::min_element(std::execution::par_unseq, vec.begin(), vec.end());\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 374, "user_id": 4055071, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/100002521961524/picture?type=large", "display_name": "Iosif Spulber", "link": "https://stackoverflow.com/users/4055071/iosif-spulber"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "closed_date": 1501677478, "answer_count": 1, "score": -1, "last_activity_date": 1501675666, "creation_date": 1501672076, "question_id": 45459173, "link": "https://stackoverflow.com/questions/45459173/can-i-expect-certain-stl-function-implementations-to-be-auto-vectorizable", "closed_reason": "Needs details or clarity", "title": "Can I expect certain STL function implementations to be auto-vectorizable?", "body": "<p>Of course this won't apply to all methods, but for something like <code>std::min_element</code> with a <code>std::vector&lt;char&gt;</code>, should I expect the implementation to be auto-vectorizable?</p>\n\n<p><code>std::fill</code> would be an even more straightforward example but I suspect it simply does a <code>memset</code> or something.</p>\n\n<p>Second, how can I check when the STL calls end up being auto vectorized with Visual Studio 2017? I can pass <code>/qvec-report:2</code> which tells me about my own loops and so on but it doesn't say anything about STL functions.</p>\n"}, {"tags": ["c++", "visual-studio", "templates", "project"], "owner": {"reputation": 21, "user_id": 3857387, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001748905621/picture?type=large", "display_name": "Vlad  Hatskevich", "link": "https://stackoverflow.com/users/3857387/vlad-hatskevich"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 81, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1501921806, "creation_date": 1501672059, "last_edit_date": 1501921806, "question_id": 45459164, "link": "https://stackoverflow.com/questions/45459164/visual-studio-2015-project-templates-c-wont-create-project-file-in-specific", "title": "Visual Studio 2015 Project Templates (C++) won&#39;t create project file in specific location", "body": "<p>I'm trying to find how to create my own VC++ project template with all parameters set up for future development. But suddenly I appeared to stuck at a little problem: VS2015 won't create given structure inside of the project folder.</p>\n\n<p>That's how my directory looks like inside of .zip file used for templating inside of Visual Studio:</p>\n\n<pre><code>Project/%ProjectName%.vcxproj\n\nProject/%ProjectName%.vcxproj.filters\n\nProject/%ProjectName%.vcxproj.user\n\nSrc/Main.cpp\n\nMyTemplate.vstemplate\n</code></pre>\n\n<p>To be precise, it won't place .vcxproj file into the</p>\n\n<blockquote>\n  <p>%created_project_folder%/Project</p>\n</blockquote>\n\n<p>directory, but directly into </p>\n\n<blockquote>\n  <p>%created_project_folder%/</p>\n</blockquote>\n\n<p>directory instead, ruining file dependencies specified inside of project file. E.g. \"include ../Src/Main.cpp\" won't work because it will seek for file in wrong location.</p>\n\n<p>I attached link to my .zip file below.</p>\n\n<p><a href=\"https://fex.net/#!654242360762\" rel=\"nofollow noreferrer\">https://fex.net/#!654242360762</a></p>\n\n<p>You can try to copy that onto @user@\\Documents\\Visual Studio XXXX\\Templates\\ProjectTemplates folder and then create project in VS. Project file will be created on the root instead of custom location.</p>\n"}, {"tags": ["c++", "windows", "emacs", "navigation", "tags"], "answers": [{"comments": [{"owner": {"reputation": 868, "user_id": 1413253, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/5c8cac06f5b4952dc51684963df6678a?s=128&d=identicon&r=PG", "display_name": "Courier", "link": "https://stackoverflow.com/users/1413253/courier"}, "edited": false, "score": 0, "creation_date": 1501745787, "post_id": 45468216, "comment_id": 77915877, "body": "Do we need to install gtags on windows? If yes, then how since the guide is for linux?"}], "tags": [], "owner": {"reputation": 27385, "user_id": 729907, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HeXcc.png?s=128&g=1", "display_name": "Drew", "link": "https://stackoverflow.com/users/729907/drew"}, "is_accepted": true, "score": 1, "last_activity_date": 1501697767, "creation_date": 1501697767, "answer_id": 45468216, "question_id": 45458952, "link": "https://stackoverflow.com/questions/45458952/emacs-tag-navigation-on-windows/45468216#45468216", "title": "Emacs tag/navigation on Windows?", "body": "<p>Is <code>\"D:/path/glo656wb/share/gtags/gtags.el\"</code> a <em>directory</em>? The doc of <code>load-path</code> says that its elements need to be directories.  <code>C-h v load-path</code>:</p>\n\n<blockquote>\n  <p><code>load-path</code> is a variable defined in <code>C source code</code>.</p>\n  \n  <p>Its value is shown below.</p>\n  \n  <p>This variable can be risky when used as a file-local variable.</p>\n  \n  <p>Documentation:</p>\n  \n  <p>List of directories to search for files to load.</p>\n  \n  <p>Each element is a string (directory file name) or nil (meaning\n  <code>default-directory</code>).</p>\n  \n  <p>This list is consulted by the <code>require</code> function.</p>\n  \n  <p>Initialized during startup as described in Info node <a href=\"http://www.gnu.org/software/emacs/manual/html_node/elisp/Library-Search.html\" rel=\"nofollow noreferrer\"><code>(elisp)Library Search</code></a>.\n  Use <code>directory-file-name</code> when adding items to this path.  However, Lisp\n  programs that process this list should tolerate directories both with\n  and without trailing slashes.</p>\n</blockquote>\n"}], "owner": {"reputation": 868, "user_id": 1413253, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/5c8cac06f5b4952dc51684963df6678a?s=128&d=identicon&r=PG", "display_name": "Courier", "link": "https://stackoverflow.com/users/1413253/courier"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 352, "favorite_count": 0, "accepted_answer_id": 45468216, "answer_count": 1, "score": 0, "last_activity_date": 1501697767, "creation_date": 1501671473, "question_id": 45458952, "link": "https://stackoverflow.com/questions/45458952/emacs-tag-navigation-on-windows", "title": "Emacs tag/navigation on Windows?", "body": "<p>Basically the objective is to enable emacs jumping to definitions, like moving to function definitions in c++ for example, on Windows 7. </p>\n\n<p>Tried to follow \n<a href=\"http://adoxa.altervista.org/global/\" rel=\"nofollow noreferrer\">http://adoxa.altervista.org/global/</a>\nfrom\n<a href=\"https://www.gnu.org/software/global/global.html\" rel=\"nofollow noreferrer\">https://www.gnu.org/software/global/global.html</a></p>\n\n<p>First it is not clear fro me regarding how to use <a href=\"http://adoxa.altervista.org/global/\" rel=\"nofollow noreferrer\">http://adoxa.altervista.org/global/</a>. What I did was to unzip 'GLOBAL 6.5.6 Win32' and ammended PATH variable to look to the binaries therein. Then I added this to ~/.emacs</p>\n\n<pre><code>(setq load-path (cons \"D:/path/glo656wb/share/gtags/gtags.el\" load-path))\n;;(add-to-list 'load-path \"D:/path/glo656wb/share/gtags/gtags.el\")\n\n(autoload 'gtags-mode \"gtags\" \"\" t)\n\n;; C-mode\n(add-hook 'c-mode-hook \n   '(lambda () \n      (gtags-mode t)\n))\n</code></pre>\n\n<p>But am getting this error message\n\"Can not open load file, no such file or directory...\"</p>\n\n<p>Any idea? What is the proper way to setup this on Windows?</p>\n"}, {"tags": ["c++", "memory", "memory-management", "vulkan"], "answers": [{"comments": [{"owner": {"reputation": 2603, "user_id": 8306143, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jpU8P.jpg?s=128&g=1", "display_name": "Ekzuzy", "link": "https://stackoverflow.com/users/8306143/ekzuzy"}, "edited": false, "score": 1, "creation_date": 1501674318, "post_id": 45459196, "comment_id": 77879900, "body": "Unfortunately there is also <b>bufferImageGranularity</b> that needs to be accounted for: &quot;bufferImageGranularity is the granularity, in bytes, at which buffer or linear image resources, and optimal image resources can be bound to adjacent offsets in the same VkDeviceMemory object without aliasing.&quot; More on it <a href=\"https://www.khronos.org/registry/vulkan/specs/1.0-extensions/html/vkspec.html#resources-bufferimagegranularity\" rel=\"nofollow noreferrer\">here</a>."}, {"owner": {"reputation": 367, "user_id": 2505053, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/45247aa06f7ee3ba3f5a3da89aae982d?s=128&d=identicon&r=PG", "display_name": "Scott Oliver", "link": "https://stackoverflow.com/users/2505053/scott-oliver"}, "reply_to_user": {"reputation": 2603, "user_id": 8306143, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jpU8P.jpg?s=128&g=1", "display_name": "Ekzuzy", "link": "https://stackoverflow.com/users/8306143/ekzuzy"}, "edited": false, "score": 0, "creation_date": 1501686687, "post_id": 45459196, "comment_id": 77890018, "body": "@Ekzuzy OK, so help me out here. Firstly, what are the implications of aliasing? Secondly, the link implies bufferImageGranularity is related to linear vs non-linear resources within a single VkDeviceMemory? Does that mean the allocation strategy should use separate pools for linear and non-linear resources?"}, {"owner": {"reputation": 44714, "user_id": 731620, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6e2168c4647a4f096a14c254bd3d3f68?s=128&d=identicon&r=PG", "display_name": "ratchet freak", "link": "https://stackoverflow.com/users/731620/ratchet-freak"}, "reply_to_user": {"reputation": 367, "user_id": 2505053, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/45247aa06f7ee3ba3f5a3da89aae982d?s=128&d=identicon&r=PG", "display_name": "Scott Oliver", "link": "https://stackoverflow.com/users/2505053/scott-oliver"}, "edited": false, "score": 0, "creation_date": 1501686895, "post_id": 45459196, "comment_id": 77890195, "body": "@ScottOliver it means that if the previous block is allocated to a non-linear resource while the current resource being allocated is linear you need to increase the alignment requirement to bufferImageGranularity. If the following block is non linear then you need to ensure that a there is enough space to align the end of the block to bufferImageGranularity."}, {"owner": {"reputation": 2603, "user_id": 8306143, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jpU8P.jpg?s=128&g=1", "display_name": "Ekzuzy", "link": "https://stackoverflow.com/users/8306143/ekzuzy"}, "edited": false, "score": 0, "creation_date": 1501687148, "post_id": 45459196, "comment_id": 77890402, "body": "I didn&#39;t dig too much into aliasing so I won&#39;t be off much help here. I see 3 options: as you wrote, use separate memory objects for optimal images and buffers/linear images; align to the requirement when necessary (track the type of resource bound to a given part of memory); always align to this requirement (whether there are different types of resources in neighbour blocks of memory or not)."}], "tags": [], "owner": {"reputation": 44714, "user_id": 731620, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6e2168c4647a4f096a14c254bd3d3f68?s=128&d=identicon&r=PG", "display_name": "ratchet freak", "link": "https://stackoverflow.com/users/731620/ratchet-freak"}, "is_accepted": true, "score": 3, "last_activity_date": 1501674703, "last_edit_date": 1501674703, "creation_date": 1501672135, "answer_id": 45459196, "question_id": 45458918, "link": "https://stackoverflow.com/questions/45458918/vulkan-memory-alignment-requirements/45459196#45459196", "title": "Vulkan memory alignment requirements", "body": "<blockquote>\n  <p>In other words, do we just need to make sure that Offset is a multiple of RequiredAlignment?</p>\n</blockquote>\n\n<p>for alignment that is nearly sufficient. </p>\n\n<p>in <a href=\"https://www.khronos.org/registry/vulkan/specs/1.0-extensions/html/vkspec.html#vkBindBufferMemory\" rel=\"nofollow noreferrer\">vkBindbufferMemory</a> one of the <em>valid usage</em> requirements is: </p>\n\n<blockquote>\n  <p><code>memoryOffset</code> <strong>must</strong> be an integer multiple of the <code>alignment</code> member of the <code>VkMemoryRequirements</code> structure returned from a call to <code>vkGetBufferMemoryRequirements</code> with <code>buffer</code></p>\n</blockquote>\n\n<p>and there is a parallel statement in the <em>valid usage</em> requirements of <a href=\"https://www.khronos.org/registry/vulkan/specs/1.0-extensions/html/vkspec.html#vkBindImageMemory\" rel=\"nofollow noreferrer\">vkBindImageMemory</a>:</p>\n\n<blockquote>\n  <p><code>memoryOffset</code> <strong>must</strong> be an integer multiple of the <code>alignment</code> member of the <code>VkMemoryRequirements</code> structure returned from a call to <code>vkGetImageMemoryRequirements</code> with <code>image</code></p>\n</blockquote>\n\n<p>If the previous block contains a non-linear resource while the current one is linear or vice versa then the alignment requirement is the max of the VkMemoryRequirements.alignment and the device's bufferImageGranularity. This also needs to be check for the end of the memory block.</p>\n\n<p><strong>However</strong> you also need to take into account that the memory type of the pool must be set in the <code>memoryTypeBits</code> flags of <code>VkMemoryRequirements</code> .</p>\n"}], "owner": {"reputation": 367, "user_id": 2505053, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/45247aa06f7ee3ba3f5a3da89aae982d?s=128&d=identicon&r=PG", "display_name": "Scott Oliver", "link": "https://stackoverflow.com/users/2505053/scott-oliver"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2632, "favorite_count": 0, "accepted_answer_id": 45459196, "answer_count": 1, "score": 0, "last_activity_date": 1501674703, "creation_date": 1501671395, "question_id": 45458918, "link": "https://stackoverflow.com/questions/45458918/vulkan-memory-alignment-requirements", "title": "Vulkan memory alignment requirements", "body": "<p>I'm implementing a naive memory manager for Vulkan device memory, and would like to make sure that I understand the alignment requirements for memory and how to satisfy them.</p>\n\n<p>So, assuming that I've allocated a 'pool' of memory using vkAllocateMemory and wish to sub-allocate blocks of memory in this pool to individual resources (based on a VkMemoryRequirements struct), will the following pseudocode be able to allocate a section of this memory with the correct size and alignment requirements?</p>\n\n<ul>\n<li>Request memory with RequiredSize and RequiredAlignment</li>\n<li>Iterate over blocks in the pool looking for one that is free and has size > RequiredSize</li>\n<li>If the offset in memory of the current block is NOT divisible by RequiredAlignment, figure out the difference between the alignment and the remainder</li>\n<li>If the size of the current block minus the difference is less than RequiredSize, skip to the next block in the pool</li>\n<li>If the difference is more than 0, insert a padding block with size equal to the difference, and adjust the current unallocated block size and offset</li>\n<li>Allocate RequiredSize bytes from the start of the current unallocated block (now aligned), adjust the Size and Offset of the unallocated block  accordingly</li>\n<li>Return vkDeviceMemory handle (of pool), size and offset (of new allocated block)</li>\n<li>If we reach the end of the block list instead, this pool cannot allocate the memory</li>\n</ul>\n\n<p>In other words, do we just need to make sure that Offset is a multiple of RequiredAlignment?</p>\n"}, {"tags": ["c++", "excel", "com"], "comments": [{"owner": {"reputation": 4382, "user_id": 3205529, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/edAtA.jpg?s=128&g=1", "display_name": "Malick", "link": "https://stackoverflow.com/users/3205529/malick"}, "edited": false, "score": 0, "creation_date": 1501680799, "post_id": 45458627, "comment_id": 77885194, "body": "How do you add your addin ? via the &quot;COM Addin&quot; button or via the &quot;Add-ins&quot; dialog box ? If it is via the COM Addin button, you can set a registry key to force to load automatically your addin. see <a href=\"https://support.microsoft.com/en-us/help/291392/excel-com-add-ins-and-automation-add-ins\" rel=\"nofollow noreferrer\">support.microsoft.com/en-us/help/291392/&hellip;</a> . In this latter case, if your addin crashes excel, then at next startup excel will ask the user if he wants to deactivate this addin. This won&#39;t fix the problem related to the hidden Excel.exe process but you won&#39;t be forced to manually add the addin."}, {"owner": {"reputation": 13408, "user_id": 585968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97d0399ab165e17f668b2cdd1a5c1dc0?s=128&d=identicon&r=PG&f=1", "display_name": "MickyD", "link": "https://stackoverflow.com/users/585968/mickyd"}, "edited": false, "score": 0, "creation_date": 1501742200, "post_id": 45458627, "comment_id": 77913499, "body": "I&#39;m confused, one minute you are saying your code is an app (exe) and then you start talking about add-ins. The only way I can think of when Word disables an add-in is when a crash occurs in your code in an <i>add-in</i> <b>not</b> not because of some Ole Automation client (your exe) crashes"}, {"owner": {"reputation": 5170, "user_id": 1410246, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfce8c2aa420b800bb7595ac5fbc986d?s=128&d=identicon&r=PG", "display_name": "EylM", "link": "https://stackoverflow.com/users/1410246/eylm"}, "edited": false, "score": 0, "creation_date": 1501750350, "post_id": 45458627, "comment_id": 77919029, "body": "My code is an EXE file that attaches to an existing Excel process - it&#39;s not an add-in. However, there are other add-ins on the computer that are not related to my code. If my EXE crashes (it&#39;s cant crash Excel, since it&#39;s in other process), the Excel EXE keeps running even if the user closes it. Next time the user runs Excel - the add-ins are not there."}], "owner": {"reputation": 5170, "user_id": 1410246, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfce8c2aa420b800bb7595ac5fbc986d?s=128&d=identicon&r=PG", "display_name": "EylM", "link": "https://stackoverflow.com/users/1410246/eylm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 69, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1502879179, "creation_date": 1501670603, "last_edit_date": 1502879179, "question_id": 45458627, "link": "https://stackoverflow.com/questions/45458627/excel-as-com-server-is-not-released-if-the-app-is-not-properly-closed", "title": "Excel as Com Server is not released if the app is not properly closed", "body": "<p>I am using Excel automation in C++ (EXE) that is listening to Excel events.\nOnce the user opens the Excel app, I am able to reference the _Application pointer via the <code>AccessibleObjectFromWindow</code> function.\nAfter this - I am able to connect to the <code>IID_IConnectionPointContainer</code> and get the various events.</p>\n\n<p>My issue is the following: If my program crashes (or if I stop the debugger), I am not able to properly clean the <code>_Application</code> pointer, so Excel.EXE is still running even if the user has closed the program. \nThis makes sense since the <code>_Application</code> ref count is still 1.</p>\n\n<p>However, if the user opens the Excel.EXE again -> It starts without any add-ins. The user needs to manually add the ribbons.\nThis behaviour will continue until the Excel.EXE is manually killed.</p>\n\n<p>Did anyone experience such an issue? \nIs there a way to clean COM object pointers after my app crashes?</p>\n"}, {"tags": ["c++", "fopen", "file-extension"], "comments": [{"owner": {"reputation": 3213, "user_id": 6084430, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/B0TaE.jpg?s=128&g=1", "display_name": "DimChtz", "link": "https://stackoverflow.com/users/6084430/dimchtz"}, "edited": false, "score": 7, "creation_date": 1501670160, "post_id": 45458426, "comment_id": 77876968, "body": "&quot;that this only works with .txt file extension&quot; Nah, that&#39;s simply not true."}, {"owner": {"reputation": 7681, "user_id": 8242698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BjJXu.jpg?s=128&g=1", "display_name": "user0042", "link": "https://stackoverflow.com/users/8242698/user0042"}, "edited": false, "score": 2, "creation_date": 1501670190, "post_id": 45458426, "comment_id": 77876988, "body": "It works with any file extension."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1501670353, "post_id": 45458426, "comment_id": 77877095, "body": "Can you please try to create a <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable Example</a> of the failing program and show us?A lso, for the failing program what is <code>filename</code> and what is its contents?"}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1501670608, "post_id": 45458426, "comment_id": 77877290, "body": "probably there is a problem with this file. Maybe you do not have enough rights."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 1, "creation_date": 1501671046, "post_id": 45458426, "comment_id": 77877599, "body": "Regarding the comment from @PeterJ about rights. Do file (with the <code>.pcap</code> extension) already <i>exist</i>? Do you have the needed access to overwrite it? Have you checked <code>errno</code> after the failed <code>fopen</code> call?"}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1501671156, "post_id": 45458426, "comment_id": 77877674, "body": "@Some programmer dude and if does not exist - if he has a right to create one. We do not know that system :)"}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1501671290, "post_id": 45458426, "comment_id": 77877752, "body": "@M. Zim try to run your program as root or administrator depending on the system. End check errno"}, {"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 1, "creation_date": 1501672237, "post_id": 45458426, "comment_id": 77878424, "body": "Why is this flagged c++?  It&#39;s all C.   Try upgrading to fstream and you&#39;ll save yourself a load of pain soon."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2672107"}, "edited": false, "score": 1, "creation_date": 1501672343, "post_id": 45458426, "comment_id": 77878507, "body": "What is buf? How big is it? If you had used C++  (std::string) instead of C you would not have to worry about that."}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "reply_to_user": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 0, "creation_date": 1501672932, "post_id": 45458426, "comment_id": 77878950, "body": "@UKMonkey The code is valid <code>C++</code> so it depends what compiler the OP is using. The tags should reflect that,"}], "answers": [{"comments": [{"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 0, "creation_date": 1501672588, "post_id": 45458844, "comment_id": 77878677, "body": "Downvoting as this offers nothing that isn&#39;t already asked in the comments"}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "reply_to_user": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 1, "creation_date": 1501672864, "post_id": 45458844, "comment_id": 77878903, "body": "@UKMonkey What is wrong with duplicating information from the comments? Comments are not answers and this does answer the question doesn&#39;t it?"}], "tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": false, "score": 1, "last_activity_date": 1501671173, "creation_date": 1501671173, "answer_id": 45458844, "question_id": 45458426, "link": "https://stackoverflow.com/questions/45458426/is-fopen-only-for-txt-extension-possible/45458844#45458844", "title": "Is fopen only for .txt extension possible?", "body": "<blockquote>\n  <p>Is fopen only for .txt extension possible?</p>\n</blockquote>\n\n<p>No there is no such limitation. You can open files regardless filename.</p>\n\n<blockquote>\n  <p>with .pcap <code>f</code> is returning <code>NULL</code>.</p>\n</blockquote>\n\n<p>It is <code>fopen</code> that returns null. You can use <code>errno</code> to see why. Check your system manual for what the error code means.</p>\n"}], "owner": {"reputation": 1, "user_id": 8233681, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3bf6e3226de0f212daa3f42c42f80b06?s=128&d=identicon&r=PG&f=1", "display_name": "M. Zim", "link": "https://stackoverflow.com/users/8233681/m-zim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 842, "favorite_count": 0, "answer_count": 1, "score": -7, "last_activity_date": 1501671173, "creation_date": 1501670109, "question_id": 45458426, "link": "https://stackoverflow.com/questions/45458426/is-fopen-only-for-txt-extension-possible", "title": "Is fopen only for .txt extension possible?", "body": "<p>I use fopen in my c++ code to open a textfile. But i found out, that this only works with .txt file extension, for example not with .pcap:</p>\n\n<pre><code>//this works\nsnprintf(buf, sizeof(buf), \"/sdcard/%s.txt\", filename);\nFILE* f = fopen(buf, \"w\");\n\n//this not\nsnprintf(buf, sizeof(buf), \"/sdcard/%s.pcap\", filename);\nFILE* f = fopen(buf, \"w\");\n</code></pre>\n\n<p>with .pcap <code>f</code> is returning <code>NULL</code>.</p>\n"}, {"tags": ["c++", "boost", "rvalue-reference", "boost-signals2"], "comments": [{"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "edited": false, "score": 2, "creation_date": 1501670477, "post_id": 45458167, "comment_id": 77877185, "body": "<code>is_reference</code> does not imply <code>is_rvalue_reference</code>. For this to work, <code>operator()</code> would need to return a <code>NonCopyable&amp;</code>, no?"}, {"owner": {"reputation": 6892, "user_id": 429879, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/VyTUw.png?s=128&g=1", "display_name": "Germ&#225;n Diago", "link": "https://stackoverflow.com/users/429879/germ%c3%a1n-diago"}, "reply_to_user": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "edited": false, "score": 0, "creation_date": 1501670916, "post_id": 45458167, "comment_id": 77877511, "body": "I tried to move the result also. It won&#39;t work. I did <code>return std::move(*b)</code>. But the return is not what happens in my actual code actually. Even doing this inside the operator()() triggers the error about a copy: <code>*b;</code>"}, {"owner": {"reputation": 6892, "user_id": 429879, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/VyTUw.png?s=128&g=1", "display_name": "Germ&#225;n Diago", "link": "https://stackoverflow.com/users/429879/germ%c3%a1n-diago"}, "reply_to_user": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "edited": false, "score": 0, "creation_date": 1501671631, "post_id": 45458167, "comment_id": 77877986, "body": "@RichardHodges the issue seems to be inside optional. The wrong overload in optional is chosen and it is calling <code>assign_value</code> even when a simple dereference is done without assigning anything. A bit confused about this."}, {"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "edited": false, "score": 0, "creation_date": 1501691411, "post_id": 45458167, "comment_id": 77893362, "body": "Are you able to reproduce in a full (tiny) example so we can play with it?"}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1501700214, "post_id": 45458167, "comment_id": 77898709, "body": "Yes, we need a SSCCE."}], "owner": {"reputation": 6892, "user_id": 429879, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/VyTUw.png?s=128&g=1", "display_name": "Germ&#225;n Diago", "link": "https://stackoverflow.com/users/429879/germ%c3%a1n-diago"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 276, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1501722577, "creation_date": 1501669493, "last_edit_date": 1501722577, "question_id": 45458167, "link": "https://stackoverflow.com/questions/45458167/boost-signals-2-custom-combiner-why-it-triggers-a-copy", "title": "Boost signals 2, custom combiner, why it triggers a copy", "body": "<p>I have a program making use of <code>boost::signals2</code>. I need to return a non-copyable value. In order to achieve this, I tried to change the combiner template parameter. The curious thing about this is that inside the combiner I get an error.</p>\n\n<p>This works:</p>\n\n<pre><code>struct Combiner {\n    using result_type = NonCopyable;\n\n   template &lt;class Iter&gt;\n   NonCopyable operator()(Iter b, Iter e) {\n         return NonCopyable(something);\n   }\n};\n\nusing SignalType = boost::signals2::signal&lt;NonCopyable (), Combiner&gt;;\n</code></pre>\n\n<p>But at the moment I try to dereference an iterator inside <code>Combiner::operator()</code>, things get messed up.</p>\n\n<pre><code>struct Combiner {\n    using result_type = NonCopyable;\n\n   template &lt;class Iter&gt;\n   NonCopyable operator()(Iter b, Iter e) {\n         return *b;\n   }\n};\n</code></pre>\n\n<p><code>std::is_const&lt;Iter&gt;</code> returns false.\n<code>std::is_reference&lt;decltype(*b)&gt;</code> is returning true.</p>\n\n<p>I cannot figure out why I have the error, but I see the wrong overload is selected here:</p>\n\n<pre><code>void assign_value(argument_type val) { get_impl() = val; }\n#ifndef BOOST_OPTIONAL_DETAIL_NO_RVALUE_REFERENCES\nvoid assign_value(rval_reference_type val) { get_impl() = static_cast&lt;rval_reference_type&gt;(val); }\n#endif\n</code></pre>\n\n<p>Rvalue references are activated, I checked it in an example program and I am using c++14 flag in gcc. Any idea?</p>\n\n<p>EDIT: Full example.</p>\n\n<pre><code>#include &lt;memory&gt;\n#include &lt;boost/signals2.hpp&gt;\n\n\nclass NonCopyable {\n    std::unique_ptr&lt;int&gt; _i;\npublic:\n    explicit NonCopyable(int i) : _i(new int(i)) {}\n}; \n\nstruct Combiner {\n        using result_type = NonCopyable;\n\n       template &lt;class Iter&gt;\n       NonCopyable operator(Iter b, Iter b) const {\n             return std::move(*b);\n       }\n    };\n\nusing SignalType = boost::signals2::signal&lt;NonCopyable(), Combiner&gt;;\n\nint main() {\n   SignalType s;\n   s.connect([] { return NonCopyable(3); });\n   s();\n}\n</code></pre>\n"}, {"tags": ["c++", "c++11", "vector", "enums", "enum-class"], "comments": [{"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 1, "creation_date": 1501669499, "post_id": 45458109, "comment_id": 77876463, "body": "The only thing that&#39;s safer about <code>enum class</code> is the lack of implicit conversion from enum to the underlying type, which is the issue you&#39;re expeciencing. Thus I&#39;d just use a normal <code>enum</code> in a namespace."}, {"owner": {"reputation": 548, "user_id": 7432927, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/875c26e9002856e5184f08012753f279?s=128&d=identicon&r=PG&f=1", "display_name": "Przemys\u0142aw Czechowski", "link": "https://stackoverflow.com/users/7432927/przemys%c5%82aw-czechowski"}, "reply_to_user": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1501669585, "post_id": 45458109, "comment_id": 77876534, "body": "@HolyBlackCat That&#39;s the only thing? Isn&#39;t preventing redefinition of keys another one?"}, {"owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 0, "creation_date": 1501669649, "post_id": 45458109, "comment_id": 77876580, "body": "are you really having a <code>std::vector</code> that&#39;s always going to be of size 2?"}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1501669716, "post_id": 45458109, "comment_id": 77876631, "body": "@Przemys\u0142awCzechowski Can you elaborate? If you&#39;re talking about enumerators with duplicate values, they <a href=\"http://coliru.stacked-crooked.com/a/ba9e8daf5ee839f3\" rel=\"nofollow noreferrer\">seem to be allowed</a>."}, {"owner": {"reputation": 548, "user_id": 7432927, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/875c26e9002856e5184f08012753f279?s=128&d=identicon&r=PG&f=1", "display_name": "Przemys\u0142aw Czechowski", "link": "https://stackoverflow.com/users/7432927/przemys%c5%82aw-czechowski"}, "reply_to_user": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 0, "creation_date": 1501669761, "post_id": 45458109, "comment_id": 77876671, "body": "@bolov No, actually it&#39;s going to be of size ~7, maybe more. I wanted to use simple <code>push_back</code> while parsing data to put inside"}, {"owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 0, "creation_date": 1501669875, "post_id": 45458109, "comment_id": 77876749, "body": "@Przemys\u0142awCzechowski (about new keys) not really: if you want you can do: <code>PlanetDataKeys k = static_cast&lt;PlanetDataKeys&gt;(42);</code>"}, {"owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 0, "creation_date": 1501670375, "post_id": 45458109, "comment_id": 77877111, "body": "If you know vector size in advance with strict meaning of every item in it then how about using class instead?"}, {"owner": {"reputation": 548, "user_id": 7432927, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/875c26e9002856e5184f08012753f279?s=128&d=identicon&r=PG&f=1", "display_name": "Przemys\u0142aw Czechowski", "link": "https://stackoverflow.com/users/7432927/przemys%c5%82aw-czechowski"}, "reply_to_user": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1501670475, "post_id": 45458109, "comment_id": 77877183, "body": "@HolyBlackCat I thought that primary reason to use <code>enum class</code> it that you can have same key name in two enums . But enum in namespace also allows that - namespaces just have to be different. So, you&#39;re right. There are no benefits of using <code>enum class</code> here. I got it wrong."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2672107"}, "edited": false, "score": 0, "creation_date": 1501672926, "post_id": 45458109, "comment_id": 77878944, "body": "I would use <code>struct PlanetData { double x; double y; };</code> instead of <code>std::vector</code>."}], "answers": [{"tags": [], "owner": {"reputation": 7393, "user_id": 1690777, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/18ef5bab4c70735313d86c7240e4abed?s=128&d=identicon&r=PG", "display_name": "Sergey", "link": "https://stackoverflow.com/users/1690777/sergey"}, "is_accepted": true, "score": 2, "last_activity_date": 1501670457, "creation_date": 1501670457, "answer_id": 45458575, "question_id": 45458109, "link": "https://stackoverflow.com/questions/45458109/keys-to-access-vector-fields-enum-class-or-enum-in-namespace/45458575#45458575", "title": "Keys to access vector fields - enum class or enum in namespace?", "body": "<p>Please don't expect too much functionality from a humble vector.</p>\n\n<p>Vector is not designed to access it's data with keys other than indices. Despite your examples are syntactically and semantically correct, they look like a misuse of <code>std::vector</code> and enum classes. Each tool has it's purpose, and vector seems to be not the best one for your task.</p>\n\n<p>Enum classes were introduced to improve type safety. With them, you'll never mix up <code>PlanetDataKeys</code>, <code>SatelliteEphemeris</code> and <code>KeplerianOrbitElements</code>. But in your case you finally cast any of them to int, loosing all the conquest of type-safe enums.</p>\n\n<p>As to me, it would be better to define a <code>PlanetData</code> class with a subscript operator which accepts <code>PlanetDataKeys</code> as it's argument.</p>\n\n<p>If you want to stick with vectors, I'd choose the first variant (with namespaces). It's much easier to read and write, and I'm convinced that it's not even a little safer than enum classes used this way.</p>\n"}, {"tags": [], "owner": {"reputation": 592, "user_id": 6672815, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee6c8d74588b5dbf028aeed0e33b8ee5?s=128&d=identicon&r=PG&f=1", "display_name": "virgesmith", "link": "https://stackoverflow.com/users/6672815/virgesmith"}, "is_accepted": false, "score": 0, "last_activity_date": 1501672234, "creation_date": 1501672234, "answer_id": 45459231, "question_id": 45458109, "link": "https://stackoverflow.com/questions/45458109/keys-to-access-vector-fields-enum-class-or-enum-in-namespace/45459231#45459231", "title": "Keys to access vector fields - enum class or enum in namespace?", "body": "<p>What about just defining scoped constants of the appropriate type, like so:</p>\n\n<pre><code>namespace PlanetDataKeys {\n  const size_t PosX = 0;\n  const size_t PosY = 1;\n}\n</code></pre>\n"}], "owner": {"reputation": 548, "user_id": 7432927, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/875c26e9002856e5184f08012753f279?s=128&d=identicon&r=PG&f=1", "display_name": "Przemys\u0142aw Czechowski", "link": "https://stackoverflow.com/users/7432927/przemys%c5%82aw-czechowski"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 764, "favorite_count": 0, "accepted_answer_id": 45458575, "answer_count": 2, "score": 1, "last_activity_date": 1501672234, "creation_date": 1501669300, "last_edit_date": 1501670959, "question_id": 45458109, "link": "https://stackoverflow.com/questions/45458109/keys-to-access-vector-fields-enum-class-or-enum-in-namespace", "title": "Keys to access vector fields - enum class or enum in namespace?", "body": "<p>Let's say I have an alias for vector:</p>\n\n<pre><code>typedef std::vector&lt;double&gt; PlanetData;\n</code></pre>\n\n<p>And I want it's fields to be accessible via some keys:</p>\n\n<pre><code>double x = planet_data[PlanetDataKeys::PosX]; //planet_data is of type PlanetData\n</code></pre>\n\n<p>How can I achieve it?</p>\n\n<p>I can define an enum inside a namespace:</p>\n\n<pre><code>namespace PlanetDataKeys {\n  enum {\n    PosX = 0,\n    PosY = 1\n  };\n}\n</code></pre>\n\n<p>But <code>enum class</code> is safer:</p>\n\n<pre><code>enum class PlanetDataKeys {\n  PosX = 0,\n  PosY = 1\n};\n</code></pre>\n\n<p>However, as implicit casting of <code>enum class</code> to <code>int</code> type is disabled, this would require to write:</p>\n\n<pre><code>double x =  planet_data[static_cast&lt;int&gt;(PlanetDataKeys::PosX)];\n</code></pre>\n\n<p>which is a bit awkward .</p>\n\n<p>Which approach is better in this case and why?</p>\n\n<p>EDIT Some explanation for aliasing vector:</p>\n\n<p>In real code, PlanetData have ~7 fields, maybe even more if I decide to expand it. And I'm creating an instance of it while parsing a string of form <code>data_string = \"date: 2903248.12343, position=[124543254.1343214,123213.12341,63456.1234], velocity=[...\"</code>. That's why I wanted it to be a vector: to use something like <code>planet_data.push_back(ParseNextDouble(data_string));</code></p>\n"}, {"tags": ["c++", "udp", "hex", "protocols", "wireshark"], "comments": [{"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1501671361, "post_id": 45457900, "comment_id": 77877801, "body": "The packet should not contain <i>text</i>. What you&#39;re seeing in Wireshark is a hexadecimal representation of binary data. The data itself does not consist of those characters. (Much like the word &quot;kitten&quot; is not a kitten.)"}], "answers": [{"tags": [], "owner": {"reputation": 2473, "user_id": 4490706, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nmMcD.jpg?s=128&g=1", "display_name": "Ton Plooij", "link": "https://stackoverflow.com/users/4490706/ton-plooij"}, "is_accepted": false, "score": 1, "last_activity_date": 1501670737, "creation_date": 1501670737, "answer_id": 45458681, "question_id": 45457900, "link": "https://stackoverflow.com/questions/45457900/c-converting-string-packet-to-iphdr-what-should-be-the-format-of-string-pack/45458681#45458681", "title": "C++ Converting string packet to iphdr - what should be the format of string packet?", "body": "<p>Your basic assumption has some problems. You're using a string and you assume that if you cast it to some structure definition it will automatically (and auto-magically) convert it to the proper binary representation of that structure definition. This is not the case. Let's say you have a structure <code>'struct Test { unsigned int t; }'</code> and a string <code>'std::string st = \"12\"'</code>. And you do <code>'struct Test *pt = st.c_str();'</code>. The ASCII representation of \"12\" would be 0x31 0x32 so now *pt points to a memory location starting with 31 32. Casting this to in integer (assume we have a big-endian system and assume the unsigned int is two bytes) results in 0x3132 (decimal 12594). </p>\n"}], "owner": {"reputation": 23, "user_id": 6915050, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ki9m2.png?s=128&g=1", "display_name": "sabanana", "link": "https://stackoverflow.com/users/6915050/sabanana"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 452, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1501670737, "creation_date": 1501668695, "question_id": 45457900, "link": "https://stackoverflow.com/questions/45457900/c-converting-string-packet-to-iphdr-what-should-be-the-format-of-string-pack", "title": "C++ Converting string packet to iphdr - what should be the format of string packet?", "body": "<p>So I have this line of code:</p>\n\n<pre><code>struct iphdr *ip_header = (struct iphdr*) packet.c_str();\n</code></pre>\n\n<p>from ip.h: </p>\n\n<pre><code>struct iphdr\n  {\n#if __BYTE_ORDER == __LITTLE_ENDIAN\n    unsigned int ihl:4;\n    unsigned int version:4;\n#elif __BYTE_ORDER == __BIG_ENDIAN\n    unsigned int version:4;\n    unsigned int ihl:4;\n#else\n# error    \"Please fix &lt;bits/endian.h&gt;\"\n#endif\n    u_int8_t tos;\n    u_int16_t tot_len;\n    u_int16_t id;\n    u_int16_t frag_off;\n    u_int8_t ttl;\n    u_int8_t protocol;\n    u_int16_t check;\n    u_int32_t saddr;\n    u_int32_t daddr;\n    /*The options start here. */\n  };\n</code></pre>\n\n<p>I captured a DNS packet using wireshark and I got this sample packet:</p>\n\n<pre><code>0000   e0 8e 3c 1c c0 07 ac bc 32 83 84 d9 08 00 45 00\n0010   00 3f 51 45 00 00 40 11 aa b3 c0 a8 fe 65 c0 a8\n0020   fe fe 0e 76 00 35 00 2b d5 1c 9c 0a 01 00 00 01\n0030   00 00 00 00 00 00 03 77 77 77 06 67 6f 6f 67 6c\n0040   65 03 63 6f 6d 02 70 68 00 00 01 00 01\n</code></pre>\n\n<p>I removed the eth header and so I'm left with this:</p>\n\n<pre><code>0000   45 00\n0010   00 3f 51 45 00 00 40 11 aa b3 c0 a8 fe 65 c0 a8\n0020   fe fe 0e 76 00 35 00 2b d5 1c 9c 0a 01 00 00 01\n0030   00 00 00 00 00 00 03 77 77 77 06 67 6f 6f 67 6c\n0040   65 03 63 6f 6d 02 70 68 00 00 01 00 01\n</code></pre>\n\n<p>The first part (45 00 00 3f 51 45 00 00 40 11) translates to this:</p>\n\n<pre><code>45     0100 .... = Version: 4\n       .... 0101 = Header Length: 20 bytes (5)\n00     Differentiated Services Field: 0x00 (DSCP: CS0, ECN: Not-ECT)\n00 3f  Total Length: 63\n51 45  Identification: 0x5145 (20805)\n00 00  Flags: 0x00\n       Fragment offset: 0\n40     Time to live: 64\n11     Protocol: UDP (17)\n</code></pre>\n\n<p>My question is: what should be the format of the string variable packet? I have tried this:</p>\n\n<pre><code>std::string packet = \"45 00 00 3f 51 45 00 00 40 11\";\n</code></pre>\n\n<p>but for ip_header->protocol I get <strong>48 '0'</strong> instead of 17.</p>\n\n<p>Also I'm wondering, why is the protocol not on the 9th byte? I was assuming it should be on the 9th based on the structure of iphdr.</p>\n\n<p>Would highly appreciate anyone's help. Thanks a lot!</p>\n"}, {"tags": ["c++", "boost", "boost-spirit", "boost-spirit-qi", "boost-spirit-x3"], "comments": [{"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "edited": false, "score": 1, "creation_date": 1501669112, "post_id": 45457868, "comment_id": 77876189, "body": "Am I correct in boiling your question down to: &quot;What is the intent of xxx being so much &#39;stateless&#39;?&quot;. The intent is almost always, separation of concerns -&gt; loose coupling -&gt; more reusability."}, {"owner": {"reputation": 504, "user_id": 1778127, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3bb47dada671eb91ef01a7b9fdf6d254?s=128&d=identicon&r=PG", "display_name": "saki7", "link": "https://stackoverflow.com/users/1778127/saki7"}, "reply_to_user": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "edited": false, "score": 0, "creation_date": 1501669560, "post_id": 45457868, "comment_id": 77876504, "body": "Statelessness is a good thing. My point is: there should be no difference between (a) arbitrary member variable instance and (b) inherited context variable passed to every single sub rule."}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 1, "creation_date": 1501700297, "post_id": 45457868, "comment_id": 77898752, "body": "This seems like a ranty blog post, not a question. &quot;Self-managed &#39;flag&#39; is a disaster.&quot; - what does it even mean? &quot;You can&#39;t do this anymore on X3.&quot; - you completely fail to specify <i>what</i> you think cannot be done in X3. Ironically, you can (of course) do error handling in X3. It&#39;s just poorly documented."}, {"owner": {"reputation": 504, "user_id": 1778127, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3bb47dada671eb91ef01a7b9fdf6d254?s=128&d=identicon&r=PG", "display_name": "saki7", "link": "https://stackoverflow.com/users/1778127/saki7"}, "edited": false, "score": 0, "creation_date": 1501701800, "post_id": 45457868, "comment_id": 77899553, "body": "This is a question. I have asked a <i>question</i> on the first sentence. Of course I know there&#39;s on_error for X3 too. But how can you pass your own variable to your on_error()? How can you specify your custom std::ofstream to be used by on_error at runtime? on_error is a template function with a fixed signature. You can&#39;t specialize a template function for a instance. Did you read that part on my question?"}, {"owner": {"reputation": 504, "user_id": 1778127, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3bb47dada671eb91ef01a7b9fdf6d254?s=128&d=identicon&r=PG", "display_name": "saki7", "link": "https://stackoverflow.com/users/1778127/saki7"}, "edited": false, "score": 0, "creation_date": 1501702809, "post_id": 45457868, "comment_id": 77900144, "body": "Error handling is just one example. The main subject of this question is about X3&#39;s constness. If a rule must be declared auto-const in a namespace scope, and X3 is expecting ADL for an unique type, is there any way to modify the target of ref(any_variable) specified by your rule? Without using static variables, at runtime?"}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1501704100, "post_id": 45457868, "comment_id": 77900950, "body": "@saki7 I tried to give you my brain dump <a href=\"https://stackoverflow.com/a/45469919/85371\">here</a>. If you really want to know &quot;why&quot;, you should probably ask the devs on the [spirit-general] mailing list."}], "answers": [{"comments": [{"owner": {"reputation": 59630, "user_id": 636019, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38ba39c7ba510ac2951c010c26afb6a6?s=128&d=identicon&r=PG", "display_name": "ildjarn", "link": "https://stackoverflow.com/users/636019/ildjarn"}, "edited": false, "score": 0, "creation_date": 1502097606, "post_id": 45469919, "comment_id": 78046523, "body": "Is <code>return rule&lt;struct _, std::string&gt; = </code> missing an initializer or am I missing something?"}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "reply_to_user": {"reputation": 59630, "user_id": 636019, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38ba39c7ba510ac2951c010c26afb6a6?s=128&d=identicon&r=PG", "display_name": "ildjarn", "link": "https://stackoverflow.com/users/636019/ildjarn"}, "edited": false, "score": 1, "creation_date": 1502138927, "post_id": 45469919, "comment_id": 78070916, "body": "@ildjarn Indeed. Fixed. (This is my daily reminder why I should never include untested code, not even 3 lines... :))"}, {"owner": {"reputation": 504, "user_id": 1778127, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3bb47dada671eb91ef01a7b9fdf6d254?s=128&d=identicon&r=PG", "display_name": "saki7", "link": "https://stackoverflow.com/users/1778127/saki7"}, "edited": false, "score": 0, "creation_date": 1502170435, "post_id": 45469919, "comment_id": 78079336, "body": "I really appreciate this answer. Good catch on actual impl and real-life analysis!"}], "tags": [], "owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "is_accepted": true, "score": 6, "last_activity_date": 1541636199, "last_edit_date": 1541636199, "creation_date": 1501703987, "answer_id": 45469919, "question_id": 45457868, "link": "https://stackoverflow.com/questions/45457868/statefulness-of-spirit-v2-and-x3/45469919#45469919", "title": "Statefulness of Spirit V2 and X3", "body": "<p>You make a number of unsubstantiated claims in your \"question\" article.</p>\n\n<p>I recognize much of the sentiment that shines through your rant, but I find it hard to constructively respond when there is so much debatable in it.</p>\n\n<h2>New Possibilities</h2>\n\n<blockquote>\n  <p>X3 is expecting an user to define his every single rule in namespace scope, with auto-consted instance.</p>\n</blockquote>\n\n<p>This is simply not true. X3 doesn't do that. It could be said that X3 <em>promotes</em> that pattern to enable key features like </p>\n\n<ul>\n<li>recursive grammars</li>\n<li>separation of parsers across translation units</li>\n</ul>\n\n<p>On the flip side, there's not always a need for any of that.</p>\n\n<p>The very value-orientedness of X3 enables new patterns to achieve things. I'm quite fond of being able to do things like:</p>\n\n<h3>Stateful Parser Factories</h3>\n\n<pre><code>auto make_parser(char delim) {\n     return lexeme [ delim &gt;&gt; *('\\\\' &gt;&gt; char_ | ~char_(delim)) &gt;&gt; delim ];\n}\n</code></pre>\n\n<p>Indeed, you might \"need\" x3::rule to achieve attribute coercion (like qi::transfom_attr):</p>\n\n<pre><code>auto make_parser(char delim) {\n     return rule&lt;struct _, std::string&gt; {} = lexeme [ delim &gt;&gt; *('\\\\' &gt;&gt; char_ | ~char_(delim)) &gt;&gt; delim ];\n}\n</code></pre>\n\n<p>In fact, I've used this pattern to make quick-and-dirty <code>as&lt;T&gt;[]</code> directive: <a href=\"https://stackoverflow.com/questions/33816662/understanding-the-list-operator-in-boost-spirit/33817135#33817135\">Understanding the List Operator (%) in Boost.Spirit</a>.</p>\n\n<pre><code>auto make_parser(char delim) {\n     return as&lt;std::string&gt; [ lexeme [ delim &gt;&gt; *('\\\\' &gt;&gt; char_ | ~char_(delim)) &gt;&gt; delim ] ];\n}\n</code></pre>\n\n<p>Nothing prevents you from using a dynamic parser factory like that to use context from surrounding state.</p>\n\n<h3>Stateful Semantic Actions</h3>\n\n<p>Semantic actions are copied by value, but they can freely refer to external state. When using factory functions, they can, again, use surrounding state.</p>\n\n<h3>Stateful directives</h3>\n\n<p>The only way directives to create state on the fly is to extend the actual context object. The <code>x3::with&lt;&gt;</code> directive supports this, e.g. <a href=\"https://stackoverflow.com/questions/33624149/boost-spirit-x3-cannot-compile-repeat-directive-with-variable-factor\">Boost Spirit X3 cannot compile repeat directive with variable factor</a></p>\n\n<p>This can be used to pigeon-hole unlimited amounts of state, e.g. by just side-channel passing a (smart) pointer/reference to your parser state.</p>\n\n<h3>Custom Parsers</h3>\n\n<p>Custom parsers are a surprisingly simple way to get a lot of power in X3. See for an example:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/37669936/spirit-qi-how-can-i-write-a-nonterminal-parser\">Spirit-Qi: How can I write a nonterminal parser?</a></p>\n\n<p>I personally think custom parsers are more elegant than anything like the BOOST_SPIRIT_DECLARE/_DEFINE/_INSTANTIATE dance. I admit I've never created anything requiring multi-TU parsers in pure X3 yet (I tend to use X3 for small, independent parsers), but I intuitively prefer building my own TU-separation logic building from <code>x3::parser_base</code> over the \"blessed\" macros mentioned above. See also this discussion: <a href=\"http://boost.2283326.n4.nabble.com/Design-structure-X3-parser-more-like-Qi-parser-td4690205.html\" rel=\"nofollow noreferrer\">Design/structure X3 parser more like Qi parser</a></p>\n\n<h3>Error/success handling</h3>\n\n<p>The compiler tutorials show how to trigger handlers for specific rules using a marker base-class for the rule tag type. I've one day figured out the mechanics, but sadly I don't remember all the details and <a href=\"https://www.liveedu.tv/sehe/ZWroO-answering-boost-questions-daily/\" rel=\"nofollow noreferrer\">LiveCoding.tv</a> seems to have lost my live-stream on the topic.</p>\n\n<p>I encourage you to look at the compiler samples (they're in the source tree only).</p>\n\n<h1>Summarizing</h1>\n\n<p>I can see how you notice negative differences. It's important to realize that X3 is less mature, aims to be more light-weight, so some things are simply not implemented. Also note that X3 enables <em>many</em> things in more elegant ways than previously possible. The fact that most things interact more naturally with c++14  core language features is a big boon.</p>\n\n<p>If you want read more about what things disappoint me about X3, see the introductory discussion in <a href=\"https://stackoverflow.com/questions/33624149/boost-spirit-x3-cannot-compile-repeat-directive-with-variable-factor\">that linked answer</a>, some discussions in chat (like <a href=\"https://chat.stackoverflow.com/rooms/10/conversation/discussing-x3-advantages-vs-qi\">this one</a>).</p>\n\n<p>I hope my counter rant helps you in journey learning X3. I tried to substantiate as many things as I could, though I freely admit I sometimes still prefer Qi.</p>\n"}], "owner": {"reputation": 504, "user_id": 1778127, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3bb47dada671eb91ef01a7b9fdf6d254?s=128&d=identicon&r=PG", "display_name": "saki7", "link": "https://stackoverflow.com/users/1778127/saki7"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 804, "favorite_count": 0, "accepted_answer_id": 45469919, "answer_count": 1, "score": 0, "last_activity_date": 1541636199, "creation_date": 1501668635, "last_edit_date": 1502268046, "question_id": 45457868, "link": "https://stackoverflow.com/questions/45457868/statefulness-of-spirit-v2-and-x3", "title": "Statefulness of Spirit V2 and X3", "body": "<p>What is the intent of Spirit X3 being so much 'stateless'?</p>\n\n<h2>Bad aspects of 'states' in Spirit V2</h2>\n\n<p>Looking back to Spirit V2, the \"grammar\" was, say, conceptually stateful - in many ways. This is because the grammar was a class instance.</p>\n\n<p>Basically, there are lots of bad aspects for making your grammar -- or even any single rule -- to be stateful:</p>\n\n<ul>\n<li>It might make your grammar non-re-entrant;</li>\n<li>It might add thread-unsafety to your grammar instance;</li>\n<li>Self-managed 'flag' is a disaster.</li>\n</ul>\n\n<p>Theoretically speaking, adding an external state makes your grammar non-trivial.</p>\n\n<h2>Really need no state?</h2>\n\n<p>In contrast, you can say any parser is stateful (because it parses the current context and context is the state). Below is a good case of additional 'context' added by a programmer:</p>\n\n<pre><code>quoted_string_ = as_string [omit [char_(\"'\\\"\") [_a = _1]] &gt;&gt; *(char_ - lit(_a)) &gt;&gt; lit(_a)]\n</code></pre>\n\n<p><code>qi::locals</code> was a good sign of <strong>non</strong>-external states.</p>\n\n<p>There were also 'external states' which a programmer could add to his grammar, and they were just doing something wrong in most cases:</p>\n\n<pre><code>func_call_ = func_name_ &gt;&gt; lit('(') &gt;&gt; eps [ref(is_inside_function_call) = true] &gt;&gt; ...\n</code></pre>\n\n<p>But still, there were some corner cases where external states being useful.</p>\n\n<pre><code>macro_type_1_ =\n    lit(\"{{{\") [PUSH_STATE(macro_ctx, Macro::Type1)] &gt;&gt; (\n        ((any_expr_ - end_of_macro_ctx_) &gt;&gt; lit(\"}}}\") &gt;&gt; eps [POP_STATE(macro_ctx)]) |\n        (eps [POP_STATE(macro_ctx)] &gt;&gt; eps [_pass = false])\n    )\n;\nmacro_type_2_ =\n    lit(\"[[[\") [PUSH_STATE(macro_ctx, Macro::Type2)] &gt;&gt; (\n        ((any_expr_ - end_of_macro_ctx_) &gt;&gt; lit(\"]]]\") &gt;&gt; eps [POP_STATE(macro_ctx)]) |\n        (eps [POP_STATE(macro_ctx)] &gt;&gt; eps [_pass = false])\n    )\n;\n</code></pre>\n\n<p>Above is an example of some arbitrary context-sensitive language. Here I am adding a 'context stack' by emulating a 'destructor' for the sub rule. This might be a good case of using a special variant of Nabialec Trick where <code>end_of_macro_ctx_</code> being <code>qi::symbols</code> instance.</p>\n\n<p>(See <a href=\"https://stackoverflow.com/questions/17000897/boost-spirit-qi-dynamically-create-difference-parser-at-parse-time\">Boost.Spirit.Qi: dynamically create &quot;difference&quot; parser at parse time</a> for possible implementation detail)</p>\n\n<p>You can't use <code>qi::locals</code> here, because there are no guarantee for the lifetime of <code>qi::locals</code>. So you should use a global variable (i.e. member variable for your grammar class instance).</p>\n\n<p>Inherited attributes? Maybe. If you are willing to pass the same variable to every single rule.</p>\n\n<h2>External states for grammar itself</h2>\n\n<p>Speaking about external states, there are even more fundamental stuff which a programmer might want to add to his grammar.</p>\n\n<pre><code>on_error&lt;fail&gt;(root_, phx::bind(&amp;my_logger, &amp;MyLogger::error, _1, _2, _3, _4));\n</code></pre>\n\n<p>You can't do this anymore on X3.</p>\n\n<h2>Statelessness of X3</h2>\n\n<p>X3 is expecting an user to define his every single rule in namespace scope, with auto-consted instance.</p>\n\n<p>Okay, now let's take a look at the implementation of <code>BOOST_SPIRIT_DEFINE</code>. It is basically doing only one thing:</p>\n\n<blockquote>\n  <p>#define BOOST_SPIRIT_DEFINE(your_rule, &lt;unspecified&gt;) template &lt;unspecified&gt; &lt;unspecified&gt; parse_rule(decltype(your_rule), &lt;unspecified&gt;...) { &lt;unspecified&gt; }</p>\n</blockquote>\n\n<p>The first argument of <code>parse_rule()</code> is decltype-d to given rule's unique type.</p>\n\n<p>This means two things:</p>\n\n<ol>\n<li>X3 is fully relying on ADL call to <code>parse_rule()</code>.</li>\n<li><code>parse_rule()</code> must be defined in namespace scope.</li>\n</ol>\n\n<p>You can't specialize a template function for an instance.  There's no way of telling X3 to use any of my instance variables.</p>\n\n<p>I lied. You can do this if you want:</p>\n\n<pre><code>static inline MyLogger&amp; use_my_logger_please() {\n    static MyLogger instance; return instance;\n}\n</code></pre>\n\n<p>or</p>\n\n<pre><code>#define MY_BOOST_SPIRIT_DEFINE(my_rule, &lt;unspecified&gt;, my_logger_f) &lt;unspecified&gt;\nMY_BOOST_SPIRIT_DEFINE(rule_1_, ..., std::bind([] (MyLogger&amp; l, std::string const&amp; msg) { l &lt;&lt; msg; }, this-&gt;logger_instance_, std::placeholders::_1))\n</code></pre>\n\n<p>Really?</p>\n"}]