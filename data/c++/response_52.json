[{"tags": ["c++", "algorithm", "sorting"], "comments": [{"owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "edited": false, "score": 0, "creation_date": 1452124740, "post_id": 34644977, "comment_id": 57036072, "body": "What debugging steps have you taken?"}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1452126063, "post_id": 34644977, "comment_id": 57036420, "body": "At the very least, put in print statements to trace the execution and values of the routines.  I recommend the you search on line for &quot;How to debug a program&quot;.  You&#39;ll get plenty of useful hits."}], "answers": [{"tags": [], "owner": {"reputation": 870, "user_id": 2990008, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d415de9934a9ea720091b7961a2dbc3a?s=128&d=identicon&r=PG&f=1", "display_name": "m7mdbadawy", "link": "https://stackoverflow.com/users/2990008/m7mdbadawy"}, "is_accepted": true, "score": 1, "last_activity_date": 1452127015, "creation_date": 1452127015, "answer_id": 34645461, "question_id": 34644977, "link": "https://stackoverflow.com/questions/34644977/merge-sort-sorting-partially/34645461#34645461", "title": "merge sort sorting partially", "body": "<p>your problem is that is that these loops </p>\n\n<pre><code>while(i&lt;lc){\n    a[k++]=l[i++];\n}\nwhile(j&lt;rc){\n    a[k++]=r[j++];\n}\n</code></pre>\n\n<p>are inside this loop <code>while(i&lt;lc &amp;&amp; j&lt;rc)</code> and they should be outside it as you copy the rest of <code>a[]</code> if <code>b[]</code> is done while <code>a[]</code> has some elements and like wise for <code>b[]</code> and this is the whole merge function</p>\n\n<pre><code>void merge(int a[],int l[],int lc,int r[],int rc)\n{\n    int i,j,k;\n    i=0;\n    j=0;\n    k=0;\n    while(i&lt;lc &amp;&amp; j&lt;rc)\n    {\n        if(l[i]&lt;r[j])\n        {\n            a[k++]=l[i++];\n        }\n        else\n        {\n            a[k++]=r[j++];\n        }\n    }\n    while(i&lt;lc)\n    {\n        a[k++]=l[i++];\n    }\n    while(j&lt;rc)\n    {\n        a[k++]=r[j++];\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 37, "user_id": 5091537, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/6fb4f8f119705a70cd127f3242e7db77?s=128&d=identicon&r=PG&f=1", "display_name": "coder", "link": "https://stackoverflow.com/users/5091537/coder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "accepted_answer_id": 34645461, "answer_count": 1, "score": 1, "last_activity_date": 1452127015, "creation_date": 1452123859, "question_id": 34644977, "link": "https://stackoverflow.com/questions/34644977/merge-sort-sorting-partially", "title": "merge sort sorting partially", "body": "<p>for input 6,2,9,1,5,8 i'm getting 1,2,6,9,5,8.This algorithm is written based on <a href=\"https://gist.github.com/mycodeschool/9678029#file-mergesort_c-c-L28\" rel=\"nofollow\">https://gist.github.com/mycodeschool/9678029#file-mergesort_c-c-L28</a>\nplease help me in getting 1,2,5,6,8,9 as the output also point out the mistake here.Thanks in advance.</p>\n\n<pre><code>#include&lt;iostream&gt;\nusing namespace std;\n\nvoid merge(int a[],int l[],int lc,int r[],int rc){\n  int i,j,k;\n  i=0;j=0;k=0;\n  while(i&lt;lc &amp;&amp; j&lt;rc){\n        if(l[i]&lt;r[j]){\n          a[k++]=l[i++];\n      }\n      else{\n        a[k++]=r[j++];\n     }\n    while(i&lt;lc){\n        a[k++]=l[i++];\n    }\n    while(j&lt;rc){\n        a[k++]=r[j++];\n    }\n}\n}\n\nvoid mergesort(int a[],int n){\n  int mid;\n  if (n&lt;2){\n    return;\n }\n mid=n/2;\n int l[mid],r[n-mid];\n for(int i=0;i&lt;mid;i++){\n    l[i]=a[i];\n }\n for(int i=mid;i&lt;n;i++){\n    r[i-mid]=a[i];\n}\nmergesort(l,mid);\nmergesort(r,n-mid);\nmerge(a,l,mid,r,n-mid);\n}\n\nint main(){\nint a[]={6,2,9,1,5,8};\nint n=6;\nmergesort(a,n);\nfor(int i=0;i&lt;n;i++){\n    cout&lt;&lt;a[i]&lt;&lt;\" \";\n}\n}\n</code></pre>\n"}, {"tags": ["c++", "pointers"], "comments": [{"owner": {"reputation": 6559, "user_id": 4143855, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Gh4vC.jpg?s=128&g=1", "display_name": "Tas", "link": "https://stackoverflow.com/users/4143855/tas"}, "edited": false, "score": 1, "creation_date": 1452123654, "post_id": 34644913, "comment_id": 57035717, "body": "Useful reading: <a href=\"http://stackoverflow.com/questions/5727/what-are-the-barriers-to-understanding-pointers-and-what-can-be-done-to-overcome\" title=\"what are the barriers to understanding pointers and what can be done to overcome\">stackoverflow.com/questions/5727/&hellip;</a> and <a href=\"http://stackoverflow.com/questions/22146094/why-should-i-use-a-pointer-rather-than-the-object-itself\" title=\"why should i use a pointer rather than the object itself\">stackoverflow.com/questions/22146094/&hellip;</a>"}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 1, "creation_date": 1452123932, "post_id": 34644913, "comment_id": 57035822, "body": "(1) It becomes global. (2) A block starts with <code>{</code> and ends with <code>}</code>. (3) Undefined behaviour."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 1, "creation_date": 1452124022, "post_id": 34644913, "comment_id": 57035857, "body": "If <code>pi3</code> is not accessed, it may be eliminated, dropped, as a compiler optimization; regardless of where it is defined."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1452124195, "post_id": 34644913, "comment_id": 57035905, "body": "One question per question please"}], "answers": [{"tags": [], "owner": {"reputation": 22952, "user_id": 210211, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8721ff8fa4b5c658058f4a2803231f44?s=128&d=identicon&r=PG", "display_name": "comingstorm", "link": "https://stackoverflow.com/users/210211/comingstorm"}, "is_accepted": true, "score": 1, "last_activity_date": 1452124268, "creation_date": 1452124268, "answer_id": 34645057, "question_id": 34644913, "link": "https://stackoverflow.com/questions/34644913/some-questions-about-pointers-in-c-primer-5th-edition/34645057#34645057", "title": "Some questions about pointers in C++ Primer 5th Edition", "body": "<p>If you define a variable (like <code>pi3</code>) outside any blocks, it will be a global variable.</p>\n\n<p>In C++, a block delimits a static scope.  Any variables declared in the block are available only within that block; they will not be available outside of the block.</p>\n\n<p>An uninitialized variable will have an indeterminate value -- it could be anything!  In the case of a pointer, it could point anywhere...</p>\n\n<p>Stereotypically, the data in an uninitialized variable is \"whatever data happened to be written to that space beforehand, because we were too lazy to wipe it.\"  It turns out there is a reason for being that lazy:  if you define a large local variable (such as long array), automatically wiping the data could be a real performance hit.  So, the default is to leave it uninitialized.</p>\n"}], "owner": {"reputation": 8548, "user_id": 5581182, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/dc277bc00b89d827aba59b3e2509a6f4?s=128&d=identicon&r=PG&f=1", "display_name": "Thor", "link": "https://stackoverflow.com/users/5581182/thor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "accepted_answer_id": 34645057, "answer_count": 1, "score": -3, "last_activity_date": 1526401670, "creation_date": 1452123431, "last_edit_date": 1526401670, "question_id": 34644913, "link": "https://stackoverflow.com/questions/34644913/some-questions-about-pointers-in-c-primer-5th-edition", "title": "Some questions about pointers in C++ Primer 5th Edition", "body": "<p>I'm new to C++ and is trying to learn the concept of pointer. The example below is from <em>C++ Primer 5th Edition</em>. I have a few questions regarding to the statement:</p>\n\n<p>1) What happens if pi3 is defined OUTSIDE a block?</p>\n\n<p>2) What is a block in C++?</p>\n\n<p>3) What kind of behavior does the uninitialized pi3 exhibit? </p>\n\n<pre><code>int *pi3; // if pi3 is defined inside a block, pi3 is uninitialized\n</code></pre>\n"}, {"tags": ["c++", "multithreading", "c++11"], "answers": [{"comments": [{"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1452123889, "post_id": 34644796, "comment_id": 57035802, "body": "As a side note consider signaling the cv under the mutex for improved scheduling guarantees"}], "tags": [], "owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "is_accepted": true, "score": 2, "last_activity_date": 1452127717, "last_edit_date": 1452127717, "creation_date": 1452122799, "answer_id": 34644796, "question_id": 34644776, "link": "https://stackoverflow.com/questions/34644776/predicate-in-wait-only-called-once-when-using-notify-in-loop/34644796#34644796", "title": "Predicate in wait only called once when using notify in loop", "body": "<p>The signaling thread doesn't <em>wait</em> for the signal to have been received.</p>\n\n<p>This means that the waiting thread might not get a chance to wake up before the main loop repeated and incremented again.</p>\n\n<p>You have an \"ordinary\" race condition (though not a language level data race, so no UB).</p>\n\n<p>Here's a counter example. Depending on the speed and scheduling fancies of your platform, the following:</p>\n\n<p><strong><kbd><a href=\"http://coliru.stacked-crooked.com/a/250b78addb1834d7\" rel=\"nofollow\">Live On Coliru</a></kbd></strong></p>\n\n<pre><code>#include &lt;condition_variable&gt;\n#include &lt;iomanip&gt;\n#include &lt;iostream&gt;\n#include &lt;thread&gt;\n\nusing namespace std;\n\nint someNumber = 0;\nmutex numberMutex;\ncondition_variable cv;\n\nvoid waitFunction() {\n    unique_lock&lt;mutex&gt; lock(numberMutex);\n    auto duration = chrono::seconds(5);\n\n    // Predicate is only called once?\n    cv.wait_for(lock, duration, []() {\n        cout &lt;&lt; \"Checking condition: 10 == \" &lt;&lt; someNumber &lt;&lt; '\\n';\n        return someNumber == 10;\n    });\n    cout &lt;&lt; \"Done with this thread...\\n\" &lt;&lt; flush;\n}\n\nint main() {\n    thread waiter(waitFunction);\n\n    for (size_t number = 0; number != 50; ++number) {\n        this_thread::sleep_for(chrono::milliseconds(1));\n        {\n            lock_guard&lt;mutex&gt; guard(numberMutex);\n            someNumber = number;\n            std::cout &lt;&lt; \"notif: \" &lt;&lt; number  &lt;&lt; \"\\n\";\n            cv.notify_one();\n        }\n    }\n\n    waiter.join();\n}\n</code></pre>\n\n<p>Might prints something like:</p>\n\n<pre><code>Checking condition: 10 == 0\nnotif: 0\nChecking condition: 10 == 0\nnotif: 1\nChecking condition: 10 == 1\nnotif: 2\nChecking condition: 10 == 2\nnotif: 3\nChecking condition: 10 == 3\nnotif: 4\nChecking condition: 10 == 4\nnotif: 5\nChecking condition: 10 == 5\nnotif: 6\nChecking condition: 10 == 6\nnotif: 7\nChecking condition: 10 == 7\nnotif: 8\nChecking condition: 10 == 8\nnotif: 9\nChecking condition: 10 == 9\nnotif: 10\nChecking condition: 10 == 10\nDone with this thread...\nnotif: 11\nnotif: 12\nnotif: 13\nnotif: 14\nnotif: 15\nnotif: 16\nnotif: 17\nnotif: 18\nnotif: 19\nnotif: 20\nnotif: 21\nnotif: 22\nnotif: 23\nnotif: 24\nnotif: 25\nnotif: 26\nnotif: 27\nnotif: 28\nnotif: 29\nnotif: 30\nnotif: 31\nnotif: 32\nnotif: 33\nnotif: 34\nnotif: 35\nnotif: 36\nnotif: 37\nnotif: 38\nnotif: 39\nnotif: 40\nnotif: 41\nnotif: 42\nnotif: 43\nnotif: 44\nnotif: 45\nnotif: 46\nnotif: 47\nnotif: 48\nnotif: 49\n</code></pre>\n\n<h2>RATIONALE</h2>\n\n<p>If you need two-way communication, set a flag to signal the main thread back (e.g. use a different condition variable)</p>\n"}], "owner": {"reputation": 20914, "user_id": 176603, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e3b972264f90c90683288bd15a48d768?s=128&d=identicon&r=PG", "display_name": "Harmen", "link": "https://stackoverflow.com/users/176603/harmen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 293, "favorite_count": 0, "accepted_answer_id": 34644796, "answer_count": 1, "score": 1, "last_activity_date": 1452127717, "creation_date": 1452122700, "question_id": 34644776, "link": "https://stackoverflow.com/questions/34644776/predicate-in-wait-only-called-once-when-using-notify-in-loop", "title": "Predicate in wait only called once when using notify in loop", "body": "<p>When calling the <code>notify_once</code> method on a condition variable within a loop in one thread, it appears that the <code>wait</code> method in another thread only checks it predicate once. Example code is listed below:</p>\n\n<pre><code>int someNumber = 0;\nmutex numberMutex;\ncondition_variable cv;\n\nvoid waitFunction()\n{\n  unique_lock&lt;mutex&gt; lock(numberMutex);\n  auto duration = chrono::seconds(5);\n\n  // Predicate is only called once?\n  cv.wait_for(lock, duration, []() {\n    cout &lt;&lt; \"Checking condition: 10 == \" &lt;&lt; someNumber &lt;&lt; '\\n';\n    return someNumber == 10;\n  });\n  cout &lt;&lt; \"Done with this thread...\\n\" &lt;&lt; flush;\n}\n\nint main()\n{\n  thread waiter(waitFunction);\n\n  for (size_t number = 0; number != 50; ++number)\n  {\n    {\n      lock_guard&lt;mutex&gt; guard(numberMutex);\n      someNumber = number;\n    }\n    cv.notify_one();\n  }\n\n  waiter.join();\n}\n</code></pre>\n\n<p>Executing this program gives the following output</p>\n\n<pre><code>Checking condition: 10 == 49\nChecking condition: 10 == 49\nDone with this thread...\n</code></pre>\n\n<p>while I would expect it to check the condition at each iteration.</p>\n\n<p>How is this possible?</p>\n"}, {"tags": ["c++", "algorithm", "sorting", "c++11", "forward-list"], "answers": [{"comments": [{"owner": {"reputation": 675, "user_id": 5403884, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/c0e791ca8309d72ee75631760b0cf0c2?s=128&d=identicon&r=PG&f=1", "display_name": "Couim", "link": "https://stackoverflow.com/users/5403884/couim"}, "edited": false, "score": 0, "creation_date": 1452154543, "post_id": 34645102, "comment_id": 57045622, "body": "Thanks for your answer ! I will try this but I thnink it&#39;s will work well"}], "tags": [], "owner": {"reputation": 17343, "user_id": 445976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c82b2b9bdcf1baaf4677238d59cf745f?s=128&d=identicon&r=PG", "display_name": "Blastfurnace", "link": "https://stackoverflow.com/users/445976/blastfurnace"}, "is_accepted": false, "score": 7, "last_activity_date": 1452124599, "creation_date": 1452124599, "answer_id": 34645102, "question_id": 34644767, "link": "https://stackoverflow.com/questions/34644767/algorithm-forward-list-is-sorted/34645102#34645102", "title": "Algorithm forward_list is sorted?", "body": "<p>Your code will fail if the iterator reaches the <em>last element</em> in the list. When that happens <code>std::next(it)</code> is equal to <code>list.end()</code> and it's an error to dereference an <code>end()</code> iterator (causing a segfault in this case).</p>\n\n<p>My suggestion is to use the <a href=\"http://en.cppreference.com/w/cpp/algorithm/is_sorted\"><code>std::is_sorted</code></a> algorithm in the standard library. It's already written, debugged, and does what you want.</p>\n\n<pre><code>template&lt;class T&gt;\nbool estTriee(const std::forward_list&lt;T&gt;&amp; list) {\n    return std::is_sorted(list.begin(), list.end());\n}\n</code></pre>\n"}], "owner": {"reputation": 675, "user_id": 5403884, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/c0e791ca8309d72ee75631760b0cf0c2?s=128&d=identicon&r=PG&f=1", "display_name": "Couim", "link": "https://stackoverflow.com/users/5403884/couim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 491, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1452127171, "creation_date": 1452122662, "last_edit_date": 1452127171, "question_id": 34644767, "link": "https://stackoverflow.com/questions/34644767/algorithm-forward-list-is-sorted", "title": "Algorithm forward_list is sorted?", "body": "<p>I have some difficulties in C++11. I would like to create function <code>isSorted</code> which return true if my <code>std::forward_list</code> is sorted, and false if not.</p>\n\n<p>I have imagined code like this: </p>\n\n<pre><code>template&lt;class T&gt;\nbool estTriee(forward_list&lt;T&gt;&amp; list) {\n        typename forward_list&lt;T&gt;::iterator it;\n        it = list.begin();\n\n        while(it != list.end() &amp;&amp;  *it &lt;= *next(it, 1)) {\n            it++;\n        }\n\n        return it == list.end();\n}\n</code></pre>\n\n<p>But gcc return me a segmentation fault surrounding the while line.</p>\n"}, {"tags": ["c++", "arrays", "string", "multidimensional-array", "int"], "comments": [{"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 3, "creation_date": 1452122517, "post_id": 34644718, "comment_id": 57035307, "body": "Smells a lot like XY problem. What is the underlying problem you want to solve? Why can&#39;t you for instance use two distinct arrays?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user5504719"}, "reply_to_user": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 0, "creation_date": 1452122917, "post_id": 34644718, "comment_id": 57035454, "body": "Well, I have to make a 4x4 table. The first two columns will contain names and the last two will contain age numbers."}, {"owner": {"reputation": 4652, "user_id": 2189128, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/P19VP.jpg?s=128&g=1", "display_name": "Jeff Hammond", "link": "https://stackoverflow.com/users/2189128/jeff-hammond"}, "edited": false, "score": 1, "creation_date": 1452124687, "post_id": 34644718, "comment_id": 57036056, "body": "Consider using a struct instead of a vector to represent your columns."}], "answers": [{"tags": [], "owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "is_accepted": true, "score": 3, "last_activity_date": 1452122714, "creation_date": 1452122714, "answer_id": 34644778, "question_id": 34644718, "link": "https://stackoverflow.com/questions/34644718/c-two-dimensional-array-containing-string-and-int/34644778#34644778", "title": "C++ two dimensional array containing string and int", "body": "<p>This sounds like you probably want an array (or vector) of structures, where each structure contains a string and an int:</p>\n\n<pre><code>struct person {\n    int age;\n    std::string name;\n};\n\nstd::vector&lt;person&gt; people(2);\n</code></pre>\n\n<p>In this case, you refer to the \"rows\" by number, and the \"columns\" by name, so the first string would be: <code>people[0].name</code> and the second integer would be <code>people[1].age</code>.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user5504719"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5974, "favorite_count": 0, "accepted_answer_id": 34644778, "answer_count": 1, "score": 0, "last_activity_date": 1452130016, "creation_date": 1452122427, "question_id": 34644718, "link": "https://stackoverflow.com/questions/34644718/c-two-dimensional-array-containing-string-and-int", "title": "C++ two dimensional array containing string and int", "body": "<p>I have to make a table with a two dimensional array in c++. The array will need to hold two strings and two integers. \nIs it possible to have strings and integers in the same array? And how? </p>\n\n<p>Please help ! I`m new to programming </p>\n"}, {"tags": ["c++", "pointers", "c++11", "shared-ptr", "wordnet"], "answers": [{"tags": [], "owner": {"reputation": 12642, "user_id": 499699, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/kbSI9.jpg?s=128&g=1", "display_name": "&#198;lex", "link": "https://stackoverflow.com/users/499699/%c3%86lex"}, "is_accepted": false, "score": 1, "last_activity_date": 1452195293, "creation_date": 1452195293, "answer_id": 34663656, "question_id": 34644634, "link": "https://stackoverflow.com/questions/34644634/stopping-stdshared-ptr-wrappers-of-c-pointers-from-sigsev-due-to-multiple-free/34663656#34663656", "title": "stopping std::shared_ptr wrappers of C pointers from SIGSEV due to multiple frees", "body": "<p>Well, after searching quite a bit, I found the solution using struct functors and lambdas. Granted its not pretty (in fact its quite ugly) but seems to work:</p>\n\n<pre><code>struct sense_del\n{\n    void operator()(Synset *ptr)\n    {\n        if (ptr)\n            free_syns(ptr);\n    }\n};\n\nstruct trace_del\n{\n    void operator()(Synset *ptr)\n    {\n        if (ptr)\n            free_synset(ptr);\n    }\n};\n\nstd::shared_ptr&lt;Synset&gt;\nshared_findtheinfo_ds(std::string key, int gram_type, int ptr_type, int sense_num)\n{\n    wn_init_once();\n    std::shared_ptr&lt;Synset&gt; sp(findtheinfo_ds(const_cast&lt;char*&gt;(key.c_str()), gram_type, ptr_type, sense_num),\n                               [](Synset * ptr){sense_del()(ptr);});\n    return sp;\n}\n\nstd::shared_ptr&lt;Synset&gt; \nshared_traceptrs_ds(SynsetPtr synptr, int ptr_type, int gram_type, int depth)\n{\n    assert(synptr);\n    std::shared_ptr&lt;Synset&gt; sp(traceptrs_ds(synptr, ptr_type, gram_type, depth),\n                              [](Synset *ptr){trace_del()(ptr);});\n    return sp;\n}\n</code></pre>\n\n<p>FYI, for anyone working on Wordnet, the correct way of iteration for Hypernyms is this:</p>\n\n<pre><code>if (auto ss_ptr = findtheinfo_ds(const_cast&lt;char*&gt;(key.c_str()), lexical, HYPERPTR, ALLSENSES))\n{\n    while(ss_ptr)\n    {\n        if (SynsetPtr trc_ptr = traceptrs_ds(ss_ptr, HYPERPTR, lexical, 1))\n        {\n            do_smth_with_it(trc_ptr);\n            free_syns(trc_ptr);\n        }\n        // get next sense \n        ss_ptr = ss_ptr-&gt;nextss;\n    }\n    free_syns(ss_ptr);\n}\n</code></pre>\n"}], "owner": {"reputation": 12642, "user_id": 499699, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/kbSI9.jpg?s=128&g=1", "display_name": "&#198;lex", "link": "https://stackoverflow.com/users/499699/%c3%86lex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 123, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1452195319, "creation_date": 1452121975, "last_edit_date": 1592644375, "question_id": 34644634, "link": "https://stackoverflow.com/questions/34644634/stopping-stdshared-ptr-wrappers-of-c-pointers-from-sigsev-due-to-multiple-free", "title": "stopping std::shared_ptr wrappers of C pointers from SIGSEV due to multiple frees", "body": "<p>This question relates to a <a href=\"https://stackoverflow.com/questions/21745260/wrapping-around-old-c-structures-with-smart-pointers-in-c11-and-auto-freeing-t\">previous question</a> I asked a year ago.\nI am using WordNet 3.0 which was written a long time ago in C (circa 1996 I think).</p>\n<p>In order to try and stay away from memory management, I asked how I could wrap <code>std::shared_ptr</code> around the old <code>struct Synset</code> used by WordNet.</p>\n<p>A <a href=\"https://wordnet.princeton.edu/man/wnsearch.3WN.html\" rel=\"nofollow noreferrer\">reference table</a> shows the WordNet-3.0 functions, and inspection of <a href=\"https://code.google.com/p/wordnet2vs2008/source/browse/trunk/include/wn.h\" rel=\"nofollow noreferrer\">the actual header</a> shows that the <code>SynsetPtr</code>,\nwhich functions <code>traceptrs_ds</code> and <code>findtheinfo_ds</code> return, are  pointers to <code>ss</code> or <code>Synset</code>.</p>\n<p>In my <a href=\"https://stackoverflow.com/questions/21745260/wrapping-around-old-c-structures-with-smart-pointers-in-c11-and-auto-freeing-t\">previous question</a> I chose to remove the pointer,\nand then wrap it around a <code>shared_ptr</code> like so:</p>\n<pre><code>std::shared_ptr&lt;std::remove_pointer&lt;SynsetPtr&gt;::type&gt;\n               (findtheinfo_ds(searchstr, pos, ptr_type, sense_num),\n                free_syns);\n\nstd::shared_ptr&lt;std::remove_pointer&lt;SynsetPtr&gt;::type&gt;\n               (traceptrs_ds(synptr, ptr_type, pos, depth),\n                free_synset);\n</code></pre>\n<p>I have two loops, one which iterates <code>senses</code> by following the <code>nextss</code>, and one which traverses a tree list by calling <code>traceptrs_ds</code>.\nThose are the two loops (oversimplified):</p>\n<pre><code>std::shared_ptr&lt;Synset&gt; synsets;\nsynsets = std::shared_ptr&lt;std::remove_pointer&lt;SynsetPtr&gt;::type&gt;\n          (findtheinfo_ds(const_cast&lt;char*&gt;(key.c_str()), lexical, HYPERPTR, ALLSENSES),free_syns);\nif (synsets)\n{\n    std::shared_ptr&lt;Synset&gt; sense_ptr = synsets;\n    while(sense_ptr)\n    {\n        graph g = graph();\n        iterate(sense_ptr, nullptr, g, 0, lexical);\n        sense_ptr = std::shared_ptr&lt;std::remove_pointer&lt;SynsetPtr&gt;::type&gt;(sense_ptr-&gt;nextss);\n    }\n}\n\niterate(\n          std::shared_ptr&lt;Synset&gt; ptr,\n          std::shared_ptr&lt;layer&gt; last,\n          graph &amp; rhs,\n          int i,\n          int lexical\n       )\n{\n    while (ptr)\n    {\n        i++;\n        ptr  = std::shared_ptr&lt;std::remove_pointer&lt;SynsetPtr&gt;::type&gt;\n               (traceptrs_ds(ptr.get(), HYPERPTR, lexical, 1), free_synset);\n    }\n}\n</code></pre>\n<p>From what I understand (feel free to correct me) many <code>std::shared_ptr</code> are wrapping around the same memory,\nand when their destructor is called, they try to free the same memory.</p>\n<h3>How can I prevent this from happening?</h3>\n<p>I know that <code>findtheinfo_ds</code> returns a linked list, and that each call to <code>traceptrs_ds</code> appears to iterate that list.\nI image that the best approach would be to wrap only one <code>std::shared_ptr</code> which is going to call the <code>Synset</code> destructor <code>free_synset</code>, instead of doing it many times.</p>\n<h3>How can I stop this from happening?</h3>\n<p>Assuming there is no solution to prevent this from happening,\nhow can the destructors of the many <code>std::shared_ptr</code> that map to the same area, only free once?\nI guess this is a bad/ugly way, but it may be easier?</p>\n<p>The <code>valgrind</code> output:</p>\n<pre><code>==3066== Invalid read of size 8\n==3066==    at 0x52C3B4C: free_synset (in /usr/lib/libwordnet-3.0.so)\n==3066==    by 0x4E6E2D9: std::_Sp_counted_deleter&lt;ss*, void (*)(ss*), std::allocator&lt;void&gt;, (__gnu_cxx::_Lock_policy)2&gt;::_M_dispose() (shared_ptr_base.h:463)\n==3066==    by 0x403C5F: std::_Sp_counted_base&lt;(__gnu_cxx::_Lock_policy)2&gt;::_M_release() (shared_ptr_base.h:149)\n==3066==    by 0x403AD8: std::__shared_count&lt;(__gnu_cxx::_Lock_policy)2&gt;::~__shared_count() (shared_ptr_base.h:666)\n==3066==    by 0x4E61DB7: std::__shared_ptr&lt;ss, (__gnu_cxx::_Lock_policy)2&gt;::~__shared_ptr() (shared_ptr_base.h:914)\n==3066==    by 0x4E61DD1: std::shared_ptr&lt;ss&gt;::~shared_ptr() (shared_ptr.h:93)\n==3066==    by 0x4E6161A: smnet::hyper_handler::operator()(std::string, int) (hyper_handler.cpp:22)\n==3066==    by 0x4036D6: main (hypernym.cpp:16)\n==3066==  Address 0x10 is not stack'd, malloc'd or (recently) free'd\n\n==3066== Process terminating with default action of signal 11 (SIGSEGV)\n==3066==  Access not within mapped region at address 0x10\n==3066==    at 0x52C3B4C: free_synset (in /usr/lib/libwordnet-3.0.so)\n==3066==    by 0x4E6E2D9: std::_Sp_counted_deleter&lt;ss*, void (*)(ss*), std::allocator&lt;void&gt;, (__gnu_cxx::_Lock_policy)2&gt;::_M_dispose() (shared_ptr_base.h:463)\n==3066==    by 0x403C5F: std::_Sp_counted_base&lt;(__gnu_cxx::_Lock_policy)2&gt;::_M_release() (shared_ptr_base.h:149)\n==3066==    by 0x403AD8: std::__shared_count&lt;(__gnu_cxx::_Lock_policy)2&gt;::~__shared_count() (shared_ptr_base.h:666)\n==3066==    by 0x4E61DB7: std::__shared_ptr&lt;ss, (__gnu_cxx::_Lock_policy)2&gt;::~__shared_ptr() (shared_ptr_base.h:914)\n==3066==    by 0x4E61DD1: std::shared_ptr&lt;ss&gt;::~shared_ptr() (shared_ptr.h:93)\n==3066==    by 0x4E6161A: smnet::hyper_handler::operator()(std::string, int) (hyper_handler.cpp:22)\n==3066==    by 0x4036D6: main (hypernym.cpp:16)\n\n==3066== LEAK SUMMARY:\n==3066==    definitely lost: 0 bytes in 0 blocks\n==3066==    indirectly lost: 0 bytes in 0 blocks\n==3066==      possibly lost: 251 bytes in 8 blocks\n==3066==    still reachable: 19,964 bytes in 90 blocks\n==3066==         suppressed: 0 bytes in 0 blocks\n==3066== Reachable blocks (those to which a pointer was found) are not shown.\n==3066== To see them, rerun with: --leak-check=full --show-leak-kinds=all\n==3066== \n==3066== For counts of detected and suppressed errors, rerun with: -v\n==3066== ERROR SUMMARY: 3 errors from 3 contexts (suppressed: 0 from 0)\nfish: \u201cvalgrind --leak-check=full ./hy\u2026\u201d terminated by signal SIGSEGV (Address boundary error)\n</code></pre>\n"}, {"tags": ["c++", "linux", "gcc"], "comments": [{"owner": {"reputation": 568, "user_id": 4157408, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a44b6a712c8ad167e7331cef927d46a2?s=128&d=identicon&r=PG&f=1", "display_name": "void_ptr", "link": "https://stackoverflow.com/users/4157408/void-ptr"}, "edited": false, "score": 5, "creation_date": 1452122008, "post_id": 34644606, "comment_id": 57035109, "body": "Do you mean target platform or the platform you compile on? If it is the former, the difference is probably due to x87 vs SSE2."}, {"owner": {"reputation": 321, "user_id": 5754655, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f1a1870702b51408dfc9f714851f95e?s=128&d=identicon&r=PG&f=1", "display_name": "psalong", "link": "https://stackoverflow.com/users/5754655/psalong"}, "reply_to_user": {"reputation": 568, "user_id": 4157408, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a44b6a712c8ad167e7331cef927d46a2?s=128&d=identicon&r=PG&f=1", "display_name": "void_ptr", "link": "https://stackoverflow.com/users/4157408/void-ptr"}, "edited": false, "score": 0, "creation_date": 1452148626, "post_id": 34644606, "comment_id": 57042998, "body": "i mean the platform i used for compiling."}], "answers": [{"comments": [{"owner": {"reputation": 321, "user_id": 5754655, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f1a1870702b51408dfc9f714851f95e?s=128&d=identicon&r=PG&f=1", "display_name": "psalong", "link": "https://stackoverflow.com/users/5754655/psalong"}, "edited": false, "score": 0, "creation_date": 1452148788, "post_id": 34645109, "comment_id": 57043062, "body": "Thanks, with -ffloat-store option i get the result as 1."}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1452185666, "post_id": 34645109, "comment_id": 57066934, "body": "IEEE754 floating-point is mathematically accurate for +-/* and <code>sqrt</code>. However, it&#39;s not identical to infinite-precision math. There&#39;s just no way <code>1&#47;21</code> is going to fit in 64 bits FP, or 640K bits for that matter."}], "tags": [], "owner": {"reputation": 100768, "user_id": 1899640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47374ccb28e4b0d2454b64f7b975bc66?s=128&d=identicon&r=PG", "display_name": "that other guy", "link": "https://stackoverflow.com/users/1899640/that-other-guy"}, "is_accepted": true, "score": 4, "last_activity_date": 1452124625, "creation_date": 1452124625, "answer_id": 34645109, "question_id": 34644606, "link": "https://stackoverflow.com/questions/34644606/gcc-compiles-program-differently-in-32-bit-machine/34645109#34645109", "title": "GCC compiles program differently in 32-bit machine", "body": "<p>I can reproduce the problem on 64-bit Ubuntu 14.04 with gcc 4.8.4:</p>\n\n<pre><code>$ g++ -m32 main.c -o main &amp;&amp; ./main\n0\n\n$ g++ -m64 main.c -o main &amp;&amp; ./main\n1\n</code></pre>\n\n<p>I believe @void_ptr is right. \nIt's caused by x87 using 80bit math internally, while SSE2 uses 64bit. </p>\n\n<p>This is what happens if you compile the 32bit executable with <code>-ffloat-store</code> to force 64bit floating point precision:</p>\n\n<pre><code>$ g++ -m32 -ffloat-store main.c -o main &amp;&amp; ./main \n1\n</code></pre>\n\n<p>Here's what <code>man gcc</code> says about the issue:</p>\n\n<pre><code>   -ffloat-store\n       Do not store floating-point variables in registers, and inhibit\n       other options that might change whether a floating-point value is\n       taken from a register or memory.\n\n       This option prevents undesirable excess precision on machines such\n       as the 68000 where the floating registers (of the 68881) keep more\n       precision than a \"double\" is supposed to have.  Similarly for the\n       x86 architecture.  For most programs, the excess precision does\n       only good, but a few programs rely on the precise definition of\n       IEEE floating point.  Use -ffloat-store for such programs, after\n       modifying them to store all pertinent intermediate computations\n       into variables.\n</code></pre>\n\n<p>In any case, <a href=\"http://floating-point-gui.de/\" rel=\"nofollow\">never rely on floating point being mathematically accurate</a>. </p>\n"}], "owner": {"reputation": 321, "user_id": 5754655, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f1a1870702b51408dfc9f714851f95e?s=128&d=identicon&r=PG&f=1", "display_name": "psalong", "link": "https://stackoverflow.com/users/5754655/psalong"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1240, "favorite_count": 1, "accepted_answer_id": 34645109, "answer_count": 1, "score": 2, "last_activity_date": 1452124625, "creation_date": 1452121853, "question_id": 34644606, "link": "https://stackoverflow.com/questions/34644606/gcc-compiles-program-differently-in-32-bit-machine", "title": "GCC compiles program differently in 32-bit machine", "body": "<p>I run into a situation that same program compiled on 32-bit machine gives different result than compiling it on 64-bit machine. Piece of code is like this</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nint main(int argc, char *argv[])\n{\n  int index = 1;\n  int total = 21;\n  int min = 79;\n  int max = 100;\n\n  double coef = index / (double)total;\n  int ret1 = coef * (max - min);\n  std::cout &lt;&lt; ret1 &lt;&lt; \"\\n\";\n\n  return 0;\n} \n</code></pre>\n\n<p>I would expect a result as 1, but on 32-bit Linux I get the result 0. Probably the result of coef * (max - min) is 0.9999999... and assigned to int leads to 0. Two friends tried the same code on 64-bit machine and they got the result as 1. Why does it give the result 0 on 32-bit? May it be related to virtual machine?\nTest environment on my machine:</p>\n\n<ul>\n<li>32-bit Linux Mint 17.2 run on VMWare 6.0.7</li>\n<li>gcc 4.8.4 </li>\n<li>command used to build: g++ main.cpp -o main</li>\n</ul>\n"}, {"tags": ["c++", "opengl", "glut"], "answers": [{"comments": [{"owner": {"reputation": 1065, "user_id": 3127568, "user_type": "registered", "accept_rate": 87, "profile_image": "https://graph.facebook.com/100001673191052/picture?type=large", "display_name": "Andr&#233; Silva", "link": "https://stackoverflow.com/users/3127568/andr%c3%a9-silva"}, "edited": false, "score": 0, "creation_date": 1452123405, "post_id": 34644855, "comment_id": 57035627, "body": "I&#39;m facepalming with my both hands and I fear I might have hurt myself during the process."}, {"owner": {"reputation": 47449, "user_id": 44729, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tyWaU.png?s=128&g=1", "display_name": "genpfault", "link": "https://stackoverflow.com/users/44729/genpfault"}, "reply_to_user": {"reputation": 1065, "user_id": 3127568, "user_type": "registered", "accept_rate": 87, "profile_image": "https://graph.facebook.com/100001673191052/picture?type=large", "display_name": "Andr&#233; Silva", "link": "https://stackoverflow.com/users/3127568/andr%c3%a9-silva"}, "edited": false, "score": 0, "creation_date": 1452177305, "post_id": 34644855, "comment_id": 57060790, "body": "@Andr&#233;Silva: Eh, don&#39;t feel too bad, GLUT isn&#39;t exactly a paragon of API design :)"}], "tags": [], "owner": {"reputation": 47449, "user_id": 44729, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tyWaU.png?s=128&g=1", "display_name": "genpfault", "link": "https://stackoverflow.com/users/44729/genpfault"}, "is_accepted": true, "score": 1, "last_activity_date": 1452123124, "creation_date": 1452123124, "answer_id": 34644855, "question_id": 34644602, "link": "https://stackoverflow.com/questions/34644602/opengl-glut-updating-several-windows/34644855#34644855", "title": "OpenGL/GLUT - Updating several windows", "body": "<blockquote>\n  <p><a href=\"https://www.opengl.org/documentation/specs/glut/spec3/node20.html\" rel=\"nofollow\">4.5 <code>glutPostRedisplay</code></a></p>\n  \n  <p><code>glutPostRedisplay</code> marks the <strong><em>current window</em></strong> as needing to be redisplayed. </p>\n</blockquote>\n\n<p>\"Current window\" eh?  I wonder if...</p>\n\n<blockquote>\n  <p><a href=\"https://www.opengl.org/documentation/specs/glut/spec3/node18.html\" rel=\"nofollow\">4.3 <code>glutSetWindow</code>, <code>glutGetWindow</code></a></p>\n  \n  <p><code>glutSetWindow</code> sets the current window; <code>glutGetWindow</code> returns the identifier of the current window. </p>\n</blockquote>\n\n<pre><code>foreach( int window : windows )\n{\n    glutSetWindow( window );\n    glutPostRedisplay();\n}\n</code></pre>\n"}], "owner": {"reputation": 1065, "user_id": 3127568, "user_type": "registered", "accept_rate": 87, "profile_image": "https://graph.facebook.com/100001673191052/picture?type=large", "display_name": "Andr&#233; Silva", "link": "https://stackoverflow.com/users/3127568/andr%c3%a9-silva"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 121, "favorite_count": 0, "accepted_answer_id": 34644855, "answer_count": 1, "score": 1, "last_activity_date": 1452123124, "creation_date": 1452121819, "question_id": 34644602, "link": "https://stackoverflow.com/questions/34644602/opengl-glut-updating-several-windows", "title": "OpenGL/GLUT - Updating several windows", "body": "<p>So, I'm creating a game where I have two different windows which have different display functions. What I'm wondering is if it's possible to update two windows simultaneously. Let's say for one window, I implicitly call <code>glutPostRedisplay()</code> to force an update. This will only cause an update on the current window. Yet, I wanted to update both of them.</p>\n\n<p>Is this even possible? I've been searching for quite a long time and didn't seem to some to a definitive answer.</p>\n\n<p>Thanks. </p>\n"}, {"tags": ["c++", "c++11"], "comments": [{"owner": {"reputation": 18300, "user_id": 212870, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51619fe88436dc413b2c6e9498835646?s=128&d=identicon&r=PG", "display_name": "Alan Stokes", "link": "https://stackoverflow.com/users/212870/alan-stokes"}, "edited": false, "score": 2, "creation_date": 1452121000, "post_id": 34644351, "comment_id": 57034700, "body": "You could overload instead of specialising. (See eg <a href=\"http://stackoverflow.com/questions/7108033/template-specialization-vs-function-overloading\" title=\"template specialization vs function overloading\">stackoverflow.com/questions/7108033/&hellip;</a>)"}], "answers": [{"comments": [{"owner": {"reputation": 21714, "user_id": 1392132, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QF6FZ.jpg?s=128&g=1", "display_name": "5gon12eder", "link": "https://stackoverflow.com/users/1392132/5gon12eder"}, "edited": false, "score": 0, "creation_date": 1452120944, "post_id": 34644409, "comment_id": 57034681, "body": "While this might get rid of the compiler error, the specialization is pretty useless now."}, {"owner": {"reputation": 38854, "user_id": 2352671, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/kd1xb.jpg?s=128&g=1", "display_name": "101010", "link": "https://stackoverflow.com/users/2352671/101010"}, "reply_to_user": {"reputation": 21714, "user_id": 1392132, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QF6FZ.jpg?s=128&g=1", "display_name": "5gon12eder", "link": "https://stackoverflow.com/users/1392132/5gon12eder"}, "edited": false, "score": 0, "creation_date": 1452121077, "post_id": 34644409, "comment_id": 57034735, "body": "@5gon12eder why is that?"}, {"owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "reply_to_user": {"reputation": 21714, "user_id": 1392132, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QF6FZ.jpg?s=128&g=1", "display_name": "5gon12eder", "link": "https://stackoverflow.com/users/1392132/5gon12eder"}, "edited": false, "score": 0, "creation_date": 1452121108, "post_id": 34644409, "comment_id": 57034753, "body": "@5gon12eder If you want the specialization to have a different return type, you can write a trait for the return type and specialize the trait."}, {"owner": {"reputation": 21714, "user_id": 1392132, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QF6FZ.jpg?s=128&g=1", "display_name": "5gon12eder", "link": "https://stackoverflow.com/users/1392132/5gon12eder"}, "edited": false, "score": 0, "creation_date": 1452121981, "post_id": 34644409, "comment_id": 57035099, "body": "Would you get any different behavior if you&#39;d simply delete the specialization? (Talking about your first example.) I think that the idea was to avoid narrowing <code>double</code>s to <code>float</code>."}], "tags": [], "owner": {"reputation": 38854, "user_id": 2352671, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/kd1xb.jpg?s=128&g=1", "display_name": "101010", "link": "https://stackoverflow.com/users/2352671/101010"}, "is_accepted": false, "score": 7, "last_activity_date": 1452121227, "last_edit_date": 1452121227, "creation_date": 1452120824, "answer_id": 34644409, "question_id": 34644351, "link": "https://stackoverflow.com/questions/34644351/template-specialization-fails-because-of-unknown-template-definition/34644409#34644409", "title": "Template specialization fails because of unknown template definition", "body": "<p>return type at specialization and primary template must match:</p>\n\n<pre><code>template&lt;class T&gt;\nfloat hz_to_nsec(const T &amp;freq) {\n    return freq != 0 ? static_cast&lt;float&gt;(NSEC_PER_SEC) / freq : 0;\n}\n\ntemplate &lt;&gt;\nfloat hz_to_nsec&lt;double&gt;(const double &amp;freq) {\n^^^^^\n    return freq != 0 ? static_cast&lt;float&gt;(NSEC_PER_SEC) / freq : 0;\n                                   ^^^^^\n}\n</code></pre>\n\n<p>Alternately, you could provide an overload instead of a template specialization:</p>\n\n<pre><code>template&lt;class T&gt;\nfloat hz_to_nsec(const T &amp;freq) {\n    return freq != 0 ? static_cast&lt;float&gt;(NSEC_PER_SEC) / freq : 0;\n}\n\ndouble hz_to_nsec(const double &amp;freq) {\n    return freq != 0 ? static_cast&lt;double&gt;(NSEC_PER_SEC) / freq : 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 5, "last_activity_date": 1452121098, "last_edit_date": 1495540457, "creation_date": 1452121098, "answer_id": 34644479, "question_id": 34644351, "link": "https://stackoverflow.com/questions/34644351/template-specialization-fails-because-of-unknown-template-definition/34644479#34644479", "title": "Template specialization fails because of unknown template definition", "body": "<p>The <a href=\"https://stackoverflow.com/a/34644409/434551\">answer by @101010</a> addresses your template error. However, you don't need the second function to be a template specialization. It can simply be an overload.</p>\n\n<pre><code>// template &lt;&gt;\n// No need to use template specialization.\n// Just use an overload.\ndouble hz_to_nsec(double freq) {\n    return freq != 0 ? static_cast&lt;double&gt;(NSEC_PER_SEC) / freq : 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 8889, "user_id": 4538344, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/746edd669e07914179feb9f6957a06e3?s=128&d=identicon&r=PG", "display_name": "StenSoft", "link": "https://stackoverflow.com/users/4538344/stensoft"}, "is_accepted": false, "score": 2, "last_activity_date": 1452122201, "last_edit_date": 1452122201, "creation_date": 1452121294, "answer_id": 34644510, "question_id": 34644351, "link": "https://stackoverflow.com/questions/34644351/template-specialization-fails-because-of-unknown-template-definition/34644510#34644510", "title": "Template specialization fails because of unknown template definition", "body": "<p>The return type must match. However, it can be templated as well:</p>\n\n<pre><code>template&lt;class T&gt;\nT hz_to_nsec(const T &amp;freq) {\n    return freq != 0 ? static_cast&lt;float&gt;(NSEC_PER_SEC) / freq : 0;\n}\n\ntemplate &lt;&gt;\ndouble hz_to_nsec&lt;double&gt;(const double &amp;freq) {\n    return freq != 0 ? static_cast&lt;double&gt;(NSEC_PER_SEC) / freq : 0;\n}\n</code></pre>\n\n<p>Or you can use a trait:</p>\n\n<pre><code>template&lt;class T&gt;\nstruct RetT\n{\n    using Type = float;\n};\n\ntemplate &lt;&gt;\nstruct RetT&lt;double&gt;\n{\n    using Type = double;\n};\n\ntemplate&lt;class T&gt;\ntypename RetT&lt;T&gt;::Type hz_to_nsec(const T &amp;freq) {\n    return freq != 0 ? static_cast&lt;float&gt;(NSEC_PER_SEC) / freq : 0;\n}\n\ntemplate &lt;&gt;\ndouble hz_to_nsec&lt;double&gt;(const double &amp;freq) {\n    return freq != 0 ? static_cast&lt;double&gt;(NSEC_PER_SEC) / freq : 0;\n}\n</code></pre>\n\n<p>Or you don't even need template specialization, you can just overload the function:</p>\n\n<pre><code>template&lt;class T&gt;\nfloat hz_to_nsec(const T &amp;freq) {\n    return freq != 0 ? static_cast&lt;float&gt;(NSEC_PER_SEC) / freq : 0;\n}\n\ndouble hz_to_nsec(const double &amp;freq) {\n    return freq != 0 ? static_cast&lt;double&gt;(NSEC_PER_SEC) / freq : 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 21714, "user_id": 1392132, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QF6FZ.jpg?s=128&g=1", "display_name": "5gon12eder", "link": "https://stackoverflow.com/users/1392132/5gon12eder"}, "is_accepted": false, "score": 1, "last_activity_date": 1452122248, "last_edit_date": 1452122248, "creation_date": 1452121901, "answer_id": 34644618, "question_id": 34644351, "link": "https://stackoverflow.com/questions/34644351/template-specialization-fails-because-of-unknown-template-definition/34644618#34644618", "title": "Template specialization fails because of unknown template definition", "body": "<p>I believe that specialization is the wrong tool here. Instead, consider making the target type an additional type parameter.</p>\n\n<pre><code>// C++14\n\ntemplate &lt;typename OutputT, typename InputT&gt;\nstd::enable_if_t\n&lt;\n  std::is_arithmetic&lt;InputT&gt;::value &amp;&amp; std::is_floating_point&lt;OutputT&gt;::value,\n  OutputT\n&gt;\nhz_to_nsec(const InputT freq)\n{\n  return (freq != InputT {0})\n    ? static_cast&lt;OutputT&gt;(NSEC_PER_SEC) / static_cast&lt;OutputT&gt;(freq)\n    : OutputT {0};\n}\n</code></pre>\n\n<p>I'm putting <code>OutputT</code> first because it cannot be deduced. I have also restricted the permissible types for <code>InputT</code> and <code>OutputT</code> to what might be sensible types.</p>\n\n<p>It can be used like this.</p>\n\n<pre><code>hz_to_nsec&lt;double&gt;(10);    // InputT = int,           OutputT = double\nhz_to_nsec&lt;float&gt;(10.0f):  // InputT = float,         OutputT = float\nhz_to_nsec&lt;float&gt;(5UL);    // InputT = unsigned long, OutputT = float\n</code></pre>\n"}], "owner": {"reputation": 2026, "user_id": 1909456, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/1f254bd884cc7ea6217bfd1eaccb9f75?s=128&d=identicon&r=PG", "display_name": "dgrat", "link": "https://stackoverflow.com/users/1909456/dgrat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 186, "favorite_count": 0, "answer_count": 4, "score": 2, "last_activity_date": 1452122248, "creation_date": 1452120546, "question_id": 34644351, "link": "https://stackoverflow.com/questions/34644351/template-specialization-fails-because-of-unknown-template-definition", "title": "Template specialization fails because of unknown template definition", "body": "<p>My template specialization does not work. Does anyone know how I can implement this function properly with templates?</p>\n\n<pre><code>template&lt;class T&gt;\nfloat hz_to_nsec(const T &amp;freq) {\n    return freq != 0 ? static_cast&lt;float&gt;(NSEC_PER_SEC) / freq : 0;\n}\n\ntemplate &lt;&gt;\ndouble hz_to_nsec&lt;double&gt;(const double &amp;freq) {\n    return freq != 0 ? static_cast&lt;double&gt;(NSEC_PER_SEC) / freq : 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "pointers", "printf", "cout"], "answers": [{"tags": [], "owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "is_accepted": true, "score": 7, "last_activity_date": 1452120588, "creation_date": 1452120588, "answer_id": 34644355, "question_id": 34644321, "link": "https://stackoverflow.com/questions/34644321/c-difference-between-p-and-cout-ptr/34644355#34644355", "title": "C++ difference between %p and cout &amp;ptr", "body": "<p>Here, you're printing the <em>address</em> of <code>fPtr</code>:</p>\n\n<pre><code>cout &lt;&lt; \"Address fPtr: \" &lt;&lt; &amp;fPtr &lt;&lt; endl;\n</code></pre>\n\n<p>And here, you're printing the <em>value</em> of <code>fPtr</code>:</p>\n\n<pre><code>printf(\"%p\", fPtr);\n</code></pre>\n\n<p>Those are not the same thing.</p>\n\n<p>If you want to print the address of <code>fPtr</code> with <code>printf</code>, then you need</p>\n\n<pre><code>printf(\"%p\", &amp;fPtr);\n</code></pre>\n\n<p>If you want to print the value of <code>fPtr</code> with <code>std::cout</code>, then you need</p>\n\n<pre><code>cout &lt;&lt; fPtr &lt;&lt; endl;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5258, "user_id": 1274747, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7a2942e1483b9befa80a61cb98bce39d?s=128&d=identicon&r=PG", "display_name": "axalis", "link": "https://stackoverflow.com/users/1274747/axalis"}, "is_accepted": false, "score": 2, "last_activity_date": 1452120779, "creation_date": 1452120779, "answer_id": 34644399, "question_id": 34644321, "link": "https://stackoverflow.com/questions/34644321/c-difference-between-p-and-cout-ptr/34644399#34644399", "title": "C++ difference between %p and cout &amp;ptr", "body": "<p>The code seems to be missing the &amp; before fPtr in the printf line. Try to change to this:</p>\n\n<pre><code>printf(\"%p\", &amp;fPtr);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 5258, "user_id": 1274747, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7a2942e1483b9befa80a61cb98bce39d?s=128&d=identicon&r=PG", "display_name": "axalis", "link": "https://stackoverflow.com/users/1274747/axalis"}, "edited": false, "score": 0, "creation_date": 1452121298, "post_id": 34644431, "comment_id": 57034827, "body": "And the last 4 bytes of the double representation of 1.0 contain all zeros, so if that value is re-interpreted as pointer, it could print null. However, that depends on many factors (i.e. undefined behavior)."}], "tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": false, "score": 1, "last_activity_date": 1452121569, "last_edit_date": 1452121569, "creation_date": 1452120946, "answer_id": 34644431, "question_id": 34644321, "link": "https://stackoverflow.com/questions/34644321/c-difference-between-p-and-cout-ptr/34644431#34644431", "title": "C++ difference between %p and cout &amp;ptr", "body": "<blockquote>\n  <p>Why are the two addresses printed using the %p conversion specifier the same? </p>\n</blockquote>\n\n<p>Well, you have </p>\n\n<pre><code>fPtr = &amp;number1;\n\n// ...\n\nprintf(\"%p\\n\", &amp;number1);\n\n// ...\n\nprintf(\"%p\", fPtr);\n</code></pre>\n\n<p>It would be pretty surprising if the two <code>printf()</code> calls did <em>not</em> print the same thing, since the values they are asked to print are equal.</p>\n\n<blockquote>\n  <p>In addition it I take away the &amp; from the statement 'printf(\"%p\\n\", &amp;number1);' the return value is nil. Could anyone explain why?</p>\n</blockquote>\n\n<p>No, not in any general sense.  <code>printf()</code>'s behavior is undefined when the argument corresponding to a conversion specifier is not of the type appropriate for that specifier.  The <code>%p</code> specifier expects a pointer, but you pass a <code>double</code> (after the applicable default conversion).</p>\n"}], "owner": {"reputation": 83, "user_id": 5119835, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/cd596ecdaea8596eb0aafee062c83293?s=128&d=identicon&r=PG&f=1", "display_name": "caseylouisee", "link": "https://stackoverflow.com/users/5119835/caseylouisee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 355, "favorite_count": 0, "accepted_answer_id": 34644355, "answer_count": 3, "score": 1, "last_activity_date": 1452121569, "creation_date": 1452120453, "question_id": 34644321, "link": "https://stackoverflow.com/questions/34644321/c-difference-between-p-and-cout-ptr", "title": "C++ difference between %p and cout &amp;ptr", "body": "<p>so I have a piece of code that needs to print the address of a number and an address of a ptr. \nThis is the code:</p>\n\n<pre><code>int main() {\n    float number1 = 1;\n    float number2;\n\n    float *fPtr;\n    fPtr = &amp;number1;\n    cout &lt;&lt; \"Value of object pointed to by fPtr: \" &lt;&lt; *fPtr &lt;&lt; endl;\n\n    cout &lt;&lt; \"Value of number 2: \" &lt;&lt; number2 &lt;&lt; endl;\n\n    cout &lt;&lt; \"Address of number 1: \" &lt;&lt; &amp;number1 &lt;&lt; endl;\n    printf(\"%p\\n\", &amp;number1);\n    cout &lt;&lt; \"Address fPtr: \" &lt;&lt; &amp;fPtr &lt;&lt; endl;\n    printf(\"%p\", fPtr);\n\n\n    return 0;\n}\n</code></pre>\n\n<p>The output is:</p>\n\n<p>Value of object pointed to by fPtr: 1</p>\n\n<p>Value of number 2: 0</p>\n\n<p>Address of number 1: 0xbfb7e348</p>\n\n<p>0xbfb7e348</p>\n\n<p>Address fPtr: 0xbfb7e34c</p>\n\n<p>0xbfb7e348</p>\n\n<p>Why are the two addresses printed using the %p conversion specifier the same? When using the &amp; the addresses are different which is what I would expect as number1 and fPtr are saved in different addresses.</p>\n\n<p>In addition it I take away the &amp; from the statement 'printf(\"%p\\n\", &amp;number1);' the return value is nil. Could anyone explain why?</p>\n"}, {"tags": ["c++", "unreal-engine4", "visual-studio-2015", "cpp-core-guidelines"], "comments": [{"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1452185817, "post_id": 34644303, "comment_id": 57067031, "body": "I assume that you have verified that C++ Core Checker itself works, using a Win32 project."}, {"owner": {"reputation": 717, "user_id": 776442, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/80e1802cd80a47d804e5773822262692?s=128&d=identicon&r=PG", "display_name": "Maxim Kamalov", "link": "https://stackoverflow.com/users/776442/maxim-kamalov"}, "reply_to_user": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1452193510, "post_id": 34644303, "comment_id": 57071734, "body": "Yes, everything works exactly as described in the instruction mentioned in the question."}], "answers": [{"tags": [], "owner": {"reputation": 278, "user_id": 2409423, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa9323d3e0721cd191f40dfbc34c112c?s=128&d=identicon&r=PG", "display_name": "TheWisp", "link": "https://stackoverflow.com/users/2409423/thewisp"}, "is_accepted": false, "score": 1, "last_activity_date": 1469533000, "creation_date": 1469533000, "answer_id": 38588850, "question_id": 34644303, "link": "https://stackoverflow.com/questions/34644303/how-to-use-c-core-checker-in-unreal-engine-project/38588850#38588850", "title": "How to use C++ Core Checker in Unreal Engine project?", "body": "<p>Compiler settings in Unreal 4 are handled by Unreal Build Tool. Turning on static analysis is equivalent to adding \"/analyze\" flag to compiler options. You can find the place where the build tool manages MSVC compiler and add an option there. Better yet, append the option only for your project in Yourproject.Build.cs.</p>\n"}], "owner": {"reputation": 717, "user_id": 776442, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/80e1802cd80a47d804e5773822262692?s=128&d=identicon&r=PG", "display_name": "Maxim Kamalov", "link": "https://stackoverflow.com/users/776442/maxim-kamalov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 622, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1469533000, "creation_date": 1452120395, "question_id": 34644303, "link": "https://stackoverflow.com/questions/34644303/how-to-use-c-core-checker-in-unreal-engine-project", "title": "How to use C++ Core Checker in Unreal Engine project?", "body": "<p>Here is an instruction how to use C++ Core Checker: <a href=\"http://blogs.msdn.com/b/vcblog/archive/2015/12/03/c-core-guidelines-checkers-available-for-vs-2015-update-1.aspx\" rel=\"nofollow\">C++ Core Guidelines Checkers available for VS 2015 Update 1.</a></p>\n\n<p>I installed NuGet package successfully, but cannot use/enable it. There are no options related to static analysis in Property Pages of the project generated by UE.</p>\n\n<p>Trying Analyze \u2192 Run Code Analyze achieves nothing too.</p>\n\n<p>Trying Analyze \u2192 Configure Code Analysis leads to a message \u201cThere are currently no analyzable projects loaded\u201d.</p>\n\n<p>Why are these projects not analyzable? Is it possible to change that?</p>\n"}, {"tags": ["c++", "armadillo"], "comments": [{"owner": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "edited": false, "score": 0, "creation_date": 1452132870, "post_id": 34644239, "comment_id": 57038284, "body": "Any particular reason why you want to switch to iterators? Especially in C++03 they make for way less readable code."}], "answers": [{"comments": [{"owner": {"reputation": 779, "user_id": 9220132, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/r70Mx.jpg?s=128&g=1", "display_name": "jwm", "link": "https://stackoverflow.com/users/9220132/jwm"}, "edited": false, "score": 1, "creation_date": 1573500396, "post_id": 34644371, "comment_id": 103894487, "body": "personally, I don&#39;t find caching the value of <code>end()</code> to be a desirable optimization. In most cases, it&#39;s going to be an in-line method anyway that may just as likely be optimized out by the compiler. It is highly unlikely that this will have a substantive impact on your execution time. On the other hand, if you get into this habit and <i>do</i> change the container, your iteration may become unbounded."}], "tags": [], "owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "is_accepted": false, "score": 1, "last_activity_date": 1452120649, "creation_date": 1452120649, "answer_id": 34644371, "question_id": 34644239, "link": "https://stackoverflow.com/questions/34644239/c-armadillo-double-for-loop-using-iterators/34644371#34644371", "title": "C++ Armadillo: double for loop using iterators", "body": "<p>Three things come to mind, and not just to double iterations, but to any kind of iteration (just apply everything below twice...)</p>\n\n<p>1) If the container's contents do not change during the loop, call end() once and save it, and compare the iterator to the saved value on each iteration of the loop.</p>\n\n<p>Not so good:</p>\n\n<pre><code>for(arma::vec::iterator i = test.begin(); i != test.end(); ++i)\n</code></pre>\n\n<p>As written, end() is being technically called at each loop's iteration, and its return value is being compared to the current value of the loop iterator.</p>\n\n<p>2)</p>\n\n<p>Better:</p>\n\n<pre><code>const arma::vec::iterator e=test.end();\n\nfor(arma::vec::iterator i = test.begin(); i != e; ++i)\n</code></pre>\n\n<p>This has a far better chance of getting optimized, especially with a const qualifier (although the compiler will likely be able to figure it out on its own, if <code>e</code> never gets modified, anyway).</p>\n\n<p>3)</p>\n\n<p>Best:</p>\n\n<pre><code>for(const auto &amp;value:test)\n</code></pre>\n\n<p>The C++11 iteration syntax tells the compiler exactly what's going on, giving the compiler the best opportunity to employ all container iteration tricks it's been programmed to know about.</p>\n"}, {"tags": [], "owner": {"reputation": 1382, "user_id": 3928744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b904e3280e386d51bd888433c8ab0fa4?s=128&d=identicon&r=PG&f=1", "display_name": "hbrerkere", "link": "https://stackoverflow.com/users/3928744/hbrerkere"}, "is_accepted": true, "score": 8, "last_activity_date": 1452132439, "last_edit_date": 1452132439, "creation_date": 1452132043, "answer_id": 34646187, "question_id": 34644239, "link": "https://stackoverflow.com/questions/34644239/c-armadillo-double-for-loop-using-iterators/34646187#34646187", "title": "C++ Armadillo: double for loop using iterators", "body": "<p>It's recommended to still use a <em>single</em> loop when accessing elements in a matrix. Armadillo stores data in <a href=\"https://en.wikipedia.org/wiki/Row-major_order#Column-major_order\" rel=\"noreferrer\">column-major</a> format (for compatibility with LAPACK), so the iterator will travel along each column in the matrix.</p>\n\n<pre><code>arma::mat A(4, 5, arma::fill::randu);\nA.print(\"A:\");\n\n// C++98 \n\narma::mat::iterator it_end = A.end();\n\nfor(arma::mat::iterator it = A.begin(); it != it_end; ++it)\n   {\n   std::cout &lt;&lt; (*it) &lt;&lt; std::endl;\n   }\n\n// C++11\n\nfor(const auto&amp; val : A)\n   {\n   std::cout &lt;&lt; val &lt;&lt; std::endl;\n   }\n</code></pre>\n\n<p>If you really want to use a double loop, use <a href=\"http://arma.sourceforge.net/docs.html#iterators_mat\" rel=\"noreferrer\">.begin_col()</a> and <a href=\"http://arma.sourceforge.net/docs.html#iterators_mat\" rel=\"noreferrer\">.end_col()</a>:</p>\n\n<pre><code>// C++11\n\nfor(arma::uword c=0; c &lt; A.n_cols; ++c)\n  {\n  auto it_end = A.end_col(c);\n\n  for(auto it = A.begin_col(c); it != it_end; ++it)\n    {\n    std::cout &lt;&lt; (*it) &lt;&lt; std::endl;\n    }\n  }\n</code></pre>\n\n<p>Lastly, the <a href=\"http://arma.sourceforge.net/docs.html#for_each\" rel=\"noreferrer\">.for_each()</a> function is an alternative to using iterators:</p>\n\n<pre><code> // C++11\n\n A.for_each( [](arma::mat::elem_type&amp; val) { std::cout &lt;&lt; val &lt;&lt; std::endl; } );\n</code></pre>\n"}], "owner": {"reputation": 1397, "user_id": 4725622, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/3d0ec77ed6cb5db6eaad3de3101c58fc?s=128&d=identicon&r=PG&f=1", "display_name": "Cauchy", "link": "https://stackoverflow.com/users/4725622/cauchy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3514, "favorite_count": 1, "accepted_answer_id": 34646187, "answer_count": 2, "score": 3, "last_activity_date": 1452132439, "creation_date": 1452120090, "last_edit_date": 1452120436, "question_id": 34644239, "link": "https://stackoverflow.com/questions/34644239/c-armadillo-double-for-loop-using-iterators", "title": "C++ Armadillo: double for loop using iterators", "body": "<p>What is the best way to use iterators in double for-loops. For a single loop, the obvious way seems to be:</p>\n\n<pre><code>arma::vec test = arma::ones(10);\nfor(arma::vec::iterator i = test.begin(); i != test.end(); ++i){\n   int one = *i;\n}\n</code></pre>\n\n<p>So I want to transform the following:</p>\n\n<pre><code>arma::mat test = arma::ones(10,10);\nfor (int i = 0; i &lt; test.n_rows; i++){\n for (int j = 0; j &lt; test.n_cols; j++){\n  int one = test(i,j);\n }\n}\n</code></pre>\n\n<p>to use iterators instead of integer indices. Thanks for any advice.</p>\n"}, {"tags": ["c++", "opencv", "depth", "normals", "cross-product"], "comments": [{"owner": {"reputation": 23771, "user_id": 24283, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/40de04de8152eee3e356895fff1a8e90?s=128&d=identicon&r=PG", "display_name": "timday", "link": "https://stackoverflow.com/users/24283/timday"}, "edited": false, "score": 0, "creation_date": 1452197982, "post_id": 34644101, "comment_id": 57074237, "body": "Depends what OpenCV does when you dump an image of vectors.  It doesn&#39;t look like your XYZ is mapping to RGB, and the positive/negative component range may not map well to 0-255 pixel values without some scaling.  That&#39;s why my code also includes a simple shading model to produce a greyscale image from the normals."}, {"owner": {"reputation": 805, "user_id": 1476932, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/7ef5bed732b83efa1451e4c5888217eb?s=128&d=identicon&r=PG", "display_name": "ttsesm", "link": "https://stackoverflow.com/users/1476932/ttsesm"}, "reply_to_user": {"reputation": 23771, "user_id": 24283, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/40de04de8152eee3e356895fff1a8e90?s=128&d=identicon&r=PG", "display_name": "timday", "link": "https://stackoverflow.com/users/24283/timday"}, "edited": false, "score": 0, "creation_date": 1452259098, "post_id": 34644101, "comment_id": 57101101, "body": "Hi @timday I do not think that it is an Opencv problem because if I load the normals from a Matlab script to Opencv and <code>imshow()</code> them then I am getting a nice image compared to the one above."}, {"owner": {"reputation": 9602, "user_id": 2571705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e9b0015a3abdccadd4ed3dd2e6c69bf?s=128&d=identicon&r=PG", "display_name": "dhanushka", "link": "https://stackoverflow.com/users/2571705/dhanushka"}, "edited": false, "score": 4, "creation_date": 1452321850, "post_id": 34644101, "comment_id": 57127389, "body": "You might find <a href=\"http://stackoverflow.com/q/31217122/2571705\">this</a> useful."}, {"owner": {"reputation": 805, "user_id": 1476932, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/7ef5bed732b83efa1451e4c5888217eb?s=128&d=identicon&r=PG", "display_name": "ttsesm", "link": "https://stackoverflow.com/users/1476932/ttsesm"}, "reply_to_user": {"reputation": 9602, "user_id": 2571705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e9b0015a3abdccadd4ed3dd2e6c69bf?s=128&d=identicon&r=PG", "display_name": "dhanushka", "link": "https://stackoverflow.com/users/2571705/dhanushka"}, "edited": false, "score": 0, "creation_date": 1452379362, "post_id": 34644101, "comment_id": 57145667, "body": "@dhanushka really interesting link. Thanks."}, {"owner": {"reputation": 559, "user_id": 6693924, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-WvvSUFCSDTI/AAAAAAAAAAI/AAAAAAAAAGQ/bDUUw67iRjg/photo.jpg?sz=128", "display_name": "Jan-Michael Tressler", "link": "https://stackoverflow.com/users/6693924/jan-michael-tressler"}, "edited": false, "score": 1, "creation_date": 1535582294, "post_id": 34644101, "comment_id": 91124235, "body": "Thanks for the update.  One small correction is that in most cases the cv::Mat is accessed (y,x) while an image point is cv::Point(x,y,z).  Therefore, there is a  mismatch in your rows being the &#39;x&#39;?  Keeping your loop nomenclature the same, the normal should be &#39;Vec3f d(-dzdy, -dzdx, 1.0f);&#39;."}], "answers": [{"comments": [{"owner": {"reputation": 805, "user_id": 1476932, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/7ef5bed732b83efa1451e4c5888217eb?s=128&d=identicon&r=PG", "display_name": "ttsesm", "link": "https://stackoverflow.com/users/1476932/ttsesm"}, "edited": false, "score": 0, "creation_date": 1452161780, "post_id": 34644939, "comment_id": 57050013, "body": "thanks for the answer I am trying now to port your code to opencv. However, how I would do the same by using the cross product since I need to do it but that way."}, {"owner": {"reputation": 805, "user_id": 1476932, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/7ef5bed732b83efa1451e4c5888217eb?s=128&d=identicon&r=PG", "display_name": "ttsesm", "link": "https://stackoverflow.com/users/1476932/ttsesm"}, "edited": false, "score": 0, "creation_date": 1452379890, "post_id": 34644939, "comment_id": 57145805, "body": "in your example you are using 4-neighbours cross product, right? If I wanted to use 8-neighbours then I should apply the same procedure for the diagonal pixels, right?"}, {"owner": {"reputation": 23771, "user_id": 24283, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/40de04de8152eee3e356895fff1a8e90?s=128&d=identicon&r=PG", "display_name": "timday", "link": "https://stackoverflow.com/users/24283/timday"}, "reply_to_user": {"reputation": 805, "user_id": 1476932, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/7ef5bed732b83efa1451e4c5888217eb?s=128&d=identicon&r=PG", "display_name": "ttsesm", "link": "https://stackoverflow.com/users/1476932/ttsesm"}, "edited": false, "score": 0, "creation_date": 1452421596, "post_id": 34644939, "comment_id": 57154459, "body": "@theodore: Well one way to think of it is that the &quot;input&quot; to the cross product is two tangent vectors, and the cross-product generates the perpendicular normal.  Above, I&#39;m effectively using 4 neighbours as the end-points of two tangent vectors.  It&#39;s not obvious how to extend that to 8 neighbouring points... however I do know there are more advanced methods which fit splines to more points in the neighbourhood, and then use the normal to the splined surface (example at <a href=\"https://bib.irb.hr/datoteka/150807.1-0239.pdf\" rel=\"nofollow noreferrer\">bib.irb.hr/datoteka/150807.1-0239.pdf</a> )."}, {"owner": {"reputation": 805, "user_id": 1476932, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/7ef5bed732b83efa1451e4c5888217eb?s=128&d=identicon&r=PG", "display_name": "ttsesm", "link": "https://stackoverflow.com/users/1476932/ttsesm"}, "edited": false, "score": 0, "creation_date": 1452428214, "post_id": 34644939, "comment_id": 57156322, "body": "thanks, I see. Actually what I had in my mind was something like that:  <code>dzdx=(z(x+1,y)-z(x-1,y))&#47;2.0; dzdy=(z(x,y+1)-z(x,y-1))&#47;2.0; direction=(-dxdz,-dydz,1.0) magnitude=sqrt(direction.x**2 + direction.y**2 + direction.z**2)  dzdx1=(z(x+1,y+1)-z(x-1,y-1))&#47;2.0; dzdy1=(z(x-1,y+1)-z(x+1,y-1))&#47;2.0; direction1=(-dxdz1,-dydz1,1.0) magnitude1=sqrt(direction1.x**2 + direction1.y**2 + direction1.z**2)  normal=(direction&#47;magnitude) + (direction1&#47;magnitude1)</code>  but I do not know how correct is this."}, {"owner": {"reputation": 23771, "user_id": 24283, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/40de04de8152eee3e356895fff1a8e90?s=128&d=identicon&r=PG", "display_name": "timday", "link": "https://stackoverflow.com/users/24283/timday"}, "reply_to_user": {"reputation": 805, "user_id": 1476932, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/7ef5bed732b83efa1451e4c5888217eb?s=128&d=identicon&r=PG", "display_name": "ttsesm", "link": "https://stackoverflow.com/users/1476932/ttsesm"}, "edited": false, "score": 0, "creation_date": 1452428761, "post_id": 34644939, "comment_id": 57156483, "body": "Hmmm I could imagine doing something like computing one normal using the 4 x-y axis adjacent points, and then another normal using the 4 &quot;diagonal&quot; points... and then averaging those (and renormalizing).  Hard to guess how much better that might or might not be than the 4-adjacent-points only version though.  If your data is noisy and you&#39;re trying to remove the effect of spurious values, some sort of pre-filtering might be a better approach than building a lot of complication into normal generation."}, {"owner": {"reputation": 805, "user_id": 1476932, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/7ef5bed732b83efa1451e4c5888217eb?s=128&d=identicon&r=PG", "display_name": "ttsesm", "link": "https://stackoverflow.com/users/1476932/ttsesm"}, "edited": false, "score": 0, "creation_date": 1452429929, "post_id": 34644939, "comment_id": 57156878, "body": "ok so my thought above in my comment is not completely wrong. For the moment it does not have to do with noisy data or anything but just from curiosity what they mean computing the normals from the cross product of using 4 neighbors  or 8 neighbors pixels respectively. I do not know though if you would like to add the 8 neighborhood pixels approach from your comment in your answer above just for completion reasons for the future readers. In any case thanks a lot for the help and the guidance ;-)"}, {"owner": {"reputation": 159, "user_id": 3968758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3dceccb0bfdee19b2f0b3d640318edec?s=128&d=identicon&r=PG&f=1", "display_name": "ASML", "link": "https://stackoverflow.com/users/3968758/asml"}, "edited": false, "score": 0, "creation_date": 1525745251, "post_id": 34644939, "comment_id": 87467046, "body": "Is this also true for range images obtained from a projective projection? I&#39;m unable to make the connection to the following explanation: <a href=\"https://stackoverflow.com/questions/30993211/surface-normal-on-depth-image\" title=\"surface normal on depth image\">stackoverflow.com/questions/30993211/&hellip;</a> Especially the atan is a mystery to me..."}, {"owner": {"reputation": 23771, "user_id": 24283, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/40de04de8152eee3e356895fff1a8e90?s=128&d=identicon&r=PG", "display_name": "timday", "link": "https://stackoverflow.com/users/24283/timday"}, "reply_to_user": {"reputation": 159, "user_id": 3968758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3dceccb0bfdee19b2f0b3d640318edec?s=128&d=identicon&r=PG&f=1", "display_name": "ASML", "link": "https://stackoverflow.com/users/3968758/asml"}, "edited": false, "score": 0, "creation_date": 1526893335, "post_id": 34644939, "comment_id": 87904182, "body": "@ASML: A perspective projection would change things slightly as the rays aren&#39;t parallel and a constant &quot;range&quot; value becomes a spherical surface rather than a flat plane.  The correction factor might well involve a tangent if done in spherical geometry.  You should probably ask a separate question; comments aren&#39;t the place."}, {"owner": {"reputation": 159, "user_id": 3968758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3dceccb0bfdee19b2f0b3d640318edec?s=128&d=identicon&r=PG&f=1", "display_name": "ASML", "link": "https://stackoverflow.com/users/3968758/asml"}, "edited": false, "score": 0, "creation_date": 1526913597, "post_id": 34644939, "comment_id": 87915501, "body": "@timday: Thanks! I have asked a separate question some time ago, but haven&#39;t gotten any answers: <a href=\"https://stackoverflow.com/questions/50241819/normals-from-projective-depth\" title=\"normals from projective depth\">stackoverflow.com/questions/50241819/&hellip;</a>"}, {"owner": {"reputation": 688, "user_id": 3302133, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5246eb75897e81f31047b4420be49e5f?s=128&d=identicon&r=PG&f=1", "display_name": "MonsieurBeilto", "link": "https://stackoverflow.com/users/3302133/monsieurbeilto"}, "edited": false, "score": 0, "creation_date": 1538266156, "post_id": 34644939, "comment_id": 92083297, "body": "In the pseudo code, why is the z component in direction vector set to 1?"}, {"owner": {"reputation": 23771, "user_id": 24283, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/40de04de8152eee3e356895fff1a8e90?s=128&d=identicon&r=PG", "display_name": "timday", "link": "https://stackoverflow.com/users/24283/timday"}, "reply_to_user": {"reputation": 688, "user_id": 3302133, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5246eb75897e81f31047b4420be49e5f?s=128&d=identicon&r=PG&f=1", "display_name": "MonsieurBeilto", "link": "https://stackoverflow.com/users/3302133/monsieurbeilto"}, "edited": false, "score": 1, "creation_date": 1538323737, "post_id": 34644939, "comment_id": 92094450, "body": "@MonsieurBeilto because if for example dxdz was 1.0 (and dydz was 0.0), then that&#39;d be a 45degree slope and you&#39;d want to form a  right isosceles triangle (hence with z=1).  The normal direction lies along the hypotenuse of that triangle, and you want that to have unit length, hence the subsequent normalisation step."}], "tags": [], "owner": {"reputation": 23771, "user_id": 24283, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/40de04de8152eee3e356895fff1a8e90?s=128&d=identicon&r=PG", "display_name": "timday", "link": "https://stackoverflow.com/users/24283/timday"}, "is_accepted": true, "score": 28, "last_activity_date": 1557464783, "last_edit_date": 1557464783, "creation_date": 1452123637, "answer_id": 34644939, "question_id": 34644101, "link": "https://stackoverflow.com/questions/34644101/calculate-surface-normals-from-depth-image-using-neighboring-pixels-cross-produc/34644939#34644939", "title": "Calculate surface normals from depth image using neighboring pixels cross product", "body": "<p>You don't really <em>need</em> to use the cross product for this, but see below.</p>\n\n<p>Consider your range image is a function z(x,y).</p>\n\n<p>The normal to the surface is in the direction (-dz/dx,-dz/dy,1).  (Where by dz/dx I mean the differential: the rate of change of z with x).  And then normals are conventionally normalized to unit length.</p>\n\n<p>Incidentally, if you're wondering where that (-dz/dx,-dz/dy,1) comes from... if you take the 2 orthogonal tangent vectors in the plane parellel to the x and y axes, those are (1,0,dzdx) and (0,1,dzdy).  The normal is perpendicular to the tangents, so should be (1,0,dzdx)X(0,1,dzdy) - where 'X' is cross-product - which is (-dzdx,-dzdy,1).  So there's your cross product derived normal, but there's little need to compute it so explicitly in code when you can just use the resulting expression for the normal directly.</p>\n\n<p>Pseudocode to compute a unit-length normal at (x,y) would be something like</p>\n\n<pre><code>dzdx=(z(x+1,y)-z(x-1,y))/2.0;\ndzdy=(z(x,y+1)-z(x,y-1))/2.0;\ndirection=(-dzdx,-dzdy,1.0)\nmagnitude=sqrt(direction.x**2 + direction.y**2 + direction.z**2)\nnormal=direction/magnitude\n</code></pre>\n\n<p>Depending on what you're trying to do, it might make more sense to replace the NaN values with just some large number.</p>\n\n<p>Using that approach, from your range image, I can get this:</p>\n\n<p><a href=\"https://i.stack.imgur.com/apuyq.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/apuyq.png\" alt=\"enter image description here\"></a></p>\n\n<p>(I'm then using the normal directions calculated to do some simple shading; note the \"steppy\" appearance due to the range image's quantization; ideally you'd have higher precision than 8-bit for the real range data).</p>\n\n<p>Sorry, not OpenCV or C++ code, but just for completeness: the complete code which produced that image (GLSL embedded in a Qt QML file; can be run with Qt5's qmlscene) is below.  The pseudocode above can be found in the fragment shader's <code>main()</code> function:</p>\n\n<pre><code>import QtQuick 2.2\n\nImage {\n  source: 'range.png'  // The provided image\n\n  ShaderEffect {\n    anchors.fill: parent\n    blending: false\n\n    property real dx: 1.0/parent.width\n    property real dy: 1.0/parent.height\n    property variant src: parent\n\n    vertexShader: \"\n      uniform highp mat4 qt_Matrix;\n      attribute highp vec4 qt_Vertex;\n      attribute highp vec2 qt_MultiTexCoord0;\n      varying highp vec2 coord;\n      void main() {\n        coord=qt_MultiTexCoord0;\n        gl_Position=qt_Matrix*qt_Vertex;\n      }\"\n\n   fragmentShader: \"\n     uniform highp float dx;\n     uniform highp float dy;\n     varying highp vec2 coord;\n     uniform sampler2D src;\n     void main() {\n       highp float dzdx=( texture2D(src,coord+vec2(dx,0.0)).x - texture2D(src,coord+vec2(-dx,0.0)).x )/(2.0*dx);\n       highp float dzdy=( texture2D(src,coord+vec2(0.0,dy)).x - texture2D(src,coord+vec2(0.0,-dy)).x )/(2.0*dy);\n       highp vec3 d=vec3(-dzdx,-dzdy,1.0);\n       highp vec3 n=normalize(d);\n       highp vec3 lightDirection=vec3(1.0,-2.0,3.0);\n       highp float shading=0.5+0.5*dot(n,normalize(lightDirection));\n       gl_FragColor=vec4(shading,shading,shading,1.0);\n     }\"\n  }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 14151654, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mA5enCtAn8yudxJXSV04rPh5zzlIoyWAN4JaaC_=k-s128", "display_name": "Baichuan", "link": "https://stackoverflow.com/users/14151654/baichuan"}, "is_accepted": false, "score": 0, "last_activity_date": 1598183246, "creation_date": 1598183246, "answer_id": 63546572, "question_id": 34644101, "link": "https://stackoverflow.com/questions/34644101/calculate-surface-normals-from-depth-image-using-neighboring-pixels-cross-produc/63546572#63546572", "title": "Calculate surface normals from depth image using neighboring pixels cross product", "body": "<p>The code (matrix calculation) I think is right:</p>\n<pre><code>def normalization(data):\n   mo_chang =np.sqrt(np.multiply(data[:,:,0],data[:,:,0])+np.multiply(data[:,:,1],data[:,:,1])+np.multiply(data[:,:,2],data[:,:,2]))\n   mo_chang = np.dstack((mo_chang,mo_chang,mo_chang))\n   return data/mo_chang\n\nx,y=np.meshgrid(np.arange(0,width),np.arange(0,height))\nx=x.reshape([-1])\ny=y.reshape([-1])\nxyz=np.vstack((x,y,np.ones_like(x)))\npts_3d=np.dot(np.linalg.inv(K),xyz*img1_depth.reshape([-1]))\npts_3d_world=pts_3d.reshape((3,height,width))\nf= pts_3d_world[:,1:height-1,2:width]-pts_3d_world[:,1:height-1,1:width-1]\nt= pts_3d_world[:,2:height,1:width-1]-pts_3d_world[:,1:height-1,1:width-1]\nnormal_map=np.cross(f,l,axisa=0,axisb=0)\nnormal_map=normalization(normal_map)\nnormal_map=normal_map*0.5+0.5\nalpha = np.full((height-2,width-2,1), (1.), dtype=&quot;float32&quot;)\nnormal_map=np.concatenate((normal_map,alpha),axis=2)\n</code></pre>\n<ol>\n<li><p>We should use the camera intrinsics named 'K'. I think the value f and t is based on 3D points in camera coordinate.</p>\n</li>\n<li><p>For the normal vector, the (-1,-1,100) and (255,255,100) are the same color in 8 bites images but they are totally different normal. So we should map the normal values to (0,1) by <code>normal_map=normal_map*0.5+0.5</code>.</p>\n</li>\n</ol>\n<p>Welcome to communication.</p>\n"}], "owner": {"reputation": 805, "user_id": 1476932, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/7ef5bed732b83efa1451e4c5888217eb?s=128&d=identicon&r=PG", "display_name": "ttsesm", "link": "https://stackoverflow.com/users/1476932/ttsesm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 18531, "favorite_count": 14, "accepted_answer_id": 34644939, "answer_count": 2, "score": 26, "last_activity_date": 1598183246, "creation_date": 1452119442, "last_edit_date": 1470728657, "question_id": 34644101, "link": "https://stackoverflow.com/questions/34644101/calculate-surface-normals-from-depth-image-using-neighboring-pixels-cross-produc", "title": "Calculate surface normals from depth image using neighboring pixels cross product", "body": "<p>As the title says I want to calculate the surface normals of a given depth image by using the cross product of neighboring pixels. I would like to use Opencv for that and avoid using PCL however, I do not really understand the procedure, since my knowledge is quite limited in the subject. Therefore, I would be grateful is someone could provide some hints. To mention here that I do not have any other information except the depth image and the corresponding rgb image, so no <code>K</code> camera matrix information.</p>\n\n<p>Thus, lets say that we have the following depth image:</p>\n\n<p><a href=\"https://i.stack.imgur.com/Air7G.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/Air7G.png\" alt=\"enter image description here\"></a></p>\n\n<p>and I want to find the normal vector at a corresponding point with a corresponding depth value like in the following image:</p>\n\n<p><a href=\"https://i.stack.imgur.com/ISL4l.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/ISL4l.png\" alt=\"enter image description here\"></a> </p>\n\n<p>How can I do that using the cross product of the neighbouring pixels? I do not mind if the normals are not highly accurate.</p>\n\n<p>Thanks.</p>\n\n<hr>\n\n<p><strong>Update:</strong></p>\n\n<p>Ok, I was trying to follow @timday's answer and port his code to Opencv. With the following code:</p>\n\n<pre><code>Mat depth = &lt;my_depth_image&gt; of type CV_32FC1\nMat normals(depth.size(), CV_32FC3);\n\nfor(int x = 0; x &lt; depth.rows; ++x)\n{\n    for(int y = 0; y &lt; depth.cols; ++y)\n    {\n\n        float dzdx = (depth.at&lt;float&gt;(x+1, y) - depth.at&lt;float&gt;(x-1, y)) / 2.0;\n        float dzdy = (depth.at&lt;float&gt;(x, y+1) - depth.at&lt;float&gt;(x, y-1)) / 2.0;\n\n        Vec3f d(-dzdx, -dzdy, 1.0f);\n        Vec3f n = normalize(d);\n\n        normals.at&lt;Vec3f&gt;(x, y) = n;\n    }\n}\n\nimshow(\"depth\", depth / 255);\nimshow(\"normals\", normals);\n</code></pre>\n\n<p>I am getting the correct following result (I had to replace <code>double</code> with <code>float</code> and <code>Vecd</code> to <code>Vecf</code>, I do not know why that would make any difference though):</p>\n\n<p><a href=\"https://i.stack.imgur.com/SYhcY.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/SYhcY.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["c++", "winapi", "openprocess"], "comments": [{"owner": {"reputation": 21714, "user_id": 1392132, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QF6FZ.jpg?s=128&g=1", "display_name": "5gon12eder", "link": "https://stackoverflow.com/users/1392132/5gon12eder"}, "edited": false, "score": 0, "creation_date": 1452119077, "post_id": 34643985, "comment_id": 57033865, "body": "This question should probably have some Windows-specific tags but I don&#39;t know which ones would apply."}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1452119188, "post_id": 34643985, "comment_id": 57033924, "body": "<code>GetModuleFileNameEx</code>&#39;s last parameter is measured in characters, not bytes, so you shouldn&#39;t use <code>sizeof</code> for that.  On a Unicode build this could cause a crash."}, {"owner": {"reputation": 9, "user_id": 5754675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8869f49694ae4cf238f381a33b24900?s=128&d=identicon&r=PG&f=1", "display_name": "Jhon Brian", "link": "https://stackoverflow.com/users/5754675/jhon-brian"}, "edited": false, "score": 0, "creation_date": 1452119295, "post_id": 34643985, "comment_id": 57033979, "body": "Im using multi-byte project, also I did printf that i commented out and I got some addresses but I crashed after I printed them all."}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 1, "creation_date": 1452119337, "post_id": 34643985, "comment_id": 57034007, "body": "Also, you never write to <code>szModName</code> (<code>GetModuleFileName</code> third and fourth parameters use different variables), and you can&#39;t compare C-style strings with <code>==</code>, you need <code>strcmp</code>."}, {"owner": {"reputation": 9, "user_id": 5754675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8869f49694ae4cf238f381a33b24900?s=128&d=identicon&r=PG&f=1", "display_name": "Jhon Brian", "link": "https://stackoverflow.com/users/5754675/jhon-brian"}, "edited": false, "score": 0, "creation_date": 1452119458, "post_id": 34643985, "comment_id": 57034055, "body": "looks like it got found a billion times <a href=\"http://i.imgur.com/YYeOmwM.png\" rel=\"nofollow noreferrer\">i.imgur.com/YYeOmwM.png</a>"}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1452119520, "post_id": 34643985, "comment_id": 57034080, "body": "Remember <code>strcmp</code> returns ZERO for a match and non-zero otherwise.  Also, you might need a substring match, not equality?"}, {"owner": {"reputation": 9, "user_id": 5754675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8869f49694ae4cf238f381a33b24900?s=128&d=identicon&r=PG&f=1", "display_name": "Jhon Brian", "link": "https://stackoverflow.com/users/5754675/jhon-brian"}, "edited": false, "score": 0, "creation_date": 1452119643, "post_id": 34643985, "comment_id": 57034135, "body": "if I want the base address for Minesweeper.exe how would I specifically sort out Minesweeper.exe instead of all these other modals."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1452119789, "post_id": 34643985, "comment_id": 57034190, "body": "@JhonBrian <i>Im using multi-byte project</i> -- But you&#39;re using <code>TCHAR</code>, therefore you <i>should</i> be writing the correct code w.r.t the number of characters."}], "answers": [{"comments": [{"owner": {"reputation": 9, "user_id": 5754675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8869f49694ae4cf238f381a33b24900?s=128&d=identicon&r=PG&f=1", "display_name": "Jhon Brian", "link": "https://stackoverflow.com/users/5754675/jhon-brian"}, "edited": false, "score": 0, "creation_date": 1452121825, "post_id": 34644477, "comment_id": 57035036, "body": "Still Crashes with this function"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1452125090, "post_id": 34644477, "comment_id": 57036167, "body": "Runs fine for me, no crash. However, the output from <code>GetModuleFileNameEx()</code> is a fully qualified path and filename, so you would have to use something like <code>PathFindFileName(szModName)</code> to truncate it down to just the filename before then comparing it to <code>szProcessName</code>."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "reply_to_user": {"reputation": 9, "user_id": 5754675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8869f49694ae4cf238f381a33b24900?s=128&d=identicon&r=PG&f=1", "display_name": "Jhon Brian", "link": "https://stackoverflow.com/users/5754675/jhon-brian"}, "edited": false, "score": 0, "creation_date": 1452135382, "post_id": 34644477, "comment_id": 57038929, "body": "@JhonBrian You need to use the debugger to tell us which line this crashes on.   That would have gone a long way in helping you write the function correctly and / or identify the issue you are having.  Given that, what I wrote are the obvious corrections you needed to make, as your original post was clearly wrong."}], "tags": [], "owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "is_accepted": false, "score": 0, "last_activity_date": 1452121091, "creation_date": 1452121091, "answer_id": 34644477, "question_id": 34643985, "link": "https://stackoverflow.com/questions/34643985/getting-base-address-from-an-exe-c/34644477#34644477", "title": "getting base address from an exe c++", "body": "<p>There are several issues with your code:</p>\n\n<ul>\n<li>You are using <code>TCHAR</code>, but not using <code>TCHAR</code> consistently. </li>\n<li>You're using <code>==</code> instead of the correct string comparison function.</li>\n<li>The call to <code>GetModuleFileNameEx</code> uses the wrong array.</li>\n</ul>\n\n<p>Here is a cleaned up version of your code, with corrections (not tested, but has most if not all of the issues with the code addressed):</p>\n\n<pre><code>HMODULE GetModule(HANDLE han)\n{\n    HMODULE hMods[1024];\n    int i;\n    DWORD cbNeeded;\n    TCHAR szProcessName[MAX_PATH] = _T(\"Minesweeper.exe\");\n    EnumProcessModules(han, hMods, sizeof(hMods), &amp;cbNeeded);\n    for (i = 0; i &lt; (cbNeeded / sizeof(HMODULE)); i++)\n    {\n        TCHAR szModName[MAX_PATH];\n        GetModuleFileNameEx(han, hMods[i], szModName, sizeof(szModName) / sizeof(TCHAR));\n        if ( _tcscmp(szModName,szProcessName) == 0)\n        {\n            cout &lt;&lt; \"FOUND\" &lt;&lt; endl;\n        }\n    }\n    return 0;\n}\n</code></pre>\n\n<p>Note that the <code>_T()</code> macro is used to represent string literals.  Since Microsoft has two character-set build types, and you're using <code>TCHAR</code>, you should have the rest of your strings be <code>TCHAR</code> compatible.  Using straight up <code>char</code>, and relying on the character-set build type to save you from a compiler or runtime error is not the way to write the code.  </p>\n\n<p>In addition, the <code>sizeof</code> in the call to <code>GetModuleFileNameEx</code> must be divided by <code>sizeof(TCHAR)</code> to be correct.</p>\n\n<p>Also, to address the string comparison, the <a href=\"https://msdn.microsoft.com/en-us/library/e0z9k731.aspx\" rel=\"nofollow\">_tcscmp</a> function is used.  This function will be correct regardless of the character-set build type.</p>\n"}], "owner": {"reputation": 9, "user_id": 5754675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8869f49694ae4cf238f381a33b24900?s=128&d=identicon&r=PG&f=1", "display_name": "Jhon Brian", "link": "https://stackoverflow.com/users/5754675/jhon-brian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 593, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1452121091, "creation_date": 1452118944, "last_edit_date": 1452119100, "question_id": 34643985, "link": "https://stackoverflow.com/questions/34643985/getting-base-address-from-an-exe-c", "title": "getting base address from an exe c++", "body": "<p>I tried to get the base starting address from this exe with openprocess, but I keep crashing when I run the code and I don't really see anything wrong with it.</p>\n\n<pre><code>HMODULE GetModule(HANDLE han)\n{\n    HMODULE hMods[1024];\n    int i;\n    DWORD cbNeeded;\n    char szProcessName[MAX_PATH] = \"Minesweeper.exe\";\n    EnumProcessModules(han, hMods, sizeof(hMods), &amp;cbNeeded);\n    for (i = 0; i &lt; (cbNeeded / sizeof(HMODULE)); i++)\n    {\n        TCHAR szModName[MAX_PATH];\n        GetModuleFileNameEx(han, hMods[i], szProcessName, sizeof(szModName));\n        //printf(TEXT(\"\\t%s (0x%08X)\\n\"), szModName, hMods[i]);\n        if (szModName == szProcessName)\n        {\n            cout &lt;&lt; \"FOUND\" &lt;&lt; endl;\n        }\n    }\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "macros", "typedef", "casablanca"], "comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 2, "creation_date": 1452118991, "post_id": 34643945, "comment_id": 57033829, "body": "namespaces were invented to solve exactly this problem. If casablanca pollutes global namespace is rubbish, you just have to use different lib."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 2, "creation_date": 1452119106, "post_id": 34643945, "comment_id": 57033877, "body": "Also, a library that did use macros should be using names that would be near impossible to clash with any other name.  For example <code>CASABLANCA_MIN_VALUE</code> instead of just <code>MIN</code>.  Also <code>__declspec</code> is defined by Microsoft header, isn&#39;t it?"}, {"owner": {"reputation": 21714, "user_id": 1392132, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QF6FZ.jpg?s=128&g=1", "display_name": "5gon12eder", "link": "https://stackoverflow.com/users/1392132/5gon12eder"}, "edited": false, "score": 3, "creation_date": 1452119246, "post_id": 34643945, "comment_id": 57033959, "body": "Neither your code nor a third-party library should <code>#define __declspec</code>. It&#39;s a reserved identifier."}, {"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 1, "creation_date": 1452120952, "post_id": 34643945, "comment_id": 57034683, "body": "Using C++ you have plenty of options to avoid macros in the first place"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1452121802, "post_id": 34643945, "comment_id": 57035029, "body": "Personally, I think it is both the fault of the library to use &quot;easy to duplicate&quot; macro names, and your personal macros using &quot;easy to duplicate&quot; names.   That never works out well."}, {"owner": {"reputation": 484, "user_id": 4521764, "user_type": "registered", "accept_rate": 62, "profile_image": "https://lh3.googleusercontent.com/-f_Z1nxWKV5I/AAAAAAAAAAI/AAAAAAAAB64/0BoYk1vCNeg/photo.jpg?sz=128", "display_name": "Abhay", "link": "https://stackoverflow.com/users/4521764/abhay"}, "edited": false, "score": 0, "creation_date": 1452122571, "post_id": 34643945, "comment_id": 57035324, "body": "I agree with all the comments, but is there a way to solve this problem, can some one provide a sample or some pointer I can use ? :("}, {"owner": {"reputation": 21714, "user_id": 1392132, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QF6FZ.jpg?s=128&g=1", "display_name": "5gon12eder", "link": "https://stackoverflow.com/users/1392132/5gon12eder"}, "edited": false, "score": 0, "creation_date": 1452123793, "post_id": 34643945, "comment_id": 57035765, "body": "There is no simple general solution that will magically make your errors go away. You&#39;ll have to fix your macro names (shouldn&#39;t be all that difficult with a decent editor) or avoid using that library. You might be able to mitigate the problem to some extent by reducing the number of <code>#include</code>s. If you only need a tiny piece of the third-party library, you might be able to wrap it into your own abstraction and compile that as a separate translation unit with as few of your own headers <code>#include</code>d as possible."}, {"owner": {"reputation": 486, "user_id": 5871543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fcb0a345c0a3e5f068b2c253325b3600?s=128&d=identicon&r=PG&f=1", "display_name": "roschuma", "link": "https://stackoverflow.com/users/5871543/roschuma"}, "edited": false, "score": 0, "creation_date": 1456971175, "post_id": 34643945, "comment_id": 59196791, "body": "What macros are specifically the problem? What platform are you building for?  You can generally solve these issues by #undef&#39;ing the problematic macros before they interfere with other headers."}], "owner": {"reputation": 484, "user_id": 4521764, "user_type": "registered", "accept_rate": 62, "profile_image": "https://lh3.googleusercontent.com/-f_Z1nxWKV5I/AAAAAAAAAAI/AAAAAAAAB64/0BoYk1vCNeg/photo.jpg?sz=128", "display_name": "Abhay", "link": "https://stackoverflow.com/users/4521764/abhay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 453, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1452118818, "creation_date": 1452118818, "question_id": 34643945, "link": "https://stackoverflow.com/questions/34643945/avoiding-conflicts-in-macro-while-using-thirdparty-c-libraries", "title": "avoiding conflicts in macro while using thirdparty c++ libraries", "body": "<p>I am trying to use Casablanca, http server. to do so, I need to include headers files from Casablanca, which contains few macro and typedef that cause issues in my project. </p>\n\n<p>so my file look like this. </p>\n\n<p>simplehttpserver.h </p>\n\n<pre><code>#include \"cpprest/json.h\"\n#include \"cpprest/http_listener.h\"\n#include \"cpprest/uri.h\"\n#include \"cpprest/asyncrt_utils.h\"\n\n\nSimpleHttpServer {\n\nSimpleHttpServer(utility::string_t, std::function&lt;void(http_request)&gt; &amp;request_handler); \n\nvoid OnInitialize();\n\nvoid StartServer();\nvoid StopServer();\n\nprivate: \n std::unique_ptr&lt;http_listener&gt; m_listenerUptr;\n // Handlers\n std::function&lt;void(http::http_request)&gt; m_all_requests;\n\n pplx::task&lt;void&gt; open() { return m_listenerUptr-&gt;open(); }\n pplx::task&lt;void&gt; close() { return m_listenerUptr-&gt;close(); }\n\n\n // SimpleHttpServer http_server_;\n utility::string_t address_;  \n\n}\n</code></pre>\n\n<p>Say in my original code where I want to include this.</p>\n\n<pre><code>#include \"simplehttpserver.h\"\n</code></pre>\n\n<p>this causes all Casablanca header files pre-compiled into my project which conflicts with macros and typedef in my project. \ne.g. __declspec </p>\n\n<p>I don't want to change my macros cause that will be lot of code change. and I don't want to change Casablanca header files, cause that will also cause long term maintenance overhead. </p>\n\n<p>I am sure, this must be very common problem in c++, can someone please help me how can resolve this. </p>\n\n<p>thanks in advance. </p>\n"}, {"tags": ["c++", "visual-studio", "directx", "directx-11", "direct3d"], "comments": [{"owner": {"reputation": 6223, "user_id": 2726892, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/DE8Dn.png?s=128&g=1", "display_name": "MooseBoys", "link": "https://stackoverflow.com/users/2726892/mooseboys"}, "edited": false, "score": 0, "creation_date": 1452120019, "post_id": 34643922, "comment_id": 57034302, "body": "So what is the value it&#39;s returning?  Also, is <code>_DEBUG</code> defined?  Not all systems have the prerequisite SDKLayers installed which are required for the <code>D3D11_CREATE_DEVICE_DEBUG</code> flag to work."}, {"owner": {"reputation": 65, "user_id": 2445284, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/6a4f9335abdcbe137e3c4368e15cc9ab?s=128&d=identicon&r=PG", "display_name": "Tim Ogunmakin", "link": "https://stackoverflow.com/users/2445284/tim-ogunmakin"}, "reply_to_user": {"reputation": 6223, "user_id": 2726892, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/DE8Dn.png?s=128&g=1", "display_name": "MooseBoys", "link": "https://stackoverflow.com/users/2726892/mooseboys"}, "edited": false, "score": 0, "creation_date": 1452122948, "post_id": 34643922, "comment_id": 57035469, "body": "The value is returning FAILED after I check it with &quot;if (FAILED(hr))&quot;. I&#39;m not sure where this would be defined, are you talking about what I&#39;ve written at the top? &quot;#ifdef _DEBUG     createDeviceFlags |= D3D11_CREATE_DEVICE_DEBUG; #endif&quot;"}, {"owner": {"reputation": 6223, "user_id": 2726892, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/DE8Dn.png?s=128&g=1", "display_name": "MooseBoys", "link": "https://stackoverflow.com/users/2726892/mooseboys"}, "edited": false, "score": 0, "creation_date": 1452123424, "post_id": 34643922, "comment_id": 57035632, "body": "Yes, are you passing the <code>DEBUG</code> flag in <code>createDeviceFlags</code>?"}, {"owner": {"reputation": 65, "user_id": 2445284, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/6a4f9335abdcbe137e3c4368e15cc9ab?s=128&d=identicon&r=PG", "display_name": "Tim Ogunmakin", "link": "https://stackoverflow.com/users/2445284/tim-ogunmakin"}, "reply_to_user": {"reputation": 6223, "user_id": 2726892, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/DE8Dn.png?s=128&g=1", "display_name": "MooseBoys", "link": "https://stackoverflow.com/users/2726892/mooseboys"}, "edited": false, "score": 0, "creation_date": 1452123785, "post_id": 34643922, "comment_id": 57035764, "body": "Yeah, I hit createDeviceFlags  when I place a breakpoint there"}, {"owner": {"reputation": 498, "user_id": 3357248, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ujqnb.jpg?s=128&g=1", "display_name": "Sly_TheKing", "link": "https://stackoverflow.com/users/3357248/sly-theking"}, "edited": false, "score": 0, "creation_date": 1452594057, "post_id": 34643922, "comment_id": 57227598, "body": "what error number is contained in hr?"}], "answers": [{"comments": [{"owner": {"reputation": 6223, "user_id": 2726892, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/DE8Dn.png?s=128&g=1", "display_name": "MooseBoys", "link": "https://stackoverflow.com/users/2726892/mooseboys"}, "edited": false, "score": 0, "creation_date": 1452123561, "post_id": 34644519, "comment_id": 57035683, "body": "OP&#39;s code already tries to create a device on HW, WARP, and Ref, and permits feature level 10.  Independent of hardware support, this should generally succeed when it hits the FL 10.1 + WARP combination."}], "tags": [], "owner": {"reputation": 89, "user_id": 2231969, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/b676e8acb9c695b1b5a9c951af5d9712?s=128&d=identicon&r=PG", "display_name": "htmlboss", "link": "https://stackoverflow.com/users/2231969/htmlboss"}, "is_accepted": false, "score": -1, "last_activity_date": 1452121340, "creation_date": 1452121340, "answer_id": 34644519, "question_id": 34643922, "link": "https://stackoverflow.com/questions/34643922/d3d11createdeviceandswapchain-fails-to-succeed/34644519#34644519", "title": "D3D11CreateDeviceAndSwapChain Fails to succeed", "body": "<p>From my own meager understanding of DX11 and COM:</p>\n\n<ol>\n<li>As per rastertek.com, here is a relevant code snippet and explanation:</li>\n</ol>\n\n<blockquote>\n  <p>Note that if the user does not have a DirectX 11 video card this function call will fail to create the device and device context. Also if you are testing DirectX 11 functionality yourself and don't have a DirectX 11 video card then you can replace D3D_DRIVER_TYPE_HARDWARE with D3D_DRIVER_TYPE_REFERENCE and DirectX will use your CPU to draw instead of the video card hardware. Note that this runs 1/1000 the speed but it is good for people who don't have DirectX 11 video cards yet on all their machines.</p>\n</blockquote>\n\n<pre><code>// Create the swap chain, Direct3D device, and Direct3D device context.\nresult = D3D11CreateDeviceAndSwapChain(NULL, D3D_DRIVER_TYPE_HARDWARE, NULL, 0, &amp;featureLevel, 1, \n                       D3D11_SDK_VERSION, &amp;swapChainDesc, &amp;m_swapChain, &amp;m_device, NULL, &amp;m_deviceContext);\nif(FAILED(result))\n{\n    return false;\n}\n</code></pre>\n\n<p>Try changing the driver type flag to D3D_DRIVER_TYPE_REFERENCE for debug purposes. If that works, you probably do not have a DX11 GPU.</p>\n\n<ol start=\"2\">\n<li>As per another stackoverflow <a href=\"https://stackoverflow.com/questions/25714503/directx-exception-handling\">question</a>, the selected answer might be of some future use to you and also MSDN has an <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ff476174(v=vs.85).aspx\" rel=\"nofollow\">article</a> on DX11 HRESULT return codes and COM <a href=\"https://msdn.microsoft.com/en-ca/library/windows/desktop/ff485842%28v=vs.85%29.aspx?f=255&amp;MSPPError=-2147217396\" rel=\"nofollow\">error handling</a>.</li>\n</ol>\n\n<p>The best thing you can do right now is to find the value of the HRESULT by passing each enum from the MSDN article into an if statement. Eg:</p>\n\n<pre><code>if (hr == E_OUTOFMEMORY) {\n//do whatever\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 28528, "user_id": 3780494, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vqia1.jpg?s=128&g=1", "display_name": "Chuck Walbourn", "link": "https://stackoverflow.com/users/3780494/chuck-walbourn"}, "is_accepted": false, "score": 3, "last_activity_date": 1452130794, "creation_date": 1452130794, "answer_id": 34646004, "question_id": 34643922, "link": "https://stackoverflow.com/questions/34643922/d3d11createdeviceandswapchain-fails-to-succeed/34646004#34646004", "title": "D3D11CreateDeviceAndSwapChain Fails to succeed", "body": "<p>You have not stated which OS you are using, but the most likely cause of the failure is that your system does not have the correct Direct3D SDK Debug Layer installed. In this case, if you attempt to create a device with <code>D3D11_CREATE_DEVICE_DEBUG</code> it will fail. A quick test is if your Release build succeeds in creating the device, but your Debug builds does not.</p>\n\n<p>To get the correct SDK layers installed for your OS:</p>\n\n<ul>\n<li><strong>Windows 7 RTM</strong> -> the legacy DirectX SDK will do it</li>\n<li><strong>Windows 7 SP1</strong> with the <a href=\"http://blogs.msdn.com/b/chuckw/archive/2012/11/14/directx-11-1-and-windows-7.aspx\" rel=\"nofollow\">KB2670838</a> update (aka DirectX 11.1) -> you have to install the Windows 8.x SDK; the legacy DirectX SDK version is out of date</li>\n<li><strong>Windows 8</strong> or <strong>Windows 8.1</strong> -> The Windows 8.x SDK installs it</li>\n<li><strong>Windows 10</strong> -> This is now a <a href=\"http://blogs.msdn.com/b/vcblog/archive/2015/03/31/visual-studio-2015-and-graphics-tools-for-windows-10.aspx\" rel=\"nofollow\">Feature On Demand</a> for Windows 10. Note that if you upgraded from 10240 to 10586, then you need to re-enable the FOD.</li>\n</ul>\n\n<p>See <a href=\"http://blogs.msdn.com/b/chuckw/archive/2012/11/30/direct3d-sdk-debug-layer-tricks.aspx\" rel=\"nofollow\">Direct3D SDK Debug Layer Tricks</a></p>\n\n<p>The other possibility is that your system does not have a Feature Level 10.0 or later video card, but given the code tries to use WARP it would have worked with that.</p>\n\n<p>See <a href=\"http://blogs.msdn.com/b/chuckw/archive/2014/02/05/anatomy-of-direct3d-11-create-device.aspx\" rel=\"nofollow\">Anatomy of Direct3D 11 Create Device</a></p>\n\n<blockquote>\n  <p>You should take a look at the <a href=\"https://github.com/Microsoft/DirectXTK\" rel=\"nofollow\">DirectX Tool Kit</a> and the <a href=\"http://blogs.msdn.com/b/chuckw/archive/2015/01/06/direct3d-win32-game-visual-studio-template.aspx\" rel=\"nofollow\">Direct3D Win32 Game Template</a>.</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 460, "user_id": 5408918, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/83dbde93fdcbfdf59e1d65d8ceae946e?s=128&d=identicon&r=PG&f=1", "display_name": "Muhammad Zeeshan", "link": "https://stackoverflow.com/users/5408918/muhammad-zeeshan"}, "is_accepted": false, "score": 0, "last_activity_date": 1452202935, "last_edit_date": 1495541047, "creation_date": 1452202935, "answer_id": 34665700, "question_id": 34643922, "link": "https://stackoverflow.com/questions/34643922/d3d11createdeviceandswapchain-fails-to-succeed/34665700#34665700", "title": "D3D11CreateDeviceAndSwapChain Fails to succeed", "body": "<p>As you said, same code is running perfect on other machine, that means either you have issue in your gpu, try to run using WARP or Reference device, remove D3D_DRIVER_TYPE_HARDWARE from list and try again.</p>\n\n<p>Try it using</p>\n\n<pre><code>D3D_DRIVER_TYPE driverTypes[] =\n    {\n        D3D_DRIVER_TYPE_WARP,\n        D3D_DRIVER_TYPE_REFERENCE,\n    };\n</code></pre>\n\n<p>and kindly read details about driver types here <a href=\"https://stackoverflow.com/questions/12703228/whats-the-difference-between-warp-drivers-reference-drivers-and-software-driver\">What&#39;s the difference between WARP drivers,reference drivers and software drivers?</a></p>\n"}, {"comments": [{"owner": {"reputation": 28528, "user_id": 3780494, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vqia1.jpg?s=128&g=1", "display_name": "Chuck Walbourn", "link": "https://stackoverflow.com/users/3780494/chuck-walbourn"}, "edited": false, "score": 1, "creation_date": 1452234085, "post_id": 34667808, "comment_id": 57086811, "body": "DirectX 11 is present on Windows 10. It is the debug layer (as I noted in my answer) that is missing. Both the DirectX 11 and DirectX 12 runtimes are always present on Windows 10, as is the WARP11 device. The DEBUG device for DirectX 11, the DEBUG device for DirectX 12, and WARP12 require the <i>Graphics Tools</i> feature-on-demand to be installed. The FOD is specific to your build #, and upgrading to a new build # invalidates the FOD."}, {"owner": {"reputation": 116623, "user_id": 403671, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/454HU.jpg?s=128&g=1", "display_name": "Simon Mourier", "link": "https://stackoverflow.com/users/403671/simon-mourier"}, "edited": false, "score": 1, "creation_date": 1565187069, "post_id": 34667808, "comment_id": 101274482, "body": "For recent Windows (1903), this is located in &quot;Settings / Apps &amp; Features / Optional Features / Graphic Tools (137M &#39;This adds DirectX Graphics Tools support&#39;)&quot; but it seems something has installed it automatically... (Visual Studio ? SDK ?)"}], "tags": [], "owner": {"reputation": 65, "user_id": 2445284, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/6a4f9335abdcbe137e3c4368e15cc9ab?s=128&d=identicon&r=PG", "display_name": "Tim Ogunmakin", "link": "https://stackoverflow.com/users/2445284/tim-ogunmakin"}, "is_accepted": true, "score": 1, "last_activity_date": 1452214205, "creation_date": 1452214205, "answer_id": 34667808, "question_id": 34643922, "link": "https://stackoverflow.com/questions/34643922/d3d11createdeviceandswapchain-fails-to-succeed/34667808#34667808", "title": "D3D11CreateDeviceAndSwapChain Fails to succeed", "body": "<p>Finally Fixed the problem.</p>\n\n<p>Microsoft released an update for Windows 10 that automatically removes support for DirectX11. It has to be re-enabled. If anyone runs into this issue in Windows 10, to re-enable DirectX11 go to:</p>\n\n<p>Settings -> Apps -> Manage -> Add extra graphics support</p>\n\n<p>(apparently I need to wait 21 hours to accept my own answer...)</p>\n"}], "owner": {"reputation": 65, "user_id": 2445284, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/6a4f9335abdcbe137e3c4368e15cc9ab?s=128&d=identicon&r=PG", "display_name": "Tim Ogunmakin", "link": "https://stackoverflow.com/users/2445284/tim-ogunmakin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4602, "favorite_count": 0, "accepted_answer_id": 34667808, "answer_count": 4, "score": 1, "last_activity_date": 1452214205, "creation_date": 1452118734, "question_id": 34643922, "link": "https://stackoverflow.com/questions/34643922/d3d11createdeviceandswapchain-fails-to-succeed", "title": "D3D11CreateDeviceAndSwapChain Fails to succeed", "body": "<p>I currently have a for loop which should be broken out of once hr has succeeded however it's not succeeding, which is causing me problems later down the line. </p>\n\n<pre><code>HRESULT hr = S_OK;\n\n    UINT createDeviceFlags = 0;\n\n#ifdef _DEBUG\n    createDeviceFlags |= D3D11_CREATE_DEVICE_DEBUG;\n#endif\n\n    D3D_DRIVER_TYPE driverTypes[] =\n    {\n        D3D_DRIVER_TYPE_HARDWARE,\n        D3D_DRIVER_TYPE_WARP,\n        D3D_DRIVER_TYPE_REFERENCE,\n    };\n\n    UINT numDriverTypes = ARRAYSIZE(driverTypes);\n\n    D3D_FEATURE_LEVEL featureLevels[] =\n    {\n        D3D_FEATURE_LEVEL_11_0,\n        D3D_FEATURE_LEVEL_10_1,\n        D3D_FEATURE_LEVEL_10_0,\n    };\n\n UINT numFeatureLevels = ARRAYSIZE(featureLevels);\n\n    DXGI_SWAP_CHAIN_DESC sd;\n    ZeroMemory(&amp;sd, sizeof(sd));\n    sd.BufferCount = 1;\n    sd.BufferDesc.Width = _WindowWidth;\n    sd.BufferDesc.Height = _WindowHeight;\n    sd.BufferDesc.Format = DXGI_FORMAT_R8G8B8A8_UNORM;\n    sd.BufferDesc.RefreshRate.Numerator = 60;\n    sd.BufferDesc.RefreshRate.Denominator = 1;\n    sd.BufferUsage = DXGI_USAGE_RENDER_TARGET_OUTPUT;\n    sd.OutputWindow = _hWnd;\n    sd.SampleDesc.Count = 1;\n    sd.SampleDesc.Quality = 0;\n    sd.Windowed = TRUE;    \nfor (UINT driverTypeIndex = 0; driverTypeIndex &lt; numDriverTypes; driverTypeIndex++)\n        {\n            _driverType = driverTypes[driverTypeIndex];\n            hr = D3D11CreateDeviceAndSwapChain(nullptr, _driverType, nullptr, createDeviceFlags, featureLevels, numFeatureLevels,\n                                               D3D11_SDK_VERSION, &amp;sd, &amp;_pSwapChain, &amp;_pd3dDevice, &amp;_featureLevel, &amp;_pImmediateContext);\n            if (SUCCEEDED(hr))\n                break;\n        }\n</code></pre>\n\n<p>Clearly D3D11CreateDeviceAndSwapChain within the for loop is returning a value other than succeeded and the wierd thing is, that when I run this program on another PC it works fine! I've updated all my drivers, restarted my PC and uninstalled all anti-virus software but still no luck. Any ideas?</p>\n"}, {"tags": ["c++", "boost", "memory-leaks", "valgrind"], "comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1452122724, "post_id": 34643910, "comment_id": 57035384, "body": "Can you perform &quot;divide and conquer&quot; (i.e. debugging) to narrow down the problem? FWIW these look like false positives to me due to the runtime taking liberties..."}], "answers": [{"comments": [{"owner": {"reputation": 1271, "user_id": 959179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/695402d9a3f42056c84787ef2c944496?s=128&d=identicon&r=PG", "display_name": "nass", "link": "https://stackoverflow.com/users/959179/nass"}, "edited": false, "score": 0, "creation_date": 1452138112, "post_id": 34644574, "comment_id": 57039577, "body": "Hi. Thank you for your answer.  One thing that you mention and is indeed weird, is that I do not use gnome at all. This is a cli application. So libpixman presence is a mystery."}, {"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "reply_to_user": {"reputation": 1271, "user_id": 959179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/695402d9a3f42056c84787ef2c944496?s=128&d=identicon&r=PG", "display_name": "nass", "link": "https://stackoverflow.com/users/959179/nass"}, "edited": false, "score": 1, "creation_date": 1452172930, "post_id": 34644574, "comment_id": 57057574, "body": "Whatever libraries you are linking with, they must, indirectly, pull in the Gnome libraries. Just because you do not explicitly link with libgobject, et al..., doesn&#39;t mean that some library that you are linking with will end up pulling everything is."}, {"owner": {"reputation": 1271, "user_id": 959179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/695402d9a3f42056c84787ef2c944496?s=128&d=identicon&r=PG", "display_name": "nass", "link": "https://stackoverflow.com/users/959179/nass"}, "edited": false, "score": 0, "creation_date": 1452176340, "post_id": 34644574, "comment_id": 57060022, "body": "I understand that this might happen, I just don&#39;t see why in such a case where I write a cli application. Isn&#39;t <code>libc</code> the goto base lib for everyone? Is it <code>libg*</code>?"}, {"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "reply_to_user": {"reputation": 1271, "user_id": 959179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/695402d9a3f42056c84787ef2c944496?s=128&d=identicon&r=PG", "display_name": "nass", "link": "https://stackoverflow.com/users/959179/nass"}, "edited": false, "score": 3, "creation_date": 1452206562, "post_id": 34644574, "comment_id": 57078861, "body": "&quot;cli application&quot; is a meaningless term, and doesn&#39;t matter. The only thing that matters is which libraries you&#39;re linking with. And whatever libraries you&#39;re linking with, they are not required themselves to only link with libc. They can link with any other library. So, if you&#39;re not linking to any of the gnome libraries directly, whatever libraries you&#39;re linking with must be linking to gnome libraries, directly or also indirectly. Even if your code does not directly use any resources that require gnome, as long as the library you&#39;re using links with gnome, it will be loaded."}], "tags": [], "owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "is_accepted": true, "score": 6, "last_activity_date": 1452121692, "creation_date": 1452121692, "answer_id": 34644574, "question_id": 34643910, "link": "https://stackoverflow.com/questions/34643910/valgrind-output-in-c-of-still-reachable-and-possibly-lost-blocks-do-not-re/34644574#34644574", "title": "valgrind output in C++ of &quot;still reachable&quot; and &quot;possibly lost&quot; blocks do not reference my sources", "body": "<p>The original allocation calls are from the shared library initialization code, that gets executed when the shared library your application links with is loaded at runtime, typically before any of your application code actually runs. This is why you don't see your code in the backtrace. It didn't even run yet.</p>\n\n<p>The key symbol to look for is <code>_dl_init</code>, the entry point for the shared library initialization. Looking upstream of that tells you which library is being initialized. In your case, it's a bunch of Gnome libraries, and a library called \"libpixman\".</p>\n\n<p>Shared libraries also have a cleanup function that gets invoked when the shared library gets unloaded.</p>\n\n<p>A well-organized shared library will use the shared library cleanup function to orderly deallocate all memory that it allocated at startup. Unfortunately, this kind of inattentiveness to detail is sadly common: shared libraries allocating a bunch of memory from the heap, for the shared library's internal static tables, without bothering to deallocate that memory when the shared library gets unloaded.</p>\n\n<p>It's unlikely that this is responsible for the memory leaks you're observing while your application is running, except in one case which I'll mention in a moment. It's been my experience that this sloppy allocation practice is only used for static tables that shared libraries allocate once, when they get loaded. The thinking that goes here is that it's not necessary to explicitly clean up after oneself, because the library will only get unloaded once, when the process exits.</p>\n\n<p>Sadly, the developers that cut these kind of corners have never heard of <code>dlopen</code>() and <code>dlclose</code>(). This makes it impossible for large applications to load the shared library on demand only when it's needed and unload it afterwards, until it's needed again.</p>\n\n<p>So, unless your application code is repeatedly <code>dlopen</code>()ing and <code>dlclose</code>()ing all these Gnome libraries, and libpixman, you'll have to continue looking for your leaks somewhere else. You should read up on, and employ valgrind's suppression files, to suppress this annoying noise from its output.</p>\n"}], "owner": {"reputation": 1271, "user_id": 959179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/695402d9a3f42056c84787ef2c944496?s=128&d=identicon&r=PG", "display_name": "nass", "link": "https://stackoverflow.com/users/959179/nass"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1444, "favorite_count": 0, "accepted_answer_id": 34644574, "answer_count": 1, "score": 5, "last_activity_date": 1452142417, "creation_date": 1452118687, "last_edit_date": 1495541690, "question_id": 34643910, "link": "https://stackoverflow.com/questions/34643910/valgrind-output-in-c-of-still-reachable-and-possibly-lost-blocks-do-not-re", "title": "valgrind output in C++ of &quot;still reachable&quot; and &quot;possibly lost&quot; blocks do not reference my sources", "body": "<p>I am having a hard time pinpointing where do I get memory leaks in my code.</p>\n\n<p>The valgrind command I run:</p>\n\n<pre><code>valgrind --leak-check=full --log-file=vg1.log --show-leak-kinds=all --leak-resolution=low --track-origins=yes --leak-check-heuristics=all ./enalu_dbg\n</code></pre>\n\n<p>and the output </p>\n\n<pre><code>==22866== Memcheck, a memory error detector\n==22866== Copyright (C) 2002-2013, and GNU GPL'd, by Julian Seward et al.\n==22866== Using Valgrind-3.10.1 and LibVEX; rerun with -h for copyright info\n==22866== Command: ./enalu_dbg\n==22866== Parent PID: 21933\n==22866== \n==22866== \n==22866== HEAP SUMMARY:\n==22866==     in use at exit: 47,252 bytes in 240 blocks\n==22866==   total heap usage: 288 allocs, 48 frees, 55,138 bytes allocated\n==22866== \n==22866== 4 bytes in 1 blocks are still reachable in loss record 1 of 23\n==22866==    at 0x4C2AB80: malloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)\n==22866==    by 0x77018CD: ??? (in /lib/x86_64-linux-gnu/libglib-2.0.so.0.4002.0)\n==22866==    by 0x7701D28: g_private_get (in /lib/x86_64-linux-gnu/libglib-2.0.so.0.4002.0)\n==22866==    by 0x76DB20C: g_slice_alloc (in /lib/x86_64-linux-gnu/libglib-2.0.so.0.4002.0)\n==22866==    by 0x76AF17D: g_hash_table_new_full (in /lib/x86_64-linux-gnu/libglib-2.0.so.0.4002.0)\n==22866==    by 0x76CF494: g_quark_from_static_string (in /lib/x86_64-linux-gnu/libglib-2.0.so.0.4002.0)\n==22866==    by 0x74314AB: ??? (in /usr/lib/x86_64-linux-gnu/libgobject-2.0.so.0.4002.0)\n==22866==    by 0x4010139: call_init.part.0 (dl-init.c:78)\n==22866==    by 0x4010222: call_init (dl-init.c:36)\n==22866==    by 0x4010222: _dl_init (dl-init.c:126)\n==22866==    by 0x4001309: ??? (in /lib/x86_64-linux-gnu/ld-2.19.so)\n\n...\n\n==22866== 184 bytes in 1 blocks are possibly lost in loss record 13 of 23\n==22866==    at 0x4C2CE8E: realloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)\n==22866==    by 0x76C56AE: g_realloc (in /lib/x86_64-linux-gnu/libglib-2.0.so.0.4002.0)\n==22866==    by 0x7451618: ??? (in /usr/lib/x86_64-linux-gnu/libgobject-2.0.so.0.4002.0)\n==22866==    by 0x74560D4: g_type_register_static (in /usr/lib/x86_64-linux-gnu/libgobject-2.0.so.0.4002.0)\n==22866==    by 0x7442DE6: g_param_type_register_static (in /usr/lib/x86_64-linux-gnu/libgobject-2.0.so.0.4002.0)\n==22866==    by 0x74449AB: ??? (in /usr/lib/x86_64-linux-gnu/libgobject-2.0.so.0.4002.0)\n==22866==    by 0x74315E9: ??? (in /usr/lib/x86_64-linux-gnu/libgobject-2.0.so.0.4002.0)\n==22866==    by 0x4010139: call_init.part.0 (dl-init.c:78)\n==22866==    by 0x4010222: call_init (dl-init.c:36)\n==22866==    by 0x4010222: _dl_init (dl-init.c:126)\n==22866==    by 0x4001309: ??? (in /lib/x86_64-linux-gnu/ld-2.19.so)\n==22866== \n\n...\n\n==22866== 6,028 bytes in 60 blocks are still reachable in loss record 21 of 23\n==22866==    at 0x4C2CC70: calloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)\n==22866==    by 0x76C5668: g_malloc0 (in /lib/x86_64-linux-gnu/libglib-2.0.so.0.4002.0)\n==22866==    by 0x74514D9: ??? (in /usr/lib/x86_64-linux-gnu/libgobject-2.0.so.0.4002.0)\n==22866==    by 0x74560D4: g_type_register_static (in /usr/lib/x86_64-linux-gnu/libgobject-2.0.so.0.4002.0)\n==22866==    by 0x7442DE6: g_param_type_register_static (in /usr/lib/x86_64-linux-gnu/libgobject-2.0.so.0.4002.0)\n==22866==    by 0x744423A: ??? (in /usr/lib/x86_64-linux-gnu/libgobject-2.0.so.0.4002.0)\n==22866==    by 0x74315E9: ??? (in /usr/lib/x86_64-linux-gnu/libgobject-2.0.so.0.4002.0)\n==22866==    by 0x4010139: call_init.part.0 (dl-init.c:78)\n==22866==    by 0x4010222: call_init (dl-init.c:36)\n==22866==    by 0x4010222: _dl_init (dl-init.c:126)\n==22866==    by 0x4001309: ??? (in /lib/x86_64-linux-gnu/ld-2.19.so)\n==22866== \n==22866== 10,360 bytes in 5 blocks are still reachable in loss record 22 of 23\n==22866==    at 0x4C2AB80: malloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)\n==22866==    by 0x8B16E9A: ??? (in /usr/lib/x86_64-linux-gnu/libpixman-1.so.0.30.2)\n==22866==    by 0x8B15ACE: ??? (in /usr/lib/x86_64-linux-gnu/libpixman-1.so.0.30.2)\n==22866==    by 0x8B17585: ??? (in /usr/lib/x86_64-linux-gnu/libpixman-1.so.0.30.2)\n==22866==    by 0x8AC9508: ??? (in /usr/lib/x86_64-linux-gnu/libpixman-1.so.0.30.2)\n==22866==    by 0x4010139: call_init.part.0 (dl-init.c:78)\n==22866==    by 0x4010222: call_init (dl-init.c:36)\n==22866==    by 0x4010222: _dl_init (dl-init.c:126)\n==22866==    by 0x4001309: ??? (in /lib/x86_64-linux-gnu/ld-2.19.so)\n==22866== \n==22866== 16,600 bytes in 4 blocks are still reachable in loss record 23 of 23\n==22866==    at 0x4C2AB80: malloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)\n==22866==    by 0x76C5610: g_malloc (in /lib/x86_64-linux-gnu/libglib-2.0.so.0.4002.0)\n==22866==    by 0x76CF445: g_quark_from_static_string (in /lib/x86_64-linux-gnu/libglib-2.0.so.0.4002.0)\n==22866==    by 0x74314AB: ??? (in /usr/lib/x86_64-linux-gnu/libgobject-2.0.so.0.4002.0)\n==22866==    by 0x4010139: call_init.part.0 (dl-init.c:78)\n==22866==    by 0x4010222: call_init (dl-init.c:36)\n==22866==    by 0x4010222: _dl_init (dl-init.c:126)\n==22866==    by 0x4001309: ??? (in /lib/x86_64-linux-gnu/ld-2.19.so)\n==22866== \n==22866== LEAK SUMMARY:\n==22866==    definitely lost: 0 bytes in 0 blocks\n==22866==    indirectly lost: 0 bytes in 0 blocks\n==22866==      possibly lost: 1,352 bytes in 18 blocks\n==22866==    still reachable: 45,900 bytes in 222 blocks\n==22866==                       of which reachable via heuristic:\n==22866==                         newarray           : 1,536 bytes in 16 blocks\n==22866==         suppressed: 0 bytes in 0 blocks\n==22866== \n==22866== For counts of detected and suppressed errors, rerun with: -v\n==22866== ERROR SUMMARY: 3 errors from 3 contexts (suppressed: 0 from 0)\n</code></pre>\n\n<p>Most of the records shown (but 1) are \"still reachable blocks\". I have read that these may be due to delayed pool deallocation. ie deallocations of containers (such as vectors , of which I use alot) after the termination of my main(argc,argv){} function.</p>\n\n<p>However, there is surely something wrong because after about 8-9 hours of execution, I clearly see that the executable is using more memory than it started of with (in my pc it started with 0.6% memory usage and after 8h it used about 6%).</p>\n\n<p>The problem is that these are cryptic messages - and absolutely none originates from my source files. AS I read <a href=\"https://stackoverflow.com/questions/29718832/interpreting-valgrind-output-for-a-c-sdl2-program\">here</a> \"_dl*\" calls are related to linux loader. So how can I pinpoint where the problem originates?</p>\n\n<p>I should add that this code uses</p>\n\n<ol>\n<li>1+3 threads(for all blocking operations, ie. to read from stdin and serial port and write data to a file), </li>\n<li>the boost library (especially circular buffers), and </li>\n<li>the gsl library. </li>\n</ol>\n\n<p>I have however built the code from small proof of concept parts, which do not show any errors/warnings in valgrind.</p>\n\n<p>Additionally, I have only a limited number of pointers to class objects in my code, which I verified I <code>delete</code> in the respective destructors. </p>\n"}, {"tags": ["c++", "visual-studio"], "comments": [{"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 1, "creation_date": 1452118277, "post_id": 34643754, "comment_id": 57033474, "body": "That <code>foreach</code> looks like C#.  C++/CLI has a <code>for each</code>, but it&#39;s better to use the ISO standard compliant <code>for( auto&amp; control : controls )</code> rather than the MS-specific proof-of-concept syntax"}, {"owner": {"reputation": 7849, "user_id": 576396, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/8371065173a6c6bc169a4694c4fa2b50?s=128&d=identicon&r=PG", "display_name": "Katana314", "link": "https://stackoverflow.com/users/576396/katana314"}, "reply_to_user": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1452118421, "post_id": 34643754, "comment_id": 57033559, "body": "@BenVoigt Sorry - It is C++, but I used pseudocode shorthand to put together the example rather than writing out iterator syntax. I can try to adjust my example to an extremely exact replication if you believe things like looping method to be relevant."}, {"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 0, "creation_date": 1452118433, "post_id": 34643754, "comment_id": 57033564, "body": "Thought about smart pointers? Saves a lot of hassle than raw pointers"}, {"owner": {"reputation": 5258, "user_id": 1274747, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7a2942e1483b9befa80a61cb98bce39d?s=128&d=identicon&r=PG", "display_name": "axalis", "link": "https://stackoverflow.com/users/1274747/axalis"}, "edited": false, "score": 0, "creation_date": 1452118494, "post_id": 34643754, "comment_id": 57033590, "body": "This should IMHO always work and should never be optimized out - if the code really is as above. In the real code - any chance that there ad multiple threads, which run concurrently? Then this could be a timing issue."}, {"owner": {"reputation": 8178, "user_id": 2920343, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/dbfe32738597d61775971cab5efebb67?s=128&d=identicon&r=PG&f=1", "display_name": "CompuChip", "link": "https://stackoverflow.com/users/2920343/compuchip"}, "edited": false, "score": 4, "creation_date": 1452118518, "post_id": 34643754, "comment_id": 57033601, "body": "Not an answer to your question &quot;how to avoid these optimizations in general&quot; but for your specific example: you can avoid it by passing in the int by value (<code>int DoLayout(int availableWidth, int innerYValue)</code>) and having the function return the new amount: <code>innerYValue += control-&gt;DoLayout(availableWidth, innerYValue);</code>"}, {"owner": {"reputation": 7849, "user_id": 576396, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/8371065173a6c6bc169a4694c4fa2b50?s=128&d=identicon&r=PG", "display_name": "Katana314", "link": "https://stackoverflow.com/users/576396/katana314"}, "reply_to_user": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 0, "creation_date": 1452118538, "post_id": 34643754, "comment_id": 57033618, "body": "@EdHeal I don&#39;t really think of references as raw pointers...?"}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "reply_to_user": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 4, "creation_date": 1452118612, "post_id": 34643754, "comment_id": 57033659, "body": "@EdHeal: There&#39;s no room for a smart pointer here -- the lifetime of <code>innerYValue</code> is already automatic and needs no help."}, {"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 0, "creation_date": 1452118616, "post_id": 34643754, "comment_id": 57033661, "body": "@Katana314 - First statement is that you do not like pointers. I suggest that you have to use them sometimes. Smart pointers are better than raw pointers."}, {"owner": {"reputation": 7849, "user_id": 576396, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/8371065173a6c6bc169a4694c4fa2b50?s=128&d=identicon&r=PG", "display_name": "Katana314", "link": "https://stackoverflow.com/users/576396/katana314"}, "reply_to_user": {"reputation": 8178, "user_id": 2920343, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/dbfe32738597d61775971cab5efebb67?s=128&d=identicon&r=PG&f=1", "display_name": "CompuChip", "link": "https://stackoverflow.com/users/2920343/compuchip"}, "edited": false, "score": 0, "creation_date": 1452118654, "post_id": 34643754, "comment_id": 57033676, "body": "@CompuChip Thanks. I think I thought of doing that at one point. The reason I decided against it was, for future expansion I could definitely imagine having multiple values go both in and out of the method, and wasn&#39;t sure if I wanted to create a class just to hold the new information."}, {"owner": {"reputation": 7849, "user_id": 576396, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/8371065173a6c6bc169a4694c4fa2b50?s=128&d=identicon&r=PG", "display_name": "Katana314", "link": "https://stackoverflow.com/users/576396/katana314"}, "reply_to_user": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 0, "creation_date": 1452118698, "post_id": 34643754, "comment_id": 57033697, "body": "@EdHeal Well, I can qualify that first line: I dislike raw pointers. I&#39;m fine with smart pointers. I just don&#39;t see how they would provide any advantage over a reference here (besides, maybe, cheating a buggy compiler)"}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 9, "creation_date": 1452118740, "post_id": 34643754, "comment_id": 57033712, "body": "@Katana314: There&#39;s no rule that allows an optimizer to mess up the code as you have described it.  Most likely, you have undefined behavior nearby (such as reading an uninitialized value) and then the optimizer makes you no guarantees at all."}, {"owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "edited": false, "score": 0, "creation_date": 1452118835, "post_id": 34643754, "comment_id": 57033753, "body": "I would always create such a class [as you mentioned to CompuChip] for multiple returned values.  I would do it even if I had just one as you do here, because it allows the change to multiple by justing adding a member instead of lots of edits later"}, {"owner": {"reputation": 5258, "user_id": 1274747, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7a2942e1483b9befa80a61cb98bce39d?s=128&d=identicon&r=PG", "display_name": "axalis", "link": "https://stackoverflow.com/users/1274747/axalis"}, "edited": false, "score": 0, "creation_date": 1452119139, "post_id": 34643754, "comment_id": 57033897, "body": "You can try to return the value, but to me it really seems it could be a timing issue - especially when it works when you step through it (do you do the stepping with the release app? - if it is workign then, the code is definitely not optimized out) - it could be for example, that the fonts are loading too slow and are not initialized yet in the release mode, or some similar issue if something is being calculated in another thread."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 1, "creation_date": 1452119300, "post_id": 34643754, "comment_id": 57033984, "body": "The code as written will not produce results as described. This is a very basic code, and I do not believe any compiler can be buggy to the point of messing this. This is also correct code. I&#39;d rather return the consumed amout to the caller and let the call site do the summation, but this is not the case of the problem here."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 1, "creation_date": 1452119337, "post_id": 34643754, "comment_id": 57034008, "body": "If I am to take a wild guess, I&#39;d say, it is a data race somewhere."}, {"owner": {"reputation": 5258, "user_id": 1274747, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7a2942e1483b9befa80a61cb98bce39d?s=128&d=identicon&r=PG", "display_name": "axalis", "link": "https://stackoverflow.com/users/1274747/axalis"}, "edited": false, "score": 0, "creation_date": 1452119438, "post_id": 34643754, "comment_id": 57034046, "body": "Try to add a delay before the loop, say Sleep(1000) - if it will work then, it is definitely a timing issue."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 5258, "user_id": 1274747, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7a2942e1483b9befa80a61cb98bce39d?s=128&d=identicon&r=PG", "display_name": "axalis", "link": "https://stackoverflow.com/users/1274747/axalis"}, "edited": false, "score": 1, "creation_date": 1452119784, "post_id": 34643754, "comment_id": 57034185, "body": "@axalis, and than OP might be tempted simply to leave it there and consider the problem solved (ask me if I&#39;ve seen such code!). My advice to OP - DO NOT."}, {"owner": {"reputation": 5258, "user_id": 1274747, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7a2942e1483b9befa80a61cb98bce39d?s=128&d=identicon&r=PG", "display_name": "axalis", "link": "https://stackoverflow.com/users/1274747/axalis"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1452120003, "post_id": 34643754, "comment_id": 57034295, "body": "@SergeyA Yes, definitely. That should just serve to test whether or not it is a timing issue, but afterwards it should be really resolved differently (perhaps using mutex/critical section/condition etc.)."}, {"owner": {"reputation": 54044, "user_id": 3723423, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2c916310a1261b53773de75fc83e5ad?s=128&d=identicon&r=PG&f=1", "display_name": "Christophe", "link": "https://stackoverflow.com/users/3723423/christophe"}, "edited": false, "score": 2, "creation_date": 1452120586, "post_id": 34643754, "comment_id": 57034542, "body": "It is not reproducible in a small app, are you really sure that it&#39;s the optimizer and not the remainig code that you&#39;ve stripped that causes havock ?  Statistically speaking the latter has a much higher probability..."}, {"owner": {"reputation": 7849, "user_id": 576396, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/8371065173a6c6bc169a4694c4fa2b50?s=128&d=identicon&r=PG", "display_name": "Katana314", "link": "https://stackoverflow.com/users/576396/katana314"}, "edited": false, "score": 0, "creation_date": 1452124738, "post_id": 34643754, "comment_id": 57036070, "body": "To reply to a few queries: will try Sleep soon just to check for race conditions - although I don&#39;t know of any second thread that affects relevant resources. Secondly, I know optimizers tend to run in Release but not Debug. I know optimizer bugs are unlikely, just that looking over my code am failing to find any other &quot;intermittent-behavior&quot; nail that might explain the exact conditions I&#39;m seeing. Whatever I find, many thanks for all the suggestions and insight."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1527134156, "post_id": 34643754, "comment_id": 88013956, "body": "Please don&#39;t write solutions in the Question box  (same comment applies to the editor who tweaked it recently)"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1527134217, "post_id": 34643754, "comment_id": 88013972, "body": "I suggest closing the question as &quot;can no longer be reproduced&quot;"}], "answers": [{"comments": [{"owner": {"reputation": 7849, "user_id": 576396, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/8371065173a6c6bc169a4694c4fa2b50?s=128&d=identicon&r=PG", "display_name": "Katana314", "link": "https://stackoverflow.com/users/576396/katana314"}, "edited": false, "score": 0, "creation_date": 1452126669, "post_id": 34645369, "comment_id": 57036570, "body": "There is no multithreading in the given example - the entire lifecycle of consumedYAmt exists in a single thread."}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "reply_to_user": {"reputation": 7849, "user_id": 576396, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/8371065173a6c6bc169a4694c4fa2b50?s=128&d=identicon&r=PG", "display_name": "Katana314", "link": "https://stackoverflow.com/users/576396/katana314"}, "edited": false, "score": 0, "creation_date": 1452154206, "post_id": 34645369, "comment_id": 57045467, "body": "@Katana314: And I&#39;m quite confident that the given example (in isolation) does not exhibit the observed behavior."}, {"owner": {"reputation": 61429, "user_id": 572743, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/9941673f566f229bc536c1c2b558884e?s=128&d=identicon&r=PG&f=1", "display_name": "Damon", "link": "https://stackoverflow.com/users/572743/damon"}, "reply_to_user": {"reputation": 7849, "user_id": 576396, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/8371065173a6c6bc169a4694c4fa2b50?s=128&d=identicon&r=PG", "display_name": "Katana314", "link": "https://stackoverflow.com/users/576396/katana314"}, "edited": false, "score": 2, "creation_date": 1452181741, "post_id": 34645369, "comment_id": 57064007, "body": "@Katana314: Assuming that threads are the cause of the problem is entirely reasonable. The only other possibility (short of the compiler being broken beyond all reason) is that <code>measureText</code> contains an uninitialized variable and thus for some contorted reason happens to return always-zero in one build (adding zero to a reference obviously doesn&#39;t affect the referenced value a lot)."}], "tags": [], "owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "is_accepted": false, "score": 1, "last_activity_date": 1452126276, "creation_date": 1452126276, "answer_id": 34645369, "question_id": 34643754, "link": "https://stackoverflow.com/questions/34643754/is-ref-copying-a-compiler-optimization-and-can-i-avoid-it/34645369#34645369", "title": "Is ref-copying a compiler optimization, and can I avoid it?", "body": "<p>\"the <code>consumedYAmt</code> variable actually stays at 0\"</p>\n\n<p>The behavior you describe is typical for a specific optimization that's more due to the CPU than the compiler. I suspect you're logging <code>consumedYAmt</code> from another thread. The updates to <code>consumedYAmt</code> simply don't make it to that other thread.</p>\n\n<p>This is legal for the CPU, because the C++ compiler didn't put in memory fences. And the CPU compiler didn't put in fences because the variable isn't atomic.</p>\n\n<p>In a small program without threads, this simply doesn't show up, nor does it show in debug mode.</p>\n"}, {"tags": [], "owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "is_accepted": false, "score": 0, "last_activity_date": 1527134183, "creation_date": 1527134183, "answer_id": 50500713, "question_id": 34643754, "link": "https://stackoverflow.com/questions/34643754/is-ref-copying-a-compiler-optimization-and-can-i-avoid-it/50500713#50500713", "title": "Is ref-copying a compiler optimization, and can I avoid it?", "body": "<p><em>Written by OP</em></p>\n\n<hr>\n\n<p>Okay, eventually figured this one out. As simple as the issue was, pinning it down became difficult because of Release mode's debugger seemingly acting in inconsistent ways. When I changed tactic to adding Logging statements in lots of places, I found that my Control class had an \"mShowing\" variable that was uninitialized in its constructor. In debug mode, it apparently retained uninitialized memory which I guess made it \"true\" - but in release mode, my best analysis is that memory protections made it default to \"false\", which as it turns out skipped the main body of the DoLayout method most of the time.</p>\n\n<p>Since through the process, responders were low on information to work with (certainly could've been easier if I posted a longer example), I instead simply upvoted each comment that mentioned uninitialized variables.</p>\n"}], "owner": {"reputation": 7849, "user_id": 576396, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/8371065173a6c6bc169a4694c4fa2b50?s=128&d=identicon&r=PG", "display_name": "Katana314", "link": "https://stackoverflow.com/users/576396/katana314"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1527134183, "creation_date": 1452118093, "last_edit_date": 1527134125, "question_id": 34643754, "link": "https://stackoverflow.com/questions/34643754/is-ref-copying-a-compiler-optimization-and-can-i-avoid-it", "title": "Is ref-copying a compiler optimization, and can I avoid it?", "body": "<p>I dislike pointers, and generally try to write as much code as I can using refs instead.</p>\n\n<p>I've written a very rudimentary \"vertical layout\" system for a small Win32 app. Most of the Layout methods look like this:</p>\n\n<pre><code>void Control::DoLayout(int availableWidth, int &amp;consumedYAmt)\n{\n  textYPosition = consumedYAmt;\n  consumedYAmt += measureText(font, availableWidth);\n}\n</code></pre>\n\n<p>They are looped through like so:</p>\n\n<pre><code>int innerYValue = 0;\nforeach(control in controls) {\n  control-&gt;DoLayout(availableWidth, innerYValue);\n}\nint heightOfControl = innerYValue;\n</code></pre>\n\n<p>It's not drawing its content here, just calculating exactly how much space this control will require (usually it's adding padding too, etc). This has worked great for me.......in <em>debug</em> mode.</p>\n\n<p>I found that in Release mode, I could suddenly see tangible, loggable issues where, when I'm looping through controls and calling <code>DoLayout()</code>, the <code>consumedYAmt</code> variable actually stays at 0 in the outside loop. The most annoying part is that if I put in breakpoints and walk through the code line by line, this stops happening and parts of it are properly updated by the inside \"add\" methods.</p>\n\n<p>I'm kind of thinking about whether this would be some compiler optimization where they think I'm simply adding the <em>ref</em> flag to ints as a way to optimize memory; or if there's any possibility this actually works in a way different from how it seems.</p>\n\n<p>I would give a minimum reproducible example, but I wasn't able to do so with a tiny commandline app. I get the sense that if this is an optimization, it only kicks in for larger code blocks and indirections.</p>\n\n<p>EDIT: Again sorry for generally low information, but I'm now getting hints that this might be some kind of linker issue. I skipped one part of the inheritance model in my pseudocode: The calling class actually calls \"<code>Layout()</code>\", which is a non-virtual function on the root definition of the class. This function performs some implementation-neutral logic, and then calls <code>DoLayout()</code> with the same arguments. However, I'm now noticing that if I try adding a breakpoint to <code>Layout()</code>, Visual Studio claims that \"The breakpoint will not be hit. No executable code of the debugger's target code type is associated with this line.\" I <em>am</em> able to add breakpoints to certain other lines, but I'm beginning to notice weird stepping logic where it refuses to go inside certain functions, like <code>Layout</code>. Already tried completely clearing the build folders and rebuilding. I'm going to have to keep looking, since I have to admit this isn't a lot to go on.</p>\n\n<p>Also, random addition: The \"controls\" list is a vector containing shared_ptr objects. I hadn't suspected the looping mechanism previously but now I'm looking more closely.</p>\n"}, {"tags": ["c++", "windows", "shell", "boost", "cygwin"], "comments": [{"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 1, "creation_date": 1452123099, "post_id": 34643732, "comment_id": 57035526, "body": "Installing Cygwin sounds like serious overkill. Visual Studio comes with  a &quot;make&quot; utility called <code>nmake</code>, and a more heavy-weight general build system (the one used by Visual Studio itself) called <code>msbuild</code>. But you don&#39;t need either tool to build your little program in a shell script: just create a Windows batch file with the build command. A batch file is a shell script."}, {"owner": {"user_type": "does_not_exist", "display_name": "user5559841"}, "reply_to_user": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 0, "creation_date": 1452125091, "post_id": 34643732, "comment_id": 57036168, "body": "Thanks for your answer. But I actually want to use the gnu compiler."}, {"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 0, "creation_date": 1452125943, "post_id": 34643732, "comment_id": 57036400, "body": "The answer is the same with g++, except the additional, that installing Cygwin is overkill and overcomplex for just using g++ in Windows. Install some MinGW distro instead. That&#39;s what they&#39;re for."}], "answers": [{"tags": [], "owner": {"reputation": 378, "user_id": 5012055, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1086435194717944/picture?type=large", "display_name": "Liron Ilayev", "link": "https://stackoverflow.com/users/5012055/liron-ilayev"}, "is_accepted": false, "score": 0, "last_activity_date": 1452119572, "creation_date": 1452119572, "answer_id": 34644135, "question_id": 34643732, "link": "https://stackoverflow.com/questions/34643732/build-a-c-program-with-makefile-in-windows/34644135#34644135", "title": "build a c++ program with makefile in windows", "body": "<ol>\n<li>Install boost from <a href=\"http://www.boost.org/users/download/\" rel=\"nofollow\">http://www.boost.org/users/download/</a></li>\n<li>I'm not sure of the system that you use to compile C++ but thing is for sure, you need to create a <strong>makefile</strong> for your program.</li>\n<li><p>After <strong>makefile</strong> is created, add to the flags the following:</p>\n\n<p>-lboost_system -lboost_locale</p></li>\n</ol>\n\n<p>Good luck!</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user5559841"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 210, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1456635222, "creation_date": 1452118029, "last_edit_date": 1456635222, "question_id": 34643732, "link": "https://stackoverflow.com/questions/34643732/build-a-c-program-with-makefile-in-windows", "title": "build a c++ program with makefile in windows", "body": "<p>I wrote a little c++ program with visual studio. \nI have to build that program with a shell script. For that I installed cygwin. How can I build a program, that uses an environment variable for the boost-library?</p>\n"}, {"tags": ["c++", "doubly-linked-list"], "comments": [{"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 2, "creation_date": 1452118244, "post_id": 34643618, "comment_id": 57033460, "body": "<i>In my implementation of a doubly-linked list in C++, I can&#39;t understand why...</i> -- Before writing a single line of code, you should have drawn, with lines and boxes, the operations that would need to be done to insert into a linked list.  Then there would be no issue in what would need to be done.  Completing a linked list assignment (assuming this is homework) all depends on pictorially making the design first, and not trying to code your way to a solution."}, {"owner": {"reputation": 13, "user_id": 3263786, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3250018e4e454ba97de5739c47eda364?s=128&d=identicon&r=PG&f=1", "display_name": "user125598", "link": "https://stackoverflow.com/users/3263786/user125598"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1452136979, "post_id": 34643618, "comment_id": 57039314, "body": "I&#39;m just getting my feet wet in programming. This code snippet is taken from &quot;Learn Data Structures in 24 Hours&quot;. After browsing a bit here, it looks like these books are not recommended even for a preview (and the unreliable code seems like it would waste my time). Thanks for your tip though!"}], "answers": [{"tags": [], "owner": {"reputation": 204, "user_id": 5729751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3440d4b3e9ee09804f544976e377f937?s=128&d=identicon&r=PG&f=1", "display_name": "P. Brunet", "link": "https://stackoverflow.com/users/5729751/p-brunet"}, "is_accepted": true, "score": 1, "last_activity_date": 1452117930, "creation_date": 1452117930, "answer_id": 34643698, "question_id": 34643618, "link": "https://stackoverflow.com/questions/34643618/doubly-linked-list-in-c-insertfirst-vs-insertlast-implementation/34643698#34643698", "title": "Doubly-linked list in C++ - insertFirst vs. insertLast implementation", "body": "<p>First, your implementation seems incorrect as you should not set <code>pNewLink-&gt;pNext</code> in <code>insertFirst</code> when the list is empty.</p>\n\n<p>If you do this modification, both method will look like more \"symetric\".</p>\n\n<p>If you insert last. You don't have \"next value\" so you don't set it but you have previous value so you set this.</p>\n\n<p>If you insert first, you don't have \"previous value\" so you don't set it but you have a next value so you set this.</p>\n"}], "owner": {"reputation": 13, "user_id": 3263786, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3250018e4e454ba97de5739c47eda364?s=128&d=identicon&r=PG&f=1", "display_name": "user125598", "link": "https://stackoverflow.com/users/3263786/user125598"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 215, "favorite_count": 0, "accepted_answer_id": 34643698, "answer_count": 1, "score": -1, "last_activity_date": 1452119451, "creation_date": 1452117524, "last_edit_date": 1452119451, "question_id": 34643618, "link": "https://stackoverflow.com/questions/34643618/doubly-linked-list-in-c-insertfirst-vs-insertlast-implementation", "title": "Doubly-linked list in C++ - insertFirst vs. insertLast implementation", "body": "<p>In my implementation of a doubly-linked list in C++, I can't understand why in <code>insertFirst</code>, you <strong>always</strong> need to to do <code>pNewLink-&gt;pNext = pFirst</code> but in <code>insertLast</code> you <strong>only</strong> do <code>pNewLink-&gt;pPrevious = pLast</code> if the list isn't empty? Otherwise it seems like the two methods seem to be exact opposites of each other.</p>\n\n<pre><code>void insertFirst(double dd) //insert at front of list\n{\n    Link* pNewLink = new Link(dd);\n\n    if( isEmpty() ) \n        pLast = pNewLink;\n    else\n        pFirst-&gt;pPrevious = pNewLink;\n\n    pNewLink-&gt;pNext = pFirst;\n    pFirst = pNewLink;\n}\n\n\nvoid insertLast(double dd)  //insert at end of list\n{\n    Link* pNewLink = new Link(dd);\n\n    if( isEmpty() )\n        pFirst = pNewLink;\n    else\n    {\n        pLast-&gt;pPrevious = pLast;\n        pNewLink-&gt;pPrevious = pLast;\n    }\n\n    pLast = pNewLink;\n}\n</code></pre>\n"}, {"tags": ["c++", "function", "recursion"], "comments": [{"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 3, "creation_date": 1452117738, "post_id": 34643568, "comment_id": 57033216, "body": "Why not use a pencil and a sheet of paper and write out the steps of power with the values of <code>x</code> and <code>n</code> for a new values of <code>x</code> and <code>n</code> to get an idea of what is going on"}, {"owner": {"reputation": 3612, "user_id": 2422013, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/VwKps.jpg?s=128&g=1", "display_name": "AStopher", "link": "https://stackoverflow.com/users/2422013/astopher"}, "edited": false, "score": 1, "creation_date": 1452118010, "post_id": 34643568, "comment_id": 57033352, "body": "Ask your lecturer/teacher, they&#39;ll be able to explain to you."}, {"owner": {"reputation": 63, "user_id": 5709289, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/10205591864492934/picture?type=large", "display_name": "Eric Wood", "link": "https://stackoverflow.com/users/5709289/eric-wood"}, "edited": false, "score": 0, "creation_date": 1452118470, "post_id": 34643568, "comment_id": 57033582, "body": "The teacher does not seem to directly address the issue at hand and the book falls short of explaining it I feel. I have found much better answers and understanding from this website."}, {"owner": {"reputation": 8178, "user_id": 2920343, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/dbfe32738597d61775971cab5efebb67?s=128&d=identicon&r=PG&f=1", "display_name": "CompuChip", "link": "https://stackoverflow.com/users/2920343/compuchip"}, "edited": false, "score": 1, "creation_date": 1452118706, "post_id": 34643568, "comment_id": 57033700, "body": "As another strategy for gaining more understanding: use your debugger to step through the code line by line (stepping into the function calls). If you don&#39;t know how to do that: now is a good time to learn how to use your debugger. Hint: if your debugger supports it (e.g. Visual Studio) also have it show the call stack and note how it changes."}, {"owner": {"user_type": "does_not_exist", "display_name": "user1345223"}, "reply_to_user": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "edited": false, "score": 0, "creation_date": 1452118721, "post_id": 34643568, "comment_id": 57033707, "body": "@jxh - &quot;Explain this code to me&quot; questions are off-topic on Programmers."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "edited": false, "score": 0, "creation_date": 1452118810, "post_id": 34643568, "comment_id": 57033744, "body": "@jxh: No, it doesn&#39;t."}, {"owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1452118922, "post_id": 34643568, "comment_id": 57033795, "body": "@LightnessRacesinOrbit: Okay, can it be rewritten as a &quot;please explain how recursion works&quot; question?"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "edited": false, "score": 0, "creation_date": 1452119005, "post_id": 34643568, "comment_id": 57033838, "body": "@jxh: Doesn&#39;t matter as that would still be off-topic."}, {"owner": {"reputation": 6009, "user_id": 3313438, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/Ks9C6.jpg?s=128&g=1", "display_name": "Ziezi", "link": "https://stackoverflow.com/users/3313438/ziezi"}, "edited": false, "score": 0, "creation_date": 1452119060, "post_id": 34643568, "comment_id": 57033853, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/5631447/how-recursion-works-in-c\">How Recursion works in C</a>"}, {"owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1452119190, "post_id": 34643568, "comment_id": 57033926, "body": "@LightnessRacesinOrbit: The site FAQ does not do a very good job at explaining what is off-topic, then."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "edited": false, "score": 0, "creation_date": 1452119380, "post_id": 34643568, "comment_id": 57034025, "body": "@jxh: Indeed. In fact I was hoping you&#39;d ask &quot;then what <i>is</i> on-topic on Programmers.SE?&quot; so I could give my answer: <i>nobody knows</i>."}, {"owner": {"reputation": 63, "user_id": 5709289, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/10205591864492934/picture?type=large", "display_name": "Eric Wood", "link": "https://stackoverflow.com/users/5709289/eric-wood"}, "edited": false, "score": 0, "creation_date": 1452119854, "post_id": 34643568, "comment_id": 57034226, "body": "Well as long as people are searching for knowledge then it&#39;s all good"}, {"owner": {"reputation": 569, "user_id": 4697027, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/412ebfcc6a2395c48393e5f7d24948ea?s=128&d=identicon&r=PG&f=1", "display_name": "Raj Kamal", "link": "https://stackoverflow.com/users/4697027/raj-kamal"}, "edited": false, "score": 0, "creation_date": 1452139672, "post_id": 34643568, "comment_id": 57039996, "body": "@EricWood, SO is not meant to teach you principles of software programming, I suggest you try to learn such things from video lectures and/or books. Recursion is simple topic and there are many resources available on net for it"}, {"owner": {"reputation": 63, "user_id": 5709289, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/10205591864492934/picture?type=large", "display_name": "Eric Wood", "link": "https://stackoverflow.com/users/5709289/eric-wood"}, "edited": false, "score": 0, "creation_date": 1452146356, "post_id": 34643568, "comment_id": 57042063, "body": "As I have stated previously, I am using textbooks, lecture videos and everything you have just named but am just trying to understand it better. Where does it say that Stack Overload is not the place to be learning these things? At one point everyone was where I am right now. I am just trying to learn."}], "answers": [{"tags": [], "owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "is_accepted": false, "score": 1, "last_activity_date": 1452118443, "creation_date": 1452118443, "answer_id": 34643844, "question_id": 34643568, "link": "https://stackoverflow.com/questions/34643568/using-recursive-functions-in-c/34643844#34643844", "title": "Using recursive functions in C++", "body": "<p>There are always two parts to a recursive function: the recursion and the bottom. Recursion simply means computing the result in terms of a somewhat smaller version of the same problem. The bottom is the final case, where the recursion stops. In the example code, the bottom occurs when <code>n</code> is 0, and the result for that case is 1.0. The recursion occurs when <code>n</code> is greater than 0; it multiplies <code>x</code> by the smaller case of <code>power(x, n-1)</code>. Since each recursion reduces <code>n</code> by 1, eventually you hit the bottom, get the result there of 1.0, and return up the chain of calls doing the multiplications until you hit the top-level call, which gives the result. As Ed Heal suggested in his comment, try it with pencil and paper.</p>\n"}, {"tags": [], "owner": {"reputation": 54044, "user_id": 3723423, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2c916310a1261b53773de75fc83e5ad?s=128&d=identicon&r=PG&f=1", "display_name": "Christophe", "link": "https://stackoverflow.com/users/3723423/christophe"}, "is_accepted": false, "score": 2, "last_activity_date": 1452119644, "last_edit_date": 1452119644, "creation_date": 1452118688, "answer_id": 34643911, "question_id": 34643568, "link": "https://stackoverflow.com/questions/34643568/using-recursive-functions-in-c/34643911#34643911", "title": "Using recursive functions in C++", "body": "<p>Let's have a look what happens when you call <code>power(2,3)</code> :  </p>\n\n<pre><code>double power(double x, int n) { // x = 2, n=3; \n   if (n&lt;0) {...}  // false, so skip the brackets  \n   if (n&gt;0)        // true\n      return x*power (x; n-1);  // call power() again, with different paraleters\n   ...             // the rest is skipped\n}\n</code></pre>\n\n<p>So it returns <code>2 * power(something)</code>. Before being able to compute the return value, <code>power()</code> has to call itself again.  It's a recursive call.  You can see this as if another copy of the function that would be executed, with its own variables (i.e. without touching the local variables of calling instance).  </p>\n\n<ul>\n<li><p>So now <code>power()</code> is called with the parameters x=2 and n=2.  The flow of execution is similar and it will return <code>2 * power(x, n-1)</code> but <code>n-1</code> being now 1. So here a recursion again. </p>\n\n<ul>\n<li><p>Now <code>power()</code> is called with x=2 and n=1.  This will return <code>2 * power(x, n-1)</code>, but n-1 being now 0.  And a recursion again;  </p>\n\n<ul>\n<li><p>Finally, power will be called with x=2 and n=0.  Here the flow of execution will skip the two ifs and will end up execcuting the elese branch because n is 0.  It will return 1.  </p>\n\n<p>Now we have all the elements, for computing the value by winding up these successive calls</p></li>\n</ul></li>\n</ul></li>\n</ul>\n\n<p>All this can be shown graphically:   </p>\n\n<pre><code>power(2,3) \n   |\n   +--&gt; 2 * power(2,2)\n              |\n              +--&gt; 2* power(2,1) \n                        |\n                        +--&gt; 2* power(2,0) \n                                  |\n                                  1\n</code></pre>\n\n<p>So in the end it returns 2*2*2*1 which is 2^3, the intended result. </p>\n\n<p>By generalizing further this reasoning, you may use <a href=\"https://en.wikipedia.org/wiki/Mathematical_induction\" rel=\"nofollow\">mathematical induction</a> to prove that for any n>=0,  <code>power (x, n)</code> will return <code>x^n</code>.  I let you finish the exercise by looking yourself at what happens when n is negative.  </p>\n\n<p>And here some <a href=\"http://sourcecodemania.com/recursion-in-cpp/\" rel=\"nofollow\">furhter reading</a> that could help with some graphical explanations under different perspecives. </p>\n"}], "owner": {"reputation": 63, "user_id": 5709289, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/10205591864492934/picture?type=large", "display_name": "Eric Wood", "link": "https://stackoverflow.com/users/5709289/eric-wood"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 111, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1452119644, "creation_date": 1452117318, "question_id": 34643568, "link": "https://stackoverflow.com/questions/34643568/using-recursive-functions-in-c", "title": "Using recursive functions in C++", "body": "<pre><code>// Ex5_15.cpp (based on Ex5_01.cpp)\n// A recursive version of x to the power n\n#include &lt;iostream&gt;\nusing std::cout;\nusing std::endl;\ndouble power(double x, int n); // Function prototype\nint main(void)\n{\n    double x(2.0); // Different x from that in function power\n    double result(0.0);\n    // Calculate x raised to powers -3 to +3 inclusive\n    for(int index = -3; index &lt;= 3; index++)\n    cout &lt;&lt; x &lt;&lt; \u201c to the power \u201c &lt;&lt; index &lt;&lt; \u201c is \u201c &lt;&lt; power(x, index)  &lt;&lt;  endl;\n    return 0;\n}\n// Recursive function to compute integral powers of a double value\n// First argument is value, second argument is power index\ndouble power(double x, int n)\n{\n    if(n &lt; 0)\n    {\n        x = 1.0/x;\n        n = -n;\n    }\n    if(n &gt; 0)\n        return x*power(x, n-1);\n    else\n        return 1.0;\n    }\n</code></pre>\n\n<p>I am in school taking classes for programming. This is an example for recursive functions given in the book. I don't quite see what they are doing and the techniques involved. I was just wondering if anyone can explain this to me or at least point me in the right direction so I can better understand this technique.</p>\n"}, {"tags": ["c++", "openssl", "smtp", "smtp-auth"], "comments": [{"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1452126845, "post_id": 34643487, "comment_id": 57036612, "body": "It looks like the tail end of Base64 padding (UUencoding?), and then one garbage character."}, {"owner": {"reputation": 681, "user_id": 2672227, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/715307710/picture?type=large", "display_name": "Gemma Morriss", "link": "https://stackoverflow.com/users/2672227/gemma-morriss"}, "reply_to_user": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1452354961, "post_id": 34643487, "comment_id": 57137235, "body": "@jww, So the ::recv() has been corrupted?"}], "answers": [{"comments": [{"owner": {"reputation": 1391, "user_id": 1856694, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb4b4ae94f13f15ec44c54c46c807c5c?s=128&d=identicon&r=PG", "display_name": "zentrunix", "link": "https://stackoverflow.com/users/1856694/zentrunix"}, "edited": false, "score": 0, "creation_date": 1566407125, "post_id": 47535756, "comment_id": 101649819, "body": "link for the client is 404"}], "tags": [], "owner": {"reputation": 1, "user_id": 9020981, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/bf0834322a55c3911531b932fd17a839?s=128&d=identicon&r=PG", "display_name": "mano", "link": "https://stackoverflow.com/users/9020981/mano"}, "is_accepted": false, "score": 0, "last_activity_date": 1511884593, "creation_date": 1511884593, "answer_id": 47535756, "question_id": 34643487, "link": "https://stackoverflow.com/questions/34643487/c-ssl-smtp-server-protocol-after-startssl-confusion/47535756#47535756", "title": "C++ SSL SMTP Server Protocol after StartSSL confusion", "body": "<p>SSL connection to smtp server with STARTTLS (without authentication):</p>\n\n<pre><code>S: &lt;waits for connection on TCP port 25&gt;\nC: &lt;opens connection&gt;\nS: 220 mail.imc.org SMTP service ready\nC: EHLO mail.example.com\\r\\n\nS: 250-mail.imc.org offers a warm hug of welcome\nS: 250-8BITMIME\nS: 250-STARTTLS\nS: 250 DSN\nC: STARTTLS\\r\\n\nS: 220 Go ahead\n</code></pre>\n\n<blockquote>\n  <h1>Openssl part in c++ for example (you dont need send this 3 lines)</h1>\n\n<pre><code>    C: &lt;starts TLS negotiation&gt;\n    C &amp; S: &lt;negotiate a TLS session&gt;\n    C &amp; S: &lt;check result of negotiation&gt;\n</code></pre>\n</blockquote>\n\n<pre><code>C: EHLO mail.example.com\\r\\n\nS: 250-mail.imc.org touches your hand gently for a moment\nS: 250-8BITMIME\nS: 250 DSN\nC: mail from: &lt;email&gt;\\r\\n\nS: 250 OK\nC: rcpt to: &lt;email@com.com&gt;\\r\\n\nS: 250 OK\nC: DATA\\r\\n\nS: 354 Go adead\nC: From: &lt;email&gt;\\r\\n\nC: To: &lt;email@email.to&gt;\\r\\n\nC: Subject: Hello costam\\r\\n\nC:\nC: Hello from email smtp\nC: \nC: .\nS: 250 qued as 5s4f564ds65f4\nC: quit\nS: 221 Bye...\n</code></pre>\n\n<p>Simple c++ ssl smtp client here: \n<a href=\"https://github.com/breakermind/SslSMTPClient\" rel=\"nofollow noreferrer\">https://github.com/breakermind/SslSMTPClient</a></p>\n"}], "owner": {"reputation": 681, "user_id": 2672227, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/715307710/picture?type=large", "display_name": "Gemma Morriss", "link": "https://stackoverflow.com/users/2672227/gemma-morriss"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 616, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1511884593, "creation_date": 1452116983, "question_id": 34643487, "link": "https://stackoverflow.com/questions/34643487/c-ssl-smtp-server-protocol-after-startssl-confusion", "title": "C++ SSL SMTP Server Protocol after StartSSL confusion", "body": "<p>I need to write a custom SMTP service in C++, there is a requirement that it needs to support SSL, I have been looking at the two SMTP <a href=\"https://www.ietf.org/rfc/rfc2821.txt\" rel=\"nofollow\">RFC 2821</a> and <a href=\"https://datatracker.ietf.org/doc/rfc5321/\" rel=\"nofollow\">RFC  5321</a>, but I can't figure out message ordering.  I am getting the following from a mail client.</p>\n\n<p>Messages received from mail client:</p>\n\n<pre><code>[Received from client] EHLO PAULMORRISSAB5A\n[Received from client] STARTTLS\n[Received from client] \u25ac\u25ac\u263a\n</code></pre>\n\n<p>What is the last message and what should the server reply with please?</p>\n"}, {"tags": ["c++", "qt", "serial-port", "type-conversion"], "comments": [{"owner": {"reputation": 276, "user_id": 3776194, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/AnCSy.png?s=128&g=1", "display_name": "TiPo", "link": "https://stackoverflow.com/users/3776194/tipo"}, "edited": false, "score": 0, "creation_date": 1452118833, "post_id": 34643486, "comment_id": 57033751, "body": "You will pass 255 as a code of symbol or not?"}], "answers": [{"tags": [], "owner": {"reputation": 1137, "user_id": 2696695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e02253aec3ee891b2375c4f4763013a9?s=128&d=identicon&r=PG&f=1", "display_name": "nshct", "link": "https://stackoverflow.com/users/2696695/nshct"}, "is_accepted": false, "score": 0, "last_activity_date": 1452117467, "creation_date": 1452117467, "answer_id": 34643599, "question_id": 34643486, "link": "https://stackoverflow.com/questions/34643486/how-to-convert-int-to-char-not-const-char-for-use-with-putchar/34643599#34643599", "title": "How to convert int to char (not const char) for use with putChar();", "body": "<p>This should work:</p>\n\n<pre><code>unsigned int x = 255;\nmyserial-&gt;putChar( static_cast&lt;char&gt;(x) );\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 463, "user_id": 1654766, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/1195aa06aff1dde8de2eb16d4d402bbf?s=128&d=identicon&r=PG", "display_name": "Harry Braviner", "link": "https://stackoverflow.com/users/1654766/harry-braviner"}, "is_accepted": false, "score": 0, "last_activity_date": 1452118174, "creation_date": 1452118174, "answer_id": 34643774, "question_id": 34643486, "link": "https://stackoverflow.com/questions/34643486/how-to-convert-int-to-char-not-const-char-for-use-with-putchar/34643774#34643774", "title": "How to convert int to char (not const char) for use with putChar();", "body": "<p>Your call to <code>s.c_str()</code> returns a C-string. In this case the string only contains a single characters, but that is not the same as a character variable! A C-string is a contiguous sequence of characters terminated with the null character, '\\0'. What you are trying to pass to <code>putChar</code> is a pointer to the first character of this array.</p>\n\n<p>As suggested by several other posters, you need to use a cast: <code>putChar( static_cast&lt;char&gt;(x) )</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 204, "user_id": 5729751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3440d4b3e9ee09804f544976e377f937?s=128&d=identicon&r=PG&f=1", "display_name": "P. Brunet", "link": "https://stackoverflow.com/users/5729751/p-brunet"}, "is_accepted": false, "score": 0, "last_activity_date": 1452118298, "creation_date": 1452118298, "answer_id": 34643806, "question_id": 34643486, "link": "https://stackoverflow.com/questions/34643486/how-to-convert-int-to-char-not-const-char-for-use-with-putchar/34643806#34643806", "title": "How to convert int to char (not const char) for use with putChar();", "body": "<p>Your first code didn't work because because <code>std::to_string(255)</code> will give you : <code>std::string(\"255\")</code> so with your <code>c_str</code> conversion, your code is the same as: <code>myserial-&gt;putChar(50);</code>.</p>\n\n<p>Answer given by Naschkatze is certainly a better approach.</p>\n"}, {"comments": [{"owner": {"reputation": 91, "user_id": 5699703, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/Lvj7y.jpg?s=128&g=1", "display_name": "M. P.", "link": "https://stackoverflow.com/users/5699703/m-p"}, "edited": false, "score": 0, "creation_date": 1452127197, "post_id": 34643918, "comment_id": 57036705, "body": "Wow, I can&#39;t believe I over looked that.  Your answer worked perfectly.  Thank you."}], "tags": [], "owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "is_accepted": false, "score": 1, "last_activity_date": 1452118720, "creation_date": 1452118720, "answer_id": 34643918, "question_id": 34643486, "link": "https://stackoverflow.com/questions/34643486/how-to-convert-int-to-char-not-const-char-for-use-with-putchar/34643918#34643918", "title": "How to convert int to char (not const char) for use with putChar();", "body": "<p>Just do it:</p>\n\n<pre><code>int x = 255;\nmySerial-&gt;putChar(x);\n</code></pre>\n\n<p>The compiler will convert the argument for you. Unless you have some additional requirement that you haven't mentioned you could make it even simpler:</p>\n\n<pre><code>mySerial-&gt;putChar(255);\n</code></pre>\n"}], "owner": {"reputation": 91, "user_id": 5699703, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/Lvj7y.jpg?s=128&g=1", "display_name": "M. P.", "link": "https://stackoverflow.com/users/5699703/m-p"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 284, "favorite_count": 0, "answer_count": 4, "score": 1, "last_activity_date": 1452120434, "creation_date": 1452116983, "last_edit_date": 1452120434, "question_id": 34643486, "link": "https://stackoverflow.com/questions/34643486/how-to-convert-int-to-char-not-const-char-for-use-with-putchar", "title": "How to convert int to char (not const char) for use with putChar();", "body": "<p>I'm writing a QT Console Application to write out of an FTDI cable using the QSerialport library. (the FTDI cable is connected to a logic analyzer so I can debug the output)</p>\n\n<p>I need to pass <code>int x = 255;</code> to the line <code>myserial-&gt;putChar();</code></p>\n\n<p>I tried to convert the int to a char using:</p>\n\n<p><code>int x = 255;\nstd::string s = std::to_string(x);\nchar const *myChar = s.c_str();\nmyserial-&gt;putChar(myChar);</code></p>\n\n<p>and received the error:</p>\n\n<p><code>cannot initialize a parameter of type 'char' with an lvalue of type 'const char*'</code></p>\n\n<p>However in this test starting with a char everything works perfectly:</p>\n\n<p><code>char myChar = 255;\nmyserial-&gt;putChar(myChar);</code></p>\n\n<p>Giving the correct result of <code>0xFF</code> on the logic analyzer.</p>\n\n<p>Can anyone help? Thanks!</p>\n"}, {"tags": ["c++", "arduino", "arduino-uno", "arduino-ide"], "comments": [{"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 0, "creation_date": 1452117744, "post_id": 34643479, "comment_id": 57033219, "body": "No need to post all of the code, but you <i>should</i> post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> that we can take and run ourselves as is. For example, after playing around with things relating to that line, you might eventually create <a href=\"http://coliru.stacked-crooked.com/a/4646aa982b9d0d2d\" rel=\"nofollow noreferrer\">this MCVE</a>. Often, creating such an MCVE will lead you to figure out the problem or at least let you better search for it."}, {"owner": {"reputation": 1502, "user_id": 4364057, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/9KoUZ.jpg?s=128&g=1", "display_name": "Squirrelkiller", "link": "https://stackoverflow.com/users/4364057/squirrelkiller"}, "reply_to_user": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 0, "creation_date": 1452118256, "post_id": 34643479, "comment_id": 57033465, "body": "That&#39;s the thing - I tried to make it a small example program, only contianing the relevent code - but that one runs flawlessly. So either someone wants the whole code, or - which I&#39;m hoping for - someone tells me what this could be refering to, so can find parts of the code which might be related to the error and post them instead of the whole thing, which is 190 lines. Nicely sorted lines, but still 190 lines."}, {"owner": {"reputation": 1040, "user_id": 2444082, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jukma.png?s=128&g=1", "display_name": "Trevor", "link": "https://stackoverflow.com/users/2444082/trevor"}, "edited": false, "score": 0, "creation_date": 1452123921, "post_id": 34643479, "comment_id": 57035813, "body": "So there is no more question?  You have fixed the problem you had?"}, {"owner": {"reputation": 1502, "user_id": 4364057, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/9KoUZ.jpg?s=128&g=1", "display_name": "Squirrelkiller", "link": "https://stackoverflow.com/users/4364057/squirrelkiller"}, "edited": false, "score": 0, "creation_date": 1452124035, "post_id": 34643479, "comment_id": 57035865, "body": "Well, it did go away. Just hoped there would be somebody who has the same problem and maybe knew what to do in case next time it doesn&#39;t solve itself. Should I just delete the question then?"}], "answers": [{"tags": [], "owner": {"reputation": 10487, "user_id": 5708620, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b0f8c70394b748ed7ec1a3a11a749b1?s=128&d=identicon&r=PG&f=1", "display_name": "Danny_ds", "link": "https://stackoverflow.com/users/5708620/danny-ds"}, "is_accepted": false, "score": 0, "last_activity_date": 1452118547, "last_edit_date": 1495539891, "creation_date": 1452118547, "answer_id": 34643877, "question_id": 34643479, "link": "https://stackoverflow.com/questions/34643479/arduino-ide-file-cpp-compile-error-too-high-for-me/34643877#34643877", "title": "Arduino IDE File.cpp compile error too high for me", "body": "<blockquote>\n  <p>error: definition of implicitly-declared 'SDLib::File::~File()'</p>\n</blockquote>\n\n<p>This usually means the function is not declared in te class definition.</p>\n\n<p>Do you have File.h present and included? And is the destructor declared there?</p>\n\n<p>Also see <a href=\"https://stackoverflow.com/questions/5765780/can-anyone-help-me-understand-this-error-definition-of-implicitly-declared-cl\">this</a>.</p>\n"}], "owner": {"reputation": 1502, "user_id": 4364057, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/9KoUZ.jpg?s=128&g=1", "display_name": "Squirrelkiller", "link": "https://stackoverflow.com/users/4364057/squirrelkiller"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 314, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1452119624, "creation_date": 1452116962, "last_edit_date": 1452119624, "question_id": 34643479, "link": "https://stackoverflow.com/questions/34643479/arduino-ide-file-cpp-compile-error-too-high-for-me", "title": "Arduino IDE File.cpp compile error too high for me", "body": "<p>I'm trying to make an actually not too complicated program for the Arduino UNO, where I log GPS output to an SD card.</p>\n\n<p>The error says:</p>\n\n<pre><code>C:\\Users\\Marlo\\AppData\\Local\\Temp\\build51e9795045faa8d6f671223e5d050b6f.tmp\\sketch\\src\\File.cpp:46:17: error: definition of implicitly-declared 'SDLib::File::~File()'\n\nFile::~File(void) {\n\n             ^\n</code></pre>\n\n<p><em>Some libraries in folders are used</em> some standard compile output lines here</p>\n\n<pre><code>exit status 1\nFehler beim Kompilieren.\n</code></pre>\n\n<p>^Last line says \"compile error\"</p>\n\n<p>The pointed at File.cpp is a library used by SD.h, and it works when I make a simple \"open SD -> make file -> write -> close file\" program (including all the includes form my main program).</p>\n\n<p>Includes:</p>\n\n<pre><code>#include &lt;stdio.h&gt;      \n#include &lt;SD.h&gt;         //&lt;- uses File.cpp\n#include &lt;stdint.h&gt;     \n#include &lt;Adafruit_GPS.h&gt;\n#include &lt;SPI.h&gt;\n#include \"avr/interrupt.h\"   \n</code></pre>\n\n<p>The portion of code the error refers to is:</p>\n\n<p>File.cpp</p>\n\n<pre><code>File::File(void) {\n  _file = 0;\n  _name[0] = 0;\n  //Serial.print(\"Created empty file object\");\n}\n\nFile::~File(void) {   //&lt;- line 46\n  //  Serial.print(\"Deleted file object\");\n}\n\n// returns a pointer to the file name\nchar *File::name(void) {\n  return _name;\n}\n</code></pre>\n\n<p>I didn't change anything in the File.cpp.</p>\n\n<p><strong>What does this error even mean?</strong></p>\n\n<p>I will gladly share my code, I just don't want to paste the whole thing and make this post huge (but I will, if you say so), so let me know if you need anything :)</p>\n\n<p>Greetings,\nMarlon</p>\n\n<p><strong>Update:</strong> To find the part of the code containing the error, I took one function after another and compiled it in a blank project - it worked. No error.</p>\n\n<p>Then I took the first part, compiled, then added the next, compiled, and so on. <strong>I have now the complete program in another file (same directory), and it works without error.</strong></p>\n\n<p>Sorry if this is just my computers brainfart.</p>\n"}, {"tags": ["c#", "c++", "sql"], "comments": [{"owner": {"reputation": 6829, "user_id": 5649561, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xNgLZ.jpg?s=128&g=1", "display_name": "Vadim Martynov", "link": "https://stackoverflow.com/users/5649561/vadim-martynov"}, "edited": false, "score": 0, "creation_date": 1452117045, "post_id": 34643468, "comment_id": 57032847, "body": "You should post text, not the picture. Also, concrete your problem. &quot;Code does not work&quot; is not too concrete."}, {"owner": {"reputation": 2884, "user_id": 3200592, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/839149db060ef342b17a143ed5673610?s=128&d=identicon&r=PG&f=1", "display_name": "Stan Shaw", "link": "https://stackoverflow.com/users/3200592/stan-shaw"}, "edited": false, "score": 0, "creation_date": 1452117069, "post_id": 34643468, "comment_id": 57032864, "body": "It is impossible for anyone to help you based upon the information you provided (or lack thereof).  Post your code, tell us what is happening, tell us what you expect to happen, and include any environmental variables that you think might be important."}, {"owner": {"reputation": 23, "user_id": 5754537, "user_type": "registered", "profile_image": "https://graph.facebook.com/884449365005873/picture?type=large", "display_name": "Umer Khalid", "link": "https://stackoverflow.com/users/5754537/umer-khalid"}, "edited": false, "score": 0, "creation_date": 1452117239, "post_id": 34643468, "comment_id": 57032961, "body": "problem is in sda.Fill(dt);"}, {"owner": {"reputation": 23, "user_id": 5754537, "user_type": "registered", "profile_image": "https://graph.facebook.com/884449365005873/picture?type=large", "display_name": "Umer Khalid", "link": "https://stackoverflow.com/users/5754537/umer-khalid"}, "edited": false, "score": 0, "creation_date": 1452117312, "post_id": 34643468, "comment_id": 57032998, "body": "It says SqlException occurred  Incorrect syntax near the keyword &#39;Table&#39;"}, {"owner": {"reputation": 10110, "user_id": 1715829, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/c0yet.jpg?s=128&g=1", "display_name": "Buddy", "link": "https://stackoverflow.com/users/1715829/buddy"}, "edited": false, "score": 0, "creation_date": 1452117630, "post_id": 34643468, "comment_id": 57033163, "body": "@UmerKhalid I updated the question with the information you added in comments... in the future you should put all relevant info into the question itself."}, {"owner": {"reputation": 23, "user_id": 5754537, "user_type": "registered", "profile_image": "https://graph.facebook.com/884449365005873/picture?type=large", "display_name": "Umer Khalid", "link": "https://stackoverflow.com/users/5754537/umer-khalid"}, "edited": false, "score": 0, "creation_date": 1452117710, "post_id": 34643468, "comment_id": 57033201, "body": "Thanks buddy its my first time here I posted my first question did&#39;nt know how to write it . I will be careful next time."}, {"owner": {"reputation": 5105, "user_id": 3818463, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/0Bs2B.png?s=128&g=1", "display_name": "iuliu.net", "link": "https://stackoverflow.com/users/3818463/iuliu-net"}, "edited": false, "score": 0, "creation_date": 1452117904, "post_id": 34643468, "comment_id": 57033292, "body": "Look inside the exception, it should display somewhere the exact query that tries to execute. Post it here."}, {"owner": {"reputation": 14660, "user_id": 1704458, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/14Imh.jpg?s=128&g=1", "display_name": "T.S.", "link": "https://stackoverflow.com/users/1704458/t-s"}, "edited": false, "score": 0, "creation_date": 1452128827, "post_id": 34643468, "comment_id": 57037140, "body": "Use <code>ExecuteScalar</code> to return single values. Why do you need all the overhead of adapter and <code>DataTable</code>????????"}], "answers": [{"tags": [], "owner": {"reputation": 195, "user_id": 4143007, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/1135320515/picture?type=large", "display_name": "Mike Schmidt", "link": "https://stackoverflow.com/users/4143007/mike-schmidt"}, "is_accepted": true, "score": 1, "last_activity_date": 1452118542, "creation_date": 1452118542, "answer_id": 34643874, "question_id": 34643468, "link": "https://stackoverflow.com/questions/34643468/sqlexception-occurred/34643874#34643874", "title": "SQLException Occurred", "body": "<p>This assumes you have the correct Table in your sql database you are referencing.\nThe Table name is \"Table\" and it has two columns \"Username\" and \"Password\"</p>\n\n<p>Comments</p>\n\n<ol>\n<li>Your Sql statment is going to return the number of rows that have the username and password that match.</li>\n<li>Passing parameters like that is dangerous and subject to hidden sql utilize the sqlParameter class</li>\n<li><p>You should break out parameters and such for ease of reading.</p>\n\n<pre><code>String ConnectionString = @\"DataSource=LocalDB)\\v11.0;AttachDbFilename=C:\\Users\\Umer\\Documents\\Data.mdf;Integra\u200c\u200bted Security=True;Connect Timeout=30;\";\nString QueryString = @\"Select Count (*) From dbo.Table where Username= @Username and Password = @Password\";\n\n SqlParameter[] Parameters = {new SqlParameter(\"Username\",textBox1.text)\n                             ,new SqlParameter(\"Password\",textBox2.text)};\n\n\n SqlConnection sqlConnection = new SqlConnection(ConnectionString);\n SqlCommand sqlCommand = new SqlCommand(QueryString, sqlConnection);\n sqlCommand.CommandType = System.Data.CommandType.Text;\n\n sqlCommand.Parameters.AddRange(Parameters);\n\n int nCount;\n if (int.TryParse(sqlCommand.ExecuteScalar().ToString(), out nCount))\n {\n     //nCount has valid value\n }\n else\n {\n     //nCount has invalid value\n }\n</code></pre></li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 2730, "user_id": 2265446, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/39Qa6.png?s=128&g=1", "display_name": "Cleptus", "link": "https://stackoverflow.com/users/2265446/cleptus"}, "is_accepted": false, "score": 2, "last_activity_date": 1452125732, "creation_date": 1452125732, "answer_id": 34645281, "question_id": 34643468, "link": "https://stackoverflow.com/questions/34643468/sqlexception-occurred/34645281#34645281", "title": "SQLException Occurred", "body": "<p>There is missing space between the single cuote and the 'and' keyword</p>\n\n<p>... textBox1.Text + \"'and ...</p>\n\n<p>BTW, to avoid SQL injection (and application errors in passwords containing quotes) you should also use parameters as Mike Schmidt suggested.</p>\n"}], "owner": {"reputation": 23, "user_id": 5754537, "user_type": "registered", "profile_image": "https://graph.facebook.com/884449365005873/picture?type=large", "display_name": "Umer Khalid", "link": "https://stackoverflow.com/users/5754537/umer-khalid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 98, "favorite_count": 0, "closed_date": 1452160731, "accepted_answer_id": 34643874, "answer_count": 2, "score": -1, "last_activity_date": 1452125732, "creation_date": 1452116918, "last_edit_date": 1452117536, "question_id": 34643468, "link": "https://stackoverflow.com/questions/34643468/sqlexception-occurred", "closed_reason": "Needs details or clarity", "title": "SQLException Occurred", "body": "<p>Can someone explain what is wrong with my program?\nJust wanted to make a simple login program as I am a beginner but stuck on this error.</p>\n\n<pre><code>SqlConnection con = new SqlConnection(@\"Data Source=(LocalDB)\\v11.0;AttachDbFilename=C:\\Users\\Umer\\Documents\\Data.mdf;Integra\u200c\u200bted Security=True;Connect Timeout=30;\");\nSqlDataAdapter sda = new SqlDataAdapter(\"Select Count (*) From dbo.Table where Username='\" + textBox1.Text + \"'and password ='\" + textBox2.Text + \"'\", con);\nDataTable dt = new DataTable();\nsda.Fill(dt);\n</code></pre>\n\n<p>The problem is in <code>sda.Fill(dt);</code>.  It says:</p>\n\n<blockquote>\n  <p>SqlException occurred Incorrect syntax near the keyword 'Table'</p>\n</blockquote>\n\n<p>It says SqlException occurred Incorrect syntax near the keyword 'Table' \nThis is the picture of my code. Hope i will will get the answer. Thanks</p>\n"}, {"tags": ["c++", "ubuntu", "cmake", "shared-libraries", "dynamic-linking"], "comments": [{"owner": {"reputation": 204, "user_id": 5729751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3440d4b3e9ee09804f544976e377f937?s=128&d=identicon&r=PG&f=1", "display_name": "P. Brunet", "link": "https://stackoverflow.com/users/5729751/p-brunet"}, "edited": false, "score": 0, "creation_date": 1452119143, "post_id": 34643467, "comment_id": 57033900, "body": "Using the <code>find_library</code> macro, you only &quot;find&quot; the library. You don&#39;t link with this. You have to add the GLEW_LIBRARY value to <code>add_library</code>. Did you check this? You may also have a look to : link_directories() to make sure you link with the glew from /usr/lib64 ?"}, {"owner": {"reputation": 2135, "user_id": 3667089, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/591d11239b028c677149047326aa9209?s=128&d=identicon&r=PG&f=1", "display_name": "user3667089", "link": "https://stackoverflow.com/users/3667089/user3667089"}, "reply_to_user": {"reputation": 204, "user_id": 5729751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3440d4b3e9ee09804f544976e377f937?s=128&d=identicon&r=PG&f=1", "display_name": "P. Brunet", "link": "https://stackoverflow.com/users/5729751/p-brunet"}, "edited": false, "score": 1, "creation_date": 1452119425, "post_id": 34643467, "comment_id": 57034043, "body": "@P.Brunet I did <code>target_link_libraries(myproject ${GLEW_LIBRARY})</code> . Not sure about link_directories but even the official CMake documents discouraged against using it"}, {"owner": {"reputation": 13936, "user_id": 3598119, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/6c9c7dfa28a57e8011d12208a7c86d20?s=128&d=identicon&r=PG", "display_name": "Chris Beck", "link": "https://stackoverflow.com/users/3598119/chris-beck"}, "edited": false, "score": 0, "creation_date": 1452133183, "post_id": 34643467, "comment_id": 57038372, "body": "@user3667089, it might be easiest to install a newer version of ubuntu that has a newer glew. might not be what you want to hear, but i thoguht I would mention it.."}], "answers": [{"comments": [{"owner": {"reputation": 2135, "user_id": 3667089, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/591d11239b028c677149047326aa9209?s=128&d=identicon&r=PG&f=1", "display_name": "user3667089", "link": "https://stackoverflow.com/users/3667089/user3667089"}, "edited": false, "score": 0, "creation_date": 1452130495, "post_id": 34645916, "comment_id": 57037609, "body": "thanks for the answer but /usr/lib64 is already added in the path by find_library, so adding it again to LD_LIBRARY_PATH is redundant, it&#39;s just that there are two libGLEW.so (exact same name) in the path, and somehow ubuntu decide to pick the one from /usr/lib/x86_64-linux-gnu/ over /usr/lib64"}, {"owner": {"reputation": 1792, "user_id": 592636, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8dd147c7ef1b6b39fdd37b12ec186f79?s=128&d=identicon&r=PG", "display_name": "kfunk", "link": "https://stackoverflow.com/users/592636/kfunk"}, "reply_to_user": {"reputation": 2135, "user_id": 3667089, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/591d11239b028c677149047326aa9209?s=128&d=identicon&r=PG&f=1", "display_name": "user3667089", "link": "https://stackoverflow.com/users/3667089/user3667089"}, "edited": false, "score": 0, "creation_date": 1452130625, "post_id": 34645916, "comment_id": 57037653, "body": "Relink <code>mylib.so</code> with <code>LD_LIBRARY_PATH</code> set?"}, {"owner": {"reputation": 2135, "user_id": 3667089, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/591d11239b028c677149047326aa9209?s=128&d=identicon&r=PG&f=1", "display_name": "user3667089", "link": "https://stackoverflow.com/users/3667089/user3667089"}, "edited": false, "score": 0, "creation_date": 1452131004, "post_id": 34645916, "comment_id": 57037765, "body": "added /usr/lib64 into LD_LIBRARY_PATH but still links the wrong one, LD_LIBRARY_PATH still has lower priority than default search path. Have you try it and does it work for you?"}], "tags": [], "owner": {"reputation": 1792, "user_id": 592636, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8dd147c7ef1b6b39fdd37b12ec186f79?s=128&d=identicon&r=PG", "display_name": "kfunk", "link": "https://stackoverflow.com/users/592636/kfunk"}, "is_accepted": false, "score": 0, "last_activity_date": 1452130163, "creation_date": 1452130163, "answer_id": 34645916, "question_id": 34643467, "link": "https://stackoverflow.com/questions/34643467/how-to-make-cmake-actually-link-with-the-library-it-finds-with-find-library/34645916#34645916", "title": "How to make CMake actually link with the library it finds with find_library", "body": "<p>ldd as well as ld take runtime shared library loader information into account (via <code>LD_LIBRARY_PATH</code> env var).</p>\n\n<p>So make sure to do the following before linking your program:</p>\n\n<pre><code>export LD_LIBRARY_PATH=/usr/lib64/:$LD_LIBRARY_PATH\n</code></pre>\n\n<p>More information: <a href=\"http://tldp.org/HOWTO/Program-Library-HOWTO/shared-libraries.html\" rel=\"nofollow\">http://tldp.org/HOWTO/Program-Library-HOWTO/shared-libraries.html</a></p>\n"}, {"tags": [], "owner": {"reputation": 73, "user_id": 725685, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e844303e6abf99ac9b09edb0b6fdfa9?s=128&d=identicon&r=PG", "display_name": "Cenkoloji", "link": "https://stackoverflow.com/users/725685/cenkoloji"}, "is_accepted": false, "score": 0, "last_activity_date": 1474962145, "creation_date": 1474962145, "answer_id": 39718897, "question_id": 34643467, "link": "https://stackoverflow.com/questions/34643467/how-to-make-cmake-actually-link-with-the-library-it-finds-with-find-library/39718897#39718897", "title": "How to make CMake actually link with the library it finds with find_library", "body": "<p>find_library, finds the exact path of the library file (<em>so</em> or <em>dll</em> depending on platform). After that you still need to do add_library to link to it. The following worked for me when I had this issue with another library:</p>\n\n<pre><code>find_library(GLEW_LIBRARY NO_DEFAULT_PATH\n    NAMES GLEW glew \n    PATHS /usr/lib64\n    DOC \"The GLEW library\")\n\nadd_library(glew SHARED IMPORTED)\n\nset_target_properties(glew \n    PROPERTIES IMPORTED_LOCATION ${GLEW_LIBRARY})\n\ntarget_link_libraries(myproject glew)\n</code></pre>\n"}], "owner": {"reputation": 2135, "user_id": 3667089, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/591d11239b028c677149047326aa9209?s=128&d=identicon&r=PG&f=1", "display_name": "user3667089", "link": "https://stackoverflow.com/users/3667089/user3667089"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1333, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1474962145, "creation_date": 1452116917, "question_id": 34643467, "link": "https://stackoverflow.com/questions/34643467/how-to-make-cmake-actually-link-with-the-library-it-finds-with-find-library", "title": "How to make CMake actually link with the library it finds with find_library", "body": "<p>I am on Ubuntu 14.04 with glew 1.10 installed by default. I want to use the newest glew 1.13, but sudo apt-get remove libglew1.10 is not an option, because ubuntu-desktop depends on it, I accidentally do it once and I had to go to recovery mode to reinstall everything back.</p>\n\n<p>I downloaded the latest glew 1.13 and sudo make install. The glew 1.13 library got installed under /usr/lib64/libGLEW.so. The old 1.10 one is still at /usr/lib/x86_64-linux-gnu/libGLEW.so. The header files at /usr/include/GL/glew.h and /usr/include/GL/wglew.h do got replaced with the ones from 1.13.</p>\n\n<p>In my FindGLEW.cmake, it does successfully find the correct libGLEW.so after I run cmake ..</p>\n\n<pre><code>find_library(GLEW_LIBRARY NO_DEFAULT_PATH\n    NAMES\n        GLEW glew\n    PATHS\n        /usr/lib64\n        DOC \"The GLEW library\"\n        )\n</code></pre>\n\n<p>It could be verified by ccmake .. , the GLEW_LIBRARY section does show /usr/lib64/libGLEW.so. </p>\n\n<p>However when I compile the code, I am still getting undefined reference errors from methods only available from glew 1.13, further checking with ldd mylib.so, it shows </p>\n\n<pre><code>libGLEW.so.1.10 =&gt; /usr/lib/x86_64-linux-gnu/libGLEW.so.1.10 (0x00007f10d130b000)\n</code></pre>\n\n<p>Meaning somehow it is still linking against the old shared library from 1.10 and putting the directory search priority at etc/ld.so.conf.d/* higher than the path specified by find_library by default. How can I solve this?</p>\n\n<p>As a side note, the exact same code with the exact same CMakeLists compiles without a problem on a server without libglew1.10 and ubuntu-desktop installed.</p>\n"}, {"tags": ["c++", "arrays", "multithreading", "multidimensional-array", "mandelbrot"], "comments": [{"owner": {"reputation": 2063, "user_id": 562106, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8b32f903b988a6463c473a15fd897313?s=128&d=identicon&r=PG", "display_name": "Nick", "link": "https://stackoverflow.com/users/562106/nick"}, "edited": false, "score": 0, "creation_date": 1452117108, "post_id": 34643425, "comment_id": 57032882, "body": "Why are you overwriting threadNum?"}, {"owner": {"reputation": 10703, "user_id": 3134621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c46cfe9f917da02becc991d76352d77c?s=128&d=identicon&r=PG&f=1", "display_name": "deviantfan", "link": "https://stackoverflow.com/users/3134621/deviantfan"}, "edited": false, "score": 0, "creation_date": 1452117123, "post_id": 34643425, "comment_id": 57032893, "body": "I don&#39;t like your synchronization..."}, {"owner": {"reputation": 42446, "user_id": 902497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff13ece6277497484bfa2911c6183a30?s=128&d=identicon&r=PG", "display_name": "Raymond Chen", "link": "https://stackoverflow.com/users/902497/raymond-chen"}, "edited": false, "score": 0, "creation_date": 1452117150, "post_id": 34643425, "comment_id": 57032909, "body": "You are accessing the 2D array in a cache-unfriendly manner. (It&#39;s also confusing width and height.)"}, {"owner": {"reputation": 2063, "user_id": 562106, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8b32f903b988a6463c473a15fd897313?s=128&d=identicon&r=PG", "display_name": "Nick", "link": "https://stackoverflow.com/users/562106/nick"}, "edited": false, "score": 0, "creation_date": 1452117383, "post_id": 34643425, "comment_id": 57033027, "body": "How many physical cores are you using? 4?"}, {"owner": {"reputation": 67, "user_id": 3422247, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/769b4600072eb96c4eef4f5a73d0e428?s=128&d=identicon&r=PG&f=1", "display_name": "Bruno", "link": "https://stackoverflow.com/users/3422247/bruno"}, "edited": false, "score": 0, "creation_date": 1452117387, "post_id": 34643425, "comment_id": 57033030, "body": "Christophe: It&#39;s an i7 920, and the hardware_concurrency() function returns 8.                         deviantfan: I tried to synchronize the threads, but I lack experience with multithreading and it went wrong  Nick: Didn&#39;t notice that :P"}, {"owner": {"reputation": 2063, "user_id": 562106, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8b32f903b988a6463c473a15fd897313?s=128&d=identicon&r=PG", "display_name": "Nick", "link": "https://stackoverflow.com/users/562106/nick"}, "edited": false, "score": 0, "creation_date": 1452117750, "post_id": 34643425, "comment_id": 57033225, "body": "As Raymond stated, you&#39;re indexing may be the culprit, try swapping x &amp; y in your inner loop so see if the timing changes."}, {"owner": {"reputation": 67, "user_id": 3422247, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/769b4600072eb96c4eef4f5a73d0e428?s=128&d=identicon&r=PG&f=1", "display_name": "Bruno", "link": "https://stackoverflow.com/users/3422247/bruno"}, "edited": false, "score": 0, "creation_date": 1452117994, "post_id": 34643425, "comment_id": 57033344, "body": "I swapped the x and y for loops, I still have the same times and a similar  order of exiting threads (0,7,1,6,2,5,3,4)"}, {"owner": {"reputation": 8173, "user_id": 3299580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5442c85b57162abfc606d86c0083e1d?s=128&d=identicon&r=PG&f=1", "display_name": "The Dark", "link": "https://stackoverflow.com/users/3299580/the-dark"}, "edited": false, "score": 0, "creation_date": 1452122001, "post_id": 34643425, "comment_id": 57035104, "body": "Can you fix you undefined behavior (<code>x &lt;= WIDTH</code> means writing outside of array bounds) and see if it changes the result?"}, {"owner": {"reputation": 42446, "user_id": 902497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff13ece6277497484bfa2911c6183a30?s=128&d=identicon&r=PG", "display_name": "Raymond Chen", "link": "https://stackoverflow.com/users/902497/raymond-chen"}, "edited": false, "score": 0, "creation_date": 1452124338, "post_id": 34643425, "comment_id": 57035944, "body": "The i7-920 has only 4 physical cores. (It has 8 virtual cores.)"}], "answers": [{"comments": [{"owner": {"reputation": 67, "user_id": 3422247, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/769b4600072eb96c4eef4f5a73d0e428?s=128&d=identicon&r=PG&f=1", "display_name": "Bruno", "link": "https://stackoverflow.com/users/3422247/bruno"}, "edited": false, "score": 0, "creation_date": 1452120987, "post_id": 34644248, "comment_id": 57034694, "body": "I just wrote that to know when threads have finished and it works, it&#39;s just a 8 bool array, If writing to global from multiple threads is a problem, then the issue can be writing to bitmap[x][y], every thread is writing 4,000,000 bytes for with and height = 4000 and bitmap[x][y] is global... But I still don&#39;t think that is the issue, because if I comment out <code>bitmap[x][y] = isPartOfSet(xx, yy) * 10;</code> and make that line <code>isPartOfSet(xx, yy) * 10;</code> the exact same thing happens"}, {"owner": {"reputation": 10703, "user_id": 3134621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c46cfe9f917da02becc991d76352d77c?s=128&d=identicon&r=PG&f=1", "display_name": "deviantfan", "link": "https://stackoverflow.com/users/3134621/deviantfan"}, "reply_to_user": {"reputation": 67, "user_id": 3422247, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/769b4600072eb96c4eef4f5a73d0e428?s=128&d=identicon&r=PG&f=1", "display_name": "Bruno", "link": "https://stackoverflow.com/users/3422247/bruno"}, "edited": false, "score": 0, "creation_date": 1452153716, "post_id": 34644248, "comment_id": 57045228, "body": "@Bruno <code>it works</code> No it does not, and if it works in <i>your case</i>, you&#39;re just lucky."}], "tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": false, "score": 1, "last_activity_date": 1452120127, "creation_date": 1452120127, "answer_id": 34644248, "question_id": 34643425, "link": "https://stackoverflow.com/questions/34643425/last-threads-execute-slower-than-first-threads-while-writing-to-an-array/34644248#34644248", "title": "Last threads execute slower than first threads while writing to an array", "body": "<p>Classic example of incorret concurrent usage of global variable.</p>\n\n<pre><code>bool finishedThreads[MAX_THREADS];\n</code></pre>\n\n<p>is global, and is accessed from multiples threads (written/read). You can not expect this to work. For your case, you shouldn't even use this variable. Instead, you should be waiting on events of thread completion.</p>\n"}, {"comments": [{"owner": {"reputation": 67, "user_id": 3422247, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/769b4600072eb96c4eef4f5a73d0e428?s=128&d=identicon&r=PG&f=1", "display_name": "Bruno", "link": "https://stackoverflow.com/users/3422247/bruno"}, "edited": false, "score": 1, "creation_date": 1452121507, "post_id": 34644463, "comment_id": 57034916, "body": "Ok, i will try to use the std::thread library, and the hard coded 8 thread was just a temporal thing to try my code, I was going to make it dynamic. Also, what do you recommend instead of Sleep()? Yhea, i&#39;m very new to mulithreading :/ I should try to learn more about a topic before asking a question about that on stackoverflow."}, {"owner": {"reputation": 5994, "user_id": 1127972, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/WkDOK.jpg?s=128&g=1", "display_name": "doug65536", "link": "https://stackoverflow.com/users/1127972/doug65536"}, "reply_to_user": {"reputation": 67, "user_id": 3422247, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/769b4600072eb96c4eef4f5a73d0e428?s=128&d=identicon&r=PG&f=1", "display_name": "Bruno", "link": "https://stackoverflow.com/users/3422247/bruno"}, "edited": false, "score": 0, "creation_date": 1452406407, "post_id": 34644463, "comment_id": 57151308, "body": "@Bruno I expanded my answer to be more specific on ways to avoid <code>Sleep</code> and spin loops. I hope it is more helpful."}], "tags": [], "owner": {"reputation": 5994, "user_id": 1127972, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/WkDOK.jpg?s=128&g=1", "display_name": "doug65536", "link": "https://stackoverflow.com/users/1127972/doug65536"}, "is_accepted": false, "score": 0, "last_activity_date": 1452407159, "last_edit_date": 1592644375, "creation_date": 1452121053, "answer_id": 34644463, "question_id": 34643425, "link": "https://stackoverflow.com/questions/34643425/last-threads-execute-slower-than-first-threads-while-writing-to-an-array/34644463#34644463", "title": "Last threads execute slower than first threads while writing to an array", "body": "<p>Hard coding to 8 threads is terrible, what about some user's dual core laptop? <a href=\"http://en.cppreference.com/w/cpp/thread/thread/hardware_concurrency\" rel=\"nofollow noreferrer\"><code>std::thread::hardware_concurrency</code></a>.</p>\n<p>Sleep is awful. Your spin-loop is absolutely NOT the right way to do it. Sorry, just being honest.</p>\n<p>Use <a href=\"http://en.cppreference.com/w/cpp/thread/thread\" rel=\"nofollow noreferrer\"><code>std::thread</code></a> and use <a href=\"http://en.cppreference.com/w/cpp/thread/thread/join\" rel=\"nofollow noreferrer\"><code>join</code></a> to wait for them to complete. Even better: do all but one work item on other threads, do one on the main thread, then join the other ones. If there are N CPUs then you should create N-1 threads and do one item on the main thread.</p>\n<p>Why use Windows-only APIs, when there are drastically better standard C++ library classes?</p>\n<h3>Suggested way to avoid <code>Sleep</code></h3>\n<p>If simply waiting for the thread to exit is not sufficient (using join mentioned above), in a more complex scenario, then you should use <a href=\"http://en.cppreference.com/w/cpp/thread/mutex\" rel=\"nofollow noreferrer\"><code>std::mutex</code></a>, <a href=\"http://en.cppreference.com/w/cpp/thread/unique_lock\" rel=\"nofollow noreferrer\"><code>std::unique_lock</code></a>, and <a href=\"http://en.cppreference.com/w/cpp/thread/condition_variable\" rel=\"nofollow noreferrer\"><code>std::condition_variable</code></a>.</p>\n<p>You should have a variable that is set to true when the notification happens. In the code that waits, you acquire the mutex, check that flag, and if it isn't set, you call <a href=\"http://en.cppreference.com/w/cpp/thread/condition_variable/wait\" rel=\"nofollow noreferrer\"><code>wait</code></a> on the condition variable.</p>\n<p>In the thread that notifies the other thread, you acquire the mutex, set the flag variable I mentioned, use the <a href=\"http://en.cppreference.com/w/cpp/thread/condition_variable/notify_one\" rel=\"nofollow noreferrer\"><code>notify_one</code></a> or <a href=\"http://en.cppreference.com/w/cpp/thread/condition_variable/notify_all\" rel=\"nofollow noreferrer\"><code>notify_all</code></a> method on the condition variable.</p>\n<p>Have a look over this <a href=\"http://en.cppreference.com/w/cpp/thread\" rel=\"nofollow noreferrer\">reference on cppreference</a>. The main ones you use are the ones I already mentioned, though.</p>\n"}, {"comments": [{"owner": {"reputation": 67, "user_id": 3422247, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/769b4600072eb96c4eef4f5a73d0e428?s=128&d=identicon&r=PG&f=1", "display_name": "Bruno", "link": "https://stackoverflow.com/users/3422247/bruno"}, "edited": false, "score": 0, "creation_date": 1452131315, "post_id": 34645278, "comment_id": 57037863, "body": "THANK YOU! I cant believe I missed that! I noticed when I made a &quot;row counter&quot; that it started off very quickly and it got slower and slower (at mid point) and got faster and faster, and I Immediately thought, &quot;of course, it&#39;s because of all the iterations it has to go through while it&#39;s in the middle!&quot; But I didn&#39;t think of this when I multi threaded it! Thank you very much! :D and that&#39;s because why 4 and 3 take the most amount of time and 0 and 7 the least amount, in fact you can see how it&#39;s distributed in pairs, because it&#39;s symmetric..."}], "tags": [], "owner": {"reputation": 1141, "user_id": 5749944, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbd9f0cd3fedf76ad126abaab58a572c?s=128&d=identicon&r=PG", "display_name": "ThorngardSO", "link": "https://stackoverflow.com/users/5749944/thorngardso"}, "is_accepted": true, "score": 5, "last_activity_date": 1452126438, "last_edit_date": 1452126438, "creation_date": 1452125729, "answer_id": 34645278, "question_id": 34643425, "link": "https://stackoverflow.com/questions/34643425/last-threads-execute-slower-than-first-threads-while-writing-to-an-array/34645278#34645278", "title": "Last threads execute slower than first threads while writing to an array", "body": "<p>In my answer, I'll neither address threading/synchronizing issues or thoughts on caching -- see the other answers/comments for that.</p>\n\n<p>My point is a different one: you write that <em>\"Every thread has the same thing to do, but with different numbers\"</em>. If my memory on the mandelbrot set serves me right, determining whether a point is a member of the set (IOW the implementation of your <code>isPartOfSet</code> function, which you did not provide) is an iterative process. Some points \"bail out\" quickly, some points dont and you have to keep on iterating until your predefined maximum-numer-of-iters.</p>\n\n<p>So what I'm saying is: with your \"one-large-block-per-thread\" parallelization, it's probably natural that your threads take significantly different amounts of time.</p>\n\n<p>The solution to this kind of issue is to split the problem (i.e. the image) into smaller portions, the size of which is <em>not</em> dependent on the number of threads, but should be chosen empirically to be a) not too large to prevent unequal work distribution (as in your example with the huge blocks) and b) not so small as to cause excessive organizational overhead.</p>\n\n<p>So now, you have M threads and N chunks of work (with N>>M), and you need an implementation that lets each thread work in a loop like</p>\n\n<pre><code>while (worktodo) fetch_a_chunk_of_work_and_do_it ()\n</code></pre>\n\n<p>How this kind of producer/consumer pattern is implemented -- I'll leave that for others to describe (or for you to google :-))</p>\n"}], "owner": {"reputation": 67, "user_id": 3422247, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/769b4600072eb96c4eef4f5a73d0e428?s=128&d=identicon&r=PG&f=1", "display_name": "Bruno", "link": "https://stackoverflow.com/users/3422247/bruno"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 117, "favorite_count": 0, "accepted_answer_id": 34645278, "answer_count": 3, "score": 0, "last_activity_date": 1452407159, "creation_date": 1452116732, "question_id": 34643425, "link": "https://stackoverflow.com/questions/34643425/last-threads-execute-slower-than-first-threads-while-writing-to-an-array", "title": "Last threads execute slower than first threads while writing to an array", "body": "<p>I'm trying to optimize a Mandelbrot set generator, the problem is that i am trying to make it multi threaded by using the _beginthread() function. The computing problem I'm solving is running a function on a 2D plane, I am trying to run about 8 threads at the same time, each of them computing a portion (row) of the 2D array, but I notice that the first threads that finish, finish a lot faster that the last threads that finish. this is the output:</p>\n\n<pre><code>Starting thread 0\nStarting thread 1\nStarting thread 2\nStarting thread 3\nStarting thread 4\nStarting thread 5\nStarting thread 6\nStarting thread 7\nEnding thread   0 - Time taken: 1062ms\nEnding thread   7 - Time taken: 1031ms\nEnding thread   1 - Time taken: 1610ms\nEnding thread   6 - Time taken: 1563ms\nEnding thread   2 - Time taken: 10265ms\nEnding thread   5 - Time taken: 10219ms\nEnding thread   4 - Time taken: 31609ms\nEnding thread   3 - Time taken: 31641ms\n</code></pre>\n\n<p>Every thread has the same thing to do, but with different numbers, I don't understand why I get those times\nThis is how I multithreaded this:</p>\n\n<pre><code>#define HEIGHT 4000\n#define WIDTH 4000\n#define MAX_THREADS 8\nint const maxIterations = 150;\n\nint bitmap[HEIGHT][WIDTH];\nbool finishedThreads[MAX_THREADS];\n\nvoid renderRow(void * arg) {\n    int startTime = GetTickCount();\n    int * threadNumPinter = (int*)arg;\n    int threadNum = *threadNumPinter;\n    int startRow = threadNum * (HEIGHT / MAX_THREADS);\n    for (int y = startRow; y &lt;= startRow+(HEIGHT / MAX_THREADS); y++) {\n        for (int x = 0; x &lt;= WIDTH; x++) {\n            double xx = (((double)x / (double)WIDTH) * 4.0) - 2.0;\n            double yy = (((double)y / (double)HEIGHT) * 4.0) - 2.0;\n            bitmap[x][y] = isPartOfSet(xx, yy) * 10;\n        }\n    }\n    threadNum = startRow / (HEIGHT / MAX_THREADS);\n    finishedThreads[threadNum] = true;\n    cout &lt;&lt; \"Ending thread \" &lt;&lt; threadNum &lt;&lt; \" - Time: \" &lt;&lt; GetTickCount() - startTime &lt;&lt; \"ms\" &lt;&lt; endl;\n    _endthread();\n}\n\n\nint main() {\n    int startTime = GetTickCount();\n    HANDLE hThread;\n    HANDLE ghEvents[2];\n    DWORD dwThreadID;\n    int rowsPerThread = HEIGHT / MAX_THREADS;\n    int arg;\n    int threadIds[MAX_THREADS];\n    for (int i = 0; i &lt; MAX_THREADS; i ++) {\n        threadIds[i] = i;\n        cout &lt;&lt; \"Starting thread \" &lt;&lt; i &lt;&lt; endl;\n        arg = i;\n        _beginthread(renderRow, 0, &amp;threadIds[i]);\n        Sleep(10);\n    }\n    bool done = true;//Wait for all threads to finish\n    while (1) {\n        for (int i = 0; i &lt; MAX_THREADS; i++){\n            if (finishedThreads[i] == false)done = false;\n        }\n        if (done == true) break;\n        else done = true;\n        Sleep(20);\n    }\n    saveBitmap(WIDTH, HEIGHT);\n    cout &lt;&lt; endl &lt;&lt; \"Rendered in \" &lt;&lt; double(GetTickCount() - startTime) / 1000.0 &lt;&lt; \" seconds\" &lt;&lt; endl;\n    cin.get();\n    main();\n}\n</code></pre>\n\n<p>There is obviously more code than that, but I don't think it has any effect on the issue. What am I doing wrong here? I had the same issue on CUDA, so I believe it's how I'm implementing mutithreading. Thanks.</p>\n"}, {"tags": ["c++", "events", "firebird"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1452116780, "post_id": 34643389, "comment_id": 57032700, "body": "<i>&quot;this should be nice and easy. What am I missing?&quot;</i> Elaborate in which ways this doesn&#39;t work for you actually. Your question is very vague."}, {"owner": {"reputation": 11, "user_id": 4271964, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b9f813b7a60dd12aec47783816fa2d1a?s=128&d=identicon&r=PG&f=1", "display_name": "Pi Zi", "link": "https://stackoverflow.com/users/4271964/pi-zi"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1452163803, "post_id": 34643389, "comment_id": 57051467, "body": "Thank you for your response, @\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6, but honestly said, I&#39;m out of ideas.  The point is how to implement a listener function so it would be triggered by an event sent by firebird DB. For the moment being (as you can see) it is &quot;implemented&quot;, but the function is never called on event. If you have a scrap of &quot;working&quot; code I would really appreciate it."}], "owner": {"reputation": 11, "user_id": 4271964, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b9f813b7a60dd12aec47783816fa2d1a?s=128&d=identicon&r=PG&f=1", "display_name": "Pi Zi", "link": "https://stackoverflow.com/users/4271964/pi-zi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 114, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1452116631, "creation_date": 1452116631, "question_id": 34643389, "link": "https://stackoverflow.com/questions/34643389/ibpp-events-implementation", "title": "IBPP Events implementation?", "body": "<p>What is the easiest method of implementing an EventInterface listener in c++?</p>\n\n<p>My 'listener' scraps of code look like:</p>\n\n<pre><code>class EventInterface\n{\npublic:\n    virtual void ibppEventHandler(Events eventsSet, const std::string&amp; eventName, int count) = 0;\n    virtual ~EventInterface() { };\n};\n    ..\n    someFunc(){\n    IBPP::Database db2 = IBPP::DatabaseFactory(\"\", DBName, Login, Pass);\n     db2-&gt;Connect();\n     IBPP::Events ev = IBPP::EventsFactory(db2);\n    }\n</code></pre>\n\n<p>According to documentation here\n<a href=\"http://www.ibpp.org/reference/events\" rel=\"nofollow\">IBPP::Events</a> and here\n<a href=\"http://www.ibpp.org/reference/eventinterface\" rel=\"nofollow\">class EventInterface</a></p>\n\n<p>this should be nice and easy. What am I missing?</p>\n"}, {"tags": ["c++", "visual-studio", "autocomplete", "intellisense"], "comments": [{"owner": {"reputation": 567, "user_id": 7830114, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7a359a1bb741e3bc2bfa56ea059da84?s=128&d=identicon&r=PG&f=1", "display_name": "not an alien", "link": "https://stackoverflow.com/users/7830114/not-an-alien"}, "edited": false, "score": 0, "creation_date": 1543920945, "post_id": 34643151, "comment_id": 94083634, "body": "Ever found one?"}, {"owner": {"reputation": 17408, "user_id": 2881849, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5a2fd0122f50f7582be15be3062c5b71?s=128&d=identicon&r=PG&f=1", "display_name": "MikeMB", "link": "https://stackoverflow.com/users/2881849/mikemb"}, "reply_to_user": {"reputation": 567, "user_id": 7830114, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7a359a1bb741e3bc2bfa56ea059da84?s=128&d=identicon&r=PG&f=1", "display_name": "not an alien", "link": "https://stackoverflow.com/users/7830114/not-an-alien"}, "edited": false, "score": 1, "creation_date": 1544018319, "post_id": 34643151, "comment_id": 94127287, "body": "@notanalien: Unfortunately not, but I don&#39;t remember if I ever did a throughout search after I posted this question here."}], "answers": [{"comments": [{"owner": {"reputation": 17408, "user_id": 2881849, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5a2fd0122f50f7582be15be3062c5b71?s=128&d=identicon&r=PG&f=1", "display_name": "MikeMB", "link": "https://stackoverflow.com/users/2881849/mikemb"}, "edited": false, "score": 0, "creation_date": 1452116448, "post_id": 34643284, "comment_id": 57032515, "body": "I haven&#39;t found it there, but I&#39;ll give it another look."}, {"owner": {"reputation": 17408, "user_id": 2881849, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5a2fd0122f50f7582be15be3062c5b71?s=128&d=identicon&r=PG&f=1", "display_name": "MikeMB", "link": "https://stackoverflow.com/users/2881849/mikemb"}, "edited": false, "score": 0, "creation_date": 1452191691, "post_id": 34643284, "comment_id": 57070675, "body": "I sem to be unable to find the appropriate option (or combination thereof) could you be more specific or was this just a guess?"}], "tags": [], "owner": {"reputation": 1561, "user_id": 4735373, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fNWW6.jpg?s=128&g=1", "display_name": "Tobiah Zarlez", "link": "https://stackoverflow.com/users/4735373/tobiah-zarlez"}, "is_accepted": false, "score": -3, "last_activity_date": 1452116275, "creation_date": 1452116275, "answer_id": 34643284, "question_id": 34643151, "link": "https://stackoverflow.com/questions/34643151/visual-studio-auto-add-parentheses-to-function-name/34643284#34643284", "title": "Visual studio auto add parentheses to function name", "body": "<p>I believe this functionality is built into Visual Studio 2015.</p>\n\n<p>Go to Tools -> Options -> Text Editor -> C/C++ -> Formatting</p>\n\n<p>There you will find multiple items that you can tweak to your exact preferences.</p>\n"}], "owner": {"reputation": 17408, "user_id": 2881849, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5a2fd0122f50f7582be15be3062c5b71?s=128&d=identicon&r=PG&f=1", "display_name": "MikeMB", "link": "https://stackoverflow.com/users/2881849/mikemb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1485, "favorite_count": 1, "answer_count": 1, "score": 4, "last_activity_date": 1452118573, "creation_date": 1452115819, "last_edit_date": 1452118573, "question_id": 34643151, "link": "https://stackoverflow.com/questions/34643151/visual-studio-auto-add-parentheses-to-function-name", "title": "Visual studio auto add parentheses to function name", "body": "<p>Is there an option or a (free) extension in VS2015 (for C++), such that when Intellisense auto-completes a function name (at the call site), it also adds opening and closing parentheses and sets the cursor in between them?</p>\n"}, {"tags": ["c++", "arrays", "templates", "iterator", "tuples"], "answers": [{"tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": true, "score": 2, "last_activity_date": 1452117133, "creation_date": 1452117133, "answer_id": 34643517, "question_id": 34643139, "link": "https://stackoverflow.com/questions/34643139/c-operating-on-packed-arrays/34643517#34643517", "title": "C++ operating on &quot;packed&quot; arrays", "body": "<p>I don't think you can do that. However, you can accomplish something similar by the use of a helper array of indices.</p>\n\n<pre><code>int keys[ARRAY_SIZE];\nfloat a[ARRAY_SIZE];\nfloat b[ARRAY_SIZE];\n\n// Fill up the contents of keys, a, and b\n\n// Create an array of indices.\nint indices[ARRAY_SIZE];\nfor ( int i = 0; i &lt; ARRAY_SIZE; ++i )\n   indices[i] = i;\n\n// Sort the indices using keys.\nmySortByKey(keys, indices);\n\n// Now access the arrays a and b indirectly, using the sorted array\n// of indices as an intermediate object.\nfor ( int i = 0; i &lt; ARRAY_SIZE; ++i )\n{\n   float fa = a[indices[i]];\n   float fb = b[indices[i]];\n}\n</code></pre>\n"}], "owner": {"reputation": 18443, "user_id": 1886641, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/UsR5f.png?s=128&g=1", "display_name": "Vitality", "link": "https://stackoverflow.com/users/1886641/vitality"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 158, "favorite_count": 0, "accepted_answer_id": 34643517, "answer_count": 1, "score": 2, "last_activity_date": 1452117133, "creation_date": 1452115789, "question_id": 34643139, "link": "https://stackoverflow.com/questions/34643139/c-operating-on-packed-arrays", "title": "C++ operating on &quot;packed&quot; arrays", "body": "<p>Suppose that I have two, for example, <code>float</code> arrays <code>a</code> and <code>b</code>, an <code>int</code> key array <code>k</code> and a template <code>mySortByKey</code> function of my own, operating on a single array, something like</p>\n\n<pre><code>template&lt;class T&gt;\nmySortByKey(int *k, T *a)\n</code></pre>\n\n<p>Is there a possibility (for example, using zip iterators and tuples of some sorts) to enable <code>mySort</code> operating simultaneously on <code>a</code> and <code>b</code>, so that they can be simultaneously ordered according to the key <code>k</code>?</p>\n"}, {"tags": ["c++", "shared-ptr"], "comments": [{"owner": {"reputation": 1, "user_id": 5754407, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23291ed82703588e133f55da19667f39?s=128&d=identicon&r=PG&f=1", "display_name": "danielm2100", "link": "https://stackoverflow.com/users/5754407/danielm2100"}, "reply_to_user": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1452117097, "post_id": 34643063, "comment_id": 57032878, "body": "Removed. Haven&#39;t posted before and that was added by the Bold button."}, {"owner": {"reputation": 62852, "user_id": 1737, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/9152c282382ec3b1f0cd18dc8ba7a5ab?s=128&d=identicon&r=PG", "display_name": "Roddy", "link": "https://stackoverflow.com/users/1737/roddy"}, "edited": false, "score": 0, "creation_date": 1452117564, "post_id": 34643063, "comment_id": 57033125, "body": "Don&#39;t you need <code>std::shared_ptr</code> in dictionary.h instead of just <code>shared_ptr</code>?"}, {"owner": {"reputation": 1, "user_id": 5754407, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23291ed82703588e133f55da19667f39?s=128&d=identicon&r=PG&f=1", "display_name": "danielm2100", "link": "https://stackoverflow.com/users/5754407/danielm2100"}, "reply_to_user": {"reputation": 62852, "user_id": 1737, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/9152c282382ec3b1f0cd18dc8ba7a5ab?s=128&d=identicon&r=PG", "display_name": "Roddy", "link": "https://stackoverflow.com/users/1737/roddy"}, "edited": false, "score": 0, "creation_date": 1452117683, "post_id": 34643063, "comment_id": 57033187, "body": "That&#39;s it. Thank you! I knew it was going to be something obvious. How do I mark this as the answer?"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 2212651, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be07c9bf343a91d07978d5bd88e38320?s=128&d=identicon&r=PG", "display_name": "Chris Griffen", "link": "https://stackoverflow.com/users/2212651/chris-griffen"}, "edited": false, "score": 0, "creation_date": 1452118593, "post_id": 34643145, "comment_id": 57033651, "body": "I&#39;m confused, why was this downvoted if the second part was the answer?"}, {"owner": {"reputation": 62852, "user_id": 1737, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/9152c282382ec3b1f0cd18dc8ba7a5ab?s=128&d=identicon&r=PG", "display_name": "Roddy", "link": "https://stackoverflow.com/users/1737/roddy"}, "edited": false, "score": 1, "creation_date": 1452118800, "post_id": 34643145, "comment_id": 57033740, "body": "Probably because you should NEVER, EVER put <code>using &lt;namespace&gt;;</code> in header files."}], "tags": [], "owner": {"reputation": 1, "user_id": 2212651, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be07c9bf343a91d07978d5bd88e38320?s=128&d=identicon&r=PG", "display_name": "Chris Griffen", "link": "https://stackoverflow.com/users/2212651/chris-griffen"}, "is_accepted": false, "score": -1, "last_activity_date": 1452115807, "creation_date": 1452115807, "answer_id": 34643145, "question_id": 34643063, "link": "https://stackoverflow.com/questions/34643063/c-function-not-a-member-of-class-with-shared-ptr-or-why-is-my-variable-undecl/34643145#34643145", "title": "C++ function not a member of class with shared_ptr, or why is my variable undeclared?", "body": "<p>Specifying a return type as \"**shared_ptr\" is giving you an error because that is not valid C++. It seems that you want \"shared_ptr\" since you are not dereferencing it (unless you are using that as a marker for readers).</p>\n\n<p>Also, in the header you are specifying \"shared_ptr\" without \"using namespace std;\" above it, making the compiler think it is a global type when it in fact belongs to the \"std\" namespace.</p>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 5754407, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23291ed82703588e133f55da19667f39?s=128&d=identicon&r=PG&f=1", "display_name": "danielm2100", "link": "https://stackoverflow.com/users/5754407/danielm2100"}, "edited": false, "score": 0, "creation_date": 1452117365, "post_id": 34643259, "comment_id": 57033019, "body": "Switched those around, but didn&#39;t change the errors. What you are looking at is all the code except for an empty main()."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 1, "user_id": 5754407, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23291ed82703588e133f55da19667f39?s=128&d=identicon&r=PG&f=1", "display_name": "danielm2100", "link": "https://stackoverflow.com/users/5754407/danielm2100"}, "edited": false, "score": 0, "creation_date": 1452122351, "post_id": 34643259, "comment_id": 57035236, "body": "@danielm2100 attach exact errors from compiler to your question (if there are too many several ones form the beginning)"}], "tags": [], "owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "is_accepted": false, "score": 1, "last_activity_date": 1452206104, "last_edit_date": 1452206104, "creation_date": 1452116209, "answer_id": 34643259, "question_id": 34643063, "link": "https://stackoverflow.com/questions/34643063/c-function-not-a-member-of-class-with-shared-ptr-or-why-is-my-variable-undecl/34643259#34643259", "title": "C++ function not a member of class with shared_ptr, or why is my variable undeclared?", "body": "<pre><code>typedef shared_ptr&lt;Node&gt; node_ptr;\nstruct Node;\n</code></pre>\n\n<p>When you forward declare you need to declare before use, not the other way around. If you are not getting compilation error, it looks like you have <code>Node</code> defined somewhere else and <code>shared_ptr&lt;Node&gt;</code> means something different than your <code>typedef</code>, hence the error. It is difficult to say more as you do not provide MCVE.</p>\n"}], "owner": {"reputation": 1, "user_id": 5754407, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23291ed82703588e133f55da19667f39?s=128&d=identicon&r=PG&f=1", "display_name": "danielm2100", "link": "https://stackoverflow.com/users/5754407/danielm2100"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 166, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1452206104, "creation_date": 1452115498, "last_edit_date": 1452117059, "question_id": 34643063, "link": "https://stackoverflow.com/questions/34643063/c-function-not-a-member-of-class-with-shared-ptr-or-why-is-my-variable-undecl", "title": "C++ function not a member of class with shared_ptr, or why is my variable undeclared?", "body": "<p>I have a class that is in the beginning stages of representing a dictionary and having some problems compiling. Aside from the file containing main, these are the only files in the project. Main contains no references to the Dictionary yet.</p>\n\n<p>Dictionary.h</p>\n\n<pre><code>#include &lt;vector&gt;\n\ntypedef shared_ptr&lt;Node&gt; node_ptr;\nstruct Node;\n\nclass Dictionary\n{\npublic:\n    Dictionary(void);\n    ~Dictionary(void);\n    Dictionary(char* filename);\n\nprivate:\n    node_ptr root;\n    shared_ptr&lt;Node&gt; curNode;  // 3 \n    void buildTree(char* filename);\n    shared_ptr&lt;Node&gt; findChild(shared_ptr&lt;Node&gt; node, char val); // 1\n    node_ptr findChild(node_ptr node, char val); // 2 (not repeated in actual header)\n};\n</code></pre>\n\n<p>Dictionary.cpp</p>\n\n<pre><code>#include \"stdafx.h\"\n#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;memory&gt;\n#include \"Dictionary.h\"\n\nusing namespace std;\n\nstruct Node\n{\n    Node::Node(char val)\n    {\n        value = val;\n    };\n    vector&lt;node_ptr&gt; children;\n    char value;\n};\n\nDictionary::Dictionary(char* filename)\n{\n    root = make_shared&lt;Node&gt;(0);\n    curNode = root;\n    buildTree(filename);\n}\n\nDictionary::Dictionary(){}\nDictionary::~Dictionary(void){}\n\nshared_ptr&lt;Node&gt; Dictionary::findChild(shared_ptr&lt;Node&gt; node, char val)  // 1\nnode_ptr Dictionary::findChild(node_ptr node, char val)  // 2\n{\n\n    for(int i = 0; i &lt; node-&gt;children.size(); i++)\n    {\n        if( node-&gt;children[i]-&gt;value == val )\n            return node-&gt;children[i];\n    }\n\n    return 0;\n}\n\nvoid Dictionary::buildTree(char* filename)\n{\n    ifstream input;\n    node_ptr temp;\n    input.open(filename);\n    char* line = (char*)malloc(45);\n\n    for(int i = 0; i &lt; 26; i++)  //build the first 26 nodes\n        root-&gt;children.push_back(make_shared&lt;Node&gt;('a' + i));\n\n    while(!input.eof())\n    {\n        input &gt;&gt; line;\n        int lind = 1;\n        char curChar = line[0];\n        curNode = findChild(root, curChar); //assume we got this one\n\n        while(1)\n        {\n            curChar = line[lind];\n            if(curChar == 0)\n                break;\n\n            temp = findChild(curNode, line[lind]);\n            if(temp == 0)\n            {\n                temp = make_shared&lt;Node&gt;(line[lind]);\n                curNode-&gt;children.push_back(temp);\n                curNode = temp;\n            }\n            else\n                curNode = temp;\n\n            lind++;\n        }\n    }\n\n    free(line);\n}\n</code></pre>\n\n<p>When I compile this I get these errors.\nIn the case when bolded line 1 is used: \" 'findChild : is not a member of 'Dictionary' \"\nIn the case when bolded line 2 is used: \" Syntax error : ')' \"</p>\n\n<p>On top of this I get errors claiming that my variables aren't declared such as curNode in Dictionary's constructor.</p>\n\n<p>The issue seems to be around the use of shared_ptr somehow.</p>\n"}, {"tags": ["c++", "visual-studio-2013", "lookup-tables"], "comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1452124343, "post_id": 34643026, "comment_id": 57035947, "body": "<i>&quot;I know this would probably work if I compiled the LUT statically inside a .cpp file&quot;</i> I very much doubt it would make a blind bit of difference"}], "answers": [{"comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 1, "creation_date": 1452124434, "post_id": 34643152, "comment_id": 57035977, "body": "Because globals have nothing to do with the stack (another example of why using &quot;stack&quot;/&quot;heap&quot; terminology to loosely describe &quot;I didn&#39;t write <code>new</code>&quot;/&quot;I wrote <code>new</code>&quot; is very bad)"}, {"owner": {"reputation": 2237, "user_id": 1219722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f308a0947ea106f91b5ba413cd9c04c?s=128&d=identicon&r=PG", "display_name": "Dmitry Rubanovich", "link": "https://stackoverflow.com/users/1219722/dmitry-rubanovich"}, "edited": false, "score": 0, "creation_date": 1452131722, "post_id": 34643152, "comment_id": 57037978, "body": "wouldn&#39;t the global data be in data segment rather than on stack?"}, {"owner": {"reputation": 6710, "user_id": 4052030, "user_type": "registered", "accept_rate": 89, "profile_image": "https://lh3.googleusercontent.com/-k4nrKct_Bc8/AAAAAAAAAAI/AAAAAAAABBk/fIYqRy8gDVA/photo.jpg?sz=128", "display_name": "Nicolas Holthaus", "link": "https://stackoverflow.com/users/4052030/nicolas-holthaus"}, "reply_to_user": {"reputation": 2237, "user_id": 1219722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f308a0947ea106f91b5ba413cd9c04c?s=128&d=identicon&r=PG", "display_name": "Dmitry Rubanovich", "link": "https://stackoverflow.com/users/1219722/dmitry-rubanovich"}, "edited": false, "score": 0, "creation_date": 1452167857, "post_id": 34643152, "comment_id": 57054167, "body": "@DmitryRubanovich I think you are correct, but I&#39;ll leave my answer alone in case someone else makes the same mistake due to the same misunderstanding."}], "tags": [], "owner": {"reputation": 6710, "user_id": 4052030, "user_type": "registered", "accept_rate": 89, "profile_image": "https://lh3.googleusercontent.com/-k4nrKct_Bc8/AAAAAAAAAAI/AAAAAAAABBk/fIYqRy8gDVA/photo.jpg?sz=128", "display_name": "Nicolas Holthaus", "link": "https://stackoverflow.com/users/4052030/nicolas-holthaus"}, "is_accepted": true, "score": 0, "last_activity_date": 1452115820, "creation_date": 1452115820, "answer_id": 34643152, "question_id": 34643026, "link": "https://stackoverflow.com/questions/34643026/msvc2013-cant-compile-header-file-containing-huge-lookup-table/34643152#34643152", "title": "msvc2013 can&#39;t compile header file containing huge lookup table", "body": "<p>I originally used vectors so the LUT would be heap-allocated, as I was worried about possibly overflowing the stack. Refactoring the vector as a const array solved the issue, and didn't overflow.</p>\n\n<pre><code>const double EGM96LUT[721][1441] = {{...},{...},...};\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1452124414, "post_id": 34645024, "comment_id": 57035966, "body": "The question doesn&#39;t meantion stack."}, {"owner": {"reputation": 2237, "user_id": 1219722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f308a0947ea106f91b5ba413cd9c04c?s=128&d=identicon&r=PG", "display_name": "Dmitry Rubanovich", "link": "https://stackoverflow.com/users/1219722/dmitry-rubanovich"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1452125041, "post_id": 34645024, "comment_id": 57036155, "body": "@Lightness Races in Orbit, the author&#39;s answer to own question does mention that he was using vectors to avoid overflowing the stack."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1452128809, "post_id": 34645024, "comment_id": 57037133, "body": "Ok that&#39;s a bit confusing if you&#39;re responding to another answer in your own answer :)"}, {"owner": {"reputation": 2237, "user_id": 1219722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f308a0947ea106f91b5ba413cd9c04c?s=128&d=identicon&r=PG", "display_name": "Dmitry Rubanovich", "link": "https://stackoverflow.com/users/1219722/dmitry-rubanovich"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1452131708, "post_id": 34645024, "comment_id": 57037973, "body": "@Lightness Races in Orbit,  you are right.  I&#39;ll move that part to a comment on the answer."}], "tags": [], "owner": {"reputation": 2237, "user_id": 1219722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f308a0947ea106f91b5ba413cd9c04c?s=128&d=identicon&r=PG", "display_name": "Dmitry Rubanovich", "link": "https://stackoverflow.com/users/1219722/dmitry-rubanovich"}, "is_accepted": false, "score": 1, "last_activity_date": 1452131743, "last_edit_date": 1452131743, "creation_date": 1452124123, "answer_id": 34645024, "question_id": 34643026, "link": "https://stackoverflow.com/questions/34643026/msvc2013-cant-compile-header-file-containing-huge-lookup-table/34645024#34645024", "title": "msvc2013 can&#39;t compile header file containing huge lookup table", "body": "<p>You can always break it up.  Generate internal vectors one at a time (use your favorite scripting language to generate this long text) and then store them in the outer vector.  </p>\n\n<p>Since, from your description, it is the parser that's crashing, this would solve it because it would give it less to chew on.  </p>\n\n<p>It might also work to change it to</p>\n\n<pre><code>const std::vector&lt;const std::vector&lt;double&gt; &gt;\n</code></pre>\n\n<p>Because that's really what the 2-dimensional array stores.</p>\n"}], "owner": {"reputation": 6710, "user_id": 4052030, "user_type": "registered", "accept_rate": 89, "profile_image": "https://lh3.googleusercontent.com/-k4nrKct_Bc8/AAAAAAAAAAI/AAAAAAAABBk/fIYqRy8gDVA/photo.jpg?sz=128", "display_name": "Nicolas Holthaus", "link": "https://stackoverflow.com/users/4052030/nicolas-holthaus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "accepted_answer_id": 34643152, "answer_count": 2, "score": 1, "last_activity_date": 1452131743, "creation_date": 1452115378, "question_id": 34643026, "link": "https://stackoverflow.com/questions/34643026/msvc2013-cant-compile-header-file-containing-huge-lookup-table", "title": "msvc2013 can&#39;t compile header file containing huge lookup table", "body": "<p>I have a header-only library which contains a massive look-up table (more than a million doubles). The look-up table is defined:</p>\n\n<pre><code>#ifndef EGM96LUT_h__\n#define EGM96LUT_h__\n\n#include &lt;vector&gt;\n\nnamespace coord\n{\n    const std::vector&lt;std::vector&lt;double&gt;&gt; EGM96LUT = {{...},{...},...};\n}\n\n#endif\n</code></pre>\n\n<p>When I try to compile things which include this header with visual studio, it hangs for a very long time then crashes. I can build the same code in gcc in about 10 seconds.</p>\n\n<p>I know this would probably work if I compiled the LUT statically inside a .cpp file, but I <em>really</em> don't want to break the header-only-ness of the library. I also know I could store the data in some type of .dat file and read it from disk, but I'm trying to avoid that as well and keep everything compiled.</p>\n\n<p>Is there a workaround that might help the build time but without the use of a .cpp?</p>\n"}, {"tags": ["c++", "arrays", "vector"], "comments": [{"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1452115341, "post_id": 34642986, "comment_id": 57031926, "body": "Umm.. <code>weightGen.push_back (weightGen[i]);</code>?"}, {"owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "edited": false, "score": 0, "creation_date": 1452115438, "post_id": 34642986, "comment_id": 57031983, "body": "What is <code>weightGen</code> is it a std::vector?"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1452115615, "post_id": 34642986, "comment_id": 57032079, "body": "<i>@Diego Mart&#237;nez Chavira</i> So what actually went wrong with your approach? What needs to be fixed?"}, {"owner": {"reputation": 3, "user_id": 5754389, "user_type": "registered", "profile_image": "https://graph.facebook.com/10156471983390457/picture?type=large", "display_name": "Diego Mart&#237;nez Chavira", "link": "https://stackoverflow.com/users/5754389/diego-mart%c3%adnez-chavira"}, "reply_to_user": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "edited": false, "score": 0, "creation_date": 1452176373, "post_id": 34642986, "comment_id": 57060050, "body": "weightGen is a std::vector @Ben"}], "answers": [{"comments": [{"owner": {"reputation": 697, "user_id": 3002444, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/Sx6Ce.gif?s=128&g=1", "display_name": "8bra1nz", "link": "https://stackoverflow.com/users/3002444/8bra1nz"}, "edited": false, "score": 0, "creation_date": 1452116726, "post_id": 34643385, "comment_id": 57032666, "body": "If <code>weightGen</code> is greater than 29 it will overflow <code>int</code>, if you are planning to have greater values for it use <code>long long</code>"}], "tags": [], "owner": {"reputation": 697, "user_id": 3002444, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/Sx6Ce.gif?s=128&g=1", "display_name": "8bra1nz", "link": "https://stackoverflow.com/users/3002444/8bra1nz"}, "is_accepted": true, "score": 1, "last_activity_date": 1452116600, "creation_date": 1452116600, "answer_id": 34643385, "question_id": 34642986, "link": "https://stackoverflow.com/questions/34642986/how-to-insert-the-value-of-an-element-exponentially-c/34643385#34643385", "title": "How to insert the value of an element exponentially c++", "body": "<p>Here's my solution:</p>\n\n<pre><code>int size;\nfor(i=0; i&lt;numAttacks; i++)\n{\n    size = weightGen.size();\n    for (int j = 0; j &lt; size * 3; j++)\n        weightGen.push_back(weightGen[j % size]);\n}\n</code></pre>\n\n<p>This will exponentially increase the size of the array duplicating it over and over.</p>\n"}], "owner": {"reputation": 3, "user_id": 5754389, "user_type": "registered", "profile_image": "https://graph.facebook.com/10156471983390457/picture?type=large", "display_name": "Diego Mart&#237;nez Chavira", "link": "https://stackoverflow.com/users/5754389/diego-mart%c3%adnez-chavira"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "accepted_answer_id": 34643385, "answer_count": 1, "score": -1, "last_activity_date": 1452116600, "creation_date": 1452115195, "question_id": 34642986, "link": "https://stackoverflow.com/questions/34642986/how-to-insert-the-value-of-an-element-exponentially-c", "title": "How to insert the value of an element exponentially c++", "body": "<p>I am trying to insert an element into a vector from itself, the vector is growing a rate of pow(4, i) in a for loop, lets say we have vector[] = {1,2,3,4}, How can I insert the value of vector[0] in itself so after 3 iterations it would look something like this. </p>\n\n<p>Second iteration\n[1,x,x,x]</p>\n\n<p>Third iteration\n[1,x,x,x,1,x,x,x,1,x,x,x,1,x,x,x]</p>\n\n<p>and so on and so on</p>\n\n<p>I have tried </p>\n\n<pre><code>            for(i=0; i&lt;numAttacks; i++){\n                    weightGen[i] = weightGen[i];\n                    weightGen[i+numAttacks] = weightGen[i];    \n            }\n</code></pre>\n\n<p>numAttacks being the growth rate</p>\n\n<p>Thanks</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "edited": false, "score": 0, "creation_date": 1452118011, "post_id": 34642912, "comment_id": 57033353, "body": "I think there are plenty of resources explaining the problems with breaking strict-aliasing rules. Reading your earlier question, it seems to me instead of mimic&#39;ing <code>array</code>, you could just use <code>vector</code>, passing in an allocator that returns a pointer to your &quot;stack&quot; allocated memory."}, {"owner": {"reputation": 8889, "user_id": 4538344, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/746edd669e07914179feb9f6957a06e3?s=128&d=identicon&r=PG", "display_name": "StenSoft", "link": "https://stackoverflow.com/users/4538344/stensoft"}, "edited": false, "score": 0, "creation_date": 1452121949, "post_id": 34642912, "comment_id": 57035093, "body": "Aliasing rules means the type you reinterpret to can have different (stricter) alignment rules and trigger hardware exception. Try <code>reinterpret_cast</code>ing it the other way, from <code>T[]</code> to <code>char*</code>."}], "owner": {"reputation": 2153, "user_id": 4764736, "user_type": "registered", "accept_rate": 90, "profile_image": "https://graph.facebook.com/1423363884633192/picture?type=large", "display_name": "DawidPi", "link": "https://stackoverflow.com/users/4764736/dawidpi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 160, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1452114995, "creation_date": 1452114995, "last_edit_date": 1495541040, "question_id": 34642912, "link": "https://stackoverflow.com/questions/34642912/dereferencing-type-punned-pointer-will-break-strict-aliasing-rules", "title": "dereferencing type-punned pointer will break strict-aliasing rules", "body": "<p>My problem is strongly connected to the question I asked before:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/34622826/c-cast-raw-table-to-another-table-type/34623078?noredirect=1#comment56991975_34623078\">C++ cast raw table to another table type</a></p>\n\n<p>I have seen different posts of this warning on SO, but unfortunatelly they do not cover my problem.</p>\n\n<p>in short I want to declare some space on stack and then use it as array of some type T, where T can be of any type (especially non-POD type) and I cannot use C++11.</p>\n\n<p>declarations of both tables I attempted to use was:</p>\n\n<pre><code>char m_rawMemory[sizeof(T) * _size];\nT(&amp; m_tabT)[_size];\n</code></pre>\n\n<p>the proposed solution to solve my problem was to do:</p>\n\n<pre><code>union Data {\n    Data() {}\n    T values[Size];\n} data;\n</code></pre>\n\n<p>And it would be great if not the case, that I cannot use C++11 as my compiler does not support unrestricted unions (program for embedded environment) so types different than POD will simply not compile.</p>\n\n<p>So I decided to create char table and use it in following manner:</p>\n\n<pre><code>m_tabT(reinterpret_cast&lt;T(&amp;)[_size]&gt;(m_rawMemory)\n</code></pre>\n\n<p>this compiles, but gives warning given in a title. So my questions are:</p>\n\n<p>Why do I get this warning?\nHow to do this properly?</p>\n"}, {"tags": ["c++", "size-t"], "comments": [{"owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 3, "creation_date": 1452114604, "post_id": 34642724, "comment_id": 57031533, "body": "If the subtraction results in a negative number, <a href=\"https://stackoverflow.com/questions/1269019/what-should-happen-to-the-negation-of-a-size-t-i-e-sizeofstruct-foo\">it will wrap around</a> according to <a href=\"https://en.wikipedia.org/wiki/Two%27s_complement\" rel=\"nofollow noreferrer\">two&#39;s compliment</a>"}, {"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 4, "creation_date": 1452114613, "post_id": 34642724, "comment_id": 57031536, "body": "The way you have it, no it is not safe. But not because of the math itself. You are casting a <code>size_t</code> result (which is likely to be <code>unsigned long</code>) to a <code>int</code> (signed), which is likely to be a smaller datatype."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 5, "creation_date": 1452114617, "post_id": 34642724, "comment_id": 57031539, "body": "The corresponding difference type of size_t is ptrdiff_t, not int"}, {"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 3, "creation_date": 1452114702, "post_id": 34642724, "comment_id": 57031580, "body": "@DieterL&#252;cking actually, the corresponding type is still <code>size_t</code>, not that it helps the OP any."}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1452114798, "post_id": 34642724, "comment_id": 57031631, "body": "In all unsigned/signed conversions, it should be performed explicitly, with intent by the programmer, who is very sure about the range of values for the arguments so you don&#39;t end up with <a href=\"http://coliru.stacked-crooked.com/a/14afc0a42256ce1b\" rel=\"nofollow noreferrer\">overflow like this</a>"}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "reply_to_user": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 1, "creation_date": 1452116701, "post_id": 34642724, "comment_id": 57032648, "body": "@MadPhysicist - re: &quot;You are casting ...&quot;, there&#39;s no cast there. There&#39;s a <b>conversion</b>. A cast is something you write in your source code to tell the compiler to do a conversion."}, {"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "reply_to_user": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1452126919, "post_id": 34642724, "comment_id": 57036627, "body": "@PeteBecker you are absolutely right. My nomenclature was very sloppy there."}], "answers": [{"comments": [{"owner": {"reputation": 1588, "user_id": 6082851, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/b14f3cd864bc266a401eca07b4153602?s=128&d=identicon&r=PG", "display_name": "12431234123412341234123", "link": "https://stackoverflow.com/users/6082851/12431234123412341234123"}, "edited": false, "score": 0, "creation_date": 1491822830, "post_id": 34642843, "comment_id": 73707410, "body": "There are many platforms where <code>sizeof(int)==sizeof(short)</code> and <code>sizeof(int)==sizeof(size_t)</code> (all 16 bits). That is nearly on every 8 and 16 Bit microcontroller the case (AVR, PIC10-18, MSP430, ...)"}], "tags": [], "owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "is_accepted": true, "score": 17, "last_activity_date": 1452121415, "last_edit_date": 1452121415, "creation_date": 1452114765, "answer_id": 34642843, "question_id": 34642724, "link": "https://stackoverflow.com/questions/34642724/is-it-safe-to-take-the-difference-of-two-size-t-objects/34642843#34642843", "title": "Is it safe to take the difference of two size_t objects?", "body": "<p>This is not guaranteed to work portably, but is not UB either. The code must run without error, but the resulting <code>int</code> value is implementation defined. So as long as you are working on platforms that guarantee the desired behavior, this is fine (as long as the difference can be represented by an <code>int</code> of course), otherwise, just use signed types everywhere (see last paragraph).</p>\n\n<p>Subtracting two <code>std::size_t</code>s will yield a new <code>std::size_t</code><sup>\u2020</sup> and its value will be determined by wrapping. In your example, assuming 64 bit <code>size_t</code>, <code>a - b</code> will equal <code>18446744073709551526</code>. This does not fit into an (commonly used 32 bit) <code>int</code>, so an implementation defined value is assigned to <code>result</code>.</p>\n\n<p>To be honest, I would recommend to not use unsigned integers for anything but bit magic. Several members of the standard committee agree with me: <a href=\"https://channel9.msdn.com/Events/GoingNative/2013/Interactive-Panel-Ask-Us-Anything\">https://channel9.msdn.com/Events/GoingNative/2013/Interactive-Panel-Ask-Us-Anything</a> 9:50, 42:40, 1:02:50 </p>\n\n<p>Rule of thumb (paraphrasing Chandler Carruth from the above video): If you could count it yourself, use <code>int</code>, otherwise use <code>std::int64_t</code>.</p>\n\n<hr>\n\n<p><sup>\u2020</sup>Unless its conversion rank is less than <code>int</code>, e.g. if <code>std::size_t</code> is <code>unsigned short</code>. In that case, the result is an <code>int</code> and everything will work fine (unless <code>int</code> is not wider than <code>short</code>). However</p>\n\n<ol>\n<li>I do not know of any platform that does this.</li>\n<li>This would still be platform specific, see first paragraph.</li>\n</ol>\n"}, {"comments": [{"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 2, "creation_date": 1452115394, "post_id": 34642999, "comment_id": 57031954, "body": "&quot;use the signed variant <code>ssize_t</code>&quot;... how?  Would you cast before or after subtraction?  What about the lost range?"}, {"owner": {"reputation": 33597, "user_id": 2445184, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/0b51ece74c2314ba345a862c4b00d804?s=128&d=identicon&r=PG", "display_name": "cmaster - reinstate monica", "link": "https://stackoverflow.com/users/2445184/cmaster-reinstate-monica"}, "reply_to_user": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1452115570, "post_id": 34642999, "comment_id": 57032059, "body": "@BenVoigt The lost range with <code>ssize_t</code> is one bit, the lost range of <code>int</code> is frequently 32 bit, it may even be 48 bit (if <code>int</code> is 16 bit and <code>size_t</code> is 64 bit). Ergo: Using <code>ssize_t</code> is definitely much better than using <code>int</code>."}, {"owner": {"reputation": 33597, "user_id": 2445184, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/0b51ece74c2314ba345a862c4b00d804?s=128&d=identicon&r=PG", "display_name": "cmaster - reinstate monica", "link": "https://stackoverflow.com/users/2445184/cmaster-reinstate-monica"}, "reply_to_user": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 1, "creation_date": 1452115844, "post_id": 34642999, "comment_id": 57032187, "body": "@BenVoigt It does not really matter when you do the cast: If you get overflow, you are screwed anyway, with both <code>int</code> and <code>ssize_t</code>. All sanity checks must be done before the difference is calculated."}, {"owner": {"reputation": 48201, "user_id": 1250772, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/633e1f643d2c9b043231b4a32b078907?s=128&d=identicon&r=PG", "display_name": "Kaz", "link": "https://stackoverflow.com/users/1250772/kaz"}, "edited": false, "score": 1, "creation_date": 1452116964, "post_id": 34642999, "comment_id": 57032804, "body": "If <code>uintptr_t</code> cannot hold any memory size that <code>size_t</code> can hold, I will eat my shorts."}, {"owner": {"reputation": 33597, "user_id": 2445184, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/0b51ece74c2314ba345a862c4b00d804?s=128&d=identicon&r=PG", "display_name": "cmaster - reinstate monica", "link": "https://stackoverflow.com/users/2445184/cmaster-reinstate-monica"}, "reply_to_user": {"reputation": 48201, "user_id": 1250772, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/633e1f643d2c9b043231b4a32b078907?s=128&d=identicon&r=PG", "display_name": "Kaz", "link": "https://stackoverflow.com/users/1250772/kaz"}, "edited": false, "score": 1, "creation_date": 1452147440, "post_id": 34642999, "comment_id": 57042488, "body": "@Kaz Good point. I removed the word <code>only</code> and replaced it by a note about <code>uintptr_t</code>. Hope that makes you happy :-)"}, {"owner": {"reputation": 1588, "user_id": 6082851, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/b14f3cd864bc266a401eca07b4153602?s=128&d=identicon&r=PG", "display_name": "12431234123412341234123", "link": "https://stackoverflow.com/users/6082851/12431234123412341234123"}, "edited": false, "score": 0, "creation_date": 1491822971, "post_id": 34642999, "comment_id": 73707513, "body": "You do not need 2GiB or more for undefined behavior, 32KiB is enough on some platforms."}, {"owner": {"reputation": 33597, "user_id": 2445184, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/0b51ece74c2314ba345a862c4b00d804?s=128&d=identicon&r=PG", "display_name": "cmaster - reinstate monica", "link": "https://stackoverflow.com/users/2445184/cmaster-reinstate-monica"}, "reply_to_user": {"reputation": 1588, "user_id": 6082851, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/b14f3cd864bc266a401eca07b4153602?s=128&d=identicon&r=PG", "display_name": "12431234123412341234123", "link": "https://stackoverflow.com/users/6082851/12431234123412341234123"}, "edited": false, "score": 0, "creation_date": 1491825449, "post_id": 34642999, "comment_id": 73709101, "body": "@12431234123412341234123 Good point, even though I had meant those number to be only a motivating example. I have added a remark on smaller <code>int</code> sizes now, hope you like it :-)"}], "tags": [], "owner": {"reputation": 33597, "user_id": 2445184, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/0b51ece74c2314ba345a862c4b00d804?s=128&d=identicon&r=PG", "display_name": "cmaster - reinstate monica", "link": "https://stackoverflow.com/users/2445184/cmaster-reinstate-monica"}, "is_accepted": false, "score": 5, "last_activity_date": 1491825354, "last_edit_date": 1491825354, "creation_date": 1452115282, "answer_id": 34642999, "question_id": 34642724, "link": "https://stackoverflow.com/questions/34642724/is-it-safe-to-take-the-difference-of-two-size-t-objects/34642999#34642999", "title": "Is it safe to take the difference of two size_t objects?", "body": "<p>If you don't use <code>size_t</code>, you are screwed: <code>size_t</code> is the one type that exists to be used for memory sizes, and which is consequently guaranteed to always be big enough for that purpose. (<code>uintptr_t</code> is quite similar, but it's neither the first such type, nor is it used by the standard libraries, nor is it available without including <code>stdint.h</code>.) If you use an <code>int</code>, you can get undefined behavior when your allocations exceed 2GiB of address space (or 32kiB if you are on a platform where <code>int</code> is only 16 bits!), even though the machine has more memory and you are executing in 64 bit mode.</p>\n\n<p>If you need a difference of <code>size_t</code> that may become negative, use the signed variant <code>ssize_t</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 1, "creation_date": 1452116540, "post_id": 34643252, "comment_id": 57032558, "body": "Perhaps you mean &quot;implementation-dependent&quot; rather than &quot;implementation-defined&quot;?  The latter term has a formal meaning assigned by the C++ standard."}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 1, "creation_date": 1452116618, "post_id": 34643252, "comment_id": 57032598, "body": "Also, your last paragraph forgot to consider the integral promotions which are performed before subtraction takes place."}, {"owner": {"reputation": 48201, "user_id": 1250772, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/633e1f643d2c9b043231b4a32b078907?s=128&d=identicon&r=PG", "display_name": "Kaz", "link": "https://stackoverflow.com/users/1250772/kaz"}, "reply_to_user": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 1, "creation_date": 1452116883, "post_id": 34643252, "comment_id": 57032762, "body": "@BenVoigt Right; but that&#39;s going to be rare. How common is it for <code>size_t</code> to correspond to <code>unsigned short</code> or <code>unsigned char</code>?  Still, valid point. As far as &quot;implementation-defined result&quot; goes, that usage is ingrained into me from ISO C.  Everything in this answer applies to C and C++."}], "tags": [], "owner": {"reputation": 48201, "user_id": 1250772, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/633e1f643d2c9b043231b4a32b078907?s=128&d=identicon&r=PG", "display_name": "Kaz", "link": "https://stackoverflow.com/users/1250772/kaz"}, "is_accepted": false, "score": 4, "last_activity_date": 1452116187, "creation_date": 1452116187, "answer_id": 34643252, "question_id": 34642724, "link": "https://stackoverflow.com/questions/34642724/is-it-safe-to-take-the-difference-of-two-size-t-objects/34643252#34643252", "title": "Is it safe to take the difference of two size_t objects?", "body": "<p>The <code>size_t</code> type is unsigned. The subtraction of any two <code>size_t</code> values is defined-behavior</p>\n\n<p>However, firstly, the result is implementation-defined if a larger value is subtracted from a smaller one. The result is the mathematical value, reduced to the smallest positive residue modulo <code>SIZE_T_MAX + 1</code>. For instance if the largest value of <code>size_t</code> is 65535, and the result of subtracting two <code>size_t</code> values is -3, then the result will be 65536 - 3 = 65533.   On a different compiler or machine with a different <code>size_t</code>, the numeric value will be different.</p>\n\n<p>Secondly, a <code>size_t</code> value might be out of range of the type <code>int</code>. If that is the case, we get a second implementation-defined result arising from the forced conversion.  In this situation, any behavior can apply; it just has to be documented by the implementation, and the conversion must not fail. For instance, the result could be clamped into the <code>int</code> range, producing <code>INT_MAX</code>.  A common behavior seen  on two's complement machines (virtually all) in the conversion of wider (or equal width) unsigned types to narrower signed types is simple bit truncation: enough bits are taken from the unsigned value to fill the signed value, including its sign bit.</p>\n\n<p>Because of the way two's complement works, if the original arithmetically correct abstract result itself fits into <code>int</code>, then the conversion will produce that result.</p>\n\n<p>For instance, suppose that the subtraction of a pair of 64 bit <code>size_t</code> values on a two's complement machine yields the abstract arithmetic value -3, which is becomes the positive value <code>0xFFFFFFFFFFFFFFFD</code>.   When this is coerced into a 32 bit <code>int</code>, then the common behavior seen in many compilers for two's complement machines is that the lower 32 bits are taken as the image of the resulting <code>int</code>: <code>0xFFFFFFFD</code>. And, of course, that is just the value -3 in 32 bits.</p>\n\n<p>So the upshot is, that <strong>your code is <em>de facto</em> quite portable</strong> because virtually all mainstream machines are two's complement with conversion rules based on sign extension and bit truncation, including between signed and unsigned.</p>\n\n<p>Except that sign extension doesn't occur when a value is widened while converting from unsigned to signed. Thus he one problem is the rare situation in which <code>int</code> is wider than <code>size_t</code>. If a 16 bit <code>size_t</code> result is 65533, due to 4 being subtracted from 1, this will not produce a -3 when converted to a 32 bit <code>int</code>; it will produce 65533!</p>\n"}], "owner": {"reputation": 1113, "user_id": 4183920, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/373d5add81b78be87653a7987bf06fde?s=128&d=identicon&r=PG&f=1", "display_name": "PerryC", "link": "https://stackoverflow.com/users/4183920/perryc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5875, "favorite_count": 6, "accepted_answer_id": 34642843, "answer_count": 3, "score": 21, "last_activity_date": 1491825354, "creation_date": 1452114269, "last_edit_date": 1495540931, "question_id": 34642724, "link": "https://stackoverflow.com/questions/34642724/is-it-safe-to-take-the-difference-of-two-size-t-objects", "title": "Is it safe to take the difference of two size_t objects?", "body": "<p>I'm investigating a standard for my team around using <code>size_t</code> vs <code>int</code> (or <code>long</code>, etc). The biggest drawback I've seen pointed out is that taking the difference of two size_t objects can cause problems (I'm unsure of specific problems -- maybe something wasn't 2s complemented and the signed/unsigned angers the compiler). I wrote a quick program in C++ using the V120 VS2013 compiler that allowed me to do the following:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nmain()\n{\n    size_t a = 10;\n    size_t b = 100;\n    int result = a - b;\n}\n</code></pre>\n\n<p>The program resulted in <code>-90</code>, which although correct, makes me nervous about type mismatches, signed/unsigned problems, or just plain undefined behavior if the size_t happens to get used in complex math.</p>\n\n<p><strong>My question is if it's safe to do math with size_t objects, specifically, taking the difference?</strong> I'm considering using size_t as a standard for things like indexes. I've seen some interesting posts on the topic here, but they don't address the math issue (or I missed it).</p>\n\n<p><a href=\"https://stackoverflow.com/q/14202241/4183920\">What type for subtracting 2 size_t's?</a></p>\n\n<p><a href=\"https://stackoverflow.com/q/19352403/4183920\">typedef for a signed type that can contain a size_t?</a></p>\n"}, {"tags": ["c++", "inheritance", "diamond-problem"], "answers": [{"tags": [], "owner": {"reputation": 445, "user_id": 5747545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a340b35f7f87c161d3e77e581d2f23a4?s=128&d=identicon&r=PG&f=1", "display_name": "88877", "link": "https://stackoverflow.com/users/5747545/88877"}, "is_accepted": true, "score": 0, "last_activity_date": 1452115754, "last_edit_date": 1452115754, "creation_date": 1452114964, "answer_id": 34642902, "question_id": 34642721, "link": "https://stackoverflow.com/questions/34642721/diamond-issue-when-trying-to-resolve-it-using-virtual-inheritance/34642902#34642902", "title": "Diamond issue when trying to resolve it using virtual inheritance", "body": "<p>Think as a compiler: what method should you call ?</p>\n\n<p>You have a triangle that is both a Square and a Rectangle and you are asking is area. Should your triangle choose to use <code>Rectangle.getArea()</code> or <code>Square.getArea()</code> ?</p>\n\n<p>The compiler cannot know. A solution here is to overide the getArea() method, for instance:</p>\n\n<pre><code>class Triangle: public Rectangle, Square\n{\n   public:\n      void blabla(){}\n      void getArea()\n      { \n         Square::getArea; //I'm a square\n         Rectange::getArea; //I'm a rectangle\n      }\n};\n</code></pre>\n\n<p>This problem would be trigger even is there was no class Base. An exemple on use of diamond inheritance would look like this:</p>\n\n<pre><code>class Base\n{\n   protected:\n      int x;\n};\n\n\nclass Derived1: virtual public Base\n{\n   //some stuff\n};\n\n\nclass Derived2: virtual public Base\n{\n   //some stuff\n};\n\n\nclass Join: public Derived1, public Derived2\n{\n   int getX(){\n     return x;\n   }\n};\n</code></pre>\n\n<p>In here, using virtual inheritance allows us to only have one instance of the Base class in the Join instance, instead of 2 without and an error on which x should be selected.</p>\n"}, {"tags": [], "owner": {"reputation": 2352, "user_id": 5711725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0cfaab398800db4fd0e9b0aae6621bda?s=128&d=identicon&r=PG&f=1", "display_name": "Javier Mart&#237;n", "link": "https://stackoverflow.com/users/5711725/javier-mart%c3%adn"}, "is_accepted": false, "score": 0, "last_activity_date": 1452115042, "creation_date": 1452115042, "answer_id": 34642932, "question_id": 34642721, "link": "https://stackoverflow.com/questions/34642721/diamond-issue-when-trying-to-resolve-it-using-virtual-inheritance/34642932#34642932", "title": "Diamond issue when trying to resolve it using virtual inheritance", "body": "<p>Your problem is that you have two different classes at the same level of inheritance providing different overrides of a virtual method. The compiler cannot know which one should take precedence, so you need to provide your own override and do whatever you want (call either of the functions, both, or roll your own implementation).</p>\n"}], "owner": {"reputation": 13, "user_id": 2927738, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0431744212bf2f40133235abd093ef6?s=128&d=identicon&r=PG&f=1", "display_name": "Nizarkh", "link": "https://stackoverflow.com/users/2927738/nizarkh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 106, "favorite_count": 0, "accepted_answer_id": 34642902, "answer_count": 2, "score": 0, "last_activity_date": 1452115754, "creation_date": 1452114259, "question_id": 34642721, "link": "https://stackoverflow.com/questions/34642721/diamond-issue-when-trying-to-resolve-it-using-virtual-inheritance", "title": "Diamond issue when trying to resolve it using virtual inheritance", "body": "<p>I am new in C++ and I am suck when resolving the diamond problem:\nhere the code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nusing namespace std;\n\n// Base class\nclass Base \n{\n   public:\n      virtual void getArea()\n      { \n         cout &lt;&lt; \"Called by Base\\n\"; \n      }\n};\n\n// Derived class\nclass Rectangle: public virtual Base\n{\n   public:\n      void getArea()\n      { \n         cout &lt;&lt; \"Called by Rectangle\\n\";\n      }\n};\n\n// Derived class\nclass Square: public virtual Base\n{\n   public:\n      void getArea()\n      { \n         cout &lt;&lt; \"Called by Square\\n\";\n      }\n};\n\n// Derived class\nclass Triangle: public Rectangle, Square\n{\n   public:\n      void blabla(){}\n};\n\nint main(void)\n{\n    Triangle Tri;\n    Tri.getArea();\n\n    return 0;\n}\n</code></pre>\n\n<p>I got the g++ errors:</p>\n\n<pre><code>main.cpp:36:7: error: no unique final overrider for \u2018virtual void Base::getArea()\u2019 in \u2018Triangle\u2019\n class Triangle: public Rectangle, Square\n       ^\nmain.cpp: In function \u2018int main()\u2019:\nmain.cpp:45:6: error: request for member \u2018getArea\u2019 is ambiguous\n  Tri.getArea();\n      ^\nmain.cpp:29:12: note: candidates are: virtual void Square::getArea()\n       void getArea()\n            ^\nmain.cpp:19:12: note:                 virtual void Rectangle::getArea()\n       void getArea()\n</code></pre>\n\n<p>I found on Internet that virtual inheritance resolves the problem So what is my mistake(s). </p>\n\n<p>thanks in advance</p>\n"}, {"tags": ["c++", "sdl-2", "sdl-image"], "comments": [{"owner": {"reputation": 3163, "user_id": 3250340, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/vZRom.jpg?s=128&g=1", "display_name": "Antoine C.", "link": "https://stackoverflow.com/users/3250340/antoine-c"}, "edited": false, "score": 0, "creation_date": 1452121369, "post_id": 34642644, "comment_id": 57034855, "body": "Do other members of the img-&gt;format structure contain odd values? Did you tried to run your code through a debugger and put a watch on img-&gt;format-&gt;BytesPerPixel?"}, {"owner": {"reputation": 135, "user_id": 3244117, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/72da836a14bf6f2bc325259391880ff5?s=128&d=identicon&r=PG&f=1", "display_name": "Octothorp", "link": "https://stackoverflow.com/users/3244117/octothorp"}, "reply_to_user": {"reputation": 3163, "user_id": 3250340, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/vZRom.jpg?s=128&g=1", "display_name": "Antoine C.", "link": "https://stackoverflow.com/users/3250340/antoine-c"}, "edited": false, "score": 0, "creation_date": 1452178698, "post_id": 34642644, "comment_id": 57061782, "body": "@LoveMetal Yep, BitsPerPixel also seems random and I tried to gdb my program and when trying to print *img-&gt;format-&gt;palette it says that I have no access to memory at address 0x1300... This is output from gdb print *img-&gt;format: <code>{palette = 0x13000801, BitsPerPixel = 192 &#39;\\300&#39;,    BytesPerPixel = 17 &#39;\\021&#39;, Rloss = 157 &#39;\\235&#39;, Gloss = 0 &#39;\\000&#39;,    Bloss = 0 &#39;\\000&#39;, Aloss = 0 &#39;\\000&#39;, Rshift = 0 &#39;\\000&#39;, Gshift = 0 &#39;\\000&#39;,    Bshift = 8 &#39;\\b&#39;, Ashift = 1 &#39;\\001&#39;, Rmask = 0, Gmask = 0, Bmask = 0,    Amask = 0, colorkey = 134744072, alpha = 0 &#39;\\000&#39;} </code>"}], "answers": [{"tags": [], "owner": {"reputation": 135, "user_id": 3244117, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/72da836a14bf6f2bc325259391880ff5?s=128&d=identicon&r=PG&f=1", "display_name": "Octothorp", "link": "https://stackoverflow.com/users/3244117/octothorp"}, "is_accepted": true, "score": 0, "last_activity_date": 1452182097, "creation_date": 1452182097, "answer_id": 34659529, "question_id": 34642644, "link": "https://stackoverflow.com/questions/34642644/weird-sdl-surface-format-bytesperpixel-value/34659529#34659529", "title": "Weird SDL_Surface-&gt;format-&gt;BytesPerPixel value", "body": "<p>OK, I was just being stupid... But if anyone ever has a problem like me: I was including wrong version of SDL_image... <code>#include &lt;SDL/SDL_image.h&gt;</code> instead of <code>#include &lt;SDL2/SDL_image.h&gt;</code>. Everything now works as expected :)</p>\n"}], "owner": {"reputation": 135, "user_id": 3244117, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/72da836a14bf6f2bc325259391880ff5?s=128&d=identicon&r=PG&f=1", "display_name": "Octothorp", "link": "https://stackoverflow.com/users/3244117/octothorp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 320, "favorite_count": 0, "accepted_answer_id": 34659529, "answer_count": 1, "score": 0, "last_activity_date": 1452182097, "creation_date": 1452113928, "last_edit_date": 1452120487, "question_id": 34642644, "link": "https://stackoverflow.com/questions/34642644/weird-sdl-surface-format-bytesperpixel-value", "title": "Weird SDL_Surface-&gt;format-&gt;BytesPerPixel value", "body": "<p>So I'm using SDL_image to load heightmap and create terrain in my OpenGL app.</p>\n\n<p>That's how I initialize SDL_image:</p>\n\n<pre><code>int flags = IMG_INIT_PNG;\nint initted = IMG_Init(flags);\nif((initted &amp; flags) != flags) {\n    printf(\"IMG_Init: Failed to init required jpg and png support!\\n\");\n    printf(\"IMG_Init: %s\\n\", IMG_GetError());\n    return;\n}\n\nLoad(filename);\n</code></pre>\n\n<p>...And this is my Load function:</p>\n\n<pre><code>void Load(string filename) {\n    img = IMG_Load(filename.c_str());\n    if(!img) {\n        printf(\"IMG_Load: %s\\n\", IMG_GetError());\n        return;\n    }\n    printf(\"IMG_Load: %s\\n\", IMG_GetError());\n    xsize = img-&gt;w;\n    ysize = img-&gt;h;\n\n    SDL_LockSurface(img);\n    imgData = (Uint32*)img-&gt;pixels;\n    SDL_UnlockSurface(img);\n}\n</code></pre>\n\n<p>Then, in my Terrain class where I'm preparing my vertex buffer I'm reading pixel values with this method:</p>\n\n<pre><code>Uint32 getPixel(int x, int y) {\n    SDL_LockSurface(img);\n\n    int bpp = img-&gt;format-&gt;BytesPerPixel;\n    //cout &lt;&lt; \"bpp \" &lt;&lt; bpp &lt;&lt; \"\\n\";\n    /* Here p is the address to the pixel we want to retrieve */\n    Uint8 *p = (Uint8 *)img-&gt;pixels + y * img-&gt;pitch + x * bpp;\n\n    SDL_UnlockSurface(img);\n\n    switch(bpp) {\n    case 1:\n        return *p;\n        break;\n\n    case 2:\n        return *(Uint16 *)p;\n        break;\n\n    case 3:\n        if(SDL_BYTEORDER == SDL_BIG_ENDIAN)\n            return p[0] &lt;&lt; 16 | p[1] &lt;&lt; 8 | p[2];\n        else\n            return p[0] | p[1] &lt;&lt; 8 | p[2] &lt;&lt; 16;\n        break;\n\n    case 4:\n        return *(Uint32 *)p;\n        break;\n\n    default:\n        return 0;       /* shouldn't happen, but avoids warnings */\n    }\n}\n</code></pre>\n\n<p>...and it turns out that every time I run the program <code>img-&gt;format-&gt;BytesPerPixel</code> returns a random value... What the heck? Does anyone have any idea? This should only return 1, 2, 3 or 4.</p>\n"}, {"tags": ["c++", "recursion"], "comments": [{"owner": {"reputation": 868, "user_id": 3367929, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/5f06ec213df31bb3a61141cdc1f2222e?s=128&d=identicon&r=PG&f=1", "display_name": "Rames", "link": "https://stackoverflow.com/users/3367929/rames"}, "edited": false, "score": 1, "creation_date": 1452113284, "post_id": 34642421, "comment_id": 57030842, "body": "That&#39;s not correct C++ syntax. However in C++ <code>void</code> function doesn&#39;t need <code>return</code> statement. This recursion seems to terminate on leaves."}, {"owner": {"reputation": 21714, "user_id": 1392132, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QF6FZ.jpg?s=128&g=1", "display_name": "5gon12eder", "link": "https://stackoverflow.com/users/1392132/5gon12eder"}, "edited": false, "score": 0, "creation_date": 1452113336, "post_id": 34642421, "comment_id": 57030869, "body": "This is not a complete function so it&#39;s hard to reason about it but as far as I can see, it only recurses for non-leaf nodes. Unless you have cycles in your graph, it will eventually stop."}, {"owner": {"reputation": 1483, "user_id": 4681361, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d57037eeb328d680c80cfa28acb97b3b?s=128&d=identicon&r=PG&f=1", "display_name": "daydayup", "link": "https://stackoverflow.com/users/4681361/daydayup"}, "reply_to_user": {"reputation": 21714, "user_id": 1392132, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QF6FZ.jpg?s=128&g=1", "display_name": "5gon12eder", "link": "https://stackoverflow.com/users/1392132/5gon12eder"}, "edited": false, "score": 0, "creation_date": 1452113385, "post_id": 34642421, "comment_id": 57030902, "body": "this is a tree @5gon12eder"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 1, "creation_date": 1452113553, "post_id": 34642421, "comment_id": 57030987, "body": "Please take the hard way and step through the code with a debugger."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1452113655, "post_id": 34642421, "comment_id": 57031036, "body": "<i>&quot;There is no &quot;return&quot; ...&quot;</i> you don&#39;t need to <i>return</i> explicitly, but you need to specify a <i>return type</i>, at least <code>void</code>."}, {"owner": {"reputation": 1483, "user_id": 4681361, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d57037eeb328d680c80cfa28acb97b3b?s=128&d=identicon&r=PG&f=1", "display_name": "daydayup", "link": "https://stackoverflow.com/users/4681361/daydayup"}, "edited": false, "score": 0, "creation_date": 1452113767, "post_id": 34642421, "comment_id": 57031106, "body": "thank u i just added one."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1452114440, "post_id": 34642421, "comment_id": 57031447, "body": "@daydayup Post more realistic <i>code</i>, at best your <b>*real</b> one."}, {"owner": {"reputation": 8178, "user_id": 2920343, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/dbfe32738597d61775971cab5efebb67?s=128&d=identicon&r=PG&f=1", "display_name": "CompuChip", "link": "https://stackoverflow.com/users/2920343/compuchip"}, "edited": false, "score": 0, "creation_date": 1452119045, "post_id": 34642421, "comment_id": 57033851, "body": "My preferred way of writing this code would have been <code>if(node.isLeaf() &amp;&amp; node.value &gt; 10) { result.push(node); } for(unsigned i=0; i&lt;node.numChild; ++i) { query(node.children[i]); }</code> with slightly less <code>if</code>s and no <code>else</code>."}, {"owner": {"reputation": 1483, "user_id": 4681361, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d57037eeb328d680c80cfa28acb97b3b?s=128&d=identicon&r=PG&f=1", "display_name": "daydayup", "link": "https://stackoverflow.com/users/4681361/daydayup"}, "reply_to_user": {"reputation": 8178, "user_id": 2920343, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/dbfe32738597d61775971cab5efebb67?s=128&d=identicon&r=PG&f=1", "display_name": "CompuChip", "link": "https://stackoverflow.com/users/2920343/compuchip"}, "edited": false, "score": 0, "creation_date": 1452119548, "post_id": 34642421, "comment_id": 57034092, "body": "@CompuChip why no else here? my understanding is that without else, even when node.isLeaf()==true, it will still attempt to go through the for() loop, which is unnecessary?"}], "answers": [{"comments": [{"owner": {"reputation": 1483, "user_id": 4681361, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d57037eeb328d680c80cfa28acb97b3b?s=128&d=identicon&r=PG&f=1", "display_name": "daydayup", "link": "https://stackoverflow.com/users/4681361/daydayup"}, "edited": false, "score": 0, "creation_date": 1452113505, "post_id": 34642495, "comment_id": 57030964, "body": "sorry i forgot to give more info on &quot;do something&quot;. &quot;do something&quot; doesn&#39;t involve query(), i just gave an example to it"}], "tags": [], "owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "is_accepted": false, "score": 0, "last_activity_date": 1452114134, "last_edit_date": 1452114134, "creation_date": 1452113388, "answer_id": 34642495, "question_id": 34642421, "link": "https://stackoverflow.com/questions/34642421/when-will-this-recursion-terminate/34642495#34642495", "title": "when will this recursion terminate", "body": "<p>One would suspect, it terminates on this path</p>\n\n<pre><code>if(node.isLeaf()) {do something;}\n</code></pre>\n\n<p>since <em>leafs</em> in a tree are considered not to have any further child nodes.</p>\n\n<p>But that totally depends on what <code>do something;</code> involves. If there's an indirect recursion to <code>query()</code> it may never stop recursion anyways.</p>\n\n<p>As for your comments, explicit <code>return</code> statements aren't needed with <code>void</code> function return types.</p>\n"}], "owner": {"reputation": 1483, "user_id": 4681361, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d57037eeb328d680c80cfa28acb97b3b?s=128&d=identicon&r=PG&f=1", "display_name": "daydayup", "link": "https://stackoverflow.com/users/4681361/daydayup"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 66, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1452114359, "creation_date": 1452113149, "last_edit_date": 1452114359, "question_id": 34642421, "link": "https://stackoverflow.com/questions/34642421/when-will-this-recursion-terminate", "title": "when will this recursion terminate", "body": "<p>I am not familiar with recursion. the following piece of code is a simplification of a long piece of code, which really works. There is no <code>\"return\"</code> anywhere in it. Could anybody tell me the logic here regarding when it will terminate?  </p>\n\n<pre><code>void query(const Node&amp; node) {\n    if(node.isLeaf()) {if(node.value &gt; 10) result.push(node);}\n    else {\n        for(unsigned i=0; i&lt;node.numChild; ++i) {\n            query(node.children[i]);\n        }\n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "assembly", "colors", "cmd", "gdi"], "comments": [{"owner": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1452113140, "post_id": 34642342, "comment_id": 57030783, "body": "Are you nuts? The amount of documentation on <code>SetBkColor</code> and <code>SetTextColor</code> is insane. And they have <i>nothing</i> to do with the console."}, {"owner": {"reputation": 104, "user_id": 5748437, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/t5wSP.png?s=128&g=1", "display_name": "HardCoded", "link": "https://stackoverflow.com/users/5748437/hardcoded"}, "reply_to_user": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1452113385, "post_id": 34642342, "comment_id": 57030903, "body": "the console actually does use <code>SetBkColor</code> and <code>SetTextColor</code> without them you can&#39;t color the console."}, {"owner": {"reputation": 41564, "user_id": 3857942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hXLnN.jpg?s=128&g=1", "display_name": "Michael Petch", "link": "https://stackoverflow.com/users/3857942/michael-petch"}, "edited": false, "score": 1, "creation_date": 1452113732, "post_id": 34642342, "comment_id": 57031083, "body": "@CodeAway Odd, I thought for console output you used things like <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms682073(v=vs.85).aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/windows/desktop/&hellip;</a>"}, {"owner": {"reputation": 104, "user_id": 5748437, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/t5wSP.png?s=128&g=1", "display_name": "HardCoded", "link": "https://stackoverflow.com/users/5748437/hardcoded"}, "reply_to_user": {"reputation": 41564, "user_id": 3857942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hXLnN.jpg?s=128&g=1", "display_name": "Michael Petch", "link": "https://stackoverflow.com/users/3857942/michael-petch"}, "edited": false, "score": 0, "creation_date": 1452113981, "post_id": 34642342, "comment_id": 57031214, "body": "@MichaelPetch Yes but if i change with <code>cheat-engine</code> the <code>conhost.exe &#47; cmd.exe</code> address <code>7FF8FF16393F</code> to <code>1</code> you cant set the background. not even <code>ansi-escape</code> codes work. <code>7FF8FF16393F</code> is inside the <code>GDI32.DLL.SetBkColor</code> function."}, {"owner": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1452119221, "post_id": 34642342, "comment_id": 57033942, "body": "Yes, the console uses <code>SetBkColor</code> and <code>SetTextColor</code> - so does every other Windows program that displays text. My point is that it&#39;s irrelevant to your question of how to change the Cmd color palette, since those functions are capable of using 16 million colors. You need to change the code that <i>calls</i> them, which is inside <code>cmd.exe</code> itself. Good luck with that. Microsoft provides a <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms682073(v=vs.85).aspx\" rel=\"nofollow noreferrer\">console API</a> that gives a lot more control, maybe your program can use that."}, {"owner": {"reputation": 35113, "user_id": 3826372, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/P0peM.png?s=128&g=1", "display_name": "Ross Ridge", "link": "https://stackoverflow.com/users/3826372/ross-ridge"}, "edited": false, "score": 1, "creation_date": 1452125212, "post_id": 34642342, "comment_id": 57036195, "body": "The program <code>cmd.exe</code> doesn&#39;t use any GDI functions at all. It doesn&#39;t draw anything directly, it uses the console functions that MachaelPetch linked. It&#39;s <code>conhost</code> (or <code>csrss</code> on older versions of Windows) that does the drawing. If you want to draw text in arbitrary colours you can create your own window and use GDI to draw the text however you want."}], "answers": [{"comments": [{"owner": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1452119371, "post_id": 34642815, "comment_id": 57034021, "body": "That only lets you pick from 16 colors for both background and text, and they aren&#39;t the prettiest 16 colors either. It&#39;s all meant to be backwards compatible with the earliest PC color displays, which were very primitive."}, {"owner": {"reputation": 10487, "user_id": 5708620, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b0f8c70394b748ed7ec1a3a11a749b1?s=128&d=identicon&r=PG&f=1", "display_name": "Danny_ds", "link": "https://stackoverflow.com/users/5708620/danny-ds"}, "reply_to_user": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1452120192, "post_id": 34642815, "comment_id": 57034384, "body": "@MarkRansom - That&#39;s right, twice. But I remember playing around (long time ago) with graphics modes, colors and pixels, but probably this is no longer supported."}], "tags": [], "owner": {"reputation": 10487, "user_id": 5708620, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b0f8c70394b748ed7ec1a3a11a749b1?s=128&d=identicon&r=PG&f=1", "display_name": "Danny_ds", "link": "https://stackoverflow.com/users/5708620/danny-ds"}, "is_accepted": false, "score": 0, "last_activity_date": 1452114686, "creation_date": 1452114686, "answer_id": 34642815, "question_id": 34642342, "link": "https://stackoverflow.com/questions/34642342/cmd-uses-gdi32-dll-to-render-colors-how-do-i-change-the-color-pallet/34642815#34642815", "title": "CMD Uses GDI32.DLL to render colors. how do i change the color pallet?", "body": "<p>To change the colors in the console you can use:</p>\n\n<pre><code>system(\"color 6B\");  // 0x00 to 0xFF\n</code></pre>\n\n<p>To change the number of colors, palette or resolution, you probably need to look at something that used to be called 'set graphics mode', don't know if this is still supported now though..</p>\n"}, {"tags": [], "owner": {"reputation": 170, "user_id": 1715823, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fd64d4b049ab189b24124dac41b95186?s=128&d=identicon&r=PG", "display_name": "Carlos Cortez", "link": "https://stackoverflow.com/users/1715823/carlos-cortez"}, "is_accepted": false, "score": 0, "last_activity_date": 1452265009, "creation_date": 1452265009, "answer_id": 34679926, "question_id": 34642342, "link": "https://stackoverflow.com/questions/34642342/cmd-uses-gdi32-dll-to-render-colors-how-do-i-change-the-color-pallet/34679926#34679926", "title": "CMD Uses GDI32.DLL to render colors. how do i change the color pallet?", "body": "<p>The correct way to change console text attributes is <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms686047%28v=vs.85%29.aspx\" rel=\"nofollow\">SetConsoleTextAttribute</a>; you should be able to change foreground/background color. </p>\n\n<p>Also, it is not located in GDI32, as far as i know console functions are all located in kernel32.dll (if not all at least most of them). This should clarify about <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/dd145203%28v=vs.85%29.aspx\" rel=\"nofollow\">GDI32</a>'s uses.</p>\n"}], "owner": {"reputation": 104, "user_id": 5748437, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/t5wSP.png?s=128&g=1", "display_name": "HardCoded", "link": "https://stackoverflow.com/users/5748437/hardcoded"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 228, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1452265009, "creation_date": 1452112822, "last_edit_date": 1592644375, "question_id": 34642342, "link": "https://stackoverflow.com/questions/34642342/cmd-uses-gdi32-dll-to-render-colors-how-do-i-change-the-color-pallet", "title": "CMD Uses GDI32.DLL to render colors. how do i change the color pallet?", "body": "<p>I have found in <code>GDI32.DLL</code> that there is some methods that change the <code>colors</code> in the console.</p>\n<p>Methods</p>\n<blockquote>\n<p>GDI32.SetBkColor</p>\n<p>GDI32.SetTextColor</p>\n</blockquote>\n<p>And there is much more methods to add <code>color-pallets</code>.</p>\n<p>Is there a way to change the <code>color-pallet</code> to use multiple colors and make a <code>256-RGB</code> <code>console</code>.</p>\n<p>I know that there is <code>console's</code> that already have a <code>256 Color VGA</code> <code>color-pallet</code> but i really want to change the way system works.</p>\n<p>The <code>dll-file</code> <code>GDI32.DLL</code> is prety old and is a system core file that don't have much information on the internet about how <code>cmd</code> do use it.</p>\n<p>Thanks :)</p>\n"}, {"tags": ["java", "c++", "c", "memory", "swig"], "owner": {"reputation": 11, "user_id": 5754218, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0471e52c6acd0099de7b555471811568?s=128&d=identicon&r=PG&f=1", "display_name": "Ray", "link": "https://stackoverflow.com/users/5754218/ray"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 50, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1452113718, "creation_date": 1452111879, "last_edit_date": 1452113718, "question_id": 34642083, "link": "https://stackoverflow.com/questions/34642083/want-to-change-the-default-wrapping-behavior-of-char-in-swig-java", "title": "Want to change the default wrapping behavior of char* in swig java", "body": "<p>So there's this line in the swig documentation</p>\n\n<blockquote>\n  <p>When <code>char *</code> members of a structure are wrapped, the contents are assumed to be dynamically allocated using malloc or new (depending on whether or not SWIG is run with the -c++ option). When the structure member is set, the old contents will be released and a new value created.</p>\n</blockquote>\n\n<p>I don't want the old contents to be released from memory because I'm using some sort of <code>char*</code> buffer, and I also need the default setter. I can use the <code>%ignore &lt;field&gt;</code> to overwrite the getter but then I'll lose the default setter.\nCan someone please help? Thanks.</p>\n"}, {"tags": ["c++", "lua", "luabridge"], "answers": [{"comments": [{"owner": {"reputation": 89, "user_id": 5754196, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/8083d965e0be68c8dbce808af7046e05?s=128&d=identicon&r=PG&f=1", "display_name": "OT2O", "link": "https://stackoverflow.com/users/5754196/ot2o"}, "edited": false, "score": 0, "creation_date": 1452113967, "post_id": 34642511, "comment_id": 57031206, "body": "You are right about that, but that is not the deeper issue I guess. I will update my question to reflect with your change."}, {"owner": {"reputation": 4667, "user_id": 5695504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da7c8870ba24f6cb1b54dfae0521cb13?s=128&d=identicon&r=PG", "display_name": "Ilya", "link": "https://stackoverflow.com/users/5695504/ilya"}, "reply_to_user": {"reputation": 89, "user_id": 5754196, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/8083d965e0be68c8dbce808af7046e05?s=128&d=identicon&r=PG&f=1", "display_name": "OT2O", "link": "https://stackoverflow.com/users/5754196/ot2o"}, "edited": false, "score": 0, "creation_date": 1452114292, "post_id": 34642511, "comment_id": 57031380, "body": "Is <code>myTable[0]</code> OK ? Shouldn&#39;t it be [1] ?"}, {"owner": {"reputation": 89, "user_id": 5754196, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/8083d965e0be68c8dbce808af7046e05?s=128&d=identicon&r=PG&f=1", "display_name": "OT2O", "link": "https://stackoverflow.com/users/5754196/ot2o"}, "edited": false, "score": 0, "creation_date": 1452114677, "post_id": 34642511, "comment_id": 57031570, "body": "You are right, my problem was else where. I will mark this as the answer for future viewers. Thanks!"}, {"owner": {"reputation": 4667, "user_id": 5695504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da7c8870ba24f6cb1b54dfae0521cb13?s=128&d=identicon&r=PG", "display_name": "Ilya", "link": "https://stackoverflow.com/users/5695504/ilya"}, "reply_to_user": {"reputation": 89, "user_id": 5754196, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/8083d965e0be68c8dbce808af7046e05?s=128&d=identicon&r=PG&f=1", "display_name": "OT2O", "link": "https://stackoverflow.com/users/5754196/ot2o"}, "edited": false, "score": 0, "creation_date": 1452114804, "post_id": 34642511, "comment_id": 57031636, "body": "You&#39;re welcome. NB for future viewers, you have to restore the original question, otherwise the answer doesn&#39;t match."}, {"owner": {"reputation": 89, "user_id": 5754196, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/8083d965e0be68c8dbce808af7046e05?s=128&d=identicon&r=PG&f=1", "display_name": "OT2O", "link": "https://stackoverflow.com/users/5754196/ot2o"}, "edited": false, "score": 0, "creation_date": 1452114962, "post_id": 34642511, "comment_id": 57031713, "body": "Another quick question. If the table were to look like this test = {} test[1] = 1 test[2] = 2 globalVolumeContainer[1] = test  How could I access a value?  I thought globalVolumeContainer[1][1]; would work?"}, {"owner": {"reputation": 3612, "user_id": 2422013, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/VwKps.jpg?s=128&g=1", "display_name": "AStopher", "link": "https://stackoverflow.com/users/2422013/astopher"}, "edited": false, "score": 0, "creation_date": 1452115115, "post_id": 34642511, "comment_id": 57031802, "body": "@llya Question needs to be reverted back then.. you can do that yourself via a Suggested Edit."}, {"owner": {"reputation": 6941, "user_id": 2246344, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Z3kxp.jpg?s=128&g=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/2246344/sam"}, "edited": false, "score": 0, "creation_date": 1452115445, "post_id": 34642511, "comment_id": 57031988, "body": "I have rejected your edit as it now detracts from the post (I rolled it back before you made the suggestion)."}], "tags": [], "owner": {"reputation": 4667, "user_id": 5695504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da7c8870ba24f6cb1b54dfae0521cb13?s=128&d=identicon&r=PG", "display_name": "Ilya", "link": "https://stackoverflow.com/users/5695504/ilya"}, "is_accepted": true, "score": 2, "last_activity_date": 1452114373, "last_edit_date": 1452114373, "creation_date": 1452113448, "answer_id": 34642511, "question_id": 34642074, "link": "https://stackoverflow.com/questions/34642074/accessing-tables-in-lua-from-c/34642511#34642511", "title": "Accessing Tables In Lua From C++", "body": "<p>You have to explicitely convert your <code>myTable[]</code> to something &lt;&lt; can handle.</p>\n\n<p>And your Lua array starts at 1, but you access [0].</p>\n"}], "owner": {"reputation": 89, "user_id": 5754196, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/8083d965e0be68c8dbce808af7046e05?s=128&d=identicon&r=PG&f=1", "display_name": "OT2O", "link": "https://stackoverflow.com/users/5754196/ot2o"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 177, "favorite_count": 0, "accepted_answer_id": 34642511, "answer_count": 1, "score": 2, "last_activity_date": 1452115229, "creation_date": 1452111854, "last_edit_date": 1452115229, "question_id": 34642074, "link": "https://stackoverflow.com/questions/34642074/accessing-tables-in-lua-from-c", "title": "Accessing Tables In Lua From C++", "body": "<p>I have a global table in Lua I am trying to access from C++.\nHere is essentially what I am trying to do:</p>\n\n<p>Lua:</p>\n\n<pre><code>myTable = {}\nmyTable[1] = 1\n</code></pre>\n\n<p>C++:</p>\n\n<pre><code>lua_State* L = luaL_newstate();\nluaL_openlibs(L);\nlua_pcall(L, 0, 0, 0);\nlua_State* L2 = luaL_newstate();\nluaL_dofile(L, \"luaScript.lua\");\n\nLuaRef myTable= getGlobal(L, \"myTable\");\n\ncout &lt;&lt; myTable[0];\n</code></pre>\n\n<p>I get an error on my <code>cout</code>, saying: </p>\n\n<blockquote>\n  <p>Error C2593   'operator &lt;&lt;' is ambiguous  ConsoleApplication2\" &amp; \"more than one operator \"&lt;&lt;\" matches these operands:</p>\n</blockquote>\n\n<p>However I do not think these errors are the issue.</p>\n\n<p>How can I access this value?</p>\n"}, {"tags": ["c++", "c", "linux", "gcc", "android-ndk"], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 5597909, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d414cb170a10d009353511684a759cf?s=128&d=identicon&r=PG&f=1", "display_name": "Vel", "link": "https://stackoverflow.com/users/5597909/vel"}, "edited": false, "score": 0, "creation_date": 1452202755, "post_id": 34655480, "comment_id": 57077029, "body": "I see, let me try following this again: <a href=\"https://github.com/flyskywhy/android-ndk-r7b/blob/master/docs/STANDALONE-TOOLCHAIN.html\" rel=\"nofollow noreferrer\">github.com/flyskywhy/android-ndk-r7b/blob/master/docs/&hellip;</a>    and envoking these commands to hopefully fix it: $export PATH=/tmp/my-android-toolchain/bin:$PATH    &amp; $ export CC=arm-linux-androideabi-gcc"}, {"owner": {"reputation": 41, "user_id": 5597909, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d414cb170a10d009353511684a759cf?s=128&d=identicon&r=PG&f=1", "display_name": "Vel", "link": "https://stackoverflow.com/users/5597909/vel"}, "edited": false, "score": 0, "creation_date": 1452203787, "post_id": 34655480, "comment_id": 57077540, "body": "Sadly after I modified the toolchains following step#3 here: <a href=\"https://github.com/flyskywhy/android-ndk-r7b/blob/master/docs/STANDALONE-TOOLCHAIN.html\" rel=\"nofollow noreferrer\">github.com/flyskywhy/android-ndk-r7b/blob/master/docs/&hellip;</a>  I even ran the two $export commands mentioned in the above comment......   I still get the same error when I run $./configure --host=arm-eabi CC=arm-linux-androideabi-gcc"}, {"owner": {"reputation": 41, "user_id": 5597909, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d414cb170a10d009353511684a759cf?s=128&d=identicon&r=PG&f=1", "display_name": "Vel", "link": "https://stackoverflow.com/users/5597909/vel"}, "edited": false, "score": 0, "creation_date": 1452212703, "post_id": 34655480, "comment_id": 57080951, "body": "I looked for the location of &quot;arm-linux-androideabi-gcc&quot; and found it here (/tmp/my-android-toolchain/bin/arm-linux-androideabi-gcc  ..... confirmed it can be executed)  added it to my PATH variable:  $export PATH=/tmp/my-android-toolchain/bin/arm-linux-androideabi-gcc&zwnj;&#8203;:$PATH  and same Error :/"}], "tags": [], "owner": {"reputation": 1560, "user_id": 4758618, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f04c304d3c41dcc6f9b721cbe22d4f0?s=128&d=identicon&r=PG&f=1", "display_name": "V-master", "link": "https://stackoverflow.com/users/4758618/v-master"}, "is_accepted": false, "score": 0, "last_activity_date": 1452170720, "creation_date": 1452170720, "answer_id": 34655480, "question_id": 34642033, "link": "https://stackoverflow.com/questions/34642033/compiling-vnc-server-binary-files-for-android/34655480#34655480", "title": "Compiling VNC Server Binary Files (for Android)", "body": "<pre><code>./configure: line 3548: arm-linux-androideabi-gcc: command not found\n</code></pre>\n\n<p>You need to specify full path to gcc or add its location to path</p>\n"}, {"tags": [], "owner": {"reputation": 41, "user_id": 5597909, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d414cb170a10d009353511684a759cf?s=128&d=identicon&r=PG&f=1", "display_name": "Vel", "link": "https://stackoverflow.com/users/5597909/vel"}, "is_accepted": false, "score": 0, "last_activity_date": 1452213791, "creation_date": 1452213791, "answer_id": 34667750, "question_id": 34642033, "link": "https://stackoverflow.com/questions/34642033/compiling-vnc-server-binary-files-for-android/34667750#34667750", "title": "Compiling VNC Server Binary Files (for Android)", "body": "<p>Solved! The solution is providing the full pass to the gcc ... for some reason despite running echo $PATH or echo $CC it showed it there but was giving me an error as if the compiler couldn't be found when I executed the $configure command. Was solved by simply providing the full directory to the gcc when running the $configure command. </p>\n"}], "owner": {"reputation": 41, "user_id": 5597909, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d414cb170a10d009353511684a759cf?s=128&d=identicon&r=PG&f=1", "display_name": "Vel", "link": "https://stackoverflow.com/users/5597909/vel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 916, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1452213791, "creation_date": 1452111710, "question_id": 34642033, "link": "https://stackoverflow.com/questions/34642033/compiling-vnc-server-binary-files-for-android", "title": "Compiling VNC Server Binary Files (for Android)", "body": "<p>Hey folks I'm trying to compile a ELF binary server files from here: <a href=\"https://github.com/LibVNC/libvncserver\" rel=\"nofollow\">https://github.com/LibVNC/libvncserver</a></p>\n\n<p>To do this I follow the steps here: ./configure --host=arm-eabi CC=arm-linux-androideabi-gcc (starting line 10 - 31). I set the NDK toolchains correctly and now I'm trying to run the $configure command.</p>\n\n<p>I'm using a 14.04 Ubuntu Machine. </p>\n\n<p>When I run the command:</p>\n\n<pre><code>$./configure --host=arm-eabi CC=arm-linux-androideabi-gcc\n</code></pre>\n\n<p>I get the following output:</p>\n\n<pre><code>root@ip-172-31-35-74:~/Desktop/libvncserver-LibVNCServer-0.9.10#  \nroot@ip-172-31-35-74:~/Desktop/libvncserver-LibVNCServer-0.9.10# ./configure --host=arm-eabi CC=arm-linux-androideabi-gcc \nchecking for a BSD-compatible install... /usr/bin/install -c \nchecking whether build environment is sane... yes \nchecking for arm-eabi-strip... no \nchecking for strip... strip \nchecking for a thread-safe mkdir -p... /bin/mkdir -p \nchecking for gawk... gawk \nchecking whether make sets $(MAKE)... yes \nchecking whether make supports nested variables... yes\nchecking whether make supports nested variables... (cached) yes\nchecking for arm-eabi-gcc... arm-linux-androideabi-gcc\nchecking whether the C compiler works... no\nconfigure: error: in `/home/ubuntu/Desktop/libvncserver-LibVNCServer-0.9.10':\nconfigure: error: C compiler cannot create executables\nSee `config.log' for more details\nroot@ip-172-31-35-74:~/Desktop/libvncserver-LibVNCServer-0.9.10# \nroot@ip-172-31-35-74:~/Desktop/libvncserver-LibVNCServer-0.9.10# \nroot@ip-172-31-35-74:~/Desktop/libvncserver-LibVNCServer-0.9.10#\n</code></pre>\n\n<p>and when I look at the config.log file I see this (can't find the problem :( ):</p>\n\n<pre><code>This file contains any messages produced by compilers while\nrunning configure, to aid debugging if configure makes a mistake.\n\nIt was created by LibVNCServer configure 0.9.10, which was\ngenerated by GNU Autoconf 2.69.  Invocation command line was\n\n  $ ./configure --host=arm-eabi CC=arm-linux-androideabi-gcc\n\n## --------- ##\n## Platform. ##\n## --------- ##\n\n   hostname = ip-172-31-35-74\n   uname -m = x86_64\n   uname -r = 3.13.0-48-generic\n   uname -s = Linux\n   uname -v = #80-Ubuntu SMP Thu Mar 12 11:16:15 UTC 2015\n\n   /usr/bin/uname -p = unknown\n   /bin/uname -X     = unknown\n\n   /bin/arch              = unknown\n   /usr/bin/arch -k       = unknown\n   /usr/convex/getsysinfo = unknown\n   /usr/bin/hostinfo      = unknown\n   /bin/machine           = unknown\n   /usr/bin/oslevel       = unknown\n   /bin/universe          = unknown\n\n   PATH: /usr/bin\n   PATH: /usr/local/sbin\n   PATH: /usr/local/bin\n   PATH: /usr/sbin\n   PATH: /usr/bin\n   PATH: /sbin\n   PATH: /bin\n\n\n   ## ----------- ##\n   ## Core tests. ##\n   ## ----------- ##\n   configure:2612: checking for a BSD-compatible install\n   configure:2680: result: /usr/bin/install -c\n   configure:2691: checking whether build environment is sane\n   configure:2746: result: yes\n   configure:2805: checking for arm-eabi-strip\n   configure:2835: result: no\n   configure:2845: checking for strip\n   configure:2861: found /usr/bin/strip\n   configure:2872: result: strip\n   configure:2897: checking for a thread-safe mkdir -p\n   configure:2936: result: /bin/mkdir -p\n   configure:2943: checking for gawk\n   configure:2959: found /usr/bin/gawk\n   configure:2970: result: gawk\n   configure:2981: checking whether make sets $(MAKE)\n   configure:3003: result: yes\n   configure:3032: checking whether make supports nested variables\n   configure:3049: result: yes\n   configure:3185: checking whether make supports nested variables\n   configure:3202: result: yes\n   configure:3241: checking for arm-eabi-gcc\n   configure:3268: result: arm-linux-androideabi-gcc\n   configure:3537: checking for C compiler version\n   configure:3546: arm-linux-androideabi-gcc --version &gt;&amp;5\n   ./configure: line 3548: arm-linux-androideabi-gcc: command not found\n   configure:3557: $? = 127\n   configure:3546: arm-linux-androideabi-gcc -v &gt;&amp;5\n   ./configure: line 3548: arm-linux-androideabi-gcc: command not found\n   configure:3557: $? = 127\n   configure:3546: arm-linux-androideabi-gcc -V &gt;&amp;5\n   ./configure: line 3548: arm-linux-androideabi-gcc: command not found\n   configure:3557: $? = 127\n   configure:3546: arm-linux-androideabi-gcc -qversion &gt;&amp;5\n   ./configure: line 3548: arm-linux-androideabi-gcc: command not found\n   configure:3557: $? = 127\n   configure:3577: checking whether the C compiler works\n   configure:3599: arm-linux-androideabi-gcc    conftest.c  &gt;&amp;5\n   ./configure: line 3601: arm-linux-androideabi-gcc: command not found\n   configure:3603: $? = 127\n   configure:3641: result: no\n   configure: failed program was:\n\n   | /* confdefs.h */\n   | #define PACKAGE_NAME \"LibVNCServer\"\n   | #define PACKAGE_TARNAME \"libvncserver\"\n   | #define PACKAGE_VERSION \"0.9.10\"\n   | #define PACKAGE_STRING \"LibVNCServer 0.9.10\"\n   | #define PACKAGE_BUGREPORT \"https://github.com/LibVNC/libvncserver\"\n   | #define PACKAGE_URL \"\"\n   | #define PACKAGE \"libvncserver\"\n   | #define VERSION \"0.9.10\"\n   | #define VERSION_MAJOR 0\n   | #define VERSION_MINOR 9\n   | #define VERSION_PATCHLEVEL 10\n   | /* end confdefs.h.  */\n   | \n   | int\n   | main ()\n   | {\n   | \n   |   ;\n   |   return 0;\n   | }\n   configure:3646: error: in `/home/ubuntu/Desktop/libvncserver-LibVNCServer-0.9.10':\n   configure:3648: error: C compiler cannot create executables\n   See `config.log' for more details\n\n   ## ---------------- ##\n\n## Cache variables. ##\n## ---------------- ##\n\nac_cv_env_CC_set=set\nac_cv_env_CC_value=arm-linux-androideabi-gcc\nac_cv_env_CFLAGS_set=\nac_cv_env_CFLAGS_value=\nac_cv_env_CPPFLAGS_set=\nac_cv_env_CPPFLAGS_value=\nac_cv_env_CPP_set=\nac_cv_env_CPP_value=\nac_cv_env_GNUTLS_CFLAGS_set=\nac_cv_env_GNUTLS_CFLAGS_value=\nac_cv_env_GNUTLS_LIBS_set=\nac_cv_env_GNUTLS_LIBS_value=\nac_cv_env_GTK_CFLAGS_set=\nac_cv_env_GTK_CFLAGS_value=\nac_cv_env_GTK_LIBS_set=\nac_cv_env_GTK_LIBS_value=\nac_cv_env_JPEG_LDFLAGS_set=\nac_cv_env_JPEG_LDFLAGS_value=\nac_cv_env_LDFLAGS_set=\nac_cv_env_LDFLAGS_value=\nac_cv_env_LIBS_set=\nac_cv_env_LIBS_value=\nac_cv_env_PKG_CONFIG_LIBDIR_set=\nac_cv_env_PKG_CONFIG_LIBDIR_value=\nac_cv_env_PKG_CONFIG_PATH_set=\nac_cv_env_PKG_CONFIG_PATH_value=\nac_cv_env_PKG_CONFIG_set=\nac_cv_env_PKG_CONFIG_value=\nac_cv_env_build_alias_set=\nac_cv_env_build_alias_value=\nac_cv_env_host_alias_set=set\nac_cv_env_host_alias_value=arm-eabi\nac_cv_env_target_alias_set=\nac_cv_env_target_alias_value=\nac_cv_path_install='/usr/bin/install -c'\nac_cv_path_mkdir=/bin/mkdir\nac_cv_prog_AWK=gawk\nac_cv_prog_CC=arm-linux-androideabi-gcc\nac_cv_prog_ac_ct_STRIP=strip\nac_cv_prog_make_make_set=yes\nam_cv_make_support_nested_variables=yes\n\n## ----------------- ##\n## Output variables. ##\n## ----------------- ##\n\nACLOCAL='${SHELL} /home/ubuntu/Desktop/libvncserver-LibVNCServer-0.9.10/missing aclocal-1.14'\nAMDEPBACKSLASH=''\nAMDEP_FALSE=''\nAMDEP_TRUE=''\nAMTAR='$${TAR-tar}'\nAM_BACKSLASH='\\'\nAM_DEFAULT_V='$(AM_DEFAULT_VERBOSITY)'\nAM_DEFAULT_VERBOSITY='0'\nAM_V='$(V)'\nANDROID_FALSE=''\nANDROID_TRUE=''\nAR=''\nAS=''\nAUTOCONF='${SHELL} /home/ubuntu/Desktop/libvncserver-LibVNCServer-0.9.10/missing autoconf'\nAUTOHEADER='${SHELL} /home/ubuntu/Desktop/libvncserver-LibVNCServer-0.9.10/missing autoheader'\nAUTOMAKE='${SHELL} /home/ubuntu/Desktop/libvncserver-LibVNCServer-0.9.10/missing automake-1.14'\nAWK='gawk'\nCC='arm-linux-androideabi-gcc'\nCCDEPMODE=''\nCFLAGS=''\nCONFIG_LIBVA_FALSE=''\nCONFIG_LIBVA_TRUE=''\nCPP=''\nCPPFLAGS=''\nCRYPT_LIBS=''\nCYGIPC_FALSE=''\nCYGIPC_TRUE=''\nCYGPATH_W='echo'\nDEFS=''\nDEPDIR=''\nDLLTOOL=''\nDSYMUTIL=''\nDUMPBIN=''\nECHO_C=''\nECHO_N='-n'\nECHO_T=''\nEGREP=''\nEXEEXT=''\nFGREP=''\nGNUTLS_CFLAGS=''\nGNUTLS_LIBS=''\nGREP=''\nGTK_CFLAGS=''\nGTK_LIBS=''\nHAVE_GNUTLS_FALSE=''\nHAVE_GNUTLS_TRUE=''\nHAVE_LIBGTK_FALSE=''\nHAVE_LIBGTK_TRUE=''\nHAVE_LIBJPEG_FALSE=''\nHAVE_LIBJPEG_TRUE=''\nHAVE_LIBPNG_FALSE=''\nHAVE_LIBPNG_TRUE=''\nHAVE_LIBPTHREAD_FALSE=''\nHAVE_LIBPTHREAD_TRUE=''\nHAVE_LIBSDL_FALSE=''\nHAVE_LIBSDL_TRUE=''\nHAVE_LIBSSL_FALSE=''\nHAVE_LIBSSL_TRUE=''\nHAVE_LIBZ_FALSE=''\nHAVE_LIBZ_TRUE=''\nHAVE_MP3LAME_FALSE=''\nHAVE_MP3LAME_TRUE=''\nHAVE_RPM_FALSE=''\nHAVE_RPM_TRUE=''\nINSTALL_DATA='${INSTALL} -m 644'\nINSTALL_PROGRAM='${INSTALL}'\nINSTALL_SCRIPT='${INSTALL}'\nINSTALL_STRIP_PROGRAM='$(install_sh) -c -s'\nJPEG_LDFLAGS=''\nLD=''\nLDFLAGS=''\nLIBGCRYPT_CFLAGS=''\nLIBGCRYPT_CONFIG=''\nLIBGCRYPT_LIBS=''\nLIBOBJS=''\nLIBS=''\nLIBTOOL=''\nLINUX_FALSE=''\nLINUX_TRUE=''\nLIPO=''\nLN_S=''\nLTLIBOBJS=''\nMAKEINFO='${SHELL} /home/ubuntu/Desktop/libvncserver-LibVNCServer-0.9.10/missing makeinfo'\nMANIFEST_TOOL=''\nMINGW_FALSE=''\nMINGW_TRUE=''\nMKDIR_P='/bin/mkdir -p'\nNM=''\nNMEDIT=''\nOBJDUMP=''\nOBJEXT=''\nOSX_FALSE=''\nOSX_TRUE=''\nOTOOL64=''\nOTOOL=''\nPACKAGE='libvncserver'\nPACKAGE_BUGREPORT='https://github.com/LibVNC/libvncserver'\nPACKAGE_NAME='LibVNCServer'\nPACKAGE_STRING='LibVNCServer 0.9.10'\nPACKAGE_TARNAME='libvncserver'\nPACKAGE_URL=''\nPACKAGE_VERSION='0.9.10'\nPATH_SEPARATOR=':'\nPKG_CONFIG=''\nPKG_CONFIG_LIBDIR=''\nPKG_CONFIG_PATH=''\nRANLIB=''\nRPMSOURCEDIR=''\nSDL_CFLAGS=''\nSDL_LIBS=''\nSED=''\nSET_MAKE=''\nSHELL='/bin/bash'\nSSL_LIBS=''\nSTRIP='strip'\nVA_LIBS=''\nVERSION='0.9.10'\nWITH_FFMPEG_FALSE=''\nWITH_FFMPEG_TRUE=''\nWITH_TIGHTVNC_FILETRANSFER_FALSE=''\nWITH_TIGHTVNC_FILETRANSFER_TRUE=''\nWITH_WEBSOCKETS_FALSE=''\nWITH_WEBSOCKETS_TRUE=''\nWSOCKLIB=''\nac_ct_AR=''\nac_ct_CC=''\nac_ct_DUMPBIN=''\nam__EXEEXT_FALSE=''\nam__EXEEXT_TRUE=''\nam__fastdepCC_FALSE=''\nam__fastdepCC_TRUE=''\nam__include=''\nam__isrc=''\nam__leading_dot='.'\nam__nodep=''\nam__quote=''\nam__tar='$${TAR-tar} chof - \"$$tardir\"'\nam__untar='$${TAR-tar} xf -'\nbindir='${exec_prefix}/bin'\nbuild=''\nbuild_alias=''\nbuild_cpu=''\nbuild_os=''\nbuild_vendor=''\ndatadir='${datarootdir}'\ndatarootdir='${prefix}/share'\ndocdir='${datarootdir}/doc/${PACKAGE_TARNAME}'\ndvidir='${docdir}'\nexec_prefix='NONE'\nhost='arm-eabi'\nhost_alias='arm-eabi'\nhost_cpu=''\nhost_os=''\nhost_vendor=''\nhtmldir='${docdir}'\nincludedir='${prefix}/include'\ninfodir='${datarootdir}/info'\ninstall_sh='${SHELL} /home/ubuntu/Desktop/libvncserver-LibVNCServer-0.9.10/install-sh'\nlibdir='${exec_prefix}/lib'\nlibexecdir='${exec_prefix}/libexec'\nlocaledir='${datarootdir}/locale'\nlocalstatedir='${prefix}/var'\nmandir='${datarootdir}/man'\nmkdir_p='$(MKDIR_P)'\noldincludedir='/usr/include'\npdfdir='${docdir}'\nprefix='NONE'\nprogram_transform_name='s,x,x,'\npsdir='${docdir}'\nsbindir='${exec_prefix}/sbin'\nsharedstatedir='${prefix}/com'\nsysconfdir='${prefix}/etc'\ntarget_alias=''\nwith_ffmpeg=''\n\n## ----------- ##\n## confdefs.h. ##\n## ----------- ##\n\n/* confdefs.h */\n#define PACKAGE_NAME \"LibVNCServer\"\n#define PACKAGE_TARNAME \"libvncserver\"\n#define PACKAGE_VERSION \"0.9.10\"\n#define PACKAGE_STRING \"LibVNCServer 0.9.10\"\n#define PACKAGE_BUGREPORT \"https://github.com/LibVNC/libvncserver\"\n#define PACKAGE_URL \"\"\n#define PACKAGE \"libvncserver\"\n#define VERSION \"0.9.10\"\n#define VERSION_MAJOR 0\n#define VERSION_MINOR 9\n#define VERSION_PATCHLEVEL 10\n\nconfigure: exit 77\n</code></pre>\n"}, {"tags": ["c++", "templates"], "comments": [{"owner": {"reputation": 188064, "user_id": 635608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oIJia.png?s=128&g=1", "display_name": "Mat", "link": "https://stackoverflow.com/users/635608/mat"}, "edited": false, "score": 0, "creation_date": 1452112098, "post_id": 34642029, "comment_id": 57030227, "body": "They are called &quot;non-type template parameters&quot;, which should help you find further info about them more easily. (BTW, string literals aren&#39;t allowed either: <a href=\"http://stackoverflow.com/questions/5547852/string-literals-not-allowed-as-non-type-template-parameters\" title=\"string literals not allowed as non type template parameters\">stackoverflow.com/questions/5547852/&hellip;</a>)"}, {"owner": {"reputation": 2583, "user_id": 2846062, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/32362fca75c20824e7db578de0d7519c?s=128&d=identicon&r=PG&f=1", "display_name": "Milo Lu", "link": "https://stackoverflow.com/users/2846062/milo-lu"}, "reply_to_user": {"reputation": 188064, "user_id": 635608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oIJia.png?s=128&g=1", "display_name": "Mat", "link": "https://stackoverflow.com/users/635608/mat"}, "edited": false, "score": 0, "creation_date": 1452113091, "post_id": 34642029, "comment_id": 57030755, "body": "The answer is confusing. I understand a string literal is not acceptable as a template argument. However, the code is from &quot;the c++ programming language&quot; -- Bjarne Stroustrup, Ch25.2.2 values as arguments. Check it out."}], "owner": {"reputation": 2583, "user_id": 2846062, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/32362fca75c20824e7db578de0d7519c?s=128&d=identicon&r=PG&f=1", "display_name": "Milo Lu", "link": "https://stackoverflow.com/users/2846062/milo-lu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 37, "favorite_count": 1, "closed_date": 1452112011, "answer_count": 0, "score": 0, "last_activity_date": 1452111692, "creation_date": 1452111692, "question_id": 34642029, "link": "https://stackoverflow.com/questions/34642029/how-to-set-string-as-value-template-parameter", "closed_reason": "Duplicate", "title": "How to set string as value template parameter?", "body": "<pre><code>template&lt;typename T,T default_value=T{}&gt;\nclass Vec{};\n\nVec&lt;string,\"abc\"&gt; vs;\n</code></pre>\n\n<p>I get an error:\n'class std::basic_string' is not a valid type for a template non-type parameter</p>\n"}, {"tags": ["c++", "qt", "qt-creator", "qtoolbar"], "comments": [{"owner": {"reputation": 3448, "user_id": 5466118, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c5af41e2f2230c199ad274d363eda32?s=128&d=identicon&r=PG&f=1", "display_name": "Martin Zabel", "link": "https://stackoverflow.com/users/5466118/martin-zabel"}, "edited": false, "score": 0, "creation_date": 1452113869, "post_id": 34642003, "comment_id": 57031155, "body": "And where is the <a href=\"http://stackoverflow.com/help/mcve\">code</a>?"}], "answers": [{"comments": [{"owner": {"reputation": 467, "user_id": 4859724, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/f34g7.png?s=128&g=1", "display_name": "Renato Sanhueza", "link": "https://stackoverflow.com/users/4859724/renato-sanhueza"}, "edited": false, "score": 0, "creation_date": 1452113983, "post_id": 34642528, "comment_id": 57031215, "body": "I have very little time to finish this work. But it seems it is the only way. I will try to use code."}, {"owner": {"reputation": 21247, "user_id": 904422, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/55cf313c546e7c5aa1aeefae0e772c53?s=128&d=identicon&r=PG", "display_name": "Mitch", "link": "https://stackoverflow.com/users/904422/mitch"}, "reply_to_user": {"reputation": 467, "user_id": 4859724, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/f34g7.png?s=128&g=1", "display_name": "Renato Sanhueza", "link": "https://stackoverflow.com/users/4859724/renato-sanhueza"}, "edited": false, "score": 0, "creation_date": 1452114988, "post_id": 34642528, "comment_id": 57031730, "body": "It won&#39;t take long! :)"}], "tags": [], "owner": {"reputation": 21247, "user_id": 904422, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/55cf313c546e7c5aa1aeefae0e772c53?s=128&d=identicon&r=PG", "display_name": "Mitch", "link": "https://stackoverflow.com/users/904422/mitch"}, "is_accepted": true, "score": 1, "last_activity_date": 1452113537, "creation_date": 1452113537, "answer_id": 34642528, "question_id": 34642003, "link": "https://stackoverflow.com/questions/34642003/add-some-text-to-a-qtoolbar/34642528#34642528", "title": "Add some text to a QToolBar", "body": "<p>It looks like you can't do it from within Designer:</p>\n\n<p><a href=\"https://bugreports.qt.io/browse/QTBUG-1267\" rel=\"nofollow\">https://bugreports.qt.io/browse/QTBUG-1267</a></p>\n\n<p>That's an oooold suggestion, too, with a low priority to boot, so it probably won't get fixed any time soon.</p>\n\n<p>You can get your hands dirty and do it in <a href=\"http://doc.qt.io/qt-5/qtoolbar.html#addWidget\" rel=\"nofollow\">code</a>, however.</p>\n"}], "owner": {"reputation": 467, "user_id": 4859724, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/f34g7.png?s=128&g=1", "display_name": "Renato Sanhueza", "link": "https://stackoverflow.com/users/4859724/renato-sanhueza"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 185, "favorite_count": 1, "accepted_answer_id": 34642528, "answer_count": 1, "score": 0, "last_activity_date": 1452113537, "creation_date": 1452111583, "last_edit_date": 1452112047, "question_id": 34642003, "link": "https://stackoverflow.com/questions/34642003/add-some-text-to-a-qtoolbar", "title": "Add some text to a QToolBar", "body": "<p>I am having trouble adding some text in a QToolBar. I can only add Actions. Also I have two actions with their rerspectives icons in my QToolBar but I want to separate them and I can\u00b4t either. </p>\n\n<p>My newbie approach was to add empty actions to simulate blank spaces between the icons. But the user can click on the blank spaces.</p>\n\n<p>I am using the Design function of QT Creator. Some help would be really apreciated. </p>\n"}, {"tags": ["c++", "performance", "data-structures", "segment-tree"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 0, "creation_date": 1452111118, "post_id": 34641813, "comment_id": 57029613, "body": "Proper modelling of the problem (use a pencil an paper)"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1452111163, "post_id": 34641813, "comment_id": 57029652, "body": "<i>&quot;What am i missing here ?&quot;</i> is a pretty vague statement to describe that your code doesn&#39;t meet your expectations. Please elaborate about these, and what you&#39;ve been trying for improvement, and where you actually failed at best. Don&#39;t expect to get ready made correct code written here for you. A simple <code>break;</code> when conditions are met would already help a lot BTW."}, {"owner": {"reputation": 69, "user_id": 4689528, "user_type": "registered", "accept_rate": 20, "profile_image": "https://graph.facebook.com/848938488483202/picture?type=large", "display_name": "Sarvagya", "link": "https://stackoverflow.com/users/4689528/sarvagya"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1452111444, "post_id": 34641813, "comment_id": 57029820, "body": "I actually was halfway through my code when i realised that it isn&#39;t possible to answer query type 2 with this ! What i stored was essentially the same with an extra variable winning_car ! I thought for type 1 query I would just update the variables the same way i did above but for answering which car is winning at the moment I couldn&#39;t come up with a query function that would answer that in O(LogN). Either it is possible to write such a function ( which i am not able to) or i stored insufficient information in my node( I think it is this) ! @\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6"}, {"owner": {"reputation": 69, "user_id": 4689528, "user_type": "registered", "accept_rate": 20, "profile_image": "https://graph.facebook.com/848938488483202/picture?type=large", "display_name": "Sarvagya", "link": "https://stackoverflow.com/users/4689528/sarvagya"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1452111750, "post_id": 34641813, "comment_id": 57030020, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 I am not expecting a ready-made code , all i need is the information to store in the tree-node and probably how to build the parent node using that information."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1452111925, "post_id": 34641813, "comment_id": 57030125, "body": "@Alex <i>&quot;What I&#39;m missing here?&quot;</i> Is still too vague. There could be a lot of things you&#39;re missing. Add additional information of your efforts in the question, not in comments please."}], "owner": {"reputation": 69, "user_id": 4689528, "user_type": "registered", "accept_rate": 20, "profile_image": "https://graph.facebook.com/848938488483202/picture?type=large", "display_name": "Sarvagya", "link": "https://stackoverflow.com/users/4689528/sarvagya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 81, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1452113825, "creation_date": 1452110824, "last_edit_date": 1452113825, "question_id": 34641813, "link": "https://stackoverflow.com/questions/34641813/node-information-for-segment-tree", "title": "Node Information for Segment Tree", "body": "<p><strong>Problem :</strong><br><br></p>\n\n<blockquote>\n  <p>Think about cars in a race as points on a line. All the cars start at\n  the same point with an initial speed of <em>zero</em>. All of them move in\n  the same direction. There are N cars in total, numbered from 1 to\n  N.\n  <br><br> You will be given two kinds of queries :<br><br>\n  1. Change the speed of the car <strong><em>i</em></strong> at any time <strong><em>t</em></strong><br>\n  2. Output the current winner of the race at any time <strong><em>t</em></strong> <br><br></p>\n</blockquote>\n\n<p>For query type <em>1</em>, I will be given the <strong>time</strong>, <strong>Car No.</strong> and the <strong>New Speed</strong>.<br><br>\nFor query type <em>2</em>, I will be given the <strong>time</strong> at which the we need to find the winning car.<br><br>\n<strong>Constraints :</strong>\nN &lt;= 50,000 , Queries &lt;= 10^5<br>\n<strong>Also time in every query would be >= time in the previous query</strong><br></p>\n\n<p><strong>What I tried till now :</strong></p>\n\n<pre><code>#include&lt;bits/stdc++.h&gt;\n\nusing namespace std;\n\npair&lt;int,pair&lt;int,int&gt; &gt; arr[50005];//this stores car's last position,speed,time(at which this speed was assigned)\nint main()\n{\n    int n,q;\n    cin&gt;&gt;n&gt;&gt;q;\n    for(int i=1;i&lt;=n;++i){arr[i]={0,{0,0}};}\n    while(q--)\n    {\n        int type;\n        cin&gt;&gt;type;\n        if(type==1)\n        {\n            int time,car,speed;\n            cin&gt;&gt;time&gt;&gt;car&gt;&gt;speed;\n            arr[car].first= arr[car].first + 1LL*(time-arr[car].second.second)*arr[car].second.first;// new position\n            arr[car].second.first = speed;\n            arr[car].second.second = time;\n        }\n        else\n        {\n            int ans=-1,time;\n            cin&gt;&gt;time;\n            for(int i=1;i&lt;=n;++i){\n                //position at the \"time\" is the last position plus distance travelled\n                int temp = (time - arr[i].second.second)*arr[i].second.first + arr[i].first;\n                // farthest car is the current winner \n                ans = max(ans,temp);\n            }\n            cout&lt;&lt;ans&lt;&lt;endl;\n        }\n    }\n    return 0;\n}\n</code></pre>\n\n<p><br>\nSince this approach answers the type <em>2</em> query in <strong>O(N)</strong> it is really ineffecient.<br><br>\nSince I only need an update operation and max range query I thought of using segment tree to speed this up to <strong>O(LogN)</strong>.<br><br>\nI actually was halfway through my code when i realised that it isn't possible to answer query type 2 with this ! What i stored was essentially the same with an extra variable winning_car ! I thought for type 1 query I would just update the variables the same way i did above but for answering which car is winning at the moment I couldn't come up with a query function that would answer that in O(LogN). Either it is possible to write such a function ( which i am not able to) or i stored insufficient information in my node( I think it is this) !<br>\n<br>\nWhat should I store in the tree node ? (or is it not possible with segment tree ?). Not asking for a ready-made code here, just the approach(if it is complex some pseudo-code would be nice though) </p>\n"}, {"tags": ["c++", "linux", "eclipse", "ubuntu"], "comments": [{"owner": {"reputation": 195, "user_id": 2513442, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be9b0ca3088ef0cb8e90f7f9f2901ad7?s=128&d=identicon&r=PG", "display_name": "Aseem Baranwal", "link": "https://stackoverflow.com/users/2513442/aseem-baranwal"}, "edited": false, "score": 0, "creation_date": 1452110866, "post_id": 34641759, "comment_id": 57029455, "body": "Can you show some code of that simple program which is giving this error?"}, {"owner": {"reputation": 333, "user_id": 5637644, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c82eee7c77b49c2c9650894a550231bf?s=128&d=identicon&r=PG&f=1", "display_name": "Mr.SrJenea", "link": "https://stackoverflow.com/users/5637644/mr-srjenea"}, "reply_to_user": {"reputation": 195, "user_id": 2513442, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be9b0ca3088ef0cb8e90f7f9f2901ad7?s=128&d=identicon&r=PG", "display_name": "Aseem Baranwal", "link": "https://stackoverflow.com/users/2513442/aseem-baranwal"}, "edited": false, "score": 0, "creation_date": 1452111170, "post_id": 34641759, "comment_id": 57029658, "body": "<code>#include &lt;iostream&gt;  using namespace std;  int main() { \t \tcout &lt;&lt; &quot;Hello&quot;; \treturn 0; }</code>"}, {"owner": {"reputation": 195, "user_id": 2513442, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be9b0ca3088ef0cb8e90f7f9f2901ad7?s=128&d=identicon&r=PG", "display_name": "Aseem Baranwal", "link": "https://stackoverflow.com/users/2513442/aseem-baranwal"}, "edited": false, "score": 1, "creation_date": 1452147014, "post_id": 34641759, "comment_id": 57042319, "body": "Tried these? <a href=\"http://stackoverflow.com/questions/11814536/eclipse-c-symbol-std-could-not-be-resolved\" title=\"eclipse c symbol std could not be resolved\">stackoverflow.com/questions/11814536/&hellip;</a>"}], "owner": {"reputation": 333, "user_id": 5637644, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c82eee7c77b49c2c9650894a550231bf?s=128&d=identicon&r=PG&f=1", "display_name": "Mr.SrJenea", "link": "https://stackoverflow.com/users/5637644/mr-srjenea"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 581, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1452114036, "creation_date": 1452110610, "last_edit_date": 1452114036, "question_id": 34641759, "link": "https://stackoverflow.com/questions/34641759/symbol-std-could-not-be-resovled-eclipse-mars-c-c", "title": "Symbol std could not be resovled Eclipse Mars C/C++", "body": "<p>I installed Eclipse Mars on Ubuntu 14.04. When I try create an empty project and simple program I get the error <code>\"Symbol std could not be resovled\"</code> , and the same for<code>cout</code>. But when I run the Hello world project included in Eclipse, everything works fine. What might be the problem?</p>\n\n<pre><code>Current toolchain : Linux GCC\nCurrent builder : GNU make builder\nGCC Archiver\nGCC C++ Compiler\nGCC C Compiler\nGCC C Linker\nGCC C++ Linker\nGCC Assembler\n</code></pre>\n\n<p>Example code:</p>\n\n<pre><code>#include &lt;iostream&gt; \nusing namespace std; \nint main() \n{ \n    cout &lt;&lt; \"Hello\"; \n    return 0; \n}\n</code></pre>\n"}, {"tags": ["c++", "templates"], "comments": [{"owner": {"reputation": 21714, "user_id": 1392132, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QF6FZ.jpg?s=128&g=1", "display_name": "5gon12eder", "link": "https://stackoverflow.com/users/1392132/5gon12eder"}, "edited": false, "score": 1, "creation_date": 1452110062, "post_id": 34641604, "comment_id": 57028930, "body": "Yes, that&#39;s the purpose of <code>template</code>s. Note, however, that <code>container&lt;true&gt;</code> and <code>container&lt;false&gt;</code> are <i>not</i> the same type."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1452110388, "post_id": 34641604, "comment_id": 57029140, "body": "I don&#39;t quite understand the downvote. How is this question not useful? (low research efforts may be, but still a lot more useful than many others appearing here)."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 0, "creation_date": 1452110244, "post_id": 34641639, "comment_id": 57029029, "body": "&quot;Look up template metaprogramming for more information&quot; is too much, here"}, {"owner": {"reputation": 325120, "user_id": 501557, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e4bac7ebd5f5a06c716f508af656e24b?s=128&d=identicon&r=PG", "display_name": "templatetypedef", "link": "https://stackoverflow.com/users/501557/templatetypedef"}, "edited": false, "score": 0, "creation_date": 1452110289, "post_id": 34641639, "comment_id": 57029065, "body": "@DieterL&#252;cking Agreed. I was mentioning it mostly in the context of &quot;to implement compile-time computation,&quot; and since I figured it might be a good starting point if the OP was curious in learning more about how template specialization can be used."}], "tags": [], "owner": {"reputation": 325120, "user_id": 501557, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e4bac7ebd5f5a06c716f508af656e24b?s=128&d=identicon&r=PG", "display_name": "templatetypedef", "link": "https://stackoverflow.com/users/501557/templatetypedef"}, "is_accepted": true, "score": 8, "last_activity_date": 1452110120, "creation_date": 1452110120, "answer_id": 34641639, "question_id": 34641604, "link": "https://stackoverflow.com/questions/34641604/same-template-different-code/34641639#34641639", "title": "Same template, different code?", "body": "<p>Yes. This is called <em>template specialization</em>. You can write code like this:</p>\n\n<pre><code>template &lt;bool&gt; class container {\n    /* Implementation for true */\n};\n\ntemplate &lt;&gt; class container&lt;false&gt; {\n    /* Implementation for false */\n};\n</code></pre>\n\n<p>Now, if you instantiate <code>container&lt;true&gt;</code>, it will pick the top version because the bottom one is not applicable. If you instantiate <code>container&lt;false&gt;</code>, then the bottom one will be chosen, since both versions are applicable, but the bottom is more specialized.</p>\n\n<p>The implementations here can be completely different. There's no requirement that they have anything in common. This is often used to implement compile-time computation. Look up <em>template metaprogramming</em> for more information.</p>\n"}], "owner": {"reputation": 1222, "user_id": 1576803, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/5fPDS.gif?s=128&g=1", "display_name": "aram", "link": "https://stackoverflow.com/users/1576803/aram"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "accepted_answer_id": 34641639, "answer_count": 1, "score": 3, "last_activity_date": 1452191441, "creation_date": 1452110002, "last_edit_date": 1452191441, "question_id": 34641604, "link": "https://stackoverflow.com/questions/34641604/same-template-different-code", "title": "Same template, different code?", "body": "<p>Is there any way to have the same template type while having different code by changing the value passed? ie:</p>\n\n<pre><code>template &lt;bool&gt;\nclass container; \n</code></pre>\n\n<p>And having <code>container&lt;true&gt;</code> generate different code than <code>container&lt;false&gt;</code>? </p>\n\n<p>If not are there any alternatives to this? </p>\n"}, {"tags": ["c++", "qt"], "answers": [{"tags": [], "owner": {"reputation": 21247, "user_id": 904422, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/55cf313c546e7c5aa1aeefae0e772c53?s=128&d=identicon&r=PG", "display_name": "Mitch", "link": "https://stackoverflow.com/users/904422/mitch"}, "is_accepted": true, "score": 1, "last_activity_date": 1452114560, "creation_date": 1452114560, "answer_id": 34642779, "question_id": 34641338, "link": "https://stackoverflow.com/questions/34641338/qgraphicsobject0-instead-of-null-in-pointer/34642779#34642779", "title": "QGraphicsObject(0) instead of NULL in pointer", "body": "<p>I'm guessing that you didn't actually try to compare it against null? What's the harm in trying? :) It would have worked:</p>\n\n<pre><code>#include &lt;QtWidgets&gt;\n\nint main(int argc, char *argv[])\n{\n    QApplication a(argc, argv);\n    QGraphicsItem *rect = 0;\n    qDebug() &lt;&lt; \"is\" &lt;&lt; rect &lt;&lt; \"null?\" &lt;&lt; (rect == 0);\n    return 0;\n}\n</code></pre>\n\n<p>What's happening is that the <code>&lt;&lt;</code> operator <a href=\"http://code.qt.io/cgit/qt/qtbase.git/tree/src/widgets/graphicsview/qgraphicsitem.cpp#n11300\" rel=\"nofollow\">has been defined</a> for that type:</p>\n\n<pre><code>if (!item) {\n    debug &lt;&lt; \"QGraphicsItem(0)\";\n    return debug;\n}\n</code></pre>\n\n<p>So, when you print it out, this function gets called and tries to print something useful rather than just a memory address. It sees that the pointer is null, so it prints out the type (<code>QGraphicsItem</code>) and <code>0</code>.</p>\n"}], "owner": {"reputation": 127, "user_id": 5514633, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/0bc625468fb29ad02e6b2eb3ae0581cc?s=128&d=identicon&r=PG&f=1", "display_name": "padrian92", "link": "https://stackoverflow.com/users/5514633/padrian92"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "accepted_answer_id": 34642779, "answer_count": 1, "score": 0, "last_activity_date": 1452114560, "creation_date": 1452108980, "question_id": 34641338, "link": "https://stackoverflow.com/questions/34641338/qgraphicsobject0-instead-of-null-in-pointer", "title": "QGraphicsObject(0) instead of NULL in pointer", "body": "<p>I'm working on a small game in Qt. I've got a board where every field has a pointer to unit. At the begin pointers are set to NULL. I'd like to check fields around my unit before move but</p>\n\n<pre><code>this-&gt;getRoom(-325,-325)-&gt;getUnit();\n</code></pre>\n\n<p>returns \"QGraphicsObject(0)\" not just \"NULL\" as I expected. I've changed my if instruction from:</p>\n\n<pre><code>if(this-&gt;getRoom(-325,-325)-&gt;getUnit()==0)\n</code></pre>\n\n<p>to:</p>\n\n<pre><code>if(this-&gt;getRoom(-325,-325)-&gt;getUnit()==QGraphicsObject(0))\n</code></pre>\n\n<p>but now I get: <strong>invalid cast to abstract class type 'QGraphicsObject'</strong>. Is there any other way to check these fields?</p>\n"}, {"tags": ["c++", "file", "sockets"], "comments": [{"owner": {"reputation": 9846, "user_id": 1745544, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/92a0f69d86d214e0cffceb76c6e3f09f?s=128&d=identicon&r=PG", "display_name": "OldProgrammer", "link": "https://stackoverflow.com/users/1745544/oldprogrammer"}, "edited": false, "score": 0, "creation_date": 1452109282, "post_id": 34641311, "comment_id": 57028421, "body": "Well, it is going to write whatever you got back in the buffer."}, {"owner": {"reputation": 13049, "user_id": 990502, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a146d5cbd39e3d21fce1631a35767043?s=128&d=identicon&r=PG", "display_name": "MistyD", "link": "https://stackoverflow.com/users/990502/mistyd"}, "reply_to_user": {"reputation": 9846, "user_id": 1745544, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/92a0f69d86d214e0cffceb76c6e3f09f?s=128&d=identicon&r=PG", "display_name": "OldProgrammer", "link": "https://stackoverflow.com/users/1745544/oldprogrammer"}, "edited": false, "score": 0, "creation_date": 1452109306, "post_id": 34641311, "comment_id": 57028439, "body": "I would not like to print \\0\\0"}, {"owner": {"reputation": 8777, "user_id": 3102264, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/G69VV.jpg?s=128&g=1", "display_name": "mpromonet", "link": "https://stackoverflow.com/users/3102264/mpromonet"}, "edited": false, "score": 3, "creation_date": 1452109399, "post_id": 34641311, "comment_id": 57028496, "body": "you should not write more bytes than you read, you should use something like <code>file.write(buffer,bytes_read)</code>"}], "answers": [{"tags": [], "owner": {"reputation": 41440, "user_id": 3887516, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/62e0310897139a10f3293022b6eb7054?s=128&d=identicon&r=PG&f=1", "display_name": "Amit", "link": "https://stackoverflow.com/users/3887516/amit"}, "is_accepted": false, "score": 1, "last_activity_date": 1452109437, "creation_date": 1452109437, "answer_id": 34641469, "question_id": 34641311, "link": "https://stackoverflow.com/questions/34641311/writing-data-received-from-a-socket-to-a-file-in-c/34641469#34641469", "title": "Writing data received from a socket to a file in C++", "body": "<p>Your understanding is correct. <code>printf</code> (and all is variants) write formatted text to the output stream till a NULL character (<code>\\0</code>) is found in the format string, and string parameters (<code>%s</code>) follow the same logic. <code>write</code> in the other hand deals with bytes and \"ignores\" what the values are. It will write NULLs without distinction.</p>\n\n<p>If you want to write formatted text to a file, use <code>fprintf</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 13049, "user_id": 990502, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a146d5cbd39e3d21fce1631a35767043?s=128&d=identicon&r=PG", "display_name": "MistyD", "link": "https://stackoverflow.com/users/990502/mistyd"}, "edited": false, "score": 0, "creation_date": 1452109731, "post_id": 34641505, "comment_id": 57028727, "body": "Thanks for answering this. @mpromonet suggested this and it worked. Thanks for clearing this up"}], "tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": true, "score": 2, "last_activity_date": 1452109736, "last_edit_date": 1452109736, "creation_date": 1452109624, "answer_id": 34641505, "question_id": 34641311, "link": "https://stackoverflow.com/questions/34641311/writing-data-received-from-a-socket-to-a-file-in-c/34641505#34641505", "title": "Writing data received from a socket to a file in C++", "body": "<p>You are using a <code>while</code> loop that checks <code>bytes_read</code> before <code>recv()</code> has been called for the first time.  Use a <code>do/while</code> loop instead.  And you are not outputting the read data correctly, either.  You need to take <code>bytes_read</code> into account when outputting the data.  You are writing too many bytes to <code>file</code>, and not null-terminating the buffer for <code>printf()</code>.</p>\n\n<p>Try this instead:</p>\n\n<pre><code>char buffer[4096];   \nstd::ofstream file(INPUT_PS_FILE_NAME, std::ios::out|std::ios::binary);\ndo\n{\n     bytes_read = recv(newsockfd, buffer, sizeof(buffer), 0);  \n     if (bytes_read &gt; 0) {\n         file.write(buffer, bytes_read); \n         printf(\"Buffer: %.*s\\n\", bytes_read, buffer); \n         //or: printf(\"Buffer: %*.*s\\n\", bytes_read, bytes_read, buffer); \n     }\n}\nwhile (bytes_read &gt; 0);\n</code></pre>\n"}], "owner": {"reputation": 13049, "user_id": 990502, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a146d5cbd39e3d21fce1631a35767043?s=128&d=identicon&r=PG", "display_name": "MistyD", "link": "https://stackoverflow.com/users/990502/mistyd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1455, "favorite_count": 0, "accepted_answer_id": 34641505, "answer_count": 2, "score": 0, "last_activity_date": 1452110751, "creation_date": 1452108895, "last_edit_date": 1452110751, "question_id": 34641311, "link": "https://stackoverflow.com/questions/34641311/writing-data-received-from-a-socket-to-a-file-in-c", "title": "Writing data received from a socket to a file in C++", "body": "<p>I am currently receiving data from a windows computer to a linux system which has the following implementation. It reads the data and writes it to a file</p>\n\n<pre><code>char buffer[4096];   \nint BUFSIZE=4096; \nstd::ofstream file(INPUT_PS_FILE_NAME, std::ios::out|std::ios::binary);\nwhile (bytes_read &gt; 0)\n{\n     buffer[bytes_read] = 0; \n     bytes_read = recv(newsockfd, buffer, BUFSIZE - 1, 0);  \n     if(bytes_read&gt;0) {\n         file.write(buffer,BUFSIZE-1); \n         printf(\"Buffer: %s\\n\", buffer); \n     }\n}\n</code></pre>\n\n<p>Now sometimes in my file I would get a whole bunch of \"\\00\\00\\00\\00\\00...\" in my file and sometimes its fine but never on the console of the machine.My understanding is this happens because <code>printf</code> when passed an array will print all the contents of an array until it meets a null character however <code>file.write</code> does not. Please let me know if my understanding is correct. Also inorder to resolve this issue is there a way for me to have <code>file.write</code> behave like printf where it only prints until a NULL termination is found ? </p>\n"}, {"tags": ["c++", "move-semantics", "move-constructor"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 0, "creation_date": 1452109047, "post_id": 34641234, "comment_id": 57028273, "body": "Moving an object usually alters the target and source object (the target steals data and leave the source with nothing - maybe a swap of data)"}, {"owner": {"reputation": 21240, "user_id": 951423, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/UlSg8.png?s=128&g=1", "display_name": "Pixelchemist", "link": "https://stackoverflow.com/users/951423/pixelchemist"}, "edited": false, "score": 0, "creation_date": 1452109886, "post_id": 34641234, "comment_id": 57028820, "body": "<code>x+y</code> creates a temporary string that holds a pointer <code>data</code> to memory on the heap which contains the relevant data. If the temporary goes out of scope, the memory it owned on the heap gets deleted. But the move constructor you quoted alters the temporary in a way that it does not own that memory anymore - so it will go out of scope without actually touching its contents. Instead, the newly created <code>a</code> now owns that memory (its <code>data</code> points to the data, originally owned by <code>x+y</code>)."}], "answers": [{"tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": false, "score": 2, "last_activity_date": 1452109636, "last_edit_date": 1452109636, "creation_date": 1452108789, "answer_id": 34641280, "question_id": 34641234, "link": "https://stackoverflow.com/questions/34641234/how-does-move-semantics-preserve-data-of-temporary-variables/34641280#34641280", "title": "How does move semantics preserve data of temporary variables?", "body": "<blockquote>\n  <p>Since the result of x+y is a temporary variable, it gets destroyed very soon. That would mean copying over the pointer (data = that.data) would indeed be copying over a dangling pointer</p>\n</blockquote>\n\n<p>Nope.  You copy the pointer so now the new string has the data and then you set the pointer of the temporary to <code>nullptr</code> so when the temporary is destroyed it does not delete the string data.</p>\n\n<p>You can see how this is working in this little example</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nstruct Foo\n{\n    int * f;\n    Foo(int size) : f(new int[size]) \n    { \n        for (int i = 0; i &lt; size; i++)\n            f[i] = i; \n    }\n    Foo() : f(nullptr) {}\n    ~Foo() { delete [] f; }\n};\n\nint main()\n{\n    int size = 10;\n    Foo b;  // b is empty\n    {\n        Foo f(size);  // now f has an of size 10\n        // if we now swap the contents like the move operation does\n        b.f = f.f;\n        f.f = nullptr;\n    } // f goes out of scope and ~Foo() is called\n    // now here b.f is valid as delete on nullptr did nothing\n    for (int i = 0; i &lt; size; i++)\n            std::cout &lt;&lt; b.f[i] &lt;&lt; \" \";\n}\n</code></pre>\n\n<p><kbd><a href=\"http://coliru.stacked-crooked.com/a/3050ee51818a7510\" rel=\"nofollow\">Live Example</a></kbd></p>\n"}, {"tags": [], "owner": {"reputation": 2352, "user_id": 5711725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0cfaab398800db4fd0e9b0aae6621bda?s=128&d=identicon&r=PG&f=1", "display_name": "Javier Mart&#237;n", "link": "https://stackoverflow.com/users/5711725/javier-mart%c3%adn"}, "is_accepted": false, "score": 0, "last_activity_date": 1452108819, "creation_date": 1452108819, "answer_id": 34641293, "question_id": 34641234, "link": "https://stackoverflow.com/questions/34641234/how-does-move-semantics-preserve-data-of-temporary-variables/34641293#34641293", "title": "How does move semantics preserve data of temporary variables?", "body": "<p>In the case of <code>string</code> data is stored on the heap, not in stack frames. The \"string\" object only contains the pointer and maybe some additional data (e.g. the length). Thus, the move constructor you show effectively \"robs\" the <code>that</code> object of the ownership of its data. The second line, assigning <code>nullptr</code> to the data pointer of the temporary, is necessary in order to avoid the destructor of that same temporary from deleting the data we stole (because calling delete on nullptr is guaranteed to have no effect).</p>\n"}, {"comments": [{"owner": {"reputation": 79096, "user_id": 865874, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ACMnN.png?s=128&g=1", "display_name": "rodrigo", "link": "https://stackoverflow.com/users/865874/rodrigo"}, "edited": false, "score": 0, "creation_date": 1452109482, "post_id": 34641316, "comment_id": 57028554, "body": "@OneZero: Too long to explain in a comment. Please see my updated answer."}, {"owner": {"reputation": 10198, "user_id": 1229490, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/4bca06377adfdc168d5a1f70ee1e55f5?s=128&d=identicon&r=PG", "display_name": "OneZero", "link": "https://stackoverflow.com/users/1229490/onezero"}, "edited": false, "score": 0, "creation_date": 1452115428, "post_id": 34641316, "comment_id": 57031974, "body": "What if it&#39;s not a <code>string</code>, but a customized object type that just has <code>int data[5]</code> (instead of using <code>new</code>)? In that case, does it mean that we can not simply copy <code>data</code> pointer?"}, {"owner": {"reputation": 79096, "user_id": 865874, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ACMnN.png?s=128&g=1", "display_name": "rodrigo", "link": "https://stackoverflow.com/users/865874/rodrigo"}, "reply_to_user": {"reputation": 10198, "user_id": 1229490, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/4bca06377adfdc168d5a1f70ee1e55f5?s=128&d=identicon&r=PG", "display_name": "OneZero", "link": "https://stackoverflow.com/users/1229490/onezero"}, "edited": false, "score": 0, "creation_date": 1452115552, "post_id": 34641316, "comment_id": 57032051, "body": "@OneZero In that case <code>data</code> is not a pointer but an array, and the move constructor is simply not useful."}], "tags": [], "owner": {"reputation": 79096, "user_id": 865874, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ACMnN.png?s=128&g=1", "display_name": "rodrigo", "link": "https://stackoverflow.com/users/865874/rodrigo"}, "is_accepted": false, "score": 5, "last_activity_date": 1452109462, "last_edit_date": 1452109462, "creation_date": 1452108909, "answer_id": 34641316, "question_id": 34641234, "link": "https://stackoverflow.com/questions/34641234/how-does-move-semantics-preserve-data-of-temporary-variables/34641316#34641316", "title": "How does move semantics preserve data of temporary variables?", "body": "<p>When you do:</p>\n\n<pre><code>string a(x + y);\n</code></pre>\n\n<p>it is equivalent to:</p>\n\n<pre><code>string temp(x + y);\nstring a(move(temp));\n//destroy temp\n</code></pre>\n\n<p>The relevant code for the move constructor that you quote takes <code>a</code> as <code>this</code> and <code>that</code> as <code>temp</code>, so it could be inlined as:</p>\n\n<pre><code>string temp(x + y);\nstring a(/*uninitialized*/);\na.data = temp.data;\ntemp.data = nullptr;\n//destroy temp\n</code></pre>\n\n<p>As you can see, the <code>temp.data</code> is the one that gets nulled, so the destructor of <code>temp</code> becomes a no-op and the actual data survives inside <code>a</code>, as expected.</p>\n\n<p>It looks like your confusion comes from the origin of <code>data</code>. In the simplest <code>string</code> implementation, <code>string::data</code> is always a dynamically allocated block of memory:</p>\n\n<pre><code>string(const char *str)\n{\n    size_t len = strlen(str);\n    data = new char[len + 1];\n    strcpy(data, len);\n}   \n~string()\n{\n    delete[] data;\n}\n</code></pre>\n\n<p>Even if the <code>string</code> is allocated on the stack, such as <code>temp</code> and <code>a</code> and maybe even <code>x</code> and <code>y</code> their <code>data</code> memory block is dynamic.</p>\n\n<p>True, real-world <code>string</code> implementations usually do the non-dynamic-short-string optimization. But if you do that, then the move constructor (and any other member function) will be a bit more complicated.</p>\n"}], "owner": {"reputation": 10198, "user_id": 1229490, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/4bca06377adfdc168d5a1f70ee1e55f5?s=128&d=identicon&r=PG", "display_name": "OneZero", "link": "https://stackoverflow.com/users/1229490/onezero"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 500, "favorite_count": 0, "answer_count": 3, "score": 3, "last_activity_date": 1452109636, "creation_date": 1452108584, "last_edit_date": 1495535301, "question_id": 34641234, "link": "https://stackoverflow.com/questions/34641234/how-does-move-semantics-preserve-data-of-temporary-variables", "title": "How does move semantics preserve data of temporary variables?", "body": "<p>I am reading this post: <a href=\"https://stackoverflow.com/questions/3106110/what-are-move-semantics\">What are move semantics?</a></p>\n\n<p>Note that the example given in that post for move constructor was:</p>\n\n<pre><code>string(string&amp;&amp; that)  \n{\n    data = that.data;\n    that.data = nullptr;\n}\n</code></pre>\n\n<p>I found it confusing when we use <code>string a(x+y)</code> to construct a new string. Since the result of <code>x+y</code> is a temporary variable, it gets destroyed very soon. That would mean copying over the pointer (<code>data = that.data</code>) would indeed be copying over a dangling pointer, after the original data (which should be stored in the stack frame of <code>x+y</code> that gets cleaned up after the function call finishes) is destroyed. It seems that setting <code>that.data</code> to nullptr won't help, as the stack frame gets cleaned up anyways.</p>\n\n<p>Can anyone explain why this is not an issue? And how does c++ actually handles such situations?</p>\n"}, {"tags": ["c++", "c++11", "random", "constructor"], "comments": [{"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 0, "creation_date": 1452138168, "post_id": 34641027, "comment_id": 57039592, "body": "What is <code>initializeCTR</code> supposed to do? Does it need to work with two instances of <code>CTR</code> (one passed as a parameter, and one a member of <code>Foo</code>)? It seems that you didn&#39;t actually mean to have both (or else you wouldn&#39;t have been confused by the client lacking the second instance, and perhaps would have known enough not to give the two the same name)."}, {"owner": {"reputation": 1355, "user_id": 3772835, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oVZqc.gif?s=128&g=1", "display_name": "vincentp", "link": "https://stackoverflow.com/users/3772835/vincentp"}, "edited": false, "score": 0, "creation_date": 1452159354, "post_id": 34641027, "comment_id": 57048400, "body": "Using <code>typedef struct</code> is not useful in C++. You can directly use <code>struct CTR</code>."}], "answers": [{"tags": [], "owner": {"reputation": 1355, "user_id": 3772835, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oVZqc.gif?s=128&g=1", "display_name": "vincentp", "link": "https://stackoverflow.com/users/3772835/vincentp"}, "is_accepted": false, "score": 0, "last_activity_date": 1452158790, "last_edit_date": 1452158790, "creation_date": 1452158464, "answer_id": 34651370, "question_id": 34641027, "link": "https://stackoverflow.com/questions/34641027/initialize-random-constant-values-in-ctor/34651370#34651370", "title": "Initialize random constant values in ctor", "body": "<p>In this code:</p>\n\n<pre><code>Foo foo;\nfoo.initializeCTR(ctr); &lt;- ctr undefined here\n</code></pre>\n\n<p>The variable <code>ctr</code> you are trying to access is not the private field <code>ctr</code> defined in class <code>Foo</code>. A solution should be:</p>\n\n<pre><code>void Foo::initializeCTR() {\n  ctr.do_something();\n  // ...\n}\n</code></pre>\n\n<p>A better solution is to use it in the constructor:</p>\n\n<pre><code>Foo::Foo() {\n  ctr.do_something();\n  // ...\n}\n</code></pre>\n"}], "owner": {"reputation": 277, "user_id": 2801364, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/QD2i7.jpg?s=128&g=1", "display_name": "im_infamous", "link": "https://stackoverflow.com/users/2801364/im-infamous"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 35, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1491314360, "creation_date": 1452107934, "last_edit_date": 1491314360, "question_id": 34641027, "link": "https://stackoverflow.com/questions/34641027/initialize-random-constant-values-in-ctor", "title": "Initialize random constant values in ctor", "body": "<p>In my class there appeared necessity to initialize some constant random values in sructure.</p>\n\n<p>To achieve this there are defined limits:</p>\n\n<pre><code>std::random_device rd;\nstd::mt19937 eng(rd());\nstd::uniform_int_distribution&lt;&gt; lim1(3, 6);\nstd::uniform_int_distribution&lt;&gt; lim2(7, 20);\nstd::uniform_int_distribution&lt;&gt; lim3(1000, 100000);\n</code></pre>\n\n<p>And following structure:</p>\n\n<pre><code>typedef struct {\n    unsigned        c1, c2, c3;\n    const unsigned  limc1 = lim1(eng), \n                    limc2 = lim2(eng), \n                    limc3 = lim3(eng);\n} CTR;\n</code></pre>\n\n<p>So, when I try to do some initialization with these values</p>\n\n<pre><code>class Foo {\n    private:\n        CTR ctr;\n    public:\n    voud initializeCTR(CTR &amp;ctr);\n};\n</code></pre>\n\n<p>The problem is that field <code>ctr</code> invisible for <code>initializeCTR()</code></p>\n\n<pre><code>Foo foo;\nfoo.initializeCTR(ctr); &lt;- ctr undefined here\n</code></pre>\n\n<p>How should I code ctor or something other to achieve different random values for all class instances?</p>\n"}, {"tags": ["c++", "c++11", "binary", "iostream"], "comments": [{"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1452108645, "post_id": 34640992, "comment_id": 57027991, "body": "The <i>binary mode</i> of a file means that no translations will occur when reading or writing to the file (<code>ios::binary</code>).  One common translation is line endings.  This is different than using the <code>istream::read</code> and <code>ostream::write</code> to read and write unformatted data directly."}], "answers": [{"comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1452121938, "post_id": 34641202, "comment_id": 57035087, "body": "<i>&quot;Binary files should also have a header with some basic information.&quot;</i> In some subset of cases. Stating this as a general rule is optimistic at best."}], "tags": [], "owner": {"reputation": 10487, "user_id": 5708620, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b0f8c70394b748ed7ec1a3a11a749b1?s=128&d=identicon&r=PG&f=1", "display_name": "Danny_ds", "link": "https://stackoverflow.com/users/5708620/danny-ds"}, "is_accepted": false, "score": 0, "last_activity_date": 1452110013, "last_edit_date": 1592644375, "creation_date": 1452108474, "answer_id": 34641202, "question_id": 34640992, "link": "https://stackoverflow.com/questions/34640992/using-formatted-io-operations-in-binary-mode/34641202#34641202", "title": "Using formatted IO operations in binary mode?", "body": "<blockquote>\n<p>Is there any problem with using the formatted IO operations in binary\nmode, especially if I'm only dealing with text files?</p>\n<p>I just have to account for carriage-returns (\\r) which aren't\nimplictly removed/added for me</p>\n</blockquote>\n<p>If you want or need <code>\\r</code> in your data, you are probably dealing with text / strings. For that you do not need to use binary files. Although you could open textfiles in binary mode to do a quick scan for newlines for example (line count), without having to do a less efficient <code>readline()</code>.</p>\n<p>Binary files are used to store binary values directly (mostly numbers or data structures), without the need to convert them to text and back to binary again.</p>\n<p>Another advantage of binary files is that you don't have to do any parsing. You can access all your data directly, wherever it may be in the file (assuming the data is stored in a well structured manner).</p>\n<p>For example: if you need to store records, each containing 5 32-bit numbers, you can write those directly to the binary file in their native binary format (no time wasted with converting and parsing). To later read record nr 1000 for example, you can <code>seek</code> directly to position 5 x 4 x (1000-1), and read your 20-byte record from there. With text files on the other hand, you would need to scan every byte from the beginning of the file, until you have counted 1000 lines (with would also be of different lengths).</p>\n<p>You would use <code>read()</code> and <code>write()</code> (or <code>fread()</code> / <code>fwrite()</code>) directly (although <code>&lt;&lt;</code> and <code>&gt;&gt;</code> could be used too for <a href=\"https://stackoverflow.com/questions/234724/is-it-possible-to-serialize-and-deserialize-a-class-in-c\">serialization</a> of objects with variable lengths).</p>\n<p>Binary files should also have a header with some basic information. See <a href=\"https://stackoverflow.com/a/34612120/5708620\">my answer here</a> for more information on that.</p>\n"}], "owner": {"reputation": 773, "user_id": 5627734, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/ecb940b4218ff250f966e1d25e8aa7bf?s=128&d=identicon&r=PG&f=1", "display_name": "SergeantPenguin", "link": "https://stackoverflow.com/users/5627734/sergeantpenguin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 109, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1452110013, "creation_date": 1452107779, "last_edit_date": 1495542197, "question_id": 34640992, "link": "https://stackoverflow.com/questions/34640992/using-formatted-io-operations-in-binary-mode", "title": "Using formatted IO operations in binary mode?", "body": "<p>Is there any problem with using the formatted IO operations in binary mode, especially if I'm only dealing with text files? </p>\n\n<p><a href=\"http://www.cplusplus.com/doc/tutorial/files/\" rel=\"nofollow noreferrer\">(1)</a>:</p>\n\n<blockquote>\n  <p>For binary files, reading and writing data with the extraction and insertion operators (&lt;&lt; and >>) and functions like getline is not efficient, since we do not need to format any data and data is likely not formatted in lines.</p>\n</blockquote>\n\n<p><a href=\"http://courses.cs.vt.edu/~cs2604/fall00/binio.html\" rel=\"nofollow noreferrer\">(2)</a>:</p>\n\n<blockquote>\n  <p>Normally, for binary file i/o you do not use the conventional text-oriented &lt;&lt; and >> operators! It can be done, but that is an advanced topic. </p>\n</blockquote>\n\n<p>The \"advanced topic\" nature is what made me question mixing these two. There is a <a href=\"https://stackoverflow.com/questions/27055771/using-seekg-in-text-mode\">mingw bug</a> with the seek and tell functions which can be resolved by opening up in binary mode. Is there any issue with using &lt;&lt; and >> in binary mode compared to text mode or must I always resort to unformatted IO if opening up in binary? <a href=\"https://stackoverflow.com/questions/229924/difference-between-files-writen-in-binary-and-text-mode\">As far as I can tell for text files</a>, I just have to account for carriage-returns (\\r) which aren't implictly removed/added for me, but is that all there is to account for?</p>\n"}, {"tags": ["c++", "file", "input", "getline"], "comments": [{"owner": {"reputation": 36985, "user_id": 749284, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9939c97c2ccc2f1f6b829e9afbc32e5b?s=128&d=identicon&r=PG", "display_name": "mah", "link": "https://stackoverflow.com/users/749284/mah"}, "edited": false, "score": 2, "creation_date": 1452107981, "post_id": 34640914, "comment_id": 57027593, "body": "It looks like your code reads one line, prints it, and repeats until there&#39;s nothing left to read. This matches your description of things I think... so what&#39;s the problem? <i>it doesn&#39;t stop after the first line so i can insert the code i need</i> -- um, huh? You haven&#39;t described your problem very well at all, and you don&#39;t seem to have added any code to process the line (<code>output</code>) other than to print it."}, {"owner": {"reputation": 4121, "user_id": 2098932, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/BBJGp.jpg?s=128&g=1", "display_name": "Logicrat", "link": "https://stackoverflow.com/users/2098932/logicrat"}, "edited": false, "score": 1, "creation_date": 1452108443, "post_id": 34640914, "comment_id": 57027854, "body": "You are inviting a crash with the constant <code>256</code> in your <code>getline</code>. You should use <code>sizeof(output)</code> here."}, {"owner": {"reputation": 117, "user_id": 5248711, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e41982fa99483eac7bfec05a9e65909b?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/5248711/alex"}, "reply_to_user": {"reputation": 36985, "user_id": 749284, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9939c97c2ccc2f1f6b829e9afbc32e5b?s=128&d=identicon&r=PG", "display_name": "mah", "link": "https://stackoverflow.com/users/749284/mah"}, "edited": false, "score": 0, "creation_date": 1452109194, "post_id": 34640914, "comment_id": 57028356, "body": "@mah I didn&#39;t explain what i&#39;m trying to do properly, let me try again. So, i want to read the first line of text, split it into an array of strings formed out of the words and numbers in the line , then create an object of a class out of them. For example for the first line , create an object of the class Imp like this <code>Imp objImp(Imp, 1, down, 67)</code> . I Java i did the same thing using &#39;information = line.split(&quot;;&quot;)&#39; (where line was a line of text) and then used &#39;information[0]&#39;, &#39;information[1]&#39; to access the members of the string array and create the object. I`m trying to do the same here"}, {"owner": {"reputation": 117, "user_id": 5248711, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e41982fa99483eac7bfec05a9e65909b?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/5248711/alex"}, "reply_to_user": {"reputation": 4121, "user_id": 2098932, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/BBJGp.jpg?s=128&g=1", "display_name": "Logicrat", "link": "https://stackoverflow.com/users/2098932/logicrat"}, "edited": false, "score": 0, "creation_date": 1452109264, "post_id": 34640914, "comment_id": 57028404, "body": "@Logicrat - That was just for testing, but thanks for the heads up"}, {"owner": {"reputation": 98775, "user_id": 421195, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9a9793fdeb3b94e185c8c99c0238372f?s=128&d=identicon&r=PG", "display_name": "paulsm4", "link": "https://stackoverflow.com/users/421195/paulsm4"}, "edited": false, "score": 0, "creation_date": 1452112294, "post_id": 34640914, "comment_id": 57030329, "body": "See also: <a href=\"http://stackoverflow.com/a/236803/421195\">Split a string in C++?</a>"}], "answers": [{"comments": [{"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 1, "creation_date": 1452109770, "post_id": 34641174, "comment_id": 57028751, "body": "<a href=\"http://coliru.stacked-crooked.com/a/d092549929aa1898\" rel=\"nofollow noreferrer\">Live Demo</a> of your code in action."}, {"owner": {"reputation": 117, "user_id": 5248711, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e41982fa99483eac7bfec05a9e65909b?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/5248711/alex"}, "edited": false, "score": 0, "creation_date": 1452111037, "post_id": 34641174, "comment_id": 57029555, "body": "Thanks , the code does work fine , but i improperly formulated my question the first time. meanwhile i edited the initial question , see the last part regarding what i am trying to achieve in the now-edited initial question , in case you have any  ideea"}, {"owner": {"reputation": 18687, "user_id": 3552770, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b0404d5b5bd565aa720c6b3d190716b3?s=128&d=identicon&r=PG", "display_name": "LogicStuff", "link": "https://stackoverflow.com/users/3552770/logicstuff"}, "reply_to_user": {"reputation": 117, "user_id": 5248711, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e41982fa99483eac7bfec05a9e65909b?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/5248711/alex"}, "edited": false, "score": 0, "creation_date": 1452111492, "post_id": 34641174, "comment_id": 57029848, "body": "@Alex Instead of printing <code>output</code>, you push it into a <code>std::vector&lt;std::string&gt;</code> re-created each iteration of the outer loop, then check its size, using <a href=\"http://en.cppreference.com/w/cpp/string/basic_string/stol\" rel=\"nofollow noreferrer\">these functions</a>, if you need to convert <code>std::string</code> to integer."}, {"owner": {"reputation": 18687, "user_id": 3552770, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b0404d5b5bd565aa720c6b3d190716b3?s=128&d=identicon&r=PG", "display_name": "LogicStuff", "link": "https://stackoverflow.com/users/3552770/logicstuff"}, "reply_to_user": {"reputation": 117, "user_id": 5248711, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e41982fa99483eac7bfec05a9e65909b?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/5248711/alex"}, "edited": false, "score": 0, "creation_date": 1452111530, "post_id": 34641174, "comment_id": 57029876, "body": "@Alex And it could be done in a sightly different way, overloading <code>operator&gt;&gt;</code> for <code>Imp</code>."}, {"owner": {"reputation": 117, "user_id": 5248711, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e41982fa99483eac7bfec05a9e65909b?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/5248711/alex"}, "edited": false, "score": 0, "creation_date": 1452112104, "post_id": 34641174, "comment_id": 57030228, "body": "@LogicStuff Thanks. The vector part i should be able to pull off , found the documentation for it (<a href=\"http://www.cplusplus.com/reference/vector/vector/\" rel=\"nofollow noreferrer\">cplusplus.com/reference/vector/vector</a>) , so i should be good. As far as overloading, i haven`t tried that in C++ , need to investigate that further. Marked your answer as correct, thanks a lot for the help."}], "tags": [], "owner": {"reputation": 18687, "user_id": 3552770, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b0404d5b5bd565aa720c6b3d190716b3?s=128&d=identicon&r=PG", "display_name": "LogicStuff", "link": "https://stackoverflow.com/users/3552770/logicstuff"}, "is_accepted": true, "score": 3, "last_activity_date": 1452109092, "last_edit_date": 1495541721, "creation_date": 1452108379, "answer_id": 34641174, "question_id": 34640914, "link": "https://stackoverflow.com/questions/34640914/how-to-read-and-process-text-from-a-file-in-this-specific-way/34641174#34641174", "title": "How to read and process text from a file in this specific way?", "body": "<p>Don't use <code>char</code> array for buffer, and <a href=\"https://stackoverflow.com/questions/5605125/why-is-iostreameof-inside-a-loop-condition-considered-wrong\">don't use <code>std::istream::eof</code></a>. That's been said, let's continue in solving the problem.</p>\n\n<p><a href=\"http://en.cppreference.com/w/cpp/string/basic_string/getline\" rel=\"nofollow noreferrer\"><code>std::getline</code></a> is simmilar to <a href=\"http://en.cppreference.com/w/cpp/io/basic_istream/getline\" rel=\"nofollow noreferrer\"><code>std::istream::getline</code></a>, except that it uses <code>std::string</code> instead of <code>char</code> arrays.</p>\n\n<p>In both, the parameter <code>delim</code> means a delimiting character, but in a way that it's the character, which when encountered, <code>std::getline</code> stops reading (does not save it and discards it). It does not mean a delimiter in a way that it will magically split the input for you between each <code>;</code> on the whole line.</p>\n\n<p>Thus, you'll have to do this:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;sstream&gt;\n#include &lt;string&gt;\n\n...\n\nstd::ifstream myFile(\"D:\\\\stuff.txt\"); // one statement\n\nif (myFile.is_open()) {\n    std::string line;\n\n    while (std::getline(myFile, line)) { // line by line reading\n        std::istringstream line_stream(line);\n        std::string output;\n\n        while (std::getline(line_stream, output, ';')) // line parsing\n            std::cout &lt;&lt; output &lt;&lt; std::endl;\n    }\n}\n</code></pre>\n\n<p>We construct a <code>std::istringstream</code> from <code>line</code>, so we can parse it again with <code>std::getline</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 98775, "user_id": 421195, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9a9793fdeb3b94e185c8c99c0238372f?s=128&d=identicon&r=PG", "display_name": "paulsm4", "link": "https://stackoverflow.com/users/421195/paulsm4"}, "is_accepted": false, "score": 1, "last_activity_date": 1452113509, "creation_date": 1452113509, "answer_id": 34642521, "question_id": 34640914, "link": "https://stackoverflow.com/questions/34640914/how-to-read-and-process-text-from-a-file-in-this-specific-way/34642521#34642521", "title": "How to read and process text from a file in this specific way?", "body": "<p>One other (slightly different) alternative:</p>\n\n<pre><code>/*\n * Sample output:\n *   line:Imp;1;down;67\n *     \"Imp\", \"1\", \"down\", \"67\"\n *   line:Comp;3;up;4\n *     \"Comp\", \"3\", \"up\", \"4\"\n *   line:Imp;42;right;87\n *     \"Imp\", \"42\", \"right\", \"87\"\n *   line:Imp;42;right;87\n *     \"Imp\", \"42\", \"right\", \"87\"\n */\n#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;sstream&gt;\n#include &lt;string&gt;\n#include &lt;vector&gt;\n\nusing namespace std;\n\nvoid split(const std::string &amp;s, char delim, std::vector&lt;string&gt; &amp;fields)\n{\n    fields.clear();\n    std::stringstream ss(s);\n    std::string item;\n    while (std::getline(ss, item, delim)) {\n        fields.push_back(item);\n    }\n}\n\nvoid print (std::vector&lt;string&gt; &amp;fields)\n{\n  cout &lt;&lt; \"  \";\n  for (size_t i = 0; i &lt; fields.size() - 1; i++)\n    cout &lt;&lt; \"\\\"\" &lt;&lt; fields[i] &lt;&lt; \"\\\", \";\n  cout &lt;&lt; \"\\\"\" &lt;&lt; fields[fields.size()-1] &lt;&lt; \"\\\"\" &lt;&lt; endl;\n}\n\nint main ()\n{\n  std::ifstream fp(\"tmp.txt\");\n  std::string line;\n  while (!fp.eof()) {\n    fp &gt;&gt; line;\n    cout &lt;&lt; \"line:\" &lt;&lt; line &lt;&lt; endl;\n    std::vector&lt;std::string&gt; fields;\n    split(line, ';', fields);\n    print(fields);\n  }\n  fp.close();\n  return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 117, "user_id": 5248711, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e41982fa99483eac7bfec05a9e65909b?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/5248711/alex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 641, "favorite_count": 0, "accepted_answer_id": 34641174, "answer_count": 2, "score": 0, "last_activity_date": 1452113509, "creation_date": 1452107580, "last_edit_date": 1452110871, "question_id": 34640914, "link": "https://stackoverflow.com/questions/34640914/how-to-read-and-process-text-from-a-file-in-this-specific-way", "title": "How to read and process text from a file in this specific way?", "body": "<p>I have a question regarding some code to process some names or numbers from a file I'm reading. So the text in the file looks like this:</p>\n\n<pre><code>Imp;1;down;67\nComp;3;up;4\nImp;42;right;87\n</code></pre>\n\n<p>As you can see , there are 3 lines with words and numbers delimited by the character ';' . I want to read each line at a time, and split the entire string in one line into the words and numbers , and then process the information (will be used to create a new object with the data). Then move on to the next line, and so on, until EOF.</p>\n\n<p>So, i want to read the first line of text, split it into an array of strings formed out of the words and numbers in the line , then create an object of a class out of them. For example for the first line , create an object of the class Imp like this <code>Imp objImp(Imp, 1, down, 67)</code> . </p>\n\n<p>In Java i did the same thing using <code>information = line.split(\";\")'</code> (where line was a line of text) and then used <code>information[0]</code>, <code>information[1]</code> to access the members of the string array and create the object. I`m trying to do the same here</p>\n"}, {"tags": ["c++", "c++11", "visual-c++"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 2, "creation_date": 1452107225, "post_id": 34640774, "comment_id": 57027087, "body": "That stuff is all orthogonal. No way to give concise and correct answers."}, {"owner": {"reputation": 13, "user_id": 5748987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0435d1bc2e9dccb33c47b22840e26a6b?s=128&d=identicon&r=PG", "display_name": "CodeWriter", "link": "https://stackoverflow.com/users/5748987/codewriter"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1452107334, "post_id": 34640774, "comment_id": 57027159, "body": "I don&#39;t understand your use of orthogonal.  The memory overhead of each implementation should be an understood component, but I wasn&#39;t able to find any documentation regarding where or how much is involved per pointer.  Also, if there are methods for controlling when GC happens in each environment, it would be useful to control the performance of the program."}, {"owner": {"reputation": 98775, "user_id": 421195, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9a9793fdeb3b94e185c8c99c0238372f?s=128&d=identicon&r=PG", "display_name": "paulsm4", "link": "https://stackoverflow.com/users/421195/paulsm4"}, "edited": false, "score": 2, "creation_date": 1452107346, "post_id": 34640774, "comment_id": 57027165, "body": "You&#39;re really better off thinking of MS CLI and standard C++ as two completely different languages; intended to run in two completely different environments.  IMHO..."}, {"owner": {"reputation": 239269, "user_id": 464709, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ab3363d257d780bd4c1f0c844b020a2?s=128&d=identicon&r=PG", "display_name": "Fr&#233;d&#233;ric Hamidi", "link": "https://stackoverflow.com/users/464709/fr%c3%a9d%c3%a9ric-hamidi"}, "edited": false, "score": 0, "creation_date": 1452107348, "post_id": 34640774, "comment_id": 57027167, "body": "<i>Both seem to support automatic garbage collection through the use of reference counting</i>. Do you believe CLR managed objects use <i>reference counting</i>?"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 2, "creation_date": 1452107418, "post_id": 34640774, "comment_id": 57027214, "body": "@CodeWriter Read <i>in no way comparable</i>."}, {"owner": {"reputation": 2357, "user_id": 4074081, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/emDh4.png?s=128&g=1", "display_name": "dewaffled", "link": "https://stackoverflow.com/users/4074081/dewaffled"}, "reply_to_user": {"reputation": 239269, "user_id": 464709, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ab3363d257d780bd4c1f0c844b020a2?s=128&d=identicon&r=PG", "display_name": "Fr&#233;d&#233;ric Hamidi", "link": "https://stackoverflow.com/users/464709/fr%c3%a9d%c3%a9ric-hamidi"}, "edited": false, "score": 0, "creation_date": 1452107496, "post_id": 34640774, "comment_id": 57027274, "body": "@Fr&#233;d&#233;ricHamidi linked articles says so: <i>The compiler uses the COM reference counting mechanism</i>"}, {"owner": {"reputation": 239269, "user_id": 464709, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ab3363d257d780bd4c1f0c844b020a2?s=128&d=identicon&r=PG", "display_name": "Fr&#233;d&#233;ric Hamidi", "link": "https://stackoverflow.com/users/464709/fr%c3%a9d%c3%a9ric-hamidi"}, "reply_to_user": {"reputation": 2357, "user_id": 4074081, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/emDh4.png?s=128&g=1", "display_name": "dewaffled", "link": "https://stackoverflow.com/users/4074081/dewaffled"}, "edited": false, "score": 0, "creation_date": 1452107590, "post_id": 34640774, "comment_id": 57027345, "body": "@frymode, on the WIndows Runtime, not on the CLR (scroll down)."}], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "is_accepted": false, "score": 1, "last_activity_date": 1452107917, "creation_date": 1452107917, "answer_id": 34641023, "question_id": 34640774, "link": "https://stackoverflow.com/questions/34640774/what-are-the-significant-memory-and-gc-differences-between-visual-studios-hat-o/34641023#34641023", "title": "What are the significant memory and GC differences between Visual Studio&#39;s hat operator and C++ shared_ptr?", "body": "<p>Garbage Collection and Reference Counting are fundamentally different techniques. However, comparing C++/cli and C++, the most important difference is determent deallocation/destruction. With GC you have none, without (plain C++) you have (regardless if you use a shared pointer or not)   </p>\n"}, {"tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": true, "score": 2, "last_activity_date": 1452114519, "creation_date": 1452114519, "answer_id": 34642761, "question_id": 34640774, "link": "https://stackoverflow.com/questions/34640774/what-are-the-significant-memory-and-gc-differences-between-visual-studios-hat-o/34642761#34642761", "title": "What are the significant memory and GC differences between Visual Studio&#39;s hat operator and C++ shared_ptr?", "body": "<p><code>^</code> does not use reference counting, at least not solely.</p>\n\n<p><code>^</code> handles circular references.  So if <code>A</code> has a <code>^</code> to <code>B</code>, and <code>B</code> has a <code>^</code> to <code>A</code>, and nobody else has a <code>^</code> to either, they will be cleaned up (eventually).</p>\n\n<p><code>^</code> is also a non-deterministic collector of garbage.  There are little to no guarantees about when unreachable objects will be cleaned up.</p>\n\n<p><code>shared_ptr</code> is a reference counting smart pointer.  When every <code>shared_ptr</code> using that reference counting block reaches zero, the delete action is taken.</p>\n\n<p>If you have <code>A</code> with a <code>shared_ptr&lt;B&gt;</code>, and that <code>B</code> has a <code>shared_ptr&lt;A&gt;</code> back to <code>A</code>, then the two will happily exist forever.</p>\n\n<p>At program shutdown, if the delete action cleans up in-process memory resources, they will be cleaned up.  If the delete action does something else, it will not ever be invoked (without manually breaking the loop).</p>\n\n<p><code>shared_ptr</code> simply states that everyone who has a copy of it has equal ownership rights over the thing in question.  When the last owner gives up its rights, at that point the delete code (which can do almost anything) is run.</p>\n\n<p>As such, destruction is deterministic (if somewhat tricky to determine when it happens locally).</p>\n\n<p>For memory based resources, where objects own nothing of interest except memory, <code>^</code> style memory management isn't horrible.  But once you are owning resources that <em>are not</em> memory (are \"more expensive\", like file handles, network connections, threads, etc), you cannot casually let them hang around.</p>\n\n<p>So <code>^</code> based lifetime management doesn't work anymore.</p>\n\n<p><code>shared_ptr</code> based lifetime management does a bit better, but it still less than ideal, as tracking down effective resource leaks (where a resource lifetime is longer than it should be, ideally) is still a pain with shared ownership of lifetime.</p>\n\n<p><code>unique_ptr</code>, with its single point of responsibility, makes tracking down the lifetime issue of things easier.</p>\n\n<p>In short, <code>^</code> is great when you have nearly infinite resources and don't care if they leak for a while before cleaning up.  <code>shared_ptr</code> is great when you have a strict understanding of shared ownership (you understand who exactly should be sharing ownership, and who should have weak ownership, etc).  <code>unique_ptr</code> and actual value-based data is best when you actually have resources whose lifetime should be well controlled.</p>\n"}], "owner": {"reputation": 13, "user_id": 5748987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0435d1bc2e9dccb33c47b22840e26a6b?s=128&d=identicon&r=PG", "display_name": "CodeWriter", "link": "https://stackoverflow.com/users/5748987/codewriter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 123, "favorite_count": 0, "accepted_answer_id": 34642761, "answer_count": 2, "score": 0, "last_activity_date": 1452114519, "creation_date": 1452107127, "question_id": 34640774, "link": "https://stackoverflow.com/questions/34640774/what-are-the-significant-memory-and-gc-differences-between-visual-studios-hat-o", "title": "What are the significant memory and GC differences between Visual Studio&#39;s hat operator and C++ shared_ptr?", "body": "<p>Aside from cross-platform, cross-compiler compatibility, what are the significant differences between Microsoft Visual C++ (C++ Component Extensions) Handle to Object Operator (^) and C++ 11 std::shared_ptr?</p>\n\n<p>Both seem to support automatic garbage collection through the use of reference counting and I would assume require some additional memory to track this information.  Is this extra memory overhead significant and does it differ greatly between the two implementations?</p>\n\n<p>Additionally, are there ways to manage when the garbage collection occurs in either the MS C++ Component Extensions or C++ 11 environments to prevent stalling at undesirable times?</p>\n\n<p>MSDN Documentation:\n<a href=\"https://msdn.microsoft.com/en-us/library/yk97tc08.aspx\" rel=\"nofollow\">Handle to Object Operator (^) (C++ Component Extensions)</a></p>\n\n<p>C++ 11 smart_ptr: <a href=\"http://www.cplusplus.com/reference/memory/shared_ptr/\" rel=\"nofollow\">std::shared_ptr</a></p>\n"}, {"tags": ["c++", "mysql"], "answers": [{"tags": [], "owner": {"reputation": 1497, "user_id": 4987223, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0850ea3162cafc96ef345404cf7dcca0?s=128&d=identicon&r=PG&f=1", "display_name": "vmachan", "link": "https://stackoverflow.com/users/4987223/vmachan"}, "is_accepted": false, "score": 2, "last_activity_date": 1452107682, "creation_date": 1452107682, "answer_id": 34640957, "question_id": 34640766, "link": "https://stackoverflow.com/questions/34640766/mysql-num-rows-is-always-returning-0/34640957#34640957", "title": "mysql_num_rows is always returning 0", "body": "<p>Try showing the number of records after the while loop like below</p>\n\n<pre><code>printf(\"Rows: %d\\n\", mysql_num_rows(res));\n\nwhile ((row = mysql_fetch_row(res)) != NULL)\n    printf(\"Row1: %s | Row2: %s | Row3: %s \\n\", row[0], row[1], row[2]);\n\nprintf(\"Rows: %d\\n\", mysql_num_rows(res));\n</code></pre>\n\n<p>As per the <a href=\"http://dev.mysql.com/doc/refman/5.7/en/mysql-num-rows.html\" rel=\"nofollow\">documentation</a>, when you use <code>mysql_use_result</code>, the <code>mysql_num_rows</code> does not give you the proper number until <em>after</em> you have processed the records. To get it before you would need to use <code>mysql_store_result</code>.</p>\n\n<p>Hope this helps</p>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 5753931, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57e38fb404efd0be8923ddd1ae546ef4?s=128&d=identicon&r=PG&f=1", "display_name": "Hexaflexagon", "link": "https://stackoverflow.com/users/5753931/hexaflexagon"}, "is_accepted": true, "score": 1, "last_activity_date": 1452110538, "creation_date": 1452110538, "answer_id": 34641742, "question_id": 34640766, "link": "https://stackoverflow.com/questions/34640766/mysql-num-rows-is-always-returning-0/34641742#34641742", "title": "mysql_num_rows is always returning 0", "body": "<p>i fixed the Problem with a cast to int and mysql_store_result!</p>\n\n<pre><code>printf(\"Rows: %d\\n\", (int)mysql_num_rows(res));\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 5753931, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57e38fb404efd0be8923ddd1ae546ef4?s=128&d=identicon&r=PG&f=1", "display_name": "Hexaflexagon", "link": "https://stackoverflow.com/users/5753931/hexaflexagon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 400, "favorite_count": 0, "accepted_answer_id": 34641742, "answer_count": 2, "score": 1, "last_activity_date": 1452110538, "creation_date": 1452107093, "question_id": 34640766, "link": "https://stackoverflow.com/questions/34640766/mysql-num-rows-is-always-returning-0", "title": "mysql_num_rows is always returning 0", "body": "<p>I use mysql_num_rows and this function returns always 0</p>\n\n<p>This is my Code:</p>\n\n<pre><code>#include &lt;mysql/mysql.h&gt;\nMYSQL *conn;\nMYSQL_RES *res;\nMYSQL_ROW row;\n\nconn = mysql_init(NULL);\n\nif (!mysql_real_connect(conn, \"\", \"\", \"\", \"\", 0, NULL, 0)) {\n  fprintf(stderr, \"%s\\n\", mysql_error(conn));\n  exit(1);\n}\n\nif (mysql_query(conn, \"SELECT * FROM TEST\"))\n{\n  printf(\"MySQL query error : %s\\n\", mysql_error(conn));\n  exit(1);\n}\n\nres = mysql_use_result(conn);\n\nprintf(\"Rows: %d\\n\", mysql_num_rows(res));\n\nwhile ((row = mysql_fetch_row(res)) != NULL)\n    printf(\"Row1: %s | Row2: %s | Row3: %s \\n\", row[0], row[1], row[2]);\n\nmysql_free_result(res);\nmysql_close(conn);\n</code></pre>\n\n<p>And this is the Output</p>\n\n<pre><code>Rows: 0\nRow1: 1 | Row2: 127.0.0.1 | Row3: Raspberry\nRow1: 2 | Row2: 127.0.0.1 | Row3: Raspberry\n</code></pre>\n\n<p>MySQL client version: 5.5.44</p>\n"}, {"tags": ["android", "c++", "android-ndk", "java-native-interface"], "comments": [{"owner": {"reputation": 18759, "user_id": 2226988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c6fbec3a71b2e95e4a6e41478deb379?s=128&d=identicon&r=PG", "display_name": "Tom Blodget", "link": "https://stackoverflow.com/users/2226988/tom-blodget"}, "edited": false, "score": 0, "creation_date": 1452215096, "post_id": 34640742, "comment_id": 57081599, "body": "What&#39;s the character set and encoding for your strings? <code>NewStringUTF </code> expects <i>modified</i> UTF-8."}], "answers": [{"comments": [{"owner": {"reputation": 644, "user_id": 801562, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/aaf06dd93ce5ae968c0c9534a9143f20?s=128&d=identicon&r=PG", "display_name": "jeff", "link": "https://stackoverflow.com/users/801562/jeff"}, "edited": false, "score": 0, "creation_date": 1452152892, "post_id": 34642497, "comment_id": 57044892, "body": "This is easier. Thanks @Doron Yakovlev-Golani"}], "tags": [], "owner": {"reputation": 4420, "user_id": 4851751, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tOGRH.jpg?s=128&g=1", "display_name": "Doron Yakovlev-Golani", "link": "https://stackoverflow.com/users/4851751/doron-yakovlev-golani"}, "is_accepted": true, "score": 1, "last_activity_date": 1452113392, "last_edit_date": 1495541373, "creation_date": 1452113392, "answer_id": 34642497, "question_id": 34640742, "link": "https://stackoverflow.com/questions/34640742/return-vectorstring-from-c-to-java/34642497#34642497", "title": "Return vector&lt;string&gt; from c++ to Java", "body": "<p>1) It would be easier to use an array and not a vector:</p>\n\n<pre><code>    public static native String[] getData(String input);\n</code></pre>\n\n<p>2) Lets assume your Java package name is com.example.jeff and you have a class named MyCppFacade that contains getData(). You need to create a C++ file that contains this function:</p>\n\n<pre><code>    extern \"C\" jobjectArray Java_com_example_jeff_MyCppFacade_getData(\n    JNIEnv* env, jobject obj, jstring input)\n    {\n         jobjectArray result;\n         ...\n         return result;\n    }\n</code></pre>\n\n<p>3) To create your string array you could look at <a href=\"https://stackoverflow.com/questions/6047166/return-a-string-array-on-a-jni-method\">Return a String array on a JNI method</a>. </p>\n"}, {"comments": [{"owner": {"reputation": 644, "user_id": 801562, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/aaf06dd93ce5ae968c0c9534a9143f20?s=128&d=identicon&r=PG", "display_name": "jeff", "link": "https://stackoverflow.com/users/801562/jeff"}, "edited": false, "score": 0, "creation_date": 1452140622, "post_id": 34643592, "comment_id": 57040225, "body": "jmethodID constructor = env-&gt;GetMethodID(clsVec, &quot;&lt;init&gt;&quot;, &quot;()V&quot;);  Can you please explain what does &quot;()V&quot; mean?"}, {"owner": {"reputation": 644, "user_id": 801562, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/aaf06dd93ce5ae968c0c9534a9143f20?s=128&d=identicon&r=PG", "display_name": "jeff", "link": "https://stackoverflow.com/users/801562/jeff"}, "edited": false, "score": 0, "creation_date": 1452152932, "post_id": 34643592, "comment_id": 57044902, "body": "Thanks @luskan for helping me out"}, {"owner": {"reputation": 44381, "user_id": 471160, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/9Z23A.jpg?s=128&g=1", "display_name": "marcinj", "link": "https://stackoverflow.com/users/471160/marcinj"}, "reply_to_user": {"reputation": 644, "user_id": 801562, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/aaf06dd93ce5ae968c0c9534a9143f20?s=128&d=identicon&r=PG", "display_name": "jeff", "link": "https://stackoverflow.com/users/801562/jeff"}, "edited": false, "score": 1, "creation_date": 1452157194, "post_id": 34643592, "comment_id": 57046999, "body": "@jeff this is a signature for constructor, <code>()</code> means zero parameters, and <code>V</code> means returns void. Constructors have no return values, but <code>GetMethodID</code> requires specifying <code>&lt;init&gt;</code> as method name and void <code>V</code> as return type to get constructor."}], "tags": [], "owner": {"reputation": 44381, "user_id": 471160, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/9Z23A.jpg?s=128&g=1", "display_name": "marcinj", "link": "https://stackoverflow.com/users/471160/marcinj"}, "is_accepted": false, "score": 2, "last_activity_date": 1452117445, "creation_date": 1452117445, "answer_id": 34643592, "question_id": 34640742, "link": "https://stackoverflow.com/questions/34640742/return-vectorstring-from-c-to-java/34643592#34643592", "title": "Return vector&lt;string&gt; from c++ to Java", "body": "<p>You should use <a href=\"http://docs.oracle.com/javase/7/docs/technotes/tools/windows/javah.html\" rel=\"nofollow\">javah</a> to generate declaration header for your functions. Assuming method <code>GetData</code> is located in class <code>com.example.hellojni.HelloJni</code> it would be:</p>\n\n<pre><code>#ifdef __cplusplus\nextern \"C\" {\n#endif\n/*\n * Class:     com_example_hellojni_HelloJni\n * Method:    GetData\n * Signature: (Ljava/lang/String;)Ljava/util/Vector;\n */\nJNIEXPORT jobject JNICALL Java_com_example_hellojni_HelloJni_GetData\n  (JNIEnv *, jclass, jstring);\n\n#ifdef __cplusplus\n}\n</code></pre>\n\n<p>then in you implementation file (ie. test.cpp):</p>\n\n<pre><code>JNIEXPORT jobject JNICALL Java_com_example_hellojni_HelloJni_GetData(JNIEnv *env , jclass, jstring str) {\n\n  // Find Class for Vector\n  jclass clsVec = env-&gt;FindClass(\"java/util/Vector\");\n\n  // Get its constructor method\n  jmethodID constructor = env-&gt;GetMethodID(clsVec, \"&lt;init&gt;\", \"()V\");\n\n  // Create new Vector object\n  jobject objVec = env-&gt;NewObject(clsVec, constructor, \"\");\n\n  // Get addElement method\n  jmethodID vecAdd = env-&gt;GetMethodID(clsVec, \"addElement\", \"(Ljava/lang/Object;)V\");\n\n  // Add new string (created locally)\n  jstring retStr = env-&gt;NewStringUTF(\"Whatever\");\n  env-&gt;CallVoidMethod(objVec, vecAdd, retStr);\n\n  // Add string from parameter\n  env-&gt;CallVoidMethod(objVec, vecAdd, str);\n\n  // Always release local references.\n  env-&gt;DeleteLocalRef(clsVec);\n\n  return objVec;\n}\n</code></pre>\n"}], "owner": {"reputation": 644, "user_id": 801562, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/aaf06dd93ce5ae968c0c9534a9143f20?s=128&d=identicon&r=PG", "display_name": "jeff", "link": "https://stackoverflow.com/users/801562/jeff"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1825, "favorite_count": 0, "accepted_answer_id": 34642497, "answer_count": 2, "score": 0, "last_activity_date": 1452117445, "creation_date": 1452107012, "question_id": 34640742, "link": "https://stackoverflow.com/questions/34640742/return-vectorstring-from-c-to-java", "title": "Return vector&lt;string&gt; from c++ to Java", "body": "<p>I am trying to learn android ndk. Below is my Java method :</p>\n\n<pre><code>public static native Vector&lt;String&gt;     GetData(String input) ;\n</code></pre>\n\n<p>'input'(input parameter) will go to the c++ native method which will return a vector. How do I implement the c++ side of the method? </p>\n"}, {"tags": ["c++", "visual-studio", "directx", "directx-11"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 2, "creation_date": 1452106826, "post_id": 34640649, "comment_id": 57026871, "body": "<code>0xCDCDCDCD</code> usually indicates you are dereferncing an uninitalized pointer. Without seeing your code this question can&#39;t be really answered."}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 0, "creation_date": 1452106976, "post_id": 34640649, "comment_id": 57026948, "body": "Please <a href=\"https://stackoverflow.com/posts/34640649/edit\">edit</a> your question to include a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> so we can actually reproduce the problem."}, {"owner": {"reputation": 131, "user_id": 5555369, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd99bdc71fe76f358e04570c65002c4c?s=128&d=identicon&r=PG&f=1", "display_name": "SSFox", "link": "https://stackoverflow.com/users/5555369/ssfox"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1452110085, "post_id": 34640649, "comment_id": 57028944, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 the error is only occuring because hr has not succeeded - my problem relies on D3D11CreateDeviceSwapChain succeeding."}, {"owner": {"reputation": 131, "user_id": 5555369, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd99bdc71fe76f358e04570c65002c4c?s=128&d=identicon&r=PG&f=1", "display_name": "SSFox", "link": "https://stackoverflow.com/users/5555369/ssfox"}, "edited": false, "score": 0, "creation_date": 1452110128, "post_id": 34640649, "comment_id": 57028969, "body": "Code does run fine on another system using identical VisualStudio, so I&#39;m not sure what&#39;s causing this issue"}], "answers": [{"tags": [], "owner": {"reputation": 460, "user_id": 5408918, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/83dbde93fdcbfdf59e1d65d8ceae946e?s=128&d=identicon&r=PG&f=1", "display_name": "Muhammad Zeeshan", "link": "https://stackoverflow.com/users/5408918/muhammad-zeeshan"}, "is_accepted": false, "score": 0, "last_activity_date": 1452203256, "last_edit_date": 1495541722, "creation_date": 1452203256, "answer_id": 34665770, "question_id": 34640649, "link": "https://stackoverflow.com/questions/34640649/directx11-project-failing-on-runtime-0xcdcdcdcd/34665770#34665770", "title": "DirectX11 project failing on Runtime - 0xCDCDCDCD", "body": "<p>You are unable to create device and swapchain which is compulsory for any sort of work  i.e drawing. \nIt seems like you have a problem in selected driver type</p>\n\n<p>Kindly read details about driver types here <a href=\"https://stackoverflow.com/questions/12703228/whats-the-difference-between-warp-drivers-reference-drivers-and-software-driver\">What&#39;s the difference between WARP drivers,reference drivers and software drivers?</a></p>\n"}], "owner": {"reputation": 131, "user_id": 5555369, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd99bdc71fe76f358e04570c65002c4c?s=128&d=identicon&r=PG&f=1", "display_name": "SSFox", "link": "https://stackoverflow.com/users/5555369/ssfox"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 54, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1452203256, "creation_date": 1452106648, "last_edit_date": 1452109998, "question_id": 34640649, "link": "https://stackoverflow.com/questions/34640649/directx11-project-failing-on-runtime-0xcdcdcdcd", "title": "DirectX11 project failing on Runtime - 0xCDCDCDCD", "body": "<pre><code>for (UINT driverTypeIndex = 0; driverTypeIndex &lt; numDriverTypes; driverTypeIndex++)\n    {\n        _driverType = driverTypes[driverTypeIndex];\n        hr = D3D11CreateDeviceAndSwapChain(nullptr, _driverType, nullptr, createDeviceFlags, featureLevels, numFeatureLevels,\n                                           D3D11_SDK_VERSION, &amp;sd, &amp;_pSwapChain, &amp;_pd3dDevice, &amp;_featureLevel, &amp;_pImmediateContext);\n        if (SUCCEEDED(hr))\n            break;\n    }\n</code></pre>\n\n<p>D3D11CreateDeviceSwapChain returns to hr a value that has not succeeded, which is causing me to not break out of the for loop</p>\n\n<p><code>hr</code> fails the for loop/driver check on all versions of project, even though it only started happening within the last 1-2 iterations.</p>\n\n<p>Any help is appreciated.</p>\n"}, {"tags": ["c++", "objective-c", "variables", "syntax", "setter"], "comments": [{"owner": {"reputation": 2640, "user_id": 5195699, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f85291bb71f55981b1d412f1efcb7603?s=128&d=identicon&r=PG&f=1", "display_name": "R_Kapp", "link": "https://stackoverflow.com/users/5195699/r-kapp"}, "edited": false, "score": 1, "creation_date": 1452106665, "post_id": 34640612, "comment_id": 57026777, "body": "Best I can come up with is to create a custom class for <code>_intVar</code> that defines an <code>operator++</code> which calls <code>setIntVar</code>. That&#39;s rather clunky, though."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 0, "creation_date": 1452106901, "post_id": 34640612, "comment_id": 57026906, "body": "MSVC has an (icompatible) C++ extension for properties: <a href=\"https://msdn.microsoft.com/en-us/library/yhfk0thd.aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/yhfk0thd.aspx</a>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 2, "creation_date": 1452107311, "post_id": 34640612, "comment_id": 57027153, "body": "You may read: <a href=\"http://seanmiddleditch.com/why-c-does-not-need-c-like-properties/\" rel=\"nofollow noreferrer\">seanmiddleditch.com/why-c-does-not-need-c-like-properties</a>"}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1452108390, "post_id": 34640612, "comment_id": 57027832, "body": "A commonly used approach is to have proxy objects that stand in for the real value. The proxy object can be accessed by value, but is not an integer; it only acts as an integer would: you can set it, or get its value, but it intercepts any such accesses. See the <code>DProxy</code> template in <a href=\"http://stackoverflow.com/a/31574917/1329652\">this answer</a> for an example."}], "owner": {"reputation": 14714, "user_id": 547214, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/50e7ed4eb2e7af000ea7d161748958f1?s=128&d=identicon&r=PG", "display_name": "Alex Gray", "link": "https://stackoverflow.com/users/547214/alex-gray"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 45, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1452106479, "creation_date": 1452106479, "question_id": 34640612, "link": "https://stackoverflow.com/questions/34640612/how-to-enforce-automatically-use-a-c-setter-method-like-objc", "title": "How to enforce/automatically use a C++ setter method? (like ObjC)", "body": "<p>In <code>Objective-C</code>, it is possible to use <code>@properties</code> that run a setter method (as specified by the implementation) when using a simple increment (<code>++</code>) call on an instance's value for that property.  Here's an example...</p>\n\n<pre><code>@import Foundation;\n\n@interface Z : NSObject \n@property (nonatomic) int intVar; \n@end\n\n@implementation Z\n\n- (void) setIntVar:(int)i {\n    printf(\"intVar is now %i.\\n\", _intVar = i); \n    // I could do other things here, too.\n}\n@end\n\nint main() { Z *z = Z.new; z.intVar++; }\n</code></pre>\n\n<blockquote>\n  <p><code>intVar is now 1.</code></p>\n</blockquote>\n\n<p>I am new to <code>C++</code>, but have been unable (as of yet) to find a way to recreate this behavior with <code>class</code> \"member variables\".  For example...</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nclass X {\n\n    public:\n        void setIntVar(int x) { printf(\"setting intvar to: %i\\n\", _intVar = x); }\n        int _intVar;\n};\n\nX instanceOfX;\n\nint main() {\n\n    instanceOfX._intVar++;\n    printf(\"X's intvar is %i\\n\", instanceOfX._intVar);\n    instanceOfX.setIntVar(instanceOfX._intVar + 1);\n}\n</code></pre>\n\n<blockquote>\n  <p><code>X's intvar is 1</code></p>\n  \n  <p><code>setting intvar to: 2</code></p>\n</blockquote>\n\n<p>The difference is subtle, but I am just wondering if there is a way to enforce the setter for incrementing (or setting, even), without making the variable private.</p>\n"}, {"tags": ["c++", "wstring"], "comments": [{"owner": {"reputation": 948, "user_id": 5582546, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/zrDdD.jpg?s=128&g=1", "display_name": "SaeidMo7", "link": "https://stackoverflow.com/users/5582546/saeidmo7"}, "edited": false, "score": 1, "creation_date": 1452106021, "post_id": 34640398, "comment_id": 57026362, "body": "Error (active)no instance of overloaded function &quot;swprintf_s&quot; matches the argument list"}, {"owner": {"reputation": 41213, "user_id": 215568, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b05685e6c3945f4bd23bf1f967861aeb?s=128&d=identicon&r=PG", "display_name": "Donnie", "link": "https://stackoverflow.com/users/215568/donnie"}, "edited": false, "score": 1, "creation_date": 1452106064, "post_id": 34640398, "comment_id": 57026389, "body": "You can not do this directly because the underlying buffer isn&#39;t meant to be written to.  Other fields in the string object don&#39;t get correctly updated (like length) even if you force it with creative casting causing weird errors to manifest later."}, {"owner": {"reputation": 678, "user_id": 54745, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/9bb4c4997bcc7a8477271e602f226801?s=128&d=identicon&r=PG", "display_name": "Jason Harrison", "link": "https://stackoverflow.com/users/54745/jason-harrison"}, "edited": false, "score": 0, "creation_date": 1452106225, "post_id": 34640398, "comment_id": 57026500, "body": "<a href=\"http://en.cppreference.com/w/cpp/string/basic_string\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/string/basic_string</a>  The signature for std::wstring::c_str is &quot;const wchar_t * c_str() const;&quot; that means it returns a &quot;const wchar_t *&quot; while swprintf_s wants a &quot;wchar_t *&quot;.  So you should look at a different way to do this."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1452107034, "post_id": 34640398, "comment_id": 57026974, "body": "This sounds like an XY problem.  What are you actually trying to achieve?"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user743382"}, "edited": false, "score": 0, "creation_date": 1452106883, "post_id": 34640686, "comment_id": 57026895, "body": "&quot;So you cannot just cast way the &#39;const&#39;.&quot; -- You can, as of C++11. <code>msg.c_str()</code> is guaranteed to be the same as <code>&amp;msg[0]</code> (provided the string is non-empty)."}, {"owner": {"reputation": 678, "user_id": 54745, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/9bb4c4997bcc7a8477271e602f226801?s=128&d=identicon&r=PG", "display_name": "Jason Harrison", "link": "https://stackoverflow.com/users/54745/jason-harrison"}, "edited": false, "score": 0, "creation_date": 1452106957, "post_id": 34640686, "comment_id": 57026938, "body": "@hvd you are technically correct, but the string.length() will not be updated."}, {"owner": {"reputation": 1064, "user_id": 551967, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/a7a36c264afc0dc84a919dcbf3b92c69?s=128&d=identicon&r=PG", "display_name": "shan", "link": "https://stackoverflow.com/users/551967/shan"}, "edited": false, "score": 0, "creation_date": 1609917569, "post_id": 34640686, "comment_id": 115967966, "body": "@CS Pei There is a syntax error in your solution. <code>wchar_t * buffer[20];</code> should be changed to <code>wchar_t buffer[20];</code> as we don&#39;t need pointer to array"}, {"owner": {"reputation": 10151, "user_id": 1153165, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/fee10843adffc656f32cdfa67aa425c5?s=128&d=identicon&r=PG", "display_name": "CS Pei", "link": "https://stackoverflow.com/users/1153165/cs-pei"}, "edited": false, "score": 0, "creation_date": 1610127468, "post_id": 34640686, "comment_id": 116043277, "body": "Thanks. you are right. fixed"}], "tags": [], "owner": {"reputation": 10151, "user_id": 1153165, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/fee10843adffc656f32cdfa67aa425c5?s=128&d=identicon&r=PG", "display_name": "CS Pei", "link": "https://stackoverflow.com/users/1153165/cs-pei"}, "is_accepted": false, "score": 0, "last_activity_date": 1610127456, "last_edit_date": 1610127456, "creation_date": 1452106793, "answer_id": 34640686, "question_id": 34640398, "link": "https://stackoverflow.com/questions/34640398/using-wstring-for-swprintf-s-instead-of-wchar-t/34640686#34640686", "title": "Using wstring for swprintf_s instead of wchar_t *", "body": "<p><code>swprintf</code> or <code>swprintf_s</code> writes to the memory pointed by its first parameter. Therefore that parameter cannot be a <code>const</code> char or wchar pointer. But the return value of std::wstring::c_str() is <code>const char*</code> .  So you cannot just cast way the <code>const</code>. As mentioned by Jason, if you break the rule, wstring::size() may not return the right value.</p>\n<p>What you can do is</p>\n<pre><code>wchar_t buffer[20];\n\nswprintf_s(buffer, 20, L&quot;This is a test for using std::wstring&quot;);\n</code></pre>\n<p>If you want a std::wstring, you can just use the constructor, like wstring <code>msg(buffer)</code>.</p>\n"}], "owner": {"reputation": 948, "user_id": 5582546, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/zrDdD.jpg?s=128&g=1", "display_name": "SaeidMo7", "link": "https://stackoverflow.com/users/5582546/saeidmo7"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 4654, "favorite_count": 0, "closed_date": 1452107113, "answer_count": 1, "score": 0, "last_activity_date": 1610127456, "creation_date": 1452105736, "question_id": 34640398, "link": "https://stackoverflow.com/questions/34640398/using-wstring-for-swprintf-s-instead-of-wchar-t", "closed_reason": "Duplicate", "title": "Using wstring for swprintf_s instead of wchar_t *", "body": "<p>How can i use <code>std::wstring</code> variable as argument in to <code>swprintf_s</code> instead <code>wchar_t *</code>? </p>\n\n<p>My code is as below but has error:</p>\n\n<pre><code>#include &lt;string&gt;\n#include &lt;iostream&gt;\nusing namespace std;\n\nint main(){\n    std::wstring     msg(20, 0);\n    swprintf_s( msg.c_str(), 20, L\"This is a test for using std::wstring\");//this line has error\n\n wcout&lt;&lt; msg&lt;&lt; endl;\nreturn 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "reference", "language-lawyer", "c++17"], "comments": [{"owner": {"reputation": 56893, "user_id": 3647361, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/xvjhM.png?s=128&g=1", "display_name": "Columbo", "link": "https://stackoverflow.com/users/3647361/columbo"}, "edited": false, "score": 5, "creation_date": 1452105496, "post_id": 34640215, "comment_id": 57026034, "body": "Aren&#39;t the types in your example reference-related (by being identical), thus satisfying the first bullet point?"}, {"owner": {"reputation": 6126, "user_id": 1042389, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/LgLxA.jpg?s=128&g=1", "display_name": "Belloc", "link": "https://stackoverflow.com/users/1042389/belloc"}, "reply_to_user": {"reputation": 56893, "user_id": 3647361, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/xvjhM.png?s=128&g=1", "display_name": "Columbo", "link": "https://stackoverflow.com/users/3647361/columbo"}, "edited": false, "score": 0, "creation_date": 1452105833, "post_id": 34640215, "comment_id": 57026243, "body": "@Columbo Good catch, tks."}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1452110022, "post_id": 34640215, "comment_id": 57028904, "body": "Cannot reproduce, since the cited paragraph clearly does allow it. Also, this isn&#39;t C++14."}, {"owner": {"reputation": 6126, "user_id": 1042389, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/LgLxA.jpg?s=128&g=1", "display_name": "Belloc", "link": "https://stackoverflow.com/users/1042389/belloc"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1452118065, "post_id": 34640215, "comment_id": 57033380, "body": "@T.C. It does allow it because of the first bullet point, not because of the second, as Columbo precisely told me. Also, I selected <code>C++1z</code>, but somehow it got replaced by C++14. I don&#39;t know why!"}], "owner": {"reputation": 6126, "user_id": 1042389, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/LgLxA.jpg?s=128&g=1", "display_name": "Belloc", "link": "https://stackoverflow.com/users/1042389/belloc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 124, "favorite_count": 0, "closed_date": 1453442129, "answer_count": 0, "score": 3, "last_activity_date": 1452110394, "creation_date": 1452105116, "last_edit_date": 1452110394, "question_id": 34640215, "link": "https://stackoverflow.com/questions/34640215/why-doesnt-the-c-last-draft-allow-a-type-noexcept-function-to-be-reference", "closed_reason": "Not suitable for this site", "title": "Why doesn&#39;t the C++ last draft allow a type &quot;noexcept function&quot; to be reference compatible with a type &quot;noexcept function&quot;?", "body": "<p>For instance, see <a href=\"http://eel.is/c++draft/dcl.init.ref#4\" rel=\"nofollow\">[dcl.init.ref]/4</a>:</p>\n\n<blockquote>\n  <p>Given types \u201c cv1 T1\u201d and \u201c cv2 T2\u201d, \u201c cv1 T1\u201d is reference-related to\n  \u201c cv2 T2\u201d if T1 is the same type as T2, or T1 is a base class of T2. \u201c\n  cv1 T1\u201d is reference-compatible with \u201c cv2 T2\u201d if</p>\n  \n  <ul>\n  <li>T1 is reference-related to T2, or</li>\n  <li>T2 is \u201cnoexcept function\u201d and T1 is \u201cfunction\u201d, where the function types are otherwise the same,</li>\n  </ul>\n  \n  <p>and cv1 is the same cv-qualification as, or greater cv-qualification\n  than, cv2. In all cases where the reference-related or\n  reference-compatible relationship of two types is used to establish\n  the validity of a reference binding, and T1 is a base class of T2, a\n  program that necessitates such a binding is ill-formed if T1 is an\n  inaccessible (Clause [class.access]) or ambiguous\n  ([class.member.lookup]) base class of T2.</p>\n</blockquote>\n\n<p>I may be missing something, but my reading of the second bullet point above tells me that a \"noexcept function\" (T2) should not bind to a reference of type \"noexcept function\" (T1). But the snippet below compiles in <a href=\"http://coliru.stacked-crooked.com/a/50456f1747d58d4b\" rel=\"nofollow\">clang</a> and g++.</p>\n\n<pre><code>int g(int) noexcept;\nint (&amp;rg)(int) noexcept = g;\n</code></pre>\n"}, {"tags": ["c++", "udp", "gstreamer"], "comments": [{"owner": {"reputation": 2714, "user_id": 1496237, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/V12VS.jpg?s=128&g=1", "display_name": "mpr", "link": "https://stackoverflow.com/users/1496237/mpr"}, "edited": false, "score": 0, "creation_date": 1452187864, "post_id": 34640130, "comment_id": 57068411, "body": "If you&#39;re using GStreamer you shouldn&#39;t need to deal with the GSocket objects directly.  Try using udpsrc like this: gst-launch-1.0 udpsrc port=5100 ! application/x-rtp,media=video,payload=96,encoding-name=H264 ! rtph264depay ! avdec_h264 ! videoconvert ! autovideosink"}, {"owner": {"reputation": 181, "user_id": 4611867, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/adKvz.jpg?s=128&g=1", "display_name": "Korey", "link": "https://stackoverflow.com/users/4611867/korey"}, "reply_to_user": {"reputation": 2714, "user_id": 1496237, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/V12VS.jpg?s=128&g=1", "display_name": "mpr", "link": "https://stackoverflow.com/users/1496237/mpr"}, "edited": false, "score": 0, "creation_date": 1453674967, "post_id": 34640130, "comment_id": 57693859, "body": "gotcha! so why would gstreamer udpsrc have gsocket?"}, {"owner": {"reputation": 2714, "user_id": 1496237, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/V12VS.jpg?s=128&g=1", "display_name": "mpr", "link": "https://stackoverflow.com/users/1496237/mpr"}, "edited": false, "score": 0, "creation_date": 1453731580, "post_id": 34640130, "comment_id": 57717541, "body": "GStreamer elements are wrappers for most of the low level work.  If you want to deal with the sockets directly you should discard GStreamer and use something like libav."}], "owner": {"reputation": 181, "user_id": 4611867, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/adKvz.jpg?s=128&g=1", "display_name": "Korey", "link": "https://stackoverflow.com/users/4611867/korey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 196, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1452561178, "creation_date": 1452104827, "last_edit_date": 1452561178, "question_id": 34640130, "link": "https://stackoverflow.com/questions/34640130/gstreamer-gsocket-udp", "title": "Gstreamer Gsocket UDP", "body": "<p>I'm trying to connect to a RTP over UDP live video stream. I am trying to use the Gsocket to then apply to the udpsrc. I am unable to connect the the server with the Gsocket. Is there any suggestions anybody has to connect to the video stream?</p>\n"}, {"tags": ["c++", "qt", "qml"], "comments": [{"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1452108889, "post_id": 34640095, "comment_id": 57028171, "body": "QML deals with many other object types besides renderable objects deriving from <code>Item</code>. Given this, the notion of visibility simply doesn&#39;t apply to the basic engine behavior. Renderable objects are an extension to the core functionality."}, {"owner": {"reputation": 14050, "user_id": 1858225, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/8afcf8a38024eb5b17c0b0b58ff96d79?s=128&d=identicon&r=PG", "display_name": "Kyle Strand", "link": "https://stackoverflow.com/users/1858225/kyle-strand"}, "reply_to_user": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1452111344, "post_id": 34640095, "comment_id": 57029766, "body": "@KubaOber Hmmmm. I&#39;m using a TabView to hold the pages of the GUI, and the default start page is not the page with the ChartView objects in it. My <code>LineSeries</code> objects are populated by a signal/slot connection via a <code>Connections</code> element in the item containing my <code>ChartView</code>. Any idea why, when I open the appropriate tab for the first time, there&#39;s no data already present in the <code>LineSeries</code> objects?"}], "answers": [{"comments": [{"owner": {"reputation": 14050, "user_id": 1858225, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/8afcf8a38024eb5b17c0b0b58ff96d79?s=128&d=identicon&r=PG", "display_name": "Kyle Strand", "link": "https://stackoverflow.com/users/1858225/kyle-strand"}, "edited": false, "score": 0, "creation_date": 1452111551, "post_id": 34640499, "comment_id": 57029886, "body": "QtCharts is not part of QtQuick; does your statement about visibility still apply to QtCharts elements? I&#39;m storing data directly in the UI elements because the charts I&#39;m displaying aren&#39;t much more than eye-candy (the &quot;official&quot; data is stored in an actual database), and I&#39;d like the amount and types of data I store to be easily adjustable within QML (which isn&#39;t really possible if I have my backend cache the state)."}, {"owner": {"reputation": 21247, "user_id": 904422, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/55cf313c546e7c5aa1aeefae0e772c53?s=128&d=identicon&r=PG", "display_name": "Mitch", "link": "https://stackoverflow.com/users/904422/mitch"}, "reply_to_user": {"reputation": 14050, "user_id": 1858225, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/8afcf8a38024eb5b17c0b0b58ff96d79?s=128&d=identicon&r=PG", "display_name": "Kyle Strand", "link": "https://stackoverflow.com/users/1858225/kyle-strand"}, "edited": false, "score": 0, "creation_date": 1452111838, "post_id": 34640499, "comment_id": 57030081, "body": "<code>ChartView</code> is probably an <code>Item</code>, so yeah, it should apply."}, {"owner": {"reputation": 14050, "user_id": 1858225, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/8afcf8a38024eb5b17c0b0b58ff96d79?s=128&d=identicon&r=PG", "display_name": "Kyle Strand", "link": "https://stackoverflow.com/users/1858225/kyle-strand"}, "edited": false, "score": 0, "creation_date": 1452112463, "post_id": 34640499, "comment_id": 57030419, "body": "Okay, so if the <code>ChartView</code> is created as soon as it&#39;s loaded, it seems like it&#39;s still not getting its signals and slots hooked up until the <code>TabView</code> page it&#39;s under is selected. If it&#39;s <i>visibility</i> that determines whether the signals/slots are actually connected on start-up, then your code won&#39;t change the behavior, so I&#39;m not sure what you&#39;re saying the underlying problem is."}, {"owner": {"reputation": 21247, "user_id": 904422, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/55cf313c546e7c5aa1aeefae0e772c53?s=128&d=identicon&r=PG", "display_name": "Mitch", "link": "https://stackoverflow.com/users/904422/mitch"}, "reply_to_user": {"reputation": 14050, "user_id": 1858225, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/8afcf8a38024eb5b17c0b0b58ff96d79?s=128&d=identicon&r=PG", "display_name": "Kyle Strand", "link": "https://stackoverflow.com/users/1858225/kyle-strand"}, "edited": false, "score": 0, "creation_date": 1452113155, "post_id": 34640499, "comment_id": 57030790, "body": "But you want to use the <code>ChartView</code> with a separate &quot;page&quot; in the <code>TabView</code>, right? So you need to make sure that the <code>ChartView</code> is created at the same time (or before) that page. You can move the <code>ChartView</code> outside of the <code>TabView</code> so that it&#39;s always available (but hidden), and then, when the user navigates to the page that would normally have the <code>ChartView</code> in it, set the <code>parent</code> property of the <code>ChartView</code> to that page (or some item in it, like an empty placeholder <code>Item</code>)."}, {"owner": {"reputation": 14050, "user_id": 1858225, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/8afcf8a38024eb5b17c0b0b58ff96d79?s=128&d=identicon&r=PG", "display_name": "Kyle Strand", "link": "https://stackoverflow.com/users/1858225/kyle-strand"}, "edited": false, "score": 0, "creation_date": 1452114422, "post_id": 34640499, "comment_id": 57031434, "body": "Sorry, I&#39;m a bit lost. Yes, the <code>ChartView</code> is on a &quot;page&quot; in the <code>TabView</code> that is <i>not</i> the default &quot;page&quot; (i.e. the page that appears on startup). But I&#39;m not sure what the order of creation has to do with anything, since you said that the objects are all created when they&#39;re loaded (which happens before the <code>QApplication</code> is actually launched). When you say &quot;move the <code>ChartView</code>...so that it&#39;s always available&quot;, what exactly do you mean by &quot;available&quot;? That seems to be the core of the issue; I&#39;m not sure what &quot;available&quot; means in QML, hence why I thought it had to do with visibility."}, {"owner": {"reputation": 21247, "user_id": 904422, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/55cf313c546e7c5aa1aeefae0e772c53?s=128&d=identicon&r=PG", "display_name": "Mitch", "link": "https://stackoverflow.com/users/904422/mitch"}, "reply_to_user": {"reputation": 14050, "user_id": 1858225, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/8afcf8a38024eb5b17c0b0b58ff96d79?s=128&d=identicon&r=PG", "display_name": "Kyle Strand", "link": "https://stackoverflow.com/users/1858225/kyle-strand"}, "edited": false, "score": 0, "creation_date": 1452193566, "post_id": 34640499, "comment_id": 57071765, "body": "I forget if you get notifications when an answer to your question is edited, so... I edited my answer. :)"}, {"owner": {"reputation": 14050, "user_id": 1858225, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/8afcf8a38024eb5b17c0b0b58ff96d79?s=128&d=identicon&r=PG", "display_name": "Kyle Strand", "link": "https://stackoverflow.com/users/1858225/kyle-strand"}, "edited": false, "score": 0, "creation_date": 1452295172, "post_id": 34640499, "comment_id": 57122086, "body": "I didn&#39;t! Thanks for the heads-up. Okay, so I think the key here is the <code>Loader</code> class (and the fact that <code>TabView</code> inherits from it); I didn&#39;t know there was a class that prevented the QML engine from loading all of its children immediately. I&#39;m not sure the first part of your answer is all that relevant any more, so you might want to delete it. This has been very helpful, but at the moment I&#39;m unable to get the solution to work due to scoping difficulties."}, {"owner": {"reputation": 14050, "user_id": 1858225, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/8afcf8a38024eb5b17c0b0b58ff96d79?s=128&d=identicon&r=PG", "display_name": "Kyle Strand", "link": "https://stackoverflow.com/users/1858225/kyle-strand"}, "edited": false, "score": 0, "creation_date": 1452298925, "post_id": 34640499, "comment_id": 57123142, "body": "Okay, now I&#39;m just getting <code>TypeError: TypeError</code>, which isn&#39;t exactly helpful. I&#39;ve produced a <a href=\"https://github.com/BatmanAoD/PublicPaste/tree/master/qml_chgparent\" rel=\"nofollow noreferrer\">small example</a> that basically tries to do what you&#39;re suggesting, except that it uses the <code>Component.onCompleted</code> signal for the intended <i>parent</i> of the ChartView object (which in my example is just a rectangle) in order to trigger the change-of-parent. Would you mind taking a look?"}, {"owner": {"reputation": 14050, "user_id": 1858225, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/8afcf8a38024eb5b17c0b0b58ff96d79?s=128&d=identicon&r=PG", "display_name": "Kyle Strand", "link": "https://stackoverflow.com/users/1858225/kyle-strand"}, "edited": false, "score": 0, "creation_date": 1452298951, "post_id": 34640499, "comment_id": 57123146, "body": "(You should be able to run the example using <code>qmlscene</code>.)"}, {"owner": {"reputation": 21247, "user_id": 904422, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/55cf313c546e7c5aa1aeefae0e772c53?s=128&d=identicon&r=PG", "display_name": "Mitch", "link": "https://stackoverflow.com/users/904422/mitch"}, "reply_to_user": {"reputation": 14050, "user_id": 1858225, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/8afcf8a38024eb5b17c0b0b58ff96d79?s=128&d=identicon&r=PG", "display_name": "Kyle Strand", "link": "https://stackoverflow.com/users/1858225/kyle-strand"}, "edited": false, "score": 1, "creation_date": 1452333612, "post_id": 34640499, "comment_id": 57130255, "body": "It helps to print the values that you&#39;re trying to access. In this case: <code>print(persistent, persistent.red_rect)</code> gives me <code>QQuickItem(0x46320b9110) undefined</code>, which says that <code>red_rect</code> isn&#39;t defined. If you look at <code>Persistent.qml</code>, and then <code>main.qml</code>, what&#39;s the difference? Hint: it&#39;s an alias. :D"}, {"owner": {"reputation": 14050, "user_id": 1858225, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/8afcf8a38024eb5b17c0b0b58ff96d79?s=128&d=identicon&r=PG", "display_name": "Kyle Strand", "link": "https://stackoverflow.com/users/1858225/kyle-strand"}, "edited": false, "score": 0, "creation_date": 1452537630, "post_id": 34640499, "comment_id": 57203474, "body": "I hope you don&#39;t mind that I&#39;ve edited your answer to include my little demo code, now that it works."}], "tags": [], "owner": {"reputation": 21247, "user_id": 904422, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/55cf313c546e7c5aa1aeefae0e772c53?s=128&d=identicon&r=PG", "display_name": "Mitch", "link": "https://stackoverflow.com/users/904422/mitch"}, "is_accepted": true, "score": 2, "last_activity_date": 1452537611, "last_edit_date": 1452537611, "creation_date": 1452106052, "answer_id": 34640499, "question_id": 34640095, "link": "https://stackoverflow.com/questions/34640095/force-signal-slot-hookup-of-not-yet-visible-qml-item-on-startup/34640499#34640499", "title": "Force signal/slot hookup of not-yet-visible QML item on startup", "body": "<p>Items in Qt Quick are created as soon as the QML they reside in is loaded by the QML engine (even if they default to non-visible). The exception to this rule are items that dynamically load their content, like <code>Loader</code>.</p>\n\n<p>In your edit, you said that you're using <code>TabView</code>. I think that the setup you have is something like this:</p>\n\n<pre><code>import QtQuick 2.4\nimport QtQuick.Controls 1.3\nimport QtQuick.Window 2.2\n\nApplicationWindow {\n    title: qsTr(\"Hello World\")\n    width: 800\n    height: 700\n    visible: true\n\n    TabView {\n        id: sv\n        anchors.fill: parent\n\n        Tab {\n            title: \"Page 1\"\n        }\n\n        Tab {\n            title: \"Page 2\"\n            ChartView {}\n        }\n    }\n}\n</code></pre>\n\n<p>Try changing it to something like this:</p>\n\n<pre><code>import QtQuick 2.4\nimport QtQuick.Controls 1.3\nimport QtQuick.Window 2.2\n\nApplicationWindow {\n    title: qsTr(\"Hello World\")\n    width: 800\n    height: 700\n    visible: true\n\n    ChartView {\n        id: chartView\n        color: \"red\"\n        anchors.fill: parent\n        visible: false\n\n        Component.onCompleted: print(\"Monitoring data...\")\n    }\n\n    TabView {\n        id: sv\n        anchors.fill: parent\n\n        Tab {\n            id: tab1\n            title: \"Page 1\"\n        }\n\n        Tab {\n            id: tab2\n            title: \"Page 2\"\n            onActiveChanged: {\n                if (active) {\n                    chartView.parent = tab2;\n                    chartView.visible = true;\n                }\n            }\n        }\n    }\n}\n</code></pre>\n\n<p><code>Tab</code>s are <a href=\"http://doc.qt.io/qt-5/qml-qtquick-controls-tab.html\" rel=\"nofollow\">basically just <code>Loader</code>s</a>, so they have all of <code>Loader</code>'s API, including the <code>active</code> property. This property lets you know when that tab has been loaded. Before that stage, it's inaccessible.</p>\n\n<p>When the tab becomes active, we reparent the <code>ChartView</code> to it so that it's displayed in the correct place, and then show it.</p>\n\n<p>As you can see from the debug output, the <code>ChartView</code> is created at startup. You can move it somewhere else to control when it's loaded, or... use a <code>Loader</code>. :)</p>\n\n<p><strong>EDIT:</strong> Based on this answer and the discussion in the comments, OP has created a <a href=\"https://github.com/BatmanAoD/PublicPaste/tree/master/qml_chgparent\" rel=\"nofollow\">small working example</a> that demonstrates how persistent items can be pre-loaded and re-parented.</p>\n"}], "owner": {"reputation": 14050, "user_id": 1858225, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/8afcf8a38024eb5b17c0b0b58ff96d79?s=128&d=identicon&r=PG", "display_name": "Kyle Strand", "link": "https://stackoverflow.com/users/1858225/kyle-strand"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 762, "favorite_count": 0, "accepted_answer_id": 34640499, "answer_count": 1, "score": 0, "last_activity_date": 1452537611, "creation_date": 1452104703, "last_edit_date": 1452536265, "question_id": 34640095, "link": "https://stackoverflow.com/questions/34640095/force-signal-slot-hookup-of-not-yet-visible-qml-item-on-startup", "title": "Force signal/slot hookup of not-yet-visible QML item on startup", "body": "<p>In Qt's QML language for writing GUI code, QML elements are (if I understand correctly) not actually created until they become visible. (<strong>EDIT:</strong> It sounds like the elements are <em>created</em> when the QML engine loads them, but it appears that signal/slot connections are not made unless the elements are <em>visible</em>.)</p>\n\n<p>I have some QML elements (<code>LineSeries</code> objects from <a href=\"http://doc.qt.io/QtCharts/index.html\" rel=\"nofollow\"><code>QtCharts</code></a>) that record some data over time, and I would like them to start recording data as soon as my app starts up, even though the <code>ChartView</code> elements containing each series aren't immediately visible (users must navigate to a page containing these elements).</p>\n\n<p>Is this possible?</p>\n\n<p>One approach might be to keep each data series itself in some kind of <code>QVariantList</code> containing <code>QPointF</code>s in a global QML object, then dynamically assign it to the desired <code>LineSeries</code> object when the parent <code>ChartView</code> is instantiated. This might be possible using <a href=\"http://doc.qt.io/QtCharts/qml-qtcharts-chartview.html#createSeries-method\" rel=\"nofollow\"><code>ChartView::createSeries</code></a>, though I believe the only way to populate the new series would be to call <code>ChartView::series()</code>  and pass that to some kind of <code>Q_INVOKABLE</code> method in my C++ backend that would populate the series.</p>\n\n<p><strong>EDIT:</strong> Not sure if this is relevant, but the GUI element I'm using for navigation (i.e. the reason the <code>ChartView</code> isn't visible on startup) is a <code>TabView</code>. The <code>ChartView</code> objects are not top-level <code>TabView</code> pages; they're a couple levels down.</p>\n\n<p><strong>EDIT 2:</strong> The answer below seems like it <em>should</em> work, but I get the rather unhelpful error <code>TypeError: Type error</code> when I try to implement it. I've <a href=\"https://github.com/BatmanAoD/PublicPaste/tree/94730dc230615a5d8c4bf9c805689558427d5616/qml_chgparent\" rel=\"nofollow\">put together a minimal (non-)working example here</a> (use <code>qmlscene</code> to run it; I am using Qt 5.5).</p>\n\n<p><strong>EDIT 3:</strong> The above non-working version was <a href=\"https://github.com/BatmanAoD/PublicPaste/commit/2a93b24ec1fa8a5224e4225cec2731fad4411a39\" rel=\"nofollow\">fixed by simply adding a property alias</a>, thanks to Mitch's answer and comments.</p>\n"}, {"tags": ["c++", "arrays", "string", "dynamic", "char"], "comments": [{"owner": {"reputation": 1100, "user_id": 987792, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/a3655e73aea486890e17a7540ddc7e41?s=128&d=identicon&r=PG", "display_name": "Sjlver", "link": "https://stackoverflow.com/users/987792/sjlver"}, "edited": false, "score": 0, "creation_date": 1452104834, "post_id": 34639998, "comment_id": 57025603, "body": "Hmm... I don&#39;t see any <code>delete</code> in your main function. It should work if you store the result of <code>stringReplace</code> in a variable, and <code>delete</code> that if it is non-null."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1452104848, "post_id": 34639998, "comment_id": 57025610, "body": "In main() put the return value of <code>stringReplace(str, what, with)</code> in a variable of type char*. Then delete []  after the cout."}], "answers": [{"comments": [{"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 1, "creation_date": 1452104956, "post_id": 34640141, "comment_id": 57025668, "body": "This is C++, not C, <code>replaced</code> should be declared and initialized at the place it is used first time."}, {"owner": {"reputation": 868, "user_id": 3367929, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/5f06ec213df31bb3a61141cdc1f2222e?s=128&d=identicon&r=PG&f=1", "display_name": "Rames", "link": "https://stackoverflow.com/users/3367929/rames"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1452105086, "post_id": 34640141, "comment_id": 57025753, "body": "@Slava And why should it? As far as I know, it&#39;s just a matter of readability and used convention."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 1, "creation_date": 1452105285, "post_id": 34640141, "comment_id": 57025883, "body": "because readability is not just. This is one of the most important parts of writing bug free code."}, {"owner": {"reputation": 229, "user_id": 5692938, "user_type": "registered", "accept_rate": 33, "profile_image": "https://lh5.googleusercontent.com/-ry5d5RmeCPg/AAAAAAAAAAI/AAAAAAAAAB4/IPsjmtI6K9Q/photo.jpg?sz=128", "display_name": "Petar D.", "link": "https://stackoverflow.com/users/5692938/petar-d"}, "edited": false, "score": 0, "creation_date": 1452105695, "post_id": 34640141, "comment_id": 57026152, "body": "tnx guys i wrote &quot;char* replaced = stringReplace(str, what, with); delete[] replaced; &quot; and I think it&#39;s cool now. I know it&#39;s not the best way but the task is given this way and I cant add smth else in the function argument or smth."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1452105888, "post_id": 34640141, "comment_id": 57026265, "body": "Eventually they will teach you c++ and the pain with dealing with char arrays instead of <code>std::string</code> will be done,"}], "tags": [], "owner": {"reputation": 868, "user_id": 3367929, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/5f06ec213df31bb3a61141cdc1f2222e?s=128&d=identicon&r=PG&f=1", "display_name": "Rames", "link": "https://stackoverflow.com/users/3367929/rames"}, "is_accepted": false, "score": 0, "last_activity_date": 1452104851, "creation_date": 1452104851, "answer_id": 34640141, "question_id": 34639998, "link": "https://stackoverflow.com/questions/34639998/c-replace-what-with-with-on-char-arraystring/34640141#34640141", "title": "c++ replace what with with on char array(string)", "body": "<p>You have to delete it in order to avoid memory leak. You can do something like this:</p>\n\n<pre><code>int main()\n{\n   char str[1000];\n   char what[1000];\n   char with[1000];\n   char *replaced;\n\n   cout &lt;&lt; \"Enter your string\\n\";\n   cin.getline(str, 1000);\n\n   cout &lt;&lt; \"\\nEnter \\\"what\\\" you want to replace\\n\";\n   cin.getline(what, 1000);\n\n   if (strlen(str) &lt; strlen(what))\n   {\n      cout &lt;&lt; \"\\\"What\\\" contains more characters than the string!\\n\";\n      return 0;\n   }\n\n   cout &lt;&lt; \"\\nEnter with what you want to replace it\\n\";\n   cin.getline(with, 1000);\n\n   cout &lt;&lt; \"\\nYour string with replaced words looks like\\n\";\n   replaced = stringReplace(str, what, with);\n   cout &lt;&lt; replaced &lt;&lt; endl;\n   delete [] replaced;\n\n   return 0;\n}\n</code></pre>\n\n<p>However note that this isn't the best pratice to split allocation/deallocation responsibility.</p>\n"}], "owner": {"reputation": 229, "user_id": 5692938, "user_type": "registered", "accept_rate": 33, "profile_image": "https://lh5.googleusercontent.com/-ry5d5RmeCPg/AAAAAAAAAAI/AAAAAAAAAB4/IPsjmtI6K9Q/photo.jpg?sz=128", "display_name": "Petar D.", "link": "https://stackoverflow.com/users/5692938/petar-d"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 746, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1452106056, "creation_date": 1452104345, "last_edit_date": 1452106056, "question_id": 34639998, "link": "https://stackoverflow.com/questions/34639998/c-replace-what-with-with-on-char-arraystring", "title": "c++ replace what with with on char array(string)", "body": "<p>I have the task to write a function <code>char * stringReplace(const char * str, const char * what, const char * with)</code> which replaces \"what\" with \"with\" on a new string with the correct length. So Inside the function I created dynamic array, which the function returns. But my question is how can I delete it after, as If i try to delete it in the main function, after i use it, it says it's undefined. Aren't dynamic arrays without a scope or I'm wrong?\nHere's my code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\n#include &lt;string.h&gt;\n\nusing namespace std;\n\nbool areTheSame(const char * str, const char * what, unsigned p)\n{\n\n\n   return areEqual;\n}\n\n\nunsigned howManyTimes(const char * str, const char * what)\n{\n\n}\n\n\nchar * stringReplace(const char * str, const char * what, const char * with) \n{\n\n}\n\nint main()\n{\n   char str[1000];\n   char what[1000];\n   char with[1000];\n\n   cout &lt;&lt; \"Enter your string\\n\";\n   cin.getline(str, 1000);\n\n   cout &lt;&lt; \"\\nEnter \\\"what\\\" you want to replace\\n\";\n   cin.getline(what, 1000);\n\n   if (strlen(str) &lt; strlen(what))\n   {\n      cout &lt;&lt; \"\\\"What\\\" contains more characters than the string!\\n\";\n      return 0;\n   }\n\n   cout &lt;&lt; \"\\nEnter with what you want to replace it\\n\";\n   cin.getline(with, 1000);\n\n   cout &lt;&lt; \"\\nYour string with replaced words looks like\\n\";\n   cout &lt;&lt; stringReplace(str, what, with) &lt;&lt; endl;\n\n   return 0;\n}\n</code></pre>\n\n<p>P.S I deleted parts of the code as I found the answer I wanted and there is still time for the task, and I'm not sure I'm allowed to post my code publicly</p>\n"}, {"tags": ["c++", "algorithm", "suffix-array", "burrows-wheeler-transform"], "comments": [{"owner": {"reputation": 6911, "user_id": 2970186, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/Vo0Wc.jpg?s=128&g=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/2970186/daniel"}, "edited": false, "score": 0, "creation_date": 1452162155, "post_id": 34639854, "comment_id": 57050276, "body": "Can you give an example of the erroneous behaviour (input + expected output + output of both algorithms)? I&#39;m assuming the &quot;excess index value&quot; of SA-IS is the sentinel, rather than an error?"}, {"owner": {"reputation": 867, "user_id": 1121150, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/ccdd15992f342d64acaae652eff3aa60?s=128&d=identicon&r=PG", "display_name": "Bim", "link": "https://stackoverflow.com/users/1121150/bim"}, "reply_to_user": {"reputation": 6911, "user_id": 2970186, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/Vo0Wc.jpg?s=128&g=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/2970186/daniel"}, "edited": false, "score": 0, "creation_date": 1452248069, "post_id": 34639854, "comment_id": 57093912, "body": "Added simple test input strings that fail for me."}, {"owner": {"reputation": 6911, "user_id": 2970186, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/Vo0Wc.jpg?s=128&g=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/2970186/daniel"}, "edited": false, "score": 0, "creation_date": 1452249567, "post_id": 34639854, "comment_id": 57094877, "body": "What is the fourth argument of each algorithm (256) supposed to represent?"}, {"owner": {"reputation": 6911, "user_id": 2970186, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/Vo0Wc.jpg?s=128&g=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/2970186/daniel"}, "edited": false, "score": 0, "creation_date": 1452249647, "post_id": 34639854, "comment_id": 57094930, "body": "On a side note, better to use <code>reinterpret_cast</code> than a c-cast."}, {"owner": {"reputation": 6911, "user_id": 2970186, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/Vo0Wc.jpg?s=128&g=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/2970186/daniel"}, "edited": false, "score": 0, "creation_date": 1452252095, "post_id": 34639854, "comment_id": 57096502, "body": "I&#39;m a bit suspicious of the source code given in the SA-IS paper... it doesn&#39;t even compile (typo <code>nt</code> rather than <code>int</code> for example)."}, {"owner": {"reputation": 6911, "user_id": 2970186, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/Vo0Wc.jpg?s=128&g=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/2970186/daniel"}, "edited": false, "score": 0, "creation_date": 1452252345, "post_id": 34639854, "comment_id": 57096646, "body": "To be honest, you&#39;d be better off just using <a href=\"https://github.com/y-256/libdivsufsort\" rel=\"nofollow noreferrer\">libdivsufsort</a>. I think you can just use <code>char</code> directly (it uses modifiable <code>typedef</code>s), is very well tested, and is exceptionally fast. You can even just get the BWT directly. If you want a real life example of it in use, take a look at my <a href=\"https://github.com/dancooke/tandem\" rel=\"nofollow noreferrer\">Tadem</a> library (repeat finding), there&#39;s a template method <code>make_suffix_array</code> in tandem.hpp."}, {"owner": {"reputation": 867, "user_id": 1121150, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/ccdd15992f342d64acaae652eff3aa60?s=128&d=identicon&r=PG", "display_name": "Bim", "link": "https://stackoverflow.com/users/1121150/bim"}, "reply_to_user": {"reputation": 6911, "user_id": 2970186, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/Vo0Wc.jpg?s=128&g=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/2970186/daniel"}, "edited": false, "score": 0, "creation_date": 1452252932, "post_id": 34639854, "comment_id": 57097045, "body": "About the code: Strange. Expect a bad ~ character (&quot;~mask&quot;) I had to change nothing in the code copied from the paper. If in doubt you can use the second link to the zip file. I just copy-pasted that... I already got some suggestions using libdivsufsort. It seems to be nice, but I&#39;d hate using an external library for something as easy as 150 lines of code. I wanted to use suffix arrays for LZ(SS/4/...) compression too, so I&#39;d like to understand what&#39;s going on. Additionally it bugs me that it &quot;almost&quot; works ;)..."}, {"owner": {"reputation": 867, "user_id": 1121150, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/ccdd15992f342d64acaae652eff3aa60?s=128&d=identicon&r=PG", "display_name": "Bim", "link": "https://stackoverflow.com/users/1121150/bim"}, "reply_to_user": {"reputation": 6911, "user_id": 2970186, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/Vo0Wc.jpg?s=128&g=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/2970186/daniel"}, "edited": false, "score": 0, "creation_date": 1452256190, "post_id": 34639854, "comment_id": 57099169, "body": "Oh, and the &quot;256&quot; is the alphabet size."}], "answers": [{"tags": [], "owner": {"reputation": 867, "user_id": 1121150, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/ccdd15992f342d64acaae652eff3aa60?s=128&d=identicon&r=PG", "display_name": "Bim", "link": "https://stackoverflow.com/users/1121150/bim"}, "is_accepted": false, "score": 2, "last_activity_date": 1455383577, "creation_date": 1455383577, "answer_id": 35382800, "question_id": 34639854, "link": "https://stackoverflow.com/questions/34639854/using-suffix-array-algorithm-for-burrows-wheeler-transform/35382800#35382800", "title": "Using suffix array algorithm for Burrows Wheeler transform", "body": "<p>I have now figured this out. My solution was two-fold. Some people suggested using a library, which I did <a href=\"https://sites.google.com/site/yuta256/sais\" rel=\"nofollow\">SAIS-lite</a> by Yuta Mori.<br>\nThe real solution was to duplicate and concatenate the input string and run the SA-generation on this string. When saving the output string you need to filter out all SA indices above the original data size. This is not an ideal solution, because you need to allocate twice as much memory, copy twice and do the transform on the double amount of data, but it is still 50-70% faster than std::sort. If you have a better solution, I'd love to hear it.<br>\nYou can find the updated code <a href=\"https://github.com/HorstBaerbel/compress/blob/master/src/bwt_codec.cpp#L59\" rel=\"nofollow\">here</a>.</p>\n"}], "owner": {"reputation": 867, "user_id": 1121150, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/ccdd15992f342d64acaae652eff3aa60?s=128&d=identicon&r=PG", "display_name": "Bim", "link": "https://stackoverflow.com/users/1121150/bim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1551, "favorite_count": 5, "answer_count": 1, "score": 7, "last_activity_date": 1455383577, "creation_date": 1452103859, "last_edit_date": 1452248025, "question_id": 34639854, "link": "https://stackoverflow.com/questions/34639854/using-suffix-array-algorithm-for-burrows-wheeler-transform", "title": "Using suffix array algorithm for Burrows Wheeler transform", "body": "<p>I've sucessfully implemented a BWT stage (using regular string sorting) for a <a href=\"https://github.com/HorstBaerbel/compress\" rel=\"noreferrer\">compression testbed</a> I'm writing. I can apply the BWT and then inverse BWT transform and the output matches the input. Now I wanted to speed up creation of the BW index table using suffix arrays. I have found 2 relatively simple, supposedly fast O(n) algorithms for suffix array creation, <a href=\"http://www.cs.helsinki.fi/u/tpkarkka/publications/jacm05-revised.pdf\" rel=\"noreferrer\">DC3</a> and <a href=\"https://ge-nong.googlecode.com/files/Two%20Efficient%20Algorithms%20for%20Linear%20Time%20Suffix%20Array%20Construction.pdf\" rel=\"noreferrer\">SA-IS</a> which both come with C++/C source code. I tried using the sources (out-of-the-box compiling SA-IS source can also be found <a href=\"http://ge-nong.googlecode.com/files/sa-is.zip\" rel=\"noreferrer\">here</a>), but failed to get proper a proper suffix array / BWT index table out. Here's what I've done:  </p>\n\n<ol>\n<li><p>T=input data, SA=output suffix array, n=size of T, K=alphabet size, BWT=BWT index table</p></li>\n<li><p>I work on 8-bit bytes, but both algorithms need a unique sentinel / EOF marker in form of a zero byte (DC3 needs 3, SA-IS needs one), thus I convert all my input data to 32-bit integers, increase all symbols by 1 and append the sentinel zero bytes. This is T.</p></li>\n<li><p>I create an integer output array SA (of size n for DC3, n+1 for KA-IS) and apply the algorithms. I get results similar to my sorting BWT transform, but some values are odd (see UPDATE 1). Also the results of both algorithms differ slightly. The SA-IS algorithm produces an excess index value at the front, so all results need to be copied left by one index (SA[i]=SA[i+1]).</p></li>\n<li><p>To convert the suffix array to the proper BWT indices, I subtract 1 from the suffix array values, do a modulo and should have the BWT indices (according to <a href=\"https://en.wikipedia.org/wiki/Suffix_array#Applications\" rel=\"noreferrer\">this</a>): BWT[i]=(SA[i]-1)%n.</p></li>\n</ol>\n\n<p>This is my code to feed the SA algorithms and convert to BWT. You should be able to more or less just plug in the SA construction code from the papers:  </p>\n\n<pre><code>std::vector&lt;int32_t&gt; SuffixArray::generate(const std::vector&lt;uint8_t&gt; &amp; data)\n{\n    std::vector&lt;int32_t&gt; SA;\n    if (data.size() &gt;= 2)\n    {\n        //copy data over. we need to append 3 zero bytes, \n        //as the algorithm expects T[n]=T[n+1]=T[n+2]=0\n        //also increase the symbol value by 1, because the algorithm alphabet is [1,K]\n        //(0 is used as an EOF marker)\n        std::vector&lt;int32_t&gt; T(data.size() + 3, 0);\n        std::copy(data.cbegin(), data.cend(), T.begin());\n        std::for_each(T.begin(), std::prev(T.end(), 3), [](int32_t &amp; n){ n++; });\n        SA.resize(data.size());\n        SA_DC3(T.data(), SA.data(), data.size(), 256);\n\n        OR\n\n        //copy data over. we need to append a zero byte, \n        //as the algorithm expects T[n-1]=0 (where n is the size of its input data)\n        //also increase the symbol value by 1, because the algorithm alphabet is [1,K] \n        //(0 is used as an EOF marker)\n        std::vector&lt;int32_t&gt; T(data.size() + 1, 0);\n        std::copy(data.cbegin(), data.cend(), T.begin());\n        std::for_each(T.begin(), std::prev(T.end(), 1), [](int32_t &amp; n){ n++; });\n        SA.resize(data.size() + 1); //crashes if not one extra byte at the end\n        SA_IS((unsigned char *)T.data(), SA.data(), data.size() + 1, 256, 4); //algorithm expects size including sentinel\n        std::rotate(SA.begin(), std::next(SA.begin()), SA.end()); //rotate left by one to get same result as DC3\n        SA.resize(data.size());\n    }\n    else\n    {\n        SA.push_back(0);\n    }\n    return SA;\n}\n\nvoid SuffixArray::toBWT(std::vector&lt;int32_t&gt; &amp; SA)\n{\n    std::for_each(SA.begin(), SA.end(), [SA](int32_t &amp; n){ n = ((n - 1) &lt; 0) ? (n + SA.size() - 1) : (n - 1); });\n}\n</code></pre>\n\n<p>What am I doing wrong?</p>\n\n<p><strong>UPDATE 1</strong><br>\nWhen applying the algorithms to short amounts of test text data like \"yabbadabbado\" / \"this is a test.\" / \"abaaba\" or a big text file (<a href=\"http://corpus.canterbury.ac.nz/descriptions/\" rel=\"noreferrer\">alice29.txt</a> from the Canterbury corpus) they work fine. Actually the toBWT() function isn't even necessary.<br>\nWhen applying the algorithms to binary data from a file containing the full 8-bit byte alphabet (executable etc.), they don't seem to work correctly. Comparing the results of the algorithms to that of the regular BWT indices, I notice erroneous indices (4 in my case) at the front. The number of indices (incidently?) corresponds to the recursion depth of the algorithms. The indices point to where the original source data had the last occurrences of 0s (before I converted them to 1s when building T)...  </p>\n\n<p><strong>UPDATE 2</strong><br>\nThere are more differing values when I binary compare the regular BWT array and the suffix array. This might be expected, as afair sorting must not necessarily be the same as with a standard sort, BUT the resulting data transformed by the arrays should be the same. It is not.</p>\n\n<p><strong>UPDATE 3</strong><br>\nI tried modifying a simple input string till both algorithm \"failed\". After changing two bytes of the string \"this is a test.\" to 255 or 0 (from 746869732069732061<strong>20</strong>74657374<strong>2E</strong>h to e.g. 746869732069732061<strong>FF</strong>74657374<strong>FF</strong>h, the last byte has to be changed!) the indices and transformed string are not correct anymore. It also seems to be enough to change the last character of the string to a character already ocurring in the string, e.g. \"this is a tests\" 7468697320697320612074657374<strong>73</strong>h. Then two indices and two characters of the transformed strings will swapped (comparing regular sorting BWT and BWT that uses SAs).  </p>\n\n<p>I find the whole process of having to convert the data to 32-bit a bit awkward. If somebody has a better solution (paper, better yet, some source code) to generate a suffix array DIRECTLY from a string with an 256-char alphabet, I'd be happy.</p>\n"}, {"tags": ["c++", "algorithm"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 1, "creation_date": 1452103386, "post_id": 34639677, "comment_id": 57024768, "body": "You likely want a tree of <code>Pieces</code>"}, {"owner": {"reputation": 14110, "user_id": 2416958, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/w8lZr.png?s=128&g=1", "display_name": "Stefan", "link": "https://stackoverflow.com/users/2416958/stefan"}, "edited": false, "score": 0, "creation_date": 1452103403, "post_id": 34639677, "comment_id": 57024776, "body": "You might want to store the position in your <code>Piece</code> class."}, {"owner": {"reputation": 32382, "user_id": 587803, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7431a850a166ca3a648141c532aa9d0?s=128&d=identicon&r=PG", "display_name": "Ben", "link": "https://stackoverflow.com/users/587803/ben"}, "edited": false, "score": 0, "creation_date": 1452103599, "post_id": 34639677, "comment_id": 57024885, "body": "Look into AABB tree. You need some sort of two-dimensional data structure, like an R-Tree or AABB tree."}, {"owner": {"reputation": 72, "user_id": 3183595, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/oWWdn.jpg?s=128&g=1", "display_name": "nervousDev", "link": "https://stackoverflow.com/users/3183595/nervousdev"}, "edited": false, "score": 0, "creation_date": 1452105965, "post_id": 34639677, "comment_id": 57026327, "body": "I&#39;ll check the tree option later. Storing the position inside Piece class is not a solution because it&#39;ll make much harder to know if there is space available (I think). Thank you all."}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1452109481, "post_id": 34639677, "comment_id": 57028553, "body": "Of course, depending on how many pieces there are, and how often you add/remove pieces, there may be no need at all to store them in a fancy data structure. A simple vector or list of pieces may be sufficient, with a full traversal done for collision detection."}, {"owner": {"reputation": 72, "user_id": 3183595, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/oWWdn.jpg?s=128&g=1", "display_name": "nervousDev", "link": "https://stackoverflow.com/users/3183595/nervousdev"}, "edited": false, "score": 0, "creation_date": 1452120228, "post_id": 34639677, "comment_id": 57034397, "body": "Yes I&#39;m aware of that but my intention is to balance memory usage with cpu usage. So, if I choose to do a collision detection every time I need to update de container I&#39;ll have more cpu usage and a low memory usage."}], "answers": [{"comments": [{"owner": {"reputation": 72, "user_id": 3183595, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/oWWdn.jpg?s=128&g=1", "display_name": "nervousDev", "link": "https://stackoverflow.com/users/3183595/nervousdev"}, "edited": false, "score": 0, "creation_date": 1452105610, "post_id": 34640213, "comment_id": 57026094, "body": "I&#39;ll check your answer with more detail later.   I&#39;ll add some info that I missed in the question (check edit)."}, {"owner": {"reputation": 72, "user_id": 3183595, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/oWWdn.jpg?s=128&g=1", "display_name": "nervousDev", "link": "https://stackoverflow.com/users/3183595/nervousdev"}, "edited": false, "score": 0, "creation_date": 1452107849, "post_id": 34640213, "comment_id": 57027509, "body": "After reading more carefully your answer, I came to this:  first option - not the most reasonable one. You are suggesting having a position ([i][y]) for each unit which isn&#39;t the best option, because I&#39;ll have pieces like 2000*1500 and it would make it harder to check if a &quot;Piece&quot; would fit in a certain position."}, {"owner": {"reputation": 397, "user_id": 4814459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60afb4c713089d7bdc658c3866ad91d8?s=128&d=identicon&r=PG&f=1", "display_name": "thefunkyjunky", "link": "https://stackoverflow.com/users/4814459/thefunkyjunky"}, "reply_to_user": {"reputation": 72, "user_id": 3183595, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/oWWdn.jpg?s=128&g=1", "display_name": "nervousDev", "link": "https://stackoverflow.com/users/3183595/nervousdev"}, "edited": false, "score": 0, "creation_date": 1452146625, "post_id": 34640213, "comment_id": 57042172, "body": "If you want to balance between memory usage and cpu usage, you can use sqrt decomposition. See my edit for more info."}, {"owner": {"reputation": 72, "user_id": 3183595, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/oWWdn.jpg?s=128&g=1", "display_name": "nervousDev", "link": "https://stackoverflow.com/users/3183595/nervousdev"}, "edited": false, "score": 0, "creation_date": 1452270744, "post_id": 34640213, "comment_id": 57109277, "body": "Can you please explain better your &quot;edit option&quot;? Thank you."}, {"owner": {"reputation": 397, "user_id": 4814459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60afb4c713089d7bdc658c3866ad91d8?s=128&d=identicon&r=PG&f=1", "display_name": "thefunkyjunky", "link": "https://stackoverflow.com/users/4814459/thefunkyjunky"}, "reply_to_user": {"reputation": 72, "user_id": 3183595, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/oWWdn.jpg?s=128&g=1", "display_name": "nervousDev", "link": "https://stackoverflow.com/users/3183595/nervousdev"}, "edited": false, "score": 0, "creation_date": 1452273124, "post_id": 34640213, "comment_id": 57110855, "body": "Lets suppose that you want to check if there will be a collision when adding piece on coordinates (x, y) with size (w, h).  Let k = sqrt(maxw) and n = sqrt(maxh). Now let a = x / k and b = (x+w)/k, c = y / n, d = (y+h)/n. In the array check if there is a piece at any of the indices from (a, c) to (b, d) - or in other words if there is 1 in that subarray.If there isn&#39;t, you can add the piece. If there is, you must bruteforce check if the new piece collides with some previous one, because the array check might give some false positives"}, {"owner": {"reputation": 72, "user_id": 3183595, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/oWWdn.jpg?s=128&g=1", "display_name": "nervousDev", "link": "https://stackoverflow.com/users/3183595/nervousdev"}, "edited": false, "score": 0, "creation_date": 1452285680, "post_id": 34640213, "comment_id": 57117853, "body": "I&#39;ll write down your explanation and try with some values to see if it&#39;s worth of a try. A big thank you!"}], "tags": [], "owner": {"reputation": 397, "user_id": 4814459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60afb4c713089d7bdc658c3866ad91d8?s=128&d=identicon&r=PG&f=1", "display_name": "thefunkyjunky", "link": "https://stackoverflow.com/users/4814459/thefunkyjunky"}, "is_accepted": false, "score": 1, "last_activity_date": 1452146944, "last_edit_date": 1452146944, "creation_date": 1452105108, "answer_id": 34640213, "question_id": 34639677, "link": "https://stackoverflow.com/questions/34639677/2-dimension-geometric-layout-of-objects/34640213#34640213", "title": "2 dimension geometric layout of objects", "body": "<p>You can use Piece p[width][height] and use memset to make all zeros or use a std::vector if you don't know the size of the grid beforehand. Then you can check(while adding a new Piece at some position (x, y)) if on any of its subsquares there is some other Piece already.</p>\n\n<p>Edit: You can use a matrix char mem[sqrt(width)][sqrt(height)]; and a one vector of Pieces. Then using the matrix if there will be a probable collision and if not, just add the Piece. Else you iterate through all the existing ones and check for a collision.</p>\n\n<p>If you want to make the procedure faster( this one is reasonable only with small grids ), then you will need to use more \"advanced\" data structures. What I suggest you is to learn about 2D BIT(or fenwick) trees(there are a lot of resources on google). You can also use 2D segment trees. Then when adding a new Piece at position (x, y) check the sum of all squares in it(e.g from (x, y) to (x + width, y + height)). If that sum is zero then the new Piece won't collide with previous ones and you then update the grid as you add 1 to all squares in your Piece(I mean to the corresponding values in the 2D segment tree). Else if the sum is greater than zero it means that there will be some overlap and you must then discard the new Piece.</p>\n"}], "owner": {"reputation": 72, "user_id": 3183595, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/oWWdn.jpg?s=128&g=1", "display_name": "nervousDev", "link": "https://stackoverflow.com/users/3183595/nervousdev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1452146944, "creation_date": 1452103241, "last_edit_date": 1452105872, "question_id": 34639677, "link": "https://stackoverflow.com/questions/34639677/2-dimension-geometric-layout-of-objects", "title": "2 dimension geometric layout of objects", "body": "<p>so I have this class:</p>\n\n<pre><code>class Piece{\n  int width;\n  int height;\n}\n</code></pre>\n\n<p>my problem is that I need to make a container type class that somehow can save the layout of multiple and different size \"Piece\" objects (note that Piece can only represent rectangles).</p>\n\n<p>Example:</p>\n\n<pre><code>________\n| t     |\n| t  jj |\n| t  jj |\n_________\n</code></pre>\n\n<p>My goal with this is to be able to \"fill\" a empty rectangle with multiple \"Piece\" objects but with the ability to know if the \"Piece\" can fit in.</p>\n\n<p>I'm developing this in C++. I started with the most logic solution I think that was to use a \"matrix\" of vectors (vector&lt; vector&lt; Piece * > > mat) but that doesn't work because as I said \"Piece\" objects can have different sizes.</p>\n\n<p>I hope you can give some hints on how to get a solution for this or if it exists some lib or open-sorce project links.</p>\n\n<p>Thank you.</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>I forgot this:I know beforehand the dimensions of the container and the insertion (after validation) is sequential (Piece after Piece) with no predefined orientation.</p>\n"}, {"tags": ["c++", "windows", "direct3d", "directx-9"], "comments": [{"owner": {"reputation": 12051, "user_id": 656243, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/3afyW.png?s=128&g=1", "display_name": "Lynn Crumbling", "link": "https://stackoverflow.com/users/656243/lynn-crumbling"}, "edited": false, "score": 0, "creation_date": 1452103073, "post_id": 34639527, "comment_id": 57024580, "body": "<code>CreateDevice()</code>, <code>GetBackBuffer()</code>, and <code>D3DXCreateSprite()</code> all return an HRESULT that you are throwing away.. are you sure that they aren&#39;t giving you more information? Where are you drawing the sprite onto the surface? Your message pump doesn&#39;t include code to allow for checking a keystroke or mouse click for exit, so it makes sense that all input is being ignored."}, {"owner": {"reputation": 12051, "user_id": 656243, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/3afyW.png?s=128&g=1", "display_name": "Lynn Crumbling", "link": "https://stackoverflow.com/users/656243/lynn-crumbling"}, "edited": false, "score": 0, "creation_date": 1452103435, "post_id": 34639527, "comment_id": 57024798, "body": "How is <code>Direct3D_Init</code> even being called? You aren&#39;t including all of the relevant code."}, {"owner": {"reputation": 31, "user_id": 5746174, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e49f77aba9debe85b628b427f3846c8b?s=128&d=identicon&r=PG&f=1", "display_name": "K. MacDonald", "link": "https://stackoverflow.com/users/5746174/k-macdonald"}, "reply_to_user": {"reputation": 12051, "user_id": 656243, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/3afyW.png?s=128&g=1", "display_name": "Lynn Crumbling", "link": "https://stackoverflow.com/users/656243/lynn-crumbling"}, "edited": false, "score": 0, "creation_date": 1452105188, "post_id": 34639527, "comment_id": 57025809, "body": "Direct3D_Init is being called from Game_Init(), thats all Game_Init() does."}, {"owner": {"reputation": 28528, "user_id": 3780494, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vqia1.jpg?s=128&g=1", "display_name": "Chuck Walbourn", "link": "https://stackoverflow.com/users/3780494/chuck-walbourn"}, "edited": false, "score": 0, "creation_date": 1452109024, "post_id": 34639527, "comment_id": 57028259, "body": "If you were using Direct3D 11, I&#39;d strongly recommend starting with the <a href=\"http://blogs.msdn.com/b/chuckw/archive/2015/01/06/direct3d-win32-game-visual-studio-template.aspx\" rel=\"nofollow noreferrer\">Direct3D Win32 Game template</a> and the DirectX Tool Kit <a href=\"https://github.com/Microsoft/DirectXTK/wiki/Getting-Started\" rel=\"nofollow noreferrer\">tutorials</a> which address setting up a render window, device, and swap chain in some detail. Direct3D 9 is over a decade old at this point, and D3DX9 (i.e. <code>D3DXCreateSprite</code>) is deprecated along with the <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ee663275.aspx\" rel=\"nofollow noreferrer\">legacy DirectX SDK</a>."}], "answers": [{"comments": [{"owner": {"reputation": 1532, "user_id": 3209693, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/sXLfb.jpg?s=128&g=1", "display_name": "Kaspar", "link": "https://stackoverflow.com/users/3209693/kaspar"}, "edited": false, "score": 0, "creation_date": 1510775076, "post_id": 47315684, "comment_id": 81582791, "body": "The question you are answering to is in style of &quot;I have a problem, please fix it for me.&quot; I don&#39;t think it deserves any response, especially the kind that is highly subjective."}], "tags": [], "owner": {"reputation": 1, "user_id": 8947365, "user_type": "registered", "profile_image": "https://graph.facebook.com/1326920714102818/picture?type=large", "display_name": "Nh\u1eadt Minh", "link": "https://stackoverflow.com/users/8947365/nh%e1%ba%adt-minh"}, "is_accepted": false, "score": -2, "last_activity_date": 1510773927, "creation_date": 1510773927, "answer_id": 47315684, "question_id": 34639527, "link": "https://stackoverflow.com/questions/34639527/direct3d-window-opens-to-white-screen/47315684#47315684", "title": "Direct3D window opens to white screen", "body": "<p>My Game project just have the same issue. The Game was built success but when I start it. It show white screen.\nI've just fixed this error. If you have a GPU (NVidia or ...) you should disable it. Like I did in this image.<a href=\"https://i.stack.imgur.com/RiQE0.jpg\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n"}], "owner": {"reputation": 31, "user_id": 5746174, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e49f77aba9debe85b628b427f3846c8b?s=128&d=identicon&r=PG&f=1", "display_name": "K. MacDonald", "link": "https://stackoverflow.com/users/5746174/k-macdonald"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 855, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1510773927, "creation_date": 1452102701, "last_edit_date": 1452102935, "question_id": 34639527, "link": "https://stackoverflow.com/questions/34639527/direct3d-window-opens-to-white-screen", "title": "Direct3D window opens to white screen", "body": "<p>In the source code I'm using my program is opening a window which displays a white screen and immediately becomes unresponsive. Please help me find the issue with my code.</p>\n\n<p>Windows.cpp</p>\n\n<pre><code>#include \"DirectX.h\"\n\nusing namespace std;\nbool gameover = false;\n\n//Windows event handler\nLRESULT WINAPI WinProc(HWND hwnd, UINT msg, WPARAM wParam, LPARAM lParam) {\n    switch (msg) {\n    case WM_DESTROY:\n        gameover = true;\n        PostQuitMessage(0);\n        return 0;\n    }\n\n    return DefWindowProc(hwnd, msg, wParam, lParam);\n}\n\n//Windows entry point\nint WINAPI WinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance,\n    LPSTR lpCmdLine, int nCmdShow) {\n\n    //initializes window settings\n    WNDCLASSEX wc;\n    wc.cbSize = sizeof(WNDCLASSEX);\n    wc.style = CS_HREDRAW | CS_VREDRAW;\n    wc.lpfnWndProc = (WNDPROC)WinProc;\n    wc.cbClsExtra = 0;\n    wc.cbWndExtra = 0;\n    wc.hInstance = hInstance;\n    wc.hIcon = NULL;\n    wc.hCursor = LoadCursor(NULL, IDC_ARROW);\n    wc.hbrBackground = (HBRUSH)GetStockObject(WHITE_BRUSH);\n    wc.lpszMenuName = NULL;\n    wc.lpszClassName = L\"MainWindowClass\";\n    wc.hIconSm = NULL;\n    RegisterClassEx(&amp;wc);\n\n    //create a new window\n    HWND window = CreateWindow(L\"MainWindowClass\", APPTITLE,\n        WS_OVERLAPPEDWINDOW, CW_USEDEFAULT, CW_USEDEFAULT,\n        SCREENW, SCREENH, NULL, NULL, hInstance, NULL);\n\n    if (window == 0) return 0;\n\n    //display the window\n    ShowWindow(window, nCmdShow);\n    UpdateWindow(window);\n\n    //initialize the game\n    if (!Game_Init(window)) return 0;\n\n    //main message loop\n    MSG message;\n    while (!gameover) {\n        if (PeekMessage(&amp;message, NULL, 0, 0, PM_REMOVE)) {\n            TranslateMessage(&amp;message);\n            DispatchMessage(&amp;message);\n        }\n\n        //process game loop\n        Game_Run(window);\n    }\n\n    //shutdown game\n    Game_End();\n    return message.wParam;\n}\n</code></pre>\n\n<p>DirectX.cpp\nI assume this is where the problem is happening</p>\n\n<pre><code>bool Direct3D_Init(HWND window, int width, int height, bool fullscreen) \n{\n    //initialize Direct3D\n    d3d = Direct3DCreate9(D3D_SDK_VERSION);\n    if (!d3d) return false;\n\n    //set Direct3D presentation parameters\n    D3DPRESENT_PARAMETERS d3dpp;\n    ZeroMemory(&amp;d3dpp, sizeof(d3dpp));\n    d3dpp.Windowed = !fullscreen;\n    d3dpp.SwapEffect = D3DSWAPEFFECT_COPY;\n    d3dpp.BackBufferFormat = D3DFMT_X8R8G8B8;\n    d3dpp.BackBufferCount = 1;\n    d3dpp.BackBufferWidth = width;\n    d3dpp.BackBufferHeight = height;\n    d3dpp.hDeviceWindow = window;\n\n    //create Direct3D device\n    d3d-&gt;CreateDevice(D3DADAPTER_DEFAULT, D3DDEVTYPE_HAL, window,\n        D3DCREATE_SOFTWARE_VERTEXPROCESSING, &amp;d3dpp, &amp;d3ddev);\n    if (!d3ddev) return false;\n\n    //get a pointer to the back buffer surface\n    d3ddev-&gt;GetBackBuffer(0, 0, D3DBACKBUFFER_TYPE_MONO, &amp;backbuffer);\n\n    //create sprite object\n    D3DXCreateSprite(d3ddev, &amp;spriteobj);\n\n    return true;\n}\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 5, "creation_date": 1452102677, "post_id": 34639493, "comment_id": 57024370, "body": "Can you show use the code you are using in an <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>?"}, {"owner": {"reputation": 397, "user_id": 4814459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60afb4c713089d7bdc658c3866ad91d8?s=128&d=identicon&r=PG&f=1", "display_name": "thefunkyjunky", "link": "https://stackoverflow.com/users/4814459/thefunkyjunky"}, "edited": false, "score": 0, "creation_date": 1452102678, "post_id": 34639493, "comment_id": 57024372, "body": "You mean that you want to call A&#39;s operator[] ?"}, {"owner": {"reputation": 324, "user_id": 5725091, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/6cb95bc33c3861f2a3a728a7fc7734c4?s=128&d=identicon&r=PG", "display_name": "Henrik", "link": "https://stackoverflow.com/users/5725091/henrik"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1452103044, "post_id": 34639493, "comment_id": 57024561, "body": "@NathanOliver That&#39;s the problem: To present a cleancut version of bare essentials for you to inspect. If you don&#39;t know of any rule prohibiting what I tried to do I may have to do this."}, {"owner": {"reputation": 324, "user_id": 5725091, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/6cb95bc33c3861f2a3a728a7fc7734c4?s=128&d=identicon&r=PG", "display_name": "Henrik", "link": "https://stackoverflow.com/users/5725091/henrik"}, "reply_to_user": {"reputation": 397, "user_id": 4814459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60afb4c713089d7bdc658c3866ad91d8?s=128&d=identicon&r=PG&f=1", "display_name": "thefunkyjunky", "link": "https://stackoverflow.com/users/4814459/thefunkyjunky"}, "edited": false, "score": 0, "creation_date": 1452103085, "post_id": 34639493, "comment_id": 57024588, "body": "@thefunkyjunky Yes, that&#39;s what I want."}], "answers": [{"comments": [{"owner": {"reputation": 324, "user_id": 5725091, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/6cb95bc33c3861f2a3a728a7fc7734c4?s=128&d=identicon&r=PG", "display_name": "Henrik", "link": "https://stackoverflow.com/users/5725091/henrik"}, "edited": false, "score": 0, "creation_date": 1452103873, "post_id": 34639597, "comment_id": 57025028, "body": "Thanks, that&#39;s what I wanted to know. I can&#39;t understand why C++ behaves like this, though. If it doesn&#39;t find an operand match in class B it should look in A. Of course! That&#39;s the whole point of inheritance."}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "reply_to_user": {"reputation": 324, "user_id": 5725091, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/6cb95bc33c3861f2a3a728a7fc7734c4?s=128&d=identicon&r=PG", "display_name": "Henrik", "link": "https://stackoverflow.com/users/5725091/henrik"}, "edited": false, "score": 1, "creation_date": 1452112739, "post_id": 34639597, "comment_id": 57030578, "body": "@Henrik - no, that would lead to mysterious bugs. Imagine that you&#39;ve written a class derived from a library class, and your class has a member function <code>void foo(double);</code>.  You can call it with an argument of type <code>int</code>, and the argument will be converted to <code>double</code> in order to make the call. Now suppose a maintenance release of the library adds a member function to that base class, <code>void foo(int);</code>. Now your code would quietly call the base class version instead of your version."}, {"owner": {"reputation": 324, "user_id": 5725091, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/6cb95bc33c3861f2a3a728a7fc7734c4?s=128&d=identicon&r=PG", "display_name": "Henrik", "link": "https://stackoverflow.com/users/5725091/henrik"}, "reply_to_user": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1452115414, "post_id": 34639597, "comment_id": 57031968, "body": "@Pete, I beg to differ. If a third party offers a library class it should publish the interface with documentation and it must remain fixed. Whatever changes are made should only affect the hidden code, never the user interface or the functionality. Backward compatibility is paramount. That&#39;s why industry standards change so slowly."}], "tags": [], "owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "is_accepted": false, "score": 4, "last_activity_date": 1452103412, "last_edit_date": 1452103412, "creation_date": 1452102962, "answer_id": 34639597, "question_id": 34639493, "link": "https://stackoverflow.com/questions/34639493/c-operator-inheritance-and-overloading/34639597#34639597", "title": "C++ operator inheritance and overloading", "body": "<p>The operator in class B hides the operator in class A. This is a problem with any method defined in a derived class that overloads a method in a super class. If name lookup finds a name match in <code>B</code> it doesn't look in <code>A</code>, even if the match(s) found in <code>B</code> can't be called.</p>\n\n<p>You need to bring it into the scope of B:</p>\n\n<pre><code>class X{};\nclass Y{};\n\nclass A {\npublic:\n    auto operator[](X) {};\n};\n\nclass B : public A {\npublic:\n    using A::operator[]; // &lt;-- you need this\n    auto operator[](Y){};\n};\n\n\nint main() {\n    A a;\n    B b;\n    b[X{}]; // OK\n    b[Y{}]; // OK\n}\n</code></pre>\n"}], "owner": {"reputation": 324, "user_id": 5725091, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/6cb95bc33c3861f2a3a728a7fc7734c4?s=128&d=identicon&r=PG", "display_name": "Henrik", "link": "https://stackoverflow.com/users/5725091/henrik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 666, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1452103412, "creation_date": 1452102578, "question_id": 34639493, "link": "https://stackoverflow.com/questions/34639493/c-operator-inheritance-and-overloading", "title": "C++ operator inheritance and overloading", "body": "<p>I have a base class A and a derived class B. A and B both define the [] operator but not with the same argument type. Still, when I try to use the [] operator on an object of type B with A arg C++ doesn't find A's def of this. Very annoying. What's the rule?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "edited": false, "score": 4, "creation_date": 1452102774, "post_id": 34639447, "comment_id": 57024419, "body": "The fact that you want to disable or hide something from the parent class <i>tends</i> to indicate that you probably shouldn&#39;t have used it as a parent class to start with."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 1, "creation_date": 1452102899, "post_id": 34639447, "comment_id": 57024481, "body": "Option 4: Wrap that class without inheritance (any attempt to disable a parent function is unsafe, the function is still accessible after a conversion (cast) to the base class)."}, {"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 0, "creation_date": 1453147424, "post_id": 34639447, "comment_id": 57465430, "body": "I think your design is at fault. Perhaps a rethink"}, {"owner": {"reputation": 1364, "user_id": 4882052, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/b6f17495dcbf1f2bd2ed7e3dfa3cc46f?s=128&d=identicon&r=PG&f=1", "display_name": "Angelus Mortis", "link": "https://stackoverflow.com/users/4882052/angelus-mortis"}, "edited": false, "score": 0, "creation_date": 1453147824, "post_id": 34639447, "comment_id": 57465668, "body": "Is option one is valid C++ I wonder?"}, {"owner": {"reputation": 23772, "user_id": 1035008, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/afa583c070c82a0961be918141f953fe?s=128&d=identicon&r=PG", "display_name": "Yuchen", "link": "https://stackoverflow.com/users/1035008/yuchen"}, "reply_to_user": {"reputation": 1364, "user_id": 4882052, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/b6f17495dcbf1f2bd2ed7e3dfa3cc46f?s=128&d=identicon&r=PG&f=1", "display_name": "Angelus Mortis", "link": "https://stackoverflow.com/users/4882052/angelus-mortis"}, "edited": false, "score": 0, "creation_date": 1453150312, "post_id": 34639447, "comment_id": 57467054, "body": "@AngelusMortis, honestly, I am not sure either and could not find a good reference about this."}, {"owner": {"reputation": 1364, "user_id": 4882052, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/b6f17495dcbf1f2bd2ed7e3dfa3cc46f?s=128&d=identicon&r=PG&f=1", "display_name": "Angelus Mortis", "link": "https://stackoverflow.com/users/4882052/angelus-mortis"}, "edited": false, "score": 0, "creation_date": 1453188344, "post_id": 34639447, "comment_id": 57479946, "body": "@YuchenZhong Then how did you came up with that option?"}, {"owner": {"reputation": 23772, "user_id": 1035008, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/afa583c070c82a0961be918141f953fe?s=128&d=identicon&r=PG", "display_name": "Yuchen", "link": "https://stackoverflow.com/users/1035008/yuchen"}, "reply_to_user": {"reputation": 1364, "user_id": 4882052, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/b6f17495dcbf1f2bd2ed7e3dfa3cc46f?s=128&d=identicon&r=PG&f=1", "display_name": "Angelus Mortis", "link": "https://stackoverflow.com/users/4882052/angelus-mortis"}, "edited": false, "score": 0, "creation_date": 1453216828, "post_id": 34639447, "comment_id": 57498851, "body": "@AngelusMortis, this is long story. It was during one of the code review. I have summited code with option 2 and the team lead suggests that <code>using</code> is redundant and I should remove that. And then I notice it doesn&#39;t build on a different compiler."}, {"owner": {"reputation": 23772, "user_id": 1035008, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/afa583c070c82a0961be918141f953fe?s=128&d=identicon&r=PG", "display_name": "Yuchen", "link": "https://stackoverflow.com/users/1035008/yuchen"}, "reply_to_user": {"reputation": 1364, "user_id": 4882052, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/b6f17495dcbf1f2bd2ed7e3dfa3cc46f?s=128&d=identicon&r=PG&f=1", "display_name": "Angelus Mortis", "link": "https://stackoverflow.com/users/4882052/angelus-mortis"}, "edited": false, "score": 0, "creation_date": 1453217532, "post_id": 34639447, "comment_id": 57499398, "body": "@AngelusMortis, overall, I don&#39;t think this is a very good design either. I should come up with a better strategy here."}, {"owner": {"reputation": 139, "user_id": 1902051, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40ee91728f03780df48bd52c4d8702f8?s=128&d=identicon&r=PG", "display_name": "Patricio Rossi", "link": "https://stackoverflow.com/users/1902051/patricio-rossi"}, "edited": false, "score": 1, "creation_date": 1491680121, "post_id": 34639447, "comment_id": 73664513, "body": "I having a similar issue: When specializing one of my classes to handle an specific type, but only that type, I found that I want to hide the three types from the base class, so I need to hide them, I think the Option 2 is a good way to do it."}, {"owner": {"reputation": 23772, "user_id": 1035008, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/afa583c070c82a0961be918141f953fe?s=128&d=identicon&r=PG", "display_name": "Yuchen", "link": "https://stackoverflow.com/users/1035008/yuchen"}, "reply_to_user": {"reputation": 139, "user_id": 1902051, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40ee91728f03780df48bd52c4d8702f8?s=128&d=identicon&r=PG", "display_name": "Patricio Rossi", "link": "https://stackoverflow.com/users/1902051/patricio-rossi"}, "edited": false, "score": 0, "creation_date": 1491745959, "post_id": 34639447, "comment_id": 73679578, "body": "Hey @PatricioRossi, that&#39;s interesting. But as suggested in other comments above, you should probably move these properties out of the base class."}, {"owner": {"reputation": 139, "user_id": 1902051, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40ee91728f03780df48bd52c4d8702f8?s=128&d=identicon&r=PG", "display_name": "Patricio Rossi", "link": "https://stackoverflow.com/users/1902051/patricio-rossi"}, "edited": false, "score": 0, "creation_date": 1491844547, "post_id": 34639447, "comment_id": 73722611, "body": "@Yuchen Zhong some times you cannot do that, I will paste simple example bellow."}], "answers": [{"tags": [], "owner": {"reputation": 397, "user_id": 4814459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60afb4c713089d7bdc658c3866ad91d8?s=128&d=identicon&r=PG&f=1", "display_name": "thefunkyjunky", "link": "https://stackoverflow.com/users/4814459/thefunkyjunky"}, "is_accepted": false, "score": 3, "last_activity_date": 1452102972, "creation_date": 1452102972, "answer_id": 34639601, "question_id": 34639447, "link": "https://stackoverflow.com/questions/34639447/disable-or-hide-some-parent-class-functions-in-c/34639601#34639601", "title": "Disable or Hide Some Parent Class Functions in C++", "body": "<p>The three options are not the same. For the first two I'm not sure if there is any real difference(I cannot test them as I don't have a computer, but I think they're the same). But the third one is definitely different - it <strong>erases</strong> the method. Thus in the third case you wouldn't be able to call that method from other methods of the class, whereas in the first two cases you would be able to do so.</p>\n"}, {"comments": [{"owner": {"reputation": 23772, "user_id": 1035008, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/afa583c070c82a0961be918141f953fe?s=128&d=identicon&r=PG", "display_name": "Yuchen", "link": "https://stackoverflow.com/users/1035008/yuchen"}, "edited": false, "score": 0, "creation_date": 1491852435, "post_id": 43329300, "comment_id": 73726982, "body": "Can you not move the method <code>void add</code> out of the <code>BasePools</code> and put them into a <code>GenericContainer</code> that derived from <code>BasePools</code>?"}, {"owner": {"reputation": 139, "user_id": 1902051, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40ee91728f03780df48bd52c4d8702f8?s=128&d=identicon&r=PG", "display_name": "Patricio Rossi", "link": "https://stackoverflow.com/users/1902051/patricio-rossi"}, "reply_to_user": {"reputation": 23772, "user_id": 1035008, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/afa583c070c82a0961be918141f953fe?s=128&d=identicon&r=PG", "display_name": "Yuchen", "link": "https://stackoverflow.com/users/1035008/yuchen"}, "edited": false, "score": 0, "creation_date": 1491947970, "post_id": 43329300, "comment_id": 73776862, "body": "Imagine that the vectors are private (in my case they are but not in the example) and there are also more shared methods that uses the vectors."}, {"owner": {"reputation": 23772, "user_id": 1035008, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/afa583c070c82a0961be918141f953fe?s=128&d=identicon&r=PG", "display_name": "Yuchen", "link": "https://stackoverflow.com/users/1035008/yuchen"}, "edited": false, "score": 1, "creation_date": 1491958561, "post_id": 43329300, "comment_id": 73779646, "body": "Well, that&#39;s fair enough. It was more or less the same situation for me when I had to do something like this cuz I was using a 3rd party library ..."}, {"owner": {"reputation": 139, "user_id": 1902051, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40ee91728f03780df48bd52c4d8702f8?s=128&d=identicon&r=PG", "display_name": "Patricio Rossi", "link": "https://stackoverflow.com/users/1902051/patricio-rossi"}, "reply_to_user": {"reputation": 23772, "user_id": 1035008, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/afa583c070c82a0961be918141f953fe?s=128&d=identicon&r=PG", "display_name": "Yuchen", "link": "https://stackoverflow.com/users/1035008/yuchen"}, "edited": false, "score": 0, "creation_date": 1492472914, "post_id": 43329300, "comment_id": 73978581, "body": "Yes, the ideal scenario some times is not there, specially when you are working on already working code that you cannot change, and in that cases this little tricks come handily!"}], "tags": [], "owner": {"reputation": 139, "user_id": 1902051, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40ee91728f03780df48bd52c4d8702f8?s=128&d=identicon&r=PG", "display_name": "Patricio Rossi", "link": "https://stackoverflow.com/users/1902051/patricio-rossi"}, "is_accepted": false, "score": 0, "last_activity_date": 1491844875, "creation_date": 1491844875, "answer_id": 43329300, "question_id": 34639447, "link": "https://stackoverflow.com/questions/34639447/disable-or-hide-some-parent-class-functions-in-c/43329300#43329300", "title": "Disable or Hide Some Parent Class Functions in C++", "body": "<p>In some cases you just need to hide some Methods from the base class, and you cannot remove them, imagine that you have something like this:</p>\n\n<pre><code>/**\n * Draws elements\n */\nclass Type1 {/*class contents*/}\n/**\n * Handle Input\n */\nclass Type2 : public Type1 {/*class contents*/}\n/**\n * Handle Very special input\n */\nclass Type3 : public Type2 {/*class contents*/}\n\nclass BasePools {\n\npublic:\n\n        BasePools(/*some initialization here*/);\n\n        /* some generic functionality methods here, and pure virtual ones */\n        void blah();\n        virtual blah2() = 0;\n        virtual ~BasePools();\n\n        // just as example some setters\n        void add(Type1* newElement) {/* adds element to pool: Type1*/}\n        void add(Type2* newElement) {/* adds element to pools: Type2 and Type1*/}\n        void add(Type3* newElement) {/* adds element to pools: Type3, Type2 and Type1 here*/}\n\nprotected:\n\n        void handleType1() {/* do something with Type1 pool elements */}\n        void handleType2() {/* do something with Type2 pool elements */}\n        void handleType3() {/* do something with Type3 pool elements */}\n\n// control pools.\n        vector&lt;Type1*&gt; poolType1;\n        vector&lt;Type2*&gt; poolType2;\n        vector&lt;Type3*&gt; poolType3;\n}\n\nclass SpecialType2 : public Type2 {/*extends Type2 */}\n\n/**\n * Class that uses SpecialType2 only but needs access to the pools and methods.\n */\nclass SomeSpecialContainer : public BasePools {\n\npublic: \n\n        using BasePools::BasePools;\n\n        // only allow this type.\n        void add(SpecialType2* newElement) {/* adds element to pools: Type2 and Type1*/}\n\nprotected:\n\n        // hide defaul adders.\n        using BasePools::add;\n}\n</code></pre>\n\n<p>As you can see SomeSpecialContainer will only handle SpecialType2 and hide the other base types.</p>\n"}], "owner": {"reputation": 23772, "user_id": 1035008, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/afa583c070c82a0961be918141f953fe?s=128&d=identicon&r=PG", "display_name": "Yuchen", "link": "https://stackoverflow.com/users/1035008/yuchen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3535, "favorite_count": 2, "answer_count": 2, "score": 4, "last_activity_date": 1492552782, "creation_date": 1452102486, "last_edit_date": 1492552782, "question_id": 34639447, "link": "https://stackoverflow.com/questions/34639447/disable-or-hide-some-parent-class-functions-in-c", "title": "Disable or Hide Some Parent Class Functions in C++", "body": "<p>I notice that there there maybe different ways to disable or hide some class member functions inherited from the parent class. </p>\n\n<p>For example, given the following base class: </p>\n\n<pre><code>class Foo {\npublic: \n    void funcA() {}\n};\n</code></pre>\n\n<h3><del>Option 1</del></h3>\n\n<pre><code>class Bar : public Foo {\nprivate:\n     Foo::funcA;\n};\n</code></pre>\n\n<p>(Edit: I notice later one that <strong>Option 1</strong> will have error under <code>clang</code>: \"ISO C++11 does not allow access declarations; use using declaration instead\")</p>\n\n<h3>Option 2</h3>\n\n<pre><code>class Bar : public Foo {\nprivate:\n     using Foo::funcA; \n};\n</code></pre>\n\n<h3>Option 3</h3>\n\n<pre><code>class Bar : public Foo {\npublic:\n    void funcA() = delete; \n};\n</code></pre>\n\n<p>Which is the better way to do it? Or are they equally the same? </p>\n\n<hr>\n\n<p>Before you try doing this, please read comments below by @JeffCoffin et. al:</p>\n\n<blockquote>\n  <p>The fact that you want to disable or hide something from the parent class tends to indicate that you probably shouldn't have used it as a parent class to start with</p>\n</blockquote>\n"}, {"tags": ["c++", "arrays", "string", "char"], "comments": [{"owner": {"reputation": 1261, "user_id": 2303378, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0ff8bb3b43552420897498876c08527d?s=128&d=identicon&r=PG", "display_name": "Denis Blank", "link": "https://stackoverflow.com/users/2303378/denis-blank"}, "edited": false, "score": 0, "creation_date": 1452103235, "post_id": 34639440, "comment_id": 57024683, "body": "Try to use a <code>std::unordered_map&lt;std::string, int&gt;</code> instead of an array, which is easier to use for your purpose. Also you could store the values given by the user in a <code>std::vector&lt;int&gt;</code> instead of an array"}], "answers": [{"tags": [], "owner": {"reputation": 397, "user_id": 4814459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60afb4c713089d7bdc658c3866ad91d8?s=128&d=identicon&r=PG&f=1", "display_name": "thefunkyjunky", "link": "https://stackoverflow.com/users/4814459/thefunkyjunky"}, "is_accepted": false, "score": 0, "last_activity_date": 1452103272, "creation_date": 1452103272, "answer_id": 34639684, "question_id": 34639440, "link": "https://stackoverflow.com/questions/34639440/how-to-assign-values-to-non-single-character-then-calculate-the-sum-of-the-value/34639684#34639684", "title": "How to assign values to non single character then calculate the sum of the values when the characters are inputted in c++", "body": "<p>Since the question is about c++ I would suggest you to use std::unordered_map  or std::map(the latter if you need the variables to be sorted).</p>\n\n<p>Example:</p>\n\n<pre><code>std::map&lt;std::string, int&gt; marray;\nmarray[\"t1\"] = 1;\n\n....\n\nstd::string name;\nint val;\nstd::cin &gt;&gt; name &gt;&gt; value;\nmarray[name] = value;\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 4806353, "user_type": "registered", "profile_image": "https://graph.facebook.com/1641062922774582/picture?type=large", "display_name": "Mahmood Abubakar", "link": "https://stackoverflow.com/users/4806353/mahmood-abubakar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 38, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1452103272, "creation_date": 1452102472, "question_id": 34639440, "link": "https://stackoverflow.com/questions/34639440/how-to-assign-values-to-non-single-character-then-calculate-the-sum-of-the-value", "title": "How to assign values to non single character then calculate the sum of the values when the characters are inputted in c++", "body": "<p>I need to assign the values 3,4,6,7 and 9 to characters t1,t2,t3,t4 and t5 respectively, so that when you input some characters you can get the sum of the assigned values of those characters. for example if you enter t1t2 you get 7 or when input t1t3t4 you get 16 and so on. Below is the code that i tried but i realised that char variable only recognizes single character, but in my case all the characters are double characters (an alphabet and a number e.g t1) which i might need the use of string but i dont know how. any help would be appreciated.</p>\n\n<pre><code>#include &lt;iomanip&gt;\n#include &lt;iostream&gt;\n#include &lt;cstring&gt;\nusing namespace std;\n\nint main()\n{\nchar items[] = \"t1t2t3t4t5\";\nint values[] = {3,4,6,7,9};\nchar entry[100];\nstd::cout&lt;&lt;\"Enter an entry: \";\nstd::cin&gt;&gt; std::setw ( 100 ) &gt;&gt; entry;\n\nint sum = 0;\nfor ( int i = 0; entry[i] != '\\0'; i++ ) {\nfor ( int j = 0; items[j] != '\\0'; j++ ) {\nif ( entry[i] == items[j] )\n  sum += values[j];}\ncout&lt;&lt; endl;     }\n  std::cout&lt;&lt; \"The sum is: \"&lt;&lt;sum;\n    cout&lt;&lt;endl;\n}\n</code></pre>\n\n<p>the above code obviously does not treat my items as single character, it separate the ts with the numbers and treat them individually.  </p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1452102427, "post_id": 34639388, "comment_id": 57024219, "body": "Maybe you should show your Makefile so we can debug the build issue."}, {"owner": {"reputation": 67, "user_id": 5753571, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/43f8625197c0e70f933af0ac8506456f?s=128&d=identicon&r=PG&f=1", "display_name": "honeyPot", "link": "https://stackoverflow.com/users/5753571/honeypot"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1452102522, "post_id": 34639388, "comment_id": 57024277, "body": "again i say i&#39;m total beginner, if you can simplify for me i would be thankfull"}, {"owner": {"reputation": 1261, "user_id": 2303378, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0ff8bb3b43552420897498876c08527d?s=128&d=identicon&r=PG", "display_name": "Denis Blank", "link": "https://stackoverflow.com/users/2303378/denis-blank"}, "edited": false, "score": 0, "creation_date": 1452102588, "post_id": 34639388, "comment_id": 57024312, "body": "Your code builds fine in coliru <a href=\"http://coliru.stacked-crooked.com/a/4638c5a7b23faa1a\" rel=\"nofollow noreferrer\">coliru.stacked-crooked.com/a/4638c5a7b23faa1a</a>, however clang indicated a array out of bounds access at <code>while (v[i] &lt; v[7])</code>. Your array has a size of 7 and you are accessing the 8. element."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1452102597, "post_id": 34639388, "comment_id": 57024320, "body": "Although your code did not output anything on ideone because you did not initialize v before while (v[i]&lt; v[7]) and also it is an out of bounds access like Denis mentioned which invokes undefined behavior."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1452102801, "post_id": 34639388, "comment_id": 57024431, "body": "<b><i>again i say i&#39;m total beginner, if you can simplify for me i would be thankfull</i></b> Its nearly impossible to help with a build issue when we have to guess how you are building."}, {"owner": {"reputation": 67, "user_id": 5753571, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/43f8625197c0e70f933af0ac8506456f?s=128&d=identicon&r=PG&f=1", "display_name": "honeyPot", "link": "https://stackoverflow.com/users/5753571/honeypot"}, "edited": false, "score": 0, "creation_date": 1452102852, "post_id": 34639388, "comment_id": 57024457, "body": "drescherjm Isn&#39;t &#39;int v [7];&#39; for that? Denis Black So i should make i = 1?"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1452103016, "post_id": 34639388, "comment_id": 57024545, "body": "<b><i>drescherjm Isn&#39;t &#39;int v [7];&#39; for that?</i></b> No. You did not put any values in the array so they are filled with random values. <b><i>So i should make i = 1</i></b> No. You should use <code>int v [8];</code> if you plan on using v[7]."}, {"owner": {"reputation": 8652, "user_id": 2040863, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IspsC.jpg?s=128&g=1", "display_name": "John Hascall", "link": "https://stackoverflow.com/users/2040863/john-hascall"}, "edited": false, "score": 0, "creation_date": 1452103218, "post_id": 34639388, "comment_id": 57024673, "body": "In c++ (and many other programming languages) arrays go from 0 to n-1.  So your <code>int v[8]</code> has 8 elements: 0, 1, 2, 3, 4, 5, 6 &amp; 7."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1452103496, "post_id": 34639388, "comment_id": 57024828, "body": "Maybe you want to replace: <code>while (v[i]&lt; v[7])</code>  with <code>while (i &lt; 7)</code>. I have no idea what you are trying to do with <code>while (v[i]&lt; v[7])</code> and how that matches your question."}], "answers": [{"comments": [{"owner": {"reputation": 3342, "user_id": 1745372, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/7Wvvn.jpg?s=128&g=1", "display_name": "Kadir Erdem Demir", "link": "https://stackoverflow.com/users/1745372/kadir-erdem-demir"}, "edited": false, "score": 2, "creation_date": 1452103468, "post_id": 34639687, "comment_id": 57024813, "body": "I don&#39;t understand what  &quot;while (v[i]&lt; v[7])&quot; part does.  Why not use &quot;i &lt; 7&quot;"}, {"owner": {"reputation": 67, "user_id": 5753571, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/43f8625197c0e70f933af0ac8506456f?s=128&d=identicon&r=PG&f=1", "display_name": "honeyPot", "link": "https://stackoverflow.com/users/5753571/honeypot"}, "edited": false, "score": 0, "creation_date": 1452103564, "post_id": 34639687, "comment_id": 57024865, "body": "Thank you for your help man really i appreciate so much it worked."}, {"owner": {"reputation": 978, "user_id": 1902082, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/f46590cf12954aeab118e32b10f0ed97?s=128&d=identicon&r=PG", "display_name": "scooter me fecit", "link": "https://stackoverflow.com/users/1902082/scooter-me-fecit"}, "reply_to_user": {"reputation": 3342, "user_id": 1745372, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/7Wvvn.jpg?s=128&g=1", "display_name": "Kadir Erdem Demir", "link": "https://stackoverflow.com/users/1745372/kadir-erdem-demir"}, "edited": false, "score": 0, "creation_date": 1452103630, "post_id": 34639687, "comment_id": 57024900, "body": "@KadirErdemDemir: Neither do I, but, the again, it&#39;s not my code. Giving the OP some hints on what&#39;s broken; it&#39;s not helpful to try and read the OP&#39;s mind on an incompletely specified problem."}, {"owner": {"reputation": 978, "user_id": 1902082, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/f46590cf12954aeab118e32b10f0ed97?s=128&d=identicon&r=PG", "display_name": "scooter me fecit", "link": "https://stackoverflow.com/users/1902082/scooter-me-fecit"}, "reply_to_user": {"reputation": 67, "user_id": 5753571, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/43f8625197c0e70f933af0ac8506456f?s=128&d=identicon&r=PG&f=1", "display_name": "honeyPot", "link": "https://stackoverflow.com/users/5753571/honeypot"}, "edited": false, "score": 0, "creation_date": 1452103873, "post_id": 34639687, "comment_id": 57025029, "body": "@FilipTrajkoski: Glad to help. <code>cout</code> is a fairly powerful debugging tool -- don&#39;t hesitate to output messages so that you can tell where your program is currently executing. (And click the accepted answer icon)"}, {"owner": {"reputation": 67, "user_id": 5753571, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/43f8625197c0e70f933af0ac8506456f?s=128&d=identicon&r=PG&f=1", "display_name": "honeyPot", "link": "https://stackoverflow.com/users/5753571/honeypot"}, "edited": false, "score": 0, "creation_date": 1452103880, "post_id": 34639687, "comment_id": 57025035, "body": "why easy when you can do it hard , i corrected it and used &quot;i&lt;7&quot;. im just trying evrything to see can it work"}, {"owner": {"reputation": 978, "user_id": 1902082, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/f46590cf12954aeab118e32b10f0ed97?s=128&d=identicon&r=PG", "display_name": "scooter me fecit", "link": "https://stackoverflow.com/users/1902082/scooter-me-fecit"}, "reply_to_user": {"reputation": 67, "user_id": 5753571, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/43f8625197c0e70f933af0ac8506456f?s=128&d=identicon&r=PG&f=1", "display_name": "honeyPot", "link": "https://stackoverflow.com/users/5753571/honeypot"}, "edited": false, "score": 0, "creation_date": 1452104006, "post_id": 34639687, "comment_id": 57025120, "body": "@FilipTrajkoski: You could also replace the second while loop with <code>for (int j = 1; !myStack.empty(); ++j)</code> if you want to be more compact. You would also be able to eliminate the extra <code>j++</code> at the end of the <code>while</code> loop."}], "tags": [], "owner": {"reputation": 978, "user_id": 1902082, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/f46590cf12954aeab118e32b10f0ed97?s=128&d=identicon&r=PG", "display_name": "scooter me fecit", "link": "https://stackoverflow.com/users/1902082/scooter-me-fecit"}, "is_accepted": false, "score": 0, "last_activity_date": 1452103282, "creation_date": 1452103282, "answer_id": 34639687, "question_id": 34639388, "link": "https://stackoverflow.com/questions/34639388/nothing-to-build-c/34639687#34639687", "title": "Nothing to build c++", "body": "<p>And the answer is: there isn't anything to build because the code isn't out of date. You're just seeing a message from the build system, which I'm assuming is an IDE (Eclipse? MS tools? Which one?)</p>\n\n<p>The clue is that your program is executing because you can terminate it. You actually have a few bugs -- the size of the <code>v</code> array should be 8, not 7. Another bug is the last line of main: <code>cin &gt;&gt; v[1]</code>. If you don't have an infinite loop, the program might be waiting for you to type something (but you don't know that because the program hasn't told you that it's waiting for input.)</p>\n\n<p>Also, it's proper form to return a value from a function that has a return type other than <code>void</code>. <code>main()</code> returns an integer value, so you also want to add <code>return 0</code> as the last statement. Of course, you can return any integer value you like, but convention holds that returning zero indicates successful execution (no errors.)</p>\n\n<p>Somewhat corrected code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;stack&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;ctime&gt;\nusing namespace std;\n\nint main()\n{\n  srand(time(NULL));\n\n  int v[8];\n  int i = 0;\n  stack&lt;int&gt; myStack;\n\n  cout &lt;&lt; \"Seeding random values...\" &lt;&lt; endl;\n\n  while (v[i]&lt; v[7])\n  {\n    v[i] = 1+(rand()% 38);\n    i++;\n    myStack.push(v[i]);\n  }\n\n  int j = 1;\n\n  while(!myStack.empty())\n  {\n    cout &lt;&lt; j &lt;&lt; \" broj je: \" &lt;&lt; myStack.top() &lt;&lt; endl;\n    myStack.pop();\n    j++;\n  }\n\n  cout &lt;&lt; \"Enter a value for v[1]: \";\n  cin &gt;&gt; v[1];\n\n  return 0;\n}\n</code></pre>\n\n<p>If you have an infinite loop in the first <code>while</code> loop, you will never see the \"Enter a value for v[1]\" prompt. Otherwise, you'll get the prompt to enter a value and your program should terminate correctly.</p>\n"}, {"comments": [{"owner": {"reputation": 67, "user_id": 5753571, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/43f8625197c0e70f933af0ac8506456f?s=128&d=identicon&r=PG&f=1", "display_name": "honeyPot", "link": "https://stackoverflow.com/users/5753571/honeypot"}, "edited": false, "score": 0, "creation_date": 1452104688, "post_id": 34640010, "comment_id": 57025507, "body": "Yes just to leave it open. is there anything else to do so it stays open? I corrected both while loops to for loops."}, {"owner": {"reputation": 700, "user_id": 279610, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd710af7534fdcab7c8d2b9d3812182c?s=128&d=identicon&r=PG&f=1", "display_name": "robsn", "link": "https://stackoverflow.com/users/279610/robsn"}, "reply_to_user": {"reputation": 67, "user_id": 5753571, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/43f8625197c0e70f933af0ac8506456f?s=128&d=identicon&r=PG&f=1", "display_name": "honeyPot", "link": "https://stackoverflow.com/users/5753571/honeypot"}, "edited": false, "score": 0, "creation_date": 1452105175, "post_id": 34640010, "comment_id": 57025801, "body": "@FilipTrajkoski You can use <code>cin.get();</code>, <code>std::getchar()</code> or <code>system(&quot;pause&quot;)</code> to keep the console open. There are different possibilities depending on your OS. Comparing to check for doubles, sure, but again, a stack is not made for that."}, {"owner": {"reputation": 700, "user_id": 279610, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd710af7534fdcab7c8d2b9d3812182c?s=128&d=identicon&r=PG&f=1", "display_name": "robsn", "link": "https://stackoverflow.com/users/279610/robsn"}, "reply_to_user": {"reputation": 67, "user_id": 5753571, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/43f8625197c0e70f933af0ac8506456f?s=128&d=identicon&r=PG&f=1", "display_name": "honeyPot", "link": "https://stackoverflow.com/users/5753571/honeypot"}, "edited": false, "score": 0, "creation_date": 1452105977, "post_id": 34640010, "comment_id": 57026333, "body": "@FilipTrajkoski I added a function to keep the console open. This is the method from <a href=\"http://www.stroustrup.com/Programming/\" rel=\"nofollow noreferrer\">Bjarne&#39;s Programming Principles and Practice Using C++ book</a>."}], "tags": [], "owner": {"reputation": 700, "user_id": 279610, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd710af7534fdcab7c8d2b9d3812182c?s=128&d=identicon&r=PG&f=1", "display_name": "robsn", "link": "https://stackoverflow.com/users/279610/robsn"}, "is_accepted": false, "score": 0, "last_activity_date": 1452105426, "last_edit_date": 1452105426, "creation_date": 1452104391, "answer_id": 34640010, "question_id": 34639388, "link": "https://stackoverflow.com/questions/34639388/nothing-to-build-c/34640010#34640010", "title": "Nothing to build c++", "body": "<p>Some simplifications.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;stack&gt;\n#include &lt;ctime&gt;\nusing namespace std;\n\ninline void keep_window_open()\n{\n    cin.clear();\n    cout &lt;&lt; \"Please enter a character to exit\\n\";\n    char ch;\n    cin &gt;&gt; ch;\n    return;\n}\n\nint main()\n{\n    srand(time(NULL));\n\n    constexpr int number_count {7};\n    stack&lt;int&gt; myStack;\n\n    // use a for loop as you know the number of repetitions\n    for(int i {0}; i&lt;number_count; ++i)\n    {\n        myStack.push(1+(rand()% 38)); // no need for an inbetween variable\n    }\n\n    int j {1};\n    while(!myStack.empty())\n    {\n        /* Next line: j++ uses the post increment notation.\n           It increments after each cout. */\n        cout &lt;&lt; j++ &lt;&lt; \" broj je: \" &lt;&lt; myStack.top() &lt;&lt; endl;\n        myStack.pop();\n    }\n\n    keep_window_open();\n\n    return 0;\n}\n</code></pre>\n\n<p>Anyhow, I wouldn't use a stack because it's a pain to sort, you might want to order the output. Also, you should add a mechanism to check for doubles.</p>\n"}], "owner": {"reputation": 67, "user_id": 5753571, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/43f8625197c0e70f933af0ac8506456f?s=128&d=identicon&r=PG&f=1", "display_name": "honeyPot", "link": "https://stackoverflow.com/users/5753571/honeypot"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 88, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1452105426, "creation_date": 1452102276, "last_edit_date": 1452102881, "question_id": 34639388, "link": "https://stackoverflow.com/questions/34639388/nothing-to-build-c", "title": "Nothing to build c++", "body": "<p>I have to say I'm beginner in programming, and I'm trying to make a loto program. A program that generates 7 random numbers. I'm using stack to store numbers.</p>\n\n<p>Here is my code:</p>\n\n<pre><code> #include &lt;iostream&gt;\n #include &lt;stack&gt;\n #include &lt;stdlib.h&gt;\n #include &lt;ctime&gt;\n using namespace std;\n\n int main()\n{\n   srand(time(NULL));\n   int v[7];\n   int i = 0;\n   stack&lt;int&gt; myStack;\n\nwhile (v[i]&lt; v[7])\n{\n    v[i] = 1+(rand()% 38);\n    i++;\n    myStack.push(v[i]);\n}\nint j = 1;\n\nwhile(!myStack.empty())\n{\n\n    cout &lt;&lt; j &lt;&lt; \" broj je: \" &lt;&lt; myStack.top() &lt;&lt; endl;\n    myStack.pop();\n    j++;\n}\ncin &gt;&gt; v[1];\n}\n</code></pre>\n\n<p>When I build it says it's okay. But when I try to run it, it prints <code>Info: Nothing to build for loto3</code>, just for a second and then it vanishes, then console stays empty, but program is still running because I can terminate it.</p>\n\n<p>I'm using gcc, when I try to compile a basic hello world program it runs with no problem.</p>\n"}, {"tags": ["c++", "qt", "taglib", "mxe"], "comments": [{"owner": {"reputation": 2157, "user_id": 406310, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c215d21410f50000b50ef0ea545a8b00?s=128&d=identicon&r=PG", "display_name": "Vin&#237;cius Gobbo A. de Oliveira", "link": "https://stackoverflow.com/users/406310/vin%c3%adcius-gobbo-a-de-oliveira"}, "edited": false, "score": 0, "creation_date": 1452102528, "post_id": 34639214, "comment_id": 57024278, "body": "Since taglib compiled fine, it is likely you are missing an include path. Have you compared the include paths of taglib with the paths of your app?"}, {"owner": {"reputation": 41, "user_id": 5753465, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DSqm1.png?s=128&g=1", "display_name": "selli69", "link": "https://stackoverflow.com/users/5753465/selli69"}, "reply_to_user": {"reputation": 2157, "user_id": 406310, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c215d21410f50000b50ef0ea545a8b00?s=128&d=identicon&r=PG", "display_name": "Vin&#237;cius Gobbo A. de Oliveira", "link": "https://stackoverflow.com/users/406310/vin%c3%adcius-gobbo-a-de-oliveira"}, "edited": false, "score": 0, "creation_date": 1452103059, "post_id": 34639214, "comment_id": 57024569, "body": "Like i said: it compiles fine under native Linux/QtCreator with the shared system libraries. The Problem comes up, when i compile with the mxe environment (static)."}, {"owner": {"reputation": 41, "user_id": 5753465, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DSqm1.png?s=128&g=1", "display_name": "selli69", "link": "https://stackoverflow.com/users/5753465/selli69"}, "reply_to_user": {"reputation": 2157, "user_id": 406310, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c215d21410f50000b50ef0ea545a8b00?s=128&d=identicon&r=PG", "display_name": "Vin&#237;cius Gobbo A. de Oliveira", "link": "https://stackoverflow.com/users/406310/vin%c3%adcius-gobbo-a-de-oliveira"}, "edited": false, "score": 0, "creation_date": 1452103543, "post_id": 34639214, "comment_id": 57024854, "body": "as the headerfile is embraced by &lt;..h&gt; the compiler should automatically find the header in the library pathes."}], "owner": {"reputation": 41, "user_id": 5753465, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DSqm1.png?s=128&g=1", "display_name": "selli69", "link": "https://stackoverflow.com/users/5753465/selli69"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 209, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1452173903, "creation_date": 1452101727, "last_edit_date": 1495540746, "question_id": 34639214, "link": "https://stackoverflow.com/questions/34639214/crosscompiling-my-linux-qt-project-with-mxe-fails-library-not-found", "title": "Crosscompiling my Linux QT Project with MXE fails. Library not found", "body": "<p>I have a QT5 Project on Linux using taglib. It compiles fine inside QtCreator and runs flawless under Linux.</p>\n\n<p>Now I want to Crosscompile the code using MXE. I've downloaded and \"installed\" MXE according the docs. I did a \"make\" for making all libraries crosscompiled. I also set my PATH as described in the docs.</p>\n\n<p>the qmake run makes no errors, but when i \"make\" the project, the compiler complains:</p>\n\n<pre><code>./tagprocessortaglib.h:12:21: fatal error: fileref.h: No such file or directory\n#include &lt;fileref.h&gt;\n                 ^\ncompilation terminated.\n</code></pre>\n\n<p>fileref.h is one of the library headers used by taglib, its furthermore the first of 3 includes of that lib.</p>\n\n<p>In my .pro file, this two lines were added by QtCreator as i included the library for linux:</p>\n\n<pre><code>unix: CONFIG += link_pkgconfig\nunix: PKGCONFIG += taglib\n</code></pre>\n\n<p>Are there any configurations to do for the library that I've missed? Any help is welcome! Thanks in advance!</p>\n\n<p><strong>Solved the issue:</strong>\nI applied the Solution posted here: <a href=\"https://stackoverflow.com/questions/24715721/compiling-qt-project-for-win32-target-on-linux-pc-with-larmadillo?rq=1\">Compiling QT project for win32 target on Linux PC with larmadillo</a></p>\n\n<p>and added the path to the library, this works for the MXR compiler run, but i have to remove it before native compiler runs.</p>\n"}, {"tags": ["c++", "memory"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1452101599, "post_id": 34639124, "comment_id": 57023677, "body": "<i>but it produced a really weird error that a few software engineers haven&#39;t been able to solve</i> you should say what the error is."}, {"owner": {"reputation": 103, "user_id": 5753509, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KzEHi.gif?s=128&g=1", "display_name": "goruda", "link": "https://stackoverflow.com/users/5753509/goruda"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1452102251, "post_id": 34639124, "comment_id": 57024107, "body": "Thanks, edited with that info"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1452102324, "post_id": 34639124, "comment_id": 57024148, "body": "Welcome to Stack Overflow! It sounds like you may need to learn how to use a debugger to step through your code. With a good debugger, you can execute your program line by line and see where it is deviating from what you expect. This is an essential tool if you are going to do any programming.  Further reading: <b><a href=\"http://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">How to debug small programs</a></b>"}, {"owner": {"reputation": 103, "user_id": 5753509, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KzEHi.gif?s=128&g=1", "display_name": "goruda", "link": "https://stackoverflow.com/users/5753509/goruda"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1452102457, "post_id": 34639124, "comment_id": 57024243, "body": "Hi Nathan, we actually did that using VS 2015, step by step.  Still can&#39;t explain the odd results.  One of the SW engi&#39;s said it seems like this string is &quot;smashing the stack&quot; which shouldn&#39;t be possible here, and I&#39;m not going to pretend I know what that means."}], "answers": [{"comments": [{"owner": {"reputation": 5146, "user_id": 5089383, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4d483ecc01086edbc775bd770c66b5e4?s=128&d=identicon&r=PG&f=1", "display_name": "JSF", "link": "https://stackoverflow.com/users/5089383/jsf"}, "edited": false, "score": 0, "creation_date": 1452102605, "post_id": 34639423, "comment_id": 57024325, "body": "Text in quotes is a text constant, which decays to a <code>char*</code> in most uses, including this.  Adding a char constant <code>&#39;$&#39;</code> to a <code>char*</code> advances the address.  It does not concatenate.  If either side of the addition is a string, you get concatenation, such as <code>&quot;Derivative= &quot; + (&#39;$&#39; + to_string(a * 2))</code>"}, {"owner": {"reputation": 943, "user_id": 433534, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5dabfa8e61ed66c86cd30de3e3727e8?s=128&d=identicon&r=PG", "display_name": "user433534", "link": "https://stackoverflow.com/users/433534/user433534"}, "edited": false, "score": 0, "creation_date": 1452102699, "post_id": 34639423, "comment_id": 57024382, "body": "@Andrea - it&#39;s not a char* but a character array, which then decays easily to a char* when a number - such as the ASCII code of the dollar symbol - is added to it."}, {"owner": {"reputation": 103, "user_id": 5753509, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KzEHi.gif?s=128&g=1", "display_name": "goruda", "link": "https://stackoverflow.com/users/5753509/goruda"}, "edited": false, "score": 0, "creation_date": 1452102987, "post_id": 34639423, "comment_id": 57024531, "body": "Thanks Andrea and JSF!"}], "tags": [], "owner": {"reputation": 1920, "user_id": 2277746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GrXaZ.jpg?s=128&g=1", "display_name": "Andrea Dusza", "link": "https://stackoverflow.com/users/2277746/andrea-dusza"}, "is_accepted": true, "score": 3, "last_activity_date": 1452103294, "last_edit_date": 1452103294, "creation_date": 1452102424, "answer_id": 34639423, "question_id": 34639124, "link": "https://stackoverflow.com/questions/34639124/a-puzzle-on-an-beginners-program/34639423#34639423", "title": "A puzzle on an beginner&#39;s program", "body": "<p>The problem is with the lines when you create the <code>answerWriter</code> strings:</p>\n\n<pre><code> string answerWriter = \"Derivative= \" + '$' + to_string(a * 2) + 'x' + to_string(b) + '$';  \n</code></pre>\n\n<p><code>\"Derivative= \"</code> is a character array, not a <code>string</code>. You cannot concatenate characters to it.</p>\n\n<p>Change it to this:</p>\n\n<pre><code>string answerWriter = string(\"Derivative\")+ '$' + to_string(a * 2) + 'x' + to_string(b) + '$'; \n</code></pre>\n"}], "owner": {"reputation": 103, "user_id": 5753509, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KzEHi.gif?s=128&g=1", "display_name": "goruda", "link": "https://stackoverflow.com/users/5753509/goruda"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "accepted_answer_id": 34639423, "answer_count": 1, "score": -3, "last_activity_date": 1452103294, "creation_date": 1452101459, "last_edit_date": 1452102237, "question_id": 34639124, "link": "https://stackoverflow.com/questions/34639124/a-puzzle-on-an-beginners-program", "title": "A puzzle on an beginner&#39;s program", "body": "<p>I wrote this dumb little program after watching about an hour of C++ tutorial.  It is garbage, but it produced a really weird error that a few software engineers haven't been able to solve, so now it's interesting to us.</p>\n\n<p>It is supposed to spit out binomials and trinomials, and then give the derivative for the trinomials.  The dollar signs are there to help me copypasta into LaTeX.</p>\n\n<p>EDIT: The exact error in the output is it's posting:\n\"inear equations do you need?-12x+8$\"\ninstead of \n\"Derivative= \"</p>\n\n<p>Thanks for the comment.</p>\n\n<p>A /highfive for anyone who figures out why the output is so weird.</p>\n\n<p><strong>The output:</strong></p>\n\n<pre><code>How many sets of 3 linear equations do you need?\n2\nHow many sets of 3 quadratics do you need?\n2\n12x-3\n-3x+12\n-5x-9\n15x-5\n-5x+15\n-4x-2\n$8x^2-15x-6$\ninear equations do you need?16x-15$\n$-15x^2-6x+8$\ninear equations do you need?-30x-6$\n$-6x^28x-15$\ninear equations do you need?-12x+8$\n$2x^2-13x-2$\ninear equations do you need?4x-13$\n$-13x^2-2x+2$\ninear equations do you need?-26x-2$\n$-2x^22x-13$\ninear equations do you need?-4x+2$\n$11x^2-3x-13$\ninear equations do you need?22x-3$\n$-3x^2-13x+11$\ninear equations do you need?-6x-13$\n$-13x^211x-3$\ninear equations do you need?-26x+11$\nPress any key to continue . . .\n</code></pre>\n\n<p><strong>The Code:</strong></p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include &lt;string&gt;\n#include &lt;fstream&gt;\n/*Simple Function maker*/\nusing namespace std;\n\n\n\nvoid polynomial(string numberOfPolys)\n{\n    /*AX^2+BX+C format*/\n    for (int i = 0; i &lt;= (std::stoi(numberOfPolys, 0)); i++) {\n        int a = (rand() % 15) + 1;\n        int b = -1 * ((rand() % 15) + 1);\n        int c = -1 * ((rand() % 15) + 1);\n        int d = -1 * ((rand() % 15) + 1);\n        string problemWriter = '$' + to_string(a) + 'x' + '^' + '2' + to_string(b) + 'x' + to_string(c) + '$';\n        string problemWriter2 = '$' + to_string(b) + 'x' + '^' + '2' + to_string(c) + 'x' + '+' + to_string(a) + '$';\n        string problemWriter3 = '$' + to_string(c) + 'x' + '^' + '2' + to_string(a) + 'x' + to_string(b) + '$';\n\n        string answerWriter = \"Derivative= \" + '$' + to_string(a * 2) + 'x' + to_string(b) + '$';\n        string answerWriter2 = \"Derivative= \" + '$' + to_string(b * 2) + 'x' + to_string(c) + '$';\n        string answerWriter3 = \"Derivative= \" + '$' + to_string(c * 2) + 'x' + '+' + to_string(a) + '$';\n\n        cout &lt;&lt; problemWriter &lt;&lt; endl;\n        cout &lt;&lt; answerWriter &lt;&lt; endl;\n\n        cout &lt;&lt; problemWriter2 &lt;&lt; endl;\n        cout &lt;&lt; answerWriter2 &lt;&lt; endl;\n\n        cout &lt;&lt; problemWriter3 &lt;&lt; endl;\n        cout &lt;&lt; answerWriter3 &lt;&lt; endl;\n    }\n\n}\n\n\nint main()\n{   /*MX+B format*/\n\n\n    string input;\n    string polys;\n\n    cout &lt;&lt; \"How many sets of 3 linear equations do you need?\" &lt;&lt; endl;\n    getline(cin, input);\n    cout &lt;&lt; \"How many sets of 3 quadratics do you need?\" &lt;&lt; endl;\n    getline(cin, polys);\n\n\n\n    for (int i = 0; i &lt; (std::stoi(input, 0)); i++) {\n        int f = (rand() % 15) + 1;\n        int g = -1 * ((rand() % 15) + 1);\n        int h = -1 * ((rand() % 15) + 1);\n        int k = -1 * (rand() % 15) + 1;\n        string problemLWriter = to_string(f) + 'x' + to_string(g);\n        string problemLWriter2 = to_string(g) + 'x' + '+' + to_string(f);\n        string problemLWriter3 = to_string(h) + 'x' + to_string(k);\n        cout &lt;&lt; problemLWriter &lt;&lt; endl;\n        cout &lt;&lt; problemLWriter2 &lt;&lt; endl;\n        cout &lt;&lt; problemLWriter3 &lt;&lt; endl;\n    }\n    polynomial(polys);\n    return 0;\n\n}\n</code></pre>\n"}, {"tags": ["c++", "templates", "template-templates"], "comments": [{"owner": {"reputation": 2827, "user_id": 3931225, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/46nwm.gif?s=128&g=1", "display_name": "KompjoeFriek", "link": "https://stackoverflow.com/users/3931225/kompjoefriek"}, "edited": false, "score": 0, "creation_date": 1452102017, "post_id": 34639002, "comment_id": 57023938, "body": "Are you aware you are using <code>specialize</code> and <code>specialise</code>? It looks confusing to me."}, {"owner": {"reputation": 40655, "user_id": 1023390, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/2g9CZ.jpg?s=128&g=1", "display_name": "Walter", "link": "https://stackoverflow.com/users/1023390/walter"}, "reply_to_user": {"reputation": 2827, "user_id": 3931225, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/46nwm.gif?s=128&g=1", "display_name": "KompjoeFriek", "link": "https://stackoverflow.com/users/3931225/kompjoefriek"}, "edited": false, "score": 0, "creation_date": 1452102088, "post_id": 34639002, "comment_id": 57023986, "body": "@KompjoeFriek fixed that."}, {"owner": {"reputation": 2880, "user_id": 2672165, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/92556a84fe9a5abab9cf35ffc367366e?s=128&d=identicon&r=PG", "display_name": "user2672165", "link": "https://stackoverflow.com/users/2672165/user2672165"}, "edited": false, "score": 0, "creation_date": 1452102388, "post_id": 34639002, "comment_id": 57024191, "body": "Just by curiousity I wonder if this one is related <a href=\"http://stackoverflow.com/questions/25202250/c-template-instantiation-avoiding-long-switches\" title=\"c template instantiation avoiding long switches\">stackoverflow.com/questions/25202250/&hellip;</a> ?"}, {"owner": {"reputation": 40655, "user_id": 1023390, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/2g9CZ.jpg?s=128&g=1", "display_name": "Walter", "link": "https://stackoverflow.com/users/1023390/walter"}, "reply_to_user": {"reputation": 2880, "user_id": 2672165, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/92556a84fe9a5abab9cf35ffc367366e?s=128&d=identicon&r=PG", "display_name": "user2672165", "link": "https://stackoverflow.com/users/2672165/user2672165"}, "edited": false, "score": 0, "creation_date": 1452166782, "post_id": 34639002, "comment_id": 57053486, "body": "@user2672165 in some sense yes, but not directly."}], "answers": [{"comments": [{"owner": {"reputation": 40655, "user_id": 1023390, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/2g9CZ.jpg?s=128&g=1", "display_name": "Walter", "link": "https://stackoverflow.com/users/1023390/walter"}, "edited": false, "score": 0, "creation_date": 1452166716, "post_id": 34642501, "comment_id": 57053454, "body": "correct. I had figured this out by myself mean while ... and thx for the edits -- you obviously tried this out! I&#39;ve only ever seen this usage of the <code>template</code> key word when followed by <code>&lt;&gt;</code>, e.g. <code>ptr-&gt;template func&lt;0&gt;()</code>."}], "tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": true, "score": 1, "last_activity_date": 1452113402, "creation_date": 1452113402, "answer_id": 34642501, "question_id": 34639002, "link": "https://stackoverflow.com/questions/34639002/trouble-with-specialising-template-template-parameters/34642501#34642501", "title": "trouble with specialising template template parameters", "body": "<p>The keyword to add is not <code>typename</code> as it is not a type, but <code>template</code>.</p>\n\n<p>So, the call should be</p>\n\n<pre><code>template&lt;int Bar&gt;\nvoid blah(Foo::option opt, std::string const&amp; str)\n{\n    using Aux = specialise&lt;int, Foo::option, Bar, Helper&gt;\n    Switch&lt;Aux::template special&gt;(foo, ptr, str);\n}\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/6132c1a3ace2e30d\" rel=\"nofollow\">Live Demo</a></p>\n"}], "owner": {"reputation": 40655, "user_id": 1023390, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/2g9CZ.jpg?s=128&g=1", "display_name": "Walter", "link": "https://stackoverflow.com/users/1023390/walter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "accepted_answer_id": 34642501, "answer_count": 1, "score": 0, "last_activity_date": 1452113586, "creation_date": 1452101084, "last_edit_date": 1452113586, "question_id": 34639002, "link": "https://stackoverflow.com/questions/34639002/trouble-with-specialising-template-template-parameters", "title": "trouble with specialising template template parameters", "body": "<p>I often use the following construction for converting run-time (dynamic) arguments into compile-time (static) arguments</p>\n\n<pre><code>namespace Foo {\n  enum struct option { A,B,C,D,E,F };\n\n  template&lt;template&lt;option&gt; class Func, typename... Args&gt;\n  auto Switch(option opt, Args&amp;&amp;...args)\n  -&gt; decltype(Func&lt;option::A&gt;::act(std::forward&lt;Args&gt;(args)...))\n  {\n    switch(opt) {\n    case option::A : return Func&lt;option::A&gt;::act(std::forward&lt;Args&gt;(args)...);\n    case option::B : return Func&lt;option::B&gt;::act(std::forward&lt;Args&gt;(args)...);\n    // etc.\n  }\n}\n</code></pre>\n\n<p>For example</p>\n\n<pre><code>template&lt;Foo::option&gt;\nvoid compile_time(std::string const&amp;);         // given\n\nnamespace {\n  template&lt;Foo::option Opt&gt;\n  struct Helper {\n    static void act(std::string const&amp;str) { compile_time&lt;Opt&gt;(str); }\n  };\n}\n\nvoid run_time_arg(Foo::option opt, std::string const&amp;str)\n{\n  Switch&lt;CompileTimeArg&gt;(opt,str);\n}\n</code></pre>\n\n<p>So far so good. But now I have another <code>template</code> argument and want also <code>blah()</code> to have that same <code>template</code> argument. That is, conceptually I want to</p>\n\n<pre><code>template&lt;int, Foo::option&gt;\nvoid compile_time(std::string const&amp;);         // given\n\nnamespace {\n  template&lt;int Bar, Foo::option Opt&gt;\n  struct Helper {\n    static void act(std::string const&amp;str) { compile_time&lt;Bar,Opt&gt;(str); }\n  };\n}\n\ntemplate&lt;int Bar&gt;\nvoid blah(Foo::option opt, std::string const&amp;str)\n{\n  template&lt;Foo::option Opt&gt; using BarHelper = Helper&lt;Bar,Opt&gt;;\n  Switch&lt;BarHelper&gt;(opt, str);\n}\n</code></pre>\n\n<p>but, of course, that is not allowed (a <code>template</code> within block scope in function <code>blah()</code>). <strong>So what is the correct solution?</strong></p>\n\n<p>Note that I can put everything within an auxiliary class template</p>\n\n<pre><code>namespace {\n  template&lt;int Bar&gt;\n  struct Auxiliary\n  {\n    template&lt;Foo::option Opt&gt; using BarHelper = Helper&lt;Bar,Opt&gt;;\n    static void blah(Foo::option opt, std::string const&amp;str)\n    { Switch&lt;BarHelper&gt;(opt, str); }\n  };\n}\n\ntemplate&lt;int Bar&gt;\nvoid blah(Foo::option opt, std::string const&amp;str)\n{ Auxiliary&lt;Bar&gt;::blah(opt, str); }\n</code></pre>\n\n<p>But that's clumsy and unsatisfying. <strong>Is there an alternative or better solution?</strong>\nI tried this:</p>\n\n<pre><code>template&lt;typename X, typename Y, X x, template&lt;X,Y&gt; class C&gt;\nstruct specialise {\n  template&lt;Y y&gt; using special = C&lt;x,y&gt;;\n};\n\ntemplate&lt;int Bar&gt;\nvoid blah(Foo::option opt, std::string const&amp;str)\n{\n  using Aux = specialise&lt;int, Foo::option, Bar, Helper&gt;\n  Switch&lt;Aux::special&gt;(opt, str); }\n}\n</code></pre>\n\n<p>but gcc (5.1.0) complains that <code>S::special</code> is parsed as a non-type while instantiation yields a type ... which is wrong (I think): instantiation yields a <em>template</em> (anyway inserting <code>typename</code> as suggested doesn't help). <strong>So what's wrong and/or how to do this correct/better?</strong></p>\n"}, {"tags": ["c++", "c", "linux", "macos", "makefile"], "comments": [{"owner": {"reputation": 2385, "user_id": 1009270, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/33fcdc9c0604cf69abb15e17840d2a3c?s=128&d=identicon&r=PG", "display_name": "john elemans", "link": "https://stackoverflow.com/users/1009270/john-elemans"}, "edited": false, "score": 0, "creation_date": 1452100256, "post_id": 34638607, "comment_id": 57022787, "body": "It does not look like a Linux/Mac issue. At least you need to recompile main.c first. Review the documentation for cc."}, {"owner": {"reputation": 144839, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 1, "creation_date": 1452100415, "post_id": 34638607, "comment_id": 57022903, "body": "Have you got <code>bin</code>, <code>obj</code>, <code>inc</code> and <code>src</code> subdirectories? Does your <code>main.c</code> contain a <code>main(int argc,char*argv[])</code> function? Can you add <code>-I inc</code> to tell the compiler where your include files are?"}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1452100551, "post_id": 34638607, "comment_id": 57022990, "body": "smell like there is no &#39;main&#39; entry point in main.c - can we see it please"}, {"owner": {"reputation": 141, "user_id": 3621306, "user_type": "registered", "accept_rate": 39, "profile_image": "https://i.stack.imgur.com/Q4lOO.jpg?s=128&g=1", "display_name": "Divergent", "link": "https://stackoverflow.com/users/3621306/divergent"}, "edited": false, "score": 0, "creation_date": 1452100622, "post_id": 34638607, "comment_id": 57023037, "body": "Wow I&#39;m retarted. Thanks for pointing out my silly mistake I hadn&#39;t written anything in the C file LOL."}], "answers": [{"tags": [], "owner": {"reputation": 141, "user_id": 3621306, "user_type": "registered", "accept_rate": 39, "profile_image": "https://i.stack.imgur.com/Q4lOO.jpg?s=128&g=1", "display_name": "Divergent", "link": "https://stackoverflow.com/users/3621306/divergent"}, "is_accepted": false, "score": 1, "last_activity_date": 1452100656, "creation_date": 1452100656, "answer_id": 34638880, "question_id": 34638607, "link": "https://stackoverflow.com/questions/34638607/macosx-compiling-a-c-project-using-make-command/34638880#34638880", "title": "MacOSx - Compiling a C project using make command", "body": "<p>Silly me. I didn't have a valid main function in my C file. Watch out for this one in the future kids!</p>\n"}], "owner": {"reputation": 141, "user_id": 3621306, "user_type": "registered", "accept_rate": 39, "profile_image": "https://i.stack.imgur.com/Q4lOO.jpg?s=128&g=1", "display_name": "Divergent", "link": "https://stackoverflow.com/users/3621306/divergent"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1452100656, "creation_date": 1452099769, "question_id": 34638607, "link": "https://stackoverflow.com/questions/34638607/macosx-compiling-a-c-project-using-make-command", "title": "MacOSx - Compiling a C project using make command", "body": "<p>I am working on an assignment for my System Programming course which is a course using the linux terminal and C language. I own a mac and already require a windows VM for my other courses so I have no room for the linux machine and my professor said that my mac machine would work fine as it has the linux terminal.</p>\n\n<p>We have to create a makefile file that will compile and link the c project together and create a .bin file, which is the basis of programming C in a linux environment, but I am getting errors with my makefile.</p>\n\n<p>I believe it has to do with the difference between Linux and MacOS but I am not sure.</p>\n\n<p>My makefile is as follows:</p>\n\n<pre><code>./bin/cryptoMagic: ./obj/main.o\ncc ./obj/main.o -o ./bin/cryptoMagic\n\n./obj/main.o: ./src/main.c ./inc/prototypes.h\ncc ./src/main.c -c -o ./obj/main.o\n</code></pre>\n\n<p>When I run the make utility in the terminal I get this error message:</p>\n\n<pre><code>kyles-MacBook-Pro:~ KyleJensen$ cd Documents/School/First\\     Year/Semester2/SystemProgramming/Assignments/Assign01/\nkyles-MacBook-Pro:Assign01 KyleJensen$ make\ncc ./obj/main.o -o ./bin/cryptoMagic\nUndefined symbols for architecture x86_64:\n\"_main\", referenced from:\n implicit entry/start for main executable\nld: symbol(s) not found for architecture x86_64\nclang: error: linker command failed with exit code 1 (use -v to see    invocation)\nmake: *** [bin/cryptoMagic] Error 1\n</code></pre>\n"}, {"tags": ["c++", "c++11", "gcc", "c++14"], "comments": [{"owner": {"reputation": 88499, "user_id": 650405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5cdee2abea51e91756076032f0053081?s=128&d=identicon&r=PG", "display_name": "Karoly Horvath", "link": "https://stackoverflow.com/users/650405/karoly-horvath"}, "edited": false, "score": 1, "creation_date": 1452099992, "post_id": 34638587, "comment_id": 57022599, "body": "I see nothing wrong with that, it&#39;s just the name of the function. Actually, a  resolved return type would be a lot more confusing..."}, {"owner": {"reputation": 101, "user_id": 5753300, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-saipXPvOldA/AAAAAAAAAAI/AAAAAAAAAEY/dolIaX6X3vU/photo.jpg?sz=128", "display_name": "Beren Minor", "link": "https://stackoverflow.com/users/5753300/beren-minor"}, "reply_to_user": {"reputation": 88499, "user_id": 650405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5cdee2abea51e91756076032f0053081?s=128&d=identicon&r=PG", "display_name": "Karoly Horvath", "link": "https://stackoverflow.com/users/650405/karoly-horvath"}, "edited": false, "score": 0, "creation_date": 1452100304, "post_id": 34638587, "comment_id": 57022820, "body": "I believe that requiring to support arbitrary complex expressions in mangled names is not trivial, and that it imposes higher constraints on the demangler implementation. While I agree that it&#39;s an implementation problem, for example, GDB segfaults if the expressions are too complex."}, {"owner": {"reputation": 88499, "user_id": 650405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5cdee2abea51e91756076032f0053081?s=128&d=identicon&r=PG", "display_name": "Karoly Horvath", "link": "https://stackoverflow.com/users/650405/karoly-horvath"}, "edited": false, "score": 0, "creation_date": 1452100875, "post_id": 34638587, "comment_id": 57023233, "body": "Well, the compiler <i>could</i> emit the resolved information as well, helping other tools in the chain. My advice, be <i>extremely</i> patient... ( <a href=\"https://sourceware.org/bugzilla/show_bug.cgi?id=14441\" rel=\"nofollow noreferrer\">sourceware.org/bugzilla/show_bug.cgi?id=14441</a> )"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1452101291, "post_id": 34638587, "comment_id": 57023486, "body": "You will never find a single word about mangling in the C++ standard, so any request for such is moot  by definition."}, {"owner": {"reputation": 56893, "user_id": 3647361, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/xvjhM.png?s=128&g=1", "display_name": "Columbo", "link": "https://stackoverflow.com/users/3647361/columbo"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1452101387, "post_id": 34638587, "comment_id": 57023554, "body": "@SergeyA &quot;Signatures are used as a basis for name mangling and linking.&quot; [defns.signature], latest WD"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 56893, "user_id": 3647361, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/xvjhM.png?s=128&g=1", "display_name": "Columbo", "link": "https://stackoverflow.com/users/3647361/columbo"}, "edited": false, "score": 0, "creation_date": 1452101525, "post_id": 34638587, "comment_id": 57023637, "body": "@Columbo, this is weird, I have not seen this quote before. In my honest opinion, it should not be there. It is entirely possible to create a 100% standard-conformant compiler without any mangling whatsoever."}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 2, "creation_date": 1452110347, "post_id": 34638587, "comment_id": 57029104, "body": "If you mangle the resulting type, then you can&#39;t distinguish between <code>template&lt;typename T&gt; decltype(std::declval&lt;T&gt;().bar()) foo(T const&amp; a);</code> and <code>template&lt;typename T&gt; decltype(std::declval&lt;T&gt;().baz()) foo(T const&amp; a);</code> (say, in different TUs) instantiated over <code>struct A { void bar() const; void baz() const;};</code>."}, {"owner": {"reputation": 101, "user_id": 5753300, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-saipXPvOldA/AAAAAAAAAAI/AAAAAAAAAEY/dolIaX6X3vU/photo.jpg?sz=128", "display_name": "Beren Minor", "link": "https://stackoverflow.com/users/5753300/beren-minor"}, "edited": false, "score": 0, "creation_date": 1452120668, "post_id": 34638587, "comment_id": 57034568, "body": "Alright, but shouldn&#39;t both resolve to the same overloaded function as the resolved decltype is the same?  This also means that, assuming they are declared in different TUs and that <code>bar</code> takes an <code>int</code> argument, <code>template&lt;typename T&gt; decltype(std::declval&lt;T&gt;().bar(1)) foo(T const&amp; a);</code>, <code>template&lt;typename T&gt; decltype(std::declval&lt;T&gt;().bar(2)) foo(T const&amp; a);</code>, and <code>template&lt;typename T&gt; decltype(std::declval&lt;T&gt;().bar(3)) foo(T const&amp; a);</code> are all different function overloads, although returning the same type?"}, {"owner": {"reputation": 101, "user_id": 5753300, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-saipXPvOldA/AAAAAAAAAAI/AAAAAAAAAEY/dolIaX6X3vU/photo.jpg?sz=128", "display_name": "Beren Minor", "link": "https://stackoverflow.com/users/5753300/beren-minor"}, "edited": false, "score": 0, "creation_date": 1452121414, "post_id": 34638587, "comment_id": 57034872, "body": "Or weirder: <code>template&lt;typename T&gt; decltype(std::declval&lt;T&gt;().bar(1+1)) foo(T const&amp; a);</code> and <code>template&lt;typename T&gt; decltype(std::declval&lt;T&gt;().bar(2)) foo(T const&amp; a);</code>"}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 1, "creation_date": 1452130070, "post_id": 34638587, "comment_id": 57037478, "body": "The templates in your example are &quot;functionally equivalent but not equivalent&quot;, making the program ill-formed NDR. See [temp.over.link]/6."}, {"owner": {"reputation": 101, "user_id": 5753300, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-saipXPvOldA/AAAAAAAAAAI/AAAAAAAAAEY/dolIaX6X3vU/photo.jpg?sz=128", "display_name": "Beren Minor", "link": "https://stackoverflow.com/users/5753300/beren-minor"}, "edited": false, "score": 0, "creation_date": 1452160072, "post_id": 34638587, "comment_id": 57048876, "body": "But that&#39;s also the case for your example, no? <code>decltype(std::declval&lt;T&gt;().baz())</code> and <code>decltype(std::declval&lt;T&gt;().bar())</code> are &quot;functionally equivalent but not equivalent&quot; return types: both are resolved to void."}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 1, "creation_date": 1452179448, "post_id": 34638587, "comment_id": 57062332, "body": "No, they are not functionally equivalent; the result are not the same for all possible values of <code>T</code>, unlike your case."}, {"owner": {"reputation": 101, "user_id": 5753300, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-saipXPvOldA/AAAAAAAAAAI/AAAAAAAAAEY/dolIaX6X3vU/photo.jpg?sz=128", "display_name": "Beren Minor", "link": "https://stackoverflow.com/users/5753300/beren-minor"}, "edited": false, "score": 0, "creation_date": 1452179739, "post_id": 34638587, "comment_id": 57062545, "body": "Alright, that sounds a good explanation, thanks."}, {"owner": {"reputation": 394, "user_id": 2964487, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec9f82b2101d2727ef36b0c5301ea2fe?s=128&d=identicon&r=PG&f=1", "display_name": "Banan", "link": "https://stackoverflow.com/users/2964487/banan"}, "edited": false, "score": 0, "creation_date": 1452250720, "post_id": 34638587, "comment_id": 57095637, "body": "You should do the answer as a separate post and accept it. Makes it easier to see ;)"}], "answers": [{"tags": [], "owner": {"reputation": 101, "user_id": 5753300, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-saipXPvOldA/AAAAAAAAAAI/AAAAAAAAAEY/dolIaX6X3vU/photo.jpg?sz=128", "display_name": "Beren Minor", "link": "https://stackoverflow.com/users/5753300/beren-minor"}, "is_accepted": true, "score": 2, "last_activity_date": 1452258826, "last_edit_date": 1495542798, "creation_date": 1452258826, "answer_id": 34677988, "question_id": 34638587, "link": "https://stackoverflow.com/questions/34638587/why-decltype-expressions-in-return-types-have-to-be-mangled-in-the-symbol-name/34677988#34677988", "title": "Why decltype expressions in return types have to be mangled in the symbol name?", "body": "<p><strong>ANSWER:</strong></p>\n\n<p>As explained by <a href=\"https://stackoverflow.com/users/2756719/t-c\">T.C.</a> in the comments, the reason lies in the template function overload rules <code>[temp.over.link]/5-6</code></p>\n\n<p>For example:</p>\n\n<pre><code>// #1\ntemplate&lt;typename T&gt;\ndecltype(std::declval&lt;T&gt;().bar()) foo(T const&amp; a);\n\n// #2 same function as #1, because both are \"equivalent\":\n// declared in the same scope, with the same name and \n// argument/return type expressions are \"equivalent\"\ntemplate&lt;typename U&gt;\ndecltype(std::declval&lt;U&gt;().bar()) foo(U const&amp; a);\n\n// #3 overloads #1, because argument/return type expressions\n// may not be resolved to the same value for any given set of T\ntemplate&lt;typename T&gt;\ndecltype(std::declval&lt;T&gt;().baz()) foo(T const&amp; a);\n</code></pre>\n\n<p>This also means that the following is ill-formed:</p>\n\n<pre><code>// #1\ntemplate&lt;typename T&gt;\ndecltype(std::declval&lt;T&gt;().bar(2)) foo(T const&amp; a);\n\n// #2 is \"functionally equivalent\" but not \"equivalent\" to #1\n// because argument/return type expressions are not \"equivalent\"\n// but \"functionally equivalent\": they are resolved to the same value\n// for any given T\ntemplate&lt;typename T&gt;\ndecltype(std::declval&lt;T&gt;().bar(1+1)) foo(T const&amp; a);\n</code></pre>\n"}], "owner": {"reputation": 101, "user_id": 5753300, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-saipXPvOldA/AAAAAAAAAAI/AAAAAAAAAEY/dolIaX6X3vU/photo.jpg?sz=128", "display_name": "Beren Minor", "link": "https://stackoverflow.com/users/5753300/beren-minor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 355, "favorite_count": 1, "accepted_answer_id": 34677988, "answer_count": 1, "score": 8, "last_activity_date": 1452258826, "creation_date": 1452099700, "last_edit_date": 1452258813, "question_id": 34638587, "link": "https://stackoverflow.com/questions/34638587/why-decltype-expressions-in-return-types-have-to-be-mangled-in-the-symbol-name", "title": "Why decltype expressions in return types have to be mangled in the symbol name?", "body": "<p>I recently found out that decltype expressions are mangled as part of the functions symbol names, when used as return types, and that this can be the cause of nasty segmentation faults while demangling the expressions (in debugging sessions for example), if the expression is too complex.</p>\n\n<p>The first version, using decltype in function return type, where the full expression gets mangled (<a href=\"http://goo.gl/EALubx\" rel=\"nofollow\">http://goo.gl/EALubx</a>):</p>\n\n<pre><code>#include &lt;cstdint&gt;\n#include &lt;utility&gt;\n\nstruct A { void bar() const; };\n\ntemplate&lt;typename T&gt;\ndecltype(std::declval&lt;T&gt;().bar()) foo(T const&amp; a);\n\nvoid foo() { A a; return foo(a); }\n</code></pre>\n\n<p>Is compiled to (GCC 5.2.0):</p>\n\n<pre><code>foo():\n        sub     rsp, 24\n        lea     rdi, [rsp+15]\n        call    decltype ((((declval&lt;A&gt;)()).bar)()) foo&lt;A&gt;(A const&amp;)\n        add     rsp, 24\n        ret\n</code></pre>\n\n<p>The second version, almost equivalent, where the expression type is resolved as part of an additional template parameter (<a href=\"http://goo.gl/DfQGR5\" rel=\"nofollow\">http://goo.gl/DfQGR5</a>):</p>\n\n<pre><code>#include &lt;cstdint&gt;\n#include &lt;utility&gt;\n\nstruct A { void bar() const; };\n\ntemplate&lt;typename T, typename R=decltype(std::declval&lt;T&gt;().bar())&gt;\nR foo(T const&amp; a);\n\nvoid foo() { A a; return foo(a); }\n</code></pre>\n\n<p>Is compiled to (GCC 5.2.0):</p>\n\n<pre><code>foo():\n        sub     rsp, 24\n        lea     rdi, [rsp+15]\n        call    void foo&lt;A, void&gt;(A const&amp;)\n        add     rsp, 24\n        ret\n</code></pre>\n\n<p>I understand that template functions can be overloaded on their return type only, but shouldn't the compiler be able to resolve the decltype expression on its own and mangle the resulting type instead?</p>\n\n<p>Could anyone tell me about why, or point me where in the C++ specification it is specified?</p>\n"}, {"tags": ["c++", "pointers", "vector"], "comments": [{"owner": {"reputation": 472, "user_id": 717139, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/46e773ce6ba6422c470ea5807dd81b4f?s=128&d=identicon&r=PG", "display_name": "Alain", "link": "https://stackoverflow.com/users/717139/alain"}, "edited": false, "score": 2, "creation_date": 1452100187, "post_id": 34638556, "comment_id": 57022739, "body": "It may be a good opportunity  for you to learn about smart pointers: <a href=\"http://en.cppreference.com/w/cpp/memory/shared_ptr\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/memory/shared_ptr</a>. If you&#39;re using a pre-C++11 compiler you have the same functionality from the boost libraries."}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1452100226, "post_id": 34638556, "comment_id": 57022761, "body": "&quot;If I use new for each element, it would be very slow.&quot; <i>What</i> would be slow? Initializing the vector? Using it?"}, {"owner": {"reputation": 445, "user_id": 5747545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a340b35f7f87c161d3e77e581d2f23a4?s=128&d=identicon&r=PG&f=1", "display_name": "88877", "link": "https://stackoverflow.com/users/5747545/88877"}, "edited": false, "score": 0, "creation_date": 1452100325, "post_id": 34638556, "comment_id": 57022838, "body": "you can still declare a <code>myStruct tab[max]</code> if you want to boost the performance but free memory could be delicate then"}, {"owner": {"reputation": 88499, "user_id": 650405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5cdee2abea51e91756076032f0053081?s=128&d=identicon&r=PG", "display_name": "Karoly Horvath", "link": "https://stackoverflow.com/users/650405/karoly-horvath"}, "edited": false, "score": 0, "creation_date": 1452100416, "post_id": 34638556, "comment_id": 57022905, "body": "If separate allocations is a concern for you, use your own allocation scheme..."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1452101430, "post_id": 34638556, "comment_id": 57023585, "body": "Are you sure that performance of dynamic memory allocation itself is something you should worry about?"}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1452112921, "post_id": 34638556, "comment_id": 57030662, "body": "Belt and suspenders programming: the loop runs from 0 to <code>vec.size()</code>, so the index <code>i</code> will always be in range. But the code also uses <code>at(i)</code> in order to make sure?"}, {"owner": {"reputation": 65, "user_id": 4295890, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/702086893/picture?type=large", "display_name": "Carl", "link": "https://stackoverflow.com/users/4295890/carl"}, "reply_to_user": {"reputation": 472, "user_id": 717139, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/46e773ce6ba6422c470ea5807dd81b4f?s=128&d=identicon&r=PG", "display_name": "Alain", "link": "https://stackoverflow.com/users/717139/alain"}, "edited": false, "score": 0, "creation_date": 1452167617, "post_id": 34638556, "comment_id": 57054009, "body": "@Alain Actually I simplify it, I do use <code>shared_ptr</code>"}, {"owner": {"reputation": 65, "user_id": 4295890, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/702086893/picture?type=large", "display_name": "Carl", "link": "https://stackoverflow.com/users/4295890/carl"}, "reply_to_user": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1452167681, "post_id": 34638556, "comment_id": 57054052, "body": "@NicolBolas I notice when operator <code>new</code> used repeatedly in  code, it actually slow down the whole code."}], "answers": [{"comments": [{"owner": {"reputation": 16382, "user_id": 5507349, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/IaCUb.jpg?s=128&g=1", "display_name": "Edgar Rokj\u0101n", "link": "https://stackoverflow.com/users/5507349/edgar-rokj%c4%81n"}, "edited": false, "score": 0, "creation_date": 1452100721, "post_id": 34638769, "comment_id": 57023124, "body": "As I can understand from the question the problem is the numerous usage of <code>new</code> and it&#39;s impact to performance. Your answer isn&#39;t really helpful in this case."}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "reply_to_user": {"reputation": 16382, "user_id": 5507349, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/IaCUb.jpg?s=128&g=1", "display_name": "Edgar Rokj\u0101n", "link": "https://stackoverflow.com/users/5507349/edgar-rokj%c4%81n"}, "edited": false, "score": 0, "creation_date": 1452101403, "post_id": 34638769, "comment_id": 57023563, "body": "@EdgarRokyan - after reading the question again I think your are right. It seems I simply misunderstood the problem. Sh.. happens."}], "tags": [], "owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "is_accepted": false, "score": 1, "last_activity_date": 1452102016, "last_edit_date": 1495541720, "creation_date": 1452100303, "answer_id": 34638769, "question_id": 34638556, "link": "https://stackoverflow.com/questions/34638556/use-of-pointer-to-vector-which-involved-the-use-of-new/34638769#34638769", "title": "Use of pointer to vector which involved the use of &#39;new&#39;", "body": "<h1>EDIT:</h1>\n\n<p>After reading the question again, it seems I misunderstood the question. So here is an edited answer.</p>\n\n<p>If you only need to execute the code during some kind of initialization phase, you can create all the instances of myStruct in an array and then just point to those from the vector as already proposed by R Sahu. Note that the solution requires you to create and delete all instances at the same time.</p>\n\n<p>However, if you execute this code several times and/or don't know exactly how many myStruct instances you will need, you could overwrite new and delete for the struct and handle memory allocation yourself.</p>\n\n<p>See <a href=\"https://stackoverflow.com/questions/10201214/callling-object-constructor-destructor-with-a-custom-allocator\">Callling object constructor/destructor with a custom allocator</a> for an example of this. See the answer by Jerry Coffin.</p>\n\n<p>BTW - you don't need <code>vec.at(i)</code> as you are iterating from 0 to size. <code>vec[i]</code> is okay and should perform a better.</p>\n\n<h1>OLD ANSWER:</h1>\n\n<p>You can do</p>\n\n<pre><code>vector&lt;myStruct*&gt; vec(10000, nullptr);\n</code></pre>\n\n<p>to generate a vector with for instance 10000 elements all initialized to nullptr</p>\n\n<p>After that you can fill the relevant elements with pointer to the struct.</p>\n\n<p>For <code>delete</code> just</p>\n\n<pre><code>for (auto e : vec) delete e;\n</code></pre>\n\n<p>cause it is safe to do <code>delete</code>on a nullptr</p>\n"}, {"comments": [{"owner": {"reputation": 16382, "user_id": 5507349, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/IaCUb.jpg?s=128&g=1", "display_name": "Edgar Rokj\u0101n", "link": "https://stackoverflow.com/users/5507349/edgar-rokj%c4%81n"}, "edited": false, "score": 0, "creation_date": 1452100937, "post_id": 34638787, "comment_id": 57023263, "body": "Is it safe to work with structures in such manner? What&#39;s about padding?"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 16382, "user_id": 5507349, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/IaCUb.jpg?s=128&g=1", "display_name": "Edgar Rokj\u0101n", "link": "https://stackoverflow.com/users/5507349/edgar-rokj%c4%81n"}, "edited": false, "score": 0, "creation_date": 1452100968, "post_id": 34638787, "comment_id": 57023283, "body": "@EdgarRokyan, of course it is safe. The compiler will take care of padding."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 3, "creation_date": 1452101706, "post_id": 34638787, "comment_id": 57023744, "body": "While this is elegant, it leaves us with terrible dilemma of safe and consistent pointer cleanup."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1452102199, "post_id": 34638787, "comment_id": 57024073, "body": "@SergeyA, I agree. There might be a more elegant solution to the OP&#39;s real problem."}, {"owner": {"reputation": 65, "user_id": 4295890, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/702086893/picture?type=large", "display_name": "Carl", "link": "https://stackoverflow.com/users/4295890/carl"}, "edited": false, "score": 0, "creation_date": 1452167543, "post_id": 34638787, "comment_id": 57053952, "body": "@RSahu, How to create an array similar to <code>myStruct* objects = new myStruct[N];</code> with the use of <code>shared_ptr</code> instead of ordinary pointer?"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 65, "user_id": 4295890, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/702086893/picture?type=large", "display_name": "Carl", "link": "https://stackoverflow.com/users/4295890/carl"}, "edited": false, "score": 0, "creation_date": 1452183678, "post_id": 34638787, "comment_id": 57065467, "body": "@Carl, use of <code>shared_ptr</code> with arrays is not straight forward. See <a href=\"http://stackoverflow.com/a/8947700/434551\">stackoverflow.com/a/8947700/434551</a>."}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": true, "score": 3, "last_activity_date": 1452102169, "last_edit_date": 1452102169, "creation_date": 1452100355, "answer_id": 34638787, "question_id": 34638556, "link": "https://stackoverflow.com/questions/34638556/use-of-pointer-to-vector-which-involved-the-use-of-new/34638787#34638787", "title": "Use of pointer to vector which involved the use of &#39;new&#39;", "body": "<blockquote>\n  <p>If I use \"new\" for each element, it would be very slow. How can I speed it up a bit? Is there a way the create all the spaces that I need , that automatically access the pointer of such space to the vector(\"vec\" here)?</p>\n</blockquote>\n\n<p>You can do that.</p>\n\n<p>Let's say the size of your <code>vector</code> is <code>M</code> and you only need <code>N</code> of those elements to have pointers to objects and other elements are null pointers. You can use:</p>\n\n<pre><code>myStruct* objects = new myStruct[N];\n</code></pre>\n\n<p>and then, use:</p>\n\n<pre><code>for(int i = 0, j = 0; vec.size(); i++)\n{\n   if (thisSpaceIsValid(i))\n   {\n      if ( j == N )\n      {\n         // Error. Do something.\n      }\n      else\n      {\n         vec[i]  = objects+j;\n         ++j;\n      }\n   }\n   else\n   {\n      vect[i] = NULL;\n   }\n}\n</code></pre>\n\n<p>You have to now make sure that you are able to keep track of the value of <code>objeccts</code> so you can safely deallocate the memory by using</p>\n\n<pre><code>delete [] objects;\n</code></pre>\n\n<p><strong>PS</strong></p>\n\n<p>There might be a better and more elegant solution to your problem. It will be worth your while to spend a bit more time thinking over that.</p>\n"}, {"tags": [], "owner": {"reputation": 453, "user_id": 2986286, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/22f447e2c717fa3423629550a2d7b743?s=128&d=identicon&r=PG&f=1", "display_name": "0kcats", "link": "https://stackoverflow.com/users/2986286/0kcats"}, "is_accepted": false, "score": 0, "last_activity_date": 1452101165, "creation_date": 1452101165, "answer_id": 34639028, "question_id": 34638556, "link": "https://stackoverflow.com/questions/34638556/use-of-pointer-to-vector-which-involved-the-use-of-new/34639028#34639028", "title": "Use of pointer to vector which involved the use of &#39;new&#39;", "body": "<p>If you need a vector of pointers, and would like to avoid calling new, then firstly create a container of structs themselves, then assign pointers to the elements into your vec. Be careful with choosing the container of structs. If you use vector of structs, make sure to reserve all elements in advance, otherwise its elements may move to a different memory location when vector grows. Deque on the other hand guarantees its elements don't move.</p>\n\n<p>Multiple small new and delete calls should be avoided if possible in c++ when performance matters a lot.</p>\n"}, {"tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": false, "score": 0, "last_activity_date": 1452102098, "creation_date": 1452102098, "answer_id": 34639341, "question_id": 34638556, "link": "https://stackoverflow.com/questions/34638556/use-of-pointer-to-vector-which-involved-the-use-of-new/34639341#34639341", "title": "Use of pointer to vector which involved the use of &#39;new&#39;", "body": "<p>The more I think about it, the less I like @RSahu's solution. In particular, I feel memory management in this scenario would be a nightmare. Instead I suggest using a vector of unique_ptr's owning memory allocated via custom alloctor. I believe, sequential allocator would do.</p>\n"}], "owner": {"reputation": 65, "user_id": 4295890, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/702086893/picture?type=large", "display_name": "Carl", "link": "https://stackoverflow.com/users/4295890/carl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 1, "accepted_answer_id": 34638787, "answer_count": 4, "score": 1, "last_activity_date": 1452102169, "creation_date": 1452099613, "last_edit_date": 1452100146, "question_id": 34638556, "link": "https://stackoverflow.com/questions/34638556/use-of-pointer-to-vector-which-involved-the-use-of-new", "title": "Use of pointer to vector which involved the use of &#39;new&#39;", "body": "<p>I would like to create a <em>vector of pointers to struct</em></p>\n\n<pre><code>vector&lt;myStruct*&gt; vec\n</code></pre>\n\n<p>For elements in the vector, not all of them contain data. Some of them may point to <strong>NULL</strong>. \nSo, should I create space by <code>new</code> in each of the element first</p>\n\n<pre><code>for(int i = 0; vec.size() ;i++){\n       if (thisSpaceIsValid(i))\n             vec.at(i) = new myStruct;\n         else\n             vect.at(i) = NULL;\n}\n</code></pre>\n\n<p><strong>The problem comes:</strong><br>\n-If I use <code>new</code> for each element, it would be very slow. How can I speed it up a bit?  Is there a way the create all the spaces that I need , that automatically access the pointer of such space to the vector(<code>vec</code> here)?  </p>\n\n<p>-If later I use <code>delete</code> to free the memory, would the problem of speed still bother me?</p>\n"}, {"tags": ["c++", "multithreading", "matrix", "openmp", "eigen"], "comments": [{"owner": {"reputation": 414, "user_id": 3708904, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/cc0603de733d41d03de17c919944581f?s=128&d=identicon&r=PG&f=1", "display_name": "Jack O&#39;Reilly", "link": "https://stackoverflow.com/users/3708904/jack-oreilly"}, "edited": false, "score": 0, "creation_date": 1452103847, "post_id": 34638505, "comment_id": 57025010, "body": "Are you sure that your OMP_NUM_THREADS environment variable is actually being passed as a preprocessor definition?  I&#39;m not sure if all environment variables are treated as such when using gcc."}, {"owner": {"reputation": 414, "user_id": 3708904, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/cc0603de733d41d03de17c919944581f?s=128&d=identicon&r=PG&f=1", "display_name": "Jack O&#39;Reilly", "link": "https://stackoverflow.com/users/3708904/jack-oreilly"}, "edited": false, "score": 0, "creation_date": 1452103964, "post_id": 34638505, "comment_id": 57025095, "body": "Never mind -- just saw that the env variable in question is checked at runtime, as specified in the Eigen multithreading docs."}, {"owner": {"reputation": 25314, "user_id": 1641621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h50hY.png?s=128&g=1", "display_name": "ggael", "link": "https://stackoverflow.com/users/1641621/ggael"}, "edited": false, "score": 0, "creation_date": 1452113722, "post_id": 34638505, "comment_id": 57031075, "body": "Your compiler does not implement OpenMP."}, {"owner": {"reputation": 1167, "user_id": 3419427, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/TZ1EW.png?s=128&g=1", "display_name": "verified.human", "link": "https://stackoverflow.com/users/3419427/verified-human"}, "edited": false, "score": 0, "creation_date": 1452117069, "post_id": 34638505, "comment_id": 57032865, "body": "Are you sure my compiler does not support OpenMP? Since I am using all the latest OSX software (El Capitan, Xcode 7), I would think OpenMP is supported since it is listed here as supported compiler on the <a href=\"http://openmp.org/wp/openmp-compilers/\" rel=\"nofollow noreferrer\">official website</a>. If you are right and OpenMP is not supported by my compiler. What would your advise be?"}, {"owner": {"reputation": 9447, "user_id": 2899559, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a7b94e56f041fd09320f9763d82861af?s=128&d=identicon&r=PG&f=1", "display_name": "Avi Ginsburg", "link": "https://stackoverflow.com/users/2899559/avi-ginsburg"}, "edited": false, "score": 0, "creation_date": 1452157984, "post_id": 34638505, "comment_id": 57047461, "body": "@verified.human Try it. Add a parallel section with that prints the thread number: <code>#pragma omp parallel  {  printf(&quot;Hello World from thread = %d\\n&quot;, omp_get_thread_num()); }</code> Just make sure that you add a line break after the <code>pragma</code> line (I can&#39;t do that in comments)."}, {"owner": {"reputation": 73919, "user_id": 44309, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iL4TW.png?s=128&g=1", "display_name": "High Performance Mark", "link": "https://stackoverflow.com/users/44309/high-performance-mark"}, "edited": false, "score": 1, "creation_date": 1452173627, "post_id": 34638505, "comment_id": 57058067, "body": "See <a href=\"http://stackoverflow.com/questions/33668323/clang-omp-in-xcode-under-el-capitan/33687414\" title=\"clang omp in xcode under el capitan\">stackoverflow.com/questions/33668323/&hellip;</a>"}, {"owner": {"reputation": 25314, "user_id": 1641621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h50hY.png?s=128&g=1", "display_name": "ggael", "link": "https://stackoverflow.com/users/1641621/ggael"}, "edited": false, "score": 0, "creation_date": 1452286849, "post_id": 34638505, "comment_id": 57118465, "body": "@verified.human This website is listing clang 3.7, but not Apple&#39;s clang 7.0.x"}, {"owner": {"reputation": 4123, "user_id": 195787, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/4b9620cb172292493f9c02c8f37c6cc7?s=128&d=identicon&r=PG", "display_name": "Royi", "link": "https://stackoverflow.com/users/195787/royi"}, "edited": false, "score": 0, "creation_date": 1486396251, "post_id": 34638505, "comment_id": 71315061, "body": "@verified.human, Did you solve ti? Thank You."}], "owner": {"reputation": 1167, "user_id": 3419427, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/TZ1EW.png?s=128&g=1", "display_name": "verified.human", "link": "https://stackoverflow.com/users/3419427/verified-human"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2778, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1452102130, "creation_date": 1452099433, "last_edit_date": 1452102130, "question_id": 34638505, "link": "https://stackoverflow.com/questions/34638505/openmp-multi-threading-not-working-for-eigen-library", "title": "OpenMP multi-threading not working for Eigen library", "body": "<p>Since my research involves doing large matrix products I am trying to enable OpenMP multi-threading capabilities for Eigen. Unfortunately I haven't had any luck so far. </p>\n\n<p>I use Xcode 7 with the following compiler: <code>gcc --version</code></p>\n\n<pre><code>Configured with: --prefix=/Applications/Xcode.app/Contents/Developer/usr --with-gxx-include-dir=/usr/include/c++/4.2.1\nApple LLVM version 7.0.2 (clang-700.1.81)\nTarget: x86_64-apple-darwin15.2.0\nThread model: posix\n</code></pre>\n\n<p>After that I have configured the number of OpenMP threads I want to use, by setting <code>export OMP_NUM_THREADS=4</code>. Then I compile my program using the following flags: <code>-O3 -fopenmp=libomp -DNDEBUG</code>. However trying to set or print the number of threads used by Eigen always returns <code>1</code>. So it looks like only one thread is used:</p>\n\n<pre><code>#include &lt;Eigen/Dense&gt;\n...\nEigen::initParallel();\nEigen::setNbThreads(4);\nint nthreads = Eigen::nbThreads( );\nstd::cout &lt;&lt; \"THREADS = \" &lt;&lt; nthreads &lt;&lt;std::ends; // returns '1'\n</code></pre>\n\n<p>Anyone has any idea why Eigen is only using one thread? According to the steps on the Eigen website (<a href=\"http://eigen.tuxfamily.org/dox/TopicMultiThreading.html\" rel=\"nofollow\">http://eigen.tuxfamily.org/dox/TopicMultiThreading.html</a>) this should work...?</p>\n"}, {"tags": ["c++", "opencv", "visual-studio-2012", "image-processing", "computer-vision"], "answers": [{"tags": [], "owner": {"reputation": 428, "user_id": 4231251, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1695e32e9db3d7225920ee78e329540c?s=128&d=identicon&r=PG&f=1", "display_name": "RyanL", "link": "https://stackoverflow.com/users/4231251/ryanl"}, "is_accepted": false, "score": 0, "last_activity_date": 1452194038, "last_edit_date": 1452194038, "creation_date": 1452100051, "answer_id": 34638693, "question_id": 34638474, "link": "https://stackoverflow.com/questions/34638474/how-to-count-number-of-corners-in-an-image/34638693#34638693", "title": "How to count number of Corners in an image?", "body": "<p>To count the corners, you can use the code snippet provided in your link where they are drawing circles on the corners (with a few small changes)</p>\n\n<pre><code>int thresh = 200;\nint corner_count = 0;\n\nfor (int j=0; j&lt;dst_norm.rows; j++) { \n  for (int i=0; i&lt;dst_norm.cols; i++) {\n    if ((int)dst_norm.at&lt;float&gt;(j,i) &gt; thresh) {\n      corner_count++;\n    }\n  }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 134, "user_id": 4579170, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-JbrEGie-kSY/AAAAAAAAAAI/AAAAAAAAA5s/EidBAGzD6KY/photo.jpg?sz=128", "display_name": "Marco Manfredi", "link": "https://stackoverflow.com/users/4579170/marco-manfredi"}, "is_accepted": false, "score": 4, "last_activity_date": 1452164204, "creation_date": 1452164204, "answer_id": 34653367, "question_id": 34638474, "link": "https://stackoverflow.com/questions/34638474/how-to-count-number-of-corners-in-an-image/34653367#34653367", "title": "How to count number of Corners in an image?", "body": "<p>If the input is a simple computer-generated image, a viable option is to use thresholding and contour detection.</p>\n\n<p>Once you have extracted the contour (as a vector of points) you can use the <code>approxPolyDP</code> function to approximate the detected contour (to a user-defined accuracy). After the approximation the number of points in the output contour is the number of corners (or end-points in case of an open contour).</p>\n\n<p>To summarize, the OpenCV functions you'll need are:\n<a href=\"http://docs.opencv.org/2.4/modules/imgproc/doc/miscellaneous_transformations.html?highlight=threshold#cv2.threshold\" rel=\"nofollow\">threshold</a>,\n<a href=\"http://docs.opencv.org/2.4/modules/imgproc/doc/structural_analysis_and_shape_descriptors.html?highlight=findcontours#findcontours\" rel=\"nofollow\">findContours</a>\nand <a href=\"http://docs.opencv.org/2.4.11/modules/imgproc/doc/structural_analysis_and_shape_descriptors.html?highlight=approxpoly#cv2.approxPolyDP\" rel=\"nofollow\">approxPolyDP</a>.</p>\n"}], "owner": {"reputation": 23, "user_id": 5098616, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/159c6005653792387874a848b1c2f0d6?s=128&d=identicon&r=PG&f=1", "display_name": "Ganeshkumar", "link": "https://stackoverflow.com/users/5098616/ganeshkumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1439, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1452194038, "creation_date": 1452099348, "question_id": 34638474, "link": "https://stackoverflow.com/questions/34638474/how-to-count-number-of-corners-in-an-image", "title": "How to count number of Corners in an image?", "body": "<p>I want to calculate the number of corners in a computer image( a simple image created using tools such as Microsoft Paint).  For example, if I draw a picture of a square, I want the program to return the number of corners, which is 4 in this case. </p>\n\n<p>I am using Open CV 2.4.11 for C++ in Microsoft Visual Studio 2012.</p>\n\n<p>I've used the Harris Corner detector to display the corners in the image. This is the tutorial I've used for the program : <a href=\"http://docs.opencv.org/2.4/doc/tutorials/features2d/trackingmotion/harris_detector/harris_detector.html\" rel=\"nofollow\">http://docs.opencv.org/2.4/doc/tutorials/features2d/trackingmotion/harris_detector/harris_detector.html</a></p>\n\n<p>Also, I would like to know how I can find the end-points of an edge (not the corners)? For example, if the image were to contain line segment the program should return the number of end-points as 2.  What function should I use?</p>\n\n<p>Please resolve this query. I will use this feature in a project.</p>\n\n<p>Thanks a lot for your help in advance.</p>\n\n<p>P.S: I am a student and a beginner in OpenCV.</p>\n"}, {"tags": ["c++", "dictionary", "noexcept", "exception-specification"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 4, "creation_date": 1452099676, "post_id": 34638399, "comment_id": 57022360, "body": "related: <a href=\"http://stackoverflow.com/questions/20517259/why-vector-access-operators-are-not-specified-as-noexcept\" title=\"why vector access operators are not specified as noexcept\">stackoverflow.com/questions/20517259/&hellip;</a>"}, {"owner": {"reputation": 445, "user_id": 5747545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a340b35f7f87c161d3e77e581d2f23a4?s=128&d=identicon&r=PG&f=1", "display_name": "88877", "link": "https://stackoverflow.com/users/5747545/88877"}, "edited": false, "score": 0, "creation_date": 1452100027, "post_id": 34638399, "comment_id": 57022623, "body": "I don&#39;t think the <code>Compare</code> function of a map have to be noexept, so I don&#39;t think <code>find()</code> could be noexept since it compare keys"}, {"owner": {"reputation": 1624, "user_id": 1997715, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b292b43b1b3901a70d961c055cee8455?s=128&d=identicon&r=PG", "display_name": "PowerGamer", "link": "https://stackoverflow.com/users/1997715/powergamer"}, "reply_to_user": {"reputation": 445, "user_id": 5747545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a340b35f7f87c161d3e77e581d2f23a4?s=128&d=identicon&r=PG&f=1", "display_name": "88877", "link": "https://stackoverflow.com/users/5747545/88877"}, "edited": false, "score": 1, "creation_date": 1452100993, "post_id": 34638399, "comment_id": 57023297, "body": "@88877 Of course, <code>Compare</code> can throw indeed: <code>23.2.4.1.1</code> of C++14 states <code>erase(k) does not throw an exception unless that exception is thrown by the container\u2019s Compare object (if any).</code> Please make your comment an answer."}, {"owner": {"reputation": 88499, "user_id": 650405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5cdee2abea51e91756076032f0053081?s=128&d=identicon&r=PG", "display_name": "Karoly Horvath", "link": "https://stackoverflow.com/users/650405/karoly-horvath"}, "edited": false, "score": 6, "creation_date": 1452101186, "post_id": 34638399, "comment_id": 57023425, "body": "Well, <code>noexcept(Compare)</code> is still an option."}], "answers": [{"tags": [], "owner": {"reputation": 445, "user_id": 5747545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a340b35f7f87c161d3e77e581d2f23a4?s=128&d=identicon&r=PG&f=1", "display_name": "88877", "link": "https://stackoverflow.com/users/5747545/88877"}, "is_accepted": true, "score": 9, "last_activity_date": 1452101599, "creation_date": 1452101599, "answer_id": 34639172, "question_id": 34638399, "link": "https://stackoverflow.com/questions/34638399/why-stdmap-find-is-not-declared-as-noexcept/34639172#34639172", "title": "Why std::map find() is not declared as noexcept?", "body": "<p><code>find()</code> are based on the <code>Compare()</code> method of the map, that could throw an exception (imagine the case of a complex key that could be incorrect). So, we can not be sure that <code>find()</code> won't raise an exception.</p>\n"}], "owner": {"reputation": 1624, "user_id": 1997715, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b292b43b1b3901a70d961c055cee8455?s=128&d=identicon&r=PG", "display_name": "PowerGamer", "link": "https://stackoverflow.com/users/1997715/powergamer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1133, "favorite_count": 0, "accepted_answer_id": 34639172, "answer_count": 1, "score": 9, "last_activity_date": 1452110189, "creation_date": 1452099157, "last_edit_date": 1452110189, "question_id": 34638399, "link": "https://stackoverflow.com/questions/34638399/why-stdmap-find-is-not-declared-as-noexcept", "title": "Why std::map find() is not declared as noexcept?", "body": "<p>C++14 standard defines the find() member functions of <code>std::map</code> as follows:</p>\n\n<pre><code>iterator find(const key_type&amp; x);\nconst_iterator find(const key_type&amp; x) const;\n</code></pre>\n\n<p>Why are these functions not defined as <code>noexcept</code>? What could possibly go wrong inside, that would require to throw an exception or produce undefined behavior (other than not finding an element in which case the function returns an <code>end</code> iterator and no exception throwing would be required anyway)?</p>\n"}, {"tags": ["c++", "string", "stl", "operator-overloading"], "answers": [{"comments": [{"owner": {"reputation": 95188, "user_id": 440119, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5ec9ca2a92a94a5470396073129d79e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Lindley", "link": "https://stackoverflow.com/users/440119/benjamin-lindley"}, "edited": false, "score": 0, "creation_date": 1452099967, "post_id": 34638553, "comment_id": 57022571, "body": "Your recommendation would also make the class non assignable."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 95188, "user_id": 440119, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5ec9ca2a92a94a5470396073129d79e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Lindley", "link": "https://stackoverflow.com/users/440119/benjamin-lindley"}, "edited": false, "score": 0, "creation_date": 1452103326, "post_id": 34638553, "comment_id": 57024734, "body": "@BenjaminLindley agree, but if it&#39;s intended use is only as a key for map then it should be fine. Or at least ctor parameter should be a ref, implementation can be with a pointer."}], "tags": [], "owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "is_accepted": true, "score": 4, "last_activity_date": 1452100152, "last_edit_date": 1452100152, "creation_date": 1452099609, "answer_id": 34638553, "question_id": 34638327, "link": "https://stackoverflow.com/questions/34638327/map-operator-conditions-invalid-comparator/34638553#34638553", "title": "Map operator &lt; conditions - invalid comparator", "body": "<p>your if statement in comparation function code is convoluted way to say:</p>\n\n<pre><code>return str-&gt;compare(offset, length, *val.str, val.offset, val.length) != 0;\n</code></pre>\n\n<p>which is incorrect for comparison function that <code>std::map</code> requires. Remember you are implementing less than operator, not equivalence. If you want your substring to be sorted in ascending order use this:</p>\n\n<pre><code>return str-&gt;compare(offset, length, *val.str, val.offset, val.length) &lt; 0;\n</code></pre>\n\n<p>I would recommend using const reference to <code>std::string</code> in you <code>substring</code> class - that will reflect the fact you do not accept <code>nullptr</code> as pointer and show intent that you do not want to change original string through this class  and make your code cleaner.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user3675773"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1187, "favorite_count": 0, "accepted_answer_id": 34638553, "answer_count": 1, "score": 0, "last_activity_date": 1452100152, "creation_date": 1452098901, "question_id": 34638327, "link": "https://stackoverflow.com/questions/34638327/map-operator-conditions-invalid-comparator", "title": "Map operator &lt; conditions - invalid comparator", "body": "<p>I need to check if two substrings are equal while inserting to a map. Here is the code:</p>\n\n<pre><code>class substring {\npublic:\n\n    substring(string* str, int offset, int length) : str(str), offset(offset), length(length) {  }\n\n\n    bool operator &lt; (const substring&amp; val) const {\n\n        if (str-&gt;compare(offset, length, *val.str, val.offset, val.length) == 0) return false;\n        else return true;\n    }\n\n    int offset, length;\n    string* str;\n\n};\n</code></pre>\n\n<p>This class above is a 'key' in my map. <strong>Lengths of both substrings are always same.</strong> Some of the conditions are wrong, cause it's still yelling 'invalid comparator'.</p>\n"}, {"tags": ["c++", "c++11", "static", "constexpr", "stl-algorithm"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1452098594, "post_id": 34638149, "comment_id": 57021630, "body": "I <a href=\"http://goo.gl/WdiBJu\" rel=\"nofollow noreferrer\">cannot reproduce</a>"}, {"owner": {"reputation": 43107, "user_id": 3953764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dd168106a67cbd805c107cba3252caa?s=128&d=identicon&r=PG", "display_name": "Piotr Skotnicki", "link": "https://stackoverflow.com/users/3953764/piotr-skotnicki"}, "edited": false, "score": 1, "creation_date": 1452098631, "post_id": 34638149, "comment_id": 57021654, "body": "<code>std::min</code>, taking arguments by reference, ODR-uses the static member, you need a corresponding definition"}, {"owner": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "edited": false, "score": 0, "creation_date": 1452098961, "post_id": 34638149, "comment_id": 57021871, "body": "Interesting, three comments, three different approaches. Nathan, it is not the compiler I&#39;m using, anyway it&#39;s interesting. Piotr, I don&#39;t fully get the problem from your point of view, can you be more detailed? R.Sahu: issue with floating point? Actually, I got the error also in real code while dealing with float variables..."}, {"owner": {"reputation": 43107, "user_id": 3953764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dd168106a67cbd805c107cba3252caa?s=128&d=identicon&r=PG", "display_name": "Piotr Skotnicki", "link": "https://stackoverflow.com/users/3953764/piotr-skotnicki"}, "edited": false, "score": 0, "creation_date": 1452099066, "post_id": 34638149, "comment_id": 57021949, "body": "@skypjack you only declare a static constexpr member, you don&#39;t define it. however, to pass it to <code>std::min</code> it has to have an address (as it&#39;s taken by reference). if you only assign its value to a local variable, then it&#39;s an lvalue to rvalue conversion which doesn&#39;t ODR-use the static data member, hence it works"}, {"owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "edited": false, "score": 1, "creation_date": 1452099173, "post_id": 34638149, "comment_id": 57022020, "body": "Related: <a href=\"http://stackoverflow.com/q/29397864/3093378\">stackoverflow.com/q/29397864/3093378</a>"}, {"owner": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "reply_to_user": {"reputation": 43107, "user_id": 3953764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dd168106a67cbd805c107cba3252caa?s=128&d=identicon&r=PG", "display_name": "Piotr Skotnicki", "link": "https://stackoverflow.com/users/3953764/piotr-skotnicki"}, "edited": false, "score": 0, "creation_date": 1452099241, "post_id": 34638149, "comment_id": 57022068, "body": "@PiotrSkotnicki It makes sense, but what is curious is that actually it compiles if you look at the link in the comment of NathanOliver, so I guess we are missing something in this reasoning. Am I wrong?"}, {"owner": {"reputation": 43107, "user_id": 3953764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dd168106a67cbd805c107cba3252caa?s=128&d=identicon&r=PG", "display_name": "Piotr Skotnicki", "link": "https://stackoverflow.com/users/3953764/piotr-skotnicki"}, "edited": false, "score": 0, "creation_date": 1452099273, "post_id": 34638149, "comment_id": 57022089, "body": "@skypjack I believe violation of this rule doesn&#39;t require a diagnostic"}, {"owner": {"reputation": 1709, "user_id": 4325016, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45f0a09185dea1c14428422310a022de?s=128&d=identicon&r=PG&f=1", "display_name": "George Houpis", "link": "https://stackoverflow.com/users/4325016/george-houpis"}, "edited": false, "score": 0, "creation_date": 1452099426, "post_id": 34638149, "comment_id": 57022182, "body": "The constexpr means evaluate at comnpile time.  It does not actually create a Foo::BAR constant.  When your second code is made, you are evaluating a local variable using that compile-time expression and it compiles and links fine."}, {"owner": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "reply_to_user": {"reputation": 43107, "user_id": 3953764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dd168106a67cbd805c107cba3252caa?s=128&d=identicon&r=PG", "display_name": "Piotr Skotnicki", "link": "https://stackoverflow.com/users/3953764/piotr-skotnicki"}, "edited": false, "score": 0, "creation_date": 1452099445, "post_id": 34638149, "comment_id": 57022196, "body": "@PiotrSkotnicki Of course, they don&#39;t, but at least it should end with an error in both cases or any. It is an error or it is not, it cannot (or better, it shouldn&#39;t) be an error for a compiler and not an error for another one!! :-)"}, {"owner": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "edited": false, "score": 0, "creation_date": 1452099685, "post_id": 34638149, "comment_id": 57022373, "body": "@skypjack: No, that&#39;s where you fail. There is no guarantee anything which is <i>potentially</i> ODR-used, <i>is</i> actually ODR-used."}, {"owner": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "reply_to_user": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "edited": false, "score": 0, "creation_date": 1452099845, "post_id": 34638149, "comment_id": 57022489, "body": "@Deduplicator Ok, got it. Can you integrate your answer with details about that, for it seems to be what I was looking for and where I was failing? Thank you very much."}], "answers": [{"tags": [], "owner": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "is_accepted": true, "score": 5, "last_activity_date": 1452100119, "last_edit_date": 1495535298, "creation_date": 1452099364, "answer_id": 34638478, "question_id": 34638149, "link": "https://stackoverflow.com/questions/34638149/static-constexpr-members-seem-not-to-go-along-with-stdmin/34638478#34638478", "title": "Static constexpr members seem not to go along with std::min", "body": "<p>The selected prototype for <code>min</code> is</p>\n\n<pre><code>template&lt;class T&gt; \n/* constexpr since C++14 */ const T&amp; min( const T&amp; a, const T&amp; b );\n</code></pre>\n\n<p>The pertinent point is that it takes the argument by reference, meaning it One-Definition-Rule (ODR)-uses it.<br>\nAnd you never defined it, you only declared it in your class (with an initializer):</p>\n\n<pre><code>    static constexpr float BAR = .42;\n</code></pre>\n\n<p>Which is good enough for copying and otherwise using the value, but not for using it as anything but a prvalue.</p>\n\n<p>See <a href=\"https://stackoverflow.com/questions/29397864/why-does-constexpr-static-member-of-type-class-require-a-definition\">Why does constexpr static member (of type class) require a definition?</a></p>\n\n<p>Violation of the ODR (whose finer points are fine and voluminuous indeed) need not be diagnosed:</p>\n\n<blockquote>\n  <h3>3.2 One definition rule <em>[basic.def.odr]</em></h3>\n  \n  <p>4 Every program shall contain exactly one definition of every non-inline function or variable that is odr-used\n  in that program; no diagnostic required. The definition can appear explicitly in the program, it can be found\n  in the standard or a user-defined library, or (when appropriate) it is implicitly defined (see 12.1, 12.4 and\n  12.8). An inline function shall be defined in every translation unit in which it is odr-used.</p>\n</blockquote>\n"}], "owner": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 308, "favorite_count": 0, "closed_date": 1452099699, "accepted_answer_id": 34638478, "answer_count": 1, "score": 4, "last_activity_date": 1452100119, "creation_date": 1452098349, "question_id": 34638149, "link": "https://stackoverflow.com/questions/34638149/static-constexpr-members-seem-not-to-go-along-with-stdmin", "closed_reason": "Duplicate", "title": "Static constexpr members seem not to go along with std::min", "body": "<p>Here is a problem the reason of which is quite obscure to me, but the workaround of which is fortunately quite easy.</p>\n\n<p>Consider the following code (let me call it my <code>main.cpp</code>):</p>\n\n<pre><code>#include &lt;algorithm&gt;\n\nstruct Foo {\n    static constexpr float BAR = .42;\n\n    float operator()() const noexcept {\n        float zero = .0;\n        return std::min(zero, BAR);\n    }\n};\n\nint main() {\n    Foo foo;\n    foo();\n}\n</code></pre>\n\n<p>When I tried to compile it, I got the error:</p>\n\n<blockquote>\n  <p>foobar:~/stackoverflow$ g++ -std=c++11 main.cpp<br>\n  /tmp/ccjULTPy.o: In function 'Foo::operator()() const':<br>\n  main.cpp:(.text._ZNK3FooclEv[_ZNK3FooclEv]+0x1a): undefined reference to `Foo::BAR'<br>\n  collect2: error: ld returned 1 exit status</p>\n</blockquote>\n\n<p>The same happens (quite obviously) also if I use the following statement:</p>\n\n<pre><code>return std::min(zero, Foo::BAR);\n</code></pre>\n\n<p>Below a slightly modified version of the example above.<br/>\nThis one compiles with no error, even though I'm still referring to the <code>BAR</code> member:</p>\n\n<pre><code>#include &lt;algorithm&gt;\n\nstruct Foo {\n    static constexpr float BAR = .42;\n\n    float operator()() const noexcept {\n        float zero = .0;\n        float bar = BAR;\n        return std::min(zero, bar);\n    }\n};\n\nint main() {\n    Foo foo;\n    foo();\n}\n</code></pre>\n\n<p>I didn't succeed in understanding why the latter version compiles fine while the former ends with an error.<br/>\nAs far as I know, both the versions are correct and should compile, but I strongly suspect that I'm missing something important here.</p>\n\n<p>Any suggestion?</p>\n\n<p>Here my compiler's version: <code>g++ (Debian 5.3.1-5) 5.3.1 20160101</code>.</p>\n"}, {"tags": ["c++", "gcc", "linker"], "answers": [{"comments": [{"owner": {"reputation": 93, "user_id": 3901747, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b71bfde7d0930cf7e00d8e202c75947b?s=128&d=identicon&r=PG&f=1", "display_name": "Sid", "link": "https://stackoverflow.com/users/3901747/sid"}, "edited": false, "score": 0, "creation_date": 1452173000, "post_id": 34640227, "comment_id": 57057620, "body": "Thanks Mike, i had tried this earlier ... but had done a mistake last time, one of the variable was mentioned as const and this resulted in some error. Your answer helped me to revisit the declaration."}], "tags": [], "owner": {"reputation": 45838, "user_id": 1362568, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/EAFi0.jpg?s=128&g=1", "display_name": "Mike Kinghan", "link": "https://stackoverflow.com/users/1362568/mike-kinghan"}, "is_accepted": true, "score": 1, "last_activity_date": 1452105155, "creation_date": 1452105155, "answer_id": 34640227, "question_id": 34638115, "link": "https://stackoverflow.com/questions/34638115/how-do-i-place-a-group-of-variables-in-a-specific-section-in-gcc-is-there-anyth/34640227#34640227", "title": "How do I place a group of variables in a specific section in gcc, is there anything like #pragma default_variable_attributes available with arm", "body": "<p>With gcc you use the compiler's <code>__attribute__</code> extension of the declarator syntax, e.g.</p>\n\n<pre><code>int my_global_1 __attribute__ ((section (\"MyData\"))) = 0;\nint my_global_2 __attribute__ ((section (\"MyData\"))) = 0;\n\n__attribute__ ((section (\"MyFuncs\"))) int foo(int i) \n{\n    return i * i;\n}\n</code></pre>\n"}], "owner": {"reputation": 93, "user_id": 3901747, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b71bfde7d0930cf7e00d8e202c75947b?s=128&d=identicon&r=PG&f=1", "display_name": "Sid", "link": "https://stackoverflow.com/users/3901747/sid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2289, "favorite_count": 1, "accepted_answer_id": 34640227, "answer_count": 1, "score": 1, "last_activity_date": 1452105155, "creation_date": 1452098232, "question_id": 34638115, "link": "https://stackoverflow.com/questions/34638115/how-do-i-place-a-group-of-variables-in-a-specific-section-in-gcc-is-there-anyth", "title": "How do I place a group of variables in a specific section in gcc, is there anything like #pragma default_variable_attributes available with arm", "body": "<p>The below link \n<a href=\"https://www.iar.com/support/tech-notes/linker/how-do-i-place-a-group-of-functions-or-variables-in-a-specific-section/\" rel=\"nofollow\">https://www.iar.com/support/tech-notes/linker/how-do-i-place-a-group-of-functions-or-variables-in-a-specific-section/</a>\nexplains how a group of variables can be placed in a specific section, this is with IAR arm linker.</p>\n\n<p>Pasting the example (for which i want a gcc equivalent) from the link here</p>\n\n<pre><code>/* Place following data in section MY_DATA */\n#pragma default_variable_attributes = @ \"MY_DATA\"\n\nint data1;\nint data2;\n\n/* Stop placing data in section MY_DATA */\n#pragma default_variable_attributes =\n</code></pre>\n\n<p>In gcc do we have any such feature, which helps me to define in the source code how the variables can be place contiguously.</p>\n\n<p>Regards</p>\n"}, {"tags": ["c++", "opencl", "video-card"], "comments": [{"owner": {"reputation": 15136, "user_id": 4044696, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/54xyv.jpg?s=128&g=1", "display_name": "Severin Pappadeux", "link": "https://stackoverflow.com/users/4044696/severin-pappadeux"}, "edited": false, "score": 0, "creation_date": 1452099211, "post_id": 34638083, "comment_id": 57022046, "body": "\u041f\u0430\u0432\u0435\u043b, did you try running your OpenCL app on CPU?  CL_DEVICE_TYPE_GPU vs  CL_DEVICE_TYPE_CPU?"}, {"owner": {"reputation": 71, "user_id": 2623793, "user_type": "registered", "accept_rate": 17, "profile_image": "https://graph.facebook.com/1676225917/picture?type=large", "display_name": "\u041f\u0430\u0432\u0435\u043b \u0412\u043e\u0435\u0432\u043e\u0434\u0430", "link": "https://stackoverflow.com/users/2623793/%d0%9f%d0%b0%d0%b2%d0%b5%d0%bb-%d0%92%d0%be%d0%b5%d0%b2%d0%be%d0%b4%d0%b0"}, "reply_to_user": {"reputation": 15136, "user_id": 4044696, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/54xyv.jpg?s=128&g=1", "display_name": "Severin Pappadeux", "link": "https://stackoverflow.com/users/4044696/severin-pappadeux"}, "edited": false, "score": 0, "creation_date": 1452100444, "post_id": 34638083, "comment_id": 57022923, "body": "@SeverinPappadeux, I tried use clCreateContextFromType(0, CL_DEVICE_TYPE_CPU, NULL, NULL, &amp;errcode); but it did not help. the same error. Do you mean this?"}, {"owner": {"reputation": 15136, "user_id": 4044696, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/54xyv.jpg?s=128&g=1", "display_name": "Severin Pappadeux", "link": "https://stackoverflow.com/users/4044696/severin-pappadeux"}, "edited": false, "score": 0, "creation_date": 1452102585, "post_id": 34638083, "comment_id": 57024309, "body": "Yes, if you repeat problem on CPU and GPU, most likely it is somewhere in your code. I understand you have really few lines of code, but this is usually first indication of something wrong. Did you try to get a stack trace? Easier to get it on CPU"}, {"owner": {"reputation": 71, "user_id": 2623793, "user_type": "registered", "accept_rate": 17, "profile_image": "https://graph.facebook.com/1676225917/picture?type=large", "display_name": "\u041f\u0430\u0432\u0435\u043b \u0412\u043e\u0435\u0432\u043e\u0434\u0430", "link": "https://stackoverflow.com/users/2623793/%d0%9f%d0%b0%d0%b2%d0%b5%d0%bb-%d0%92%d0%be%d0%b5%d0%b2%d0%be%d0%b4%d0%b0"}, "reply_to_user": {"reputation": 15136, "user_id": 4044696, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/54xyv.jpg?s=128&g=1", "display_name": "Severin Pappadeux", "link": "https://stackoverflow.com/users/4044696/severin-pappadeux"}, "edited": false, "score": 0, "creation_date": 1452102841, "post_id": 34638083, "comment_id": 57024448, "body": "@SeverinPappadeux, it&#39;s the first lines before other code. I try to initialize openCL and then use it."}, {"owner": {"reputation": 15136, "user_id": 4044696, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/54xyv.jpg?s=128&g=1", "display_name": "Severin Pappadeux", "link": "https://stackoverflow.com/users/4044696/severin-pappadeux"}, "edited": false, "score": 0, "creation_date": 1452103790, "post_id": 34638083, "comment_id": 57024983, "body": "By the way, did you try to run your app as an administrator?"}, {"owner": {"reputation": 71, "user_id": 2623793, "user_type": "registered", "accept_rate": 17, "profile_image": "https://graph.facebook.com/1676225917/picture?type=large", "display_name": "\u041f\u0430\u0432\u0435\u043b \u0412\u043e\u0435\u0432\u043e\u0434\u0430", "link": "https://stackoverflow.com/users/2623793/%d0%9f%d0%b0%d0%b2%d0%b5%d0%bb-%d0%92%d0%be%d0%b5%d0%b2%d0%be%d0%b4%d0%b0"}, "reply_to_user": {"reputation": 15136, "user_id": 4044696, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/54xyv.jpg?s=128&g=1", "display_name": "Severin Pappadeux", "link": "https://stackoverflow.com/users/4044696/severin-pappadeux"}, "edited": false, "score": 0, "creation_date": 1452104244, "post_id": 34638083, "comment_id": 57025259, "body": "@SeverinPappadeux, I run always app as admin, no effect"}, {"owner": {"reputation": 15136, "user_id": 4044696, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/54xyv.jpg?s=128&g=1", "display_name": "Severin Pappadeux", "link": "https://stackoverflow.com/users/4044696/severin-pappadeux"}, "edited": false, "score": 0, "creation_date": 1452105394, "post_id": 34638083, "comment_id": 57025960, "body": "well, I&#39;m at lost here. Apparently, your code is trying to access something at address 0x00000 (dereference null pointer?) and quite logically get access violation (famous error code 0xC0000005). You could try to get stack trace, or back trace. Try to run it under <code>windbg</code>, that&#39;s the only advice I have. Good luck!"}, {"owner": {"reputation": 7967, "user_id": 741692, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/1300d6b45404082362f2d0f05de23640?s=128&d=identicon&r=PG&f=1", "display_name": "DarkZeros", "link": "https://stackoverflow.com/users/741692/darkzeros"}, "edited": false, "score": 0, "creation_date": 1452178536, "post_id": 34638083, "comment_id": 57061663, "body": "You have some problem linking your OpenCL lib, since it is crassing with null pointers everytime you are calling OpenCL API functions. It is not related to the SDK or the C++ code. You are saying that you are initializing the code then using it, doe sthat mean you are using a dynamic dll loading? There may be some problem there."}, {"owner": {"reputation": 5977, "user_id": 1745695, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b932c5253c45af61dc443fbc1b9c935c?s=128&d=identicon&r=PG", "display_name": "Dithermaster", "link": "https://stackoverflow.com/users/1745695/dithermaster"}, "edited": false, "score": 0, "creation_date": 1452452232, "post_id": 34638083, "comment_id": 57165109, "body": "I have seen systems where calling clGetPlatformIDs (which, under the C++ wrapper code, this code is doing) causes and exception. It was usually caused by a broken driver. I&#39;d suggest re-installing drivers for your OpenCL device(s)."}], "owner": {"reputation": 71, "user_id": 2623793, "user_type": "registered", "accept_rate": 17, "profile_image": "https://graph.facebook.com/1676225917/picture?type=large", "display_name": "\u041f\u0430\u0432\u0435\u043b \u0412\u043e\u0435\u0432\u043e\u0434\u0430", "link": "https://stackoverflow.com/users/2623793/%d0%9f%d0%b0%d0%b2%d0%b5%d0%bb-%d0%92%d0%be%d0%b5%d0%b2%d0%be%d0%b4%d0%b0"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 199, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1452098160, "creation_date": 1452098160, "question_id": 34638083, "link": "https://stackoverflow.com/questions/34638083/access-violation-problems-in-opencl-c", "title": "Access violation problems in OpenCL C++", "body": "<p>I tried to get list of platforms beform calculating:</p>\n\n<pre><code>vector&lt;cl::Platform&gt; platforms;\ncl::Platform::get(&amp;platforms);\n</code></pre>\n\n<p>but have an exception:</p>\n\n<pre><code>unhandled exception in \"0x00000000\" in \"Test.exe\": 0xC0000005: Access violation.\n</code></pre>\n\n<p>I have Radeon Mobility HD 5730, it supports only OpenCL v 1.0. I tried use SDK from AMD and Intel last versions, but results were the same. May it depands on sdk version? Could you help me solve this problem?</p>\n"}, {"tags": ["c++", "c", "user-interface", "winapi", "controls"], "comments": [{"owner": {"reputation": 3465, "user_id": 1457059, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/m8Vd7.jpg?s=128&g=1", "display_name": "Filipe Teixeira", "link": "https://stackoverflow.com/users/1457059/filipe-teixeira"}, "edited": false, "score": 0, "creation_date": 1452098418, "post_id": 34638002, "comment_id": 57021506, "body": "Rather than such a large description it would be better if you posted some code of your attempts. Try to make a minimal example of the problem. Then we can help you from there."}], "answers": [{"comments": [{"owner": {"reputation": 143, "user_id": 5752858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6124afa09bfbeec7be1d9a2b2efc3750?s=128&d=identicon&r=PG&f=1", "display_name": "user5752858", "link": "https://stackoverflow.com/users/5752858/user5752858"}, "edited": false, "score": 0, "creation_date": 1452102073, "post_id": 34638461, "comment_id": 57023974, "body": "Thanks for the reply. I didn&#39;t mention (sorry) that I&#39;ll need to handle the messages for the controls children of this child control that contains them. I mean I&#39;ll have to code the command for buttons or the code for making a custom progress bar increment and so on... Will that be possible using a button BS_GROUPBOX? Will I be able to paint it without a rectangle, if I&#39;ll need it? Or will it forcefully look like another common button? Thanks again for the time spent reading and replying :)"}, {"owner": {"reputation": 143, "user_id": 5752858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6124afa09bfbeec7be1d9a2b2efc3750?s=128&d=identicon&r=PG&f=1", "display_name": "user5752858", "link": "https://stackoverflow.com/users/5752858/user5752858"}, "edited": false, "score": 0, "creation_date": 1452102710, "post_id": 34638461, "comment_id": 57024387, "body": "Thanks again. What about this button&#39;s children controls? Will I receive the messages for an eventual custom button child of this control in the mai WndProc or I&#39;ll have to write another processing function?"}, {"owner": {"reputation": 143, "user_id": 5752858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6124afa09bfbeec7be1d9a2b2efc3750?s=128&d=identicon&r=PG&f=1", "display_name": "user5752858", "link": "https://stackoverflow.com/users/5752858/user5752858"}, "edited": false, "score": 0, "creation_date": 1452103453, "post_id": 34638461, "comment_id": 57024807, "body": "Sorry for my ignorance but I couldn&#39;t understand what you meant... Can you explain with an example? Let&#39;s say I have the hwnd which is my main window, hwnd_button_bsgroup which is the button that you described, child of hwnd and another control hwnd_button_child child of hwnd_button_bsgroup."}, {"owner": {"reputation": 143, "user_id": 5752858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6124afa09bfbeec7be1d9a2b2efc3750?s=128&d=identicon&r=PG&f=1", "display_name": "user5752858", "link": "https://stackoverflow.com/users/5752858/user5752858"}, "edited": false, "score": 0, "creation_date": 1452104063, "post_id": 34638461, "comment_id": 57025153, "body": "So if I have understood, you&#39;re basically saying I have to put hwnd_button_bsgroup as hwnd&#39;s child and also hwnd_button_child as hwnd&#39;s child if I want to keep on having only one WndProc (I was trying to avoid multiple processing procedures)... Right?"}], "tags": [], "owner": {"reputation": 138010, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "is_accepted": false, "score": 2, "last_activity_date": 1452099322, "creation_date": 1452099322, "answer_id": 34638461, "question_id": 34638002, "link": "https://stackoverflow.com/questions/34638002/custom-container-control-with-children-using-pure-winapi/34638461#34638461", "title": "Custom &quot;container&quot; control with children using pure WinApi", "body": "<p>I recommend to create a <code>\"button\"</code> window with style <code>BS_GROUPBOX</code>.</p>\n\n<pre><code>hButton = CreateWindow( \"button\", \"group\", WS_CHILD | WS_VISIBLE | BS_GROUPBOX, 0, 0, 0, 0, hWnd, NULL, hInstance, NULL );\n</code></pre>\n\n<p><code>BS_GROUPBOX</code> creates a rectangle in which other controls can be grouped. The child controls are grouped by drawing a border around them. The window text is displayed in the upper-left corner.</p>\n"}], "owner": {"reputation": 143, "user_id": 5752858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6124afa09bfbeec7be1d9a2b2efc3750?s=128&d=identicon&r=PG&f=1", "display_name": "user5752858", "link": "https://stackoverflow.com/users/5752858/user5752858"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 253, "favorite_count": 0, "closed_date": 1452110981, "answer_count": 1, "score": 1, "last_activity_date": 1452122284, "creation_date": 1452097948, "last_edit_date": 1452122284, "question_id": 34638002, "link": "https://stackoverflow.com/questions/34638002/custom-container-control-with-children-using-pure-winapi", "closed_reason": "Needs more focus", "title": "Custom &quot;container&quot; control with children using pure WinApi", "body": "<p>I would like to create a control (named HWND container) in a window (named HWND hwnd) that will hold other controls like a button (named HWND button) and an image (named HWND bitmap) avoiding the use of \"static\" standard class. It will contain some custom drawn controls whose messages will be handled in the main WndProc (I don't want to add another WndProc) and I would like at the same time to be able to call only once the function <code>ShowWindow(container, SW_HIDE)</code> to hide the control container and all the controls it holds.\nIs this possible in plain WinApi (so no MFC or anything else)? What kind of control should I use?</p>\n\n<p>Thanks,\nLB</p>\n"}, {"tags": ["c++", "visual-studio", "visual-studio-2015"], "comments": [{"owner": {"reputation": 109956, "user_id": 159145, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/r8ryC.png?s=128&g=1", "display_name": "Dai", "link": "https://stackoverflow.com/users/159145/dai"}, "edited": false, "score": 1, "creation_date": 1452097742, "post_id": 34637894, "comment_id": 57021085, "body": "What is displayed in the Output window?"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 1, "creation_date": 1452097758, "post_id": 34637894, "comment_id": 57021098, "body": "Look at the output screen. Press Alt-2 to get it. The name (and location) of the executable should be in the output."}, {"owner": {"reputation": 4007, "user_id": 1020484, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/94c933a9303bcc5b6445fc9e310bcf57?s=128&d=identicon&r=PG", "display_name": "lcs", "link": "https://stackoverflow.com/users/1020484/lcs"}, "edited": false, "score": 2, "creation_date": 1452097803, "post_id": 34637894, "comment_id": 57021126, "body": "Try looking at the output folder in the root of the solution folder. Example: <code>%solution%\\DEBUG</code> instead of <code>%solution%\\Project1\\DEBUG</code>."}, {"owner": {"reputation": 120, "user_id": 4498537, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh3.googleusercontent.com/-R9wQm23vtNU/AAAAAAAAAAI/AAAAAAAAAFI/UWu9YVrCCI4/photo.jpg?sz=128", "display_name": "ChrisK", "link": "https://stackoverflow.com/users/4498537/chrisk"}, "edited": false, "score": 0, "creation_date": 1452097885, "post_id": 34637894, "comment_id": 57021177, "body": "Thank you Cocarin, that fixed it!"}], "answers": [{"tags": [], "owner": {"reputation": 120, "user_id": 4498537, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh3.googleusercontent.com/-R9wQm23vtNU/AAAAAAAAAAI/AAAAAAAAAFI/UWu9YVrCCI4/photo.jpg?sz=128", "display_name": "ChrisK", "link": "https://stackoverflow.com/users/4498537/chrisk"}, "is_accepted": false, "score": 0, "last_activity_date": 1452097925, "creation_date": 1452097925, "answer_id": 34637994, "question_id": 34637894, "link": "https://stackoverflow.com/questions/34637894/visual-studio-not-creating-executable-c/34637994#34637994", "title": "Visual Studio Not Creating Executable (C++)", "body": "<p>The problem was that I was looking inside </p>\n\n<blockquote>\n  <p>%solution%\\Project1\\DEBUG</p>\n</blockquote>\n\n<p>instead of </p>\n\n<blockquote>\n  <p>%solution%\\DEBUG</p>\n</blockquote>\n\n<p>Thank you everyone who tried to help me!</p>\n"}], "owner": {"reputation": 120, "user_id": 4498537, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh3.googleusercontent.com/-R9wQm23vtNU/AAAAAAAAAAI/AAAAAAAAAFI/UWu9YVrCCI4/photo.jpg?sz=128", "display_name": "ChrisK", "link": "https://stackoverflow.com/users/4498537/chrisk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 55, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1452097925, "creation_date": 1452097629, "question_id": 34637894, "link": "https://stackoverflow.com/questions/34637894/visual-studio-not-creating-executable-c", "title": "Visual Studio Not Creating Executable (C++)", "body": "<p>I have been changing things on the project options and now when I build my project instead of getting an executable I'm getting these files</p>\n\n<p><a href=\"https://i.stack.imgur.com/Nz5cF.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Nz5cF.png\" alt=\"The Folder\"></a></p>\n"}, {"tags": ["c++", "winapi"], "comments": [{"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1452097463, "post_id": 34637734, "comment_id": 57020876, "body": "Probably the way forward is to solve the actual problem without resorting to faking input"}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 2, "creation_date": 1452099101, "post_id": 34637734, "comment_id": 57021974, "body": "You are passing a <code>char</code>, which can only encode ANSI characters, not Unicode characters. You&#39;ll have to pass a <code>wchar_t</code> instead."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 1, "creation_date": 1452107468, "post_id": 34637734, "comment_id": 57027253, "body": "And you have to pass 2 <code>wchar_t</code> values, each one in its own <code>INPUT</code> structure, if the desired Unicode codepoint is large enough to require use of a UTF-16 surrogate pair. So it would be better to have <code>Press()</code> accept a <code>wchar_t*</code>/<code>std::wstring</code> string that you loop through, instead of accepting a single <code>wchar_t</code> character."}], "owner": {"reputation": 11, "user_id": 5751880, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9bd39c5356f2a009db2d14d87a345ca4?s=128&d=identicon&r=PG&f=1", "display_name": "tsioftas", "link": "https://stackoverflow.com/users/5751880/tsioftas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 133, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1452097059, "creation_date": 1452097059, "question_id": 34637734, "link": "https://stackoverflow.com/questions/34637734/use-sendinput-to-input-greek-letters", "title": "Use SendInput() to input Greek letters", "body": "<p>I'm trying to make a program in C++, that takes the characters from a given string and simulates the button presses of each character using the SendInput() command. It works fine with ASCII characters such as Latin letters and standard symbols, but it doesn't work with unicode characters, specifically I'm trying to type in Greek. For example instead of printing the Greek letter '\u03a3' it prints this character, which looks like Japanese '\uff91'. Can anyone please explain why this happens and how can I fix it?\nThis is my function for each keystroke:</p>\n\n<pre><code>void Press(char c)\n{\n      INPUT in;\n      in.type = INPUT_KEYBOARD;\n      in.ki.wVk = 0;\n      in.ki.wScan = c;\n      in.ki.time = 0;\n      in.ki.dwFlags = KEYEVENTF_UNICODE;\n      in.ki.dwExtraInfo = 0;\n\n      INPUT i[] = { in };\n      SendInput(1, i, sizeof(in));\n\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "printf", "undefined-behavior", "sequence-points"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 7, "creation_date": 1452097238, "post_id": 34637712, "comment_id": 57020721, "body": "According to <a href=\"http://stackoverflow.com/questions/4176328/undefined-behavior-and-sequence-points\">this</a> it is undefined behavior.  I also believe <code>your_function(++i, ++i)</code> is undefined behavior as well."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 4, "creation_date": 1452097289, "post_id": 34637712, "comment_id": 57020751, "body": "<code>your_function(++i, ++i)</code> is clearly UB."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1452097387, "post_id": 34637712, "comment_id": 57020817, "body": "The sequence points described by the standard quote are within the body of the <code>printf()</code> function after it has been called. You have extreme undefined behaviour in the calling sequence before the <code>printf()</code> function is called \u2014 which means that any result is acceptable (including the one you got)."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1452097564, "post_id": 34637712, "comment_id": 57020959, "body": "@lurker: Both increments have to be complete before <code>your_function()</code> is called; there is a sequence point after the arguments to a function call have been evaluated, and so the side-effects in the argument list are complete then.  What is unclear is whether the same value is passed twice to <code>your_function()</code> \u2014 it is undefined; it is also undefined whether the other two values <code>i</code> passed to <code>printf()</code> are evaluated before, after or during the double increments in the other function call."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1452097585, "post_id": 34637712, "comment_id": 57020977, "body": "The simple thing is that The evaluation order of function arguments is <i>unspecified</i>."}, {"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1452097674, "post_id": 34637712, "comment_id": 57021038, "body": "@NathanOliver Yeah I got that the function is non-deterministic, I just needed it to demonstrate the problem."}, {"owner": {"reputation": 6181, "user_id": 1025555, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/GBIIj.png?s=128&g=1", "display_name": "Good Night Nerd Pride", "link": "https://stackoverflow.com/users/1025555/good-night-nerd-pride"}, "edited": false, "score": 0, "creation_date": 1452097713, "post_id": 34637712, "comment_id": 57021070, "body": "So what <i>do</i> you expect? Output like <code>12 - 1 - 12</code>? You can achieve that by wrapping <code>++i</code> with <code>int f() { return ++i; }</code>. Of course <code>i</code> has to be made global for that."}, {"owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1452097795, "post_id": 34637712, "comment_id": 57021120, "body": "@JonathanLeffler I see. Let&#39;s ignore your_function(). There is no sequence point between evaluating the arguments in printf. The quote I posted deals with action in the printf function. Therefore that quote doesn&#39;t make <i>printf( &quot;&quot; , i++ , i++ )</i> statements defined."}, {"owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "edited": false, "score": 0, "creation_date": 1452098130, "post_id": 34637712, "comment_id": 57021334, "body": "I have attempted to cover the case <a href=\"http://stackoverflow.com/a/34536741/1275169\">involving <code>printf()</code></a> in the canonical question/answer page here, which you may find useful."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1452098229, "post_id": 34637712, "comment_id": 57021397, "body": "What is the  <i>action associated with input/output conversion format specifier</i>? For my understanding, it is just the printing for <code>%d</code>, so all of the printing actions can be done after all of the inputs have been evaluated. For <code>%n</code> it would be a special case, as it is requiring counting of the already printed characters. So <i>before</i> <code>%n</code> the preceding format specifiers has to be evaluated into corresponding strings"}, {"owner": {"reputation": 67504, "user_id": 1230836, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/38PFC.jpg?s=128&g=1", "display_name": "Elias Van Ootegem", "link": "https://stackoverflow.com/users/1230836/elias-van-ootegem"}, "reply_to_user": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 0, "creation_date": 1452103110, "post_id": 34637712, "comment_id": 57024609, "body": "@2501: That has been the case for some time, the classic example being <code>printf(&quot;foo %n %d\\n&quot;, &amp;a, 42);</code> where <code>%n</code> behaves as a sequence point"}], "answers": [{"comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1452097957, "post_id": 34637823, "comment_id": 57021228, "body": "Mostly correct, but &quot;none of them are separated with sequence points&quot; isn&#39;t completely accurate.  Specifically, there is a sequence point after the arguments to <code>your_function()</code> (and the &#39;function designator&#39;) are evaluated and before the function is called.  So, both the increments are complete before that function is called.  What you can&#39;t say is when the other arguments to <code>printf()</code> were evaluated w.r.t the call to <code>your_function()</code> \u2014 that is undefined, so the values passed to <code>printf()</code> are undefined."}, {"owner": {"reputation": 79096, "user_id": 865874, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ACMnN.png?s=128&g=1", "display_name": "rodrigo", "link": "https://stackoverflow.com/users/865874/rodrigo"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1452098220, "post_id": 34637823, "comment_id": 57021391, "body": "@JonathanLeffler: Since all the arguments to both <code>printf()</code> and <code>your_function()</code> can be evaluated without intermediate SP, I&#39;d say that &quot;none of them are separated with SP&quot; is more or less accurate (should I say &quot;sequenced&quot; intead of &quot;separated&quot;?). The SP you point actually sequences the calls to <code>your_function()</code> and <code>printf()</code>."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1452098625, "post_id": 34637823, "comment_id": 57021650, "body": "Sorta.  It&#39;s messy.  There is, emphatically, a sequence point after the arguments to <code>your_function()</code> are evaluated and before the function is called.  The third argument to <code>printf()</code>, therefore, cannot be evaluated until the call to <code>your_function()</code> returns; and that call must therefore precede the SP before the call to <code>printf()</code>.  But otherwise, there are no constraints on the order of evaluation of the arguments to <code>printf()</code>.  At this stage, these minutiae don&#39;t really matter \u2014 the overall behaviour is UB because of the two increments to <code>i</code>, and anything can happen as a result of UB."}, {"owner": {"reputation": 79096, "user_id": 865874, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ACMnN.png?s=128&g=1", "display_name": "rodrigo", "link": "https://stackoverflow.com/users/865874/rodrigo"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1452099003, "post_id": 34637823, "comment_id": 57021906, "body": "@JonathanLeffler: Messy indeed. That&#39;s why C++ repaced the &quot;sequence point&quot; concept with &quot;sequenced before/after&quot;. But I disagree with &quot;The third argument to printf(), therefore, cannot be evaluated until the call to your_function() returns&quot;. A valid order of evaluation of <code>f1(a, f2(b, c), d)</code> could be <code>d</code> , <code>b</code>, <code>c</code>, <code>f2()</code>, <code>a</code>, <code>f1()</code>. The only sequenced evaluations are <code>b</code>, <code>c</code> before <code>f2()</code> and <code>f2()</code>, <code>a</code>, <code>d</code> before <code>f1()</code>."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1452099275, "post_id": 34637823, "comment_id": 57022091, "body": "Your &quot;I disagree&quot; comment then goes on to state what I think I stated (noting that the result of <code>your_function()</code> <i>is</i> the third argument to <code>printf()</code>), so \u2026 let&#39;s leave it at &#39;messy&#39; and close the discussion.  I note that the statement quoted is actually from Wikipedia, not from a standard.  I went trying to find it in the standard, and can&#39;t find similar text.  That&#39;s good, because I can&#39;t work out what the significance of the &#39;internal sequence points&#39; claim would be \u2014 when the presence or absence of a sequence point between conversion specifications would be detectable."}, {"owner": {"reputation": 79096, "user_id": 865874, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ACMnN.png?s=128&g=1", "display_name": "rodrigo", "link": "https://stackoverflow.com/users/865874/rodrigo"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1452099439, "post_id": 34637823, "comment_id": 57022190, "body": "@JonathanLeffler: The SP between conversions specifications would be detectable when those conversions have side effects, such as <code>%n</code> in my example. I didn&#39;t find this quote in the standard either, but I found another somewhat similar rule related to the callbacks from <code>qsort()</code> and <code>bsearch</code>."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1452100120, "post_id": 34637823, "comment_id": 57022692, "body": "I&#39;d like to discuss this more but I also need to get to the office.   Is email an option?  See my profile."}, {"owner": {"reputation": 32626, "user_id": 691884, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a1f68638c765096502abb3e56274386?s=128&d=identicon&r=PG", "display_name": "Random832", "link": "https://stackoverflow.com/users/691884/random832"}, "edited": false, "score": 0, "creation_date": 1452117955, "post_id": 34637823, "comment_id": 57033320, "body": "@rodrigo <code>%n</code> has a side effect, yes, but how are you to observe the state of the program between them?"}], "tags": [], "owner": {"reputation": 79096, "user_id": 865874, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ACMnN.png?s=128&g=1", "display_name": "rodrigo", "link": "https://stackoverflow.com/users/865874/rodrigo"}, "is_accepted": false, "score": 11, "last_activity_date": 1452098137, "last_edit_date": 1452098137, "creation_date": 1452097389, "answer_id": 34637823, "question_id": 34637712, "link": "https://stackoverflow.com/questions/34637712/sequence-points-between-printf-function-args-does-the-sequence-point-between-co/34637823#34637823", "title": "Sequence Points between printf function args; does the sequence point between conversions matter?", "body": "<p>I think you misunderstood the text about the <code>printf</code> sequence points (SP). They are somehow an anomaly, and only with <code>%n</code> because this format specifier has side effects, and those side effects need to be sequenced.</p>\n\n<p>Anyway, there is a SP at the beginning of the execution of <code>printf()</code> and after the evaluation of all the arguments. Those format-specifier SP are all <em>after</em> this one so they don't affect your problem.</p>\n\n<p>In your example, the uses of <code>i</code> are all in function arguments, and none of them are separated with sequence points. Since you modify the value (twice) and use the value without intervening sequence points, your code is UB.</p>\n\n<p>What the rule about the SP in <code>printf</code> means is that this code is well formed:</p>\n\n<pre><code>int x;\nprintf(\"%d %n %d %n\\n\", 1, &amp;x, 2, &amp;x);\n</code></pre>\n\n<p>even though the value of <code>x</code> is modified twice.</p>\n\n<p>But this code is UB:</p>\n\n<pre><code>int x = 1;\nprintf(\"%d %d\\n\", x, ++x);\n</code></pre>\n\n<p>NOTE: Remember that <code>%n</code> means that the number of characters written so far is copied to the integer pointed by the associated argument.</p>\n"}, {"comments": [{"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "edited": false, "score": 0, "creation_date": 1452098628, "post_id": 34637873, "comment_id": 57021651, "body": "I&#39;ve edited the question to provide clarification: &quot;I&#39;m not asking about why my middle term is 0. I&#39;m asking why the other two terms are both 12.&quot;"}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "reply_to_user": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "edited": false, "score": 0, "creation_date": 1452098817, "post_id": 34637873, "comment_id": 57021770, "body": "@JonathanMee -  Because of the rules on order of evaluation, the middle argument could be evaluated first, resulting in UB for at least itself ( <code>your_function()</code> ), and possibly having a downstream effect on subsequent results.  So could it not be possible that UB <i>bleeds through</i> to the entire function:  <code>printf(&quot;%d - %d - %d\\n&quot;, i, your_function(++i, ++i), i);</code> ?"}, {"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "edited": false, "score": 0, "creation_date": 1452100182, "post_id": 34637873, "comment_id": 57022735, "body": "Your statement &quot;literally anything can happen&quot; is false. There <i>is</i> a sequence point on the return of a function, so after <code>your_function</code> is called, <code>i</code> <i>will</i> be 12. This question was about whether the statement on <a href=\"http://en.wikipedia.org\" rel=\"nofollow noreferrer\">en.wikipedia.org</a> meant that I could depend upon <code>printf</code> arguments being called in order."}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "reply_to_user": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "edited": false, "score": 0, "creation_date": 1452101221, "post_id": 34637873, "comment_id": 57023443, "body": "@JonathanMee - That statement is a tongue in cheek reference to the link it follows, where nasal demons are used to describe UB.  I will change it if it is a problem for you however.  <b><i>However</i></b>, I do not agree with your statement: <i>so after your_function is called, i will be 12</i>.   That function is the <i>cause</i> of UB.  There is no guarantee what <code>i</code> will be.  <i><a href=\"http://stackoverflow.com/a/34638527/645128\">Elias</a></i> explains it well in his answer. (read toward the bottom)"}, {"owner": {"reputation": 5668, "user_id": 4083309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6b4ef5a2e912153069b82607789a717?s=128&d=identicon&r=PG&f=1", "display_name": "Arne Vogel", "link": "https://stackoverflow.com/users/4083309/arne-vogel"}, "edited": false, "score": 0, "creation_date": 1452106980, "post_id": 34637873, "comment_id": 57026951, "body": "<code>your_function</code> is not the cause of UB, even just <code>printf(&quot;%d%d&quot;, i, ++i);</code> exhibits undefined behavior as per &#167;1.9/15 (N3690). The cause of the UB is having two side-effects or a side effect and a value computation that are unsequenced wrt one another on a scalar object. -- I should clarify that in my example, while the value computations of function arguments are merely indeterminately sequenced, the side effect of <code>++i</code> is unsequenced wrt to the value computation of <code>i</code>."}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "reply_to_user": {"reputation": 5668, "user_id": 4083309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6b4ef5a2e912153069b82607789a717?s=128&d=identicon&r=PG&f=1", "display_name": "Arne Vogel", "link": "https://stackoverflow.com/users/4083309/arne-vogel"}, "edited": false, "score": 0, "creation_date": 1452113053, "post_id": 34637873, "comment_id": 57030735, "body": "@ArneVogel - No, agreed, The function <code>your_function</code> itself is not the <i>cause</i> of UB.  It is the arguments (two instances of same object) with increments that cause it.  From C99: <b><i>6.5 Expressions</i></b> <i>2.  If a side effect on a scalar object is unsequenced relative to either a different side effect on the same scalar object or a value computation using the value of the same scalar object, the behavior is undefined....</i>.  The increments to <code>i</code> are side effects, and because they are being applied to the same scalar object, <code>i</code>, UB is invoked."}], "tags": [], "owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "is_accepted": false, "score": 4, "last_activity_date": 1452101099, "last_edit_date": 1495540354, "creation_date": 1452097558, "answer_id": 34637873, "question_id": 34637712, "link": "https://stackoverflow.com/questions/34637712/sequence-points-between-printf-function-args-does-the-sequence-point-between-co/34637873#34637873", "title": "Sequence Points between printf function args; does the sequence point between conversions matter?", "body": "<p>Arriving at a clear answer to this question is strongly effected (even prevented) by the C rules on order of evaluation and UB.  </p>\n\n<p>The specified rules on order of evaluation are stated here:</p>\n\n<blockquote>\n  <p>C99 section 6.7.9, p23: 23 The evaluations of the initialization list\n  expressions are indeterminately sequenced with respect to one another\n  and thus the order in which any side effects occur is unspecified.</p>\n</blockquote>\n\n<p>And, <em><a href=\"https://stackoverflow.com/q/4176328/645128\">this function call will exhibit undefined behavior</a></em>:</p>\n\n<pre><code>your_function(++i, ++i)\n</code></pre>\n\n<p>Because of UB, coupled with the rules on order of evaluation, accurate predictions on the expected outcomes for the following:</p>\n\n<pre><code>printf(\"%d - %d - %d\\n\", i, your_function(++i, ++i), i);\n</code></pre>\n\n<p>are impossible. </p>\n\n<p><strong><em>Edit</em></strong><br>\n<em>...I'm not asking about why my middle term is 0. I'm asking why the other two terms are both 12.</em></p>\n\n<p>There is no guarantee which of the three arguments of the above function are called first. (because of the C's rules on order of evaluation).  And if the middle function gets evaluated first, then <em>at that point</em> you have invoked <em><a href=\"http://www.catb.org/jargon/html/N/nasal-demons.html\" rel=\"nofollow noreferrer\">Undefined Behavior</a></em> .  Who can really say <em>why</em> the other two terms are 12?.  Because what happens to <code>i</code> when the second argument is evaluated is anyone's guess.</p>\n"}, {"tags": [], "owner": {"reputation": 67504, "user_id": 1230836, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/38PFC.jpg?s=128&g=1", "display_name": "Elias Van Ootegem", "link": "https://stackoverflow.com/users/1230836/elias-van-ootegem"}, "is_accepted": true, "score": 7, "last_activity_date": 1452165242, "last_edit_date": 1592644375, "creation_date": 1452099510, "answer_id": 34638527, "question_id": 34637712, "link": "https://stackoverflow.com/questions/34637712/sequence-points-between-printf-function-args-does-the-sequence-point-between-co/34638527#34638527", "title": "Sequence Points between printf function args; does the sequence point between conversions matter?", "body": "<p>Because this question was asked because of a comment-based discussion <a href=\"https://stackoverflow.com/questions/34614308/is-there-a-way-to-get-warned-about-misbehaving-designated-initializers#comment57018987_34614308\">here</a>, I'll provide some context:</p>\n<blockquote>\n<p><em>first comment</em>: The order of operations is <strong>not</strong> guaranteed to be the order in which you pass arguments to the function. Some people (wrongly) assume that the arguments will be evaluated right to left, but according to the standard, the behaviour is undefined.</p>\n</blockquote>\n<p>The OP accepts and understands this. No point in repeating the fact that <code>your_function(++i, ++i)</code> is UB.</p>\n<blockquote>\n<p><em>In response to that comment</em>: Thanks to your comment I see that <code>printf</code> may be evaluated in any order, but I understood that to be because <code>printf</code> arguments are part of a <code>va_list</code>. Are you saying that the arguments to any function are executed in an arbitrary order?</p>\n</blockquote>\n<p>OP asking for clarification, so I elaborated a bit:</p>\n<blockquote>\n<p><em>Second comment</em>: Yes, that's exactly what I'm saying. even calling <code>int your_function(int a, int b) { return a - b; }</code> does not guarantee that the expressions you pass will be evaluated left to right. There's no sequence point (a point at which all side effects of previous evaluations are performed). Take <a href=\"https://eval.in/497763\" rel=\"nofollow noreferrer\">this example</a>. The nested call is a sequence point, so the outer call passes <code>i+1</code> (13), and the return value of the inner call (undefined, in this case -1 because <code>i++</code>, <code>i</code> evaluates to 12, 13 apparently), <strong>but there's no guarantee that this will always be the case</strong></p>\n</blockquote>\n<p>That made it pretty clear that these kinds of constructs trigger UB for all functions.</p>\n<hr />\n<h1>Wikipedia confusion</h1>\n<p>OP Quotes this:</p>\n<blockquote>\n<p>After the action associated with input/output conversion format specifier. For example, in the expression printf(&quot;foo %n %d&quot;, &amp;a, 42), there is a sequence point after the %n is evaluated before printing 42.</p>\n</blockquote>\n<p>Then applies it to his snippet (<code>prinf(&quot;%d - %d - %d\\n&quot;, i, your_function(++i, ++i), i);</code>) expeciting the format specifiers to serve as sequence points.<br>\nWhat is being referred to by saying <em>&quot;input/output conversion format specifier&quot;</em> is the <code>%n</code> specifier. The corresponding argument <em>must</em> be a pointer to an unsigned integer, and it will be assigned the number of characters printed thus far. Naturally, <code>%n</code> must be evaluated before the rest of the arguments are printed. However, using the pointer passed for <code>%n</code> in other arguments is still dangerous: it's <em><strong>not</strong></em> UB (well, it isn't, but it can be):</p>\n<pre><code>printf(&quot;Foo %n %*s\\n&quot;, &amp;a, 100-a, &quot;Bar&quot;);//DANGER!!\n</code></pre>\n<p>There is a sequence point <em>before</em> the function is called, so the expression <code>100-a</code> <em>will</em> be evaluated before <code>%n</code> has set <code>&amp;a</code> to the correct value. If <code>a</code> is uninitialized, then <code>100-a</code> is UB. If <code>a</code> is initialized to 0, for example, the result of the expression <em>will</em> be 100. On the whole, though, this kind of code is pretty much asking for trouble. Treat it as <em>very bad practice</em>, or worse...<br>\nJust look at the output generated by either one of these statements:</p>\n<pre><code>unsigned int a = 90;\nprintf(&quot;%u %n %*s\\n&quot;,a,  &amp;a, 10, &quot;Bar&quot;);//90         Bar\nprintf(&quot;%u\\n&quot;, a);//3\nprintf(&quot;Foo %u %n %*s\\n&quot;,a, &amp;a, 10-a, &quot;Bar&quot;);//Foo 3      Bar &lt; padding used: 10 - 3, not 10 - 6 \nprintf(&quot;%u\\n&quot;, a);//6\n</code></pre>\n<p>In as you can see, <code>n</code> gets reassigned <em>inside</em> of <code>printf</code>, so you can't use its new value in the argument list (because there's a sequence point). If you expect <code>n</code> to be reassigned &quot;in-place&quot; you're essentially expecting C to jump out of the function call, evaluate other arguments, and jump back into the call. That's just not possible. If you were to change <code>unsigned int a = 90;</code> to <code>unsigned int a;</code>, then the behaviour is undefined.</p>\n<hr />\n<h1>Concerning the <code>12</code>'s</h1>\n<p>Now because the OP read up on sequence points, he correctly notices that this statement:</p>\n<pre><code>printf(&quot;%d - %d - %d\\n&quot;, i, your_function(++i, ++i), i);\n</code></pre>\n<p>Is slightly different: <code>your_function(++i, ++i)</code> <em><strong>is</strong></em> a sequence point, and <em><strong>guarantees</strong></em> that <code>i</code> will be incremented twice. This function call is a sequence point because:</p>\n<blockquote>\n<p>Before a function is entered in a function call. The order in which the arguments are evaluated is not specified, but this sequence point means that all of their side effects are complete before the function is entered</p>\n</blockquote>\n<p>That means that, before <code>printf</code> is called, <code>your_function</code> <strong>has</strong> to be called (because its return value is one of the arguments for the <code>printf</code> call), and <code>i</code> will be incremented twice.<br>\nThis <em><strong>could</strong></em> explain the output being <em>&quot;12 - 0 - 12&quot;</em>, but is it guaranteed to be the output?</p>\n<h1>No</h1>\n<p>Technically, although most compilers will evaluate the <code>your_function(++i, ++i);</code> call first, the standard would allow a compiler to evaluate the arguments passed to <code>sprintf</code> left to right (the order isn't specified after all). So this would be an equally valid result:</p>\n<pre><code>10 - 0 - 12\n//or even\n12 - 0 - 10\n//and\n10 - 0 - 10\n//technically, even this would be valid\n12 - 0 - 11\n</code></pre>\n<p>Although the latter output is extremely unlikely (it'd be very inefficient)</p>\n"}], "owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 798, "favorite_count": 2, "accepted_answer_id": 34638527, "answer_count": 3, "score": 11, "last_activity_date": 1572682791, "creation_date": 1452096988, "last_edit_date": 1572682791, "question_id": 34637712, "link": "https://stackoverflow.com/questions/34637712/sequence-points-between-printf-function-args-does-the-sequence-point-between-co", "title": "Sequence Points between printf function args; does the sequence point between conversions matter?", "body": "<p>I read <a href=\"https://en.wikipedia.org/wiki/Sequence_point#Sequence_points_in_C_and_C.2B.2B\">here</a> that there is a sequence point:</p>\n\n<blockquote>\n  <p>After the action associated with input/output conversion format specifier. For example, in the expression <code>printf(\"foo %n %d\", &amp;a, 42)</code>, there is a sequence point after the <code>%n</code> is evaluated before printing <code>42</code>.</p>\n</blockquote>\n\n<p>However, when I run <a href=\"http://ideone.com/TO5iuI\">this code</a>:</p>\n\n<pre><code>int your_function(int a, int b) {\n    return a - b;\n}\n\nint main(void) {\n    int i = 10;\n\n    printf(\"%d - %d - %d\\n\", i, your_function(++i, ++i), i);\n}\n</code></pre>\n\n<p>Instead of what I expect I get:</p>\n\n<blockquote>\n  <p>12 - 0 - 12</p>\n</blockquote>\n\n<p>Meaning that there was <em>not</em> a sequence point created for the conversion format specifier. Is <a href=\"http://en.wikipedia.org\">http://en.wikipedia.org</a> wrong, or have I just misunderstood something, or is gcc non-compliant in this case (incidentally Visual Studio 2015 yields the same unexpected result)?</p>\n\n<p><strong>EDIT:</strong></p>\n\n<p>I understand that the order the arguments to <code>your_function</code> are evaluated and assigned to the parameters is undefined. I'm not asking about why my middle term is 0. I'm asking why the other two terms are both 12.</p>\n"}, {"tags": ["c++", "templates", "pointers", "function-pointers"], "answers": [{"comments": [{"owner": {"reputation": 445, "user_id": 2896993, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/BWY7T.jpg?s=128&g=1", "display_name": "kar", "link": "https://stackoverflow.com/users/2896993/kar"}, "edited": false, "score": 0, "creation_date": 1452194808, "post_id": 34637877, "comment_id": 57072468, "body": "@R Sahu: should I still need to use funcptr1 to call ABS and funcptr2 to call ADD?? Is there a way to implement the same using variadic template?"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 445, "user_id": 2896993, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/BWY7T.jpg?s=128&g=1", "display_name": "kar", "link": "https://stackoverflow.com/users/2896993/kar"}, "edited": false, "score": 0, "creation_date": 1452195448, "post_id": 34637877, "comment_id": 57072820, "body": "@user2896993, you can probably do it but it won&#39;t be straight forward. I am curious. Is there a real problem you are trying solve, or this an intellectual curiosity?"}, {"owner": {"reputation": 445, "user_id": 2896993, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/BWY7T.jpg?s=128&g=1", "display_name": "kar", "link": "https://stackoverflow.com/users/2896993/kar"}, "edited": false, "score": 0, "creation_date": 1452264801, "post_id": 34637877, "comment_id": 57104899, "body": "@R Sahu: I need a solution for this. There are about 700+ such small template functions with different datatypes and argument length. My code is getting lengthier and time consuming during runtime, if I use if else or switch case to identify which function pointer(function) I need to call."}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": true, "score": 2, "last_activity_date": 1452097575, "creation_date": 1452097575, "answer_id": 34637877, "question_id": 34637518, "link": "https://stackoverflow.com/questions/34637518/template-function-pointer-overloading/34637877#34637877", "title": "template function pointer overloading", "body": "<blockquote>\n  <p>Is there a way to use a single function pointer?</p>\n</blockquote>\n\n<p>There is probably a way of doing that using <code>std::function</code>. However, you can get the simplicity you are looking for by providing a few constructors.</p>\n\n<pre><code>template &lt;typename T&gt;\nstruct test {\n\n   using function1_type = T(*)(T);\n   using function2_type = T(*)(T, T);\n\n   test(std::string fname, function1_type f1) : funcName(fname), funcptr1(f1), funcptr2(nullptr) {}\n   test(std::string fname, function2_type f2) : funcName(fname), funcptr1(nullptr), funcptr2(f2) {}\n   test(std::string fname, function1_type f1, function2_type f2) : funcName(fname), funcptr1(f1), funcptr2(f2) {}\n\n    std::string funcName;\n    function1_type funcptr1;\n    function2_type funcptr2;\n};\n</code></pre>\n\n<p>Now, you will be able to use:</p>\n\n<pre><code>test&lt;int&gt; ltest[] = { {\"ABS\", ABS}, {\"ADD\", ADD}, {\"MIXED\", ABS, ADD} };\n</code></pre>\n\n<p>If you want to disallow use of <code>{\"MIXED\", ABS, ADD}</code> to construct an object, you can remove the last constructor.</p>\n\n<p>BTW, in order to use the above, you'll need to modify <code>ABS</code> and <code>ADD</code> so that the argument types don't have <code>const</code> or <code>const&amp;</code>. They need to be:</p>\n\n<pre><code>template&lt;typename T&gt; T ABS(T DiIN){\n    return (0 &gt; DiIN) ? T(DiIN * (-1)) : T((DiIN));\n}\n\ntemplate&lt;typename T&gt; T ADD(T DiIN1, T DiIN2) {\n    return DiIN1 + DiIN2;\n}\n</code></pre>\n\n<blockquote>\n  <p>Is there a way to  get rid of the initialization <code>test&lt;int&gt;</code> and <code>use test&lt;T&gt;</code> so that I can use any variable type during runtime?</p>\n</blockquote>\n\n<p>No, you cannot do that. The types used to instantiate a template <em>must</em> be known at compile time.</p>\n"}], "owner": {"reputation": 445, "user_id": 2896993, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/BWY7T.jpg?s=128&g=1", "display_name": "kar", "link": "https://stackoverflow.com/users/2896993/kar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "accepted_answer_id": 34637877, "answer_count": 1, "score": 1, "last_activity_date": 1452097575, "creation_date": 1452096388, "question_id": 34637518, "link": "https://stackoverflow.com/questions/34637518/template-function-pointer-overloading", "title": "template function pointer overloading", "body": "<p>I have a template function like </p>\n\n<pre><code>template&lt;typename T&gt; T ABS(const T&amp; DiIN){\n    return (0 &gt; DiIN) ? T(DiIN * (-1)) : T((DiIN));\n}\n\ntemplate&lt;typename T&gt; T ADD(const T DiIN1, const T DiIN2) {\n    return DiIN1 + DiIN2;\n}\n</code></pre>\n\n<p>I need to call the function ABS and/or ADD using a single function pointer. \nCurrently I use two different function pointer names, but found it is getting complicated when I include more template function with different argument length. </p>\n\n<p>my current implementation is like </p>\n\n<pre><code>template&lt;typename T&gt;\nstruct test {\n    std::string funcName;\n    T(funcptr1 *)(T);\n    T(funcptr2 *)(T, T);\n};\n\ntest&lt;int&gt; ltest[] = { {\"ABS\", ABS, NULL}, {\"ADD\", NULL, ADD} };\n</code></pre>\n\n<p>Is there a way to \n1) Use a single function pointer\n2) get rid of the initialization <code>test&lt;int&gt;</code> and use <code>test&lt;T&gt;</code> so that I can use any variable type during runtime?</p>\n\n<p>I am looking for a simple initialization like</p>\n\n<pre><code>template&lt;&gt; //template&lt;typename T&gt;\ntest&lt;T&gt; ltest[] = = { {\"ABS\", ABS}, {\"ADD\", ADD}, ..... };\n</code></pre>\n"}, {"tags": ["c++", "c-preprocessor"], "comments": [{"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 1, "creation_date": 1452096129, "post_id": 34637283, "comment_id": 57019995, "body": "You should read a documentation describing the <a href=\"https://en.wikipedia.org/wiki/C_preprocessor\" rel=\"nofollow noreferrer\">C++ preprocessor</a>, perhaps the C++11 or C99 standard. It does not work like you are dreaming."}, {"owner": {"reputation": 1735, "user_id": 1707083, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/08d10a00a81504b18d3d3723a4b7c252?s=128&d=identicon&r=PG", "display_name": "Samer", "link": "https://stackoverflow.com/users/1707083/samer"}, "edited": false, "score": 0, "creation_date": 1452096141, "post_id": 34637283, "comment_id": 57020001, "body": "I have not idea what you are trying to achieve here..."}], "answers": [{"comments": [{"owner": {"reputation": 9690, "user_id": 1707560, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/8VK4M.jpg?s=128&g=1", "display_name": "imreal", "link": "https://stackoverflow.com/users/1707560/imreal"}, "edited": false, "score": 2, "creation_date": 1452097870, "post_id": 34637503, "comment_id": 57021165, "body": "Relevant C++ Standard quote: 16.3.4 Rescanning and further replacement"}, {"owner": {"reputation": 126541, "user_id": 153285, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/1UiET.jpg?s=128&g=1", "display_name": "Potatoswatter", "link": "https://stackoverflow.com/users/153285/potatoswatter"}, "edited": false, "score": 0, "creation_date": 1452099097, "post_id": 34637503, "comment_id": 57021971, "body": "As for &quot;depth&quot; and &quot;width,&quot; the preprocessor does both. Moving the open paren from <code>A</code> to <code>B</code>, and given <code>#define I(Q) Q</code>, and using <code>I(A B C)</code>, it <a href=\"http://coliru.stacked-crooked.com/a/ffc76f2b99c9c45a\" rel=\"nofollow noreferrer\">works</a>."}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": true, "score": 7, "last_activity_date": 1452098030, "last_edit_date": 1452098030, "creation_date": 1452096351, "answer_id": 34637503, "question_id": 34637283, "link": "https://stackoverflow.com/questions/34637283/using-preprocessor-macros-to-compose-another-macro-call/34637503#34637503", "title": "Using preprocessor macros to compose another macro call", "body": "<blockquote>\n  <p>Why can't I compose a macro call from two or more macro expansions, doesn't preprocessor expand them recursively?</p>\n</blockquote>\n\n<p>You can compose macros. The pre-processor does expand macros recursively. </p>\n\n<p>However, it doesn't expand the macros width first. It expands them depth first.</p>\n\n<p>You are running into a problem because you want the pre-processor to expand the macros width first.</p>\n\n<p>You can read more about recursive macro expansion in <strong>16.3.4 Rescanning and further replacement</strong> of the C++11 standard.</p>\n"}], "owner": {"reputation": 691, "user_id": 1566634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/615a062578e0ee70a6fa434594f263ee?s=128&d=identicon&r=PG", "display_name": "Levi Haskell", "link": "https://stackoverflow.com/users/1566634/levi-haskell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1995, "favorite_count": 0, "accepted_answer_id": 34637503, "answer_count": 1, "score": 6, "last_activity_date": 1452098030, "creation_date": 1452095651, "question_id": 34637283, "link": "https://stackoverflow.com/questions/34637283/using-preprocessor-macros-to-compose-another-macro-call", "title": "Using preprocessor macros to compose another macro call", "body": "<p>Suppose I have a C++ preprocessor macro defined as follows:</p>\n\n<pre><code>#define X(s) std::cout &lt;&lt; #s\n</code></pre>\n\n<p>if I use it directly:</p>\n\n<pre><code>int main() {\n    X( hello );\n}\n</code></pre>\n\n<p>It works as expected and \"hello\" is printed on the console.</p>\n\n<p>If I define another macro that calls it:</p>\n\n<pre><code>#define Y X( hello )\n#define X(s) std::cout &lt;&lt; #s\n\nint main() {\n    Y;\n}\n</code></pre>\n\n<p>It still works.</p>\n\n<p>However if I try to compose the call to <code>X</code> from two or more different macros, I get a whole bunch of errors:</p>\n\n<pre><code>#define A X(\n#define B hello\n#define C )\n\n#define X(s) std::cout &lt;&lt; #s &lt;&lt; '\\n'\n\n\nint main()\n{\n    A B C;\n}\n</code></pre>\n\n<p>See output at: <a href=\"http://cpp.sh/5ws5k\" rel=\"noreferrer\">http://cpp.sh/5ws5k</a></p>\n\n<p>Why can't I compose a macro call from two or more macro expansions, doesn't preprocessor expand them recursively?</p>\n"}, {"tags": ["c++", "windows", "file"], "comments": [{"owner": {"reputation": 168, "user_id": 80833, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/129f46d833e6893e59125cf5349706b1?s=128&d=identicon&r=PG", "display_name": "dunkyp", "link": "https://stackoverflow.com/users/80833/dunkyp"}, "edited": false, "score": 0, "creation_date": 1452095693, "post_id": 34637150, "comment_id": 57019698, "body": "Do you know how to list all folders in d:\\files?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1452095775, "post_id": 34637150, "comment_id": 57019752, "body": "What happens when two directories have the same file?"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 1, "creation_date": 1452095785, "post_id": 34637150, "comment_id": 57019754, "body": "There is currently no C++ way to iterate over files in a given directory (which is, of course, a shame and terrible legacy). You&#39;d have to use third-party lib like boost."}, {"owner": {"reputation": 533, "user_id": 3957430, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0f79192c478198ff5571a9a65fb52097?s=128&d=identicon&r=PG&f=1", "display_name": "Redwanul Haque Sourave", "link": "https://stackoverflow.com/users/3957430/redwanul-haque-sourave"}, "edited": false, "score": 0, "creation_date": 1452096265, "post_id": 34637150, "comment_id": 57020083, "body": "Let&#39;s assume whomever made the files folder made sure that there was no file having the same names in different folders."}, {"owner": {"reputation": 533, "user_id": 3957430, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0f79192c478198ff5571a9a65fb52097?s=128&d=identicon&r=PG&f=1", "display_name": "Redwanul Haque Sourave", "link": "https://stackoverflow.com/users/3957430/redwanul-haque-sourave"}, "reply_to_user": {"reputation": 168, "user_id": 80833, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/129f46d833e6893e59125cf5349706b1?s=128&d=identicon&r=PG", "display_name": "dunkyp", "link": "https://stackoverflow.com/users/80833/dunkyp"}, "edited": false, "score": 0, "creation_date": 1452096321, "post_id": 34637150, "comment_id": 57020127, "body": "@dunkyp No. I don&#39;t know."}, {"owner": {"reputation": 168, "user_id": 80833, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/129f46d833e6893e59125cf5349706b1?s=128&d=identicon&r=PG", "display_name": "dunkyp", "link": "https://stackoverflow.com/users/80833/dunkyp"}, "edited": false, "score": 0, "creation_date": 1452096402, "post_id": 34637150, "comment_id": 57020171, "body": "Try having a look at <a href=\"http://www.boost.org/doc/libs/1_59_0/libs/filesystem/doc/index.htm\" rel=\"nofollow noreferrer\">boost.org/doc/libs/1_59_0/libs/filesystem/doc/index.htm</a>"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 4, "creation_date": 1452096540, "post_id": 34637150, "comment_id": 57020252, "body": "I highly reccommed using <code>&#47;</code> as your directory separator.  The &#39;\\&#39; is an escape character and some are control characters such as <code>\\t</code>, <code>\\f</code>, and <code>\\b</code> (tab, formfeed and backspace)."}, {"owner": {"reputation": 533, "user_id": 3957430, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0f79192c478198ff5571a9a65fb52097?s=128&d=identicon&r=PG&f=1", "display_name": "Redwanul Haque Sourave", "link": "https://stackoverflow.com/users/3957430/redwanul-haque-sourave"}, "edited": false, "score": 0, "creation_date": 1452097000, "post_id": 34637150, "comment_id": 57020565, "body": "The random folder is the only folder in that directory"}, {"owner": {"reputation": 10545, "user_id": 238902, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/BRFti.png?s=128&g=1", "display_name": "Default", "link": "https://stackoverflow.com/users/238902/default"}, "edited": false, "score": 0, "creation_date": 1452097937, "post_id": 34637150, "comment_id": 57021208, "body": "you can probably use the solutions from here to solve your problem: <a href=\"http://stackoverflow.com/questions/67273/how-do-you-iterate-through-every-file-directory-recursively-in-standard-c\" title=\"how do you iterate through every file directory recursively in standard c\">stackoverflow.com/questions/67273/&hellip;</a>"}, {"owner": {"reputation": 10545, "user_id": 238902, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/BRFti.png?s=128&g=1", "display_name": "Default", "link": "https://stackoverflow.com/users/238902/default"}, "edited": false, "score": 0, "creation_date": 1452098226, "post_id": 34637150, "comment_id": 57021396, "body": "or from here <a href=\"http://stackoverflow.com/questions/4895317/how-can-i-automatically-open-the-first-file-in-a-folder-using-c?rq=1\" title=\"how can i automatically open the first file in a folder using c\">stackoverflow.com/questions/4895317/&hellip;</a>"}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1452098494, "post_id": 34637150, "comment_id": 57021560, "body": "Some compilers (like GCC 5) have experimental support for the <code>&lt;filesystem&gt;</code> TS (Technical Specification): <a href=\"http://en.cppreference.com/w/cpp/experimental/fs\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/experimental/fs</a>"}, {"owner": {"reputation": 27440, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1452104357, "post_id": 34637150, "comment_id": 57025324, "body": "POSIX <a href=\"http://pubs.opengroup.org/onlinepubs/009695399/functions/ftw.html\" rel=\"nofollow noreferrer\">provides a <b>f</b>ile <b>t</b>ree <b>w</b>alk function</a>:  <code>ftw()</code>.  You can use it to iterate over all entries in or under a specific directory, thus looking for your file.  You may or may not have access to it via something like <a href=\"https://www.cygwin.com/\" rel=\"nofollow noreferrer\">Cygwin</a>."}, {"owner": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1452123561, "post_id": 34637150, "comment_id": 57035684, "body": "@ThomasMatthews: since this is Windows, I highly recommend <i>against</i> using forward slash as a directory separator.  Windows accepts it in certain contexts, but not always."}], "answers": [{"comments": [{"owner": {"reputation": 533, "user_id": 3957430, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0f79192c478198ff5571a9a65fb52097?s=128&d=identicon&r=PG&f=1", "display_name": "Redwanul Haque Sourave", "link": "https://stackoverflow.com/users/3957430/redwanul-haque-sourave"}, "edited": false, "score": 0, "creation_date": 1452137234, "post_id": 34637814, "comment_id": 57039364, "body": "can i store the file in some other directory? in case that folder is read-only"}, {"owner": {"reputation": 22818, "user_id": 509868, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/83450238b4ee0eddbf54d7ce5a3a64e4?s=128&d=identicon&r=PG", "display_name": "anatolyg", "link": "https://stackoverflow.com/users/509868/anatolyg"}, "reply_to_user": {"reputation": 533, "user_id": 3957430, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0f79192c478198ff5571a9a65fb52097?s=128&d=identicon&r=PG&f=1", "display_name": "Redwanul Haque Sourave", "link": "https://stackoverflow.com/users/3957430/redwanul-haque-sourave"}, "edited": false, "score": 0, "creation_date": 1452206202, "post_id": 34637814, "comment_id": 57078698, "body": "Yes. Also, if you use <code>_popen</code>, there is no need for a temp-file."}], "tags": [], "owner": {"reputation": 22818, "user_id": 509868, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/83450238b4ee0eddbf54d7ce5a3a64e4?s=128&d=identicon&r=PG", "display_name": "anatolyg", "link": "https://stackoverflow.com/users/509868/anatolyg"}, "is_accepted": false, "score": -3, "last_activity_date": 1452097350, "creation_date": 1452097350, "answer_id": 34637814, "question_id": 34637150, "link": "https://stackoverflow.com/questions/34637150/opening-a-file-in-random-named-folder-using-c-c/34637814#34637814", "title": "opening a file in random named folder using c/c++", "body": "<p>The idea is: list the directories under <code>d:\\files</code> and try to open \nthe file in each directory.</p>\n\n<p>There isn't (yet) a standard C++ way of getting all the existing files/directories. A crude but easy way of doing this would be</p>\n\n<pre><code>system(\"dir d:\\\\files /b /ad &gt; tmpfile\");\n</code></pre>\n\n<p>This lists all directories (<code>/ad</code>), redirected to a temporary file. Then open the file:</p>\n\n<pre><code>std::ifstream list(\"tmpfile\");\n</code></pre>\n\n<p>And read it:</p>\n\n<pre><code>std::string dirname;\nstd::string filename;\nwhile (std::getline(list, dirname))\n{\n    filename = \"d:\\\\files\\\\\" + dirname + \"\\\\data.txt\";\n    if ( ... file exists ... )\n        break;\n}\n</code></pre>\n\n<p>I call this method crude because it has problems that are hard/impossible to fix:</p>\n\n<ul>\n<li>It overwrites a potentially useful file</li>\n<li>It doesn't work if current directory is read-only</li>\n<li>It will only work in Windows</li>\n</ul>\n\n<p>It might be possible to use <a href=\"https://msdn.microsoft.com/en-us/library/96ayss4b.aspx\" rel=\"nofollow\"><code>_popen</code></a> and <code>fgets</code> instead of redirecting to file.</p>\n"}, {"tags": [], "owner": {"reputation": 10487, "user_id": 5708620, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b0f8c70394b748ed7ec1a3a11a749b1?s=128&d=identicon&r=PG&f=1", "display_name": "Danny_ds", "link": "https://stackoverflow.com/users/5708620/danny-ds"}, "is_accepted": true, "score": 2, "last_activity_date": 1452101157, "last_edit_date": 1452101157, "creation_date": 1452100502, "answer_id": 34638835, "question_id": 34637150, "link": "https://stackoverflow.com/questions/34637150/opening-a-file-in-random-named-folder-using-c-c/34638835#34638835", "title": "opening a file in random named folder using c/c++", "body": "<p>Since this is tagged <code>windows</code>, you might as well use the Windows API functions:</p>\n\n<ul>\n<li><a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa364418.aspx\" rel=\"nofollow\">FindFirstFile()</a></li>\n<li><a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa364428.aspx\" rel=\"nofollow\">FindNextFile()</a></li>\n</ul>\n\n<p>to enumerate and loop through all the files in a given directory.</p>\n\n<p>To check for a directory, look at <code>dwFileAttributes</code> contained in the <code>WIN32_FIND_DATA</code> structure (filled by the calls to <code>Find...File()</code>). But make sure to skip <code>.</code> and <code>..</code> directories. If needed, this can be done recursively.</p>\n\n<p>You can check the links for some examples, or see <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa365200.aspx\" rel=\"nofollow\">Listing the Files in a Directory</a>.</p>\n\n<p>In case you are using MFC, you can use <a href=\"https://msdn.microsoft.com/en-us/library/f33e1618.aspx\" rel=\"nofollow\">CFileFind</a> (which is a wrapper around the API functions):</p>\n\n<pre><code>CFileFind finder;\nBOOL bWorking = finder.FindFile(_T(\"*.*\"));\nwhile (bWorking)\n{\n   bWorking = finder.FindNextFile();\n   TRACE(_T(\"%s\\n\"), (LPCTSTR)finder.GetFileName());\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "is_accepted": false, "score": 2, "last_activity_date": 1452140749, "last_edit_date": 1452140749, "creation_date": 1452124814, "answer_id": 34645145, "question_id": 34637150, "link": "https://stackoverflow.com/questions/34637150/opening-a-file-in-random-named-folder-using-c-c/34645145#34645145", "title": "opening a file in random named folder using c/c++", "body": "<p>Just for fun, I implemented this using the new, experimental <code>&lt;filesystem&gt;</code> <a href=\"http://en.cppreference.com/w/cpp/experimental/fs\" rel=\"nofollow\">FS Technical Specification</a> supported by <code>GCC 5</code>.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;experimental/filesystem&gt;\n\n// for readability\nnamespace fs = std::experimental::filesystem;\n\nint main(int, char* argv[])\n{\n    if(!argv[1])\n    {\n        std::cerr &lt;&lt; \"require 2 parameters, search directory and filename\\n\";\n        return EXIT_FAILURE;\n    }\n\n    fs::path search_dir = argv[1];\n\n    if(!fs::is_directory(search_dir))\n    {\n        std::cerr &lt;&lt; \"First parameter must be a directory: \" &lt;&lt; search_dir &lt;&lt; '\\n';\n        return EXIT_FAILURE;\n    }\n\n    if(!argv[2])\n    {\n        std::cerr &lt;&lt; \"Expected filename to search for\\n\";\n        return EXIT_FAILURE;\n    }\n\n    // file to search for\n    fs::path file_name = argv[2];\n\n    const fs::directory_iterator dir_end; // directory end sentinel\n\n    // used to iterate through each subdirectory of search_dir\n    fs::directory_iterator dir_iter(search_dir);\n\n    for(; dir_iter != dir_end; ++dir_iter)\n    {\n        // skip non directories\n        if(!fs::is_directory(dir_iter-&gt;path()))\n            continue;\n\n        // check directory for file\n\n        // iterate through files in this subdirectory dir_iter-&gt;path()\n        auto file_iter = fs::directory_iterator(dir_iter-&gt;path());\n\n        for(; file_iter != dir_end; ++file_iter)\n        {\n            // ignore directories and wrong filenames\n            if(fs::is_directory(file_iter-&gt;path())\n            || file_iter-&gt;path().filename() != file_name)\n                continue;\n\n            // Ok we found it (the first one)\n            std::cout &lt;&lt; \"path: \" &lt;&lt; file_iter-&gt;path().string() &lt;&lt; '\\n';\n            return EXIT_SUCCESS;\n        }\n    }\n\n    // Not found\n    std::cout &lt;&lt; file_name &lt;&lt; \" was not found in \" &lt;&lt; search_dir.string() &lt;&lt; '\\n';\n\n    return EXIT_FAILURE;\n}\n</code></pre>\n"}], "owner": {"reputation": 533, "user_id": 3957430, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0f79192c478198ff5571a9a65fb52097?s=128&d=identicon&r=PG&f=1", "display_name": "Redwanul Haque Sourave", "link": "https://stackoverflow.com/users/3957430/redwanul-haque-sourave"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1373, "favorite_count": 1, "accepted_answer_id": 34638835, "answer_count": 3, "score": 3, "last_activity_date": 1452140749, "creation_date": 1452095265, "last_edit_date": 1452124931, "question_id": 34637150, "link": "https://stackoverflow.com/questions/34637150/opening-a-file-in-random-named-folder-using-c-c", "title": "opening a file in random named folder using c/c++", "body": "<p>I'm trying to code a program where it opens and reads a file automatically. But the problem is the file is stored in a folder which name is unknown. I only know where the folder is located and the file's name. How to get to that file's path in char* ?</p>\n\n<p>Edit: example: <code>d:\\files\\&lt;random folder&gt;\\data.txt</code></p>\n\n<p>I don't know the name of random folder but I know that it exists in <code>d:\\files</code></p>\n"}, {"tags": ["android", "c++", "qt", "maps", "qml"], "answers": [{"comments": [{"owner": {"reputation": 81, "user_id": 5747057, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gseRP.png?s=128&g=1", "display_name": "Khan", "link": "https://stackoverflow.com/users/5747057/khan"}, "edited": false, "score": 0, "creation_date": 1452106601, "post_id": 34639501, "comment_id": 57026741, "body": "Thank you! But if I haven&#39;t got any markers on the map and it will be new marker? How can I do?"}, {"owner": {"reputation": 365, "user_id": 4507586, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-k5_-9ViGUsM/AAAAAAAAAAI/AAAAAAAAEbo/W1ZNqgwV70M/photo.jpg?sz=128", "display_name": "nfranklin", "link": "https://stackoverflow.com/users/4507586/nfranklin"}, "reply_to_user": {"reputation": 81, "user_id": 5747057, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gseRP.png?s=128&g=1", "display_name": "Khan", "link": "https://stackoverflow.com/users/5747057/khan"}, "edited": false, "score": 0, "creation_date": 1452183559, "post_id": 34639501, "comment_id": 57065392, "body": "@Khan,  is your goal to have a single marker?  Do you want it to only appear when the click occurs?  If so, how about setting the marker&#39;s <code>visible</code> to false and then set it to true in <code>onPressed</code> handle."}, {"owner": {"reputation": 365, "user_id": 4507586, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-k5_-9ViGUsM/AAAAAAAAAAI/AAAAAAAAEbo/W1ZNqgwV70M/photo.jpg?sz=128", "display_name": "nfranklin", "link": "https://stackoverflow.com/users/4507586/nfranklin"}, "reply_to_user": {"reputation": 81, "user_id": 5747057, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gseRP.png?s=128&g=1", "display_name": "Khan", "link": "https://stackoverflow.com/users/5747057/khan"}, "edited": false, "score": 0, "creation_date": 1452183805, "post_id": 34639501, "comment_id": 57065555, "body": "If you want to &quot;create&quot; new markers which each new click, check out <a href=\"http://doc.qt.io/qt-5/qtqml-javascript-dynamicobjectcreation.html\" rel=\"nofollow noreferrer\">docs on dynamic object creation</a> ..or better yet, use a model (where you add the clicked locations) and <a href=\"http://doc.qt.io/qt-5/qml-qtlocation-mapitemview.htm\" rel=\"nofollow noreferrer\">MapItemView</a>"}, {"owner": {"reputation": 81, "user_id": 5747057, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gseRP.png?s=128&g=1", "display_name": "Khan", "link": "https://stackoverflow.com/users/5747057/khan"}, "edited": false, "score": 0, "creation_date": 1452251434, "post_id": 34639501, "comment_id": 57096079, "body": "Thank you very much! But see: marker.coordinate isn&#39;t variable. How can I use it in main.cpp? It is last question."}, {"owner": {"reputation": 365, "user_id": 4507586, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-k5_-9ViGUsM/AAAAAAAAAAI/AAAAAAAAEbo/W1ZNqgwV70M/photo.jpg?sz=128", "display_name": "nfranklin", "link": "https://stackoverflow.com/users/4507586/nfranklin"}, "reply_to_user": {"reputation": 81, "user_id": 5747057, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gseRP.png?s=128&g=1", "display_name": "Khan", "link": "https://stackoverflow.com/users/5747057/khan"}, "edited": false, "score": 0, "creation_date": 1452256609, "post_id": 34639501, "comment_id": 57099459, "body": "@Khan  I don&#39;t understand your question.  Are you looking for info on how to interact with the qml objects from c++ (if so, see the docs (like  <a href=\"http://doc.qt.io/qt-5/qtqml-cppintegration-exposecppattributes.html\" rel=\"nofollow noreferrer\">here</a> and <a href=\"http://doc.qt.io/qt-5/qtqml-cppintegration-interactqmlfromcpp.html\" rel=\"nofollow noreferrer\">here</a> ).  Maybe it would be best for you to create a new question."}], "tags": [], "owner": {"reputation": 365, "user_id": 4507586, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-k5_-9ViGUsM/AAAAAAAAAAI/AAAAAAAAEbo/W1ZNqgwV70M/photo.jpg?sz=128", "display_name": "nfranklin", "link": "https://stackoverflow.com/users/4507586/nfranklin"}, "is_accepted": true, "score": 4, "last_activity_date": 1452102609, "creation_date": 1452102609, "answer_id": 34639501, "question_id": 34637133, "link": "https://stackoverflow.com/questions/34637133/qml-maps-get-coordinates-when-tap-the-screen/34639501#34639501", "title": "QML-maps: get coordinates when tap the screen", "body": "<p>Just set the <code>coordinate</code> of <code>marker</code> in the <code>onPressed</code> handler.  Something like the following: </p>\n\n<pre><code>import QtQuick 2.0\nimport QtLocation 5.5\n\nMap {\n    id: map\n    plugin: Plugin {name: \"osm\"}\n    zoomLevel: (maximumZoomLevel - minimumZoomLevel)/2\n    center {\n        // The Qt Company in Oslo\n        latitude: 59.9485\n        longitude: 10.7686\n    }\n\n    MapQuickItem {\n        id:marker\n        sourceItem: Image{\n            id: image\n            source: \"marker2.png\"\n\n        }\n        coordinate: map.center\n        anchorPoint.x: image.width / 2\n        anchorPoint.y: image.height / 2\n    }\n\n    MouseArea {\n        anchors.fill: parent\n        onPressed: {\n            marker.coordinate = map.toCoordinate(Qt.point(mouse.x,mouse.y))\n        }\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 81, "user_id": 5747057, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gseRP.png?s=128&g=1", "display_name": "Khan", "link": "https://stackoverflow.com/users/5747057/khan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4151, "favorite_count": 2, "accepted_answer_id": 34639501, "answer_count": 1, "score": 5, "last_activity_date": 1452186099, "creation_date": 1452095207, "last_edit_date": 1452186099, "question_id": 34637133, "link": "https://stackoverflow.com/questions/34637133/qml-maps-get-coordinates-when-tap-the-screen", "title": "QML-maps: get coordinates when tap the screen", "body": "<p>I'm making project using Qt Creator (Community) 5.5.1 with support of QML. \nI have this code:</p>\n\n<p>main.qml:</p>\n\n<pre><code>MouseArea\n        {   anchors.fill: parent\n            onPressed: console.log('latitude = '+ (map.toCoordinate(Qt.point(mouse.x,mouse.y)).latitude),\n                                   'longitude = '+ (map.toCoordinate(Qt.point(mouse.x,mouse.y)).longitude));\n</code></pre>\n\n<p>So when I tap the screen, the coordinates of this place on the map are shown on console. But I don't know how I can use these coordinates to position the marker on the screen where the clicked occurred. Here is the marker code:</p>\n\n<pre><code>MapQuickItem {\n        id:marker\n        coordinate:  QtPositioning.coordinate(******, ******);//stars are the coordinates\n        sourceItem: Image{\n            id: image\n            source: \"marker2.png\"\n\n        }\n        anchorPoint.x: image.width / 2\n        anchorPoint.y: image.height\n\n    }\n</code></pre>\n\n<p>What can I do to position the marker on map at the coordinates where the click occurred? Thanks.</p>\n"}, {"tags": ["c++", "g++", "cygwin"], "comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1452095733, "post_id": 34637070, "comment_id": 57019725, "body": "The first thing to do is to look at the actual stack dump. It will tell you where the problem happened."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1452095971, "post_id": 34637070, "comment_id": 57019890, "body": "<code>pair &lt;int, int&gt; S_T[N+1];</code> is not right."}, {"owner": {"reputation": 3, "user_id": 5731929, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f253474b98e59b6944f17a36c4107b0c?s=128&d=identicon&r=PG&f=1", "display_name": "John Alexandropoulos", "link": "https://stackoverflow.com/users/5731929/john-alexandropoulos"}, "reply_to_user": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1452099442, "post_id": 34637070, "comment_id": 57022191, "body": "@RSahu What is the mistake there?"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1452099538, "post_id": 34637070, "comment_id": 57022269, "body": "@JohnAlexandropoulos, the sizes of array must be known at compile time. <code>N</code> is a variable. It&#39;s value is not known at compile time. I am guessing that g++ allows variable length arrays as an extension. It is not standard C++ though."}], "owner": {"reputation": 3, "user_id": 5731929, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f253474b98e59b6944f17a36c4107b0c?s=128&d=identicon&r=PG&f=1", "display_name": "John Alexandropoulos", "link": "https://stackoverflow.com/users/5731929/john-alexandropoulos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 119, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1452094995, "creation_date": 1452094995, "question_id": 34637070, "link": "https://stackoverflow.com/questions/34637070/cygwin-creates-stackdump-file-takes-long-to-compile-c", "title": "Cygwin creates stackdump file, takes long to compile (C++)", "body": "<p>I am trying to compile the following problem (downloads.cpp) in C++ using Cygwin:</p>\n\n<pre><code>#include &lt;fstream&gt;\n#include &lt;algorithm&gt;\n#include &lt;cstdio&gt;\n#include &lt;climits&gt;\nusing namespace std;\n\nint main() {\nint N, ft = 0, bw = 0;\nifstream input;\ninput.open(\"downloads.in\");\ninput &gt;&gt; N; \npair &lt;int, int&gt; S_T[N+1];\nS_T[N+1].first = INT_MAX;\nS_T[N+1].second = INT_MAX;\nint FT[N];\nfill(FT, FT + sizeof(FT), 0);\nfor (int i = 0; i &lt; N; ++i) {\n    input &gt;&gt; S_T[i].first &gt;&gt; S_T[i].second;\n}\ninput.close();\nsort(S_T, S_T + N);\n\nfor (int i = 0; i &lt; N; ++i)\n{\n    if (S_T[i+1].second != 0) {\n        for (int j = i+1; j &lt; N; ++j) {\n            S_T[j].second -= S_T[i].second;\n        }\n        S_T[i+1].first += S_T[i].first;\n        S_T[i+1].second *= S_T[i-1].second / S_T[i].second;\n    } else if (S_T[i+1].first != INT_MAX &amp;&amp; S_T[i+1].second != INT_MAX)  {\n        S_T[i+1].first += S_T[i].first;\n        S_T[i+1].second *= S_T[i-1].second / S_T[i].second;\n    }\n    FT[i] = S_T[i].second;\n}\n\nfor (int i = 0; i &lt; N; ++i)\n    ft += FT[i];\n\nofstream output;\noutput.open(\"downloads.out\");\noutput &lt;&lt; ft &lt;&lt; endl;\noutput.close();\n\nreturn 0;\n</code></pre>\n\n<p>}</p>\n\n<p>And I get the following error (with varying 5-digit numbers after \"downloads\"): </p>\n\n<pre><code>0 [main] downloads 76188 cygwin_exception::open_stackdumpfile: Dumping stack trace to downloads.exe.stackdump\n [Finished in 6.5s]\n</code></pre>\n\n<p>Additionally, the program takes significantly longer than the usual one second to compile, and Cygwin seems to create a .exe.stackdump file with the same name as my program in the same file. </p>\n\n<p>I have already checked for Cygwin opening background processes, and have found none. Anyone know why this could be happening?</p>\n"}, {"tags": ["c++", "qt", "events", "qgraphicsview", "qpainter"], "comments": [{"owner": {"reputation": 12555, "user_id": 1750757, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/Zmc7D.jpg?s=128&g=1", "display_name": "Victor Polevoy", "link": "https://stackoverflow.com/users/1750757/victor-polevoy"}, "edited": false, "score": 0, "creation_date": 1452095114, "post_id": 34637067, "comment_id": 57019289, "body": "Add the code with your using of these qgraphicsscene objects and qgraphicsviews."}, {"owner": {"reputation": 3363, "user_id": 786238, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/2ad644dfd29b5e1705af19c770ff65d5?s=128&d=identicon&r=PG", "display_name": "Laurent Crivello", "link": "https://stackoverflow.com/users/786238/laurent-crivello"}, "reply_to_user": {"reputation": 12555, "user_id": 1750757, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/Zmc7D.jpg?s=128&g=1", "display_name": "Victor Polevoy", "link": "https://stackoverflow.com/users/1750757/victor-polevoy"}, "edited": false, "score": 0, "creation_date": 1452108352, "post_id": 34637067, "comment_id": 57027804, "body": "Edited text, adding code"}, {"owner": {"reputation": 2275, "user_id": 3742943, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ijesw.jpg?s=128&g=1", "display_name": "LoPiTaL", "link": "https://stackoverflow.com/users/3742943/lopital"}, "edited": false, "score": 0, "creation_date": 1486381322, "post_id": 34637067, "comment_id": 71305133, "body": "I am facing a pretty similar issue, where the QGraphicsView is drawing the scene not only on itself, but also over any widget that is around it, as if it wasn&#39;t clipping the scene to the view rectangle. Have you found a solution? If so, could you post it?"}, {"owner": {"reputation": 3363, "user_id": 786238, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/2ad644dfd29b5e1705af19c770ff65d5?s=128&d=identicon&r=PG", "display_name": "Laurent Crivello", "link": "https://stackoverflow.com/users/786238/laurent-crivello"}, "edited": false, "score": 0, "creation_date": 1487354722, "post_id": 34637067, "comment_id": 71764047, "body": "I finished by escaping from the drawBackground function, and instead using  a QGraphicsLineItem."}], "owner": {"reputation": 3363, "user_id": 786238, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/2ad644dfd29b5e1705af19c770ff65d5?s=128&d=identicon&r=PG", "display_name": "Laurent Crivello", "link": "https://stackoverflow.com/users/786238/laurent-crivello"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 263, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1452153872, "creation_date": 1452094987, "last_edit_date": 1452153872, "question_id": 34637067, "link": "https://stackoverflow.com/questions/34637067/custom-qgraphicsview-is-painting-on-other-widgets", "title": "Custom QGraphicsView is painting on other widgets", "body": "<p>In Qt/c++, I have an overloaded/custom QGraphicsView class.\nIn this classes' drawBackground event function (same issue happens with paintEvent), I am drawing some lines using the provided Qpainter:</p>\n\n<pre><code>void myGraphicsView::drawBackground(QPainter *painter, const QRectF &amp;rect)\n{\n    QGraphicsView::drawBackground(painter, rect);\n    QPen pen;    \n    pen.setWidth(2);\n    painter-&gt;setPen(pen);\n\n    painter-&gt;drawLine(rect.x(),rect.y(),rect.x()+rect.width(),rect.y()+rect.height());\n}\n</code></pre>\n\n<p>Initialization of the GraphicsView custom class:</p>\n\n<pre><code>myGraphicsView::myGraphicsView(GLWidget *myOpenGLWindow,QWidget * parent) : QGraphicsView(parent)\n{\n    setDragMode(QGraphicsView::ScrollHandDrag);\n    myScene=new actionEditorButtons(this);\n    myScene-&gt;setMainView(this);\n    setScene(myScene);\n    setStyleSheet(\"background: transparent\");\n    setAlignment(Qt::AlignBottom);\n}\n</code></pre>\n\n<p>Initialization of the custom QGraphicsScene, with a button that gets \"corrupted\" with the line drawn in the custom graphicsview:</p>\n\n<pre><code>actionEditorButtons::actionEditorButtons(BrainClass *theBrain,int receivedActionNb,QObject *parent) : QGraphicsScene(parent)\n{\n    beginButton = new QPushButton();\n    beginButton-&gt;setIcon(QIcon(\":/icons/actionBegin.png\"));\n    beginButton-&gt;setIconSize(QSize(40,40));\n    beginButton-&gt;setFixedSize(QSize(40,40));\n    beginButton-&gt;setStyleSheet(\"border: none\");\n    beginProxy=addWidget(beginButton);\n    beginProxy-&gt;setPos(0,80);\n    connect(beginButton, SIGNAL (released()),this, SLOT (handleBeginButton()));\n}\n</code></pre>\n\n<p>My issue is that this line is not only drawn on this custom QGraphicsView, but it is drawn too on all widgets added this scene. How can I only draw in the main graphicsView and not in the added widgets ?</p>\n"}, {"tags": ["c++", "linux", "curl", "google-api", "google-sheets"], "owner": {"reputation": 1454, "user_id": 5216095, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/Iv08U.jpg?s=128&g=1", "display_name": "Josbel Luna", "link": "https://stackoverflow.com/users/5216095/josbel-luna"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 506, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1452094422, "creation_date": 1452094066, "last_edit_date": 1452094422, "question_id": 34636775, "link": "https://stackoverflow.com/questions/34636775/easiest-way-to-update-a-cell-value-of-a-google-spreadsheet-using-curl-on-linux", "title": "Easiest way to update a cell value of a google spreadsheet using curl on linux", "body": "<p>I have a google spreadsheet and I'm using the spreadsheet api to get/update cell values. I need to change the value of a cell, I access to the cell with the cell_id, but I don't know how to update the value of that. I've read:\n <a href=\"https://developers.google.com/google-apps/spreadsheets/data#change_contents_of_a_cell\" rel=\"nofollow\">https://developers.google.com/google-apps/spreadsheets/data#change_contents_of_a_cell</a>\n but I couldn't understand it.</p>\n\n<p>I'm using the HTTP command <code>https://spreadsheets.google.com/feeds/cells/&lt;key&gt;/&lt;worksheet_id&gt;/private/full/R2C2</code> to access to the cell but I don't know how to update it. </p>\n"}, {"tags": ["c++", "arrays"], "comments": [{"owner": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "edited": false, "score": 0, "creation_date": 1452093713, "post_id": 34636644, "comment_id": 57018286, "body": "Look at the <code>&lt;random&gt;</code> header for C++11 and higher."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1452093716, "post_id": 34636644, "comment_id": 57018291, "body": "Did you call <code>srand()</code> before this?"}, {"owner": {"reputation": 3, "user_id": 5744524, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d4ee7132f63312e788b4b5a6f02f509?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Webb", "link": "https://stackoverflow.com/users/5744524/michael-webb"}, "edited": false, "score": 0, "creation_date": 1452093827, "post_id": 34636644, "comment_id": 57018372, "body": "when i tried srand() it said some error one sec lemme past it"}, {"owner": {"reputation": 36985, "user_id": 749284, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9939c97c2ccc2f1f6b829e9afbc32e5b?s=128&d=identicon&r=PG", "display_name": "mah", "link": "https://stackoverflow.com/users/749284/mah"}, "edited": false, "score": 0, "creation_date": 1452093938, "post_id": 34636644, "comment_id": 57018449, "body": "When trying something leads to an error, the correct response is not to abandon what you&#39;ve tried. Rather, the correct response is to understand the error (which is a requirement before you can decide to either abandon what you&#39;ve done, or fix it). <code>rand()</code> is not really random. If you do not seed its starting point (with <code>srand()</code>), you will get exactly the repeated results you&#39;re trying to cure."}, {"owner": {"reputation": 3, "user_id": 5744524, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d4ee7132f63312e788b4b5a6f02f509?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Webb", "link": "https://stackoverflow.com/users/5744524/michael-webb"}, "edited": false, "score": 0, "creation_date": 1452094007, "post_id": 34636644, "comment_id": 57018506, "body": "it said too few arguments for the srand function"}, {"owner": {"reputation": 36985, "user_id": 749284, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9939c97c2ccc2f1f6b829e9afbc32e5b?s=128&d=identicon&r=PG", "display_name": "mah", "link": "https://stackoverflow.com/users/749284/mah"}, "edited": false, "score": 0, "creation_date": 1452094105, "post_id": 34636644, "comment_id": 57018572, "body": "@MichaelWebb that seems like an easy fix: read its documentation. You need to be in the habit of reading the documentation of functions you use (especially when you run into something like this) before asking for help, if you want to be a successful developer."}, {"owner": {"reputation": 3, "user_id": 5744524, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d4ee7132f63312e788b4b5a6f02f509?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Webb", "link": "https://stackoverflow.com/users/5744524/michael-webb"}, "edited": false, "score": 0, "creation_date": 1452094495, "post_id": 34636644, "comment_id": 57018858, "body": "yea do you know a good website to read documentation"}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 5744524, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d4ee7132f63312e788b4b5a6f02f509?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Webb", "link": "https://stackoverflow.com/users/5744524/michael-webb"}, "edited": false, "score": 0, "creation_date": 1452094232, "post_id": 34636693, "comment_id": 57018653, "body": "thank you your the best :D"}], "tags": [], "owner": {"reputation": 548, "user_id": 4323420, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bV2OX.jpg?s=128&g=1", "display_name": "Tarik Neaj", "link": "https://stackoverflow.com/users/4323420/tarik-neaj"}, "is_accepted": false, "score": 1, "last_activity_date": 1452762055, "last_edit_date": 1452762055, "creation_date": 1452093810, "answer_id": 34636693, "question_id": 34636644, "link": "https://stackoverflow.com/questions/34636644/creating-a-program-to-pick-out-random-strings-from-an-array/34636693#34636693", "title": "Creating a Program to pick out random strings from an array", "body": "<p>Add  srand (time(NULL)); at the top of your program. Also add the header <code>&lt;time.h&gt;</code></p>\n\n<p>Read more here - <a href=\"http://www.cplusplus.com/reference/cstdlib/srand/\" rel=\"nofollow\">link</a></p>\n\n<p>I recommend you look into the <code>&lt;random&gt;</code> header.</p>\n"}], "owner": {"reputation": 3, "user_id": 5744524, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d4ee7132f63312e788b4b5a6f02f509?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Webb", "link": "https://stackoverflow.com/users/5744524/michael-webb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1139, "favorite_count": 0, "closed_date": 1452093921, "answer_count": 1, "score": -2, "last_activity_date": 1452762055, "creation_date": 1452093670, "question_id": 34636644, "link": "https://stackoverflow.com/questions/34636644/creating-a-program-to-pick-out-random-strings-from-an-array", "closed_reason": "Duplicate", "title": "Creating a Program to pick out random strings from an array", "body": "<p>So, i wanted to create a program that picks out simple strings from an array, it sounded pretty simple to me but then i ran into problems. Here's what i wrote:</p>\n\n<pre><code>int pickjob;\nstring jobs[] = {Police Officer, Fireman, Vet, Doctor, Nurse, Chemist, Waiter};\njob1 = jobs[rand()%7];\njob2 = jobs[rand()%7];\njob3 = jobs[rand()%7];\ncout &lt;&lt; \"Here i found some jobs for you, check them out\\n1.\" &lt;&lt; job1 &lt;&lt; \"\\n2.\" &lt;&lt; job2 &lt;&lt; \"\\n3.\" &lt;&lt; job3 &lt;&lt; \"\\nGo Head and pick one out\" &lt;&lt; endl;\ncin &gt;&gt; pickjob;\n//Rest of code is below, i'll put it in if you need it ;)\n</code></pre>\n\n<p>But my problem was that everytime i ran the program the same jobs appeared everytime (Im a amaetur at C++, so if i sound stupid forgive me), so how do i make a program where it prints out diffrent jobs every time from the array.</p>\n"}, {"tags": ["c++", "design-patterns", "go"], "comments": [{"owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 1, "creation_date": 1452098718, "post_id": 34636455, "comment_id": 57021701, "body": "Go does not have inheritance, so type hierarchies are usually something you want to avoid. C++/Java design patterns don&#39;t fit well to the structural types and composition used in Go."}, {"owner": {"reputation": 38332, "user_id": 763585, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/34f929fab16e27f59c5193f0db678125?s=128&d=identicon&r=PG", "display_name": "evanmcdonnal", "link": "https://stackoverflow.com/users/763585/evanmcdonnal"}, "edited": false, "score": 0, "creation_date": 1452123900, "post_id": 34636455, "comment_id": 57035807, "body": "Do a search for embedding in Go and read up on the recommended design patterns. As JimB said you&#39;ll want to rethink the design a little, the simplest way from me to describe it is that the inheritance relationship is inverted. You never inherit, you only compose/embed. In addition to that, when you&#39;d achieve polymorphic behavior using a parent type like iterating <code>[]ParentType</code> and calling <code>MethodThatsOverriden()</code> instead you&#39;ll need to define an interface and use it."}], "answers": [{"comments": [{"owner": {"reputation": 2392, "user_id": 620679, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/cb547106a24ce46841e936a917ed610d?s=128&d=identicon&r=PG", "display_name": "Scott Deerwester", "link": "https://stackoverflow.com/users/620679/scott-deerwester"}, "edited": false, "score": 0, "creation_date": 1452095465, "post_id": 34636667, "comment_id": 57019525, "body": "Would this allow me to, for example, have a list of Edibles, and retrieve the name of each instance without worrying about whether it&#39;s a Fruit or a Meat? I presume that adding GetName() to the Edible interface would do this, correct?"}, {"owner": {"reputation": 23064, "user_id": 3177124, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/65014fdf3cfd04b1452620aeb54dcede?s=128&d=identicon&r=PG&f=1", "display_name": "abligh", "link": "https://stackoverflow.com/users/3177124/abligh"}, "reply_to_user": {"reputation": 2392, "user_id": 620679, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/cb547106a24ce46841e936a917ed610d?s=128&d=identicon&r=PG", "display_name": "Scott Deerwester", "link": "https://stackoverflow.com/users/620679/scott-deerwester"}, "edited": false, "score": 0, "creation_date": 1452099024, "post_id": 34636667, "comment_id": 57021922, "body": "If you wanted to do it that way, yes you&#39;d need to add <code>GetName()</code> to the editable interface. Or perhaps simply something that returned a pointer to <code>EditableName</code> or whatever you have your common stuff in (<code>EdibleItem</code> perhaps)."}, {"owner": {"reputation": 2392, "user_id": 620679, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/cb547106a24ce46841e936a917ed610d?s=128&d=identicon&r=PG", "display_name": "Scott Deerwester", "link": "https://stackoverflow.com/users/620679/scott-deerwester"}, "edited": false, "score": 0, "creation_date": 1452102620, "post_id": 34636667, "comment_id": 57024335, "body": "In the actual implementation, I have more than one way for the top level interface to access the values of the attributes, so a method is definitely the way to go. Thanks much for the answer. This is just what I was missing. I knew it couldn&#39;t be the case that Go doesn&#39;t provide a mechanism something this fundamental."}], "tags": [], "owner": {"reputation": 23064, "user_id": 3177124, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/65014fdf3cfd04b1452620aeb54dcede?s=128&d=identicon&r=PG&f=1", "display_name": "abligh", "link": "https://stackoverflow.com/users/3177124/abligh"}, "is_accepted": true, "score": 1, "last_activity_date": 1452093740, "creation_date": 1452093740, "answer_id": 34636667, "question_id": 34636455, "link": "https://stackoverflow.com/questions/34636455/idiomatic-go-equivalent-to-subclasses/34636667#34636667", "title": "Idiomatic Go equivalent to subclasses", "body": "<p>In this instance, you could have an <code>Edible</code> interface, and <code>type Fruit struct</code> and <code>type Meat struct</code> which each implemented them. Each of those could also be composed such that it contained an <code>EdibleName</code> which would provide the methods and storage space to set / get the name.</p>\n\n<p>e.g.</p>\n\n<pre><code>type Edible interface {\n    eat() int // common method\n}\n\ntype EdibleName struct {\n    name string\n}\n\n// NB getters and setters may not be idiomatic\nfunc (n *EdibleName) getName() string {\n    return n.name\n}\n\nfunc (n *EdibleName) setName(name string) {\n    n.name = name\n}\n\ntype Fruit struct {\n    pips int\n    EdibleName\n}\n\nfunc (f *Fruit) eat() int {\n    // ...\n    return 0\n}\n\ntype Meat struct {\n    animal int\n    EdibleName\n}\n\nfunc (m *Meat) eat() int {\n    animal int\n    return 0\n}\n</code></pre>\n"}], "owner": {"reputation": 2392, "user_id": 620679, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/cb547106a24ce46841e936a917ed610d?s=128&d=identicon&r=PG", "display_name": "Scott Deerwester", "link": "https://stackoverflow.com/users/620679/scott-deerwester"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "accepted_answer_id": 34636667, "answer_count": 1, "score": 1, "last_activity_date": 1452123720, "creation_date": 1452093185, "last_edit_date": 1452123720, "question_id": 34636455, "link": "https://stackoverflow.com/questions/34636455/idiomatic-go-equivalent-to-subclasses", "title": "Idiomatic Go equivalent to subclasses", "body": "<p>I have a lot more experience in C++ than Go. I'm trying to understand how the <a href=\"https://sourcemaking.com/design_patterns/composite\" rel=\"nofollow\">Composite design pattern</a> is expressed idiomatically in Go, in particular with reference to attributes. In C++, I'd use a parent class to hold attributes and methods that are common to a set of subclasses. I'm not seeing how this works in Go. An interface lets me define which methods to implement, but it doesn't let me provide a default implementation. I have to reimplement the method in every struct that implements the interface, and replicate all of the attributes in each struct. I can't keep common attributes in an interface, because interfaces don't have data elements. How do you do this sort of refactoring in Go?</p>\n\n<p>Here's an example (in C++) of what I'd like to be able to do in Go:</p>\n\n<pre><code>#include &lt;string&gt;\n\n/*\n * Parent class for edible things. Holds the \"name\" attribute.\n */\n\nclass Edible {\npublic:\n        Edible(const std::string &amp;aName):\n                ed_Name(aName) { }\n        const std::string &amp;name() const { return ed_Name; }\n\nprotected:\n        void setName(const std::string &amp;aName) { ed_Name = aName; }\n\nprivate:\n        std::string ed_Name;\n};\n\n/*\n * Subclass of Edible for fruits. Depends on Edible to store the name.\n */\n\nclass Fruit: public Edible {\npublic:\n        Fruit(const std::string &amp;aName,\n              const std::string &amp;aPlant):\n                Edible(aName),\n                fr_Plant(aPlant) { }\n        const std::string &amp;plant() const { return fr_Plant; }\n\nprotected:\n        void setPlant(const std::string &amp;aPlant) { fr_Plant = aPlant; }\n\nprivate:\n        std::string fr_Plant;\n};\n\n/*\n * Subclass of Edible for meats. Depends on Edible to store the name.\n * Has attributes for the animal and the cut of meat.\n */\n\nclass Meat: public Edible {\npublic:\n        Meat(const std::string &amp;aName,\n             const std::string &amp;aAnimal,\n             const std::string &amp;aCut):\n                Edible(aName),\n                me_Animal(aAnimal),\n                me_Cut(aCut) { }\n        const std::string &amp;animal() const { return me_Animal; }\n        const std::string &amp;cut() const { return me_Cut; }\nprotected:\n        void setAnimal(const std::string &amp;aAnimal) { me_Animal = aAnimal; }\n        void setCut(const std::string &amp;aCut) { me_Cut = aCut; }\nprivate:\n        std::string me_Animal;\n        std::string me_Cut;\n};\n</code></pre>\n"}, {"tags": ["c++", "algorithm", "c++11"], "comments": [{"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1452095153, "post_id": 34636274, "comment_id": 57019312, "body": "When you used the debugger, which statement is causing the issue?  What are the values of the variables in the statement?  (Add answers to your post.)"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 1, "creation_date": 1452095397, "post_id": 34636274, "comment_id": 57019482, "body": "I recommend using spaces around operators.  It doesn&#39;t affect your program&#39;s execution, but it does make your program more readable."}, {"owner": {"reputation": 51, "user_id": 5143860, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-xSXrRtfTkBk/AAAAAAAAAAI/AAAAAAAAAJY/pbVkAm9QEG4/photo.jpg?sz=128", "display_name": "Lcukerd", "link": "https://stackoverflow.com/users/5143860/lcukerd"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1452175893, "post_id": 34636274, "comment_id": 57059713, "body": "I don&#39;t know the values of variable. It&#39;s checked for some input online. I will make sure to use spaces next time. Actually on my compiler it seemed clean so never thought of adding spaces."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1452179199, "post_id": 34636274, "comment_id": 57062149, "body": "Many debuggers have a feature where you can put variables in a window and <i>watch</i> their values as you single step through each statement.  Assisting you would be easier if you could single step through your program and let us know which statement is causing the issue."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1452179309, "post_id": 34636274, "comment_id": 57062242, "body": "You should make a habit of using <code>delete</code> or <code>delete[]</code> for each <code>new</code> or <code>new[]</code>.  Otherwise you have a <i>memory leak</i>."}, {"owner": {"reputation": 51, "user_id": 5143860, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-xSXrRtfTkBk/AAAAAAAAAAI/AAAAAAAAAJY/pbVkAm9QEG4/photo.jpg?sz=128", "display_name": "Lcukerd", "link": "https://stackoverflow.com/users/5143860/lcukerd"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1452195744, "post_id": 34636274, "comment_id": 57073000, "body": "i have included one of the input and output available from that site."}, {"owner": {"reputation": 51, "user_id": 5143860, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-xSXrRtfTkBk/AAAAAAAAAAI/AAAAAAAAAJY/pbVkAm9QEG4/photo.jpg?sz=128", "display_name": "Lcukerd", "link": "https://stackoverflow.com/users/5143860/lcukerd"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1452195901, "post_id": 34636274, "comment_id": 57073090, "body": "i have never used a debugger before. since you have mentioned it i will try to use it. but pls try it on your side. yes i forgot about using delete() , i will try to remember that. @ThomasMatthews"}], "answers": [{"comments": [{"owner": {"reputation": 26552, "user_id": 448932, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QgLLl.png?s=128&g=1", "display_name": "500 - Internal Server Error", "link": "https://stackoverflow.com/users/448932/500-internal-server-error"}, "edited": false, "score": 0, "creation_date": 1452107476, "post_id": 34637160, "comment_id": 57027256, "body": "For discrete input variables, like here, this shouldn&#39;t actually make any difference."}], "tags": [], "owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "is_accepted": false, "score": 0, "last_activity_date": 1452095316, "creation_date": 1452095316, "answer_id": 34637160, "question_id": 34636274, "link": "https://stackoverflow.com/questions/34636274/cost-of-cutting-a-plank/34637160#34637160", "title": "cost of cutting a plank", "body": "<p>This line could be a contributing factor:  </p>\n\n<pre><code>while((h!=m)|(l!=n))\n</code></pre>\n\n<p>The <code>|</code> operator is a <em>binary arithmetic</em> operator.  </p>\n\n<p>Maybe you were looking for <code>||</code>, which is the <em>logical OR</em> operator:</p>\n\n<pre><code>while((h!=m) || (l!=n))\n</code></pre>\n"}], "owner": {"reputation": 51, "user_id": 5143860, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-xSXrRtfTkBk/AAAAAAAAAAI/AAAAAAAAAJY/pbVkAm9QEG4/photo.jpg?sz=128", "display_name": "Lcukerd", "link": "https://stackoverflow.com/users/5143860/lcukerd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 138, "favorite_count": 0, "answer_count": 1, "score": -4, "last_activity_date": 1452195615, "creation_date": 1452092633, "last_edit_date": 1452195615, "question_id": 34636274, "link": "https://stackoverflow.com/questions/34636274/cost-of-cutting-a-plank", "title": "cost of cutting a plank", "body": "<p>I know that this question has been asked but i cant understand the problem in my code. I know that we have to use cost in desending order for minimum cost and i did same but still gives wrong output.</p>\n\n<p>A board composed of m\u00d7n wooden squares and asks him to find the minimum cost of breaking the board back down into individual 1\u00d71 pieces. To break the board down, Bob must make cuts along its horizontal and vertical lines.</p>\n\n<p>To reduce the board to squares, xn\u22121 vertical cuts must be made at locations x1,x2,\u2026,xn\u22122,xn\u22121 and ym\u22121 horizontal cuts must be made at locations y1,y2,\u2026,ym\u22122,ym\u22121. Each cut along some xi (or yj) has a cost, cxi (or cyj). If a cut of cost c passes through n already-cut segments, the total cost of the cut is n\u00d7c.</p>\n\n<p>The cost of cutting the whole board down into 1\u00d71 squares is the sum of the cost of each successive cut. Recall that the cost of a cut is multiplied by the number of already-cut segments it crosses through, so each cut is increasingly expensive.</p>\n\n<p>Input Format</p>\n\n<p>The first line contains a single integer, T, denoting the number of test cases. The subsequent 3T lines describe each test case in 3 lines.</p>\n\n<p>For each test case, the first line has two positive space-separated integers, m and n, detailing the respective height (y) and width (x) of the board. \nThe second line has m\u22121 space-separated integers listing the cost, cyj, of cutting a segment of the board at each respective location from y1,y2,\u2026,ym\u22122,ym\u22121. \nThe third line has n\u22121 space-separated integers listing the cost, cxi, of cutting a segment of the board at each respective location from x1,x2,\u2026,xn\u22122,xn\u22121.</p>\n\n<p>Note: If we were to superimpose the m\u00d7n board on a 2D graph, x0, xn, y0, and yn would all be edges of the board and thus not valid cut lines.</p>\n\n<p>Constraints \n1\u2264T\u226420 \n2\u2264m,n\u22641000000 \n,0\u2264cxi,cyj\u22641000000000</p>\n\n<p>Output Format</p>\n\n<p>For each of the T test cases, find the minimum cost (MinimumCost) of cutting the board into 1\u00d71 squares and print the value of MinimumCost % (1000000000+7).</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;limits&gt;\nusing namespace std;\n\nint main() {\n    int t,ch=0;\n    long int pos,m,n,h=1,l=1;\n    long long int cost=0,*x,*y,temp;\n    cin&gt;&gt;t;\n    while(t&gt;0)\n    {cin&gt;&gt;m&gt;&gt;n;\n     cost=0;\n    x = new long long int[n-1];\n    y = new long long int[m-1];\n    for (long i=0;i&lt;m-1;i++)\n        cin&gt;&gt;y[i];\n    for(long i=0;i&lt;n-1;i++)\n        cin&gt;&gt;x[i];\n    h=1;\n    l=1;\n    while((h!=m)|(l!=n))\n    {ch=0;\n    temp=0;\n    for (long i=0;i&lt;m-1;i++)\n        if (temp&lt;y[i])\n            {temp=y[i];\n            pos=i;\n            }\n    for(long i=0;i&lt;n-1;i++)\n        if (temp&lt;x[i])\n        {temp=x[i];\n        pos=i;\n        ch=1;\n        }\n    cost=cost+temp*(ch==0?l:h);\n    if (ch==0)\n            {y[pos]=-1;\n            h++;}\n        else\n            {x[pos]=-1;\n            l++;\n            }\n\n    }\n    cout&lt;&lt;cost%1000000007;\n    t--;\n\n    }\n    return 0;\n}\n</code></pre>\n\n<p>Test case that gives wrong output:</p>\n\n<p>Input:</p>\n\n<p>5</p>\n\n<p>52 30</p>\n\n<p>2 30 79 47 4 56 47 67 25 30 75 58 47 54 66 61 6 64 28 41 75 36 1 92 42 61 35 56 12 86 84 14 68 63 13 72 19 60 39 96 43 14 55 42 21 73 3 27 37 84 68</p>\n\n<p>64 72 21 56 14 35 44 71 47 82 7 14 50 71 79 23 42 92 14 39 35 81 46 29 2 19 84 81 57</p>\n\n<p>23 43</p>\n\n<p>1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1</p>\n\n<p>23 23 23 23 23 23 23 23 23 23 23 23 23 23 23 23 23 23 23 23 23 23 23 23 23 23 23 23 23 23 23 23 23 23 23 23 23 23 23 23 23 23</p>\n\n<p>60 76 </p>\n\n<p>7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7</p>\n\n<p>30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30</p>\n\n<p>58 40</p>\n\n<p>71 58 61 51 33 3 43 48 94 30 29 40 59 83 12 43 64 69 64 65 42 57 40 72 64 98 98 47 56 6 85 79 65 46 30 98 49 25 98 96 7 27 88 66 10 0 62 26 69 78 92 64 87 84 88 51 35</p>\n\n<p>87 50 91 45 35 22 62 81 53 61 83 30 59 31 38 39 19 56 1 20 70 28 41 48 72 57 35 56 46 39 91 85 41 34 30 77 57 93 10</p>\n\n<p>47 94</p>\n\n<p>6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6</p>\n\n<p>17 17 17 17 17 17 17 17 17 17 17 17 17 17 17 17 17 17 17 17 17 17 17 17 17 17 17 17 17 17 17 17 17 17 17 17 17 17 17 17 17 17 17 17 17 17 17 17 17 17 17 17 17 17 17 17 17 17 17 17 17 17 17 17 17 17 17 17 17 17 17 17 17 17 17 17 17 17 17 17 17 17 17 17 17 17 17 17 17 17 17 17 17</p>\n\n<p>Output</p>\n\n<p>51028</p>\n\n<p>1912</p>\n\n<p>33638</p>\n\n<p>91124</p>\n\n<p>27525</p>\n"}, {"tags": ["c++", "boost", "multicast"], "answers": [{"comments": [{"owner": {"reputation": 121, "user_id": 5108844, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/cce553242f3ed8974cb1d5f4a9afb6d1?s=128&d=identicon&r=PG&f=1", "display_name": "Nesquikk M", "link": "https://stackoverflow.com/users/5108844/nesquikk-m"}, "edited": false, "score": 0, "creation_date": 1452095806, "post_id": 34636853, "comment_id": 57019769, "body": "Thank you. but when you mentioned that I could broadcast my presence, what do you mean by that ? and how would I do so ?"}, {"owner": {"reputation": 11225, "user_id": 241013, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0825ba5ec12464a2b8176642830e6a7?s=128&d=identicon&r=PG", "display_name": "Sorin", "link": "https://stackoverflow.com/users/241013/sorin"}, "reply_to_user": {"reputation": 121, "user_id": 5108844, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/cce553242f3ed8974cb1d5f4a9afb6d1?s=128&d=identicon&r=PG&f=1", "display_name": "Nesquikk M", "link": "https://stackoverflow.com/users/5108844/nesquikk-m"}, "edited": false, "score": 0, "creation_date": 1452156235, "post_id": 34636853, "comment_id": 57046417, "body": "You send a message to the broadcast group. Any machine on the network can do it."}], "tags": [], "owner": {"reputation": 11225, "user_id": 241013, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0825ba5ec12464a2b8176642830e6a7?s=128&d=identicon&r=PG", "display_name": "Sorin", "link": "https://stackoverflow.com/users/241013/sorin"}, "is_accepted": true, "score": 1, "last_activity_date": 1452094306, "creation_date": 1452094306, "answer_id": 34636853, "question_id": 34636127, "link": "https://stackoverflow.com/questions/34636127/sending-a-message-to-all-other-instances-of-the-application-on-the-same-network/34636853#34636853", "title": "Sending a message to all other instances of the application on the same network", "body": "<blockquote>\n  <p>Why those specific addresses ?</p>\n</blockquote>\n\n<p>Those are the addresses specified by the IP protocol (IPv4/IPv6) for multicasting. Part of the addresses are groups specifications (I think 255.0.1 for IPv4 and 1234 for IPv6). The traffic is forwarded to specific ports on local machine, but I don't know/can't find details.</p>\n\n<blockquote>\n  <p>Also in the receiver example, there is a section dedicated to joining the multicast address, is there a way to check if a new connection has showed up on this address ? to see what new instance joins or leaves the connection, is this possible ?</p>\n</blockquote>\n\n<p>No, there's no builtin capability like that. Multicast is supposed to be sent to at least all interested machines. The joining is a signal to the network/local OS that you are an interested machine and that it should pickup and forward relevant packets. There's no need to forward such signals in all cases (i.e. if the router already has the packets). </p>\n\n<p>You can however broadcast your presence on the channel after you joined, but that's part of the protocol you want to implement on top of multicasting.</p>\n\n<blockquote>\n  <p>But my main question is, if I were to send a message like Hello World from my computer running the example, would this show up on another computer on the same network ?</p>\n</blockquote>\n\n<p>Depends. If you're wired into the same layer 1 (direct Ethernet or direct WiFi) fabric, then probably yes. If you have to hop through a router/access point they might have firewall rules that inhibit the traffic.</p>\n\n<p>See <a href=\"https://en.wikipedia.org/wiki/IP_multicast\" rel=\"nofollow\">wikipedia</a> for a summary of how it works. Or read the <a href=\"https://tools.ietf.org/html/rfc1112\" rel=\"nofollow\">rfc1112</a>, <a href=\"https://tools.ietf.org/html/rfc4604\" rel=\"nofollow\">rfc4604</a> and <a href=\"https://tools.ietf.org/html/rfc5771\" rel=\"nofollow\">rfc5771</a> for the standard.</p>\n"}], "owner": {"reputation": 121, "user_id": 5108844, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/cce553242f3ed8974cb1d5f4a9afb6d1?s=128&d=identicon&r=PG&f=1", "display_name": "Nesquikk M", "link": "https://stackoverflow.com/users/5108844/nesquikk-m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "accepted_answer_id": 34636853, "answer_count": 1, "score": 0, "last_activity_date": 1452094306, "creation_date": 1452092185, "last_edit_date": 1592644375, "question_id": 34636127, "link": "https://stackoverflow.com/questions/34636127/sending-a-message-to-all-other-instances-of-the-application-on-the-same-network", "title": "Sending a message to all other instances of the application on the same network", "body": "<p>How do I send a message using multicast on the same network ?</p>\n<p>I am using C++, with the library boost. I have played around with the sender and receiver example.</p>\n<p>But I also have a few questions, I am new to networks and C++.\nThe multicast port is set to 30001, is there any good reason for this ?</p>\n<p>The examples suggests that I use, for the sender:</p>\n<blockquote>\n<p>IPv4 239.255.0.1</p>\n<p>IPV6 ff31::8000:1234</p>\n</blockquote>\n<p>And for the receiver:</p>\n<blockquote>\n<p>IPv4 0.0.0.0 239.255.0.1</p>\n<p>IPv6 0::0 ff31::8000:1234</p>\n</blockquote>\n<p>Why those specific addresses ?</p>\n<p>Also in the receiver example, there is a section dedicated to joining the multicast address, is there a way to check if a new connection has showed up on this address ? to see what new instance joins or leaves the connection, is this possible ?</p>\n<p>But my main question is, if I were to send a message like Hello World from my computer running the example, would this show up on another computer on the same network ?</p>\n"}, {"tags": ["c++", "performance", "readability", "variable-declaration"], "comments": [{"owner": {"reputation": 3575, "user_id": 2750816, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c28ad318c9e95eda7bf7ee211db86a76?s=128&d=identicon&r=PG", "display_name": "Evgeny", "link": "https://stackoverflow.com/users/2750816/evgeny"}, "edited": false, "score": 0, "creation_date": 1452092106, "post_id": 34636037, "comment_id": 57017153, "body": "In your example <code>int maxVal = even_longer_expression();</code> only should be declared"}, {"owner": {"reputation": 36240, "user_id": 437768, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/4955556312c2ba53bee07d76e0b7d89a?s=128&d=identicon&r=PG", "display_name": "Moo-Juice", "link": "https://stackoverflow.com/users/437768/moo-juice"}, "edited": false, "score": 3, "creation_date": 1452092111, "post_id": 34636037, "comment_id": 57017158, "body": "<code>even_longer_expression()</code> is going to be evaluated every pass, so of course it makes sense not to have it in there."}, {"owner": {"reputation": 2234, "user_id": 3052438, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/X9OWu.png?s=128&g=1", "display_name": "NO_NAME", "link": "https://stackoverflow.com/users/3052438/no-name"}, "edited": false, "score": 1, "creation_date": 1452092314, "post_id": 34636037, "comment_id": 57017328, "body": "<code>minVal</code> and <code>maxVal</code> should be <code>const</code> or even <code>constexpr</code> if it is possible. It not only prevent you from accidentally change their values but also hints compiler to do more optimizations."}, {"owner": {"reputation": 59234, "user_id": 496161, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c425873f547d93f4079ca252b42a886d?s=128&d=identicon&r=PG", "display_name": "TartanLlama", "link": "https://stackoverflow.com/users/496161/tartanllama"}, "edited": false, "score": 0, "creation_date": 1452094560, "post_id": 34636037, "comment_id": 57018904, "body": "I think the example you really want is one in which your loop conditions are large arithmetic expressions which will not change over the iterations. You&#39;d be best served to edit the question with such an example."}], "answers": [{"comments": [{"owner": {"reputation": 1195, "user_id": 4449975, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/27FI8.jpg?s=128&g=1", "display_name": "B98", "link": "https://stackoverflow.com/users/4449975/b98"}, "edited": false, "score": 0, "creation_date": 1452092483, "post_id": 34636140, "comment_id": 57017451, "body": "Make <code>maxVal</code> a <code>const</code> in addition. This, then, is also the style traditionally seen with iterator&#39;s ends. It prevents re-evaluation on each iteration of the <code>for</code> loop with ease."}, {"owner": {"reputation": 23, "user_id": 4251785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2760a1deea66734dca056498f45262d?s=128&d=identicon&r=PG&f=1", "display_name": "frischkase", "link": "https://stackoverflow.com/users/4251785/frischkase"}, "reply_to_user": {"reputation": 1195, "user_id": 4449975, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/27FI8.jpg?s=128&g=1", "display_name": "B98", "link": "https://stackoverflow.com/users/4449975/b98"}, "edited": false, "score": 0, "creation_date": 1452169686, "post_id": 34636140, "comment_id": 57055353, "body": "@B98 Does this, in short, mean that there is no performance loss in declaring extra variables if they are <code>const</code>, but it might be better to avoid extra declarations if they are not <code>const</code> ?"}, {"owner": {"reputation": 1195, "user_id": 4449975, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/27FI8.jpg?s=128&g=1", "display_name": "B98", "link": "https://stackoverflow.com/users/4449975/b98"}, "reply_to_user": {"reputation": 23, "user_id": 4251785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2760a1deea66734dca056498f45262d?s=128&d=identicon&r=PG&f=1", "display_name": "frischkase", "link": "https://stackoverflow.com/users/4251785/frischkase"}, "edited": false, "score": 1, "creation_date": 1452172883, "post_id": 34636140, "comment_id": 57057536, "body": "@frischkase Depends on compiler and switches, but while I think that <code>const</code> might increase chances of triggering optimization, not declaring a variable and lumping much code together instead looks like premature optimization.  If needed, only the object code will reveal actual requirements, but today&#39;s optimizers do follow flows, and optimize.\u2014Both <code>const</code> and a variable introduce <i>names</i> that can express intent, or abbreviate, <code>const</code> adding const-ness to the meaning. I think performance isn&#39;t the dominating issue in this case, logic and style might be."}], "tags": [], "owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "is_accepted": true, "score": 3, "last_activity_date": 1452092215, "creation_date": 1452092215, "answer_id": 34636140, "question_id": 34636037, "link": "https://stackoverflow.com/questions/34636037/should-variable-declarations-always-be-avoided-in-c/34636140#34636140", "title": "Should variable declarations always be avoided in C++?", "body": "<blockquote>\n  <p>Does this affect dramatically the performance or can the compiler optimize it?</p>\n</blockquote>\n\n<p>Totally depends: </p>\n\n<p>If <code>long_arithmetic_expresion()</code> and <code>even_longer_expression()</code> are marked as <code>constexpr</code> and not likely to change during runtime, the compiler can optimize out recurring calls to these functions.</p>\n\n<p>Otherwise it might be better to use the variables being initialized once.</p>\n"}, {"tags": [], "owner": {"reputation": 4964, "user_id": 556899, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0620f543129132d44fef456b3ab31a39?s=128&d=identicon&r=PG", "display_name": "stgatilov", "link": "https://stackoverflow.com/users/556899/stgatilov"}, "is_accepted": false, "score": 1, "last_activity_date": 1452538188, "creation_date": 1452538188, "answer_id": 34728852, "question_id": 34636037, "link": "https://stackoverflow.com/questions/34636037/should-variable-declarations-always-be-avoided-in-c/34728852#34728852", "title": "Should variable declarations always be avoided in C++?", "body": "<p>Unless you disable optimizations, the following codes would almost surely show absolutely the same performance on a modern compiler (given that expressions are obviously independent):</p>\n\n<pre><code>// save to temporary minVal variable\nint minVal = long_arithmetic_expresion();\nint maxVal = even_longer_expression();\nfor (int i = minVal; i &lt; maxVal; i++) {\n    ...\n}\n\n// avoid creating temporary minVal variable\nint maxVal = even_longer_expression();\nfor (int i = long_arithmetic_expresion(); i &lt; maxVal; i++) {\n    ...\n}\n</code></pre>\n\n<p>But the first version is often more readable =)</p>\n\n<p>The reason is: <a href=\"https://en.wikipedia.org/wiki/Copy_propagation\" rel=\"nofollow\">copy propagation</a> for variables of fundamental types is trivial to do for a compiler. So in the first version compiler would remove <code>i = minVal</code> assignment.</p>\n"}], "owner": {"reputation": 23, "user_id": 4251785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2760a1deea66734dca056498f45262d?s=128&d=identicon&r=PG&f=1", "display_name": "frischkase", "link": "https://stackoverflow.com/users/4251785/frischkase"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 145, "favorite_count": 0, "accepted_answer_id": 34636140, "answer_count": 2, "score": 2, "last_activity_date": 1452538188, "creation_date": 1452091961, "last_edit_date": 1452093066, "question_id": 34636037, "link": "https://stackoverflow.com/questions/34636037/should-variable-declarations-always-be-avoided-in-c", "title": "Should variable declarations always be avoided in C++?", "body": "<p>Sometimes I declare \"one use\" variables in my code for clarity. Does this affect dramatically the performance or can the compiler optimize it?</p>\n\n<p>For example, I would tend to do:</p>\n\n<pre><code>int minVal = long_arithmetic_expresion();\nint maxVal = even_longer_expression();\n\nfor (int i = minVal; i &lt; maxVal; i++)\n    {\n        // Do stuff not related to minVal or maxVal\n    }\n\ndouble part1 = 4*sqrt(something)* ... // Very long thing\ndouble part2 = 5*sqrt(something else)* ... // Very long thing\n\ndouble interestingValue = part1 / part2; // This is the only interesting variable for later\n</code></pre>\n\n<p>Rather than:</p>\n\n<pre><code>for (int i = long_arithmetic_expresion(); i &lt; even_longer_expression(); i++)\n    {\n        // Do stuff not related to minVal or maxVal\n    }\n\ndouble interestingValue = (4*sqrt(whatever)* ...) / (5*sqrt(something else)* ...);\n</code></pre>\n\n<p>This for loop would be contained in a function that will be called many times, so even small performance gain would be relevant in my case.</p>\n\n<p><strong>Note:</strong></p>\n\n<p>As it was quickly pointed out, there is a chance that <em>even_longer_expression()</em> could be evaluated at every step of the loop, which is of course not good.\nFor clarity, my question relates to the fact of declaring one-use variables.\nI have added a bit more code after the loop. I refer to cases like the variables <em>part1</em> and <em>part2</em>.</p>\n"}, {"tags": ["c++", "visual-studio", "visual-studio-2015", "keyboard-shortcuts", "code-snippets"], "comments": [{"owner": {"reputation": 127019, "user_id": 59303, "user_type": "moderator", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/gIt1g.png?s=128&g=1", "display_name": "ChrisF", "link": "https://stackoverflow.com/users/59303/chrisf"}, "edited": false, "score": 0, "creation_date": 1452092042, "post_id": 34636036, "comment_id": 57017100, "body": "There&#39;s <a href=\"https://www.jetbrains.com/resharper-cpp/\" rel=\"nofollow noreferrer\">jetbrains.com/resharper-cpp</a> Though if that&#39;s what you&#39;re after this is a tool request and therefore off topic."}, {"owner": {"reputation": 97, "user_id": 240463, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/800dbbcf4b4216104c478d4197df424d?s=128&d=identicon&r=PG", "display_name": "Lofty Lion", "link": "https://stackoverflow.com/users/240463/lofty-lion"}, "reply_to_user": {"reputation": 127019, "user_id": 59303, "user_type": "moderator", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/gIt1g.png?s=128&g=1", "display_name": "ChrisF", "link": "https://stackoverflow.com/users/59303/chrisf"}, "edited": false, "score": 2, "creation_date": 1452092177, "post_id": 34636036, "comment_id": 57017209, "body": "I am using ReSharper C++ and it is a great tool, but the desired feature is only available in ReSharper (for C#)!"}, {"owner": {"reputation": 97, "user_id": 240463, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/800dbbcf4b4216104c478d4197df424d?s=128&d=identicon&r=PG", "display_name": "Lofty Lion", "link": "https://stackoverflow.com/users/240463/lofty-lion"}, "reply_to_user": {"reputation": 127019, "user_id": 59303, "user_type": "moderator", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/gIt1g.png?s=128&g=1", "display_name": "ChrisF", "link": "https://stackoverflow.com/users/59303/chrisf"}, "edited": false, "score": 0, "creation_date": 1452092594, "post_id": 34636036, "comment_id": 57017533, "body": "..Unless many others have the same problem and it is possible to put it in place without having to write a plugin (but of any such facilities I am not aware) only then it shall be a tool request. ;)"}, {"owner": {"reputation": 6085, "user_id": 425871, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/58MZp.jpg?s=128&g=1", "display_name": "Steve", "link": "https://stackoverflow.com/users/425871/steve"}, "edited": false, "score": 2, "creation_date": 1452093626, "post_id": 34636036, "comment_id": 57018222, "body": "Send a feature request to Jetbrains. The C++ product is still pretty new, and just recently got the &quot;disable once with comment&quot; feature (to suppress warnings) that C# had but C++ didn&#39;t."}, {"owner": {"reputation": 23051, "user_id": 84507, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34b5ec4a143dd4a12a8be0a65f71b0df?s=128&d=identicon&r=PG", "display_name": "Sergey Vlasov", "link": "https://stackoverflow.com/users/84507/sergey-vlasov"}, "edited": false, "score": 2, "creation_date": 1452189585, "post_id": 34636036, "comment_id": 57069459, "body": "You can use Visual Commander for macros code in VS 2015."}, {"owner": {"reputation": 1589, "user_id": 5652483, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bJiX1.jpg?s=128&g=1", "display_name": "Scott Hutchinson", "link": "https://stackoverflow.com/users/5652483/scott-hutchinson"}, "edited": false, "score": 0, "creation_date": 1454596075, "post_id": 34636036, "comment_id": 58122823, "body": "A Shift+Enter shortcut for End then ; would make typing every line of code easier in C++ or C#."}, {"owner": {"reputation": 97, "user_id": 240463, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/800dbbcf4b4216104c478d4197df424d?s=128&d=identicon&r=PG", "display_name": "Lofty Lion", "link": "https://stackoverflow.com/users/240463/lofty-lion"}, "reply_to_user": {"reputation": 1589, "user_id": 5652483, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bJiX1.jpg?s=128&g=1", "display_name": "Scott Hutchinson", "link": "https://stackoverflow.com/users/5652483/scott-hutchinson"}, "edited": false, "score": 0, "creation_date": 1454596442, "post_id": 34636036, "comment_id": 58123110, "body": "@ScottHutchinson for C++ default shortcut is Shift + <b>Ctrl</b> + Enter and then sometimes (or quite often) an extra newline is not particularly wanted :/. EDIT: just tried editing C# and it actually adds &#39;;&#39;. Very kind of you C# programmers but sometimes the greatest features of yours are not available in C++ editor ;)."}, {"owner": {"reputation": 1589, "user_id": 5652483, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bJiX1.jpg?s=128&g=1", "display_name": "Scott Hutchinson", "link": "https://stackoverflow.com/users/5652483/scott-hutchinson"}, "edited": false, "score": 1, "creation_date": 1454598259, "post_id": 34636036, "comment_id": 58124439, "body": "Thanks to Sergey, I have Shift+Enter working for C++ (and C#) by recording a macro using his freemium Visual Commander extension for VS."}], "owner": {"reputation": 97, "user_id": 240463, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/800dbbcf4b4216104c478d4197df424d?s=128&d=identicon&r=PG", "display_name": "Lofty Lion", "link": "https://stackoverflow.com/users/240463/lofty-lion"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 537, "favorite_count": 1, "answer_count": 0, "score": 2, "last_activity_date": 1502439975, "creation_date": 1452091954, "last_edit_date": 1502439975, "question_id": 34636036, "link": "https://stackoverflow.com/questions/34636036/complete-statement-in-visual-studio-2015-with-a-semicolon-at-the-end-and-a-new", "title": "Complete statement in Visual Studio (2015) with a semicolon at the end and a newline", "body": "<p>With automatic brace completion in place it would be nice to automate the <code>&lt;end&gt;-';'-&lt;enter&gt;</code> with <em>one</em> shortcut (also to save the trouble for the little finger), for instance to end the statement after one types 'c' in <code>Somefunction(AnotherFunction(a * (b + c)))</code>.</p>\n\n<p>There are solutions for C# (VS Productivity Tools, ReSharper) as mentioned in <a href=\"http://dailydotnettips.com/2011/02/23/useshiftenter/\" rel=\"nofollow\">http://dailydotnettips.com/2011/02/23/useshiftenter/</a> while I am yet to find any for <strong>C++</strong>. </p>\n\n<p>Since macros are removed starting from VS2012, I wonder if there is an alternative to accomplish this without having to write an extension <em>yourself</em>?</p>\n"}]