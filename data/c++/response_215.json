[{"tags": ["java", "c++", "c", "linux"], "comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1550722568, "post_id": 54797006, "comment_id": 96375640, "body": "Interesting NaN info, yet what is the question/goal?"}], "answers": [{"comments": [{"owner": {"reputation": 406, "user_id": 4029250, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4a1142f185334c43f0b8821ddd38c7a?s=128&d=identicon&r=PG&f=1", "display_name": "klog", "link": "https://stackoverflow.com/users/4029250/klog"}, "edited": false, "score": 0, "creation_date": 1550707497, "post_id": 54797140, "comment_id": 96372123, "body": "that seems like a reasonable case, since it would only be checked in the event of a bad parse in the first place, thus we wouldn&#39;t be checking for every valid parse. I&#39;ll wait a little while to see if anyone has anything else to say on the matter."}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "reply_to_user": {"reputation": 406, "user_id": 4029250, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4a1142f185334c43f0b8821ddd38c7a?s=128&d=identicon&r=PG&f=1", "display_name": "klog", "link": "https://stackoverflow.com/users/4029250/klog"}, "edited": false, "score": 0, "creation_date": 1550708066, "post_id": 54797140, "comment_id": 96372249, "body": "It might be worth tracking down what other libcs use for those values (I think the Windows CRT uses something like <code>1.#QNAN</code>?) and accounting for them too."}, {"owner": {"reputation": 406, "user_id": 4029250, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4a1142f185334c43f0b8821ddd38c7a?s=128&d=identicon&r=PG&f=1", "display_name": "klog", "link": "https://stackoverflow.com/users/4029250/klog"}, "edited": false, "score": 0, "creation_date": 1550809294, "post_id": 54797140, "comment_id": 96415215, "body": "The functionality of how we are passing floating-point has been bothering me for a while. Basically I\u2019m at the mercy of how it\u2019s been implemented in the languages and I don\u2019t see changes coming to accommodate either side. Your answer covers my question given that Java and libc are just different. That said, I think handling the format on the C side of things would potentially be more efficient as I\u2019d be doing binary comparison via isnan and isfinite as opposed to string comparisons in Java, but on Java the comparison would only occur if parsing fails first."}], "tags": [], "owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "is_accepted": true, "score": 1, "last_activity_date": 1550707111, "creation_date": 1550707111, "answer_id": 54797140, "question_id": 54797006, "link": "https://stackoverflow.com/questions/54797006/double-value-that-is-nan-output-as-a-string-as-nan/54797140#54797140", "title": "Double value that is NaN output as a string as &quot;nan&quot;", "body": "<p>Why not just use something like this in your java code for parsing a double?</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>double parseDouble(String s) throws NumberFormatException {\n  try {\n    return Double.valueOf(s);\n  } catch (NumberFormatException e) {\n    if (s.equalsIgnoreCase(\"nan\")) {\n      return Double.NaN;\n    } else if (s.equalsIgnoreCase(\"inf\") || s.equalsIgnoreCase(\"+inf\")) {\n      return Double.POSITIVE_INFINITY;\n    } else if (s.equalsIgnoreCase(\"-inf\")) {\n      return Double.NEGATIVE_INFINITY;\n    } else {\n      throw e; // Invalid string\n    }\n  }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "is_accepted": false, "score": 1, "last_activity_date": 1550809966, "last_edit_date": 1592644375, "creation_date": 1550739999, "answer_id": 54803099, "question_id": 54797006, "link": "https://stackoverflow.com/questions/54797006/double-value-that-is-nan-output-as-a-string-as-nan/54803099#54803099", "title": "Double value that is NaN output as a string as &quot;nan&quot;", "body": "<p>The Linux case is (a) correct behaviour according to <a href=\"http://port70.net/%7Ensz/c/c11/n1570.html#7.21.6.1p8\" rel=\"nofollow noreferrer\">ISO/IEC 9899:2001</a>:</p>\n<blockquote>\n<p>[<code>%e</code>, <code>%E</code>]</p>\n<p>[...] A <code>double</code> argument representing an infinity or NaN is converted in the style of an <code>f</code> or <code>F</code> conversion specifier.</p>\n</blockquote>\n<p>and the text for</p>\n<blockquote>\n<p>A double argument representing an infinity is converted in one of the styles <code>[-]inf</code> or <code>[-]infinity</code> -- which style is implementation-defined. A double argument representing a NaN is converted in one of the styles <code>[-]nan</code> or <code>[-]nan(n-char-sequence)</code> -- which style, and the meaning of any n-char-sequence, is implementation-defined. The F conversion specifier produces <code>INF</code>, <code>INFINITY</code>, or <code>NAN</code> instead of <code>inf</code>, <code>infinity</code>, or <code>nan</code>, respectively.277)</p>\n</blockquote>\n<p>I.e. the safest in Java would be to try to parse the double, and if that fails, lowercase the <code>String</code> and test the existence of <code>-</code> as the first character and the remainder after the possible sign with  <code>.startsWith(&quot;nan&quot;)</code> and <code>.startsWith(&quot;inf&quot;)</code></p>\n<p>Of course this doesn't help if you need to support the non-standards-conforming Windows C runtimes.</p>\n"}, {"tags": [], "owner": {"reputation": 406, "user_id": 4029250, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4a1142f185334c43f0b8821ddd38c7a?s=128&d=identicon&r=PG&f=1", "display_name": "klog", "link": "https://stackoverflow.com/users/4029250/klog"}, "is_accepted": false, "score": 0, "last_activity_date": 1550810224, "creation_date": 1550810224, "answer_id": 54820150, "question_id": 54797006, "link": "https://stackoverflow.com/questions/54797006/double-value-that-is-nan-output-as-a-string-as-nan/54820150#54820150", "title": "Double value that is NaN output as a string as &quot;nan&quot;", "body": "<p>A potentially more universal option would be to convert the floating-point number into hex when written to redis and then converted back when read. This would ensure that there wouldn't be any precision loss by converting it to a decimal string, but also cover the +/-Inf and NaN cases.</p>\n\n<p>This is possible since both sides are using IEEE floating-point numbers.</p>\n"}], "owner": {"reputation": 406, "user_id": 4029250, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4a1142f185334c43f0b8821ddd38c7a?s=128&d=identicon&r=PG&f=1", "display_name": "klog", "link": "https://stackoverflow.com/users/4029250/klog"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 824, "favorite_count": 0, "accepted_answer_id": 54797140, "answer_count": 3, "score": 0, "last_activity_date": 1550810224, "creation_date": 1550706188, "last_edit_date": 1550723374, "question_id": 54797006, "link": "https://stackoverflow.com/questions/54797006/double-value-that-is-nan-output-as-a-string-as-nan", "title": "Double value that is NaN output as a string as &quot;nan&quot;", "body": "<p>I have a C/C++ application that writes numeric values into redis as a string. I also have a Java application that will read these values out of redis. On occasion for valid reasons, we end up with a floating-point value that has a value of <code>NaN</code> or <code>-NaN</code>. However, when using <code>sprintf(charPtr, \"%e\", dblVal);</code>, the value is output as <code>nan</code>. I also tried the same statement with <code>%E</code>, and it resulted in <code>NAN</code>. When Java attempts to parse via <code>Float.parseFloat()</code> or <code>Double.parseDouble</code> it throws a NumberFormatException.</p>\n\n<p>This application has been ported from Solaris to Linux and subsequently gone through some Linux upgrades and at some point \"NaN\" became \"nan\". I can't say for certain on what upgrade ultimately introduced this behavior.</p>\n\n<p>I have gone through an excercise utilizing cmath's <code>std::isfinite()</code> and <code>std::isnan()</code> and can ultimately define my own valid <code>(-)NaN</code> or <code>(-)Infinity</code> strings, but this doesn't seem like I need to be reinventing normalized NaN and Infinity strings. Infinity may be a bit different as the C side outputs <code>inf</code> yet Java wants <code>Infinity</code>.</p>\n\n<p>Ultimately I need to be able to decode data written by the C++ app in Java. nan and inf cannot be decoded by Java as written. My focus was on NaN, but Infinity is a case that should be covered. </p>\n"}, {"tags": ["c++", "memory", "data-structures", "alignment"], "comments": [{"owner": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "edited": false, "score": 0, "creation_date": 1550711668, "post_id": 54796514, "comment_id": 96373048, "body": "Your allocation for <code>buffer</code> is not guaranteed to return 64-byte aligned memory unless you provide a custom <code>::operator new</code> that does that.  That can throw off what you&#39;re doing."}], "answers": [{"tags": [], "owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "is_accepted": true, "score": 0, "last_activity_date": 1550774519, "last_edit_date": 1550774519, "creation_date": 1550770649, "answer_id": 54813105, "question_id": 54796514, "link": "https://stackoverflow.com/questions/54796514/c-align-5-byte-structs-to-cacheline/54813105#54813105", "title": "C++ Align 5 byte structs to cacheline", "body": "<p>I'm assuming that you'll create this buffer structure once and that you then populated it over and over again for the FPGA to read (or vice-a-versa). If so, this layout should work:</p>\n\n<pre><code>constexpr size_t cacheline_size = 64;\nconstexpr size_t num_elements = 1000;\n\nstruct __attribute__ ((packed)) edg_t  {\n    /*volatile*/ uint32_t dst;   // volatile if the FPGA writes too\n    /*volatile*/ uint8_t weight;\n};\n\nconstexpr size_t elements_per_cachline = cacheline_size/sizeof(edg_t);\nconstexpr size_t num_cachelines = num_elements / elements_per_cachline + 1;\n\nstruct alignas(cacheline_size) cacheline_t {\n    std::array&lt;edg_t, elements_per_cachline&gt; edg;\n    inline auto begin() { return edg.begin(); }\n    inline auto end() { return edg.end(); }\n};\n\nstruct cacheline_collection_t {\n    std::array&lt;cacheline_t, num_cachelines&gt; cl;\n    inline void* address_for_fpga() { return this; }\n    inline auto begin() { return cl.begin(); }\n    inline auto end() { return cl.end(); }\n};\n\nint main() {\n    cacheline_collection_t clc;\n    std::cout &lt;&lt; \"edg_t                 : \"\n       &lt;&lt; alignof(edg_t) &lt;&lt; \" \" &lt;&lt; sizeof(clc.cl[0].edg[0]) &lt;&lt; \"\\n\";\n    std::cout &lt;&lt; \"cacheline_t           : \"\n       &lt;&lt; alignof(cacheline_t) &lt;&lt; \" \" &lt;&lt; sizeof(clc.cl[0]) &lt;&lt; \"\\n\";\n    std::cout &lt;&lt; \"cacheline_collection_t: \"\n       &lt;&lt; alignof(cacheline_collection_t) &lt;&lt; \" \" &lt;&lt; sizeof(clc) &lt;&lt; \"\\n\";\n\n    // access\n    for(auto&amp; cl : clc) {\n        for(auto&amp; edg : cl) {\n            std::cout &lt;&lt; edg.dst &lt;&lt; \" \" &lt;&lt; (unsigned)edg.weight &lt;&lt; \"\\n\";\n        }\n    }\n}\n</code></pre>\n\n<p>The <a href=\"https://godbolt.org/z/yb-i9G\" rel=\"nofollow noreferrer\">assembly @ godbolt</a> looks nice. The inner loop has been completely inlined to 12 code blocks where it adds 5 to the <code>rax</code> offset for each block. Then it goes to the next cacheline (conditionally) in 3 operations:</p>\n\n<pre><code>    add     rax, 64\n    cmp     rax, rcx\n    jne     .LBB0_1\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 10438746, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-GrGSHSsNnNA/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DUv4EGktUmaZCWmBLe8N6nd3Hi2Ow/mo/photo.jpg?sz=128", "display_name": "FrankObr", "link": "https://stackoverflow.com/users/10438746/frankobr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 574, "favorite_count": 0, "accepted_answer_id": 54813105, "answer_count": 1, "score": 1, "last_activity_date": 1550774519, "creation_date": 1550703052, "question_id": 54796514, "link": "https://stackoverflow.com/questions/54796514/c-align-5-byte-structs-to-cacheline", "title": "C++ Align 5 byte structs to cacheline", "body": "<p>I'm developing a CPU-FPGA co-processing framework, so I need complete control over the alignment of my data. I have a data structure that only requires 5 bytes:</p>\n\n<pre><code>typedef struct __attribute__ ((packed))  {\n    uint32_t dst;\n    uint8_t weight;\n} edg_t;\n</code></pre>\n\n<p>My FPGA interface can read at 1 cache-line (64 bytes) per cycle (200 million reads / second). It is critical to my performance that I cram as many elements into one cache-line, so padding the struct is out of the question.</p>\n\n<p>5 bytes : 12 elements / read<br>\n8 bytes : 8 elements / read (padded)<br>\npadding -> 1.5x performance reduction</p>\n\n<p>However, I cannot have a struct straddle the edge between cache-lines that requires that I build logic on the FPGA to constantly shift the read data.</p>\n\n<p>My current solution when building the buffer looks like this:</p>\n\n<pre><code>int num_elements = 1000;\nint num_cachelines = num_elements / 12 + 1;\n\nuint8_t* buffer = new uint8_t[num_cachelines * 64]\nuint8_t* buf_ptr = buffer - 4;\n\nfor (int i = 0; i &lt; num_elements; i++) {\n    if (i % 12 == 0) buf_ptr += 4; //skip the last 4 bytes of each cache-line\n\n    edg_t* edg_ptr = (edg_t*) buf_ptr;\n    edg_ptr-&gt;dst = i; //example, I have random generators here\n    edg_ptr-&gt;weight = i % 256;\n    buf_ptr++;\n\n}\n</code></pre>\n\n<p>Now that was fine when the FPGA was doing all the work on its own, now I want the FPGA and CPU to cooperate. this means that the CPU now has to read the buffer as well.</p>\n\n<p>I was wondering if there exists a better way to have the compiler handle the padding automatically or will I have to manually skip the bytes every-time like I did in the buffer creation code above?</p>\n"}, {"tags": ["c++", "function", "parameters"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1550702911, "post_id": 54796468, "comment_id": 96370827, "body": "Are you storing the callback or just calling it in <code>onClick</code> and discarding it when <code>onClick</code> is done?"}, {"owner": {"reputation": 53, "user_id": 10072740, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bc738b3070908da311958ec0953ee5b?s=128&d=identicon&r=PG&f=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/10072740/chris"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1550703040, "post_id": 54796468, "comment_id": 96370879, "body": "@NathanOliver I&#39;m storing it in a class and then calling it when the button click occurs. This is how I&#39;m storing it: <code>void(*onClickFunction)() = nullptr;</code>"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1550703157, "post_id": 54796468, "comment_id": 96370910, "body": "As far as I know there isn&#39;t a way to do that.  You&#39;re storage needs to have a defined type and there is no type that I know of that will store a function of any amount of parameters."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "reply_to_user": {"reputation": 156, "user_id": 6320853, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ae8f77e49b8f2e8bf9cf4e2d15601c5?s=128&d=identicon&r=PG&f=1", "display_name": "styphNate", "link": "https://stackoverflow.com/users/6320853/styphnate"}, "edited": false, "score": 0, "creation_date": 1550703745, "post_id": 54796468, "comment_id": 96371122, "body": "@styphNate not really identical in case you mean <a href=\"https://stackoverflow.com/questions/54698790/why-am-i-receiving-a-segmentation-fault-when-calling-a-stored-function-pointer\">this one</a>. That one was asking to fix code without giving enough context/mcve. This one something else"}], "answers": [{"tags": [], "owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "is_accepted": false, "score": 0, "last_activity_date": 1550703581, "creation_date": 1550703581, "answer_id": 54796612, "question_id": 54796468, "link": "https://stackoverflow.com/questions/54796468/how-can-i-create-a-function-that-takes-another-function-as-a-parameter-with-an-u/54796612#54796612", "title": "How can I create a function that takes another function as a parameter with an unknown number of arguments?", "body": "<p>How would you call the function if you dont know how many parameters it has? There are solutions for that, but why not keep it simple...</p>\n\n<p>Lets say you want to use either one of the two as callback:</p>\n\n<pre><code>void foo(std::string x) {}\nvoid bar(int x) {}\n</code></pre>\n\n<p>Then you can wrap them together with the parameters in a lambda and store it in a <code>std::function</code> like that:</p>\n\n<pre><code>#include &lt;string&gt;\n#include &lt;functional&gt;\n\nvoid foo(std::string x) {}\nvoid bar(int x) {}\n\nstruct caller {\n    std::function&lt;void()&gt; callback;\n    void call() { callback(); }\n};\n\nint main(){\n    caller c{ [](){ foo(\"test\"); }};\n    c.call();\n    caller d{ [](){ bar(1); }};\n    d.call();\n}\n</code></pre>\n\n<p>If the parameters to be passed are supposed to be more dynamic you need something more of course.</p>\n"}, {"comments": [{"owner": {"reputation": 53, "user_id": 10072740, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bc738b3070908da311958ec0953ee5b?s=128&d=identicon&r=PG&f=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/10072740/chris"}, "edited": false, "score": 0, "creation_date": 1550711110, "post_id": 54796844, "comment_id": 96372925, "body": "I get this error when doing something.onClick(&amp;callback, &quot;&quot;):   undefined reference to `void GuiButton::onClick&lt;void (*)(), char const (&amp;) [1]&gt;(void (*&amp;&amp;)(), char const (&amp;) [1])&#39;"}], "tags": [], "owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "is_accepted": false, "score": 1, "last_activity_date": 1550705465, "last_edit_date": 1550705465, "creation_date": 1550705053, "answer_id": 54796844, "question_id": 54796468, "link": "https://stackoverflow.com/questions/54796468/how-can-i-create-a-function-that-takes-another-function-as-a-parameter-with-an-u/54796844#54796844", "title": "How can I create a function that takes another function as a parameter with an unknown number of arguments?", "body": "<p>You can just capture the supplied arguments in a lambda. This can't be stored in a function pointer, so use <code>std::function</code></p>\n\n<pre><code>class Something\n{\npublic:\n    template &lt;typename Func, typename ... Args\n    void onClick(Func&amp;&amp; func, Args&amp;&amp; ... args)\n    {\n        m_onClick = [=]{ func(args...); };\n    }\nprivate:\n    std::function&lt;void()&gt; m_onClick;\n    // call m_onClick somewhere\n};\n\nint main () {\n    Something something;\n    something.onClick(&amp;callback, \"a string\", 123);\n}\n</code></pre>\n"}], "owner": {"reputation": 53, "user_id": 10072740, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bc738b3070908da311958ec0953ee5b?s=128&d=identicon&r=PG&f=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/10072740/chris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1550705465, "creation_date": 1550702801, "question_id": 54796468, "link": "https://stackoverflow.com/questions/54796468/how-can-i-create-a-function-that-takes-another-function-as-a-parameter-with-an-u", "title": "How can I create a function that takes another function as a parameter with an unknown number of arguments?", "body": "<p>I'm creating an <code>onClick</code> function. The premise is that when a button is clicked, It will call a function like so:</p>\n\n<pre><code>// This connects the callback to the button class method named \"something\"\nsomething.onClick(&amp;callback, \"a string\", 123);\n\n// This is called when the button is clicked\ncallback(\"a string\", 123);\n</code></pre>\n\n<p>I'm already using a function pointer to call the function <code>callback</code>, however I don't know how to accept a variable number of arguments. The API I want is exactly like I specified above: the first parameter is the function, and each subsequent parameter is an argument to be passed. So far I've thought about using boost::bind, but am unable to figure out how that will fit in with what I'm attempting.</p>\n"}, {"tags": ["c++", "arrays", "coordinates"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 3, "creation_date": 1550703221, "post_id": 54796372, "comment_id": 96370934, "body": "<code>if(!fileB.good())</code> is probably not what you really want to check, IMO that should be <code>if(fileB.good())</code>. Debugging your code line by line would probably have been faster than formulate a question here."}, {"owner": {"reputation": 3298, "user_id": 8928024, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/75f4b1f5d87975964979ce2718af1ae9?s=128&d=identicon&r=PG&f=1", "display_name": "ZF007", "link": "https://stackoverflow.com/users/8928024/zf007"}, "edited": false, "score": 0, "creation_date": 1550704617, "post_id": 54796372, "comment_id": 96371363, "body": ".. I concur with user \u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6 that adding a &quot;!&quot; was a bad idea. &quot;fluidics flows&quot;... have a good one."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 11092711, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-tZSLvCp457A/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQMK_UDmC9tgGHN1RD-Q6aG5C_fvdA/mo/photo.jpg?sz=128", "display_name": "Paula", "link": "https://stackoverflow.com/users/11092711/paula"}, "edited": false, "score": 0, "creation_date": 1550715925, "post_id": 54796856, "comment_id": 96374022, "body": "Thank you for your explanation. It was super useful to understand my problem. Now, it works well!."}], "tags": [], "owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "is_accepted": false, "score": 1, "last_activity_date": 1550739436, "last_edit_date": 1550739436, "creation_date": 1550705121, "answer_id": 54796856, "question_id": 54796372, "link": "https://stackoverflow.com/questions/54796372/read-a-dat-file-and-create-an-array-c/54796856#54796856", "title": "Read a .dat File and create an array C++", "body": "<p>The problem is that after you've counted the number of lines you are at the end of the file, so there is nothing more to read. A file doesn't reposition itself back to the beginning automatically. You have to tell the file to go back to the beginning.</p>\n\n<p>A second similar problem is that when you get to the end of your file the <code>getline</code> function fails (because there's nothing more to read). That puts your file into an <em>error state</em> when nothing will work until you clear the error state.</p>\n\n<p>Finally the call to <code>!fileB.good()</code> is unecessary. The file will never be good at this point, again this is because <code>getline</code> has failed.</p>\n\n<p>Try this code</p>\n\n<pre><code>while (getline(fileB, line)) //contador de filas\n{\n    ++counter;\n}\nfileB.clear(); // clear the error state\nfileB.seekg(0); // go back to the beginning of the file\n\nint current_number = 0;\nwhile (fileB &gt;&gt; current_number)\n{\n    numbers.push_back(current_number);\n}\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 11092711, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-tZSLvCp457A/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQMK_UDmC9tgGHN1RD-Q6aG5C_fvdA/mo/photo.jpg?sz=128", "display_name": "Paula", "link": "https://stackoverflow.com/users/11092711/paula"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 264, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1550739436, "creation_date": 1550702310, "question_id": 54796372, "link": "https://stackoverflow.com/questions/54796372/read-a-dat-file-and-create-an-array-c", "title": "Read a .dat File and create an array C++", "body": "<p>I try to read a .dat file with a list of coordinates X and Y. My code work to count the lines in the file but it doesn't work to read the coordinates correctly. In the output just show me the number of lines in the .dat file, but it doesn't show me the coordinates. .dat file has 2 column and more than 5 rows (I have many files with different amount of coordinates). Any help is super welcome, i am very new in C++.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;string&gt;\n#include &lt;vector&gt;\n#include &lt;sstream&gt;\n\nusing namespace std;\n\nint main() {\n\n    std::vector&lt;int&gt; numbers;\n\n    ifstream fileB;\n    const int SIZE=10;\n    char filas_dat [SIZE];\n\n    fileB.open(\"Verticesfixed_cell1slc44.dat\");\n\n    std::string line;\n    int counter=0;\n    while (getline(fileB, line)) //contador de filas\n    {\n        ++counter;\n    }\n\n    if(!fileB.good())\n    {\n        int current_number = 0;\n        while (fileB &gt;&gt; current_number){\n            numbers.push_back(current_number);}\n\n        fileB.close();\n        cout &lt;&lt; \"The numbers are: \";\n        for (int count = 0; count &lt; numbers.size(); count++){\n            cout &lt;&lt; numbers[count] &lt;&lt; \" \";}\n\n        cout &lt;&lt; endl;\n    }\n    else \n    {\n       cout &lt;&lt; \"Error!\";\n    }\nreturn 0\n}\n</code></pre>\n"}, {"tags": ["c++", "csv"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1550702285, "post_id": 54796324, "comment_id": 96370616, "body": "What did you observe when stepping throuch your code line by line with the debugger?"}, {"owner": {"reputation": 3, "user_id": 10708637, "user_type": "registered", "profile_image": "https://graph.facebook.com/528958650953264/picture?type=large", "display_name": "John Real", "link": "https://stackoverflow.com/users/10708637/john-real"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1550702538, "post_id": 54796324, "comment_id": 96370694, "body": "I&#39;m sorry I&#39;m a student just learning C++ have not learned to use the debugger yet :("}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1550702614, "post_id": 54796324, "comment_id": 96370722, "body": "Time to start learning it. That&#39;s a pretty essential skill doing any kind of software development. If you use an IDE, it should be a piece of cake for any beginner to grasp debugging doable in 2 - 3 days at least for the most frequent used things like stepping, watching variables, breakpoints etc."}, {"owner": {"reputation": 3, "user_id": 10708637, "user_type": "registered", "profile_image": "https://graph.facebook.com/528958650953264/picture?type=large", "display_name": "John Real", "link": "https://stackoverflow.com/users/10708637/john-real"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1550702942, "post_id": 54796324, "comment_id": 96370838, "body": "I&#39;ll get on that immediately. This is actually for my software development class but debugging is not until later in the semester"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1550703044, "post_id": 54796324, "comment_id": 96370881, "body": "Sounds like your teacher is incompetent. They should have covered that together with the 1st <i>Hello World!</i> program teaching you."}, {"owner": {"reputation": 3, "user_id": 10708637, "user_type": "registered", "profile_image": "https://graph.facebook.com/528958650953264/picture?type=large", "display_name": "John Real", "link": "https://stackoverflow.com/users/10708637/john-real"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1550705057, "post_id": 54796324, "comment_id": 96371507, "body": "feelsbadman.jpeg"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1550705768, "post_id": 54796324, "comment_id": 96371710, "body": "I once had an instructor state, &quot;If you write your programs correctly you don&#39;t have to debug.&quot; 100% accurate, but still useless. Don&#39;t wait on the instructor or the lessons. The amount of time you invest now in learning the basics of debuggers will pay itself off in saved time before the instructor gets around to covering it. <a href=\"https://docs.microsoft.com/en-us/visualstudio/debugger/debugger-feature-tour?view=vs-2017\" rel=\"nofollow noreferrer\">This covers the Visual Studio debugger</a>, but they are all very similar in basic capabilities these days."}, {"owner": {"reputation": 3303, "user_id": 5859925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de386e94c47dfbffb5235306b1affc96?s=128&d=identicon&r=PG&f=1", "display_name": "Kunal Puri", "link": "https://stackoverflow.com/users/5859925/kunal-puri"}, "edited": false, "score": 0, "creation_date": 1550706618, "post_id": 54796324, "comment_id": 96371927, "body": "@JohnReal Will Input data be sorted according to date?"}], "owner": {"reputation": 3, "user_id": 10708637, "user_type": "registered", "profile_image": "https://graph.facebook.com/528958650953264/picture?type=large", "display_name": "John Real", "link": "https://stackoverflow.com/users/10708637/john-real"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 40, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1550710560, "creation_date": 1550702116, "last_edit_date": 1550710560, "question_id": 54796324, "link": "https://stackoverflow.com/questions/54796324/printing-columns-from-a-tsv-in-reverse-based-on-user-input-date-ranges", "title": "Printing columns from a TSV in reverse based on user input date ranges", "body": "<p>Hello I have a TSV in the following format</p>\n\n<pre><code>Date             EastStorage    EastElevation    WestStorage    WestElevation\n01/01/2018          59.94           574             32.67           574.33 \n01/02/2018          59.89           573.99          32.57           574.29\n01/03/2018          59.89           573.97          32.44           574.24\n01/04/2018          59.9            573.97          32.22           574.07\n</code></pre>\n\n<p>It goes on until 12/31/2018.\nNow I must output date ranges and WestElevation values in reverse order based on user input so on execution:</p>\n\n<pre><code>$ ./reverse-order\nEnter earlier date: 05/29/2018\nEnter later date: 06/02/2018\n\n06/02/2018  590.22 ft\n06/01/2018  590.23 ft\n05/31/2018  590.24 ft\n05/30/2018  590.26 ft\n05/29/2018  590.32 ft\n</code></pre>\n\n<p>The following code outputs 12/31/18's corresponding WestElevation value over and over again.</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;cstdlib&gt;\n#include &lt;climits&gt;\nusing namespace std;\nint main()\n{\n    string date;\n    string dates[365];\n    string begindate;\n    string enddate;\n    bool isworking = false;\n    double eastSt, eastEl, westSt, westEl;\n    double elevation[365];\n    for (int j = 0; j &lt; 365; j++) {\n        dates[j] = \"empty\";\n    }\n    cout &lt;&lt; \"Enter the earlier date: \" &lt;&lt; endl;\n    cin &gt;&gt; begindate;\n    cout &lt;&lt; \"Enter the later date: \" &lt;&lt; endl;\n    cin &gt;&gt; enddate;\n    ifstream fin(\"Current_Reservoir_Levels.tsv\");\n    if (fin.fail()) {\n        cerr &lt;&lt; \"File cannot be opened for reading.\" &lt;&lt; endl;\n        exit(1); // exit if failed to open the file\n    }\n    string junk; // new string variable\n    getline(fin, junk); // read one line from the file\n    while (fin &gt;&gt; date &gt;&gt; eastSt &gt;&gt; eastEl &gt;&gt; westSt &gt;&gt; westEl) {\n        // this loop reads the file line-by-line\n        // extracting 5 values on each iteration\n        fin.ignore(INT_MAX, '\\n'); //skips to the end of line,\n        //ignorring the remaining columns\n        for (int i = 0; i &lt; 365; i++) {\n            if (begindate == date) {\n                isworking = true;\n                if (begindate == enddate) {\n                    dates[i] = date;\n                    elevation[i] = westEl;\n\n                    isworking = false;\n                }\n            }\n            else if (enddate == date) {\n                dates[i] = date;\n                elevation[i] = westEl;\n                isworking = true;\n            }\n            if (isworking == true) {\n                dates[i] = date;\n                elevation[i] = westEl;\n            }\n        }\n    }\n    for (int a = 365; a &gt;= 0; a--) {\n        if (dates[a] != \"emtpy\" &amp;&amp; elevation[a] != 0) {\n            cout &lt;&lt; dates[a] &lt;&lt; \" \" &lt;&lt; elevation[a] &lt;&lt; endl;\n        }\n    }\n    fin.close();\n    return 0;\n}\n</code></pre>\n\n<p>I think using arrays to complete this task is probably the simplest way. But I think my logic in handling the input dates is a bit off for this specific case. How can I fix my code to achieve the desired output? </p>\n\n<p>Solution:</p>\n\n<pre><code>while(fin &gt;&gt; date &gt;&gt; eastSt &gt;&gt; eastEl &gt;&gt; westSt &gt;&gt; westEl) {\n\n    if(begindate==date)\n    {\n     inrange=true;\n    }\n    if(enddate==date)\n    {\n     elevation[i]=westEl;\n     dates[i]=date;\n     i++;\n     inrange=false;\n    }\n\n    if(inrange==true)\n    {\n     elevation[i]=westEl;\n     dates[i]=date;\n     i++;\n    }\nfin.ignore(INT_MAX, '\\n');\n\n}\nfor(int a=i-1; a&gt;=0; a--)\n{\n  {\n    cout&lt;&lt; dates[a]&lt;&lt;\" \"&lt;&lt; elevation[a]&lt;&lt;endl;\n  }\n\n}\nfin.close();\nreturn 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "json", "nlohmann-json"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1550702351, "post_id": 54796322, "comment_id": 96370641, "body": "What you&#39;re desiring is not valid JSON. Do you mean <code>{&quot;1&quot;:[811700988,797039],&quot;2&quot;:[797039,-1680733532]}</code>?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1550702422, "post_id": 54796322, "comment_id": 96370660, "body": "<code>jsonresult</code> should be a JSON object, not a JSON array."}, {"owner": {"reputation": 31, "user_id": 3712347, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34c430900585ed111297511b19804993?s=128&d=identicon&r=PG&f=1", "display_name": "user3712347", "link": "https://stackoverflow.com/users/3712347/user3712347"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1550707922, "post_id": 54796322, "comment_id": 96372217, "body": "@Barmar Yes that is the outcome I am looking for."}], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 3712347, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34c430900585ed111297511b19804993?s=128&d=identicon&r=PG&f=1", "display_name": "user3712347", "link": "https://stackoverflow.com/users/3712347/user3712347"}, "edited": false, "score": 0, "creation_date": 1550813650, "post_id": 54799146, "comment_id": 96416392, "body": "Yeah to_string() ended up being the solution so if anyone else is having the issue this is the answer! Thank you for the help."}], "tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": false, "score": 0, "last_activity_date": 1550722422, "creation_date": 1550722422, "answer_id": 54799146, "question_id": 54796322, "link": "https://stackoverflow.com/questions/54796322/c-json-key-variable-issue/54799146#54799146", "title": "C++ Json Key variable issue", "body": "<p>If you're using C++11 you can use <a href=\"http://www.cplusplus.com/reference/string/to_string/\" rel=\"nofollow noreferrer\"><code>to_string()</code></a> to convert the index to a string for use as the object key. And you can assign a vector to the property in the JSON object.</p>\n\n<pre><code>if (myvec[m] != 0 &amp;&amp; myvec[j] &gt; myvec[m]) {\n    vector&lt;int&gt; pair{myvec[j], myvec[m]};\n    jsonresult[to_string(j)] = pair;\n}\n</code></pre>\n\n<p><code>emplace_back()</code> is for appending to a JSON array, not object.</p>\n"}], "owner": {"reputation": 31, "user_id": 3712347, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34c430900585ed111297511b19804993?s=128&d=identicon&r=PG&f=1", "display_name": "user3712347", "link": "https://stackoverflow.com/users/3712347/user3712347"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 549, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1550722422, "creation_date": 1550702102, "last_edit_date": 1550721751, "question_id": 54796322, "link": "https://stackoverflow.com/questions/54796322/c-json-key-variable-issue", "title": "C++ Json Key variable issue", "body": "<p>I'm having an issue with my code for jSon object conversion. I am trying to write a loop that takes in a vector and if the vector has an inversion then store that in a jSon Object. The only real problem I am having is the correct output. I am getting an error when trying to use a variable as key value when expecting a string. My main question is how to do I convert my integer to a string so the code accepts it and prints properly?</p>\n\n<pre><code>for(auto j = 0; j &lt;= myvec.size(); j++){\n    m = j+1;\n    if(m &gt; myvec.size()){\n        break;\n    }\n    if(name == metad){\n        break;\n    }\n    if(myvec[m] != 0){\n        if(myvec[j] &gt; myvec[m]){\n            jcount = j;\n            jsonresult.emplace_back(nlohmann::json::object_t::value_type(j,{ myvec[j], myvec[m]}));\n            count++;\n        }\n</code></pre>\n\n<p>The main problem is in the emplace_back line where it will not let me use j as the proper key value resulting in the error </p>\n\n<pre><code>error: no matching function for call to \u2018std::pair&lt;const std::__cxx11::basic_string&lt;char&gt;, nlohmann::basic_json&lt;&gt; &gt;::pair(int&amp;, &lt;brace-enclosed initializer list&gt;)\u2019\n     jsonresult.emplace_back(nlohmann::json::object_t::value_type(j,{myvec[j], myvec[m]}));\n</code></pre>\n\n<p>So I guess my question is how do I get it to store the dynamic variable correctly so my code then outputs this</p>\n\n<pre><code>1\":[811700988,797039],\"2\":[797039,-1680733532]\n</code></pre>\n\n<p>instead of </p>\n\n\n\n<pre><code>[\n  2,\n  797039,\n  -1680733532\n]\n</code></pre>\n\n<p>Appreciate any help, thank you!</p>\n"}, {"tags": ["c++", "opencv", "raspberry-pi"], "comments": [{"owner": {"reputation": 144839, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 2, "creation_date": 1550702462, "post_id": 54796317, "comment_id": 96370677, "body": "Use the full path on the filename rather than a tilde (<code>~</code>), e.g. <code>&#47;Users&#47;fred&#47;opencv_test&#47;img.jpg</code>"}, {"owner": {"reputation": 71, "user_id": 4023576, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4cf4f41ced17639dd2bc2b41ad5c5cf6?s=128&d=identicon&r=PG&f=1", "display_name": "SykeJ", "link": "https://stackoverflow.com/users/4023576/sykej"}, "reply_to_user": {"reputation": 144839, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1550703738, "post_id": 54796317, "comment_id": 96371119, "body": "This works - thanks!"}, {"owner": {"reputation": 144839, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 1, "creation_date": 1550703876, "post_id": 54796317, "comment_id": 96371168, "body": "Cool - good luck with your project! The tilde didn&#39;t work because the shell normally expands that for you, but you aren&#39;t using a shell when you call <code>cv::imread()</code>"}], "owner": {"reputation": 71, "user_id": 4023576, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4cf4f41ced17639dd2bc2b41ad5c5cf6?s=128&d=identicon&r=PG&f=1", "display_name": "SykeJ", "link": "https://stackoverflow.com/users/4023576/sykej"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 603, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1550702086, "creation_date": 1550702086, "last_edit_date": 1592644375, "question_id": 54796317, "link": "https://stackoverflow.com/questions/54796317/cvimread-produces-empty-images-for-opencv-4-0-0-raspberry-pi-3-c", "title": "cv::imread() produces empty images for OpenCV 4.0.0 Raspberry Pi 3 (C++)", "body": "<p>I have just installed OpenCV 4.0.0 on a Raspberry Pi 3. The python library seems to work just fine, however I am unable to get imread() (and other parts of the library such as FileStorage) to work for C++.</p>\n<p>I have produced the simple program below to demonstrate the issue:</p>\n<pre><code>#include &lt;opencv2/opencv.hpp&gt;\n\nusing namespace std;\n\nint main() {\n    cout &lt;&lt; &quot;start&quot; &lt;&lt; endl;\n\n    cv::Mat img = cv::imread(&quot;~/opencv_test/img.jpg&quot;, cv::IMREAD_UNCHANGED);\n\n    cout &lt;&lt; img.cols &lt;&lt; img.rows &lt;&lt; endl;\n\n    cv::imwrite(&quot;./imgoutput.jpg&quot;, img);\n\n    cout &lt;&lt; &quot;written&quot; &lt;&lt; endl;\n}\n</code></pre>\n<p>The output is as follows:</p>\n<blockquote>\n<p>start</p>\n<p>00</p>\n<p>written</p>\n</blockquote>\n<p>which suggests the image is not being read properly, as the output dimensions are (0,0). The image is valid and present at the specified path. I have tried both .png and .jpg images which all display correctly using the python library. The output image is also written in this example, but is an empty file (as would be expected if the cv::Mat has 0,0 dimensions).</p>\n<p>I am compiling with:</p>\n<pre><code>g++ -std=gnu++11 -I /usr/local/include/opencv4/ test.cpp -o test.o `pkg-config --libs --cflags opencv`\n</code></pre>\n<p>The output for pkg-config is as follows:</p>\n<blockquote>\n<p>-I/usr/local/include/opencv -I/usr/local/include -L/usr/local/lib -lopencv_stitching -lopencv_superres -lopencv_videostab -lopencv_aruco -lopencv_bgsegm -lopencv_bioinspired -lopencv_ccalib -lopencv_dnn -lopencv_dpm -lopencv_fuzzy -lopencv_line_descriptor -lopencv_optflow -lopencv_plot -lopencv_reg -lopencv_saliency -lopencv_stereo -lopencv_structured_light -lopencv_rgbd -lopencv_surface_matching -lopencv_tracking -lopencv_datasets -lopencv_text -lopencv_face -lopencv_xfeatures2d -lopencv_shape -lopencv_video -lopencv_ximgproc -lopencv_calib3d -lopencv_features2d -lopencv_flann -lopencv_xobjdetect -lopencv_objdetect -lopencv_ml -lopencv_xphoto -lopencv_highgui -lopencv_videoio -lopencv_imgcodecs -lopencv_photo -lopencv_imgproc -lopencv_core</p>\n</blockquote>\n<p>This seems to contain all of the libs that I would need for this sample.</p>\n<p>Again, if I use python to perform the same task it works perfectly fine. Am I compiling incorrectly for C++?</p>\n"}, {"tags": ["c++", "googletest"], "comments": [{"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 5, "creation_date": 1550701226, "post_id": 54796104, "comment_id": 96370239, "body": "Why does your test code use pointers at all? You&#39;d save yourself a lot of trouble if you just stuck to automatic storage duration, just like the code you are calling"}, {"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 1, "creation_date": 1550701278, "post_id": 54796104, "comment_id": 96370257, "body": "And the problem is not because of <code>const</code> , it&#39;s because your <code>input</code> vector is storing pointers while the function expects a vector that stores complete objects"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1550701281, "post_id": 54796104, "comment_id": 96370259, "body": "Don&#39;t cast away const.  You can&#39;t know if the object passed to the function was <code>const</code> or not."}, {"owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 0, "creation_date": 1550701554, "post_id": 54796104, "comment_id": 96370363, "body": "There are so many compiler errors in the posted code that it&#39;s hard to answer the question. Please fix the errors."}, {"owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 1, "creation_date": 1550702330, "post_id": 54796104, "comment_id": 96370631, "body": "@Coolboy, it because you suddently decided to declare <code>a</code> as const. You are making life difficult, try without pointers, without const_cast and and without declaring <code>a</code> as const."}, {"owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 1, "creation_date": 1550702444, "post_id": 54796104, "comment_id": 96370666, "body": "You&#39;ve clearly got the idea that because the function declaration uses <code>const</code> you have to use <code>const</code> or <code>const_cast</code> in your code. That idea is wrong. All the function declaration is saying is that the objects passed to it <b>can</b> be const, not that they <b>have</b> to be const."}, {"owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 0, "creation_date": 1550704379, "post_id": 54796104, "comment_id": 96371306, "body": "@Coolboy It&#39;s an out of bounds access on your vector. I.e. you&#39;re trying to access an element of your vector that doesn&#39;t not exist."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1550704974, "post_id": 54796104, "comment_id": 96371480, "body": "@Coolboy That is a new issue not related to this question. It needs to be posted as a separate question of its own."}], "answers": [{"comments": [{"owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "reply_to_user": {"reputation": 31, "user_id": 9065402, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/041bdeccd644f0219a00b9ad7e744a54?s=128&d=identicon&r=PG&f=1", "display_name": "Coolboy", "link": "https://stackoverflow.com/users/9065402/coolboy"}, "edited": false, "score": 0, "creation_date": 1550702636, "post_id": 54796306, "comment_id": 96370728, "body": "@Coolboy Yes and see comments above, its because you have declared <code>obja</code> as const which you should not have done."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1550705304, "post_id": 54796306, "comment_id": 96371565, "body": "there should be a canonical &quot;How to fix my problem with pointers?&quot; - &quot;Don&#39;t use pointers.&quot; :P"}], "tags": [], "owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "is_accepted": true, "score": 1, "last_activity_date": 1550705545, "last_edit_date": 1550705545, "creation_date": 1550702032, "answer_id": 54796306, "question_id": 54796104, "link": "https://stackoverflow.com/questions/54796104/how-to-cast-const-vector-to-non-const/54796306#54796306", "title": "how to cast const vector to non-const", "body": "<p>Forget about <code>const</code>, that's not the issue, The problem is the unnecessary and sometimes incorrect use of pointers.</p>\n\n<p>Look at the declaration of the function you are testing.</p>\n\n<pre><code>int functionA(const ObjectA&amp; obja, const stl::vector&lt;ObjectB&gt;&amp; objb)\n</code></pre>\n\n<p>No pointers there. Now look at the declaration of the vector you are trying to pass to the function.</p>\n\n<pre><code>stl::vector&lt;ObjectB*&gt;*  input;\n</code></pre>\n\n<p>That's (a pointer to) a vector of pointers, that's why the code doesn't work. The test function vector is not a vector of pointers. Here's how to write the code <em>without any pointers</em>.</p>\n\n<pre><code>ObjectA obja;\nobja.type() = someValue; //setter function\nobja.value() = someValue; // setter too\n\nstl::vector&lt;ObjectB&gt; input;\nObjectB objb;\nobjb.type() = someValue // setter\nobjb.id() = someValue//setter\ninput.push_back(objb);\n\nA* instanceA = A::getInstance();\nEXPECT_EQ(-2, instanceA-&gt;functionA(obja, input));\n</code></pre>\n\n<p>Much easier.</p>\n"}, {"comments": [{"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 31, "user_id": 9065402, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/041bdeccd644f0219a00b9ad7e744a54?s=128&d=identicon&r=PG&f=1", "display_name": "Coolboy", "link": "https://stackoverflow.com/users/9065402/coolboy"}, "edited": false, "score": 1, "creation_date": 1550702433, "post_id": 54796312, "comment_id": 96370663, "body": "It does in YOUR code, but not in MY code.  I don&#39;t declare <code>a</code> as <code>const</code>, but you are.  Don&#39;t do that, it is wrong in this situation.  You can&#39;t modify a <code>const</code> object, that is the whole point of <code>const</code>. Did you even TRY the code I gave you before you decided to change it?"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 31, "user_id": 9065402, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/041bdeccd644f0219a00b9ad7e744a54?s=128&d=identicon&r=PG&f=1", "display_name": "Coolboy", "link": "https://stackoverflow.com/users/9065402/coolboy"}, "edited": false, "score": 0, "creation_date": 1550704898, "post_id": 54796312, "comment_id": 96371449, "body": "@Coolboy well, that would be related to the implementation of <code>functionA()</code>, which is not related to this question. That needs to be posted as a separate question of its own."}], "tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": false, "score": 0, "last_activity_date": 1550702726, "last_edit_date": 1550702726, "creation_date": 1550702072, "answer_id": 54796312, "question_id": 54796104, "link": "https://stackoverflow.com/questions/54796104/how-to-cast-const-vector-to-non-const/54796312#54796312", "title": "how to cast const vector to non-const", "body": "<p>Your use of <code>const_cast</code> is completely unnecessary and can be removed.  For one thing, you are casting non-const to non-const, which is redundant. But also, a non-const object can be directly assigned to a <code>const</code> reference of matching type, so you don't need the casts anway.  But, in the case of <code>input</code>, you are not even casting it to a compatible type, so you should have gotten a compiler error on that cas.</p>\n\n<p>More importantly, you are not allocating an actual <code>stl::vector</code> object for <code>input</code> to point at, so you have <strong>undefined behavior</strong> when you try to dereference <code>input</code>.</p>\n\n<p>Try this instead:</p>\n\n<pre><code>ObjectA *obja = new ObjectA();\nobja-&gt;type() = someValue; //setter function\nobja-&gt;value() = someValue; // setter too\n\nstl::vector&lt;ObjectB*&gt; *input = new stl::vector&lt;ObjectB*&gt;();\nObjectB objb = new ObjectB();\nobjb-&gt;type() = someValue // setter\nobjb-&gt;id() = someValue//setter\ninput-&gt;push_back(objb);\n\nA *instanceA = A::getInstance();\nEXPECT_EQ(-2, instanceA-&gt;functionA(*obja, *input))\n</code></pre>\n\n<p>Which can be simplified if you get rid of all your uses of <code>new</code>:</p>\n\n<pre><code>ObjectA obja;\nobja.type() = someValue; //setter function\nobja.value() = someValue; // setter too\n\nstl::vector&lt;ObjectB*&gt; input;\nObjectB objb;\nobjb.type() = someValue // setter\nobjb.id() = someValue//setter\ninput.push_back(&amp;objb);\n\nA *instanceA = A::getInstance();\nEXPECT_EQ(-2, instanceA-&gt;functionA(obja, input))\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 9065402, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/041bdeccd644f0219a00b9ad7e744a54?s=128&d=identicon&r=PG&f=1", "display_name": "Coolboy", "link": "https://stackoverflow.com/users/9065402/coolboy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 315, "favorite_count": 0, "accepted_answer_id": 54796306, "answer_count": 2, "score": -1, "last_activity_date": 1585939169, "creation_date": 1550701106, "last_edit_date": 1585939169, "question_id": 54796104, "link": "https://stackoverflow.com/questions/54796104/how-to-cast-const-vector-to-non-const", "title": "how to cast const vector to non-const", "body": "<p>I am doing a gtest. The function I would like to test takes two parameters. </p>\n\n<pre><code>int functionA(const ObjectA&amp; obja, const stl::vector&lt;ObjectB&gt;&amp; objb)\n</code></pre>\n\n<p>In my gtest, I would like to mock some test cases.</p>\n\n<p>For <code>obja</code>, what I did is:</p>\n\n<pre><code>ObjectA* obja = new ObjectA();\nobja-&gt;type() = someValue; //setter function\nobja-&gt;value() = someValue; // setter too\n</code></pre>\n\n<p>and then pass <code>*(const_cast&lt;ObjectA*&gt;(obja))</code> as the parameter. </p>\n\n<p>But for the vector, I am not sure what <code>const</code> defines. I tried:</p>\n\n<pre><code>stl::vector&lt;ObjectB*&gt;*  input;\nObjectB objb = new ObjectB();\nobjb-&gt;type() = someValue // setter\nobjb-&gt;id() = someValue//setter\ninput.push_back(objb);\n</code></pre>\n\n<p>then pass <code>*(const_cast&lt;ObjectB*&gt;(input))</code> as the parameter.</p>\n\n<p>But I get an error message saying \"no matching function\".</p>\n\n<p>Could anyone tell me how I can mock <code>input</code> and pass it in gtest?</p>\n\n<p>For your convenience, the code in gtest is (assume class name is A): </p>\n\n<pre><code>ObjectA* obja = new ObjectA();\nobja-&gt;type() = someValue; //setter function\nobja-&gt;value() = someValue; // setter too\n\nstl::vector&lt;ObjectB*&gt;*  input;\nObjectB objb = new ObjectB();\nobjb-&gt;type() = someValue // setter\nobjb-&gt;id() = someValue//setter\ninput.push_back(objb);\n\nA* instanceA = A::getInstance();\nEXPECT_EQ(-2, instanceA-&gt;functionA(*(const_cast&lt;ObjectA*&gt;(obja)),*(const_cast&lt;ObjectB*&gt;(input)))) ;\n</code></pre>\n\n<p>I also tried not using <code>const_cast</code> and pointers, I tried:</p>\n\n<pre><code>const ObjectA a;\na.type() = somevalue;\na.value() = somevalue;\n\nconst stl::vector&lt;ObjectB&gt; input;\nObjectB objb;\nobjb.type() = some;\ninput.push_back(objb);\n</code></pre>\n\n<p>and just pass <code>input</code> and <code>a</code> as parameters in test. </p>\n\n<p>but I get an error saying \"lvalue required as left operand of assignment\" on <code>a.type() = somevalue;</code></p>\n\n<p>I think it is because there are two <code>type()</code> in class <code>ObjectA</code>, one is a setter without <code>const</code>, one is a getter with <code>const</code>. If I declare <code>a</code> as <code>const</code>, it believes <code>type()</code> is the getter rather than the setter, so it cannot be a left-side value. That's why I want to use <code>const_cast</code>.</p>\n"}, {"tags": ["c++", "windows", "dll", "gameanalytics"], "comments": [{"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1550702846, "post_id": 54796084, "comment_id": 96370801, "body": "What makes you think the DLL even exports a class in the first place, and is not just exporting flat C-style functions?  Exporting/importing classes is not portable across compilers, due to differences in name mangling requirements by different compiler vendors."}, {"owner": {"reputation": 309, "user_id": 9114399, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21a24c5402df586d959077f56c572bd4?s=128&d=identicon&r=PG&f=1", "display_name": "underthevoid", "link": "https://stackoverflow.com/users/9114399/underthevoid"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1550704146, "post_id": 54796084, "comment_id": 96371233, "body": "Well, I assumed that because of the unresolved errors I&#39;m getting from the linker. Take the <code>configureBuild()</code> for instance, the compiler is trying to resolve the symbol <code>gameanalytics::GameAnalytics::configureBuild</code> but it can&#39;t find. Additionally the import library exports the symbol <code>configureBuild</code>. I thought the import library should export the symbol <code>gameanalytics::GameAnalytics::configureBuild</code> and not only <code>configureBuild</code>. What am I missing here?"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 1, "creation_date": 1550705514, "post_id": 54796084, "comment_id": 96371636, "body": "&quot;<i>What am I missing here?</i>&quot; - looking at the <a href=\"https://github.com/GameAnalytics/GA-SDK-CPP/\" rel=\"nofollow noreferrer\">GameAnalytics C++ SDK</a>, I don&#39;t see the <code>static</code> methods of the <code>GameAnalytics</code> class being exported at all. I see in <a href=\"https://github.com/GameAnalytics/GA-SDK-CPP/blob/master/source/gameanalytics/GameAnalyticsExtern.cpp\" rel=\"nofollow noreferrer\"><code>GameAnalyticsExtern.cpp</code></a> and <a href=\"https://github.com/GameAnalytics/GA-SDK-CPP/blob/master/source/gameanalytics/GameAnalyticsExtern.h\" rel=\"nofollow noreferrer\"><code>GameAnalyticsExtern.h</code></a> that flat C-style functions are being exported instead, which then internally call the static class methods."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 1, "creation_date": 1550705810, "post_id": 54796084, "comment_id": 96371725, "body": "The static methods are implemented in <a href=\"https://github.com/GameAnalytics/GA-SDK-CPP/blob/master/source/gameanalytics/GameAnalytics.cpp\" rel=\"nofollow noreferrer\"><code>GameAnalytics.cpp</code></a>. You can&#39;t link to that unit unless it is in a static library. If it is in a dynamic DLL instead, you can&#39;t link to it. So, it would appear that the class is not intended to be used directly <i>unless</i> you compile the SDK&#39;s source code into your project statically, otherwise you will have to use the flat functions instead. Which makes sense for an API that is expected to be used across compilers and platforms..."}, {"owner": {"reputation": 309, "user_id": 9114399, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21a24c5402df586d959077f56c572bd4?s=128&d=identicon&r=PG&f=1", "display_name": "underthevoid", "link": "https://stackoverflow.com/users/9114399/underthevoid"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1550714947, "post_id": 54796084, "comment_id": 96373794, "body": "Hmmm I see the picture now, thank you very much for the insight @RemyLebeau! If you want to create an answer I will accept it."}], "owner": {"reputation": 309, "user_id": 9114399, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21a24c5402df586d959077f56c572bd4?s=128&d=identicon&r=PG&f=1", "display_name": "underthevoid", "link": "https://stackoverflow.com/users/9114399/underthevoid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 59, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1550702125, "creation_date": 1550701010, "last_edit_date": 1550702125, "question_id": 54796084, "link": "https://stackoverflow.com/questions/54796084/link-problem-when-calling-member-functions-from-3rd-party-dll", "title": "Link problem when calling member functions from 3rd party DLL", "body": "<p>I'm trying to import the shared library of the GameAnalytics project. I'm using its own build system and aside some warnings everything went fine and I get the .dll, .lib (import lib) and .exp from this build.</p>\n\n<p>The problem is that apparently neither the import lib nor the .dll have exported symbols properly. Calling <code>dumpbin</code> with <code>/exports</code> I can see there are just symbols for C-like prototypes of the functions that are actually member functions. So when I try to use this import lib to find the member functions I call in my code I get unresolved symbols.</p>\n\n<p>As I never imported C++ member functions from a shared lib my question is: Am I missing something big in the process of importing this library? The only thing that comes up in my mind is that people behind the GameAnalytics project didn't export proper the classes and function members. I read some texts and it appears that you have to directly <code>_export</code> classes and use <code>far pointers</code> on member functions.</p>\n\n<p>EDIT with <code>dumpbin /exports GameAnalytics.lib</code> output</p>\n\n<pre><code>ordinal hint RVA      name\n\n      1    0 000C6F60 addBusinessEvent\n      2    1 000C7180 addBusinessEventJson\n      3    2 000C75F0 addDesignEvent\n      4    3 000C7690 addDesignEventWithValue\n      5    4 000C7740 addErrorEvent\n      6    5 000C77E0 addProgressionEvent\n      7    6 000C7970 addProgressionEventJson\n      8    7 000C7CF0 addProgressionEventWithScore\n      9    8 000C7E90 addProgressionEventWithScoreJson\n     10    9 000C8220 addResourceEvent\n     11    A 000C83C0 addResourceEventJson\n     12    B 000C8760 configureAvailableCustomDimensions01\n     13    C 000C8940 configureAvailableCustomDimensions02\n     14    D 000C8B20 configureAvailableCustomDimensions03\n     15    E 000C8D00 configureAvailableResourceCurrencies\n     16    F 000C8EE0 configureAvailableResourceItemTypes\n     17   10 000C90C0 configureBuild\n     18   11 000C9160 configureDeviceManufacturer\n     19   12 000C9200 configureDeviceModel\n     20   13 000C92A0 configureGameEngineVersion\n     21   14 000C9340 configureSdkGameEngineVersion\n     22   15 000C93E0 configureUserId\n     23   16 000C9480 configureWritablePath\n     24   17 000C9520 gameAnalyticsEndSession\n     25   18 000C9530 gameAnalyticsStartSession\n     26   19 000C9540 getCommandCenterValueAsString\n     27   1A 000C9630 getCommandCenterValueAsStringWithDefaultValue\n     28   1B 000C97A0 getConfigurationsContentAsString\n     29   1C 000C9810 initialize\n     30   1D 000C9920 isCommandCenterReady\n     31   1E 000C9950 onQuit\n     32   1F 000C9960 onResume\n     33   20 000C9970 onSuspend\n     34   21 000C9980 setBirthYear\n     35   22 000C99A0 setCustomDimension01\n     36   23 000C9A40 setCustomDimension02\n     37   24 000C9AE0 setCustomDimension03\n     38   25 000C9B80 setEnabledErrorReporting\n     39   26 000C9BB0 setEnabledEventSubmission\n     40   27 000C9BE0 setEnabledInfoLog\n     41   28 000C9C10 setEnabledManualSessionHandling\n     42   29 000C9C40 setEnabledVerboseLog\n     43   2A 000C9C70 setFacebookId\n     44   2B 000C9D10 setGender\n</code></pre>\n\n<p>An example of a call in my code that is being unresolved by the linker:</p>\n\n<pre><code>gameanalytics::GameAnalytics::configureBuild(\"1.0.0\");\n</code></pre>\n\n<p>There is no decoration for this call (just for C-like <code>configureBuild()</code> as far as I understand.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 2, "creation_date": 1550700372, "post_id": 54795950, "comment_id": 96369965, "body": "Why not just put all the pins you want to reset into an <code>std::vector&lt;int&gt;</code> and loop over that?"}, {"owner": {"reputation": 5397, "user_id": 2193020, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/aa10d01a3d48851073bd61877a56b5a7?s=128&d=identicon&r=PG", "display_name": "hnefatl", "link": "https://stackoverflow.com/users/2193020/hnefatl"}, "edited": false, "score": 0, "creation_date": 1550700400, "post_id": 54795950, "comment_id": 96369976, "body": "There absolutely is a way to simplify it using loops: why don&#39;t you show us what you&#39;ve tried, and we&#39;ll help with any issues you ran into from there?"}, {"owner": {"reputation": 3860, "user_id": 6807211, "user_type": "registered", "accept_rate": 7, "profile_image": "https://www.gravatar.com/avatar/3b4e615f42b0a0880467650ae5e229c7?s=128&d=identicon&r=PG&f=1", "display_name": "jingweimo", "link": "https://stackoverflow.com/users/6807211/jingweimo"}, "reply_to_user": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 0, "creation_date": 1550700445, "post_id": 54795950, "comment_id": 96370000, "body": "@UnholySheep: there is one way I am trying. It still needs to create a vector by putting these ports individually. Thanks!"}], "answers": [{"tags": [], "owner": {"reputation": 5867, "user_id": 9125195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75fc90d1f6de6ff28c739b85bdb82f4c?s=128&d=identicon&r=PG&f=1", "display_name": "Sid S", "link": "https://stackoverflow.com/users/9125195/sid-s"}, "is_accepted": true, "score": 2, "last_activity_date": 1550701537, "last_edit_date": 1550701537, "creation_date": 1550701144, "answer_id": 54796115, "question_id": 54795950, "link": "https://stackoverflow.com/questions/54795950/simplify-the-codes-for-some-repeated-actions-by-creating-loops/54796115#54796115", "title": "Simplify the codes for some repeated actions by creating loops", "body": "<p>You could create a function that works on groups of pins:</p>\n\n<pre><code>void myResetData(const std::vector&lt;int&gt; &amp;pins)\n{\n    for (auto pin : pins)\n    {\n        resetData(pin);\n    }\n}\n</code></pre>\n\n<p>Then, to use it:</p>\n\n<pre><code>void f()\n{\n    std::vector&lt;int&gt; group1{ p00, p01, p02, p03, p04, p05, p06, p07 },\n                     group2{ p10, p11, p12, p13, p14, p15, p16, p17 };\n    myResetData(group1);\n    myResetData(group2);\n}\n</code></pre>\n\n<p>or just:</p>\n\n<pre><code>void f()\n{\n    myResetData(std::vector&lt;int&gt;{ p00, p01, p02, p03, p04, p05, p06, p07 });\n    myResetData(std::vector&lt;int&gt;{ p10, p11, p12, p13, p14, p15, p16, p17 });\n}\n</code></pre>\n\n<p>You may even get away with:</p>\n\n<pre><code>void f()\n{\n    myResetData({ p00, p01, p02, p03, p04, p05, p06, p07 });\n    myResetData({ p10, p11, p12, p13, p14, p15, p16, p17 });\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3860, "user_id": 6807211, "user_type": "registered", "accept_rate": 7, "profile_image": "https://www.gravatar.com/avatar/3b4e615f42b0a0880467650ae5e229c7?s=128&d=identicon&r=PG&f=1", "display_name": "jingweimo", "link": "https://stackoverflow.com/users/6807211/jingweimo"}, "is_accepted": false, "score": 0, "last_activity_date": 1550701397, "creation_date": 1550701397, "answer_id": 54796168, "question_id": 54795950, "link": "https://stackoverflow.com/questions/54795950/simplify-the-codes-for-some-repeated-actions-by-creating-loops/54796168#54796168", "title": "Simplify the codes for some repeated actions by creating loops", "body": "<pre><code>int ports[] = {p00,p01,p02,p03,p04,p05,p06,p07,\n               p10,p11,p12,p13,p14,p15,p16,p17,\n               p50,p51,\n               p80,p81,p82,p83,p84,p85,p86,p87,\n               p110,p111,p112,p113,p114,p115,p116,p117};\nint portsNum = sizeof(ports)/sizeof(*ports);\nfor(int i=0;i&lt;portsNum;i++)\n{\n    resetData(ports[i]);\n}\n</code></pre>\n"}], "owner": {"reputation": 3860, "user_id": 6807211, "user_type": "registered", "accept_rate": 7, "profile_image": "https://www.gravatar.com/avatar/3b4e615f42b0a0880467650ae5e229c7?s=128&d=identicon&r=PG&f=1", "display_name": "jingweimo", "link": "https://stackoverflow.com/users/6807211/jingweimo"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "closed_date": 1550701515, "accepted_answer_id": 54796115, "answer_count": 2, "score": -2, "last_activity_date": 1550701537, "creation_date": 1550700274, "question_id": 54795950, "link": "https://stackoverflow.com/questions/54795950/simplify-the-codes-for-some-repeated-actions-by-creating-loops", "closed_reason": "Needs details or clarity", "title": "Simplify the codes for some repeated actions by creating loops", "body": "<p>Here below are my codes performing data resetting for a series of ports of integer type. </p>\n\n<pre><code>   //note function: void resetData(int pin);\n   resetData(p00);\n   resetData(p01);\n   resetData(p02);\n   resetData(p03);\n   resetData(p04);\n   resetData(p05);\n   resetData(p06);\n   resetData(p07);\n\n   resetData(p10);\n   resetData(p11);\n   resetData(p12);\n   resetData(p13);\n   resetData(p14);\n   resetData(p15);\n   resetData(p16);\n   resetData(p17);\n\n   resetData(p50);\n   resetData(p51);\n\nresetData(p80);\nresetData(p81);\nresetData(p82);\nresetData(p83);\nresetData(p84);\nresetData(p85);\nresetData(p86);\nresetData(p87);\n\nresetData(p110);\nresetData(p111);\nresetData(p112);\nresetData(p113);\nresetData(p114);\nresetData(p115);\nresetData(p116);\nresetData(p117);\n</code></pre>\n\n<p>In the above codes, there are different types of ports (as grouped together), and they are processed by <code>resetData</code>. Is there way to simplify these long list of code by creating some loops, without changing the definition of <code>resetData</code>? Thanks!</p>\n"}, {"tags": ["c++", "for-loop"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 5, "creation_date": 1550700079, "post_id": 54795901, "comment_id": 96369842, "body": "Not unless you are in undefined behavior. In which case, anything is possible."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 2, "creation_date": 1550700130, "post_id": 54795901, "comment_id": 96369863, "body": "You should show the code in question. The specific usage may be incorrect, but it&#39;s not clear from your description."}, {"owner": {"reputation": 69207, "user_id": 1440565, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/ec430cc01ef4cf4ae63ebbe9e8596f72?s=128&d=identicon&r=PG", "display_name": "Code-Apprentice", "link": "https://stackoverflow.com/users/1440565/code-apprentice"}, "edited": false, "score": 2, "creation_date": 1550700255, "post_id": 54795901, "comment_id": 96369919, "body": "Please show us the code that you showed the teacher so that we can answer the question."}, {"owner": {"reputation": 12749, "user_id": 7976805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92a559df8b4b287aad23724b4c66d67c?s=128&d=identicon&r=PG&f=1", "display_name": "Yksisarvinen", "link": "https://stackoverflow.com/users/7976805/yksisarvinen"}, "edited": false, "score": 0, "creation_date": 1550700307, "post_id": 54795901, "comment_id": 96369939, "body": "I don&#39;t think this question needs code. It seems to be a theoretical question &quot;Can standard function ever be wrong&quot;."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1550700325, "post_id": 54795901, "comment_id": 96369947, "body": "Using size has issue with truncation (if you use a smaller type for the loop index) or if you are iterating backwards but <code>size</code> itself can&#39;t return a wrong value unless you have undefined behavior from something your code does to the vector."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "reply_to_user": {"reputation": 12749, "user_id": 7976805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92a559df8b4b287aad23724b4c66d67c?s=128&d=identicon&r=PG&f=1", "display_name": "Yksisarvinen", "link": "https://stackoverflow.com/users/7976805/yksisarvinen"}, "edited": false, "score": 0, "creation_date": 1550700422, "post_id": 54795901, "comment_id": 96369990, "body": "@Yksisarvinen I&#39;m not sure. It sounds like the context of the question is that OP is looking for validation that they were right in an argument. While the actual question may not need code, the context implies that the answer to the question they asked may mislead them to the wrong conclusion about that context."}, {"owner": {"reputation": 13, "user_id": 11092625, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df51966e47710634215f57c8ad92d91c?s=128&d=identicon&r=PG&f=1", "display_name": "Jason Ho", "link": "https://stackoverflow.com/users/11092625/jason-ho"}, "edited": false, "score": 0, "creation_date": 1550700942, "post_id": 54795901, "comment_id": 96370159, "body": "I add for those that wanted to see the code the short version of it. Just to show you how the use of size() isn&#39;t incorrect, what my teacher told me is that &quot;size()&quot; &quot;should never be used under no context&quot; (in his words)"}, {"owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 1, "creation_date": 1550700982, "post_id": 54795901, "comment_id": 96370171, "body": "There is <b>no</b> occaision where the size returned by <code>vector::size</code> will be different from the size implied by the iterators returned by <code>vector::begin</code> and <code>vector::end</code>. So if that&#39;s what your teacher said he&#39;s dead wrong."}, {"owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 0, "creation_date": 1550701041, "post_id": 54795901, "comment_id": 96370191, "body": "@JasonHo If that is what your teacher said then it&#39;s ridiculous. What does he think the size function is for if it&#39;s never to be used? There are occaisions where the size function is to be preferred to using iterators, for instance when iterators are invalidated because the vector grows or shrinks."}, {"owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 0, "creation_date": 1550701306, "post_id": 54795901, "comment_id": 96370269, "body": "@JasonHo I would tell your teacher that this is really interesting and could he write some code to demonstrate."}, {"owner": {"reputation": 13, "user_id": 11092625, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df51966e47710634215f57c8ad92d91c?s=128&d=identicon&r=PG&f=1", "display_name": "Jason Ho", "link": "https://stackoverflow.com/users/11092625/jason-ho"}, "edited": false, "score": 0, "creation_date": 1550701480, "post_id": 54795901, "comment_id": 96370333, "body": "Thank you all, i was pretty sure that was imposible at all and if you don&#39;t care i will show his this post in class."}, {"owner": {"reputation": 4955, "user_id": 5699329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/86758f7ce8c15546da5968c504360e55?s=128&d=identicon&r=PG", "display_name": "rsjaffe", "link": "https://stackoverflow.com/users/5699329/rsjaffe"}, "edited": false, "score": 0, "creation_date": 1550701640, "post_id": 54795901, "comment_id": 96370389, "body": "But calling <code>size</code> each loop iteration is wasteful if you are not altering the container--maybe the teacher was talking about that?"}, {"owner": {"reputation": 2298, "user_id": 6427477, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oYQ8Y.png?s=128&g=1", "display_name": "C.M.", "link": "https://stackoverflow.com/users/6427477/c-m"}, "reply_to_user": {"reputation": 4955, "user_id": 5699329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/86758f7ce8c15546da5968c504360e55?s=128&d=identicon&r=PG", "display_name": "rsjaffe", "link": "https://stackoverflow.com/users/5699329/rsjaffe"}, "edited": false, "score": 0, "creation_date": 1550702756, "post_id": 54795901, "comment_id": 96370774, "body": "@rsjaffe <code>for(size_t i = 0, count = vec.size(); i &lt; count; ++i) { ... }</code>"}, {"owner": {"reputation": 4955, "user_id": 5699329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/86758f7ce8c15546da5968c504360e55?s=128&d=identicon&r=PG", "display_name": "rsjaffe", "link": "https://stackoverflow.com/users/5699329/rsjaffe"}, "reply_to_user": {"reputation": 2298, "user_id": 6427477, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oYQ8Y.png?s=128&g=1", "display_name": "C.M.", "link": "https://stackoverflow.com/users/6427477/c-m"}, "edited": false, "score": 0, "creation_date": 1550702863, "post_id": 54795901, "comment_id": 96370808, "body": "@C.M. Right--but that&#39;s not what OP was doing."}, {"owner": {"reputation": 2298, "user_id": 6427477, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oYQ8Y.png?s=128&g=1", "display_name": "C.M.", "link": "https://stackoverflow.com/users/6427477/c-m"}, "reply_to_user": {"reputation": 4955, "user_id": 5699329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/86758f7ce8c15546da5968c504360e55?s=128&d=identicon&r=PG", "display_name": "rsjaffe", "link": "https://stackoverflow.com/users/5699329/rsjaffe"}, "edited": false, "score": 0, "creation_date": 1550766425, "post_id": 54795901, "comment_id": 96400436, "body": "@rsjaffe I know :) just wanted to leave that <code>for</code> form here. In my experience people practically never use it."}], "answers": [{"tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": true, "score": 0, "last_activity_date": 1550702550, "last_edit_date": 1550702550, "creation_date": 1550700778, "answer_id": 54796036, "question_id": 54795901, "link": "https://stackoverflow.com/questions/54795901/is-possible-that-vectorsize-returns-a-wrong-value/54796036#54796036", "title": "Is possible that vector::size() returns a wrong value?", "body": "<blockquote>\n  <p>May the size() function of vector return a wrong value?</p>\n</blockquote>\n\n<p>Sure. It may return the \"wrong\" value when the \"correct\" value that you need isn't the size of the vector.</p>\n\n<blockquote>\n  <p>what my teacher told me is that \"size()\" \"should never be used under no context\"</p>\n</blockquote>\n\n<p>That's quite silly exaggeration.</p>\n\n<p>In my opinion, it would be more correct to say that there are cases where a loop with indices and <code>size()</code> is going to be wrong, despite appearing correct to a beginner. In most cases, while a particular loop would be correct, there is a better alternative that is arguably more readable and less error prone. But there are still some loops where indices and <code>size()</code> is superior, although such cases may not be common.</p>\n\n<p>A typical example of a way a beginner unknowingly writes a program that has undefined behaviour, even though the program looks correct in the eyes of a beginner:</p>\n\n<pre><code>for (size_t x = 1; x &lt;= telephone_mat.size(); ++x)\n</code></pre>\n\n<p>Another typical beginner mistake:</p>\n\n<pre><code>for (size_t i = 0; i &lt; vec.size(); ++i)\n    if (condition)\n        vec.erase(vec.begin() + i);\n</code></pre>\n\n<p>An example of a potentially simpler way to write your loops (alghouth whether this applies depends on how the vectors are modified):</p>\n\n<pre><code>for (auto&amp; nums : telephone_mat){\n    for (auto&amp; element : nums){\n        //modification in the matriz...\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 11092625, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df51966e47710634215f57c8ad92d91c?s=128&d=identicon&r=PG&f=1", "display_name": "Jason Ho", "link": "https://stackoverflow.com/users/11092625/jason-ho"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 519, "favorite_count": 0, "accepted_answer_id": 54796036, "answer_count": 1, "score": 0, "last_activity_date": 1550702550, "creation_date": 1550700035, "last_edit_date": 1550701386, "question_id": 54795901, "link": "https://stackoverflow.com/questions/54795901/is-possible-that-vectorsize-returns-a-wrong-value", "title": "Is possible that vector::size() returns a wrong value?", "body": "<p>In a c++ programming class, we did an exercise and for the circumstances i decided to use the function \"size\" of std::vector in a for range instead of iterator. Then my teacher tell me that \"sometimes\" the function size could return a WRONG value so the for loop could go out of range or not be enough. </p>\n\n<p>I have been writing in c++ for almost 2 years in 4 different compilers and i don't this is true. </p>\n\n<p><strong>May the size() function of vector return a wrong value?</strong></p>\n\n<p>EDIT: i agree that this question needs no code because is a theoretical case but i will ilustrate you with the short version:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n\nusing namespace std;\n\ntypedef vector&lt;uint64_t&gt; telephone_nums;\n\nint main(int argc, const char * argv[]) {\n    vector&lt;telephone_nums&gt; telephone_mat;\n\n    // adding elements to telephone_mat\n\n    for (size_t x = 0; x &lt; telephone_mat.size(); ++x){\n        for (size_t y = 0, len = telephone_mat[x].size(); y &lt; len; ++y){\n            //modification in the matriz...\n        }\n    }\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 0, "creation_date": 1550699897, "post_id": 54795862, "comment_id": 96369780, "body": "<i>why</i> are you trying to do this in the first place?"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1550699928, "post_id": 54795862, "comment_id": 96369789, "body": "<a href=\"https://stackoverflow.com/questions/6111565/now-that-we-have-stdarray-what-uses-are-left-for-c-style-arrays\" title=\"now that we have stdarray what uses are left for c style arrays\">stackoverflow.com/questions/6111565/&hellip;</a>"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1550699933, "post_id": 54795862, "comment_id": 96369791, "body": "Why not <code>std::vector</code> or <code>std::array</code> as this is C++ and not C?"}, {"owner": {"reputation": 1146, "user_id": 8606343, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THbQS.jpg?s=128&g=1", "display_name": "Artikash-Reinstate Monica", "link": "https://stackoverflow.com/users/8606343/artikash-reinstate-monica"}, "edited": false, "score": 3, "creation_date": 1550699971, "post_id": 54795862, "comment_id": 96369803, "body": "Fun. Obviously I&#39;d normally <code>std::make_unique&lt;std::array&lt;int, 3&gt;&gt;</code>"}, {"owner": {"reputation": 69207, "user_id": 1440565, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/ec430cc01ef4cf4ae63ebbe9e8596f72?s=128&d=identicon&r=PG", "display_name": "Code-Apprentice", "link": "https://stackoverflow.com/users/1440565/code-apprentice"}, "edited": false, "score": 0, "creation_date": 1550700295, "post_id": 54795862, "comment_id": 96369936, "body": "What compiler errors do you get in each case?"}, {"owner": {"reputation": 1146, "user_id": 8606343, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THbQS.jpg?s=128&g=1", "display_name": "Artikash-Reinstate Monica", "link": "https://stackoverflow.com/users/8606343/artikash-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1550700327, "post_id": 54795862, "comment_id": 96369948, "body": "<code>Cannot convert from int* to int(*)[3]</code>, <code>Cannot convert from int(**)[3] to int(*)[3]</code>, <code>Cannot convert from int* to int(*)[3]</code>"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1550710118, "post_id": 54795862, "comment_id": 96372728, "body": "Use an alias to help clean things up: <code>typedef int myArrType[3];</code> or <code>typedef std::array&lt;int, 3&gt; myArrType;</code> or <code>using myArrType = int[3];</code> or <code>using myArrType = std::array&lt;int, 3&gt;;</code>. Then you can do <code>myArrType *foo  = new myArrType; ... delete foo;</code> or <code>std::unique_ptr&lt;myArrType&gt; foo(new myArrType);</code> or <code>auto foo = std::make_unique&lt;myArrType&gt;();</code>"}], "answers": [{"comments": [{"owner": {"reputation": 1146, "user_id": 8606343, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THbQS.jpg?s=128&g=1", "display_name": "Artikash-Reinstate Monica", "link": "https://stackoverflow.com/users/8606343/artikash-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1550700291, "post_id": 54795921, "comment_id": 96369934, "body": "Ah, of course. Is it possible to make it deletable with <code>delete</code> instead of <code>delete[]</code>?"}, {"owner": {"reputation": 69207, "user_id": 1440565, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/ec430cc01ef4cf4ae63ebbe9e8596f72?s=128&d=identicon&r=PG", "display_name": "Code-Apprentice", "link": "https://stackoverflow.com/users/1440565/code-apprentice"}, "reply_to_user": {"reputation": 1146, "user_id": 8606343, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THbQS.jpg?s=128&g=1", "display_name": "Artikash-Reinstate Monica", "link": "https://stackoverflow.com/users/8606343/artikash-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1550700611, "post_id": 54795921, "comment_id": 96370062, "body": "@Artikash Anything allocated with <code>new</code> is &quot;deletable&quot;. The key here is to figure out how to delete it."}, {"owner": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 0, "creation_date": 1550700645, "post_id": 54795921, "comment_id": 96370070, "body": "I am trying <code>int (*f)[3] = new int[3];</code> but the <code>new int[3]</code> decays from array to pointer. I don&#39;t thing using <code>delete</code> is possible - even if you can allocate memory, you would allocate an array of 3 integers and store the pointer to it in <code>foo</code>. That&#39;s still an array."}, {"owner": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 0, "creation_date": 1550700782, "post_id": 54795921, "comment_id": 96370111, "body": "You can allocate the memory for pointer itself <code>int (**foo)[3] = new (int(*)[3]);</code> that would free with delete."}, {"owner": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 0, "creation_date": 1550701222, "post_id": 54795921, "comment_id": 96370238, "body": "My guts tells me <code>int (*foo)[3] =      reinterpret_cast&lt;int(*)[3]&gt;(new int[3])</code> should be ok, because it&#39;s the same as <code>int mem[3]; int (*foo)[3] = reinterpret_cast&lt;int(*)[3]&gt;(mem);</code> and <code>&amp;mem</code> and <code>mem</code> have the same value (different type)..."}], "tags": [], "owner": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "is_accepted": true, "score": 3, "last_activity_date": 1550700133, "creation_date": 1550700133, "answer_id": 54795921, "question_id": 54795862, "link": "https://stackoverflow.com/questions/54795862/allocating-static-array-with-new/54795921#54795921", "title": "Allocating static array with new", "body": "<p>Well, it's easy.</p>\n\n<pre><code>int (*foo)[3] = new int[1][3];\n</code></pre>\n"}], "owner": {"reputation": 1146, "user_id": 8606343, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THbQS.jpg?s=128&g=1", "display_name": "Artikash-Reinstate Monica", "link": "https://stackoverflow.com/users/8606343/artikash-reinstate-monica"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "accepted_answer_id": 54795921, "answer_count": 1, "score": 1, "last_activity_date": 1550700549, "creation_date": 1550699813, "question_id": 54795862, "link": "https://stackoverflow.com/questions/54795862/allocating-static-array-with-new", "title": "Allocating static array with new", "body": "<p>No matter what syntax I try, this code is always a compile error:</p>\n\n<pre><code>int (*foo)[3] = new ???;\n</code></pre>\n\n<p>I've tried</p>\n\n<pre><code>int (*foo)[3] = new (int[3]);\nint (*foo)[3] = new (int(*)[3]);\nint bar[3];\nint (*foo)[3] = new decltype(bar);\n</code></pre>\n"}, {"tags": ["c++", "constructor", "sequence"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1550697715, "post_id": 54795414, "comment_id": 96368898, "body": "Instead of <code>new int[sz]</code> consider <code>std::array&lt;int, sz&gt;</code>."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 1, "creation_date": 1550697737, "post_id": 54795414, "comment_id": 96368906, "body": "Your array contains <code>numElts</code> elements. So the valid indices are 0 to <code>numElts - 1</code>. <code>elts[numElts]</code> is an overrun and undefined behavior."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1550697755, "post_id": 54795414, "comment_id": 96368917, "body": "You really need to work on your indentation/formatting in general. I recommend investigating <a href=\"https://clang.llvm.org/docs/ClangFormat.html\" rel=\"nofollow noreferrer\">ClangFormat</a>."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 2, "creation_date": 1550697759, "post_id": 54795414, "comment_id": 96368920, "body": "@tadman <code>sz</code> doesn&#39;t seem like a compile time constant. You would need <code>vector</code> here."}, {"owner": {"reputation": 4328, "user_id": 920069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd39f0db1f22e1314746491df063602a?s=128&d=identicon&r=PG", "display_name": "Retired Ninja", "link": "https://stackoverflow.com/users/920069/retired-ninja"}, "edited": false, "score": 1, "creation_date": 1550697830, "post_id": 54795414, "comment_id": 96368947, "body": "The line with just <code>elts[i];</code> on it seems like it is missing something. As it is now it doesn&#39;t do anything. Perhaps work on a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> se we can see all of your code and your intent."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 2, "creation_date": 1550698026, "post_id": 54795414, "comment_id": 96369046, "body": "Why are you using manual memory management and C-style arrays rather than <code>std::array</code> or <code>std::vector</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 39, "user_id": 8812325, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/0807a772faee6b7124afaf8cb17ff19a?s=128&d=identicon&r=PG&f=1", "display_name": "TwilightLuigi", "link": "https://stackoverflow.com/users/8812325/twilightluigi"}, "edited": false, "score": 0, "creation_date": 1550706602, "post_id": 54795873, "comment_id": 96371922, "body": "Thank you this helped me out a lot"}], "tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": true, "score": 0, "last_activity_date": 1550701048, "last_edit_date": 1550701048, "creation_date": 1550699862, "answer_id": 54795873, "question_id": 54795414, "link": "https://stackoverflow.com/questions/54795414/why-is-my-sequence-constructor-not-working-properly/54795873#54795873", "title": "Why is my sequence constructor not working properly?", "body": "<p>Your constructor is allocating an array just fine (make sure the rest of your class implements the <a href=\"https://en.cppreference.com/w/cpp/language/rule_of_three\" rel=\"nofollow noreferrer\">Rule of 3/5/0</a> properly, though), but it is not populating the array with any initial values.</p>\n\n<p>Your <code>insert()</code>, on the other hand, has several problems:</p>\n\n<ul>\n<li><p>it is looping through 1 too many elements.  Arrays are 0-indexed, meaning the valid indexes will be <code>0..sz-1</code>, so you need to use <code>&lt;</code> instead of <code>&lt;=</code> in the loop.</p></li>\n<li><p><code>elts[i];</code> doesn't really do anything meaningful. It is just reading a value from the array (in the case where <code>i</code> is the same value as <code>numElts</code>, it will read past the end of the array into surrounding memory), but it is not doing anything with that value.</p></li>\n<li><p><code>if (i = position)</code> <em>assigns</em> the value of <code>position</code> to <code>i</code>, and then <em>evaluates</em> the result of that assignment (the new value of <code>i</code>) as a boolean expression.  So, if <code>position</code> is 0 then nothing happens at all since 0 evaluates as false, but any other value will evaluate as true and every loop iteration (including the 1 erroneous one mentioned above) will assign <code>value</code> to the array index specified by <code>position</code>, which can itself go out of bounds of the array since you are not validating it.  To compare the original value of <code>i</code> as-is against the value of <code>position</code>, you need to use the <code>==</code> comparison operation instead of the <code>=</code> assignment operator.</p></li>\n</ul>\n\n<p>Try something more like this instead:</p>\n\n<pre><code>Sequence::Sequence(size_type sz)\n{\n    numElts = sz;\n    elts = new int[sz];\n    // or: elts = new int[sz]();\n\n    for (size_type i = 0; i &lt; sz; ++i) {\n        elts[i] = 0;\n    }\n    // or: std::fill(elts, elts + sz, 0);\n    // or: std::fill_n(elts, sz, 0);\n}\n\nvoid Sequence::insert(size_type position, value_type value)\n{\n    for (size_type i = 0; i &lt; numElts; ++i) {\n        if (i == position) {\n            elts[i] = value;\n            break;\n        }\n    }\n}\n</code></pre>\n\n<p>However, <code>insert()</code> can be greatly simplified by removing the loop altogether:</p>\n\n<pre><code>void Sequence::insert(size_type position, value_type value)\n{\n    // NOTE: checking for '&gt;= 0' can be skipped if size_type is unsigned ...\n    if ((position &gt;= 0) &amp;&amp; (position &lt; numElts)) {\n        elts[position] = value;\n    } \n}\n</code></pre>\n"}], "owner": {"reputation": 39, "user_id": 8812325, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/0807a772faee6b7124afaf8cb17ff19a?s=128&d=identicon&r=PG&f=1", "display_name": "TwilightLuigi", "link": "https://stackoverflow.com/users/8812325/twilightluigi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 54795873, "answer_count": 1, "score": -4, "last_activity_date": 1550701048, "creation_date": 1550697586, "last_edit_date": 1550699371, "question_id": 54795414, "link": "https://stackoverflow.com/questions/54795414/why-is-my-sequence-constructor-not-working-properly", "title": "Why is my sequence constructor not working properly?", "body": "<p>I am currently working on a project in C++ where I must create a sequence and then perform functions on it. However, I have come across an issue with my constructor and I can't understand what is wrong with it. A new sequence does not get created.  I am using an array to implement my sequence. Also, I believe the issue might be in my <code>insert()</code> function as well. </p>\n\n<p>Here is my constructor: </p>\n\n<pre><code>Sequence::Sequence(size_type sz)\n{\n    numElts = sz;\n    elts = new int[sz];\n}\n</code></pre>\n\n<p>This is my insert function: </p>\n\n<pre><code>void Sequence::insert(size_type position, value_type value)\n{\n    for (int i = 0; i &lt;= numElts; i++) {\n        elts[i];\n\n        if (i = position) {\n            elts[i] = value;\n        }\n    } \n}\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 0, "creation_date": 1550697743, "post_id": 54795409, "comment_id": 96368911, "body": "Please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, not just snippets"}], "answers": [{"comments": [{"owner": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 0, "creation_date": 1550699373, "post_id": 54795458, "comment_id": 96369584, "body": "Alternatively, <code>cout &lt;&lt; this-&gt;operator[](i)</code>.  Or less silly but still not idiomatic C++, <code>auto const&amp; self = *this; cout &lt;&lt; self[i];</code>."}], "tags": [], "owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "is_accepted": true, "score": 3, "last_activity_date": 1550697847, "creation_date": 1550697847, "answer_id": 54795458, "question_id": 54795409, "link": "https://stackoverflow.com/questions/54795409/is-it-possible-to-use-overloaded-operators-with-this-in-instance-methods/54795458#54795458", "title": "Is it possible to use overloaded operators with &quot;this&quot; in instance methods?", "body": "<p>You have to write <code>(*this)[i]</code>, since the overloaded <code>[]</code> operator belongs to the class itself, but <code>this</code> is just a pointer.</p>\n\n<p>The expression <code>this[i]</code> is valid, but in general <code>p[i]</code> where <code>p</code> is a pointer is interpreted as <code>*(p + i)</code>, so it's not doing what you want it to do.</p>\n"}], "owner": {"reputation": 31, "user_id": 10909695, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-7mZL-_y2Pg8/AAAAAAAAAAI/AAAAAAAAADc/0lvva42eH50/photo.jpg?sz=128", "display_name": "Joshua Haddad", "link": "https://stackoverflow.com/users/10909695/joshua-haddad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "accepted_answer_id": 54795458, "answer_count": 1, "score": 0, "last_activity_date": 1550701519, "creation_date": 1550697577, "last_edit_date": 1550701519, "question_id": 54795409, "link": "https://stackoverflow.com/questions/54795409/is-it-possible-to-use-overloaded-operators-with-this-in-instance-methods", "title": "Is it possible to use overloaded operators with &quot;this&quot; in instance methods?", "body": "<p>I am making a linked list and one of the methods required is to print the data of the linked list.  I attempted to use a loop and overloaded <code>[]</code> operators (returns the data type <code>T</code> of the indexed node) to print the list like so:</p>\n\n<pre><code>for(unsigned int i = 0; i &lt; length; i++){\n    cout &lt;&lt; this[i] &lt;&lt; endl;\n}\n</code></pre>\n\n<p>The compiler is throwing an error that <code>cout</code> does not support type <code>const LinkedList&lt;T&gt;</code>, despite this code working in my test file:</p>\n\n<pre><code>LinkedList&lt;int&gt; newList = LinkedList&lt;T&gt;();\npopulateList\ncout &lt;&lt; newList[5] &lt;&lt; endl;\n</code></pre>\n\n<p>I suspect my syntax for using the overloaded brackets operator with <code>this</code> is incorrect, could someone elaborate why?</p>\n\n<p>EDIT2:</p>\n\n<p>Deleted raw code snippet as to avoid any potential academic honesty issues.</p>\n"}, {"tags": ["c++", "operator-overloading", "overloading", "nodes", "operator-keyword"], "comments": [{"owner": {"reputation": 12749, "user_id": 7976805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92a559df8b4b287aad23724b4c66d67c?s=128&d=identicon&r=PG&f=1", "display_name": "Yksisarvinen", "link": "https://stackoverflow.com/users/7976805/yksisarvinen"}, "edited": false, "score": 1, "creation_date": 1550697505, "post_id": 54795335, "comment_id": 96368805, "body": "Where is your operator declared? And what exactly is not working?"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1550697528, "post_id": 54795335, "comment_id": 96368813, "body": "Welcome to Stack Overflow. Please take the time to go through the <a href=\"http://stackoverflow.com/tour\">The Tour</a> and refer to the material from the <a href=\"http://stackoverflow.com/help/asking\">Help Center</a> on what and how you can ask here.It&#39;s specially important to post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 1, "creation_date": 1550697575, "post_id": 54795335, "comment_id": 96368832, "body": "The first <code>current = l.head-&gt;next;</code> looks dangerous. What if <code>l.head</code> is <code>nullptr</code>?"}, {"owner": {"reputation": 7262, "user_id": 4955498, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-DQswbNCOBTs/AAAAAAAAAAI/AAAAAAAAADE/avTd-sX467I/photo.jpg?sz=128", "display_name": "Michael Veksler", "link": "https://stackoverflow.com/users/4955498/michael-veksler"}, "reply_to_user": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 1, "creation_date": 1550697972, "post_id": 54795335, "comment_id": 96369016, "body": "Can you describe what you are getting? A crash, or a wrong text? I do see one bug that could produce wrong text: <code>out &lt;&lt; previous-&gt;key;</code> and immediately  <code>out &lt;&lt; current-&gt;key</code>. The text will be concatenated: did you forget a comma? Also, @TedLyngmo has a good point (crashing)."}, {"owner": {"reputation": 1, "user_id": 11092454, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3318039a6cb29860f721979996b85801?s=128&d=identicon&r=PG&f=1", "display_name": "KP1O8", "link": "https://stackoverflow.com/users/11092454/kp1o8"}, "reply_to_user": {"reputation": 7262, "user_id": 4955498, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-DQswbNCOBTs/AAAAAAAAAAI/AAAAAAAAADE/avTd-sX467I/photo.jpg?sz=128", "display_name": "Michael Veksler", "link": "https://stackoverflow.com/users/4955498/michael-veksler"}, "edited": false, "score": 0, "creation_date": 1550699199, "post_id": 54795335, "comment_id": 96369518, "body": "@michaelVeksler    I am outputting  &lt;-1&gt;  which is what head-&gt;key is (HEAD_OF_LIST = -1). but when I uncomment   out &lt;&lt; current-&gt;key;   My program segment faults and crashes."}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 0, "creation_date": 1550699602, "post_id": 54795335, "comment_id": 96369677, "body": "@KP1O8 Why does <code>head</code> have a special value? If it&#39;s always going to be <code>-1</code>, can&#39;t you just leave that out of the linked list? What do you get if you try the suggestion I made in my answer?"}, {"owner": {"reputation": 7262, "user_id": 4955498, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-DQswbNCOBTs/AAAAAAAAAAI/AAAAAAAAADE/avTd-sX467I/photo.jpg?sz=128", "display_name": "Michael Veksler", "link": "https://stackoverflow.com/users/4955498/michael-veksler"}, "edited": false, "score": 1, "creation_date": 1550700080, "post_id": 54795335, "comment_id": 96369844, "body": "<i>but when I uncomment out &lt;&lt; current-&gt;key; My program segment faults and crashes</i>. So here is your problem: current is <code>nullptr</code>. Check if the pointer is null before dereferencing and printing what it points to"}, {"owner": {"reputation": 7262, "user_id": 4955498, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-DQswbNCOBTs/AAAAAAAAAAI/AAAAAAAAADE/avTd-sX467I/photo.jpg?sz=128", "display_name": "Michael Veksler", "link": "https://stackoverflow.com/users/4955498/michael-veksler"}, "edited": false, "score": 1, "creation_date": 1550700475, "post_id": 54795335, "comment_id": 96370010, "body": "Anyway, if you don&#39;t want the question  get closed, you should update the question with the clarifications you made in the comments"}, {"owner": {"reputation": 7262, "user_id": 4955498, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-DQswbNCOBTs/AAAAAAAAAAI/AAAAAAAAADE/avTd-sX467I/photo.jpg?sz=128", "display_name": "Michael Veksler", "link": "https://stackoverflow.com/users/4955498/michael-veksler"}, "edited": false, "score": 0, "creation_date": 1550735168, "post_id": 54795335, "comment_id": 96380162, "body": "You should comment out the two lines after <code>&#47;&#47; TEST previous AND current</code> and the printing code will be correct. After that, your true problem lies elsewhere since the list is empty. Possible causes are: the element was removed by <code>remove(key)</code>, or the copy/assignment were invoked but have a bug in them. We need more information, as the bug can&#39;t be reproduced with the given code"}, {"owner": {"reputation": 7262, "user_id": 4955498, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-DQswbNCOBTs/AAAAAAAAAAI/AAAAAAAAADE/avTd-sX467I/photo.jpg?sz=128", "display_name": "Michael Veksler", "link": "https://stackoverflow.com/users/4955498/michael-veksler"}, "edited": false, "score": 0, "creation_date": 1550735601, "post_id": 54795335, "comment_id": 96380391, "body": "Also, `    LLSortedPosInt ll(5);     std::cout &lt;&lt; ll &lt;&lt; &quot;\\n&quot;; ` works fine (after commenting out the two lines before the while). so the bug is elsewhere"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 11092454, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3318039a6cb29860f721979996b85801?s=128&d=identicon&r=PG&f=1", "display_name": "KP1O8", "link": "https://stackoverflow.com/users/11092454/kp1o8"}, "edited": false, "score": 0, "creation_date": 1550704673, "post_id": 54795510, "comment_id": 96371382, "body": "Implementing this code, current-&gt;key is still equal to -1.   When I run the program, I am calling the function   l[2] = LLSortedPosInt(2);   Which should set list #2 to contain the integer 2."}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "reply_to_user": {"reputation": 1, "user_id": 11092454, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3318039a6cb29860f721979996b85801?s=128&d=identicon&r=PG&f=1", "display_name": "KP1O8", "link": "https://stackoverflow.com/users/11092454/kp1o8"}, "edited": false, "score": 0, "creation_date": 1550705185, "post_id": 54795510, "comment_id": 96371538, "body": "Does it crash? If you always set <code>head-&gt;key</code> to <code>-1</code>, it&#39;s not surprising that the first node will always have a key value of <code>-1</code>. What purpose does that node have? And what&#39;s <code>l[2]</code>? Do you have an array of <code>LLSortedPosInt</code>s? You need to show the code for <code>createNode</code> too. Edit your question and put that function in it."}, {"owner": {"reputation": 1, "user_id": 11092454, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3318039a6cb29860f721979996b85801?s=128&d=identicon&r=PG&f=1", "display_name": "KP1O8", "link": "https://stackoverflow.com/users/11092454/kp1o8"}, "edited": false, "score": 0, "creation_date": 1550705837, "post_id": 54795510, "comment_id": 96371736, "body": "Yes, but I set head-&gt;next to the key value. I set head to -1 for any case that a given list is empty, because then head-&gt;next == nullptr, which with the operator&lt;&lt; should output &quot;&lt;&gt;&quot;.    Yes, I have a set of 5 lists, l[1] - l[5].   Sorry, I am new to pointers and classes and all this, so I am still trying to learn and grasp this."}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "reply_to_user": {"reputation": 1, "user_id": 11092454, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3318039a6cb29860f721979996b85801?s=128&d=identicon&r=PG&f=1", "display_name": "KP1O8", "link": "https://stackoverflow.com/users/11092454/kp1o8"}, "edited": false, "score": 0, "creation_date": 1550705962, "post_id": 54795510, "comment_id": 96371771, "body": "If the code I wrote crashes, I think the linked list is broken somehow. Why not let <code>head</code> be <code>nullptr</code> when the list is empty? That&#39;s how it&#39;s normally done."}, {"owner": {"reputation": 1, "user_id": 11092454, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3318039a6cb29860f721979996b85801?s=128&d=identicon&r=PG&f=1", "display_name": "KP1O8", "link": "https://stackoverflow.com/users/11092454/kp1o8"}, "edited": false, "score": 0, "creation_date": 1550706075, "post_id": 54795510, "comment_id": 96371800, "body": "head-&gt;next  IS  nullptr. Your code does not crash, but outputs &lt;-1&gt; Like before."}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "reply_to_user": {"reputation": 1, "user_id": 11092454, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3318039a6cb29860f721979996b85801?s=128&d=identicon&r=PG&f=1", "display_name": "KP1O8", "link": "https://stackoverflow.com/users/11092454/kp1o8"}, "edited": false, "score": 0, "creation_date": 1550706111, "post_id": 54795510, "comment_id": 96371812, "body": "I&#39;m not saying <code>head-&gt;next</code>. I&#39;m saying <code>head</code>."}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "reply_to_user": {"reputation": 1, "user_id": 11092454, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3318039a6cb29860f721979996b85801?s=128&d=identicon&r=PG&f=1", "display_name": "KP1O8", "link": "https://stackoverflow.com/users/11092454/kp1o8"}, "edited": false, "score": 0, "creation_date": 1550737546, "post_id": 54795510, "comment_id": 96381427, "body": "Please explain the downvote so that I know what to improve."}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "reply_to_user": {"reputation": 1, "user_id": 11092454, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3318039a6cb29860f721979996b85801?s=128&d=identicon&r=PG&f=1", "display_name": "KP1O8", "link": "https://stackoverflow.com/users/11092454/kp1o8"}, "edited": false, "score": 0, "creation_date": 1550760354, "post_id": 54795510, "comment_id": 96396128, "body": "Thanks, but someone did, which is a little odd since it contains solutions for both the crash and the <code>&lt;-1&gt;</code> problem - and I did try explaining how in the comments of the code. I&#39;d really like to know why it&#39;s not considered to be a useful answer to learn how to improve."}], "tags": [], "owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "is_accepted": false, "score": -1, "last_activity_date": 1550739678, "last_edit_date": 1550739678, "creation_date": 1550698115, "answer_id": 54795510, "question_id": 54795335, "link": "https://stackoverflow.com/questions/54795335/overloading-operator-c/54795510#54795510", "title": "Overloading &lt;&lt; operator c++", "body": "<p>The definition of <code>operator&lt;&lt;</code> could be:</p>\n\n<pre><code>std::ostream&amp; operator&lt;&lt;(std::ostream&amp; out, const LLSortedPosInt&amp; l) {\n    out &lt;&lt; \"&lt;\";\n    NodePtr current = l.head;\n    // check that it actually points to a Node before accessing any fields\n    if(current) {\n        out &lt;&lt; current-&gt;key;\n        // loop through the links and stream the keys\n        while((current = current-&gt;next) != nullptr)\n            out &lt;&lt; \",\" &lt;&lt; current-&gt;key;\n    }\n    out &lt;&lt; \"&gt;\";\n    return out;\n}\n</code></pre>\n\n<p>The constructor <code>LLSortedPosInt(int key)</code> should not create a <code>HEAD_OF_LIST</code> node since it's not used for anything. So you can change that constructor to use the one you already have for a list of keys via delegation. Delegation also makes it easy to add a constructor using an <code>initializer_list</code>:</p>\n\n<pre><code>LLSortedPosInt(const int *keys=nullptr, size_t n=0) :\n    head(nullptr)\n{\n    if(keys &amp;&amp; n) {\n        while(n--) {\n            createNode(*keys);\n            ++keys;\n        }\n    }\n}\n\n// single key construction\nLLSortedPosInt(int key) :\n    LLSortedPosInt(&amp;key, 1) // delegate\n{}\n\n// construction using an initializer list\nLLSortedPosInt(std::initializer_list&lt;int&gt; il) :\n    LLSortedPosInt(il.begin(), il.size()) // delegate\n{}\n</code></pre>\n\n<p>The <code>static createNode</code> interface is a little odd. Users of the function shouldn't need to supply the pointer to the next node. That's what the container class is for. It could be made into a normal member function and create the node in the correct place directly:</p>\n\n<pre><code>NodePtr createNode(int key) {\n    NodePtr current = head;\n    NodePtr previous = nullptr;\n\n    while(current &amp;&amp; (current-&gt;key &lt; key)) {\n        previous = current;\n        current = current-&gt;next;\n    }\n\n    if(previous) {\n        // insert the node between previous and previous-&gt;next\n        NodePtr rv = new Node(key, previous-&gt;next);\n        return previous-&gt;next = rv;\n    } else {\n        // insert the node first in the list\n        NodePtr rv = new Node(key, head);\n        return head = rv;\n    }\n}\n</code></pre>\n\n<p>Given that the actual <code>Node</code> looks something like this:</p>\n\n<pre><code>struct Node {\n    Node* next;\n    int key;\n    Node(int k, Node* n) : next(n), key(k) {}\n    Node(const Node&amp;) = delete;\n    Node(Node&amp;&amp;) = delete;\n    Node&amp; operator=(const Node&amp;) = delete;\n    Node&amp; operator=(Node&amp;&amp;) = delete;\n    ~Node() = default;\n};\n\nusing NodePtr = Node*;\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 11092454, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3318039a6cb29860f721979996b85801?s=128&d=identicon&r=PG&f=1", "display_name": "KP1O8", "link": "https://stackoverflow.com/users/11092454/kp1o8"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 105, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1550739678, "creation_date": 1550697213, "last_edit_date": 1550705677, "question_id": 54795335, "link": "https://stackoverflow.com/questions/54795335/overloading-operator-c", "title": "Overloading &lt;&lt; operator c++", "body": "<p>I am trying to output the values of my linked lists, but I can't seem to get my operator&lt;&lt; to work. When I out &lt;&lt; previous->key;   It comes out as -1, which is what the HEAD_OF_LIST is. In the program, I call the function l[2] = LLSortedPosInt(2); which sets list #2 to contain one element which is the integer 2. </p>\n\n<p>This is the Class declaration:</p>\n\n<pre><code>struct  Node;\ntypedef Node* NodePtr;\n\n// The key value HEAD_OF_LIST is used as a \"sentinal\" value\nconst int HEAD_OF_LIST = -1;\n\nclass LLSortedPosInt {\n  public:\n   // constructors\n                         LLSortedPosInt();\n                         LLSortedPosInt(int  key);\n                         LLSortedPosInt(int *keys,  int n);         //int *keys is an array of integers\n                         LLSortedPosInt(const LLSortedPosInt &amp;l);\n\n   // destructor\n                        ~LLSortedPosInt();\n\n   bool                  containsElement (int key) const;\n   bool                  isEmpty         (       ) const;\n\n   LLSortedPosInt&amp;       operator= (const LLSortedPosInt &amp;l);\n   bool                  operator==(const LLSortedPosInt &amp;l) const;\n   bool                  operator!=(const LLSortedPosInt &amp;l) const;\n\n   friend LLSortedPosInt operator+ (const LLSortedPosInt &amp;l1,\n                                      const LLSortedPosInt &amp;l2);\n   friend LLSortedPosInt operator- (const LLSortedPosInt &amp;l1,\n                                      const LLSortedPosInt &amp;l2);\n   friend ostream&amp;       operator&lt;&lt;(ostream &amp;out, \n                                      const LLSortedPosInt &amp;l);\n  private:\n   void                  insert    (int key);\n   void                  remove    (int key);\n\n   NodePtr head;\n};\n</code></pre>\n\n<p>This is the createNode function:</p>\n\n<pre><code>static NodePtr createNode(int key, NodePtr p) {\n   // allocate a new Node for storing the given key value\n   NodePtr n = new Node;\n\n   // store the key value and the next pointer\n   n-&gt;key  = key;\n   n-&gt;next = p;\n\n   // return the new Node to the caller\n   return n;\n}\n</code></pre>\n\n<p>This is my code for the operator&lt;&lt;</p>\n\n<pre><code>ostream&amp;  operator&lt;&lt;  (ostream &amp;out, const LLSortedPosInt &amp;l) {\n\n// an empty list will be printed as &lt;&gt;\n// a singleton list (a list having one key value k) will be\n//     printed as &lt;k&gt;\n// a list having multiple keys such as 2, 5, 7 will be printed\n//     as &lt;2, 5, 7&gt;\n\n// print the left angle bracket\nout &lt;&lt; \"&lt;\";\n\nNodePtr previous = l.head;\nNodePtr current = l.head-&gt;next;\n\n//TEST previous AND current\nout &lt;&lt; previous-&gt;key;\nout &lt;&lt; current-&gt;key &lt;&lt; \"&gt;\" &lt;&lt; endl &lt;&lt; \"&lt;\";\n\n// print the values of l\nwhile (current != NULL) {\n    if (current-&gt;key &gt;= 0) {\n        if (current-&gt;next == NULL) {\n            out &lt;&lt; current-&gt;key;\n            break;\n        }\n        out &lt;&lt; current &lt;&lt; \", \";\n        previous = current;\n        current = current-&gt;next;\n    }\n}\n\n// print the right angle bracket\nout &lt;&lt; \"&gt;\";\n\nreturn out;\n}\n</code></pre>\n\n<p>I also have a function that takes an integer input which is below. I am pretty sure this is written correctly, but I am not sure.</p>\n\n<pre><code>LLSortedPosInt::LLSortedPosInt(int key) {\n// create the sentinal Node at the head of the list\nhead = createNode(HEAD_OF_LIST, nullptr);\n\n// add the single element key, as long as it is positive\nif (key &gt; 0) {\n    head-&gt;next = createNode(key, nullptr);\n}\n}\n</code></pre>\n"}, {"tags": ["c++", "linux", "unicode", "terminal", "ncurses"], "comments": [{"owner": {"reputation": 42737, "user_id": 4518274, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UPurS.png?s=128&g=1", "display_name": "Thomas Dickey", "link": "https://stackoverflow.com/users/4518274/thomas-dickey"}, "edited": false, "score": 0, "creation_date": 1550706518, "post_id": 54795303, "comment_id": 96371904, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/54114075/borders-dont-draw-properly-when-window-has-more-than-8-columns\">Borders don&#39;t draw properly when window has more than 8 columns</a>"}, {"owner": {"reputation": 430, "user_id": 3328671, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/c924b6d92e3921e05e52d66b03eda792?s=128&d=identicon&r=PG&f=1", "display_name": "Ampera", "link": "https://stackoverflow.com/users/3328671/ampera"}, "reply_to_user": {"reputation": 42737, "user_id": 4518274, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UPurS.png?s=128&g=1", "display_name": "Thomas Dickey", "link": "https://stackoverflow.com/users/4518274/thomas-dickey"}, "edited": false, "score": 0, "creation_date": 1550706873, "post_id": 54795303, "comment_id": 96371983, "body": "Unrelated, my issue has nothing to do with the capabilities of my terminal, although strangely ncurses colour seems to be completely broken on xterm and mate-terminal, something I have also yet to figure out.  This has to do with wide characters not being properly displayed based off a certain screen location. It might even be a bug in ncurses, but I don&#39;t trust myself enough to file a bug report for something that could still be user error."}, {"owner": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "edited": false, "score": 0, "creation_date": 1550712220, "post_id": 54795303, "comment_id": 96373172, "body": "Possibly the ECMA-48 <b>REP</b> (repeat character) control sequence is not working with wide characters.  The ASCII value for &#39;P&#39; is 0x50, the LSB of your wide border character."}, {"owner": {"reputation": 430, "user_id": 3328671, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/c924b6d92e3921e05e52d66b03eda792?s=128&d=identicon&r=PG&f=1", "display_name": "Ampera", "link": "https://stackoverflow.com/users/3328671/ampera"}, "edited": false, "score": 0, "creation_date": 1550715676, "post_id": 54795303, "comment_id": 96373970, "body": "I had noticed that bit as well, but I find it strange it works fine with smaller numbers of characters, but not longer."}], "answers": [{"comments": [{"owner": {"reputation": 430, "user_id": 3328671, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/c924b6d92e3921e05e52d66b03eda792?s=128&d=identicon&r=PG&f=1", "display_name": "Ampera", "link": "https://stackoverflow.com/users/3328671/ampera"}, "edited": false, "score": 0, "creation_date": 1551131429, "post_id": 54875070, "comment_id": 96520510, "body": "I thank you so much for that, I knew it should have been something simple, and the explanation makes sense.  Yes, I should have made a better example at the start, but I often don&#39;t know what to put in these things, and end up putting snippets of the program the issue is working in instead of creating entirely new example programs, which I should start doing."}, {"owner": {"reputation": 42737, "user_id": 4518274, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UPurS.png?s=128&g=1", "display_name": "Thomas Dickey", "link": "https://stackoverflow.com/users/4518274/thomas-dickey"}, "reply_to_user": {"reputation": 430, "user_id": 3328671, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/c924b6d92e3921e05e52d66b03eda792?s=128&d=identicon&r=PG&f=1", "display_name": "Ampera", "link": "https://stackoverflow.com/users/3328671/ampera"}, "edited": false, "score": 0, "creation_date": 1551131945, "post_id": 54875070, "comment_id": 96520696, "body": "A sample program always helps, because it can be tested (reading a fragment can&#39;t do that)."}, {"owner": {"reputation": 430, "user_id": 3328671, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/c924b6d92e3921e05e52d66b03eda792?s=128&d=identicon&r=PG&f=1", "display_name": "Ampera", "link": "https://stackoverflow.com/users/3328671/ampera"}, "edited": false, "score": 0, "creation_date": 1551131985, "post_id": 54875070, "comment_id": 96520713, "body": "Yeah I get it. I&#39;m fairly new to serious programming, and almost everything I do is a first for me."}], "tags": [], "owner": {"reputation": 42737, "user_id": 4518274, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UPurS.png?s=128&g=1", "display_name": "Thomas Dickey", "link": "https://stackoverflow.com/users/4518274/thomas-dickey"}, "is_accepted": true, "score": 7, "last_activity_date": 1551130755, "creation_date": 1551130755, "answer_id": 54875070, "question_id": 54795303, "link": "https://stackoverflow.com/questions/54795303/ncurses-freaks-out-when-writing-wide-character-to-certain-screen-locations/54875070#54875070", "title": "ncurses freaks out when writing wide character to certain screen locations", "body": "<p>OP sent a more complete example, which shows the problem:</p>\n\n<pre><code>#include &lt;ncurses.h&gt;\n#include &lt;string&gt;\n#include &lt;iostream&gt;\n\nusing namespace std;\n\nint main(){\n\n    initscr();\n    setlocale(LC_ALL, \"\");\n    raw();\n    keypad(stdscr, TRUE);\n    noecho();\n\n    for(int i = 0; i &lt; 10; i++){\n        mvaddwstr(0, i, L\"\\u2550\");\n    }\n    for(int i = 0; i &lt; 6; i++){\n        mvaddwstr(1, i, L\"\\u2550\");\n    }\n    refresh();\n    getch();\n    endwin();\n\n    return 0;\n\n}\n</code></pre>\n\n<p>The problem is that the library is initialized with a different locale than is used in the <code>mvaddwstr</code> calls.  The <a href=\"https://invisible-island.net/ncurses/man/ncurses.3x.html#h3-Initialization\" rel=\"noreferrer\">manual page</a> says</p>\n\n<blockquote>\n  <p>The  library uses the locale which the calling program has initialized.\n  That is normally done with <strong><code>setlocale</code></strong>:</p>\n  \n  <p><strong><code>setlocale(LC_ALL, \"\");</code></strong></p>\n  \n  <p>If the locale is not initialized, the library assumes  that  characters\n  are  printable  as in <strong>ISO-8859-1</strong>, to work with certain legacy programs.\n  You should initialize the locale and not rely on  specific  details  of\n  the library when the locale has not been setup.</p>\n</blockquote>\n\n<p>Because the call to <strong><code>setlocale</code></strong> is after <strong><code>initscr</code></strong>, rather than before, ncurses assumes the data is ISO-8859-1, and runs into an unexpected scenario.  In other places such as <code>addwstr</code>, ncurses checks if the data is valid <code>wchar_t</code>, but in those, it's using the <strong>current</strong> locale.  In this case, it's far away from the functions that it knows must be handled in that way (it's rendering data which has already been processed).  The comparison in the library which allow this to be handled using the <em><code>repeat_char</code></em> capability can be improved, but the actual bug is in the sample program.</p>\n"}], "owner": {"reputation": 430, "user_id": 3328671, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/c924b6d92e3921e05e52d66b03eda792?s=128&d=identicon&r=PG&f=1", "display_name": "Ampera", "link": "https://stackoverflow.com/users/3328671/ampera"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 714, "favorite_count": 1, "accepted_answer_id": 54875070, "answer_count": 1, "score": 4, "last_activity_date": 1551172342, "creation_date": 1550697093, "last_edit_date": 1551172342, "question_id": 54795303, "link": "https://stackoverflow.com/questions/54795303/ncurses-freaks-out-when-writing-wide-character-to-certain-screen-locations", "title": "ncurses freaks out when writing wide character to certain screen locations", "body": "<p>I am writing an application using ncurses and wish to use box drawing characters in it, specifically u/2550 and u/2551 (as of now). I have for loops setup to draw bars to two sides of the terminal, based off screen size I determine elsewhere.</p>\n\n<p>For whatever reason when it comes to drawing any unicode characters horizontally (here at the bottom of the screen, but it does this on any row), it will go from printing the characters fine to printing garbage 'P's. This is a bit hard to explain, so I have some pictures showing what happens when I draw 6 characters and then 7 or more characters.</p>\n\n<p><a href=\"https://i.stack.imgur.com/NDCL6.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/NDCL6.png\" alt=\"With 6 characters\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/XStSl.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/XStSl.png\" alt=\"With 7 characters\"></a></p>\n\n<p>The part of the code responsible for drawing these characters is as such, note that the last for loop is what draws these characters, and the iterator is supposed to go farther than just 7, but it does this here and anywhere else.</p>\n\n<pre><code>void drawBorder(){ //draw the border graphics\n                attron(COLOR_PAIR(3));\n        for(int i = 1; i &lt; screenSizeY - 1; i++){ //draw left side\n                mvaddwstr(i, 0, L\"\u2551\");\n        }\n        for(int i = 1; i &lt; screenSizeY - 1; i++){ //draw right side\n                mvaddwstr(i, screenSizeX - 1, L\"\\u2551\");\n        }\n        for(int i = 0; i &lt; 7; i++){ //draw bottom\n                mvaddwstr(screenSizeY - 1, i, L\"\\u2550\");\n        }\n                attroff(COLOR_PAIR(3));\n}\n</code></pre>\n\n<p>I am linking against the ncursesw package and have a properly set locale. Other characters drawn in vertical lines work just fine, but it doesn't here. I am using C++ compiled with g++, running on Linux in an Alacritty terminal session.</p>\n\n<p>This has nothing to do with box draw functions, or specific terminal capabilities, all of the wide characters are perfectly supported by the terminal, and work in other parts of the terminal. This will happen based on how many of these I draw in a row, and also happens for other box characters.</p>\n"}, {"tags": ["c++", "language-lawyer"], "comments": [{"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 0, "creation_date": 1550697011, "post_id": 54795238, "comment_id": 96368592, "body": "From a logical standpoint, consider that <code>bar</code> is usable in <code>foo</code>&#39;s body, but for <code>bar</code> to be usable by then, its declaration must be known before <code>foo</code>&#39;s body."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "reply_to_user": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 0, "creation_date": 1550697139, "post_id": 54795238, "comment_id": 96368647, "body": "@chris <code>foo</code>s body is empty, its not doing anything and returning <code>void</code> the definitions are given for both"}, {"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 2, "creation_date": 1550697165, "post_id": 54795238, "comment_id": 96368654, "body": "@user463035818, I said usable, not that it is currently used."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "reply_to_user": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 0, "creation_date": 1550697210, "post_id": 54795238, "comment_id": 96368676, "body": "@chris have to admit i dont really understand, read your comment already several times, still trying"}, {"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1550697386, "post_id": 54795238, "comment_id": 96368754, "body": "@user463035818, Imagine you&#39;re writing a compiler. If the language takes whether you <i>use</i> <code>bar</code> into account, then resolving <code>bar</code>&#39;s declaration requires looking through all of its dependencies and seeing if any of their definitions use any part of <code>bar</code>, introducing a cycle. It&#39;s much more complex (and possibly not doable in general, I don&#39;t know), increases compilation time, and causes changes in a <i>definition</i> to affect whether another <i>declaration</i> compiles."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "reply_to_user": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 0, "creation_date": 1550697503, "post_id": 54795238, "comment_id": 96368802, "body": "@chris you mean in general it is impossible to decude one methods return type based on another methods return type when the second is declared to return <code>auto</code> ?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 3, "creation_date": 1550698110, "post_id": 54795238, "comment_id": 96369076, "body": "I&#39;ll leave it to someone else to parse through the standard but what I suspect is happening here is the function body of a inline member function definition is just syntactic sugar.  It is really treated like it was declared, and the function body is outside the class.  This means that in the trailing return type we can&#39;t know what the return will be yet since the class/function isn&#39;t complete."}, {"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1550698435, "post_id": 54795238, "comment_id": 96369216, "body": "@user463035818, It&#39;s not super straightforward because <code>auto</code> on  its own without the trailing type still <a href=\"https://gcc.godbolt.org/z/Mmqzc9\" rel=\"nofollow noreferrer\">catches problems</a> (sorry, messed up the initial link). However, leaving the return type deduced allows marking the return type as &quot;unknown&quot; or similar in this pass, left to be resolved later when all the symbols and their initial types are known. Using <code>foo</code> in the return type would require going through <code>foo</code>&#39;s body <i>right now</i>, before that initial pass is done. Or it would require identifying problematic cases this early."}, {"owner": {"reputation": 3019, "user_id": 411165, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/YYrH2.jpg?s=128&g=1", "display_name": "Ayrosa", "link": "https://stackoverflow.com/users/411165/ayrosa"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1550698841, "post_id": 54795238, "comment_id": 96369369, "body": "@NathanOliver Nevetheless <code>foo</code> is declared before <code>bar</code> and by <a href=\"http://eel.is/c++draft/expr.prim#this-2\" rel=\"nofollow noreferrer\">&#91;expr.prim.this&#93;/2</a>, <code>foo</code> is visible in <code>bar</code>&#39;s <i>trailing-return-type</i>."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1550698980, "post_id": 54795238, "comment_id": 96369432, "body": "@Ayrosa Yes, the name foo is accessible, but what it returns has not yet been established as that comes from looking at its function body and I believe that happens after the class is complete (the ending semicolon)."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1550699163, "post_id": 54795238, "comment_id": 96369507, "body": "It comes down to what is the complete class context I believe.  <a href=\"http://eel.is/c++draft/class.mem#6\" rel=\"nofollow noreferrer\">eel.is/c++draft/class.mem#6</a>"}, {"owner": {"reputation": 104, "user_id": 2676371, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32172851237a55c620f6377441348866?s=128&d=identicon&r=PG&f=1", "display_name": "Sasha", "link": "https://stackoverflow.com/users/2676371/sasha"}, "edited": false, "score": 4, "creation_date": 1550705330, "post_id": 54795238, "comment_id": 96371569, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/54767088/is-there-a-specific-reason-why-a-trailing-return-type-is-not-a-complete-class-co\">Is there a specific reason why a trailing-return-type is not a complete-class context of a class?</a>"}, {"owner": {"reputation": 16907, "user_id": 4832499, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/76532994f6efa8d7dc8a3bb5b7b262a8?s=128&d=identicon&r=PG&f=1", "display_name": "Passer By", "link": "https://stackoverflow.com/users/4832499/passer-by"}, "edited": false, "score": 0, "creation_date": 1550726201, "post_id": 54795238, "comment_id": 96376507, "body": "^That. Not exactly a dupe, but answers your question."}, {"owner": {"reputation": 3019, "user_id": 411165, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/YYrH2.jpg?s=128&g=1", "display_name": "Ayrosa", "link": "https://stackoverflow.com/users/411165/ayrosa"}, "reply_to_user": {"reputation": 16907, "user_id": 4832499, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/76532994f6efa8d7dc8a3bb5b7b262a8?s=128&d=identicon&r=PG&f=1", "display_name": "Passer By", "link": "https://stackoverflow.com/users/4832499/passer-by"}, "edited": false, "score": 0, "creation_date": 1550754154, "post_id": 54795238, "comment_id": 96391841, "body": "@PasserBy No it doesn&#39;t. See my comments above."}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 1, "creation_date": 1550799278, "post_id": 54795238, "comment_id": 96413288, "body": "&quot;Whoever is saying that this question is a duplicate of the question does not know what he/she is talking about...&quot; Wrong.  Sasha does know, just hasn&#39;t bothered to explain it to you.  I hope my answer fills in the missing piece in your understanding."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1550819082, "post_id": 54795238, "comment_id": 96418298, "body": "Why do you need a quote? Are you going to take the standard committee to a court of law and argue on technicalities? The intent is clear as day. If the wording contradicts the intent, then there&#39;s a defect anf you are welcome to file one."}, {"owner": {"reputation": 3019, "user_id": 411165, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/YYrH2.jpg?s=128&g=1", "display_name": "Ayrosa", "link": "https://stackoverflow.com/users/411165/ayrosa"}, "reply_to_user": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "edited": false, "score": 0, "creation_date": 1550863465, "post_id": 54795238, "comment_id": 96442539, "body": "@Rakete1111 The class is incomplete in the return type, but you have access to <code>foo()</code> according to the second Note in <a href=\"http://eel.is/c++draft/expr.prim.this#2\" rel=\"nofollow noreferrer\">&#91;expr.prim.this&#93;/2</a>."}, {"owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "edited": false, "score": 0, "creation_date": 1550863641, "post_id": 54795238, "comment_id": 96442624, "body": "@Ayrosa yes you are right, sorry"}], "answers": [{"comments": [{"owner": {"reputation": 3019, "user_id": 411165, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/YYrH2.jpg?s=128&g=1", "display_name": "Ayrosa", "link": "https://stackoverflow.com/users/411165/ayrosa"}, "edited": false, "score": 0, "creation_date": 1550840567, "post_id": 54818747, "comment_id": 96430154, "body": "&quot;Therefore the compiler cannot evaluate the body of <code>foo()</code> until the class is complete&quot;. This doesn&#39;t make any sense to me, could you clarify?"}], "tags": [], "owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "is_accepted": false, "score": 4, "last_activity_date": 1550847326, "last_edit_date": 1550847326, "creation_date": 1550798959, "answer_id": 54818747, "question_id": 54795238, "link": "https://stackoverflow.com/questions/54795238/is-getting-the-decltype-of-a-deduced-member-function-inside-the-trailing-return/54818747#54818747", "title": "Is getting the decltype of a deduced member function inside the trailing return type of another member function well-formed?", "body": "<blockquote>\n<pre><code>struct Test\n{\n    auto foo() { /*1*/ }                       \n    auto bar() -&gt; decltype(foo()) {}\n};\n</code></pre>\n</blockquote>\n\n<p>At marker 1, the name <code>Test::bar</code> is in scope along with all other members of <code>struct Test</code>.  Therefore the compiler cannot analyze the body of <code>foo()</code> until the class is complete.</p>\n\n<p>We then have a partial ordering:</p>\n\n<ul>\n<li>Parse body of <code>Test::foo()</code> before deducing its return type</li>\n<li>Complete class <code>Test</code> before parsing body of <code>Test::foo()</code></li>\n<li>Analyze trailing return type of <code>Test::bar()</code> before completing class <code>Test</code> (from the question you pled is not a dupe)</li>\n</ul>\n\n<p>and by transitivity, the return type of <code>Test::bar()</code> must be analyzed without yet performing return type deduction for <code>Test::foo()</code>.</p>\n\n<hr>\n\n<p>Since a Standard quote was requested, here it is from <code>[class.mem]</code>:</p>\n\n<blockquote>\n  <p>A class is considered a completely-defined object type (or complete type) at the closing <code>}</code> of the <em>class-specifier</em>. Within the class <em>member-specification</em>, <strong>the class is regarded as complete within function bodies</strong>, default arguments, <em>noexcept-specifiers</em>, and default member initializers (including such things in nested classes). Otherwise it is regarded as incomplete within its own class member-specification.</p>\n</blockquote>\n"}], "owner": {"reputation": 3019, "user_id": 411165, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/YYrH2.jpg?s=128&g=1", "display_name": "Ayrosa", "link": "https://stackoverflow.com/users/411165/ayrosa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 218, "favorite_count": 1, "answer_count": 1, "score": 9, "last_activity_date": 1550925519, "creation_date": 1550696765, "last_edit_date": 1550925519, "question_id": 54795238, "link": "https://stackoverflow.com/questions/54795238/is-getting-the-decltype-of-a-deduced-member-function-inside-the-trailing-return", "title": "Is getting the decltype of a deduced member function inside the trailing return type of another member function well-formed?", "body": "<p>Whoever is saying that this question is a duplicate of the question \"<a href=\"https://stackoverflow.com/q/54767088/1042389\">Is there a specific reason why a trailing-return-type is not a complete-class context of a class?</a>\" does not know what he/she is talking about. The fact that a trailing return type is not a complete-class context of a class does <strong>not</strong> explain why the code in this question doesn't compile, although it explains the rejection of the code given in the answer to the other question, specially the part of the code involving the member functions <code>qux</code> and <code>baz</code>, as explained by the OP.</p>\n\n<p>In order to clarify my argument that the code below is valid, you have to take into consideration <a href=\"http://eel.is/c++draft/expr.prim#this-2.note-2\" rel=\"nofollow noreferrer\">the second note</a> in [expr.prim.this] which says: <strong>In a trailing-return-type, the class being defined is not required to be complete for purposes of class member access. Class members declared later are not visible.</strong> As <code>foo</code> is declared before <code>bar</code> in my example, there is nothing to prevent the compiler from accessing <code>foo</code> in the trailing-return-type of <code>bar</code>.</p>\n\n<p><strike>Note that <a href=\"https://stackoverflow.com/questions/54795238/the-following-code-doesnt-compile-but-it-should-according-to-dcl-spec-auto-9#comment96369076_54795238\">the comment below</a> by @NathanOliver is based on the conjecture that the inline definition for the member function <code>foo</code> below is just syntactic sugar. This needs to be proven from a quote in the Standard. <strong>I haven't found that yet</strong>. Once that quote is produced, I will certainly accept an answer arguing that the code doesn't compile because a trailing-return-type is not a complete-class context of a class.</strike></p>\n\n<pre><code>struct Test {\n        auto foo() {}                       \n        auto bar() -&gt; decltype(foo()) {}\n    };\n\nprog.cc:3:32: error: use of 'auto Test::foo()' before deduction of 'auto'\n    3 |     auto bar() -&gt; decltype(foo()) {}\n      |                                ^\nprog.cc:3:32: error: use of 'auto Test::foo()' before deduction of 'auto'\n</code></pre>\n\n<p><a href=\"http://eel.is/c++draft/dcl.spec.auto#9\" rel=\"nofollow noreferrer\">[dcl.spec.auto]/9</a>:</p>\n\n<blockquote>\n  <p>If a function with a declared return type that uses a placeholder type\n  has no non-discarded return statements, the return type is deduced as\n  though from a return statement with no operand at the closing brace of\n  the function body. [\u2009Example:  </p>\n  \n  <p><code>auto  f() { }                   // OK, return type is void</code></p>\n  \n  <p><code>auto* g() { }                   // error, cannot deduce auto* from void()</code>   </p>\n  \n  <p>\u2014\u2009end example\u2009]</p>\n</blockquote>\n\n<p><a href=\"http://eel.is/c++draft/dcl.type.auto.deduct#2.1\" rel=\"nofollow noreferrer\">[dcl.type.auto.deduct]/(2.1)</a>:</p>\n\n<blockquote>\n  <p>A type <code>T</code> containing a placeholder type, and a corresponding\n  initializer <code>e</code>, are determined as follows:  </p>\n  \n  <p>(2.1) for a non-discarded\n  return statement that occurs in a function declared with a return type\n  that contains a placeholder type, <code>T</code> is the declared return type and <code>e</code>\n  is the operand of the return statement. <strong>If the return statement has no\n  operand, then <code>e</code> is <code>void()</code></strong>;</p>\n  \n  <p>(2.2) for a variable declared with a\n  type that contains a placeholder type, T is the declared type of the\n  variable and e is the initializer. If the initialization is\n  direct-list-initialization, the initializer shall be a\n  braced-init-list containing only a single assignment-expression and e\n  is the assignment-expression;</p>\n  \n  <p>(2.3) for a non-type template\n  parameter declared with a type that contains a placeholder type, T is\n  the declared type of the non-type template parameter and e is the\n  corresponding template argument.</p>\n</blockquote>\n\n<p>According to [dcl.spec.auto]/9 and [dcl.type.auto.deduct]/(2.1) the code should compile. But <a href=\"https://wandbox.org/permlink/nBmb8YD6nukBOb90#result-container-tab-5\" rel=\"nofollow noreferrer\">GCC</a> and cland reject it. What am I missing?</p>\n"}, {"tags": ["c++", "opengl", "sfml"], "comments": [{"owner": {"reputation": 123, "user_id": 9579869, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19161c72929ec5b7748fb89b674df631?s=128&d=identicon&r=PG&f=1", "display_name": "Sean Clarke", "link": "https://stackoverflow.com/users/9579869/sean-clarke"}, "edited": false, "score": 0, "creation_date": 1550698254, "post_id": 54795139, "comment_id": 96369135, "body": "You should read up on SFML / OpenGL integration tutorials supplied by both libraries&#39; sites, <a href=\"https://www.sfml-dev.org/tutorials/2.5/window-opengl.php\" rel=\"nofollow noreferrer\">sfml-dev.org/tutorials/2.5/window-opengl.php</a> and <a href=\"https://open.gl/context\" rel=\"nofollow noreferrer\">open.gl/context</a> (scroll to SFML)"}], "answers": [{"tags": [], "owner": {"reputation": 436, "user_id": 10448683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5pY2C.jpg?s=128&g=1", "display_name": "Cortex", "link": "https://stackoverflow.com/users/10448683/cortex"}, "is_accepted": true, "score": 0, "last_activity_date": 1551083078, "creation_date": 1551083078, "answer_id": 54862109, "question_id": 54795139, "link": "https://stackoverflow.com/questions/54795139/do-i-have-to-use-glad-loader-in-sfml-app/54862109#54862109", "title": "Do I have to use GLAD loader in SFML app?", "body": "<p>Yes, you do need a loader like GLAD to find the opengl functions.</p>\n"}], "owner": {"reputation": 71, "user_id": 8622314, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f13dc26c345edbf797850eaa7dd561bd?s=128&d=identicon&r=PG&f=1", "display_name": "Bill2462", "link": "https://stackoverflow.com/users/8622314/bill2462"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 448, "favorite_count": 0, "accepted_answer_id": 54862109, "answer_count": 1, "score": 0, "last_activity_date": 1551083078, "creation_date": 1550696266, "question_id": 54795139, "link": "https://stackoverflow.com/questions/54795139/do-i-have-to-use-glad-loader-in-sfml-app", "title": "Do I have to use GLAD loader in SFML app?", "body": "<p>I'm using openGL 3.3 to render a 3D scene in an SFML window. \nDo I still have to use GLAD in order to load openGL library or is loader already implemented into the sf::RenderWindow class?</p>\n"}, {"tags": ["c++", "arrays", "initialization"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 2, "creation_date": 1550695138, "post_id": 54794839, "comment_id": 96367736, "body": "I&#39;m not sure what you think &quot;initialized&quot; means, but 4196112 is evidence that the array is <i>not</i> initialized, at least not zero initialized. Since you never supply any values for <code>numbers</code>, the best you can hope for in all these cases is for your array to be zero initialized. So 4196112 can&#39;t arise in these examples if you are actually initializing your array.."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1550695368, "post_id": 54794839, "comment_id": 96367844, "body": "To follow up on my previous comment, an initialized variable has some known value. An uninitialized variable has an indeterminate value. An initialized variable does not mean a variable with a non-zero value."}], "answers": [{"comments": [{"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 2, "creation_date": 1550695438, "post_id": 54794890, "comment_id": 96367880, "body": "<i>UNLESS</i> the array is declared in global scope, in which case it IS initialized with zeros, even without an explicit <code>= {}</code> initializer."}, {"owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "edited": false, "score": 1, "creation_date": 1550695586, "post_id": 54794890, "comment_id": 96367956, "body": "I would clarify that aggregate initialization lets you specify values for elements in the aggregate, but then value-initializes all the remaining ones."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1550696573, "post_id": 54794890, "comment_id": 96368417, "body": "Global scope of namespace scope? Edit : I believe static and thread local storage also gets zero initialized."}, {"owner": {"reputation": 233613, "user_id": 14065, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e1475012bb1630271c9165899bccd548?s=128&d=identicon&r=PG", "display_name": "Martin York", "link": "https://stackoverflow.com/users/14065/martin-york"}, "edited": false, "score": 0, "creation_date": 1550696859, "post_id": 54794890, "comment_id": 96368524, "body": "<code>Iff the array is declared in global scope</code>: Almost. If the array is &quot;Static Storage Duration&quot; which includes global scope and static variables in function scope."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1550697379, "post_id": 54794890, "comment_id": 96368748, "body": "Updated the answer. Better now?"}], "tags": [], "owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "is_accepted": true, "score": 3, "last_activity_date": 1550697350, "last_edit_date": 1550697350, "creation_date": 1550695233, "answer_id": 54794890, "question_id": 54794839, "link": "https://stackoverflow.com/questions/54794839/what-counts-as-an-array-with-no-initialization/54794890#54794890", "title": "What counts as an array with no initialization?", "body": "<p><code>int numbers[SIZE] = {}</code> performs agregate initialization, which for <code>int</code>s means value initialization, which means they all get initialized to 0.</p>\n\n<p><code>int numbers[SIZE];</code> declares an array of uninitialised <code>int</code>s.</p>\n\n<p>Note: Iff the array has static storage duration, it IS initialized with zeros, even without an explicit = {}.</p>\n\n<p>Also, agregate initialization lets you specify some initializers and the rest will then be initialized to zero (or whatever is the default for their type).</p>\n"}], "owner": {"reputation": 13, "user_id": 10282112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/43a4bf1b4303ad7e57a7d668004b3f04?s=128&d=identicon&r=PG&f=1", "display_name": "juan ", "link": "https://stackoverflow.com/users/10282112/juan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 54794890, "answer_count": 1, "score": -3, "last_activity_date": 1550697350, "creation_date": 1550695038, "question_id": 54794839, "link": "https://stackoverflow.com/questions/54794839/what-counts-as-an-array-with-no-initialization", "title": "What counts as an array with no initialization?", "body": "<p>I'm not sure about this two options:</p>\n\n<p>example 1:</p>\n\n<pre><code>const int SIZE = 4;\n\nint numbers[SIZE] = {};  //is this array initialized?\n\ncout &lt;&lt; numbers[0];\n</code></pre>\n\n<p>example 2:</p>\n\n<pre><code>const int SIZE = 4;\n\nint numbers[SIZE]; // is this array initialized?\n\ncout &lt;&lt; numbers[0];\n</code></pre>\n\n<p>The problem with the second one is that the output is 4196112.</p>\n\n<p>That means that \"int numbers[SIZE] = { }\" is not initialized right?</p>\n"}, {"tags": ["c++", "c++11", "gcc", "visual-c++"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 5, "creation_date": 1550693988, "post_id": 54794587, "comment_id": 96367244, "body": "Looks like a bug to me."}, {"owner": {"reputation": 1167, "user_id": 5339807, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed5db3c9fa9b80760fc44ae03008f7a1?s=128&d=identicon&r=PG&f=1", "display_name": "mascoj", "link": "https://stackoverflow.com/users/5339807/mascoj"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1550694362, "post_id": 54794587, "comment_id": 96367413, "body": "@NathanOliver Fun stuff. I&#39;ll have to submit a bug to Microsoft when I get a chance."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1550694627, "post_id": 54794587, "comment_id": 96367524, "body": "@NathanOliver looking at  <a href=\"https://en.cppreference.com/w/cpp/utility/functional/function/function\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/utility/functional/function/functi&zwnj;&#8203;on</a> I can&#39;t see anything which explicitly forbids that constructor..."}, {"owner": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "edited": false, "score": 10, "creation_date": 1550694693, "post_id": 54794587, "comment_id": 96367546, "body": "It&#39;s just the usual &quot;MSVC allows temporary to bind to lvalue reference&quot;. Compile with <code>&#47;Zc:referenceBinding</code> and it won&#39;t compile."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 1, "creation_date": 1550695124, "post_id": 54794587, "comment_id": 96367728, "body": "@SergeyA I believe the note on constructor 5 has the reason (<i>This constructor does not participate in overload resolution unless f is Callable for argument types <code>Args...</code> and return type <code>R</code>.</i>).  <code>std::function&lt;bool(InputStruct)&gt;</code> can take a rvalue, but <code>[](InputStruct &amp; in)-&gt;bool</code> can&#39;t, so it should fail."}, {"owner": {"reputation": 1167, "user_id": 5339807, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed5db3c9fa9b80760fc44ae03008f7a1?s=128&d=identicon&r=PG&f=1", "display_name": "mascoj", "link": "https://stackoverflow.com/users/5339807/mascoj"}, "reply_to_user": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "edited": false, "score": 0, "creation_date": 1550695539, "post_id": 54794587, "comment_id": 96367939, "body": "@geza I didn&#39;t think that flag applied to function types as well, but you are correct that adding that flag causes compilation to fail."}, {"owner": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "edited": false, "score": 0, "creation_date": 1550696143, "post_id": 54794587, "comment_id": 96368207, "body": "@mascoj: I&#39;m not sure I understand you. This option applies to all non-const lvalue references, it doesn&#39;t matter in what context it is written."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1550696284, "post_id": 54794587, "comment_id": 96368281, "body": "@NathanOliver, sure, but the way I read it, <code>Args...</code> in this conext would refer to non-const qualified <code>InputStruct</code> objects, which are not rvalues - and <code>InputStruct&amp; </code>should be able to bind to those?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 2, "creation_date": 1550696520, "post_id": 54794587, "comment_id": 96368391, "body": "@SergeyA If they are lvalues, sure.  The problem is <code>std::function</code>&#39;s <code>operator()</code> is going to call <code>INVOKE&lt;R&gt;(f, std::forward&lt;Args&gt;(args)...)</code> for the underlying function object and if an rvalue is passed to <code>operator()</code> then the underlying function object will get an rvalue, which can&#39;t bind to an lvalue reference."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1550700141, "post_id": 54794587, "comment_id": 96369870, "body": "@NathanOliver sure, but the error seems to be reported at the constructor, not when the callable is called - and I am just not sure what specific wording prohibit calling the constructor."}, {"owner": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1550701388, "post_id": 54794587, "comment_id": 96370299, "body": "@SergeyA: the constructor has to create a function (instantiate a wrapper) which does the call. So the compilation cannot succeed. And I think that the constructor actually disabled with SFINAE (to get a good quality error message, instead of getting a huge hard-to-read error message pointing deep inside the implementation of <code>std::function</code>)."}, {"owner": {"reputation": 17343, "user_id": 445976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c82b2b9bdcf1baaf4677238d59cf745f?s=128&d=identicon&r=PG", "display_name": "Blastfurnace", "link": "https://stackoverflow.com/users/445976/blastfurnace"}, "edited": false, "score": 0, "creation_date": 1550703526, "post_id": 54794587, "comment_id": 96371052, "body": "@mascoj Instead of setting that single compiler option you might consider using the <a href=\"https://docs.microsoft.com/en-us/cpp/build/reference/permissive-standards-conformance?view=vs-2017\" rel=\"nofollow noreferrer\"><code>&#47;permissive-</code></a> option. It enables <a href=\"https://docs.microsoft.com/en-us/cpp/build/reference/zc-conformance?view=vs-2017\" rel=\"nofollow noreferrer\">additional options</a> for more standards-conforming behavior."}, {"owner": {"reputation": 1167, "user_id": 5339807, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed5db3c9fa9b80760fc44ae03008f7a1?s=128&d=identicon&r=PG&f=1", "display_name": "mascoj", "link": "https://stackoverflow.com/users/5339807/mascoj"}, "reply_to_user": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "edited": false, "score": 0, "creation_date": 1550706427, "post_id": 54794587, "comment_id": 96371883, "body": "@geza Sorry my terminology isn&#39;t the best way to describe what I am saying. I guess what I am stuck on is <code>std::function&lt;bool(InputStruct)&gt; func1</code> and <code>std::function&lt;bool(InputStruct&amp;)&gt; func2</code> are different types no? Without the <code>&#47;Zc:referenceBinding</code> flag, how is <code>func1 = func2</code> a valid operation?"}, {"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 0, "creation_date": 1550724961, "post_id": 54794587, "comment_id": 96376185, "body": "<code>std::function</code> can wrap any compatible callable object. <code>func2</code> is a callable object. It wouldn&#39;t normally be compatible (<code>func1</code> takes its argument by value and passes it along to a callable that wants it by non-const reference), but MSVC allows such forwarding."}], "answers": [{"comments": [{"owner": {"reputation": 1167, "user_id": 5339807, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed5db3c9fa9b80760fc44ae03008f7a1?s=128&d=identicon&r=PG&f=1", "display_name": "mascoj", "link": "https://stackoverflow.com/users/5339807/mascoj"}, "edited": false, "score": 0, "creation_date": 1550770425, "post_id": 54802687, "comment_id": 96402725, "body": "Well put. Thank you for the full breakdown."}], "tags": [], "owner": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "is_accepted": true, "score": 6, "last_activity_date": 1550742356, "last_edit_date": 1550742356, "creation_date": 1550738655, "answer_id": 54802687, "question_id": 54794587, "link": "https://stackoverflow.com/questions/54794587/why-does-this-incorrect-stdfunction-initialization-compile-using-msvc/54802687#54802687", "title": "Why does this incorrect std::function initialization compile using MSVC?", "body": "<p>In summary: it is not a compiler bug. MSVC accepts this code because of its default non-conforming behavior, but it can be made standard-conforming with a switch.</p>\n\n<p>First of all, I need to clarify <code>std::function</code>'s one aspect: it accepts a function (in general, <em>Callable</em>) which signature is not a perfect match, but the parameters can be converted. Consider:</p>\n\n<pre><code>using intFn = void (int);\nvoid fn(short);\n\nintFn *a = fn;               // doesn't compile\nstd::function&lt;intFn&gt; b = fn; // compiles!\n</code></pre>\n\n<p>Here, <code>intFn</code> a function type which has an <code>int</code> parameter, while the function <code>fn</code> has a <code>short</code> parameter. The simple function pointer <code>a</code>, cannot be set to point to <code>fn</code>, as the type of the parameter differ (<code>int</code> vs <code>short</code>). But, <code>std::function</code> allows this, so <code>b</code> can be set to point to <code>fn</code>.</p>\n\n<p>In your example, <code>std::function</code> has an <code>InputStruct</code> parameter by value, while the lambda has a non-const lvalue reference <code>InputStruct &amp;</code>. When <code>std::function</code> <code>std::forward</code>s its parameter, it becomes an xvalue, which cannot be bound to the lambda's lvalue reference parameter. That's why standard conforming compilers don't accept this code.</p>\n\n<p>Why does MSVC accept this code? Because it has non-conforming behavior by default: it allows binding class temporaries (and xvalues) to non-const lvalue references. You can disable this behavior with <code>/Zc:referenceBinding</code> (or the older <code>/Za</code> option). If you use this switch, MSVC rejects your example.</p>\n"}], "owner": {"reputation": 1167, "user_id": 5339807, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed5db3c9fa9b80760fc44ae03008f7a1?s=128&d=identicon&r=PG&f=1", "display_name": "mascoj", "link": "https://stackoverflow.com/users/5339807/mascoj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 231, "favorite_count": 1, "accepted_answer_id": 54802687, "answer_count": 1, "score": 6, "last_activity_date": 1550742356, "creation_date": 1550693833, "last_edit_date": 1550695866, "question_id": 54794587, "link": "https://stackoverflow.com/questions/54794587/why-does-this-incorrect-stdfunction-initialization-compile-using-msvc", "title": "Why does this incorrect std::function initialization compile using MSVC?", "body": "<p>Came across an interesting issue today started by my own typo. I created a lambda that takes in a reference to a struct and incorrectly set it to a std::function that receives it's argument by value.</p>\n\n<p>Here's a more concise version:</p>\n\n<pre><code>#include &lt;functional&gt;\n\nstruct InputStruct\n{\n    int i;\n    InputStruct(): i(1){}\n};\n\nvoid function_rcv(std::function&lt;bool(InputStruct)&gt; &amp; func_ref)\n{\n    InputStruct in;\n    func_ref(in);\n}\n\n\nint main()\n{\n    std::function&lt;bool(InputStruct)&gt; my_func = [](InputStruct &amp; in)-&gt;bool{return in.i==1;};\n    function_rcv(my_func);\n}\n</code></pre>\n\n<p>Checking with <a href=\"https://godbolt.org\" rel=\"nofollow noreferrer\">godbolt</a> shows this compiles successfully with MSVC, but fails for both Clang and GCC.</p>\n\n<p>Interestingly enough, using a primitive instead of a struct fails compilation on all three compilers.</p>\n\n<p>Is this a bug in the MSVC compiler?</p>\n"}, {"tags": ["c++", "multidimensional-array", "text-files"], "comments": [{"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1550692352, "post_id": 54794199, "comment_id": 96366486, "body": "You potentially have a huge memory leak if you determine the file is corrupted.  You failed to <code>delete  []</code> the memory."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 2, "creation_date": 1550692418, "post_id": 54794199, "comment_id": 96366513, "body": "I suggest using <code>num_rows</code> and <code>num_columns</code> instead of <code>height</code> and <code>length</code> to avoid confusion."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 4, "creation_date": 1550692572, "post_id": 54794199, "comment_id": 96366580, "body": "Stop using manual memory management (<code>new</code>/<code>delete</code>) and raw pointers. Embrace <code>std::array</code>, <code>std::vector</code>, <code>std::unique_ptr</code>, <code>std::shared_ptr</code> and friends... Write <i>modern</i> C++, not C++98."}, {"owner": {"reputation": 49, "user_id": 8768697, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/35dkB.jpg?s=128&g=1", "display_name": "Spago", "link": "https://stackoverflow.com/users/8768697/spago"}, "reply_to_user": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1550692609, "post_id": 54794199, "comment_id": 96366601, "body": "@RSahu I <i>really</i> wish I could, as it&#39;s been extremely confusing for me as well... However the function prototypes were given to us by our professor with these parameters and I&#39;m not sure if I&#39;d be allowed to change it."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1550692720, "post_id": 54794199, "comment_id": 96366648, "body": "Also if <code>new</code> throws an exception, how do you intend to rollback the memory you allocated?  What if the file is a milion lines, and an allocation failure occurs when reading line 784,512?  That is one reason why your method is one of the worst ways to do this, and the reason why classes such as <code>vector</code> exists."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1550692766, "post_id": 54794199, "comment_id": 96366661, "body": "@Spago, You should be able to. After all, you are implementing them."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1550692996, "post_id": 54794199, "comment_id": 96366761, "body": "Note: Do what you have to do to get a good grade, but in the real world you would not pass around a pointer, an <code>int</code> and an <code>int</code>. You would aggregate them into a data structure. Bonus points for applying <a href=\"https://stackoverflow.com/questions/2321511/what-is-meant-by-resource-acquisition-is-initialization-raii\">RAII</a> and taking the <a href=\"https://en.cppreference.com/w/cpp/language/rule_of_three\" rel=\"nofollow noreferrer\">Rule of Three/Five</a> into account (or reworking the code to take advantage of the Rule of Zero)."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 2, "creation_date": 1550693080, "post_id": 54794199, "comment_id": 96366791, "body": "@Spago <a href=\"https://stackoverflow.com/questions/21943621/how-to-create-a-contiguous-2d-array-in-c/21944048#21944048\">See this method</a>.  Two allocations, two deallocations, with rollback."}, {"owner": {"reputation": 49, "user_id": 8768697, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/35dkB.jpg?s=128&g=1", "display_name": "Spago", "link": "https://stackoverflow.com/users/8768697/spago"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1550694098, "post_id": 54794199, "comment_id": 96367285, "body": "@PaulMcKenzie I apologize for not showing enough of my code, it&#39;s been updated with the <code>free</code> function showing. Also thank you for all the advice, I have no doubt the methods you&#39;ve been showing me are far better than what I&#39;ve been doing here, I just wish I could use them (have yet to learn <code>vectors</code> or <code>templates</code> in class)!"}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 1, "creation_date": 1550696459, "post_id": 54794199, "comment_id": 96368369, "body": "@Spago If you remove the <code>template</code> line and replace <code>T</code> with <code>int</code> elsewhere from the answer Paul linked to, you&#39;ll have your 2D array of <code>int</code> that you can work with - but in a safer way."}], "answers": [{"comments": [{"owner": {"reputation": 49, "user_id": 8768697, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/35dkB.jpg?s=128&g=1", "display_name": "Spago", "link": "https://stackoverflow.com/users/8768697/spago"}, "edited": false, "score": 0, "creation_date": 1550693873, "post_id": 54794230, "comment_id": 96367195, "body": "Ah yes, thank you @rsjaffe for that. Was wondering why it was never printing out correctly. I&#39;ve edited my code with that change, among a few other things as well if you can spot any more errors."}, {"owner": {"reputation": 4955, "user_id": 5699329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/86758f7ce8c15546da5968c504360e55?s=128&d=identicon&r=PG", "display_name": "rsjaffe", "link": "https://stackoverflow.com/users/5699329/rsjaffe"}, "reply_to_user": {"reputation": 49, "user_id": 8768697, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/35dkB.jpg?s=128&g=1", "display_name": "Spago", "link": "https://stackoverflow.com/users/8768697/spago"}, "edited": false, "score": 1, "creation_date": 1550694722, "post_id": 54794230, "comment_id": 96367557, "body": "You should have only one question per posting. This is how the format of StackOverflow works. If you have another question, ask it separately, and edit your code <i>in that new question</i> to display a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> for that issue."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 1, "creation_date": 1550694912, "post_id": 54794230, "comment_id": 96367630, "body": "&quot;<i>I&#39;ve edited my code with that change, among a few other things as well if you can spot any more errors</i>&quot; - StackOverflow is not meant for code reviews.  That is what <a href=\"https://codereview.stackexchange.com\">Code Review</a> is meant for instead."}, {"owner": {"reputation": 49, "user_id": 8768697, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/35dkB.jpg?s=128&g=1", "display_name": "Spago", "link": "https://stackoverflow.com/users/8768697/spago"}, "edited": false, "score": 0, "creation_date": 1550704820, "post_id": 54794230, "comment_id": 96371423, "body": "@rsjaffe I apologize for not being clear. I&#39;m still getting the same segmentation fault error, I just updated my question to show more code, in case what I had shown wasn&#39;t enough to show the actual cause of my error."}, {"owner": {"reputation": 49, "user_id": 8768697, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/35dkB.jpg?s=128&g=1", "display_name": "Spago", "link": "https://stackoverflow.com/users/8768697/spago"}, "edited": false, "score": 0, "creation_date": 1550705235, "post_id": 54794230, "comment_id": 96371550, "body": "I should add that this was indeed the cause of my segmentation fault. I did the same thing in a <code>save()</code> function as well, so my issue is now solved. Thanks again! @rsjaffe"}], "tags": [], "owner": {"reputation": 4955, "user_id": 5699329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/86758f7ce8c15546da5968c504360e55?s=128&d=identicon&r=PG", "display_name": "rsjaffe", "link": "https://stackoverflow.com/users/5699329/rsjaffe"}, "is_accepted": true, "score": 5, "last_activity_date": 1550692241, "creation_date": 1550692241, "answer_id": 54794230, "question_id": 54794199, "link": "https://stackoverflow.com/questions/54794199/getting-segmentation-fault-error-when-trying-to-load-text-file-into-a-dynamica/54794230#54794230", "title": "Getting &#39;Segmentation fault&#39; error when trying to load text file into a dynamically allocated 2d array", "body": "<p>You've swapped <code>length</code> and <code>height</code> in function <code>show</code>. The outer loop should be <code>height</code> and the inner <code>length</code>.</p>\n"}], "owner": {"reputation": 49, "user_id": 8768697, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/35dkB.jpg?s=128&g=1", "display_name": "Spago", "link": "https://stackoverflow.com/users/8768697/spago"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "accepted_answer_id": 54794230, "answer_count": 1, "score": 0, "last_activity_date": 1550694786, "creation_date": 1550692078, "last_edit_date": 1550694786, "question_id": 54794199, "link": "https://stackoverflow.com/questions/54794199/getting-segmentation-fault-error-when-trying-to-load-text-file-into-a-dynamica", "title": "Getting &#39;Segmentation fault&#39; error when trying to load text file into a dynamically allocated 2d array", "body": "<p>I'm not sure exactly what is causing this error, as the code was working for a little while, but I must've changed something that messed it up and I've never been able to get it working again.</p>\n\n<p>This is the data in the text file being loaded into the 2d array:</p>\n\n<pre>\n10  8\n0   255 255 255 0   0   255 255 255 0\n255 0   255 255 0   0   255 255 0   255\n255 255 0   255 255 255 255 0   255 255\n255 255 255 0   255 255 0   255 255 255\n255 255 255 255 0   0   255 255 255 255\n255 255 255 255 0   0   255 255 255 255\n255 255 255 0   255 255 0   255 255 255\n0   0   0   255 255 255 255 0   0   0\n</pre>\n\n<p><code>10/8</code> being the length/height of the array. <code>imagecorrupted.txt</code> is the same as above, but it has a <code>355</code> instead of a <code>255</code> somewhere in the data. </p>\n\n<p>This is the relevant code I've come up with so far:</p>\n\n<pre><code>int** load(string imageFile, int &amp;length, int &amp;height) {\n    ifstream file(imageFile);\n    if(file.is_open()) {\n        file &gt;&gt; length; // Loads 10 into length\n        file &gt;&gt; height; // Loads 8 into height\n        int** array = new int*[height];\n        for(int i = 0; i &lt; height; i++) {\n            array[i] = new int[length];\n        }\n        for(int i = 0; i &lt; height; i++) {\n            for(int j = 0; j &lt; length; j++) {\n                file &gt;&gt; array[i][j];\n                if(array[i][j] &gt; 255 || array[i][j] &lt; 0) {\n                    cout &lt;&lt; \"Image is corrupted.\" &lt;&lt; endl;\n                    file.close();\n                    return nullptr;\n                }\n            }\n        }\n        file.close();\n        return array;\n    }\n    else {\n        cout &lt;&lt; \"Unable to open file.\" &lt;&lt; endl;\n        return nullptr;\n    }\n}\n\nvoid show(int **image, int length, int height) {\n    cout &lt;&lt; \"The height of the matrix is: \" &lt;&lt; height &lt;&lt; endl;\n    cout &lt;&lt; \"The length of the matrix is: \" &lt;&lt; length &lt;&lt; endl;\n    cout &lt;&lt; \"The matrix is: \" &lt;&lt; endl;\n    for(int i = 0; i &lt; height; i++) {\n        for(int j = 0; j &lt; length; j++) {\n            cout &lt;&lt; \" \" &lt;&lt; image[i][j]; \n        }\n        cout &lt;&lt; endl;\n    }\n}\n\nvoid invert(int **image, int length, int height) {\n    for(int i = 0; i &lt; height; i++) {\n        for(int j = 0; j &lt; length; j++) {\n            if(image[i][j] == 255) {\n                image[i][j] = 0;\n            }\n            else {\n                image[i][j] = 255;\n            }\n        }\n        cout &lt;&lt; endl;\n    }\n}\n\nvoid free(int **image, int &amp;length, int &amp;height) {\n    if(image) {\n        for(int i = 0; i &lt; height; i++) {\n            if(image[i]) {\n                delete[] image[i];\n            }\n        }\n        delete[] image;\n    }\n}\n\nint main() {\n    int height = 0;\n    int length = 0;\n    int** image = 0;\n    image = load(\"../resource/imagecorrupted.txt\", length, height);\n    image = load(\"../resource/image.txt\", length, height);\n    show(image, length, height);\n    invert(image, length, height);\n    show(image length, height);\n    free(image, length, height);\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre>\nImage is corrupted.\nThe height of the matrix is: 8\nThe length of the matrix is: 10\nThe matrix is: \n 0 255 255 255 0 0 255 255 255 0\n 255 0 255 255 0 0 255 255 0 255\n 255 255 0 255 255 255 255 0 255 255\n 255 255 255 0 255 255 0 255 255 255\n 255 255 255 255 0 0 255 255 255 255\n 255 255 255 255 0 0 255 255 255 255\n 255 255 255 0 255 255 0 255 255 255\n 0 0 0 255 255 255 255 0 0 0\n// bunch of whitespace\n-bash: line x: xxxxx Segemntation fault\n</pre>\n\n<p>I should add that this is an assignment from class, so there are certain things I'm restricted in doing (Ex. needs to be 2d array instead of vectors).</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1550689363, "post_id": 54793479, "comment_id": 96365058, "body": "<code>const T&amp;&amp;</code> is almost never what you want.  remove the <code>const</code> and compile again."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 1, "creation_date": 1550689438, "post_id": 54793479, "comment_id": 96365094, "body": "The code you posted doesn&#39;t compile for me with g++."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 0, "creation_date": 1550689727, "post_id": 54793479, "comment_id": 96365243, "body": "It&#39;s not the GCC version - it&#39;s simply not compilable code."}, {"owner": {"reputation": 1141, "user_id": 5110937, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b1eb5d8ad4966cf91c9e4088cbfd9e1?s=128&d=identicon&r=PG&f=1", "display_name": "rafoo", "link": "https://stackoverflow.com/users/5110937/rafoo"}, "edited": false, "score": 0, "creation_date": 1550689957, "post_id": 54793479, "comment_id": 96365352, "body": "My g++ version compiles it, but call to this function does not compile. The question was about the function implementation itself"}, {"owner": {"reputation": 1141, "user_id": 5110937, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b1eb5d8ad4966cf91c9e4088cbfd9e1?s=128&d=identicon&r=PG&f=1", "display_name": "rafoo", "link": "https://stackoverflow.com/users/5110937/rafoo"}, "edited": false, "score": 0, "creation_date": 1550690947, "post_id": 54793479, "comment_id": 96365777, "body": "And particulary, the statement &quot;a parameter of category value can&#39;t be overloaded by a parameter of category rvalue or lvalue&quot;"}], "answers": [{"tags": [], "owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "is_accepted": false, "score": 1, "last_activity_date": 1550691140, "last_edit_date": 1550691140, "creation_date": 1550689871, "answer_id": 54793665, "question_id": 54793479, "link": "https://stackoverflow.com/questions/54793479/why-doew-gcc-compiles-function-overloaded-with-value-rvalue-and-lvalue-paramete/54793665#54793665", "title": "Why doew GCC compiles function overloaded with value, rvalue and lvalue parameter?", "body": "<p>The overloads are indeed conflicting (ambiguous) under ordinary overload resolution, but they are still resolvable by explicit means</p>\n\n<pre><code>T a;\nstatic_cast&lt;void(*)(T)&gt;(fun)(a);         // calls `T` version\nstatic_cast&lt;void(*)(const T &amp;)&gt;(fun)(a); // calls `const T &amp;` version\n</code></pre>\n\n<p>although I don't immediately see any use case for it.</p>\n\n<p>As for <code>const T &amp;&amp;</code> overload - it has some narrow applicability if you for some reason want to prohibit calling your <code>const T &amp;</code> function with non-lvalue arguments</p>\n\n<pre><code>void fun(const T &amp;) {}\nvoid fun(const T &amp;&amp;) = delete;\n\nint main()\n{\n  T t;\n  fun(t); // OK\n  fun(T()); // Error\n}\n</code></pre>\n\n<p>See, for example, how it is done for <a href=\"https://en.cppreference.com/w/cpp/utility/functional/ref\" rel=\"nofollow noreferrer\">std::ref, std::cref</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 1141, "user_id": 5110937, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b1eb5d8ad4966cf91c9e4088cbfd9e1?s=128&d=identicon&r=PG&f=1", "display_name": "rafoo", "link": "https://stackoverflow.com/users/5110937/rafoo"}, "edited": false, "score": 0, "creation_date": 1550690881, "post_id": 54793689, "comment_id": 96365743, "body": "Ok, I see. Thank you. So a function with non-reference parameter can, with ambiguation (resolved by <code>static_cast</code>), be overloaded by l- or r-value reference"}], "tags": [], "owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "is_accepted": false, "score": 0, "last_activity_date": 1550690001, "creation_date": 1550690001, "answer_id": 54793689, "question_id": 54793479, "link": "https://stackoverflow.com/questions/54793479/why-doew-gcc-compiles-function-overloaded-with-value-rvalue-and-lvalue-paramete/54793689#54793689", "title": "Why doew GCC compiles function overloaded with value, rvalue and lvalue parameter?", "body": "<p>I'll assume that you have defined the type <code>T</code> somewhere preceding this code snippet. Otherwise, of course, the code would not compile.</p>\n\n<p>It's not <em>quite</em> true that if one overload takes <code>T</code> and one takes <code>const T&amp;</code>, then overload resolution can never select one of them over the other. For example, if the argument has type <code>volatile T</code>, then the overload taking <code>T</code> must be selected over the one taking <code>const T&amp;</code>. This corner case aside, though, these functions are always <em>individually</em> callable by bypassing overload resolution entirely:</p>\n\n<pre><code>static_cast&lt;void(*)(T)&gt;(fun)(x);  // calls void fun(T) on x\n</code></pre>\n\n<p>It's not the compiler's job to <em>prevent</em> you from declaring functions that pose issues for overload resolution. A good compiler might, perhaps, <em>warn</em> you; but then again, I don't think such a warning is necessary, since almost no programmer would write code like this, other than as an experiment.</p>\n"}], "owner": {"reputation": 1141, "user_id": 5110937, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b1eb5d8ad4966cf91c9e4088cbfd9e1?s=128&d=identicon&r=PG&f=1", "display_name": "rafoo", "link": "https://stackoverflow.com/users/5110937/rafoo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1550691140, "creation_date": 1550689184, "last_edit_date": 1550691062, "question_id": 54793479, "link": "https://stackoverflow.com/questions/54793479/why-doew-gcc-compiles-function-overloaded-with-value-rvalue-and-lvalue-paramete", "title": "Why doew GCC compiles function overloaded with value, rvalue and lvalue parameter?", "body": "<p>I don't understand why this code compiles:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nclass T {\n};\n\n\nvoid fun(T) {\n    std::cout &lt;&lt; __PRETTY_FUNCTION__ &lt;&lt; std::endl;\n}\n\nvoid fun(const T&amp;) { // Why does this compile?\n    std::cout &lt;&lt; __PRETTY_FUNCTION__ &lt;&lt; std::endl;\n}\n\nvoid fun(const T&amp;&amp;) { // Why does this compile?\n\n}\n\n\nint main() {\n    return 0;\n}\n</code></pre>\n\n<p>The overloads <code>T</code> and <code>const T&amp;</code> are always conflicting, so I don't understand why GCC compiles it.\nI have readen that like \"a parameter of category value can't be overloaded by a parameter of  rvalue or lvalue\".</p>\n\n<p>If the overload with <code>T</code> and <code>const T&amp;&amp;</code> works, does it mean that it will be impossible to pass a rvalue to this function in any way, because any call would be ambiguous ? Or is it a way to disambiguiate the call ?</p>\n\n<p><strong>GCC Version:</strong> gcc version 7.3.0 (Ubuntu 7.3.0-27ubuntu1~18.04)\n<code>__cplusplus = 201103</code> </p>\n"}, {"tags": ["c++", "arrays", "pointers", "go", "swig"], "comments": [{"owner": {"reputation": 11096, "user_id": 2749717, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46af1ef54856d737d52b7667afd240ee?s=128&d=identicon&r=PG&f=1", "display_name": "bipll", "link": "https://stackoverflow.com/users/2749717/bipll"}, "edited": false, "score": 0, "creation_date": 1550688609, "post_id": 54793264, "comment_id": 96364695, "body": "Pass them as slices?"}, {"owner": {"reputation": 147, "user_id": 10993065, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-PZLWmOv3CZA/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQNmAN159G1YjShfR7djjUTcR0NtlA/mo/photo.jpg?sz=128", "display_name": "Daniel Ramsey", "link": "https://stackoverflow.com/users/10993065/daniel-ramsey"}, "reply_to_user": {"reputation": 11096, "user_id": 2749717, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46af1ef54856d737d52b7667afd240ee?s=128&d=identicon&r=PG&f=1", "display_name": "bipll", "link": "https://stackoverflow.com/users/2749717/bipll"}, "edited": false, "score": 0, "creation_date": 1550688834, "post_id": 54793264, "comment_id": 96364805, "body": "I must return the pointer from the function. I don&#39;t think slices is the correct play but would be happy to be proven wrong with example code. I think the issue could be how the pointer loses address as it goes from c++ to Go. Thanks for the reply"}, {"owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 1, "creation_date": 1550689159, "post_id": 54793264, "comment_id": 96364956, "body": "related questions: <a href=\"https://stackoverflow.com/questions/28925179/cgo-how-to-pass-struct-array-from-c-to-go\" title=\"cgo how to pass struct array from c to go\">stackoverflow.com/questions/28925179/&hellip;</a>, <a href=\"https://stackoverflow.com/questions/43330938/export-function-that-returns-array-of-doubles\" title=\"export function that returns array of doubles\">stackoverflow.com/questions/43330938/&hellip;</a>, <a href=\"https://stackoverflow.com/questions/36542385/casting-a-cgo-array-into-a-slice\" title=\"casting a cgo array into a slice\">stackoverflow.com/questions/36542385/&hellip;</a>, <a href=\"https://stackoverflow.com/questions/47354663/access-c-array-of-type-const-char-from-go/47355217\" title=\"access c array of type const char from go\">stackoverflow.com/questions/47354663/&hellip;</a>, <a href=\"https://stackoverflow.com/questions/42530538/how-to-pass-pointer-to-slice-to-c-function-in-go/42533858\" title=\"how to pass pointer to slice to c function in go\">stackoverflow.com/questions/42530538/&hellip;</a>"}, {"owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 0, "creation_date": 1550689331, "post_id": 54793264, "comment_id": 96365043, "body": "have you tried this? <a href=\"https://github.com/golang/go/wiki/cgo#turning-c-arrays-into-go-slices\" rel=\"nofollow noreferrer\">github.com/golang/go/wiki/cgo#turning-c-arrays-into-go-slice&zwnj;&#8203;s</a>"}, {"owner": {"reputation": 147, "user_id": 10993065, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-PZLWmOv3CZA/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQNmAN159G1YjShfR7djjUTcR0NtlA/mo/photo.jpg?sz=128", "display_name": "Daniel Ramsey", "link": "https://stackoverflow.com/users/10993065/daniel-ramsey"}, "reply_to_user": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 0, "creation_date": 1550691044, "post_id": 54793264, "comment_id": 96365813, "body": "@JimB all of your links are for C -&gt; Go. Would my case be different if C++ -&gt; Go?"}, {"owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 0, "creation_date": 1550691465, "post_id": 54793264, "comment_id": 96366015, "body": "Go only has a C interface (cgo), that&#39;s why you&#39;re using SWIG, to write the C interface for you."}, {"owner": {"reputation": 147, "user_id": 10993065, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-PZLWmOv3CZA/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQNmAN159G1YjShfR7djjUTcR0NtlA/mo/photo.jpg?sz=128", "display_name": "Daniel Ramsey", "link": "https://stackoverflow.com/users/10993065/daniel-ramsey"}, "reply_to_user": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 0, "creation_date": 1550692574, "post_id": 54793264, "comment_id": 96366581, "body": "@JimB Could you possibly provide a road map for tackling this problem?"}, {"owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 0, "creation_date": 1550693787, "post_id": 54793264, "comment_id": 96367154, "body": "@DanielRamsey: Can you explain which part you don&#39;t understand? If <code>pSrc</code> is a pointer, those 6 other examples all demonstrate accessing it as a go slice."}, {"owner": {"reputation": 147, "user_id": 10993065, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-PZLWmOv3CZA/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQNmAN159G1YjShfR7djjUTcR0NtlA/mo/photo.jpg?sz=128", "display_name": "Daniel Ramsey", "link": "https://stackoverflow.com/users/10993065/daniel-ramsey"}, "reply_to_user": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 0, "creation_date": 1550696239, "post_id": 54793264, "comment_id": 96368254, "body": "@JimB I dont understand how those 6 examples apply to my case because they all use C, not C++"}, {"owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 1, "creation_date": 1550696506, "post_id": 54793264, "comment_id": 96368389, "body": "@DanielRamsey: Again, Go can only call C code, period. C++ code needs a C wrapper, which you&#39;re generating with SWIG. Besides that though, how would the <code>pSrc</code> pointer be any different between C and C++? They are both <code>int*</code>, and the memory layout would be identical. Try using the documented example first, and post any issues you encounter."}, {"owner": {"reputation": 147, "user_id": 10993065, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-PZLWmOv3CZA/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQNmAN159G1YjShfR7djjUTcR0NtlA/mo/photo.jpg?sz=128", "display_name": "Daniel Ramsey", "link": "https://stackoverflow.com/users/10993065/daniel-ramsey"}, "reply_to_user": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 0, "creation_date": 1550700388, "post_id": 54793264, "comment_id": 96369971, "body": "@JimB should I make the changes from from links you shared in the C wrapper the was generated by SWIFT?"}, {"owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 1, "creation_date": 1550700657, "post_id": 54793264, "comment_id": 96370073, "body": "@DanielRamsey: Sorry, I&#39;m not following. If <code>pSrc</code> is the array pointer you want to access, then <code>pSrc</code> is what you want to convert to a slice using the technique shown."}, {"owner": {"reputation": 147, "user_id": 10993065, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-PZLWmOv3CZA/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQNmAN159G1YjShfR7djjUTcR0NtlA/mo/photo.jpg?sz=128", "display_name": "Daniel Ramsey", "link": "https://stackoverflow.com/users/10993065/daniel-ramsey"}, "reply_to_user": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 0, "creation_date": 1550704873, "post_id": 54793264, "comment_id": 96371441, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/188773/discussion-between-daniel-ramsey-and-jimb\">continue this discussion in chat</a>."}, {"owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 0, "creation_date": 1550776225, "post_id": 54793264, "comment_id": 96405527, "body": "See also <a href=\"https://stackoverflow.com/questions/48756732/what-does-1-30c-yourtype-do-exactly-in-cgo\" title=\"what does 1 30c yourtype do exactly in cgo\">stackoverflow.com/questions/48756732/&hellip;</a>, which explains the syntax of the slice conversion."}], "answers": [{"tags": [], "owner": {"reputation": 147, "user_id": 10993065, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-PZLWmOv3CZA/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQNmAN159G1YjShfR7djjUTcR0NtlA/mo/photo.jpg?sz=128", "display_name": "Daniel Ramsey", "link": "https://stackoverflow.com/users/10993065/daniel-ramsey"}, "is_accepted": false, "score": 1, "last_activity_date": 1550707525, "last_edit_date": 1550707525, "creation_date": 1550707005, "answer_id": 54797123, "question_id": 54793264, "link": "https://stackoverflow.com/questions/54793264/c-to-go-using-swig-how-to-pass-c-pointers-to-go/54797123#54797123", "title": "C++ to Go using SWIG: How to pass C++ pointers to Go?", "body": "<p>@JimB Thanks for all of your resources. I figured it out and this seems to do the trick.</p>\n\n<pre><code>int* Camera::retrieveDataPointerPerBuffer() {\n   int cameraData [10] = {1,2,3,4,5,6,7,8,9,10};\n   int* pSrc = cameraData;\n   return cameraData; \n} //camera.cpp\n</code></pre>\n\n<p>Below contains the changes that I made</p>\n\n<pre><code>func myCamera() { //For Goroutine\n   cam := camera.NewCamera()\n   pSrc := cam.RetrieveDataPointerPerBuffer()\n\n   arraySize := 10\n   slice := (*[1 &lt;&lt; 30]C.int)(unsafe.Pointer(pSrc))[:arraySize:arraySize]\n\n   fmt.Println(slice)\n}\n</code></pre>\n\n<p>Output: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]</p>\n\n<p>Follow Up Question: Would anyone mind explaining this line of code?</p>\n\n<pre><code>slice := (*[1 &lt;&lt; 30]C.int)(unsafe.Pointer(pSrc))[:arraySize:arraySize]\n</code></pre>\n"}], "owner": {"reputation": 147, "user_id": 10993065, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-PZLWmOv3CZA/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQNmAN159G1YjShfR7djjUTcR0NtlA/mo/photo.jpg?sz=128", "display_name": "Daniel Ramsey", "link": "https://stackoverflow.com/users/10993065/daniel-ramsey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 323, "favorite_count": 1, "closed_date": 1550707182, "answer_count": 1, "score": 1, "last_activity_date": 1550707525, "creation_date": 1550688403, "question_id": 54793264, "link": "https://stackoverflow.com/questions/54793264/c-to-go-using-swig-how-to-pass-c-pointers-to-go", "closed_reason": "Duplicate", "title": "C++ to Go using SWIG: How to pass C++ pointers to Go?", "body": "<p>See code below and I will explain</p>\n\n<pre><code>int* Camera::retrieveDataPointerPerBuffer() {\n    int cameraData [10] = {1,2,3,4,5,6,7,8,9,10};\n    int* pSrc = cameraData;\n    return cameraData; \n} //camera.cpp\n</code></pre>\n\n<p>The code above has int pointer pSrc pointing to array and then returned. This is a function in C++. Next, I am using SWIG to essentially wrap this C++ function, so that I can call it in Go. The following code demonstrates the function being called in Go. </p>\n\n<pre><code>func myCamera() {\n    cam := camera.NewCamera()\n    pSrc := cam.RetrieveDataPointerPerBuffer()\n\n    for i := 0; i &lt; 10; i++ {\n        fmt.Println(\"%d\", pSrc)\n    }\n} //main.go\n</code></pre>\n\n<p>Note: I know that I cannot iterate pointers in Go. But is there any way?</p>\n\n<p>Output: 0</p>\n\n<p>Problems: How do you access the arrays elements via pointer from C++ to Go?\nAdditional Information: This is a simplified version of a larger project I am working on. I must return this pointer, I cannot return a vector.</p>\n\n<p>Let me know if you need me to clarify anything for you.</p>\n"}, {"tags": ["c++", "windows-10", "multiple-monitors", "highdpi"], "comments": [{"owner": {"reputation": 449, "user_id": 1101955, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/619ab4ed1fc7a0862f2e6382b35eb05a?s=128&d=identicon&r=PG", "display_name": "htonus", "link": "https://stackoverflow.com/users/1101955/htonus"}, "edited": false, "score": 0, "creation_date": 1550691634, "post_id": 54793175, "comment_id": 96366103, "body": "Nobody knows? Minus in the question rating doesn&#39;t help much..."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1550692024, "post_id": 54793175, "comment_id": 96366321, "body": "Jeez, have some patience, you just posted this question an hour ago. You need to give people time to answer. Wait a day or so before complaining. And next time, please do some research before asking questions."}, {"owner": {"reputation": 449, "user_id": 1101955, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/619ab4ed1fc7a0862f2e6382b35eb05a?s=128&d=identicon&r=PG", "display_name": "htonus", "link": "https://stackoverflow.com/users/1101955/htonus"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1550742139, "post_id": 54793175, "comment_id": 96384227, "body": "Was complaining the minuses w/o explanation only. I did a lot of research. All I found is WM_DPICHANGED and WM_DISPLAYCHANGE messages handling. But my app doesn&#39;t have active ones. And the messages triggers only if the app window experiences DPI change. but I need to find the way to capture monitor layout change event or scaling change event."}], "answers": [{"comments": [{"owner": {"reputation": 449, "user_id": 1101955, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/619ab4ed1fc7a0862f2e6382b35eb05a?s=128&d=identicon&r=PG", "display_name": "htonus", "link": "https://stackoverflow.com/users/1101955/htonus"}, "edited": false, "score": 0, "creation_date": 1550741835, "post_id": 54794186, "comment_id": 96384022, "body": "This doesn&#39;t applicable to my app since it doesn&#39;t have active windows. All it does - controls position of the other windows by external request. <code>WM_DPICHANGED</code> and <code>WM_DISPLAYCHANGE</code> works only for windows who belongs to current application."}, {"owner": {"reputation": 1723, "user_id": 2073217, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/066bde403e2c8cac1c76af6a35ad81d9?s=128&d=identicon&r=PG", "display_name": "David Ching", "link": "https://stackoverflow.com/users/2073217/david-ching"}, "reply_to_user": {"reputation": 449, "user_id": 1101955, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/619ab4ed1fc7a0862f2e6382b35eb05a?s=128&d=identicon&r=PG", "display_name": "htonus", "link": "https://stackoverflow.com/users/1101955/htonus"}, "edited": false, "score": 1, "creation_date": 1608133024, "post_id": 54794186, "comment_id": 115490302, "body": "@htonus Create a hidden window so you can receive these messages."}], "tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": false, "score": 1, "last_activity_date": 1550692042, "creation_date": 1550692042, "answer_id": 54794186, "question_id": 54793175, "link": "https://stackoverflow.com/questions/54793175/how-application-can-detect-scaling-and-monitors-layout-change-on-windows-10/54794186#54794186", "title": "How application can detect scaling and monitors layout change on Windows 10", "body": "<p>You need to receive and handle the <a href=\"https://docs.microsoft.com/en-us/windows/desktop/hidpi/wm-dpichanged\" rel=\"nofollow noreferrer\"><code>WM_DPICHANGED</code></a> and <a href=\"https://docs.microsoft.com/en-us/windows/desktop/gdi/wm-displaychange\" rel=\"nofollow noreferrer\"><code>WM_DISPLAYCHANGE</code></a> messages.</p>\n\n<p>I suggest you read MSDN's documentation about <a href=\"https://docs.microsoft.com/en-us/windows/desktop/hidpi/high-dpi-desktop-application-development-on-windows\" rel=\"nofollow noreferrer\">High DPI Desktop Application Development</a> and <a href=\"https://docs.microsoft.com/en-us/windows/desktop/gdi/multiple-display-monitors\" rel=\"nofollow noreferrer\">Multiple Display Monitors</a> for more details.</p>\n"}], "owner": {"reputation": 449, "user_id": 1101955, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/619ab4ed1fc7a0862f2e6382b35eb05a?s=128&d=identicon&r=PG", "display_name": "htonus", "link": "https://stackoverflow.com/users/1101955/htonus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 465, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1550692042, "creation_date": 1550688026, "last_edit_date": 1550691340, "question_id": 54793175, "link": "https://stackoverflow.com/questions/54793175/how-application-can-detect-scaling-and-monitors-layout-change-on-windows-10", "title": "How application can detect scaling and monitors layout change on Windows 10", "body": "<p>I have application that can control other application position. On start it get current monitors' layout and dimensions. They are used to calculate the proper position of the window on the secondary monitor with the different (not default) scaling. But when the user updates the monitors' layout application keeps using initial values. </p>\n\n<p>is there any possibility to capture scaling change or monitors layout change?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1550687892, "post_id": 54793020, "comment_id": 96364347, "body": "Sidenote: The lack of headers included by MemDC.h is going to be a real bummer someday. Every file should contain declarations for all of its requirements to prevent screw-ups when you move stuff around."}, {"owner": {"reputation": 680, "user_id": 5753579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/387135aac6dadd8b9f88471eba3ec316?s=128&d=identicon&r=PG&f=1", "display_name": "For Comment", "link": "https://stackoverflow.com/users/5753579/for-comment"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1550688147, "post_id": 54793020, "comment_id": 96364453, "body": "@user4581301 I&#39;ve removed the headers to make this more concise, I get what you are saying that the headers might have some instructions per this issue, I checked, there isn&#39;t anything relevant to this issue."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1550689076, "post_id": 54793020, "comment_id": 96364922, "body": "Groovy. Looks a lot like MFC. If you are building MFC on your own, odds are it&#39;s colliding with the built-in MFC."}, {"owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 1, "creation_date": 1550689749, "post_id": 54793020, "comment_id": 96365255, "body": "Yes, pretty sure CMemDC is already a class in MFC."}, {"owner": {"reputation": 680, "user_id": 5753579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/387135aac6dadd8b9f88471eba3ec316?s=128&d=identicon&r=PG&f=1", "display_name": "For Comment", "link": "https://stackoverflow.com/users/5753579/for-comment"}, "edited": false, "score": 0, "creation_date": 1550689904, "post_id": 54793020, "comment_id": 96365330, "body": "So I suppose I can get rid this class from the project all together."}, {"owner": {"reputation": 680, "user_id": 5753579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/387135aac6dadd8b9f88471eba3ec316?s=128&d=identicon&r=PG&f=1", "display_name": "For Comment", "link": "https://stackoverflow.com/users/5753579/for-comment"}, "reply_to_user": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 1, "creation_date": 1550691662, "post_id": 54793020, "comment_id": 96366126, "body": "ok, I renamed that class to be different from CMemDC, now it is working. So, I felt you two could share the credit. I am not sure how would that work. @john&#39;s definitive statement did prompt me to look into the MFC CMemDC class and found it. So, please post your response in answer so I can accept."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1550695138, "post_id": 54793020, "comment_id": 96367735, "body": "Sort-of duplicate: <a href=\"https://stackoverflow.com/questions/5058852/lnk-2005-in-visual-c-in-visual-studio-2010\" title=\"lnk 2005 in visual c in visual studio 2010\">stackoverflow.com/questions/5058852/&hellip;</a> . Not 100% sure I want to hammer this shut, though. Might be a better-suited answer out there."}, {"owner": {"reputation": 680, "user_id": 5753579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/387135aac6dadd8b9f88471eba3ec316?s=128&d=identicon&r=PG&f=1", "display_name": "For Comment", "link": "https://stackoverflow.com/users/5753579/for-comment"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1550720389, "post_id": 54793020, "comment_id": 96375099, "body": "@user4581301, wow, that&#39;s exactly the same issue as this one, but I changed my own CMemDC class name to &#39;CMemDCm&#39; and it works now. I bet VS2015 is better configured to handle this than VS2010 in that thread. Anyway, it&#39;s a fix for sure in this case."}], "owner": {"reputation": 680, "user_id": 5753579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/387135aac6dadd8b9f88471eba3ec316?s=128&d=identicon&r=PG&f=1", "display_name": "For Comment", "link": "https://stackoverflow.com/users/5753579/for-comment"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 82, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1550687327, "creation_date": 1550687327, "question_id": 54793020, "link": "https://stackoverflow.com/questions/54793020/lnk1169-one-or-more-multiply-defined-sysbols-found-in-vc2015-c-project", "title": "LNK1169 one or more multiply defined sysbols found in VC2015 C++ project", "body": "<p>I opened and upgraded a VC++6.0 project to VC2015. It compiles to this latest error, I've read through the posts pertaining this topic, didn't find a working solution. \nThis involves the following class: <code>MemDC</code></p>\n\n<pre><code>#if !defined(AFX_MEMDC_H__CA1D3541_7235_11D1_ABBA_00A0243D1382__INCLUDED_)\n#define AFX_MEMDC_H__CA1D3541_7235_11D1_ABBA_00A0243D1382__INCLUDED_\n#pragma once\n// MemDC.h : header file\nclass CMemDC : public CDC\n{\npublic:\n    CMemDC(CDC* pDC);\n    ~CMemDC();\n    CMemDC* operator-&gt;() {return this;}\n    operator CMemDC*() {return this;}\n\nprivate:\n    CBitmap  m_bitmap;\n    CBitmap* m_pOldBitmap;\n    CDC*     m_pDC;\n    CRect    m_rect;\n    BOOL     m_bMemDC;\n};\n#endif\n\n\n// MemDC.cpp : implementation of MemDC class\n// This class implements a memory Device Context\n#include \"stdafx.h\"\n#include \"MemDC.h\"\n\nCMemDC::CMemDC(CDC* pDC) : CDC()\n{\n    ASSERT(pDC != NULL);\n\n    m_pDC = pDC;\n    m_pOldBitmap = NULL;\n#ifndef WCE_NO_PRINTING\n    m_bMemDC = !pDC-&gt;IsPrinting();\n#else\n    m_bMemDC = FALSE;\n#endif\n\n    if (m_bMemDC) // Create a Memory DC\n    {\n        pDC-&gt;GetClipBox(&amp;m_rect);\n        CreateCompatibleDC(pDC);\n        m_bitmap.CreateCompatibleBitmap(pDC, m_rect.Width(), m_rect.Height());\n        m_pOldBitmap = SelectObject(&amp;m_bitmap);\n#ifndef _WIN32_WCE\n        SetWindowOrg(m_rect.left, m_rect.top);\n#endif\n    }\n    else // Make a copy of the relevent parts of the current DC for printing\n    {\n#ifndef WCE_NO_PRINTING\n        m_bPrinting = pDC-&gt;m_bPrinting;\n#endif\n        m_hDC = pDC-&gt;m_hDC;\n        m_hAttribDC = pDC-&gt;m_hAttribDC;\n    }\n}\n\n// Destructor copies the contents of the mem DC to the original DC\nCMemDC::~CMemDC()\n{\n    if (m_bMemDC)\n    {\n        // Copy the offscreen bitmap onto the screen.\n        m_pDC-&gt;BitBlt(m_rect.left, m_rect.top, m_rect.Width(), m_rect.Height(),\n            this, m_rect.left, m_rect.top, SRCCOPY);\n\n        //Swap back the original bitmap.\n        SelectObject(m_pOldBitmap);\n    }\n    else {\n        // All we need to do is replace the DC with an illegal value,\n        // this keeps us from accidently deleting the handles associated with\n        // the CDC that was passed to the constructor.\n        m_hDC = m_hAttribDC = NULL;\n    }\n}\n</code></pre>\n\n<p>This class is <strong>not</strong> referenced by any other classes in the project, but when compiling it give the following errors:</p>\n\n<pre><code>LNK2005 \"public: virtual __thiscall CMemDC::~CMemDC(void)\" (??1CMemDC@@UAE@XZ) already defined in MemDC.obj  myProj C:\\dev\\myproj\\nafxcwd.lib(afxglobals.obj)\n</code></pre>\n\n<p>I couldn't find the <code>nafxcwd.lib</code> in my project folder either.</p>\n\n<p>I don't really see where the problem is.</p>\n"}, {"tags": ["c++", "boost", "boost-geometry", "r-tree"], "answers": [{"tags": [], "owner": {"reputation": 1821, "user_id": 2574249, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ce5gW.jpg?s=128&g=1", "display_name": "Adam Wulkiewicz", "link": "https://stackoverflow.com/users/2574249/adam-wulkiewicz"}, "is_accepted": false, "score": 1, "last_activity_date": 1556589917, "creation_date": 1556589917, "answer_id": 55913021, "question_id": 54792447, "link": "https://stackoverflow.com/questions/54792447/boost-r-tree-for-spatial-search/55913021#55913021", "title": "Boost R tree for spatial search", "body": "<blockquote>\n  <p>Also I use within(box), but I'm not sure that is the correct way</p>\n</blockquote>\n\n<p>It's correct, i.e. within predicate is a spatial predicate allowing the R-tree to filter-out the points during the query geometrically and satisfies predicate is checked on top of that. If Boost.Geometry had circle/sphere concept you'd be able to pass it directly into the within predicate and satisfies wouldn't be necessary but since this is not the case you have to pass a box around the circle.</p>\n\n<p>The official interface doesn't support the kind of query you want to perform. In order to do something different you'd have to implement your own R-tree visitor and apply it to the R-tree using <code>boost::geometry::index::detail::rtree::utilities::view</code>. Have a look at <a href=\"http://boost-geometry.203548.n3.nabble.com/How-could-I-get-nodes-MBRs-of-the-R-Tree-td4026812.html\" rel=\"nofollow noreferrer\">this thread</a> for more details.</p>\n\n<p>The R-tree doesn't know where in its structure the point can be found. So if you want to pick one arbitrary point and get all points in some radius around it you'd still have to traverse the R-tree to find where it is in the first place and search around it afterwards. So this kind of searching would have sense if you wanted to perform it for some greater than 1 number of elements contained in the R-tree, because then effectively you'd have to traverse a part of the R-tree but then for each element you'd preform the radius searches locally. The edge case would be doing it for all of the points, traversing the whole R-tree top-down and locally going back up in the R-tree structure for each point to get other points around it.</p>\n"}], "owner": {"reputation": 1, "user_id": 4292352, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-hx89nv_1tlw/AAAAAAAAAAI/AAAAAAAAAAA/ucEo1zQPqLc/photo.jpg?sz=128", "display_name": "Bozo Vazic", "link": "https://stackoverflow.com/users/4292352/bozo-vazic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 801, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1556589917, "creation_date": 1550684945, "last_edit_date": 1556218461, "question_id": 54792447, "link": "https://stackoverflow.com/questions/54792447/boost-r-tree-for-spatial-search", "title": "Boost R tree for spatial search", "body": "<p>I'm trying to create a boost r tree with packing algorithm that will store 2D geometric points. Just to be clear I don't need a kNN search, but what I need is to find points that are in side of a horizon of the point that is a member of the same r tree (horizon would be a radius). What I've found so far were examples for distance search using a random point (not the point that is a r-tree member). I did a distance and index check using bg::index::satisfies by passing a method that checks if the index is different and is distance smaller than radius. Also I use within(box), but I'm not sure that is the correct way to use r tree spatial search for the point that is a member of the same r tree. Because as far as I understand the point in the r-tree knows has the index of boxes in which it is contained, so wouldn't there be a way to query just the point and the distance and still not ending up searching the whole tree!? </p>\n\n<p>this is my code</p>\n\n<pre><code>#include \"stdafx.h\"\n#include &lt;boost/function_output_iterator.hpp&gt;\n#include &lt;boost/geometry/index/rtree.hpp&gt;\n#include &lt;boost/geometry.hpp&gt;\n#include &lt;boost/geometry/geometries/point.hpp&gt;\n#include &lt;boost/geometry/geometries/box.hpp&gt;\n#include &lt;vector&gt;\n#include &lt;iostream&gt;\n\n\nnamespace bg = boost::geometry;\nnamespace bgi = bg::index;\n\ntypedef bg::model::point &lt;double, 2, bg::cs::cartesian&gt; point;\ntypedef std::pair&lt;point, std::size_t&gt; pointI;\ntypedef bg::model::box&lt;point&gt; box;\ntypedef std::pair&lt;point, unsigned&gt; value;\n\nbool CheckIndexAndDist(pointI i, pointI j, size_t dist);\n\nstd::vector&lt;uint64_t&gt; res;\nstruct StoreDataCallback\n{\n    template &lt;typename Value&gt;\n    void operator()(Value const&amp; v)\n    {\n        res.push_back(v.second);\n    }\n};\n\n\nint _tmain(int argc, _TCHAR* argv[])\n{\n    std::vector&lt;point&gt; contourCenters; // has some value\n    std::vector&lt;pointI&gt; cloud;\n\n    int horizon = 3;\n    double dX = 0;\n    double length = 20;\n    double width = 20;\n    dX = length/10.0;\n\n    for(int i = 0; i &lt; length; i++)\n    {\n        for(int j = 0; j &lt; width; j++)\n        {\n            point p;\n            p.set&lt;0&gt;((-1.0 * length / 2.0) + dX  + j * dX);\n            p.set&lt;1&gt;((-1.0 * width / 2.0) + dX  + i * dX);\n            contourCenters.push_back(p);\n        }\n    }\n    size_t id_gen = 0;\n    std::transform(\n            contourCenters.begin(), contourCenters.end(),\n            back_inserter(cloud), \n            [&amp;](point const&amp; p) { return std::make_pair(p, id_gen++); }\n        );\n\n     bgi::rtree&lt;pointI, bgi::quadratic&lt;16&gt; &gt; rtree(cloud);\n\n     // spatial search\n    box query_box(point(cloud[10].first.get&lt;0&gt;() - 3.2*dX, cloud[10].first.get&lt;1&gt;() - 3.2*dX),point(cloud[10].first.get&lt;0&gt;() + 3.2*dX, cloud[10].first.get&lt;1&gt;() + 3.2*dX));\n    StoreDataCallback callback;\n\n\n    res.clear();\n    rtree.query(\n    bgi::within(query_box) &amp;&amp;\n    bgi::satisfies([&amp;](value const&amp; v) {return CheckIndexAndDist(v, cloud[10],3.015*dX);}),\n    boost::make_function_output_iterator(callback));\n\n    return 0;\n}\n\nbool CheckIndexAndDist(pointI i, pointI j, size_t dist)\n{\n    if( i.second != j.second &amp;&amp;  (bg::distance(i.first, j.first) &lt; dist))\n        return true;\n    else\n        return false;\n}\n</code></pre>\n"}, {"tags": ["c++", "opengl", "emulation"], "comments": [{"owner": {"reputation": 957, "user_id": 2729876, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tTIEO.png?s=128&g=1", "display_name": "SIGSTACKFAULT", "link": "https://stackoverflow.com/users/2729876/sigstackfault"}, "edited": false, "score": 3, "creation_date": 1550685685, "post_id": 54792309, "comment_id": 96363255, "body": "I know literally nothing about this topic, but I&#39;m going to ask anyways: Can we see the code?"}, {"owner": {"reputation": 47449, "user_id": 44729, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tyWaU.png?s=128&g=1", "display_name": "genpfault", "link": "https://stackoverflow.com/users/44729/genpfault"}, "edited": false, "score": 2, "creation_date": 1550686943, "post_id": 54792309, "comment_id": 96363836, "body": "Aye, edit in a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 125, "user_id": 6205530, "user_type": "registered", "profile_image": "https://graph.facebook.com/10156786367460023/picture?type=large", "display_name": "Fernando Andreas Sahmkow Beico", "link": "https://stackoverflow.com/users/6205530/fernando-andreas-sahmkow-beico"}, "edited": false, "score": 0, "creation_date": 1550704323, "post_id": 54792309, "comment_id": 96371291, "body": "Sadly with emulation it&#39;s pretty hard bring a minimal example. The codebase is public and can be found here: <a href=\"https://github.com/yuzu-emu/yuzu/tree/master/src/video_core\" rel=\"nofollow noreferrer\">github.com/yuzu-emu/yuzu/tree/master/src/video_core</a> the code that does all the above is in opengl_backend/gl_rasterizer.cpp Sadly without the emulation mechanisms the problem is not easily reproducible."}, {"owner": {"reputation": 38487, "user_id": 2327517, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0Bulc.jpg?s=128&g=1", "display_name": "derhass", "link": "https://stackoverflow.com/users/2327517/derhass"}, "edited": false, "score": 0, "creation_date": 1551892460, "post_id": 54792309, "comment_id": 96810023, "body": "How do you know that writing to the texture isn&#39;t happening? From those screenshots alone, I couldn&#39;t tell that."}, {"owner": {"reputation": 125, "user_id": 6205530, "user_type": "registered", "profile_image": "https://graph.facebook.com/10156786367460023/picture?type=large", "display_name": "Fernando Andreas Sahmkow Beico", "link": "https://stackoverflow.com/users/6205530/fernando-andreas-sahmkow-beico"}, "edited": false, "score": 0, "creation_date": 1551898155, "post_id": 54792309, "comment_id": 96812920, "body": "I flushed it and look in memory."}], "owner": {"reputation": 125, "user_id": 6205530, "user_type": "registered", "profile_image": "https://graph.facebook.com/10156786367460023/picture?type=large", "display_name": "Fernando Andreas Sahmkow Beico", "link": "https://stackoverflow.com/users/6205530/fernando-andreas-sahmkow-beico"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 140, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1551887403, "creation_date": 1550684374, "last_edit_date": 1551887403, "question_id": 54792309, "link": "https://stackoverflow.com/questions/54792309/opengl-depth-stencil-buffer-wont-write-underlying-texture-attached", "title": "OpenGL: Depth Stencil buffer won&#39;t write underlying texture attached", "body": "<p>I'm currently developing an emulator and I got some games using GL_DEPTH24_STENCIL8 (D24S8) as depth buffer. The depth buffer works fine and all but the underlying texture does not seem to be written. I've checked everything: Write mask, attachment being Depth_Stencil, etc. Still it won't write the underlying texture. It's actually interesting because while rendering the depth buffer, the depth test works, what doesn't work is writting the underlying texture. NSight assumes my texture as it were 2 textures (you can see in the pics), one is allocated to the depth buffer which is correct and the other is the one used later on pixel shader sampling. For some reason it won't write it. Things I checked:</p>\n\n<ul>\n<li>Framebuffer has the texture attached as a Depth Stencil Attachment.</li>\n<li>Depth Write is on when it's supposed to be.</li>\n<li>There are no copies, reuploads of the texture.</li>\n<li>Stencil mask is well set, everything on keep but stencil test is disabled.</li>\n</ul>\n\n<p>Some extra info:</p>\n\n<ul>\n<li>I used immutable storage to allocate the depth/stencil buffer.</li>\n<li>Components set to GL_DEPTH24_STENCIL8, GL_DEPTH_STENCIL, GL_UNSIGNED_INT_24_8</li>\n</ul>\n\n<p>Things I've tried:</p>\n\n<ul>\n<li>Flushing after draw and reupload, didn't work, texture had full zeroes.</li>\n<li>glCopyImageSubData to another and use another, didn't work</li>\n<li>Changing it to D32F does not work either, even though NSight shows it does, Renderdocs doesn't.</li>\n</ul>\n\n<p><a href=\"https://i.stack.imgur.com/JOgMK.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/JOgMK.jpg\" alt=\"State when drawing the buffer\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/fheyE.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/fheyE.jpg\" alt=\"Depth Buffer as seen in Nsight\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/zrOzV.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/zrOzV.jpg\" alt=\"The same depth buffer copy created by NSight when sampling later on a pixel shader\"></a></p>\n"}, {"tags": ["c++", "string", "string-length"], "comments": [{"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 5, "creation_date": 1550683705, "post_id": 54792119, "comment_id": 96362321, "body": "<code>ss[c]</code> accesses a character that does not exist. Use <code>ss += name[i]</code>."}, {"owner": {"reputation": 117699, "user_id": 62576, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/15264f7bf48e10ce32dfa4865a13763c?s=128&d=identicon&r=PG", "display_name": "Ken White", "link": "https://stackoverflow.com/users/62576/ken-white"}, "edited": false, "score": 0, "creation_date": 1550683726, "post_id": 54792119, "comment_id": 96362338, "body": "Enable compiler hints and warnings. Also, how are you accessing <code>s[c]</code> when you&#39;ve given <code>s</code> no characters? What happens when you use the debugger to step through the code?"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1550683737, "post_id": 54792119, "comment_id": 96362344, "body": "Just <code>return a==&#39;a&#39; || a==&#39;A&#39; || a==&#39;e&#39; || a==&#39;E&#39; ||a==&#39;i&#39; || a==&#39;I&#39; || a==&#39;o&#39; || a==&#39;O&#39; || a==&#39;u&#39; || a==&#39;U&#39; || a==&#39;y&#39; || a==&#39;Y&#39;;</code> and ditch the explicit <code>if</code> and <code>else</code>."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1550683743, "post_id": 54792119, "comment_id": 96362346, "body": "Unrelated to your problem: You shouldn&#39;t use <code>_</code> as prefix for any symbols. That is preserved for c++ implementation."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1550683882, "post_id": 54792119, "comment_id": 96362414, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6 I agree it&#39;s a bad idea. But, it&#39;s only reserved if followed by a second underscore or uppercase letter - not the case here."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 5, "creation_date": 1550683941, "post_id": 54792119, "comment_id": 96362449, "body": "There is a much simplier way to handle this without any manual looping: <code>std::string ss = name; ss.erase(std::remove_if(ss.begin(), ss.end(), _is_vowel), ss.end());</code>"}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 3, "creation_date": 1550684081, "post_id": 54792119, "comment_id": 96362507, "body": "@JesperJuhl Identifiers starting with a single leading <code>_</code> are also reserved, but at global scope only."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "reply_to_user": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1550684198, "post_id": 54792119, "comment_id": 96362560, "body": "@HolyBlackCat but, this is not at global scope (ok, hard to tell). So, I believe what I said is correct - in this context."}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 2, "creation_date": 1550684525, "post_id": 54792119, "comment_id": 96362696, "body": "@JesperJuhl <code>_is_vowel</code> seems to be declared at the global scope."}, {"owner": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1550684564, "post_id": 54792119, "comment_id": 96362714, "body": "@JesperJuhl \u2022 yes, I think you are correct, since <code>_is_vowel</code> is (as far as I can tell) at the global scope, so it is a reserved identifier.  Technically, does that kind of violation qualify as <i>undefined behavior</i> ?  Or merely the potential for identifier collision by using a reserved identifier?"}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "reply_to_user": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 2, "creation_date": 1550685032, "post_id": 54792119, "comment_id": 96362918, "body": "@Eljay The standard specifies that defining a reserved identifier has undefined behaviour. The rule is there to avoid name collisions sure, but certain types of definitions, macros in particular, can have quite unpredictable outcome."}], "answers": [{"tags": [], "owner": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "is_accepted": true, "score": 4, "last_activity_date": 1550683892, "creation_date": 1550683892, "answer_id": 54792191, "question_id": 54792119, "link": "https://stackoverflow.com/questions/54792119/why-do-i-get-zero-length-for-a-string-filled-element-by-element/54792191#54792191", "title": "Why do I get zero length for a string filled element by element?", "body": "<pre><code>string ss;\n</code></pre>\n\n<p>Declares a string of length 0.</p>\n\n<pre><code>ss[c] = ...;\n</code></pre>\n\n<p>Then tries to access and set to an index that <strong>doesn't exist.</strong> This is Undefined Behavior. If you had used <a href=\"https://en.cppreference.com/w/cpp/string/basic_string/at\" rel=\"nofollow noreferrer\"><code>.at()</code></a> which does bounds checking, you would've caught this immediately.</p>\n\n<p>To fix this, you can either append to the string with the <a href=\"https://en.cppreference.com/w/cpp/string/basic_string/operator%2B%3D\" rel=\"nofollow noreferrer\"><code>+=</code> operator</a>:</p>\n\n<pre><code>ss += name[i];\n</code></pre>\n\n<p>Or you can use <a href=\"https://en.cppreference.com/w/cpp/string/basic_string/push_back\" rel=\"nofollow noreferrer\"><code>push_back()</code></a>:</p>\n\n<pre><code>ss.push_back(name[i]);\n</code></pre>\n\n<p>Furthermore, instead of checking every. single. character, I'd strongly suggest taking a look at <a href=\"https://stackoverflow.com/a/49327683/2602718\">this answer</a> for a better way.</p>\n"}, {"comments": [{"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1550685386, "post_id": 54792492, "comment_id": 96363107, "body": "This doesn&#39;t seem to add anything to the other answer."}, {"owner": {"reputation": 155, "user_id": 7718627, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v3hXE.jpg?s=128&g=1", "display_name": "Vic", "link": "https://stackoverflow.com/users/7718627/vic"}, "reply_to_user": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1550685759, "post_id": 54792492, "comment_id": 96363284, "body": "@HolyBlackCat apologies, the page refreshed when I posted my answer. Although I do get to the point quicker"}], "tags": [], "owner": {"reputation": 155, "user_id": 7718627, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v3hXE.jpg?s=128&g=1", "display_name": "Vic", "link": "https://stackoverflow.com/users/7718627/vic"}, "is_accepted": false, "score": 0, "last_activity_date": 1550685127, "creation_date": 1550685127, "answer_id": 54792492, "question_id": 54792119, "link": "https://stackoverflow.com/questions/54792119/why-do-i-get-zero-length-for-a-string-filled-element-by-element/54792492#54792492", "title": "Why do I get zero length for a string filled element by element?", "body": "<p>The problem is in your while loop and it's easy to fix:</p>\n\n<pre><code>ss += name[i];\n</code></pre>\n\n<p>You simply need to concatenate to your string</p>\n"}], "owner": {"reputation": 9, "user_id": 11091438, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-CJ0ZfEdwT6c/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQNgDcxiFrCFQAv_3V5O5qKXMio72g/mo/photo.jpg?sz=128", "display_name": "Valentina Rolando", "link": "https://stackoverflow.com/users/11091438/valentina-rolando"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "closed_date": 1550685281, "accepted_answer_id": 54792191, "answer_count": 2, "score": -5, "last_activity_date": 1550685127, "creation_date": 1550683576, "question_id": 54792119, "link": "https://stackoverflow.com/questions/54792119/why-do-i-get-zero-length-for-a-string-filled-element-by-element", "closed_reason": "Not suitable for this site", "title": "Why do I get zero length for a string filled element by element?", "body": "<p>this is my issue. I am compiling with g++ (Ubuntu 7.3.0-27ubuntu1~18.04) 7.3.0</p>\n\n<p>I would like to check every element of the string, and copy it only if it is a consonant.</p>\n\n<p>This is how I try to do that:\nThis is just a function to select vowels:</p>\n\n<pre><code>bool _is_vowel(char a){\n    if (a=='a' || a=='A' || a=='e' || a=='E' ||a=='i' || a=='I' || a=='o' || a=='O' || a=='u' || a=='U' || a=='y' || a=='Y')\n        return true;\n    else return false;\n}\n</code></pre>\n\n<p>This is the bit of code that does not work. Specifically, inside the <code>ss.length()</code> appears to be 0, and the string ss contains no character, but they are correctly printed inside the while loop.</p>\n\n<pre><code> main(){\n    int i=0, c=0; \n    string ss, name;\n    cout &lt;&lt; \"insert name\\n\";\n    getline(cin, name);\n    while (i&lt;int(name.length())){\n       if (!_is_vowel(name[i])){\n          cout &lt;&lt; name[i]&lt;&lt; \"\\t\";\n          ss[c]=name[i];\n          cout &lt;&lt; ss[c]&lt;&lt; \"\\n\";\n          c++;\n        }\n        i++;\n    }    \n\n    cout &lt;&lt; int(ss.length())&lt;&lt;endl;\n    cout &lt;&lt; ss;                \n    } \n</code></pre>\n\n<p>Could anyone explain to me where I am wrong or give me some reference?\nThank you in advance</p>\n"}, {"tags": ["c++", "crypto++"], "answers": [{"tags": [], "owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "is_accepted": true, "score": 1, "last_activity_date": 1550814616, "last_edit_date": 1550814616, "creation_date": 1550688810, "answer_id": 54793368, "question_id": 54791882, "link": "https://stackoverflow.com/questions/54791882/crypto-extra-block-at-the-end-of-encrypted-stream-in-aes-128-cbc-mode/54793368#54793368", "title": "Crypto++ extra block at the end of encrypted stream in AES-128 CBC mode", "body": "<blockquote>\n  <p>I'm not able to understand how the last 16 bytes are generated. If I choose to ignore the last 16 bytes in the decryption, Crypto++ throws <code>InvalidCiphertext</code> error</p>\n</blockquote>\n\n<p>The last 16 bytes are padding. Padding is added by the <code>StreamTransformationFilter</code> filter; see <a href=\"https://cryptopp.com/docs/ref/class_stream_transformation_filter.html\" rel=\"nofollow noreferrer\">StreamTransformationFilter Class Reference</a> in the manual. Though not obvious, <code>DEFAULT_PADDING</code> is <code>PKCS_PADDING</code> for <code>ECB_Mode</code> and <code>CBC_Mode</code>. It is <code>NO_PADDING</code> for other modes like <code>OFB_Mode</code> and <code>CTR_Mode</code>.</p>\n\n<p>You only need to specify <code>NO_PADDING</code> for both the encryption and decryption filters. However, you have to ensure the plaintext and ciphertext are a multiple of the blocksize, which is 16 for AES. </p>\n\n<p>You can sidestep the blocksize restriction by switching to another mode like <code>CTR_Mode</code>. But then you have to be very careful of key or IV reuse, which may be difficult due to the password derivation scheme you are using.</p>\n\n<p>So instead of:</p>\n\n<pre><code>CBC_Mode&lt;AES&gt;::Encryption encryptor;\n...\nStreamTransformationFilter stfenc(encryptor, new Redirector(outSink));\n</code></pre>\n\n<p>Use:</p>\n\n<pre><code>CBC_Mode&lt;AES&gt;::Encryption encryptor;\n...\nStreamTransformationFilter stfenc(encryptor, new Redirector(outSink), NO_PADDING);\n</code></pre>\n\n<p>Also see <a href=\"https://www.cryptopp.com/wiki/CBC_Mode\" rel=\"nofollow noreferrer\">CBC_Mode</a> on the Crypto++ wiki. You might also be interested in <a href=\"https://www.cryptopp.com/wiki/Authenticated_Encryption\" rel=\"nofollow noreferrer\">Authenticated Encryption</a> on the wiki.</p>\n\n<hr>\n\n<p>For this, you can also:</p>\n\n<pre><code>#ifndef CRYPTOPP_NO_GLOBAL_BYTE\nnamespace CryptoPP\n{\n    using byte = unsigned char;\n}\n#endif\n</code></pre>\n\n<p><code>CRYPTOPP_NO_GLOBAL_BYTE</code> is defined after the <a href=\"https://www.cryptopp.com/wiki/Std::byte\" rel=\"nofollow noreferrer\">C++17 <code>std::byte</code> fixes</a>. If <code>CRYPTOPP_NO_GLOBAL_BYTE</code> is not defined, then <code>byte</code> is in the global namespace (Crypto++ 5.6.5 and earlier). If <code>CRYPTOPP_NO_GLOBAL_BYTE</code> is defined, then <code>byte</code> is in the <code>CryptoPP</code> namespace (Crypto++ 6.0 and later).</p>\n\n<hr>\n\n<p>For this:</p>\n\n<pre><code>std::ofstream testOut(\"./test.enc\", std::ios::binary);\nFileSink outSink(testOut);\n</code></pre>\n\n<p>You can also do:</p>\n\n<pre><code>FileSink outSink(\"./test.enc\");\n</code></pre>\n\n<hr>\n\n<p>For this:</p>\n\n<pre><code>SHA256().CalculateDigest(passHash, (byte*) password.data(), password.size());\nstd::memcpy(key, passHash, AES::DEFAULT_KEYLENGTH);\nstd::memcpy(iv, passHash+AES::DEFAULT_KEYLENGTH, AES::BLOCKSIZE);\n</code></pre>\n\n<p>You might consider using <code>HKDF</code> as a derivation function. Use the one password but two different labels to ensure independent derivation. One label might be the string <code>\"AES key derivation version 1\"</code> and the other label might be <code>\"AES iv derivation version 1\"</code>.</p>\n\n<p>The label would be used as the <code>info</code> parameter for <code>DeriveKey</code>. You just need to call it twice, once for the key and once for the iv.</p>\n\n<pre><code>unsigned int DeriveKey (byte *derived, size_t derivedLen,\n    const byte *secret, size_t secretLen,\n    const byte *salt, size_t saltLen,\n    const byte *info, size_t infoLen) const\n</code></pre>\n\n<p><code>secret</code> is the password. If you have <code>salt</code> then use it. Otherwise HKDF uses a default salt.</p>\n\n<p>Also see <a href=\"https://www.cryptopp.com/wiki/HKDF\" rel=\"nofollow noreferrer\">HKDF</a> on the Crypto++ wiki.</p>\n\n<hr>\n\n<p>Finally, regarding this:</p>\n\n<blockquote>\n  <p>You can sidestep the blocksize restriction by switching to another mode like CTR_Mode. But then you have to be very careful of key or IV reuse, which may be difficult due to the password derivation scheme you are using.</p>\n</blockquote>\n\n<p>You might also consider an Integrated Encryption Scheme, like <a href=\"https://cryptopp.com/wiki/Elliptic_Curve_Integrated_Encryption_Scheme\" rel=\"nofollow noreferrer\">Elliptic Curve Integrated Encryption Scheme</a>. It is <a href=\"https://en.wikipedia.org/wiki/Ciphertext_indistinguishability#IND-CCA2\" rel=\"nofollow noreferrer\">IND-CCA2</a>, which is a strong notion of security. Everything you need is packaged into the encryption scheme.</p>\n\n<p>Under ECIES each user gets a public/private keypair. Then, a large random secret is used as a seed for the AES key, iv and mac key. The the plaintext is encrypted and authenticated. Finally, the seed is encrypted under the user's public key. The password is still used, but it is used to decrypt the private key.</p>\n"}], "owner": {"reputation": 33, "user_id": 7065385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9833a9fc8a3af5a3116f9f72e7858a5a?s=128&d=identicon&r=PG&f=1", "display_name": "Yogesh", "link": "https://stackoverflow.com/users/7065385/yogesh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 515, "favorite_count": 0, "accepted_answer_id": 54793368, "answer_count": 1, "score": 2, "last_activity_date": 1551081356, "creation_date": 1550682710, "last_edit_date": 1551081356, "question_id": 54791882, "link": "https://stackoverflow.com/questions/54791882/crypto-extra-block-at-the-end-of-encrypted-stream-in-aes-128-cbc-mode", "title": "Crypto++ extra block at the end of encrypted stream in AES-128 CBC mode", "body": "<p>I'm trying to encrypt 320 bytes of binary data using AES-128 in CBC mode and store the cipher into a file. The output file should have been of 320 bytes, but I got 336 bytes. Here is my code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;crypto++/aes.h&gt;\n#include &lt;crypto++/modes.h&gt;\n#include &lt;crypto++/base64.h&gt;\n#include &lt;crypto++/sha.h&gt;\n#include &lt;cryptopp/osrng.h&gt;\n#include &lt;crypto++/filters.h&gt;\n#include &lt;crypto++/files.h&gt;\n\nnamespace CryptoPP\n{\n    using byte = unsigned char;\n}\n\nvoid myAESTest()\n{\n    std::string password = \"testPassWord\";\n\n    // hash the password string\n    // -------------------------------\n    CryptoPP::byte key[CryptoPP::AES::DEFAULT_KEYLENGTH], iv[CryptoPP::AES::BLOCKSIZE];\n    CryptoPP::byte passHash[CryptoPP::SHA256::DIGESTSIZE];\n    CryptoPP::SHA256().CalculateDigest(passHash, (CryptoPP::byte*) password.data(), password.size());\n    std::memcpy(key, passHash, CryptoPP::AES::DEFAULT_KEYLENGTH);\n    std::memcpy(iv, passHash+CryptoPP::AES::DEFAULT_KEYLENGTH, CryptoPP::AES::BLOCKSIZE);\n\n    // encrypt\n    // ---------------------------------\n    int chunkSize = 20*CryptoPP::AES::BLOCKSIZE;\n\n    CryptoPP::CBC_Mode&lt;CryptoPP::AES&gt;::Encryption encryptor;\n    encryptor.SetKeyWithIV(key, sizeof(key), iv);\n\n    std::ofstream testOut(\"./test.enc\", std::ios::binary);\n    CryptoPP::FileSink outSink(testOut);\n\n    CryptoPP::byte message[chunkSize];\n\n    CryptoPP::StreamTransformationFilter stfenc(encryptor, new CryptoPP::Redirector(outSink));\n\n    for(int i = 0; i &lt; chunkSize; i ++)\n    {\n        message[i] = (CryptoPP::byte)i;\n    }\n\n    stfenc.Put(message, chunkSize);\n    stfenc.MessageEnd();\n    testOut.close();\n\n    // decrypt\n    // ------------------------------------\n    // Because of some unknown reason increase chuksize by 1 block\n    // chunkSize+=16;\n\n    CryptoPP::byte cipher[chunkSize], decrypted[chunkSize];\n\n    CryptoPP::CBC_Mode&lt;CryptoPP::AES&gt;::Decryption decryptor;\n    decryptor.SetKeyWithIV(key, sizeof(key), iv);\n\n    std::ifstream inFile(\"./test.enc\", std::ios::binary);\n    inFile.read((char *)cipher, chunkSize);\n\n    CryptoPP::ArraySink decSink(decrypted, chunkSize);\n    CryptoPP::StreamTransformationFilter stfdec(decryptor, new CryptoPP::Redirector(decSink));\n\n    stfdec.Put(cipher, chunkSize);\n    stfdec.MessageEnd();\n    inFile.close();\n\n    for(int i = 0; i &lt; chunkSize; i++)\n    {\n        std::cout &lt;&lt; (int)decrypted[i] &lt;&lt; ' ';\n    }\n    std::cout &lt;&lt; std::endl;\n}\n\nint main(int argc, char* argv[]) \n{\n    myAESTest();\n    return 0;\n}\n</code></pre>\n\n<p>I'm not able to understand how the last 16 bytes are generated.  If I choose to ignore the last 16 bytes in the decryption, CryptoPP throws <code>CryptoPP::InvalidCiphertext</code> error:</p>\n\n<pre><code>terminate called after throwing an instance of 'CryptoPP::InvalidCiphertext'\n  what():  StreamTransformationFilter: invalid PKCS #7 block padding found\n</code></pre>\n"}, {"tags": ["c++", "directx", "sharpdx", "direct2d"], "comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 3, "creation_date": 1550683022, "post_id": 54791871, "comment_id": 96361973, "body": "I have to ask; are you testing an optimized/release build or a unoptimized debug build? Only ever measure performance with optimized builds, as debug builds are focused on providing a good debug experience but (often <i>severely</i>) sacrifice performance to do so. There can easily be orders of magnitude differences in performance between the different build types."}, {"owner": {"reputation": 870, "user_id": 7206675, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/8UtP3.png?s=128&g=1", "display_name": "google dev", "link": "https://stackoverflow.com/users/7206675/google-dev"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1550684425, "post_id": 54791871, "comment_id": 96362659, "body": "@JesperJuhl I testing an optimized/release build."}, {"owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 0, "creation_date": 1550693644, "post_id": 54791871, "comment_id": 96367091, "body": "This does not make much sense. Basically you only need to render about one screen of the text at most why would it take half of second or more? Maybe you are applying some fancy styling or rerender a lot of off-screen text somehow? As for presentation, you should look into DXGI."}, {"owner": {"reputation": 870, "user_id": 7206675, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/8UtP3.png?s=128&g=1", "display_name": "google dev", "link": "https://stackoverflow.com/users/7206675/google-dev"}, "reply_to_user": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 0, "creation_date": 1550693945, "post_id": 54791871, "comment_id": 96367224, "body": "@VTT Because the user can zoom 10% and see at once a million characters, each character having an outline, meaning that each character should also render geometry for the outline."}, {"owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 1, "creation_date": 1550694648, "post_id": 54791871, "comment_id": 96367527, "body": "<i>see at once a million characters</i> - even on 4k screen that would leave about 8 pixels per character which makes it worthless. And there typically no need to rerender fancy geometry for each character, you can prerender sprite sheet and then batch them out on the screen."}, {"owner": {"reputation": 870, "user_id": 7206675, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/8UtP3.png?s=128&g=1", "display_name": "google dev", "link": "https://stackoverflow.com/users/7206675/google-dev"}, "reply_to_user": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 0, "creation_date": 1550695205, "post_id": 54791871, "comment_id": 96367769, "body": "@VTT What do you mean <i>prerender sprite sheet and then batch them out on the screen</i>?"}, {"owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 0, "creation_date": 1550697579, "post_id": 54791871, "comment_id": 96368835, "body": "I mean you can render each letter used in text into texture representing a sprite sheet and then draw those sprites as textured quads onto screen. Positions of letters and their metrics can be obtained though DirectWrite."}, {"owner": {"reputation": 894, "user_id": 5758312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15560486f98d522b0e9a43cc60c82144?s=128&d=identicon&r=PG&f=1", "display_name": "bunglehead", "link": "https://stackoverflow.com/users/5758312/bunglehead"}, "edited": false, "score": 1, "creation_date": 1550739478, "post_id": 54791871, "comment_id": 96382570, "body": "This question is not specific to Direct2D or rendering from separate thread. You&#39;re mixing different issues. First of all EndDraw stretching resulting bitmap is about HwndTarget, and you need to call Resize() on it when window size changes."}, {"owner": {"reputation": 894, "user_id": 5758312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15560486f98d522b0e9a43cc60c82144?s=128&d=identicon&r=PG&f=1", "display_name": "bunglehead", "link": "https://stackoverflow.com/users/5758312/bunglehead"}, "reply_to_user": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 0, "creation_date": 1550739685, "post_id": 54791871, "comment_id": 96382697, "body": "Regarding text rendering performance, like @VTT said you could consider some caching technique instead of rendering same glyphs over and over. For scrolling it&#39;s another thing, you don&#39;t need to render everything again when you scroll, it should be enough to render+cache newly exposed parts only."}], "owner": {"reputation": 870, "user_id": 7206675, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/8UtP3.png?s=128&g=1", "display_name": "google dev", "link": "https://stackoverflow.com/users/7206675/google-dev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 126, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1550682651, "creation_date": 1550682651, "question_id": 54791871, "link": "https://stackoverflow.com/questions/54791871/proper-way-to-render-a-lot-of-text-with-direct2d-in-separate-thread", "title": "Proper way to render a lot of text with Direct2d in separate thread", "body": "<p>I write a program where I need to render a lot of text on the screen, when the user moves the scroll bars or when the size of the window changes, the text must be rerendered, and it takes half a second or more and is very unpleasant to the user.</p>\n\n<p>So the solution I found was that the render would be done in a separate thread, running all the time in the background and when needed, he gets a message and renders everything that is needed.</p>\n\n<p>The problem occurs when the user changes the size of the window by dragging the corner of the window, where then the render thread receives a message to render and before it finishes the render the window resizes again, and this causes the text to stretch because the render is designed for a small width and width is already getting bigger.</p>\n\n<p>At the end a new render is performed and the text looks excellent, but while changing the width of the window the user sees the text stretched and it is very not nice.</p>\n\n<p>On <a href=\"https://docs.microsoft.com/en-us/windows/desktop/api/d2d1/nn-d2d1-id2d1hwndrendertarget\" rel=\"nofollow noreferrer\">Direct2D documentation</a> the behavior is described:</p>\n\n<blockquote>\n  <p>If EndDraw presents the buffer, this bitmap is stretched to cover the\n  surface where it is presented: the entire client area of the window</p>\n</blockquote>\n\n<p>How can this problem be solved?</p>\n"}, {"tags": ["c++", "boost"], "answers": [{"tags": [], "owner": {"reputation": 17, "user_id": 4038014, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c58f308d635f128a91b98abde993f75f?s=128&d=identicon&r=PG&f=1", "display_name": "Muhammad Saqib Ilyas", "link": "https://stackoverflow.com/users/4038014/muhammad-saqib-ilyas"}, "is_accepted": false, "score": 0, "last_activity_date": 1550759390, "creation_date": 1550759390, "answer_id": 54809446, "question_id": 54791768, "link": "https://stackoverflow.com/questions/54791768/c-boost-library-minimum-cost-maximum-flow/54809446#54809446", "title": "C++ Boost Library - Minimum cost maximum flow", "body": "<p>I located the min_cost_max_flow_utils.hpp file in libs\\graph\\test. I modified the getSampleGraph() function to create my own graph and solved it successfully.</p>\n"}], "owner": {"reputation": 17, "user_id": 4038014, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c58f308d635f128a91b98abde993f75f?s=128&d=identicon&r=PG&f=1", "display_name": "Muhammad Saqib Ilyas", "link": "https://stackoverflow.com/users/4038014/muhammad-saqib-ilyas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 135, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1550759390, "creation_date": 1550682260, "last_edit_date": 1550753089, "question_id": 54791768, "link": "https://stackoverflow.com/questions/54791768/c-boost-library-minimum-cost-maximum-flow", "title": "C++ Boost Library - Minimum cost maximum flow", "body": "<p>I am trying to piece together this <a href=\"http://www.programmingexamples.net/wiki/CPP/Boost/BGL/DijkstraDirected\" rel=\"nofollow noreferrer\">example</a> with this <a href=\"https://www.boost.org/doc/libs/1_69_0/libs/graph/example/cycle_canceling_example.cpp\" rel=\"nofollow noreferrer\">sample</a>. I got this to compile and run:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;boost/graph/adjacency_list.hpp&gt;\n#include &lt;boost/graph/boykov_kolmogorov_max_flow.hpp&gt;\n#include &lt;boost/graph/push_relabel_max_flow.hpp&gt;\n#include &lt;boost/graph/edmonds_karp_max_flow.hpp&gt;\n#include &lt;boost/graph/cycle_canceling.hpp&gt; \n\nusing namespace boost;\n\ntypedef int EdgeWeightType;\n\ntypedef adjacency_list_traits &lt; vecS, vecS, directedS &gt; Traits;\ntypedef adjacency_list &lt; vecS, vecS, directedS,\n  property &lt; vertex_name_t, std::string,\n    property &lt; vertex_index_t, long,\n      property &lt; vertex_color_t, boost::default_color_type,\n        property &lt; vertex_distance_t, long,\n          property &lt; vertex_predecessor_t, Traits::edge_descriptor &gt; &gt; &gt; &gt; &gt;,\n\n  property &lt; edge_capacity_t, EdgeWeightType,\n    property &lt; edge_weight_t, EdgeWeightType,\n        property &lt; edge_residual_capacity_t, EdgeWeightType,\n            property &lt; edge_reverse_t, Traits::edge_descriptor &gt; &gt; &gt; &gt; &gt; Graph;\n\nTraits::edge_descriptor AddEdge(Traits::vertex_descriptor &amp;v1,\n                                Traits::vertex_descriptor &amp;v2,\n                                property_map &lt; Graph, edge_reverse_t &gt;::type &amp;rev,\n                                const double capacity,\n                                const double weight, \n                                Graph &amp;g);\n\nint main(int, char*[])\n{\n  Graph g; //a graph with 0 vertices\n\n  property_map &lt; Graph, edge_reverse_t &gt;::type rev = get(edge_reverse, g);\n\n  //add a source and sink node, and store them in s and t, respectively\n  Traits::vertex_descriptor v0 = add_vertex(g);\n  Traits::vertex_descriptor v1 = add_vertex(g);\n  Traits::vertex_descriptor v2 = add_vertex(g);\n  Traits::vertex_descriptor v3 = add_vertex(g);\n\n  Traits::vertex_descriptor v4 = add_vertex(g);\n  Traits::vertex_descriptor v5 = add_vertex(g);\n  Traits::vertex_descriptor v6 = add_vertex(g);\n  Traits::vertex_descriptor v7 = add_vertex(g);\n  Traits::vertex_descriptor v8 = add_vertex(g);\n  Traits::vertex_descriptor v9 = add_vertex(g);\n  Traits::vertex_descriptor v10 = add_vertex(g);\n  Traits::vertex_descriptor v11 = add_vertex(g);\n\n  AddEdge(v0, v1, rev, 1, 1, g);\n  AddEdge(v0, v2, rev, 1, 1, g);\n  AddEdge(v0, v3, rev, 1, 1, g);\n\n  AddEdge(v1, v4, rev, 100, 10, g);\n  AddEdge(v1, v5, rev, 100, 2, g);\n\n  AddEdge(v2, v6, rev, 100, 10, g);\n  AddEdge(v2, v7, rev, 100, 2, g);\n\n  AddEdge(v3, v8, rev, 100, 10, g);\n  AddEdge(v3, v9, rev, 100, 2, g);\n\n  AddEdge(v4, v11, rev, 100, 1, g);\n  AddEdge(v6, v11, rev, 100, 1, g);\n  AddEdge(v8, v11, rev, 100, 1, g);\n\n  AddEdge(v5, v10, rev, 100, 1, g);\n  AddEdge(v7, v10, rev, 100, 1, g);\n  AddEdge(v9, v10, rev, 100, 1, g);  \n\n  AddEdge(v10, v11, rev, 100, 1, g);\n\n\n  //find min cut\n  //EdgeWeightType flow = boykov_kolmogorov_max_flow(g, v0, v3); // a list of sources will be returned in s, and a list of sinks will be returned in t\n  //EdgeWeightType flow = push_relabel_max_flow(g, v0, v3); // a list of sources will be returned in s, and a list of sinks will be returned in t\n  EdgeWeightType flow = edmonds_karp_max_flow(g, v0, v11); // a list of sources will be returned in s, and a list of sinks will be returned in t\n  boost::cycle_canceling(g);\n\n  int cost = boost::find_flow_cost(g);\n\n  std::cout &lt;&lt; \"Flow cost is \" &lt;&lt; cost &lt;&lt; std::endl;\n  std::cout &lt;&lt; \"Max flow is: \" &lt;&lt; flow &lt;&lt; std::endl;\n\n  property_map&lt;Graph, edge_capacity_t&gt;::type\n          capacity = get(edge_capacity, g);\n  property_map&lt;Graph, edge_residual_capacity_t&gt;::type\n          residual_capacity = get(edge_residual_capacity, g);\n\n\n  graph_traits&lt;Graph&gt;::vertex_iterator u_iter, u_end;\n  graph_traits&lt;Graph&gt;::out_edge_iterator ei, e_end;\n  for (tie(u_iter, u_end) = vertices(g); u_iter != u_end; ++u_iter)\n      for (tie(ei, e_end) = out_edges(*u_iter, g); ei != e_end; ++ei)\n          if (capacity[*ei] &gt; 0)\n              std::cout &lt;&lt; \"Source: \" &lt;&lt; *u_iter &lt;&lt; \" destination: \" &lt;&lt; target(*ei, g) &lt;&lt; \" capacity: \"  &lt;&lt; capacity[*ei] &lt;&lt; \"residual cap: \" &lt;&lt; residual_capacity[*ei] &lt;&lt; \" used capacity: \"\n                      &lt;&lt; (capacity[*ei] - residual_capacity[*ei]) &lt;&lt; std::endl;\n\n return 0;\n}\n\nTraits::edge_descriptor AddEdge(Traits::vertex_descriptor &amp;v1, Traits::vertex_descriptor &amp;v2, property_map &lt; Graph, edge_reverse_t &gt;::type &amp;rev, const double capacity, const double weight, Graph &amp;g)\n{\n  Traits::edge_descriptor e1 = add_edge(v1, v2, g).first;\n  Traits::edge_descriptor e2 = add_edge(v2, v1, g).first;\n  put(edge_capacity, g, e1, capacity);\n  put(edge_capacity, g, e2, capacity);\n  put(edge_weight, g, e1, weight);\n  put(edge_weight, g, e2, weight);\n  rev[e1] = e2;\n  rev[e2] = e1;\n}\n</code></pre>\n\n<p>I expect that the minimum cost maximum flow should pick the edges from v1 to v5, v2 to v7 and v3 to v9, as these edges have lower costs compared to edges v1 to v4, v2 to v6 and v3 to v8. However, that is not what results when I run the program.</p>\n\n<p>Can you please point out what I might be doing wrong?</p>\n\n<p>Thanks and best regards\nMuhammad Saqib Ilyas</p>\n"}, {"tags": ["c++", "c++11", "iterator", "metaprogramming", "swap"], "comments": [{"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 0, "creation_date": 1550682621, "post_id": 54791753, "comment_id": 96361761, "body": "Those are both <i>valid</i> <code>iter_swap</code>s. Neither are <code>swap</code>s. And there already exists <code>std::iter_swap</code>."}, {"owner": {"reputation": 310760, "user_id": 12711, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c330bdee507c95c603a93ca91d9145a9?s=128&d=identicon&r=PG", "display_name": "Michael Burr", "link": "https://stackoverflow.com/users/12711/michael-burr"}, "edited": false, "score": 0, "creation_date": 1550685031, "post_id": 54791753, "comment_id": 96362917, "body": "Can you elaborate on what you don&#39;t understand about the book&#39;s explanation (on page 19): &quot;copying a vector means copying all of its elements, and each string element copied or assigned is likely to require a dynamic memory allocation and a bitwise copy of the string\u2019s characters&quot; whereas <code>std:swap()</code> &quot;provides an efficient version of swap for vectors that just exchanges a few internal pointers&quot;?"}, {"owner": {"reputation": 54, "user_id": 7303988, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-0IkrH9Aw6kE/AAAAAAAAAAI/AAAAAAAABDQ/Ph4fMfWTdfc/photo.jpg?sz=128", "display_name": "Long Gong", "link": "https://stackoverflow.com/users/7303988/long-gong"}, "reply_to_user": {"reputation": 310760, "user_id": 12711, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c330bdee507c95c603a93ca91d9145a9?s=128&d=identicon&r=PG", "display_name": "Michael Burr", "link": "https://stackoverflow.com/users/12711/michael-burr"}, "edited": false, "score": 0, "creation_date": 1550687634, "post_id": 54791753, "comment_id": 96364214, "body": "Actually, I can understand the explanation &quot;literally&quot;. I cannot understand why cannot we just use the optimization technique used for <code>std::swap</code> for <code>iter_swap</code> to make <code>iter_swap</code> as efficient as <code>std::swap</code>. However, after you (@MichaelBurr) edited my question, I just realized that my question is stupid because <code>iter_swap</code> can be implemented as efficient as <code>std::swap</code>, i.e., <code>std::iter_swap</code>. Thanks @MichaelBurr !"}, {"owner": {"reputation": 310760, "user_id": 12711, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c330bdee507c95c603a93ca91d9145a9?s=128&d=identicon&r=PG", "display_name": "Michael Burr", "link": "https://stackoverflow.com/users/12711/michael-burr"}, "edited": false, "score": 0, "creation_date": 1550698975, "post_id": 54791753, "comment_id": 96369430, "body": "All I did was correct  Aleksey Gurtovoy&#39;s name!  The key thing to realize is that <code>std::swap()</code> is efficient for <code>std::vector</code> because <code>std::vector</code> provides a specialization for <code>swap()</code> that knows about and takes advantage of the internals of <code>std::vector</code>."}], "answers": [{"comments": [{"owner": {"reputation": 480272, "user_id": 1968, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fdd630f72eef3790bfb4ef38d08c7f85?s=128&d=identicon&r=PG", "display_name": "Konrad Rudolph", "link": "https://stackoverflow.com/users/1968/konrad-rudolph"}, "edited": false, "score": 2, "creation_date": 1550683314, "post_id": 54791814, "comment_id": 96362122, "body": "You\u2019re right but the question was <i>why</i> it\u2019s suboptimal (you hint at that with move semantics but it\u2019s probably not obvious how this impacts OP\u2019s code)."}, {"owner": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "reply_to_user": {"reputation": 480272, "user_id": 1968, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fdd630f72eef3790bfb4ef38d08c7f85?s=128&d=identicon&r=PG", "display_name": "Konrad Rudolph", "link": "https://stackoverflow.com/users/1968/konrad-rudolph"}, "edited": false, "score": 0, "creation_date": 1550684741, "post_id": 54791814, "comment_id": 96362802, "body": "@KonradRudolph Clarified it."}, {"owner": {"reputation": 54, "user_id": 7303988, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-0IkrH9Aw6kE/AAAAAAAAAAI/AAAAAAAABDQ/Ph4fMfWTdfc/photo.jpg?sz=128", "display_name": "Long Gong", "link": "https://stackoverflow.com/users/7303988/long-gong"}, "reply_to_user": {"reputation": 480272, "user_id": 1968, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fdd630f72eef3790bfb4ef38d08c7f85?s=128&d=identicon&r=PG", "display_name": "Konrad Rudolph", "link": "https://stackoverflow.com/users/1968/konrad-rudolph"}, "edited": false, "score": 0, "creation_date": 1550688047, "post_id": 54791814, "comment_id": 96364410, "body": "@KonradRudolph I&#39;ve tried to add <code>std::move</code> (but I am not sure whether it will force move-semantics) on the RHSs of the three &quot;assignment&quot; in <code>iter_swap</code>. After &quot;optimization&quot;, the first is still 5X slower than the second. I guess that some more advanced optimization techniques are used in <code>std::swap</code>."}, {"owner": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "reply_to_user": {"reputation": 54, "user_id": 7303988, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-0IkrH9Aw6kE/AAAAAAAAAAI/AAAAAAAABDQ/Ph4fMfWTdfc/photo.jpg?sz=128", "display_name": "Long Gong", "link": "https://stackoverflow.com/users/7303988/long-gong"}, "edited": false, "score": 1, "creation_date": 1550689066, "post_id": 54791814, "comment_id": 96364917, "body": "@LongGong 1. Did you ask your compiler to optimize? 2. While the fallback <code>std::swap()</code> uses move-semantics, ADL leads to using the custom implementation, which is better."}, {"owner": {"reputation": 54, "user_id": 7303988, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-0IkrH9Aw6kE/AAAAAAAAAAI/AAAAAAAABDQ/Ph4fMfWTdfc/photo.jpg?sz=128", "display_name": "Long Gong", "link": "https://stackoverflow.com/users/7303988/long-gong"}, "edited": false, "score": 0, "creation_date": 1550690430, "post_id": 54791814, "comment_id": 96365552, "body": "@Deduplicator I used the default optimization level (i.e., <code>O0</code> for gcc). I have tried other optimization levels, I found that with <code>Ox</code> (x&gt;0), for the version with <code>std::move</code>, the gap between the first and the second can be reduced to 2X, i.e., the  first is still 2X slower. For the one without <code>std::move</code>, after turning on optimization, the gap gets even larger (up to 100X)."}], "tags": [], "owner": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "is_accepted": false, "score": 6, "last_activity_date": 1550684502, "last_edit_date": 1550684502, "creation_date": 1550682434, "answer_id": 54791814, "question_id": 54791753, "link": "https://stackoverflow.com/questions/54791753/why-is-a-naive-iter-swappotentially-much-slower-than-swap/54791814#54791814", "title": "Why is a naive `iter_swap`potentially much slower than `swap`?", "body": "<p>Your <code>iter_swap()</code> is often sub-optimal, if it \"works\" at all, and is not flat-out wrong.</p>\n\n<ol>\n<li><p>There is a reason <a href=\"https://en.cppreference.com/w/cpp/algorithm/iter_swap\" rel=\"nofollow noreferrer\"><code>std::iter_swap()</code></a> delegates to <code>swap()</code> using <a href=\"/questions/tagged/argument-dependent-lookup\" class=\"post-tag\" title=\"show questions tagged &#39;argument-dependent-lookup&#39;\" rel=\"tag\">argument-dependent-lookup</a>:<br>\nPicking up tailored implementations.</p></li>\n<li><p>In addition, the fallback <code>std::swap()</code> takes advantage of move-semantics when swapping, potentially eliminating costly resource-acquisition, which you didn't use.</p></li>\n</ol>\n\n<p>Of course, both are irrelevant for trivial types.</p>\n"}, {"tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": false, "score": 2, "last_activity_date": 1550683707, "creation_date": 1550683707, "answer_id": 54792152, "question_id": 54791753, "link": "https://stackoverflow.com/questions/54791753/why-is-a-naive-iter-swappotentially-much-slower-than-swap/54792152#54792152", "title": "Why is a naive `iter_swap`potentially much slower than `swap`?", "body": "<p><code>std::swap</code> of a vector is a constant complexity operation.</p>\n\n<p>The complexity of copying a vector increases linearly in relation to the length of the vector.</p>\n\n<p><code>T tmp = *it1</code> calls the copy constructor. <code>*it1 = *it2</code> and <code>*it2 = tmp</code> call the copy assignment operator.</p>\n"}], "owner": {"reputation": 54, "user_id": 7303988, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-0IkrH9Aw6kE/AAAAAAAAAAI/AAAAAAAABDQ/Ph4fMfWTdfc/photo.jpg?sz=128", "display_name": "Long Gong", "link": "https://stackoverflow.com/users/7303988/long-gong"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 179, "favorite_count": 1, "answer_count": 2, "score": 3, "last_activity_date": 1550685148, "creation_date": 1550682211, "last_edit_date": 1550685148, "question_id": 54791753, "link": "https://stackoverflow.com/questions/54791753/why-is-a-naive-iter-swappotentially-much-slower-than-swap", "title": "Why is a naive `iter_swap`potentially much slower than `swap`?", "body": "<p>From David Abrahams and Aleksey Gurtovoy's book \"C++ Template Metaprogramming\", I learned that <code>iter_swap</code> (see below) would be much slower than <code>std::swap</code> sometimes. Although the book has some explanation, I did not quite get it, could someone explains the reason behind it with more details. </p>\n\n<pre><code>template &lt;typename ForwardIt1&gt;\nvoid iter_swap(ForwardIt1 it1, ForwardIt1 it2){\n  typedef typename std::iterator_traits&lt;ForwardIt1&gt;::value_type T;\n  T tmp = *it1;\n  *it1 = *it2;\n  *it2 = tmp;\n}\n\ntemplate &lt;typename ForwardIt1&gt;\nvoid swap_wrapper(ForwardIt1 it1, ForwardIt1 it2){\n  std::swap(*it1, *it2);\n}\n</code></pre>\n\n<p>By applying them on <code>std::list&lt;std::vector&lt;std::string&gt;&gt;::iterator</code>, I found the first is 10X slower than the second even when the size of the vector (whose elements are all small strings, length less than 10) is just 10.</p>\n"}, {"tags": ["c++", "templates", "pointer-to-member"], "comments": [{"owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "edited": false, "score": 0, "creation_date": 1550681910, "post_id": 54791544, "comment_id": 96361357, "body": "What are you tring to do? What class do need to invoke the member of which other class?"}, {"owner": {"reputation": 8101, "user_id": 7691729, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2568514188dfa24ecc3c1884e481834?s=128&d=identicon&r=PG&f=1", "display_name": "Quimby", "link": "https://stackoverflow.com/users/7691729/quimby"}, "edited": false, "score": 0, "creation_date": 1550681917, "post_id": 54791544, "comment_id": 96361364, "body": "&quot;method bar is a public member of a class&quot; Which class? If you mean the <code>T</code> class, then its not possible. Class definitions cannot be extended."}, {"owner": {"reputation": 480272, "user_id": 1968, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fdd630f72eef3790bfb4ef38d08c7f85?s=128&d=identicon&r=PG", "display_name": "Konrad Rudolph", "link": "https://stackoverflow.com/users/1968/konrad-rudolph"}, "edited": false, "score": 1, "creation_date": 1550682825, "post_id": 54791544, "comment_id": 96361876, "body": "Your third point isn\u2019t really meaningful: except for default visibility, struct = class in C++."}, {"owner": {"reputation": 9427, "user_id": 7703024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94e363e0e11695395e04f814233b6274?s=128&d=identicon&r=PG", "display_name": "super", "link": "https://stackoverflow.com/users/7703024/super"}, "edited": false, "score": 0, "creation_date": 1550684875, "post_id": 54791544, "comment_id": 96362857, "body": "Replace <code>FType f;</code> with <code>void (T::*f)();</code> and you can remove the second template argument. After that you just need to use <code>c.obj&#47;c.f</code> instead of <code>c.T&#47;c.FType</code>."}, {"owner": {"reputation": 8101, "user_id": 7691729, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2568514188dfa24ecc3c1884e481834?s=128&d=identicon&r=PG&f=1", "display_name": "Quimby", "link": "https://stackoverflow.com/users/7691729/quimby"}, "edited": false, "score": 0, "creation_date": 1550685676, "post_id": 54791544, "comment_id": 96363253, "body": "Are you trying to implement <code>std::function</code> or a lambda function ?"}], "answers": [{"tags": [], "owner": {"reputation": 22818, "user_id": 1387438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ad806758c356c915ea08a4bfd79131e3?s=128&d=identicon&r=PG", "display_name": "Marek R", "link": "https://stackoverflow.com/users/1387438/marek-r"}, "is_accepted": false, "score": 1, "last_activity_date": 1550682739, "last_edit_date": 1550682739, "creation_date": 1550681822, "answer_id": 54791633, "question_id": 54791544, "link": "https://stackoverflow.com/questions/54791544/how-to-get-a-c-template-class-to-invoke-another-class-methods/54791633#54791633", "title": "How to get a C++ template class to invoke another class&#39; methods?", "body": "<p>You are making that too complicated. Forget about pointers to methods. Currently there is no reason to use them.</p>\n\n<p>Just do something like this:</p>\n\n<pre><code>template&lt;typename F&gt;\nvoid bar(F f) {\n  doSomething();\n\n  f(someArg);\n\n  doSomething();\n}\n\nint main(void)\n{\n  foible f;\n  bar([&amp;f](auto x) { f.someMagicMethod(x); } );\n\n  return 0;\n}\n</code></pre>\n\n<p>Note this approach is more flexible and readable than playing around with method pointers.</p>\n"}, {"comments": [{"owner": {"reputation": 33, "user_id": 11091255, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-qtzJ6rtd_wE/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQM2G3-fRHZEq8rgVr6goQOLqv084A/mo/photo.jpg?sz=128", "display_name": "Christopher Theriault", "link": "https://stackoverflow.com/users/11091255/christopher-theriault"}, "edited": false, "score": 0, "creation_date": 1550695123, "post_id": 54792904, "comment_id": 96367727, "body": "Example &#39;C&#39; looks like it does everything I need.  How do I extend it so that the method pointer can take parameters?"}], "tags": [], "owner": {"reputation": 7089, "user_id": 2852165, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/JwDJG.jpg?s=128&g=1", "display_name": "SHR", "link": "https://stackoverflow.com/users/2852165/shr"}, "is_accepted": true, "score": 0, "last_activity_date": 1550686785, "creation_date": 1550686785, "answer_id": 54792904, "question_id": 54791544, "link": "https://stackoverflow.com/questions/54791544/how-to-get-a-c-template-class-to-invoke-another-class-methods/54792904#54792904", "title": "How to get a C++ template class to invoke another class&#39; methods?", "body": "<p>A step by step solution:\n all examples uses the following class and foo function </p>\n\n<pre><code>#include &lt;iostream&gt;\nclass A\n{\npublic:\n    void foo(){std::cout&lt;&lt;\"foo\"&lt;&lt;std::endl;}\n};\n</code></pre>\n\n<p>this sample works without template: just calling the calling A::foo with pointer to <code>A</code> and pointer to <code>A::foo</code>:</p>\n\n<pre><code>class B\n{\npublic:\n    A *a;\n    void (A::*p)(); \n\n    void bar()\n    {\n        (a-&gt;*p)(); //call A::foo \n    }\n};\nint main(void)\n{\n    A a;\n    B b;\n    b.a = &amp;a;\n    b.p = &amp;A::foo;\n    b.bar();\n    return 0;\n}\n</code></pre>\n\n<p>The following sample added template <code>class T</code>, the pointer to foo method derived from <code>T</code>.</p>\n\n<pre><code>template &lt;class T&gt;\nclass C\n{\npublic:\n    T* t;\n    void (T::*p)(); \n    C(T &amp;o) : t(&amp;o){} \n    void bar()\n    {\n        (t-&gt;*p)();\n    }\n};\nint main(void)\n{\n    A a;\n    C&lt;A&gt; c(a);\n    c.p = &amp;A::foo;\n    c.bar();\n    return 0;\n}\n</code></pre>\n\n<p>in the following, the method pointer was templated too, but I don't see how can it be used since you should know how many argument to give it, but anyway:</p>\n\n<pre><code>template &lt;class T, typename F&gt;\nclass D\n{\npublic:\n    T* t;\n    F p; \n    D(T &amp;o, F pf) : t(&amp;o),p(pf){} \n    void bar()\n    {\n        (t-&gt;*p)();\n    }\n};\nint main(void)\n{\n    A a;\n    D&lt;A, void (A::*)()&gt; d(a, &amp;A::foo);\n    d.bar();\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 11091255, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-qtzJ6rtd_wE/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQM2G3-fRHZEq8rgVr6goQOLqv084A/mo/photo.jpg?sz=128", "display_name": "Christopher Theriault", "link": "https://stackoverflow.com/users/11091255/christopher-theriault"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1198, "favorite_count": 0, "accepted_answer_id": 54792904, "answer_count": 2, "score": 2, "last_activity_date": 1550686785, "creation_date": 1550681547, "last_edit_date": 1550682940, "question_id": 54791544, "link": "https://stackoverflow.com/questions/54791544/how-to-get-a-c-template-class-to-invoke-another-class-methods", "title": "How to get a C++ template class to invoke another class&#39; methods?", "body": "<p>I have class A that needs to invoke the member functions of template class B.  Searching around I found this sample code on this site:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\ntemplate&lt;typename T, typename FType&gt;\nvoid bar(T&amp; d, FType f) {\n  (d.*f)(); // call member function\n}\n\nstruct foible\n{\n  void say()\n  {\n    std::cout &lt;&lt; \"foible::say\" &lt;&lt; std::endl;\n  }\n};\n\nint main(void)\n{\n  foible f;\n  bar(f,  &amp;foible::say); // types will be deduced automagically...\n}\n</code></pre>\n\n<p>That came from this answer:\n<a href=\"https://stackoverflow.com/questions/7557990/c-method-name-as-template-parameter/7558035#7558035\">C++ method name as template parameter</a></p>\n\n<p>But it doesn't do 100% of what I need.  How would the above code be re-written so that:</p>\n\n<ol>\n<li>method <code>bar</code> is a public member of a class and not a stand-alone\nfunction</li>\n<li>arguments <code>d</code> and <code>f</code> which are getting passed to method <code>bar</code> are\n<code>public</code> members of the same class to which <code>bar</code> is a member,\nallowing <code>bar</code> to be of type <code>void (void)</code></li>\n<li>object type <code>foible</code> is a class and not a structure (optional)?</li>\n</ol>\n\n<p>[EDIT 1] My own attempt at the rewrite which meets points 1) and 2) is the following, which is wrong:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\ntemplate&lt;class T, void (T::*FType)()&gt;\nclass foo {\npublic:\n  T obj;\n  FType f;\nvoid bar(void) {\n  (obj.*f)(); // call member function\n} // end bar\n}; // end class foo\n\nstruct foible\n{\n  void say()\n{\n  std::cout &lt;&lt; \"foible::say\" &lt;&lt; std::endl;\n}\n};\n\nint main(void)\n{\nfoible f;\nfoo&lt;foible, void (foible::*)()&gt; c;\nc.T = f;\nc.Ftype = &amp;foible::say;\n\nc.bar(); // types will be deduced automagically...\n}\n</code></pre>\n\n<p>My goal is to have an object of class type 'A' invoke the methods of object of class type 'B', so that when these methods execute the object of type 'B' can use its 'this' pointer to reference its local data.  I want to use function pointers inside class type 'A' so that these only need to be specified once, and I don't want one class to have to be derived from another. </p>\n"}, {"tags": ["c++", "boost"], "comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 1, "creation_date": 1550681322, "post_id": 54791373, "comment_id": 96360958, "body": "When you tried to debug your program, what were your findings?"}, {"owner": {"reputation": 1, "user_id": 11091313, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/741be858da32d922189311a35537c318?s=128&d=identicon&r=PG&f=1", "display_name": "Dinesh Lama Rumba", "link": "https://stackoverflow.com/users/11091313/dinesh-lama-rumba"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1550681650, "post_id": 54791373, "comment_id": 96361186, "body": "i couldn&#39;t find anything, it shows no error or warning msgs."}, {"owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 2, "creation_date": 1550682475, "post_id": 54791373, "comment_id": 96361682, "body": "Now I have little idea about the libraries you are using here, but I am surprised that you think you can serialize a <code>std::map</code> to a file and then read it back as if it was an array. That seems suspicious to me."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 11091313, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/741be858da32d922189311a35537c318?s=128&d=identicon&r=PG&f=1", "display_name": "Dinesh Lama Rumba", "link": "https://stackoverflow.com/users/11091313/dinesh-lama-rumba"}, "edited": false, "score": 0, "creation_date": 1550683483, "post_id": 54791856, "comment_id": 96362210, "body": "so how do i correctly write and read this value with memory mapping?"}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "reply_to_user": {"reputation": 1, "user_id": 11091313, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/741be858da32d922189311a35537c318?s=128&d=identicon&r=PG&f=1", "display_name": "Dinesh Lama Rumba", "link": "https://stackoverflow.com/users/11091313/dinesh-lama-rumba"}, "edited": false, "score": 0, "creation_date": 1550690108, "post_id": 54791856, "comment_id": 96365413, "body": "@asdf What is your outer problem? Because what you&#39;re trying to do just doesn&#39;t seem sensible and there&#39;s probably a sensible way to solve whatever problem you have. You&#39;re trying to write data out with one method and read it back in with a completely unrelated method which just won&#39;t work. It&#39;s like having a Spanish writer write a book and then having a French speaker try to read it. Why would you expect it to make sense to them? Boost serialization and memory mapped arrays are entirely unrelated."}, {"owner": {"reputation": 1, "user_id": 11091313, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/741be858da32d922189311a35537c318?s=128&d=identicon&r=PG&f=1", "display_name": "Dinesh Lama Rumba", "link": "https://stackoverflow.com/users/11091313/dinesh-lama-rumba"}, "edited": false, "score": 0, "creation_date": 1550718013, "post_id": 54791856, "comment_id": 96374534, "body": "well, its for 3d computer vision project, writing the map values are for saving the pattern of object while reading them is for pattern matching which happens in another program but right now i&#39;m testing the function so... for that i&#39;ll be using key and value as string. so that how do i write the them?"}], "tags": [], "owner": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "is_accepted": false, "score": 1, "last_activity_date": 1550682990, "last_edit_date": 1550682990, "creation_date": 1550682590, "answer_id": 54791856, "question_id": 54791373, "link": "https://stackoverflow.com/questions/54791373/memory-mapped-data-not-comming-correctly/54791856#54791856", "title": "memory mapped data not comming correctly", "body": "<p>The problem is that you are not writing to <code>archive1.bin</code> what you think you are writing.  This can be demonstrated by adding the lines:</p>\n\n<pre><code>text_oarchive oa2 {std::cout};\noa2 &lt;&lt; m;\n</code></pre>\n\n<p>at the end of function <code>save</code>, and when you do this you see:</p>\n\n<blockquote>\n  <p>22 serialization::archive 17 0 0 1 0 0 0 3 9</p>\n</blockquote>\n\n<p>printed to <code>stdout</code>.</p>\n\n<p>To clarify further, change the last line of function <code>load</code> to:</p>\n\n<pre><code>std::cout &lt;&lt; std::hex &lt;&lt; m[3] &lt;&lt; std::endl;\n</code></pre>\n\n<p>and then you see:</p>\n\n<blockquote>\n  <p>6e6f6974</p>\n</blockquote>\n\n<p>which is ASCII <code>noit</code>, i.e. the fourth integer in <code>archive1.bin</code>.</p>\n\n<p>All of which is a long-winded way of saying what john says in his comment above.  You should read a boost archive using the <a href=\"https://www.boost.org/doc/libs/1_48_0/libs/serialization/doc/tutorial.html\" rel=\"nofollow noreferrer\">approved serialisation functions</a>.</p>\n\n<p><a href=\"https://wandbox.org/permlink/4CqFyNOcKifPtp5n\" rel=\"nofollow noreferrer\">Live demo</a>.</p>\n"}], "owner": {"reputation": 1, "user_id": 11091313, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/741be858da32d922189311a35537c318?s=128&d=identicon&r=PG&f=1", "display_name": "Dinesh Lama Rumba", "link": "https://stackoverflow.com/users/11091313/dinesh-lama-rumba"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 33, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1550682990, "creation_date": 1550681022, "question_id": 54791373, "link": "https://stackoverflow.com/questions/54791373/memory-mapped-data-not-comming-correctly", "title": "memory mapped data not comming correctly", "body": "<p>I have written a code where i am writing a map in a binary file and than reading it using boost memory mapping, but whenever i display the result it is not correct it only shows value as </p>\n\n<blockquote>\n  <p>1852795252</p>\n</blockquote>\n\n<p>. what should i do? Here's my code: </p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include &lt;utility&gt;\n#include &lt;fstream&gt;\n#include &lt;utility&gt;\n#include &lt;fstream&gt;\n#include &lt;iterator&gt;\n#include &lt;string&gt;\n#include &lt;boost/interprocess/file_mapping.hpp&gt;\n#include &lt;boost/interprocess/mapped_region.hpp&gt;\n#include &lt;boost/archive/text_oarchive.hpp&gt;\n#include &lt;boost/archive/text_iarchive.hpp&gt;\n#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;boost/serialization/map.hpp&gt;\n\nusing namespace boost::archive;\nusing namespace boost::interprocess;\nvoid save()\n{\n    {\n        std::ofstream file{\"archive1.bin\"};\n        text_oarchive oa{file};\n        std::map&lt;int,int&gt; m;\n        m[3] = 9;  \n        oa &lt;&lt; m;\n    }\n}\n\nvoid load()\n{\n    file_mapping fm(\"archive1.bin\", read_only);\n    mapped_region region(fm, read_only);\n    int * m = (int *)region.get_address();\n    std::cout&lt;&lt;m[3]&lt;&lt;std::endl;\n}\n\nint main()\n{\n  save();\n  load();\n} \n</code></pre>\n"}, {"tags": ["c++", "c", "linux", "signals", "windows-subsystem-for-linux"], "comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1550681687, "post_id": 54791361, "comment_id": 96361209, "body": "WSL bug maybe??"}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 1, "creation_date": 1550682275, "post_id": 54791361, "comment_id": 96361576, "body": "Do any functions return an error?"}, {"owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "edited": false, "score": 0, "creation_date": 1550689184, "post_id": 54791361, "comment_id": 96364965, "body": "What is <code>TSignalHandler</code>? What is <code>functor</code>?"}, {"owner": {"reputation": 158, "user_id": 2375262, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/95f3f066a9505066439aa254e4de63da?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/2375262/matt"}, "edited": false, "score": 0, "creation_date": 1550722221, "post_id": 54791361, "comment_id": 96375535, "body": "As one might see on line 4, functor is a function pointer with type <code>void* (*) (void*)</code>. And as one might know from the sigaction struct, <code>TSignalHandler</code> is a void functiong taking one int parameter."}, {"owner": {"reputation": 7668, "user_id": 2554472, "user_type": "registered", "profile_image": "https://graph.facebook.com/1119155584/picture?type=large", "display_name": "Mark Plotnick", "link": "https://stackoverflow.com/users/2554472/mark-plotnick"}, "edited": false, "score": 0, "creation_date": 1550765536, "post_id": 54791361, "comment_id": 96399815, "body": "If you run the program under gdb, can you show us what line of code makes it hang, and get a backtrace?"}, {"owner": {"reputation": 158, "user_id": 2375262, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/95f3f066a9505066439aa254e4de63da?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/2375262/matt"}, "edited": false, "score": 0, "creation_date": 1550808029, "post_id": 54791361, "comment_id": 96414943, "body": "I just tried it, it DOES NOT hang in GDB.  So, it hangs in WSL without GDB, but runs fine in native linux without GDB, but runs fine in WSL WITH gdb."}, {"owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "edited": false, "score": 0, "creation_date": 1550808296, "post_id": 54791361, "comment_id": 96414991, "body": "I understand your code executes functions. But by being evasive about what they do, it decreases the likelihood that you will get useful help. MCVE please."}, {"owner": {"reputation": 158, "user_id": 2375262, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/95f3f066a9505066439aa254e4de63da?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/2375262/matt"}, "reply_to_user": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "edited": false, "score": 0, "creation_date": 1550851750, "post_id": 54791361, "comment_id": 96436814, "body": "@jxh &quot;I understand your code executes functions&quot; made me LOL at myself. Yes, I misunderstood the point of your comment. functor is an empty loop and TSignalHandler just prints a message with printf."}, {"owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "edited": false, "score": 0, "creation_date": 1550862376, "post_id": 54791361, "comment_id": 96442074, "body": "It is probably not your issue, but calling <code>printf</code> from a signal handler is a bad idea. The general purpose C library functions are often not reentrant, and can hang if the signal is being handled while it is in the middle of uncompleted library call itself."}, {"owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "edited": false, "score": 0, "creation_date": 1550875950, "post_id": 54791361, "comment_id": 96447306, "body": "I recommend that when you get it to hang, induce a core file (e.g., by killing the process with SIGTRAP) or attach gdb to the running process. Find the backtrace."}, {"owner": {"reputation": 158, "user_id": 2375262, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/95f3f066a9505066439aa254e4de63da?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/2375262/matt"}, "edited": false, "score": 0, "creation_date": 1550960926, "post_id": 54791361, "comment_id": 96466383, "body": "@lxh Problem solved thanks you your GDB comment,I assumed the problem was WSL because it ran fine on native linux.I was wrong (way wrong). the problem was that on native linux, the new thread had time to set up before the main thread started using it.On WSL the main thread started using the new thread before it had time to setup, causing the new thread to get used too soon.  This caused the thread to behave in an undefined manner and the main thread would stay joined for ever.  Thanks again jxh If you submit an answer about attaching GDB ill accept it."}, {"owner": {"reputation": 158, "user_id": 2375262, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/95f3f066a9505066439aa254e4de63da?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/2375262/matt"}, "edited": false, "score": 0, "creation_date": 1550961013, "post_id": 54791361, "comment_id": 96466407, "body": "also @jhx, I will make sure not to call printf in a release, they are just for debugging atm, thanks again."}], "answers": [{"comments": [{"owner": {"reputation": 158, "user_id": 2375262, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/95f3f066a9505066439aa254e4de63da?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/2375262/matt"}, "edited": false, "score": 0, "creation_date": 1551151701, "post_id": 54858637, "comment_id": 96525654, "body": "Thanks, this really helped me find my issue, which was my own fault and not wsl. Race condition, in code that was called by posted code."}], "tags": [], "owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "is_accepted": true, "score": 2, "last_activity_date": 1551208426, "last_edit_date": 1551208426, "creation_date": 1551061140, "answer_id": 54858637, "question_id": 54791361, "link": "https://stackoverflow.com/questions/54791361/why-does-the-program-hang-in-wsl/54858637#54858637", "title": "Why does the program hang in WSL?", "body": "<p>When you have a hanging bug that you cannot reproduce when running within the debugger, you can attach the debugger to the running process after you reproduce the hang. This won't let you observe the variables changing as you lead to the hang, but at least you get the stack trace of exactly where the hang is occurring.</p>\n\n<p>Once you know the process id of the hung process (assume it's 12345), you can use:</p>\n\n<blockquote>\n<pre><code>$ gdb -p 12345\n</code></pre>\n</blockquote>\n\n<p>Or, you can kill the process with a signal that will cause a core to be generated. I like to use <code>SIGTRAP</code>, since it is easy to distinguish from a <code>SIGSEGV</code>.</p>\n\n<blockquote>\n<pre><code>$ kill -SIGTRAP 12345\n</code></pre>\n</blockquote>\n\n<p>And then you can use <code>gdb</code> to discover what the process was hanging on.</p>\n\n<p>The advantage of attaching to the running process is that the process is still live. This allows you to call functions from the debugger, which may provide easier access to diagnostics built into your program. The core file preserves the error, which is beneficial if the hanging bug is difficult to reproduce.</p>\n"}], "owner": {"reputation": 158, "user_id": 2375262, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/95f3f066a9505066439aa254e4de63da?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/2375262/matt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 433, "favorite_count": 0, "accepted_answer_id": 54858637, "answer_count": 1, "score": 2, "last_activity_date": 1551208426, "creation_date": 1550681001, "last_edit_date": 1551061209, "question_id": 54791361, "link": "https://stackoverflow.com/questions/54791361/why-does-the-program-hang-in-wsl", "title": "Why does the program hang in WSL?", "body": "<p>I have the following code in my program.</p>\n\n<pre><code>Thread* t = arg-&gt;thread;\n//at this point, the new thread is being executed.\nt-&gt;myId = TGetId();\nvoid* (*functor)(void*) = t-&gt;functor;\nvoid* fArg = arg-&gt;arg;\nnfree(arg);\n_INFO_PRINTF(1, \"Launching thread with ID: %d\", t-&gt;myId);\nsigset_t mask;\nsigfillset(&amp;mask);         //fill mask with all signals\nsigdelset(&amp;mask, SIGUSR1); // allow SIGUSR1 to get to the thread.\nsigdelset(&amp;mask, SIGUSR2); // allow SIGUSR2 to get to the thread.\npthread_sigmask(SIG_SETMASK, &amp;mask, NULL); //block some sigs\n\nstruct sigaction act;\nmemset(&amp;act, 0, sizeof(act));\nact.sa_handler = TSignalHandler;\nact.sa_mask = mask;\nif(sigaction(SIGUSR1, &amp;act, NULL))\n{\n    _ERROR_PRINT(1, \"Could not set signal action.\");\n    return NULL;\n}\nif(sigaction(SIGUSR2, &amp;act, NULL))\n{\n    _ERROR_PRINT(1, \"Could not set signal action.\");\n    return NULL;\n}\nvoid* ret = functor(fArg);\nt-&gt;hasReturned = true;\nreturn ret;\n</code></pre>\n\n<p>The thread that executes this code will properly call the signal handler when on native linux.  The problem is that on Windows Subsystem for Linux, the program hangs with the SIGUSR1 or SIGUSR2 is sent via pthread_kill which sends signals to a thread.  Why does this work on native ubuntu (via VMWARE WORKSTATION 14) and debian and fedora, but NOT WSL?</p>\n"}, {"tags": ["c++", "ofstream"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1550680860, "post_id": 54791236, "comment_id": 96360683, "body": "You can <a href=\"https://stackoverflow.com/questions/50979396/can-cout-throw-an-exception\">make streams throw</a> on failure, but as far as I know it can&#39;t be done for their constructors since it requires an instance to enable the behavior."}, {"owner": {"reputation": 9427, "user_id": 7703024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94e363e0e11695395e04f814233b6274?s=128&d=identicon&r=PG", "display_name": "super", "link": "https://stackoverflow.com/users/7703024/super"}, "edited": false, "score": 0, "creation_date": 1550680967, "post_id": 54791236, "comment_id": 96360761, "body": "You can use <code>std::filesystem::exists</code> if you have access to c++17. Otherwise I would try to open the file for reading first. If that fails it doesn&#39;t exist."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1550680989, "post_id": 54791236, "comment_id": 96360774, "body": "Why was the question downvoted? It is a valid question, even though there is no good answer."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 9427, "user_id": 7703024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94e363e0e11695395e04f814233b6274?s=128&d=identicon&r=PG", "display_name": "super", "link": "https://stackoverflow.com/users/7703024/super"}, "edited": false, "score": 0, "creation_date": 1550681009, "post_id": 54791236, "comment_id": 96360785, "body": "@super existing and being readable are very different things."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1550681065, "post_id": 54791236, "comment_id": 96360814, "body": "@Fran&#231;oisAndrieux and even when you do enable exceptions, they are super inconvenient to use. I am afraid, we have to admit that bad exception specification is one (of the several) shortcomings of standard streams."}, {"owner": {"reputation": 9427, "user_id": 7703024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94e363e0e11695395e04f814233b6274?s=128&d=identicon&r=PG", "display_name": "super", "link": "https://stackoverflow.com/users/7703024/super"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1550681181, "post_id": 54791236, "comment_id": 96360874, "body": "@SergeyA Maybe in the general case, but if you are expecting to write to a file, being able to open it for reading is probably a safe indication of it&#39;s existence."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 9427, "user_id": 7703024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94e363e0e11695395e04f814233b6274?s=128&d=identicon&r=PG", "display_name": "super", "link": "https://stackoverflow.com/users/7703024/super"}, "edited": false, "score": 0, "creation_date": 1550681251, "post_id": 54791236, "comment_id": 96360921, "body": "@super of course not! File can easily be write-only for you."}, {"owner": {"reputation": 9427, "user_id": 7703024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94e363e0e11695395e04f814233b6274?s=128&d=identicon&r=PG", "display_name": "super", "link": "https://stackoverflow.com/users/7703024/super"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1550681443, "post_id": 54791236, "comment_id": 96361046, "body": "@SergeyA Nitpicking 101? I never said it&#39;s a 100% guarantee, I said <b>probably</b>."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1550684565, "post_id": 54791236, "comment_id": 96362715, "body": "@Fran&#231;oisAndrieux what you say is true for the constructor. But, you can construct a default-constructed <code>std::ofstream</code>, enable exceptions on it, and then call <code>open()</code> on it. It will then throw if the file fails to open."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1550684701, "post_id": 54791236, "comment_id": 96362784, "body": "@RemyLebeau What you say is also true, but the question asks <i>&quot;How can I do this with ofstream constructor?&quot;</i>."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1550684801, "post_id": 54791236, "comment_id": 96362827, "body": "@Fran&#231;oisAndrieux actually, the real question is how to make the constructor <i>fail</i>, not how to make the constructor <i>throw an exception</i>. There is a difference. I was simply commenting on your comment."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1550684867, "post_id": 54791236, "comment_id": 96362852, "body": "@RemyLebeau Yes, you&#39;re right. I misunderstood the question."}], "answers": [{"tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": false, "score": 1, "last_activity_date": 1550681976, "last_edit_date": 1550681976, "creation_date": 1550681392, "answer_id": 54791485, "question_id": 54791236, "link": "https://stackoverflow.com/questions/54791236/how-to-make-ofstream-constructor-fail-when-opening-non-existing-file/54791485#54791485", "title": "How to make ofstream constructor fail when opening non-existing file?", "body": "<p>You cannot change the constructor of <code>std::ofstream</code>.</p>\n\n<p>What you can do, is define your own custom stream class. Your own stream can check whether the file exists, and fail if it does not. If the file exists, you can delegate the functionality to an ofstream contained as a data member.</p>\n\n<p>Another approach that doesn't require a custom stream might be to change your code to not even attempt to construct the stream until you've first verified that the file exists.</p>\n"}, {"comments": [{"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1550684418, "post_id": 54791820, "comment_id": 96362655, "body": "See <a href=\"https://en.cppreference.com/w/cpp/io/basic_filebuf/open\" rel=\"nofollow noreferrer\"><code>std::basic_filebuf::open()</code></a> for the supported combinations of flags and what they do together."}, {"owner": {"reputation": 31, "user_id": 1937965, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eee4f8d2545ba18a0e86ea8a96f862ac?s=128&d=identicon&r=PG", "display_name": "Ranjit Kumar", "link": "https://stackoverflow.com/users/1937965/ranjit-kumar"}, "edited": false, "score": 0, "creation_date": 1550767026, "post_id": 54791820, "comment_id": 96400787, "body": "Did ios::nocreate exist in some version of c++ as described here <a href=\"https://courses.cs.washington.edu/courses/cse373/99au/assignments/fileIO.html\" rel=\"nofollow noreferrer\">courses.cs.washington.edu/courses/cse373/99au/assignments/&hellip;</a>"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 31, "user_id": 1937965, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eee4f8d2545ba18a0e86ea8a96f862ac?s=128&d=identicon&r=PG", "display_name": "Ranjit Kumar", "link": "https://stackoverflow.com/users/1937965/ranjit-kumar"}, "edited": false, "score": 0, "creation_date": 1550767243, "post_id": 54791820, "comment_id": 96400920, "body": "@RanjitKumar No, that never made it into the C++98 standard.  If you look at the headers in the linked to post you&#39;ll see they are doing <code>#include &lt;iostream.h&gt;</code> which was the pre C++ standard way.  It might work in a compiler like TurboC++ but not in any standard complaint compiler."}], "tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": false, "score": 2, "last_activity_date": 1550684401, "last_edit_date": 1550684401, "creation_date": 1550682450, "answer_id": 54791820, "question_id": 54791236, "link": "https://stackoverflow.com/questions/54791236/how-to-make-ofstream-constructor-fail-when-opening-non-existing-file/54791820#54791820", "title": "How to make ofstream constructor fail when opening non-existing file?", "body": "<p><code>std::ofstream</code>'s constructor takes a <a href=\"https://en.cppreference.com/w/cpp/io/ios_base/openmode\" rel=\"nofollow noreferrer\"><code>std::ios_base::openmode</code></a> that specifies how the file should be opened.  By default this value is set to <code>ios_base::out</code>, which will create the file if it does not exist.  You can provide your own mode though, and if you use <code>std::ios_base::out | std::ios_base::in</code> then no file will be created.  That would make your code look like this:</p>\n\n<pre><code>std::ofstream fout(\"some_file.ext\", std::ios_base::out | std::ios_base::in);\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 1937965, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eee4f8d2545ba18a0e86ea8a96f862ac?s=128&d=identicon&r=PG", "display_name": "Ranjit Kumar", "link": "https://stackoverflow.com/users/1937965/ranjit-kumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 308, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1550684401, "creation_date": 1550680578, "question_id": 54791236, "link": "https://stackoverflow.com/questions/54791236/how-to-make-ofstream-constructor-fail-when-opening-non-existing-file", "title": "How to make ofstream constructor fail when opening non-existing file?", "body": "<p>I want my open of non-existent output file to fail. Only if the output file exists I want open succeed. How can I do this with ofstream constructor?</p>\n"}, {"tags": ["c++", "c", "mqtt", "mosquitto"], "comments": [{"owner": {"reputation": 3666, "user_id": 1373856, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/220dc47dfe9d2847119c55d74a038e4b?s=128&d=identicon&r=PG", "display_name": "Ben T", "link": "https://stackoverflow.com/users/1373856/ben-t"}, "edited": false, "score": 0, "creation_date": 1550715133, "post_id": 54791231, "comment_id": 96373838, "body": "You can check the AWS console and cloudwatch to see if the connection was successful. As for <code>fail to push data</code> the code snippet doesn&#39;t publish any message - what are you expecting to appear?"}, {"owner": {"reputation": 3666, "user_id": 1373856, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/220dc47dfe9d2847119c55d74a038e4b?s=128&d=identicon&r=PG", "display_name": "Ben T", "link": "https://stackoverflow.com/users/1373856/ben-t"}, "edited": false, "score": 0, "creation_date": 1550715178, "post_id": 54791231, "comment_id": 96373846, "body": "You probably also want to set the <code>host</code> to your iot endpoint instead of <code>amazonaws.com</code>"}, {"owner": {"reputation": 81, "user_id": 1676751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b474f2066b334a43a9433b6560f2225b?s=128&d=identicon&r=PG&f=1", "display_name": "chinmaya", "link": "https://stackoverflow.com/users/1676751/chinmaya"}, "reply_to_user": {"reputation": 3666, "user_id": 1373856, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/220dc47dfe9d2847119c55d74a038e4b?s=128&d=identicon&r=PG", "display_name": "Ben T", "link": "https://stackoverflow.com/users/1373856/ben-t"}, "edited": false, "score": 0, "creation_date": 1550715813, "post_id": 54791231, "comment_id": 96373994, "body": "@blt I have deliberately removed the lines of code for publish to keep the lines of code less. callback functions (e.g. my_connect_callback)  do not get call even though the mosquitto_connect is successful is my biggest concern."}, {"owner": {"reputation": 81, "user_id": 1676751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b474f2066b334a43a9433b6560f2225b?s=128&d=identicon&r=PG&f=1", "display_name": "chinmaya", "link": "https://stackoverflow.com/users/1676751/chinmaya"}, "reply_to_user": {"reputation": 3666, "user_id": 1373856, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/220dc47dfe9d2847119c55d74a038e4b?s=128&d=identicon&r=PG", "display_name": "Ben T", "link": "https://stackoverflow.com/users/1373856/ben-t"}, "edited": false, "score": 0, "creation_date": 1550716095, "post_id": 54791231, "comment_id": 96374056, "body": "For ease of read i have added just &quot;amazonaws.com&quot; else i have a pretty good 39 byte size long string as iot endpoint. Thanks for your response @blt"}, {"owner": {"reputation": 3666, "user_id": 1373856, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/220dc47dfe9d2847119c55d74a038e4b?s=128&d=identicon&r=PG", "display_name": "Ben T", "link": "https://stackoverflow.com/users/1373856/ben-t"}, "edited": false, "score": 0, "creation_date": 1550749081, "post_id": 54791231, "comment_id": 96388633, "body": "Which CA certificate are you using? The AWS IoT Cloudwatch logs may also help."}, {"owner": {"reputation": 81, "user_id": 1676751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b474f2066b334a43a9433b6560f2225b?s=128&d=identicon&r=PG&f=1", "display_name": "chinmaya", "link": "https://stackoverflow.com/users/1676751/chinmaya"}, "reply_to_user": {"reputation": 3666, "user_id": 1373856, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/220dc47dfe9d2847119c55d74a038e4b?s=128&d=identicon&r=PG", "display_name": "Ben T", "link": "https://stackoverflow.com/users/1373856/ben-t"}, "edited": false, "score": 0, "creation_date": 1550878201, "post_id": 54791231, "comment_id": 96447850, "body": "@blt After giving the right ca.crt, all the callbacks started to get called (my_connect_callback and my_publish_callback). If my_publish_callback gets called then the publish is success that&#39;s what my understanding is. But i do not see data in AWS, would you like to help me in figuring out what would be the cause of this ?"}, {"owner": {"reputation": 3666, "user_id": 1373856, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/220dc47dfe9d2847119c55d74a038e4b?s=128&d=identicon&r=PG", "display_name": "Ben T", "link": "https://stackoverflow.com/users/1373856/ben-t"}, "edited": false, "score": 0, "creation_date": 1550883469, "post_id": 54791231, "comment_id": 96448848, "body": "I suggest you edit this question or create a new one with what you have tried. Otherwise, I recommend checking the Cloudwatch logs."}], "owner": {"reputation": 81, "user_id": 1676751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b474f2066b334a43a9433b6560f2225b?s=128&d=identicon&r=PG&f=1", "display_name": "chinmaya", "link": "https://stackoverflow.com/users/1676751/chinmaya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 514, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1551019362, "creation_date": 1550680554, "last_edit_date": 1551019362, "question_id": 54791231, "link": "https://stackoverflow.com/questions/54791231/callback-function-for-mosquitto-c-apis-is-not-getting-called", "title": "callback function for mosquitto c APIs is not getting called", "body": "<p>For some reason, I had to use C APIs in C++ code. Would anyone please help me in finding the reason for which this code is not working.</p>\n\n<pre><code>void ConfigureBroker()\n{\n   auto res = mosquitto_lib_init();\n   if (res == MOSQ_ERR_SUCCESS)\n      std::cout&lt;&lt;\" mosquitto_lib_init succeed. \"&lt;&lt;std::endl;\n   else\n      std::cout&lt;&lt;\" mosquitto_lib_init failed with result : \"&lt;&lt;res&lt;&lt;std::endl;\n\n   struct mosquitto * mosq = NULL;\n   const char *clientId = \"mydev\";\n   mosq = mosquitto_new(clientId, true, NULL);\n   if (!mosq) {\n      std::cout&lt;&lt;\" mosquitto_new failed. \"&lt;&lt;std::endl;\n      return;\n   }\n   else\n      std::cout&lt;&lt;\" mosquitto_new succeed. \"&lt;&lt;std::endl;\n\n   res = mosquitto_tls_set(mosq, \"path/to/CA.crt\", NULL,\n                         \"path/to/crts/DeviceCert1.crt\",\n                         \"path/to/DeviceCert1.key\", NULL);\n\n   if (MOSQ_ERR_SUCCESS == res)\n      std::cout&lt;&lt;\"mosquitto_tls_set succeed.\"&lt;&lt;std::endl;\n   else\n      std::cout&lt;&lt;\"mosquitto_tls_set failed with result : \"&lt;&lt;res&lt;&lt;std::endl;\n\n   mosquitto_connect_callback_set(mosq, my_connect_callback);\n\n   const char *host = \"amazonaws.com\";\n   res = mosquitto_connect(mosq, host, 8883, 60);\n\n   if (MOSQ_ERR_SUCCESS == res)\n      std::cout&lt;&lt;\"mosquitto_connect succeed.\"&lt;&lt;std::endl;\n   else\n      std::cout&lt;&lt;\"mosquitto_connect failed with result : \"&lt;&lt;res&lt;&lt;std::endl;\n\n   while(!mosquitto_loop(mosq, -1, 1))\n      std::cout&lt;&lt;\"mosquitto_loop_forever suceed. \\n \"&lt;&lt;std::endl;\n}\n</code></pre>\n\n<p>The output to the above code is as below</p>\n\n<pre><code>mosquitto_lib_init succeed.\nmosquitto_new succeed.\nmosquitto_tls_set succeed.\nmosquitto_connect succeed.\nmosquitto_loop_forever suceed.\nmosquitto_loop_forever suceed.\nmosquitto_loop_forever suceed.\nmosquitto_loop_forever suceed.\nmosquitto_loop_forever suceed.\nmosquitto_loop_forever suceed.\nmosquitto_loop_forever suceed.\n</code></pre>\n\n<blockquote>\n  <ol>\n  <li><p>my_connect_callback() function does get called even though mosquitto_connect() returns 0. In fact none of the callback functions\n  get call.</p></li>\n  <li><p>Though the APIs execute successfully, fail to push data into AWS.</p></li>\n  </ol>\n</blockquote>\n\n<p>mosquitto_publish() has been removed from the above code deliberately which results success as well. Any help will be appreciated.</p>\n\n<blockquote>\n  <p>FYI : mosquitto_loop_forever(mosq, -1, 1); <strong>fails</strong> with error <strong>A TLS error occured.</strong></p>\n  \n  <p>Now tested with <strong>mosquitto_pub</strong> with the same certificates and the result show there would be problem with certificates which i may need to check</p>\n</blockquote>\n\n<pre><code>Client mosqpub|11358-PCMA4GF11 sending CONNECT\nOpenSSL Error: error:14094416:SSL routines:ssl3_read_bytes:sslv3 alert certificate unknown\nError: A TLS error occurred.\n</code></pre>\n"}, {"tags": ["c++", "binary-search-tree"], "comments": [{"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1550684786, "post_id": 54791191, "comment_id": 96362819, "body": "Why screw with the tree at all?. Why not just have a separate proc, <code>getInorderR</code> that traverses the tree as right-mid-left rather than the traditional left-mid-right ?"}, {"owner": {"reputation": 61, "user_id": 9770494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7aba096fb4d1eeec93eef35cb85d6361?s=128&d=identicon&r=PG&f=1", "display_name": "Abhishek Jha", "link": "https://stackoverflow.com/users/9770494/abhishek-jha"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1550685765, "post_id": 54791191, "comment_id": 96363287, "body": "I don&#39;t quite get what you are saying. Should the inorder be reversed with reverse-inorder?"}, {"owner": {"reputation": 17343, "user_id": 445976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c82b2b9bdcf1baaf4677238d59cf745f?s=128&d=identicon&r=PG", "display_name": "Blastfurnace", "link": "https://stackoverflow.com/users/445976/blastfurnace"}, "edited": false, "score": 0, "creation_date": 1550688263, "post_id": 54791191, "comment_id": 96364522, "body": "There is a simpler solution that doesn&#39;t touch the values. Traverse the tree and swap the left and right pointer in each node."}, {"owner": {"reputation": 61, "user_id": 9770494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7aba096fb4d1eeec93eef35cb85d6361?s=128&d=identicon&r=PG&f=1", "display_name": "Abhishek Jha", "link": "https://stackoverflow.com/users/9770494/abhishek-jha"}, "edited": false, "score": 0, "creation_date": 1550688384, "post_id": 54791191, "comment_id": 96364574, "body": "Oh yes. I am trying to do it iteratively using a queue now. Leetcode\u2019s output is a little too mysterious. For [1,2] as input they expect [1, null, 2] as the output. I am kinda lost there now."}, {"owner": {"reputation": 7262, "user_id": 4955498, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-DQswbNCOBTs/AAAAAAAAAAI/AAAAAAAAADE/avTd-sX467I/photo.jpg?sz=128", "display_name": "Michael Veksler", "link": "https://stackoverflow.com/users/4955498/michael-veksler"}, "edited": false, "score": 0, "creation_date": 1550689386, "post_id": 54791191, "comment_id": 96365068, "body": "It seems that there is a bug in your printing code, since the current code seems correct (assuming the input is really a search tree, which the problem does not state). Can you show the code that prints the final result?"}, {"owner": {"reputation": 61, "user_id": 9770494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7aba096fb4d1eeec93eef35cb85d6361?s=128&d=identicon&r=PG&f=1", "display_name": "Abhishek Jha", "link": "https://stackoverflow.com/users/9770494/abhishek-jha"}, "edited": false, "score": 0, "creation_date": 1550689484, "post_id": 54791191, "comment_id": 96365114, "body": "Printing code? Which line?"}, {"owner": {"reputation": 7262, "user_id": 4955498, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-DQswbNCOBTs/AAAAAAAAAAI/AAAAAAAAADE/avTd-sX467I/photo.jpg?sz=128", "display_name": "Michael Veksler", "link": "https://stackoverflow.com/users/4955498/michael-veksler"}, "edited": false, "score": 0, "creation_date": 1550689610, "post_id": 54791191, "comment_id": 96365176, "body": "The code that printed <code>[1, null, 2]</code>. Or does [1, null, 2] mean something else?"}, {"owner": {"reputation": 61, "user_id": 9770494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7aba096fb4d1eeec93eef35cb85d6361?s=128&d=identicon&r=PG&f=1", "display_name": "Abhishek Jha", "link": "https://stackoverflow.com/users/9770494/abhishek-jha"}, "edited": false, "score": 0, "creation_date": 1550690149, "post_id": 54791191, "comment_id": 96365425, "body": "Oh. That is the output provided by leetcode for the input [1,2] without any explanation of how they got that output. Generally I have never seen null printed in the output of any kind of traversal as it is not useful information at all. I have no idea how they are getting that output and failing my code."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1550691733, "post_id": 54791191, "comment_id": 96366168, "body": "The original problem doesn&#39;t mention the word &quot;search&quot;. A binary tree is not necessarily a binary search tree. Oh and while we&#39;re at it, code at &quot;leetcode&quot; is not necessarily &quot;leet&quot;."}, {"owner": {"reputation": 61, "user_id": 9770494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7aba096fb4d1eeec93eef35cb85d6361?s=128&d=identicon&r=PG&f=1", "display_name": "Abhishek Jha", "link": "https://stackoverflow.com/users/9770494/abhishek-jha"}, "edited": false, "score": 0, "creation_date": 1550692562, "post_id": 54791191, "comment_id": 96366576, "body": "I don\u2019t understand what leet means in this context. And you are right. I didn\u2019t pay attention that it was not necessarily a binary search tree."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1550693089, "post_id": 54791191, "comment_id": 96366794, "body": "<a href=\"https://www.urbandictionary.com/define.php?term=l33t\" rel=\"nofollow noreferrer\">l33t</a>."}, {"owner": {"reputation": 61, "user_id": 9770494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7aba096fb4d1eeec93eef35cb85d6361?s=128&d=identicon&r=PG&f=1", "display_name": "Abhishek Jha", "link": "https://stackoverflow.com/users/9770494/abhishek-jha"}, "edited": false, "score": 0, "creation_date": 1550694966, "post_id": 54791191, "comment_id": 96367658, "body": "Definitely. If only interviewers knew that and stopped torturing me. I can\u2019t change their opinion on my own. I have gotta do what it takes."}], "answers": [{"comments": [{"owner": {"reputation": 61, "user_id": 9770494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7aba096fb4d1eeec93eef35cb85d6361?s=128&d=identicon&r=PG&f=1", "display_name": "Abhishek Jha", "link": "https://stackoverflow.com/users/9770494/abhishek-jha"}, "edited": false, "score": 0, "creation_date": 1550692017, "post_id": 54793968, "comment_id": 96366317, "body": "Thank you so much. My approach was wrong. I have switched to an iterative solution using a queue where are switch left and eight pointer around. This has fixed the issue."}], "tags": [], "owner": {"reputation": 7262, "user_id": 4955498, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-DQswbNCOBTs/AAAAAAAAAAI/AAAAAAAAADE/avTd-sX467I/photo.jpg?sz=128", "display_name": "Michael Veksler", "link": "https://stackoverflow.com/users/4955498/michael-veksler"}, "is_accepted": true, "score": 1, "last_activity_date": 1550693609, "last_edit_date": 1550693609, "creation_date": 1550691181, "answer_id": 54793968, "question_id": 54791191, "link": "https://stackoverflow.com/questions/54791191/how-do-i-invert-a-binary-search-tree/54793968#54793968", "title": "How do I invert a binary search tree?", "body": "<p>The code only changes the <code>val</code> fields, without changing the original topology. So a tree that looks like:</p>\n\n<pre><code>  1\n / \\\n2   5\n   / \\\n  3   4\n</code></pre>\n\n<p>Can change only the values, so that in-order traversal will generate a reversed list:</p>\n\n<pre><code>  5\n / \\\n4   3\n   / \\\n  1   2\n</code></pre>\n\n<p>This looks much better with binary search trees, but that is not the original problem description. With BST this reversal produces a BST with a reversed comparison operator.</p>\n\n<p>Fortunately, usually <em>tree reversal</em> means a complete reversal of the tree, including its topology. It is fortunately, since getting a complete reversal is simpler to code than just value reversal. In the above example, a complete reversal of the original produces:</p>\n\n<pre><code>    1\n   / \\\n  5   2\n / \\\n4   3\n</code></pre>\n\n<p>To get that you need to stop using a vector and stop collecting values. The algorithm becomes a trivial one-function recursive algorithm. It can be done with a function with a body of 6 lines.</p>\n\n<p>If however you want to create a reversed copy, and not mutate the original tree, then it becomes a 7 line body.</p>\n"}, {"tags": [], "owner": {"reputation": 91, "user_id": 10123842, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/328622238db742c4d840dfc31556023c?s=128&d=identicon&r=PG", "display_name": "redshift", "link": "https://stackoverflow.com/users/10123842/redshift"}, "is_accepted": false, "score": 0, "last_activity_date": 1591892864, "creation_date": 1591892864, "answer_id": 62329020, "question_id": 54791191, "link": "https://stackoverflow.com/questions/54791191/how-do-i-invert-a-binary-search-tree/62329020#62329020", "title": "How do I invert a binary search tree?", "body": "<pre><code>Recursive Approach:\n\n    public TreeNode invertTree(TreeNode root) {\n        return invert(root);\n    }\n\n    public TreeNode invert(TreeNode root) {\n        //base case 1\n        if (root == null)\n            return null;\n        //base case 2\n        if ((root.left == null) &amp;&amp; (root.right == null)) {\n            return root;\n        } else {\n\n            TreeNode leftt = invert(root.left);\n            TreeNode rightt = invert(root.right);\n            //swap nodes\n            root.right = leftt;\n            root.left = rightt;\n            return root;\n        }\n    }\n    }\n</code></pre>\n"}], "owner": {"reputation": 61, "user_id": 9770494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7aba096fb4d1eeec93eef35cb85d6361?s=128&d=identicon&r=PG&f=1", "display_name": "Abhishek Jha", "link": "https://stackoverflow.com/users/9770494/abhishek-jha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 649, "favorite_count": 1, "accepted_answer_id": 54793968, "answer_count": 2, "score": 0, "last_activity_date": 1591892864, "creation_date": 1550680427, "question_id": 54791191, "link": "https://stackoverflow.com/questions/54791191/how-do-i-invert-a-binary-search-tree", "title": "How do I invert a binary search tree?", "body": "<p>Problem : <a href=\"https://leetcode.com/problems/invert-binary-tree/\" rel=\"nofollow noreferrer\">https://leetcode.com/problems/invert-binary-tree/</a></p>\n\n<p>My approach :</p>\n\n<pre><code>void getInorder(std::vector&lt;int&gt; &amp; vec, TreeNode* root){\n        if(root){\n            getInorder(vec, root-&gt;left);\n            vec.push_back(root-&gt;val);\n            getInorder(vec, root-&gt;right);\n        }\n    }\n\n    void setValues(TreeNode*  root, std::vector&lt;int&gt; &amp;vec, int &amp;i ){\n        if(root){\n            setValues(root-&gt;left, vec, i);\n            root-&gt;val = vec[i];\n            i--;\n            setValues(root-&gt;right, vec, i);\n        }\n    }\n\n    TreeNode* invertTree(TreeNode* root) {\n        std::vector&lt;int&gt; inorderList, sol;\n        getInorder(inorderList, root);\n        int  i = inorderList.size() - 1;\n        setValues(root, inorderList, i);\n        getInorder(sol, root);\n        return root;\n    }\n</code></pre>\n\n<p>I am traversing the tree in inorder manner and I note down the values in a list. I again traverse the tree in inorder fashion but this time I start assigning values from the end of the list to the nodes. This should swap the left and right child values thus providing a decreasing sequence if you do inorder again. </p>\n\n<p>The test case [1,2] fails. According to the logic it outputs [2,1] which seems right to me but the actual output is [1, null, 2]. I guess leetcode is doing a preorder traversal for the output, it is not very clear.</p>\n\n<p>How do I fix this?</p>\n"}, {"tags": ["c++", "c++14", "move", "object-slicing"], "comments": [{"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 0, "creation_date": 1550680718, "post_id": 54791124, "comment_id": 96360596, "body": "Make the base non-public."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 1, "creation_date": 1550680780, "post_id": 54791124, "comment_id": 96360633, "body": "Copying and polymorphism don&#39;t mix, and this is true wrt moving too. If your value your sanity, any class that has anything virtual should be uncopyable and unmovable. If you need to make copies, use the virtual clone idiom."}, {"owner": {"reputation": 10627, "user_id": 1537925, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/U8DRJ.png?s=128&g=1", "display_name": "The Vee", "link": "https://stackoverflow.com/users/1537925/the-vee"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1550680999, "post_id": 54791124, "comment_id": 96360778, "body": "@n.m. Is it so? As long as one respect that <code>B</code> <i>is-an</i> <code>A</code> which happens to have some further capabilities, copying (passing the instance of <code>B</code> as a <code>const A&amp;</code>) should pose no problem. It just ignores whatever <code>B</code> offers in addition to <code>A</code>, but does not affect the object. Or not?"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 2, "creation_date": 1550681198, "post_id": 54791124, "comment_id": 96360888, "body": "Passing the instance of <code>B</code> as a <code>const A&amp;</code> is always OK, and it has nothing to do with copying. Copying involves copy constructors or copy assignment. These should be <code>delete</code>d."}, {"owner": {"reputation": 16907, "user_id": 4832499, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/76532994f6efa8d7dc8a3bb5b7b262a8?s=128&d=identicon&r=PG&f=1", "display_name": "Passer By", "link": "https://stackoverflow.com/users/4832499/passer-by"}, "edited": false, "score": 1, "creation_date": 1550681405, "post_id": 54791124, "comment_id": 96361009, "body": "Your premise is faulty, the public interface of a parent should <i>never</i> cause any inconsistency in derived classes. Doing so violates a <i>is-a</i> relation or whatever you want to call it."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1550681457, "post_id": 54791124, "comment_id": 96361053, "body": "A moved from instance should be assumed to be in a valid, destroyable and (usually) assignable state. But anything beyond that is up to your type to enforce and document. It&#39;s not inconsistent for a moved-from instance to still contain values and data unless you, as the class&#39; designer, decide that it is. It&#39;s up to the user to assume that they aren&#39;t there or aren&#39;t usable, unless you document otherwise. So you have to decide whether or not this is <i>actually</i> a problem. If it is, what problem does that decision fix?"}, {"owner": {"reputation": 10627, "user_id": 1537925, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/U8DRJ.png?s=128&g=1", "display_name": "The Vee", "link": "https://stackoverflow.com/users/1537925/the-vee"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1550681683, "post_id": 54791124, "comment_id": 96361206, "body": "@Fran&#231;oisAndrieux @PasserBy: The moved-from <b>base</b> is in a valid and expected state, it&#39;s just that the &quot;porcelain&quot; added by <code>B</code> was not notified. As an author of both the classes I&#39;m surely trying to foresee this and amend the <code>A</code> accordingly given it&#39;s a class designed for extension. <code>yield</code> seems to achieve this, having the whole of the object in a consistent moved-from state, but the question is whether that&#39;s indeed the simplest way."}, {"owner": {"reputation": 10627, "user_id": 1537925, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/U8DRJ.png?s=128&g=1", "display_name": "The Vee", "link": "https://stackoverflow.com/users/1537925/the-vee"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1550681826, "post_id": 54791124, "comment_id": 96361296, "body": "@n.m. I&#39;m confused. How&#39;s, say, copy assignment (which is wrong) different from passing a constant reference (which is &quot;always OK&quot;) to a member function that happens to be called the <code>operator =</code>?"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1550682401, "post_id": 54791124, "comment_id": 96361639, "body": "I don&#39;t understand what you are saying. Copy assignment is wrong. Have it deleted. You cannot pass anything to a member function named <code>operator =</code> because it&#39;s deleted. The question how it&#39;s different or similar to anything else becomes meaningless because it&#39;s now simply invalid."}, {"owner": {"reputation": 10627, "user_id": 1537925, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/U8DRJ.png?s=128&g=1", "display_name": "The Vee", "link": "https://stackoverflow.com/users/1537925/the-vee"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1550682485, "post_id": 54791124, "comment_id": 96361686, "body": "@n.m. I see, that was simple. Thanks for specifying. @ everyone: Answer...?"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1550682599, "post_id": 54791124, "comment_id": 96361753, "body": "Moving-from, as a part of the public interface of your object, must leave the <i>entire</i> object in a consistent state, not just the base part. It&#39;s up to you, the class author, to have the derived part notified when the base part is moved-from. Mo ing is almost never what you <i>want</i> to do with polymorphic objects, so just delete the 4 out of 5. But for the (mostly imaginary) case when you do meed moving, you have to do what it takes to notify the derived parts."}, {"owner": {"reputation": 9427, "user_id": 7703024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94e363e0e11695395e04f814233b6274?s=128&d=identicon&r=PG", "display_name": "super", "link": "https://stackoverflow.com/users/7703024/super"}, "edited": false, "score": 0, "creation_date": 1550683189, "post_id": 54791124, "comment_id": 96362054, "body": "Normally you would not read from a moved object. What is the motivation here?"}, {"owner": {"reputation": 10627, "user_id": 1537925, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/U8DRJ.png?s=128&g=1", "display_name": "The Vee", "link": "https://stackoverflow.com/users/1537925/the-vee"}, "reply_to_user": {"reputation": 9427, "user_id": 7703024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94e363e0e11695395e04f814233b6274?s=128&d=identicon&r=PG", "display_name": "super", "link": "https://stackoverflow.com/users/7703024/super"}, "edited": false, "score": 0, "creation_date": 1550683425, "post_id": 54791124, "comment_id": 96362181, "body": "@super I admit I don&#39;t have a particular motivation. It just occurred to me like this, like something that shouldn&#39;t be so hard to resolve cleanly. But move assignment leads to the same considerations and reading following that is conceivable."}, {"owner": {"reputation": 100407, "user_id": 16406, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fadf252892475e9b177d5cd5e8b24145?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Dodd", "link": "https://stackoverflow.com/users/16406/chris-dodd"}, "edited": false, "score": 0, "creation_date": 1550684223, "post_id": 54791124, "comment_id": 96362569, "body": "After you std::move from an object, that object is no longer valid -- any access other than just destroying it or assigning a new value to it with an assignment operator is undefined behavior.  So it should be no suprise that after <code>A a = std::move(b);</code>, <code>b</code> is in an inconsistent state and can&#39;t be used for anything."}, {"owner": {"reputation": 9602, "user_id": 7151494, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-a_FzvY-b2O0/AAAAAAAAAAI/AAAAAAAAAEw/kNwilSAvQTI/photo.jpg?sz=128", "display_name": "Fureeish", "link": "https://stackoverflow.com/users/7151494/fureeish"}, "reply_to_user": {"reputation": 100407, "user_id": 16406, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fadf252892475e9b177d5cd5e8b24145?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Dodd", "link": "https://stackoverflow.com/users/16406/chris-dodd"}, "edited": false, "score": 0, "creation_date": 1550684677, "post_id": 54791124, "comment_id": 96362767, "body": "@ChrisDodd I am pretty sure that&#39;s <i>almost</i> true. Can&#39;t find the relevant source right now, but I am certain that you can do anything with the moved-from object as long as it does not require any preconditions (which would be perfect description for &quot;<i>valid, but unspecified state</i>&quot;, as quoted from the standard) and there are standard library objects that provide more functionality than simply assigning-to that require no preconditions."}, {"owner": {"reputation": 10627, "user_id": 1537925, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/U8DRJ.png?s=128&g=1", "display_name": "The Vee", "link": "https://stackoverflow.com/users/1537925/the-vee"}, "reply_to_user": {"reputation": 100407, "user_id": 16406, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fadf252892475e9b177d5cd5e8b24145?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Dodd", "link": "https://stackoverflow.com/users/16406/chris-dodd"}, "edited": false, "score": 0, "creation_date": 1550684891, "post_id": 54791124, "comment_id": 96362869, "body": "@ChrisDodd I think it&#39;s an <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2010/n3181.html#1374\" rel=\"nofollow noreferrer\">open suggestion</a>. I couldn&#39;t find the changes proposed in <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2011/n3241.html\" rel=\"nofollow noreferrer\">here</a> adopted in the snapshots of the standard that I keep (not saying they are the most recent ones though)."}, {"owner": {"reputation": 16907, "user_id": 4832499, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/76532994f6efa8d7dc8a3bb5b7b262a8?s=128&d=identicon&r=PG&f=1", "display_name": "Passer By", "link": "https://stackoverflow.com/users/4832499/passer-by"}, "reply_to_user": {"reputation": 100407, "user_id": 16406, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fadf252892475e9b177d5cd5e8b24145?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Dodd", "link": "https://stackoverflow.com/users/16406/chris-dodd"}, "edited": false, "score": 0, "creation_date": 1550686540, "post_id": 54791124, "comment_id": 96363624, "body": "@ChrisDodd No it&#39;s not. You wrote the move constructor, you know perfectly well what happened to the object. There is nothing special about the parameters passed to a constructor. There is also nothing special about assignments, it is a function like any other."}, {"owner": {"reputation": 10627, "user_id": 1537925, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/U8DRJ.png?s=128&g=1", "display_name": "The Vee", "link": "https://stackoverflow.com/users/1537925/the-vee"}, "reply_to_user": {"reputation": 16907, "user_id": 4832499, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/76532994f6efa8d7dc8a3bb5b7b262a8?s=128&d=identicon&r=PG&f=1", "display_name": "Passer By", "link": "https://stackoverflow.com/users/4832499/passer-by"}, "edited": false, "score": 0, "creation_date": 1550687004, "post_id": 54791124, "comment_id": 96363871, "body": "@PasserBy Well, one could be delegating some work to the <code>std::</code>&#39;s move implementations. Like I leave the internals of what it means to move-assign a unique pointer in the above. So the UB (<i>if</i> it was UB) would not be a direct result of code I wrote myself only."}, {"owner": {"reputation": 100407, "user_id": 16406, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fadf252892475e9b177d5cd5e8b24145?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Dodd", "link": "https://stackoverflow.com/users/16406/chris-dodd"}, "reply_to_user": {"reputation": 16907, "user_id": 4832499, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/76532994f6efa8d7dc8a3bb5b7b262a8?s=128&d=identicon&r=PG&f=1", "display_name": "Passer By", "link": "https://stackoverflow.com/users/4832499/passer-by"}, "edited": false, "score": 0, "creation_date": 1550688902, "post_id": 54791124, "comment_id": 96364836, "body": "@PasserBy: its undefined behavior in all libraries and classes defined by anyone else -- its the &quot;exepected semantics&quot; of std::move.  Yes, you can overload your move constructor to do something unlike moving, but that&#39;s not generally a good idea."}], "answers": [{"tags": [], "owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "is_accepted": true, "score": 3, "last_activity_date": 1550684118, "last_edit_date": 1550684118, "creation_date": 1550683703, "answer_id": 54792149, "question_id": 54791124, "link": "https://stackoverflow.com/questions/54791124/how-to-prevent-move-slicing/54792149#54792149", "title": "How to prevent move slicing?", "body": "<p>You almost never want to copy <em>or</em> move polymorphic objects. They generally live on the heap, and are accessed via (smart) pointers. For copying, use the virtual <code>clone</code> idiom; and there's almost never a reason to move them. So if your class has a virtual destructor, the other four members of the big 5 should be <code>delete</code>d (or made protected, if you need them to implement your virtual <code>clone</code>).</p>\n\n<p>But in a (mostly hypothetical) situation when you do need to move a polymorphic object, and you only have a base pointer or reference, you need to realise that moving-from is also a part of the object's public interface. So it needs to leave the entire object in a consistent state, not just the base part. So you need to make sure the derived parts know. Do whatever it takes. Normally you would want to write a dedicated move-from virtual function, and call it in your move constructor/assignment:</p>\n\n<pre><code>class Base {      \n  virtual void moved_fom() {} // do nothing for base\n  // some stuff\n  // members of the big 5\n  virtual ~Base() = default; \n  Base (Base&amp;&amp; other) {\n      // do the move\n      other-&gt;moved_from();\n  }\n  // etc      \n}; \n</code></pre>\n\n<p>Now any derived can properly react to the base part being pulled from under its feet.</p>\n"}], "owner": {"reputation": 10627, "user_id": 1537925, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/U8DRJ.png?s=128&g=1", "display_name": "The Vee", "link": "https://stackoverflow.com/users/1537925/the-vee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 154, "favorite_count": 1, "accepted_answer_id": 54792149, "answer_count": 1, "score": 3, "last_activity_date": 1550684118, "creation_date": 1550680248, "last_edit_date": 1550683083, "question_id": 54791124, "link": "https://stackoverflow.com/questions/54791124/how-to-prevent-move-slicing", "title": "How to prevent move slicing?", "body": "<p>When a derived class instance is passed as a r-value <em>parent</em> reference to an unsuspecting method, the latter can legally change the parent's contents, causing incoherence with any extra data stored in the actual object. Therefore a class designed for extension can not rely on default move semantics. Consider for a trivial example:</p>\n\n<pre><code>#include &lt;memory&gt;\n#include &lt;utility&gt;\n#include &lt;iostream&gt;\n\nstruct Resource {\n  int x;\n  Resource(int x_) : x(x_*x_) { }\n};\n\nstruct A {\n  std::unique_ptr&lt;Resource&gt; ptr;\n\n  A(int x) : ptr{std::make_unique&lt;Resource&gt;(x)} { }\n  A(A&amp;&amp; other) = default; // i.e. : ptr(std::move(other.ptr)) { }\n  virtual ~A() = default;\n  // other elements of the rule of 5 left out for brevity\n\n  virtual int value() {\n    return ptr ? ptr-&gt;x : 0;\n  }\n};\n\nstruct B : A {\n  int cached;\n\n  B(int x) : A(x), cached(A::value()) { }\n\n  int value() override {\n    return cached;\n  }\n  int value_parent() {\n    return A::value();\n  }\n};\n\nint main() {\n  B b{5};\n  std::cout &lt;&lt; \"Before: b.value() = \" &lt;&lt; b.value()\n        &lt;&lt; \" (parent: \" &lt;&lt; b.value_parent() &lt;&lt; \")\\n\";\n  A a = std::move(b);\n  std::cout &lt;&lt; \"After: b.value() = \" &lt;&lt; b.value()\n        &lt;&lt; \" (parent: \" &lt;&lt; b.value_parent() &lt;&lt; \")\\n\"; // INCONSISTENT!\n}\n</code></pre>\n\n<p>In order to dispatch the resource hand-over to the most derived class, I thought of using a virtual function to get the moved-from resource in the move constructor:</p>\n\n<pre><code>... A {\n  A(A&amp;&amp; other) : ptr{std::move(other).yield()} { } /**/\n  virtual std::unique_ptr&lt;Resource&gt;&amp;&amp; yield() &amp;&amp; {\n    return std::move(ptr);\n  }\n\n... B {\n  virtual std::unique_ptr&lt;Resource&gt;&amp;&amp; yield() &amp;&amp; override {\n    cached = 0;\n    return std::move(*this).A::yield(); /**/\n  }\n</code></pre>\n\n<p><strong>This does the trick</strong> but has two issues,</p>\n\n<ul>\n<li>gets unnecessarily verbose rather quickly due to C++ \"forgetting\" that a r-value function parameter was a <code>&amp;&amp;</code> (see the need for <code>std::move</code> in lines marked <code>/**/</code>),</li>\n<li>can't be generalized easily when more than one object needs to be <code>yield</code>'ed.</li>\n</ul>\n\n<p>Is there a better / a canonical solution? Maybe I'm missing something really obvious.</p>\n"}, {"tags": ["c++", "multithreading", "optimization"], "comments": [{"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 1, "creation_date": 1550680172, "post_id": 54790992, "comment_id": 96360278, "body": "Your feeling is well-founded. Unless there is some unstated underpinning reason not to do so, a condvar+mutex architecture would probably do what you need, and do so in a process-friendly manner rather than a hand-rolled spinloop."}], "answers": [{"comments": [{"owner": {"reputation": 1705, "user_id": 9103250, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3c613d7186c7314ee818673ea4c79fd?s=128&d=identicon&r=PG&f=1", "display_name": "CharonX", "link": "https://stackoverflow.com/users/9103250/charonx"}, "edited": false, "score": 0, "creation_date": 1550735975, "post_id": 54791036, "comment_id": 96380583, "body": "Thank you very much for you help"}], "tags": [], "owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "is_accepted": false, "score": 5, "last_activity_date": 1550679990, "creation_date": 1550679990, "answer_id": 54791036, "question_id": 54790992, "link": "https://stackoverflow.com/questions/54790992/one-thread-sets-member-while-the-other-loops-over-it-is-this-thread-unsafe/54791036#54791036", "title": "One thread sets member while the other loops over it - Is this thread-unsafe?", "body": "<p>If you have readers <em>and</em> writers (or multiple writers; anything but only readers) accessing the same variable in multiple threads you <em>need</em> for that variable to be atomic <em>or</em> use a lock (or other synchronization primitive). Otherwise you have a data race and your program has Undefined Behaviour.</p>\n"}, {"comments": [{"owner": {"reputation": 1705, "user_id": 9103250, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3c613d7186c7314ee818673ea4c79fd?s=128&d=identicon&r=PG&f=1", "display_name": "CharonX", "link": "https://stackoverflow.com/users/9103250/charonx"}, "edited": false, "score": 0, "creation_date": 1550735972, "post_id": 54791044, "comment_id": 96380582, "body": "Thank you very much for you help"}], "tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": true, "score": 5, "last_activity_date": 1550680008, "creation_date": 1550680008, "answer_id": 54791044, "question_id": 54790992, "link": "https://stackoverflow.com/questions/54790992/one-thread-sets-member-while-the-other-loops-over-it-is-this-thread-unsafe/54791044#54791044", "title": "One thread sets member while the other loops over it - Is this thread-unsafe?", "body": "<p>Your suspicions are correct.  You cannot write and read from the same variable in multiple threads without some sort of synchronization mechanism.  Doing so is a data race and is undefined behavior.</p>\n\n<p>What you can do in this case is to use a <code>std::atomic&lt;bool&gt;</code> for <code>m_keepGoing</code> and <code>m_doAdditionalStuff</code> so that you will have synchronization.</p>\n"}, {"tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": false, "score": 2, "last_activity_date": 1550681218, "last_edit_date": 1550681218, "creation_date": 1550680858, "answer_id": 54791328, "question_id": 54790992, "link": "https://stackoverflow.com/questions/54790992/one-thread-sets-member-while-the-other-loops-over-it-is-this-thread-unsafe/54791328#54791328", "title": "One thread sets member while the other loops over it - Is this thread-unsafe?", "body": "<p>Yes, this is a race condition. And yes, this is the code I see in many examples, and the truth is, it <em>works</em> on modern Intel architecture with current compilers - simply because strong memory guarantees by Intel prevent any issues of reading torn or cached value, and compilers usually can't optimize away this access in any complicated enough code.</p>\n\n<p>Now, a common suggestion to fix the problem in an easiest way would be to replace <code>bool</code> flag with <code>std::atomic&lt;bool&gt;</code>. Unfortunately, in practice it might be easier said, than done. Adding <code>atomic</code> members to the class make them non-copyable and non-copy constructible, so default assignment and copy construction won't work any more. This is a nuisance which can lead to a lot of extra code written, which than will have to be supported. A further tricks might be required to ease this burden.</p>\n"}, {"tags": [], "owner": {"reputation": 81, "user_id": 1676751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b474f2066b334a43a9433b6560f2225b?s=128&d=identicon&r=PG&f=1", "display_name": "chinmaya", "link": "https://stackoverflow.com/users/1676751/chinmaya"}, "is_accepted": false, "score": 2, "last_activity_date": 1550715480, "creation_date": 1550715480, "answer_id": 54798215, "question_id": 54790992, "link": "https://stackoverflow.com/questions/54790992/one-thread-sets-member-while-the-other-loops-over-it-is-this-thread-unsafe/54798215#54798215", "title": "One thread sets member while the other loops over it - Is this thread-unsafe?", "body": "<p>If there are multiple writer threads those access the same instance, then you got a problem of data overridden (adapt thread synchronization techniques for e.g. access to instance/variable should be atomic). </p>\n"}], "owner": {"reputation": 1705, "user_id": 9103250, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3c613d7186c7314ee818673ea4c79fd?s=128&d=identicon&r=PG&f=1", "display_name": "CharonX", "link": "https://stackoverflow.com/users/9103250/charonx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 0, "accepted_answer_id": 54791044, "answer_count": 4, "score": 2, "last_activity_date": 1550715480, "creation_date": 1550679818, "question_id": 54790992, "link": "https://stackoverflow.com/questions/54790992/one-thread-sets-member-while-the-other-loops-over-it-is-this-thread-unsafe", "title": "One thread sets member while the other loops over it - Is this thread-unsafe?", "body": "<p>I just discovered the following construct in our codebase (simplified in the example):</p>\n\n<pre><code>class SomeClass\n{\n  public:\n    void setKeepGoing(bool b) { m_keepGoing = b; }\n    void setDoAdditionalStuff(bool b) { m_doAdditionalStuff = b; }\n    void someLoop()\n    {\n        while(m_keepGoing) \n        {\n            //Do something\n            bool doMore = m_doAdditionalStuff;\n            if (doMore)\n                //Do more things\n        }  \n    }\n\n  private:\n    bool m_keepGoing;\n    bool m_doAdditionalStuff;\n}\n</code></pre>\n\n<p>There are multiple threads, one calling <code>someLoop()</code> while the others call <code>setKeepGoing()</code> and/or <code>setDoAdditionalStuff()</code>.</p>\n\n<p>Now my sinking gut feeling is that this is horribly thread-unsafe. The compiler may very well optimize away reading <code>m_doAdditionalStuff</code> inside the loop (as it is not changed there) and even <code>m_keepGoing</code> (as that too is not changed there) effectively resulting in code acting like:</p>\n\n<pre><code>void someLoop()\n{\n    if (!m_keepGoing)\n        return;\n    bool doMore = m_doAdditionalStuff;\n    while(true) \n    {\n        //Do something\n        if (doMore)\n            //Do more things\n    }  \n}\n</code></pre>\n\n<p>Am I correct in my suspicions?</p>\n"}, {"tags": ["python", "c++", "swig"], "answers": [{"comments": [{"owner": {"reputation": 921, "user_id": 2043980, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17e881e92b245bcb71fe579f34acb1b0?s=128&d=identicon&r=PG", "display_name": "Demaunt", "link": "https://stackoverflow.com/users/2043980/demaunt"}, "edited": false, "score": 0, "creation_date": 1550685110, "post_id": 54792266, "comment_id": 96362955, "body": "thx for an answer, but it looks like automatic type deduction will not work withour explicit telling SWIG how to wrap function. It reminds me explicit instantiation in C++"}, {"owner": {"reputation": 131156, "user_id": 235698, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KjvlE.png?s=128&g=1", "display_name": "Mark Tolonen", "link": "https://stackoverflow.com/users/235698/mark-tolonen"}, "reply_to_user": {"reputation": 921, "user_id": 2043980, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17e881e92b245bcb71fe579f34acb1b0?s=128&d=identicon&r=PG", "display_name": "Demaunt", "link": "https://stackoverflow.com/users/2043980/demaunt"}, "edited": false, "score": 0, "creation_date": 1550685670, "post_id": 54792266, "comment_id": 96363248, "body": "@Demaunt In C++, the compiler sees all the uses of a template and generates code for them.  In Python, the extension has already been compiled so <code>%template</code> instructs SWIG to generate code for the types you want to support in advance."}], "tags": [], "owner": {"reputation": 131156, "user_id": 235698, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KjvlE.png?s=128&g=1", "display_name": "Mark Tolonen", "link": "https://stackoverflow.com/users/235698/mark-tolonen"}, "is_accepted": true, "score": 1, "last_activity_date": 1550685552, "last_edit_date": 1550685552, "creation_date": 1550684204, "answer_id": 54792266, "question_id": 54790945, "link": "https://stackoverflow.com/questions/54790945/swig-python-template-functions-with-type-deduction/54792266#54792266", "title": "swig python template functions with type deduction", "body": "<p>Use the <code>%template</code> directive to instruct SWIG to create implementations of particular templates.  Only the template instances declared will be available.</p>\n\n<p>Example:</p>\n\n<pre><code>%module test\n\n%inline %{\n\nclass minimal\n{\npublic:\n    minimal()\n    {\n    }\n    ~minimal()\n    {\n    }\n\n    template&lt;class T&gt;\n    void foo(T a)\n    {\n        auto z = a; \n    }\n};\n\n%}\n\n%template(foo) minimal::foo&lt;int&gt;;\n%template(foo) minimal::foo&lt;double&gt;;\n</code></pre>\n\n<p>Example:</p>\n\n<pre><code>&gt;&gt;&gt; import test\n&gt;&gt;&gt; m=test.minimal()\n&gt;&gt;&gt; m.foo(1)\n&gt;&gt;&gt; m.foo(1.5)\n&gt;&gt;&gt; m.foo('abc')\nTraceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\n  File \"C:\\test.py\", line 115, in foo\n    return _test.minimal_foo(self, *args)\nNotImplementedError: Wrong number or type of arguments for overloaded function 'minimal_foo'.\n  Possible C/C++ prototypes are:\n    minimal::foo&lt; int &gt;(int)\n    minimal::foo&lt; double &gt;(double)\n</code></pre>\n"}], "owner": {"reputation": 921, "user_id": 2043980, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17e881e92b245bcb71fe579f34acb1b0?s=128&d=identicon&r=PG", "display_name": "Demaunt", "link": "https://stackoverflow.com/users/2043980/demaunt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 1, "accepted_answer_id": 54792266, "answer_count": 1, "score": 1, "last_activity_date": 1550685552, "creation_date": 1550679687, "question_id": 54790945, "link": "https://stackoverflow.com/questions/54790945/swig-python-template-functions-with-type-deduction", "title": "swig python template functions with type deduction", "body": "<p>I want to wrap following C++ code into python module.</p>\n\n<pre><code>class minimal\n{\npublic:\n    minimal()\n    {\n    }\n    ~minimal()\n    {\n    }\n\n    template&lt;class T&gt;\n    void foo(T a)\n    {\n        auto z = a; \n    }\n};\n</code></pre>\n\n<p>As you can see, I have template function, and I know that I can't call templated function in Python, however I hope that calling foo with int or string arguments will be succesfull because of type deduction. Still there is no foo in the .cxx file, but SWIG documentation says, that it supports type deduction</p>\n\n<p>So my goal is to python codeworking like this:</p>\n\n<pre><code>#C++ analog: minimal.foo(123)\nminimal().foo(123) \n\n#C++: to minimal().foo(0.1)\nminimal().foo(0.1) \n</code></pre>\n\n<p>Is it possible? Or my idea is completly wrong?</p>\n"}, {"tags": ["c++", "swift", "multithreading", "asynchronous", "bridging-header"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 3, "creation_date": 1550680187, "post_id": 54790861, "comment_id": 96360286, "body": "You need to store the <code>std::future</code> returned by <code>async</code> otherwise it will block until the task finishes"}, {"owner": {"reputation": 2345, "user_id": 5140756, "user_type": "registered", "accept_rate": 16, "profile_image": "https://i.stack.imgur.com/oMwxR.jpg?s=128&g=1", "display_name": "Augusto", "link": "https://stackoverflow.com/users/5140756/augusto"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1550680411, "post_id": 54790861, "comment_id": 96360417, "body": "You can help me write the correct form this line <code>std::async(std::launch::async,call_from_async);</code> ?"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 1, "creation_date": 1550680474, "post_id": 54790861, "comment_id": 96360451, "body": "That should be fine. Your code compiles correctly <a href=\"https://godbolt.org/z/2BJsMk\" rel=\"nofollow noreferrer\">here</a>. Any compiler that can provide <code>&lt;future&gt;</code> should support <code>std::async</code> as they were introduced in the same c++ version. So I can&#39;t explain the error you have nor can I reproduce it."}, {"owner": {"reputation": 2345, "user_id": 5140756, "user_type": "registered", "accept_rate": 16, "profile_image": "https://i.stack.imgur.com/oMwxR.jpg?s=128&g=1", "display_name": "Augusto", "link": "https://stackoverflow.com/users/5140756/augusto"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1550680583, "post_id": 54790861, "comment_id": 96360508, "body": "I&#39;m using a macos, this apparentely not works. When I make this question my code was compiling correct"}, {"owner": {"reputation": 2345, "user_id": 5140756, "user_type": "registered", "accept_rate": 16, "profile_image": "https://i.stack.imgur.com/oMwxR.jpg?s=128&g=1", "display_name": "Augusto", "link": "https://stackoverflow.com/users/5140756/augusto"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1550681422, "post_id": 54790861, "comment_id": 96361022, "body": "@Fran&#231;oisAndrieux I tried use <code>std::future</code> but not solves, the code keeps sync and blocking."}, {"owner": {"reputation": 9427, "user_id": 7703024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94e363e0e11695395e04f814233b6274?s=128&d=identicon&r=PG", "display_name": "super", "link": "https://stackoverflow.com/users/7703024/super"}, "edited": false, "score": 0, "creation_date": 1550682163, "post_id": 54790861, "comment_id": 96361508, "body": "You need to call <code>fut.get()</code> after printing <code>2</code>. Otherwise the program will end before the thread has finished."}, {"owner": {"reputation": 2345, "user_id": 5140756, "user_type": "registered", "accept_rate": 16, "profile_image": "https://i.stack.imgur.com/oMwxR.jpg?s=128&g=1", "display_name": "Augusto", "link": "https://stackoverflow.com/users/5140756/augusto"}, "reply_to_user": {"reputation": 9427, "user_id": 7703024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94e363e0e11695395e04f814233b6274?s=128&d=identicon&r=PG", "display_name": "super", "link": "https://stackoverflow.com/users/7703024/super"}, "edited": false, "score": 0, "creation_date": 1550682397, "post_id": 54790861, "comment_id": 96361638, "body": "@super It turn my code sync and blocking..."}, {"owner": {"reputation": 9427, "user_id": 7703024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94e363e0e11695395e04f814233b6274?s=128&d=identicon&r=PG", "display_name": "super", "link": "https://stackoverflow.com/users/7703024/super"}, "edited": false, "score": 0, "creation_date": 1550682509, "post_id": 54790861, "comment_id": 96361702, "body": "@Augusto Yes, <code>get</code> is blocking. But you still need to make sure all your threads are finished before ending the program. In a bigger program you could use <code>wait_for</code> to check for the result without blocking."}, {"owner": {"reputation": 2345, "user_id": 5140756, "user_type": "registered", "accept_rate": 16, "profile_image": "https://i.stack.imgur.com/oMwxR.jpg?s=128&g=1", "display_name": "Augusto", "link": "https://stackoverflow.com/users/5140756/augusto"}, "edited": false, "score": 0, "creation_date": 1550682559, "post_id": 54790861, "comment_id": 96361730, "body": "I&#39;m doing interoperability between Swift code and C++ code, so the program never ends."}, {"owner": {"reputation": 9427, "user_id": 7703024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94e363e0e11695395e04f814233b6274?s=128&d=identicon&r=PG", "display_name": "super", "link": "https://stackoverflow.com/users/7703024/super"}, "edited": false, "score": 0, "creation_date": 1550682606, "post_id": 54790861, "comment_id": 96361756, "body": "Your example code clearly ends. If you have another example you should probably include that in the question."}, {"owner": {"reputation": 2345, "user_id": 5140756, "user_type": "registered", "accept_rate": 16, "profile_image": "https://i.stack.imgur.com/oMwxR.jpg?s=128&g=1", "display_name": "Augusto", "link": "https://stackoverflow.com/users/5140756/augusto"}, "reply_to_user": {"reputation": 9427, "user_id": 7703024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94e363e0e11695395e04f814233b6274?s=128&d=identicon&r=PG", "display_name": "super", "link": "https://stackoverflow.com/users/7703024/super"}, "edited": false, "score": 0, "creation_date": 1550683171, "post_id": 54790861, "comment_id": 96362044, "body": "@super you are alright, I edited the question."}], "answers": [{"tags": [], "owner": {"reputation": 398, "user_id": 4298020, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QZONY.jpg?s=128&g=1", "display_name": "Boris Rasin", "link": "https://stackoverflow.com/users/4298020/boris-rasin"}, "is_accepted": false, "score": 3, "last_activity_date": 1553986350, "creation_date": 1553986350, "answer_id": 55436368, "question_id": 54790861, "link": "https://stackoverflow.com/questions/54790861/how-to-make-a-async-call-function-on-c-using-threads-called-from-swift-code/55436368#55436368", "title": "How to make a async call function on C++ using threads called from Swift code?", "body": "<p>This is how it can be done using <a href=\"https://www.scapix.com/\" rel=\"nofollow noreferrer\">Scapix Language Bridge</a>:</p>\n\n<p>C++</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;thread&gt;\n#include &lt;iostream&gt;\n#include &lt;scapix/bridge/object.h&gt;\n\nclass cpp_class : public scapix::bridge::object&lt;cpp_class&gt;\n{\npublic:\n\n    void async(std::function&lt;void(std::string)&gt; callback)\n    {\n        std::thread([=]{\n            std::this_thread::sleep_for(std::chrono::seconds(3));\n            std::cout &lt;&lt; \"cpp_class::async\\n\";\n            callback(\"cpp_class::async -&gt; success\");\n        }).detach();\n    }\n};\n</code></pre>\n\n<p>Swift</p>\n\n<pre class=\"lang-swift prettyprint-override\"><code>import UIKit\n\nclass ViewController: UIViewController {\n\n    override func viewDidLoad() {\n        super.viewDidLoad()\n\n        let cpp = CppClass()\n\n        cpp.async() {\n            (result: String) in\n            print(\"Swift: \" + result)\n        }\n    }\n}\n</code></pre>\n\n<p>This prints:</p>\n\n<pre><code>cpp_class::async\nSwift: cpp_class::async -&gt; success\n</code></pre>\n"}], "owner": {"reputation": 2345, "user_id": 5140756, "user_type": "registered", "accept_rate": 16, "profile_image": "https://i.stack.imgur.com/oMwxR.jpg?s=128&g=1", "display_name": "Augusto", "link": "https://stackoverflow.com/users/5140756/augusto"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 689, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1553986350, "creation_date": 1550679437, "last_edit_date": 1550683157, "question_id": 54790861, "link": "https://stackoverflow.com/questions/54790861/how-to-make-a-async-call-function-on-c-using-threads-called-from-swift-code", "title": "How to make a async call function on C++ using threads called from Swift code?", "body": "<p>I'm trying make a simple async call using C++.  My problem is that my code executing sync and use block functions. I want a async and non-blocking program.</p>\n\n<p>First time, I wrote a little code in C++ to test my logic, so the program ends before thread so this not works. But on the Xcode on iOS project I can write C++ code without <code>main</code> function, on the Final Objective part is detailed it.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;chrono&gt;\n#include &lt;future&gt;\n\nusing namespace std;\n\nvoid call_from_async()\n{\n    std::this_thread::sleep_for(std::chrono::seconds(5));\n    cout &lt;&lt; \"Async call\" &lt;&lt; endl;\n}\n\nint main(void) {\n    printf(\"1\\n\");\n    std::future&lt;void&gt; fut = std::async(std::launch::async, call_from_async);\n    // std::async(std::launch::async,call_from_async);\n    printf(\"2\\n\");\n    return 0;\n}\n</code></pre>\n\n<p><strong>Output:</strong></p>\n\n<pre><code>1\n2\n</code></pre>\n\n<p><strong>Desired output:</strong></p>\n\n<pre><code>1\n2\nAsync Call\n</code></pre>\n\n<p><strong>Final Objective</strong></p>\n\n<p>I've a Swift project and I must call C++ async functions. To do it, I want call a C++ function from Swift and pass a pointer function to get the callback when process has been finished. To start the project I just wrote a little code to call C++ function and leave the work make on background, when work is finished back to Swift throught callback function. I don't make a callback function yet, before I want test the async functions.</p>\n\n<p>Swift code</p>\n\n<pre><code>// ViewController.swift\n\nimport UIKit\n\nclass ViewController: UIViewController {\n\n    override func viewDidLoad() {\n        super.viewDidLoad()\n        printFromCPP()\n        print(\"1\")\n        call_async_function()\n        print(\"2\")\n    }\n}\n</code></pre>\n\n<hr>\n\n<pre><code>// Ex_iOS_CPP_Swift-Bridging-Header.h\n\n#ifdef __cplusplus\nextern \"C\" {\n#endif\n\n#include \"Foo.h\"\n\n#ifdef __cplusplus\n}\n#endif\n</code></pre>\n\n<hr>\n\n<pre><code>// Foo.h\n\n#ifndef Foo_h\n#define Foo_h\n\nvoid printFromCPP();\nvoid call_async_function();\n\n#endif /* Foo_h */\n</code></pre>\n\n<hr>\n\n<pre><code>// Foo.cpp\n\n#include &lt;iostream&gt;\n#include &lt;future&gt;\n#include &lt;unistd.h&gt;\n#include \"Ex_iOS_CPP_Swift-Bridging-Header.h\"\n\nusing namespace std;\n\nvoid called_from_async() {\n    sleep(3);\n    cout &lt;&lt; \"Async call\" &lt;&lt; endl;\n}\n\nvoid call_async_function() {\n//    std::future&lt;void&gt; fut = std::async(std::launch::async, called_from_async);\n    std::future&lt;void&gt; result( std::async(called_from_async));\n}\n\nvoid printFromCPP() {\n    cout &lt;&lt; \"Hello World from CPP\" &lt;&lt; endl;\n}\n</code></pre>\n\n<p><strong>Output</strong></p>\n\n<pre><code>Hello World from CPP\n1\nAsync call\n2\n</code></pre>\n\n<p><strong>Desired output</strong></p>\n\n<pre><code>Hello World from CPP\n1\n2\nAsync call\n</code></pre>\n"}, {"tags": ["c++", "function", "syntax", "declaration"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 42, "creation_date": 1550679396, "post_id": 54790795, "comment_id": 96359814, "body": "A definition is also a declaration. But I would say your answer was correct."}, {"owner": {"reputation": 7117, "user_id": 1245420, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c5a428623702851ce5f462822483fc6c?s=128&d=identicon&r=PG", "display_name": "phonetagger", "link": "https://stackoverflow.com/users/1245420/phonetagger"}, "edited": false, "score": 217, "creation_date": 1550679535, "post_id": 54790795, "comment_id": 96359906, "body": "It&#39;s a tricky nitpicking question and has no bearing on anyone&#39;s ability to program well."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 3, "creation_date": 1550679538, "post_id": 54790795, "comment_id": 96359910, "body": "if you read &quot;declaration&quot; as &quot;declaration without definition&quot; then the answer is false, though yours is a valid interpretation imho"}, {"owner": {"reputation": 187, "user_id": 3733334, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e39a8a702cb94d44e344727625120f1?s=128&d=identicon&r=PG&f=1", "display_name": "mcabreb", "link": "https://stackoverflow.com/users/3733334/mcabreb"}, "edited": false, "score": 1, "creation_date": 1550679611, "post_id": 54790795, "comment_id": 96359955, "body": "I think you are correct, but it maybe they wanted it to be a tricky question. You should ask for the reasoning behind the answer given as valid."}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 40, "creation_date": 1550679612, "post_id": 54790795, "comment_id": 96359957, "body": "I always find the questions, that result in double-negatives, confusing. In my mind, such questions are designed to trip students up. Why couldn&#39;t the question be formed in a following way: &quot;A semicolon (&#39;;&#39;) is always needed after a function declaration. True or False.&quot;? :/"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "reply_to_user": {"reputation": 7117, "user_id": 1245420, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c5a428623702851ce5f462822483fc6c?s=128&d=identicon&r=PG", "display_name": "phonetagger", "link": "https://stackoverflow.com/users/1245420/phonetagger"}, "edited": false, "score": 18, "creation_date": 1550679658, "post_id": 54790795, "comment_id": 96359984, "body": "@phonetagger All this confusion goes to show how badly worded the question is."}, {"owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "reply_to_user": {"reputation": 7117, "user_id": 1245420, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c5a428623702851ce5f462822483fc6c?s=128&d=identicon&r=PG", "display_name": "phonetagger", "link": "https://stackoverflow.com/users/1245420/phonetagger"}, "edited": false, "score": 4, "creation_date": 1550679660, "post_id": 54790795, "comment_id": 96359985, "body": "As @phonetagger suggests, this question should not be on an &quot;intermediate programming test&quot;, it is super-nitpicky and confused people easily, like it confused you. Don&#39;t go crazy! It&#39;s not really your fault if you didn&#39;t mark the answer they expected."}, {"owner": {"reputation": 34086, "user_id": 787480, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/91cDR.png?s=128&g=1", "display_name": "Sneftel", "link": "https://stackoverflow.com/users/787480/sneftel"}, "edited": false, "score": 34, "creation_date": 1550679696, "post_id": 54790795, "comment_id": 96360007, "body": "<a href=\"https://en.wikipedia.org/wiki/Hanlon%27s_razor\" rel=\"nofollow noreferrer\">Hanlon&#39;s Razor</a> suggests that the author of the test mixed up &quot;declaration&quot; and &quot;definition&quot;."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 4, "creation_date": 1550680471, "post_id": 54790795, "comment_id": 96360449, "body": "Just run away from this test any other tests this provider offers."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 10, "creation_date": 1550680943, "post_id": 54790795, "comment_id": 96360745, "body": "Clear, unambiguous language is vitally important to programming. This teaches the wrong lesson."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 6, "creation_date": 1550695580, "post_id": 54790795, "comment_id": 96367949, "body": "<code>int func(float), var;</code> declares a function and a variable. You need a semicolon after the entire statement, but not after the function declaration itself. But I doubt this is what the quiz author intended."}, {"owner": {"reputation": 215, "user_id": 4406754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/280c38f4cc343f0f3be19b35d2195c91?s=128&d=identicon&r=PG&f=1", "display_name": "jamesqf", "link": "https://stackoverflow.com/users/4406754/jamesqf"}, "edited": false, "score": 2, "creation_date": 1550701968, "post_id": 54790795, "comment_id": 96370510, "body": "And the bottom line is that knowing whether that particular line of code is called a declaration, a definition, or a whizbang does not matter to your ability to write code."}, {"owner": {"reputation": 223, "user_id": 2673243, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c84cb4ebbc69b12dd7cae7a9cc201f04?s=128&d=identicon&r=PG", "display_name": "Eric M Schmidt", "link": "https://stackoverflow.com/users/2673243/eric-m-schmidt"}, "edited": false, "score": 0, "creation_date": 1550731264, "post_id": 54790795, "comment_id": 96378377, "body": "The grammar in the standard indicates that any terminating semicolon is <i>part of</i> the declaration."}, {"owner": {"reputation": 187, "user_id": 3607738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wt0uH.png?s=128&g=1", "display_name": "gl_prout", "link": "https://stackoverflow.com/users/3607738/gl-prout"}, "edited": false, "score": 1, "creation_date": 1550733300, "post_id": 54790795, "comment_id": 96379272, "body": "isn&#39;t the <code>int func();</code> rather named a prototype?"}, {"owner": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "edited": false, "score": 1, "creation_date": 1550735673, "post_id": 54790795, "comment_id": 96380434, "body": "@NeilButterworth I would say, function definition also declares it, but text &quot;this line is function declaration&quot; would in any normal context mean it is a forward declaration specifically, and not a definition, without ambiguity."}, {"owner": {"reputation": 10586, "user_id": 170383, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4d9f7a30948dca1bbd05eaf27f277ae6?s=128&d=identicon&r=PG", "display_name": "David R Tribble", "link": "https://stackoverflow.com/users/170383/david-r-tribble"}, "reply_to_user": {"reputation": 7117, "user_id": 1245420, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c5a428623702851ce5f462822483fc6c?s=128&d=identicon&r=PG", "display_name": "phonetagger", "link": "https://stackoverflow.com/users/1245420/phonetagger"}, "edited": false, "score": 2, "creation_date": 1550768186, "post_id": 54790795, "comment_id": 96401466, "body": "@phonetagger hit the nail on the head. When I interview people, I don&#39;t care about syntactical minutia, but about how well they can program and how they think about solving problems."}, {"owner": {"reputation": 3497, "user_id": 4973224, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/LYTV7.jpg?s=128&g=1", "display_name": "Lmn", "link": "https://stackoverflow.com/users/4973224/lmn"}, "edited": false, "score": 1, "creation_date": 1550772956, "post_id": 54790795, "comment_id": 96403922, "body": "I stopped accepting those kinds of tests long ago \u2014 I would never want to work with a team selected by perfect passes of tests like that. I suggest you do the same \u2014 the sooner, the better. Join a team that has been selected by real-life approaches to real-life problems."}, {"owner": {"reputation": 116, "user_id": 7581343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33b87be8977cdad5dcc9bbd44f9d4abc?s=128&d=identicon&r=PG&f=1", "display_name": "wrtlprnft", "link": "https://stackoverflow.com/users/7581343/wrtlprnft"}, "edited": false, "score": 2, "creation_date": 1550814541, "post_id": 54790795, "comment_id": 96416663, "body": "If you want to do anything even remotely useful, you&#39;ll need many semicolons somewhere after your function declaration."}, {"owner": {"reputation": 212, "user_id": 11051061, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8fb01de034cd8ac4dd41288a05987653?s=128&d=identicon&r=PG&f=1", "display_name": "ANone", "link": "https://stackoverflow.com/users/11051061/anone"}, "edited": false, "score": 0, "creation_date": 1550837133, "post_id": 54790795, "comment_id": 97084744, "body": "There are so many silly ways to parse this question, like how far &quot;after&quot; still counts. Like so many questions there is no way of asking the question unambiguously, without rendering it completely impenetrable to the target audience. Once you understand the topic the questions aimed at beginners will always seem like &quot;lies to children&quot;, because they are. If you are hurt by the test score, there might be something to the nit-picking. If not just sit back and feel smug that you have a good idea of where semi-colons need to be..."}, {"owner": {"reputation": 3771, "user_id": 5386374, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/fGuXb.png?s=128&g=1", "display_name": "Justin Time - Reinstate Monica", "link": "https://stackoverflow.com/users/5386374/justin-time-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1550861065, "post_id": 54790795, "comment_id": 96441533, "body": "If we want to play language-lawyer, then we can say that a function declaration must be followed by either a semicolon or a function body (in which case it is also a definition).  Or we could look at how a declaration <i>statement</i> in general can contain multiple declarators, in which case a function declaration can also be followed with other function declarations and/or variable declarations (provided they all share a common &quot;decl-specifier-seq&quot;).  I doubt cases like this are what the question is actually <i>about</i>, though."}, {"owner": {"reputation": 11358, "user_id": 2708650, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-iuLvd5ToDQ8/AAAAAAAAAAI/AAAAAAAAAEA/aGdWcMU2x_4/photo.jpg?sz=128", "display_name": "Ian MacDonald", "link": "https://stackoverflow.com/users/2708650/ian-macdonald"}, "edited": false, "score": 5, "creation_date": 1551016093, "post_id": 54790795, "comment_id": 96476805, "body": "How to make people feel worse about their programming ability: ask trick questions and expect a specific answer."}, {"owner": {"reputation": 170, "user_id": 7697801, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a81a30b5984fa219c9b605ea8383f12?s=128&d=identicon&r=PG&f=1", "display_name": "Jay Speidell", "link": "https://stackoverflow.com/users/7697801/jay-speidell"}, "edited": false, "score": 0, "creation_date": 1551144226, "post_id": 54790795, "comment_id": 96524194, "body": "Every CS exam I take has a couple of these. It&#39;s infuriating because it devalues my education. Accept that you&#39;re going to get them wrong, let the professor have their jollies, and roll with it. GPA isn&#39;t that important after you graduate. If the programming test was for a job... RUN!"}, {"owner": {"reputation": 16020, "user_id": 9716597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f97c613dca0b157b40551a0d756abeb?s=128&d=identicon&r=PG&f=1", "display_name": "L. F.", "link": "https://stackoverflow.com/users/9716597/l-f"}, "edited": false, "score": 0, "creation_date": 1553318616, "post_id": 54790795, "comment_id": 97349116, "body": "How about <code>#define X ;</code> then <code>int foo() X</code>? Is that considered &quot;a semicolon&quot;?"}], "answers": [{"comments": [{"owner": {"reputation": 280, "user_id": 10817377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/879d8990cccfc2856cf1ca6279a7afda?s=128&d=identicon&r=PG&f=1", "display_name": "I Funball", "link": "https://stackoverflow.com/users/10817377/i-funball"}, "edited": false, "score": 10, "creation_date": 1550775351, "post_id": 54790878, "comment_id": 96405080, "body": "I&#39;d argue that true isn&#39;t correct because of the reason you gave. If there are cases when a semicolon is needed, then it is false (or not true). True is the absolute to me, if there are clear cases when it is needed then you cannot say true."}, {"owner": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "reply_to_user": {"reputation": 280, "user_id": 10817377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/879d8990cccfc2856cf1ca6279a7afda?s=128&d=identicon&r=PG&f=1", "display_name": "I Funball", "link": "https://stackoverflow.com/users/10817377/i-funball"}, "edited": false, "score": 16, "creation_date": 1550846640, "post_id": 54790878, "comment_id": 96433847, "body": "@IFunball Good argument. Stupid natual languages. The sentence &quot;A semicolon (&#39;;&#39;) is not needed after a function declaration&quot; can be read as &quot;A semicolon (&#39;;&#39;) is not <b>(ever)</b> needed after a function declaration&quot; or as &quot;A semicolon (&#39;;&#39;) is not <b>(always)</b> needed after a function declaration&quot;. Whether to qualify the statement as true or false hinges on choosing an interpretation. Strictly spoken the question is unclear and hence has no clear answer."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 280, "user_id": 10817377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/879d8990cccfc2856cf1ca6279a7afda?s=128&d=identicon&r=PG&f=1", "display_name": "I Funball", "link": "https://stackoverflow.com/users/10817377/i-funball"}, "edited": false, "score": 6, "creation_date": 1550928217, "post_id": 54790878, "comment_id": 96457470, "body": "@IFunball It&#39;s because &quot;declaration&quot;, with no further context and no statement that we&#39;re language lawyering, is commonly understood to mean &quot;a non-defining declaration&quot;. The question was unfair."}, {"owner": {"reputation": 966, "user_id": 1755715, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/J3dKX.png?s=128&g=1", "display_name": "Nat", "link": "https://stackoverflow.com/users/1755715/nat"}, "edited": false, "score": 2, "creation_date": 1551127678, "post_id": 54790878, "comment_id": 96518873, "body": "Any exam question that&#39;s unclear to someone who knows the content being tested for is bugged."}, {"owner": {"reputation": 940, "user_id": 3402566, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/bd3c4c987c67bdcdd9a20e4727b552f8?s=128&d=identicon&r=PG&f=1", "display_name": "Nick Mertin", "link": "https://stackoverflow.com/users/3402566/nick-mertin"}, "edited": false, "score": 2, "creation_date": 1551210750, "post_id": 54790878, "comment_id": 96555271, "body": "Sounds like we need to add an undefined behavior clause to the English language"}], "tags": [], "owner": {"reputation": 11764, "user_id": 279130, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5855748ea447bb6797fb04ccb6aa70bb?s=128&d=identicon&r=PG", "display_name": "jwismar", "link": "https://stackoverflow.com/users/279130/jwismar"}, "is_accepted": true, "score": 161, "last_activity_date": 1550679782, "last_edit_date": 1550679782, "creation_date": 1550679473, "answer_id": 54790878, "question_id": 54790795, "link": "https://stackoverflow.com/questions/54790795/isnt-a-semicolon-needed-after-a-function-declaration-in-c/54790878#54790878", "title": "Isn&#39;t a semicolon (&#39;;&#39;) needed after a function declaration in C++?", "body": "<p>You can have a situation where you declare and define the function in one step, i.e. if you include the function definition at the point where you're declaring it. So <em>technically</em> I suppose true is correct. But the question is worded in such a way that I would have answered it the way you did.</p>\n"}, {"comments": [{"owner": {"reputation": 728, "user_id": 6677362, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/U5ybb.png?s=128&g=1", "display_name": "Luca Corsini", "link": "https://stackoverflow.com/users/6677362/luca-corsini"}, "reply_to_user": {"reputation": 1619, "user_id": 9942726, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Kk0SgohPqpU/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq3qYyss0PUCU_CmQwQ4AalqmgKo-g/mo/photo.jpg?sz=128", "display_name": "Logan", "link": "https://stackoverflow.com/users/9942726/logan"}, "edited": false, "score": 3, "creation_date": 1550680057, "post_id": 54790991, "comment_id": 96360209, "body": "Anyway, don&#39;t put the thing on a personal level. The important thing is that you understood how a function declaration-definition works, so don&#39;t worry about it too much, just make sure that the question will be at least checked and go on"}, {"owner": {"reputation": 1619, "user_id": 9942726, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Kk0SgohPqpU/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq3qYyss0PUCU_CmQwQ4AalqmgKo-g/mo/photo.jpg?sz=128", "display_name": "Logan", "link": "https://stackoverflow.com/users/9942726/logan"}, "edited": false, "score": 11, "creation_date": 1550680557, "post_id": 54790991, "comment_id": 96360492, "body": "Absolutely. Honestly, I learned more about function declaration-definition from getting the question wrong than I would&#39;ve had I gotten in it correct."}, {"owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "reply_to_user": {"reputation": 1619, "user_id": 9942726, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Kk0SgohPqpU/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq3qYyss0PUCU_CmQwQ4AalqmgKo-g/mo/photo.jpg?sz=128", "display_name": "Logan", "link": "https://stackoverflow.com/users/9942726/logan"}, "edited": false, "score": 1, "creation_date": 1550690223, "post_id": 54790991, "comment_id": 96365454, "body": "@Logan don&#39;t worry too much. If you know how to write and read a function that&#39;s all you need. I personally hate these kind of questions that 1. are not well defined 2. test your theoretical knowledge of the syntax. To me it&#39;s like muscle memory. When I write each digit goes effortlessly to the key it is supposed to go, but if you give me a test about what keys should a digit press I would be completely hopeless without a keyboard to physically do the action ..."}, {"owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 2, "creation_date": 1550690269, "post_id": 54790991, "comment_id": 96365474, "body": "... Writing common syntax (e.g. like a function) will become a second nature to you. And when you will mess it up because you just switched languages, well... intellisense and syntax highlighting make for quick and efficient solutions. Invest your time and energy in something more useful."}], "tags": [], "owner": {"reputation": 728, "user_id": 6677362, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/U5ybb.png?s=128&g=1", "display_name": "Luca Corsini", "link": "https://stackoverflow.com/users/6677362/luca-corsini"}, "is_accepted": false, "score": 25, "last_activity_date": 1552937383, "last_edit_date": 1552937383, "creation_date": 1550679817, "answer_id": 54790991, "question_id": 54790795, "link": "https://stackoverflow.com/questions/54790795/isnt-a-semicolon-needed-after-a-function-declaration-in-c/54790991#54790991", "title": "Isn&#39;t a semicolon (&#39;;&#39;) needed after a function declaration in C++?", "body": "<p>You can declare a function like this too:</p>\n\n<pre><code>int func(){\n    return 1;\n}\n</code></pre>\n\n<p>The statement is very ambiguous. The right answer should be: it depends on how you declare the function.</p>\n\n<p>Anyway, I'd have chosen false too, and maybe you can report the question to someone.</p>\n"}, {"comments": [{"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 2, "creation_date": 1550774481, "post_id": 54792240, "comment_id": 96404668, "body": "It&#39;s also possible to use a typedef to define a function type, and then make use of that to declare many functions at once, e.g. <code>typedef int fooProc(int); fooProc a,b.c.d.e;</code> I&#39;m not sure why standard headers for floppy-drive-based compilers didn&#39;t do that back in the day, since I would think it would have allowed header files to be quite a lot smaller and thus faster to process."}, {"owner": {"reputation": 30517, "user_id": 774499, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/sju2a.jpg?s=128&g=1", "display_name": "David Hammen", "link": "https://stackoverflow.com/users/774499/david-hammen"}, "edited": false, "score": 0, "creation_date": 1550960594, "post_id": 54792240, "comment_id": 96466297, "body": "Also consider <code>int f(int(&amp;g)(),int(*h)()){return g()+h();}</code> This has three function declarations, one of which is followed by an open curly brace, another by a comma, and a third by a close parenthesis."}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "reply_to_user": {"reputation": 30517, "user_id": 774499, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/sju2a.jpg?s=128&g=1", "display_name": "David Hammen", "link": "https://stackoverflow.com/users/774499/david-hammen"}, "edited": false, "score": 1, "creation_date": 1550974449, "post_id": 54792240, "comment_id": 96468660, "body": "@DavidHammen: That doesn&#39;t strictly declare <i>functions</i> other than <code>int f(stuff)</code>.  Even in the scope of the function, <code>g</code> is an automatic variable of type <i>reference to function</i>, and <code>h</code> is a <i>pointer to function</i>."}], "tags": [], "owner": {"reputation": 5668, "user_id": 4083309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6b4ef5a2e912153069b82607789a717?s=128&d=identicon&r=PG&f=1", "display_name": "Arne Vogel", "link": "https://stackoverflow.com/users/4083309/arne-vogel"}, "is_accepted": false, "score": 147, "last_activity_date": 1550684115, "creation_date": 1550684115, "answer_id": 54792240, "question_id": 54790795, "link": "https://stackoverflow.com/questions/54790795/isnt-a-semicolon-needed-after-a-function-declaration-in-c/54792240#54792240", "title": "Isn&#39;t a semicolon (&#39;;&#39;) needed after a function declaration in C++?", "body": "<p>In addition to the \"a definition is also a declaration\" thing, the following is legal C++:</p>\n\n<pre><code>int f(), g();\n</code></pre>\n\n<p>This declares two functions,<code>f</code> and <code>g</code>, both without arguments and with a return type of <code>int</code>, but the definition of <code>f</code> is not followed (immediately) by a semicolon. Likewise, this is legal:</p>\n\n<pre><code>int f(), i = 42;\n</code></pre>\n\n<p>But it is indeed not allowed to omit the semicolon entirely in these cases, so it would be somewhat surprising if either was taken as an example of a declaration without a following semicolon. In fact, the following is illegal:</p>\n\n<pre><code>void *p, f() {}\n</code></pre>\n\n<p>Other than a (mere) function declaration, a function <em>definition</em> cannot be combined with any other declaration or definition to the same <em>type-specifier</em>. (If this were legal, it would define both a <code>void *p</code> and a <code>void f() {}</code>.)</p>\n\n<p>In any case, this seems to be a \"gotcha\" type of question that should not be in an intermediate programming test.</p>\n\n<p>(Oh, by the way, please don't actually write code like <code>int f(), i = 42;</code>.)</p>\n"}, {"comments": [{"owner": {"reputation": 67968, "user_id": 584192, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YBSIc.png?s=128&g=1", "display_name": "Samuel Liew", "link": "https://stackoverflow.com/users/584192/samuel-liew"}, "edited": false, "score": 0, "creation_date": 1550932122, "post_id": 54795959, "comment_id": 96458505, "body": "Comments are not for extended discussion; this conversation has been <a href=\"https://chat.stackoverflow.com/rooms/188924/discussion-on-answer-by-eric-lippert-isnt-a-semicolon-needed-after-a-func\">moved to chat</a>."}], "tags": [], "owner": {"reputation": 610493, "user_id": 88656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6fbdff3ffb6f111d172759b4f05bea0e?s=128&d=identicon&r=PG", "display_name": "Eric Lippert", "link": "https://stackoverflow.com/users/88656/eric-lippert"}, "is_accepted": false, "score": 83, "last_activity_date": 1550715055, "last_edit_date": 1550715055, "creation_date": 1550700322, "answer_id": 54795959, "question_id": 54790795, "link": "https://stackoverflow.com/questions/54790795/isnt-a-semicolon-needed-after-a-function-declaration-in-c/54795959#54795959", "title": "Isn&#39;t a semicolon (&#39;;&#39;) needed after a function declaration in C++?", "body": "<p>The other answers and comments call out several of the many ways that this is a horrid, misleading and badly-written question. But there is another problem that no one else has identified yet. The question is:</p>\n\n<blockquote>\n  <p>A semicolon (';') is not needed after a function declaration. True or False.</p>\n</blockquote>\n\n<p>OK, let's look at a function declaration:</p>\n\n<pre><code>int func();       /* */\n/*           ^       */\n/*           |       */\n/* That whitespace is \"after the function declaration\". */\n</code></pre>\n\n<p><strong>That whole thing is the declaration</strong>.  The declaration is not <code>int func()</code> and then <strong>followed by</strong> a <code>;</code>.  The declaration is <code>int func();</code> and then is followed by whitespace. </p>\n\n<p>So, the question is: is a semicolon needed <strong>after the declaration</strong>?  Of course not. <strong>The declaration already has a semicolon in it which terminated it.</strong>  A semicolon after the declaration would be pointless.  By contrast, <code>int func(); ;</code> would be a semicolon <em>after a function declaration</em>.</p>\n\n<p>The question was almost certainly <em>intended</em> to ask the question \"true or false: the last token in a function declaration is always a semicolon\"   But that's not the question that they wrote, because the author of the quiz was not thinking clearly about the problem.</p>\n\n<p>My advice is to avoid programming language quizzes altogether. They're pretty awful.</p>\n\n<hr>\n\n<p>Fun fact, while we are on the subject.  In C#, these are all legal:</p>\n\n<pre><code>class C {}\nclass D {};\nstruct E {}\nstruct F {};\n</code></pre>\n\n<p>In C#, a class or struct declaration may end in a semicolon, or not, at your discretion. This odd little feature was added for the benefit of C/C++ programmers coming to C# who have it in their fingertips that type declarations end in a pointless semicolon; the design team didn't want to punish them for having this habit. :-)</p>\n"}, {"comments": [{"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 10, "creation_date": 1550737361, "post_id": 54801507, "comment_id": 96381335, "body": "The problem with this answer is that it suggests that definitions and declaration are mutually exclusive. In fact, every definition is a declaration; definitions are a subset of declarations."}], "tags": [], "owner": {"reputation": 79, "user_id": 9192944, "user_type": "registered", "profile_image": "https://graph.facebook.com/2093541947541849/picture?type=large", "display_name": "Rocx En Ruff", "link": "https://stackoverflow.com/users/9192944/rocx-en-ruff"}, "is_accepted": false, "score": 6, "last_activity_date": 1550756264, "last_edit_date": 1550756264, "creation_date": 1550734293, "answer_id": 54801507, "question_id": 54790795, "link": "https://stackoverflow.com/questions/54790795/isnt-a-semicolon-needed-after-a-function-declaration-in-c/54801507#54801507", "title": "Isn&#39;t a semicolon (&#39;;&#39;) needed after a function declaration in C++?", "body": "<p>This depends on whether we are declaring or defining the function.\nIf we are declaring the the function, we need to include the semicolon (<code>;</code>), and if we are defining the function, the semicolon is not needed.</p>\n\n<p>A declaration is like this:</p>\n\n<pre><code>int add(int, int);\n</code></pre>\n\n<p>And a definition is like this:</p>\n\n<pre><code>int add(int a, int b)\n{\n    // ...\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 121, "user_id": 7605402, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AcZb7.png?s=128&g=1", "display_name": "David S", "link": "https://stackoverflow.com/users/7605402/david-s"}, "edited": false, "score": 4, "creation_date": 1550843013, "post_id": 54821735, "comment_id": 96431475, "body": "Nice.  Ending that sentence with an extra period.  I see what you did there."}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 2, "creation_date": 1550863950, "post_id": 54821735, "comment_id": 96442749, "body": "<code>int func()  int a=42;</code> doesn&#39;t compile.  You need a comma, not another <code>int</code>.  See @Arne&#39;s answer posted over a day before this.  The only new thing in this answer is the last paragraph, with the analogy to English sentences."}, {"owner": {"reputation": 1025, "user_id": 5043289, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6fef66445955c19e7768a09672d2ba4c?s=128&d=identicon&r=PG", "display_name": "Nick Gammon", "link": "https://stackoverflow.com/users/5043289/nick-gammon"}, "edited": false, "score": 1, "creation_date": 1550864698, "post_id": 54821735, "comment_id": 96443046, "body": "I didn&#39;t say the second example compiled. I was pointing out that saying that a semicolon was needed &quot;after&quot; the declaration was ambiguous. My example had a semicolon after the declaration but it <b>doesn&#39;t</b> compile."}, {"owner": {"reputation": 610493, "user_id": 88656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6fbdff3ffb6f111d172759b4f05bea0e?s=128&d=identicon&r=PG", "display_name": "Eric Lippert", "link": "https://stackoverflow.com/users/88656/eric-lippert"}, "edited": false, "score": 1, "creation_date": 1551135403, "post_id": 54821735, "comment_id": 96521994, "body": "This same problem occurs in error messages; a favourite example from C# is &quot;<i>A params parameter must be the last parameter in a formal parameter list</i>&quot;. Now, suppose instead I said &quot;A frob must be the last gloob in a gloob list&quot;. Does this mean (1) Every gloob list have exactly one frob at the end, like every question has exactly one question mark at the end, (2) A gloob list can have any number of frobs, but if it has one or more frobs, the last item must be a frob, like an even number can have any number of 02468, but one of the must be the last, or..."}, {"owner": {"reputation": 610493, "user_id": 88656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6fbdff3ffb6f111d172759b4f05bea0e?s=128&d=identicon&r=PG", "display_name": "Eric Lippert", "link": "https://stackoverflow.com/users/88656/eric-lippert"}, "edited": false, "score": 0, "creation_date": 1551135531, "post_id": 54821735, "comment_id": 96522034, "body": "... (3) a gloob list can have zero or one frobs, and if it has one, it comes at the end?  If you don&#39;t know the context, I&#39;d think that (1) is the most sensible explanation, but in the case of &quot;params parameter&quot;, (3) is the correct explanation. Many informal descriptions of programming language elements have a property that my technical editor friends call &quot;COIK&quot; -- Clear Only If Known. If you do not already understand the material thoroughly, a description of it is useless to you, but if you already understand it thoroughly, you don&#39;t need the description!"}], "tags": [], "owner": {"reputation": 1025, "user_id": 5043289, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6fef66445955c19e7768a09672d2ba4c?s=128&d=identicon&r=PG", "display_name": "Nick Gammon", "link": "https://stackoverflow.com/users/5043289/nick-gammon"}, "is_accepted": false, "score": 6, "last_activity_date": 1556184489, "last_edit_date": 1556184489, "creation_date": 1550818911, "answer_id": 54821735, "question_id": 54790795, "link": "https://stackoverflow.com/questions/54790795/isnt-a-semicolon-needed-after-a-function-declaration-in-c/54821735#54821735", "title": "Isn&#39;t a semicolon (&#39;;&#39;) needed after a function declaration in C++?", "body": "<p>It's a pity the question that you took doesn't say \"directly after\". We could for example write this:</p>\n\n<pre><code>int func()  /* My function */ ;\n</code></pre>\n\n<p>Or I could write:</p>\n\n<pre><code>int func()\nint a = 42;\n</code></pre>\n\n<p>In the first case the semicolon is not <em>directly after</em> the declaration, but that would be OK.</p>\n\n<p>In the second case there is a semicolon \"after\" the declaration, but not directly after.</p>\n\n<p>I think Eric Lippert has the right idea in <a href=\"https://stackoverflow.com/questions/54790795/isnt-a-semicolon-needed-after-a-function-declaration-in-c/54795959#54795959\">his answer</a>.</p>\n\n<p>It's like saying \"should there be a period after the end of a sentence in English?\". Arguably, a sentence already has a period at the end (otherwise it wouldn't be a sentence) and therefore there should not be a period <em>after</em> the sentence..</p>\n"}, {"comments": [{"owner": {"reputation": 121, "user_id": 7605402, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AcZb7.png?s=128&g=1", "display_name": "David S", "link": "https://stackoverflow.com/users/7605402/david-s"}, "edited": false, "score": 0, "creation_date": 1550842901, "post_id": 54827889, "comment_id": 96431406, "body": "To me your prototype is the declaration based on how I learned (not saying you&#39;re wrong either though), but then I&#39;d also expect a prototype to specify the number and type of arguments, or void, but I expect you omitted that for brevity."}, {"owner": {"reputation": 329, "user_id": 10093190, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a4e44f2181afd48ea9417f145920dfb?s=128&d=identicon&r=PG", "display_name": "Opifex", "link": "https://stackoverflow.com/users/10093190/opifex"}, "reply_to_user": {"reputation": 121, "user_id": 7605402, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AcZb7.png?s=128&g=1", "display_name": "David S", "link": "https://stackoverflow.com/users/7605402/david-s"}, "edited": false, "score": 0, "creation_date": 1550850980, "post_id": 54827889, "comment_id": 96436399, "body": "David S: Yes, ofcourse it would also contain the number and type of arguments, but I indeed omitted them for brevity (note that there are also no arguments in the actual function declaration). However, I don&#39;t really agree when you say the full function declaration is called the prototype. I quote Wikipedia: &quot;a function prototype or function interface is a declaration of a function that specifies the function&#39;s name and type signature (arity, data types of parameters, and return type), but omits the function body.&quot;"}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "reply_to_user": {"reputation": 121, "user_id": 7605402, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AcZb7.png?s=128&g=1", "display_name": "David S", "link": "https://stackoverflow.com/users/7605402/david-s"}, "edited": false, "score": 0, "creation_date": 1550864193, "post_id": 54827889, "comment_id": 96442865, "body": "@DavidS: In C++, function declarations are always prototypes (or definitions), and <code>void func();</code> is exactly equivalent to <code>void func(void);</code>.  This is very different from <i>C</i>, where <code>void func();</code> doesn&#39;t tell the compiler anything about the args, and isn&#39;t the same thing as <code>void func(void);</code>.  A later prototype or definition are a good idea, otherwise the caller has to apply the default arg promotions (e.g. float -&gt; double, and narrow integer types to <code>int</code>.  Same rules as for args to variadic functions.)"}, {"owner": {"reputation": 121, "user_id": 7605402, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AcZb7.png?s=128&g=1", "display_name": "David S", "link": "https://stackoverflow.com/users/7605402/david-s"}, "edited": false, "score": 0, "creation_date": 1551175982, "post_id": 54827889, "comment_id": 96535273, "body": "My apologies, I ended up here looking at something C related and didn&#39;t note the change of language.  I won&#39;t delete my comment in the interests of clarity, but consider it retracted."}], "tags": [], "owner": {"reputation": 329, "user_id": 10093190, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a4e44f2181afd48ea9417f145920dfb?s=128&d=identicon&r=PG", "display_name": "Opifex", "link": "https://stackoverflow.com/users/10093190/opifex"}, "is_accepted": false, "score": 6, "last_activity_date": 1552937563, "last_edit_date": 1552937563, "creation_date": 1550840948, "answer_id": 54827889, "question_id": 54790795, "link": "https://stackoverflow.com/questions/54790795/isnt-a-semicolon-needed-after-a-function-declaration-in-c/54827889#54827889", "title": "Isn&#39;t a semicolon (&#39;;&#39;) needed after a function declaration in C++?", "body": "<p>Even though I agree with almost all of the other answers, stating that the question is worded very ambiguous, and that your answer is technically correct, allow me to give a different perspective:</p>\n\n<p>This is how I've always called them:</p>\n\n<pre><code>void func();  // The function prototype\n\n...\n\nvoid func()\n{\n    // The function definition\n}\n</code></pre>\n\n<p>I'm assuming the question was made up with this terminology in mind.</p>\n\n<p>Definition and declaration are both the same concept in my eyes. \"I define x = y\" == \"I declare x = y\".</p>\n\n<p>But of course, there's a big difference between the function prototype (on top) and the actual definition of the function.</p>\n"}, {"comments": [{"owner": {"reputation": 3297, "user_id": 1436796, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a4b86c1c90bc06112c2c069b58bf995?s=128&d=identicon&r=PG", "display_name": "Marc van Leeuwen", "link": "https://stackoverflow.com/users/1436796/marc-van-leeuwen"}, "edited": false, "score": 1, "creation_date": 1550846101, "post_id": 54829020, "comment_id": 96433457, "body": "I see that Eric Lippert already argued this point. I guess all the upvotes made me overlook it. Feel free to cast your votes there."}, {"owner": {"reputation": 19199, "user_id": 1424877, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/8a14e5bb44bbb4c2721ac711bd8a7bcf?s=128&d=identicon&r=PG", "display_name": "Quuxplusone", "link": "https://stackoverflow.com/users/1424877/quuxplusone"}, "edited": false, "score": 0, "creation_date": 1550904005, "post_id": 54829020, "comment_id": 96451913, "body": "Pretty much any question that asks, &quot;X is always true: true or false?&quot; is going to have the answer &quot;false.&quot;  Heck, there&#39;s no <i>need</i> to have a semicolon <i>anywhere</i>; the compiler may complain and refuse to compile your program, but that&#39;s hardly the end of the world; I wouldn&#39;t call it a fundamental <i>need</i>. ;)"}, {"owner": {"reputation": 6430, "user_id": 812053, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/005db5b7c457d0cdea627e5b48e7f59f?s=128&d=identicon&r=PG", "display_name": "Ben Millwood", "link": "https://stackoverflow.com/users/812053/ben-millwood"}, "reply_to_user": {"reputation": 19199, "user_id": 1424877, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/8a14e5bb44bbb4c2721ac711bd8a7bcf?s=128&d=identicon&r=PG", "display_name": "Quuxplusone", "link": "https://stackoverflow.com/users/1424877/quuxplusone"}, "edited": false, "score": 0, "creation_date": 1550988288, "post_id": 54829020, "comment_id": 96470759, "body": "@Quuxplusone if the compiler rejects your program, your program doesn&#39;t have any function declarations in it :)"}], "tags": [], "owner": {"reputation": 3297, "user_id": 1436796, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a4b86c1c90bc06112c2c069b58bf995?s=128&d=identicon&r=PG", "display_name": "Marc van Leeuwen", "link": "https://stackoverflow.com/users/1436796/marc-van-leeuwen"}, "is_accepted": false, "score": 20, "last_activity_date": 1550846128, "last_edit_date": 1550846128, "creation_date": 1550844924, "answer_id": 54829020, "question_id": 54790795, "link": "https://stackoverflow.com/questions/54790795/isnt-a-semicolon-needed-after-a-function-declaration-in-c/54829020#54829020", "title": "Isn&#39;t a semicolon (&#39;;&#39;) needed after a function declaration in C++?", "body": "<blockquote>\n  <p>A semicolon (';') is not needed after a function declaration.</p>\n  \n  <p>True or False.</p>\n</blockquote>\n\n<p><strong>True</strong>. A semicolon is not needed after any declaration. Nor after any definition. Nor after any statement.</p>\n\n<p>Many kinds of declaration have to end with a semicolon, as the syntax in section 7 [dcl.dcl] specifies. But there is never any need to write a second one after that.</p>\n"}, {"tags": [], "owner": {"reputation": 117, "user_id": 4909449, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b1b6e6728893e27e7f935575df60d3b?s=128&d=identicon&r=PG&f=1", "display_name": "M7off", "link": "https://stackoverflow.com/users/4909449/m7off"}, "is_accepted": false, "score": 4, "last_activity_date": 1552937600, "last_edit_date": 1552937600, "creation_date": 1551106341, "answer_id": 54868837, "question_id": 54790795, "link": "https://stackoverflow.com/questions/54790795/isnt-a-semicolon-needed-after-a-function-declaration-in-c/54868837#54868837", "title": "Isn&#39;t a semicolon (&#39;;&#39;) needed after a function declaration in C++?", "body": "<p>You can use <code>;</code> for prototypes only.</p>\n"}, {"comments": [{"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1553414482, "post_id": 54971435, "comment_id": 97370052, "body": "Declarations are not statements though."}, {"owner": {"reputation": 64, "user_id": 9548566, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/666e86ce2d68a7c0569930565eb7d3d1?s=128&d=identicon&r=PG&f=1", "display_name": "Jatinder", "link": "https://stackoverflow.com/users/9548566/jatinder"}, "reply_to_user": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1553509679, "post_id": 54971435, "comment_id": 97396499, "body": "but after the function declaration, we are executing a new line of code using compiler. so I think before executing a new line of code compiler have to know where the previous line of code ends only then a compiler can generate native code(i.e 0101)."}], "tags": [], "owner": {"reputation": 64, "user_id": 9548566, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/666e86ce2d68a7c0569930565eb7d3d1?s=128&d=identicon&r=PG&f=1", "display_name": "Jatinder", "link": "https://stackoverflow.com/users/9548566/jatinder"}, "is_accepted": false, "score": 2, "last_activity_date": 1552994445, "last_edit_date": 1552994445, "creation_date": 1551632920, "answer_id": 54971435, "question_id": 54790795, "link": "https://stackoverflow.com/questions/54790795/isnt-a-semicolon-needed-after-a-function-declaration-in-c/54971435#54971435", "title": "Isn&#39;t a semicolon (&#39;;&#39;) needed after a function declaration in C++?", "body": "<p>Semicolon (;) is used to tell the compiler that after this semicolon (;) a new statement starts.</p>\n\n<p>So I think the semicolon (;) is required during a function declaration only. So according to me, the answer will be true.</p>\n"}, {"tags": [], "owner": {"reputation": 75, "user_id": 4836681, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-mI4CweHKwNU/AAAAAAAAAAI/AAAAAAAAABM/mFCICpg7OAQ/photo.jpg?sz=128", "display_name": "dark_3nergy", "link": "https://stackoverflow.com/users/4836681/dark-3nergy"}, "is_accepted": false, "score": 4, "last_activity_date": 1552937764, "last_edit_date": 1552937764, "creation_date": 1551799160, "answer_id": 55006068, "question_id": 54790795, "link": "https://stackoverflow.com/questions/54790795/isnt-a-semicolon-needed-after-a-function-declaration-in-c/55006068#55006068", "title": "Isn&#39;t a semicolon (&#39;;&#39;) needed after a function declaration in C++?", "body": "<p>It's kind of a tricky question, but they used the word <em>declaration</em> which means something like this:</p>\n\n<pre><code>int example();\n</code></pre>\n\n<p>So it's true in this case.</p>\n\n<p>If they'd used the word <em>implementation</em> then it'd been false.</p>\n"}, {"tags": [], "owner": {"reputation": 65, "user_id": 5947900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d145bc3374aa18fbe34a8eb15758b8bb?s=128&d=identicon&r=PG&f=1", "display_name": "shiv shah", "link": "https://stackoverflow.com/users/5947900/shiv-shah"}, "is_accepted": false, "score": 2, "last_activity_date": 1556121747, "last_edit_date": 1556121747, "creation_date": 1551909493, "answer_id": 55032816, "question_id": 54790795, "link": "https://stackoverflow.com/questions/54790795/isnt-a-semicolon-needed-after-a-function-declaration-in-c/55032816#55032816", "title": "Isn&#39;t a semicolon (&#39;;&#39;) needed after a function declaration in C++?", "body": "<p>When functions are <strong>defined before main()</strong>:</p>\n\n<ul>\n<li><strong>Don't need semicolon</strong> because the function is already defined</li>\n</ul>\n\n<p>When functions are <strong>defined after main()</strong>:</p>\n\n<ul>\n<li><strong>Need semicolon</strong> because because you are prototyping that function and telling the compiler that the function exits.</li>\n</ul>\n"}], "owner": {"reputation": 1619, "user_id": 9942726, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Kk0SgohPqpU/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq3qYyss0PUCU_CmQwQ4AalqmgKo-g/mo/photo.jpg?sz=128", "display_name": "Logan", "link": "https://stackoverflow.com/users/9942726/logan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 18797, "favorite_count": 18, "accepted_answer_id": 54790878, "answer_count": 12, "score": 174, "last_activity_date": 1556184489, "creation_date": 1550679264, "last_edit_date": 1556121510, "question_id": 54790795, "link": "https://stackoverflow.com/questions/54790795/isnt-a-semicolon-needed-after-a-function-declaration-in-c", "title": "Isn&#39;t a semicolon (&#39;;&#39;) needed after a function declaration in C++?", "body": "<p>I just recently took an intermediate programming test, and one of the questions I got wrong was as follows:</p>\n\n<blockquote>\n  <p>A semicolon (';') is not needed after a function declaration.</p>\n  \n  <p>True or False.</p>\n</blockquote>\n\n<p>I chose \"false\" (and please correct me if I'm wrong because I feel like I'm going crazy), a function <strong>declaration</strong> is what you write before the definition (at the top of the code) so the compiler knows the function call before even calling it, and a function <strong>definition</strong> is what makes up the function as a whole.</p>\n\n<p>I.e.,</p>\n\n<p><strong>Declaration:</strong></p>\n\n<pre><code>int func();\n</code></pre>\n\n<p><strong>Definition:</strong></p>\n\n<pre><code>int func() {\n  return 1;\n}\n</code></pre>\n\n<p>Shouldn't the answer to this be false?</p>\n"}, {"tags": ["c++", "image-processing", "computer-vision", "histogram", "gaussian"], "owner": {"reputation": 31, "user_id": 7427902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ee93abd38c1d86f46cb5e57bbc83cad?s=128&d=identicon&r=PG&f=1", "display_name": "Meg", "link": "https://stackoverflow.com/users/7427902/meg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 80, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1550685003, "creation_date": 1550679146, "question_id": 54790749, "link": "https://stackoverflow.com/questions/54790749/gaussian-curve-calculation-c", "title": "Gaussian Curve Calculation (C++)", "body": "<p>Given a histogram, perform a bi-means gaussian fitting.\nThis project fits two Gaussian curves to one histogram with an initial threshold value, and uses the curves to determine the ideal threshold value.  At each iteration, the histogram is divided into 2 parts, a Gaussian is called for each part of the histogram.</p>\n\n<p>My calculations must be wrong considering my resultant curve is nonsensical. Can anyone spot what's going on here? I've included my functions for calculating the biMeans Gaussian curve, the fitGauss (computes Gaussian Curve), the mean, the variance, and the Gaussian value.</p>\n\n<pre><code>int biMeanGauss (int thrVal){\n    double sum1, sum2, total = 0.0;\n    int bestThr = thrVal;\n    double minDiff = 99999999.0;\n\n    for (int i = thrVal; i &lt; (maxVal-offSet); i++) {\n        set1DZero(GaussAry);\n\n        sum1 = fitGauss(0, i);\n        cout &lt;&lt; \"Sum1: \" &lt;&lt;sum1 &lt;&lt; endl;\n        sum2 = fitGauss(i, maxVal);\n        cout &lt;&lt; \"Sum2: \" &lt;&lt; sum2 &lt;&lt; endl;\n        total = sum1 + sum2;\n        cout &lt;&lt; \"Total: \" &lt;&lt; total &lt;&lt; endl;\n\n        if (total &lt; minDiff) {\n            minDiff = total;\n            bestThr = i; \n            cout &lt;&lt; \"Total &lt; MinDiff, so BestThr: \" &lt;&lt;bestThr &lt;&lt; endl;\n        }\n        else;\n    }\n    return bestThr;\n}\n\ndouble fitGauss(int leftIndex, int rightIndex){\n    double mean, var, sum = 0.0;\n    double Gval;\n\n    mean = computeMean(leftIndex, rightIndex, maxCount);\n    var = computeVar (leftIndex, rightIndex, mean);\n\n    for (int index = leftIndex; index &lt;= rightIndex; index ++){\n        Gval = computeGaussian(histAry[index], mean, var);\n        sum += abs(Gval - histAry[index]);\n        GaussAry[index] = (int)Gval;\n        GaussImg[index][(int)Gval]= 1;\n    }\n\n    return sum;\n};\n\ndouble computeMean(int leftIndex, int rightIndex, int maxCount) {\n    int mean, n, sum = 0;\n    for (int i = leftIndex; i &lt;= rightIndex; i++){\n        sum += (i*histAry[i]);\n        n++;\n        if (histAry[i] &gt; maxCount){\n            maxCount = histAry[i];\n        }\n    }\n    mean = (sum / (double) n);\n    return mean;\n}\n\ndouble computeVar(int leftIndex, int rightIndex, int mean) {\n    double var = 0;\n    double sum = 0;\n    double n = 0;\n\n    for (int i = leftIndex; i &lt;= rightIndex; i++) {\n        sum += histAry[i]*(i - mean) * (i - mean);\n        n++;\n    }\n\n    var = (sum / n);\n    return var;\n}\n\ndouble computeGaussian(int index, double mean, double var) {\n    double Gval = 0;\n    Gval = maxCount * exp(-(((index - mean)*(index - mean)) / (2 * var)));\n    return Gval;\n}\n</code></pre>\n"}, {"tags": ["c++", "sockets", "epoll"], "comments": [{"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1550679091, "post_id": 54790680, "comment_id": 96359632, "body": "&quot;<i>Here is my code</i>&quot; All information relevant to the question, including <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, must be present in the question itself, and not be hidden behind external links."}, {"owner": {"reputation": 4328, "user_id": 920069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd39f0db1f22e1314746491df063602a?s=128&d=identicon&r=PG", "display_name": "Retired Ninja", "link": "https://stackoverflow.com/users/920069/retired-ninja"}, "edited": false, "score": 0, "creation_date": 1550679095, "post_id": 54790680, "comment_id": 96359633, "body": "Your code belongs in the question as text, not at an external link that can go bad. <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}, {"owner": {"reputation": 112, "user_id": 7090598, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/E1Z6Z.jpg?s=128&g=1", "display_name": "Sora Shiro", "link": "https://stackoverflow.com/users/7090598/sora-shiro"}, "edited": false, "score": 0, "creation_date": 1550929845, "post_id": 54790680, "comment_id": 96457896, "body": "Sorry, I will pay attention to how to ask this kind of question in the future"}], "answers": [{"comments": [{"owner": {"reputation": 112, "user_id": 7090598, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/E1Z6Z.jpg?s=128&g=1", "display_name": "Sora Shiro", "link": "https://stackoverflow.com/users/7090598/sora-shiro"}, "edited": false, "score": 0, "creation_date": 1550929638, "post_id": 54791232, "comment_id": 96457834, "body": "Thanks! I changed serverFd to acceptFd and I can recv client bytes(but a new bug occured... when I tried to send &quot;I see you&quot; I got errno == 88, which is &quot;Socket operation on non-socket&quot;); Also, I handled EPOLLERR and EPOLLHUP, and I deleted call epoll_ctl(EPOLL_CTL_DEL) Thank you:)"}, {"owner": {"reputation": 112, "user_id": 7090598, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/E1Z6Z.jpg?s=128&g=1", "display_name": "Sora Shiro", "link": "https://stackoverflow.com/users/7090598/sora-shiro"}, "edited": false, "score": 0, "creation_date": 1550930980, "post_id": 54791232, "comment_id": 96458210, "body": "After I commented <code>event.data.u32 = (uint32_t) 1;</code> all works well, which is confused me..."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 112, "user_id": 7090598, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/E1Z6Z.jpg?s=128&g=1", "display_name": "Sora Shiro", "link": "https://stackoverflow.com/users/7090598/sora-shiro"}, "edited": false, "score": 0, "creation_date": 1550934983, "post_id": 54791232, "comment_id": 96459280, "body": "@ShiroSora that is because <code>event.data</code> is a <code>union</code> of multiple values. Setting its <code>u32</code> field <b>overwrites</b> its <code>fd</code> field. That is why you end up passing an invalid socket descriptor to <code>send()</code>"}, {"owner": {"reputation": 112, "user_id": 7090598, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/E1Z6Z.jpg?s=128&g=1", "display_name": "Sora Shiro", "link": "https://stackoverflow.com/users/7090598/sora-shiro"}, "edited": false, "score": 0, "creation_date": 1550980825, "post_id": 54791232, "comment_id": 96469622, "body": "That&#39;s right! I thought <b>wrongly</b> that <code>event.data</code> is <code>struct</code>..."}], "tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": true, "score": 0, "last_activity_date": 1550682902, "last_edit_date": 1550682902, "creation_date": 1550680555, "answer_id": 54791232, "question_id": 54790680, "link": "https://stackoverflow.com/questions/54790680/c-socket-accept-get-resource-deadlock-avoided-errno-with-epoll/54791232#54791232", "title": "c++ socket accept() get Resource deadlock avoided errno with epoll", "body": "<p>Error code 11 is <code>EAGAIN</code>, which is a very common error code to encounter when dealing with non-blocking socket I/O. It means the requested operation has nothing to do, try it again later.</p>\n\n<p>In the case of <a href=\"http://man7.org/linux/man-pages/man2/accept.2.html\" rel=\"nofollow noreferrer\"><code>accept()</code></a>, it means:</p>\n\n<blockquote>\n  <p><code>EAGAIN</code> or <code>EWOULDBLOCK</code></p>\n  \n  <p>The socket is marked nonblocking and <strong>no connections are present to be accepted</strong>. POSIX.1-2001 and POSIX.1-2008 allow either error to be returned for this case, and do not require these constants to have the same value, so a portable application should check for both possibilities.</p>\n</blockquote>\n\n<p>This means you are calling <code>accept()</code> at the wrong time, when the listening socket does not have any clients to accept. Double check your <code>epoll()</code> usage, it likely has a logic bug in it that is causing you to call <code>accept()</code> prematurely.</p>\n\n<p>For instance, after <code>accept()</code> has successfully accepted a client, you are assigning the <strong>listening</strong> socket instead of the <strong>client</strong> socket to <code>event.data.fd</code> when calling <code>epoll_ctl(EPOLL_CTL_ADD)</code>:</p>\n\n<pre><code>struct epoll_event event;\nevent.events = EPOLLIN;\nevent.data.fd = serverFd; // &lt;-- HERE, SHOULD BE acceptFd INSTEAD!\nint ctlClientResult = epoll_ctl(epollFd, EPOLL_CTL_ADD, acceptFd, &amp;event);\n</code></pre>\n\n<p>As such, when the <strong>client</strong> has data waiting to be read, your loop will end up calling <code>accept()</code> on the <strong>listening</strong> socket instead of calling <code>recv()</code> on the <strong>client</strong> socket.</p>\n\n<p>Also, you are not checking the reported <code>event.events</code> field for socket errors.  If an error occurs on a client socket, the reported <code>events</code> may include the <code>EPOLLERR</code> and/or <code>EPOLLHUP</code> flags.  You should check for those flags and if present then close the client socket, before checking for the <code>EPOLLIN</code> flag to call <code>recv()</code>.</p>\n\n<p>Also, note that in your example, <a href=\"https://stackoverflow.com/questions/8707601/\">it is not necessary to call <code>epoll_ctl(EPOLL_CTL_DEL)</code></a>  before calling <code>close()</code> on a socket.  Closing a socket file descriptor will automatically remove it from the epoll instance that is monitoring it.</p>\n"}, {"comments": [{"owner": {"reputation": 112, "user_id": 7090598, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/E1Z6Z.jpg?s=128&g=1", "display_name": "Sora Shiro", "link": "https://stackoverflow.com/users/7090598/sora-shiro"}, "edited": false, "score": 0, "creation_date": 1550929703, "post_id": 54794293, "comment_id": 96457854, "body": "Thank you! I fixed these bug and it worked well partly :)"}], "tags": [], "owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "is_accepted": false, "score": 1, "last_activity_date": 1550692499, "creation_date": 1550692499, "answer_id": 54794293, "question_id": 54790680, "link": "https://stackoverflow.com/questions/54790680/c-socket-accept-get-resource-deadlock-avoided-errno-with-epoll/54794293#54794293", "title": "c++ socket accept() get Resource deadlock avoided errno with epoll", "body": "<pre><code>            struct epoll_event event;\n            event.events = EPOLLIN;\n            event.data.fd = serverFd;\n            int ctlClientResult = epoll_ctl(epollFd, EPOLL_CTL_ADD, acceptFd, &amp;event);\n</code></pre>\n\n<p>When you add the newly-accepted connection to the epoll set, you tell it to report it as a hit on <code>serverFd</code>. So when the client sends you data, you try to accept a new connection instead.</p>\n\n<p>Change <code>event.data.fd = serverFd</code> to <code>event.data.fd = acceptFd</code>.</p>\n\n<p>Then you can move on to your next bug:</p>\n\n<pre><code>            char buffer[] = \"I see you\";\n            ssize_t sendResult = send(fd, &amp;buffer, 1024, 0);\n</code></pre>\n\n<p>1024?!</p>\n\n<p>Also, any time you use non-blocking sockets, you should add code to handle <code>EAGAIN</code> or <code>EWOULDBLOCK</code> errors as non-fatal.</p>\n"}], "owner": {"reputation": 112, "user_id": 7090598, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/E1Z6Z.jpg?s=128&g=1", "display_name": "Sora Shiro", "link": "https://stackoverflow.com/users/7090598/sora-shiro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 184, "favorite_count": 0, "closed_date": 1550692550, "accepted_answer_id": 54791232, "answer_count": 2, "score": -4, "last_activity_date": 1550692499, "creation_date": 1550678934, "last_edit_date": 1550681746, "question_id": 54790680, "link": "https://stackoverflow.com/questions/54790680/c-socket-accept-get-resource-deadlock-avoided-errno-with-epoll", "closed_reason": "Not suitable for this site", "title": "c++ socket accept() get Resource deadlock avoided errno with epoll", "body": "<p>I'm a C++ beginner learning I/O multiplexing.</p>\n\n<p>Here is my code:</p>\n\n<p><code>test.cpp</code> (<strong>doesn't use <code>epoll()</code></strong> and works well):</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;cstdio&gt;\n#include &lt;netinet/in.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;string.h&gt;\n\nint main() {\n    std::cout &lt;&lt; \"Hello\" &lt;&lt; std::endl;\n\n    char buffer[1024];\n    buffer[0] = 'f';\n    fprintf(stdout, \"%s\", buffer);\n    std::cout &lt;&lt; \"Hello\" &lt;&lt; std::endl;\n\n    int serverFd = socket(PF_INET, SOCK_STREAM, IPPROTO_TCP);\n    // bind &amp; listen\n    struct sockaddr_in serverAddr;\n    memset(&amp;serverAddr, 0, sizeof(serverAddr));\n    serverAddr.sin_family = AF_INET;\n    serverAddr.sin_addr.s_addr = htonl(INADDR_ANY);\n    serverAddr.sin_port = htons(80);\n    int bindResult = bind(serverFd, (struct sockaddr *) &amp;serverAddr, sizeof(serverAddr));\n    if (bindResult &lt; 0) {\n        fprintf(stderr, \"Fail to bind\\n\");\n        return 1;\n    }\n    int listenResult = listen(serverFd, 1024);\n    if (listenResult &lt; 0) {\n        fprintf(stderr, \"Fail to listen\\n\");\n        return 1;\n    }\n    struct sockaddr clientAddr;\n    unsigned int clientlen = sizeof(clientAddr);\n    int acceptFd = accept(serverFd, &amp;clientAddr, &amp;clientlen);\n    if (acceptFd &lt; 0) {\n        fprintf(stderr, \"Fail to create client connection file descriptor\\n\");\n        return 1;\n    }\n    int fd = acceptFd;\n    ssize_t received = recv(fd, &amp;buffer, 1024, 0);\n    if (received &lt; 0) {\n        fprintf(stderr, \"Fail to received bytess from client\\n\");\n        if (errno == EINTR) {\n            fprintf(stderr, \"Reason: EINTR\\n\");\n        } else if (errno == EAGAIN || errno == EWOULDBLOCK) {\n            fprintf(stderr, \"Reason: EAGAIN or EWOULDBLOCK\\n\");\n        } else {\n            fprintf(stderr, \"Reason: %d\\n\", errno);\n            close(fd);\n            return 1;\n        }\n    } else if (received == 0) {\n        close(fd);\n    } else {\n        buffer[received] = '\\0';\n        fprintf(stdout, \"%s\", buffer);\n    }\n}\n</code></pre>\n\n<p><code>test_2.cpp</code> (<strong>does use <code>epoll()</code></strong> and doesn't work well):</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;sys/epoll.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;netinet/in.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;sys/socket.h&gt;\n#include &lt;fcntl.h&gt;\n#include &lt;signal.h&gt;\n#include &lt;string.h&gt;\n\nint main() {\n    // TODO: too much error message to handle, so it's necessary to deal with it (maybe macros can)\n    std::cout &lt;&lt; \"Hello\" &lt;&lt; std::endl;\n\n    // process ignore SIGPIPE which is caused by send(), or process will exit, which is hard to find out\n    signal(SIGPIPE, SIG_IGN);\n\n    // here needs a socket fd or other fd\n    // well, AF_INET is okay;socket(PF_INET, SOCK_SEQPACKET, 0) is sctp, tcp cannot use SOCK_SEQPACKET :(\n    // when using tcp, watch out **record boundaries**\n    int serverFd = socket(PF_INET, SOCK_STREAM, IPPROTO_TCP);\n    if (serverFd &lt; 0) {\n        fprintf(stderr, \"Fail to create socket file descriptor\\n\");\n        return 1;\n    }\n    // nonblock\n    // nonblock\n    int flags = fcntl(serverFd, F_GETFL, 0);\n    if (flags &lt; 0) {\n        fprintf(stderr, \"Fail to get flags\\n\");\n        return 1;\n    }\n    int setFlagResult = fcntl(serverFd, F_SETFL, flags | O_NONBLOCK);\n    if (setFlagResult &lt; 0) {\n        fprintf(stderr, \"Fail to set flags\\n\");\n        return 1;\n    }\n\n    // bind &amp; listen\n    struct sockaddr_in serverAddr;\n    memset(&amp;serverAddr, 0, sizeof(serverAddr));\n    serverAddr.sin_family = AF_INET;\n    serverAddr.sin_addr.s_addr = htonl(INADDR_ANY);\n    serverAddr.sin_port = htons(80);\n    int bindResult = bind(serverFd, (struct sockaddr *) &amp;serverAddr, sizeof(serverAddr));\n    if (bindResult &lt; 0) {\n        fprintf(stderr, \"Fail to bind\\n\");\n        return 1;\n    }\n    int listenResult = listen(serverFd, 1024);\n    if (listenResult &lt; 0) {\n        fprintf(stderr, \"Fail to listen\\n\");\n        return 1;\n    }\n\n    // epoll fd\n    int epollFd = epoll_create(1);\n    if (epollFd &lt; 0) {\n        fprintf(stderr, \"Fail to create epoll file descriptor\\n\");\n        return 1;\n    }\n    // event\n    struct epoll_event event, events[1024];\n    event.events = EPOLLIN;\n    event.data.fd = serverFd;\n    // ctl\n    int ctlResult = epoll_ctl(epollFd, EPOLL_CTL_ADD, serverFd, &amp;event);\n    if (ctlResult &lt; 0) {\n        fprintf(stderr, \"Fail to run epoll_ctl\\n\");\n        return 1;\n    }\n    // wait\n    while (1) {\n        int event_count = epoll_wait(epollFd, events, 1024, -1);\n\n        for (int i = 0; i &lt; event_count; i++) {\n            struct epoll_event event = events[i];\n            // accept\n            if (event.data.fd == serverFd) {\n                unsigned int clientlen = sizeof(clientAddr);\n                int acceptFd = accept(serverFd, (struct sockaddr *) &amp;clientAddr, &amp;clientlen);\n                if (acceptFd &lt; 0) {\n                    fprintf(stderr, \"Fail to create client connection file descriptor\\n\");\n                    fprintf(stderr, \"Fail Reason: %d\\n\", errno);\n                    return 1;\n                }\n\n                // nonblock\n                int flags = fcntl(acceptFd, F_GETFL, 0);\n                if (flags &lt; 0) {\n                    fprintf(stderr, \"Fail to get flags\\n\");\n                    return 1;\n                }\n                int setFlagResult = fcntl(acceptFd, F_SETFL, flags | O_NONBLOCK);\n                if (setFlagResult &lt; 0) {\n                    fprintf(stderr, \"Fail to set flags\\n\");\n                    return 1;\n                }\n\n                struct epoll_event event;\n                event.events = EPOLLIN;\n                event.data.fd = serverFd;\n                int ctlClientResult = epoll_ctl(epollFd, EPOLL_CTL_ADD, acceptFd, &amp;event);\n                if (ctlClientResult &lt; 0) {\n                    fprintf(stderr, \"Fail to run epoll_ctl\\n\");\n                    return 1;\n                }\n                // client recv\n            } else if (event.events &amp; EPOLLIN) {\n                int fd = event.data.fd;\n                char buffer[1024+1];\n                ssize_t received = recv(fd, &amp;buffer, 1024, 0);\n                if (received &lt; 0) {\n                    fprintf(stderr, \"Fail to received bytess from client\\n\");\n                    if (errno == EINTR) {\n                        fprintf(stderr, \"Reason: EINTR\\n\");\n                    } else if (errno == EAGAIN || errno == EWOULDBLOCK) {\n                        fprintf(stderr, \"Reason: EAGAIN or EWOULDBLOCK\\n\");\n                    } else {\n                        fprintf(stderr, \"Reason: %d\\n\", errno);\n                        close(fd);\n                        int ctlClientResult = epoll_ctl(epollFd, EPOLL_CTL_DEL, fd, &amp;event);\n                        if (ctlClientResult &lt; 0) {\n                            fprintf(stderr, \"Fail to run epoll_ctl\\n\");\n                            return 1;\n                        }\n                        return 1;\n                    }\n                } else if (received == 0) {\n                    int ctlClientResult = epoll_ctl(epollFd, EPOLL_CTL_DEL, fd, &amp;event);\n                    if (ctlClientResult &lt; 0) {\n                        fprintf(stderr, \"Fail to run epoll_ctl\\n\");\n                        return 1;\n                    }\n                    close(fd);\n                } else {\n                    buffer[received] = '\\0';\n                    fprintf(stdout, \"%s\", buffer);\n                    // if you want to send something...\n                    event.events |= EPOLLOUT;\n                    // here is some data that event can hold\n                    event.data.u32 = (uint32_t) 1;\n                    // you can now send data or just put event in epoll, which is maybe easier\n                    int ctlClientResult = epoll_ctl(epollFd, EPOLL_CTL_MOD, fd, &amp;event);\n                    if (ctlClientResult &lt; 0) {\n                        fprintf(stderr, \"Fail to run epoll_ctl\\n\");\n                        return 1;\n                    }\n                }\n                // client send\n            }  else if (event.events &amp; EPOLLOUT) {\n                int fd = event.data.fd;\n                char buffer[] = \"I see you\";\n                ssize_t sendResult = send(fd, &amp;buffer, 1024, 0);\n                if (sendResult &lt; 0) {\n                    fprintf(stderr, \"Fail to received bytess from client\\n\");\n                    if (errno == EINTR) {\n                        fprintf(stderr, \"Reason: EINTR\\n\");\n                    } else if (errno == EAGAIN || errno == EWOULDBLOCK) {\n                        fprintf(stderr, \"Reason: EAGAIN or EWOULDBLOCK\\n\");\n                    } else {\n                        if (errno == EPIPE) {\n                            fprintf(stderr, \"Reason: EPIPE\\n\");\n                        } else {\n                            fprintf(stderr, \"Reason: %d\\n\", errno);\n                        }\n                        close(fd);\n                        int ctlClientResult = epoll_ctl(epollFd, EPOLL_CTL_DEL, fd, &amp;event);\n                        if (ctlClientResult &lt; 0) {\n                            fprintf(stderr, \"Fail to run epoll_ctl\\n\");\n                            return 1;\n                        }\n                        return 1;\n                    }\n                } else if (sendResult == 0) {\n                    event.events = EPOLLIN;\n                    int ctlClientResult = epoll_ctl(epollFd, EPOLL_CTL_MOD, fd, &amp;event);\n                    if (ctlClientResult &lt; 0) {\n                        fprintf(stderr, \"Fail to run epoll_ctl\\n\");\n                        return 1;\n                    }\n                } else {\n\n                    // if you want to recv something...\n//                    event.events |= EPOLLIN;\n//                    // you can now send data or just put event in epoll, which is maybe easier\n//                    int ctlClientResult = epoll_ctl(epollFd, EPOLL_CTL_MOD, fd, &amp;event);\n//                    if (ctlClientResult &lt; 0) {\n//                        fprintf(stderr, \"Fail to run epoll_ctl\\n\");\n//                        return 1;\n//                    }\n                }\n            }\n\n\n        }\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>When I try to make a TCP socket connection (such as <code>curl -v \"http://host:80/\"</code>, which can make <code>test2.cpp</code> run in <em>line 81</em>), <code>acceptFd</code> is <code>&lt; 0</code> and <code>errno</code> is <code>11</code> according to <em>line 84</em>, which means \"Resource deadlock avoided\".</p>\n\n<p>Why? There isn't any thread-related code, is it?</p>\n"}, {"tags": ["c++", "winapi"], "comments": [{"owner": {"reputation": 18385, "user_id": 1773434, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9HhFs.png?s=128&g=1", "display_name": "Govind Parmar", "link": "https://stackoverflow.com/users/1773434/govind-parmar"}, "edited": false, "score": 0, "creation_date": 1550678546, "post_id": 54790484, "comment_id": 96359282, "body": "Just keep track of <code>LocationX</code>, <code>LocationY</code> and <code>Offset</code>. That&#39;s all you get, and all you need."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1550678555, "post_id": 54790484, "comment_id": 96359289, "body": "No, you can&#39;t. Basically things you paint yourself result simply in pixels on the screen. Nobody keeps track of them for you. OTOH a button or a textbox are complex objects handled by the operating system for you."}], "answers": [{"tags": [], "owner": {"reputation": 2208, "user_id": 6584878, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eef2518f750afd08b60ab22d5ec9ddb8?s=128&d=identicon&r=PG&f=1", "display_name": "avariant", "link": "https://stackoverflow.com/users/6584878/avariant"}, "is_accepted": true, "score": 3, "last_activity_date": 1550679019, "creation_date": 1550679019, "answer_id": 54790710, "question_id": 54790484, "link": "https://stackoverflow.com/questions/54790484/get-rectangle-that-was-drawn-earlier-with-rectangle-function/54790710#54790710", "title": "Get rectangle that was drawn earlier with Rectangle() function", "body": "<p>The <code>Rectangle</code> method (<a href=\"https://docs.microsoft.com/en-us/windows/desktop/api/wingdi/nf-wingdi-rectangle\" rel=\"nofollow noreferrer\">https://docs.microsoft.com/en-us/windows/desktop/api/wingdi/nf-wingdi-rectangle</a>) draws a rectangle on the screen.  It does not create a struct or class that defines the rectangle; it is literally the command to draw.</p>\n\n<p>If you want to define a rectangle that you can use in other methods, <a href=\"https://docs.microsoft.com/en-us/windows/desktop/api/Winuser/nf-winuser-fillrect\" rel=\"nofollow noreferrer\">FillRect</a>, <a href=\"https://docs.microsoft.com/en-us/windows/desktop/api/Winuser/nf-winuser-framerect\" rel=\"nofollow noreferrer\">FrameRect</a>, etc., then you want the <a href=\"https://docs.microsoft.com/en-us/previous-versions//dd162897(v=vs.85)\" rel=\"nofollow noreferrer\">RECT</a> struct.  This is a structure that you can create and store for later use, modify, and pass into other drawing methods.</p>\n"}], "owner": {"reputation": 50, "user_id": 11091083, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Q6Bvye30AaI/AAAAAAAAAAI/AAAAAAAAAEE/8BnrZGkL9R8/photo.jpg?sz=128", "display_name": "\u0425\u043e\u0440\u0451\u043a \u0421\u043e\u043d\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/11091083/%d0%a5%d0%be%d1%80%d1%91%d0%ba-%d0%a1%d0%be%d0%bd%d0%bd%d1%8b%d0%b9"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "accepted_answer_id": 54790710, "answer_count": 1, "score": 1, "last_activity_date": 1550679019, "creation_date": 1550678371, "question_id": 54790484, "link": "https://stackoverflow.com/questions/54790484/get-rectangle-that-was-drawn-earlier-with-rectangle-function", "title": "Get rectangle that was drawn earlier with Rectangle() function", "body": "<p>So I created a rectangle with Rectangle() function. When you are creating buttons, textboxes, you give them a certain number to access it later. Can I do the same with painted things?</p>\n\n<p>P.S.: I need to create a rectangle and move it to another location</p>\n\n<pre><code>void SpawnRectangle(HDC hdc, int size, int amount)\n{\n    int Offset = size / 2;\n    for (int i = 0; i &lt; amount; ++i)\n    {\n        int LocationX = rand() % 1300 + 50;\n        int LocationY = rand() % 600 + 50;\n        Rectangle(hdc, LocationX - Offset, LocationY - Offset, LocationX + Offset, LocationY + Offset);\n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "memory-leaks", "free", "calloc"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 2, "creation_date": 1550678364, "post_id": 54790461, "comment_id": 96359178, "body": "I&#39;m curious as to why you want to use <code>char**</code> when you&#39;ve shown you are willing and able to use both <code>std::vector</code> and <code>std::string</code>."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1550678384, "post_id": 54790461, "comment_id": 96359191, "body": "Not the problem but why is <code>numberOfKeys</code> a <code>double</code>?"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 2, "creation_date": 1550678418, "post_id": 54790461, "comment_id": 96359204, "body": "Note that if <code>(storage[key]!=nullptr</code> is ever <code>true</code>, you fail to <code>free</code> any previous allocations you&#39;ve performed previously in your function."}, {"owner": {"reputation": 17209, "user_id": 1055118, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/44Trt.jpg?s=128&g=1", "display_name": "doctorlove", "link": "https://stackoverflow.com/users/1055118/doctorlove"}, "edited": false, "score": 0, "creation_date": 1550678477, "post_id": 54790461, "comment_id": 96359248, "body": "Is this the only place you allocate stuff? The vector allocates stuff too - when does that go out of scope?"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 3, "creation_date": 1550678492, "post_id": 54790461, "comment_id": 96359254, "body": "On some platforms, <code>free</code>ing memory doesn&#39;t necessarily mean it&#39;s returned to the OS right away. The application may still hold the rights to those pages of memory to speed up future allocations. So the released memory may still appear as being in use from the OS&#39; point of view."}, {"owner": {"reputation": 17209, "user_id": 1055118, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/44Trt.jpg?s=128&g=1", "display_name": "doctorlove", "link": "https://stackoverflow.com/users/1055118/doctorlove"}, "edited": false, "score": 1, "creation_date": 1550678621, "post_id": 54790461, "comment_id": 96359329, "body": "What does your c-lib-function do with the <code>char **</code>?"}, {"owner": {"reputation": 1, "user_id": 11090916, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PW7Hq.png?s=128&g=1", "display_name": "phil_rudd69", "link": "https://stackoverflow.com/users/11090916/phil-rudd69"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1550679118, "post_id": 54790461, "comment_id": 96359654, "body": "@Fran&#231;oisAndrieux thanks! Did not think of that previous allocations."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 1, "creation_date": 1550679204, "post_id": 54790461, "comment_id": 96359697, "body": "@phil_rudd69 If you stick with container objects, you you won&#39;t have to worry about remembering these types of things. One of several reasons not use manual memory allocations anymore."}, {"owner": {"reputation": 1, "user_id": 11090916, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PW7Hq.png?s=128&g=1", "display_name": "phil_rudd69", "link": "https://stackoverflow.com/users/11090916/phil-rudd69"}, "reply_to_user": {"reputation": 17209, "user_id": 1055118, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/44Trt.jpg?s=128&g=1", "display_name": "doctorlove", "link": "https://stackoverflow.com/users/1055118/doctorlove"}, "edited": false, "score": 0, "creation_date": 1550679239, "post_id": 54790461, "comment_id": 96359715, "body": "@doctorlove it is passed to the c-lib to build a hash function from the hashKeys. see <a href=\"http://cmph.sourceforge.net/\" rel=\"nofollow noreferrer\">cmph.sourceforge.net</a>"}, {"owner": {"reputation": 1, "user_id": 11090916, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PW7Hq.png?s=128&g=1", "display_name": "phil_rudd69", "link": "https://stackoverflow.com/users/11090916/phil-rudd69"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1550679400, "post_id": 54790461, "comment_id": 96359819, "body": "@NathanOliver because the number can get <i>really</i> big in my real scenario."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1550679492, "post_id": 54790461, "comment_id": 96359876, "body": "@phil_rudd69 Then use a <code>std::size_t</code>.  Using a double is the wrong approach and if the number is really big you&#39;ll get the wrong result since it can only exactly represent integers of 53 bits in size.  <code>std::size_t</code> on the other hand is guaranteed to work."}, {"owner": {"reputation": 1, "user_id": 11090916, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PW7Hq.png?s=128&g=1", "display_name": "phil_rudd69", "link": "https://stackoverflow.com/users/11090916/phil-rudd69"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1550679767, "post_id": 54790461, "comment_id": 96360042, "body": "@NathanOliver thanks, if I change it to std::size_t, do I have to change anything else, too?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1550679841, "post_id": 54790461, "comment_id": 96360080, "body": "You should also change <code>key</code> (you loop indexes) to be <code>size_t</code> as well since <code>int</code> can be smaller than a <code>size_t</code>."}, {"owner": {"reputation": 1, "user_id": 11090916, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PW7Hq.png?s=128&g=1", "display_name": "phil_rudd69", "link": "https://stackoverflow.com/users/11090916/phil-rudd69"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1550679852, "post_id": 54790461, "comment_id": 96360091, "body": "@Fran&#231;oisAndrieux I don&#39;t see how I can avoid these manual allocations, since the aforementioned c-lib only takes char** as input. :)"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1550679914, "post_id": 54790461, "comment_id": 96360128, "body": "@phil_rudd69 If the number of elements doesn&#39;t fit in <code>int</code>, then your <code>for</code> loops won&#39;t work anyways."}, {"owner": {"reputation": 1, "user_id": 11090916, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PW7Hq.png?s=128&g=1", "display_name": "phil_rudd69", "link": "https://stackoverflow.com/users/11090916/phil-rudd69"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1550679971, "post_id": 54790461, "comment_id": 96360158, "body": "@NathanOliver obviously :D thanks"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1550680013, "post_id": 54790461, "comment_id": 96360179, "body": "@phil_rudd69 A <code>std::vector&lt;char*&gt;</code>&#39;s <code>data()</code> is a <code>char**</code>. You can then build that vector by assigning the <code>data()</code> of each element in a <code>std::vector&lt;std::string&gt;</code>."}, {"owner": {"reputation": 1, "user_id": 11090916, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PW7Hq.png?s=128&g=1", "display_name": "phil_rudd69", "link": "https://stackoverflow.com/users/11090916/phil-rudd69"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1550680076, "post_id": 54790461, "comment_id": 96360222, "body": "@Fran&#231;oisAndrieux makes sense as well... I&#39;ll have to check my original code. Would be a stupid mistake."}, {"owner": {"reputation": 1, "user_id": 11090916, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PW7Hq.png?s=128&g=1", "display_name": "phil_rudd69", "link": "https://stackoverflow.com/users/11090916/phil-rudd69"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1550680244, "post_id": 54790461, "comment_id": 96360318, "body": "@Fran&#231;oisAndrieux that&#39;s good to know. Did not know that std::vector&lt;char*&gt;&#39;s data was char**. Would have saved me some headaches."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1550680367, "post_id": 54790461, "comment_id": 96360382, "body": "@phil_rudd69 One important property of <code>std::vector</code> is that all elements are guaranteed to be stored in a contiguous array, and a <code>std::vector&lt;T&gt;</code>&#39;s <code>data()</code> member always returns a <code>T*</code> (except for <code>std::vector&lt;bool&gt;</code> for silly reasons). It can be used instead whenever you might use a dynamically allocated array."}], "owner": {"reputation": 1, "user_id": 11090916, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PW7Hq.png?s=128&g=1", "display_name": "phil_rudd69", "link": "https://stackoverflow.com/users/11090916/phil-rudd69"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 73, "favorite_count": 0, "closed_date": 1550678614, "answer_count": 0, "score": 0, "last_activity_date": 1550678304, "creation_date": 1550678304, "question_id": 54790461, "link": "https://stackoverflow.com/questions/54790461/memory-leak-despite-deallocating-char", "closed_reason": "Duplicate", "title": "memory leak despite deallocating char **?", "body": "<p>it seems that my de-allocation does not work as intended.\nI have to copy the content of a std::vector &lt; uint64_t > into a char**, because a used C-library wants it like this. To achieve this, I wrote the following code.</p>\n\n<p><strong>Problem:</strong> Is <code>free(storage[key])</code> not the right choice here, did I forget some additional freeing? Because after that free-command the amount of occupied memory stays the same, according to ubuntu's \"system monitor\". Even after re-entering the main-function, the occupied memory of the program is still about 30MiB, which should be too much.</p>\n\n<p>I already used valgrind on this, which seems to not report any memory leak.</p>\n\n<p>Funny thing: If I repeatedly call <code>problematic_function()</code>, the amount of occupied memory in system monitor stays at 30 MiB and does not double.\nIs this only a \"system monitor\" bug?</p>\n\n<pre><code>bool problematic_function(std::vector&lt;uint64_t&gt;&amp; hashTableKeys){\n\n   // get number of keys\n   double numberOfKeys = hashTableKeys.size();\n\n   // copy keys into char** 'storage', because C-lib wants it like this.\n   char** storage = (char**)calloc( numberOfKeys, sizeof(char*));\n   if (storage!=nullptr){ // if calloc() succeeded\n      for(int key = 0; key &lt; numberOfKeys; key++){\n         std::string keyString = std::to_string(hashTableKeys[key]);\n         storage[key] = (char *)calloc( (keyString.length()+1), sizeof(char));\n         if (storage[key]!=nullptr){ // if calloc() succeeded\n            std::strcpy(storage[key], keyString.c_str());\n         }\n         else{\n            return false;\n         }\n      }\n   }\n   else{\n      return false;\n   }\n\n   // pass the char** to the c-lib-function\n   // ...\n\n   // de-allocate the memory-blocks\n   for(int key=0; key &lt; numberOfKeys; key++){\n      free(storage[key]);\n   }\n   free(storage);\n   hashTableKeys.clear();\n   return true;\n}\n\nint main(int argc, char **argv)\n{\n   /*\n    * checking if memory is freed\n    */\n\n   int numberOfModelKeys = 1000000;\n\n   // construct arbitrary keys\n   std::vector&lt;uint64_t&gt; hashTableKeys;\n   for (int i = 0; i &lt; numberOfModelKeys ; i++){\n      uint64_t hashKey = static_cast&lt;uint64_t&gt;(i);\n      hashTableKeys.push_back(hashKey);\n   }\n\n   problematic_function(hashTableKeys);\n\n   /*\n    * at this point the occupied memory of the program (as shown in ubuntu's system-monitor)\n    * is still about 30 MiB, although it probably should be a lot less.\n    */\n }\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 6, "creation_date": 1550677607, "post_id": 54790165, "comment_id": 96358686, "body": "Can you provide some context for the quote for those of us who don&#39;t own the book?"}, {"owner": {"reputation": 17209, "user_id": 1055118, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/44Trt.jpg?s=128&g=1", "display_name": "doctorlove", "link": "https://stackoverflow.com/users/1055118/doctorlove"}, "edited": false, "score": 0, "creation_date": 1550677766, "post_id": 54790165, "comment_id": 96358804, "body": "Does the book have examples too? (I don&#39;t have my copy to hand - it&#39;s far to heavy to carry round) (Some examples might help us explain better; you don&#39;t always need variable names in function protoypes for example)"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 2, "creation_date": 1550677962, "post_id": 54790165, "comment_id": 96358942, "body": "bjarnes book are not authorative for the language, it wouldnt be the first time that he is sloppy for the sake of explaining stuff. Not saying that it is wrong, but maybe its just due to context that the two statements are not saying identical things"}, {"owner": {"reputation": 85, "user_id": 5353694, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/cdce7956a2d5b1de53a34977fb9e6546?s=128&d=identicon&r=PG&f=1", "display_name": "Ickyickyicky Ptangzoop Boing", "link": "https://stackoverflow.com/users/5353694/ickyickyicky-ptangzoop-boing"}, "edited": false, "score": 0, "creation_date": 1550679566, "post_id": 54790165, "comment_id": 96359925, "body": "I just added snippets from the book showing both statements."}], "answers": [{"comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 1, "creation_date": 1550678912, "post_id": 54790257, "comment_id": 96359500, "body": "Should be nice to have a working crystal ball :)"}], "tags": [], "owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "is_accepted": false, "score": 6, "last_activity_date": 1550677722, "creation_date": 1550677722, "answer_id": 54790257, "question_id": 54790165, "link": "https://stackoverflow.com/questions/54790165/structure-of-declarations-in-c-the-c-prog-lang-4th-edition-by-bjarne-page-1/54790257#54790257", "title": "Structure of declarations in C++ The C++ Prog. Lang 4th edition by Bjarne page 153/154", "body": "<p>I don't have the book at hand, but there two different \"types\" of declarators. There is the usual declarator:</p>\n\n<pre><code>int a;\n//  ^\n</code></pre>\n\n<p>Here, as Bjarne says, the name is not optional. But then there is something called an abstract declarator, which is used for function parameters:</p>\n\n<pre><code>void f(int a, int);\n//               ^ name optional\n</code></pre>\n\n<p>Which is what the first quote is referring to. </p>\n"}, {"tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": false, "score": 1, "last_activity_date": 1550678695, "last_edit_date": 1550678695, "creation_date": 1550678289, "answer_id": 54790454, "question_id": 54790165, "link": "https://stackoverflow.com/questions/54790165/structure-of-declarations-in-c-the-c-prog-lang-4th-edition-by-bjarne-page-1/54790454#54790454", "title": "Structure of declarations in C++ The C++ Prog. Lang 4th edition by Bjarne page 153/154", "body": "<p>I don't have context for your quotes, but Bjarne is likely simplifying in one or both cases.</p>\n\n<p>This is what the standard says of effects of a declaration:</p>\n\n<blockquote>\n  <p>A declaration (Clause 7) <strong>may</strong> introduce one or more names into a translation unit or redeclare names introduced by previous declarations.</p>\n</blockquote>\n\n<p>The first paragraph of the Declarations clause:</p>\n\n<blockquote>\n  <p>Declarations <strong>generally</strong> specify how names are to be interpreted.</p>\n</blockquote>\n\n<p>There are many different types of declarations; too many to list them all here. <em>Most</em> of them declare a name or several. Here is an example of a declaration which does not declare a name:</p>\n\n<pre><code> ;\n</code></pre>\n\n<p>It is called the empty-declaration. Clearly, this declaration has neither optional nor required declarators or specifiers.</p>\n"}], "owner": {"reputation": 85, "user_id": 5353694, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/cdce7956a2d5b1de53a34977fb9e6546?s=128&d=identicon&r=PG&f=1", "display_name": "Ickyickyicky Ptangzoop Boing", "link": "https://stackoverflow.com/users/5353694/ickyickyicky-ptangzoop-boing"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 1, "closed_date": 1550691688, "answer_count": 2, "score": 0, "last_activity_date": 1550679196, "creation_date": 1550677483, "last_edit_date": 1550679196, "question_id": 54790165, "link": "https://stackoverflow.com/questions/54790165/structure-of-declarations-in-c-the-c-prog-lang-4th-edition-by-bjarne-page-1", "closed_reason": "Needs details or clarity", "title": "Structure of declarations in C++ The C++ Prog. Lang 4th edition by Bjarne page 153/154", "body": "<p>I am studying The C++ Prog. Lang 4th edition by Bjarne. In chapter 6, section 6.3.1 page 153 and 154, i found a couple of statements contradicting each other.</p>\n\n<p>On page 153 under section 6.3.1 in says <strong>A declarator optionally including a name</strong></p>\n\n<p>But then on page 154 it says.</p>\n\n<p><strong>A declarator is composed of a name and optionally some declarator operators</strong></p>\n\n<p>can anyone please clarify what does it mean ? does it mean both name and declarator operators are optional ? below are the snippets from page 153 and 154.</p>\n\n<p><a href=\"https://i.stack.imgur.com/S0MsP.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/S0MsP.png\" alt=\"enter image description here\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/A3GTY.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/A3GTY.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["python", "c++", "input", "printf", "output"], "comments": [{"owner": {"reputation": 259, "user_id": 9363595, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/784279de6d712aece09b9c841210717d?s=128&d=identicon&r=PG&f=1", "display_name": "Ofri", "link": "https://stackoverflow.com/users/9363595/ofri"}, "reply_to_user": {"reputation": 13016, "user_id": 8751754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7k6Li.png?s=128&g=1", "display_name": "Ron", "link": "https://stackoverflow.com/users/8751754/ron"}, "edited": false, "score": 0, "creation_date": 1550677309, "post_id": 54790054, "comment_id": 96358489, "body": "I will edit my question"}], "answers": [{"comments": [{"owner": {"reputation": 259, "user_id": 9363595, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/784279de6d712aece09b9c841210717d?s=128&d=identicon&r=PG&f=1", "display_name": "Ofri", "link": "https://stackoverflow.com/users/9363595/ofri"}, "edited": false, "score": 0, "creation_date": 1550683940, "post_id": 54791256, "comment_id": 96362448, "body": "I will test it :)"}, {"owner": {"reputation": 259, "user_id": 9363595, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/784279de6d712aece09b9c841210717d?s=128&d=identicon&r=PG&f=1", "display_name": "Ofri", "link": "https://stackoverflow.com/users/9363595/ofri"}, "edited": false, "score": 0, "creation_date": 1550684550, "post_id": 54791256, "comment_id": 96362709, "body": "So if my exe is constantly printing a string, example:  quat 1.1    2.5      1.4     6.5  over and over again, the code you wrote will run for every entry ? or can I run it a single time for one entry ?"}, {"owner": {"reputation": 259, "user_id": 9363595, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/784279de6d712aece09b9c841210717d?s=128&d=identicon&r=PG&f=1", "display_name": "Ofri", "link": "https://stackoverflow.com/users/9363595/ofri"}, "edited": false, "score": 0, "creation_date": 1550684799, "post_id": 54791256, "comment_id": 96362824, "body": "Also, I now get an exception &quot;file object is not callable&quot;"}], "tags": [], "owner": {"reputation": 1173, "user_id": 10805404, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68c8a89f2c1ea92ac8bb7a02028c6339?s=128&d=identicon&r=PG&f=1", "display_name": "Simon Doppler", "link": "https://stackoverflow.com/users/10805404/simon-doppler"}, "is_accepted": false, "score": 2, "last_activity_date": 1550680631, "creation_date": 1550680631, "answer_id": 54791256, "question_id": 54790054, "link": "https://stackoverflow.com/questions/54790054/making-cpp-exe-prints-into-python-script-input/54791256#54791256", "title": "Making CPP exe prints into Python script input", "body": "<p>I would suggest using the <a href=\"https://docs.python.org/3.7/library/subprocess.html\" rel=\"nofollow noreferrer\"><code>subprocess</code> module</a>.</p>\n\n<p>You will then be able to do something like (this code is from their documentation, which requires Python 3.7)</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>subprocess.run([\"ls\", \"-l\", \"/dev/null\"], capture_output=True)\n</code></pre>\n\n<p>which returns</p>\n\n<pre><code>CompletedProcess(args=['ls', '-l', '/dev/null'], returncode=0,\nstdout=b'crw-rw-rw- 1 root root 1, 3 Jan 23 16:23 /dev/null\\n', stderr=b'')\n</code></pre>\n\n<p>For earlier versions, you would use <code>subprocess.Popen</code> like this</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>your_process = Popen(['ls', '-l', '/dev/null'], stdout=subprocess.PIPE)\nyour_process.wait()\n\nyour_process_output = your_process.stdout().decode() # Here you will have a string\n</code></pre>\n\n<p>This snippet could very easily be wrapped into a single function.</p>\n"}], "owner": {"reputation": 259, "user_id": 9363595, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/784279de6d712aece09b9c841210717d?s=128&d=identicon&r=PG&f=1", "display_name": "Ofri", "link": "https://stackoverflow.com/users/9363595/ofri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1553937025, "creation_date": 1550677196, "last_edit_date": 1553937025, "question_id": 54790054, "link": "https://stackoverflow.com/questions/54790054/making-cpp-exe-prints-into-python-script-input", "title": "Making CPP exe prints into Python script input", "body": "<p>I have a Python script I want to get information from a CPP .exe I have.</p>\n\n<p>The .exe prints a string to console using <code>printf</code>. </p>\n\n<p>I want to be able to get this string into my Python code.</p>\n\n<p>I want to be able, in my Python code, to do something like this :</p>\n\n<pre><code>gyro_data = GetFromCommandLine(cpp.exe.run())\n</code></pre>\n\n<p>Also - my cpp.exe has a loop that runs forever and keeps feeding console with strings. Can this be done? Or do I have to break my cpp exe to return something instead of printing to screen all the time ?</p>\n"}, {"tags": ["c++", "makefile", "subdirectory"], "comments": [{"owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "edited": false, "score": 0, "creation_date": 1550757905, "post_id": 54790033, "comment_id": 96394316, "body": "A working solution: <a href=\"https://stackoverflow.com/a/7321954/412080\">stackoverflow.com/a/7321954/412080</a>"}], "answers": [{"comments": [{"owner": {"reputation": 69991, "user_id": 939557, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/3VPea.png?s=128&g=1", "display_name": "MadScientist", "link": "https://stackoverflow.com/users/939557/madscientist"}, "edited": false, "score": 0, "creation_date": 1550684226, "post_id": 54790486, "comment_id": 96362571, "body": "You also need to add a <code>mkdir -p $(@D)</code> to your compile recipes before invoking the compiler.  Compilers won&#39;t create directories for you, you have to be sure they exist before you ask the compiler to create files in them."}, {"owner": {"reputation": 79, "user_id": 9072458, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/497f84a55a0c68cc8106f9bc7a0b2d79?s=128&d=identicon&r=PG&f=1", "display_name": "phibel", "link": "https://stackoverflow.com/users/9072458/phibel"}, "edited": false, "score": 0, "creation_date": 1550744018, "post_id": 54790486, "comment_id": 96385467, "body": "@AProgrammer Thank you - Unfortunately it still get an error. make: *** No rule to make target \u201eobj/Application/Application.o\u201c, needed by \u201eMyBinary\u201c.  Stop"}, {"owner": {"reputation": 48092, "user_id": 136208, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/8a30f566f1b7c9ae44cf245138850ba4?s=128&d=identicon&r=PG", "display_name": "AProgrammer", "link": "https://stackoverflow.com/users/136208/aprogrammer"}, "edited": false, "score": 0, "creation_date": 1550744198, "post_id": 54790486, "comment_id": 96385596, "body": "<code>$(OBJ_DIR)&#47;%.o: %.cpp $(DEPS)</code> should probably be <code>$(OBJ_DIR)&#47;%.o: $(SRC_ROOT)&#47;%.cpp $(DEPS)</code>."}, {"owner": {"reputation": 79, "user_id": 9072458, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/497f84a55a0c68cc8106f9bc7a0b2d79?s=128&d=identicon&r=PG&f=1", "display_name": "phibel", "link": "https://stackoverflow.com/users/9072458/phibel"}, "edited": false, "score": 0, "creation_date": 1550746287, "post_id": 54790486, "comment_id": 96386855, "body": "@AProgrammer - Still the same error message. Maybe for this line it somehow has to be taken in account that some files (main.cpp) are directly in src/ while others (Application.cpp, ...) are in subdirectories of src/  ?"}, {"owner": {"reputation": 79, "user_id": 9072458, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/497f84a55a0c68cc8106f9bc7a0b2d79?s=128&d=identicon&r=PG&f=1", "display_name": "phibel", "link": "https://stackoverflow.com/users/9072458/phibel"}, "edited": false, "score": 0, "creation_date": 1550762996, "post_id": 54790486, "comment_id": 96398081, "body": "Thank you, @AProgrammer for your extended example. It is very descriptive and it works when replacing the touch&#39;es with compiler calls."}, {"owner": {"reputation": 79, "user_id": 9072458, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/497f84a55a0c68cc8106f9bc7a0b2d79?s=128&d=identicon&r=PG&f=1", "display_name": "phibel", "link": "https://stackoverflow.com/users/9072458/phibel"}, "reply_to_user": {"reputation": 69991, "user_id": 939557, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/3VPea.png?s=128&g=1", "display_name": "MadScientist", "link": "https://stackoverflow.com/users/939557/madscientist"}, "edited": false, "score": 0, "creation_date": 1550763242, "post_id": 54790486, "comment_id": 96398240, "body": "@MadScientist - thanks for this hint, I&#39;ll take this into account."}], "tags": [], "owner": {"reputation": 48092, "user_id": 136208, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/8a30f566f1b7c9ae44cf245138850ba4?s=128&d=identicon&r=PG", "display_name": "AProgrammer", "link": "https://stackoverflow.com/users/136208/aprogrammer"}, "is_accepted": true, "score": 1, "last_activity_date": 1550753962, "last_edit_date": 1550753962, "creation_date": 1550678374, "answer_id": 54790486, "question_id": 54790033, "link": "https://stackoverflow.com/questions/54790033/single-makefile-for-sources-in-multiple-sub-directories/54790486#54790486", "title": "Single Makefile for sources in multiple sub directories", "body": "<p><code>OBJ=$(patsubst %,$(OBJ_DIR)/%,$(_OBJ))</code> prepends <code>obj/</code> to the words of <code>_OBJ</code>.  You want to replace the <code>src</code> by <code>obj</code> something which you can do with</p>\n\n<pre><code>OBJ=$(patsubst $(SRC_ROOT)/%,$(OBJ_DIR)/%,$(_OBJ))\n</code></pre>\n\n<p>Note that the directory structure you get expect subdirectories <code>Application</code> and <code>Tasks</code> to <code>obj</code> you either have to create them manually before calling <code>make</code> or updating the Makefile to create them.</p>\n\n<p>Here is something which behaves as I expect when the directory structure is pre-created.</p>\n\n<pre><code>APPNAME=MyBinary\nSRC_ROOT=src\nOBJ_DIR=obj\n\nDEPS=$(SRC_ROOT)/Application/Application.h \\\n     $(SRC_ROOT)/Tasks/BackgroundWorker.h\n\n_OBJ=$(SRC_ROOT)/Application/Application.o \\\n    $(SRC_ROOT)/Tasks/BackgroundWorker.o\\\n    $(SRC_ROOT)/main.o\n\nOBJ=$(patsubst $(SRC_ROOT)/%,$(OBJ_DIR)/%,$(_OBJ))\n\n$(OBJ_DIR)/%.o: $(SRC_ROOT)/%.cpp $(DEPS)\n    echo Making $@ from $&lt;\n    touch $@ \n\n$(APPNAME): $(OBJ)\n    echo Making $@ from $^\n    touch $@\n</code></pre>\n\n<p>Note that in practice you have to be finer with the dependencies and probably have them to be generated by the compiler (see <code>-MM</code> and similar options for g++), here you recompile everything when you change an header.</p>\n"}], "owner": {"reputation": 79, "user_id": 9072458, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/497f84a55a0c68cc8106f9bc7a0b2d79?s=128&d=identicon&r=PG&f=1", "display_name": "phibel", "link": "https://stackoverflow.com/users/9072458/phibel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 154, "favorite_count": 0, "accepted_answer_id": 54790486, "answer_count": 1, "score": 1, "last_activity_date": 1550753962, "creation_date": 1550677140, "question_id": 54790033, "link": "https://stackoverflow.com/questions/54790033/single-makefile-for-sources-in-multiple-sub-directories", "title": "Single Makefile for sources in multiple sub directories", "body": "<p>In my C++ project the sources are organized inside a src directory. Inside the src directory are sub directories which all contain headers and source files, e.g.</p>\n\n<pre><code>project\n\u251c\u2500\u2500 Makefile\n\u2502\n\u251c\u2500\u2500 MyBinary\n\u2502\n\u251c\u2500\u2500 src\n\u2502    \u2502\n\u2502    \u251c\u2500\u2500 main.cpp\n\u2502    \u2502\n\u2502    \u251c\u2500\u2500 Application\n\u2502    \u2502      \u2502\n\u2502    \u2502      \u251c\u2500\u2500 Application.h\n\u2502    \u2502      \u2514\u2500\u2500 Application.cpp\n\u2502    \u2502      \n\u2502    \u2502\n\u2502    \u2514\u2500\u2500 Tasks\n\u2502           \u251c\u2500\u2500 BackgroundWorker.h\n\u2502           \u2514\u2500\u2500 BackgroundWorker.cpp\n\u2502\n\u2514\u2500\u2500 obj\n     \u251c\u2500\u2500 Application.o\n     \u2514\u2500\u2500 BackgroungWorker.o\n</code></pre>\n\n<p>I'm trying to create a Makefile so that all object files are created inside <em>obj</em> directory and the executable <em>MyBinary</em> is created above the <em>src</em> directory at the same level as the Makefile is.</p>\n\n<p>It hasn't to be too complicated or automated. I don't mind manually specifying each .cpp and .h file in the Makefile.</p>\n\n<p>But I'm new to Makefiles and unfortunately I'm struggling with this attempt:</p>\n\n<pre><code>CXX=c++\nCXXFLAGS=-Wall -Os -g0\n\n# Name of the output binary\nAPPNAME=MyBinary\n\n# Source root directory\nSRC_ROOT=src\n\n# Object file directory\nOBJ_DIR=obj\n\nDEPS=$(SRC_ROOT)/Application/Application.h \\\n     $(SRC_ROOT)/Tasks/BackgroundWorker.h\n\n_OBJ=$(SRC_ROOT)/Application/Application.o \\\n    $(SRC_ROOT)/Tasks/BackgroundWorker.o\\\n    $(SRC_ROOT)/main.o\n\nOBJ=$(patsubst %,$(OBJ_DIR)/%,$(_OBJ))\n\n# This rule says that the .o file depends upon the .c version of the \n# file and the .h files included in the DEPS macro.\n$(OBJ_DIR)/%.o: %.cpp $(DEPS)\n  $(CXX) -c -o $@ $&lt; $(CXXFLAGS)\n\n# Build the application.\n# NOTE: The $@ represents the left side of the colon, here $(APPNAME)\n#       The $^ represents the right side of the colon, here $(OBJ)\n$(APPNAME): $(OBJ)\n  $(CXX) -o $@ $^ $(CXXFLAGS)\n\nclean:\n  rm -f $(OBJ_DIR)/*.o $(APPNAME)\n</code></pre>\n\n<p>The error when calling make is: <strong>Fatal error: can't create obj/src/Application.o: File or directory not found.</strong></p>\n\n<p>Can anyone help?</p>\n"}, {"tags": ["c++", "console", "windows-console", "ansi-escape"], "comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1550677359, "post_id": 54789976, "comment_id": 96358525, "body": "Just put those escape sequences to the buffer. What exactly is your problem?"}, {"owner": {"reputation": 21, "user_id": 11090974, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-UAfztdrNHM4/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQN93OngRYrrA9dUETTWFgug43ziXw/mo/photo.jpg?sz=128", "display_name": "Vova Kosachev", "link": "https://stackoverflow.com/users/11090974/vova-kosachev"}, "edited": false, "score": 0, "creation_date": 1550677478, "post_id": 54789976, "comment_id": 96358597, "body": "How can i do that ?"}, {"owner": {"reputation": 21, "user_id": 11090974, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-UAfztdrNHM4/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQN93OngRYrrA9dUETTWFgug43ziXw/mo/photo.jpg?sz=128", "display_name": "Vova Kosachev", "link": "https://stackoverflow.com/users/11090974/vova-kosachev"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1550678414, "post_id": 54789976, "comment_id": 96359200, "body": "I cant put escape sequences to my buffer because it contains information only about   character and argument(FOREGROUND_BLUE, BACKGROUND_GREEN etc)."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1550678506, "post_id": 54789976, "comment_id": 96359262, "body": "Not sure what you mean. What prevents you from putting the escape sequence itself?"}, {"owner": {"reputation": 21, "user_id": 11090974, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-UAfztdrNHM4/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQN93OngRYrrA9dUETTWFgug43ziXw/mo/photo.jpg?sz=128", "display_name": "Vova Kosachev", "link": "https://stackoverflow.com/users/11090974/vova-kosachev"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1550678554, "post_id": 54789976, "comment_id": 96359288, "body": "ciScreenBuffer[50].Char.AsciiChar = &quot;\\x1b[38;2;25;71;150mHello&quot;; Its not working"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1550678715, "post_id": 54789976, "comment_id": 96359385, "body": "Just use WriteConsole instead of WriteConsoleOutput."}, {"owner": {"reputation": 21, "user_id": 11090974, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-UAfztdrNHM4/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQN93OngRYrrA9dUETTWFgug43ziXw/mo/photo.jpg?sz=128", "display_name": "Vova Kosachev", "link": "https://stackoverflow.com/users/11090974/vova-kosachev"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1550679164, "post_id": 54789976, "comment_id": 96359678, "body": "It will down my perfomance a lot. Because i&#39;ll use that for drawing moveable sprites"}], "answers": [{"tags": [], "owner": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "is_accepted": false, "score": 0, "last_activity_date": 1550683898, "creation_date": 1550683898, "answer_id": 54792192, "question_id": 54789976, "link": "https://stackoverflow.com/questions/54789976/c-how-can-i-use-ansi-escape-codes-with-writeconsoleoutput/54792192#54792192", "title": "c++ How can i use ANSI escape codes with WriteConsoleOutput?", "body": "<p><a href=\"https://docs.microsoft.com/en-us/windows/console/writeconsoleoutput\" rel=\"nofollow noreferrer\"><code>WriteConsoleOutput</code></a> does not use nor parse ANSI sequences.  You provide the color information as part of the <a href=\"https://docs.microsoft.com/en-us/windows/console/char-info-str\" rel=\"nofollow noreferrer\"><code>CHAR_INFO</code></a> data you pass in.</p>\n\n<p>To add color to your output, update the color member of the <code>ciScreenBuffer</code> array when you add the characters you want to display.  For example, based on an example in one of your comments,</p>\n\n<pre><code>ciScreenBuffer[50].Attributes = FOREGROUND_BLUE;\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 11090974, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-UAfztdrNHM4/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQN93OngRYrrA9dUETTWFgug43ziXw/mo/photo.jpg?sz=128", "display_name": "Vova Kosachev", "link": "https://stackoverflow.com/users/11090974/vova-kosachev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 166, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1550683898, "creation_date": 1550676981, "question_id": 54789976, "link": "https://stackoverflow.com/questions/54789976/c-how-can-i-use-ansi-escape-codes-with-writeconsoleoutput", "title": "c++ How can i use ANSI escape codes with WriteConsoleOutput?", "body": "<p>My buffer: </p>\n\n<pre><code>CHAR_INFO *ciScreenBuffer = new CHAR_INFO[bufferWidth * bufferHeight];\n</code></pre>\n\n<p>How can i use ANSI codes like this to colorize my output char ?</p>\n\n<pre><code>\"\\x1b[38;2;R;G;Bm\"\"\n</code></pre>\n\n<p>P.S i use that</p>\n\n<pre><code>WriteConsoleOutputA(hConsoleOutput, ciScreenBuffer, { (SHORT)bufferWidth, (SHORT)bufferHeight }, { 0, 0 }, &amp;writeRegion);\n</code></pre>\n"}, {"tags": ["c++", "wxwidgets"], "comments": [{"owner": {"reputation": 17871, "user_id": 1171191, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9e7708869e2b3234fbf0e34c9506742?s=128&d=identicon&r=PG", "display_name": "BoBTFish", "link": "https://stackoverflow.com/users/1171191/bobtfish"}, "edited": false, "score": 0, "creation_date": 1550675949, "post_id": 54789612, "comment_id": 96357631, "body": "Maybe you want a <a href=\"https://docs.wxwidgets.org/3.1/classwx_search_ctrl.html\" rel=\"nofollow noreferrer\"><code>wxSearchCtrl</code></a>?"}, {"owner": {"reputation": 37, "user_id": 10858431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6teT.jpg?s=128&g=1", "display_name": "Austin", "link": "https://stackoverflow.com/users/10858431/austin"}, "reply_to_user": {"reputation": 17871, "user_id": 1171191, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9e7708869e2b3234fbf0e34c9506742?s=128&d=identicon&r=PG", "display_name": "BoBTFish", "link": "https://stackoverflow.com/users/1171191/bobtfish"}, "edited": false, "score": 0, "creation_date": 1550676068, "post_id": 54789612, "comment_id": 96357717, "body": "yes but i don&#39;t know how to integrate it with wxtextctrl."}, {"owner": {"reputation": 17871, "user_id": 1171191, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9e7708869e2b3234fbf0e34c9506742?s=128&d=identicon&r=PG", "display_name": "BoBTFish", "link": "https://stackoverflow.com/users/1171191/bobtfish"}, "edited": false, "score": 0, "creation_date": 1550676424, "post_id": 54789612, "comment_id": 96357953, "body": "I see what you mean. You will have to manually locate the search term within the text, then use <a href=\"https://docs.wxwidgets.org/3.1/classwx_text_ctrl.html#a0d972d3007e23ed9270d16b6bb326e80\" rel=\"nofollow noreferrer\"><code>SetStyle</code></a>. The component doesn&#39;t directly provide the highlighting behaviour you want. Not trying to be a LMGTFY-hole, but I found <a href=\"https://forums.wxwidgets.org/viewtopic.php?t=2821\" rel=\"nofollow noreferrer\">this on the wxWidgets forum</a>."}], "answers": [{"comments": [{"owner": {"reputation": 2208, "user_id": 6584878, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eef2518f750afd08b60ab22d5ec9ddb8?s=128&d=identicon&r=PG&f=1", "display_name": "avariant", "link": "https://stackoverflow.com/users/6584878/avariant"}, "edited": false, "score": 0, "creation_date": 1550687521, "post_id": 54793027, "comment_id": 96364147, "body": "Note that using the wxStyledTextCtrl does require linking the wxScintilla library as that&#39;s what it is built on."}], "tags": [], "owner": {"reputation": 2208, "user_id": 6584878, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eef2518f750afd08b60ab22d5ec9ddb8?s=128&d=identicon&r=PG&f=1", "display_name": "avariant", "link": "https://stackoverflow.com/users/6584878/avariant"}, "is_accepted": true, "score": 1, "last_activity_date": 1550687374, "creation_date": 1550687374, "answer_id": 54793027, "question_id": 54789612, "link": "https://stackoverflow.com/questions/54789612/how-to-add-search-feature-to-textctrl-in-wxwidget-c/54793027#54793027", "title": "how to add search feature to textctrl in wxwidget c++", "body": "<p>I have implemented a search and highlight mechanism with wxWidgets, but it uses <a href=\"https://docs.wxwidgets.org/3.0/classwx_styled_text_ctrl.html\" rel=\"nofollow noreferrer\">wxStyledTextCtrl</a>, not <code>wxTextCtrl</code> (so I know it's not an exact answer for what you are looking for).</p>\n\n<p>If you were in a position to change your <code>wxTextCtrl</code> to a <code>wxStyledTextCtrl</code>, you can do a Next and Previous function like this:</p>\n\n<p>Next:</p>\n\n<pre><code>//Sets the current caret position as the start of the search\neditor-&gt;SearchAnchor();\n//flags can be things like wxSTC_FIND_MATCHCASE for case sensitive searching\nint findpos = editor-&gt;SearchNext(flags, find_string);\nif (findpos &gt; 0)\n{\n    //search does not implicitly ensure your found location is visible\n    editor-&gt;EnsureCaretVisible();\n    //TODO: any other UI response to a valid find\n}\nelse\n{\n    //TODO: any other UI response to no valid find\n}\n</code></pre>\n\n<p>Previous is exactly the same except your replace <code>SearchNext</code> with <code>SearchPrev</code></p>\n\n<pre><code>int findpos = editor-&gt;SearchPrev(flags, find_string);\n</code></pre>\n\n<p>Obviously, the alternative if you need to use wxTextCtrl is to manually search the string and set the selection directly using wxTextCtrl::SetSelection.  This post on the wxForum might help with that: <a href=\"https://forums.wxwidgets.org/viewtopic.php?t=15917\" rel=\"nofollow noreferrer\">https://forums.wxwidgets.org/viewtopic.php?t=15917</a></p>\n"}], "owner": {"reputation": 37, "user_id": 10858431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6teT.jpg?s=128&g=1", "display_name": "Austin", "link": "https://stackoverflow.com/users/10858431/austin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 208, "favorite_count": 0, "accepted_answer_id": 54793027, "answer_count": 1, "score": 0, "last_activity_date": 1550687374, "creation_date": 1550675776, "question_id": 54789612, "link": "https://stackoverflow.com/questions/54789612/how-to-add-search-feature-to-textctrl-in-wxwidget-c", "title": "how to add search feature to textctrl in wxwidget c++", "body": "<p>how to add search feature to wxtextctrl in wxwidget c++?</p>\n\n<p>what I want is to add a search bar that can search words in wxtextctrl. if a word has been found using a search bar, the word searched will be highlighted.  </p>\n"}, {"tags": ["c++", "serialization", "deserialization", "flatbuffers"], "comments": [{"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1550675870, "post_id": 54789533, "comment_id": 96357572, "body": "Are you talking about a C++ struct, or are you talking about a database? And if so, what kind of database?"}, {"owner": {"reputation": 2811, "user_id": 27213, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/4336d7795e568b21e83b024fb3b16c00?s=128&d=identicon&r=PG", "display_name": "Rakesh Agarwal", "link": "https://stackoverflow.com/users/27213/rakesh-agarwal"}, "reply_to_user": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1550677207, "post_id": 54789533, "comment_id": 96358419, "body": "I&#39;m talking about the table in a schema file that is needed for flatbuffers. So, a schema file with the above table and that as the root table. let say I run flatc.exe to generate a C++ header file. Now, in the application, I need to serialize this cluster table."}], "answers": [{"tags": [], "owner": {"reputation": 4578, "user_id": 17419, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JU9iE.jpg?s=128&g=1", "display_name": "Aardappel", "link": "https://stackoverflow.com/users/17419/aardappel"}, "is_accepted": false, "score": 0, "last_activity_date": 1550678282, "creation_date": 1550678282, "answer_id": 54790451, "question_id": 54789533, "link": "https://stackoverflow.com/questions/54789533/flatbuffer-how-do-i-dynamically-add-fields-to-a-table/54790451#54790451", "title": "FlatBuffer: How do I dynamically add fields to a table?", "body": "<p>You can't. FlatBuffers is a statically typed system, and all possible fields have to be known in advance, with C++ code generated for their construction and access. While you can dynamically decide which fields to add to a table (by calling <code>add_field_name()</code> based on some condition), it has to be one of the fields in the schema.</p>\n\n<p>If that is not dynamic enough for you, I'd recommend FlexBuffers (<a href=\"https://google.github.io/flatbuffers/flexbuffers.html\" rel=\"nofollow noreferrer\">https://google.github.io/flatbuffers/flexbuffers.html</a>) which gives you the efficiency of FlatBuffers with the dynamic nature of JSON. Here you can start a vector or a map, and add any values or fields to them at runtime, with no limitations.</p>\n"}], "owner": {"reputation": 2811, "user_id": 27213, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/4336d7795e568b21e83b024fb3b16c00?s=128&d=identicon&r=PG", "display_name": "Rakesh Agarwal", "link": "https://stackoverflow.com/users/27213/rakesh-agarwal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 694, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1550678282, "creation_date": 1550675554, "last_edit_date": 1550676851, "question_id": 54789533, "link": "https://stackoverflow.com/questions/54789533/flatbuffer-how-do-i-dynamically-add-fields-to-a-table", "title": "FlatBuffer: How do I dynamically add fields to a table?", "body": "<p>I have a table in my schema that is empty (as shown below).</p>\n\n<pre><code>table ClusterValue \n{\n}\n</code></pre>\n\n<p>Since I do not know the number of member elements in the cluster in advance, I'd like to programatically add fields (C++). I came across some methods like AddOffset, AddElement, AddStruct. But I am not still sure of the exact way to add that.</p>\n\n<p>To elaborate, let say if the input to my program is a cluster with two members - a string and a numeric. I'd like to programatically add two fields (string and numeric) to the cluster table and serialize it. </p>\n"}, {"tags": ["c++", "windows", "multithreading", "dll"], "comments": [{"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 0, "creation_date": 1550675855, "post_id": 54789197, "comment_id": 96357561, "body": "Is it possible to relink lib1 so that it refers to sublib1.dll?"}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 2, "creation_date": 1550675981, "post_id": 54789197, "comment_id": 96357654, "body": "I think your problem may be that Windows sees you are trying to load <code>sublib.dll</code> and says &quot;ah-ha!&quot;, I&#39;ve already got a copy of that in memory - I&#39;ll just use that.&quot;"}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 0, "creation_date": 1550676059, "post_id": 54789197, "comment_id": 96357714, "body": "Can you make sublib.dll be a delay-load dll?  You can do all <i>sorts</i> of interesting tricks with those."}, {"owner": {"reputation": 235, "user_id": 5037068, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/9ec3424345713065a0e84e4b80489fd0?s=128&d=identicon&r=PG&f=1", "display_name": "Maluna34", "link": "https://stackoverflow.com/users/5037068/maluna34"}, "reply_to_user": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 0, "creation_date": 1550676324, "post_id": 54789197, "comment_id": 96357888, "body": "@MartinBonner Thanks,but what is a delay-load dll ?"}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 0, "creation_date": 1550676364, "post_id": 54789197, "comment_id": 96357916, "body": "<a href=\"https://docs.microsoft.com/en-us/cpp/build/reference/linker-support-for-delay-loaded-dlls?view=vs-2017\" rel=\"nofollow noreferrer\">docs.microsoft.com/en-us/cpp/build/reference/&hellip;</a>"}, {"owner": {"reputation": 235, "user_id": 5037068, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/9ec3424345713065a0e84e4b80489fd0?s=128&d=identicon&r=PG&f=1", "display_name": "Maluna34", "link": "https://stackoverflow.com/users/5037068/maluna34"}, "reply_to_user": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 0, "creation_date": 1550677085, "post_id": 54789197, "comment_id": 96358351, "body": "I&#39;m using Qt. I put this in the .pro file of lib.dll : QMAKE_LFLAGS_DEBUG += /DELAYLOAD:sublib.dll  But I got this : unresolved external symbol __delayLoadHelper2  while I linked sublib.lib in the lib.dll project."}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 0, "creation_date": 1550677693, "post_id": 54789197, "comment_id": 96358757, "body": "Yup.  You need to write that function.  That&#39;s where you get to do all the exciting stuff.  (But if you can link lib.dll, you can link it four times, and make it link against a different copy of sublib.dll each time)."}, {"owner": {"reputation": 235, "user_id": 5037068, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/9ec3424345713065a0e84e4b80489fd0?s=128&d=identicon&r=PG&f=1", "display_name": "Maluna34", "link": "https://stackoverflow.com/users/5037068/maluna34"}, "reply_to_user": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 0, "creation_date": 1550680264, "post_id": 54789197, "comment_id": 96360331, "body": "I think I have then to loadLibrary(sublib) and with that I still have common values."}], "owner": {"reputation": 235, "user_id": 5037068, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/9ec3424345713065a0e84e4b80489fd0?s=128&d=identicon&r=PG&f=1", "display_name": "Maluna34", "link": "https://stackoverflow.com/users/5037068/maluna34"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 70, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1550674599, "creation_date": 1550674599, "question_id": 54789197, "link": "https://stackoverflow.com/questions/54789197/setdlldirectory-by-thread", "title": "SetDllDirectory by thread", "body": "<p>To use in different threads a non-reentrant DLL, I'm copying it in 4 different folders. It's ugly but mandatory...\nThis DLL is manually loaded by my application and uses another sublib (which is implicitly linked to the other). So I have something like this :</p>\n\n<pre><code>folder1/\n   lib1.dll\n   sublib.dll\nfolder2/\n   lib2.dll\n   sublib.dll\n</code></pre>\n\n<p>I managed to load the different versions of lib.dll (lib1 and lib2) but the loaded sublib.dll remains the same for both.\nI tried the SetDllDirectory and, AddDllDirectory but it's not loading multiple sublib.dll.</p>\n\n<pre><code> for (size_t i { 1 }; i &lt;= threadsCount; ++i)\n {\n        SetDllDirectoryA(nullptr); // Reset.\n        //SetDllDirectoryA(\"\"); // Plug \"binary planting\" security hole. `\n        SetDllDirectoryA(dirPath(i).c_str());   // folderX\n\n        HMODULE module = LoadLibraryExA(libPath(i).c_str(), nullptr, LOAD_LIBRARY_SEARCH_USER_DIRS);\n        if (!module )\n        {\n            std::cout &lt;&lt; \"error loading dll\" &lt;&lt; std::endl;\n            return false;\n        }\n\n        // Used after\n        // FooPrototype foo = (FooPrototype) GetProcAddress(module, \"foo\");\n}\n\n// Run threads with the different 'foo'\n</code></pre>\n\n<p>Is it possible to load 2 instances of sublib.dll ??</p>\n\n<p>Thanks !</p>\n"}, {"tags": ["c++", "segmentation-fault", "temporary-objects"], "comments": [{"owner": {"reputation": 12749, "user_id": 7976805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92a559df8b4b287aad23724b4c66d67c?s=128&d=identicon&r=PG&f=1", "display_name": "Yksisarvinen", "link": "https://stackoverflow.com/users/7976805/yksisarvinen"}, "edited": false, "score": 0, "creation_date": 1550673948, "post_id": 54788932, "comment_id": 96356307, "body": "The string is already gone when you finish <code>returnHello</code> function."}, {"owner": {"reputation": 20358, "user_id": 216190, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/5a13963fd8a6734ffd1aed8fc76e58ec?s=128&d=identicon&r=PG", "display_name": "Kraken", "link": "https://stackoverflow.com/users/216190/kraken"}, "reply_to_user": {"reputation": 12749, "user_id": 7976805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92a559df8b4b287aad23724b4c66d67c?s=128&d=identicon&r=PG&f=1", "display_name": "Yksisarvinen", "link": "https://stackoverflow.com/users/7976805/yksisarvinen"}, "edited": false, "score": 0, "creation_date": 1550674027, "post_id": 54788932, "comment_id": 96356364, "body": "@Yksisarvinen then why does it work in the first case. Why isnt the case, when we are passing the &quot;Hello World&quot; to function."}, {"owner": {"reputation": 703, "user_id": 9753452, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Michael Surette", "link": "https://stackoverflow.com/users/9753452/michael-surette"}, "edited": false, "score": 1, "creation_date": 1550674113, "post_id": 54788932, "comment_id": 96356420, "body": "Returning by value is always correct. Returning a reference to a local value not so much."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1550674136, "post_id": 54788932, "comment_id": 96356435, "body": "In the first example the temporary <code>std::string</code> object used in the call will have a life-time all through the function. In the second example that temporary <code>std::string</code> objects is destructed as soon as the call is ended."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1550674232, "post_id": 54788932, "comment_id": 96356490, "body": "The first example doesn&#39;t extend the lifetime of the temporary. That temporary will naturally exist until the end of the expression, which will be after the function returns."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1550676749, "post_id": 54788932, "comment_id": 96358150, "body": "&quot;I understand that return local variables should not be passed by value&quot; do you mean &quot;local variables should not be returned by reference&quot; ? As written this, sorry, does not make much sense"}], "owner": {"reputation": 20358, "user_id": 216190, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/5a13963fd8a6734ffd1aed8fc76e58ec?s=128&d=identicon&r=PG", "display_name": "Kraken", "link": "https://stackoverflow.com/users/216190/kraken"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 47, "favorite_count": 0, "closed_date": 1550674116, "answer_count": 0, "score": 0, "last_activity_date": 1550673840, "creation_date": 1550673840, "question_id": 54788932, "link": "https://stackoverflow.com/questions/54788932/passing-value-to-reference-works-one-way", "closed_reason": "Duplicate", "title": "passing value to reference works one way", "body": "<p>I understand that return local variables should not be passed by value. But I am unable to understand why one works, and the other doesnt.</p>\n\n<p>Number 1</p>\n\n<pre><code>void hello(const string&amp; s)\n{\n    cout &lt;&lt; \"s\";\n}\nint main()\n{\n    hello(\"Hello World\");\n    return 0;\n}\n</code></pre>\n\n<p>Number 2</p>\n\n<pre><code>const string&amp; returnHello()\n{\n    return \"hello world\";\n}\nint main()\n{\n    const string&amp; hh = returnHello();\n    cout &lt;&lt; hh &lt;&lt; endl;\n    return 0;\n}\n</code></pre>\n\n<p>Number 2 gives segmentation fault.</p>\n\n<p>Why is that? As I understand if I return reference of temporary in a const then that should extend the lifetime of that temporary, isnt it?</p>\n\n<p>Can someone help me understand why one works and other doesnt?</p>\n"}, {"tags": ["c++", "iostream", "memory-corruption"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1550673465, "post_id": 54788732, "comment_id": 96356002, "body": "<a href=\"https://stackoverflow.com/questions/2273330/restore-the-state-of-stdcout-after-manipulating-it\">Related question</a> on saving and restoring a stream&#39;s state."}, {"owner": {"reputation": 2392, "user_id": 3517622, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2nYKV.gif?s=128&g=1", "display_name": "KevinZ", "link": "https://stackoverflow.com/users/3517622/kevinz"}, "edited": false, "score": 0, "creation_date": 1550721733, "post_id": 54788732, "comment_id": 96375437, "body": "This is because <code>&lt;iostream&gt;</code> and <code>&lt;iomanip&gt;</code> are <a href=\"https://stackoverflow.com/questions/52442415/in-c-am-i-paying-for-what-i-am-not-eating/52462699#52462699\">completely broken</a>. You should just include <code>&lt;cstdio&gt;</code> and use <code>std::fprintf()</code>."}], "answers": [{"comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "reply_to_user": {"reputation": 425, "user_id": 9370018, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc7ce6db1045fd1770be45ffe8c78ce5?s=128&d=identicon&r=PG&f=1", "display_name": "Ojav", "link": "https://stackoverflow.com/users/9370018/ojav"}, "edited": false, "score": 4, "creation_date": 1550673360, "post_id": 54788770, "comment_id": 96355939, "body": "@Ojav it didnt change, 0x12 is 18"}, {"owner": {"reputation": 425, "user_id": 9370018, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc7ce6db1045fd1770be45ffe8c78ce5?s=128&d=identicon&r=PG&f=1", "display_name": "Ojav", "link": "https://stackoverflow.com/users/9370018/ojav"}, "edited": false, "score": 0, "creation_date": 1550673584, "post_id": 54788770, "comment_id": 96356074, "body": "Thanks to you too kind sir"}, {"owner": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "edited": false, "score": 0, "creation_date": 1550673621, "post_id": 54788770, "comment_id": 96356096, "body": "@StoryTeller nope, <code>setw</code> resets on the next output operation but the other flags don&#39;t"}], "tags": [], "owner": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "is_accepted": false, "score": 6, "last_activity_date": 1550674265, "last_edit_date": 1550674265, "creation_date": 1550673288, "answer_id": 54788770, "question_id": 54788732, "link": "https://stackoverflow.com/questions/54788732/why-does-stdhex-lead-to-memory-corruption-vector-size/54788770#54788770", "title": "Why does std::hex lead to memory corruption vector.size()?", "body": "<pre><code>std::cout &lt;&lt; std::hex;\n</code></pre>\n\n<p>makes all numbers printed by <code>std::cout</code> print as hex. To get back to decimal again run:</p>\n\n<pre><code>std::cout &lt;&lt; std::dec;\n</code></pre>\n\n<p>Ideally before using any stream format manipulators (like <code>std::hex</code>) you should save the formatting flags and restore them when you are finished. For example:</p>\n\n<pre><code>auto flags = std::cout.flags();\nstd::cout &lt;&lt; std::hex &lt;&lt; 10 &lt;&lt; \"\\n\";\nstd::cout.flags( flags );\n</code></pre>\n\n<p>All of the flags need to be reset like this: <a href=\"https://en.cppreference.com/w/cpp/io/ios_base/flags\" rel=\"nofollow noreferrer\">https://en.cppreference.com/w/cpp/io/ios_base/flags</a></p>\n\n<p>The fill character is also sticky: <a href=\"https://en.cppreference.com/w/cpp/io/basic_ios/fill\" rel=\"nofollow noreferrer\">https://en.cppreference.com/w/cpp/io/basic_ios/fill</a> and so is the precision: <a href=\"https://en.cppreference.com/w/cpp/io/ios_base/precision\" rel=\"nofollow noreferrer\">https://en.cppreference.com/w/cpp/io/ios_base/precision</a></p>\n\n<p>The only one that  isn't is the width flag: <a href=\"https://en.cppreference.com/w/cpp/io/ios_base/width\" rel=\"nofollow noreferrer\">https://en.cppreference.com/w/cpp/io/ios_base/width</a></p>\n\n<p>Boost has a utility class to reset all the stream state back to the initial values: <a href=\"https://www.boost.org/doc/libs/1_69_0/libs/io/doc/ios_state.html\" rel=\"nofollow noreferrer\">https://www.boost.org/doc/libs/1_69_0/libs/io/doc/ios_state.html</a></p>\n"}, {"comments": [{"owner": {"reputation": 425, "user_id": 9370018, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc7ce6db1045fd1770be45ffe8c78ce5?s=128&d=identicon&r=PG&f=1", "display_name": "Ojav", "link": "https://stackoverflow.com/users/9370018/ojav"}, "edited": false, "score": 1, "creation_date": 1550673435, "post_id": 54788799, "comment_id": 96355982, "body": "Jesus christ why is C++ like that. Thanks &lt;3"}, {"owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "reply_to_user": {"reputation": 425, "user_id": 9370018, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc7ce6db1045fd1770be45ffe8c78ce5?s=128&d=identicon&r=PG&f=1", "display_name": "Ojav", "link": "https://stackoverflow.com/users/9370018/ojav"}, "edited": false, "score": 0, "creation_date": 1550673511, "post_id": 54788799, "comment_id": 96356037, "body": "@Ojav I cannot wait for fmt to be standardized."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 425, "user_id": 9370018, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc7ce6db1045fd1770be45ffe8c78ce5?s=128&d=identicon&r=PG&f=1", "display_name": "Ojav", "link": "https://stackoverflow.com/users/9370018/ojav"}, "edited": false, "score": 2, "creation_date": 1550673531, "post_id": 54788799, "comment_id": 96356049, "body": "@Ojav Don&#39;t worry about it.  Some manipulators are not &quot;sticky&quot; and some are.  It takes time to learn which is which."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "reply_to_user": {"reputation": 425, "user_id": 9370018, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc7ce6db1045fd1770be45ffe8c78ce5?s=128&d=identicon&r=PG&f=1", "display_name": "Ojav", "link": "https://stackoverflow.com/users/9370018/ojav"}, "edited": false, "score": 0, "creation_date": 1550673534, "post_id": 54788799, "comment_id": 96356054, "body": "@Ojav it really isnt obvious by reading some otherwise wonderful <a href=\"https://en.cppreference.com/w/cpp/io/manip/hex\" rel=\"nofollow noreferrer\">reference</a>, though if you read the example carefully they mention: &quot;// the output base is sticky until changed&quot;"}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1550673540, "post_id": 54788799, "comment_id": 96356055, "body": "TIL. Confusing business with most common stream manipulators not sticking."}, {"owner": {"reputation": 425, "user_id": 9370018, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc7ce6db1045fd1770be45ffe8c78ce5?s=128&d=identicon&r=PG&f=1", "display_name": "Ojav", "link": "https://stackoverflow.com/users/9370018/ojav"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1550673765, "post_id": 54788799, "comment_id": 96356181, "body": "@user463035818 Men i even was at that site, I never felt more stupid ever"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "reply_to_user": {"reputation": 425, "user_id": 9370018, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc7ce6db1045fd1770be45ffe8c78ce5?s=128&d=identicon&r=PG&f=1", "display_name": "Ojav", "link": "https://stackoverflow.com/users/9370018/ojav"}, "edited": false, "score": 0, "creation_date": 1550673944, "post_id": 54788799, "comment_id": 96356299, "body": "@Ojav Don&#39;t worry about it. Stream manipulators are tricky like that, and everyone makes mistakes like this once in a while."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 425, "user_id": 9370018, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc7ce6db1045fd1770be45ffe8c78ce5?s=128&d=identicon&r=PG&f=1", "display_name": "Ojav", "link": "https://stackoverflow.com/users/9370018/ojav"}, "edited": false, "score": 0, "creation_date": 1550674170, "post_id": 54788799, "comment_id": 96356457, "body": "@Ojav I&#39;ve updated the answer with a useful debug tip for this."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "reply_to_user": {"reputation": 425, "user_id": 9370018, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc7ce6db1045fd1770be45ffe8c78ce5?s=128&d=identicon&r=PG&f=1", "display_name": "Ojav", "link": "https://stackoverflow.com/users/9370018/ojav"}, "edited": false, "score": 0, "creation_date": 1550674755, "post_id": 54788799, "comment_id": 96356830, "body": "@Ojav not your fault, if I didnt miss it they dont mention it at all in the text, maybe it should get an update"}], "tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": true, "score": 10, "last_activity_date": 1550674144, "last_edit_date": 1550674144, "creation_date": 1550673378, "answer_id": 54788799, "question_id": 54788732, "link": "https://stackoverflow.com/questions/54788732/why-does-stdhex-lead-to-memory-corruption-vector-size/54788799#54788799", "title": "Why does std::hex lead to memory corruption vector.size()?", "body": "<p><code>std::hex</code> is \"sticky\".  It sets the state of the stream to hexadecimal display and that is where it will stay until you change it.  That means when you do</p>\n\n<pre><code>cout &lt;&lt; \"Size: \" &lt;&lt; test.size() &lt;&lt; endl;\n</code></pre>\n\n<p>you display the size in hex and 18 decimal is 12 hex.</p>\n\n<p>You need</p>\n\n<pre><code>cout &lt;&lt; \"Size: \" &lt;&lt; dec &lt;&lt; test.size() &lt;&lt; endl;\n</code></pre>\n\n<p>to switch back to decimal mode and display the size \"correctly\".</p>\n\n<hr>\n\n<p>Another thing that would help you diagnosing this is to use <a href=\"https://en.cppreference.com/w/cpp/io/manip/showbase\" rel=\"noreferrer\"><code>std::showbase</code></a>.  It is another \"sticky\" manipulator and will prepend hexadecimal output with <code>0x</code>.  Using that in</p>\n\n<pre><code>cout &lt;&lt; \"Memory Address: \" &lt;&lt; hex &lt;&lt; showbase  &lt;&lt; a &lt;&lt; endl;\n</code></pre>\n\n<p>would have made your output</p>\n\n<pre><code>Size: 18\nMemory Address: 0xfc06a0\nMemory Address: 0x13a70f0\nMemory Address: 0x36c78c1\nMemory Address: 0x3da0ea0\nMemory Address: 0x3e21b80\nMemory Address: 0xc0a6881\nMemory Address: 0xc747690\nMemory Address: 0xc748b98\nMemory Address: 0xc74a1b8\nMemory Address: 0xc74ce10\nMemory Address: 0xc750c78\nMemory Address: 0x1340a10f\nMemory Address: 0x14376ea0\nMemory Address: 0x14472649\nMemory Address: 0x69867268\nMemory Address: 0x6bdf9243\nMemory Address: 0x7399a142\nMemory Address: 0x76c54875\nSize: 0x12\n</code></pre>\n\n<p>which makes it a lot more clear that the last call to <code>cout</code> is still using <code>hex</code></p>\n"}], "owner": {"reputation": 425, "user_id": 9370018, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc7ce6db1045fd1770be45ffe8c78ce5?s=128&d=identicon&r=PG&f=1", "display_name": "Ojav", "link": "https://stackoverflow.com/users/9370018/ojav"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 222, "favorite_count": 0, "accepted_answer_id": 54788799, "answer_count": 2, "score": 4, "last_activity_date": 1564389724, "creation_date": 1550673159, "last_edit_date": 1564389724, "question_id": 54788732, "link": "https://stackoverflow.com/questions/54788732/why-does-stdhex-lead-to-memory-corruption-vector-size", "title": "Why does std::hex lead to memory corruption vector.size()?", "body": "<p>I have following code:</p>\n\n<pre><code>vector&lt;UINT_PTR&gt; test = GetMemoryAddresses();\n\ncout &lt;&lt; \"Size: \" &lt;&lt; test.size() &lt;&lt; endl;\n\nfor (UINT_PTR a : test) {\n    cout &lt;&lt; \"Memory Address: \" &lt;&lt; hex  &lt;&lt; a &lt;&lt; endl;\n}\n\ncout &lt;&lt; \"Size: \" &lt;&lt; test.size() &lt;&lt; endl;\n</code></pre>\n\n<p>Which prints following results:</p>\n\n<pre><code>Size: 18\nMemory Address: fc06a0\nMemory Address: 13a70f0\nMemory Address: 36c78c1\nMemory Address: 3da0ea0\nMemory Address: 3e21b80\nMemory Address: c0a6881\nMemory Address: c747690\nMemory Address: c748b98\nMemory Address: c74a1b8\nMemory Address: c74ce10\nMemory Address: c750c78\nMemory Address: 1340a10f\nMemory Address: 14376ea0\nMemory Address: 14472649\nMemory Address: 69867268\nMemory Address: 6bdf9243\nMemory Address: 7399a142\nMemory Address: 76c54875\nSize: 12\n</code></pre>\n\n<p>Removing the </p>\n\n<blockquote>\n  <p>&lt;&lt; hex</p>\n</blockquote>\n\n<p>leads to the correct vector.size() of 18 again.</p>\n\n<p>What is causing this memory coruption?</p>\n\n<p>Have I done anything wrong?</p>\n"}, {"tags": ["c++", "eclipse"], "answers": [{"tags": [], "owner": {"reputation": 14893, "user_id": 4645334, "user_type": "registered", "accept_rate": 87, "profile_image": "https://lh6.googleusercontent.com/-hoIJVId9WIY/AAAAAAAAAAI/AAAAAAAAGQw/r7Es0WqE4rs/photo.jpg?sz=128", "display_name": "Thomas Sablik", "link": "https://stackoverflow.com/users/4645334/thomas-sablik"}, "is_accepted": false, "score": 0, "last_activity_date": 1550673357, "creation_date": 1550673357, "answer_id": 54788794, "question_id": 54788330, "link": "https://stackoverflow.com/questions/54788330/how-do-i-delete-the-launch-configuration-of-a-deleted-project-if-eclipsec-re/54788794#54788794", "title": "How do I delete the launch configuration of a deleted project if Eclipse(C++) refuses to automatically do it?", "body": "<p>Click in top menu on <code>Run</code> -> <code>Run Configurations...</code>. There all configurations should be listed and you can remove them. You can also check <code>Debug Configurations...</code>.</p>\n"}], "owner": {"reputation": 9, "user_id": 11090496, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-bzcgCYWPU0U/AAAAAAAAAAI/AAAAAAAAACw/E-gEysV0HV8/photo.jpg?sz=128", "display_name": "JANUS", "link": "https://stackoverflow.com/users/11090496/janus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 34, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1550673357, "creation_date": 1550671840, "question_id": 54788330, "link": "https://stackoverflow.com/questions/54788330/how-do-i-delete-the-launch-configuration-of-a-deleted-project-if-eclipsec-re", "title": "How do I delete the launch configuration of a deleted project if Eclipse(C++) refuses to automatically do it?", "body": "<p>This all started when Eclipse stopped automatically creating the executable after debugging/compiling the program.</p>\n"}, {"tags": ["c++", "cmake"], "comments": [{"owner": {"reputation": 139300, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 2, "creation_date": 1550671875, "post_id": 54788257, "comment_id": 96354967, "body": "Please do not tag C++ questions with the C tag."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1550672300, "post_id": 54788257, "comment_id": 96355243, "body": "The bug is probably in your <code>CMakeLists.txt</code>. I expect you have more lines than this <code>ADD_EXECUTABLE( cmaketutorial main.cpp )</code>"}, {"owner": {"reputation": 31823, "user_id": 1960455, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/d22bdc5c04b48a9054586eb64174ea99?s=128&d=identicon&r=PG", "display_name": "t.niese", "link": "https://stackoverflow.com/users/1960455/t-niese"}, "edited": false, "score": 2, "creation_date": 1550672602, "post_id": 54788257, "comment_id": 96355443, "body": "You most certainly don&#39;t link your executable against the sql library that you use."}, {"owner": {"reputation": 49, "user_id": 1993504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2fc47c20103a439819b9b15693bdac0?s=128&d=identicon&r=PG", "display_name": "Shaoor Ahmad Qureshi", "link": "https://stackoverflow.com/users/1993504/shaoor-ahmad-qureshi"}, "edited": false, "score": 0, "creation_date": 1550672752, "post_id": 54788257, "comment_id": 96355537, "body": "Thanks for the comments.. but thats the thing i dont know what to add in the cmakelists.txt so that it can start working"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1550672883, "post_id": 54788257, "comment_id": 96355631, "body": "I am not sure what sql library you are using."}, {"owner": {"reputation": 49, "user_id": 1993504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2fc47c20103a439819b9b15693bdac0?s=128&d=identicon&r=PG", "display_name": "Shaoor Ahmad Qureshi", "link": "https://stackoverflow.com/users/1993504/shaoor-ahmad-qureshi"}, "edited": false, "score": 0, "creation_date": 1550673003, "post_id": 54788257, "comment_id": 96355705, "body": "The functions I am using are in sql.h file. and is located in  C:\\Program Files (x86)\\Windows Kits\\10\\Include\\10.0.17763.0\\um"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 1, "creation_date": 1550673207, "post_id": 54788257, "comment_id": 96355842, "body": "I think its ODBC <a href=\"https://cmake.org/cmake/help/v3.12/module/FindODBC.html\" rel=\"nofollow noreferrer\">cmake.org/cmake/help/v3.12/module/FindODBC.html</a>"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 1, "creation_date": 1550673298, "post_id": 54788257, "comment_id": 96355896, "body": "The CMakeList.txt at the beginning of this bug report should be helpful: <a href=\"https://gitlab.kitware.com/cmake/cmake/issues/18539\" rel=\"nofollow noreferrer\">gitlab.kitware.com/cmake/cmake/issues/18539</a> don&#39;t use the <code>project(odbc_example LANGUAGES C)</code> part."}, {"owner": {"reputation": 49, "user_id": 1993504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2fc47c20103a439819b9b15693bdac0?s=128&d=identicon&r=PG", "display_name": "Shaoor Ahmad Qureshi", "link": "https://stackoverflow.com/users/1993504/shaoor-ahmad-qureshi"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1550673407, "post_id": 54788257, "comment_id": 96355966, "body": "Thanks @drescherjm can you write a line of code to add in cmakeLists.txt since i am not used to writing CMakeLists.txt"}, {"owner": {"reputation": 1923, "user_id": 2683320, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f1277edc9447bb239cc46b68236a465?s=128&d=identicon&r=PG&f=1", "display_name": "Hanjoung Lee", "link": "https://stackoverflow.com/users/2683320/hanjoung-lee"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 2, "creation_date": 1550673426, "post_id": 54788257, "comment_id": 96355976, "body": "With @drescherjm&#39;s reference, You may try adding these lines: <code>find_package(ODBC)</code> <code>TARGET_LINK_LIBRARIES(cmaketutorial ${ODBC_LIBRARIES})</code>."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "reply_to_user": {"reputation": 1923, "user_id": 2683320, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f1277edc9447bb239cc46b68236a465?s=128&d=identicon&r=PG&f=1", "display_name": "Hanjoung Lee", "link": "https://stackoverflow.com/users/2683320/hanjoung-lee"}, "edited": false, "score": 0, "creation_date": 1550673511, "post_id": 54788257, "comment_id": 96356036, "body": "@HanjoungLee yes exactly. I would have posted an answer but I currently don&#39;t have an easy way to test."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1550673837, "post_id": 54788257, "comment_id": 96356240, "body": "<code>find_package(ODBC)</code> goes above <code>ADD_EXECUTABLE( cmaketutorial main.cpp )</code> and <code>TARGET_LINK_LIBRARIES(cmaketutorial ${ODBC_LIBRARIES})</code> goes below."}, {"owner": {"reputation": 49, "user_id": 1993504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2fc47c20103a439819b9b15693bdac0?s=128&d=identicon&r=PG", "display_name": "Shaoor Ahmad Qureshi", "link": "https://stackoverflow.com/users/1993504/shaoor-ahmad-qureshi"}, "edited": false, "score": 0, "creation_date": 1550673846, "post_id": 54788257, "comment_id": 96356249, "body": "Now I am using this CMakeLists.txt                             cmake_minimum_required (VERSION 2.6) project (Tutorial) find_package(ODBC) TARGET_LINK_LIBRARIES(cmaketutorial ${ODBC_LIBRARY})                       still its having some issues ..     add_executable(Tutorial main.cpp)"}, {"owner": {"reputation": 1923, "user_id": 2683320, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f1277edc9447bb239cc46b68236a465?s=128&d=identicon&r=PG&f=1", "display_name": "Hanjoung Lee", "link": "https://stackoverflow.com/users/2683320/hanjoung-lee"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1550674183, "post_id": 54788257, "comment_id": 96356464, "body": "@drescherjm I don&#39;t have the test environment either. Once the OP confirms, you should write the answer, as I just took dictation :)"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 1, "creation_date": 1550675304, "post_id": 54788257, "comment_id": 96357168, "body": "Whatever you have in the first parameter to TARGET_LINK_LIBRARIES() must match the first parameter to add_executable() that is your target."}, {"owner": {"reputation": 49, "user_id": 1993504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2fc47c20103a439819b9b15693bdac0?s=128&d=identicon&r=PG", "display_name": "Shaoor Ahmad Qureshi", "link": "https://stackoverflow.com/users/1993504/shaoor-ahmad-qureshi"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1550835202, "post_id": 54788257, "comment_id": 96427073, "body": "so i figured out thanks to @drescherjm i had to add these two lines in my CmakeLists.txt under ADD_LIBRARAY section                     find_package(ODBC) TARGET_LINK_LIBRARIES(${PROJECT_NAME}_component ${ODBC_LIBRARIES})"}], "owner": {"reputation": 49, "user_id": 1993504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2fc47c20103a439819b9b15693bdac0?s=128&d=identicon&r=PG", "display_name": "Shaoor Ahmad Qureshi", "link": "https://stackoverflow.com/users/1993504/shaoor-ahmad-qureshi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 58, "favorite_count": 0, "closed_date": 1550674235, "answer_count": 0, "score": 0, "last_activity_date": 1550672358, "creation_date": 1550671603, "last_edit_date": 1550672358, "question_id": 54788257, "link": "https://stackoverflow.com/questions/54788257/linking-error-using-cmake-in-c-with-sql-h", "closed_reason": "Duplicate", "title": "Linking error using cmake in C++ with &lt;sql.h&gt;", "body": "<pre><code>#include&lt;iostream&gt;\n#include&lt;Windows.h&gt;\n#include&lt;sqlext.h&gt;\n#include&lt;sqltypes.h&gt;\n#include&lt;sql.h&gt;\n\nusing namespace std;\n\nvoid showSQLError(unsigned int handleType, const SQLHANDLE&amp; handle)\n{\n    SQLCHAR SQLState[1024];\n    SQLCHAR message[1024];\n    if (SQL_SUCCESS == SQLGetDiagRec(handleType, handle, 1, SQLState, NULL, message, 1024, NULL))\n    {\n        cout &lt;&lt; \"SQL driver messge :\" &lt;&lt; message &lt;&lt; \"\\n SQL State \" &lt;&lt; SQLState &lt;&lt; \".\" &lt;&lt; endl;\n    }\n}\n\n\n\nint main()\n{\n    cout &lt;&lt; \"hdsajhfkadsjhflksad\";\n    return 0;\n}\n</code></pre>\n\n<p>and the CmakeLists.txt file i am using to build this one is </p>\n\n<pre><code>ADD_EXECUTABLE( cmaketutorial main.cpp )\n</code></pre>\n\n<p>but I am having this error with linking. </p>\n\n<pre><code>Error   LNK2019 unresolved external symbol SQLGetDiagRec referenced in function \"void __cdecl showSQLError(unsigned int,void * const &amp;)\" (?showSQLError@@YAXIAEBQEAX@Z) C:\\Users\\uib02930\\Documents\\Visual Studio 2015\\Projects\\cmaketest\\CMakeLists.txt    C:\\Users\\uib02930\\Documents\\Visual Studio 2015\\Projects\\cmaketest\\main.obj  1   \nError   LNK1120 1 unresolved externals  C:\\Users\\uib02930\\Documents\\Visual Studio 2015\\Projects\\cmaketest\\CMakeLists.txt    \n</code></pre>\n\n<p>C:\\Users\\uib02930\\Documents\\Visual Studio 2015\\Projects\\cmaketest\\src\\cmaketutorial.exe 1   </p>\n\n<p>When I run this same dummy code by directly building using visual studio it works perctly fine but with CmakeLists.txt it does not.. What changes should I do to CmakeLists.txt to run it without any error. </p>\n"}, {"tags": ["c++", "multithreading", "multiprocessing", "mutex"], "comments": [{"owner": {"reputation": 8002, "user_id": 1143850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2927fac544c9960cd5433688fe4cae1d?s=128&d=identicon&r=PG", "display_name": "Serge", "link": "https://stackoverflow.com/users/1143850/serge"}, "edited": false, "score": 1, "creation_date": 1550671763, "post_id": 54788205, "comment_id": 96354880, "body": "cpp does not provide any specific inter-process communication features. you can use any of hundreds of available IPC methods directly from libc or from other libraries. e.g. pipes, shared memory semaphores, fifos, ..."}, {"owner": {"reputation": 308, "user_id": 11068197, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-tjFpMuWVmZw/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQMODoZK0hFcEfPOWap_xB7yauICAg/mo/photo.jpg?sz=128", "display_name": "Abhishek Garg", "link": "https://stackoverflow.com/users/11068197/abhishek-garg"}, "reply_to_user": {"reputation": 8002, "user_id": 1143850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2927fac544c9960cd5433688fe4cae1d?s=128&d=identicon&r=PG", "display_name": "Serge", "link": "https://stackoverflow.com/users/1143850/serge"}, "edited": false, "score": 0, "creation_date": 1550672025, "post_id": 54788205, "comment_id": 96355052, "body": "@Serge I don&#39;t have any idea how to do it using shared memory semaphores. It will be kind of u if u could help me."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1550672030, "post_id": 54788205, "comment_id": 96355055, "body": "It will depend on your tools, but my general expectation would be that process-shared synchronization objects (mutexes, semaphores, <i>etc</i>.) will serve your inter-thread synchronization requirements, too.  That is, you ought to be able to synchronize the activity of multiple threads across multiple processes with one set of synchronization objects."}, {"owner": {"reputation": 1014, "user_id": 6047952, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a56a0a74a9848b8796170a9bce83e9fa?s=128&d=identicon&r=PG", "display_name": "infixed", "link": "https://stackoverflow.com/users/6047952/infixed"}, "edited": false, "score": 0, "creation_date": 1550672321, "post_id": 54788205, "comment_id": 96355255, "body": "Synchronization is usually about resources.  Your statement seems to be more one of synchronizing output than of processes.  So it seems that one way to do it is to have one overarching process have a semaphore for the console, where each thread has to acquire exclusive control of the console via that semaphore.  What you use as a semaphore really depends on the operating environment"}, {"owner": {"reputation": 9720, "user_id": 6371123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f90991c1b06c79ae4c6e79fb616d608?s=128&d=identicon&r=PG", "display_name": "G.M.", "link": "https://stackoverflow.com/users/6371123/g-m"}, "edited": false, "score": 2, "creation_date": 1550672366, "post_id": 54788205, "comment_id": 96355287, "body": "You might want to look at <a href=\"https://www.boost.org/doc/libs/1_69_0/doc/html/interprocess.html\" rel=\"nofollow noreferrer\">boost::interprocess</a>.  Also note that gcc 4.4.7 is old and may even be missing certain <code>c++11</code> features."}, {"owner": {"reputation": 308, "user_id": 11068197, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-tjFpMuWVmZw/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQMODoZK0hFcEfPOWap_xB7yauICAg/mo/photo.jpg?sz=128", "display_name": "Abhishek Garg", "link": "https://stackoverflow.com/users/11068197/abhishek-garg"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1550672367, "post_id": 54788205, "comment_id": 96355288, "body": "@JohnBollinger with synchronization , it should be able to generate unique numbers as explained above"}, {"owner": {"reputation": 15619, "user_id": 1548468, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0745dce203d52699e63a575b3103ad70?s=128&d=identicon&r=PG", "display_name": "Botje", "link": "https://stackoverflow.com/users/1548468/botje"}, "edited": false, "score": 0, "creation_date": 1550672454, "post_id": 54788205, "comment_id": 96355341, "body": "Add an extra process that takes the output (with <code>select(2)</code>, for example) from the 10 other processes and interleaves them."}, {"owner": {"reputation": 308, "user_id": 11068197, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-tjFpMuWVmZw/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQMODoZK0hFcEfPOWap_xB7yauICAg/mo/photo.jpg?sz=128", "display_name": "Abhishek Garg", "link": "https://stackoverflow.com/users/11068197/abhishek-garg"}, "reply_to_user": {"reputation": 1014, "user_id": 6047952, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a56a0a74a9848b8796170a9bce83e9fa?s=128&d=identicon&r=PG", "display_name": "infixed", "link": "https://stackoverflow.com/users/6047952/infixed"}, "edited": false, "score": 0, "creation_date": 1550672569, "post_id": 54788205, "comment_id": 96355418, "body": "@infixed please read the edit done in question"}, {"owner": {"reputation": 1014, "user_id": 6047952, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a56a0a74a9848b8796170a9bce83e9fa?s=128&d=identicon&r=PG", "display_name": "infixed", "link": "https://stackoverflow.com/users/6047952/infixed"}, "edited": false, "score": 0, "creation_date": 1550672828, "post_id": 54788205, "comment_id": 96355595, "body": "You may want to look at <a href=\"https://stackoverflow.com/questions/13161153/c11-interprocess-atomics-and-mutexes\" title=\"c11 interprocess atomics and mutexes\">stackoverflow.com/questions/13161153/&hellip;</a>   But if you want to deal with interprocess, perhaps you should start looking at <code>man sem_overview</code> too.  Which is more C than C++"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1550673082, "post_id": 54788205, "comment_id": 96355759, "body": "Yes, @AbhishekGarg, and what?  I took you to be saying that you already know how to use synchronization to solve the problem, and were merely uncertain about how to synchronize threads belonging to different processes.  If that is not actually the case then this question is much too broad for SO."}, {"owner": {"reputation": 308, "user_id": 11068197, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-tjFpMuWVmZw/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQMODoZK0hFcEfPOWap_xB7yauICAg/mo/photo.jpg?sz=128", "display_name": "Abhishek Garg", "link": "https://stackoverflow.com/users/11068197/abhishek-garg"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1550673541, "post_id": 54788205, "comment_id": 96356056, "body": "@JohnBollinger i did it using lockf() , it did not work as expected"}, {"owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "edited": false, "score": 0, "creation_date": 1550673708, "post_id": 54788205, "comment_id": 96356152, "body": "Try mpi, it&#39;s pretty good at synchronizing processes"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1550673963, "post_id": 54788205, "comment_id": 96356324, "body": "Then actually, no, you do <i>not</i> know (very well) how to synchronize between processes.  I suppose you could use your <code>flock()</code> lock to synchronize between the processes, and when each process runs, let each of its threads run with appropriate inter-thread synchronization within the process.  The more elegant way, however, would be to use a genuine IPC mechanism, such as a <a href=\"http://man7.org/linux/man-pages/man7/sem_overview.7.html\" rel=\"nofollow noreferrer\">POSIX semaphore</a>, to synchronize the threads directly."}, {"owner": {"reputation": 308, "user_id": 11068197, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-tjFpMuWVmZw/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQMODoZK0hFcEfPOWap_xB7yauICAg/mo/photo.jpg?sz=128", "display_name": "Abhishek Garg", "link": "https://stackoverflow.com/users/11068197/abhishek-garg"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1550676538, "post_id": 54788205, "comment_id": 96358028, "body": "so @JohnBollinger by using named semaphore as mentioned [here]&lt;<a href=\"http://man7.org/linux/man-pages/man7/sem_overview.7.html\" rel=\"nofollow noreferrer\">man7.org/linux/man-pages/man7/sem_overview.7.html</a>&gt; , it will synchronize between process with multiple threads in cpp."}, {"owner": {"reputation": 8002, "user_id": 1143850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2927fac544c9960cd5433688fe4cae1d?s=128&d=identicon&r=PG", "display_name": "Serge", "link": "https://stackoverflow.com/users/1143850/serge"}, "edited": false, "score": 0, "creation_date": 1550687841, "post_id": 54788205, "comment_id": 96364318, "body": "you need to figure out which method is the best for you. google it. try this <a href=\"https://stackoverflow.com/questions/372198/best-way-for-interprocess-communication-in-c\" title=\"best way for interprocess communication in c\">stackoverflow.com/questions/372198/&hellip;</a>"}, {"owner": {"reputation": 308, "user_id": 11068197, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-tjFpMuWVmZw/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQMODoZK0hFcEfPOWap_xB7yauICAg/mo/photo.jpg?sz=128", "display_name": "Abhishek Garg", "link": "https://stackoverflow.com/users/11068197/abhishek-garg"}, "edited": false, "score": 0, "creation_date": 1550968097, "post_id": 54788205, "comment_id": 96467684, "body": "We can use Boost.Interprocess .Thanks guys for your comments"}], "owner": {"reputation": 308, "user_id": 11068197, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-tjFpMuWVmZw/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQMODoZK0hFcEfPOWap_xB7yauICAg/mo/photo.jpg?sz=128", "display_name": "Abhishek Garg", "link": "https://stackoverflow.com/users/11068197/abhishek-garg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 155, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1550762487, "creation_date": 1550671431, "last_edit_date": 1550675253, "question_id": 54788205, "link": "https://stackoverflow.com/questions/54788205/synchronize-between-process-with-multiple-threads-in-cpp", "title": "synchronize between process with multiple threads in cpp", "body": "<p>I know how to synchronize between process and how to synchronize between threads. But I don't know how to synchronize between process with multiple threads.</p>\n\n<p>Consider a scenario</p>\n\n<p>I am creating 10 threads in a process. Each thread is printing a number.</p>\n\n<p>I am running 10 processes simultaneously.</p>\n\n<p>Now I need to create synchronization between process and threads such that at last, it should print 100 unique numbers in the console.Kindly note i don't expect the numbers printed in console to be in sequence , but all 100 numbers printed should be unique.</p>\n\n<p>Kindly note that this idea should not only be limited to the above task. It may happen that I want to only one thread of one of the processes to execute certain code.</p>\n\n<p>How to write this program in CPP for redhat.</p>\n\n<p>Kindly note the version: gcc version 4.4.7.</p>\n"}, {"tags": ["c++", "static-members", "variable-initialization"], "comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 3, "creation_date": 1550671265, "post_id": 54788022, "comment_id": 96354552, "body": "What you&#39;re experiencing here is not a race condition. <a href=\"https://stackoverflow.com/questions/3035422/static-initialization-order-fiasco\">This</a> might be interesting. And so is <a href=\"https://isocpp.org/wiki/faq/ctors#static-init-order\" rel=\"nofollow noreferrer\">this</a>"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 2, "creation_date": 1550671371, "post_id": 54788022, "comment_id": 96354615, "body": "Static initialization order fiasco."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 1, "creation_date": 1550671469, "post_id": 54788022, "comment_id": 96354687, "body": "It isn&#39;t a race condition, all due to C++ 11 guarantee that static class members are initialized in a threadsafe manner.  The issue is pointed out in the comment by @drescherjm."}], "answers": [{"tags": [], "owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "is_accepted": true, "score": 1, "last_activity_date": 1550674111, "creation_date": 1550674111, "answer_id": 54789036, "question_id": 54788022, "link": "https://stackoverflow.com/questions/54788022/how-to-fix-initialisation-order-of-static-class-member/54789036#54789036", "title": "How to fix initialisation order of static class member?", "body": "<p>You can ensure that the object you're depending on exists by indirecting through a function:</p>\n\n<pre><code>class BaseClass\n{\n// ...\n    // This returns a pointer only to make it hard to copy the list by mistake.\n    // Some people prefer to use a reference, and some prefer dynamic allocation.\n    // The important part is that the object is created the first time you use it.\n    static std::list&lt;std::shared_ptr&lt;QObject&gt;&gt;* get_testlist()\n    {\n        static std::list&lt;std::shared_ptr&lt;QObject&gt;&gt; tests;\n        return &amp;tests;\n    } \n};\n</code></pre>\n\n<p>and then use it something like this: </p>\n\n<pre><code>UnitTestClass() {\n      std::shared_ptr&lt;QObject&gt; ptr = std::make_shared&lt;T&gt;();\n      qDebug() &lt;&lt; \"pushing a\" &lt;&lt; ptr.get()-&gt;metaObject()-&gt;className();\n      auto testlist = get_testlist();\n      qDebug() &lt;&lt; \"testlist size before:\" &lt;&lt; testlist-&gt;size() &lt;&lt; \"of\" &lt;&lt; testlist-&gt;max_size();\n      testlist-&gt;push_back( ptr );\n      qDebug() &lt;&lt; \"testlist size after:\" &lt;&lt; testlist-&gt;size();\n  } \n</code></pre>\n"}], "owner": {"reputation": 81, "user_id": 8603646, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e35c6373bffcab075e0d831c59d9ba87?s=128&d=identicon&r=PG&f=1", "display_name": "kaba", "link": "https://stackoverflow.com/users/8603646/kaba"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "accepted_answer_id": 54789036, "answer_count": 1, "score": 1, "last_activity_date": 1550674111, "creation_date": 1550670858, "last_edit_date": 1550671987, "question_id": 54788022, "link": "https://stackoverflow.com/questions/54788022/how-to-fix-initialisation-order-of-static-class-member", "title": "How to fix initialisation order of static class member?", "body": "<p>Whether the following code throws a SIGSEGV or works as expected depends on the order in which object files appear in the makefile (in the .pro in my case). I'm not very confident with just having to maintain them in the correct order. Is there a simple change to my sources, which eliminates the dependency on the correct order of object files?</p>\n\n<p>These are the source files, boiled down to a short example.</p>\n\n<p><code>dummy0.h</code>:</p>\n\n<pre><code>#ifndef DUMMY0_H\n#define DUMMY0_H\n\n#include &lt;QObject&gt;\n\nclass Dummy0 : public QObject\n{\n    Q_OBJECT\npublic:\n    explicit Dummy0(QObject *parent = 0);\n};\n\n#endif // DUMMY0_H\n</code></pre>\n\n<p><code>dummy0.cpp</code>:</p>\n\n<pre><code>#include \"dummy0.h\"\n#include \"unittestclass.h\"\n\nDummy0::Dummy0(QObject *parent) : QObject(parent) {}\n\nADD_TEST( Dummy0 )\n</code></pre>\n\n<p>As the name suggests, in the future there will also be <code>Dummy1</code> ... <code>Dummy&lt;n&gt;</code>.</p>\n\n<p><code>unittestclass.h</code>:</p>\n\n<pre><code>#ifndef UNITTESTCLASS_H\n#define UNITTESTCLASS_H\n\n#include &lt;QObject&gt;\n#include &lt;QTest&gt;\n#include &lt;QDebug&gt;\n#include &lt;memory&gt;\n#include &lt;list&gt;\n\n// see https://stackoverflow.com/questions/12194256/qt-how-to-organize-unit-test-with-more-than-one-class\n\nnamespace TestCollector {\n\n  class BaseClass {  // see https://hackernoon.com/shared-static-variable-for-all-template-class-instances-eaed385f332b\n  public:\n      BaseClass() = default;\n      int listClasses( int argc, char *argv[] );\n  protected:\n      static std::list&lt;std::shared_ptr&lt;QObject&gt;&gt; testlist;\n  };\n\n  template &lt;class T&gt;\n  class UnitTestClass : public BaseClass {\n\n  public:\n      UnitTestClass() {\n          std::shared_ptr&lt;QObject&gt; ptr = std::make_shared&lt;T&gt;();\n          qDebug() &lt;&lt; \"pushing a\" &lt;&lt; ptr.get()-&gt;metaObject()-&gt;className();\n          qDebug() &lt;&lt; \"testlist size before:\" &lt;&lt; testlist.size() &lt;&lt; \"of\" &lt;&lt; testlist.max_size();\n          testlist.size();  // no SIGSEGV !?\n          testlist.push_back( ptr );   // SIGSEGV here when race condition\n          qDebug() &lt;&lt; \"testlist size after:\" &lt;&lt; testlist.size();\n      }\n  };\n}  // TestCollector\n\n#define ADD_TEST(className) static TestCollector::UnitTestClass&lt;className&gt; test;\n\n#endif // UNITTESTCLASS_H\n</code></pre>\n\n<p><code>unittestclass.cpp</code>:</p>\n\n<pre><code>#include \"unittestclass.h\"\n\nnamespace TestCollector {\n\nstd::list&lt;std::shared_ptr&lt;QObject&gt;&gt; BaseClass::testlist;\n\nint BaseClass::listClasses( int argc, char *argv[] ) {\n    int result=0;\n\n    for( const auto c : testlist ) {\n        qDebug() &lt;&lt; \"got\" &lt;&lt; c.get()-&gt;metaObject()-&gt;className();\n    }\n    return result;\n}\n\n}  // TestCollector\n</code></pre>\n\n<p><code>main.cpp</code>:</p>\n\n<pre><code>#include \"unittestclass.h\"\n\nint main(int argc, char *argv[]) {\n    TestCollector::BaseClass base;\n    return base.listClasses( argc, argv );\n}\n</code></pre>\n\n<p>When I have <code>dummy0.cpp</code> before <code>unittestclass.cpp</code> the programme fails at <code>testlist.push_back(ptr)</code> [NB: interestingly enough, the <code>testlist.size()</code> in the line before <code>push_back</code> won't fail]. When <code>dummy0.cpp</code> appears later, everthing is fine. This hints to a problem that testlist might be used before it is initialised, when the order of object files is unfavourable!?</p>\n\n<p>How can I avoid depending on this order?</p>\n\n<p>[I currently use c++11, QtCreator 3.5.1, g++ 5.4.0, GNU ld 2.26.1.]</p>\n"}, {"tags": ["c++", "loops", "input", "aabb"], "comments": [{"owner": {"reputation": 774, "user_id": 11059346, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-eOFhuwfbeLw/AAAAAAAAAAI/AAAAAAAAC5g/I9X1kvk3q24/photo.jpg?sz=128", "display_name": "Esdras Xavier", "link": "https://stackoverflow.com/users/11059346/esdras-xavier"}, "edited": false, "score": 0, "creation_date": 1550670760, "post_id": 54787913, "comment_id": 96354245, "body": "I  think it&#39;s kind of hard you do that without using arrays. You should use it if you wanna multiple inputs into yout program"}, {"owner": {"reputation": 5074, "user_id": 5522303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c236ba3d52af53355a4d1a44a5145b04?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/5522303/kevin"}, "edited": false, "score": 0, "creation_date": 1550670983, "post_id": 54787913, "comment_id": 96354382, "body": "All you should need is the last box (which is the minimum box containing all previous shapes) and the next shape. With these you can calculate what the next minimum box should be. At the end of the input you print out these dimensions."}, {"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 1, "creation_date": 1550671016, "post_id": 54787913, "comment_id": 96354404, "body": "Why do you want to avoid using arrays?   Note that &quot;I don&#39;t understand how to use arrays&quot; is not a reason - because, although it takes a little effort, it is worth learning how to use arrays."}], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 11084348, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7608361c2a5b8929189475cafcd742fd?s=128&d=identicon&r=PG&f=1", "display_name": "eulerisgod", "link": "https://stackoverflow.com/users/11084348/eulerisgod"}, "edited": false, "score": 0, "creation_date": 1550675436, "post_id": 54788176, "comment_id": 96357268, "body": "how about if the geometries is not overlapping? I think we can&#39;t just &quot; replace &quot; the value"}, {"owner": {"reputation": 5074, "user_id": 5522303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c236ba3d52af53355a4d1a44a5145b04?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/5522303/kevin"}, "reply_to_user": {"reputation": 25, "user_id": 11084348, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7608361c2a5b8929189475cafcd742fd?s=128&d=identicon&r=PG&f=1", "display_name": "eulerisgod", "link": "https://stackoverflow.com/users/11084348/eulerisgod"}, "edited": false, "score": 0, "creation_date": 1550683264, "post_id": 54788176, "comment_id": 96362094, "body": "My analogy isn&#39;t perfect. If they don&#39;t entirely overlap then the minimum AABB will have to expand to fit everything."}, {"owner": {"reputation": 5074, "user_id": 5522303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c236ba3d52af53355a4d1a44a5145b04?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/5522303/kevin"}, "reply_to_user": {"reputation": 25, "user_id": 11084348, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7608361c2a5b8929189475cafcd742fd?s=128&d=identicon&r=PG&f=1", "display_name": "eulerisgod", "link": "https://stackoverflow.com/users/11084348/eulerisgod"}, "edited": false, "score": 0, "creation_date": 1550683910, "post_id": 54788176, "comment_id": 96362431, "body": "I added a picture to help explain it better"}, {"owner": {"reputation": 25, "user_id": 11084348, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7608361c2a5b8929189475cafcd742fd?s=128&d=identicon&r=PG&f=1", "display_name": "eulerisgod", "link": "https://stackoverflow.com/users/11084348/eulerisgod"}, "edited": false, "score": 0, "creation_date": 1550833003, "post_id": 54788176, "comment_id": 96425851, "body": "Thanks! I know the logic behind, but I just no idea how can I &quot; store &quot; the point in order to  &quot; compare &quot; its x, y value respectively. Would you feel free to give me some hints? Thanks"}, {"owner": {"reputation": 5074, "user_id": 5522303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c236ba3d52af53355a4d1a44a5145b04?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/5522303/kevin"}, "reply_to_user": {"reputation": 25, "user_id": 11084348, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7608361c2a5b8929189475cafcd742fd?s=128&d=identicon&r=PG&f=1", "display_name": "eulerisgod", "link": "https://stackoverflow.com/users/11084348/eulerisgod"}, "edited": false, "score": 0, "creation_date": 1550848379, "post_id": 54788176, "comment_id": 96434917, "body": "I&#39;m not sure what you mean. You can already store a box and a circle as shown in the code in your question. A point is just an x and y pair. Note that for points you just need to store one at a time - you can expand the minimum AABB as you read them in."}, {"owner": {"reputation": 25, "user_id": 11084348, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7608361c2a5b8929189475cafcd742fd?s=128&d=identicon&r=PG&f=1", "display_name": "eulerisgod", "link": "https://stackoverflow.com/users/11084348/eulerisgod"}, "edited": false, "score": 0, "creation_date": 1551099458, "post_id": 54788176, "comment_id": 96503796, "body": "I edited my code, I pass some test case but i dont know why when I put 3 points instead of 2 will lead to failed...."}], "tags": [], "owner": {"reputation": 5074, "user_id": 5522303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c236ba3d52af53355a4d1a44a5145b04?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/5522303/kevin"}, "is_accepted": true, "score": 2, "last_activity_date": 1550683898, "last_edit_date": 1550683898, "creation_date": 1550671351, "answer_id": 54788176, "question_id": 54787913, "link": "https://stackoverflow.com/questions/54787913/how-can-i-store-the-input-without-using-array/54788176#54788176", "title": "How can i store the input without using array?", "body": "<p>You don't need an array for this. As an analogy, imagine you are instead trying to find the minimum int from a list of ints (which is similar to what you're doing, but in one dimension instead of two). All you need to keep track of the minimum value is</p>\n\n<ol>\n<li>The current minimum of all previous values (<code>current</code>), and</li>\n<li>The next value (<code>value</code>).</li>\n</ol>\n\n<p>From those two values you can calculate the next minimum - <code>min(current, value)</code>, then grab the next value, calculate the minimum again, and so on. At the end of the input print out <code>current</code>. At no point do you need to store <em>all</em> values at once.</p>\n\n<p>For your question, replace <code>current</code> with the current minimum-sized AABB, <code>value</code> with the next shape, and <code>min</code> with a function that returns the minimum-sized AABB that contains both shapes.</p>\n\n<p><a href=\"https://i.stack.imgur.com/FE3aK.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/FE3aK.png\" alt=\"enter image description here\"></a></p>\n\n<p>In this image, you have 2 previous shapes (the 2 black boxes), the current minimum (the gray box), the next shape (the blue circle), and the next minimum (the red box) that you need to calculate, which contains both the gray box and the blue circle.</p>\n"}], "owner": {"reputation": 25, "user_id": 11084348, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7608361c2a5b8929189475cafcd742fd?s=128&d=identicon&r=PG&f=1", "display_name": "eulerisgod", "link": "https://stackoverflow.com/users/11084348/eulerisgod"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 122, "favorite_count": 0, "accepted_answer_id": 54788176, "answer_count": 1, "score": 0, "last_activity_date": 1551099527, "creation_date": 1550670560, "last_edit_date": 1551099527, "question_id": 54787913, "link": "https://stackoverflow.com/questions/54787913/how-can-i-store-the-input-without-using-array", "title": "How can i store the input without using array?", "body": "<p>The question required to compute a minimum-sized AABB for a set of input geometries.</p>\n\n<p>The types of geometries are listed below:</p>\n\n<ol>\n<li>Rectangle , center_x , center_y, width , height : R x y w h</li>\n<li>Circle, center_x, center_y, radius : C x y r</li>\n<li>Set of points, number of points, x_1, y_1 , ... , x_n , y_n : P n x_1 y_1 ... x_n y_n</li>\n<li><strong>#</strong> : indicates end of input</li>\n</ol>\n\n<hr>\n\n<p>The sample case are shown below:</p>\n\n<p>input: </p>\n\n<p>R 0 0 3 2<br>\n#</p>\n\n<p>output:</p>\n\n<p>0 0 3 2</p>\n\n<p>input: </p>\n\n<p>P 2 3 -2 -1 4</p>\n\n<p>C -0.5 3.2 1.6</p>\n\n<p>P 3 -1.5 3 3 3 5 3</p>\n\n<p>R 0 0 3 2</p>\n\n<p>#</p>\n\n<p>output:</p>\n\n<p>1.45 1.4 7.1 6.8</p>\n\n<hr>\n\n<p>I am wondering about how the sample case two run, as there are multi-input, how can I construct my AABB? However, how to avoid the situation that the variable being replace? </p>\n\n<p>For example,</p>\n\n<p>R 0 0 3 2</p>\n\n<p>R 1 2 4 5</p>\n\n<p>I just don't know how to avoid the replacement of the center_x, center_y , w and h.</p>\n\n<hr>\n\n<p>below are my code,</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;cstdlib&gt;\n\nusing namespace std;\nint main()\n{\n    int times, i;\n    char geo;\n    double center_x, center_y, w, h, r;\n    double box_LX = 0, box_RX = 0, box_DY = 0, box_UY = 0;\n    bool end;\n    end = false;\n    double LX, RX, UY, DY;\n\n\n    while (!end) {\n        cin &gt;&gt; geo;\n        if (geo == 'R') {\n            cin &gt;&gt; center_x &gt;&gt; center_y &gt;&gt; w &gt;&gt; h;\n            LX = (center_x - w / 2);\n            RX = (center_x + w / 2);\n            DY = (center_y - h / 2);\n            UY = (center_y + h / 2);\n            if (RX &gt; box_RX)\n                box_RX = RX;\n            if (LX &lt; box_LX)\n                box_LX = LX;\n            if (UY &gt; box_UY)\n                box_UY = UY;\n            if (DY &lt; box_DY)\n                box_DY = DY;\n        }\n        if (geo == 'C') {\n            cin &gt;&gt; center_x &gt;&gt; center_y &gt;&gt; r;\n            if (box_RX &lt; (center_x + r))\n                box_RX = center_x + r;\n            if (box_LX &gt; (center_x - r))\n                box_LX = center_x - r;\n            if (box_UY &lt; (center_y + r))\n                box_UY = center_y + r;\n            if (box_DY &lt; (center_y - r))\n                box_DY = center_y - r;\n        }\n        if (geo == 'P') {\n            cin &gt;&gt; times;\n            i = 0;\n            while (i != times) {\n                cin &gt;&gt; center_x &gt;&gt; center_y;\n                if (box_RX &lt; center_x)\n                    box_RX = center_x;\n                if (box_LX &gt; center_x)\n                    box_LX = center_x;\n                if (box_UY &lt; center_y)\n                    box_UY = center_y;\n                if (box_DY &gt; center_y)\n                    box_DY = center_y;\n                i++;\n            }\n        }\n        if (geo == '#') {\n            cout &lt;&lt; (box_LX+box_RX)/2 &lt;&lt; \" \" &lt;&lt; (box_DY+box_UY)/2 &lt;&lt; \" \" &lt;&lt; abs(box_LX - box_RX) &lt;&lt; \" \" &lt;&lt; abs(box_UY - box_DY) &lt;&lt; endl;\n            end = true;\n        }\n    }\n    return 0;\n}\n</code></pre>\n\n<p>Thanks a lot !!</p>\n"}, {"tags": ["c++", "struct", "reinterpret-cast"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1550670733, "post_id": 54787889, "comment_id": 96354222, "body": "How do you want to convert it? What should be the values of the members after the conversion? Btw <code>reinterpret_cast</code> is not the right way"}, {"owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "edited": false, "score": 3, "creation_date": 1550670737, "post_id": 54787889, "comment_id": 96354224, "body": "Are you sure about that structure? The pointers (and arrays of pointers) look wrong compared to your sample data."}, {"owner": {"reputation": 36513, "user_id": 752976, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/j7Uis.jpg?s=128&g=1", "display_name": "Bartek Banachewicz", "link": "https://stackoverflow.com/users/752976/bartek-banachewicz"}, "edited": false, "score": 1, "creation_date": 1550670761, "post_id": 54787889, "comment_id": 96354246, "body": "Are you sure you want <code>char*[11]</code>, and not <code>char[11]</code>? Anyway <code>Netherlands</code> has 11 characters, so you&#39;d need at least 12 if you wanted it to be null-terminated."}, {"owner": {"reputation": 15619, "user_id": 1548468, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0745dce203d52699e63a575b3103ad70?s=128&d=identicon&r=PG", "display_name": "Botje", "link": "https://stackoverflow.com/users/1548468/botje"}, "edited": false, "score": 0, "creation_date": 1550672053, "post_id": 54787889, "comment_id": 96355072, "body": "Have you tried the simplest possible approach that could work (ie pointer manipulation and the occasional <code>strncpy</code> into a pre-allocated memory arena? Computers are plenty fast. Or, if you can convince the other side to switch to protocol buffers, ..."}, {"owner": {"reputation": 23, "user_id": 3844275, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a530cb7648857e11ff4948b61836e972?s=128&d=identicon&r=PG&f=1", "display_name": "Fawad", "link": "https://stackoverflow.com/users/3844275/fawad"}, "edited": false, "score": 0, "creation_date": 1550672077, "post_id": 54787889, "comment_id": 96355092, "body": "ah sorry, I have corrected the structure and included the desired output, can you please look into it now? thanks"}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 0, "creation_date": 1550672395, "post_id": 54787889, "comment_id": 96355305, "body": "Are you sure it&#39;s not <code>char m_recordNo;</code> ? otherwise you are trying to get (at least) 23 bytes of data out of 19 bytes of input, and you end up with most likely an invalid pointer value."}, {"owner": {"reputation": 23, "user_id": 3844275, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a530cb7648857e11ff4948b61836e972?s=128&d=identicon&r=PG&f=1", "display_name": "Fawad", "link": "https://stackoverflow.com/users/3844275/fawad"}, "reply_to_user": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 0, "creation_date": 1550672508, "post_id": 54787889, "comment_id": 96355376, "body": "@Caleth yes, you are right. corrected"}, {"owner": {"reputation": 1972, "user_id": 1999585, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1dda72602caeb3b96c5911806f5db3e6?s=128&d=identicon&r=PG", "display_name": "Bogdan Doicin", "link": "https://stackoverflow.com/users/1999585/bogdan-doicin"}, "edited": false, "score": 0, "creation_date": 1550672597, "post_id": 54787889, "comment_id": 96355438, "body": "What if instead of &quot;Netherlands&quot; you have &quot;Papua-New Guinea&quot; or &quot;Italy&quot;?"}, {"owner": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 1, "creation_date": 1550672640, "post_id": 54787889, "comment_id": 96355468, "body": "For the output of <code>r.m_recordname = &quot;Netherlands3240382&quot;</code>, are you creating it by using <code>printf(&quot;r.m_recordname = \\&quot;%11.11s\\&quot;&quot;, r.m_recordname);&#39;</code>?"}, {"owner": {"reputation": 23, "user_id": 3844275, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a530cb7648857e11ff4948b61836e972?s=128&d=identicon&r=PG&f=1", "display_name": "Fawad", "link": "https://stackoverflow.com/users/3844275/fawad"}, "reply_to_user": {"reputation": 1972, "user_id": 1999585, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1dda72602caeb3b96c5911806f5db3e6?s=128&d=identicon&r=PG", "display_name": "Bogdan Doicin", "link": "https://stackoverflow.com/users/1999585/bogdan-doicin"}, "edited": false, "score": 0, "creation_date": 1550672761, "post_id": 54787889, "comment_id": 96355551, "body": "@BogdanDoicin this is an example string. the file I am dealing with has fixed line length of 200 bytes with positions defined for each entry according to international standard. and some how I have to read those bytes from the file and convert that stream into a structure. my actual structure contains more than 30 variables. Here I put a small struct for an example. thanks"}], "answers": [{"tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": false, "score": 1, "last_activity_date": 1550673599, "last_edit_date": 1592644375, "creation_date": 1550672827, "answer_id": 54788638, "question_id": 54787889, "link": "https://stackoverflow.com/questions/54787889/convert-char-to-structure-in-c/54788638#54788638", "title": "convert char* to structure in c++", "body": "<blockquote>\n<p>I have used reinterpret_cast</p>\n</blockquote>\n<p><code>reinterpret_cast</code> cannot be used for this. Your usage has undefined behaviour. The following would be well defined:</p>\n<pre><code>record r; // create a record object\nstd::memcpy(&amp;r, line, sizeof r);\n</code></pre>\n<p>Caveats:</p>\n<ul>\n<li>The strings are not null terminated!</li>\n<li><code>sizeof(RType)</code> must be 1</li>\n<li>The input buffer must not be shorter than <code>sizeof r</code>.</li>\n</ul>\n<hr />\n<blockquote>\n<p>but I am getting instead the following</p>\n<pre><code>r.m_recordname = &quot;Netherlands3240382&quot;\n</code></pre>\n</blockquote>\n<p><code>Netherlands3240382</code> does not fit inside the member <code>m_recordname</code>, and therefore that cannot possibly be the state of the object. The issue must be in the way the output is generated. My suspicion is that the string is being treated as if it were null-terminated, despite it not being so.</p>\n"}, {"comments": [{"owner": {"reputation": 23, "user_id": 3844275, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a530cb7648857e11ff4948b61836e972?s=128&d=identicon&r=PG&f=1", "display_name": "Fawad", "link": "https://stackoverflow.com/users/3844275/fawad"}, "edited": false, "score": 0, "creation_date": 1550673024, "post_id": 54788644, "comment_id": 96355720, "body": "I need not to print it but to actually have it in the structure correct."}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "reply_to_user": {"reputation": 23, "user_id": 3844275, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a530cb7648857e11ff4948b61836e972?s=128&d=identicon&r=PG&f=1", "display_name": "Fawad", "link": "https://stackoverflow.com/users/3844275/fawad"}, "edited": false, "score": 0, "creation_date": 1550673116, "post_id": 54788644, "comment_id": 96355778, "body": "@Fawad You can&#39;t fit 12 <code>char</code>s into a <code>char[11]</code>. Your example is (probably) correct, the tool you are using to observe its value is just assuming there will be a null terminator."}, {"owner": {"reputation": 23, "user_id": 3844275, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a530cb7648857e11ff4948b61836e972?s=128&d=identicon&r=PG&f=1", "display_name": "Fawad", "link": "https://stackoverflow.com/users/3844275/fawad"}, "edited": false, "score": 0, "creation_date": 1550673325, "post_id": 54788644, "comment_id": 96355915, "body": "yes, true but if I increase the size to char[12] it is not going to help as it would get the next byte instead. can there be another way other than using reinterpret_cast?"}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "reply_to_user": {"reputation": 23, "user_id": 3844275, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a530cb7648857e11ff4948b61836e972?s=128&d=identicon&r=PG&f=1", "display_name": "Fawad", "link": "https://stackoverflow.com/users/3844275/fawad"}, "edited": false, "score": 1, "creation_date": 1550673514, "post_id": 54788644, "comment_id": 96356039, "body": "@Fawad You <b>don&#39;t need</b> a null at the end of a <code>char[11]</code>. Just don&#39;t pass it to anything expecting a null-terminated string"}], "tags": [], "owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "is_accepted": false, "score": 0, "last_activity_date": 1550672842, "creation_date": 1550672842, "answer_id": 54788644, "question_id": 54787889, "link": "https://stackoverflow.com/questions/54787889/convert-char-to-structure-in-c/54788644#54788644", "title": "convert char* to structure in c++", "body": "<p>Assuming that <code>RType</code> is a <code>char</code> backed enum type (or an alias for some <code>char</code> type), you <em>can</em> <code>memcpy</code> your input into a <code>record</code> object. You may also be able to trick your compiler into doing what you intend with the <code>reinterpret_cast</code>.</p>\n\n<p>The problem you are experience however, sounds like you are <em>observing</em> the values in this <code>record</code> object via functions that assume null terminated strings. You should instead use functions that accept a length.</p>\n\n<pre><code>printf(\"r.m_rectype = \\\"%d\\\"\", r.m_rectype);\nprintf(\"r.m_recordname = \\\"%11.11s\\\"\", r.m_recordname);\nprintf(\"r.m_recordNo = \\\"%d\\\"\", r.m_recordNo);\nprintf(\"r.m_record_date = \\\"%6.6s\\\"\", r.m_record_date);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "is_accepted": false, "score": 0, "last_activity_date": 1550674663, "creation_date": 1550674663, "answer_id": 54789229, "question_id": 54787889, "link": "https://stackoverflow.com/questions/54787889/convert-char-to-structure-in-c/54789229#54789229", "title": "convert char* to structure in c++", "body": "<p>Strictly speaking the Standard gives no guarantees about padding between elements of a <code>struct</code>, other than that there will be no padding at the beginning. So, even though your <em>particular</em> struct is unlikely to have padding - being (I assume) all character types, to be safe, you can do something like this:</p>\n\n<pre><code>template&lt;typename Pod&gt;\nchar const* pod_copy(char const* p, Pod&amp; pod)\n{\n    static_assert(std::is_pod_v&lt;Pod&gt;, \"Must be Plain Old Data type\");\n\n    std::copy(p, p + sizeof(pod), reinterpret_cast&lt;char*&gt;(&amp;pod));\n    return p + sizeof(pod);\n}\n\nstruct record{\n    RType m_rectype;\n    char m_recordname[11];\n    char m_recordNo;\n    char m_record_date[6];\n};\n\nint main()\n{\n    record r;\n\n    auto line = \"1Netherlands3240382\";\n\n    auto p = line;\n\n    p = pod_copy(p, r.m_rectype);\n    p = pod_copy(p, r.m_recordname);\n    p = pod_copy(p, r.m_recordNo);\n    p = pod_copy(p, r.m_record_date);\n\n    // .. rest of program\n}\n</code></pre>\n\n<p>This should be very quick because <code>pos_copy</code> should inline well.</p>\n"}], "owner": {"reputation": 23, "user_id": 3844275, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a530cb7648857e11ff4948b61836e972?s=128&d=identicon&r=PG&f=1", "display_name": "Fawad", "link": "https://stackoverflow.com/users/3844275/fawad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 439, "favorite_count": 0, "answer_count": 3, "score": -4, "last_activity_date": 1550674663, "creation_date": 1550670493, "last_edit_date": 1550673179, "question_id": 54787889, "link": "https://stackoverflow.com/questions/54787889/convert-char-to-structure-in-c", "title": "convert char* to structure in c++", "body": "<p>I have the following structure</p>\n\n<pre><code>struct record{\nRType m_rectype;\nchar m_recordname[11];\nchar m_recordNo;\nchar m_record_date[6];\n}\n</code></pre>\n\n<p>and I have a following line of char* type</p>\n\n<pre><code>line = \"1Netherlands3240382\"\n</code></pre>\n\n<p>How can I covert this line into the structure. Performance is important as I have a huge data to process.</p>\n\n<p>I have used reinterpret_cast but the array elements of the struct or not null terminated.</p>\n\n<pre><code>record r = reinterpret_cast&lt;const record* &gt;(line)\n</code></pre>\n\n<p>Edit: the final results should be as following</p>\n\n<pre><code>r.m_rectype = \"1\"\nr.m_recordname = \"Netherlands\"\nr.m_recordNo = \"3\"\nr.m_record_date = \"240382\"\n</code></pre>\n\n<p>but I am getting instead the following</p>\n\n<pre><code>r.m_rectype = \"1\"\nr.m_recordname = \"Netherlands3240382\"\nr.m_recordNo = \"3\"\nr.m_record_date = \"240382\"\n</code></pre>\n\n<p>Thanks</p>\n"}, {"tags": ["c++", "collision"], "comments": [{"owner": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "edited": false, "score": 0, "creation_date": 1550671273, "post_id": 54787861, "comment_id": 96354559, "body": "what does <code>resolve_collisions</code> do? Please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}, {"owner": {"reputation": 1, "user_id": 11090352, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-P2A8EU86DP8/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQMOP4ckApQr5uWh9nzWEWwaWviKiA/mo/photo.jpg?sz=128", "display_name": "nb 37", "link": "https://stackoverflow.com/users/11090352/nb-37"}, "reply_to_user": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "edited": false, "score": 0, "creation_date": 1550671738, "post_id": 54787861, "comment_id": 96354861, "body": "i just updated the post with resole_collisions() method"}, {"owner": {"reputation": 9311, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1550674062, "post_id": 54787861, "comment_id": 96356383, "body": "I don&#39;t know the library you are using, but shouldn&#39;t it be better to start the nested loop in the first snippet at <code>j = i + 1</code> to avoid duplicate collision checks on the same pair of objects?"}, {"owner": {"reputation": 1, "user_id": 11090352, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-P2A8EU86DP8/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQMOP4ckApQr5uWh9nzWEWwaWviKiA/mo/photo.jpg?sz=128", "display_name": "nb 37", "link": "https://stackoverflow.com/users/11090352/nb-37"}, "edited": false, "score": 0, "creation_date": 1550678878, "post_id": 54787861, "comment_id": 96359480, "body": "i&#39;m just using SDL&#39;s rects and a simple AABB, but the problem i think is just in the checks, i think if i start at <b>j = i + 1</b> then i will not check the objects that are before <b>i</b> for example: i have 5 elements and i is at index 3 then <b>j</b> will be 4, i this way i will not check anymore if <b>i</b> is intersecting with <b>i - 1</b> etc.. because <b>j</b> will be always at <b>j + 1</b> no?"}], "owner": {"reputation": 1, "user_id": 11090352, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-P2A8EU86DP8/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQMOP4ckApQr5uWh9nzWEWwaWviKiA/mo/photo.jpg?sz=128", "display_name": "nb 37", "link": "https://stackoverflow.com/users/11090352/nb-37"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 45, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1550671715, "creation_date": 1550670429, "last_edit_date": 1550671715, "question_id": 54787861, "link": "https://stackoverflow.com/questions/54787861/2d-collisions-check-between-3-and-more-objects", "title": "2D collisions check between 3 and more objects", "body": "<p>i've got a problem on my collision Check Algorithm.\nThe problem is when i try to resolve collisions between 3 objects, 1 of them is still not colliding and not resolving collisions, here's the code:</p>\n\n<pre><code>void check_collisions(engine_t* engine)\n{\n    for (int i = 0; i &lt; engine-&gt;actor_count; i++)\n    {\n        actor_t* first = (actor_t*)engine-&gt;collision_pairs-&gt;data[i];\n        collider_t* a = (collider_t*)get_component_by_name(first, \"collider\");\n\n        for(int j = 0; j &lt; engine-&gt;actor_count; j++)\n        {\n            actor_t* second = (actor_t*)engine-&gt;collision_pairs-&gt;data[j];\n\n            if(second == first)\n                continue;\n\n            collider_t* b = (collider_t*)get_component_by_name(second, \"collider\");\n\n            hit_state_t hit = aabb(a, b);\n\n            resolve_collisions(a, b, hit.normal);\n        }\n    }\n}\n</code></pre>\n\n<p>The problem is that when for example: i have A, B, C</p>\n\n<p>A could collide with B and C at the same frame time, it seems that when more object are colliding the first one (first) will not be calculated anymore.. any idea?</p>\n\n<pre><code>void resolve_collisions(collider_t* a, collider_t* b, vec2_t normal)\n{\n    //Stop rigidbody\n    vec2_t position = a-&gt;owner-&gt;transform.position;\n    vec2_t position2 = b-&gt;owner-&gt;transform.position;\n    rigid_body_t* rb = (rigid_body_t*)get_component_by_name(a-&gt;owner, \"rigid_body\");\n\n    // if(!rb) { SDL_Log(\"rigid_body not while resolving collisions\"); return; }\n\n    //hit from dx\n    if (normal.x &gt; 0.0f &amp;&amp; position.x &lt; b-&gt;owner-&gt;transform.position.x + b-&gt;size.x)\n    {\n        rb-&gt;velocity.x = 0.0f;\n        // SDL_Log(\"collided dx\");\n        position.x = (b-&gt;owner-&gt;transform.position.x + b-&gt;size.x) + 0.7f;\n    }\n\n    //hit from sx\n    if (normal.x &lt; 0.0f &amp;&amp; position.x + a-&gt;size.x &gt; b-&gt;owner-&gt;transform.position.x)\n    {\n        rb-&gt;velocity.x = 0.0f;\n\n        float offset = b-&gt;size.x - a-&gt;size.x;\n        float offset2 = a-&gt;size.x - b-&gt;size.x;\n        // SDL_Log(\"collided sx\");\n        position.x = (b-&gt;owner-&gt;transform.position.x - b-&gt;size.x) + offset;\n        position2.x = (a-&gt;owner-&gt;transform.position.x - a-&gt;size.x) + offset2;\n    }\n\n    //hit from top\n    if (normal.y &lt; 0.0f &amp;&amp; position.y + a-&gt;size.y &gt; b-&gt;owner-&gt;transform.position.y)\n    {\n        rb-&gt;velocity.y = 0.0f;\n        float offset = b-&gt;size.y - a-&gt;size.y;\n        position.y = (b-&gt;owner-&gt;transform.position.y - b-&gt;size.y) + offset;\n    }\n\n    //hit from bottom\n    if (normal.y &gt; 0.0f &amp;&amp; position.y &lt; b-&gt;owner-&gt;transform.position.y + b-&gt;size.y)\n    {\n        rb-&gt;velocity.y = 0.0f;\n        // SDL_Log(\"collided bottom\");\n        position.y = (b-&gt;owner-&gt;transform.position.y + b-&gt;size.y) + 0.7f;\n    }\n\n    //change pos\n    a-&gt;owner-&gt;transform.position = position;\n}\n</code></pre>\n\n<p>any help would be much appreciated!\n-Thanks</p>\n"}, {"tags": ["c++", "inheritance", "c++17", "move-semantics", "emplace"], "answers": [{"comments": [{"owner": {"reputation": 45749, "user_id": 21974, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/61d62f97373c96dea8ad1e774b127cdd?s=128&d=identicon&r=PG", "display_name": "ypnos", "link": "https://stackoverflow.com/users/21974/ypnos"}, "edited": false, "score": 0, "creation_date": 1550672392, "post_id": 54788031, "comment_id": 96355302, "body": "Thank you, I tried it but had other problems in my code, and in the example code I didn&#39;t think about it anymore."}, {"owner": {"reputation": 45749, "user_id": 21974, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/61d62f97373c96dea8ad1e774b127cdd?s=128&d=identicon&r=PG", "display_name": "ypnos", "link": "https://stackoverflow.com/users/21974/ypnos"}, "edited": false, "score": 0, "creation_date": 1550676152, "post_id": 54788031, "comment_id": 96357772, "body": "I also realized that I can save myself all the trouble by using unique_ptrs."}, {"owner": {"reputation": 7262, "user_id": 4955498, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-DQswbNCOBTs/AAAAAAAAAAI/AAAAAAAAADE/avTd-sX467I/photo.jpg?sz=128", "display_name": "Michael Veksler", "link": "https://stackoverflow.com/users/4955498/michael-veksler"}, "reply_to_user": {"reputation": 45749, "user_id": 21974, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/61d62f97373c96dea8ad1e774b127cdd?s=128&d=identicon&r=PG", "display_name": "ypnos", "link": "https://stackoverflow.com/users/21974/ypnos"}, "edited": false, "score": 0, "creation_date": 1550676918, "post_id": 54788031, "comment_id": 96358242, "body": "@ypnos that will also work, since unique_ptrs are already movable. Note however, that if this is performance critical code, then the extra memory management might affect performance"}], "tags": [], "owner": {"reputation": 7262, "user_id": 4955498, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-DQswbNCOBTs/AAAAAAAAAAI/AAAAAAAAADE/avTd-sX467I/photo.jpg?sz=128", "display_name": "Michael Veksler", "link": "https://stackoverflow.com/users/4955498/michael-veksler"}, "is_accepted": true, "score": 3, "last_activity_date": 1550671679, "last_edit_date": 1550671679, "creation_date": 1550670885, "answer_id": 54788031, "question_id": 54787851, "link": "https://stackoverflow.com/questions/54787851/emplace-object-derived-from-non-copyable-into-vector/54788031#54788031", "title": "Emplace object derived from non-copyable into vector", "body": "<p>You need:</p>\n\n<pre><code>struct A : OnlyMove\n{\n    A(int){}\n    A(A&amp;&amp;) = default;  // need this\n    ~A() {} \n}; \n</code></pre>\n\n<p>When you introduce the desctructor, the move constructor disappears. Without the move constructor or a copy constructor, it can't be placed in a vector.</p>\n\n<p>EDIT: the move constructor is best if it is <code>noexcept</code>, otherwise <code>std::vector::resize</code> and <code>std::vector::push_back</code> have no guarantees when exceptions are thrown.</p>\n"}], "owner": {"reputation": 45749, "user_id": 21974, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/61d62f97373c96dea8ad1e774b127cdd?s=128&d=identicon&r=PG", "display_name": "ypnos", "link": "https://stackoverflow.com/users/21974/ypnos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "closed_date": 1550672348, "accepted_answer_id": 54788031, "answer_count": 1, "score": 1, "last_activity_date": 1550671679, "creation_date": 1550670414, "question_id": 54787851, "link": "https://stackoverflow.com/questions/54787851/emplace-object-derived-from-non-copyable-into-vector", "closed_reason": "Duplicate", "title": "Emplace object derived from non-copyable into vector", "body": "<p>I have objects that holds pointers and shares them with others. Moving them is fine, but copying not. I would like to store them in vectors and maps. The following code works <strong>only</strong> when <code>A</code> has no destructor. However I would need a destructor to clean up my pointers.</p>\n\n<pre><code>#include &lt;vector&gt;\n\nstruct OnlyMove\n{\n    OnlyMove(const OnlyMove&amp;) = delete;\n    OnlyMove&amp; operator=(const OnlyMove&amp;) = delete;\n    OnlyMove(OnlyMove&amp;&amp;) = default;\n    OnlyMove&amp; operator=(OnlyMove&amp;&amp;) = default;\n\nprotected:\n    OnlyMove() = default;\n};\n\nstruct A : OnlyMove\n{\n    A(int){}\n    ~A(){} // makes compilation fail\n};\n\nint main()\n{\n    std::vector&lt;A&gt; y;\n    y.emplace_back(1);\n}\n</code></pre>\n\n<p>The error when I <em>have</em> a destructor:</p>\n\n<blockquote>\n  <p>/usr/local/include/c++/8.2.0/bits/stl_construct.h: In instantiation of 'void std::_Construct(_T1*, _Args&amp;&amp; ...) [with _T1 = A; _Args = {A}]':\n  \u2026\n  error: use of deleted function 'OnlyMove::OnlyMove(const OnlyMove&amp;)'</p>\n</blockquote>\n\n<p>I don't understand why. What role does the destructor play here?</p>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/64d31f5b000f4bcc\" rel=\"nofollow noreferrer\">Live Demo</a></p>\n"}, {"tags": ["c++", "regex", "c++11", "parsing"], "comments": [{"owner": {"reputation": 9602, "user_id": 7151494, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-a_FzvY-b2O0/AAAAAAAAAAI/AAAAAAAAAEw/kNwilSAvQTI/photo.jpg?sz=128", "display_name": "Fureeish", "link": "https://stackoverflow.com/users/7151494/fureeish"}, "edited": false, "score": 3, "creation_date": 1550669955, "post_id": 54787642, "comment_id": 96353723, "body": "Instead of using <code>regex</code>, I would advise using <code>std::istringstream</code> and its <a href=\"https://en.cppreference.com/w/cpp/io/basic_istream/operator_gtgt\" rel=\"nofollow noreferrer\"><code>operator &gt;&gt;</code></a>. In particular, pay attention to <a href=\"https://en.cppreference.com/w/cpp/io/basic_istream/operator_gtgt#Example\" rel=\"nofollow noreferrer\">this example</a>."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1550670100, "post_id": 54787642, "comment_id": 96353822, "body": "Use a <code>std::vector</code> unless you know at compile time that there will be 14 elements.  Then use <code>std::array</code>"}, {"owner": {"reputation": 655, "user_id": 9345938, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-XVV2JO7Xl1M/AAAAAAAAAAI/AAAAAAAAFus/a44EGq2HBC0/photo.jpg?sz=128", "display_name": "Aureliano Guedes", "link": "https://stackoverflow.com/users/9345938/aureliano-guedes"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1550671303, "post_id": 54787642, "comment_id": 96354580, "body": "@NathanOliver it always have 14 elements."}, {"owner": {"reputation": 655, "user_id": 9345938, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-XVV2JO7Xl1M/AAAAAAAAAAI/AAAAAAAAFus/a44EGq2HBC0/photo.jpg?sz=128", "display_name": "Aureliano Guedes", "link": "https://stackoverflow.com/users/9345938/aureliano-guedes"}, "reply_to_user": {"reputation": 9602, "user_id": 7151494, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-a_FzvY-b2O0/AAAAAAAAAAI/AAAAAAAAAEw/kNwilSAvQTI/photo.jpg?sz=128", "display_name": "Fureeish", "link": "https://stackoverflow.com/users/7151494/fureeish"}, "edited": false, "score": 0, "creation_date": 1550671308, "post_id": 54787642, "comment_id": 96354582, "body": "@Fureeish thanks, it seems I can use, but I don&#39;t understood how to put it in array instead variables, I know would be better if I create the variables as it are (int and double) but since I don&#39;t process the variables (just print tab separated in other order) it may be filled as string itself."}, {"owner": {"reputation": 9602, "user_id": 7151494, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-a_FzvY-b2O0/AAAAAAAAAAI/AAAAAAAAAEw/kNwilSAvQTI/photo.jpg?sz=128", "display_name": "Fureeish", "link": "https://stackoverflow.com/users/7151494/fureeish"}, "edited": false, "score": 0, "creation_date": 1550671477, "post_id": 54787642, "comment_id": 96354693, "body": "So what&#39;s the actual question? How do you provide this string of data? Do you input (always 14) numbers separated by tabulators (note - <i>tab</i> is <b>not</b> the same as <i>couple of spaces</i>, but it wouldn&#39;t matter in this case) or do you have them already stored, as in the question, in some <code>std::string</code>? Answering this question is likely to allow me to answer the whole question with examples."}, {"owner": {"reputation": 655, "user_id": 9345938, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-XVV2JO7Xl1M/AAAAAAAAAAI/AAAAAAAAFus/a44EGq2HBC0/photo.jpg?sz=128", "display_name": "Aureliano Guedes", "link": "https://stackoverflow.com/users/9345938/aureliano-guedes"}, "reply_to_user": {"reputation": 9602, "user_id": 7151494, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-a_FzvY-b2O0/AAAAAAAAAAI/AAAAAAAAAEw/kNwilSAvQTI/photo.jpg?sz=128", "display_name": "Fureeish", "link": "https://stackoverflow.com/users/7151494/fureeish"}, "edited": false, "score": 0, "creation_date": 1550671701, "post_id": 54787642, "comment_id": 96354833, "body": "@Fureeish This string is extracted using regex <code>regex hmmertable(&quot;^[[:space:]]+[[:digit:]]+[[:space:]]+[!\\?][[:spa&zwnj;&#8203;ce:]]+(.+)$&quot;);</code> that ignore all other lines from file with different patterns"}, {"owner": {"reputation": 655, "user_id": 9345938, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-XVV2JO7Xl1M/AAAAAAAAAAI/AAAAAAAAFus/a44EGq2HBC0/photo.jpg?sz=128", "display_name": "Aureliano Guedes", "link": "https://stackoverflow.com/users/9345938/aureliano-guedes"}, "reply_to_user": {"reputation": 9602, "user_id": 7151494, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-a_FzvY-b2O0/AAAAAAAAAAI/AAAAAAAAAEw/kNwilSAvQTI/photo.jpg?sz=128", "display_name": "Fureeish", "link": "https://stackoverflow.com/users/7151494/fureeish"}, "edited": false, "score": 0, "creation_date": 1550672152, "post_id": 54787642, "comment_id": 96355142, "body": "@Fureeish and stored this way <code>regex_search(line,result,hmmertable);</code>"}], "answers": [{"tags": [], "owner": {"reputation": 9602, "user_id": 7151494, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-a_FzvY-b2O0/AAAAAAAAAAI/AAAAAAAAAEw/kNwilSAvQTI/photo.jpg?sz=128", "display_name": "Fureeish", "link": "https://stackoverflow.com/users/7151494/fureeish"}, "is_accepted": true, "score": 3, "last_activity_date": 1550672483, "creation_date": 1550672483, "answer_id": 54788539, "question_id": 54787642, "link": "https://stackoverflow.com/questions/54787642/c-put-results-from-parser-to-array/54788539#54788539", "title": "C++ put results from parser to array", "body": "<p>Assuming that this data is already contained in a <code>std::string</code>, I would propose a solution using <a href=\"https://en.cppreference.com/w/cpp/io/basic_stringstream\" rel=\"nofollow noreferrer\"><code>std::stringstream</code></a>, in particular, <code>std::istringstream</code>.</p>\n\n<p>I can see that you have both real numbers (<code>104.8</code>, <code>7.8e-33</code>) and strings (<code>..</code>), which, I assumed, you also count as separate and valid tokens. In this case, we can divide your data in separate <code>std::string</code>s:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;sstream&gt; // std::stringstream family\n#include &lt;array&gt;\n#include &lt;string&gt;\n\nint main() {\n    std::string data{\"104.8  10.9   7.8e-33   2.6e-29      59\" // string concatenation\n                     \"248 ..      46     230 ..      20   336 .. 0.87\"};\n\n    std::istringstream stream{data}; // helper stream\n\n    // Assuming that we're certain that *data* holds exactly 14 tokens, we can\n    // use a simple loop. Otherwise we would've needed to check stream's state\n    // after every operation.\n\n    std::array&lt;std::string, 14&gt; tokens{};\n\n    for(std::size_t i{0}; i &lt; 14; ++i) {\n        stream &gt;&gt; tokens[i];\n    }\n\n    // lastly, we can print the results:\n\n    for(const auto&amp; token : tokens) {\n        std::cout &lt;&lt; token &lt;&lt; ' ';\n    }\n}\n</code></pre>\n\n<p>This will print: <code>104.8 10.9 7.8e-33 2.6e-29 59248 .. 46 230 .. 20 336 .. 0.87</code>.</p>\n\n<p>Notice that the additional whitespaces between tokens disappeared.</p>\n"}], "owner": {"reputation": 655, "user_id": 9345938, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-XVV2JO7Xl1M/AAAAAAAAAAI/AAAAAAAAFus/a44EGq2HBC0/photo.jpg?sz=128", "display_name": "Aureliano Guedes", "link": "https://stackoverflow.com/users/9345938/aureliano-guedes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 54788539, "answer_count": 1, "score": 0, "last_activity_date": 1550672483, "creation_date": 1550669874, "question_id": 54787642, "link": "https://stackoverflow.com/questions/54787642/c-put-results-from-parser-to-array", "title": "C++ put results from parser to array", "body": "<p>I'm new in C++.  </p>\n\n<p>I'd like to know how can I parse a string and put result in an array.  </p>\n\n<p>So, imagine I have a string like this:\n<code>104.8  10.9   7.8e-33   2.6e-29      59     248 ..      46     230 ..      20   336 .. 0.87</code></p>\n\n<p>It is always the same stile, it means, 14 non <code>[:space:]</code> separated by variable number of spaces between then.</p>\n\n<p>I'd like to parse using regex and put this values within an array. Since we know how many matches we can set the array to length 14 <code>char array[14];</code></p>\n\n<p>Thanks in advance for any help.  </p>\n"}, {"tags": ["c++", "c++17", "c++-experimental"], "comments": [{"owner": {"reputation": 340, "user_id": 4764531, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-NDsJ48ulDfg/AAAAAAAAAAI/AAAAAAAAFtg/vfESlysaDC0/photo.jpg?sz=128", "display_name": "Antony Peacock", "link": "https://stackoverflow.com/users/4764531/antony-peacock"}, "edited": false, "score": 0, "creation_date": 1571481446, "post_id": 54787606, "comment_id": 103261249, "body": "Please note this issue has now been addressed in the reference implementation of polymophic_value.  Thanks for raising the discussion around this!"}], "answers": [{"comments": [{"owner": {"reputation": 98, "user_id": 9069718, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23533732cf917c9ddd285a94463a5c34?s=128&d=identicon&r=PG&f=1", "display_name": "V. Nazarenko", "link": "https://stackoverflow.com/users/9069718/v-nazarenko"}, "edited": false, "score": 0, "creation_date": 1550677156, "post_id": 54788823, "comment_id": 96358386, "body": "1: But it compiles! And it is used in production code. Forward declarations speed up compilations and it matters more than some &quot;prohibition agreement&quot;. 2: I could use my_favourite_non_std_container&lt;K, V&gt; in this example and the problem would persist 3: Do you mean looking for operator* by ADL?."}], "tags": [], "owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "is_accepted": true, "score": 5, "last_activity_date": 1550673447, "creation_date": 1550673447, "answer_id": 54788823, "question_id": 54787606, "link": "https://stackoverflow.com/questions/54787606/propagate-const-and-forward-declaration/54788823#54788823", "title": "propagate_const and forward declaration", "body": "<ol>\n<li><p>Instantiating a standard library template with an incomplete type is generally prohibited.</p></li>\n<li><p><code>std::map</code> is not an exception to that rule.</p></li>\n<li><p>Querying <code>decltype(*std::declval&lt;_Tp&amp;&gt;())</code> with <code>_Tp = std::unique_ptr&lt;std::map&lt;int, FWD&gt;&gt;</code> necessitates the instantiation of all associated classes of <code>_Tp</code> to look for potential friend <code>operator*</code> declarations.</p></li>\n<li><p>Among those associated classes is <code>std::map&lt;int, FWD&gt;</code>.</p></li>\n<li><p>Instantiation of <code>std::map&lt;int, FWD&gt;</code> invokes undefined behavior.</p></li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 340, "user_id": 4764531, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-NDsJ48ulDfg/AAAAAAAAAAI/AAAAAAAAFtg/vfESlysaDC0/photo.jpg?sz=128", "display_name": "Antony Peacock", "link": "https://stackoverflow.com/users/4764531/antony-peacock"}, "is_accepted": false, "score": 0, "last_activity_date": 1571239114, "creation_date": 1571239114, "answer_id": 58416687, "question_id": 54787606, "link": "https://stackoverflow.com/questions/54787606/propagate-const-and-forward-declaration/58416687#58416687", "title": "propagate_const and forward declaration", "body": "<p>I've submitted a patch to propagate_const that replaces the existing solution and address the issue like the above-proposed solution but that does not rely on SFINAE:</p>\n\n<pre><code>template&lt;class U&gt;\nstruct detect_element_type {\n    using type = typename U::element_type;\n};\n\ntemplate&lt;class U&gt;\nstruct detect_element_type&lt;U*&gt; {\n    using type = U;\n};\n\nusing element_type = typename detect_element_type&lt;T&gt;::type;\n</code></pre>\n"}], "owner": {"reputation": 98, "user_id": 9069718, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23533732cf917c9ddd285a94463a5c34?s=128&d=identicon&r=PG&f=1", "display_name": "V. Nazarenko", "link": "https://stackoverflow.com/users/9069718/v-nazarenko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 301, "favorite_count": 0, "accepted_answer_id": 54788823, "answer_count": 2, "score": 6, "last_activity_date": 1571239114, "creation_date": 1550669719, "last_edit_date": 1550671108, "question_id": 54787606, "link": "https://stackoverflow.com/questions/54787606/propagate-const-and-forward-declaration", "title": "propagate_const and forward declaration", "body": "<p>I've just run into curious std::experimental::propagate_const bug.\nThe following snippet demonstrates the problem</p>\n\n<pre><code>#include &lt;memory&gt;\n#include &lt;experimental/propagate_const&gt;\n#include &lt;map&gt;\n\nclass FWD;\n\n//compiles\nclass A\n{\n    std::unique_ptr&lt;FWD&gt; m;\n};\n\n//compiles\nclass B\n{\n    std::experimental::propagate_const&lt;std::unique_ptr&lt;FWD&gt;&gt; m;\n};\n\n//compiles\nclass C\n{\n    std::unique_ptr&lt;std::map&lt;int, FWD&gt;&gt; m;\n};\n\n//does not compile!\nclass D\n{\n    std::experimental::propagate_const&lt;std::unique_ptr&lt;std::map&lt;int, FWD&gt;&gt;&gt; m;\n};\n</code></pre>\n\n<p>So you can't just replace unique_ptr with propagating unique_ptr because sometimes your forward declarations will break it.</p>\n\n<p><strong>I would appreciate if someone would explain to me why compilation fails in current implementation of propagate_const</strong>. \nIt has something to do with </p>\n\n<pre><code>typedef remove_reference_t&lt;decltype(*std::declval&lt;_Tp&amp;&gt;())&gt; element_type;\n</code></pre>\n\n<p>Because workaround is:</p>\n\n<pre><code>template &lt;typename T, typename = void&gt;\nstruct get_element_type\n{\n  using type = std::remove_reference_t&lt;decltype(*std::declval&lt;T&amp;&gt;())&gt;;\n};\n\ntemplate &lt;typename T&gt;\nstruct get_element_type&lt;T, typename std::enable_if&lt;!std::is_void&lt;typename T::element_type&gt;::value&gt;::type&gt;\n{\n  using type = typename T::element_type;\n};\n\n// Namespaces and class declaration...\n\nusing element_type = typename get_element_type&lt;T&gt;::type;\n</code></pre>\n\n<p>Tested compilers: clang, gcc.</p>\n\n<p>P.S. I wonder whether compiler devs know about it or not.</p>\n"}, {"tags": ["c++", "winsock", "winsock2"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1550669609, "post_id": 54787490, "comment_id": 96353488, "body": "posix sockets ?"}, {"owner": {"reputation": 3734, "user_id": 3537677, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e05436d74c08a9efa7db860df7bbf01f?s=128&d=identicon&r=PG", "display_name": "Superlokkus", "link": "https://stackoverflow.com/users/3537677/superlokkus"}, "edited": false, "score": 0, "creation_date": 1550669928, "post_id": 54787490, "comment_id": 96353702, "body": "There is no <code>recv()</code> in standard C++, so until your specify the network API used, your question will be incomplete and not helpful for others."}], "answers": [{"comments": [{"owner": {"reputation": 1173, "user_id": 10805404, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68c8a89f2c1ea92ac8bb7a02028c6339?s=128&d=identicon&r=PG&f=1", "display_name": "Simon Doppler", "link": "https://stackoverflow.com/users/10805404/simon-doppler"}, "edited": false, "score": 0, "creation_date": 1550669887, "post_id": 54787621, "comment_id": 96353674, "body": "It would hang if the connection was not closed but left hanging by the other side though and it was a blocking socket (although that is a bit out of the scope of the question)."}, {"owner": {"reputation": 94195, "user_id": 410767, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/2c1dd4727d07c7dbb6ff8c3a83e400b5?s=128&d=identicon&r=PG", "display_name": "Tony Delroy", "link": "https://stackoverflow.com/users/410767/tony-delroy"}, "reply_to_user": {"reputation": 1173, "user_id": 10805404, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68c8a89f2c1ea92ac8bb7a02028c6339?s=128&d=identicon&r=PG&f=1", "display_name": "Simon Doppler", "link": "https://stackoverflow.com/users/10805404/simon-doppler"}, "edited": false, "score": 0, "creation_date": 1550669951, "post_id": 54787621, "comment_id": 96353717, "body": "@SimonDoppler: all such calls works from the perspective of the local side / of course there&#39;s a delay for the local status to reflect whatever&#39;s just happened on the other end, and it may be long."}], "tags": [], "owner": {"reputation": 94195, "user_id": 410767, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/2c1dd4727d07c7dbb6ff8c3a83e400b5?s=128&d=identicon&r=PG", "display_name": "Tony Delroy", "link": "https://stackoverflow.com/users/410767/tony-delroy"}, "is_accepted": false, "score": 0, "last_activity_date": 1550670151, "last_edit_date": 1550670151, "creation_date": 1550669772, "answer_id": 54787621, "question_id": 54787490, "link": "https://stackoverflow.com/questions/54787490/socket-recv-function/54787621#54787621", "title": "Socket recv() function", "body": "<p>If your <code>recv()</code> is based on BSD - as almost all are - it will return immediately if the connection is closed (per the local side's status), regardless of whether the socket is blocking or non-blocking.</p>\n"}, {"tags": [], "owner": {"reputation": 3734, "user_id": 3537677, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e05436d74c08a9efa7db860df7bbf01f?s=128&d=identicon&r=PG", "display_name": "Superlokkus", "link": "https://stackoverflow.com/users/3537677/superlokkus"}, "is_accepted": false, "score": 1, "last_activity_date": 1550671092, "last_edit_date": 1550671092, "creation_date": 1550670697, "answer_id": 54787961, "question_id": 54787490, "link": "https://stackoverflow.com/questions/54787490/socket-recv-function/54787961#54787961", "title": "Socket recv() function", "body": "<p><a href=\"https://docs.microsoft.com/en-us/windows/desktop/api/winsock/nf-winsock-recv\" rel=\"nofollow noreferrer\">As documented</a> depending of how the connection was closed it should more or less immediately with a return value of <code>SOCKET_ERROR</code> in a non graceful case and set <code>WSAGetLastError</code> to one of the possible reasons like <code>WSAENOTCONN</code> or would just return <code>0</code> in the graceful connection close scenario. This would be the same between blocking and nonblocking sockets.</p>\n\n<blockquote>\n  <p>If the socket is connection oriented and the remote side has shut down the connection gracefully, and all data has been received, a recv will complete immediately with zero bytes received. If the connection has been reset, a recv will fail with the error WSAECONNRESET.</p>\n</blockquote>\n\n<p>However, since I know the Windows API does not always work as documented, I recommend to test it.</p>\n"}, {"tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": false, "score": 0, "last_activity_date": 1550713393, "creation_date": 1550713393, "answer_id": 54797956, "question_id": 54787490, "link": "https://stackoverflow.com/questions/54787490/socket-recv-function/54797956#54797956", "title": "Socket recv() function", "body": "<p><code>recv()</code> will return 0 upon a <em>graceful</em> disconnect, ie the peer shutdown its end of the connection and its socket stack sent a <code>FIN</code> packet to your socket stack.  You are pretty much guaranteed to get this result immediately, whether you use a blocking or non-blocking socket.</p>\n\n<p><code>recv()</code> will return -1 on any other error, including an <em>abnormal</em> connection loss. \nYou need to use <code>WSAGetLastError()</code> to find out what actually happened.  For a lost connection on a blocking socket, you will usually get an error code such as <code>WSAECONNRESET</code> or <code>WSAECONNABORTED</code>.  For a lost connection on a non-blocking socket, it is possible that <code>recv()</code> may report an <code>WSAEWOULDBLOCK</code> error immediately and then report the actual error at some later time, maybe via <code>select()</code> with an exception <code>fd_set</code>, or an asynchronous notification, depending on how you implement your non-blocking logic.</p>\n\n<p>However, either way, you are NOT guaranteed to get a failure result on a lost connection in any timely manner!  It MAY take some time (seconds, minutes, can even be hours in <em>rare</em> cases) before the OS deems the connection is actually lost and invalidates the socket connection.  TCP is <em>designed</em> to recover lost connections when possible, so it has to account for temporary network outages and such, so there are internal timeouts.  You don't see that in your code, it happens in the background.</p>\n\n<p>If you don't want to wait for the OS to timeout internally, you can always use your own timeout in your code, such as via <code>select()</code>, <code>setsocktopt(SO_RCVTIMEO)</code>, TCP keep-alives (<code>setsockopt(SO_KEEPALIVE)</code> or <code>WSAIoCtl(SIO_KEEPALIVE_VALS)</code>), etc.  You may still not get a failure <em>immediately</em>, but you will get it sooner rather than later.</p>\n"}], "owner": {"reputation": 560, "user_id": 369287, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/cfc11b19543d00c713a5c96e03f45acc?s=128&d=identicon&r=PG", "display_name": "user369287", "link": "https://stackoverflow.com/users/369287/user369287"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 579, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1550713393, "creation_date": 1550669352, "last_edit_date": 1550680488, "question_id": 54787490, "link": "https://stackoverflow.com/questions/54787490/socket-recv-function", "title": "Socket recv() function", "body": "<p>In c++, in windows OS, on the recv() call for TCP socket  , if the socket connection is closed somehow, the recv() will return immediately or will it hang?</p>\n\n<p>What would be result(immediately returns or hangs)  in the blocking and non blocking socket?\nI am using socket version 2.</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["c++", "arm", "clang", "reverse-engineering"], "comments": [{"owner": {"reputation": 460, "user_id": 6725342, "user_type": "registered", "accept_rate": 64, "profile_image": "https://lh4.googleusercontent.com/-m4myAVu7PnE/AAAAAAAAAAI/AAAAAAAAAAk/4me79x2wrVY/photo.jpg?sz=128", "display_name": "jozols", "link": "https://stackoverflow.com/users/6725342/jozols"}, "edited": false, "score": 0, "creation_date": 1556799607, "post_id": 54787427, "comment_id": 98556479, "body": "This is actually unresolved LLVM bug reported here: <a href=\"https://bugs.llvm.org/show_bug.cgi?id=39413\" rel=\"nofollow noreferrer\">bugs.llvm.org/show_bug.cgi?id=39413</a>"}], "owner": {"reputation": 460, "user_id": 6725342, "user_type": "registered", "accept_rate": 64, "profile_image": "https://lh4.googleusercontent.com/-m4myAVu7PnE/AAAAAAAAAAI/AAAAAAAAAAk/4me79x2wrVY/photo.jpg?sz=128", "display_name": "jozols", "link": "https://stackoverflow.com/users/6725342/jozols"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 54, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1550669113, "creation_date": 1550669113, "question_id": 54787427, "link": "https://stackoverflow.com/questions/54787427/clang-7-shows-external-linkage-for-private-static-c-class-member-on-arm", "title": "Clang 7 shows external linkage for private static C++ class member on ARM", "body": "<p>Does it looks like a bug that Clang (versions 7 and 8 checked) builds private static member with external linkage in following case?:</p>\n\n<pre><code>namespace myns {\n    class myclass {\n    private:\n        static const std::vector&lt;string&gt; mylist;\n    ....\n    };\n};\n</code></pre>\n\n<p>I compile my library with --visibility=hidden to hide internal details of program. But for ARM target only (ARM64, x86 works as expected) symbol is still visible in compiled library:</p>\n\n<p>> rabin2 -s *.so | grep mylist</p>\n\n<p>vaddr=0x00788dfc paddr=0x00787dfc ord=084 fwd=NONE sz=12 bind=GLOBAL type=OBJECT name=myns::myclass::mylist</p>\n\n<p>Why would variable name be present in binary with --visibility=hidden if it's used internally in single class?</p>\n\n<p>Seems that variable name was not present in binary when I compiled with Clang 3.9 version.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 22777, "user_id": 133203, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Fp3hB.jpg?s=128&g=1", "display_name": "Federico klez Culloca", "link": "https://stackoverflow.com/users/133203/federico-klez-culloca"}, "edited": false, "score": 1, "creation_date": 1550668131, "post_id": 54787092, "comment_id": 96352554, "body": "Don&#39;t put it inside <code>cout</code>, just call it. Or have it return a <code>std::string</code> instead of printing it."}, {"owner": {"reputation": 16436, "user_id": 10411602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b534549770aedbc4d7eb03a39d740f6?s=128&d=identicon&r=PG&f=1", "display_name": "Blaze", "link": "https://stackoverflow.com/users/10411602/blaze"}, "edited": false, "score": 1, "creation_date": 1550668167, "post_id": 54787092, "comment_id": 96352583, "body": "change <code>void getInformation()</code> to <code>std::string getInformation()</code>. Instead of doing the print, make it return the stuff that it was going to print. Or perhaps you would have no qualms about just calling <code>contact.getInformation();</code> if you rename the function <code>printInformation</code>, as that better describes what it is doing."}, {"owner": {"reputation": 22777, "user_id": 133203, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Fp3hB.jpg?s=128&g=1", "display_name": "Federico klez Culloca", "link": "https://stackoverflow.com/users/133203/federico-klez-culloca"}, "edited": false, "score": 1, "creation_date": 1550668187, "post_id": 54787092, "comment_id": 96352601, "body": "Also, if you don&#39;t want to change neither the <code>main</code> nor the <code>getInformation</code> method, what else do you think you can change to avoid a problem caused by them?"}, {"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1550668211, "post_id": 54787092, "comment_id": 96352614, "body": "<a href=\"https://docs.microsoft.com/en-us/cpp/standard-library/overloading-the-output-operator-for-your-own-classes?view=vs-2017\" rel=\"nofollow noreferrer\">docs.microsoft.com/en-us/cpp/standard-library/&hellip;</a>"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 1, "creation_date": 1550668286, "post_id": 54787092, "comment_id": 96352659, "body": "The only way to make it right is to change one of the two things that make it wrong."}, {"owner": {"reputation": 11, "user_id": 11090099, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fcc0b4fb21272135e567597efd41c47?s=128&d=identicon&r=PG&f=1", "display_name": "J.corn", "link": "https://stackoverflow.com/users/11090099/j-corn"}, "reply_to_user": {"reputation": 1972, "user_id": 1999585, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1dda72602caeb3b96c5911806f5db3e6?s=128&d=identicon&r=PG", "display_name": "Bogdan Doicin", "link": "https://stackoverflow.com/users/1999585/bogdan-doicin"}, "edited": false, "score": 0, "creation_date": 1550668514, "post_id": 54787092, "comment_id": 96352793, "body": "The error message is Invalid operands to binary expression (&#39;std::__1::ostream&#39; (aka &#39;basic_ostream&lt;char&gt;&#39;) and &#39;void&#39;) @BogdanDoicin"}, {"owner": {"reputation": 11, "user_id": 11090099, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fcc0b4fb21272135e567597efd41c47?s=128&d=identicon&r=PG&f=1", "display_name": "J.corn", "link": "https://stackoverflow.com/users/11090099/j-corn"}, "reply_to_user": {"reputation": 22777, "user_id": 133203, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Fp3hB.jpg?s=128&g=1", "display_name": "Federico klez Culloca", "link": "https://stackoverflow.com/users/133203/federico-klez-culloca"}, "edited": false, "score": 0, "creation_date": 1550668628, "post_id": 54787092, "comment_id": 96352862, "body": "<code>std::ostream&amp; operator&lt;&lt;(std::ostream&amp; out, Contact&amp; contact)</code> would adding something like this work @FedericoklezCulloca"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1550668712, "post_id": 54787092, "comment_id": 96352927, "body": "@Joe.corn your last comment is unreadable, don&#39;t post code longer than one line in comments but instead <a href=\"https://stackoverflow.com/posts/54787092/edit\">edit</a>  your question and put all complementary information <i>there</i>"}, {"owner": {"reputation": 11, "user_id": 11090099, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fcc0b4fb21272135e567597efd41c47?s=128&d=identicon&r=PG&f=1", "display_name": "J.corn", "link": "https://stackoverflow.com/users/11090099/j-corn"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1550669053, "post_id": 54787092, "comment_id": 96353144, "body": "sorry about that @Jabberwocky I will do that in future edits"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1550669828, "post_id": 54787092, "comment_id": 96353636, "body": "@Joe.corn no need to edit your question and add a &quot;thank you&quot;. Rather upvote the answers you think are useful and accept the answer you think is the best one."}], "answers": [{"comments": [{"owner": {"reputation": 18197, "user_id": 4183191, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8ce0d78cc78f51ee79cec5088effe3ed?s=128&d=identicon&r=PG", "display_name": "Tasos Papastylianou", "link": "https://stackoverflow.com/users/4183191/tasos-papastylianou"}, "edited": false, "score": 0, "creation_date": 1550668701, "post_id": 54787226, "comment_id": 96352924, "body": "you are right, but this does not answer the actual question, and in fact is exactly what OP asked you should not suggest."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "reply_to_user": {"reputation": 18197, "user_id": 4183191, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8ce0d78cc78f51ee79cec5088effe3ed?s=128&d=identicon&r=PG", "display_name": "Tasos Papastylianou", "link": "https://stackoverflow.com/users/4183191/tasos-papastylianou"}, "edited": false, "score": 0, "creation_date": 1550668806, "post_id": 54787226, "comment_id": 96352992, "body": "@TasosPapastylianou what the OP is asking is not possible."}, {"owner": {"reputation": 18197, "user_id": 4183191, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8ce0d78cc78f51ee79cec5088effe3ed?s=128&d=identicon&r=PG", "display_name": "Tasos Papastylianou", "link": "https://stackoverflow.com/users/4183191/tasos-papastylianou"}, "edited": false, "score": 0, "creation_date": 1550669011, "post_id": 54787226, "comment_id": 96353110, "body": "Yes, exactly. I think that is what the answer to this question should explain. (+1)"}], "tags": [], "owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "is_accepted": false, "score": 4, "last_activity_date": 1550669232, "last_edit_date": 1550669232, "creation_date": 1550668493, "answer_id": 54787226, "question_id": 54787092, "link": "https://stackoverflow.com/questions/54787092/c-how-to-call-a-void-function-without-errors/54787226#54787226", "title": "C++ How to call a void function without errors?", "body": "<p>The name <code>getInformation</code> suggests it should, well, <em>get</em> the information and not <em>print</em> it.</p>\n\n<p>Therefore you probably want this:</p>\n\n<pre><code>  string getInformation() {\n    return  \"ID: \" + to_string(_id) + \"\\n\" +\n      \"NAME: \" + _name + \"\\n\" +\n      \"TEL: \" + _telephone + \"\\n\" +\n      \"AGE: \" + to_string(_age) + \"\\n\";\n  }\n</code></pre>\n\n<p>Instead of this:</p>\n\n<pre><code>  void getInformation() {\n    cout &lt;&lt; \"ID: \" + to_string(_id) + \"\\n\" +\n      \"NAME: \" + _name + \"\\n\" +\n      \"TEL: \" + _telephone + \"\\n\" +\n      \"AGE: \" + to_string(_age) + \"\\n\";\n  }\n</code></pre>\n\n<p>Not changing <code>main</code> nor <code>getInformation</code> is not possible.</p>\n"}, {"tags": [], "owner": {"reputation": 18197, "user_id": 4183191, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8ce0d78cc78f51ee79cec5088effe3ed?s=128&d=identicon&r=PG", "display_name": "Tasos Papastylianou", "link": "https://stackoverflow.com/users/4183191/tasos-papastylianou"}, "is_accepted": false, "score": 5, "last_activity_date": 1550668822, "creation_date": 1550668822, "answer_id": 54787339, "question_id": 54787092, "link": "https://stackoverflow.com/questions/54787092/c-how-to-call-a-void-function-without-errors/54787339#54787339", "title": "C++ How to call a void function without errors?", "body": "<p>What you are asking is not possible. The two conditions you have set (i.e. 1. Do not change the void function to another type, and 2. Do not alter the main method) make it impossible to change your code in some other way so as for the main function to produce the intended outcome. </p>\n\n<p>You can <em>either</em> alter your void function to one that returns something 'printable', e.g. a string, <em>or</em> you can keep your void function printing to cout directly, but then change the main function to call this on its own, outside the context of a <code>cout &lt;&lt;</code> construct.</p>\n\n<p>(Or, preferably, as has also been pointed in the comments, instead of void, overload the <code>&lt;&lt;</code> operator to make cout work with your specific object type)</p>\n"}, {"tags": [], "owner": {"reputation": 2354, "user_id": 9428851, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MBhDff_bdY0/AAAAAAAAAAI/AAAAAAAACAY/lx7DUTjS350/photo.jpg?sz=128", "display_name": "Victor Gubin", "link": "https://stackoverflow.com/users/9428851/victor-gubin"}, "is_accepted": false, "score": 6, "last_activity_date": 1550669075, "creation_date": 1550669075, "answer_id": 54787411, "question_id": 54787092, "link": "https://stackoverflow.com/questions/54787092/c-how-to-call-a-void-function-without-errors/54787411#54787411", "title": "C++ How to call a void function without errors?", "body": "<p>The code you've provided have many issues. You can avoid them if you read some good C++ book, my advice is Scott Meyers  Effective C++: 55 Specific Ways to Improve Your Programs and Designs.</p>\n\n<ol>\n<li>don't use using directive unless really necessary. In most cases for std namespace - it is not.</li>\n<li>Pass function arguments of non primitive type by reference/const reference rather by value or pointer</li>\n<li>Understand const keyword and it usage</li>\n<li>Understand constructor static initialization bocks</li>\n<li>Understand c++ streams</li>\n</ol>\n\n<p>This is how you code should looks like:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n\nclass Contact {\n\npublic:\n    Contact(int id,const std::string&amp; name,const std::string&amp; telephone, int age):\n        _id( id ),\n        _name( name ),\n        _telephone( telephone ),\n        _age( age )\n    {}\n\n    int id() const {\n        return _id;\n    }\n    std::string name() const {\n        return _name;\n    }\n    std::string telephone() const {\n        return _telephone;\n    }\n    int age() const {\n        return _age;\n    }\n\n\nprivate:\n    int _id;\n    std::string _name;\n    std::string _telephone;\n    int _age;\n\n};\n\nstd::ostream&amp; operator&lt;&lt;(std::ostream&amp; to,const Contact&amp; c)\n{\n    to &lt;&lt; \"ID: \" &lt;&lt; c.id() &lt;&lt; '\\n';\n    to &lt;&lt; \"NAME: \" &lt;&lt; c.name() &lt;&lt; '\\n';\n    to &lt;&lt; \"TEL: \" &lt;&lt; c.telephone() &lt;&lt; '\\n';\n    to &lt;&lt; \"AGE: \" &lt;&lt; c.age() &lt;&lt; '\\n';\n    to.flush();\n    return to;\n}\n\nint main(int argc, const char** argv)\n{\n    Contact contact = {1, \"Michael\", \"555-555-5555\", 15};\n    std::cout &lt;&lt; contact &lt;&lt; std::endl;\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 11090099, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fcc0b4fb21272135e567597efd41c47?s=128&d=identicon&r=PG&f=1", "display_name": "J.corn", "link": "https://stackoverflow.com/users/11090099/j-corn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 130, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1550669377, "creation_date": 1550668010, "last_edit_date": 1550669377, "question_id": 54787092, "link": "https://stackoverflow.com/questions/54787092/c-how-to-call-a-void-function-without-errors", "title": "C++ How to call a void function without errors?", "body": "<p>This is an assignment of mine that I picked to do but I am not sure how to fix the error message I am getting at <code>cout &lt;&lt; contact.getInformation() &lt;&lt; endl;</code>without changing the Void function to a different type or changing the main function (which I am trying to avoid). I think my lack of understanding is in how cout and void functions work together. I tried to remove the cout from the function but that did not work and the only way I could make the code run was when I replaced <code>cout &lt;&lt; contact.getInformation() &lt;&lt; endl;</code> with <code>contact.getInformation()</code> which I am trying to avoid. I just want the inside of the void function to print when I call <code>cout &lt;&lt; contact.getInformation() &lt;&lt; endl;</code>\nAny help is welcome! Thank you!</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;iostream&gt;\n#include &lt;string&gt;\n\nusing namespace std;\n\nclass Contact{\n\npublic:\n    Contact(int id, string name, string telephone, int age)\n    : _id{ id }, _name{ name }, _telephone{ telephone }, _age{ age } {}\n\n    int id() { return _id; }\n    string name() { return _name; }\n    string telephone() { return _telephone; }\n    int age() { return _age; }\n\n    void getInformation() {\n        cout &lt;&lt; \"ID: \" + to_string(_id) + \"\\n\" +\n        \"NAME: \" + _name + \"\\n\" +\n        \"TEL: \" + _telephone + \"\\n\" +\n        \"AGE: \" + to_string(_age) + \"\\n\";\n    }\nprivate:\n    int _id;\n    string _name;\n    string _telephone;\n    int _age;\n\n};\n\nint main() {\n    Contact contact{1, \"Michael\", \"555-555-5555\", 15};\n    cout &lt;&lt; contact.getInformation() &lt;&lt; endl;\n}. \n</code></pre>\n\n<p>EDIT: Thanks all! I see now that it is impossible to do with those restrictions.</p>\n"}, {"tags": ["c++", "xcode", "c++17", "libc++", "std-filesystem"], "comments": [{"owner": {"reputation": 82430, "user_id": 17833, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ExIEf.png?s=128&g=1", "display_name": "Petesh", "link": "https://stackoverflow.com/users/17833/petesh"}, "edited": false, "score": 1, "creation_date": 1550671325, "post_id": 54786973, "comment_id": 96354592, "body": "At the point of writing this question, XCode 10.2 is not publicly released. If the library is missing, then it&#39;s likely to be a bug, so file a radar."}], "answers": [{"tags": [], "owner": {"reputation": 2976, "user_id": 627587, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/b7225df5b0728daa170646a5c5a4bfda?s=128&d=identicon&r=PG", "display_name": "Louis Dionne", "link": "https://stackoverflow.com/users/627587/louis-dionne"}, "is_accepted": false, "score": 10, "last_activity_date": 1560527568, "last_edit_date": 1560527568, "creation_date": 1550868222, "answer_id": 54834871, "question_id": 54786973, "link": "https://stackoverflow.com/questions/54786973/what-library-to-link-to-for-stdfilesystem-with-xcode/54834871#54834871", "title": "What library to link to for std::filesystem with Xcode", "body": "<p>Xcode 10.2 does not contain the library support to implement <code>&lt;filesystem&gt;</code>. The reason why it was not included in Xcode 10.2 is that the implementation of <code>&lt;filesystem&gt;</code> did not have a stable ABI at the time.</p>\n\n<p>So the behavior is expected, however it would be nicer if the error was more explicit about why this happens.</p>\n\n<p><strong>EDIT: As of Xcode 11 and MacOS 10.15, <code>&lt;filesystem&gt;</code> is shipped in the main libc++.dylib and there's no need to link any additional library.</strong></p>\n"}], "owner": {"reputation": 3273, "user_id": 242552, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/08141339adc3cd0402b4f1fca059dda1?s=128&d=identicon&r=PG", "display_name": "leecbaker", "link": "https://stackoverflow.com/users/242552/leecbaker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1436, "favorite_count": 2, "answer_count": 1, "score": 4, "last_activity_date": 1560527568, "creation_date": 1550667592, "question_id": 54786973, "link": "https://stackoverflow.com/questions/54786973/what-library-to-link-to-for-stdfilesystem-with-xcode", "title": "What library to link to for std::filesystem with Xcode", "body": "<p>Xcode 10.2 now includes the <code>&lt;filesystem&gt;</code> header. However, when writing code using <code>std::filesystem</code>, I'm running into a lot of extra link errors.</p>\n\n<pre><code>Undefined symbols for architecture x86_64:\n  \"std::__1::__fs::filesystem::path::__filename() const\", referenced from:\n      std::__1::__fs::filesystem::path::filename() const in dump_zip.cpp.o\n      std::__1::__fs::filesystem::path::filename() const in libxp_parse.a(zipped.cpp.o)\n      std::__1::__fs::filesystem::path::remove_filename() in libxp_parse.a(zipped.cpp.o)\n      std::__1::__fs::filesystem::path::has_filename() const in libxp_parse.a(zipped.cpp.o)\n      std::__1::__fs::filesystem::path::has_filename() const in libxp_parse.a(acf.cpp.o)\n</code></pre>\n\n<p>I believe an extra library needs to be linked for filesystem support, but I can't identify what or where it is. Any idea what it is called?</p>\n\n<p>EDIT: libc++ says that <code>libc++fs</code> is required- however, that doesn't seem to be distributed with Xcode, at least not in the default search directories.</p>\n"}, {"tags": ["c++", "multithreading"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 7, "creation_date": 1550667331, "post_id": 54786875, "comment_id": 96352118, "body": "when you dont do multithreading your program runs in a single thread. maybe that already answers your question..."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1550667441, "post_id": 54786875, "comment_id": 96352181, "body": "A single thread can only do one thing at a time. It can&#39;t both read from and write to a variable simultaneously."}, {"owner": {"reputation": 33, "user_id": 11089694, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35bf96e31690ce46da660cac69fa4a83?s=128&d=identicon&r=PG&f=1", "display_name": "Culbuto", "link": "https://stackoverflow.com/users/11089694/culbuto"}, "edited": false, "score": 0, "creation_date": 1550667900, "post_id": 54786875, "comment_id": 96352421, "body": "Maybe my example was not clear then, sorry about that. While the loop indeed runs on a single thread, there are other threads with access to class A that run on separated threads. Those other threads can call <i>get_resource</i> while the loop is running."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1550667998, "post_id": 54786875, "comment_id": 96352474, "body": "btw I was not trying to be snarky. Irrespective of my comment, I think this is a completely valid quesiton. Correctly synchronizing data is by no means simple. I have to admit, I dont have time to read your code in detail. Would be good if you can turn it into a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1550668728, "post_id": 54786875, "comment_id": 96352934, "body": "Your title threw me off as well. In your case <i>yes</i> you need to protect the variable, since it can be accessed simultaneously by different threads."}, {"owner": {"reputation": 3664, "user_id": 1771055, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/e72db016ef8a0d3cd83cf132964456c3?s=128&d=identicon&r=PG", "display_name": "rozina", "link": "https://stackoverflow.com/users/1771055/rozina"}, "edited": false, "score": 0, "creation_date": 1550670828, "post_id": 54786875, "comment_id": 96354287, "body": "If only one thread modifies the value of a variable, you don&#39;t have to protect the reads from the variable in this same thread. I&#39;d say there is no need to lock the mutex in Case 1."}, {"owner": {"reputation": 33, "user_id": 11089694, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35bf96e31690ce46da660cac69fa4a83?s=128&d=identicon&r=PG&f=1", "display_name": "Culbuto", "link": "https://stackoverflow.com/users/11089694/culbuto"}, "edited": false, "score": 0, "creation_date": 1550672520, "post_id": 54786875, "comment_id": 96355385, "body": "I have edited the original code sample so that it better reflects the problem, sorry if this was misleading before. It should now be a proper minimal example."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1550697970, "post_id": 54786875, "comment_id": 96369015, "body": "@Culbuto Why do you say it can only be modified by the same thread if it can be modified by threads other than the ones reading?"}, {"owner": {"reputation": 33, "user_id": 11089694, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35bf96e31690ce46da660cac69fa4a83?s=128&d=identicon&r=PG&f=1", "display_name": "Culbuto", "link": "https://stackoverflow.com/users/11089694/culbuto"}, "reply_to_user": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1550747894, "post_id": 54786875, "comment_id": 96387862, "body": "@DavidSchwartz In my case, the loop function is only supposed to be called in one thread, the one called in the constructor of A. I should probably make the loop function private to better reflect that in the code. Then it should not be possible for other threads to modify the resource, since only the loop calls modify_resource."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1550774540, "post_id": 54786875, "comment_id": 96404694, "body": "@Culbuto The issue is not whether or not other threads can modify the resource. The issue is whether the resource can be accessed in one thread while another thread is, or might be, modifying it."}, {"owner": {"reputation": 33, "user_id": 11089694, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35bf96e31690ce46da660cac69fa4a83?s=128&d=identicon&r=PG&f=1", "display_name": "Culbuto", "link": "https://stackoverflow.com/users/11089694/culbuto"}, "reply_to_user": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1550776912, "post_id": 54786875, "comment_id": 96405826, "body": "@DavidSchwartz I agree. In this case, there should be no issue (as long as loop only runs on one thread), since 1) and 2) run on the same thread, and 2) and 3) are protected by a mutex. If loop() is launched from a second thread, there is indeed a data race. What I meant by &quot;only modified by the same thread&quot; is that the only non protected read happens necessarily on the same thread as the write."}], "answers": [{"tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": true, "score": 2, "last_activity_date": 1550692854, "creation_date": 1550692854, "answer_id": 54794369, "question_id": 54786875, "link": "https://stackoverflow.com/questions/54786875/do-i-need-to-protect-the-read-on-a-variable-that-is-only-modified-in-the-same-th/54794369#54794369", "title": "Do I need to protect the read on a variable that is only modified in the same thread?", "body": "<p>In your sample you are \"safe\" (assuming correct <code>Res</code>).</p>\n\n<p>Problematic cases happen when <code>2)</code> (the write operation) would execute concurrently with <code>1)</code> / <code>2)</code> or <code>3)</code> (without synchronization).\n<code>1)</code> and <code>3)</code> might happens concurrently, as read only.</p>\n\n<p><code>1)</code> and <code>2)</code> are in the same thread, so cannot happen concurrently with <code>2)</code>.\n<code>3)</code> and <code>2)</code> are protected by <code>mutex</code>.</p>\n\n<p>Note that if in <code>3)</code>, you don't create copy but return reference, then <code>3)</code> <code>mutex</code> would be not extended correct scope.</p>\n"}], "owner": {"reputation": 33, "user_id": 11089694, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35bf96e31690ce46da660cac69fa4a83?s=128&d=identicon&r=PG&f=1", "display_name": "Culbuto", "link": "https://stackoverflow.com/users/11089694/culbuto"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 103, "favorite_count": 0, "accepted_answer_id": 54794369, "answer_count": 1, "score": 3, "last_activity_date": 1550692854, "creation_date": 1550667271, "last_edit_date": 1550672908, "question_id": 54786875, "link": "https://stackoverflow.com/questions/54786875/do-i-need-to-protect-the-read-on-a-variable-that-is-only-modified-in-the-same-th", "title": "Do I need to protect the read on a variable that is only modified in the same thread?", "body": "<p>Let us consider two or more threads, and a resource. Should this be relevant, I am using C++11 on Ubuntu.\nThe situation is illustrated by the following code:</p>\n\n<pre><code>#include &lt;thread&gt;\n#include &lt;mutex&gt;\n\nclass Res\n{\n    //Data\n};\n\nvoid use_resource(const Res&amp; rsc) {/*Do stuff*/}\nvoid modify_resource(Res&amp; rsc) {/*Modify the resource*/}\n\nclass A\n{\n    Res resource;\n    std::mutex resource_mtx;\n    std::thread thd;\n\n    public:\n    A()\n    {\n        thd = std::thread(&amp;A::loop,this);      \n    }\n\n    void loop()\n    {\n        while(true)\n        {\n            use_resource(resource); //(Case 1)\n\n            //Some work\n\n            {\n                std::lock_guard&lt;std::mutex&gt; mlock(resource_mtx);\n                modify_resource(resource); //(Case 2)\n            }\n        }\n    }\n\n    Res get_resource()\n    {\n        std::lock_guard&lt;std::mutex&gt; mlock(resource_mtx);\n        return resource; //(Case 3)\n    }\n};\n\nint main()\n{\n    A a;\n\n\n    while(true)\n    {\n        Res res1 = a.get_resource();\n\n        //Do stuff with the resource\n    }\n}\n</code></pre>\n\n<p>We have a resource that contains some data. The function <em>loop()</em> in A runs on the first thread only. The other threads can call <em>get_resource()</em> to get access to the resource. The resource can only be modified by the function <em>modified_resource</em>.<br>\nMy understanding is that there is a need for a lock in cases 2 and 3, since case 2 involves a write, and case 3 a read from another thread.</p>\n\n<p>What I would like to know is if there is a need for a lock in case 1. From <a href=\"https://en.cppreference.com/w/cpp/language/memory_model\" rel=\"nofollow noreferrer\">cppreference.com</a>, the definition of a data race seems to be:</p>\n\n<blockquote>\n  <p>When an evaluation of an expression writes to a memory location and\n  another evaluation reads or modifies the same memory location, the\n  expressions are said to conflict. A program that has two conflicting\n  evaluations has a data race unless:<br>\n  i) both evaluations execute on the same thread or in the same signal handler, or<br>\n  ii) both conflicting evaluations are atomic operations (see std::atomic), or<br>\n  iii) one of the conflicting evaluations happens-before another (see std::memory_order)</p>\n</blockquote>\n\n<p>I would think that there is no data race for case 1 in my code from those definitions:<br>\nThere is no conflict between 1) and 2) (they are on the same thread, i) applies).<br>\nThere is no conflict between 1) and 3) (none of them is a write).</p>\n\n<p>This leads me to my two questions:<br>\nQ1) In the specific code provided, is there a need to protect the call to <em>use_resource</em> (Case 1) by a lock on <em>resource_mtx</em> to avoid a data race ?<br>\nQ2) Same question if this time cases 1 and 2 can be repeated, in any order or number, in the <em>loop()</em> function ? An arbitrary example would be:</p>\n\n<pre><code>while(true)\n{\n    {\n        std::lock_guard&lt;std::mutex&gt; mlock(resource_mtx);\n        modify_resource(resource); //(Case 2)\n    }\n    use_resource(resource); //(Case 1)      \n    {\n        std::lock_guard&lt;std::mutex&gt; mlock(resource_mtx);\n        modify_resource(resource); //(Case 2)\n    }\n    use_resource(resource); //(Case 1)\n    use_resource(resource); //(Case 1)\n    {\n        std::lock_guard&lt;std::mutex&gt; mlock(resource_mtx);\n        modify_resource(resource); //(Case 2)\n    }\n}\n</code></pre>\n\n<p>As said above, my guess would be that there is no need for a lock in both cases, but I might very well be missing something, like compiler reordering or even the actual definition of a data race.</p>\n\n<p>So far, I have only seen questions about read only access from a separate thread, which is my case 2, (<a href=\"https://stackoverflow.com/questions/9834752/multithreading-do-i-need-protect-my-variable-in-read-only-method\">there</a> and <a href=\"https://stackoverflow.com/questions/43420665/multithreading-with-a-global-variable-if-only-one-thread-is-changing-the-variab\">there</a>) or interactions between two different threads (<a href=\"https://stackoverflow.com/questions/18016806/in-which-cases-do-i-need-to-lock-a-variable-from-simultaneous-access\">there</a>), but I have not seen this specific problem of read only access in the same thread.</p>\n\n<p>EDIT: Edited the code to actually reflect a multithreaded scenario.</p>\n"}, {"tags": ["c++", "static", "crtp"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1550666917, "post_id": 54786701, "comment_id": 96351871, "body": "what is the reason for all factories being required to have the same methods declared? THere is not much you can do with the deleted <code>getInstance</code> (other than creating compiler errors)"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 1, "creation_date": 1550667023, "post_id": 54786701, "comment_id": 96351932, "body": "What&#39;s wrong with just not declaring them?"}, {"owner": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 0, "creation_date": 1550667197, "post_id": 54786701, "comment_id": 96352030, "body": "Typically <code>= delete</code> is to tell the compiler not to synthesize the routine, which would otherwise be synthesized by the compiler.  Some devs put in <code>= delete</code> on routines which the compiler would not synthesize, to explicitly inform the follow-up developer that it isn&#39;t there (but it turns out that can cause some problems, too, since implicitly not synthesized is not the same as explicitly not synthesized; when the problem crops up it is very obvious though)."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1550667417, "post_id": 54786701, "comment_id": 96352170, "body": "&quot;bad as possible&quot; no, it could be worse ;). Its just not clear what is the motivation to do so. I would not leave it like that but at least add a comment"}], "answers": [{"comments": [{"owner": {"reputation": 2193, "user_id": 1733955, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/BmbmP.png?s=128&g=1", "display_name": "Th. Thielemann", "link": "https://stackoverflow.com/users/1733955/th-thielemann"}, "edited": false, "score": 0, "creation_date": 1550668325, "post_id": 54787004, "comment_id": 96352681, "body": "The aim using CRTP is to force to implement the static methods. Non-static is not possible because there is no instance."}], "tags": [], "owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "is_accepted": false, "score": 1, "last_activity_date": 1550667717, "creation_date": 1550667717, "answer_id": 54787004, "question_id": 54786701, "link": "https://stackoverflow.com/questions/54786701/is-it-allowed-and-accepted-to-mark-a-static-method-with-delete/54787004#54787004", "title": "Is it allowed and accepted to mark a static method with delete?", "body": "<blockquote>\n  <p>Is the usage of static and delete bad as possible or common art?</p>\n</blockquote>\n\n<p><code>= delete;</code> is a function definition strictly speaking. Any function may therefore be defined as deleted. The function being a member or free, static or not, is completely orthogonal to the deleted definition.</p>\n\n<p>The consequence of deleting, is that a program that refers to the deleted function becomes ill-formed. The referral is determined by overload resolution.</p>\n\n<p>So yes, it's common practice to delete a definition if we want to prohibit something. You seem to wish to prevent something like <code>CMyNetworkFactory</code> to be defined without a <code>getInstance</code>. But then I confess to not seeing why you need to define anything as deleted via a CRTP. After all, name lookup failing to find <code>getInstance</code> entirely is just as good as it resolving to a deleted definition, I think.</p>\n"}], "owner": {"reputation": 2193, "user_id": 1733955, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/BmbmP.png?s=128&g=1", "display_name": "Th. Thielemann", "link": "https://stackoverflow.com/users/1733955/th-thielemann"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1550676165, "creation_date": 1550666729, "last_edit_date": 1550676165, "question_id": 54786701, "link": "https://stackoverflow.com/questions/54786701/is-it-allowed-and-accepted-to-mark-a-static-method-with-delete", "title": "Is it allowed and accepted to mark a static method with delete?", "body": "<p>Assume for all business object an interface is designed to hide the implementation. PIMPL pattern is not in use.</p>\n\n<pre><code>class CNetworkManager : public IMyNetwork {...};\n</code></pre>\n\n<p>All of these managers are singletons with methods like:</p>\n\n<p>NetworkManager.h</p>\n\n<pre><code>CNetworkManager* CNetworkManager::getInstance();\nCNetworkManager* CNetworkManager::destroy();\n</code></pre>\n\n<p>But NetworkManager.h is not exported. Thus static methods are used within </p>\n\n<p>NetworkManagerFactory.h   </p>\n\n<pre><code>class CMyNetworkFactory\n{\n    public:\n        static IMyNetwork* getInstance();\n        static void destroy();\n};\n</code></pre>\n\n<p>NetworkManagerFactory.cpp</p>\n\n<pre><code>IMyNetwork* CMyNetworkFactory::getInstance()\n{\n    return CNetworkManager::getInstance();\n}\n</code></pre>\n\n<p>But all factories should use the same naming. Thus I added</p>\n\n<p>Template ISingletonFactory.h</p>\n\n<pre><code>template &lt;class Factory, class Interface&gt;\nclass CSingletonFactory\n{\n    public:\n        ~CSingletonFactory() {}\n        static Interface* getInstance() = delete;\n        static void destroy() = delete;\n};\n</code></pre>\n\n<p>and reworked NetworkManagerFactory.h to CRTP</p>\n\n<pre><code>class CMyNetworkFactory : public CSingletonFactory&lt;CMyNetworkFactory, IMyNetwork&gt;\n{\n    public:\n        static IMyNetwork* getInstance();\n        static void destroy();\n};\n</code></pre>\n\n<p>Questions: Is the usage of <strong>static</strong> together with <strong>delete</strong> bad as possible or common art?</p>\n"}, {"tags": ["c++", "opencv"], "comments": [{"owner": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "edited": false, "score": 3, "creation_date": 1550666870, "post_id": 54786629, "comment_id": 96351835, "body": "after <code>inRange</code>, you have a mask. Use it to check inside your for loops if the pixel you are considering is inside the mask or not. You should also have a look at <a href=\"https://docs.opencv.org/master/d2/de8/group__core__array.html#ga191389f8a0e58180bb13a727782cd461\" rel=\"nofollow noreferrer\">cv::mean</a> function"}, {"owner": {"reputation": 67, "user_id": 10887389, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-GzrSUBGGUx4/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcasvyFPGnYU7_PU2svGvmOIv-Zdhw/mo/photo.jpg?sz=128", "display_name": "David S", "link": "https://stackoverflow.com/users/10887389/david-s"}, "reply_to_user": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "edited": false, "score": 0, "creation_date": 1550714922, "post_id": 54786629, "comment_id": 96373784, "body": "Hi, Miki Thank you for your answer. It is really helpful!! And I tried to code the if statement inside for loop. So, I used the if statement like if (frame != Scalar(0,0,0)), but I have an error for there is no operator, &#39; !=&#39;. I tried to extract pixel values from the only yellow parts. So, what is the correct &#39;if statement&#39; to extract only yellow parts?"}, {"owner": {"reputation": 67, "user_id": 10887389, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-GzrSUBGGUx4/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcasvyFPGnYU7_PU2svGvmOIv-Zdhw/mo/photo.jpg?sz=128", "display_name": "David S", "link": "https://stackoverflow.com/users/10887389/david-s"}, "reply_to_user": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "edited": false, "score": 0, "creation_date": 1550715340, "post_id": 54786629, "comment_id": 96373884, "body": "Like this  for (int x = 0; x &lt; hei; x++) { \t\tfor (int y = 0; y &lt; wid; y++) { \t\t\t \t\t\tif (frame != cv::Scalar(0,0,0)) { \t\t\t\tb += copyimg.at&lt;Vec3b&gt;(x, y)[0]; \t\t\t\tg += copyimg.at&lt;Vec3b&gt;(x, y)[1]; \t\t\t\tr += copyimg.at&lt;Vec3b&gt;(x, y)[2]; \t\t\t} \t\t} \t}"}, {"owner": {"reputation": 67, "user_id": 10887389, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-GzrSUBGGUx4/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcasvyFPGnYU7_PU2svGvmOIv-Zdhw/mo/photo.jpg?sz=128", "display_name": "David S", "link": "https://stackoverflow.com/users/10887389/david-s"}, "reply_to_user": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "edited": false, "score": 0, "creation_date": 1550715442, "post_id": 54786629, "comment_id": 96373910, "body": "I tried to rule out all of the black pixels from the copyimg."}, {"owner": {"reputation": 67, "user_id": 10887389, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-GzrSUBGGUx4/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcasvyFPGnYU7_PU2svGvmOIv-Zdhw/mo/photo.jpg?sz=128", "display_name": "David S", "link": "https://stackoverflow.com/users/10887389/david-s"}, "reply_to_user": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "edited": false, "score": 0, "creation_date": 1550792755, "post_id": 54786629, "comment_id": 96411993, "body": "if (frame.at&lt;unsigned char&gt;(x, y) &gt; 0) { \t\t\t\tb += star.at&lt;Vec3b&gt;(x, y)[0]; \t\t\t\tg += star.at&lt;Vec3b&gt;(x, y)[1]; \t\t\t\tr += star.at&lt;Vec3b&gt;(x, y)[2]; \t\t\t}"}, {"owner": {"reputation": 67, "user_id": 10887389, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-GzrSUBGGUx4/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcasvyFPGnYU7_PU2svGvmOIv-Zdhw/mo/photo.jpg?sz=128", "display_name": "David S", "link": "https://stackoverflow.com/users/10887389/david-s"}, "reply_to_user": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "edited": false, "score": 0, "creation_date": 1550792890, "post_id": 54786629, "comment_id": 96412023, "body": "This is what I changed from the original code. However, I think that I got a mask pixel value (black part), not for the inside mask value (yellow part) from the code above."}, {"owner": {"reputation": 67, "user_id": 10887389, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-GzrSUBGGUx4/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcasvyFPGnYU7_PU2svGvmOIv-Zdhw/mo/photo.jpg?sz=128", "display_name": "David S", "link": "https://stackoverflow.com/users/10887389/david-s"}, "reply_to_user": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "edited": false, "score": 0, "creation_date": 1550794347, "post_id": 54786629, "comment_id": 96412306, "body": "And further, I changed the code a little bit, but it gives me red circle values;;  if (frame.at&lt;unsigned char&gt;(x, y) &gt; 0 ) { \t\t\t\t \t\t\t} \t\t\telse { \t\t\t\tb += star.at&lt;Vec3b&gt;(x, y)[0]; \t\t\t\tg += star.at&lt;Vec3b&gt;(x, y)[1]; \t\t\t\tr += star.at&lt;Vec3b&gt;(x, y)[2]; \t\t\t}"}], "owner": {"reputation": 67, "user_id": 10887389, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-GzrSUBGGUx4/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcasvyFPGnYU7_PU2svGvmOIv-Zdhw/mo/photo.jpg?sz=128", "display_name": "David S", "link": "https://stackoverflow.com/users/10887389/david-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 70, "favorite_count": 1, "closed_date": 1551172343, "answer_count": 0, "score": 2, "last_activity_date": 1550666454, "creation_date": 1550666454, "question_id": 54786629, "link": "https://stackoverflow.com/questions/54786629/opencv-c-find-contour-and-get-pixel-value", "closed_reason": "Duplicate", "title": "OpenCV C++ find contour and get pixel value", "body": "<p>I tried to find contour and get a cropped image from the original image.</p>\n\n<p>Then, I tried to get pixel values from the cropped image.</p>\n\n<p>So far, I was able to extract the specific image from the original image like I posted below.</p>\n\n<p>And here is a code for how I extract it.</p>\n\n<pre><code>cv::Mat frame, copyimg;\ncv::Mat star = cv::imread(\"C:\\\\Users\\\\PC\\\\Desktop\\\\star\\\\starcircle.png\");\n\ncv::cvtColor(star, frame, CV_BGR2HSV);\ncv::inRange(frame, cv::Scalar(20, 100, 100), cv::Scalar(30, 255, 255), frame);\n\ncopyimg = (frame.size(), CV_8UC3, cv::Scalar(0));\n\ncv::add(star, cv::Scalar(0), copyimg, frame);\n\ncv::imshow(\"Converted image\", frame);\ncv::imshow(\"Original image\", star);\ncv::imshow(\"Copy\", copyimg);\n</code></pre>\n\n<p>And I was able to crop the yellow part like </p>\n\n<p><a href=\"https://i.stack.imgur.com/nlq5N.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/nlq5N.png\" alt=\"enter image description here\"></a></p>\n\n<p>However, when I got this image and tried to get pixel values from the yellow parts with the code below, it read out all of the pixels of the converted image.</p>\n\n<p>In other words, it gives RGB values from the entire pixel, not for the cropped yellow part of the image.</p>\n\n<p>Here is the code for get pixel values from the image.</p>\n\n<pre><code>int hei = copyimg.rows;\nint wid = copyimg.cols;\n\nint corow = hei * wid;\n\ndouble b, g, r = 0.0;\n\nfor (int x = 0; x &lt; hei; x++) {      \n    for (int y = 0; y &lt; wid; y++) {             \n        b += copyimg.at&lt;Vec3b&gt;(x, y)[0];\n        g += copyimg.at&lt;Vec3b&gt;(x, y)[1];\n        r += copyimg.at&lt;Vec3b&gt;(x, y)[2];\n    }\n}\n\ncout &lt;&lt; \"$$ Red(R), Green(G), Blue(B) $$\" &lt;&lt; \" \\n\\n\";\ncout &lt;&lt; \"avg_R: \" &lt;&lt; r / corow &lt;&lt; \" \\n\"; // red value\ncout &lt;&lt; \"avg_G: \" &lt;&lt; g / corow &lt;&lt; \" \\n\"; // green value\ncout &lt;&lt; \"avg_B: \" &lt;&lt; b / corow &lt;&lt; \" \\n\\n\"; // blue value \n</code></pre>\n\n<p>So, I wish to combine these two codes and get pixel values from the contoured image (only yellow part).</p>\n\n<p>Please help me out this problem.</p>\n\n<p>Thank you in advance.</p>\n"}, {"tags": ["c++", "header-files", "new-operator"], "comments": [{"owner": {"reputation": 6023, "user_id": 2417459, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/QcuXb.png?s=128&g=1", "display_name": "i486", "link": "https://stackoverflow.com/users/2417459/i486"}, "edited": false, "score": 0, "creation_date": 1550665629, "post_id": 54786315, "comment_id": 96351086, "body": "Why not <code>new</code> in constructor <code>Foo::Foo() { bar = new Baz(); }</code>?"}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "reply_to_user": {"reputation": 6023, "user_id": 2417459, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/QcuXb.png?s=128&g=1", "display_name": "i486", "link": "https://stackoverflow.com/users/2417459/i486"}, "edited": false, "score": 1, "creation_date": 1550665713, "post_id": 54786315, "comment_id": 96351146, "body": "@i486 why would it be? The real question is, why no <code>std::unique_ptr</code>."}, {"owner": {"reputation": 6023, "user_id": 2417459, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/QcuXb.png?s=128&g=1", "display_name": "i486", "link": "https://stackoverflow.com/users/2417459/i486"}, "reply_to_user": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1550665983, "post_id": 54786315, "comment_id": 96351301, "body": "@Quentin Explain &quot;the real question&quot; because I don&#39;t see it in that way."}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "reply_to_user": {"reputation": 6023, "user_id": 2417459, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/QcuXb.png?s=128&g=1", "display_name": "i486", "link": "https://stackoverflow.com/users/2417459/i486"}, "edited": false, "score": 0, "creation_date": 1550666000, "post_id": 54786315, "comment_id": 96351314, "body": "@i486 <a href=\"https://wandbox.org/permlink/wfSnMhC1vAk2MBya\" rel=\"nofollow noreferrer\">yup</a> (although the MCVE wasn&#39;t quite there, OP!)"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 3, "creation_date": 1550666008, "post_id": 54786315, "comment_id": 96351323, "body": "the pointer itself is not constant, its a non-const pointer pointing to a <code>const Baz</code>"}, {"owner": {"reputation": 1209, "user_id": 10662240, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vTic2.jpg?s=128&g=1", "display_name": "Krzysiek Karbowiak", "link": "https://stackoverflow.com/users/10662240/krzysiek-karbowiak"}, "edited": false, "score": 0, "creation_date": 1550666032, "post_id": 54786315, "comment_id": 96351338, "body": "Pedantic: you do not have a &#39;const member pointer&#39;. Instead, you have a &#39;member pointer to const Baz&#39;."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "reply_to_user": {"reputation": 1209, "user_id": 10662240, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vTic2.jpg?s=128&g=1", "display_name": "Krzysiek Karbowiak", "link": "https://stackoverflow.com/users/10662240/krzysiek-karbowiak"}, "edited": false, "score": 0, "creation_date": 1550666093, "post_id": 54786315, "comment_id": 96351371, "body": "@KrzysiekKarbowiak its not really pedantery, but <code>const Baz*</code> and <code>Baz * const</code> are very different"}, {"owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "edited": false, "score": 0, "creation_date": 1550666114, "post_id": 54786315, "comment_id": 96351383, "body": "Intializing non static member at declaration time is just systactic sugar: the initialization will occur at object creation, no problem here. But you as the destructor is not trivial, the rule of 5 require special processing for copy/move. You&#39;d better use a <code>std::unique_ptr</code> and let it manage the destruction."}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "reply_to_user": {"reputation": 6023, "user_id": 2417459, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/QcuXb.png?s=128&g=1", "display_name": "i486", "link": "https://stackoverflow.com/users/2417459/i486"}, "edited": false, "score": 1, "creation_date": 1550666118, "post_id": 54786315, "comment_id": 96351387, "body": "@i486 it was a bit tongue-in-cheek. You&#39;re advocating symmetry, I&#39;m advocating following the rule of zero and using <code>std::unique_ptr</code> instead of a raw owning pointer :)"}, {"owner": {"reputation": 1971, "user_id": 896627, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/517667306ad8343f0ce93914517600db?s=128&d=identicon&r=PG", "display_name": "Chaos_99", "link": "https://stackoverflow.com/users/896627/chaos-99"}, "edited": false, "score": 0, "creation_date": 1550666502, "post_id": 54786315, "comment_id": 96351613, "body": "For clarification: That&#39;s library header code, not my code. That&#39;s why I&#39;m asking for explanation only, not how to fix. But thanks for the suggestions anyway."}, {"owner": {"reputation": 1971, "user_id": 896627, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/517667306ad8343f0ce93914517600db?s=128&d=identicon&r=PG", "display_name": "Chaos_99", "link": "https://stackoverflow.com/users/896627/chaos-99"}, "edited": false, "score": 0, "creation_date": 1550667205, "post_id": 54786315, "comment_id": 96352038, "body": "I fixed the wording around what is const here to match the code. thanks for the advise."}], "answers": [{"comments": [{"owner": {"reputation": 1971, "user_id": 896627, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/517667306ad8343f0ce93914517600db?s=128&d=identicon&r=PG", "display_name": "Chaos_99", "link": "https://stackoverflow.com/users/896627/chaos-99"}, "edited": false, "score": 0, "creation_date": 1550666367, "post_id": 54786465, "comment_id": 96351541, "body": "The constructor-&gt;destructor in the question was indeed a typo. Fixed that. Thanks."}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "reply_to_user": {"reputation": 1971, "user_id": 896627, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/517667306ad8343f0ce93914517600db?s=128&d=identicon&r=PG", "display_name": "Chaos_99", "link": "https://stackoverflow.com/users/896627/chaos-99"}, "edited": false, "score": 0, "creation_date": 1550666404, "post_id": 54786465, "comment_id": 96351560, "body": "@Chaos_99 I removed obsolete mention from the anwer."}, {"owner": {"reputation": 4732, "user_id": 8477999, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f8172e1919af53269de92316dcf03a03?s=128&d=identicon&r=PG&f=1", "display_name": "Gem Taylor", "link": "https://stackoverflow.com/users/8477999/gem-taylor"}, "edited": false, "score": 2, "creation_date": 1550666425, "post_id": 54786465, "comment_id": 96351576, "body": "Note that using std::unique_ptr would mean that your object becomes non-copyable(L) because std::unique_ptr can&#39;t be copied except from an r-val. This is fine if it is what you want. You need to decide for yourself what copy semantics Foo should have, and preferably define them up front, not rely on the inherited side-effects."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1550666619, "post_id": 54786465, "comment_id": 96351699, "body": "dont agree 100% to &quot;does not leak&quot;. When you make a copy as in <code>Foo f; Foo g; f = g;</code> you only get a double free corruption when both go out of scope, but before that there is a leak"}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1550666724, "post_id": 54786465, "comment_id": 96351756, "body": "@user463035818 ah. I had assumed that pointer was const, as OP stated, and thus assignment wouldn&#39;t have been possible. But it isn&#39;t actually const, so leak is possible in that case."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1550666813, "post_id": 54786465, "comment_id": 96351805, "body": "i mean its a nitpick, its definitely wrong to naively copy those objects, for what reason is kinda secondary"}, {"owner": {"reputation": 1971, "user_id": 896627, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/517667306ad8343f0ce93914517600db?s=128&d=identicon&r=PG", "display_name": "Chaos_99", "link": "https://stackoverflow.com/users/896627/chaos-99"}, "edited": false, "score": 0, "creation_date": 1550668006, "post_id": 54786465, "comment_id": 96352478, "body": "FYI: The object is indeed never copied in my code. So I&#39;m probably ok. I&#39;ll submit a change adding explicitly deleted copy constructor/operator and the use of std::unique_ptr instead of normal pointer to the library maintainer of that header file. Thanks for the help."}, {"owner": {"reputation": 2602, "user_id": 4341534, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/001c92ef74cb305ff8318eebeaa04ab3?s=128&d=identicon&r=PG&f=1", "display_name": "patatahooligan", "link": "https://stackoverflow.com/users/4341534/patatahooligan"}, "edited": false, "score": 0, "creation_date": 1550670053, "post_id": 54786465, "comment_id": 96353794, "body": "I believe it would be helpful to link to the <a href=\"https://stackoverflow.com/a/4172724/4341534\">rule of three/five</a> in your answer."}], "tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": true, "score": 7, "last_activity_date": 1550687545, "last_edit_date": 1550687545, "creation_date": 1550665896, "answer_id": 54786465, "question_id": 54786315, "link": "https://stackoverflow.com/questions/54786315/is-a-member-pointer-defined-with-new-in-the-header-file-a-memory-leak/54786465#54786465", "title": "Is a member pointer defined with &#39;new&#39; in the header file a memory leak?", "body": "<blockquote>\n  <p>Does it create a memory leak? </p>\n</blockquote>\n\n<p>Potentially, yes. If you assign to an instance of <code>Foo</code>, the memory owned by the previous pointer value is leaked.</p>\n\n<blockquote>\n  <p>Isn't this executed earlier? Maybe even whenever the header is parsed?</p>\n</blockquote>\n\n<p>No. Members are initialized by a constructor. The default member initialiser in the declaration of the member is used if the constructor doesn't specify a member initialiser explicitly (such as is the case for the constructor you declared).</p>\n\n<blockquote>\n  <p>Is this usage ok? Is it guaranteed to me matched by the delete in the destructor?</p>\n</blockquote>\n\n<p>No. Besides the leak, if you make a copy of the object, there will be two deletes matching only one new. The program would have undefined behaviour.</p>\n\n<p>The simplest fix for both the leak, and UB is to use <code>std::unique_ptr</code> instead of a bare pointer. (Or possibly <code>std::shared_ptr</code> in case you want the class to be copyable, and want the copies to share the ownership of the same <code>Baz</code> object).</p>\n\n<p>There is no problem with the default member initialiser though. The problems mentioned above are with lack of class invariants that are necessary when dealing with resource acquisition.</p>\n"}], "owner": {"reputation": 1971, "user_id": 896627, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/517667306ad8343f0ce93914517600db?s=128&d=identicon&r=PG", "display_name": "Chaos_99", "link": "https://stackoverflow.com/users/896627/chaos-99"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 94, "favorite_count": 0, "accepted_answer_id": 54786465, "answer_count": 1, "score": 1, "last_activity_date": 1550687545, "creation_date": 1550665356, "last_edit_date": 1550668070, "question_id": 54786315, "link": "https://stackoverflow.com/questions/54786315/is-a-member-pointer-defined-with-new-in-the-header-file-a-memory-leak", "title": "Is a member pointer defined with &#39;new&#39; in the header file a memory leak?", "body": "<p>In code I use I found a class declaration in a header file that contains a pointer to const as a member that is defined with 'new' right there in the header file.</p>\n\n<p>A matching 'delete' is in the destructor (also defined right there in the header).</p>\n\n<p>Is this usage ok? Does it create a memory leak? \nThe destructor is called only when an object of that class is destroyed, either by a delete (when created with new) or by going out of scope (when created on the stack).\nBut the 'new' is not in the constructor, but part of the class declaration. Isn't this executed earlier? Maybe even whenever the header is parsed? Is it guaranteed to me matched by the delete in the destructor?</p>\n\n<pre><code>class Foo {\npublic:\n  explicit Foo(){}\n  ~Foo() {\n    delete this-&gt;bar;\n  }\n\nprivate:\n  const Baz* bar = new Baz();\n}; \n</code></pre>\n"}, {"tags": ["c++", "c++11", "bit-manipulation"], "comments": [{"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 4, "creation_date": 1550665503, "post_id": 54786278, "comment_id": 96351005, "body": "Rather than using a loop, can&#39;t you construct a mask with <code>B | D | E | ... | O</code>?"}, {"owner": {"reputation": 5642, "user_id": 2137996, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/dYdyn.jpg?s=128&g=1", "display_name": "Alex Reinking", "link": "https://stackoverflow.com/users/2137996/alex-reinking"}, "reply_to_user": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 6, "creation_date": 1550665595, "post_id": 54786278, "comment_id": 96351062, "body": "The enum has bit positions rather than already expanded bits, so I could do <code>(1ULL &lt;&lt; B) | ... | (1ULL &lt;&lt; O)</code>"}, {"owner": {"reputation": 5642, "user_id": 2137996, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/dYdyn.jpg?s=128&g=1", "display_name": "Alex Reinking", "link": "https://stackoverflow.com/users/2137996/alex-reinking"}, "reply_to_user": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 3, "creation_date": 1550665929, "post_id": 54786278, "comment_id": 96351271, "body": "The downside being that the actual names are long and irregular and it&#39;s not nearly as easy to see which flags are in the mask with all that line noise."}, {"owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "edited": false, "score": 4, "creation_date": 1550763434, "post_id": 54786278, "comment_id": 96398378, "body": "@AlexReinking You could make it one <code>(1ULL &lt;&lt; Constant)</code> | per line, and align the constant names on the different lines, that would be easier on the eyes."}, {"owner": {"reputation": 8430, "user_id": 2742717, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d1dec1aa6accf3589489ebd42634f7a0?s=128&d=identicon&r=PG", "display_name": "Swift - Friday Pie", "link": "https://stackoverflow.com/users/2742717/swift-friday-pie"}, "edited": false, "score": 0, "creation_date": 1582879420, "post_id": 54786278, "comment_id": 106936006, "body": "I think problem here related to lack of use unsigned type,GCC always had troubles with statically discarding correction for overflow and type conversion in signed/unsigned hybrid.Result of bit shift here is an <code>int</code> result of bit operation MAY BE <code>int</code> OR may be  <code>long long</code> depending on value and  formally<code>enum</code> isn&#39;t an equivalent to a an <code>int</code> constant.  clang calls for &quot;as if&quot;, gcc stays pedantic"}, {"owner": {"reputation": 5642, "user_id": 2137996, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/dYdyn.jpg?s=128&g=1", "display_name": "Alex Reinking", "link": "https://stackoverflow.com/users/2137996/alex-reinking"}, "reply_to_user": {"reputation": 8430, "user_id": 2742717, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d1dec1aa6accf3589489ebd42634f7a0?s=128&d=identicon&r=PG", "display_name": "Swift - Friday Pie", "link": "https://stackoverflow.com/users/2742717/swift-friday-pie"}, "edited": false, "score": 0, "creation_date": 1582880985, "post_id": 54786278, "comment_id": 106936721, "body": "@Swift-FridayPie -- can you demonstrate that to be the issue? Changing the &quot;Flags&quot; in <code>important_bits</code> out for <code>int</code> doesn&#39;t seem to change the assembly."}], "answers": [{"comments": [{"owner": {"reputation": 8582, "user_id": 439751, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4b40ae065359026d01fa30223812d83?s=128&d=identicon&r=PG", "display_name": "James", "link": "https://stackoverflow.com/users/439751/james"}, "edited": false, "score": 38, "creation_date": 1550687691, "post_id": 54786503, "comment_id": 96364238, "body": "Sorry, but that C++14 code is something. I don&#39;t know what."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 8582, "user_id": 439751, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4b40ae065359026d01fa30223812d83?s=128&d=identicon&r=PG", "display_name": "James", "link": "https://stackoverflow.com/users/439751/james"}, "edited": false, "score": 14, "creation_date": 1550689848, "post_id": 54786503, "comment_id": 96365300, "body": "@James It is a wonderful motivating example of why fold expressions in C++17 are very welcome.  It, and similar tricks, turn out to be an efficient way to expand a pack &quot;inplace&quot; without any recursion and that compliers find easy to optimize."}, {"owner": {"reputation": 69264, "user_id": 256138, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ed9e8c0ff767e38f8fade11f5af00a45?s=128&d=identicon&r=PG", "display_name": "rubenvb", "link": "https://stackoverflow.com/users/256138/rubenvb"}, "edited": false, "score": 0, "creation_date": 1550701051, "post_id": 54786503, "comment_id": 96370193, "body": "The array initializer trick works in C++11 too, not sure why you think you need 14..."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 69264, "user_id": 256138, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ed9e8c0ff767e38f8fade11f5af00a45?s=128&d=identicon&r=PG", "display_name": "rubenvb", "link": "https://stackoverflow.com/users/256138/rubenvb"}, "edited": false, "score": 4, "creation_date": 1550702442, "post_id": 54786503, "comment_id": 96370664, "body": "@ruben multi line constexpr is illegal in 11"}, {"owner": {"reputation": 5642, "user_id": 2137996, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/dYdyn.jpg?s=128&g=1", "display_name": "Alex Reinking", "link": "https://stackoverflow.com/users/2137996/alex-reinking"}, "edited": false, "score": 6, "creation_date": 1550734210, "post_id": 54786503, "comment_id": 96379653, "body": "I can&#39;t see myself checking in that C++14 code. I&#39;ll stick to the C++11 one since I need that, anyway, but even if I could use it, the C++14 code requires so much explanation I wouldn&#39;t. These masks can always be written to have at most 32 elements, so I&#39;m not worried about O(n^2) behavior. After all, if n is bounded by a constant, then it&#39;s really O(1). ;)"}, {"owner": {"reputation": 2016, "user_id": 314517, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2961147be0f2c63792326a17eb2dd3cb?s=128&d=identicon&r=PG", "display_name": "Henrik Hansen", "link": "https://stackoverflow.com/users/314517/henrik-hansen"}, "edited": false, "score": 9, "creation_date": 1550746435, "post_id": 54786503, "comment_id": 96386928, "body": "To those trying to understand <code>((1ull&lt;&lt;indexes)|...|0ull)</code> it is a <a href=\"https://en.cppreference.com/w/cpp/language/fold\" rel=\"nofollow noreferrer\">&quot;fold expression&quot;</a>. Specifically it is a &quot;binary right fold&quot; and It should be parsed as <code>(pack</code> <code>op</code> <code>...</code> <code>op</code> <code>init)</code>"}, {"owner": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "edited": false, "score": 1, "creation_date": 1550785510, "post_id": 54786503, "comment_id": 96409628, "body": "What about using a variable-template instead? Wouldn&#39;t that be even better in C++17? <code>template &lt;unsigned char... indexes&gt; static constexpr unsigned long long mask = (0ULL | ... | (1ULL&lt;&lt;indexes));</code> Alternatively, since C++11 one can pass the result though a templated using of <code>std::integral_constant</code> to just about force compile-time evaluation."}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1550787907, "post_id": 54786503, "comment_id": 96410626, "body": "You can look at asm for all 3 versions at once, if you give them different names.  <a href=\"https://godbolt.org/z/HpLAff\" rel=\"nofollow noreferrer\">godbolt.org/z/HpLAff</a>.  (gcc/clang/ICC/MSVC output for x86-64.  Including a version that takes the bitmap by value as a 64-bit integer.   Although with MSVC, it&#39;s returned in memory after being passed in a register??  Craptastic calling convention...)"}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "reply_to_user": {"reputation": 2016, "user_id": 314517, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2961147be0f2c63792326a17eb2dd3cb?s=128&d=identicon&r=PG", "display_name": "Henrik Hansen", "link": "https://stackoverflow.com/users/314517/henrik-hansen"}, "edited": false, "score": 0, "creation_date": 1550788752, "post_id": 54786503, "comment_id": 96410921, "body": "@HenrikHansen and Yakk:  Does this <i>need</i> to be a binary fold?  A unary fold like <code>((1ull&lt;&lt;indexes)|...)</code> compiles to the same asm with no warnings, and makes logical sense.  Oh, I see that covers the <code>mask&lt;&gt;</code> case of an empty param list.  I guess if we want to support that instead of expecting programmers to notice that the result is <code>0</code> in that case.  (ICC19 even has a missed optimization there, storing a zero to the stack then reloading it, then storing that to the reference arg.  <a href=\"https://godbolt.org/z/vQYVPC\" rel=\"nofollow noreferrer\">godbolt.org/z/vQYVPC</a>. But GCC and Clang are fine.  I didn&#39;t figure out how to get MSVC to do C++17)"}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 1, "creation_date": 1550804831, "post_id": 54786503, "comment_id": 96414328, "body": "@PeterCordes I see no reason not to support the empty mask case.  You could have generic code generating a pile of masks based off metaprogramming generated integral sequences or whatever, and having <code>0</code> simply break seems rude."}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1550805331, "post_id": 54786503, "comment_id": 96414422, "body": "Yeah, the only reason you might decide to make that case break on purpose is because ICC fails to optimize it to zero as efficiently as it could, and you want to stop ICC users from shooting themselves in the foot.  Or maybe an empty list doesn&#39;t make sense in the context of some use-case, so it&#39;s useful to warn users.  But you&#39;d probably do that with <code>static_assert</code> on the mask to give a meaningful message, not an error.  (When I started writing my previous comment, I hadn&#39;t spotted the empty-list corner case yet.)"}, {"owner": {"reputation": 4556, "user_id": 1269661, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/5f3a348bd307a1a2c6ecefb06519ab81?s=128&d=identicon&r=PG", "display_name": "Predelnik", "link": "https://stackoverflow.com/users/1269661/predelnik"}, "edited": false, "score": 0, "creation_date": 1550830415, "post_id": 54786503, "comment_id": 96424274, "body": "In C++14 version array could be replaced with creation of temporary <code>std::initializer_list&lt;int&gt;</code>, the downside is possible requirement of <code>#include &lt;initializer_list&gt;</code>. Also this construct could be wrapped to macro for convenience."}, {"owner": {"reputation": 5411, "user_id": 2148773, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/4f02b8f7945a65a746f6245c184d241d?s=128&d=identicon&r=PG", "display_name": "oliver", "link": "https://stackoverflow.com/users/2148773/oliver"}, "edited": false, "score": 0, "creation_date": 1550837502, "post_id": 54786503, "comment_id": 96428302, "body": "Can somebody please explain the initializer for <code>discard</code> in the C++14 solution to me? I have no idea how to parse that <code>{0, (void(r |= (1ull &lt;&lt; indexes)), 0)...}</code> expression!"}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 5411, "user_id": 2148773, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/4f02b8f7945a65a746f6245c184d241d?s=128&d=identicon&r=PG", "display_name": "oliver", "link": "https://stackoverflow.com/users/2148773/oliver"}, "edited": false, "score": 3, "creation_date": 1550837978, "post_id": 54786503, "comment_id": 96428590, "body": "@oliver start with <code>{0,0}</code> -- an array of 2 elements, both 0.  Now do this <code>{0, (++i,0)}</code> -- also an array of 2 elements, both 0, but this one as a side effect increments <code>i</code>.  The <code>(++i,0)</code> is the <i>comma</i> operator, which evaluates the lhs, then discards it, then evaluates the rhs, then returns it.  Next, <code>{0,(++Is,0)...}</code> is a pack expansion of <code>(++Is,0)</code> (assuming <code>Is</code> is a pack).  Finally, <code>void(++Is)</code> is a way to cast the result of <code>++Is</code> into an expression of type <code>void</code>; in generic code, this avoids someone overriding <code>operator,</code> and doing the wrong thing."}, {"owner": {"reputation": 5411, "user_id": 2148773, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/4f02b8f7945a65a746f6245c184d241d?s=128&d=identicon&r=PG", "display_name": "oliver", "link": "https://stackoverflow.com/users/2148773/oliver"}, "edited": false, "score": 0, "creation_date": 1550839060, "post_id": 54786503, "comment_id": 96429240, "body": "@Yakk-AdamNevraumont: thanks a lot for your explanation, much appreciated!"}], "tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": true, "score": 114, "last_activity_date": 1553189653, "last_edit_date": 1553189653, "creation_date": 1550666040, "answer_id": 54786503, "question_id": 54786278, "link": "https://stackoverflow.com/questions/54786278/how-do-i-write-a-maintainable-fast-compile-time-bit-mask-in-c/54786503#54786503", "title": "How do I write a maintainable, fast, compile-time bit-mask in C++?", "body": "<p>Best version is <a href=\"/questions/tagged/c%2b%2b17\" class=\"post-tag\" title=\"show questions tagged &#39;c++17&#39;\" rel=\"tag\">c++17</a>:</p>\n\n<pre><code>template&lt; unsigned char... indexes &gt;\nconstexpr unsigned long long mask(){\n  return ((1ull&lt;&lt;indexes)|...|0ull);\n}\n</code></pre>\n\n<p>Then</p>\n\n<pre><code>void apply_known_mask(std::bitset&lt;64&gt; &amp;bits) {\n  constexpr auto m = mask&lt;B,D,E,H,K,M,L,O&gt;();\n  bits &amp;= m;\n}\n</code></pre>\n\n<p>back in <a href=\"/questions/tagged/c%2b%2b14\" class=\"post-tag\" title=\"show questions tagged &#39;c++14&#39;\" rel=\"tag\">c++14</a>, we can do this strange trick:</p>\n\n<pre><code>template&lt; unsigned char... indexes &gt;\nconstexpr unsigned long long mask(){\n  auto r = 0ull;\n  using discard_t = int[]; // data never used\n  // value never used:\n  discard_t discard = {0,(void(\n    r |= (1ull &lt;&lt; indexes) // side effect, used\n  ),0)...};\n  (void)discard; // block unused var warnings\n  return r;\n}\n</code></pre>\n\n<p>or, if we are stuck with <a href=\"/questions/tagged/c%2b%2b11\" class=\"post-tag\" title=\"show questions tagged &#39;c++11&#39;\" rel=\"tag\">c++11</a>, we can solve it recursively:</p>\n\n<pre><code>constexpr unsigned long long mask(){\n  return 0;\n}\ntemplate&lt;class...Tail&gt;\nconstexpr unsigned long long mask(unsigned char b0, Tail...tail){\n  return (1ull&lt;&lt;b0) | mask(tail...);\n}\ntemplate&lt; unsigned char... indexes &gt;\nconstexpr unsigned long long mask(){\n  return mask(indexes...);\n}\n</code></pre>\n\n<p><a href=\"https://godbolt.org/z/h9jyLF\" rel=\"noreferrer\">Godbolt with all 3</a> -- you can switch CPP_VERSION define, and get identical assembly.</p>\n\n<p>In practice I'd use the most modern I could.  14 beats 11 because we don't have recursion and hence O(n^2) symbol length (which can explode compile time and compiler memory usage); 17 beats 14 because the compiler doesn't have to dead-code-eliminate that array, and that array trick is just ugly.</p>\n\n<p>Of these 14 is the most confusing.  Here we create an anonymous array of all 0s, meanwhile as a side effect construct our result, then discard the array.  The discarded array has a number of 0s in it equal to the size of our pack, plus 1 (which we add so we can handle empty packs).</p>\n\n<hr>\n\n<p>A detailed explanation of what the <a href=\"/questions/tagged/c%2b%2b14\" class=\"post-tag\" title=\"show questions tagged &#39;c++14&#39;\" rel=\"tag\">c++14</a> version is doing.  This is a trick/hack, and the fact you have to do this to expand parameters packs with efficiency in C++14 is one of the reasons why fold expressions where added in <a href=\"/questions/tagged/c%2b%2b17\" class=\"post-tag\" title=\"show questions tagged &#39;c++17&#39;\" rel=\"tag\">c++17</a>.</p>\n\n<p>It is best understood from the inside out:</p>\n\n<pre><code>    r |= (1ull &lt;&lt; indexes) // side effect, used\n</code></pre>\n\n<p>this just updates <code>r</code> with <code>1&lt;&lt;indexes</code> for a fixed index.  <code>indexes</code> is a parameter pack, so we'll have to expand it.</p>\n\n<p>The rest of the work is to provide a parameter pack to expand <code>indexes</code> inside of.</p>\n\n<p>One step out:</p>\n\n<pre><code>(void(\n    r |= (1ull &lt;&lt; indexes) // side effect, used\n  ),0)\n</code></pre>\n\n<p>here we cast our expression to <code>void</code>, indicating we don't care about its return value (we just want the side effect of setting <code>r</code> -- in C++, expressions like <code>a |= b</code> also return the value they set <code>a</code> to).</p>\n\n<p>Then we use the comma operator <code>,</code> and <code>0</code> to discard the <code>void</code> \"value\", and return the value <code>0</code>.  So this is an expression whose value is <code>0</code> and as a side effect of calculating <code>0</code> it sets a bit in <code>r</code>.</p>\n\n<pre><code>  int discard[] = {0,(void(\n    r |= (1ull &lt;&lt; indexes) // side effect, used\n  ),0)...};\n</code></pre>\n\n<p>At this point, we expand the parameter pack <code>indexes</code>.  So we get:</p>\n\n<pre><code> {\n    0,\n    (expression that sets a bit and returns 0),\n    (expression that sets a bit and returns 0),\n    [...]\n    (expression that sets a bit and returns 0),\n  }\n</code></pre>\n\n<p>in the <code>{}</code>.  This use of <code>,</code> is <em>not</em> the comma operator, but rather the array element separator.  This is <code>sizeof...(indexes)+1</code> <code>0</code>s, which also set bits in <code>r</code> as a side effect.  We then assign the <code>{}</code> array construction instructions to an array <code>discard</code>.</p>\n\n<p>Next we cast <code>discard</code> to <code>void</code> -- most compilers will warn you if you create a variable and never read it.  All compilers will not complain if you cast it to <code>void</code>, it is sort of a way to say \"Yes, I know, I'm not using this\", so it suppresses the warning.</p>\n"}, {"comments": [{"owner": {"reputation": 5642, "user_id": 2137996, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/dYdyn.jpg?s=128&g=1", "display_name": "Alex Reinking", "link": "https://stackoverflow.com/users/2137996/alex-reinking"}, "edited": false, "score": 3, "creation_date": 1550699441, "post_id": 54787823, "comment_id": 96369620, "body": "How does this demonstrate that <code>apply_known_mask</code> actually optimizes?"}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "reply_to_user": {"reputation": 5642, "user_id": 2137996, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/dYdyn.jpg?s=128&g=1", "display_name": "Alex Reinking", "link": "https://stackoverflow.com/users/2137996/alex-reinking"}, "edited": false, "score": 2, "creation_date": 1550752623, "post_id": 54787823, "comment_id": 96390841, "body": "@AlexReinking: All the scary bits are <code>constexpr</code>. And while that&#39;s theoretically not sufficient, we know that GCC is quite capable of evaluating <code>constexpr</code> as intended."}], "tags": [], "owner": {"reputation": 5093, "user_id": 6039995, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/QuCId.png?s=128&g=1", "display_name": "Stack Danny", "link": "https://stackoverflow.com/users/6039995/stack-danny"}, "is_accepted": false, "score": 10, "last_activity_date": 1550823400, "last_edit_date": 1550823400, "creation_date": 1550670338, "answer_id": 54787823, "question_id": 54786278, "link": "https://stackoverflow.com/questions/54786278/how-do-i-write-a-maintainable-fast-compile-time-bit-mask-in-c/54787823#54787823", "title": "How do I write a maintainable, fast, compile-time bit-mask in C++?", "body": "<p>if using only C++11 is a must <code>(&amp;a)[N]</code> is a way to capture arrays. This allows you to write one single recursive function without using helper functions whatsoever:</p>\n\n<pre><code>template &lt;std::size_t N&gt;\nconstexpr std::uint64_t generate_mask(Flags const (&amp;a)[N], std::size_t i = 0u){\n    return i &lt; N ? (1ull &lt;&lt; a[i] | generate_mask(a, i + 1u)) : 0ull;\n}\n</code></pre>\n\n<p>assigning it to a <code>constexpr auto</code>:</p>\n\n<pre><code>void apply_known_mask(std::bitset&lt;64&gt;&amp; bits) {\n    constexpr const Flags important_bits[] = { B, D, E, H, K, M, L, O };\n    constexpr auto m = generate_mask(important_bits); //&lt; here\n    bits &amp;= m;\n}\n</code></pre>\n\n<hr>\n\n<h3>Test</h3>\n\n<pre><code>int main() {\n    std::bitset&lt;64&gt; b;\n    b.flip();\n    apply_known_mask(b);\n    std::cout &lt;&lt; b.to_string() &lt;&lt; '\\n';\n}\n</code></pre>\n\n<h3>Output</h3>\n\n<pre><code>0000000000000000000000000000000000101110010000000000000100100100\n//                                ^ ^^^  ^             ^  ^  ^\n//                                O MLK  H             E  D  B\n</code></pre>\n\n<p>one really has to appreciate C++`s ability to calculate anything turing computable at compile time. It surely still blows my mind (<a href=\"https://stackoverflow.com/questions/189172/c-templates-turing-complete/275295#275295\">&lt;></a>).</p>\n\n<hr>\n\n<p>For the later versions C++14 and C++17 <a href=\"https://stackoverflow.com/questions/54786278/how-do-i-write-a-maintainable-fast-compile-time-bit-mask-in-c/54786503#54786503\">yakk's</a> answer already wonderfully covers that.</p>\n"}, {"comments": [{"owner": {"reputation": 5642, "user_id": 2137996, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/dYdyn.jpg?s=128&g=1", "display_name": "Alex Reinking", "link": "https://stackoverflow.com/users/2137996/alex-reinking"}, "edited": false, "score": 0, "creation_date": 1550691695, "post_id": 54790590, "comment_id": 96366147, "body": "You are <i>amazing</i> thank you! I had no idea this was configurable in GCC! Though for some reason <code>-O3 -fpeel-loops --param max-peeled-insns=200</code> fails... It&#39;s due to <code>-ftree-slp-vectorize</code> apparently."}, {"owner": {"reputation": 590, "user_id": 1472610, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/16d3ad87a5b8e57ce44c4574880d37d0?s=128&d=identicon&r=PG", "display_name": "realtime", "link": "https://stackoverflow.com/users/1472610/realtime"}, "edited": false, "score": 0, "creation_date": 1550741079, "post_id": 54790590, "comment_id": 96383515, "body": "This solution seems to be limited to the x86-64 target. The output for ARM and ARM64 is still not pretty, which then again might be completely irrelevant for OP."}, {"owner": {"reputation": 5642, "user_id": 2137996, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/dYdyn.jpg?s=128&g=1", "display_name": "Alex Reinking", "link": "https://stackoverflow.com/users/2137996/alex-reinking"}, "reply_to_user": {"reputation": 590, "user_id": 1472610, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/16d3ad87a5b8e57ce44c4574880d37d0?s=128&d=identicon&r=PG", "display_name": "realtime", "link": "https://stackoverflow.com/users/1472610/realtime"}, "edited": false, "score": 0, "creation_date": 1550749050, "post_id": 54790590, "comment_id": 96388614, "body": "@realtime - it is somewhat relevant, actually. Thanks for pointing out that it doesn&#39;t work in this case. Very disappointing that GCC doesn&#39;t catch it before being lowered to a platform-specific IR. <a href=\"https://godbolt.org/z/5Zaq7-\" rel=\"nofollow noreferrer\">LLVM optimizes it</a> before any further lowering."}], "tags": [], "owner": {"reputation": 34086, "user_id": 787480, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/91cDR.png?s=128&g=1", "display_name": "Sneftel", "link": "https://stackoverflow.com/users/787480/sneftel"}, "is_accepted": false, "score": 48, "last_activity_date": 1550678687, "creation_date": 1550678687, "answer_id": 54790590, "question_id": 54786278, "link": "https://stackoverflow.com/questions/54786278/how-do-i-write-a-maintainable-fast-compile-time-bit-mask-in-c/54790590#54790590", "title": "How do I write a maintainable, fast, compile-time bit-mask in C++?", "body": "<p>The optimization you're looking for seems to be loop peeling, which is enabled at <code>-O3</code>, or manually with <code>-fpeel-loops</code>. I'm not sure why this falls under the purview of loop peeling rather than loop unrolling, but possibly it's unwilling to unroll a loop with nonlocal control flow inside it (as there is, potentially, from the range check).</p>\n\n<p>By default, though, GCC stops short of being able to peel all the iterations, which apparently is necessary. Experimentally, passing <code>-O2 -fpeel-loops --param max-peeled-insns=200</code> (the default value is 100) gets the job done with your original code: <a href=\"https://godbolt.org/z/NNWrga\" rel=\"noreferrer\">https://godbolt.org/z/NNWrga</a></p>\n"}, {"tags": [], "owner": {"reputation": 633, "user_id": 8556993, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ZMwv5kRkmCg/AAAAAAAAAAI/AAAAAAAAAAA/MbFztqQFFGc/photo.jpg?sz=128", "display_name": "Micha\u0142 \u0141o\u015b", "link": "https://stackoverflow.com/users/8556993/micha%c5%82-%c5%81o%c5%9b"}, "is_accepted": false, "score": 7, "last_activity_date": 1550680845, "creation_date": 1550680845, "answer_id": 54791324, "question_id": 54786278, "link": "https://stackoverflow.com/questions/54786278/how-do-i-write-a-maintainable-fast-compile-time-bit-mask-in-c/54791324#54791324", "title": "How do I write a maintainable, fast, compile-time bit-mask in C++?", "body": "<p>Since C++11 you could also use classic TMP technique:</p>\n\n<pre><code>template&lt;std::uint64_t Flag, std::uint64_t... Flags&gt;\nstruct bitmask\n{\n    static constexpr std::uint64_t mask = \n        bitmask&lt;Flag&gt;::value | bitmask&lt;Flags...&gt;::value;\n};\n\ntemplate&lt;std::uint64_t Flag&gt;\nstruct bitmask&lt;Flag&gt;\n{\n    static constexpr std::uint64_t value = (uint64_t)1 &lt;&lt; Flag;\n};\n\nvoid apply_known_mask(std::bitset&lt;64&gt; &amp;bits) \n{\n    constexpr auto mask = bitmask&lt;B, D, E, H, K, M, L, O&gt;::value;\n    bits &amp;= mask;\n}\n</code></pre>\n\n<p>Link to Compiler Explorer: <a href=\"https://godbolt.org/z/Gk6KX1\" rel=\"noreferrer\">https://godbolt.org/z/Gk6KX1</a></p>\n\n<p>The advantage of this approach over template constexpr function is that it's potentially slightly faster to compile due to <a href=\"https://www.reddit.com/r/cpp/comments/6gur2x/the_rule_of_chiel_aka_compiletime_cost_of/\" rel=\"noreferrer\">rule of Chiel</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 2, "creation_date": 1550682762, "post_id": 54791698, "comment_id": 96361838, "body": "In <a href=\"https://stackoverflow.com/questions/tagged/c%2b%2b11\">c++11</a> much of your <code>constexpr</code> code isn&#39;t legal.  I mean, some has 2 statements!  (C++11 constexpr sucked)"}, {"owner": {"reputation": 249985, "user_id": 147192, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/E78Vj.png?s=128&g=1", "display_name": "Matthieu M.", "link": "https://stackoverflow.com/users/147192/matthieu-m"}, "reply_to_user": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1550683782, "post_id": 54791698, "comment_id": 96362373, "body": "@Yakk-AdamNevraumont: You did realize that I posted <b>2</b> versions of the code, the first for C++14 onward, and a second specially tailored for C++11? (to account for its limitations)"}, {"owner": {"reputation": 8582, "user_id": 439751, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4b40ae065359026d01fa30223812d83?s=128&d=identicon&r=PG", "display_name": "James", "link": "https://stackoverflow.com/users/439751/james"}, "edited": false, "score": 1, "creation_date": 1550687546, "post_id": 54791698, "comment_id": 96364157, "body": "It might be better to use std::underlying_type instead of std::uint64_t."}, {"owner": {"reputation": 249985, "user_id": 147192, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/E78Vj.png?s=128&g=1", "display_name": "Matthieu M.", "link": "https://stackoverflow.com/users/147192/matthieu-m"}, "reply_to_user": {"reputation": 8582, "user_id": 439751, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4b40ae065359026d01fa30223812d83?s=128&d=identicon&r=PG", "display_name": "James", "link": "https://stackoverflow.com/users/439751/james"}, "edited": false, "score": 0, "creation_date": 1550688780, "post_id": 54791698, "comment_id": 96364782, "body": "@James: Actually, no. Do note that <code>EnumSet&lt;E&gt;</code> does not use a value of <code>E</code> as value directly, but instead uses <code>1 &lt;&lt; e</code>. It&#39;s a different domain altogether, which is actually what makes the class so valuable =&gt; no chance of accidentally indexing by <code>e</code> instead of <code>1 &lt;&lt; e</code>."}, {"owner": {"reputation": 8582, "user_id": 439751, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4b40ae065359026d01fa30223812d83?s=128&d=identicon&r=PG", "display_name": "James", "link": "https://stackoverflow.com/users/439751/james"}, "edited": false, "score": 0, "creation_date": 1550688946, "post_id": 54791698, "comment_id": 96364855, "body": "@MatthieuM. Yes you&#39;re right. I&#39;m confusing it with our own implementation which is very similar to yours. The disadvantage of using (1 &lt;&lt; e) is that if e is out of bounds for the underlying_type&#39;s size then it&#39;s probably UB, hopefully a compiler error."}, {"owner": {"reputation": 249985, "user_id": 147192, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/E78Vj.png?s=128&g=1", "display_name": "Matthieu M.", "link": "https://stackoverflow.com/users/147192/matthieu-m"}, "reply_to_user": {"reputation": 8582, "user_id": 439751, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4b40ae065359026d01fa30223812d83?s=128&d=identicon&r=PG", "display_name": "James", "link": "https://stackoverflow.com/users/439751/james"}, "edited": false, "score": 0, "creation_date": 1550689328, "post_id": 54791698, "comment_id": 96365042, "body": "@James: Yes. In the full-fledged implementation I use a smart enum instrumented with <code>constexpr std::underlying_type_t&lt;E&gt; min(Id&lt;E&gt;)</code> (and equivalent <code>max</code>), allowing me to select at compile-time the most suitable unsigned integral type for storage. I&#39;ll leave that as an exercise to the reader :)"}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1550690900, "post_id": 54791698, "comment_id": 96365750, "body": "Ah, I missed that you striped <code>constexpr</code> off <code>EnumSet&amp; operator&amp;=</code> and similar.  My bad."}, {"owner": {"reputation": 249985, "user_id": 147192, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/E78Vj.png?s=128&g=1", "display_name": "Matthieu M.", "link": "https://stackoverflow.com/users/147192/matthieu-m"}, "reply_to_user": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1550692277, "post_id": 54791698, "comment_id": 96366459, "body": "@Yakk-AdamNevraumont: Honestly, it&#39;s been so long since I last used C++11, I had to get godbolt to highlight the issues. I had long forgotten how restricted C++11 <code>constexpr</code> was :("}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1550698025, "post_id": 54791698, "comment_id": 96369044, "body": "@MatthieuM. Still better than macros!"}], "tags": [], "owner": {"reputation": 249985, "user_id": 147192, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/E78Vj.png?s=128&g=1", "display_name": "Matthieu M.", "link": "https://stackoverflow.com/users/147192/matthieu-m"}, "is_accepted": false, "score": 8, "last_activity_date": 1550744288, "last_edit_date": 1550744288, "creation_date": 1550682009, "answer_id": 54791698, "question_id": 54786278, "link": "https://stackoverflow.com/questions/54786278/how-do-i-write-a-maintainable-fast-compile-time-bit-mask-in-c/54791698#54791698", "title": "How do I write a maintainable, fast, compile-time bit-mask in C++?", "body": "<p>I would encourage you to write a proper <code>EnumSet</code> type.</p>\n\n<p>Writing a basic <code>EnumSet&lt;E&gt;</code> in C++14 (onwards) based on <code>std::uint64_t</code> is trivial:</p>\n\n<pre><code>template &lt;typename E&gt;\nclass EnumSet {\npublic:\n    constexpr EnumSet() = default;\n\n    constexpr EnumSet(std::initializer_list&lt;E&gt; values) {\n        for (auto e : values) {\n            set(e);\n        }\n    }\n\n    constexpr bool has(E e) const { return mData &amp; mask(e); }\n\n    constexpr EnumSet&amp; set(E e) { mData |= mask(e); return *this; }\n\n    constexpr EnumSet&amp; unset(E e) { mData &amp;= ~mask(e); return *this; }\n\n    constexpr EnumSet&amp; operator&amp;=(const EnumSet&amp; other) {\n        mData &amp;= other.mData;\n        return *this;\n    }\n\n    constexpr EnumSet&amp; operator|=(const EnumSet&amp; other) {\n        mData |= other.mData;\n        return *this;\n    }\n\nprivate:\n    static constexpr std::uint64_t mask(E e) {\n        return std::uint64_t(1) &lt;&lt; e;\n    }\n\n    std::uint64_t mData = 0;\n};\n</code></pre>\n\n<p>This allows you to write simple code:</p>\n\n<pre><code>void apply_known_mask(EnumSet&lt;Flags&gt;&amp; flags) {\n    static constexpr EnumSet&lt;Flags&gt; IMPORTANT{ B, D, E, H, K, M, L, O };\n\n    flags &amp;= IMPORTANT;\n}\n</code></pre>\n\n<hr>\n\n<p>In C++11, it requires some convolutions, but remains possible nonetheless:</p>\n\n<pre><code>template &lt;typename E&gt;\nclass EnumSet {\npublic:\n    template &lt;E... Values&gt;\n    static constexpr EnumSet make() {\n        return EnumSet(make_impl(Values...));\n    }\n\n    constexpr EnumSet() = default;\n\n    constexpr bool has(E e) const { return mData &amp; mask(e); }\n\n    void set(E e) { mData |= mask(e); }\n\n    void unset(E e) { mData &amp;= ~mask(e); }\n\n    EnumSet&amp; operator&amp;=(const EnumSet&amp; other) {\n        mData &amp;= other.mData;\n        return *this;\n    }\n\n    EnumSet&amp; operator|=(const EnumSet&amp; other) {\n        mData |= other.mData;\n        return *this;\n    }\n\nprivate:\n    static constexpr std::uint64_t mask(E e) {\n        return std::uint64_t(1) &lt;&lt; e;\n    }\n\n    static constexpr std::uint64_t make_impl() { return 0; }\n\n    template &lt;typename... Tail&gt;\n    static constexpr std::uint64_t make_impl(E head, Tail... tail) {\n        return mask(head) | make_impl(tail...);\n    }\n\n    explicit constexpr EnumSet(std::uint64_t data): mData(data) {}\n\n    std::uint64_t mData = 0;\n};\n</code></pre>\n\n<p>And is invoked with:</p>\n\n<pre><code>void apply_known_mask(EnumSet&lt;Flags&gt;&amp; flags) {\n    static constexpr EnumSet&lt;Flags&gt; IMPORTANT =\n        EnumSet&lt;Flags&gt;::make&lt;B, D, E, H, K, M, L, O&gt;();\n\n    flags &amp;= IMPORTANT;\n}\n</code></pre>\n\n<p>Even GCC trivially generates an <code>and</code> instruction at <code>-O1</code> <a href=\"https://godbolt.org/z/LfBBhq\" rel=\"nofollow noreferrer\">godbolt</a>:</p>\n\n<pre><code>apply_known_mask(EnumSet&lt;Flags&gt;&amp;):\n        and     QWORD PTR [rdi], 775946532\n        ret\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 633, "user_id": 8556993, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ZMwv5kRkmCg/AAAAAAAAAAI/AAAAAAAAAAA/MbFztqQFFGc/photo.jpg?sz=128", "display_name": "Micha\u0142 \u0141o\u015b", "link": "https://stackoverflow.com/users/8556993/micha%c5%82-%c5%81o%c5%9b"}, "edited": false, "score": 1, "creation_date": 1550836884, "post_id": 54826478, "comment_id": 96427946, "body": "&quot;B&quot;, &quot;D&quot;, etc are not flags themselves."}, {"owner": {"reputation": 212, "user_id": 11051061, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8fb01de034cd8ac4dd41288a05987653?s=128&d=identicon&r=PG&f=1", "display_name": "ANone", "link": "https://stackoverflow.com/users/11051061/anone"}, "reply_to_user": {"reputation": 633, "user_id": 8556993, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ZMwv5kRkmCg/AAAAAAAAAAI/AAAAAAAAAAA/MbFztqQFFGc/photo.jpg?sz=128", "display_name": "Micha\u0142 \u0141o\u015b", "link": "https://stackoverflow.com/users/8556993/micha%c5%82-%c5%81o%c5%9b"}, "edited": false, "score": 0, "creation_date": 1550837329, "post_id": 54826478, "comment_id": 96428206, "body": "Yes, you would need to transform these to flags first. That&#39;s not at all clear in my answer. sorry. I will update."}, {"owner": {"reputation": 1985, "user_id": 4612476, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/719f14270bfe54a8a9cf6e831fde6aa2?s=128&d=identicon&r=PG", "display_name": "Cameron Tacklind", "link": "https://stackoverflow.com/users/4612476/cameron-tacklind"}, "edited": false, "score": 0, "creation_date": 1618599781, "post_id": 54826478, "comment_id": 118660162, "body": "It&#39;s not about easy to write. If that were true, we&#39;d all write C. It&#39;s about type safety, compile-time checks, const-correctness, generics, and code reuse."}], "tags": [], "owner": {"reputation": 212, "user_id": 11051061, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8fb01de034cd8ac4dd41288a05987653?s=128&d=identicon&r=PG&f=1", "display_name": "ANone", "link": "https://stackoverflow.com/users/11051061/anone"}, "is_accepted": false, "score": 0, "last_activity_date": 1550836278, "creation_date": 1550836278, "answer_id": 54826478, "question_id": 54786278, "link": "https://stackoverflow.com/questions/54786278/how-do-i-write-a-maintainable-fast-compile-time-bit-mask-in-c/54826478#54826478", "title": "How do I write a maintainable, fast, compile-time bit-mask in C++?", "body": "<p>There are some far to 'clever' ideas here. You are probably not helping maintainability by following them.</p>\n\n<p>is</p>\n\n<pre><code>{B, D, E, H, K, M, L, O};\n</code></pre>\n\n<p>so much easier to write than</p>\n\n<pre><code>(B| D| E| H| K| M| L| O);\n</code></pre>\n\n<p>?</p>\n\n<p>Then none of the rest of the code is needed.</p>\n"}], "owner": {"reputation": 5642, "user_id": 2137996, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/dYdyn.jpg?s=128&g=1", "display_name": "Alex Reinking", "link": "https://stackoverflow.com/users/2137996/alex-reinking"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8756, "favorite_count": 34, "accepted_answer_id": 54786503, "answer_count": 6, "score": 115, "last_activity_date": 1582877969, "creation_date": 1550665236, "last_edit_date": 1550695351, "question_id": 54786278, "link": "https://stackoverflow.com/questions/54786278/how-do-i-write-a-maintainable-fast-compile-time-bit-mask-in-c", "title": "How do I write a maintainable, fast, compile-time bit-mask in C++?", "body": "<p>I have some code that is more or less like this:</p>\n\n<pre><code>#include &lt;bitset&gt;\n\nenum Flags { A = 1, B = 2, C = 3, D = 5,\n             E = 8, F = 13, G = 21, H,\n             I, J, K, L, M, N, O };\n\nvoid apply_known_mask(std::bitset&lt;64&gt; &amp;bits) {\n    const Flags important_bits[] = { B, D, E, H, K, M, L, O };\n    std::remove_reference&lt;decltype(bits)&gt;::type mask{};\n    for (const auto&amp; bit : important_bits) {\n        mask.set(bit);\n    }\n\n    bits &amp;= mask;\n}\n</code></pre>\n\n<p><a href=\"https://godbolt.org/z/_eO-LD\" rel=\"noreferrer\">Clang >= 3.6</a> does the smart thing and compiles this to a single <code>and</code> instruction (which then gets inlined everywhere else):</p>\n\n<pre><code>apply_known_mask(std::bitset&lt;64ul&gt;&amp;):  # @apply_known_mask(std::bitset&lt;64ul&gt;&amp;)\n        and     qword ptr [rdi], 775946532\n        ret\n</code></pre>\n\n<p>But <a href=\"https://godbolt.org/z/8n571x\" rel=\"noreferrer\">every version of GCC I've tried</a> compiles this to an enormous mess that includes error handling that should be statically DCE'd. In other code, it will even place the <code>important_bits</code> equivalent as data in line with the code!</p>\n\n<pre><code>.LC0:\n        .string \"bitset::set\"\n.LC1:\n        .string \"%s: __position (which is %zu) &gt;= _Nb (which is %zu)\"\napply_known_mask(std::bitset&lt;64ul&gt;&amp;):\n        sub     rsp, 40\n        xor     esi, esi\n        mov     ecx, 2\n        movabs  rax, 21474836482\n        mov     QWORD PTR [rsp], rax\n        mov     r8d, 1\n        movabs  rax, 94489280520\n        mov     QWORD PTR [rsp+8], rax\n        movabs  rax, 115964117017\n        mov     QWORD PTR [rsp+16], rax\n        movabs  rax, 124554051610\n        mov     QWORD PTR [rsp+24], rax\n        mov     rax, rsp\n        jmp     .L2\n.L3:\n        mov     edx, DWORD PTR [rax]\n        mov     rcx, rdx\n        cmp     edx, 63\n        ja      .L7\n.L2:\n        mov     rdx, r8\n        add     rax, 4\n        sal     rdx, cl\n        lea     rcx, [rsp+32]\n        or      rsi, rdx\n        cmp     rax, rcx\n        jne     .L3\n        and     QWORD PTR [rdi], rsi\n        add     rsp, 40\n        ret\n.L7:\n        mov     ecx, 64\n        mov     esi, OFFSET FLAT:.LC0\n        mov     edi, OFFSET FLAT:.LC1\n        xor     eax, eax\n        call    std::__throw_out_of_range_fmt(char const*, ...)\n</code></pre>\n\n<p>How should I write this code so that both compilers can do the right thing? Failing that, how should I write this so that it remains clear, fast, and maintainable?</p>\n"}, {"tags": ["c++", "compiler-errors"], "comments": [{"owner": {"reputation": 16436, "user_id": 10411602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b534549770aedbc4d7eb03a39d740f6?s=128&d=identicon&r=PG&f=1", "display_name": "Blaze", "link": "https://stackoverflow.com/users/10411602/blaze"}, "edited": false, "score": 9, "creation_date": 1550665401, "post_id": 54786264, "comment_id": 96350947, "body": "In <code>s[i\u22121]</code>, that&#39;s not the right minus symbol. It should be <code>s[i-1]</code>. Same for the other instances of <code>i\u22121</code> in your code. The error message gives you a hint as it displays it as <code>s[i?1][j?1]</code>."}, {"owner": {"reputation": 9602, "user_id": 7151494, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-a_FzvY-b2O0/AAAAAAAAAAI/AAAAAAAAAEw/kNwilSAvQTI/photo.jpg?sz=128", "display_name": "Fureeish", "link": "https://stackoverflow.com/users/7151494/fureeish"}, "edited": false, "score": 6, "creation_date": 1550665405, "post_id": 54786264, "comment_id": 96350951, "body": "<code>int n; char s [n][n]; cin&gt;&gt;n; </code> does not do what you think it does."}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 2, "creation_date": 1550665578, "post_id": 54786264, "comment_id": 96351047, "body": "Please compile with <code>-std=c++17 -Wall -Wextra -pedantic-errors</code> and don&#39;t use <a href=\"https://stackoverflow.com/questions/1452721/why-is-using-namespace-std-considered-bad-practice\"><code>using namespace std;</code></a> or <a href=\"https://stackoverflow.com/questions/31816095/why-should-i-not-include-bits-stdc-h\"><code>&lt;bits&#47;stdc++.h&gt;</code></a>, so that you&#39;re writing actual C++."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1550665899, "post_id": 54786264, "comment_id": 96351252, "body": "... and <code>char s[n][n];</code> is not standard C++, it&#39;s a gnu extension"}, {"owner": {"reputation": 7089, "user_id": 2852165, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/JwDJG.jpg?s=128&g=1", "display_name": "SHR", "link": "https://stackoverflow.com/users/2852165/shr"}, "edited": false, "score": 0, "creation_date": 1550666247, "post_id": 54786264, "comment_id": 96351465, "body": "did you copy the code from word?"}], "answers": [{"tags": [], "owner": {"reputation": 2564, "user_id": 2754510, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/OMF8A.jpg?s=128&g=1", "display_name": "Constantinos Glynos", "link": "https://stackoverflow.com/users/2754510/constantinos-glynos"}, "is_accepted": false, "score": 0, "last_activity_date": 1550677662, "creation_date": 1550677662, "answer_id": 54790227, "question_id": 54786264, "link": "https://stackoverflow.com/questions/54786264/error-in-code-while-using-logical-operator-several-times-in-c/54790227#54790227", "title": "Error in code while using logical operator &#39;&amp;&amp;&#39; several times in c++", "body": "<p>There's nothing wrong with the logical ANDs in the if-statement - well, apart from being unreadable. The problem is everywhere else tbh.</p>\n\n<pre><code>using namespace std;\n</code></pre>\n\n<p>Try to avoid using namespaces like that. This is so that you prevent ambiguity with name collisions.</p>\n\n<pre><code>char s[n][n];\n</code></pre>\n\n<p>This is not valid C++. It is known as a VLA. Read more about this in this answer <a href=\"https://stackoverflow.com/a/54674671/2754510\">here</a>. Instead, use <code>constexpr</code> or a dynamic array such as <code>std::vector</code>.</p>\n\n<pre><code>int n;\nchar s[n][n];\ncin&gt;&gt;n; \n</code></pre>\n\n<p>Due to the fact that <code>n</code> is a local variable, it is defined using garbage values (193446 or -539646 or ...). This means that you may end up with a 2D array of negative spaces??? It's only after that <code>n</code> is being set to a number from the user input. Assuming that VLAs are not a problem, what you should do is the following:</p>\n\n<pre><code>int n = 0;\ncin&gt;&gt;n; \nchar s[n][n]; //still not valid C++\n</code></pre>\n\n<p>Furthermore, the 2D array is initialized with garbage values.</p>\n\n<p>This, I have to admit, I do not understand. If the elements of the 2D array are only set when the user input is 'X', then what values will the rest of the array have?</p>\n\n<pre><code>cin &gt;&gt; c ;\nif(c=='X')\n{\n   s[i][j]='X';\n}\n</code></pre>\n\n<p>Did you just want to fill in the array with user input values? If so, then all you need is the following:</p>\n\n<pre><code>for(int i=0; i&lt;n; i++)\n    for(int j=0; j&lt;n; j++)\n        std::cin &gt;&gt; s[i][j];\n</code></pre>\n\n<p>And finally the program counts the X patterns where X needs to be at all four corners of another X. Apart from the fact that having long if-statements is a bad practise, the if-statement would return the correct result.</p>\n\n<p>See a running version of your demo here: <a href=\"https://rextester.com/ASQ26945\" rel=\"nofollow noreferrer\">https://rextester.com/ASQ26945</a></p>\n"}], "owner": {"reputation": 21, "user_id": 8581610, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5064472cb4fa89982bb240d6ec3d3af?s=128&d=identicon&r=PG", "display_name": "user8581610", "link": "https://stackoverflow.com/users/8581610/user8581610"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 110, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1550677662, "creation_date": 1550665199, "last_edit_date": 1550665338, "question_id": 54786264, "link": "https://stackoverflow.com/questions/54786264/error-in-code-while-using-logical-operator-several-times-in-c", "title": "Error in code while using logical operator &#39;&amp;&amp;&#39; several times in c++", "body": "<p>I have done Following code to count X in an array. Here the compliation error which i get.</p>\n\n<pre><code>#include &lt;bits/stdc++.h&gt;\nusing namespace std;\n\nint main() {\n    int n;\n\n    char s [n][n]  ;\n    cin&gt;&gt;n; \n    char c ; \n    for(int i=0;i&lt;n;i++)\n    {\n        for(int j=0;j&lt;n;j++)\n        {\n            cin &gt;&gt; c ;\n            if(c=='X')\n            {\n                s[i][j]='X';\n            }\n        }\n\n    } \n\n    int count=0; \n\n    for(int i=1;i&lt;n-1;i++)\n    {\n        for(int j=1;j&lt;n-1;j++)\n        { \n            if( s[i][j]=='X' &amp;&amp; s[i\u22121][j\u22121] =='X' &amp;&amp; s[i\u22121][j+1]=='X'&amp;&amp; s[i+1][j\u22121] =='X' &amp;&amp; s[i+1][j+1] =='X')      \n                count++;\n        }\n    }\n\n    cout&lt;&lt;count&lt;&lt;endl;\n    return 0;\n}\n</code></pre>\n\n<blockquote>\n  <p>prog.cpp: In function \u2018int main()\u2019:\n  prog.cpp:23:34: error: expected \u2018:\u2019 before \u2018]\u2019 token\n         { if( s[i][j]=='X' &amp;&amp; s[i?1][j?1] =='X' &amp;&amp; s[i?1][j+1]=='X'&amp;&amp; s[i+1][j?1] =='X' &amp;&amp; s[i+1][j+1] =='X')\n                                    ^</p>\n</blockquote>\n"}, {"tags": ["c++", "design-patterns", "shared-libraries", "token-name-resolution"], "comments": [{"owner": {"reputation": 5012, "user_id": 2416647, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f471b80868ae9c93d0903127ed27e2f9?s=128&d=identicon&r=PG", "display_name": "schorsch312", "link": "https://stackoverflow.com/users/2416647/schorsch312"}, "edited": false, "score": 0, "creation_date": 1550668369, "post_id": 54786262, "comment_id": 96352711, "body": "Why would you like to do this? The best practice would be to create a lib3.so, which includes the <code>common.cpp</code>  logic and link both libraries and the <code>APP</code> against it."}, {"owner": {"reputation": 1209, "user_id": 10662240, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vTic2.jpg?s=128&g=1", "display_name": "Krzysiek Karbowiak", "link": "https://stackoverflow.com/users/10662240/krzysiek-karbowiak"}, "edited": false, "score": 0, "creation_date": 1550668638, "post_id": 54786262, "comment_id": 96352873, "body": "You can build both dynamic libraries without problems. You should not get any name resolution errors as long as the common functions are not exported."}], "answers": [{"comments": [{"owner": {"reputation": 519, "user_id": 5350456, "user_type": "registered", "accept_rate": 33, "profile_image": "https://lh3.googleusercontent.com/-TkKadvvSb1s/AAAAAAAAAAI/AAAAAAAAAD4/RnS9HVFQxqg/photo.jpg?sz=128", "display_name": "arun pal", "link": "https://stackoverflow.com/users/5350456/arun-pal"}, "edited": false, "score": 0, "creation_date": 1550732231, "post_id": 54793370, "comment_id": 96378804, "body": "Understood everything , except the last part of different preprocessor etc."}, {"owner": {"reputation": 45838, "user_id": 1362568, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/EAFi0.jpg?s=128&g=1", "display_name": "Mike Kinghan", "link": "https://stackoverflow.com/users/1362568/mike-kinghan"}, "reply_to_user": {"reputation": 519, "user_id": 5350456, "user_type": "registered", "accept_rate": 33, "profile_image": "https://lh3.googleusercontent.com/-TkKadvvSb1s/AAAAAAAAAAI/AAAAAAAAAD4/RnS9HVFQxqg/photo.jpg?sz=128", "display_name": "arun pal", "link": "https://stackoverflow.com/users/5350456/arun-pal"}, "edited": false, "score": 1, "creation_date": 1550734337, "post_id": 54793370, "comment_id": 96379705, "body": "@arunpal Hi. Well if I compiled everything with <code>-Dcommon=uncommon</code> for my <code>libfoo</code> but not <code>libbar</code>, then there would be no <code>common::</code> symbols in both libraries. Or I could use linker option <code>--defsym</code> to change the names of symbols in <code>libbar</code> but not <code>libfoo</code>. So [1] means you don&#39;t modify the source or object code differently for the two libraries."}], "tags": [], "owner": {"reputation": 45838, "user_id": 1362568, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/EAFi0.jpg?s=128&g=1", "display_name": "Mike Kinghan", "link": "https://stackoverflow.com/users/1362568/mike-kinghan"}, "is_accepted": true, "score": 1, "last_activity_date": 1550689877, "last_edit_date": 1550689877, "creation_date": 1550688816, "answer_id": 54793370, "question_id": 54786262, "link": "https://stackoverflow.com/questions/54786262/c-what-would-happen-if-two-library-uses-same-source-code-for-build/54793370#54793370", "title": "C++ - What would happen if two library uses same source code for build", "body": "<p>Naturally one would suggest you consider building the common functionality shared\nby <code>lib1.so</code> and <code>lib2.so</code> into a distinct shared library, <code>libcommon.so</code>.</p>\n\n<p>But if you want nevertheless to statically link the common functionality\nidentically<sup>1</sup>\ninto both <code>lib1.so</code> and <code>lib2.so</code>, you can link these two shared libraries with\nyour program. The linker will have no problem with that. Here is an\nillustration:</p>\n\n<p><strong>common.h</strong></p>\n\n<pre><code>#ifndef COMMON_H\n#define COMMON_H\n#include &lt;string&gt;\n\nstruct common\n{\n    void print1(std::string const &amp; s) const;\n    void print2(std::string const &amp; s) const;\n    static unsigned count;\n};\n</code></pre>\n\n<p><strong>common.cpp</strong></p>\n\n<pre><code>#include &lt;iostream&gt;\n#include \"common.h\"\n\nunsigned common::count = 0;\n\nvoid common::print1(std::string const &amp; s) const\n{\n    std::cout &lt;&lt; s &lt;&lt; \". (count = \" &lt;&lt; count++ &lt;&lt; \")\" &lt;&lt; std::endl;\n}\n\nvoid common::print2(std::string const &amp; s) const\n{\n    std::cout &lt;&lt; s &lt;&lt; \". (count = \" &lt;&lt; count++ &lt;&lt; \")\" &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p><strong>foo.h</strong></p>\n\n<pre><code>#ifndef FOO_H\n#define FOO_H\n#include \"common.h\"\n\nstruct foo\n{\n    void i_am() const;\nprivate:\n    common _c;\n};\n\n#endif\n</code></pre>\n\n<p><strong>foo.cpp</strong></p>\n\n<pre><code>#include \"foo.h\"\n\nvoid foo::i_am() const\n{\n    _c.print1(__PRETTY_FUNCTION__);\n}\n</code></pre>\n\n<p><strong>bar.h</strong></p>\n\n<pre><code>#ifndef BAR_H\n#define BAR_H\n#include \"common.h\"\n\nstruct bar\n{\n    void i_am() const;\nprivate:\n    common _c;\n};\n\n#endif\n</code></pre>\n\n<p><strong>bar.cpp</strong></p>\n\n<pre><code>#include \"bar.h\"\n\nvoid bar::i_am() const\n{\n    _c.print2(__PRETTY_FUNCTION__);\n}\n</code></pre>\n\n<p>Now we'll make two shared libraries, <code>libfoo.so</code> and <code>libbar.so</code>. The\nsource files we need are <code>foo.cpp</code>, <code>bar.cpp</code> and <code>common.cpp</code>. First\ncompile them all to <a href=\"https://en.wikipedia.org/wiki/Position-independent_code\" rel=\"nofollow noreferrer\">PIC (Position Independent Code</a>\nobject files:</p>\n\n<pre><code>$ g++ -Wall -Wextra -fPIC -c foo.cpp bar.cpp common.cpp\n</code></pre>\n\n<p>And here are the object files we just made:</p>\n\n<pre><code>$ ls *.o\nbar.o  common.o  foo.o\n</code></pre>\n\n<p>Now link <code>libfoo.so</code> using <code>foo.o</code> and <code>common.o</code>:</p>\n\n<pre><code>$ g++ -shared -o libfoo.so foo.o common.o\n</code></pre>\n\n<p>Then link <code>libbar.so</code> using <code>bar.o</code> and (again) <code>common.o</code></p>\n\n<pre><code>$ g++ -shared -o libbar.so bar.o common.o\n</code></pre>\n\n<p>We can see that <code>common::...</code> symbols are <em>defined</em> and exported by <code>libfoo.so</code>:</p>\n\n<pre><code>$ nm -DC libfoo.so | grep common\n0000000000202094 B common::count\n0000000000000e7e T common::print1(std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt; const&amp;) const\n0000000000000efa T common::print2(std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt; const&amp;) const\n</code></pre>\n\n<p>(<code>T</code> means <em>defined in the code section</em>, <code>B</code> means <em>defined in the uinitialized data section</em>). And exactly the same is true about <code>libbar.so</code></p>\n\n<pre><code>$ nm -DC libbar.so | grep common\n0000000000202094 B common::count\n0000000000000e7e T common::print1(std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt; const&amp;) const\n0000000000000efa T common::print2(std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt; const&amp;) const\n</code></pre>\n\n<p>Now we'll make a program linked with these libraries:</p>\n\n<p><strong>main.cpp</strong></p>\n\n<pre><code>#include \"foo.h\"\n#include \"bar.h\"\n\nint main()\n{\n    foo f;\n    bar b;\n    common c;\n\n    f.i_am();\n    b.i_am();\n    c.print1(__PRETTY_FUNCTION__);\n    return 0;\n}\n</code></pre>\n\n<p>It calls <code>foo</code>; it calls <code>bar</code>,\nand it calls <code>common::print1</code>.</p>\n\n<pre><code>$ g++ -Wall -Wextra -c main.cpp\n$ g++ -o prog main.o -L. -lfoo -lbar -Wl,-rpath=$PWD\n</code></pre>\n\n<p>It runs like:</p>\n\n<pre><code>$ ./prog\nvoid foo::i_am() const. (count = 0)\nvoid bar::i_am() const. (count = 1)\nint main(). (count = 2)\n</code></pre>\n\n<p>Which is just fine. You might perhaps have worried that <em>two copies</em> of the static class variable\n<code>common::count</code> would end up in the program - one from <code>libfoo.so</code> and another from <code>libbar.so</code>,\nand that <code>foo</code> would increment one copy and <code>bar</code> would increment the other. But that didn't happen.</p>\n\n<p>How did the linker resolve the <code>common::...</code> symbols? Well to see that we need to find their mangled forms,\nas the linker sees them:</p>\n\n<pre><code>$ nm common.o | grep common\n0000000000000140 t _GLOBAL__sub_I_common.cpp\n0000000000000000 B _ZN6common5countE\n0000000000000000 T _ZNK6common6print1ERKNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEE\n000000000000007c T _ZNK6common6print2ERKNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEE\n</code></pre>\n\n<p>There they all are and we can tell which one is which with <code>c++filt</code>:</p>\n\n<pre><code>$ c++filt _ZN6common5countE\ncommon::count\n\n$ c++filt _ZNK6common6print1ERKNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEE\ncommon::print1(std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt; const&amp;) const\n\n$ c++filt _ZNK6common6print2ERKNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEE\ncommon::print2(std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt; const&amp;) const\n</code></pre>\n\n<p>Now we can re-do the linkage of <code>prog</code>, this time asking the linker to tell us the names of the\ninput files in which these <code>common::...</code> symbols were defined or referenced. This diagnostic\nlinkage is a bit of a mouthful, so I'll <code>\\</code>-split it:</p>\n\n<pre><code>$ g++ -o prog main.o -L. -lfoo -lbar -Wl,-rpath=$PWD \\\n    -Wl,-trace-symbol=_ZN6common5countE \\\n    -Wl,-trace-symbol=_ZNK6common6print1ERKNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEE \\\n    -Wl,-trace-symbol=_ZNK6common6print2ERKNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEE        \nmain.o: reference to _ZNK6common6print1ERKNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEE\n./libfoo.so: definition of _ZN6common5countE\n./libfoo.so: definition of _ZNK6common6print2ERKNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEE\n./libfoo.so: definition of _ZNK6common6print1ERKNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEE\n./libbar.so: reference to _ZN6common5countE\n./libbar.so: reference to _ZNK6common6print2ERKNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEE\n./libbar.so: reference to _ZNK6common6print1ERKNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEE\n</code></pre>\n\n<p>So the linker tells us that it linked the definition of <code>common::count</code> from <code>./libfoo.so</code>. Likewise the\ndefinition of <code>common::print1</code>. Likewise the definition of <code>common::print2</code>. It linked <em>all</em> the\n<code>common::...</code> symbol definitions from <code>libfoo.so</code>.</p>\n\n<p>It tells us that the reference(s) to <code>common::print1</code> in <code>main.o</code> was resolved to the definition in <code>libfoo.so</code>. Likewise\nthe reference(s) to <code>common::count</code> in <code>libbar.so</code>. Likewise the reference(s) to <code>common::print1</code> and\n<code>common::print2</code> in <code>libbar.so</code>. <em>All</em> the <code>common::...</code> symbol references in the program were resolved to the\ndefinitions provided by <code>libfoo.so</code>.</p>\n\n<p>So there were no <em>multiple definition</em> errors, and there is no uncertainty about which \"copies\" or \"versions\" of the <code>common::...</code> symbols are used\nby the program: it just uses the definitions from <code>libfoo.so</code>.</p>\n\n<p>Why? Simply because <code>libfoo.so</code> was the <em>first</em> library in the linkage that provided definitions\nfor the <code>common::...</code>symbols. If we relink <code>prog</code> with the order of <code>-lfoo</code> and <code>-lbar</code> reversed:</p>\n\n<pre><code>$ g++ -o prog main.o -L. -lbar -lfoo -Wl,-rpath=$PWD \\\n    -Wl,-trace-symbol=_ZN6common5countE \\\n    -Wl,-trace-symbol=_ZNK6common6print1ERKNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEE \\\n    -Wl,-trace-symbol=_ZNK6common6print2ERKNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEE        \nmain.o: reference to _ZNK6common6print1ERKNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEE\n./libbar.so: definition of _ZN6common5countE\n./libbar.so: definition of _ZNK6common6print2ERKNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEE\n./libbar.so: definition of _ZNK6common6print1ERKNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEE\n./libfoo.so: reference to _ZN6common5countE\n./libfoo.so: reference to _ZNK6common6print2ERKNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEE\n./libfoo.so: reference to _ZNK6common6print1ERKNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEE\n</code></pre>\n\n<p>then we get exactly the opposite answers. <em>All</em> the <code>common::...</code> symbol references in the program\nare now resolved to the definitions provided by <code>libbar.so</code>. Because <code>libbar.so</code> provided them <em>first</em>.\nThere is still no uncertainty, and it makes no difference to the program, because both <code>libfoo.so</code>\nand <code>libbar.so</code> linked the <code>common::...</code> definitions from the same object file, <code>common.o</code>.</p>\n\n<p>The linker does not <em>try</em> to find multiple definitions of symbols. Once it has found a\ndefinition of a symbol <em>S</em>, in an input object file or shared library, it binds references to\n<em>S</em> to the definition it has found and is done with resolving <em>S</em>. It does\nnot care if a shared library it finds later can provide another definition of <em>S</em>, the same or different,\neven if that later shared library resolves symbols <em>other</em> than <em>S</em>.</p>\n\n<p>The only way in which you can cause a multiple definition error is by compelling the linker\nto <em>statically link</em> multiple definitions, i.e. compel it to physically merge into the output binary\ntwo <em>object files</em> <code>obj1.o</code> and <code>obj2.o</code> both of which contain a definition <em>S</em>.\nIf you do that, the competing static definitions have exactly the same status, and only\none definition can be used by the program, so the linker has to fail you. But it does not need to take any notice of a\ndynamic symbol definition of <em>S</em> provided by a shared library <em>if it has already resolved S</em>, and it does not do so.</p>\n\n<p><hr>\n[1] Of course, if you compile and link <code>lib1</code> and <code>lib2</code> with different preprocessor, compiler or linkage options, you can sabotage the \"common\" functionality to an arbitary extent.</p>\n"}], "owner": {"reputation": 519, "user_id": 5350456, "user_type": "registered", "accept_rate": 33, "profile_image": "https://lh3.googleusercontent.com/-TkKadvvSb1s/AAAAAAAAAAI/AAAAAAAAAD4/RnS9HVFQxqg/photo.jpg?sz=128", "display_name": "arun pal", "link": "https://stackoverflow.com/users/5350456/arun-pal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 509, "favorite_count": 0, "accepted_answer_id": 54793370, "answer_count": 1, "score": 0, "last_activity_date": 1550689877, "creation_date": 1550665186, "last_edit_date": 1550671516, "question_id": 54786262, "link": "https://stackoverflow.com/questions/54786262/c-what-would-happen-if-two-library-uses-same-source-code-for-build", "title": "C++ - What would happen if two library uses same source code for build", "body": "<p>I have doubt is it possible if  I built <code>lib1.so</code> using source file <code>common.cpp</code>and <code>lib2.so</code> using same source file <code>common.cpp</code> again. Now I want to build my application <code>APP</code> using this two library ,</p>\n\n<p>My question are </p>\n\n<ol>\n<li>is it possible Or it will give me error ? </li>\n<li>If it will successfully built then how naming gets resolved? \nF.e. let say <code>foo</code> is class in <code>common.cpp</code>. <code>foo_v1</code> is object of foo in lib1.so and <code>foo_v2</code> is object of foo in lib2.so. Now during bulid of <code>APP</code> what would happen? Also is it possible to create object of foo in <code>APP</code> application ?</li>\n</ol>\n"}, {"tags": ["c++", "mfc", "directx", "sharpdx", "direct2d"], "answers": [{"tags": [], "owner": {"reputation": 894, "user_id": 5758312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15560486f98d522b0e9a43cc60c82144?s=128&d=identicon&r=PG&f=1", "display_name": "bunglehead", "link": "https://stackoverflow.com/users/5758312/bunglehead"}, "is_accepted": false, "score": 0, "last_activity_date": 1550740159, "creation_date": 1550740159, "answer_id": 54803153, "question_id": 54786119, "link": "https://stackoverflow.com/questions/54786119/how-to-prevent-direct2d-stretching-the-view-when-window-size-changed/54803153#54803153", "title": "How to prevent direct2d \u201cstretching\u201d the view when window size changed?", "body": "<p>You are already ignoring size change messages, and that's why surface size does not match client area size when presenting. You can try to offset this effect by setting target resolution according to \"client area / current target size\" factor, right before doing EndDraw(). I have no idea if that will help, or what will happen to uncovered window area outside of current target rectangle.</p>\n"}], "owner": {"reputation": 870, "user_id": 7206675, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/8UtP3.png?s=128&g=1", "display_name": "google dev", "link": "https://stackoverflow.com/users/7206675/google-dev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 181, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1550740159, "creation_date": 1550664724, "last_edit_date": 1550666079, "question_id": 54786119, "link": "https://stackoverflow.com/questions/54786119/how-to-prevent-direct2d-stretching-the-view-when-window-size-changed", "title": "How to prevent direct2d \u201cstretching\u201d the view when window size changed?", "body": "<p>I am rendering text with <code>ID2D1HwndRenderTarget</code>.</p>\n\n<p>When there is a change of the UI window size, I want to prevent the stretch of the text being rendered - so it will be unchanged until I will directly make a rendering command.</p>\n\n<p>On <a href=\"https://docs.microsoft.com/en-us/windows/desktop/api/d2d1/nn-d2d1-id2d1hwndrendertarget\" rel=\"nofollow noreferrer\">Direct2D documentation</a> the behavior is described:</p>\n\n<blockquote>\n  <p>If EndDraw presents the buffer, this bitmap is stretched to cover the\n  surface where it is presented: the entire client area of the window</p>\n</blockquote>\n\n<p>I know the <a href=\"https://docs.microsoft.com/en-us/windows/desktop/api/d2d1/nn-d2d1-id2d1hwndrendertarget\" rel=\"nofollow noreferrer\">ID2D1HwndRenderTarget::Resize</a> method but I don't want to update the size immediately, just going to use it later on according to my program needs.</p>\n\n<p><strong>How can I ignore windows events to prevent this visual stretch?</strong></p>\n"}, {"tags": ["c++", "qt", "qt5", "llrp"], "answers": [{"tags": [], "owner": {"reputation": 8919, "user_id": 8873508, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2uDHi.png?s=128&g=1", "display_name": "p-a-o-l-o", "link": "https://stackoverflow.com/users/8873508/p-a-o-l-o"}, "is_accepted": true, "score": 1, "last_activity_date": 1550676885, "creation_date": 1550676885, "answer_id": 54789943, "question_id": 54785987, "link": "https://stackoverflow.com/questions/54785987/llrp-integration-with-qt-giving-error-skipping-incompatible-path-libltkcpp-a-w/54789943#54789943", "title": "LLRP integration with QT giving error &quot;Skipping incompatible /path/libltkcpp.a when searching for -lltkcpp&quot;", "body": "<p>First off, you need a <em>pro</em> file that looks like this: </p>\n\n<pre><code>CONFIG -= qt\nCONFIG -= app_bundle\n\nSOURCES += \\\n    /some-path-to-the-example/example1.cpp\n\nLIBS += -L/some-path-to-the-libraries -lltkcpp -lxml2\nINCLUDEPATH  += /some-path-to-the-library-headers\n</code></pre>\n\n<p>Then, either you make a new Qt Creator Kit where you use <strong>linux-g++-32</strong> as the Qt mkspec, and configure the project to use it; </p>\n\n<p>or, as an alternative, use an existing kit, but add <code>-spec linux-g++-32</code> as an additional argument to qmake, in the project Build Steps.</p>\n\n<p>Run qmake, rebuild, and the linker issues should be gone. </p>\n\n<p>Yet you could face some compiler complaints about missing headers, in which case you're very likely in need of 32 bits development libraries installed.</p>\n\n<p>On Ubuntu, the task is done installing the <code>gcc-7-multilib</code> and the <code>g++-7-multilib</code> packages. </p>\n\n<p>About CentOS, I really don't know for sure. I hope <a href=\"https://stackoverflow.com/questions/23638271/how-to-compile-32-bit-apps-on-64-bit-rhel\">this red hat related post</a> will help you through.</p>\n"}], "owner": {"reputation": 2088, "user_id": 3534854, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/sDiKU.jpg?s=128&g=1", "display_name": "RicoRicochet", "link": "https://stackoverflow.com/users/3534854/ricoricochet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 99, "favorite_count": 0, "accepted_answer_id": 54789943, "answer_count": 1, "score": 1, "last_activity_date": 1550676885, "creation_date": 1550664283, "question_id": 54785987, "link": "https://stackoverflow.com/questions/54785987/llrp-integration-with-qt-giving-error-skipping-incompatible-path-libltkcpp-a-w", "title": "LLRP integration with QT giving error &quot;Skipping incompatible /path/libltkcpp.a when searching for -lltkcpp&quot;", "body": "<p>I am writing an application on QT Creator with C++ to read RFID tags via LLRP protocol.</p>\n\n<p>I am using the example.cpp as provided in the llrp.org site, while trying to compile the code it is throwing the following error - </p>\n\n<pre><code>:-1: error: /home/project/RFID/lib/libltkcpp.a: Timestamp out of range; substituting 1970-01-01 05:30:00\n:-1: error: skipping incompatible /home/project/RFID/lib//libltkcpp.a when searching for -lltkcpp\n:-1: error: cannot find -lltkcpp\n:-1: error: skipping incompatible /home/project/RFID/lib//libxml2.a when searching for -lxml2\n:-1: error: collect2: error: ld returned 1 exit status\n</code></pre>\n\n<p>I have added the libraries - <strong>libltkcpp.a, libltkcpp_r.lib, libxml2.a</strong> to my project. Still the issues are coming. Any ideas what is going wrong here?</p>\n\n<p>The development environment is 64bit CentOS.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 252, "user_id": 5364211, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ixqyo.jpg?s=128&g=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/5364211/tom"}, "edited": false, "score": 2, "creation_date": 1550664814, "post_id": 54785927, "comment_id": 96350560, "body": "Please create a more minimal example"}, {"owner": {"reputation": 93, "user_id": 10890552, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fa2e3eca8dcc6d3de63913bbd53a46e?s=128&d=identicon&r=PG&f=1", "display_name": "alonelycoder", "link": "https://stackoverflow.com/users/10890552/alonelycoder"}, "reply_to_user": {"reputation": 252, "user_id": 5364211, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ixqyo.jpg?s=128&g=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/5364211/tom"}, "edited": false, "score": 0, "creation_date": 1550665793, "post_id": 54785927, "comment_id": 96351193, "body": "@Tom will edit it."}, {"owner": {"reputation": 394, "user_id": 6213808, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e5616a9fc92e130d92d68304fdbf320?s=128&d=identicon&r=PG&f=1", "display_name": "Jonaswg", "link": "https://stackoverflow.com/users/6213808/jonaswg"}, "edited": false, "score": 0, "creation_date": 1550666167, "post_id": 54785927, "comment_id": 96351414, "body": "How many lines are in your file? From the &quot;messy.txt&quot; you provided it seems like there is only 1. Can you please provide a better example of this txt file?"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1550666240, "post_id": 54785927, "comment_id": 96351458, "body": "The values are <code>-858993460</code> which is <code>0xcccccccc</code> meaning uninitialized stack memory. <a href=\"https://stackoverflow.com/questions/127386/in-visual-studio-c-what-are-the-memory-allocation-representations\" title=\"in visual studio c what are the memory allocation representations\">stackoverflow.com/questions/127386/&hellip;</a>"}, {"owner": {"reputation": 93, "user_id": 10890552, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fa2e3eca8dcc6d3de63913bbd53a46e?s=128&d=identicon&r=PG&f=1", "display_name": "alonelycoder", "link": "https://stackoverflow.com/users/10890552/alonelycoder"}, "reply_to_user": {"reputation": 394, "user_id": 6213808, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e5616a9fc92e130d92d68304fdbf320?s=128&d=identicon&r=PG&f=1", "display_name": "Jonaswg", "link": "https://stackoverflow.com/users/6213808/jonaswg"}, "edited": false, "score": 0, "creation_date": 1550666411, "post_id": 54785927, "comment_id": 96351565, "body": "@Jonaswg hi, i&#39;ve tried separating the info as to put the next Point2D info in the next line and it does not work as well."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1550666594, "post_id": 54785927, "comment_id": 96351682, "body": "I expect your file reading code in inputTextFile is not working. You should print the vector right after reading the file. Or just debug it line by line. You have Visual Studio so you should be able to set a breakpoint in the reading code and see what happens. Ah I see the problem, I added a comment in the answer what the second bug is."}], "answers": [{"comments": [{"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 2, "creation_date": 1550666733, "post_id": 54786174, "comment_id": 96351763, "body": "There is a second bug with this same code.. You need <code>this-&gt;x = x;</code> and <code>this-&gt;y=y;</code> the second bug is causing the member variables x and y to never be set and this is why they are 0xcccccccc"}], "tags": [], "owner": {"reputation": 1310, "user_id": 4445625, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh3.googleusercontent.com/-tOVn9tyUb9E/AAAAAAAAAAI/AAAAAAAAAUo/2EwtWUwSQjA/photo.jpg?sz=128", "display_name": "Marc Stroebel", "link": "https://stackoverflow.com/users/4445625/marc-stroebel"}, "is_accepted": false, "score": 2, "last_activity_date": 1550664884, "creation_date": 1550664884, "answer_id": 54786174, "question_id": 54785927, "link": "https://stackoverflow.com/questions/54785927/negative-output-values-in-files-being-read-and-sorted-from-a-vector/54786174#54786174", "title": "Negative output values in files being read and sorted from a vector", "body": "<p>there's a typo in your code: x = y</p>\n\n<pre><code>Point2D::Point2D(int x, int y) \n{\n    x = y;\n    y = y;\n    distFrOrigin = 0.0;\n}\n</code></pre>\n"}], "owner": {"reputation": 93, "user_id": 10890552, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fa2e3eca8dcc6d3de63913bbd53a46e?s=128&d=identicon&r=PG&f=1", "display_name": "alonelycoder", "link": "https://stackoverflow.com/users/10890552/alonelycoder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1550665979, "creation_date": 1550664071, "last_edit_date": 1550665979, "question_id": 54785927, "link": "https://stackoverflow.com/questions/54785927/negative-output-values-in-files-being-read-and-sorted-from-a-vector", "title": "Negative output values in files being read and sorted from a vector", "body": "<p>I am new to generic programming and I am trying to get it to read in a text file, store it in a vector, sort it and then output them. Below shows the code and my output:</p>\n\n<p>Point2D.cpp:</p>\n\n<pre><code>Point2D::Point2D() \n{\n    x = 0;\n    y = 0;\n    distFrOrigin = 0.0;\n}\n\nPoint2D::Point2D(int x, int y) \n{\n    x = x;\n    y = y;\n    distFrOrigin = 0.0;\n}\n\nPoint2D::~Point2D() {\n//destructor\n}\n\nvoid Point2D::setX(int x) {\nthis-&gt;x = x;\n}\n\nvoid Point2D::setY(int y) {\nthis-&gt;y = y;\n}\n\nint Point2D::getX() {\n  return x;\n}\n\nint Point2D::getY() {\nreturn y;\n}\n\ndouble Point2D::getScalarValue() {\n  setDistFrOrigin();\n  return distFrOrigin;\n}\n\nvoid Point2D::setDistFrOrigin() {\n distFrOrigin = sqrt(abs((pow(x, 2)) + pow(y, 2)));\n}\n\nostream&amp; operator&lt;&lt;(ostream &amp;out, const Point2D &amp;p2d)\n{\n    out &lt;&lt; \"[\" &lt;&lt; setw(4) &lt;&lt; p2d.x &lt;&lt; \",\" &lt;&lt; setw(4) &lt;&lt; p2d.y &lt;&lt; \"]\" &lt;&lt; setw(3) &lt;&lt; \"\" &lt;&lt; endl;\n    return out;\n}\n</code></pre>\n\n<p>I have these sort functions which are also listed in the driver file:</p>\n\n<pre><code>bool sortP2DAscX(const Point2D &amp; rhs, const Point2D &amp; lhs) {\nreturn lhs.x &gt; rhs.x;\n}\nbool sortP2DDscX(const Point2D &amp; rhs, const Point2D &amp; lhs) {\nreturn lhs.x &lt; rhs.x;\n}\nbool sortP2DAscY(const Point2D &amp; rhs, const Point2D &amp; lhs) {\nreturn lhs.y &gt; rhs.y;\n}\nbool sortP2DDscY(const Point2D &amp; rhs, const Point2D &amp; lhs) {\nreturn lhs.y &lt; rhs.y;\n}\nbool sortP2DOAsc)(const Point2D &amp; rhs, const Point2D &amp; lhs) {\nreturn lhs.distFrOrigin &lt; rhs.distFrOrigin;\n}\nbool sortP2DODsc)(const Point2D &amp; rhs, const Point2D &amp; lhs) {\nreturn lhs.distFrOrigin &gt; rhs.distFrOrigin;\n}\n</code></pre>\n\n<p>My code shows me a negative value and the text file is as follows:\nmessy.txt:</p>\n\n<pre><code>Point2D, [324, -374]Point2D, [882, -588]Point2D, [-993, 958]Point2D, [6, -922]Point2D, [376, 219]Point2D, [600, 203]Point2D, [425, -676]\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/UfER1.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/UfER1.png\" alt=\"Output\"></a></p>\n\n<p>This is part of the main.cpp driver file which I read in the text file:</p>\n\n<p>main.cpp:</p>\n\n<pre><code>void inputTextFile() {\nstring fileName;\ncout &lt;&lt; endl;\ncout &lt;&lt; \"Please enter filename : \"; cin &gt;&gt; fileName;\nifstream file(fileName, ios::in);\n\nwhile (getline(file, fileName)) {\n    if (!fileName.empty()) {\n\n        stringstream linestream(fileName);\n        string readDataType = \"\";\n        string omnom;\n        string stringX1, stringY1, stringZ1, stringX2, stringY2, stringZ2;\n        int bX1, bY1, bZ1, bX2, bY2, bZ2;\n        // Save PID into StockArray\n        getline(linestream, readDataType, ',');\n        if (readDataType == \"Point2D\") {\n            // [bX, bY]\n\n            //Trim\n            getline(linestream, omnom, '[');\n\n            //Get X coordinate\n            getline(linestream, stringX1, ',');\n            bX1 = stoi(stringX1);\n\n            //Get Y coordinate\n            getline(linestream, stringY1, ']');\n            bY1 = stoi(stringY1);\n\n            Point2D bP2D = Point2D(bX1, bY1);\n            GP2D.push_back(bP2D);\n            records++;\n        }\n\n    }\n }\n\n}\n\nvoid viewData() {\ncout &lt;&lt; endl;\ncout &lt;&lt; \"[ View data ... ]\" &lt;&lt; endl;\ncout &lt;&lt; \"Filtering Criteria: \" &lt;&lt; curFilterOpt &lt;&lt; endl;\ncout &lt;&lt; \"Sorting Criteria : \" &lt;&lt; curSortCri &lt;&lt; endl;\ncout &lt;&lt; \"Sorting Order: \" &lt;&lt; curSortOrder &lt;&lt; endl;\ncout &lt;&lt; endl;\n\nif (curFilterOpt == \"Point2D\") \n{\n    if (curSortCri == \"x-ordinate\") {\n        if (curSortOrder == \"ASC\") {\n            sort(GP2D.begin(), GP2D.end(), sortP2DAscX);\n        }\n        else if (curSortOrder == \"DSC\") {\n            sort(GP2D.begin(), GP2D.end(), sortP2DDscX);\n            reverse(GP2D.begin(), GP2D.end());\n        }\n    } else if (curSortCri == \"y-ordinate\") {\n        if (curSortOrder == \"ASC\") {\n            sort(GP2D.begin(), GP2D.end(), sortP2DAscY);\n        }\n        else if (curSortOrder == \"DSC\") {\n            sort(GP2D.begin(), GP2D.end(), sortP2DDscY);\n        }\n    }\n    cout &lt;&lt; setw(5) &lt;&lt; \"X\" &lt;&lt; setw(6) &lt;&lt; \"Y\" &lt;&lt; \"    Dist. Fr Origin\" &lt;&lt; endl;\n    cout &lt;&lt; \"-------------------------------\" &lt;&lt; endl;\n    for (int i = 0; i &lt; GP2D.size(); ++i) {\n        cout &lt;&lt; GP2D[i] &lt;&lt; \"   \" &lt;&lt; fixed &lt;&lt; setprecision(3) &lt;&lt; GP2D[i].getScalarValue() &lt;&lt; endl;\n    }\n}\n</code></pre>\n\n<p>Why are all the values in the output negative? And they are all the same numbers. The values in the text file can be from any range of -999 to 999. But I have different values in each Point2D.</p>\n"}, {"tags": ["c++", "member-functions", "stdbind"], "comments": [{"owner": {"reputation": 9396, "user_id": 2261538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4e60dd44745bd1518ee933e081119de?s=128&d=identicon&r=PG", "display_name": "darune", "link": "https://stackoverflow.com/users/2261538/darune"}, "edited": false, "score": 1, "creation_date": 1550664103, "post_id": 54785843, "comment_id": 96350064, "body": "This looks like an XY type of question."}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1550664200, "post_id": 54785843, "comment_id": 96350124, "body": "It&#39;s hard to understand what&#39;s going on in your code, but the problem seems to be that it&#39;s impossible to convert any kind of stateful functors (stateful lambdas, member functions bound with <code>bind</code>, and so on) to function pointers. Use <code>std::function</code>s instead of function pointers."}], "answers": [{"comments": [{"owner": {"reputation": 516, "user_id": 2118290, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/bFB3H.gif?s=128&g=1", "display_name": "Steven Venham", "link": "https://stackoverflow.com/users/2118290/steven-venham"}, "edited": false, "score": 0, "creation_date": 1550665214, "post_id": 54786225, "comment_id": 96350831, "body": "Sorry added more information on the class. I do use std::function already."}, {"owner": {"reputation": 9396, "user_id": 2261538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4e60dd44745bd1518ee933e081119de?s=128&d=identicon&r=PG", "display_name": "darune", "link": "https://stackoverflow.com/users/2261538/darune"}, "reply_to_user": {"reputation": 516, "user_id": 2118290, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/bFB3H.gif?s=128&g=1", "display_name": "Steven Venham", "link": "https://stackoverflow.com/users/2118290/steven-venham"}, "edited": false, "score": 0, "creation_date": 1550670671, "post_id": 54786225, "comment_id": 96354187, "body": "@StevenVenham I updated my answer with why your method doesn&#39;t work"}], "tags": [], "owner": {"reputation": 9396, "user_id": 2261538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4e60dd44745bd1518ee933e081119de?s=128&d=identicon&r=PG", "display_name": "darune", "link": "https://stackoverflow.com/users/2261538/darune"}, "is_accepted": true, "score": 0, "last_activity_date": 1550670917, "last_edit_date": 1550670917, "creation_date": 1550665051, "answer_id": 54786225, "question_id": 54785843, "link": "https://stackoverflow.com/questions/54785843/get-address-of-member-function-through-stdbind/54786225#54786225", "title": "Get address of member function through std::bind?", "body": "<p>You should switch to using <code>std::function</code> instead (update: it turns out you did already). <code>std::function</code> is a general-purpose polymorphic function wrapper that will accept raw function pointers, binds, etc. \nThat way you have a standardized way to compare, which you need to pull off somehow but <code>std::function</code> has ways to inspect the target, etc. : <a href=\"https://en.cppreference.com/w/cpp/utility/functional/function\" rel=\"nofollow noreferrer\">https://en.cppreference.com/w/cpp/utility/functional/function</a></p>\n\n<p>Your signature becomes:</p>\n\n<pre><code>EventObject&lt;Ts...&gt;&amp; operator-=(const std::function&lt;R(Args...)&gt;&amp; rhs) {\n</code></pre>\n\n<p><strong>Update:</strong> the issue with your target extraction is that you provide the signature of a plain function as the template argument - this will not work for the more 'advanced' function objects, binds etc. you have to provide the correct type so that:</p>\n\n<blockquote>\n  <p>target_type() == typeid(T)</p>\n</blockquote>\n\n<p>see <a href=\"https://en.cppreference.com/w/cpp/utility/functional/function/target\" rel=\"nofollow noreferrer\">https://en.cppreference.com/w/cpp/utility/functional/function/target</a> for more information and <strong>some relevant examples</strong></p>\n"}], "owner": {"reputation": 516, "user_id": 2118290, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/bFB3H.gif?s=128&g=1", "display_name": "Steven Venham", "link": "https://stackoverflow.com/users/2118290/steven-venham"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 219, "favorite_count": 0, "accepted_answer_id": 54786225, "answer_count": 1, "score": 0, "last_activity_date": 1550670917, "creation_date": 1550663792, "last_edit_date": 1550664804, "question_id": 54785843, "link": "https://stackoverflow.com/questions/54785843/get-address-of-member-function-through-stdbind", "title": "Get address of member function through std::bind?", "body": "<pre><code>size_t getAddress(F f) {\n    typedef void (fnType)(Ts...);\n    fnType ** fnPointer = f.template target&lt;fnType*&gt;();\n    if (fnPointer == nullptr) { //Must be member function.\n        //Code to get address of member function pointer\n    }\n    return (size_t)*fnPointer;\n}\n</code></pre>\n\n<p>This function works fine for function pointers, but when I try to throw a bound Member function into the mix everything goes south. </p>\n\n<p>I think this is because I template the function pointer as my normal function pointer type. But with a bound member function through std::bind this conversion fails.</p>\n\n<p>I use this in my comparison operator for finding and removing functions from a vector.</p>\n\n<pre><code>EventObject&lt;Ts...&gt;&amp; operator-=(const F&amp; rhs) {\n    int i = 0;\n    for (auto const&amp; value : callbacks) {\n        if (getAddress(rhs) == getAddress(value)) {\n            erase(i);\n            break;\n        }\n        i++;\n    }\n    return *this;\n}\n</code></pre>\n\n<p>Google has failed me. I also imagine that this function will work for lambdas, sorta. As long as the compiler tries to optimize and combine similar lambda expressions. </p>\n\n<p>So how do I get the address of a member function pointer through bind? Or is there a more optimal way? (Besides naming) Perhaps, should I wrap my function in a macro to store the enumerated type for comparisons instead?</p>\n\n<p>Class information for reference:</p>\n\n<pre><code>template &lt;typename...Ts&gt;\nclass EventObject{\npublic:\n    typedef std::function&lt;void(Ts...)&gt; F;\n    typedef std::vector&lt;F&gt; CallBack;\n    Callback callbacks;\n</code></pre>\n"}, {"tags": ["c++", "for-loop", "stdstring"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 3, "creation_date": 1550663528, "post_id": 54785680, "comment_id": 96349725, "body": "Please try to create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> to show us, one small and simple program which replicates the problem that we can try ourselves. It&#39;s very likely that you will be able to find the problem yourself when creating the example."}, {"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 0, "creation_date": 1550663704, "post_id": 54785680, "comment_id": 96349830, "body": "May be, worth reading: <a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">How to debug small programs</a>."}, {"owner": {"reputation": 73, "user_id": 10199599, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Js8WdAPzAx0/AAAAAAAAAAI/AAAAAAAAAaY/Y6WGO15W2Co/photo.jpg?sz=128", "display_name": "Le codeur Etudiant", "link": "https://stackoverflow.com/users/10199599/le-codeur-etudiant"}, "edited": false, "score": 0, "creation_date": 1550663839, "post_id": 54785680, "comment_id": 96349914, "body": "Thanks you, But I have alrealy debug this code, and I have don&#39;t any idea why I have this error"}, {"owner": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "edited": false, "score": 0, "creation_date": 1550663875, "post_id": 54785680, "comment_id": 96349940, "body": "@LecodeurEtudiant Nous n&#39;avons pas assez d&#39;informations, il nous manque la d&#233;finition des classes et de addHabitant et des destructeurs. Avez-vous essay&#233; une ex&#233;cution sous <i>valgrind</i> ?"}, {"owner": {"reputation": 73, "user_id": 10199599, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Js8WdAPzAx0/AAAAAAAAAAI/AAAAAAAAAaY/Y6WGO15W2Co/photo.jpg?sz=128", "display_name": "Le codeur Etudiant", "link": "https://stackoverflow.com/users/10199599/le-codeur-etudiant"}, "edited": false, "score": 0, "creation_date": 1550663998, "post_id": 54785680, "comment_id": 96350007, "body": "I don&#39;t use valgrind no. I have will added addHabitant and the class definition"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 4, "creation_date": 1550664046, "post_id": 54785680, "comment_id": 96350035, "body": "My crystal ball thinks that <code>getHabitant</code> does not return a reference to the collection of habitants."}, {"owner": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "edited": false, "score": 0, "creation_date": 1550664164, "post_id": 54785680, "comment_id": 96350101, "body": "@LecodeurEtudiant if <i>valgrind</i> available on your OS install it and use it, that tool is magic, easy to use (no special compilation), and incredibly useful"}, {"owner": {"reputation": 73, "user_id": 10199599, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Js8WdAPzAx0/AAAAAAAAAAI/AAAAAAAAAaY/Y6WGO15W2Co/photo.jpg?sz=128", "display_name": "Le codeur Etudiant", "link": "https://stackoverflow.com/users/10199599/le-codeur-etudiant"}, "reply_to_user": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "edited": false, "score": 0, "creation_date": 1550664319, "post_id": 54785680, "comment_id": 96350192, "body": "@bruno I have install this, the result will be put in the question."}, {"owner": {"reputation": 69264, "user_id": 256138, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ed9e8c0ff767e38f8fade11f5af00a45?s=128&d=identicon&r=PG", "display_name": "rubenvb", "link": "https://stackoverflow.com/users/256138/rubenvb"}, "reply_to_user": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "edited": false, "score": 1, "creation_date": 1550664412, "post_id": 54785680, "comment_id": 96350250, "body": "@bruno using valgrind will neither help a beginner not point to the cause of this problem."}, {"owner": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "reply_to_user": {"reputation": 69264, "user_id": 256138, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ed9e8c0ff767e38f8fade11f5af00a45?s=128&d=identicon&r=PG", "display_name": "rubenvb", "link": "https://stackoverflow.com/users/256138/rubenvb"}, "edited": false, "score": 0, "creation_date": 1550664626, "post_id": 54785680, "comment_id": 96350428, "body": "@rubenvb sorry but I fully disagree with that, I cannot understand how you can say that, is it also forbidden for a beginner to use a debugger ? crazy"}, {"owner": {"reputation": 6673, "user_id": 777689, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/19JOo.jpg?s=128&g=1", "display_name": "PeterT", "link": "https://stackoverflow.com/users/777689/petert"}, "reply_to_user": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 2, "creation_date": 1550664958, "post_id": 54785680, "comment_id": 96350663, "body": "@molbdnilo your theory has just been confirmed, might as well write that as an answer now"}, {"owner": {"reputation": 69264, "user_id": 256138, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ed9e8c0ff767e38f8fade11f5af00a45?s=128&d=identicon&r=PG", "display_name": "rubenvb", "link": "https://stackoverflow.com/users/256138/rubenvb"}, "reply_to_user": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "edited": false, "score": 1, "creation_date": 1550674230, "post_id": 54785680, "comment_id": 96356489, "body": "@bruno valgrind is not a debugger. I still highly doubt staring at memory addresses of iterators to different instances of a container will give any hints to the underlying problem..."}], "answers": [{"comments": [{"owner": {"reputation": 73, "user_id": 10199599, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Js8WdAPzAx0/AAAAAAAAAAI/AAAAAAAAAaY/Y6WGO15W2Co/photo.jpg?sz=128", "display_name": "Le codeur Etudiant", "link": "https://stackoverflow.com/users/10199599/le-codeur-etudiant"}, "edited": false, "score": 0, "creation_date": 1550668418, "post_id": 54786534, "comment_id": 96352737, "body": "Thanks you Bruno ! I have test your first solution and it work, now I have try your second solution and see if in my context which is better.  And thank you too for valgrind, this tool is very powerfull and easy to use."}, {"owner": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "reply_to_user": {"reputation": 73, "user_id": 10199599, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Js8WdAPzAx0/AAAAAAAAAAI/AAAAAAAAAaY/Y6WGO15W2Co/photo.jpg?sz=128", "display_name": "Le codeur Etudiant", "link": "https://stackoverflow.com/users/10199599/le-codeur-etudiant"}, "edited": false, "score": 1, "creation_date": 1550668984, "post_id": 54786534, "comment_id": 96353089, "body": "@LecodeurEtudiant of course if <code>const std::vector&lt;People&gt; &amp; getHabitant() const  ...</code> don&#39;t do <code>std::vector&lt;People&gt; v = h.getHabitant();</code> but <code>const std::vector&lt;People&gt; &amp; v = h.getHabitant();</code> if you still save <i>getHabitant()</i> result ^^"}, {"owner": {"reputation": 73, "user_id": 10199599, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Js8WdAPzAx0/AAAAAAAAAAI/AAAAAAAAAaY/Y6WGO15W2Co/photo.jpg?sz=128", "display_name": "Le codeur Etudiant", "link": "https://stackoverflow.com/users/10199599/le-codeur-etudiant"}, "edited": false, "score": 0, "creation_date": 1550669332, "post_id": 54786534, "comment_id": 96353306, "body": "Ok ! Thanks you ^^"}], "tags": [], "owner": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "is_accepted": true, "score": 3, "last_activity_date": 1550666140, "creation_date": 1550666140, "answer_id": 54786534, "question_id": 54785680, "link": "https://stackoverflow.com/questions/54785680/for-each-algorithm-causes-basic-string-m-construct-null-not-valid-in-c/54786534#54786534", "title": "for_each algorithm causes basic_string::_M_construct null not valid in C++", "body": "<p>As also seem by molbdnilo in a remark, in <code>std::ostream &amp; operator&lt;&lt;(std::ostream &amp; out, Home const &amp;h)</code> you do the iteration</p>\n\n<pre><code>    std::for_each(h.getHabitant().begin(), h.getHabitant().end(), [&amp;out](People const pe){\n</code></pre>\n\n<p>that supposes <code>h.getHabitant().begin()</code> and <code>h.getHabitant().end()</code> are iterators on the <em>same</em> vector but</p>\n\n<pre><code>std::vector&lt;People&gt; getHabitant() const{return this-&gt;habitant;}\n</code></pre>\n\n<p>returns each time a <em>new copy</em> of the vector.</p>\n\n<p>If you do not want to modify <em>getHabitant</em> to return a const reference to <em>habitant</em> you have to memorize the vector on which you iterate.</p>\n\n<pre><code>std::vector&lt;People&gt; v = h.getHabitant();\nstd::for_each(v.begin(), v.end(), [&amp;out](People const pe){\n</code></pre>\n\n<p>but I encourage you to modify <code>getHabitant()</code> to be</p>\n\n<pre><code>const std::vector&lt;People&gt; &amp; getHabitant() const {return this-&gt;habitant;}\n</code></pre>\n"}], "owner": {"reputation": 73, "user_id": 10199599, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Js8WdAPzAx0/AAAAAAAAAAI/AAAAAAAAAaY/Y6WGO15W2Co/photo.jpg?sz=128", "display_name": "Le codeur Etudiant", "link": "https://stackoverflow.com/users/10199599/le-codeur-etudiant"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 317, "favorite_count": 1, "accepted_answer_id": 54786534, "answer_count": 1, "score": 0, "last_activity_date": 1550666140, "creation_date": 1550663331, "last_edit_date": 1550664218, "question_id": 54785680, "link": "https://stackoverflow.com/questions/54785680/for-each-algorithm-causes-basic-string-m-construct-null-not-valid-in-c", "title": "for_each algorithm causes basic_string::_M_construct null not valid in C++", "body": "<p>In the project to learn C++, I have create a software compose of two easy class\n(Home and People).\nPeople have for constructor :</p>\n\n<pre><code>// CONSTRUCTOR\n    People(): name(\"NoName\"), first_name(\"NoFirstName\"), age(0){}\n    People(std::string n, std::string fn, int a) : name(n), first_name(fn), age(a){}\n</code></pre>\n\n<p>And Home have :</p>\n\n<pre><code>// CONSTRUCTOR\n    Home(): adresse(\"NoName\"){}\n    Home(std::string addr): adresse(addr){}\n</code></pre>\n\n<p>In my software, a home have a vector of people, where we can add resident or remove a resident.</p>\n\n<p>My error occur when I try to remove a resident in a home or when I try to print a home.</p>\n\n<p>Here the code of \"removeResident\" :</p>\n\n<pre><code>void Home::removeHabitant(People const &amp;p)\n{\n    this-&gt;getHabitant().erase(std::remove(this-&gt;getHabitant().begin(), this-&gt;getHabitant().end(), p));\n}\n</code></pre>\n\n<p>Here the code of \"operator&lt;&lt;\" :</p>\n\n<pre><code>std::ostream &amp; operator&lt;&lt;(std::ostream &amp; out, Home const &amp;h)\n{\nout &lt;&lt; h.getAddr() &lt;&lt; \"\\n\"; //OK \nif(h.getHabitant().size() &gt; 0) // OK\n{\n    try\n    {\n        std::for_each(h.getHabitant().begin(), h.getHabitant().end(), [&amp;out](People const pe){\n            out &lt;&lt; pe &lt;&lt; \"\\n\";\n\n        }); // ERROR\n    }\n    catch(People p)\n    {\n        std::cout &lt;&lt; \"Exception \u00e0 l'element : \" &lt;&lt; p &lt;&lt; std::endl;\n    }\n\n}\nelse // OK\n{\n    out &lt;&lt; \"Aucun habitant !\"; // OK\n}\nreturn out ;  // OK }\n</code></pre>\n\n<p>Here the output of my software :</p>\n\n<pre><code>clang++ -Wall -std=c++11 -c -o obj/main.o src/main.cpp -I include\nclang++ -Wall -std=c++11 -c -o obj/People.o src/People.cpp -I include\nclang++ -Wall -std=c++11 -c -o obj/Home.o src/Home.cpp -I include\nclang++ -Wall -std=c++11 -o bin/main obj/main.o obj/People.o obj/Home.o\n./bin/main\nPeoples's destructor\n( NoFirstName - NoName - 0 )\n10 rue des Brouettes rouge\nPeoples's destructor\nPeoples's destructor\n( Erwan - AUBRY - 21 )\nPeoples's destructor\n( Roger - DURAND - 20 )\nPeoples's destructor\nterminate called after throwing an instance of 'std::logic_error'\n  what():  basic_string::_M_construct null not valid\nmakefile:6: recipe for target 'compile' failed\nmake: *** [compile] Aborted\n</code></pre>\n\n<p>Here the main file :</p>\n\n<pre><code>#include &lt;Home.hpp&gt;\n#include &lt;vector&gt;\n#include &lt;algorithm&gt;\n#include &lt;iterator&gt;\n\nusing namespace std;\n\nint main()\n{\n    People erwan(\"AUBRY\", \"Erwan\", 21);\n    People roger(\"DURAND\", \"Roger\", 20);\n    People noName;\n\n    // vector&lt;People&gt; lsPeople;\n    // lsPeople.push_back(erwan);\n    // lsPeople.push_back(roger);\n\n    // copy(lsPeople.begin(), lsPeople.end(), ostream_iterator&lt;People&gt;(cout, \"|\"));\n\n    Home home1(\"10 rue des Brouettes rouge\");\n    home1.addHabitant(erwan);\n    home1.addHabitant(roger);\n\n    cout &lt;&lt; noName &lt;&lt; endl;\n    cout &lt;&lt; home1 &lt;&lt; endl;\n\n    // cout &lt;&lt; home1[0] &lt;&lt; endl;\n    // home1.removeHabitant(roger);\n    // cout &lt;&lt; home1[0] &lt;&lt; endl;\n\n    return 0;\n}\n</code></pre>\n\n<p>After several research I think it's the cause of the home class, so here is the code of home .hpp :</p>\n\n<pre><code>#ifndef HOME_INCLUDED\n#define HOME_INCLUDED\n\n#include &lt;People.hpp&gt;\n#include &lt;vector&gt;\n\nclass Home\n{\n    private:\n        std::string adresse;\n        std::vector&lt;People&gt; habitant;\n\n    public:\n    // CONSTRUCTOR\n        Home(): adresse(\"NoName\"){}\n        Home(std::string addr): adresse(addr){}\n\n    // DESTRUCTOR\n        ~Home(){std::cout &lt;&lt; \"Home's destructor\" &lt;&lt; std::endl;}\n\n    // GETTER\n        std::string getAddr() const{return this-&gt;adresse;}\n        std::vector&lt;People&gt; getHabitant() const{return this-&gt;habitant;}\n\n    // SETTER\n        void setAddr(std::string const val){this-&gt;adresse = val;}\n        void addHabitant(People const &amp;p){this-&gt;habitant.push_back(p);}\n        void removeHabitant(People const &amp;p);\n\n    // OPERATOR\n        People &amp; operator[](unsigned int const val){return this-&gt;habitant[val];}\n};\n\nstd::ostream &amp; operator&lt;&lt;(std::ostream &amp; out, Home const &amp;h);\n\n#endif\n</code></pre>\n\n<p>I hope you have any idea for my problems.</p>\n\n<p>PS: sorry for my english, and sorry if I have make anything of badness I'm new   as help seeker in StackOverflow</p>\n"}, {"tags": ["c++", "inheritance", "polymorphism"], "comments": [{"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 0, "creation_date": 1550662915, "post_id": 54785288, "comment_id": 96349390, "body": "Your wording is misleading and unclear.   All that is necessary to call an accessible member function of an <code>obj_parent</code> is a pointer or reference to an an instance of <code>object_parent</code>  (and any arguments needed).   It doesn&#39;t matter how <code>operations</code> gets such a pointer or reference - but it needs to.   If the member functions are inaccessible, there is no way (because that is the purpose in making a member function inaccessible)."}, {"owner": {"reputation": 17209, "user_id": 1055118, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/44Trt.jpg?s=128&g=1", "display_name": "doctorlove", "link": "https://stackoverflow.com/users/1055118/doctorlove"}, "edited": false, "score": 0, "creation_date": 1550662935, "post_id": 54785288, "comment_id": 96349403, "body": "Is the object private or protected (or public) in the parent class?"}, {"owner": {"reputation": 17209, "user_id": 1055118, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/44Trt.jpg?s=128&g=1", "display_name": "doctorlove", "link": "https://stackoverflow.com/users/1055118/doctorlove"}, "edited": false, "score": 0, "creation_date": 1550662997, "post_id": 54785288, "comment_id": 96349439, "body": "Try asking from a different direction. What are you trying to do? What do you want your calling code to look like? That might suggest the best ways to solve your problems"}, {"owner": {"reputation": 325, "user_id": 7882709, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9fa60b3a4149222514384134a340afcc?s=128&d=identicon&r=PG&f=1", "display_name": "Capeboom", "link": "https://stackoverflow.com/users/7882709/capeboom"}, "edited": false, "score": 0, "creation_date": 1550664471, "post_id": 54785288, "comment_id": 96350304, "body": "Sorry for the ambiguity, I was trying to keep the topic general to avoid downvotes and I&#39;m a relative beginner with polymorphism/inheritance. I&#39;ve created a matrix class and then have a child class which is solvers. It should take two matrix objects and solve the systems of equations. There are some methods in the matrix class which are useful such as print_matrix, so I want to keep the solver class as a child of matrix. But Im just unsure as to how to go about using a matrix in the solver class without having to reinitialise a matrix when you create a instance of the solver class."}, {"owner": {"reputation": 325, "user_id": 7882709, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9fa60b3a4149222514384134a340afcc?s=128&d=identicon&r=PG&f=1", "display_name": "Capeboom", "link": "https://stackoverflow.com/users/7882709/capeboom"}, "edited": false, "score": 0, "creation_date": 1550664661, "post_id": 54785288, "comment_id": 96350456, "body": "The object is public in the parent class"}, {"owner": {"reputation": 2055, "user_id": 10733631, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-z9f47Aj3ez4/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-j0jfocyr5e1Wd0v4q8aluK_b7B5Q/mo/photo.jpg?sz=128", "display_name": "Dmytro Dadyka", "link": "https://stackoverflow.com/users/10733631/dmytro-dadyka"}, "edited": false, "score": 0, "creation_date": 1550664675, "post_id": 54785288, "comment_id": 96350463, "body": "I think it is XY problem."}], "answers": [{"tags": [], "owner": {"reputation": 715, "user_id": 3586940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9c9c03c81770b24d1a922d741af79c2?s=128&d=identicon&r=PG&f=1", "display_name": "user3586940", "link": "https://stackoverflow.com/users/3586940/user3586940"}, "is_accepted": true, "score": 1, "last_activity_date": 1550665973, "last_edit_date": 1550665973, "creation_date": 1550665452, "answer_id": 54786350, "question_id": 54785288, "link": "https://stackoverflow.com/questions/54785288/using-an-object-of-a-parent-class-within-a-child-class-do-you-need-to-pass-the/54786350#54786350", "title": "Using an object of a parent class within a child class. Do you need to pass the object as a class constructor?", "body": "<p>Ok, so the example below does exactly what you wanted to do: the child modifies an instance of a parent object through a reference. The parent holds a single int. Yes, in real life an object usually would have more than one member variable, but this is just an illustrative example. </p>\n\n<pre><code>class parentInt {\npublic:\n    int memberNumber;\n    parentInt(int number) {\n        memberNumber = number;\n    }\n    parentInt() {\n        memberNumber = 0;\n    }\n};\n\nclass childInt : public parentInt {\npublic:\n    parentInt&amp; mReferenceToParentObject;\n    childInt(parentInt&amp; referenceToParentObject) :mReferenceToParentObject(referenceToParentObject) {}\n    void addOne() {\n        mReferenceToParentObject.memberNumber++;\n    }\n    void subtractOne() {\n        mReferenceToParentObject.memberNumber--;\n    }\n};\n\n\nint main()\n{\n    parentInt p(5); //parent int is 5\n    childInt c(p); //child int is a reference to parent\n    c.addOne();  // parent's memberNumber is now 6 because the child modified the parent through the reference\n    c.subtractOne();  // parent's memberNumber is now 5 because the child modified the parent through the reference\n}\n</code></pre>\n\n<p>If your doing this to solve a system of equations (not mentioned in the original question, see comments), replace memberNumber above with a vector of vectors to represent a 2D matrix and then change addOne to an algorithm like Gaussian Elimination to solve the system of equations. </p>\n"}], "owner": {"reputation": 325, "user_id": 7882709, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9fa60b3a4149222514384134a340afcc?s=128&d=identicon&r=PG&f=1", "display_name": "Capeboom", "link": "https://stackoverflow.com/users/7882709/capeboom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 54786350, "answer_count": 1, "score": -1, "last_activity_date": 1550669528, "creation_date": 1550662191, "last_edit_date": 1550669528, "question_id": 54785288, "link": "https://stackoverflow.com/questions/54785288/using-an-object-of-a-parent-class-within-a-child-class-do-you-need-to-pass-the", "title": "Using an object of a parent class within a child class. Do you need to pass the object as a class constructor?", "body": "<p>It is likely that this is a duplicate question, but I haven't been able to find the best way to approach this problem. </p>\n\n<p>I have a parent class, which creates an object, which has useful methods operating on that object. I then want to create a child class, which takes the object of the parent class by reference and has a bunch of other methods which operate on it. </p>\n\n<p>I was wondering how best to approach this? Should I pass a pointer to an object of the parent class as the constructor of the child class?</p>\n\n<p>What I would like to do : </p>\n\n<pre><code>class obj_parent{\n    initializes object\n    virtual void method_1\n    virtual void method_2\n}\n\nclass operation: public obj_parent {\n    void opertation_method_1(*object)\n    void opertation_method_2(object)\n}\n</code></pre>\n\n<p>Also what difference would it make if the parent class and the child class were templated?</p>\n\n<p>Some references on the subject which I didn't find fully answered my question, but could be useful.\n<a href=\"https://stackoverflow.com/questions/23183523/pass-an-object-to-a-class-constructor\">Pass an object to a class constructor</a>\n<a href=\"https://stackoverflow.com/questions/40239871/passing-object-of-a-template-class-to-constructor-of-another-class\">Passing object of a template class to constructor of another class</a></p>\n"}, {"tags": ["c++", "linux", "shared-libraries", "dynamic-linking", "relocation"], "comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 2, "creation_date": 1550662318, "post_id": 54785183, "comment_id": 96349067, "body": "Is <a href=\"https://www.technovelty.org/linux/plt-and-got-the-key-to-code-sharing-and-dynamic-libraries.html\" rel=\"nofollow noreferrer\">this</a> helpful?"}, {"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "reply_to_user": {"reputation": 772, "user_id": 4043866, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/104dac269b12649d6df8386b88962745?s=128&d=identicon&r=PG", "display_name": "JulianH", "link": "https://stackoverflow.com/users/4043866/julianh"}, "edited": false, "score": 0, "creation_date": 1550664095, "post_id": 54785183, "comment_id": 96350062, "body": "@JulianH If I remember right, on Linux and with shared objects, linking happens at load time (prior to running, instead of compile time). Please note, that OP explicitly tagged Linux. (I know DLLs on Windows are a bit different concerning this.)"}, {"owner": {"reputation": 772, "user_id": 4043866, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/104dac269b12649d6df8386b88962745?s=128&d=identicon&r=PG", "display_name": "JulianH", "link": "https://stackoverflow.com/users/4043866/julianh"}, "reply_to_user": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 0, "creation_date": 1550664182, "post_id": 54785183, "comment_id": 96350111, "body": "@Scheff I thougth on Linux you have to pass the name of the library to g++, so the linker is able to resolve those symbols. If you link with <code>dlopen</code>, you can&#39;t use <code>extern</code> to address <code>get</code>"}, {"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "reply_to_user": {"reputation": 772, "user_id": 4043866, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/104dac269b12649d6df8386b88962745?s=128&d=identicon&r=PG", "display_name": "JulianH", "link": "https://stackoverflow.com/users/4043866/julianh"}, "edited": false, "score": 0, "creation_date": 1550664436, "post_id": 54785183, "comment_id": 96350267, "body": "@JulianH I just found this: <a href=\"http://www.yolinux.com/TUTORIALS/LibraryArchives-StaticAndDynamic.html\" rel=\"nofollow noreferrer\">Static, Shared Dynamic and Loadable Linux Libraries</a>: <i>Compiling for run-time linking</i> ... <i>The libraries will NOT be included in the executable but will be dynamically linked during run-time execution.</i> ;-) I understood this as: at compile time it&#39;s &quot;linked&quot; to be prepared for runtime linking. Am I nit-picking?"}, {"owner": {"reputation": 772, "user_id": 4043866, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/104dac269b12649d6df8386b88962745?s=128&d=identicon&r=PG", "display_name": "JulianH", "link": "https://stackoverflow.com/users/4043866/julianh"}, "edited": false, "score": 0, "creation_date": 1550666970, "post_id": 54785183, "comment_id": 96351902, "body": "Yes I see, there is a difference between Linux and Windows, sorry, for that."}], "answers": [{"tags": [], "owner": {"reputation": 12992, "user_id": 2170527, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64f36e49ac8529003cf57c003746388b?s=128&d=identicon&r=PG", "display_name": "yugr", "link": "https://stackoverflow.com/users/2170527/yugr"}, "is_accepted": true, "score": 4, "last_activity_date": 1550673096, "creation_date": 1550673096, "answer_id": 54788713, "question_id": 54785183, "link": "https://stackoverflow.com/questions/54785183/how-are-external-symbols-of-a-shared-library-resolved-in-the-main-program/54788713#54788713", "title": "How are external symbols of a shared library resolved in the main program?", "body": "<p>Symbol resolution in main program is not much different from that in shared libraries and is achieved via main program's GOT and PLT tables. You are correct that this incurs certain amount of duplication between static (<code>ld</code>) and dynamic (<code>ld.so</code>) linkers and slows down program startup but on the other hand allows for increased flexibility at runtime (e.g. interposing symbols via <code>LD_PRELOAD</code>). </p>\n"}], "owner": {"reputation": 1346, "user_id": 3769877, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/100001244560682/picture?type=large", "display_name": "GamefanA", "link": "https://stackoverflow.com/users/3769877/gamefana"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 672, "favorite_count": 0, "accepted_answer_id": 54788713, "answer_count": 1, "score": 2, "last_activity_date": 1550673096, "creation_date": 1550661852, "last_edit_date": 1550662214, "question_id": 54785183, "link": "https://stackoverflow.com/questions/54785183/how-are-external-symbols-of-a-shared-library-resolved-in-the-main-program", "title": "How are external symbols of a shared library resolved in the main program?", "body": "<p>I've been reading a lot about the semantics of load-time linking of shared libraries and one thing that I'm having trouble understanding is how can the main program make references to functions defined in shared libraries? For example, say I have this code</p>\n\n<p>myShared.sh</p>\n\n<pre><code>int get(){\n   return 0;\n}\n</code></pre>\n\n<p>main.c</p>\n\n<pre><code>  extern int get();\n  int main(){\n    int a = get();\n  }\n</code></pre>\n\n<p>I understand that, since shared libraries cannot make any assertions about where they will be placed, they must use the GOT and PLT to make references to their own functions and global data. But how does the actual program that uses said libraries know where the functions will be loaded so that it can make references to them? Obviously, the linker has no idea since the linking of such libraries doesn't happen until load-time. So, there are only two ways I can think of that would make it possible to reference such external functions. </p>\n\n<ol>\n<li><p>The linker simply places some place holders where <code>get</code> (in the above example) is being called and then adds some meta-data necessary for the loader to then come and replace the place holder with the actual address of the function (like how shared libraries used Load-time relocation before PIC) But this cause notable overhead and was the very motivation (I think) for the introduction of PIC in the first place</p></li>\n<li><p>The main program also has its own GOT and PLT and the loader will have to also fill the GOT of the main program along that of the shared library's (either all at once during loading in case of global variables, or in a lazy fashion using PLT for functions) But this sound like a major duplication of effort.</p></li>\n</ol>\n\n<p>So, which one of these two, if any, is the method used to resolve shared libraries' external symbols?</p>\n"}, {"tags": ["android", "c++", "linux", "android-ndk", "toolchain"], "answers": [{"comments": [{"owner": {"reputation": 93, "user_id": 5994097, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-pmBPbIm3Vfg/AAAAAAAAAAI/AAAAAAAAAJM/Z5sJVilLhik/photo.jpg?sz=128", "display_name": "Nikolas", "link": "https://stackoverflow.com/users/5994097/nikolas"}, "edited": false, "score": 0, "creation_date": 1550713754, "post_id": 54785725, "comment_id": 96373520, "body": "Thanks for your clue, mstorsjo :) II&#39;ve just found from <a href=\"https://developer.android.com/ndk/downloads/revision_history.html\" rel=\"nofollow noreferrer\">here</a> that GCC was removed since NDK Rev. 11 (March 2016). And from <a href=\"https://stackoverflow.com/questions/23665181/gcc-toolchain-for-llvm\">here</a> that &quot;<i>the option -gcc-toolchain only tells the built Clang where to look for a C++ standard library and headers, it has nothing to do with the LLVM/Clang build process</i>&quot;"}, {"owner": {"reputation": 93, "user_id": 5994097, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-pmBPbIm3Vfg/AAAAAAAAAAI/AAAAAAAAAJM/Z5sJVilLhik/photo.jpg?sz=128", "display_name": "Nikolas", "link": "https://stackoverflow.com/users/5994097/nikolas"}, "edited": false, "score": 0, "creation_date": 1550714175, "post_id": 54785725, "comment_id": 96373615, "body": "But I&#39;m still curious about how Clang define a project as &quot;not able to migrate to using Clang yet&quot;? Can it decide whether or not to use &quot;C/C++ standard library and headers&quot; inside arm-linux-androideabi-4.9/ or x86_64-4.9? (I&#39;m wondering if we can remove all these legacy folders and my project can be built just fine)"}, {"owner": {"reputation": 11902, "user_id": 3115956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8eb57ac8f519e5655e4f436e5dd276fb?s=128&d=identicon&r=PG&f=1", "display_name": "mstorsjo", "link": "https://stackoverflow.com/users/3115956/mstorsjo"}, "reply_to_user": {"reputation": 93, "user_id": 5994097, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-pmBPbIm3Vfg/AAAAAAAAAAI/AAAAAAAAAJM/Z5sJVilLhik/photo.jpg?sz=128", "display_name": "Nikolas", "link": "https://stackoverflow.com/users/5994097/nikolas"}, "edited": false, "score": 1, "creation_date": 1550739453, "post_id": 54785725, "comment_id": 96382555, "body": "NDK r11 only removed one older GCC version, but NDK r18 removed GCC altogether. No, you can&#39;t remove those folders, they still contain the binutils for each architecture, and NDK r17 as you are using still use them from those directories. In this case, <code>-gcc-toolchain</code> isn&#39;t used for finding any standard library or headers, but only for finding extra tools used during the build (the linker). In the latest NDK r19, those directories are still present but aren&#39;t used by a normal build. In later versions they might no longer be included."}, {"owner": {"reputation": 11902, "user_id": 3115956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8eb57ac8f519e5655e4f436e5dd276fb?s=128&d=identicon&r=PG&f=1", "display_name": "mstorsjo", "link": "https://stackoverflow.com/users/3115956/mstorsjo"}, "reply_to_user": {"reputation": 93, "user_id": 5994097, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-pmBPbIm3Vfg/AAAAAAAAAAI/AAAAAAAAAJM/Z5sJVilLhik/photo.jpg?sz=128", "display_name": "Nikolas", "link": "https://stackoverflow.com/users/5994097/nikolas"}, "edited": false, "score": 1, "creation_date": 1550739616, "post_id": 54785725, "comment_id": 96382658, "body": "Clang doesn&#39;t define a project &quot;not able to mgirate to using Clang yet&quot;. Historically, when building using the <code>ndk-build</code> system, the developer could set the variable <code>NDK_TOOLCHAIN_VERSION</code> to pick which version of GCC to use, when there were multiple ones to choose from. At some point Clang was added, and one could set <code>NDK_TOOLCHAIN_VERSION=clang</code> to pick that instead. After clang was made default, projects could still override <code>NDK_TOOLCHAIN_VERSION</code> if they preferred building with GCC, but that&#39;s no longer possible in the latest versions as GCC has been removed altogether."}], "tags": [], "owner": {"reputation": 11902, "user_id": 3115956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8eb57ac8f519e5655e4f436e5dd276fb?s=128&d=identicon&r=PG&f=1", "display_name": "mstorsjo", "link": "https://stackoverflow.com/users/3115956/mstorsjo"}, "is_accepted": true, "score": 14, "last_activity_date": 1550663452, "creation_date": 1550663452, "answer_id": 54785725, "question_id": 54785091, "link": "https://stackoverflow.com/questions/54785091/whats-the-use-of-llvm-in-android-ndk-toolchains/54785725#54785725", "title": "What&#39;s the use of LLVM in Android NDK Toolchains?", "body": "<p>LLVM is the compiler (backend). The compiler used is Clang, which resides within the llvm directory. (LLVM is the name of the component of Clang that does the actual code generation, aka backend.)</p>\n\n<p>Previously, the NDK used GCC as compiler. With GCC, each target architecture (arm, aarch64, x86 etc) had a separate copy of GCC built with that individual target configured. Clang/LLVM on the other hand can target any configured architecture with one single compiler executable. So with Clang, you'll save a bit of diskspace, avoiding to have many separate compiler executables. That's why there's only one copy of the llvm directory tree.</p>\n\n<p>In NDK r17, you have both GCC and Clang compilers available; Clang is used by default but GCC is still available for projects that haven't been able to migrate to using Clang yet. In newer NDK versions, the old GCC is removed.</p>\n\n<p>In the newer NDK versions, even if GCC is removed, the architecture specific directories like <code>aarch64-linux-android-4.9</code> are still kept around, as the GNU binutils (minor tools used by the build process) are still used, and those also come in one copy per architecture (even though they technically might work across architectures).</p>\n\n<p>And as for why building for e.g. arm also mentions x86_64; when you are running Clang or GCC, you are running an executable for your build computer which runs x86_64, hence the <code>prebuilt/linux-x86_64</code> part of the paths.</p>\n"}, {"tags": [], "owner": {"reputation": 10161, "user_id": 8034839, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/N8r2x.jpg?s=128&g=1", "display_name": "shizhen", "link": "https://stackoverflow.com/users/8034839/shizhen"}, "is_accepted": false, "score": 9, "last_activity_date": 1561115700, "last_edit_date": 1561115700, "creation_date": 1550732172, "answer_id": 54800967, "question_id": 54785091, "link": "https://stackoverflow.com/questions/54785091/whats-the-use-of-llvm-in-android-ndk-toolchains/54800967#54800967", "title": "What&#39;s the use of LLVM in Android NDK Toolchains?", "body": "<p>LLVM is an umbrela project now, and it contains multiple modular and reusable compiler and toolchain technologies. You can check more details at <a href=\"https://llvm.org/\" rel=\"noreferrer\">The LLVM Compiler Infrastructure</a>.</p>\n\n<p>For Android NDK, llvm became the default toolchain since r13b and gcc was removed since r18b. </p>\n\n<p>According to toolchains directory <code>toolchains/llvm/prebuilt/darwin-x86_64</code>, llvm supports all the ABIs, i.e. x86, x86_64, arm, arm64. </p>\n\n<p>Probably there will be only one <code>llvm</code> directory under <code>toolchains</code> directory in future NDK releases when all the gcc related tools, headers and libs are completely ported to llvm. </p>\n\n<p><a href=\"https://i.stack.imgur.com/ZaDON.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/ZaDON.png\" alt=\"enter image description here\"></a></p>\n\n<p>References that may help: <a href=\"https://stackoverflow.com/questions/53409479/android-ndk-path-variable-for-strip-command-in-cmake-build-tool-chain\">Android NDK path variable for &quot;strip&quot; command in CMake build tool chain</a> </p>\n\n<hr>\n\n<h1>Updates</h1>\n\n<p>Just did a quick test on different NDK revisions to check the configurations for <code>--gcc-toolchain</code> and <code>--sysroot</code> which are for cross compilation. </p>\n\n<h2>On r16b</h2>\n\n<pre><code>--target=armv7-none-linux-androideabi \n--gcc-toolchain=~/ndks/android-ndk-r16b/toolchains/arm-linux-androideabi-4.9/prebuilt/darwin-x86_64\n--sysroot=~/ndks/android-ndk-r16b/sysroot \n</code></pre>\n\n<h2>On r17c</h2>\n\n<pre><code>--target=armv7-none-linux-androideabi\n--gcc-toolchain=~/ndks/android-ndk-r17c/toolchains/arm-linux-androideabi-4.9/prebuilt/darwin-x86_64\n--sysroot=~/ndks/android-ndk-r17c/sysroot\n</code></pre>\n\n<h2>On r18b</h2>\n\n<pre><code>--target=armv7-none-linux-androideabi19\n--gcc-toolchain=~/ndks/android-ndk-r18b/toolchains/arm-linux-androideabi-4.9/prebuilt/darwin-x86_64\n--sysroot=~/ndks/android-ndk-r18b/sysroot\n</code></pre>\n\n<h2>On r19b</h2>\n\n<pre><code>--target=armv7-none-linux-androideabi19 \n--gcc-toolchain=~/ndks/android-ndk-r19b/toolchains/llvm/prebuilt/darwin-x86_64 \n--sysroot=~/ndks/android-ndk-r19b/toolchains/llvm/prebuilt/darwin-x86_64/sysroot \n</code></pre>\n\n<p>As seen above, <strong>before NDK r19b</strong>, NDK uses clang compiler but the <code>--gcc-toolchain</code> and <code>--sysroot</code> are configured as the older paths for build tools, headers and libs. </p>\n\n<p>But, <strong>since NDK r19b</strong>, the <code>--gcc-toolchain</code> and <code>--sysroot</code> are configured as the new tool chains <strong>llvm</strong>, i.e. <code>toolchains/llvm/prebuilt/darwin-x86_64</code>, and the tools (e.g. ranlib, ar, strip, etc) header files and libraries of \"llvm version\" will be used. </p>\n\n<p>Also, note that <code>toolchains/llvm/prebuilt/darwin-x86_64</code> contains the support for all the Android ABIs, i.e. <code>aarch64-linux-android</code> for <strong>arm64-v8a</strong>, <code>arm-linux-androideabi</code> for <strong>armeabi-v7a</strong>, <code>i686-linux-android</code> for <strong>x86</strong>, <code>x86_64-linux-android</code> for <strong>x86_64</strong>. </p>\n\n<p>So, <strong>you can try out the NDK r19b if you want to purely use llvm toolchains.</strong> </p>\n"}], "owner": {"reputation": 93, "user_id": 5994097, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-pmBPbIm3Vfg/AAAAAAAAAAI/AAAAAAAAAJM/Z5sJVilLhik/photo.jpg?sz=128", "display_name": "Nikolas", "link": "https://stackoverflow.com/users/5994097/nikolas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8106, "favorite_count": 7, "accepted_answer_id": 54785725, "answer_count": 2, "score": 8, "last_activity_date": 1565513628, "creation_date": 1550661554, "question_id": 54785091, "link": "https://stackoverflow.com/questions/54785091/whats-the-use-of-llvm-in-android-ndk-toolchains", "title": "What&#39;s the use of LLVM in Android NDK Toolchains?", "body": "<p><strong>What's the use of LLVM in Android NDK Toolchains?</strong></p>\n\n<hr>\n\n<p>A little recap:</p>\n\n<p>I was building my native project with Gradlew on Ubuntu, targeting arm and x86_64 architectures. Seems that <strong>LLVM</strong> were utilized to call C/C++ compiler of <strong>arm-linux-androideabi-4.9</strong> as well as <strong>x86_64</strong>(?)</p>\n\n<p>The following is extracted from <strong><em>armeabi-v7a/ndkBuild_build_output.log:</em></strong></p>\n\n<blockquote>\n  <p>/home/mypc/Android/android-ndk-r17c/toolchains/llvm/prebuilt/linux-x86_64/bin/clang++\n  -MMD -MP -MF /home/mypc/git/android-project-1/build/intermediates/ndkBuild/debug/obj/local/armeabi-v7a/objs-debug/module-5/stream_cpp.o.d\n  -gcc-toolchain /home/mypc/Android/android-ndk-r17c/toolchains/arm-linux-androideabi-4.9/prebuilt/linux-x86_64\n  -fpic -ffunction-sections -funwind-tables -fstack-protector-strong -Wno-invalid-command-line-argument ...</p>\n</blockquote>\n\n<p>..and the following is extracted from <strong><em>x86_64/ndkBuild_build_output.log:</em></strong></p>\n\n<blockquote>\n  <p>/home/mypc/Android/android-ndk-r17c/toolchains/llvm/prebuilt/linux-x86_64/bin/clang++\n  -MMD -MP -MF /home/mypc/git/android-project-1/build/intermediates/ndkBuild/debug/obj/local/x86_64/objs-debug/module-5/stream_cpp.o.d\n  -gcc-toolchain /home/mypc/Android/android-ndk-r17c/toolchains/x86_64-4.9/prebuilt/linux-x86_64\n  -target x86_64-none-linux-android -ffunction-sections -funwind-tables -fstack-protector-strong -fPIC -Wno-invalid-command-line-argument ...</p>\n</blockquote>\n\n<ul>\n<li>The \"...\" indicates that there's a long tail of this single-line command I've trimmed off.</li>\n<li>Names of personal folders &amp; project were changed.</li>\n</ul>\n\n<p>Let's take a look what's inside Android NDK's <strong>toolchains</strong> folder:</p>\n\n<pre><code>myacc:~/.../android-ndk-r17c/toolchains$ tree -L 1\n.\n\u251c\u2500\u2500 aarch64-linux-android-4.9\n\u251c\u2500\u2500 arm-linux-androideabi-4.9\n\u251c\u2500\u2500 llvm\n\u251c\u2500\u2500 mips64el-linux-android-4.9\n\u251c\u2500\u2500 mipsel-linux-android-4.9\n\u251c\u2500\u2500 NOTICE-MIPS\n\u251c\u2500\u2500 NOTICE-MIPS64\n\u251c\u2500\u2500 renderscript\n\u251c\u2500\u2500 x86-4.9\n\u2514\u2500\u2500 x86_64-4.9\n</code></pre>\n\n<hr>\n\n<p>It's quite confusing to me. I thought <strong>llvm</strong> is a kind of toolchain since it's placed here, next to other toolchains. Again, what's actually the use of LLVM in Android NDK Toolchains?</p>\n\n<p>Thanks for the help :)</p>\n"}, {"tags": ["c++", "integer-division"], "comments": [{"owner": {"reputation": 16436, "user_id": 10411602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b534549770aedbc4d7eb03a39d740f6?s=128&d=identicon&r=PG&f=1", "display_name": "Blaze", "link": "https://stackoverflow.com/users/10411602/blaze"}, "edited": false, "score": 1, "creation_date": 1550659908, "post_id": 54784533, "comment_id": 96347538, "body": "Does this work? <code>sum1 += (pow(-1.0,i))*(((double)i)&#47;((double)i+1.0));</code> Also you need to initialize your variables, so <code>double sum1;</code> should be <code>double sum1 = 0.0;</code>"}, {"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 1, "creation_date": 1550659979, "post_id": 54784533, "comment_id": 96347586, "body": "<code>i</code> is of type <code>int</code>. Hence, <code>(i)&#47;(i+1)</code> is an integer division. You could fix this by e.g. <code>(double)(i)&#47;(i+1)</code> which forces an argument (and thus the whole division) to be done with floating points."}, {"owner": {"reputation": 1262, "user_id": 613299, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/33b2b4871a263239e263f4991477e978?s=128&d=identicon&r=PG", "display_name": "Martin Ch", "link": "https://stackoverflow.com/users/613299/martin-ch"}, "edited": false, "score": 1, "creation_date": 1550660092, "post_id": 54784533, "comment_id": 96347651, "body": "your loop is starting from 1, shouldn&#39;t it be from 0?"}, {"owner": {"reputation": 2055, "user_id": 10733631, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-z9f47Aj3ez4/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-j0jfocyr5e1Wd0v4q8aluK_b7B5Q/mo/photo.jpg?sz=128", "display_name": "Dmytro Dadyka", "link": "https://stackoverflow.com/users/10733631/dmytro-dadyka"}, "edited": false, "score": 3, "creation_date": 1550660604, "post_id": 54784533, "comment_id": 96347986, "body": "Your sum1 in not initialized before usage!"}, {"owner": {"reputation": 21, "user_id": 10989839, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e08de5a629708a7883e64d921736b76?s=128&d=identicon&r=PG&f=1", "display_name": "Elia", "link": "https://stackoverflow.com/users/10989839/elia"}, "reply_to_user": {"reputation": 16436, "user_id": 10411602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b534549770aedbc4d7eb03a39d740f6?s=128&d=identicon&r=PG&f=1", "display_name": "Blaze", "link": "https://stackoverflow.com/users/10411602/blaze"}, "edited": false, "score": 0, "creation_date": 1550660612, "post_id": 54784533, "comment_id": 96347990, "body": "@Blaze --- Thanks Blaze, can i do something to code show the Exact value ? I mean that code show <code>-0.6166666666666667</code> instead <code>-0.616667</code> ?"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1550660838, "post_id": 54784533, "comment_id": 96348140, "body": "Your code doesn&#39;t match your question."}, {"owner": {"reputation": 16436, "user_id": 10411602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b534549770aedbc4d7eb03a39d740f6?s=128&d=identicon&r=PG&f=1", "display_name": "Blaze", "link": "https://stackoverflow.com/users/10411602/blaze"}, "edited": false, "score": 0, "creation_date": 1550660897, "post_id": 54784533, "comment_id": 96348181, "body": "@Elia try this: <code>std::cout &lt;&lt; std::setprecision(15) &lt;&lt; sum1 &lt;&lt; std::endl;</code>"}, {"owner": {"reputation": 21, "user_id": 10989839, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e08de5a629708a7883e64d921736b76?s=128&d=identicon&r=PG&f=1", "display_name": "Elia", "link": "https://stackoverflow.com/users/10989839/elia"}, "reply_to_user": {"reputation": 16436, "user_id": 10411602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b534549770aedbc4d7eb03a39d740f6?s=128&d=identicon&r=PG&f=1", "display_name": "Blaze", "link": "https://stackoverflow.com/users/10411602/blaze"}, "edited": false, "score": 0, "creation_date": 1550661069, "post_id": 54784533, "comment_id": 96348304, "body": "@Blaze --- Thanks mate. Now its work exactly ."}, {"owner": {"reputation": 24693, "user_id": 10190237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f95f50f67af8a9658c5d76df263b323?s=128&d=identicon&r=PG&f=1", "display_name": "P.W", "link": "https://stackoverflow.com/users/10190237/p-w"}, "reply_to_user": {"reputation": 16436, "user_id": 10411602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b534549770aedbc4d7eb03a39d740f6?s=128&d=identicon&r=PG&f=1", "display_name": "Blaze", "link": "https://stackoverflow.com/users/10411602/blaze"}, "edited": false, "score": 2, "creation_date": 1550661141, "post_id": 54784533, "comment_id": 96348350, "body": "@Blaze: why don&#39;t you post all that as an answer?"}, {"owner": {"reputation": 16436, "user_id": 10411602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b534549770aedbc4d7eb03a39d740f6?s=128&d=identicon&r=PG&f=1", "display_name": "Blaze", "link": "https://stackoverflow.com/users/10411602/blaze"}, "reply_to_user": {"reputation": 24693, "user_id": 10190237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f95f50f67af8a9658c5d76df263b323?s=128&d=identicon&r=PG&f=1", "display_name": "P.W", "link": "https://stackoverflow.com/users/10190237/p-w"}, "edited": false, "score": 1, "creation_date": 1550661928, "post_id": 54784533, "comment_id": 96348851, "body": "@P.W good idea, I did that."}], "answers": [{"comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1550660687, "post_id": 54784737, "comment_id": 96348036, "body": "Some explanation might be useful here. Not (yet) my downvote though."}], "tags": [], "owner": {"reputation": 931, "user_id": 1504868, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10b41efcdd54ba679e9e553cc9599844?s=128&d=identicon&r=PG", "display_name": "serge", "link": "https://stackoverflow.com/users/1504868/serge"}, "is_accepted": false, "score": -1, "last_activity_date": 1550660441, "creation_date": 1550660441, "answer_id": 54784737, "question_id": 54784533, "link": "https://stackoverflow.com/questions/54784533/summation-of-a-series/54784737#54784737", "title": "Summation of a series", "body": "<p>Try this instead</p>\n\n<pre><code>for (i = 0; i &lt;= 5; i++) // from 0 to 5 inclusively\n    sum1 += (pow(-1, i)) * (static_cast&lt;double&gt;(i) / (i + 1));\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2055, "user_id": 10733631, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-z9f47Aj3ez4/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-j0jfocyr5e1Wd0v4q8aluK_b7B5Q/mo/photo.jpg?sz=128", "display_name": "Dmytro Dadyka", "link": "https://stackoverflow.com/users/10733631/dmytro-dadyka"}, "is_accepted": false, "score": 2, "last_activity_date": 1550661921, "last_edit_date": 1550661921, "creation_date": 1550661477, "answer_id": 54785060, "question_id": 54784533, "link": "https://stackoverflow.com/questions/54784533/summation-of-a-series/54785060#54785060", "title": "Summation of a series", "body": "<ul>\n<li><p>Always init variables before usage. <code>double sum1 = 0;</code></p></li>\n<li><p><code>((i) / (i + 1))</code> performs <strong>integer</strong> division, the result is <code>0</code> for any <code>i</code>.</p></li>\n<li>Use for the <code>pow</code> function to find power of <code>-1</code> is extremely irrational</li>\n</ul>\n\n<pre><code>int main() {\n\n   int i;\n   double sum1 = 0;\n   double sign = -1;\n\n\n   for (i = 1; i &lt; 6; i++)\n   {\n      sum1 += sign * i / (i + 1);\n      sign *= -1.0;\n   }\n\n   std::cout &lt;&lt; sum1;\n\n   return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 16436, "user_id": 10411602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b534549770aedbc4d7eb03a39d740f6?s=128&d=identicon&r=PG&f=1", "display_name": "Blaze", "link": "https://stackoverflow.com/users/10411602/blaze"}, "is_accepted": true, "score": 2, "last_activity_date": 1550661876, "creation_date": 1550661876, "answer_id": 54785189, "question_id": 54784533, "link": "https://stackoverflow.com/questions/54784533/summation-of-a-series/54785189#54785189", "title": "Summation of a series", "body": "<p>Make sure to initialize your variables before you use them. You initialize <code>i</code> afterwards so it's fine like this, but <code>sum1</code> needs to be initialized:</p>\n\n<pre><code>double sum1 = 0.0;\n</code></pre>\n\n<p>For the summation, even if the result is assigned to a <code>double</code>, the intermediate results might not be and integer devision result in truncated values. For this reason, double literals should be used (such as <code>2.0</code> instead of <code>2</code>) and <code>i</code> should be casted where applicable:</p>\n\n<pre><code>sum1 += (pow(-1, i))*(((double)i) / ((double)i + 1.0));\n</code></pre>\n\n<p>Finally, to get the desired precision, <code>std::setprecision</code> can be used in the print. The final result could look like this:</p>\n\n<pre><code>int main() {\n    int i;\n    double sum1 = 0.0;\n\n    for (i = 1; i &lt; 6; i++)\n        sum1 += (pow(-1, i))*(((double)i) / ((double)i + 1.0));\n\n    std::cout &lt;&lt; std::setprecision(15) &lt;&lt; sum1  &lt;&lt; std::endl;\n    return 0;\n}\n</code></pre>\n\n<p>Output:</p>\n\n<blockquote>\n  <p>-0.616666666666667</p>\n</blockquote>\n"}], "owner": {"reputation": 21, "user_id": 10989839, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e08de5a629708a7883e64d921736b76?s=128&d=identicon&r=PG&f=1", "display_name": "Elia", "link": "https://stackoverflow.com/users/10989839/elia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "closed_date": 1550662398, "accepted_answer_id": 54785189, "answer_count": 3, "score": 1, "last_activity_date": 1569398650, "creation_date": 1550659811, "last_edit_date": 1569398650, "question_id": 54784533, "link": "https://stackoverflow.com/questions/54784533/summation-of-a-series", "closed_reason": "Duplicate", "title": "Summation of a series", "body": "<p>This is my code and i'm trying to calculate this series : <code>((-1)^n)*n/(n+1)</code> that n started from <code>1</code> to <code>5</code>, code is not working correctly, anyone can help ?</p>\n\n<pre><code>int main(){\n\n    int i,n;\n    double sum1;\n\n    for (i=1; i&lt;6; i++)\n\n    sum1 += (pow(-1,i))*((i)/(i+1));\n\n    cout&lt;&lt;sum1;\n\n    return 0;\n}\n</code></pre>\n\n<p>The true answer at the end must be equal to <code>-0.6166666666666667</code> which code cant calculate it correctly.\nI calculated series from <a href=\"https://www.numberempire.com/seriescalculator.php\" rel=\"nofollow noreferrer\">here</a>. Is there any special function to do summation ?</p>\n"}, {"tags": ["c++", "clob", "prefetch", "occi"], "answers": [{"tags": [], "owner": {"reputation": 683, "user_id": 4532037, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/fa63fb651e5f51bf9ca69ced852139ba?s=128&d=identicon&r=PG&f=1", "display_name": "zrb", "link": "https://stackoverflow.com/users/4532037/zrb"}, "is_accepted": false, "score": 0, "last_activity_date": 1592950945, "creation_date": 1592950945, "answer_id": 62544635, "question_id": 54784447, "link": "https://stackoverflow.com/questions/54784447/is-there-a-way-to-prefetch-lobs-data-in-occi/62544635#62544635", "title": "Is there a way to prefetch LOBs data in occi?", "body": "<p>There is a way to do this and we use it heavily to optimize loading tables with CLOB columns across the WAN</p>\n<p>Instead of fetching the data as a CLOB column, convert it into a <code>varray(16)</code> of <code>varchar(32767)</code></p>\n<pre><code>select clob_to_str_array(clob_column) from table_name;\n</code></pre>\n<p>OCCI will return you a <code>vector &lt; std::string &gt;</code> in this case.  We brought down load times from 15 minutes to less than 10 seconds with this approach</p>\n<p>I consider this one of my best optimizations ever, but I did this only because it was too late to avoid CLOB</p>\n"}], "owner": {"reputation": 21, "user_id": 6050124, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-PGWPg46VLJM/AAAAAAAAAAI/AAAAAAAAIlY/x04fg1JQyPU/photo.jpg?sz=128", "display_name": "Angelo Rubion", "link": "https://stackoverflow.com/users/6050124/angelo-rubion"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 122, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1592950945, "creation_date": 1550659543, "question_id": 54784447, "link": "https://stackoverflow.com/questions/54784447/is-there-a-way-to-prefetch-lobs-data-in-occi", "title": "Is there a way to prefetch LOBs data in occi?", "body": "<p>I'm working on a C++ application with Oracle as database and trying to fetch thousands of records with CLOB datatype.<br>\nBeen searching the net on how to prefetch a CLOB datatype in OCCI but always see this \"Prefetching is not in effect if LONG, LOB or Opaque Type columns (such as XMLType) are part of the query.\"</p>\n\n<p>Is there a way in OCCI in order to prefetch CLOB or are there other alternative solutions to improve the time spent to fetch CLOB data?\nThanks for the help.</p>\n"}, {"tags": ["c++", "templates", "language-lawyer", "overload-resolution"], "comments": [{"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 6, "creation_date": 1550659481, "post_id": 54784267, "comment_id": 96347280, "body": "Recursive function template overload resolution? Good luck to whoever dives into that one..."}], "answers": [{"comments": [{"owner": {"reputation": 61409, "user_id": 485343, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e18b024a122df74275dd2c4486e8a2b4?s=128&d=identicon&r=PG", "display_name": "rustyx", "link": "https://stackoverflow.com/users/485343/rustyx"}, "edited": false, "score": 4, "creation_date": 1550661455, "post_id": 54784849, "comment_id": 96348567, "body": "Maybe add that a non-deduced context means the template is <a href=\"https://timsong-cpp.github.io/cppwp/over.over#2\" rel=\"nofollow noreferrer\">not considered</a> for the outer <code>foo()</code>"}], "tags": [], "owner": {"reputation": 10915, "user_id": 5376789, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6715b3506c7312f63950450070ed8345?s=128&d=identicon&r=PG&f=1", "display_name": "xskxzr", "link": "https://stackoverflow.com/users/5376789/xskxzr"}, "is_accepted": true, "score": 10, "last_activity_date": 1550726310, "last_edit_date": 1550726310, "creation_date": 1550660782, "answer_id": 54784849, "question_id": 54784267, "link": "https://stackoverflow.com/questions/54784267/why-does-this-template-argument-deduction-overload-resolution-fail/54784849#54784849", "title": "Why does this template argument deduction/overload resolution fail?", "body": "<p>For simplicity, let's call the first overload <code>foo1</code> and call the second overload <code>foo2</code>.</p>\n\n<p>With templates, the problem is that you cannot deduce the template arguments for the outer <code>foo</code>, according to <a href=\"https://timsong-cpp.github.io/cppwp/temp.deduct.call#6.1\" rel=\"nofollow noreferrer\">[temp.deduct.call]/6</a>:</p>\n\n<blockquote>\n  <p>If the argument is an overload set containing one or more function\n  templates, the parameter is treated as a non-deduced context.</p>\n</blockquote>\n\n<p>Without templates, the program considers all possibilities <code>foo1(foo1)</code>, <code>foo1(foo2)</code>, <code>foo2(foo1)</code>, <code>foo2(foo2)</code> and chooses the only viable one <code>foo2(foo1)</code>, according to <a href=\"https://timsong-cpp.github.io/cppwp/over.over#6\" rel=\"nofollow noreferrer\">[over.over]/6</a>:</p>\n\n<blockquote>\n  <p>[\u2009<em>Note:</em> If <code>f()</code> and <code>g()</code> are both overloaded functions, the cross\n  product of possibilities must be considered to resolve <code>f(&amp;g)</code>, or the\n  equivalent expression <code>f(g)</code>. \u2014\u2009<em>end note</em>\u2009]</p>\n</blockquote>\n"}], "owner": {"reputation": 1889, "user_id": 7038446, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c38faf3b21f6b84c3d25269cf3919d8a?s=128&d=identicon&r=PG&f=1", "display_name": "felix", "link": "https://stackoverflow.com/users/7038446/felix"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 137, "favorite_count": 0, "accepted_answer_id": 54784849, "answer_count": 1, "score": 7, "last_activity_date": 1550726310, "creation_date": 1550658979, "last_edit_date": 1550664374, "question_id": 54784267, "link": "https://stackoverflow.com/questions/54784267/why-does-this-template-argument-deduction-overload-resolution-fail", "title": "Why does this template argument deduction/overload resolution fail?", "body": "<p>This code snippet fails to compile in <a href=\"https://godbolt.org/z/OYAVY7\" rel=\"nofollow noreferrer\">MSVC</a>, <a href=\"https://godbolt.org/z/TOn56L\" rel=\"nofollow noreferrer\">Clang</a> and <a href=\"https://godbolt.org/z/PupawT\" rel=\"nofollow noreferrer\">Gcc</a>, (they give different error message):</p>\n\n<pre><code>int foo(int a, int b) {\n    return a + b;\n}\n\ntemplate &lt;class Ret, class A, class B&gt;\nvoid foo(Ret (*)(A, B)) {\n\n}\n\nint main() {\n    foo(foo);\n    return 0;\n}\n</code></pre>\n\n<p>Shouldn't this compile? I can't see why it fails in resolving the overloaded function or in deducing the template arguments. Any help is welcome, thanks.</p>\n\n<p>PS: It compiles if the template is replaced with <code>void foo(int (*)(int, int))</code>, or if we rename one of <code>foo</code> to avoid overloading.</p>\n"}, {"tags": ["c++", "cross-platform"], "answers": [{"tags": [], "owner": {"reputation": 2088, "user_id": 8524922, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HfezG.jpg?s=128&g=1", "display_name": "Beyondo", "link": "https://stackoverflow.com/users/8524922/beyondo"}, "is_accepted": true, "score": 0, "last_activity_date": 1550669333, "last_edit_date": 1550669333, "creation_date": 1550658935, "answer_id": 54784251, "question_id": 54784250, "link": "https://stackoverflow.com/questions/54784250/get-all-directories-files-and-sub-directories-in-a-specific-path-using-pure-c/54784251#54784251", "title": "Get all directories/files and sub-directories in a specific path using pure c++ (cross-platform)", "body": "<p>Using a recursive function with <strong><code>std::filesystem</code></strong>..!</p>\n\n<pre><code>#if __cplusplus &lt; 201703L// If the version of C++ is less than 17\n// It was still in the experimental:: namespace\n#include &lt;experimental/filesystem&gt;\nnamespace fs = std::experimental::filesystem;\n#else\n#include &lt;filesystem&gt;\nnamespace fs = std::filesystem;\n#endif\nstd::vector&lt;fs::path&gt; geteverything(const fs::path &amp;path)\n{\n    std::vector&lt;fs::path&gt; dirs;\n    for (const auto &amp; entry : fs::directory_iterator(path))\n    {\n        dirs.push_back(entry);\n        if (fs::is_directory(entry))\n        {\n            auto subdirs = geteverything(entry);\n            dirs.insert(dirs.end(), subdirs.begin(), subdirs.end());\n        }\n    }\n    return dirs;\n}\n</code></pre>\n\n<p><strong>Test</strong></p>\n\n<pre><code>// Change this to the absolute/relative path you'd like to fetch.\nstd::string path = \"C:/Windows/Temp\";\nint main()\n{\n    std::cout &lt;&lt; \"fetching all directories and files in : \" &lt;&lt; path &lt;&lt; \" ...\\n\";\n    auto list = geteverything(path);\n    for (const auto &amp;path : list)\n        std::cout &lt;&lt; path &lt;&lt; \"\\n\";\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 2088, "user_id": 8524922, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HfezG.jpg?s=128&g=1", "display_name": "Beyondo", "link": "https://stackoverflow.com/users/8524922/beyondo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "accepted_answer_id": 54784251, "answer_count": 1, "score": 1, "last_activity_date": 1550669333, "creation_date": 1550658935, "question_id": 54784250, "link": "https://stackoverflow.com/questions/54784250/get-all-directories-files-and-sub-directories-in-a-specific-path-using-pure-c", "title": "Get all directories/files and sub-directories in a specific path using pure c++ (cross-platform)", "body": "<p>How to get a vector of directories/files and sub-directories in a specific path using modern C++?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1550658834, "post_id": 54784150, "comment_id": 96346845, "body": "Take a close look at your <code>agents</code> constructor. What are you doing with the <b><i>local</i></b> variable <code>size</code> and <code>agentMembers</code>? How would those be related to the <i>member</i> variables with the same name?"}, {"owner": {"reputation": 25, "user_id": 4518207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47905fe638fc004285eda11c48e38e1a?s=128&d=identicon&r=PG&f=1", "display_name": "Robyn", "link": "https://stackoverflow.com/users/4518207/robyn"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1550658986, "post_id": 54784150, "comment_id": 96346958, "body": "Could you be a little more specific if possible? I&#39;m four weeks into this so my knowledge isn&#39;t expansive at all."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1550659104, "post_id": 54784150, "comment_id": 96347035, "body": "Then please go back to your tutorial or book or class-notes where it goes through variables, scopes and life-time. If you define two variables with the same name but in different scopes (that might be nested) then those are two different variables without any relationship."}, {"owner": {"reputation": 25, "user_id": 4518207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47905fe638fc004285eda11c48e38e1a?s=128&d=identicon&r=PG&f=1", "display_name": "Robyn", "link": "https://stackoverflow.com/users/4518207/robyn"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1550659287, "post_id": 54784150, "comment_id": 96347149, "body": "Well, that was pretty passive-aggressive; Telling me to go back to my tutor doesn&#39;t really offer any constructive insight."}], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 4518207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47905fe638fc004285eda11c48e38e1a?s=128&d=identicon&r=PG&f=1", "display_name": "Robyn", "link": "https://stackoverflow.com/users/4518207/robyn"}, "edited": false, "score": 0, "creation_date": 1550660097, "post_id": 54784371, "comment_id": 96347656, "body": "I did modify my above code to reflect your suggestion of agentMembers = { &quot;Jacob&quot;, etc, however, it tells me there are too many initializer values (since the removal of the 4 of course)."}, {"owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "reply_to_user": {"reputation": 25, "user_id": 4518207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47905fe638fc004285eda11c48e38e1a?s=128&d=identicon&r=PG&f=1", "display_name": "Robyn", "link": "https://stackoverflow.com/users/4518207/robyn"}, "edited": false, "score": 0, "creation_date": 1550660291, "post_id": 54784371, "comment_id": 96347775, "body": "@Robyn Unfortuneately I don&#39;t have a  compiler handy to check the code I&#39;ve just written, so I might have made a mistake. This is also an area where C++ has changed recently, so it&#39;s possible that your compiler is not up to speed with the latest C++. You could always do it the old-fashioned way <code>agentMembers[0] = &quot;Jacob&quot;; agentMembers[1] = &quot;Nathan&quot;; agentMembers[2] = &quot;Tomas&quot;; agentMembers[3] = &quot;Jack&quot;;</code>"}, {"owner": {"reputation": 25, "user_id": 4518207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47905fe638fc004285eda11c48e38e1a?s=128&d=identicon&r=PG&f=1", "display_name": "Robyn", "link": "https://stackoverflow.com/users/4518207/robyn"}, "edited": false, "score": 0, "creation_date": 1550660476, "post_id": 54784371, "comment_id": 96347900, "body": "Thank you and I appreciate the help, turns out that your very last suggestion as well as removing the int/string data-type fixed the issue. I had to manually enter the array names to the element."}], "tags": [], "owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "is_accepted": true, "score": 1, "last_activity_date": 1550659784, "last_edit_date": 1550659784, "creation_date": 1550659323, "answer_id": 54784371, "question_id": 54784150, "link": "https://stackoverflow.com/questions/54784150/cant-seem-to-print-string-arrayagents-cpp-from-the-main-using-a-call-to-a-for/54784371#54784371", "title": "Can&#39;t seem to print string array(agents.cpp) from the main using a call to a for loop within the agents class", "body": "<p>This is the error (very common newbie error)</p>\n\n<pre><code>agents::agents() {\n    agentName = \"\";\n    agentID = 1111;\n    int const size = 4;\n    string agentMembers[size] = { \"Jacob\", \"Nathan\", \"Tomas\", \"Jack\" }; \n}\n</code></pre>\n\n<p>it should be</p>\n\n<pre><code>agents::agents() {\n    agentName = \"\";\n    agentID = 1111;\n    size = 4;\n    agentMembers = { \"Jacob\", \"Nathan\", \"Tomas\", \"Jack\" }; \n}\n</code></pre>\n\n<p>Your code declares <em>new variables</em> called <code>size</code> and <code>agentMembers</code> that are completely unrelated to the variables declared in your class (apart from having the same name). That's why your constructor doesn't update the class variables because all you are setting are some local variables which no longer exist once the constructor has been exitted.</p>\n\n<p>However since we're on the topc of constructors it's worth pointing out that the best way to initialise class variables is to use an initialiser list</p>\n\n<pre><code>agents::agents() : agentName(\"\"), agentID(1111), size(4),\n    agentMembers{ \"Jacob\", \"Nathan\", \"Tomas\", \"Jack\"} {\n}\n</code></pre>\n\n<p>This version initialises the class variables with the given values, your version has two steps, first the class variables are <em>default initialised</em>, then you <em>assign</em> the given values to the variables. This is less efficient and there's no reason not to prefer the initialiser list version.</p>\n"}], "owner": {"reputation": 25, "user_id": 4518207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47905fe638fc004285eda11c48e38e1a?s=128&d=identicon&r=PG&f=1", "display_name": "Robyn", "link": "https://stackoverflow.com/users/4518207/robyn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 25, "favorite_count": 0, "accepted_answer_id": 54784371, "answer_count": 1, "score": 1, "last_activity_date": 1550659784, "creation_date": 1550658669, "question_id": 54784150, "link": "https://stackoverflow.com/questions/54784150/cant-seem-to-print-string-arrayagents-cpp-from-the-main-using-a-call-to-a-for", "title": "Can&#39;t seem to print string array(agents.cpp) from the main using a call to a for loop within the agents class", "body": "<p>I'm trying to print the array to screen. Unfortunately, it prints 4 blank lines instead. </p>\n\n<pre><code>// CarWarhouse.cpp : This file contains the 'main' function. Program execution begins and ends there.\n//\n\n#include \"pch.h\"\n#include &lt;string&gt;\n#include &lt;iostream&gt;\n\n#include \"agents.h\"\n\nusing namespace std;\n\nint main()\n{\n    string agentName;\n    int agentID;\n\n    agents A_1;\n\n    cout &lt;&lt; \"Administrative login: \";\n    cin &gt;&gt; agentName;\n    A_1.setAgentName(agentName);\n    cout &lt;&lt; \"Administrative password: \";\n    cin &gt;&gt; agentID;\n\n    while (agentID != A_1.getAgentID())\n    {\n        cout &lt;&lt; \"Invalid login\\n\";\n\n        cout &lt;&lt; \"\\nAdministrative password: \";\n        cin &gt;&gt; agentID;\n    }\n\n    cout &lt;&lt; endl &lt;&lt; \"Welcome back, Agent \" &lt;&lt; endl;\n\n    cout &lt;&lt; \"Active Agents: \" &lt;&lt; endl;\n\n    A_1.agentIdentities(); //Function call to agents.cpp\n\n}\n\nagents.cpp\n\n#include \"pch.h\"\n#include \"agents.h\"\n#include &lt;string&gt;\n\nagents::agents() {\n    agentName = \"\";\n    agentID = 1111;\n    int const size = 4;\n    string agentMembers[size] = { \"Jacob\", \"Nathan\", \"Tomas\", \"Jack\" }; //Agent members string array I want to print to screen.\n}\n\nagents::agents(string name, int ID)\n{\n    agentName = name;\n    agentID = ID;\n}\n\nagents::~agents()\n{}\n\n\nstring agents::getAgentName() const\n{\n    return  agentName;\n}\n\nint agents::getAgentID() const\n{\n    return agentID;\n}\n\nvoid agents::setAgentName(string incoming)\n{\n    agentName = incoming;\n}\n\nvoid agents::setAgentIdentity(int ID)\n{\n    agentID = ID;\n}\n\nvoid agents::agentIdentities() //Main calls this function.\n{\n    for (int i = 0; i &lt; size; i++)\n    {\n        cout &lt;&lt; agentMembers[i] &lt;&lt; endl;\n    }\n\n    cout &lt;&lt; agentMembers[0];\n}\n\n\n#pragma once\n\n#include &lt;iostream&gt;\n#include &lt;string&gt;\n\nusing namespace std;\n\n#ifndef agents_h\n#define agents_h\n\nclass agents{\n\npublic:\n    //First thing, default constructor\n    agents();\n\n    //Overload Constructor\n    agents(string, int);\n\n    //Destructor\n\n    ~agents();\n\n    //Accessor Functions\n\n    //If accessor doesn't modify member variables, end with const on the function name.\n\n    string getAgentName() const;\n        //getName returns name of the customer.\n\n    int getAgentID() const;\n\n\n    void setAgentName(string);\n    //getName returns the newly assigned customer reference number.\n\n    void setAgentIdentity(int);\n\n    void agentIdentities();\n    //Retrieves agent identites (names within the string array).\n\nprivate:\n    //Member variables\n    string agentName;\n    int agentID;\n    string agentMembers[4];\n    int size = 4;\n};\n\n#endif\n</code></pre>\n\n<p>I've identified within the code the three areas of key interest. I've trying to print a string array from the main using a function call from the main to agents.cpp.</p>\n\n<p>Each time I run this code, it prints 4 blank lines, I'm fairly new to c++ in the sense that it's my starting 4 weeks at University.</p>\n\n<p>Thank you.</p>\n"}, {"tags": ["c++", "c++11", "callback", "boost-asio"], "comments": [{"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 1, "creation_date": 1550659114, "post_id": 54784105, "comment_id": 96347045, "body": "Put repeated parts of the code into separate functions.  By nesting use of lambdas or function objects (e.g. lambda creating a lambda, and passing it to another function) - as you are - you are effectively begging to have to rewrite the code every time you use it.   That means, if you do it more than once, repeating the code."}, {"owner": {"reputation": 11354, "user_id": 70600, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/6123be50f7a10302e7bf59dcdc5e2623?s=128&d=identicon&r=PG", "display_name": "ruipacheco", "link": "https://stackoverflow.com/users/70600/ruipacheco"}, "reply_to_user": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 0, "creation_date": 1550659190, "post_id": 54784105, "comment_id": 96347086, "body": "I&#39;ll have less boilerplate but it will still be there."}, {"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 0, "creation_date": 1550660221, "post_id": 54784105, "comment_id": 96347725, "body": "Sometimes, that&#39;s the way it goes.   Without knowing all the ways in which you repeat this type of code (which is not possible, since you&#39;ve only provided one example) it&#39;s hard to know how to eliminate or reduce repetition in a way that satisfies you.     But you can certainly reduce it by breaking it into smaller functions - templated functions if necessary, since that you are using templated functions (it&#39;s not possible to pass lambdas directly to non-templated functions)."}, {"owner": {"reputation": 71, "user_id": 8189766, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SKvtK.png?s=128&g=1", "display_name": "Cactus", "link": "https://stackoverflow.com/users/8189766/cactus"}, "edited": false, "score": 1, "creation_date": 1550666163, "post_id": 54784105, "comment_id": 96351411, "body": "You can try to adapt a solution based on the monadic error handling principle to abstract from your repeated error handling cases:  <a href=\"https://medium.com/@huund/monadic-error-handling-1e2ce66e3810\" rel=\"nofollow noreferrer\">monadic error handling</a>  This one uses boost optionals but you can achieve the same goal with the std optional from c++17:  <a href=\"https://www.fluentcpp.com/2017/07/04/multiple-error-handling-with-the-optional-monad-in-c/\" rel=\"nofollow noreferrer\">c++ friendly version</a>"}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1550669362, "post_id": 54784105, "comment_id": 96353331, "body": "If you can afford to use coroutines, use them. you can simply throw and catch exceptions then."}, {"owner": {"reputation": 11354, "user_id": 70600, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/6123be50f7a10302e7bf59dcdc5e2623?s=128&d=identicon&r=PG", "display_name": "ruipacheco", "link": "https://stackoverflow.com/users/70600/ruipacheco"}, "edited": false, "score": 0, "creation_date": 1550669844, "post_id": 54784105, "comment_id": 96353647, "body": "Even if I compile with cxx_noexcept?"}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1550671021, "post_id": 54784105, "comment_id": 96354407, "body": "Well you know. If you want to remove the rote of error handling AND compile without exception support, you really MUST be using a librarified solution like the ideas mentioned above. But that just means that (a) you choose your own problems (b) you write your own integration so as to hide the impedance mismatch with 3rd party code"}, {"owner": {"reputation": 11354, "user_id": 70600, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/6123be50f7a10302e7bf59dcdc5e2623?s=128&d=identicon&r=PG", "display_name": "ruipacheco", "link": "https://stackoverflow.com/users/70600/ruipacheco"}, "reply_to_user": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1550738541, "post_id": 54784105, "comment_id": 96381970, "body": "@sehe Can you turn that into an answer?"}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1550742908, "post_id": 54784105, "comment_id": 96384714, "body": "I don&#39;t see a fruitful way to do it. Unless, of course, you <i>can</i> use coroutines with exceptions :)"}], "owner": {"reputation": 11354, "user_id": 70600, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/6123be50f7a10302e7bf59dcdc5e2623?s=128&d=identicon&r=PG", "display_name": "ruipacheco", "link": "https://stackoverflow.com/users/70600/ruipacheco"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 67, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1550658576, "creation_date": 1550658576, "question_id": 54784105, "link": "https://stackoverflow.com/questions/54784105/is-there-a-dry-way-to-do-error-handling-in-callbacks", "title": "Is there a DRY way to do error handling in callbacks?", "body": "<p>I have a networking library that uses asio to do asynchronous reads and writes. I am finding myself writing what I feel is a lot silly boilerplate code:</p>\n\n<pre><code>asio::dispatch(m_strand, [&amp;, cb]() {\n          m_buffer = write::startup(m_params);\n          write(m_buffer, [&amp;, cb](std::error_code ec, std::size_t len) {\n            if (ec) {\n              sql_state state;\n              cb(ec, state);\n              return;\n            }\n            read([&amp;](std::error_code ec, packet barray) {\n              if (ec) {\n                sql_state state;\n                cb(ec, state);\n                return;\n              }\n              auto packets = parse::split_into_packets(barray);\n              uint8_t auth_type{1};\n              state = fsm::authentication_request(packets.front(), auth_type);\n              if (state) {\n                cb(ec, std::move(state));\n                return;\n              }\n            });\n          });\n        });\n</code></pre>\n\n<p>Is there a way to abstract away the error handling in an elegant way?</p>\n"}, {"tags": ["c++", "types"], "comments": [{"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 1, "creation_date": 1550658298, "post_id": 54783958, "comment_id": 96346472, "body": "<code>A::B</code> is <a href=\"https://ideone.com/fChu4y\" rel=\"nofollow noreferrer\">not valid syntax</a>. Beware of Microsoft-isms."}, {"owner": {"reputation": 16907, "user_id": 4832499, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/76532994f6efa8d7dc8a3bb5b7b262a8?s=128&d=identicon&r=PG&f=1", "display_name": "Passer By", "link": "https://stackoverflow.com/users/4832499/passer-by"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 1, "creation_date": 1550658338, "post_id": 54783958, "comment_id": 96346494, "body": "@n.m. That sounds terrifying."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1550658487, "post_id": 54783958, "comment_id": 96346600, "body": "It also isn&#39;t very clear why you need this. How are X and stripClass(X) related?"}, {"owner": {"reputation": 5574, "user_id": 536874, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/00yFk.jpg?s=128&g=1", "display_name": "Johannes", "link": "https://stackoverflow.com/users/536874/johannes"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1550658559, "post_id": 54783958, "comment_id": 96346642, "body": "@n.m. thanks for the feedback - updated the snippet"}, {"owner": {"reputation": 5574, "user_id": 536874, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/00yFk.jpg?s=128&g=1", "display_name": "Johannes", "link": "https://stackoverflow.com/users/536874/johannes"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1550658781, "post_id": 54783958, "comment_id": 96346807, "body": "@n.m. this is something for a homebrew c++ stub framework that I am playing around with. ultimately I want to one line making a mock and have injectable members"}, {"owner": {"reputation": 5574, "user_id": 536874, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/00yFk.jpg?s=128&g=1", "display_name": "Johannes", "link": "https://stackoverflow.com/users/536874/johannes"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1550666730, "post_id": 54783958, "comment_id": 96351759, "body": "@n.m. do you recommend any static checkers that I could use in vs to make sure I do get a warning when I use a Microsoft-ism?"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 1, "creation_date": 1550669438, "post_id": 54783958, "comment_id": 96353379, "body": "Use a different compiler to check :)"}], "answers": [{"comments": [{"owner": {"reputation": 5574, "user_id": 536874, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/00yFk.jpg?s=128&g=1", "display_name": "Johannes", "link": "https://stackoverflow.com/users/536874/johannes"}, "edited": false, "score": 0, "creation_date": 1550660910, "post_id": 54784080, "comment_id": 96348188, "body": "I am getting <code>template&lt;auto x_p_method&gt; using</code>  auto not supported here on my machine."}, {"owner": {"reputation": 5574, "user_id": 536874, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/00yFk.jpg?s=128&g=1", "display_name": "Johannes", "link": "https://stackoverflow.com/users/536874/johannes"}, "edited": false, "score": 0, "creation_date": 1550661271, "post_id": 54784080, "comment_id": 96348439, "body": "It looks like I am not on C++17"}, {"owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "reply_to_user": {"reputation": 5574, "user_id": 536874, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/00yFk.jpg?s=128&g=1", "display_name": "Johannes", "link": "https://stackoverflow.com/users/536874/johannes"}, "edited": false, "score": 0, "creation_date": 1550661596, "post_id": 54784080, "comment_id": 96348656, "body": "@Johannes template alias just makes things convenient, you can still use this code by supplying <code>decltype(&amp;A::B)</code>"}], "tags": [], "owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "is_accepted": true, "score": 3, "last_activity_date": 1550658923, "last_edit_date": 1550658923, "creation_date": 1550658513, "answer_id": 54784080, "question_id": 54783958, "link": "https://stackoverflow.com/questions/54783958/stripping-the-class-from-a-methodtype-obtained-via-decltype/54784080#54784080", "title": "Stripping the class from a methodtype obtained via decltype", "body": "<p>You can write a type trait, can be also specialized to process argument / result types or deal with qualified methods differently:</p>\n\n<pre><code>template&lt;typename x_PointerToMethod&gt; class\nt_SignatureExtractor;\n\ntemplate&lt;typename x_Class, typename x_Returned, typename... x_Args&gt; class\nt_SignatureExtractor&lt;x_Returned ( x_Class::* )(x_Args...)&gt; final\n{\n    public: using\n    t_ExtractedSignature = x_Returned (x_Args...);\n};\n\ntemplate&lt;auto x_p_method&gt; using\nt_ExtractedSignature = typename t_SignatureExtractor&lt;decltype(x_p_method)&gt;::t_ExtractedSignature;\n\n...\n\nt_ExtractedSignature&lt;&amp;A::B&gt; * f{};\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 16907, "user_id": 4832499, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/76532994f6efa8d7dc8a3bb5b7b262a8?s=128&d=identicon&r=PG&f=1", "display_name": "Passer By", "link": "https://stackoverflow.com/users/4832499/passer-by"}, "edited": false, "score": 0, "creation_date": 1550658666, "post_id": 54784112, "comment_id": 96346730, "body": "<code>as_free_pointer_t</code> is a function type, not a function pointer type? Also your template parameters are messed up."}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "reply_to_user": {"reputation": 16907, "user_id": 4832499, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/76532994f6efa8d7dc8a3bb5b7b262a8?s=128&d=identicon&r=PG&f=1", "display_name": "Passer By", "link": "https://stackoverflow.com/users/4832499/passer-by"}, "edited": false, "score": 0, "creation_date": 1550658944, "post_id": 54784112, "comment_id": 96346931, "body": "@PasserBy gah. Why do I keep editing code right in the answer box like it&#39;s somehow a good idea..."}, {"owner": {"reputation": 5574, "user_id": 536874, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/00yFk.jpg?s=128&g=1", "display_name": "Johannes", "link": "https://stackoverflow.com/users/536874/johannes"}, "edited": false, "score": 0, "creation_date": 1550659530, "post_id": 54784112, "comment_id": 96347314, "body": "@Quentin I can not get this to compile. Am I using this incorrectly? <code>#define stripClass(type) as_free_pointer_t&lt;type&gt;</code>"}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "reply_to_user": {"reputation": 5574, "user_id": 536874, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/00yFk.jpg?s=128&g=1", "display_name": "Johannes", "link": "https://stackoverflow.com/users/536874/johannes"}, "edited": false, "score": 0, "creation_date": 1550659670, "post_id": 54784112, "comment_id": 96347419, "body": "@Johannes I borked my first attempt, make sure you&#39;re using the current one. What&#39;s the error?"}, {"owner": {"reputation": 5574, "user_id": 536874, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/00yFk.jpg?s=128&g=1", "display_name": "Johannes", "link": "https://stackoverflow.com/users/536874/johannes"}, "edited": false, "score": 0, "creation_date": 1550660391, "post_id": 54784112, "comment_id": 96347847, "body": "@Quentin It is a compiler error on the argument type of function. I think the problem is that it does not really work off the <code>decltype</code> result. but even when I use <code>&amp;A::B</code> or <code>A::B</code> I still get a compile error.  I also do not full understand what this generates. If I had to guess I would say it extracts the class and what I need is everything but the class."}, {"owner": {"reputation": 5574, "user_id": 536874, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/00yFk.jpg?s=128&g=1", "display_name": "Johannes", "link": "https://stackoverflow.com/users/536874/johannes"}, "edited": false, "score": 0, "creation_date": 1550660740, "post_id": 54784112, "comment_id": 96348068, "body": "@Quentin also I menat to post this link for you: <a href=\"https://ideone.com/Ls6HOl\" rel=\"nofollow noreferrer\">ideone.com/Ls6HOl</a>"}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "reply_to_user": {"reputation": 5574, "user_id": 536874, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/00yFk.jpg?s=128&g=1", "display_name": "Johannes", "link": "https://stackoverflow.com/users/536874/johannes"}, "edited": false, "score": 0, "creation_date": 1550664544, "post_id": 54784112, "comment_id": 96350352, "body": "@Johannes okay, there are a couple problems in here: first, you need to pass <code>decltype(&amp;A::B)</code> to get the type of the pointer, not the pointer itself. Then, <code>std::function</code> needs a function type instead of a function pointer type, so my trait doesn&#39;t work on its own... Anyway, VTT&#39;s answer does all of that already, I&#39;ll get my revenge later ;)"}, {"owner": {"reputation": 5574, "user_id": 536874, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/00yFk.jpg?s=128&g=1", "display_name": "Johannes", "link": "https://stackoverflow.com/users/536874/johannes"}, "edited": false, "score": 0, "creation_date": 1550666316, "post_id": 54784112, "comment_id": 96351513, "body": "@Quentin  ;)  I thought it would be something like that. It is pretty clear to me now that I need to take a long and hard look at templates again."}], "tags": [], "owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "is_accepted": false, "score": 2, "last_activity_date": 1550658994, "last_edit_date": 1550658994, "creation_date": 1550658588, "answer_id": 54784112, "question_id": 54783958, "link": "https://stackoverflow.com/questions/54783958/stripping-the-class-from-a-methodtype-obtained-via-decltype/54784112#54784112", "title": "Stripping the class from a methodtype obtained via decltype", "body": "<p>Implementing the trait for any member pointer, as it'd work just the same whether they're functions or objects:</p>\n\n<pre><code>template &lt;class MemberPointer&gt;\nstruct as_free_pointer;\n\ntemplate &lt;class C, class T&gt;\nstruct as_free_pointer&lt;T C::*&gt; {\n    using type = T *;\n};\n\ntemplate &lt;class MemberPointer&gt;\nusing as_free_pointer_t = typename as_free_pointer&lt;MemberPointer&gt;::type;\n</code></pre>\n"}], "owner": {"reputation": 5574, "user_id": 536874, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/00yFk.jpg?s=128&g=1", "display_name": "Johannes", "link": "https://stackoverflow.com/users/536874/johannes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "accepted_answer_id": 54784080, "answer_count": 2, "score": 1, "last_activity_date": 1550658994, "creation_date": 1550658098, "last_edit_date": 1550658533, "question_id": 54783958, "link": "https://stackoverflow.com/questions/54783958/stripping-the-class-from-a-methodtype-obtained-via-decltype", "title": "Stripping the class from a methodtype obtained via decltype", "body": "<p>I want to strip a class from a method type so that I have a function type left to work with.</p>\n\n<p><code>stripClass</code> has faked behavior that shows how I what I want as a result from the call <code>stripClass(decltype(&amp;A::B))</code>.</p>\n\n<p>The other lines show my general understanding.</p>\n\n<pre><code>#include &lt;functional&gt;\n#include &lt;iostream&gt;\n\n#define stripClass(type) void() //fake implementation of what I want to happen\n\nstruct A\n{\n    void B() {}\n};\n\nint main()\n{\n    decltype(&amp;A::B) declTypeB = &amp;A::B; //decltype of method\n    void (A::* decl)() = &amp;A::B; //explicit type of method\n\n    void(*f)(); //function pointer thype when class type would be stripped from it\n    std::function&lt;void()&gt; fromFunction = f;\n\n    std::function&lt;stripClass(decltype(&amp;A::B))&gt; fromDecltype = f;\n    return int{ 0 };\n}\n</code></pre>\n\n<p>How can I strip the class from a method to get a function pointer while preserving the return type and the parameters.</p>\n"}, {"tags": ["c++", "return", "structure"], "comments": [{"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 3, "creation_date": 1550658914, "post_id": 54783953, "comment_id": 96346903, "body": "Is this your real code? <code>Song</code> is different from <code>song</code>. Also please copy and paste error messages <b>verbatim</b>."}], "answers": [{"comments": [{"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 1, "creation_date": 1550658808, "post_id": 54784168, "comment_id": 96346829, "body": "Prefer &quot;scope&quot; to &quot;namespace&quot;, as namespaces are another thing altogether (that do define a scope as well!)"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "reply_to_user": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1550661201, "post_id": 54784168, "comment_id": 96348399, "body": "@Quentin &quot;For purposes of name lookup, the scope of a class is a namespace&quot; (Bjarne)"}], "tags": [], "owner": {"reputation": 1173, "user_id": 10805404, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68c8a89f2c1ea92ac8bb7a02028c6339?s=128&d=identicon&r=PG&f=1", "display_name": "Simon Doppler", "link": "https://stackoverflow.com/users/10805404/simon-doppler"}, "is_accepted": true, "score": 4, "last_activity_date": 1550658714, "creation_date": 1550658714, "answer_id": 54784168, "question_id": 54783953, "link": "https://stackoverflow.com/questions/54783953/c-return-structure-from-method/54784168#54784168", "title": "C++ return structure from method", "body": "<p>You have forward declared <code>struct ToneStruct</code> <em>inside</em> the <code>song</code> class, which means it is inside the <code>song</code> namespace and is thus accessible as <code>song::TongStruct</code>, but you declared a <code>ToneStruct</code> structure in the source file <em>outside</em> the <code>song</code> namespace, which will then be assessible as <code>ToneStruct</code>. The compiler will see them as different types.</p>\n\n<p>To fix the error, you should either move the forward declaration out of the class or use the <code>Song::ToneStruct</code> for your type.</p>\n"}, {"tags": [], "owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "is_accepted": false, "score": 0, "last_activity_date": 1550659780, "last_edit_date": 1550659780, "creation_date": 1550659468, "answer_id": 54784421, "question_id": 54783953, "link": "https://stackoverflow.com/questions/54783953/c-return-structure-from-method/54784421#54784421", "title": "C++ return structure from method", "body": "<p><code>struct ToneStruct</code> you declare <em>inside</em> your <code>class Song</code> (or is it <code>song</code>?) is different from <code>struct ToneStruct</code> you declare at the file level. The formeris a <em>member type</em> <code>Song::ToneStruct</code>, the latter is a name in the global namespace.</p>\n\n<p>If you want to forward-declare <code>ToneStruct</code>, you need to do that outside of any class.</p>\n\n<p>Another option is to define and use <code>Song::ToneStruct</code> rather than <code>::ToneStruct</code> throughout.</p>\n\n<p>It probably won't help you much because a forward declaration is not enough in this case. Return type of a  function should be a complete type before the function is used. This practically means song.h needs to have <code>struct ToneStruct</code> fully defined before you can declare <code>GetNextNote</code>. </p>\n\n<p>If you only want to use <code>GetNextNote</code> inside <code>Song.cpp</code> you might get away with a forward declaration, but then <code>GetNextNote</code> probably shouldn't be a public member.</p>\n"}], "owner": {"reputation": 23, "user_id": 11089266, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/--SWpAW3idKc/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQN_pUHZ02l7ddfjBefToLKBiADgJw/mo/photo.jpg?sz=128", "display_name": "BlackOrpheus", "link": "https://stackoverflow.com/users/11089266/blackorpheus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 97, "favorite_count": 0, "accepted_answer_id": 54784168, "answer_count": 2, "score": 2, "last_activity_date": 1550659780, "creation_date": 1550658080, "last_edit_date": 1550658230, "question_id": 54783953, "link": "https://stackoverflow.com/questions/54783953/c-return-structure-from-method", "title": "C++ return structure from method", "body": "<p>I would like to return a structure from a method but the returned structure needs to be used in a different class. That is my current code:</p>\n\n<p>Song.h:</p>\n\n<pre><code>class song{   \n  public:\n    Song(char szTitle[50]);\n    Song();\n    struct ToneStruct;\n    ToneStruct GetNextNote();\n    ~Song();\n};\n</code></pre>\n\n<p>Song.cpp:</p>\n\n<pre><code>struct ToneStruct {\n    char cTone;\n    int iTime;\n    int iTimePassed;\n};\n\nToneStruct Song::GetNextNote(){\nwhile (iTempTime != endOfFile) {\n//do stuff\n    while (iTempTime != 59) {\n        //do stuff\n    }\n    ToneStruct toneStruct(cTone,iPlayTime, iTimePassed);\n    return toneStruct;\n}\nToneStruct endStruct('X', 0, 0);\nreturn endStruct;\n}\n</code></pre>\n\n<p>Because of the method I get an error saying \"declaration is incompatible with song.h\" and on the structs inside the method it says \"incomplete type is not allowed\". What am I doing wrong?</p>\n"}, {"tags": ["javascript", "c++", "qt", "qml"], "comments": [{"owner": {"reputation": 382, "user_id": 5154366, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b91da37e3d817b878fdd86f1f5cf2b2b?s=128&d=identicon&r=PG&f=1", "display_name": "Romain Laneuville", "link": "https://stackoverflow.com/users/5154366/romain-laneuville"}, "reply_to_user": {"reputation": 7130, "user_id": 10239789, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YeHJm.png?s=128&g=1", "display_name": "TrebledJ", "link": "https://stackoverflow.com/users/10239789/trebledj"}, "edited": false, "score": 0, "creation_date": 1550754731, "post_id": 54783874, "comment_id": 96392213, "body": "Hi, I cannot use the direct QML id in js because the id is built with a parameter given by the js function called in C++."}, {"owner": {"reputation": 7130, "user_id": 10239789, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YeHJm.png?s=128&g=1", "display_name": "TrebledJ", "link": "https://stackoverflow.com/users/10239789/trebledj"}, "edited": false, "score": 0, "creation_date": 1550756054, "post_id": 54783874, "comment_id": 96393094, "body": "Hi again, my apologies for misunderstanding your question. I&#39;ve cleaned up your question a bit. (Thanks also for adding more context.) Additionally, I&#39;ve found these relevant posts: <a href=\"https://stackoverflow.com/questions/31206813/how-to-find-qml-item-by-its-string-id\">Find a QML Object by ID</a>. <a href=\"https://stackoverflow.com/questions/45065113/how-to-get-object-by-objectname-in-qml-from-javascript\">Find a QML Object by Object Name</a>."}, {"owner": {"reputation": 382, "user_id": 5154366, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b91da37e3d817b878fdd86f1f5cf2b2b?s=128&d=identicon&r=PG&f=1", "display_name": "Romain Laneuville", "link": "https://stackoverflow.com/users/5154366/romain-laneuville"}, "reply_to_user": {"reputation": 7130, "user_id": 10239789, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YeHJm.png?s=128&g=1", "display_name": "TrebledJ", "link": "https://stackoverflow.com/users/10239789/trebledj"}, "edited": false, "score": 0, "creation_date": 1550763804, "post_id": 54783874, "comment_id": 96398640, "body": "Thanks, I don&#39;t think there is a solution to this problem and it is considered an &quot;anti pattern&quot; in Qt. I just wanted to make my QML more compact and minimalist with some meta programming but it doesn&#39;t seem to be allowed with Qt"}], "answers": [{"comments": [{"owner": {"reputation": 382, "user_id": 5154366, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b91da37e3d817b878fdd86f1f5cf2b2b?s=128&d=identicon&r=PG&f=1", "display_name": "Romain Laneuville", "link": "https://stackoverflow.com/users/5154366/romain-laneuville"}, "edited": false, "score": 0, "creation_date": 1551092042, "post_id": 54862298, "comment_id": 96499631, "body": "Not so ugly, I didn&#39;t know I could traverse the QML like a DOM in HTML with javascript. I&#39;m going to test this and update the question if it works."}, {"owner": {"reputation": 382, "user_id": 5154366, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b91da37e3d817b878fdd86f1f5cf2b2b?s=128&d=identicon&r=PG&f=1", "display_name": "Romain Laneuville", "link": "https://stackoverflow.com/users/5154366/romain-laneuville"}, "edited": false, "score": 0, "creation_date": 1551092874, "post_id": 54862298, "comment_id": 96500109, "body": "the <code>appWin</code> has no property <code>children</code>, <code>console.log(appWin.children) === undefined</code>"}, {"owner": {"reputation": 43, "user_id": 8793858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f2ec2599417a678429e0e12ddc976c9?s=128&d=identicon&r=PG&f=1", "display_name": "Roman Sverdlov", "link": "https://stackoverflow.com/users/8793858/roman-sverdlov"}, "reply_to_user": {"reputation": 382, "user_id": 5154366, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b91da37e3d817b878fdd86f1f5cf2b2b?s=128&d=identicon&r=PG&f=1", "display_name": "Romain Laneuville", "link": "https://stackoverflow.com/users/5154366/romain-laneuville"}, "edited": false, "score": 0, "creation_date": 1551093304, "post_id": 54862298, "comment_id": 96500340, "body": "Then I think only Item can have children. So try to put your buttons inside some item , e.g. ColumnLayout and repeat"}, {"owner": {"reputation": 382, "user_id": 5154366, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b91da37e3d817b878fdd86f1f5cf2b2b?s=128&d=identicon&r=PG&f=1", "display_name": "Romain Laneuville", "link": "https://stackoverflow.com/users/5154366/romain-laneuville"}, "edited": false, "score": 0, "creation_date": 1551102815, "post_id": 54862298, "comment_id": 96505792, "body": "Seems like the container does not have all the children in its children property... I&#39;ll post the attempt to you solution with the code in the question"}], "tags": [], "owner": {"reputation": 43, "user_id": 8793858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f2ec2599417a678429e0e12ddc976c9?s=128&d=identicon&r=PG&f=1", "display_name": "Roman Sverdlov", "link": "https://stackoverflow.com/users/8793858/roman-sverdlov"}, "is_accepted": false, "score": 1, "last_activity_date": 1551083930, "creation_date": 1551083930, "answer_id": 54862298, "question_id": 54783874, "link": "https://stackoverflow.com/questions/54783874/qt-5-12-qml-select-qml-object-by-var-in-javascript/54862298#54862298", "title": "Qt 5.12 QML, select QML object by var in javascript", "body": "<p>if you have <code>objectName</code> property set for your objects then you can use something like</p>\n\n<pre><code>ApplicationWindow {\nid: appWin\nRoundButton {\n    id: btn1\n    objectName: \"btn1\"\n}\n\nRoundButton {\n    id: btn2\n    objectName: \"btn2\"\n}\n\n// ...\n\nfunction foo(objectName) {\n    for(var child in appWin.children) {\n        if(appWin.children[child].objectName === objectName) {\n            appWin.children[child].text = \"qmlObjectNameOrId is already in the document and has a property text that I want to set\";\n            break\n        }\n    }\n}\n</code></pre>\n\n<p>}</p>\n\n<p>Of course it looks ugly, but if you need it a lot...</p>\n"}, {"tags": [], "owner": {"reputation": 382, "user_id": 5154366, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b91da37e3d817b878fdd86f1f5cf2b2b?s=128&d=identicon&r=PG&f=1", "display_name": "Romain Laneuville", "link": "https://stackoverflow.com/users/5154366/romain-laneuville"}, "is_accepted": true, "score": 1, "last_activity_date": 1551104896, "creation_date": 1551104896, "answer_id": 54868386, "question_id": 54783874, "link": "https://stackoverflow.com/questions/54783874/qt-5-12-qml-select-qml-object-by-var-in-javascript/54868386#54868386", "title": "Qt 5.12 QML, select QML object by var in javascript", "body": "<p>Problem solved by iterating over a QML container which I want to find the QML object by objectName property in.</p>\n\n<p>Thanks to <strong>Roman Sverdlov</strong>, the \"DOM traversal\" is done with the <code>contentChildren</code> property and not <code>children</code> property.</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>    /**\n     * Get a QML element by objectName property in buttonsContainer container\n     *\n     * @param {String} objectName - The QML object name to get\n     */\n    function getQmlObjectByName(objectName) {\n        for (let child in buttonsContainer.contentChildren) {\n            if (buttonsContainer.contentChildren[child].objectName === objectName) {\n                return buttonsContainer.contentChildren[child];\n            }\n        }\n    }\n</code></pre>\n"}], "owner": {"reputation": 382, "user_id": 5154366, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b91da37e3d817b878fdd86f1f5cf2b2b?s=128&d=identicon&r=PG&f=1", "display_name": "Romain Laneuville", "link": "https://stackoverflow.com/users/5154366/romain-laneuville"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 762, "favorite_count": 0, "accepted_answer_id": 54868386, "answer_count": 2, "score": 3, "last_activity_date": 1551104896, "creation_date": 1550657861, "last_edit_date": 1551103219, "question_id": 54783874, "link": "https://stackoverflow.com/questions/54783874/qt-5-12-qml-select-qml-object-by-var-in-javascript", "title": "Qt 5.12 QML, select QML object by var in javascript", "body": "<p>I wonder if there is a way to select an already created QML object with a specific <code>id</code> or <code>objectName</code> in a javascript function by var (the var is a string parameter corresponding to the QML object id or name).\nEg:</p>\n\n<pre><code>// main.qml\n\nApplicationWindow {\n\n    RoundButton {\n        id: btn1\n    }\n\n    RoundButton {\n        id: btn2\n    }\n\n    RoundButton {\n        id: btn3\n    }\n\n    // ...\n\n    function foo(qmlObjectNameOrId) {\n        qmlObjectNameOrId.text = \"qmlObjectNameOrId is already in the document and has a property text that I want to set\";\n\n        // Qt.findQmlObject(id) would have been great !\n    }\n}\n</code></pre>\n\n<p>The <code>Qt.createQmlObject</code> is not a solution as I want to use already created QML objects.</p>\n\n<p>In C++, the way to achieve this is to use <code>QQmlApplicationEngine</code> object and then use the QML root object to perform the selection by QML object name :</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>int main(int argc, char *argv[])\n{\n    QQmlApplicationEngine engine;\n\n    QString objectName = someFunction();\n\n    QObject* qmlObject = engine.rootObjects()[0]-&gt;findChild&lt;QObject*&gt;(objectName);\n\n    // use your qmlObject ...\n}\n</code></pre>\n\n<p>The javascript function would be called in C++ with <code>QMetaObject::invokeMethod(appWindow, \"foo\", Q_ARG(QVariant, \"bar\"));</code></p>\n\n<p>Thanks</p>\n\n<p><strong>[EDIT 1] Attempt to Roman Sverdlov answer:</strong></p>\n\n<pre><code>ApplicationWindow {\n    id: appWindow\n    objectName: \"appWindow\"\n    // ...\n\n    Pane {\n        id: buttonsContainer\n        objectName: \"buttonsContainer\"\n\n        property string  disposition         : \"circular_1\"\n        property int     btnWidth            : 130\n        property int     btnHeight           : 130\n        property int     btnIconWidth        : 40\n        property int     btnIconHeight       : 40\n        property int     btnRadius           : btnWidth / 2\n        property int     btnMargin           : 40\n        property int     btnZ                : 4\n        property int     btnPressedBackground: Material.Purple\n\n        anchors.right: parent.right\n        anchors.left: parent.left\n        anchors.top: instructionContainer.bottom\n        anchors.bottom: parent.bottom\n        visible: false\n\n        Image {\n            id: background\n            height: buttonsContainer.height - 100\n            x: (buttonsContainer.width - width) / 2\n            y: (buttonsContainer.height - height) / 2\n            source: \"qrc:///images/circle_background.png\"\n            horizontalAlignment: Image.AlignHCenter\n            verticalAlignment: Image.AlignVCenter\n            fillMode: Image.PreserveAspectFit\n        }\n\n        Rectangle {\n            id: topLeft\n            color: Material.color(Material.Red)\n            x: 0\n            z: 1\n            height: parent.height / 2\n            width: parent.width / 2\n        }\n\n        Rectangle {\n            id: topRight\n            color: Material.color(Material.Green)\n            x: parent.width / 2\n            z: 1\n            anchors.top: parent.top\n            height: parent.height / 2\n            width: parent.width / 2\n        }\n\n        Label {\n            id: backgroundTextTop\n            text: \"MONTER\"\n            font.pixelSize: 40\n            x: (parent.width - width) / 2\n            y: (parent.height - height) / 2 - 50\n            z: 2\n        }\n\n        Rectangle {\n            id: bottomLeft\n            color: Material.color(Material.Green)\n            x: 0\n            z: 1\n            anchors.bottom: parent.bottom\n            height: parent.height / 2\n            width: parent.width / 2\n        }\n\n        Rectangle {\n            id: bottomRight\n            color: Material.color(Material.Red)\n            x: parent.width / 2\n            z: 1\n            anchors.bottom: parent.bottom\n            height: parent.height / 2\n            width: parent.width / 2\n        }\n\n        Label {\n            id: backgroundTextBottom\n            text: \"PLONGER\"\n            font.pixelSize: 40\n            x: (parent.width - width) / 2\n            y: (parent.height - height) / 2 + 200\n            z: 2\n        }\n\n        RoundButton {\n            id: btnB1MB\n            objectName: \"btnB1MB\"\n            width: buttonsContainer.btnWidth\n            height: buttonsContainer.btnHeight\n            radius: buttonsContainer.btnRadius\n            z: buttonsContainer.btnZ\n            display: AbstractButton.TextUnderIcon\n            onPressed: {\n                TestsRun.pressButton(Buttons.B1MB);\n            }\n            onReleased: {\n                TestsRun.releaseButton(Buttons.B1MB);\n            }\n        }\n\n        RoundButton {\n            id: btnB4MT\n            objectName: \"btnB4MT\"\n            width: buttonsContainer.btnWidth\n            height: buttonsContainer.btnHeight\n            radius: buttonsContainer.btnRadius\n            z: buttonsContainer.btnZ\n            display: AbstractButton.TextUnderIcon\n            onPressed: {\n                TestsRun.pressButton(Buttons.B4MT);\n            }\n            onReleased: {\n                TestsRun.releaseButton(Buttons.B4MT);\n            }\n        }\n\n        RoundButton {\n            id: btnB3MB\n            objectName: \"btnB3MB\"\n            width: buttonsContainer.btnWidth\n            height: buttonsContainer.btnHeight\n            radius: buttonsContainer.btnRadius\n            z: buttonsContainer.btnZ\n            display: AbstractButton.TextUnderIcon\n            onPressed: {\n                TestsRun.pressButton(Buttons.B3MB);\n            }\n            onReleased: {\n                TestsRun.releaseButton(Buttons.B3MB);\n            }\n        }\n\n        RoundButton {\n            id: btnB4PB\n            objectName: \"btnB4PB\"\n            width: buttonsContainer.btnWidth\n            height: buttonsContainer.btnHeight\n            radius: buttonsContainer.btnRadius\n            z: buttonsContainer.btnZ\n            display: AbstractButton.TextUnderIcon\n            onPressed: {\n                TestsRun.pressButton(Buttons.B4PB);\n            }\n            onReleased: {\n                TestsRun.releaseButton(Buttons.B4PB);\n            }\n        }\n\n        RoundButton {\n            id: btnB2MT\n            objectName: \"btnB2MT\"\n            width: buttonsContainer.btnWidth\n            height: buttonsContainer.btnHeight\n            radius: buttonsContainer.btnRadius\n            z: buttonsContainer.btnZ\n            display: AbstractButton.TextUnderIcon\n            onPressed: {\n                TestsRun.pressButton(Buttons.B2MT);\n            }\n            onReleased: {\n                TestsRun.releaseButton(Buttons.B2MT);\n            }\n        }\n\n        RoundButton {\n            id: btnB1PT\n            objectName: \"btnB1PT\"\n            width: buttonsContainer.btnWidth\n            height: buttonsContainer.btnHeight\n            radius: buttonsContainer.btnRadius\n            z: buttonsContainer.btnZ\n            display: AbstractButton.TextUnderIcon\n            onPressed: {\n                TestsRun.pressButton(Buttons.B1PT);\n            }\n            onReleased: {\n                TestsRun.releaseButton(Buttons.B1PT);\n            }\n        }\n\n        RoundButton {\n            id: btnB2PB\n            objectName: \"btnB2PB\"\n            width: buttonsContainer.btnWidth\n            height: buttonsContainer.btnHeight\n            radius: buttonsContainer.btnRadius\n            z: buttonsContainer.btnZ\n            display: AbstractButton.TextUnderIcon\n            onPressed: {\n                TestsRun.pressButton(Buttons.B2PB);\n            }\n            onReleased: {\n                TestsRun.releaseButton(Buttons.B2PB);\n            }\n        }\n\n        RoundButton {\n            id: btnB3PT\n            objectName: \"btnB3PT\"\n            width: buttonsContainer.btnWidth\n            height: buttonsContainer.btnHeight\n            radius: buttonsContainer.btnRadius\n            z: buttonsContainer.btnZ\n            display: AbstractButton.TextUnderIcon\n            onPressed: {\n                TestsRun.pressButton(Buttons.B3PT);\n            }\n            onReleased: {\n                TestsRun.releaseButton(Buttons.B3PT);\n            }\n        }\n\n        Component.onCompleted: {\n            setButtonsPosition(buttonsContainer.disposition);\n        }\n    }\n\n    /**\n     * Get a QML element by objectName property\n     *\n     * @todo Not working\n     *\n     * @param {String} objectName - The QML object name to get\n     */\n    function getQmlObjectByName(objectName) {\n        console.log(\"buttonsContainer.children.length\", buttonsContainer.children.length);\n        return getQmlObjectByNameRecursive(buttonsContainer, objectName)\n    }\n\n    /**\n     * Get a QML element by objectName property\n     *\n     * @todo Not working\n     *\n     * @param {Object} object - The QML object to find the QML element in\n     * @param {String} objectName - The QML object name to get\n     */\n    function getQmlObjectByNameRecursive(object, objectName) {\n        for (let child in object.children) {\n            console.log(object.children[child].objectName);\n\n            if (object.children[child].objectName === objectName) {\n                console.log('found');\n                return object.children[child];\n            }\n\n            if (typeof object.children[child].children !== 'undefined') {\n                console.log('children', object.children[child]);\n                return getQmlObjectByNameRecursive(object.children[child], objectName);\n            }\n        }\n    }\n\n</code></pre>\n\n<p><strong>output</strong></p>\n\n<pre><code>qml: buttonsContainer.children.length 2\nqml: Pane\nqml: children QQuickContentItem(0x55c4e2a145d0, \"Pane\")\nqml: \nqml: children QQuickImage(0x55c4e2a1cc80)\nqml: undefined\n</code></pre>\n"}, {"tags": ["c++", "arrays", "heap"], "comments": [{"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 7, "creation_date": 1550658024, "post_id": 54783860, "comment_id": 96346279, "body": "The underlying memory allocator knows the size of blocks it allocates, but there&#39;s no standard function that returns that information. There are sometimes non-standard malloc implementation specific ways but they&#39;re inherently non portable."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1550658066, "post_id": 54783860, "comment_id": 96346303, "body": "@Shawn That&#39;s an answer."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 5, "creation_date": 1550658106, "post_id": 54783860, "comment_id": 96346336, "body": "Why is this ever interesting? Use <code>std::vector</code> and never worry about <code>delete[]</code>."}, {"owner": {"reputation": 2354, "user_id": 9428851, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MBhDff_bdY0/AAAAAAAAAAI/AAAAAAAACAY/lx7DUTjS350/photo.jpg?sz=128", "display_name": "Victor Gubin", "link": "https://stackoverflow.com/users/9428851/victor-gubin"}, "edited": false, "score": 0, "creation_date": 1550658310, "post_id": 54783860, "comment_id": 96346480, "body": "This is because memory allocator, which implement the malloc/free function. Operators new and delete usually just a wrapper on top of malloc and free (vise versa is not allowed by the standard). Memory allocator  it self know the size of the block."}, {"owner": {"reputation": 2354, "user_id": 9428851, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MBhDff_bdY0/AAAAAAAAAAI/AAAAAAAACAY/lx7DUTjS350/photo.jpg?sz=128", "display_name": "Victor Gubin", "link": "https://stackoverflow.com/users/9428851/victor-gubin"}, "edited": false, "score": 0, "creation_date": 1550658934, "post_id": 54783860, "comment_id": 96346923, "body": "The reason of such behavior - C and C++ are close to assembly language. Using C or C++ you can wrote some machine specific code like operating system kernels or device drivers, such code may use memory blocks which were not stored in heap or stack. I.e. IBM PC text mode video buffer is located in the 0xB800 address, so you can use it like <code>static uint16_t* VB = reinterpret_cast&lt;uint16_t&gt;(0xB800)</code>, and then you can read and write into video buffer with the same way as you working with the heap array. With another languages it can be harder or impossible."}, {"owner": {"reputation": 1480, "user_id": 9502856, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d386dd3fdda4721337ad56c73fdd1dd?s=128&d=identicon&r=PG&f=1", "display_name": "Michele Piccolini", "link": "https://stackoverflow.com/users/9502856/michele-piccolini"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 20, "creation_date": 1550659323, "post_id": 54783860, "comment_id": 96347174, "body": "@n.m. I don&#39;t get answers that tell you &quot;don&#39;t bother&quot;. If one asks a question, there are reasons behind it. And the reasons don&#39;t have necessarily to be &quot;practical reasons&quot;. It might be curiosity, it might be that I want to implement a compiler in machine code, or whatever. Even if we suppose one should always be backed by practical reasons in order to ask questions, I&#39;m sure it is always possible to come up with at least one or two cases in which new knowledge could be used. There might be cases in which I cannot or don&#39;t want to use STL."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 3, "creation_date": 1550661011, "post_id": 54783860, "comment_id": 96348262, "body": "&quot;If one asks a question, there are reasons behind it.&quot; These reasons are not necessarily valid. If you want to learn how to use C++ efficiently then not bothering with delete and pointers is the right thing. They are too low level and there are gazillion of these low level things of zero importance. Trying to learn them all is a waste of time. If you are in a situation where you cannot use <code>std::vector</code> (which should be <i>extremely</i> rare) you might want to look inside a typical implementation to learn how it works in order to replicate some of it."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1550661051, "post_id": 54783860, "comment_id": 96348291, "body": "Anyway there&#39;s a good answer now, I shall be grateful if you tell me if it&#39;s helpful."}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 12, "creation_date": 1550663414, "post_id": 54783860, "comment_id": 96349673, "body": "@n.m. I don&#39;t think SO is limited to people &quot;learning how to use C++ efficiently&quot;. Otherwise the language-lawyer tag would be pretty useless. <i>Someone</i> has to deal with all these &quot;low level things&quot;, so why is asking about them on SO unreasonable?"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "reply_to_user": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 1, "creation_date": 1550664646, "post_id": 54783860, "comment_id": 96350448, "body": "@MaxLanghof SO is not limited this way, but IME this sort of questions is more frequently asked by people who are at their &quot;learning to use the language&quot; phase, rather at the &quot;implementing the language and/or language lawyering&quot; phase. I could be mistaken of course."}, {"owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "edited": false, "score": 1, "creation_date": 1550697546, "post_id": 54783860, "comment_id": 96368821, "body": "@MichelePiccolini: n.m. is really just pointing out that C++ more or less views <code>new</code> and <code>delete</code> mechanics as necessary evils, that were only required in the early days of the language. In modern C++, their use is discouraged, in favor of smart pointers and containers. <code>new</code> and <code>delete</code> should only be required for low level projects, such as implementing new framework components, which should imply the authors are already C++ (or at least OOP) experts."}, {"owner": {"reputation": 6316, "user_id": 3323096, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1227f90127f0f7b8678a8c13261f48b4?s=128&d=identicon&r=PG", "display_name": "Vality", "link": "https://stackoverflow.com/users/3323096/vality"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1550771165, "post_id": 54783860, "comment_id": 96403113, "body": "@n.m. It isnt that rare. In my career I have come across a number of embedded chips with a C++03 or C++11 unhosted implementation with no std::vector"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "reply_to_user": {"reputation": 6316, "user_id": 3323096, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1227f90127f0f7b8678a8c13261f48b4?s=128&d=identicon&r=PG", "display_name": "Vality", "link": "https://stackoverflow.com/users/3323096/vality"}, "edited": false, "score": 0, "creation_date": 1550776777, "post_id": 54783860, "comment_id": 96405760, "body": "@Vality If an implementation has functioning <code>new</code> and <code>delete</code> it should provide standard containers. Being &quot;embedded&#39; is a rather poor excuse for not doing that."}, {"owner": {"reputation": 6316, "user_id": 3323096, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1227f90127f0f7b8678a8c13261f48b4?s=128&d=identicon&r=PG", "display_name": "Vality", "link": "https://stackoverflow.com/users/3323096/vality"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1550778044, "post_id": 54783860, "comment_id": 96406368, "body": "@n.m. Regardless of what should be, I can confirm there are a substantial number of implementations that do not. I did not develop these platforms, merely used them."}], "answers": [{"comments": [{"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1550658205, "post_id": 54783914, "comment_id": 96346401, "body": "I don&#39;t get your reasoning for &quot;don&#39;t pay for what you don&#39;t use&quot;. If <i>I</i> have to keep track of it, then I have to pay extra at some point (such as passing a size up and down the call stack), whereas the implementation already has to know the allocation size given just a pointer. A language function for returning this information (which must have been stored somewhere anyway) for a given pointer (with UB if it doesn&#39;t point to the beginning of such an allocation) should be free, no?"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 4, "creation_date": 1550658366, "post_id": 54783914, "comment_id": 96346513, "body": "@MaxLanghof <i>&quot;If I have to keep track of it, then I have to pay extra at some point&quot;</i> The key word is <b>if</b>."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1550658407, "post_id": 54783914, "comment_id": 96346543, "body": "@MaxLanghof <i>&quot;A language function for returning this information&quot;</i> Well, okay, maybe. That would be opt-in and thus arguably not an expense. There could also be implementation/design constraints of which I&#39;m not aware. Either way the answer is &quot;yes, the computer knows this, but it doesn&#39;t tell you&quot;."}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1550658594, "post_id": 54783914, "comment_id": 96346670, "body": "And that&#39;s exactly what I would be curious about - what are these implementation/design constraints (or implementation alternatives where it is not free)? Granted, in idiomatic modern C++ this is technically irrelevant because we don&#39;t dabble in raw arrays anyway, but I don&#39;t see how you can have an abstraction that beats (or easily matches) <code>delete[]</code> in terms of space cost - the STL doesn&#39;t have any for runtime-sized arrays. --- Well, your edits do address some of this."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 4, "creation_date": 1550658774, "post_id": 54783914, "comment_id": 96346805, "body": "@MaxLanghof Admittedly I would be vaguely interested in finding out whether there&#39;s some crucial reason that this wasn&#39;t made part of the stdlib&#39;s allocation interface(s), that go beyond &quot;we cba and don&#39;t think you should need this&quot;"}, {"owner": {"reputation": 1480, "user_id": 9502856, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d386dd3fdda4721337ad56c73fdd1dd?s=128&d=identicon&r=PG&f=1", "display_name": "Michele Piccolini", "link": "https://stackoverflow.com/users/9502856/michele-piccolini"}, "edited": false, "score": 0, "creation_date": 1550660206, "post_id": 54783914, "comment_id": 96347717, "body": "One use case I see is the <code>delete []</code> operator. Usually one has the overhead of having to remember to use <code>delete []</code> instead of <code>delete</code> on pointers pointing to arrays. Accidentally just using <code>delete</code> would cause bugs. Then wouldn&#39;t it make more sense to have just one operator <code>delete</code> that was overloaded to free whole arrays in case it is used on such pointers? (Or freeing the first element of an array could be a desirable feature?) Or, weird example: a factory returning a pointer to a random-sized array. It would be useful to know the size, without bloating the interface to pass the size."}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "reply_to_user": {"reputation": 1480, "user_id": 9502856, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d386dd3fdda4721337ad56c73fdd1dd?s=128&d=identicon&r=PG&f=1", "display_name": "Michele Piccolini", "link": "https://stackoverflow.com/users/9502856/michele-piccolini"}, "edited": false, "score": 1, "creation_date": 1550663137, "post_id": 54783914, "comment_id": 96349525, "body": "@MichelePiccolini The first question in your comment is unrelated to the topic at hand - correctly <code>delete[]</code>ing a pointer to an array if you already <i>know</i> it is a pointer to an array and being able to infer whether a pointer points to an array or a single object are two different, unrelated things. In other words, if there was an operator to infer the size that <code>delete[]</code> uses it would most certainly have UB if used on non-array allocations, thus it wouldn&#39;t allow you to decide whether the pointer is to an array allocation or not."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 1480, "user_id": 9502856, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d386dd3fdda4721337ad56c73fdd1dd?s=128&d=identicon&r=PG&f=1", "display_name": "Michele Piccolini", "link": "https://stackoverflow.com/users/9502856/michele-piccolini"}, "edited": false, "score": 2, "creation_date": 1550663831, "post_id": 54783914, "comment_id": 96349909, "body": "@MichelePiccolini You shouldn&#39;t really be using <code>delete</code> or <code>delete[]</code> <i>at all</i>, though; that&#39;s for the insides of containers and smart pointers, which do have all this information nicely tucked away."}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 2, "creation_date": 1550684308, "post_id": 54783914, "comment_id": 96362615, "body": "It might not know <i>exactly</i>, it might only know the size of the block it chose, which might tell it the size rounded up to the next multiple of 16 bytes, for example.  Depending on the allocator of course.  xD, @Handy999 already posted this as an answer before I commented."}, {"owner": {"reputation": 50650, "user_id": 3182664, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/2s35X.png?s=128&g=1", "display_name": "Marco13", "link": "https://stackoverflow.com/users/3182664/marco13"}, "edited": false, "score": 0, "creation_date": 1550691280, "post_id": 54783914, "comment_id": 96365923, "body": "<i>&quot;it&#39;s your responsibility to remember this information&quot;</i> - I&#39;d like to concur. This is not (only) about <i>remembering</i> things. Method signatures like <code>doSomething(int *array)</code> are basically <i>always</i> useless, and need another <code>, int length)</code> parameter. Having to track this is clumsy and error-prone, to say the least. (Sure, now one could argue, &quot;This parameter should be a vector reference with some const&#39;s thrown in, and length should be a <code>size_t</code>&quot; (or whatever), but ... that wouldn&#39;t lead anywhere except to a flamewar, because at some point, I&#39;d <i>have</i> to mention Java ;-)"}, {"owner": {"reputation": 26764, "user_id": 144746, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/170e317e1e3d42b520786bcec9dfb409?s=128&d=identicon&r=PG", "display_name": "Voo", "link": "https://stackoverflow.com/users/144746/voo"}, "edited": false, "score": 0, "creation_date": 1550694001, "post_id": 54783914, "comment_id": 96367250, "body": "&quot;It does - the allocator, or some implementation detail behind it, knows exactly what the size of the block is.&quot; It&#39;s true that the allocator remembers the <i>block size</i> but that&#39;s rarely the same as the actual asked for size. I can&#39;t imagine any production level allocator that doesn&#39;t bin allocations into specific groups for performance benefits (and the pesky alignment requirements further complicated things)."}, {"owner": {"reputation": 2683, "user_id": 3063736, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/siang.png?s=128&g=1", "display_name": "Mark", "link": "https://stackoverflow.com/users/3063736/mark"}, "edited": false, "score": 0, "creation_date": 1550707827, "post_id": 54783914, "comment_id": 96372196, "body": "This isn&#39;t correct: <code>delete []</code> <i>doesn&#39;t</i> know the size of the array.  It knows the size of the memory allocation block that the array was placed in, which simply gives an upper bound to the array size.  Depending on the allocation strategy involved, this could be off by quite a bit, if the allocation was rounded to something like the nearest memory page (4 kb on most systems)."}, {"owner": {"reputation": 766, "user_id": 10532253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7970ca81beac26fc5094dbbcd1d618b?s=128&d=identicon&r=PG&f=1", "display_name": "Handy999", "link": "https://stackoverflow.com/users/10532253/handy999"}, "reply_to_user": {"reputation": 50650, "user_id": 3182664, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/2s35X.png?s=128&g=1", "display_name": "Marco13", "link": "https://stackoverflow.com/users/3182664/marco13"}, "edited": false, "score": 1, "creation_date": 1550738967, "post_id": 54783914, "comment_id": 96382245, "body": "@Marco13: There are all the nice features in the standard library (like containers or in C++20 even ranges), which do exactly the right thing. You do not have to go to Java to get this. C++ has all you need but also much legacy which you can just decide not to use."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1550747859, "post_id": 54783914, "comment_id": 96387838, "body": "Okay, we can nitpick over exactly what information is kept behind the scenes even though the whole point of the answer is that <i>you can&#39;t get to that information</i>."}], "tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": false, "score": 26, "last_activity_date": 1550658522, "last_edit_date": 1550658522, "creation_date": 1550657990, "answer_id": 54783914, "question_id": 54783860, "link": "https://stackoverflow.com/questions/54783860/getting-size-of-dynamic-c-style-array-vs-use-of-delete-contradiction/54783914#54783914", "title": "Getting size of dynamic C-style array vs. use of delete[]. Contradiction?", "body": "<p>It does - the allocator, or some implementation detail behind it, knows exactly what the size of the block is.</p>\n\n<p>But that information is not provided to you or to the \"code layer\" of your program.</p>\n\n<p>Could the language have been designed to do this? Sure! It's <em>probably</em> a case of \"don't pay for what you don't use\" &mdash; it's your responsibility to remember this information. After all, <em>you</em> know how much memory you asked for! Often times people will not want the cost of a number being passed up the call stack when, most of the time, they won't need it to be.</p>\n\n<p>There <em>are</em> some platform-specific \"extensions\" that may get you what you want, like <a href=\"http://man7.org/linux/man-pages/man3/malloc_usable_size.3.html\" rel=\"noreferrer\"><code>malloc_usable_size</code></a> on Linux and <a href=\"https://msdn.microsoft.com/en-us/library/z2s077bc.aspx\" rel=\"noreferrer\"><code>_msize</code></a> on Windows, though these assume that your allocator used <code>malloc</code> and didn't do any other magic that may extend the size of the allocated block at the lowest level. I'd say you're still better off tracking this yourself if you really need it&hellip; or using a vector.</p>\n"}, {"comments": [{"owner": {"reputation": 1127, "user_id": 1796858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c1b4f442048641cf0656ab4cdc4b6ec?s=128&d=identicon&r=PG", "display_name": "Owl", "link": "https://stackoverflow.com/users/1796858/owl"}, "edited": false, "score": 1, "creation_date": 1550659329, "post_id": 54784043, "comment_id": 96347177, "body": "Ahh there is malloc_usable_size() for linux."}, {"owner": {"reputation": 1480, "user_id": 9502856, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d386dd3fdda4721337ad56c73fdd1dd?s=128&d=identicon&r=PG&f=1", "display_name": "Michele Piccolini", "link": "https://stackoverflow.com/users/9502856/michele-piccolini"}, "edited": false, "score": 0, "creation_date": 1550660508, "post_id": 54784043, "comment_id": 96347923, "body": "Do you know if those are reliable or what could be some cases that might arise and might make the usage of these non reliable?"}, {"owner": {"reputation": 1127, "user_id": 1796858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c1b4f442048641cf0656ab4cdc4b6ec?s=128&d=identicon&r=PG", "display_name": "Owl", "link": "https://stackoverflow.com/users/1796858/owl"}, "reply_to_user": {"reputation": 1480, "user_id": 9502856, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d386dd3fdda4721337ad56c73fdd1dd?s=128&d=identicon&r=PG&f=1", "display_name": "Michele Piccolini", "link": "https://stackoverflow.com/users/9502856/michele-piccolini"}, "edited": false, "score": 2, "creation_date": 1550673457, "post_id": 54784043, "comment_id": 96355995, "body": "Well one of the things I noticed when I tested it, I called a malloc on an array of chars 25 long, then called malloc_usable_size on the array. It reported 40 bytes used. This suggests to me that it&#39;s actually reporting the container size allocated that is large enough to contain the array."}], "tags": [], "owner": {"reputation": 1127, "user_id": 1796858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c1b4f442048641cf0656ab4cdc4b6ec?s=128&d=identicon&r=PG", "display_name": "Owl", "link": "https://stackoverflow.com/users/1796858/owl"}, "is_accepted": false, "score": 2, "last_activity_date": 1550658353, "creation_date": 1550658353, "answer_id": 54784043, "question_id": 54783860, "link": "https://stackoverflow.com/questions/54783860/getting-size-of-dynamic-c-style-array-vs-use-of-delete-contradiction/54784043#54784043", "title": "Getting size of dynamic C-style array vs. use of delete[]. Contradiction?", "body": "<p>This answer applies to Microsoft Visual Studio only. </p>\n\n<p>There is a function called _msize, which will return the malloced / calloced / realloced size of a pointer. </p>\n\n<p>It can be found in the malloc.h header, and the parameters are:</p>\n\n<pre><code>size_t _msize(\n   void *memblock\n);\n</code></pre>\n\n<p>I am not sure if there is an equivalent in gcc. There probably should be.</p>\n"}, {"comments": [{"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 1, "creation_date": 1550668945, "post_id": 54786644, "comment_id": 96353067, "body": "Very interesting answer! I do wonder now what <code>malloc_usable_size</code> would give you for that second pointer though? And if it&#39;s the correct answer, where this information would have been stored?"}, {"owner": {"reputation": 766, "user_id": 10532253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7970ca81beac26fc5094dbbcd1d618b?s=128&d=identicon&r=PG&f=1", "display_name": "Handy999", "link": "https://stackoverflow.com/users/10532253/handy999"}, "reply_to_user": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 1, "creation_date": 1550669337, "post_id": 54786644, "comment_id": 96353309, "body": "You can try this out but this is undefined behavior. For gcc, where <code>new</code> is based on <code>malloc</code>, it could work. However, if you consider an array of a not-trivally-destructible type (first example), <code>ptr</code> does for sure not point to the beginning of the memory that has been allocated by malloc (because of the hidden field in the beginning). Thus, I expect that <code>malloc_usable_size</code> does not work."}, {"owner": {"reputation": 1480, "user_id": 9502856, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d386dd3fdda4721337ad56c73fdd1dd?s=128&d=identicon&r=PG&f=1", "display_name": "Michele Piccolini", "link": "https://stackoverflow.com/users/9502856/michele-piccolini"}, "edited": false, "score": 3, "creation_date": 1550683323, "post_id": 54786644, "comment_id": 96362128, "body": "Wonderful answer! So, the gist is:  * The information N  (&quot;number of elements&quot;) may not be stored (it is only in case of dynamic arrays of things with a destructor). For this reason we need to keep track of the length manually, if we want it. * What is instead always stored is S (&quot;size of allocated memory&quot;). (S can be queried but results are implementation-dependent). * <code>delete[]</code> only needs S in order to deallocate memory (treats everything like a blob). It needs N only to know how many times to call destructors. * If N is stored, where it is stored is implementation-dependent. Correct?"}, {"owner": {"reputation": 766, "user_id": 10532253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7970ca81beac26fc5094dbbcd1d618b?s=128&d=identicon&r=PG&f=1", "display_name": "Handy999", "link": "https://stackoverflow.com/users/10532253/handy999"}, "reply_to_user": {"reputation": 1480, "user_id": 9502856, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d386dd3fdda4721337ad56c73fdd1dd?s=128&d=identicon&r=PG&f=1", "display_name": "Michele Piccolini", "link": "https://stackoverflow.com/users/9502856/michele-piccolini"}, "edited": false, "score": 0, "creation_date": 1550686559, "post_id": 54786644, "comment_id": 96363630, "body": "@Michele Piccolini: yes, excatly."}, {"owner": {"reputation": 1480, "user_id": 9502856, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d386dd3fdda4721337ad56c73fdd1dd?s=128&d=identicon&r=PG&f=1", "display_name": "Michele Piccolini", "link": "https://stackoverflow.com/users/9502856/michele-piccolini"}, "edited": false, "score": 0, "creation_date": 1550701094, "post_id": 54786644, "comment_id": 96370204, "body": "@Handy999 could you maybe add my summary as a tl;dr; at the top of your answer, so that other people can get an immediate answer when reading this, and have the possibility of getting more details by reading further. And maybe cite _msize for Windows, by citing Lightness Races in Orbit. This way, we have all the information in one place, and I can accept the answer!"}, {"owner": {"reputation": 766, "user_id": 10532253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7970ca81beac26fc5094dbbcd1d618b?s=128&d=identicon&r=PG&f=1", "display_name": "Handy999", "link": "https://stackoverflow.com/users/10532253/handy999"}, "reply_to_user": {"reputation": 1480, "user_id": 9502856, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d386dd3fdda4721337ad56c73fdd1dd?s=128&d=identicon&r=PG&f=1", "display_name": "Michele Piccolini", "link": "https://stackoverflow.com/users/9502856/michele-piccolini"}, "edited": false, "score": 1, "creation_date": 1550733036, "post_id": 54786644, "comment_id": 96379164, "body": "@Michele Piccolini: do you like it like this?"}], "tags": [], "owner": {"reputation": 766, "user_id": 10532253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7970ca81beac26fc5094dbbcd1d618b?s=128&d=identicon&r=PG&f=1", "display_name": "Handy999", "link": "https://stackoverflow.com/users/10532253/handy999"}, "is_accepted": true, "score": 30, "last_activity_date": 1550732926, "last_edit_date": 1550732926, "creation_date": 1550666526, "answer_id": 54786644, "question_id": 54783860, "link": "https://stackoverflow.com/questions/54783860/getting-size-of-dynamic-c-style-array-vs-use-of-delete-contradiction/54786644#54786644", "title": "Getting size of dynamic C-style array vs. use of delete[]. Contradiction?", "body": "<p><strong>TL;DR</strong> The operator <code>delete[]</code> destructs the objects and deallocates the memory. The information N (\"number of elements\") is required for destructing. The information S (\"size of allocated memory\") is required for deallocating. S is always stored and can be queried by compiler extensions. N is only stored if destructing objects requires calling destructors. If N is stored, where it is stored is implementation-dependent. </p>\n\n<hr>\n\n<p>The operator <code>delete []</code> has to do two things:</p>\n\n<p>a) destructing the objects (calling destructors, if necessary) and</p>\n\n<p>b) deallocating the memory.</p>\n\n<p>Let's first discuss <strong>(de)allocation</strong>, which\nis delegated to the C functions <code>malloc</code> and <code>free</code> by many compilers (like GCC). The function <code>malloc</code> takes the number of bytes to be allocated as a parameter and returns a pointer. The function <code>free</code> takes only a pointer; the number of bytes is not necessary. This means that the memory allocating functions have to keep track how many bytes have been allocated. There could be a function to query how many bytes have been allocated (in Linux this can be done with <a href=\"http://man7.org/linux/man-pages/man3/malloc_usable_size.3.html\" rel=\"noreferrer\"><code>malloc_usable_size</code></a>, in Windows with <a href=\"https://docs.microsoft.com/en-us/cpp/c-runtime-library/reference/msize?view=vs-2017\" rel=\"noreferrer\"><code>_msize</code></a>). <strong>This is not what you want</strong> because this does <strong>not</strong> tell you the size of an array but the amount of memory allocated. Since <code>malloc</code> is not necessarily giving you exactly as much memory as you have asked for, you cannot compute the array size from the result of <code>malloc_usable_size</code>:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;malloc.h&gt;\n\nint main()\n{\n    std::cout &lt;&lt; malloc_usable_size(malloc(42)) &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>This example gives you 56, not 42: <a href=\"http://cpp.sh/2wdm4\" rel=\"noreferrer\">http://cpp.sh/2wdm4</a></p>\n\n<p>Note that applying <code>malloc_usable_size</code> (or <code>_msize</code>) to the result of <code>new</code> is undefined behavior.</p>\n\n<p>So, let's now discuss <strong>construction</strong> and <strong>destruction</strong> of objects. Here, you have two ways of delete: <code>delete</code> (for single objects) and <code>delete[]</code> (for arrays). In very old versions of C++, you had to pass the size of the array to the <code>delete[]</code>-operator. As you mentioned, nowadays, this is not the case. The compiler tracks this information. GCC adds a small field prior the beginning of the array, where the size of the array is stored such that it knows how often the destructor has to be called. You might query that:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nstruct foo {\n    char a;\n    ~foo() {}\n};\n\nint main()\n{\n    foo * ptr = new foo[42];\n    std::cout &lt;&lt; *(((std::size_t*)ptr)-1) &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>This code gives you 42: <a href=\"http://cpp.sh/7mbqq\" rel=\"noreferrer\">http://cpp.sh/7mbqq</a></p>\n\n<p>Just for the protocol: This is undefined behavior, but with the current version of GCC it works.</p>\n\n<p>So, you might ask yourself why there is no function to query this information. The answer is that GCC doesn't always store this information. There might be cases where destruction of the objects is a no-operation (and the compiler is able to figure that out). Consider the following example:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nstruct foo {\n    char a;\n    //~foo() {}\n};\n\nint main()\n{\n    foo * ptr = new foo[42];\n    std::cout &lt;&lt; *(((std::size_t*)ptr)-1) &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>Here, the answer is <strong>not</strong> 42 any more: <a href=\"http://cpp.sh/2rzfb\" rel=\"noreferrer\">http://cpp.sh/2rzfb</a></p>\n\n<p>The answer is just garbage - the code was undefined behavior again.</p>\n\n<p>Why? Because the compiler does not need to call a destructor, so it does not need to store the information. And, yes, in this case the compiler does not add code that keeps track how many objects have been created. Only the number of allocated bytes (which might be 56, see above) is known.</p>\n"}, {"tags": [], "owner": {"reputation": 7116, "user_id": 5083516, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f2aeeefc1a95ddb2f19612150ccd7ba?s=128&d=identicon&r=PG&f=1", "display_name": "plugwash", "link": "https://stackoverflow.com/users/5083516/plugwash"}, "is_accepted": false, "score": 6, "last_activity_date": 1550689288, "last_edit_date": 1550689288, "creation_date": 1550675176, "answer_id": 54789407, "question_id": 54783860, "link": "https://stackoverflow.com/questions/54783860/getting-size-of-dynamic-c-style-array-vs-use-of-delete-contradiction/54789407#54789407", "title": "Getting size of dynamic C-style array vs. use of delete[]. Contradiction?", "body": "<p>I think the reason for this is a confluence of three factors.</p>\n\n<ol>\n<li>C++ has a \"you only pay for what you use\" culture</li>\n<li>C++ started its life as a pre-processor for C and hence had to be built on top of what C offered. </li>\n<li>C++ is one of the most widely ported languages around. Features that make life difficult for existing ports are unlikely to get added.</li>\n</ol>\n\n<p>C allows the programmer to free memory blocks without specifying the size of the memory block to free, but does not provide the programmer with any standard way to access the size of the allocation. Furthermore the actual amount of memory allocated may well be larger than the amount the programmer asked for.</p>\n\n<p>Following the principle of \"you only pay for what you use\", C++ implementations implement <code>new[]</code> differently for different types. Typically they only store the size if it is necessary to do so, usually because the type has a non-trivial destructor.</p>\n\n<p>So while yes, enough information is stored to free the memory block, it would be very difficult to define a sane and portable API for accessing that information. Depending on the data type and platform, the actual requested size may be available (for types where the C++ implementation has to store it), only the actual allocated size may be available (for types where the C++ implementation does not have to store it on platforms where the underlying memory manager has an extension to get the allocated size), or the size may not be available at all (for types where the C++ implementation does not have to store it on platforms that don't provide access to the information from the underlying memory manager).</p>\n"}, {"tags": [], "owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "is_accepted": false, "score": -1, "last_activity_date": 1550712259, "creation_date": 1550712259, "answer_id": 54797824, "question_id": 54783860, "link": "https://stackoverflow.com/questions/54783860/getting-size-of-dynamic-c-style-array-vs-use-of-delete-contradiction/54797824#54797824", "title": "Getting size of dynamic C-style array vs. use of delete[]. Contradiction?", "body": "<p>If <code>delete[]</code> doesn't have to know the size of the array at the time it is called, your entire argument falls apart. And <code>delete[]</code> doesn't have to know the size of the array at the time it is called. It only needs to know the size to make the block available for use by others, and absolutely nothing requires it to make the block available for use by others at the time <code>delete[]</code> is called.</p>\n\n<p>For example, <code>delete[]</code> my dice a large block into some number of smaller blocks. Each of those blocks but one need only have a pointer to the control block that knows the size. If any block but the control block is passed to <code>delete[]</code> first, then <code>delete[]</code> has no idea how big the block that was just freed is and won't know until later.</p>\n\n<p>That it is not absolutely required that <code>delete[]</code> know the size of a block at every arbitrary point during its lifetime is sufficient to invalidate your argument.</p>\n"}], "owner": {"reputation": 1480, "user_id": 9502856, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d386dd3fdda4721337ad56c73fdd1dd?s=128&d=identicon&r=PG&f=1", "display_name": "Michele Piccolini", "link": "https://stackoverflow.com/users/9502856/michele-piccolini"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1479, "favorite_count": 2, "closed_date": 1550724162, "accepted_answer_id": 54786644, "answer_count": 5, "score": 36, "last_activity_date": 1550732926, "creation_date": 1550657815, "last_edit_date": 1550674270, "question_id": 54783860, "link": "https://stackoverflow.com/questions/54783860/getting-size-of-dynamic-c-style-array-vs-use-of-delete-contradiction", "closed_reason": "Duplicate", "title": "Getting size of dynamic C-style array vs. use of delete[]. Contradiction?", "body": "<p>I read everywhere that in C++ it is not possible to get the size of a dynamic array just from the pointer pointing to that chunk of memory.</p>\n\n<p>How is it possible that there is no way of getting the size of a dynamic array just from the pointer, and at the same time it is possible to free all the memory allocated by using <code>delete []</code> just on the pointer, without the need of specifying the array size?</p>\n\n<p><code>delete []</code> must know the size of the array, right? Therefore this information must exist somewhere. Shouldn't it?</p>\n\n<p>What is wrong in my reasoning?</p>\n"}, {"tags": ["c++", "oop", "polymorphism", "new-operator"], "comments": [{"owner": {"reputation": 24693, "user_id": 10190237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f95f50f67af8a9658c5d76df263b323?s=128&d=identicon&r=PG&f=1", "display_name": "P.W", "link": "https://stackoverflow.com/users/10190237/p-w"}, "edited": false, "score": 1, "creation_date": 1550657132, "post_id": 54783609, "comment_id": 96345680, "body": "<code>Animal a = Dog();</code> is very wrong. Object slicing, is one of the main issues."}, {"owner": {"reputation": 26796, "user_id": 4834, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/6a04e124482c3750617f8dacde3388ce?s=128&d=identicon&r=PG", "display_name": "quamrana", "link": "https://stackoverflow.com/users/4834/quamrana"}, "edited": false, "score": 0, "creation_date": 1550657209, "post_id": 54783609, "comment_id": 96345731, "body": "You can have polymorphism <i>without</i> <code>new</code>, but you need to look up <code>slicing</code> to understand what is happening here."}, {"owner": {"reputation": 5012, "user_id": 2416647, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f471b80868ae9c93d0903127ed27e2f9?s=128&d=identicon&r=PG", "display_name": "schorsch312", "link": "https://stackoverflow.com/users/2416647/schorsch312"}, "edited": false, "score": 3, "creation_date": 1550658138, "post_id": 54783609, "comment_id": 96346353, "body": "What you want is <code>Dog a;</code> instead of <code>Animal a = Dog();</code>"}], "owner": {"reputation": 1, "user_id": 11038633, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-IKmFkJQg7tQ/AAAAAAAAAAI/AAAAAAAADnE/frdQDnXEc9E/photo.jpg?sz=128", "display_name": "Rafael March", "link": "https://stackoverflow.com/users/11038633/rafael-march"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 132, "favorite_count": 0, "closed_date": 1550657515, "answer_count": 0, "score": 0, "last_activity_date": 1550657547, "creation_date": 1550656981, "question_id": 54783609, "link": "https://stackoverflow.com/questions/54783609/class-polymorphism-without-new-in-c", "closed_reason": "Duplicate", "title": "Class polymorphism without &quot;new&quot; in C++", "body": "<p>I have a base class called \"Animal\" that I would like to derive. I have a virtual method called \"makeSound()\" that is overridden in the child class \"Dog\" to implement specific behavior. I can instantiate \"Animal\" as a \"Dog\" in two ways:</p>\n\n<pre><code>Animal a = Dog();\nAnimal* pA = new Dog();\n</code></pre>\n\n<p>If I instantiate Dog with the first call, when I call:</p>\n\n<pre><code>a.makeSound();\n</code></pre>\n\n<p>the method that is called is the one of the parent class (Animal). What is happening behind the scenes that generates this behavior ? Why can't I implement polymorphism without instantiating Dog using the keyword \"new\" ? </p>\n\n<p>For reference, here's the full code:</p>\n\n<pre><code>class Animal {\npublic:\n    Animal() { cout &lt;&lt; \"Animal constructor called.\" &lt;&lt; endl; };\n    virtual void makeSound() { cout &lt;&lt; \"Unindentified animal.\" &lt;&lt; endl; };\n};\n\nclass Dog: public Animal {\npublic:\n    Dog() { cout &lt;&lt; \"Dog constructor called.\" &lt;&lt; endl; };\n    void makeSound() { cout &lt;&lt; \"Whoof!\" &lt;&lt; endl; };\n};\n\nint main()\n{\n\n    Animal a = Dog();\n    Animal* pA = new Dog();\n\n    cout &lt;&lt; \"-----\" &lt;&lt; endl;\n\n    cout &lt;&lt; \"Without new: \";\n    a.makeSound();\n\n    cout &lt;&lt; \"With new: \";\n    pA-&gt;makeSound();\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "px4"], "answers": [{"comments": [{"owner": {"reputation": 386, "user_id": 6705628, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/208fa0d86c50a5335ce665a38a80f595?s=128&d=identicon&r=PG&f=1", "display_name": "T&#252;rker Berke Y\u0131ld\u0131r\u0131m", "link": "https://stackoverflow.com/users/6705628/t%c3%bcrker-berke-y%c4%b1ld%c4%b1r%c4%b1m"}, "edited": false, "score": 0, "creation_date": 1550745190, "post_id": 54785328, "comment_id": 96386205, "body": "Is  set_rc_channel_pwm() function in MAVLINK safe? Because giving some instructions to pwm usually damages the engine."}, {"owner": {"reputation": 46, "user_id": 6213896, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VfzEa.png?s=128&g=1", "display_name": "Talha Farooq", "link": "https://stackoverflow.com/users/6213896/talha-farooq"}, "reply_to_user": {"reputation": 386, "user_id": 6705628, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/208fa0d86c50a5335ce665a38a80f595?s=128&d=identicon&r=PG&f=1", "display_name": "T&#252;rker Berke Y\u0131ld\u0131r\u0131m", "link": "https://stackoverflow.com/users/6705628/t%c3%bcrker-berke-y%c4%b1ld%c4%b1r%c4%b1m"}, "edited": false, "score": 0, "creation_date": 1550765531, "post_id": 54785328, "comment_id": 96399810, "body": "Yes RC is safe but applying directly may cause trouble."}, {"owner": {"reputation": 386, "user_id": 6705628, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/208fa0d86c50a5335ce665a38a80f595?s=128&d=identicon&r=PG&f=1", "display_name": "T&#252;rker Berke Y\u0131ld\u0131r\u0131m", "link": "https://stackoverflow.com/users/6705628/t%c3%bcrker-berke-y%c4%b1ld%c4%b1r%c4%b1m"}, "edited": false, "score": 0, "creation_date": 1550782598, "post_id": 54785328, "comment_id": 96408455, "body": "Sir may you give a specific function that i can use; my bachelor is computer science and really doesn&#39;t understand about communication issues. I can take x and y coordinates by using OpenCV (from the object should i track) and my middle point of my frame is set as (0,0) so. if the coordinate +,+ region. I want to set my motors direction to +,+ region. But which function should I use? I am using MAVLINK and ArduSub as firmware."}], "tags": [], "owner": {"reputation": 46, "user_id": 6213896, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VfzEa.png?s=128&g=1", "display_name": "Talha Farooq", "link": "https://stackoverflow.com/users/6213896/talha-farooq"}, "is_accepted": false, "score": 1, "last_activity_date": 1550662327, "creation_date": 1550662327, "answer_id": 54785328, "question_id": 54783509, "link": "https://stackoverflow.com/questions/54783509/tracking-another-drone-with-opencv-and-pixhawk2/54785328#54785328", "title": "Tracking another drone with Opencv and Pixhawk2", "body": "<p>Connect your microprocessor(i.e rasberry Pi) with pixhawk ans use mavlink communication protocols to send command here is <a href=\"http://ardupilot.org/dev/docs/raspberry-pi-via-mavlink.html\" rel=\"nofollow noreferrer\">link</a> \nAnd you can use <a href=\"https://dev.px4.io/en/robotics/dronekit.html\" rel=\"nofollow noreferrer\">dronekit</a> also to do that.</p>\n"}], "owner": {"reputation": 386, "user_id": 6705628, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/208fa0d86c50a5335ce665a38a80f595?s=128&d=identicon&r=PG&f=1", "display_name": "T&#252;rker Berke Y\u0131ld\u0131r\u0131m", "link": "https://stackoverflow.com/users/6705628/t%c3%bcrker-berke-y%c4%b1ld%c4%b1r%c4%b1m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 334, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1550689562, "creation_date": 1550656693, "last_edit_date": 1550689562, "question_id": 54783509, "link": "https://stackoverflow.com/questions/54783509/tracking-another-drone-with-opencv-and-pixhawk2", "title": "Tracking another drone with Opencv and Pixhawk2", "body": "<p>I am working in a UAV-Team and my task is following and locking another UAV autonomously. I coded my opencv part  and I used background substitution method and several filters. I can get absolute result from  my code (like to forward go left , go right). My question is how can I send this result to the UAV's motors. How can I communicate with my UAV with C++? I've read lots of documentation from ardupilot, ardurov, opencv and pixhawk. But still couldn't figure it out.</p>\n"}, {"tags": ["c++", "exception-handling"], "comments": [{"owner": {"reputation": 20213, "user_id": 147845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e225ff5beb684088f5c9131d3979a18?s=128&d=identicon&r=PG", "display_name": "You", "link": "https://stackoverflow.com/users/147845/you"}, "edited": false, "score": 0, "creation_date": 1550830591, "post_id": 54783466, "comment_id": 96424383, "body": "Generally the <i>reason</i> for disabling exceptions is that they introduce non-zero overhead and have unpredictable run-time space/time cost which is unacceptable in many situations. These issues appear as soon as <i>anything</i> in your code throws an exception, so I don&#39;t see how options 3 and 4 really make sense at all. That being said, this question <i>is</i> too broad and I&#39;d vote to close if the bounty didn&#39;t stop me."}, {"owner": {"reputation": 388, "user_id": 1281460, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/0d3c7ec71e5a5197eaf0084ab282f534?s=128&d=identicon&r=PG", "display_name": "Gianni", "link": "https://stackoverflow.com/users/1281460/gianni"}, "reply_to_user": {"reputation": 20213, "user_id": 147845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e225ff5beb684088f5c9131d3979a18?s=128&d=identicon&r=PG", "display_name": "You", "link": "https://stackoverflow.com/users/147845/you"}, "edited": false, "score": 0, "creation_date": 1550831984, "post_id": 54783466, "comment_id": 96425248, "body": "if actual overhead and space/time cost is paid as soon as anything throws, but we are anyways just trying to safely terminate program whenever anything throws, overhead and space/time cost constraints do not seem too relevant. Options 3 and 4 are there just to make sure stack unwinding takes place and external resources which would be released by RAII destructors are not left hanging. Does this make no sense at all?"}, {"owner": {"reputation": 20213, "user_id": 147845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e225ff5beb684088f5c9131d3979a18?s=128&d=identicon&r=PG", "display_name": "You", "link": "https://stackoverflow.com/users/147845/you"}, "edited": false, "score": 2, "creation_date": 1550834342, "post_id": 54783466, "comment_id": 96426574, "body": "Well, if you&#39;re already paying the cost of exceptions, you might as well go with option 5 and actually do error handling where appropriate, is my point. Whether you do that once at the top level (options 3/4) or where it&#39;s actually sensible (option 5) is not a &quot;regulating use of exceptions&quot; issue, it&#39;s a general error handling strategy issue."}, {"owner": {"reputation": 388, "user_id": 1281460, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/0d3c7ec71e5a5197eaf0084ab282f534?s=128&d=identicon&r=PG", "display_name": "Gianni", "link": "https://stackoverflow.com/users/1281460/gianni"}, "reply_to_user": {"reputation": 20213, "user_id": 147845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e225ff5beb684088f5c9131d3979a18?s=128&d=identicon&r=PG", "display_name": "You", "link": "https://stackoverflow.com/users/147845/you"}, "edited": false, "score": 0, "creation_date": 1550839158, "post_id": 54783466, "comment_id": 96429307, "body": "Thanks, i tried to make my title cleared.  It seems like the real cost of exceptions is paid in the moment I catch an exception. So am I really paying the time/memory cost of exceptions in options 3/4, where exceptions are never caught but for program termination? And this gets back to my final question: option 5 imposes me to code with exception safety in mind. All my code must guarantee at least basic exception safety. Is this really needed if I go for option 3?"}, {"owner": {"reputation": 69264, "user_id": 256138, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ed9e8c0ff767e38f8fade11f5af00a45?s=128&d=identicon&r=PG", "display_name": "rubenvb", "link": "https://stackoverflow.com/users/256138/rubenvb"}, "edited": false, "score": 1, "creation_date": 1551358877, "post_id": 54783466, "comment_id": 96617226, "body": "Note that -fno-exceptions does not just disable exception support, it also makes it impossible for -fexceptions code linking the previously built code from properly passing exceptions <i>over</i> code in that previously build code (i.e. from a callback passed into a library function)."}, {"owner": {"reputation": 659, "user_id": 10870835, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IlVhK.png?s=128&g=1", "display_name": "Chef Gladiator", "link": "https://stackoverflow.com/users/10870835/chef-gladiator"}, "edited": false, "score": 0, "creation_date": 1581072030, "post_id": 54783466, "comment_id": 106316065, "body": "<a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2019/p1640r1.html\" rel=\"nofollow noreferrer\">open-std.org/jtc1/sc22/wg21/docs/papers/2019/p1640r1.html</a>"}], "answers": [{"comments": [{"owner": {"reputation": 388, "user_id": 1281460, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/0d3c7ec71e5a5197eaf0084ab282f534?s=128&d=identicon&r=PG", "display_name": "Gianni", "link": "https://stackoverflow.com/users/1281460/gianni"}, "edited": false, "score": 0, "creation_date": 1551357446, "post_id": 54925009, "comment_id": 96616374, "body": "<i>My question is not about what is the best choice but just about what are the possible options and what these options imply.</i> but +1 for the details and references!  <i>What do you have to do in the destructors which wouldn&#39;t cleanup your operating system anyway?</i> this is actually want I wanted to know, is there something that the OS would not clean up by itself?"}, {"owner": {"reputation": 3734, "user_id": 3537677, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e05436d74c08a9efa7db860df7bbf01f?s=128&d=identicon&r=PG", "display_name": "Superlokkus", "link": "https://stackoverflow.com/users/3537677/superlokkus"}, "reply_to_user": {"reputation": 388, "user_id": 1281460, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/0d3c7ec71e5a5197eaf0084ab282f534?s=128&d=identicon&r=PG", "display_name": "Gianni", "link": "https://stackoverflow.com/users/1281460/gianni"}, "edited": false, "score": 0, "creation_date": 1551357617, "post_id": 54925009, "comment_id": 96616469, "body": "You mean possible options to minimise every exception handling? And by implications which overhead they have?"}, {"owner": {"reputation": 388, "user_id": 1281460, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/0d3c7ec71e5a5197eaf0084ab282f534?s=128&d=identicon&r=PG", "display_name": "Gianni", "link": "https://stackoverflow.com/users/1281460/gianni"}, "edited": false, "score": 0, "creation_date": 1551358011, "post_id": 54925009, "comment_id": 96616729, "body": "I wanted to know if my list of 5 possible exception handling strategies is complete, if some other strategy missing or if some should be removed. By implications i mean for example if I should care about granting basic exception safety when I go for strategy 2-4, or what do I risk going for strategy 2 (you partially answered on this)."}, {"owner": {"reputation": 3734, "user_id": 3537677, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e05436d74c08a9efa7db860df7bbf01f?s=128&d=identicon&r=PG", "display_name": "Superlokkus", "link": "https://stackoverflow.com/users/3537677/superlokkus"}, "reply_to_user": {"reputation": 388, "user_id": 1281460, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/0d3c7ec71e5a5197eaf0084ab282f534?s=128&d=identicon&r=PG", "display_name": "Gianni", "link": "https://stackoverflow.com/users/1281460/gianni"}, "edited": false, "score": 0, "creation_date": 1551359138, "post_id": 54925009, "comment_id": 96617375, "body": "How about now @Gianni"}, {"owner": {"reputation": 659, "user_id": 10870835, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IlVhK.png?s=128&g=1", "display_name": "Chef Gladiator", "link": "https://stackoverflow.com/users/10870835/chef-gladiator"}, "edited": false, "score": 1, "creation_date": 1581072009, "post_id": 54925009, "comment_id": 106316052, "body": "<a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2019/p1640r1.html\" rel=\"nofollow noreferrer\">open-std.org/jtc1/sc22/wg21/docs/papers/2019/p1640r1.html</a>"}], "tags": [], "owner": {"reputation": 3734, "user_id": 3537677, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e05436d74c08a9efa7db860df7bbf01f?s=128&d=identicon&r=PG", "display_name": "Superlokkus", "link": "https://stackoverflow.com/users/3537677/superlokkus"}, "is_accepted": false, "score": 3, "last_activity_date": 1551359127, "last_edit_date": 1551359127, "creation_date": 1551354358, "answer_id": 54925009, "question_id": 54783466, "link": "https://stackoverflow.com/questions/54783466/what-are-the-possible-error-handling-strategies-using-exceptions-in-c-and-wha/54925009#54925009", "title": "What are the possible error handling strategies using Exceptions in C++, and what are their consequences and implications?", "body": "<h2>Update</h2>\n\n<p>Strictly speaking, when you want to disable exceptions only compiling with no exception support is true way to go, so Option 1. Because when you want to disable exceptions you should also not use or even handle them. Raising an exception would terminate or go to a hard faulty on most implementations instantly, and only by this you would avoid overhead implications like space or performance overhead even how small (see below) they are.</p>\n\n<p>However if you just want to know which paradigms about exception usage are out there, your options are almost right, with the general idea you haven't mentioned of keeping exceptions exceptional and doing things that are likely or even just could throw, at program startup.</p>\n\n<p>And even more in general, in comes to error handling in general: Exceptions are there to handle errors which you come across at <strong>runtime</strong> and if done correctly errors you can ONLY detect at runtime. You can avoid exceptions by simply making sure to resolve all problems you can detect before runtime, like proper coding and review (code time), using strict types and checks (templates , compile time), and rechecking them again (static analyser).</p>\n\n<h2>Update 2</h2>\n\n<p>If you understand you wrong about caring about exception safety I would say:\nBasically at first it depends whenever you enable exceptions in general: If they are disabled you can't and shouldn't care about exception safety since there are none (or if they try to come into existence, you will terminate/crash/hardfault anyway).\nIf you enable exceptions but don't use them in your code, like in case 2, 4 and 3, no problem you want to terminate anyway, so missing cleanup code is not relevant (and the stuff in 3. gets still run in any case). But then should make it clear to everybody that you don't want to use them, so they won't try to recover from exceptions. \nAnd if you use them in your code, you should care about exception safety in the way, that when an exception gets thrown, you clean up after your self too, and then its up the main handler or future code changes, when ever you still terminate or can recover. Not cleaning up but still using exception wouldn't make sense. Then you can just stick to option 1.</p>\n\n<p>This should be to my knowledge exhaustive. For more information see below.</p>\n\n<h2>Recommendation</h2>\n\n<p>I recommend option 4. and I tell you why:</p>\n\n<p>Exceptions are a very misunderstood and misused pattern. They are misused for program flow like the languages Java does in a excessive. They are often forbidden in embedded or safety code because of their nature that is hard to tell which handler will catch it, if there is one, and how long this will take, for which the C++ std just says basically \"implementation magic\".</p>\n\n<h2>Background</h2>\n\n<p>However in my reasoning the hate for exceptions is basically a big XY problem: \nWhen people are complaining that their recovery is broken and hard to tell, then the usual problem is that the don't see you can't or should do much about the most exceptions, that's what they are for. However things like a timeout or a closed tcp connection are hardly non normal, but many people use exceptions for that, that would be wrong of course. But if your whole OS tells you that there is no network adapter or no more memory what could you do? The only thing you probably want is trying to log the reason somewhere and this should be done in one try/catch around the main block. </p>\n\n<p>The same is for safety/real-time programs: For the example of running out of memory, when that happens you are **** anyway, the strategy then is to do this stuff at an unsafe initialisation time, in which exceptions are no problem too.</p>\n\n<p>When using containers with throwing members its a similar scenario, what would you be able to do when you would get their error code instead? Not much, thats the reason why you would make sure at code time that there is no reason for errors, like making sure that an element is really in there, or reserving capacity for your vectors. </p>\n\n<p>This has the nice benefit of cleaner code, not forgetting to check for errors and no performance penalty, at least using the common C++ implementations like gcc etc.</p>\n\n<p>The reason of 3. is debatable, you could do this in my opinion too, but then my question is: What do you have to do in the destructors which wouldn't cleanup your operating system anyway? The OS would cleanup memory, sockets etc.. If have a freestanding scenario, the question remains, whenever different: You plan to halt because your UART broke for example, what would you like to do before halting? And why can't you do it in the catch block before rethrow?</p>\n\n<h2>To sum up</h2>\n\n<ol>\n<li><p>Has the problem of not using any throwing code, and still be left with the problem of how to handle rare error codes. (Thats why so many C programmers still use goto or long jumps)</p></li>\n<li><p>Not viable IMHO, worst of both</p></li>\n<li><p>as mentioned ok, but what do you need to do in your static DTors, what you even un-normal termination wouldn't do?</p></li>\n<li><p>My favourite</p></li>\n<li><p>Only if you really have rare conditions that you are actual able to recover from</p></li>\n</ol>\n\n<p>What I mean as a general advice: <strong>Raising and exception should mean that something happened that should never happen in normal operation, but happened due to a unforeseeable fault, like hardware fault, detached cables, non found shared libraries, a programming fault you have done, like trying to .at() at an index not in the container, which you could have known of, but the container can not. Then it is only logical that throw an exception should almost every time lead to program termination/hard fault</strong></p>\n\n<p>As a consequence of compiling with exception support, is that for example for a freestanding ARM program, your program size will increase by 27kB, probably none for hosted (Linux/Windows etc.), and 2kB RAM for the freestanding case (see <a href=\"https://stackoverflow.com/q/39468524/3537677\">C++ exception handler on gnu arm cortex m4 with freertos</a> )</p>\n\n<p>However you are paying no performance penalty for using exceptions when using common compilers like clang or gcc, when you code runs normal i.e. when your branches/ifs which would trow an exception, are not triggered. </p>\n\n<p>As a reference i.e. proof to my statements I refer to <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/TR18015.pdf\" rel=\"nofollow noreferrer\">ISO/IEC TR 18015:2006 Technical Report on C++ Performance</a>, with this little excerpt from 7.2.2.3:</p>\n\n<blockquote>\n  <p>Enable exception handling for real-time critical programs only if\n  exceptions are actually used. A complete analysis must always include\n  the throwing of an exception, and this analysis will always be\n  implementation dependent. On the other hand, the requirement to act\n  within a deterministic time might loosen in the case of an exception\n  (e.g. there is no need to handle any more input from a device when a\n  connection has broken down). An overview of alternatives for exception\n  handling is given in \u00a75.4. But as shown there, all options have their\n  run-time costs, and throwing exceptions might still be the best way to\n  deal with exceptional cases. As long as no exceptions are thrown a\n  long way (i.e. there are only a few nested function calls between the\n  throw-expression and the handler), it might even reduce run-time\n  costs.</p>\n</blockquote>\n"}], "owner": {"reputation": 388, "user_id": 1281460, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/0d3c7ec71e5a5197eaf0084ab282f534?s=128&d=identicon&r=PG", "display_name": "Gianni", "link": "https://stackoverflow.com/users/1281460/gianni"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 599, "favorite_count": 3, "answer_count": 1, "score": 7, "last_activity_date": 1551359127, "creation_date": 1550656607, "last_edit_date": 1550911624, "question_id": 54783466, "link": "https://stackoverflow.com/questions/54783466/what-are-the-possible-error-handling-strategies-using-exceptions-in-c-and-wha", "title": "What are the possible error handling strategies using Exceptions in C++, and what are their consequences and implications?", "body": "<p>I would like your help in understanding what are the possible approaches to using/disabling exceptions in C++. </p>\n\n<p>My question is not about what is the best choice but just about what are the possible options and what these options imply.</p>\n\n<p>Currently, the options I can think of are:</p>\n\n<ol>\n<li>Compiling with -fno-exceptions and giving up most std containers (possibly defining internal containers which do not throw, such as suggested in <a href=\"https://wiki.mozilla.org/JavaScript:SpiderMonkey:Coding_Style\" rel=\"noreferrer\">SpiderMonkey Coding_Style</a>)</li>\n<li>Just avoiding to throw and catch in own code, but still using std containers which may throw exceptions. Being happy with the fact that, in the case of exceptions, the program may terminate without stack unwinding, and that even RAII handled external resources may be left hanging. (This seems to be Google C++ approach according to answers to <a href=\"https://stackoverflow.com/questions/5184115/google-c-style-guides-no-exceptions-rule-stl\">this SO question</a>)</li>\n<li>No using exceptions but wrapping all in a catch all std::exception try block just to make sure stack is unwound and RAII handles to external resources are released before program is terminated, as for <a href=\"https://wiki.sei.cmu.edu/confluence/display/cplusplus/ERR51-CPP.+Handle+all+exceptions\" rel=\"noreferrer\">this Cert C++ rule</a></li>\n<li>As above, but also throwing exceptions which will ultimately result in program termination.</li>\n<li>Also using catched exceptions and recovering from exceptions.</li>\n</ol>\n\n<p>I would like to know if my understanding of options is correct, and what I might be missing out or understanding wrong.</p>\n\n<p>I would also like to know whether constraints on granting basic exception safety make sense for options 2-4 (where exceptions always ultimately lead to program termination) or if/how exception safety requirement can be relaxed/restricted to specific cases (e.g. handling external resources, files).</p>\n"}, {"tags": ["c++", "windows", "com", "activex"], "comments": [{"owner": {"reputation": 116623, "user_id": 403671, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/454HU.jpg?s=128&g=1", "display_name": "Simon Mourier", "link": "https://stackoverflow.com/users/403671/simon-mourier"}, "edited": false, "score": 0, "creation_date": 1550658660, "post_id": 54783379, "comment_id": 96346723, "body": "Calling ShellExecute is far from being trivial as it opens a whole world of programs, dll, exe, most of it being 3rd parties, etc. The result heavily depends on the machine + current user configuration (registry), ambient parameters such as security, etc. For running processes with simple parameters, it&#39;s clearly overkill. But what call gives you E_ACCESSDENIED exactly?"}, {"owner": {"reputation": 29262, "user_id": 193128, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/PZj5F.jpg?s=128&g=1", "display_name": "Benj", "link": "https://stackoverflow.com/users/193128/benj"}, "reply_to_user": {"reputation": 116623, "user_id": 403671, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/454HU.jpg?s=128&g=1", "display_name": "Simon Mourier", "link": "https://stackoverflow.com/users/403671/simon-mourier"}, "edited": false, "score": 0, "creation_date": 1550658932, "post_id": 54783379, "comment_id": 96346920, "body": "E_ACCESSDENIED is received in c# (while making an out of process COM call inside dllhost) when trying to contact the IActiveScriptSite interface which my service exports."}, {"owner": {"reputation": 29262, "user_id": 193128, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/PZj5F.jpg?s=128&g=1", "display_name": "Benj", "link": "https://stackoverflow.com/users/193128/benj"}, "reply_to_user": {"reputation": 116623, "user_id": 403671, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/454HU.jpg?s=128&g=1", "display_name": "Simon Mourier", "link": "https://stackoverflow.com/users/403671/simon-mourier"}, "edited": false, "score": 0, "creation_date": 1550658993, "post_id": 54783379, "comment_id": 96346967, "body": "I&#39;ve been disassembling ShellExecute in IDA and it is a massively complicated function.  I suppose it is possible/likely that it&#39;s loaded dlls into my service which might be changing things.."}, {"owner": {"reputation": 2943, "user_id": 9014308, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b6e0464313ca63c239f5d973213daf9?s=128&d=identicon&r=PG&f=1", "display_name": "kunif", "link": "https://stackoverflow.com/users/9014308/kunif"}, "edited": false, "score": 0, "creation_date": 1550659421, "post_id": 54783379, "comment_id": 96347229, "body": "In recent Windows services after Vista, the COM interface should not work. <a href=\"https://blogs.technet.microsoft.com/askperf/2007/04/27/application-compatibility-session-0-isolation/\" rel=\"nofollow noreferrer\">Application Compatibility \u2013 Session 0 Isolation</a> What kind of environment is it working under?"}, {"owner": {"reputation": 29262, "user_id": 193128, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/PZj5F.jpg?s=128&g=1", "display_name": "Benj", "link": "https://stackoverflow.com/users/193128/benj"}, "edited": false, "score": 0, "creation_date": 1550660647, "post_id": 54783379, "comment_id": 96348007, "body": "This is latest Windows 10.  Our service has no UI.  Session 0 isolation doesn&#39;t affect the ability of RPC/COM to communicate between applications and services in fact it&#39;s called out in that link as a workaround: &quot;Use client or server mechanisms such as remote procedure call (RPC) or named pipes to communicate between services and applications.&quot;"}, {"owner": {"reputation": 116623, "user_id": 403671, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/454HU.jpg?s=128&g=1", "display_name": "Simon Mourier", "link": "https://stackoverflow.com/users/403671/simon-mourier"}, "edited": false, "score": 0, "creation_date": 1550662378, "post_id": 54783379, "comment_id": 96349102, "body": "I hardly see how calling ShellExecute would change COM environment, there&#39;s nothing about that documented... Are you calling CoInitializeSecurity before/after? Also I&#39;d try sysinternals procmon see if there&#39;s anything suspect. Can you provide a small reproducing project?"}, {"owner": {"reputation": 29262, "user_id": 193128, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/PZj5F.jpg?s=128&g=1", "display_name": "Benj", "link": "https://stackoverflow.com/users/193128/benj"}, "reply_to_user": {"reputation": 116623, "user_id": 403671, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/454HU.jpg?s=128&g=1", "display_name": "Simon Mourier", "link": "https://stackoverflow.com/users/403671/simon-mourier"}, "edited": false, "score": 0, "creation_date": 1550662963, "post_id": 54783379, "comment_id": 96349420, "body": "@SimonMourier I&#39;ve just figured it out.  Our code later calls CoInitalizeSecurity() .   Calling ShellExecute() does this implicit and you can&#39;t do it twice or you get RPC_E_TOO_LATE.  So basically calling ShellExecute was stopping us from setting our security parameters."}], "answers": [{"tags": [], "owner": {"reputation": 29262, "user_id": 193128, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/PZj5F.jpg?s=128&g=1", "display_name": "Benj", "link": "https://stackoverflow.com/users/193128/benj"}, "is_accepted": true, "score": 0, "last_activity_date": 1550663345, "creation_date": 1550663345, "answer_id": 54785683, "question_id": 54783379, "link": "https://stackoverflow.com/questions/54783379/why-does-calling-shellexecute-in-win-service-cause-unrelated-incoming-com-connec/54785683#54785683", "title": "Why does calling ShellExecute in Win Service cause unrelated incoming COM connections to fail with E_ACCESSDENIED?", "body": "<p>This problem turned out to be because our code was calling CoInitializeSecurity().  Calling ShellExecute() before this results in CoInitializeSecurity() security being called implicitly and then it was subsequently failing when we called it which prevented our hosted scripting environment to contact the service.</p>\n"}], "owner": {"reputation": 29262, "user_id": 193128, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/PZj5F.jpg?s=128&g=1", "display_name": "Benj", "link": "https://stackoverflow.com/users/193128/benj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "accepted_answer_id": 54785683, "answer_count": 1, "score": 0, "last_activity_date": 1550663345, "creation_date": 1550656383, "last_edit_date": 1550657149, "question_id": 54783379, "link": "https://stackoverflow.com/questions/54783379/why-does-calling-shellexecute-in-win-service-cause-unrelated-incoming-com-connec", "title": "Why does calling ShellExecute in Win Service cause unrelated incoming COM connections to fail with E_ACCESSDENIED?", "body": "<p>The product I maintain has a Windows Service written in C++, and that service provides a COM interface that a hosted scripting environment (hosted by dllhost) can call into so that users can write scripts in powershell and have them interface with the service.  The service maintains several COM classes which inherit from IActiveScriptSite/IActiveScript to provide this functionality to the hosted environment.  </p>\n\n<p>This functionality has been working well for a while now, but we recently had a bug where the whole thing broke.  The bug manifested its self when the hosted environment started getting E_ACCESSDENIED when calling the OnStateChange() function on the IActiveScriptSite interface.  This happened to be the first call to the interface.</p>\n\n<p>After working out which change caused the problem, we eventually found that the whole issue can be reproduced by putting a single ShellExecute() call in the initialization of our service like so:</p>\n\n<pre><code>HRESULT CServiceObject::Run(int nShowCmd)\n{\n    ShellExecuteW(nullptr, nullptr, L\"ipconfig\", L\"/all\", nullptr, SW_HIDE);\n\n    // Other initializeation code which ultimately \n    // leads to a thread which starts the hosted environment\n</code></pre>\n\n<p>This is seemingly in a completely unrelated area of the code to the code that's having the problem.</p>\n\n<p>Reading the ShellExecute documentation lead me to try:</p>\n\n<ul>\n<li>Initializing COM prior to the ShellExecute (this didn't make any difference whichever apartment model COM was initialized with, we normally use MTA throughout)</li>\n<li>Trying to launch ShellExecute on it's own thread (this didn't make any difference)</li>\n<li>Replacing ShellExecute with the ShellExecuteEx version and making it synchronous so that the process finished before anything else occured (this didn't make any difference)</li>\n</ul>\n\n<p>So, bafflingly, ShellExecute is breaking our whole service.  Can anyone think of what it might be doing which affects the state of the program after its run?  I can actually fix this issue by just not calling ShellExecute() but it's worrying that something so trivial and seemingly unrelated to the other code can break it so I want to understand what the problem is.</p>\n"}, {"tags": ["c++", "google-cloud-platform", "google-cloud-storage", "google-cloud-cpp"], "comments": [{"owner": {"reputation": 2213, "user_id": 1119979, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/863badf665d0c783a35987a34b9a5050?s=128&d=identicon&r=PG", "display_name": "Chakradar Raju", "link": "https://stackoverflow.com/users/1119979/chakradar-raju"}, "reply_to_user": {"reputation": 5296, "user_id": 418066, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/38yuw.png?s=128&g=1", "display_name": "Biffen", "link": "https://stackoverflow.com/users/418066/biffen"}, "edited": false, "score": 0, "creation_date": 1550657472, "post_id": 54782935, "comment_id": 96345898, "body": "That is general question, this is specific to building google cloud SDK."}, {"owner": {"reputation": 2213, "user_id": 1119979, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/863badf665d0c783a35987a34b9a5050?s=128&d=identicon&r=PG", "display_name": "Chakradar Raju", "link": "https://stackoverflow.com/users/1119979/chakradar-raju"}, "reply_to_user": {"reputation": 5296, "user_id": 418066, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/38yuw.png?s=128&g=1", "display_name": "Biffen", "link": "https://stackoverflow.com/users/418066/biffen"}, "edited": false, "score": 0, "creation_date": 1550658093, "post_id": 54782935, "comment_id": 96346328, "body": "@Biffen can you please remove that duplication annotation, it doesn&#39;t make sense."}], "answers": [{"tags": [], "owner": {"reputation": 2213, "user_id": 1119979, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/863badf665d0c783a35987a34b9a5050?s=128&d=identicon&r=PG", "display_name": "Chakradar Raju", "link": "https://stackoverflow.com/users/1119979/chakradar-raju"}, "is_accepted": false, "score": 0, "last_activity_date": 1550752406, "creation_date": 1550752406, "answer_id": 54807190, "question_id": 54782935, "link": "https://stackoverflow.com/questions/54782935/how-do-i-compile-c-code-including-google-cloud-storage-library/54807190#54807190", "title": "How do I compile C++ code including Google Cloud Storage library?", "body": "<p>I had to compile it with these flags <code>$(pkg-config --cflags storage_client libcurl openssl google_cloud_cpp_common libcares)</code></p>\n\n<p>and link it with these flags <code>$(pkg-config --libs storage_client libcurl openssl google_cloud_cpp_common libcares) -lcrc32c</code></p>\n\n<p>For some reason default installation of crc32c was not fine, so I had to clone git repository and follow installation instruction there to fix it.</p>\n"}], "owner": {"reputation": 2213, "user_id": 1119979, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/863badf665d0c783a35987a34b9a5050?s=128&d=identicon&r=PG", "display_name": "Chakradar Raju", "link": "https://stackoverflow.com/users/1119979/chakradar-raju"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 420, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1572048089, "creation_date": 1550654982, "last_edit_date": 1572048089, "question_id": 54782935, "link": "https://stackoverflow.com/questions/54782935/how-do-i-compile-c-code-including-google-cloud-storage-library", "title": "How do I compile C++ code including Google Cloud Storage library?", "body": "<p>I'm trying to use <a href=\"https://cloud.google.com/storage/docs/reference/libraries#client-libraries-install-cpp\" rel=\"nofollow noreferrer\">Cloud Storage C++ Client Library</a></p>\n\n<p>I've installed it following <a href=\"https://github.com/googleapis/google-cloud-cpp/blob/master/INSTALL.md#ubuntu-1804---bionic-beaver\" rel=\"nofollow noreferrer\">instructions</a></p>\n\n<p>When I try to compile it using g++, compilation/linking failing with the following error:</p>\n\n<pre><code>undefined reference to 'google::cloud::storage::v0::Client::CreateDefaultClient()'\n</code></pre>\n\n<p>Where can I find compiling/building instructions for cpp google cloud SDK.</p>\n"}]