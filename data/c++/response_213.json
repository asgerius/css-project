[{"tags": ["c++"], "comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1549500308, "post_id": 54564411, "comment_id": 95928256, "body": "CRTP seems more adapted than runtime polymorphism."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 1, "creation_date": 1549500421, "post_id": 54564411, "comment_id": 95928280, "body": "Doesn&#39;t <code>std::shared_ptr</code> fulfill your requirements ?"}, {"owner": {"reputation": 21, "user_id": 11025687, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-L6rmIkQB5Tg/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQOw8LdAdInV7j6cFVOWelacrX71BA/mo/photo.jpg?sz=128", "display_name": "Bowen Yang", "link": "https://stackoverflow.com/users/11025687/bowen-yang"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1549501926, "post_id": 54564411, "comment_id": 95928580, "body": "@Jarod42 <code>std::shared_ptr</code> fulfills my requirements. However, I declare <code>IReferenceCountedObject</code> in a header file that&#39;s supposed to be used across executable module boundaries. As different compilers or different versions of compilers may have incompatible implementations of STL classes, I could not use <code>std::shared_ptr</code> in this case. The <code>ReferenceCountedObject</code> class itself however, is not used across executable module boundaries, so using <code>std::atomic</code> inside would not be problematic."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 1, "creation_date": 1549501981, "post_id": 54564411, "comment_id": 95928590, "body": "@BowenYang &quot;<i>I intended that portions of code holding <code>const</code> pointers of the reference-counted object may duplicate the pointer</i>&quot; - that sounds highly suspicious, especially if it forces you to break your class design. Reference counting is not a const operation and so <code>AddRef</code> and <code>Release</code> should definitely NOT be declared as <code>const</code>. Can you provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> that is causing you trouble?"}, {"owner": {"reputation": 23130, "user_id": 8586227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BRnwg.png?s=128&g=1", "display_name": "Davis Herring", "link": "https://stackoverflow.com/users/8586227/davis-herring"}, "edited": false, "score": 0, "creation_date": 1549512389, "post_id": 54564411, "comment_id": 95930620, "body": "What\u2019s this all about?  You <b>can</b> <a href=\"http://eel.is/c++draft/expr.delete#2\" rel=\"nofollow noreferrer\"><code>delete</code> a pointer to <code>const</code></a>."}], "owner": {"reputation": 21, "user_id": 11025687, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-L6rmIkQB5Tg/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQOw8LdAdInV7j6cFVOWelacrX71BA/mo/photo.jpg?sz=128", "display_name": "Bowen Yang", "link": "https://stackoverflow.com/users/11025687/bowen-yang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 58, "favorite_count": 1, "answer_count": 0, "score": 2, "last_activity_date": 1549502464, "creation_date": 1549497539, "last_edit_date": 1549502464, "question_id": 54564411, "link": "https://stackoverflow.com/questions/54564411/is-it-recommended-to-const-cast-this-for-deletion-in-the-release-function-when-i", "title": "Is it recommended to const_cast this for deletion in the Release function when implementing reference counting?", "body": "<p>I was implementing reference counting in one of my programs. Because I intended that portions of code holding <code>const</code> pointers of the reference-counted object may duplicate the pointer, I declared the <code>AddRef</code> and <code>Release</code> member functions as <code>const</code>, and the reference counting variable as <code>mutable</code>. Now the problem is that, the <code>Release</code> member function would need to delete the object if the reference count reaches <code>0</code>, while a non-<code>const</code> pointer to the object is required if the object is to be deleted. Defining a reference counted object as <code>const</code> obviously makes no sense, so there's no practical situation where it will get a non-<code>const</code> pointer to an object originally defined as <code>const</code>. Is it considered recommended if I use <code>const_cast</code> on <code>this</code> in this case?</p>\n\n<p>I searched on the Internet about usage of <code>const_cast</code>. Some say that it should only be used when passing parameters to some <code>const</code>-incorrect API that you know for sure won't actually modify the object. This is not in my case.</p>\n\n<pre><code>class ReferenceCountedObject : public virtual IReferenceCountedObject {\npublic:\n    inline virtual ~ReferenceCountedObject() = default;\n    inline virtual uintptr_t AddRef() const {\n        if (this) {\n            uintptr_t ret = ++this-&gt;ref_count;\n            return ret;\n        }\n    }\n    inline virtual uintptr_t Release() const {\n        if (this) {\n            uintptr_t ret = --this-&gt;ref_count;\n            if (!ret) const_cast&lt;ReferenceCountedObject*&gt;(this)-&gt;DeleteMe();\n            return ret;\n        }\n    }\nprotected:\n    inline virtual void DeleteMe() = 0;\nprivate:\n    mutable std::atomic&lt;uintptr_t&gt; ref_count = 1;\n};\n</code></pre>\n"}, {"tags": ["c++", "sorting", "bubble-sort", "doubly-linked-list"], "comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1549497107, "post_id": 54564313, "comment_id": 95927500, "body": "For MCVE, you might remove at last <code>remove</code>/<code>find</code>, and adding <code>main</code> with test code."}, {"owner": {"reputation": 40655, "user_id": 1023390, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/2g9CZ.jpg?s=128&g=1", "display_name": "Walter", "link": "https://stackoverflow.com/users/1023390/walter"}, "edited": false, "score": 0, "creation_date": 1549498177, "post_id": 54564313, "comment_id": 95927788, "body": "<code>getLenght</code> typical typo. Btw, terrible code. Much too complex for such a simple job. Better implement with list keeping one (empty) node that serves as head and tail end."}, {"owner": {"reputation": 86085, "user_id": 128940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d35101b4060dc3af0d5c1b7c42c4935?s=128&d=identicon&r=PG&f=1", "display_name": "Beta", "link": "https://stackoverflow.com/users/128940/beta"}, "edited": false, "score": 0, "creation_date": 1549503029, "post_id": 54564313, "comment_id": 95928816, "body": "You are trying to iterate through a list using counters <i>and</i> pointers. When they fall out of alignment, you run past the end of the list."}, {"owner": {"reputation": 3303, "user_id": 5859925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de386e94c47dfbffb5235306b1affc96?s=128&d=identicon&r=PG&f=1", "display_name": "Kunal Puri", "link": "https://stackoverflow.com/users/5859925/kunal-puri"}, "edited": false, "score": 0, "creation_date": 1549584513, "post_id": 54564313, "comment_id": 95965386, "body": "@V.Raska You should not post your code as an answer. Instead, you should <a href=\"https://stackoverflow.com/posts/54564313/edit\">edit</a> your question if you feel my latest code doesn&#39;t solve your issue."}], "answers": [{"comments": [{"owner": {"reputation": 3303, "user_id": 5859925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de386e94c47dfbffb5235306b1affc96?s=128&d=identicon&r=PG&f=1", "display_name": "Kunal Puri", "link": "https://stackoverflow.com/users/5859925/kunal-puri"}, "edited": false, "score": 0, "creation_date": 1549584683, "post_id": 54564390, "comment_id": 95965430, "body": "Please edit your question. And refer to my current code."}], "tags": [], "owner": {"reputation": 31, "user_id": 9813618, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87ba22bfcbb62a3ec4e0f66292b6e100?s=128&d=identicon&r=PG&f=1", "display_name": "V. Raska", "link": "https://stackoverflow.com/users/9813618/v-raska"}, "is_accepted": false, "score": 0, "last_activity_date": 1549558579, "last_edit_date": 1549558579, "creation_date": 1549497381, "answer_id": 54564390, "question_id": 54564313, "link": "https://stackoverflow.com/questions/54564313/how-to-sort-doubly-linked-list-in-c-without-swapping-data-only-transferring/54564390#54564390", "title": "How to sort doubly linked list in c++ without swapping data, only transferring (entries) nodes", "body": "<p>The upwardly sorted list is working super but when I tried to sort the list downwardly only change the character > for &lt; it is not working. Must be changed before node and after node?</p>\n\n<pre><code>        // Zero or one element, no sort required.\n        if (this-&gt;head == NULL) return;\n        if (this-&gt;head-&gt;next == NULL) return;\n\n        // Force initial entry.\n        int swapped = 1;\n        while (swapped) {\n            // Flag as last time, then do one pass.\n            swapped = 0;\n            this-&gt;current = this-&gt;head;\n            while (this-&gt;current-&gt;next != NULL) {\n                Node *before, *after;\n                if (current-&gt;rhetorician-&gt;coefficient &gt; current-&gt;next-&gt;rhetorician-&gt;coefficient) {\n                    swapped = 1;\n                    before = current-&gt;prev;\n                    after = current-&gt;next;\n\n                    if (before != NULL) {\n                        before-&gt;next = after;\n                    }\n                    else {\n                        // if before = null, it is the head node\n                        this-&gt;head = after; // In case before pointer is null, after pointer should be the new head\n                    }\n                    current-&gt;next = after-&gt;next;\n                    current-&gt;prev = after;\n\n                    if (after-&gt;next != NULL) {\n                        after-&gt;next-&gt;prev = current; // prev pointer of after-&gt;next should be set to current.\n                    }\n\n                    after-&gt;next = current;\n                    after-&gt;prev = before;\n                }\n                current = current-&gt;next;\n            }\n        }// Zero or one element, no sort required.\n        if (this-&gt;head == NULL) return;\n        if (this-&gt;head-&gt;next == NULL) return;\n\n        // Force initial entry.\n        int swapped = 1;\n        while (swapped) {\n            // Flag as last time, then do one pass.\n            swapped = 0;\n            this-&gt;current = this-&gt;head;\n            while (this-&gt;current-&gt;next != NULL) {\n                Node *before, *after;\n                if (current-&gt;rhetorician-&gt;coefficient &gt; current-&gt;next-&gt;rhetorician-&gt;coefficient) {\n                    swapped = 1;\n                    before = current-&gt;prev;\n                    after = current-&gt;next;\n\n                    if (before != NULL) {\n                        before-&gt;next = after;\n                    }\n                    else {\n                        // if before = null, it is the head node\n                        this-&gt;head = after; // In case before pointer is null, after pointer should be the new head\n                    }\n                    current-&gt;next = after-&gt;next;\n                    current-&gt;prev = after;\n\n                    if (after-&gt;next != NULL) {\n                        after-&gt;next-&gt;prev = current; // prev pointer of after-&gt;next should be set to current.\n                    }\n\n                    after-&gt;next = current;\n                    after-&gt;prev = before;\n                }\n                current = current-&gt;next;\n            }\n        }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3303, "user_id": 5859925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de386e94c47dfbffb5235306b1affc96?s=128&d=identicon&r=PG&f=1", "display_name": "Kunal Puri", "link": "https://stackoverflow.com/users/5859925/kunal-puri"}, "edited": false, "score": 0, "creation_date": 1549535195, "post_id": 54564997, "comment_id": 95940037, "body": "@V.Raska Did this answer your question?"}, {"owner": {"reputation": 31, "user_id": 9813618, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87ba22bfcbb62a3ec4e0f66292b6e100?s=128&d=identicon&r=PG&f=1", "display_name": "V. Raska", "link": "https://stackoverflow.com/users/9813618/v-raska"}, "edited": false, "score": 0, "creation_date": 1549554195, "post_id": 54564997, "comment_id": 95951586, "body": "@ Kunal Puri Your code is super but my program has crashed in the first condition. [if (current-&gt;rhetorician-&gt;coefficient &gt; current-&gt;next-&gt;rhetorician-&gt;coefficient)] - the exception error is Exception thrown: read access violation. current-&gt;next was nullptr."}, {"owner": {"reputation": 3303, "user_id": 5859925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de386e94c47dfbffb5235306b1affc96?s=128&d=identicon&r=PG&f=1", "display_name": "Kunal Puri", "link": "https://stackoverflow.com/users/5859925/kunal-puri"}, "reply_to_user": {"reputation": 31, "user_id": 9813618, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87ba22bfcbb62a3ec4e0f66292b6e100?s=128&d=identicon&r=PG&f=1", "display_name": "V. Raska", "link": "https://stackoverflow.com/users/9813618/v-raska"}, "edited": false, "score": 0, "creation_date": 1549554855, "post_id": 54564997, "comment_id": 95952008, "body": "@V.Raska That&#39;s your code only with necessary modifications. Please refer to the comments that I have written. If you are facing any issue in understanding, take a simple example (as I suggested in my answer also =&gt; Treating the data stored as numbers instead of coefficients) and you will understand why the modifications are necessary."}, {"owner": {"reputation": 3303, "user_id": 5859925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de386e94c47dfbffb5235306b1affc96?s=128&d=identicon&r=PG&f=1", "display_name": "Kunal Puri", "link": "https://stackoverflow.com/users/5859925/kunal-puri"}, "reply_to_user": {"reputation": 31, "user_id": 9813618, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87ba22bfcbb62a3ec4e0f66292b6e100?s=128&d=identicon&r=PG&f=1", "display_name": "V. Raska", "link": "https://stackoverflow.com/users/9813618/v-raska"}, "edited": false, "score": 0, "creation_date": 1549554980, "post_id": 54564997, "comment_id": 95952078, "body": "@V.Raska If you feel that this answered your question, please consider voting and accepting <a href=\"https://stackoverflow.com/help/someone-answers\">stackoverflow.com/help/someone-answers</a>. If you feel that the answer can be improved, please comment on how it can be improved."}, {"owner": {"reputation": 31, "user_id": 9813618, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87ba22bfcbb62a3ec4e0f66292b6e100?s=128&d=identicon&r=PG&f=1", "display_name": "V. Raska", "link": "https://stackoverflow.com/users/9813618/v-raska"}, "edited": false, "score": 0, "creation_date": 1549558105, "post_id": 54564997, "comment_id": 95953962, "body": "@ Kunal Puri You have got right. Now I am trying downwardly sort but it get some wrong nodes."}, {"owner": {"reputation": 31, "user_id": 9813618, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87ba22bfcbb62a3ec4e0f66292b6e100?s=128&d=identicon&r=PG&f=1", "display_name": "V. Raska", "link": "https://stackoverflow.com/users/9813618/v-raska"}, "edited": false, "score": 0, "creation_date": 1549573771, "post_id": 54564997, "comment_id": 95961551, "body": "Can it possible to sort the list downwardly, it is improving my question and the problem which I can solve. So question is how to sort list downwardly."}, {"owner": {"reputation": 3303, "user_id": 5859925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de386e94c47dfbffb5235306b1affc96?s=128&d=identicon&r=PG&f=1", "display_name": "Kunal Puri", "link": "https://stackoverflow.com/users/5859925/kunal-puri"}, "reply_to_user": {"reputation": 31, "user_id": 9813618, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87ba22bfcbb62a3ec4e0f66292b6e100?s=128&d=identicon&r=PG&f=1", "display_name": "V. Raska", "link": "https://stackoverflow.com/users/9813618/v-raska"}, "edited": false, "score": 0, "creation_date": 1549584249, "post_id": 54564997, "comment_id": 95965329, "body": "@V.Raska Actually, there was one bug in the above code. I have fixed it. Now, I think you can directly change &lt; to &gt; to sort downwards."}], "tags": [], "owner": {"reputation": 3303, "user_id": 5859925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de386e94c47dfbffb5235306b1affc96?s=128&d=identicon&r=PG&f=1", "display_name": "Kunal Puri", "link": "https://stackoverflow.com/users/5859925/kunal-puri"}, "is_accepted": true, "score": 0, "last_activity_date": 1549584292, "last_edit_date": 1549584292, "creation_date": 1549502340, "answer_id": 54564997, "question_id": 54564313, "link": "https://stackoverflow.com/questions/54564313/how-to-sort-doubly-linked-list-in-c-without-swapping-data-only-transferring/54564997#54564997", "title": "How to sort doubly linked list in c++ without swapping data, only transferring (entries) nodes", "body": "<p>The main issue is in <code>sort()</code>. It is not handling the pointers correctly.\nTake a short example, <code>3 -&gt; 2 -&gt; 1</code> and you will get it.</p>\n\n<p>Here is the corrected code with unnecessary variables removed:</p>\n\n<pre><code>void DlinkedList::sort() {\n    int count = this-&gt;getLenght();\n    Node *current;\n    int i, j;\n\n    for (i = 1; i &lt; count; i++) {\n        current = this-&gt;head;\n        for (j = 0; j &lt;= count - i - 1; j++) {\n            Node *before, *after;\n            if (current-&gt;rhetorician-&gt;coefficient &gt; current-&gt;next-&gt;rhetorician-&gt;coefficient) {\n                before = current-&gt;prev;\n                after = current-&gt;next;\n                if (before != nullptr) {\n                    before-&gt;next = after;\n                } else {\n                    // if before = null, it is the head node\n                    this-&gt;head = after; // In case before pointer is null, after pointer should be the new head\n                }\n                current-&gt;next = after-&gt;next;\n                current-&gt;prev = after;\n\n                if (after-&gt;next != nullptr) {\n                    after-&gt;next-&gt;prev = current; // prev pointer of after-&gt;next should be set to current.\n                }\n\n                after-&gt;next = current;\n                after-&gt;prev = before;\n            } else {\n                current = current-&gt;next; // Go to next node only if current-&gt;rhetorician-&gt;coefficient &gt; current-&gt;next-&gt;rhetorician-&gt;coefficient condition is false.\n            }\n        }\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 9813618, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87ba22bfcbb62a3ec4e0f66292b6e100?s=128&d=identicon&r=PG&f=1", "display_name": "V. Raska", "link": "https://stackoverflow.com/users/9813618/v-raska"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 491, "favorite_count": 0, "accepted_answer_id": 54564997, "answer_count": 2, "score": 0, "last_activity_date": 1549584292, "creation_date": 1549496939, "last_edit_date": 1549497587, "question_id": 54564313, "link": "https://stackoverflow.com/questions/54564313/how-to-sort-doubly-linked-list-in-c-without-swapping-data-only-transferring", "title": "How to sort doubly linked list in c++ without swapping data, only transferring (entries) nodes", "body": "<p>I have got a problem in the sorting method of my linked list. I need to sort nodes in a doubly linked list by transferring links of nodes (entries of nodes). The method is stopped due to nullptr in the last node.</p>\n\n<p>I do not know how to solve this problem. I tried a lot of variants, but no one was successful.</p>\n\n<pre><code>#include \"DlinkedList.h\"\n\n// Node constructor\nNode::Node()\n{\n    this-&gt;rhetorician = NULL;\n    this-&gt;prev = NULL;\n    this-&gt;next = NULL;\n}\n\n// Node destructor\nNode::~Node()\n{\n}\n\n// List constructor\nDlinkedList::DlinkedList()\n{\n    this-&gt;length = 0;\n    this-&gt;head = NULL;\n}\n\n// Method for adding node at the end\nvoid DlinkedList::appendNode(Rhetorician* rhetorician)\n{\n    if (this-&gt;head == NULL) {\n        Node *new_node = new Node();\n        new_node-&gt;rhetorician = rhetorician;\n        this-&gt;head = new_node;\n    }\n    else {\n        Node *last_node = NULL;\n        for (Node *node_ptr = this-&gt;head; node_ptr != NULL; node_ptr = node_ptr-&gt;next)\n        {\n            last_node = node_ptr;\n        }\n        Node *new_node = new Node();\n        new_node-&gt;rhetorician = rhetorician;\n        last_node-&gt;next = new_node;\n        new_node-&gt;prev = last_node;\n    }\n    this-&gt;length++;\n}\n\n// Method for printing nodes\nvoid DlinkedList::printNodes()\n{\n    for (Node *node_cur = this-&gt;head; node_cur != NULL; node_cur = node_cur-&gt;next)\n    {\n        node_cur-&gt;rhetorician-&gt;printer();\n        cout &lt;&lt; \"---------------------------------------------------------------------------------------------------\" &lt;&lt; endl;\n    }\n    cout &lt;&lt; endl &lt;&lt; \"##################################################################################################\\n\" &lt;&lt; endl;\n}\n\n// Method for getting length\nint DlinkedList::getLenght()\n{\n    return this-&gt;length;\n}\n\n// Method for deleting node\nvoid DlinkedList::remove(string name)\n{\n    Node* logout_node = NULL;\n    for (Node* node_cur = this-&gt;head; node_cur != NULL; node_cur = node_cur-&gt;next)\n    {\n        if (node_cur-&gt;rhetorician-&gt;name == name)\n        {\n            logout_node = node_cur;\n        }\n    }\n\n    if (this-&gt;head != NULL || logout_node != NULL)\n    {\n        if (this-&gt;head == logout_node)\n        {\n            this-&gt;head = logout_node-&gt;next;\n        }\n\n        if (logout_node-&gt;next != NULL)\n        {\n            logout_node-&gt;next-&gt;prev = logout_node-&gt;prev;\n        }\n\n        if (logout_node-&gt;prev != NULL)\n        {\n            logout_node-&gt;prev-&gt;next = logout_node-&gt;next;\n        }\n\n        delete logout_node-&gt;rhetorician;\n        delete logout_node;\n        this-&gt;length--;\n    }\n}\n\n// Method for finding node\nvoid DlinkedList::find(string name)\n{\n    bool ver = false;\n    Node *n = NULL;\n\n    for (Node* node_cur = this-&gt;head; node_cur != NULL; node_cur = node_cur-&gt;next)\n    {\n        if (node_cur-&gt;rhetorician-&gt;name == name)\n        {\n            ver = true;\n            n = node_cur;\n        }\n    }\n\n    if (ver)\n    {\n        n-&gt;rhetorician-&gt;printer();\n    }\n    else\n    {\n        cout &lt;&lt; \"Rhetorician was not found!\";\n    }\n}\n\n// Method for sorting nodes\nvoid DlinkedList::sort()\n{\n    int count = this-&gt;getLenght();\n    Node *tmp, *current;\n    int i, j;\n\n    for (i = 1; i &lt; count; i++)\n    {\n        current = this-&gt;head;\n        for (j = 0; j &lt;= count - i - 1; j++)\n        {\n            Node *before, *after;\n            if (current-&gt;rhetorician-&gt;coefficient &gt; current-&gt;next-&gt;rhetorician-&gt;coefficient)\n            {\n                before = current-&gt;prev;\n                after = current-&gt;next;\n                if (before != NULL) {\n                    before-&gt;next = after;\n                }\n                current-&gt;next = after-&gt;next;\n                current-&gt;prev = after;\n                after-&gt;next = current;\n                after-&gt;prev = before;\n            }\n            tmp = current;\n            current = current-&gt;next;\n        }\n    }\n}\n\n// List destructor\nDlinkedList::~DlinkedList()\n{\n    Node *next_node = NULL;\n    for (Node *node_cur = this-&gt;head; node_cur != NULL; node_cur = next_node)\n    {\n        next_node = node_cur-&gt;next;\n        delete node_cur-&gt;rhetorician;\n        delete node_cur;\n    }\n\n    this-&gt;head = NULL;\n    this-&gt;length = 0;\n}\n</code></pre>\n\n<p>Main:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include \"DlinkedList.h\"\n#include &lt;fstream&gt;\n#include &lt;vector&gt;\n#include &lt;sstream&gt;\n\n// Namespace\nusing namespace std;\n\n// Parser of line to vector array\nvector&lt;string&gt; split(string strToSplit, char delimeter)\n{\n    stringstream ss(strToSplit);\n    string item;\n    vector&lt;string&gt; splittedStrings;\n    while (getline(ss, item, delimeter))\n    {\n        splittedStrings.push_back(item);\n    }\n    return splittedStrings;\n}\n\n// File loader\nvoid read_file(const char *name, DlinkedList *list)\n{\n    // Variable for loading line\n    string line;\n    {\n        // Create relation\n        ifstream file(name);\n\n        // Check if file exists\n        if (file)\n        {\n            // Check if file is empty\n            if (!(file.peek() == ifstream::traits_type::eof()))\n            {\n                // Read data from file and put into LinkedList\n                while (getline(file, line)) {\n                    list-&gt;appendNode(new Rhetorician(split(line, ';')[0], split(line, ';')[1],\n                        split(line, ';')[2], stoi(split(line, ';')[3])));\n                }\n            }\n            // Close file\n            file.close();\n        }\n    }\n}\n\n// Main method\nint main() \n{\n    // Create instance of doubly linked list\n    DlinkedList *list = new DlinkedList();\n\n    // Read file and push data into list\n    read_file(\"seznam_enumat.txt\", list);\n\n    // Print all loaded rhetoricians behind added own one\n    cout &lt;&lt; \"\\nAll rhetoricians from file:\" &lt;&lt; endl;\n    cout &lt;&lt; \"##################################################################################################\\n\" &lt;&lt; endl;\n    list-&gt;printNodes();\n\n    // Append other rhetoricians\n    list-&gt;appendNode(new Rhetorician(\"Cain\", \"Foster\", \"Structural and molecular virology\", 7));\n    list-&gt;appendNode(new Rhetorician(\"Stacy\", \"Algar\", \"Dept of microbiology and immunology\", 5));\n    list-&gt;appendNode(new Rhetorician(\"Oded\", \"Philander\", \"Experimental plasma physics\", 3));\n    list-&gt;appendNode(new Rhetorician(\"Shay\", \"Rimon\", \"Experimental plasma physics\", 10));\n\n    // Sort rhetoricians in list\n    list-&gt;sort();\n\n    // Delete rhetorician by name\n    //list-&gt;remove(\"Stacy\");\n\n    // Finder of rhetorician\n    cout &lt;&lt; \"\\nFound rhetorician:\" &lt;&lt; endl;\n    cout &lt;&lt; \"##################################################################################################\\n\" &lt;&lt; endl;\n    list-&gt;find(\"Shay\");\n\n    // Print all sorted rhetoricians\n    cout &lt;&lt; \"\\nAll rhetoricians:\" &lt;&lt; endl;\n    cout &lt;&lt; \"##################################################################################################\\n\" &lt;&lt; endl;\n    list-&gt;printNodes();\n\n    // Destruct list\n    delete list;\n\n    // Check if user click any key\n    getchar();\n    return 0;\n}\n</code></pre>\n\n<p>Rhetorician:</p>\n\n<pre><code>#include \"Rhetorician.h\"\n\nRhetorician::Rhetorician(string name, string surname, string contribution, int coefficient)\n{\n    this-&gt;name = name;\n    this-&gt;surname = surname;\n    this-&gt;contribution = contribution;\n    this-&gt;coefficient = coefficient;\n}\n\nvoid Rhetorician::printer()\n{\n    // Name\n    cout &lt;&lt; \"Name:\" &lt;&lt; endl;\n    cout &lt;&lt; this-&gt;name &lt;&lt; endl;\n\n    // Surname\n    cout &lt;&lt; \"Surname:\" &lt;&lt; endl;\n    cout &lt;&lt; this-&gt;surname &lt;&lt; endl;\n\n    // Contribution\n    cout &lt;&lt; \"Contribution:\" &lt;&lt; endl;\n    cout &lt;&lt; this-&gt;contribution &lt;&lt; endl;\n\n    // Coefficient\n    cout &lt;&lt; \"Coefficient:\" &lt;&lt; endl;\n    cout &lt;&lt; this-&gt;coefficient &lt;&lt; endl;\n}\n</code></pre>\n"}, {"tags": ["c++", "openmp"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 0, "creation_date": 1549496183, "post_id": 54564198, "comment_id": 95927244, "body": "Is there something preventing you from benchmarking this yourself?"}, {"owner": {"reputation": 2055, "user_id": 6564148, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u3HL5.png?s=128&g=1", "display_name": "George", "link": "https://stackoverflow.com/users/6564148/george"}, "edited": false, "score": 0, "creation_date": 1549496500, "post_id": 54564198, "comment_id": 95927339, "body": "I&#39;m not really sure but isn&#39;t <code>#pragma omp parallel num_threads(2)</code> saying run the below code for <code>num_threads</code> in parallel? I don&#39;t believe loop iteration count comes into play."}, {"owner": {"reputation": 2055, "user_id": 6564148, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u3HL5.png?s=128&g=1", "display_name": "George", "link": "https://stackoverflow.com/users/6564148/george"}, "edited": false, "score": 0, "creation_date": 1549496884, "post_id": 54564198, "comment_id": 95927431, "body": "Should note aswell that you may never have access to all 16 hardware threads, and could potentially get context switched off any."}, {"owner": {"reputation": 1480, "user_id": 10450594, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae4c6a0ca94b3094b25f18e66d8368ff?s=128&d=identicon&r=PG&f=1", "display_name": "Brice", "link": "https://stackoverflow.com/users/10450594/brice"}, "edited": false, "score": 0, "creation_date": 1549553975, "post_id": 54564198, "comment_id": 95951442, "body": "14 of the 16 threads will be assigned no iteration of the for loop. There may be some negligible difference in spawning and managing 16 rather than 2 threads, but the difference should be marginal if the content of the loop is indeed a time consuming task"}], "answers": [{"comments": [{"owner": {"reputation": 20828, "user_id": 620382, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bf285996e4e7188feac84786a47d9f3a?s=128&d=identicon&r=PG", "display_name": "Zulan", "link": "https://stackoverflow.com/users/620382/zulan"}, "edited": false, "score": 0, "creation_date": 1549546636, "post_id": 54564900, "comment_id": 95946855, "body": "By what metric would this be a better solution? Why is a <code>for</code> loop with two (or any fixed number of iterations greater than 1) <i>not really a <code>for</code> loop</i>?"}, {"owner": {"reputation": 5538, "user_id": 1583065, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xXmxW.jpg?s=128&g=1", "display_name": "Emmet", "link": "https://stackoverflow.com/users/1583065/emmet"}, "reply_to_user": {"reputation": 20828, "user_id": 620382, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bf285996e4e7188feac84786a47d9f3a?s=128&d=identicon&r=PG", "display_name": "Zulan", "link": "https://stackoverflow.com/users/620382/zulan"}, "edited": false, "score": 0, "creation_date": 1549561596, "post_id": 54564900, "comment_id": 95955900, "body": "I said it <i>might</i> be a better solution. If someone is using a <code>for</code> loop with just two iterations, I strongly suspect they might have an <code>if-else</code> on the iteration variable inside the loop and just don&#39;t know about <code>sections</code> for some reason, so they&#39;re doing it the way they know about. In this case, maybe it&#39;s semantically correct for it to be a <code>for</code> loop, and maybe it&#39;s not. I don&#39;t know (and neither do you), but two iterations in an <code>omp for</code> has a &quot;code smell&quot; that suggests <code>sections</code> might be better, if not for the OP, then for others who might read this."}], "tags": [], "owner": {"reputation": 5538, "user_id": 1583065, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xXmxW.jpg?s=128&g=1", "display_name": "Emmet", "link": "https://stackoverflow.com/users/1583065/emmet"}, "is_accepted": false, "score": 0, "last_activity_date": 1549501479, "creation_date": 1549501479, "answer_id": 54564900, "question_id": 54564198, "link": "https://stackoverflow.com/questions/54564198/how-openmp-works-when-using-fewer-threads-than-have/54564900#54564900", "title": "How openmp works when using fewer threads than have", "body": "<p>It looks like your <code>for</code>-loop isn't really a <code>for</code>-loop at all: you only have two iterations. A better solution might be to use <em>OpenMP</em> <code>sections</code>:</p>\n\n<pre><code>#pragma omp parallel sections\n{\n    #pragma omp section\n    {\n        // Time-consuming operations\n    }\n    #pragma omp section \n    {\n        // Other independent time-consuming operations\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 20828, "user_id": 620382, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bf285996e4e7188feac84786a47d9f3a?s=128&d=identicon&r=PG", "display_name": "Zulan", "link": "https://stackoverflow.com/users/620382/zulan"}, "is_accepted": false, "score": 1, "last_activity_date": 1549546538, "creation_date": 1549546538, "answer_id": 54574582, "question_id": 54564198, "link": "https://stackoverflow.com/questions/54564198/how-openmp-works-when-using-fewer-threads-than-have/54574582#54574582", "title": "How openmp works when using fewer threads than have", "body": "<p>Omit any manual specification such as <code>omp_set_num_threads</code> or <code>num_threads</code> and let the implementation figure it out.</p>\n\n<p>Practically, it should make no noticeable difference either way.</p>\n\n<p><code>omp_set_num_threads</code> is completely redundant, as it only applies to subsequent\nparallel regions that do not specify a <code>num_threads</code> clause. So if you feel like you must, use either <code>omp_set_num_threads</code> or a <code>num_threads</code> clause as it is just confusing to the reader.</p>\n\n<p>It is conceivable that <code>num_threads(2)</code>, however specified, is better. It has a smaller initialization overhead for creating less threads. That probably doesn't matter. There is a theoretical argument the excessive threads which have no work to do could drain shared resources while waiting (shared cores with hyperthreading, powercap) - still it should not matter because OpenMP implementations don't do indefinite busy waiting.</p>\n\n<p>On the other hand, manually specifying <code>num_threads(2)</code> creates a redundancy. What if your loop changes to three iterations, but you forget? You waste performance. Same goes for \"<em>I put <code>num_threads(X)</code> because I have <code>X</code> cores</em>\", kind of code.</p>\n\n<p>Again, just omit it. However, measure your application regularly. If you have specific indication of possibly related performance issues - reevaluate the choice based on specific actionable measurements.</p>\n"}], "owner": {"reputation": 105, "user_id": 2451079, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sMRXp.jpg?s=128&g=1", "display_name": "John", "link": "https://stackoverflow.com/users/2451079/john"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 409, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1549546538, "creation_date": 1549496018, "last_edit_date": 1549502080, "question_id": 54564198, "link": "https://stackoverflow.com/questions/54564198/how-openmp-works-when-using-fewer-threads-than-have", "title": "How openmp works when using fewer threads than have", "body": "<p>My computer has 16 cores. \nMy program is like the following:</p>\n\n<pre><code>omp_set_num_threads(16);\n....\n#pragma omp parallel for num_threads(2)\nfor(int i =1; i&lt;=2; ++i)\n{\n \\\\time consuming operations\n }\n</code></pre>\n\n<p>Which is more efficient <code>#pragma omp parallel for num_threads(2)</code> or <code>#pragma omp parallel for num_threads(16)</code>? Or they are the same, since it is shared memory? Pay attention to the fact that my loop iterations are smaller than 16.</p>\n"}, {"tags": ["c++"], "answers": [{"comments": [{"owner": {"reputation": 102, "user_id": 8432975, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba9a7a156fe2b08f8bff6aaf34899280?s=128&d=identicon&r=PG&f=1", "display_name": "betrunken", "link": "https://stackoverflow.com/users/8432975/betrunken"}, "edited": false, "score": 0, "creation_date": 1549496100, "post_id": 54564199, "comment_id": 95927223, "body": "Also <code>v[i]%2==0</code> returns true if <code>v[i]</code> is not divisible by 2 (i.e is odd). Should be the other way around."}, {"owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "reply_to_user": {"reputation": 102, "user_id": 8432975, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba9a7a156fe2b08f8bff6aaf34899280?s=128&d=identicon&r=PG&f=1", "display_name": "betrunken", "link": "https://stackoverflow.com/users/8432975/betrunken"}, "edited": false, "score": 0, "creation_date": 1549496207, "post_id": 54564199, "comment_id": 95927254, "body": "@betrunken I left that issue because the problem descrption talks about even and odd <i>indexes</i> so maybe it should be <code>if (i%2 != 0)</code>"}, {"owner": {"reputation": 102, "user_id": 8432975, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba9a7a156fe2b08f8bff6aaf34899280?s=128&d=identicon&r=PG&f=1", "display_name": "betrunken", "link": "https://stackoverflow.com/users/8432975/betrunken"}, "edited": false, "score": 0, "creation_date": 1549496472, "post_id": 54564199, "comment_id": 95927333, "body": "true. But their example is separated by values."}, {"owner": {"reputation": 21, "user_id": 11025619, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11c2363ff58d40310d646b6f93c5675f?s=128&d=identicon&r=PG&f=1", "display_name": "XiNNO", "link": "https://stackoverflow.com/users/11025619/xinno"}, "edited": false, "score": 0, "creation_date": 1549496901, "post_id": 54564199, "comment_id": 95927437, "body": "thanks a lot guys now it works just fine .Been looking for a while where the problem was thank you again for the help"}], "tags": [], "owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "is_accepted": true, "score": 0, "last_activity_date": 1549496105, "last_edit_date": 1549496105, "creation_date": 1549496022, "answer_id": 54564199, "question_id": 54564025, "link": "https://stackoverflow.com/questions/54564025/the-program-have-to-put-the-odd-index-elements-in-a-new-vector-c-and-the-even-in/54564199#54564199", "title": "the program have to put the odd-index elements in a new vector C and the even-index elements in another vector T", "body": "<p>Your braces are incorrect when you print out the results</p>\n\n<pre><code>cout&lt;&lt;\"Odd vector \"&lt;&lt;endl;\nfor(int j=0;j&lt;count;j++){\n    cout&lt;&lt;\"Elements\"&lt;&lt;\"     \"&lt;&lt;c[j]&lt;&lt;endl;\ncout&lt;&lt;\"Even vector \"&lt;&lt;endl;\nfor(int z=0;z&lt;count1;z++){\n    cout&lt;&lt;\"Elements \"&lt;&lt;\"     \"&lt;&lt;t[z]&lt;&lt;endl;\n    return 0;\n}\n}\n</code></pre>\n\n<p>should be</p>\n\n<pre><code>cout&lt;&lt;\"Odd vector \"&lt;&lt;endl;\nfor(int j=0;j&lt;count;j++)\n    cout&lt;&lt;\"Elements\"&lt;&lt;\"     \"&lt;&lt;c[j]&lt;&lt;endl;\ncout&lt;&lt;\"Even vector \"&lt;&lt;endl;\nfor(int z=0;z&lt;count1;z++)\n    cout&lt;&lt;\"Elements \"&lt;&lt;\"     \"&lt;&lt;t[z]&lt;&lt;endl;\nreturn 0;\n</code></pre>\n\n<p>The way you have it <code>return 0;</code> is inside the second for loop, which is inside the first for loop, so both loops only print out one number before your program exits.</p>\n"}], "owner": {"reputation": 21, "user_id": 11025619, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11c2363ff58d40310d646b6f93c5675f?s=128&d=identicon&r=PG&f=1", "display_name": "XiNNO", "link": "https://stackoverflow.com/users/11025619/xinno"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "accepted_answer_id": 54564199, "answer_count": 1, "score": -2, "last_activity_date": 1549496105, "creation_date": 1549495006, "last_edit_date": 1549495212, "question_id": 54564025, "link": "https://stackoverflow.com/questions/54564025/the-program-have-to-put-the-odd-index-elements-in-a-new-vector-c-and-the-even-in", "title": "the program have to put the odd-index elements in a new vector C and the even-index elements in another vector T", "body": "<p>I have to make a program that after entering the elements of a vector <code>v[n]</code>, the program have to put the odd-index elements in a new vector <code>C</code> and the even-index elements in another vector <code>T</code>. The code seems to work but the result is not complete. It shows just one element at both vectors.</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nint main() {\n\n    int el,c[100],t[100],count=0, count1=0,v[100];\n    cout&lt;&lt;\"How many elements : \\n\"&lt;&lt;endl;\n    cin&gt;&gt;el;\n    for(int i=0;i&lt;el;i++){\n        cout&lt;&lt;\"Enter element \"&lt;&lt;i+1&lt;&lt;\" \"&lt;&lt;endl;\n        cin&gt;&gt;v[i];\n    }\n    for(int i=0,j=0,z=0;i&lt;el;i++){\n        if(v[i]%2==0){\n            count++;\n            c[j]=v[i];\n            j++;\n        }\n        else{\n            t[z]=v[i];\n            count1++;\n            z++;\n        }\n    }\n    cout&lt;&lt;\"Odd vector \"&lt;&lt;endl;\n    for(int j=0;j&lt;count;j++){\n        cout&lt;&lt;\"Elements\"&lt;&lt;\"     \"&lt;&lt;c[j]&lt;&lt;endl;\n    cout&lt;&lt;\"Even vector \"&lt;&lt;endl;\n    for(int z=0;z&lt;count1;z++){\n        cout&lt;&lt;\"Elements \"&lt;&lt;\"     \"&lt;&lt;t[z]&lt;&lt;endl;\n        return 0;\n    }\n    }\n}\n</code></pre>\n\n<p>Expected result:<br>\nExample: I give the <code>v[]={3,5,7,8,9,6}</code></p>\n\n<p>The program should give this result:  </p>\n\n<pre><code>Odd elements\n3  7  9\nEven elements\n5  8  6\n</code></pre>\n\n<p>Actual result is:</p>\n\n<pre><code>Odd elements \n8\nEven elements \n3\n</code></pre>\n"}, {"tags": ["c++", "qt", "qcombobox"], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 11025590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/261777ec01e680323fa2a2995f8ab131?s=128&d=identicon&r=PG&f=1", "display_name": "J. Doeling", "link": "https://stackoverflow.com/users/11025590/j-doeling"}, "edited": false, "score": 0, "creation_date": 1549585592, "post_id": 54571673, "comment_id": 95965669, "body": "I&#39;m using the Qt Visual Studio Tools extension with Qt 5.12.0 in VS 15.8.2. <a href=\"https://imgur.com/3avbX4w\" rel=\"nofollow noreferrer\">Here&#39;s</a> an example of the error with the working version above it. I can&#39;t figure out how to see what compiler I&#39;m using, but I&#39;m also on Windows 10."}], "tags": [], "owner": {"reputation": 321, "user_id": 1694302, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e12e17a0affc86ad42f8c4e58545ed9?s=128&d=identicon&r=PG", "display_name": "Marcel Petrick", "link": "https://stackoverflow.com/users/1694302/marcel-petrick"}, "is_accepted": false, "score": 0, "last_activity_date": 1549536821, "creation_date": 1549536821, "answer_id": 54571673, "question_id": 54563952, "link": "https://stackoverflow.com/questions/54563952/trouble-adding-qstringlist-items-to-a-qcombobox-in-qt/54571673#54571673", "title": "Trouble adding QStringList items to a QComboBox in Qt", "body": "<p>Your code-example looks totally reasonable. Works fine with MingGW and Qt5.9 on Win10.\nAlso the Qt-libs show the fitting signature for your second addItems(..)-call.\n <a href=\"https://i.stack.imgur.com/u5Qga.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/u5Qga.png\" alt=\"code and runtime-view\"></a></p>\n"}], "owner": {"reputation": 31, "user_id": 11025590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/261777ec01e680323fa2a2995f8ab131?s=128&d=identicon&r=PG&f=1", "display_name": "J. Doeling", "link": "https://stackoverflow.com/users/11025590/j-doeling"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 83, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1549536821, "creation_date": 1549494524, "question_id": 54563952, "link": "https://stackoverflow.com/questions/54563952/trouble-adding-qstringlist-items-to-a-qcombobox-in-qt", "title": "Trouble adding QStringList items to a QComboBox in Qt", "body": "<p>I'm making an application using Qt and C++ and I'm having trouble with getting addItems() to work with a QComboBox. The following code works fine:</p>\n\n<pre><code>QComboBox *subtype = new QComboBox(this);\nsubtype-&gt;addItems({ \"itm1\", \"itm2\" });\n</code></pre>\n\n<p>However, putting the QStringList into a variable, as shown here:</p>\n\n<pre><code>QComboBox *subtype = new QComboBox(this);\nQStringList qsl = { \"itm1\", \"itm2\" };\nsubtype-&gt;addItems(qsl);\n</code></pre>\n\n<p>causes an error that says \"Function definition for 'addItems' not found.\"</p>\n\n<p>This behavior seems odd to me. Are variables not allowed in this case, or am I declaring/defining something incorrectly?</p>\n"}, {"tags": ["c++", "constructor", "initialization"], "comments": [{"owner": {"reputation": 999, "user_id": 7859598, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-B2rVv02QIdo/AAAAAAAAAAI/AAAAAAAACew/FUFwHEbNSVo/photo.jpg?sz=128", "display_name": "Rietty", "link": "https://stackoverflow.com/users/7859598/rietty"}, "edited": false, "score": 0, "creation_date": 1549493625, "post_id": 54563799, "comment_id": 95926464, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/9903248/initializing-fields-in-constructor-initializer-list-vs-constructor-body\">Initializing fields in constructor - initializer list vs constructor body</a>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 2, "creation_date": 1549493633, "post_id": 54563799, "comment_id": 95926468, "body": "It doesn&#39;t make sense to initialise <code>double</code> variables with <code>NULL</code>."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1549493639, "post_id": 54563799, "comment_id": 95926471, "body": "<code>real(NULL), imag(NULL)</code> Do not do this.  <code>NULL</code> is for pointers.  If you are using C++11 stop using <code>NULL</code> and use <code>nullptr</code> instead.  For things that aren&#39;t pointers, you can just use <code>()</code> to value initialize them."}, {"owner": {"reputation": 999, "user_id": 7859598, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-B2rVv02QIdo/AAAAAAAAAAI/AAAAAAAACew/FUFwHEbNSVo/photo.jpg?sz=128", "display_name": "Rietty", "link": "https://stackoverflow.com/users/7859598/rietty"}, "edited": false, "score": 1, "creation_date": 1549493709, "post_id": 54563799, "comment_id": 95926494, "body": "Also you should probably move away from <code>()</code> in initializer lists in general and prefer <code>{}</code> but that&#39;s an argument for semantics mostly."}, {"owner": {"reputation": 25, "user_id": 9531468, "user_type": "registered", "profile_image": "https://graph.facebook.com/1210342522441635/picture?type=large", "display_name": "Smith John", "link": "https://stackoverflow.com/users/9531468/smith-john"}, "edited": false, "score": 0, "creation_date": 1549494042, "post_id": 54563799, "comment_id": 95926608, "body": "Will make those changes. But do I have them labeled correctly? Is the first one my initialization list and the 2nd my default?"}], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 9531468, "user_type": "registered", "profile_image": "https://graph.facebook.com/1210342522441635/picture?type=large", "display_name": "Smith John", "link": "https://stackoverflow.com/users/9531468/smith-john"}, "edited": false, "score": 0, "creation_date": 1549494446, "post_id": 54563898, "comment_id": 95926730, "body": "Thank you, this is the explanation I was looking for. A few questions about this then. If my default constructor is also my initialization list, what is the point of my second constructor? Is it needed? And if the second constructor is not my default, what is it&#39;s technical name?"}, {"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "reply_to_user": {"reputation": 25, "user_id": 9531468, "user_type": "registered", "profile_image": "https://graph.facebook.com/1210342522441635/picture?type=large", "display_name": "Smith John", "link": "https://stackoverflow.com/users/9531468/smith-john"}, "edited": false, "score": 1, "creation_date": 1549494554, "post_id": 54563898, "comment_id": 95926766, "body": "@SmithJohn The default constructor is whichever constructor takes no parameters.  How it&#39;s implemented is immaterial.  In your case, you&#39;re using an initialization list as the implementation, which is good. But those are unrelated concepts. Your second constructor is just another constructor with two parameters. There&#39;s no technical name for those."}, {"owner": {"reputation": 25, "user_id": 9531468, "user_type": "registered", "profile_image": "https://graph.facebook.com/1210342522441635/picture?type=large", "display_name": "Smith John", "link": "https://stackoverflow.com/users/9531468/smith-john"}, "edited": false, "score": 0, "creation_date": 1549495030, "post_id": 54563898, "comment_id": 95926898, "body": "Thank you Mooing Duck, I appreciate the information/response."}], "tags": [], "owner": {"reputation": 172, "user_id": 10892562, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9bc05cdb4071612bcbeb0ef4860823bb?s=128&d=identicon&r=PG&f=1", "display_name": "Elenchus", "link": "https://stackoverflow.com/users/10892562/elenchus"}, "is_accepted": false, "score": 1, "last_activity_date": 1549494120, "creation_date": 1549494120, "answer_id": 54563898, "question_id": 54563799, "link": "https://stackoverflow.com/questions/54563799/base-default-constructor-vs-constructor-initialization-list/54563898#54563898", "title": "Base/Default Constructor vs Constructor Initialization list", "body": "<p>In this case,</p>\n\n<pre><code>Complex::Complex() : real(NULL), imag(NULL)\n{\n}\n</code></pre>\n\n<p>would be your <strong>default constructor</strong>, because it is the one here that has no parameters.</p>\n\n<p>An <strong>initializer list</strong> is what you see following your default constructor's name, being</p>\n\n<p><code>:real(NULL), imag(NULL)</code></p>\n\n<p>This is a list of member initializations that take place upon calling the default constructor <code>Complex::Complex()</code></p>\n\n<p>As an aside, <code>NULL</code> is a value meant to represent a pointer that does not point to any valid addressable memory location. It's not exactly applicable to <code>double</code> types. </p>\n"}, {"comments": [{"owner": {"reputation": 25, "user_id": 9531468, "user_type": "registered", "profile_image": "https://graph.facebook.com/1210342522441635/picture?type=large", "display_name": "Smith John", "link": "https://stackoverflow.com/users/9531468/smith-john"}, "edited": false, "score": 1, "creation_date": 1549502341, "post_id": 54564099, "comment_id": 95928662, "body": "I really appreciate this comment/the information you provided. I bookmarked this and will show it to my friends in class as well who were confused about this as well."}], "tags": [], "owner": {"reputation": 94195, "user_id": 410767, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/2c1dd4727d07c7dbb6ff8c3a83e400b5?s=128&d=identicon&r=PG", "display_name": "Tony Delroy", "link": "https://stackoverflow.com/users/410767/tony-delroy"}, "is_accepted": true, "score": 1, "last_activity_date": 1549534508, "last_edit_date": 1549534508, "creation_date": 1549495489, "answer_id": 54564099, "question_id": 54563799, "link": "https://stackoverflow.com/questions/54563799/base-default-constructor-vs-constructor-initialization-list/54564099#54564099", "title": "Base/Default Constructor vs Constructor Initialization list", "body": "<blockquote>\n  <p>I have two questions, what is the difference between a default/base construct and a construct initialize list?</p>\n</blockquote>\n\n<p>A <em>default constructor</em> is a constructor that will be invoked when you create an object but don't specify any constructor arguments.  For example, all these variables will be initialised by a call to the default constructor:</p>\n\n<pre><code>Complex myComplex1;\nComplex myComplex2();\nComplex myComplex3{};\n</code></pre>\n\n<p>Some other constructors do require arguments, so they're <strong><em>not</em></strong> <em>default</em> constructors.</p>\n\n<p>In the implementation of <em>any</em> constructor (whether a <em>default</em> constructor or not) for an object with bases or member variables or constants, you can use an initialisation list to construct/initialise those bases or members.</p>\n\n<blockquote>\n  <p>They look the same to me, here are my examples. Do I have them commented correctly as well as what they are?</p>\n</blockquote>\n\n<p>You didn't have them commented correctly.  A fixed version is:</p>\n\n<pre><code>Complex::Complex()  // default constructor as it does not require args\n   : real{}, imag{} // initialization list: sets both to 0.0\n{ }\n\nComplex::Complex(double inReal, double inImag) // NOT a default constructor\n                                               // as it requires arguments\n  : real(inReal), imag(inImag)  // initialisation list\n{\n    // real = inReal;  // set in the initialisation list instead\n    // imag = inImag;\n}\n</code></pre>\n\n<p>The non-default constructor above is invoked when you create an object while specifying matching constructor arguments:</p>\n\n<pre><code>Complex myComplex4(3.1, 2);\nComplex myComplex5{-2.3, 2.7};\n</code></pre>\n\n<p>It's a good idea to preferentially use an initialisation list to construct your bases and set your members: otherwise at best they'll be default initialised then assigned to, which can be less efficient, but for references and constants you simply have to use an initialisation list.</p>\n\n<hr>\n\n<p>It is possible to create a default constructor with arguments with default values:</p>\n\n<pre><code>Complex(double inReal = 0.0, double inImag = 0.0)\n  : real(inReal), imag(inImag)\n{ }\n</code></pre>\n\n<p>This single constructor can reasonably replace both the constructors in your code.</p>\n"}], "owner": {"reputation": 25, "user_id": 9531468, "user_type": "registered", "profile_image": "https://graph.facebook.com/1210342522441635/picture?type=large", "display_name": "Smith John", "link": "https://stackoverflow.com/users/9531468/smith-john"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "accepted_answer_id": 54564099, "answer_count": 2, "score": -2, "last_activity_date": 1549534508, "creation_date": 1549493515, "question_id": 54563799, "link": "https://stackoverflow.com/questions/54563799/base-default-constructor-vs-constructor-initialization-list", "title": "Base/Default Constructor vs Constructor Initialization list", "body": "<p>I read a few different topics on these forums and I'm not getting a clear answer on it.</p>\n\n<p>I have two questions, what is the difference between a default/base construct and a construct initialize list? They look the same to me, here are my examples. Do I have them commented correctly as well as what they are?</p>\n\n<pre><code>//In my .h file:\nclass Complex {\n\npublic:\nComplex();\nComplex(double, double);\nprivate:\ndouble real;\ndouble imag;\n};\n\n//In my implementation file:\nComplex::Complex() :real(NULL), imag(NULL) // initialization list\n{\n}\n\nComplex::Complex(double inReal, double inImag) // default constructor\n{\nreal = inReal;\nimag = inImag;\n}    \n</code></pre>\n"}, {"tags": ["c++", "c++11", "gcc"], "comments": [{"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1549493612, "post_id": 54563791, "comment_id": 95926459, "body": "Why <code>typedef struct {} A;</code>? that&#39;s more C than C++."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 2, "creation_date": 1549493877, "post_id": 54563791, "comment_id": 95926553, "body": "GCC 4.x.x is beyond obsolete."}, {"owner": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 0, "creation_date": 1549495549, "post_id": 54563791, "comment_id": 95927062, "body": "Note that <code>_foo_h_</code> is a reserved identifier."}, {"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 1, "creation_date": 1549495842, "post_id": 54563791, "comment_id": 95927146, "body": "Formally, the header file has undefined behaviour, due to use of a reserved identifier as an include guard.   Remove the leading <code>_</code>.     As to the actual problem, try reversing the order the <code>.cpp</code> files are listed on the command line.   Some older toolchains and their linkers (and gcc4 is OLD) were sensitive to such things, in resolving symbols used between compilation units."}, {"owner": {"reputation": 1308, "user_id": 5689220, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/FipQW.png?s=128&g=1", "display_name": "villapx", "link": "https://stackoverflow.com/users/5689220/villapx"}, "reply_to_user": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 0, "creation_date": 1549551293, "post_id": 54563791, "comment_id": 95949701, "body": "@peter ah, I wasn&#39;t aware that that was a reserved identifier. To be fair, this is just a MCVE I threw together in 5 minutes, so I didn&#39;t think twice about the <code>#include</code> guards. Anyways -- @neil I realize GCC 4 is old, but the fact remains that it&#39;s the default on RHEL and CentOS 7 and is still supported by RedHat. I&#39;m just academically curious if my code is allowed, much more so than wanting to use this old compiler for production builds."}, {"owner": {"reputation": 1308, "user_id": 5689220, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/FipQW.png?s=128&g=1", "display_name": "villapx", "link": "https://stackoverflow.com/users/5689220/villapx"}, "reply_to_user": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 0, "creation_date": 1549551553, "post_id": 54563791, "comment_id": 95949874, "body": "@peter reversing the order of the <code>.cpp</code> files didn&#39;t fix the linker error, nor did changing the reserved identifier <code>#include</code> guard. I&#39;m guessing GCC 4 just didn&#39;t correctly implement the linking for <code>explicit</code> conversion functions correctly"}, {"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1550677312, "post_id": 54563791, "comment_id": 96358493, "body": "Having some deja-vu, that this was asked in the last week, or so, and that this was a known bug in this ancient version of gcc. Can&#39;t find the dupe."}, {"owner": {"reputation": 1308, "user_id": 5689220, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/FipQW.png?s=128&g=1", "display_name": "villapx", "link": "https://stackoverflow.com/users/5689220/villapx"}, "reply_to_user": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1550677636, "post_id": 54563791, "comment_id": 96358703, "body": "@SamVarshavchik This is that very question. It probably popped up for you again because I edited the code snippet to remove the leading underscore on my <code>#include</code> macro. I&#39;m going to try to find in the standard where it might explicitly say that my code is allowed."}], "owner": {"reputation": 1308, "user_id": 5689220, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/FipQW.png?s=128&g=1", "display_name": "villapx", "link": "https://stackoverflow.com/users/5689220/villapx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 72, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1550676896, "creation_date": 1549493484, "last_edit_date": 1550676896, "question_id": 54563791, "link": "https://stackoverflow.com/questions/54563791/defining-explicit-conversion-possible-gcc-bug", "title": "Defining explicit conversion - possible GCC bug", "body": "<p>I'm trying to define a simple explicit conversion in C++11, separately from the header file, using GCC 4.8.5 (CentOS 7's default):</p>\n\n<p>foo.h:</p>\n\n<pre><code>#ifndef foo_h_\n#define foo_h_\n\ntypedef struct {\n    int x;\n    explicit operator int() const;\n} A;\n\n#endif\n</code></pre>\n\n<p>foo.cpp:</p>\n\n<pre><code>#include \"foo.h\"\n\nA::operator int() const\n{\n    return this-&gt;x;\n}\n</code></pre>\n\n<p>main.cpp:</p>\n\n<pre><code>#include \"foo.h\"\n\nint main(int,char**)\n{\n    A a{1};\n    int b = (int)a - 1;\n    return 0;\n}\n</code></pre>\n\n<p>GCC 4.8.5 inexplicably fails to link this code:</p>\n\n<pre><code>$ g++ -std=c++11 foo.cpp main.cpp\n/tmp/cc5osctA.o: In function `main':\nmain.cpp:(.text+0x1e): undefined reference to `A::operator int() const'\ncollect2: error: ld returned 1 exit status\n</code></pre>\n\n<p>However, if I use any version of GCC >= 5 (e.g. GCC 5.3.1 from RHEL's devtoolset-4 software collection), it works, as I'd expect it to:</p>\n\n<pre><code>$ scl enable devtoolset-4 \"g++ -std=c++11 foo.cpp main.cpp\"\n### (no linker errors, b == 0 when running)\n</code></pre>\n\n<hr>\n\n<p>Is this a bug in GCC 4.8.5's C++11 support? Or is my code malformed?</p>\n"}, {"tags": ["c++", "templates", "c++17", "fold-expression"], "answers": [{"comments": [{"owner": {"reputation": 1779, "user_id": 1065992, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/sWiDT.png?s=128&g=1", "display_name": "Blood-HaZaRd", "link": "https://stackoverflow.com/users/1065992/blood-hazard"}, "edited": false, "score": 0, "creation_date": 1549493824, "post_id": 54563823, "comment_id": 95926534, "body": "thank you, I did the parenthezis wrongly <code>(first + ... + rest)</code>"}], "tags": [], "owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "is_accepted": true, "score": 3, "last_activity_date": 1549493683, "creation_date": 1549493683, "answer_id": 54563823, "question_id": 54563789, "link": "https://stackoverflow.com/questions/54563789/can-i-use-a-fold-expression-in-this-example/54563823#54563823", "title": "Can I use a Fold Expression in this example", "body": "<p>I'm guessing you want to invoke <code>padFormat</code> on each argument and <em>then</em> concatenate. Thus, you must write</p>\n\n<pre><code>return (padFormat&lt;width&gt;(first) + ... + padFormat&lt;width&gt;(rest));\n</code></pre>\n\n<p>(The extra parentheses are required; a fold-expression must be enclosed in parentheses to be valid.)</p>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/ce7f2ac6aaa2cfdf\" rel=\"nofollow noreferrer\">Coliru link</a></p>\n"}], "owner": {"reputation": 1779, "user_id": 1065992, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/sWiDT.png?s=128&g=1", "display_name": "Blood-HaZaRd", "link": "https://stackoverflow.com/users/1065992/blood-hazard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "accepted_answer_id": 54563823, "answer_count": 1, "score": 1, "last_activity_date": 1549493687, "creation_date": 1549493470, "last_edit_date": 1549493687, "question_id": 54563789, "link": "https://stackoverflow.com/questions/54563789/can-i-use-a-fold-expression-in-this-example", "title": "Can I use a Fold Expression in this example", "body": "<p>I want to know if it is possible to use fold expression (and how to write  it) in the example below.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;type_traits&gt;\n#include &lt;typeinfo&gt;\n#include &lt;sstream&gt;\n#include &lt;iomanip&gt;\n\ntemplate&lt;int width&gt;\nstd::string padFormat()\n{\n    return \"\";\n}\n\ntemplate&lt;int width, typename T&gt;\nstd::string padFormat(const T&amp; t)\n{\n    std::ostringstream oss;\n    oss &lt;&lt; std::setw(width) &lt;&lt; t;\n    return oss.str();\n}\n\ntemplate&lt;int width, typename T, typename ... Types&gt;\nstd::string padFormat(const T&amp; first, Types ... rest)\n{\n    return (padFormat&lt;width&gt;(first + ... + rest)); //Fold expr here !!!\n}\n\nint main()\n{\n    std::cout &lt;&lt; padFormat&lt;8&gt;(\"one\", 2, 3.0) &lt;&lt; std::endl;\n    std::cout &lt;&lt; padFormat&lt;4&gt;('a', \"BBB\", 9u, -8) &lt;&lt; std::endl;\n    return 0;\n}\n</code></pre>\n\n<p>I tried so far but i did not figured it out !!</p>\n\n<p>Thank you. </p>\n"}, {"tags": ["c++", "function", "macros"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 3, "creation_date": 1549493363, "post_id": 54563743, "comment_id": 95926372, "body": "Why are you using a macro?  Just make <code>GET_PARAM</code> a function."}, {"owner": {"reputation": 299, "user_id": 4887854, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5f44408254b7e3d3bf717b2bda0d5d13?s=128&d=identicon&r=PG&f=1", "display_name": "Mohsen", "link": "https://stackoverflow.com/users/4887854/mohsen"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1549494131, "post_id": 54563743, "comment_id": 95926639, "body": "So you mean it&#39;s impossible? @NathanOliver"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1549495603, "post_id": 54563743, "comment_id": 95927077, "body": "It&#39;s not impossible, and it should work, we&#39;ll need a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> to tell you why it doesn&#39;t work.  Macros those aren&#39;t &quot;safe&quot;.  They exist outside the type system.  Using functions makes the code &quot;safer&quot;."}, {"owner": {"reputation": 299, "user_id": 4887854, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5f44408254b7e3d3bf717b2bda0d5d13?s=128&d=identicon&r=PG&f=1", "display_name": "Mohsen", "link": "https://stackoverflow.com/users/4887854/mohsen"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1549527378, "post_id": 54563743, "comment_id": 95935727, "body": "Thanks @NathanOliver, I&#39;ll use functions but I just wanted to know is it possible with macros or not"}], "answers": [{"comments": [{"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 1, "creation_date": 1549502213, "post_id": 54564949, "comment_id": 95928638, "body": "For the <code>errFunc</code> parameter, I was thinking it should be declared as <code>void (*errFunc)()</code> instead. <code>if (input == &quot;&quot;)</code> works just fine, though I would suggest <code>if (input.empty())</code> instead"}, {"owner": {"reputation": 3285, "user_id": 2961540, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/sECMV.jpg?s=128&g=1", "display_name": "HEKTO", "link": "https://stackoverflow.com/users/2961540/hekto"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 1, "creation_date": 1549503208, "post_id": 54564949, "comment_id": 95928843, "body": "@RemyLebeau - I agree about <code>void (*errFunc)()</code>, but that would be the C way. In C++ we can simplify this. I&#39;d actually write <code>using Func = void();</code> and then <code>string inputFormatted(Func errFunc)</code>"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 1, "creation_date": 1549504630, "post_id": 54564949, "comment_id": 95929134, "body": "I would probably just make the function take a templated callable object instead: <code>template&lt;class Callable&gt; string inputFormatted(Callable errHandler) { string input; cin &gt;&gt; input; if (input.empty()) errHandler(); return input; }</code> then it is not limited to just simple functions anymore, it is opened up to lambdas and functors as well."}], "tags": [], "owner": {"reputation": 3285, "user_id": 2961540, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/sECMV.jpg?s=128&g=1", "display_name": "HEKTO", "link": "https://stackoverflow.com/users/2961540/hekto"}, "is_accepted": true, "score": 1, "last_activity_date": 1549504041, "last_edit_date": 1549504041, "creation_date": 1549501868, "answer_id": 54564949, "question_id": 54563743, "link": "https://stackoverflow.com/questions/54563743/c-defining-a-macro-that-takes-a-function-and-pass-it-to-other-function-is-it/54564949#54564949", "title": "C++ defining a macro that takes a function and pass it to other function, is it possible?", "body": "<p>Your <code>inputFormatted</code> function signature must be:</p>\n\n<pre><code>string inputFormatted(void errFunc()) {\n</code></pre>\n"}], "owner": {"reputation": 299, "user_id": 4887854, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5f44408254b7e3d3bf717b2bda0d5d13?s=128&d=identicon&r=PG&f=1", "display_name": "Mohsen", "link": "https://stackoverflow.com/users/4887854/mohsen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 54564949, "answer_count": 1, "score": 0, "last_activity_date": 1549504041, "creation_date": 1549493233, "last_edit_date": 1549493400, "question_id": 54563743, "link": "https://stackoverflow.com/questions/54563743/c-defining-a-macro-that-takes-a-function-and-pass-it-to-other-function-is-it", "title": "C++ defining a macro that takes a function and pass it to other function, is it possible?", "body": "<p>I have a function like this :</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>string inputFormatted(void *errFunc()) {\n    string input;\n    cin &gt;&gt; input;\n    if (input == \"\") (*errFunc)();\n    return input;\n}\n</code></pre>\n\n<p>Which read a string, and shows a error if string was wrong</p>\n\n<p>My errFunc is implemented like this : </p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>void errBadKey() {\n    cout &lt;&lt; \"Enter a correct key, try HELP command for more information\" &lt;&lt; endl;\n}\n</code></pre>\n\n<p>I've implemented a macro in this way :</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#define GET_PARAM(input, errorFunc) do { \\\n                                        input = inputFormatted(errorFunc); \\\n                                    } while(0);\n</code></pre>\n\n<p>and I use it like this :</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>int main() {\n    string test;\n    GET_PARAM(test, errBadKey);\n}\n</code></pre>\n\n<p>and I'm wondering why it says <code>undefined reference to inputFormatted[abi:cxx11](void (*)())</code></p>\n\n<p>Is it impossible to pass a function to macro and then pass that function into other function in macro?</p>\n"}, {"tags": ["c++", "opencv", "inference-engine", "openvino"], "comments": [{"owner": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "edited": false, "score": 1, "creation_date": 1549532365, "post_id": 54563695, "comment_id": 95938348, "body": "afaik, it is possible to compile OpenCV with OpenVINO. Would this be an option? <a href=\"https://www.learnopencv.com/using-openvino-with-opencv/\" rel=\"nofollow noreferrer\">learnopencv.com/using-openvino-with-opencv</a>"}, {"owner": {"reputation": 165, "user_id": 3241752, "user_type": "registered", "profile_image": "https://graph.facebook.com/1191290192/picture?type=large", "display_name": "FrsECM", "link": "https://stackoverflow.com/users/3241752/frsecm"}, "reply_to_user": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "edited": false, "score": 0, "creation_date": 1549550427, "post_id": 54563695, "comment_id": 95949135, "body": "I already tried to change theses to option in my Opencv custom engine (that i didn&#39;t present here) :  net.setPreferableBackend(cv2.dnn.DNN_BACKEND_INFERENCE_ENGIN&zwnj;&#8203;E) net.setPreferableTarget(cv2.dnn.DNN_TARGET_CPU)  But it seems not to work unfortunately."}, {"owner": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "edited": false, "score": 1, "creation_date": 1549552215, "post_id": 54563695, "comment_id": 95950285, "body": "did you compile OpenCV with OpenVINO?"}, {"owner": {"reputation": 165, "user_id": 3241752, "user_type": "registered", "profile_image": "https://graph.facebook.com/1191290192/picture?type=large", "display_name": "FrsECM", "link": "https://stackoverflow.com/users/3241752/frsecm"}, "reply_to_user": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "edited": false, "score": 0, "creation_date": 1549562630, "post_id": 54563695, "comment_id": 95956412, "body": "Is there a flag in cmake in order to do this ? I didn&#39;t do any things like that. I&#39;ll try if it is possible"}, {"owner": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "edited": false, "score": 0, "creation_date": 1549569643, "post_id": 54563695, "comment_id": 95959724, "body": "never tried it mysrlf, I hope there is a manual/tutorial in the learnopencv link provided in my first comment"}, {"owner": {"reputation": 165, "user_id": 3241752, "user_type": "registered", "profile_image": "https://graph.facebook.com/1191290192/picture?type=large", "display_name": "FrsECM", "link": "https://stackoverflow.com/users/3241752/frsecm"}, "reply_to_user": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "edited": false, "score": 0, "creation_date": 1549620418, "post_id": 54563695, "comment_id": 95976373, "body": "I have issues with AVX2/512 support when i try to configure. I&#39;ll try to download and compile again opencv (i did it few monthes ago !. Thanks for the idea ! I&#39;ll keep you aware !"}, {"owner": {"reputation": 165, "user_id": 3241752, "user_type": "registered", "profile_image": "https://graph.facebook.com/1191290192/picture?type=large", "display_name": "FrsECM", "link": "https://stackoverflow.com/users/3241752/frsecm"}, "reply_to_user": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "edited": false, "score": 1, "creation_date": 1549715191, "post_id": 54563695, "comment_id": 96007572, "body": "@Micka I succeed to use OpenVINO through OpenCV with OpenCV 4.0.1 that is included in OpenVINO toolkit.  It uses different dll than dll i used before.. Maybe the reason i faced problem...  I don&#39;t know, and i won&#39;t dig more because processing time is now correct for what i want in the end (arround 2,5sec / frame on basic CPU).  Thanks !"}], "answers": [{"tags": [], "owner": {"reputation": 26, "user_id": 2460924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BpyUN.jpg?s=128&g=1", "display_name": "Dmitry", "link": "https://stackoverflow.com/users/2460924/dmitry"}, "is_accepted": false, "score": 0, "last_activity_date": 1555533257, "creation_date": 1555533257, "answer_id": 55735592, "question_id": 54563695, "link": "https://stackoverflow.com/questions/54563695/mask-rcnn-openvino-c-api/55735592#55735592", "title": "Mask RCNN OpenVino - C++ API", "body": "<p>First issue with version: look above printPluginVersion function, you will see overloaded std::ostream operators for InferenceEngine and plugin version info.</p>\n\n<p>Second: You can try to debug your model by comparing output after very first convolution and output layer for original framework and OV. Make sure it's equal element by element.</p>\n\n<p>In OV you can use network.addOutput(\"layer_name\") to add any layer to output. Then read output by using: const Blob::Ptr debug_blob = infer_request.GetBlob(\"layer_name\").</p>\n\n<p>Most of the time with issues like this i finding missing of input pre-processing (mean, normalization, etc.)</p>\n\n<p>cpu_extensions is a dynamic library, but you still can change cmake script to make it static and link it with your application. After that you would need to use your application path with call to IExtensionPtr extension_ptr = make_so_pointer(argv[0])</p>\n"}], "owner": {"reputation": 165, "user_id": 3241752, "user_type": "registered", "profile_image": "https://graph.facebook.com/1191290192/picture?type=large", "display_name": "FrsECM", "link": "https://stackoverflow.com/users/3241752/frsecm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1284, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1555533257, "creation_date": 1549493010, "last_edit_date": 1592644375, "question_id": 54563695, "link": "https://stackoverflow.com/questions/54563695/mask-rcnn-openvino-c-api", "title": "Mask RCNN OpenVino - C++ API", "body": "<p>I would like to implement a custom image classifier using MaskRCNN.</p>\n<p>In order to increase the speed of the network, i would like to optimise the inference.</p>\n<p>I already used OpenCV DNN library, but i would like to do a step forward with OpenVINO.</p>\n<p>I used successfully OpenVINO Model optimiser (python), to build the .xml and .bin file representing my network.</p>\n<p>I successfully builded OpenVINO Sample directory with Visual Studio 2017 and run MaskRCNNDemo project.</p>\n<pre><code>mask_rcnn_demo.exe -m .\\Release\\frozen_inference_graph.xml -i .\\Release\\input.jpg\n\nInferenceEngine:\n        API version ............ 1.4\n        Build .................. 19154\n[ INFO ] Parsing input parameters\n[ INFO ] Files were added: 1\n[ INFO ]     .\\Release\\input.jpg\n[ INFO ] Loading plugin\n\n        API version ............ 1.5\n        Build .................. win_20181005\n        Description ....... MKLDNNPlugin\n[ INFO ] Loading network files\n[ INFO ] Preparing input blobs\n[ WARNING ] Image is resized from (4288, 2848) to (800, 800)\n[ INFO ] Batch size is 1\n[ INFO ] Preparing output blobs\n[ INFO ] Loading model to the plugin\n[ INFO ] Start inference (1 iterations)\n\nAverage running time of one iteration: 2593.81 ms\n\n[ INFO ] Processing output blobs\n[ INFO ] Detected class 16 with probability 0.986519: [2043.3, 1104.9], [2412.87, 1436.52]\n[ INFO ] Image out.png created!\n[ INFO ] Execution successful\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/A7mzn.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/A7mzn.jpg\" alt=\"Oiseau VINO CPP\" /></a></p>\n<p>Then i tried to reproduce this project in a separate project...\nFirst i had to watch dependancies...</p>\n<pre><code>&lt;MaskRCNNDemo&gt;\n     //References\n     &lt;format_reader/&gt;    =&gt; Open CV Images, resize it and get uchar data\n     &lt;ie_cpu_extension/&gt; =&gt; CPU extension for un-managed layers (?)\n\n     //Linker\n     format_reader.lib         =&gt; Format Reader Lib (VINO Samples Compiled)\n     cpu_extension.lib         =&gt; CPU extension Lib (VINO Samples Compiled)\n     inference_engined.lib     =&gt; Inference Engine lib (VINO)\n     opencv_world401d.lib      =&gt; OpenCV Lib\n     libiomp5md.lib            =&gt; Dependancy\n     ... (other libs)\n</code></pre>\n<p>With it i've build a new project, with my own classes and way to open images (multiframe tiff).\nThis work without problem then i will not describe (i use with a CV DNN inference engine without problem).</p>\n<p>I wanted to build the same project than MaskRCNNDemo : CustomIA</p>\n<pre><code>&lt;CustomIA&gt;\n     //References\n     None =&gt; I use my own libtiff way to open image and i resize with OpenCV\n     None =&gt; I will just add include to cpu_extension source code.\n\n     //Linker\n     opencv_world345d.lib   =&gt; OpenCV 3.4.5 library\n     tiffd.lib              =&gt; Libtiff Library\n     cpu_extension.lib      =&gt; CPU extension compiled with sample\n     inference_engined.lib  =&gt; Inference engine lib.\n</code></pre>\n<p>I added the following dll to the project target dir :</p>\n<pre><code>cpu_extension.dll\ninference_engined.dll\nlibiomp5md.dll\nmkl_tiny_omp.dll\nMKLDNNPlugind.dll\nopencv_world345d.dll\ntiffd.dll\ntiffxxd.dll\n</code></pre>\n<p>I successfully compiled and execute but i faced two issues :</p>\n<p>OLD CODE:</p>\n<pre><code> slog::info &lt;&lt; &quot;Loading plugin&quot; &lt;&lt; slog::endl;\n    InferencePlugin plugin = PluginDispatcher({ FLAGS_pp, &quot;../../../lib/intel64&quot; , &quot;&quot; }).getPluginByDevice(FLAGS_d);\n\n    /** Loading default extensions **/\n    if (FLAGS_d.find(&quot;CPU&quot;) != std::string::npos) {\n        /**\n         * cpu_extensions library is compiled from &quot;extension&quot; folder containing\n         * custom MKLDNNPlugin layer implementations. These layers are not supported\n         * by mkldnn, but they can be useful for inferring custom topologies.\n        **/\n        plugin.AddExtension(std::make_shared&lt;Extensions::Cpu::CpuExtensions&gt;());\n    }\n    /** Printing plugin version **/\n    printPluginVersion(plugin, std::cout);\n</code></pre>\n<p><strong>OUTPUT :</strong></p>\n<pre><code>[ INFO ] Loading plugin\n    API version ............ 1.5\n    Build .................. win_20181005\n    Description ....... MKLDNNPlugin\n</code></pre>\n<p>NEW CODE:</p>\n<pre><code>    VINOEngine::VINOEngine()\n{\n    // Loading Plugin\n    std::cout &lt;&lt; std::endl;\n    std::cout &lt;&lt; &quot;[INFO] - Loading VINO Plugin...&quot; &lt;&lt; std::endl;\n    this-&gt;plugin= PluginDispatcher({ &quot;&quot;, &quot;../../../lib/intel64&quot; , &quot;&quot; }).getPluginByDevice(&quot;CPU&quot;);\n    this-&gt;plugin.AddExtension(std::make_shared&lt;Extensions::Cpu::CpuExtensions&gt;());\n    printPluginVersion(this-&gt;plugin, std::cout);\n</code></pre>\n<p><strong>OUTPUT :</strong></p>\n<pre><code>[INFO] - Loading VINO Plugin...\n000001A242280A18  // Like memory adress ???\n</code></pre>\n<p>Second Issue :</p>\n<p>When i try to extract my ROI and masks from New Code, if i have a &quot;match&quot;, i always have :</p>\n<ul>\n<li>score =1.0</li>\n<li>x1=x2=0.0</li>\n<li>y1=y2=1.0</li>\n</ul>\n<p>But the mask looks well extracted...</p>\n<p>New Code :</p>\n<pre><code>        float score = box_info[2];\n        if (score &gt; this-&gt;Conf_Threshold)\n        {\n            // On reconstruit les coordonn\u00e9es de la box..\n            float x1 = std::min(std::max(0.0f, box_info[3] * Image.cols), static_cast&lt;float&gt;(Image.cols));\n            float y1 = std::min(std::max(0.0f, box_info[4] * Image.rows), static_cast&lt;float&gt;(Image.rows));\n            float x2 = std::min(std::max(0.0f, box_info[5] * Image.cols), static_cast&lt;float&gt;(Image.cols));\n            float y2 = std::min(std::max(0.0f, box_info[6] * Image.rows), static_cast&lt;float&gt;(Image.rows));\n            int box_width = std::min(static_cast&lt;int&gt;(std::max(0.0f, x2 - x1)), Image.cols);\n            int box_height = std::min(static_cast&lt;int&gt;(std::max(0.0f, y2 - y1)), Image.rows);\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/bWjSx.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/bWjSx.jpg\" alt=\"Vino Mask\" /></a></p>\n<pre><code>Image is resized from (4288, 2848) to (800, 800)\nDetected class 62 with probability 1: [4288, 0], [4288, 0]\n</code></pre>\n<p>Then it is impossible for me to place the mask in the image and resize it while i don't have correct bbox coordinate...</p>\n<p>Do anybody have an idea about what i make badly ?</p>\n<p>How to create and link correctly an OpenVINO project using cpu_extension ?</p>\n<p>Thanks !</p>\n"}, {"tags": ["c++", "preprocessor"], "comments": [{"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 1, "creation_date": 1549491408, "post_id": 54563381, "comment_id": 95925691, "body": "I would not use an absolute path. Instead use a relative path and set your include folders for your compiler."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 1, "creation_date": 1549491488, "post_id": 54563381, "comment_id": 95925720, "body": "&quot; Is there any way to do this with preprocessor directives in C++?&quot; - no. You need to do such checks using your build system - make, or whatever."}, {"owner": {"reputation": 36166, "user_id": 393701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/250889c646cd2a916920d9252f7c6f42?s=128&d=identicon&r=PG", "display_name": "SirDarius", "link": "https://stackoverflow.com/users/393701/sirdarius"}, "edited": false, "score": 1, "creation_date": 1549491524, "post_id": 54563381, "comment_id": 95925738, "body": "As a rule, you should not use absolute paths in include statements. Your compiler, whatever it is, accepts flags that tell it where it should look for include files, eg. <code>g++ -o program -I&#47;usr&#47;local&#47;cuda&#47;include program.cpp</code>."}], "answers": [{"comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1549491628, "post_id": 54563446, "comment_id": 95925771, "body": "And you shouldn&#39;t be using absolute paths at all. At all. Have the build system and surrounding include paths do it. That&#39;s an environment issue."}], "tags": [], "owner": {"reputation": 8856, "user_id": 4442671, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh4.googleusercontent.com/-nSzcZygTwLs/AAAAAAAAAAI/AAAAAAAAADA/virGKG3deIo/photo.jpg?sz=128", "display_name": "Frank", "link": "https://stackoverflow.com/users/4442671/frank"}, "is_accepted": false, "score": -1, "last_activity_date": 1549491632, "last_edit_date": 1549491632, "creation_date": 1549491552, "answer_id": 54563446, "question_id": 54563381, "link": "https://stackoverflow.com/questions/54563381/conditionally-include-file-in-c-header/54563446#54563446", "title": "Conditionally Include File in C++ Header", "body": "<p>The best way to do this is to define a macro that drives whether the file gets included or not:</p>\n\n<pre><code>#if defined(USE_CUDA_NVML)\n#include \"/usr/local/cuda/include/nvml.h\"\n#else\n#include \"C:/Users/thisUser/nvml.h\"\n#endif\n</code></pre>\n\n<p>Then, users can opt-in to the conditional feature by defining that flag:</p>\n\n<pre><code>gcc -DUSE_CUDA_NVML main.cpp\n</code></pre>\n\n<p><strong>Edit:</strong> As commenters have mentionned, absolute paths are to be avoided in general. I just kept them in there in order to answer the question as OP asked it, which is a separate matter.</p>\n"}, {"tags": [], "owner": {"reputation": 540, "user_id": 1329542, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24431864b28597f0e604c5db3f5f0547?s=128&d=identicon&r=PG", "display_name": "Morten", "link": "https://stackoverflow.com/users/1329542/morten"}, "is_accepted": false, "score": 2, "last_activity_date": 1549491840, "creation_date": 1549491840, "answer_id": 54563500, "question_id": 54563381, "link": "https://stackoverflow.com/questions/54563381/conditionally-include-file-in-c-header/54563500#54563500", "title": "Conditionally Include File in C++ Header", "body": "<p>You should just do</p>\n\n<pre><code>#include \"nvml.h\"\n</code></pre>\n\n<p>set the include path while compiling depending on platform:</p>\n\n<pre><code>g++ -I/usr/local/cuda/include ...\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": false, "score": 4, "last_activity_date": 1549492175, "last_edit_date": 1549492175, "creation_date": 1549491871, "answer_id": 54563508, "question_id": 54563381, "link": "https://stackoverflow.com/questions/54563381/conditionally-include-file-in-c-header/54563508#54563508", "title": "Conditionally Include File in C++ Header", "body": "<blockquote>\n  <p>But I cannot think of a method by which I can use the IF/DEF structure to check for file existence. Is there any way to do this with preprocessor directives in C++?</p>\n</blockquote>\n\n<p>Since C++17, there is the macro <code>__has_include</code> which does exactly this.</p>\n\n<p>Prior to C++17, there was no such directive in the standard, although may have been supported as an extension. A compiler may support command line argument to provide macro definitions, which can be utilised to forward the result of a check for existence prior to compilation.</p>\n\n<hr>\n\n<p>That said, for your particular case, it might be better to simply include <code>&lt;nvml.h&gt;</code> and add the parent directory to include path. See the manual of your compiler for details - or use a build system to take care of it.</p>\n"}, {"tags": [], "owner": {"reputation": 3295, "user_id": 4743275, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/7f8p3.jpg?s=128&g=1", "display_name": "KeyC0de", "link": "https://stackoverflow.com/users/4743275/keyc0de"}, "is_accepted": false, "score": 0, "last_activity_date": 1610913936, "creation_date": 1610913936, "answer_id": 65765392, "question_id": 54563381, "link": "https://stackoverflow.com/questions/54563381/conditionally-include-file-in-c-header/65765392#65765392", "title": "Conditionally Include File in C++ Header", "body": "<p>C++17 simplifies this a bit with <code>__has_include</code> which provides the ability to conditionally <code>#include</code> a file only if the file is found in the system.</p>\n<pre><code>#if __has_include( &lt;optional&gt; )\n#   include &lt;optional&gt;\n#elif __has_include( &lt;experimental/optional&gt; )\n#   include &lt;experimental/optional&gt;\n#else\n//\n#endif\n</code></pre>\n"}], "owner": {"reputation": 49, "user_id": 10548632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pMRNx.jpg?s=128&g=1", "display_name": "Mister David", "link": "https://stackoverflow.com/users/10548632/mister-david"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1509, "favorite_count": 0, "answer_count": 4, "score": 0, "last_activity_date": 1610913936, "creation_date": 1549491232, "last_edit_date": 1549491252, "question_id": 54563381, "link": "https://stackoverflow.com/questions/54563381/conditionally-include-file-in-c-header", "title": "Conditionally Include File in C++ Header", "body": "<p>I have a program that references an \"nvml.h\" file  in order to execute some portion of the code.  On my Linux machine, this is accomplished by including the following line in the header file:</p>\n\n<pre><code>#include \"/usr/local/cuda/include/nvml.h\"\n</code></pre>\n\n<p>However, I want the user to be able to run the program even if this file does not exist on their system.  I have rendered the program modular so this can be accomplished, but I still need some method by which I can check if the file exists at all and, if not, abstain from including it in my header file.</p>\n\n<p>I have tried an IF/DEF statement in order to get it working on both Windows and Linux:</p>\n\n<pre><code>#if defined(Q_OS_UNIX)\n#include \"usr/local/cuda/include/nvml.h\"\n#else\n#include \"C:/Users/thisUser/nvml.h\"\n</code></pre>\n\n<p>But I cannot think of a method by which I can use the IF/DEF structure to check for file existence.  Is there any way to do this with preprocessor directives in C++?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 8856, "user_id": 4442671, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh4.googleusercontent.com/-nSzcZygTwLs/AAAAAAAAAAI/AAAAAAAAADA/virGKG3deIo/photo.jpg?sz=128", "display_name": "Frank", "link": "https://stackoverflow.com/users/4442671/frank"}, "edited": false, "score": 2, "creation_date": 1549492151, "post_id": 54563370, "comment_id": 95925951, "body": "An immediate gotcha is a O(N) lookup complexity, which is pretty bad for a map."}, {"owner": {"reputation": 1839, "user_id": 4019986, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/G2kFd.jpg?s=128&g=1", "display_name": "NanoWizard", "link": "https://stackoverflow.com/users/4019986/nanowizard"}, "reply_to_user": {"reputation": 8856, "user_id": 4442671, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh4.googleusercontent.com/-nSzcZygTwLs/AAAAAAAAAAI/AAAAAAAAADA/virGKG3deIo/photo.jpg?sz=128", "display_name": "Frank", "link": "https://stackoverflow.com/users/4442671/frank"}, "edited": false, "score": 0, "creation_date": 1549498527, "post_id": 54563370, "comment_id": 95927876, "body": "@Frank indeed. I shouldn&#39;t have called it a map because it isn&#39;t really a map. It&#39;s a function to search an array. I naively followed the naming conventions of the linked SO post. I&#39;ll edit the question to correct this mistake."}], "answers": [{"comments": [{"owner": {"reputation": 1839, "user_id": 4019986, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/G2kFd.jpg?s=128&g=1", "display_name": "NanoWizard", "link": "https://stackoverflow.com/users/4019986/nanowizard"}, "edited": false, "score": 0, "creation_date": 1549498317, "post_id": 54563657, "comment_id": 95927815, "body": "That&#39;s a good point in your comparison with <code>std::unordered_map</code> and <code>std::map</code>. I suppose calling it <code>myMap</code> is misleading because it&#39;s not really a map, it&#39;s a constexpr array. Thank you, your answer is very helpful!"}], "tags": [], "owner": {"reputation": 15724, "user_id": 5754656, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/7jfX3.png?s=128&g=1", "display_name": "Artyer", "link": "https://stackoverflow.com/users/5754656/artyer"}, "is_accepted": true, "score": 2, "last_activity_date": 1549492841, "creation_date": 1549492841, "answer_id": 54563657, "question_id": 54563370, "link": "https://stackoverflow.com/questions/54563370/c-constexpr-array-lookup-memory-overhead-other-gotchas/54563657#54563657", "title": "C++ constexpr array lookup: memory overhead? Other gotchas?", "body": "<p>If you call a constexpr function with a non-constant expression, it will call the function at run time.</p>\n\n<p>If you call <code>getStruct</code> with a constant expression, the compiler can just call the function at compile time. Then, the <code>getStruct</code> function will be \"unused\" at runtime, and the compiler will probably optimise it out. At this point, <code>myMap</code> will also be unused, and be optimised out.</p>\n\n<p>In terms of runtime size, it would actually probably be smaller than an <code>std::unordered_map</code> or <code>std::map</code>; It literally stores the minimum information necessary. But it's lookup time would be a lot slower, as it has to compare all the elements individually in O(N) time, so it doesn't actually do what a map does (reduce lookup time).</p>\n\n<p>If you want to make it more likely that it is optimised out, I would ensure that it is only used in constant-expression situations:</p>\n\n<pre><code>template&lt;MyEnum key&gt;\nstruct getStruct\n{\n    static constexpr const MyStruct value = _getStruct(key);\n}\n</code></pre>\n\n<p><a href=\"https://godbolt.org/z/5FKoY5\" rel=\"nofollow noreferrer\">Here's some compiler output that shows that the map is optimised out entirely</a></p>\n\n<p>And about including it in multiple translation units, it would be duplicated in every one since you use an anonymous namespace to define it. If it was optimised out in all of them, there would be no overhead, but it would still be duplicated for every translation unit that you do a runtime lookup in.</p>\n"}], "owner": {"reputation": 1839, "user_id": 4019986, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/G2kFd.jpg?s=128&g=1", "display_name": "NanoWizard", "link": "https://stackoverflow.com/users/4019986/nanowizard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 358, "favorite_count": 0, "accepted_answer_id": 54563657, "answer_count": 1, "score": -1, "last_activity_date": 1549498751, "creation_date": 1549491158, "last_edit_date": 1549498751, "question_id": 54563370, "link": "https://stackoverflow.com/questions/54563370/c-constexpr-array-lookup-memory-overhead-other-gotchas", "title": "C++ constexpr array lookup: memory overhead? Other gotchas?", "body": "<p>I've implemented a constexpr <strike>map</strike> array lookup based on <a href=\"https://stackoverflow.com/a/26079954/4019986\">this SO answer</a>, but it leaves me wondering now what the memory overhead might be like if the <strike>map</strike> array is very large, and what other gotchas might exist with this technique, particularly if the constexpr function cannot be resolved at compile time.</p>\n\n<p>Here is a contrived code example that hopefully makes my question more clear:</p>\n\n<h3>example.h:</h3>\n\n<pre><code>enum class MyEnum\n{\n  X0,\n  X1,\n  X2,\n  X3,\n  X4,\n  X5\n};\n\nstruct MyStruct\n{\n  const MyEnum type;\n  const char* id;\n  const char* name;\n  const int size;\n};\n\nnamespace\n{\n  constexpr MyStruct myMap[] = {\n    {MyEnum::X0,\"X0\",\"Test 0\", 0},\n    {MyEnum::X1,\"X1\",\"Test 1\", 1},\n    {MyEnum::X2,\"X2\",\"Test 2\", 2},\n    {MyEnum::X3,\"X3\",\"Test 3\", 3},\n    {MyEnum::X4,\"X4\",\"Test 4\", 4},\n    {MyEnum::X5,\"X5\",\"Test 5\", 5},\n  };\n\n  constexpr auto mapSize = sizeof myMap/sizeof myMap[0];\n}\n\nclass invalid_map_exception : public std::exception {};\n\n// Retrieves a struct based on the associated enum\ninline constexpr MyStruct getStruct(MyEnum key, int range = mapSize) {\n  return  (range == 0) ? (throw invalid_map_exception()):\n          (myMap[range - 1].type == key) ? myMap[range - 1]:\n          getStruct(key, range - 1);\n};\n</code></pre>\n\n<h3>example.cpp:</h3>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include \"example.h\"\n\nint main()\n{\n  std::vector&lt;MyEnum&gt; enumList = {MyEnum::X0, MyEnum::X1, MyEnum::X2, MyEnum::X3, MyEnum::X4, MyEnum::X5};\n  int idx;\n\n  std::cout &lt;&lt; \"Enter a number between 0 and 5:\" &lt;&lt; std::endl;\n  std::cin &gt;&gt; idx;\n\n  MyStruct test = getStruct(enumList[idx]);\n\n  std::cout &lt;&lt; \"choice name: \" &lt;&lt; test.name &lt;&lt; std::endl;\n\n  return 0;\n}\n</code></pre>\n\n<h3>Output:</h3>\n\n<pre><code>Enter a number between 0 and 5:\n1\nchoice name: Test 1\n</code></pre>\n\n<p>Compiled with <code>g++</code> with <code>-std=c++14</code>.</p>\n\n<p>In the above example, although <code>getStruct</code> is a constexpr function, it cannot be fully resolved until runtime since the value of <code>idx</code> is not known until then. May that change the memory overhead when compiled with optimization flags, or would the full contents of <code>myMap</code> be included in the binary regardless? Does it depend on the compiler and optimization setting used?</p>\n\n<p>Also, what if the header file is included in multiple translation units? Would <code>myMap</code> be duplicated in each one?</p>\n\n<p>I imagine this could be important if the <strike>map</strike> array becomes enormous and/or the code is going to be used in more resource constrained environments such as embedded devices.</p>\n\n<p>Are there any other potential gotchas with this approach?</p>\n"}, {"tags": ["c++", "c", "linux", "windows", "stack-overflow"], "comments": [{"owner": {"reputation": 67968, "user_id": 584192, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YBSIc.png?s=128&g=1", "display_name": "Samuel Liew", "link": "https://stackoverflow.com/users/584192/samuel-liew"}, "edited": false, "score": 0, "creation_date": 1549545152, "post_id": 54563208, "comment_id": 95946026, "body": "Comments are not for extended discussion; this conversation has been <a href=\"https://chat.stackoverflow.com/rooms/188055/discussion-on-question-by-scorpio11550-my-program-crashes-on-the-windows-machine\">moved to chat</a>."}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 10542737, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kmhlN.jpg?s=128&g=1", "display_name": "scorpio11550", "link": "https://stackoverflow.com/users/10542737/scorpio11550"}, "edited": false, "score": 0, "creation_date": 1549494135, "post_id": 54563708, "comment_id": 95926640, "body": "Thanks for the answer, I&#39;m not going to risk it though. I use simpler IDEs like Code::Blocks and Dev C++ because Visual Studio is something &quot;out of my league&quot;. I just don&#39;t believe in myself enough to start using it.   Now I understand the problem little bit more, sadly, as I&#39;m new here, my upvote doesn&#39;t show.  I just don&#39;t understand why I have &quot;so small stack&quot; compared to Linux terminal :-/"}], "tags": [], "owner": {"reputation": 864, "user_id": 10913596, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1cf12cce6499d0cf89a03500f0808ab?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/10913596/daniel"}, "is_accepted": false, "score": 2, "last_activity_date": 1549493080, "creation_date": 1549493080, "answer_id": 54563708, "question_id": 54563208, "link": "https://stackoverflow.com/questions/54563208/my-program-crashes-on-the-windows-machine-yet-it-works-fine-on-the-linux/54563708#54563708", "title": "My program crashes on the Windows machine yet it works fine on the Linux", "body": "<p>Sounds like it's stack smashing, or more accurately a <a href=\"https://en.wikipedia.org/wiki/Stack_buffer_overflow\" rel=\"nofollow noreferrer\">stack buffer overflow</a>, which is the error message you got. The function has a very large depth, and will keep on pushing variables on the stack. If you push enough variables onto the stack, it'll smash. The computer doesn't have infinite memory for the stack and from the sounds of it, not a crazy amount either.</p>\n\n<p>Given big enough input, it should stack any smash if not optimized well (and might still anyways). Without knowing more about your compiler, there can't be a comprehensive option on how to disable it, but if you're using Microsoft Visual Studio's compiler suite, you can disable the protection <a href=\"https://docs.microsoft.com/en-us/cpp/build/reference/gs-buffer-security-check?view=vs-2017\" rel=\"nofollow noreferrer\">if I understand this doc correctly</a>.</p>\n\n<ol>\n<li>In Solution Explorer, right-click the project and then click Properties  </li>\n<li>In the Property Pages dialog box, click the C/C++ folder.</li>\n<li>Click the Code Generation property page.</li>\n<li>Modify the Buffer Security Check property.</li>\n</ol>\n\n<p>As a warning, <strong>this is not safe</strong> and bad things can happen, so use this at your own risk. </p>\n"}, {"comments": [{"owner": {"reputation": 2653, "user_id": 3515931, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4c0edddc6a265a0a22058bb2343328d?s=128&d=identicon&r=PG&f=1", "display_name": "JohnH", "link": "https://stackoverflow.com/users/3515931/johnh"}, "reply_to_user": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 0, "creation_date": 1549562008, "post_id": 54564620, "comment_id": 95956133, "body": "@TedLyngmo I amended my comment.  The issue still appears to exist, unless using a compiler other than MSVC with a bigger default program stack limit on windows."}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 0, "creation_date": 1549562419, "post_id": 54564620, "comment_id": 95956309, "body": "Yes, it&#39;s surely exceeding the stack limit in some environments. 65536(!) is pretty deep."}], "tags": [], "owner": {"reputation": 2653, "user_id": 3515931, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4c0edddc6a265a0a22058bb2343328d?s=128&d=identicon&r=PG&f=1", "display_name": "JohnH", "link": "https://stackoverflow.com/users/3515931/johnh"}, "is_accepted": true, "score": 1, "last_activity_date": 1549562105, "last_edit_date": 1549562105, "creation_date": 1549499104, "answer_id": 54564620, "question_id": 54563208, "link": "https://stackoverflow.com/questions/54563208/my-program-crashes-on-the-windows-machine-yet-it-works-fine-on-the-linux/54564620#54564620", "title": "My program crashes on the Windows machine yet it works fine on the Linux", "body": "<p>In Visual Studio the default stack size is 1 MB, so with a recursion depth of 65535, and, I believe, a minimum stack frame for caller/function on x64 of this type is 72 bytes, so you will run out of available stack frame space for your program ( I compute almost 4.5Mb of stack needed for this scenario). This also produced the stack buffer overflow error, and has nothing to do with stack smashing other than you went beyond the maximum stack size available to your program when compiled.</p>\n\n<p>Most compilers including Visual Studio let you specify the stack size.</p>\n\n<p>More details:\n<a href=\"https://docs.microsoft.com/en-us/cpp/build/reference/f-set-stack-size?view=vs-2017\" rel=\"nofollow noreferrer\">https://docs.microsoft.com/en-us/cpp/build/reference/f-set-stack-size?view=vs-2017</a></p>\n\n<p>[ Edited to reflect 65,535 frames, and not 1.4 billion ]</p>\n"}], "owner": {"reputation": 23, "user_id": 10542737, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kmhlN.jpg?s=128&g=1", "display_name": "scorpio11550", "link": "https://stackoverflow.com/users/10542737/scorpio11550"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 201, "favorite_count": 0, "accepted_answer_id": 54564620, "answer_count": 2, "score": 1, "last_activity_date": 1549562105, "creation_date": 1549490356, "last_edit_date": 1549490956, "question_id": 54563208, "link": "https://stackoverflow.com/questions/54563208/my-program-crashes-on-the-windows-machine-yet-it-works-fine-on-the-linux", "title": "My program crashes on the Windows machine yet it works fine on the Linux", "body": "<p>I tried to program Ackermann function on my notebook (Win10), however the program crashed at higher values instead of continuing to calculate for a few minutes or hours.</p>\n\n<p>My friend tried the same code on his machine (SUSE) and it worked just fine, then we tried it on the school server (CentOS) and it crashed yet again.</p>\n\n<p>EDIT: It worked on server too, it just needed a second try. It also worked on the other server we had tried... All of it is on Linux.</p>\n\n<p>We suspect the stack overflow is behind it but it's weird, because values aren't THAT HIGH yet. How am I able to preform recursive functions on this system then?</p>\n\n<p>Thanks for all the answers. I'm just curious why it happens and how to make it work on my machine.</p>\n\n<p>I tried to use both C and C++ to no change.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint ackermann (int m, int n);\n\nint main () {\n\n  int m = 4;\n  int n = 1;\n\n  return ackermann(m,n);\n}\n\nint ackermann (int m, int n)\n{\n  if      (m == 0)          return n=n+1;\n  else if (m &gt; 0 &amp;&amp; n == 0) return ackermann(m-1,1);\n  else if (m &gt; 0 &amp;&amp; n &gt; 0)  return ackermann(m-1,ackermann(m,n - 1));\n}\n</code></pre>\n"}, {"tags": ["c++", "opengl", "glsl"], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 8970235, "user_type": "registered", "profile_image": "https://graph.facebook.com/1948429065186030/picture?type=large", "display_name": "Mat\u011bj Vrba", "link": "https://stackoverflow.com/users/8970235/mat%c4%9bj-vrba"}, "edited": false, "score": 0, "creation_date": 1549547394, "post_id": 54563376, "comment_id": 95947293, "body": "I think that its something in my shader, i will have to read it for 20th time"}, {"owner": {"reputation": 138010, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "reply_to_user": {"reputation": 21, "user_id": 8970235, "user_type": "registered", "profile_image": "https://graph.facebook.com/1948429065186030/picture?type=large", "display_name": "Mat\u011bj Vrba", "link": "https://stackoverflow.com/users/8970235/mat%c4%9bj-vrba"}, "edited": false, "score": 0, "creation_date": 1549547886, "post_id": 54563376, "comment_id": 95947598, "body": "@Mat\u011bjVrba No. If you don&#39;t see anything, then the data which are passed to the shader are probably wrong. Either the vertex attributes or the uniforms. A common mistake is, that the transformation matrices are not proper set or that the geometry is clipped by the near or far plane."}], "tags": [], "owner": {"reputation": 138010, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "is_accepted": true, "score": 0, "last_activity_date": 1549491190, "creation_date": 1549491190, "answer_id": 54563376, "question_id": 54563200, "link": "https://stackoverflow.com/questions/54563200/glsl-shader-not-rendering-anything-vao-is-filled-vbo-filled-with-vertices/54563376#54563376", "title": "GLSL Shader not rendering anything, VAO is filled, VBO filled with vertices", "body": "<p>If a non-zero named array buffer object is bound, then the last parameter of <a href=\"https://www.khronos.org/registry/OpenGL-Refpages/gl4/html/glVertexAttribPointer.xhtml\" rel=\"nofollow noreferrer\"><code>glVertexAttribPointer</code></a> is treated as a byte offset into the buffer object's data store.\nThe definition of the generic vertex attribute data and the referenced buffer is stated in the <a href=\"https://www.khronos.org/opengl/wiki/Vertex_Specification#Vertex_Array_Object\" rel=\"nofollow noreferrer\">Vertex Array Object</a>.</p>\n\n<p>It is not sufficient to generate a buffer object, the array buffer object has to be the currently bound buffer object, when using <code>glVertexAttribPointer</code>:   </p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>glGenVertexArrays(1, &amp;playerVAO);\nglGenBuffers(1, &amp;playerVBO);\n\nglBindVertexArray(playerVAO);\n\nglEnableVertexAttribArray(0);\nglEnableVertexAttribArray(1);\nglEnableVertexAttribArray(2);\nglEnableVertexAttribArray(3);\n\nglBindBuffer(GL_ARRAY_BUFFER, playerVBO); // &lt;--- bind the buffer object\n\nglVertexAttribPointer(0, 2, GL_FLOAT, GL_FALSE, 10 * sizeof(float), (void*)0);\nglVertexAttribPointer(1, 2, GL_FLOAT, GL_FALSE, 10 * sizeof(float), (void*)(2 * sizeof(float)));\nglVertexAttribPointer(2, 4, GL_FLOAT, GL_FALSE, 10 * sizeof(float), (void*)(4 * sizeof(float)));\nglVertexAttribPointer(3, 2, GL_FLOAT, GL_FALSE, 10 * sizeof(float), (void*)(8 * sizeof(float)));\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 8970235, "user_type": "registered", "profile_image": "https://graph.facebook.com/1948429065186030/picture?type=large", "display_name": "Mat\u011bj Vrba", "link": "https://stackoverflow.com/users/8970235/mat%c4%9bj-vrba"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "accepted_answer_id": 54563376, "answer_count": 1, "score": 0, "last_activity_date": 1549491190, "creation_date": 1549490335, "question_id": 54563200, "link": "https://stackoverflow.com/questions/54563200/glsl-shader-not-rendering-anything-vao-is-filled-vbo-filled-with-vertices", "title": "GLSL Shader not rendering anything, VAO is filled, VBO filled with vertices", "body": "<p>I have filled VBO with my vertices (2x position, 2x size, 4x uv, 2x texture data(1 float sets correct texture array and 2. sets index of texture in array), still not rendering, what am i missing?</p>\n\n<p>I tried setting geometry shader to render simple quad, nothing showed up, i tried just rendering color in fragment, nothing showed up, I checked OPENGL debug message, nothing there, in vertex shader i checked calculation for my matrix, everything should be fine</p>\n\n<p>Data is being loaded every frame using glBufferData to same buffer, because of resizing, this code is for entities and amount of them on screen can change easily.</p>\n\n<p>Fragment shader:</p>\n\n<pre><code>void main()\n{\n    texColor = vec4(1.0,0.0,0.0,1.0); //Red fillment\n    FragColor = texColor;\n}\n</code></pre>\n\n<p>Vertex shader: </p>\n\n<p>layout:</p>\n\n<pre><code>layout(location = 0) in vec2 position;\nlayout(location = 1) in vec2 size;\nlayout(location = 2) in vec4 uv;\nlayout(location = 3) in vec2 textureData; //1. data is to pick correct atlas, 2. is index of texture in atlas\n</code></pre>\n\n<p>interface:</p>\n\n<pre><code>out VS_OUT\n{\n    mat4 screenMatrix;\n    vec2 position;\n    vec4 uv;\n    vec2 textureData;\n    vec2 size;\n} vs_out;\n</code></pre>\n\n<p>matrix:</p>\n\n<pre><code>mat4 screenMatrix = mat4((2.0/screenRatio.x),0.0,0.0,0.0,0.0,(2.0/screenRatio.y),0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,1.0);\n</code></pre>\n\n<p>Geometry Shader:</p>\n\n<p>Layout:</p>\n\n<pre><code>layout (points) in;\nlayout(triangle_strip,max_vertices = 4) out;\n</code></pre>\n\n<p>out:</p>\n\n<pre><code>out vec2 TexData;\nout vec2 TexCoord;\n</code></pre>\n\n<p>code:</p>\n\n<pre><code>void renderPlayer(mat4 screenMatrix, vec4 position,vec2 textureData,vec2 size,vec4 uv)\n{\n    gl_Position = nullPos+((position+vec4(0.0,0.0,0.0,0.0))*screenMatrix); // 1:bottom-left\n    TexData = textureData;\n    TexCoord = vec2(uv.xy);\n    EmitVertex();\n    gl_Position = nullPos+((position+vec4(size.x,0.0,0.0,0.0))*screenMatrix); // 2:bottom-right\n    TexData = textureData;\n    TexCoord = vec2(uv.zy);\n    EmitVertex();\n    gl_Position = nullPos+((position+vec4(0.0,size.y,0.0,0.0))*screenMatrix); // 3:top-left\n    TexData = textureData;\n    TexCoord = vec2(uv.xw);\n    EmitVertex();\n    gl_Position = nullPos+((position+vec4(size.x,size.y,0.0,0.0))*screenMatrix);  // 4:top-right \n    TexData = textureData;\n    TexCoord = vec2(uv.zw);\n    EmitVertex();\n    EndPrimitive();\n}\n</code></pre>\n\n<p>main:</p>\n\n<pre><code>void main() {    \n    renderPlayer(gs_in[0].screenMatrix,vec4(gs_in[0].position,0.0,0.0),gs_in[0].textureData,gs_in[0].size,gs_in[0].uv);\n}  \n</code></pre>\n\n<p>C++ code:</p>\n\n<p>VBO data inicialization:</p>\n\n<pre><code>float* vertices = new float[totalVertices];\n    for (EntityRenderData renderDataCurrent : renderData)\n    {\n        for (int layerI = 0; layerI &lt; renderDataCurrent.getLayerCount(); layerI++)\n        {\n            int i = 0;\n            vertices[layerI * 10 + i++] = renderDataCurrent.getLayer(layerI).xPos;\n            vertices[layerI * 10 + i++] = renderDataCurrent.getLayer(layerI).yPos;\n            vertices[layerI * 10 + i++] = renderDataCurrent.getLayer(layerI).xSize;\n            vertices[layerI * 10 + i++] = renderDataCurrent.getLayer(layerI).ySize;\n            vertices[layerI * 10 + i++] = renderDataCurrent.getLayer(layerI).U0;\n            vertices[layerI * 10 + i++] = renderDataCurrent.getLayer(layerI).V0;\n            vertices[layerI * 10 + i++] = renderDataCurrent.getLayer(layerI).U1;\n            vertices[layerI * 10 + i++] = renderDataCurrent.getLayer(layerI).V1;\n            vertices[layerI * 10 + i++] = (float)renderDataCurrent.getLayer(layerI).textureAtlasId;\n            vertices[layerI * 10 + i++] = (float)renderDataCurrent.getLayer(layerI).textureIndex;\n            drawCount++;\n        }\n    }\n</code></pre>\n\n<p>Render Part:</p>\n\n<pre><code>    glBindVertexArray(playerVAO);\n    glBindBuffer(GL_ARRAY_BUFFER, playerVBO);\n    glBufferData(GL_ARRAY_BUFFER, totalVertices * sizeof(float), vertices, GL_STREAM_DRAW);\n    game-&gt;renderer-&gt;entityShader-&gt;use();\n    glDrawArrays(GL_POINTS, 0, drawCount);\n</code></pre>\n\n<p>Inicialization Part:</p>\n\n<pre><code>glGenVertexArrays(1, &amp;playerVAO);\n    glGenBuffers(1, &amp;playerVBO);\n\n    glBindVertexArray(playerVAO);\n    // position\n    glVertexAttribPointer(0, 2, GL_FLOAT, GL_FALSE, 10 * sizeof(float), (void*)0);\n    glEnableVertexAttribArray(0);\n    // size\n    glVertexAttribPointer(1, 2, GL_FLOAT, GL_FALSE, 10 * sizeof(float), (void*)(2 * sizeof(float)));\n    glEnableVertexAttribArray(1);\n    // uv\n    glVertexAttribPointer(2, 4, GL_FLOAT, GL_FALSE, 10 * sizeof(float), (void*)(4 * sizeof(float)));\nglEnableVertexAttribArray(2);\n    // texture data\n    glVertexAttribPointer(3, 2, GL_FLOAT, GL_FALSE, 10 * sizeof(float), (void*)(8 * sizeof(float)));\n    glEnableVertexAttribArray(3);\n</code></pre>\n"}, {"tags": ["c++", "class", "templates", "assignment-operator"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 1, "creation_date": 1549490246, "post_id": 54563138, "comment_id": 95925260, "body": "Apart from anything else: <a href=\"https://stackoverflow.com/questions/495021/why-can-templates-only-be-implemented-in-the-header-file\" title=\"why can templates only be implemented in the header file\">stackoverflow.com/questions/495021/&hellip;</a>"}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 0, "creation_date": 1549490419, "post_id": 54563138, "comment_id": 95925324, "body": "... and <code>operator=</code> should return a <code>DynamicArray&lt;T&gt;&amp;</code>."}, {"owner": {"reputation": 12749, "user_id": 7976805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92a559df8b4b287aad23724b4c66d67c?s=128&d=identicon&r=PG&f=1", "display_name": "Yksisarvinen", "link": "https://stackoverflow.com/users/7976805/yksisarvinen"}, "edited": false, "score": 0, "creation_date": 1549490436, "post_id": 54563138, "comment_id": 95925334, "body": "&quot;argument list for class template &quot;DynamicArray&quot; is missing&quot; is quite verbose. You want to return <code>DynamicArray</code> by reference, but you didn&#39;t specify it&#39;s template argument, so compiler doesn&#39;t know what exactly do you want to return (in case you wanted to always return <code>DynamicArray&lt;int&gt;</code> for some reason...)"}, {"owner": {"reputation": 1, "user_id": 11025172, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76dd0313daac2482c323474209b00393?s=128&d=identicon&r=PG&f=1", "display_name": "Luis Torre", "link": "https://stackoverflow.com/users/11025172/luis-torre"}, "edited": false, "score": 0, "creation_date": 1549490525, "post_id": 54563138, "comment_id": 95925368, "body": "I tried having the definitions in the same header file before moving them to the .cpp file and had the same problem."}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 0, "creation_date": 1549490551, "post_id": 54563138, "comment_id": 95925375, "body": "Only one of them. Fixing the one I mentioned would have removed the other."}], "answers": [{"tags": [], "owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "is_accepted": true, "score": 0, "last_activity_date": 1549490945, "creation_date": 1549490945, "answer_id": 54563329, "question_id": 54563138, "link": "https://stackoverflow.com/questions/54563138/template-class-assignment-operator/54563329#54563329", "title": "Template class assignment operator", "body": "<ol>\n<li>Put the complete template in the header file as Neil suggested via the link to <a href=\"https://stackoverflow.com/questions/495021/why-can-templates-only-be-implemented-in-the-header-file\">Why can templates only be implemented in the header file?</a>. </li>\n<li>The return value from <code>operator=</code> should be <code>DynamicArray&lt;T&gt;&amp;</code></li>\n</ol>\n"}], "owner": {"reputation": 1, "user_id": 11025172, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76dd0313daac2482c323474209b00393?s=128&d=identicon&r=PG&f=1", "display_name": "Luis Torre", "link": "https://stackoverflow.com/users/11025172/luis-torre"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 54563329, "answer_count": 1, "score": -1, "last_activity_date": 1549490945, "creation_date": 1549490100, "last_edit_date": 1549490371, "question_id": 54563138, "link": "https://stackoverflow.com/questions/54563138/template-class-assignment-operator", "title": "Template class assignment operator", "body": "<p>I have a problem with a template class I named \"DynamicArray\". The only problem that I have is when I define my assignment operator. it gives me two different errors</p>\n\n<p>1) the first error it gives me is</p>\n\n<p>DynamicArray&amp; says \"argument list for class template \"DynamicArray\" is missging\"</p>\n\n<p>2) the second error is</p>\n\n<p>DynamicArray::operator= says \"template argument list must match the parameter list\"</p>\n\n<p>this is my program:</p>\n\n<p><strong>DynamicArray.h</strong></p>\n\n<pre><code>#pragma once\n#include &lt;iostream&gt;\n\nusing namespace std;\n\ntemplate&lt;typename T&gt;\nclass DynamicArray\n{\npublic:\n    DynamicArray();\n    DynamicArray(const DynamicArray &amp;d);\n    DynamicArray&amp; operator=(const DynamicArray &amp;d);\n    ~DynamicArray();\n};\n\ntemplate&lt;typename T&gt;\nDynamicArray&lt;T&gt;::DynamicArray()\n{\n\n}\n\ntemplate&lt;typename T&gt;\nDynamicArray&lt;T&gt;::DynamicArray(const DynamicArray &amp;d)\n{\n\n}\n\ntemplate&lt;typename T&gt;\nDynamicArray&amp; DynamicArray&lt;T&gt;::operator=(const DynamicArray &amp;d)\n{\n\n}\n\ntemplate&lt;typename T&gt;\nDynamicArray&lt;T&gt;::~DynamicArray()\n{\n\n}\n</code></pre>\n\n<p>I have looked at multiple examples and can't figure out why I have this problem.</p>\n\n<p>Can anyone tell me what I am doing wrong here?</p>\n"}, {"tags": ["c++", "gcc", "visual-c++", "clang", "c++17"], "comments": [{"owner": {"reputation": 1812, "user_id": 5945883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17f8de79f057abb63afb9ce7bee0ca51?s=128&d=identicon&r=PG&f=1", "display_name": "R2RT", "link": "https://stackoverflow.com/users/5945883/r2rt"}, "edited": false, "score": 1, "creation_date": 1549493571, "post_id": 54563090, "comment_id": 95926447, "body": "Note: clang will compile it if you add <code>-stdlib=libc++</code> flag"}], "answers": [{"comments": [{"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 0, "creation_date": 1549514225, "post_id": 54564031, "comment_id": 95930997, "body": "&quot;It&#39;s actually a compiler bug&quot; - of which compiler?"}, {"owner": {"reputation": 7277, "user_id": 6205379, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/dPsLh.png?s=128&g=1", "display_name": "Timo", "link": "https://stackoverflow.com/users/6205379/timo"}, "reply_to_user": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 0, "creation_date": 1549538726, "post_id": 54564031, "comment_id": 95942147, "body": "Msvc. The original code works fine with gcc (didn&#39;t run it with clang, but it compiles)."}], "tags": [], "owner": {"reputation": 7277, "user_id": 6205379, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/dPsLh.png?s=128&g=1", "display_name": "Timo", "link": "https://stackoverflow.com/users/6205379/timo"}, "is_accepted": false, "score": 1, "last_activity_date": 1549511912, "last_edit_date": 1549511912, "creation_date": 1549495053, "answer_id": 54564031, "question_id": 54563090, "link": "https://stackoverflow.com/questions/54563090/splitting-a-string-at-compile-time-gives-different-results-on-different-compiler/54564031#54564031", "title": "Splitting a string at compile time gives different results on different compilers", "body": "<p>It's actually a compiler bug. I don't know what exactly is responsible for the bug, but it is inside <code>std::string_view::find_first_of</code>. Strangely enough, this bug only occurs during constant evaluation (at compile time). The runtime behaviour of this function is as expected as far as I can tell.</p>\n\n<p>Here is the working implementation of <code>split</code>:</p>\n\n<pre><code>template &lt;std::size_t N&gt;\nconstexpr std::array&lt;std::string_view, N&gt; split(std::string_view str)\n{\n    std::array&lt;std::string_view, N&gt; arr{};\n    std::size_t start = 0, end = 0;\n\n    for (std::size_t i = 0; i &lt; N &amp;&amp; end != std::string_view::npos; i++)\n    {\n        end = std::string_view::npos;\n        for (std::size_t j = start; j &lt; str.length(); j++)\n        {\n            if (str[j] == ',')\n            {\n                end = j;\n                break;\n            }\n        }\n\n        arr[i] = str.substr(start, end - start);        \n        start = end + 1;\n    }\n\n    return arr;\n}\n</code></pre>\n\n<h2>Edit</h2>\n\n<p>Turns out msvc is very bad at evaluating constant expressions compared to gcc and clang. I found lots of other scenarios (all around <code>std::string_view</code>) that also fail to compile.</p>\n"}], "owner": {"reputation": 7277, "user_id": 6205379, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/dPsLh.png?s=128&g=1", "display_name": "Timo", "link": "https://stackoverflow.com/users/6205379/timo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 404, "favorite_count": 1, "answer_count": 1, "score": 3, "last_activity_date": 1549511912, "creation_date": 1549489914, "last_edit_date": 1549494386, "question_id": 54563090, "link": "https://stackoverflow.com/questions/54563090/splitting-a-string-at-compile-time-gives-different-results-on-different-compiler", "title": "Splitting a string at compile time gives different results on different compilers", "body": "<p>I'm trying to split a string at compile time. I defined a function <code>split</code> like </p>\n\n<pre><code>#include &lt;array&gt;\n#include &lt;string_view&gt;\n\ntemplate &lt;std::size_t N&gt;\nconstexpr std::array&lt;std::string_view, N&gt; split(std::string_view str)\n{\n    std::array&lt;std::string_view, N&gt; arr{};\n    std::size_t start = 0, end = 0;\n\n    for (std::size_t i = 0; i &lt; N &amp;&amp; end != std::string_view::npos; i++)\n    {\n        end = str.find_first_of(',', start);    \n        arr[i] = str.substr(start, end - start);\n        start = end + 1;\n    }\n\n    return arr;\n}\n</code></pre>\n\n<p>Given the usage like:</p>\n\n<pre><code>constexpr std::string_view str = \"one,two,three,four,five\";\nconstexpr std::array&lt;std::string_view, 5&gt; arr = split&lt;5&gt;(str);\n</code></pre>\n\n<p>msvc and gcc both compile. However clang already rejects this code saying <code>std::string_view::find_first_of</code> doesn't result in a constant expression (is this a compiler bug?).</p>\n\n<p>When I test the result like:</p>\n\n<pre><code>int main() \n{\n    std::cout &lt;&lt; str &lt;&lt; \"\\n\\n\";\n\n    for (auto i = 0; i &lt; arr.size(); i++)\n        std::cout &lt;&lt; arr[i] &lt;&lt; \"\\n\";\n\n    return 0;\n}\n</code></pre>\n\n<p>msvc prints</p>\n\n<pre><code>one,two,three,four,five\n\none\ntwo\nthr\ne,f\nur,\n</code></pre>\n\n<p>while gcc gives me the expected result</p>\n\n<pre><code>one,two,three,four,five                                                                                                                                                           \n\none\ntwo\nthree\nfour\nfive\n</code></pre>\n\n<p>I added a second split function that is identical to the original one, except it prints out the intermediate substring inside the split function. Both msvc and gcc print the same in that case which is the expected result above.</p>\n\n<p>Why are the results different? Did I invoke UB somewhere?</p>\n\n<p>The complete code can be found <a href=\"https://godbolt.org/z/q8PSkz\" rel=\"nofollow noreferrer\">here</a></p>\n\n<h2>Edit</h2>\n\n<p>It looks like this is a bug in msvc. Invoking the function at runtime produces the expected result:</p>\n\n<pre><code>int main() \n{\n    std::cout &lt;&lt; str &lt;&lt; \"\\n\\n\";\n\n    for (auto i = 0; i &lt; arr.size(); i++)\n        std::cout &lt;&lt; arr[i] &lt;&lt; \"\\n\";\n\n    auto arr2 = split&lt;5&gt;(str);    \n    for (auto i = 0; i &lt; arr2.size(); i++)\n        std::cout &lt;&lt; arr2[i] &lt;&lt; \"\\n\";\n\n    return 0;\n}\n</code></pre>\n\n<h2>Edit 2</h2>\n\n<p>Looks like there is actually a bug inside msvc when it runs the interpreter for the constant expressions. I've added another function to access the variables outside the function:</p>\n\n<pre><code>constexpr decltype(split&lt;5&gt;(str)) arr = split&lt;5&gt;(str);\nconstexpr decltype(split_sizes&lt;5&gt;(str)) arr_sizes = split_sizes&lt;5&gt;(str);\n\ntemplate &lt;std::size_t N&gt;\nconstexpr std::array&lt;std::array&lt;std::size_t, 3&gt;, N&gt; split_sizes(std::string_view str)\n{\n    std::array&lt;std::array&lt;std::size_t, 3&gt;, N&gt; arr{};\n    std::size_t start = 0, end = 0;\n\n    for (std::size_t i = 0; i &lt; N &amp;&amp; end != std::string_view::npos; i++)\n    {\n        end = str.find_first_of(',', start);\n        auto sub = str.substr(start, end - start);\n        arr[i] = { sub.length(), start, end };\n        start = end + 1;\n    }\n\n    return arr;\n}\n\nint main() \n{    \n    for (auto i = 0; i &lt; arr.size(); i++)\n        std::cout &lt;&lt; arr[i] &lt;&lt; \"\\tlen=\" &lt;&lt; arr_sizes[i][0] &lt;&lt; \" start=\" &lt;&lt; arr_sizes[i][1] &lt;&lt; \" end=\" &lt;&lt; arr_sizes[i][2] &lt;&lt; \"\\n\";\n\n    std::cout &lt;&lt; \"\\n\";\n    auto arr2 = split&lt;5&gt;(str);\n    auto arr_sizes2 = split_sizes&lt;5&gt;(str);\n\n    for (auto i = 0; i &lt; arr2.size(); i++)\n        std::cout &lt;&lt; arr2[i] &lt;&lt; \"\\tlen=\" &lt;&lt; arr_sizes2[i][0] &lt;&lt; \" start=\" &lt;&lt; arr_sizes2[i][1] &lt;&lt; \" end=\" &lt;&lt; arr_sizes2[i][2] &lt;&lt; \"\\n\";\n\n    return 0;\n}\n</code></pre>\n\n<p>gives the following result on msvc:</p>\n\n<pre><code>one,two,three,four,five\n\none     len=3 start=0 end=3\ntwo     len=3 start=4 end=7\nthr     len=3 start=8 end=11\ne,f     len=3 start=12 end=15\nur,     len=3 start=16 end=19\n\none     len=3 start=0 end=3\ntwo     len=3 start=4 end=7\nthree   len=5 start=8 end=13\nfour    len=4 start=14 end=18\nfive    len=4 start=19 end=18446744073709551615\n</code></pre>\n\n<p><a href=\"https://godbolt.org/z/ApjeS1\" rel=\"nofollow noreferrer\">Here</a> is a link to the updated, complete code.</p>\n"}, {"tags": ["c++", "eigen"], "answers": [{"tags": [], "owner": {"reputation": 25324, "user_id": 1641621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h50hY.png?s=128&g=1", "display_name": "ggael", "link": "https://stackoverflow.com/users/1641621/ggael"}, "is_accepted": true, "score": 2, "last_activity_date": 1549491327, "creation_date": 1549491327, "answer_id": 54563401, "question_id": 54563055, "link": "https://stackoverflow.com/questions/54563055/eigen-giving-different-results-for-inplace-versus-non-inplace-versions-of-functi/54563401#54563401", "title": "Eigen giving different results for inplace versus non-inplace versions of function", "body": "<p>The line:</p>\n\n<pre><code>A.triangularView&lt;Eigen::Lower&gt;().solveInPlace(I);\n</code></pre>\n\n<p>modifies <code>I</code> not <code>A</code>. So you need to ends <code>test2</code> with:</p>\n\n<pre><code>I.transposeInPlace();\nreturn I;\n</code></pre>\n"}], "owner": {"reputation": 554, "user_id": 1406444, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e6a63597e64ab3951e140d4cc4dae4f8?s=128&d=identicon&r=PG", "display_name": "jds", "link": "https://stackoverflow.com/users/1406444/jds"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "accepted_answer_id": 54563401, "answer_count": 1, "score": 0, "last_activity_date": 1549491327, "creation_date": 1549489752, "question_id": 54563055, "link": "https://stackoverflow.com/questions/54563055/eigen-giving-different-results-for-inplace-versus-non-inplace-versions-of-functi", "title": "Eigen giving different results for inplace versus non-inplace versions of function", "body": "<p>I am having a weird problem where two functions that should give identical results are disagreeing. I have included the code below. I know that the results of <code>test1</code> are correct while <code>test2</code> are wrong. </p>\n\n<pre><code>#include &lt;RcppEigen.h&gt;\nusing namespace Rcpp;\n// [[Rcpp::depends(RcppEigen)]]\n\n// [[Rcpp::export]]\nEigen::MatrixXd test1(Eigen::MatrixXd A){\n  int p = A.rows();\n  return A.triangularView&lt;Eigen::Lower&gt;().solve(Eigen::MatrixXd::Identity(p,p)).transpose();\n}\n\n// [[Rcpp::export]]\nEigen::MatrixXd test2(Eigen::MatrixXd A){\n  int p = A.rows();\n  Eigen::MatrixXd I = Eigen::MatrixXd::Identity(p,p);\n  A.triangularView&lt;Eigen::Lower&gt;().solveInPlace(I);\n  A.transposeInPlace();\n  return A;\n}\n\n\n/*** R\nA &lt;- rWishart(1, 10, diag(4))[,,1]\nA &lt;- t(chol(A))\n\ntest1(A)\ntest2(A)\n*/\n</code></pre>\n\n<p>Here is the output </p>\n\n<pre><code>&gt; test1(A)\n          [,1]        [,2]        [,3]        [,4]\n[1,] 0.2251857 -0.01455544 -0.20205410 -0.08993337\n[2,] 0.0000000  0.32498583 -0.06486972 -0.14006616\n[3,] 0.0000000  0.00000000  0.60379357  0.27294390\n[4,] 0.0000000  0.00000000  0.00000000  0.37409978\n\n&gt; test2(A)\n         [,1]      [,2]      [,3]        [,4]\n[1,] 4.440779 0.1988932 1.5074352  0.04220045\n[2,] 0.000000 3.0770572 0.3305895  0.91087781\n[3,] 0.000000 0.0000000 1.6561952 -1.20836313\n[4,] 0.000000 0.0000000 0.0000000  2.67308367\n</code></pre>\n\n<p>My question is how do I write an inplace version of <code>test1</code> that is not incorrect? Also why is <code>test2</code> incorrect?</p>\n"}, {"tags": ["java", "android", "c++", "native"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1549490878, "post_id": 54562918, "comment_id": 95925514, "body": "Are you sure that path is valid?"}, {"owner": {"reputation": 1, "user_id": 11025294, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91f8ec4c788a467edb7d3e5763d14322?s=128&d=identicon&r=PG&f=1", "display_name": "Steve", "link": "https://stackoverflow.com/users/11025294/steve"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1549527453, "post_id": 54562918, "comment_id": 95935762, "body": "Yes the path is valid. Also when I use the same file and the same application in rooted emulator it works in no root device fopen () or access () returns Null value"}], "owner": {"reputation": 1, "user_id": 11025294, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91f8ec4c788a467edb7d3e5763d14322?s=128&d=identicon&r=PG&f=1", "display_name": "Steve", "link": "https://stackoverflow.com/users/11025294/steve"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 37, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1549489032, "creation_date": 1549489032, "question_id": 54562918, "link": "https://stackoverflow.com/questions/54562918/how-to-grant-permission-to-native-excutable", "title": "How to grant permission to native excutable", "body": "<p>I created a C++ Native executable and I succesfully start it with adb and rooted Android.\nNow I would like to launch my executable  from Android Service. Therfore I am using  :\n    runtime.exec (\"/sdcard/test/myApp<br>\n   /sdcard/test/conf.txt\")</p>\n\n<p>I also added WRITE_EXTERNAL_STORAGE  permissions in Manifest file and allowed permission  in runtime.\nMy executable start but cannot read argument file \"conf.txt\"\nHow do I add or transfer permission to acess files and so on?</p>\n"}, {"tags": ["c++", "windows", "singleton", "shared-libraries", "object-destruction"], "comments": [{"owner": {"reputation": 8002, "user_id": 1143850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2927fac544c9960cd5433688fe4cae1d?s=128&d=identicon&r=PG", "display_name": "Serge", "link": "https://stackoverflow.com/users/1143850/serge"}, "edited": false, "score": 0, "creation_date": 1549489796, "post_id": 54562874, "comment_id": 95925070, "body": "none of them is complaint. there is no standard which orders dynamically loaded libraries. it depends on the system, command line, search order, and  env variables."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1549489994, "post_id": 54562874, "comment_id": 95925153, "body": "Which version of C++ are you targeting?  For instance your quoted section has been changed since N4296: <a href=\"https://timsong-cpp.github.io/cppwp/basic.start.term#3\" rel=\"nofollow noreferrer\">timsong-cpp.github.io/cppwp/basic.start.term#3</a>"}, {"owner": {"reputation": 1470, "user_id": 1072878, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/15e4a648de45b3005f2f5b891f4e6242?s=128&d=identicon&r=PG", "display_name": "eXXXXXXXXXXX2", "link": "https://stackoverflow.com/users/1072878/exxxxxxxxxxx2"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1549491240, "post_id": 54562874, "comment_id": 95925642, "body": "@NathanOliver I see the only difference is &quot;is sequenced before&quot; (was) vs &quot;strongly happens before&quot; (in your link). Seems like a minor change - maybe just to minimize confusion for concurrent construction scenarios."}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1549491544, "post_id": 54562874, "comment_id": 95925744, "body": "are code of <i>test.cpp</i> in dll ? this is in separate binary modules ? <i>main.cpp</i> in exe and <i>test.cpp</i> in dll ? if yes - this and must be and all ok"}, {"owner": {"reputation": 1470, "user_id": 1072878, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/15e4a648de45b3005f2f5b891f4e6242?s=128&d=identicon&r=PG", "display_name": "eXXXXXXXXXXX2", "link": "https://stackoverflow.com/users/1072878/exxxxxxxxxxx2"}, "reply_to_user": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1549491636, "post_id": 54562874, "comment_id": 95925776, "body": "@RbMm Yes, test.cpp is in dll and main.cpp is in exe"}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1549491684, "post_id": 54562874, "comment_id": 95925797, "body": "@eXXXXXXXXXXX2 - in this case such order in windows and <b>must be</b> all correct. and this is unrelated to compiler"}, {"owner": {"reputation": 1470, "user_id": 1072878, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/15e4a648de45b3005f2f5b891f4e6242?s=128&d=identicon&r=PG", "display_name": "eXXXXXXXXXXX2", "link": "https://stackoverflow.com/users/1072878/exxxxxxxxxxx2"}, "reply_to_user": {"reputation": 8002, "user_id": 1143850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2927fac544c9960cd5433688fe4cae1d?s=128&d=identicon&r=PG", "display_name": "Serge", "link": "https://stackoverflow.com/users/1143850/serge"}, "edited": false, "score": 0, "creation_date": 1549491688, "post_id": 54562874, "comment_id": 95925799, "body": "@Serge I don&#39;t think shared libraries are covered by the standard at all. But nevertheless on Linux this part of the standard is implemented properly even with shared libraries."}, {"owner": {"reputation": 1470, "user_id": 1072878, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/15e4a648de45b3005f2f5b891f4e6242?s=128&d=identicon&r=PG", "display_name": "eXXXXXXXXXXX2", "link": "https://stackoverflow.com/users/1072878/exxxxxxxxxxx2"}, "reply_to_user": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1549491945, "post_id": 54562874, "comment_id": 95925878, "body": "@RbMm Can you please elaborate on this? I would like to have a portable way to enforce order of construction/destruction for singleton objects. The standard seems to provide some guarantees on that but they do not work on Windows. I understand that DLLs have their specifics but I would like to know if it is something that is intended/impossible to fix or just a gap in implementation."}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1549492046, "post_id": 54562874, "comment_id": 95925912, "body": "@eXXXXXXXXXXX2 - ok i can give answer but situation is absolute clear and unrelated to standard. your objects in <b>different</b> binary modules. destructors in dll called from <code>DLL_PROCESS_DETACH</code>"}, {"owner": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 0, "creation_date": 1549492974, "post_id": 54562874, "comment_id": 95926226, "body": "Avoid global objects.  If you cannot avoid global objects, them nest them as a static inside a singleton instance getter global function.  Note that there is a possible tiny bit of performance hit, because the static initializer may have a secret bool and/or mutex."}, {"owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "reply_to_user": {"reputation": 8002, "user_id": 1143850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2927fac544c9960cd5433688fe4cae1d?s=128&d=identicon&r=PG", "display_name": "Serge", "link": "https://stackoverflow.com/users/1143850/serge"}, "edited": false, "score": 0, "creation_date": 1549493193, "post_id": 54562874, "comment_id": 95926297, "body": "@Serge forgive me for nitpicking, but since the standard doesn&#39;t define how dynamic libraries behave, I think it&#39;s more correct to say that both behaviors are compliant, not that neither is compliant. You can&#39;t be non-compliant with a nonexistent specification."}], "answers": [{"comments": [{"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1549496301, "post_id": 54563996, "comment_id": 95927281, "body": "absolute correct. how this internal implemented we can look in <i>crt\\src\\vcruntime\\utility.cpp</i>. search here by <code>module_local_atexit_table</code> symbol and about <i>On-Exit Table</i> :"}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1549496337, "post_id": 54563996, "comment_id": 95927293, "body": "<i>When a module uses the Universal CRT DLL, the behavior of _onexit(), atexit(),  and at_quick_exit() is different depending on whether the module is an EXE or a DLL.  If it is an EXE, then calls to these functions are passed to the Universal CRT DLL and the callbacks are registered with its atexit function tables.  This way, functions registered by the EXE are called whenever one of the exit() functions is called. If the module is a DLL, it has its own table of registered functions.  This table is executed when the DLL is unloaded (during DLL_PROCESS_DETACH).</i>"}], "tags": [], "owner": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "is_accepted": false, "score": 9, "last_activity_date": 1549494817, "creation_date": 1549494817, "answer_id": 54563996, "question_id": 54562874, "link": "https://stackoverflow.com/questions/54562874/destruction-order-of-static-objects-in-shared-libraries/54563996#54563996", "title": "Destruction order of static objects in shared libraries", "body": "<p>The whole concept of a DLL is outside the scope of the C++ standard.</p>\n\n<p>With Windows, DLLs can be unloaded dynamically during program execution.  To help support this, each DLL will handle the destruction of static variables constructed while it was loaded.  The result is that the static variables will be destroyed in an order that depends on the unload order of the DLLs (when they receive the DLL_PROCESS_DETACH notification).  <a href=\"https://docs.microsoft.com/en-us/cpp/build/run-time-library-behavior?view=vs-2017\" rel=\"noreferrer\">DLLs and Visual C++ run-time library behavior</a> describes this process.</p>\n"}, {"tags": [], "owner": {"reputation": 9551, "user_id": 9837301, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9414V.png?s=128&g=1", "display_name": "JaMiT", "link": "https://stackoverflow.com/users/9837301/jamit"}, "is_accepted": false, "score": 4, "last_activity_date": 1549855168, "creation_date": 1549855168, "answer_id": 54623533, "question_id": 54562874, "link": "https://stackoverflow.com/questions/54562874/destruction-order-of-static-objects-in-shared-libraries/54623533#54623533", "title": "Destruction order of static objects in shared libraries", "body": "<p>I see two things that are missing from your analysis.</p>\n\n<p><strong>Program:</strong> The standard places requirements on how a program is executed. Your program consists of the (executable) file produced by the command <code>g++ main.cpp -ltest</code>, presumably <code>a.out</code> or <code>a.exe</code>. In particular, your program does not contain any of the shared libraries it is linked against. So whatever is done by a shared library falls outside the scope of the standard.</p>\n\n<p>Well, almost. Since you wrote your shared library in C++, your <code>libtest.so</code> or <code>test.dll</code> file does fall within the scope of the standard, but it does so by itself, independent of the executable that invokes it. That is, the observable behavior of <code>a.exe</code>, ignoring the observable behavior of the shared libraries, must comply with the standard, and the observable behavior of <code>test.dll</code>, ignoring the observable behavior of the executable, must comply with the standard.</p>\n\n<p>You have two related, but technically independent programs. The standard applies to each of them separately. The C++ standard does not cover how independent programs interact with each other.</p>\n\n<p><em>If you want a reference for this, I would look at clause 9 of \"Phases of translation\" ([lex.phases] -- section 2.2 in the version of the standard you referenced). The result, <code>a.out</code>, of linking is a program image, while <code>test.dll</code> is part of the execution environment.</em></p>\n\n<p><strong>Sequenced before:</strong> You seem to have missed the definition of \"sequenced before\". Yes, the output has \"B ctor\" before \"A ctor\". However, this by itself does not mean that the constructor of <code>b</code> was <em>sequenced before</em> the constructor of <code>a</code>. The C++ standard gives a precise meaning to \"sequenced before\" in [intro.execution] (clause 13 of section 1.9 in the version of the standard you referenced). Using the precise meaning, one could conclude that if the constructor of <code>b</code> is <em>sequenced before</em> the constructor of <code>a</code>, then the output should have \"B ctor\" before \"A ctor\". However, the converse (what you assumed) does not hold.</p>\n\n<p>In the comments, you suggested that it was a minor change when \"sequenced before\" was replaced by \"strongly happens before\". Not so, as \"strongly happens before\" also has a precise meaning in the newer version of the standard (<a href=\"https://timsong-cpp.github.io/cppwp/intro.races#12\" rel=\"nofollow noreferrer\">clause 12</a> of section 6.8.2.1 [intro.races]). It turns out that \"strongly happens before\" means either \"sequenced before\" or one of three additional cases. So the wording change was an intentional broadening of that part of the standard, encompassing more cases than it had before.</p>\n"}, {"comments": [{"owner": {"reputation": 9551, "user_id": 9837301, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9414V.png?s=128&g=1", "display_name": "JaMiT", "link": "https://stackoverflow.com/users/9837301/jamit"}, "edited": false, "score": 0, "creation_date": 1550186994, "post_id": 54690907, "comment_id": 96188008, "body": "Regarding deferring the execution of the constructors, I would call it &quot;as expected&quot; rather than &quot;interestingly&quot;. That behavior is why using function-level static variables can sometimes avoid a static initialization fiasco."}, {"owner": {"reputation": 9551, "user_id": 9837301, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9414V.png?s=128&g=1", "display_name": "JaMiT", "link": "https://stackoverflow.com/users/9837301/jamit"}, "edited": false, "score": 0, "creation_date": 1550187125, "post_id": 54690907, "comment_id": 96188046, "body": "Why should DLLs be loaded first? (Think of the function-level static variables -- no need to initialize anything before it could possibly be used.) Better yet, how is the operating system supposed to know which DLLs to load before the program loads and gets a chance to request that the DLL be loaded?"}, {"owner": {"reputation": 1003, "user_id": 2528436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e1d4385a3ac2f060b4fea2bba1f6e5a?s=128&d=identicon&r=PG", "display_name": "Kai Petzke", "link": "https://stackoverflow.com/users/2528436/kai-petzke"}, "reply_to_user": {"reputation": 9551, "user_id": 9837301, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9414V.png?s=128&g=1", "display_name": "JaMiT", "link": "https://stackoverflow.com/users/9837301/jamit"}, "edited": false, "score": 0, "creation_date": 1550223237, "post_id": 54690907, "comment_id": 96198245, "body": "@JaMiT Of course ,the program has to be loaded before DLLs can be loaded. But the order of high level initializations (and I call creation of C++ static objects high level here) is not bound by OS needs, but is rather determined by the runtime environment. And there, my personal opinion is, that the best initialization order would be to initialize the C++ library first (so that everybody can use <code>std::cout</code> for example) and then any generic DLLs, and then DLLs, that depend on other, already initialized DLLs, and then the app itself last."}, {"owner": {"reputation": 9551, "user_id": 9837301, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9414V.png?s=128&g=1", "display_name": "JaMiT", "link": "https://stackoverflow.com/users/9837301/jamit"}, "edited": false, "score": 0, "creation_date": 1551034716, "post_id": 54690907, "comment_id": 96482272, "body": "That smells of a <a href=\"https://en.wikipedia.org/wiki/Straw_man\" rel=\"nofollow noreferrer\">straw man</a> argument. The question at hand gives a context with exactly one DLL, so all this talk of the order in which multiple DLLs are initialized is spurious. Also, the only &quot;OS need&quot; that had been mentioned is that the OS needs the executable (after being loaded) to specify which dynamic libraries to load -- nothing about how the libraries execute. I&#39;m left even more confused about what your answer is trying to convey than I was before."}], "tags": [], "owner": {"reputation": 1003, "user_id": 2528436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e1d4385a3ac2f060b4fea2bba1f6e5a?s=128&d=identicon&r=PG", "display_name": "Kai Petzke", "link": "https://stackoverflow.com/users/2528436/kai-petzke"}, "is_accepted": false, "score": 1, "last_activity_date": 1550148841, "creation_date": 1550148841, "answer_id": 54690907, "question_id": 54562874, "link": "https://stackoverflow.com/questions/54562874/destruction-order-of-static-objects-in-shared-libraries/54690907#54690907", "title": "Destruction order of static objects in shared libraries", "body": "<p>Even on Linux, you can encounter the crossing of static constructor and destructor calls, if you open and close the DLL manually with dlopen() and dlclose():</p>\n\n<p>testa.cpp:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nstruct A {\n    A() { printf(\"A ctor\\n\"); }\n    ~A() { printf(\"A dtor\\n\"); }\n};\n\nA&amp; getA() {\n    static A a;\n    return a;\n}\n</code></pre>\n\n<p>(testb.cpp is analog, except for <code>A</code> changed to <code>B</code> and <code>a</code> to <code>b</code>)</p>\n\n<p>main.cpp:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;dlfcn.h&gt;\n\nclass A;\nclass B;\n\ntypedef A&amp; getAtype();\ntypedef B&amp; getBtype();\n\nint main(int argc, char *argv[])\n{\n    void* liba = dlopen(\"./libtesta.so\", RTLD_NOW);\n    printf(\"dll libtesta.so opened\\n\");\n    void* libb = dlopen(\"./libtestb.so\", RTLD_NOW);\n    printf(\"dll libtestb.so opened\\n\");\n    getAtype* getA = reinterpret_cast&lt;getAtype*&gt;(dlsym(liba, \"_Z4getAv\"));\n    printf(\"gotten getA\\n\");\n    getBtype* getB = reinterpret_cast&lt;getBtype*&gt;(dlsym(libb, \"_Z4getBv\"));\n    printf(\"gotten getB\\n\");\n    A&amp; a = (*getA)();\n    printf(\"gotten a\\n\");\n    B&amp; b = (*getB)();\n    printf(\"gotten b\\n\");\n\n    dlclose(liba);\n    printf(\"dll libtesta.so closed\\n\");\n    dlclose(libb);\n    printf(\"dll libtestb.so closed\\n\");\n\n    return 0;\n}\n</code></pre>\n\n<p>And the output is:</p>\n\n<pre><code>dll libtesta.so opened\ndll libtestb.so opened\ngotten getA\ngotten getB\nA ctor\ngotten a\nB ctor\ngotten b\nA dtor\ndll libtesta.so closed\nB dtor\ndll libtestb.so closed\n</code></pre>\n\n<p>Interestingly, execution of the constructor of <code>a</code> is deferred to when <code>getA()</code> is actually called. The same for <code>b</code>. If the static declaration of <code>a</code> and <code>b</code> is moved from inside their getter-Functions to the module level, then the constructors is already be called upon loading of the DLL, automatically, though.</p>\n\n<p>Of course, the application would crash, if <code>a</code> or <code>b</code> was still used in the <code>main()</code> function after the call to <code>dlclose(liba)</code> or <code>dlclose(libb)</code>, respectively.</p>\n\n<p>If you compile and link your application normally, then the calls to <code>dlopen()</code> and <code>dlclose()</code> will be performed by the code in the runtime environment. It seems, that your tested Windows version performs those calls in an order, that was unexpected by you. The reason, why Microsoft choose to do it this way, was probably, that upon program exit, there is a higher tendency for anything in the main application to still depend on anything from a DLL than the other way round. So static objects from libraries should generally be destructed AFTER the main application is destructed.</p>\n\n<p>With the same reasoning, the initalization order should also be reversed: DLLs should be first, the main application second. So Linux gets it wrong on both initialization and cleanup, and Windows gets it right at least on cleanup.</p>\n"}, {"tags": [], "owner": {"reputation": 8002, "user_id": 1143850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2927fac544c9960cd5433688fe4cae1d?s=128&d=identicon&r=PG", "display_name": "Serge", "link": "https://stackoverflow.com/users/1143850/serge"}, "is_accepted": false, "score": 2, "last_activity_date": 1550196982, "creation_date": 1550196982, "answer_id": 54701809, "question_id": 54562874, "link": "https://stackoverflow.com/questions/54562874/destruction-order-of-static-objects-in-shared-libraries/54701809#54701809", "title": "Destruction order of static objects in shared libraries", "body": "<p>Relative order of the constructors and destructors is only defined within a statically linked executable or a (shared) library. It is defined by the scoping rules and order of the static objects at the liking time. The latter is also vague because sometimes it is difficult to guarantee the order of linking. </p>\n\n<p>Shared libraries (dlls) are loaded by either the operating system at the beginning of execution or can be loaded on demand by the program. So, there is no known order in which those libraries would be loaded. As a consequence, there is no known order in which they would be unloaded. As a result, the order of constructors and destructors between the libraries can vary. Only the relative order of them is guaranteed within a single library. </p>\n\n<p>Usually, when an order of constructors or destructors is important across libraries or across different files, there are simple techniques which allows you doing it. One of them is to use pointers to the objects. For example, if object A requires that object B is constructed before it, one can do this:</p>\n\n<pre><code>A *aPtr = nullptr;\nclass B {\npublic:\n    B() {\n      if (aPtr == nullptr) \n         aPtr = new A();\n      aPtr-&gt;doSomething();\n    }\n };\n ...\n B *b = new B();\n</code></pre>\n\n<p>The above will guarantee that A is constructed before it is used. While doing so, you can \nkeep a list of allocated objects, or keep pointers, shared_pointers, ... in other objects to orchestrate an orderly destructions, say before exiting main.</p>\n\n<p>So, to illustrate the above i re-implemented your example in a basic way. There are definitely multiple ways for handle it. In this example the destruction list is constructed following the above technique, the allocated A and B are put on the list and get destroyed at the end in a particular order. </p>\n\n<p>test.h</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;list&gt;\nusing namespace std;\n\n// to create a simple list for destructios. \nstruct Destructor {\n  virtual ~Destructor(){}\n};\n\nextern list&lt;Destructor*&gt; *dList;\n\nstruct A : public Destructor{\n A() {\n  // check existencd of the destruction list.\n  if (dList == nullptr)\n    dList = new list&lt;Destructor*&gt;();\n  dList-&gt;push_front(this);\n\n  printf(\"A ctor\\n\"); \n }\n ~A() { printf(\"A dtor\\n\"); }\n};\n\nA&amp; getA();\n</code></pre>\n\n<p>test.cpp</p>\n\n<pre><code>#include \"test.h\"\n\nA&amp; getA() {\n    static A *a = new A();;\n    return *a;\n}\n\nlist&lt;Destructor *&gt; *dList = nullptr;\n</code></pre>\n\n<p>main.cpp</p>\n\n<pre><code>#include \"test.h\"\n\nstruct B : public Destructor {\n  B() {\n   // check existence of the destruciton list\n  if (dList == nullptr)\n    dList = new list&lt;Destructor*&gt;();\n  dList-&gt;push_front(this);\n\n  printf(\"B ctor\\n\");\n }\n ~B() { printf(\"B dtor\\n\"); }\n};\n\nB&amp; getB() {\n  static B *b = new B();;\n  return *b;\n}\n\n\nint main() {\n B&amp; b = getB();\n A&amp; a = getA();\n\n // run destructors\n if (dList != nullptr) {\n  while (!dList-&gt;empty()) {\n    Destructor *d = dList-&gt;front();\n    dList-&gt;pop_front();\n    delete d;\n  }\n  delete dList;\n }\n return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 1470, "user_id": 1072878, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/15e4a648de45b3005f2f5b891f4e6242?s=128&d=identicon&r=PG", "display_name": "eXXXXXXXXXXX2", "link": "https://stackoverflow.com/users/1072878/exxxxxxxxxxx2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1435, "favorite_count": 2, "answer_count": 4, "score": 14, "last_activity_date": 1550196982, "creation_date": 1549488877, "last_edit_date": 1549852285, "question_id": 54562874, "link": "https://stackoverflow.com/questions/54562874/destruction-order-of-static-objects-in-shared-libraries", "title": "Destruction order of static objects in shared libraries", "body": "<p>I have a main program (<code>main.cpp</code>) and a shared library (<code>test.h</code> and <code>test.cpp</code>):</p>\n\n<p>test.h:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nstruct A {\n    A() { printf(\"A ctor\\n\"); }\n    ~A() { printf(\"A dtor\\n\"); }\n};\n\nA&amp; getA();\n</code></pre>\n\n<p>test.cpp:</p>\n\n<pre><code>#include \"test.h\"\n\nA&amp; getA() {\n    static A a;\n    return a;\n}\n</code></pre>\n\n<p>main.cpp:</p>\n\n<pre><code>#include \"test.h\"\n\nstruct B {\n    B() { printf(\"B ctor\\n\"); }\n    ~B() { printf(\"B dtor\\n\"); }\n};\n\nB&amp; getB() {\n    static B b;\n    return b;\n}\n\nint main() {\n    B&amp; b = getB();\n    A&amp; a = getA();\n    return 0;\n}\n</code></pre>\n\n<p>This is how I compile these sources on Linux:</p>\n\n<pre><code>g++ -shared -fPIC test.cpp -o libtest.so\ng++ main.cpp -ltest\n</code></pre>\n\n<p>Output on Linux:</p>\n\n<pre><code>B ctor\nA ctor\nA dtor\nB dtor\n</code></pre>\n\n<p>When I run this example on Windows (after some adjustments like adding <code>dllexport</code>) I get with MSVS 2015/2017:</p>\n\n<pre><code>B ctor\nA ctor\nB dtor\nA dtor\n</code></pre>\n\n<p>To me the first output seems to be compliant with the standard. For example see:\n<a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2014/n4296.pdf\" rel=\"noreferrer\">http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2014/n4296.pdf</a></p>\n\n<p>From paragraph 3.6.3.1:</p>\n\n<blockquote>\n  <p>If the completion of the constructor or dynamic initialization of an object with static storage\n  duration is sequenced before that of another, the completion of the destructor of the second is sequenced\n  before the initiation of the destructor of the first.</p>\n</blockquote>\n\n<p>That is if <code>B</code> object is constructed first it should be destroyed last - that what we see on Linux. But the Windows output is different. Is it a MSVC bug or am I missing something?</p>\n"}, {"tags": ["c++", "c++11", "memory-management"], "comments": [{"owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 0, "creation_date": 1549489230, "post_id": 54562770, "comment_id": 95924828, "body": "operating system, kernel, architecture, compiler, compiler options?"}, {"owner": {"reputation": 1, "user_id": 8711164, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f2e68d2e0fbc1d915f52b6fbe6073bc?s=128&d=identicon&r=PG&f=1", "display_name": "Charlie ...", "link": "https://stackoverflow.com/users/8711164/charlie"}, "reply_to_user": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 0, "creation_date": 1549489648, "post_id": 54562770, "comment_id": 95925004, "body": "See the Makefile in the GitHub, too many flags to list here. Also the file processor.info.txt has hardware. gcc/g++ 4.8.5 on Centos-7 recently updated kernel."}, {"owner": {"reputation": 14053, "user_id": 2189130, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/trlri.png?s=128&g=1", "display_name": "kmdreko", "link": "https://stackoverflow.com/users/2189130/kmdreko"}, "edited": false, "score": 0, "creation_date": 1549491892, "post_id": 54562770, "comment_id": 95925856, "body": "The main difference I see is that Direct has a trivial default constructor while the others don&#39;t."}, {"owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 1, "creation_date": 1549492492, "post_id": 54562770, "comment_id": 95926074, "body": "@Charlie... &quot;see the Makefile in GitHub&quot; sorry but no. You question should stand on its own. You shouldn&#39;t have to check external resources to get vital information about your question. If you feel the flags are too many, list only the ones that are relevant for your question, e.g. c++ standard and flags controlling architecture &amp; optimization. <a href=\"https://stackoverflow.com/posts/54562770/edit\">edit</a> your question to include the information you provided in the comment about the compiler version. &quot;recently updated kernel&quot; Since this question deals specifically with how kernel behaves you could be specific and post the exact kernel version."}, {"owner": {"reputation": 1, "user_id": 8711164, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f2e68d2e0fbc1d915f52b6fbe6073bc?s=128&d=identicon&r=PG&f=1", "display_name": "Charlie ...", "link": "https://stackoverflow.com/users/8711164/charlie"}, "edited": false, "score": 0, "creation_date": 1549502411, "post_id": 54562770, "comment_id": 95928674, "body": "That&#39;s a big chunk of it. But why flat for all that memory?"}], "owner": {"reputation": 1, "user_id": 8711164, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f2e68d2e0fbc1d915f52b6fbe6073bc?s=128&d=identicon&r=PG&f=1", "display_name": "Charlie ...", "link": "https://stackoverflow.com/users/8711164/charlie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 135, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1549493278, "creation_date": 1549488354, "last_edit_date": 1549493278, "question_id": 54562770, "link": "https://stackoverflow.com/questions/54562770/performance-of-big-slabs-due-to-allocation-initialization-and-deallocation-over", "title": "Performance of big slabs due to allocation, initialization and deallocation overhead costs [C++11]", "body": "<p>I have found in running performance analysis of various string classes, that the allocation, initialization and deallocation overhead costs due to fine-grained allocators more tuned for thread globals, scales very badly.</p>\n\n<p>A wonderful example of one of these fine grained allocators is Makalu, and the paper describes in great detail how that is done:\n<a href=\"https://cpb-us-e1.wpmucdn.com/blogs.rice.edu/dist/5/7236/files/2016/09/oopsla2016-copyright-1s0zst5.pdf\" rel=\"nofollow noreferrer\">Makalu: Fast Recoverable Allocation of Non-volatile Memory</a></p>\n\n<p>This kind of use of thread globals for caching deallocated items to avoid context switches is a great thing, but not for all programs.</p>\n\n<p>I have a graph for the a comparison of <code>std::string</code> and three types of strings I have constructed that are faster: <code>Direct</code>, <code>Symbiont</code> and <code>Head</code>, that compares the allocation, initialization and deallocation overhead costs (ADIDOC, for short) for sorting these strings in simple arrays using slab allocation on the stack.</p>\n\n<p>The <code>std::string</code> class has a head with a pointer to the tail that is copy-on-write (COW) in C++11 (that COW is changing, I think in a future release, but the extra fine-grained allocation will remain, I'm sure.) The heads of <code>std::string</code> are allocated in a single slab array, but the tails are all allocated fine-grained at various locations in the memory pool.</p>\n\n<p>The three other classes are all allocated as a single slab array, with no fine-grained allocation, whatsoever. Here are three graphs for that overhead in the process of creating initializing and deallocating 8-byte, 128-byte and 1024=byte strings for sorting (the sorting costs are measured separately and are analyzed in another posting).</p>\n\n<p>NOTES:</p>\n\n<ol>\n<li><p>All of the performance data presented is run on release builds, OF COURSE.</p></li>\n<li><p>All slabs are allocated on the stack as automatic variables in code blocks which deallocate the memory in between these runs in one process execution. So the stack pointer moves up some gigabytes and then back down.</p></li>\n<li><p>Were this all done in a <code>mmap</code>, one would start the process and do the <code>mmap</code> with the <code>MAP_POPULATE</code> flag before doing any runs, to level the playing field. Since this is on the stack, an attempt is made to accomplish the same thing by allocating a huge array and writing to the end of it, and that seems to set up all the memory allocation overhead (page table entry/PTE allocation and TLB miss overhead) for the subsequent runs during the process. See the slides from hotstorage 2017, for details at: \n<a href=\"https://www.usenix.org/sites/default/files/conference/protected-files/hotstorage17_slides_choi.pdf\" rel=\"nofollow noreferrer\">Efficient Memory Mapped File I/O for In-Memory File Systems</a></p></li>\n<li><p>The <code>SortBench.cpp</code> program used measures different strings and containers against identical template sort code: all strings and containers experience the same number of compares and swaps and run fast or slow depending on the underlying physics of those strings and containers. Sorting is just a method for seeing the scalability of strings and containers.</p></li>\n<li><p>For these measurements, the sorting numbers don't matter, because it's the setup for sorting and the exit after sorting that is being measured. For the record in each set of runs, the Direct strings are executed first and would take the memory allocation hit, and <code>std::string</code>s are executed last, as is seen in the data files.</p></li>\n</ol>\n\n<p><a href=\"https://github.com/charlesone/Kaldanes/blob/master/Quick%20Sort%20Array%20Overhead%20Costs%20(Allocation%20%2B%20Default%20Initialization%20%2B%20Deallocation)%20For%208-Byte%20Strings.jpg\" rel=\"nofollow noreferrer\">Quick sort allocation, initialization and deallocation overhead costs (ADIDOC) for 8-byte strings</a></p>\n\n<p><a href=\"https://github.com/charlesone/Kaldanes/blob/master/Quick%20Sort%20Array%20Overhead%20Costs%20For%20128-Byte%20Strings.jpg\" rel=\"nofollow noreferrer\">Quick sort ADIDOC for 128-byte strings</a></p>\n\n<p><a href=\"https://github.com/charlesone/Kaldanes/blob/master/Quick%20Sort%20Array%20Overhead%20Costs%20For%201024-Byte%20Strings.jpg\" rel=\"nofollow noreferrer\">Quick sort ADIDOC for 1024-byte strings</a></p>\n\n<p>The allocation, initialization and deallocation overhead cost measurements were all done using the nanosecond timer. The code for <code>SortBench.cpp</code> is located in the GitHub:\n[Kaldanes R&amp;D] (<a href=\"https://github.com/charlesone/Kaldanes\" rel=\"nofollow noreferrer\">https://github.com/charlesone/Kaldanes</a>)</p>\n\n<p>The first issue we notice is, this appears to scale very well for one of them. The blue line is the Direct string class, which is just a block of string bytes in a struct as an array element. That is the one class that has no initialization at all, just storing the string. After it reaches the scale of 128,000 8-byte strings (1MB) the overhead cost is scaling arbitrarily flat. Is that the operating system slab allocator at work? That was my working hypothesis, but I don't think that's where the fairy dust is being applied, it seems like the kernel is doing something special for massive objects.</p>\n\n<p>The second issue is that at the last point of 134,217,728 8-byte strings (after which <code>std::string</code> [yellow line] runs out of memory on my 15GB machine, from only storing 1GB of string data,) the <code>std::string</code> class is 5 orders of magnitude worse than the best slab-allocated class with no initialization.</p>\n\n<p>If the Direct strings use of the slab allocator remains flat at the terabyte level that would make for an eight order of magnitude difference. And another three at the petabyte scale makes an eight orders of magnitude difference (308 days, nearly a year). Using 7400 cores in parallel might bring that down to an hour, while slab allocation, if flat at that scale would remain at 1/10 of a millisecond in one core. This needs to be tested at scale on a Gen-Z or Intel XPoint system. I would presume (but have not tested) that the memory with no file backing version of mmap (presumably with flags <code>MAP_NORESERVE</code> and <code>MAP_POPULATE</code>) would have the same performance benefits.</p>\n\n<p>My question is about the C++ runtime and the kernel, why is this kind of enormous allocation so arbitrarily fast, and at what size does it stop being constant time?</p>\n\n<p>Here's the architecture info:</p>\n\n<p>[charles@localhost ~]$ lscpu\nArchitecture:          x86_64\nCPU op-mode(s):        32-bit, 64-bit\nByte Order:            Little Endian\nCPU(s):                4\nOn-line CPU(s) list:   0-3\nThread(s) per core:    1\nCore(s) per socket:    4\nSocket(s):             1\nNUMA node(s):          1\nVendor ID:             GenuineIntel\nCPU family:            6\nModel:                 58\nModel name:            Intel(R) Core(TM) i5-3570 CPU @ 3.40GHz\nStepping:              9\nCPU MHz:               1989.132\nCPU max MHz:           3800.0000\nCPU min MHz:           1600.0000\nBogoMIPS:              6784.92\nVirtualization:        VT-x\nL1d cache:             32K\nL1i cache:             32K\nL2 cache:              256K\nL3 cache:              6144K\nNUMA node0 CPU(s):     0-3\nFlags:                 fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush dts acpi mmx fxsr sse sse2 ss ht tm pbe syscall nx rdtscp lm constant_tsc arch_perfmon pebs bts rep_good nopl xtopology nonstop_tsc aperfmperf eagerfpu pni pclmulqdq dtes64 monitor ds_cpl vmx smx est tm2 ssse3 cx16 xtpr pdcm pcid sse4_1 sse4_2 x2apic popcnt tsc_deadline_timer aes xsave avx f16c rdrand lahf_lm epb tpr_shadow vnmi flexpriority ept vpid fsgsbase smep erms xsaveopt dtherm ida arat pln pts</p>\n\n<p>Makefile flags: \nCPPFLAGS = -std=c++11 -Ofast \nCXXFLAGS = -Wall </p>\n\n<p>gcc/g++ 4.8.5 on Centos-7 Kernel info:\n[charles@localhost]$ uname -a\nLinux localhost.localdomain 3.10.0-862.11.6.el7.x86_64 #1 SMP Tue Aug 14 21:49:04 UTC 2018 x86_64 x86_64 x86_64 GNU/Linux</p>\n"}, {"tags": ["c++", "polymorphism", "derived-class", "base-class"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1549488097, "post_id": 54562710, "comment_id": 95924345, "body": "Yes of course that&#39;s possible. Please clarify what&#39;s your particular problem doing so. Did you mean to use a reference or pointer member rather than a sliced instance?"}, {"owner": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "edited": false, "score": 4, "creation_date": 1549488101, "post_id": 54562710, "comment_id": 95924347, "body": "It doesn&#39;t look like you have any inheritance anywhere...did you forget to add it in your example?"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 1, "creation_date": 1549488105, "post_id": 54562710, "comment_id": 95924349, "body": "You need to use a pointer or a reference. These thing are specially designed to point/refer to objects of a derived class. (Provided you do actually have a derived class; there isn&#39;t any in the posted code)"}, {"owner": {"reputation": 12749, "user_id": 7976805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92a559df8b4b287aad23724b4c66d67c?s=128&d=identicon&r=PG&f=1", "display_name": "Yksisarvinen", "link": "https://stackoverflow.com/users/7976805/yksisarvinen"}, "edited": false, "score": 0, "creation_date": 1549488270, "post_id": 54562710, "comment_id": 95924437, "body": "There is no downcasting anywhere here...? <code>Base* mything = new DerivedA();</code> would be a classical polymorphism, where you assign a derived class object to a base class pointer. <code>BIG</code> looks like an implementation of Factory pattern (or a flavour of it)."}], "answers": [{"comments": [{"owner": {"reputation": 35, "user_id": 11018673, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29267748b9a3f83574c67ccb615c190d?s=128&d=identicon&r=PG&f=1", "display_name": "Wes", "link": "https://stackoverflow.com/users/11018673/wes"}, "edited": false, "score": 1, "creation_date": 1549489024, "post_id": 54562808, "comment_id": 95924736, "body": "&quot; polymorphism requires a pointer or a reference&quot; is exactly what I was missing."}], "tags": [], "owner": {"reputation": 33645, "user_id": 2630032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hQF09.jpg?s=128&g=1", "display_name": "Stephan Lechner", "link": "https://stackoverflow.com/users/2630032/stephan-lechner"}, "is_accepted": true, "score": 0, "last_activity_date": 1549488570, "creation_date": 1549488570, "answer_id": 54562808, "question_id": 54562710, "link": "https://stackoverflow.com/questions/54562710/can-a-class-contain-as-a-member-a-base-class-which-is-later-specialized-to-a-der/54562808#54562808", "title": "Can a class contain as a member a Base class which is later specialized to a Derived class?", "body": "<p>First, you probably forgot to actually derive from <code>Base</code>. But anyway, polymorphism requires a pointer or a reference. Otherwise, assigning an object of a derived class to a variable of the base class' type will \"slice\" the derived class object, i.e. it will cut a base class object out of the derived class object:</p>\n\n<pre><code>class Base{\n  public:\n    virtual void dostuff(){ cout &lt;&lt; \"in base\" &lt;&lt; endl; };\n};\n\nclass DerivedA : public Base {\n  public:\n    virtual void dostuff(){ cout &lt;&lt; \"in derived\" &lt;&lt; endl; };\n};\n\nint main() {\n\n  Base mything = DerivedA();  // slicing, will result in a `Base`-object\n  mything.dostuff(); // Base class implementation\n\n  Base *polymorph = new DerivedA(); // polymorphic; will point to a DerivedA-instance\n  polymorph-&gt;dostuff(); // DerivedA class implementation of dostuff\n\n\n\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 54044, "user_id": 3723423, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2c916310a1261b53773de75fc83e5ad?s=128&d=identicon&r=PG&f=1", "display_name": "Christophe", "link": "https://stackoverflow.com/users/3723423/christophe"}, "is_accepted": false, "score": 0, "last_activity_date": 1549488965, "creation_date": 1549488965, "answer_id": 54562896, "question_id": 54562710, "link": "https://stackoverflow.com/questions/54562710/can-a-class-contain-as-a-member-a-base-class-which-is-later-specialized-to-a-der/54562896#54562896", "title": "Can a class contain as a member a Base class which is later specialized to a Derived class?", "body": "<p>Yes, this is possible, but mything must be a pointer or a reference to a polymorphic object.  If you keep it as a plain object, you would have <a href=\"https://en.wikipedia.org/wiki/Object_slicing\" rel=\"nofollow noreferrer\">slicing</a>. </p>\n\n<pre><code>class BIG{\n    Base *mything;\n\npublic: \n    BIG(int Type){\n        if (Type==0)\n           mything = new DerivedA();\n        else if (Type==1)\n           mything = new DerivedB();\n    }\n};\n</code></pre>\n\n<p>Of course, this suppose that both <code>DerivedA</code> and <code>DerivedB</code> inherit publicly from <code>Base</code>. If you want the right <code>dostuff()</code> function to be called, you also need to make it <code>virtual</code> (this is not specific to your problem, but to polymorphic classes), as well as have a virtual destructor.  </p>\n\n<p>Finally, you'd need to take care of the <a href=\"https://en.wikipedia.org/wiki/Rule_of_three_(C%2B%2B_programming)\" rel=\"nofollow noreferrer\">rule of 3</a> if you don't want to suffer from nasty allocation/deallocation errors.  A more convenient alterative is therefore to use a smart pointer instead of a raw pointer and let the smart pointer take care of copies, and destruction.  </p>\n\n<p><em>Comment: it's a question of style which is irrelevant here, but try to take the good habits and avoid an all cap class name ;-)</em>  </p>\n"}], "owner": {"reputation": 35, "user_id": 11018673, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29267748b9a3f83574c67ccb615c190d?s=128&d=identicon&r=PG&f=1", "display_name": "Wes", "link": "https://stackoverflow.com/users/11018673/wes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "closed_date": 1549529772, "accepted_answer_id": 54562808, "answer_count": 2, "score": -1, "last_activity_date": 1549488965, "creation_date": 1549487983, "last_edit_date": 1549488564, "question_id": 54562710, "link": "https://stackoverflow.com/questions/54562710/can-a-class-contain-as-a-member-a-base-class-which-is-later-specialized-to-a-der", "closed_reason": "Needs details or clarity", "title": "Can a class contain as a member a Base class which is later specialized to a Derived class?", "body": "<p>Can I have a class (\"BIG\") which has another class as a member (of type \"Base\"), so that upon construction, this \"Base\" member will actually be set to a derived class?</p>\n\n<p>In particular, I want to have</p>\n\n<pre><code>class Base{\n  public:\n    void dostuff(){};\n};\n\nclass DerivedA : public Base{\n  public:\n    void dostuff(){\n     //implementation version A \n    }\n};\n\n\nclass DerivedB : public Base{\n  public:\n    void dostuff(){\n     //implementation version B \n    }\n};\n\nclass BIG{\n Base mything;\n\n BIG(int Type){\n  if (Type==0)\n   mything=DerivedA();\n  if (Type==1)\n   mything=DerivedB();\n }\n};\n</code></pre>\n\n<p>Does C++ not allow this.  In particular, I would be \"Downcasting\" mything from a Base to a DerivedA or a DerivedB.  Am I correct that Downcasting is only allowed from Base <em>pointers</em> to Derived <em>pointers</em>, and only when the Base pointer is actually already a pointer to a Derived class?</p>\n"}, {"tags": ["c++", "c++11", "pointers", "smart-pointers"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 3, "creation_date": 1549487204, "post_id": 54562534, "comment_id": 95923967, "body": "What have you tried?  It should be pretty easy to change <code>std::vector&lt;Bar *&gt; m_member;</code> to <code>std::vector&lt;std::unique_ptr&lt;Bar&gt;&gt; m_member;</code>.  Then if you need to delete an element you just <code>erase</code> it."}, {"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1549487279, "post_id": 54562534, "comment_id": 95924009, "body": "(I would actually use unique_ptr and not shared_ptr in this case)."}, {"owner": {"reputation": 2055, "user_id": 6564148, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u3HL5.png?s=128&g=1", "display_name": "George", "link": "https://stackoverflow.com/users/6564148/george"}, "edited": false, "score": 4, "creation_date": 1549487899, "post_id": 54562534, "comment_id": 95924253, "body": "Why pointers at all, would <code>std::vector&lt;Bar &gt;</code> not suffice?"}], "answers": [{"comments": [{"owner": {"reputation": 86, "user_id": 8350330, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/d3NMt.jpg?s=128&g=1", "display_name": "Adam Brinded", "link": "https://stackoverflow.com/users/8350330/adam-brinded"}, "edited": false, "score": 2, "creation_date": 1549487349, "post_id": 54562572, "comment_id": 95924040, "body": "Just to point out, std::make_unique is a c++14 function."}, {"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "reply_to_user": {"reputation": 86, "user_id": 8350330, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/d3NMt.jpg?s=128&g=1", "display_name": "Adam Brinded", "link": "https://stackoverflow.com/users/8350330/adam-brinded"}, "edited": false, "score": 0, "creation_date": 1549487411, "post_id": 54562572, "comment_id": 95924066, "body": "@AdamBrinded Very good point. I thought about it and forgot to add it."}, {"owner": {"reputation": 86, "user_id": 8350330, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/d3NMt.jpg?s=128&g=1", "display_name": "Adam Brinded", "link": "https://stackoverflow.com/users/8350330/adam-brinded"}, "edited": false, "score": 1, "creation_date": 1549487779, "post_id": 54562572, "comment_id": 95924207, "body": "It\u2019s worth checking however, if your compiler(s) for a particular project support make_unique in c++11. If it does then make_unique is probably preferable."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1549490532, "post_id": 54562572, "comment_id": 95925369, "body": "And custom deletion might use erase-remove idiom now :)"}, {"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1549490680, "post_id": 54562572, "comment_id": 95925427, "body": "@Jarod42 Depends, OP doesn&#39;t seem to want to remove the entry itself. At least not in what he showed us."}], "tags": [], "owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "is_accepted": false, "score": 3, "last_activity_date": 1549487394, "last_edit_date": 1549487394, "creation_date": 1549487257, "answer_id": 54562572, "question_id": 54562534, "link": "https://stackoverflow.com/questions/54562534/raw-pointer-vs-smart-pointer-in-c11/54562572#54562572", "title": "Raw pointer vs smart-pointer in C++11", "body": "<p>It's actually far easier with smart pointers, and here <code>unique_ptr</code>.</p>\n\n<p>Population is done through:</p>\n\n<pre><code>m_member.push_back(std::make_unique&lt;Bar&gt;()); // C++14, you can use std::unique_ptr&lt;Bar&gt;(new Bar) is you only have C++11\n</code></pre>\n\n<p>No need for a destructor.</p>\n\n<p>For custom deletion:</p>\n\n<pre><code>for(auto&amp; p: m_member)\n{\n    if( p-&gt;GetFieldFromBar() == &lt;user_specified_condition&gt; )\n    {\n        p.reset();\n    }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 4317, "user_id": 945871, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/b9b646cc701a3b906179ccf9ee68c350?s=128&d=identicon&r=PG", "display_name": "Igor", "link": "https://stackoverflow.com/users/945871/igor"}, "edited": false, "score": 0, "creation_date": 1549519081, "post_id": 54562696, "comment_id": 95932435, "body": "the question is marked with <code>c++11</code>, not <code>c++14</code>. Does this mean that the constructor will be <code>m_member.push_back( std::unique_ptr&lt;Bar&gt;( new Bar() ) )</code>?"}, {"owner": {"reputation": 10055, "user_id": 2466431, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/gSQh3.png?s=128&g=1", "display_name": "JVApen", "link": "https://stackoverflow.com/users/2466431/jvapen"}, "reply_to_user": {"reputation": 4317, "user_id": 945871, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/b9b646cc701a3b906179ccf9ee68c350?s=128&d=identicon&r=PG", "display_name": "Igor", "link": "https://stackoverflow.com/users/945871/igor"}, "edited": false, "score": 0, "creation_date": 1549520791, "post_id": 54562696, "comment_id": 95933038, "body": "Or emplace_back(new Bar()); unless you use libraries like absail or your STL exposes this also in c++11 mode"}], "tags": [], "owner": {"reputation": 10055, "user_id": 2466431, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/gSQh3.png?s=128&g=1", "display_name": "JVApen", "link": "https://stackoverflow.com/users/2466431/jvapen"}, "is_accepted": false, "score": 0, "last_activity_date": 1549487884, "creation_date": 1549487884, "answer_id": 54562696, "question_id": 54562534, "link": "https://stackoverflow.com/questions/54562534/raw-pointer-vs-smart-pointer-in-c11/54562696#54562696", "title": "Raw pointer vs smart-pointer in C++11", "body": "<p>Yes, using <code>std::vector&lt;std::unique_ptr&lt;Bar&gt;&gt;</code> is ideal in this case. You clearly have ownership in the vector. </p>\n\n<p>Adding elements to it can be done the following in c++14:</p>\n\n<pre><code>m_member.push_back( std::make_unique&lt;Bar&gt;() );\n</code></pre>\n\n<p>Removing all elements gets reduced to: <code>m_member.clear()</code>   or even just letting it go out of scope.</p>\n\n<p>Selectively removing the elements is better done like:</p>\n\n<pre><code>m_member.erase(std::remove_if(m_member.begin(), m_member.end(), [&amp;](auto &amp;&amp;ptr) { return ptr-&gt;GetFieldFromBar() == &lt;user_specified_condition&gt;; }), m_member.end());\n</code></pre>\n\n<p>A bit descriptive for dealing with all elements, though, you can wrap it in a function to get rid of the boiler plate.</p>\n"}], "owner": {"reputation": 4317, "user_id": 945871, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/b9b646cc701a3b906179ccf9ee68c350?s=128&d=identicon&r=PG", "display_name": "Igor", "link": "https://stackoverflow.com/users/945871/igor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1152, "favorite_count": 0, "closed_date": 1549487228, "answer_count": 2, "score": 0, "last_activity_date": 1549487884, "creation_date": 1549487083, "last_edit_date": 1549487225, "question_id": 54562534, "link": "https://stackoverflow.com/questions/54562534/raw-pointer-vs-smart-pointer-in-c11", "closed_reason": "Duplicate", "title": "Raw pointer vs smart-pointer in C++11", "body": "<p>I'm trying to understand how can I substitute raw pointers on my C++ software with smart-pointers.</p>\n\n<p>I have the following code:</p>\n\n<pre><code>class Foo\n{\nprivate:\n    std::vector&lt;Bar *&gt; m_member;\n};\n</code></pre>\n\n<p>Now in some function I populate that vector with:</p>\n\n<pre><code>m_member.push_back( new Bar() );\n</code></pre>\n\n<p>and when my program finishes I delete the memory with:</p>\n\n<pre><code>for( std::vector&lt;Bar *&gt;::iterator it = m_member.begin(); it &lt; m_member.end(); ++it )\n{\n    delete (*it);\n    (*it) = NULL;\n}\n</code></pre>\n\n<p>Now all this is good.</p>\n\n<p>The problem is as I see it comes from the fact that at one point of time I may need to delete one of the member from the vector (this member is user-specified).</p>\n\n<p>Now this is easy:</p>\n\n<pre><code>for(...)\n{\n    if( (*it)-&gt;GetFieldFromBar() == &lt;user_specified_condition&gt; )\n    {\n        delete (*it);\n        (*it) = NULL;\n    }\n}\n</code></pre>\n\n<p>But how do I re-write it with the smart pointers? Is it even possible?</p>\n"}, {"tags": ["c++", "c", "arrays", "multidimensional-array", "arduino"], "comments": [{"owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 2, "creation_date": 1549486039, "post_id": 54562271, "comment_id": 95923465, "body": "please create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. What is the type of <code>storage</code>?"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1549486062, "post_id": 54562271, "comment_id": 95923469, "body": "We have no idea what <code>storage</code> is."}, {"owner": {"reputation": 344, "user_id": 7753291, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3d183f147e8f5265b8bc1f76ef48fb1?s=128&d=identicon&r=PG", "display_name": "Felix Kunz", "link": "https://stackoverflow.com/users/7753291/felix-kunz"}, "edited": false, "score": 0, "creation_date": 1549486151, "post_id": 54562271, "comment_id": 95923508, "body": "sorry... better now?"}, {"owner": {"reputation": 12749, "user_id": 7976805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92a559df8b4b287aad23724b4c66d67c?s=128&d=identicon&r=PG&f=1", "display_name": "Yksisarvinen", "link": "https://stackoverflow.com/users/7976805/yksisarvinen"}, "edited": false, "score": 7, "creation_date": 1549486178, "post_id": 54562271, "comment_id": 95923521, "body": "For array <code>int storage[7]</code> the maximum index you can access is <code>6</code>"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 4, "creation_date": 1549486194, "post_id": 54562271, "comment_id": 95923528, "body": "<code>int storage[127][7];</code> -- This is an out-of-bounds access: <code>Serial.println(storage[48][7] ,BIN);</code>.  Array indexing starts from 0 and go to <code>n-1</code>, where <code>n</code> is the total number of entries."}, {"owner": {"reputation": 344, "user_id": 7753291, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3d183f147e8f5265b8bc1f76ef48fb1?s=128&d=identicon&r=PG", "display_name": "Felix Kunz", "link": "https://stackoverflow.com/users/7753291/felix-kunz"}, "reply_to_user": {"reputation": 12749, "user_id": 7976805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92a559df8b4b287aad23724b4c66d67c?s=128&d=identicon&r=PG&f=1", "display_name": "Yksisarvinen", "link": "https://stackoverflow.com/users/7976805/yksisarvinen"}, "edited": false, "score": 0, "creation_date": 1549486303, "post_id": 54562271, "comment_id": 95923572, "body": "@Yksisarvinen Thank you so much! Beginner mistake. I knew arrays start at 0, and i kinda assumed they would start counting there ;)"}, {"owner": {"reputation": 5508, "user_id": 794749, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pfE2l.jpg?s=128&g=1", "display_name": "gre_gor", "link": "https://stackoverflow.com/users/794749/gre-gor"}, "edited": false, "score": 0, "creation_date": 1549491964, "post_id": 54562271, "comment_id": 95925885, "body": "<code>int storage[128][8];</code> needs 2048 bytes of memory and an Arduino Uno has only same 2048 bytes of available memory."}, {"owner": {"reputation": 344, "user_id": 7753291, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3d183f147e8f5265b8bc1f76ef48fb1?s=128&d=identicon&r=PG", "display_name": "Felix Kunz", "link": "https://stackoverflow.com/users/7753291/felix-kunz"}, "reply_to_user": {"reputation": 5508, "user_id": 794749, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pfE2l.jpg?s=128&g=1", "display_name": "gre_gor", "link": "https://stackoverflow.com/users/794749/gre-gor"}, "edited": false, "score": 0, "creation_date": 1549492566, "post_id": 54562271, "comment_id": 95926094, "body": "@gre_gor i&#39;m using the mega ;)"}], "answers": [{"tags": [], "owner": {"reputation": 33645, "user_id": 2630032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hQF09.jpg?s=128&g=1", "display_name": "Stephan Lechner", "link": "https://stackoverflow.com/users/2630032/stephan-lechner"}, "is_accepted": true, "score": 2, "last_activity_date": 1549486748, "creation_date": 1549486748, "answer_id": 54562461, "question_id": 54562271, "link": "https://stackoverflow.com/questions/54562271/2d-array-deletes-elements-itself-when-new-elements-get-stored/54562461#54562461", "title": "2D-Array deletes elements itself when new elements get stored", "body": "<p>You are defining a 2D-array with row-size <code>7</code>, but you access 8 elements of a single row:</p>\n\n<pre><code> int storage[127][7];\n\n storage[48][0] =0b01111110;\n ...\n storage[48][7] =0b01111110;\n</code></pre>\n\n<p>Note that 0..7 are actually 8 elements, not 7. So you'd have to define <code>storage</code> as...</p>\n\n<pre><code> int storage[127][8];\n</code></pre>\n\n<p>One might discuss now if <code>int storage[127][7];storage[48][7] =0b01111110</code> is undefined behaviour;</p>\n\n<p>Yet the most probably behaviour is that <code>storage[48][7]</code> maps to the same memory address as <code>storage[49][0]</code>. Hence, when you assign <code>storage[49][0] =0b00000000;</code>, then you write to <code>storage[48][7]</code> \"as well\" and it will become <code>0b0000000</code>.</p>\n"}], "owner": {"reputation": 344, "user_id": 7753291, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3d183f147e8f5265b8bc1f76ef48fb1?s=128&d=identicon&r=PG", "display_name": "Felix Kunz", "link": "https://stackoverflow.com/users/7753291/felix-kunz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "closed_date": 1549874925, "accepted_answer_id": 54562461, "answer_count": 1, "score": -1, "last_activity_date": 1583497871, "creation_date": 1549485859, "last_edit_date": 1583497871, "question_id": 54562271, "link": "https://stackoverflow.com/questions/54562271/2d-array-deletes-elements-itself-when-new-elements-get-stored", "closed_reason": "Not suitable for this site", "title": "2D-Array deletes elements itself when new elements get stored", "body": "<p>edit: I didn't initialise the array with the right size. I should have used 8 instead of 7. I had to learn that Arrays start counting at 0, but when initialising the don't!</p>\n\n<p>I have a 2 dimensional Array storage[x][y] and want to store for each x value 8 different y values. For some reason I can read out a specific place in the array, for example [48][7] and after filling other spaces in the array the [48][7] value has changed even tough I never touched it. </p>\n\n<pre><code>int storage[127][7];\n\nvoid store(){\n storage[48][0] =0b01111110;\n storage[48][1] =0b01111110;\n storage[48][2] =0b11100011;\n storage[48][3] =0b11010011;\n storage[48][4] =0b11001011;\n storage[48][5] =0b11000111;\n storage[48][6] =0b01111110;\n storage[48][7] =0b01111110;\n\n\n   Serial.println(storage[48][7], BIN); // returns 01111110\n\n storage[49][0] =0b00000000;\n storage[49][1] =0b11000001;\n storage[49][2] =0b11000001;\n storage[49][3] =0b11111111;\n storage[49][4] =0b11111111;\n storage[49][5] =0b00000001;\n storage[49][6] =0b00000001;\n storage[49][7] =0b00000000;\n\n   Serial.println(storage[48][7], BIN); // returns 0\n}\n</code></pre>\n\n<p>Depending on the order in which I store the values some of them delete each other. </p>\n\n<p>Why do I suddenly lose data?</p>\n"}, {"tags": ["c++", "qt5"], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user10826999"}, "edited": false, "score": 0, "creation_date": 1549581794, "post_id": 54565284, "comment_id": 95964669, "body": "Thanks Jeremy, that worked fine! Exactly what I was looking for and actually adding a timer it is a good idea."}], "tags": [], "owner": {"reputation": 56858, "user_id": 131930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91536fe27d32713b8a154a0bf42f6748?s=128&d=identicon&r=PG", "display_name": "Jeremy Friesner", "link": "https://stackoverflow.com/users/131930/jeremy-friesner"}, "is_accepted": true, "score": 0, "last_activity_date": 1549505153, "creation_date": 1549505153, "answer_id": 54565284, "question_id": 54562218, "link": "https://stackoverflow.com/questions/54562218/how-to-select-a-specific-entire-colum-of-a-qtableview/54565284#54565284", "title": "How to select a specific entire colum of a QTableView", "body": "<p>I don't know if this is the most elegant way to do it, but I was able to get (what I believe is) the behavior you want by modifying Qt's \"FrozenColumn\" example program (in $QTDIR/qtbase/examples/widgets/itemviews/frozencolumn) in the following way:</p>\n\n<p>In <code>freezetablewidget.h</code>, add the following declarations inside the <code>private slots:</code> section:</p>\n\n<pre><code>void currentColumnChanged(const QModelIndex &amp;);  \nvoid autoSelectMagicColumn();\n</code></pre>\n\n<p>In <code>freezetablewidget.cpp</code>, add a <code>#include &lt;QTimer&gt;</code> to the includes-section at the top, then add the following lines to the end of the <code>FreezeTableWidget::init()</code> method:</p>\n\n<pre><code>connect(frozenTableView-&gt;selectionModel(), SIGNAL(currentColumnChanged(const QModelIndex &amp;, const QModelIndex &amp;)), this, SLOT(currentColumnChanged(const QModelIndex &amp;)));\nconnect(frozenTableView-&gt;selectionModel(), SIGNAL(currentRowChanged(const QModelIndex &amp;, const QModelIndex &amp;)), this, SLOT(currentColumnChanged(const QModelIndex &amp;)));  // optional\n</code></pre>\n\n<p>... and finally, add the following new lines into <code>freezetablewidget.cpp</code>:</p>\n\n<pre><code>const int magicColumnIndex = 2;  // or whichever column you want the auto-selecting to happen on\n\nvoid FreezeTableWidget::currentColumnChanged(const QModelIndex &amp; mi)\n{\n   const int col = mi.column();\n   if (col == magicColumnIndex)\n   {\n      // Auto-select the entire column!  (Gotta schedule it be done later \n      //  since it doesn't work if I just call selectColumn() directly at this point)\n      QTimer::singleShot(100, this, SLOT(autoSelectMagicColumn()));\n   }\n}\n\nvoid FreezeTableWidget::autoSelectMagicColumn()\n{\n    // Double-check that the focus is still on the magic column index, in case the user moves fast\n    if (selectionModel()-&gt;currentIndex().column() == magicColumnIndex) frozenTableView-&gt;selectColumn(magicColumnIndex);\n}\n</code></pre>\n\n<p>With the above changes, the FrozenColumn example app will auto-select the entire \"YDS\" column whenever I click on any cell in that column (or navigate to any cell in that column via the arrow keys).  Perhaps you can do something similar in your program.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user10826999"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 0, "accepted_answer_id": 54565284, "answer_count": 1, "score": 0, "last_activity_date": 1549505153, "creation_date": 1549485623, "question_id": 54562218, "link": "https://stackoverflow.com/questions/54562218/how-to-select-a-specific-entire-colum-of-a-qtableview", "title": "How to select a specific entire colum of a QTableView", "body": "<p>I have a QTableView with three columns like the example below: </p>\n\n<p>|   <strong>Id</strong>    |    <strong>name</strong>    |    <strong>ACoord</strong>    |</p>\n\n<p>I am trying to highlight the entire ACoord column no matter which cell I am clicking on in the ACoord only.</p>\n\n<p>I have tried several examples but nothing is helpful.\nThe most promising (also from official QT documentation) seems to be <code>setSelectionBehavior(QAbstractItemView::SelectColumns)</code> but didn't work exactly as I need. </p>\n\n<p>Here is the snipped of code:</p>\n\n<pre><code>connect(mTurnIntoExcelData, &amp;QAction::triggered, [&amp;]() {\n        int row = -1, column = -1;\n        QString reference;\n        QString type;\n        QModelIndex index;\n        int rowModel = index.row();\n        SelectionData currentData;\n\n        for(int i = 0; i &lt; ui-&gt;tableViewLeft-&gt;model()-&gt;columnCount(); i++)\n        {\n          if(ui-&gt;tableViewLeft-&gt;model()-&gt;headerData(i, Qt::Horizontal).toString() == \"ACoord\") {\n              column = i;\n              ui-&gt;tableViewLeft-&gt;setSelectionBehavior(QAbstractItemView::SelectColumns);\n              ui-&gt;tableViewLeft-&gt;setSelectionMode(QAbstractItemView::SingleSelection);\n              type = \"ACoord\";\n      }\n</code></pre>\n\n<p>The expected result is: I click on any cell of the ACoord and the entire column becomes selectable.</p>\n\n<p>However, the actual result is that if I click on any cell of ACoord column I am not able to select the entire column, but only the single cell.</p>\n\n<p>Thanks for any insight.</p>\n"}, {"tags": ["c++", "c++11", "templates", "overriding"], "answers": [{"tags": [], "owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "is_accepted": false, "score": 2, "last_activity_date": 1549486697, "last_edit_date": 1592644375, "creation_date": 1549485789, "answer_id": 54562257, "question_id": 54562138, "link": "https://stackoverflow.com/questions/54562138/how-to-create-compile-time-check-for-multiple-c-types/54562257#54562257", "title": "How to create compile time check for multiple C++ types?", "body": "<blockquote>\n<p>Therefore I need to generate at compile time either a <code>std::true_type</code> or <code>std::false_type</code>.</p>\n<p>Given a <code>template&lt;class Class&gt;</code>, I need a <code>std::true_type</code> if any of these expressions are true [...]</p>\n</blockquote>\n<p>Remembering that <code>std::true_type</code> and <code>std::false_type</code> are alias, respectively, for</p>\n<pre><code>std::integral_constant&lt;bool, true&gt;; // aka std::true_type\nstd::integral_constant&lt;bool, false&gt;; // aka std::false_type\n</code></pre>\n<p>if I understand correctly, you want this or something similar</p>\n<pre><code>using tct = typename std::decay&lt;Class&gt;::type; // to make shorter\n\nusing yourType = std::integral_constant&lt;bool, std::is_same&lt;tct, char * &gt;::value\n                                           || std::is_same&lt;tct, const char * &gt;::value\n                                           || std::is_same&lt;tct, string &gt;::value\n                                           || std::is_same&lt;tct, string *&gt;::value\n                                           || std::is_same&lt;tct, const string *&gt;::value&gt;;\n</code></pre>\n<blockquote>\n<p>Related question, is there a way to drop the <code>const</code> in a <code>const char *</code> to make it <code>char *</code>?</p>\n</blockquote>\n<p>I suppose you can create a custom template as follows</p>\n<pre><code>template &lt;typename T&gt;\nstruct foo\n { using type = T; };\n\ntemplate &lt;typename T&gt;\nstruct foo&lt;T const *&gt;\n { using type = T *; };\n</code></pre>\n<p>So you can simplify the preceding code as follows</p>\n<pre><code>using tct = typename std::decay&lt;Class&gt;::type; // to make shorter\nusing tft = typename foo&lt;tct&gt;::type\n\nusing yourType = std::integral_constant&lt;bool, std::is_same&lt;tft, char * &gt;::value\n                                           || std::is_same&lt;tft, string &gt;::value\n                                           || std::is_same&lt;tft, string *&gt;::value&gt;;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 465, "user_id": 4715518, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-KXsCxW7jiNI/AAAAAAAAAAI/AAAAAAAAADE/re2tSvSBz2c/photo.jpg?sz=128", "display_name": "hoo2", "link": "https://stackoverflow.com/users/4715518/hoo2"}, "is_accepted": false, "score": 0, "last_activity_date": 1549490271, "last_edit_date": 1549490271, "creation_date": 1549487586, "answer_id": 54562642, "question_id": 54562138, "link": "https://stackoverflow.com/questions/54562138/how-to-create-compile-time-check-for-multiple-c-types/54562642#54562642", "title": "How to create compile time check for multiple C++ types?", "body": "<p>I like max66's answer. Simple and elegant.</p>\n\n<p>If you need a more classic metafunction solution (i.e. something like <code>check_type_t&lt;T&gt;</code>) and you don't want to use any meta-programming library like <code>boost::mpl</code> or <code>boost::hana</code> etc... You can simply do the following:</p>\n\n<pre><code>template &lt;class Class, class = void&gt;\nstruct check_type_ {\n   using type = std::false_type;\n};\n\ntemplate &lt;class Class&gt;\nstruct check_type_&lt;Class,\n   std::enable_if_t&lt;\n      std::is_same&lt;typename std::decay&lt;std::remove_const_t&lt;Class&gt;&gt;::type, char*&gt;::value\n&gt;&gt; {\n   using type = std::true_type;\n};\n\ntemplate &lt;class Class&gt;\nstruct check_type_&lt;Class,\n   std::enable_if_t&lt;\n      std::is_same&lt;typename std::decay&lt;std::remove_const_t&lt;Class&gt;&gt;::type, string*&gt;::value\n&gt;&gt; {\n   using type = std::true_type;\n};\ntemplate &lt;class Class&gt;\nstruct check_type_&lt;Class,\n   std::enable_if_t&lt;\n      std::is_same&lt;typename std::decay&lt;Class&gt;::type, string&gt;::value\n&gt;&gt; {\n   using type = std::true_type;\n};\n\ntemplate &lt;class Class&gt;\nusing check_type_t = typename check_type_&lt;Class&gt;::type;\n\nstatic_assert(std::is_same&lt;check_type_t&lt;char*&gt;, std::true_type&gt;::value, \"\");\nstatic_assert(!std::is_same&lt;check_type_t&lt;int&gt;, std::true_type&gt;::value, \"\");\n</code></pre>\n\n<p>C++ will try to select the most specialized template so when any of the type you want(for example string) is passed to <code>Class</code> in <code>check_type_t&lt;&gt;</code> then the</p>\n\n<pre><code>std::enable_if_t&lt;\n   std::is_same&lt;typename std::decay&lt;Class&gt;::type, string&gt;::value\n&gt;\n</code></pre>\n\n<p>is not ill formed and resulting to <code>void</code>. So this specialization is selected and the type inside is <code>std::true_type</code>. If none of the specializations is well formed then the main template is selected and the result is <code>std::false_type</code>.</p>\n\n<p>I hope it helped.</p>\n"}, {"tags": [], "owner": {"reputation": 1759, "user_id": 6661174, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OBv75.jpg?s=128&g=1", "display_name": "rmawatson", "link": "https://stackoverflow.com/users/6661174/rmawatson"}, "is_accepted": true, "score": 2, "last_activity_date": 1550012929, "last_edit_date": 1550012929, "creation_date": 1549498632, "answer_id": 54564563, "question_id": 54562138, "link": "https://stackoverflow.com/questions/54562138/how-to-create-compile-time-check-for-multiple-c-types/54564563#54564563", "title": "How to create compile time check for multiple C++ types?", "body": "<p>For your first question,</p>\n\n<p>If you're using c++17 you can do this in a few lines using a fold expression</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\ntemplate &lt;typename C, typename... Ts&gt; \nusing matches_my_types = std::bool_constant&lt; ( ... | std::is_same&lt;C,Ts&gt;::value)&gt;;\n\n//or with a predefined set of types..\ntemplate &lt;typename C&gt;\nusing matches_my_predefined_set_of_types = matches_my_types&lt;C,bool,double,int&gt;;\n\nint main() {\n\n    using Class = int; \n    std::cout &lt;&lt; matches_my_types&lt;Class,bool,double,int&gt;::value &lt;&lt; std::endl;\n    std::cout &lt;&lt; matches_my_predefined_set_of_types&lt;Class&gt;::value &lt;&lt; std::endl;   \n    return 0;\n}\n</code></pre>\n\n<p><a href=\"https://wandbox.org/permlink/bKuI2jDq4RL4tdec\" rel=\"nofollow noreferrer\">Demo</a></p>\n\n<p>For c++11 you can do something similar, but using recursion in place of the fold.</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\ntemplate&lt;typename B, typename...Bs&gt; struct any_true\n    : std::conditional_t&lt;bool(B::value), B, any_true&lt;Bs...&gt;&gt;{};\ntemplate&lt;typename B&gt; struct any_true&lt;B&gt; : B {};\n\ntemplate &lt;typename C, typename... Ts&gt; \nusing matches_my_types = any_true&lt;std::is_same&lt;C,Ts&gt;...&gt;;\n\n\nint main() {\n\n    using Class = int;\n    std::cout &lt;&lt; matches_my_types&lt;Class,bool,double,int&gt;::value &lt;&lt; std::endl;\n    return 0;\n}\n</code></pre>\n\n<p><a href=\"https://ideone.com/9ewkJw\" rel=\"nofollow noreferrer\">Demo</a></p>\n\n<p>For your second question, if you want a general remove const on pointer to const T, you can use the built in type_traits and conditional,</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;typeinfo&gt;\n\nusing namespace std;\n\ntemplate &lt;typename T&gt;\nusing remove_const_if_pointer_to_const = \n    std::conditional_t&lt;std::is_pointer&lt;T&gt;::value,\n        std::add_pointer_t&lt;std::remove_const_t&lt;std::remove_pointer_t&lt;T&gt;&gt;&gt;,\n        T&gt;;\n\nint main() {\n\n    using A = int;\n    using B = int*;\n    using C = const int*;\n\n    std::cout &lt;&lt; typeid(remove_const_if_pointer_to_const&lt;A&gt;).name() &lt;&lt; std::endl;\n    std::cout &lt;&lt; typeid(remove_const_if_pointer_to_const&lt;B&gt;).name() &lt;&lt; std::endl;\n    std::cout &lt;&lt; typeid(remove_const_if_pointer_to_const&lt;C&gt;).name() &lt;&lt; std::endl;\n\n    return 0;\n}\n</code></pre>\n\n<p><a href=\"https://ideone.com/9ewkJw\" rel=\"nofollow noreferrer\">Demo</a></p>\n"}], "owner": {"reputation": 36033, "user_id": 115751, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/FkIiK.png?s=128&g=1", "display_name": "WilliamKF", "link": "https://stackoverflow.com/users/115751/williamkf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 189, "favorite_count": 0, "accepted_answer_id": 54564563, "answer_count": 3, "score": 2, "last_activity_date": 1550012929, "creation_date": 1549485266, "last_edit_date": 1549486827, "question_id": 54562138, "link": "https://stackoverflow.com/questions/54562138/how-to-create-compile-time-check-for-multiple-c-types", "title": "How to create compile time check for multiple C++ types?", "body": "<p>I have a <code>template &lt;class Class&gt;</code> generic function that includes:</p>\n\n<pre><code>std::ostringsteam objectStream;\n\nobjectStream &lt;&lt; std::forward&lt;Class&gt;(object);\n\nreturn objectStream.str();\n</code></pre>\n\n<p>For efficiency, I wish to optimize the case of <code>Class</code> strings.</p>\n\n<p>Therefore, I'm doing tags dispatch on templates for overloading the template function per item 27 is Scott Myers' Effective Modern C++ book.</p>\n\n<p>Therefore I need to generate at compile time either a <code>std::true_type</code> or <code>std::false_type</code>.</p>\n\n<p>Given a <code>template&lt;class Class&gt;</code>, I need a <code>std::true_type</code> if any of these expressions are true:</p>\n\n<pre><code>std::is_same&lt;typename std::decay&lt;Class&gt;::type,       char   * &gt;()\nstd::is_same&lt;typename std::decay&lt;Class&gt;::type, const char   * &gt;()\nstd::is_same&lt;typename std::decay&lt;Class&gt;::type,       string   &gt;()\nstd::is_same&lt;typename std::decay&lt;Class&gt;::type,       string * &gt;()\nstd::is_same&lt;typename std::decay&lt;Class&gt;::type, const string * &gt;()\n</code></pre>\n\n<p>I'm not sure how to do the OR so the compiler can dispatch on the tags at compile time correctly.</p>\n\n<p>Related question, is there a way to drop the <code>const</code> in a <code>const char *</code> to make it <code>char *</code>?</p>\n"}, {"tags": ["c++", "boost", "ntfs", "poco-libraries", "junction"], "comments": [{"owner": {"reputation": 7367, "user_id": 933879, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/9ea2cb8b89abb71678e847a5a88949ed?s=128&d=identicon&r=PG", "display_name": "Nathan Friedly", "link": "https://stackoverflow.com/users/933879/nathan-friedly"}, "edited": false, "score": 0, "creation_date": 1549638237, "post_id": 54562103, "comment_id": 95986333, "body": "I think this might be what I need: <a href=\"https://docs.microsoft.com/en-us/windows/desktop/api/fileapi/nf-fileapi-getfileattributesa\" rel=\"nofollow noreferrer\">docs.microsoft.com/en-us/windows/desktop/api/fileapi/&hellip;</a> - I&#39;ll post an answer if I can get it working (from <a href=\"https://stackoverflow.com/a/1343643/933879\">stackoverflow.com/a/1343643/933879</a>)"}, {"owner": {"reputation": 229, "user_id": 10918448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc2226af4f3e09f4c922563448dbec69?s=128&d=identicon&r=PG&f=1", "display_name": "Unterfliege", "link": "https://stackoverflow.com/users/10918448/unterfliege"}, "edited": false, "score": 1, "creation_date": 1549659075, "post_id": 54562103, "comment_id": 95996403, "body": "Why do you not use the standard filesystem lib of C++17? There you might want to try this function: <a href=\"https://en.cppreference.com/w/cpp/filesystem/is_symlink\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/filesystem/is_symlink</a>."}, {"owner": {"reputation": 7367, "user_id": 933879, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/9ea2cb8b89abb71678e847a5a88949ed?s=128&d=identicon&r=PG", "display_name": "Nathan Friedly", "link": "https://stackoverflow.com/users/933879/nathan-friedly"}, "reply_to_user": {"reputation": 229, "user_id": 10918448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc2226af4f3e09f4c922563448dbec69?s=128&d=identicon&r=PG&f=1", "display_name": "Unterfliege", "link": "https://stackoverflow.com/users/10918448/unterfliege"}, "edited": false, "score": 0, "creation_date": 1549670186, "post_id": 54562103, "comment_id": 95999846, "body": "Because symlinks are not quite the same thing as junctions - I&#39;m admittedly a c++ noob, but I couldn&#39;t find anything in the std lib about junctions."}, {"owner": {"reputation": 7367, "user_id": 933879, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/9ea2cb8b89abb71678e847a5a88949ed?s=128&d=identicon&r=PG", "display_name": "Nathan Friedly", "link": "https://stackoverflow.com/users/933879/nathan-friedly"}, "reply_to_user": {"reputation": 229, "user_id": 10918448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc2226af4f3e09f4c922563448dbec69?s=128&d=identicon&r=PG&f=1", "display_name": "Unterfliege", "link": "https://stackoverflow.com/users/10918448/unterfliege"}, "edited": false, "score": 0, "creation_date": 1549670312, "post_id": 54562103, "comment_id": 95999873, "body": "<a href=\"https://blogs.msdn.microsoft.com/aaron_margosis/2012/12/09/using-ntfs-junctions-to-fix-application-compatibility-issues-on-64-bit-editions-of-windows/\" rel=\"nofollow noreferrer\">blogs.msdn.microsoft.com/aaron_margosis/2012/12/09/&hellip;</a> has a bit more info about the difference between symlinks and junctions on Windows."}, {"owner": {"reputation": 229, "user_id": 10918448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc2226af4f3e09f4c922563448dbec69?s=128&d=identicon&r=PG&f=1", "display_name": "Unterfliege", "link": "https://stackoverflow.com/users/10918448/unterfliege"}, "edited": false, "score": 1, "creation_date": 1549708243, "post_id": 54562103, "comment_id": 96006027, "body": "I think there is no way to do this without scanning and analyzing the entire drive. But you might want to take a look at <a href=\"https://en.cppreference.com/w/cpp/filesystem/hard_link_count\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/filesystem/hard_link_count</a>. But even with this function you can&#39;t differ between the original and the hardlink, you can only check if there is anywhere a hardlink to your path (at least in Linux hard_link_count is 2+the number of subdirectories+the number of hardlinks). I don&#39;t know if this might help you."}], "answers": [{"tags": [], "owner": {"reputation": 7367, "user_id": 933879, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/9ea2cb8b89abb71678e847a5a88949ed?s=128&d=identicon&r=PG", "display_name": "Nathan Friedly", "link": "https://stackoverflow.com/users/933879/nathan-friedly"}, "is_accepted": true, "score": 0, "last_activity_date": 1550072066, "last_edit_date": 1550072066, "creation_date": 1550005879, "answer_id": 54658749, "question_id": 54562103, "link": "https://stackoverflow.com/questions/54562103/how-can-i-iterate-over-a-directory-and-identify-or-omit-ntfs-junctions-symlink/54658749#54658749", "title": "How can I iterate over a directory and identify or omit NTFS junctions (symlink-ish)", "body": "<p>Here's what I eventually came up with. It isn't a perfect solution - it's more of a heuristic than a proper identifier - but it seems to work well enough for my use case:</p>\n\n<pre><code>#ifdef _WIN32\n    #include &lt;windows.h&gt;\n#endif\n\nbool FileController::isNtfsJunction(const std::string&amp; dirPath) const {\n    #ifdef _WIN32\n        DWORD attrs = GetFileAttributesA(dirPath.c_str());\n        if (INVALID_FILE_ATTRIBUTES == attrs) {\n            DWORD err = GetLastError();\n            logger.error(\"Could not determine if path is NTFS Junction: %s. Error: %s\", dirPath, err);\n            return false;\n        }\n        return attrs &amp; FILE_ATTRIBUTE_DIRECTORY &amp;&amp;\n            attrs &amp; FILE_ATTRIBUTE_REPARSE_POINT &amp;&amp;\n            attrs &amp; FILE_ATTRIBUTE_HIDDEN &amp;&amp;\n            attrs &amp; FILE_ATTRIBUTE_SYSTEM;\n    #else\n        return false;\n    #endif\n}\n</code></pre>\n"}], "owner": {"reputation": 7367, "user_id": 933879, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/9ea2cb8b89abb71678e847a5a88949ed?s=128&d=identicon&r=PG", "display_name": "Nathan Friedly", "link": "https://stackoverflow.com/users/933879/nathan-friedly"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 109, "favorite_count": 0, "accepted_answer_id": 54658749, "answer_count": 1, "score": 3, "last_activity_date": 1550072066, "creation_date": 1549485125, "last_edit_date": 1549896733, "question_id": 54562103, "link": "https://stackoverflow.com/questions/54562103/how-can-i-iterate-over-a-directory-and-identify-or-omit-ntfs-junctions-symlink", "title": "How can I iterate over a directory and identify or omit NTFS junctions (symlink-ish)", "body": "<p>I have some code to list the files in a directory. For Windows Systems, I'm hoping to end up with a list of files and folders that matches what you'd see in Windows Explorer. For example, when I list C:\\ on Server 2016, I want to have the <code>Users</code> folder but not the <code>Documents and Settings</code> junction. Currently I'm getting both, with no apparent way of differentiating between them.</p>\n\n<p>My current code looks like this:</p>\n\n<pre><code>boost::filesystem::directory_iterator itr(dir);\nboost::filesystem::directory_iterator end;\nPoco::SharedPtr&lt;Poco::JSON::Array&gt; fileList(new Poco::JSON::Array);\nfor (; itr != end; ++itr) {\n    boost::filesystem::path entryPath = itr-&gt;path();\n    Poco::File file(entryPath.string());\n    // ...\n</code></pre>\n\n<p>I tried the Poco <code>isLink()</code> method, but it returns false for junctions. </p>\n\n<p>I also tried <code>Poco::DirectoryIterator</code>, which gives the same behavior as Boost, and <code>Poco::SortedDirectoryIterator</code>, which always throws <code>File access error: sharing violation: \\pagefile.sys</code> when reading <code>C:\\</code>.</p>\n\n<p>Ideally, this code should include symlinks on Linux and MacOS systems, while ignoring junctions on Windows.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1549484698, "post_id": 54561950, "comment_id": 95922869, "body": "<i>&quot;`Q2: is it good practice to do this?&quot;</i> Nope!"}, {"owner": {"reputation": 13300, "user_id": 2521225, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/39c72c6dc4d20a8e736f8ed0d08fa646?s=128&d=identicon&r=PG&f=1", "display_name": "samol", "link": "https://stackoverflow.com/users/2521225/samol"}, "edited": false, "score": 0, "creation_date": 1549484779, "post_id": 54561950, "comment_id": 95922899, "body": "Should I just loop through the <code>float * boxes8a</code> and copy the value into a <code>std::vector&lt;Box&gt;</code>?"}], "answers": [{"tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": false, "score": 3, "last_activity_date": 1549485702, "last_edit_date": 1549485702, "creation_date": 1549485334, "answer_id": 54562160, "question_id": 54561950, "link": "https://stackoverflow.com/questions/54561950/how-to-reinterpret-cast-an-array-and-is-it-safe-to-do-so/54562160#54562160", "title": "How to reinterpret cast an array and is it safe to do so?", "body": "<blockquote>\n  <p>Q1: how do I cast the <code>float* boxes8a</code> into an array of Box?</p>\n</blockquote>\n\n<p>This is not something you should solve by casting.  A <code>float*</code> and a <code>Box</code> are different things.  They both might be built with floats but they are aren't related so can't be cast to each other, as that would be a strict aliasing violation.</p>\n\n<blockquote>\n  <p>Q2: is it good practice to do this?</p>\n</blockquote>\n\n<p>No.  As stated above you aren't allowed to do so.</p>\n\n<p>What you can do though is use <a href=\"https://en.cppreference.com/w/cpp/string/byte/memcpy\" rel=\"nofollow noreferrer\"><code>std::memcpy</code></a> to copy the value of the <code>float</code> array into the <code>Box</code> array.  That would look like</p>\n\n<pre><code>float* boxes8a = some_data;\nBox array[correct_size];\nstatic_asset(sizeof(Box) == sizeof(float) * 8, \"data sizes are incompatible\");\nstd::memcpy(array, boxes8a, correct_size);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1549486098, "post_id": 54562177, "comment_id": 95923486, "body": "The padding isn&#39;t the problem (and padding can be removed with compiler-specific attributes). The problem is lying to the compiler!"}], "tags": [], "owner": {"reputation": 26087, "user_id": 1312406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5418f577abfa7c529dd026723462b440?s=128&d=identicon&r=PG", "display_name": "Paul Evans", "link": "https://stackoverflow.com/users/1312406/paul-evans"}, "is_accepted": false, "score": 0, "last_activity_date": 1549487225, "last_edit_date": 1549487225, "creation_date": 1549485408, "answer_id": 54562177, "question_id": 54561950, "link": "https://stackoverflow.com/questions/54561950/how-to-reinterpret-cast-an-array-and-is-it-safe-to-do-so/54562177#54562177", "title": "How to reinterpret cast an array and is it safe to do so?", "body": "<blockquote>\n  <p>Q1: how do I cast the float* boxes8a into an array of Box?</p>\n</blockquote>\n\n<pre><code>Box* boxes = std::reinterpret_cast&lt;Box*&gt;(boxes8a);\n</code></pre>\n\n<blockquote>\n  <p>Q2: is it good practice to do this?</p>\n</blockquote>\n\n<p>No, this is an abomination. <strike><code>struct point</code> can have padding inside or between elements in the array</strike>.  It's undefined behaviour. Please redesign your solution to the problem,</p>\n"}, {"tags": [], "owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "is_accepted": true, "score": 2, "last_activity_date": 1549485850, "creation_date": 1549485850, "answer_id": 54562269, "question_id": 54561950, "link": "https://stackoverflow.com/questions/54561950/how-to-reinterpret-cast-an-array-and-is-it-safe-to-do-so/54562269#54562269", "title": "How to reinterpret cast an array and is it safe to do so?", "body": "<blockquote>\n  <p><strong><em>How do I cast the <code>float* boxes8a</code> into an array of <code>Box</code>?</em></strong></p>\n</blockquote>\n\n<p>Dangerously.</p>\n\n<pre><code>//Undefined Behavior, might not do what you want it to do!\nBox* boxes = reinterpret_cast&lt;Box*&gt;(boxes8a); \n</code></pre>\n\n<blockquote>\n  <p><strong><em>Is it good practice to do this?</em></strong></p>\n</blockquote>\n\n<p>No.</p>\n\n<p>This is considered Undefined Behavior in C++, and while many compilers will give you results that seem like they work if you attempt this, I cannot advise it. Your best solution is to simply copy the values into <code>Box</code> objects and let the objects own their own data.</p>\n\n<pre><code>std::vector&lt;Box&gt; boxes(n);\nfor(size_t i = 0; i &lt; n; i++) {\n    for(int j = 0; j &lt; 4; j++)\n        boxes[i][j] = point{boxes8a[i*8 + j*2 + 0], boxes8a[i*8 + j*2 + 1]};\n}\n</code></pre>\n\n<p>Alternately, and at the risk of sounding like one of the Data-Oriented-Design <strike>Cultists</strike> Proponents, you might consider having the <code>Box</code> object simply contain a pointer to a location in the array where its data begins:</p>\n\n<pre><code>class point {\n    float* data;\npublic:\n    point(float* data) : data(data) {}\n\n    float&amp; x() const {return *data;}\n    float&amp; y() const {return *(data+1);}\n};\n\nclass Box {\n    float* data;\npublic:\n    Box(float* data) : data(data) {}\n\n    point operator[](size_t index) const {\n        return point(data + index * 2);\n    }\n};\n\nint main() {\n    std::vector&lt;Box&gt; boxes;\n    for(size_t i = 0; i &lt; n; i++)\n        boxes.emplace_back(boxes8a + i*8);\n\n    boxes[3][3].x() = 34.7; //Will alter the original value in boxes8a!\n}\n</code></pre>\n\n<p>This method will allow the <code>Box</code> objects to alias the original <code>float*</code> array without breaking aliasing rules.</p>\n"}], "owner": {"reputation": 13300, "user_id": 2521225, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/39c72c6dc4d20a8e736f8ed0d08fa646?s=128&d=identicon&r=PG&f=1", "display_name": "samol", "link": "https://stackoverflow.com/users/2521225/samol"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 187, "favorite_count": 0, "accepted_answer_id": 54562269, "answer_count": 3, "score": 1, "last_activity_date": 1582204535, "creation_date": 1549484582, "last_edit_date": 1582204535, "question_id": 54561950, "link": "https://stackoverflow.com/questions/54561950/how-to-reinterpret-cast-an-array-and-is-it-safe-to-do-so", "title": "How to reinterpret cast an array and is it safe to do so?", "body": "<pre><code>// this boxes8a contains a flat array of floats\n// There are n boxes and the array is n * 8 long\nfloat* boxes8a = ...;\n</code></pre>\n\n<p>I want to reinterpret this into an array of Box, where each box contains an array of 4 points. And each point contains 2 floats, (x, y)</p>\n\n<pre><code>struct Box\n{\n  point points[4]\n}\n\nstruct point\n{\n   float x, y\n}\n</code></pre>\n\n<p>Q1: How do I cast the <code>float* boxes8a</code> into an array of Box?</p>\n\n<p>Q2: Is it a good practice to do this? </p>\n"}, {"tags": ["c++", "loops", "while-loop", "logic"], "answers": [{"comments": [{"owner": {"reputation": 59, "user_id": 9288396, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee37a53ede7011b9922b887f7d27bd61?s=128&d=identicon&r=PG&f=1", "display_name": "Ameen Izhac", "link": "https://stackoverflow.com/users/9288396/ameen-izhac"}, "edited": false, "score": 0, "creation_date": 1549485262, "post_id": 54561851, "comment_id": 95923135, "body": "Oh ok thanks that clears eveything up, I just didnt carry on following the code after seeing that the interior loop doesnt run because I just assumed the code would end and now I also see why the variables dont need updating."}, {"owner": {"reputation": 59, "user_id": 9288396, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee37a53ede7011b9922b887f7d27bd61?s=128&d=identicon&r=PG&f=1", "display_name": "Ameen Izhac", "link": "https://stackoverflow.com/users/9288396/ameen-izhac"}, "edited": false, "score": 0, "creation_date": 1549485332, "post_id": 54561851, "comment_id": 95923166, "body": "Also, your implementation is actually much more simple, I dont know why but I just thought of a very bad way of doing it using k as a counter variable."}], "tags": [], "owner": {"reputation": 55420, "user_id": 52443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a220753dbb4d24a76430971a18ed4dce?s=128&d=identicon&r=PG", "display_name": "Welbog", "link": "https://stackoverflow.com/users/52443/welbog"}, "is_accepted": true, "score": 0, "last_activity_date": 1549484159, "creation_date": 1549484159, "answer_id": 54561851, "question_id": 54561746, "link": "https://stackoverflow.com/questions/54561746/while-does-this-simple-c-program-to-print-powers-of-2-work-when-there-are-so-m/54561851#54561851", "title": "while does this simple c++ program to print powers of 2 work when there are so many things wrong with it?", "body": "<p>Initial values:</p>\n\n<pre><code>i=1, k=1, j=1\n</code></pre>\n\n<p>Then we check <code>i &lt; 40</code>. True. Then we check <code>k &lt; i</code>. False. Then we increment <code>i</code>. Now:</p>\n\n<pre><code>i=2, k=1, j=1\n</code></pre>\n\n<p>Check <code>i &lt; 40</code>. True. Check <code>k &lt; i</code>. True. <code>j=j*2</code> sets <code>j=2</code>. Print <code>2</code>. Increment <code>k</code>. Check if <code>k &lt; i</code>. False. Increment <code>i</code>. Now:</p>\n\n<pre><code>i=3, k=2, j=2\n</code></pre>\n\n<p>Following this, the inner loop executes at most once for every iteration of the outer loop. <code>k &lt; i</code> is true until the <code>k++</code> line, and then becomes true again at the <code>i++</code> line.</p>\n\n<p>I'm not sure whether I understand why there are nested loops here in the first place. It could be replaced with</p>\n\n<pre><code>while (i &lt; 40) {\n  j = j * 2;\n  count &lt;&lt; j &lt;&lt; \"\\n\";\n  i++\n}\n</code></pre>\n\n<p>What was the intention of <code>k</code>?</p>\n"}], "owner": {"reputation": 59, "user_id": 9288396, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee37a53ede7011b9922b887f7d27bd61?s=128&d=identicon&r=PG&f=1", "display_name": "Ameen Izhac", "link": "https://stackoverflow.com/users/9288396/ameen-izhac"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 30, "favorite_count": 0, "accepted_answer_id": 54561851, "answer_count": 1, "score": -1, "last_activity_date": 1549513842, "creation_date": 1549483715, "last_edit_date": 1549513842, "question_id": 54561746, "link": "https://stackoverflow.com/questions/54561746/while-does-this-simple-c-program-to-print-powers-of-2-work-when-there-are-so-m", "title": "while does this simple c++ program to print powers of 2 work when there are so many things wrong with it?", "body": "<p>I wrote some code I wrote to print the powers of 2 up to like 39 or 40 idk but it dm. Anyway, I wrote it and rather than run the code and it not working because of a logic error, i ran the code and found that it works, and then spotted some logic errors showing that the code shouldn't work. Here is the code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nusing namespace std;\n\nint main()\n{\nint i = 1;\nint j = 1;\nint k = 1;\nwhile (i &lt; 40)\n{\n    while (k &lt; i)\n    {\n        j = j * 2;\n        cout &lt;&lt; j &lt;&lt;\"\\n\";\n        k++;\n    }\n    i++;\n}\n}\n</code></pre>\n\n<p>The output of this code is the powers of 2 up to about 2^40.</p>\n\n<p>Why it shouldn't work: the second while loop shouldn't run because k = 1 and i = 1 so (k &lt; i) is false. Also after each time the second while loop is completed, j and k should be reset to 1 in order for the logic to work however I don't resent them.\nCan someone please explain why although all these logic errors, the code still works?</p>\n\n<p>Also I tried this in python and got the same result.</p>\n"}, {"tags": ["c++", "type-inference"], "comments": [{"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1549483855, "post_id": 54561688, "comment_id": 95922500, "body": "<a href=\"https://stackoverflow.com/questions/tagged/haskell\">Yes</a>."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 1, "creation_date": 1549484269, "post_id": 54561688, "comment_id": 95922682, "body": "You may be interested in reading about <a href=\"https://stackoverflow.com/questions/6829241/perfect-forwarding-whats-it-all-about\">perfect forwarding</a>."}], "answers": [{"comments": [{"owner": {"reputation": 9606, "user_id": 3677097, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/b8c49e598194e53b9aba3a195da387a5?s=128&d=identicon&r=PG&f=1", "display_name": "Andreas DM", "link": "https://stackoverflow.com/users/3677097/andreas-dm"}, "edited": false, "score": 0, "creation_date": 1549484919, "post_id": 54561814, "comment_id": 95922978, "body": "+1, maybe worth mentioning that in c++17 you can let the compiler deduce the template arguments from constructor arguments <code>Pair ex1 = mkPair1 (2, &#39;a&#39;)</code>"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 9606, "user_id": 3677097, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/b8c49e598194e53b9aba3a195da387a5?s=128&d=identicon&r=PG&f=1", "display_name": "Andreas DM", "link": "https://stackoverflow.com/users/3677097/andreas-dm"}, "edited": false, "score": 0, "creation_date": 1549485058, "post_id": 54561814, "comment_id": 95923036, "body": "@AndreasDM I was thinking about that but is could be even further simplified to <code>Pair ex1(2, &#39;a&#39;);</code>.  Unfortunately I know there is a caveat for this case and I need to check my reference on what that is.  I might be able to add that in later tonight."}], "tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": true, "score": 7, "last_activity_date": 1549484075, "last_edit_date": 1549484075, "creation_date": 1549483977, "answer_id": 54561814, "question_id": 54561688, "link": "https://stackoverflow.com/questions/54561688/lazy-type-inference-for-curried-functions/54561814#54561814", "title": "Lazy type-inference for curried functions", "body": "<blockquote>\n  <p>even though the second type can be inferred from the following ('a') call.</p>\n</blockquote>\n\n<p>Yes, it could be inferred but the rules of C++ don't allow for that.  Type deduction only happens with the function parameters.  So if you are lacking a function parameter for the template parameter then you need to specify it yourself.</p>\n\n<p>That said, C++14's auto return type deduction and generic lambdas will save you from having to specify anything.  You can rewrite the code as</p>\n\n<pre><code>template &lt;class A, class B&gt;\nstruct Pair {\n  A left; B right;\n};\n\ntemplate &lt;class A, class B&gt;\nauto mkPair1 (A left, B right) {\n  return Pair&lt;A,B&gt;{ left, right };\n}\n\ntemplate &lt;class A&gt;\nauto mkPair2 (A left) {\n  return [left] (auto right) {\n    return Pair&lt;A, decltype(right)&gt;{ left, right };\n  };\n}\n\nPair&lt;int, char&gt; ex1 = mkPair1 (2, 'a');\nPair&lt;int, char&gt; ex2 = mkPair2 (2) ('a');\n</code></pre>\n\n<p>and everything will be deduced for you.  It also returns the lambda object, instead of <code>std::function</code> so you avoid the cost of the type erasure that <code>std::function</code> uses.</p>\n"}, {"tags": [], "owner": {"reputation": 21663, "user_id": 9305398, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cqJvE.png?s=128&g=1", "display_name": "Acorn", "link": "https://stackoverflow.com/users/9305398/acorn"}, "is_accepted": false, "score": 2, "last_activity_date": 1549485054, "creation_date": 1549485054, "answer_id": 54562087, "question_id": 54561688, "link": "https://stackoverflow.com/questions/54561688/lazy-type-inference-for-curried-functions/54562087#54562087", "title": "Lazy type-inference for curried functions", "body": "<p>In addition to @NathanOliver's answer, you can make it work for C++11 too by creating the equivalent of the generic lambda yourself:</p>\n\n<pre><code>template &lt;class A&gt;\nstruct X {\n    A left;\n    X(A left) : left(left) {}\n\n    template &lt;class B&gt;\n    Pair&lt;A,B&gt; operator()(B right) {\n        return Pair&lt;A,B&gt;{left, right};\n    }\n};\n</code></pre>\n\n<p>Then:</p>\n\n<pre><code>template &lt;class A&gt;\nX&lt;A&gt; mkPair2(A left) {\n    return X&lt;A&gt;(left);\n}\n</code></pre>\n"}], "owner": {"reputation": 1008, "user_id": 2302508, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/t3O8C.png?s=128&g=1", "display_name": "BlackCap", "link": "https://stackoverflow.com/users/2302508/blackcap"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 121, "favorite_count": 0, "accepted_answer_id": 54561814, "answer_count": 2, "score": 4, "last_activity_date": 1553258608, "creation_date": 1549483487, "last_edit_date": 1553258608, "question_id": 54561688, "link": "https://stackoverflow.com/questions/54561688/lazy-type-inference-for-curried-functions", "title": "Lazy type-inference for curried functions", "body": "<p>In the following example, type inference fails for the call to <code>mkPair2</code>:</p>\n\n<pre><code>#include &lt;functional&gt;\n\ntemplate &lt;class A, class B&gt;\nstruct Pair {\n  A left; B right;\n};\n\ntemplate &lt;class A, class B&gt;\nPair&lt;A,B&gt; mkPair1 (A left, B right) {\n  return (Pair&lt;A,B&gt;) { left, right };\n}\n\ntemplate &lt;class A, class B&gt;\nstd::function&lt;Pair&lt;A,B&gt;(B)&gt; mkPair2 (A left) {\n  return [left] (B right) {\n    return (Pair&lt;A,B&gt;) { left, right };\n  };\n}\n\nPair&lt;int, char&gt; ex1 = mkPair1 (2, 'a');\nPair&lt;int, char&gt; ex2 = mkPair2 (2) ('a');\n</code></pre>\n\n<p>The problem is that <code>mkPair2</code> has two template arguments, but the call <code>(2)</code> only provides it with one of them, so the compiler immediately throws its hands up and decides that the program is ambiguous, even though the second type can be inferred from the following <code>('a')</code> call.</p>\n\n<p>This can be resolved by giving the compiler the types manually <code>mkPair2&lt;int,char&gt; (2) ('a')</code>, but having to hold the compilers hand like that gets old really quickly.</p>\n\n<p>Is there any way to trick the compiler into continuing type checking, provided that every type will eventually be resolved?</p>\n"}, {"tags": ["c++", "windows", "winapi"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1549482476, "post_id": 54561420, "comment_id": 95921935, "body": "You have at least to replace <code>%USERNAME%</code> from the environment variables."}, {"owner": {"reputation": 117699, "user_id": 62576, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/15264f7bf48e10ce32dfa4865a13763c?s=128&d=identicon&r=PG", "display_name": "Ken White", "link": "https://stackoverflow.com/users/62576/ken-white"}, "edited": false, "score": 3, "creation_date": 1549482550, "post_id": 54561420, "comment_id": 95921961, "body": "The proper way to get the user&#39;s Documents folder (or any other folder) is using <a href=\"https://docs.microsoft.com/en-us/windows/desktop/api/shlobj_core/nf-shlobj_core-shgetknownfolderpath\" rel=\"nofollow noreferrer\">ShGetKnownFolderPath</a>"}, {"owner": {"reputation": 15221, "user_id": 1023911, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Wln26.jpg?s=128&g=1", "display_name": "Werner Henze", "link": "https://stackoverflow.com/users/1023911/werner-henze"}, "edited": false, "score": 2, "creation_date": 1549482560, "post_id": 54561420, "comment_id": 95921967, "body": "<code>%USERNAME%</code> works in a shell that replaces the variables by their values, but not for functions from the Windows APIs."}, {"owner": {"reputation": 15221, "user_id": 1023911, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Wln26.jpg?s=128&g=1", "display_name": "Werner Henze", "link": "https://stackoverflow.com/users/1023911/werner-henze"}, "edited": false, "score": 4, "creation_date": 1549482803, "post_id": 54561420, "comment_id": 95922081, "body": "In my opinion &quot;I know this has been asked 100 times before, but I...&quot; is one of the worst introductions you could come up with. It suggests that you you are just too lazy to search the identical questions and their answers and expect us to waste our time to help you."}], "answers": [{"comments": [{"owner": {"reputation": 117699, "user_id": 62576, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/15264f7bf48e10ce32dfa4865a13763c?s=128&d=identicon&r=PG", "display_name": "Ken White", "link": "https://stackoverflow.com/users/62576/ken-white"}, "edited": false, "score": 2, "creation_date": 1549483966, "post_id": 54561485, "comment_id": 95922552, "body": "@KieronTateL %userprofile% is as wrong as %username%. Don&#39;t use either."}, {"owner": {"reputation": 29, "user_id": 11024980, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-X4ggptKZxG4/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQNWgIoiQqHQBdrDd2N9lOM7dS4bXQ/mo/photo.jpg?sz=128", "display_name": "Kieron Tate", "link": "https://stackoverflow.com/users/11024980/kieron-tate"}, "edited": false, "score": 0, "creation_date": 1549484575, "post_id": 54561485, "comment_id": 95922823, "body": "Sorry, I&#39;m confused, could you maybe give me usage of it with the code <code>std::string authFile = &quot;C:\\\\Users\\\\%USERNAME%\\\\Documents\\\\Cheats\\\\Authorise.ini&quot;; std::string username = GUI::Files::ReadStringFromIni(authFile, &quot;Login&quot;, &quot;Username&quot;); std::string password = GUI::Files::ReadStringFromIni(authFile, &quot;Login&quot;, &quot;Password&quot;);</code>"}, {"owner": {"reputation": 18385, "user_id": 1773434, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9HhFs.png?s=128&g=1", "display_name": "Govind Parmar", "link": "https://stackoverflow.com/users/1773434/govind-parmar"}, "reply_to_user": {"reputation": 29, "user_id": 11024980, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-X4ggptKZxG4/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQNWgIoiQqHQBdrDd2N9lOM7dS4bXQ/mo/photo.jpg?sz=128", "display_name": "Kieron Tate", "link": "https://stackoverflow.com/users/11024980/kieron-tate"}, "edited": false, "score": 0, "creation_date": 1549485793, "post_id": 54561485, "comment_id": 95923326, "body": "@KieronTate It would appear that Werner Henze&#39;s comment on your question is spot-on"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 1, "creation_date": 1549487231, "post_id": 54561485, "comment_id": 95923985, "body": "@GovindParmar your code example gets the path to the user&#39;s root profile directory, not to the user&#39;s documents folder, which may not even be located under the profile. You need to use <code>FOLDERID_Documents</code> instead of <code>FOLDERID_Profile</code>."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1549488088, "post_id": 54561485, "comment_id": 95924339, "body": "@GovindParmar don&#39;t forget error handing, too. <code>SHGetKnownFolderPath()</code> can fail, and <code>std::wstring</code> can raise an allcoation failure."}, {"owner": {"reputation": 18385, "user_id": 1773434, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9HhFs.png?s=128&g=1", "display_name": "Govind Parmar", "link": "https://stackoverflow.com/users/1773434/govind-parmar"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1549490762, "post_id": 54561485, "comment_id": 95925464, "body": "@RemyLebeau One could argue that a person developing a cheat engine for Windows should be aware of how and when to handle allocation and COM errors"}], "tags": [], "owner": {"reputation": 18385, "user_id": 1773434, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9HhFs.png?s=128&g=1", "display_name": "Govind Parmar", "link": "https://stackoverflow.com/users/1773434/govind-parmar"}, "is_accepted": false, "score": 1, "last_activity_date": 1549487673, "last_edit_date": 1549487673, "creation_date": 1549482599, "answer_id": 54561485, "question_id": 54561420, "link": "https://stackoverflow.com/questions/54561420/get-document-directory/54561485#54561485", "title": "Get Document Directory", "body": "<p>Since you're on Windows, you should use the Windows API call available for this very purpose in <code>&lt;ShlObj.h&gt;</code> called <code>SHGetKnownFolderPath</code>.  Note that you had best use a <code>std::wstring</code> instead for this purpose, since there is no variant of <code>SHGetKnownFolderPath</code> that accepts an MBCS or ANSI string. Also, this will get you the entire path to the user's profile directory, not just the username.</p>\n\n<pre><code>PWSTR path;\nSHGetKnownFolderPath(FOLDERID_Documents, KF_FLAG_DEFAULT, NULL, &amp;path);\nstd::wstring strpath(path);\nCoTaskMemFree(path);\n</code></pre>\n\n<p>Also, once you're done with <code>path</code>, free it with <code>CoTaskMemFree</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": false, "score": 1, "last_activity_date": 1549487836, "last_edit_date": 1549487836, "creation_date": 1549486966, "answer_id": 54562505, "question_id": 54561420, "link": "https://stackoverflow.com/questions/54561420/get-document-directory/54562505#54562505", "title": "Get Document Directory", "body": "<p>Different versions of Windows store user profiles in different locations, and even the default name of the <code>Documents</code> folder can differ. In fact, the name and  location of the user's <code>Documents</code> folder is fully customizable by the user, and may not even be located under the user's profile at all.  So, you should not assume the <code>Documents</code> folder is always located at <code>C:\\\\Users\\\\%USERNAME%\\\\Documents</code>.</p>\n\n<p>The best way to get the <em>correct</em> path to a user's <code>Documents</code> folder on all versions of Windows is to simply <em>ask Windows itself</em>. Use <a href=\"https://docs.microsoft.com/en-us/windows/desktop/api/shlobj_core/nf-shlobj_core-shgetfolderpatha\" rel=\"nofollow noreferrer\"><code>SHGetFolderPath(CSIDL_MYDOCUMENTS)</code></a> (pre-Vista) or <a href=\"https://docs.microsoft.com/en-us/windows/desktop/api/shlobj_core/nf-shlobj_core-shgetknownfolderpath\" rel=\"nofollow noreferrer\"><code>SHGetKnownFolderPath(FOLDERID_Documents)</code></a> (Vista+) for that, eg:</p>\n\n<pre><code>#include &lt;shlobj.h&gt;\n#include &lt;shlwapi.h&gt;\n\nstd::string GetDocumentsFolder()\n{\n    std::string path;\n\n    char szPath[MAX_PATH+1] = {};\n    if (SHGetFolderPathA(NULL, CSIDL_MYDOCUMENTS, NULL, SHGFP_TYPE_CURRENT, szPath) == S_OK)\n        path = PathAddBackslashA(szPath);\n\n    /*\n    PWSTR pPath = NULL;\n    if (SHGetKnownFolderPath(FOLDERID_Documents, KF_FLAG_DEFAULT, NULL, &amp;pPath) == S_OK)\n    {\n        int wlen = lstrlenW(pPath);\n        int len = WideCharToMultiByte(CP_ACP, 0, pPath, wlen, NULL, 0, NULL, NULL);\n        if (len &gt; 0)\n        {\n            path.resize(len+1);\n            WideCharToMultiByte(CP_ACP, 0, pPath, wlen, &amp;path[0], len, NULL, NULL);\n            path[len] = '\\\\';\n        }\n        CoTaskMemFree(pPath);\n    }\n    */\n\n    return path;\n}\n\nstd::string GetAuthFilePath()\n{\n    std::string path = GetDocumentsFolder();\n    if (!path.empty())\n        path += \"Cheats\\\\Authorise.ini\";\n    return path;    \n}\n\nstd::string authFile = GetAuthFilePath();\n...\n</code></pre>\n"}], "owner": {"reputation": 29, "user_id": 11024980, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-X4ggptKZxG4/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQNWgIoiQqHQBdrDd2N9lOM7dS4bXQ/mo/photo.jpg?sz=128", "display_name": "Kieron Tate", "link": "https://stackoverflow.com/users/11024980/kieron-tate"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 361, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1549487836, "creation_date": 1549482375, "last_edit_date": 1549483141, "question_id": 54561420, "link": "https://stackoverflow.com/questions/54561420/get-document-directory", "title": "Get Document Directory", "body": "<p>I'm working on a little singleplayer cheat for a game and am planning on making it public, I have written the API and it all works well but I want to save the data that the user enters to a .ini file so that they will only have to log in one time unless their credentials change. I have done this and it works with a relative path <code>C:\\Users\\Name\\Documents\\Cheat\\Authorise.ini</code> Although When check the result, it doesn't seem to save nor read the data in the file.</p>\n\n<p>I'm wondering if there is a better way to get the Documents Directory.</p>\n\n<p>Function:</p>\n\n<pre><code>std::string authFile = \"C:\\\\Users\\\\%USERNAME%\\\\Documents\\\\Cheats\\\\Authorise.ini\";\nstd::string username = GUI::Files::ReadStringFromIni(authFile, \"Login\", \"Username\");\nstd::string password = GUI::Files::ReadStringFromIni(authFile, \"Login\", \"Password\");`\n</code></pre>\n"}, {"tags": ["c++", "cmake", "debian", "ace", "azerothcore"], "answers": [{"tags": [], "owner": {"reputation": 133, "user_id": 10875716, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-XycQjdmWV1I/AAAAAAAAAAI/AAAAAAAAD-w/mhm2Opthh_Y/photo.jpg?sz=128", "display_name": "DJ Boxer", "link": "https://stackoverflow.com/users/10875716/dj-boxer"}, "is_accepted": false, "score": 3, "last_activity_date": 1549521413, "creation_date": 1549521413, "answer_id": 54567616, "question_id": 54561218, "link": "https://stackoverflow.com/questions/54561218/cmake-error-variable-is-notfound-ace-include-dir-advanced/54567616#54567616", "title": "CMake Error: variable is NOTFOUND. ACE_INCLUDE_DIR (ADVANCED)", "body": "<p><code>sudo apt-get update</code> then do <code>sudo apt-get install libace-6.* libace-dev</code></p>\n\n<p>current version working for myself at this time is 6.3.3. \nAlso, I don't use the sh installer, so not sure if that could be your issue.</p>\n\n<p>I just use <code>cmake ../ -DCMAKE_INSTALL_PREFIX=/home/youruser/azeroth-server/ -DCMAKE_C_COMPILER=/usr/bin/clang -DCMAKE_CXX_COMPILER=/usr/bin/clang++ -DTOOLS=0 -DSCRIPTS=1</code></p>\n"}, {"tags": [], "owner": {"reputation": 73, "user_id": 11024919, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-n64Ap2bdp2o/AAAAAAAAAAI/AAAAAAAAAGc/8lWVOzSccuo/photo.jpg?sz=128", "display_name": "Julian Pfeil", "link": "https://stackoverflow.com/users/11024919/julian-pfeil"}, "is_accepted": false, "score": 3, "last_activity_date": 1549528514, "creation_date": 1549528514, "answer_id": 54569234, "question_id": 54561218, "link": "https://stackoverflow.com/questions/54561218/cmake-error-variable-is-notfound-ace-include-dir-advanced/54569234#54569234", "title": "CMake Error: variable is NOTFOUND. ACE_INCLUDE_DIR (ADVANCED)", "body": "<p>I started with the TrinityCore requirements and sadly forgot to install the libace needed for AzerothCore. Needed to to <code>sudo apt-get install libace-6.* libace-dev</code> like DJ Boxer suggested.</p>\n"}], "owner": {"reputation": 73, "user_id": 11024919, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-n64Ap2bdp2o/AAAAAAAAAAI/AAAAAAAAAGc/8lWVOzSccuo/photo.jpg?sz=128", "display_name": "Julian Pfeil", "link": "https://stackoverflow.com/users/11024919/julian-pfeil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 380, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1549528514, "creation_date": 1549481452, "last_edit_date": 1549482037, "question_id": 54561218, "link": "https://stackoverflow.com/questions/54561218/cmake-error-variable-is-notfound-ace-include-dir-advanced", "title": "CMake Error: variable is NOTFOUND. ACE_INCLUDE_DIR (ADVANCED)", "body": "<p>I just tried to compile the latest AzerothCore on Debian 9 and did not touch the source, just pulled it and used exactly the sh described in the installation guide. CMake gives me that error:</p>\n\n<pre><code>CMake Error: The following variables are used in this project, but they are set to NOTFOUND.\nPlease set them or make sure they are set and tested correctly in the CMake files:\nACE_INCLUDE_DIR (ADVANCED)\n</code></pre>\n\n<p>Debian 9 with the latest AzerothCore. Ace is definitely installed with their latest version.</p>\n\n<p>Expected: No error.\nActual Result: Error.</p>\n"}, {"tags": ["java", "android", "c++", "qt", "java-native-interface"], "answers": [{"tags": [], "owner": {"reputation": 31, "user_id": 10504440, "user_type": "registered", "profile_image": "https://graph.facebook.com/1953458604699839/picture?type=large", "display_name": "Qivi", "link": "https://stackoverflow.com/users/10504440/qivi"}, "is_accepted": false, "score": 0, "last_activity_date": 1571324198, "last_edit_date": 1571324198, "creation_date": 1571319509, "answer_id": 58434049, "question_id": 54561110, "link": "https://stackoverflow.com/questions/54561110/android-java-service-method-is-returning-always-same-value-to-qt-android-service/58434049#58434049", "title": "Android Java service method is returning always same value to Qt Android service", "body": "<p>I thought that android service was placed in same android sandbox with qt cpp app, and they are sharing memory. But actually i had in android manifest:</p>\n\n<p><code>&lt;service android:process=\":qt\" android:name=\".QtJavaService\"&gt;</code> </p>\n\n<p>What actually happens if you call static methods of Your Android Java Service you will get them from empty instance of the qt process, and the proper instance is in :qt process.</p>\n\n<p>So you just need to remove \"android:process=\":qt\" \"</p>\n"}], "owner": {"reputation": 19, "user_id": 8345403, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1fa4b4c01b24d00ef4aba1ec7b2c5790?s=128&d=identicon&r=PG&f=1", "display_name": "ismail", "link": "https://stackoverflow.com/users/8345403/ismail"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 100, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1571324198, "creation_date": 1549480996, "question_id": 54561110, "link": "https://stackoverflow.com/questions/54561110/android-java-service-method-is-returning-always-same-value-to-qt-android-service", "title": "Android Java service method is returning always same value to Qt Android service", "body": "<p>I'm trying to return value to Qt service from java service code. Java always returns initial value for variable. However when I run same code in Qt main activity, it is working.</p>\n\n<p>Code in BackService java class:</p>\n\n<pre><code>public static int SAYK = 0;\n\npublic static void callNorm(int valSy) {\n    BackService.SAYK = valSy;\n    System.out.println(\"Result= \"+BackService.SAYK);\n}\n\npublic static int retStt() {\n    return BackService.SAYK;\n}\n</code></pre>\n\n<p>C++ code in Qt Service:</p>\n\n<pre><code>int jobj = QAndroidJniObject::callStaticMethod&lt;jint&gt;(\"org/qtproject/example_v2/BackService\",\n                                                     \"retStt\",\n                                                     \"()I\");\n</code></pre>\n\n<p>When I call \"callNorm\" function from java, system prints new value of SAYK. But when I call \"retStt\" from Qt service, it returns only initial value 0. I tried also with callStaticObjectMethod, getStaticField, java native functions(gives unsatisfied link error) etc. Unfortunately, none of these worked. Also I can call java functions that has not return value from Qt Service, without problems.</p>\n"}, {"tags": ["c++", "qt", "qt5"], "comments": [{"owner": {"reputation": 1446, "user_id": 4267439, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/5c28773944047f7cb533b3707cac4e0e?s=128&d=identicon&r=PG&f=1", "display_name": "rok", "link": "https://stackoverflow.com/users/4267439/rok"}, "edited": false, "score": 0, "creation_date": 1559813673, "post_id": 54561030, "comment_id": 99539876, "body": "Hi, same issue here.. did you find a solution ?"}, {"owner": {"reputation": 798, "user_id": 7926069, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/676fa367a40645d604de75ea6a7c3681?s=128&d=identicon&r=PG&f=1", "display_name": "Cobalt", "link": "https://stackoverflow.com/users/7926069/cobalt"}, "reply_to_user": {"reputation": 1446, "user_id": 4267439, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/5c28773944047f7cb533b3707cac4e0e?s=128&d=identicon&r=PG&f=1", "display_name": "rok", "link": "https://stackoverflow.com/users/4267439/rok"}, "edited": false, "score": 0, "creation_date": 1559837551, "post_id": 54561030, "comment_id": 99553223, "body": "@rok Unfortunately no. For my use case I was able to use openbox as my window manager, which doesn&#39;t have a taskbar."}], "owner": {"reputation": 798, "user_id": 7926069, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/676fa367a40645d604de75ea6a7c3681?s=128&d=identicon&r=PG&f=1", "display_name": "Cobalt", "link": "https://stackoverflow.com/users/7926069/cobalt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 176, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1549481941, "creation_date": 1549480703, "last_edit_date": 1549481941, "question_id": 54561030, "link": "https://stackoverflow.com/questions/54561030/qt-prevent-taskbar-from-appearing-in-fullscreen-apps", "title": "Qt: Prevent taskbar from appearing in fullscreen apps", "body": "<p>I have a Qt app that is designed to cover the entire screen, hiding the taskbar of the desktop. I achieved this by showing the window with <code>QWidget::showFullScreen</code> and it works as desired. However, if I open a dialog box over my app, the desktop taskbar appears with it. How can I keep the taskbar from showing up without making my app's popups full screen?</p>\n\n<p>Example code:</p>\n\n<pre><code>//main.cpp\n#include \"mainwindow.h\"\n#include &lt;QApplication&gt;\n\nint main(int argc, char *argv[])\n{\n    QApplication a(argc, argv);\n    MainWindow w;\n    w.showFullScreen();\n\n    return a.exec();\n}\n\n\n\n//mainwindow.cpp\n#include \"mainwindow.h\"\n#include \"ui_mainwindow.h\"\n\nMainWindow::MainWindow(QWidget *parent) :\n    QMainWindow(parent),\n    ui(new Ui::MainWindow)\n{\n    ui-&gt;setupUi(this);\n\n    //sometime later, a popup is shown\n    QTimer::singleShot(5000, this, [this]{\n        Message msgBox = new MessageBox(message, this);\n        msgBox-&gt;exec();\n    });    \n}\n\n\n//messagebox.cpp\n#include \"messagebox.h\"\n#include \"ui_messagebox.h\"\n\nMessageBox::MessageBox(const QString &amp;message, QWidget *parent) :\n    QDialog(parent),\n    ui(new Ui::MessageBox)\n{\n    ui-&gt;setupUi(this);\n    this-&gt;setWindowFlags(Qt::Dialog | Qt::CustomizeWindowHint);\n\n    if(parent){\n        auto hostRect = parent-&gt;geometry();\n        this-&gt;move(hostRect.center() - this-&gt;rect().center());\n    }\n\n    ui-&gt;label-&gt;setText(message);\n}\n</code></pre>\n\n<p>The example message box is simply a frameless, modal dialog with a label and an OK/Close button. It appears and works exactly how I would like it to, except that it causes the taskbar of the window manager to appear whenever it is opened. How can I enforce that the taskbar never appears?</p>\n\n<p>App runs on Debian Stretch, Qt Version is 5.11.3</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 18385, "user_id": 1773434, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9HhFs.png?s=128&g=1", "display_name": "Govind Parmar", "link": "https://stackoverflow.com/users/1773434/govind-parmar"}, "edited": false, "score": 1, "creation_date": 1549481115, "post_id": 54561022, "comment_id": 95921337, "body": "&quot; I don&#39;t want to convert from ASCII to HEX.&quot; &lt;- what other method do you think will work for this?"}, {"owner": {"reputation": 15, "user_id": 11024824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/016415ffd5f6f9358e6df0991e399241?s=128&d=identicon&r=PG&f=1", "display_name": "Programmer", "link": "https://stackoverflow.com/users/11024824/programmer"}, "reply_to_user": {"reputation": 18385, "user_id": 1773434, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9HhFs.png?s=128&g=1", "display_name": "Govind Parmar", "link": "https://stackoverflow.com/users/1773434/govind-parmar"}, "edited": false, "score": 0, "creation_date": 1549481325, "post_id": 54561022, "comment_id": 95921430, "body": "Maybe I&#39;m not wording it correctly but I meant I&#39;m not trying to get this output 31 33 31 34 31."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 18385, "user_id": 1773434, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9HhFs.png?s=128&g=1", "display_name": "Govind Parmar", "link": "https://stackoverflow.com/users/1773434/govind-parmar"}, "edited": false, "score": 1, "creation_date": 1549481350, "post_id": 54561022, "comment_id": 95921441, "body": "@Govind I just realized the OP wants to always take two ASCII hex digits and convert them to integer values finally."}, {"owner": {"reputation": 15, "user_id": 11024824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/016415ffd5f6f9358e6df0991e399241?s=128&d=identicon&r=PG&f=1", "display_name": "Programmer", "link": "https://stackoverflow.com/users/11024824/programmer"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1549481708, "post_id": 54561022, "comment_id": 95921612, "body": "@RemyLebeau, I&#39;m not just trying to print the data. I need to work with it and I need it to be in what I expect it."}, {"owner": {"reputation": 864, "user_id": 10913596, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1cf12cce6499d0cf89a03500f0808ab?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/10913596/daniel"}, "edited": false, "score": 0, "creation_date": 1549485756, "post_id": 54561022, "comment_id": 95923315, "body": "Would this be of any service? <a href=\"https://stackoverflow.com/questions/1070497/c-convert-hex-string-to-signed-integer\" title=\"c convert hex string to signed integer\">stackoverflow.com/questions/1070497/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 54044, "user_id": 3723423, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2c916310a1261b53773de75fc83e5ad?s=128&d=identicon&r=PG&f=1", "display_name": "Christophe", "link": "https://stackoverflow.com/users/3723423/christophe"}, "is_accepted": false, "score": 0, "last_activity_date": 1549481966, "creation_date": 1549481966, "answer_id": 54561327, "question_id": 54561022, "link": "https://stackoverflow.com/questions/54561022/how-do-i-convert-a-string-into-hex-representation/54561327#54561327", "title": "How do I convert a string into HEX representation?", "body": "<p>The current output corresponds to the hex encoding of the ascii characaters in your string (<code>0x31</code> for <code>'1'</code>, <code>0x33</code> for <code>'3'</code>, etc...).  This is normal, since your code just copies the input one char per one char:  </p>\n\n<pre><code>keyInHex[i] =   keyInStr[i];    // output in hex is the same as input in ascii\n</code></pre>\n\n<p>If you want to convert the input into hex, combining two input digits to make one output digit (e.g. <code>'1'</code> and <code>'3'</code> to produce one byte corresponding to <code>0x13</code>, you need to iterate over your input string two by two, each time taking the binary equivalent to the hex digit expressed in ascii.  </p>\n\n<p>You do so by converting an ascii hex digit into a binary digit:  </p>\n\n<pre><code> if (keyInStr[i]&gt;='A') \n     digit =  keyInStr[i]-'A'+0x0A;  // assuming that uppercase only is used \n else digit = keyInStr[i]-'0';  \n</code></pre>\n\n<p>You can then combine two such digits with:  </p>\n\n<pre><code>keyInHex[j] = (digit1&lt;&lt;4) | digit2;     \n</code></pre>\n\n<p>or if you didn't see bit operations yet in your course:  </p>\n\n<pre><code>keyInHex[j] = digit1*16 + digit2;\n</code></pre>\n\n<p>As I don't want to do your homework, I let you as an exercise to rewrite the loop to process digits by 2.   Attention:  in the worst case,  there might be an isolated digit in the last iteration.       </p>\n\n<pre><code>keyInHex[i] = keyInStr[i]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 18385, "user_id": 1773434, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9HhFs.png?s=128&g=1", "display_name": "Govind Parmar", "link": "https://stackoverflow.com/users/1773434/govind-parmar"}, "is_accepted": false, "score": 0, "last_activity_date": 1549481998, "creation_date": 1549481998, "answer_id": 54561340, "question_id": 54561022, "link": "https://stackoverflow.com/questions/54561022/how-do-i-convert-a-string-into-hex-representation/54561340#54561340", "title": "How do I convert a string into HEX representation?", "body": "<p>If you know that your string contains an exact hex string with an even amount of characters, this will work:</p>\n\n<pre><code>std::string keyInStr = \"1314191A1B\";\nstd::vector&lt;char&gt; keyInHex;\n\nfor (size_t i = 0; i &lt; keyInStr.length(); i += 2)\n{\n    std::string currentByte = keyInStr.substr(i, 2);\n    keyInHex.push_back(static_cast&lt;char&gt;(std::strtol(currentByte.c_str(), NULL, 16)));\n}\n\nfor (size_t i = 0; i &lt; keyInHex.size(); i++)\n{\n    std::cout &lt;&lt; std::hex &lt;&lt; std::setw(2) &lt;&lt;  (keyInHex.at(i) &amp; 0xFF) &lt;&lt; \" \";\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 653, "user_id": 6605200, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/7nmUU.png?s=128&g=1", "display_name": "Dillydill123", "link": "https://stackoverflow.com/users/6605200/dillydill123"}, "is_accepted": false, "score": 0, "last_activity_date": 1549482096, "creation_date": 1549482096, "answer_id": 54561360, "question_id": 54561022, "link": "https://stackoverflow.com/questions/54561022/how-do-i-convert-a-string-into-hex-representation/54561360#54561360", "title": "How do I convert a string into HEX representation?", "body": "<p>I came up with this:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nusing namespace std;\n\nint main()\n{\n    std::string keyInStr = \"1314191a1b\";\n\n    const int SIZE = 5;\n    unsigned char keyInHex[SIZE];\n\n    unsigned long long hexVal = stoull(keyInStr, nullptr, 16);\n\n    for (int i = 0; i &lt; SIZE; i++)\n     {\n       keyInHex[i] = (hexVal &gt;&gt; ((SIZE - i - 1) * 8)) &amp; 0xFF;\n       printf(\"%02X \", keyInHex[i]);\n     }\n    return 0;\n}\n</code></pre>\n\n<p>You say you do not want to convert ASCII to hex, but I couldn't think of something that didn't involve a string to binary data conversion. From there it simply shifts the bits and does a mask.</p>\n"}, {"comments": [{"owner": {"reputation": 15, "user_id": 11024824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/016415ffd5f6f9358e6df0991e399241?s=128&d=identicon&r=PG&f=1", "display_name": "Programmer", "link": "https://stackoverflow.com/users/11024824/programmer"}, "edited": false, "score": 0, "creation_date": 1549488007, "post_id": 54561373, "comment_id": 95924295, "body": "This answers my question and I really like your alternative solution. Not sure why they gave me -3 given that I asked a valid question."}], "tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": true, "score": 0, "last_activity_date": 1549485600, "last_edit_date": 1549485600, "creation_date": 1549482160, "answer_id": 54561373, "question_id": 54561022, "link": "https://stackoverflow.com/questions/54561022/how-do-i-convert-a-string-into-hex-representation/54561373#54561373", "title": "How do I convert a string into HEX representation?", "body": "<p>The <code>string</code> shown is <em>already</em> in a hex representation. What you are really asking for is to DECODE that hex back to its original binary data, and then print that data as hex. Which is redundant. Just print the <code>string</code> as-is, inserting a space after every 2nd character, eg:</p>\n\n<pre><code>std::string keyInStr = \"1314191A1B\";\n\nfor (int i = 0; i &lt; keyInStr.size(); i += 2)\n{\n   //printf(\"%.2s \", keyInStr.c_str()+i);\n   std::cout &lt;&lt; keyInStr.substr(i, 2) &lt;&lt; \" \";\n}\n</code></pre>\n\n<p>Otherwise, if you intend to actually use the key binary data, then you do need to decode the string, eg:</p>\n\n<pre><code>unsigned char hex2dec(const std::string &amp;s, size_t pos)\n{\n   char ch = s[pos];\n\n   if (ch &gt;= 'A' &amp;&amp; ch &lt;= 'F')\n      return (ch - 'A') + 10;\n\n   if (ch &gt;= 'a' &amp;&amp; ch &lt;= 'f')\n      return (ch - 'a') + 10;\n\n   if (ch &gt;= '0' &amp;&amp; ch &lt;= '9')\n      return (ch - '0');\n\n   // error!\n}\n\nunsigned char decodeHexByte(const std::string &amp;s, size_t pos)\n{\n   return (hex2dec(s, pos) &lt;&lt; 4) | hex2dec(s, pos+1);\n}\n\nstd::string keyInStr = \"1314191A1B\";\nunsigned char keyInHex[5] = {};\n\nfor (int i = 0, j = 0; i &lt; 5; ++i, j += 2)\n{\n   keyInHex[i] = decodeHexByte(keyInStr, j);\n\n   //printf(\"%02X \", keyInHex[i]);\n   std::cout &lt;&lt; std::hex &lt;&lt; std::setw(2) &lt;&lt; std::setfill('0') &lt;&lt; (int) keyInHex[i] &lt;&lt; \" \";\n}\n</code></pre>\n\n<p><a href=\"https://ideone.com/dZAsDP\" rel=\"nofollow noreferrer\">Live Demo</a></p>\n\n<p>Alternatively, if you are using C++11 or later:</p>\n\n<pre><code>std::string keyInStr = \"1314191A1B\";\nunsigned char keyInHex[5] = {};\n\nfor (int i = 0; i &lt; 5; ++i)\n{\n   keyInHex[i] = std::stoi(keyInStr.substr(i*2, 2), nullptr, 16);\n\n   //printf(\"%02X \", keyInHex[i]);\n   std::cout &lt;&lt; std::hex &lt;&lt; std::setw(2) &lt;&lt; std::setfill('0') &lt;&lt; (int) keyInHex[i] &lt;&lt; \" \";\n}\n</code></pre>\n\n<p><a href=\"https://ideone.com/oGvScP\" rel=\"nofollow noreferrer\">Live Demo</a></p>\n"}], "owner": {"reputation": 15, "user_id": 11024824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/016415ffd5f6f9358e6df0991e399241?s=128&d=identicon&r=PG&f=1", "display_name": "Programmer", "link": "https://stackoverflow.com/users/11024824/programmer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 172, "favorite_count": 0, "accepted_answer_id": 54561373, "answer_count": 4, "score": -2, "last_activity_date": 1549485600, "creation_date": 1549480685, "question_id": 54561022, "link": "https://stackoverflow.com/questions/54561022/how-do-i-convert-a-string-into-hex-representation", "title": "How do I convert a string into HEX representation?", "body": "<p>I have a key that's stored as a string and I'm trying to get the hex representation of the string. I don't want to convert from ASCII to HEX.</p>\n\n<pre><code>std::string keyInStr = \"1314191A1B\";\n\nunsigned char keyInHex[5];\n\nfor (int i = 0; i &lt; 5; i++)\n {\n   keyInHex[i] =   keyInStr[i];\n   printf(\"%02X \", keyInHex[i]);\n }\n</code></pre>\n\n<p><strong>Current Output</strong>: 31 33 31 34 31</p>\n\n<p><strong>Expected Output</strong>:13 14 19 1A 1B</p>\n\n<p>In another words, this is what I want to be stored in my array.</p>\n\n<pre><code>keyInHex[0] = 0x13;\nkeyInHex[1] = 0x14;\nkeyInHex[2] = 0x19;\nkeyInHex[3] = 0x1A;\nkeyInHex[4] = 0x1B;\n</code></pre>\n"}, {"tags": ["c++", "windows", "dll", "cmake", "global-variables"], "answers": [{"tags": [], "owner": {"reputation": 3572, "user_id": 5710233, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-5LmFgRhfZNQ/AAAAAAAAAAI/AAAAAAAAABk/Etcd11tdJGc/photo.jpg?sz=128", "display_name": "Mizux", "link": "https://stackoverflow.com/users/5710233/mizux"}, "is_accepted": true, "score": 4, "last_activity_date": 1549526272, "creation_date": 1549526272, "answer_id": 54568678, "question_id": 54560832, "link": "https://stackoverflow.com/questions/54560832/cmake-windows-export-all-symbols-does-not-cover-global-variables/54568678#54568678", "title": "CMAKE_WINDOWS_EXPORT_ALL_SYMBOLS does not cover global variables", "body": "<blockquote>\n  <p>For global data symbols, <code>__declspec(dllimport)</code> must still be used when compiling against the code in the .dll.</p>\n</blockquote>\n\n<p>src: <a href=\"https://cmake.org/cmake/help/latest/prop_tgt/WINDOWS_EXPORT_ALL_SYMBOLS.html\" rel=\"nofollow noreferrer\">https://cmake.org/cmake/help/latest/prop_tgt/WINDOWS_EXPORT_ALL_SYMBOLS.html</a></p>\n"}], "owner": {"reputation": 5115, "user_id": 1017348, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/rKrOK.jpg?s=128&g=1", "display_name": "Joachim W", "link": "https://stackoverflow.com/users/1017348/joachim-w"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1399, "favorite_count": 0, "accepted_answer_id": 54568678, "answer_count": 1, "score": 1, "last_activity_date": 1549526272, "creation_date": 1549479916, "last_edit_date": 1549480908, "question_id": 54560832, "link": "https://stackoverflow.com/questions/54560832/cmake-windows-export-all-symbols-does-not-cover-global-variables", "title": "CMAKE_WINDOWS_EXPORT_ALL_SYMBOLS does not cover global variables", "body": "<p>Porting a C++ library, under CMake, to Windows.</p>\n\n<ul>\n<li>Option 1: Decorate the API with <code>__declspec(dllexport)</code>.</li>\n<li>Option 2: <code>set(CMAKE_WINDOWS_EXPORT_ALL_SYMBOLS ON)</code>.</li>\n</ul>\n\n<p>We go for option 2, since it seems much easier, and leaves our sources intact.\nWorks like a charm: our application compiles and gets linked with the library dll.</p>\n\n<p>However, it ensures only the export of classes and functions. What needs to be done to export global variables? Like in:</p>\n\n<pre><code>lib_source.cpp:\n    int my_secret;\n\napp.cpp:\n    extern int my_secret;\n</code></pre>\n"}, {"tags": ["c++", "opencv", "computer-vision", "aruco"], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 11022353, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd791cc0ef7179703e6bec0aaa0c3752?s=128&d=identicon&r=PG&f=1", "display_name": "musgani19", "link": "https://stackoverflow.com/users/11022353/musgani19"}, "is_accepted": false, "score": 0, "last_activity_date": 1549482254, "creation_date": 1549482254, "answer_id": 54561393, "question_id": 54560586, "link": "https://stackoverflow.com/questions/54560586/how-to-link-the-pose-of-two-aruco-markers/54561393#54561393", "title": "How to link the pose of two ArUco markers?", "body": "<p>if you already set your world coordinates and you know the pose (rvec &amp; tvec) of A and B relatives to your choosen world coordinate system. For example: you know all the 3 rotation angles and translation vector in x,y,z of A and B from world coordinate system.</p>\n\n<p>Then, in my opinion, all you need to do is to proceed with the obtained pose data by substract/add (depend on the case) the pose of A and B to get the relative pose.</p>\n"}], "owner": {"reputation": 53, "user_id": 6361921, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5dc1151b3b815408b1e1a9e602e9c40a?s=128&d=identicon&r=PG&f=1", "display_name": "fabridigua", "link": "https://stackoverflow.com/users/6361921/fabridigua"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 277, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1573746099, "creation_date": 1549478922, "last_edit_date": 1573746099, "question_id": 54560586, "link": "https://stackoverflow.com/questions/54560586/how-to-link-the-pose-of-two-aruco-markers", "title": "How to link the pose of two ArUco markers?", "body": "<p>I'm developing a pose estimation app with OpenCV and ArUco library.\nIn my scene there are two markers, say A and B.\nI know the pose (<code>tvec</code> and <code>rvec</code>) of A and B, so the pose is relative to the camera.</p>\n\n<p>I want to know the pose of B relative to A. I know that the OpenCV provides <code>cv::Rodrigues</code> and i tried to use it, but i think i have a theory lack. This i what i tried:</p>\n\n<pre><code>        [...]\n\n        cv::Rodrigues(rvecs[0], R1_rodriguez);\n        cv::Rodrigues(rvecs[1], R2_rodriguez);\n\n        cv::Mat R1 = R1_rodriguez;\n        cv::Mat R2 = R2_rodriguez;\n\n        cv::Mat M1 = (cv::Mat_&lt;double&gt;(4,4) &lt;&lt;\n                   R1.at&lt;double&gt;(0,0),R1.at&lt;double&gt;(0,1),R1.at&lt;double&gt;(0,2),tvecs[0][0],R1.at&lt;double&gt;(1,0),R1.at&lt;double&gt;(1,1),R1.at&lt;double&gt;(1,2),tvecs[0][1],R1.at&lt;double&gt;(2,0),R1.at&lt;double&gt;(2,1),R1.at&lt;double&gt;(2,2),tvecs[0][2],0.0,0.0,0.0,1.0);\n\n        cv::Mat M2 = (cv::Mat_&lt;double&gt;(4,4) &lt;&lt;\n                      R2.at&lt;double&gt;(0,0),R2.at&lt;double&gt;(0,1),R2.at&lt;double&gt;(0,2),tvecs[1][0],R2.at&lt;double&gt;(1,0),R2.at&lt;double&gt;(1,1),R2.at&lt;double&gt;(1,2),tvecs[1][1],R2.at&lt;double&gt;(2,0),R2.at&lt;double&gt;(2,1),R2.at&lt;double&gt;(2,2),tvecs[1][2],0.0,0.0,0.0,1.0);\n        cv::Mat M1_inv = M1.inv();\n\n        cv::Mat M2inM1 = M1_inv*M2;\n</code></pre>\n\n<p>So my question is: how can I \"map\" B to A, so how can I know the pose of B relative to A (knowing the pose in camera frame)?\nIn other words i imagine A as the (0,0,0) and i want to know the pose (so translation and rotation) of B.Thanks in advance.</p>\n"}, {"tags": ["c++", "mapping", "coordinates"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1549478706, "post_id": 54560505, "comment_id": 95920193, "body": "Consider mapping your state using an single <code>vector</code> where coordinates each correspond to a unique index, such as <code>index = x + y * width</code>. Edit : Actually, I thought your key was a <code>std::pair&lt;int,int&gt;</code> but I now see it also contains a <code>vector</code>. I don&#39;t understand what your <code>Status::map</code> represents or how it&#39;s laid out."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1549479022, "post_id": 54560505, "comment_id": 95920362, "body": "It seems like your map is a <code>std::map&lt;std::vector&lt;int&gt;, int&gt;</code> or something similar. So my original comment applies. You are creating new vectors every time you insert into your map. You need to iterate over vectors every time you want to compare then when searching through it. There is a lot of waste here that could easily explain your performance issues."}, {"owner": {"reputation": 803, "user_id": 11024660, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6673cc05490facc3f5c10dac0ef91f51?s=128&d=identicon&r=PG&f=1", "display_name": "Chriss555888", "link": "https://stackoverflow.com/users/11024660/chriss555888"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1549479939, "post_id": 54560505, "comment_id": 95920804, "body": "@Fran&#231;oisAndrieux <code>struct Status{static std::map&lt;std::vector&lt;int&gt;, int&gt;&amp; map()\t{ static std::map&lt;std::vector&lt;int&gt;, int&gt; objectMap; return objectMap; }};</code> This is how Status::map() is laid out, so you are correct. I though mapping coordinates this way is a good idea so I can store coordinates in the vector {x,y} and assign a number to that location, depending on whether a rectangle is present or not. 0 means no object, 1 impassable object, 2 bonus chest etc..."}, {"owner": {"reputation": 693, "user_id": 3662223, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ef0890f4d686f08217ccf1eac4c1a44?s=128&d=identicon&r=PG&f=1", "display_name": "Aumnayan", "link": "https://stackoverflow.com/users/3662223/aumnayan"}, "edited": false, "score": 0, "creation_date": 1549483748, "post_id": 54560505, "comment_id": 95922457, "body": "You need to start breaking up your &#39;world&#39; into area&#39;s so you can quickly discount large numbers of object from consideration when you are performing operations. For example, break your world up into 4 quadrants, and assign the applicable objects to the appropriate bucket. If more resolution is necessary, break each quadrant up into it&#39;s own set of quadrants, etc. This mechanism is called a quadtree and is uniquely applicable to your problem."}, {"owner": {"reputation": 803, "user_id": 11024660, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6673cc05490facc3f5c10dac0ef91f51?s=128&d=identicon&r=PG&f=1", "display_name": "Chriss555888", "link": "https://stackoverflow.com/users/11024660/chriss555888"}, "reply_to_user": {"reputation": 693, "user_id": 3662223, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ef0890f4d686f08217ccf1eac4c1a44?s=128&d=identicon&r=PG&f=1", "display_name": "Aumnayan", "link": "https://stackoverflow.com/users/3662223/aumnayan"}, "edited": false, "score": 0, "creation_date": 1549484129, "post_id": 54560505, "comment_id": 95922625, "body": "@Aumnayan I&#39;ve heard of quadtree mechanism before but it seems difficult to implement."}, {"owner": {"reputation": 693, "user_id": 3662223, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ef0890f4d686f08217ccf1eac4c1a44?s=128&d=identicon&r=PG&f=1", "display_name": "Aumnayan", "link": "https://stackoverflow.com/users/3662223/aumnayan"}, "edited": false, "score": 0, "creation_date": 1549486474, "post_id": 54560505, "comment_id": 95923651, "body": "@Chriss555888 Conceptually it&#39;s about as difficult as a B-Tree. Implementation wise, it will likely be cleaner then other ad-hoc organization you try to implement to do the same thing. Which will make your life easier as you implement more features in your application. The down side is yes, you have to implement the quadtree object."}], "answers": [{"tags": [], "owner": {"reputation": 803, "user_id": 11024660, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6673cc05490facc3f5c10dac0ef91f51?s=128&d=identicon&r=PG&f=1", "display_name": "Chriss555888", "link": "https://stackoverflow.com/users/11024660/chriss555888"}, "is_accepted": true, "score": 0, "last_activity_date": 1549491225, "creation_date": 1549491225, "answer_id": 54563380, "question_id": 54560505, "link": "https://stackoverflow.com/questions/54560505/c-sdl-rectangle-coordinates-mapping/54563380#54563380", "title": "C++/SDL - Rectangle Coordinates Mapping", "body": "<p>Followed @Fran\u00e7oisAndrieux advice and created multidimensional vector for storing the coordinates.</p>\n"}], "owner": {"reputation": 803, "user_id": 11024660, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6673cc05490facc3f5c10dac0ef91f51?s=128&d=identicon&r=PG&f=1", "display_name": "Chriss555888", "link": "https://stackoverflow.com/users/11024660/chriss555888"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 177, "favorite_count": 0, "accepted_answer_id": 54563380, "answer_count": 1, "score": 0, "last_activity_date": 1549491225, "creation_date": 1549478598, "question_id": 54560505, "link": "https://stackoverflow.com/questions/54560505/c-sdl-rectangle-coordinates-mapping", "title": "C++/SDL - Rectangle Coordinates Mapping", "body": "<p>I am working on a 2D game using SDL. Recently I implemented various functions that put objects (and their rectangles) into motion, but encountered performance issues that are most likely caused by inefficient mapping of rectangle coordinates. Please see below:</p>\n\n<p>2D coordinates of the rectangle are stored in an integer array whenever move() is called. For example, coordinate[0] is the first point on the x axis and coordinate[1] is the last point on the x axis. Coordinates [2] and [3] work for points on the y axis.</p>\n\n<p>The map() function takes the coordinates of a rectangle and stores them in static std::map (Status class). Each x and y pair is either 0 or 1, depending on whether a rectangle is present or not. Player's coordinates are not mapped.</p>\n\n<p>When the player moves, the bool function collide() checks whether the player's rectangle is adjacent to another recantgle in a particular direction. If there is no rectangle blocking the way, the player is allowed to move.</p>\n\n<p>Everything works well, but it seems like all these for loops in the map() function are very CPU-heavy. When rectangles are being moved on the screen, the program lags horribly. How can I map rectangle coordinates more efficiently?</p>\n\n<pre><code>void move(int x, int y) {\n    dstRect.x = x;\n    dstRect.y = y;\n\n    coordinate[0] = dstRect.x;\n    coordinate[1] = dstRect.x + dstRect.w;\n    coordinate[2] = dstRect.y;\n    coordinate[3] = dstRect.y + dstRect.h;\n}\n\nvoid map() {\n    for (int x = coordinate[0]; x != coordinate[1]; x++) {\n        for (int y = coordinate[2]; y != coordinate[3]; y++) {\n            Status::map().insert(std::pair&lt;std::vector&lt;int&gt;, int&gt;({ x, y }, 1));\n        }\n    }\n}\n\nbool collide(DIRECTION direction) {\n    if (direction == UP || direction == DOWN) {\n        for (int x = texture.coordinate[0]; x != texture.coordinate[1]; x++) {\n            if (direction == UP) {\n                if (Status::map().find({ x, texture.coordinate[2] - 1 })-&gt;second == 1) { return true; }\n            }\n            if (direction == DOWN) {\n                if (Status::map().find({ x, texture.coordinate[3] + 1 })-&gt;second == 1) { return true; }\n            }\n        }\n    }\n    if (direction == RIGHT || direction == LEFT) {\n        for (int y = texture.coordinate[2]; y != texture.coordinate[3]; y++) {\n            if (direction == RIGHT) {\n                if (Status::map().find({ texture.coordinate[1] + 1, y })-&gt;second == 1) { return true; }\n            }\n            if (direction == LEFT) {\n                if (Status::map().find({ texture.coordinate[0] - 1, y })-&gt;second == 1) { return true; }\n            }\n        }\n    }\n    return false;\n}\n\nvoid moveRight() {\n    for (int i = 0; i &lt; speed; i ++) {\n        if (!collide(RIGHT)) {\n            int x = texture.dstRect.x + 1;\n            int y = texture.dstRect.y;\n            texture.move(x, y);\n        }\n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "canvas", "c++builder", "tbitmap"], "comments": [{"owner": {"reputation": 508, "user_id": 3648780, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/68dd15685adb418a0092603a43d0ac58?s=128&d=identicon&r=PG&f=1", "display_name": "Lotfi", "link": "https://stackoverflow.com/users/3648780/lotfi"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1549670689, "post_id": 54560280, "comment_id": 95999949, "body": "@Remy Lebeau Do you have a solution to get both (stretch + transparency), the above code can give one of them only."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 1, "creation_date": 1549678999, "post_id": 54560280, "comment_id": 96001253, "body": "@Lofti As I already stated in earlier comments (which appear to have since been deleted), the problem when using <code>Images-&gt;Draw(Images-&gt;Canvas, ...)</code> is that you are not setting <code>Image-&gt;Width</code> and <code>Image-&gt;Height</code> before then drawing on <code>Image</code>. <code>Images-&gt;GetBitmap()</code> handles that for you, but <code>Images-&gt;Draw()</code> does not, so you need to add that to your code."}, {"owner": {"reputation": 508, "user_id": 3648780, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/68dd15685adb418a0092603a43d0ac58?s=128&d=identicon&r=PG&f=1", "display_name": "Lotfi", "link": "https://stackoverflow.com/users/3648780/lotfi"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1549711945, "post_id": 54560280, "comment_id": 96006797, "body": "@Remy still having no transparency of the bitmap. How can I do this \t<code>TRect R1;    Size=1; &#47;&#47;debug \tTRect DstRect(X,Y, X+32 + ( 1 - Rotation ) * 32 * Size, Y+32 + Rotation * 32 * Size); \tGraphics::TBitmap * Image=new Graphics::TBitmap(); \tImage-&gt;Transparent=true; \tImage-&gt;Width = 32; \tImage-&gt;Height = 32; \t&#47;&#47;MainForm-&gt;Images-&gt;GetBitmap(ImgIndex[HisType]+Rotation, Image); \tMainForm-&gt;Images-&gt;Draw(Image-&gt;Canvas, 0, 0, ImgIndex[HisType]+Rotation); \t&#47;&#47;Canvas-&gt;Draw(X,Y,Image); \tCanvas-&gt;StretchDraw(DstRect, Image); \tdelete Image;</code>"}, {"owner": {"reputation": 508, "user_id": 3648780, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/68dd15685adb418a0092603a43d0ac58?s=128&d=identicon&r=PG&f=1", "display_name": "Lotfi", "link": "https://stackoverflow.com/users/3648780/lotfi"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1549714621, "post_id": 54560280, "comment_id": 96007453, "body": "in fact, my image is not transparent and Image-&gt;Transparent=true; does not make it transparent. Something is missing"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1549735207, "post_id": 54560280, "comment_id": 96012937, "body": "try drawing the bitmap first, then set it <code>Transparent=true</code> afterwards, and maybe also set its <code>TransparentColor</code> if needed."}, {"owner": {"reputation": 508, "user_id": 3648780, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/68dd15685adb418a0092603a43d0ac58?s=128&d=identicon&r=PG&f=1", "display_name": "Lotfi", "link": "https://stackoverflow.com/users/3648780/lotfi"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1549740219, "post_id": 54560280, "comment_id": 96014432, "body": "@Remy No that doesn&#39;t help, but I found that we must first fill the newly created bitmap with one color and not let it empty in order to transparency to work: <code>Image-&gt;Canvas-&gt;FillRect(Rect(0,0,32,32));</code>"}], "answers": [{"comments": [{"owner": {"reputation": 508, "user_id": 3648780, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/68dd15685adb418a0092603a43d0ac58?s=128&d=identicon&r=PG&f=1", "display_name": "Lotfi", "link": "https://stackoverflow.com/users/3648780/lotfi"}, "edited": false, "score": 0, "creation_date": 1549491485, "post_id": 54561126, "comment_id": 95925717, "body": "Yes Remy, this works, but I gave only a simple example to ask my question. In fact, I need to draw some components (when I am moving them with the mouse) on the Form-&gt;Canvas. Is there a possibility to draw from the Image and not from the TImageList? (Draw does not exists for Image)"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 508, "user_id": 3648780, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/68dd15685adb418a0092603a43d0ac58?s=128&d=identicon&r=PG&f=1", "display_name": "Lotfi", "link": "https://stackoverflow.com/users/3648780/lotfi"}, "edited": false, "score": 0, "creation_date": 1549501449, "post_id": 54561126, "comment_id": 95928488, "body": "@Lotfi why are you drawing components manually at all? You should be letting them draw themselves normally. What are you trying to accomplish exactly?"}, {"owner": {"reputation": 508, "user_id": 3648780, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/68dd15685adb418a0092603a43d0ac58?s=128&d=identicon&r=PG&f=1", "display_name": "Lotfi", "link": "https://stackoverflow.com/users/3648780/lotfi"}, "edited": false, "score": 0, "creation_date": 1549543432, "post_id": 54561126, "comment_id": 95944983, "body": "I am translating my old program I made on Pascal Object 7.0 to C++ builder <a href=\"http://www.baghli.com/powerd.html\" rel=\"nofollow noreferrer\">baghli.com/powerd.html</a> so the collection of components needs to be drawn. Your method is ok for the normal Images, but one of them need to be stretched before being paint on the Form. So I need the possibility to draw from a bitmap or Timage with the possibility of transparency."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 508, "user_id": 3648780, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/68dd15685adb418a0092603a43d0ac58?s=128&d=identicon&r=PG&f=1", "display_name": "Lotfi", "link": "https://stackoverflow.com/users/3648780/lotfi"}, "edited": false, "score": 1, "creation_date": 1549556469, "post_id": 54561126, "comment_id": 95952966, "body": "@Lotfi create a transparent <code>TBitmap</code>, <code>TImageList.Draw()</code> onto the bitmap, and then <code>Canvas.StretchDraw()</code> the bitmap."}], "tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": false, "score": 1, "last_activity_date": 1549481084, "creation_date": 1549481084, "answer_id": 54561126, "question_id": 54560280, "link": "https://stackoverflow.com/questions/54560280/c-builder-transparent-bitmaps-cover-the-canvas/54561126#54561126", "title": "C++ builder transparent bitmaps cover the canvas", "body": "<p>Use <code>Images-&gt;Draw()</code> instead, let the <code>TImageList</code> handle the drawing for you:</p>\n\n<pre><code>MainForm-&gt;Images-&gt;Draw(Canvas, 10, 10, 14, dsTransparent, itImage);\nMainForm-&gt;Images-&gt;Draw(Canvas, 15, 15, 0, dsTransparent, itImage);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1549743695, "post_id": 54609814, "comment_id": 96015324, "body": "You should define a specific color for <a href=\"http://docwiki.embarcadero.com/Libraries/en/Vcl.Graphics.TCanvas.FillRect\" rel=\"nofollow noreferrer\"><code>FillRect()</code></a> (it defaults to White): <code>Image-&gt;Canvas-&gt;Brush-&gt;Color = ...;</code> (<code>clFuschia</code> is commonly used). If you don&#39;t set a <a href=\"http://docwiki.embarcadero.com/Libraries/en/Vcl.Graphics.TBitmap.TransparentColor\" rel=\"nofollow noreferrer\"><code>TransparentColor</code></a>, the bitmap will use the color in the first left-most pixel. If <code>Draw()</code> <i>happens</i> to draw in that pixel, your bitmap may not render the way you expect. So you should explicitly set the <code>TransparentColor</code> to the same color you tell <code>FillRect()</code> to use."}, {"owner": {"reputation": 508, "user_id": 3648780, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/68dd15685adb418a0092603a43d0ac58?s=128&d=identicon&r=PG&f=1", "display_name": "Lotfi", "link": "https://stackoverflow.com/users/3648780/lotfi"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1549990888, "post_id": 54609814, "comment_id": 96101925, "body": "yes I understand that but it is ok since all the drawing is far from the edges"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1549991637, "post_id": 54609814, "comment_id": 96102365, "body": "it&#39;s not just about the edges, it&#39;s about the colors, too. Like I said, the default brush color is white, so if your drawing includes white pixels, they will end up transparent, which may or may not be what your want, depending on your particular images. Just saying..."}], "tags": [], "owner": {"reputation": 508, "user_id": 3648780, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/68dd15685adb418a0092603a43d0ac58?s=128&d=identicon&r=PG&f=1", "display_name": "Lotfi", "link": "https://stackoverflow.com/users/3648780/lotfi"}, "is_accepted": true, "score": 0, "last_activity_date": 1549740186, "last_edit_date": 1549740186, "creation_date": 1549739737, "answer_id": 54609814, "question_id": 54560280, "link": "https://stackoverflow.com/questions/54560280/c-builder-transparent-bitmaps-cover-the-canvas/54609814#54609814", "title": "C++ builder transparent bitmaps cover the canvas", "body": "<p>Found the solution, Thank to Remy. We must first fill the newly created bitmap with one color and not let it empty in order to transparency to work...</p>\n\n<pre><code>Size=1; //debug\nTRect DstRect(X,Y, X+32 + ( 1 - Rotation ) * 32 * Size, Y+32 + Rotation * 32 * Size);\nGraphics::TBitmap * Image=new Graphics::TBitmap();\nImage-&gt;Width = 32;\nImage-&gt;Height = 32;\nImage-&gt;Canvas-&gt;FillRect(Rect(0,0,32,32));\nMainForm-&gt;Images-&gt;GetBitmap(ImgIndex[HisType]+Rotation, Image);\n//MainForm-&gt;Images-&gt;Draw(Image-&gt;Canvas, 0, 0, ImgIndex[HisType]+Rotation, dsTransparent, itImage);\nImage-&gt;Canvas-&gt;Pen-&gt;Color = clRed;\nImage-&gt;Canvas-&gt;MoveTo( 3, 3 );\nImage-&gt;Canvas-&gt;LineTo( 29, 29 );\nImage-&gt;Transparent=true;\nCanvas-&gt;StretchDraw(DstRect, Image);\ndelete Image;\n</code></pre>\n"}], "owner": {"reputation": 508, "user_id": 3648780, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/68dd15685adb418a0092603a43d0ac58?s=128&d=identicon&r=PG&f=1", "display_name": "Lotfi", "link": "https://stackoverflow.com/users/3648780/lotfi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1008, "favorite_count": 0, "accepted_answer_id": 54609814, "answer_count": 2, "score": 0, "last_activity_date": 1549740186, "creation_date": 1549477779, "last_edit_date": 1549649344, "question_id": 54560280, "link": "https://stackoverflow.com/questions/54560280/c-builder-transparent-bitmaps-cover-the-canvas", "title": "C++ builder transparent bitmaps cover the canvas", "body": "<p>In the <code>OnPaint</code> event of a <code>TForm</code>, I want to paint bitmaps that do not cover the background or other painted object because they have transparent parts.</p>\n\n<p>If I draw an image over an image, it works.</p>\n\n<p>But when I draw on the Form's <code>Canvas</code>, it does not work: the white part of the image, which is supposed to be transparent covers the other objects of the Canvas by a white square color.</p>\n\n<pre><code>Canvas-&gt;CopyMode = cmMergePaint ;\nGraphics::TBitmap * Image=new Graphics::TBitmap();\nImage-&gt;Transparent = true;\nMainForm-&gt;Images-&gt;GetBitmap(14, Image);\n\nCanvas-&gt;Draw(10,10,Image;\nMainForm-&gt;Images-&gt;GetBitmap(0, Image);\nCanvas-&gt;Draw(15,15,Image);\n</code></pre>\n\n<p><strong>Update</strong></p>\n\n<p>When I draw on the Image using <code>MainForm-&gt;Images-&gt;Draw(Image-&gt;Canvas...)</code>, I get a transparent square with nothing inside, that I can move over the other components.</p>\n\n<p>When I draw using <code>MainForm-&gt;Images-&gt;GetBitmap(ImgIndex[HisType]+Rotation, Image)</code>, I get the correct streched image on the Form, but without transparencies i.e. its white parts cover the other components.</p>\n\n<p>While the <code>MainForm-&gt;Images-&gt;Draw(Canvas, X, Y, ImgIndex[HisType]+Rotation, dsTransparent, itImage);</code> does the job, I need to strech it for this component depending on a Size variable. </p>\n\n<pre><code>TRect DstRect(X,Y, X+32 + ( 1 - Rotation ) * 32 * Size, Y+32 + Rotation * 32 * Size);\nGraphics::TBitmap * Image=new Graphics::TBitmap();\nImage-&gt;Transparent=true;\n//MainForm-&gt;Images-&gt;GetBitmap(ImgIndex[HisType]+Rotation, Image);\nMainForm-&gt;Images-&gt;Draw(Image-&gt;Canvas, 0, 0, ImgIndex[HisType]+Rotation, dsTransparent, itImage);\nCanvas-&gt;StretchDraw(DstRect, Image);\ndelete Image;\n\n//MainForm-&gt;Images-&gt;Draw(Canvas, X, Y, ImgIndex[HisType]+Rotation, dsTransparent, itImage);\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 3797, "user_id": 2874856, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/kWxOm.jpg?s=128&g=1", "display_name": "Raindrop7", "link": "https://stackoverflow.com/users/2874856/raindrop7"}, "edited": false, "score": 8, "creation_date": 1549477254, "post_id": 54560100, "comment_id": 95919523, "body": "<code>if (name[0] = alpha[0]</code>  maybe you wanted <code>if (name[0] == alpha[0]</code> The first condition  is always true because you are assigning <code>alpha[0]</code> to <code>name[0]</code>. A good compiler will warn you about that assignment in a condition. Second Why don&#39;t use the API <code>isalpha(name[i])</code> instead of writing down the alphabet in an array of character?"}], "answers": [{"tags": [], "owner": {"reputation": 3797, "user_id": 2874856, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/kWxOm.jpg?s=128&g=1", "display_name": "Raindrop7", "link": "https://stackoverflow.com/users/2874856/raindrop7"}, "is_accepted": false, "score": 1, "last_activity_date": 1549478830, "last_edit_date": 1549478830, "creation_date": 1549478014, "answer_id": 54560336, "question_id": 54560100, "link": "https://stackoverflow.com/questions/54560100/adding-new-arrays-changes-previous-ones/54560336#54560336", "title": "Adding New Arrays Changes Previous Ones?", "body": "<p>What I recommend is to use class <code>std::string</code> and you can use its members like <code>std::string::length()</code> which retrieves the length of the string (number of characters). Also You don't need to store the alphabet in an array of character but instead use <code>isalpha</code>, <code>toupper</code>...</p>\n\n<p>Here is an example:</p>\n\n<pre><code>std::string name;\nstd::cout &lt;&lt; \"name: \";\nstd::cin &gt;&gt; name;\n\nstd::cout &lt;&lt; \"Your name is: \" &lt;&lt; name &lt;&lt; std::endl;\nstd::cout &lt;&lt; \"The first letter in your name is: \" &lt;&lt; name[0] &lt;&lt; std::endl;\nstd::cout &lt;&lt; \"The index of the first letter in your name is: \" &lt;&lt; (int)( toupper(name[0]) - 'A' + 1 ) &lt;&lt; std::endl;\nstd::cout &lt;&lt; \"There are \" &lt;&lt; name.length() &lt;&lt; \" letters in your name\" &lt;&lt; std::endl;\n</code></pre>\n\n<p>You may think this is a bit complicated <code>(int)( toupper(name[0]) - 'A' + 1 )</code> but here is how it works:</p>\n\n<ul>\n<li>The user may enter a Small or Capital letter so I don't care so I convert it to capital e.g <code>a</code> becomes <code>A</code> so I subtract <code>A</code> from the actual letter and add 1 to get its index in the alphabet. e.g: If the user enters <code>hello</code>, <code>toupper</code> makes <code>h</code> to <code>H</code> then <code>H</code> - <code>A</code> gives the index of the letter in alphabet but indexed 0 so I add 1. So that <code>A</code> is 1 instead of 0 and <code>H</code> is 8 instead of 7...</li>\n</ul>\n"}], "owner": {"reputation": 31, "user_id": 11024588, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-W2OJXfVgy1E/AAAAAAAAAAI/AAAAAAAAAIQ/W489YZah_-c/photo.jpg?sz=128", "display_name": "to_Bewilder", "link": "https://stackoverflow.com/users/11024588/to-bewilder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 32, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1549478830, "creation_date": 1549477050, "last_edit_date": 1549477607, "question_id": 54560100, "link": "https://stackoverflow.com/questions/54560100/adding-new-arrays-changes-previous-ones", "title": "Adding New Arrays Changes Previous Ones?", "body": "<p>I am trying to make a program that asks the users name, then repeats it, says how many letters are in the name, the first letter of the name, and what place in the alphabet the first letter in the name is. I have this so far, but when I introduced the new char alpha, the char name is changed, ie. name[0] automatically becomes alpha[0], or a. How do I solve this? </p>\n\n<pre><code>#include &lt;iostream&gt;\n\nint main()\n{\n    char name[30];\n    int y;\n\n    std::cout &lt;&lt; \"What is your name? \\n\";    \n    std::cin &gt;&gt; name;\n\n    char p;\n    int z=0;\n\n    for (int i= 0; p = name[i], p != '\\0'; i++)\n    {\n        std::cout &lt;&lt; \"Calculating... \\n\";\n        z = i+ 1;\n    }\n\n    std::cout &lt;&lt; \"Your name is \" &lt;&lt; name &lt;&lt; '\\n';\n    std::cout &lt;&lt; \"You have \" &lt;&lt; z &lt;&lt; \" letters in your name \\n\";\n    std::cout &lt;&lt; \"The first letter of your name is \" &lt;&lt; name[0] &lt;&lt; '\\n';\n\n    char alpha[] = \"abcdefghijklmnopqrstuvwxyz\";\n\n    if (name[0] = alpha[0])\n    {\n        y = 1;\n    }\n    else\n        for (y = 1 ; name[0] != alpha[y]; y++)\n        {\n        }\n\n    std::cout &lt;&lt; name[0] &lt;&lt; \" is the \" &lt;&lt;  y &lt;&lt; \" letter of the alphabet \\n\";\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "arrays", "algorithm", "c++11", "reverse"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1549473791, "post_id": 54559203, "comment_id": 95917932, "body": "What&#39;s unclear about the error message? You didn&#39;t specify a size for the array."}, {"owner": {"reputation": 65, "user_id": 7564115, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f2836e34a82802faf92f8f2deff8e11?s=128&d=identicon&r=PG&f=1", "display_name": "Shivam Sharma", "link": "https://stackoverflow.com/users/7564115/shivam-sharma"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1549473864, "post_id": 54559203, "comment_id": 95917965, "body": "i want to declare the size of array by giving input."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 2, "creation_date": 1549473911, "post_id": 54559203, "comment_id": 95917989, "body": "@ShivamSharma <code>std::vector</code>.  Did you find that as part of your research?"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1549473928, "post_id": 54559203, "comment_id": 95918008, "body": "@ShivamSharma You cannot. Use a <code>std::vector</code> and <code>push_back()</code> instead."}, {"owner": {"reputation": 65, "user_id": 7564115, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f2836e34a82802faf92f8f2deff8e11?s=128&d=identicon&r=PG&f=1", "display_name": "Shivam Sharma", "link": "https://stackoverflow.com/users/7564115/shivam-sharma"}, "edited": false, "score": 0, "creation_date": 1549474173, "post_id": 54559203, "comment_id": 95918169, "body": "can you show me the code of program to reverse an array where first line of input contain size of array."}, {"owner": {"reputation": 65, "user_id": 7564115, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f2836e34a82802faf92f8f2deff8e11?s=128&d=identicon&r=PG&f=1", "display_name": "Shivam Sharma", "link": "https://stackoverflow.com/users/7564115/shivam-sharma"}, "edited": false, "score": 0, "creation_date": 1549474952, "post_id": 54559203, "comment_id": 95918523, "body": "I am new to programming. Anyone suggest me best data strcuture and algorithm book of c++"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1549474992, "post_id": 54559203, "comment_id": 95918534, "body": "@ShivamSharma Arrays in c++ have fixed sizes. Unlike many other languages, their size <i>must</i> be known at creation and can <i>never</i> change. If you want a dynamically sized array-like container try std::vector. But note that it will only resize when using the proper insertion or resize member functions. Simply accessing out of bound elements won&#39;t cause it to grow. It&#39;s simply an error (that the compiler isn&#39;t required to report about). Edit : Reposted to correct several typos."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 2, "creation_date": 1549475025, "post_id": 54559203, "comment_id": 95918558, "body": "@ShivamSharma Here&#39;s a <a href=\"https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list\">list</a> we keep."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 4, "creation_date": 1549475098, "post_id": 54559203, "comment_id": 95918593, "body": "This is asked every day. Every, single, day. Please do some research before posting!"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1549475369, "post_id": 54559203, "comment_id": 95918713, "body": "@Light ... multiple times I have to add up :P"}, {"owner": {"reputation": 65, "user_id": 7564115, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f2836e34a82802faf92f8f2deff8e11?s=128&d=identicon&r=PG&f=1", "display_name": "Shivam Sharma", "link": "https://stackoverflow.com/users/7564115/shivam-sharma"}, "edited": false, "score": 0, "creation_date": 1549475731, "post_id": 54559203, "comment_id": 95918877, "body": "i got it now. but when i am giving the array maximum size like a[100] it is giving me unexpected output."}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 1, "creation_date": 1549475749, "post_id": 54559203, "comment_id": 95918888, "body": "<code>for(c=b</code> ... <code>b</code> is out of bounds. You need <code>c=b-1</code> in this situation."}, {"owner": {"reputation": 65, "user_id": 7564115, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f2836e34a82802faf92f8f2deff8e11?s=128&d=identicon&r=PG&f=1", "display_name": "Shivam Sharma", "link": "https://stackoverflow.com/users/7564115/shivam-sharma"}, "reply_to_user": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 0, "creation_date": 1549475859, "post_id": 54559203, "comment_id": 95918932, "body": "@TedLyngmo  working now..thanks a lot"}, {"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1549476047, "post_id": 54559203, "comment_id": 95919009, "body": "Even better after the change and use of vectors, use reverse iterators!"}], "answers": [{"tags": [], "owner": {"reputation": 20494, "user_id": 9609840, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XZJmc.png?s=128&g=1", "display_name": "JeJo", "link": "https://stackoverflow.com/users/9609840/jejo"}, "is_accepted": false, "score": 3, "last_activity_date": 1549475591, "last_edit_date": 1549475591, "creation_date": 1549474052, "answer_id": 54559330, "question_id": 54559203, "link": "https://stackoverflow.com/questions/54559203/store-size-of-array-is-not-known/54559330#54559330", "title": "Store size of array is not known", "body": "<blockquote>\n  <p>i want to create the program to reverse the array</p>\n</blockquote>\n\n<p>Simply use <a href=\"https://en.cppreference.com/w/cpp/container/vector\" rel=\"nofollow noreferrer\">std::vector</a> for that.</p>\n\n<p>A good starting would be:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n\nint main()\n{\n    std::size_t size;\n    std::cin &gt;&gt; size;        // size of the array    \n    std::vector&lt;int&gt; a(size);// allocate memory for provided size and \n                             // initialize with 0's\n    // using range based loop iterate though referances of\n    // each elements in the array and update with user input.\n    for (int&amp; element : a) std::cin &gt;&gt; element;\n\n    return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 5, "creation_date": 1549475571, "post_id": 54559682, "comment_id": 95918816, "body": "Not <i>that</i> simple - you impose a maximum length for the array this way, and user might input a larger number! So you then need to check this case, too, and provide some appropriate error handling."}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 1, "creation_date": 1549475845, "post_id": 54559682, "comment_id": 95918927, "body": "Look at the answers using a <code>std::vector</code> instead."}, {"owner": {"reputation": 65, "user_id": 7564115, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f2836e34a82802faf92f8f2deff8e11?s=128&d=identicon&r=PG&f=1", "display_name": "Shivam Sharma", "link": "https://stackoverflow.com/users/7564115/shivam-sharma"}, "reply_to_user": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1549475930, "post_id": 54559682, "comment_id": 95918961, "body": "@Aconcagua can u suggest me a good programming book to learn programming in c++ or any online free course?"}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "reply_to_user": {"reputation": 65, "user_id": 7564115, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f2836e34a82802faf92f8f2deff8e11?s=128&d=identicon&r=PG&f=1", "display_name": "Shivam Sharma", "link": "https://stackoverflow.com/users/7564115/shivam-sharma"}, "edited": false, "score": 0, "creation_date": 1549476389, "post_id": 54559682, "comment_id": 95919150, "body": "@ShivamSharma Have a look at <a href=\"https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list\">here</a>."}], "tags": [], "owner": {"reputation": 1, "user_id": 11024324, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-zU_vmntXpF0/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQMrrtFRrUaxvYKm1XiBUr7uXa5g6Q/mo/photo.jpg?sz=128", "display_name": "Omkar Khot", "link": "https://stackoverflow.com/users/11024324/omkar-khot"}, "is_accepted": false, "score": -2, "last_activity_date": 1549475313, "creation_date": 1549475313, "answer_id": 54559682, "question_id": 54559203, "link": "https://stackoverflow.com/questions/54559203/store-size-of-array-is-not-known/54559682#54559682", "title": "Store size of array is not known", "body": "<p>You need  to must assign a maximum size of the array\nJust try this by assigning a length of an array\nEx\nInt a[5];</p>\n"}, {"tags": [], "owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "is_accepted": false, "score": 1, "last_activity_date": 1549475356, "creation_date": 1549475356, "answer_id": 54559691, "question_id": 54559203, "link": "https://stackoverflow.com/questions/54559203/store-size-of-array-is-not-known/54559691#54559691", "title": "Store size of array is not known", "body": "<p><em>Extension</em> to <a href=\"https://stackoverflow.com/users/9609840/jejo\">JeJo</a>'s <a href=\"https://stackoverflow.com/a/54559330/1312382\">answer</a>:</p>\n\n<p>The latter is simple, elegant and efficient &ndash; for any type similarly simple as <code>int</code>. If you are dealing with more complex types, though, then with this approach you'd first default-initialise all elements and then copy- or move-assign the final objects, which you would most likely want to avoid. In such a case, the following approach is superior:</p>\n\n<pre><code>std::vector&lt;SomeComplexType&gt; v;\nv.reserve(NumberOfObjectsYouNeed);\n\n// appropriate loop definition here!\n{\n    v.emplace_back(/* the parameters you want to/must provide to constructor */);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": false, "score": 1, "last_activity_date": 1549476856, "last_edit_date": 1549476856, "creation_date": 1549476498, "answer_id": 54559967, "question_id": 54559203, "link": "https://stackoverflow.com/questions/54559203/store-size-of-array-is-not-known/54559967#54559967", "title": "Store size of array is not known", "body": "<p>You are not defining a size for the <code>a[]</code> array, thus the error message. Arrays must have a size specified. In your case, you need to use the <code>new[]</code> operator to allocate the array after you determine that size from the user, eg:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nint main() {\n    int *a;\n    int b;\n\n    std::cin &gt;&gt; b;\n    a = new int[b];\n\n    for(int i = 0; i &lt; b; ++i)\n        std::cin &gt;&gt; a[i];\n\n    for(int c = b - 1; c &gt;= 0; --c)\n        std::cout &lt;&lt; a[c] &lt;&lt; std::endl;\n\n    delete[] a;\n    return 0;\n}\n</code></pre>\n\n<p>However, the preferred way to use a dynamically sized array in C++ is to use the standard <code>std::vector</code> container instead, eg:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include &lt;algorithm&gt;\n#include &lt;iterator&gt;\n\nint main() {\n    std::vector&lt;int&gt; a;\n    int b;\n\n    std::cin &gt;&gt; b;\n    a.reserve(b);\n\n    std::copy_n(\n        std::istream_iterator&lt;int&gt;(std::cin), n,\n        std::back_inserter(a)\n    );\n\n    std::for_each(a.rbegin(), a.rend(),\n        [](int i){ std::cout &lt;&lt; i &lt;&lt; std::endl; }\n    );\n\n    /* alternatively:\n    std::reverse(a.begin(), a.end());\n    for(int i : a)\n        std::cout &lt;&lt; i &lt;&lt; std::endl;\n    */\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 65, "user_id": 7564115, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f2836e34a82802faf92f8f2deff8e11?s=128&d=identicon&r=PG&f=1", "display_name": "Shivam Sharma", "link": "https://stackoverflow.com/users/7564115/shivam-sharma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 207, "favorite_count": 0, "answer_count": 4, "score": -6, "last_activity_date": 1565513197, "creation_date": 1549473683, "last_edit_date": 1565513197, "question_id": 54559203, "link": "https://stackoverflow.com/questions/54559203/store-size-of-array-is-not-known", "title": "Store size of array is not known", "body": "<p>I want to create the program to reverse the array. But I am getting an error that storage size of array <code>a[]</code> is not known.</p>\n\n<pre><code>#include&lt;iostream&gt;\nusing namespace std;\n\nint main()\n{\n    int a[];\n    int b, c;\n    cin &gt;&gt; b;\n    for (int i = 0; i &lt; b; i++)\n        cin &gt;&gt; a[i];\n    for (c = b; c &gt;= 0; c--)\n        cout &lt;&lt; a[c] &lt;&lt; endl;\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "c"], "comments": [{"owner": {"reputation": 15260, "user_id": 1968182, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/E5nF2.jpg?s=128&g=1", "display_name": "Ulrich Eckhardt", "link": "https://stackoverflow.com/users/1968182/ulrich-eckhardt"}, "edited": false, "score": 0, "creation_date": 1549473229, "post_id": 54558912, "comment_id": 95917645, "body": "Please read <a href=\"https://stackoverflow.com/questions/tagged/c\">c</a> and <a href=\"https://stackoverflow.com/questions/tagged/c%2b%2b\">c++</a> and then delete the one that&#39;s not appropriate. That said, <code>getxattr()</code> is not standard C but comes from a certain environment, have you checked the according documentation? Also, add the according tag while you&#39;re at it!"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "reply_to_user": {"reputation": 15260, "user_id": 1968182, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/E5nF2.jpg?s=128&g=1", "display_name": "Ulrich Eckhardt", "link": "https://stackoverflow.com/users/1968182/ulrich-eckhardt"}, "edited": false, "score": 0, "creation_date": 1549473532, "post_id": 54558912, "comment_id": 95917802, "body": "@UlrichEckhardt your links are to the complete list of newest questions for c and c++, respectively. I hope OP is not reading all of it before coming back ;P. Sorry, no trolling, just wanted to know if you actually wanted to link to the tag description, maybe?"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "reply_to_user": {"reputation": 15260, "user_id": 1968182, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/E5nF2.jpg?s=128&g=1", "display_name": "Ulrich Eckhardt", "link": "https://stackoverflow.com/users/1968182/ulrich-eckhardt"}, "edited": false, "score": 0, "creation_date": 1549473575, "post_id": 54558912, "comment_id": 95917820, "body": "@UlrichEckhardt <a href=\"https://stackoverflow.com/tags/c%2b%2b/info\">this</a> is a better link imho"}, {"owner": {"reputation": 15260, "user_id": 1968182, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/E5nF2.jpg?s=128&g=1", "display_name": "Ulrich Eckhardt", "link": "https://stackoverflow.com/users/1968182/ulrich-eckhardt"}, "edited": false, "score": 0, "creation_date": 1549473591, "post_id": 54558912, "comment_id": 95917830, "body": "I was targetting the tag description, which is on top of the two."}, {"owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "edited": false, "score": 1, "creation_date": 1549473700, "post_id": 54558912, "comment_id": 95917883, "body": "However, the problem as well as the solution is exactly the same for both languages, so why decide for one? Remember, Q&amp;A here are not only for the OP (some say not even primarily)."}], "answers": [{"comments": [{"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1549474029, "post_id": 54559078, "comment_id": 95918073, "body": "I suggest filing a report on the documentation of <code>getxattr</code> as it is not made explicit that the value returned is not null-terminated."}, {"owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "reply_to_user": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1549474169, "post_id": 54559078, "comment_id": 95918166, "body": "@PaulOgilvie My manpage states: &quot;An extended attribute name is a simple NULL-terminated string.  The name includes a namespace prefix - there may be several, disjoint namespaces  associated  with  an  individual inode.  The value of an extended attribute is a chunk of arbitrary textual or binary data of specified length.&quot; &lt;- Since binary data is mentioned, I would not expect it to be NULL-terminated, but it would be safer if they stated it more explicitly, agreed."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1549492700, "post_id": 54559078, "comment_id": 95926131, "body": "If it is binary data it could also contain a null in the middle, meaning it cannot &quot;safely&quot; be printed via printf, no?"}, {"owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1549495640, "post_id": 54559078, "comment_id": 95927089, "body": "@user463035818 Well, it <i>can</i> be binary data... The user namespace is custom, I assume, that the OP knows, that printable ascii text is stored in the attribute user.permission."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1549535075, "post_id": 54559078, "comment_id": 95939951, "body": "@Ctx ok, I have to admit other than reading a bit of documentation I dont know anything about <code>getxattr</code>. My guess is that this is the reason why the function call does not place the null"}, {"owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1549535412, "post_id": 54559078, "comment_id": 95940179, "body": "@user463035818 Yes, you are correct, in general binary data is set, this is why no null termination is performed by getxattr(). But if you know, that the specific user attribute contains a string, you can of course printf() it after null termination is ensured"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1549535502, "post_id": 54559078, "comment_id": 95940222, "body": "thanks for the clarification, assuming not having a null in the middle of a buffer once bite my ass, and now I am a bit paranoic about it ;)"}], "tags": [], "owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "is_accepted": true, "score": 4, "last_activity_date": 1549535444, "last_edit_date": 1549535444, "creation_date": 1549473273, "answer_id": 54559078, "question_id": 54558912, "link": "https://stackoverflow.com/questions/54558912/why-does-getxattr-fills-extra-elements/54559078#54559078", "title": "Why does getxattr fills extra elements?", "body": "<p>You have to honour the <em>real</em> size of the attribute.</p>\n\n<p>The call <code>getxattr()</code> returns the size of the value. So the following would be correct:</p>\n\n<pre><code>ssize_t sz = getxattr(filename, \"user.permission\", value, sizeof(value)-1);\nif (sz != -1) {\n    value[sz] = '\\0';\n    printf(\"value is %s\\n\", value);\n}\n</code></pre>\n\n<p>It looks, like your value is a string, but it is not null terminated, you have to do that yourself. So, <code>getxattr()</code> is not appending random bytes, the char array is simply not initialized and it is not completely overwritten, so some uninitialized bytes remain there.</p>\n"}, {"comments": [{"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1549474098, "post_id": 54559090, "comment_id": 95918124, "body": "Nice that it returns the size, but I would expect a function handling a string to null-terminate said string. And if it doesn&#39;t that it is then noted in the remarks or description."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "reply_to_user": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1549491701, "post_id": 54559090, "comment_id": 95925803, "body": "@PaulOgilvie i guess the reasoning is that the bytes can contain a 0 (also at a different position than the end) Note that it doesnt say string but the documentation only talks about raw bytes"}], "tags": [], "owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "is_accepted": false, "score": 3, "last_activity_date": 1549473295, "creation_date": 1549473295, "answer_id": 54559090, "question_id": 54558912, "link": "https://stackoverflow.com/questions/54558912/why-does-getxattr-fills-extra-elements/54559090#54559090", "title": "Why does getxattr fills extra elements?", "body": "<p>From <a href=\"http://man7.org/linux/man-pages/man2/getxattr.2.html\" rel=\"nofollow noreferrer\">documentation</a> (emphasize mine):</p>\n\n<blockquote>\n  <p>getxattr() retrieves the value of the extended attribute identified\n         by name and associated with the given path in the filesystem.  The\n         attribute value is placed in the buffer pointed to by value; size\n         specifies the size of that buffer.  <strong>The return value of the call is\n         the number of bytes placed in value.</strong></p>\n</blockquote>\n\n<p>I didnt find something about <code>getxattr()</code> placing a <code>\\0</code> so I would expect that you have to use the size returned from the function to know the size of the string.</p>\n"}], "owner": {"reputation": 635, "user_id": 2754688, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/595cbbf26e32c5162dced7a9d0cbb668?s=128&d=identicon&r=PG&f=1", "display_name": "srccode", "link": "https://stackoverflow.com/users/2754688/srccode"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 106, "favorite_count": 0, "accepted_answer_id": 54559078, "answer_count": 2, "score": 0, "last_activity_date": 1549535444, "creation_date": 1549472657, "question_id": 54558912, "link": "https://stackoverflow.com/questions/54558912/why-does-getxattr-fills-extra-elements", "title": "Why does getxattr fills extra elements?", "body": "<p>I have the below piece of code where I'm unable to figure out why I'm getting some weird symbols at the end of the buffer.</p>\n\n<pre><code>char value[100];\n    if(getxattr(filename, \"user.permission\", value, sizeof(value))!=-1){\n        //strncpy(val, value, strlen(value));\n        printf(\"value is %s\\n\", value);\n    }\n</code></pre>\n\n<p>For length >4 elements, it prints properly but if the value has less than four elements it appends some random characters at the end.</p>\n\n<p>When I print the size of the value, it shows 6 for any value length between 1-4.\nPlease, someone, explain why is this behavior.</p>\n"}, {"tags": ["c++", "regex", "c++17", "lexer"], "comments": [{"owner": {"reputation": 481647, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 1, "creation_date": 1549471233, "post_id": 54558461, "comment_id": 95916563, "body": "Regex can&#39;t match the longest or shortest match. You need to match all occurrences and then use other language means to find the longest one. Or, when iterating, rewrite the result with the longer match."}, {"owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "edited": false, "score": 2, "creation_date": 1549471423, "post_id": 54558461, "comment_id": 95916655, "body": "How can you ever find the longest matching string without viewing the whole string?"}, {"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1549471490, "post_id": 54558461, "comment_id": 95916703, "body": "There was a similar question here recently: <a href=\"https://stackoverflow.com/questions/54237547/why-does-the-performance-of-this-non-matching-pattern-scale-with-the-size-of-the\" title=\"why does the performance of this non matching pattern scale with the size of the\">stackoverflow.com/questions/54237547/&hellip;</a>"}, {"owner": {"reputation": 124806, "user_id": 121747, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/9fcebb68b105446c0d9eebbce1146044?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/121747/jack"}, "edited": false, "score": 0, "creation_date": 1549471526, "post_id": 54558461, "comment_id": 95916724, "body": "The problem is not finding all occurrences of the first contiguous match, that&#39;s fine, the problem is that in a circumstance like &quot;1234 foo bar 1234 1234&quot; I&#39;d like to stop the search after the first series of matches ends (so after first 1234)."}, {"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1549471584, "post_id": 54558461, "comment_id": 95916754, "body": "And the std::regex implementation doesn&#39;t do so (see the link I sent, the answer is tehre)."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1549472292, "post_id": 54558461, "comment_id": 95917168, "body": "can you split the input and apply the regex to parts?"}, {"owner": {"reputation": 22818, "user_id": 1387438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ad806758c356c915ea08a4bfd79131e3?s=128&d=identicon&r=PG", "display_name": "Marek R", "link": "https://stackoverflow.com/users/1387438/marek-r"}, "edited": false, "score": 0, "creation_date": 1549472507, "post_id": 54558461, "comment_id": 95917276, "body": "I know that Regular Expression are cool, but people are tend to overuse them.  IMO this is the case where it shouldn&#39;t be used since this is classic parsing problem. RE are slow (especially when lots of repetitions are in use), but a good thing about them is: they are configurable. So when RE is hard coded it should not be used."}, {"owner": {"reputation": 124806, "user_id": 121747, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/9fcebb68b105446c0d9eebbce1146044?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/121747/jack"}, "reply_to_user": {"reputation": 22818, "user_id": 1387438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ad806758c356c915ea08a4bfd79131e3?s=128&d=identicon&r=PG", "display_name": "Marek R", "link": "https://stackoverflow.com/users/1387438/marek-r"}, "edited": false, "score": 0, "creation_date": 1549472754, "post_id": 54558461, "comment_id": 95917397, "body": "@MarekR: let me decide when I want to use regex for a lexer or not, I wrote many standard automaton lexers but in this specific circumstance my requirements fit regex usage, the problem is that the API is lacking."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1549473458, "post_id": 54558461, "comment_id": 95917772, "body": "Jack, I think Marek is pointing out your issue is a common one: &quot;Hey, I had a problem.  So I tried to solve it with regex.  Now I have two problems, the original problem and this regex issue that is really annoying.  Help!&quot;  Don&#39;t get me wrong, I love regex... for the purpose of typing into a vi/sed/awk/python/perl script to do on-off mass editing that I can audit afterwards."}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 0, "creation_date": 1549475268, "post_id": 54558461, "comment_id": 95918659, "body": "@Jack I think you can skip the <code>[1-9]*</code> part, leaving only <code>[+-]?[0-9]+</code> to get the same result as your current regex."}], "answers": [{"tags": [], "owner": {"reputation": 22818, "user_id": 1387438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ad806758c356c915ea08a4bfd79131e3?s=128&d=identicon&r=PG", "display_name": "Marek R", "link": "https://stackoverflow.com/users/1387438/marek-r"}, "is_accepted": false, "score": 2, "last_activity_date": 1549473685, "last_edit_date": 1549473685, "creation_date": 1549473263, "answer_id": 54559073, "question_id": 54558461, "link": "https://stackoverflow.com/questions/54558461/find-only-first-stdregex-match-efficiently/54559073#54559073", "title": "Find only first std::regex match efficiently", "body": "<p>First of all <code>[+-]?[1-9]?[0-9]+</code> I think it does the same think, but should be a bit faster. Or you intend to use something like this: <code>[+-]?[1-9][0-9]*|0</code> (zero without sign or number not starting with zero).</p>\n\n<p>Secondly C++ provides regular expression iterator:</p>\n\n<pre><code>const std::string s = \"51+12*3\";\n\nstd::regex number_regex(\"[+-]?[1-9]?[0-9]+\");\nauto words_begin = \n    std::sregex_iterator(s.begin(), s.end(), number_regex);\nauto words_end = std::sregex_iterator();\n\nstd::cout &lt;&lt; \"Found \" \n          &lt;&lt; std::distance(words_begin, words_end) \n          &lt;&lt; \" numbers:\\n\";\n\nfor (std::sregex_iterator i = words_begin; i != words_end; ++i) {\n    std::smatch match = *i;                                                 \n    std::string match_str = match.str(); \n    std::cout &lt;&lt; match_str &lt;&lt; '\\n';\n} \n</code></pre>\n\n<p>And looks like this is what you need.</p>\n\n<p><a href=\"https://wandbox.org/permlink/tkaAfIslkWeY2poo\" rel=\"nofollow noreferrer\">https://wandbox.org/permlink/tkaAfIslkWeY2poo</a></p>\n"}], "owner": {"reputation": 124806, "user_id": 121747, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/9fcebb68b105446c0d9eebbce1146044?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/121747/jack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 708, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1549473685, "creation_date": 1549471127, "last_edit_date": 1549471636, "question_id": 54558461, "link": "https://stackoverflow.com/questions/54558461/find-only-first-stdregex-match-efficiently", "title": "Find only first std::regex match efficiently", "body": "<p>I'm trying to find an efficient way to greedily find the first match for a <code>std::regex</code> without analyzing the whole input.</p>\n\n<p>My specific problem is that I wrote a hand made lexer and I'm trying to provide rules to parse common literal values (eg. a numeric value).</p>\n\n<p>So suppose a simple let's say</p>\n\n<pre><code>std::regex integralRegex = std::regex(\"([+-]?[1-9]*[0-9]+)\");\n</code></pre>\n\n<p>Is there a way to find the longest match starting from the beginning of input without scanning all of it? It looks like <code>std::regex_match</code> tries to match the whole input while <code>std::regex_search</code> forcefully finds all matches.</p>\n\n<p>Maybe I'm missing a trivial overload for my purpose but I can't find an efficient solution to the problem.</p>\n\n<p>Just to clarify the question: I'm not interested in stopping after first sub-match and ignore the remainder of input but for an input like <code>\"51+12*3\"</code> I'd like something that finds first <code>51</code> match and then stops, ignoring whatever is after.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 5, "creation_date": 1549470529, "post_id": 54558267, "comment_id": 95916161, "body": "Use strings. Will solve your issues."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 6, "creation_date": 1549470719, "post_id": 54558267, "comment_id": 95916273, "body": "Don&#39;t use plain <code>gets()</code> \u2014 it&#39;s a C function that is no longer part of the C standard.  See <a href=\"https://stackoverflow.com/questions/1694036/why-is-the-gets-function-dangerous-why-should-it-not-be-used\">Why the <code>gets()</code> function is too dangerous to be used \u2014 ever!</a>"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1549470814, "post_id": 54558267, "comment_id": 95916319, "body": "Go back to the version that worked (you are using either version control or copies of working code, aren&#39;t you?).  Look at what changed between the two.  Work out which change did the damage, and rethink that code."}, {"owner": {"reputation": 2055, "user_id": 6564148, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u3HL5.png?s=128&g=1", "display_name": "George", "link": "https://stackoverflow.com/users/6564148/george"}, "edited": false, "score": 12, "creation_date": 1549470892, "post_id": 54558267, "comment_id": 95916359, "body": "&quot;do not tell me my code is prehistoric&quot; Your code is antediluvian."}, {"owner": {"reputation": 388, "user_id": 969429, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oOGKW.jpg?s=128&g=1", "display_name": "Phil_12d3", "link": "https://stackoverflow.com/users/969429/phil-12d3"}, "edited": false, "score": 0, "creation_date": 1549471209, "post_id": 54558267, "comment_id": 95916549, "body": "If you add code and it breaks the execution of existing code, it will have being executed somehow. If you add code and the compilation breaks, then that&#39;s a different matter. But as said before, compare and find what changed - then investigate that."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 2, "creation_date": 1549471334, "post_id": 54558267, "comment_id": 95916616, "body": "&quot;Why does adding code break what was working even if it isn&#39;t executed?&quot; - My first guess would be that your code contains Undefined Behaviour, so <i>any</i> change could cause the compiler to generate some new interresting version of broken - but you really could not rely on the &quot;seems to work&quot; broken behaviour in the first place. But that&#39;s just what my crystal ball tells me."}, {"owner": {"reputation": 50273, "user_id": 167958, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/0defa74609a4ce5d51f2467b69c509be?s=128&d=identicon&r=PG", "display_name": "Omnifarious", "link": "https://stackoverflow.com/users/167958/omnifarious"}, "edited": false, "score": 2, "creation_date": 1549471643, "post_id": 54558267, "comment_id": 95916791, "body": "You are clearly using some really old version of Borland C++ or Zortech C++ or something like that. If you have an 80386 or newer you can probably run a Linux distribution on it and get a very recent version of GNU C++ or clang. Do this. This is seriously extremely ancient C++. Probably more than 20 years old. If you have an 80286 or earlier... I don&#39;t know what to say. Your code is not even C++98 compliant."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1549471647, "post_id": 54558267, "comment_id": 95916795, "body": "Please, please, <i>please</i> get a modern compiler and write modern standards compliant C++17 (I&#39;d even settle for C++11; even if that&#39;s also getting a bit old by now). This pre-standard dinosaur should be taken out back and shot - it&#39;s the humane thing to do."}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 2, "creation_date": 1549471658, "post_id": 54558267, "comment_id": 95916803, "body": "<code>&lt;fstream.h&gt;</code> is not a standard C++ header. <code>void main()</code> is not valid C++ and shouldn&#39;t compile. There are plenty of free alternatives to the ancient compiler you are using. What you learn using the compiler you are using now has to be unlearnt later on."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 11023907, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a05df89b47858ade4ea7f04790286e8?s=128&d=identicon&r=PG&f=1", "display_name": "D.A.", "link": "https://stackoverflow.com/users/11023907/d-a"}, "edited": false, "score": 0, "creation_date": 1549557306, "post_id": 54559265, "comment_id": 95953505, "body": "THANK YOU FOR THE ANSWER. Though I resolved the issue myself now... with my ancient ways ofcourse. And thanks for the suggestions of what I have to do next by the way.. Will surely think of upgrading after examinations..THANKS AGAIN"}, {"owner": {"reputation": 50273, "user_id": 167958, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/0defa74609a4ce5d51f2467b69c509be?s=128&d=identicon&r=PG", "display_name": "Omnifarious", "link": "https://stackoverflow.com/users/167958/omnifarious"}, "reply_to_user": {"reputation": 1, "user_id": 11023907, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a05df89b47858ade4ea7f04790286e8?s=128&d=identicon&r=PG&f=1", "display_name": "D.A.", "link": "https://stackoverflow.com/users/11023907/d-a"}, "edited": false, "score": 0, "creation_date": 1549558367, "post_id": 54559265, "comment_id": 95954123, "body": "@D.A. - Did the issue turn out to be a buffer overrun with <code>gets</code>?"}], "tags": [], "owner": {"reputation": 50273, "user_id": 167958, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/0defa74609a4ce5d51f2467b69c509be?s=128&d=identicon&r=PG", "display_name": "Omnifarious", "link": "https://stackoverflow.com/users/167958/omnifarious"}, "is_accepted": false, "score": 7, "last_activity_date": 1549475188, "last_edit_date": 1549475188, "creation_date": 1549473875, "answer_id": 54559265, "question_id": 54558267, "link": "https://stackoverflow.com/questions/54558267/why-does-adding-code-break-what-was-working-even-if-it-isnt-executed/54559265#54559265", "title": "Why does adding code break what was working even if it isn&#39;t executed?", "body": "<p>First, you are using stuff that's seriously ancient. There is free, absolutely, completely, and totally free stuff out there that's much more modern than this. If this is production code, you should be moving it to a newer platform. If it's student code, you shouldn't be learning on this platform at all. If you have at least an 80386, there are perfectly serviceable tiny Linux distributions available for free download that will run on the hardware you have. And then you'll have a modern compiler.</p>\n\n<p>You clearly have access to the Internet, so you should have some ability to do this. In fact, the hardware you're using to access this site could probably run a modern, completely free to use compiler like GNU C++ or clang.</p>\n\n<p>I can tell from the headers and lack of <code>::std</code> namespace you have that you're using a really old MS-DOS based compiler. Turbo C++, Borland C++, Zortech C++, maybe whatever Microsoft called their thing back then. Something like that. I know because I've <em>written</em> C++ for that platform... in 1990.</p>\n\n<p>Even given that ancient platform, your code is written poorly. You are mixing stdio and iostreams. While this isn't inherently bad, it's confusing. Additionally, you're using <code>gets</code> which makes it easy for bad input to crash your program. There are other problems, but I won't get into all of them because I don't think they're relevant to your question.</p>\n\n<p>The reason, in general, why adding code that's never executed causes your program to crash is that it had an already existing problem that moving stuff around in memory made appear. I can't compile or run your code because it's too ancient. Additionally, I have no available input to use.</p>\n\n<p>But, were I to hazard a guess, it would be because you are using <code>gets</code> and the input is causing a buffer overrun (you are reading more than 40 characters into your buffer). It always caused a buffer overrun, but because the new code moved stuff around in memory, it's now causing your program to crash instead of having no effect or causing some other problem you didn't see before. Buffer overruns result in undefined behavior, which means the program is allowed to do anything, even seemingly work perfectly normally.</p>\n\n<p>Here is a function to replace all your <code>gets</code> calls with:</p>\n\n<pre><code>int fetch_line(char *s, int size)\n{\n   fgets(s, size, stdin);\n   if ((size &lt;= 0) || (s[0] == '\\0') || (s[strlen(s) - 1] != '\\n')) {\n      int c = '\\0';\n      do {\n         c = getchar();\n      } while ((c != '\\n') &amp;&amp; (c != EOF));\n      return c != EOF;\n   } else {\n      s[strlen(s) - 1] = '\\0'; // Drop trailing newline.\n   }\n}\n</code></pre>\n\n<p>This function will return a non-zero (aka true) value if it did not encounter EOF and 0 (aka false) if it did. It will discard any characters that don't fit in your buffer but still read until the end of line (aka <code>'\\n'</code>) character. In your code, a call to it would look like <code>fetch_line(name, sizeof(name));</code>.</p>\n\n<p>Your code may have other problems, but if it does, they aren't obvious to me. The <code>gets</code> one is a huge red flag though. You should <strong>never</strong> use <code>gets</code>. My compiler gives me scary deprecation warnings that I can't turn off if I use it because the call is going away completely in a few years.</p>\n\n<p>In general, any function that works with C-style strings and doesn't have a parameter declaring the maximum size of any string being written to is a bad function to use that's prone to buffer overrun behavior.</p>\n\n<p>BTW, I have no platform on which calls to <code>getch</code> or <code>clrscr</code> work anymore. Using those functions makes your program very non-portable.</p>\n"}], "owner": {"reputation": 1, "user_id": 11023907, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a05df89b47858ade4ea7f04790286e8?s=128&d=identicon&r=PG&f=1", "display_name": "D.A.", "link": "https://stackoverflow.com/users/11023907/d-a"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 127, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1549475188, "creation_date": 1549470475, "last_edit_date": 1549470968, "question_id": 54558267, "link": "https://stackoverflow.com/questions/54558267/why-does-adding-code-break-what-was-working-even-if-it-isnt-executed", "title": "Why does adding code break what was working even if it isn&#39;t executed?", "body": "<p>Function 5:<br>\nThe Display Sales History Function.. It is just displaying the last entry twice...</p>\n\n<p>Function 1:<br>\nThe 'Add Book' Feature.. It was actually working alright until I added the 'Edit Book' and 'Add Sales' Features. Now it writes something to the file(\"Books.txt\"); that none of the other functions identify. Earlier,i.e. \nwhen 'Edit Book' and 'Add Sales' weren't coded and structure Sale not declared,\n'Search Book' could work properly with the entry done by 'Add Book'.</p>\n\n<p>((This is what I found in BOOKS.txt when I only coded functions 1 and 2 and did a test run:\n{{Mein Kampf \u00ffu)&lt;\u00e8\u00ffX  0@ \u01780  :\u00f2\u00ff2  XThe Accidental Prime Minister \u01780  :\u00f2\u00ff&lt;  ^Quantico ental Prime Minister \u01780  :\u00f2\u00ff  \u00c2Surely You Are Joking, Mr. Feynman  X0-  \u00f4}}</p>\n\n<p>If you paste this in Books.txt, all features except 'Add' work allright))</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;fstream.h&gt;\n#include &lt;conio.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;dos.h&gt;\nstruct Sale {\n    char costumer[40], name[40];\n    int quant, pric, netprice;\n};\nclass Book {\npublic:\n    char name[40];\n    int qty, code, price;\n    void Add()\n    {\n        cout &lt;&lt; \"\\n Enter Name Of New Book\\n\";\n        gets(name);\n        cout &lt;&lt; \"\\n Enter book code:\";\n        cin &gt;&gt; code;\n        cout &lt;&lt; \"\\n Enter book price:\";\n        cin &gt;&gt; price;\n        cout &lt;&lt; \"\\n Enter book quantity:\";\n        cin &gt;&gt; qty;\n    }\n    void Display()\n    {\n        cout &lt;&lt; \"\\n Name:\";\n        puts(name);\n        cout &lt;&lt; \"Code:\" &lt;&lt; code;\n        cout &lt;&lt; \"\\nPrice:\" &lt;&lt; price;\n        cout &lt;&lt; \"\\nQuantity Available:\" &lt;&lt; qty;\n    }\n    void Modify();\n    Sale Sell(int q)\n    {\n        Sale sale;\n        sale.pric = price;\n        qty -= q;\n        sale.quant = q;\n        sale.netprice = q * price;\n        cout &lt;&lt; \"\\n Enter costumer name\\n\";\n        gets(sale.costumer);\n        strcpy(sale.name, name);\n        return sale;\n    }\n};\nvoid Book::Modify()\n{\n    Display();\n    char ch = 'n';\n    do {\n        cout &lt;&lt; \"\\n Enter detail to modify \\n\";\n        cout &lt;&lt; \"1.NAME\\t2.QUANTITY\\t3.CODE\\t4.PRICE\\n\";\n        int mod;\n        cin &gt;&gt; mod;\n        switch (mod) {\n        case 1:\n            cout &lt;&lt; \"\\nEnter new Name\\n\";\n            gets(name);\n            break;\n        case 2:\n            cout &lt;&lt; \"\\nEnter new available quantity\\n\";\n            cin &gt;&gt; qty;\n            break;\n        case 3:\n            cout &lt;&lt; \"\\nEnter changed CODE\\n\";\n            cin &gt;&gt; code;\n            break;\n        case 4:\n            cout &lt;&lt; \"\\nEnter updated PRICE\\n\";\n            cin &gt;&gt; price;\n            break;\n        }\n        Display();\n        cout &lt;&lt; \"\\nWant to edit more? (y/n)\\n\";\n        ch = getch();\n    } while (ch == 'y' || ch == 'Y');\n}\nvoid Print(Sale s)\n{\n    cout &lt;&lt; \"\\nCostumer Name:\\t\";\n    puts(s.costumer);\n    cout &lt;&lt; \"Book Name:\\t\";\n    puts(s.name);\n    cout &lt;&lt; \"\\nQuantity(units):\" &lt;&lt; s.quant &lt;&lt; \"\\tPrice per pice:\" &lt;&lt; s.pric &lt;&lt; \"\\n\\t Net Sale:\" &lt;&lt; s.netprice;\n}\nvoid MScreen()\n{\n    clrscr();\n    cout &lt;&lt; \"\\tTHE BOOK STORE MANAGEMENT SOFTWARE\\n\";\n    cout &lt;&lt; \"\\tPLEASE CHOOSE AN OPTION\";\n    cout &lt;&lt; \"\\n1.ADD NEW BOOK\\n2. SEARCH FOR A BOOK\\n3. EDIT BOOK DETAILS\\n 4.ADD NEW SALES\\n5. DISPLAY SALES HISTORY\\n\";\n}\nvoid main()\n{\n    char ch = 'n';\n    while (ch == 'n' || ch == 'N') {\n        MScreen();\n        int i;\n        cin &gt;&gt; i;\n        clrscr();\n        switch (i) {\n        case 1:\n            Book a;\n            a.Add();\n            ofstream obj1(\"BOOKS.txt\", ios::app);\n            obj1.write((char*)&amp;a, sizeof(Book));\n            obj1.close();\n            break;\n        case 2:\n            Book b;\n            ifstream obj2(\"BOOKS.txt\");\n            obj2.seekg(0);\n            cout &lt;&lt; \"Enter Book Code:\";\n            long int x;\n            cin &gt;&gt; x;\n            while (!obj2.eof()) {\n                obj2.read((char*)&amp;b, sizeof(Book));\n                if (b.code == x) {\n                    b.Display();\n                    obj2.close();\n                    break;\n                }\n            }\n            break;\n        case 3:\n            Book c;\n            cout &lt;&lt; \"\\n Enter Code of book to be modified\\t\";\n            int y;\n            cin &gt;&gt; y;\n            fstream obj3(\"BOOKS.txt\", ios::in | ios::out | ios::ate);\n            long int pos;\n            obj3.seekg(0);\n            while (!obj3.eof()) {\n                pos = obj3.tellg();\n                obj3.read((char*)&amp;c, sizeof(Book));\n                if (c.code == y) {\n                    c.Modify();\n                    obj3.seekp(pos);\n                    obj3.write((char*)&amp;c, sizeof(Book));\n                    break;\n                }\n            }\n            cout &lt;&lt; \"\\nDATA MODIFIED\\n\";\n            break;\n        case 4:\n            char ch1 = 'n';\n            do {\n                Book d;\n                cout &lt;&lt; \"\\n Enter the book code \\t\";\n                int z;\n                cin &gt;&gt; z;\n                fstream obj4(\"BOOKS.txt\", ios::in | ios::out | ios::ate);\n                long int pos;\n                obj4.seekg(0);\n                int found = 0;\n                while (!obj4.eof()) {\n                    pos = obj4.tellg();\n                    obj4.read((char*)&amp;d, sizeof(Book));\n                    if (d.code == z) {\n                        found = 1;\n                        break;\n                    }\n                }\n                if (found == 0) {\n                    cout &lt;&lt; \"\\nIncorrect Code\\t Aborting\";\n                    break;\n                }\n                else {\n                    d.Display();\n                    cout &lt;&lt; \"\\nEnter Sales Quantity:\\t\";\n                    int q;\n                    cin &gt;&gt; q;\n                    if (q &gt; d.qty) {\n                        cout &lt;&lt; \"\\n Can't Sell. Aborting \";\n                        break;\n                    }\n                    else {\n                        Sale newsale;\n                        newsale = d.Sell(q);\n                        obj4.seekp(pos);\n                        obj4.write((char*)&amp;d, sizeof(Book));\n                        obj4.close();\n                        ofstream obj5(\"Sales.txt\", ios::app);\n                        obj5.write((char*)&amp;newsale, sizeof(newsale));\n                        obj5.close();\n                        cout &lt;&lt; \"\\nSALE SUCCESSFUL\\n\";\n                        sleep(2);\n                    }\n                }\n                cout &lt;&lt; \"\\n Add more sale? (y/n)\";\n                cin &gt;&gt; ch1;\n            } while (ch1 == 'y' || ch1 == 'Y');\n            break;\n        case 5:\n            cout &lt;&lt; \"\\nPlease enter SALE password:\";\n            char pass[40];\n            gets(pass);\n            if (strcmp(pass, \"creationbydhruvarora\\n\")) {\n                clrscr();\n                ifstream obj6(\"Sales.txt\");\n                obj6.seekg(0);\n                Sale readsale;\n                int net = 0;\n                while (!obj6.eof()) {\n                    obj6.read((char*)&amp;readsale, sizeof(Sale));\n                    net += readsale.netprice;\n                    Print(readsale);\n                    sleep(1);\n                }\n                cout &lt;&lt; \"\\n END OF SALES\\n TODAY NET SALE:\" &lt;&lt; net;\n                break;\n            }\n            else {\n                cout &lt;&lt; \"\\nIncorrect Password\\n ABORTING\";\n                break;\n            }\n        }\n        getch();\n        clrscr();\n        cout &lt;&lt; \"Press Any Key To QUIT. To Go To Main Menu Press 'n'\\n\";\n        ch = getch();\n    }\n}\n</code></pre>\n\n<p>I do not understand what this is. A piece of code added to some code is disrupting working w/o being executed.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1549469756, "post_id": 54557971, "comment_id": 95915674, "body": "Why limit them to only input capital letters?  Why not take both upper and lower case letters and then convert the input to all lower or all upper case?"}, {"owner": {"reputation": 15619, "user_id": 1548468, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0745dce203d52699e63a575b3103ad70?s=128&d=identicon&r=PG", "display_name": "Botje", "link": "https://stackoverflow.com/users/1548468/botje"}, "edited": false, "score": 3, "creation_date": 1549470191, "post_id": 54557971, "comment_id": 95915940, "body": "<code>teams[i]</code> cannot simultaneously be &lt;= &#39;A&#39; and &gt;= &#39;Z&#39;. The condition you want is <code>!(teams[i] &gt;= &#39;A&#39; &amp;&amp; teams[i] &lt;= &#39;Z&#39;)</code>, which you can simplify(if you want) to <code>(teams[i] &lt; &#39;A&#39; || teams[i] &gt; &#39;Z&#39;)</code>"}, {"owner": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 0, "creation_date": 1549470306, "post_id": 54557971, "comment_id": 95916020, "body": "Add a <code>while</code> loop that only exits when they enter good input.  Otherwise ask them again."}, {"owner": {"reputation": 703, "user_id": 9753452, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Michael Surette", "link": "https://stackoverflow.com/users/9753452/michael-surette"}, "edited": false, "score": 0, "creation_date": 1549470422, "post_id": 54557971, "comment_id": 95916097, "body": "Unrelated to your question but you don&#39;t need an array of strings. One is enough,"}, {"owner": {"reputation": 15619, "user_id": 1548468, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0745dce203d52699e63a575b3103ad70?s=128&d=identicon&r=PG", "display_name": "Botje", "link": "https://stackoverflow.com/users/1548468/botje"}, "reply_to_user": {"reputation": 12749, "user_id": 7976805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92a559df8b4b287aad23724b4c66d67c?s=128&d=identicon&r=PG&f=1", "display_name": "Yksisarvinen", "link": "https://stackoverflow.com/users/7976805/yksisarvinen"}, "edited": false, "score": 0, "creation_date": 1549470509, "post_id": 54557971, "comment_id": 95916149, "body": "@Yksisarvinen doh. stupid me."}, {"owner": {"reputation": 856, "user_id": 4250150, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh5.googleusercontent.com/-KLzePzmbqTs/AAAAAAAAAAI/AAAAAAAAAD8/henWhVuLqE4/photo.jpg?sz=128", "display_name": "sudo rm -rf slash", "link": "https://stackoverflow.com/users/4250150/sudo-rm-rf-slash"}, "edited": false, "score": 1, "creation_date": 1549474058, "post_id": 54557971, "comment_id": 95918091, "body": "Check out <a href=\"https://en.cppreference.com/w/cpp/string/byte/isupper\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/string/byte/isupper</a>"}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1549480233, "post_id": 54557971, "comment_id": 95920939, "body": "Don&#39;t hardcode that range test. It works for ASCII, but there&#39;s no need to limit yourself that way. The standard library has <code>std::isupper</code> for exactly this kind of test."}], "answers": [{"tags": [], "owner": {"reputation": 693, "user_id": 3662223, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ef0890f4d686f08217ccf1eac4c1a44?s=128&d=identicon&r=PG&f=1", "display_name": "Aumnayan", "link": "https://stackoverflow.com/users/3662223/aumnayan"}, "is_accepted": false, "score": 1, "last_activity_date": 1549470554, "creation_date": 1549470554, "answer_id": 54558293, "question_id": 54557971, "link": "https://stackoverflow.com/questions/54557971/how-do-i-only-accept-capital-letter-as-user-input/54558293#54558293", "title": "How do I only accept capital letter as user input?", "body": "<pre><code>string teams[100] = {};\n\nif (('A'&gt;= teams[i] &amp;&amp; 'Z'&lt;= teams[i] )){ //problem is in this line \n</code></pre>\n\n<p>The issue is how you are performing your comparison to a std::string data type. </p>\n\n<p>teams[i] could equal \"BaNANAS\", and you are comparing it to a single charecter. For the check you describe, you need to iterate through the entire string and check it for your criteria:</p>\n\n<pre><code>for (char &amp;c: teams[i]) {\n  if (c &lt; 'A' || c &gt; 'Z') {\n    // There is an error\n  }\n}\n// If it gets here with no error, the input matches your desired criteria\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "is_accepted": true, "score": 1, "last_activity_date": 1549480867, "last_edit_date": 1549480867, "creation_date": 1549480527, "answer_id": 54560985, "question_id": 54557971, "link": "https://stackoverflow.com/questions/54557971/how-do-i-only-accept-capital-letter-as-user-input/54560985#54560985", "title": "How do I only accept capital letter as user input?", "body": "<p>Beyond your apparent problem of the impossibility of the comparison being both <code>&lt;= 'A'</code> and <code>&gt;= 'Z'</code> at the same time, you have fundamental problems with the types you declare in your program.</p>\n\n<pre><code>    string teams[100] = {};\n</code></pre>\n\n<p>Declares an array of <strong>100 strings</strong>, not a single string of 100-characters. This should be readily apparent in the compiler errors, e.g.</p>\n\n<pre><code>strarr.cpp:15:17: error: no match for \u2018operator&gt;=\u2019 (operand types are \u2018char\u2019 \nand \u2018std::string {aka std::basic_string&lt;char&gt;}\u2019)\n        if (('A'&gt;= teams[i] &amp;&amp; 'Z'&lt;= teams[i] )){ //problem is in this line\n</code></pre>\n\n<p>If you did intend to have a maximum of 100-teams entered, (which by <code>\"teams\"</code> being plural would at least linguistically seem to be the case), then you need to change your comparison to compare the first-character in each string, with <code>teams[i][0]</code></p>\n\n<p>Further, you cannot use a <code>for</code> loop to automatically increment <code>removelast</code>. Why? What happens if it is not a captial letter? (answer: it is stored in <code>string[i]</code> and you increment <code>removelast</code> anyway). Instead, just use a simple <code>while</code> loop and an index as a counter and to protect your array bounds only increment the index if the team begins with an upper case letter, e.g. (using <code>ndx</code> for index, and using <code>isupper()</code> to check the case)</p>\n\n<pre><code>    while (ndx &lt; 100) {         /* loop until max index or done */\n        if (!(cin &gt;&gt; teams[ndx])) { /* always validate your input */\n            cerr &lt;&lt; \"input error or user canceled.\\n\";\n            break;\n        }\n        if (teams[ndx] == \"done\")   /* check exit condition */\n            break;\n        else if (isupper (teams[ndx][0])) { /* use isupper() */\n            ndx++;  /* only increment if condition satisfied */\n        }\n        else    /* handle not a captital */\n            cout &lt;&lt; \" error: letter must be capital\\n\";\n    }\n</code></pre>\n\n<p>Now it is unclear whether you want to force all letters to be capital letters or just the first letter. If you want all letters upper case, then you can simply include a flag and loop over all charactes entered setting the flag to <code>false</code> if not all characters are uppercase. For example, you could do:</p>\n\n<pre><code>    while (ndx &lt; 100) {         /* loop until max index or done */\n        bool allupper = true;   /* flag indicating all uppercase */\n        if (!(cin &gt;&gt; teams[ndx])) { /* always validate your input */\n            cerr &lt;&lt; \"input error or user canceled.\\n\";\n            break;\n        }\n        if (teams[ndx] == \"done\")   /* check exit condition */\n            break;\n\n        for (auto&amp; c : teams[ndx])  /* simple loop checking each char */\n            if (!isupper(c)  )      /* on failed test */\n                allupper = false;   /* set flag false */\n\n        if (allupper)   /* validate all uppercase characters */\n            ndx++;      /* only increment if condition satisfied */\n        else            /* handle not a captital */\n            cout &lt;&lt; \" error: letter must be capital\\n\";\n    }\n</code></pre>\n\n<p>Hopefully that addresses your issues. Note also, for counts, generally a <code>size_t</code> type is preferred over <code>int</code> (you wouldn't have a negative index). A working example of the code checking all characters for uppercase would be:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;cctype&gt;\n\nusing namespace std;\n\nint main (void) {\n\n    string teams[100] = {};\n    size_t ndx = 0;\n\n    cout &lt;&lt; \"please enter ONLY capital letters, (TYPE 'done' to exit)\\n\";\n\n    while (ndx &lt; 100) {         /* loop until max index or done */\n        bool allupper = true;   /* flag indicating all uppercase */\n        if (!(cin &gt;&gt; teams[ndx])) { /* always validate your input */\n            cerr &lt;&lt; \"input error or user canceled.\\n\";\n            break;\n        }\n        if (teams[ndx] == \"done\")   /* check exit condition */\n            break;\n\n        for (auto&amp; c : teams[ndx])  /* simple loop checking each char */\n            if (!isupper(c)  )      /* on failed test */\n                allupper = false;   /* set flag false */\n\n        if (allupper)   /* validate all uppercase characters */\n            ndx++;      /* only increment if condition satisfied */\n        else            /* handle not a captital */\n            cout &lt;&lt; \" error: letter must be capital\\n\";\n    }\n\n    cout &lt;&lt; \"this is the result you entered\\n\";\n    for (size_t m = 0; m &lt; ndx; m++) {\n        cout &lt;&lt; teams[m] &lt;&lt; '\\n';\n    }\n}\n</code></pre>\n\n<p>(<strong>note:</strong> while it is perfectly OK to use an array of <code>string</code>, you would generally want to use a container, such as a <code>vector</code> of <code>string</code>, e.g. <code>vector&lt;string&gt;</code> to let the container manage the number of strings you have as needed, and remove your responsibility for enforcing the array bounds)</p>\n\n<p><strong>Example Use/Output</strong></p>\n\n<pre><code>$ ./bin/strarr\nplease enter ONLY capital letters, (TYPE 'done' to exit)\nDOLPHINS\nSAINTS\nSTEELeRS\nerror: letter must be capital\nSTEELERS\nVIKINGS\ndone\nthis is the result you entered\nDOLPHINS\nSAINTS\nSTEELERS\nVIKINGS\n</code></pre>\n\n<p>For an example checking only the first character, just substitute in the first block of code above. Let me know if you have further questions.</p>\n"}, {"tags": [], "owner": {"reputation": 976, "user_id": 3565017, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8ca9b87bfc80f0428240ea6b8c0b5be?s=128&d=identicon&r=PG&f=1", "display_name": "L.C.", "link": "https://stackoverflow.com/users/3565017/l-c"}, "is_accepted": false, "score": 1, "last_activity_date": 1549480982, "creation_date": 1549480982, "answer_id": 54561106, "question_id": 54557971, "link": "https://stackoverflow.com/questions/54557971/how-do-i-only-accept-capital-letter-as-user-input/54561106#54561106", "title": "How do I only accept capital letter as user input?", "body": "<p>Reinventing the wheel is never a good solution. Take a look at this:</p>\n\n<p><a href=\"https://en.cppreference.com/w/cpp/string/byte/isupper\" rel=\"nofollow noreferrer\">https://en.cppreference.com/w/cpp/string/byte/isupper</a></p>\n\n<p>and yes, there's also the problem you're using 100 strings.</p>\n"}], "owner": {"reputation": 31, "user_id": 10964991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC1Ng.gif?s=128&g=1", "display_name": "Jackie", "link": "https://stackoverflow.com/users/10964991/jackie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1398, "favorite_count": 0, "accepted_answer_id": 54560985, "answer_count": 3, "score": 2, "last_activity_date": 1549480982, "creation_date": 1549469678, "question_id": 54557971, "link": "https://stackoverflow.com/questions/54557971/how-do-i-only-accept-capital-letter-as-user-input", "title": "How do I only accept capital letter as user input?", "body": "<p>so i am trying to ask the user for only capital letters and if they put in lower case letters or any other symbols or numbers i want to ask them for a new input. I am trying ASCII but i think im doing it wrong? please help me</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n\nusing namespace std;\n\n\n\nint main (){\n  string teams[100] = {};\n  int removeLast=0;\n  cout &lt;&lt; \"please enter ONLY capital letters, (TYPE 'done' to exit)\\n\";\n  for (int i=0;i&lt;100;i++){\n    cin&gt;&gt; teams[i];\n    if (('A'&gt;= teams[i] &amp;&amp; 'Z'&lt;= teams[i] )){ //problem is in this line \n      cout &lt;&lt; \"letter must be capital\\n\";\n      continue;\n    }\n    removeLast++;\n    if (teams[i] == \"done\") break;\n  }\n  cout &lt;&lt; \"this is the result you entered\\n\";\n  for (int m = 0; m &lt; removeLast-1;m++ ){\n    cout &lt;&lt; teams[m];\n  }\n\n\n\n\n}\n</code></pre>\n"}, {"tags": ["c++", "namespaces"], "answers": [{"tags": [], "owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "is_accepted": true, "score": 2, "last_activity_date": 1549483456, "last_edit_date": 1549483456, "creation_date": 1549469797, "answer_id": 54558007, "question_id": 54557954, "link": "https://stackoverflow.com/questions/54557954/c-forward-namespace-declaration-in-parameter/54558007#54558007", "title": "c++ forward namespace declaration in parameter", "body": "<p>This syntax is not valid since <code>PixelViewer</code> could be both a namespace or a class name. So the syntax is disallowed:</p>\n\n<pre><code>class PixelViewer::FBO; // disallowed\n</code></pre>\n\n<p>Instead, just add the forward declaration in the corresponding namespace:</p>\n\n<pre><code>namespace PixelViewer {\n    class FBO;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "is_accepted": false, "score": 1, "last_activity_date": 1549469800, "creation_date": 1549469800, "answer_id": 54558010, "question_id": 54557954, "link": "https://stackoverflow.com/questions/54557954/c-forward-namespace-declaration-in-parameter/54558010#54558010", "title": "c++ forward namespace declaration in parameter", "body": "<p>Yes, you have to do a forward declare in the namespace:</p>\n\n<pre><code>namespace PixelViewer\n{\n    class FBO;\n}\n</code></pre>\n\n<p>Remember that it could be a namespace, a class or a struct, so the compiler must know which one it's supposed to use internally.</p>\n"}], "owner": {"reputation": 189, "user_id": 2926059, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/6nRzs.png?s=128&g=1", "display_name": "Camilo", "link": "https://stackoverflow.com/users/2926059/camilo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "accepted_answer_id": 54558007, "answer_count": 2, "score": 1, "last_activity_date": 1549483456, "creation_date": 1549469616, "question_id": 54557954, "link": "https://stackoverflow.com/questions/54557954/c-forward-namespace-declaration-in-parameter", "title": "c++ forward namespace declaration in parameter", "body": "<p>I got a class declared within a namespace:</p>\n\n<pre><code>namespace PixelViewer\n{\n  class FBO\n  { ... }\n}\n</code></pre>\n\n<p>and I want to use it as parameter in another class method as follows:</p>\n\n<p>Model.h</p>\n\n<pre><code>class ShaderProgram;\nclass PixelViewer::FBO;\n\nclass Model\n{\n void Model::render(ShaderProgram&amp; shaderProgram, PixelViewer::FBO&amp; fbo)\n}\n</code></pre>\n\n<p>Model.cxx</p>\n\n<pre><code>#include \"../FBO.h\"\n#include \"../ShaderProgram/ShaderProgram.h\"\n\nvoid Model::render(ShaderProgram&amp; shaderProgram, PixelViewer::FBO&amp; fbo)\n</code></pre>\n\n<p>However, I'm getting the folllowing errors:</p>\n\n<pre><code>'PixelViewer' is not a class or namespace name\n\n'FBO' uses undefined class PixelViewer\n\nuse of undefined type 'PixelViewer'\n</code></pre>\n\n<p>Any ideas on what I am missing?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["c++", "error-handling"], "comments": [{"owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 2, "creation_date": 1549469762, "post_id": 54557943, "comment_id": 95915676, "body": "Welcome to SO. That&#39;s a long description. You should summarize like <i>the program should do this but it is doing this</i>. Visit the <a href=\"https://stackoverflow.com/help\">help center</a> and read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 2, "creation_date": 1549469844, "post_id": 54557943, "comment_id": 95915730, "body": "Please dont just dump the assignment and your code. Instead try to explain what is the specific problem and what you tried to solve it, also it helps to include a question in the question ;)"}], "owner": {"reputation": 37, "user_id": 11022256, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-dhTijQX7-6M/AAAAAAAAAAI/AAAAAAAAAaU/cx5XVplMuhk/photo.jpg?sz=128", "display_name": "Siddharth Sen", "link": "https://stackoverflow.com/users/11022256/siddharth-sen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 76, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1549469983, "creation_date": 1549469574, "last_edit_date": 1549469983, "question_id": 54557943, "link": "https://stackoverflow.com/questions/54557943/given-code-is-not-working-for-given-problem", "title": "Given code is not working for given problem", "body": "<p><strong>I do not have the cases which the site is checking, it only provides a example given below.</strong></p>\n\n<p><strong>Input</strong>\nThe first line of the input contains a single integer T denoting the number of test cases. The description of T test cases follows.\nThe first line of each test case contains a single integer N.\nThe second line contains N space-separated integers a1,a2,\u2026,aN.\nThe third line contains N space-separated integers d1,d2,\u2026,dN.</p>\n\n<p><strong>Output</strong>\nFor each test case, print a single line containing one integer \u2015 the best defense value of the shield the king gets, or \u22121 if Chef can be thrown in the snake pit.</p>\n\n<p><strong>Constraints</strong>\n1\u2264T\u2264100\n3\u2264N\u2264100\n1\u2264ai,di\u2264104 for each valid i</p>\n\n<p><strong>Example Input</strong></p>\n\n<pre><code>2\n4\n1 1 4 1\n3 4 2 1\n7\n5 4 5 4 5 4 5\n3 2 4 7 2 5 9\n</code></pre>\n\n<p><strong>Example Output</strong></p>\n\n<pre><code>3\n-1\n</code></pre>\n\n<p><strong>Explanation</strong></p>\n\n<p><strong>Example case 1:</strong> Soldier 1 can be attacked by soldier 2 and/or soldier 4. If only soldier 2 attacks him, the power of the attack is 1. If only soldier 4 attacks him, the power of the attack is 1 again. If they attack together, the power of the attack is 2. In each of these cases, soldier 1 will live.</p>\n\n<p>Soldier 2 can be attacked by soldier 3, with attack power 4. His shield has defense value 4, which is not enough, so in this case, soldier 2 would die. The best safe choice is soldier 1, with defense value 3.</p>\n\n<p><strong>Example case 2:</strong> No soldier is guaranteed to survive the battle, so the answer is \u22121.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;bits/stdc++.h&gt;\nusing namespace std;\nint main() {\n    int T;\n    cin&gt;&gt;T;\n    if(T &gt; 100 || T&lt;1) return 0;\n\n    do{\n        vector&lt;long int&gt; ans;\n        int N;\n        cin&gt;&gt;N;\n        if(N &gt; 100 || N&lt;3) return 0;\n        vector&lt;int&gt; attackArray(N), defArray(N);\n\n        for (int i =0; i&lt;N; i++) {\n            cin&gt;&gt;attackArray.at(i);\n        }\n        for (int i =0; i&lt;N; i++) {\n            cin&gt;&gt;defArray.at(i);\n        }\n        if (defArray.at(0) &gt; attackArray.at(1) &amp;&amp; \n    defArray.at(0) &gt; attackArray.at(N-1) &amp;&amp; \n    defArray.at(0)&gt; attackArray.at(1) + attackArray.at(N-1)){\n\n        ans.push_back(defArray.at(0));\n\n    }\n    if (defArray.at(N-1) &gt; attackArray.at(0) &amp;&amp; \n    defArray.at(N-1) &gt; attackArray.at(N-2) &amp;&amp; \n    defArray.at(N-1)&gt; attackArray.at(0) + attackArray.at(N-2)){\n\n        ans.push_back(defArray.at(N-1));\n\n    }\n\n\n        for (int i =1; i&lt;N-1; i++) {\n   int nexti, previ;\n\n    nexti = i + 1;\n    previ = i - 1;\n\nif (defArray.at(i) &gt; attackArray.at(nexti) &amp;&amp; \n    defArray.at(i) &gt; attackArray.at(previ) &amp;&amp; \n    defArray.at(i)&gt; attackArray.at(nexti) + attackArray.at(previ)){\n\n        ans.push_back(defArray.at(i));\n\n    }\nelse {ans.push_back(-1); break;}\n\n}\n\n        sort(ans.begin(), ans.end(), greater&lt;int&gt;());\n        cout&lt;&lt;ans[0]&lt;&lt;endl;\n\n        T--;\n    }while (T !=0);\n\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "multithreading", "c++17"], "comments": [{"owner": {"reputation": 4654, "user_id": 332733, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BR7yE.jpg?s=128&g=1", "display_name": "Mgetz", "link": "https://stackoverflow.com/users/332733/mgetz"}, "edited": false, "score": 0, "creation_date": 1549469612, "post_id": 54557611, "comment_id": 95915609, "body": "atomic is c++11, and all you want is <a href=\"https://en.cppreference.com/w/cpp/atomic/atomic_exchange\" rel=\"nofollow noreferrer\">atomic exchange</a>"}, {"owner": {"reputation": 3444, "user_id": 531116, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/cc7ddd2dac7ecfefe2e25b68cc59f13f?s=128&d=identicon&r=PG", "display_name": "Dean Chen", "link": "https://stackoverflow.com/users/531116/dean-chen"}, "reply_to_user": {"reputation": 4654, "user_id": 332733, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BR7yE.jpg?s=128&g=1", "display_name": "Mgetz", "link": "https://stackoverflow.com/users/332733/mgetz"}, "edited": false, "score": 0, "creation_date": 1549470528, "post_id": 54557611, "comment_id": 95916160, "body": "@Mgetz thanks, could you give me an example for exchanging two pointers."}, {"owner": {"reputation": 1686, "user_id": 2615118, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6c15506113bb2e6d1ebf17502d71a1c?s=128&d=identicon&r=PG", "display_name": "Julius", "link": "https://stackoverflow.com/users/2615118/julius"}, "edited": false, "score": 0, "creation_date": 1549477032, "post_id": 54557611, "comment_id": 95919417, "body": "Just some words of warning: An atomic update of a <i>single</i> pointer can easily be achieved by using <code>std::atomic&lt;Map*&gt;</code>. <i>Two</i> pointers can be swapped atomically by using <code>std::atomic&lt;user_defined_pod_struct_of_the_two_pointers&gt;</code> (<code>std::pair&lt;Map*, Map*&gt;</code> does not work). <b>However</b>, depending on your exact use-case <b>you may need an additional synchronization mechanism</b>: Other threads may continue to use the old hash map (now pointed-to by <code>pB</code>) even after the atomic update of <code>pA</code> from the &quot;writer thread&quot;. This can yield a race condition if you plan to subsequently update the hash map <code>*pB</code>."}, {"owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "edited": false, "score": 0, "creation_date": 1549495552, "post_id": 54557611, "comment_id": 95927065, "body": "I am reopening because this solution is wait-free, whereas <a href=\"https://stackoverflow.com/questions/29512112/want-an-efficient-way-to-swap-two-pointers-in-c\">marked duplicate</a> provides a lock-free solution."}], "answers": [{"comments": [{"owner": {"reputation": 4654, "user_id": 332733, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BR7yE.jpg?s=128&g=1", "display_name": "Mgetz", "link": "https://stackoverflow.com/users/332733/mgetz"}, "edited": false, "score": 0, "creation_date": 1549474662, "post_id": 54558379, "comment_id": 95918360, "body": "The standard has <a href=\"https://en.cppreference.com/w/cpp/atomic/atomic_exchange\" rel=\"nofollow noreferrer\">appropriate methods</a> of doing pointer exchanges without resorting to third party libraries or non-portable assembly."}, {"owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "reply_to_user": {"reputation": 4654, "user_id": 332733, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BR7yE.jpg?s=128&g=1", "display_name": "Mgetz", "link": "https://stackoverflow.com/users/332733/mgetz"}, "edited": false, "score": 0, "creation_date": 1549477230, "post_id": 54558379, "comment_id": 95919508, "body": "@Mgetz You do not understand how <a href=\"https://en.cppreference.com/w/cpp/atomic/atomic_exchange\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/atomic/atomic_exchange</a> works, I am afraid."}], "tags": [], "owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "is_accepted": false, "score": 1, "last_activity_date": 1549471907, "last_edit_date": 1549471907, "creation_date": 1549470842, "answer_id": 54558379, "question_id": 54557611, "link": "https://stackoverflow.com/questions/54557611/how-to-swap-two-pointers-in-multi-threaded-c-17-program/54558379#54558379", "title": "How to swap two pointers in multi-threaded c++ 17 program?", "body": "<p>On x86-64 you can atomically exchange 2 pointers only if they are adjacent in memory and aligned to 16 bytes with <code>cmpxchg16b</code> instruction directly or by using <code>libatomic_ops</code>:</p>\n\n<pre><code>AO_INLINE int\nAO_compare_double_and_swap_double_full(volatile AO_double_t *addr,\n                                       AO_t old_val1, AO_t old_val2,\n                                       AO_t new_val1, AO_t new_val2)\n{\n  char result;\n  __asm__ __volatile__(\"lock; cmpxchg16b %0; setz %1\"\n                      : \"=m\"(*addr), \"=a\"(result)\n                      : \"m\"(*addr), \"d\" (old_val2), \"a\" (old_val1),\n                        \"c\" (new_val2), \"b\" (new_val1)\n                      : \"memory\");\n  return (int) result;\n}\n</code></pre>\n\n<p>If <code>cmpxchg16b</code> is unavailable you need to use a mutex to make exchanging 2 pointers atomic.</p>\n"}, {"comments": [{"owner": {"reputation": 3444, "user_id": 531116, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/cc7ddd2dac7ecfefe2e25b68cc59f13f?s=128&d=identicon&r=PG", "display_name": "Dean Chen", "link": "https://stackoverflow.com/users/531116/dean-chen"}, "edited": false, "score": 0, "creation_date": 1549508010, "post_id": 54561350, "comment_id": 95929756, "body": "A few comments on the code will be better for new people. Thanks."}, {"owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "reply_to_user": {"reputation": 3444, "user_id": 531116, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/cc7ddd2dac7ecfefe2e25b68cc59f13f?s=128&d=identicon&r=PG", "display_name": "Dean Chen", "link": "https://stackoverflow.com/users/531116/dean-chen"}, "edited": false, "score": 0, "creation_date": 1549553698, "post_id": 54561350, "comment_id": 95951269, "body": "@DeanChen It is based on the idea of exchanging 2 integers using xor: <code>void exchange(uintptr_t&amp; a, uintptr_t&amp; b) { a ^= b; b ^= a; a ^= b; }</code>."}, {"owner": {"reputation": 672, "user_id": 1442880, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/d2a97fcba555c029723d7c353345a974?s=128&d=identicon&r=PG", "display_name": "Kobi", "link": "https://stackoverflow.com/users/1442880/kobi"}, "edited": false, "score": 0, "creation_date": 1612207422, "post_id": 54561350, "comment_id": 116689632, "body": "question @MaximEgorushkin - this works fine but wouldn&#39;t the data that we are pointing to still need some locking?"}], "tags": [], "owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "is_accepted": true, "score": 9, "last_activity_date": 1551446621, "last_edit_date": 1551446621, "creation_date": 1549482053, "answer_id": 54561350, "question_id": 54557611, "link": "https://stackoverflow.com/questions/54557611/how-to-swap-two-pointers-in-multi-threaded-c-17-program/54561350#54561350", "title": "How to swap two pointers in multi-threaded c++ 17 program?", "body": "<p>Atomic wait-free exchange of 2 pointers can be implemented in the following manner:</p>\n\n<pre><code>#include &lt;atomic&gt;\n#include &lt;cstdint&gt;\n#include &lt;cassert&gt;\n\ntemplate&lt;class T&gt;\nclass Pointers2 {\n    uintptr_t const ab_;\n    std::atomic&lt;uintptr_t&gt; a_;\n\npublic:\n    Pointers2(T* a, T* b)\n        : ab_(reinterpret_cast&lt;uintptr_t&gt;(a) ^ reinterpret_cast&lt;uintptr_t&gt;(b))\n        , a_(reinterpret_cast&lt;uintptr_t&gt;(a))\n    {}\n\n    T* a() const { return reinterpret_cast&lt;T*&gt;(a_.load(std::memory_order_acquire)); }\n    T* b() const { return reinterpret_cast&lt;T*&gt;(a_.load(std::memory_order_acquire) ^ ab_); }\n    void exchange() { a_.fetch_xor(ab_, std::memory_order_release); }\n};\n\nint main() {\n    int a = 1, b = 2;\n    Pointers2&lt;int&gt; p2(&amp;a, &amp;b);\n    assert(p2.a() == &amp;a);\n    assert(p2.b() == &amp;b);\n    p2.exchange();\n    assert(p2.a() == &amp;b);\n    assert(p2.b() == &amp;a);\n    p2.exchange();\n    assert(p2.a() == &amp;a);\n    assert(p2.b() == &amp;b);\n}\n</code></pre>\n\n<p>Acquire/release memory ordering is required to make sure that writes to shared data <code>T</code> do not get reordered past <code>exchange</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 722, "user_id": 485180, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460962516e0e4211f449a2d1bb693d1b?s=128&d=identicon&r=PG", "display_name": "jnr", "link": "https://stackoverflow.com/users/485180/jnr"}, "is_accepted": false, "score": 0, "last_activity_date": 1549484256, "creation_date": 1549484256, "answer_id": 54561876, "question_id": 54557611, "link": "https://stackoverflow.com/questions/54557611/how-to-swap-two-pointers-in-multi-threaded-c-17-program/54561876#54561876", "title": "How to swap two pointers in multi-threaded c++ 17 program?", "body": "<p>Maybe it's not just swap that should be atomic, but transaction should include check that swap should be made (is_the_hash_map_pointed_by_pB_updated_completely()).\nProbably hash maps should be protected from concurrent usage with mutex.</p>\n"}], "owner": {"reputation": 3444, "user_id": 531116, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/cc7ddd2dac7ecfefe2e25b68cc59f13f?s=128&d=identicon&r=PG", "display_name": "Dean Chen", "link": "https://stackoverflow.com/users/531116/dean-chen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 812, "favorite_count": 4, "accepted_answer_id": 54561350, "answer_count": 3, "score": 2, "last_activity_date": 1551446621, "creation_date": 1549468428, "last_edit_date": 1549472017, "question_id": 54557611, "link": "https://stackoverflow.com/questions/54557611/how-to-swap-two-pointers-in-multi-threaded-c-17-program", "title": "How to swap two pointers in multi-threaded c++ 17 program?", "body": "<p>I have two pointers: pA and pB. They points to two big hash map objects.\nwhen the hash map pointed by pB is updated completely, I want to swap pB and pA.</p>\n\n<p>In C++ 17, how to swap them fast and thread safe? Atomic? I am new to c++ 17.</p>\n"}, {"tags": ["c++", "bash", "qt", "shell", "qprocess"], "answers": [{"tags": [], "owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "is_accepted": false, "score": 1, "last_activity_date": 1549570156, "last_edit_date": 1549570156, "creation_date": 1549558287, "answer_id": 54578375, "question_id": 54557411, "link": "https://stackoverflow.com/questions/54557411/use-qprocess-to-send-endoftext-ctrl-c-to-interactive-shell/54578375#54578375", "title": "Use QProcess to send EndOfText (Ctrl-C) to interactive shell", "body": "<p>A shell never sees <code>Ctrl-C</code>. It is interpreted by the (pseudo)-terminal, and converted to <a href=\"https://unix.stackexchange.com/a/362566/19870\"><code>SIGINT</code></a>, that is then acted on.</p>\n\n<p>Locally, start the program in a sub-shell that reports its pid, and then use that PID to kill it directly.</p>\n\n<pre><code>#include &lt;QtCore&gt;\n#include &lt;signal.h&gt;\n#include &lt;cstdio&gt;\n\nint getPID(const QByteArray &amp;line) {\n   int pid = 0;\n   char c1, c2;\n   if (sscanf(line.data(), \"@@@%d@@%c%c\", &amp;pid, &amp;c1, &amp;c2) == 3)\n      if (c1 == '@' &amp;&amp; (c2 == '\\r' || c2 == '\\n')) return pid;\n   return 0;\n}\n\nint main(int argc, char *argv[]) {\n   auto input = QByteArray(\n                    \"echo _kill_me_now_ &gt; log\\n\"\n                    \"/bin/sh -c 'echo @@@$$@@@&gt;&amp;2; exec tail -f log'\\n\"\n                    \"echo done\\n\"\n                    \"exit\\n\")\n                    .split('\\n');\n   // tail -f will block\n\n   QCoreApplication app(argc, argv);\n   QProcess process;\n   int pid = 0;\n\n   auto const writeInputLine = [&amp;] {\n      if (input.isEmpty()) return;\n      auto const line = input.takeFirst();\n      puts(line.data());\n      fflush(stdout);\n      process.write(line);\n      process.write(\"\\n\");\n   };\n\n   process.setProcessChannelMode(QProcess::SeparateChannels);\n   QObject::connect(&amp;process, &amp;QProcess::stateChanged, [](auto state) {\n      auto static const meta = QMetaEnum::fromType&lt;QProcess::ProcessState&gt;();\n      fprintf(stderr, \"State=%s\\n\", meta.key(state));\n      fflush(stderr);\n      if (state == QProcess::NotRunning) QCoreApplication::quit();\n   });\n   QObject::connect(&amp;process, &amp;QProcess::readyReadStandardError, [&amp;] {\n      auto const data = process.readAllStandardError();\n      if (auto p = getPID(data)) pid = p; // we could suppress pid output here\n      fputs(data.data(), stdout);\n      fflush(stdout);\n      if (data.endsWith(\"$ \")) writeInputLine();\n   });\n   QObject::connect(&amp;process, &amp;QProcess::readyReadStandardOutput, [&amp;] {\n      while (process.canReadLine()) {\n         auto const line = process.readLine();\n         fputs(line.data(), stdout);\n         if (line.startsWith(\"_kill_me_now_\") &amp;&amp; pid) {\n            kill(pid, SIGTERM);\n            pid = 0;\n         }\n      }\n      fflush(stdout);\n   });\n\n   process.start(\"/bin/sh\", {\"--noediting\", \"-i\"});\n   return app.exec();\n}\n</code></pre>\n\n<p>With ssh, since you need to forward a signal to the remote process, and thus you need a <em>remote</em> controlling terminal (<code>ssh -t</code>). And for <strong>that</strong> you <strong>will</strong> be sending a <code>Ctrl-C</code>, that the remote terminal will reinterpret as a proper signal.</p>\n"}], "owner": {"reputation": 642, "user_id": 2628569, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c15caa9704eb9d2ad64bf0d257cf9583?s=128&d=identicon&r=PG&f=1", "display_name": "pentix", "link": "https://stackoverflow.com/users/2628569/pentix"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 845, "favorite_count": 2, "answer_count": 1, "score": 2, "last_activity_date": 1549570156, "creation_date": 1549467872, "last_edit_date": 1549558314, "question_id": 54557411, "link": "https://stackoverflow.com/questions/54557411/use-qprocess-to-send-endoftext-ctrl-c-to-interactive-shell", "title": "Use QProcess to send EndOfText (Ctrl-C) to interactive shell", "body": "<p>I use a <strong>QProcess</strong> to open <code>/bin/sh</code> or <code>/usr/bin/bash</code> and it's possible to write commands to the shell and read the output into my program.</p>\n\n<p>The actual problem occurs when trying to send a end-of-text control signal to the shell to abort the running child process of the shell.</p>\n\n<p>What I tried:</p>\n\n<ul>\n<li>The shell gets started in <code>-i</code>nteractive mode</li>\n<li>I use the shell-builtin <code>set -m</code> command to enable job control</li>\n<li>For debugging purposes I read out the <code>$-</code> variable, it seems to be <code>himBHs</code></li>\n<li>Sending arbitrary commands usually works (e.g. <code>ls</code>)</li>\n<li>Sending <code>\\x04</code> (end-of-transmission, Ctrl+D) works and kills the shell.</li>\n</ul>\n\n<p>How could I appropriately kill the running process, without opening the shell again?</p>\n\n<pre><code>QProcess process;\nprocess.start(\"/bin/sh\", QStringList() &lt;&lt; \"-i\");\nprocess.write(\"set -m\\necho $-\\n\");                 // returns himBHs\nprocess.waitForBytesWritten();\n\n// start a running program here (E.g. tail -f logfile)\nprocess.write(\"tail -f logfile\\n\");\n\nprocess.write(\"\\x03\");\nprocess.write(\"newcommand\\n\");\nprocess.waitForBytesWritten();\n</code></pre>\n\n<p>Running the first command inside the shell returns output on stdout, but I don' t receive anything anymore after sending the ETX and the next command, although the shell is still running (<code>process.state() == QProcess::Running</code>)</p>\n\n<ol>\n<li>Is there a better way to send control signals or to communicate with the child's child process? </li>\n<li>What could I possibly do to start a new program inside the shell without reopening the shell again? (The reason I'm asking this is because the program is probably going to use ssh as the shell and I want it to avoid re-initiating a entirely new connection for a minor program/argument change) </li>\n</ol>\n"}, {"tags": ["c++", "lambda", "function-pointers"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 4, "creation_date": 1549467910, "post_id": 54557369, "comment_id": 95914473, "body": "Just don&#39;t use a typedef : <code>char(*x)(unsigned) = y;</code>. Though I don&#39;t see why this is desirable. This is the same as using <code>typedef int type; type x = y;</code> and asking how to achieve that definition in a single line."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1549467975, "post_id": 54557369, "comment_id": 95914534, "body": "Type alias (<code>using</code>) make for cleaner function pointer type names : <code>using FP = char(*)(unsigned);</code>."}, {"owner": {"reputation": 1755, "user_id": 5986881, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/7a607dd49a0116e3ba869a66d6fd1ba0?s=128&d=identicon&r=PG", "display_name": "Samer Tufail", "link": "https://stackoverflow.com/users/5986881/samer-tufail"}, "edited": false, "score": 0, "creation_date": 1549468061, "post_id": 54557369, "comment_id": 95914609, "body": "why not use <code>std::function</code> ?"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1549469174, "post_id": 54557369, "comment_id": 95915342, "body": "do you really want to merge the typedef and the variable declaration in one line as Francois interpreted the question?"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1549469241, "post_id": 54557369, "comment_id": 95915392, "body": "...that would explain lots of confusion"}, {"owner": {"reputation": 6673, "user_id": 777689, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/19JOo.jpg?s=128&g=1", "display_name": "PeterT", "link": "https://stackoverflow.com/users/777689/petert"}, "edited": false, "score": 0, "creation_date": 1549472754, "post_id": 54557369, "comment_id": 95917396, "body": "Since you&#39;re asking about <code>int x = 21</code>, then <code>21</code> is an integer literal. There&#39;s no such thing as a &quot;function literal&quot;, so when you do <code>func_t x = y;</code> then there&#39;s no type of literal that you can use for <code>y</code> (except for lambdas in certain cases)"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "reply_to_user": {"reputation": 6673, "user_id": 777689, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/19JOo.jpg?s=128&g=1", "display_name": "PeterT", "link": "https://stackoverflow.com/users/777689/petert"}, "edited": false, "score": 0, "creation_date": 1549491392, "post_id": 54557369, "comment_id": 95925687, "body": "@PeterT for what certain cases there is a literal for lambdas ?"}, {"owner": {"reputation": 6673, "user_id": 777689, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/19JOo.jpg?s=128&g=1", "display_name": "PeterT", "link": "https://stackoverflow.com/users/777689/petert"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1549491678, "post_id": 54557369, "comment_id": 95925794, "body": "@user463035818 sorry I misspoke, I meant you can coerce lambdas that have an empty capture list to evaluate to a function pointer. They&#39;re not a function literal of course. <a href=\"https://stackoverflow.com/questions/28746744/passing-capturing-lambda-as-function-pointer\">Answers to this, should cover the details</a>"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 5, "creation_date": 1553784501, "post_id": 54557369, "comment_id": 97521519, "body": "You could always stick with <code>auto x = &amp;the_function;&#39;</code>."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 1, "creation_date": 1553784539, "post_id": 54557369, "comment_id": 97521561, "body": "The name of a function pointer variable appears between the return type and the arguments It won&#39;t look like <code>type name = value;</code>."}, {"owner": {"reputation": 1615, "user_id": 10362622, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54067bb99c90afda4a7ac844255dc6b5?s=128&d=identicon&r=PG&f=1", "display_name": "dave", "link": "https://stackoverflow.com/users/10362622/dave"}, "edited": false, "score": 0, "creation_date": 1553784542, "post_id": 54557369, "comment_id": 97521563, "body": "You&#39;re missing the <code>&amp;</code> before <code>whatever</code>. <code>FP x = &amp;whatever ;</code>"}, {"owner": {"reputation": 3596, "user_id": 1753435, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b81cf3b8c8432e0bcac7322120a09b56?s=128&d=identicon&r=PG", "display_name": "andreee", "link": "https://stackoverflow.com/users/1753435/andreee"}, "reply_to_user": {"reputation": 1615, "user_id": 10362622, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54067bb99c90afda4a7ac844255dc6b5?s=128&d=identicon&r=PG&f=1", "display_name": "dave", "link": "https://stackoverflow.com/users/10362622/dave"}, "edited": false, "score": 1, "creation_date": 1553784753, "post_id": 54557369, "comment_id": 97521737, "body": "@dave: That&#39;s the same for functions, you don&#39;t need the ampersand. @emma: Why should that not be possible in C++? This should work fine (except for the <code>(char)</code>, which should be <code>char</code> in your <code>typedef</code>)"}], "answers": [{"tags": [], "owner": {"reputation": 42880, "user_id": 982161, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/kutcC.png?s=128&g=1", "display_name": "\u03a6Xoc\u0119 \uc6c3 \u041fepe&#250;pa \u30c4", "link": "https://stackoverflow.com/users/982161/%ce%a6xoc%c4%99-%ec%9b%83-%d0%9fepe%c3%bapa-%e3%83%84"}, "is_accepted": false, "score": 6, "last_activity_date": 1549468022, "creation_date": 1549468022, "answer_id": 54557464, "question_id": 54557369, "link": "https://stackoverflow.com/questions/54557369/declare-and-define-function-pointer-variable-in-one-line/54557464#54557464", "title": "declare and define function pointer variable in one line", "body": "<p>It is almost the same as Lambdas, but hard to read i think:</p>\n\n<pre><code>void my_int_func(int x)\n{\n    std::cout &lt;&lt; \"ther param is: \" &lt;&lt; x &lt;&lt; std::endl;\n}\n\n//\nint main(int argc, char *argv[])\n{\n    void (*foo)(int) = my_int_func;\n    foo(1);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1549469043, "post_id": 54557757, "comment_id": 95915273, "body": "btw I still dont understand why you think it would not be possible and imho you should have included a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> together with the error message in the question, though i didnt want to start the same discussion ;)"}, {"owner": {"reputation": 659, "user_id": 10870835, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IlVhK.png?s=128&g=1", "display_name": "Chef Gladiator", "link": "https://stackoverflow.com/users/10870835/chef-gladiator"}, "edited": false, "score": 0, "creation_date": 1549517141, "post_id": 54557757, "comment_id": 95931769, "body": "thanks for your efforts, but this is not an answer, please see my answer. Also max66 has a bit more elegant variant of this, please see his answer too."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "reply_to_user": {"reputation": 659, "user_id": 10870835, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IlVhK.png?s=128&g=1", "display_name": "Chef Gladiator", "link": "https://stackoverflow.com/users/10870835/chef-gladiator"}, "edited": false, "score": 0, "creation_date": 1549534833, "post_id": 54557757, "comment_id": 95939799, "body": "@ChefGladiator &quot;this is not an answer&quot; ?!? I was asking for clarification several times without success, if I was mean I could reply: &quot;This is not a clear question&quot;, anyhow you found what you were looking for so everything seems to be fine..."}], "tags": [], "owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "is_accepted": false, "score": 4, "last_activity_date": 1549468935, "creation_date": 1549468935, "answer_id": 54557757, "question_id": 54557369, "link": "https://stackoverflow.com/questions/54557369/declare-and-define-function-pointer-variable-in-one-line/54557757#54557757", "title": "declare and define function pointer variable in one line", "body": "<blockquote>\n  <p>But I do not know how to do this without lambda. Any ideas?</p>\n</blockquote>\n\n<p>Just dont use a lambda but a function:</p>\n\n<pre><code>typedef char(*FP)(unsigned);   \n\nchar foo(unsigned){ return 0;}\n\nint main() {\n    FP x = foo;\n}\n</code></pre>\n\n<p>Function pointer typedefs are rather nasty, if you can better use <code>using</code>:</p>\n\n<pre><code>using FP = char(*)(unsigned);\n</code></pre>\n\n<p><a href=\"https://wandbox.org/permlink/a6J1CJKrZgKndAog\" rel=\"nofollow noreferrer\">Live Demo</a></p>\n"}, {"comments": [{"owner": {"reputation": 659, "user_id": 10870835, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IlVhK.png?s=128&g=1", "display_name": "Chef Gladiator", "link": "https://stackoverflow.com/users/10870835/chef-gladiator"}, "edited": false, "score": 0, "creation_date": 1549490269, "post_id": 54559992, "comment_id": 95925267, "body": "Almost right, clever and simple .. but this is a two-liner :)"}, {"owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "reply_to_user": {"reputation": 659, "user_id": 10870835, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IlVhK.png?s=128&g=1", "display_name": "Chef Gladiator", "link": "https://stackoverflow.com/users/10870835/chef-gladiator"}, "edited": false, "score": 0, "creation_date": 1549562229, "post_id": 54559992, "comment_id": 95956230, "body": "@ChefGladiator - sorry: I&#39;ve misunderstood your question; no, I don&#39;t think it&#39;s possible define a function and, in the same statement, save it in a function-pointer variable without using a lambda (your solution is in a line but, in that sense, you can write a lot of programs in one line). For lambda... I&#39;ve edited your edit to show how obtain a function pointer using lambda and <code>auto</code>."}], "tags": [], "owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "is_accepted": false, "score": 2, "last_activity_date": 1549561986, "last_edit_date": 1549561986, "creation_date": 1549476605, "answer_id": 54559992, "question_id": 54557369, "link": "https://stackoverflow.com/questions/54557369/declare-and-define-function-pointer-variable-in-one-line/54559992#54559992", "title": "declare and define function pointer variable in one line", "body": "<p>Well... if you're using lambdas, you can also use <code>auto</code>, so</p>\n\n<pre><code>auto x = foo;\n</code></pre>\n\n<p>The following is a full compiling example with a <code>static_assert()</code> that verify the obtained type</p>\n\n<pre><code>#include &lt;type_traits&gt;\n\nchar foo (unsigned)\n { return ' '; }\n\nint main ()\n {\n   auto x = foo;\n\n   static_assert( std::is_same&lt;decltype(x), char(*)(unsigned)&gt;::value, \"!\" );\n }\n</code></pre>\n\n<p>Using <code>auto</code> with lambda in the way you used it with <code>FP</code></p>\n\n<pre><code>auto y = []() -&gt;bool { return true; };\n</code></pre>\n\n<p>leads to something different: the type of <code>y</code> above is an unnamed class with an <code>operator()</code>, not a function pointer type to that <code>operator()</code>.</p>\n\n<p>If you want a pointer to function, you have to convert the lambda to it using the operator <code>+</code>, as you can verify with the following <code>static_assert()</code></p>\n\n<pre><code>auto y = +[]() -&gt;bool { return true; };\n\nstatic_assert( std::is_same&lt;decltype(y), bool(*)()&gt;::value, \"!\" );\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 6673, "user_id": 777689, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/19JOo.jpg?s=128&g=1", "display_name": "PeterT", "link": "https://stackoverflow.com/users/777689/petert"}, "edited": false, "score": 1, "creation_date": 1549530895, "post_id": 54563470, "comment_id": 95937555, "body": "This definition of <code>one line</code> seems rather weird. Because by its definition you could just convert any multi-million line program into &quot;one line&quot; by removing all the newlines."}, {"owner": {"reputation": 659, "user_id": 10870835, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IlVhK.png?s=128&g=1", "display_name": "Chef Gladiator", "link": "https://stackoverflow.com/users/10870835/chef-gladiator"}, "reply_to_user": {"reputation": 6673, "user_id": 777689, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/19JOo.jpg?s=128&g=1", "display_name": "PeterT", "link": "https://stackoverflow.com/users/777689/petert"}, "edited": false, "score": 0, "creation_date": 1549544350, "post_id": 54563470, "comment_id": 95945542, "body": "@PeterT do you understand the solution?"}, {"owner": {"reputation": 6673, "user_id": 777689, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/19JOo.jpg?s=128&g=1", "display_name": "PeterT", "link": "https://stackoverflow.com/users/777689/petert"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 2, "creation_date": 1549545767, "post_id": 54563470, "comment_id": 95946385, "body": "@ChefGladiator yes, it&#39;s exactly the same as the answers of @max66 and @user463035818  . You just removed the newline between the function definition <code>char foo(unsigned){ return &#39; &#39;; }</code> and the pointer declaration/assignment <code>auto x = foo;</code>. They&#39;re still seperate. Whether you put a newline between them or not doesn&#39;t change anything. You can remove all the newlines from your program and it&#39;s still the same program"}], "tags": [], "owner": {"reputation": 659, "user_id": 10870835, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IlVhK.png?s=128&g=1", "display_name": "Chef Gladiator", "link": "https://stackoverflow.com/users/10870835/chef-gladiator"}, "is_accepted": false, "score": 1, "last_activity_date": 1549553653, "last_edit_date": 1549553653, "creation_date": 1549491696, "answer_id": 54563470, "question_id": 54557369, "link": "https://stackoverflow.com/questions/54557369/declare-and-define-function-pointer-variable-in-one-line/54563470#54563470", "title": "declare and define function pointer variable in one line", "body": "<p>Many thanks all for the lively roller-coaster of useful comments. Somebody on Reddit, where I asked the same question, under the user name \"TheTiefMaster\", dropped this \"one liner\":</p>\n\n<pre><code>// also works as C\nchar whatever(unsigned k) { return char(k); } char(*F)(unsigned) = whatever;\n</code></pre>\n\n<p>Let me clarify: I do understand these are two statements on one line. And no there is no type in here, but one function pointer pointing to the same function. The usage:</p>\n\n<pre><code>    auto x = whatever(65); // 'A'\n    auto y = F(66); // 'B'\n</code></pre>\n\n<p>Then I figured the following will make the function definition and its type declaration:</p>\n\n<pre><code>    // FP is a type of function whoever\n    char whoever(unsigned k) { return 'A'; } typedef char(*FP)(unsigned) ;\n</code></pre>\n\n<p>Calling whoever behaves as expected</p>\n\n<pre><code>   auto w = whoever(42) ; // 'A'\n</code></pre>\n\n<p>FP is where it starts getting interesting. FP is a type, and as it turns out one can cast to the type.</p>\n\n<pre><code>     // using FP as a type\n     // c++ style type cast\n     // empty cast returns nullptr\n     auto fun = FP();\n     // calling fun() above crashes\n     // but it is \"invocable\" as per C++ rules\n     static_assert(std::is_invocable_v&lt;P2F()&gt;);\n</code></pre>\n\n<p>Passing any argument to this cast, works and returns non null address:</p>\n\n<pre><code>      // update: this compiles only on MSVC\n      // and is a bug\n      auto fun = FP(42); \n      // type of fun is char (*) (unsigned)\n</code></pre>\n\n<p>Calling the result of this fun crashes, obviously: </p>\n\n<pre><code>     // reading access violation\n     fun(123) ;\n</code></pre>\n\n<p>This cast with an instance from any required function, works:</p>\n\n<pre><code>    auto fun = FP(whatever); \n\n    // works, obviously\n    fun(65) ; // 'A'\n</code></pre>\n\n<p>To use this knowledge we will use the static_cast to safely cast to what we can call. C++ type cast is too forceful, just like C style type cast is.</p>\n\n<pre><code>     // does not compile\n     // fun is the wrong type and can not be called\n     auto fun = static_cast&lt;FP&gt;(42); \n\n     // does compile, fun is safe to call\n         auto fun = static_cast&lt;FP&gt;(whatever);\n\n    // works, obviously\n    fun(65) ; // 'A'\n</code></pre>\n\n<p>This investigation is obviously far from over. I shall proceed with it, elsewhere.      </p>\n\n<p>Update:</p>\n\n<pre><code>       using FP = char (*)(int) ;\n       // must not compile, compiles under MSVC\n       auto oops = FP(42) ;\n</code></pre>\n\n<p>Is the bug in MSVC, I reported it today.</p>\n"}, {"comments": [{"owner": {"reputation": 33597, "user_id": 2445184, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/0b51ece74c2314ba345a862c4b00d804?s=128&d=identicon&r=PG", "display_name": "cmaster - reinstate monica", "link": "https://stackoverflow.com/users/2445184/cmaster-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1553807358, "post_id": 55400636, "comment_id": 97534302, "body": "Works just as well as in C, and can also be used for array types: <code>char (*img)[width][3] = malloc(height*sizeof(*img));</code> While this syntax is pretty useless in C++ (no array types with runtime sizes), it works well in C and sports the same counterintuitive syntax."}], "tags": [], "owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "is_accepted": false, "score": 12, "last_activity_date": 1553784802, "creation_date": 1553784802, "answer_id": 55400636, "question_id": 54557369, "link": "https://stackoverflow.com/questions/54557369/declare-and-define-function-pointer-variable-in-one-line/55400636#55400636", "title": "declare and define function pointer variable in one line", "body": "<p>Whenever you can write a typedef, you can also write a variable declaration with no typedef, with almost identical syntax.</p>\n\n<p>Example:</p>\n\n<pre><code> // typedef\n typedef char(*FP)(unsigned);\n FP x = y ;\n\n // no typedef\n char(*x)(unsigned) = y;\n</code></pre>\n\n<p>Remove the <code>typedef</code> keyword, and you have a variable declaration. Slap an initialisation on it if you want.</p>\n"}, {"comments": [{"owner": {"reputation": 4295, "user_id": 1916893, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/XTlc8.png?s=128&g=1", "display_name": "TobiMcNamobi", "link": "https://stackoverflow.com/users/1916893/tobimcnamobi"}, "edited": false, "score": 0, "creation_date": 1553843454, "post_id": 55400829, "comment_id": 97543771, "body": "I like this answer a bit more than the accepted one. It is more C++11-ish even though it is not clear that OP has or wants a C++11 solution. But hey, C++11 is not the &quot;all new exotic&quot; standard any more."}], "tags": [], "owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "is_accepted": false, "score": 12, "last_activity_date": 1553785356, "creation_date": 1553785356, "answer_id": 55400829, "question_id": 54557369, "link": "https://stackoverflow.com/questions/54557369/declare-and-define-function-pointer-variable-in-one-line/55400829#55400829", "title": "declare and define function pointer variable in one line", "body": "<p>You can use <code>auto</code>:</p>\n\n<pre><code>auto fptr = &amp;f;\n</code></pre>\n\n<p>It skips the need of a typedef and conserve a nice syntax.</p>\n"}, {"tags": [], "owner": {"reputation": 290, "user_id": 6852180, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5fae5b35c0c625157d991b31e113de3?s=128&d=identicon&r=PG", "display_name": "atomsymbol", "link": "https://stackoverflow.com/users/6852180/atomsymbol"}, "is_accepted": false, "score": 0, "last_activity_date": 1554214610, "creation_date": 1554214610, "answer_id": 55477043, "question_id": 54557369, "link": "https://stackoverflow.com/questions/54557369/declare-and-define-function-pointer-variable-in-one-line/55477043#55477043", "title": "declare and define function pointer variable in one line", "body": "<p>The code:</p>\n\n<pre><code>typedef char(*FP)(int);\nFP x = y;\n</code></pre>\n\n<p>fails to compile with current C++ compilers if <code>y</code> is a lambda expression capturing a variable.</p>\n\n<pre><code>// Compiles OK\nFP x0 = [](int k) -&gt; char { return char(k); };\n\n// Fails to compile\nint i = 123;\nFP x1 = [=](int k) -&gt; char { return char(k); };\nFP x2 = [=](int k) -&gt; char { return char(k+i); };\nFP x3 = [&amp;](int k) -&gt; char { return char(k+i); };\nFP x4 = [i](int k) -&gt; char { return char(k+i); };\n// error: cannot convert \u2018main()::&lt;lambda(int)&gt;\u2019 to \u2018FP {aka char (*)(int)}\u2019\n//        in initialization\n</code></pre>\n\n<p>The reason why it fails to compile is that the size of the right side of the assignment to <code>x1</code>...<code>x4</code> is greater than size of <code>FP</code>.</p>\n\n<p>For a C++ compiler to make assignments to <code>x1</code>...<code>x4</code> be valid it would need to generate code at runtime. Current C++ compilers such as GCC and clang do not support this, mainly because it would cause memory leaks because C++ isn't a garbage collected language. Some garbage collected language implementations, such as earlier versions of the official Go compiler, do support such assignments by performing runtime code generation.</p>\n"}], "owner": {"reputation": 659, "user_id": 10870835, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IlVhK.png?s=128&g=1", "display_name": "Chef Gladiator", "link": "https://stackoverflow.com/users/10870835/chef-gladiator"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1112, "favorite_count": 1, "answer_count": 7, "score": 4, "last_activity_date": 1554591491, "creation_date": 1549467756, "last_edit_date": 1554591491, "question_id": 54557369, "link": "https://stackoverflow.com/questions/54557369/declare-and-define-function-pointer-variable-in-one-line", "title": "declare and define function pointer variable in one line", "body": "<p>In C++ how do we do the following</p>\n\n<pre><code>// fundamental language construct        \n   type name = value ; \n// for example \n   int x = y;\n</code></pre>\n\n<p>with function pointers?</p>\n\n<pre><code> typedef (char)(*FP)(unsigned);\n\n // AFAIK not possible in C++\n FP x = y ;\n</code></pre>\n\n<p>I can use lambdas:</p>\n\n<pre><code> FP x = []( unsigned k) -&gt; char { return char(k); }\n</code></pre>\n\n<p>But I do not know how to do this without lambda. Any ideas?</p>\n"}, {"tags": ["c++", "visual-studio", "ndk-build"], "comments": [{"owner": {"reputation": 12749, "user_id": 7976805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92a559df8b4b287aad23724b4c66d67c?s=128&d=identicon&r=PG&f=1", "display_name": "Yksisarvinen", "link": "https://stackoverflow.com/users/7976805/yksisarvinen"}, "edited": false, "score": 0, "creation_date": 1549467680, "post_id": 54557221, "comment_id": 95914301, "body": "Have you <code>#include</code>d the file which declares that function?"}, {"owner": {"reputation": 1, "user_id": 11022962, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-cSIh85VcTf8/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQMZGRFJyf8ViPeD6iAS4OqzLgMfNg/mo/photo.jpg?sz=128", "display_name": "blackwizzard44", "link": "https://stackoverflow.com/users/11022962/blackwizzard44"}, "reply_to_user": {"reputation": 12749, "user_id": 7976805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92a559df8b4b287aad23724b4c66d67c?s=128&d=identicon&r=PG&f=1", "display_name": "Yksisarvinen", "link": "https://stackoverflow.com/users/7976805/yksisarvinen"}, "edited": false, "score": 0, "creation_date": 1549560291, "post_id": 54557221, "comment_id": 95955272, "body": "Yes of course! I even double checked the spelling."}], "owner": {"reputation": 1, "user_id": 11022962, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-cSIh85VcTf8/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQMZGRFJyf8ViPeD6iAS4OqzLgMfNg/mo/photo.jpg?sz=128", "display_name": "blackwizzard44", "link": "https://stackoverflow.com/users/11022962/blackwizzard44"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 40, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1549467359, "creation_date": 1549467330, "last_edit_date": 1549467359, "question_id": 54557221, "link": "https://stackoverflow.com/questions/54557221/error-use-of-undeclared-identifier-vkfreedescriptorsets-even-though-it-is-dec", "title": "error: use of undeclared identifier &#39;vkFreeDescriptorSets&#39; even though it is declared", "body": "<p>While using ndk-build to run the code on an emulator or smartphone I get the Error above even though the identifier is being declared in a different class (see code below).\nRunning it with visual studio on my PC I had no issues what so ever.</p>\n\n<p>This is where the problem occurs:</p>\n\n<pre><code>class DescriptorSetList : public VulkanResourceList&lt;VkDescriptorSet&gt;\n{\nprivate:\n    VkDescriptorPool descriptorPool;\npublic:\n    DescriptorSetList(VkDevice &amp;dev, VkDescriptorPool pool) : VulkanResourceList(dev), descriptorPool(pool) {};\n\n    ~DescriptorSetList()\n    {\n        for (auto&amp; descriptorSet : resources)\n        {\n            vkFreeDescriptorSets(device, descriptorPool, 1, &amp;descriptorSet.second);\n        }\n    }\n\n    VkDescriptorSet add(std::string name, VkDescriptorSetAllocateInfo allocInfo)\n    {\n        VkDescriptorSet descriptorSet;\n        VK_CHECK_RESULT(vkAllocateDescriptorSets(device, &amp;allocInfo, &amp;descriptorSet));\n        resources[name] = descriptorSet;\n        return descriptorSet;\n    }\n};\n</code></pre>\n\n<p>This is where the identifier is being declared:</p>\n\n<pre><code>VKAPI_ATTR VkResult VKAPI_CALL vkFreeDescriptorSets(\n    VkDevice                                    device,\n    VkDescriptorPool                            descriptorPool,\n    uint32_t                                    descriptorSetCount,\n    const VkDescriptorSet*                      pDescriptorSets);\n</code></pre>\n\n<p>I have tried different methods, which I have found on here, of declaring and calling the identifier, but nothing worked.</p>\n\n<p>What am I doing wrong?</p>\n"}, {"tags": ["c++", "opencv", "visual-studio-2010"], "comments": [{"owner": {"reputation": 115, "user_id": 10230352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbdca0e32bd552b1f6087dc98affe651?s=128&d=identicon&r=PG&f=1", "display_name": "Chance Shaffer", "link": "https://stackoverflow.com/users/10230352/chance-shaffer"}, "edited": false, "score": 0, "creation_date": 1549480312, "post_id": 54557116, "comment_id": 95920978, "body": "Maybe try using the docs of opencv. I have never worked with the library, but hopefully this helps <a href=\"https://docs.opencv.org/3.4.0/d9/df8/tutorial_root.html\" rel=\"nofollow noreferrer\">opencv</a>"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 11023684, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-9oiaAL_9Tk8/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQMaha2f6phAKycWBJsWz7ZmVdOCrg/mo/photo.jpg?sz=128", "display_name": "QuestionMark", "link": "https://stackoverflow.com/users/11023684/questionmark"}, "edited": false, "score": 0, "creation_date": 1549533484, "post_id": 54560641, "comment_id": 95939003, "body": "But how do I get the line that connects my camera position and the virtual point on my image surface? If I got that, it&#39;s easy to calculate the intersection with my plane"}], "tags": [], "owner": {"reputation": 693, "user_id": 3662223, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ef0890f4d686f08217ccf1eac4c1a44?s=128&d=identicon&r=PG&f=1", "display_name": "Aumnayan", "link": "https://stackoverflow.com/users/3662223/aumnayan"}, "is_accepted": false, "score": 0, "last_activity_date": 1549479126, "creation_date": 1549479126, "answer_id": 54560641, "question_id": 54557116, "link": "https://stackoverflow.com/questions/54557116/how-to-calculate-the-3d-coordinate-from-a-picture-with-given-z-value/54560641#54560641", "title": "How to calculate the 3D coordinate from a picture with given Z-value", "body": "<p>Not much can be labeled as 'easy' when dealing with 3D rendering. </p>\n\n<p>For your question, I would look into <a href=\"https://www.siggraph.org/education/materials/HyperGraph/raytrace/rtinter0.htm\" rel=\"nofollow noreferrer\">ray tracing</a>. I am not going to try to explain it, as most sites will do a better job of explaining it then I can. </p>\n"}, {"comments": [{"owner": {"reputation": 11, "user_id": 11023684, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-9oiaAL_9Tk8/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQMaha2f6phAKycWBJsWz7ZmVdOCrg/mo/photo.jpg?sz=128", "display_name": "QuestionMark", "link": "https://stackoverflow.com/users/11023684/questionmark"}, "edited": false, "score": 0, "creation_date": 1549533433, "post_id": 54561866, "comment_id": 95938973, "body": "I used the 4 known points and their corresponding coordinates on my image to calculate the extrinsic parameters and the camera position (solvePnp --&gt; rodriguez matrix). I should not need 2 different camera perspectives since I know one coordinate (Z = 0)..."}], "tags": [], "owner": {"reputation": 1, "user_id": 11022353, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd791cc0ef7179703e6bec0aaa0c3752?s=128&d=identicon&r=PG&f=1", "display_name": "musgani19", "link": "https://stackoverflow.com/users/11022353/musgani19"}, "is_accepted": false, "score": 0, "last_activity_date": 1549484216, "creation_date": 1549484216, "answer_id": 54561866, "question_id": 54557116, "link": "https://stackoverflow.com/questions/54557116/how-to-calculate-the-3d-coordinate-from-a-picture-with-given-z-value/54561866#54561866", "title": "How to calculate the 3D coordinate from a picture with given Z-value", "body": "<p>When you look at opencv in calib3d module. you will see this equation:</p>\n\n<p><a href=\"https://docs.opencv.org/master/d9/d0c/group__calib3d.html\" rel=\"nofollow noreferrer\">https://docs.opencv.org/master/d9/d0c/group__calib3d.html</a></p>\n\n<p>Please scroll down the link and see the perspective transformation equations</p>\n\n<p>From what you say, you declare the plane ground level(Z=0). you also know the internsic (focal point in pixels , image center) camera parameter and you know the exterinsic (rotation and translation) camera parameter. and you want to access some pixels in your image (is it?) and from there, you want to estimate where it is on the plane??</p>\n\n<p>You can use triangulatePoints() function in calib3D module of opencv. you need at least 2 images tough.</p>\n\n<p>But your case seems unlikely to me, if you try to detect 4 known points, you will have to define the world coordinate of those plane first, usually, you define top left corner of the plane as original (0,0,0), then, you will know the position of those 4 known points in world coordinate by manual calculation. when you detect it in opencv program, it gives you the pixel coordinates of those 4 points. then, usually, what people expect to calculate is the pose ( rotation and translation ).</p>\n\n<p>Alternatively, if your case is what you said, you can make a simple matrix operation code based on perspective transformation equation.</p>\n"}], "owner": {"reputation": 11, "user_id": 11023684, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-9oiaAL_9Tk8/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQMaha2f6phAKycWBJsWz7ZmVdOCrg/mo/photo.jpg?sz=128", "display_name": "QuestionMark", "link": "https://stackoverflow.com/users/11023684/questionmark"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 398, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1549484216, "creation_date": 1549466945, "question_id": 54557116, "link": "https://stackoverflow.com/questions/54557116/how-to-calculate-the-3d-coordinate-from-a-picture-with-given-z-value", "title": "How to calculate the 3D coordinate from a picture with given Z-value", "body": "<p>I've got a picture of a plane with 4 known points on it. I've got the intrinsic and extrinsic camera parameters and also (using the Rodriguez function) the position of the camera. The plane is defined as my ground level (Z = 0). If I select a point in my image, is there an easy way to calculate the coordinates, where this point would be on my plane?</p>\n"}, {"tags": ["c++", "memory", "optimization", "graph", "task"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1549467110, "post_id": 54557059, "comment_id": 95913911, "body": "just a remark: <code>return data[i-1][j-1];</code>  this opens the door to subtle bugs and lots of confusion, you better stick to the C++ convention of <code>0</code> based indexing, mixing <code>0</code> based and <code>1</code> based indexing in the same code isnt nice"}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 0, "creation_date": 1549467702, "post_id": 54557059, "comment_id": 95914314, "body": "You have one <code>Matrix</code> and reserve space in both dimensions regularly. If you reserve a fixed amount at start you won&#39;t be spending time checking if it&#39;s time to increase it - and you can also make it just big enough to fit within the memory limit."}, {"owner": {"reputation": 101, "user_id": 10722187, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/931ef7ce2010335ce363bc01237c5534?s=128&d=identicon&r=PG&f=1", "display_name": "nnuttertools", "link": "https://stackoverflow.com/users/10722187/nnuttertools"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1549467720, "post_id": 54557059, "comment_id": 95914323, "body": "@user463035818, thank you for remark, I know it and thought about how to fix, but the fact is std::map object returns from subscript [ data ] 0 if there is no vertex and a positive number else, and it more convenient to use <b>return data[i-1][j-1]</b> in this case unfortunately;"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1549467958, "post_id": 54557059, "comment_id": 95914521, "body": "you are using one problem as excuse for a different one ;). Dont trade convenience for correctness and performance. Unless you explcitly want the map to insert a value for the key in case it does not exist you should be using <code>map::find</code> not <code>map::operator[]</code>"}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 0, "creation_date": 1549467960, "post_id": 54557059, "comment_id": 95914523, "body": "I don&#39;t understand what you said about <code>std::map</code> object and I also can&#39;t find <code>std::map</code> anywhere in your code. Edit: There&#39;s a <code>std::unordered_map</code> in there I see now ... but still don&#39;t get why you can&#39;t use zero based indexing. Also: <code>operator DataToIndex()</code> looks expensive. Do you want to return a copy of the <code>unordered_map</code>?"}, {"owner": {"reputation": 101, "user_id": 10722187, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/931ef7ce2010335ce363bc01237c5534?s=128&d=identicon&r=PG&f=1", "display_name": "nnuttertools", "link": "https://stackoverflow.com/users/10722187/nnuttertools"}, "reply_to_user": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 0, "creation_date": 1549468437, "post_id": 54557059, "comment_id": 95914913, "body": "@TedLyngmo,  user463035818 answered it and I understand that it&#39;s a better to use  map::find;  For example, if we write: <b>std::map&lt;string,int&gt; object;</b> <b>object[&quot;abc&quot;]  == 0;</b> I&#39;m about it :) <b>UPD</b>:I do not use it, I forgot to clean; I just tried everything to make it work)"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1549468613, "post_id": 54557059, "comment_id": 95915011, "body": "actually I was more refering to const-correctness. You cannot call <code>operator[]</code> on a <code>const</code> map"}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 0, "creation_date": 1549470518, "post_id": 54557059, "comment_id": 95916155, "body": "@nnuttertools Did you try to create a fixed sized <code>Matrix</code> and skip the call to <code>increaseDimension()</code>?"}, {"owner": {"reputation": 101, "user_id": 10722187, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/931ef7ce2010335ce363bc01237c5534?s=128&d=identicon&r=PG&f=1", "display_name": "nnuttertools", "link": "https://stackoverflow.com/users/10722187/nnuttertools"}, "reply_to_user": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 0, "creation_date": 1549471488, "post_id": 54557059, "comment_id": 95916701, "body": "@TedLyngmo, Yes, but absolutely without <b>increaseDimension ()</b> does not work; I assume that the matrix size is about 7 * 1000, but it is difficult to guess the number bytes to bytes, my solution also passes 17-18 tests, and 17 fails due to a Time limit, and if I increase <b>IncreaseSize</b>, it will fail due to memory limit on 18;"}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 0, "creation_date": 1549472016, "post_id": 54557059, "comment_id": 95916998, "body": "Log the final size of the <code>Matrix</code> when you run the program using the <code>increaseDimension()</code> function, then in your next version of the program. <code>reserve</code> space for exacly those dimensions and comment out the call to <code>increaseDimension()</code>. If you are using the same input data, it should work."}, {"owner": {"reputation": 101, "user_id": 10722187, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/931ef7ce2010335ce363bc01237c5534?s=128&d=identicon&r=PG&f=1", "display_name": "nnuttertools", "link": "https://stackoverflow.com/users/10722187/nnuttertools"}, "reply_to_user": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 0, "creation_date": 1549473148, "post_id": 54557059, "comment_id": 95917610, "body": "@TedLyngmo, I send it to a server and can&#39;t control the input unfortunately. I suppose, the server gives random input data to a &quot;particular topic&quot; for each test;"}], "owner": {"reputation": 101, "user_id": 10722187, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/931ef7ce2010335ce363bc01237c5534?s=128&d=identicon&r=PG&f=1", "display_name": "nnuttertools", "link": "https://stackoverflow.com/users/10722187/nnuttertools"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 140, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1549633859, "creation_date": 1549466803, "last_edit_date": 1549633859, "question_id": 54557059, "link": "https://stackoverflow.com/questions/54557059/optimal-algorithm-with-graph", "title": "Optimal algorithm with graph", "body": "<p>The task:</p>\n\n<p>The input is words :</p>\n\n<p><a href=\"https://i.stack.imgur.com/lxKso.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/lxKso.png\" alt=\"enter image description here\"></a></p>\n\n<p>Let:</p>\n\n<p><a href=\"https://i.stack.imgur.com/dcZdn.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/dcZdn.png\" alt=\"enter image description here\"></a></p>\n\n<p>Each word can be presented as the <strong>n-2</strong> words of length <strong>3</strong>:</p>\n\n<p><a href=\"https://i.stack.imgur.com/0O14M.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/0O14M.png\" alt=\"enter image description here\"></a>\n<a href=\"https://i.stack.imgur.com/rVSyz.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/rVSyz.png\" alt=\"enter image description here\"></a></p>\n\n<p>Next:\nLet, we have a graph <strong>G</strong>.</p>\n\n<p>1)If the graph <strong>G</strong> have no vertex, for example Wi, so then put it;</p>\n\n<p>2)For each pair of vertices <a href=\"https://i.stack.imgur.com/EpePP.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/EpePP.png\" alt=\"enter image description here\"></a>\nadd oriented edge or increase the weight of existing vertex by 1;</p>\n\n<p>In the first line of input we take <a href=\"https://i.stack.imgur.com/lBcF3.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/lBcF3.png\" alt=\"enter image description here\"></a>\n- amount of words;</p>\n\n<p><strong>Output:</strong>\nIn the first line print <strong>V</strong> - amount of vertices;</p>\n\n<p>In the second line print <strong>E</strong> - amount of edges;</p>\n\n<p>In the next line print the words corresponding to the ends of the vertex <strong>e1</strong> and weight of the oriented edge;</p>\n\n<p>In the next line the same for <strong>e2</strong></p>\n\n<p>...</p>\n\n<p>Until to the edge with number <strong>E</strong></p>\n\n<p><strong><em>Example with input and output:</em></strong>\n<a href=\"https://i.stack.imgur.com/pdqV3.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/pdqV3.png\" alt=\"enter image description here\"></a></p>\n\n<p><strong>I wrote a solution</strong>, but it wasn't accepted due to \"<em>Memory limit</em>\" or \"<em>Time limit</em>\"(<strong>depending on how I allocated memory in the adjacency matrix</strong>).<strong>I wonder about a better solution</strong>, but nothing else comes to mind. In my humble opinion it's not bad solution)</p>\n\n<p>So let's overview the solution:</p>\n\n<p><strong>1)My adjacency matrix and base types:</strong></p>\n\n<pre><code>constexpr short increaseSize = 10;\nusing IndexType = uint16_t;\nusing MatrixElementType = uint16_t;\nusing VertexType = string;\n</code></pre>\n\n<hr>\n\n<pre><code>class Matrix{\n    using Vector = std::vector&lt;MatrixElementType&gt;;\n    using Data = std::vector&lt;Vector&gt;;\n    Data data{};\npublic:\n    auto&amp; operator() (const IndexType i,const IndexType j){\n        return data[i][j];\n    }\n    auto increaseDimension(){\n        auto size = data.size();\n        bool newSize = false;\n        if(size == data.capacity()) newSize = true;\n        for(IndexType i = 0;i&lt;size;++i)\n        {\n            if(newSize)data[i].reserve(size + increaseSize);\n            data[i].push_back(0);\n        }\n        if(newSize)data.reserve(size + increaseSize);\n        data.push_back(Vector(size+1,0));\n    }\n};\n</code></pre>\n\n<p><strong>2)Vertices:</strong></p>\n\n<pre><code>class Vertices{\npublic:\n    using DataToIndex = std::unordered_map&lt;VertexType,IndexType&gt;;\nprivate:\n    DataToIndex dataToIndex{};\npublic:\n\n    void add(const VertexType&amp; vertex, const IndexType index){\n        dataToIndex[vertex] = index;\n    }\n\n    const VertexType&amp; getData(const IndexType index){\n        for(const auto&amp; element:dataToIndex)\n            if(element.second == index) return element.first;\n        return dataToIndex.begin()-&gt;first;\n    }\n\n    auto operator[](const VertexType&amp; data) {\n       struct Proxy{\n          const IndexType index;\n          bool exists;\n          operator bool(){return exists;}\n       };\n    auto iterator = dataToIndex.find(data);\n    return Proxy{iterator-&gt;second,iterator != dataToIndex.end()};\n}\n\n   auto exists(const VertexType&amp; data){\n      if(dataToIndex.find(data) == dataToIndex.end())\n        return false;\n     else return true;\n   }\n};\n</code></pre>\n\n<p><strong>3)And finally, Graph</strong></p>\n\n<pre><code>class Graph{\nusing Index = IndexType;\npublic:\n    static constexpr char wordSize = 3;\nprivate:\n    Matrix matrix{};\n    Vertices vertices{};\n    IndexType amoutOfVertices = 0;\n    IndexType amountOfEdges = 0;\npublic:\n    inline void addVertex(const VertexType&amp; str){\n        if(vertices.exists(str)) return;\n        vertices.add(str,amoutOfVertices);\n        matrix.increaseDimension();\n        ++amoutOfVertices;\n    }\n    inline void addEdge(const IndexType i,const IndexType j){\n        if(matrix(i,j)== 0 ) ++amountOfEdges;\n        ++matrix(i,j);\n    }\n    inline void addEdge(const VertexType&amp; str1,const VertexType&amp; str2){\n        auto first = vertices[str1],\n             second = vertices[str2];\n        if(first &amp;&amp; second)\n            addEdge(first.index, second.index);\n    }\n\n   inline void out(){\n        cout &lt;&lt; amoutOfVertices &lt;&lt; endl;\n        cout &lt;&lt; amountOfEdges &lt;&lt; endl;\n        IndexType i,j;\n        MatrixElementType element;\n        for(i = 0 ;i &lt; amoutOfVertices;++i)\n            for(j = 0;j&lt; amoutOfVertices;++j)\n                if((element = matrix(i,j))) {\n                    cout &lt;&lt; vertices.getData(i) &lt;&lt; \" \";\n                    cout &lt;&lt; vertices.getData(j) &lt;&lt; \" \";\n                    cout &lt;&lt; element &lt;&lt; endl;\n                }\n      }\n\n};\n</code></pre>\n\n<p><strong>4)Function to read(a bit ugly, but it saves our memory):</strong></p>\n\n<pre><code>void readText(){\n    Graph graph;\n    IndexType T;\n    cin &gt;&gt; T;\n    getchar();\n    for(IndexType mainIndex = 0;mainIndex&lt; T;++mainIndex){\n        wordPreparing(graph);\n    }\n    graph.out();\n}\n\n\nvoid wordPreparing(Graph&amp; graph ){\n    string previousiWord{},iword{};\n    char newChar = ' ';\n    for(char i = 0;i&lt; Graph::wordSize;++i){\n        iword += getchar();\n    }\n    graph.addVertex(iword);\n\n    newChar = getchar();\n    while(newChar != '\\n'){\n        previousiWord = iword;\n        for(char i = 0;i&lt; Graph::wordSize-1;++i)\n            iword[i] = iword[i+1];\n        iword[Graph::wordSize - 1] = newChar;\n        newChar = getchar();\n        graph.addVertex(iword);\n        graph.addEdge(previousiWord, iword);\n    }\n}\n</code></pre>\n\n<p><strong>And we get it:</strong></p>\n\n<p><a href=\"https://i.stack.imgur.com/SNkAm.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/SNkAm.png\" alt=\"enter image description here\"></a></p>\n\n<p><strong>or it:</strong>\n<a href=\"https://i.stack.imgur.com/j0lBO.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/j0lBO.png\" alt=\"enter image description here\"></a></p>\n\n<p><strong>The task requires: 6.0 s and 128 Mb.</strong></p>\n\n<p><strong>Even if there is another solution, I would be immensely grateful if someone would comment on my approach)</strong></p>\n"}, {"tags": ["c++", "arrays", "output"], "comments": [{"owner": {"reputation": 12749, "user_id": 7976805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92a559df8b4b287aad23724b4c66d67c?s=128&d=identicon&r=PG&f=1", "display_name": "Yksisarvinen", "link": "https://stackoverflow.com/users/7976805/yksisarvinen"}, "edited": false, "score": 2, "creation_date": 1549466614, "post_id": 54556968, "comment_id": 95913593, "body": "You declare your array <b>before</b> you read it&#39;s size. It won&#39;t readjust it&#39;s length when the number changes."}, {"owner": {"reputation": 12749, "user_id": 7976805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92a559df8b4b287aad23724b4c66d67c?s=128&d=identicon&r=PG&f=1", "display_name": "Yksisarvinen", "link": "https://stackoverflow.com/users/7976805/yksisarvinen"}, "edited": false, "score": 3, "creation_date": 1549466657, "post_id": 54556968, "comment_id": 95913621, "body": "Also, obligatory comment that Variable Length Arrays are not standard C++ and are only supported by some compilers as extension."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1549466880, "post_id": 54556968, "comment_id": 95913763, "body": "<code>int array[arraySize];</code> when this is executed <code>arraySize</code> has not been set. It is a garbage value. Also in Standard <code>c++</code> this type of array is illegal. <code>arraySize</code> must be a compile time constant by the language standard."}, {"owner": {"reputation": 12749, "user_id": 7976805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92a559df8b4b287aad23724b4c66d67c?s=128&d=identicon&r=PG&f=1", "display_name": "Yksisarvinen", "link": "https://stackoverflow.com/users/7976805/yksisarvinen"}, "edited": false, "score": 1, "creation_date": 1549467002, "post_id": 54556968, "comment_id": 95913841, "body": "<code>arraySize</code> is unitialized. You have no idea what number is placed there. Then, you create an array of you-have-no-idea-what size. And then, you ask user to provide size for the array. But the array is already declared. The size of that array cannot change. It doesn&#39;t matter that <code>arraySize</code> changed, the size of array doesn&#39;t change."}, {"owner": {"reputation": 5, "user_id": 10525471, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-QPInQmlFkQg/AAAAAAAAAAI/AAAAAAAAAVM/xg-hJ0uNhYs/photo.jpg?sz=128", "display_name": "Itacool", "link": "https://stackoverflow.com/users/10525471/itacool"}, "edited": false, "score": 0, "creation_date": 1549467072, "post_id": 54556968, "comment_id": 95913886, "body": "Thank you for your help, I understand now! Thanks a lot."}], "answers": [{"comments": [{"owner": {"reputation": 2191, "user_id": 7070965, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qEhQf.png?s=128&g=1", "display_name": "dtell", "link": "https://stackoverflow.com/users/7070965/dtell"}, "edited": false, "score": 1, "creation_date": 1549467097, "post_id": 54557058, "comment_id": 95913904, "body": "A lot of people (including me) think it is (in most cases) useless to return in <code>main</code>. C++ doesn&#39;t require it anymore, therefore it is just noise (in most cases)."}], "tags": [], "owner": {"reputation": 16436, "user_id": 10411602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b534549770aedbc4d7eb03a39d740f6?s=128&d=identicon&r=PG&f=1", "display_name": "Blaze", "link": "https://stackoverflow.com/users/10411602/blaze"}, "is_accepted": true, "score": 3, "last_activity_date": 1549467526, "last_edit_date": 1549467526, "creation_date": 1549466802, "answer_id": 54557058, "question_id": 54556968, "link": "https://stackoverflow.com/questions/54556968/im-having-a-problem-with-this-array-code-that-is-supposed-to-output-all-the-num/54557058#54557058", "title": "I&#39;m having a problem with this array code that is supposed to output all the numbers that were input prior by the user", "body": "<p>This here:</p>\n\n<pre><code>int arraySize;\nint array[arraySize];\n</code></pre>\n\n<p>Is not going to work. First of all, variable length arrays aren't part of C++, so it only compiles if the compiler tolerates it nevertheless. But another problem is that you're making the array with size of <code>arraySize</code>, but <code>arraySize</code> is not initialized. That's underfined behvaior - anything might happen and there's no guarantee whatsoever.</p>\n\n<p>You need to read in the desired <code>arraySize</code> (with <code>cin &gt;&gt; arraySize;</code>) and <strong>after</strong> that you need to make your array. And when you do that, instead of a VLA, try something like this:</p>\n\n<pre><code>std::vector&lt;int&gt; array(arraySize);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 5, "user_id": 10525471, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-QPInQmlFkQg/AAAAAAAAAAI/AAAAAAAAAVM/xg-hJ0uNhYs/photo.jpg?sz=128", "display_name": "Itacool", "link": "https://stackoverflow.com/users/10525471/itacool"}, "edited": false, "score": 0, "creation_date": 1549467623, "post_id": 54557137, "comment_id": 95914266, "body": "I need to study how vectors work before I can apply it to my codes. I&#39;ll be using this as an example for the future - thanks a lot!"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "reply_to_user": {"reputation": 5, "user_id": 10525471, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-QPInQmlFkQg/AAAAAAAAAAI/AAAAAAAAAVM/xg-hJ0uNhYs/photo.jpg?sz=128", "display_name": "Itacool", "link": "https://stackoverflow.com/users/10525471/itacool"}, "edited": false, "score": 0, "creation_date": 1549467778, "post_id": 54557137, "comment_id": 95914363, "body": "@Itacool note that this is a misconception, you should have been studying c-arrays much more before using them, they are extremely complicated compared to <code>std::vector</code>. You dont need to know much more than presented in this answer to use a vector (of course you should read a bit more, but really not much)."}, {"owner": {"reputation": 2191, "user_id": 7070965, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qEhQf.png?s=128&g=1", "display_name": "dtell", "link": "https://stackoverflow.com/users/7070965/dtell"}, "reply_to_user": {"reputation": 5, "user_id": 10525471, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-QPInQmlFkQg/AAAAAAAAAAI/AAAAAAAAAVM/xg-hJ0uNhYs/photo.jpg?sz=128", "display_name": "Itacool", "link": "https://stackoverflow.com/users/10525471/itacool"}, "edited": false, "score": 0, "creation_date": 1549468123, "post_id": 54557137, "comment_id": 95914673, "body": "@Itacool please consider the edit I made regarding variable length arrays."}, {"owner": {"reputation": 5, "user_id": 10525471, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-QPInQmlFkQg/AAAAAAAAAAI/AAAAAAAAAVM/xg-hJ0uNhYs/photo.jpg?sz=128", "display_name": "Itacool", "link": "https://stackoverflow.com/users/10525471/itacool"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1549468127, "post_id": 54557137, "comment_id": 95914676, "body": "@user463035818 That&#39;s good to know. I guess I&#39;ll be looking into them very soon then."}, {"owner": {"reputation": 5, "user_id": 10525471, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-QPInQmlFkQg/AAAAAAAAAAI/AAAAAAAAAVM/xg-hJ0uNhYs/photo.jpg?sz=128", "display_name": "Itacool", "link": "https://stackoverflow.com/users/10525471/itacool"}, "edited": false, "score": 0, "creation_date": 1549468167, "post_id": 54557137, "comment_id": 95914703, "body": "@datell Will do. Thanks."}, {"owner": {"reputation": 5, "user_id": 10525471, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-QPInQmlFkQg/AAAAAAAAAAI/AAAAAAAAAVM/xg-hJ0uNhYs/photo.jpg?sz=128", "display_name": "Itacool", "link": "https://stackoverflow.com/users/10525471/itacool"}, "edited": false, "score": 0, "creation_date": 1549468627, "post_id": 54557137, "comment_id": 95915023, "body": "@datell I enabled more compiler warnings and I did get that warning. Does that mean that the best way to do what I have in mind correctly (using the standard library containers) is by using std::vector?"}, {"owner": {"reputation": 2191, "user_id": 7070965, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qEhQf.png?s=128&g=1", "display_name": "dtell", "link": "https://stackoverflow.com/users/7070965/dtell"}, "reply_to_user": {"reputation": 5, "user_id": 10525471, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-QPInQmlFkQg/AAAAAAAAAAI/AAAAAAAAAVM/xg-hJ0uNhYs/photo.jpg?sz=128", "display_name": "Itacool", "link": "https://stackoverflow.com/users/10525471/itacool"}, "edited": false, "score": 0, "creation_date": 1549468733, "post_id": 54557137, "comment_id": 95915086, "body": "@Itacool It is certainly a big hint to not use variable length arrays. You need to allocate memory <i>dynamically</i>. The (in most cases) best container for this is <code>std::vector</code>. So yes, stick to this."}], "tags": [], "owner": {"reputation": 2191, "user_id": 7070965, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qEhQf.png?s=128&g=1", "display_name": "dtell", "link": "https://stackoverflow.com/users/7070965/dtell"}, "is_accepted": false, "score": 4, "last_activity_date": 1549468216, "last_edit_date": 1549468216, "creation_date": 1549467001, "answer_id": 54557137, "question_id": 54556968, "link": "https://stackoverflow.com/questions/54556968/im-having-a-problem-with-this-array-code-that-is-supposed-to-output-all-the-num/54557137#54557137", "title": "I&#39;m having a problem with this array code that is supposed to output all the numbers that were input prior by the user", "body": "<p>If you want to determine the size of the array during <em>runtime</em> you need a container that is suitable for that. Since this question is tagged with C++, you should use some of the standard library containers. </p>\n\n<p>In your case, <code>std::vector</code> is the best one:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n\nint main()\n{\n  size_t arraySize = 0;\n  std::cout &lt;&lt; \"How many numbers would you like to visualize?\\n\"\n            &lt;&lt; \"Numbers: \";\n  std::cin &gt;&gt; arraySize;\n  std::cout &lt;&lt; \"You will visualize \" &lt;&lt; arraySize &lt;&lt; \" numbers.\\n\"\n            &lt;&lt; \"Begin: \\n\";\n\n  // declare std::vector and allocate memory for arraySize elements\n  std::vector&lt;int&gt; array(arraySize);\n  for (int i = 0; i &lt; array.size(); i++) {\n    std::cin &gt;&gt; array[i];\n  }\n  std::cout &lt;&lt; \"You have inserted the following numbers: \\n\";\n\n  for (int a = 0; a &lt; array.size(); a++) {\n    std::cout &lt;&lt; array[a] &lt;&lt; \" \";\n  }\n  std::cout &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>Think about that a user can still input whatever he likes, e.g., a string. An improvement (and a good practice) would be to <em>validate</em> the user input.</p>\n\n<p>Using an approach where you define <code>int array[arraySize]</code> after you receive <code>arraySize</code> as user input does <strong>not</strong> solve your problem. Declaring variable length arrays is not valid C++. If you enable more compiler warnings you will get noticed about this.</p>\n\n<p>E.g., using <em>gcc 8.2.0</em> with the flag <code>-Wpedantic</code> gives the following:</p>\n\n<pre><code>warning: ISO C++ forbids variable length array 'array'\n</code></pre>\n"}], "owner": {"reputation": 5, "user_id": 10525471, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-QPInQmlFkQg/AAAAAAAAAAI/AAAAAAAAAVM/xg-hJ0uNhYs/photo.jpg?sz=128", "display_name": "Itacool", "link": "https://stackoverflow.com/users/10525471/itacool"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 54557058, "answer_count": 2, "score": 0, "last_activity_date": 1549474533, "creation_date": 1549466526, "last_edit_date": 1549474533, "question_id": 54556968, "link": "https://stackoverflow.com/questions/54556968/im-having-a-problem-with-this-array-code-that-is-supposed-to-output-all-the-num", "title": "I&#39;m having a problem with this array code that is supposed to output all the numbers that were input prior by the user", "body": "<p>So, this is how I want it to go:</p>\n\n<p>I want my program to ask how many numbers the user will input(for example 5). After inputting the numbers, I want the program to output those numbers(2, 3, 20, 40, 50 for example). </p>\n\n<p>Easy, right? Well I've got a problem with my code: even if I input 10 or 200 as the amount of numbers I will input, the program keeps stopping at the 6th number and outputs those 6 numbers only. </p>\n\n<pre><code>int main() \n{\n    int arraySize;\n    int array[arraySize];\n    cout &lt;&lt; \"How many numbers would you like to visualize?\" &lt;&lt; endl &lt;&lt; \"Numbers: \";\n    cin &gt;&gt; arraySize;\n    cout &lt;&lt; \"You will visualize \" &lt;&lt; arraySize &lt;&lt; \" numbers.\" &lt;&lt; endl &lt;&lt; \"Begin: \" &lt;&lt; endl;\n    for (int i = 0; i &lt; arraySize; i++) {\n        cin &gt;&gt; array[i];\n    }\n    cout &lt;&lt; \"You have inserted the following numbers: \" &lt;&lt; endl;\n\n    for (int a = 0; a &lt; arraySize; a++) {\n        cout &lt;&lt; array[a] &lt;&lt; \" \";\n    }\n}\n</code></pre>\n\n<p>If I input 10 as the arraySize, it'll stop at 6. Just to clarify, </p>\n"}, {"tags": ["c++", "regex", "security"], "comments": [{"owner": {"reputation": 61409, "user_id": 485343, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e18b024a122df74275dd2c4486e8a2b4?s=128&d=identicon&r=PG", "display_name": "rustyx", "link": "https://stackoverflow.com/users/485343/rustyx"}, "edited": false, "score": 4, "creation_date": 1549466599, "post_id": 54556862, "comment_id": 95913582, "body": "What do you mean by &quot;safe&quot;? Safe against remote code execution, denial-of-service, exceptions?"}], "answers": [{"tags": [], "owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "is_accepted": true, "score": 2, "last_activity_date": 1549467505, "last_edit_date": 1592644375, "creation_date": 1549467505, "answer_id": 54557275, "question_id": 54556862, "link": "https://stackoverflow.com/questions/54556862/is-stdregex-safe-for-user-defined-expressions/54557275#54557275", "title": "Is std::regex safe for user-defined expressions?", "body": "<p>The standard requires that an implementation throws an error when the passed regex is invalid.</p>\n<blockquote>\n<p><a href=\"http://eel.is/c++draft/re#regex.construct-3\" rel=\"nofollow noreferrer\">[regex.construct-3]</a>:</p>\n<pre><code>explicit basic_regex(const charT* p, flag_type f = regex_constants::ECMAScript);\n</code></pre>\n<p><em>Requires:</em> <code>p</code> shall not be a null pointer.</p>\n<p><em>Throws:</em> <code>regex_\u00aderror</code> if <code>p</code> is not a valid regular expression.</p>\n<p><em>Effects:</em> Constructs an object of class basic_\u00adregex; the object's internal finite state machine is constructed from the regular expression contained in the array of <code>charT</code> of length <code>char_\u00adtraits&lt;charT&gt;::\u200blength(p)</code> whose first element is designated by <code>p</code>, and interpreted according to the flags <code>f</code>.</p>\n<p><em>Ensures:</em> <code>flags()</code> returns <code>f</code>. <code>mark_\u00adcount()</code> returns the number of marked sub-expressions within the expression.</p>\n</blockquote>\n<p>There is even a <a href=\"http://eel.is/c++draft/re#tab:re:errortype\" rel=\"nofollow noreferrer\">table</a> detailing the different kinds of errors possible.</p>\n<p>So as long as you do not pass a null pointer, <strong>there should be no undefined behavior</strong> in creating a regex from a user-provided string.</p>\n<p>Note that any practical implementation may of course still have bugs that may lead to security vulnerabilities. The standard also obviously doesn't guarantee that a malicious user has no way to DoS your system by submitting a very complex/self-referential regex that produces too many matches, uses too much memory/CPU etc., so you'll have to consider that yourself. But if you are just worried whether an invalid regex is free to lead to UB, the answer is &quot;no, you're fine&quot;.</p>\n"}, {"tags": [], "owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "is_accepted": false, "score": 0, "last_activity_date": 1549467519, "creation_date": 1549467519, "answer_id": 54557278, "question_id": 54556862, "link": "https://stackoverflow.com/questions/54556862/is-stdregex-safe-for-user-defined-expressions/54557278#54557278", "title": "Is std::regex safe for user-defined expressions?", "body": "<p>The C++ standard defines what correct behavior means. Even in cases of functions that throw exceptions, the standard defines which functions throw, what exceptions will be thrown, and what circumstances will cause such exceptions to be thrown. Such code has behavior that is well-defined by the standard.</p>\n\n<p>The standard does not, and can not, specify what happens if an implementation is operating against the behavior defined by the standard (ie: is \"broken\"). If the standard were to define such behavior, then implementations would not be operating against the standard, by definition. So they would no longer be \"broken\".</p>\n\n<p>So, whether regex implementations are able to avoid pathological behavior caused by externally-provided strings which you did not sanitize is a matter of quality-of-implementation, not standard-defined behavior.</p>\n"}, {"tags": [], "owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "is_accepted": false, "score": 2, "last_activity_date": 1549467687, "creation_date": 1549467687, "answer_id": 54557344, "question_id": 54556862, "link": "https://stackoverflow.com/questions/54556862/is-stdregex-safe-for-user-defined-expressions/54557344#54557344", "title": "Is std::regex safe for user-defined expressions?", "body": "<p>Basically No. It is not safe. Perfectly legal regular expressions can be crafted that take extraordinarily long times to compute - causing <em>denial of service</em>.</p>\n\n<p>From Wikipedia under <a href=\"https://en.wikipedia.org/wiki/ReDoS\" rel=\"nofollow noreferrer\">ReDoS</a></p>\n\n<blockquote>\n  <p>The regular expression denial of service (ReDoS)[1] is an algorithmic complexity attack that produces a denial-of-service by providing a regular expression that takes a very long time to evaluate. The attack exploits the fact that most regular expression implementations have exponential time worst case complexity: the time taken can grow exponentially in relation to input size. An attacker can thus cause a program to spend an unbounded amount of time processing by providing such a regular expression, either slowing down or becoming unresponsive. </p>\n</blockquote>\n"}], "owner": {"reputation": 53, "user_id": 5775795, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c75e75def546b1fae7d5f895fb5af2ca?s=128&d=identicon&r=PG&f=1", "display_name": "E Catchpole", "link": "https://stackoverflow.com/users/5775795/e-catchpole"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 167, "favorite_count": 0, "closed_date": 1550619911, "accepted_answer_id": 54557275, "answer_count": 3, "score": 5, "last_activity_date": 1549467687, "creation_date": 1549466228, "last_edit_date": 1549466892, "question_id": 54556862, "link": "https://stackoverflow.com/questions/54556862/is-stdregex-safe-for-user-defined-expressions", "closed_reason": "Duplicate", "title": "Is std::regex safe for user-defined expressions?", "body": "<p>Is it considered safe to use user-defined expressions with <code>std::regex</code> (eg for a server-side search)? Does the standard library make any guarantees about the safety of broken expressions?</p>\n"}, {"tags": ["c++", "doxygen"], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user10995546"}, "edited": false, "score": 0, "creation_date": 1549466508, "post_id": 54556877, "comment_id": 95913516, "body": "/home/user/cpplab4/list.cpp:43: warning: documented symbol `node * CS170::list::make_node&#39; was not declared or defined."}, {"owner": {"user_type": "does_not_exist", "display_name": "user10995546"}, "edited": false, "score": 0, "creation_date": 1549466971, "post_id": 54556877, "comment_id": 95913820, "body": "Well, this is the warning i got:"}, {"owner": {"user_type": "does_not_exist", "display_name": "user10995546"}, "edited": false, "score": 0, "creation_date": 1549466977, "post_id": 54556877, "comment_id": 95913823, "body": "/home/user/cpplab4/list.cpp:46: warning: documented symbol `node * CS170::list::make_node&#39; was not declared or defined."}, {"owner": {"user_type": "does_not_exist", "display_name": "user10995546"}, "edited": false, "score": 0, "creation_date": 1549466998, "post_id": 54556877, "comment_id": 95913837, "body": "after removing the class thing"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1549467047, "post_id": 54556877, "comment_id": 95913872, "body": "You already pasted that. I&#39;m asking you to <i>show us</i> what you did, when you &quot;removed the class thing&quot;. You can use a pastebin website for this for now."}, {"owner": {"user_type": "does_not_exist", "display_name": "user10995546"}, "edited": false, "score": 0, "creation_date": 1549467097, "post_id": 54556877, "comment_id": 95913903, "body": "and now the warning for some reason is in my codes now. /home/user/cpplab4/list.cpp:46 is giving warning on &#39;node *list::make_node(int val)&#39;"}, {"owner": {"user_type": "does_not_exist", "display_name": "user10995546"}, "edited": false, "score": 0, "creation_date": 1549467191, "post_id": 54556877, "comment_id": 95913967, "body": "/***********************************************************&zwnj;&#8203;*******************/  /*! * \\brief Allocate memory and set members. * \\param val to be placed in new node     * \\return return node   */ /***********************************************************&zwnj;&#8203;*******************/  \tnode *list::make_node(int val) \t{ \t\tnode *pnode = new node; \t\tpnode-&gt;value = val; \t\tpnode-&gt;next = nullptr;   \t\treturn pnode; \t}"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1549468384, "post_id": 54556877, "comment_id": 95914865, "body": "Pastebin is really not difficult to use. You paste in your code, then tell us the URL. Please give that a try."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1549468402, "post_id": 54556877, "comment_id": 95914878, "body": "I can&#39;t explain why you&#39;re still getting that warning."}, {"owner": {"user_type": "does_not_exist", "display_name": "user10995546"}, "edited": false, "score": 0, "creation_date": 1549468554, "post_id": 54556877, "comment_id": 95914971, "body": "I&#39;ll try and use pastebin hold on"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1549468912, "post_id": 54556877, "comment_id": 95915194, "body": "You still have <code>\\class CS150</code> in there. What are you trying to achieve with that line?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user10995546"}, "edited": false, "score": 0, "creation_date": 1549469076, "post_id": 54556877, "comment_id": 95915289, "body": "Actually i do not have a clue as well lol. Was just doing a test, but i did remove it before and it still gives me errors man. didn&#39;t help at all."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1549469199, "post_id": 54556877, "comment_id": 95915365, "body": "I don&#39;t believe that. Without mentioning <code>CS150</code> in your Doxygen markup, there&#39;s no reason for it to mention &quot;CS150&quot; back to you. Please study the Doxygen documentation carefully to find out what each statement does, rather than just guessing. Good luck!"}, {"owner": {"user_type": "does_not_exist", "display_name": "user10995546"}, "edited": false, "score": 0, "creation_date": 1549469357, "post_id": 54556877, "comment_id": 95915458, "body": "Aight, will do that. Thanks for your help nevertheless!"}], "tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": true, "score": 3, "last_activity_date": 1549466271, "creation_date": 1549466271, "answer_id": 54556877, "question_id": 54556760, "link": "https://stackoverflow.com/questions/54556760/doxygen-warnings/54556877#54556877", "title": "Doxygen warnings", "body": "<p>Your comments say the following:</p>\n\n<blockquote>\n  <p><code>\\class CS150</code></p>\n</blockquote>\n\n<p>\"There is a class called <code>CS150</code>.\"</p>\n\n<blockquote>\n  <p><code>\\class CS150::list()</code></p>\n</blockquote>\n\n<p>\"There is a class called <code>CS150::list()</code>.\".</p>\n\n<blockquote>\n  <p><code>\\class CS150::node *list::make_node(int val)</code></p>\n</blockquote>\n\n<p>\"There is a class called <code>CS150::node *list::make_node(int val)</code>\".</p>\n\n<p>None of these statements is true, and it's really confusing Doxygen. It looks like you are trying to document <em>everything</em> (including a namespace?) with the command <code>\\class</code>. But that command is for, well, classes.</p>\n\n<p>I think you probably meant <code>\\class list</code> in that first block (though this doesn't appear to serve any purpose), and all the others should be removed: Doxygen knows which function you're documenting and what it's called. There's no need and no way to tell it that.</p>\n\n<p>So, for example, just:</p>\n\n<pre><code>/*!\n * \\brief Allocate memory and set members.\n * \\param val to be placed in new node    \n * \\return return node  \n */\nnode *list::make_node(int val)\n{\n    node *pnode = new node;\n    pnode-&gt;value = val;\n    pnode-&gt;next = nullptr;  \n    return pnode;\n}\n</code></pre>\n\n<p>I recommend you go through the Doxygen documentation again for ideas on how best to use it.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user10995546"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 456, "favorite_count": 0, "accepted_answer_id": 54556877, "answer_count": 1, "score": 0, "last_activity_date": 1549466271, "creation_date": 1549465893, "question_id": 54556760, "link": "https://stackoverflow.com/questions/54556760/doxygen-warnings", "title": "Doxygen warnings", "body": "<p>My compiler has issued warnings when i try to use doxygen with my cpp file. See below. What must i change to suit the doxygen? Your help is much appreciated.</p>\n\n<p>/home/user/cpplab4/list.cpp:33: warning: documented symbol `CS150::list::list' was not declared or defined.</p>\n\n<p>/home/user/cpplab4/list.cpp:46: warning: documented symbol `node * CS150::list::make_node' was not declared or defined.</p>\n\n<pre><code>  /****************************************************************/ \n  /*!\n  * \\class CS150\n  * \\brief namespace\n  * \n  */\n  /****************************************************************/ \n\n   /**********************************************************************/\n   /*!\n\n   * \\class CS150::list() \n\n   * \\brief initialise the_list, constructor \n\n   */\n   /**********************************************************************/ \nlist::list() \n{  \n    the_list = nullptr;\n    list_size =0;\n}\n   /**********************************************************************/\n   /*!\n   * \\class CS150::node *list::make_node(int val)\n   * \\brief Allocate memory and set members.\n   * \\param val to be placed in new node    \n   * \\return return node  \n   */\n    /*********************************************************************/\n\nnode *list::make_node(int val)\n{\n    node *pnode = new node;\n    pnode-&gt;value = val;\n    pnode-&gt;next = nullptr;  \n    return pnode;\n}\n</code></pre>\n"}, {"tags": ["c++", "oop"], "comments": [{"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 2, "creation_date": 1549465563, "post_id": 54556616, "comment_id": 95912922, "body": "Please provide <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. What are <code>ListElem</code>, and <code>LinkedList</code> (how are they defined)?"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 1, "creation_date": 1549466017, "post_id": 54556616, "comment_id": 95913219, "body": "<b><i>cause i cant figure it out</i></b> Please add your broken attempt + minimal example."}], "answers": [{"comments": [{"owner": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 0, "creation_date": 1549470442, "post_id": 54557730, "comment_id": 95916110, "body": "Don&#39;t use global variables."}], "tags": [], "owner": {"reputation": 391, "user_id": 10991662, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gdDbc.jpg?s=128&g=1", "display_name": "J.Z", "link": "https://stackoverflow.com/users/10991662/j-z"}, "is_accepted": false, "score": 0, "last_activity_date": 1549470787, "last_edit_date": 1549470787, "creation_date": 1549468839, "answer_id": 54557730, "question_id": 54556616, "link": "https://stackoverflow.com/questions/54556616/remove-node-from-linked-list-received-as-parameter-c/54557730#54557730", "title": "Remove node from linked list received as parameter C++", "body": "<pre><code>void LinkedList: : removeAt(LinkedList *ll, ListElem *arg) {\n  if (!ll-&gt;head) return; // ll is your linked list object\n  if (ll-&gt;head == arg) {\n    struct ListElem *head = ll-&gt;head;\n    ll-&gt;head = head-&gt;next;\n    delete head;\n    return;\n  }\n  struct ListElem *current = ll-&gt;head;\n  while (current-&gt;next) {\n    if (current-&gt;next == arg) {\n      struct ListElem *next = current-&gt;next;\n      current-&gt;next = next-&gt;next;\n      delete next;\n      break;\n    }\n    current = current-&gt;next;\n  }\n}\n\n</code></pre>\n\n<p>Updated according to the comments. Thanks!</p>\n"}], "owner": {"reputation": 1, "user_id": 10651495, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/80fbbe48d631e952fcebd69ff2812577?s=128&d=identicon&r=PG&f=1", "display_name": "Teofilus papilus", "link": "https://stackoverflow.com/users/10651495/teofilus-papilus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 70, "favorite_count": 0, "answer_count": 1, "score": -5, "last_activity_date": 1549470787, "creation_date": 1549465458, "question_id": 54556616, "link": "https://stackoverflow.com/questions/54556616/remove-node-from-linked-list-received-as-parameter-c", "title": "Remove node from linked list received as parameter C++", "body": "<p>I have a class LinkedList and i want to write a method that deletes the node received as a parameter in the method as a pointer.</p>\n\n<p>The method structure should look like this:</p>\n\n<pre><code>void LinkedList: : removeAt(ListElem *arg);\n</code></pre>\n\n<p>how do i write this method? cause i cant figure it out</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 3338, "user_id": 1284353, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/PZ8tK.jpg?s=128&g=1", "display_name": "Kirby", "link": "https://stackoverflow.com/users/1284353/kirby"}, "edited": false, "score": 0, "creation_date": 1549465472, "post_id": 54556517, "comment_id": 95912859, "body": "Are you looking for something like <code>nm</code>? <a href=\"https://www.mkssoftware.com/docs/man1/nm.1.asp\" rel=\"nofollow noreferrer\">mkssoftware.com/docs/man1/nm.1.asp</a>"}, {"owner": {"reputation": 43, "user_id": 8564030, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-rYFJIpdFEHM/AAAAAAAAAAI/AAAAAAAAAAc/QseRe56CgVI/photo.jpg?sz=128", "display_name": "Praveen Kumar Rana", "link": "https://stackoverflow.com/users/8564030/praveen-kumar-rana"}, "reply_to_user": {"reputation": 3338, "user_id": 1284353, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/PZ8tK.jpg?s=128&g=1", "display_name": "Kirby", "link": "https://stackoverflow.com/users/1284353/kirby"}, "edited": false, "score": 0, "creation_date": 1549465609, "post_id": 54556517, "comment_id": 95912949, "body": "Yep. Got it. Thanks"}, {"owner": {"reputation": 144839, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1549469776, "post_id": 54556517, "comment_id": 95915692, "body": "See also <code>c++filt</code>"}], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 8564030, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-rYFJIpdFEHM/AAAAAAAAAAI/AAAAAAAAAAc/QseRe56CgVI/photo.jpg?sz=128", "display_name": "Praveen Kumar Rana", "link": "https://stackoverflow.com/users/8564030/praveen-kumar-rana"}, "edited": false, "score": 0, "creation_date": 1549465767, "post_id": 54556620, "comment_id": 95913048, "body": "Got it . Thanks"}], "tags": [], "owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "is_accepted": true, "score": 1, "last_activity_date": 1549465836, "last_edit_date": 1549465836, "creation_date": 1549465461, "answer_id": 54556620, "question_id": 54556517, "link": "https://stackoverflow.com/questions/54556517/how-to-see-mangled-name-of-c-function-in-mac-terminal/54556620#54556620", "title": "How to see mangled name of C++ function in Mac Terminal", "body": "<p>If you don't have <code>binutils</code> installed, install that package.\nThis is probably a good place to start: <a href=\"http://macappstore.org/binutils/\" rel=\"nofollow noreferrer\">Install binutils on Mac OSX</a></p>\n\n<p>Then <code>nm a.out</code> should show you the mangled names and <code>nm -C a.out</code> should show you the demangled names.</p>\n"}], "owner": {"reputation": 43, "user_id": 8564030, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-rYFJIpdFEHM/AAAAAAAAAAI/AAAAAAAAAAc/QseRe56CgVI/photo.jpg?sz=128", "display_name": "Praveen Kumar Rana", "link": "https://stackoverflow.com/users/8564030/praveen-kumar-rana"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "accepted_answer_id": 54556620, "answer_count": 1, "score": 0, "last_activity_date": 1549465836, "creation_date": 1549465116, "question_id": 54556517, "link": "https://stackoverflow.com/questions/54556517/how-to-see-mangled-name-of-c-function-in-mac-terminal", "title": "How to see mangled name of C++ function in Mac Terminal", "body": "<p>I want to see the mangled name of this code. How should I do it.</p>\n\n<p>I have tried this by compiling the code using G++ compiler and seeing output as ./a.out but nothing is printed. I have read about dumpbin.exe in windows but I do not have any idea about Mac.</p>\n\n<p>nameMangling.cpp</p>\n\n<pre><code>// This demonstrate the nameMangling of function to make their signature.\n\nint square(int x){\n    return x*x;\n}\n\ndouble square(double y){\n    return y*y;\n}\n\nvoid nothing1(int a, float b, char c, int &amp;d){\n\n}\n\nvoid nothing2(char a, int b, float &amp;c, double &amp;d){\n\n}\n\nint main(){\n    return 0; // Indicate successful termination\n}\n</code></pre>\n\n<p>The expected result is<br>\n__Z6squarei<br>\n__Z6squared<br>\n__Z8nothing1ifcRi<br>\n__Z8nothing2ciRfRd<br>\n_main</p>\n\n<p>Any light on my problem will be Appreciated. Thank You</p>\n"}, {"tags": ["c++", "set", "operator-overloading"], "comments": [{"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1549465617, "post_id": 54556428, "comment_id": 95912956, "body": "<i>which in my case would not distinguish between two nodes</i> -- Then <code>operator &lt;</code> does not follow a strict-weak-ordering, something most (if not all) uses of <code>operator &lt;</code> in the standard library requires.  For example, <code>std::sort</code> would have also failed to work, or would have bizarre behavior if you attempted to sort those entries."}, {"owner": {"reputation": 1002, "user_id": 10638608, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "dabljues", "link": "https://stackoverflow.com/users/10638608/dabljues"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1549465814, "post_id": 54556428, "comment_id": 95913079, "body": "Okay, you see the cases I need to cover. G+H for std::min_element and comparing by <code>. pos</code> for inserting to a set. Can I somehow make those both work?"}, {"owner": {"reputation": 1002, "user_id": 10638608, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "dabljues", "link": "https://stackoverflow.com/users/10638608/dabljues"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1549465983, "post_id": 54556428, "comment_id": 95913191, "body": "And by the way, I thought that <code>operator&lt;</code> should not distinguish two different objects, just say which one is less, by property"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1549466032, "post_id": 54556428, "comment_id": 95913230, "body": "It basically boils down to <a href=\"https://stackoverflow.com/questions/21842749/stdsort-comparing-elements-to-null/21843204#21843204\">this answer</a>.  Whatever the case, you can&#39;t have <code>a &lt; b</code> and at the same time <code>b &lt; a</code> for the same values of <code>a</code> and <code>b</code>.  If we had your entire code, don&#39;t be surprised if run under Visual Studio debug runtime, your code asserts with a failure when inserting into the set."}, {"owner": {"reputation": 1002, "user_id": 10638608, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "dabljues", "link": "https://stackoverflow.com/users/10638608/dabljues"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1549466626, "post_id": 54556428, "comment_id": 95913602, "body": "Right, but comparing by operator&lt; I made follows strict-weak-ordering. When inserting to a set I don&#39;t want to compare which is less, I want to compare equality, by different property (.pos). So there&#39;s no way to do that? And I have to write either min element or checking the existence by hand? And then if I would write a function to search for the minimum element, how would I write operator&lt; for comparing by <code>.pos</code>? I know I can <code>&lt;</code> two <code>QPoints</code> but that seems kinda stupid for the uniqueness check..."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1549466940, "post_id": 54556428, "comment_id": 95913803, "body": "I don&#39;t see where you are using <code>std::set</code>.   Second, I think you could have whittled this entire code down to a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, showing <code>std::set</code>, your class, your lambda or functor you&#39;re using to determine <code>&lt;</code>."}, {"owner": {"reputation": 1002, "user_id": 10638608, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "dabljues", "link": "https://stackoverflow.com/users/10638608/dabljues"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1549466999, "post_id": 54556428, "comment_id": 95913838, "body": "I tried before, the objects were not added to the set, so I switched to a vector. I&#39;m on a train without a compiler, but I will try to provide an example with a set"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1549467084, "post_id": 54556428, "comment_id": 95913890, "body": "Then we are shooting in the dark.  We have no idea what you really tried since we don&#39;t have the code.."}, {"owner": {"reputation": 1002, "user_id": 10638608, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "dabljues", "link": "https://stackoverflow.com/users/10638608/dabljues"}, "reply_to_user": {"reputation": 61409, "user_id": 485343, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e18b024a122df74275dd2c4486e8a2b4?s=128&d=identicon&r=PG", "display_name": "rustyx", "link": "https://stackoverflow.com/users/485343/rustyx"}, "edited": false, "score": 0, "creation_date": 1549468038, "post_id": 54556428, "comment_id": 95914584, "body": "I don&#39;t want to store duplicates @rustyx. I want the objects which are not duplicates (have a different property value - .pos property) to be added to the set, and not treated as duplicates. PaulMcKenzie I am just writing a quick example outside this project to show what I am trying to achieve"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1549468599, "post_id": 54556428, "comment_id": 95914996, "body": "@dabljues -- <code>std::set</code> has a <a href=\"https://en.cppreference.com/w/cpp/container/set\" rel=\"nofollow noreferrer\">second template argument</a>.  This is where you specify a custom comparitor (but still must follow a strict-weak-order).  Your code does not utilize this template parameter."}, {"owner": {"reputation": 20213, "user_id": 147845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e225ff5beb684088f5c9131d3979a18?s=128&d=identicon&r=PG", "display_name": "You", "link": "https://stackoverflow.com/users/147845/you"}, "edited": false, "score": 0, "creation_date": 1549468696, "post_id": 54556428, "comment_id": 95915060, "body": "@dabljues: With your <code>operator&lt;</code> and <code>a = {1, 2}; b = {2, 1}</code>, both <code>a &lt; b</code> and <code>b &lt; a</code> are false. Therefore, <code>std::set</code> considers them identical."}, {"owner": {"reputation": 1002, "user_id": 10638608, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "dabljues", "link": "https://stackoverflow.com/users/10638608/dabljues"}, "edited": false, "score": 0, "creation_date": 1549470855, "post_id": 54556428, "comment_id": 95916341, "body": "^You&#39;re right. But how can I fix it in my situation?"}], "answers": [{"comments": [{"owner": {"reputation": 1002, "user_id": 10638608, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "dabljues", "link": "https://stackoverflow.com/users/10638608/dabljues"}, "edited": false, "score": 0, "creation_date": 1549473074, "post_id": 54558872, "comment_id": 95917556, "body": "I don&#39;t think we understand each other. G and H may be mixed up. It doesn&#39;t matter. But if G+H on two nodes is equal, then they are considered equal and therefore the second one is not added to the set. But I want to distinguish them by <code>.pos</code> (coordinates). And doing that I still want to preserve the functionality of <code>std::min_element</code> which finds this lowest element by comparing G + H on both nodes"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "reply_to_user": {"reputation": 1002, "user_id": 10638608, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "dabljues", "link": "https://stackoverflow.com/users/10638608/dabljues"}, "edited": false, "score": 1, "creation_date": 1549473337, "post_id": 54558872, "comment_id": 95917711, "body": "@dabljues -- Then you need to write your <code>&lt;</code> so that it is unique, bottom line, whatever it takes (think outside the box).  Maybe multiply one of the values, maybe store the items in a pair (pairs have an available &lt;), whatever.  This is more of a logical issue than a C++ one."}, {"owner": {"reputation": 1002, "user_id": 10638608, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "dabljues", "link": "https://stackoverflow.com/users/10638608/dabljues"}, "edited": false, "score": 0, "creation_date": 1549474258, "post_id": 54558872, "comment_id": 95918209, "body": "Okay, I get it. By the way, is there a reason why sets use <code>&lt;</code> instead of <code>==</code> for checking uniqueness?"}, {"owner": {"reputation": 61409, "user_id": 485343, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e18b024a122df74275dd2c4486e8a2b4?s=128&d=identicon&r=PG", "display_name": "rustyx", "link": "https://stackoverflow.com/users/485343/rustyx"}, "edited": false, "score": 0, "creation_date": 1549483851, "post_id": 54558872, "comment_id": 95922497, "body": "It&#39;s how a set (binary tree) works. Also see my updated answer, hope it helps."}], "tags": [], "owner": {"reputation": 61409, "user_id": 485343, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e18b024a122df74275dd2c4486e8a2b4?s=128&d=identicon&r=PG", "display_name": "rustyx", "link": "https://stackoverflow.com/users/485343/rustyx"}, "is_accepted": true, "score": 2, "last_activity_date": 1549480538, "last_edit_date": 1549480538, "creation_date": 1549472548, "answer_id": 54558872, "question_id": 54556428, "link": "https://stackoverflow.com/questions/54556428/set-of-custom-class-objects-and-their-operator/54558872#54558872", "title": "Set of custom class objects and their &lt; operator", "body": "<blockquote>\n  <p><em>I thought it would use a <code>==</code> or <code>!=</code> operators</em></p>\n</blockquote>\n\n<p>No, <code>std::set</code> does not use operators  <code>==</code> and <code>!=</code>,\n<a href=\"https://en.cppreference.com/w/cpp/container/set\" rel=\"nofollow noreferrer\"><code>std::set</code></a> uses just one function, the comparison function (the second template argument, which defaults to <code>std::less&lt;T&gt;</code>).</p>\n\n<p>Uniqueness is based on the equivalence relation which is <em>derived</em> from applying the same comparison function twice: <code>!a&lt;b &amp;&amp; !b&lt;a</code>.</p>\n\n<p>It seems you don't really need uniqueness, in which case you can use <a href=\"https://en.cppreference.com/w/cpp/container/multiset\" rel=\"nofollow noreferrer\"><code>std::multiset</code></a> instead. It will maintain the order, but will not enforce uniqueness.</p>\n\n<blockquote>\n<pre><code>std::set&lt;node&gt; nodes;\n. . .\nauto min = (*std::min_element(nodes.begin(), nodes.end())).pos;\n</code></pre>\n</blockquote>\n\n<p><code>std::min_element</code> is always O(N). Using it on a <code>set</code> defeats the purpose of having a <code>set</code>.\nJust get the first element, which will be the smallest (according to the comparison function).</p>\n\n<pre><code>auto min = begin(nodes)-&gt;pos;\n</code></pre>\n"}], "owner": {"reputation": 1002, "user_id": 10638608, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "dabljues", "link": "https://stackoverflow.com/users/10638608/dabljues"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "accepted_answer_id": 54558872, "answer_count": 1, "score": 0, "last_activity_date": 1549480538, "creation_date": 1549464849, "last_edit_date": 1549468376, "question_id": 54556428, "link": "https://stackoverflow.com/questions/54556428/set-of-custom-class-objects-and-their-operator", "title": "Set of custom class objects and their &lt; operator", "body": "<p>I am trying to implement <code>A* algorithm</code> (with visualization in Qt). I've got this method:</p>\n\n<pre><code>result_path astar_algorithm::calculate(mapview* m_view)\n{\n    map_view = m_view;\n    auto closed_set = std::vector&lt;std::shared_ptr&lt;node&gt;&gt;();\n    auto start_node = std::make_shared&lt;node&gt;(_start);\n    auto open_set = std::vector&lt;std::shared_ptr&lt;node&gt;&gt;{start_node};\n    std::map&lt;node, node&gt; came_from;\n\n    std::shared_ptr&lt;node&gt; current;\n    while (!open_set.empty())\n    {\n        current = *std::min_element(open_set.begin(), open_set.end());\n        if (*current == _end)\n        {\n            // TODO: Reconstruct a result path!!!\n            break;\n        }\n        open_set.erase(std::find(open_set.begin(), open_set.end(), current));\n        closed_set.push_back(current);\n        auto neighbors = get_neighbors(*current);\n        for (auto&amp; neighbor : neighbors)\n        {\n            if (std::find_if(closed_set.begin(), closed_set.end(),\n                             [&amp;](std::shared_ptr&lt;node&gt; const&amp; p) { return *p == neighbor; }) !=\n                closed_set.end())\n                continue;\n\n            auto tentative_g_score = current-&gt;G + 1;\n\n            if (std::find_if(open_set.begin(), open_set.end(), [&amp;](std::shared_ptr&lt;node&gt; const&amp; p) {\n                    return *p == neighbor;\n                }) == open_set.end())\n            {\n                neighbor.G = tentative_g_score;\n                neighbor.H = heuristic_cost_estimate(neighbor.pos, _end);\n                neighbor.parent = current;\n                open_set.push_back(std::make_shared&lt;node&gt;(neighbor));\n            }\n            else if (tentative_g_score &lt; neighbor.G)\n            {\n                neighbor.parent = current;\n                neighbor.G = tentative_g_score;\n            }\n        }\n    }\n    auto result = result_path();\n    while (*current != *start_node)\n    {\n        result.path.push_back(current-&gt;pos);\n        current = current-&gt;parent;\n    }\n    result.path.push_back(start_node.pos);\n    std::reverse(result.path.begin(), result.path.end());\n    return result;\n}\n</code></pre>\n\n<p>It works, but I have a few problems:</p>\n\n<pre><code>if (std::find_if(closed_set.begin(), closed_set.end(),\n                             [&amp;](std::shared_ptr&lt;node&gt; const&amp; p) { return *p == neighbor; }) !=\n                closed_set.end())\n                continue;\n</code></pre>\n\n<p>This line checks if a <code>node</code> is present in an <code>std::vector</code> and if so, it continues the loop (then there is a second line similar to this, it just checks if node is not actually present in the vector). I guess the better way would be to store those nodes in a vector and then searching and further adding would be easier (cuz I just have to check if the <code>insert</code> succeeded).</p>\n\n<p>The problem is, afaik, to make this work I have to implement <code>&lt;</code> operator. And so I did. I also made <code>==</code> and <code>!=</code>:</p>\n\n<pre><code>class node\n{\npublic:\n    node() {}\n    node(const QPoint&amp; p) : pos(p) {}\n    bool operator == (const node&amp; o ) const { return pos == o.pos; }\n    bool operator == (const QPoint&amp; o ) const { return pos == o; }\n    bool operator != (const node&amp; o) const {return pos != o.pos; }\n    bool operator &lt;(const node&amp; o ) const { return G + H &lt; o.G + o.H; }\n    QPoint pos;\n    std::shared_ptr&lt;node&gt; parent;\n    int G = 0;\n    int H = 0;\n};\n</code></pre>\n\n<p>It works perfectly for the earlier search for <code>std::min_element</code> (it searches for a node with the lowest <code>F</code> value (<code>F=G+H</code>)), it uses <code>&lt;</code> operator. But then I tried to use a set, so those two vectors at the beginning of the method were set and when I wanted to just <code>insert</code> or even check if a node is already in a set and then <code>insert</code> I had a problem. Many of those <code>nodes</code> will have the same <code>G+H</code> value, as the maze which I used was kind of simple (i.e. a maze completely without terrains). I checked it under the debugger and the nodes with unique <code>.pos</code> values (<code>QPoint</code>) were not added to the set just like they weren't unique (but if the node had a different <code>G+H</code> value than any node in the set, it would be added). For the vector the same nodes of course work, cuz there are no checks made, I checked everything carefully under the debugger.</p>\n\n<p>I don't know if I am getting this wrong, but I thought it would use a <code>==</code> or <code>!=</code> operators but as seen in this answer: <a href=\"https://stackoverflow.com/a/15913966/10638608\">link</a>, it actually uses <code>&lt;</code> operator, which in my case would not distinguish between two nodes (cuz the unique part of each node is its position in the grid (node represents a box in a grid, which can represent a maze or smth similar))</p>\n\n<p>So, is there something I am doing wrong or am I actually getting this right, and the inserting (which checks if the element is unique) or checking if the element exists in a set uses <code>&lt;</code> operator and I cannot do anything about it? (cuz I would like to have my <code>&lt;</code> operator with comparing <code>G+H</code> and then I would like the searching/inserting to use the <code>==</code> operator to compare)</p>\n\n<p>This is the example that I wrote (I forgot I have Microsoft C++ Compiler from the command line - <code>cl.exe</code>)</p>\n\n<pre><code>#include &lt;algorithm&gt;\n#include &lt;iostream&gt;\n#include &lt;memory&gt;\n#include &lt;set&gt;\n\nclass Point\n{\npublic:\n    int _x, _y;\n    Point() : _x(0), _y(0) {}\n    Point(int x, int y) : _x(x), _y(y) {}\n    bool operator==(const Point&amp; p) const { return _x == p._x &amp;&amp; _y == p._y; }\n    bool operator!=(const Point&amp; p) const { return _x != p._x &amp;&amp; _y != p._y; }\n};\n\nclass node\n{\npublic:\n    node() {}\n    node(const Point&amp; p) : pos(p) {}\n    bool operator==(const node&amp; o) const { return pos == o.pos; }\n    bool operator==(const Point&amp; o) const { return pos == o; }\n    bool operator!=(const node&amp; o) const { return pos != o.pos; }\n    bool operator&lt;(const node&amp; o) const { return G + H &lt; o.G + o.H; }\n    Point pos;\n    std::shared_ptr&lt;node&gt; parent;\n    int G = 0;\n    int H = 0;\n};\n\nint main()\n{\n    node n1(Point(0, 0));\n    n1.G = 1;\n    n1.H = 1;\n    node n2(Point(1, 1));\n    n2.G = 2;\n    n2.H = 2;\n    node n3(Point(2, 2));\n    n3.G = 1;\n    n3.H = 1;\n    std::set&lt;node&gt; nodes;\n    nodes.insert(n1);\n    nodes.insert(n2);\n    nodes.insert(n3);\n    auto min = (*std::min_element(nodes.begin(), nodes.end())).pos;\n    std::cout &lt;&lt; min._x &lt;&lt; \" \" &lt;&lt; min._y &lt;&lt; '\\n';\n    std::cout &lt;&lt; nodes.size() &lt;&lt; '\\n';\n}\n\n&gt;main.exe\n0 0\n2\n</code></pre>\n\n<p><code>std::min_element</code> works, but those are 3 unique nodes for me (differet <code>.pos</code> values) so there should be 3 nodes in the set. And that's what I want to achieve</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1549464817, "post_id": 54556374, "comment_id": 95912456, "body": "This really depends on what <code>getObject</code> is and does (and returns!) as well as what <code>setComponent</code> is and does. Please read about <a href=\"http://stackoverflow.com/help/how-to-ask\">how to ask good questions</a>, as well as <a href=\"https://codeblog.jonskeet.uk/2012/11/24/stack-overflow-question-checklist/\" rel=\"nofollow noreferrer\">this question checklist</a>. Lastly learn how to create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1549464823, "post_id": 54556374, "comment_id": 95912462, "body": "&quot;best practise&quot; is to include a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> in your question ;)"}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1549464826, "post_id": 54556374, "comment_id": 95912463, "body": "You need to accompany your question with a proper <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. It&#39;s kinda unclear at the moment. Take the <a href=\"https://stackoverflow.com/tour\">tour</a> and consult the <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> in the <a href=\"https://stackoverflow.com/help\">help center</a>."}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1549464835, "post_id": 54556374, "comment_id": 95912468, "body": "It is very unclear what you have already and what you need. Do you just want to know how to implement <a href=\"https://stackoverflow.com/questions/27158812/does-this-code-from-the-c-programming-language-4th-edition-section-36-3-6-ha\">method chaining</a>?"}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 1, "creation_date": 1549464896, "post_id": 54556374, "comment_id": 95912500, "body": "Does your <code>getObject</code> return a reference to the object, opposed to the copy of it?"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1549464898, "post_id": 54556374, "comment_id": 95912502, "body": "As a possible hint (and educated <b><i>guess</i></b>), you might want to learn more about <i>references</i>."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1549464904, "post_id": 54556374, "comment_id": 95912510, "body": "We also had <a href=\"https://stackoverflow.com/questions/54554898/class-modify-via-set-get-methods\">this question</a> asked today, which feels kinda related to me."}, {"owner": {"reputation": 3, "user_id": 11023456, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a90f136901dc20188c71145f053f0a6?s=128&d=identicon&r=PG&f=1", "display_name": "CreatorOfMoon", "link": "https://stackoverflow.com/users/11023456/creatorofmoon"}, "edited": false, "score": 0, "creation_date": 1549465156, "post_id": 54556374, "comment_id": 95912670, "body": "Well i&#39;m sorry, i will edit it then to gives a better example."}, {"owner": {"reputation": 3338, "user_id": 1284353, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/PZ8tK.jpg?s=128&g=1", "display_name": "Kirby", "link": "https://stackoverflow.com/users/1284353/kirby"}, "edited": false, "score": 0, "creation_date": 1549465217, "post_id": 54556374, "comment_id": 95912714, "body": "Try including the definitions of <code>getObject</code>, <code>setObject</code>, <code>getComponent</code> and <code>setComponent</code>"}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 11023456, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a90f136901dc20188c71145f053f0a6?s=128&d=identicon&r=PG&f=1", "display_name": "CreatorOfMoon", "link": "https://stackoverflow.com/users/11023456/creatorofmoon"}, "edited": false, "score": 0, "creation_date": 1549466804, "post_id": 54556873, "comment_id": 95913713, "body": "I was sure it had something to do with that but i can&#39;t manage to find the answer.. thanks Senpa&#239; :D"}, {"owner": {"reputation": 3, "user_id": 11023456, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a90f136901dc20188c71145f053f0a6?s=128&d=identicon&r=PG&f=1", "display_name": "CreatorOfMoon", "link": "https://stackoverflow.com/users/11023456/creatorofmoon"}, "edited": false, "score": 0, "creation_date": 1549467588, "post_id": 54556873, "comment_id": 95914241, "body": "Also can you tell me the name of what you&#39;re doing, or a reference where i can find it ? i can&#39;t manage to find what should i type in the cpp file.."}, {"owner": {"reputation": 65491, "user_id": 986, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/0317df30e04cc468688b0f00adbb7037?s=128&d=identicon&r=PG", "display_name": "Mark Ingram", "link": "https://stackoverflow.com/users/986/mark-ingram"}, "reply_to_user": {"reputation": 3, "user_id": 11023456, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a90f136901dc20188c71145f053f0a6?s=128&d=identicon&r=PG&f=1", "display_name": "CreatorOfMoon", "link": "https://stackoverflow.com/users/11023456/creatorofmoon"}, "edited": false, "score": 0, "creation_date": 1549467823, "post_id": 54556873, "comment_id": 95914393, "body": "@CreatorOfMoon if you Google for &#39;C++ references&#39; you&#39;ll find plenty of stuff about it. Technical information is available here - <a href=\"https://en.cppreference.com/w/cpp/language/reference\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/language/reference</a> That&#39;s assuming you are interested in references, and not smart pointers (normally you&#39;ll use a mix of both)."}, {"owner": {"reputation": 3, "user_id": 11023456, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a90f136901dc20188c71145f053f0a6?s=128&d=identicon&r=PG&f=1", "display_name": "CreatorOfMoon", "link": "https://stackoverflow.com/users/11023456/creatorofmoon"}, "edited": false, "score": 0, "creation_date": 1549467940, "post_id": 54556873, "comment_id": 95914502, "body": "Thank you a lot, it&#39;s amazing, i learned C++ in school but i never heard of that O_o. Have a nice day"}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "reply_to_user": {"reputation": 3, "user_id": 11023456, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a90f136901dc20188c71145f053f0a6?s=128&d=identicon&r=PG&f=1", "display_name": "CreatorOfMoon", "link": "https://stackoverflow.com/users/11023456/creatorofmoon"}, "edited": false, "score": 0, "creation_date": 1549473302, "post_id": 54556873, "comment_id": 95917694, "body": "@CreatorOfMoon &quot;<i>i learned C++ in school but i never heard of that</i>&quot; Then, I doubt that you learned C++. Sure, the course might have been <i>called</i> C++, but you might have been actually taught &quot;C with classes&quot;."}, {"owner": {"reputation": 3, "user_id": 11023456, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a90f136901dc20188c71145f053f0a6?s=128&d=identicon&r=PG&f=1", "display_name": "CreatorOfMoon", "link": "https://stackoverflow.com/users/11023456/creatorofmoon"}, "reply_to_user": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1549528857, "post_id": 54556873, "comment_id": 95936438, "body": "@AlgirdasPreid\u017eius Ahah, you&#39;re probably right !"}], "tags": [], "owner": {"reputation": 65491, "user_id": 986, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/0317df30e04cc468688b0f00adbb7037?s=128&d=identicon&r=PG", "display_name": "Mark Ingram", "link": "https://stackoverflow.com/users/986/mark-ingram"}, "is_accepted": true, "score": 0, "last_activity_date": 1549466561, "last_edit_date": 1549466561, "creation_date": 1549466254, "answer_id": 54556873, "question_id": 54556374, "link": "https://stackoverflow.com/questions/54556374/how-to-make-that-objet-getsobject-setssobject/54556873#54556873", "title": "How to make that : Objet.getsObject().setssObject()", "body": "<p>The problem is that <code>BigObject.getObject()</code> returns an instance, which creates a copy of the object. So when you call <code>setComponent</code> you are actually setting it onto a copy of the object, which is why when you attempt to print it out, you don't see what you're expecting. You need to read up on references and pointers (preferably the smart type).</p>\n\n<p>You could change the definition of <code>getObject</code> to return a reference easily enough:</p>\n\n<pre><code>class BigObject\n{\npublic:\n    Object&amp; getObject();\n    const Object&amp; getObject() const;\n    void setObject(const Object &amp;other);\n};\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 11023456, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a90f136901dc20188c71145f053f0a6?s=128&d=identicon&r=PG&f=1", "display_name": "CreatorOfMoon", "link": "https://stackoverflow.com/users/11023456/creatorofmoon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "closed_date": 1549469423, "accepted_answer_id": 54556873, "answer_count": 1, "score": 0, "last_activity_date": 1549466962, "creation_date": 1549464677, "last_edit_date": 1549466638, "question_id": 54556374, "link": "https://stackoverflow.com/questions/54556374/how-to-make-that-objet-getsobject-setssobject", "closed_reason": "Duplicate", "title": "How to make that : Objet.getsObject().setssObject()", "body": "<p>This is my first question on this forum, and i expect this will not be a dummy one.</p>\n\n<p>I searched the answer everywhere but can't find it.\nFeel free to redirect me if the question is already answered somewhere.</p>\n\n<p>How can i set a component of an object, into a bigger object ?</p>\n\n<p>EDIT : </p>\n\n<p>I will make a proper example if it's unclear, </p>\n\n<p>BigObject.h</p>\n\n<pre><code>#include \"Object.h\"\nClass BigObject {\nprivate : \n Object object\n int number\npublic \nBigObject(Object,int);\nObject get_object();\nvoid set_object(Object);\nint get_number()\nvoid set_number(int);\n}\n</code></pre>\n\n<p>BigObject.cpp</p>\n\n<pre><code>#include \"BigObject.cpp\" \nBigObject::BigObject(Object a,int b){\nset_Object(a); \nset_number(b);\n};\nObject BigObject::get_object(){ return this-&gt;object; };\nvoid BigObject::set_object(Object a){ this-&gt;object = a};\nint BigObject::get_number(){return this-&gt;number};\nvoid BigObject::set_number(int b){this-&gt;number = b};\n</code></pre>\n\n<p>Object.h</p>\n\n<pre><code>#include &lt;string&gt;\nClass Object {\n    private : \n     int bidule;\n     std::string machin;\n    public :\n    Object(int,std::string);\n    int get_int();\n    void set_int(int);\n    std::string get_string()\n    void set_string(std::string);\n    }\n</code></pre>\n\n<p>Object.cpp</p>\n\n<pre><code>#include \"Object.h\"\nusing namespace std;\nObject::Object(int a,string b){\nset_int(a);\nset_string(b);\n};\nint Object::get_int(){return this-&gt;bidule};\nvoid Object::set_int(int a){this-&gt;bidule = a};\nstring Object::get_string(){return this-&gt;machin};\nvoid Object::set_string(string a){ this-&gt;machin = a};\n</code></pre>\n\n<p>question :</p>\n\n<p>This does not work \nif i do : </p>\n\n<pre><code>BigObject.getObject().set_string(\"Foo\");\n</code></pre>\n\n<p>It is not saved</p>\n\n<pre><code>cout &lt;&lt; BigObject.getObject().get_string() &lt;&lt; endl;\n</code></pre>\n\n<p>Doesn\"t give foo.\nWhy ?\nHow can i save it in my Big Object ?</p>\n"}, {"tags": ["c++", "visual-studio-2017", "builder", "migrating"], "comments": [{"owner": {"reputation": 158803, "user_id": 246342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8ba0aea3f521082f18dd7c186e7d4c3?s=128&d=identicon&r=PG", "display_name": "Alex K.", "link": "https://stackoverflow.com/users/246342/alex-k"}, "edited": false, "score": 0, "creation_date": 1549464785, "post_id": 54556109, "comment_id": 95912438, "body": "This is a fairly incomprehensible wall of text I&#39;m afraid.  Perhaps the best thing to do would be to post the smallest reproducible test case in VS2017 that exhibits the difference you see between release/dbg versions and go from there.  Switching compilers in the hope of fixing an unknown issue is unlikely to work out well."}, {"owner": {"reputation": 1, "user_id": 10802724, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ac7709921186b3f41ebfe3e5c7425bd?s=128&d=identicon&r=PG&f=1", "display_name": "Ton Epskamp", "link": "https://stackoverflow.com/users/10802724/ton-epskamp"}, "reply_to_user": {"reputation": 158803, "user_id": 246342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8ba0aea3f521082f18dd7c186e7d4c3?s=128&d=identicon&r=PG", "display_name": "Alex K.", "link": "https://stackoverflow.com/users/246342/alex-k"}, "edited": false, "score": 0, "creation_date": 1552383748, "post_id": 54556109, "comment_id": 96978145, "body": "Dear Alex K., I am sorry for the big text from Wordpad loosing its format. I would like to send you my text in another way. My email is a.epskamp@ziggo.nl. If you want to help me contact me so I can send my text to you again! I am a kind of desparate!"}], "owner": {"reputation": 1, "user_id": 10802724, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ac7709921186b3f41ebfe3e5c7425bd?s=128&d=identicon&r=PG&f=1", "display_name": "Ton Epskamp", "link": "https://stackoverflow.com/users/10802724/ton-epskamp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 108, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1549463953, "creation_date": 1549463953, "question_id": 54556109, "link": "https://stackoverflow.com/questions/54556109/migrating-a-vs-2017-project-to-embarcadero", "title": "Migrating a VS 2017 project to Embarcadero", "body": "<p>Dear Embarcadero users,</p>\n\n<p>I am trying to migrate my VS 2017 project to Embarcadero but so far invain. You should link to \"<a href=\"https://social.msdn.microsoft.com/Forums/vstudio/en-US/607c7811-6c85-45f5-afd7-eb74c0f55d31/unable-to-compile-a-release-version-on-visual-studio-2017?forum=vssetup#bbe96e62-7a42-4501-9565-0a661165ac5a\" rel=\"nofollow noreferrer\">https://social.msdn.microsoft.com/Forums/vstudio/en-US/607c7811-6c85-45f5-afd7-eb74c0f55d31/unable-to-compile-a-release-version-on-visual-studio-2017?forum=vssetup#bbe96e62-7a42-4501-9565-0a661165ac5a</a>\" to understand why I wanted to migrate to Embarcadero. According to Darran Rowe I succeeded in my debug built by Visual Studio's compiler's zero initializing of (not [properly] initialized )local variables. My release built succeeded also but it failed my (always executed )test by solving 6.000 mathematical highschool(+) exercises. Darran Rowe stated that the code's behaviour will be random in a release built. So wrong solutions and even runtime errors will be abundant. BUT I CAN'T DEBUG THIS RELEASE BUILT. So I tried Embarcadero and succeeded in compiling error free a debug built  but received the next message in the end when linking:\n1.[ilink32 Error] Error: Unresolved external '_wmain' referenced from C:\\PROGRAM FILES (X86)\\EMBARCADERO\\STUDIO\\19.0\\LIB\\WIN32\\RELEASE\\C0X32W.OBJ\n2.[ilink32 Error] Error: Unresolved external 'HtmlHelpW' referenced from F:\\BORLAND\\LST\\WIN32\\DEBUG\\LST_MAIN.OBJ\n3.[ilink32 Error] Error: Unable to perform link\nThese errors prevented me from a successful building of course! The code I compiled was in VS 2017 sufficient to run my program. It is without MFC, SDI and MDI completely! So I created all windows, menu's, toolbars and so on! Of course I can't exactly know what C0C32W.OBJ is but it might be a precompiled source/include code file. I checked of course a few samples and the only common thing I detected were some lines with: Appplication->Initialize() and Application->Run() and both of them missing in my VS 2017 [w]WinMain() function.\n1. The Embarcadero linker seems to suspect an MSDOS main() function but I intended a Windows [w]WinMain() function! I don't know how to convince the linker my attempt should be concerning a Windows project! I detected of course the \"WIN32\\RELEASE\\\" part of the path to  C0X32W.OBJ!\n2. My code is still containing Visual Studio's call to the Windows API HtmlHelp()!\n3. Of course the Embarcadero linker will stop trying to link. And Embarcadero will remain failing to help me to create an Embarcadero executable! That will possibly leave my question \"Will it be possible to migrate a VS program to Embarcadero?\" unsolved, neither confirmed nor  denied! WHO MIGHT HELP ME?\nPerhaps Embarcadero is also applying this same Microsoft idea about zero initializing of uninitialized/improperly initialized local variables(in a debug built) but I don't expect so and it would amaze me! But if so please tell me so I could finish my queste! Else I expect only the MainWindow might be a problem in an Embarcadero executable! There might even be more than one of them: my own and Embarcadero's MainWindow!</p>\n\n<p>Ton Epskamp.</p>\n"}, {"tags": ["c++", "iterator", "stdmap"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1549464023, "post_id": 54556071, "comment_id": 95911948, "body": "What do you want to have happen if the class is copied?  How does the element get removed after an object is destroyed?  Do the vectors in the map grow/shrink?"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1549464026, "post_id": 54556071, "comment_id": 95911952, "body": "Have you measured and profiled to see that accessing the map the &quot;natural&quot; way (using <code>my_list[key]</code>) is really a bottleneck? What is the <i>real</i> problem that you&#39;re actually trying to solve?"}, {"owner": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "edited": false, "score": 0, "creation_date": 1549464422, "post_id": 54556071, "comment_id": 95912202, "body": "Tangentially related, since you are asking about efficiency: <code>std::unordered_map</code> is generally faster than <code>std::map</code>, <i>O(n)</i> instead of <i>O(n log n)</i> for most operations."}, {"owner": {"reputation": 62, "user_id": 9009162, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-zZHAdbJqLqg/AAAAAAAAAAI/AAAAAAAAAFU/s7tLY6RnHPY/photo.jpg?sz=128", "display_name": "Ethan Smith", "link": "https://stackoverflow.com/users/9009162/ethan-smith"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1549466368, "post_id": 54556071, "comment_id": 95913433, "body": "@NathanOliver I didn&#39;t think about the class being copied, thank you for pointing that out! and the destructor is going to take care of removing the elements from the vector. The vectors in the map will grow and shrink."}, {"owner": {"reputation": 62, "user_id": 9009162, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-zZHAdbJqLqg/AAAAAAAAAAI/AAAAAAAAAFU/s7tLY6RnHPY/photo.jpg?sz=128", "display_name": "Ethan Smith", "link": "https://stackoverflow.com/users/9009162/ethan-smith"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1549466498, "post_id": 54556071, "comment_id": 95913514, "body": "@Someprogrammerdude I haven&#39;t done any measuring or tests. I&#39;m not necessarily trying to solve a problem, I&#39;m just trying to learn and gain insight."}], "answers": [{"comments": [{"owner": {"reputation": 2289, "user_id": 2356414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dff4a2241e2dcfc50615e4b7c709bd17?s=128&d=identicon&r=PG", "display_name": "KABoissonneault", "link": "https://stackoverflow.com/users/2356414/kaboissonneault"}, "edited": false, "score": 0, "creation_date": 1549464955, "post_id": 54556125, "comment_id": 95912545, "body": "Accord to the Iterator Invalidation table in <a href=\"https://en.cppreference.com/w/cpp/container\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/container</a>, iterators of associative containers remain valid after insertion, no matter what."}, {"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "reply_to_user": {"reputation": 2289, "user_id": 2356414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dff4a2241e2dcfc50615e4b7c709bd17?s=128&d=identicon&r=PG", "display_name": "KABoissonneault", "link": "https://stackoverflow.com/users/2356414/kaboissonneault"}, "edited": false, "score": 0, "creation_date": 1549465003, "post_id": 54556125, "comment_id": 95912576, "body": "Easiest, maybe not the best indeed. Added the note."}, {"owner": {"reputation": 2289, "user_id": 2356414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dff4a2241e2dcfc50615e4b7c709bd17?s=128&d=identicon&r=PG", "display_name": "KABoissonneault", "link": "https://stackoverflow.com/users/2356414/kaboissonneault"}, "edited": false, "score": 0, "creation_date": 1549465642, "post_id": 54556125, "comment_id": 95912982, "body": "There&#39;s also no requirement that the mapped type of an associative container be copyable or moveable, which means the vectors are not going to be copied or moved after creation. The iterators will always remain valid. Note that vector iterators remain valid even if the vectors <i>were</i> moved"}], "tags": [], "owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "is_accepted": false, "score": 0, "last_activity_date": 1549465030, "last_edit_date": 1549465030, "creation_date": 1549464002, "answer_id": 54556125, "question_id": 54556071, "link": "https://stackoverflow.com/questions/54556071/what-is-the-most-efficient-way-to-access-elements-in-an-stdmap/54556125#54556125", "title": "What is the Most Efficient Way to Access Elements in an std::map?", "body": "<p>You cannot store an iterator to a vector in <code>my_list</code> if the size of <code>my_list</code> changes (except if you reserve everything before).</p>\n\n<p>The easiest is to store the key and then the index in the vector, assuming that you are only pushing back new elements and never removing old ones. The best would be the iterator in the map with the index.</p>\n"}, {"tags": [], "owner": {"reputation": 9551, "user_id": 9837301, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9414V.png?s=128&g=1", "display_name": "JaMiT", "link": "https://stackoverflow.com/users/9837301/jamit"}, "is_accepted": true, "score": 0, "last_activity_date": 1549471867, "creation_date": 1549471867, "answer_id": 54558674, "question_id": 54556071, "link": "https://stackoverflow.com/questions/54556071/what-is-the-most-efficient-way-to-access-elements-in-an-stdmap/54558674#54558674", "title": "What is the Most Efficient Way to Access Elements in an std::map?", "body": "<p>The recommended way is to write code that is correct, easy to understand, and makes sense. As for efficiency:</p>\n\n<ul>\n<li>Storing an iterator of a <code>vector</code> is a bad idea if the <code>vector</code> can grow, as <a href=\"https://en.cppreference.com/w/cpp/container/vector/insert\" rel=\"nofollow noreferrer\"><code>vector::insert</code></a> can <strong>invalid</strong>ate iterators.</li>\n<li><p>Storing an index into a <code>vector</code> (if that is an option -- how can these vectors change?) allows an element to be obtained in <strong>O(1)</strong> time, but in your case you still need to find the vector.</p></li>\n<li><p>Storing an iterator of a <code>map</code> would allow you to find the vector in <strong>O(1)</strong> time, and this iterator remains valid after the <code>map</code> is modified (unless you remove the entry to which the iterator points).</p>\n\n<ul>\n<li>Storing a reference to the <code>vector</code> within the <code>map</code> is similar to using an iterator, and may lead to more readable code.</li>\n</ul></li>\n<li>Storing the key and using <a href=\"https://en.cppreference.com/w/cpp/container/map/find\" rel=\"nofollow noreferrer\"><code>map::find</code></a> would allow you to find the vector in <strong>O(lg n)</strong> time. This approach can handle the case where the vector you are looking for has been removed from the <code>map</code>.</li>\n</ul>\n\n<p>So the <strong>safest approach</strong> is to store the key and index, and write code to handle the cases where the element cannot be found. But.... <em>Is that a thing that should be able to happen?</em> Do you want to allow your object's element to be removed by someone else (presumably another object of the same type)? Probably not, since each object is supposed to \"correspond to an element\". Is this a problem with your design?</p>\n\n<p><strong>If I was doing this</strong>, I probably would want to ensure that my object's element could not be rudely taken away. One way to do this is to use <a href=\"https://en.cppreference.com/w/cpp/memory/shared_ptr\" rel=\"nofollow noreferrer\">shared pointers</a>. Instead of storing <code>std::vector&lt;another_type&gt;</code> in the <code>map</code>, I might consider storing <code>std::vector&lt;std::shared_ptr&lt;another_type&gt;&gt;</code>. Depending on what is supposed to happen upon object destruction, I might change that <code>shared_ptr</code> to <code>weak_ptr</code> so that the static container does not maintain data for objects that no longer exist. In either case, each object could maintain its own <code>shared_ptr</code> to its element. This allows fast access to the element and ensures that the element will not be destroyed before the object is.</p>\n\n<p>Of course, the most desirable approach would depend on the reason you need to store these elements in a static container.</p>\n"}], "owner": {"reputation": 62, "user_id": 9009162, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-zZHAdbJqLqg/AAAAAAAAAAI/AAAAAAAAAFU/s7tLY6RnHPY/photo.jpg?sz=128", "display_name": "Ethan Smith", "link": "https://stackoverflow.com/users/9009162/ethan-smith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 372, "favorite_count": 0, "accepted_answer_id": 54558674, "answer_count": 2, "score": 0, "last_activity_date": 1549471867, "creation_date": 1549463843, "question_id": 54556071, "link": "https://stackoverflow.com/questions/54556071/what-is-the-most-efficient-way-to-access-elements-in-an-stdmap", "title": "What is the Most Efficient Way to Access Elements in an std::map?", "body": "<p>I have an <code>std::map&lt;some_type, std::vector&lt;another_type&gt;&gt;</code> as a static variable in a class. I want an object of said class to correspond to an element in the vector of the map. My immediate thought was to just use store an iterator to both the vector and the map, but I also thought about storing a copy of the key, so that I could use <code>map::find</code> to look up the the value associated with it. Which way is recommended or more efficient?  </p>\n\n<p><strong>code</strong>:</p>\n\n<pre><code>class example_class\n{\nprivate:\n    static std::map&lt;some_type, std::vector&lt;another_type&gt;&gt; my_list;\n\n    some_type::iterator map_it;\n\n    // I could either use this\n    std::vector&lt;another_type&gt;::iterator location_in_vector_it;\n\n    // or this\n    some_type copy_of_key;\n\npublic:\n    // the constructor creates a new element, or adds the value to the end\n    // of the vector in the preexisting element.\n    example_class(key, val);\n};\n</code></pre>\n"}, {"tags": ["c++", "templates", "downcast"], "answers": [{"tags": [], "owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": true, "score": 3, "last_activity_date": 1549464375, "creation_date": 1549464375, "answer_id": 54556254, "question_id": 54556067, "link": "https://stackoverflow.com/questions/54556067/downcast-to-template-class/54556254#54556254", "title": "Downcast to template class", "body": "<p><code>objects[0]</code> is a <strong><em>pointer</em></strong> to an object. Your cast (never use C-style casts by the way) attempts to convert the <code>shared_ptr&lt;Wrapper&gt;</code> object to a <code>Father&lt;int&gt;</code> object. That's not possible, of course, since those two types are wholly unrelated.</p>\n\n<p>Dereference the pointer and downcast it to a reference (if you want polymorphism):</p>\n\n<pre><code>auto&amp; object = static_cast&lt;Father&lt;int&gt;&amp;&gt;(*objects[0]);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 37, "user_id": 11012312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9495f028e56701f8be6935ed156f5ac1?s=128&d=identicon&r=PG&f=1", "display_name": "CyberGK", "link": "https://stackoverflow.com/users/11012312/cybergk"}, "edited": false, "score": 0, "creation_date": 1549465831, "post_id": 54556556, "comment_id": 95913092, "body": "thanks for the reply :) I wanted vector of some types, not just int"}], "tags": [], "owner": {"reputation": 21, "user_id": 4390575, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e59b7d4b092462954c2b967e606ee5ec?s=128&d=identicon&r=PG&f=1", "display_name": "pscheid", "link": "https://stackoverflow.com/users/4390575/pscheid"}, "is_accepted": false, "score": 0, "last_activity_date": 1549465244, "creation_date": 1549465244, "answer_id": 54556556, "question_id": 54556067, "link": "https://stackoverflow.com/questions/54556067/downcast-to-template-class/54556556#54556556", "title": "Downcast to template class", "body": "<p>You don't need to wrap your template class to be able to create a vector with its type.</p>\n\n<p>This will work just fine</p>\n\n<pre><code>std::vector&lt;std::shared_ptr&lt;Father&lt;int&gt;&gt;&gt; objects;\nstd::shared_ptr&lt;Father&lt;int&gt;&gt; object = objects.at(0);\n</code></pre>\n"}], "owner": {"reputation": 37, "user_id": 11012312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9495f028e56701f8be6935ed156f5ac1?s=128&d=identicon&r=PG&f=1", "display_name": "CyberGK", "link": "https://stackoverflow.com/users/11012312/cybergk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 178, "favorite_count": 0, "accepted_answer_id": 54556254, "answer_count": 2, "score": 0, "last_activity_date": 1549471717, "creation_date": 1549463826, "last_edit_date": 1549471717, "question_id": 54556067, "link": "https://stackoverflow.com/questions/54556067/downcast-to-template-class", "title": "Downcast to template class", "body": "<p>I've got template class and I wanted to have vector of this class type.\nI saw solution where you need to wrap the class with another class without template, and then have a vector of this new class.\nNow I want to downcast for example one of the list objects - but the cast not allowed.\nWhat should I do?</p>\n\n<p>Example:</p>\n\n<pre><code>class Wrapper\n{\n}\n\ntemplate &lt;typename T&gt;\nclass Father : public Wrapper\n{\n}\n\nint main()\n{\n    std::vector&lt;std::shared_ptr&lt;Wrapper&gt;&gt; objects;\n    Father&lt;int&gt; object = (Father&lt;int&gt;)objects.at(0); // ERROR (lets say i know its integer)\n}\n</code></pre>\n"}, {"tags": ["c++", "parallel-processing", "mpi", "csr", "metis"], "comments": [{"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1549463646, "post_id": 54555593, "comment_id": 95911696, "body": "No warnings or anything like that?"}, {"owner": {"reputation": 63, "user_id": 9403787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/80dfed72fe8666126fe193ac6287c17e?s=128&d=identicon&r=PG&f=1", "display_name": "HERT", "link": "https://stackoverflow.com/users/9403787/hert"}, "reply_to_user": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1549472903, "post_id": 54555593, "comment_id": 95917463, "body": "No, but program don&#39;t close after messages and I use ctrl+c to exit(looks like loop)."}], "answers": [{"tags": [], "owner": {"reputation": 63, "user_id": 9403787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/80dfed72fe8666126fe193ac6287c17e?s=128&d=identicon&r=PG&f=1", "display_name": "HERT", "link": "https://stackoverflow.com/users/9403787/hert"}, "is_accepted": false, "score": 0, "last_activity_date": 1549803231, "last_edit_date": 1549803231, "creation_date": 1549802086, "answer_id": 54616422, "question_id": 54555593, "link": "https://stackoverflow.com/questions/54555593/partitioning-graph-using-parmetis/54616422#54616422", "title": "Partitioning graph using ParMETIS", "body": "<p>I found error. I was misunderstanding one thing, for example I have 8 nodes and 4 cores and each core will have [part[0] , part[vtxdist[rank+1]-vtxdist[rank]] ).\nFor example I have vtxdist = [0,1,4] this mean that I use 2 cores and first core(rank = 0) will have part[0] and second core(rank = 1) will have part[0],part[1],part[2].</p>\n\n<pre><code>#include &lt;cstdlib&gt;\n#include \"parmetis.h\"\n\nint main(int argc, char **argv)\n{\n  MPI_Init(&amp;argc, &amp;argv);\n  idx_t np = 4;\n  idx_t xadj_[3];\n  idx_t adjncy_[5];\n  idx_t rank, npes;\n  MPI_Comm comm;\n  MPI_Comm_dup(MPI_COMM_WORLD, &amp;comm);\n  MPI_Comm_size(comm, &amp;npes);\n  MPI_Comm_rank(comm, &amp;rank);\n    if (rank == 0)\n  {\n      xadj_[0] = 0;\n      xadj_[1] = 2;\n      xadj_[2] = 5;\n      adjncy_[0] = 4;\n      adjncy_[1] = 1;\n      adjncy_[2] = 0;\n      adjncy_[3] = 5;\n      adjncy_[4] = 2;\n  }\n    if (rank == 1)\n  {\n      xadj_[0] = 0;\n      xadj_[1] = 3;\n      xadj_[2] = 5;\n      adjncy_[0] = 1;\n      adjncy_[1] = 6;\n      adjncy_[2] = 3;\n      adjncy_[3] = 2;\n      adjncy_[4] = 7;\n  }\n    if (rank == 2)\n  {\n      xadj_[0] = 0;\n      xadj_[1] = 2;\n      xadj_[2] = 5;\n      adjncy_[0] = 5;\n      adjncy_[1] = 0;\n      adjncy_[2] = 6;\n      adjncy_[3] = 1;\n      adjncy_[4] = 4;\n  }\n    if (rank == 3)\n  {\n      xadj_[0] = 0;\n      xadj_[1] = 3;\n      xadj_[2] = 5;\n      adjncy_[0] = 7;\n      adjncy_[1] = 2;\n      adjncy_[2] = 5;\n      adjncy_[3] = 3;\n      adjncy_[4] = 6;\n  }\n  idx_t *xadj = xadj_;\n  idx_t *adjncy = adjncy_;\n\n  idx_t vtxdist_[] = {0,2,4,6,8};\n  idx_t *vtxdist = vtxdist_;\n\n  idx_t *vwgt = NULL;\n\n  idx_t *adjwgt = NULL;\n\n  idx_t wgtflag = 0;\n\n  idx_t numflag = 0;\n\n  idx_t ncon_[] = {1};\n  idx_t *ncon = ncon_;\n\n  idx_t nparts_[] = {np};\n  idx_t *nparts = nparts_;\n\n  real_t *tpwgts = new real_t[np*ncon[0]]; for(int i=0; i&lt;np*ncon[0]; i++) {tpwgts[i] = 1.0/np;}\n\n  real_t ubvec_[] = {1.05};\n  real_t *ubvec = ubvec_;\n\n  idx_t options_[] ={0, 0, 0};\n  idx_t *options =options_;\n\n  idx_t edgecut;\n  idx_t *part;\n\n  ParMETIS_V3_PartKway(vtxdist,xadj,adjncy, vwgt, adjwgt, &amp;wgtflag, &amp;numflag, ncon, nparts, tpwgts, ubvec, options, &amp;edgecut, part, &amp;comm);\n  int rnvtxs,i,penum;\n  MPI_Status status;\n  if (rank == 0) {\n    idx_t count = 0;\n    for (i=0; i&lt;vtxdist[1]; i++)\n    {\n      printf(\"part[%\"PRIDX\"] = %\"PRIDX\"\\n\", count, part[i]);\n      count++;\n    }\n    for (penum=1; penum&lt;npes; penum++) {\n      rnvtxs = vtxdist[penum+1]-vtxdist[penum];\n      int *rpart = new int[rnvtxs];\n      MPI_Recv((int*)rpart, rnvtxs, IDX_T, penum, 1, comm, &amp;status);\n\n      for (i=0; i&lt;rnvtxs; i++)\n        {\n          printf(\"part[%\"PRIDX\"] = %\"PRIDX\"\\n\", count, rpart[i]);\n          count++;\n        }\n    }\n  }\n  else\n    MPI_Send((int *)part, vtxdist[rank+1]-vtxdist[rank], IDX_T, 0, 1, comm); \n\n  MPI_Finalize();\n  return 0;\n}\n</code></pre>\n\n<p>So using this with compile options:</p>\n\n<pre><code>ParMETIS_INCLUDES = /home/user/Documents/parmetis/include\nMETIS_INCLUDES = /home/user/Documents/metis/include\nParMETIS_LIBS = /home/user/Documents/parmetis/lib\nMETIS_LIBS = /home/user/Documents/metis/lib\n\nINCLUDES = -I${ParMETIS_INCLUDES} -I${METIS_INCLUDES}\nLFLAGS =  -L${ParMETIS_LIBS} -L${METIS_LIBS}\n\nCC = mpic++\n\npar: par.cpp\n    ${CC}  -Wall -g $(INCLUDES) -o par.out par.cpp $(LFLAGS) -lparmetis -lmetis\n\nclean:\n    rm *.o *.out *~\n</code></pre>\n\n<p>Run with:</p>\n\n<pre><code>mpiexec -np 4 ./par.out\n</code></pre>\n\n<p>I have:</p>\n\n<pre><code>part[0] = 0\npart[1] = 0\npart[2] = 3\npart[3] = 1\npart[4] = 2\npart[5] = 2\npart[6] = 3\npart[7] = 1\n</code></pre>\n\n<p>And with graph test file </p>\n\n<pre><code>8 10\n2 5\n1 6 3\n2 7 4\n3 8\n1 6\n5 2 7\n6 3 8\n7 4\n</code></pre>\n\n<p>With option</p>\n\n<pre><code>mpiexec -np 4 ./parmetis test.graph 1 4 1 1 6 1\n</code></pre>\n\n<p>I have</p>\n\n<pre><code>0\n0\n1\n3\n2\n2\n1\n3\n</code></pre>\n\n<p>If I add:</p>\n\n<pre><code>ParMETIS_V3_RefineKway(vtxdist,xadj,adjncy, vwgt, adjwgt, &amp;wgtflag, &amp;numflag, ncon, nparts, tpwgts, ubvec, options, &amp;edgecut, part, &amp;comm);\n</code></pre>\n\n<p>after ParMETIS_V3_PartKway I get:</p>\n\n<pre><code>part[0] = 0\npart[1] = 0\npart[2] = 1\npart[3] = 1\npart[4] = 2\npart[5] = 2\npart[6] = 3\npart[7] = 3\n</code></pre>\n"}], "owner": {"reputation": 63, "user_id": 9403787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/80dfed72fe8666126fe193ac6287c17e?s=128&d=identicon&r=PG&f=1", "display_name": "HERT", "link": "https://stackoverflow.com/users/9403787/hert"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 375, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1549803231, "creation_date": 1549462239, "last_edit_date": 1549463561, "question_id": 54555593, "link": "https://stackoverflow.com/questions/54555593/partitioning-graph-using-parmetis", "title": "Partitioning graph using ParMETIS", "body": "<p>I try to partitioning my 8 nodes unweighted undirected graph on my 4 core notebook using ParMETIS, I have following code:</p>\n\n<pre><code>#include &lt;cstdlib&gt;\n#include \"parmetis.h\"\n\nint main(int argc, char **argv)\n{\n  MPI_Init(&amp;argc, &amp;argv);\n  int np = 4;\n  idx_t xadj_[3];\n  idx_t adjncy_[5];\n  int rank;\n  MPI_Comm_rank(MPI_COMM_WORLD, &amp;rank);\n    if (rank == 0)\n  {\n      xadj_[0] = 0;\n      xadj_[1] = 2;\n      xadj_[2] = 5;\n      adjncy_[0] = 4;\n      adjncy_[1] = 1;\n      adjncy_[2] = 0;\n      adjncy_[3] = 5;\n      adjncy_[4] = 2;\n  }\n    if (rank == 1)\n  {\n      xadj_[0] = 0;\n      xadj_[1] = 3;\n      xadj_[2] = 5;\n      adjncy_[0] = 1;\n      adjncy_[1] = 6;\n      adjncy_[2] = 3;\n      adjncy_[3] = 2;\n      adjncy_[4] = 7;\n  }\n    if (rank == 2)\n  {\n      xadj_[0] = 0;\n      xadj_[1] = 2;\n      xadj_[2] = 5;\n      adjncy_[0] = 5;\n      adjncy_[1] = 0;\n      adjncy_[2] = 6;\n      adjncy_[3] = 1;\n      adjncy_[4] = 4;\n  }\n    if (rank == 3)\n  {\n      xadj_[0] = 0;\n      xadj_[1] = 3;\n      xadj_[2] = 5;\n      adjncy_[0] = 7;\n      adjncy_[1] = 2;\n      adjncy_[2] = 5;\n      adjncy_[3] = 3;\n      adjncy_[4] = 6;\n  }\n  idx_t *xadj = xadj_;\n  idx_t *adjncy = adjncy_;\n\n  idx_t vtxdist_[] = {0,2,4,6,8};\n  idx_t *vtxdist = vtxdist_;\n\n  idx_t *vwgt = NULL;\n\n  idx_t *adjwgt = NULL;\n\n  idx_t wgtflag_[] = {0};\n  idx_t *wgtflag = wgtflag_;\n\n  idx_t numflag_[] = {0};\n  idx_t *numflag = numflag_;\n\n  idx_t ncon_[] = {1};\n  idx_t *ncon = ncon_;\n\n  idx_t nparts_[] = {np};\n  idx_t *nparts = nparts_;\n\n  real_t *tpwgts = new real_t[np*ncon[0]]; for(int i=0; i&lt;np*ncon[0]; i++) {tpwgts[i] = 1.0/np;}\n\n  real_t ubvec_[] = {1.05};\n  real_t *ubvec = ubvec_;\n\n  idx_t options_[] ={0, 0, 0};\n  idx_t *options =options_;\n\n  idx_t *edgecut;\n  idx_t part[8];\n\n  MPI_Comm comm_val=MPI_COMM_WORLD;\n  MPI_Comm *comm=&amp;comm_val;\n  ParMETIS_V3_PartKway(vtxdist,xadj,adjncy, vwgt, adjwgt, wgtflag, numflag, ncon, nparts, tpwgts, ubvec, options, edgecut, part, comm);\n  MPI_Barrier(comm_val);\n  printf(\"Processor %d --- %d\\n\", rank,*edgecut);\n    for (int i = rank*2 ; i &lt; rank*2+2; i++)\n    {\n      printf(\"%d\\n\",part[i]);\n    }\n  MPI_Finalize();\n  return 0;\n}\n</code></pre>\n\n<p><img src=\"https://i.stack.imgur.com/FnJhp.jpg\" alt=\"Graph image\"></p>\n\n<p>For each rank(core) I set up Distributed CSR format and try to get result, but get this:</p>\n\n<pre><code>Processor 0 --- 6\n0\n0\nProcessor 1 --- 6\n0\n0\nProcessor 2 --- 6\n2101207184\n22080\nProcessor 3 --- 6\n1904762080\n22069\n</code></pre>\n\n<p>What I do wrong?Maybe it is because shared memory or because each core have own part[8]?Why i get so strange output?</p>\n"}, {"tags": ["c++"], "answers": [{"tags": [], "owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "is_accepted": false, "score": 0, "last_activity_date": 1549461789, "creation_date": 1549461789, "answer_id": 54555437, "question_id": 54555347, "link": "https://stackoverflow.com/questions/54555347/what-are-the-performance-impacts-that-expectscond-of-the-gsl-imposes-on-the-ru/54555437#54555437", "title": "What are the performance impacts that Expects(cond) of the GSL imposes on the runtime?", "body": "<p>There is no deactivation as for an assert, the condition will be tested all the time:</p>\n\n<pre><code>#if defined(__clang__) || defined(__GNUC__)\n#define GSL_LIKELY(x) __builtin_expect(!!(x), 1)\n#define GSL_UNLIKELY(x) __builtin_expect(!!(x), 0)\n#else\n#define GSL_LIKELY(x) (!!(x))\n#define GSL_UNLIKELY(x) (!!(x))\n#endif\n</code></pre>\n\n<p>And then yes, it throws an exception or even terminate depending on your settings:</p>\n\n<pre><code>#if defined(GSL_THROW_ON_CONTRACT_VIOLATION)\n\n#define GSL_CONTRACT_CHECK(type, cond)                                                             \\\n    (GSL_LIKELY(cond) ? static_cast&lt;void&gt;(0)                                                       \\\n                      : gsl::details::throw_exception(gsl::fail_fast(                              \\\n                            \"GSL: \" type \" failure at \" __FILE__ \": \" GSL_STRINGIFY(__LINE__))))\n\n#elif defined(GSL_TERMINATE_ON_CONTRACT_VIOLATION)\n\n#define GSL_CONTRACT_CHECK(type, cond)                                                             \\\n    (GSL_LIKELY(cond) ? static_cast&lt;void&gt;(0) : gsl::details::terminate())\n\n#elif defined(GSL_UNENFORCED_ON_CONTRACT_VIOLATION)\n\n#define GSL_CONTRACT_CHECK(type, cond) GSL_ASSUME(cond)\n\n#endif // GSL_THROW_ON_CONTRACT_VIOLATION\n</code></pre>\n\n<p>If <code>GSL_UNENFORCED_ON_CONTRACT_VIOLATION</code> is set, nothing happens.</p>\n"}, {"tags": [], "owner": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "is_accepted": true, "score": 4, "last_activity_date": 1549461838, "creation_date": 1549461838, "answer_id": 54555454, "question_id": 54555347, "link": "https://stackoverflow.com/questions/54555347/what-are-the-performance-impacts-that-expectscond-of-the-gsl-imposes-on-the-ru/54555454#54555454", "title": "What are the performance impacts that Expects(cond) of the GSL imposes on the runtime?", "body": "<p>These macros are defined in the <a href=\"https://github.com/Microsoft/GSL/blob/master/include/gsl/gsl_assert\" rel=\"nofollow noreferrer\"><code>gsl_assert</code></a> header. </p>\n\n<p>Here's the relevant code:</p>\n\n<pre><code>#define Expects(cond) GSL_CONTRACT_CHECK(\"Precondition\", cond)\n</code></pre>\n\n<p></p>\n\n<pre><code>#if defined(GSL_THROW_ON_CONTRACT_VIOLATION)\n\n#define GSL_CONTRACT_CHECK(type, cond)                                                             \\\n    (GSL_LIKELY(cond) ? static_cast&lt;void&gt;(0)                                                       \\\n                      : gsl::details::throw_exception(gsl::fail_fast(                              \\\n                            \"GSL: \" type \" failure at \" __FILE__ \": \" GSL_STRINGIFY(__LINE__))))\n\n#elif defined(GSL_TERMINATE_ON_CONTRACT_VIOLATION)\n\n#define GSL_CONTRACT_CHECK(type, cond)                                                             \\\n    (GSL_LIKELY(cond) ? static_cast&lt;void&gt;(0) : gsl::details::terminate())\n\n#elif defined(GSL_UNENFORCED_ON_CONTRACT_VIOLATION)\n\n#define GSL_CONTRACT_CHECK(type, cond) GSL_ASSUME(cond)\n\n#endif // GSL_THROW_ON_CONTRACT_VIOLATION\n</code></pre>\n\n<p>As you can see, it depends on how you choose to handle contract violations. In the first two cases, you will pay the cost of a branch plus either throwing an exception or calling <code>std::terminate</code>.</p>\n\n<p>In the case that <code>GSL_UNENFORCED_ON_CONTRACT_VIOLATION</code> is defined, the macros will expand to <code>GSL_ASSUME</code>:</p>\n\n<pre><code>//\n// GSL_ASSUME(cond)\n//\n// Tell the optimizer that the predicate cond must hold. It is unspecified\n// whether or not cond is actually evaluated.\n//\n#ifdef _MSC_VER\n#define GSL_ASSUME(cond) __assume(cond)\n#elif defined(__GNUC__)\n#define GSL_ASSUME(cond) ((cond) ? static_cast&lt;void&gt;(0) : __builtin_unreachable())\n#else\n#define GSL_ASSUME(cond) static_cast&lt;void&gt;((cond) ? 0 : 0)\n#endif\n</code></pre>\n\n<p>In that case, the condition might or might not be evaluated depending on the compiler. It can also make your code faster as the compiler might be able to optimize more aggressively thanks to the assumptions.</p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 14091738, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-rF4UY47Bsp4/AAAAAAAAAAI/AAAAAAAAAAA/AMZuuckE9vvB0dsyIMrZR4L_36lzkHLYYQ/photo.jpg?sz=128", "display_name": "moremover", "link": "https://stackoverflow.com/users/14091738/moremover"}, "is_accepted": false, "score": 0, "last_activity_date": 1599464743, "creation_date": 1599464743, "answer_id": 63773320, "question_id": 54555347, "link": "https://stackoverflow.com/questions/54555347/what-are-the-performance-impacts-that-expectscond-of-the-gsl-imposes-on-the-ru/63773320#63773320", "title": "What are the performance impacts that Expects(cond) of the GSL imposes on the runtime?", "body": "<p>I have a feeling that Expects is slightly against the spirit of C++ (as I perceive this spirit) ... Maybe it would really be good if C++ was more mainstream and Java-like but for me its original idea is to provide maximum performance (sometimes at the cost of less safety/more complexity/lower readability). I think we can obtain both goals without sacrifising performance. For me the solution is quite simple - custom assert (cassert) - that is the fast assert that can be switched on or off for release builds.</p>\n<p>Sample implementation (Windows only) :</p>\n<pre><code>// cassert.h:\n#pragma once\n\n// Switch this macro off for maximum performance release builds:\n#define __RELEASE_WITH_ASSERTS__\n\n#ifndef cassert\n\n#if defined(_DEBUG) || defined(__RELEASE_WITH_ASSERTS__)\nvoid __cassert(bool val, const char* szFile, int line, const char* szDesc);\n#define cassert(a) ((a) ? ((void)1) : __cassert(a, __FILE__, __LINE__, _CRT_STRINGIZE(#a)))\n#else\n#define cassert(a)\n#endif\n\n#endif\n\n// cassert.cpp\n#if defined(_DEBUG) || defined(__RELEASE_WITH_ASSERTS__)\nvoid __cassert(bool val, const char* szFile, int line, const char* szDesc)\n{\n    if (!val)\n    {\n        std::string sIgnore;\n        int mode;\n\n        #if defined(_DEBUG)\n        sIgnore = &quot;\\n\\nIgnore assertion?&quot;;\n        mode = MB_YESNO;\n        #else\n        sIgnore = &quot;&quot;;\n        mode = MB_OK;\n        #endif\n\n        char szLine[16];\n        _itoa(line, szLine, 10);\n\n        std::string sAssertion = std::string(&quot;Assertion failed in file &quot;) + szFile + &quot; at line &quot; + szLine + &quot;\\n&quot; + szDesc;\n        Log(sAssertion.c_str());\n\n        if (MessageBoxA(NULL, (std::string(&quot;Assertion failed in file &quot;) + szFile + &quot; at line &quot; + szLine + &quot;\\n&quot; + szDesc + sIgnore).c_str(), &quot;Assertion failed&quot;, mode | MB_ICONINFORMATION) == IDNO)\n            _CrtDbgBreak();\n    }\n}\n#endif\n</code></pre>\n<p>Such cassert will make even debug builds run much faster because there is no actual call to (c)assert function, if condition is satisfied (and every such call would be quite heavy because of _CRT_STRINGIZE(#a) (condition as a string).</p>\n"}], "owner": {"reputation": 473, "user_id": 8800839, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50ab71298e09d7df19b9741966f9af09?s=128&d=identicon&r=PG&f=1", "display_name": "JFFIGK", "link": "https://stackoverflow.com/users/8800839/jffigk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 801, "favorite_count": 0, "accepted_answer_id": 54555454, "answer_count": 3, "score": 0, "last_activity_date": 1599464743, "creation_date": 1549461520, "last_edit_date": 1549462585, "question_id": 54555347, "link": "https://stackoverflow.com/questions/54555347/what-are-the-performance-impacts-that-expectscond-of-the-gsl-imposes-on-the-ru", "title": "What are the performance impacts that Expects(cond) of the GSL imposes on the runtime?", "body": "<p>The CPP Core Guidelines propose to use <code>Expects(expression)</code> <a href=\"https://github.com/isocpp/CppCoreGuidelines/blob/master/CppCoreGuidelines.md#i6-prefer-expects-for-expressing-preconditions\" rel=\"nofollow noreferrer\">to state preconditions</a> and <code>Ensures(expression)</code> <a href=\"https://github.com/isocpp/CppCoreGuidelines/blob/master/CppCoreGuidelines.md#i7-state-postconditions\" rel=\"nofollow noreferrer\">to state postconditions</a> from the <a href=\"https://github.com/Microsoft/GSL\" rel=\"nofollow noreferrer\">GSL</a> in functions.</p>\n\n<p>Example:</p>\n\n<pre><code>int area(int height, int width)\n{\n    Expects(height &gt; 0 &amp;&amp; width &gt; 0);            // good\n    if (height &lt;= 0 || width &lt;= 0) my_error();   // obscure\n    // ...\n}\n</code></pre>\n\n<p>What is the performance impact of these macros? \nIs it just as checking the condition with if and then throwing an exception?\nIs there a difference between debug and non-debug mode? \nI.e. are the macros also active if the app is built as a release?</p>\n\n<p>I ask because I am thinking about using it as a good practice, i.e. try, if there is not a specific reason against it, just stating possible pre/post conditions (assuming it is not sensible to use different types as parameters) using these macros from the GSL.</p>\n"}, {"tags": ["c++", "move-semantics"], "comments": [{"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1549461218, "post_id": 54555189, "comment_id": 95910152, "body": "You don&#39;t need it. Just be sure to call it <code>rvalue.swap_(lvalue);</code>"}, {"owner": {"reputation": 3355, "user_id": 4114447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/aa93321ad023953eaaae28b490855e7a?s=128&d=identicon&r=PG&f=1", "display_name": "Dan M.", "link": "https://stackoverflow.com/users/4114447/dan-m"}, "edited": false, "score": 1, "creation_date": 1549461271, "post_id": 54555189, "comment_id": 95910176, "body": "Why would you want to swap with rvalues? No std type does that, afaik. Just assign."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 3355, "user_id": 4114447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/aa93321ad023953eaaae28b490855e7a?s=128&d=identicon&r=PG&f=1", "display_name": "Dan M.", "link": "https://stackoverflow.com/users/4114447/dan-m"}, "edited": false, "score": 0, "creation_date": 1549461319, "post_id": 54555189, "comment_id": 95910194, "body": "@DanM. - There&#39;s the classic trick to kinda myabe force shrink a vector."}, {"owner": {"reputation": 25, "user_id": 5674141, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4ce97c75567dac882c23ef812a86b80?s=128&d=identicon&r=PG&f=1", "display_name": "Michaela", "link": "https://stackoverflow.com/users/5674141/michaela"}, "reply_to_user": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1549461787, "post_id": 54555189, "comment_id": 95910471, "body": "@StoryTeller Thanks!"}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "reply_to_user": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1549463156, "post_id": 54555189, "comment_id": 95911375, "body": "@StoryTeller there&#39;s a <code>shrink_to_fit</code> in all implementations that have rvalue references though."}], "answers": [{"tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": true, "score": 3, "last_activity_date": 1549461313, "creation_date": 1549461313, "answer_id": 54555279, "question_id": 54555189, "link": "https://stackoverflow.com/questions/54555189/swap-functions-for-lvalue-and-rvalue-references/54555279#54555279", "title": "swap functions for lvalue and rvalue references", "body": "<p>You actually don't need another version of your swap function.  In your move assignment operator you'll have a signature like</p>\n\n<pre><code>template&lt;typename T&gt;\nvector&lt;T&gt;&amp; vector&lt;T&gt;::operator=(vector&lt;T&gt;&amp;&amp; tmp)\n{\n    // do stuff\n}\n</code></pre>\n\n<p>in the <code>do stuff</code> part <code>tmp</code> is no longer an rvalue.  Since it has a name, it is a lvalue and you can call your swap function on it.   That means the implementation would be</p>\n\n<pre><code>template&lt;typename T&gt;\nvector&lt;T&gt;&amp; vector&lt;T&gt;::operator=(vector&lt;T&gt;&amp;&amp; tmp)\n{\n    swap(tmp);\n    return *this;\n}\n</code></pre>\n\n<p>and now your object has the others guts and vice versa.</p>\n\n<p>You can do the same thing with your move constructor.  You delegate to the default constructor so your new object gets default initialized and then you swap that default instance into the rvalue.  That looks like</p>\n\n<pre><code>template&lt;typename T&gt;\nvector&lt;T&gt;::vector&lt;T&gt;(vector&lt;T&gt;&amp;&amp; tmp) : vector&lt;T&gt;()\n{\n    swap(tmp);\n}\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 5674141, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4ce97c75567dac882c23ef812a86b80?s=128&d=identicon&r=PG&f=1", "display_name": "Michaela", "link": "https://stackoverflow.com/users/5674141/michaela"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 265, "favorite_count": 1, "accepted_answer_id": 54555279, "answer_count": 1, "score": 1, "last_activity_date": 1549461313, "creation_date": 1549461031, "question_id": 54555189, "link": "https://stackoverflow.com/questions/54555189/swap-functions-for-lvalue-and-rvalue-references", "title": "swap functions for lvalue and rvalue references", "body": "<p>I am writing a vector class which has move constructor and move assignment operator.\nApart from that I have this swap function:</p>\n\n<pre><code>template&lt;typename T&gt;\n    void vector&lt;T&gt;::swap_( vector&amp; rhs){\n        using std::swap;\n        swap( m_data, rhs.m_data );\n        swap( m_size, rhs.m_size );\n        swap( m_capacity, rhs.m_capacity );\n    }\n</code></pre>\n\n<p>Since rvalues don't bind with non-const lvalue references, I am gonna need an identical swap function for rvalue references with the only difference in the type of the parameter. Is there any way I can avoid duplicating the code?</p>\n"}, {"tags": ["c++", "winapi"], "comments": [{"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 1, "creation_date": 1549461498, "post_id": 54555124, "comment_id": 95910308, "body": "1) If you want to use <code>char</code>s instead of <code>WCHAR</code>s, why can&#39;t you use <a href=\"https://docs.microsoft.com/en-us/windows/desktop/api/winreg/nf-winreg-regsetvalueexa\" rel=\"nofollow noreferrer\"><code>RegSetValueExA</code></a>? Or not define <code>UNICODE</code> macro in your project? 2) This is <b>not</b> <a href=\"https://stackoverflow.com/questions/tagged/c\">c</a>. C doesn&#39;t have <code>string</code>. Why did you tag C?"}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1549461876, "post_id": 54555124, "comment_id": 95910515, "body": "Use a <code>std::wstring</code> rather than a <code>std::string</code> for <code>Str</code>. I <i>think</i> that should work as a direct drop-in replacement."}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 3, "creation_date": 1549463533, "post_id": 54555124, "comment_id": 95911628, "body": "Rather than do what you ask in the question, sidestep the problem by never using 8 bit text in Windows"}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "is_accepted": false, "score": 2, "last_activity_date": 1549465825, "last_edit_date": 1549465825, "creation_date": 1549462044, "answer_id": 54555529, "question_id": 54555124, "link": "https://stackoverflow.com/questions/54555124/reading-and-writing-windows-registry-in-c-how-to-convert-string-to-wchar/54555529#54555529", "title": "Reading And Writing Windows Registry in C++ (How to convert string to wchar(?))", "body": "<pre><code>static wchar_t const * const alphanum{\n    L\"0123456789\"\n     \"ABCDEFGHIJKLMNOPQRSTUVWXYZ\"\n     \"abcdefghijklmnopqrstuvwxyz\" };\n\nconstexpr auto stringLength{ wcslen(alphanum) };\n\nwchar_t genRandom()\n{\n    return alphanum[std::rand() % stringLength];\n}\n\n// ...\nstd::srand(static_cast&lt;unsigned&gt;(std::time(nullptr)));\n\nstd::wstring Str;\nfor (std::size_t i{}; i &lt; 20; ++i){\n   Str += genRandom();\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 6168, "user_id": 10611792, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/r727s.jpg?s=128&g=1", "display_name": "Drake Wu", "link": "https://stackoverflow.com/users/10611792/drake-wu"}, "is_accepted": false, "score": 0, "last_activity_date": 1549507762, "last_edit_date": 1549507762, "creation_date": 1549506705, "answer_id": 54565469, "question_id": 54555124, "link": "https://stackoverflow.com/questions/54555124/reading-and-writing-windows-registry-in-c-how-to-convert-string-to-wchar/54565469#54565469", "title": "Reading And Writing Windows Registry in C++ (How to convert string to wchar(?))", "body": "<p>And what about NOT to use string or std::wstring,</p>\n\n<pre><code>static wchar_t const * const alphanum{\n    L\"0123456789\"\n     \"ABCDEFGHIJKLMNOPQRSTUVWXYZ\"\n     \"abcdefghijklmnopqrstuvwxyz\" };\n\nconstexpr auto stringLength{ wcslen(alphanum) };\n\nwchar_t genRandom()\n{\n    return alphanum[std::rand() % stringLength];\n}\n\n// ...\nstd::srand(static_cast&lt;unsigned&gt;(std::time(nullptr)));\n\nwchar_t Str[20+1] = { 0 };\nfor (int i = 0; i &lt; 20; i++)\n{\n    Str[i] = genRandom();\n}\n</code></pre>\n\n<blockquote>\n  <p><em>I tried to use char instead of wchar and it writes chinese characters</em></p>\n</blockquote>\n\n<p>Because your method <code>RegSetValueEx</code> is reference to <code>RegSetValueExW</code> which received as wide character format. <code>sizeof(char) = 1</code> and <code>sizeof(wchar_t) = 2</code>, The value of two <code>char</code> characters is read as a <code>wchar_t</code> character(which as you see in chinese characters). You can specifically reference to <code>RegSetValueExA</code> if you want to try using <code>char</code>.</p>\n"}], "owner": {"reputation": 29, "user_id": 8502654, "user_type": "registered", "profile_image": "https://graph.facebook.com/1434859896597045/picture?type=large", "display_name": "Marcin Popowicz", "link": "https://stackoverflow.com/users/8502654/marcin-popowicz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 195, "favorite_count": 1, "answer_count": 2, "score": 2, "last_activity_date": 1549507762, "creation_date": 1549460802, "last_edit_date": 1549461626, "question_id": 54555124, "link": "https://stackoverflow.com/questions/54555124/reading-and-writing-windows-registry-in-c-how-to-convert-string-to-wchar", "title": "Reading And Writing Windows Registry in C++ (How to convert string to wchar(?))", "body": "<p>This is a part of my assignment. I know how to open/read registry keys and create values, but i have few questions. My code:</p>\n\n<p>This is how i write new string value into registry:</p>\n\n<pre><code>void lCreateKeyOne(HKEY hKey, LPCWSTR lSubKey)\n{\nWCHAR wcValue[] = TEXT\"testvalue\";\nLONG lNewValue = RegSetValueEx (hKey, \n                                L\"MytoolsTestKey\", \n                                NULL, \n                                REG_SZ,\n                                (LPBYTE)wcValue,                    \n                                sizeof(wcValue));\n}\n</code></pre>\n\n<p>It works, but i want to generate random string and write it into registry key.\nThis is how i generate random string:</p>\n\n<pre><code>static const char alphanum[] =\n\"0123456789\"\n\"ABCDEFGHIJKLMNOPQRSTUVWXYZ\"\n\"abcdefghijklmnopqrstuvwxyz\";\n\nint stringLength = sizeof(alphanum) - 1;\n\nchar genRandom()\n{\nreturn alphanum[rand() % stringLength];\n}\nsrand(time(0));\nstring Str;\nfor (unsigned int i = 0; i &lt; 20; ++i)\n{\n   Str += genRandom();\n}\n</code></pre>\n\n<ol>\n<li>How to write it as registry key ?</li>\n<li>how to convert string Str to WCHAR wcValue[] ?</li>\n<li>I tried to use char instead of wchar and it writes chinese characters\n<a href=\"https://docs.microsoft.com/en-us/windows/desktop/api/winreg/nf-winreg-regsetvalueexa\" rel=\"nofollow noreferrer\">https://docs.microsoft.com/en-us/windows/desktop/api/winreg/nf-winreg-regsetvalueexa</a></li>\n</ol>\n"}, {"tags": ["c++", "pointers", "memory", "fault"], "comments": [{"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1549461268, "post_id": 54555103, "comment_id": 95910175, "body": "<a href=\"https://www.ideone.com/SRKEjn\" rel=\"nofollow noreferrer\">Cannot duplicate</a>"}, {"owner": {"reputation": 15619, "user_id": 1548468, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0745dce203d52699e63a575b3103ad70?s=128&d=identicon&r=PG", "display_name": "Botje", "link": "https://stackoverflow.com/users/1548468/botje"}, "edited": false, "score": 2, "creation_date": 1549462831, "post_id": 54555103, "comment_id": 95911161, "body": "Have you tried attaching a debugger to the program? It might be a stack overflow due to the destructor of <code>SmartInt</code> calling the destructor of its <code>m_ptrNext</code> member, which calls the destructor of <b>its</b> <code>m_ptrNext</code> member and so on. You can avoid this by writing a custom <code>list</code> destructor that drops references as it goes."}, {"owner": {"reputation": 5, "user_id": 11023083, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ae31a6dfbd1cddd2a4bd0e651e62876?s=128&d=identicon&r=PG&f=1", "display_name": "Stiliyan Goranov", "link": "https://stackoverflow.com/users/11023083/stiliyan-goranov"}, "edited": false, "score": 0, "creation_date": 1549464017, "post_id": 54555103, "comment_id": 95911943, "body": "Thanks, Botje, your suggestions seem very reasonable, will try them out and report what happened!"}, {"owner": {"reputation": 5, "user_id": 11023083, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ae31a6dfbd1cddd2a4bd0e651e62876?s=128&d=identicon&r=PG&f=1", "display_name": "Stiliyan Goranov", "link": "https://stackoverflow.com/users/11023083/stiliyan-goranov"}, "edited": false, "score": 0, "creation_date": 1549467160, "post_id": 54555103, "comment_id": 95913946, "body": "Stack overflow, as you suggested, was the exact problem. Thanks!"}], "answers": [{"comments": [{"owner": {"reputation": 5, "user_id": 11023083, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ae31a6dfbd1cddd2a4bd0e651e62876?s=128&d=identicon&r=PG&f=1", "display_name": "Stiliyan Goranov", "link": "https://stackoverflow.com/users/11023083/stiliyan-goranov"}, "edited": false, "score": 0, "creation_date": 1549467099, "post_id": 54556328, "comment_id": 95913906, "body": "Thanks, that fixed the issue. It&#39;s very logical that this was the problem, but it didn&#39;t occur to me in time :)."}], "tags": [], "owner": {"reputation": 98, "user_id": 2862498, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/527c958bfc6ba683f4af7a3e91c2bb6e?s=128&d=identicon&r=PG&f=1", "display_name": "mect", "link": "https://stackoverflow.com/users/2862498/mect"}, "is_accepted": true, "score": 2, "last_activity_date": 1549464553, "creation_date": 1549464553, "answer_id": 54556328, "question_id": 54555103, "link": "https://stackoverflow.com/questions/54555103/segmentation-fault-in-handwritten-singly-linked-list-with-many-objects/54556328#54556328", "title": "Segmentation fault in handwritten singly linked list with many objects", "body": "<p>Your program crashes due to a stack overflow as <a href=\"https://stackoverflow.com/users/1548468/botje\">Botje</a> suspected. You can avoid this by explicitly releasing the list items one-by-one in the list destructor.</p>\n\n<pre><code>...\nclass SmartInt\n{\npublic:\n...    \n    void Reset() {\n        m_ptrNext.reset();\n    }\n...\n};\n\nclass IntList\n{\npublic:\n...    \n    ~IntList() {\n        while (m_ptrFirst != m_ptrLast) {\n            BoostSharedPtrSmartInt tmp = m_ptrFirst-&gt;GetNext();\n            m_ptrFirst-&gt;Reset();\n            m_ptrFirst = tmp;\n        }\n    }\n};\n....\n</code></pre>\n"}], "owner": {"reputation": 5, "user_id": 11023083, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ae31a6dfbd1cddd2a4bd0e651e62876?s=128&d=identicon&r=PG&f=1", "display_name": "Stiliyan Goranov", "link": "https://stackoverflow.com/users/11023083/stiliyan-goranov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "accepted_answer_id": 54556328, "answer_count": 1, "score": 0, "last_activity_date": 1549464553, "creation_date": 1549460748, "question_id": 54555103, "link": "https://stackoverflow.com/questions/54555103/segmentation-fault-in-handwritten-singly-linked-list-with-many-objects", "title": "Segmentation fault in handwritten singly linked list with many objects", "body": "<p>I am dealing with custom written singly linked list at work whose elements are smart pointers to objects. The problem is that after inserting successfully a certain amount of elements in the list (for example 50000),\nthe program crashes with segmentation fault when the list goes out of scope and the elements start getting destructed one by one (by the smart pointer). The 50000 elements are created successfully, but every time the 43256 (for example) object gets destroyed, the program crashes.</p>\n\n<p>Note: When dealing with small number of objects - 5000, 10000, 20000, ... - there is no problem at all.</p>\n\n<p>We use C++98 standart and Boost 1.55.0 C++ libraries.</p>\n\n<p>The program occured on Red Hat, but I also tried it locally on Ubuntu - same deal. What I tried just for the experiment was using std::list, std::vector, boost::container::slist instead of hadwritten singly linked list and the issue is gone. But I really want to understand where the problem comes from.</p>\n\n<p>Here is sample code which reproduces the issue:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include \"boost/lexical_cast.hpp\"\n#include \"boost/shared_ptr.hpp\"\n#include \"boost/make_shared.hpp\"\n#include &lt;vector&gt;\n\nclass SmartInt;\ntypedef boost::shared_ptr&lt;SmartInt&gt; BoostSharedPtrSmartInt;\n\nclass SmartInt\n{\npublic:\n    int m_data;\n    BoostSharedPtrSmartInt m_ptrNext;\n\n    void SetNext(BoostSharedPtrSmartInt ptrNext)\n    {\n        m_ptrNext = ptrNext;\n    }\n\n    BoostSharedPtrSmartInt GetNext() const\n    {\n        return m_ptrNext;\n    }\n};\n\nclass IntList\n{\npublic:\n    BoostSharedPtrSmartInt m_ptrFirst;\n    BoostSharedPtrSmartInt m_ptrLast;\n\n    void AddParameter( BoostSharedPtrSmartInt ptrParam ) throw()\n    {\n        if( m_ptrFirst == NULL )\n        {\n            std::cout &lt;&lt; \"ST_TEST First time AddParameter\" &lt;&lt; std::endl;\n            m_ptrFirst = m_ptrLast = ptrParam;\n        }\n        else\n        {\n            m_ptrLast-&gt;SetNext( ptrParam );\n            m_ptrLast = ptrParam;\n        }\n    }\n};\n\nvoid test3(int numObjects)\n{\n    IntList list;\n    int i = 1;\n    for(; i &lt;= numObjects; ++i)\n    {\n        BoostSharedPtrSmartInt bspsi = boost::make_shared&lt;SmartInt&gt;();\n        list.AddParameter( bspsi );\n    }\n    std::cout &lt;&lt; \"ST_TEST i = \" &lt;&lt; i &lt;&lt; std::endl;\n    std::cout &lt;&lt; \"ST_TEST Getting out of scope - everything should get destroyed now!\" &lt;&lt; std::endl;\n}\n\nint main(int argc, char **argv)\n{\n    if(argc != 2)\n    {\n        std::cout &lt;&lt; \"Usage: ./test &lt;number of objects created&gt;\" &lt;&lt; std::endl;\n        exit(1);\n    }\n\n    test3( boost::lexical_cast&lt; int &gt;( argv[1] ) );\n    return 0;\n}\n</code></pre>\n\n<p>To build the project, I use CMakeLists.txt is as follows:</p>\n\n<pre><code>cmake_minimum_required(VERSION 2.6)\nproject(test)\n\nset(Boost_USE_STATIC_LIBS OFF)\nset(Boost_USE_MULTITHREADED ON)\nset(Boost_USE_STATIC_RUNTIME OFF)\n\nfind_package(Boost REQUIRED)\n\ninclude_directories(${Boost_INCLUDE_DIRS}) \n\nadd_executable(test main.cpp)\n\ntarget_link_libraries( test\n ${Boost_LIBRARIES} )\n\n</code></pre>\n\n<p>Thanks in advance, I am really puzzled why the crash happens and I`ve been dealing with this for 1-2 weeks now...</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1549460782, "post_id": 54555089, "comment_id": 95909879, "body": "A pointer to <code>char</code> is treated as a null-terminated byte string. In your case it isn&#39;t."}, {"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1549461530, "post_id": 54555089, "comment_id": 95910325, "body": "You are using Visual Studio, this is intentional garbage.  \u2560 == 0xcc, the magic value that is used in the Debug build to tell you that your program has undefined behavior.  It does, that char* is not a zero-terminated string.  Right now you are dumping the content of the stack, no access violation since a binary 0 is fairly commonly present by accident due to the return address.   Do not depend on UB."}], "owner": {"reputation": 23, "user_id": 9183124, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-tOu-jBWMMdA/AAAAAAAAAAI/AAAAAAAAAww/jEBYiTck7Yk/photo.jpg?sz=128", "display_name": "Gage Brush", "link": "https://stackoverflow.com/users/9183124/gage-brush"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 18, "favorite_count": 0, "closed_date": 1549460817, "answer_count": 0, "score": 0, "last_activity_date": 1549460704, "creation_date": 1549460704, "question_id": 54555089, "link": "https://stackoverflow.com/questions/54555089/why-does-outputting-the-memory-location-of-a-char-variable-print-garbage", "closed_reason": "Duplicate", "title": "Why does outputting the memory location of a char variable print garbage?", "body": "<p>I was testing out ways to output similar data through a char variable (i called it 'noob') and a char pointer variable (appropriately named 'noobPtr'). I assigned 'noob' the letter 'a', then assigned 'noobPtr' the memory location of 'noob'. Then in the program I wanted to both output the letter 'a' using both variables and the memory location using both variables. One interesting thing I noticed when looking at the program's output for the memory address was that it output a bunch of garbage that didn't look like a typical memory address.( a\u2560\u2560\u2560\u2560\u00e4\u20a7\u2569\u00e7p\u2248=   is the output).</p>\n\n<p>I tried researching why this happened, and though maybe it was because of the fact I was working with char, and not string, because I didn't have this problem working with strings.</p>\n\n<pre><code>int main() {\n\n    char noob = 'a';\n    char * noobPtr = &amp;noob;\n\n    cout &lt;&lt; \"Memory Variable (noob / *noobPtr): \" &lt;&lt; noob &lt;&lt; \" \" &lt;&lt; *noobPtr &lt;&lt; \"  &lt;&lt;&lt; They should be the same\" &lt;&lt; endl &lt;&lt; endl;\n    cout &lt;&lt; \"Memory Address of noob (&amp;noob / noobPtr): \" &lt;&lt; &amp;noob &lt;&lt; \" \" &lt;&lt; noobPtr &lt;&lt; \"  &lt;&lt;&lt; They should also be the same\" &lt;&lt; endl &lt;&lt; endl;\n\n\n    system(\"PAUSE\");\n    return 0;\n}\n</code></pre>\n\n<p>Hopefully you more knowledgeable coders would know why this happens. I am hoping to find a way to get a real memory location output instead of garbage symbols.</p>\n"}, {"tags": ["c++", "arduino"], "answers": [{"tags": [], "owner": {"reputation": 3612, "user_id": 1813336, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1zONI.jpg?s=128&g=1", "display_name": "cleblanc", "link": "https://stackoverflow.com/users/1813336/cleblanc"}, "is_accepted": false, "score": 0, "last_activity_date": 1549462456, "creation_date": 1549462456, "answer_id": 54555655, "question_id": 54555031, "link": "https://stackoverflow.com/questions/54555031/elegantly-attempt-to-execute-various-functions-a-specific-way/54555655#54555655", "title": "Elegantly attempt to execute various functions a specific way", "body": "<p>You need to make the function pointers all have the same signature.  I would use something like this;</p>\n\n<pre><code>typedef int(*try_func)(void *arg);\n</code></pre>\n\n<p>And have a <code>try_this_action(...)</code> signature similar to the following;</p>\n\n<pre><code>void try_this_action(char * msg, int max_trys, try_func func, void *arg)\n</code></pre>\n\n<p>You would then implement your actions similar to this;</p>\n\n<pre><code>int power(void *pv)\n{\n    int *p = pv;    \n    int on_off = *p;\n\n    static int try = 0;\n\n    if (on_off &amp;&amp; try++)\n        return 1;\n    return 0;\n}\n\nint signal(void *pv)\n{\n    static int try = 0;\n\n    if (try++ &gt; 6)\n        return 1;\n    return 0;\n}\n</code></pre>\n\n<p>And call them like this;</p>\n\n<pre><code>int main(int c, char *v[])\n{\n    int on_off = 1;\n\n    try_this_action(\"Powering ON\", 3, power, &amp;on_off);\n    try_this_action(\"Signaling\", 10, signal, 0);\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2610, "user_id": 1883304, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/xYoZ7.png?s=128&g=1", "display_name": "Micrified", "link": "https://stackoverflow.com/users/1883304/micrified"}, "edited": false, "score": 0, "creation_date": 1549468764, "post_id": 54555717, "comment_id": 95915104, "body": "I like your answer, its quite neat!"}], "tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": true, "score": 1, "last_activity_date": 1549462643, "creation_date": 1549462643, "answer_id": 54555717, "question_id": 54555031, "link": "https://stackoverflow.com/questions/54555031/elegantly-attempt-to-execute-various-functions-a-specific-way/54555717#54555717", "title": "Elegantly attempt to execute various functions a specific way", "body": "<blockquote>\n  <p>A difficulty I have is that the functions called have different syntax\n  (some take parameters, some other don't...).</p>\n</blockquote>\n\n<p>That is indeed an issue.  Along with it you have the possibility of variation in actual function arguments for the same function.</p>\n\n<blockquote>\n  <p>Is there a more elegant\n  modulable way of doing this besides copy/paste the chunck of code\n  everywhere I need it ?</p>\n</blockquote>\n\n<p>I think you could make a variadic function that uses specific knowledge of the functions to dispatch in order to deal with the differing function signatures and actual arguments.  I'm doubtful that I would consider the result more elegant, though.</p>\n\n<p>I would be inclined to approach this job via a macro, instead:</p>\n\n<pre><code>// desc:     a descriptive string, evaluated once\n// action:   an expression to (re)try until it evaluates to true in boolean context\n// attempts: the maximum number of times the action will be evaluated, itself evaluated once\n#define try_this_action(desc, action, attempts) do { \\\n    int _attempts = (attempts);                      \\\n    DEBUG_PRINT(desc);                               \\\n    while(_attempts &amp;&amp; !(action)) {                  \\\n        _attempts -= 1;                              \\\n        DEBUG_PRINT(\".\");                            \\\n        delay(100);                                  \\\n    }                                                \\\n    if (_attempts) {                                 \\\n        DEBUG_PRINTLN(\" - Success\");                 \\\n    } else {                                         \\\n        DEBUG_PRINTLN(\" - Failed.\");                 \\\n        soft_reset();                                \\\n    }                                                \\\n    wdt_reset();                                     \\\n} while (0)\n</code></pre>\n\n<p>Usage would be just as you described:</p>\n\n<pre><code>try_this_action(\"Powering ON\", module.power(true), 3);\n</code></pre>\n\n<p><em>etc</em>..  Although the effect is as if you did insert the code for each action in each spot, using a macro such as this would yield code that is much easier to read, and that is not lexically repetitive.  Thus, for example, if you ever need to change the the steps for trying actions, you can do it once for all by modifying the macro.</p>\n"}, {"tags": [], "owner": {"reputation": 2610, "user_id": 1883304, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/xYoZ7.png?s=128&g=1", "display_name": "Micrified", "link": "https://stackoverflow.com/users/1883304/micrified"}, "is_accepted": false, "score": 0, "last_activity_date": 1549464827, "creation_date": 1549464827, "answer_id": 54556420, "question_id": 54555031, "link": "https://stackoverflow.com/questions/54555031/elegantly-attempt-to-execute-various-functions-a-specific-way/54556420#54556420", "title": "Elegantly attempt to execute various functions a specific way", "body": "<p>Functions of different arity may be abstracted with a generic signature (think about <code>main</code>). Instead of each giving each their own unique arguments, you simply supply them all with:</p>\n\n<ol>\n<li>An argument count.</li>\n<li>A vector of pointers to the arguments.</li>\n</ol>\n\n<p>This is how your operating system treats all programs it runs anyways. I've given a very basic example below which you can inspect. </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\n/* Define total function count */\n#define MAX_FUNC        2\n\n/* Generic function signature */\ntypedef void (*func)(int, void **, const char *);\n\n/* Function pointer array (NULL - initialized) */\nfunc functions[MAX_FUNC];\n\n/* Example function #1 */\nvoid printName (int argc, void **argv, const char *desc) {\n    fprintf(stdout, \"Running: %s\\n\", desc);\n    if (argc != 1 || argv == NULL) {\n        fprintf(stderr, \"Err in %s!\\n\", desc);\n        return;\n    }\n    const char *name = (const char *)(argv[0]);\n    fprintf(stdout, \"Name: %s\\n\", name);\n}\n\n/* Example function #2 */\nvoid printMax (int argc, void **argv, const char *desc) {\n    fprintf(stdout, \"Running: %s\\n\", desc);\n    if (argc != 2 || argv == NULL) {\n        fprintf(stderr, \"Err in %s!\\n\", desc);\n        return;\n    }\n    int *a = (int *)(argv[0]), *b = (int *)(argv[1]);\n    fprintf(stdout, \"Max: %d\\n\", (*a &gt; *b) ? *a : *b);\n}\n\n\nint main (void) {\n    functions[0] = printName;               // Set function #0\n    functions[1] = printMax;                // Set function #1\n\n\n    int f_arg_count[2] = {1, 2};            // Function 0 takes 1 argument, function 1 takes 2.\n    const char *descs[2] = {\"printName\", \"printMax\"};\n    const char *name = \"Natasi\";            // Args of function 0\n    int a = 2, b = 3;                       // Args of function 1\n    int *args[2] = {&amp;a, &amp;b};                // Args of function 1 in an array.\n\n    void **f_args[2] = {(void **)(&amp;name), \n                      (void **)(&amp;args)};    // All function args.\n\n    // Invoke all functions.    \n    for (int i = 0; i &lt; MAX_FUNC; i++) {\n        func f = functions[i];\n        const char *desc = descs[i];\n        int n = f_arg_count[i];\n        void **args = f_args[i];\n        f(n, args, desc);\n    }\n\n    return EXIT_SUCCESS;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4522, "user_id": 5157478, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bBcym.png?s=128&g=1", "display_name": "Frankie_C", "link": "https://stackoverflow.com/users/5157478/frankie-c"}, "is_accepted": false, "score": 0, "last_activity_date": 1549471254, "last_edit_date": 1549471254, "creation_date": 1549466931, "answer_id": 54557107, "question_id": 54555031, "link": "https://stackoverflow.com/questions/54555031/elegantly-attempt-to-execute-various-functions-a-specific-way/54557107#54557107", "title": "Elegantly attempt to execute various functions a specific way", "body": "<p>You can use a variadic function, declaring in the parameter list first those parameters that are always present, then the variable part.\nIn following code we define a type for action functions, void returning having as parameter an argument list:</p>\n\n<pre><code>typedef void (*action)(va_list);\n</code></pre>\n\n<p>Then define the generic action routine that prepare for the action execution:</p>\n\n<pre><code>void try_this_action(char *szActionName, int trials, action fn_action, ...)\n{\n    va_list args;\n    va_start(args, fn_action);    //Init the argument list\n\n    DEBUG_PRINT(szActionName);  // This line changes\n    uint8_t attempts = 0;\n    uint8_t max_attempts = trials;  // max_attempts changes\n    //Here we call our function through the pointer passed as argument\n    while (!fn_action(args) &amp;&amp; attempts &lt; max_attempts)\n    {   // This line changes\n        attempts++;\n        DEBUG_PRINT(\".\");\n        if (attempts == max_attempts)\n        {\n            DEBUG_PRINTLN(\" - Failed.\");\n            soft_reset();   // Start all over again\n        }\n        delay(100);\n    }\n    DEBUG_PRINTLN(\" - Success\");\n    wdt_reset();    // Reset watchdog timer, ready for next action\n    va_end(args);\n}\n</code></pre>\n\n<p>Each function must be coded to use an argument list:</p>\n\n<pre><code>int power(va_list args)\n{\n    //First recover all our arguments using the va_arg macro\n    bool cond = va_arg(args, bool);\n\n    if (cond == true)\n    {\n        ... //do something\n            return true;\n    }\n    return false;\n}\n</code></pre>\n\n<p>The usage will be:</p>\n\n<pre><code>try_this_action(\"Powering ON\", 3, module.power, true);\ntry_this_action(\"Waiting for signal\", 10, module.signal);\ntry_this_action(\"Sending SMS\", 3, module.sendSMS, \"test\");\ntry_this_action(\"Powering OFF\", 1, module.power, false);\n</code></pre>\n\n<p>If you need more info on variadic functions and usage of stdarg.h macros google the net. Start from here <a href=\"https://en.cppreference.com/w/c/variadic\" rel=\"nofollow noreferrer\">https://en.cppreference.com/w/c/variadic</a>.</p>\n\n<p>It could be coded also as a macro implementation, as the excellent proposal in the John Bollinger answer, but in that case you must consider that each macro usage will instantiate the whole code, that could be eventually even better for speed (avoiding a function call), but could be not suitable on systems with limited memory (embedded), or where you need reference to the function <code>try_this_action</code> (inexistent).</p>\n"}], "owner": {"reputation": 377, "user_id": 2565049, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/757036e7baae3a789faec723974d88e9?s=128&d=identicon&r=PG", "display_name": "Fredovsky", "link": "https://stackoverflow.com/users/2565049/fredovsky"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "accepted_answer_id": 54555717, "answer_count": 4, "score": 0, "last_activity_date": 1549471712, "creation_date": 1549460564, "last_edit_date": 1549471712, "question_id": 54555031, "link": "https://stackoverflow.com/questions/54555031/elegantly-attempt-to-execute-various-functions-a-specific-way", "title": "Elegantly attempt to execute various functions a specific way", "body": "<p>I'm attempting to execute various functions sequentially n number of times, only moving forward if previous function did not return false (error) otherwise I reset and start all over again.</p>\n\n<p>An example of a sequence would be :</p>\n\n<ol>\n<li>Turn module ON : <code>module.power(true)</code>, 3 attempts</li>\n<li>Wait for a signal : <code>module.signal()</code>, 10 attempts</li>\n<li>Send a message : <code>module.sendSMS('test')</code>, 3 attempts</li>\n<li>Turn module OFF : <code>module.power(false)</code>, 1 attempt</li>\n</ol>\n\n<p>Each of those actions are done the same way, only changing the DEBUG text and the function to launch :</p>\n\n<pre><code>DEBUG_PRINT(\"Powering ON\");  // This line changes\nuint8_t attempts = 0;\nuint8_t max_attempts = 3;  // max_attempts changes\nwhile(!module.power(true) &amp;&amp; attempts &lt; max_attempts){  // This line changes\n  attempts++;\n  DEBUG_PRINT(\".\");\n  if(attempts == max_attempts) {\n    DEBUG_PRINTLN(\" - Failed.\");\n    soft_reset();  // Start all over again\n  }\n  delay(100);\n}\nDEBUG_PRINTLN(\" - Success\");\nwdt_reset(); // Reset watchdog timer, ready for next action\n</code></pre>\n\n<p>Is there an elegant way I can put this process in a function I could call to execute the required functions this particular way, for example something like :</p>\n\n<p><code>void try_this_action(description, function, n_attempts)</code></p>\n\n<p>Which would make actions 1-4 above like :</p>\n\n<pre><code>try_this_action(\"Powering ON\", module.power(true), 3);\ntry_this_action(\"Waiting for signal\", module.signal(), 10);\ntry_this_action(\"Sending SMS\", module.sendSMS('test'), 3);\ntry_this_action(\"Powering OFF\", module.power(false), 1);\n</code></pre>\n\n<p>A difficulty I have is that the functions called have different syntax (some take parameters, some other don't...). Is there a more elegant modulable way of doing this besides copy/paste the chunck of code everywhere I need it ?</p>\n"}, {"tags": ["c++", "file-io", "mesh", "cgal", "parameterization"], "comments": [{"owner": {"reputation": 5172, "user_id": 863521, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gGh24.jpg?s=128&g=1", "display_name": "sloriot", "link": "https://stackoverflow.com/users/863521/sloriot"}, "edited": false, "score": 0, "creation_date": 1549526088, "post_id": 54554910, "comment_id": 95935176, "body": "Maybe I&#39;m missing something because looking at the code of the function <code>output_uvmap_to_off()</code> that is taking a mesh (and not the vertex range), the vertices are precisely in the same order as in the mesh (l. 125 in the file for me). Why do you think the order is not preserved?"}, {"owner": {"reputation": 37, "user_id": 10348053, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa88e28beb94838f86b2d5bb934394e4?s=128&d=identicon&r=PG&f=1", "display_name": "another lisp ninja on a bike", "link": "https://stackoverflow.com/users/10348053/another-lisp-ninja-on-a-bike"}, "reply_to_user": {"reputation": 5172, "user_id": 863521, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gGh24.jpg?s=128&g=1", "display_name": "sloriot", "link": "https://stackoverflow.com/users/863521/sloriot"}, "edited": false, "score": 0, "creation_date": 1549530890, "post_id": 54554910, "comment_id": 95937554, "body": "@sloriot I have added an example to explain better what I get and what I would like to get instead."}, {"owner": {"reputation": 37, "user_id": 10348053, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa88e28beb94838f86b2d5bb934394e4?s=128&d=identicon&r=PG&f=1", "display_name": "another lisp ninja on a bike", "link": "https://stackoverflow.com/users/10348053/another-lisp-ninja-on-a-bike"}, "reply_to_user": {"reputation": 5172, "user_id": 863521, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gGh24.jpg?s=128&g=1", "display_name": "sloriot", "link": "https://stackoverflow.com/users/863521/sloriot"}, "edited": false, "score": 0, "creation_date": 1551085108, "post_id": 54554910, "comment_id": 96495705, "body": "Is there anything I could do to improve chances of getting an answer? Shall I explain some parts more precisely? Or is it just bad luck and no-one knows?"}, {"owner": {"reputation": 5172, "user_id": 863521, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gGh24.jpg?s=128&g=1", "display_name": "sloriot", "link": "https://stackoverflow.com/users/863521/sloriot"}, "edited": false, "score": 0, "creation_date": 1551105159, "post_id": 54554910, "comment_id": 96507334, "body": "It seems that this <a href=\"https://github.com/CGAL/cgal/issues/2994\" rel=\"nofollow noreferrer\">issue</a> should answer your question."}, {"owner": {"reputation": 37, "user_id": 10348053, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa88e28beb94838f86b2d5bb934394e4?s=128&d=identicon&r=PG&f=1", "display_name": "another lisp ninja on a bike", "link": "https://stackoverflow.com/users/10348053/another-lisp-ninja-on-a-bike"}, "reply_to_user": {"reputation": 5172, "user_id": 863521, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gGh24.jpg?s=128&g=1", "display_name": "sloriot", "link": "https://stackoverflow.com/users/863521/sloriot"}, "edited": false, "score": 0, "creation_date": 1551271444, "post_id": 54554910, "comment_id": 96578568, "body": "@sloriot Indeed, it does, thank you very much. I had to use <code>Polyhedron_3</code> instead of <code>Surface_mesh</code> but that is fine. Would you mind turning your comment into an answer so that I can accept it?"}], "answers": [{"tags": [], "owner": {"reputation": 5172, "user_id": 863521, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gGh24.jpg?s=128&g=1", "display_name": "sloriot", "link": "https://stackoverflow.com/users/863521/sloriot"}, "is_accepted": true, "score": 2, "last_activity_date": 1551283432, "creation_date": 1551283432, "answer_id": 54909650, "question_id": 54554910, "link": "https://stackoverflow.com/questions/54554910/cgalsurface-mesh-parameterization-write-the-vertices-to-off-in-the-original-o/54909650#54909650", "title": "CGAL::Surface_mesh_parameterization: write the vertices to off in the original order", "body": "<p>The following <a href=\"https://github.com/CGAL/cgal/issues/2994\" rel=\"nofollow noreferrer\">issue</a> answers this question.</p>\n"}], "owner": {"reputation": 37, "user_id": 10348053, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa88e28beb94838f86b2d5bb934394e4?s=128&d=identicon&r=PG&f=1", "display_name": "another lisp ninja on a bike", "link": "https://stackoverflow.com/users/10348053/another-lisp-ninja-on-a-bike"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 399, "favorite_count": 0, "accepted_answer_id": 54909650, "answer_count": 1, "score": 0, "last_activity_date": 1551283432, "creation_date": 1549460183, "last_edit_date": 1549530854, "question_id": 54554910, "link": "https://stackoverflow.com/questions/54554910/cgalsurface-mesh-parameterization-write-the-vertices-to-off-in-the-original-o", "title": "CGAL::Surface_mesh_parameterization: write the vertices to off in the original order", "body": "<p>I am trying to modify <code>CGAL-4.13/examples/Surface_mesh_parameterization/lscm.cpp</code> so that the order of the vertices in the resulting off file is the same as in the input file.</p>\n\n<h2> Update: Example </h2>\n\n<p>Take a file <code>input.off</code> with the following simple content:</p>\n\n<pre><code>OFF\n4 2 0\n-0.9310345 0.4333333 0 \n-1 0.4333333 0 \n-0.9310345 0.5 0 \n-1 0.5 0 \n3 1 0 2\n3 2 3 1\n</code></pre>\n\n<p>When I call the standard <code>lscm</code> from CGAL with</p>\n\n<pre><code>/path/to/CGAL-4.13-build/examples/Surface_mesh_parameterization/lscm input.off\n</code></pre>\n\n<p>I obtain <code>coords.off</code> containing</p>\n\n<pre><code>OFF\n4 2 0\n-1 0.5 0\n-0.931034 0.5 0\n-0.931034 0.433333 0\n-1 0.433333 0\n3 3 2 1\n3 1 0 3\n</code></pre>\n\n<p>and <code>uvmap.off</code> with</p>\n\n<pre><code>OFF\n4 2 0\n-0.0166567 0.982769 0\n1 1 0\n1.01666 0.0172311 0\n0 0 0\n3 3 2 1\n3 1 0 3\n</code></pre>\n\n<p>The files <code>coords.off</code> and <code>uvmap.off</code> contain the vertices and their parameter pairs in the same order (which is <em>different</em> from that in <code>input.off</code>). Instead, I would like the parameters in <code>uvmap.off</code> to be in the order corresponding to <code>input.off</code>. In particular, I want <code>uvmap.off</code> to look like this:</p>\n\n<pre><code>OFF\n4 2 0\n1.01666 0.0172311 0\n0 0 0\n1 1 0\n-0.0166567 0.982769 0\n3 1 0 2\n3 2 3 1\n</code></pre>\n\n<p>Basically, this renders <code>coords.off</code> redundant, as I can use <code>input.off</code> in its role.</p>\n\n<h2> Effort at a solution </h2>\n\n<p>From what I understand, this might be possible to achieve by calling <code>output_uvmap_to_off(...)</code> with 6 parameters instead of 4 (both versions can be found in <code>CGAL-4.13/include/CGAL/Surface_mesh_parameterization/IO/File_off.h</code>). As one of these parameters is a <code>VertexIndexMap</code>, I should probably also use </p>\n\n<pre><code>CGAL::Surface_mesh_parameterization::LSCM_parameterizer_3&lt; TriangleMesh_, BorderParameterizer_, SolverTraits_ &gt;::parameterize(...)\n</code></pre>\n\n<p>instead of</p>\n\n<pre><code>CGAL::Surface_mesh_parameterization::parameterize(...)\n</code></pre>\n\n<p>used in the example.</p>\n\n<p>Here is a minimal (not really working) example. It is derived from <code>lscm.cpp</code> but I threw away a lot of things to remain concise.</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;CGAL/Simple_cartesian.h&gt;\n#include &lt;CGAL/Surface_mesh.h&gt;\n#include &lt;CGAL/boost/graph/Seam_mesh.h&gt;\n#include &lt;CGAL/Surface_mesh_parameterization/IO/File_off.h&gt;\n#include &lt;CGAL/Surface_mesh_parameterization/parameterize.h&gt;\n#include &lt;CGAL/Surface_mesh_parameterization/Two_vertices_parameterizer_3.h&gt;\n#include &lt;CGAL/Surface_mesh_parameterization/LSCM_parameterizer_3.h&gt;\n#include &lt;CGAL/Polygon_mesh_processing/measure.h&gt;\n#include &lt;boost/foreach.hpp&gt;\n#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;sstream&gt;\n#include &lt;string&gt;\n\ntypedef CGAL::Simple_cartesian&lt;double&gt;      Kernel;\ntypedef Kernel::Point_2                     Point_2;\ntypedef Kernel::Point_3                     Point_3;\ntypedef CGAL::Surface_mesh&lt;Kernel::Point_3&gt; SurfaceMesh;\ntypedef boost::graph_traits&lt;SurfaceMesh&gt;::edge_descriptor SM_edge_descriptor;\ntypedef boost::graph_traits&lt;SurfaceMesh&gt;::halfedge_descriptor SM_halfedge_descriptor;\ntypedef boost::graph_traits&lt;SurfaceMesh&gt;::vertex_descriptor SM_vertex_descriptor;\ntypedef SurfaceMesh::Property_map&lt;SM_halfedge_descriptor, Point_2&gt; UV_pmap;\ntypedef SurfaceMesh::Property_map&lt;SM_edge_descriptor, bool&gt; Seam_edge_pmap;\ntypedef SurfaceMesh::Property_map&lt;SM_vertex_descriptor, bool&gt; Seam_vertex_pmap;\ntypedef CGAL::Seam_mesh&lt;SurfaceMesh, Seam_edge_pmap, Seam_vertex_pmap&gt; Mesh;\ntypedef boost::graph_traits&lt;Mesh&gt;::vertex_descriptor vertex_descriptor;\ntypedef boost::graph_traits&lt;Mesh&gt;::halfedge_descriptor halfedge_descriptor;\ntypedef boost::graph_traits&lt;Mesh&gt;::face_descriptor face_descriptor;\n\nnamespace SMP = CGAL::Surface_mesh_parameterization;\n\nint main(int argc, char** argv)\n{\n  std::ifstream in_mesh((argc&gt;1) ? argv[1] : \"data/lion.off\");\n  if(!in_mesh){\n    std::cerr &lt;&lt; \"Error: problem loading the input data\" &lt;&lt; std::endl;\n    return EXIT_FAILURE;\n  }\n\n  SurfaceMesh sm;\n  in_mesh &gt;&gt; sm;\n\n  Seam_edge_pmap seam_edge_pm = sm.add_property_map&lt;SM_edge_descriptor, bool&gt;(\"e:on_seam\", false).first;\n  Seam_vertex_pmap seam_vertex_pm = sm.add_property_map&lt;SM_vertex_descriptor, bool&gt;(\"v:on_seam\", false).first;\n\n  Mesh mesh(sm, seam_edge_pm, seam_vertex_pm);\n  UV_pmap uv_pm = sm.add_property_map&lt;SM_halfedge_descriptor, Point_2&gt;(\"h:uv\").first;\n\n  halfedge_descriptor bhd = CGAL::Polygon_mesh_processing::longest_border(mesh, CGAL::Polygon_mesh_processing::parameters::all_default()).first;\n\n  typedef SMP::Two_vertices_parameterizer_3&lt;Mesh&gt;                Border_parameterizer;\n  typedef SMP::LSCM_parameterizer_3&lt;Mesh, Border_parameterizer&gt;  Parameterizer;\n\n  // Here's where the big changes start.\n  SurfaceMesh::Property_map&lt;SM_halfedge_descriptor, int&gt; vimap = sm.add_property_map&lt;SM_halfedge_descriptor, int&gt;(\"h:vi\").first;\n  SurfaceMesh::Property_map&lt;SM_halfedge_descriptor, bool&gt; vpmap = sm.add_property_map&lt;SM_halfedge_descriptor, bool&gt;(\"h:vp\").first;\n  Parameterizer parameterizer;\n  parameterizer.parameterize(mesh, bhd, uv_pm, vimap, vpmap);\n\n  const char* uvmap_file = \"uvmap.off\";\n  std::ofstream uvmap_out(uvmap_file);\n  SMP::IO::output_uvmap_to_off(mesh,sm.vertices(),sm.faces(),uv_pm,vimap,uvmap_out);\n\n  return EXIT_SUCCESS;\n}\n</code></pre>\n\n<p>This does not compile, complaining about a required conversion on line 131 in File_off.h.</p>\n\n<h2> Actual questions </h2>\n\n<ul>\n<li>Is <code>vimap</code> initialized correctly?</li>\n<li>Is this the reasonable direction towards my goal of writing the vertices in the same order?</li>\n<li>If yes, how do I pass the correct arguments to <code>output_uvmap_to_off(...)</code>? For instance, it asks for a <code>VertexContainer</code> and I provide a <code>Vertex_range</code> (hence the compilation error, I suppose). Shall I just collect the vertices as suggested <a href=\"https://stackoverflow.com/questions/48809669/how-to-get-the-vertices-and-the-faces-of-a-polygon-mesh-with-cgal\">here</a> or <a href=\"https://stackoverflow.com/questions/39521720/cgal-read-vertices-and-triangles-from-mesh\">here</a> or is there a more elegant way?</li>\n<li>If no, what is the right course of action?</li>\n</ul>\n"}, {"tags": ["c++", "class", "constants"], "comments": [{"owner": {"reputation": 970, "user_id": 6253220, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/x8kg9.jpg?s=128&g=1", "display_name": "Ic3fr0g", "link": "https://stackoverflow.com/users/6253220/ic3fr0g"}, "edited": false, "score": 0, "creation_date": 1549460780, "post_id": 54554898, "comment_id": 95909877, "body": "Try <code>a.getTestClass();</code> followed by <code>a.setValue(89);</code> in main()"}], "answers": [{"tags": [], "owner": {"reputation": 16436, "user_id": 10411602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b534549770aedbc4d7eb03a39d740f6?s=128&d=identicon&r=PG&f=1", "display_name": "Blaze", "link": "https://stackoverflow.com/users/10411602/blaze"}, "is_accepted": false, "score": 0, "last_activity_date": 1549460289, "creation_date": 1549460289, "answer_id": 54554957, "question_id": 54554898, "link": "https://stackoverflow.com/questions/54554898/class-modify-via-set-get-methods/54554957#54554957", "title": "class modify via set/get methods", "body": "<p>You're returning a copy of <code>_testClass</code>. So when you modify it with <code>setValue(89)</code>, nothing happens because you're only modifying a copy that is discarded at the end of the line. Instead, you should return a reference.</p>\n\n<p>Change this here:</p>\n\n<pre><code>TestClass getTestClass() const{\n</code></pre>\n\n<p>To this:</p>\n\n<pre><code>TestClass &amp;getTestClass() {\n</code></pre>\n\n<p>And you get the expected output.</p>\n"}, {"tags": [], "owner": {"reputation": 5093, "user_id": 6039995, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/QuCId.png?s=128&g=1", "display_name": "Stack Danny", "link": "https://stackoverflow.com/users/6039995/stack-danny"}, "is_accepted": true, "score": 0, "last_activity_date": 1549460392, "creation_date": 1549460392, "answer_id": 54554985, "question_id": 54554898, "link": "https://stackoverflow.com/questions/54554898/class-modify-via-set-get-methods/54554985#54554985", "title": "class modify via set/get methods", "body": "<p>replace</p>\n\n<pre><code>TestClass getTestClass() const{\n    return _testClass;\n}\n</code></pre>\n\n<p>with</p>\n\n<pre><code>TestClass&amp; getTestClass() {\n    return _testClass;\n}\n</code></pre>\n\n<p>You want to return a <a href=\"https://en.wikipedia.org/wiki/Reference_(C%2B%2B)\" rel=\"nofollow noreferrer\">reference</a> otherwise you are just returning a copy of the variable. But Keep in mind that returning a (non-const) reference to the member variables of a class is not a good design approach. </p>\n\n<p>Some things:</p>\n\n<ul>\n<li><p>please don't use <code>using namespace std;</code> - read <a href=\"https://stackoverflow.com/questions/1452721/why-is-using-namespace-std-considered-bad-practice\">here</a> why.</p></li>\n<li><p>please don't name your variables <code>_testClass</code> - go with <code>m_testClass</code> instead. You can read <a href=\"https://stackoverflow.com/questions/228783/what-are-the-rules-about-using-an-underscore-in-a-c-identifier\">hear</a> about the reasoning.</p></li>\n</ul>\n"}], "owner": {"reputation": 15, "user_id": 3716071, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/374d87886b400ab327a39c2728a989db?s=128&d=identicon&r=PG&f=1", "display_name": "MSB", "link": "https://stackoverflow.com/users/3716071/msb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 1, "accepted_answer_id": 54554985, "answer_count": 2, "score": 0, "last_activity_date": 1549460392, "creation_date": 1549460096, "question_id": 54554898, "link": "https://stackoverflow.com/questions/54554898/class-modify-via-set-get-methods", "title": "class modify via set/get methods", "body": "<p>trying to modify object in the class via get/set methods. I can't understand how change value just only use get/set method.</p>\n\n<p>expected output : \"Output : 89\". </p>\n\n<p>actual output  : \"Output : 0\"</p>\n\n<pre><code>#include&lt;iostream&gt;\n\nusing namespace std;\n\nclass TestClass{\npublic:\n    int getValue() const{\n        return _value;\n    }\n\n    void setValue(int value) {\n        _value = value;\n    }\n\nprivate:\n\n    int _value;\n};\n\nclass A{\npublic:\n    TestClass getTestClass() const{\n        return _testClass;\n    }\n\n    void setTestClass(TestClass testClass) {\n        _testClass = testClass;\n    }\n\nprivate:\n    TestClass _testClass;\n};\n\nint main()\n{\n\n    A a;\n\n    a.getTestClass().setValue(89);\n\n    cout&lt;&lt;\"Output :\"&lt;&lt;a.getTestClass().getValue();\n\n}\n</code></pre>\n"}, {"tags": ["c++", "linux-device-driver"], "comments": [{"owner": {"reputation": 2315, "user_id": 4030223, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/1eoit.png?s=128&g=1", "display_name": "Erik Alap&#228;&#228;", "link": "https://stackoverflow.com/users/4030223/erik-alap%c3%a4%c3%a4"}, "edited": false, "score": 0, "creation_date": 1549460188, "post_id": 54554858, "comment_id": 95909528, "body": "Just use lspci. There are some wrappers that can capture the output of the cmd in a string, google for it."}, {"owner": {"reputation": 30796, "user_id": 1145666, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/rXvMA.jpg?s=128&g=1", "display_name": "Bart Friederichs", "link": "https://stackoverflow.com/users/1145666/bart-friederichs"}, "edited": false, "score": 0, "creation_date": 1549460188, "post_id": 54554858, "comment_id": 95909529, "body": "You could run <code>lspci</code> and parse the result ..."}], "answers": [{"comments": [{"owner": {"reputation": 109, "user_id": 6223628, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1efe31cfe6282e29a36dfed3a92e7de9?s=128&d=identicon&r=PG", "display_name": "Seetharama", "link": "https://stackoverflow.com/users/6223628/seetharama"}, "edited": false, "score": 0, "creation_date": 1549465662, "post_id": 54554973, "comment_id": 95912989, "body": "the example was exactly what I was looking for!"}], "tags": [], "owner": {"reputation": 3397, "user_id": 1255016, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c20883abe67a3a886c4955a515273b53?s=128&d=identicon&r=PG", "display_name": "hfhc2", "link": "https://stackoverflow.com/users/1255016/hfhc2"}, "is_accepted": true, "score": 4, "last_activity_date": 1549460352, "creation_date": 1549460352, "answer_id": 54554973, "question_id": 54554858, "link": "https://stackoverflow.com/questions/54554858/c-analogue-for-lspci-command/54554973#54554973", "title": "C++ analogue for -lspci command", "body": "<p>The <code>lspci</code> program uses <code>libpci</code> internally. Both the program and the library are part of the <a href=\"https://github.com/pciutils/pciutils\" rel=\"nofollow noreferrer\">pciutils</a> package. To use <code>libpci</code> programmatically from C or C++, I suggest taking a look at the <a href=\"https://github.com/pciutils/pciutils/blob/master/example.c\" rel=\"nofollow noreferrer\">example</a>.</p>\n"}], "owner": {"reputation": 109, "user_id": 6223628, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1efe31cfe6282e29a36dfed3a92e7de9?s=128&d=identicon&r=PG", "display_name": "Seetharama", "link": "https://stackoverflow.com/users/6223628/seetharama"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 571, "favorite_count": 0, "accepted_answer_id": 54554973, "answer_count": 1, "score": 0, "last_activity_date": 1549460352, "creation_date": 1549459978, "question_id": 54554858, "link": "https://stackoverflow.com/questions/54554858/c-analogue-for-lspci-command", "title": "C++ analogue for -lspci command", "body": "<p>I need to search for Hardwares in linux environment based on Vendor IDs programmatically using C++.\nI know that I can get the list using </p>\n\n<blockquote>\n  <p>-lspci</p>\n</blockquote>\n\n<p>Can anyone throw some light here??</p>\n\n<p>Thanks and Best Regards</p>\n"}, {"tags": ["c++", "c++11", "c++14"], "comments": [{"owner": {"reputation": 429, "user_id": 10209003, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8d9d1dd420c5e9381d2978720c47940?s=128&d=identicon&r=PG&f=1", "display_name": "Korni", "link": "https://stackoverflow.com/users/10209003/korni"}, "edited": false, "score": 0, "creation_date": 1549460235, "post_id": 54554443, "comment_id": 95909550, "body": "Isn&#39;t e.g. <code>wrapper(1,static_cast&lt;void*&gt;(&amp;name), getUserName);</code> doing the job by implicit conversion. Just a thought not tested ;)"}, {"owner": {"reputation": 1001, "user_id": 4044050, "user_type": "registered", "accept_rate": 46, "profile_image": "https://i.stack.imgur.com/Fawzb.jpg?s=128&g=1", "display_name": "Debashish", "link": "https://stackoverflow.com/users/4044050/debashish"}, "reply_to_user": {"reputation": 429, "user_id": 10209003, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8d9d1dd420c5e9381d2978720c47940?s=128&d=identicon&r=PG&f=1", "display_name": "Korni", "link": "https://stackoverflow.com/users/10209003/korni"}, "edited": false, "score": 0, "creation_date": 1549460562, "post_id": 54554443, "comment_id": 95909755, "body": "@Korni. It shows, <code>invalid use of non-static member function \u2018void Entity::getUserName(int, void*)\u2019</code> error."}], "answers": [{"comments": [{"owner": {"reputation": 1001, "user_id": 4044050, "user_type": "registered", "accept_rate": 46, "profile_image": "https://i.stack.imgur.com/Fawzb.jpg?s=128&g=1", "display_name": "Debashish", "link": "https://stackoverflow.com/users/4044050/debashish"}, "edited": false, "score": 0, "creation_date": 1549460723, "post_id": 54555037, "comment_id": 95909837, "body": "It did not work for me with a class member function. Please consider using a class member function only."}, {"owner": {"reputation": 429, "user_id": 10209003, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8d9d1dd420c5e9381d2978720c47940?s=128&d=identicon&r=PG&f=1", "display_name": "Korni", "link": "https://stackoverflow.com/users/10209003/korni"}, "reply_to_user": {"reputation": 1001, "user_id": 4044050, "user_type": "registered", "accept_rate": 46, "profile_image": "https://i.stack.imgur.com/Fawzb.jpg?s=128&g=1", "display_name": "Debashish", "link": "https://stackoverflow.com/users/4044050/debashish"}, "edited": false, "score": 0, "creation_date": 1549461453, "post_id": 54555037, "comment_id": 95910280, "body": "@Debashish Updated my answer"}, {"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 1, "creation_date": 1549462309, "post_id": 54555037, "comment_id": 95910824, "body": "<code>this-&gt;getUserName</code> is an invalid use of a non-static member function name. The only way to form a pointer to member is with the <code>&amp;Entity::getUserName</code> syntax."}, {"owner": {"reputation": 429, "user_id": 10209003, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8d9d1dd420c5e9381d2978720c47940?s=128&d=identicon&r=PG&f=1", "display_name": "Korni", "link": "https://stackoverflow.com/users/10209003/korni"}, "reply_to_user": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 1, "creation_date": 1549462596, "post_id": 54555037, "comment_id": 95911010, "body": "@aschepler you&#39;re right thanks, just deleted this part. Avoiding function pointers &amp; lambdas is also the better solution IMO."}, {"owner": {"reputation": 1001, "user_id": 4044050, "user_type": "registered", "accept_rate": 46, "profile_image": "https://i.stack.imgur.com/Fawzb.jpg?s=128&g=1", "display_name": "Debashish", "link": "https://stackoverflow.com/users/4044050/debashish"}, "edited": false, "score": 0, "creation_date": 1549463388, "post_id": 54555037, "comment_id": 95911539, "body": "<code>#define CALL_MEMBER_FN(object,ptrToMember)  ((object).*(ptrToMember))</code>  <code>void Entity::wrapper(int id, void *arg, void (Entity::* func)(int, void*)) {     cout &lt;&lt;&quot;\\nSome Other critical task based on id&quot;&lt;&lt; endl;     CALL_MEMBER_FN(*this,func)(id,arg); }</code> - worked."}], "tags": [], "owner": {"reputation": 429, "user_id": 10209003, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8d9d1dd420c5e9381d2978720c47940?s=128&d=identicon&r=PG&f=1", "display_name": "Korni", "link": "https://stackoverflow.com/users/10209003/korni"}, "is_accepted": false, "score": 0, "last_activity_date": 1549462539, "last_edit_date": 1549462539, "creation_date": 1549460584, "answer_id": 54555037, "question_id": 54554443, "link": "https://stackoverflow.com/questions/54554443/pass-class-member-function-as-argument-from-another-member-function-of-the-same/54555037#54555037", "title": "pass class member function as argument from another member function of the same class", "body": "<p>In my opinion I think you're causing yourself problem by forcing the use of <code>lambda</code>, I know they are interesting, but often aren't very useful. In general keep it simply stupid (KISS) and in your case just divide the functions in two seperate functions.</p>\n\n<pre><code>class Entity {\n    public:\n        ...            \n        void getUserName(int id,void * arg);\n        void setUserName(int id,void * arg);\n        void procedure();\n        void criticalTask(int id); // critical task, based on id\n};\n\nvoid Entity::getUserName(int id,void *arg) {...}\n\nvoid Entity::setUserName(int id,void *arg) {...}\n\nvoid Entity::criticalTask(int id) {\n    cout &lt;&lt;\"\\nSome Other critical task based on id\"&lt;&lt; endl;\n}\n\nvoid Entity::procedure() {\n    cout &lt;&lt;\"Procedure starts\"&lt;&lt;endl;\n\n    ...\n\n    criticalTask(id);\n    getUserName(id, &amp;name);\n\n    ...\n\n}\n\nint main() {\n    Entity E;\n    E.procedure();\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 9551, "user_id": 9837301, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9414V.png?s=128&g=1", "display_name": "JaMiT", "link": "https://stackoverflow.com/users/9837301/jamit"}, "is_accepted": true, "score": 1, "last_activity_date": 1549502178, "creation_date": 1549502178, "answer_id": 54564980, "question_id": 54554443, "link": "https://stackoverflow.com/questions/54554443/pass-class-member-function-as-argument-from-another-member-function-of-the-same/54564980#54564980", "title": "pass class member function as argument from another member function of the same class", "body": "<p>I'll start with a direct answer, but please read on to the caveat that follows it.</p>\n\n<p>A simpler syntax for what you are trying to do would involve changing the type of the third parameter to <code>wrapper()</code>. Instead of converting member functions to non-member functions, just take the member function as a parameter.</p>\n\n<pre><code>void wrapper(int id, void* arg, void (Entity::* func)(int,void*))\n{\n    cout &lt;&lt;\"\\nSome Other critical task based on id\"&lt;&lt; endl;\n    (this-&gt;*func)(id, arg);\n}\n</code></pre>\n\n<p>Then your calls would become simpler:</p>\n\n<pre><code>wrapper(1, static_cast&lt;void*&gt;(&amp;name), &amp;Entity::getUserName);\nwrapper(1, static_cast&lt;void*&gt;(&amp;name), &amp;Entity::setUserName);\n</code></pre>\n\n<p><strong>However</strong> is this really the approach you want to take? You are relying on people remembering to call the wrapper instead of calling the other member functions directly. If you forget to use the wrapper at some point, will you be able to track down the cause based on the symptoms? Do you even want to try?</p>\n\n<p>A more robust approach would be to put the critical task in its own function, then have the getters and setters call that. Something more like:</p>\n\n<pre><code>void criticalStuff(int id)\n{\n    cout &lt;&lt;\"Some critical task based on id\\n\";\n}\n\nvoid Entity::getUserName(int id, string &amp; arg)\n{\n    criticalStuff(id); // Critical stuff first.\n\n    auto iter = userMap.find(id);\n    if(iter != userMap.end()) {\n        arg = iter-&gt;second.name; \n    }\n}\n\nvoid Entity::setUserName(int id, const string &amp; arg)\n{\n    criticalStuff(id); // Critical stuff first.\n\n    auto iter = userMap.find(id);\n    if(iter != userMap.end()) {\n        iter-&gt;second.name = arg;\n    }\n}\n</code></pre>\n\n<p>Anyone adding new fields would still have to remember the critical stuff when writing new getters and setters, but the more common case (calling those functions) would handle the critical stuff automatically. Plus, you get to bring back type checking of parameters, since there appears to no longer be a reason to cast stuff to <code>void *</code>.</p>\n"}], "owner": {"reputation": 1001, "user_id": 4044050, "user_type": "registered", "accept_rate": 46, "profile_image": "https://i.stack.imgur.com/Fawzb.jpg?s=128&g=1", "display_name": "Debashish", "link": "https://stackoverflow.com/users/4044050/debashish"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "accepted_answer_id": 54564980, "answer_count": 2, "score": 0, "last_activity_date": 1549502178, "creation_date": 1549458626, "question_id": 54554443, "link": "https://stackoverflow.com/questions/54554443/pass-class-member-function-as-argument-from-another-member-function-of-the-same", "title": "pass class member function as argument from another member function of the same class", "body": "<p>I have provided a simpler version of the problem, that I am dealing with. </p>\n\n<p>I have class <code>Entity</code>, which has a <code>map</code> of a <code>user</code> object. For simplicity, I have added only one element(<code>name</code>). I have implemented <code>getter</code> and <code>setter</code> around the <code>userMap</code> object.</p>\n\n<p>The <code>wrapper</code> function is required for me, to handle a critical situation because of a multi-threaded case. (not shown here). I have somehow implemented a working example by going through a few SO threads. </p>\n\n<p>But as you can see, I have to write <code>(id,arg)</code> tuple argument in three places while using <code>wrapper</code> function inside <code>procedure</code> function. Is there a way of implementing the same functionality by having some kind of placeholder for the function arguments so that calling the wrapper looks clean, i.e. <code>wrapper(1,static_cast&lt;void*&gt;(&amp;name),function_ptr)</code>.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;functional&gt;\n#include &lt;map&gt;\nusing namespace std;\nclass Entity {\n    public:\n        struct user {\n            int id;\n            string name;\n        };\n        map&lt;int,user&gt; userMap;\n\n        void getUserName(int id,void * arg);\n        void setUserName(int id,void * arg);\n        void procedure();\n        void wrapper(int id,void*,std::function&lt;void(int,void*)&gt;);\n};\n\nvoid Entity::getUserName(int id,void *arg) {\n    auto iter = userMap.find(id);\n\n    if(iter != userMap.end()) {\n        *static_cast&lt;string*&gt;(arg) = iter-&gt;second.name; \n    }\n}\n\nvoid Entity::setUserName(int id,void *arg) {\n    auto iter = userMap.find(id);\n    if(iter != userMap.end()) {\n        iter-&gt;second.name = *static_cast&lt;string*&gt;(arg);\n    }\n}\n\nvoid Entity::wrapper(int id,void *arg,std::function&lt;void(int,void*)&gt; func) {\n    cout &lt;&lt;\"\\nSome Other critical task based on id\"&lt;&lt; endl;\n\n    // then call the callback\n    func(id,arg);\n}\n\nvoid Entity::procedure() {\n    cout &lt;&lt;\"Procedure starts\"&lt;&lt;endl;\n\n    user u = {};\n    u.id = 1;\n    u.name = \"abc\";\n    this-&gt;userMap[1] = u;\n\n    string name;\n    wrapper(1,static_cast&lt;void*&gt;(&amp;name),[this](int id,void*arg){\n        getUserName(id,arg);\n    });\n    cout &lt;&lt;\"name :\"&lt;&lt; name &lt;&lt; endl;\n\n    cout &lt;&lt;\"\\nSome processing...\"&lt;&lt;endl;\n\n    name = \"def\";\n    wrapper(1,static_cast&lt;void*&gt;(&amp;name),[this](int id,void*arg){\n        setUserName(id,arg);\n    });\n\n    cout &lt;&lt;\"\\nSome more processing...\"&lt;&lt;endl;\n\n    wrapper(1,static_cast&lt;void*&gt;(&amp;name),[this](int id,void*arg){\n        getUserName(id,arg);\n    });\n\n    cout &lt;&lt;\"name :\"&lt;&lt; name &lt;&lt; endl;\n\n    cout &lt;&lt;\"Procedure ends\"&lt;&lt;endl;\n}\n\nint main() {\n    Entity E;\n    E.procedure();\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>Some Other critical task based on id\nname :abc\n\nSome processing...\n\nSome Other critical task based on id\n\nSome more processing...\n\nSome Other critical task based on id\nname :def\nProcedure ends\n</code></pre>\n\n<p>Thanks!</p>\n"}, {"tags": ["c++", "glsl", "qtopengl"], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 10675762, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-lqCoTX3q__Q/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-hW3fMQZF-HdfMcy0RxACLbohO48A/mo/photo.jpg?sz=128", "display_name": "Zitrouille", "link": "https://stackoverflow.com/users/10675762/zitrouille"}, "edited": false, "score": 0, "creation_date": 1549524745, "post_id": 54564256, "comment_id": 95934602, "body": "Thank you for your answer :) i will try this today and come back later but i think a kdtree is a good solution."}], "tags": [], "owner": {"reputation": 51, "user_id": 4124480, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8e492c687142e453833fcf8fb6dc641?s=128&d=identicon&r=PG", "display_name": "Thomas Delame", "link": "https://stackoverflow.com/users/4124480/thomas-delame"}, "is_accepted": false, "score": 0, "last_activity_date": 1549496512, "creation_date": 1549496512, "answer_id": 54564256, "question_id": 54554216, "link": "https://stackoverflow.com/questions/54554216/how-to-combine-multiple-point-cloud-of-same-object-hand-scan/54564256#54564256", "title": "How to combine multiple point cloud of same object hand scan", "body": "<p>You have a collection of N point clouds, representing the same object, possibly all in a different space (given by a transformation matrix), and you want to combine them into only one point cloud. Is that correct?</p>\n\n<p>I may miss the point, because the only method I can think of is quite simple. So correct me if I'm wrong.</p>\n\n<p>Put all the point clouds into the same space. Now, all your points are in the same space and merging your transformed point clouds is trivial. </p>\n\n<p>You might want to remove duplicate points though, since they could be annoying for algorithms using neighbourhood. To do so, you can use a kdtree and make a radius search around each point with a very small radius to detect clusters: keep only one point for each cluster found. With the scan resolution, you could have a good guess of what is the typical distance <code>d</code> between two adjacent points. Otherwise, you could estimate it by computing the average distance between a point and its closest / second closest point, for each transformed point cloud. Now, a \"small radius\" is a small portion of this typical distance <code>d</code>. </p>\n"}], "owner": {"reputation": 11, "user_id": 10675762, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-lqCoTX3q__Q/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-hW3fMQZF-HdfMcy0RxACLbohO48A/mo/photo.jpg?sz=128", "display_name": "Zitrouille", "link": "https://stackoverflow.com/users/10675762/zitrouille"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 291, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1549496512, "creation_date": 1549457904, "question_id": 54554216, "link": "https://stackoverflow.com/questions/54554216/how-to-combine-multiple-point-cloud-of-same-object-hand-scan", "title": "How to combine multiple point cloud of same object hand scan", "body": "<p>I'm working on a school project and one of the things i have to do is to combine multiple scans of the same object. These scans or .obj files and i want to combine them to obtain a better scan object.</p>\n\n<p>I search solutions on the internet but i don't find any acceptable solution, so if someone just have an idea or a track to follow, i will appreciate it.</p>\n\n<p>If you have any question about my problem ask me, maybe my english is not correct, i'm French.</p>\n\n<p>Thank's !</p>\n"}, {"tags": ["c++", "c++11", "boost-asio"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1549458271, "post_id": 54554207, "comment_id": 95908356, "body": "<code>packet packet</code> this is valid?"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 2, "creation_date": 1549458321, "post_id": 54554207, "comment_id": 95908382, "body": "@user463035818 <a href=\"http://coliru.stacked-crooked.com/a/ac85a14ac4e1c10d\" rel=\"nofollow noreferrer\">Sadly so</a> (but it&#39;s a bad naming choice)"}, {"owner": {"reputation": 1444, "user_id": 6534880, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6YTr5.jpg?s=128&g=1", "display_name": "Prodigle", "link": "https://stackoverflow.com/users/6534880/prodigle"}, "edited": false, "score": 3, "creation_date": 1549458356, "post_id": 54554207, "comment_id": 95908405, "body": "Not familiar with this part of boost but generally if you don&#39;t know how much data is coming before the data transmission that&#39;s fairly bad design on the senders part. Ideally the sender should prepend the data with the length of the data so you can allocate accordingly.  If this is impossible you basically just have to guess, allocate a big chunk of memory, read until end of stream or that chunk is full, put that chunk somewhere else and start reading again to your buffer, repeat steps until EOS then combine chunks."}, {"owner": {"reputation": 11354, "user_id": 70600, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/6123be50f7a10302e7bf59dcdc5e2623?s=128&d=identicon&r=PG", "display_name": "ruipacheco", "link": "https://stackoverflow.com/users/70600/ruipacheco"}, "reply_to_user": {"reputation": 17331, "user_id": 8950365, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c6ba3b19f86f1bea8cf76e691db4349?s=128&d=identicon&r=PG&f=1", "display_name": "rafix07", "link": "https://stackoverflow.com/users/8950365/rafix07"}, "edited": false, "score": 0, "creation_date": 1549458784, "post_id": 54554207, "comment_id": 95908692, "body": "@rafix07 this is the read from the question you answered yesterday. It&#39;s a lambda."}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "reply_to_user": {"reputation": 1444, "user_id": 6534880, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6YTr5.jpg?s=128&g=1", "display_name": "Prodigle", "link": "https://stackoverflow.com/users/6534880/prodigle"}, "edited": false, "score": 0, "creation_date": 1549460163, "post_id": 54554207, "comment_id": 95909507, "body": "To echo @Prodigle, if there&#39;s an upper bound to how much you are transferring you can just resize to that much, read it in one go, and then resize it down to what was read in the receive. That&#39;s what the <code>std::size_t length</code> is <b>for</b>"}, {"owner": {"reputation": 11354, "user_id": 70600, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/6123be50f7a10302e7bf59dcdc5e2623?s=128&d=identicon&r=PG", "display_name": "ruipacheco", "link": "https://stackoverflow.com/users/70600/ruipacheco"}, "reply_to_user": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 0, "creation_date": 1549460241, "post_id": 54554207, "comment_id": 95909555, "body": "@Caleth No upper bound. I guess I&#39;m better off with the move?"}], "answers": [{"comments": [{"owner": {"reputation": 11354, "user_id": 70600, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/6123be50f7a10302e7bf59dcdc5e2623?s=128&d=identicon&r=PG", "display_name": "ruipacheco", "link": "https://stackoverflow.com/users/70600/ruipacheco"}, "edited": false, "score": 0, "creation_date": 1549465784, "post_id": 54556174, "comment_id": 95913058, "body": "Quick note: I had to call m_buffer.clear() before the first async_read()."}], "tags": [], "owner": {"reputation": 17331, "user_id": 8950365, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c6ba3b19f86f1bea8cf76e691db4349?s=128&d=identicon&r=PG&f=1", "display_name": "rafix07", "link": "https://stackoverflow.com/users/8950365/rafix07"}, "is_accepted": true, "score": 1, "last_activity_date": 1549464140, "creation_date": 1549464140, "answer_id": 54556174, "question_id": 54554207, "link": "https://stackoverflow.com/questions/54554207/how-to-read-data-when-length-is-unknown/54556174#54556174", "title": "How to read data when length is unknown?", "body": "<p>First, you cannot do it:</p>\n\n<pre><code> asio::async_read(*m_socket, asio::buffer(tmp), asio::transfer_exactly(available)); //[1]\n tmp.insert(tmp.begin(), std::make_move_iterator(m_buffer.begin()),\n                            std::make_move_iterator(m_buffer.end())); // [2]\n</code></pre>\n\n<p>in [1] asynchronous operation starts. <code>async_read</code> returns immediately. Then we have two concurrent operations, the first inserts into <code>tmp</code>, the second (asynchronous operation) fills <code>tmp</code> by some data.\nYou can use synchronous operation: <code>asio::read</code> instead of <code>asio::async_read</code>, the former is blocking function, so <code>insert</code> is only performed when data has been read.</p>\n\n<hr>\n\n<p>If you don't want to play with concatenating vector, creating temporary objects etc. you can use <strong>boost::asio::dynamic_buffer</strong>:</p>\n\n<pre><code>struct listener {\n vector&lt;char&gt; m_buffer;\n // others members\n};\n\nvoid listener::read(std::function&lt;void(std::error_code ec, packet p)&gt; callback) \n{\n  boost::asio::async_read(m_socket, boost::asio::dynamic_buffer(m_buffer), boost::asio::transfer_exactly(1),\n                                                 ^^^^^^^^^^^^^\n             [&amp;, callback](std::error_code ec, std::size_t length) \n             {\n                 const auto available = m_socket.available();\n                 boost::asio::async_read(m_socket, boost::asio::dynamic_buffer(m_buffer), \n                                                                ^^^^^^^^^^^^^\n                      boost::asio::transfer_exactly(available),\n                   [this,callback](const boost::system::error_code&amp; ec, size_t)\n                   {\n                      callback(ec, std::move(m_buffer));\n                   });\n            });\n}\n</code></pre>\n\n<p><code>m_buffer</code> is automatically increased by <em>async operation</em>. You don't do it manually. As you can see I added the new handler -> where is called <code>callback(ec,move(m_buffer))</code>. When this handler is called we know that read operation ends.</p>\n"}], "owner": {"reputation": 11354, "user_id": 70600, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/6123be50f7a10302e7bf59dcdc5e2623?s=128&d=identicon&r=PG", "display_name": "ruipacheco", "link": "https://stackoverflow.com/users/70600/ruipacheco"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 123, "favorite_count": 0, "accepted_answer_id": 54556174, "answer_count": 1, "score": 3, "last_activity_date": 1549464140, "creation_date": 1549457879, "question_id": 54554207, "link": "https://stackoverflow.com/questions/54554207/how-to-read-data-when-length-is-unknown", "title": "How to read data when length is unknown?", "body": "<p>I'm currently using boost::asio to read data across network connections but settled on a pattern I feel is inneficient:</p>\n\n<pre><code>auto listener::read(std::function&lt;void(std::error_code ec, packet packet)&gt; callback) noexcept -&gt; void {\n  m_buffer.resize(1);\n  m_buffer.shrink_to_fit();\n\n  asio::async_read(*m_socket, asio::buffer(m_buffer), asio::transfer_exactly(1),\n                   [&amp;, callback](std::error_code ec, std::size_t length) {\n                     const auto available = m_socket-&gt;available();\n                     packet tmp;\n                     tmp.resize(available);\n                     asio::async_read(*m_socket, asio::buffer(tmp), asio::transfer_exactly(available));\n                     tmp.insert(tmp.begin(), std::make_move_iterator(m_buffer.begin()),\n                                std::make_move_iterator(m_buffer.end()));\n                     callback(ec, std::move(tmp));\n                   });\n}\n</code></pre>\n\n<p>(<code>packet</code> is <code>std::vector&lt;unsigned char&gt;</code>)</p>\n\n<p>I'm not sure how to create this without the temporary. I can't resize <code>m_buffer</code> at the beginning because I don't know how much data is coming. I tried to use <code>m_buffer</code> only resizing within the lambda to match <code>available</code> + 1 but I just end up losing the first byte stored in <code>m_buffer</code>.</p>\n\n<p>Is there a more efficient way to do this when expecting a packet of unknown length?</p>\n"}, {"tags": ["c++", "qt", "websocket"], "comments": [{"owner": {"reputation": 924, "user_id": 6853090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d9672c1ff8637fd1cdf43bfa35e50cc3?s=128&d=identicon&r=PG&f=1", "display_name": "Konstantin T.", "link": "https://stackoverflow.com/users/6853090/konstantin-t"}, "edited": false, "score": 0, "creation_date": 1549458189, "post_id": 54554094, "comment_id": 95908309, "body": "There is no <code>WebSocketSync</code> class in Qt. It seems you use some other lib or your example is incomplete."}, {"owner": {"reputation": 1, "user_id": 8918192, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9fded70d5bba23d0475c2227744e2d6f?s=128&d=identicon&r=PG&f=1", "display_name": "trsv", "link": "https://stackoverflow.com/users/8918192/trsv"}, "reply_to_user": {"reputation": 924, "user_id": 6853090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d9672c1ff8637fd1cdf43bfa35e50cc3?s=128&d=identicon&r=PG&f=1", "display_name": "Konstantin T.", "link": "https://stackoverflow.com/users/6853090/konstantin-t"}, "edited": false, "score": 0, "creation_date": 1549459180, "post_id": 54554094, "comment_id": 95908933, "body": "@KonstantinT. WebSocketSync is my wrapper over the QWebsocket class. I added code"}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 8918192, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9fded70d5bba23d0475c2227744e2d6f?s=128&d=identicon&r=PG&f=1", "display_name": "trsv", "link": "https://stackoverflow.com/users/8918192/trsv"}, "is_accepted": false, "score": 0, "last_activity_date": 1550617654, "creation_date": 1550617654, "answer_id": 54776291, "question_id": 54554094, "link": "https://stackoverflow.com/questions/54554094/qt-websocket-connect-to-server/54776291#54776291", "title": "Qt websocket, connect to server", "body": "<p>The reason was that the server sent out binary data. I need to use <code>QWebSocket::binaryMessageReceived</code> for this connection.\nNow i need to figure out how to handle binary data (\\x1F\\x8B\\b\\x00\\x00)</p>\n"}], "owner": {"reputation": 1, "user_id": 8918192, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9fded70d5bba23d0475c2227744e2d6f?s=128&d=identicon&r=PG&f=1", "display_name": "trsv", "link": "https://stackoverflow.com/users/8918192/trsv"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 367, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1550617654, "creation_date": 1549457505, "last_edit_date": 1549459105, "question_id": 54554094, "link": "https://stackoverflow.com/questions/54554094/qt-websocket-connect-to-server", "title": "Qt websocket, connect to server", "body": "<p>I'm trying to connect to \"wss://api.huobi.pro/ws\". \nAfter connecting I have to subscribe to the channel with message \"{\"id\":\"wanbtc\",\"sub\":\"market.wanbtc.depth.step0\"}\"</p>\n\n<pre><code>    auto ws = new WebSocketSync;\n    ws-&gt;setIs_display_scan_speed(new bool(false));\n\n    QJsonObject json;\n    json[\"sub\"] = \"market.wanbtc.depth.step0\";\n    json[\"id\"] = \"wanbtc\";\n\n    ws-&gt;set_url(\"wss://api.huobi.pro/ws\");\n    ws-&gt;set_register_message(QJsonDocument(json).toJson(QJsonDocument::Compact));\n\n    ws-&gt;open();\n</code></pre>\n\n<p>Code result:</p>\n\n<pre><code>[Websocket] Current soket state: QAbstractSocket::ConnectingState\n[Websocket] Current soket state: QAbstractSocket::ConnectedState\n[Websocket] Connected to server \"wss://api.huobi.pro/ws\"\n[Websocket] Send message to server \"{\\\"id\\\":\\\"wanbtc\\\",\\\"sub\\\":\\\"market.wanbtc.depth.step0\\\"}\"\n</code></pre>\n\n<p>But after the socket does not send any data</p>\n\n<p>Similar code works on node.js</p>\n\n<pre><code>const moment = require('moment');\nconst WebSocket = require('ws');\nconst pako = require('pako');\n\nconst WS_URL = 'wss://api.huobi.pro/ws';\n\n\nvar orderbook = {};\n\nexports.OrderBook = orderbook;\n\nfunction handle(data) {\n    console.log('received', data.ch, 'data.ts', data.ts, 'crawler.ts', moment().format('x'));\n    let symbol = data.ch.split('.')[1];\n    let channel = data.ch.split('.')[2];\n    switch (channel) {\n        case 'depth':\n            orderbook[symbol] = data.tick;\n            //console.log(data.tick);\n            break;\n    }\n}\n\nfunction subscribe(ws) {\n    var symbols = ['wanbtc'];\n\n    for (let symbol of symbols) {\n        var message = JSON.stringify({\n            \"sub\": `market.${symbol}.depth.step0`,\n            \"id\": `${symbol}`\n        });\n        console.log('send to ws ' + message);\n        ws.send(message);\n    }\n\n}\n\nfunction init() {\n\n    var ws = new WebSocket(WS_URL);\n    ws.on('open', () =&gt; {\n        console.log('connect to ' + WS_URL);\n        subscribe(ws);\n    });\n    ws.on('message', (data) =&gt; {\n        let text = pako.inflate(data, {\n            to: 'string'\n        });\n        let msg = JSON.parse(text);\n        if (msg.tick) {\n            // console.log(msg);\n            handle(msg);\n        }\n\n    });\n}\n\ninit();\n</code></pre>\n\n<p>What could be the reason? working on node.js, not working on Qt. Need to find a replacement for QWebsocket?</p>\n\n<p><strong>Edit 1:</strong>\nWebSocketSync.cpp</p>\n\n<pre><code>WebSocketSync::WebSocketSync()\n{\n    connect(&amp;m_socket, &amp;QWebSocket::connected, this, [=]{\n\n        qDebug() &lt;&lt; \"[Websocket] Connected to server\" &lt;&lt; m_socket.request().url().toString();\n\n        if (m_is_need_to_register_channel) {\n\n            qDebug() &lt;&lt; \"[Websocket] Send message to server\" &lt;&lt; m_register_message;\n            m_socket.sendTextMessage(m_register_message);\n        }\n\n    });\n\n    connect(&amp;m_socket, &amp;QWebSocket::textMessageReceived, this, [=](const QString &amp; message) {\n        qDebug() &lt;&lt; message;\n    });\n\n}\n\nvoid WebSocketSync::set_url(const QString &amp;url)\n{\n//    qDebug() &lt;&lt; \"[Websocket] Server url setted:\" &lt;&lt; url;\n\n    m_url.setUrl(url);\n}\n\nvoid WebSocketSync::set_register_message(const QString &amp;url)\n{\n//    qDebug() &lt;&lt; \"[Websocket] Register message setted:\" &lt;&lt; url;\n\n    m_is_need_to_register_channel = true;\n    m_register_message = url;\n}\n\nvoid WebSocketSync::open()\n{\n//    qDebug() &lt;&lt; \"[Websocket] Open url:\" &lt;&lt; m_url;\n\n    m_socket.open(m_url);\n}\n</code></pre>\n"}, {"tags": ["c#", "c++", "unity3d", "uwp"], "comments": [{"owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 0, "creation_date": 1549457408, "post_id": 54553921, "comment_id": 95907858, "body": "why ... don&#39;t you generate a C# project from unity?"}, {"owner": {"reputation": 315, "user_id": 8112590, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/frwS1.jpg?s=128&g=1", "display_name": "Nandha", "link": "https://stackoverflow.com/users/8112590/nandha"}, "reply_to_user": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 0, "creation_date": 1549457527, "post_id": 54553921, "comment_id": 95907929, "body": ".net scripting is deprecated"}, {"owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 0, "creation_date": 1549457593, "post_id": 54553921, "comment_id": 95907967, "body": "what do you mean? C# is the main language of Unity."}, {"owner": {"reputation": 315, "user_id": 8112590, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/frwS1.jpg?s=128&g=1", "display_name": "Nandha", "link": "https://stackoverflow.com/users/8112590/nandha"}, "reply_to_user": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 0, "creation_date": 1549457754, "post_id": 54553921, "comment_id": 95908054, "body": "while generating the UWP project .net scripting is deprecated only IL2CPP  is supported"}, {"owner": {"reputation": 315, "user_id": 8112590, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/frwS1.jpg?s=128&g=1", "display_name": "Nandha", "link": "https://stackoverflow.com/users/8112590/nandha"}, "reply_to_user": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 0, "creation_date": 1549458037, "post_id": 54553921, "comment_id": 95908237, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/187997/discussion-between-nandha-and-bolov\">continue this discussion in chat</a>."}], "owner": {"reputation": 315, "user_id": 8112590, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/frwS1.jpg?s=128&g=1", "display_name": "Nandha", "link": "https://stackoverflow.com/users/8112590/nandha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 48, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1549457221, "creation_date": 1549456889, "last_edit_date": 1549457221, "question_id": 54553921, "link": "https://stackoverflow.com/questions/54553921/how-to-add-the-unity-generated-uwp-project-c-into-existing-c-uwp-project", "title": "How to add the Unity generated UWP project (C++) into Existing C# UWP project", "body": "<p>My question is can we integrate the Unity generated C++ UWP project into C# UWP project and how to call the pages in that C++ project inside a C# project.</p>\n\n<p>Is there any alternate solution for this?</p>\n\n<p><a href=\"https://i.stack.imgur.com/AGOZ6.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/AGOZ6.png\" alt=\"This is my Unity generated C++ project[![][1]\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/PNosV.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/PNosV.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["python", "c++", "python-asyncio", "pybind11"], "comments": [{"owner": {"reputation": 102109, "user_id": 1600898, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/01377f8b31f24b0265854666b29d0c03?s=128&d=identicon&r=PG", "display_name": "user4815162342", "link": "https://stackoverflow.com/users/1600898/user4815162342"}, "edited": false, "score": 0, "creation_date": 1549724104, "post_id": 54553907, "comment_id": 96009820, "body": "After re-reading your comments on the deleted answer, I am curious what the your call site (the place you want to put <code>await</code> in actually looks like). Is it an <code>async def</code> which you want to implement in C++?"}, {"owner": {"reputation": 32089, "user_id": 266198, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/7x8PT.jpg?s=128&g=1", "display_name": "Nim", "link": "https://stackoverflow.com/users/266198/nim"}, "reply_to_user": {"reputation": 102109, "user_id": 1600898, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/01377f8b31f24b0265854666b29d0c03?s=128&d=identicon&r=PG", "display_name": "user4815162342", "link": "https://stackoverflow.com/users/1600898/user4815162342"}, "edited": false, "score": 0, "creation_date": 1550050213, "post_id": 54553907, "comment_id": 96123664, "body": "@user4815162342 - that is correct, in python land - there are <code>async def</code> methods which at points have <code>await ..</code> for other async ops. So now - instead of there being an <code>async</code> python method, I have a C++ function and in there want to achieve the same effect (well, something similar)"}], "answers": [{"tags": [], "owner": {"reputation": 1325, "user_id": 10840818, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba257cfc7b141c2e2ceaa123a2f29b91?s=128&d=identicon&r=PG&f=1", "display_name": "MarkReedZ", "link": "https://stackoverflow.com/users/10840818/markreedz"}, "is_accepted": false, "score": 5, "last_activity_date": 1549829728, "creation_date": 1549829728, "answer_id": 54620589, "question_id": 54553907, "link": "https://stackoverflow.com/questions/54553907/is-there-a-way-to-call-an-async-python-method-from-c/54620589#54620589", "title": "Is there a way to call an `async` python method from C++?", "body": "<p>This isn't pybind11, but you can call an async function directly from C.  You simply add a callback to the future using add_done_callback. I assume pybind11 allows you to call python functions so the steps would be the same: </p>\n\n<p><a href=\"https://github.com/MarkReedZ/mrhttp/blob/master/src/mrhttp/internals/protocol.c\" rel=\"noreferrer\">https://github.com/MarkReedZ/mrhttp/blob/master/src/mrhttp/internals/protocol.c</a></p>\n\n<pre><code>result = protocol_callPageHandler(self, r-&gt;func, request))\n</code></pre>\n\n<p>Now the result of an async function is a future.  Just like in python you need to call create_task using the resulting future:</p>\n\n<pre><code>PyObject *task;\nif(!(task = PyObject_CallFunctionObjArgs(self-&gt;create_task, result, NULL))) return NULL;\n</code></pre>\n\n<p>And then you need to add a callback using add_done_callback:</p>\n\n<pre><code>add_done_callback = PyObject_GetAttrString(task, \"add_done_callback\")\nPyObject_CallFunctionObjArgs(add_done_callback, self-&gt;task_done, NULL)\n</code></pre>\n\n<p>self->task_done is a C function registered in python which will be called when the task is done.</p>\n"}, {"comments": [{"owner": {"reputation": 32089, "user_id": 266198, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/7x8PT.jpg?s=128&g=1", "display_name": "Nim", "link": "https://stackoverflow.com/users/266198/nim"}, "edited": false, "score": 0, "creation_date": 1550143462, "post_id": 54675255, "comment_id": 96166247, "body": "This is a great treatment of the problem, I will try this out and revert! Thank you."}, {"owner": {"reputation": 102109, "user_id": 1600898, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/01377f8b31f24b0265854666b29d0c03?s=128&d=identicon&r=PG", "display_name": "user4815162342", "link": "https://stackoverflow.com/users/1600898/user4815162342"}, "reply_to_user": {"reputation": 32089, "user_id": 266198, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/7x8PT.jpg?s=128&g=1", "display_name": "Nim", "link": "https://stackoverflow.com/users/266198/nim"}, "edited": false, "score": 0, "creation_date": 1550146637, "post_id": 54675255, "comment_id": 96167908, "body": "@Nim Thank you. Some additional details are also present in this <a href=\"https://stackoverflow.com/a/51115745/1600898\">older answer</a>, although the code there depends too much on asyncio, which for your use case should not be necessary (though it can still be done if needed). I think this answer captures the core idea better."}], "tags": [], "owner": {"reputation": 102109, "user_id": 1600898, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/01377f8b31f24b0265854666b29d0c03?s=128&d=identicon&r=PG", "display_name": "user4815162342", "link": "https://stackoverflow.com/users/1600898/user4815162342"}, "is_accepted": false, "score": 6, "last_activity_date": 1550147986, "last_edit_date": 1550147986, "creation_date": 1550075945, "answer_id": 54675255, "question_id": 54553907, "link": "https://stackoverflow.com/questions/54553907/is-there-a-way-to-call-an-async-python-method-from-c/54675255#54675255", "title": "Is there a way to call an `async` python method from C++?", "body": "<p>It is possible to implement a Python coroutine in C++, but takes some work. You need to do what the interpreter (in static languages the compiler) normally does for you and transform your async function into a state machine. Consider a very simple coroutine:</p>\n\n<pre><code>async def coro():\n    x = foo()\n    y = await bar()\n    baz(x, y)\n    return 42\n</code></pre>\n\n<p>Invoking <code>coro()</code> doesn't run any of its code, but it produces an <em>awaitable</em> object which can be started and then resumed multiple times. (But you don't normally see these operations because they are transparently performed by the event loop.) The awaitable can respond in two different ways: by 1) suspending, or by 2) indicating that it is done.</p>\n\n<p>Inside a coroutine <code>await</code> implements suspension. If a coroutine were implemented with a generator, <code>y = await bar()</code> would desugar to:</p>\n\n<pre><code># pseudo-code for y = await bar()\n\n_bar_iter = bar().__await__()\nwhile True:\n    try:\n        _suspend_val = next(_bar_iter)\n    except StopIteration as _stop:\n        y = _stop.value\n        break\n    yield _suspend_val\n</code></pre>\n\n<p>In other words, <code>await</code> suspends (yields) as long as the awaited object does. The awaited object signals that it's done by raising <code>StopIteration</code>, and by smuggling the return value inside its <code>value</code> attribute. If yield-in-a-loop sounds like <code>yield from</code>, you're exactly right, and that is why <code>await</code> is often described <em>in terms</em> of <code>yield from</code>. However, in C++ we don't have <code>yield</code> (<a href=\"https://stackoverflow.com/questions/43503656/what-are-coroutines-in-c20\">yet</a>), so we have to integrate the above into the state machine.</p>\n\n<p>To implement <code>async def</code> from scratch, we need to have a type that satisfies the following constraints:</p>\n\n<ul>\n<li>doesn't do much when constructed - typically it will just store the arguments it received</li>\n<li>has an <code>__await__</code> method that returns an iterable, which can just be <code>self</code>;</li>\n<li>has an <code>__iter__</code> which returns an iterator, which can again be <code>self</code>;</li>\n<li>has a <code>__next__</code> method whose invocation implements one step of the state machine, with return meaning suspension and raising <code>StopIteration</code> meaning finishing.</li>\n</ul>\n\n<p>The above coroutine's state machine in <code>__next__</code> will consist of three states:</p>\n\n<ol>\n<li>the initial one, when it invokes the <code>foo()</code> sync function</li>\n<li>the next state when it keeps awaiting the <code>bar()</code> coroutine for as long as it suspends (propagating the suspends) to the caller. Once <code>bar()</code> returns a value, we can immediately proceed to calling <code>baz()</code> and returning the value via the <code>StopIteration</code> exception.</li>\n<li>the final state which simply raises an exception informing the caller that the coroutine is spent.</li>\n</ol>\n\n<p>So the <code>async def coro()</code> definition shown above can be thought of as syntactic sugar for the following:</p>\n\n<pre><code>class coro:\n    def __init__(self):\n        self._state = 0\n\n    def __iter__(self):\n        return self\n\n    def __await__(self):\n        return self\n\n    def __next__(self):\n        if self._state == 0:\n            self._x = foo()\n            self._bar_iter = bar().__await__()\n            self._state = 1\n\n        if self._state == 1:\n            try:\n                suspend_val = next(self._bar_iter)\n                # propagate the suspended value to the caller\n                # don't change _state, we will return here for\n                # as long as bar() keeps suspending\n                return suspend_val\n            except StopIteration as stop:\n                # we got our value\n                y = stop.value\n            # since we got the value, immediately proceed to\n            # invoking `baz`\n            baz(self._x, y)\n            self._state = 2\n            # tell the caller that we're done and inform\n            # it of the return value\n            raise StopIteration(42)\n\n        # the final state only serves to disable accidental\n        # resumption of a finished coroutine\n        raise RuntimeError(\"cannot reuse already awaited coroutine\")\n</code></pre>\n\n<p>We can test that our \"coroutine\" works using real asyncio:</p>\n\n<pre><code>&gt;&gt;&gt; class coro:\n... (definition from above)\n...\n&gt;&gt;&gt; def foo():\n...     print('foo')\n...     return 20\n... \n&gt;&gt;&gt; async def bar():\n...     print('bar')\n...     return 10\n... \n&gt;&gt;&gt; def baz(x, y):\n...     print(x, y)\n... \n&gt;&gt;&gt; asyncio.run(coro())\nfoo\nbar\n20 10\n42\n</code></pre>\n\n<p>The remaining part is to write the <code>coro</code> class in Python/C or in pybind11.</p>\n"}, {"comments": [{"owner": {"reputation": 1285, "user_id": 1313312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/49885129f7cde7012f25e54a7380c3ff?s=128&d=identicon&r=PG", "display_name": "pwuertz", "link": "https://stackoverflow.com/users/1313312/pwuertz"}, "edited": false, "score": 2, "creation_date": 1571773242, "post_id": 55064524, "comment_id": 103349988, "body": "You cannot use async await in a non-async function."}], "tags": [], "owner": {"reputation": 3137, "user_id": 170413, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c2574774985d332827840f73fbd3622e?s=128&d=identicon&r=PG", "display_name": "eacousineau", "link": "https://stackoverflow.com/users/170413/eacousineau"}, "is_accepted": false, "score": -1, "last_activity_date": 1552052757, "creation_date": 1552052757, "answer_id": 55064524, "question_id": 54553907, "link": "https://stackoverflow.com/questions/54553907/is-there-a-way-to-call-an-async-python-method-from-c/55064524#55064524", "title": "Is there a way to call an `async` python method from C++?", "body": "<p>For things like this, if I don't want to delve too deep into CPython API, I just write my stuff in Python, and call that using <code>pybind</code>s Python interface.</p>\n\n<p>An example:\n<a href=\"https://github.com/RobotLocomotion/drake/blob/a7700d3/bindings/pydrake/__init__.py#L44\" rel=\"nofollow noreferrer\">https://github.com/RobotLocomotion/drake/blob/a7700d3/bindings/pydrake/<strong>init</strong>.py#L44</a>\n<a href=\"https://github.com/RobotLocomotion/drake/blob/a7700d3/bindings/pydrake/pydrake_pybind.h#L359\" rel=\"nofollow noreferrer\">https://github.com/RobotLocomotion/drake/blob/a7700d3/bindings/pydrake/pydrake_pybind.h#L359</a></p>\n\n<p>Rendering onto this use case, perhaps you can do:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code># cpp_helpers.py\ndef await_(obj):\n    return await obj\n</code></pre>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>py::object py_await = py::module::import(\"cpp_helpers\").attr(\"await_\");\nauto result = py::cast&lt;MyResult&gt;(py_await(py_obj));\n</code></pre>\n\n<p>However, this will very likely be less performant than the above solutions.</p>\n"}], "owner": {"reputation": 32089, "user_id": 266198, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/7x8PT.jpg?s=128&g=1", "display_name": "Nim", "link": "https://stackoverflow.com/users/266198/nim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2426, "favorite_count": 2, "answer_count": 3, "score": 12, "last_activity_date": 1552052757, "creation_date": 1549456854, "question_id": 54553907, "link": "https://stackoverflow.com/questions/54553907/is-there-a-way-to-call-an-async-python-method-from-c", "title": "Is there a way to call an `async` python method from C++?", "body": "<p>We have a codebase in python which uses asyncio, and co-routines (<code>async</code> methods and <code>await</code>s), what I'd like to do is to call one of these method from a C++ class which has been pulled into python (using pybind11)</p>\n\n<p>Let's say there is this code:</p>\n\n<pre><code>class Foo:\n  async def bar(a, b, c):\n    # some stuff\n    return c * a\n</code></pre>\n\n<p>Assuming that the code is being invoked from python and there is an io loop handling this, at some point, the code drops into C++ land where this <code>bar</code> method needs to be invoked - how does one <code>await</code> the result of this in C++?</p>\n"}, {"tags": ["c++", "linux", "qt"], "answers": [{"comments": [{"owner": {"reputation": 390, "user_id": 7463775, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23b9008a922abba541591d89015423f8?s=128&d=identicon&r=PG&f=1", "display_name": "JoshThunar", "link": "https://stackoverflow.com/users/7463775/joshthunar"}, "edited": false, "score": 0, "creation_date": 1549464774, "post_id": 54555824, "comment_id": 95912427, "body": "Thank you. I have confirmed your answer on my machines. It&#39;s true, things like <code>--geometry</code> were present earlier and <code>--icon</code> was added at 5.4.0."}], "tags": [], "owner": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "is_accepted": true, "score": 5, "last_activity_date": 1549464059, "last_edit_date": 1549464059, "creation_date": 1549463009, "answer_id": 54555824, "question_id": 54553876, "link": "https://stackoverflow.com/questions/54553876/icon-option-doesnt-work-with-qapplication-in-qt-5-5/54555824#54555824", "title": "--icon option doesn&#39;t work with QApplication in Qt &gt; 5.5", "body": "<p>It looks like <code>-icon</code> is synonym for <code>-qwindowicon</code>, by <a href=\"http://code.qt.io/cgit/qt/qtbase.git/tree/src/gui/kernel/qguiapplication.cpp?h=5.5#n1164\" rel=\"nofollow noreferrer\">this code from Qt 5.5</a>:</p>\n\n<pre><code>    } else if (arg == \"-qwindowicon\" || (isXcb &amp;&amp; arg == \"-icon\")) {\n        if (++i &lt; argc) {\n            icon = QString::fromLocal8Bit(argv[i]);\n        }\n    }\n</code></pre>\n\n<p>That's why it gets removed, when using Xcb. I have a hunch (no time to verify), that it is some more-or-less standard command line arg for apps using Xcb, which is why it is parsed by Qt when using Xcb.</p>\n\n<p>This whole icon command line option seems to have been added in 5.4, digging in the version history. <a href=\"http://code.qt.io/cgit/qt/qtbase.git/tree/src/gui/kernel/qguiapplication.cpp?h=5.3#n1127\" rel=\"nofollow noreferrer\">Qt 5.3 version of that source file</a> does not handle it.</p>\n"}], "owner": {"reputation": 390, "user_id": 7463775, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23b9008a922abba541591d89015423f8?s=128&d=identicon&r=PG&f=1", "display_name": "JoshThunar", "link": "https://stackoverflow.com/users/7463775/joshthunar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 119, "favorite_count": 1, "accepted_answer_id": 54555824, "answer_count": 1, "score": 6, "last_activity_date": 1549464059, "creation_date": 1549456721, "last_edit_date": 1549461695, "question_id": 54553876, "link": "https://stackoverflow.com/questions/54553876/icon-option-doesnt-work-with-qapplication-in-qt-5-5", "title": "--icon option doesn&#39;t work with QApplication in Qt &gt; 5.5", "body": "<p>I want to display the command line argument, that user provided for the application, f.e.:</p>\n\n<pre><code>./ToolOne --name\n</code></pre>\n\n<p>When I'm trying to get the argument from QApplication object within Qt 5.3.2 everything works.\nHowever, after using Qt 5.6.1 or 5.11.3, everything works, except the option</p>\n\n<pre><code>--icon\n</code></pre>\n\n<p>Any other word is working, no matter if <code>-i</code> or <code>--ico</code>. Except for <code>--icon</code>... Somehow, when this argument is consumed by the QApplication() it disappears.</p>\n\n<p>My main function:</p>\n\n<pre><code>#include &lt;QApplication&gt;\n\nint main(int argc, char *argv[])\n{\n    QApplication a(argc, argv);\n\n    QStringList arguments = a.arguments(); \n    // If argv has --icon, under Qt &gt;= 5.6, arguments list will NOT contain icon\n\n    MainWindow w( arguments.join(\" \") );\n    w.show();\n\n    return a.exec();\n}\n</code></pre>\n\n<p><code>--icon</code> argument simply disappears in the QApplication constructor. What is worth to mention is that when I'm using QCoreApplication it works perfectly under all systems. </p>\n\n<p>I tried to find any special handling in Qt or any bug report but with no result.\nIf that matters I've checked it on: </p>\n\n<ul>\n<li>CentOS 6 with Qt <strong>5.3.2</strong> and gcc: 4.8.2 (<strong>works</strong>)</li>\n<li>RedHat 6 with Qt <strong>5.3.2</strong> and gcc: 4.7.2 (<strong>works</strong>)</li>\n<li>RedHat 6 with Qt 5.6.1 and gcc 4.7.1 (fails)</li>\n<li>RedHat 6 with Qt 5.6.1 and gcc 4.9.1 (fails)</li>\n<li>CentOS 7 with Qt 5.9.2 and gcc 4.8.5 (fails)</li>\n<li>RedHat 7 with Qt <strong>5.3.2</strong> and gcc 4.8.5 (<strong>works</strong>)</li>\n<li>Fedora 29 with Qt 5.11.3 and gcc 8.2.1 (fails)</li>\n</ul>\n\n<p>Link with small example:\n<a href=\"https://drive.google.com/drive/folders/1TGJIbzTkotnHbymTC3xDa-0PFAfG1w4n?usp=sharing\" rel=\"nofollow noreferrer\">https://drive.google.com/drive/folders/1TGJIbzTkotnHbymTC3xDa-0PFAfG1w4n?usp=sharing</a></p>\n"}, {"tags": ["c++", "qt", "segmentation-fault", "valgrind"], "comments": [{"owner": {"reputation": 507, "user_id": 3132457, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4bfaadad46e8e709dc96a52d9d34d60?s=128&d=identicon&r=PG&f=1", "display_name": "user3132457", "link": "https://stackoverflow.com/users/3132457/user3132457"}, "edited": false, "score": 0, "creation_date": 1549469713, "post_id": 54554787, "comment_id": 95915657, "body": "The program is crashing: <code>Process terminating with default action of signal 11 (SIGSEGV)</code>. Do you know why? If so, fix it first."}, {"owner": {"reputation": 11, "user_id": 11022660, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e85571182a3c01f050df5f8ca834d94b?s=128&d=identicon&r=PG&f=1", "display_name": "Dmitry Jakovlev", "link": "https://stackoverflow.com/users/11022660/dmitry-jakovlev"}, "reply_to_user": {"reputation": 507, "user_id": 3132457, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4bfaadad46e8e709dc96a52d9d34d60?s=128&d=identicon&r=PG&f=1", "display_name": "user3132457", "link": "https://stackoverflow.com/users/3132457/user3132457"}, "edited": false, "score": 0, "creation_date": 1549527438, "post_id": 54554787, "comment_id": 95935755, "body": "I use the default template of a QWidget application that Qt Creator creates. Without Valgrind it works normally and don&#39;t receive SIGSEGV."}, {"owner": {"reputation": 507, "user_id": 3132457, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4bfaadad46e8e709dc96a52d9d34d60?s=128&d=identicon&r=PG&f=1", "display_name": "user3132457", "link": "https://stackoverflow.com/users/3132457/user3132457"}, "edited": false, "score": 0, "creation_date": 1549558741, "post_id": 54554787, "comment_id": 95954367, "body": "Show the code you&#39;re using (update the post)."}, {"owner": {"reputation": 11, "user_id": 11022660, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e85571182a3c01f050df5f8ca834d94b?s=128&d=identicon&r=PG&f=1", "display_name": "Dmitry Jakovlev", "link": "https://stackoverflow.com/users/11022660/dmitry-jakovlev"}, "reply_to_user": {"reputation": 507, "user_id": 3132457, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4bfaadad46e8e709dc96a52d9d34d60?s=128&d=identicon&r=PG&f=1", "display_name": "user3132457", "link": "https://stackoverflow.com/users/3132457/user3132457"}, "edited": false, "score": 0, "creation_date": 1549618324, "post_id": 54554787, "comment_id": 95975092, "body": "I&#39;ve updated original post. Thank you for your advice and efforts to help me :)"}, {"owner": {"reputation": 507, "user_id": 3132457, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4bfaadad46e8e709dc96a52d9d34d60?s=128&d=identicon&r=PG&f=1", "display_name": "user3132457", "link": "https://stackoverflow.com/users/3132457/user3132457"}, "edited": false, "score": 1, "creation_date": 1549696840, "post_id": 54554787, "comment_id": 96003820, "body": "I&#39;ve built your code with the usual <code>qmake</code> followed by <code>make</code> and then run Valgrind and didn&#39;t get SIGSEGV. Try to clean the directory from the generated files and build again. Also, what exact commands are you using to build the program?"}, {"owner": {"reputation": 11, "user_id": 11022660, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e85571182a3c01f050df5f8ca834d94b?s=128&d=identicon&r=PG&f=1", "display_name": "Dmitry Jakovlev", "link": "https://stackoverflow.com/users/11022660/dmitry-jakovlev"}, "reply_to_user": {"reputation": 507, "user_id": 3132457, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4bfaadad46e8e709dc96a52d9d34d60?s=128&d=identicon&r=PG&f=1", "display_name": "user3132457", "link": "https://stackoverflow.com/users/3132457/user3132457"}, "edited": false, "score": 0, "creation_date": 1549701556, "post_id": 54554787, "comment_id": 96004781, "body": "I made my experiments with Valgrind and Qt in my workplace, but today is a Saturday. I tried to repeat this experiment on my home notebook. I created project, then I run <code>qmake</code>, then <code>make</code>, and I received error <code>&#47;usr&#47;bin&#47;ld: cannot find -lGL</code>. Then I went to Web and searched how to install OpenGL. Then I ran this command: <code>sudo apt-get install cmake libx11-dev xorg-dev libglu1-mesa-dev freeglut3-dev libglew1.5 libglew1.5-dev libglu1-mesa libglu1-mesa-dev libgl1-mesa-glx libgl1-mesa-dev</code>. Then I ran <code>valgrind .&#47;untitled</code> and all is OK! One on this libraries solves problem, but which one?"}, {"owner": {"reputation": 507, "user_id": 3132457, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4bfaadad46e8e709dc96a52d9d34d60?s=128&d=identicon&r=PG&f=1", "display_name": "user3132457", "link": "https://stackoverflow.com/users/3132457/user3132457"}, "edited": false, "score": 0, "creation_date": 1549723662, "post_id": 54554787, "comment_id": 96009716, "body": "Seems like the GL lib didn&#39;t come with the installation of Ubuntu. If you go to <a href=\"https://packages.debian.org/sid/\" rel=\"nofollow noreferrer\">packages.debian.org/sid</a> and add the lib name after this address, you&#39;ll see the description of the lib."}, {"owner": {"reputation": 11, "user_id": 11022660, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e85571182a3c01f050df5f8ca834d94b?s=128&d=identicon&r=PG&f=1", "display_name": "Dmitry Jakovlev", "link": "https://stackoverflow.com/users/11022660/dmitry-jakovlev"}, "reply_to_user": {"reputation": 507, "user_id": 3132457, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4bfaadad46e8e709dc96a52d9d34d60?s=128&d=identicon&r=PG&f=1", "display_name": "user3132457", "link": "https://stackoverflow.com/users/3132457/user3132457"}, "edited": false, "score": 0, "creation_date": 1549733375, "post_id": 54554787, "comment_id": 96012339, "body": "On Monday I will try to install each library separately and will see which one is critical for Qt and Valgrind! After that I will post solution. Thank you, <a href=\"https://stackoverflow.com/users/3132457/user3132457\">user3132457</a>."}, {"owner": {"reputation": 11, "user_id": 11022660, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e85571182a3c01f050df5f8ca834d94b?s=128&d=identicon&r=PG&f=1", "display_name": "Dmitry Jakovlev", "link": "https://stackoverflow.com/users/11022660/dmitry-jakovlev"}, "reply_to_user": {"reputation": 507, "user_id": 3132457, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4bfaadad46e8e709dc96a52d9d34d60?s=128&d=identicon&r=PG&f=1", "display_name": "user3132457", "link": "https://stackoverflow.com/users/3132457/user3132457"}, "edited": false, "score": 0, "creation_date": 1549881891, "post_id": 54554787, "comment_id": 96049814, "body": "Today I installed all libraries from list above, but error is on place. The only difference from my home notebook is that Ubuntu is installed on VM at work... And I have Ubuntu 18.04 at home, but 18.10 at work..."}, {"owner": {"reputation": 507, "user_id": 3132457, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4bfaadad46e8e709dc96a52d9d34d60?s=128&d=identicon&r=PG&f=1", "display_name": "user3132457", "link": "https://stackoverflow.com/users/3132457/user3132457"}, "edited": false, "score": 0, "creation_date": 1549991658, "post_id": 54554787, "comment_id": 96102376, "body": "how did you build the program? your initial question was about getting a segfault, but now you&#39;re getting a linker error."}, {"owner": {"reputation": 11, "user_id": 11022660, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e85571182a3c01f050df5f8ca834d94b?s=128&d=identicon&r=PG&f=1", "display_name": "Dmitry Jakovlev", "link": "https://stackoverflow.com/users/11022660/dmitry-jakovlev"}, "reply_to_user": {"reputation": 507, "user_id": 3132457, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4bfaadad46e8e709dc96a52d9d34d60?s=128&d=identicon&r=PG&f=1", "display_name": "user3132457", "link": "https://stackoverflow.com/users/3132457/user3132457"}, "edited": false, "score": 0, "creation_date": 1550053270, "post_id": 54554787, "comment_id": 96125690, "body": "I had linker error on my home PC, but I&#39;ve installed packages from list above and now the program works with Valgrind perfectly. But installation of this packages on my work PC don&#39;t solves problem with segfault. I build program by <code>qmake</code> then <code>make</code> on Ubuntu 18.10 VM and haven&#39;t got solution yet :("}, {"owner": {"reputation": 507, "user_id": 3132457, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4bfaadad46e8e709dc96a52d9d34d60?s=128&d=identicon&r=PG&f=1", "display_name": "user3132457", "link": "https://stackoverflow.com/users/3132457/user3132457"}, "edited": false, "score": 0, "creation_date": 1550163772, "post_id": 54554787, "comment_id": 96178662, "body": "the issue is in the environment. what are the versions of qt/compiler/valgrind/os you&#39;re using?"}, {"owner": {"reputation": 11, "user_id": 11022660, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e85571182a3c01f050df5f8ca834d94b?s=128&d=identicon&r=PG&f=1", "display_name": "Dmitry Jakovlev", "link": "https://stackoverflow.com/users/11022660/dmitry-jakovlev"}, "reply_to_user": {"reputation": 507, "user_id": 3132457, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4bfaadad46e8e709dc96a52d9d34d60?s=128&d=identicon&r=PG&f=1", "display_name": "user3132457", "link": "https://stackoverflow.com/users/3132457/user3132457"}, "edited": false, "score": 0, "creation_date": 1550217964, "post_id": 54554787, "comment_id": 96195659, "body": "Qt 5.12.0/GCC 8.2.0/ Valgrind 3.13.0/Ubuntu 18.10. All packages except Qt is from standard Ubuntu&#39;s repository."}, {"owner": {"reputation": 507, "user_id": 3132457, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4bfaadad46e8e709dc96a52d9d34d60?s=128&d=identicon&r=PG&f=1", "display_name": "user3132457", "link": "https://stackoverflow.com/users/3132457/user3132457"}, "edited": false, "score": 0, "creation_date": 1550249261, "post_id": 54554787, "comment_id": 96213049, "body": "and what about the other environment? it&#39;s really hard to &quot;debug&quot; your issue without much information. maybe ask a colleague or someone who can help you in-house."}], "migrated_from": {"other_site": {"markdown_extensions": ["Prettify"], "launch_date": 1250553600, "open_beta_date": 1247529600, "site_state": "normal", "high_resolution_icon_url": "https://cdn.sstatic.net/Sites/superuser/Img/apple-touch-icon@2.png", "twitter_account": "super_user", "favicon_url": "https://cdn.sstatic.net/Sites/superuser/Img/favicon.ico", "icon_url": "https://cdn.sstatic.net/Sites/superuser/Img/apple-touch-icon.png", "audience": "computer enthusiasts and power users", "site_url": "https://superuser.com", "api_site_parameter": "superuser", "logo_url": "https://cdn.sstatic.net/Sites/superuser/Img/logo.png", "name": "Super User", "site_type": "main_site"}, "on_date": 1549459713, "question_id": 1402646}, "owner": {"reputation": 11, "user_id": 11022660, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e85571182a3c01f050df5f8ca834d94b?s=128&d=identicon&r=PG&f=1", "display_name": "Dmitry Jakovlev", "link": "https://stackoverflow.com/users/11022660/dmitry-jakovlev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 898, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1549619886, "creation_date": 1549455341, "last_edit_date": 1549619886, "question_id": 54554787, "link": "https://stackoverflow.com/questions/54554787/how-to-check-memory-leaks-in-simple-qt-widget-application-using-valgrind", "title": "How to check memory leaks in simple Qt Widget application using Valgrind?", "body": "<p>I never use Valgrind before and today I tried to check memory leaks in simple Qt Widget application generated by Qt Creator. I created project by following steps:</p>\n\n<ol>\n<li>I've got Qt Creator v4.8.1 based on Qt 5.12.0. In Qt Creator I chose following menu item: <strong>File -> New File or Project... -> Application -> Qt Widgets Application</strong>. Then I pressed <strong>Choose... -> Next -> ... -> Finish</strong>. Qt Creator generated following source code:</li>\n</ol>\n\n<p><strong>main.cpp</strong>:</p>\n\n<pre><code>#include \"mainwindow.h\"\n#include &lt;QApplication&gt;\n\nint main(int argc, char *argv[])\n{\n    QApplication a(argc, argv);\n    MainWindow w;\n    w.show();\n\n    return a.exec();\n}\n</code></pre>\n\n<p><strong>mainwindow.cpp</strong>:</p>\n\n<pre><code>#include \"mainwindow.h\"\n#include \"ui_mainwindow.h\"\n\nMainWindow::MainWindow(QWidget *parent) :\n    QMainWindow(parent),\n    ui(new Ui::MainWindow)\n{\n    ui-&gt;setupUi(this);\n}\n\nMainWindow::~MainWindow()\n{\n    delete ui;\n}\n</code></pre>\n\n<p><strong>mainwindow.h</strong>:</p>\n\n<pre><code>#ifndef MAINWINDOW_H\n#define MAINWINDOW_H\n\n#include &lt;QMainWindow&gt;\n\nnamespace Ui {\nclass MainWindow;\n}\n\nclass MainWindow : public QMainWindow\n{\n    Q_OBJECT\n\npublic:\n    explicit MainWindow(QWidget *parent = nullptr);\n    ~MainWindow();\n\nprivate:\n    Ui::MainWindow *ui;\n};\n\n#endif // MAINWINDOW_H\n</code></pre>\n\n<p><strong>mainwindow.ui</strong></p>\n\n<pre><code>&lt;ui version=\"4.0\"&gt;\n &lt;class&gt;MainWindow&lt;/class&gt;\n &lt;widget class=\"QMainWindow\" name=\"MainWindow\" &gt;\n  &lt;property name=\"geometry\" &gt;\n   &lt;rect&gt;\n    &lt;x&gt;0&lt;/x&gt;\n    &lt;y&gt;0&lt;/y&gt;\n    &lt;width&gt;400&lt;/width&gt;\n    &lt;height&gt;300&lt;/height&gt;\n   &lt;/rect&gt;\n  &lt;/property&gt;\n  &lt;property name=\"windowTitle\" &gt;\n   &lt;string&gt;MainWindow&lt;/string&gt;\n  &lt;/property&gt;\n  &lt;widget class=\"QMenuBar\" name=\"menuBar\" /&gt;\n  &lt;widget class=\"QToolBar\" name=\"mainToolBar\" /&gt;\n  &lt;widget class=\"QWidget\" name=\"centralWidget\" /&gt;\n  &lt;widget class=\"QStatusBar\" name=\"statusBar\" /&gt;\n &lt;/widget&gt;\n &lt;layoutDefault spacing=\"6\" margin=\"11\" /&gt;\n &lt;pixmapfunction&gt;&lt;/pixmapfunction&gt;\n &lt;resources/&gt;\n &lt;connections/&gt;\n&lt;/ui&gt;\n</code></pre>\n\n<p><strong>untitled.pro</strong></p>\n\n<pre><code>#-------------------------------------------------\n#\n# Project created by QtCreator 2019-02-06T15:14:11\n#\n#-------------------------------------------------\n\nQT       += core gui\n\ngreaterThan(QT_MAJOR_VERSION, 4): QT += widgets\n\nTARGET = untitled\nTEMPLATE = app\n\n# The following define makes your compiler emit warnings if you use\n# any feature of Qt which has been marked as deprecated (the exact warnings\n# depend on your compiler). Please consult the documentation of the\n# deprecated API in order to know how to port your code away from it.\nDEFINES += QT_DEPRECATED_WARNINGS\n\n# You can also make your code fail to compile if you use deprecated APIs.\n# In order to do so, uncomment the following line.\n# You can also select to disable deprecated APIs only up to a certain version of Qt.\n#DEFINES += QT_DISABLE_DEPRECATED_BEFORE=0x060000    # disables all the APIs deprecated before Qt 6.0.0\n\nCONFIG += c++11\n\nSOURCES += \\\n        main.cpp \\\n        mainwindow.cpp\n\nHEADERS += \\\n        mainwindow.h\n\nFORMS += \\\n        mainwindow.ui\n\n# Default rules for deployment.\nqnx: target.path = /tmp/$${TARGET}/bin\nelse: unix:!android: target.path = /opt/$${TARGET}/bin\n!isEmpty(target.path): INSTALLS += target\n</code></pre>\n\n<ol start=\"2\">\n<li>I compiled this project by GCC 8.2.0 toolchain in 'Debug mode' on Ubuntu 18.10.</li>\n<li><p>Then i tried to run compiled program by following command:</p>\n\n<p>$ valgrind ./untitled</p></li>\n</ol>\n\n<p>Result of this operations on Ubuntu 18.10 is:</p>\n\n<pre><code>==12228== Memcheck, a memory error detector\n==12228== Copyright (C) 2002-2017, and GNU GPL'd, by Julian Seward et al.\n==12228== Using Valgrind-3.13.0 and LibVEX; rerun with -h for copyright info\n==12228== Command: ./untitled\n==12228== \n==12228== \n==12228== Process terminating with default action of signal 11 (SIGSEGV)\n==12228==  General Protection Fault\n==12228==    at 0x15C006A7: ??? (in /usr/lib/x86_64-linux-gnu/dri/vmwgfx_dri.so)\n==12228==    by 0x15C0DBC5: ??? (in /usr/lib/x86_64-linux-gnu/dri/vmwgfx_dri.so)\n==12228==    by 0x15C0DFEB: ??? (in /usr/lib/x86_64-linux-gnu/dri/vmwgfx_dri.so)\n==12228==    by 0x154B3172: ??? (in /usr/lib/x86_64-linux-gnu/dri/vmwgfx_dri.so)\n==12228==    by 0x159AF457: ??? (in /usr/lib/x86_64-linux-gnu/dri/vmwgfx_dri.so)\n==12228==    by 0x1587E5B1: ??? (in /usr/lib/x86_64-linux-gnu/dri/vmwgfx_dri.so)\n==12228==    by 0x1587984D: ??? (in /usr/lib/x86_64-linux-gnu/dri/vmwgfx_dri.so)\n==12228==    by 0x14F8BD3D: ??? (in /usr/lib/x86_64-linux-gnu/libGLX_mesa.so.0.0.0)\n==12228==    by 0x14F63C52: ??? (in /usr/lib/x86_64-linux-gnu/libGLX_mesa.so.0.0.0)\n==12228==    by 0x14F5F323: ??? (in /usr/lib/x86_64-linux-gnu/libGLX_mesa.so.0.0.0)\n==12228==    by 0x14F5FD3C: ??? (in /usr/lib/x86_64-linux-gnu/libGLX_mesa.so.0.0.0)\n==12228==    by 0x14CFECF1: QXcbGlxWindow::createVisual() (in /opt/Software/Qt/5.12.0/gcc_64/plugins/xcbglintegrations/libqxcb-glx-integration.so)\n==12228== \n==12228== HEAP SUMMARY:\n==12228==     in use at exit: 3,561,397 bytes in 44,679 blocks\n==12228==   total heap usage: 347,392 allocs, 302,713 frees, 29,095,722 bytes allocated\n==12228== \n==12228== LEAK SUMMARY:\n==12228==    definitely lost: 14,216 bytes in 80 blocks\n==12228==    indirectly lost: 4,334 bytes in 203 blocks\n==12228==      possibly lost: 28,587 bytes in 457 blocks\n==12228==    still reachable: 3,448,988 bytes in 43,405 blocks\n==12228==                       of which reachable via heuristic:\n==12228==                         length64           : 3,376 bytes in 61 blocks\n==12228==                         newarray           : 2,048 bytes in 48 blocks\n==12228==         suppressed: 0 bytes in 0 blocks\n==12228== Rerun with --leak-check=full to see details of leaked memory\n==12228== \n==12228== For counts of detected and suppressed errors, rerun with: -v\n==12228== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 6 from 4)\nSegmentation fault (core dumped)\n</code></pre>\n\n<p>What am I doing wrong?</p>\n"}, {"tags": ["c++", "c++11", "pointers", "memory-management", "reference"], "comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1549454134, "post_id": 54553063, "comment_id": 95905892, "body": "<i>Why</i> do you want pointer semantics? For what purpose? You haven&#39;t actually told us what you&#39;re trying to do."}, {"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1549454174, "post_id": 54553063, "comment_id": 95905918, "body": "You could also use a custom deleter instead? Also quite dangerous to have some objects allocated on the stack and others on the heap!"}, {"owner": {"reputation": 5093, "user_id": 6039995, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/QuCId.png?s=128&g=1", "display_name": "Stack Danny", "link": "https://stackoverflow.com/users/6039995/stack-danny"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1549454256, "post_id": 54553063, "comment_id": 95905954, "body": "@LightnessRacesinOrbit Passing the same resources through multiple layers of classes. So far they&#39;re all allocated on the heap (because that makes it easy to pass them via <code>std::shared_ptr</code>) but I think it&#39;s bad design. So I want it to be on the stack, no dynamic allocation."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 2, "creation_date": 1549454438, "post_id": 54553063, "comment_id": 95906054, "body": "Why do you think it&#39;s bad design?"}, {"owner": {"reputation": 5093, "user_id": 6039995, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/QuCId.png?s=128&g=1", "display_name": "Stack Danny", "link": "https://stackoverflow.com/users/6039995/stack-danny"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1549454566, "post_id": 54553063, "comment_id": 95906112, "body": "@LightnessRacesinOrbit Because it doesn&#39;t have to be on the heap, I suppose. It just feels like <a href=\"https://stackoverflow.com/questions/22146094/why-should-i-use-a-pointer-rather-than-the-object-itself\">this</a> example, overall."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1549454652, "post_id": 54553063, "comment_id": 95906165, "body": "<code>observer_ptr</code>?"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 1, "creation_date": 1549454686, "post_id": 54553063, "comment_id": 95906181, "body": "You haven&#39;t fully specified your goal, but from I can tell, it matches the use cases described in the accepted answer there. People use dynamic allocation a lot when they don&#39;t need to, but that doesn&#39;t mean you should avoid it at all costs."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1549455012, "post_id": 54553063, "comment_id": 95906378, "body": "By the way: <a href=\"https://stackoverflow.com/q/9181782/560648\">stackoverflow.com/q/9181782/560648</a>"}, {"owner": {"reputation": 5093, "user_id": 6039995, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/QuCId.png?s=128&g=1", "display_name": "Stack Danny", "link": "https://stackoverflow.com/users/6039995/stack-danny"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1549455093, "post_id": 54553063, "comment_id": 95906431, "body": "@LightnessRacesinOrbit ! thanks for the link"}, {"owner": {"reputation": 5093, "user_id": 6039995, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/QuCId.png?s=128&g=1", "display_name": "Stack Danny", "link": "https://stackoverflow.com/users/6039995/stack-danny"}, "reply_to_user": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1549456889, "post_id": 54553063, "comment_id": 95907582, "body": "@StoryTeller <code>observer_ptr</code> looks interesting, too bad it&#39;s experimental"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 1, "creation_date": 1549457838, "post_id": 54553063, "comment_id": 95908115, "body": "It&#39;s also nothing more than a raw pointer with a fancy name, really"}], "answers": [{"tags": [], "owner": {"reputation": 5093, "user_id": 6039995, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/QuCId.png?s=128&g=1", "display_name": "Stack Danny", "link": "https://stackoverflow.com/users/6039995/stack-danny"}, "is_accepted": false, "score": 0, "last_activity_date": 1549454368, "last_edit_date": 1549454368, "creation_date": 1549454029, "answer_id": 54553064, "question_id": 54553063, "link": "https://stackoverflow.com/questions/54553063/what-strategy-should-be-used-when-trying-to-point-to-automatic-objects/54553064#54553064", "title": "What strategy should be used when trying to point to automatic objects?", "body": "<p><a href=\"https://en.cppreference.com/w/cpp/utility/functional/reference_wrapper\" rel=\"nofollow noreferrer\"><code>std::reference_wrapper</code></a>:</p>\n\n<pre><code>Foo foo{ 0 };\nstd::reference_wrapper&lt;Foo&gt; ref = foo;\n\nref.get().x = 2;\n\nstd::cout &lt;&lt; \"\\nref.x : \" &lt;&lt; ref.get().x &lt;&lt; '\\n';\nstd::cout &lt;&lt; \"foo.x : \" &lt;&lt; foo.x &lt;&lt; \"\\n\\n\";\n</code></pre>\n\n<p>output ></p>\n\n<pre><code>constructor\n\nref.x : 2\nfoo.x : 2\n\ndeconstructor\n</code></pre>\n\n<p>Which behaves just like a pointer. Well, looking at it's implementation it <em>is</em> a pointer:</p>\n\n<pre><code>template&lt;class _Ty&gt;\n    class reference_wrapper\n        : public _Weak_types&lt;_Ty&gt;::type\n    {\npublic:\n    /*...*/\nprivate:\n    _Ty * _Ptr; //&lt;---\n    };\n</code></pre>\n\n<p>For a <code>pointer const</code> effect (<em><code>Foo* const</code></em>) it can be declared as a <code>const std::reference_wrapper&lt;Foo&gt;</code> - disallowing any change of its pointer address.</p>\n\n<pre><code>Foo foo{ 0 };\nconst std::reference_wrapper&lt;Foo&gt; ref = foo;\nFoo foo2{ 2 };\nref = foo2; //error\n</code></pre>\n\n<blockquote>\n  <p>Error C2678   binary '=': no operator found which takes a left-hand operand of type 'const std::reference_wrapper' (or there is no acceptable conversion)    </p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 5093, "user_id": 6039995, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/QuCId.png?s=128&g=1", "display_name": "Stack Danny", "link": "https://stackoverflow.com/users/6039995/stack-danny"}, "edited": false, "score": 0, "creation_date": 1549454914, "post_id": 54553228, "comment_id": 95906332, "body": "+1 Yes I could just pass it through, but that would add a lot of Arguments to all functions and I would rather save the pointer somehow. In the first paragraph you&#39;re saying that I should in fact allocate everything dynamically. So in the mcve that <code>foo</code> would be dynamically allocated and <code>ptr</code> would just point to the resource?"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 5093, "user_id": 6039995, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/QuCId.png?s=128&g=1", "display_name": "Stack Danny", "link": "https://stackoverflow.com/users/6039995/stack-danny"}, "edited": false, "score": 4, "creation_date": 1549455049, "post_id": 54553228, "comment_id": 95906405, "body": "@StackDanny I honestly can&#39;t make a firm recommendation without knowing <i>what you&#39;re trying to do</i>. &quot;but that would add a lot of Arguments to all functions&quot; Why? What sort of arguments? How is a reference &quot;more arguments&quot; than a pointer? Again, unclear."}, {"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1549455275, "post_id": 54553228, "comment_id": 95906558, "body": "Also having all your objects on the stack limits the number of them. I hope you don&#39;t expect to store MBs of data on the stack."}, {"owner": {"reputation": 5093, "user_id": 6039995, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/QuCId.png?s=128&g=1", "display_name": "Stack Danny", "link": "https://stackoverflow.com/users/6039995/stack-danny"}, "edited": false, "score": 0, "creation_date": 1549455415, "post_id": 54553228, "comment_id": 95906637, "body": "@LightnessRacesinOrbit well I have multiple objects that need to be passes through. And that&#39;s a graphical pipeline, so alot of functions in many loops. In my example the &quot;application&quot; class controls the states of the program and shares it&#39;s resources with them. So each loop call &amp; update call &amp; draw call: &lt;resources, states vectors, communication flag vectors, display class&gt; need to be given as arguments. which feels ugly."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1549455858, "post_id": 54553228, "comment_id": 95906916, "body": "What does that have to do with whether you pass pointers or references, or allocate dynamically?"}, {"owner": {"reputation": 5093, "user_id": 6039995, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/QuCId.png?s=128&g=1", "display_name": "Stack Danny", "link": "https://stackoverflow.com/users/6039995/stack-danny"}, "edited": false, "score": 0, "creation_date": 1549456544, "post_id": 54553228, "comment_id": 95907363, "body": "I hope I can clarify a bit - I am not passing anything through arguments right now, each class a pointer to these objects. But the <i>initial</i> objects (the superclass that creates these objects), are also dynamically allocated. So I want to make these initial objects automatic and go  <code>child_class_resource_ptr = &amp;automatic_resource</code> instead of <code>child_class_resource_ptr = dynamic_resource_ptr</code>. So far my impressiong is that it doesn&#39;t really matter (but I&#39;ve seen also the other arguments)"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 1, "creation_date": 1549456656, "post_id": 54553228, "comment_id": 95907434, "body": "Yeah, sorry, not getting it at all. There seem to be rationales and constraints and arguments missing from your descriptions. Maybe it&#39;s just me. Hopefully someone else can help you better."}, {"owner": {"reputation": 5093, "user_id": 6039995, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/QuCId.png?s=128&g=1", "display_name": "Stack Danny", "link": "https://stackoverflow.com/users/6039995/stack-danny"}, "edited": false, "score": 0, "creation_date": 1549458371, "post_id": 54553228, "comment_id": 95908413, "body": "I just think that changing from using pointers to passing by reference would completely turn over every design aspect of my classes. But in the end these additional informations (about my library) I doubt are neccessary so I didn&#39;t mention them. If I find a suitable solution to the mcve it will work for my complicated real world case."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1549458762, "post_id": 54553228, "comment_id": 95908672, "body": "If your objects have automatic storage duration then switching from pointers to references shouldn&#39;t change anything at all. What &quot;turn over&quot; aspect do you envisage? I think you need to give some examples - your MCVE should demonstrate the problem"}], "tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": false, "score": 4, "last_activity_date": 1549454599, "creation_date": 1549454599, "answer_id": 54553228, "question_id": 54553063, "link": "https://stackoverflow.com/questions/54553063/what-strategy-should-be-used-when-trying-to-point-to-automatic-objects/54553228#54553228", "title": "What strategy should be used when trying to point to automatic objects?", "body": "<p>Hedging my bets a little on this one, as your goal is unclear.</p>\n\n<hr>\n\n<p>If you want to pass resources around strongly, in a manner that makes ownership and lifetime clear, then a smart pointer is the appropriate way to do that. The standard library already provides them, so just use them.</p>\n\n<p>You've discovered already that this is largely incompatible with objects of automatic storage duration (what you've called \"on the stack\"). You can work around it with a custom no-op deleter, but honestly why? You're just making life way too complicated for yourself. When you create objects in this manner, the ownership and lifetime are chosen for you, and easy to get wrong (dangling pointers, folks!).</p>\n\n<p>Just have <code>std::make_unique</code> or <code>std::make_shared</code> dynamically allocate your <code>Foo</code>s for you, and use the resulting smart pointer in the usual manner.</p>\n\n<hr>\n\n<p>However, obviously we cannot see your design, nor do we know much about it.</p>\n\n<p>If all you need to do is pass references to objects to functions, which will <em>do a thing</em> then return, then simply do that!</p>\n\n<pre><code>void bar(const Foo&amp; foo)\n{\n    // do stuff\n}\n\nint main()\n{\n   Foo foo;\n   bar(foo);\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 5093, "user_id": 6039995, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/QuCId.png?s=128&g=1", "display_name": "Stack Danny", "link": "https://stackoverflow.com/users/6039995/stack-danny"}, "edited": false, "score": 0, "creation_date": 1549455687, "post_id": 54553496, "comment_id": 95906812, "body": "Thanks, I knew there was something wrong with my smart pointers. And yes right now it feels like the right thing to do is just using pointers."}], "tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": true, "score": 3, "last_activity_date": 1549456420, "last_edit_date": 1549456420, "creation_date": 1549455501, "answer_id": 54553496, "question_id": 54553063, "link": "https://stackoverflow.com/questions/54553063/what-strategy-should-be-used-when-trying-to-point-to-automatic-objects/54553496#54553496", "title": "What strategy should be used when trying to point to automatic objects?", "body": "<blockquote>\n  <p>But I am not sure what's the best strategy. The pointer?</p>\n</blockquote>\n\n<p>Possibly. If you need to point at an object, then pointer can be a good choice.</p>\n\n<p>Reference might be another:</p>\n\n<pre><code>Foo foo{ 0 };\nFoo&amp; ref = foo;\nref = 2;\n</code></pre>\n\n<p>If a reference is sufficient, then it's usually preferable to a pointer.</p>\n\n<blockquote>\n  <p>Did I made a mistake with using <code>std::shared_ptr</code> / <code>std::unique_ptr</code>? </p>\n</blockquote>\n\n<p>Yes. You took ownership of an automatic variable. That's a no-no.</p>\n\n<p>In the first example you made a copy of an object, expecting modification of the copy to affect the original.</p>\n"}], "owner": {"reputation": 5093, "user_id": 6039995, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/QuCId.png?s=128&g=1", "display_name": "Stack Danny", "link": "https://stackoverflow.com/users/6039995/stack-danny"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 139, "favorite_count": 0, "accepted_answer_id": 54553496, "answer_count": 3, "score": 2, "last_activity_date": 1549463197, "creation_date": 1549454029, "last_edit_date": 1549463197, "question_id": 54553063, "link": "https://stackoverflow.com/questions/54553063/what-strategy-should-be-used-when-trying-to-point-to-automatic-objects", "title": "What strategy should be used when trying to point to automatic objects?", "body": "<p>I am developing a relatively large library (~13000 lines) as a personal utility library. It uses exclusively STL containers and smart pointers for memory management - but now I find myself in a situation where I could see going for normal pointers due to an apparent lack of an obvious solution in STL. I would like to maintain a modern C++ style, though.</p>\n\n<p>Here's my <a href=\"https://stackoverflow.com/help/mcve\">mcve</a>:</p>\n\n<p>Struct <code>Foo</code> - a <code>int</code>-wrapper struct displaying which member functions were called.</p>\n\n<pre><code>struct Foo {\n    Foo(int x) {\n        this-&gt;x = x;\n        std::cout &lt;&lt; \"constructor\\n\";\n    }\n    Foo(const Foo&amp; other) {\n        this-&gt;x = other.x;\n        std::cout &lt;&lt; \"copy constructor\\n\";\n    }\n    ~Foo() {\n        std::cout &lt;&lt; \"destructor\\n\";\n    }\n\n    int x;\n};\n</code></pre>\n\n<p>Looking at <code>main</code> I create an automatic instance of <code>struct Foo</code>:</p>\n\n<pre><code>int main() {\n    Foo foo{ 0 };\n    std::cout &lt;&lt; \"\\nfoo.x : \" &lt;&lt; foo.x &lt;&lt; \"\\n\\n\";    \n}\n</code></pre>\n\n<p>output ></p>\n\n<pre><code>constructor\n\nfoo.x : 0\n\ndestructor\n</code></pre>\n\n<p>Easy as that. - now if I want to point to <code>foo</code> and manipulate its content. </p>\n\n<hr>\n\n<p>Smart pointers like <a href=\"https://en.cppreference.com/w/cpp/memory/unique_ptr\" rel=\"nofollow noreferrer\"><code>std::unique_ptr</code></a> or <a href=\"https://en.cppreference.com/w/cpp/memory/shared_ptr\" rel=\"nofollow noreferrer\"><code>std::shared_ptr</code></a> won't achieve this effect (apparently!). Using <code>std::make_unique&lt;T&gt;()</code> (/ <code>std::make_shared&lt;T&gt;()</code>) will dynamically allocate memory and only copy the value:</p>\n\n<pre><code>Foo foo{ 0 };\nstd::unique_ptr&lt;Foo&gt; ptr = std::make_unique&lt;Foo&gt;(foo);\n\nptr-&gt;x = 2;\n\nstd::cout &lt;&lt; \"\\nptr-&gt;x : \" &lt;&lt; ptr-&gt;x &lt;&lt; '\\n';\nstd::cout &lt;&lt; \"foo.x  : \" &lt;&lt; foo.x &lt;&lt; \"\\n\\n\";\n</code></pre>\n\n<p>output ></p>\n\n<pre><code>constructor\ncopy constructor\n\nptr-&gt;x : 2\nfoo.x  : 0 // didn't change  \n\ndestructor\ndestructor\n</code></pre>\n\n<p>So that's not working. However, their <code>void reset(pointer _Ptr = pointer()) noexcept</code> member function allows to directly assign a pointer: </p>\n\n<pre><code>std::unique_ptr&lt;Foo&gt; ptr;\nFoo foo{ 0 };\n\nptr.reset(&amp;foo);\n\nptr-&gt;x = 2;\n\nstd::cout &lt;&lt; \"\\nptr-&gt;x : \" &lt;&lt; ptr-&gt;x &lt;&lt; '\\n';\nstd::cout &lt;&lt; \"foo.x  : \" &lt;&lt; foo.x &lt;&lt; \"\\n\\n\";\n</code></pre>\n\n<p>output ></p>\n\n<pre><code>constructor\n\nptr-&gt;x : 2\nfoo.x  : 2\n\ndestructor\ndestructor //crash\n</code></pre>\n\n<p>But crash! <code>foo</code> get's deconstructed normally and than <code>std::shared_ptr</code> <em>also</em> wants to deconstruct its already deconstructed dereferenced value. </p>\n\n<blockquote>\n  <p>HEAP[main.exe]: Invalid address specified to RtlValidateHeap(...)</p>\n</blockquote>\n\n<hr>\n\n<p>Using a const pointer:</p>\n\n<pre><code>Foo foo{ 0 };\nFoo* const ptr = &amp;foo;\n\nptr-&gt;x = 2;\n\nstd::cout &lt;&lt; \"\\nptr-&gt;x : \" &lt;&lt; ptr-&gt;x &lt;&lt; '\\n';\nstd::cout &lt;&lt; \"foo.x  : \" &lt;&lt; foo.x &lt;&lt; \"\\n\\n\";\n</code></pre>\n\n<p>output ></p>\n\n<pre><code>constructor\n\nptr-&gt;x : 2\nfoo.x  : 2\n\ndeconstructor\n</code></pre>\n\n<ul>\n<li>1 allocation, 1 deallocation. </li>\n<li>no copying. </li>\n<li>actually manipulating the value. </li>\n</ul>\n\n<p>So far the pointer feels like the best option. </p>\n\n<hr>\n\n<p>I am just looking for a way to point to automatically allocated objects. So far it seems surprisingly difficult without going back to plain pointers.</p>\n\n<p>I provided one solution by myself - which is using <a href=\"https://en.cppreference.com/w/cpp/utility/functional/reference_wrapper\" rel=\"nofollow noreferrer\"><code>/*const*/ std::reference_wrapper&lt;T&gt;</code></a>. (feel free to correct me about this solution)</p>\n\n<p>But I am not sure what's the best strategy. The pointer? the <code>std::reference_wrapper</code> maybe? Did I made a mistake with using <code>std::shared_ptr</code> / <code>std::unique_ptr</code>? </p>\n\n<p><strong>Is there a better, more straightforward STL class?</strong> </p>\n"}, {"tags": ["c++", "cmake"], "owner": {"reputation": 2257, "user_id": 1530018, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/bcbc00a1cd813900aedb1eebd7113d90?s=128&d=identicon&r=PG&f=1", "display_name": "kreuzerkrieg", "link": "https://stackoverflow.com/users/1530018/kreuzerkrieg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 159, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1551387591, "creation_date": 1549453705, "last_edit_date": 1551387591, "question_id": 54552967, "link": "https://stackoverflow.com/questions/54552967/cmake-externalproject-add-does-not-trigger-build-when-external-project-source", "title": "CMake EXTERNALPROJECT_ADD does not trigger build when (external project) source is changed", "body": "<p>Well, as far as I understand from looking for the issue here and there, it actually shouldn't. Instead people suggest using <code>ADD_CUSTOM_TARGET</code> instead. So, I switched from this:</p>\n\n<pre><code>EXTERNALPROJECT_ADD(spdk\n                    SOURCE_DIR ${EXTDIR}/spdk\n                    CONFIGURE_COMMAND ./configure ${SPDK_CONFIG}\n                    BUILD_COMMAND $(MAKE) -j CC=${CMAKE_C_COMPILER} CXX=${CMAKE_CXX_COMPILER} DPDK_CFLAGS=${DPDK_CONFIG}\n                    INSTALL_COMMAND \"\"\n                    BUILD_IN_SOURCE 1\n                    LOG_CONFIGURE 1\n                    LOG_BUILD 1\n                    )\n</code></pre>\n\n<p>To this:</p>\n\n<pre><code>ADD_CUSTOM_TARGET(spdk-configure\n                  COMMAND ./configure ${SPDK_CONFIG}\n                  WORKING_DIRECTORY ${EXTDIR}/spdk\n                  )\n\nADD_CUSTOM_TARGET(spdk\n                  COMMAND $(MAKE) -j CC=${CMAKE_C_COMPILER} CXX=${CMAKE_CXX_COMPILER} DPDK_CFLAGS=${DPDK_CONFIG}\n                  WORKING_DIRECTORY ${EXTDIR}/spdk\n                  )\n\nADD_DEPENDENCIES(spdk spdk-configure)\n</code></pre>\n\n<p>However, I see the <code>spdk/spdk-configure</code> are built each time I invoke the build, regardless if the target is up to date, which, maybe undesired, but <a href=\"https://cmake.org/cmake/help/latest/command/add_custom_target.html\" rel=\"nofollow noreferrer\">documented behavior</a>.</p>\n\n<blockquote>\n  <p>The target has no output file and is always considered out of date\n  even if the commands try to create a file with the name of the target.</p>\n</blockquote>\n\n<p>I'm less than happy with this behavior, is there any additional option that may be more appropriate for the above case?</p>\n\n<p>EDIT001:\nLooks like it is not really building anything on second run. It simply takes ages until make rescans all targets</p>\n"}, {"tags": ["c++", "assimp"], "answers": [{"comments": [{"owner": {"reputation": 29, "user_id": 10440482, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-0A04BSC9N2o/AAAAAAAAAAI/AAAAAAAAAEI/IYwobZ4PJyc/photo.jpg?sz=128", "display_name": "Pedro Os&#243;rio", "link": "https://stackoverflow.com/users/10440482/pedro-os%c3%b3rio"}, "edited": false, "score": 0, "creation_date": 1549471025, "post_id": 54555919, "comment_id": 95916436, "body": "But it seems Assimp is creating a collection of materials based on the ones the OBJ refers to, even tho it didnt found any definition for that material (it is defaulting to 0.0 for ambient, 0.6 for diffuse and 0.0 for specular components). The material pointers are not null.  It definetely creates a DefaultMaterial (with this exact name) and that i can handle, but it also carries all the other undefined materials and gives default values of its own"}, {"owner": {"reputation": 2059, "user_id": 1138311, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67def91a371d970532624092bc75f6ec?s=128&d=identicon&r=PG", "display_name": "KimKulling", "link": "https://stackoverflow.com/users/1138311/kimkulling"}, "reply_to_user": {"reputation": 29, "user_id": 10440482, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-0A04BSC9N2o/AAAAAAAAAAI/AAAAAAAAAEI/IYwobZ4PJyc/photo.jpg?sz=128", "display_name": "Pedro Os&#243;rio", "link": "https://stackoverflow.com/users/10440482/pedro-os%c3%b3rio"}, "edited": false, "score": 0, "creation_date": 1549486610, "post_id": 54555919, "comment_id": 95923713, "body": "Yes, at the moment we are creating a default material. There is already an issue report opened to adress this."}], "tags": [], "owner": {"reputation": 2059, "user_id": 1138311, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67def91a371d970532624092bc75f6ec?s=128&d=identicon&r=PG", "display_name": "KimKulling", "link": "https://stackoverflow.com/users/1138311/kimkulling"}, "is_accepted": true, "score": 0, "last_activity_date": 1549463340, "creation_date": 1549463340, "answer_id": 54555919, "question_id": 54552949, "link": "https://stackoverflow.com/questions/54552949/assimp-4-loading-missing-materials-doesnt-throw-errors/54555919#54555919", "title": "Assimp 4 Loading Missing materials doesn&#39;t throw errors", "body": "<p>When the material in your example is not there it will be a nullptr-type and your application will crash. When no obj-based material were imported (the file with the mtl-extension ) a base material ill be created I guess this material file will be used to get the key which you want to look for.</p>\n\n<p>First make sure that you are using the right material instance. Then the API will work as descriped in the API-documentation. </p>\n\n<p>Just ask if there are still some open questions. And you will get faster answers if you are using the project-side directly :-).</p>\n\n<p>Kim</p>\n"}], "owner": {"reputation": 29, "user_id": 10440482, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-0A04BSC9N2o/AAAAAAAAAAI/AAAAAAAAAEI/IYwobZ4PJyc/photo.jpg?sz=128", "display_name": "Pedro Os&#243;rio", "link": "https://stackoverflow.com/users/10440482/pedro-os%c3%b3rio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 54555919, "answer_count": 1, "score": 0, "last_activity_date": 1582126648, "creation_date": 1549453629, "last_edit_date": 1582126648, "question_id": 54552949, "link": "https://stackoverflow.com/questions/54552949/assimp-4-loading-missing-materials-doesnt-throw-errors", "title": "Assimp 4 Loading Missing materials doesn&#39;t throw errors", "body": "<p>I'm using Assimp 4.1.0 to load OBJ files. Some files might be referencing a missing material file and i wanted to give my own default values to the materials if Assimp doesn't find them properly.</p>\n\n<p>Given the documentation:</p>\n\n<pre><code>aiMaterial* mat = .....\n// The generic way\nif(AI_SUCCESS != mat-&gt;Get(&lt;material-key&gt;,&lt;where-to-store&gt;)) {\n   // handle epic failure here\n}\n</code></pre>\n\n<p>It should throw something, but it isn't. It is returning aiReturn_SUCCESS even though the material file wasn't there. Does anyone have any workaround for this ?</p>\n\n<p>Thanks !</p>\n"}, {"tags": ["c++", "c++-concepts", "c++20"], "comments": [{"owner": {"reputation": 33577, "user_id": 9593596, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JdCIQ.jpg?s=128&g=1", "display_name": "lubgr", "link": "https://stackoverflow.com/users/9593596/lubgr"}, "edited": false, "score": 16, "creation_date": 1549452478, "post_id": 54552521, "comment_id": 95904885, "body": "Doesn&#39;t Jonathan Wakely&#39;s answer in the linked thread answer the why-part, too? &quot;MoveConstructible doesn&#39;t require that anything gets moved, only that construction from rvalues is possible, and all CopyConstructible types can be constructed from rvalues (even if they might do a deep copy not a move).&quot;"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1549455301, "post_id": 54552521, "comment_id": 95906575, "body": "my understanding is that when something gets moved you are not supposed to care wether it actually got moved or copied, hence if something is <code>CopyConstructible</code> it automatically is <code>MoveConstructible</code>, you cannot tell the difference, and it isnt really an additional requirement"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1549455477, "post_id": 54552521, "comment_id": 95906682, "body": "i do agree with lubr, and would flag this question as a duplicate, what part do you thing is not answered by the linked answer?"}, {"owner": {"reputation": 465, "user_id": 4715518, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-KXsCxW7jiNI/AAAAAAAAAAI/AAAAAAAAADE/re2tSvSBz2c/photo.jpg?sz=128", "display_name": "hoo2", "link": "https://stackoverflow.com/users/4715518/hoo2"}, "edited": false, "score": 0, "creation_date": 1549455553, "post_id": 54552521, "comment_id": 95906731, "body": "While its very possible that I don&#39;t understand it well... Wakely&#39;s answer says &quot;We try to avoid  perverse types [and/so], ?we need the move constructor also because someone may use it to copy?&quot;. Why we do that by asking for MoveConstructible concept? And why while doing that we exclude HaveCopy from being CopyConstructible?"}, {"owner": {"reputation": 465, "user_id": 4715518, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-KXsCxW7jiNI/AAAAAAAAAAI/AAAAAAAAADE/re2tSvSBz2c/photo.jpg?sz=128", "display_name": "hoo2", "link": "https://stackoverflow.com/users/4715518/hoo2"}, "edited": false, "score": 0, "creation_date": 1549456646, "post_id": 54552521, "comment_id": 95907431, "body": "@ user463035818 My question is on the why part. I can not understand why by trying to avoid perverse types we ban types with deleted move constructor but with pretty valid copy constructor. Why we need this behavior? Does this kind of check excludes valid copy constructible types or HaveCopy is not copy constructible at all?"}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 2, "creation_date": 1549458213, "post_id": 54552521, "comment_id": 95908320, "body": "It&#39;s like asking &quot;why do all numbers divisible by 4 have to be divisible by 2?&quot;. Any <code>T</code> that can be instantiated from a <code>const T &amp;</code> can be instantiated from a <code>T &amp;&amp;</code>, because of the &quot;implicit conversion&quot; of <code>T &amp;&amp;</code> to <code>const T &amp;</code>. &quot;can be instantiated from a <code>T &amp;&amp;</code>&quot; is how MoveConstructible <i>is defined</i>"}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 0, "creation_date": 1549466208, "post_id": 54552521, "comment_id": 95913328, "body": "@Caleth As OP showed with <code>HaveCopy</code>, that is not necessarily the case. It&#39;s true that the copy constructor would be a candidate - it&#39;s not true that the copy constructor is necessarily the <i>best</i> candidate."}], "answers": [{"comments": [{"owner": {"reputation": 465, "user_id": 4715518, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-KXsCxW7jiNI/AAAAAAAAAAI/AAAAAAAAADE/re2tSvSBz2c/photo.jpg?sz=128", "display_name": "hoo2", "link": "https://stackoverflow.com/users/4715518/hoo2"}, "edited": false, "score": 0, "creation_date": 1549462083, "post_id": 54554935, "comment_id": 95910659, "body": "So its all about wording? If so consider my intuitive reaction to concept wording. First to quote from your (very good) answer for CopyConstructible: &quot;I can construct a T from a T&quot;. Is this what Constructible is for? Second... would it be better for CopyConstructible to be &quot;I can COPY a T from a T&quot; ?"}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "reply_to_user": {"reputation": 465, "user_id": 4715518, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-KXsCxW7jiNI/AAAAAAAAAAI/AAAAAAAAADE/re2tSvSBz2c/photo.jpg?sz=128", "display_name": "hoo2", "link": "https://stackoverflow.com/users/4715518/hoo2"}, "edited": false, "score": 0, "creation_date": 1549463669, "post_id": 54554935, "comment_id": 95911709, "body": "@hoo2: Requirements like this are more about the viability of expressions than the semantic effects (though they have them too). Consider <code>T t = some_t;</code> and <code>T t = func_returning_t();</code>. Does the user care exactly whether it is a &quot;COPY&quot; or not? Or do they just care that they have a <code>T</code> and are able to construct another <code>T</code> from it?"}, {"owner": {"reputation": 465, "user_id": 4715518, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-KXsCxW7jiNI/AAAAAAAAAAI/AAAAAAAAADE/re2tSvSBz2c/photo.jpg?sz=128", "display_name": "hoo2", "link": "https://stackoverflow.com/users/4715518/hoo2"}, "reply_to_user": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1549464526, "post_id": 54554935, "comment_id": 95912275, "body": "@Nicol Bolas: Of course the user cares. Consider a library with objects holding hardware resources. These objects are allowed to move but not to copy. The author of that library have to make a lot of checks and better wording could make his life easier. In my opinion every time we make assumptions like that we weaken the language. Isn&#39;t a precise tool, a better tool? And saying that I don&#39;t mean I have right on wording. I say that as part of the discussion."}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "reply_to_user": {"reputation": 465, "user_id": 4715518, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-KXsCxW7jiNI/AAAAAAAAAAI/AAAAAAAAADE/re2tSvSBz2c/photo.jpg?sz=128", "display_name": "hoo2", "link": "https://stackoverflow.com/users/4715518/hoo2"}, "edited": false, "score": 2, "creation_date": 1549464719, "post_id": 54554935, "comment_id": 95912388, "body": "@hoo2: Yes, the user cares whether the type is move <i>only</i>, and thus <code>T t = some_t;</code> doesn&#39;t compile. But why should a user desire <code>T t = func_returning_t();</code> to not compile? If you can create an instance from an lvalue, why can you not create one from an rvalue? A type which is copyable-but-not-moveable is a type that breaks the basic underlying concepts of these operations."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 465, "user_id": 4715518, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-KXsCxW7jiNI/AAAAAAAAAAI/AAAAAAAAADE/re2tSvSBz2c/photo.jpg?sz=128", "display_name": "hoo2", "link": "https://stackoverflow.com/users/4715518/hoo2"}, "edited": false, "score": 2, "creation_date": 1549466151, "post_id": 54554935, "comment_id": 95913300, "body": "@hoo2 &quot;allowed to move but not to copy&quot; is a perfectly reasonable semantic, that has no shortage of important use-cases. &quot;allowed to copy but not to move&quot; is... literally a possible thing to write. Those aren&#39;t exactly on equal footing."}, {"owner": {"reputation": 2310, "user_id": 3656081, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/69071f1a4855e7a35b785ca46e150962?s=128&d=identicon&r=PG&f=1", "display_name": "tangy", "link": "https://stackoverflow.com/users/3656081/tangy"}, "edited": false, "score": 0, "creation_date": 1606010205, "post_id": 54554935, "comment_id": 114828529, "body": "On a related note, per cppreference, many containers(eg. vector) state that <code>T must meet the requirements of CopyAssignable and CopyConstructible.</code> In C++17, std::vector with nonmovable objects is supported. Does this mean that in future versions or with specific compilers said support might drop as these containers are implemented using concepts?"}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 2310, "user_id": 3656081, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/69071f1a4855e7a35b785ca46e150962?s=128&d=identicon&r=PG&f=1", "display_name": "tangy", "link": "https://stackoverflow.com/users/3656081/tangy"}, "edited": false, "score": 1, "creation_date": 1606015852, "post_id": 54554935, "comment_id": 114829240, "body": "@tangy That sentence says &quot;(until C++11)&quot; on it."}], "tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": false, "score": 7, "last_activity_date": 1549460230, "creation_date": 1549460230, "answer_id": 54554935, "question_id": 54552521, "link": "https://stackoverflow.com/questions/54552521/why-does-a-copyconstructible-type-also-have-to-be-moveconstructible/54554935#54554935", "title": "Why does a CopyConstructible type also have to be MoveConstructible?", "body": "<p>Yes, <code>CopyConstructible</code> the concept is quite different than the type trait <code>std::is_copy_constructible</code>. You're focusing on the move constructor, but there are many other cases to consider as well. Do you think this type should be CopyConstructible?</p>\n\n<pre><code>struct A {\n    A(A&amp;) = delete;\n    A(A const&amp;);\n};\n</code></pre>\n\n<p>How about this one?</p>\n\n<pre><code>struct B {\n    explicit B(B const&amp;);\n};\n</code></pre>\n\n<p>The point is, there's an endless variety of combinations of constructors you can write. That doesn't mean that they're all meaningful or worth supporting. Having a type with a copy constructor but a deleted move constructor simply does not make sense. </p>\n\n<p>Concepts isn't about just doing a syntactic check, it's also about enforcing semantic requirements to push for meaningful types - which end up being easier to code around. If you simply check <code>is_copy_constructible</code>, all you're allowing yourself to do is to <em>explicitly</em> construct your type from a const lvalue. Writing <code>T x = y;</code>, even if <code>y</code> is a <code>const T</code>, is already outside of that scope! That might be literally what copy constructible means, but it's a lot less meaningful than the broader \"I can construct a <code>T</code> from a <code>T</code>\" - which is a lot closer to really what we think of when we consider copying. That's what the concept <code>CopyConstructible</code> gives us.</p>\n\n<p>As you go through the library, there are other concepts that require more (syntactically and semantically) than a direct translation of their name might suggest. <a href=\"http://eel.is/c++draft/concepts#concept.equalitycomparable\" rel=\"noreferrer\"><code>EqualityComparableWith&lt;T,U&gt;</code></a> doesn't just check that I can write <code>t == u</code> but also <code>u == t</code>, <code>t != u</code>, and <code>u != t</code> as well. <a href=\"http://eel.is/c++draft/#concept.stricttotallyordered\" rel=\"noreferrer\"><code>StrictTotallyOrdered</code></a> doesn't just check the ordering operators, it <em>also</em> checks <code>==</code>. Having a cohesive whole is important. </p>\n"}], "owner": {"reputation": 465, "user_id": 4715518, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-KXsCxW7jiNI/AAAAAAAAAAI/AAAAAAAAADE/re2tSvSBz2c/photo.jpg?sz=128", "display_name": "hoo2", "link": "https://stackoverflow.com/users/4715518/hoo2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 330, "favorite_count": 0, "answer_count": 1, "score": 11, "last_activity_date": 1549464982, "creation_date": 1549452275, "last_edit_date": 1549464982, "question_id": 54552521, "link": "https://stackoverflow.com/questions/54552521/why-does-a-copyconstructible-type-also-have-to-be-moveconstructible", "title": "Why does a CopyConstructible type also have to be MoveConstructible?", "body": "<p>As stated in <a href=\"https://en.cppreference.com/w/cpp/named_req/CopyConstructible\" rel=\"noreferrer\">cppreference</a>, a requirement for a type <strong>T</strong> to be <strong>CopyConstructible</strong> is that it also be <strong>MoveConstructible</strong>.</p>\n\n<p>The draft for the STL <a href=\"https://en.cppreference.com/w/cpp/concepts/CopyConstructible\" rel=\"noreferrer\">CopyConstructible</a> concept contains:</p>\n\n<blockquote>\n<pre><code>template &lt;class T&gt;\nconcept CopyConstructible =\n   std::MoveConstructible&lt;T&gt; &amp;&amp;\n   std::Constructible&lt;T, T&amp;&gt; &amp;&amp; std::ConvertibleTo&lt;T&amp;, T&gt; &amp;&amp;\n   std::Constructible&lt;T, const T&amp;&gt; &amp;&amp; std::ConvertibleTo&lt;const T&amp;, T&gt; &amp;&amp;\n   std::Constructible&lt;T, const T&gt; &amp;&amp; std::ConvertibleTo&lt;const T, T&gt;;\n</code></pre>\n</blockquote>\n\n<p>which supports the named requirement statement. Given the above definition, a type like:</p>\n\n<pre><code>struct HaveCopy {\n   HaveCopy(const HaveCopy&amp;)  = default;\n   HaveCopy(HaveCopy&amp;&amp;)       = delete;\n   HaveCopy&amp; operator= (const HaveCopy&amp;)  = default;\n   HaveCopy&amp; operator= (HaveCopy&amp;&amp;)       = delete;\n};\n</code></pre>\n\n<p>fails the simple test:</p>\n\n<pre><code>static_assert(std::CopyConstructible&lt;HaveCopy&gt;);\n</code></pre>\n\n<p>whereas it passes the old:</p>\n\n<pre><code>static_assert(std::is_copy_constructible&lt;HaveCopy&gt;::value);\n</code></pre>\n\n<p>So, the question is <strong>why</strong>? What's the intention of the standards committee on that matter? HaveCopy is not move constructible but is pretty much copy constructible in my opinion and <code>std::is_copy_constructible&lt;&gt;</code> agrees with me.</p>\n\n<p>The same behavior is also inherited by the <a href=\"https://en.cppreference.com/w/cpp/concepts/Copyable\" rel=\"noreferrer\">Copyable</a> concept, which is:</p>\n\n<blockquote>\n<pre><code>template &lt;class T&gt;\nconcept Copyable =\n   std::CopyConstructible&lt;T&gt; &amp;&amp;\n   std::Movable&lt;T&gt; &amp;&amp;\n   std::Assignable&lt;T&amp;, const T&amp;&gt;;\n</code></pre>\n</blockquote>\n\n<p>So the test:</p>\n\n<pre><code>static_assert(std::Copyable&lt;HaveCopy&gt;);\n</code></pre>\n\n<p>will fail also. This time the failure is doubled. Both <code>CopyConstrucible&lt;&gt;</code> and <code>Movable&lt;&gt;</code> disagree that HaveCopy is copyable.</p>\n\n<p>The discussion <a href=\"https://stackoverflow.com/questions/35041787/are-all-copyconstructible-types-moveconstructible-types\">here</a> is somehow similar but does not answer the <strong>why</strong>. Why do we need this behavior? Does this kind of check exclude valid copy constructible types or is HaveCopy not copy constructible at all? The last seems really weird to me if it is true.</p>\n\n<p>Any thoughts?</p>\n"}, {"tags": ["c++", "amazon-web-services", "aws-lambda", "jsoncpp", "aws-sdk-cpp"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1549452663, "post_id": 54552506, "comment_id": 95904988, "body": "Inside the function <code>get_object_outcome</code> is a <i>local</i> variable. As such its life will end when the function ends, meaning all references to it or to members inside the object will become invalid. Using such references will lead to <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\"><i>undefined behavior</i></a> and possible crashes."}, {"owner": {"reputation": 2354, "user_id": 9428851, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MBhDff_bdY0/AAAAAAAAAAI/AAAAAAAACAY/lx7DUTjS350/photo.jpg?sz=128", "display_name": "Victor Gubin", "link": "https://stackoverflow.com/users/9428851/victor-gubin"}, "edited": false, "score": 1, "creation_date": 1549452775, "post_id": 54552506, "comment_id": 95905064, "body": "You&#39;r issue is <code>std::istream&amp; res = get_object_outcome.GetResult().GetBody(); return res;</code> Check the compiler warning (enable them all). You are returning reference (address) to the local object, just after  <code>s3read</code> call <code>get_object_outcome</code> is already destroyed so address to the stream object is no longer show into opened input stream."}, {"owner": {"reputation": 2354, "user_id": 9428851, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MBhDff_bdY0/AAAAAAAAAAI/AAAAAAAACAY/lx7DUTjS350/photo.jpg?sz=128", "display_name": "Victor Gubin", "link": "https://stackoverflow.com/users/9428851/victor-gubin"}, "edited": false, "score": 1, "creation_date": 1549452868, "post_id": 54552506, "comment_id": 95905126, "body": "What you can do - return parsed json object from the s3read"}], "answers": [{"tags": [], "owner": {"reputation": 2354, "user_id": 9428851, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MBhDff_bdY0/AAAAAAAAAAI/AAAAAAAACAY/lx7DUTjS350/photo.jpg?sz=128", "display_name": "Victor Gubin", "link": "https://stackoverflow.com/users/9428851/victor-gubin"}, "is_accepted": true, "score": 0, "last_activity_date": 1549454331, "creation_date": 1549454331, "answer_id": 54553149, "question_id": 54552506, "link": "https://stackoverflow.com/questions/54552506/parse-json-file-from-aws-s3-with-c-and-jsoncpp/54553149#54553149", "title": "Parse json file from AWS S3 with C++ and Jsoncpp", "body": "<p>The issue you'r have is classical <a href=\"https://stackoverflow.com/questions/1339601/warning-returning-reference-to-temporary\">returning reference to temporary</a></p>\n\n<p>You can re-design your code a little, to avoid this. For example:  </p>\n\n<pre><code>static Json::Value parse_json(std::istream&amp; src) {\n     Json::Value ret;\n     Json::Reader reader;\n     reader.parse(src, ret);\n     return ret;  \n}\n// Aws::String is actually same thing to std::string except the allocator\n// in case of Android, otherwise this is std::string as it is. \n// You can use function like s3read(\"foo\",\"bar\");  \nJson::Value s3read_json(const Aws::String&amp; bucket,const Aws::String&amp; key) {\n    static constexpr const char *FILE_NAME = \"/etc/pki/tls/certs/ca-bundle.crt\";\n\n    Aws::Client::ClientConfiguration aws_conf;\n    aws_conf.region = Aws::Environment::GetEnv(\"AWS_REGION\");\n    aws_conf.caFile = FILE_NAME;\n\n    Aws::S3::S3Client s3_client(aws_conf);\n    Aws::S3::Model::GetObjectRequest object_request;\n    object_request.WithBucket( bucket ).WithKey( key );\n\n    auto object_outcome = s3_client.GetObject(object_request);\n\n    if (object_outcome.IsSuccess()) {\n        auto result = object_outcome.GetResult();\n        // destructor of object_outcome is not yet called\n        return parse_json( result.GetBody() );\n    } else {\n        ...\n        // throw std::runtime_error(\"S3 connection failed\");\n    };\n};\n</code></pre>\n"}], "owner": {"reputation": 2126, "user_id": 2235673, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/941e70b9be91dce71078e20e0444d23c?s=128&d=identicon&r=PG", "display_name": "Medical physicist", "link": "https://stackoverflow.com/users/2235673/medical-physicist"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 646, "favorite_count": 0, "accepted_answer_id": 54553149, "answer_count": 1, "score": 0, "last_activity_date": 1549454331, "creation_date": 1549452239, "question_id": 54552506, "link": "https://stackoverflow.com/questions/54552506/parse-json-file-from-aws-s3-with-c-and-jsoncpp", "title": "Parse json file from AWS S3 with C++ and Jsoncpp", "body": "<p>I have this C++ function that downloads S3 files as <em>istreams</em> using the AWS SDK C++:</p>\n\n<pre><code>std::istream&amp; s3read(std::string bucket, std::string key) {\n    Aws::Client::ClientConfiguration aws_conf;\n    aws_conf.region = Aws::Environment::GetEnv(\"AWS_REGION\");\n    aws_conf.caFile = \"/etc/pki/tls/certs/ca-bundle.crt\";\n    Aws::S3::S3Client s3_client(aws_conf);\n    Aws::S3::Model::GetObjectRequest object_request;\n    object_request.WithBucket(bucket.c_str()).WithKey(key.c_str());\n    auto get_object_outcome = s3_client.GetObject(object_request);\n\n    if (get_object_outcome.IsSuccess()) {\n        std::istream&amp; res = get_object_outcome.GetResult().GetBody();\n        return res;\n    } else {\n        ...\n    };\n};\n</code></pre>\n\n<p>I call it from <em>main.cpp</em> and try to parse it with <em>Jsoncpp</em>:</p>\n\n<pre><code>std::istream&amp; stream = s3read(bucket, key);\nJson::Value json;\nJson::Reader reader;\nreader.parse(stream, json);\n</code></pre>\n\n<p>However, I keep getting <em>segmentation fault</em>. Why?</p>\n\n<p>I think that the problem is that <em>reader.parse</em> needs binary data and the <em>istream</em> isn't. But, if I'm right, how can I parse the stream as binary?</p>\n"}, {"tags": ["c++", "algorithm", "performance", "tree", "time-complexity"], "comments": [{"owner": {"reputation": 11349, "user_id": 6487675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe04c577bacde4d7dd2cdd8f495df696?s=128&d=identicon&r=PG&f=1", "display_name": "dWinder", "link": "https://stackoverflow.com/users/6487675/dwinder"}, "edited": false, "score": 0, "creation_date": 1549453290, "post_id": 54552399, "comment_id": 95905385, "body": "I guess you can have <code>O(n^3)</code> (also some kind of brute force by traverse the tree and set weight for all sub-tree from him and then return it or reduce 2 other sub tree"}, {"owner": {"reputation": 63, "user_id": 11008454, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d8fbbb6a7686a2d07101b60b79e1440?s=128&d=identicon&r=PG&f=1", "display_name": "cooldude", "link": "https://stackoverflow.com/users/11008454/cooldude"}, "reply_to_user": {"reputation": 11349, "user_id": 6487675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe04c577bacde4d7dd2cdd8f495df696?s=128&d=identicon&r=PG&f=1", "display_name": "dWinder", "link": "https://stackoverflow.com/users/6487675/dwinder"}, "edited": false, "score": 0, "creation_date": 1549454699, "post_id": 54552399, "comment_id": 95906187, "body": "@dWinder i need O(n) or O(nlogn), O(n^3) will run out of time because n is as large as 10^5 and time is 1 sec only and i guess 10^7 operation can be done in 1 sec at max"}], "owner": {"reputation": 63, "user_id": 11008454, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d8fbbb6a7686a2d07101b60b79e1440?s=128&d=identicon&r=PG&f=1", "display_name": "cooldude", "link": "https://stackoverflow.com/users/11008454/cooldude"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 102, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1549453080, "creation_date": 1549451931, "last_edit_date": 1549453080, "question_id": 54552399, "link": "https://stackoverflow.com/questions/54552399/finding-individual-sums-of-all-possible-tree-after-removing-edges", "title": "Finding individual sums of all possible tree after removing edges", "body": "<p>Given a tree with N nodes with non-zero weights of nodes, how many trees (removing one or more edge) of this tree will have sum of weights as x (given)?</p>\n\n<p>For example : </p>\n\n<p>N = 3, weight of each vertex is 1 1 1 , x=2</p>\n\n<p>edges</p>\n\n<p>1 2</p>\n\n<p>2 3</p>\n\n<p>now removing 1-2 we have 2 trees 1 and 2-3 with sum of weights 1 and 2 respectively, we remove edge 2-3, we have 1-2 and 3 with sum as 2 and 1 \nso there are total 2 trees among all possible trees(after removing one or more edge) with sum of weight equals to 2.</p>\n\n<p>My Solution-:</p>\n\n<p>I am only able to come up with a brute force solution with complexity 2^n (where n can be as large as 10^5).</p>\n\n<p>Brute Force -: cut each edge and apply bfs/dfs to all the trees that are formed and add the respective weights of vertex and check if the sum is equal to x.</p>\n\n<p>I think this can be optimized using DP memoization but i am not able to come up with a recurrence relation.</p>\n\n<p>I tried min-cut algorithm too but it's not applicable here as much as i understand.</p>\n\n<pre><code>int bfs()\n{\n    for(each cut in 2^n using bitmask)\n    {\n        queue &lt;int&gt; q;\n        q.push(s);\n        vis[ s ] = true;\n        while(!q.empty())\n        {\n            int p = q.front();\n            q.pop();\n            for(int i = 0;i &lt; v[ p ].size() ; i++)\n            {\n                if(vis[ v[ p ][ i ] ] == false)\n                {\n                    sum+=w[p][i]; // weight of p-i edge is w[p][i]                  \n                    q.push(v[ p ][ i ]);\n                    vis[ v[ p ][ i ] ] = true;\n                }\n            }        \n        }\n    }\n}\n</code></pre>\n\n<p>Is there any better algorithm/optimization of above 2^n solution, according to the question there is O(n) or O(n*logn) solution is possible.</p>\n\n<p>If there is any better way you can suggest please provide or if there is some tree cut algorithm that is required here please suggest.</p>\n"}, {"tags": ["c++", "protocol-buffers", "protoc", "google-protocol-buffer"], "comments": [{"owner": {"reputation": 790, "user_id": 10862144, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DPt16.png?s=128&g=1", "display_name": "RC0993", "link": "https://stackoverflow.com/users/10862144/rc0993"}, "edited": false, "score": 0, "creation_date": 1549451492, "post_id": 54552188, "comment_id": 95904314, "body": "in specific I want to know what <code>mutable_name()</code> and <code>release_name()</code> does?"}], "answers": [{"tags": [], "owner": {"reputation": 921791, "user_id": 23354, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/CrVFH.png?s=128&g=1", "display_name": "Marc Gravell", "link": "https://stackoverflow.com/users/23354/marc-gravell"}, "is_accepted": true, "score": 3, "last_activity_date": 1549451796, "creation_date": 1549451796, "answer_id": 54552343, "question_id": 54552188, "link": "https://stackoverflow.com/questions/54552188/protobuf-understanding-the-compiled-output-of-proto-files/54552343#54552343", "title": "Protobuf: Understanding the compiled output of proto files", "body": "<p>The starting point is <a href=\"https://developers.google.com/protocol-buffers/docs/reference/cpp/\" rel=\"nofollow noreferrer\">here</a> (static code) and <a href=\"https://developers.google.com/protocol-buffers/docs/reference/cpp-generated\" rel=\"nofollow noreferrer\">here</a> (generated code). The latter includes overviews of what you ask in your \"in specific\" - search for: <code>string* mutable_foo()</code> and <code>string* release_foo()</code> (noting that they are duplicated for proto2 vs proto3).</p>\n"}, {"tags": [], "owner": {"reputation": 24693, "user_id": 10190237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f95f50f67af8a9658c5d76df263b323?s=128&d=identicon&r=PG&f=1", "display_name": "P.W", "link": "https://stackoverflow.com/users/10190237/p-w"}, "is_accepted": false, "score": 2, "last_activity_date": 1549452968, "last_edit_date": 1549452968, "creation_date": 1549451898, "answer_id": 54552390, "question_id": 54552188, "link": "https://stackoverflow.com/questions/54552188/protobuf-understanding-the-compiled-output-of-proto-files/54552390#54552390", "title": "Protobuf: Understanding the compiled output of proto files", "body": "<p>As per the <a href=\"https://developers.google.com/protocol-buffers/docs/reference/cpp-generated\" rel=\"nofollow noreferrer\">documentation</a> of C++ Generated Code:  </p>\n\n<blockquote>\n  <p><code>string* mutable_foo()</code>: Returns a pointer to the mutable string\n  object that stores the field's value. If the field was not set prior\n  to the call, then the returned string will be empty (not the default\n  value). After calling this, <code>has_foo()</code> will return <code>true</code> and <code>foo()</code>\n  will return whatever value is written into the given string.</p>\n  \n  <p><code>string* release_foo()</code>: Releases the ownership of the field and\n  returns the pointer of the string object. After calling this, caller\n  takes the ownership of the allocated string object, <code>has_foo()</code> will\n  return false, and <code>foo()</code> will return the default value.</p>\n</blockquote>\n\n<p>You can find the descriptions of the rest of the functions in the same page.</p>\n"}], "owner": {"reputation": 790, "user_id": 10862144, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DPt16.png?s=128&g=1", "display_name": "RC0993", "link": "https://stackoverflow.com/users/10862144/rc0993"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 540, "favorite_count": 0, "accepted_answer_id": 54552343, "answer_count": 2, "score": 2, "last_activity_date": 1549452968, "creation_date": 1549451374, "question_id": 54552188, "link": "https://stackoverflow.com/questions/54552188/protobuf-understanding-the-compiled-output-of-proto-files", "title": "Protobuf: Understanding the compiled output of proto files", "body": "<p>**Hi All,\nI am new to the protobuf. I am trying to understand the basics here.\nI have created the sample proto file as <code>Test.proto</code> in directory <code>/path/to/Directory/</code>:</p>\n\n<pre><code>syntax = \"proto2\";\n\nmessage Person {\n  required string name = 1;\n  required int32 id = 2;\n  optional string email = 3;\n\n  enum PhoneType {\n    MOBILE = 0;\n    HOME = 1;\n    WORK = 2;\n  }**\n\n  message PhoneNumber {\n    required string number = 1;\n    optional PhoneType type = 2 [default = HOME];\n  }\n\n  repeated PhoneNumber phone = 4;\n}\n</code></pre>\n\n<p>and compiled it with</p>\n\n<pre><code> protoc -I=/path/to/Directory/ --cpp_out=/path/to/Directory/ /path/to/Directory/Test.proto\n</code></pre>\n\n<p>This created 2 files <code>Test.pb.h</code> and <code>Test.pb.cc</code>. Now I can see that there are different functions in the class <code>Person</code>. Let's just take the function <em>(derived from the line <code>required string name = 1;</code> of <code>Test.proto</code> file)</em></p>\n\n<p>Now the compiler does it's thing and gives these various functions:</p>\n\n<pre><code>bool has_name() const;\nvoid clear_name();\nstatic const int kNameFieldNumber = 1;\nconst ::std::string&amp; name() const;\nvoid set_name(const ::std::string&amp; value);\nvoid set_name(::std::string&amp;&amp; value);\nvoid set_name(const char* value);\nvoid set_name(const char* value, size_t size);\n::std::string* mutable_name();\n::std::string* release_name();\nvoid set_allocated_name(::std::string* name);\n</code></pre>\n\n<p><strong>Now my question is:</strong> Where can I find the descriptions of each functions and what they do?</p>\n"}, {"tags": ["c++", "inheritance", "assignment-operator"], "answers": [{"tags": [], "owner": {"reputation": 65491, "user_id": 986, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/0317df30e04cc468688b0f00adbb7037?s=128&d=identicon&r=PG", "display_name": "Mark Ingram", "link": "https://stackoverflow.com/users/986/mark-ingram"}, "is_accepted": false, "score": 20, "last_activity_date": 1549450780, "last_edit_date": 1549450780, "creation_date": 1549450107, "answer_id": 54551807, "question_id": 54551695, "link": "https://stackoverflow.com/questions/54551695/assignment-operator-not-available-in-derived-class/54551807#54551807", "title": "Assignment operator not available in derived class", "body": "<p>In order to make it work, you need to bring the <code>operator=</code> into <code>B</code>'s scope:</p>\n\n<pre><code>class B : public A\n{\npublic:\nusing A::operator=;\n};\n</code></pre>\n\n<p>According to the standard [class.copy.assign/8]:</p>\n\n<blockquote>\n  <p>Because a copy/move assignment operator is implicitly declared for a\n  class if not declared by the user, a base class copy/move assignment\n  operator is always hidden by the corresponding assignment operator of\n  a derived class (16.5.3).</p>\n</blockquote>\n\n<p>So, because the <code>B::operator=</code> has been implicitly declared, it has hidden <code>A::operator=</code>, which requires you to bring it into scope if you want to use it.</p>\n\n<p>Further quote from the standard [over.ass/1]</p>\n\n<blockquote>\n  <p>An assignment operator shall be implemented by a non-static member\n  function with exactly one parameter. <strong>Because a copy assignment\n  operator operator= is implicitly declared for a class if not declared\n  by the user (15.8), a base class assignment operator is always hidden\n  by the copy assignment operator of the derived class.</strong></p>\n</blockquote>\n\n<p>Emphasis is mine.</p>\n"}, {"comments": [{"owner": {"reputation": 10709, "user_id": 3212865, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/B6qLg.jpg?s=128&g=1", "display_name": "spectras", "link": "https://stackoverflow.com/users/3212865/spectras"}, "edited": false, "score": 0, "creation_date": 1549450217, "post_id": 54551815, "comment_id": 95903507, "body": "Isn&#39;t this only true because of the implicitly declared copy assignment in <code>B</code> hiding <code>A::operator=</code>?"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 10709, "user_id": 3212865, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/B6qLg.jpg?s=128&g=1", "display_name": "spectras", "link": "https://stackoverflow.com/users/3212865/spectras"}, "edited": false, "score": 0, "creation_date": 1549450365, "post_id": 54551815, "comment_id": 95903595, "body": "@spectras Yes that&#39;s true, which is why I updated the answer (just when you posted the comment)."}], "tags": [], "owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 9, "last_activity_date": 1549450343, "last_edit_date": 1549450343, "creation_date": 1549450125, "answer_id": 54551815, "question_id": 54551695, "link": "https://stackoverflow.com/questions/54551695/assignment-operator-not-available-in-derived-class/54551815#54551815", "title": "Assignment operator not available in derived class", "body": "<p>The problem is that the compiler will add an implicit assignment operator for the <code>B</code> class, declared as</p>\n\n<pre><code>B&amp; operator=(const B&amp;);\n</code></pre>\n\n<p>This operator will <strong><em>hide</em></strong> the operator from <code>A</code>, so the compiler will not know about it.</p>\n\n<p>The solution is to tell the compiler to also use the operator from <code>A</code> with the <code>using</code> keyword:</p>\n\n<pre><code>class B : public A\n{\npublic:\n    using A::operator=;\n};\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 10709, "user_id": 3212865, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/B6qLg.jpg?s=128&g=1", "display_name": "spectras", "link": "https://stackoverflow.com/users/3212865/spectras"}, "edited": false, "score": 1, "creation_date": 1549450302, "post_id": 54551827, "comment_id": 95903552, "body": "It does not behave differently, the same issue will arise with any other method."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "reply_to_user": {"reputation": 10709, "user_id": 3212865, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/B6qLg.jpg?s=128&g=1", "display_name": "spectras", "link": "https://stackoverflow.com/users/3212865/spectras"}, "edited": false, "score": 0, "creation_date": 1549450496, "post_id": 54551827, "comment_id": 95903686, "body": "@spectras &quot;same issue&quot; ?? usually mehtods are inherited by derived classes and can be used without further measures. Any other method will not be implicitly declared by the compiler"}, {"owner": {"reputation": 10709, "user_id": 3212865, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/B6qLg.jpg?s=128&g=1", "display_name": "spectras", "link": "https://stackoverflow.com/users/3212865/spectras"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1549450575, "post_id": 54551827, "comment_id": 95903738, "body": "@user463035818 the issue here is name hiding. See Some programmer dude&#39;s answer. You&#39;ll encounter this issue anytime a method in derived class has the same name as methods in base class ^^"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "reply_to_user": {"reputation": 10709, "user_id": 3212865, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/B6qLg.jpg?s=128&g=1", "display_name": "spectras", "link": "https://stackoverflow.com/users/3212865/spectras"}, "edited": false, "score": 0, "creation_date": 1549450668, "post_id": 54551827, "comment_id": 95903802, "body": "@spectras ok, thanks, now I understand what you mean, though OP didnt declare a <code>operator=</code> in the derived and it is special with regard to hiding"}, {"owner": {"reputation": 33577, "user_id": 9593596, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JdCIQ.jpg?s=128&g=1", "display_name": "lubgr", "link": "https://stackoverflow.com/users/9593596/lubgr"}, "reply_to_user": {"reputation": 10709, "user_id": 3212865, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/B6qLg.jpg?s=128&g=1", "display_name": "spectras", "link": "https://stackoverflow.com/users/3212865/spectras"}, "edited": false, "score": 0, "creation_date": 1549450714, "post_id": 54551827, "comment_id": 95903839, "body": "@spectras Thanks for pointing that out, I fixed this part of the answer."}, {"owner": {"reputation": 175, "user_id": 8560257, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0dc98e5331f626784cafcc3405531a32?s=128&d=identicon&r=PG&f=1", "display_name": "naomimyselfandi", "link": "https://stackoverflow.com/users/8560257/naomimyselfandi"}, "edited": false, "score": 1, "creation_date": 1549464703, "post_id": 54551827, "comment_id": 95912381, "body": "The best answer, imo, since it addresses <i>why</i> hiding the assignment operator is desirable, and the caveats with dragging it in."}], "tags": [], "owner": {"reputation": 33577, "user_id": 9593596, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JdCIQ.jpg?s=128&g=1", "display_name": "lubgr", "link": "https://stackoverflow.com/users/9593596/lubgr"}, "is_accepted": false, "score": 10, "last_activity_date": 1549451041, "last_edit_date": 1549451041, "creation_date": 1549450160, "answer_id": 54551827, "question_id": 54551695, "link": "https://stackoverflow.com/questions/54551695/assignment-operator-not-available-in-derived-class/54551827#54551827", "title": "Assignment operator not available in derived class", "body": "<p>As pointed out by the other existing answers, the implicitly generated assignment operator of <code>B</code> hides the assignment operator defined in <code>A</code>. This is true for any non-virtual member function in a base class, the only specialty here is the automatically generated assignment operator.</p>\n\n<p>But try to figure out first whether you really want to do this. Imagine your class <code>B</code> has data members that need to be initialized in some way. How does using the assignment from <code>A</code> affect these data members? <code>A</code> doesn't know anything of its derived class data members, they would be left untouched. Have a look at the following scenario where the assignment operator has been made available through a using directive:</p>\n\n<pre><code>class B : public A {\n   public:\n      using A::operator=;\n\n      int m = 0; // Default-initialize data member to zero\n};\n\nB b;\nb.m = 42;\nb = 0; // Doesn't touch B::m... intended? A bug? Definitely weird.\n</code></pre>\n\n<p>So yes, it is possible, but error-prone and dangerous, especially when it comes to future modifications of the subclass.</p>\n"}, {"comments": [{"owner": {"reputation": 6559, "user_id": 4143855, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Gh4vC.jpg?s=128&g=1", "display_name": "Tas", "link": "https://stackoverflow.com/users/4143855/tas"}, "edited": false, "score": 1, "creation_date": 1549493419, "post_id": 54551849, "comment_id": 95926383, "body": "I actually had to read <a href=\"https://stackoverflow.com/a/54551807/4143855\">Mark&#39;s answer</a> to make sense of your second paragraph, but once I understood that your answer is very informative."}], "tags": [], "owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "is_accepted": true, "score": 27, "last_activity_date": 1549450210, "creation_date": 1549450210, "answer_id": 54551849, "question_id": 54551695, "link": "https://stackoverflow.com/questions/54551695/assignment-operator-not-available-in-derived-class/54551849#54551849", "title": "Assignment operator not available in derived class", "body": "<p>Every class has at least one assignment operator implicitly defined when we don't provide one ourselves.</p>\n\n<p>And when a member function in a derived class is defined with the same name as a member in the base class, it hides all the base class definitions for that name.</p>\n\n<p>You can use a using declaration, but be warned that it will pull <em>all</em> the members named <code>operator=</code> and allow code like this:</p>\n\n<pre><code>A a;\nB b;\nb = a;\n</code></pre>\n\n<p>Which is slightly dubious.</p>\n"}], "owner": {"reputation": 492, "user_id": 2564907, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f630985ac0e987885d102dcbc15fad0e?s=128&d=identicon&r=PG", "display_name": "Montaner", "link": "https://stackoverflow.com/users/2564907/montaner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1645, "favorite_count": 2, "accepted_answer_id": 54551849, "answer_count": 4, "score": 30, "last_activity_date": 1549462263, "creation_date": 1549449865, "last_edit_date": 1549462263, "question_id": 54551695, "link": "https://stackoverflow.com/questions/54551695/assignment-operator-not-available-in-derived-class", "title": "Assignment operator not available in derived class", "body": "<p>The assignment operator in base class does not seem to be available in derived class. Given this code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nclass A{\n    int value;\npublic:\n    A&amp; operator=(int value){\n        this-&gt;value = value;\n        return *this;\n    }\n};\n\nclass B : public A{};\n\nint main(){\n    B b;\n    b = 0; // Does not work\n    return 0;\n}\n</code></pre>\n\n<p>GCC 6.4 says:</p>\n\n<blockquote>\n  <p>error: no match for 'operator=' (operand types are 'B' and 'int')</p>\n</blockquote>\n\n<p>What is happening?</p>\n"}, {"tags": ["c++", "cmake", "linker", "ld"], "comments": [{"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1549452217, "post_id": 54551676, "comment_id": 95904718, "body": "The <code>raspicam</code> library is built without <code>CMAKE_CXX_STANDARD</code> setting, so probably you need to remove that setting from your project."}, {"owner": {"reputation": 403, "user_id": 2325656, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/JQsF5.png?s=128&g=1", "display_name": "stackoverflower", "link": "https://stackoverflow.com/users/2325656/stackoverflower"}, "reply_to_user": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1549454159, "post_id": 54551676, "comment_id": 95905909, "body": "This option gives only warnings for c++17, linker can be affected by this?"}, {"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 1, "creation_date": 1549454376, "post_id": 54551676, "comment_id": 95906016, "body": "Setting <code>CMAKE_CXX_STANDARD</code> affects on namespaces for some functions. Because namespace directly affects on the symbol name, generated for the function, it very affects on the linker."}, {"owner": {"reputation": 403, "user_id": 2325656, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/JQsF5.png?s=128&g=1", "display_name": "stackoverflower", "link": "https://stackoverflow.com/users/2325656/stackoverflower"}, "reply_to_user": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1549455147, "post_id": 54551676, "comment_id": 95906470, "body": "I have removed it and got same error."}], "answers": [{"tags": [], "owner": {"reputation": 128, "user_id": 5670313, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75b5f1656b300e76592707e107c2fea4?s=128&d=identicon&r=PG&f=1", "display_name": "scott-eddy", "link": "https://stackoverflow.com/users/5670313/scott-eddy"}, "is_accepted": true, "score": 1, "last_activity_date": 1549455497, "creation_date": 1549455497, "answer_id": 54553494, "question_id": 54551676, "link": "https://stackoverflow.com/questions/54551676/linker-loader-errors-undefined-reference-to-when-linking-with-raspicam-lib/54553494#54553494", "title": "Linker/loader errors &quot;undefined reference to ...&quot; when linking with raspicam library", "body": "<p>It appears you're attempting to build raspicam from source.  Looking at the <a href=\"http://www.uco.es/investiga/grupos/ava/node/40\" rel=\"nofollow noreferrer\">documentation you linked</a> it appears that raspicam provides a CMake find package and encourages users to include the library like so:</p>\n\n<pre><code>project (my_raspi_project)\nfind_package(raspicam REQUIRED)\nadd_executable (my_raspi_project main.cpp)  \ntarget_link_libraries (my_raspi_project ${raspicam_LIBS})\n</code></pre>\n\n<p>I would encourage you to do this, but it would require installing raspicam on your system.  That is, you would first need to follow the install steps listed in the above documentation:</p>\n\n<pre><code>tar xvzf raspicamxx.tgz\ncd raspicamxx\nmkdir build\ncd build\ncmake ..\nmake\nsudo make install\nsudo ldconfig\n</code></pre>\n\n<p>This installs the package in a location where CMake can find it and allow the <code>find_package(raspicam REQUIRED)</code> used in your CMakeList.txt to work correctly.  </p>\n\n<p>If you do not have the ability to install the library to your development machine, and instead want to build it from source alongside your project you could consider:</p>\n\n<ol>\n<li><p>Using CMake's <a href=\"https://cmake.org/cmake/help/latest/command/add_subdirectory.html\" rel=\"nofollow noreferrer\">add_subdirectory</a> command</p></li>\n<li><p>Using CMake's <a href=\"https://cmake.org/cmake/help/latest/module/ExternalProject.html\" rel=\"nofollow noreferrer\">ExternalProject_Add</a> command.</p></li>\n</ol>\n\n<p>Option #1 would allow you to update your CMakeList.txt file to look like the following:</p>\n\n<pre><code>cmake_minimum_required(VERSION 3.10)\nproject(raspicam)\n\nset(CMAKE_CXX_STANDARD 17)\nadd_subdirectory(&lt;path to raspicam CMakeList.txt&gt;)\nadd_executable(my_raspicam_program main.cpp)\ntarget_link_libraries(my_raspicam_program raspicam)\n</code></pre>\n\n<p>Note that you will need to change your target name <code>raspicam</code> to something unique, as that target name is used by the package you are including with add_subdirectory.  </p>\n\n<p>Option #2 is more complicated but gets the added benefit that you will not be tracking the raspicam source code in your version-control system.</p>\n"}], "owner": {"reputation": 403, "user_id": 2325656, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/JQsF5.png?s=128&g=1", "display_name": "stackoverflower", "link": "https://stackoverflow.com/users/2325656/stackoverflower"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 325, "favorite_count": 0, "accepted_answer_id": 54553494, "answer_count": 1, "score": 1, "last_activity_date": 1549455497, "creation_date": 1549449810, "question_id": 54551676, "link": "https://stackoverflow.com/questions/54551676/linker-loader-errors-undefined-reference-to-when-linking-with-raspicam-lib", "title": "Linker/loader errors &quot;undefined reference to ...&quot; when linking with raspicam library", "body": "<p>I am trying to compile a simple project with <strong>cmake</strong>, while using raspicam library. Project compiled flawlessly; however, I have <strong>ld</strong> errors at the end. Raspicam downloaded from here: <a href=\"http://www.uco.es/investiga/grupos/ava/node/40\" rel=\"nofollow noreferrer\">http://www.uco.es/investiga/grupos/ava/node/40</a>. Any ideas?</p>\n\n<p><strong>main.cpp:</strong></p>\n\n<pre class=\"lang-c++ prettyprint-override\"><code>#include &lt;raspicam_cv.h&gt;\n\nint main ( int argc,char **argv ) {\n    raspicam::RaspiCam_Cv capture;\n\n    if (!capture.open()) {\n        return 1;\n    }\n    return 0;\n}\n</code></pre>\n\n<p><strong>CMakeLists.txt:</strong></p>\n\n<pre class=\"lang-cmake prettyprint-override\"><code>cmake_minimum_required(VERSION 3.10)\nproject(raspicam)\n\nset(CMAKE_CXX_STANDARD 17)\ninclude_directories(raspicam-0.1.6/src)\nlink_directories(raspicam-0.1.6/src)\nadd_executable(raspicam main.cpp)\nset(RASPICAM_LIB ${CMAKE_SHARED_LIBRARY_PREFIX}raspicam_cv${CMAKE_SHARED_LIBRARY_SUFFIX})\ntarget_link_libraries(raspicam ${RASPICAM_LIB})\n</code></pre>\n\n<p><strong>Build command:</strong></p>\n\n<pre><code>cd raspicam-0.1.6/ &amp;&amp; cmake -DOpenCV_DIR=/home/user/Projects/opencv/opencv-build . &amp;&amp; make &amp;&amp; cd .. &amp;&amp; cmake . &amp;&amp; make\n</code></pre>\n\n<p><strong>Errors:</strong></p>\n\n<pre><code>CMakeFiles/raspicam.dir/main.cpp.o: In function `main':\n/home/user/CLionProjects/raspicam/main.cpp:5: undefined reference to `raspicam::RaspiCam_Cv::RaspiCam_Cv()'\n/home/user/CLionProjects/raspicam/main.cpp:7: undefined reference to `raspicam::RaspiCam_Cv::open()'\n/home/user/CLionProjects/raspicam/main.cpp:5: undefined reference to `raspicam::RaspiCam_Cv::~RaspiCam_Cv()'\n/home/user/CLionProjects/raspicam/main.cpp:5: undefined reference to `raspicam::RaspiCam_Cv::~RaspiCam_Cv()'\ncollect2: error: ld returned 1 exit status\nCMakeFiles/raspicam.dir/build.make:94: recipe for target 'raspicam' failed\nmake[2]: *** [raspicam] Error 1\nCMakeFiles/Makefile2:67: recipe for target 'CMakeFiles/raspicam.dir/all' failed\nmake[1]: *** [CMakeFiles/raspicam.dir/all] Error 2\nMakefile:83: recipe for target 'all' failed\nmake: *** [all] Error 2\n</code></pre>\n"}, {"tags": ["c++", "boost", "nullptr", "boost-test"], "comments": [{"owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 0, "creation_date": 1549449731, "post_id": 54551512, "comment_id": 95903237, "body": "Well, if you want to support multiple boost versions you will need to run tests on each of the supported version anyway. And if primary concern here is the delay caused by resubmitting this to CI system then how about compiling these tests locally or developing using oldest supported boost version and checking for forward portability instead?"}, {"owner": {"reputation": 5290, "user_id": 1381158, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/006e901151b153171d7a5918b56c511c?s=128&d=identicon&r=PG", "display_name": "Inductiveload", "link": "https://stackoverflow.com/users/1381158/inductiveload"}, "reply_to_user": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 0, "creation_date": 1549450184, "post_id": 54551512, "comment_id": 95903483, "body": "@VTT it&#39;s more a curiosity thing than a critical thing. It&#39;s just annoying to have to wait for an hour-plus CI job (or maintain &quot;n&quot; local builds) if there is something I can throw in the existing Boost version polyfill/patches/compatibility header. The real answer is, of course, full CI coverage, but it&#39;s a bit wasteful if you can avoid failed jobs in the first place (and if the compiler can detect it, you get an IDE marker too!)"}], "answers": [{"tags": [], "owner": {"reputation": 5290, "user_id": 1381158, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/006e901151b153171d7a5918b56c511c?s=128&d=identicon&r=PG", "display_name": "Inductiveload", "link": "https://stackoverflow.com/users/1381158/inductiveload"}, "is_accepted": true, "score": 3, "last_activity_date": 1549630034, "last_edit_date": 1549630034, "creation_date": 1549461341, "answer_id": 54555286, "question_id": 54551512, "link": "https://stackoverflow.com/questions/54551512/disable-boost-check-for-nullptr/54555286#54555286", "title": "Disable BOOST_CHECK for nullptr", "body": "<p>In Boost Test, this is implemented in <a href=\"https://github.com/boostorg/test/commit/229e71199c558d46a6f714cd5c34e594b29e66b4\" rel=\"nofollow noreferrer\">commit 229e71199</a> for v1.64, using the <code>print_log_value</code> <a href=\"https://www.boost.org/doc/libs/1_64_0/libs/test/doc/html/boost_test/test_output/test_tools_support_for_logging/testing_tool_output_disable.html\" rel=\"nofollow noreferrer\">customization point</a>:</p>\n\n<pre><code>template&lt;&gt;\nstruct BOOST_TEST_DECL print_log_value&lt;std::nullptr_t&gt; {\n    void operator()( std::ostream&amp; ostr, std::nullptr_t t ) {\n        ostr &lt;&lt; \"nullptr\";\n    }\n};\n</code></pre>\n\n<p>It is not possible to \"undef\" a function defined in a different translation unit (barring some pretty nasty preprocessor hacks). So it's not really possible to \"damage\" the function and cause a compilation failure if you try to use the function.</p>\n\n<p>However we have two better choices: use the Boost test method to avoid printing this type, or do it ourselves.</p>\n\n<hr>\n\n<h2>Avoid printing nullptr_t</h2>\n\n<p>You use the existing Boost customization point for preventing logging a type: <code>BOOST_TEST_DONT_PRINT_LOG_VALUE</code>:</p>\n\n<pre><code>// in your common test header\nBOOST_TEST_DONT_PRINT_LOG_VALUE( std::nullptr_t )\n</code></pre>\n\n<p>What this does, since in Boost 1.59 is define a <code>print_log_value</code> function that\ndoes nothing:</p>\n\n<pre><code>#define BOOST_TEST_DONT_PRINT_LOG_VALUE( the_type )         \\\nnamespace boost{ namespace test_tools{ namespace tt_detail{ \\\ntemplate&lt;&gt;                                                  \\\nstruct print_log_value&lt;the_type &gt; {                         \\\n    void    operator()( std::ostream&amp;, the_type const&amp; ) {} \\\n};                                                          \\\n}}}                                                         \\                                                     \n</code></pre>\n\n<p>Before 1.59 (<a href=\"https://github.com/boostorg/test/commit/bae8de14b4b54481c5bd77e19befe9ebec2b9936\" rel=\"nofollow noreferrer\">commit bae8de14b</a>), it's defined differently (not in <code>tt_detail</code> for a start), but the idea is the same. This means it will work back to at least 1.58 and earlier using this macro.</p>\n\n<p>However, because in 1.64, the <code>print_log_value</code> function was defined, if you just add the above macro, you will end up with redefinition errors from 1.64 onwards: one that does nothing from the <code>DONT_PRINT</code> macro, and the one that prints <code>\"nullptr\"</code>. So you can guard it with the relevant Boost version:</p>\n\n<pre><code>#if BOOST_VERSION &lt; 106400\n    BOOST_TEST_DONT_PRINT_LOG_VALUE( std::nullptr_t )\n#endif\n</code></pre>\n\n<p>Now it will avoid printing nullptr on Boost &lt; 1.64, and it will print on 1.64+:</p>\n\n<pre><code>[ != 0xdeadbeef]        // &lt; 1.64, using BOOST_TEST_DONT_PRINT_LOG_VALUE\n[nullptr != 0xdeadbeef] // 1.64 +, using built-in implementation\n</code></pre>\n\n<p>This might be good enough if you don't really care about the beauty of the logging on older Boost versions.</p>\n\n<hr>\n\n<h2>Do it yourself</h2>\n\n<p>You can also implement you <em>own</em> <code>print_log_value</code> customisation point. However, note that the namespace is different prior to 1.59, and we should only do it for &lt;1.64, as, again, we'd be redefining the function:</p>\n\n<pre><code>// You don't need this bit if you don't support Boost Test &lt;1.59.\n#if BOOST_VERSION &gt;= 105900\n#    define BOOST_TEST_PRINT_NAMESPACE_OPEN namespace boost { namespace test_tools { namespace tt_details {\n#    define BOOST_TEST_PRINT_NAMESPACE_CLOSE }}}\n#else\n#    define BOOST_TEST_PRINT_NAMESPACE_OPEN namespace boost { namespace test_tools {\n#    define BOOST_TEST_PRINT_NAMESPACE_CLOSE }}\n#endif\n\n#if BOOST_VERSION &lt; 106400\n\nBOOST_TEST_PRINT_NAMESPACE_OPEN\n\ntemplate&lt;&gt;\nstruct print_log_value&lt;nullptr_t&gt; {\n    inline void operator()(std::ostream&amp; os, nullptr_t const&amp; p) {\n        os &lt;&lt; \"nullptr\";\n    }\n};\n\nBOOST_TEST_PRINT_NAMESPACE_CLOSE\n\n#endif // End &lt;1.64 condition\n</code></pre>\n\n<p>Now it will print the same thing:</p>\n\n<pre><code>[nullptr != 0xdeadbeef] // &lt; 1.64, using DIY implementation\n[nullptr != 0xdeadbeef] // 1.64 +, using built-in implementation\n</code></pre>\n"}], "owner": {"reputation": 5290, "user_id": 1381158, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/006e901151b153171d7a5918b56c511c?s=128&d=identicon&r=PG", "display_name": "Inductiveload", "link": "https://stackoverflow.com/users/1381158/inductiveload"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 126, "favorite_count": 0, "accepted_answer_id": 54555286, "answer_count": 1, "score": 4, "last_activity_date": 1549630034, "creation_date": 1549449297, "last_edit_date": 1549454060, "question_id": 54551512, "link": "https://stackoverflow.com/questions/54551512/disable-boost-check-for-nullptr", "title": "Disable BOOST_CHECK for nullptr", "body": "<p>With <a href=\"https://www.boost.org/doc/libs/1_69_0/libs/test/doc/html/index.html\" rel=\"nofollow noreferrer\">Boost Test</a> earlier than version 1.64, you cannot do this:</p>\n\n<pre><code>SomeType* a_pointer = getPointer();\nBOOST_CHECK_EQUAL(a_pointer, nullptr);\n</code></pre>\n\n<p>This is because <code>nullptr_t</code> has ambiguous overloads: <a href=\"https://svn.boost.org/trac10/ticket/12778?replyto=2\" rel=\"nofollow noreferrer\">Boost issue #12778</a> and <a href=\"https://stackoverflow.com/questions/37673724/boost-test-check-whether-a-pointer-is-null\">a related SO question</a>. As in the answers to the question, this can be resolved easily:</p>\n\n<pre><code>BOOST_CHECK(!a_pointer); // rely on boolean casting, or...\n// cast nullptr away from nullptr_t\nBOOST_CHECK_EQUAL(a_pointer, static_cast&lt;SomeType*&gt;(nullptr));\n</code></pre>\n\n<p>However, if you support multiple boost versions, it's easy for a <code>BOOST_CHECK_EQUAL(a_pointer, nullptr)</code> to slip by on a newer platform, and break older ones.</p>\n\n<p>One solution here is to enforce a CI platform with older Boost versions (which is useful for other reasons too, especially when the supported Boost versions extended before 1.59, when Boost Test 3 changed a lot!).</p>\n\n<p>However, relying only on CI to catch this is a big delay in the OODA loop (compared to a local compiler failure) and requires network access and an simple-but-annoying VCS dance to patch the trivial changes in and resubmit the job.</p>\n\n<p>Is there a way to cause it to fail to compile, even when the Boost version would otherwise support it?</p>\n"}, {"tags": ["c++", "intrinsics", "avx", "conways-game-of-life"], "comments": [{"owner": {"reputation": 3352, "user_id": 2439725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/428ff617402eb64c48ed6dfc153617f9?s=128&d=identicon&r=PG", "display_name": "wim", "link": "https://stackoverflow.com/users/2439725/wim"}, "edited": false, "score": 0, "creation_date": 1549450708, "post_id": 54551462, "comment_id": 95903834, "body": "See <a href=\"https://stackoverflow.com/a/46602049\">here</a> for a clear explanation of <code>_mm256_shuffle_epi8</code>."}, {"owner": {"reputation": 45, "user_id": 9110327, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa584fc97064e09cf977d52312c79687?s=128&d=identicon&r=PG&f=1", "display_name": "lolmosk", "link": "https://stackoverflow.com/users/9110327/lolmosk"}, "reply_to_user": {"reputation": 3352, "user_id": 2439725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/428ff617402eb64c48ed6dfc153617f9?s=128&d=identicon&r=PG", "display_name": "wim", "link": "https://stackoverflow.com/users/2439725/wim"}, "edited": false, "score": 0, "creation_date": 1549450864, "post_id": 54551462, "comment_id": 95903947, "body": "@wim the algorithm of shuffle is pretty much clear I meant that I cannot get how it conduct the new state of cell. So it should somehow check if how much alive neighbors near the cell and get the answer"}, {"owner": {"reputation": 3352, "user_id": 2439725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/428ff617402eb64c48ed6dfc153617f9?s=128&d=identicon&r=PG", "display_name": "wim", "link": "https://stackoverflow.com/users/2439725/wim"}, "edited": false, "score": 0, "creation_date": 1549451404, "post_id": 54551462, "comment_id": 95904259, "body": "I see. Apparently, I misunderstood the title of your question. Unfortunately I&#39;m not familiar with Conway&#39;s Game."}, {"owner": {"reputation": 45, "user_id": 9110327, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa584fc97064e09cf977d52312c79687?s=128&d=identicon&r=PG&f=1", "display_name": "lolmosk", "link": "https://stackoverflow.com/users/9110327/lolmosk"}, "reply_to_user": {"reputation": 3352, "user_id": 2439725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/428ff617402eb64c48ed6dfc153617f9?s=128&d=identicon&r=PG", "display_name": "wim", "link": "https://stackoverflow.com/users/2439725/wim"}, "edited": false, "score": 1, "creation_date": 1549451712, "post_id": 54551462, "comment_id": 95904430, "body": "@wim edited it thank you"}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "reply_to_user": {"reputation": 3352, "user_id": 2439725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/428ff617402eb64c48ed6dfc153617f9?s=128&d=identicon&r=PG", "display_name": "wim", "link": "https://stackoverflow.com/users/2439725/wim"}, "edited": false, "score": 0, "creation_date": 1549451924, "post_id": 54551462, "comment_id": 95904551, "body": "@wim: you&#39;ve probably heard of <a href=\"https://en.wikipedia.org/wiki/Conway%27s_Game_of_Life\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Conway%27s_Game_of_Life</a>, but the OP forgot to capitalize &quot;Life&quot;.  If you haven&#39;t, check it out; cellular automata are nifty.  It&#39;s even Turing-complete."}, {"owner": {"reputation": 3352, "user_id": 2439725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/428ff617402eb64c48ed6dfc153617f9?s=128&d=identicon&r=PG", "display_name": "wim", "link": "https://stackoverflow.com/users/2439725/wim"}, "reply_to_user": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1549455856, "post_id": 54551462, "comment_id": 95906914, "body": "@PeterCordes: I&#39;ve heard of it, but I&#39;ve never thought about a computer implementation. Nice topic anyway. Cool application of <code>_mm256_shuffle_epi8</code> as a 16-entry LUT!"}], "answers": [{"comments": [{"owner": {"reputation": 45, "user_id": 9110327, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa584fc97064e09cf977d52312c79687?s=128&d=identicon&r=PG&f=1", "display_name": "lolmosk", "link": "https://stackoverflow.com/users/9110327/lolmosk"}, "edited": false, "score": 0, "creation_date": 1549454833, "post_id": 54552599, "comment_id": 95906269, "body": "It&#39;s much much better in my mind now, but still cannot get thing about so named <code>shuffmask</code> or <code>alivetable</code>. Why is it exactly like this, how it map the 4-bit integers to 0 / 1. Sorry its too complicated for me."}, {"owner": {"reputation": 45, "user_id": 9110327, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa584fc97064e09cf977d52312c79687?s=128&d=identicon&r=PG&f=1", "display_name": "lolmosk", "link": "https://stackoverflow.com/users/9110327/lolmosk"}, "edited": false, "score": 0, "creation_date": 1549454979, "post_id": 54552599, "comment_id": 95906358, "body": "Peter, please may be you could somehow illustrate 1 iteration of generating <code>newstate</code> or just explain it step by step, would be so nice from you"}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "reply_to_user": {"reputation": 45, "user_id": 9110327, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa584fc97064e09cf977d52312c79687?s=128&d=identicon&r=PG&f=1", "display_name": "lolmosk", "link": "https://stackoverflow.com/users/9110327/lolmosk"}, "edited": false, "score": 0, "creation_date": 1549456335, "post_id": 54552599, "comment_id": 95907244, "body": "@lolmosk: <a href=\"//stackoverflow.com/a/46602049\">unexpected _mm256_shuffle_epi with __256i vectors</a> shows how <code>vpshufb</code> does 16 / 32 parallel select operations.  The result is <code>result[i] = src1 [ src2[i] ]</code> (within each 16-byte lane)."}], "tags": [], "owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "is_accepted": true, "score": 6, "last_activity_date": 1549452526, "creation_date": 1549452526, "answer_id": 54552599, "question_id": 54551462, "link": "https://stackoverflow.com/questions/54551462/how-does-the-mm256-shuffle-epi8-make-sense-in-this-game-of-life-implementation/54552599#54552599", "title": "How does the _mm256_shuffle_epi8 make sense in this Game of Life implementation?", "body": "<p><code>shuffle_epi8</code> is being used here as a parallel table-lookup, with a constant first operand and a variable 2nd operand.</p>\n\n<p>Daniel's code does some calculations that produce a 4-bit integer for every byte in the vector, then uses <code>_mm256_shuffle_epi8</code> to map those integers to 0 / 1 alive-or-dead new states.</p>\n\n<p>Notice that the low and high lanes of <code>shufmask</code> are identical: it's the same lookup table for both lanes.  (It's not a lane-crossing shuffle, it's 32 parallel lookups from 2x 16-byte tables, using the low 4 bits in each element.  And the high bit to zero it out.)</p>\n\n<hr>\n\n<p><code>shufmask</code> is a poor choice of variable name.  It's <em>not</em> the shuffle-control vector.  <code>alivetable</code> might be a better choice.</p>\n\n<hr>\n\n<p><strong>Using <code>[v]pshufb</code> to implement a 16-entry LUT is a (fairly) well-known technique.</strong>  It's one way to implement a popcnt for large arrays that's faster than scalar, splitting bytes into low/high nibble and looking up the 4-bit popcnt results.  See <a href=\"https://stackoverflow.com/questions/50081465/counting-1-bits-population-count-on-large-data-using-avx-512-or-avx-2\">Counting 1 bits (population count) on large data using AVX-512 or AVX-2</a>, specifically <a href=\"https://github.com/WojciechMula/sse-popcount/blob/master/popcnt-avx2-lookup.cpp\" rel=\"noreferrer\">https://github.com/WojciechMula/sse-popcount/blob/master/popcnt-avx2-lookup.cpp</a></p>\n"}], "owner": {"reputation": 45, "user_id": 9110327, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa584fc97064e09cf977d52312c79687?s=128&d=identicon&r=PG&f=1", "display_name": "lolmosk", "link": "https://stackoverflow.com/users/9110327/lolmosk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 514, "favorite_count": 0, "accepted_answer_id": 54552599, "answer_count": 1, "score": 2, "last_activity_date": 1549452526, "creation_date": 1549449164, "last_edit_date": 1549451802, "question_id": 54551462, "link": "https://stackoverflow.com/questions/54551462/how-does-the-mm256-shuffle-epi8-make-sense-in-this-game-of-life-implementation", "title": "How does the _mm256_shuffle_epi8 make sense in this Game of Life implementation?", "body": "<p>Making my homework for implementing <a href=\"https://en.wikipedia.org/wiki/Conway%27s_Game_of_Life\" rel=\"nofollow noreferrer\">Conway's Game of Life</a> using intrinsic functions found the working code, but cannot understand the main part of it. </p>\n\n<p>This implementation first calculates amount of alive neighbors for each sell and store the result in an array <code>counts</code>, so the array of sells (world) is <code>states</code>. I cannot really get how the <code>newstate</code> is generated here. I understand how left shift works, how bitwise OR works, but I cannot understand why they're used like this, why <code>shufmask</code> is like this and how the shuffle works. Also cannot understand why _mm256_slli_epi16 used if the type of array elements is uint8_t. So my question is all about this string </p>\n\n<p><code>__m256i newstate = _mm256_shuffle_epi8(shufmask, _mm256_or_si256(c, _mm256_slli_epi16(oldstate, 3)));</code></p>\n\n<p>Could you please explain for me, dummy boy, if it's possible maximum detailed, how it works.</p>\n\n<pre><code>void gameoflife8vec(uint8_t *counts, uint8_t *states, size_t width, size_t height) {\nassert(width % (sizeof(__m256i)) == 0);\nsize_t awidth = width + 2;\ncomputecounts8vec(counts, states, width, height);\n__m256i shufmask =\n    _mm256_set_epi8(\n        0, 0, 0, 0, 0, 1, 1, 0,\n        0, 0, 0, 0, 0, 1, 0, 0,\n        0, 0, 0, 0, 0, 1, 1, 0,\n        0, 0, 0, 0, 0, 1, 0, 0\n    );\nfor (size_t i = 0; i &lt; height; i++) {\n    for (size_t j = 0; j &lt; width; j += sizeof(__m256i)) {\n        __m256i c = _mm256_lddqu_si256(\n            (const __m256i *)(counts + (i + 1) * awidth + j + 1));\n        c = _mm256_subs_epu8(\n            c, _mm256_set1_epi8(\n                1)); // max was 8 = 0b1000, make it 7, 1 becomes 0, 0 remains 0\n\n        __m256i oldstate = _mm256_lddqu_si256(\n            (const __m256i *)(states + (i + 1) * awidth + j + 1));\n        __m256i newstate = _mm256_shuffle_epi8(\n            shufmask, _mm256_or_si256(c, _mm256_slli_epi16(oldstate, 3)));\n        _mm256_storeu_si256((__m256i *)(states + (i + 1) * awidth + (j + 1)),\n            newstate);\n    }\n}\n}\n</code></pre>\n\n<p>The memory for array is allocated in this way</p>\n\n<pre><code>uint8_t *states = (uint8_t *)malloc((N + 2) * (N + 2) * sizeof(uint8_t));\nuint8_t *counts = (uint8_t *)malloc((N + 2) * (N + 2) * sizeof(uint8_t));\n</code></pre>\n\n<p>Also the source code can be found here <a href=\"https://github.com/lemire/SIMDgameoflife\" rel=\"nofollow noreferrer\">https://github.com/lemire/SIMDgameoflife</a></p>\n"}, {"tags": ["c++", "multithreading"], "comments": [{"owner": {"reputation": 9602, "user_id": 7151494, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-a_FzvY-b2O0/AAAAAAAAAAI/AAAAAAAAAEw/kNwilSAvQTI/photo.jpg?sz=128", "display_name": "Fureeish", "link": "https://stackoverflow.com/users/7151494/fureeish"}, "edited": false, "score": 2, "creation_date": 1549449116, "post_id": 54551371, "comment_id": 95902870, "body": "Why use pointers here?"}], "answers": [{"tags": [], "owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "is_accepted": true, "score": 7, "last_activity_date": 1606585739, "last_edit_date": 1606585739, "creation_date": 1549449111, "answer_id": 54551447, "question_id": 54551371, "link": "https://stackoverflow.com/questions/54551371/creating-thread-inside-a-for-loop-c/54551447#54551447", "title": "Creating Thread inside a For Loop c++", "body": "<p>You need to store the thread themselves, and not pointer to threads. You don't create any thread here.</p>\n<p>You need to get a runnable object as well. So something like:</p>\n<pre><code>std::vector&lt;std::thread&gt; ThreadVector;\n\nfor(some condition)\n{\n    ThreadVector.emplace_back([&amp;](){function(a, b, Obj, Obj2);}); // Pass by reference here, make sure the object lifetime is correct\n\n}\nfor(auto&amp; t: Threadvector)\n{\n    t.join();\n\n}\n</code></pre>\n<p>Edit: added missing ;</p>\n"}], "owner": {"reputation": 59, "user_id": 11022116, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10bee290113b45f98bfe6116789d4a4b?s=128&d=identicon&r=PG&f=1", "display_name": "CodeKhaleesi", "link": "https://stackoverflow.com/users/11022116/codekhaleesi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5363, "favorite_count": 0, "accepted_answer_id": 54551447, "answer_count": 1, "score": 1, "last_activity_date": 1606585739, "creation_date": 1549448895, "last_edit_date": 1549448957, "question_id": 54551371, "link": "https://stackoverflow.com/questions/54551371/creating-thread-inside-a-for-loop-c", "title": "Creating Thread inside a For Loop c++", "body": "<p>I have been trying Multi-threading inside a for loop.\nThe basic code block will be like,</p>\n\n<pre><code>void function(int a, string b, MyClass &amp;Obj, MyClass2 &amp;Obj2)\n{\n\n//execution part\n\n}\n\nvoid anotherclass::MembrFunc()\n{\n\nstd::vector&lt;std::thread*&gt; ThreadVector;\n\nfor(some condition)\n{\n\n    std::thread *mythread(function,a,b,obj1,obj2) // creating a thread that will run parallely until it satisfies for loop condition\n    ThreadVector.push_back(mythread)\n\n}\nfor(condition to join threads in threadvector)\n{\n\n    Threadvector[index].join();\n\n}\n\n}\n</code></pre>\n\n<p>For this block im getting a error saying \"value type of void* function()cannot be used to initialize a entity type of std::thread..</p>\n\n<p>How do i correct my error.. is there any other efficient way to do this.</p>\n"}, {"tags": ["c++", "compiler-errors", "runtime"], "comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1549451570, "post_id": 54551343, "comment_id": 95904352, "body": "Please don&#39;t edit the answer into your question. It breaks the question. And the answer."}, {"owner": {"reputation": 37, "user_id": 11022256, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-dhTijQX7-6M/AAAAAAAAAAI/AAAAAAAAAaU/cx5XVplMuhk/photo.jpg?sz=128", "display_name": "Siddharth Sen", "link": "https://stackoverflow.com/users/11022256/siddharth-sen"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1549451967, "post_id": 54551343, "comment_id": 95904571, "body": "Okay but current question&#39;s logic is still the same, but I&#39;m still receiving the same error as before when I submit the answer. I&#39;m not receiving with custom input as the example."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1549455722, "post_id": 54551343, "comment_id": 95906839, "body": "Replace all array usage with either <code>std::vector</code> or <code>std::array</code>.  Do <b>not</b> use &quot;regular&quot; arrays at all, and for goodness sakes, get rid of the variable-length-array nonsense you&#39;re using now.  Then ensure that you&#39;re not going out-of-bounds when using std::vector/std::array by replacing <code>[ ]</code> with the call to <code>at()</code>.  If you are going out of bounds, instead of SIGSEGV you would get a <code>std::out_of_range</code> exception thrown.  For example <code>attackArray.at(nextI)</code> instead of <code>attackArray[nextI]</code>."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1549455912, "post_id": 54551343, "comment_id": 95906945, "body": "If you remove entirely regular / VLA usage, stick with using vector or std::array, and then use <code>at()</code>, you will more than likely discover that the issue is an out-of-bounds access error.  The goal is to totally eliminate undefined behavior, and a good start is to again, drop usage of regular arrays, stay with std::vector / std::array, and take advantage of the self-debugging features such as usage of the <code>at()</code> call.  More than likely you will discover that your original code you say works for some test cases was actually faulty all along."}], "answers": [{"comments": [{"owner": {"reputation": 37, "user_id": 11022256, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-dhTijQX7-6M/AAAAAAAAAAI/AAAAAAAAAaU/cx5XVplMuhk/photo.jpg?sz=128", "display_name": "Siddharth Sen", "link": "https://stackoverflow.com/users/11022256/siddharth-sen"}, "edited": false, "score": 0, "creation_date": 1549451716, "post_id": 54551819, "comment_id": 95904432, "body": "Okay I&#39;ll try to implement."}, {"owner": {"reputation": 37, "user_id": 11022256, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-dhTijQX7-6M/AAAAAAAAAAI/AAAAAAAAAaU/cx5XVplMuhk/photo.jpg?sz=128", "display_name": "Siddharth Sen", "link": "https://stackoverflow.com/users/11022256/siddharth-sen"}, "edited": false, "score": 0, "creation_date": 1549451896, "post_id": 54551819, "comment_id": 95904534, "body": "Runtime error : SIGSEGV while example given works,I get the error when I submit the answer."}], "tags": [], "owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "is_accepted": false, "score": 0, "last_activity_date": 1549450822, "last_edit_date": 1549450822, "creation_date": 1549450142, "answer_id": 54551819, "question_id": 54551343, "link": "https://stackoverflow.com/questions/54551343/following-coding-problem-sigsegv-runtime-error/54551819#54551819", "title": "Following coding problem SIGSEGV Runtime Error", "body": "<p>The problem is that your sequence of <code>if</code> statements should be one <code>if ... else if ... else</code> statement.</p>\n\n<pre><code>if (i == 0)\n    ...\nelse if (i==N-1)\n    ...\nelse\n    ...\n</code></pre>\n\n<p>Just because a previous <code>if</code> condiition has evaluated to true doesn't stop code after the <code>if</code> statement from executing unless you use an <code>else</code>. So the condition in your third <code>if</code> statement is executing even when <code>i == 0</code> or <code>i == N - 1</code>, resulting in an out of bounds array access and a crash.</p>\n\n<p>Also</p>\n\n<pre><code>int attackArray[N],defArray[N];\n</code></pre>\n\n<p>is not legal C++ because all array sizes must be compile time constants. You are clearly using a compiler which doesn't care, but you should, so use this instead</p>\n\n<pre><code>vector&lt;int&gt; attackArray(N), defArray(N);\n</code></pre>\n\n<p>Finally there's a lot of duplicated code in your different conditions. You could simplify a lot by adding a couple of extra variables for the next and previous values of <code>i</code>. E.g.</p>\n\n<pre><code>int nexti, previ;\nif (i == 0)\n{\n    nexti = 1;\n    previ = N - 1;\n}\nelse if (i == N - 1)\n{\n    nexti = 0;\n    previ = N - 2;\n}\nelse\n{\n    nexti = i + 1;\n    previ = i - 1;\n}\nif (defArray[i] &gt; attackArray[nexti] &amp;&amp; \n    defArray[i] &gt; attackArray[previ] &amp;&amp; \n    defArray[i] &gt; attackArray[nexti] + attackArray[previ])\n    ...\n</code></pre>\n"}], "owner": {"reputation": 37, "user_id": 11022256, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-dhTijQX7-6M/AAAAAAAAAAI/AAAAAAAAAaU/cx5XVplMuhk/photo.jpg?sz=128", "display_name": "Siddharth Sen", "link": "https://stackoverflow.com/users/11022256/siddharth-sen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 57, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1549451794, "creation_date": 1549448808, "last_edit_date": 1549451794, "question_id": 54551343, "link": "https://stackoverflow.com/questions/54551343/following-coding-problem-sigsegv-runtime-error", "title": "Following coding problem SIGSEGV Runtime Error", "body": "<pre><code>#include &lt;iostream&gt;\n#include &lt;bits/stdc++.h&gt;\nusing namespace std;\nint main() {\n    int T;\n    cin&gt;&gt;T;\n\n    do{\n        vector&lt;int&gt; ans;\n        int N=0;\n        cin&gt;&gt;N;\n        vector&lt;int&gt; attackArray(N), defArray(N);\n\n        for (int i =0; i&lt;N; i++) {\n            cin&gt;&gt;attackArray[i];\n        }\n        for (int i =0; i&lt;N; i++) {\n            cin&gt;&gt;defArray[i];\n        }\n\n\n        for (int i =0; i&lt;N; i++) {\n   int nexti, previ;\nif (i == 0)\n{\n    nexti = 1;\n    previ = N - 1;\n}\nelse if (i == N - 1)\n{\n    nexti = 0;\n    previ = N - 2;\n}\nelse\n{\n    nexti = i + 1;\n    previ = i - 1;\n}\nif (defArray[i] &gt; attackArray[nexti] &amp;&amp; \n    defArray[i] &gt; attackArray[previ] &amp;&amp; \n    defArray[i] &gt; attackArray[nexti] + attackArray[previ]){\n\n        ans.push_back(defArray[i]);\n\n    }\nelse {ans.push_back(-1); break;}\n\n}\n\n        sort(ans.begin(), ans.end(), greater&lt;int&gt;());\n        cout&lt;&lt;ans[0]&lt;&lt;endl;\n\n        T--;\n    }while (T !=0);\n\n\n    return 0;\n}\n</code></pre>\n\n<p><strong>Input</strong></p>\n\n<p>The first line of the input contains a single integer T denoting the number of test cases. The description of T test cases follows.\nThe first line of each test case contains a single integer N.\nThe second line contains N space-separated integers a1,a2,\u2026,aN.\nThe third line contains N space-separated integers d1,d2,\u2026,dN.</p>\n\n<p><strong>Output</strong></p>\n\n<p>For each test case, print a single line containing one integer \u2015 the best defense value of the shield the king gets, or \u22121 if Chef can be thrown in the snake pit.</p>\n\n<p><strong>Example</strong></p>\n\n<pre><code>2\n\n4\n\n1 1 4 1\n\n3 4 2 1\n\n7\n\n5 4 5 4 5 4 5\n\n3 2 4 7 2 5 9\n</code></pre>\n\n<p><strong>Example Output</strong></p>\n\n<pre><code>3\n\n-1\n</code></pre>\n"}, {"tags": ["c++", "arrays"], "comments": [{"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 3, "creation_date": 1549448906, "post_id": 54551330, "comment_id": 95902715, "body": "It&#39;s not something you can reverse..."}, {"owner": {"reputation": 12749, "user_id": 7976805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92a559df8b4b287aad23724b4c66d67c?s=128&d=identicon&r=PG&f=1", "display_name": "Yksisarvinen", "link": "https://stackoverflow.com/users/7976805/yksisarvinen"}, "edited": false, "score": 4, "creation_date": 1549448909, "post_id": 54551330, "comment_id": 95902717, "body": "If you need both shuffled and unshuffled, you should probably copy the array nad kepp ony copy unchanged."}, {"owner": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "edited": false, "score": 4, "creation_date": 1549449118, "post_id": 54551330, "comment_id": 95902872, "body": "Alternatively, if you cannot make a copy and the array is initially sorted (such as in your example), then you can &quot;unshuffle&quot; it by sorting: <code>std::sort(arr.begin(), arr.end())</code>."}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 0, "creation_date": 1549450980, "post_id": 54551330, "comment_id": 95904024, "body": "Maybe if you designed a custom random number generator, that can be reversed. Then you could shuffle again with a reversed randomness. I&#39;m just hypothesising; I don&#39;t know if thar would work."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 7339176, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/N0Uzs.jpg?s=128&g=1", "display_name": "Enock", "link": "https://stackoverflow.com/users/7339176/enock"}, "edited": false, "score": 0, "creation_date": 1549466418, "post_id": 54553851, "comment_id": 95913464, "body": "Thank you, you saved my life"}, {"owner": {"reputation": 2756, "user_id": 5114342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/725caa4188def46b8c6cf9b09eff7e85?s=128&d=identicon&r=PG&f=1", "display_name": "Aziuth", "link": "https://stackoverflow.com/users/5114342/aziuth"}, "reply_to_user": {"reputation": 1, "user_id": 7339176, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/N0Uzs.jpg?s=128&g=1", "display_name": "Enock", "link": "https://stackoverflow.com/users/7339176/enock"}, "edited": false, "score": 0, "creation_date": 1549476802, "post_id": 54553851, "comment_id": 95919326, "body": "@Enock Glad I could be of help. Accepting the answer would be nice then ;) (click on the check mark below it&#39;s rating)"}], "tags": [], "owner": {"reputation": 2756, "user_id": 5114342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/725caa4188def46b8c6cf9b09eff7e85?s=128&d=identicon&r=PG&f=1", "display_name": "Aziuth", "link": "https://stackoverflow.com/users/5114342/aziuth"}, "is_accepted": false, "score": 2, "last_activity_date": 1549456648, "creation_date": 1549456648, "answer_id": 54553851, "question_id": 54551330, "link": "https://stackoverflow.com/questions/54551330/undo-or-unshuffle-the-c-shuffle-functions/54553851#54553851", "title": "undo or unshuffle the c++ shuffle functions", "body": "<p>How about this design (using a fictive class <code>Array</code> that might be <code>std::array</code>):</p>\n\n<p>You have a class <code>ReversableShuffledArray</code>. This class has two members, <code>Array&lt;Datatype&gt; data</code> and <code>Array&lt;size_t&gt; shuffle_order</code>, and methods <code>void shuffle</code> and <code>Datatype&amp; operator[]</code>.</p>\n\n<p>It is initialized by feeding it with the data in some way (especially a move constructor), and it puts the data in the member <code>data</code>. At this moment, it creates the content of <code>shuffle_order</code>, which contains <code>{0,1,2,3....}</code> and has the same size as <code>data</code>.</p>\n\n<p>When <code>shuffle</code> is called, <em>not</em> <code>data</code> but <code>shuffle_order</code> is shuffled.</p>\n\n<p><code>operator[](size_t index)</code> is defined by <code>return data[shuffle_order[index]];</code>. Simple as that. <code>data</code> itself is never shuffled.</p>\n\n<p>(Should be obvious how to do the non-shuffled access, so I won't execute that.)</p>\n\n<p>Of course, this can also be done procedurally, without the class.</p>\n\n<p>Alternatively, you can again shuffle a counting like <code>shuffle_order</code>, use it to apply it on the array in question and then create another array <code>reverse_shuffle_order</code> from it which you can use the reverse the process.</p>\n\n<p>(This does not help you if you have no control about the shuffling, though, but in the question, your wrote \"I use c++ suffle function to shuffle my array\", so I assume you do.)</p>\n"}], "owner": {"reputation": 1, "user_id": 7339176, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/N0Uzs.jpg?s=128&g=1", "display_name": "Enock", "link": "https://stackoverflow.com/users/7339176/enock"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 184, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1549456653, "creation_date": 1549448773, "last_edit_date": 1549456653, "question_id": 54551330, "link": "https://stackoverflow.com/questions/54551330/undo-or-unshuffle-the-c-shuffle-functions", "title": "undo or unshuffle the c++ shuffle functions", "body": "<p>Can someone tell how to undo or unshuffle a shuffled array with the c++ shuffle function? it can be founded whith this link : <a href=\"http://www.cplusplus.com/reference/algorithm/shuffle/\" rel=\"nofollow noreferrer\">http://www.cplusplus.com/reference/algorithm/shuffle/</a></p>\n\n<p>What I want to do is to undo my shuffled array.\nI use c++ suffle function to shuffle my array and I look for a function to unshuffle this array.</p>\n\n<p>Example : <code>array&lt;int, 5&gt; arr{0,1,2,3,4};</code></p>\n\n<pre><code>shuffle(arr.begin(), arr.end(), seed);\n</code></pre>\n\n<p><strong>possible output:</strong> <code>4,0,2,1,3</code></p>\n\n<p>Then I need for unshuffle function to undo arr elements positions like at the beginning.</p>\n\n<p>Examlpe : </p>\n\n<pre><code>unshuffle(arr.begin(), arr.end(), seed);\n</code></pre>\n\n<p><strong>output:</strong> <code>0,1,2,3,4</code></p>\n\n<p>Thank you</p>\n"}, {"tags": ["c++", "point-cloud-library"], "answers": [{"tags": [], "owner": {"reputation": 1229, "user_id": 9226753, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28247b27eef49240c767833514e2ab50?s=128&d=identicon&r=PG&f=1", "display_name": "kanstar", "link": "https://stackoverflow.com/users/9226753/kanstar"}, "is_accepted": true, "score": 0, "last_activity_date": 1549478922, "creation_date": 1549478922, "answer_id": 54560585, "question_id": 54551298, "link": "https://stackoverflow.com/questions/54551298/pcl-how-to-remove-a-specific-cluster-from-indicesclusterptr/54560585#54560585", "title": "PCL: How to remove a specific cluster from IndicesClusterPtr?", "body": "<p><a href=\"https://en.cppreference.com/w/cpp/container/vector/erase\" rel=\"nofollow noreferrer\"><code>std::vector::erase</code></a> takes an iterator as input. So call the <code>erase</code> function like this:</p>\n\n<pre><code>clusters-&gt;erase(clusters-&gt;begin()+i);\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 11022134, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4a8b6b46f3c1c7b4c894e23e2908b20?s=128&d=identicon&r=PG&f=1", "display_name": "fransinn", "link": "https://stackoverflow.com/users/11022134/fransinn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 190, "favorite_count": 0, "accepted_answer_id": 54560585, "answer_count": 1, "score": 0, "last_activity_date": 1549478922, "creation_date": 1549448679, "question_id": 54551298, "link": "https://stackoverflow.com/questions/54551298/pcl-how-to-remove-a-specific-cluster-from-indicesclusterptr", "title": "PCL: How to remove a specific cluster from IndicesClusterPtr?", "body": "<p>I extract a subcloud from a pointcloud using ConditionalEuclideanClustering (according to tutorial). <code>IndicesClusterPtr</code> is of type <code>boost::shared_ptr&lt;std::vector&lt;pcl::PointIndices&gt;&gt;</code>. Adding elements seems to work. I can't get the ith cluster removed from <code>clusters</code>. Can you give me a hint?</p>\n\n<pre><code>    pcl::IndicesClustersPtr clusters(new pcl::IndicesClusters);\n    clusters-&gt;push_back( (*clusters2)[j])   //seems to be okay\n\n    clusters-&gt;erase(i); // Nope\n    (*clusters).erase(i); // Nope\n\n    pcl::PointIndices empty_indices;   // compiles but results not as expected\n    (*clusters)[i] = empty_indices;\n</code></pre>\n"}, {"tags": ["c++", "gdb", "qt-creator"], "comments": [{"owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 0, "creation_date": 1549448113, "post_id": 54551022, "comment_id": 95902231, "body": "Please specify compiler / debugger versions and build options used."}, {"owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 0, "creation_date": 1549450702, "post_id": 54551022, "comment_id": 95903828, "body": "Is the same set of options used to compiler <code>OggReader</code> code? I mean it does not come from some static library pre-build  with different options?"}, {"owner": {"reputation": 56945, "user_id": 133374, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/8337eb6c24313a1e0e81ecae24f20406?s=128&d=identicon&r=PG", "display_name": "Albert", "link": "https://stackoverflow.com/users/133374/albert"}, "reply_to_user": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 0, "creation_date": 1549451062, "post_id": 54551022, "comment_id": 95904077, "body": "Yes (the project itself is called OggReader)."}], "answers": [{"comments": [{"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "reply_to_user": {"reputation": 56945, "user_id": 133374, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/8337eb6c24313a1e0e81ecae24f20406?s=128&d=identicon&r=PG", "display_name": "Albert", "link": "https://stackoverflow.com/users/133374/albert"}, "edited": false, "score": 0, "creation_date": 1549450222, "post_id": 54551072, "comment_id": 95903512, "body": "You can try then by explicitly storing <code>this</code> in another variable, as it will not get optimized away. Perhaps even get a pointer on it to for it to be in memory and not in a register."}, {"owner": {"reputation": 56945, "user_id": 133374, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/8337eb6c24313a1e0e81ecae24f20406?s=128&d=identicon&r=PG", "display_name": "Albert", "link": "https://stackoverflow.com/users/133374/albert"}, "edited": false, "score": 0, "creation_date": 1549450318, "post_id": 54551072, "comment_id": 95903562, "body": "I would like to not modify the code just to work around the debugger. Is there no compiler setting to really disable all optimizations?"}, {"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "reply_to_user": {"reputation": 56945, "user_id": 133374, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/8337eb6c24313a1e0e81ecae24f20406?s=128&d=identicon&r=PG", "display_name": "Albert", "link": "https://stackoverflow.com/users/133374/albert"}, "edited": false, "score": 0, "creation_date": 1549450650, "post_id": 54551072, "comment_id": 95903784, "body": "It&#39;s not an optimization, the compiler doesn&#39;t have to have <code>this</code> in a memory location (depends on calling conventions IIRC)."}, {"owner": {"reputation": 56945, "user_id": 133374, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/8337eb6c24313a1e0e81ecae24f20406?s=128&d=identicon&r=PG", "display_name": "Albert", "link": "https://stackoverflow.com/users/133374/albert"}, "edited": false, "score": 0, "creation_date": 1549450708, "post_id": 54551072, "comment_id": 95903835, "body": "Despite, I&#39;m also not sure if this is really the problem here. I don&#39;t really know whether the variable is really optimized away here (any way to check this?). Maybe this is just some bug in Qt creator and/or GDB?"}, {"owner": {"reputation": 56945, "user_id": 133374, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/8337eb6c24313a1e0e81ecae24f20406?s=128&d=identicon&r=PG", "display_name": "Albert", "link": "https://stackoverflow.com/users/133374/albert"}, "edited": false, "score": 0, "creation_date": 1549450755, "post_id": 54551072, "comment_id": 95903875, "body": "But it shows a memory location (the pointer address). What is this value then? (Btw, instead of answering me here in the comments, maybe you can extend your answer itself by this information.)"}, {"owner": {"reputation": 56945, "user_id": 133374, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/8337eb6c24313a1e0e81ecae24f20406?s=128&d=identicon&r=PG", "display_name": "Albert", "link": "https://stackoverflow.com/users/133374/albert"}, "edited": false, "score": 0, "creation_date": 1549451106, "post_id": 54551072, "comment_id": 95904113, "body": "I tried that now, storing <code>this</code> in another variable, but also in that case, I cannot view it."}, {"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "reply_to_user": {"reputation": 56945, "user_id": 133374, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/8337eb6c24313a1e0e81ecae24f20406?s=128&d=identicon&r=PG", "display_name": "Albert", "link": "https://stackoverflow.com/users/133374/albert"}, "edited": false, "score": 0, "creation_date": 1549451112, "post_id": 54551072, "comment_id": 95904118, "body": "I will edit the answer once we have a working case for you ;) What do you mean by 2it shows a memory location&quot;? What is &quot;it&quot; and what&#39;s the memory location?"}, {"owner": {"reputation": 56945, "user_id": 133374, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/8337eb6c24313a1e0e81ecae24f20406?s=128&d=identicon&r=PG", "display_name": "Albert", "link": "https://stackoverflow.com/users/133374/albert"}, "edited": false, "score": 0, "creation_date": 1549451281, "post_id": 54551072, "comment_id": 95904199, "body": "&quot;[Qt creator / GDB] shows a memory location [for <code>this</code>]&quot;. You can see the memory location in the screenshot in my question. When I make another copy of it (<code>OggReader* dump_copy = this;</code>), then <code>dump_copy</code> points to the same memory location."}, {"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "reply_to_user": {"reputation": 56945, "user_id": 133374, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/8337eb6c24313a1e0e81ecae24f20406?s=128&d=identicon&r=PG", "display_name": "Albert", "link": "https://stackoverflow.com/users/133374/albert"}, "edited": false, "score": 0, "creation_date": 1549452364, "post_id": 54551072, "comment_id": 95904815, "body": "In that case try instead <code>const auto&amp; v=*this;</code>."}, {"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "reply_to_user": {"reputation": 56945, "user_id": 133374, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/8337eb6c24313a1e0e81ecae24f20406?s=128&d=identicon&r=PG", "display_name": "Albert", "link": "https://stackoverflow.com/users/133374/albert"}, "edited": false, "score": 0, "creation_date": 1549452583, "post_id": 54551072, "comment_id": 95904941, "body": "Also updated the answer with debugging helpers from qtcreator which may be something you want to explore."}, {"owner": {"reputation": 56945, "user_id": 133374, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/8337eb6c24313a1e0e81ecae24f20406?s=128&d=identicon&r=PG", "display_name": "Albert", "link": "https://stackoverflow.com/users/133374/albert"}, "edited": false, "score": 0, "creation_date": 1549459490, "post_id": 54551072, "comment_id": 95909110, "body": "I tried with <code>const auto&amp; v=*this;</code> and the debugger shows  <code>&lt;optimized out&gt;</code> for <code>v</code> (which is a bit unexpected, as I have <code>-O0</code>)."}, {"owner": {"reputation": 56945, "user_id": 133374, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/8337eb6c24313a1e0e81ecae24f20406?s=128&d=identicon&r=PG", "display_name": "Albert", "link": "https://stackoverflow.com/users/133374/albert"}, "edited": false, "score": 0, "creation_date": 1549459854, "post_id": 54551072, "comment_id": 95909330, "body": "I also tried <code>const volatile auto v=*this;</code> (i.e. a copy), and for this <code>v</code>, it again shows <code>&lt;not accessible&gt;</code>. I tend to think that this is a bug/problem in GDB. But instead of randomly trying around, is there not a way to understand the failure more systematically?"}, {"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "reply_to_user": {"reputation": 56945, "user_id": 133374, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/8337eb6c24313a1e0e81ecae24f20406?s=128&d=identicon&r=PG", "display_name": "Albert", "link": "https://stackoverflow.com/users/133374/albert"}, "edited": false, "score": 0, "creation_date": 1549461356, "post_id": 54551072, "comment_id": 95910216, "body": "That&#39;s very odd, they should not be optimized away indeed. Perhaps a bug in gdb. Did you try a newer version?"}], "tags": [], "owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "is_accepted": false, "score": 1, "last_activity_date": 1549452544, "last_edit_date": 1549452544, "creation_date": 1549448031, "answer_id": 54551072, "question_id": 54551022, "link": "https://stackoverflow.com/questions/54551022/qtcreator-gdb-debugger-not-accessible-or-this-object-not-shown/54551072#54551072", "title": "QtCreator / GDB debugger: not accessible, or `this` object not shown", "body": "<p>The reason is that in optimized builds, you can have some variables that are optimized away or only available in registers. In these cases, there is no way for the debuggers to get the values and you would see these <code>&lt;not accessible&gt;</code> or <code>&lt;optimized away&gt;</code>.</p>\n\n<p>Lower the optimization level, and you will start seeing more of these variables (at the cost of reduced speed).</p>\n\n<p>It seems here that there is also no default display of non-standard types. <code>char*</code> are displayed, because it's a C-style string, so there would be a proper display for them. Just like VS has natvis files, QtCreator support <a href=\"http://doc.qt.io/qtcreator/creator-debugging-helpers.html\" rel=\"nofollow noreferrer\">helpers</a>, Python files that can be used to display just what you need.</p>\n\n<p>If you just want to get the contant of a struct when you only have a pointer, you can also do: <code>const auto&amp; v = *this;</code>.</p>\n"}], "owner": {"reputation": 56945, "user_id": 133374, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/8337eb6c24313a1e0e81ecae24f20406?s=128&d=identicon&r=PG", "display_name": "Albert", "link": "https://stackoverflow.com/users/133374/albert"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 662, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1549464531, "creation_date": 1549447872, "last_edit_date": 1549464531, "question_id": 54551022, "link": "https://stackoverflow.com/questions/54551022/qtcreator-gdb-debugger-not-accessible-or-this-object-not-shown", "title": "QtCreator / GDB debugger: not accessible, or `this` object not shown", "body": "<p>In my <code>main()</code>, I have some variable (<code>reader</code>) on the stack, which is of type <code>OggReader</code> (some own <code>struct</code>/<code>class</code>). This variable is shown as <code>&lt;not accessible&gt;</code> in the Qt Creator / GDB debugger:</p>\n\n<p><a href=\"https://i.stack.imgur.com/fhW1t.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/fhW1t.png\" alt=\"screen1\"></a></p>\n\n<p>Then, I call some function on this class, so that <code>this</code> should point to this <code>reader</code> object. But Qt Creator / GDB does not show the content of <code>this</code>:</p>\n\n<p><a href=\"https://i.stack.imgur.com/WQLNL.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/WQLNL.png\" alt=\"screen2\"></a>\n<a href=\"https://i.stack.imgur.com/8fpUB.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/8fpUB.png\" alt=\"screen3\"></a></p>\n\n<p>Why? How can I fix this?</p>\n\n<p>This is Qt Creator 4.0.2 on Ubuntu 16.04.\nI use g++ 5.4.0 with options <code>-g -O0 -g3 -ggdb</code>.\nI use gdb 7.11.1.</p>\n\n<p>The <code>OggReader</code> class:</p>\n\n<pre><code>struct OggReader {\n    Page buffer_page_;\n    std::map&lt;uint32_t, VorbisStream&gt; streams_;\n    size_t packet_counts_;\n    std::shared_ptr&lt;IReader&gt; reader_;\n    ParseCallbacks&amp; callbacks_;\n\n    OggReader(ParseCallbacks&amp; callbacks) : packet_counts_(0), callbacks_(callbacks) {}\n\n    ...\n};\n</code></pre>\n\n<p><code>Page</code>:</p>\n\n<pre><code>struct Page {\n    PageHeader header;\n    uint8_t segment_table[256]; // page_segments_num in len\n    uint32_t data_len;\n    uint8_t data[256 * 256];\n\n    ...\n};\n</code></pre>\n\n<p><code>PageHeader</code>:</p>\n\n<pre><code>struct __attribute__((packed)) PageHeader {\n    char capture_pattern[4]; // should be \"OggS\"\n    uint8_t stream_structure_version; // should be 0\n    uint8_t header_type_flag; // 0x1: continued, 0x2: first (bos), 0x4: last (eos)\n    int64_t absolute_granule_pos; // end PCM sample position of the last packet completed on that page\n    uint32_t stream_serial_num;\n    uint32_t page_sequence_num;\n    uint32_t page_crc_checksum;\n    uint8_t page_segments_num;\n};\n</code></pre>\n\n<p>Maybe <code>__attribute__((packed))</code> confuses GDB somehow?\nEven when I explicitly do this</p>\n\n<pre><code>Page* dummy = &amp;buffer_page_;\n</code></pre>\n\n<p>inside some <code>Page</code> member function, it also does not show the content of this <code>dummy</code> ptr (it's the same address as <code>this</code>, because <code>buffer_page_</code> starts at zero offset from <code>this</code>).</p>\n\n<p><a href=\"https://stackoverflow.com/questions/21254074/how-to-solve-qt-creators-variable-not-accessible-behavior\">This question</a> is related, although I think it is not about <code>this</code> (some own <code>struct</code>/<code>class</code>) but instead about standard types (<code>std::string</code> or so). Also, all the given solutions do not have an effect, or do not apply. E.g. \"Load system GDB pretty printers\" was already disabled.</p>\n"}, {"tags": ["c++", "plugins", "midi", "vst"], "owner": {"reputation": 2209, "user_id": 5246900, "user_type": "registered", "accept_rate": 15, "profile_image": "https://www.gravatar.com/avatar/00303a968628b3aa8ab8d648747b8157?s=128&d=identicon&r=PG&f=1", "display_name": "mr.boris", "link": "https://stackoverflow.com/users/5246900/mr-boris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 184, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1549445798, "creation_date": 1549445798, "question_id": 54550407, "link": "https://stackoverflow.com/questions/54550407/c-fl-studio-sdk-how-to-listen-generator-events", "title": "C++ FL Studio SDK how to listen generator events", "body": "<p>I want to create custom VST plugin but before I want to know:</p>\n\n<p>How to listen any event related to some of generators in FL Studio?</p>\n\n<p>Is it possible to get current/active generator window id/name while swapping them in FL Studio? Also to get name and value of any control (knob, fade e.t.c.)</p>\n\n<p><a href=\"https://i.stack.imgur.com/s6VtN.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/s6VtN.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>Should I use <a href=\"https://forum.image-line.com/viewtopic.php?f=700&amp;t=12092\" rel=\"nofollow noreferrer\">FL Studio SDK</a> or <a href=\"https://github.com/olilarkin/wdl-ol\" rel=\"nofollow noreferrer\">WDL-OL</a> C++ library? Still can't find any reliable info about this issue.</p>\n"}, {"tags": ["c++", "optional", "decltype"], "comments": [{"owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 3, "creation_date": 1549445432, "post_id": 54550253, "comment_id": 95900653, "body": "Making function public and fixing syntax <code>decltype(abc.search(&quot;&quot;)-&gt;pos) position;</code> should work fine. It is not clear what are you trying to ask here."}, {"owner": {"reputation": 162, "user_id": 9858267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6c94a0bec7d29867a70240fe4703b66?s=128&d=identicon&r=PG&f=1", "display_name": "Rlyeh", "link": "https://stackoverflow.com/users/9858267/rlyeh"}, "reply_to_user": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 0, "creation_date": 1549446858, "post_id": 54550253, "comment_id": 95901475, "body": "Sorry it was meant to be public.  No way to do it with parameter types?"}], "answers": [{"comments": [{"owner": {"reputation": 162, "user_id": 9858267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6c94a0bec7d29867a70240fe4703b66?s=128&d=identicon&r=PG&f=1", "display_name": "Rlyeh", "link": "https://stackoverflow.com/users/9858267/rlyeh"}, "edited": false, "score": 0, "creation_date": 1549447076, "post_id": 54550325, "comment_id": 95901603, "body": "I&#39;d prefer if I could use a parameter type, the real code is more complicated and the parameter is a vector&lt;pair&lt;string,int&gt;&gt;."}, {"owner": {"reputation": 3355, "user_id": 4114447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/aa93321ad023953eaaae28b490855e7a?s=128&d=identicon&r=PG&f=1", "display_name": "Dan M.", "link": "https://stackoverflow.com/users/4114447/dan-m"}, "reply_to_user": {"reputation": 162, "user_id": 9858267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6c94a0bec7d29867a70240fe4703b66?s=128&d=identicon&r=PG&f=1", "display_name": "Rlyeh", "link": "https://stackoverflow.com/users/9858267/rlyeh"}, "edited": false, "score": 2, "creation_date": 1549447218, "post_id": 54550325, "comment_id": 95901673, "body": "@Rlyeh use <code>{}</code> if it&#39;s unambiguous. But why you can&#39;t just use <code>Result().pos</code>?"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 1, "creation_date": 1549462558, "post_id": 54550325, "comment_id": 95910989, "body": "<code>std::declval</code> might help in general case, when we don&#39;t have object directly: <code>decltype(std::declval&lt;Dict&gt;().search(std::declval&lt;const char*&gt;())-&gt;pos)</code>"}, {"owner": {"reputation": 65491, "user_id": 986, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/0317df30e04cc468688b0f00adbb7037?s=128&d=identicon&r=PG", "display_name": "Mark Ingram", "link": "https://stackoverflow.com/users/986/mark-ingram"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1549463191, "post_id": 54550325, "comment_id": 95911408, "body": "Thanks @Jarod42, hadn&#39;t thought of that, this is perhaps closer to what OP wanted. I&#39;ll add that into the answer."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1549464041, "post_id": 54550325, "comment_id": 95911964, "body": "Yes, type aliases are the solution. I&#39;d probably make it so that <code>Dict::ResultType::PosType</code> existed. (Heh, just noticed the username again)"}, {"owner": {"reputation": 162, "user_id": 9858267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6c94a0bec7d29867a70240fe4703b66?s=128&d=identicon&r=PG&f=1", "display_name": "Rlyeh", "link": "https://stackoverflow.com/users/9858267/rlyeh"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 1, "creation_date": 1549465763, "post_id": 54550325, "comment_id": 95913045, "body": "@Jarod42 <code>decltype(abc.search(std::declval&lt;const char*&gt;())-&gt;pos)</code> was something like I wanted."}], "tags": [], "owner": {"reputation": 65491, "user_id": 986, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/0317df30e04cc468688b0f00adbb7037?s=128&d=identicon&r=PG", "display_name": "Mark Ingram", "link": "https://stackoverflow.com/users/986/mark-ingram"}, "is_accepted": true, "score": 6, "last_activity_date": 1549463656, "last_edit_date": 1549463656, "creation_date": 1549445510, "answer_id": 54550325, "question_id": 54550253, "link": "https://stackoverflow.com/questions/54550253/decltype-of-optional-member/54550325#54550325", "title": "Decltype of optional member", "body": "<p>If you pass an actual parameter to <code>search</code>, it will work (along with making <code>search</code> public):</p>\n\n<p><a href=\"https://wandbox.org/permlink/0Q3mLW7SmQW4QshE\" rel=\"nofollow noreferrer\">https://wandbox.org/permlink/0Q3mLW7SmQW4QshE</a></p>\n\n<pre><code>#include &lt;optional&gt;\n\nstruct Result\n{\n    int tag;\n    int pos;\n};\n\nclass Dict\n{\npublic:\n    std::optional&lt;Result&gt; search(const char *word)\n    {\n        return Result{ 1,2 };\n    }\n};\n\nint main()\n{\n    Dict abc;\n    decltype(abc.search(\"\")-&gt;pos) position;\n\n    return 0;\n}\n</code></pre>\n\n<p>The parameter to <code>search</code> doesn't have to be valid (in terms of what your function expects - because it won't actually call it), it just has to be the correct type.</p>\n\n<p>If you want to deal directly with types, and not instances, as your comment suggests, then @Jarod42 points out you can use the following line for your variable declaration:</p>\n\n<p><code>decltype(std::declval&lt;Dict&gt;().search(std::declval&lt;const char*&gt;())-&gt;pos) position;</code></p>\n\n<p><a href=\"https://wandbox.org/permlink/kZlqKUFoIWv1m3M3\" rel=\"nofollow noreferrer\">https://wandbox.org/permlink/kZlqKUFoIWv1m3M3</a></p>\n\n<p>Though I probably don't need to point out how unreadable a ~70 character variable type is. I think if it were me I would either just use an <code>int</code>, or I would create a type alias for <code>pos</code>, e.g. <code>using ResultPositionType = int;</code> then use that within your <code>Result</code> struct, and again in <code>main</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": false, "score": 0, "last_activity_date": 1549464225, "creation_date": 1549464225, "answer_id": 54556199, "question_id": 54550253, "link": "https://stackoverflow.com/questions/54550253/decltype-of-optional-member/54556199#54556199", "title": "Decltype of optional member", "body": "<p>Mark showed the direct answer to your question.</p>\n\n<p>However, I propose an easier-to-read solution that borrows the standard library's heavy reliance on type aliases. They're basically free, if a little noisy in class definitions:</p>\n\n<pre><code>#include &lt;optional&gt;\n\nstruct Result\n{\n    using TagType = int;\n    using PosType = int;\n\n    TagType tag;\n    PosType pos;\n};\n\nclass Dict\n{\npublic:\n    using ResultType = Result;\n\n    std::optional&lt;ResultType&gt; search(const char* word)\n    {\n        return ResultType{ 1, 2 };\n    }\n};\n\nint main()\n{\n    Dict abc;\n    Dict::ResultType::PosType position;\n}\n</code></pre>\n\n<p>This has the benefit of being self-documenting, and not requiring a 70-character statement that only C++ Standardese native speakers can understand. :)</p>\n\n<p>It also has value inside the class definitions themselves, because now you have one place to set these types and, semantics allowing, can alter them more easily than in the past (when you'd have had to modify every single member function, every single data member&hellip;).</p>\n\n<p>One downside is that the int-ness of the two <code>Result</code> members is not quite as obvious. Whether that is a problem depends on your real code, in particular the actual size of <code>Result</code> and how it's often used. As a compromise, you might consider dropping the type aliases at that level, keeping only <code>Dict::ResultType</code> then digging into it with <code>decltype(declval&lt;Dict::ResultType&gt;().pos)</code>. Only you can decide how far to go with this approach.</p>\n"}], "owner": {"reputation": 162, "user_id": 9858267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6c94a0bec7d29867a70240fe4703b66?s=128&d=identicon&r=PG&f=1", "display_name": "Rlyeh", "link": "https://stackoverflow.com/users/9858267/rlyeh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 300, "favorite_count": 0, "accepted_answer_id": 54550325, "answer_count": 2, "score": 3, "last_activity_date": 1549464225, "creation_date": 1549445182, "last_edit_date": 1549446527, "question_id": 54550253, "link": "https://stackoverflow.com/questions/54550253/decltype-of-optional-member", "title": "Decltype of optional member", "body": "<p>I'm trying to get the type from struct member that is in a std::optional&lt;> that is the return type of a member function.</p>\n\n<p>This is a simplified example:</p>\n\n<pre><code>struct Result\n{\n    int tag;\n    int pos;\n};\n\nclass Dict\n{\npublic:\n    std::optional&lt;Result&gt; search(const char *word)\n    {\n        return Result{ 1,2 };\n    }\n};\n</code></pre>\n\n<p>I'd like to be able to do something like this:</p>\n\n<pre><code>int main()\n{\n    Dict abc;\n    decltype(abc.search(const char*)-&gt;pos) position;\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "logic"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1549443499, "post_id": 54549764, "comment_id": 95899625, "body": "i had to google &quot;equilibrium index&quot; and what I found was a couple of exmaples including test cases. What is your question?"}, {"owner": {"reputation": 21162, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1549443513, "post_id": 54549764, "comment_id": 95899634, "body": "What values can occur in each entry? Your sample input is all positive. What is minimum? What is maximum? What is minimum number of entries? What is maximum number of entries?"}, {"owner": {"reputation": 661, "user_id": 11021720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/01a2e04a8e0c4a6a17003505a625a069?s=128&d=identicon&r=PG&f=1", "display_name": "Vesa95", "link": "https://stackoverflow.com/users/11021720/vesa95"}, "reply_to_user": {"reputation": 21162, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1549444538, "post_id": 54549764, "comment_id": 95900154, "body": "@Yunnosch, Thank you! this type of errors I needed!"}, {"owner": {"reputation": 661, "user_id": 11021720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/01a2e04a8e0c4a6a17003505a625a069?s=128&d=identicon&r=PG&f=1", "display_name": "Vesa95", "link": "https://stackoverflow.com/users/11021720/vesa95"}, "edited": false, "score": 0, "creation_date": 1549444655, "post_id": 54549764, "comment_id": 95900227, "body": "Can I have two equilibrium index?"}], "answers": [{"tags": [], "owner": {"reputation": 122, "user_id": 11020581, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/406fb5b1b5576572f7859d10c627add6?s=128&d=identicon&r=PG&f=1", "display_name": "thangpx1706", "link": "https://stackoverflow.com/users/11020581/thangpx1706"}, "is_accepted": true, "score": 0, "last_activity_date": 1549445835, "creation_date": 1549445835, "answer_id": 54550413, "question_id": 54549764, "link": "https://stackoverflow.com/questions/54549764/typical-errors-in-equilibrium-index-of-an-array/54550413#54550413", "title": "Typical errors in equilibrium index of an array", "body": "<p>The reason is that you declared \"arr\" variable with the size is (index - 1) (equal 3 in your simulation). Therefore, you only created an array with 3 elements.\nAnd, your \"arr\" variable is a dynamic array. Therefore, you should try it like this:</p>\n\n<pre><code>cout &lt;&lt; \"Number of elements: \" &lt;&lt; endl;\nint index;\ncin &gt;&gt; index;\nint* arr = (int*)malloc(sizeof(int)*index); //initialize arr\n\nfor (int i = 0; i &lt; index; ++i)\n{\n    cout &lt;&lt; \"Element \" &lt;&lt; i &lt;&lt; endl;\n    cin &gt;&gt; arr[i];\n}\n// Add your code that you wanna work with arr array in here\nfree(arr);\n</code></pre>\n"}], "owner": {"reputation": 661, "user_id": 11021720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/01a2e04a8e0c4a6a17003505a625a069?s=128&d=identicon&r=PG&f=1", "display_name": "Vesa95", "link": "https://stackoverflow.com/users/11021720/vesa95"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "closed_date": 1549445561, "accepted_answer_id": 54550413, "answer_count": 1, "score": 0, "last_activity_date": 1604602522, "creation_date": 1549443359, "last_edit_date": 1604602522, "question_id": 54549764, "link": "https://stackoverflow.com/questions/54549764/typical-errors-in-equilibrium-index-of-an-array", "closed_reason": "Needs details or clarity", "title": "Typical errors in equilibrium index of an array", "body": "<p>As a practical test for an interview I wrote a program that finds the equilibrium point (index) of an array, basically it will return the index o the element which had the sum of the elements from his right equal with the sum o the elements from his left. The program work pretty ok, but I need some ideas (test units) to make this program to crash, to present possible errors.</p>\n<p>Here is my code:</p>\n<pre><code>#include &lt;iostream&gt;\n\nusing namespace std;\n\nint getIndex(int array[], int size)\n{\n    int totalSum = 0;\n    for (int i = 0; i &lt; size; i++)\n    {\n        totalSum += array[i];\n    }\n\n    int leftSum = 0;\n    int rightSum = 0;\n\n    for (int i = 0; i &lt; size; i++)\n    {\n        rightSum = totalSum - (leftSum + array[i]);\n        if (leftSum == rightSum)\n        {\n            return i;\n        }\n\n        leftSum += array[i];\n    }\n\n    return -1;\n}\n\nint main()\n{\n    cout &lt;&lt; &quot;Number of elements: &quot; &lt;&lt; endl;\n    int index;\n    cin &gt;&gt; index;\n    int inputIndex = index - 1;\n    int arr[inputIndex];\n\n    for (int i = 0; i &lt;= inputIndex; ++i)\n    {\n        cout &lt;&lt; &quot;Element &quot; &lt;&lt; i &lt;&lt; endl;\n        cin &gt;&gt; arr[i];\n    }\n\n    int result = getIndex(arr, index);\n    if (result == -1)\n    {\n        cout &lt;&lt; &quot;Equilibrium index doesn't exist&quot; &lt;&lt; endl;\n    }\n    else\n    {\n        cout &lt;&lt; &quot;Your index is: &quot; &lt;&lt; result &lt;&lt; endl;\n    }\n\n    return 0;\n}\n</code></pre>\n<p>For example these are some values that I give as input:</p>\n<p>Number of elements: 4<br />\nElement 0: 1<br />\nElement 1: 0<br />\nElement 2: 0<br />\nElement 3: 1</p>\n<p>Output:\nYour index is: 1</p>\n"}, {"tags": ["c++", "visual-c++", "dll"], "comments": [{"owner": {"reputation": 7089, "user_id": 2852165, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/JwDJG.jpg?s=128&g=1", "display_name": "SHR", "link": "https://stackoverflow.com/users/2852165/shr"}, "edited": false, "score": 1, "creation_date": 1549444284, "post_id": 54549761, "comment_id": 95900026, "body": "I think you&#39;ll need to export also B::b;"}, {"owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "reply_to_user": {"reputation": 7089, "user_id": 2852165, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/JwDJG.jpg?s=128&g=1", "display_name": "SHR", "link": "https://stackoverflow.com/users/2852165/shr"}, "edited": false, "score": 0, "creation_date": 1549445912, "post_id": 54549761, "comment_id": 95900947, "body": "@SHR It is exported in def file, isn&#39;t it? Otherwise OP would get unresolved external symbol linker error."}], "answers": [{"tags": [], "owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "is_accepted": true, "score": 3, "last_activity_date": 1549446038, "creation_date": 1549446038, "answer_id": 54550474, "question_id": 54549761, "link": "https://stackoverflow.com/questions/54549761/crash-when-accessing-static-variable-exported-with-a-def-file/54550474#54550474", "title": "Crash when accessing static variable exported with a def file", "body": "<p>I think def file entry lacks <code>DATA</code> attribute so <code>B::b</code> is treated as code which is typically-read only:</p>\n\n<pre><code>?b@B@@2HA DATA\n</code></pre>\n"}], "owner": {"reputation": 53, "user_id": 11021611, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/686059a653a4f699bb30f2b22b9782fe?s=128&d=identicon&r=PG&f=1", "display_name": "tdd", "link": "https://stackoverflow.com/users/11021611/tdd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 134, "favorite_count": 0, "accepted_answer_id": 54550474, "answer_count": 1, "score": 5, "last_activity_date": 1549446038, "creation_date": 1549443348, "question_id": 54549761, "link": "https://stackoverflow.com/questions/54549761/crash-when-accessing-static-variable-exported-with-a-def-file", "title": "Crash when accessing static variable exported with a def file", "body": "<p>I am using a def file to export some static functions and variables from a dll. When accessing the static variable after importing the dll the program crashes. Any ideas why this is happening? I am using VS2017, Windows SDK 10.0.17763.0.</p>\n\n<p>library.h</p>\n\n<pre><code>struct DLLEXPORT A {\n  static int a;\n  static int get();\n};\n\nstruct B {\n  static int b;\n  static int get();\n};\n</code></pre>\n\n<p>library.cpp</p>\n\n<pre><code>int A::a = 0; \nint A::get() {return a;}\n\nint B::b = 0;\nint B::get() {return b;}\n</code></pre>\n\n<p>library.def</p>\n\n<pre><code>LIBRARY\n\nEXPORTS\n  ?b@B@@2HA\n  ?get@B@@SAHXZ\n</code></pre>\n\n<p>main.cpp</p>\n\n<pre><code>int main() {\n  int a = A::get(); // Works fine\n  int b = B::get(); // Works fine\n\n  A::a = 1; // Works fine\n  B::b = 1; // CRASH (Access violation writing location ...)\n  return 0;\n}\n</code></pre>\n"}]