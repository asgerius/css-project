[{"tags": ["c++", "exception", "mfc", "odbc", "cdatabase"], "comments": [{"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1577462848, "post_id": 59482672, "comment_id": 105178787, "body": "You describe standard C++ exception handling rules (and seem to be confused by them). Regardless, a <code>CDBException</code> comes with an error message. Please post that error message, verbatim, and unabridged."}, {"owner": {"reputation": 13, "user_id": 6538170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d7f7d2e87c5424908e97db20738a98d?s=128&d=identicon&r=PG&f=1", "display_name": "Idenwen", "link": "https://stackoverflow.com/users/6538170/idenwen"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1577583917, "post_id": 59482672, "comment_id": 105204087, "body": "Not confused by the exception handling. Confused that there is a exception at all. Since all data comes from a working connection.  The only GUI error message is &quot;Data Source Name Not Found and No Default Driver Specified&quot;.   In VS there are the following relevant lines in the debug output:  CDBException at adress 0x007FDFD4 followed by  Microsoft C++-Exception: [rethrow] at adress 0x00000000 followed by d:\\agent_work\\3\\s\\src\\vctools\\VC7Libs\\Ship\\ATLMFC\\Src\\MFC\\wi&zwnj;&#8203;ncore.cpp(274) : AppMsg - Warning: Uncaught exception in WindowProc (returning 0)."}], "owner": {"reputation": 13, "user_id": 6538170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d7f7d2e87c5424908e97db20738a98d?s=128&d=identicon&r=PG&f=1", "display_name": "Idenwen", "link": "https://stackoverflow.com/users/6538170/idenwen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 157, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1577584102, "creation_date": 1577318333, "last_edit_date": 1577584102, "question_id": 59482672, "link": "https://stackoverflow.com/questions/59482672/odbc-connection-via-cdatabase-fails-with-connection-string-from-previous-succesf", "title": "ODBC Connection via CDatabase fails with connection string from previous succesfull connection", "body": "<p>I'm a bit clueless at the moment what the problem is with this code.\nIt trows a exception of type CDBException when trying to connect with the given ODBC Connect String and never comes back from .OpenEx - the lower message boxes never display.</p>\n\n<p>There is a message from the ODBC Driver that states that the DSN isnt specified and that no default driver is found.</p>\n\n<p>The Message Box that shows the connect string gives a good looking string - as it should, coming from a working connection</p>\n\n<pre><code>ODBC;DSN=DBTEST;Trusted_Connection=Yes;APP=XXX;WSID=NEUROMANCER;DATABASE=master;\n</code></pre>\n\n<p>Same problem when using SA/Password for the connection</p>\n\n<pre><code>ODBC;DSN=DBTEST_PW;UID=SA;PWD=password;APP=XXX;WSID=NEUROMANCER;DATABASE=master;\n</code></pre>\n\n<p>After reading other posts I added \"DRIVER=\" to the beginning and \"SERVER=localhost;\" to the end but that changed nothing. Resulting tested connection strings where</p>\n\n<pre><code>DRIVER=ODBC;DSN=DBTEST;Trusted_Connection=Yes;APP=XXX;WSID=NEUROMANCER;DATABASE=master;\nDRIVER=ODBC;DSN=DBTEST;Trusted_Connection=Yes;APP=XXX;WSID=NEUROMANCER;DATABASE=master;SERVER=localhost\n\nDRIVER=ODBC;DSN=DBTEST_PW;UID=SA;PWD=password;APP=XXX;WSID=NEUROMANCER;DATABASE=master;\nDRIVER=ODBC;DSN=DBTEST_PW;UID=SA;PWD=password;APP=XXX;WSID=NEUROMANCER;DATABASE=master;SERVER=localhost\n</code></pre>\n\n<p>I also made sure to use the 32bit ODBC Admin tool to generate the system DSNs for the 32bit application.</p>\n\n<p>If I replace \"CDatabase::NoOdbcDialog\" with \"0\" it opens the ODBC-Dialog again as if informations necessary to open the connection are missing.</p>\n\n<pre><code>db.OpenEx(NULL, CDatabase::forceOdbcDialog);\nCString cstmp;\nif (db.IsOpen()) {\n    cstmp = db.GetConnect();\n    db.Close();\n}\nMessageBox(cstmp, _T(\"\"), MB_OK);\nif (db.OpenEx(cstmp, CDatabase::noOdbcDialog )) { //Exception here CDBException at 0x004FDD9\n    MessageBox(_T(\"Connection success!\"), _T(\"Connection\"), MB_OK);\n    db.Close();\n}\nelse {\n    MessageBox(_T(\"Connection failed!\"), _T(\"Connection\"), MB_OK);\n}\n</code></pre>\n\n<p>Can anyone tell me where my problem is?</p>\n"}, {"tags": ["c++", "linker-errors"], "answers": [{"comments": [{"owner": {"reputation": 29, "user_id": 6395239, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bc3feb6a1db0817102c3174640fb080?s=128&d=identicon&r=PG&f=1", "display_name": "stdout", "link": "https://stackoverflow.com/users/6395239/stdout"}, "edited": false, "score": 0, "creation_date": 1577366697, "post_id": 59482712, "comment_id": 105152549, "body": "not using xcode. please read the description of the problem. clang does not work on the code. i am using the command /usr/local/opt/gcc/bin/c++-9 test.cpp libbinacpp.a libjsoncpp.a   -I/Users/N/Downloads/vcpkg/packages/jsoncpp_x64-osx/include -I/usr/local/Cellar/openssl@1.1/1.1.1d/include  -L/usr/local/Cellar  /openssl@1.1/1.1.1d/lib -lwebsockets -ljson -lcurl -lssl"}, {"owner": {"reputation": 29, "user_id": 6395239, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bc3feb6a1db0817102c3174640fb080?s=128&d=identicon&r=PG&f=1", "display_name": "stdout", "link": "https://stackoverflow.com/users/6395239/stdout"}, "edited": false, "score": 0, "creation_date": 1577366748, "post_id": 59482712, "comment_id": 105152571, "body": "which includes the libraries"}, {"owner": {"reputation": 29, "user_id": 6395239, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bc3feb6a1db0817102c3174640fb080?s=128&d=identicon&r=PG&f=1", "display_name": "stdout", "link": "https://stackoverflow.com/users/6395239/stdout"}, "edited": false, "score": 0, "creation_date": 1577464872, "post_id": 59482712, "comment_id": 105179609, "body": "symbol Json::Reader::parse() is not found during linking yet nm -gDC libjsoncpp.a shows it to be present. So it should be found. Have no idea whats wrong."}, {"owner": {"reputation": 334, "user_id": 12242570, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAR7XCYSSQ780SS3cqjLAJ4FCXLLz2vA7rfkdTw=k-s128", "display_name": "walid barakat", "link": "https://stackoverflow.com/users/12242570/walid-barakat"}, "reply_to_user": {"reputation": 29, "user_id": 6395239, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bc3feb6a1db0817102c3174640fb080?s=128&d=identicon&r=PG&f=1", "display_name": "stdout", "link": "https://stackoverflow.com/users/6395239/stdout"}, "edited": false, "score": 0, "creation_date": 1577629701, "post_id": 59482712, "comment_id": 105211518, "body": "can you please write down the command you use to compile and link, or if you use an IDE not command line, tell me what IDE are you using?"}, {"owner": {"reputation": 29, "user_id": 6395239, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bc3feb6a1db0817102c3174640fb080?s=128&d=identicon&r=PG&f=1", "display_name": "stdout", "link": "https://stackoverflow.com/users/6395239/stdout"}, "edited": false, "score": 1, "creation_date": 1577654145, "post_id": 59482712, "comment_id": 105217729, "body": "dude its written there twice:"}, {"owner": {"reputation": 29, "user_id": 6395239, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bc3feb6a1db0817102c3174640fb080?s=128&d=identicon&r=PG&f=1", "display_name": "stdout", "link": "https://stackoverflow.com/users/6395239/stdout"}, "edited": false, "score": 0, "creation_date": 1577654164, "post_id": 59482712, "comment_id": 105217734, "body": "/usr/local/opt/gcc/bin/c++-9 test.cpp libbinacpp.a libjsoncpp.a -I/Users/N/Downloads/vcpkg/packages/jsoncpp_x64-osx/include -I/usr/local/Cellar/openssl@1.1/1.1.1d/include -L/usr/local/Cellar /openssl@1.1/1.1.1d/lib -lwebsockets -ljson -lcurl -lssl"}], "tags": [], "owner": {"reputation": 334, "user_id": 12242570, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAR7XCYSSQ780SS3cqjLAJ4FCXLLz2vA7rfkdTw=k-s128", "display_name": "walid barakat", "link": "https://stackoverflow.com/users/12242570/walid-barakat"}, "is_accepted": false, "score": 0, "last_activity_date": 1577319040, "creation_date": 1577319040, "answer_id": 59482712, "question_id": 59482641, "link": "https://stackoverflow.com/questions/59482641/unresolved-symbols-compiling-code-on-mac-os/59482712#59482712", "title": "unresolved symbols compiling code on mac os", "body": "<p>it seems you just forgot to include your libraries in the project, please reference to this <a href=\"https://stackoverflow.com/questions/18408531/xcode-build-failure-undefined-symbols-for-architecture-x86-64\">question</a>, in case you are using Xcode it mentioned there by pictures how to do it. </p>\n"}], "owner": {"reputation": 29, "user_id": 6395239, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bc3feb6a1db0817102c3174640fb080?s=128&d=identicon&r=PG&f=1", "display_name": "stdout", "link": "https://stackoverflow.com/users/6395239/stdout"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 301, "favorite_count": 0, "closed_date": 1577332066, "answer_count": 1, "score": -1, "last_activity_date": 1577342404, "creation_date": 1577317774, "last_edit_date": 1577342404, "question_id": 59482641, "link": "https://stackoverflow.com/questions/59482641/unresolved-symbols-compiling-code-on-mac-os", "closed_reason": "Duplicate", "title": "unresolved symbols compiling code on mac os", "body": "<p>Mac OS Sierra\nApple LLVM version 8.0.0 (clang-800.0.42.1)\ngcc version c++-9 (Homebrew GCC 9.2.0_2) 9.2.0</p>\n\n<p>I am trying to compile a test program that uses \n<a href=\"https://github.com/binance-exchange/binacpp\" rel=\"nofollow noreferrer\">https://github.com/binance-exchange/binacpp</a>\nwhich uses microsoft's jsoncpp\n<a href=\"https://github.com/open-source-parsers/jsoncpp\" rel=\"nofollow noreferrer\">https://github.com/open-source-parsers/jsoncpp</a>\nand the openssl, curl, websockets, json libraries\ni am running into a linking problem and it seems to\nme that none of the symbols are resolved. cant figure out\nwhy. Might be due to the ugly setup...</p>\n\n<p>ugly setup:\n- microsoft (jsoncpp) uses some tech that is not supported by llvm/clang\nso it suggests using gcc and microsoft's packetmanager vcpkg.\nwith gcc the source compiled into a static library libjsoncpp.a which i\ncopied into my testprogramm's dir.\n- compiled binacpp sources with gcc -c into objectfiles and used ar rcs libbinacpp *.o\nto create another static library\n- included include and lib dirs for openssl that is for some reason not found in the usual dirs, als well as the header files for libjsoncpp directly</p>\n\n<p>whole command:</p>\n\n<pre><code>/usr/local/opt/gcc/bin/c++-9 test.cpp libbinacpp.a libjsoncpp.a  \n-I/Users/N/Downloads/vcpkg/packages/jsoncpp_x64-osx/include\n-I/usr/local/Cellar/openssl@1.1/1.1.1d/include \n-L/usr/local/Cellar  /openssl@1.1/1.1.1d/lib -lwebsockets -ljson -lcurl -lssl \n</code></pre>\n\n<p>the whole thing gives me lots of errors. Have no idea whats going wrong...\nAny help appreciated.</p>\n\n<p>Regards.</p>\n\n<p>errors (small portion):</p>\n\n<blockquote>\n  <p>Undefined symbols for architecture x86_64:\n  -\"_EVP_sha256\", referenced from:\n  - hmac_sha256[abi:cxx11](char const*, char const*) in libbinacpp.a(binacpp_utils.o)\n  -  \"_HMAC\", referenced from:\n  -   hmac_sha256[abi:cxx11](char const*, char const*) in libbinacpp.a(binacpp_utils.o)\n  -  \"_SHA256_Final\", referenced from:\n  -      sha256[abi:cxx11](char const*) in libbinacpp.a(binacpp_utils.o)\n  -  \"_SHA256_Init\", referenced from:\n  -      sha256[abi:cxx11](char const*) in libbinacpp.a(binacpp_utils.o)\n  -  \"_SHA256_Update\", referenced from:\n  -      sha256[abi:cxx11](char const*) in libbinacpp.a(binacpp_utils.o)\n  -  \"Json::Reader::parse(std::__cxx11::basic_string, -std::allocator > const&amp;, Json::Value&amp;,\n  bool)\", referenced from:\n  -      BinaCPP::get_exchangeInfo(Json::Value&amp;)       in libbinacpp.a(binacpp.o)\n  -      BinaCPP::get_serverTime(Json::Value&amp;)       in libbinacpp.a(binacpp.o)\n  -      BinaCPP::get_allPrices(Json::Value&amp;)       in libbinacpp.a(binacpp.o)\n  -      BinaCPP::get_allBookTickers(Json::Value&amp;)       in libbinacpp.a(binacpp.o)\n  -      BinaCPP::get_depth(char const*, int, Json::Value&amp;) in libbinacpp.a(binacpp.o)\n  -      BinaCPP::get_aggTrades(char const*, int, long, long, int, Json::Value&amp;) in -libbinacpp.a(binacpp.o)\n  -      BinaCPP::get_24hr(char const*, Json::Value&amp;) in libbinacpp.a(binacpp.o)\n  -      ...\n  -  \"Json::operator&lt;&lt;(std::basic_ostream >&amp;, Json::Value const&amp;)\", -referenced from:\n  -      _main in ccsPSRMm.o\n  -  \"Json::Value::asStringabi:cxx11 const\", referenced from:\n  -      BinaCPP::get_price(char const*) in libbinacpp.a(binacpp.o)\n  -      BinaCPP::get_bookTicker(char const*, Json::Value&amp;) in libbinacpp.a(binacpp.o)\n  -  \"std::__1::basic_string, std::__1::allocator </p>\n  \n  <p>... a lot more errors ....</p>\n  \n  <p>ld: symbol(s) not found for architecture x86_64 collect2: error: ld\n  returned 1 exit status</p>\n</blockquote>\n"}, {"tags": ["c++"], "answers": [{"comments": [{"owner": {"reputation": 85, "user_id": 12577308, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95cdb257a1a76e5685df5ded8ae4ddf8?s=128&d=identicon&r=PG&f=1", "display_name": "kira55", "link": "https://stackoverflow.com/users/12577308/kira55"}, "edited": false, "score": 0, "creation_date": 1577315484, "post_id": 59482417, "comment_id": 105141287, "body": "i have hard time understanding the contents on cppreference, my IQ went downhill after i started learning c++. thanks for pointing out the obvious."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 85, "user_id": 12577308, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95cdb257a1a76e5685df5ded8ae4ddf8?s=128&d=identicon&r=PG&f=1", "display_name": "kira55", "link": "https://stackoverflow.com/users/12577308/kira55"}, "edited": false, "score": 0, "creation_date": 1577315644, "post_id": 59482417, "comment_id": 105141308, "body": "It&#39;s okay, your IQ is safe: just the confusion level will go up with anything relating to this ghastly language :P"}, {"owner": {"reputation": 4915, "user_id": 10686048, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bffd06d00a80b9b69e83f561ee5a392?s=128&d=identicon&r=PG&f=1", "display_name": "ChrisMM", "link": "https://stackoverflow.com/users/10686048/chrismm"}, "edited": false, "score": 0, "creation_date": 1577318420, "post_id": 59482417, "comment_id": 105141637, "body": "Can you also use <code>const</code> reference, to extend the life of the temporary object?"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 4915, "user_id": 10686048, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bffd06d00a80b9b69e83f561ee5a392?s=128&d=identicon&r=PG&f=1", "display_name": "ChrisMM", "link": "https://stackoverflow.com/users/10686048/chrismm"}, "edited": false, "score": 1, "creation_date": 1577321191, "post_id": 59482417, "comment_id": 105141923, "body": "@ChrisMM I guess so, but that doesn&#39;t really gain you anything over just taking a value, and is not idiomatic (probably because it doesn&#39;t really gain you anything). Have a read of <i>&quot;<a href=\"https://stackoverflow.com/q/17803475/560648\">why is <code>std::initializer_list</code> often passed by value?</a>&quot;</i>."}], "tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": false, "score": 3, "last_activity_date": 1577314874, "creation_date": 1577314874, "answer_id": 59482417, "question_id": 59482406, "link": "https://stackoverflow.com/questions/59482406/why-am-i-getting-a-no-instance-of-constructor-matches-the-myarraymyarray-arg/59482417#59482417", "title": "why am i getting a &quot;no instance of constructor matches the MyArray::MyArray&quot; argument list?", "body": "<blockquote>\n  <p>i created an object that matches the argument list, ie a constructor that takes an initializer list.</p>\n</blockquote>\n\n<p>You didn't; not quite.</p>\n\n<p>You created a constructor that takes a <em>reference</em> to an <code>std::initializer_list</code>.</p>\n\n<p>But one created in this manner is [possibly] a temporary that cannot bind to such a reference.</p>\n\n<p>Generally you just want to take <code>std::initializer_list</code>s by value. That is: <strong>remove the <code>&amp;</code>.</strong></p>\n\n<p>There are some examples on <a href=\"https://en.cppreference.com/w/cpp/utility/initializer_list\" rel=\"nofollow noreferrer\">cppreference's article on <code>std::initializer_list</code></a>.</p>\n"}, {"tags": [], "owner": {"reputation": 86, "user_id": 6164408, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5216a6d494120d3a469af0d344434d8a?s=128&d=identicon&r=PG&f=1", "display_name": "Kejia Cui", "link": "https://stackoverflow.com/users/6164408/kejia-cui"}, "is_accepted": false, "score": 0, "last_activity_date": 1577326892, "creation_date": 1577326892, "answer_id": 59483252, "question_id": 59482406, "link": "https://stackoverflow.com/questions/59482406/why-am-i-getting-a-no-instance-of-constructor-matches-the-myarraymyarray-arg/59483252#59483252", "title": "why am i getting a &quot;no instance of constructor matches the MyArray::MyArray&quot; argument list?", "body": "<p><code>MyArray object{ 2,4,2,2 };</code></p>\n\n<p>Actually this is invoking move assignment of MyArray.\n{ 2,4,2,2 } is a rvalue and you can't bind it to a reference.</p>\n\n<p>You need to understand what is rvalue reference and move semantics, and here is a good answer:\n<a href=\"https://stackoverflow.com/questions/3106110/what-is-move-semantics\">What is move semantics?</a></p>\n"}], "owner": {"reputation": 85, "user_id": 12577308, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95cdb257a1a76e5685df5ded8ae4ddf8?s=128&d=identicon&r=PG&f=1", "display_name": "kira55", "link": "https://stackoverflow.com/users/12577308/kira55"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "answer_count": 2, "score": 3, "last_activity_date": 1577326892, "creation_date": 1577314740, "question_id": 59482406, "link": "https://stackoverflow.com/questions/59482406/why-am-i-getting-a-no-instance-of-constructor-matches-the-myarraymyarray-arg", "title": "why am i getting a &quot;no instance of constructor matches the MyArray::MyArray&quot; argument list?", "body": "<pre><code>#include &lt;iostream&gt;\n#include &lt;initializer_list&gt;\n\nclass MyArray {\n    int* array;\npublic:\n    MyArray(){}\n    MyArray(std::initializer_list&lt;int&gt;&amp; v) {\n        array = new int[v.size()];\n        int index = 0;\n        for (auto element : v) {\n            array[index] = element;\n            index++;\n        }\n    }\n\n    ~MyArray()\n    {\n        delete[] array;\n    }\n};\n\nint main() {\n    MyArray object{ 2,4,2,2 };\n}\n</code></pre>\n\n<p>This is my first time working with std::initializer for object list initialization. I have created a an array that is initialized using the MyArray constructor. i don't know where am i going wrong. i created an object that matches the argument list, ie a constructor that takes an initializer list.</p>\n"}, {"tags": ["c++", "function", "class", "parameter-passing"], "comments": [{"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1577311912, "post_id": 59482184, "comment_id": 105140789, "body": "Why do you think that something different happens when you pass a structure/class?"}, {"owner": {"reputation": 2449, "user_id": 4730685, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8d2d8e67d9c0443c382d1dd80132063?s=128&d=identicon&r=PG&f=1", "display_name": "Erlkoenig", "link": "https://stackoverflow.com/users/4730685/erlkoenig"}, "edited": false, "score": 0, "creation_date": 1577311955, "post_id": 59482184, "comment_id": 105140792, "body": "Classes occupy memory just like the basic types. If you pass a class to a function, unless it is by reference or pointer, a new instance for the parameter will be created via the copy or move constructor. If the class is big, this can be inefficient. Classes that have neither copy nor move constructor can&#39;t be passed to functions directly, only via reference/pointer."}, {"owner": {"reputation": 7277, "user_id": 6205379, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/dPsLh.png?s=128&g=1", "display_name": "Timo", "link": "https://stackoverflow.com/users/6205379/timo"}, "edited": false, "score": 0, "creation_date": 1577311970, "post_id": 59482184, "comment_id": 105140794, "body": "Are you asking about copy and move semantics?"}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 12595875, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-TZTKswtUhFs/AAAAAAAAAAI/AAAAAAAAAP8/G7tuWDKx6qI/photo.jpg?sz=128", "display_name": "Mickey Mouse", "link": "https://stackoverflow.com/users/12595875/mickey-mouse"}, "edited": false, "score": 0, "creation_date": 1577312257, "post_id": 59482209, "comment_id": 105140836, "body": "How much memory do they occupy? For example int occupies 4 bytes and char occupies 1 byte. What about class type?"}, {"owner": {"reputation": 140851, "user_id": 1120273, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4cbcb185abce0204cf5ac705ba32d53a?s=128&d=identicon&r=PG", "display_name": "Dietmar K&#252;hl", "link": "https://stackoverflow.com/users/1120273/dietmar-k%c3%bchl"}, "reply_to_user": {"reputation": 13, "user_id": 12595875, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-TZTKswtUhFs/AAAAAAAAAAI/AAAAAAAAAP8/G7tuWDKx6qI/photo.jpg?sz=128", "display_name": "Mickey Mouse", "link": "https://stackoverflow.com/users/12595875/mickey-mouse"}, "edited": false, "score": 0, "creation_date": 1577312591, "post_id": 59482209, "comment_id": 105140885, "body": "@Saeideh: as with built-in types <code>sizeof(T)</code> (if they actually need to be copied and end up in memory)."}], "tags": [], "owner": {"reputation": 1950, "user_id": 11207416, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d91d68c248076f96733f44a1f5f4e05?s=128&d=identicon&r=PG&f=1", "display_name": "jkb", "link": "https://stackoverflow.com/users/11207416/jkb"}, "is_accepted": false, "score": 0, "last_activity_date": 1577312066, "creation_date": 1577312066, "answer_id": 59482209, "question_id": 59482184, "link": "https://stackoverflow.com/questions/59482184/what-happens-when-we-pass-an-argument-of-class-type-to-a-function-in-cpp/59482209#59482209", "title": "What happens when we pass an argument of class type to a function in cpp?", "body": "<p>Just as with primitive types, a copy of the class type is passed to the function.</p>\n\n<p>Also as with primitive types, you can pass a <em>reference</em> to a class type which does not make a copy of the object.</p>\n"}, {"tags": [], "owner": {"reputation": 140851, "user_id": 1120273, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4cbcb185abce0204cf5ac705ba32d53a?s=128&d=identicon&r=PG", "display_name": "Dietmar K&#252;hl", "link": "https://stackoverflow.com/users/1120273/dietmar-k%c3%bchl"}, "is_accepted": false, "score": 0, "last_activity_date": 1577312490, "creation_date": 1577312490, "answer_id": 59482238, "question_id": 59482184, "link": "https://stackoverflow.com/questions/59482184/what-happens-when-we-pass-an-argument-of-class-type-to-a-function-in-cpp/59482238#59482238", "title": "What happens when we pass an argument of class type to a function in cpp?", "body": "<p>What happens exactly will depend on the ABI and how the argument is passed exactly. For example, there could be copy-elision if an object is passed from a temporary. Assuming the basic set up is passing an object of class type which is named and passed by value essentially the operations which happen are:</p>\n\n<ol>\n<li>Space for the object is allocated on the stack.</li>\n<li>The object is copied using its copy constructor.</li>\n<li>The object somehow gets registered (often implicitly) to be destroyed when execution leaves the context, either normal or with an exception.</li>\n</ol>\n\n<p>Whether any of that actually happens depends on whether the compiler can decide if there are any observable side-effects or not. There are plenty optimization opportunities.</p>\n\n<p>Conceptually that\u2019s the same as with built-in types. Class type object may also be passed using registers if the ABI allows that and the object fits.</p>\n"}], "owner": {"reputation": 13, "user_id": 12595875, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-TZTKswtUhFs/AAAAAAAAAAI/AAAAAAAAAP8/G7tuWDKx6qI/photo.jpg?sz=128", "display_name": "Mickey Mouse", "link": "https://stackoverflow.com/users/12595875/mickey-mouse"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 79, "favorite_count": 0, "answer_count": 2, "score": -4, "last_activity_date": 1577312490, "creation_date": 1577311757, "question_id": 59482184, "link": "https://stackoverflow.com/questions/59482184/what-happens-when-we-pass-an-argument-of-class-type-to-a-function-in-cpp", "title": "What happens when we pass an argument of class type to a function in cpp?", "body": "<p>My question considers cpp.</p>\n\n<p>I know we pass arguments by their types (int, double, etc) to a function and each of these datatypes occupies specific size of memory. But what happens exactly when the type is a class? (i.e. we pass an object of a class type into a function.)</p>\n"}, {"tags": ["c#", "c++", "pointers", "struct"], "comments": [{"owner": {"reputation": 1035, "user_id": 10504230, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Wfkm8.jpg?s=128&g=1", "display_name": "Arush Agarampur", "link": "https://stackoverflow.com/users/10504230/arush-agarampur"}, "edited": false, "score": 0, "creation_date": 1577315572, "post_id": 59482107, "comment_id": 105141297, "body": "Maybe that line should be <code>public ref SingleDevice singledevice</code>? Or you can use <code>IntPtr</code> for a pointer."}], "answers": [{"tags": [], "owner": {"reputation": 334, "user_id": 12242570, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAR7XCYSSQ780SS3cqjLAJ4FCXLLz2vA7rfkdTw=k-s128", "display_name": "walid barakat", "link": "https://stackoverflow.com/users/12242570/walid-barakat"}, "is_accepted": true, "score": 1, "last_activity_date": 1577316137, "creation_date": 1577316137, "answer_id": 59482515, "question_id": 59482107, "link": "https://stackoverflow.com/questions/59482107/converting-c-api-struct-to-c/59482515#59482515", "title": "converting c++ API struct to c#", "body": "<p>i think this error because of the different nature of c++ (un-managed code) and c# (managed code), so maybe using System.IntPtr as a pointer to your camera struct.</p>\n\n<p>please consider this question <a href=\"https://stackoverflow.com/questions/40495321/handling-pointers-to-structure-in-c-sharp\">here</a>, and you can find about <a href=\"https://blogs.msdn.microsoft.com/bclteam/2008/06/23/pinvoke-interop-assistant-justin-van-patten/\" rel=\"nofollow noreferrer\">P/Invoke Interop Assistant</a> which is an open source tool to convert your code from the un-managed code to a managed C# code. with a small blog article about <a href=\"https://mark-borg.github.io/blog/2017/interop/\" rel=\"nofollow noreferrer\">C++/C# interoperability</a></p>\n"}], "owner": {"reputation": 3, "user_id": 10901423, "user_type": "registered", "profile_image": "https://graph.facebook.com/10157051849932459/picture?type=large", "display_name": "Recep Cengiz", "link": "https://stackoverflow.com/users/10901423/recep-cengiz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 104, "favorite_count": 0, "accepted_answer_id": 59482515, "answer_count": 1, "score": 0, "last_activity_date": 1577316137, "creation_date": 1577310862, "question_id": 59482107, "link": "https://stackoverflow.com/questions/59482107/converting-c-api-struct-to-c", "title": "converting c++ API struct to c#", "body": "<p>I am trying to convert c++ api example to c#. but I can not find the way of struct pointer in struct by the way struct has string types. Here is c++ structs and functions</p>\n\n<pre><code>struct AuthParam { char server_ip[32];  char username[50];  char password[50]; };\nstruct CameraInfo { int index;  char devicename[100];  char smallrtsp[1000];  char bigrtsp[1000]; };\nstruct SingleDevice { char deviceid[50];  char devicename[100];  int  flag_onuse;  int  cameralist_size;  CameraInfo* cameralist; };\nstruct DeviceList { int listsize;  SingleDevice* singledevicelist; };\n\ntypedef int (WINAPI capi_init)(void);\ntypedef int (WINAPI capi_disabled)(void);\ntypedef int (WINAPI capi_GetServerTimeCode)(char* server_ip, unsigned int* timecode);\ntypedef int (WINAPI GetDevicelist)(AuthParam auth_para, DeviceList* devicelist);\n</code></pre>\n\n<p>and this is my c# code but I can not find the way of defining struct pointer in struct I got \"\nError   CS0208  Cannot take the address of, get the size of, or declare a pointer to a managed type ('Form1.CameraInfo')\" error.</p>\n\n<pre><code>public struct AuthParam\n        {\n            [MarshalAs(UnmanagedType.ByValTStr, SizeConst = 32)]\n            public string server_ip;\n            [MarshalAs(UnmanagedType.ByValTStr, SizeConst = 50)]\n            public string username;\n            [MarshalAs(UnmanagedType.ByValTStr, SizeConst = 50)]\n            public string password;\n        };\n\n        [StructLayout(LayoutKind.Sequential)]\n        public struct CameraInfo\n        {\n            public int index;\n            [MarshalAs(UnmanagedType.ByValTStr, SizeConst = 100)]\n            public string devicename;\n            [MarshalAs(UnmanagedType.ByValTStr, SizeConst = 1000)]\n            public string smallrtsp;\n            [MarshalAs(UnmanagedType.ByValTStr, SizeConst = 1000)]\n            public string bigrtsp;\n        };\n\n        [StructLayout(LayoutKind.Sequential)]\n        public struct SingleDevice\n        {\n            [MarshalAs(UnmanagedType.ByValTStr, SizeConst = 50)]\n            public string deviceid;\n            [MarshalAs(UnmanagedType.ByValTStr, SizeConst = 100)]\n            public string devicename;\n            public int flag_onuse;\n            public int cameralist_size;\n\n            public CameraInfo *cameralist;\n        };\n\n        [StructLayout(LayoutKind.Sequential)]\n        public unsafe struct DeviceList\n        {\n            public int listsize;\n            public SingleDevice *singledevicelist;\n        };\n\n[DllImport(\"c:\\\\lib\\\\api_client.dll\")] public static extern int capi_init();\n        [DllImport(\"c:\\\\lib\\\\api_client.dll\")] public static extern int capi_disabled();\n        [DllImport(\"c:\\\\lib\\\\api_client.dll\")] public static extern int capi_GetServerTimeCode(string ip, ref uint timecode);\n        [DllImport(\"c:\\\\lib\\\\api_client.dll\")] public static extern int GetDevicelist (AuthParam auth_para,ref  DeviceList devicelist);\n</code></pre>\n\n<p>is there any way to achieve this convertion? </p>\n"}, {"tags": ["c++", "reference", "c++17", "stdmap", "std-pair"], "answers": [{"comments": [{"owner": {"reputation": 405, "user_id": 4484362, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oTjeL.jpg?s=128&g=1", "display_name": "Grant Rostig", "link": "https://stackoverflow.com/users/4484362/grant-rostig"}, "edited": false, "score": 0, "creation_date": 1577395533, "post_id": 59490501, "comment_id": 105161232, "body": "Igor, Thank you for your detailed analysis.  I do specifically want references because, as of what I noted here: &gt;&gt;A simple answer some might suggest is to not make use of references in Struct1::Key, however I&#39;m trying to have the top level data members be both easily accessible in the struct and also to easily create the pair for insertion into the std::map.&lt;&lt;"}, {"owner": {"reputation": 405, "user_id": 4484362, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oTjeL.jpg?s=128&g=1", "display_name": "Grant Rostig", "link": "https://stackoverflow.com/users/4484362/grant-rostig"}, "edited": false, "score": 0, "creation_date": 1577395841, "post_id": 59490501, "comment_id": 105161309, "body": "Igor, Yes a reference is a pointer and a pointer is an int (roughly speaking), but please understand that the sample code &#39;int&#39; might be a &#39;long string&#39; in a database key and then a pointer would be smaller.  I also want the values to be synchronized to allow dual access to the database row, so a ref seemed perfect for that.  The reason for that is I want the code to be usable by an ORM or Sqlite and they seem to like simple records ie. structs."}, {"owner": {"reputation": 405, "user_id": 4484362, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oTjeL.jpg?s=128&g=1", "display_name": "Grant Rostig", "link": "https://stackoverflow.com/users/4484362/grant-rostig"}, "edited": false, "score": 0, "creation_date": 1577395996, "post_id": 59490501, "comment_id": 105161347, "body": "Igor,  Thank you for your example.  I had thought that the map would make a copy and that the ref would not break the map.  I was wrong. I do wonder why not, or how the map could have given me a compile time error, or even a run time error (yes the latter would be slow)."}, {"owner": {"reputation": 23130, "user_id": 8586227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BRnwg.png?s=128&g=1", "display_name": "Davis Herring", "link": "https://stackoverflow.com/users/8586227/davis-herring"}, "reply_to_user": {"reputation": 405, "user_id": 4484362, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oTjeL.jpg?s=128&g=1", "display_name": "Grant Rostig", "link": "https://stackoverflow.com/users/4484362/grant-rostig"}, "edited": false, "score": 1, "creation_date": 1577413742, "post_id": 59490501, "comment_id": 105164507, "body": "@GrantRostig: The only error was that you mutated a key (or rather something it referenced) in a way that affected its comparison order.  It\u2019s rather expensive (and impossible in general) to check that, so it doesn\u2019t."}, {"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 0, "creation_date": 1577415939, "post_id": 59490501, "comment_id": 105164838, "body": "You seem to be saying that you expected the map to somehow make a deep copy of the key, and store actual values internally and not just references. At the same time, you are concerned that the key values may be large and expensive to copy, and introduce references to avoid data duplication (while, again, believing that the map should somehow automatically duplicate that same data). I don&#39;t understand how you can reconcile these two contradicting ideas. I must admit I&#39;m still not sure why you insist on using references here, what specific goal you imagine they will help achieve."}, {"owner": {"reputation": 405, "user_id": 4484362, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oTjeL.jpg?s=128&g=1", "display_name": "Grant Rostig", "link": "https://stackoverflow.com/users/4484362/grant-rostig"}, "reply_to_user": {"reputation": 23130, "user_id": 8586227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BRnwg.png?s=128&g=1", "display_name": "Davis Herring", "link": "https://stackoverflow.com/users/8586227/davis-herring"}, "edited": false, "score": 0, "creation_date": 1577426102, "post_id": 59490501, "comment_id": 105166599, "body": "@DavisHerring, thank you, you are correct, but the ref to the value string also caused a problem, not just the key.  I noticed that behavior during further debugging."}, {"owner": {"reputation": 23130, "user_id": 8586227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BRnwg.png?s=128&g=1", "display_name": "Davis Herring", "link": "https://stackoverflow.com/users/8586227/davis-herring"}, "reply_to_user": {"reputation": 405, "user_id": 4484362, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oTjeL.jpg?s=128&g=1", "display_name": "Grant Rostig", "link": "https://stackoverflow.com/users/4484362/grant-rostig"}, "edited": false, "score": 0, "creation_date": 1577426470, "post_id": 59490501, "comment_id": 105166669, "body": "@GrantRostig: That\u2019s not an <i>error</i>, though\u2014you just didn\u2019t do what you wanted."}], "tags": [], "owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "is_accepted": false, "score": 0, "last_activity_date": 1577375553, "last_edit_date": 1577375553, "creation_date": 1577374789, "answer_id": 59490501, "question_id": 59482089, "link": "https://stackoverflow.com/questions/59482089/multiple-stdmap-inserts-using-the-same-stdpair-of-references-but-with-ne/59490501#59490501", "title": "Multiple std::map.insert()&#39;s using the same std::pair of references, but with new values results in incorrect map values. Why and how to fix?", "body": "<p>It boils down to this:</p>\n\n<pre><code>struct S {\n  int m;\n  int&amp; r = m;\n};\n\nS s1{42};\nS s2{s1};\ns1.m = 84;\nstd::cout &lt;&lt; s2.r;  // prints 84\n</code></pre>\n\n<p><a href=\"https://rextester.com/CBZ14140\" rel=\"nofollow noreferrer\">Demo</a></p>\n\n<p>You have a structure that contains \"normal\" members and reference members. The (implicitly defined) default constructor, as well as aggregate initialization, initialize the latter to refer to the former. You appear to assume that the latter are, or should be, <strong>always</strong> initialized to refer to the former - but that's not the case. This structure also has an implicitly defined copy constructor, and that one performs member-wise copy - non-reference members of the copy get the same value as non-reference members of the original, while reference members of the copy are initialized to refer to the same objects as reference members of the original.</p>\n\n<p>In my example, first <code>s1</code> is initialized with <code>s1.m == 42</code> and <code>s1.r</code> referring to <code>s1.m</code>. Then <code>s2</code> is copy-initialized from it; the result is that <code>s2.r</code> refers to <code>s1.m</code>, not <code>s2.m</code>. Then <code>s1.m</code> is modified, and <code>s2.r</code> dutifully reflects this modification.</p>\n\n<p>Same thing happens with your <code>Struct1</code> and, perhaps more importantly, <code>Struct1::Key</code>. The structure is copied into the map, and the reference members in the copy end up referring to the non-reference members in the original, not the copy. Then by updating members in the original, you effectively modify the key in the copy, at which point your program exhibits undefined behavior - the map relies on ordering of keys to be stable, and instead you are reordering them right under its feet.</p>\n\n<hr>\n\n<p>It's not clear how to salvage your approach, and frankly, it doesn't seem worth salvaging. You appear to believe that references are free, but in fact references are typically implemented as pointers underneath. A pair of references would likely use as much, or more, memory than a pair of ints (print <code>sizeof(Struct1)</code> and <code>2*sizeof(int) + sizeof(std::string)</code>; that might prove illuminating). You are not saving anything by copying references over if you just copied ints, but you are introducing major headaches.</p>\n"}, {"tags": [], "owner": {"reputation": 405, "user_id": 4484362, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oTjeL.jpg?s=128&g=1", "display_name": "Grant Rostig", "link": "https://stackoverflow.com/users/4484362/grant-rostig"}, "is_accepted": false, "score": 0, "last_activity_date": 1577425950, "creation_date": 1577425950, "answer_id": 59496547, "question_id": 59482089, "link": "https://stackoverflow.com/questions/59482089/multiple-stdmap-inserts-using-the-same-stdpair-of-references-but-with-ne/59496547#59496547", "title": "Multiple std::map.insert()&#39;s using the same std::pair of references, but with new values results in incorrect map values. Why and how to fix?", "body": "<p>It turns out that std::map requires value_types.  I had references to values.  To fix it I simply exchanged the references with the referenced values.  Now the key and value are no longer references.  There may well be a better explanation for the exact problem, but I don't really know it.</p>\n\n<pre><code>#include &lt;iostream&gt;  // c++17 gcc 8.3.0-6 debian\n#include &lt;map&gt;\n#include &lt;tuple&gt;\nusing std::endl, std::cout, std::cerr;\nstruct Struct1 {\n    struct Key {\n        int key_part1;\n        int key_part2;\n    } key;\n    struct Value {\n        std::string value_part1;\n    } value;\n    int &amp; s1_int1 {key.key_part1}, &amp; s1_int2 {key.key_part2};\n    std::string &amp; s1_str1 {value.value_part1};\n    struct Compare {\n        bool operator()( Key const &amp; lhs, Key const &amp; rhs) const {\n            return std::tie( lhs.key_part1, lhs.key_part2 ) &lt; std::tie( rhs.key_part1, rhs.key_part2 );\n        }\n    };\n    void print (std::string message) const {\n        cerr&lt;&lt;message&lt;&lt;\"&gt;&gt; s1_int1:\"&lt;&lt; s1_int1&lt;&lt;\", s1_int2:\"&lt;&lt;s1_int2&lt;&lt;\", s1_str1:\"&lt;&lt;s1_str1&lt;&lt;endl;\n    }\n};\nvoid r_print( std::pair&lt;Struct1::Key,Struct1::Value&gt; const &amp; pair, bool is_inserted ) {\n    cerr&lt;&lt;\"is_inserted:\"&lt;&lt;is_inserted&lt;&lt;\", key.key_part1:\"&lt;&lt;pair.first.key_part1&lt;&lt;\", key.key_part2:\"&lt;&lt;pair.first.key_part2&lt;&lt;\", value.s1_str1:\"&lt;&lt;pair.second.value_part1&lt;&lt;endl;\n};\nint main()\n{\n    std::map&lt;Struct1::Key, Struct1::Value, Struct1::Compare &gt; my_map {};\n    Struct1 map_value1 {11,12,\"s13\"} , map_value2 {21,22,\"s23\"};\n    map_value1.print(\"map_value :12\");\n    auto const r1 = my_map.insert( {map_value1.key,map_value1.value} );\n    r_print( *r1.first, r1.second );\n    for (auto &amp; [key,value]:my_map )\n        cerr&lt;&lt; \"key.key_part1:\"&lt;&lt;key.key_part1&lt;&lt;\", key.key_part2:\"&lt;&lt;key.key_part2&lt;&lt;\", value.s1_str1:\"&lt;&lt;value.value_part1&lt;&lt;endl;\n\n    map_value2.print(\"map_value2:22\");\n    auto const r2 = my_map.insert( {map_value2.key,map_value2.value} );\n    r_print( *r2.first, r1.second );\n    for (auto &amp; [key,value]:my_map )\n        cerr&lt;&lt; \"key.key_part1:\"&lt;&lt;key.key_part1&lt;&lt;\", key.key_part2:\"&lt;&lt;key.key_part2&lt;&lt;\", value.s1_str1:\"&lt;&lt;value.value_part1&lt;&lt;endl;\n\n    map_value1.s1_int1 = 31; map_value1.s1_int2 = 32; map_value1.s1_str1 = \"s33\";\n    map_value1.print(\"map_value :31\");\n    auto const r3 = my_map.insert( {map_value1.key,map_value1.value} );\n    r_print( *r3.first, r1.second );\n    for (auto &amp; [key,value]:my_map )\n        cerr&lt;&lt; \"key.key_part1:\"&lt;&lt;key.key_part1&lt;&lt;\", key.key_part2:\"&lt;&lt;key.key_part2&lt;&lt;\", value.s1_str1:\"&lt;&lt;value.value_part1&lt;&lt;endl;\n    cout &lt;&lt; \"###\" &lt;&lt; endl;\n    return 0;\n}\n\n</code></pre>\n\n<p>output:</p>\n\n<pre><code>map_value :12&gt;&gt; s1_int1:11, s1_int2:12, s1_str1:s13\nis_inserted:1, key.key_part1:11, key.key_part2:12, value.s1_str1:s13\nkey.key_part1:11, key.key_part2:12, value.s1_str1:s13\nmap_value2:22&gt;&gt; s1_int1:21, s1_int2:22, s1_str1:s23\nis_inserted:1, key.key_part1:21, key.key_part2:22, value.s1_str1:s23\nkey.key_part1:11, key.key_part2:12, value.s1_str1:s13\nkey.key_part1:21, key.key_part2:22, value.s1_str1:s23\nmap_value :31&gt;&gt; s1_int1:31, s1_int2:32, s1_str1:s33\nis_inserted:1, key.key_part1:31, key.key_part2:32, value.s1_str1:s33\nkey.key_part1:11, key.key_part2:12, value.s1_str1:s13\nkey.key_part1:21, key.key_part2:22, value.s1_str1:s23\nkey.key_part1:31, key.key_part2:32, value.s1_str1:s33\n###\n</code></pre>\n"}], "owner": {"reputation": 405, "user_id": 4484362, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oTjeL.jpg?s=128&g=1", "display_name": "Grant Rostig", "link": "https://stackoverflow.com/users/4484362/grant-rostig"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 60, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1577425992, "creation_date": 1577310718, "last_edit_date": 1577425992, "question_id": 59482089, "link": "https://stackoverflow.com/questions/59482089/multiple-stdmap-inserts-using-the-same-stdpair-of-references-but-with-ne", "title": "Multiple std::map.insert()&#39;s using the same std::pair of references, but with new values results in incorrect map values. Why and how to fix?", "body": "<p>Multiple std::map.insert()'s using the same std::pair but with new values results in incorrect map values.  How can I use a single struct and references without creating this behavior?</p>\n\n<pre><code>#include &lt;iostream&gt;  // c++17 gcc 8.3.0-6 debian\n#include &lt;map&gt;\n#include &lt;tuple&gt;\nusing std::endl, std::cout, std::cerr;\nstruct Struct1 {\n    int         s1_int1 {}, s1_int2 {};\n    std::string s1_str1 {};\n    struct Key {\n        decltype (s1_int1) &amp; key_part1;\n        decltype (s1_int2) &amp; key_part2;\n    } key   { s1_int1, s1_int2 };\n    struct Value {\n        decltype (s1_str1) &amp; value_part1;\n    } value { s1_str1 };\n    struct Compare {\n        bool operator()( Key const &amp; lhs, Key const &amp; rhs) const {\n            return std::tie( lhs.key_part1, lhs.key_part2 ) &lt; std::tie( rhs.key_part1, rhs.key_part2 );\n        }\n    };\n    void print (std::string message) const {\n        cerr&lt;&lt;message&lt;&lt;\"&gt;&gt; s1_int1:\"&lt;&lt; s1_int1&lt;&lt;\", s1_int2:\"&lt;&lt;s1_int2&lt;&lt;\", s1_str1:\"&lt;&lt;s1_str1&lt;&lt;endl;\n    }\n};\nvoid r_print( std::pair&lt;Struct1::Key,Struct1::Value&gt; const &amp; pair, bool is_inserted ) {\n    cerr&lt;&lt;\"is_inserted:\"&lt;&lt;is_inserted&lt;&lt;\", key.key_part1:\"&lt;&lt;pair.first.key_part1&lt;&lt;\", key.key_part2:\"&lt;&lt;pair.first.key_part2&lt;&lt;\", value.s1_str1:\"&lt;&lt;pair.second.value_part1&lt;&lt;endl;\n};\nint main()\n{\n    std::map&lt;Struct1::Key, Struct1::Value, Struct1::Compare &gt; my_map {};\n    Struct1 map_value1 {11,12,\"s13\"}, map_value2 = {21,22,\"s23\"};\n    map_value1.print(\"map_value :12\");\n    auto const r1 = my_map.insert( {map_value1.key,map_value1.value} );\n    r_print( *r1.first, r1.second );\n    for (auto &amp; [key,value]:my_map )\n        cerr&lt;&lt; \"key.key_part1:\"&lt;&lt;key.key_part1&lt;&lt;\", key.key_part2:\"&lt;&lt;key.key_part2&lt;&lt;\", value.s1_str1:\"&lt;&lt;value.value_part1&lt;&lt;endl;\n\n    map_value2.print(\"map_value2:22\");\n    auto const r2 = my_map.insert( {map_value2.key,map_value2.value} );\n    r_print( *r2.first, r1.second );\n    for (auto &amp; [key,value]:my_map )\n        cerr&lt;&lt; \"key.key_part1:\"&lt;&lt;key.key_part1&lt;&lt;\", key.key_part2:\"&lt;&lt;key.key_part2&lt;&lt;\", value.s1_str1:\"&lt;&lt;value.value_part1&lt;&lt;endl;\n\n    map_value1.s1_int1 = 31; map_value1.s1_int2 = 32; map_value1.s1_str1 = \"s33\";\n    map_value1.print(\"map_value :31\");\n    auto const r3 = my_map.insert( {map_value1.key,map_value1.value} );\n    r_print( *r3.first, r1.second );\n    for (auto &amp; [key,value]:my_map )\n        cerr&lt;&lt; \"key.key_part1:\"&lt;&lt;key.key_part1&lt;&lt;\", key.key_part2:\"&lt;&lt;key.key_part2&lt;&lt;\", value.s1_str1:\"&lt;&lt;value.value_part1&lt;&lt;endl;\n    cout &lt;&lt; \"###\" &lt;&lt; endl;\n    return 0;\n}\n</code></pre>\n\n<p>In the output note how the map is built and then broken on the last insert due to the re-use of map_value1.  I must be misunderstanding std::map, or something beyond that.</p>\n\n<p>I think I partially understand why this may be occurring since the map is apparently not making a copy.  But I have not observed this behavior when using std::vector.push_back().  As I read the cppreference entries for those member functions, I don't see how the descriptions would inform me of the different behavior.  Also I presume the c++ containers would offer similar behavior in the creation of container elements.  </p>\n\n<p>A simple answer some might suggest is to not make use of references in Struct1::Key, however I'm trying to have the top level data members be both easily accessible in the struct and also to easily create the pair for insertion into the std::map.</p>\n\n<p>I suppose I could force a copy somehow, which is what I'm trying to avoid by using references. Or create an \"new\" variable for every insertion, but that seems unnecessary and might cause memory leaks or dangling pointers if done incorrectly (an error I could quite easily make).</p>\n\n<p>The overall goal is to create in-memory database-like functionality.</p>\n\n<p>I appreciate any insights you can offer. </p>\n\n<p>Output:</p>\n\n<pre><code>map_value :12&gt;&gt; s1_int1:11, s1_int2:12, s1_str1:s13\nis_inserted:1, key.key_part1:11, key.key_part2:12, value.s1_str1:s13\nkey.key_part1:11, key.key_part2:12, value.s1_str1:s13\nmap_value2:22&gt;&gt; s1_int1:21, s1_int2:22, s1_str1:s23\nis_inserted:1, key.key_part1:21, key.key_part2:22, value.s1_str1:s23\nkey.key_part1:11, key.key_part2:12, value.s1_str1:s13\nkey.key_part1:21, key.key_part2:22, value.s1_str1:s23\nmap_value :31&gt;&gt; s1_int1:31, s1_int2:32, s1_str1:s33\nis_inserted:1, key.key_part1:31, key.key_part2:32, value.s1_str1:s33\nkey.key_part1:31, key.key_part2:32, value.s1_str1:s33\nkey.key_part1:21, key.key_part2:22, value.s1_str1:s23\nkey.key_part1:31, key.key_part2:32, value.s1_str1:s33\n###\n\n</code></pre>\n"}, {"tags": ["c++", "assembly", "visual-c++", "x86-64"], "comments": [{"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1577310997, "post_id": 59482079, "comment_id": 105140643, "body": "That&#39;s an inefficient way to zero-extend ECX into RCX.  More efficient would be <code>mov</code> into a different register <a href=\"https://stackoverflow.com/questions/44169342/can-x86s-mov-really-be-free-why-cant-i-reproduce-this-at-all\">so mov-elimination could work</a>."}], "answers": [{"tags": [], "owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "is_accepted": true, "score": 2, "last_activity_date": 1577311280, "creation_date": 1577311280, "answer_id": 59482137, "question_id": 59482079, "link": "https://stackoverflow.com/questions/59482079/msvc-compiler-generates-mov-ecx-ecx-that-looks-useless/59482137#59482137", "title": "MSVC compiler generates mov ecx, ecx that looks useless", "body": "<p>That's an inefficient way to zero-extend ECX into RCX.  More efficient would be <code>mov</code> into a different register <a href=\"https://stackoverflow.com/questions/44169342/can-x86s-mov-really-be-free-why-cant-i-reproduce-this-at-all\">so mov-elimination could work</a>.</p>\n\n<p>Duplicates of:</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/11910501/why-did-gcc-generate-mov-eax-eax-and-what-does-it-mean\">Why did GCC generate mov %eax,%eax and what does it mean?</a></li>\n<li><a href=\"https://stackoverflow.com/questions/11177137/why-do-x86-64-instructions-on-32-bit-registers-zero-the-upper-part-of-the-full-6\">Why do x86-64 instructions on 32-bit registers zero the upper part of the full 64-bit register?</a></li>\n</ul>\n\n<p>But your specific test-case needs zero-extension for a slightly non-obvious reason:</p>\n\n<p>x86 only has conversion between FP and <em>signed</em> integers (until AVX512).  FP -> <code>unsigned int</code> is efficiently possible on x86-64 by doing FP -> <code>int64_t</code> and then taking the low 32 bits as <code>unsigned int</code>.</p>\n\n<p>This is what this sequence is doing:</p>\n\n<pre><code>vcvttsd2si  rcx,xmm1    ; double -&gt; int64_t, unsigned int result in ECX\nmov         ecx,ecx     ; zero-extend to promote unsigned to ptrdiff_t for indexing\nadd         rdx,rcx     ; 64-bit integer math on the zero-extended result\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 9039544, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34b9f5cf3fdb19e2d4b38647e6097756?s=128&d=identicon&r=PG&f=1", "display_name": "Acuion", "link": "https://stackoverflow.com/users/9039544/acuion"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 152, "favorite_count": 0, "closed_date": 1577311771, "accepted_answer_id": 59482137, "answer_count": 1, "score": 0, "last_activity_date": 1577317842, "creation_date": 1577310653, "last_edit_date": 1577311167, "question_id": 59482079, "link": "https://stackoverflow.com/questions/59482079/msvc-compiler-generates-mov-ecx-ecx-that-looks-useless", "closed_reason": "Duplicate", "title": "MSVC compiler generates mov ecx, ecx that looks useless", "body": "<p>I have some C++ code that is being compiled to the following assembly using MSVC compiler v14.24:</p>\n\n<pre><code>00007FF798252D4C  vmulsd      xmm1,xmm1,xmm7  \n00007FF798252D50  vcvttsd2si  rcx,xmm1  \n00007FF798252D55  vmulsd      xmm1,xmm7,mmword ptr [rbx+28h]  \n00007FF798252D5A  mov         ecx,ecx  \n00007FF798252D5C  imul        rdx,rcx,0BB8h  \n00007FF798252D63  vcvttsd2si  rcx,xmm1  \n00007FF798252D68  mov         ecx,ecx  \n00007FF798252D6A  add         rdx,rcx  \n00007FF798252D6D  add         rdx,rdx  \n00007FF798252D70  cmp         byte ptr [r14+rdx*8+8],0  \n00007FF798252D76  je          applyActionMovements+15Dh (07FF798252D8Dh)\n</code></pre>\n\n<p>As you can see, the compiler added two</p>\n\n<pre><code>mov         ecx,ecx\n</code></pre>\n\n<p>instructions that don't make any sense to me, because they move data from and to the same register.</p>\n\n<p>Is there something that I'm missing?</p>\n\n<hr>\n\n<p>Here is a small Godbolt reproducer: <a href=\"https://godbolt.org/z/UFo2qe\" rel=\"nofollow noreferrer\">https://godbolt.org/z/UFo2qe</a></p>\n\n<pre><code>int arr[4000][3000];\ninline int foo(double a, double b) {\n    return arr[static_cast&lt;unsigned int&gt;(a * 100)][static_cast&lt;unsigned int&gt;(b * 100)];\n}\n\nint bar(double a, double b) {\n    if (foo(a, b)) {\n        return 0;\n    }\n    return 1;\n}\n</code></pre>\n"}, {"tags": ["c++", "class", "operator-overloading"], "comments": [{"owner": {"reputation": 151, "user_id": 5895811, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1bed50a2eb82fc748c4b0062e517eec5?s=128&d=identicon&r=PG&f=1", "display_name": "TZof", "link": "https://stackoverflow.com/users/5895811/tzof"}, "edited": false, "score": 1, "creation_date": 1577310663, "post_id": 59482050, "comment_id": 105140573, "body": "please post some code that you tried."}, {"owner": {"reputation": 140851, "user_id": 1120273, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4cbcb185abce0204cf5ac705ba32d53a?s=128&d=identicon&r=PG", "display_name": "Dietmar K&#252;hl", "link": "https://stackoverflow.com/users/1120273/dietmar-k%c3%bchl"}, "edited": false, "score": 1, "creation_date": 1577310946, "post_id": 59482050, "comment_id": 105140628, "body": "I\u2019d recommend <i>not</i> even implementing a list structure: instead just use <code>std::list&lt;Human&gt;</code>. That assumes you actually need a list to start with. The default container should be <code>std::vector&lt;Human&gt;</code>."}], "answers": [{"tags": [], "owner": {"reputation": 7277, "user_id": 6205379, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/dPsLh.png?s=128&g=1", "display_name": "Timo", "link": "https://stackoverflow.com/users/6205379/timo"}, "is_accepted": false, "score": 2, "last_activity_date": 1577310595, "creation_date": 1577310595, "answer_id": 59482072, "question_id": 59482050, "link": "https://stackoverflow.com/questions/59482050/overloading-in-c-to-add-one-object-into-another/59482072#59482072", "title": "Overloading += in c++ to add one object into another", "body": "<p>If you really want to do this you can define the operator on namespace level:</p>\n\n<pre><code>list&amp; operator+=(list&amp; lhs, human const&amp; rhs)\n{\n    lhs.add(rhs);  // actually add human to the list\n    return lhs;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 334, "user_id": 12242570, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAR7XCYSSQ780SS3cqjLAJ4FCXLLz2vA7rfkdTw=k-s128", "display_name": "walid barakat", "link": "https://stackoverflow.com/users/12242570/walid-barakat"}, "is_accepted": false, "score": 0, "last_activity_date": 1577310702, "creation_date": 1577310702, "answer_id": 59482086, "question_id": 59482050, "link": "https://stackoverflow.com/questions/59482050/overloading-in-c-to-add-one-object-into-another/59482086#59482086", "title": "Overloading += in c++ to add one object into another", "body": "<p>you can see this <a href=\"https://stackoverflow.com/questions/29197977/operator-overload-to-add-different-c-class-object\">question</a> as a reference, you can define both of your classes and then define the \"add\" overloading operator of List Class later.</p>\n"}, {"comments": [{"owner": {"reputation": 15, "user_id": 10264000, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df37016ad058ba1a60c56884f0b1946f?s=128&d=identicon&r=PG&f=1", "display_name": "Una3", "link": "https://stackoverflow.com/users/10264000/una3"}, "edited": false, "score": 0, "creation_date": 1587391542, "post_id": 59482163, "comment_id": 108485773, "body": "Thank you very much!"}], "tags": [], "owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": true, "score": 0, "last_activity_date": 1577311500, "creation_date": 1577311500, "answer_id": 59482163, "question_id": 59482050, "link": "https://stackoverflow.com/questions/59482050/overloading-in-c-to-add-one-object-into-another/59482163#59482163", "title": "Overloading += in c++ to add one object into another", "body": "<p>Either declare the operator as a member function of the class <code>List</code> like</p>\n\n<pre><code>class List\n{\npublic:\n    List &amp; operator +=( const Human &amp;human )\n    {\n        // something like\n        // push_back( human );\n\n        return *this;\n    }\n//\u2026\n};\n</code></pre>\n\n<p>Or define it as a non class function like</p>\n\n<pre><code>List &amp; operator +=( List &amp;list, const Human &amp;human )\n{\n\n    // something like\n    // push_back( human );\n\n    return list;\n}\n</code></pre>\n\n<p>If the implementation of the operator requires to access non-public data members of the class <code>List</code> then the function should be a friend function of the class as for example</p>\n\n<pre><code>class List\n{\npublic:\n    friend List &amp; operator +=( List &amp;, const Human &amp; );\n//\u2026\n};  \n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 10264000, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df37016ad058ba1a60c56884f0b1946f?s=128&d=identicon&r=PG&f=1", "display_name": "Una3", "link": "https://stackoverflow.com/users/10264000/una3"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 109, "favorite_count": 0, "accepted_answer_id": 59482163, "answer_count": 3, "score": 0, "last_activity_date": 1577311500, "creation_date": 1577310360, "question_id": 59482050, "link": "https://stackoverflow.com/questions/59482050/overloading-in-c-to-add-one-object-into-another", "title": "Overloading += in c++ to add one object into another", "body": "<p>I have class Human, and a class List.How to overload operator +=, so i can do:\n  list+=human\nin that way i add one object of Human class to my list.</p>\n\n<p>Thank you.</p>\n"}, {"tags": ["c++", "r", "rcpp"], "comments": [{"owner": {"reputation": 140851, "user_id": 1120273, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4cbcb185abce0204cf5ac705ba32d53a?s=128&d=identicon&r=PG", "display_name": "Dietmar K&#252;hl", "link": "https://stackoverflow.com/users/1120273/dietmar-k%c3%bchl"}, "edited": false, "score": 0, "creation_date": 1577309261, "post_id": 59481917, "comment_id": 105140348, "body": "<code>xstrings[i]</code> is a <code>std::strings</code>. You try to initialize a <code>std::vector&lt;std::string&gt;</code> from it. That won\u2019t work. I don\u2019t know what you want to do here: either omit the element access or create a range with one element, e.g., using <code>... txt{ xstrings[i] }</code>."}, {"owner": {"reputation": 255, "user_id": 6849363, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-fRrzgETsKI4/AAAAAAAAAAI/AAAAAAAAACA/FPQhfNd_Tw8/photo.jpg?sz=128", "display_name": "Tanner Phillips", "link": "https://stackoverflow.com/users/6849363/tanner-phillips"}, "reply_to_user": {"reputation": 140851, "user_id": 1120273, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4cbcb185abce0204cf5ac705ba32d53a?s=128&d=identicon&r=PG", "display_name": "Dietmar K&#252;hl", "link": "https://stackoverflow.com/users/1120273/dietmar-k%c3%bchl"}, "edited": false, "score": 0, "creation_date": 1577309564, "post_id": 59481917, "comment_id": 105140395, "body": "So change it to this: <code>std::string txt { xstrings[i] };</code> ? I&#39;m trying to grab the ith element and save it as a string."}, {"owner": {"reputation": 140851, "user_id": 1120273, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4cbcb185abce0204cf5ac705ba32d53a?s=128&d=identicon&r=PG", "display_name": "Dietmar K&#252;hl", "link": "https://stackoverflow.com/users/1120273/dietmar-k%c3%bchl"}, "edited": false, "score": 0, "creation_date": 1577309836, "post_id": 59481917, "comment_id": 105140431, "body": "Should work although you can leave the initialization unchanged if you change the type. The main point was to create an <code>std::initializer_list&lt;std::string&gt;</code> to initialize a vector with just one element: <code>std::vector&lt;std::string&gt; txt{xstrings[i};</code>. What is needed will depend on the actual use."}, {"owner": {"reputation": 255, "user_id": 6849363, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-fRrzgETsKI4/AAAAAAAAAAI/AAAAAAAAACA/FPQhfNd_Tw8/photo.jpg?sz=128", "display_name": "Tanner Phillips", "link": "https://stackoverflow.com/users/6849363/tanner-phillips"}, "reply_to_user": {"reputation": 140851, "user_id": 1120273, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4cbcb185abce0204cf5ac705ba32d53a?s=128&d=identicon&r=PG", "display_name": "Dietmar K&#252;hl", "link": "https://stackoverflow.com/users/1120273/dietmar-k%c3%bchl"}, "edited": false, "score": 0, "creation_date": 1577310436, "post_id": 59481917, "comment_id": 105140529, "body": "Ah it compiled! Thank you!"}], "answers": [{"comments": [{"owner": {"reputation": 255, "user_id": 6849363, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-fRrzgETsKI4/AAAAAAAAAAI/AAAAAAAAACA/FPQhfNd_Tw8/photo.jpg?sz=128", "display_name": "Tanner Phillips", "link": "https://stackoverflow.com/users/6849363/tanner-phillips"}, "edited": false, "score": 0, "creation_date": 1577310443, "post_id": 59482036, "comment_id": 105140531, "body": "oops, R habit initializing from 1. Thanks."}], "tags": [], "owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": true, "score": 1, "last_activity_date": 1577310469, "last_edit_date": 1577310469, "creation_date": 1577310214, "answer_id": 59482036, "question_id": 59481917, "link": "https://stackoverflow.com/questions/59481917/error-converting-between-string-types-in-rcpp/59482036#59482036", "title": "Error converting between string types in Rcpp", "body": "<p>You declared the variable <code>xstrings</code> as a vector of strings.</p>\n\n<pre><code>std::vector&lt;std::string&gt; xstrings(x.size());\n</code></pre>\n\n<p>Then in this loop that by an unknown reason starts from 1 instead of 0 (and it seems can invoke undefined behavior when <code>i</code> is equal to <code>x.size()</code>)</p>\n\n<pre><code>for(i = 1; i&lt;=x.size(); i++)\n\n    {\n    std::vector&lt; std::string &gt; txt = xstrings[i];\n    //\n</code></pre>\n\n<p>you declared another vector of strings <code>txt</code> and are trying to initialize it with the object <code>xstrings[i];</code> that has the type <code>std;:string</code>. </p>\n\n<p>There is no such a non-explicit constructor in the standard container std;:vector. So the compiler issues an error.</p>\n\n<p>Instead you could write for example</p>\n\n<pre><code>    std::vector&lt; std::string &gt; txt( 1,  xstrings[i] );\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 56, "user_id": 5531133, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Ri4ely-OJtc/AAAAAAAAAAI/AAAAAAAAABI/w3GeGo5DzJM/photo.jpg?sz=128", "display_name": "hermit", "link": "https://stackoverflow.com/users/5531133/hermit"}, "is_accepted": false, "score": 0, "last_activity_date": 1577311304, "creation_date": 1577311304, "answer_id": 59482143, "question_id": 59481917, "link": "https://stackoverflow.com/questions/59481917/error-converting-between-string-types-in-rcpp/59482143#59482143", "title": "Error converting between string types in Rcpp", "body": "<p>The compiler is complaining because you are declaring a vector that can hold strings (i.e. txt) and trying to initialize it to a string (i.e. xstrings[i]). It'll probably also complain about the line:</p>\n\n<pre><code>std::vector&lt; std::string &gt; pat = ystrings[j];\n</code></pre>\n\n<p>Given that addOccurrences(...) checks a single sentence for a single pattern, shouldn't it be taking variables of type std::string as input parameters? This means it should be declared as follows:</p>\n\n<pre><code>int addOccurrences(const std::string &amp; txt, const std::string &amp; pat) \n{\n     // do stuff...\n}\n</code></pre>\n\n<p>The final loop inside freqMatrix could then be written as: </p>\n\n<pre><code>for(i = 1; i&lt;=x.size(); i++)\n{\n    for(j = 1; j&lt;=y.size(); j++)\n    {\n        matrx(i,j) = addOccurrences(xstrings[i], ystrings[j]);\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 255, "user_id": 6849363, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-fRrzgETsKI4/AAAAAAAAAAI/AAAAAAAAACA/FPQhfNd_Tw8/photo.jpg?sz=128", "display_name": "Tanner Phillips", "link": "https://stackoverflow.com/users/6849363/tanner-phillips"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "accepted_answer_id": 59482036, "answer_count": 2, "score": 2, "last_activity_date": 1577311304, "creation_date": 1577308665, "question_id": 59481917, "link": "https://stackoverflow.com/questions/59481917/error-converting-between-string-types-in-rcpp", "title": "Error converting between string types in Rcpp", "body": "<p>I'm new to using RCPP, and trying to write some code that essentially recreates a special case of the \"outer\" function in R. I have to vectors of strings, the first contains patterns, and the second contains sentences. I'm checking all sentences for all patterns, and attempting to return a matrix that is the number of times each pattern occurs in each sentence. </p>\n\n<p>I've made some progress (though I'm sure some of your will be horrified by my code):</p>\n\n<pre><code>\n\n#include &lt;Rcpp.h&gt;\n#include &lt;string.h&gt;\n#include &lt;string&gt;\n#include &lt;algorithm&gt;\nusing namespace Rcpp;\n// [[Rcpp::plugins(\"cpp11\")]]\n\nint addOccurrences(std::vector&lt; std::string &gt; &amp;txt, std::vector&lt; std::string &gt; &amp;pat) \n{ \n  int M = pat.size(); \n    int N = txt.size(); \n    int res = 0; \n\n    /* A loop to slide pat[] one by one */\n    for (int i = 0; i &lt;= N - M; i++) \n    {  \n        /* For current index i, check for  \n           pattern match */\n        int j; \n        for (j = 0; j &lt; M; j++) \n            if (txt[i+j] != pat[j]) \n                break; \n\n        // if pat[0...M-1] = txt[i, i+1, ...i+M-1] \n        if (j == M)   \n        { \n           res++; \n           j = 0; \n        } \n    } \n    return res; \n\n\n} \n\n\n//[[Rcpp::export]]\nNumericMatrix freqMatrix (Rcpp::StringVector x,Rcpp::StringVector y)\n{\n\n    Rcpp::NumericMatrix matrx(x.size(),y.size());\n    int i = 1;\n    int j = 1;\n\n\n\n    std::vector&lt;std::string&gt; xstrings(x.size());\n    int k;\n    for (k = 0; k &lt; x.size(); k++){\n        xstrings[k] = x(k);\n    }\n\n    std::vector&lt;std::string&gt; ystrings(y.size());\n    int l;\n    for (l = 0; l &lt; y.size(); l++){\n        ystrings[l] = y(l);\n    }\n\n\n\n\n    for(i = 1; i&lt;=x.size(); i++)\n        {\n        std::vector&lt; std::string &gt; txt = xstrings[i];\n\n        for(j = 1; j&lt;=y.size(); j++)\n            {\n            std::vector&lt; std::string &gt; pat = ystrings[j];\n            matrx(i,j) = addOccurrences(txt, pat);\n            j = j + 1;\n            }\n         i = i + 1;\n        }\nreturn matrx;\n}\n\n\n</code></pre>\n\n<p>I've gotten rid of most errors, but I'm getting stuck near the bottom. The error I'm getting says:</p>\n\n<pre><code>\"conversion from '__gnu_cxx::__alloc_traits&lt;std::allocator&lt;std::basic_string&lt;char&gt; &gt; &gt;::value_type {aka std::basic_string&lt;char&gt;}' to non-scalar type 'std::vector&lt;std::basic_string&lt;char&gt; &gt;' requested\n   std::vector&lt; std::string &gt; txt = xstrings[i];\"\n</code></pre>\n\n<p>I get the same error for the second conversion `ystrings[j]'</p>\n\n<p>I've tried several different ways to get this to work with both the 'std::vector' and 'Rcpp::StringVector', but I'm stumped.</p>\n"}, {"tags": ["c++", "windows", "winapi"], "comments": [{"owner": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "edited": false, "score": 1, "creation_date": 1577308860, "post_id": 59481858, "comment_id": 105140283, "body": "<code>GetProcessHandleCount()</code> tells you how many handles the process itself has opened (all types of kernel handles), not how many handles to your process other processes have opened."}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1577309032, "post_id": 59481858, "comment_id": 105140313, "body": "yes, this easy get count of opened handles to some process, but require native api. and need execute native code - so your code need be 64bit in x64 windows"}, {"owner": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "edited": false, "score": 0, "creation_date": 1577311313, "post_id": 59481858, "comment_id": 105140692, "body": "Every process has a object table that contains handle entries for NT executive objects in kernel space. These objects are instances of executive types (e.g. WindowStation, Desktop, Section, Job, Process, Thread, Event, and File). Note that User and GDI objects (e.g. window handles) are not executive objects, so they are not included in the handle count. The associated handle value is an opaque reference to the executive object, which is valid only in the associated process context. A handle entry also contains the access granted to the object and flags such as whether the handle can be closed."}, {"owner": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "edited": false, "score": 0, "creation_date": 1577312187, "post_id": 59481858, "comment_id": 105140819, "body": "In Windows 8.1+ with just the Windows API, it&#39;s possible to snapshot the handle table of a particular process via <a href=\"https://docs.microsoft.com/en-us/previous-versions/windows/desktop/proc_snap/overview-of-process-snapshotting\" rel=\"nofollow noreferrer\">process snapshotting</a>, from which you can count the number of handles the process has for a given process. However, getting a snapshot of the handle tables of all running processes in a single call requires the native NT API."}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1577359858, "post_id": 59481858, "comment_id": 105150285, "body": "what is sense in your task ? assume you got number open handles of your process - and what this give you ? this task can have sense only for some system-level tools, but here need not only number of handles, but list of processes, which open handle to process, access, etc"}, {"owner": {"reputation": 1, "user_id": 10967402, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b42aaaaf2c0f794fb801c86002cc0c0?s=128&d=identicon&r=PG&f=1", "display_name": "async", "link": "https://stackoverflow.com/users/10967402/async"}, "reply_to_user": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1577385816, "post_id": 59481858, "comment_id": 105158766, "body": "First of all, thanks for all the hints! @RbMm Actually, i was trying to find a way to prevent other processes from getting a handle to mine, so my idea was count the number of handles to my process exists and close my process if handleCount &gt; 0, but looks like there is not an easy way to accomplish this."}, {"owner": {"reputation": 1, "user_id": 10967402, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b42aaaaf2c0f794fb801c86002cc0c0?s=128&d=identicon&r=PG&f=1", "display_name": "async", "link": "https://stackoverflow.com/users/10967402/async"}, "reply_to_user": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "edited": false, "score": 0, "creation_date": 1577386271, "post_id": 59481858, "comment_id": 105158912, "body": "@ErykSun So i would have to snapshot the process list, iterate over it and check if the nth process has a handle to mine?"}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1577389726, "post_id": 59481858, "comment_id": 105159814, "body": "@async - here <a href=\"https://pastebin.com/9d8UB1TV\" rel=\"nofollow noreferrer\">correct code</a> for get all opened handles to your process. but note that always will be several opened to your process handles"}, {"owner": {"reputation": 1, "user_id": 10967402, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b42aaaaf2c0f794fb801c86002cc0c0?s=128&d=identicon&r=PG&f=1", "display_name": "async", "link": "https://stackoverflow.com/users/10967402/async"}, "reply_to_user": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1577397431, "post_id": 59481858, "comment_id": 105161686, "body": "@RbMm Thanks, but why there will always be several handles opened to my process?"}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1577397857, "post_id": 59481858, "comment_id": 105161779, "body": "@async - because system processes, say <i>csrss.exe</i> will be have your process handles. execute my code and dump result (process id which have opened your process) if want better understand"}, {"owner": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "edited": false, "score": 0, "creation_date": 1577410120, "post_id": 59481858, "comment_id": 105164012, "body": "@async, to do this with the Windows API, yes, you would have to call <code>PssCaptureSnapshot</code> individually on every process of interest, which would be inherently prone to race conditions."}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1577437506, "post_id": 59481858, "comment_id": 105169605, "body": "In other words, what you are <i>really</i> trying to do is re-implement <a href=\"https://docs.microsoft.com/en-us/windows/win32/secauthz/access-control-lists\" rel=\"nofollow noreferrer\">access control lists</a>."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 10967402, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b42aaaaf2c0f794fb801c86002cc0c0?s=128&d=identicon&r=PG&f=1", "display_name": "async", "link": "https://stackoverflow.com/users/10967402/async"}, "edited": false, "score": 0, "creation_date": 1577386615, "post_id": 59482525, "comment_id": 105159019, "body": "I was expecting 1 because my second console app opened a handle to the first one."}, {"owner": {"reputation": 1035, "user_id": 10504230, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Wfkm8.jpg?s=128&g=1", "display_name": "Arush Agarampur", "link": "https://stackoverflow.com/users/10504230/arush-agarampur"}, "reply_to_user": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1577478385, "post_id": 59482525, "comment_id": 105183917, "body": "@RbMm - I hope this is not too off topic, but do you know why <code>NtQuerySystemInformation</code> returns an incorrect buffer size and why we need to loop <code>RtlAllocateHeap</code> and <code>RtlFreeHeap</code>?"}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1577480686, "post_id": 59482525, "comment_id": 105184590, "body": "<code>NtQuerySystemInformation</code> return incorrect buffer size (<code>STATUS_INFO_LENGTH_MISMATCH</code>) if you passed too small buffer to call. really - we can not know how many memory need for store all handles information. api return <b>hint</b> - how many memory need for store all information. but after you allocate such memory and call again - can be new handles opened in system and new buffer again will be too small. so really we need call this api in loop, until we not pass big enough buffer. on practice will be no more 2-3 itterations"}, {"owner": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "edited": false, "score": 1, "creation_date": 1577482155, "post_id": 59482525, "comment_id": 105184954, "body": "<code>GetCurrentProcess</code> returns <code>(HANDLE)-1</code>, not <code>(DWORD)-1</code>. The values are the same in a 32-bit process, but <code>HANDLE</code> is 8 bytes in a 64-bit process. It has to be the same size as a pointer. While Kernel and User/GDI handle values are 32-bit, even in 64-bit Windows, some handles are actually pointers. For example, the &quot;find&quot; handle from <code>FindFirstFileExW</code> is a pointer to a record that contains a file handle, a buffer and state for use with <code>NtQueryDirectoryFileEx</code>. The <code>FindClose</code> routine closes the file handle and deallocates the buffer and find record."}, {"owner": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "edited": false, "score": 0, "creation_date": 1577482864, "post_id": 59482525, "comment_id": 105185130, "body": "Do not call <code>NtQuerySystemInformation</code>: <code>SystemHandleInformation</code> to merely get the handle count for a single process. <code>GetProcessHandleCount</code> (i.e. <code>NtQueryInformationProcess</code>: <code>ProcessHandleCount</code>) is the correct API function for this case."}, {"owner": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "edited": false, "score": 0, "creation_date": 1577489806, "post_id": 59482525, "comment_id": 105186689, "body": "Well, by my reading, this is not right: &quot;If you want the real count of the number of HANDLE&#39;s your process has, use NtQuerySystemInformation and loop for open HANDLE&#39;s with your process&#39;s ID.&quot; You seem to be positioning this as a more accurate approach than <code>GetProcessHandleCount</code> for the purpose of counting the number of executive handles allocated in the current process. It is not. On the other hand, <code>NtQuerySystemInformation</code> is required for a race-free tally of handles allocated <i>for</i> the current process object across all processes in the system, as RbMm has demonstrated in a code sample."}], "tags": [], "owner": {"reputation": 1035, "user_id": 10504230, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Wfkm8.jpg?s=128&g=1", "display_name": "Arush Agarampur", "link": "https://stackoverflow.com/users/10504230/arush-agarampur"}, "is_accepted": false, "score": 0, "last_activity_date": 1577483006, "last_edit_date": 1577483006, "creation_date": 1577316235, "answer_id": 59482525, "question_id": 59481858, "link": "https://stackoverflow.com/questions/59481858/getting-the-number-of-handles-to-a-specific-process/59482525#59482525", "title": "Getting the number of handles to a specific process", "body": "<p>First, <code>GetProcessHandleCount</code> returns the number of <code>HANDLE</code>s that the calling process has opened. Second, it is slightly unreliable.</p>\n\n<p><code>GetProcessHandleCount</code> will return the number of <code>HANDLE</code>s AFTER the object table has been initialized by the kernel and your process has started up. For different versions of Windows, the number of already-existing handles will vary, depending on how the kernel is designed. Some of these handles are handles to known DLL directories, <code>HYPORVISOR_SHARED_DATA</code>, etc. Once all the 'base' handles are created and the process's <code>main</code> is called, <code>GetProcessHandleCount</code> returns the number of opened handles from that point.</p>\n\n<p>So the number of actual <code>HANDLE</code>s in the process's object table is slightly off using <code>GetProcessHandleCount</code>. The reason why you get something above 1 is because even after the kernel has initialized the object table, the <code>CRT</code> will open files and memory sections, which return <code>HANDLE</code>s</p>\n\n<p>I think you were expecting 1 because of the call to <code>GetCurrentProcess().</code> But that returns <code>(HANDLE)-1</code>, which is not a real <code>HANDLE.</code></p>\n\n<p>If you want the real count of the number of <code>HANDLE's</code> your process has, use <code>NtQuerySystemInformation</code> and loop for open <code>HANDLE's</code> with your process's ID. (Side note, <code>GetProcessHandleCount</code> calls <code>NtQueryInformationProcess</code>.)</p>\n"}, {"comments": [{"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1577359151, "post_id": 59486703, "comment_id": 105150065, "body": "your solution <b>very not optimal</b>. you need open handle to self process <b>before</b> enumerate system handles. and first find self open handle, from it - we get address of process object. and then search for handles with this address. any <code>NtQueryObject</code> not need at all"}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1577359505, "post_id": 59486703, "comment_id": 105150177, "body": "and implementation also very not optimal. say in call <code>NtQuerySystemInformation</code> - last parameter - must not be 0 but give you hint - how many memory need for store information. need use this instead <code>handleInfoSize *= 2</code> - <code>realloc</code> - this is bad solution. need use free/malloc only here. realloc really <b>copy</b> memory context to new location, which absolute not need in concrete case. etc"}, {"owner": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "edited": false, "score": 0, "creation_date": 1577409422, "post_id": 59486703, "comment_id": 105163899, "body": "The OP wants to know whether another process has a handle to the current process, not to dump the handle table of a given process."}, {"owner": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "edited": false, "score": 0, "creation_date": 1577409511, "post_id": 59486703, "comment_id": 105163917, "body": "This is weird: <code>GrantedAccess == 0x0012019f</code> (i.e. <code>FILE_GENERIC_READ | FILE_GENERIC_WRITE</code>). It attempts to avoid a potentially blocking name query for file objects. The file type implements a custom <code>ObjectNameInformation</code> routine that&#39;s synchronous, which is problematic for a synchronous-mode file in which the internal lock is already acquired. But this problem can occur with nearly <i>any access</i> (e.g. an inbound pipe opened with generic read access could be blocked in a read). The only way to address it reliably is by spawning a query thread that gets killed or reset after a given timeout."}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "reply_to_user": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "edited": false, "score": 0, "creation_date": 1577483328, "post_id": 59486703, "comment_id": 105185251, "body": "@ErykSun - really we not need here all this and have problems query file names with synchronous io and pending request. much more simply - <a href=\"https://pastebin.com/9d8UB1TV\" rel=\"nofollow noreferrer\">pastebin.com/9d8UB1TV</a>"}, {"owner": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "reply_to_user": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 1, "creation_date": 1577489225, "post_id": 59486703, "comment_id": 105186565, "body": "@RbMm, I know, that&#39;s right, but your code is doing what the OP <i>asked for</i>, as opposed to dumping the whole object table of a given process. My comment above was regarding the implementation of the latter (unrequested behavior) and the false assumption that only objects, and in particular file objects, with <code>0x0012019f</code> granted access are problematic with regard to a name query. I&#39;ve seen this passed around online for years. People keep repeating it, apparently without thinking about how nonsensical it is."}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "reply_to_user": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "edited": false, "score": 0, "creation_date": 1577523388, "post_id": 59486703, "comment_id": 105191020, "body": "@ErykSun - sorry for unrelated question, but what you think about <a href=\"https://community.osr.com/discussion/291804/when-will-be-queued-a-packet-to-the-i-o-completion-port\" rel=\"nofollow noreferrer\">this</a> ? question about how exactly determinate when be or not IOCP notification for asynchronous I/O (when file binded to IOCP)"}, {"owner": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "reply_to_user": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1577656116, "post_id": 59486703, "comment_id": 105218176, "body": "@RbMm, in the thread at the OSR forum, I think you&#39;re correct, but the experts there know more than I do on this subject. ISTM that for a fast lock-control request, the I/O manager should only queue a minipacket to the port if the routine succeeds with a non-error status. Consider that when the fast path isn&#39;t possible, the request takes the long way with an I/O request packet, in which case the lock-control routine may immediately complete the request with an error and return this synchronously instead of pending the request, and thus the I/O completion APC won&#39;t queue the packet to the port."}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "reply_to_user": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "edited": false, "score": 0, "creation_date": 1577657224, "post_id": 59486703, "comment_id": 105218424, "body": "@ErykSun i random discovery error with NtLockFile (STATUS_LOCK_NOT_GRANTED with callback) initially i looked only wrk src code and understand why this. and decide that the same problem must be and with IOCTL if we use asynchronous file and driver implement FastIoDeviceControl and return TRUE from it with NT_ERROR status. this already more serrious. but when i test  IOCTL in win10 - no error. so i look for binary code (win7,8.1,10 ) and understand that error in IopXxxControlFile was fixed in 8.1 how minimum. but ms forget fix NtLockFile. so bug is only here. easy for fix, but still exist"}], "tags": [], "owner": {"reputation": 4915, "user_id": 11128312, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ufn85.jpg?s=128&g=1", "display_name": "Strive Sun", "link": "https://stackoverflow.com/users/11128312/strive-sun"}, "is_accepted": false, "score": 0, "last_activity_date": 1577354548, "last_edit_date": 1577354548, "creation_date": 1577354158, "answer_id": 59486703, "question_id": 59481858, "link": "https://stackoverflow.com/questions/59481858/getting-the-number-of-handles-to-a-specific-process/59486703#59486703", "title": "Getting the number of handles to a specific process", "body": "<p>The method of enumerating handle has been given in the comments. All I have done is to provide a code reference.</p>\n\n<p>You may need to traverse all process names and print the required pid.</p>\n\n<p><strong>Traversal process:</strong></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;Windows.h&gt;\n#include &lt;winternl.h&gt;\n#include &lt;cstringt.h&gt;\n#include &lt;winternl.h&gt;\n#include &lt;string&gt;\n#include &lt;wchar.h&gt;\n\n#pragma comment(lib,\"ntdll.lib\") // Need to link with ntdll.lib import library. You can find the ntdll.lib from the Windows DDK.\n\ntypedef struct _SYSTEM_PROCESS_INFO\n{\n    ULONG                   NextEntryOffset;\n    ULONG                   NumberOfThreads;\n    LARGE_INTEGER           Reserved[3];\n    LARGE_INTEGER           CreateTime;\n    LARGE_INTEGER           UserTime;\n    LARGE_INTEGER           KernelTime;\n    UNICODE_STRING          ImageName;\n    ULONG                   BasePriority;\n    HANDLE                  ProcessId;\n    HANDLE                  InheritedFromProcessId;\n}SYSTEM_PROCESS_INFO, *PSYSTEM_PROCESS_INFO;\n\n\n\nint main()\n{\n    NTSTATUS status;\n    PVOID buffer;\n    PSYSTEM_PROCESS_INFO spi;\n\n    buffer = VirtualAlloc(NULL, 1024 * 1024, MEM_COMMIT | MEM_RESERVE, PAGE_READWRITE); // We need to allocate a large buffer because the process list can be large.\n\n    if (!buffer)\n    {\n        printf(\"\\nError: Unable to allocate memory for process list (%d)\\n\", GetLastError());\n        return -1;\n    }\n\n    printf(\"\\nProcess list allocated at address %#x\\n\", buffer);\n    spi = (PSYSTEM_PROCESS_INFO)buffer;\n\n    if (!NT_SUCCESS(status = NtQuerySystemInformation(SystemProcessInformation, spi, 1024 * 1024, NULL)))\n    {\n        printf(\"\\nError: Unable to query process list (%#x)\\n\", status);\n\n        VirtualFree(buffer, 0, MEM_RELEASE);\n        return -1;\n    }\n\n    while (spi-&gt;NextEntryOffset) // Loop over the list until we reach the last entry.\n    {\n        const wchar_t* str = L\"Test.exe\"; //The process name you specified\n        spi = (PSYSTEM_PROCESS_INFO)((LPBYTE)spi + spi-&gt;NextEntryOffset); // Calculate the address of the next entry.\n        if (wcscmp(spi-&gt;ImageName.Buffer, str) == 0)\n        {\n            printf(\"\\nProcess name: %ws | Process ID: %d\\n\", spi-&gt;ImageName.Buffer, spi-&gt;ProcessId); // Display process information.            \n        }\n    }\n\n\n    printf(\"\\nPress any key to continue.\\n\");\n    getchar();\n\n    VirtualFree(buffer, 0, MEM_RELEASE); // Free the allocated buffer.\n\n    return 0;\n}\n</code></pre>\n\n<p>Then according to the given PID, use NT API to enumerate the handles.</p>\n\n<p><strong>Enumerate handles:</strong></p>\n\n<pre><code>#ifndef UNICODE\n#define UNICODE\n#endif\n\n#include &lt;windows.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;iostream&gt;\n#include &lt;wchar.h&gt;\n#include &lt;stdlib.h&gt;\n\n#pragma comment(lib,\"ntdll.lib\")\n\n#define NT_SUCCESS(x) ((x) &gt;= 0)\n#define STATUS_INFO_LENGTH_MISMATCH 0xc0000004\n\n#define SystemHandleInformation 16\n#define ObjectBasicInformation 0\n#define ObjectNameInformation 1\n#define ObjectTypeInformation 2\n\nstatic int num = 0;\n\n\ntypedef NTSTATUS(NTAPI *_NtQuerySystemInformation)(\n    ULONG SystemInformationClass,\n    PVOID SystemInformation,\n    ULONG SystemInformationLength,\n    PULONG ReturnLength\n    );\ntypedef NTSTATUS(NTAPI *_NtDuplicateObject)(\n    HANDLE SourceProcessHandle,\n    HANDLE SourceHandle,\n    HANDLE TargetProcessHandle,\n    PHANDLE TargetHandle,\n    ACCESS_MASK DesiredAccess,\n    ULONG Attributes,\n    ULONG Options\n    );\ntypedef NTSTATUS(NTAPI *_NtQueryObject)(\n    HANDLE ObjectHandle,\n    ULONG ObjectInformationClass,\n    PVOID ObjectInformation,\n    ULONG ObjectInformationLength,\n    PULONG ReturnLength\n    );\n\ntypedef struct _UNICODE_STRING\n{\n    USHORT Length;\n    USHORT MaximumLength;\n    PWSTR Buffer;\n} UNICODE_STRING, *PUNICODE_STRING;\n\ntypedef struct _SYSTEM_HANDLE\n{\n    ULONG ProcessId;\n    BYTE ObjectTypeNumber;\n    BYTE Flags;\n    USHORT Handle;\n    PVOID Object;\n    ACCESS_MASK GrantedAccess;\n} SYSTEM_HANDLE, *PSYSTEM_HANDLE;\n\ntypedef struct _SYSTEM_HANDLE_INFORMATION\n{\n    ULONG HandleCount;\n    SYSTEM_HANDLE Handles[1];\n} SYSTEM_HANDLE_INFORMATION, *PSYSTEM_HANDLE_INFORMATION;\n\ntypedef enum _POOL_TYPE\n{\n    NonPagedPool,\n    PagedPool,\n    NonPagedPoolMustSucceed,\n    DontUseThisType,\n    NonPagedPoolCacheAligned,\n    PagedPoolCacheAligned,\n    NonPagedPoolCacheAlignedMustS\n} POOL_TYPE, *PPOOL_TYPE;\n\ntypedef struct _OBJECT_TYPE_INFORMATION\n{\n    UNICODE_STRING Name;\n    ULONG TotalNumberOfObjects;\n    ULONG TotalNumberOfHandles;\n    ULONG TotalPagedPoolUsage;\n    ULONG TotalNonPagedPoolUsage;\n    ULONG TotalNamePoolUsage;\n    ULONG TotalHandleTableUsage;\n    ULONG HighWaterNumberOfObjects;\n    ULONG HighWaterNumberOfHandles;\n    ULONG HighWaterPagedPoolUsage;\n    ULONG HighWaterNonPagedPoolUsage;\n    ULONG HighWaterNamePoolUsage;\n    ULONG HighWaterHandleTableUsage;\n    ULONG InvalidAttributes;\n    GENERIC_MAPPING GenericMapping;\n    ULONG ValidAccess;\n    BOOLEAN SecurityRequired;\n    BOOLEAN MaintainHandleCount;\n    USHORT MaintainTypeList;\n    POOL_TYPE PoolType;\n    ULONG PagedPoolUsage;\n    ULONG NonPagedPoolUsage;\n} OBJECT_TYPE_INFORMATION, *POBJECT_TYPE_INFORMATION;\n\ntypedef struct _SYSTEM_PROCESS_INFO\n{\n    ULONG                   NextEntryOffset;\n    ULONG                   NumberOfThreads;\n    LARGE_INTEGER           Reserved[3];\n    LARGE_INTEGER           CreateTime;\n    LARGE_INTEGER           UserTime;\n    LARGE_INTEGER           KernelTime;\n    UNICODE_STRING          ImageName;\n    ULONG                   BasePriority;\n    HANDLE                  ProcessId;\n    HANDLE                  InheritedFromProcessId;\n}SYSTEM_PROCESS_INFO, *PSYSTEM_PROCESS_INFO;\n\nPVOID GetLibraryProcAddress(PSTR LibraryName, PSTR ProcName)\n{\n    return GetProcAddress(GetModuleHandleA(LibraryName), ProcName);\n}\n\nint wmain(int argc, WCHAR *argv[])\n{\n    _NtQuerySystemInformation NtQuerySystemInformation =\n        (_NtQuerySystemInformation)GetLibraryProcAddress((PSTR)\"ntdll.dll\", (PSTR)\"NtQuerySystemInformation\");\n    _NtDuplicateObject NtDuplicateObject =\n        (_NtDuplicateObject)GetLibraryProcAddress((PSTR)\"ntdll.dll\", (PSTR) \"NtDuplicateObject\");\n    _NtQueryObject NtQueryObject =\n        (_NtQueryObject)GetLibraryProcAddress((PSTR)\"ntdll.dll\", (PSTR)\"NtQueryObject\");\n    NTSTATUS status;\n    PSYSTEM_HANDLE_INFORMATION handleInfo;\n    ULONG handleInfoSize = 0x10000;\n    ULONG pid;\n    HANDLE processHandle;\n    ULONG i;\n\n    pid = 10228; //PID you get\n\n    if (!(processHandle = OpenProcess(PROCESS_DUP_HANDLE, FALSE, pid)))\n    {\n        printf(\"Could not open PID %d! (Don't try to open a system process.)\\n\", pid);\n        return 1;\n    }\n\n    handleInfo = (PSYSTEM_HANDLE_INFORMATION)malloc(handleInfoSize);\n\n    /* NtQuerySystemInformation won't give us the correct buffer size,\n       so we guess by doubling the buffer size. */\n    while ((status = NtQuerySystemInformation(\n        SystemHandleInformation,\n        handleInfo,\n        handleInfoSize,\n        NULL\n    )) == STATUS_INFO_LENGTH_MISMATCH)\n        handleInfo = (PSYSTEM_HANDLE_INFORMATION)realloc(handleInfo, handleInfoSize *= 2);\n\n    /* NtQuerySystemInformation stopped giving us STATUS_INFO_LENGTH_MISMATCH. */\n    if (!NT_SUCCESS(status))\n    {\n        printf(\"NtQuerySystemInformation failed!\\n\");\n        return 1;\n    }\n\n    for (i = 0; i &lt; handleInfo-&gt;HandleCount; i++)\n    {\n        SYSTEM_HANDLE handle = handleInfo-&gt;Handles[i];\n        HANDLE dupHandle = NULL;\n        POBJECT_TYPE_INFORMATION objectTypeInfo;\n        PVOID objectNameInfo;\n        UNICODE_STRING objectName;\n        ULONG returnLength;\n\n        /* Check if this handle belongs to the PID the user specified. */\n        if (handle.ProcessId != pid)\n            continue;\n\n        /* Duplicate the handle so we can query it. */\n        if (!NT_SUCCESS(NtDuplicateObject(\n            processHandle,\n            (HANDLE)handle.Handle,\n            GetCurrentProcess(),\n            &amp;dupHandle,\n            0,\n            0,\n            0\n        )))\n        {\n            printf(\"[%#x] Error!\\n\", handle.Handle);\n            num++;\n            continue;\n        }\n\n        /* Query the object type. */\n        objectTypeInfo = (POBJECT_TYPE_INFORMATION)malloc(0x1000);\n        if (!NT_SUCCESS(NtQueryObject(\n            dupHandle,\n            ObjectTypeInformation,\n            objectTypeInfo,\n            0x1000,\n            NULL\n        )))\n        {       \n            printf(\"[%#x] Error!\\n\", handle.Handle);\n            num++;\n            CloseHandle(dupHandle);\n            continue;\n        }\n\n        /* Query the object name (unless it has an access of\n           0x0012019f, on which NtQueryObject could hang. */\n        if (handle.GrantedAccess == 0x0012019f)\n        {\n            /* We have the type, so display that. */\n            printf(\n                \"[%#x] %.*S: (did not get name)\\n\",\n                handle.Handle,\n                objectTypeInfo-&gt;Name.Length / 2,\n                objectTypeInfo-&gt;Name.Buffer\n            );\n            num++;\n            free(objectTypeInfo);\n            CloseHandle(dupHandle);\n            continue;\n        }\n\n        objectNameInfo = malloc(0x1000);\n        if (!NT_SUCCESS(NtQueryObject(\n            dupHandle,\n            ObjectNameInformation,\n            objectNameInfo,\n            0x1000,\n            &amp;returnLength\n        )))\n        {\n            /* Reallocate the buffer and try again. */\n            objectNameInfo = realloc(objectNameInfo, returnLength);\n            if (!NT_SUCCESS(NtQueryObject(\n                dupHandle,\n                ObjectNameInformation,\n                objectNameInfo,\n                returnLength,\n                NULL\n            )))\n            {\n                /* We have the type name, so just display that. */\n                printf(\n                    \"[%#x] %.*S: (could not get name)\\n\",\n                    handle.Handle,\n                    objectTypeInfo-&gt;Name.Length / 2,\n                    objectTypeInfo-&gt;Name.Buffer\n                );\n                num++;\n                free(objectTypeInfo);\n                free(objectNameInfo);\n                CloseHandle(dupHandle);\n                continue;\n            }\n        }\n\n        /* Cast our buffer into an UNICODE_STRING. */\n        objectName = *(PUNICODE_STRING)objectNameInfo;\n\n        /* Print the information! */\n        if (objectName.Length)\n        {\n            /* The object has a name. */\n            printf(\n                \"[%#x] %.*S: %.*S\\n\",\n                handle.Handle,\n                objectTypeInfo-&gt;Name.Length / 2,\n                objectTypeInfo-&gt;Name.Buffer,\n                objectName.Length / 2,\n                objectName.Buffer\n            );\n            num++;\n        }\n        else\n        {\n            /* Print something else. */\n            printf(\n                \"[%#x] %.*S: (unnamed)\\n\",\n                handle.Handle,\n                objectTypeInfo-&gt;Name.Length / 2,\n                objectTypeInfo-&gt;Name.Buffer\n            );\n            num++;\n        }\n\n        free(objectTypeInfo);\n        free(objectNameInfo);\n        CloseHandle(dupHandle);\n    }\n\n    free(handleInfo);\n    CloseHandle(processHandle);\n    printf(\"Enumerate handles:  %d\\n\", num);\n    getchar();\n    return 0;\n}\n</code></pre>\n\n<p>I've tested the two code samples and they can work well.</p>\n\n<p>Useful reference links for you:</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/46384048/enumerate-handles\">Enumerate handles</a></li>\n<li><a href=\"https://stackoverflow.com/questions/733384/how-to-enumerate-process-handles\">How to enumerate process' handles?</a></li>\n</ul>\n"}], "owner": {"reputation": 1, "user_id": 10967402, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b42aaaaf2c0f794fb801c86002cc0c0?s=128&d=identicon&r=PG&f=1", "display_name": "async", "link": "https://stackoverflow.com/users/10967402/async"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1544, "favorite_count": 0, "answer_count": 2, "score": -3, "last_activity_date": 1577483006, "creation_date": 1577307992, "question_id": 59481858, "link": "https://stackoverflow.com/questions/59481858/getting-the-number-of-handles-to-a-specific-process", "title": "Getting the number of handles to a specific process", "body": "<p>Not sure if it's possible to get such information, but i was messing with the WinAPI docs trying to figure out a way to get the number of opened handles to my process. First i created a console application that retrieves the number of handles the current process has, then i created another console app that gets a handle to the first app with an OpenProcess call. The code used in the first application is the following:</p>\n\n<pre><code>auto hProcess = GetCurrentProcess();\nwhile (true)\n{\n    DWORD Handles = 0;\n    if (GetProcessHandleCount(hProcess, &amp;Handles))\n    {\n        std::cout &lt;&lt; Handles &lt;&lt; '\\n';\n    }\n    Sleep(2000);\n}\n</code></pre>\n\n<p>I was expecting the first application to print 1, but i got 50 when i ran in my Windows 10 PC, and 58 when i ran it with elevated privilegies. Also, when i ran the code above in a virtual machine with Windows 7, 11 handles were printed. What is going on?</p>\n"}, {"tags": ["c++", "std"], "comments": [{"owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "edited": false, "score": 0, "creation_date": 1577305143, "post_id": 59481533, "comment_id": 105139674, "body": "A deeper question is &quot;why does <code>time_t time(time_t*)</code> even take that pointer parameter at all?&quot;."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1577305179, "post_id": 59481533, "comment_id": 105139682, "body": "Is it worth it? <code>time(nullptr)</code> Vs <code>time()</code> - who cares? How often do you call that function in any real-life program? Once? Twice? It simply doesn&#39;t matter."}, {"owner": {"reputation": 9018, "user_id": 5105949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbd9d7ecb21c40f7a4256317fd80cecc?s=128&d=identicon&r=PG&f=1", "display_name": "churill", "link": "https://stackoverflow.com/users/5105949/churill"}, "edited": false, "score": 1, "creation_date": 1577305379, "post_id": 59481533, "comment_id": 105139713, "body": "It&#39;s probably inherited from C, which has no function overloading, then kept for compatibility and now probably no one cares anymore, because C++ has <a href=\"https://en.cppreference.com/w/cpp/header/chrono\" rel=\"nofollow noreferrer\">std::chrono</a> now. But it&#39;s impossible to say for sure."}, {"owner": {"reputation": 9434, "user_id": 528720, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZpqMk.png?s=128&g=1", "display_name": "&#214;&#246; Tiib", "link": "https://stackoverflow.com/users/528720/%c3%96%c3%b6-tiib"}, "edited": false, "score": 1, "creation_date": 1577305434, "post_id": 59481533, "comment_id": 105139721, "body": "C does not allow overloads and C++ did not want std::time from &lt;ctime&gt; to have different interface from time from &lt;time.h&gt; since both are valid in C++."}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1577305460, "post_id": 59481533, "comment_id": 105139724, "body": "You can simply write a function that calls that function so yes, it can be done. But it is part of the inherited <code>C</code> library which the <code>C++</code> standard likes to avoid making too many changes to."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1577305647, "post_id": 59481533, "comment_id": 105139756, "body": "Here&#39;s my (largely speculative) answer about why <code>time()</code> both takes a pointer argument and returns a value: <a href=\"https://stackoverflow.com/a/9945669/827263\">stackoverflow.com/a/9945669/827263</a>"}, {"owner": {"reputation": 81087, "user_id": 104458, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/cc46b8a10ecb92e61aaeb1efe436a0c8?s=128&d=identicon&r=PG", "display_name": "selbie", "link": "https://stackoverflow.com/users/104458/selbie"}, "edited": false, "score": 2, "creation_date": 1577306055, "post_id": 59481533, "comment_id": 105139830, "body": "You can fix this yourself: <code>inline time_t goodtime() {return ::time(nullptr);}</code>"}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1577315071, "post_id": 59481533, "comment_id": 105141250, "body": "I&#39;ve updated <a href=\"https://stackoverflow.com/a/9945669/827263\">the answer</a> I linked to above, confirming my hypothesis by looking at old (early 1970s) UNIX sources."}, {"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 0, "creation_date": 1577315736, "post_id": 59481533, "comment_id": 105141320, "body": "If you dig into the C library, you&#39;ll see other functions that accept a pointer, only to return it (either returning the pointer itself, or a value).   The most commonly known example are string functions (<code>strcpy()</code>, <code>strcat()</code>) which return their first argument to permit chaining of function calls in a single statement e.g. <code>strcat(a, strcat(b, strcpy(d, &quot;Hello&quot;)))</code> rather forcing writing of three distinct statements.    There was considerable advocacy (reflected in some old textbooks) that the single-statement form was &quot;cleaner&quot; than the multi-statement form."}], "answers": [{"comments": [{"owner": {"reputation": 9434, "user_id": 528720, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZpqMk.png?s=128&g=1", "display_name": "&#214;&#246; Tiib", "link": "https://stackoverflow.com/users/528720/%c3%96%c3%b6-tiib"}, "edited": false, "score": 2, "creation_date": 1577305887, "post_id": 59481641, "comment_id": 105139803, "body": "Also difference between time and std::time would cause lot of confused Stack Overflow posts of noobs who write using namespace std, as first thing in their code. So I&#39;m against such proposal."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 1, "creation_date": 1577307745, "post_id": 59481641, "comment_id": 105140096, "body": "<i>\u201cowned\u201d by C</i> This is a non-issue (see std::abs for example)."}, {"owner": {"reputation": 140851, "user_id": 1120273, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4cbcb185abce0204cf5ac705ba32d53a?s=128&d=identicon&r=PG", "display_name": "Dietmar K&#252;hl", "link": "https://stackoverflow.com/users/1120273/dietmar-k%c3%bchl"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1577307921, "post_id": 59481641, "comment_id": 105140124, "body": "@n.&#39;pronouns&#39;m.: well, the function signature was inherited and nobody felt a need to mess with it. Sure, the C++ committee could choose to overload it but unlike other functions there isn\u2019t any big need. <code>abs()</code> was overloaded to avoid accidental conversions and to avoid the need to call the respect <code>float</code> or <code>long double</code> versions. There aren\u2019t any traps with <code>time()</code>."}], "tags": [], "owner": {"reputation": 140851, "user_id": 1120273, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4cbcb185abce0204cf5ac705ba32d53a?s=128&d=identicon&r=PG", "display_name": "Dietmar K&#252;hl", "link": "https://stackoverflow.com/users/1120273/dietmar-k%c3%bchl"}, "is_accepted": true, "score": 5, "last_activity_date": 1577305728, "creation_date": 1577305728, "answer_id": 59481641, "question_id": 59481533, "link": "https://stackoverflow.com/questions/59481533/is-there-a-reason-why-c-does-not-overload-time-function-so-we-do-not-need-to-w/59481641#59481641", "title": "Is there a reason why C++ does not overload time function so we do not need to write NULL?", "body": "<p>The simple answer is that <code>time(time_t)</code> is \u201cowned\u201d by C rather than by C++: the standard C++ committee doesn\u2019t interfere with the C library unless there are reasons why it is necessary. With C++ you should get a better interface using <code>&lt;chrono&gt;</code> functions.</p>\n\n<p>Also: I don\u2019t think there was a proposal to overload this function. Without a proposal nothing is going to happen and I doubt anybody sufficiently eager to write such a proposal and get it through the process.</p>\n"}], "owner": {"reputation": 23279, "user_id": 700825, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/6aea6e2f57f2a7b1cd6870375fbdc42f?s=128&d=identicon&r=PG", "display_name": "NoSenseEtAl", "link": "https://stackoverflow.com/users/700825/nosenseetal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 148, "favorite_count": 0, "accepted_answer_id": 59481641, "answer_count": 1, "score": 5, "last_activity_date": 1577305788, "creation_date": 1577304720, "question_id": 59481533, "link": "https://stackoverflow.com/questions/59481533/is-there-a-reason-why-c-does-not-overload-time-function-so-we-do-not-need-to-w", "title": "Is there a reason why C++ does not overload time function so we do not need to write NULL?", "body": "<p>This is not about me being lazy to write </p>\n\n<pre><code>auto t = time(nullptr);\n</code></pre>\n\n<p>instead of hypothetical</p>\n\n<pre><code>auto t = time();\n</code></pre>\n\n<p>I am mostly interested if this is possible, and if it is(AFAIK it is easily implementable since C++ supports function overloading) why it has not been done.</p>\n\n<p>I know obvious answers like: use <code>&lt;chrono&gt;</code>, nobody wrote proposal, but I wonder if there is a different reason.</p>\n\n<p>My best guess is that nobody wanted to mess with C library functions.</p>\n\n<p>P.S. I understand that some might want to close this question as too vague, but I feel that it is possible to give relatively objective answer to this question.</p>\n"}, {"tags": ["c++", "date", "validation", "user-input"], "comments": [{"owner": {"reputation": 154, "user_id": 6875705, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/8dIkX.png?s=128&g=1", "display_name": "Ibrahim.Sluma", "link": "https://stackoverflow.com/users/6875705/ibrahim-sluma"}, "edited": false, "score": 0, "creation_date": 1577304480, "post_id": 59481486, "comment_id": 105139559, "body": "Can u post full code , so we can see how u init the month varable and help u !"}], "answers": [{"tags": [], "owner": {"reputation": 625, "user_id": 9746972, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f07fd1f54e2531a95387ff29b44ce59?s=128&d=identicon&r=PG&f=1", "display_name": "dranjohn", "link": "https://stackoverflow.com/users/9746972/dranjohn"}, "is_accepted": false, "score": 6, "last_activity_date": 1577306171, "last_edit_date": 1577306171, "creation_date": 1577304726, "answer_id": 59481534, "question_id": 59481486, "link": "https://stackoverflow.com/questions/59481486/how-to-validate-user-input-for-month-entry-in-date/59481534#59481534", "title": "How to validate user input for month entry in date?", "body": "<p>You're checking if the month is not \"Jan\" OR not \"Feb\" OR etc. Since the month can't be all possible months at once, your <code>if</code> condition will always be true.</p>\n\n<p>Replace the <code>||</code> in your condition with <code>&amp;&amp;</code>, and it will work correctly.</p>\n"}], "owner": {"reputation": 31, "user_id": 12521534, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-eYddzw8e-Uk/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reHvI9ICJG9zMo4jPujIisMYK8uDw/photo.jpg?sz=128", "display_name": "Ejik", "link": "https://stackoverflow.com/users/12521534/ejik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 122, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1577331134, "creation_date": 1577304167, "last_edit_date": 1577331134, "question_id": 59481486, "link": "https://stackoverflow.com/questions/59481486/how-to-validate-user-input-for-month-entry-in-date", "title": "How to validate user input for month entry in date?", "body": "<p>I am writing a program to validate user input for date entry with format 01 Jan 1900. I have written code to validate the leap year and day limit for each month but I have been unable to validate the text entry for each month.</p>\n\n<p>This is the part of the code that is not working yet; the validation of the string entry such that any user input apart from Jan, Feb, Mar, Apr.......Dec will throw the error \"Wrong entry, please enter valid date\"</p>\n\n<pre><code>  if (( month != \"Jan\" || month != \"Feb\" || month != \"Mar\" || month != \"Apr\" \n     || month != \"May\" || month != \"Jun\" || month != \"Jul\" || month != \"Aug\" \n     || month != \"Sep\" || month != \"Oct\" || month != \"Nov\" || month != \"Dec\"))    \n  {\n      std::cout &lt;&lt; \"Wrong entry, please enter valid date.\" &lt;&lt; std::endl;\n  }\n  else\n  {\n      std::cout &lt;&lt; day &lt;&lt; \" \" &lt;&lt; month &lt;&lt; \" \" &lt;&lt; year;\n  }\n</code></pre>\n"}, {"tags": ["c++", "serialization", "member-pointers"], "comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1577303739, "post_id": 59481438, "comment_id": 105139429, "body": "There&#39;s no standard / built-in serialisation functionality in C++. You have to write your own or use a pre-written library"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1577303900, "post_id": 59481438, "comment_id": 105139458, "body": "In C++ you have to explicitly cast to and from <code>void*</code>. Also in C++ you can&#39;t use unions for type-punning."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1577304055, "post_id": 59481438, "comment_id": 105139495, "body": "Note: You cannot save pointers. They are not stable across multiple runs of your program."}, {"owner": {"reputation": 1115, "user_id": 1410908, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/f8e012725d982ab24841ba6445fb0503?s=128&d=identicon&r=PG", "display_name": "Chris", "link": "https://stackoverflow.com/users/1410908/chris"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1577304064, "post_id": 59481438, "comment_id": 105139497, "body": "@JesperJuhl I know, that is why I&#39;m trying to write a simple system that does that."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1577304501, "post_id": 59481438, "comment_id": 105139562, "body": "@Chris So, you are effectively trying to recreate existing simple serialisation libraries. Why? Why not just use what already exists?"}, {"owner": {"reputation": 1115, "user_id": 1410908, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/f8e012725d982ab24841ba6445fb0503?s=128&d=identicon&r=PG", "display_name": "Chris", "link": "https://stackoverflow.com/users/1410908/chris"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1577305490, "post_id": 59481438, "comment_id": 105139731, "body": "@JesperJuhl It&#39;s for embedded systems and I&#39;m sure I&#39;l run in incompatibility issues. Plus, it&#39;s good for educational purposes. I learned a lot this way in C#. If every time I needed a functionality I&#39;d have resulted to plugins ... And I&#39;m not writing a library, it&#39;s just a simple functionality that I want to understand how to approach it in C++"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1577305624, "post_id": 59481438, "comment_id": 105139754, "body": "@Chris Writing a simple functionality Vs using a library - mostly &quot;same same&quot;. You are writing the same thing as what&#39;s in that library. Just more effort."}, {"owner": {"reputation": 9427, "user_id": 7703024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94e363e0e11695395e04f814233b6274?s=128&d=identicon&r=PG", "display_name": "super", "link": "https://stackoverflow.com/users/7703024/super"}, "edited": false, "score": 0, "creation_date": 1577306699, "post_id": 59481438, "comment_id": 105139927, "body": "A simple version of magic_get is fairly simple to implement. That way you can achieve this without needing the footprint at all."}], "answers": [{"tags": [], "owner": {"reputation": 22091, "user_id": 5684257, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea5090cde8ea066a1fda67ed52dd5084?s=128&d=identicon&r=PG&f=1", "display_name": "HTNW", "link": "https://stackoverflow.com/users/5684257/htnw"}, "is_accepted": false, "score": 1, "last_activity_date": 1577308518, "creation_date": 1577308518, "answer_id": 59481907, "question_id": 59481438, "link": "https://stackoverflow.com/questions/59481438/serialization-of-simple-structures-without-external-libraries/59481907#59481907", "title": "Serialization of simple structures without external libraries", "body": "<p>Don't erase types; that is, don't cast your pointers to <code>void*</code>. If you preserve the types of the pointers through templates, you can choose the deserialization functions directly off their types, and thus you won't even have to specify them. Indeed, you already have a bug where you have marked the second member of <code>Message2</code> <code>SerInt</code> when it is a <code>String</code>. If you work off the actual types instead of forcing the user to duplicate them, you avoid such errors. Also, the common superclass is completely unnecessary.</p>\n\n<pre><code>template&lt;typename T, typename... Parts&gt;\nstruct MessageFootprint {\n    std::tuple&lt;Parts T::*...&gt; parts;\n    MessageFootprint(Parts T::*... parts) : parts(parts...) { }\n};\ntemplate&lt;typename T, typename... Parts&gt;\nMessageFootprint(Parts T::*...) -&gt; MessageFootprint&lt;T, Parts...&gt;; // deduction guide\n\n// e.g.\nstruct Message1 {\n    int prop1;\n    int prop2;\n};\ninline MessageFootprint footprint1(&amp;Message1::prop1, &amp;Message1::prop2);\n// deduction guide allows type of footprint1 to be inferred from constructor arguments\n// it is actually MessageFootprint&lt;Message1, int, int&gt;\n// if you are on a C++ standard old enough to not have deduction guides,\n// you will have to manually specify them\n// this is still better than letting the types be erased, because now the compiler\n// will complain if you get it wrong\n\n// e.g. if I replicate your mistake\nstruct Message2 {\n    int prop1;\n    std::string prop2;\n};\ninline MessageFootprint&lt;Message2, int, int&gt; footprint2(&amp;Message2::prop1, &amp;Message2::prop2);\n// This does not go through because    ^^^ is wrong\n</code></pre>\n\n<p>Serialization is probably best handled with overloading. For each <code>Part T::*</code> in a <code>MessageFootprint&lt;T, Part...&gt;</code>, extract a <code>Part&amp;</code> from the <code>T</code> and call out to an overloaded function that decides what to do based on <code>Part</code>:</p>\n\n<pre><code>// I have no idea what serial port communication stuff you're doing\n// but this gets the point across\nvoid SerializeAtom(int i) { std::cout &lt;&lt; \"I\" &lt;&lt; i; }\nvoid SerializeAtom(std::string const &amp;s) { std::cout &lt;&lt; \"S\" &lt;&lt; s.size() &lt;&lt; \"S\" &lt;&lt; s; }\n\ntemplate&lt;typename T, typename... Parts&gt;\nvoid SerializeFootprint(MessageFootprint&lt;T, Parts...&gt; footprint, T const &amp;x) {\n    // calls the provided functor with the things in the tuple\n    std::apply(\n        // this lambda is a template with its own Parts2... template parameter pack\n        // and the argument is really Parts2... parts\n        // we then do a fold expression over parts\n        // we need std::apply because there's no simpler way to get the actual\n        // values out (std::get fails when there are duplicates)\n        [&amp;x](auto... parts) { (SerializeAtom(x.*parts), ...); },\n        footprint.parts);\n}\n// Trying to write ^^^ before C++17 would probably be a nightmare\n</code></pre>\n\n<p>This system is extensible: to add a new \"atomic\" type, just overload <code>SerializeAtom</code>. No need to manage an <code>enum</code> or whatnot. Deserialization would mean a family of <code>DeserializeAtom</code> overloads that write into the given reference, and a <code>DeserializeFootprint</code> which would probably look exactly like <code>SerializeFootprint</code>.</p>\n\n<p><a href=\"https://godbolt.org/z/eYbX2j\" rel=\"nofollow noreferrer\">Godbolt demonstration</a></p>\n"}, {"tags": [], "owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "is_accepted": false, "score": 0, "last_activity_date": 1577310283, "last_edit_date": 1577310283, "creation_date": 1577309495, "answer_id": 59481981, "question_id": 59481438, "link": "https://stackoverflow.com/questions/59481438/serialization-of-simple-structures-without-external-libraries/59481981#59481981", "title": "Serialization of simple structures without external libraries", "body": "<p>I've developed a serialization system that uses buffering.  </p>\n\n<p>Each object inherits from an interface that declares functions for:<br>\n1. Returning the size of the object on the stream.<br>\n2. Storing the object members to a buffer.<br>\n3. Loading the object members from a buffer.</p>\n\n<p>This system is based on the fact that structs and classes can contain padding and that the class/struct is most knowledgeable about its members.  For example, a multibyte integer may be Big Endian in the buffer, and the object needs to convert to Little Endian.  This system also accommodates different methods for writing variable length text fields.  </p>\n\n<pre><code>class Binary_Stream_Interface:\n{\n  public:  \n      // Returns the size, in uint8_t units, that the object occupies in\n      // a buffer (stream), packed.\n      virtual size_t    size_on_stream() const = 0; \n\n      // Loads the class members from a buffer, pointed to by p_buffer.\n      // The p_buffer pointer will be incremented after loading the object.\n      virtual void      load_from_buffer(uint8_t* &amp;  p_buffer) = 0;\n\n      // Stores the class members to a buffer, pointed to by p_buffer.\n      // The p_buffer pointer will be incremented after loading the object.\n      virtual void      store_to_buffer(uint8_t * &amp;  p_buffer) const = 0;\n};\n</code></pre>\n\n<p>To serialize (write) an object:<br>\n1. Call size_on_stream() to determine the buffer size needed.<br>\n2. Allocate the buffer.<br>\n3. Call store_to_buffer to store the object into the buffer.<br>\n4. Write the buffer to the stream, using <code>std::ostream::write</code>.<br>\n5. Delete the buffer.   </p>\n\n<p>Reading an object:<br>\n1. Call size_on_stream() to determine the buffer size needed.<br>\n2. Allocate the buffer.<br>\n3. Read the data from the stream into the buffer, using <code>std::istream::read</code> and the size needed.<br>\n4. Call the load_from_buffer() method.<br>\n5. Delete the buffer.  </p>\n\n<p>Implementation is left as an exercise for the OP.  </p>\n\n<p>Note:  Templates can be used for common POD and <code>std:string</code> to make everything more uniform.  </p>\n\n<p><strong>Edit 1: Example</strong>  </p>\n\n<pre><code>struct Student\n: public Binary_Stream_Interface\n{\n     std::string name;\n     unsigned int id;\n\n     size_t size_on_stream() const\n     {\n         size_t stream_size = sizeof(id) + sizeof(int) + name.length();\n         return stream_size;\n     }\n\n     void load_from_buffer(uint8_t* &amp; p_buffer)\n     {\n         // Read the string size.\n         unsigned int length = *((unsigned int *)(p_buffer));\n         p_buffer += sizeof(length);\n\n         // Load the string text from the buffer\n         name = std::string((char *) p_buffer, length);\n         p_buffer += length;\n\n         id = *((unsigned int *) p_buffer);\n         p_buffer += sizeof(id);\n    }\n\n    void store_to_buffer(uint8_t * &amp; p_buffer) const\n    {\n        unsigned int length = name.length();\n        *((unsigned int *) p_buffer) = length;\n        p_buffer += sizeof(unsigned int);\n\n        p_char_buffer = (char *) p_buffer;\n        std::copy(name.begin(), name.end(), p_char_buffer);\n        p_buffer += length;\n\n        *((unsigned int *) p_buffer) = id;\n        p_buffer += sizeof(unsigned int);\n    }\n};\n</code></pre>\n"}], "owner": {"reputation": 1115, "user_id": 1410908, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/f8e012725d982ab24841ba6445fb0503?s=128&d=identicon&r=PG", "display_name": "Chris", "link": "https://stackoverflow.com/users/1410908/chris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 127, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1577310283, "creation_date": 1577303596, "question_id": 59481438, "link": "https://stackoverflow.com/questions/59481438/serialization-of-simple-structures-without-external-libraries", "title": "Serialization of simple structures without external libraries", "body": "<p>I'm trying to serialize simple single level classes like the ones bellow, without external libraries like boost, and without having to implement serializer function for every class. Even though I have so few classes that I could easily implement a serializer for each one, for future reference, I would like to have at hand a simple solution that scales well.</p>\n\n<p>The requirement for each class to be serialized is that its members are only serializable types, and an array of member pointers is defined, so that at serialization the members can be iterated regardless of which class is passed.</p>\n\n<p>The problem is that the compilation fails because of the missing cast where the member pointer is dereferenced, obviously:</p>\n\n<blockquote>\n  <p>esp32.ino: 122:35: error: 'footprint.MessageFootprint&lt;1>::Members[i]'\n  cannot be used as a member pointer, since it is of type 'void*</p>\n</blockquote>\n\n<p>I don't know how to store the member pointers in a iterable collection or how to avoid the <code>void*</code> cast.\nThat's my goal. I want to iterate over class members at serialization having a single generic serialization function.\nI don't know what to do.</p>\n\n<pre><code>enum SerializableDataTypes {\n    SerInt,\n    SerFloat,\n    SerString,\n    SerIntArray\n};\n\ntemplate &lt;int N&gt;\nstruct MessageFootprint {\n    SerializableDataTypes DataTypes[N];\n    void* Members[N];\n};\n\ntemplate&lt;typename T, typename R&gt;\nvoid* void_cast(R(T::*m))\n{\n    union\n    {\n        R(T::*pm);\n        void* p;\n    };\n    pm = m;\n    return p;\n}\n\nclass ControlMessage{};\n\n// first structure to be serialized\nclass Message1 : public ControlMessage {\npublic:\n    int prop1;\n    int prop2;\n};\nconst int Message1MemberCount = 2;\nconst MessageFootprint&lt;Message1MemberCount&gt; Message1FootPrint = { { SerInt, SerInt }, {void_cast(&amp;Message1::prop1), void_cast(&amp;Message1::prop2)} };\n\n// second structure to be serialized\nclass Message2 : public ControlMessage {\npublic:\n    int prop1;\n    String prop2;\n};\nconst int Message2MemberCount = 2;\nconst MessageFootprint&lt;Message2MemberCount&gt; Message2FootPrint = { { SerInt, SerInt }, {void_cast(&amp;Message2::prop1), void_cast(&amp;Message2::prop2)} };\n\ntemplate&lt;int N&gt;\nvoid SerializeMessage(MessageFootprint&lt;N&gt; footprint, ControlMessage message) {\n    for (int i = 0; i &lt; N; i++) {\n        if (footprint.DataTypes[i] == SerInt) {\n            // serialization code here based on data type\n            // for demonstration purposes it's only written in the serial port\n            logLine(String(i));\n            Serial.println(*((int*)(message.*(footprint.Members[i]))));\n        }\n    }\n}\n\nvoid main() {\n    // usage example\n    Message1 msg = Message1();\n    msg.prop1 = 1;\n    msg.prop2 = 2;\n    SerializeMessage(Message1FootPrint, msg);\n}\n</code></pre>\n"}, {"tags": ["c++", "cmake", "codeblocks"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1577304054, "post_id": 59481427, "comment_id": 105139494, "body": "It would be better if you could show us a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> of a simple example project where you have problems, and include the <code>CMakeLists.txt</code> file as well as the errors or other messages you get when running the <code>cmake</code> command and building the program."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1577304200, "post_id": 59481427, "comment_id": 105139516, "body": "<code>target_link_libraries( ... )</code>"}, {"owner": {"reputation": 9, "user_id": 9785039, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/F4hOE.png?s=128&g=1", "display_name": "M2Paint", "link": "https://stackoverflow.com/users/9785039/m2paint"}, "edited": false, "score": 0, "creation_date": 1577304610, "post_id": 59481427, "comment_id": 105139579, "body": "I&#39;m sorry about that I included my most recent attempt and showed what my project structure looked like. I&#39;m still new to stackoverflow I&#39;m sorry"}], "answers": [{"tags": [], "owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "is_accepted": false, "score": 3, "last_activity_date": 1577306138, "creation_date": 1577306138, "answer_id": 59481679, "question_id": 59481427, "link": "https://stackoverflow.com/questions/59481427/whats-the-easiest-way-i-can-include-link-libraries-with-cmake/59481679#59481679", "title": "What&#39;s the easiest way I can include &amp; link libraries with CMake?", "body": "<p>The command <code>link_libraries</code> affects only on the executable/libraries <strong>created after</strong> the command call. This is explicitly stated in the <a href=\"https://cmake.org/cmake/help/v3.16/command/link_libraries.html\" rel=\"nofollow noreferrer\">documentation</a>:</p>\n\n<blockquote>\n  <p>Specify libraries or flags to use when linking any targets created <strong>later</strong> in the current directory or <strong>below</strong> by commands such as <code>add_executable()</code> or <code>add_library()</code>.</p>\n</blockquote>\n\n<p>Your executable <code>Platformer</code> is created <em>before</em> the <code>link_libraries</code> call, so it is not linked actually.</p>\n\n<p>You need either to swap calls to <code>add_executable</code> and <code>link_libraries</code>:</p>\n\n<pre><code>link_libraries(${RAYLIB})\nadd_executable(Platformer ${SOURCES})\n</code></pre>\n\n<p>or use <code>target_link_libraries</code> instead of <code>link_libraries</code></p>\n\n<pre><code>add_executable(Platformer ${SOURCES})\ntarget_link_libraries(Platformer ${RAYLIB})\n</code></pre>\n\n<p>(in the latter case the order is not reversed: <code>target_link_libraries</code> requires an already created target as the first argument).</p>\n\n<hr>\n\n<p>Note, that <code>target_link_libraries</code> is generally preferred over <code>link_libraries</code> call as it produces the project in more structured manner.</p>\n"}, {"tags": [], "owner": {"reputation": 1244, "user_id": 606961, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/V8mtj.png?s=128&g=1", "display_name": "cardiff space man", "link": "https://stackoverflow.com/users/606961/cardiff-space-man"}, "is_accepted": false, "score": 0, "last_activity_date": 1577410294, "creation_date": 1577410294, "answer_id": 59495074, "question_id": 59481427, "link": "https://stackoverflow.com/questions/59481427/whats-the-easiest-way-i-can-include-link-libraries-with-cmake/59495074#59495074", "title": "What&#39;s the easiest way I can include &amp; link libraries with CMake?", "body": "<p>If you plan to have multiple executables that ALL use RAYLIB then move the link_libraries line up before the SOURCES i.e. after the definition of RAYLIB, because its effect is any executable defined afterwards. Otherwise use target_link_libraries for each target that needs it.</p>\n\n<p>I'm really just echoing @Tsyvarev in different words, but I couldn't think of a way to state my thoughts as a comment.</p>\n"}], "owner": {"reputation": 9, "user_id": 9785039, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/F4hOE.png?s=128&g=1", "display_name": "M2Paint", "link": "https://stackoverflow.com/users/9785039/m2paint"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 253, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1577410294, "creation_date": 1577303522, "last_edit_date": 1577304570, "question_id": 59481427, "link": "https://stackoverflow.com/questions/59481427/whats-the-easiest-way-i-can-include-link-libraries-with-cmake", "title": "What&#39;s the easiest way I can include &amp; link libraries with CMake?", "body": "<p>Is there anyway to simply just add search directories for the compiler and linker and add linker settings similar to what you'd do with code::blocks?</p>\n\n<p><a href=\"https://i.stack.imgur.com/nkktW.png\" rel=\"nofollow noreferrer\">code::blocks compiler search directory example</a></p>\n\n<p><a href=\"https://i.stack.imgur.com/3lRe5.png\" rel=\"nofollow noreferrer\">code::blocks linker search directory example</a></p>\n\n<p><a href=\"https://i.stack.imgur.com/kFsBY.png\" rel=\"nofollow noreferrer\">code::blocks linker settings example</a></p>\n\n<p>If code::blocks wasn't outdated and lacked things like decent code completion and linting, I wouldn't even use cmake. But this is apparently the best option if I want to use an editor like visual studio code or sublime text 3.</p>\n\n<p>I just can't figure out how to simply do include_directories and link_libraries without cmake fussing at me.</p>\n\n<p>Edit: here was my most recent attempt and the closes I've got it to working.</p>\n\n<pre><code>cmake_minimum_required(VERSION 3.0)\nproject(Platformer)\n\ninclude_directories(\n    libraries/raylib/include\n)\n\nset(\n    RAYLIB\n    ${PROJECT_SOURCE_DIR}/libraries/raylib/lib/libraylib.dll.a\n)\n\nset(SOURCES\n    main.cpp\n)\n\nadd_executable(Platformer ${SOURCES})\nlink_libraries(${RAYLIB})\n</code></pre>\n\n<p>this just gives me a bunch of undefined references</p>\n\n<p><a href=\"https://i.stack.imgur.com/uxRfy.png\" rel=\"nofollow noreferrer\">this is what my project structure looks like</a></p>\n"}, {"tags": ["c++", "function", "pointers", "multidimensional-array", "dynamic-memory-allocation"], "comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 4, "creation_date": 1577303081, "post_id": 59481373, "comment_id": 105139339, "body": "<code>int** arr = new int* [sizeY];</code> -&gt; <code>std::vector&lt;std::vector&lt;int&gt;&gt; arr(sizeX, std::vector&lt;int&gt;(sizeY))</code>."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1577303149, "post_id": 59481373, "comment_id": 105139351, "body": "The <code>sizeof</code> of a pointer is the size of the pointer itself, not what it might point to."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1577303175, "post_id": 59481373, "comment_id": 105139353, "body": "<code>sizeof (ar)&#47; sizeof (ar[0])</code> is actually <code>sizeof (int**)&#47; sizeof (int*)</code> so probably 1."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 2, "creation_date": 1577303187, "post_id": 59481373, "comment_id": 105139355, "body": "Stop using C-style arrays. Use <code>std::array</code> or <code>std::vector</code> instead, so you operate on objects that <i>know</i> their <code>.size()</code>, rather than dumb C arrays that decay to pointers and lose all information."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1577303381, "post_id": 59481373, "comment_id": 105139382, "body": "Also stop with the manual memory management (<code>new</code>/<code>delete</code>). Use containers or smart pointers. It&#39;s not the 1990&#39;s any more.."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1577303668, "post_id": 59481373, "comment_id": 105139418, "body": "<a href=\"https://stackoverflow.com/a/2076668/4581301\">Simple and effective matrix class</a>. Add getters for <code>mRows</code> and <code>mCols</code> and you&#39;re good to go."}, {"owner": {"reputation": 55, "user_id": 11203968, "user_type": "registered", "profile_image": "https://graph.facebook.com/315280116054277/picture?type=large", "display_name": "Em Rul", "link": "https://stackoverflow.com/users/11203968/em-rul"}, "edited": false, "score": 0, "creation_date": 1577303703, "post_id": 59481373, "comment_id": 105139423, "body": "Jesper Juhl, I jumped to C++ from C two weeks ago. Should I always use std array or vector from now on and  forget about all thing in C, what is the best way?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1577303837, "post_id": 59481373, "comment_id": 105139452, "body": "Don&#39;t forget the C Array, but reserve its use for edge cases, building blocks in more complicated structures, or really simple stuff where its drawbacks can&#39;t hurt you."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1577304702, "post_id": 59481373, "comment_id": 105139599, "body": "Side note: The guiding idioms of C++ are significantly different from those of C. Quite a few years ago I added C++ to the programming tools I used and treated it too much like C for a couple years. I&#39;m still finding and fixing bits of code from that era. I recommend keeping this period of your life as short as possible by getting some reference materials from the <a href=\"https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list\">Intermediate and Best Practices  sections</a> that focus more on the ideology than the nuts and bolts and teach yourself to think in C++."}, {"owner": {"reputation": 4915, "user_id": 10686048, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bffd06d00a80b9b69e83f561ee5a392?s=128&d=identicon&r=PG&f=1", "display_name": "ChrisMM", "link": "https://stackoverflow.com/users/10686048/chrismm"}, "edited": false, "score": 0, "creation_date": 1577320001, "post_id": 59481373, "comment_id": 105141814, "body": "Does this answer your question? <a href=\"https://stackoverflow.com/questions/492384/how-to-find-the-sizeof-a-pointer-pointing-to-an-array\">How to find the &#39;sizeof&#39; (a pointer pointing to an array)?</a>"}], "answers": [{"tags": [], "owner": {"reputation": 140851, "user_id": 1120273, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4cbcb185abce0204cf5ac705ba32d53a?s=128&d=identicon&r=PG", "display_name": "Dietmar K&#252;hl", "link": "https://stackoverflow.com/users/1120273/dietmar-k%c3%bchl"}, "is_accepted": false, "score": 1, "last_activity_date": 1577305325, "last_edit_date": 1577305325, "creation_date": 1577304998, "answer_id": 59481560, "question_id": 59481373, "link": "https://stackoverflow.com/questions/59481373/how-can-i-find-the-size-of-a-matrix-which-passed-to-function/59481560#59481560", "title": "How can I find the size of a matrix which passed to function?", "body": "<p>Just sum the allocations you are making for a reasonable estimate:</p>\n\n<ul>\n<li>The outer array: <code>sizeY * sizeof(int*)</code>.</li>\n<li>The inner arrays: <code>sizeY * sizeX * sizeof(int)</code></li>\n</ul>\n\n<p>Of course, the size calculations you got in <code>IsMagicSquare()</code> won\u2019t work: <code>sizeof</code> operates on the types rather than the actual allocated memory. That information is lost and can\u2019t be recovered from the pointers. You are best off to use, e.g., a <code>std::vector&lt;std::vector&lt;int&gt;&gt;</code>. That deals with automatic memory allocation and it tracks the sizes of the structure.</p>\n"}], "owner": {"reputation": 55, "user_id": 11203968, "user_type": "registered", "profile_image": "https://graph.facebook.com/315280116054277/picture?type=large", "display_name": "Em Rul", "link": "https://stackoverflow.com/users/11203968/em-rul"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1577336935, "creation_date": 1577302960, "last_edit_date": 1577336935, "question_id": 59481373, "link": "https://stackoverflow.com/questions/59481373/how-can-i-find-the-size-of-a-matrix-which-passed-to-function", "title": "How can I find the size of a matrix which passed to function?", "body": "<p>In this C++ code sizeof (ar) doesn't help me to find cols and rows variables and always gives me the same wrong cols and rows.\nHow can I find the size of the matrix without passing sizeX and sizeY variables to the IsMagicSquare(arr) function? Can you help me to understand this problem and find a way to solve it?                                                                                          </p>\n\n<pre><code>int main()\n{\n    int sizeX, sizeY;\n    cout &lt;&lt; \"Size of Matrix:\";\n    cin &gt;&gt; sizeX &gt;&gt; sizeY;\n\n    int** arr = new int* [sizeY];\n    for (int i = 0; i &lt; sizeY; ++i)\n    {\n        arr[i] = new int[sizeX];\n    }\n\n    cout &lt;&lt; \"Elements of the Matrix:\";\n    for (int i = 0; i &lt; sizeX; i++)\n        for (int j = 0; j &lt; sizeY; j++)\n            cin &gt;&gt; arr[i][j];\n\n    if (IsMagicSquare(arr))\n    {\n        for (int i = 0; i &lt; sizeX; i++)\n        {\n            cout &lt;&lt; \"\\n\";\n            for (int j = 0; j &lt; sizeY; j++)\n                cout &lt;&lt; arr[i][j];\n        }\n    }\n    else\n    {\n        for (int i = 0; i &lt; sizeY; i++)\n        {\n            delete[] arr[i];\n        }\n        delete[] arr;\n    }\n\n\n    return 0;\n}\n\nbool IsMagicSquare(int** ar)\n{\n    int rows = sizeof (ar)/ sizeof (ar[0]);\n    int cols = sizeof (ar[0]) / sizeof(int); \n    cout &lt;&lt; rows &lt;&lt; cols;\n    if (rows == cols)\n    {\n        int* ver = new int[rows]();\n        int* hor = new int[cols]();\n        int cross0=0;\n        int cross1=0;\n\n        for (int i = 0; i &lt; rows; i++)\n        {\n            for (int j = 0; j &lt; cols; j++)\n            {\n                hor[i] += ar[i][j];\n                ver[j] += ar[i][j];\n                if (i == j)\n                    cross0 += ar[i][j];\n                else if ((i+j) == cols)\n                    cross1 += ar[i][j];\n            }\n        }\n        if (cross0 != cross1)\n            return false;\n        else\n        {\n            for (int i = 0; i &lt; rows; i++)\n                if ((cross0 != ver[i]) || (cross1 != hor[i]))\n                    return false;\n        }\n    }\n    else\n        return false;\n\n    return true;\n}\n</code></pre>\n"}, {"tags": ["c++", "multiplication", "addition"], "comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 2, "creation_date": 1577302612, "post_id": 59481312, "comment_id": 105139271, "body": "<a href=\"https://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html\" rel=\"nofollow noreferrer\">What Every Computer Scientist Should Know About Floating-Point Arithmetic</a>"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1577310667, "post_id": 59481312, "comment_id": 105140574, "body": "Do you get the same results when using integers?"}], "owner": {"reputation": 137, "user_id": 10305478, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15817466e8f0f2862a11d5eb1eca4468?s=128&d=identicon&r=PG&f=1", "display_name": "mike", "link": "https://stackoverflow.com/users/10305478/mike"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 43, "favorite_count": 0, "closed_date": 1577302476, "answer_count": 0, "score": 0, "last_activity_date": 1577302621, "creation_date": 1577302342, "last_edit_date": 1577302621, "question_id": 59481312, "link": "https://stackoverflow.com/questions/59481312/is-c-addition-more-error-prone-compared-to-multiplication-cant-explain-discr", "closed_reason": "Duplicate", "title": "Is C++ addition more error prone compared to multiplication? Can&#39;t explain discrepancy", "body": "<p>I have noticed a strange problem in C++ where when I add something together by \"n\" times it does not give the same output as multiplying by \"n\". Multiplying by \"n\" gives a better output. Adding by \"n\" times introduces more error. </p>\n\n<p>For example, with the code below, recalculating length with a for loop of additions (lengthAdditionOutput) introduces greater error than by multiplication (recalculatedLength).</p>\n\n<pre><code>    //==================================\n    DBG(\"original length: \" &lt;&lt; length);\n    //==================================\n\nfloat distancePerIncrement = length / samplePeriod;\n\nint periodInteger = floor(samplePeriod);\nfloat periodRemainder = samplePeriod - periodInteger;\n\nfloat recalculatedLength = periodInteger * distancePerIncrement + (periodRemainder * distancePerIncrement);\n\n    //==================================\n    DBG(\"multiplied length: \" &lt;&lt;  recalculatedLength &lt;&lt; \" difference: \" &lt;&lt; recalculatedLength - length);\n    //==================================\n\nlengthAdditionOutput = 0.f;\n\nfor (int i = 0; i &lt; periodInteger; i++) {\n    lengthAdditionOutput = lengthAdditionOutput + distancePerIncrement;\n}\nlengthAdditionOutput = lengthAdditionOutput + (periodRemainder * distancePerIncrement);\n\n    //==================================\n    DBG(\"added length: \" &lt;&lt; lengthAdditionOutput &lt;&lt; \" difference: \" &lt;&lt; lengthAdditionOutput - length);\n    //==================================\n</code></pre>\n\n<p>The debug output will be for example:</p>\n\n<pre><code>original length: 0.931824 \nmultiplied length: 0.931824 difference: -5.96046e-08\nadded length: 0.93183 difference: 5.60284e-06\n</code></pre>\n\n<p>In other words, there is 100 times more error from addition than multiplication, and they are in opposite directions.</p>\n\n<p>I note if I switch the floats to doubles the addition corrects and both methods output the same error (which is unchanged for the multiplication).</p>\n\n<p>Is this normal behavior? </p>\n\n<p>Thanks.</p>\n"}, {"tags": ["c++", "qt"], "comments": [{"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1577300940, "post_id": 59481122, "comment_id": 105139017, "body": "provide a  <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}, {"owner": {"reputation": 56858, "user_id": 131930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91536fe27d32713b8a154a0bf42f6748?s=128&d=identicon&r=PG", "display_name": "Jeremy Friesner", "link": "https://stackoverflow.com/users/131930/jeremy-friesner"}, "edited": false, "score": 3, "creation_date": 1577301259, "post_id": 59481122, "comment_id": 105139070, "body": "closeEvent() is defined in QWidget so you can still subclass QGraphicsView and implement your own closeEvent() method there."}], "owner": {"reputation": 1, "user_id": 12596823, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d935d6c902ead1202fc211d0092023a?s=128&d=identicon&r=PG&f=1", "display_name": "tymmm", "link": "https://stackoverflow.com/users/12596823/tymmm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 71, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1577309094, "creation_date": 1577300368, "last_edit_date": 1577309094, "question_id": 59481122, "link": "https://stackoverflow.com/questions/59481122/close-window-button-x-qt", "title": "Close window button &#39;x&#39; Qt", "body": "<p>I have a small problem that I can't figure out.</p>\n\n<p>I'm trying to execute e.g <code>my_exemplary_sound-&gt;stop()</code> before closing window with the red \"x\" button. I can't override <code>closeEvent()</code> because the window isn't \"mainwindow\". I create new window like this  :</p>\n\n<pre><code>QGraphicsView * view = new QGraphicsView();\nview-&gt;show();\n</code></pre>\n"}, {"tags": ["c++", "qt", "qml"], "answers": [{"tags": [], "owner": {"reputation": 743, "user_id": 7054978, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-asrvI4GS3n0/AAAAAAAAAAI/AAAAAAAAAK8/_reZ69hkMHI/photo.jpg?sz=128", "display_name": "Adriano Campos", "link": "https://stackoverflow.com/users/7054978/adriano-campos"}, "is_accepted": true, "score": 2, "last_activity_date": 1577460755, "creation_date": 1577460755, "answer_id": 59502860, "question_id": 59480961, "link": "https://stackoverflow.com/questions/59480961/how-to-update-a-qml-text-with-c/59502860#59502860", "title": "How to update a QML text with c++", "body": "<p>You can send data from C++ to qml using signals, like this:</p>\n\n<p>//main.cpp</p>\n\n<pre><code>int main(int argc, char *argv[])\n    {\n    QGuiApplication app(argc, argv);\n    QQmlApplicationEngine engine;\n    engine.load(QUrl(QStringLiteral(\"qrc:/main.qml\")));\n\n    // Class init\n    YourClass yourObject;\n\n    // Embedding C++ Objects into QML with Context Properties\n    QQmlContext* ctx = engine.rootContext();\n    ctx-&gt;setContextProperty(\"yourObject\", &amp;yourObject);\n\n    return app.exec();\n    }\n</code></pre>\n\n<p>//main.qml</p>\n\n<pre><code>import QtQuick 2.6\n\nWindow {\n    id: mainWindow\n\n    Connections {\n        target: gapi\n        onSignalData: {\n            console.log(\"Data: \" + data)\n            textToChange.text = \"Changed to: \" + data\n        }\n    }\n\n    Text {\n        id: textToChange\n        text: \"beforeChange\"\n    }\n}\n</code></pre>\n\n<p>//yourClass.h</p>\n\n<pre><code>class YourClass : public QObject\n{\nsignals:\n    // Signal from YourClass to QML\n    void signalData(QString data);\n}\n</code></pre>\n\n<p>//yourClass.cpp</p>\n\n<pre><code>emit signalData(\"Hello QML\"); // Signal from GAPI to QML\n</code></pre>\n\n<p>This page <a href=\"https://felgo.com/cross-platform-development/how-to-expose-a-qt-cpp-class-with-signals-and-slots-to-qml\" rel=\"nofollow noreferrer\">https://felgo.com/cross-platform-development/how-to-expose-a-qt-cpp-class-with-signals-and-slots-to-qml</a> have a complete tutorial about \"How to Expose a Qt C++ Class with Signals and Slots to QML\"</p>\n"}], "owner": {"reputation": 47, "user_id": 12571720, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mB6AwOLlOgEo_qtfcUjn5VxWHelP0jBZmdrmRRS9g=k-s128", "display_name": "Mihai Bogdan", "link": "https://stackoverflow.com/users/12571720/mihai-bogdan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 568, "favorite_count": 0, "accepted_answer_id": 59502860, "answer_count": 1, "score": 2, "last_activity_date": 1577460755, "creation_date": 1577298712, "question_id": 59480961, "link": "https://stackoverflow.com/questions/59480961/how-to-update-a-qml-text-with-c", "title": "How to update a QML text with c++", "body": "<p>I have a small problem. Can someone show me how can I update a qml text from c++. I have an example using threads but I don't want to apply this method because I don't know how to set a \nparameter in run() function.To fully understand me here is my code.In the main function when I start the thread I want to put my custom text or a string variable that has a text. </p>\n\n<p><strong><em>thread.h</em></strong></p>\n\n<pre><code>#ifndef THREAD_H\n#define THREAD_H\n\n#include &lt;QThread&gt;\n\nclass Thread : public QThread\n{\n    Q_OBJECT\npublic:\n    Thread(QObject *parent=nullptr);\n   ~Thread() override;\n    Q_SLOT void stop();\n    Q_SIGNAL bool textChanged(const QString &amp; text);\nprotected:\n    void run() override;\n};\n\n#endif // THREAD_H\n\n</code></pre>\n\n<p><strong><em>thread.c</em></strong></p>\n\n<pre><code>#include \"thread.h\"\n#include &lt;QDebug&gt;\n\nThread::Thread(QObject *parent):\n    QThread(parent)\n{\n}\n\nThread::~Thread()\n{\n}\n\nvoid Thread::stop()\n{\n    requestInterruption();\n    wait();\n}\n\nvoid Thread::run() //here I want to specify a QString variable such that in main function to call the function with my text, and not specified the text from here\n{\nint i=0;\n\nwhile(!isInterruptionRequested()){\nQString text;\n    text = QString(\"I changed the text\"); // I don't want to declare from here the text.\n        Q_EMIT textChanged(text);\nQThread::msleep(20);\n    qDebug() &lt;&lt;i++;\n\n  }\n}\n\n</code></pre>\n\n<p><strong><em>main.cpp</em></strong></p>\n\n<pre><code>...\nThread thread;\n    QQmlApplicationEngine engine;\nQObject::connect(&amp;app, &amp;QGuiApplication::aboutToQuit, &amp;thread, &amp;Thread::stop);\n            thread.start();\n            engine.rootContext()-&gt;setContextProperty(\"thread\", &amp;thread);\n            engine.load(QUrl(\"qrc:/main.qml\"));\n            thread.stop();\n...\n</code></pre>\n\n<p><strong><em>main.qml</em></strong></p>\n\n<pre><code>  .....\n  Text {\n                    objectName: \"myLabel\"\n                    id: txt\n                    width: 200\n                    height: 29\n                    color: \"#faf9f9\"\n                    text: qsTr(\"Text\")\n                    font.pixelSize: 12\n                    }\n        Connections{\n                target: thread\n                onTextChanged: txt.text = text\n        }\n\n.....\n</code></pre>\n"}, {"tags": ["c#", "c++"], "answers": [{"tags": [], "owner": {"reputation": 23, "user_id": 12463855, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pgW8c.jpg?s=128&g=1", "display_name": "LeoDevSecOps", "link": "https://stackoverflow.com/users/12463855/leodevsecops"}, "is_accepted": false, "score": 0, "last_activity_date": 1577298586, "creation_date": 1577298586, "answer_id": 59480944, "question_id": 59480842, "link": "https://stackoverflow.com/questions/59480842/need-help-running-a-compiler-with-input-types/59480944#59480944", "title": "Need help running a compiler with input types", "body": "<p>Try by adding this flags in your command line to setup configuration file and output</p>\n\n<p>Path to the compiler configuration JSON file :</p>\n\n<pre><code>--config-file [arg]\n</code></pre>\n\n<p>Where the output file for the EuroScope ESE should be generated :</p>\n\n<pre><code>--out-file-ese [arg]\n</code></pre>\n\n<p>Where the output file for the SCT should be generated :</p>\n\n<pre><code>--out-file-sct [arg]\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 12596755, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e88808bbecc7648de26267416482fb4?s=128&d=identicon&r=PG&f=1", "display_name": "JungleCarriesUXD", "link": "https://stackoverflow.com/users/12596755/junglecarriesuxd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 52, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1577298586, "creation_date": 1577297551, "question_id": 59480842, "link": "https://stackoverflow.com/questions/59480842/need-help-running-a-compiler-with-input-types", "title": "Need help running a compiler with input types", "body": "<p>I'm working on combining multiple files with data in them to put it into one big file. I've found the compiler we need on Github here: <a href=\"https://github.com/AndyTWF/sector-file-compiler\" rel=\"nofollow noreferrer\">https://github.com/AndyTWF/sector-file-compiler</a> however I've never worked with this before or even the programming language it is in. This would help us a ton instead of copy-pasting the data one by one as we've got over 100+ files to combine.</p>\n\n<p>I understand that it needs a config.json file which I have configured however I do not know where to specify the path of that file in the CompilerCLI files(?). I also want to know how I can specify where the output files will be.</p>\n\n<p>The repo with the input files that are supposed to be mentioned in the .json file is in this repo <a href=\"https://github.com/VATFrance/FR-Sector-File\" rel=\"nofollow noreferrer\">https://github.com/VATFrance/FR-Sector-File</a></p>\n\n<p>I'm a total newbie to this type of stuff so help would be appreciated!</p>\n\n<p>P.S: I have Visual Studio installed already.</p>\n"}, {"tags": ["c++", "unix-timestamp"], "comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1577298019, "post_id": 59480768, "comment_id": 105138438, "body": "How many days are in a year? How many hours are in a day? How many minutes are in an hour how many minutes are in an hour. How many seconds are in a minute? You should be able to calculate the time since 1970 pretty easily (a small complication will be leap years and leap seconds).. but, it&#39;s simple arithmetic."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1577298237, "post_id": 59480768, "comment_id": 105138481, "body": "The typical Unix timestamp doesn&#39;t handle fractions of a second though so you&#39;re probably better off with <a href=\"https://en.cppreference.com/w/cpp/chrono\" rel=\"nofollow noreferrer\">the <code>chrono</code> library</a> and possibly extensions from <a href=\"https://github.com/HowardHinnant/date\" rel=\"nofollow noreferrer\">Howard Hinnant&#39;s Date library</a> (coming soon to a C++ Standard near you!) (<a href=\"https://github.com/HowardHinnant/date/wiki/Examples-and-Recipes#time_point_to_components\" rel=\"nofollow noreferrer\">example</a>)"}, {"owner": {"reputation": 781, "user_id": 3013108, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/811dd61039ad617bae9e3469815cc7fc?s=128&d=identicon&r=PG&f=1", "display_name": "Andrey Semenov", "link": "https://stackoverflow.com/users/3013108/andrey-semenov"}, "edited": false, "score": 0, "creation_date": 1577306102, "post_id": 59480768, "comment_id": 105139836, "body": "<a href=\"https://en.cppreference.com/w/cpp/chrono/time_point/time_since_epoch\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/chrono/time_point/time_since_epoch</a> ?"}], "owner": {"reputation": 101, "user_id": 7384658, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/01738ec4146c5297f91e006ffcffc33e?s=128&d=identicon&r=PG&f=1", "display_name": "User1953", "link": "https://stackoverflow.com/users/7384658/user1953"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 168, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1577296834, "creation_date": 1577296834, "question_id": 59480768, "link": "https://stackoverflow.com/questions/59480768/how-to-convert-year-month-day-time-to-unix-time-in-visual-studio-c", "title": "How to convert year,month,day,time to UNIX time in Visual studio c++", "body": "<p>I have searched all over Google without success for a way to convert my list of year,month,day and time to unix time. I need a simple way to find out if one time is smaller or bigger than another day. I have found this solution. I have this suggestion and want to know if there are any smarter or better way. It seems to work. I need the decimal seconds.</p>\n\n<pre><code>    using namespace System;\n\nint MyYear = 2017;\nint MyMonth = 5; \nint MyDay = 12;\nint MyHour = 8; \nint MyMinute = 33;\ndouble MySecond =47.2332;\n\ndouble whole, fractional;\nfractional = std::modf(MySecond, &amp;whole);\n\nSystem::DateTimeOffset dto(MyYear, MyMonth, MyDay,\n    MyHour, MyMinute,static_cast&lt;int&gt;(whole),System::TimeSpan::Zero);\n\nstd::cout &lt;&lt; \"dto: Unix Seconds: \" &lt;&lt; dto.ToUnixTimeSeconds() &lt;&lt; endl;\ndouble MyUnixTime = static_cast&lt;int&gt;(dto.ToUnixTimeSeconds()) + fractional;\ncout.precision(20);\nstd::cout &lt;&lt; \"MyUnixTime: \" &lt;&lt; MyUnixTime  &lt;&lt; endl;\n</code></pre>\n"}, {"tags": ["c++", "c++17"], "answers": [{"comments": [{"owner": {"reputation": 210, "user_id": 10836939, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3ceaf1b218d2740cf4476347024c97d?s=128&d=identicon&r=PG&f=1", "display_name": "Matheus Di&#243;genes Andrade", "link": "https://stackoverflow.com/users/10836939/matheus-di%c3%b3genes-andrade"}, "edited": false, "score": 0, "creation_date": 1577306165, "post_id": 59486096, "comment_id": 105147299, "body": "Thank you. But I was thinking about something like: <code>for (auto key : myMap.keys())</code> similarly to Java."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 210, "user_id": 10836939, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3ceaf1b218d2740cf4476347024c97d?s=128&d=identicon&r=PG&f=1", "display_name": "Matheus Di&#243;genes Andrade", "link": "https://stackoverflow.com/users/10836939/matheus-di%c3%b3genes-andrade"}, "edited": false, "score": 0, "creation_date": 1577306233, "post_id": 59486096, "comment_id": 105147300, "body": "@MatheusDi&#243;genesAndrade There&#39;s no such equivalent in c++."}], "tags": [], "owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "is_accepted": false, "score": 2, "last_activity_date": 1577303607, "creation_date": 1577303607, "answer_id": 59486096, "question_id": 59486095, "link": "https://stackoverflow.com/questions/59486095/iterating-through-map-keys-in-c-17/59486096#59486096", "title": "Iterating through map keys in C++ 17", "body": "<blockquote>\n  <p>Does anyone have any idea how to do it?</p>\n</blockquote>\n\n<p>Sure! You can just use a traditional <code>for</code> loop with an iterator:</p>\n\n<pre><code>for(auto it = myMap.begin(); it != myMap.end(); ++it) {\n    auto i = it-&gt;first;\n    // ...\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 210, "user_id": 10836939, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3ceaf1b218d2740cf4476347024c97d?s=128&d=identicon&r=PG&f=1", "display_name": "Matheus Di&#243;genes Andrade", "link": "https://stackoverflow.com/users/10836939/matheus-di%c3%b3genes-andrade"}, "edited": false, "score": 0, "creation_date": 1578677342, "post_id": 59653189, "comment_id": 105529568, "body": "Thank you, very interesting. Can you explain to me why it works? Because I don&#39; know exactly what this &quot;(void) val&quot; means."}, {"owner": {"reputation": 16695, "user_id": 10147399, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a6d433902192f8bb03857ae1b849d4f?s=128&d=identicon&r=PG&f=1", "display_name": "Ayxan Haqverdili", "link": "https://stackoverflow.com/users/10147399/ayxan-haqverdili"}, "reply_to_user": {"reputation": 210, "user_id": 10836939, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3ceaf1b218d2740cf4476347024c97d?s=128&d=identicon&r=PG&f=1", "display_name": "Matheus Di&#243;genes Andrade", "link": "https://stackoverflow.com/users/10836939/matheus-di%c3%b3genes-andrade"}, "edited": false, "score": 0, "creation_date": 1578677590, "post_id": 59653189, "comment_id": 105529670, "body": "@MatheusDi&#243;genesAndrade <a href=\"https://stackoverflow.com/q/34288844/10147399\">What does casting to <code>void</code> really do?</a>"}], "tags": [], "owner": {"reputation": 16695, "user_id": 10147399, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a6d433902192f8bb03857ae1b849d4f?s=128&d=identicon&r=PG&f=1", "display_name": "Ayxan Haqverdili", "link": "https://stackoverflow.com/users/10147399/ayxan-haqverdili"}, "is_accepted": false, "score": 0, "last_activity_date": 1578819621, "last_edit_date": 1578819621, "creation_date": 1578514396, "answer_id": 59653189, "question_id": 59486095, "link": "https://stackoverflow.com/questions/59486095/iterating-through-map-keys-in-c-17/59653189#59653189", "title": "Iterating through map keys in C++ 17", "body": "<p>You can avoid the unused warnings by casting to <code>void</code>:</p>\n\n<pre><code>for (auto const&amp; [key, val] : m) {\n  (void)val;  // To avoid unused warnings\n\n  // use key\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "reply_to_user": {"reputation": 210, "user_id": 10836939, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3ceaf1b218d2740cf4476347024c97d?s=128&d=identicon&r=PG&f=1", "display_name": "Matheus Di&#243;genes Andrade", "link": "https://stackoverflow.com/users/10836939/matheus-di%c3%b3genes-andrade"}, "edited": false, "score": 0, "creation_date": 1578680697, "post_id": 59653229, "comment_id": 105530890, "body": "@MatheusDi&#243;genesAndrade: The way to thank someone for their address, if you&#39;ve found it useful, is to upvote it... I&#39;ve also added links to the ranges library and information about the C++20 ranges support."}], "tags": [], "owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "is_accepted": true, "score": 7, "last_activity_date": 1578680682, "last_edit_date": 1578680682, "creation_date": 1578514563, "answer_id": 59653229, "question_id": 59486095, "link": "https://stackoverflow.com/questions/59486095/iterating-through-map-keys-in-c-17/59653229#59653229", "title": "Iterating through map keys in C++ 17", "body": "<p>Two options:</p>\n\n<ol>\n<li><p>A ranged-for version of @\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 's <a href=\"https://stackoverflow.com/a/59486096/1593077\">answer</a>:</p>\n\n<pre><code>for (auto const&amp; pair : myMap) {\n    auto key = pair.first;\n    // etc. etc.\n}\n</code></pre></li>\n<li><p>Use the <a href=\"https://ericniebler.github.io/range-v3/\" rel=\"noreferrer\">ranges-v3 library</a> (or <a href=\"https://en.cppreference.com/w/cpp/experimental/ranges\" rel=\"noreferrer\"><code>std::ranges</code></a> in C++20) to adapt the range <code>myMap.begin()</code> and <code>myMap.end()</code> by projecting it onto its first coordinate. Then you'd write something like:</p>\n\n<pre><code>for (auto key : keys_of(myMap) ) {\n    // etc. etc.\n}\n</code></pre>\n\n<p>you can do this without ranges if <code>keys_of()</code> materializes all of the keys, but that could be expensive for a larger map.</p>\n\n<p><sub>(If you have weird, heavy keys, then <code>const auto&amp; key</code> instead of <code>auto key</code>.)</sub></p></li>\n</ol>\n"}, {"comments": [{"owner": {"reputation": 3185, "user_id": 9733868, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ul3IR.jpg?s=128&g=1", "display_name": "Pedram Parsian", "link": "https://stackoverflow.com/users/9733868/pedram-parsian"}, "edited": false, "score": 7, "creation_date": 1578754475, "post_id": 59694956, "comment_id": 105545941, "body": "Welcome to SO. Please edit your answer and add some description about the code. Code only answers are discouraged."}, {"owner": {"reputation": 23130, "user_id": 8586227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BRnwg.png?s=128&g=1", "display_name": "Davis Herring", "link": "https://stackoverflow.com/users/8586227/davis-herring"}, "edited": false, "score": 2, "creation_date": 1578771614, "post_id": 59694956, "comment_id": 105550509, "body": "Structured bindings must be identifiers; this is a <i>declaration</i>, not an assignment or reference binding."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 3, "creation_date": 1578777704, "post_id": 59694956, "comment_id": 105551774, "body": "At least make sure your code compiles before dumping it. (<a href=\"https://coliru.stacked-crooked.com/a/f96fc728ed856200\" rel=\"nofollow noreferrer\">It doesn&#39;t</a>.)"}, {"owner": {"reputation": 16695, "user_id": 10147399, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a6d433902192f8bb03857ae1b849d4f?s=128&d=identicon&r=PG&f=1", "display_name": "Ayxan Haqverdili", "link": "https://stackoverflow.com/users/10147399/ayxan-haqverdili"}, "edited": false, "score": 0, "creation_date": 1578778054, "post_id": 59694956, "comment_id": 105551852, "body": "<a href=\"https://stackoverflow.com/q/40673080/10147399\">std::ignore with structured bindings?</a>"}], "tags": [], "owner": {"reputation": 1, "user_id": 12694894, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/46f2a75a1cc3cab37c33cb4da5e92bf4?s=128&d=identicon&r=PG", "display_name": "user12694894", "link": "https://stackoverflow.com/users/12694894/user12694894"}, "is_accepted": false, "score": -2, "last_activity_date": 1578777492, "last_edit_date": 1578777492, "creation_date": 1578750149, "answer_id": 59694956, "question_id": 59486095, "link": "https://stackoverflow.com/questions/59486095/iterating-through-map-keys-in-c-17/59694956#59694956", "title": "Iterating through map keys in C++ 17", "body": "<pre><code>for (auto&amp; [key, std::ignore] : m) {\n  // use key\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 210, "user_id": 10836939, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3ceaf1b218d2740cf4476347024c97d?s=128&d=identicon&r=PG&f=1", "display_name": "Matheus Di&#243;genes Andrade", "link": "https://stackoverflow.com/users/10836939/matheus-di%c3%b3genes-andrade"}, "edited": false, "score": 0, "creation_date": 1579034568, "post_id": 59723885, "comment_id": 105631297, "body": "That was the solution proposed by @einpoklum. But thank you for the response."}], "tags": [], "owner": {"reputation": 85, "user_id": 9995428, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lCaldoYovxU/AAAAAAAAAAI/AAAAAAAAAAk/kxbIic83rgg/photo.jpg?sz=128", "display_name": "Owl66", "link": "https://stackoverflow.com/users/9995428/owl66"}, "is_accepted": false, "score": 0, "last_activity_date": 1578948235, "creation_date": 1578948235, "answer_id": 59723885, "question_id": 59486095, "link": "https://stackoverflow.com/questions/59486095/iterating-through-map-keys-in-c-17/59723885#59723885", "title": "Iterating through map keys in C++ 17", "body": "<p>for(auto const &amp; pair : myMap)\nsince map internally stored element in std::pair format, hence you can access\nthe element by writing, pair.first; for key or pair.second; for value.</p>\n"}, {"tags": [], "owner": {"reputation": 1050, "user_id": 4640261, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cTiKZ.jpg?s=128&g=1", "display_name": "adembudak", "link": "https://stackoverflow.com/users/4640261/adembudak"}, "is_accepted": false, "score": 2, "last_activity_date": 1578951878, "creation_date": 1578951878, "answer_id": 59724595, "question_id": 59486095, "link": "https://stackoverflow.com/questions/59486095/iterating-through-map-keys-in-c-17/59724595#59724595", "title": "Iterating through map keys in C++ 17", "body": "<p>How about using <em>Go</em>-like unused variable declaration with <code>_</code>:</p>\n\n<pre><code>for(auto const&amp; [i, _] : myMap)\n...\n</code></pre>\n"}], "migrated_from": {"other_site": {"markdown_extensions": ["MathJax", "Prettify"], "launch_date": 1436881020, "open_beta_date": 1296068400, "closed_beta_date": 1295463600, "site_state": "normal", "high_resolution_icon_url": "https://cdn.sstatic.net/Sites/codereview/Img/apple-touch-icon@2.png", "twitter_account": "StackCodeReview", "favicon_url": "https://cdn.sstatic.net/Sites/codereview/Img/favicon.ico", "icon_url": "https://cdn.sstatic.net/Sites/codereview/Img/apple-touch-icon.png", "audience": "peer programmer code reviews", "site_url": "https://codereview.stackexchange.com", "api_site_parameter": "codereview", "logo_url": "https://cdn.sstatic.net/Sites/codereview/Img/logo.png", "name": "Code Review", "site_type": "main_site"}, "on_date": 1577350965, "question_id": 234637}, "owner": {"reputation": 210, "user_id": 10836939, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3ceaf1b218d2740cf4476347024c97d?s=128&d=identicon&r=PG&f=1", "display_name": "Matheus Di&#243;genes Andrade", "link": "https://stackoverflow.com/users/10836939/matheus-di%c3%b3genes-andrade"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3903, "favorite_count": 0, "accepted_answer_id": 59653229, "answer_count": 6, "score": 6, "last_activity_date": 1578951878, "creation_date": 1577294878, "last_edit_date": 1578777606, "question_id": 59486095, "link": "https://stackoverflow.com/questions/59486095/iterating-through-map-keys-in-c-17", "title": "Iterating through map keys in C++ 17", "body": "<p>I am looking for a way to iterate through the keys of a map in C++ 17. The way that I have in mind right now is based on the answer of this <a href=\"https://stackoverflow.com/questions/26281979/c-loop-through-map\">question</a>, the way is presented below.</p>\n\n<pre><code>for (auto const&amp; [i, val] : myMap)\n...\n</code></pre>\n\n<p>However, I do not need to use the value <code>val</code>, I just need the value <code>i</code>. Therefore, the piece of code <code>...</code> does not contain any call to the value <code>val</code>. Consequently, whenever I compile the code, the following warning  message appears:</p>\n\n<pre><code>warning: unused variable \u2018val\u2019 [-Wunused-variable]\n         for (auto const&amp; [i, val] : myMap){\n                                  ^\n</code></pre>\n\n<p>What I want is to find a way to iterate through (only) the keys of the map, ignoring the values. Does anyone have any idea how to do it?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 20722, "user_id": 1625187, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/6vWOZ.jpg?s=128&g=1", "display_name": "Evg", "link": "https://stackoverflow.com/users/1625187/evg"}, "edited": false, "score": 9, "creation_date": 1577294702, "post_id": 59480541, "comment_id": 105137782, "body": "Try <code>std::vector&lt;MyClass&gt; a;</code>."}, {"owner": {"reputation": 39, "user_id": 12596526, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581188f3b115c6d3b4d4bbbe333066b0?s=128&d=identicon&r=PG", "display_name": "BeetMacol", "link": "https://stackoverflow.com/users/12596526/beetmacol"}, "reply_to_user": {"reputation": 20722, "user_id": 1625187, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/6vWOZ.jpg?s=128&g=1", "display_name": "Evg", "link": "https://stackoverflow.com/users/1625187/evg"}, "edited": false, "score": 0, "creation_date": 1577295207, "post_id": 59480541, "comment_id": 105137861, "body": "That seems to work, thank you very much @Evg!"}], "answers": [{"tags": [], "owner": {"reputation": 106, "user_id": 11356682, "user_type": "registered", "profile_image": "https://graph.facebook.com/10213824662870086/picture?type=large", "display_name": "chinagar", "link": "https://stackoverflow.com/users/11356682/chinagar"}, "is_accepted": true, "score": 2, "last_activity_date": 1577374094, "last_edit_date": 1577374094, "creation_date": 1577297516, "answer_id": 59480836, "question_id": 59480541, "link": "https://stackoverflow.com/questions/59480541/creating-array-of-objects-without-specified-size/59480836#59480836", "title": "Creating array of objects without specified size", "body": "<p>In C++ you can make usage of <code>vector&lt;MyClass&gt;a</code>. \nWhenever you need to add any more object to the array use: <code>a.push_back(object)</code></p>\n\n<p>Basically when you declare a vector, a fix capacity container is created dynamically. Whenever the size of vector crosses the capacity, the entire vector is copied to a new location with increased size.</p>\n"}], "owner": {"reputation": 39, "user_id": 12596526, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581188f3b115c6d3b4d4bbbe333066b0?s=128&d=identicon&r=PG", "display_name": "BeetMacol", "link": "https://stackoverflow.com/users/12596526/beetmacol"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 183, "favorite_count": 0, "accepted_answer_id": 59480836, "answer_count": 1, "score": 1, "last_activity_date": 1577374094, "creation_date": 1577294638, "last_edit_date": 1577297602, "question_id": 59480541, "link": "https://stackoverflow.com/questions/59480541/creating-array-of-objects-without-specified-size", "title": "Creating array of objects without specified size", "body": "<p>I want to make an array of objects made from class, but i don't know how many of those objects will be in the array. I tried to make it with this code: <code>MyClass a[];</code>, but Qt Creator shows me an error: <em>flexible array member 'a' of type 'MyClass []' with non-trivial destruction</em> and a warning: <em>flexible array members are a C99 feature</em>. The code works with <code>MyClass a[n];</code> but that is not what i need.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "edited": false, "score": 5, "creation_date": 1577294813, "post_id": 59480525, "comment_id": 105137800, "body": "Start by replacing all your fixed size <code>char</code> arrays with <code>std::string</code>.  There&#39;s a comparison in <code>search_p</code> that won&#39;t work, because you can&#39;t compare character arrays with <code>==</code>, which will compare their <i>addresses</i>. You need to use <code>strcmp</code> or something similar.  Using <code>std::string</code> the <code>==</code> comparison would Just Work."}, {"owner": {"reputation": 140851, "user_id": 1120273, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4cbcb185abce0204cf5ac705ba32d53a?s=128&d=identicon&r=PG", "display_name": "Dietmar K&#252;hl", "link": "https://stackoverflow.com/users/1120273/dietmar-k%c3%bchl"}, "edited": false, "score": 0, "creation_date": 1577297670, "post_id": 59480525, "comment_id": 105138364, "body": "Key lesson on reading data: <i>always</i> check <i>after</i> the attempt to read data that it was successful. Using any variable attempted to be read prior to this check can yield bad data and can be a security threat. With respect to the actual question: reduce the code to show only what the problem is rather than posting all the code."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1577298867, "post_id": 59480525, "comment_id": 105138618, "body": "Prefer to use <code>std::list</code> rather than implementing your own.  The <code>std::list</code> has already been validated."}, {"owner": {"reputation": 9018, "user_id": 5105949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbd9d7ecb21c40f7a4256317fd80cecc?s=128&d=identicon&r=PG&f=1", "display_name": "churill", "link": "https://stackoverflow.com/users/5105949/churill"}, "edited": false, "score": 0, "creation_date": 1577304168, "post_id": 59480525, "comment_id": 105139513, "body": "That&#39;s an aweful lot of unindented code, please try to shorten and format it if possible. Maybe you also want to get a <a href=\"https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list\">good C++ book</a> to learn some basic concepts like the use of STL-Containers, <code>std::string</code>, smart pointers or <a href=\"https://stackoverflow.com/questions/1452721/why-is-using-namespace-std-considered-bad-practice\">Why \u201cusing namespace std;\u201d is considered bad practice</a>. Also you should avoid <code>goto</code>."}], "owner": {"reputation": 11, "user_id": 12596540, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/--DirqdUdulA/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfRtt3CH91YR4GFi6jHmMEe32VgoA/photo.jpg?sz=128", "display_name": "Muhammad Ali Raza", "link": "https://stackoverflow.com/users/12596540/muhammad-ali-raza"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 40, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1577294568, "creation_date": 1577294568, "question_id": 59480525, "link": "https://stackoverflow.com/questions/59480525/stuck-in-search-from-file-in-c", "title": "stuck in search from file in c++:", "body": "<p>I'm new.I am making a hospital management system and i am stuck at a point where i have to search all the patients with specific doctor. I have developed a code but it does print everything present in the file. i only want to search with doctor name and every patient with that doctor should come up.\nhere is my coding(the bold function is actually my problem):</p>\n\n<pre><code>#include&lt;iostream&gt;\n#include &lt;fstream&gt;\n#include&lt;ctime&gt;\n#include&lt;conio.h&gt;\n#include&lt;string.h&gt;\nusing namespace std;\n\n\n\n//FUNCTION DECLERATION\nvoid WelcomeScreen();//WelcomeScreen function decleration\nvoid Title();//Title function decleration\nvoid MainMenu();//MainMenu function decleration\nvoid LoginScreen();//LoginScreen function decleration\nvoid Add_patient();// add patient\nvoid func_list();//function to list the patient details\nvoid Search_rec();//Search_rec function declaration\nvoid search_p();   //void Edit_rec();//Edit_rec function declarationvoid\n  //void Dlt_patient();//Dlt_rec function declaration\n  //void ex_it(void);//exit function declaration\n\n\n\nstruct patient//structure\n{\nint id;\nint age;\nchar Gender;\nchar First_Name[20];\nchar Last_Name[20];\nchar Contact_no[15];\nchar Address[60];\nchar Email[30];\nchar Doctor[20];\nchar Problem[20];\npatient* next;\npatient* prev;\n// char time [];\n\n};\n\npatient* patient_head = NULL;\n\n\n/* ************************************************* Welcome Screen ********************************************* */\nvoid WelcomeScreen() //function for welcome screen\n{\n\ncout &lt;&lt; \"\\n\\n\\n\\n\\n\\n\\n\\t\\t\\t\\t#########################################\";\ncout &lt;&lt; \"\\n\\t\\t\\t\\t#\\t\\t WELCOME TO             #\";\ncout &lt;&lt; \"\\n\\t\\t\\t\\t#   ZS HOSPITAL MANAGEMENT SYSTEM       #\";\ncout &lt;&lt; \"\\n\\t\\t\\t\\t#########################################\";\ncout &lt;&lt; \"\\n\\n\\n\\n\\n Press any key to continue......\\n\";\nsystem(\"cls\");//Use to clear screen\n\n}\n\n/* ************************************************* Title Screen ********************************************* */\nvoid Title()//function for title screen\n{\ncout &lt;&lt; \"\\n\\n\\t\\t----------------------------------------------------------------------------------\";\ncout &lt;&lt; \"\\n\\t\\t\\t\\t       ZSc HOSPITAL         \";\ncout &lt;&lt; \"\\n\\t\\t----------------------------------------------------------------------------------\";\n}\n\n\n/* ************************************************* Main Menu ********************************************* */\nvoid MainMenu()//function decleration\n{\nsystem(\"cls\");\nint choose = 0;\nTitle();// call Title function\ncout &lt;&lt; \"\\n\\n\\n\\n\\n\\t\\t\\t\\t1. Add Patients Record\\n\";\ncout &lt;&lt; \"\\n\\t\\t\\t\\t2. Delete Patients Record\\n\";\ncout &lt;&lt; \"\\n\\t\\t\\t\\t3. Search Patients Record\\n\";\ncout &lt;&lt; \"\\n\\t\\t\\t\\t4. Edit Patients Record\\n\";\ncout &lt;&lt; \"\\n\\t\\t\\t\\t5. list Patients Record\\n\";\ncout &lt;&lt; \"\\n\\t\\t\\t\\t6. search Patients by doctors name\\n\";\ncout &lt;&lt; \"\\n\\t\\t\\t\\t7. Exit\\n\";\ncout &lt;&lt; \"\\n\\n\\n \\n\\t\\t\\t\\tChoose from 1 to 7:\";\ncin &gt;&gt; choose;\n\nswitch (choose)//switch to differeht case\n{\n\ncase 1:\nAdd_patient();//Add_rec function is called\nbreak;\ncase 2:\nsearch_p();\n//Dlt_patient();//Dlt_rec function is call\nbreak;\ncase 3:\nSearch_rec();//View_rec function is call\nbreak;\ncase 4:\n// Edit_rec();//Edit_rec function is call\nbreak;\ncase 5:\nfunc_list();\nbreak;\ncase 6:\n// ex_it();//ex_it function is call\nbreak;\ncase 7:\nbreak;\ndefault:\ncout &lt;&lt; \"\\t\\t\\tInvalid entry. Please enter right option :)\";\nsystem(\"pause\");\n}//end of switch\nsystem(\"pause\");\n\n}\n\nvoid LoginScreen()//function for login screen\n{\n//list of variables\nint e = 0;\nchar Username[15];\nchar Password[15];//cin.getline(Username,15);\nchar original_Username[15] = \"zain\";\nchar original_Password[15] = \"123\";\n\ndo\n{\ncout &lt;&lt; \"\\n\\n\\n\\n\\t\\t\\t\\tEnter your Username and Password :)\";\ncout &lt;&lt; \"\\n\\n\\n\\t\\t\\t\\t\\tUSERNAME:\";\ncin.getline(Username, 15);\ncin.ignore();\ncout &lt;&lt; \"\\n\\n\\t\\t\\t\\t\\tPASSWORD:\";\ncin.getline(Password, 15);\n//cin.ignore();\n\n\nif (strcmp(Username, original_Username) == 0 &amp;&amp; strcmp(Password, original_Password) == 0)//check if both the strings are equal and return 0 if equal\n{\ncout &lt;&lt; \"\\n\\n\\n\\t\\t\\t\\t\\t...Login Successfull...\";\nsystem(\"pause\");\nMainMenu();\nbreak;\n}\nelse\n{\nsystem(\"cls\");\ncout &lt;&lt; \"\\n\\t\\t\\tPassword in incorrect:&lt;&lt; Try Again :)\";\ne++;\n}\n\n} while (e &lt;= 2);\n\nif (e&gt;2)\n{\ncout &lt;&lt; \"You have cross the limit. You cannot login. : :(\";\n//ex_it();\n}\n\nsystem(\"cls\");\n}\n\n\nvoid Add_patient()\n{\n\nint c = 0, new_patient = 0;\npatient* obj = new patient();\nif (patient_head == NULL)\n{\n\npatient_head = obj;\n\n}\nelse\n{\n\nobj-&gt;next = patient_head;\nobj-&gt;prev = NULL;\npatient_head = obj;\n}\nsystem(\"cls\");\nTitle();// call Title function\n//list of variables\nchar ans;\n\n/****************************************id****************************/\n\n\n/* **************************First Name*********************************** */\nA:\ncout &lt;&lt; \"\\n\\t\\t\\tFirst Name: \";\ncin &gt;&gt; obj-&gt;First_Name;\nobj-&gt;First_Name[0] = toupper(obj-&gt;First_Name[0]);\nint valid;\n\nif (strlen(obj-&gt;First_Name)&gt;20 || strlen(obj-&gt;First_Name)&lt;2)\n{\ncout &lt;&lt; \"\\n\\t Invalid :( \\t The max range for first name is 20 and min range is 2 :)\";\ngoto A;\n}\nelse\n{\nfor (int b = 0; (unsigned)b&lt;(unsigned)strlen(obj-&gt;First_Name); b++)\n{\nif (isalpha(obj-&gt;First_Name[b]))\n{\nvalid = 1;\n}\nelse\n{\nvalid = 0;\nbreak;\n}\n}\nif (!valid)\n{\ncout &lt;&lt; \"\\n\\t\\t First name contain Invalid character :(  Enter again :)\";\ngoto A;\n}\n}\n\n/* ********************************************** Last name ************************************************ */\nB:\ncout &lt;&lt; \"\\n\\t\\t\\tLast Name: \";\ncin &gt;&gt; obj-&gt;Last_Name;\nobj-&gt;Last_Name[0] = toupper(obj-&gt;Last_Name[0]);\nif (strlen(obj-&gt;Last_Name)&gt;20 || strlen(obj-&gt;Last_Name)&lt;2)//strlen to check length of char\n{\ncout &lt;&lt; \"\\n\\t Invalid :( \\t The max range for last name is 20 and min range is 2 :)\";\ngoto B;\n}\nelse\n{\nfor (int b = 0; (unsigned)b&lt;(unsigned)strlen(obj-&gt;Last_Name); b++)\n{\nif (isalpha(obj-&gt;Last_Name[b]))\n{\nvalid = 1;\n}\nelse\n{\nvalid = 0;\nbreak;\n}\n}\nif (!valid)\n{\ncout &lt;&lt; \"\\n\\t\\t Last name contain Invalid character :(  Enter again :)\";\ngoto B;\n}\n}\n/* ******************************************* Gender ************************************************************** */\nint ok;\n\ndo\n{\ncout &lt;&lt; \"\\n\\t\\t\\tGender[F/M]: \";\ncin &gt;&gt; obj-&gt;Gender;\nif (toupper(obj-&gt;Gender) == 'M' || toupper(obj-&gt;Gender) == 'F')\n{\nok = 1;\n}\nelse\n{\nok = 0;\n}\nif (!ok)\n{\ncout &lt;&lt; \"\\n\\t\\t Gender contain Invalid character :(  Enter either F or M :)\";\n}\n} while (!ok);\n/* ***************************************** Age ********************************************************************** */\ncout &lt;&lt; \"\\n\\t\\t\\tAge:\";\ncin &gt;&gt; obj-&gt;age;\n/* **************************************** Address ******************************************************************* */\ndo\n{\nC:\ncout &lt;&lt; \"\\n\\t\\t\\tAddress: \";\ncin.getline(obj-&gt;Address, 80);\ncin.ignore(); //clear buffer before taking new\nobj-&gt;Address[0] = toupper(obj-&gt;Address[0]);\n\nif (strlen(obj-&gt;Address)&lt;4)\n{\ncout &lt;&lt; \"\\n\\t Invalid :( \\t The max range for address is 40 and min range is 4 :)\";\ngoto C;\n}\n\n} while (!valid);\n\n/* ******************************************* Contact no. ***************************************** */\n// char ch ;\n// ch = getchar();\n\ndo\n{\nD:\ncout &lt;&lt; \"\\n\\t\\t\\tContact no: \";\ncin &gt;&gt; obj-&gt;Contact_no;\nif (strlen(obj-&gt;Contact_no)&gt;11)\n{\ncout &lt;&lt; \"\\n\\t Sorry :( Invalid. Contact no. must contain 11 numbers. Enter again :)\";\ngoto D;\n}\nelse\n{\nfor (int b = 0; (unsigned)b&lt;(unsigned)strlen(obj-&gt;Contact_no); b++)\n{\nif (!isalpha(obj-&gt;Contact_no[b]))\n{\nvalid = 1;\n}\nelse\n{\nvalid = 0;\nbreak;\n}\n}\nif (!valid)\n{\ncout &lt;&lt; \"\\n\\t\\t Contact no. contain Invalid character :(  Enter again :)\";\ngoto D;\n}\n}\n} while (!valid);\n\n/* ************************************************** Email ******************************************** */\ndo\n{\ncout &lt;&lt; \"\\n\\t\\t\\tEmail: \";\ncin &gt;&gt; obj-&gt;Email;\nif (strlen(obj-&gt;Email)&gt;30 || strlen(obj-&gt;Email)&lt;8)\n{\ncout &lt;&lt; \"\\n\\t Invalid :( \\t The max range for email is 30 and min range is 8 :)\";\n}\n} while (strlen(obj-&gt;Email)&gt;30 || strlen(obj-&gt;Email)&lt;8);\n\n/* ********************************************************* Problem *********************************************** */\nE:\ncout &lt;&lt; \"\\n\\t\\t\\tProblem: \";\ncin &gt;&gt; obj-&gt;Problem;\nobj-&gt;Problem[0] = toupper(obj-&gt;Problem[0]);\nif (strlen(obj-&gt;Problem)&gt;15 || strlen(obj-&gt;Problem)&lt;3)\n{\ncout &lt;&lt; \"\\n\\t Invalid :( \\t The max range for first name is 15 and min range is 3 :)\";\ngoto E;\n}\nelse\n{\nfor (int b = 0; (unsigned)b&lt;(unsigned)strlen(obj-&gt;Problem); b++)\n{\nif (isalpha(obj-&gt;Problem[b]))//function in C which can be used to check if the passed character is an alphabet or not.\n{\nvalid = 1;\n}\nelse\n{\nvalid = 0;\nbreak;\n}\n}\nif (!valid)\n{\ncout &lt;&lt; \"\\n\\t\\t Problem contain Invalid character :(  Enter again :)\";\ngoto E;\n}\n}\n\n/* ********************************************** Prescribed Doctor **************************************** */\nF:\ncout &lt;&lt; \"\\n\\t\\t\\tPrescribed Doctor:\";\ncin.getline(obj-&gt;Doctor, 50);\nobj-&gt;Doctor[0] = toupper(obj-&gt;Doctor[0]);\nif (strlen(obj-&gt;Doctor)&gt;30 || strlen(obj-&gt;Doctor)&lt;3)\n{\ncout &lt;&lt; \"\\n\\t Invalid :( \\t The max range for first name is 30 and min range is 3 :)\";\ngoto F;\n}\nelse\n{\nfor (int b = 0; (unsigned)b&lt;(unsigned)strlen(obj-&gt;Doctor); b++)\n{\nif (isalpha(obj-&gt;Doctor[b]))\n{\nvalid = 1;\n}\nelse\n{\nvalid = 0;\nbreak;\n}\n}\nif (!valid)\n{\ncout &lt;&lt; \"\\n\\t\\t Doctor name contain Invalid character :(  Enter again :)\";\ngoto F;\n}\n}\n//**************************filing************************************\nofstream myfile;\nmyfile.open(\"text.txt\", ios::app);//open file in write mode\nif (!myfile)\n{    // file couldn't be opened\ncout &lt;&lt; \"Error: file could not be opened\" &lt;&lt; endl;\n\n}\nelse\n{\n\nmyfile\n&lt;&lt; obj-&gt;Doctor &lt;&lt; \"\\n\"\n&lt;&lt; obj-&gt;id &lt;&lt; \"\\n\"\n&lt;&lt; obj-&gt;First_Name &lt;&lt; \"\\n\"\n&lt;&lt; obj-&gt;Last_Name &lt;&lt; \"\\n\"\n&lt;&lt; obj-&gt;Gender &lt;&lt; \"\\n\"\n&lt;&lt; obj-&gt;age &lt;&lt; \"\\n\"\n&lt;&lt; obj-&gt;Address &lt;&lt; \"\\n\"\n&lt;&lt; obj-&gt;Contact_no &lt;&lt; \"\\n\"\n&lt;&lt; obj-&gt;Email &lt;&lt; \"\\n\"\n&lt;&lt; obj-&gt;Problem &lt;&lt; \"\\n\"\n;\n//&lt;&lt; date() &lt;&lt; \"\\n\";\n\n}\nmyfile.close();\n\ncout &lt;&lt; \"\\n\\n\\t\\t\\t.... Information Record Successful ...\";\nsd:\n\ncin.ignore();\ncout &lt;&lt; \"\\n\\n\\t\\t\\tDo you want to add more[Y/N]?? \";\ncin &gt;&gt; ans;\nif (toupper(ans) == 'Y')\n{\nAdd_patient();\n}\nelse if (toupper(ans) == 'N')\n{\ncout &lt;&lt; \"\\n\\t\\t Thank you :) :)\";\nMainMenu();\n}\nelse\n{\ncout &lt;&lt; \"\\n\\t\\tInvalid Input\\n\";\ngoto sd;\n}\n}\n\n\n\n\n\nvoid Search_rec(void)\n{\nchar name[20];\nsystem(\"cls\");\nTitle();// call Title function\npatient* obj = new patient();\n\nfstream myfile;//open file to show on screen\nmyfile.open(\"Record2.dat\");\nif (!myfile)\n{    // file couldn't be opened\ncout &lt;&lt; \"Error: file could not be opened\" &lt;&lt; endl;\n\n}\nelse\n{\ncout &lt;&lt; \"\\n\\n\\t\\t\\t!!!!!!!!!!!!!! Search Patients Record !!!!!!!!!!!!!\\n\";\ncout &lt;&lt; \"\\n Enter Patient Name to be viewed:\";\ncin &gt;&gt; name;\n//fflush(stdin);\n//name[0] = toupper(name[0]);\nwhile (!EOF)\n{\nif (strcmp(obj-&gt;First_Name, name) == 0)\n{\n\ncout &lt;&lt; \"\\nFull Name\";\nmyfile &gt;&gt; obj-&gt;First_Name;\nmyfile &gt;&gt; obj-&gt;Last_Name;\ncout &lt;&lt; obj-&gt;First_Name &lt;&lt; \" \" &lt;&lt; obj-&gt;Last_Name;\ncout &lt;&lt; \"\\nGender\";\nmyfile &gt;&gt; obj-&gt;Gender;\ncout &lt;&lt; obj-&gt;Gender;\ncout &lt;&lt; \"\\nAge\";\nmyfile &gt;&gt; obj-&gt;age;\ncout &lt;&lt; obj-&gt;age;\ncout &lt;&lt; \"\\nAddress\";\nmyfile &gt;&gt; obj-&gt;Address;\ncout &lt;&lt; \"\\nContact No.\\n\";\nmyfile &gt;&gt; obj-&gt;Contact_no;\ncout &lt;&lt; \"\\nEmail\";\nmyfile &gt;&gt; obj-&gt;Email;\ncout &lt;&lt; \"\\nProblem\";\nmyfile &gt;&gt; obj-&gt;Problem;\ncout &lt;&lt; \"\\nPrescribed Doctor\";\nmyfile &lt;&lt; obj-&gt;Doctor;\ncout &lt;&lt; \"================================== THANKS ==============================================================================\";\nbreak;\n}\n}\nif (strcmp(obj-&gt;First_Name, name) != 0)\n{\ncout &lt;&lt; \"Record not found!\";\nsystem(\"pause\");\n}\n}\nmyfile.close();\nL:\nsystem(\"pause\");\ncout &lt;&lt; \"\\n\\n\\t\\t\\tDo you want to view more[Y/N]??\";\nchar ans;\ncin &gt;&gt; ans;\nif (toupper(ans) == 'Y')\n{\nSearch_rec();\n}\nelse if (toupper(ans) == 'N')\n{\ncout &lt;&lt; \"\\n\\t\\t Thank you :) :)\";\nMainMenu();\n}\nelse\n{\ncout &lt;&lt; \"\\n\\tInvalid Input.\\n\";\ngoto L;\n}\n}\n\n/* **************************************VIEW RECORD*******************************************/\nvoid func_list()\n{\n\nifstream myReadFile;\nmyReadFile.open(\"text.txt\");\nchar output[100];\nif (!myReadFile)\n{\ncout &lt;&lt; \"no file \";\n}\nwhile (!myReadFile.eof())\n{\n\nint r=0;\nmyReadFile.getline(output, 100);\n\n// myReadFile &gt;&gt; output ;\ncout &lt;&lt; output &lt;&lt; \"\\n\";\nr++;\nif (r == 10)\n{\ncout &lt;&lt; \"\\n\\n\";\nr = 0;\n}\n\n}\nmyReadFile.close();\ncout &lt;&lt; \"\\n\";\nsystem(\"pause\");\nMainMenu();\n}\n\n\n***void search_p()\n{\nint choice=0;\nchar name[100];\n//M:\ncout &lt;&lt; \"1 for   patients list and 2 for menu \";\ncin &gt;&gt; choice;\nif (choice == 1)\n{\ncout &lt;&lt; \"\\nenter your name \";\ncin &gt;&gt; name;\nifstream myReadFile;\nmyReadFile.open(\"text.txt\");\nchar output[100];\nif (!myReadFile)\n{\ncout &lt;&lt; \"no file \";\n}\nwhile (!myReadFile.eof())\n{\nint r = 0;\nmyReadFile.getline(output, 100);\nif (output == name)\n{\nwhile (r == 10)\n{\nmyReadFile.getline(output, 100);\nr++;\n}\nr = 0;\n}\n// myReadFile &gt;&gt; output ;\ncout &lt;&lt; output &lt;&lt; \"\\n\";\nr++;\nif (r == 10)\n{\ncout &lt;&lt; \"\\n\";\nr = 0;\n}\n}\nmyReadFile.close();\ncout &lt;&lt; \"\\n\";\nMainMenu();\n//system(\"pause\");\n//goto M;\n}\nelse\n{\nMainMenu();\n}\n}***\n\n\n\n\nint main()\n{\n\nWelcomeScreen();//Use to call WelcomeScreen function\nTitle();//Use to call Title function\nLoginScreen();//Use to call Menu function\n}\n</code></pre>\n"}, {"tags": ["c++", "std"], "comments": [{"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 2, "creation_date": 1577294429, "post_id": 59480439, "comment_id": 105137737, "body": "&quot;<i>I don&#39;t know how to approach it.</i>&quot; How to approach what, exactly?"}, {"owner": {"reputation": 1073, "user_id": 3763139, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gkUYr.jpg?s=128&g=1", "display_name": "Sopel", "link": "https://stackoverflow.com/users/3763139/sopel"}, "edited": false, "score": 0, "creation_date": 1577295038, "post_id": 59480439, "comment_id": 105137839, "body": "how much memory map and unordered_map use is an implementation detail. If you want it in terms of big O notation then they are all equivalent."}, {"owner": {"reputation": 1480, "user_id": 8746648, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/726e6151726f9d185620a833825b61f3?s=128&d=identicon&r=PG", "display_name": "asynts", "link": "https://stackoverflow.com/users/8746648/asynts"}, "edited": false, "score": 1, "creation_date": 1577295173, "post_id": 59480439, "comment_id": 105137856, "body": "You could implement a custom <a href=\"https://en.cppreference.com/w/cpp/named_req/Allocator\" rel=\"nofollow noreferrer\"><i>Allocator</i></a>. It is specified as template argument, e.g. <code>std::vector&lt;int, custom_allocator&gt;</code>."}, {"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 0, "creation_date": 1577295979, "post_id": 59480439, "comment_id": 105138003, "body": "<code>c</code> is of course expected to be the smallest, if only because it stores half the data. It stores 1000000 instances of <code>long long</code>, while <code>a</code> and <code>b</code> store that plus 1000000 instances of <code>int</code>"}, {"owner": {"reputation": 21, "user_id": 11398035, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-PhUh_qvNUnM/AAAAAAAAAAI/AAAAAAAABC8/pBPho-CEG9k/photo.jpg?sz=128", "display_name": "Sochu", "link": "https://stackoverflow.com/users/11398035/sochu"}, "reply_to_user": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 0, "creation_date": 1577296099, "post_id": 59480439, "comment_id": 105138034, "body": "@IgorTandetnik yes, but I know what elements are stored and they are the same."}, {"owner": {"reputation": 458, "user_id": 4334585, "user_type": "registered", "accept_rate": 70, "profile_image": "https://lh3.googleusercontent.com/-3E6oZ0T6M60/AAAAAAAAAAI/AAAAAAAAADI/-xFm-vI8dL8/photo.jpg?sz=128", "display_name": "soumya sambit Kunda", "link": "https://stackoverflow.com/users/4334585/soumya-sambit-kunda"}, "edited": false, "score": 0, "creation_date": 1577296221, "post_id": 59480439, "comment_id": 105138058, "body": "As your objective is to store 1000000 elements for a,b, and c, you can make array c as type int only, and accessing of element using key is slower in b compared to rest."}], "answers": [{"comments": [{"owner": {"reputation": 26689, "user_id": 5769463, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/71a28b5fac23ee656a32cc7ea6df54ec?s=128&d=identicon&r=PG&f=1", "display_name": "ead", "link": "https://stackoverflow.com/users/5769463/ead"}, "edited": false, "score": 0, "creation_date": 1577313961, "post_id": 59480898, "comment_id": 105141093, "body": "This analysis is probably underestimating the real memory consumption for maps in many cases. The underlying memory manager will probably return 32 or 64 byte aligned addresses for pointers allocated via new-operator, thus a node in the map will cost not 40/48 bytes but 64."}, {"owner": {"reputation": 140851, "user_id": 1120273, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4cbcb185abce0204cf5ac705ba32d53a?s=128&d=identicon&r=PG", "display_name": "Dietmar K&#252;hl", "link": "https://stackoverflow.com/users/1120273/dietmar-k%c3%bchl"}, "reply_to_user": {"reputation": 26689, "user_id": 5769463, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/71a28b5fac23ee656a32cc7ea6df54ec?s=128&d=identicon&r=PG&f=1", "display_name": "ead", "link": "https://stackoverflow.com/users/5769463/ead"}, "edited": false, "score": 0, "creation_date": 1577314353, "post_id": 59480898, "comment_id": 105141156, "body": "@ead: Yes, this analysis only computes what the data structures actually ask for. Any additional maintenance will be in top of that. Of course, with a suitable allocator the overhead can be reduced, e.g., by maintaining a pool of buffers matching exactly the size requested."}], "tags": [], "owner": {"reputation": 140851, "user_id": 1120273, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4cbcb185abce0204cf5ac705ba32d53a?s=128&d=identicon&r=PG", "display_name": "Dietmar K&#252;hl", "link": "https://stackoverflow.com/users/1120273/dietmar-k%c3%bchl"}, "is_accepted": false, "score": 4, "last_activity_date": 1577303671, "last_edit_date": 1577303671, "creation_date": 1577298151, "answer_id": 59480898, "question_id": 59480439, "link": "https://stackoverflow.com/questions/59480439/unordered-map-vs-map-vs-array-memory-analysis/59480898#59480898", "title": "unordered_map Vs map Vs array - Memory analysis", "body": "<p>Since C++11 the standard library containers support stateful allocators: you can pass an allocator type which records the amount of data allocated and track the maximum use. You\u2019ll need to also account for the object size as for an array there isn\u2019t really an allocator as the array is a built-in entity.</p>\n\n<p><a href=\"https://ideone.com/Ymb36c\" rel=\"nofollow noreferrer\">Here</a> is an example:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;functional&gt;\n#include &lt;memory&gt;\n#include &lt;map&gt;\n#include &lt;unordered_map&gt;\n#include &lt;vector&gt;\n\nusing namespace std;\n\nstatic constexpr long total_size = 1000000;\n\ntemplate&lt;typename T&gt;\nclass CountingAllocator\n{\npublic:\n    shared_ptr&lt;size_t&gt; d_max = make_shared&lt;size_t&gt;(0u);\n    using value_type = T;\n    using pointer = T*;\n\n    CountingAllocator() = default;\n    template &lt;typename S&gt;\n    CountingAllocator(CountingAllocator&lt;S&gt; const&amp; other): d_max(other.d_max) {}\n    size_t size() const { return *d_max; }\n    T* allocate(size_t size) {\n        size *= sizeof(T);\n        *d_max += size;\n        return reinterpret_cast&lt;T*&gt;(operator new(size));\n    }\n    void deallocate(void* ptr, size_t) {\n        operator delete(ptr);\n    }\n    friend bool operator== (CountingAllocator const&amp; c0, CountingAllocator const&amp; c1) {\n        return c0.d_max == c1.d_max;\n    } \n\n    friend bool operator!= (CountingAllocator const&amp; c0, CountingAllocator const&amp; c1) {\n        return !(c0 == c1);\n    }\n};\n\ntemplate &lt;typename T&gt;\nvoid size(char const* name) {\n    CountingAllocator&lt;typename T::value_type&gt; allocator;\n    T m(allocator);\n    for (int i = 0; i != total_size; ++i) {\n        m[i] = i;\n    }\n    cout &lt;&lt; name &lt;&lt; \"=\"  &lt;&lt; allocator.size() &lt;&lt; \"\\n\";\n}\n\nint main() {\n    size&lt;map&lt;long, long long, less&lt;int&gt;, CountingAllocator&lt;pair&lt;long const, long long&gt;&gt;&gt;&gt;(\"map\");\n    size&lt;unordered_map&lt;long, long long, hash&lt;long&gt;, equal_to&lt;long&gt;, CountingAllocator&lt;pair&lt;long const, long long&gt;&gt;&gt;&gt;(\"unordered_map\");\n    cout &lt;&lt; \"array=\" &lt;&lt; sizeof(long long[total_size]) &lt;&lt; \"\\n\";\n    return 0;\n}\n</code></pre>\n\n<p>With clang on ideone this prints (I aligned the sizes here, though):</p>\n\n<pre><code>map=          48000000\nunordered_map=40654880\narray=         8000000\n</code></pre>\n\n<p>The array has, of course, the smallest footprint (zero per element overhead). I\u2019m surprised that the average per element overhead is smaller for <code>unordered_map</code> than for <code>map</code>. Using 5 words in addition to the data seems a bit excessive.</p>\n"}], "owner": {"reputation": 21, "user_id": 11398035, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-PhUh_qvNUnM/AAAAAAAAAAI/AAAAAAAABC8/pBPho-CEG9k/photo.jpg?sz=128", "display_name": "Sochu", "link": "https://stackoverflow.com/users/11398035/sochu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 622, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1577303671, "creation_date": 1577293928, "last_edit_date": 1577296005, "question_id": 59480439, "link": "https://stackoverflow.com/questions/59480439/unordered-map-vs-map-vs-array-memory-analysis", "title": "unordered_map Vs map Vs array - Memory analysis", "body": "<p>As the title says, I would want to know the memory differences between <code>unordered_map</code>, <code>map</code>, and <code>array</code>.</p>\n\n<p>Example:</p>\n\n<pre><code>unordered_map &lt;long long , int&gt; a;\nmap &lt;long long , int&gt; b;\nlong long c[1000000];\n</code></pre>\n\n<p><code>a</code> and <code>b</code> have 1000000 stored elements. </p>\n\n<p>I want to keep it as simple as possible. I searched on the internet and I didn't find a proper answer. I found that <code>map</code> and <code>unordered_map</code> use more memory than an <code>array</code>, but I don't know how to approach it. </p>\n\n<p>EDIT: How to approach the memory differences, like if I store exact the same 2 elements, what are the memory differences.</p>\n"}, {"tags": ["c++", "arrays", "pointers", "matrix", "2d"], "comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1577294139, "post_id": 59480422, "comment_id": 105137677, "body": "<code>int** mat3 = new int* [c3];</code> - have you ever considered using some containers and/or smart pointers? What you just wrote there <i>might</i> be ok as C++98, but in 2019 is is really <i>not</i> how you&#39;d do it.."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1577294358, "post_id": 59480422, "comment_id": 105137724, "body": "<code>system(&quot;pause&quot;);</code> &lt;-- not portable. Don&#39;t do that if you want your code to be usable across different operating systems. Even when <code>system</code> is available, don&#39;t use it - it&#39;s a security nightmare."}, {"owner": {"reputation": 4915, "user_id": 10686048, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bffd06d00a80b9b69e83f561ee5a392?s=128&d=identicon&r=PG&f=1", "display_name": "ChrisMM", "link": "https://stackoverflow.com/users/10686048/chrismm"}, "edited": false, "score": 3, "creation_date": 1577294507, "post_id": 59480422, "comment_id": 105137753, "body": "0xFDFDFDFD is <i>Used by Microsoft&#39;s C/C++ debug malloc() function to mark &quot;no man&#39;s land&quot; guard bytes before and after allocated heap memory,[23] and some debug Secure C-Runtime functions implemented by Microsoft (e.g. strncat_s)</i> you are going out of bounds."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1577295216, "post_id": 59480422, "comment_id": 105137864, "body": "The following link shows the debugging magic codes: <a href=\"https://stackoverflow.com/a/127404/487892\">https://stackoverflow.com/a/127404/487892</a>"}, {"owner": {"reputation": 3531, "user_id": 10553341, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba6a76c909bfdb760607076ee5aad83c?s=128&d=identicon&r=PG&f=1", "display_name": "Damien", "link": "https://stackoverflow.com/users/10553341/damien"}, "edited": false, "score": 0, "creation_date": 1577305030, "post_id": 59480422, "comment_id": 105139657, "body": "It seems to be some confusion with notation: here c1 corresponds to the number of rows and r1 to the number of columns, when looking at implementation of the multiplication"}], "owner": {"reputation": 21, "user_id": 12370284, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ff185d9a946cc6b92778b1680721d30?s=128&d=identicon&r=PG&f=1", "display_name": "zomy2000", "link": "https://stackoverflow.com/users/12370284/zomy2000"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 81, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1577293766, "creation_date": 1577293766, "question_id": 59480422, "link": "https://stackoverflow.com/questions/59480422/dynamic-2d-array-matrix-multiplication-access-violation-reading-location-0xfd", "title": "Dynamic 2D Array - Matrix multiplication (Access violation reading location 0xFDFDFDFD)", "body": "<p>Actually very confused trying to do this, and it throwing this error doesn't help much.</p>\n\n<p>the Matrices I try to enter to recreate issue are:</p>\n\n<p>Mat1 = {3}              (1 row x 1 column)\nMat2 = {1 2 3}          (1 row x 3 columns)</p>\n\n<p>The code functioned fine when i tried 2 (2x2) arrays, I think the issue lies within the for lope with interval \"k\" when trying to set values of mat3. </p>\n\n<pre><code>using namespace std;\n#include &lt;iostream&gt;\n#include &lt;cstdlib&gt;\n\nint c1, c2, r1, r2;\n\nvoid multiply(int c1, int r2, int c2, int r1, int** mat1, int** mat2){\n    if (r1 != c2) {\n        return ;\n    }\n    else {\n        int c3 = r2;\n        int r3 = c1;\n        int** mat3 = new int* [c3];\n        for (int i = 0; i &lt; c3; i++) {\n            mat3[i] = new int[r3];\n        }\n        for (int i = 0; i &lt; c3; i++) {\n            for (int j = 0; j &lt; r3; j++) {\n                for (int k = 0; k &lt; c2; k++)\n                {\n                    mat3[i][j] += mat1[i][k] * mat2[k][j];\n                }\n            }\n        }\n\n        cout &lt;&lt; endl &lt;&lt; \"Matrix 3:\" &lt;&lt; endl;\n        for (int i = 0; i &lt; c3; i++) {\n            for (int j = 0; j &lt; r3; j++) {\n                cout &lt;&lt; mat3[i][j] &lt;&lt; \" \";\n            }\n            cout &lt;&lt; endl;\n        }\n\n    }\n}\nint main() {\n\n    cout &lt;&lt; \"Enter size of matrix 1 \\nColumns then rows\" &lt;&lt; endl;\n    cin &gt;&gt; c1 &gt;&gt; r1;\n    int** mat1 = new int* [r1];\n    for (int i = 0; i &lt; r1; i++) {\n        mat1[i] = new int[c1];\n    }\n    cout &lt;&lt; \"Enter values of matrix 1; left to right then top down\" &lt;&lt; endl;\n    for (int i = 0; i &lt; r1; i++) {\n        for (int j = 0; j &lt; c1; j++) {\n            cin &gt;&gt; mat1[i][j];\n        }\n    }\n    cout &lt;&lt; \"Enter size of matrix 2 \\nColumns then rows\" &lt;&lt; endl;\n    cin &gt;&gt; c2 &gt;&gt; r2;\n    int** mat2 = new int* [r2];\n    for (int i = 0; i &lt; r2; i++) {\n        mat2[i] = new int[c2];\n    }\n    cout &lt;&lt; \"Enter values of matrix 2; left to right then top down\" &lt;&lt; endl;\n    for (int i = 0; i &lt; r2; i++) {\n        for (int j = 0; j &lt; c2; j++) {\n            cin &gt;&gt; mat2[i][j];\n        }\n    }\n\n\n    cout &lt;&lt; endl &lt;&lt; \"Matrix 1:\" &lt;&lt; endl;\n    for (int i = 0; i &lt; r1; i++) {\n        for (int j = 0; j &lt; c1; j++) {\n            cout &lt;&lt; mat1[i][j] &lt;&lt; \" \";\n        }\n        cout &lt;&lt; endl;\n    }\n    cout &lt;&lt; endl &lt;&lt; \"Matrix 2:\" &lt;&lt; endl;\n    for (int i = 0; i &lt; r2; i++) {\n        for (int j = 0; j &lt; c2; j++) {\n            cout &lt;&lt; mat2[i][j] &lt;&lt; \" \";\n        }\n        cout &lt;&lt; endl;\n    }\n    multiply(r1, c2, r2, c1, mat1, mat2);\n    system(\"pause\");\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "arrays", "dictionary"], "comments": [{"owner": {"reputation": 199, "user_id": 12543764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ebe795153166f4d734b5f3d7d9168877?s=128&d=identicon&r=PG&f=1", "display_name": "sonelektrikci", "link": "https://stackoverflow.com/users/12543764/sonelektrikci"}, "edited": false, "score": 0, "creation_date": 1577348702, "post_id": 59480280, "comment_id": 105146586, "body": "Or is it possible to get this template with lists or vectors?"}, {"owner": {"reputation": 15165, "user_id": 1116364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b67dfca0caba03083330d39a304b1766?s=128&d=identicon&r=PG", "display_name": "Daniel Jour", "link": "https://stackoverflow.com/users/1116364/daniel-jour"}, "edited": false, "score": 1, "creation_date": 1577349029, "post_id": 59480280, "comment_id": 105146687, "body": "please make a minimal runnable example"}, {"owner": {"reputation": 199, "user_id": 12543764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ebe795153166f4d734b5f3d7d9168877?s=128&d=identicon&r=PG&f=1", "display_name": "sonelektrikci", "link": "https://stackoverflow.com/users/12543764/sonelektrikci"}, "reply_to_user": {"reputation": 15165, "user_id": 1116364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b67dfca0caba03083330d39a304b1766?s=128&d=identicon&r=PG", "display_name": "Daniel Jour", "link": "https://stackoverflow.com/users/1116364/daniel-jour"}, "edited": false, "score": 0, "creation_date": 1577349301, "post_id": 59480280, "comment_id": 105146778, "body": "i add simple example about what i get"}, {"owner": {"reputation": 199, "user_id": 12543764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ebe795153166f4d734b5f3d7d9168877?s=128&d=identicon&r=PG&f=1", "display_name": "sonelektrikci", "link": "https://stackoverflow.com/users/12543764/sonelektrikci"}, "reply_to_user": {"reputation": 15165, "user_id": 1116364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b67dfca0caba03083330d39a304b1766?s=128&d=identicon&r=PG", "display_name": "Daniel Jour", "link": "https://stackoverflow.com/users/1116364/daniel-jour"}, "edited": false, "score": 0, "creation_date": 1577356555, "post_id": 59480280, "comment_id": 105149203, "body": "Is this what you said?"}], "answers": [{"tags": [], "owner": {"reputation": 199, "user_id": 12543764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ebe795153166f4d734b5f3d7d9168877?s=128&d=identicon&r=PG&f=1", "display_name": "sonelektrikci", "link": "https://stackoverflow.com/users/12543764/sonelektrikci"}, "is_accepted": false, "score": 0, "last_activity_date": 1577358829, "creation_date": 1577358829, "answer_id": 59487624, "question_id": 59480280, "link": "https://stackoverflow.com/questions/59480280/how-to-reach-arrays-elements-from-map/59487624#59487624", "title": "How to reach array&#39;s elements from map?", "body": "<p>I changed the codes like this; </p>\n\n<pre><code>for(int i=0;i&lt;courseAdd;++i)\n    {\n        setCourseName(a);\n        setHours(b);\n        getCourseList().insert({a, b});\n        total += getHours();\n        matchMap.insert({make_pair(a,b),make_pair(day1[i],dayHours)});\n    }\n</code></pre>\n\n<hr>\n\n<pre><code>void Course::seeMap()\n{\n    map&lt;pair&lt;string,int&gt;,pair&lt;string ,Array&gt; &gt;::iterator it;\n    for(it = matchMap.begin();it!=matchMap.end();++it)\n    {\n        cout&lt;&lt;(it-&gt;first).first&lt;&lt;\"---&gt;\"&lt;&lt;(it-&gt;first).second&lt;&lt;\"---&gt;\"&lt;&lt;(it-&gt;second).first&lt;&lt;endl;\n    }\n}\n</code></pre>\n\n<p>And I get the template which I want.</p>\n\n<pre><code>How many course you want to add?\n2\nEnter the name of course and number of hours\nEnter the course name\n214124124\nEnter the course hours\n4\nEnter the course name\n12512515\nEnter the course hours\n5\nYou added the courses succesfully!\n12512515---&gt;5---&gt;Tuesday\n214124124---&gt;4---&gt;Monday\n</code></pre>\n"}], "owner": {"reputation": 199, "user_id": 12543764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ebe795153166f4d734b5f3d7d9168877?s=128&d=identicon&r=PG&f=1", "display_name": "sonelektrikci", "link": "https://stackoverflow.com/users/12543764/sonelektrikci"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 67, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1577358829, "creation_date": 1577292599, "last_edit_date": 1577349284, "question_id": 59480280, "link": "https://stackoverflow.com/questions/59480280/how-to-reach-arrays-elements-from-map", "title": "How to reach array&#39;s elements from map?", "body": "<p>Here is my codes; </p>\n\n<p>I have map and arrays like this;</p>\n\n<pre><code>Array dayHours{0,0,0,0,0,0};\nArray1 day{\"Monday\",\"Tuesday\",\"Wednesday\",\"Thursday\",\"Friday\"};\nmap&lt;pair&lt;string,int&gt;,pair&lt;Array1 ,Array&gt; &gt; matchMap;\n</code></pre>\n\n<p>And i have a function like this;</p>\n\n<pre><code>void Course::addCourse()\n{\n    string a;\n    int b;\n    int total;\n    int courseAdd;\n    cout&lt;&lt;\"How many course you want to add?\"&lt;&lt;endl;\n    cin&gt;&gt;courseAdd;\n    cout&lt;&lt;\"Enter the name of course and number of hours\"&lt;&lt;endl;\n    for(int i=0;i&lt;courseAdd;++i)\n    {\n\n        setCourseName(a);\n        setHours(b);\n        getCourseList().insert({a, b});\n        total += getHours();\n        matchMap.insert({make_pair(a,b),make_pair(day,dayHours)});\n    }\n</code></pre>\n\n<p>Here is the print function for map:</p>\n\n<pre><code>void Course::seeMap()\n{\n    map&lt;pair&lt;string,int&gt;,pair&lt;Array1 ,Array&gt; &gt;::iterator it;\n    for(it=matchMap.begin();it!=matchMap.end();++it)\n    {\n        for(int i=0;i&lt;5;++i)\n        {\n            cout&lt;&lt;(it-&gt;first).first&lt;&lt;(it-&gt;first).second&lt;&lt;(it-&gt;second).first[i]&lt;&lt;endl;\n        }\n    }\n}\n</code></pre>\n\n<p>Here is what i get at the end:</p>\n\n<pre><code>    How many course you want to add?\n2\nEnter the name of course and number of hours\nEnter the course name\n124124124\nEnter the course hours\n5\nEnter the course name\n12414124\nEnter the course hours\n6\nYou added the courses succesfully!\n124124124---&gt;5---&gt;Monday\n124124124---&gt;5---&gt;Tuesday\n124124124---&gt;5---&gt;Wednesday\n124124124---&gt;5---&gt;Thursday\n124124124---&gt;5---&gt;Friday\n12414124---&gt;6---&gt;Monday\n12414124---&gt;6---&gt;Tuesday\n12414124---&gt;6---&gt;Wednesday\n12414124---&gt;6---&gt;Thursday\n12414124---&gt;6---&gt;Friday\n</code></pre>\n\n<p>What i need is a template like this; </p>\n\n<pre><code>Coursename1 ---&gt; Coursehour1 ---&gt; Monday;\nCoursename2 ---&gt; Coursehour2 ---&gt; Tuesday;\nCoursename3 ---&gt; Coursehour3 ----&gt; wednesday;\n</code></pre>\n\n<p>....\nHow can i organize the code for a template like this?</p>\n\n<p>Here is a minimal example for everyone can understand what i get.</p>\n\n<pre><code>How many course you want to add?\n1\nEnter the name of course and number of hours\nEnter the course name\nCoursenam1\nEnter the course hours\n4\nYou added the courses succesfully!\nCoursenam1---&gt;4---&gt;Monday\nCoursenam1---&gt;4---&gt;Tuesday\nCoursenam1---&gt;4---&gt;Wednesday\nCoursenam1---&gt;4---&gt;Thursday\nCoursenam1---&gt;4---&gt;Friday\n</code></pre>\n"}, {"tags": ["c++", "c++11"], "comments": [{"owner": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 0, "creation_date": 1577293717, "post_id": 59480276, "comment_id": 105137568, "body": "Surprisingly an almost exact duplicate question was asked a few days ago"}, {"owner": {"reputation": 148, "user_id": 10409952, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e37fe24c3bd70ee72376302fc440906b?s=128&d=identicon&r=PG&f=1", "display_name": "SAR", "link": "https://stackoverflow.com/users/10409952/sar"}, "reply_to_user": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 0, "creation_date": 1577294324, "post_id": 59480276, "comment_id": 105137715, "body": "@Borgleader, the link you suggested answers my question."}], "answers": [{"tags": [], "owner": {"reputation": 2041, "user_id": 7316365, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/84de9f27708456d85bf1078aa51155b2?s=128&d=identicon&r=PG&f=1", "display_name": "Vivick", "link": "https://stackoverflow.com/users/7316365/vivick"}, "is_accepted": false, "score": 0, "last_activity_date": 1577292944, "creation_date": 1577292944, "answer_id": 59480324, "question_id": 59480276, "link": "https://stackoverflow.com/questions/59480276/unexpected-output-type-from-decltype/59480324#59480324", "title": "Unexpected Output Type From decltype", "body": "<p>You can't return two different types depending on the values of the input. Therefore it choses the widest compatible type, here <code>double</code></p>\n"}, {"tags": [], "owner": {"reputation": 71, "user_id": 9047883, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lqpZ7Z8mUHU/AAAAAAAAAAI/AAAAAAAADPY/A2RVqtLf0Hg/photo.jpg?sz=128", "display_name": "Ianau Andrei", "link": "https://stackoverflow.com/users/9047883/ianau-andrei"}, "is_accepted": false, "score": 0, "last_activity_date": 1577293871, "creation_date": 1577293871, "answer_id": 59480433, "question_id": 59480276, "link": "https://stackoverflow.com/questions/59480276/unexpected-output-type-from-decltype/59480433#59480433", "title": "Unexpected Output Type From decltype", "body": "<p>The compiler does not dynamically look up the types in this context. It needs to create the template instance so it chooses the most suitable type, which is <code>double</code> because if it would choose <code>int</code>, there might be a data loss conversion from <code>double</code> to <code>int</code> if it would be the case.</p>\n"}], "owner": {"reputation": 148, "user_id": 10409952, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e37fe24c3bd70ee72376302fc440906b?s=128&d=identicon&r=PG&f=1", "display_name": "SAR", "link": "https://stackoverflow.com/users/10409952/sar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 48, "favorite_count": 0, "closed_date": 1577294159, "answer_count": 2, "score": 0, "last_activity_date": 1577293871, "creation_date": 1577292577, "question_id": 59480276, "link": "https://stackoverflow.com/questions/59480276/unexpected-output-type-from-decltype", "closed_reason": "Duplicate", "title": "Unexpected Output Type From decltype", "body": "<p>I've been experimenting with <code>decltype</code>, trying to figure out the potential benefits of it. I ran this very simple function:<br/></p>\n\n<pre><code>template&lt;class T, class U&gt;\nauto MyFunc(T t, U u) -&gt; decltype(t &lt; u ? t : u)\n{\n  return t &lt; u ? t : u;\n}\n</code></pre>\n\n<p>when calling the function:<br/></p>\n\n<pre><code>auto d = MyFunc(3,3.5);\n\nstd::cout &lt;&lt; d&lt;&lt;'\\n';\nstd::cout&lt;&lt;\"type: \"&lt;&lt;typeid(d).name();\n</code></pre>\n\n<p>I get the following result:</p>\n\n<pre><code>3\ntype: d\n</code></pre>\n\n<p>My question is why the returned type is <code>d</code> (decimal) not <code>i</code> (integer)? Thanks!</p>\n"}, {"tags": ["c++", "linked-list"], "comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 2, "creation_date": 1577292269, "post_id": 59480222, "comment_id": 105137259, "body": "The standard library already has <code>std::list</code> and <code>std::forward_list</code> if you insist on using a horrible data structure like a linked list. Why reinvent the wheel? Btw; a <code>std::vector</code> is likely to serve you better.."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 2, "creation_date": 1577292421, "post_id": 59480222, "comment_id": 105137285, "body": "Ditch all the manual memory management. Learn to use smart pointers and containers. Naked <code>delete</code> is a <i>code smell</i> in modern C++."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1577293215, "post_id": 59480222, "comment_id": 105137462, "body": "Unrelated: Looks like what you are learning is more C than C++. I recommend a <a href=\"https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list\">change in reference materials</a>. For now consider replacing <code>initCar</code> with a  <code>Car</code> constructor, replacing <code>initTrain</code> with a <code>Train</code> constructor, adding a destructor to <code>Train</code> and observing <a href=\"https://stackoverflow.com/questions/4172722/what-is-the-rule-of-three\">the Rule of Three</a>. You can also remove the <code>typedef</code>s. They aren&#39;t necessary in C++."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1577293427, "post_id": 59480222, "comment_id": 105137510, "body": "One of the best ways to debug a linked list is to visualize what&#39;s going on by drawing pictures. Draw the list in its initial state before performing an operation, then draw the expected after. Then following your coded instructions exactly, draw the list after each step of the operation. When you find yourself drawing something silly, you&#39;ve found a bug and probably have a good idea what you should draw instead."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1577293543, "post_id": 59480222, "comment_id": 105137536, "body": "If you still can&#39;t spot the problem, step through the function that&#39;s giving you problems with the debugging utility that came with your development tools. Watch what the program really does and make sure everything matches your drawings. If it doesn&#39;t, you&#39;ve found the bug and need to figure out why the program  violates your expectations."}, {"owner": {"reputation": 13, "user_id": 11422689, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa10214ea0e76b937e8476af2aa11681?s=128&d=identicon&r=PG&f=1", "display_name": "Sean William", "link": "https://stackoverflow.com/users/11422689/sean-william"}, "edited": false, "score": 0, "creation_date": 1577293583, "post_id": 59480222, "comment_id": 105137544, "body": "I know this code might look chunky but my teacher did assign these style coding as homework for the purpose of learning &#39;the basics&#39;. Really appreciate all of your feedbacks"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1577294086, "post_id": 59480222, "comment_id": 105137664, "body": "Writing a linked list is a kind of programmer rite of passage. To successfully write one you have to understand and execute quite a lot in a relatively short amount of time as well as have a solid grasp on the fundamentals. For now remove all of the user input and hardcode values so you can easily test the exact same inputs over and over. This also helps when asking a question here. You can tune the inputs to demonstrate exactly what the problem is and remove all of the code that is not required to demonstrate the problem. Often eliminating all of this extra noise exposes the bug to you."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1577299426, "post_id": 59480222, "comment_id": 105138723, "body": "BTW, you don&#39;t <i>need</i> <code>typedef struct</code> in C++.  Structs and classes are already types.  You should get a better reference book."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 1, "creation_date": 1577299496, "post_id": 59480222, "comment_id": 105138736, "body": "Also, <code>char</code> is for a <i>single</i> letter.  The <code>std::string</code> is for zero or more characters, like names and texts."}], "answers": [{"tags": [], "owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "is_accepted": false, "score": 1, "last_activity_date": 1577295130, "creation_date": 1577295130, "answer_id": 59480593, "question_id": 59480222, "link": "https://stackoverflow.com/questions/59480222/my-linked-list-does-not-print-out-as-expected/59480593#59480593", "title": "My linked list does not print out as expected?", "body": "<p><code>length(l)</code> returns a <code>bool</code>. You then use it as an integer, whereby it's converted to either 0 or 1; it can't ever return a value greater than 1.</p>\n"}], "owner": {"reputation": 13, "user_id": 11422689, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa10214ea0e76b937e8476af2aa11681?s=128&d=identicon&r=PG&f=1", "display_name": "Sean William", "link": "https://stackoverflow.com/users/11422689/sean-william"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1577295130, "creation_date": 1577292072, "question_id": 59480222, "link": "https://stackoverflow.com/questions/59480222/my-linked-list-does-not-print-out-as-expected", "title": "My linked list does not print out as expected?", "body": "<p>I'm trying so hard to find out what's gone wrong with the result. it only prints out 1 information instead of everything in the list. I checked every single function from insert to display but nothing is different from the sample that works. I'm really at a loss now. At first, I thought it was the *l that I forgot to malloc, the isEmptyTrain function was wrong... but after fixing all of these it still does not work at all. Can you help me with this exercise? Below is my code:</p>\n\n<pre><code>    typedef struct Car{\n    char name;\n    int number;\n    struct Car *pNext;\n} Car;\n\ntypedef struct Train{\n    int size;\n    Car *pHead;\n} Train;\nCar *initCar(char name, int number){ \n//  Car *car = (Car*)malloc(sizeof(*car));\n    Car *p = new(Car);\n    p-&gt;name = name;\n    p-&gt;number = number;\n    p-&gt;pNext = NULL;\n    return p;\n}\n//initList\nvoid initTrain(Train *l){\n    l-&gt;size = 0;\n    l-&gt;pHead = NULL;\n}\nbool isTrainEmpty(Train *l){\n    return (l-&gt;size == 0);\n}\nbool isCarEmpty(Car *p){\n    return (p-&gt;number == 0);\n}\nbool length(Train *l){\n    return l-&gt;size;\n}\n\nvoid insert(Car *pNew, Train *l, Car *pOld = NULL){\n    //insert first\n    if(isTrainEmpty(l)){\n        l-&gt;pHead = pNew;\n    }\n    else{\n        pNew-&gt;pNext = pOld-&gt;pNext;\n        pOld-&gt;pNext = pNew;\n    }\n    l-&gt;size++;\n}\nvoid display(Train *l){\n    Car *p = l-&gt;pHead;\n    for(int i = 0; i &lt; length(l); i++){\n        cout &lt;&lt; \"Car \" &lt;&lt; p-&gt;name &lt;&lt; \" has \" &lt;&lt; p-&gt;number &lt;&lt; \" passenger(s)\" &lt;&lt; endl;\n        p = p-&gt;pNext;\n    }\n}\n    int main(){\n    Train *l, obj;\n    l = new(Train);\n    l = &amp;obj;\n    char name;\n    int number = 0, size, add = 0, del = 0;\n    Car *p, *q = NULL;\n\n    initTrain(l);\n    cout &lt;&lt; \"Enter the length of the train: \" &lt;&lt; endl;\n    cin &gt;&gt; size;\n    if(size &lt;= 0) {\n        cout &lt;&lt; \"The length must be greater than 0!\" &lt;&lt; endl;\n        return 0;\n    }\n    else\n        for(int i = 0; i &lt; size; i++){\n            cout &lt;&lt; \"Enter the name of the car (1 char): \" &lt;&lt; endl;\n            cin &gt;&gt; name;\n            cout &lt;&lt; \"Enter the number of passengers on the car: \" &lt;&lt; endl;\n            cin &gt;&gt; number;\n            p = initCar(name, number);\n            if(i == 0){\n                insert(p, l);\n            }\n            else{\n                insert(p, l, q);\n            }\n            q = p; \n        }   \n        display(l); return 0;}\n</code></pre>\n\n<p>Thank you!</p>\n"}, {"tags": ["c++", "c", "string"], "comments": [{"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 1, "creation_date": 1577292074, "post_id": 59480208, "comment_id": 105137217, "body": "Why would you need <code>strcat()</code> or it&#39;s wrapper in C++?"}, {"owner": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 5, "creation_date": 1577292137, "post_id": 59480208, "comment_id": 105137230, "body": "Just use <code>std::string</code>.  No reason to use <code>strcat</code> or C99&#39;s <code>strcat_s</code> in modern C++."}, {"owner": {"reputation": 5, "user_id": 12596413, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAZOVlc92U5nmTo4RlQ3AXNxTq01pOEaPUcVtZW-w=k-s128", "display_name": "GAME_DEV_BOT", "link": "https://stackoverflow.com/users/12596413/game-dev-bot"}, "edited": false, "score": 0, "creation_date": 1577292220, "post_id": 59480208, "comment_id": 105137246, "body": "Because I need to use some particular environment functions like (_dupenv_s)"}, {"owner": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "edited": false, "score": 1, "creation_date": 1577292824, "post_id": 59480208, "comment_id": 105137379, "body": "It isn&#39;t clear what exactly you&#39;re asking. Create a wrapper that does what?"}, {"owner": {"reputation": 5, "user_id": 12596413, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAZOVlc92U5nmTo4RlQ3AXNxTq01pOEaPUcVtZW-w=k-s128", "display_name": "GAME_DEV_BOT", "link": "https://stackoverflow.com/users/12596413/game-dev-bot"}, "reply_to_user": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "edited": false, "score": 0, "creation_date": 1577293124, "post_id": 59480208, "comment_id": 105137441, "body": "Hey @interjay thanks for responding! I edited the question to better explain what I meant."}, {"owner": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "edited": false, "score": 1, "creation_date": 1577293166, "post_id": 59480208, "comment_id": 105137450, "body": "But that&#39;s the signature of <code>strcat</code>. Why don&#39;t you just call that? It isn&#39;t possible to call <code>strcat_s</code> given that signature because you don&#39;t know the buffer size."}, {"owner": {"reputation": 5, "user_id": 12596413, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAZOVlc92U5nmTo4RlQ3AXNxTq01pOEaPUcVtZW-w=k-s128", "display_name": "GAME_DEV_BOT", "link": "https://stackoverflow.com/users/12596413/game-dev-bot"}, "reply_to_user": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "edited": false, "score": 0, "creation_date": 1577293240, "post_id": 59480208, "comment_id": 105137472, "body": "Because in VS2017 you need to enable _crt_secure_no_warnings to use the &quot;outdated&quot; functions. Which I do not want to do. Thanks @interjay"}, {"owner": {"reputation": 5, "user_id": 12596413, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAZOVlc92U5nmTo4RlQ3AXNxTq01pOEaPUcVtZW-w=k-s128", "display_name": "GAME_DEV_BOT", "link": "https://stackoverflow.com/users/12596413/game-dev-bot"}, "reply_to_user": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "edited": false, "score": 0, "creation_date": 1577294083, "post_id": 59480208, "comment_id": 105137662, "body": "Thankyou! I solved the problem using _dupenv_s() and std::strings @interjay"}, {"owner": {"reputation": 5, "user_id": 12596413, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAZOVlc92U5nmTo4RlQ3AXNxTq01pOEaPUcVtZW-w=k-s128", "display_name": "GAME_DEV_BOT", "link": "https://stackoverflow.com/users/12596413/game-dev-bot"}, "reply_to_user": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 0, "creation_date": 1577294096, "post_id": 59480208, "comment_id": 105137666, "body": "Thankyou! I solved the problem using _dupenv_s() and std::strings @Eljay"}, {"owner": {"reputation": 5, "user_id": 12596413, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAZOVlc92U5nmTo4RlQ3AXNxTq01pOEaPUcVtZW-w=k-s128", "display_name": "GAME_DEV_BOT", "link": "https://stackoverflow.com/users/12596413/game-dev-bot"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1577294104, "post_id": 59480208, "comment_id": 105137669, "body": "Thankyou! I solved the problem using _dupenv_s() and std::strings @Slava"}], "answers": [{"comments": [{"owner": {"reputation": 5, "user_id": 12596413, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAZOVlc92U5nmTo4RlQ3AXNxTq01pOEaPUcVtZW-w=k-s128", "display_name": "GAME_DEV_BOT", "link": "https://stackoverflow.com/users/12596413/game-dev-bot"}, "edited": false, "score": 0, "creation_date": 1577294059, "post_id": 59480251, "comment_id": 105137658, "body": "Thankyou! I solved the problem using _dupenv_s() and std::strings @eerorika"}], "tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": true, "score": 1, "last_activity_date": 1577292260, "creation_date": 1577292260, "answer_id": 59480251, "question_id": 59480208, "link": "https://stackoverflow.com/questions/59480208/is-the-wrapper-from-strcat-s-to-strcat-if-there-isnt-is-it-possible-to-c/59480251#59480251", "title": "Is the wrapper from strcat_s() to strcat() ? If there isn&#39;t, is it possible to create one?", "body": "<blockquote>\n  <p>Is there any way to create a wrapper for the strcat_s() function?</p>\n</blockquote>\n\n<p>Yes. Define a function. In the function, call <code>strcat_s</code>. Now your function is a wrapper for <code>strcat_s</code>. </p>\n"}, {"comments": [{"owner": {"reputation": 27440, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1619032066, "post_id": 59481470, "comment_id": 118785121, "body": "<i>the traditional c string handling functions are unsafe by design</i>  <a href=\"https://en.wikipedia.org/wiki/Embrace,_extend,_and_extinguish\" rel=\"nofollow noreferrer\">Hogwash</a>:  &quot;embrace, extend, and exterminate&quot;, is a phrase that the U.S. Department of Justice found that was used internally by Microsoft to describe its strategy for entering product categories involving widely used standards, extending those standards with proprietary capabilities, and then using those differences in order to strongly disadvantage its competitors."}, {"owner": {"reputation": 27440, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1619032205, "post_id": 59481470, "comment_id": 118785167, "body": "<a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1967.htm\" rel=\"nofollow noreferrer\">To wit</a>:  &quot;A widespread fallacy originated by Microsoft&#39;s deprecation of the standard functions in an effort to increase the adoption of the APIs is that every call to the standard functions is necessarily unsafe and should be replaced by one to the &quot;safer&quot; API."}, {"owner": {"reputation": 27440, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1619032274, "post_id": 59481470, "comment_id": 118785192, "body": "<a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1967.htm\" rel=\"nofollow noreferrer\">It&#39;s inherenly multithread-<b><i>unsafe</i></b></a>:   &quot;Unfortunately, since there is only one runtime-constraint handler per-process, components that run in distinct threads cannot make use of the set_constraint_handler() function since doing so could change the handler installed and relied on by other threads.&quot;"}, {"owner": {"reputation": 27440, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1619032343, "post_id": 59481470, "comment_id": 118785214, "body": "<a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1967.htm\" rel=\"nofollow noreferrer\">They are non-portable</a>:  &quot;Microsoft Visual Studio implements an early version of the APIs. However, the implementation is incomplete and conforms neither to C11 nor to the original TR 24731-1. ...   As a result of the numerous deviations from the specification the Microsoft implementation cannot be considered conforming or portable.&quot;"}], "tags": [], "owner": {"reputation": 7116, "user_id": 5083516, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f2aeeefc1a95ddb2f19612150ccd7ba?s=128&d=identicon&r=PG&f=1", "display_name": "plugwash", "link": "https://stackoverflow.com/users/5083516/plugwash"}, "is_accepted": false, "score": -3, "last_activity_date": 1577794503, "last_edit_date": 1577794503, "creation_date": 1577303957, "answer_id": 59481470, "question_id": 59480208, "link": "https://stackoverflow.com/questions/59480208/is-the-wrapper-from-strcat-s-to-strcat-if-there-isnt-is-it-possible-to-c/59481470#59481470", "title": "Is the wrapper from strcat_s() to strcat() ? If there isn&#39;t, is it possible to create one?", "body": "<blockquote>\n  <p>Is there any way to create a wrapper for the strcat_s() function?</p>\n</blockquote>\n\n<p>You can't meaningfully create a wrapper function. The Whole reason MS put those warnings/errors there is that the interfaces of the traditional c string handling functions are unsafe by design.</p>\n\n<p>So while sure technically you could write something like.</p>\n\n<pre><code>void stupid_strcat(char* dest, char * src)\n{\n  strcat_s(dest,strlen(dest)+strlen(src)+1,src);\n}\n</code></pre>\n\n<p>Doing so would just result in something that was slower than strcat and just as unsafe.</p>\n\n<p>If your destination is a directly accessed (not via a pointer) array then you could write a macro like.</p>\n\n<pre><code>#define array_strcat(dest,src) strcat_s(dest,sizeof(dest),src)\n</code></pre>\n\n<blockquote>\n  <p>As personally I feel that it is much more difficult to use.</p>\n</blockquote>\n\n<p>Doing C string handling safely is a pain. Generally in C++ you should avoid using C strings and use std::string or similar instead.</p>\n\n<blockquote>\n  <p>Plus why does it return a errno?</p>\n</blockquote>\n\n<p>strcat_s can detect certain errors at runtime. When such errors are detected the \"constraint handler\" is called. If the constraint handler returns then the error will be passed back up to the caller of strcat_s so it knows an error occoured.</p>\n"}], "owner": {"reputation": 5, "user_id": 12596413, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAZOVlc92U5nmTo4RlQ3AXNxTq01pOEaPUcVtZW-w=k-s128", "display_name": "GAME_DEV_BOT", "link": "https://stackoverflow.com/users/12596413/game-dev-bot"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "closed_date": 1577311603, "accepted_answer_id": 59480251, "answer_count": 2, "score": -3, "last_activity_date": 1619028305, "creation_date": 1577291988, "last_edit_date": 1619028305, "question_id": 59480208, "link": "https://stackoverflow.com/questions/59480208/is-the-wrapper-from-strcat-s-to-strcat-if-there-isnt-is-it-possible-to-c", "closed_reason": "Needs details or clarity", "title": "Is the wrapper from strcat_s() to strcat() ? If there isn&#39;t, is it possible to create one?", "body": "<p>As the question says it all, Is there any way to create a wrapper for the strcat_s() function? As personally I feel that it is much more difficult to use. Plus why does it return a errno?</p>\n<p>I want to make a wrapper which kinda looks like this. Also I don't want to enable _crt_secure_no_warnings</p>\n<pre><code>void (char* dest, char* src) \n{\n    // Execute strcat_s() here\n}\n</code></pre>\n<p>Samuel</p>\n"}, {"tags": ["c++", "algorithm", "c++11", "search", "stl"], "answers": [{"tags": [], "owner": {"reputation": 19910, "user_id": 8012646, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/T8yOZ.png?s=128&g=1", "display_name": "\u30ed\u30fc\u30a6", "link": "https://stackoverflow.com/users/8012646/%e3%83%ad%e3%83%bc%e3%82%a6"}, "is_accepted": true, "score": 10, "last_activity_date": 1577296311, "last_edit_date": 1577296311, "creation_date": 1577291479, "answer_id": 59480157, "question_id": 59480105, "link": "https://stackoverflow.com/questions/59480105/find-out-in-linear-time-whether-there-is-a-pair-in-sorted-vector-that-adds-up-to/59480157#59480157", "title": "Find out in linear time whether there is a pair in sorted vector that adds up to certain value", "body": "<p>As the <code>std::vector</code> is already sorted and you can calculate the sum of a pair <em>on the fly</em>, you can achieve a linear time solution in the size of the vector with O(1) space.</p>\n\n<p>The following is an STL-like implementation that requires no additional space and runs in linear time:</p>\n\n<pre><code>template&lt;typename BidirIt, typename T&gt;\nbool has_pair_sum(BidirIt first, BidirIt last, T sum) {\n    if (first == last)\n        return false; // empty range\n\n   for (--last; first != last;) {\n      if ((*first + *last) == sum)\n         return true; // pair found\n\n      if ((*first + *last) &gt; sum)\n         --last; // decrease pair sum\n      else // (*first + *last) &lt; sum (trichotomy)\n         ++first; // increase pair sum\n   }\n\n    return false;\n}\n</code></pre>\n\n<p>The idea is to traverse the vector from both ends \u2013 front and back \u2013 in opposite directions at the same time and calculate the sum of the pair of elements while doing so.</p>\n\n<p>At the very beginning, the pair consists of the elements with the lowest and the highest values, respectively. If the resulting sum is lower than <code>sum</code>, then advance <code>first</code> \u2013 the iterator pointing at the left end. Otherwise, move <code>last</code> \u2013 the iterator pointing at the right end \u2013 backward. This way, the resulting sum progressively approaches to <code>sum</code>. If both iterators end up pointing at the same element and no pair whose sum is equal to <code>sum</code> has been found, then there is no such a pair.</p>\n\n<pre><code>auto main() -&gt; int {\n   std::vector&lt;int&gt; vec{1, 3, 4, 7, 11, 13, 17};\n\n   std::cout &lt;&lt; has_pair_sum(vec.begin(), vec.end(), 2) &lt;&lt; ' ';\n   std::cout &lt;&lt; has_pair_sum(vec.begin(), vec.end(), 7) &lt;&lt; ' ';\n   std::cout &lt;&lt; has_pair_sum(vec.begin(), vec.end(), 19) &lt;&lt; ' ';\n   std::cout &lt;&lt; has_pair_sum(vec.begin(), vec.end(), 30) &lt;&lt; '\\n';\n}\n</code></pre>\n\n<p>The output is:</p>\n\n<pre><code>0 1 0 1\n</code></pre>\n\n<hr>\n\n<p>Thanks to the generic nature of the function template <code>has_pair_sum()</code> and since it just requires bidirectional iterators, this solution works with <code>std::list</code> as well:</p>\n\n<pre><code>std::list&lt;int&gt; lst{1, 3, 4, 7, 11, 13, 17};\nhas_pair_sum(lst.begin(), lst.end(), 2);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 156, "user_id": 12596264, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-mGcCQ60CP3M/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reupF7gCk4LSynT7DQAmXDYCf2ELQ/photo.jpg?sz=128", "display_name": "Atr0x", "link": "https://stackoverflow.com/users/12596264/atr0x"}, "reply_to_user": {"reputation": 3183, "user_id": 3025453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecaade2979d70e6fa61d1f8bca6f27e1?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Karcher", "link": "https://stackoverflow.com/users/3025453/michael-karcher"}, "edited": false, "score": 0, "creation_date": 1577295508, "post_id": 59480393, "comment_id": 105137914, "body": "Thank you, for your comments. I edited now the Post."}], "tags": [], "owner": {"reputation": 156, "user_id": 12596264, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-mGcCQ60CP3M/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reupF7gCk4LSynT7DQAmXDYCf2ELQ/photo.jpg?sz=128", "display_name": "Atr0x", "link": "https://stackoverflow.com/users/12596264/atr0x"}, "is_accepted": false, "score": 5, "last_activity_date": 1577297140, "last_edit_date": 1577297140, "creation_date": 1577293525, "answer_id": 59480393, "question_id": 59480105, "link": "https://stackoverflow.com/questions/59480105/find-out-in-linear-time-whether-there-is-a-pair-in-sorted-vector-that-adds-up-to/59480393#59480393", "title": "Find out in linear time whether there is a pair in sorted vector that adds up to certain value", "body": "<p>I had the same idea as the one in <a href=\"https://stackoverflow.com/a/59480157/5459839\">the answer of \u7720\u308a\u30cd\u30ed\u30af</a>, but with a little bit more comprehensible implementation.</p>\n\n<pre><code>bool has_pair_sum(std::vector&lt;int&gt; v, int sum){\n    if(v.empty())\n        return false;\n\n    std::vector&lt;int&gt;::iterator p1 = v.begin();\n    std::vector&lt;int&gt;::iterator p2 = v.end(); // points to the End(Null-terminator), after the last element\n    p2--; // Now it points to the last element.\n\n    while(p1 != p2){  \n        if(*p1 + *p2 == sum)\n            return true;\n        else if(*p1 + *p2 &lt; sum){ \n            p1++;\n        }else{\n            p2--;\n        }\n    }\n\n    return false;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1222, "user_id": 7551092, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a0e2bab392d96de1d0c26a683e8ff78?s=128&d=identicon&r=PG&f=1", "display_name": "mss", "link": "https://stackoverflow.com/users/7551092/mss"}, "is_accepted": false, "score": 2, "last_activity_date": 1577542078, "last_edit_date": 1577542078, "creation_date": 1577388638, "answer_id": 59492656, "question_id": 59480105, "link": "https://stackoverflow.com/questions/59480105/find-out-in-linear-time-whether-there-is-a-pair-in-sorted-vector-that-adds-up-to/59492656#59492656", "title": "Find out in linear time whether there is a pair in sorted vector that adds up to certain value", "body": "<p>well, since we are already given sorted array, we can do it with two pointer approach, we first keep a left pointer at start of the array and a right pointer at end of array, then in each iteration we check if sum of value of left pointer index and value of right pointer index is equal or not , if yes, return from here, otherwise we have to decide how to reduce the boundary, that is either increase left pointer or decrease right pointer, so we compare the temporary sum with given sum and if this temporary sum is greater than the given sum then we decide to reduce the right pointer, if we increase left pointer the temporary sum will remain same or only increase but never lesser, so we decide to reduce the right pointer so that temporary sum decrease and we reach near our given sum, similary if temporary sum is less than given sum, so no meaning of reducing the right pointer as temporary sum will either remain sum or decrease more but never increase so we increase our left pointer so our temporary sum increase and we reach near given sum, and we do the same process again and again unless we get the equal sum or left pointer index value becomes greater than right right pointer index or vice versa\nbelow is the code for demonstration,  let me know if something is not clear</p>\n\n<pre><code>bool pairSumExists(vector&lt;int&gt; &amp;a, int &amp;sum){\n    if(a.empty())\n    return false;\n\n    int len = a.size();\n    int left_pointer = 0  , right_pointer = len - 1;\n\n    while(left_pointer &lt; right_pointer){\n        if(a[left_pointer] + a[right_pointer] == sum){\n            return true;\n        }\n        if(a[left_pointer] + a[right_pointer] &gt; sum){\n            --right_pointer;\n        }\n        else\n        if(a[left_pointer] + a[right_poitner] &lt; sum){\n            ++left_pointer;\n        }\n    }\n    return false;\n}\n</code></pre>\n"}], "owner": {"reputation": 133, "user_id": 12596120, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EwRHM.jpg?s=128&g=1", "display_name": "Lui", "link": "https://stackoverflow.com/users/12596120/lui"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 233, "favorite_count": 1, "accepted_answer_id": 59480157, "answer_count": 3, "score": 8, "last_activity_date": 1577798405, "creation_date": 1577291076, "last_edit_date": 1577798405, "question_id": 59480105, "link": "https://stackoverflow.com/questions/59480105/find-out-in-linear-time-whether-there-is-a-pair-in-sorted-vector-that-adds-up-to", "title": "Find out in linear time whether there is a pair in sorted vector that adds up to certain value", "body": "<p>Given an <code>std::vector</code> of distinct elements sorted in ascending order, I want to develop an algorithm that determines whether there are two elements in the collection whose sum is a certain value, <code>sum</code>.</p>\n\n<p>I've tried two different approaches with their respective trade-offs:</p>\n\n<ol>\n<li><p>I can scan the whole vector and, for each element in the vector, apply binary search (<code>std::lower_bound</code>) on the vector for searching an element corresponding to the difference between <code>sum</code> and the current element. This is an O(n log n) time solution that requires no additional space.</p></li>\n<li><p>I can traverse the whole vector and populate an <code>std::unordered_set</code>. Then, I scan the vector and, for each element, I look up in the <code>std::unordered_set</code> for the difference between <code>sum</code> and the current element. Since searching on a hash table runs in constant time on average, this solution runs in linear time. However, this solution requires additional linear space because of the <code>std::unordered_set</code> data structure.</p></li>\n</ol>\n\n<p>Nevertheless, I'm looking for a solution that runs in linear time and requires no additional linear space. Any ideas? It seems that I'm forced to trade speed for space.</p>\n"}, {"tags": ["c++", "templates", "c++17"], "comments": [{"owner": {"reputation": 27306, "user_id": 508595, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7845b0412379ba0f0e2e68d0b2e5d23b?s=128&d=identicon&r=PG&f=1", "display_name": "Jody Hagins", "link": "https://stackoverflow.com/users/508595/jody-hagins"}, "reply_to_user": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1577306075, "post_id": 59480074, "comment_id": 105139832, "body": "@Barry I do not think the answers in the other question answer this.  I believe I understand what is happening - my question is whether this is intended or is it a bug?  clang and gcc treat the exact same code differently.  I want to know which is correct - and why.  However, now that is has been closed, I don&#39;t know if anyone will see this comment..."}, {"owner": {"reputation": 27306, "user_id": 508595, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7845b0412379ba0f0e2e68d0b2e5d23b?s=128&d=identicon&r=PG&f=1", "display_name": "Jody Hagins", "link": "https://stackoverflow.com/users/508595/jody-hagins"}, "edited": false, "score": 0, "creation_date": 1577306532, "post_id": 59480074, "comment_id": 105139903, "body": "Furthermore, note that this has nothing to do with the standard library, because it is neither included nor used here.  It has to do with the difference between the alias template and the class template, and whether clang is wrong for giving the error or gcc is wrong for not giving the error."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1577309043, "post_id": 59480074, "comment_id": 105140314, "body": "It&#39;s a core language issue. The correct behavior is an open question."}], "owner": {"reputation": 27306, "user_id": 508595, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7845b0412379ba0f0e2e68d0b2e5d23b?s=128&d=identicon&r=PG&f=1", "display_name": "Jody Hagins", "link": "https://stackoverflow.com/users/508595/jody-hagins"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 36, "favorite_count": 0, "closed_date": 1577297770, "answer_count": 0, "score": 0, "last_activity_date": 1577297790, "creation_date": 1577290671, "last_edit_date": 1577297790, "question_id": 59480074, "link": "https://stackoverflow.com/questions/59480074/is-clang-right-to-give-a-redefinition-error-of-this-partial-specialization-using", "closed_reason": "Duplicate", "title": "Is clang right to give a redefinition error of this partial specialization using std::void_t?", "body": "<p>Given this example...</p>\n\n<pre><code>template &lt;typename T, typename U&gt; struct FooBlarg;\ntemplate &lt;typename T, typename U, typename = void&gt; struct Blip;\ntemplate &lt;typename T, typename U&gt;\nstruct Blip&lt;T, U, std::void_t&lt;decltype(FooBlarg&lt;T, U&gt;::value)&gt;&gt;\n{\n};\ntemplate &lt;typename T, typename U&gt;\nstruct Blip&lt;T, U, std::void_t&lt;typename T::zz, typename T::yy&gt;&gt;\n{\n};\n</code></pre>\n\n<p>clang emits this error...</p>\n\n<pre><code>&lt;source&gt;:14:8: error: redefinition of 'Blip&lt;T, U, std::void_t&lt;typename T::zz, typename T::yy&gt; &gt;'\nstruct Blip&lt;T, U, std::void_t&lt;typename T::zz, typename T::yy&gt;&gt;\n       ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n\n&lt;source&gt;:10:8: note: previous definition is here\nstruct Blip&lt;T, U, std::void_t&lt;decltype(FooBlarg&lt;T, U&gt;::value)&gt;&gt;\n</code></pre>\n\n<p>However, gcc does not give this error.  I tried with both libc++ and libstdc++, so I then got rid of the standard library entirely with this example.</p>\n\n<pre><code>template &lt;typename...&gt; using myvoid1 = void;\n\ntemplate &lt;typename...&gt; struct myvoid2_ { using type = void; };\ntemplate &lt;typename ... Ts&gt; using myvoid2 = typename myvoid2_&lt;Ts...&gt;::type;\n\ntemplate &lt;typename T, typename U&gt; struct FooBlarg;\ntemplate &lt;typename T, typename U, typename = void&gt; struct Blip;\ntemplate &lt;typename T, typename U&gt;\nstruct Blip&lt;T, U, VOIDT&lt;decltype(FooBlarg&lt;T, U&gt;::value)&gt;&gt;\n{\n};\ntemplate &lt;typename T, typename U&gt;\nstruct Blip&lt;T, U, VOIDT&lt;typename T::zz, typename T::yy&gt;&gt;\n{\n};\n</code></pre>\n\n<p>If I <code>#define VOIDT myvoid1</code>, which is the most likely implementation of std::void_t, then I get the exact same compiler error.  However, if I <code>#define VOIDT myvoid2</code>, which is the alternate implementation that has been used to get around a problem that has supposedly been fixed, then it works as I expect.</p>\n\n<p>Obviously, clang does not have the original issue referred to in CWG 1558, because other use cases are not problematic.</p>\n\n<p>So, is clang wrong here, or are both gcc and my expectations wrong for these specializations?</p>\n\n<p>I looked for a bug report and the closes I found was this one: <a href=\"https://bugs.llvm.org/show_bug.cgi?id=33655\" rel=\"nofollow noreferrer\">https://bugs.llvm.org/show_bug.cgi?id=33655</a></p>\n\n<p>Thanks!</p>\n"}, {"tags": ["c++", "linux", "multithreading", "console", "stdin"], "comments": [{"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1577289353, "post_id": 59479781, "comment_id": 105136629, "body": "When a process receives a signal, it can be directed to any thread that does not have it blocked.  Thus, if you want to be sure that the <code>getchar()</code> is interrupted by the signal then you must make sure that the signal is delivered to its thread by blocking it in all other threads."}, {"owner": {"reputation": 75, "user_id": 9974172, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/275ec2cb1cc369875bfe185d8f48dbe1?s=128&d=identicon&r=PG&f=1", "display_name": "fsmoke", "link": "https://stackoverflow.com/users/9974172/fsmoke"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1577294582, "post_id": 59479781, "comment_id": 105137764, "body": "My application is very big(its just test code), so i don&#39;t know all threads of my app, threads could be created by plugins, or in other user code or in 3rd libs. So i can&#39;t use this solution..."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1577304758, "post_id": 59479781, "comment_id": 105139606, "body": "There is no other solution, @fsmoke.  If you want to rely on using a signal to interrupt a system call, then you <i>must</i> take appropriate measures to ensure that the signal is delivered to the thread in which that syscall is running.  If you cannot ensure that, then you need an altogether different approach."}, {"owner": {"reputation": 75, "user_id": 9974172, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/275ec2cb1cc369875bfe185d8f48dbe1?s=128&d=identicon&r=PG&f=1", "display_name": "fsmoke", "link": "https://stackoverflow.com/users/9974172/fsmoke"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1577347199, "post_id": 59479781, "comment_id": 105146190, "body": "&quot; If you want to rely on using a signal to interrupt a system call&quot;, sorry but i don&#39;t know other way to interrupt getchar.. may be there is another way..without signals??"}, {"owner": {"reputation": 75, "user_id": 9974172, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/275ec2cb1cc369875bfe185d8f48dbe1?s=128&d=identicon&r=PG&f=1", "display_name": "fsmoke", "link": "https://stackoverflow.com/users/9974172/fsmoke"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1577355461, "post_id": 59479781, "comment_id": 105148795, "body": "@JohnBollinger you little bit wrong about &quot;There is no other solution&quot;...cos finally I found the right solution. See below."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1577378585, "post_id": 59479781, "comment_id": 105156473, "body": "Nothing in your answer contradicts anything I said, @fsmoke.  You have given up on the SIGINT generated by the keystroke necessarily being delivered to any specific thread, so your approach does not satisfy the conditions expressed in my previous comments, and <code>pthread_kill</code> directs a signal to a specific thread, not to a whole process.  You&#39;re welcome for being nudged in the right direction."}], "answers": [{"tags": [], "owner": {"reputation": 75, "user_id": 9974172, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/275ec2cb1cc369875bfe185d8f48dbe1?s=128&d=identicon&r=PG&f=1", "display_name": "fsmoke", "link": "https://stackoverflow.com/users/9974172/fsmoke"}, "is_accepted": false, "score": 0, "last_activity_date": 1577355391, "creation_date": 1577355391, "answer_id": 59486933, "question_id": 59479781, "link": "https://stackoverflow.com/questions/59479781/how-to-interrupt-getchar-in-second-thread-with-sigint/59486933#59486933", "title": "How to interrupt getchar in second thread with SIGINT", "body": "<p>Finally I found the right solution. SIGINT signal interrupts getchar operation only if this signal sent to the same thread with getchar. So if your application have tons of threads - we have situation in which probability of catching SIGINT in right thread is very small. So you will be pending getchar infinitely.... </p>\n\n<p>But! if we will carafully read pthread documentation about pthread_kill function we can see this line</p>\n\n<blockquote>\n  <p>pthread_kill - send a signal to a thread</p>\n</blockquote>\n\n<p>pthread_kill - not killing thread in fact it's send signal. Eureka! We can resend signal SIGINT into the right thread. See code below</p>\n\n<pre><code>std::optional&lt;std::thread&gt; trd;\nstd::mutex mtx;\n\nvoid int_handler(int signum)\n{\n    std::lock_guard lk(mtx);\n    if (trd &amp;&amp; std::this_thread::get_id() != trd-&gt;get_id())\n        pthread_kill(trd-&gt;native_handle(), signum);\n}\n\nvoid run()\n{\n    printf(\"before getchar\\n\");\n    auto c = getchar();\n    printf(\"after getchar\\n\");\n}\n\nint main()\n{\n    //////Setup SIGINT handler\n\n    struct sigaction sh;\n\n    sh.sa_handler = int_handler;\n    sigemptyset(&amp;sh.sa_mask);\n    sh.sa_flags = 0;\n    sigaction(SIGINT, &amp;sh, NULL);\n    return 0;\n\n    //////Setup console\n\n    termios _prev{ 0 };\n    // grab old terminal i/o settings\n    tcgetattr(0, &amp;_prev);\n    // make new settings same as old settings \n    auto current = _prev;\n    // disable buffered i/o\n    current.c_lflag &amp;= ~ICANON;\n    // set no echo mode\n    current.c_lflag &amp;= ~ECHO;\n\n    // use these new terminal i/o settings now\n    tcsetattr(0, TCSANOW, &amp;current);\n\n    {\n        std::lock_guard lk(mtx);\n        trd.emplace(&amp;run);\n    }\n\n    trd-&gt;join();\n} \n</code></pre>\n"}], "owner": {"reputation": 75, "user_id": 9974172, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/275ec2cb1cc369875bfe185d8f48dbe1?s=128&d=identicon&r=PG&f=1", "display_name": "fsmoke", "link": "https://stackoverflow.com/users/9974172/fsmoke"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 316, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1578305549, "creation_date": 1577288177, "last_edit_date": 1578305549, "question_id": 59479781, "link": "https://stackoverflow.com/questions/59479781/how-to-interrupt-getchar-in-second-thread-with-sigint", "title": "How to interrupt getchar in second thread with SIGINT", "body": "<p>I need to handle SIGINT in my console application, I found many examples about sa_flags = 0; of sigaction structure - and it's mean getchar will be aborted and return -1. But this is not working with multithreading</p>\n\n<p>Look at my code</p>\n\n<pre><code>\nint p[2];\nFILE *stdin_writer = nullptr;\n\nvoid int_handler(int signum)\n{\n    //////do nothing\n\n    //////or write something into stdin..... also no help\n\n    //write(fileno(stdin), s, sizeof s - 1);\n\n    //////using pipes deadlocks application\n\n    //stdin_writer = fdopen(p[1], \"w\");\n    //fputc('g', stdin_writer);\n}\n\nvoid run()\n{\n\n    //pipe(p);\n    //dup2(p[0], STDIN_FILENO);\n\n    printf(\"before getchar\\n\");\n    auto c = getchar();\n    printf(\"after getchar\\n\");\n}\n\nint main()\n{\n    //////Setup SIGINT handler\n\n    struct sigaction sh;\n\n    sh.sa_handler = int_handler;\n    sigemptyset(&amp;sh.sa_mask);\n    sh.sa_flags = 0;\n    sigaction(SIGINT, &amp;sh, NULL);\n    return 0;\n\n    //////Setup console\n\n    termios _prev{ 0 };\n    // grab old terminal i/o settings\n    tcgetattr(0, &amp;_prev);\n    // make new settings same as old settings \n    auto current = _prev;\n    // disable buffered i/o\n    current.c_lflag &amp;= ~ICANON;\n    // set no echo mode\n    current.c_lflag &amp;= ~ECHO;\n\n    // use these new terminal i/o settings now\n    tcsetattr(0, TCSANOW, &amp;current);\n\n    std::thread trd(&amp;run);\n\n    trd.join();\n} \n</code></pre>\n\n<p>I want to interrupt getchar on <kbd>Ctrl</kbd>+<kbd>C</kbd> - similar code works just fine in single thread version (without std::thread stuff), but not in multithread. Please help me anyone - I am already stuck in this problem on whole day</p>\n"}, {"tags": ["c++", "gcc", "g++", "powerpc", "webkitgtk"], "comments": [{"owner": {"reputation": 4756, "user_id": 1364149, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/Y25ip.jpg?s=128&g=1", "display_name": "Shloim", "link": "https://stackoverflow.com/users/1364149/shloim"}, "edited": false, "score": 2, "creation_date": 1577287698, "post_id": 59479700, "comment_id": 105136286, "body": "You have a coding problem, not a gcc problem. You can try using more forward declarations instead of .h file inclusions in your .h files, hiding implementations using the pimpl idiom, and reducing the usage of templates (and boost!)."}, {"owner": {"reputation": 135, "user_id": 3651337, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1FcMr.jpg?s=128&g=1", "display_name": "Raven King", "link": "https://stackoverflow.com/users/3651337/raven-king"}, "reply_to_user": {"reputation": 4756, "user_id": 1364149, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/Y25ip.jpg?s=128&g=1", "display_name": "Shloim", "link": "https://stackoverflow.com/users/1364149/shloim"}, "edited": false, "score": 0, "creation_date": 1577288179, "post_id": 59479700, "comment_id": 105136375, "body": "Some day I hope to know enough about c and c++ to make useful edits like that. Not there yet though."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1577288196, "post_id": 59479700, "comment_id": 105136380, "body": "You could add more swap (some 16+GB). It will be insanely slow, but <i>should</i> allow the compilation to finish)."}, {"owner": {"reputation": 135, "user_id": 3651337, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1FcMr.jpg?s=128&g=1", "display_name": "Raven King", "link": "https://stackoverflow.com/users/3651337/raven-king"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1577288252, "post_id": 59479700, "comment_id": 105136396, "body": "@JesperJuhl ultimately that is what I will need to do, however I was hoping there was some way I can reduce the amount required."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 3, "creation_date": 1577288484, "post_id": 59479700, "comment_id": 105136449, "body": "@RavenKing as Shloim said, you can make more use of forward declarations, remove unnecessary includes, reduce template usage (utilize extern templates) etc, to ease the pain. But at the end of the day you have to accept that compiling any significantly sized modern C++ program simply is quite memory intensive. And A 1GB ram/1GB swap machine <i>really</i> is <i>quite</i> underpowered for development work in 2019.."}, {"owner": {"reputation": 17580, "user_id": 493106, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/48b0c7ab491edf2f69e63773181a22b5?s=128&d=identicon&r=PG", "display_name": "xaxxon", "link": "https://stackoverflow.com/users/493106/xaxxon"}, "edited": false, "score": 1, "creation_date": 1577289559, "post_id": 59479700, "comment_id": 105136683, "body": "Smaller compilation units."}], "answers": [{"tags": [], "owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "is_accepted": true, "score": 1, "last_activity_date": 1577387271, "creation_date": 1577387271, "answer_id": 59492459, "question_id": 59479700, "link": "https://stackoverflow.com/questions/59479700/reduce-g-ram-usage/59492459#59492459", "title": "Reduce g++ RAM usage", "body": "<p>Webkitgtk is notoriously demanding of RAM (and time) during compilation. The Webgtk <a href=\"https://trac.webkit.org/wiki/BuildingGtk\" rel=\"nofollow noreferrer\">build instructions</a> link to <a href=\"https://trac.webkit.org/wiki/WebKitGTK/SpeedUpBuild\" rel=\"nofollow noreferrer\">some suggestions</a>, which might be useful. But the overall impression those pages give is that you need considerably more than 1GB of RAM, unless you are prepared to let the build run for some time, possibly days.</p>\n\n<p>Perhaps you have access to one or more other computers. In that case, you could consider setting up cross-compilation environments and maybe even installing <a href=\"https://github.com/distcc/distcc/blob/master/README.md\" rel=\"nofollow noreferrer\">distcc</a> in order to make use of these additional resources. </p>\n\n<p>Setting up a cross-compilation environment for an OS X target is a bit of a project, but once you've got that set up distcc is pretty straightforward. And it won't take very many compiles to pay back your investment in time through significantly reduced compile times.</p>\n"}], "owner": {"reputation": 135, "user_id": 3651337, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1FcMr.jpg?s=128&g=1", "display_name": "Raven King", "link": "https://stackoverflow.com/users/3651337/raven-king"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 0, "accepted_answer_id": 59492459, "answer_count": 1, "score": 2, "last_activity_date": 1577387271, "creation_date": 1577287502, "question_id": 59479700, "link": "https://stackoverflow.com/questions/59479700/reduce-g-ram-usage", "title": "Reduce g++ RAM usage", "body": "<p>I haven't really found a solid answer to this question other than \"get more ram\". Is there a way to reduce the memory used by g++ during the compile process? I am (for reasons) trying to compile webkitgtk on a g4 mac mini with 1GB ram. It can't be upgraded. Current compilation options are \n<code>-Os -mabi=altivec -mcpu=native -mtune=native</code>.\nIt has 1GB ram and 1GB swap but just runs out of memory. While I could theoretically just keep adding swap space, in practice this gets very slow, and I want to minimize that.</p>\n"}, {"tags": ["c++", "visual-studio-2019", "wdk"], "comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1577289049, "post_id": 59479631, "comment_id": 105136563, "body": "Is this: <a href=\"https://devblogs.microsoft.com/cppblog/spectre-mitigations-in-msvc/\" rel=\"nofollow noreferrer\">devblogs.microsoft.com/cppblog/spectre-mitigations-in-msvc</a> and the <code>&#47;Qspectre</code> compiler option, maybe, what you are looking for? (Note that you&#39;d need to recompile <i>all</i> code, including libraries you use, with <code>&#47;Qspectre</code> to take full advantage)"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1577289372, "post_id": 59479631, "comment_id": 105136639, "body": "See <a href=\"https://docs.microsoft.com/en-us/cpp/build/reference/qspectre?view=vs-2019\" rel=\"nofollow noreferrer\">/Qspectre</a> documentation."}, {"owner": {"reputation": 41, "user_id": 12420484, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaa5ab38763cbc7e4c42c79fe81a05cd?s=128&d=identicon&r=PG", "display_name": "Anonymous-User", "link": "https://stackoverflow.com/users/12420484/anonymous-user"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1577289374, "post_id": 59479631, "comment_id": 105136642, "body": "@JesperJuhl Thank you for answer! Now everything is working!"}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "is_accepted": true, "score": 4, "last_activity_date": 1577289558, "creation_date": 1577289558, "answer_id": 59479942, "question_id": 59479631, "link": "https://stackoverflow.com/questions/59479631/error-msb8040-spectre-mitigated-libraries-are-required-for-this-project/59479942#59479942", "title": "error MSB8040: Spectre-mitigated libraries are required for this project", "body": "<p>This: <a href=\"https://devblogs.microsoft.com/cppblog/spectre-mitigations-in-msvc\" rel=\"nofollow noreferrer\">https://devblogs.microsoft.com/cppblog/spectre-mitigations-in-msvc</a> and the <code>/Qspectre</code> compiler option, is probably, what you are looking for? (Note that you'd need to recompile all code, including libraries you use, with <a href=\"https://docs.microsoft.com/en-us/cpp/build/reference/qspectre?view=vs-2019\" rel=\"nofollow noreferrer\">/Qspectre</a> to take full advantage).</p>\n"}], "owner": {"reputation": 41, "user_id": 12420484, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaa5ab38763cbc7e4c42c79fe81a05cd?s=128&d=identicon&r=PG", "display_name": "Anonymous-User", "link": "https://stackoverflow.com/users/12420484/anonymous-user"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 12706, "favorite_count": 0, "accepted_answer_id": 59479942, "answer_count": 1, "score": 3, "last_activity_date": 1605983432, "creation_date": 1577286813, "question_id": 59479631, "link": "https://stackoverflow.com/questions/59479631/error-msb8040-spectre-mitigated-libraries-are-required-for-this-project", "title": "error MSB8040: Spectre-mitigated libraries are required for this project", "body": "<p>I have a problem that I cannot solve. My code:</p>\n\n<pre><code>#include \"ntddk.h\"\n#include &lt;stdlib.h&gt;\n\nNTSTATUS DriverEntry(IN PDRIVER_OBJECT theDriverObject,\n    IN PUNICODE_STRING theRegistryPath)\n{\n    DbgPrint(\"Hello World!\");\n    return STATUS_SUCCESS;\n}\n</code></pre>\n\n<p>My goal is to run this program without any problems. Error message: </p>\n\n<ul>\n<li><p>error MSB8040: Spectre-mitigated libraries are required for this\nproject. Install them from the Visual Studio installer (Individual\ncomponents tab) for any toolsets and architectures being used. Learn\nmore: <a href=\"https://aka.ms/Ofhn4c\" rel=\"nofollow noreferrer\">https://aka.ms/Ofhn4c</a></p>\n\n<p>I added some libraries but the error still apears. Added toolsets:</p></li>\n<li><p>C++ ATL for the latest build tools version 142 (ARM)</p></li>\n<li>C++ ATL for the latest build tools version 142 (ARM64)</li>\n<li>C++ ATL for the latest build tools version (x86 i x64)</li>\n<li>C++ ATL for the latest build tools version 142 with countermeasures for the Specter vulnerability (ARM)</li>\n<li>C++ ATL for the latest build tools version 142 with countermeasures for the Specter vulnerability (ARM64)</li>\n<li>C++ for the latest build tools version 142 with countermeasures for the Specter vulnerability (x86 i x64)</li>\n</ul>\n\n<p>Could someone guide me step by step how to solve it?</p>\n"}, {"tags": ["c++", "class", "matrix", "operator-overloading", "operator-keyword"], "comments": [{"owner": {"reputation": 31823, "user_id": 1960455, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/d22bdc5c04b48a9054586eb64174ea99?s=128&d=identicon&r=PG", "display_name": "t.niese", "link": "https://stackoverflow.com/users/1960455/t-niese"}, "edited": false, "score": 0, "creation_date": 1577286975, "post_id": 59479601, "comment_id": 105136147, "body": "You would need to do something like in this <a href=\"https://stackoverflow.com/a/6969905/1960455\">answer</a> to the question <a href=\"https://stackoverflow.com/questions/6969881\">operator&#91;&#93;&#91;&#93; overload</a>"}, {"owner": {"reputation": 31823, "user_id": 1960455, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/d22bdc5c04b48a9054586eb64174ea99?s=128&d=identicon&r=PG", "display_name": "t.niese", "link": "https://stackoverflow.com/users/1960455/t-niese"}, "edited": false, "score": 0, "creation_date": 1577287100, "post_id": 59479601, "comment_id": 105136173, "body": "<a href=\"https://stackoverflow.com/questions/1936399/c-array-operator-with-multiple-arguments\">C++ &#91;&#93; array operator with multiple arguments?</a>"}, {"owner": {"reputation": 31823, "user_id": 1960455, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/d22bdc5c04b48a9054586eb64174ea99?s=128&d=identicon&r=PG", "display_name": "t.niese", "link": "https://stackoverflow.com/users/1960455/t-niese"}, "edited": false, "score": 0, "creation_date": 1577287193, "post_id": 59479601, "comment_id": 105136191, "body": "There are in general many ways how you could implement a matrix, and depending on that the solution how to implement that will vary."}], "owner": {"reputation": 23, "user_id": 11332079, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-hk4wsj3HNlY/AAAAAAAAAAI/AAAAAAAAAT0/XVHnncTNjiY/photo.jpg?sz=128", "display_name": "Aniket Saha", "link": "https://stackoverflow.com/users/11332079/aniket-saha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 48, "favorite_count": 0, "closed_date": 1577288278, "answer_count": 0, "score": 1, "last_activity_date": 1577288709, "creation_date": 1577286549, "last_edit_date": 1577288709, "question_id": 59479601, "link": "https://stackoverflow.com/questions/59479601/how-to-overload-to-perform-the-task", "closed_reason": "Duplicate", "title": "How to overload [] to perform the task", "body": "<pre class=\"lang-cpp prettyprint-override\"><code>class matrix\n{\n    int r,c;\npublic:\n    matrix(int r , int c)\n    {\n        this-&gt;r=r;\n        this-&gt;c=c;\n    }\n};\n</code></pre>\n\n<p>I have this class named as <code>matrix</code>. Where I need to create a matrix by taking the size of the row and column and then <code>overload []</code> in such a way that when used with ob ( object of the matrix class)</p>\n\n<p>like <code>ob[i][j]</code> to interchange the row and column of the matrix. (<code>i</code> size of column and <code>j</code> size of row)</p>\n\n<p>How can I do the task?</p>\n"}, {"tags": ["c++", "events", "event-handling"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user10777785"}, "reply_to_user": {"reputation": 31823, "user_id": 1960455, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/d22bdc5c04b48a9054586eb64174ea99?s=128&d=identicon&r=PG", "display_name": "t.niese", "link": "https://stackoverflow.com/users/1960455/t-niese"}, "edited": false, "score": 0, "creation_date": 1577288204, "post_id": 59479598, "comment_id": 105136382, "body": "Can you elaborate on that?"}, {"owner": {"reputation": 31823, "user_id": 1960455, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/d22bdc5c04b48a9054586eb64174ea99?s=128&d=identicon&r=PG", "display_name": "t.niese", "link": "https://stackoverflow.com/users/1960455/t-niese"}, "edited": false, "score": 1, "creation_date": 1577289242, "post_id": 59479598, "comment_id": 105136608, "body": "At the time when you emit the event you know the type of the even, so at the point of <code>bool OnEvent(Event&amp; event)</code> you should know the type of the event. Registering the event listeners for a certain event, and finding the matching listeners for a certain event is indeed not an easy task, and results in such problems you have, but those should appear at a different point in the code."}, {"owner": {"reputation": 31823, "user_id": 1960455, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/d22bdc5c04b48a9054586eb64174ea99?s=128&d=identicon&r=PG", "display_name": "t.niese", "link": "https://stackoverflow.com/users/1960455/t-niese"}, "edited": false, "score": 0, "creation_date": 1577289804, "post_id": 59479598, "comment_id": 105136744, "body": "I saw an implementation for event dispatching that, iirc, worked with using only minimal &quot;hacks&quot;, and was as close as you can get to good code. But I  can&#39;t find it right now. I try to find it and to copy the relevant part as an answer."}], "answers": [{"tags": [], "owner": {"reputation": 3008, "user_id": 1863938, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96ec4e16681460302ea67bfc201b76f3?s=128&d=identicon&r=PG", "display_name": "parktomatomi", "link": "https://stackoverflow.com/users/1863938/parktomatomi"}, "is_accepted": true, "score": 0, "last_activity_date": 1577421424, "last_edit_date": 1577421424, "creation_date": 1577420959, "answer_id": 59495982, "question_id": 59479598, "link": "https://stackoverflow.com/questions/59479598/better-event-handling-mechanism/59495982#59495982", "title": "Better event handling mechanism?", "body": "<p>To frame this generically, you have a bunch of type-erased objects (elements, events), and you need to dispatch to handlers for specific pairs of two types (e.g. <code>ElementA</code> and <code>MouseUpEvent</code>). This is a <a href=\"https://en.wikipedia.org/wiki/Double_dispatch\" rel=\"nofollow noreferrer\">double dispatch</a> problem, and there are two ways to deal with it in C++.</p>\n\n<h3>Double Dispatch Using The Visitor Pattern</h3>\n\n<p>This is the \"classic\" technique described in the <a href=\"https://en.wikipedia.org/wiki/Design_Patterns\" rel=\"nofollow noreferrer\">Design Patterns</a> book. Basically, the base event (node) has a virtual method that dispatches to a downcasted dispatch method in a element (visitor). The visitor methods are virtual methods which dispatch to the right element. You can read about it in the book, on <a href=\"https://en.wikipedia.org/wiki/Visitor_pattern\" rel=\"nofollow noreferrer\">Wikipedia</a>, or a <a href=\"https://cpppatterns.com/patterns/visitor.html\" rel=\"nofollow noreferrer\">billion</a> <a href=\"https://sourcemaking.com/design_patterns/visitor/cpp/2\" rel=\"nofollow noreferrer\">online</a> <a href=\"https://www.geeksforgeeks.org/visitor-design-pattern/\" rel=\"nofollow noreferrer\">tutorials</a>. I can't make a better tutorial here, except to add that you can reduce the amount of boilerplate a lot by using variadic templates:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>// Visitor\ntemplate &lt;typename... TNodes&gt;\nstruct GenericVisitor;\n\ntemplate &lt;typename TNode, typename... TNodes&gt;\nstruct GenericVisitor&lt;TNode, TNodes...&gt; : public GenericVisitor&lt;TNodes...&gt; {\n    virtual bool Visit(const TNode&amp;) { return false; }\n};\ntemplate &lt;&gt;\nstruct GenericVisitor&lt;&gt; {\n    virtual ~GenericVisitor() = default;\n};\n\n// Node\ntemplate &lt;typename TVisitor&gt;\nstruct GenericBaseNode {\n    virtual bool Accept(TVisitor&amp; visitor) const = 0;\n};\ntemplate &lt;typename TNode, typename TVisitor&gt;\nstruct GenericNode : public GenericBaseNode&lt;TVisitor&gt; {\n    virtual bool Accept(TVisitor&amp; visitor) const { return visitor.Visit(*static_cast&lt;TNode*&gt;(this)); }\n};\n</code></pre>\n\n<p>After that, adding specifics for your setup can be done in just a few lines of code:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>struct MouseEvent;\nstruct KeyEvent;\nusing Element = GenericVisitor&lt;MouseEvent, KeyEvent&gt;;\nusing Event = GenericBaseNode&lt;Element&gt;;\n\nstruct MouseEvent : public GenericNode&lt;MouseEvent, Element&gt; { };\nstruct KeyEvent : public GenericNode&lt;KeyEvent, Element&gt; { };\nstruct ElementA : public Element {\n    virtual bool Visit(const MouseEvent&amp;) { return true; }\n};\n</code></pre>\n\n<p>And to dispatch, just call the <code>Accept</code> method of an event:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>void DispatchEvent(Event&amp; event, Element&amp; element) {\n    event.Accept(element);\n}\n</code></pre>\n\n<h3>Double Dispatch Using Tagged Unions (std::variant)</h3>\n\n<p>Since C++17 (or C++11 with a <a href=\"https://github.com/mpark/variant\" rel=\"nofollow noreferrer\">single-header library</a>), you can use a type-safe union called <a href=\"https://en.cppreference.com/w/cpp/utility/variant\" rel=\"nofollow noreferrer\"><code>std::variant</code></a>, which can hold a fixed set of types in the same memory space, and dispatch between them.  A global method called <a href=\"https://en.cppreference.com/w/cpp/utility/variant/visit\" rel=\"nofollow noreferrer\"><code>std::visit</code></a> can be used to dispatch a callback based on the contained type of one or more variants. This happens to be really handy for double-dispatch. </p>\n\n<p>First, use a variant to hold an event:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>struct MouseEvent { };\nstruct KeyEvent { };\nusing Event = std::variant&lt;MouseEvent, KeyEvent&gt;;\n</code></pre>\n\n<p>Then, a variant for each element, with methods to handle each event (use a base class to get rid of some boiler plate):</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>struct BaseElement {\n    template &lt;typename TEvent&gt;\n    bool OnEvent(const TEvent&amp;) { return false; }\n};\nstruct ElementA : public BaseElement {\n    using BaseElement::OnEvent;\n    bool OnEvent(const MouseEvent&amp;) { return true; }\n};\nusing Element = std::variant&lt;ElementA&gt;;\n</code></pre>\n\n<p>Then use <code>std::visit</code> with a generic lambda to dispatch:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>void DispatchEvent(Event&amp; event, Element&amp; element) {\n    std::visit([](auto&amp;&amp; el, auto&amp;&amp; ev) { return el.OnEvent(ev); }, element, event);\n}\n</code></pre>\n\n<p>Ultimately, what this generates and optimizes to looks a bit like the event handler an old C GUI application: </p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>struct Event { int id; union { MouseEvent AsMouseEvent; KeyEvent AsKeyEvent; };  };\nstruct Element { int id; union { ElementA AsElementA; };  };\nswitch (event.id) {\n    case MouseEvent:\n        switch(element.id) { \n            case ElementA:\n                return element.AsElementA.OnEvent(event.AsMouseEvent);\n            /*...*/\n        }\n        break;\n        /* ... */\n}\n</code></pre>\n\n<h3>Choosing</h3>\n\n<p>Neither method has a clear overall advantage performance-wise, so I recommend just using whichever one looks easier to use or maintain. </p>\n\nvisitor pattern\n\n<ul>\n<li>vtable size of visitors increases as types added</li>\n<li>can be used with C++98</li>\n<li>heterogeneous container must store dynamically allocated pointers to base type</li>\n<li>... but no wasted object memory</li>\n</ul>\n\nstd::variant\n\n<ul>\n<li>amount of generated dispatch code increases as types added</li>\n<li>c++11 (via library, C++17 with std) or later</li>\n<li>can store heterogeneous members in contiguous memory</li>\n<li>... but wasted memory if objects vary in size.</li>\n</ul>\n\n<p>Demo of both: <a href=\"https://godbolt.org/z/MGp2No\" rel=\"nofollow noreferrer\">https://godbolt.org/z/MGp2No</a></p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user10777785"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "accepted_answer_id": 59495982, "answer_count": 1, "score": 1, "last_activity_date": 1577421424, "creation_date": 1577286529, "question_id": 59479598, "link": "https://stackoverflow.com/questions/59479598/better-event-handling-mechanism", "title": "Better event handling mechanism?", "body": "<p>I am writing an event system for a GUI, where i have an <code>Event</code> base class and a couple of derived classes (e.g. <code>MouseDownEvent</code>, <code>MouseUpEvent</code>, ...etc).</p>\n\n<p>and each GUI element registers a callback for each type of event that it's supposed/wants to handle.</p>\n\n<p>here is what a \"typical\" callback looks like:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>bool OnMouseMove(const MouseMoveEvent&amp; event);\n</code></pre>\n\n<p>and the event handling function looks something like this:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>bool OnEvent(Event&amp; event)\n{\n    EventsDispatcher dispatcher(event);\n    dispatcher.Dispatch&lt;MouseMoveEvent&gt;(/* std::bind the callback */);\n    /* ... */\n}\n</code></pre>\n\n<p>and <code>Dispatch</code> looks something like this:</p>\n\n<pre><code>template&lt;typename T, typename Callback&gt;\nbool Dispatch(Callback&amp;&amp; callback)\n{\n    try\n    {\n        return callback(dynamic_cast&lt;T&amp;&gt;(m_Event));\n    }\n    catch (const std::bad_cast&amp;)\n    {\n        return false;\n    }\n}\n</code></pre>\n\n<p>So my problem is with the <code>dynamic_cast</code>ing in the <code>Dispatch</code> function, also according to <a href=\"https://stackoverflow.com/a/307793/10777785\">this</a> answer, if i have to do this kind of \"workaround\" then there is a design flow in the system, and i should reconsider it instead of trying to patch it!</p>\n\n<p>is there a better way to handle this?</p>\n"}, {"tags": ["c++", "visual-c++"], "comments": [{"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 1, "creation_date": 1577284764, "post_id": 59479363, "comment_id": 105135672, "body": "What does this (rand() % 100) + 1 = x; mean?"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1577291052, "post_id": 59479363, "comment_id": 105136999, "body": "<code>(rand() % 100) + 1 = x;</code> makes no sense. You are assigning the value of <code>x</code> to some temporary thing that you can never again get hold of. That&#39;s pointless (at best)."}], "answers": [{"tags": [], "owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "is_accepted": false, "score": 2, "last_activity_date": 1577285945, "last_edit_date": 1577285945, "creation_date": 1577284921, "answer_id": 59479401, "question_id": 59479363, "link": "https://stackoverflow.com/questions/59479363/what-does-expression-must-be-a-modifiable-lvalue-mean/59479401#59479401", "title": "What does &quot;expression must be a modifiable lvalue&quot; mean?", "body": "<p>Left and right operands of <code>=</code> are not interchangable.</p>\n\n<p>It's the left operand that's being <em>assigned to</em>, so it has to be assignable.</p>\n\n<p>Given <code>int x;</code>, <code>x</code> is assignable (a 'modifiable lvalue'), but <code>x + 42</code> is not (an rvalue).</p>\n"}, {"tags": [], "owner": {"reputation": 1028, "user_id": 2654470, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09fdaef3f1f52aaf47067f1050b27013?s=128&d=identicon&r=PG", "display_name": "Spencer", "link": "https://stackoverflow.com/users/2654470/spencer"}, "is_accepted": false, "score": 2, "last_activity_date": 1577285027, "creation_date": 1577285027, "answer_id": 59479417, "question_id": 59479363, "link": "https://stackoverflow.com/questions/59479363/what-does-expression-must-be-a-modifiable-lvalue-mean/59479417#59479417", "title": "What does &quot;expression must be a modifiable lvalue&quot; mean?", "body": "<p>It means that you've put the wrong things on each side of the assignment operator (<code>=</code>). The expression on the left should be something you can assign a value to (the \"l\" in \"lvalue\" stands for \"left\"), and the expression on the right should compute the value you want to assign. </p>\n\n<p>Try</p>\n\n<pre><code>x = (rand() % 100) + 1;\n</code></pre>\n\n<p>instead.</p>\n"}, {"tags": [], "owner": {"reputation": 285, "user_id": 8754125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6a8c19e0d69358809af94fd86b01889?s=128&d=identicon&r=PG&f=1", "display_name": "Samuel Rasquinha", "link": "https://stackoverflow.com/users/8754125/samuel-rasquinha"}, "is_accepted": false, "score": 1, "last_activity_date": 1577291433, "creation_date": 1577291433, "answer_id": 59480156, "question_id": 59479363, "link": "https://stackoverflow.com/questions/59479363/what-does-expression-must-be-a-modifiable-lvalue-mean/59480156#59480156", "title": "What does &quot;expression must be a modifiable lvalue&quot; mean?", "body": "<p>The lvalue always has to be a changeable/modifiable one. \nSo you can't do : </p>\n\n<pre><code>int a ;\n3 = a ; \n</code></pre>\n\n<p>This means that you are trying to change <code>3</code> to <code>a</code> which is not possible because <code>3</code> is a constant. </p>\n\n<p>So similarily,\nDo this : </p>\n\n<pre><code>x = (rand() % 100) + 1;\n</code></pre>\n\n<p>And, the error should be gone.</p>\n"}], "owner": {"reputation": 9, "user_id": 12595880, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mBsAuer3WR1Lks5uGhErxc7C7aB_W-n4oCel6ey=k-s128", "display_name": "Tanishq Sharma", "link": "https://stackoverflow.com/users/12595880/tanishq-sharma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 157, "favorite_count": 1, "answer_count": 3, "score": -1, "last_activity_date": 1577291433, "creation_date": 1577284645, "last_edit_date": 1577288220, "question_id": 59479363, "link": "https://stackoverflow.com/questions/59479363/what-does-expression-must-be-a-modifiable-lvalue-mean", "title": "What does &quot;expression must be a modifiable lvalue&quot; mean?", "body": "<pre><code>int x;\n(rand() % 100) + 1 = x;\n</code></pre>\n\n<p>It keeps saying:</p>\n\n<blockquote>\n  <p>expression should be a modifiable lvalue</p>\n</blockquote>\n"}, {"tags": ["c++", "multithreading", "c++11", "thread-safety"], "answers": [{"tags": [], "owner": {"reputation": 4756, "user_id": 1364149, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/Y25ip.jpg?s=128&g=1", "display_name": "Shloim", "link": "https://stackoverflow.com/users/1364149/shloim"}, "is_accepted": true, "score": 3, "last_activity_date": 1577284005, "creation_date": 1577284005, "answer_id": 59479295, "question_id": 59479272, "link": "https://stackoverflow.com/questions/59479272/create-a-stdthread-object-in-thread-a-join-in-thread-b/59479295#59479295", "title": "Create a std::thread object in thread A, join in thread B", "body": "<p>Yes. <code>join()</code> can be called on a valid thread object by any thread except by the thread itself.</p>\n\n<blockquote>\n  <p><strong>Error Conditions</strong></p>\n  \n  <p>resource_deadlock_would_occur if <code>this-&gt;get_id() == std::this_thread::get_id()</code>.</p>\n  \n  <p>no_such_process if the thread is not valid</p>\n  \n  <p>invalid_argument if <code>joinable()</code> is false</p>\n</blockquote>\n"}], "owner": {"reputation": 4681, "user_id": 6651824, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/LWsU0.jpg?s=128&g=1", "display_name": "LWimsey", "link": "https://stackoverflow.com/users/6651824/lwimsey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 1, "accepted_answer_id": 59479295, "answer_count": 1, "score": 5, "last_activity_date": 1577284005, "creation_date": 1577283809, "question_id": 59479272, "link": "https://stackoverflow.com/questions/59479272/create-a-stdthread-object-in-thread-a-join-in-thread-b", "title": "Create a std::thread object in thread A, join in thread B", "body": "<p>Is it allowed to call <code>join()</code> on a <code>std::thread</code> object that was created in a different thread, given that the object is properly synchronized between threads?</p>\n\n<p>For example:</p>\n\n<pre><code>void cleanup(std::thread t)\n{\n    t.join();\n}\n\nint main()\n{\n    std::thread t{[] { /* something */ }};\n\n    std::thread c{cleanup, std::move(t)};\n    c.join();\n}\n</code></pre>\n"}, {"tags": ["c++", "cuda", "llvm", "llvm-ir"], "comments": [{"owner": {"reputation": 6958, "user_id": 857727, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3772f7ef99bd17c1e77d77edbf76c13d?s=128&d=identicon&r=PG&f=1", "display_name": "arnt", "link": "https://stackoverflow.com/users/857727/arnt"}, "edited": false, "score": 0, "creation_date": 1577313008, "post_id": 59479206, "comment_id": 105140944, "body": "The name you want is down as $28, which is an automatically generated name when an instruction has none. Is that $28 actually what you want?"}, {"owner": {"reputation": 2530, "user_id": 3669940, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gUupX.jpg?s=128&g=1", "display_name": "qbit", "link": "https://stackoverflow.com/users/3669940/qbit"}, "reply_to_user": {"reputation": 6958, "user_id": 857727, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3772f7ef99bd17c1e77d77edbf76c13d?s=128&d=identicon&r=PG&f=1", "display_name": "arnt", "link": "https://stackoverflow.com/users/857727/arnt"}, "edited": false, "score": 0, "creation_date": 1577325168, "post_id": 59479206, "comment_id": 105142381, "body": "@amt I am actually looking for the pointer name in the source code. Or at least the line where the pointer is declared. Also, i am not getting the %28 either."}, {"owner": {"reputation": 6958, "user_id": 857727, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3772f7ef99bd17c1e77d77edbf76c13d?s=128&d=identicon&r=PG&f=1", "display_name": "arnt", "link": "https://stackoverflow.com/users/857727/arnt"}, "edited": false, "score": 0, "creation_date": 1577378544, "post_id": 59479206, "comment_id": 105156462, "body": "Not getting the %28 might be because it&#39;s automatically generated; I don&#39;t know when this automatic fallback happens. The name you want is somewhere in the debug metadata, if it&#39;s anywhere at all, which seems uncertain. Instruction::getDebugLoc() gives you the file/line part of the debug metadata, which seems to be generated by most frontends even if detailed information is not."}, {"owner": {"reputation": 538, "user_id": 2799497, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/o9RbW.jpg?s=128&g=1", "display_name": "Arsen", "link": "https://stackoverflow.com/users/2799497/arsen"}, "reply_to_user": {"reputation": 6958, "user_id": 857727, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3772f7ef99bd17c1e77d77edbf76c13d?s=128&d=identicon&r=PG&f=1", "display_name": "arnt", "link": "https://stackoverflow.com/users/857727/arnt"}, "edited": false, "score": 0, "creation_date": 1578123404, "post_id": 59479206, "comment_id": 105343468, "body": "Is it just typo in this question defining &#39;Ptr&#39; but casting &#39;Pts&#39;. Also consider that getName returns StringRef and it might need to use it&#39;s &#39;str()&#39; function to get std::string. If nothing works then best solution is to use what @arnt suggests in previous comment."}, {"owner": {"reputation": 2530, "user_id": 3669940, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gUupX.jpg?s=128&g=1", "display_name": "qbit", "link": "https://stackoverflow.com/users/3669940/qbit"}, "edited": false, "score": 0, "creation_date": 1578412295, "post_id": 59479206, "comment_id": 105425718, "body": "As far as i can tell the DebugLoc is not going to give me the name of pointer. At least not straightforwardly. I imagine i&#39;d have to use clang libTooling or something to achieve that. In any case i have found a solution, which i will provide as an answer"}, {"owner": {"reputation": 2530, "user_id": 3669940, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gUupX.jpg?s=128&g=1", "display_name": "qbit", "link": "https://stackoverflow.com/users/3669940/qbit"}, "reply_to_user": {"reputation": 538, "user_id": 2799497, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/o9RbW.jpg?s=128&g=1", "display_name": "Arsen", "link": "https://stackoverflow.com/users/2799497/arsen"}, "edited": false, "score": 0, "creation_date": 1578414404, "post_id": 59479206, "comment_id": 105426942, "body": "@Arsen It was a typo yes. Thanks. I fixed it."}], "answers": [{"tags": [], "owner": {"reputation": 2530, "user_id": 3669940, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gUupX.jpg?s=128&g=1", "display_name": "qbit", "link": "https://stackoverflow.com/users/3669940/qbit"}, "is_accepted": true, "score": 4, "last_activity_date": 1578413628, "creation_date": 1578413628, "answer_id": 59632126, "question_id": 59479206, "link": "https://stackoverflow.com/questions/59479206/llvm-retrieve-name-of-allocainst/59632126#59632126", "title": "LLVM retrieve name of AllocaInst", "body": "<p>Answering my own question. It turns out that there is an <code>llvm.dbg.declare</code> call (DbgDeclareInst) corresponding to the alloca but it may appear anywhere in the caller function's basic blocks. Probably it comes after the first use of this Alloca value? Not sure. In any case, my solution is to search for <code>DbgDeclareInst</code> instructions, check if it is for an <code>AllocaInst</code> and if so compare that alloca with the alloca of interest and if equal get the variable name. Something like this:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>CallInst *CUMallocCI = ... ; // CI of cudaMalloc call\nValue *Ptr = CUMallocCI-&gt;getOperand(0);\nif (AllocaInst *AI = dyn_cast&lt;AllocaInst&gt;(Ptr) != nullptr) {\n  if ( !AI-&gt;hasName() ) {\n    // Function this AllocaInst belongs\n    Function *Caller = AI-&gt;getParent()-&gt;getParent();\n    // Search for llvm.dbg.declare\n    for ( BasicBlock&amp; BB : *Caller) \n      for (Instruction &amp;I : BB) {\n        if ( DbgDeclareInst *dbg = dyn_cast&lt;DbgDeclareInst&gt;(&amp;I))\n          // found. is it for an AllocaInst?\n          if ( AllocaInst *dbgAI = dyn_cast&lt;AllocaInst&gt;(dbg-&gt;getAddress()))\n            // is it for our AllocaInst?\n            if (dbgAI == AI)\n              if (DILocalVariable *varMD = dbg-&gt;getVariable()) // probably not needed?\n                errs() &lt;&lt; varMD-&gt;getName() &lt;&lt; \"\\n\";\n  } else {\n    errs() &lt;&lt; AI-&gt;getName() &lt;&lt; \"\\n\";\n  }\n}\n</code></pre>\n"}], "owner": {"reputation": 2530, "user_id": 3669940, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gUupX.jpg?s=128&g=1", "display_name": "qbit", "link": "https://stackoverflow.com/users/3669940/qbit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 333, "favorite_count": 1, "accepted_answer_id": 59632126, "answer_count": 1, "score": 2, "last_activity_date": 1578413705, "creation_date": 1577283188, "last_edit_date": 1578413705, "question_id": 59479206, "link": "https://stackoverflow.com/questions/59479206/llvm-retrieve-name-of-allocainst", "title": "LLVM retrieve name of AllocaInst", "body": "<p>I am trying to retrieve the name of the pointer passed to a <a href=\"https://docs.nvidia.com/cuda/cuda-runtime-api/group__CUDART__MEMORY.html#group__CUDART__MEMORY_1g37d37965bfb4803b6d4e59ff26856356\" rel=\"nofollow noreferrer\"><code>cudaMalloc</code></a> call.</p>\n\n<pre><code>CallInst *CUMallocCI = ... ; // CI of cudaMalloc call\nValue *Ptr = CUMallocCI-&gt;getOperand(0);\nif (AllocaInst *AI = dyn_cast&lt;AllocaInst&gt;(Ptr) != nullptr) {\n  errs() &lt;&lt; AI-&gt;getName() &lt;&lt; \"\\n\";\n}\n</code></pre>\n\n<p>The above however just prints an empty line. Is is possible to get the pointer name out of this alloca?</p>\n\n<p>This is the relevant IR:</p>\n\n<pre><code>%28 = alloca i8*, align 8\n...\n...\ncall void @llvm.dbg.declare(metadata i8** %28, metadata !926, metadata !DIExpression()), !dbg !927\n%257 = call i32 @cudaMalloc(i8** %28, i64 1), !dbg !928\n...\n...\n!926 = !DILocalVariable(name: \"d_over\", scope: !677, file: !3, line: 191, type: !22)\n!927 = !DILocation(line: 191, column: 10, scope: !677)\n</code></pre>\n"}, {"tags": ["c++", "ascii", "special-characters", "getline", "istream"], "comments": [{"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 2, "creation_date": 1577282727, "post_id": 59479121, "comment_id": 105135176, "body": "If you are dealing with a binary file why are you using getline?!"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1577282747, "post_id": 59479121, "comment_id": 105135186, "body": "You may want to look up the function of that weird 1A character. You also want to read <a href=\"https://stackoverflow.com/questions/5605125/why-is-iostreameof-inside-a-loop-condition-i-e-while-stream-eof-cons\">this</a>."}, {"owner": {"reputation": 683, "user_id": 458321, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8560102d48a3d7a58dbdae1b80f69be3?s=128&d=identicon&r=PG", "display_name": "TamusJRoyce", "link": "https://stackoverflow.com/users/458321/tamusjroyce"}, "edited": false, "score": 0, "creation_date": 1577283074, "post_id": 59479121, "comment_id": 105135257, "body": "Look up a tutorial working with binary files. If a section of the file is ascii, use the binary file handling to discover that section."}, {"owner": {"reputation": 13, "user_id": 12595762, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCFziwtqghb88v-TJ51a5s9fkJv83ycE4syfUMkjw=k-s128", "display_name": "Pachito", "link": "https://stackoverflow.com/users/12595762/pachito"}, "edited": false, "score": 0, "creation_date": 1577284522, "post_id": 59479121, "comment_id": 105135626, "body": "Vlad, What should I use instead? Sorry, I&#39;m new to this, that&#39;s why I asked"}], "answers": [{"tags": [], "owner": {"reputation": 285, "user_id": 8754125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6a8c19e0d69358809af94fd86b01889?s=128&d=identicon&r=PG&f=1", "display_name": "Samuel Rasquinha", "link": "https://stackoverflow.com/users/8754125/samuel-rasquinha"}, "is_accepted": true, "score": 0, "last_activity_date": 1577289507, "creation_date": 1577289507, "answer_id": 59479937, "question_id": 59479121, "link": "https://stackoverflow.com/questions/59479121/getline-extraction-stops-with-the-1a-character/59479937#59479937", "title": "Getline(); extraction stops with the 1A character", "body": "<p>Seems that you are using binary files and not a normal text file. \nCheck out these links to learn about binary files. </p>\n\n<p><a href=\"https://study.com/academy/lesson/writing-reading-binary-files-in-c-programming.html\" rel=\"nofollow noreferrer\">https://study.com/academy/lesson/writing-reading-binary-files-in-c-programming.html</a>\n<a href=\"https://computer.howstuffworks.com/c39.htm\" rel=\"nofollow noreferrer\">https://computer.howstuffworks.com/c39.htm</a></p>\n\n<p>Bye,\nSamuel</p>\n"}], "owner": {"reputation": 13, "user_id": 12595762, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCFziwtqghb88v-TJ51a5s9fkJv83ycE4syfUMkjw=k-s128", "display_name": "Pachito", "link": "https://stackoverflow.com/users/12595762/pachito"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 59479937, "answer_count": 1, "score": 0, "last_activity_date": 1577289507, "creation_date": 1577282534, "question_id": 59479121, "link": "https://stackoverflow.com/questions/59479121/getline-extraction-stops-with-the-1a-character", "title": "Getline(); extraction stops with the 1A character", "body": "<p>so I don't know how to explain this correctly but gonna try my best.</p>\n\n<p>I'm trying to save a file into a string, it's not a .txt file, it's a .umsbt file so it has weird ASCII characters (like 00, 0A, 0E, 1A...) so when I save the .umsbt into the string using <code>getline();</code> and then print it using <code>cout</code>, the whole file isn't printed, and when I open the actual file through HxD (hex editor) I see that the print stopped before a 1A character, did some tests and it's the 1A character's fault.</p>\n\n<p>This is my code</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;iostream&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;fstream&gt;\n#include &lt;string&gt;\n#include &lt;string.h&gt;\n#include &lt;conio.h&gt;\n#include &lt;sstream&gt;\n\nusing namespace std;\n\nstring line;    //the file is stored here\nstring name; //name of the file\n\n\nvoid printfile() {\n\n    int o = 0;\n    int fileCount;\n\n    ifstream file;\n    file.open(name, ios::in);\n\n    if (file.fail()) {\n\n        cout &lt;&lt; \"Not found \\n\";\n        cin.get();\n        cin.get();\n        exit(1);\n\n    }else {\n\n        file.seekg(0, ios::end);\n        fileCount = file.tellg();\n        file.seekg(0);\n\n        while (!file.eof()) {\n\n\n            getline(file, line);\n            cout &lt;&lt; \"file character count: \" &lt;&lt; fileCount &lt;&lt; endl;\n            cout &lt;&lt; \"string character count: \" &lt;&lt; line.length() &lt;&lt; \"\\n\" &lt;&lt; endl;\n\n\n            for (int i = 0; i &lt; line.length(); i++) {\n\n                cout &lt;&lt; line[i];\n                o++;\n                if (o == 16) {\n                    cout &lt;&lt; \"\\n\";\n                    o = 0;\n                }\n            }\n\n        }\n        file.close();\n    }\n\n}\nint main()\n{\n    cin.ignore(26, '\\n');\n\n    cout &lt;&lt; \"Write the name of your file (.umsbt included) \\n\" &lt;&lt; endl;\n\n    cin &gt;&gt; name;\n\n    cout &lt;&lt; \"\\n\";\n\n    printfile();\n\n    cin.get();\n    cin.get();\n    return 0;\n}\n\n</code></pre>\n\n<p>Hope someone can help me, I'm currently trying to remove/replace all of the 1A characters in any file, and the restriction is that you have to do it in the ifstream itself, cause you can't save it in a string (will cause the problem with 1A and the file won't be fully saved)</p>\n\n<p>(Here's a pic of the file opened up in HxD hope you get an idea of it <a href=\"https://imgur.com/a/1uQzOPq\" rel=\"nofollow noreferrer\">https://imgur.com/a/1uQzOPq</a>)</p>\n\n<p>Thank you in advance </p>\n"}, {"tags": ["c++", "subclass", "file-handling"], "comments": [{"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1577282697, "post_id": 59479047, "comment_id": 105135169, "body": "<code>#include&lt;iostream.h&gt;</code> is not correct for modern <code>c++</code> is this turbo c++?"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1577282971, "post_id": 59479047, "comment_id": 105135239, "body": "I believe this may be the problem: <a href=\"https://stackoverflow.com/questions/21567291/why-does-stdgetline-skip-input-after-a-formatted-extraction\">https://stackoverflow.com/questions/21567291/why-does-stdget&zwnj;&#8203;line-skip-input-afte&zwnj;&#8203;r-a-formatted-extrac&zwnj;&#8203;tion</a>"}, {"owner": {"reputation": 1087, "user_id": 2129218, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8bf5ffff85c1f5609fca08eb8e05279?s=128&d=identicon&r=PG", "display_name": "Build Succeeded", "link": "https://stackoverflow.com/users/2129218/build-succeeded"}, "edited": false, "score": 0, "creation_date": 1577283201, "post_id": 59479047, "comment_id": 105135277, "body": "count is not incremented it stay zero ans call A1.tasks() repeatedly"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1577291448, "post_id": 59479047, "comment_id": 105137079, "body": "No error during compilation means <i>nothing</i> as far as correctness goes. That only means that your code was syntactically valid. It may still contain Undefined Behaviour, logic errors and many other types of bugs."}, {"owner": {"reputation": 21, "user_id": 12595794, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDQYcZTPoF99iTGfmmvK93RMZaVRFrZRrk8cBh_2Q=k-s128", "display_name": "Harshaa Jaishankar", "link": "https://stackoverflow.com/users/12595794/harshaa-jaishankar"}, "edited": false, "score": 0, "creation_date": 1577340496, "post_id": 59479047, "comment_id": 105144516, "body": "yes this is turbo c++.. and about count.. it was to make a menu driven program"}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 12595794, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDQYcZTPoF99iTGfmmvK93RMZaVRFrZRrk8cBh_2Q=k-s128", "display_name": "Harshaa Jaishankar", "link": "https://stackoverflow.com/users/12595794/harshaa-jaishankar"}, "edited": false, "score": 0, "creation_date": 1577340730, "post_id": 59481059, "comment_id": 105144557, "body": "Thank you so much for the advice, but we haven&#39;t used &#39;std&#39; based codes as it does not cover under our syllabus and i cannot go out it .Can you suggest another way of getting input for my strings ?"}, {"owner": {"reputation": 36, "user_id": 9941503, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f5405cb7dcd2ccced8a4b551d1f495b?s=128&d=identicon&r=PG", "display_name": "PyPotato", "link": "https://stackoverflow.com/users/9941503/pypotato"}, "reply_to_user": {"reputation": 21, "user_id": 12595794, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDQYcZTPoF99iTGfmmvK93RMZaVRFrZRrk8cBh_2Q=k-s128", "display_name": "Harshaa Jaishankar", "link": "https://stackoverflow.com/users/12595794/harshaa-jaishankar"}, "edited": false, "score": 1, "creation_date": 1577453095, "post_id": 59481059, "comment_id": 105175133, "body": "you can just use cin.ignore(32767, &#39;\\n&#39;); then. It seems your are using turboc++.Turboc++ works even if you don&#39;t use std namespace using std::cin and just using cin is same. Turboc++ just adds (using namespace std;) line to your code so you don&#39;t need to use std::cin or std::cout every time you take input or print something."}, {"owner": {"reputation": 21, "user_id": 12595794, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDQYcZTPoF99iTGfmmvK93RMZaVRFrZRrk8cBh_2Q=k-s128", "display_name": "Harshaa Jaishankar", "link": "https://stackoverflow.com/users/12595794/harshaa-jaishankar"}, "edited": false, "score": 1, "creation_date": 1577787589, "post_id": 59481059, "comment_id": 105254420, "body": "I tried your solution. it works perfectly now ! Thank you so much !"}], "tags": [], "owner": {"reputation": 36, "user_id": 9941503, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f5405cb7dcd2ccced8a4b551d1f495b?s=128&d=identicon&r=PG", "display_name": "PyPotato", "link": "https://stackoverflow.com/users/9941503/pypotato"}, "is_accepted": true, "score": 2, "last_activity_date": 1577299582, "creation_date": 1577299582, "answer_id": 59481059, "question_id": 59479047, "link": "https://stackoverflow.com/questions/59479047/i-am-not-able-to-get-input-after-a-certain-point-from-the-user-even-though-no/59481059#59481059", "title": "I am not able to get input after a certain point ( from the user) even though no error pops wile compiling", "body": "<p>This happens because you have mixed cin and cin.getline.\nwhen you enter a value using cin, cin not only captures the value, it also captures the newline. So when we enter 2, cin actually gets the string \u201c2\\n\u201d. It then extracts the 2 to variable choice, leaving the newline stuck in the input stream. Then, when getline() goes to read the input, it sees \u201c\\n\u201d is already in the stream, and figures we must have entered an empty string! Definitely not what was intended.</p>\n\n<p>A good rule of thumb is that after reading a value with cin, remove the newline from the stream. This can be done using the following :</p>\n\n<pre><code>std::cin.ignore(32767, '\\n'); // ignore up to 32767 characters until a \\n is removed\n</code></pre>\n\n<p>I hope this will solve your problem.</p>\n"}, {"comments": [{"owner": {"reputation": 21, "user_id": 12595794, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDQYcZTPoF99iTGfmmvK93RMZaVRFrZRrk8cBh_2Q=k-s128", "display_name": "Harshaa Jaishankar", "link": "https://stackoverflow.com/users/12595794/harshaa-jaishankar"}, "edited": false, "score": 0, "creation_date": 1577516526, "post_id": 59486247, "comment_id": 105190012, "body": "i am unable to use header files without .h extension in Turbo c7 maybe mine is an older version i guess.  I ll surely try the getline(cin, A1.PI.name)) ; but isnt same as cin.getline()?"}], "tags": [], "owner": {"reputation": 547, "user_id": 12450543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e33187968bcf2582820d7a085e7b29a?s=128&d=identicon&r=PG&f=1", "display_name": "klentit", "link": "https://stackoverflow.com/users/12450543/klentit"}, "is_accepted": false, "score": 1, "last_activity_date": 1577354345, "last_edit_date": 1577354345, "creation_date": 1577351794, "answer_id": 59486247, "question_id": 59479047, "link": "https://stackoverflow.com/questions/59479047/i-am-not-able-to-get-input-after-a-certain-point-from-the-user-even-though-no/59486247#59486247", "title": "I am not able to get input after a certain point ( from the user) even though no error pops wile compiling", "body": "<pre><code>#include&lt;iostream&gt;\n#include&lt;fstream&gt;\n#include&lt;string&gt;\n#include&lt;cstdlib&gt;\n</code></pre>\n\n<p>don't use .h extension</p>\n\n<p>we don't think we need <code>#include&lt;conio.h&gt;</code> anymore</p>\n\n<p>and isn't simpler </p>\n\n<p><code>getline(cin, A1.PI.name)</code>  than <code>cin.getline(A1.PI.name,50)</code><br>\nthen resize its max size </p>\n\n<pre><code>A1.PI.name.resize(50);\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 12595794, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDQYcZTPoF99iTGfmmvK93RMZaVRFrZRrk8cBh_2Q=k-s128", "display_name": "Harshaa Jaishankar", "link": "https://stackoverflow.com/users/12595794/harshaa-jaishankar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "closed_date": 1577352208, "accepted_answer_id": 59481059, "answer_count": 2, "score": 1, "last_activity_date": 1577354345, "creation_date": 1577282030, "question_id": 59479047, "link": "https://stackoverflow.com/questions/59479047/i-am-not-able-to-get-input-after-a-certain-point-from-the-user-even-though-no", "closed_reason": "Duplicate", "title": "I am not able to get input after a certain point ( from the user) even though no error pops wile compiling", "body": "<p>This program is a small hospital management program.\n It works with C++ and uses binary files and classes.\nit is a simple prog that taken the input of patients details and saves in a binary file, and displays the patients details by searching regno.</p>\n\n<p><strong>The code does not run beyond : cin>>A1.PI.age;</strong> and starts printing endless loop of something.</p>\n\n<p><em>PLEASE REPLY ME ON WHERE HAVE I GONE WRONG</em></p>\n\n<p>here is the code:</p>\n\n<pre><code>#include&lt;iostream.h&gt;\n#include&lt;conio.h&gt;\n#include&lt;fstream.h&gt;\n#include&lt;string.h&gt;\n#include&lt;stdlib.h&gt;\n\nclass all\n{ private:\nstruct address\n{ int house;\n  char street[30];\n  char city[30];};\n  struct patient_info\n{ char name[40];\n  address AD1;\n  int age;\n  int maritalstatus;\n  int regno;\n  char bldgrp[3];\n  char sex;\n}PI;\nint task;\nprotected:\n void firstpinfo();\n void showpinfo();\n void enterpinfo();\npublic:\n void tasks();\n char ch;\n int serial;\n}A1;\n\nclass date :public all\n { private :\n   int day;\n   int month;\n   int year;\n   public:\n   void enterdate()\n    {cout&lt;&lt;\"enter day of date\";\n     cin&gt;&gt;day;\n     cout&lt;&lt;\"enter month\";\n     cin&gt;&gt;month;\n     cout&lt;&lt;\"enter year\";\n     cin&gt;&gt;year;\n    }\n   void showdate()\n     { cout&lt;&lt;day&lt;&lt;\"/\"&lt;&lt;month&lt;&lt;\"/\"&lt;&lt;year;}\n  }D1;\n\n\n\n //global variables\n  int count,attempt;\n\nvoid main()\n{ count=0;\n  cout&lt;&lt;\"                                       HOSPITAL MANAGEMENT SOFTWARE                                      \n  \";\n  D1.enterdate();\n  A1.tasks();\n  getch();\n  while(count==0)\n   { A1.tasks();\n     cout&lt;&lt;\"press 0 to continue and 1 to exit\";\n     cin&gt;&gt; count;\n   }\n  getch();\n }\n\n\n  void all::tasks()\n\n { attempt=0;\n  D1.showdate();\n  cout&lt;&lt;\"select task\"&lt;&lt;endl\n  &lt;&lt;\"1.show patient details\"&lt;&lt;endl\n  &lt;&lt;\"2.enter details of a patient\"&lt;&lt;endl\n  &lt;&lt;\"3.exit prog\"&lt;&lt;endl;\n  cin&gt;&gt;task;\n  switch(task)\n {\n    case 1: {cout&lt;&lt;\"enter regno to display\"&lt;&lt;endl;\n    int search;\n    cin&gt;&gt;search;\n    fstream fon;\n    fon.open(\"hospital.dat\",ios::in|ios::binary);\n    if(!fon)\n     {cout&lt;&lt;\"error in opening\"&lt;&lt;endl;\n      getch();\n      exit(0);\n      }\n    else\n     {fon.read((char*)&amp;A1,sizeof(A1));\n      if(A1.PI.regno==search)\n       {cout&lt;&lt;\"showing details\";\n       A1.showpinfo();}\n      else\n       {cout&lt;&lt;\"regno not found\";}\n        fon.close();\n        }\n  break;}\ncase 2: {cout&lt;&lt;\"adding a new patient\";\n  A1.enterpinfo();\n  fstream fan;\n  fan.open(\"hospital.dat\",ios::in|ios::binary);\n  if(fan)\n  {fan.write((char*)&amp;A1,sizeof(A1));}\n  fan.close();\n  break;}\n case 3: { cout&lt;&lt;\"exiting...press any key\";\n   getch();\n   exit(0);\n   break;\n   }\n default: {cout&lt;&lt;\"error... press anykey to try again\";\n  getch();\n  A1.tasks();\n  };\n }}//END OF TASKS\n\n\n void all::showpinfo()\n {cout&lt;&lt;\"patient regno\\n\"&lt;&lt;A1.PI.regno&lt;&lt;endl;\n cout&lt;&lt;\"patient name\\n\"&lt;&lt;A1.PI.name&lt;&lt;endl;\n cout&lt;&lt;\"address of patient\\n\"&lt;&lt;A1.PI.AD1.house&lt;&lt;\" \"&lt;&lt; PI.AD1.street&lt;&lt;\" \"&lt;&lt;PI.AD1.city&lt;&lt;endl;\n cout&lt;&lt;\"blood group\"&lt;&lt;A1.PI.bldgrp&lt;&lt;endl;\n cout&lt;&lt;\"sex\"&lt;&lt;A1.PI.sex&lt;&lt;endl;\n cout&lt;&lt;\"data extracted\";\n }\n\n void all:: enterpinfo()\n {\n\n  cout&lt;&lt;\"enter unique registration number\";\n  cin&gt;&gt;PI.regno;\n  cout&lt;&lt;\"enter patient name\"&lt;&lt;endl;\n  cin.getline(A1.PI.name,50);\n  cout&lt;&lt;\"enter address( house, street, city)\"&lt;&lt;endl;\n  cin&gt;&gt;A1.PI.AD1.house;\n  cin.getline(A1.PI.AD1.street,30);\n  cin.getline(A1.PI.AD1.city,30);\n  cout&lt;&lt;\"enter age in years\"&lt;&lt;endl;\n  cin&gt;&gt;A1.PI.age;\n  cout&lt;&lt;\"enter 1 for married and 0 for otherwise\"&lt;&lt;endl;\n  cin&gt;&gt;A1.PI.maritalstatus;\n  cout&lt;&lt;\"enter blood group\"&lt;&lt;endl;\n  cin&gt;&gt;A1.PI.bldgrp;\n  cout&lt;&lt;\"enter M for male and F for female\";\n  cin&gt;&gt;A1.PI.sex;\n\n  }\n</code></pre>\n"}, {"tags": ["c++", "fstream", "binaryfiles", "c++-ios"], "comments": [{"owner": {"reputation": 2178, "user_id": 2208372, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce0f8d54e87a4835f7cf67694cad247f?s=128&d=identicon&r=PG", "display_name": "Phil1970", "link": "https://stackoverflow.com/users/2208372/phil1970"}, "edited": false, "score": 2, "creation_date": 1577284671, "post_id": 59478987, "comment_id": 105135661, "body": "One reason that can cause slowdown with large data is that any cache eventually get full so at some point you might have to <i>always</i> reload data from a slow medium. How to prevent slowdown? (1) Add more memory and (2) Ensure that data is structured in a way to minimize invalidation of the cache (locality of data that is expected to be accessed at one point in time). Thus the physical structure of the data should be compatible with the access pattern. In your case, if linear probing occurs very often with bigger data, then you will get a slowdown."}, {"owner": {"reputation": 3671, "user_id": 4227175, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/ce475809b37f81b6c7838ae53e451425?s=128&d=identicon&r=PG&f=1", "display_name": "ghchoi", "link": "https://stackoverflow.com/users/4227175/ghchoi"}, "reply_to_user": {"reputation": 2178, "user_id": 2208372, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce0f8d54e87a4835f7cf67694cad247f?s=128&d=identicon&r=PG", "display_name": "Phil1970", "link": "https://stackoverflow.com/users/2208372/phil1970"}, "edited": false, "score": 0, "creation_date": 1577285075, "post_id": 59478987, "comment_id": 105135740, "body": "@Phil1970 What do you mean by &#39;add more memory&#39;? If it is about RAM, it uses almost 0 memory... Or, can I increase cache somewhere in RAM? Can you give me any reference to start with?"}, {"owner": {"reputation": 3671, "user_id": 4227175, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/ce475809b37f81b6c7838ae53e451425?s=128&d=identicon&r=PG&f=1", "display_name": "ghchoi", "link": "https://stackoverflow.com/users/4227175/ghchoi"}, "reply_to_user": {"reputation": 2178, "user_id": 2208372, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce0f8d54e87a4835f7cf67694cad247f?s=128&d=identicon&r=PG", "display_name": "Phil1970", "link": "https://stackoverflow.com/users/2208372/phil1970"}, "edited": false, "score": 0, "creation_date": 1577285238, "post_id": 59478987, "comment_id": 105135779, "body": "@Phil1970 From <code>free -m -h</code>, I can find <code>cached</code> column. You may said this? How can I increase it?"}, {"owner": {"reputation": 2178, "user_id": 2208372, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce0f8d54e87a4835f7cf67694cad247f?s=128&d=identicon&r=PG", "display_name": "Phil1970", "link": "https://stackoverflow.com/users/2208372/phil1970"}, "edited": false, "score": 1, "creation_date": 1577285285, "post_id": 59478987, "comment_id": 105135789, "body": "The fact that your application don&#39;t use much memory does mean that the OS does not use memory for file caching. The first thing you should do it to check memory and disk usage using tools. Then the next thing to do would be to use a profiler or do some statistics to see how your program behave."}, {"owner": {"reputation": 3671, "user_id": 4227175, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/ce475809b37f81b6c7838ae53e451425?s=128&d=identicon&r=PG&f=1", "display_name": "ghchoi", "link": "https://stackoverflow.com/users/4227175/ghchoi"}, "reply_to_user": {"reputation": 2178, "user_id": 2208372, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce0f8d54e87a4835f7cf67694cad247f?s=128&d=identicon&r=PG", "display_name": "Phil1970", "link": "https://stackoverflow.com/users/2208372/phil1970"}, "edited": false, "score": 0, "creation_date": 1577285582, "post_id": 59478987, "comment_id": 105135846, "body": "@Phil1970 I did not do anything to utilize memory... How can I do? Any references for practice please? In addition, then file side should be less than <code>cached</code> memory?"}, {"owner": {"reputation": 2178, "user_id": 2208372, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce0f8d54e87a4835f7cf67694cad247f?s=128&d=identicon&r=PG", "display_name": "Phil1970", "link": "https://stackoverflow.com/users/2208372/phil1970"}, "edited": false, "score": 2, "creation_date": 1577286871, "post_id": 59478987, "comment_id": 105136126, "body": "What are the values of <code>BLOCK_SIZE</code>, <code>KEY_SIZE</code> and <code>M</code> in your case? How much RAM your computer have and how much is used when running that code? What is the disk usage? Do you have fast SSD drives? What is the percentage of linear probing done (when using hashing, you have to minimize collisions)."}, {"owner": {"reputation": 3671, "user_id": 4227175, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/ce475809b37f81b6c7838ae53e451425?s=128&d=identicon&r=PG&f=1", "display_name": "ghchoi", "link": "https://stackoverflow.com/users/4227175/ghchoi"}, "reply_to_user": {"reputation": 2178, "user_id": 2208372, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce0f8d54e87a4835f7cf67694cad247f?s=128&d=identicon&r=PG", "display_name": "Phil1970", "link": "https://stackoverflow.com/users/2208372/phil1970"}, "edited": false, "score": 0, "creation_date": 1577287240, "post_id": 59478987, "comment_id": 105136201, "body": "@Phil1970 Following your advice, I am trying to reduce file size. BLOCK_SIZE (80-&gt;40), KEY_SIZE (64-&gt;24), and M (250,000,013 -&gt; 100,000,007 to store 50M pairs, collision rate increases from 20~30% to 50~60% but seems faster!) to reduce file size. Is how much portion of RAM is used for caching solely determined by OS? Or, can I increase it?"}, {"owner": {"reputation": 2178, "user_id": 2208372, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce0f8d54e87a4835f7cf67694cad247f?s=128&d=identicon&r=PG", "display_name": "Phil1970", "link": "https://stackoverflow.com/users/2208372/phil1970"}, "edited": false, "score": 0, "creation_date": 1577820317, "post_id": 59478987, "comment_id": 105264663, "body": "You could listen that video to get an idea of what can affect performance on modern CPU: <a href=\"https://www.youtube.com/watch?v=ICKIMHCw--Y\" rel=\"nofollow noreferrer\">youtube.com/watch?v=ICKIMHCw--Y</a> (CPU design effect)"}], "answers": [{"comments": [{"owner": {"reputation": 3671, "user_id": 4227175, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/ce475809b37f81b6c7838ae53e451425?s=128&d=identicon&r=PG&f=1", "display_name": "ghchoi", "link": "https://stackoverflow.com/users/4227175/ghchoi"}, "edited": false, "score": 0, "creation_date": 1577315527, "post_id": 59480983, "comment_id": 105141294, "body": "Thank you, I learned seriously a lot! The default chunk size for a memory cache is a multiple of KB. It is huge... So, it seems like if I reduce the memory cache size (probably impossible?) or replace key of <code>BLOCK_SIZE</code> <code>char</code>s with 1 <code>long</code> pointing to somewhere in a file sequentially storing key list without empty space, I may get cache more &#39;valuable&#39; chunks of files into memory and achieve performance gain. Is it right?"}, {"owner": {"reputation": 2178, "user_id": 2208372, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce0f8d54e87a4835f7cf67694cad247f?s=128&d=identicon&r=PG", "display_name": "Phil1970", "link": "https://stackoverflow.com/users/2208372/phil1970"}, "reply_to_user": {"reputation": 3671, "user_id": 4227175, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/ce475809b37f81b6c7838ae53e451425?s=128&d=identicon&r=PG&f=1", "display_name": "ghchoi", "link": "https://stackoverflow.com/users/4227175/ghchoi"}, "edited": false, "score": 0, "creation_date": 1577318367, "post_id": 59480983, "comment_id": 105141633, "body": "At some point, you have to do your own tests with your data and decide how much effort you want to invest in that."}, {"owner": {"reputation": 3671, "user_id": 4227175, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/ce475809b37f81b6c7838ae53e451425?s=128&d=identicon&r=PG&f=1", "display_name": "ghchoi", "link": "https://stackoverflow.com/users/4227175/ghchoi"}, "edited": false, "score": 0, "creation_date": 1577321483, "post_id": 59480983, "comment_id": 105141956, "body": "Sure, sure. Just for asking advice about approaches. :D"}], "tags": [], "owner": {"reputation": 2178, "user_id": 2208372, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce0f8d54e87a4835f7cf67694cad247f?s=128&d=identicon&r=PG", "display_name": "Phil1970", "link": "https://stackoverflow.com/users/2208372/phil1970"}, "is_accepted": true, "score": 1, "last_activity_date": 1577298917, "creation_date": 1577298917, "answer_id": 59480983, "question_id": 59478987, "link": "https://stackoverflow.com/questions/59478987/c-binary-file-i-o-operations-slow-down-how-db-handle-binary-files/59480983#59480983", "title": "C++ Binary File I/O Operations Slow Down... How DB Handle Binary Files?", "body": "<p><strong>Data size</strong></p>\n\n<p>Usually disk drive block size are a power of 2 so if your data block size is also a power of 2, then you can essentially eliminate the case where a data block cross a disk block boundary.</p>\n\n<p>In your case, a value of 64 bytes (or 32 bytes if you don't really need to store the hash) might somewhat perform a bit better.</p>\n\n<p><strong>Insertion order</strong></p>\n\n<p>The other thing you could do to improve performance is to do your insertion is increasing hash order to reduce the number of a time data must be loaded from the disk.</p>\n\n<p>Generally when data is read or written to the disk, the OS will read/write a large chuck at a time (maybe 4k) so if your algorithm is written is a way to write data locally in time, you will reduce the number of time data must actually be read or written to the disk.</p>\n\n<p>Given that you make a lot of insertion, one possibility would be to process insertion in batch of say 1000 or even 10000 key/value pair at a time. Essentially, you would accumulate data in memory and sort it and once you have enough item (or when you are done inserting), you will then write the data in order.</p>\n\n<p>That way, you should be able to reduce disk access which is very slow. This is probably even more important if you are using traditional hard drive as moving the head is slow (in which case, it might be useful to defragment it). Also, be sure that your hard drive have more than enough free space.</p>\n\n<p>In some case, local caching (in your application) might also be helpful particularly if you are aware how your data is used.</p>\n\n<p><strong>File size VS collisions</strong></p>\n\n<p>When you use an hash, you want to find the sweet spot between file size and collisions. If you have too much collisions, then you will waste lot of time and at some point it might degenerate when it become hard to find a free place for almost every insertion.</p>\n\n<p>On the other hand, if your file is really very large, you might end up in a case where you might fill your RAM with data that is mainly empty and still need to replace data with data from the disk on almost all insertion.</p>\n\n<p>For example, if your data is 20GB and you are able to load say 2 GB in memory, then if insert are really random, 90% of the time you might need real access to hard drive.</p>\n\n<p><strong>Configuration</strong></p>\n\n<p>Well options will depends on the OS and it is beyond the scope of a programming forum. If you want to optimize your computer, then you should look elsewhere.</p>\n\n<p><strong>Reading</strong></p>\n\n<p>It might be helpful to read about operating systems (file system, cache layer\u2026) and algorithms (external sorting algorithms, B-Tree and other structures) to get a better understanding.</p>\n\n<p><strong>Alternatives</strong></p>\n\n<ul>\n<li>Extra RAM</li>\n<li>Fast SSD</li>\n<li>Multithreading (for ex. input and output threads)</li>\n<li>Rewriting of the algorithm (for ex. to read/write a whole disk page at once)</li>\n<li>Faster CPU / 64 bit computer</li>\n<li>Using algorithms designed for such scenarios.</li>\n<li>Using a database.</li>\n<li>Profiling code</li>\n<li>Tuning parameters</li>\n</ul>\n"}], "owner": {"reputation": 3671, "user_id": 4227175, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/ce475809b37f81b6c7838ae53e451425?s=128&d=identicon&r=PG&f=1", "display_name": "ghchoi", "link": "https://stackoverflow.com/users/4227175/ghchoi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 191, "favorite_count": 0, "accepted_answer_id": 59480983, "answer_count": 1, "score": 1, "last_activity_date": 1577298917, "creation_date": 1577281553, "question_id": 59478987, "link": "https://stackoverflow.com/questions/59478987/c-binary-file-i-o-operations-slow-down-how-db-handle-binary-files", "title": "C++ Binary File I/O Operations Slow Down... How DB Handle Binary Files?", "body": "<p>I am trying to make a simple file-based hash table. Here is my <code>insert</code> member function:</p>\n\n<pre><code>private: std::fstream f;  // std::ios::in | std::ios::out | std::ios::binary\n\npublic: void insert(const char* this_key, long this_value) {\n    char* that_key;\n    long that_value;\n    long this_hash = std::hash&lt;std::string&gt;{}(this_key) % M;\n    long that_hash;  // also block status\n\n    long block = this_hash;\n    long offset = block * BLOCK_SIZE;\n    while (true) {\n        this-&gt;f.seekg(offset);\n        this-&gt;f.read((char*) &amp;that_hash, sizeof(long));\n        if (that_hash &gt; -1) {  // -1 (by default) indicates a never allocated block\n            this-&gt;f.read(that_key, BLOCK_SIZE);\n            if (strcmp(this_key, that_key) == 0) {\n                this-&gt;f.seekp(this-&gt;f.tellg());\n                this-&gt;f.write((char*) &amp;this_value, sizeof(long));\n                break;\n            } else {\n                block = (block + 1) % M;  // linear probing\n                offset = block * BLOCK_SIZE;\n                continue;\n            }\n        } else {\n            this-&gt;f.seekp(offset);\n            this-&gt;f.write((char*) &amp;this_hash, sizeof(long));  // as block status\n            this-&gt;f.write(this_key, KEY_SIZE);\n            this-&gt;f.write((char*) &amp;this_value, sizeof(long));\n            break;\n        }\n    }\n}\n</code></pre>\n\n<p>Tests up to 10M key, value pairs with 50,000,017 blocks were fairly done. (Binary file size was about 3.8GB).</p>\n\n<p>However, a test with 50M keys and 250,000,013 blocks extremely slows down... (Binary file size was more than 19GB in this case). 1,000 <code>insert</code>s usually takes 4~5ms but exceptionally take more than 2,000ms. It gets slower and slower then takes 40~150ms... (x10 ~ x30 slower...) I definitely have no idea... </p>\n\n<ul>\n<li>What causes this exceptional binary file I/O slowing down?</li>\n<li>Do <code>seekg</code>&amp;<code>seekp</code> and other I/O operations are affected by file size? (I could not find any references about this question though...) </li>\n<li>How key, value stores and databases avoid this I/O slow down?</li>\n<li>How can I solve this problem?</li>\n</ul>\n"}, {"tags": ["c++", "stl", "overloading"], "comments": [{"owner": {"reputation": 4756, "user_id": 1364149, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/Y25ip.jpg?s=128&g=1", "display_name": "Shloim", "link": "https://stackoverflow.com/users/1364149/shloim"}, "edited": false, "score": 4, "creation_date": 1577279429, "post_id": 59478671, "comment_id": 105134345, "body": "Why not declare an <code>array&lt;int,3&gt; ar{ {1,2,3} }</code> in your function instead of an <code>int ar[3]</code>?"}, {"owner": {"reputation": 29, "user_id": 12575933, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDimE1eN1Ohh30r1PHr4dNnb-PmphOhbeDnAEVGpg=k-s128", "display_name": "Alexey Chicherin", "link": "https://stackoverflow.com/users/12575933/alexey-chicherin"}, "reply_to_user": {"reputation": 4756, "user_id": 1364149, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/Y25ip.jpg?s=128&g=1", "display_name": "Shloim", "link": "https://stackoverflow.com/users/1364149/shloim"}, "edited": false, "score": 0, "creation_date": 1577280371, "post_id": 59478671, "comment_id": 105134610, "body": "Yeap, it works that way. But i want to understand some things about overloading STL at all."}, {"owner": {"reputation": 20722, "user_id": 1625187, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/6vWOZ.jpg?s=128&g=1", "display_name": "Evg", "link": "https://stackoverflow.com/users/1625187/evg"}, "edited": false, "score": 0, "creation_date": 1577280836, "post_id": 59478671, "comment_id": 105134727, "body": "Note that the days of STL are <a href=\"https://stackoverflow.com/questions/5205491/whats-the-difference-between-stl-and-c-standard-library\">gone</a>. It has now become a part of the standard library."}, {"owner": {"reputation": 1087, "user_id": 2129218, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8bf5ffff85c1f5609fca08eb8e05279?s=128&d=identicon&r=PG", "display_name": "Build Succeeded", "link": "https://stackoverflow.com/users/2129218/build-succeeded"}, "edited": false, "score": 0, "creation_date": 1577280981, "post_id": 59478671, "comment_id": 105134766, "body": "We can use the unordered map/set container with specialized version of hashing <a href=\"https://en.cppreference.com/w/cpp/utility/hash\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/utility/hash</a>"}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "reply_to_user": {"reputation": 20722, "user_id": 1625187, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/6vWOZ.jpg?s=128&g=1", "display_name": "Evg", "link": "https://stackoverflow.com/users/1625187/evg"}, "edited": false, "score": 0, "creation_date": 1577283143, "post_id": 59478671, "comment_id": 105135270, "body": "@Evg -- unfortunately, &quot;STL&quot; now stands for STandard Library."}, {"owner": {"reputation": 20722, "user_id": 1625187, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/6vWOZ.jpg?s=128&g=1", "display_name": "Evg", "link": "https://stackoverflow.com/users/1625187/evg"}, "reply_to_user": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1577283370, "post_id": 59478671, "comment_id": 105135316, "body": "@PeteBecker, should &quot;STL&quot; be used to refer to the standard library nowadays?"}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "reply_to_user": {"reputation": 20722, "user_id": 1625187, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/6vWOZ.jpg?s=128&g=1", "display_name": "Evg", "link": "https://stackoverflow.com/users/1625187/evg"}, "edited": false, "score": 2, "creation_date": 1577283445, "post_id": 59478671, "comment_id": 105135337, "body": "@Evg -- &quot;should .. be used&quot;? No. &quot;is widely used&quot;? Yes. :-("}, {"owner": {"reputation": 29, "user_id": 12575933, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDimE1eN1Ohh30r1PHr4dNnb-PmphOhbeDnAEVGpg=k-s128", "display_name": "Alexey Chicherin", "link": "https://stackoverflow.com/users/12575933/alexey-chicherin"}, "reply_to_user": {"reputation": 20722, "user_id": 1625187, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/6vWOZ.jpg?s=128&g=1", "display_name": "Evg", "link": "https://stackoverflow.com/users/1625187/evg"}, "edited": false, "score": 0, "creation_date": 1577286587, "post_id": 59478671, "comment_id": 105136069, "body": "@Evg it is informative :) Before i`v read this i think STL - always mean STandart Library of C++. All what in namespace std. But it have another value.Full time holy war about this.. But in question i mean standard library."}, {"owner": {"reputation": 20722, "user_id": 1625187, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/6vWOZ.jpg?s=128&g=1", "display_name": "Evg", "link": "https://stackoverflow.com/users/1625187/evg"}, "edited": false, "score": 0, "creation_date": 1577288671, "post_id": 59478671, "comment_id": 105136481, "body": "@AlexeyChicherin, BTW, the author of STL is russian-american programmer Alexander Stepanov. :)"}], "answers": [{"comments": [{"owner": {"reputation": 29, "user_id": 12575933, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDimE1eN1Ohh30r1PHr4dNnb-PmphOhbeDnAEVGpg=k-s128", "display_name": "Alexey Chicherin", "link": "https://stackoverflow.com/users/12575933/alexey-chicherin"}, "edited": false, "score": 0, "creation_date": 1577282914, "post_id": 59478745, "comment_id": 105135224, "body": "Thank you. As i understand this : &quot;A program may add a template specialization for any standard library template...&quot;  mean that <a href=\"https://en.cppreference.com/w/cpp/container/set/find\" rel=\"nofollow noreferrer\">std::set::find</a> - have template version and i can create specialization?, and [std::set::insert] (<a href=\"https://en.cppreference.com/w/cpp/container/set/insert\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/container/set/insert</a>) - do not have.  Of course i can create new container and add in it any features, but without c++ STL perfomance"}, {"owner": {"reputation": 20722, "user_id": 1625187, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/6vWOZ.jpg?s=128&g=1", "display_name": "Evg", "link": "https://stackoverflow.com/users/1625187/evg"}, "reply_to_user": {"reputation": 29, "user_id": 12575933, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDimE1eN1Ohh30r1PHr4dNnb-PmphOhbeDnAEVGpg=k-s128", "display_name": "Alexey Chicherin", "link": "https://stackoverflow.com/users/12575933/alexey-chicherin"}, "edited": false, "score": 0, "creation_date": 1577284145, "post_id": 59478745, "comment_id": 105135532, "body": "@AlexeyChicherin, you can&#39;t. The template version of <code>.find</code> is there to support transparent comparators. See <a href=\"https://stackoverflow.com/questions/20317413/what-are-transparent-comparators\">this question</a>."}], "tags": [], "owner": {"reputation": 1263, "user_id": 6941952, "user_type": "registered", "profile_image": "https://graph.facebook.com/1683664381950916/picture?type=large", "display_name": "Mohammed Deifallah", "link": "https://stackoverflow.com/users/6941952/mohammed-deifallah"}, "is_accepted": false, "score": -1, "last_activity_date": 1577279671, "creation_date": 1577279671, "answer_id": 59478745, "question_id": 59478671, "link": "https://stackoverflow.com/questions/59478671/overloading-stl-function/59478745#59478745", "title": "Overloading STL function", "body": "<p>I don't think that C++ gives you the right to do so. For more information, you may get this <a href=\"https://stackoverflow.com/a/22701397/6941952\">answer</a> useful in your case.\nI hope that helps your problem.</p>\n"}, {"comments": [{"owner": {"reputation": 29, "user_id": 12575933, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDimE1eN1Ohh30r1PHr4dNnb-PmphOhbeDnAEVGpg=k-s128", "display_name": "Alexey Chicherin", "link": "https://stackoverflow.com/users/12575933/alexey-chicherin"}, "edited": false, "score": 0, "creation_date": 1577288716, "post_id": 59478833, "comment_id": 105136492, "body": "Thats because i cant upvote answer. Not enough reputation."}], "tags": [], "owner": {"reputation": 20522, "user_id": 11941443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f27a880243178eedf3abdab24898b335?s=128&d=identicon&r=PG&f=1", "display_name": "walnut", "link": "https://stackoverflow.com/users/11941443/walnut"}, "is_accepted": true, "score": 4, "last_activity_date": 1577302741, "last_edit_date": 1577302741, "creation_date": 1577280376, "answer_id": 59478833, "question_id": 59478671, "link": "https://stackoverflow.com/questions/59478671/overloading-stl-function/59478833#59478833", "title": "Overloading STL function", "body": "<p>You cannot declare additional overloads for a member function of a class outside the class definition. The language does not provide syntax for it. Since you can't modify the class definition in the standard library headers, you cannot add additional overloads to them either.</p>\n\n<hr>\n\n<p>Free functions in the <code>std</code> namespace may not be overloaded. There is syntax for it (the same way any overloads of free functions work), but doing so causes undefined behavior, because it is explicitly forbidden in the standard, see <a href=\"https://timsong-cpp.github.io/cppwp/n4659/namespace.std#1\" rel=\"nofollow noreferrer\">[namespace.std]/1</a>.</p>\n\n<hr>\n\n<p>What is usually (exceptions apply) allowed is to define <em>template specializations</em> for entities in the <code>std</code> namespace, but only if the specialization depends on a user-defined type and not for member functions, member function templates or member class templates. See the rest of the quoted and following paragraph linked above.</p>\n\n<p>A common example where specialization inside the <code>std</code> namespace is used is <code>std::hash</code> for use as hash function in unordered associative containers:</p>\n\n<pre><code>struct my_type {\n    //...\n};\n\nnamespace std {\n    template&lt;&gt;\n    struct hash&lt;my_type&gt; {\n        auto operator()(my_type const&amp; x) const noexcept {\n            //...\n        }\n    };\n}\n</code></pre>\n\n<p>But even something like that is not allowed if <code>my_type</code> is replaced by <code>int*</code>, <code>int[3]</code> or <code>std::array&lt;int, 3&gt;</code> or anything similar, because there is no dependence on a user-declared type.</p>\n\n<hr>\n\n<p>If you want to make a <code>std::array</code> from a built-in array, you will be able to use <code>std::to_array</code> in C++20:</p>\n\n<pre><code>set&lt;array&lt;int, 3&gt;&gt; s;\n\nint ar[3] = {1,2,3};\n\ns.insert(std::to_array(ar));\n\nauto it = s.find(std::to_array(ar));\n</code></pre>\n\n<p>Before C++20, you might have the function available as <code>std::experimental::to_array</code> in <code>#include&lt;experimental/array&gt;</code> or you can define it yourself (from <a href=\"https://en.cppreference.com/w/cpp/container/array/to_array\" rel=\"nofollow noreferrer\">cppreference.com</a>; requires <code>#include&lt;type_traits&gt;</code>, <code>#include&lt;utility&gt;</code> and <code>#include&lt;cstddef&gt;</code>):</p>\n\n<pre><code>namespace detail {\n\ntemplate &lt;class T, std::size_t N, std::size_t... I&gt;\nconstexpr std::array&lt;std::remove_cv_t&lt;T&gt;, N&gt;\n    to_array_impl(T (&amp;a)[N], std::index_sequence&lt;I...&gt;)\n{\n    return { {a[I]...} };\n}\n\n}\n\ntemplate &lt;class T, std::size_t N&gt;\nconstexpr std::array&lt;std::remove_cv_t&lt;T&gt;, N&gt; to_array(T (&amp;a)[N])\n{\n    return detail::to_array_impl(a, std::make_index_sequence&lt;N&gt;{});\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 29, "user_id": 12575933, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDimE1eN1Ohh30r1PHr4dNnb-PmphOhbeDnAEVGpg=k-s128", "display_name": "Alexey Chicherin", "link": "https://stackoverflow.com/users/12575933/alexey-chicherin"}, "edited": false, "score": 0, "creation_date": 1577284508, "post_id": 59478954, "comment_id": 105135621, "body": "Thanks! Utility class i think the best decision in this case."}], "tags": [], "owner": {"reputation": 2990, "user_id": 10803671, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-mt-5s4Zqfyk/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-i_80atK5hWxwK60_Ren7qQV1TVuQ/mo/photo.jpg?sz=128", "display_name": "ALX23z", "link": "https://stackoverflow.com/users/10803671/alx23z"}, "is_accepted": false, "score": 0, "last_activity_date": 1577281344, "creation_date": 1577281344, "answer_id": 59478954, "question_id": 59478671, "link": "https://stackoverflow.com/questions/59478671/overloading-stl-function/59478954#59478954", "title": "Overloading STL function", "body": "<p>About the other question - about permutations, i.e., that you want your set to find iterator to <code>{1,2,3}</code> when you look for a permutation of it.</p>\n\n<p>Technically, you can do 2 things:</p>\n\n<p>(1) make a specialized comparison operator for which permutations are equivalent. Or make a class that wraps <code>std::array</code> and implement its comparison operators this way.</p>\n\n<p>(2) (preferred) simply sort your array before adding it to set and/or searching for it.</p>\n\n<p>If you need its elements in original order, then I recomend to make utility class that contains both the original array and sorted version that it uses for comparisons.</p>\n\n<p>If you also want to be able to add option for having multiple original while returning the exact one when it exists... then its more complicated. It can be done with some composite functions.</p>\n"}, {"comments": [{"owner": {"reputation": 29, "user_id": 12575933, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDimE1eN1Ohh30r1PHr4dNnb-PmphOhbeDnAEVGpg=k-s128", "display_name": "Alexey Chicherin", "link": "https://stackoverflow.com/users/12575933/alexey-chicherin"}, "edited": false, "score": 0, "creation_date": 1577293276, "post_id": 59479334, "comment_id": 105137478, "body": "I`m trying to compile and it works:) \u0421ould you clarify about the insert operation here? I mean if we using is set&lt;int&gt;,  set::insert trying to find existing element, compare by key value, if there is no equal insert new element of set, if equal return iterator. If it set&lt;std::array&lt;int,n&gt;&gt;  set::insert overloaded in standard library, and trying to find full equality of each[n] position in array and make the same. But here we pass the value of MyFixedArray class. How this conversion to array&lt;int,n&gt; happen? If will be two varaible like T ar[arsize] and T ar2[arsize]; Which will be used?"}, {"owner": {"reputation": 552, "user_id": 11038454, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/118900695ae8e562f696c0dd14feb0d7?s=128&d=identicon&r=PG&f=1", "display_name": "Tony", "link": "https://stackoverflow.com/users/11038454/tony"}, "reply_to_user": {"reputation": 29, "user_id": 12575933, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDimE1eN1Ohh30r1PHr4dNnb-PmphOhbeDnAEVGpg=k-s128", "display_name": "Alexey Chicherin", "link": "https://stackoverflow.com/users/12575933/alexey-chicherin"}, "edited": false, "score": 0, "creation_date": 1577299070, "post_id": 59479334, "comment_id": 105138657, "body": "operator array&lt;T, arsize&gt;() const { \u2026 } is the conversion operator override. When you use set&lt;array&lt;int, 3&gt;&gt;::insert, it is looking for array&lt;int, 3&gt; as a parameter, but you passed in MyFixedArray&lt;int, 3&gt;. It has a conversion operator to array&lt;int, 3&gt;, so it will be called to do the conversion, then pass to insert."}], "tags": [], "owner": {"reputation": 552, "user_id": 11038454, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/118900695ae8e562f696c0dd14feb0d7?s=128&d=identicon&r=PG&f=1", "display_name": "Tony", "link": "https://stackoverflow.com/users/11038454/tony"}, "is_accepted": false, "score": 0, "last_activity_date": 1577284376, "creation_date": 1577284376, "answer_id": 59479334, "question_id": 59478671, "link": "https://stackoverflow.com/questions/59478671/overloading-stl-function/59479334#59479334", "title": "Overloading STL function", "body": "<p>Just like @walnut said, you cannot declare additional overloads for a member function of a class outside the class definition. Other than encapsulate your own int&lt;3> class, there is another work around - operator &lt;&lt; override.</p>\n\n<pre><code>set&lt;array&lt;int, 3&gt;&gt;&amp; operator &lt;&lt; (set&lt;array&lt;int, 3&gt;&gt;&amp; s, int ar[3])\n{\n    array&lt;int,3&gt; ar2 { ar[0], ar[1], ar[2] };\n    s.insert(ar2);\n\n    return s;\n}\n</code></pre>\n\n<p>It looks weird, but easy to use.</p>\n\n<p>Now you can do this</p>\n\n<pre><code>set&lt;array&lt;int, 3&gt;&gt; s;\nint ar[3] = {1,2,3};\n\ns &lt;&lt; ar;\n</code></pre>\n\n<p>However, if there is a bunch of functions you want to use in set against int[3] against array, It is better to define your own class / struct.</p>\n\n<pre><code>template &lt;class T, int arsize&gt;\nstruct MyFixedArray\n{\n    T ar[arsize];\n    MyFixedArray(T _ar[arsize]) {\n        for (int i = 0; i &lt; arsize; ++i)\n            ar[i] = _ar[i];\n    };\n    operator array&lt;T, arsize&gt;() const {\n        array&lt;T, arsize&gt; _ar;\n        for (int i = 0; i &lt; arsize; ++i)\n            _ar[i] = ar[i];\n\n        return _ar;\n    };\n};\n</code></pre>\n\n<p>and now you can use it freely everwhere</p>\n\n<pre><code>MyFixedArray&lt;int, 3&gt; myar(ar);\n\ns.insert(myar);\nauto it = s.find(myar);\n</code></pre>\n"}], "owner": {"reputation": 29, "user_id": 12575933, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDimE1eN1Ohh30r1PHr4dNnb-PmphOhbeDnAEVGpg=k-s128", "display_name": "Alexey Chicherin", "link": "https://stackoverflow.com/users/12575933/alexey-chicherin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 226, "favorite_count": 1, "accepted_answer_id": 59478833, "answer_count": 4, "score": 0, "last_activity_date": 1577302741, "creation_date": 1577279103, "last_edit_date": 1577289638, "question_id": 59478671, "link": "https://stackoverflow.com/questions/59478671/overloading-stl-function", "title": "Overloading STL function", "body": "<p>I have a code like this:</p>\n\n<pre><code>   set&lt;array&lt;int, 3&gt;&gt; s;\n   int ar[3] = {1,2,3};\n   s.insert(ar);\n   auto it = s.find(ar);\n</code></pre>\n\n<p>And the message of IDE that <code>no instance of overloaded function insert/find</code>. If I use <code>std::array</code> it is ok, <code>::insert</code> and <code>::find</code> work in the same way.\nBut what if i wanna use these C arrays <code>T[N]</code> or find function with <code>std::array</code> in set should return iterator if two of three elements equal. Or <code>set::insert</code> will not insert a new array if it is a permutation of exist, I mean <code>s.insert({1,2,3})</code> - already added, <code>s.insert({3,2,1})</code> - return iterator on <code>{1,2,3}</code>.</p>\n\n<p>The question is how to overload STD functions? Not in this code especially but in general? Any link or real code example welcome.  May be its a really simple question for experienced programmers) but there are a lot of examples of operator overloading, but no for STL. Thanks.</p>\n"}, {"tags": ["c++", "json", "rapidjson", "jsonparser"], "comments": [{"owner": {"reputation": 3008, "user_id": 1863938, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96ec4e16681460302ea67bfc201b76f3?s=128&d=identicon&r=PG", "display_name": "parktomatomi", "link": "https://stackoverflow.com/users/1863938/parktomatomi"}, "edited": false, "score": 0, "creation_date": 1577333301, "post_id": 59478668, "comment_id": 105143280, "body": "I couldn&#39;t reproduce this with <code>Document::parse</code> and a string literal in the most recent release or trunk. Could you try to make a small code sample that fails, that I could just copy/paste to reproduce?"}, {"owner": {"reputation": 29, "user_id": 12182550, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c455b6f04f87d844fdd70831cd300a18?s=128&d=identicon&r=PG&f=1", "display_name": "cangermi", "link": "https://stackoverflow.com/users/12182550/cangermi"}, "reply_to_user": {"reputation": 3008, "user_id": 1863938, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96ec4e16681460302ea67bfc201b76f3?s=128&d=identicon&r=PG", "display_name": "parktomatomi", "link": "https://stackoverflow.com/users/1863938/parktomatomi"}, "edited": false, "score": 0, "creation_date": 1577341745, "post_id": 59478668, "comment_id": 105144779, "body": "I am sorry there was a problem with my file reading. Now is working fine thank you."}], "owner": {"reputation": 29, "user_id": 12182550, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c455b6f04f87d844fdd70831cd300a18?s=128&d=identicon&r=PG&f=1", "display_name": "cangermi", "link": "https://stackoverflow.com/users/12182550/cangermi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 45, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1577282421, "creation_date": 1577279083, "last_edit_date": 1577282421, "question_id": 59478668, "link": "https://stackoverflow.com/questions/59478668/rapidjson-fails-to-parse-nested-object", "title": "Rapidjson fails to parse nested object", "body": "<p>I am trying to parse json objects from a document. I have a million objects so it has to be generic. I am reading my document line by line and parsing with <code>jObj.Parse(const str)</code>. I have some objects that contains nested objects like this,</p>\n\n<pre><code>{ \"jsonObjectName\" : { \"A\" : \"1\", \"B\" : \"{\\\"A\\\":\\\"1\\\",\\\"B\\\":\\\"2\\\"}\" } }\n</code></pre>\n\n<p>Parsing this was okay, at least I thought it was but when I tried to get the object with <code>jObject.GetObect()</code> assertion fails and jObject type returns as 0 (kNullFlag) so I get an exception. </p>\n\n<pre><code>qDebug() &lt;&lt; jObject.GetParseError(); \n</code></pre>\n\n<p>returns 6 which is (kParseErrorObjectMissCommaOrCurlyBracket).But my json object is valid.</p>\n\n<p>I could not find a solution but interfering the library but I do not want to. My question is how can I parse or avoid this or is there something that I am doing wrong.</p>\n\n<p>There is no problem when I tried with no braces like this,</p>\n\n<pre><code>{ \"jsonObjectName\" : { \"A\" : \"1\", \"B\" : \"\\\"A\\\":\\\"1\\\",\\\"B\\\":\\\"2\\\"\" } }\n</code></pre>\n"}, {"tags": ["c++", "qt", "qt5", "qsettings"], "comments": [{"owner": {"reputation": 1081, "user_id": 4859268, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/434108cc24f67b8f47c3032894e72423?s=128&d=identicon&r=PG&f=1", "display_name": "Mikhail", "link": "https://stackoverflow.com/users/4859268/mikhail"}, "edited": false, "score": 1, "creation_date": 1577279144, "post_id": 59478635, "comment_id": 105134269, "body": "you could use IPC approach. whether it will be TCP\\IP or D-Bus protocol (only in linux) or shared memory"}, {"owner": {"reputation": 130, "user_id": 11577537, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca5ae83ee3ac053c7fcc1b94cb2404d3?s=128&d=identicon&r=PG&f=1", "display_name": "Yevhenii Mamontov", "link": "https://stackoverflow.com/users/11577537/yevhenii-mamontov"}, "edited": false, "score": 1, "creation_date": 1577280702, "post_id": 59478635, "comment_id": 105134693, "body": "If these two applications are on same machine you can use <a href=\"https://doc.qt.io/qt-5/ipc.html\" rel=\"nofollow noreferrer\">IPC</a> as most suitable, if your applications are on different machines or will later be on different machines it is better to use Tcp/Ip approach."}], "answers": [{"tags": [], "owner": {"reputation": 2537, "user_id": 4149835, "user_type": "registered", "accept_rate": 42, "profile_image": "https://lh6.googleusercontent.com/-n_QVH3KiURQ/AAAAAAAAAAI/AAAAAAAAAFM/RomdbXIW1hU/photo.jpg?sz=128", "display_name": "Vladimir Bershov", "link": "https://stackoverflow.com/users/4149835/vladimir-bershov"}, "is_accepted": true, "score": 3, "last_activity_date": 1577309184, "last_edit_date": 1577309184, "creation_date": 1577304063, "answer_id": 59481474, "question_id": 59478635, "link": "https://stackoverflow.com/questions/59478635/can-i-make-qsettings-settings-for-2-or-more-applications/59481474#59481474", "title": "Can I make QSettings settings for 2 or more applications?", "body": "<p>I cannot suggest a cross-platform method based on registry, but want to show another ways.</p>\n\n<hr>\n\n<h2>Method 1 (based on common ini file)</h2>\n\n<ol>\n<li>Store the path in some common ini file, for example in <code>&lt;some_common_path&gt;/settings_common.ini</code>. Both applications shall have access to the file:</li>\n</ol>\n\n<p><strong>App 1 (Writer)</strong></p>\n\n<pre><code>#include &lt;QtCore/QCoreApplication&gt;\n\n#include &lt;QSettings&gt;\n#include &lt;QDebug&gt;\n\n#include &lt;QThread&gt;\n\nconst QString CommonSettingsFilePath = \"c:/temp/settings_common.ini\";\nconst QString CommonKey = \"common/path\";\n\nint main(int argc, char *argv[])\n{\n    QCoreApplication a(argc, argv);\n\n    for(;;)\n    {\n        static int it = 0;\n\n        QString pathString = QString(\"path_%1\").arg(it++);\n\n        QSettings settings(CommonSettingsFilePath, QSettings::IniFormat);\n        settings.setValue(CommonKey, pathString);\n\n        QThread::sleep(1);\n    }\n\n    return a.exec();\n}\n</code></pre>\n\n<p><strong>App 2 (Reader)</strong></p>\n\n<pre><code>#include &lt;QtCore/QCoreApplication&gt;\n\n#include &lt;QSettings&gt;\n#include &lt;QDebug&gt;\n\n#include &lt;QThread&gt;\n\nconst QString CommonSettingsFilePath = \"c:/temp/settings_common.ini\";\nconst QString CommonKey = \"common/path\";\n\nint main(int argc, char *argv[])\n{\n    QCoreApplication a(argc, argv);\n\n    for (;;)\n    {    \n        QSettings settings(CommonSettingsFilePath, QSettings::IniFormat);\n        QString pathString = settings.value(CommonKey, \"\").toString();\n\n        qDebug() &lt;&lt; \"Path read from ini =\" &lt;&lt; pathString;\n\n        QThread::sleep(2);\n    }\n\n    return a.exec();\n}\n</code></pre>\n\n<p>Possible output of the App 2:</p>\n\n<pre><code>Path read from ini = \"path_6\"\nPath read from ini = \"path_8\"\nPath read from ini = \"path_9\"\nPath read from ini = \"path_11\"\n...\n</code></pre>\n\n<hr>\n\n<h2>Method 2 (based on Inter-process communication)</h2>\n\n<p><a href=\"https://en.wikipedia.org/wiki/Inter-process_communication\" rel=\"nofollow noreferrer\">IPC</a> using <a href=\"https://doc.qt.io/qt-5/qtremoteobjects-index.html\" rel=\"nofollow noreferrer\">Qt Remote Objects API</a>:<br>\nApp1 is <a href=\"https://doc.qt.io/qt-5/qtremoteobjects-source.html#source\" rel=\"nofollow noreferrer\">Source</a>, App2 (reader) will be <a href=\"https://doc.qt.io/qt-5/qtremoteobjects-replica.html#replica\" rel=\"nofollow noreferrer\">Replica</a>, the path is a property.</p>\n\n<p><em>Only the main points are shown.</em></p>\n\n<p>In both App1 and App2 .pro files add <code>remoteobjects</code> module:</p>\n\n<pre><code>QT  += core remoteobjects ...\n</code></pre>\n\n<p><strong>path.rep</strong> file:</p>\n\n<pre><code>#include &lt;QtCore&gt;\n#include &lt;QString&gt;\n\nclass Path\n{\n    PROP(QString path);\n};\n</code></pre>\n\n<p>In App1 pro:</p>\n\n<pre><code>REPC_SOURCE = path.rep\n</code></pre>\n\n<p>App1 class:</p>\n\n<pre><code>#include \"rep_path_source.h\"\n\nclass CommonPath : public PathSimpleSource\n{\n    Q_OBJECT\n};\n</code></pre>\n\n<p>Then in App1:</p>\n\n<pre><code>CommonPath sourcePath;\n\nQRemoteObjectHost sourceNode(QUrl(\"local:path\")); // create host node\nsourceNode.enableRemoting(&amp;sourcePath); // enable remoting/sharing\n\n...\n\nsourcePath.setPath(\"some_path_aaa\");\n</code></pre>\n\n<p>In App2 pro:</p>\n\n<pre><code>REPC_REPLICA = path.rep\n</code></pre>\n\n<p>In App2 furthermore:</p>\n\n<pre><code>#include \"rep_path_replica.h\"\n\nQSharedPointer&lt;PathReplica&gt; replica;\n\nQRemoteObjectNode repNode; // create remote object node\nrepNode.connectToNode(QUrl(\"local:path\")); // connect with remote host node\n\nreplica.reset(repNode.acquire&lt;PathReplica&gt;()); // acquire replica of source from host node\n\nreplica-&gt;waitForSource();\n\n...\n\nqDebug() &lt;&lt; replica-&gt;path();\n</code></pre>\n\n<p><strong>Of course you can distribute all the necessary data in this way, not just the path.</strong></p>\n"}], "owner": {"reputation": 147, "user_id": 8632863, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/J95kj.jpg?s=128&g=1", "display_name": "\u0420\u043e\u043c\u0430\u043d \u0425\u0443\u0434\u043e\u0431\u0435\u0440\u0434\u0438\u043d", "link": "https://stackoverflow.com/users/8632863/%d0%a0%d0%be%d0%bc%d0%b0%d0%bd-%d0%a5%d1%83%d0%b4%d0%be%d0%b1%d0%b5%d1%80%d0%b4%d0%b8%d0%bd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 166, "favorite_count": 1, "accepted_answer_id": 59481474, "answer_count": 1, "score": 0, "last_activity_date": 1577309184, "creation_date": 1577278841, "last_edit_date": 1577297176, "question_id": 59478635, "link": "https://stackoverflow.com/questions/59478635/can-i-make-qsettings-settings-for-2-or-more-applications", "title": "Can I make QSettings settings for 2 or more applications?", "body": "<p>There are 2 applications: </p>\n\n<ol>\n<li><p>creates a file somewhere, and </p></li>\n<li><p>should go along some path and pick up the contents of the file.</p></li>\n</ol>\n\n<p>Can I in the first application specify the path to the file in QSettings, and the second to take this path from the registry and go through it to the file?</p>\n\n<p>Please tell me a simple example.</p>\n"}, {"tags": ["c++", "operator-overloading"], "comments": [{"owner": {"reputation": 305833, "user_id": 68587, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/7d9fd158e03cbde94f7e0b33b78222af?s=128&d=identicon&r=PG", "display_name": "John Kugelman", "link": "https://stackoverflow.com/users/68587/john-kugelman"}, "edited": false, "score": 0, "creation_date": 1577278612, "post_id": 59478578, "comment_id": 105134153, "body": "Please create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. We need to see the <code>Wielomian()</code> constructor and the <code>&lt;&lt;</code> operator."}, {"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 0, "creation_date": 1577278777, "post_id": 59478578, "comment_id": 105134198, "body": "In particular, we also need information on what <code>wspolczynniki</code> points at, and what value <code>stopien</code> holds.   Those need to be pretty well aligned in your code (since it appears <code>w.stopien</code> is being used as an upper limit for an array index, <code>i</code>) and getting that wrong will give undefined behaviour (running past the end of a dynamically allocated array, etc)"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1577279133, "post_id": 59478578, "comment_id": 105134267, "body": "The <code>+</code> and  <code>-</code> operations normally do not modify any of their operands."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 2, "creation_date": 1577279203, "post_id": 59478578, "comment_id": 105134292, "body": "Don&#39;t use <code>free</code> with memory you got from <code>new []</code> \u2013 it has undefined behaviour. Use <code>delete []</code>."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1577279284, "post_id": 59478578, "comment_id": 105134311, "body": "And note that <code>Wielomian&lt;int&gt;(2)</code> will cause undefined behaviour."}, {"owner": {"reputation": 31823, "user_id": 1960455, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/d22bdc5c04b48a9054586eb64174ea99?s=128&d=identicon&r=PG", "display_name": "t.niese", "link": "https://stackoverflow.com/users/1960455/t-niese"}, "edited": false, "score": 0, "creation_date": 1577279389, "post_id": 59478578, "comment_id": 105134338, "body": "In addition to the <code>free</code> and <code>new[]</code> information, I would suggest you using  <code>std::vectore&lt;T&gt; wspolczynniki</code> instead of <code>T *wspolczynniki</code>, that would simplify your code. (But as it is homework you might not have a choice)"}, {"owner": {"reputation": 1087, "user_id": 2129218, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8bf5ffff85c1f5609fca08eb8e05279?s=128&d=identicon&r=PG", "display_name": "Build Succeeded", "link": "https://stackoverflow.com/users/2129218/build-succeeded"}, "edited": false, "score": 0, "creation_date": 1577280055, "post_id": 59478578, "comment_id": 105134516, "body": "Don&#39;t understand the problem, because your program is working fine as operators are executed properly."}, {"owner": {"reputation": 53, "user_id": 11304482, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gSZ9A.jpg?s=128&g=1", "display_name": "DonQnei", "link": "https://stackoverflow.com/users/11304482/donqnei"}, "edited": false, "score": 0, "creation_date": 1577280755, "post_id": 59478578, "comment_id": 105134705, "body": "t.niese yea I know but it is homework   Mannoj I want use &quot;&gt;&gt;&quot; for all cells not only 1st. Now when I compile it my program only change value for cell &quot;0&quot; molbdnilo ok, thanks I will check this."}, {"owner": {"reputation": 1028, "user_id": 2654470, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09fdaef3f1f52aaf47067f1050b27013?s=128&d=identicon&r=PG", "display_name": "Spencer", "link": "https://stackoverflow.com/users/2654470/spencer"}, "reply_to_user": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 0, "creation_date": 1577281405, "post_id": 59478578, "comment_id": 105134872, "body": "@Peter &quot;wieloman&quot;-&gt; &quot;polynomial&quot;, &quot;wspolczynniki&quot; -&gt; &quot;coefficients&quot;, &quot;stopien&quot; -&gt; &quot;degree&quot;."}, {"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "reply_to_user": {"reputation": 1028, "user_id": 2654470, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09fdaef3f1f52aaf47067f1050b27013?s=128&d=identicon&r=PG", "display_name": "Spencer", "link": "https://stackoverflow.com/users/2654470/spencer"}, "edited": false, "score": 0, "creation_date": 1577283489, "post_id": 59478578, "comment_id": 105135348, "body": "@Spencer - that&#39;s all well and good, but not what I was asking.  I asked for the OP to provide code showing how it establishes relationships between the variables.   The translations you give may reflect intent.  They may not reflect what the code actually does - and that is fairly likely, since the OP has indicated a function is not behaving as expected."}], "answers": [{"comments": [{"owner": {"reputation": 31823, "user_id": 1960455, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/d22bdc5c04b48a9054586eb64174ea99?s=128&d=identicon&r=PG", "display_name": "t.niese", "link": "https://stackoverflow.com/users/1960455/t-niese"}, "reply_to_user": {"reputation": 53, "user_id": 11304482, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gSZ9A.jpg?s=128&g=1", "display_name": "DonQnei", "link": "https://stackoverflow.com/users/11304482/donqnei"}, "edited": false, "score": 0, "creation_date": 1577281410, "post_id": 59478845, "comment_id": 105134874, "body": "@DonQnei Such problems can be easily spotted if you step line by line through that part of your code using a debugger. That will save you time looking for the error your self, or waiting for an answer."}, {"owner": {"reputation": 1028, "user_id": 2654470, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09fdaef3f1f52aaf47067f1050b27013?s=128&d=identicon&r=PG", "display_name": "Spencer", "link": "https://stackoverflow.com/users/2654470/spencer"}, "edited": false, "score": 0, "creation_date": 1577281611, "post_id": 59478845, "comment_id": 105134913, "body": "Or he could check <code>stopien==0</code> in the constructor then use <code>do..while</code> in the more frequently used members to avoid that extra check."}, {"owner": {"reputation": 31823, "user_id": 1960455, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/d22bdc5c04b48a9054586eb64174ea99?s=128&d=identicon&r=PG", "display_name": "t.niese", "link": "https://stackoverflow.com/users/1960455/t-niese"}, "reply_to_user": {"reputation": 1028, "user_id": 2654470, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09fdaef3f1f52aaf47067f1050b27013?s=128&d=identicon&r=PG", "display_name": "Spencer", "link": "https://stackoverflow.com/users/2654470/spencer"}, "edited": false, "score": 0, "creation_date": 1577281922, "post_id": 59478845, "comment_id": 105134984, "body": "@Spencer Using a <code>while</code> or a <code>for</code> is in this case better than a <code>do..while</code>. If you see that <code>do..while</code> in a code review you would need the check the whole code if nothing in the code would change <code>stopien</code> to <code>0</code> and that&#39;s bad. Using the loops correctly will prevent you from such bugs right at the place where you use the code, making the code safer and more maintainable."}, {"owner": {"reputation": 1028, "user_id": 2654470, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09fdaef3f1f52aaf47067f1050b27013?s=128&d=identicon&r=PG", "display_name": "Spencer", "link": "https://stackoverflow.com/users/2654470/spencer"}, "edited": false, "score": 0, "creation_date": 1577282410, "post_id": 59478845, "comment_id": 105135091, "body": "@t.neise You&#39;d only do it if (1) it was a real requirement that the value never be 0 and (2) you really, really needed the extra cycles (which is unlikely). With (1) you need to check the whole code anyway. You&#39;d put an assert in the source code so that a debug build would make the extra check but the release build wouldn&#39;t. Never assume the most naive case."}, {"owner": {"reputation": 31823, "user_id": 1960455, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/d22bdc5c04b48a9054586eb64174ea99?s=128&d=identicon&r=PG", "display_name": "t.niese", "link": "https://stackoverflow.com/users/1960455/t-niese"}, "reply_to_user": {"reputation": 1028, "user_id": 2654470, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09fdaef3f1f52aaf47067f1050b27013?s=128&d=identicon&r=PG", "display_name": "Spencer", "link": "https://stackoverflow.com/users/2654470/spencer"}, "edited": false, "score": 0, "creation_date": 1577283416, "post_id": 59478845, "comment_id": 105135327, "body": "@Spencer it is not about if it is a requirement that you want to support <code>0</code> as value, but about preventing bugs. Out of bounds array access are one of the most reason for undefined behavior and not predictable crashes or potential security problems caused by them. And using the correct loop is the easiest way to minimize such problems. Especially if the code base gets larger those relations are hard to keep track of, so you want to ensure the correctness a the place where you use it. And about the saving of one comparison here, you have IO in the loop so this really does not matter."}, {"owner": {"reputation": 1028, "user_id": 2654470, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09fdaef3f1f52aaf47067f1050b27013?s=128&d=identicon&r=PG", "display_name": "Spencer", "link": "https://stackoverflow.com/users/2654470/spencer"}, "edited": false, "score": 0, "creation_date": 1577284044, "post_id": 59478845, "comment_id": 105135507, "body": "@t.neise If you really need a bounds check, it should be done explicitly, not buried in the loop condition. And now I suspect wer&#39;re going to be bumped to chat."}, {"owner": {"reputation": 1028, "user_id": 2654470, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09fdaef3f1f52aaf47067f1050b27013?s=128&d=identicon&r=PG", "display_name": "Spencer", "link": "https://stackoverflow.com/users/2654470/spencer"}, "reply_to_user": {"reputation": 31823, "user_id": 1960455, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/d22bdc5c04b48a9054586eb64174ea99?s=128&d=identicon&r=PG", "display_name": "t.niese", "link": "https://stackoverflow.com/users/1960455/t-niese"}, "edited": false, "score": 0, "creation_date": 1577284432, "post_id": 59478845, "comment_id": 105135600, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/204841/discussion-between-spencer-and-t-niese\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 31823, "user_id": 1960455, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/d22bdc5c04b48a9054586eb64174ea99?s=128&d=identicon&r=PG", "display_name": "t.niese", "link": "https://stackoverflow.com/users/1960455/t-niese"}, "is_accepted": true, "score": 2, "last_activity_date": 1577281709, "last_edit_date": 1577281709, "creation_date": 1577280492, "answer_id": 59478845, "question_id": 59478578, "link": "https://stackoverflow.com/questions/59478578/c-operator-overload/59478845#59478845", "title": "C++ Operator Overload &gt;&gt;", "body": "<p>Your <code>while</code> condition in <code>operator &gt;&gt;</code> is wrong. In your code you have:</p>\n\n<pre><code>int i = 0;\ndo {\n  input &gt;&gt; w.wspolczynniki[i++];\n} while (w.stopien &lt; i);\n</code></pre>\n\n<p><code>i</code> is <code>0</code> at the beginning, and then after <code>input &gt;&gt; w.wspolczynniki[i++]</code> it is <code>1</code>. The <code>while</code> condition is <code>(w.stopien &lt; i)</code> so if <code>w.stopien</code> (which is <code>4</code> in your example)  is smaler then <code>i</code> which is <code>1</code> in the first iteration, you will continue the loop. But <code>4 &lt; 1</code> is <code>false</code> you will always only read one value.</p>\n\n<p>So get your <code>do-while</code> to work you would need to change it to <code>(w.stopien &gt; i)</code>. But as you test if your index <code>i</code> is in the correct range you shouldn't use a <code>do-while</code> at all, but a <code>while</code> loop.</p>\n\n<pre><code>int i = 0;\nwhile (i &lt; w.stopien) {\n  input &gt;&gt; w.wspolczynniki[i++];\n}\n</code></pre>\n\n<p>Or even a <code>for</code> loop, which would make clearer what you are doing:</p>\n\n<pre><code>for(int i=0; i&lt; w.stopien; i++) {\n  input &gt;&gt; w.wspolczynniki[i];\n}\n</code></pre>\n\n<p>In addition to that - and what is already mentioned in the comments - never combine the memory allocations and deallocation that don't belong together. If you use <code>new[]</code> then you have to use <code>delete[]</code> to free the memory and not <code>free</code>.</p>\n\n<p>And don't use signed numbers (<code>int</code>) for indices, so <code>stopien</code> and <code>i</code> should be unsigned (e.g. <code>size_t</code>). And for <code>stopien</code> you should ensure on construction that it is <code>1</code> or larger.</p>\n\n<p>And if you are allowed to you should switch form <code>T* wspolczynniki</code> to <code>std::vector&lt;T&gt; wspolczynniki</code> that would allow you to get rid of the copy constructor, the assignment operator, the destructor, you would not need int stopien<code>, and you could simplify other parts of the code using [algorithm](https://en.cppreference.com/w/cpp/algorithm), or at least keep that you normally would use a</code>std::vector` (or other containers) then doing the allocation and the copying yourself.</p>\n"}], "owner": {"reputation": 53, "user_id": 11304482, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gSZ9A.jpg?s=128&g=1", "display_name": "DonQnei", "link": "https://stackoverflow.com/users/11304482/donqnei"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "accepted_answer_id": 59478845, "answer_count": 1, "score": 0, "last_activity_date": 1577281709, "creation_date": 1577278318, "last_edit_date": 1577278852, "question_id": 59478578, "link": "https://stackoverflow.com/questions/59478578/c-operator-overload", "title": "C++ Operator Overload &gt;&gt;", "body": "<p>I hadn't found answer even if exist anywhere.\nI have class and I want overload >> operator</p>\n\n<p>That code compile but it don't work how I want. \nI want put value in all cells inside array, but it only work for 1st cell. Looks like my loop don't work. </p>\n\n<p>Edited: \nFull code below. Btw sorry for language but this is my homework and teacher want that names.</p>\n\n<pre><code>    #include &lt;cstdlib&gt;\n    #include &lt;iostream&gt;\n    #include &lt;string&gt;\n    #include &lt;cmath&gt;\n\n    template &lt;class T&gt;\n    class Wielomian {\n    private:\n        int stopien;\n        T *wspolczynniki;\n    public:\n        friend std::ostream &amp; operator &lt;&lt; (std::ostream &amp;output, Wielomian &amp;w)\n        {\n            output &lt;&lt; \"Wielomian: \";\n            for (int i = w.stopien-1; i &gt;= 0; i--)\n            {\n                output &lt;&lt; w.wspolczynniki[i] &lt;&lt; \"x^\" &lt;&lt; i &lt;&lt; \" \";\n                if (i)\n                    output &lt;&lt; \"+ \";\n            }\n            return output;\n        }\n        friend std::istream &amp; operator &gt;&gt; (std::istream &amp;input, Wielomian &amp;w)\n        {\n            int i = 0;\n            do {\n                input &gt;&gt; w.wspolczynniki[i++];\n            } while (w.stopien &lt; i);\n            return input;\n        }\n        T operator () (T x)\n        {\n            T wynik = 0;\n            for (int i = 0; i &lt; this-&gt;stopien; i++)\n            {\n                wynik += this-&gt;wspolczynniki[i] * pow(x,i);\n            }\n            return wynik;\n        }\n        T&amp; operator[](const int index)\n        {\n            return wspolczynniki[index];\n        }\n        Wielomian operator + (const Wielomian &amp;w)\n        {\n            const Wielomian *wiekszy;\n            const Wielomian *mniejszy;\n            if (w.stopien &gt; this-&gt;stopien)\n            {\n                wiekszy = &amp;w;\n                mniejszy = this;\n            }\n            else\n            {\n                wiekszy = this;\n                mniejszy = &amp;w;\n            }\n\n            for (int i = 0; i &lt; mniejszy-&gt;stopien; i++)\n                wiekszy-&gt;wspolczynniki[i] += mniejszy-&gt;wspolczynniki[i];\n            return *wiekszy;\n        }\n        Wielomian operator - (const Wielomian &amp;w)\n        {\n            const Wielomian *wiekszy;\n            const Wielomian *mniejszy;\n            if (w.stopien &gt; this-&gt;stopien)\n            {\n                wiekszy = &amp;w;\n                mniejszy = this;\n            }\n            else\n            {\n                wiekszy = this;\n                mniejszy = &amp;w;\n            }\n\n            for (int i = 0; i &lt; mniejszy-&gt;stopien; i++)\n                wiekszy-&gt;wspolczynniki[i] -= mniejszy-&gt;wspolczynniki[i];\n            return *wiekszy;\n        }\n        Wielomian operator = (const Wielomian &amp;w)\n        {\n            this-&gt;stopien = w.stopien;\n            this-&gt;wspolczynniki = new float[this-&gt;stopien];\n            memcpy(this-&gt;wspolczynniki, w.wspolczynniki, w.stopien * sizeof(double));\n        }\n        Wielomian(const Wielomian &amp;w)\n        {\n            this-&gt;stopien = w.stopien;\n            this-&gt;wspolczynniki = new float[this-&gt;stopien];\n            memcpy(this-&gt;wspolczynniki, w.wspolczynniki, w.stopien * sizeof(double));\n        }\n        Wielomian(int stopien = 0, T wspolczynik[] = { 3 })\n        {\n            this-&gt;stopien = stopien;\n            wspolczynniki = new T[this-&gt;stopien];\n            for (int i = 0; i &lt; stopien; i++)\n            {\n                this-&gt;wspolczynniki[i] = wspolczynik[i];\n            }\n        }\n        ~Wielomian()\n        {\n            free(this-&gt;wspolczynniki);\n        }\n\n    };\n\n\n\n    int main()\n    {\n        double tab[4] = {3,4,5,6};\n        Wielomian&lt;double&gt; w1(4,tab);\n\n        std::cin &gt;&gt; w1;\n        std::cout &lt;&lt; w1;\n\n\n        std::cin.get();\n        std::cin.get();\n        return 0;\n    }\n</code></pre>\n"}, {"tags": ["c++", "class", "arduino", "microcontroller", "isr"], "comments": [{"owner": {"reputation": 15165, "user_id": 1116364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b67dfca0caba03083330d39a304b1766?s=128&d=identicon&r=PG", "display_name": "Daniel Jour", "link": "https://stackoverflow.com/users/1116364/daniel-jour"}, "edited": false, "score": 3, "creation_date": 1577278621, "post_id": 59478531, "comment_id": 105134156, "body": "hm ... not sure I completely understand your issue. Part of it can be solved with an array of function pointers"}, {"owner": {"reputation": 91, "user_id": 11141936, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZDdcg.jpg?s=128&g=1", "display_name": "LCB", "link": "https://stackoverflow.com/users/11141936/lcb"}, "reply_to_user": {"reputation": 15165, "user_id": 1116364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b67dfca0caba03083330d39a304b1766?s=128&d=identicon&r=PG", "display_name": "Daniel Jour", "link": "https://stackoverflow.com/users/1116364/daniel-jour"}, "edited": false, "score": 0, "creation_date": 1577280825, "post_id": 59478531, "comment_id": 105134724, "body": "That&#39;s exactly what I was looking for @DanielJour.  I can&#39;t mark a comment as the answer - but it is."}], "answers": [{"comments": [{"owner": {"reputation": 91, "user_id": 11141936, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZDdcg.jpg?s=128&g=1", "display_name": "LCB", "link": "https://stackoverflow.com/users/11141936/lcb"}, "edited": false, "score": 1, "creation_date": 1577387430, "post_id": 59485711, "comment_id": 105159225, "body": "Thanks, Daniel.  Perfect."}], "tags": [], "owner": {"reputation": 15165, "user_id": 1116364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b67dfca0caba03083330d39a304b1766?s=128&d=identicon&r=PG", "display_name": "Daniel Jour", "link": "https://stackoverflow.com/users/1116364/daniel-jour"}, "is_accepted": true, "score": 3, "last_activity_date": 1577348404, "creation_date": 1577348404, "answer_id": 59485711, "question_id": 59478531, "link": "https://stackoverflow.com/questions/59478531/how-to-choose-function-based-on-loop-iterator/59485711#59485711", "title": "How to Choose Function Based on Loop Iterator", "body": "<pre class=\"lang-c prettyprint-override\"><code>attachInterrupt(/* ... */, HandleInterruptsStatic + i, /* ... */);\n//                                              ^^^^^\n</code></pre>\n\n<p>In order to select the function you want to call at runtime depending on some integer index <code>i</code> you can use an array of function pointers:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>typedef void (*FunctionPointer_t)(void);\nFunctionPointer_t functions[] = {\n    HandleInterruptsStatic1,\n    HandleInterruptsStatic2,\n    // ...\n  };\n\n// to use:\nfunctions[i]();\n</code></pre>\n"}], "owner": {"reputation": 91, "user_id": 11141936, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZDdcg.jpg?s=128&g=1", "display_name": "LCB", "link": "https://stackoverflow.com/users/11141936/lcb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "accepted_answer_id": 59485711, "answer_count": 1, "score": 1, "last_activity_date": 1577348404, "creation_date": 1577277961, "question_id": 59478531, "link": "https://stackoverflow.com/questions/59478531/how-to-choose-function-based-on-loop-iterator", "title": "How to Choose Function Based on Loop Iterator", "body": "<p>Part of my problem in finding a solution here is likely that I don't know the correct terms for what it is I am asking.  For that, I beg forgiveness in advance.</p>\n\n<p>For a microcontroller, I have a list of pins I wish to initiate at the same time.  Each has it's own ISR, and calls the same member of a class for each instance but with a pin number as an argument.</p>\n\n<p>I am trying to attach each pin in the array to its corresponding ISR but I would like to choose which ISR by the pin's index.  This is Mailer Code\u2122 and likely does not compile but I believe it's enough to get the idea:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#define PIN1 4\n#define PIN2 9\n#define PIN3 10\n#define PIN4 8\n#define PIN5 12\n\nPinAct *pPinact; // Pointer to Counter class\n\nstatic ICACHE_RAM_ATTR void HandleInterruptsStatic1(void) {\n    pPinact-&gt;handleInterrupts(1);\n}\n\nstatic ICACHE_RAM_ATTR void HandleInterruptsStatic2(void) {\n    pPinact-&gt;handleInterrupts(2);\n}\n\nstatic ICACHE_RAM_ATTR void HandleInterruptsStatic3(void) {\n    pPinact-&gt;handleInterrupts(3);\n}\n\nstatic ICACHE_RAM_ATTR void HandleInterruptsStatic4(void) {\n    pPinact-&gt;handleInterrupts(4);\n}\n\nstatic ICACHE_RAM_ATTR void HandleInterruptsStatic5(void) {\n    pPinact-&gt;handleInterrupts(5);\n}\n\nclass PinAct {\n    public:\n        PinAct() {};\n        void handleInterrupts(int);\n}\n\nvoid PinAct::PinAct() {\n    int actPins[] = {PIN1, PIN2, PIN3, PIN4, PIN5};\n    for (int i = 0; i &lt;= sizeof(actPins); i++) {\n        pinMode(actPin[i], INPUT)\n        attachInterrupt(digitalPinToInterrupt(KEG1), HandleInterruptsStatic + i, FALLING);\n    }\n}\n\nvoid PinAct::handleInterrupts(int pin) { // Bubble Interrupt handler\n    // Do something with pin\n}\n</code></pre>\n\n<p>The goal is to actually make the <code>attachInterrupt(digitalPinToInterrupt(KEG1), HandleInterruptsStatic + i, FALLING);</code> work, choosing which ISR by virtue of the index i.</p>\n\n<p>I need to make other decisions about whether or not to assign the ISR, so concatenating the ISR name to be assigned is desirable.</p>\n"}, {"tags": ["c++", "vector", "deep-copy", "shallow-copy", "imgui"], "comments": [{"owner": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 1, "creation_date": 1577277132, "post_id": 59478398, "comment_id": 105133853, "body": "Learn about deep vs shallow copy."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 1, "creation_date": 1577290375, "post_id": 59478398, "comment_id": 105136868, "body": "The bug is in one or more of the involved classes, where you don&#39;t copy as much as you should."}, {"owner": {"reputation": 53, "user_id": 12525178, "user_type": "registered", "profile_image": "https://graph.facebook.com/2581514478642943/picture?type=large", "display_name": "JBG", "link": "https://stackoverflow.com/users/12525178/jbg"}, "reply_to_user": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 0, "creation_date": 1577312253, "post_id": 59478398, "comment_id": 105140833, "body": "@stark thank you for your answer. I have learnt about those concepts (deep vs shallow copy), and although I think I see which kind of problem you have in mind, I am not being able to reproduce it in a simpler example I created. Could you please explain a little bit more what you mean? Do you think I need a non-default copy constructor, although I am not dealing with dynamically alocated elements and pointers? I edited a little bit the output information to include something else, I think it could be helpful. Thank you in advance!"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1577314640, "post_id": 59478398, "comment_id": 105141200, "body": "either <code>BasicModul</code>, <code>ModulDrawingSettings</code>, or <code>ModulRepresentation</code> , or other classes they have as members, contains pointer or reference members or an incorrect user-defined copy/move constructor or assignment operators"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1577314693, "post_id": 59478398, "comment_id": 105141207, "body": "<a href=\"https://en.cppreference.com/w/cpp/language/rule_of_three\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/language/rule_of_three</a>"}, {"owner": {"reputation": 53, "user_id": 12525178, "user_type": "registered", "profile_image": "https://graph.facebook.com/2581514478642943/picture?type=large", "display_name": "JBG", "link": "https://stackoverflow.com/users/12525178/jbg"}, "edited": false, "score": 0, "creation_date": 1577315313, "post_id": 59478398, "comment_id": 105141271, "body": "Thank you for your responses! It just came to my mind where I think the error could be. As you say, there is actually one field, the name, which is char const *, therefore I will need a deep copy there to overcome it. Actually I did modify the classes for removing all the other pointers, since the initial objects go out of scope  after this part of the code. I will fix this and let you know if it worked. Thanks!"}], "answers": [{"tags": [], "owner": {"reputation": 53, "user_id": 12525178, "user_type": "registered", "profile_image": "https://graph.facebook.com/2581514478642943/picture?type=large", "display_name": "JBG", "link": "https://stackoverflow.com/users/12525178/jbg"}, "is_accepted": false, "score": 1, "last_activity_date": 1577321744, "creation_date": 1577321744, "answer_id": 59482922, "question_id": 59478398, "link": "https://stackoverflow.com/questions/59478398/why-do-the-fields-of-the-last-pushed-back-object-into-a-vector-transfer-to-the-o/59482922#59482922", "title": "Why do the fields of the last pushed back object into a vector transfer to the other objects of the vector?", "body": "<p>So I found out finally the error. As @stark and later @M.M suggested,the problem was a field being a pointer, and therefore pointing all the time to the same address which was updated with the last pushed back object in the vector. Since it was a pointer, the shallow copy (which takes place during the push back into the vector) is not enough. I fixed it just by making that field just a \"normal\" type as I intended initially, and not a pointer.</p>\n\n<p>Thank you for your answers!</p>\n"}], "owner": {"reputation": 53, "user_id": 12525178, "user_type": "registered", "profile_image": "https://graph.facebook.com/2581514478642943/picture?type=large", "display_name": "JBG", "link": "https://stackoverflow.com/users/12525178/jbg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "closed_date": 1577321870, "answer_count": 1, "score": 1, "last_activity_date": 1577321744, "creation_date": 1577276849, "last_edit_date": 1577313408, "question_id": 59478398, "link": "https://stackoverflow.com/questions/59478398/why-do-the-fields-of-the-last-pushed-back-object-into-a-vector-transfer-to-the-o", "closed_reason": "Not suitable for this site", "title": "Why do the fields of the last pushed back object into a vector transfer to the other objects of the vector?", "body": "<p>I am a little bit stuck with my code and I am not being able to find out the problem. I hope you can help me.</p>\n\n<p>I have 4 Classes:\n- class BasicModul: it has, among others, one field called modulName.\n- class DrawingSettings: not relevant at this point\n- class ModulRepresentation: constructed with a BasicModul object and a DrawingSettings object.\n- class ModulesContainer: it has a field which is a std::vector  . Its object used in the code is \"container\".</p>\n\n<p>My problem is that apparently when pushing back a new ModulRepresentation into the ModulesContainer (a vector of ModulRepresentation), it seems that the fields of the last ModulRepresentation created and pushed back are passed into the fields of the previously created and pushed back ModulRepresentation in the ModulContainer. The ModulContainer \"container\" is initialized at the beginning of the code. I am using ImGui for creating the GUI.</p>\n\n<p>Where is the mistake? I had previously a simpler code that was doing basically the same but less encapsulated (so, for example, the std::vector was directly defined in the main code and so on) and it worked as expected. The modulCounter variable starts with value 0. I think the names of the functions of the classes should be descriptive enough, but if you need more information please just let me know.</p>\n\n<p>Thanks in advance!</p>\n\n<pre><code>            if (ImGui::Button(\"MODUL\")){                // Buttons return true when clicked\n                modulCounter++;\n\n                int auxiliar=modulCounter*10;\n\n                std::string saux = std::to_string(auxiliar);\n\n                std::cout &lt;&lt; \"Here 1\" &lt;&lt; std::endl;         \n\n                BasicModul modAux(saux);\n                ModulDrawingSettings modDrawSet;\n                ModulRepresentation modRep(modAux, modDrawSet);\n\n                container.push_backModul(modRep);   \n\n                std::cout &lt;&lt; saux &lt;&lt; std::endl;\n                std::cout &lt;&lt; \"Vector Size/Capacity: \" &lt;&lt; container.modulesContainerSize() &lt;&lt;  \"/\" &lt;&lt; container.modulesContainerCapacity() &lt;&lt; std::endl;\n\n\n                std::cout &lt;&lt; \"Here 2\" &lt;&lt; std::endl;\n\n\n                for (int j=0; j&lt;container.modulesContainerSize(); j++){\n\n                    BasicModul modAuxiliar = container.getModulRepresentation(j).getBasicModul();\n\n                    std::cout &lt;&lt; \"\\n\" &lt;&lt; std::endl;\n                    std::cout &lt;&lt; \"Position in the container\" &lt;&lt; j &lt;&lt; std::endl;\n                    std::cout &lt;&lt; container.getPointerToModulRepresentation(j) &lt;&lt; std::endl;\n                    std::cout &lt;&lt; \"name of the modul\" &lt;&lt; container.getModulRepresentation(j).getBasicModul().getModulName() &lt;&lt; std::endl;\n\n                }\n\n                std::cout &lt;&lt; \"Here 3\" &lt;&lt; std::endl;\n\n</code></pre>\n\n<p>And here is the output:</p>\n\n<pre><code>Here 1\nAddress of the original modul object: 0x7ffd6ba4cf30\n10\nVector Size/Capacity: 1/1\nname of the last modul passed: 10\nHere 2\n\n\nPosition in the container0\n0x5595967583c0\nname of the modul10\nHere 3\nHere 1\nAddress of the original modul object: 0x7ffd6ba4cf30\n20\nVector Size/Capacity: 2/2\nname of the last modul passed: 20\nHere 2\n\n\nPosition in the container0\n0x559596b4c600\nname of the modul20\n\n\nPosition in the container1\n0x559596b4c720\nname of the modul20\nHere 3\nHere 1\nAddress of the original modul object: 0x7ffd6ba4cf30\n30\nVector Size/Capacity: 3/4\nname of the last modul passed: 30\nHere 2\n\n\nPosition in the container0\n0x559596bb99b0\nname of the modul30\n\n\nPosition in the container1\n0x559596bb9ad0\nname of the modul30\n\n\nPosition in the container2\n0x559596bb9bf0\nname of the modul30\nHere 3\nHere 1\nAddress of the original modul object: 0x7ffd6ba4cf30\n40\nVector Size/Capacity: 4/4\nname of the last modul passed: 40\nHere 2\n\n\nPosition in the container0\n0x559596bb99b0\nname of the modul40\n\n\nPosition in the container1\n0x559596bb9ad0\nname of the modul40\n\n\nPosition in the container2\n0x559596bb9bf0\nname of the modul40\n\n\nPosition in the container3\n0x559596bb9d10\nname of the modul40\nHere 3\n</code></pre>\n"}, {"tags": ["c++", "arrays"], "comments": [{"owner": {"reputation": 113, "user_id": 12595471, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NZg3I.jpg?s=128&g=1", "display_name": "Umair", "link": "https://stackoverflow.com/users/12595471/umair"}, "reply_to_user": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 1, "creation_date": 1577276580, "post_id": 59478244, "comment_id": 105133730, "body": "@stark i used that on my own and as I said I&#39;m a &quot;beginner&quot;."}, {"owner": {"reputation": 226, "user_id": 3079309, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/XTHYL.jpg?s=128&g=1", "display_name": "happyvirus", "link": "https://stackoverflow.com/users/3079309/happyvirus"}, "edited": false, "score": 0, "creation_date": 1577278525, "post_id": 59478244, "comment_id": 105134134, "body": "Please see this example <a href=\"http://www.cplusplus.com/forum/beginner/146160/\" rel=\"nofollow noreferrer\">cplusplus.com/forum/beginner/146160</a>"}, {"owner": {"reputation": 4665, "user_id": 1447389, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iQhtr.jpg?s=128&g=1", "display_name": "Soleil", "link": "https://stackoverflow.com/users/1447389/soleil"}, "reply_to_user": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 0, "creation_date": 1577279723, "post_id": 59478244, "comment_id": 105134433, "body": "@stark Judging and coercion are not as helping as saying why it&#39;s &quot;bad&quot;. Goto exists as fundamental operator for processors (you got them is all programs with if//else/switch control, in their compiled assembly form), it also exists in many languages but it makes the readability and debuggability harder, therefore it&#39;s not a recommended practice."}, {"owner": {"reputation": 113, "user_id": 12595471, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NZg3I.jpg?s=128&g=1", "display_name": "Umair", "link": "https://stackoverflow.com/users/12595471/umair"}, "reply_to_user": {"reputation": 4665, "user_id": 1447389, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iQhtr.jpg?s=128&g=1", "display_name": "Soleil", "link": "https://stackoverflow.com/users/1447389/soleil"}, "edited": false, "score": 0, "creation_date": 1577282458, "post_id": 59478244, "comment_id": 105135105, "body": "thank you @Soleil so what can i do instead of using goto? for example when a user enters 5 but my menu only supports options till the inputs 1-4?"}, {"owner": {"reputation": 4665, "user_id": 1447389, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iQhtr.jpg?s=128&g=1", "display_name": "Soleil", "link": "https://stackoverflow.com/users/1447389/soleil"}, "edited": false, "score": 0, "creation_date": 1577284035, "post_id": 59478244, "comment_id": 105135504, "body": "@Umair You can use switch. The ideal situation would be to separate 1) the keyboard entry processing 2) the data processing 3) the display. That&#39;s not part of your question but thinking and coding this way early (learning journey) is valuable. In that case, it&#39;s easy to test each aspect and to change it. It increases also a lot the readability (each class has one responsability). In c++ you can use interfaces (virtual methods), and implementations that override the interface. With your problem example, it should be straight. You might want check out SOLID, dependency injection and unit tests."}, {"owner": {"reputation": 4665, "user_id": 1447389, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iQhtr.jpg?s=128&g=1", "display_name": "Soleil", "link": "https://stackoverflow.com/users/1447389/soleil"}, "edited": false, "score": 0, "creation_date": 1577286397, "post_id": 59478244, "comment_id": 105136026, "body": "@Umair If you have conditions involving an range (eg., choice&gt;=5), <code>switch</code> won&#39;t be useful, but rather <code>if</code>. But you can combine both (<code>if</code> to sort correct/incorrect choice, and switch for choice \\in [1-4]), or use just switch with a <code>default</code> for wrong conditions (choice \\not \\in [1-4])."}, {"owner": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 0, "creation_date": 1577321444, "post_id": 59478244, "comment_id": 105141947, "body": "<a href=\"http://www.u.arizona.edu/~rubinson/copyright_violations/Go_To_Considered_Harmful.html\" rel=\"nofollow noreferrer\">u.arizona.edu/~rubinson/copyright_violations/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 113, "user_id": 12595471, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NZg3I.jpg?s=128&g=1", "display_name": "Umair", "link": "https://stackoverflow.com/users/12595471/umair"}, "edited": false, "score": 0, "creation_date": 1577279158, "post_id": 59478629, "comment_id": 105134272, "body": "thanks i modified a bit of your code to get the exact coordinate of the reserved seats but it&#39;s as 1 1 and now im trying to display A 1 instead of 1 1. can you help?"}, {"owner": {"reputation": 9434, "user_id": 528720, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZpqMk.png?s=128&g=1", "display_name": "&#214;&#246; Tiib", "link": "https://stackoverflow.com/users/528720/%c3%96%c3%b6-tiib"}, "reply_to_user": {"reputation": 113, "user_id": 12595471, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NZg3I.jpg?s=128&g=1", "display_name": "Umair", "link": "https://stackoverflow.com/users/12595471/umair"}, "edited": false, "score": 0, "creation_date": 1577279477, "post_id": 59478629, "comment_id": 105134368, "body": "Added explanation to end of my answer."}], "tags": [], "owner": {"reputation": 9434, "user_id": 528720, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZpqMk.png?s=128&g=1", "display_name": "&#214;&#246; Tiib", "link": "https://stackoverflow.com/users/528720/%c3%96%c3%b6-tiib"}, "is_accepted": true, "score": 0, "last_activity_date": 1577300623, "last_edit_date": 1577300623, "creation_date": 1577278791, "answer_id": 59478629, "question_id": 59478244, "link": "https://stackoverflow.com/questions/59478244/how-to-do-theatre-seat-reservation-in-c/59478629#59478629", "title": "How to do theatre seat reservation in C++?", "body": "<p>If you want to display letters instead of numbers then you can use array of those letters:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nint main()\n{\n    static const char letters[] = \"ABCDEFGHIJ\";\n    for (int i = 0; i &lt; 10; i++) {\n        std::cout &lt;&lt; \"#\" &lt;&lt; i &lt;&lt; \" is \" &lt;&lt; letters[i] &lt;&lt; '\\n';\n    }\n}\n</code></pre>\n\n<p>That will display:</p>\n\n<pre><code>#0 is A\n#1 is B\n#2 is C\n#3 is D\n#4 is E\n#5 is F\n#6 is G\n#7 is H\n#8 is I\n#9 is J\n</code></pre>\n\n<p>Note that array indexing in C++ starts from 0.\nSo if you want to display your row number 1 as A and 2 as B etc. then you need to subtract 1 from your row number like <code>letters[row_number - 1]</code>. But better learn to think like programmer that first thing is at index 0, second is at index 1 and so on.</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nvoid display(int row, int seat)\n{\n    static const char letters[] = \"ABCDEFGHIJ\";\n    std::cout &lt;&lt; letters[row - 1] &lt;&lt; seat;\n}\n\nint main()\n{\n    for (int i = 1; i &lt; 11; i++) {\n        std::cout &lt;&lt; \"#\" &lt;&lt; i &lt;&lt; \" is \";\n        display(i, i);\n        std::cout &lt;&lt; '\\n';\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 113, "user_id": 12595471, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NZg3I.jpg?s=128&g=1", "display_name": "Umair", "link": "https://stackoverflow.com/users/12595471/umair"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1275, "favorite_count": 0, "accepted_answer_id": 59478629, "answer_count": 1, "score": 1, "last_activity_date": 1577460711, "creation_date": 1577275584, "last_edit_date": 1577460711, "question_id": 59478244, "link": "https://stackoverflow.com/questions/59478244/how-to-do-theatre-seat-reservation-in-c", "title": "How to do theatre seat reservation in C++?", "body": "<p>I'm a beginner in C++ and still learning. My teacher has assigned me a project and I'm trying to create a cinema's software. I'm done with the basic options and the menus. Now I'm stuck at the seat reservation. I managed to create a simple reservation system using array's which X's the seat that the user wants to book. It also displays an error if it is being booked again or an invalid seat is selected that does not exist. Now I don't know how to display the specific seat number like \"A1\" \"C3\"?</p>\n\n<p>I'm just a beginner and I'm going to use a specific separate function in my project but the code I'm posting here is itself the main function.</p>\n\n<p>Thank You! PS: I know my code isn't as efficient as it needs to be but I made this only while practicing for the real program...</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;Windows.h&gt;\nusing namespace std;\nint main()\n{\n    choose:\n    string seat[]={\"x1\",\"y1\",\"x2\",\"y2\",\"x3\",\"y3\",\"x4\",\"y4\",\"x5\",\"y5\",\"x6\",\"y6\",\"x7\",\"y7\",\"x8\",\"y8\",\"x9\",\"y9\",\"x10\",\"y10\",\"x11\",\"y11\",\"x12\",\"y12\",\"x13\",\"y13\",\"x14\",\"y14\",\"x15\",\"y15\",\"x16\",\"y16\",\"x17\",\"y17\",\"x18\",\"y18\",\"x19\",\"y19\",\"x20\",\"y20\",\"x21\",\"y21\",\"x22\",\"y22\",\"x23\",\"y23\",\"x24\",\"y24\",\"x25\",\"y25\",\"x26\",\"y26\",\"x27\",\"y27\",\"x28\",\"y28\",\"x29\",\"y29\",\"x30\",\"y30\",\"x31\",\"y31\",\"x32\",\"y32\",\"x33\",\"y33\",\"x34\",\"y34\",\"x35\",\"y35\",\"x36\",\"y36\"};\n    int row,col;\n    int input;\n    char rows='1';\n    char c;\n    char book1;\n    string arr[4][9]={{\"[ ]\",\"[ ]\",\"[ ]\",\"[ ]\",\"[ ]\",\"[ ]\",\"[ ]\",\"[ ]\",\"[ ]\"},{\"[ ]\",\"[ ]\",\"[ ]\",\"[ ]\",\"[ ]\",\"[ ]\",\"[ ]\",\"[ ]\",\"[ ]\"},\n    {\"[ ]\",\"[ ]\",\"[ ]\",\"[ ]\",\"[ ]\",\"[ ]\",\"[ ]\",\"[ ]\",\"[ ]\"},{\"[ ]\",\"[ ]\",\"[ ]\",\"[ ]\",\"[ ]\",\"[ ]\",\"[ ]\",\"[ ]\",\"[ ]\"}};\n    cout&lt;&lt;\"\\t\\t            1   2   3   4   5   6   7   8   9\"&lt;&lt;endl;\n    for(int i=0; i&lt;4; ++i)\n    {\n        cout&lt;&lt;\"\\t\\t   Row \"&lt;&lt;rows&lt;&lt;\":  \";\n        ++rows;\n        for(int j=0; j&lt;9; ++j)\n            cout&lt;&lt;arr[i][j]&lt;&lt;\" \";\n        cout&lt;&lt;endl;\n    }\n\n    again:\n    rows='1';\n    for(input=1; input&lt;37; input=input+2)\n    {\n        rows='1';\n        cout&lt;&lt;endl&lt;&lt;\"\\t\\t               Enter Row &amp; Column: \";\n        cin&gt;&gt;row&gt;&gt;col;\n        if (row&lt;=0 || col&lt;=0)\n        {\n            cout&lt;&lt;endl&lt;&lt;\"\\t\\t              Please Pick A Valid Seat\"&lt;&lt;endl;\n            Sleep(500);\n            system(\"cls\");\n            goto choose;\n        }\n        --row;\n        --col;\n        if(arr[row][col]==\"[X]\")\n        {\n            cout&lt;&lt;endl&lt;&lt;\"\\t\\t             Seat Not Available\"&lt;&lt;endl;\n            goto again;\n        }\n        arr[input][input+1]=arr[row][col];\n        arr[row][col]=\"[X]\";\n        system(\"cls\");\n        cout&lt;&lt;endl;\n        cout&lt;&lt;\"\\t\\t            1   2   3   4   5   6   7   8   9\"&lt;&lt;endl;\n        for(int i=0; i&lt;4; ++i)\n        {\n            cout&lt;&lt;\"\\t\\t   Row \"&lt;&lt;rows&lt;&lt;\":  \";\n            ++rows;\n            for(int j=0; j&lt;9; ++j)\n               cout&lt;&lt;arr[i][j]&lt;&lt;\" \";\n            cout&lt;&lt;endl;\n        }\n        cout&lt;&lt;endl&lt;&lt;\"\\t\\t                   Seat Booked!\"&lt;&lt;endl;\n        cout&lt;&lt;endl&lt;&lt;\"\\t\\t        Do You Want To Book Another Seat?\"&lt;&lt;endl;\n        cout&lt;&lt;\"\\t\\t          Press [Y] For Yes &amp; [N] For No.\"&lt;&lt;endl;\n        cout&lt;&lt;\"\\t\\t                        \";\n\n        cin&gt;&gt;c;\n        if(c=='y' || c=='Y')\n            continue;\n        else if(c=='n' || c=='N')\n        // Here I want the code to print seat number as A1 or C3 etc...\n        break;\n    }\n}\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 4915, "user_id": 10686048, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bffd06d00a80b9b69e83f561ee5a392?s=128&d=identicon&r=PG&f=1", "display_name": "ChrisMM", "link": "https://stackoverflow.com/users/10686048/chrismm"}, "edited": false, "score": 1, "creation_date": 1577274584, "post_id": 59478110, "comment_id": 105133273, "body": "The first one doesn&#39;t prune right if left is NULL"}, {"owner": {"reputation": 8251, "user_id": 2912665, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/XrRhd.jpg?s=128&g=1", "display_name": "CinCout", "link": "https://stackoverflow.com/users/2912665/cincout"}, "edited": false, "score": 0, "creation_date": 1577274795, "post_id": 59478110, "comment_id": 105133335, "body": "Read about short-circuiting."}], "answers": [{"tags": [], "owner": {"reputation": 31823, "user_id": 1960455, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/d22bdc5c04b48a9054586eb64174ea99?s=128&d=identicon&r=PG", "display_name": "t.niese", "link": "https://stackoverflow.com/users/1960455/t-niese"}, "is_accepted": true, "score": 0, "last_activity_date": 1577275980, "creation_date": 1577275980, "answer_id": 59478289, "question_id": 59478110, "link": "https://stackoverflow.com/questions/59478110/what-are-the-problems-in-the-following-code/59478289#59478289", "title": "What are the problems in the following code\uff1f", "body": "<p>In the second code, it is guaranteed that both <code>pruneTree(root-&gt;left)</code> and <code>pruneTree(root-&gt;right)</code> are called, because those are two separate expressions.</p>\n\n<pre><code>root-&gt;left = pruneTree(root-&gt;left);\nroot-&gt;right = pruneTree(root-&gt;right);\n</code></pre>\n\n<p>In the first code you have:</p>\n\n<pre><code>(root-&gt;left = pruneTree(root-&gt;left)) == NULL &amp;&amp;\n           (root-&gt;right = pruneTree(root-&gt;right)) == NULL\n</code></pre>\n\n<p>The difference here is that <code>pruneTree(root-&gt;left)</code> and <code>pruneTree(root-&gt;right)</code> are in one expression, so they might (and this case the do) depend on each other.</p>\n\n<p>If <code>(root-&gt;left = pruneTree(root-&gt;left)) == NULL</code> evaluates to <code>false</code> then the parte after the <code>&amp;&amp;</code> does not need to be evaluated, because the complete expression can't become true anymore.</p>\n"}], "owner": {"reputation": 3, "user_id": 12468493, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c6879a81f80574ea3ac47869f4d85c1e?s=128&d=identicon&r=PG&f=1", "display_name": "Heng", "link": "https://stackoverflow.com/users/12468493/heng"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "accepted_answer_id": 59478289, "answer_count": 1, "score": -3, "last_activity_date": 1577275980, "creation_date": 1577274399, "question_id": 59478110, "link": "https://stackoverflow.com/questions/59478110/what-are-the-problems-in-the-following-code", "title": "What are the problems in the following code\uff1f", "body": "<p>I have tow code about the the question <a href=\"https://leetcode.com/problems/binary-tree-pruning/\" rel=\"nofollow noreferrer\">Binary Tree Pruning</a>.<br>\nthis is a wrong code</p>\n\n<pre><code>class Solution {\npublic:\n    TreeNode* pruneTree(TreeNode* root) {\n        if(root == NULL)\n            return NULL;\n        if((root-&gt;left = pruneTree(root-&gt;left)) == NULL &amp;&amp;\n           (root-&gt;right = pruneTree(root-&gt;right)) == NULL){\n            if(root-&gt;val == 0){\n                delete root;\n                return NULL;\n            }       \n        }\n        return root;\n    }\n};\n</code></pre>\n\n<p>this is my passed code</p>\n\n<pre><code>class Solution {\npublic:\n    TreeNode* pruneTree(TreeNode* root) {\n        if(root == NULL)\n            return NULL;\n        root-&gt;left = pruneTree(root-&gt;left);\n        root-&gt;right = pruneTree(root-&gt;right);\n        if(root-&gt;left == NULL &amp;&amp; root-&gt;right == NULL){\n            if(root-&gt;val == 0){\n                delete root;\n                return NULL;\n            }       \n        }\n        return root;\n    }\n};\n</code></pre>\n\n<p>I want to know what cause the difference between the two programs</p>\n"}, {"tags": ["c++", "linux", "memory", "file-io", "mmap"], "comments": [{"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "edited": false, "score": 0, "creation_date": 1577274757, "post_id": 59477834, "comment_id": 105133323, "body": "Why don&#39;t you use <code>read</code> or its variants?"}, {"owner": {"reputation": 693, "user_id": 12160191, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d32da1b1b1c0300e49b411b45b1e950d?s=128&d=identicon&r=PG&f=1", "display_name": "Mutable Side Effect", "link": "https://stackoverflow.com/users/12160191/mutable-side-effect"}, "reply_to_user": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "edited": false, "score": 1, "creation_date": 1577275479, "post_id": 59477834, "comment_id": 105133485, "body": "@curiousguy I suppose he wants to read into a shared memory to optimize the reads since multiple processes are involved. I am not entirely sure but simply reading data from the file in each process may have a memory overhead proportional to the number of processes reading it, not to mention unnecessary kernel calls."}, {"owner": {"reputation": 2178, "user_id": 2777063, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a56b3a768bd524834b4f75a413532b60?s=128&d=identicon&r=PG&f=1", "display_name": "themagicalyang", "link": "https://stackoverflow.com/users/2777063/themagicalyang"}, "reply_to_user": {"reputation": 693, "user_id": 12160191, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d32da1b1b1c0300e49b411b45b1e950d?s=128&d=identicon&r=PG&f=1", "display_name": "Mutable Side Effect", "link": "https://stackoverflow.com/users/12160191/mutable-side-effect"}, "edited": false, "score": 0, "creation_date": 1577275624, "post_id": 59477834, "comment_id": 105133515, "body": "As @MutableSideEffect explains. The number of processes is high, hundreds of them, reading one same file, consider a packet dump (pcap). Since the time taken by the process to finish is IO bound, I was thinking mmap can help."}, {"owner": {"reputation": 26680, "user_id": 1806780, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/NCB41.jpg?s=128&g=1", "display_name": "Sami Kuhmonen", "link": "https://stackoverflow.com/users/1806780/sami-kuhmonen"}, "edited": false, "score": 0, "creation_date": 1577276487, "post_id": 59477834, "comment_id": 105133710, "body": "Considering there\u2019s a specific option to make it shared or private it is logical that it is shared between processes if so desired. If it\u2019s private it is copy-on-write based on documentation, so only reading should still share the memory"}, {"owner": {"reputation": 2178, "user_id": 2777063, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a56b3a768bd524834b4f75a413532b60?s=128&d=identicon&r=PG&f=1", "display_name": "themagicalyang", "link": "https://stackoverflow.com/users/2777063/themagicalyang"}, "edited": false, "score": 0, "creation_date": 1577276576, "post_id": 59477834, "comment_id": 105133727, "body": "The manpage doesn&#39;t say anything about sharing read when MAP_SHARED enabled."}, {"owner": {"reputation": 693, "user_id": 12160191, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d32da1b1b1c0300e49b411b45b1e950d?s=128&d=identicon&r=PG&f=1", "display_name": "Mutable Side Effect", "link": "https://stackoverflow.com/users/12160191/mutable-side-effect"}, "edited": false, "score": 0, "creation_date": 1577281047, "post_id": 59477834, "comment_id": 105134792, "body": "@themagicalyang strange that you are mapping the complete &quot;large file&quot; into memory. Is there some reason for doing that? Even if the file is not read during the mmap call, you are reserving a large part of your address space."}, {"owner": {"reputation": 2178, "user_id": 2777063, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a56b3a768bd524834b4f75a413532b60?s=128&d=identicon&r=PG&f=1", "display_name": "themagicalyang", "link": "https://stackoverflow.com/users/2777063/themagicalyang"}, "reply_to_user": {"reputation": 693, "user_id": 12160191, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d32da1b1b1c0300e49b411b45b1e950d?s=128&d=identicon&r=PG&f=1", "display_name": "Mutable Side Effect", "link": "https://stackoverflow.com/users/12160191/mutable-side-effect"}, "edited": false, "score": 0, "creation_date": 1577281981, "post_id": 59477834, "comment_id": 105134992, "body": "@MutableSideEffect I honestly just picked it up because of an example already had that. I am not sure what are the side effects of that."}, {"owner": {"reputation": 23130, "user_id": 8586227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BRnwg.png?s=128&g=1", "display_name": "Davis Herring", "link": "https://stackoverflow.com/users/8586227/davis-herring"}, "edited": false, "score": 0, "creation_date": 1577292506, "post_id": 59477834, "comment_id": 105137304, "body": "@themagicalyang: The interesting question here is whether <code>MAP_PRIVATE</code> does reflect changes to the file in practice, since then it would be realized as the kernel\u2019s buffers for the file in question."}], "owner": {"reputation": 2178, "user_id": 2777063, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a56b3a768bd524834b4f75a413532b60?s=128&d=identicon&r=PG&f=1", "display_name": "themagicalyang", "link": "https://stackoverflow.com/users/2777063/themagicalyang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 159, "favorite_count": 2, "answer_count": 0, "score": 3, "last_activity_date": 1577282884, "creation_date": 1577272434, "last_edit_date": 1577282884, "question_id": 59477834, "link": "https://stackoverflow.com/questions/59477834/what-happens-when-you-mmap-the-same-large-file-by-multiple-processes", "title": "What happens when you mmap the same large file by multiple processes?", "body": "<p>Say the mmap call is something like this:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>auto fd = ::open(\"somelargefile\", O_RDONLY);\nstruct stat sb;\nfstat(fd, &amp;sb);\nconst auto memblock = ::mmap(NULL, sb.st_size, PROT_READ, MAP_PRIVATE, fd, 0);\n</code></pre>\n\n<p>If I spawn multiple processes for with this same code snippet... is there any overhead memory wise? does a new mapping get created everytime and each process has separate read mapping? </p>\n\n<p>If the problem is to read huge files, and different processes reading same file at the same time, can it optimized with mmap?</p>\n\n<p>Edit:\nWhen I do run multiple processes with this, then all of them show up taking similar amount of RES and SHR memory in top. The SHR is replica of the RES.</p>\n"}, {"tags": ["c++", "cmake", "sdl", "sdl-2", "clion"], "comments": [{"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 2, "creation_date": 1577274244, "post_id": 59477680, "comment_id": 105133189, "body": "The error <code>0xC0000135</code> means that some <code>.dll</code> used by your application cannot be found. Check that directories for all libraries used by your application are listed in <code>PATH</code> environment variable."}, {"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1577274497, "post_id": 59477680, "comment_id": 105133252, "body": "BTW, in CMake function&#39;s arguments are delimited by a <b>space</b>, not by the comma (<code>,</code>). Your last <code>message</code> should be like this: <code>message(VERBOSE  &quot;${SDL2_LIBRARY}&quot;)</code>. (Double quotes make output of elements in the <code>SDL2_LIBRARY</code> variable to be delimited by semicolon <code>;</code>.) Also, <code>-lmingw32</code> has no sense in <code>CMAKE_CXX_FLAGS</code> variable: <code>-l</code> is a <b>linker</b> flag, not a <i>compiler</i> one."}, {"owner": {"reputation": 71, "user_id": 2692207, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/8c88f9b887dfc731c496ad93dea8146e?s=128&d=identicon&r=PG&f=1", "display_name": "Ekz", "link": "https://stackoverflow.com/users/2692207/ekz"}, "reply_to_user": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1577276014, "post_id": 59477680, "comment_id": 105133622, "body": "Of course I forgot to add sdl.dll... Also fixed those cmake calls you mentioned, thank you!"}], "answers": [{"comments": [{"owner": {"reputation": 71, "user_id": 2692207, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/8c88f9b887dfc731c496ad93dea8146e?s=128&d=identicon&r=PG&f=1", "display_name": "Ekz", "link": "https://stackoverflow.com/users/2692207/ekz"}, "edited": false, "score": 0, "creation_date": 1577273400, "post_id": 59477826, "comment_id": 105132969, "body": "Thanks, I tried it with your CMakeLists (changing directories to where SDL are located on my PC), but got the same error."}], "tags": [], "owner": {"reputation": 21, "user_id": 12415670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/740d0319b81ddc2617099a41ff91898a?s=128&d=identicon&r=PG&f=1", "display_name": "Samuel", "link": "https://stackoverflow.com/users/12415670/samuel"}, "is_accepted": false, "score": 0, "last_activity_date": 1577272415, "creation_date": 1577272415, "answer_id": 59477826, "question_id": 59477680, "link": "https://stackoverflow.com/questions/59477680/clion-mingw-and-sdl2-process-finished-with-exit-code-1073741515-0xc0000135/59477826#59477826", "title": "CLion, MinGW and SDL2: Process finished with exit code -1073741515 (0xC0000135)", "body": "<p>My CMakeLists.txt seems different from yours.\nHere are my configurations, Hope can help you.</p>\n\n<pre><code>cmake_minimum_required(VERSION 3.15)\nproject(cppSDL)\n\nset(CMAKE_CXX_STANDARD 17)\n\nset(CMAKE_CXX_FLIGS \"${CMAKE_CXX_FLAGS} -std=c++17 -lmingw32\")\nset(CMAKE_EXE_LINKER_FLAGS \"-static-libgcc -static-libstdc++\")\n\ninclude_directories(${PROJECT_SOURCE_DIR}/include)\nlink_directories(${PROJECT_SOURCE_DIR}/lib/x86)\n\nset(SOURCE_FILES SDLtutorial.cpp)\nadd_executable(SDLtutorial ${SOURCE_FILES})\n\ntarget_link_libraries(SDLtutorial SDL2main SDL2 SDL2_ttf SDL2_image)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 16, "user_id": 8116904, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tdirD.jpg?s=128&g=1", "display_name": "NonoDev96", "link": "https://stackoverflow.com/users/8116904/nonodev96"}, "is_accepted": true, "score": 0, "last_activity_date": 1607799115, "creation_date": 1607799115, "answer_id": 65268629, "question_id": 59477680, "link": "https://stackoverflow.com/questions/59477680/clion-mingw-and-sdl2-process-finished-with-exit-code-1073741515-0xc0000135/65268629#65268629", "title": "CLion, MinGW and SDL2: Process finished with exit code -1073741515 (0xC0000135)", "body": "<p>if you are using visual studio toolchains in CLion:</p>\n<p>You need to paste in folder <code>cmake-build-debug</code> or <code>cmake-build-release</code> the files <code>.dll</code>,  but no only <code>SDL2_image.dll</code>, all files from folder <code>lib/x86</code></p>\n<p><a href=\"https://www.libsdl.org/projects/SDL_image/release/SDL2_image-devel-2.0.5-VC.zip\" rel=\"nofollow noreferrer\">SDL2_image-devel-2.0.5-VC.zip</a></p>\n"}], "owner": {"reputation": 71, "user_id": 2692207, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/8c88f9b887dfc731c496ad93dea8146e?s=128&d=identicon&r=PG&f=1", "display_name": "Ekz", "link": "https://stackoverflow.com/users/2692207/ekz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 368, "favorite_count": 0, "accepted_answer_id": 65268629, "answer_count": 2, "score": 1, "last_activity_date": 1607799115, "creation_date": 1577271477, "question_id": 59477680, "link": "https://stackoverflow.com/questions/59477680/clion-mingw-and-sdl2-process-finished-with-exit-code-1073741515-0xc0000135", "title": "CLion, MinGW and SDL2: Process finished with exit code -1073741515 (0xC0000135)", "body": "<p>I am trying to add SDL2 to my CLion project. I found this <a href=\"https://github.com/muvox/roguetutorial\" rel=\"nofollow noreferrer\">guide</a> and tried to follow it while including only SDL2. Everything compiles, but when I start my app I get \"Process finished with exit code -1073741515 (0xC0000135)\".</p>\n\n<p>In my CMakeLists.txt file:</p>\n\n<pre><code>cmake_minimum_required(VERSION 3.15)\nproject(Test)\n\nset(CMAKE_CXX_STANDARD 14)\n\nset(CMAKE_CXX_FLAGS \"-lmingw32 -static-libgcc -static-libstdc++\")\nset(SDL2_PATH \"C:/CPP/libs/SDL2-2.0.10/x86_64-w64-mingw32\")\nset(CMAKE_MODULE_PATH ${CMAKE_MODULE_PATH} \"C:/CPP/libs/CMakeModules\")\n\nfind_package(SDL2 REQUIRED)\ninclude_directories(${SDL2_INCLUDE_DIR})\n\nif (${SDL2_FOUND})\n    message(VERBOSE, \"sdl found!\")\nelse ()\n    message(FATAL_ERROR, \"sdl not found\")\nendif ()\n\nmessage(VERBOSE, ${SDL2_INCLUDE_DIR})\nmessage(VERBOSE, ${SDL2_LIBRARY})\n\nadd_executable(Test src/main.cpp)\ntarget_link_libraries(Test ${SDL2_LIBRARY})\n</code></pre>\n\n<p>main.cpp:</p>\n\n<pre><code>#include &lt;SDL.h&gt;\n#include &lt;cstdio&gt;\n\nint main(int argc, char *args[]) {\n\n    if (SDL_Init(SDL_INIT_VIDEO) &lt; 0) {\n        printf(\"SDL could not initialize! SDL_Error: %s\\n\", SDL_GetError());\n    }\n    SDL_Quit();\n    return 0;\n}\n</code></pre>\n\n<p>I am using CLion 2019.3.2 with bundled CMake, latest MinGW build (x86_64-8.1.0-win32-seh-rt_v6-rev0) and latest SDL2 (2.0.10).\nCMake output also looks ok:</p>\n\n<pre><code>VERBOSE,sdl found!\nVERBOSE,C:/CPP/libs/SDL2-2.0.10/x86_64-w64-mingw32/include/SDL2\nVERBOSE,mingw32-mwindowsC:/CPP/libs/SDL2-2.0.10/x86_64-w64-mingw32/lib/libSDL2main.aC:/CPP/libs/SDL2-2.0.10/x86_64-w64-mingw32/lib/libSDL2.dll.a-lpthread\n</code></pre>\n"}, {"tags": ["c++", "visual-studio-code"], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 12440568, "user_type": "registered", "profile_image": "https://graph.facebook.com/214333506226663/picture?type=large", "display_name": "Waseeq Ahmed", "link": "https://stackoverflow.com/users/12440568/waseeq-ahmed"}, "edited": false, "score": 0, "creation_date": 1577271773, "post_id": 59477643, "comment_id": 105132599, "body": "it worked but it was only for a second then it closed itself"}, {"owner": {"reputation": 1060, "user_id": 2300981, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mrpm8.gif?s=128&g=1", "display_name": "Gotiasits", "link": "https://stackoverflow.com/users/2300981/gotiasits"}, "reply_to_user": {"reputation": 13, "user_id": 12440568, "user_type": "registered", "profile_image": "https://graph.facebook.com/214333506226663/picture?type=large", "display_name": "Waseeq Ahmed", "link": "https://stackoverflow.com/users/12440568/waseeq-ahmed"}, "edited": false, "score": 0, "creation_date": 1577271882, "post_id": 59477643, "comment_id": 105132616, "body": "Try setting <code>externalConsole</code> to <code>false</code>. It is possible that it just ran through execution and you didn&#39;t notice if program has nothing to wait for..."}, {"owner": {"reputation": 13, "user_id": 12440568, "user_type": "registered", "profile_image": "https://graph.facebook.com/214333506226663/picture?type=large", "display_name": "Waseeq Ahmed", "link": "https://stackoverflow.com/users/12440568/waseeq-ahmed"}, "edited": false, "score": 0, "creation_date": 1577272508, "post_id": 59477643, "comment_id": 105132756, "body": "it woked Thanks alot!!"}], "tags": [], "owner": {"reputation": 1060, "user_id": 2300981, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mrpm8.gif?s=128&g=1", "display_name": "Gotiasits", "link": "https://stackoverflow.com/users/2300981/gotiasits"}, "is_accepted": true, "score": 3, "last_activity_date": 1577271561, "last_edit_date": 1577271561, "creation_date": 1577271105, "answer_id": 59477643, "question_id": 59477515, "link": "https://stackoverflow.com/questions/59477515/how-to-spawn-a-debugger-in-visual-code-for-c-development/59477643#59477643", "title": "How to spawn a debugger in visual code for c++ development?", "body": "<p>If you are using GCC compiler (and I recommend you do, otherwise stick to VS) you can reference this guide which is quite good:\n<a href=\"https://code.visualstudio.com/docs/cpp/config-mingw\" rel=\"nofollow noreferrer\">https://code.visualstudio.com/docs/cpp/config-mingw</a></p>\n\n<p>Creating \u0430nd editing launch.json fils is quite easy. However, it might seem overwhelming at the beginning. Just use the following code and modify the name of your executable and location of your debugger (which is the location where you installed MinGW)</p>\n\n<pre><code>{\n      \"version\": \"0.2.0\",\n      \"configurations\": [\n        {\n          \"name\": \"(gdb) Launch\",\n          \"type\": \"cppdbg\",\n          \"request\": \"launch\",\n          \"program\": \"${workspaceFolder}/helloworld.exe\",\n          \"args\": [],\n          \"stopAtEntry\": true,\n          \"cwd\": \"${workspaceFolder}\",\n          \"environment\": [],\n          \"externalConsole\": true,\n          \"MIMode\": \"gdb\",\n          \"miDebuggerPath\": \"C:\\\\mingw-w64\\\\x86_64-8.1.0-win32-seh-rt_v6-rev0\\\\mingw64\\\\bin\\\\gdb.exe\",\n          \"setupCommands\": [\n            {\n              \"description\": \"Enable pretty-printing for gdb\",\n              \"text\": \"-enable-pretty-printing\",\n              \"ignoreFailures\": true\n            }\n          ]\n        }\n      ]\n\n}\n</code></pre>\n\n<p>About other options, you can refer to the guide or other resources, but this code can be used as-is, except the abovementioned executable name <code>program</code> and debugger path <code>miDebuggerPath</code>.</p>\n\n<p>You only need to reference .cpp file containing <code>main()</code>. Other files are assumed by the compiler if you used <code>#include</code> in your source file containing <code>main()</code> </p>\n"}], "owner": {"reputation": 13, "user_id": 12440568, "user_type": "registered", "profile_image": "https://graph.facebook.com/214333506226663/picture?type=large", "display_name": "Waseeq Ahmed", "link": "https://stackoverflow.com/users/12440568/waseeq-ahmed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 1, "accepted_answer_id": 59477643, "answer_count": 1, "score": 1, "last_activity_date": 1577272735, "creation_date": 1577270112, "last_edit_date": 1577272735, "question_id": 59477515, "link": "https://stackoverflow.com/questions/59477515/how-to-spawn-a-debugger-in-visual-code-for-c-development", "title": "How to spawn a debugger in visual code for c++ development?", "body": "<p>First i'll tell you that -I am new to coding</p>\n\n<p>I am using vs code for learning c++ and it does not spawn a debugger like dev c++ or codeblocks. I saw some videos in which we have to edit the json files which is pretty complicated for beginners.Can anyone guide me how to to do this simply? And also that whenever I create a new cpp file do I have to edit those files again?</p>\n"}, {"tags": ["c++", "templates", "clang", "libtooling", "local-class"], "answers": [{"tags": [], "owner": {"reputation": 1259, "user_id": 11582326, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TmrDj.jpg?s=128&g=1", "display_name": "Valeriy Savchenko", "link": "https://stackoverflow.com/users/11582326/valeriy-savchenko"}, "is_accepted": true, "score": 1, "last_activity_date": 1580286855, "creation_date": 1580286855, "answer_id": 59963200, "question_id": 59477164, "link": "https://stackoverflow.com/questions/59477164/use-clang-libtooling-to-scan-c-source-that-has-call-to-local-class-in-a-templa/59963200#59963200", "title": "Use Clang LibTooling to scan C++ source that has call to local class in a templated parent class", "body": "<p>Clang is being conservative in this case by marking the function call as <strong>unresolved</strong> (aka <strong>dependent</strong>). <strong>Dependent</strong> things appear only in templates. It means that some syntactic structure <em>might</em> depend on template parameters.</p>\n\n<p><code>HC</code> class is not a usual class, you will have as many separate <code>HC</code> classes, as the number of instantiations of <code>HB</code>. So, if <code>HC</code> does not use <code>T</code>, there is little to no sense to place it inside of <code>HBfunc1</code>. Otherwise, it is dependent indeed. Clang prefers to be safe and avoids making assumptions that smth is not <strong>dependent</strong> when it is defined in a <strong>dependent context</strong>.</p>\n\n<p>Because of these reasons, it is <em>absolutely</em> normal to have AST nodes like this. It is not a parser error, everything worked as intended. As per exact information about the callee, short answer is - there is no way while analyzing the template. However, clang generates AST for every instantiation. Those have usual AST structure, and can be easily visited.</p>\n\n<p>I hope this information is helpful!</p>\n"}], "owner": {"reputation": 1125, "user_id": 4441477, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f92182839b265074948295c7bf513548?s=128&d=identicon&r=PG", "display_name": "jw_", "link": "https://stackoverflow.com/users/4441477/jw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "accepted_answer_id": 59963200, "answer_count": 1, "score": 1, "last_activity_date": 1580286855, "creation_date": 1577267398, "last_edit_date": 1577330710, "question_id": 59477164, "link": "https://stackoverflow.com/questions/59477164/use-clang-libtooling-to-scan-c-source-that-has-call-to-local-class-in-a-templa", "title": "Use Clang LibTooling to scan C++ source that has call to local class in a templated parent class", "body": "<p>Source code to scan:</p>\n\n<pre><code>template &lt;typename T&gt;\nclass HB {\n    T m;\npublic:\n    void HBfunc1();\n};\n\ntemplate &lt;typename T&gt;\nvoid HB&lt;T&gt;::HBfunc1() {  \n    class HC {      \n    public:\n        void HCfunc2() { };\n    };    \n    HC().HCfunc2();\n}\n\nvoid TestTemplate() { HB&lt;int&gt;().HBfunc1(); };\n</code></pre>\n\n<p>The above code works fine in VS2019, when use Clang LibTooling to scan the AST:</p>\n\n<pre><code>virtual bool VisitCallExpr(CallExpr *call) {\n\n    std::cout &lt;&lt; \"VisitCallExpr: \";\n    if (call-&gt;getDirectCallee()) {\n        std::cout &lt;&lt; \" \"&lt;&lt;call-&gt;getDirectCallee()-&gt;getQualifiedNameAsString();\n    }\n    else {\n        Decl *callee = call-&gt;getCalleeDecl();\n        if (!callee) {\n            std::cout &lt;&lt; \"\\nNow dump call:\\n\";\n            call-&gt;dump();\n        }\n    }\n    std::cout&lt;&lt;\"\\n\";\n    return true;\n}\n</code></pre>\n\n<p>When visiting the CallExpr for this line in the scaned source:</p>\n\n<pre><code>HC().HCfunc2();\n</code></pre>\n\n<p>The callee is null and the dump of the CallExpr are:</p>\n\n<pre><code>VisitCallExpr:\nNow dump call:\nCallExpr 0x1c2ef83b3a0 '&lt;dependent type&gt;'\n`-CXXDependentScopeMemberExpr 0x1c2ef83b348 '&lt;dependent type&gt;' lvalue .HCfunc2\n  `-CXXUnresolvedConstructExpr 0x1c2ef83b320 'class HC' 'class HC'\n</code></pre>\n\n<p>Clang doesn't report error in the scanning process (Since the code works fine). </p>\n\n<p>In LLVM source code there is:</p>\n\n<pre><code>// This represents the type of an expression whose type is\n// totally unknown, e.g. 'T::foo'.  It is permitted for this to\n// appear in situations where the structure of the type is\n// theoretically deducible.\nBUILTIN_TYPE(Dependent, DependentTy)\n</code></pre>\n\n<p>Why the type HC is considered unknown? Will any type be unknown while scanning the AST without issueing any warning/erroe? How to visit invocation like this and extract information about its callee? Does the scaned code have problems?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 20722, "user_id": 1625187, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/6vWOZ.jpg?s=128&g=1", "display_name": "Evg", "link": "https://stackoverflow.com/users/1625187/evg"}, "edited": false, "score": 4, "creation_date": 1577266625, "post_id": 59477004, "comment_id": 105131483, "body": "&quot;It doesn&#39;t seem to work&quot; is not a useful description of the problem."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 1, "creation_date": 1577267337, "post_id": 59477004, "comment_id": 105131643, "body": "Those are equations of lines not line segments?"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 2, "creation_date": 1577269039, "post_id": 59477004, "comment_id": 105131996, "body": "You set the two equations equal to one another by setting them both to zero. Now you have two equations and two uknowns. Solving them will give the x, y value where the lines intersect (or there will be no solution if the lines do not."}], "answers": [{"tags": [], "owner": {"reputation": 26087, "user_id": 1312406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5418f577abfa7c529dd026723462b440?s=128&d=identicon&r=PG", "display_name": "Paul Evans", "link": "https://stackoverflow.com/users/1312406/paul-evans"}, "is_accepted": false, "score": 1, "last_activity_date": 1577266579, "creation_date": 1577266579, "answer_id": 59477036, "question_id": 59477004, "link": "https://stackoverflow.com/questions/59477004/c-how-to-know-if-a-point-i-intersects-two-line-segments/59477036#59477036", "title": "C++ : how to know if a point I intersects two line segments?", "body": "<p>You'll need brackets:</p>\n\n<pre><code>x1 = (B2*C1 \u2212 B1*C2) / (A2*B1 \u2212 A1*B2);\ny1 = (A1*C2 \u2212 A2*C1) / (A2*B1 \u2212 A1*B2);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 980, "user_id": 10185183, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-oUA_ZF9CW5c/AAAAAAAAAAI/AAAAAAAACX0/TLhc82gWtsI/photo.jpg?sz=128", "display_name": "arsdever", "link": "https://stackoverflow.com/users/10185183/arsdever"}, "is_accepted": false, "score": 0, "last_activity_date": 1577270658, "creation_date": 1577270658, "answer_id": 59477576, "question_id": 59477004, "link": "https://stackoverflow.com/questions/59477004/c-how-to-know-if-a-point-i-intersects-two-line-segments/59477576#59477576", "title": "C++ : how to know if a point I intersects two line segments?", "body": "<p>Another approach could be the calculation of 2 constants for both lines (the angle tangent and offset) and checking intersection with them</p>\n\n<pre><code>(L1) y1 = k1 * x1 + b1\n(L2) y2 = k2 * x2 + b2\n\n// where\n\nk1 = A1 / B1 and b1 = C1 / B1\nk2 = A2 / B2 and b2 = C2 / B2 \n\n// If they intersect (y1 == y2) and (x1 == x2)\n// Subtract them and you will get\n0 == (k1 - k2) * x + (b1 - b2)\nx = (b2 - b1) / (k1 - k2)\n// After getting the x\ny = k1 * x + b1 or y = k2 * x + b2\n</code></pre>\n\n<p>To check, whether they intersect or not you can check <code>if (k1 == k2)</code>\nTo check, whether they are perpendicular, you can check <code>if (k1 * k2 == -1)</code></p>\n"}], "owner": {"reputation": 15, "user_id": 11790565, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2b6081d535936101c2b41bc91e54f9a?s=128&d=identicon&r=PG&f=1", "display_name": "user11790565", "link": "https://stackoverflow.com/users/11790565/user11790565"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1577270658, "creation_date": 1577266344, "last_edit_date": 1577268174, "question_id": 59477004, "link": "https://stackoverflow.com/questions/59477004/c-how-to-know-if-a-point-i-intersects-two-line-segments", "title": "C++ : how to know if a point I intersects two line segments?", "body": "<p>I have two line segments given by their equations  <code>A1x + B1y + C1 = 0</code> and <code>A2x + B2y + C2 = 0</code>, the coordinates of the intersection point <code>I</code> of these two line segments can be computed as follows:</p>\n\n<pre><code>x1 =B2*C1 \u2212 B1*C2 / A2*B1 \u2212 A1*B2\n\ny1 =A1*C2 \u2212 A2*C1 / A2*B1 \u2212 A1*B2\n</code></pre>\n\n<p>I'm working with double values, how to know if <code>I=(x1,y1)</code> intersects the two line segments?</p>\n\n<p>I tried replacing the values of <code>x1</code> and <code>y1</code> in the equations of the line segments but it doesn't seem to work</p>\n"}, {"tags": ["c++", "function", "function-prototypes"], "answers": [{"tags": [], "owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "is_accepted": true, "score": 14, "last_activity_date": 1577264701, "creation_date": 1577264701, "answer_id": 59476798, "question_id": 59476764, "link": "https://stackoverflow.com/questions/59476764/omit-return-type-in-function-prototype/59476798#59476798", "title": "Omit return type in function prototype", "body": "<blockquote>\n  <p>Could you please explain when can be omitted the return_type? Is this a mistake?</p>\n</blockquote>\n\n<p>The return type may not be omitted in a regular function prototype. The resource you cited is very wrong to suggest otherwise. There is no rule in standard C++ that assumes a return type of <code>int</code> in a function prototype.</p>\n\n<blockquote>\n  <p>Or is some older version of C++?</p>\n</blockquote>\n\n<p>Not of C++. C++ never allowed omitting the return type. But pre-standardized C (K&amp;R C) did allow it and had an \"implicit int\" rule. And so some compilers offer an extension for compatibility with some really old C code.</p>\n\n<p>But again, this isn't, nor ever was, standard C++.</p>\n"}], "owner": {"reputation": 1148, "user_id": 11454967, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-YDcNEltFBxk/AAAAAAAAAAI/AAAAAAABpjA/67S-qxIuEV8/photo.jpg?sz=128", "display_name": "C\u0103t\u0103lina S&#238;rbu", "link": "https://stackoverflow.com/users/11454967/c%c4%83t%c4%83lina-s%c3%aerbu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 309, "favorite_count": 1, "accepted_answer_id": 59476798, "answer_count": 1, "score": 4, "last_activity_date": 1577264701, "creation_date": 1577264316, "question_id": 59476764, "link": "https://stackoverflow.com/questions/59476764/omit-return-type-in-function-prototype", "title": "Omit return type in function prototype", "body": "<p>from the C++ institute documentation ( an online course ):</p>\n\n<blockquote>\n  <p>return_type describes the type of result returned (delivered) by the function (e.g. we expect that the sine function will return a value of type float as int data is completely unusable in this context); you can use any of the C++ types as a return_type, including a very special type named void; a function of type void returns no result at all; we can say that such a function may have an effect but definitely has no result; <strong>if you omit the return_type, the compiler assumes that the function returns a value of type int</strong></p>\n</blockquote>\n\n<p>regarding to this example <code>return_type function_name (parameters_list);</code></p>\n\n<hr>\n\n<p>In this example:</p>\n\n<pre><code>my_function(int x) {\n    return 4;\n}\n\nint main()\n{\n...\n}\n</code></pre>\n\n<p>I get the following error: <code>ISO C++ forbids declaration of 'my_function' with no type [-fpermissive]|</code></p>\n\n<hr>\n\n<p>In this example:</p>\n\n<pre><code>my_function(int);    //Prototype\n\n\nint main()\n{\n...\n}\n\nint my_function(int x)\n{\n    return 4;\n}\n</code></pre>\n\n<p>I get the following error:<code>expected constructor, destructor, or type conversion before ';' token</code></p>\n\n<hr>\n\n<p>I did not find in the <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2013/n3690.pdf\" rel=\"nofollow noreferrer\">C++11 standard</a> page 192 - <code>function declaration</code> something related to what i wanted to know (or maybe its just the fact that i did not understand).</p>\n\n<p>Could you please explain when can be omitted the <strong>return_type</strong>? Is this a mistake? Or is some older version of C++?</p>\n"}, {"tags": ["c++", "performance", "loops", "templates", "virtual-functions"], "comments": [{"owner": {"reputation": 19779, "user_id": 878532, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/5fbebb625a289267abd098c0e676c760?s=128&d=identicon&r=PG", "display_name": "Klaus", "link": "https://stackoverflow.com/users/878532/klaus"}, "edited": false, "score": 0, "creation_date": 1577265437, "post_id": 59476742, "comment_id": 105131233, "body": "If you really need runtime dispatch, you have to use virtual and so you have to pay for it. If not, write code which will refelect this. We often see questions which asks for speed drop for a virtual call. Do you have an idea what the real overhead of a single vpointer call is? What do you believe it takes to the rest of a real world application? The only thing which really helps: Measure your final code! And believe: Compilers are much better as you believe!"}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 3, "creation_date": 1577265562, "post_id": 59476742, "comment_id": 105131261, "body": "I am really uncertain why <code>&#47;* code *&#47;</code> and not a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> in there and why the meaningless function names.  Is <code>doStuff()</code>&#39;s implementation supposed to have the loop you go on about in it?  Or are you talking about some other loop?  Why not put a loop there?  How many <code>Class3</code>s style types are there per <code>Class2&lt;X&gt;</code> for a fixed type <code>X</code>?  Are there more than one <code>Class2</code> templates? (<code>Class2</code> is a template class, not a class; <code>Class3</code> meanwhile seems to represent a category of classes, despite same naming pattern, and <code>Class1</code> a is unique type?)"}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1577265637, "post_id": 59476742, "comment_id": 105131280, "body": "Oh and the short version is &quot;have you tried CRTP?&quot;  Those questions are aimed at decoding if CRTP would work, which is unclear from your description."}, {"owner": {"reputation": 9018, "user_id": 5105949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbd9d7ecb21c40f7a4256317fd80cecc?s=128&d=identicon&r=PG&f=1", "display_name": "churill", "link": "https://stackoverflow.com/users/5105949/churill"}, "edited": false, "score": 1, "creation_date": 1577266776, "post_id": 59476742, "comment_id": 105131517, "body": "I think you want to optimize a non existing bottleneck. The cost of a virtual dispatch is laughably low in the context of a real program. Even if you find a way to remove the virtual dispatch with anything faster the performance gain will be so slim, that it wont save you the time you spend on worrying about it."}, {"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "reply_to_user": {"reputation": 9018, "user_id": 5105949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbd9d7ecb21c40f7a4256317fd80cecc?s=128&d=identicon&r=PG&f=1", "display_name": "churill", "link": "https://stackoverflow.com/users/5105949/churill"}, "edited": false, "score": 0, "creation_date": 1577470237, "post_id": 59476742, "comment_id": 105181382, "body": "@churill There is the dispatch code itself, and then there is the lack of inlining."}], "answers": [{"tags": [], "owner": {"reputation": 3008, "user_id": 1863938, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96ec4e16681460302ea67bfc201b76f3?s=128&d=identicon&r=PG", "display_name": "parktomatomi", "link": "https://stackoverflow.com/users/1863938/parktomatomi"}, "is_accepted": false, "score": 2, "last_activity_date": 1577335085, "creation_date": 1577335085, "answer_id": 59483891, "question_id": 59476742, "link": "https://stackoverflow.com/questions/59476742/overhead-of-calling-the-same-virtual-function-in-a-loop/59483891#59483891", "title": "Overhead of calling the same virtual function in a loop", "body": "<p>The comments have some good advice on why this might be premature optimization, but to answer your question directly:</p>\n\n<blockquote>\n  <p>Is there a way to call doStuff() in a non-virtual way so there is no overhead? </p>\n</blockquote>\n\n<p>If you have a fixed set of types, then you can runtime-dispatch non-virtual methods by way of a tagged union, ala <code>std::variant</code>:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>using Class1 = std::variant&lt;Class2&lt;SomeType1&gt;, Class2&lt;SomeType2&gt;&gt;;\n/*...*/\nstd::visit([](auto&amp;&amp; c) { c.doStuff(); }, p_class1);\n</code></pre>\n\n<p>Which roughly optimizes down to some good-ol' C-style switching:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>switch (p_class1.class_type) {\n    case CLASS2_SOMETYPE1:\n         ((Class2&lt;SomeType1&gt;)p_class1).doStuff();\n         break;\n    /*...*/\n}\n</code></pre>\n\n<blockquote>\n  <p>Does calling the same virtual function in such loop have all the performance problems of virtual functions?</p>\n</blockquote>\n\n<p>Modern processors are pretty good at indirect branch prediction, so you probably won't see much overhead calling a virtual method in a loop.</p>\n"}], "owner": {"reputation": 321, "user_id": 10248920, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5269af8648b2daf254ca5012fff9908?s=128&d=identicon&r=PG&f=1", "display_name": "Newline", "link": "https://stackoverflow.com/users/10248920/newline"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 121, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1577335085, "creation_date": 1577264166, "question_id": 59476742, "link": "https://stackoverflow.com/questions/59476742/overhead-of-calling-the-same-virtual-function-in-a-loop", "title": "Overhead of calling the same virtual function in a loop", "body": "<p>I have some code that has a structure something like this:</p>\n\n<p>(<code>doStuff2()</code> will be called through a <code>Class1</code> pointer. That will call <code>doStuff()</code> in a loop. There are multiple classes like <code>Class3</code> so <code>Class2</code> will have multiple template instances.)</p>\n\n<pre><code>struct Class1{\n\n    virtual void doStuff2() = 0;\n\n};\n\ntemplate&lt;typename T&gt; struct Class2 : public Class1{\n\n    virtual void doStuff() { /*code*/};\n\n    void doStuff2() override {\n\n        // Call this in a huge loop.\n            doStuff();\n\n    }\n\n};\n\nstruct Class3 : public Class2&lt;SomeType&gt;{\n\n    void doStuff() override final { /*code*/};\n\n};\n\n//...\n\nvoid someFunc(Class1 *p_class1){\n\n    p_class1-&gt;doStuff2();\n\n}\n</code></pre>\n\n<p>My questions: Is there a way to call <code>doStuff()</code> in a non-virtual way so there is no overhead? Would making it pure-virtual in <code>Class2</code> and final in <code>Class3</code> help?</p>\n\n<p>Does calling the same virtual function in such loop have all the performance problems of virtual functions?</p>\n"}, {"tags": ["c++", "c", "xampp", "nodemcu"], "comments": [{"owner": {"reputation": 1527, "user_id": 3518383, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GjBCE.jpg?s=128&g=1", "display_name": "Juraj", "link": "https://stackoverflow.com/users/3518383/juraj"}, "edited": false, "score": 0, "creation_date": 1577263421, "post_id": 59476602, "comment_id": 105130828, "body": "firewall on PC? why do you use IP address as hostname? use <code>IPAddress serverIp(172, 20, 10, 9)</code>"}, {"owner": {"reputation": 11, "user_id": 12205203, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8a09140c3a21dc65ab73981f044c6e2?s=128&d=identicon&r=PG&f=1", "display_name": "Adib", "link": "https://stackoverflow.com/users/12205203/adib"}, "reply_to_user": {"reputation": 1527, "user_id": 3518383, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GjBCE.jpg?s=128&g=1", "display_name": "Juraj", "link": "https://stackoverflow.com/users/3518383/juraj"}, "edited": false, "score": 0, "creation_date": 1577263873, "post_id": 59476602, "comment_id": 105130921, "body": "my firewall on pc is on. I am already tried to off my firewall and it still not working. Did I need to change from <code>char server1[] = &quot;172.20.10.9&quot;;  </code> to <code>IPAddress serverIP(172, 20, 10, 9)</code>?"}, {"owner": {"reputation": 1527, "user_id": 3518383, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GjBCE.jpg?s=128&g=1", "display_name": "Juraj", "link": "https://stackoverflow.com/users/3518383/juraj"}, "edited": false, "score": 0, "creation_date": 1577266289, "post_id": 59476602, "comment_id": 105131413, "body": "the string hostname would go over a DNS server. if that is not set right then the connection fails on name resolving"}, {"owner": {"reputation": 11, "user_id": 12205203, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8a09140c3a21dc65ab73981f044c6e2?s=128&d=identicon&r=PG&f=1", "display_name": "Adib", "link": "https://stackoverflow.com/users/12205203/adib"}, "reply_to_user": {"reputation": 1527, "user_id": 3518383, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GjBCE.jpg?s=128&g=1", "display_name": "Juraj", "link": "https://stackoverflow.com/users/3518383/juraj"}, "edited": false, "score": 0, "creation_date": 1577266946, "post_id": 59476602, "comment_id": 105131558, "body": "I&#39;m sorry but I do not really understand. what are you suggest then? I&#39;m totally lost"}, {"owner": {"reputation": 19479, "user_id": 131929, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/06780f50c30ffab584630481476ba6f4?s=128&d=identicon&r=PG", "display_name": "Marcel St&#246;r", "link": "https://stackoverflow.com/users/131929/marcel-st%c3%b6r"}, "edited": false, "score": 0, "creation_date": 1577313086, "post_id": 59476602, "comment_id": 105140954, "body": "Try to focus on the real problem. <a href=\"https://stackoverflow.com/help/how-to-ask\">stackoverflow.com/help/how-to-ask</a> -&gt; create a Minimal, Complete, and Verifiable example. This will help find more people willing to try to reproduce your problem."}], "owner": {"reputation": 11, "user_id": 12205203, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8a09140c3a21dc65ab73981f044c6e2?s=128&d=identicon&r=PG&f=1", "display_name": "Adib", "link": "https://stackoverflow.com/users/12205203/adib"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 226, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1577429200, "creation_date": 1577262946, "last_edit_date": 1577429200, "question_id": 59476602, "link": "https://stackoverflow.com/questions/59476602/nodemcu-esp8266-can-connect-with-xampp-database-but-the-data-is-not-in-the-datab", "title": "Nodemcu Esp8266 can connect with Xampp database but the data is not in the database. How can i fix it?", "body": "<p>I am trying to send my sensor data to the Xampp database.I can connect the nodemcu esp8266 with my xampp server. The problem is the sensor data is not stored in the database.</p>\n\n<p>can you help me fix this?</p>\n\n<p>void Sending_To_phpmyadmindatabase() is the part where it should send the sensor data to the database.</p>\n\n<p>this is my code fireAlarm.ino</p>\n\n<pre><code>#include \"DHT.h\"\n#include &lt;ESP8266WiFi.h&gt;\n#include &lt;WiFiClient.h&gt;\n#include &lt;ESP8266WebServer.h&gt;\n#include &lt;ESP8266mDNS.h&gt;\n#include &lt;SPI.h&gt;\n#define DHTPIN D2\n#define DHTTYPE DHT11\n\nDHT dht(DHTPIN,DHTTYPE);\n\n\nfloat humidityData;\nfloat temperatureData;\n\n //Fire risk based on Angstrom Index\n String stat1 = \"No Fire\";\n String stat2 = \"Low Risk\";\n String stat3 = \"Medium Risk\";\n String stat4 = \"High Risk\";\n String stat5 = \"Extremely High Risk\";\n\n //Formula to determine the fire risk using Angstrom Index\n float valIndex = (humidityData/20) + ((27-temperatureData)/10);\n\nboolean fire = false;\n\nconst char* ssid = \"Adbhzkpli\";\nconst char* password = \"icecreamcake\";\n\nIPAddress serverIP (172,20,10,9);  \n\nWiFiClient client;    \n\n\nvoid setup()\n{\n\n    pinMode(BUILTIN_LED, OUTPUT);\n    pinMode(DHTPIN, INPUT);\n    digitalWrite(BUILTIN_LED, LOW);\n\n    Serial.begin(115200);\n    delay(10);\n\n  // Connect to WiFi network\n    Serial.println();\n    Serial.println();\n    Serial.print(\"Connecting to \");\n    Serial.println(ssid);\n\n    WiFi.begin(ssid, password);\n\n    while (WiFi.status() != WL_CONNECTED) {\n      delay(500);\n      Serial.print(\".\");\n    }\n    Serial.println(\"\");\n    Serial.println(\"WiFi connected\");\n\n  // Start the server\n    server.begin();\n    Serial.println(\"Server started\");\n    Serial.print(WiFi.localIP());\n    delay(1000);\n    Serial.println(\"connecting...\");\n\n    dht.begin();\n }\n\n\nvoid loop()\n{ \n  humidityData = dht.readHumidity();\n  temperatureData = dht.readTemperature(); \n\n  Sending_To_phpmyadmindatabase(); \n}\n\n\n\nvoid Sending_To_phpmyadmindatabase()   //CONNECTING WITH MYSQL\n {\n\n   if (client.connect(serverIP, 80))\n   {\n\n      Serial.println(\"connected\");\n      // Make a HTTP request:\n      Serial.print(\"GET /mdff/insertsensor1.php?humidity=\");\n      client.print(\"GET /mdff/insertsensor1.php?humidity=\");     //YOUR URL\n      Serial.println(humidityData);\n      client.print(humidityData);\n\n      client.print(\"&amp;temperature=\");\n      Serial.println(\"&amp;temperature=\");\n      client.print(temperatureData);\n      Serial.println(temperatureData);\n\n      //Angstrom Index\n      if(valIndex &gt;= 4.0)\n      {\n        client.print(\"&amp;value=\");\n        Serial.println(\"&amp;value=\");\n        client.print(valIndex);\n        Serial.println(valIndex);\n\n        client.print(\"&amp;status=\");\n        Serial.println(\"&amp;status=\");\n        client.print(stat1);\n        Serial.println(stat1);  \n      }\n      else if ((valIndex &gt;= 3.0) &amp;&amp; (valIndex &lt; 4.0))\n      {\n        client.print(\"&amp;value=\");\n        Serial.println(\"&amp;value=\");\n        client.print(valIndex);\n        Serial.println(valIndex);\n\n        client.print(\"&amp;status=\");\n        Serial.println(\"&amp;status=\");\n        client.print(stat2);\n        Serial.println(stat2);\n      }\n      else if ((valIndex &gt;= 2.5) &amp;&amp; (valIndex &lt; 3.0))\n      {\n        client.print(\"&amp;value=\");\n        Serial.println(\"&amp;value=\");\n        client.print(valIndex);\n        Serial.println(valIndex);\n\n        client.print(\"&amp;status=\");\n        Serial.println(\"&amp;status=\");\n        client.print(stat3);\n        Serial.println(stat3);\n\n      }\n      else if ((valIndex &gt;= 2.0) &amp;&amp; (valIndex &lt; 2.5))\n      {\n        client.print(\"&amp;value=\");\n        Serial.println(\"&amp;value=\");\n        client.print(valIndex);\n        Serial.println(valIndex);\n\n        client.print(\"&amp;status=\");\n        Serial.println(\"&amp;status=\");\n        client.print(stat4);\n        Serial.println(stat4);\n\n      }\n      else if (valIndex &lt; 2.0)\n      {\n        client.print(\"&amp;value=\");\n        Serial.println(\"&amp;value=\");\n        client.print(valIndex);\n        Serial.println(valIndex);\n\n        client.print(\"&amp;status=\");\n        Serial.println(\"&amp;status=\");\n        client.print(stat5);\n        Serial.println(stat5);\n\n      }\n\n    client.print(\" \");      //SPACE BEFORE HTTP/1.1\n    client.print(\"HTTP/1.1\");\n    client.println();\n    client.println(\"Host: 172.20.10.9\");\n    client.println(\"Connection: close\");\n    client.println();\n  } \n  else \n  {\n    // if you didn't get a connection to the server:\n    Serial.println(\"connection failed\");\n  }\n\n }\n\n</code></pre>\n\n<p>I don't think my php code is the problem because I am trying to insert data to the database manually and its working fine. I think my nodemcu code is the problem. </p>\n\n<p>Can you help me with my Final Year Project please. Please help me. </p>\n"}, {"tags": ["c++", "visual-studio"], "comments": [{"owner": {"reputation": 12557, "user_id": 1270789, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/FXwoB.png?s=128&g=1", "display_name": "Ken Y-N", "link": "https://stackoverflow.com/users/1270789/ken-y-n"}, "edited": false, "score": 0, "creation_date": 1577262183, "post_id": 59476453, "comment_id": 105130576, "body": "As a guess, perhaps you have some custom INCLUDE paths that point to old versions of the headers? Perhaps review these settings?"}, {"owner": {"reputation": 75, "user_id": 6200728, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c1b81552c17d74cdb884fa580d3c953?s=128&d=identicon&r=PG&f=1", "display_name": "Laci", "link": "https://stackoverflow.com/users/6200728/laci"}, "reply_to_user": {"reputation": 12557, "user_id": 1270789, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/FXwoB.png?s=128&g=1", "display_name": "Ken Y-N", "link": "https://stackoverflow.com/users/1270789/ken-y-n"}, "edited": false, "score": 0, "creation_date": 1577262396, "post_id": 59476453, "comment_id": 105130614, "body": "Thanks, I will check it. It tries to compile the correct file &quot;C:\\Program Files (x86)\\Microsoft Visual Studio\\2019\\Community\\VC\\Tools\\MSVC\\14.24.28314\\include\\limi&zwnj;&#8203;ts(900,39):&quot;"}, {"owner": {"reputation": 9018, "user_id": 5105949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbd9d7ecb21c40f7a4256317fd80cecc?s=128&d=identicon&r=PG&f=1", "display_name": "churill", "link": "https://stackoverflow.com/users/5105949/churill"}, "edited": false, "score": 0, "creation_date": 1577263672, "post_id": 59476453, "comment_id": 105130880, "body": "You should also check the build tools and C++ standard used in the project. Looks like the compiler doesn&#39;t recognize <code>constexpr</code> somehow."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1577266346, "post_id": 59476453, "comment_id": 105131430, "body": "If you want to answer your own question, you can certainly do so, but please do it by posting an answer. (And please don&#39;t add &quot;solved&quot; to the title.)"}, {"owner": {"reputation": 75, "user_id": 6200728, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c1b81552c17d74cdb884fa580d3c953?s=128&d=identicon&r=PG&f=1", "display_name": "Laci", "link": "https://stackoverflow.com/users/6200728/laci"}, "edited": false, "score": 0, "creation_date": 1577266859, "post_id": 59476453, "comment_id": 105131535, "body": "OK. I will do so"}], "answers": [{"tags": [], "owner": {"reputation": 75, "user_id": 6200728, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c1b81552c17d74cdb884fa580d3c953?s=128&d=identicon&r=PG&f=1", "display_name": "Laci", "link": "https://stackoverflow.com/users/6200728/laci"}, "is_accepted": true, "score": 0, "last_activity_date": 1577266946, "creation_date": 1577266946, "answer_id": 59477094, "question_id": 59476453, "link": "https://stackoverflow.com/questions/59476453/error-in-limits-compiling-an-old-code-using-vsc2019/59477094#59477094", "title": "Error in &lt;limits&gt; compiling an old code using VSC2019", "body": "<p>I have found the problem. There was a few preprocessor directives which caused the problem. After removig them I was able to compile:</p>\n\n<pre><code>__builtin_huge_val()=HUGE_VAL\n__builtin_huge_valf()=HUGE_VALF\n__builtin_nan=nan\n__builtin_nanf=nanf\n__builtin_nans=nan\n__builtin_nansf=nanf\n__is_assignable=__is_trivially_assignable\n</code></pre>\n\n<p>Once I have tried the Intel compiler in Visual Studio, it required these settings, but it seems I forgot to remove them.</p>\n\n<p>I have decided not to delete this post, but answer my own question. It may be useful for someone with a similar problem, or if you want to make fun of your colleague :-) It took me a very long time to find out what the problem was.</p>\n"}], "owner": {"reputation": 75, "user_id": 6200728, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c1b81552c17d74cdb884fa580d3c953?s=128&d=identicon&r=PG&f=1", "display_name": "Laci", "link": "https://stackoverflow.com/users/6200728/laci"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 109, "favorite_count": 0, "accepted_answer_id": 59477094, "answer_count": 1, "score": 1, "last_activity_date": 1577266969, "creation_date": 1577261628, "last_edit_date": 1577266969, "question_id": 59476453, "link": "https://stackoverflow.com/questions/59476453/error-in-limits-compiling-an-old-code-using-vsc2019", "title": "Error in &lt;limits&gt; compiling an old code using VSC2019", "body": "<p>I have an old code, but using Visual Studio Community 2017 had no problem to compile it. Yesterday, I updated to Visual Studio Community 2019 and I opened the old .vxproj file, but I got tens of errors like this while compiling include file limits: </p>\n\n<p>limits(900,39): error C3615: constexpr function 'std::numeric_limits::quiet_NaN' cannot result in a constant expression</p>\n\n<p>limits(901,30): message : failure was caused by call of undefined function or one not declared 'constexpr'</p>\n\n<p>I guess the problem may be with the old .vxproj file, but I have no idea how can I fix it without creating a new project form scatch. Any help would be appreciated.</p>\n"}, {"tags": ["c++", "dynamic-programming"], "comments": [{"owner": {"reputation": 34086, "user_id": 787480, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/91cDR.png?s=128&g=1", "display_name": "Sneftel", "link": "https://stackoverflow.com/users/787480/sneftel"}, "edited": false, "score": 1, "creation_date": 1577261289, "post_id": 59476398, "comment_id": 105130382, "body": "Please read <a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">ericlippert.com/2014/03/05/how-to-debug-small-programs</a>"}, {"owner": {"reputation": 34086, "user_id": 787480, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/91cDR.png?s=128&g=1", "display_name": "Sneftel", "link": "https://stackoverflow.com/users/787480/sneftel"}, "edited": false, "score": 0, "creation_date": 1577261566, "post_id": 59476398, "comment_id": 105130442, "body": "Great! Please read that link."}, {"owner": {"reputation": 2436, "user_id": 1944458, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/2c148127606d9c8d88cc74991ef1f796?s=128&d=identicon&r=PG", "display_name": "dspeyer", "link": "https://stackoverflow.com/users/1944458/dspeyer"}, "edited": false, "score": 2, "creation_date": 1577262530, "post_id": 59476398, "comment_id": 105130632, "body": "Your approach is correct; your calculations are not.  I don&#39;t want to go into too much detail because this looks like a homework problem, but if you go through Input 2 applying this algorithm by hand, you&#39;ll notice that what you&#39;re doing isn&#39;t what&#39;s in the code."}, {"owner": {"reputation": 91, "user_id": 12208575, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4f273c1e954eb9b45fc7dbad2e0b3fd?s=128&d=identicon&r=PG&f=1", "display_name": "Nap", "link": "https://stackoverflow.com/users/12208575/nap"}, "reply_to_user": {"reputation": 2436, "user_id": 1944458, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/2c148127606d9c8d88cc74991ef1f796?s=128&d=identicon&r=PG", "display_name": "dspeyer", "link": "https://stackoverflow.com/users/1944458/dspeyer"}, "edited": false, "score": 0, "creation_date": 1577268403, "post_id": 59476398, "comment_id": 105131849, "body": "@dspeyer This is Not a homework problem, but just to practice dynamic programming."}, {"owner": {"reputation": 91, "user_id": 12208575, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4f273c1e954eb9b45fc7dbad2e0b3fd?s=128&d=identicon&r=PG&f=1", "display_name": "Nap", "link": "https://stackoverflow.com/users/12208575/nap"}, "reply_to_user": {"reputation": 2436, "user_id": 1944458, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/2c148127606d9c8d88cc74991ef1f796?s=128&d=identicon&r=PG", "display_name": "dspeyer", "link": "https://stackoverflow.com/users/1944458/dspeyer"}, "edited": false, "score": 0, "creation_date": 1577268429, "post_id": 59476398, "comment_id": 105131857, "body": "@dspeyer if you can help with some hints or something it would be much appreciated"}, {"owner": {"reputation": 206726, "user_id": 5459839, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iehrR.jpg?s=128&g=1", "display_name": "trincot", "link": "https://stackoverflow.com/users/5459839/trincot"}, "edited": false, "score": 0, "creation_date": 1577275705, "post_id": 59476398, "comment_id": 105133536, "body": "Please provide the link to the where this challenge is posted."}, {"owner": {"reputation": 91, "user_id": 12208575, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4f273c1e954eb9b45fc7dbad2e0b3fd?s=128&d=identicon&r=PG&f=1", "display_name": "Nap", "link": "https://stackoverflow.com/users/12208575/nap"}, "edited": false, "score": 0, "creation_date": 1577281285, "post_id": 59476398, "comment_id": 105134846, "body": "There is none, I have solved the minimum cost path, it is very famous. I tried to go for this version of maximum thinking of the knight moves. I don t know how to use for loops for such steady jumps to the right places. I have the dynamic approach, it s just how for can be used."}, {"owner": {"reputation": 91, "user_id": 12208575, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4f273c1e954eb9b45fc7dbad2e0b3fd?s=128&d=identicon&r=PG&f=1", "display_name": "Nap", "link": "https://stackoverflow.com/users/12208575/nap"}, "reply_to_user": {"reputation": 206726, "user_id": 5459839, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iehrR.jpg?s=128&g=1", "display_name": "trincot", "link": "https://stackoverflow.com/users/5459839/trincot"}, "edited": false, "score": 0, "creation_date": 1577347656, "post_id": 59476398, "comment_id": 105146316, "body": "@trincot I have been stopped to ask any more questions, can you give a positive vote, maybe I ll be able to post more questions."}, {"owner": {"reputation": 206726, "user_id": 5459839, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iehrR.jpg?s=128&g=1", "display_name": "trincot", "link": "https://stackoverflow.com/users/5459839/trincot"}, "edited": false, "score": 0, "creation_date": 1577347946, "post_id": 59476398, "comment_id": 105146389, "body": "I upvoted one question just now, but others need improvements."}], "answers": [{"comments": [{"owner": {"reputation": 91, "user_id": 12208575, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4f273c1e954eb9b45fc7dbad2e0b3fd?s=128&d=identicon&r=PG&f=1", "display_name": "Nap", "link": "https://stackoverflow.com/users/12208575/nap"}, "edited": false, "score": 0, "creation_date": 1577306527, "post_id": 59479270, "comment_id": 105139899, "body": "The third loop was challenging to understand, but I got it. That&#39;s what I had in ind, it&#39;s just I didn&#39;t know how to incorporate those i and j into a for loop. Thanks"}, {"owner": {"reputation": 91, "user_id": 12208575, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4f273c1e954eb9b45fc7dbad2e0b3fd?s=128&d=identicon&r=PG&f=1", "display_name": "Nap", "link": "https://stackoverflow.com/users/12208575/nap"}, "edited": false, "score": 0, "creation_date": 1577350347, "post_id": 59479270, "comment_id": 105147101, "body": "I am having a difficulty with this one: <a href=\"https://stackoverflow.com/questions/59485987/coding-teams-placed-on-the-result-board-based-on-solved-tasks-and-penalty-time\" title=\"coding teams placed on the result board based on solved tasks and penalty time\">stackoverflow.com/questions/59485987/&hellip;</a>   Can you take a look?"}, {"owner": {"reputation": 91, "user_id": 12208575, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4f273c1e954eb9b45fc7dbad2e0b3fd?s=128&d=identicon&r=PG&f=1", "display_name": "Nap", "link": "https://stackoverflow.com/users/12208575/nap"}, "edited": false, "score": 0, "creation_date": 1577351022, "post_id": 59479270, "comment_id": 105147316, "body": "This challenge actually was provided yesterday by one of our classmates, and we want to solve it, that&#39;s it, when there is the source of the challenge, I post it. I have rephrased the question to be more clearer."}, {"owner": {"reputation": 91, "user_id": 12208575, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4f273c1e954eb9b45fc7dbad2e0b3fd?s=128&d=identicon&r=PG&f=1", "display_name": "Nap", "link": "https://stackoverflow.com/users/12208575/nap"}, "edited": false, "score": 0, "creation_date": 1577352661, "post_id": 59479270, "comment_id": 105147848, "body": "I made it more focused. I am very sorry."}], "tags": [], "owner": {"reputation": 206726, "user_id": 5459839, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iehrR.jpg?s=128&g=1", "display_name": "trincot", "link": "https://stackoverflow.com/users/5459839/trincot"}, "is_accepted": true, "score": 2, "last_activity_date": 1577305012, "last_edit_date": 1577305012, "creation_date": 1577283796, "answer_id": 59479270, "question_id": 59476398, "link": "https://stackoverflow.com/questions/59476398/maximum-matrix-cost-path/59479270#59479270", "title": "maximum matrix cost path,", "body": "<p>First realise that this is a variant of the more <a href=\"https://stackoverflow.com/questions/39361555/minimum-cost-path-in-matrix\">common problem</a> where valid \"moves\" are \"right\" and \"down\". It can be mapped to it.</p>\n\n<p>If you visualise the spots that can be reached by valid moves, you get this pattern in the matrix:</p>\n\n<pre><code>x - - - - - - - -\n- - x - - - - - - \n- x - - x - - - -\n- - - x - - x - -\n- - x - - x - - x\n- - - - x - - x -\n- - - x - - x - -\n- - - - - x - - x\n</code></pre>\n\n<p>So actually many matrix values don't even play a role -- they cannot be reached. If we also remove the spots from where the <em>target</em> cannot be reached, then we get this. I also use some different letters to highlight a property:</p>\n\n<pre><code>x - - - - - - - -\n- - x - - - - - - \n- y - - x - - - -\n- - - y - - x - -\n- - z - - y - - -\n- - - - z - - y -\n- - - - - - z - -\n- - - - - - - - z\n</code></pre>\n\n<p>Where it has an \"x\", the spot can be reached via (+2,+1) type of moves only. Where it has an \"y\", it needs one (+1,+2) type of move, and where there is a \"z\", two of those are needed.</p>\n\n<p>This is a shape that can be translated to this shape:</p>\n\n<pre><code>x x x x\ny y y y \nz z z z\n</code></pre>\n\n<p>It would be interesting to translate the problem like that, and solve it in that configuration.</p>\n\n<p>I will not pursue that idea here.</p>\n\n<p>Your code is currently missing the test for when to output <code>-</code>.</p>\n\n<p>We need to test whether the target cell can be reached. You can see that a spot cannot be reached if the sum of its x and y coordinate (when zero-based) is not a multiple of 3. And there are also spots where this sum is a multiple of 3, but which are still out of reach. This is where one of the coordinates is at least the double of the other coordinate (marked with an asterisk):</p>\n\n<pre><code>x - - * - - * - -\n- - x - - * - - * \n- y - - x - - * -\n* - - y - - x - -\n- - z - - y - - -\n- * - - z - - y -\n* - - - - - z - -\n- - * - - - - - z\n</code></pre>\n\n<p>So you should add this line to your code:</p>\n\n<pre><code>if ((r+c) % 3 != 2 || r*2 &lt; c || c*2 &lt; r) {\n    cout &lt;&lt; \"-\";\n    return;\n}\n</code></pre>\n\n<p><code>(r+c) % 3 != 2</code> is derived from <code>(r-1 + c-1) % 3 != 0</code>, and <code>r*2 &lt; c</code> is derived from <code>(r-1)*2 &lt; (c-1)*2</code> with a difference of 1, which is not relevant given the first condition.</p>\n\n<p><strong>For the initialisation part:</strong> it is not necessary to initialise the <code>res</code> matrix with -1 values. You wouldn't want to involve a -1 in your calculation anyway. You'll want to <em>avoid</em> relying on such values. Instead you <em>must</em> initialise a starting point for the dynamic programming to work:</p>\n\n<pre><code>res[0][0] = a[0][0];\n</code></pre>\n\n<p><strong>Then, for the actual \"bootstrapping\":</strong> I would first move with only one type of move, and accumulate the cost in that direction:</p>\n\n<pre><code>for (int i = 2, j = 1; (r-i)*2 &gt; c-j; i+=2, j++) {\n    res[i][j] = res[i-2][j-1] + a[i][j];\n}\n</code></pre>\n\n<p>Note that the loop's stop-condition eliminates spots from where the target would be out of reach.</p>\n\n<p>Do the same in the other direction:</p>\n\n<pre><code>for (int i = 1, j = 2; (c-j)*2 &gt; r-i; i++, j+=2) {\n    res[i][j] = res[i-1][j-2] + a[i][j];\n}\n</code></pre>\n\n<p>Now you have set up the \"outer borders\" for the main dynamic programming part. The other valid spots will always have 2 possible spots to come from. So take all other paths by choosing the maximum value from the two spots you could come from:</p>\n\n<pre><code>for (int i = 2, j = 1; (r-i)*2 &gt; c-j; i+=2, j++) {\n    for (int m = i + 1, n = j + 2; (c-n)*2 &gt; r-m; m++, n += 2) {\n        res[m][n] = max(res[m-1][n-2], res[m-2][n-1]) + a[m][n];\n    }\n}\n</code></pre>\n\n<p>And finally output the result:</p>\n\n<pre><code>cout &lt;&lt; res[r-1][c-1];\n</code></pre>\n\n<p>NB: I would prefer a function to <em>return</em> that value, and let <code>main</code> do all the I/O.</p>\n"}, {"comments": [{"owner": {"reputation": 91, "user_id": 12208575, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4f273c1e954eb9b45fc7dbad2e0b3fd?s=128&d=identicon&r=PG&f=1", "display_name": "Nap", "link": "https://stackoverflow.com/users/12208575/nap"}, "edited": false, "score": 0, "creation_date": 1577306645, "post_id": 59481710, "comment_id": 105139921, "body": "Interesting, Thanks!"}], "tags": [], "owner": {"reputation": 7412, "user_id": 1488799, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c2305b305275c01ab2d410e25b7a8c9?s=128&d=identicon&r=PG", "display_name": "Gassa", "link": "https://stackoverflow.com/users/1488799/gassa"}, "is_accepted": false, "score": 2, "last_activity_date": 1577306487, "creation_date": 1577306487, "answer_id": 59481710, "question_id": 59476398, "link": "https://stackoverflow.com/questions/59476398/maximum-matrix-cost-path/59481710#59481710", "title": "maximum matrix cost path,", "body": "<p>Here are the points to address:</p>\n\n<ul>\n<li><p>Out-of-bounds access for array elements.\nLook carefully at which elements you want to access, and what are the loop boundaries.\nThe simplest fix is to widen the arrays accordingly.</p></li>\n<li><p>Wrong initialization for array elements.\nNote that <code>-1</code> (an unreachable square) plus <code>10</code> is <code>9</code> which looks like a valid value.\nThe simplest fix is to initialize with minus-infinity (which is the proper neutral element for the <code>max</code> operation) instead of <code>-1</code>.\nA good <em>default</em> value for minus-infinity is <code>INT_MIN / 2</code>.</p></li>\n</ul>\n\n<p>These two might be sufficient to make the program work.</p>\n\n<hr>\n\n<p>Here are the points to consider for the future:</p>\n\n<ul>\n<li><p>Array construction.\nFor one, there are not enough <code>delete</code> operations for the corresponding <code>new</code> operation, so the program leaks memory.\nHaving said that, I don't see why would one need the cumbersome memory management of multidimensional plain arrays in C++, when <code>vector</code>s do the same with more convenience.\nThe minor slowdown associated with <code>vector</code>s does not justify suffering from whole classes of bugs in the other 97% of the cases.</p></li>\n<li><p>Asking questions.\nThe question goes like this: \"here is the problem, and here is the solution <em>in code</em>\".\nThe missing step is explaining, in text, what the code is <em>meant to do</em>.\nAs a result, people not familiar with the problem and the solution will have a hard time actually understanding your question in the first place, and rightfully consider it a question not in proper form.\nAdditionally, you may find that addressing that missing step, while looking at your code of course, will answer some questions without any more interaction :) (see <a href=\"https://en.wikipedia.org/wiki/Rubber_duck_debugging\" rel=\"nofollow noreferrer\">Rubber duck debugging</a>).</p></li>\n</ul>\n"}], "owner": {"reputation": 91, "user_id": 12208575, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4f273c1e954eb9b45fc7dbad2e0b3fd?s=128&d=identicon&r=PG&f=1", "display_name": "Nap", "link": "https://stackoverflow.com/users/12208575/nap"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 159, "favorite_count": 0, "accepted_answer_id": 59479270, "answer_count": 2, "score": 1, "last_activity_date": 1577306487, "creation_date": 1577261148, "last_edit_date": 1592644375, "question_id": 59476398, "link": "https://stackoverflow.com/questions/59476398/maximum-matrix-cost-path", "title": "maximum matrix cost path,", "body": "<p>I am trying to solve this problem through dynamic programming:</p>\n<blockquote>\n<p>You are given a matrix of <em>n</em> rows and <em>m</em> columns. Every element has a number\nand the rabbit staying at the top left element.</p>\n<p>Calculate the maximum sum such that the rabbit gets to the bottom element and\nonly two moved allowed:</p>\n<p>Two steps right and 1 step down (<em>x</em>+2, <em>y</em>+1);<br />\nTwo steps down and 1 step to the right (<em>x</em>+1, <em>y</em>+2);</p>\n<p><strong>Input:</strong></p>\n<p>The first line contains two naturals <em>n</em> and <em>m</em> (<em>1\u2009\u2264\u2009n, m \u2264 10<sup>3</sup></em>) \u2013 the quantity of rows and columns of the matrix.</p>\n<p>The next <em>n</em> lines contain <em>m</em> numbers \u2013 the values of the matrix\nelements.</p>\n<p>The top left coordinates are (1, 1), the bottom right\ncorner\u2019s \u2013 (<em>n</em>, <em>m</em>).</p>\n<p><strong>Output:</strong></p>\n<p>The maximum sum so that the rabbit reaches the bottom right.\nIf bottom right can not be reached, output <code>-</code></p>\n<p>Input 1:</p>\n<pre><code>3 3 \n5 0 0 \n0 1 2  \n1 0 1 \n</code></pre>\n<p>Output 1:</p>\n<pre><code>-\n</code></pre>\n<p>Input 2:</p>\n<pre><code>4 4\n5 2 1 0\n1 0 0 0\n2 1 3 0\n0 0 1 7 \n</code></pre>\n<p>Output 2:</p>\n<pre><code>13\n</code></pre>\n</blockquote>\n<p>This the code I tried to develop:</p>\n<pre><code>#define _CRT_SECURE_NO_WARNINGS\n#include &lt;iostream&gt;\n#include &lt;algorithm&gt;\n\nusing namespace std;\nvoid findMaxSum(int *a[], int r, int c)\n{\n    int **res = new int*[r];\n    for (int i = 0; i &lt; r; i++) {\n        res[i] = new int[c];\n        for (int j = 0; j &lt; c; j++)\n            res[i][j] = -1;\n    }\n    for (int i = 0; i &lt; r-1; i++) {\n        for (int j = i; j &lt; c-1; j++) {\n            res[i + 1][j + 2] = max(a[i][j] + a[i + 1][j + 2], res[i + 1][j + 2]);\n            res[i + 2][j + 1] = max(a[i][j] + a[i + 2][j + 1], res[i + 2][j + 1]);\n        }\n    }\n    for (int i = 0; i &lt; r; i++) {\n        for (int j = 0; j &lt; c; j++)\n            cout &lt;&lt; res[i][j] &lt;&lt; &quot; &quot;;\n        cout &lt;&lt; endl;\n    }\n    delete[] res;\n}\n\nint main() {    \n    freopen(&quot;input.txt&quot;, &quot;r&quot;, stdin);\n    freopen(&quot;output.txt&quot;, &quot;w&quot;, stdout);\n    int r, c;\n    cin &gt;&gt; r &gt;&gt; c;\n    int **a = new int*[r];\n    for (int i = 0; i &lt; r; i++) {\n        a[i] = new int[c];\n    }\n    for (int i = 0; i &lt; r; i++) {\n        for (int j = 0; j &lt; c; j++)\n            cin &gt;&gt; a[i][j];\n    }\n    findMaxSum(a, r, c);\n    delete[] a;\n    return 0;\n}\n</code></pre>\n<p>Is this the approach, are the calculations inside for loops correct?</p>\n"}, {"tags": ["python", "c++", "shared-memory"], "comments": [{"owner": {"reputation": 38371, "user_id": 3555845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e06f616d9a53b1ca18287d1049a28ee?s=128&d=identicon&r=PG", "display_name": "Daniel", "link": "https://stackoverflow.com/users/3555845/daniel"}, "edited": false, "score": 0, "creation_date": 1577260204, "post_id": 59476186, "comment_id": 105130181, "body": "shared memory is plain bytes. There is no structure information."}], "owner": {"reputation": 11, "user_id": 5512856, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c92101166358e0ab82f9073ea24073d?s=128&d=identicon&r=PG&f=1", "display_name": "ali.at", "link": "https://stackoverflow.com/users/5512856/ali-at"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 65, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1585150128, "creation_date": 1577259071, "question_id": 59476186, "link": "https://stackoverflow.com/questions/59476186/share-numpy-array-opencv-frame-between-python-and-cpp-using-mmap-shared-memory", "title": "share numpy array (opencv frame) between python and cpp using mmap shared memory in python", "body": "<p>I have a code in cpp that reads from shared memory like this :</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>#include &lt;windows.h&gt;\r\n#include &lt;stdio.h&gt;\r\n#include &lt;conio.h&gt;\r\n#include &lt;tchar.h&gt;\r\n#pragma comment(lib, \"user32.lib\")\r\n\r\n#define BUF_SIZE 256\r\nTCHAR szName[]=TEXT(\"Global\\\\Test\");\r\n\r\nint _tmain()\r\n{\r\n   HANDLE hMapFile;\r\n   LPCTSTR pBuf;\r\n\r\n   hMapFile = OpenFileMapping(\r\n                   FILE_MAP_ALL_ACCESS,   // read/write access\r\n                   FALSE,                 // do not inherit the name\r\n                   szName);               // name of mapping object\r\n\r\n   if (hMapFile == NULL)\r\n   {\r\n      _tprintf(TEXT(\"Could not open file mapping object (%d).\\n\"),\r\n             GetLastError());\r\n      return 1;\r\n   }\r\n\r\n   pBuf = (LPTSTR) MapViewOfFile(hMapFile, // handle to map object\r\n               FILE_MAP_ALL_ACCESS,  // read/write permission\r\n               0,\r\n               0,\r\n               BUF_SIZE);\r\n\r\n   if (pBuf == NULL)\r\n   {\r\n      _tprintf(TEXT(\"Could not map view of file (%d).\\n\"),\r\n             GetLastError());\r\n\r\n      CloseHandle(hMapFile);\r\n\r\n      return 1;\r\n   }\r\n\r\n   MessageBox(NULL, pBuf, TEXT(\"Process2\"), MB_OK);\r\n\r\n   UnmapViewOfFile(pBuf);\r\n\r\n   CloseHandle(hMapFile);\r\n\r\n   return 0;\r\n}</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>and have a numpy frame (opencv python) that produces frames. I want to share them with this cpp code to read that. \nsome codes like: </p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>shm = mmap.mmap(0, len(A.flatten()),tagname=\"Global\\\\Test\")</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>this reads that but the structure of matrix not kept. so what should I do for it?\nthanks for helps </p>\n"}, {"tags": ["c++", "objective-c", "windows", "macos", "synchronization"], "comments": [{"owner": {"reputation": 23130, "user_id": 8586227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BRnwg.png?s=128&g=1", "display_name": "Davis Herring", "link": "https://stackoverflow.com/users/8586227/davis-herring"}, "edited": false, "score": 0, "creation_date": 1577283572, "post_id": 59476178, "comment_id": 105135381, "body": "It\u2019s not clear what the requirements are.  What do you want to avoid when multiple processes attempt to rename the file?  It can\u2019t end up in multiple places no matter what you do, right?"}, {"owner": {"reputation": 803, "user_id": 8214369, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eaad6d5047a978a9498deb0e2171069d?s=128&d=identicon&r=PG&f=1", "display_name": "Irad K", "link": "https://stackoverflow.com/users/8214369/irad-k"}, "reply_to_user": {"reputation": 23130, "user_id": 8586227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BRnwg.png?s=128&g=1", "display_name": "Davis Herring", "link": "https://stackoverflow.com/users/8586227/davis-herring"}, "edited": false, "score": 0, "creation_date": 1577295649, "post_id": 59476178, "comment_id": 105137936, "body": "consider a case wheere 2 processes attempt to run the code above. without exclusive access the renaming operation may occure twice, thus the original file being overrun by an empty file and all the data will be lost."}, {"owner": {"reputation": 803, "user_id": 8214369, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eaad6d5047a978a9498deb0e2171069d?s=128&d=identicon&r=PG&f=1", "display_name": "Irad K", "link": "https://stackoverflow.com/users/8214369/irad-k"}, "reply_to_user": {"reputation": 23130, "user_id": 8586227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BRnwg.png?s=128&g=1", "display_name": "Davis Herring", "link": "https://stackoverflow.com/users/8586227/davis-herring"}, "edited": false, "score": 0, "creation_date": 1577295726, "post_id": 59476178, "comment_id": 105137949, "body": "so i basically look for inter-process locking for this code section"}, {"owner": {"reputation": 23130, "user_id": 8586227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BRnwg.png?s=128&g=1", "display_name": "Davis Herring", "link": "https://stackoverflow.com/users/8586227/davis-herring"}, "edited": false, "score": 0, "creation_date": 1577295993, "post_id": 59476178, "comment_id": 105138008, "body": "So the issue is that you check whether to perform the rename twice and then rename the recreated file over the (renamed) original?  (If so, edit the question to say so.)"}, {"owner": {"reputation": 803, "user_id": 8214369, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eaad6d5047a978a9498deb0e2171069d?s=128&d=identicon&r=PG&f=1", "display_name": "Irad K", "link": "https://stackoverflow.com/users/8214369/irad-k"}, "reply_to_user": {"reputation": 23130, "user_id": 8586227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BRnwg.png?s=128&g=1", "display_name": "Davis Herring", "link": "https://stackoverflow.com/users/8586227/davis-herring"}, "edited": false, "score": 0, "creation_date": 1577308176, "post_id": 59476178, "comment_id": 105140169, "body": "I hope my latest update made the question clearer. Thanks you for your comments."}, {"owner": {"reputation": 23130, "user_id": 8586227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BRnwg.png?s=128&g=1", "display_name": "Davis Herring", "link": "https://stackoverflow.com/users/8586227/davis-herring"}, "edited": false, "score": 0, "creation_date": 1577314053, "post_id": 59476178, "comment_id": 105141107, "body": "It seems that this is a general locking question.  As such, does this answer your question? <a href=\"https://stackoverflow.com/questions/5339200/how-to-create-a-single-instance-application-in-c-or-c\">How to create a single instance application in C or C++</a>"}, {"owner": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "edited": false, "score": 0, "creation_date": 1577411897, "post_id": 59476178, "comment_id": 105164251, "body": "<code>f</code> does not point to the &quot;original file <i>name</i>&quot;. It refers to the kernel file object that&#39;s referenced by <code>handle</code>. There is only one kernel file object here. Renaming it with a &quot;.prev&quot; extension doesn&#39;t change that. However, another thread subsequently will succeed in creating a new file (due to the <code>OPEN_ALWAYS</code> disposition) with the initial <code>currFile</code> name."}, {"owner": {"reputation": 803, "user_id": 8214369, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eaad6d5047a978a9498deb0e2171069d?s=128&d=identicon&r=PG&f=1", "display_name": "Irad K", "link": "https://stackoverflow.com/users/8214369/irad-k"}, "reply_to_user": {"reputation": 23130, "user_id": 8586227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BRnwg.png?s=128&g=1", "display_name": "Davis Herring", "link": "https://stackoverflow.com/users/8586227/davis-herring"}, "edited": false, "score": 0, "creation_date": 1577865903, "post_id": 59476178, "comment_id": 105270543, "body": "@DavisHerring, Sorry for the late response, but I think my question is not general locking question since it relate to the fact that renaming file isn&#39;t blocked by <code>flock</code> since it doesn&#39;t change the file descriptor. I&#39;ll re-write my question to emphasis this."}, {"owner": {"reputation": 23130, "user_id": 8586227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BRnwg.png?s=128&g=1", "display_name": "Davis Herring", "link": "https://stackoverflow.com/users/8586227/davis-herring"}, "edited": false, "score": 0, "creation_date": 1577866511, "post_id": 59476178, "comment_id": 105270633, "body": "@IradK: You can use whatever kind of locking to prevent two processes from doing <i>this</i> rename at the same time.  The lock doesn\u2019t have to have anything to do with the file in question since you\u2019re not trying to interfere with another <i>uncooperative</i> process trying to stat/rename the file."}], "owner": {"reputation": 803, "user_id": 8214369, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eaad6d5047a978a9498deb0e2171069d?s=128&d=identicon&r=PG&f=1", "display_name": "Irad K", "link": "https://stackoverflow.com/users/8214369/irad-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 134, "favorite_count": 0, "closed_date": 1577314053, "answer_count": 0, "score": 2, "last_activity_date": 1577308128, "creation_date": 1577259019, "last_edit_date": 1577308128, "question_id": 59476178, "link": "https://stackoverflow.com/questions/59476178/lock-file-for-inter-process-renaming", "closed_reason": "Needs more focus", "title": "Lock file for inter-process renaming", "body": "<p>The code below is Windows native and meant to protect against multiple processes attempt to rename the same file simultaneously - what may cause data loss. In simple, what the code does, is exclusively open the file for current process/thread, then check if renaming is needed, and finally write to the file.</p>\n\n<p>consider a case where 2 processes attempt to run the code below simultaneously. Without exclusive access, the renaming operation may occurs twice, So that on the second renaming, the original file will be overrun by an empty file and all the data will be lost.</p>\n\n<p>I'd like to port this logic into macOS, so I'm looking for an equivalent locking mechanism on the file before deciding to rename it (programmatic locking). both objectiveC or C/C++/POSIX are good options.</p>\n\n<p>Specifically, I'm looking for a macOS equivalent native Windows function <code>CreateFile</code> as called in the following implementation : </p>\n\n<pre><code>while (!handle) {\n    handle = CreateFile(currFile, \n                        GENERIC_WRITE | DELETE, //dwDesiredAccess \n                        FILE_SHARE_READ,        //dwShareMode\n                        NULL,                   //lpSecurityAttributes\n                        OPEN_ALWAYS,            //dwCreationDisposition\n                        FILE_ATTRIBUTE_NORMAL,  // dwFlagsAndAttributes\n                        NULL);\n\n    if(!handle)\n       sleep(...) // retry after sleep\n}\n\n// NOTE : This stage is reached exclusively for all processes/threads \n\n\n// create c style file pointer for current file.\nint chandle = _open_osfhandle((intptr_t)handle, _O_APPEND);\nFILE* f = _wfdopen(chandle, L\"a+\");\n\nif (std::filesystem::file_size(currFile) &gt; MAX_SIZE)\n{\n    std::wstring prevName = currFile + L\".prev\";\n    DWORD buffSz = (DWORD)\n            (sizeof(FILE_RENAME_INFO) + \n            prevName.length() * sizeof(WCHAR) \n            + 16);\n\n    FILE_RENAME_INFO *renameInfo = (FILE_RENAME_INFO *)malloc(buffSz);\n    renameInfo-&gt;ReplaceIfExists = TRUE;\n    renameInfo-&gt;RootDirectory = NULL;       \n    renameInfo-&gt;FileNameLength = (DWORD)prevName.length()*2;\n    wcscpy_s(renameInfo-&gt;FileName, prevNAme.length() + 2, prevName.c_str());\n\n    //notice that the 'f' still point on the original file name\n    BOOL res = SetFileInformationByHandle(handle, FileRenameInfo, renameInfo, buffSz);\n}\n\n...\n\n// now print message to the original file name using 'f'\nfprintf(f, \"blablabla\");\n\n</code></pre>\n"}, {"tags": ["c++", "c", "encryption", "openssl", "aes"], "comments": [{"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 1, "creation_date": 1577276665, "post_id": 59476128, "comment_id": 105133751, "body": "<i>&quot;...These undocumented functions ... has a known bug....&quot;</i>: source: <a href=\"https://mta.openssl.org/pipermail/openssl-commits/2019-April/022801.html\" rel=\"nofollow noreferrer\">mta.openssl.org/pipermail/openssl-commits/2019-April/&hellip;</a>  So not a public API and bugged."}, {"owner": {"reputation": 17251, "user_id": 9014097, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2dJaU.png?s=128&g=1", "display_name": "Topaco", "link": "https://stackoverflow.com/users/9014097/topaco"}, "edited": false, "score": 1, "creation_date": 1577287078, "post_id": 59476128, "comment_id": 105136165, "body": "My understanding is that not only the implementation (i.e. <code>AES_ige_encrypt()</code>) but IGE itself (i.e. the block cipher mode as such, <a href=\"https://nourbakhsh.ir/wp-content/uploads/2015/11/jakobsen-master-thesis-telegram.pdf\" rel=\"nofollow noreferrer\">block diagram</a>, p. 11) is deprecated in OpenSSL. Then it is rather unlikely to find anything with the <i>same</i> functionality that is <i>not</i> deprecated in OpenSSL. But this is only a guess. You might find <a href=\"https://crypto.stackexchange.com/a/43842\">this</a> and <a href=\"https://crypto.stackexchange.com/a/9515\">this</a> interesting."}], "answers": [{"comments": [{"owner": {"reputation": 79299, "user_id": 589259, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/vJbKg.jpg?s=128&g=1", "display_name": "Maarten Bodewes", "link": "https://stackoverflow.com/users/589259/maarten-bodewes"}, "edited": false, "score": 0, "creation_date": 1577586386, "post_id": 59504133, "comment_id": 105204354, "body": "Or to grab the current code and fix the Bi-IGE bug for yourself, of course, then link against OpenSSL for the block cipher. Or re-implement Bi-IGE according to spec. But I&#39;ll be danged if I&#39;m going to create a competing answer against Matt :)"}], "tags": [], "owner": {"reputation": 5562, "user_id": 1946679, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed74e2cdc59d058b76a76c90dd3c3bdc?s=128&d=identicon&r=PG", "display_name": "Matt Caswell", "link": "https://stackoverflow.com/users/1946679/matt-caswell"}, "is_accepted": true, "score": 2, "last_activity_date": 1577467967, "creation_date": 1577467967, "answer_id": 59504133, "question_id": 59476128, "link": "https://stackoverflow.com/questions/59476128/alternative-for-deprecated-aes-ige-encrypt-api-in-openssl/59504133#59504133", "title": "Alternative for deprecated AES_ige_encrypt() API in openssl", "body": "<p>Are you sure you are using the correct version of OpenSSL? That function is deprecated in the master branch (i.e. what will become OpenSSL 3.0), but is not yet deprecated in 1.1.1.</p>\n\n<p>Anyway, you should not be using these modes. As per the CHANGES entry:</p>\n\n<blockquote>\n  <p>*) The functions AES_ige_encrypt() and AES_bi_ige_encrypt() have\n  been\n       deprecated. These undocumented functions were never integrated into the EVP\n       layer and implement the AES Infinite Garble Extension (IGE) mode and AES\n       Bi-directional IGE mode. These modes were never formally standardised and\n       usage of these functions is believed to be very small. In particular\n       AES_bi_ige_encrypt() has a known bug. It accepts 2 AES keys, but only one\n       is ever used. The security implications are believed to be minimal, but\n       this issue was never fixed for backwards compatibility reasons. New code\n       should not use these modes.\n       [Matt Caswell]</p>\n</blockquote>\n\n<p>As per my comment on the end - new code should not use these modes. If you are using them, then the alternative is to look for an alternative mode that meets your requirement and use the EVP functions to use that mode.</p>\n"}], "owner": {"reputation": 23, "user_id": 11016015, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dCb7z.jpg?s=128&g=1", "display_name": "VargheseJ", "link": "https://stackoverflow.com/users/11016015/varghesej"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 177, "favorite_count": 0, "accepted_answer_id": 59504133, "answer_count": 1, "score": 2, "last_activity_date": 1577467967, "creation_date": 1577258590, "last_edit_date": 1577260463, "question_id": 59476128, "link": "https://stackoverflow.com/questions/59476128/alternative-for-deprecated-aes-ige-encrypt-api-in-openssl", "title": "Alternative for deprecated AES_ige_encrypt() API in openssl", "body": "<p>While upgrading from OpenSSL version 1.0.0 to 1.1.1x there was a warning that the API <code>AES_ige_encrypt()</code> is deprecated which is used for the encryption and decryption using AES_ige.\nEven though the source comments says the function is deprecated it not mentioning anything about any alternatives for this API.\nSearching the net didn't gave any useful information regarding this.\nIt will be very helpful if anyone can suggest the OpenSSL API that will provide the same functionality as <code>AES_ige_encrypt()</code> API.</p>\n"}, {"tags": ["c++", "c++14"], "comments": [{"owner": {"reputation": 8251, "user_id": 2912665, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/XrRhd.jpg?s=128&g=1", "display_name": "CinCout", "link": "https://stackoverflow.com/users/2912665/cincout"}, "edited": false, "score": 0, "creation_date": 1577257752, "post_id": 59476004, "comment_id": 105129740, "body": "Related: <a href=\"https://stackoverflow.com/a/713479/2912665\">stackoverflow.com/a/713479/2912665</a>"}], "answers": [{"comments": [{"owner": {"reputation": 1593, "user_id": 4037927, "user_type": "registered", "accept_rate": 69, "profile_image": "https://graph.facebook.com/1849962973/picture?type=large", "display_name": "Mayukh Sarkar", "link": "https://stackoverflow.com/users/4037927/mayukh-sarkar"}, "edited": false, "score": 0, "creation_date": 1577257934, "post_id": 59476042, "comment_id": 105129780, "body": "Thanks..I was doing <code>std::fill(data, data+(row*col), def)</code> which was definitely not working."}, {"owner": {"reputation": 3184, "user_id": 1058916, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5f2f3475aba0c4b388692df3f5546bb9?s=128&d=identicon&r=PG", "display_name": "fefe", "link": "https://stackoverflow.com/users/1058916/fefe"}, "reply_to_user": {"reputation": 1593, "user_id": 4037927, "user_type": "registered", "accept_rate": 69, "profile_image": "https://graph.facebook.com/1849962973/picture?type=large", "display_name": "Mayukh Sarkar", "link": "https://stackoverflow.com/users/4037927/mayukh-sarkar"}, "edited": false, "score": 3, "creation_date": 1577257978, "post_id": 59476042, "comment_id": 105129788, "body": "@MayukhSarkar yout need to use <code>data.get()</code> to get the actual pointer."}, {"owner": {"reputation": 5362, "user_id": 2430669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2656586be6c90ef0666a391f1114628b?s=128&d=identicon&r=PG", "display_name": "Micha&#235;l Roy", "link": "https://stackoverflow.com/users/2430669/micha%c3%abl-roy"}, "edited": false, "score": 0, "creation_date": 1577258456, "post_id": 59476042, "comment_id": 105129867, "body": "You can also use fill_n()."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 5362, "user_id": 2430669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2656586be6c90ef0666a391f1114628b?s=128&d=identicon&r=PG", "display_name": "Micha&#235;l Roy", "link": "https://stackoverflow.com/users/2430669/micha%c3%abl-roy"}, "edited": false, "score": 0, "creation_date": 1577258514, "post_id": 59476042, "comment_id": 105129881, "body": "@Micha&#235;lRoy - True. I guess I was tunnel visioned by the OP&#39;s mention of <code>std::fill</code>. Why not post an answer?"}, {"owner": {"reputation": 1593, "user_id": 4037927, "user_type": "registered", "accept_rate": 69, "profile_image": "https://graph.facebook.com/1849962973/picture?type=large", "display_name": "Mayukh Sarkar", "link": "https://stackoverflow.com/users/4037927/mayukh-sarkar"}, "edited": false, "score": 0, "creation_date": 1577259299, "post_id": 59476042, "comment_id": 105130044, "body": "@StoryTeller-UnslanderMonica Thanks..<code>fill_n</code> looks cleaner though"}], "tags": [], "owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "is_accepted": true, "score": 5, "last_activity_date": 1577258870, "last_edit_date": 1577258870, "creation_date": 1577257694, "answer_id": 59476042, "question_id": 59476004, "link": "https://stackoverflow.com/questions/59476004/how-to-use-stdfill-on-an-template-type-array-made-using-make-uniquet/59476042#59476042", "title": "How to use std::fill on an template type array made using make_unique&lt;T[]&gt;()?", "body": "<p><code>std::fill</code> expects a pair of iterators (that could be pointers) which define a valid range. In your case the range is from the address of the first element <code>&amp;data[0]</code>, up to one past the end <code>&amp;data[0] + row*col</code>. Translating it into an invocation, we get</p>\n\n<pre><code>std::fill(&amp;data[0], &amp;data[0] + row*col , def);\n</code></pre>\n\n<p>or the equivalent, but in my opinion not quite as obvious:</p>\n\n<pre><code>std::fill(data.get(), data.get() + row*col , def);\n</code></pre>\n\n<p>Another approach, is to let the standard library do the arithmetic itself, and use the complementary algorithm <code>std::fill_n</code>. Thus producing one of these options.</p>\n\n<pre><code>std::fill_n(&amp;data[0], row*col , def);\nstd::fill_n(data.get(), row*col , def);\n</code></pre>\n"}], "owner": {"reputation": 1593, "user_id": 4037927, "user_type": "registered", "accept_rate": 69, "profile_image": "https://graph.facebook.com/1849962973/picture?type=large", "display_name": "Mayukh Sarkar", "link": "https://stackoverflow.com/users/4037927/mayukh-sarkar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 111, "favorite_count": 0, "accepted_answer_id": 59476042, "answer_count": 1, "score": 0, "last_activity_date": 1577258870, "creation_date": 1577257308, "last_edit_date": 1577258060, "question_id": 59476004, "link": "https://stackoverflow.com/questions/59476004/how-to-use-stdfill-on-an-template-type-array-made-using-make-uniquet", "title": "How to use std::fill on an template type array made using make_unique&lt;T[]&gt;()?", "body": "<p>I want to create class for my 2d matrix. I have used the following code</p>\n\n<pre><code>#include &lt;memory&gt;\n#include &lt;algorithm&gt;\ntemplate &lt;typename T&gt;\nclass Matrix {\nprivate:\n  int row{};\n  int col{};\n  std::unique_ptr&lt;T[]&gt; data; // We are going to store data into a 1d array\n\npublic:\n  explicit Matrix(int row, int col, T def) {\n    // Creates a T type matrix of row rows and col columns\n    // and initialize each element by def\n    this-&gt;row = row;\n    this-&gt;col = col;\n    this-&gt;data = std::make_unique&lt;T[]&gt;(row*col);\n    for(int i=0; i&lt;row*col; i++) {\n      data[i] = def;\n    }\n  }\n\n  void setValues(T value) {\n    // Set the value in all the elements\n    for (int i=0; i&lt;row*col; i++) {\n      data[i] = value;\n    }\n  }\n};\n</code></pre>\n\n<p>Now I want to replace the loops with <code>std::fill</code> but somehow I am not able to do this. All the examples are on <code>std::vector&lt;T&gt;</code> or on <code>std::array&lt;T&gt;</code>. Can anyone help me with this please?</p>\n\n<p><strong>EDIT 1:</strong> One way as @StoryTeller - Unslander Monica mentioned is</p>\n\n<pre><code>std::fill(&amp;data[0], &amp;data[0] + row*col , def);\n</code></pre>\n\n<p>Is there any cleaner way?</p>\n"}, {"tags": ["c++", "tensorflow", "graph", "protocol-buffers"], "comments": [{"owner": {"reputation": 14110, "user_id": 2416958, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/w8lZr.png?s=128&g=1", "display_name": "Stefan", "link": "https://stackoverflow.com/users/2416958/stefan"}, "edited": false, "score": 0, "creation_date": 1577482449, "post_id": 59475653, "comment_id": 105185020, "body": "<code>ParseFromArray</code> crashes, with which error?"}, {"owner": {"reputation": 81, "user_id": 1726452, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/deb719d79600e37011461815248c75c3?s=128&d=identicon&r=PG", "display_name": "VB4EVA", "link": "https://stackoverflow.com/users/1726452/vb4eva"}, "reply_to_user": {"reputation": 14110, "user_id": 2416958, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/w8lZr.png?s=128&g=1", "display_name": "Stefan", "link": "https://stackoverflow.com/users/2416958/stefan"}, "edited": false, "score": 0, "creation_date": 1577613136, "post_id": 59475653, "comment_id": 105207813, "body": "Hi @Stefan, it segfaults in the CreateMessage() function as below:      tensorflow::GraphDef* google::protobuf::Arena::CreateMessage&lt;tensorflow::GraphDef&gt;&zwnj;&#8203;() at 0x7fffc48e2ff1\t     google::protobuf::MessageLite::ParseFromArray() at 0x7fffbe3b5038"}, {"owner": {"reputation": 1527, "user_id": 5832272, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s7clX.png?s=128&g=1", "display_name": "MH304", "link": "https://stackoverflow.com/users/5832272/mh304"}, "edited": false, "score": 0, "creation_date": 1577708179, "post_id": 59475653, "comment_id": 105230891, "body": "What&#39;s the size of the graph? did you notice to the commented part in the code?"}, {"owner": {"reputation": 81, "user_id": 1726452, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/deb719d79600e37011461815248c75c3?s=128&d=identicon&r=PG", "display_name": "VB4EVA", "link": "https://stackoverflow.com/users/1726452/vb4eva"}, "reply_to_user": {"reputation": 1527, "user_id": 5832272, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s7clX.png?s=128&g=1", "display_name": "MH304", "link": "https://stackoverflow.com/users/5832272/mh304"}, "edited": false, "score": 0, "creation_date": 1577738973, "post_id": 59475653, "comment_id": 105242997, "body": "@Meisam I have 2 files, one is 19.2MB, and one is 196.5MB. and it failed with both files."}], "answers": [{"comments": [{"owner": {"reputation": 81, "user_id": 1726452, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/deb719d79600e37011461815248c75c3?s=128&d=identicon&r=PG", "display_name": "VB4EVA", "link": "https://stackoverflow.com/users/1726452/vb4eva"}, "edited": false, "score": 0, "creation_date": 1577739226, "post_id": 59524661, "comment_id": 105243077, "body": "Hi @mdaoust the .pb file can be loaded by the function ReadBinaryProto, so I assume it can be loaded by ParseFromString, however it doesn&#39;t work either."}], "tags": [], "owner": {"reputation": 5759, "user_id": 997378, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a11366bc2dfe133e16a89898fa33b24f?s=128&d=identicon&r=PG", "display_name": "mdaoust", "link": "https://stackoverflow.com/users/997378/mdaoust"}, "is_accepted": false, "score": 1, "last_activity_date": 1577667845, "creation_date": 1577667845, "answer_id": 59524661, "question_id": 59475653, "link": "https://stackoverflow.com/questions/59475653/how-to-load-tensorflow-graph-from-memory-buffer/59524661#59524661", "title": "How to load tensorflow graph from memory buffer", "body": "<p>I'm no expert here, I've only used protobufs from python... but how did you encode that memory in the buffer? Are you sure it's encoded correctly for the <a href=\"https://developers.google.com/protocol-buffers/docs/reference/cpp/google.protobuf.io.coded_stream\" rel=\"nofollow noreferrer\">Coded Stream</a>? Coded Streams sound like an internal detail:</p>\n\n<blockquote>\n  <p>Typically these classes will only be used internally by the protocol buffer library in order to encode and decode protocol buffers.</p>\n</blockquote>\n\n<p>Have you tried the more basic/public <a href=\"https://developers.google.com/protocol-buffers/docs/cpptutorial#reading-a-message\" rel=\"nofollow noreferrer\">\"SerializeToString\", \"ParseFromString\", \"SerializeToOstream\", \"ParseFromIstream\"</a> methods?  </p>\n"}, {"tags": [], "owner": {"reputation": 81, "user_id": 1726452, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/deb719d79600e37011461815248c75c3?s=128&d=identicon&r=PG", "display_name": "VB4EVA", "link": "https://stackoverflow.com/users/1726452/vb4eva"}, "is_accepted": true, "score": 1, "last_activity_date": 1577830605, "creation_date": 1577830605, "answer_id": 59548797, "question_id": 59475653, "link": "https://stackoverflow.com/questions/59475653/how-to-load-tensorflow-graph-from-memory-buffer/59548797#59548797", "title": "How to load tensorflow graph from memory buffer", "body": "<p>The reason it crashes is because of the mismatch between the <strong>protobuf</strong> runtime library version installed on the system and the version the code is linked with. In particular, this is the error:</p>\n\n<pre><code>This program requires version 3.5.0 of the Protocol Buffer runtime library, but the installed version is 2.6.1.\n</code></pre>\n\n<p>I upgraded <strong>protobuf</strong> to version <strong>3.5.0</strong>, and it works fine.</p>\n"}], "owner": {"reputation": 81, "user_id": 1726452, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/deb719d79600e37011461815248c75c3?s=128&d=identicon&r=PG", "display_name": "VB4EVA", "link": "https://stackoverflow.com/users/1726452/vb4eva"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 375, "favorite_count": 1, "accepted_answer_id": 59548797, "answer_count": 2, "score": 3, "last_activity_date": 1577830605, "creation_date": 1577253830, "last_edit_date": 1577774611, "question_id": 59475653, "link": "https://stackoverflow.com/questions/59475653/how-to-load-tensorflow-graph-from-memory-buffer", "title": "How to load tensorflow graph from memory buffer", "body": "<p>I'm trying to load a graph from the memory instead of a file for a portability purpose. So far what I tried is </p>\n\n<pre><code>tensorflow::GraphDef graph_def;\ntensorflow::protobuf::io::CodedInputStream coded_stream( buffer, size );\n\n// Total bytes hard limit / warning limit are set to 1GB and 512MB respectively.\n//    coded_stream.SetTotalBytesLimit( 1024LL &lt;&lt; 20 );\n\nif( !proto-&gt;ParseFromCodedStream( &amp;coded_stream ) || !coded_stream.ConsumedEntireMessage() )\n{\n    return tensorflow::errors::DataLoss( \"Can't parse \", \"memory\", \" as binary proto\" );\n}\n</code></pre>\n\n<p>buffer is a byte array( unsigned char* ) of the graph file 'graph.pb'. The code segfault at this line: </p>\n\n<blockquote>\n  <p>proto->ParseFromCodedStream( &amp;coded_stream )</p>\n</blockquote>\n\n<p>i also tried <code>graph_def.ParseFromArray(data, len)</code> like in this <a href=\"https://stackoverflow.com/questions/41889453/how-to-load-tensorflow-graph-from-memory-address\">post</a> or <code>graph_def.ParseFromString( stringData )</code> but it also crashes. Am I missing something? Thanks. </p>\n\n<p>ps: I use Tensorflow 1.9 and protobuf 2.6.1 on Ubuntu16.04</p>\n\n<p><strong>Edit</strong>\nOk so far I've tried all possible Parse functions, and they all crash so I must have missed something very fundamental. The Parse functions I've tried are:</p>\n\n<ul>\n<li>ParseFromArray</li>\n<li>ParseFromString</li>\n<li>ParseFromCodedStream</li>\n</ul>\n\n<p>First, I read the .pb file into a byte array as below:</p>\n\n<pre><code>std::ifstream is( \"graph.pb\", std::ios::binary );\nstd::vector&lt;unsigned char&gt; buffer(std::istreambuf_iterator&lt;char&gt;(is), {});\n</code></pre>\n\n<p>Next, I convert it to a string:</p>\n\n<pre><code>string data(buffer.begin(), buffer.end());\n</code></pre>\n\n<p>Finally, I call </p>\n\n<pre><code>graph_def.ParseFromString( data )\n</code></pre>\n\n<p>which crashes, and the same for <code>ParseFromArray()</code>. The annoying part is it crashes instead of returning an error, which makes me think I must have missed something fundamental.</p>\n"}, {"tags": ["c++", "c++11", "search", "return", "default"], "comments": [{"owner": {"reputation": 1018, "user_id": 1312320, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ebf28b20dae6510720e69b1310422fd2?s=128&d=identicon&r=PG", "display_name": "sardok", "link": "https://stackoverflow.com/users/1312320/sardok"}, "edited": false, "score": 0, "creation_date": 1577256212, "post_id": 59475652, "comment_id": 105129484, "body": "you may return <code>std::optional&lt;int&gt;</code> where <code>int</code> indicates index or <code>std::optional&lt;A&gt;</code>."}], "answers": [{"comments": [{"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 1, "creation_date": 1577255501, "post_id": 59475802, "comment_id": 105129394, "body": "Or don&#39;t reinvent the wheel, and just use <code>std::find</code>."}, {"owner": {"reputation": 145, "user_id": 1299917, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/acc097dee56ffbb766dffd346fa3a713?s=128&d=identicon&r=PG", "display_name": "David Wu", "link": "https://stackoverflow.com/users/1299917/david-wu"}, "reply_to_user": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 1, "creation_date": 1577257643, "post_id": 59475802, "comment_id": 105129725, "body": "@StoryTeller-UnslanderMonica Exactly!"}], "tags": [], "owner": {"reputation": 145, "user_id": 1299917, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/acc097dee56ffbb766dffd346fa3a713?s=128&d=identicon&r=PG", "display_name": "David Wu", "link": "https://stackoverflow.com/users/1299917/david-wu"}, "is_accepted": false, "score": 0, "last_activity_date": 1577255444, "creation_date": 1577255444, "answer_id": 59475802, "question_id": 59475652, "link": "https://stackoverflow.com/questions/59475652/for-a-search-algo-with-reference-return-type-what-should-be-the-default-return/59475802#59475802", "title": "For a search algo with reference return type, what should be the default return value?", "body": "<p>Return the last() iterator of the container or <code>len</code> to indicate failure of find(). This is the convention of STL and a good practice.</p>\n\n<pre><code>template&lt;typename InputIterator, typename T&gt;\n  InputIterator find (InputIterator first, InputIterator last, const T&amp; val)\n{\n  while (first!=last) {\n    if (*first==val) return first;\n    ++first;\n  }\n  return last;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3184, "user_id": 1058916, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5f2f3475aba0c4b388692df3f5546bb9?s=128&d=identicon&r=PG", "display_name": "fefe", "link": "https://stackoverflow.com/users/1058916/fefe"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1577257036, "post_id": 59475825, "comment_id": 105129619, "body": "I&#39;ll rephrase the last paragraph."}], "tags": [], "owner": {"reputation": 3184, "user_id": 1058916, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5f2f3475aba0c4b388692df3f5546bb9?s=128&d=identicon&r=PG", "display_name": "fefe", "link": "https://stackoverflow.com/users/1058916/fefe"}, "is_accepted": false, "score": 0, "last_activity_date": 1577257169, "last_edit_date": 1577257169, "creation_date": 1577255718, "answer_id": 59475825, "question_id": 59475652, "link": "https://stackoverflow.com/questions/59475652/for-a-search-algo-with-reference-return-type-what-should-be-the-default-return/59475825#59475825", "title": "For a search algo with reference return type, what should be the default return value?", "body": "<p>If you are expecting \"not found\" as a valid result, you should not return a reference to the found object, as there is no \"null\" reference in C++.</p>\n\n<p>You may return a pointer (nullptr for not found), an iterator (one-past-the-last for not found).</p>\n\n<p>In the standard library, a function which returns a reference is usually not for searching an element, and it is usually an exceptional case when there is not element to return. So it would just throw an exception, such as <code>std::map::at()</code></p>\n"}, {"tags": [], "owner": {"reputation": 1376, "user_id": 12460593, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UTQNM.jpg?s=128&g=1", "display_name": "Ajay Dabas", "link": "https://stackoverflow.com/users/12460593/ajay-dabas"}, "is_accepted": true, "score": 1, "last_activity_date": 1577256154, "creation_date": 1577256154, "answer_id": 59475879, "question_id": 59475652, "link": "https://stackoverflow.com/questions/59475652/for-a-search-algo-with-reference-return-type-what-should-be-the-default-return/59475879#59475879", "title": "For a search algo with reference return type, what should be the default return value?", "body": "<p>A good practice is to return the index/position where the element is found, instead of returning the found value. This is what <code>STL</code> does, it returns the position/iterator of the found element and if the element is not found, it returns the position 1 unit ahead of the last element which indicates that the element is not found in the container. You can return <code>len</code> if the element is not found in the array. For example,</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;fstream&gt;\nusing namespace std;\n\nstruct A {\n    int n;\n};\n\nint search_algo(A* AList, int len, int target) {\n    for (int i = 0; i &lt; len; i++)\n        if (AList[i].n == target)\n            return i;\n    return len;\n}\n\nint main(){\n    int _len = 4;\n    A _list[_len] = {6,7,8,9};\n    int idx1 = search_algo(_list,_len,7);\n    int idx2 = search_algo(_list,_len,10);\n    if(idx1==_len)\n        cout&lt;&lt;\"Element not found\"&lt;&lt;endl;\n    else\n        cout&lt;&lt;\"Element found at \"&lt;&lt;idx1&lt;&lt;\" index and it's value is \"&lt;&lt;_list[idx1].n&lt;&lt;endl;\n    if(idx2==_len)\n        cout&lt;&lt;\"Element not found\"&lt;&lt;endl;\n    else\n        cout&lt;&lt;\"Element found at \"&lt;&lt;idx2&lt;&lt;\" index and it's value is \"&lt;&lt;_list[idx2].n&lt;&lt;endl;\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>Element found at 1 index and it's value is 7\nElement not found\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 86, "user_id": 6164408, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5216a6d494120d3a469af0d344434d8a?s=128&d=identicon&r=PG&f=1", "display_name": "Kejia Cui", "link": "https://stackoverflow.com/users/6164408/kejia-cui"}, "is_accepted": false, "score": 1, "last_activity_date": 1577329732, "creation_date": 1577329732, "answer_id": 59483466, "question_id": 59475652, "link": "https://stackoverflow.com/questions/59475652/for-a-search-algo-with-reference-return-type-what-should-be-the-default-return/59483466#59483466", "title": "For a search algo with reference return type, what should be the default return value?", "body": "<p>Return index would be a good practice. But if you insist on reference, I think you can throw an exception at the end of search_algo.</p>\n"}], "owner": {"reputation": 194, "user_id": 7377442, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/107ad4bd58184d601abd591cd667acbc?s=128&d=identicon&r=PG&f=1", "display_name": "Jraxon", "link": "https://stackoverflow.com/users/7377442/jraxon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "accepted_answer_id": 59475879, "answer_count": 4, "score": 0, "last_activity_date": 1577329732, "creation_date": 1577253823, "question_id": 59475652, "link": "https://stackoverflow.com/questions/59475652/for-a-search-algo-with-reference-return-type-what-should-be-the-default-return", "title": "For a search algo with reference return type, what should be the default return value?", "body": "<p>Say I have an array, and I want to retrieve a reference to an element of this array.</p>\n\n<pre><code>struct A {\n    int n;\n}\n\nA&amp; search_algo(A* AList, int len, int target) {\n    for (int i = 0; i &lt; len; i++) {\n        if (AList[i].n == target) { return AList[i]; }\n    }\n    return what?   //problem comes here, target not in array, what should I return\n}\n</code></pre>\n\n<p>I would like to know what is the most conventional way to deal with it, or what return value makes the most sense. Like how can I best convey a message of \"your thing isn't here, go away\". Something similar to a <code>nullptr</code> would be great.</p>\n\n<p>My current solution is to initialize a object <code>A</code> on the stack and return it. Although I can compile just fine, but returning a reference to local variable is unsafe.</p>\n\n<p>I am thinking initializing the object on heap using <code>new</code> but that would be messy and I will have to deal with memory release. I don't like it.</p>\n"}, {"tags": ["c++", "algorithm", "sorting", "mergesort"], "comments": [{"owner": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "edited": false, "score": 2, "creation_date": 1577253041, "post_id": 59475543, "comment_id": 105129065, "body": "<code>countInversion</code> returns something. Should you do something with that when you make the recursive call?"}, {"owner": {"reputation": 210, "user_id": 12498994, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3f26c924e5845a4821556c2b4cb4aa0?s=128&d=identicon&r=PG&f=1", "display_name": "Xgh05t", "link": "https://stackoverflow.com/users/12498994/xgh05t"}, "reply_to_user": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "edited": false, "score": 1, "creation_date": 1577253250, "post_id": 59475543, "comment_id": 105129090, "body": "I&#39;m incrementing it in the else case, and since it&#39;s referenced, other calls get the updated value and first call gets the accumulated result, that&#39;s how I see it anyway, is that not what is happening? Or am I returning the last return, instead of first?"}, {"owner": {"reputation": 210, "user_id": 12498994, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3f26c924e5845a4821556c2b4cb4aa0?s=128&d=identicon&r=PG&f=1", "display_name": "Xgh05t", "link": "https://stackoverflow.com/users/12498994/xgh05t"}, "reply_to_user": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "edited": false, "score": 1, "creation_date": 1577254091, "post_id": 59475543, "comment_id": 105129189, "body": "Do you mean that my if statements don&#39;t return something, well I figured that this would do the right thing too as the if ends for all statements after the completion of the for loop"}, {"owner": {"reputation": 210, "user_id": 12498994, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3f26c924e5845a4821556c2b4cb4aa0?s=128&d=identicon&r=PG&f=1", "display_name": "Xgh05t", "link": "https://stackoverflow.com/users/12498994/xgh05t"}, "reply_to_user": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "edited": false, "score": 1, "creation_date": 1577254465, "post_id": 59475543, "comment_id": 105129246, "body": "I just tried using a global variable so I don&#39;t have to think about all of that, still did not work"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 1, "creation_date": 1577256083, "post_id": 59475543, "comment_id": 105129472, "body": "OK, I apologize, I see what you are attempting to do now. For the minimum test cases I have run with it from the examples at <a href=\"https://www.tutorialspoint.com/c-cplusplus-program-to-the-count-inversions-in-an-array-using-merge-sort\" rel=\"nofollow noreferrer\">Count Inversions in an array using Merge Sort?</a> and <a href=\"https://www.tutorialspoint.com/c-cplusplus-program-to-the-count-inversions-in-an-array-using-merge-sort\" rel=\"nofollow noreferrer\">Counting Inversions using Set in C++ STL</a> your code is providing the correct inversion count -- what cases is it failing on?"}, {"owner": {"reputation": 210, "user_id": 12498994, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3f26c924e5845a4821556c2b4cb4aa0?s=128&d=identicon&r=PG&f=1", "display_name": "Xgh05t", "link": "https://stackoverflow.com/users/12498994/xgh05t"}, "edited": false, "score": 0, "creation_date": 1577256576, "post_id": 59475543, "comment_id": 105129541, "body": "{2, 1, 3, 1, 2} and <a href=\"https://hr-testcases-us-east-1.s3.amazonaws.com/25392/input01.txt?AWSAccessKeyId=AKIAJ4WZFDFQTZRGO3QA&amp;Expires=1577263738&amp;Signature=VxHujTrnK31qLT3%2B7z52A7idShc%3D&amp;response-content-type=text%2Fplain\" rel=\"nofollow noreferrer\">link</a> Rest of the cases fail too, but I will have to unlock them, they&#39;re on hackerrank. (I am using long instead of int because of bigger values there as well)"}, {"owner": {"reputation": 210, "user_id": 12498994, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3f26c924e5845a4821556c2b4cb4aa0?s=128&d=identicon&r=PG&f=1", "display_name": "Xgh05t", "link": "https://stackoverflow.com/users/12498994/xgh05t"}, "edited": false, "score": 0, "creation_date": 1577257124, "post_id": 59475543, "comment_id": 105129633, "body": "test case format is number of cases, number of elements in a case, the elements, number of elements in case, the elements..."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1577258306, "post_id": 59475543, "comment_id": 105129839, "body": "Yes, remember hackerrank is all about the corner cases. so I wouldn&#39;t be surprised if they are providing all <code>{ 1, 1, 1, 1...}</code> and an intentional single inversion pair out of <code>10000</code> numbers to sort, etc...  With <code>{2, 1, 3, 1, 2}</code> you code gives 3 inversions, <code>{2, 3} {1, 3} &amp; {1, 2}</code> -- at least by my reading -- is that not correct?"}, {"owner": {"reputation": 210, "user_id": 12498994, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3f26c924e5845a4821556c2b4cb4aa0?s=128&d=identicon&r=PG&f=1", "display_name": "Xgh05t", "link": "https://stackoverflow.com/users/12498994/xgh05t"}, "edited": false, "score": 0, "creation_date": 1577259163, "post_id": 59475543, "comment_id": 105130017, "body": "Yes, but {1, 2} is present twice, and both are to be counted independently as they are on different indices so output should be 4"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1577259615, "post_id": 59475543, "comment_id": 105130095, "body": "OK, that makes sense, you have the <code>{1, 2}</code> pair L-&gt;R and the <code>{1, 2}</code> pair R-&gt;R."}, {"owner": {"reputation": 210, "user_id": 12498994, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3f26c924e5845a4821556c2b4cb4aa0?s=128&d=identicon&r=PG&f=1", "display_name": "Xgh05t", "link": "https://stackoverflow.com/users/12498994/xgh05t"}, "edited": false, "score": 0, "creation_date": 1577260116, "post_id": 59475543, "comment_id": 105130167, "body": "Yes, I do think my code is missing something on the LL or RR but I thought they are all broken down to single elements and compared in the merge step, but I can&#39;t figure out where this is happening or how to fix it, the code only counts split inversions, I&#39;m unable to find a fix."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 1, "creation_date": 1577260346, "post_id": 59475543, "comment_id": 105130201, "body": "Looking at your code, your are incrementing <code>l++</code> and <code>r++</code> in different <code>if..else</code> blocks. You seem to be missing the iteration over <code>r++</code> with <code>left[l] &lt; right[r]</code> that would pick up the <code>{1, 2}</code> L-&gt;R pair. I am no fan of geeks (any code that <code>#include&lt;bits&#47;stdc++.h&gt;</code> is just wrong) but <a href=\"https://www.geeksforgeeks.org/counting-inversions-using-set-in-c-stl/\" rel=\"nofollow noreferrer\">Counting Inversions using Set in C++ STL</a> using the <code>std::multiset</code> implementation is a pretty slick way to go. You can replace the <code>int arr[], int n</code> parameters with your single <code>std::vector&lt;int&gt;&amp; arr</code> and it works well."}, {"owner": {"reputation": 210, "user_id": 12498994, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3f26c924e5845a4821556c2b4cb4aa0?s=128&d=identicon&r=PG&f=1", "display_name": "Xgh05t", "link": "https://stackoverflow.com/users/12498994/xgh05t"}, "edited": false, "score": 0, "creation_date": 1577261344, "post_id": 59475543, "comment_id": 105130388, "body": "I just use that because it gets me everything, I don&#39;t have to bother with adding a particular header for everything, I don&#39;t know if it has downsides? I use g4g for reference while preparing, so I did pick it up from that habit from there heh. Also it does mergesort correctly, so I figured it should do this as well. I will look into that implementation too, it&#39;s just I was trying to figure out this one as well! Thanks for all the inputs"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1577262444, "post_id": 59475543, "comment_id": 105130620, "body": "It&#39;s it&#39;s not a &quot;merge-sort&quot;, but the <code>std::multiset</code> maintains sort order. If you need to sort the original vector as part of the problem, you can just <code>.clear()</code> the vector and then use a range-based <code>for</code> loop over the multiset and add the integers back in sorted order. If you don&#39;t need the sorted results, then the solution without the sort is trivial. <a href=\"https://paste.opensuse.org/18399837\" rel=\"nofollow noreferrer\">inversion count</a>"}, {"owner": {"reputation": 5362, "user_id": 2430669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2656586be6c90ef0666a391f1114628b?s=128&d=identicon&r=PG", "display_name": "Micha&#235;l Roy", "link": "https://stackoverflow.com/users/2430669/micha%c3%abl-roy"}, "edited": false, "score": 0, "creation_date": 1577262811, "post_id": 59475543, "comment_id": 105130694, "body": "You should not be working with copies of the two original arrays. At first you get the caller&#39;s data and a copy of it.  Then you split, but must work with views and make sure that when the shuffling occurs, it&#39;s in the original arrays.  That&#39;s very important"}, {"owner": {"reputation": 210, "user_id": 12498994, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3f26c924e5845a4821556c2b4cb4aa0?s=128&d=identicon&r=PG&f=1", "display_name": "Xgh05t", "link": "https://stackoverflow.com/users/12498994/xgh05t"}, "edited": false, "score": 0, "creation_date": 1577264324, "post_id": 59475543, "comment_id": 105131011, "body": "I meant my code merges correctly, and the set implementation times out"}, {"owner": {"reputation": 210, "user_id": 12498994, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3f26c924e5845a4821556c2b4cb4aa0?s=128&d=identicon&r=PG&f=1", "display_name": "Xgh05t", "link": "https://stackoverflow.com/users/12498994/xgh05t"}, "reply_to_user": {"reputation": 5362, "user_id": 2430669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2656586be6c90ef0666a391f1114628b?s=128&d=identicon&r=PG", "display_name": "Micha&#235;l Roy", "link": "https://stackoverflow.com/users/2430669/micha%c3%abl-roy"}, "edited": false, "score": 0, "creation_date": 1577264640, "post_id": 59475543, "comment_id": 105131078, "body": "@Micha&#235;lRoy You mean I should instead use indices and make modifications to original array always? I don&#39;t understand how one would implement that, without changing the code completely"}, {"owner": {"reputation": 5362, "user_id": 2430669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2656586be6c90ef0666a391f1114628b?s=128&d=identicon&r=PG", "display_name": "Micha&#235;l Roy", "link": "https://stackoverflow.com/users/2430669/micha%c3%abl-roy"}, "edited": false, "score": 0, "creation_date": 1577272333, "post_id": 59475543, "comment_id": 105132711, "body": "yes.  Just like the code that David C. Rankin was pointing to above (5th comment).  After all, it is a sort.  It does look like this implementation will not survive, I&#39;m afraid."}, {"owner": {"reputation": 210, "user_id": 12498994, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3f26c924e5845a4821556c2b4cb4aa0?s=128&d=identicon&r=PG&f=1", "display_name": "Xgh05t", "link": "https://stackoverflow.com/users/12498994/xgh05t"}, "reply_to_user": {"reputation": 5362, "user_id": 2430669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2656586be6c90ef0666a391f1114628b?s=128&d=identicon&r=PG", "display_name": "Micha&#235;l Roy", "link": "https://stackoverflow.com/users/2430669/micha%c3%abl-roy"}, "edited": false, "score": 0, "creation_date": 1577429134, "post_id": 59475543, "comment_id": 105167350, "body": "@Micha&#235;lRoy the next question is in-place mergesort (merge two sorted arrays without extra space), one step ahead heh, but I think I&#39;m gonna skip that for a while, seems a little too hard at this point. Is that kind of thing even worth doing?"}, {"owner": {"reputation": 5362, "user_id": 2430669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2656586be6c90ef0666a391f1114628b?s=128&d=identicon&r=PG", "display_name": "Micha&#235;l Roy", "link": "https://stackoverflow.com/users/2430669/micha%c3%abl-roy"}, "edited": false, "score": 0, "creation_date": 1577434105, "post_id": 59475543, "comment_id": 105168596, "body": "Yes it&#39;s worth doing.  And it comes for free.  And without these very costly allocations, which will make your code crawl to a halt when presented with 100k+ elements"}], "answers": [{"tags": [], "owner": {"reputation": 210, "user_id": 12498994, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3f26c924e5845a4821556c2b4cb4aa0?s=128&d=identicon&r=PG&f=1", "display_name": "Xgh05t", "link": "https://stackoverflow.com/users/12498994/xgh05t"}, "is_accepted": true, "score": 2, "last_activity_date": 1577531110, "last_edit_date": 1577531110, "creation_date": 1577364545, "answer_id": 59488725, "question_id": 59475543, "link": "https://stackoverflow.com/questions/59475543/cant-count-all-the-inversions-while-implementing-mergesort-code/59488725#59488725", "title": "Can&#39;t count all the inversions while implementing mergesort code", "body": "<p>I finally found a way to solve it using my code, I was sure some changes to the <code>if else</code> block or how I added the inversions would fix it, it just had to, that's the whole point of mergesort, that's why I was adamant about solving it this way, instead of just using another code. The issue was; I was doing <code>left[l] &lt; right[r]</code> which doesn't matter for merging if it's left or right, but does for inversions, just had to change it to <code>left[l] &lt;= right[r]</code>.</p>\n\n<pre><code>long countInversions(vector&lt;int&gt;&amp; arr, long&amp; inv) {\n    if(arr.size() &gt; 1) {\n        vector&lt;int&gt; left(arr.begin(), arr.begin() + arr.size()/2);\n        vector&lt;int&gt; right(arr.begin() + arr.size()/2, arr.end());\n\n        countInversions(left, inv);\n        countInversions(right, inv);\n\n        int l = 0; int r = 0;\n\n        for(int i = 0; i &lt; arr.size(); i++) {\n            if(r &gt;= right.size() || (l &lt; left.size() &amp;&amp; left[l] &lt;= right[r])) {\n                arr[i] = left[l++];\n                // inv += r;\n            } else {\n                arr[i] = right[r++];\n                inv += left.size() - l;\n            }\n        }\n    } return inv;\n}\n</code></pre>\n\n<p>A slightly better and more readable code would be:</p>\n\n<pre><code>long countInversions(vector&lt;int&gt;&amp; v) {\n    if(v.size() &lt;= 1) return 0;\n\n    vector&lt;int&gt; left(v.begin(), v.begin() + v.size()/2);\n    vector&lt;int&gt; right(v.begin() + v.size()/2, v.end());\n\n    long inv = countInversions(left) + countInversions(right);\n\n    int l = 0, r = 0;\n\n    for(int i = 0; i &lt; v.size(); i++) {\n        if(r &gt;= right.size() || (l &lt; left.size() &amp;&amp; left[l] &lt;= right[r])) {\n            v[i] = left[l++];\n            // inv += r;\n        } else {\n            v[i] = right[r++];\n            inv += left.size() - l;\n        }\n    }     \n    return inv;\n}\n</code></pre>\n"}], "owner": {"reputation": 210, "user_id": 12498994, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3f26c924e5845a4821556c2b4cb4aa0?s=128&d=identicon&r=PG&f=1", "display_name": "Xgh05t", "link": "https://stackoverflow.com/users/12498994/xgh05t"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 126, "favorite_count": 0, "accepted_answer_id": 59488725, "answer_count": 1, "score": 3, "last_activity_date": 1577531110, "creation_date": 1577252529, "last_edit_date": 1577292354, "question_id": 59475543, "link": "https://stackoverflow.com/questions/59475543/cant-count-all-the-inversions-while-implementing-mergesort-code", "title": "Can&#39;t count all the inversions while implementing mergesort code", "body": "<p>I've been trying to figure out how to get this code to count all inversions, but just can't seem to put my finger on it. To my understanding this code should count all of the inversions, but it fails many test cases, nudges in the right directions, or even the whole fix would be appreciated.</p>\n\n<p><strong>Code:</strong></p>\n\n<pre><code>int countInversion(vector&lt;int&gt;&amp; v, int&amp; inv) {\n    if(v.size() &gt; 1) {\n        vector&lt;int&gt; left(v.begin(), v.begin() + v.size()/2);\n        vector&lt;int&gt; right(v.begin() + v.size()/2, v.end());\n\n        countInversion(left, inv);\n        countInversion(right, inv);\n\n        int l = 0; int r = 0;\n\n        for(int i = 0; i &lt; v.size(); i++) {\n            if(r &gt;= right.size() || (l &lt; left.size() &amp;&amp; left[l] &lt; right[r])) {\n                v[i] = left[l++];\n            } else {\n                if(right[r] &lt; left[l]) inv += left.size() - l;\n                v[i] = right[r++];  \n            } \n        }\n    } return inv;\n}\n</code></pre>\n\n<p>The code that did work (I found it on the internet) has very low \nreadability can someone help me understand it? and more importantly, point to me what my code exactly missed on and if it's possible to rectify my code to count properly? Thank you!</p>\n\n<p><strong>Code 2:</strong></p>\n\n<pre><code>long long ans = 0;\n\nvoid mergei(int a[],int i,int j) {\n    int ni = ((i+j)/2) + 1, nj = j + 1;\n    int s = i;\n    int* arr = new int [j - i + 1];\n    j = ni;\n    int k = 0;\n\n    while(i &lt; ni &amp;&amp; j &lt; nj) {\n        if(a[i] &lt;= a[j]) {\n            arr[k] = a[i++];\n        } else {\n            arr[k] = a[j++];\n            ans += (ni - i);\n        } k++;\n    }\n\n    for(; i &lt; ni; i++, k++) arr[k] = a[i];\n    for(; j &lt; nj; j++, k++) arr[k] = a[j];\n    for(k = 0; s &lt; nj; s++, k++) a[s] = arr[k];\n    delete [] arr;\n}\n\nvoid m_sort(int a[],int i,int j) {\n    if(i &lt; j) {\n        m_sort(a, i, (i+j)/2);\n        m_sort(a, ((i+j)/2) + 1, j);\n        mergei(a, i, j);\n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "windows", "opencv", "visual-studio-code"], "comments": [{"owner": {"reputation": 26196, "user_id": 1841194, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/e65b668131c96399c25c6fae3fff8da5?s=128&d=identicon&r=PG&f=1", "display_name": "frogatto", "link": "https://stackoverflow.com/users/1841194/frogatto"}, "edited": false, "score": 0, "creation_date": 1577278806, "post_id": 59475517, "comment_id": 105134204, "body": "Does this answer your question? <a href=\"https://stackoverflow.com/questions/37522462/visual-studio-code-includepath\">Visual Studio Code includePath</a>"}, {"owner": {"reputation": 27, "user_id": 8578271, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh5.googleusercontent.com/-Qun7FQGb40w/AAAAAAAAAAI/AAAAAAAABcc/phZhw-zKCs8/photo.jpg?sz=128", "display_name": "Tim Chang", "link": "https://stackoverflow.com/users/8578271/tim-chang"}, "reply_to_user": {"reputation": 26196, "user_id": 1841194, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/e65b668131c96399c25c6fae3fff8da5?s=128&d=identicon&r=PG&f=1", "display_name": "frogatto", "link": "https://stackoverflow.com/users/1841194/frogatto"}, "edited": false, "score": 0, "creation_date": 1577280010, "post_id": 59475517, "comment_id": 105134504, "body": "no i have followed he step that post still can&#39;t find the lib"}, {"owner": {"reputation": 1527, "user_id": 5832272, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s7clX.png?s=128&g=1", "display_name": "MH304", "link": "https://stackoverflow.com/users/5832272/mh304"}, "edited": false, "score": 0, "creation_date": 1577558290, "post_id": 59475517, "comment_id": 105199319, "body": "Is the path set for both release and debug mode?"}], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 4581136, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-tj5QqrmeJMg/AAAAAAAAAAI/AAAAAAAAAEY/zJlAcxBzF2U/photo.jpg?sz=128", "display_name": "Ying Zhou", "link": "https://stackoverflow.com/users/4581136/ying-zhou"}, "is_accepted": false, "score": 0, "last_activity_date": 1602135402, "creation_date": 1602135402, "answer_id": 64256387, "question_id": 59475517, "link": "https://stackoverflow.com/questions/59475517/vs-code-cant-include-opencv-headers/64256387#64256387", "title": "VS Code can&#39;t include OpenCV headers", "body": "<p>is &quot;D:\\opencv\\build\\include&quot; your opencv installed path? you can cd to that directory and check if &quot;opencv2/opencv.hpp&quot; exists. The point is to find where &quot;opencv2/opencv.hpp&quot; locates in your system and put that path to the c_cpp_properties.json &quot;includePath&quot;.</p>\n"}], "owner": {"reputation": 27, "user_id": 8578271, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh5.googleusercontent.com/-Qun7FQGb40w/AAAAAAAAAAI/AAAAAAAABcc/phZhw-zKCs8/photo.jpg?sz=128", "display_name": "Tim Chang", "link": "https://stackoverflow.com/users/8578271/tim-chang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 709, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1602135402, "creation_date": 1577252287, "last_edit_date": 1577278519, "question_id": 59475517, "link": "https://stackoverflow.com/questions/59475517/vs-code-cant-include-opencv-headers", "title": "VS Code can&#39;t include OpenCV headers", "body": "<p>I got some problem with using OpenCV on VS Code for C++.</p>\n\n<p>I can compile the C code but when I include the OpenCV libraries, it always displays the following error message: </p>\n\n<blockquote>\n  <p>fatal error: opencv2/opencv.hpp: No such file or directory</p>\n</blockquote>\n\n<p>My VS Code version is 1.41.1 (user setup).</p>\n\n<p>I downloaded OpenCV 3.4.1 from this site:<br>\n<a href=\"https://github.com/huihut/OpenCV-MinGW-Build\" rel=\"nofollow noreferrer\">https://github.com/huihut/OpenCV-MinGW-Build</a></p>\n\n<p>The environment path in my computer is:</p>\n\n<p><img src=\"https://i.imgur.com/Xc6CskV.png\" alt=\"Text\"></p>\n\n<p>The path to OpenCV is D://opencv//build.</p>\n\n<p>Here are my configurations for using OpenCV in VS Code:</p>\n\n<p>launch.json</p>\n\n<pre><code>{\n    \"version\": \"0.2.0\",\n    \"configurations\": [\n        {\n            \"name\": \"g++.exe build and debug active file\",\n            \"type\": \"cppdbg\",\n            \"request\": \"launch\",\n            \"program\": \"${fileDirname}\\\\${fileBasenameNoExtension}.exe\",\n            \"args\": [],\n            \"stopAtEntry\": false,\n            \"cwd\": \"${workspaceFolder}\",\n            \"environment\": [],\n            \"externalConsole\": false,\n            \"MIMode\": \"gdb\",\n            \"miDebuggerPath\": \"C:\\\\Program Files\\\\mingw-w64\\\\x86_64-8.1.0-posix-seh-rt_v6-rev0\\\\mingw64\\bin\\\\mingw64\\\\bin\\\\gdb.exe\",\n            \"setupCommands\": [\n                {\n                    \"description\": \"\u555f\u7528 gdb \u7684\u7f8e\u5316\u986f\u793a\",\n                    \"text\": \"-enable-pretty-printing\",\n                    \"ignoreFailures\": true\n                }\n            ],\n            \"preLaunchTask\": \"g++.exe build active file\"\n        }\n    ]\n}\n</code></pre>\n\n<p>task.json</p>\n\n<pre><code>{\n    \"version\": \"2.0.0\",\n    \"tasks\": [\n        {\n            \"label\": \"build\",\n            \"type\": \"shell\",\n            \"command\": \"g++\",\n            \"args\": [\n                \"-g\",\n                \"${file}\",\n                \"-o\",\n                \"${fileBasenameNoExtension}.exe\",\n                \"-I\",\n                \"D:\\\\opencv\\\\build\\\\include\",\n                \"-L\",\n                \"D:\\\\opencv\\\\build\\\\x64\\\\mingw\\\\bin\",\n                \"-l\",\n                \"libopencv_calib3d341\",\n                \"-llibopencv_core341\",\n                \"-llibopencv_dnn341\",\n                \"-llibopencv_features2d341\",\n                \"-llibopencv_flann341\",\n                \"-llibopencv_highgui341\",\n                \"-llibopencv_imgcodecs341\",\n                \"-llibopencv_imgproc341\",\n                \"-llibopencv_ml341\",\n                \"-llibopencv_objdetect341\",\n                \"-llibopencv_photo341\",\n                \"-llibopencv_shape341\",\n                \"-llibopencv_stitching341\",\n                \"-llibopencv_superres341\",\n                \"-llibopencv_video341\",\n                \"-llibopencv_videoio341\",\n                \"-llibopencv_videostab341\"\n            ],\n            \"group\": {\n                \"kind\": \"build\",\n                \"isDefault\": true\n            }\n        },\n        {\n            \"type\": \"shell\",\n            \"label\": \"g++.exe build active file\",\n            \"command\": \"C:\\\\Program Files\\\\mingw-w64\\\\x86_64-8.1.0-posix-seh-rt_v6-rev0\\\\mingw64\\\\bin\\\\g++.exe\",\n            \"args\": [\n                \"-g\",\n                \"${file}\",\n                \"-o\",\n                \"${fileDirname}\\\\${fileBasenameNoExtension}.exe\"\n            ],\n            \"options\": {\n                \"cwd\": \"C:\\\\Program Files\\\\mingw-w64\\\\x86_64-8.1.0-posix-seh-rt_v6-rev0\\\\mingw64\\\\bin\"\n            },\n            \"problemMatcher\": [\n                \"$gcc\"\n            ],\n            \"group\": \"build\"\n        }\n    ]\n}\n</code></pre>\n\n<p>c_cpp_properties.json</p>\n\n<pre><code>{\n    \"configurations\": [\n        {\n            \"name\": \"Win32\",\n            \"compilerPath\": \"C:\\\\Program Files\\\\mingw-w64\\\\x86_64-8.1.0-posix-seh-rt_v6-rev0\\\\mingw64\\\\bin\\\\x86_64-w64-mingw32-g++.exe\",\n            \"includePath\": [\n                \"${workspaceRoot}\",\n                \"C:\\\\Program Files\\\\mingw-w64\\\\x86_64-8.1.0-posix-seh-rt_v6-rev0\\\\mingw64\\\\include\",                \n                \"C:\\\\Program Files\\\\mingw-w64\\\\x86_64-8.1.0-posix-seh-rt_v6-rev0\\\\mingw64\\\\lib\\\\gcc\\\\x86_64-w64-mingw32\\\\8.1.0\\\\include\",\n                \"C:\\\\Program Files\\\\mingw-w64\\\\x86_64-8.1.0-posix-seh-rt_v6-rev0\\\\mingw64\\\\lib\\\\gcc\\\\x86_64-w64-mingw32\\\\8.1.0\\\\include\\\\c++\",\n                \"D:\\\\opencv\\\\build\\\\include\"\n            ],\n            \"defines\": [\n                \"_DEBUG\",\n                \"UNICODE\",\n                \"__GNUC__=5\",\n                \"__cdecl=__attribute__((__cdecl__))\"\n            ],\n            \"intelliSenseMode\": \"clang-x64\",\n            \"browse\": {\n                \"path\": [\n                    \"${workspaceRoot}\",\n                    \"C:\\\\Program Files\\\\mingw-w64\\\\x86_64-8.1.0-posix-seh-rt_v6-rev0\\\\mingw64\\\\include\",                    \n                    \"C:\\\\Program Files\\\\mingw-w64\\\\x86_64-8.1.0-posix-seh-rt_v6-rev0\\\\mingw64\\\\lib\\\\gcc\\\\x86_64-w64-mingw32\\\\8.1.0\\\\include\",                \n                    \"C:\\\\Program Files\\\\mingw-w64\\\\x86_64-8.1.0-posix-seh-rt_v6-rev0\\\\mingw64\\\\lib\\\\gcc\\\\x86_64-w64-mingw32\\\\8.1.0\\\\include\\\\c++\",                    \n                    \"D:\\\\opencv\\\\build\\\\include\"\n                ],\n                \"limitSymbolsToIncludedHeaders\": true,\n                \"databaseFilename\": \"\"\n            }\n        }\n    ],\n    \"version\": 4\n}\n</code></pre>\n"}, {"tags": ["android", "c++", "java-native-interface"], "comments": [{"owner": {"reputation": 38430, "user_id": 429063, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fd38783123814dee889d28c991e56fb?s=128&d=identicon&r=PG", "display_name": "Chris Stratton", "link": "https://stackoverflow.com/users/429063/chris-stratton"}, "edited": false, "score": 0, "creation_date": 1577250928, "post_id": 59475306, "comment_id": 105128820, "body": "While C++ breaks some norms, in a general sense header files do not define (as in provide) function implementations.  Object files fed to your link step, or .so&#39;s loaded at runtime are what do that."}, {"owner": {"reputation": 102, "user_id": 7369226, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-V0Cx7r4sVIE/AAAAAAAAAAI/AAAAAAAAI9Y/vb5JRd4tfyw/photo.jpg?sz=128", "display_name": "anu saini", "link": "https://stackoverflow.com/users/7369226/anu-saini"}, "reply_to_user": {"reputation": 38430, "user_id": 429063, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fd38783123814dee889d28c991e56fb?s=128&d=identicon&r=PG", "display_name": "Chris Stratton", "link": "https://stackoverflow.com/users/429063/chris-stratton"}, "edited": false, "score": 0, "creation_date": 1577251949, "post_id": 59475306, "comment_id": 105128937, "body": "can you pelase explain what exactly i have to do so that it can help .."}], "owner": {"reputation": 102, "user_id": 7369226, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-V0Cx7r4sVIE/AAAAAAAAAAI/AAAAAAAAI9Y/vb5JRd4tfyw/photo.jpg?sz=128", "display_name": "anu saini", "link": "https://stackoverflow.com/users/7369226/anu-saini"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 44, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1577270392, "creation_date": 1577249190, "last_edit_date": 1577264679, "question_id": 59475306, "link": "https://stackoverflow.com/questions/59475306/use-of-undeclared-variable-in-cpp-file-android", "title": "use of undeclared variable in cpp file android", "body": "<p>I am calling this method from my main Activity </p>\n\n<pre><code>extern \"C\"\nJNIEXPORT jstring JNICALL\nJava_systems_kestrel_aerovision_datapackets_PacketBuilder_uBloxOnline(JNIEnv *env, jobject thiz,\n                                                                      jdouble lat, jdouble lng,\n                                                                      jdouble altitude) {\n    //        dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{\n    // isDownloadingAssist = true;\n   MGA_API_RESULT result = mgaInit();\n</code></pre>\n\n<p>then <code>MGA_API_RESULT</code> and <code>mgaInit()</code> method is defined in another <code>libmga.cpp</code> file </p>\n\n<pre><code>MGA_API_RESULT mgaInit(void)\n{\n\n    assert(s_sessionState == MGA_IDLE);\n#ifdef WIN32\n    InitializeCriticalSection(&amp;s_mgaLock);\n#else // WIN32\n    pthread_mutex_init(&amp;s_mgaLock, NULL);\n#endif // WIN32\n    MGA_API_OK;\n\n    return MGA_API_OK;\n}\n</code></pre>\n\n<p>header files I have already included. Now it is giving me this error of undefined variable when I execute this line:</p>\n\n<pre><code>MGA_API_RESULT result = mgaInit();\n</code></pre>\n"}, {"tags": ["c++", "visual-studio", "vector", "struct"], "comments": [{"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 4, "creation_date": 1577245858, "post_id": 59475059, "comment_id": 105128284, "body": "No, the above is not valid. Whatever this &quot;vector&quot; is, it&#39;s not defined, hence your compiler&#39;s complaint. Perhaps you meant to <code>#include &lt;vector&gt;</code> beforehand, and then declare a <code>std::vector</code> class member?"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1577255601, "post_id": 59475059, "comment_id": 105129410, "body": "Also, there is no need for <code>typedef struct</code> in a C++ program.  All you need is <code>struct CardInfoEx;</code> for example.  Second, hopefully your codebase that uses these <code>structs</code> do not do something destructive like <code>memset</code> or <code>memcpy</code> to or from instances of these structs.  If so, your program has undefined behavior (I have seen that type of coding before, where the coder still believes they&#39;re dealing with <code>C</code> structs, and erroneously uses <code>C</code> functions on them)."}], "owner": {"reputation": 11, "user_id": 5128200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03d79cdb0986ac44c53067ea2dc7f9c7?s=128&d=identicon&r=PG&f=1", "display_name": "SourceX", "link": "https://stackoverflow.com/users/5128200/sourcex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 52, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1577245618, "creation_date": 1577245618, "question_id": 59475059, "link": "https://stackoverflow.com/questions/59475059/visual-studio-not-allowing-vector-in-struct", "title": "Visual Studio Not Allowing Vector in Struct", "body": "<p>I'm trying to include a vector in a struct.  Here is my relevant code:</p>\n\n<pre><code>typedef struct {\n    __int64 s;\n    __int64 c;\n    __int64 h = 0; \n    __int64 i = 0;\n    __int64 s_h;\n    __int64 n_ss;\n    __int64 n_ss_hh;\n    __int64 min_hh = 0;\n    __int64 min_cc;\n    bool drawn = false;\n} CardInfoEx;\n\ntypedef struct {\n    __int64 ss;\n    __int64 cc;\n    __int64 hh;\n    __int64 n_ss;\n    ULONG_PTR count;\n    ULONG_PTR mcount;\n    vector&lt;CardInfoEx&gt; cards;\n} DrawInfoEx;\n</code></pre>\n\n<p>Visual Studio gives me an error C2143 \"syntax error: missing ';' before '&lt;'\" when I try to compile this.  I saw another post on this forum saying this was perfectly valid.  Is the above actually valid?</p>\n"}, {"tags": ["c++", "c++11", "compiler-errors", "move-semantics", "overload-resolution"], "comments": [{"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 0, "creation_date": 1577245214, "post_id": 59474989, "comment_id": 105128209, "body": "In your example, <code>T</code> is <code>const int&amp;</code>, not <code>int&amp;</code>."}, {"owner": {"reputation": 1606, "user_id": 6719992, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uHsSI.jpg?s=128&g=1", "display_name": "daoliker", "link": "https://stackoverflow.com/users/6719992/daoliker"}, "reply_to_user": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 0, "creation_date": 1577245366, "post_id": 59474989, "comment_id": 105128225, "body": "@eerorika The error is same when <code>T</code> is <code>int&amp;</code>."}], "answers": [{"comments": [{"owner": {"reputation": 1606, "user_id": 6719992, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uHsSI.jpg?s=128&g=1", "display_name": "daoliker", "link": "https://stackoverflow.com/users/6719992/daoliker"}, "edited": false, "score": 0, "creation_date": 1577249431, "post_id": 59475080, "comment_id": 105128630, "body": "So It means that I instantiate a class <code>Message&lt;int&amp;&gt;</code> rather than <code>Message&lt;int&gt;</code> in statement <code>make_message(a)</code> ---&gt; <code>new Message&lt;T&gt;{std::forward&lt;T&gt;(data)};</code>?"}, {"owner": {"reputation": 20722, "user_id": 1625187, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/6vWOZ.jpg?s=128&g=1", "display_name": "Evg", "link": "https://stackoverflow.com/users/1625187/evg"}, "reply_to_user": {"reputation": 1606, "user_id": 6719992, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uHsSI.jpg?s=128&g=1", "display_name": "daoliker", "link": "https://stackoverflow.com/users/6719992/daoliker"}, "edited": false, "score": 1, "creation_date": 1577262924, "post_id": 59475080, "comment_id": 105130721, "body": "@daoliker, you instantiate <code>Message&lt;const int&amp;&gt;</code>."}], "tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": true, "score": 4, "last_activity_date": 1577248062, "last_edit_date": 1577248062, "creation_date": 1577245914, "answer_id": 59475080, "question_id": 59474989, "link": "https://stackoverflow.com/questions/59474989/why-constructor-messageconst-t-data-is-conflict-with-messaget-data-when-t/59475080#59475080", "title": "Why constructor Message(const T&amp; data) is conflict with Message(T&amp;&amp; data) when T = int&amp;?", "body": "<blockquote>\n  <p>So why constructor Message(const T&amp; data) is duplicate with Message(T&amp;&amp; data) when T = int&amp;?</p>\n</blockquote>\n\n<p>Because of reference collapsing rules.</p>\n\n<p>There is no such thing as a reference to reference. When <code>T</code> is an lvalue reference - let's say <code>int &amp;</code>, then syntactically <code>T &amp;</code> appears to be a <code>int &amp; &amp;</code>. But such type does not exist. The rules of the language say that in such case <code>T &amp;</code> collapses into <code>int &amp;</code>.</p>\n\n<p>Similarly, there is no such thing as const reference (not to be confused with reference to const, which people sometimes mean when they say const reference). When <code>T</code> is an lvalue reference - let's say <code>int&amp;</code>, then syntactically <code>T const</code> (same as <code>const T</code>) appears to be a <code>int&amp; const</code> (not to be confused with <code>int const &amp;</code>, which is same as <code>const int &amp;</code>). But such type does not exist. The rules of the language say that in such case <code>T const</code> collapses into <code>int &amp;</code>.</p>\n\n<p>C++11 introduced rvalue references, which brings us new collapsing rules. In short, \"rvalue reference to rvalue reference\" collpses into rvalue reference, but \"lvalue reference to any reference\", as well as \"any reference to lvalue reference\" collapse into lvalue reference. This rule is part of the magic behind how forwarding references work.</p>\n\n<p>As such, given <code>T = int &amp;</code>, these declare the same function:</p>\n\n<pre><code>explicit Message(T&amp;&amp; data)      // type of argument is int &amp;\nexplicit Message(const T&amp; data) // type of argument is int &amp;\n</code></pre>\n\n<hr>\n\n<p>Bonus: There are also collapsing rules for non-references: There is no such thing as const const type. As such, given <code>const T</code> where <code>T</code> is <code>const int</code>, then it collapses into <code>const int</code>. Same goes for <code>volatile</code>.</p>\n"}], "owner": {"reputation": 1606, "user_id": 6719992, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uHsSI.jpg?s=128&g=1", "display_name": "daoliker", "link": "https://stackoverflow.com/users/6719992/daoliker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 102, "favorite_count": 0, "accepted_answer_id": 59475080, "answer_count": 1, "score": 4, "last_activity_date": 1577248062, "creation_date": 1577244577, "last_edit_date": 1592644375, "question_id": 59474989, "link": "https://stackoverflow.com/questions/59474989/why-constructor-messageconst-t-data-is-conflict-with-messaget-data-when-t", "title": "Why constructor Message(const T&amp; data) is conflict with Message(T&amp;&amp; data) when T = int&amp;?", "body": "<pre class=\"lang-cpp prettyprint-override\"><code>template &lt;typename T&gt;\nstruct Message {\n    T data;\n    explicit Message(T&amp;&amp; data) : data(std::move(data)) {\n        std::cout &lt;&lt; &quot;Move data&quot; &lt;&lt; std::endl;\n    }\n\n    explicit Message(const T&amp; data) : data(data) {\n        std::cout &lt;&lt; &quot;Copy data&quot; &lt;&lt; std::endl;\n    }\n};\n\ntemplate &lt;typename T&gt;\ninline Message&lt;T&gt;*\nmakeMessage(T&amp;&amp; data) {\n    return new Message&lt;T&gt;{std::forward&lt;T&gt;(data)};\n}\n\n\nint main() {\n    const int a = 1024;\n    auto *copy_msg = makeMessage(a);\n}\n</code></pre>\n<p>There is a template class <code>Message</code> that has two constructors: <code>Message(T&amp;&amp; data)</code> and <code>Message(const T&amp; data)</code>, And I got the following compile-time errors when I called <code>makeMessage(a)</code>.</p>\n<blockquote>\n<p>error: multiple overloads of 'Message' instantiate to the same signature 'void (const int &amp;&amp;)'</p>\n<blockquote>\n<p>explicit Message(const T&amp; data) : data(data) {</p>\n</blockquote>\n<p>previous declaration is here</p>\n<blockquote>\n<p>explicit Message(T&amp;&amp; data) : data(std::move(data)) {</p>\n</blockquote>\n</blockquote>\n<p>However, It works when I called <code>make_message(1024)</code> and <code>make_message(std::move(a))</code>.</p>\n<p>So why constructor <code>Message(const T&amp; data)</code> is duplicate with <code>Message(T&amp;&amp; data)</code> when T = int&amp;?</p>\n"}, {"tags": ["c++", "arrays", "string", "utf-8"], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 12349589, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-s_X61Fo04Uc/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdOG8o1dFjojMUK-t1dJlPEFurP6A/photo.jpg?sz=128", "display_name": "Ha\u0309i Phu\u0301 Vu\u0303", "link": "https://stackoverflow.com/users/12349589/ha%cc%89i-phu%cc%81-vu%cc%83"}, "edited": false, "score": 0, "creation_date": 1577245720, "post_id": 59474947, "comment_id": 105128271, "body": "How to compare returns true between string &quot;Kil&#243;metro 0.72&quot; when removing quotes and the string Kil&#243;metro 0.72? Thanks"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1577261415, "post_id": 59474947, "comment_id": 105130408, "body": "@xuhdev Maybe I&#39;m missing something, but your proposed code looks the same as the OP&#39;s problem code. But I <a href=\"https://ideone.com/veaUJu\" rel=\"nofollow noreferrer\">tested it</a> and it does produce a different result. Please elaborate why your answer works where the OP&#39;s code does not. Are you using different Unicode characters in your string literals?"}, {"owner": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 2, "creation_date": 1577262183, "post_id": 59474947, "comment_id": 105130577, "body": "@RemyLebeau OP&#39;s original version has a composite character in <code>s2</code> (<b>latin small letter o</b> + <b>combining acute accent</b>), the version above is simply <b>latin small letter o with acute</b>. Probably the answerer should have explained this rather than just posting mysteriously working code!"}, {"owner": {"reputation": 131156, "user_id": 235698, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KjvlE.png?s=128&g=1", "display_name": "Mark Tolonen", "link": "https://stackoverflow.com/users/235698/mark-tolonen"}, "edited": false, "score": 2, "creation_date": 1577265047, "post_id": 59474947, "comment_id": 105131155, "body": "Note the &quot;offset of the accent&quot; is browser/font-dependent.  The OP&#39;s strings look the same in my browser."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 131156, "user_id": 235698, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KjvlE.png?s=128&g=1", "display_name": "Mark Tolonen", "link": "https://stackoverflow.com/users/235698/mark-tolonen"}, "edited": false, "score": 0, "creation_date": 1577288949, "post_id": 59474947, "comment_id": 105136544, "body": "@MarkTolonen same in mine, too"}], "tags": [], "owner": {"reputation": 6351, "user_id": 1150462, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/092b20f85f41e56494e4d1fabcb7099c?s=128&d=identicon&r=PG", "display_name": "xuhdev", "link": "https://stackoverflow.com/users/1150462/xuhdev"}, "is_accepted": false, "score": 1, "last_activity_date": 1577243994, "creation_date": 1577243994, "answer_id": 59474947, "question_id": 59474929, "link": "https://stackoverflow.com/questions/59474929/compare-unicode-string-with-c-sign/59474947#59474947", "title": "Compare unicode string with c ++ sign?", "body": "<p>Because your two strings are not the same. (Note the offset of the accent over <code>o</code> in <code>s2</code>.) This one works:</p>\n\n<pre><code>#include &lt;string&gt;\n#include &lt;iostream&gt;\nint main()\n{\n  using namespace std;\n  string s1=\"\\\"Kil\u00f3metro 0,72\\\"\";\n  s1=s1.substr(1,s1.length()-2);\n  cout&lt;&lt;s1&lt;&lt;endl;\n  string s2=\"Kil\u00f3metro 0,72\";\n  cout&lt;&lt;s2&lt;&lt;endl;\n  if(s1==s2) cout&lt;&lt;1;\n  else cout&lt;&lt;0;\n  return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 31, "user_id": 12349589, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-s_X61Fo04Uc/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdOG8o1dFjojMUK-t1dJlPEFurP6A/photo.jpg?sz=128", "display_name": "Ha\u0309i Phu\u0301 Vu\u0303", "link": "https://stackoverflow.com/users/12349589/ha%cc%89i-phu%cc%81-vu%cc%83"}, "edited": false, "score": 0, "creation_date": 1577245666, "post_id": 59475016, "comment_id": 105128266, "body": "How to compare returns true between string &quot;Kil&#243;metro 0.72&quot; when removing quotes and the string Kil&#243;metro 0.72? Thanks"}], "tags": [], "owner": {"reputation": 1591, "user_id": 7264980, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6251945f2fe3a58c482788f1cd20fa9?s=128&d=identicon&r=PG", "display_name": "Anatoliy R", "link": "https://stackoverflow.com/users/7264980/anatoliy-r"}, "is_accepted": false, "score": 0, "last_activity_date": 1577244900, "creation_date": 1577244900, "answer_id": 59475016, "question_id": 59474929, "link": "https://stackoverflow.com/questions/59474929/compare-unicode-string-with-c-sign/59475016#59475016", "title": "Compare unicode string with c ++ sign?", "body": "<p>Add this code at the end:</p>\n\n<pre><code>for(int i = 0; i &lt; s1.length(); i++) {\n    cout &lt;&lt; (int)(unsigned char)s1[i] &lt;&lt; \" \" &lt;&lt; (int)(unsigned char)s2[i] &lt;&lt; endl;\n}\n</code></pre>\n\n<p>It will help you.</p>\n"}, {"tags": [], "owner": {"reputation": 131156, "user_id": 235698, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KjvlE.png?s=128&g=1", "display_name": "Mark Tolonen", "link": "https://stackoverflow.com/users/235698/mark-tolonen"}, "is_accepted": false, "score": 1, "last_activity_date": 1577264949, "creation_date": 1577264949, "answer_id": 59476824, "question_id": 59474929, "link": "https://stackoverflow.com/questions/59474929/compare-unicode-string-with-c-sign/59476824#59476824", "title": "Compare unicode string with c ++ sign?", "body": "<p>Your strings are visually equivalent, but one uses ASCII <code>o</code> with combining accent (two Unicode code points U+006F,U+0301) and one uses <code>\u00f3</code> (one Unicode code point U+00F3).</p>\n\n<p>You need to <a href=\"http://userguide.icu-project.org/transforms/normalization\" rel=\"nofollow noreferrer\">normalize</a> the strings using a library like <a href=\"http://site.icu-project.org/\" rel=\"nofollow noreferrer\">ICU</a> to compare them correctly, or at least with your example, type the combining character the same way in both string constants.</p>\n"}], "owner": {"reputation": 31, "user_id": 12349589, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-s_X61Fo04Uc/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdOG8o1dFjojMUK-t1dJlPEFurP6A/photo.jpg?sz=128", "display_name": "Ha\u0309i Phu\u0301 Vu\u0303", "link": "https://stackoverflow.com/users/12349589/ha%cc%89i-phu%cc%81-vu%cc%83"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 233, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1577264949, "creation_date": 1577243674, "question_id": 59474929, "link": "https://stackoverflow.com/questions/59474929/compare-unicode-string-with-c-sign", "title": "Compare unicode string with c ++ sign?", "body": "<p>I want the result after comparing is 1 because the two strings are exactly the same, I don't understand why this is 0 and how to handle it?</p>\n\n<pre><code>string s1=\"\\\"Kil\u00f3metro 0,72\\\"\";\ns1=s1.substr(1,s1.length()-2);\ncout&lt;&lt;s1&lt;&lt;endl;\nstring s2=\"Kilo\u0301metro 0,72\";\ncout&lt;&lt;s2&lt;&lt;endl;\nif(s1==s2) cout&lt;&lt;1;\nelse cout&lt;&lt;0;\n</code></pre>\n"}, {"tags": ["c++", "vector", "stl"], "comments": [{"owner": {"reputation": 141, "user_id": 7286877, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70fbaa62b70fa90d716a1ff1ecc32468?s=128&d=identicon&r=PG&f=1", "display_name": "vsh", "link": "https://stackoverflow.com/users/7286877/vsh"}, "edited": false, "score": 1, "creation_date": 1577239789, "post_id": 59474672, "comment_id": 105127640, "body": "end() is an element after the last one, dereference it has no sense"}, {"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 1, "creation_date": 1577239855, "post_id": 59474672, "comment_id": 105127648, "body": "<code>*test.end()</code> is Undefined Behaviour."}, {"owner": {"reputation": 137, "user_id": 10938150, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-amoM7OWOSzg/AAAAAAAAAAI/AAAAAAAAACk/M6rG9dzM1Og/photo.jpg?sz=128", "display_name": "AndiChin", "link": "https://stackoverflow.com/users/10938150/andichin"}, "edited": false, "score": 0, "creation_date": 1577239870, "post_id": 59474672, "comment_id": 105127649, "body": "I&#39;m just trying to prove that end did in fact change, because sometimes I may want to compare them"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 3, "creation_date": 1577240038, "post_id": 59474672, "comment_id": 105127664, "body": "You can&#39;t &quot;prove&quot; anything by dereferencing an undereferenceable iterator."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 1, "creation_date": 1577240098, "post_id": 59474672, "comment_id": 105127671, "body": "<i>&quot;sometimes I may want to compare them&quot;</i> That doesn&#39;t make sense either; if you were to cache the result of <code>test.end()</code> before the <code>erase</code> and use it after the <code>erase</code>, you&#39;d again have undefined behaviour (even with a <code>==</code>) because the iterator would have been invalidated. What is your <i>real</i> question?"}, {"owner": {"reputation": 137, "user_id": 10938150, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-amoM7OWOSzg/AAAAAAAAAAI/AAAAAAAAACk/M6rG9dzM1Og/photo.jpg?sz=128", "display_name": "AndiChin", "link": "https://stackoverflow.com/users/10938150/andichin"}, "edited": false, "score": 0, "creation_date": 1577240117, "post_id": 59474672, "comment_id": 105127673, "body": "but end becomes defined after I erase an element; it becomes 10, how do I stop this from happening?"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1577240181, "post_id": 59474672, "comment_id": 105127682, "body": "No, it does not. The &quot;value&quot; you see is unspecified and meaningless. Why do you think you need to &quot;stop it from happening&quot;? What are you <i>really</i> trying to do?"}, {"owner": {"reputation": 137, "user_id": 10938150, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-amoM7OWOSzg/AAAAAAAAAAI/AAAAAAAAACk/M6rG9dzM1Og/photo.jpg?sz=128", "display_name": "AndiChin", "link": "https://stackoverflow.com/users/10938150/andichin"}, "edited": false, "score": 0, "creation_date": 1577240254, "post_id": 59474672, "comment_id": 105127696, "body": "I got 61809 for the first output, and 10 for the second output"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1577242648, "post_id": 59474672, "comment_id": 105127943, "body": "@WhalalalalalalaCHen -- FYI, your code instantly produces an <code>assert()</code> dialog and stops dead when <code>test.end()</code> is dereferenced using Visual Studio.  Thus no output is produced, only a terminated program.  This is what others have tried to state to you -- dereferencing <code>end()</code> is bogus."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1577242753, "post_id": 59474672, "comment_id": 105127960, "body": "You cannot execute erase without changing <code>end()</code>, period (except special case when erase is a noop)"}, {"owner": {"reputation": 27649, "user_id": 5067311, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qjltV.png?s=128&g=1", "display_name": "Andras Deak", "link": "https://stackoverflow.com/users/5067311/andras-deak"}, "edited": false, "score": 0, "creation_date": 1582153151, "post_id": 59474672, "comment_id": 106683970, "body": "Does this answer your question? <a href=\"https://stackoverflow.com/questions/26965621/behavior-when-dereferencing-the-end-of-a-vector-of-strings\">Behavior when dereferencing the .end() of a vector of strings</a>"}], "answers": [{"comments": [{"owner": {"reputation": 137, "user_id": 10938150, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-amoM7OWOSzg/AAAAAAAAAAI/AAAAAAAAACk/M6rG9dzM1Og/photo.jpg?sz=128", "display_name": "AndiChin", "link": "https://stackoverflow.com/users/10938150/andichin"}, "edited": false, "score": 0, "creation_date": 1577240048, "post_id": 59474688, "comment_id": 105127665, "body": "but after I erase the element, end() becomes 10, which is defined, how do I avoid this?"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 137, "user_id": 10938150, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-amoM7OWOSzg/AAAAAAAAAAI/AAAAAAAAACk/M6rG9dzM1Og/photo.jpg?sz=128", "display_name": "AndiChin", "link": "https://stackoverflow.com/users/10938150/andichin"}, "edited": false, "score": 0, "creation_date": 1577240140, "post_id": 59474688, "comment_id": 105127676, "body": "@WhalalalalalalaCHen end() does <i>not</i> &quot;become 10&quot;. Stop dereferencing it. You cannot do that."}, {"owner": {"reputation": 144568, "user_id": 3309790, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7d1c7e499132b9945b412ac79d0e22f7?s=128&d=identicon&r=PG&f=1", "display_name": "songyuanyao", "link": "https://stackoverflow.com/users/3309790/songyuanyao"}, "reply_to_user": {"reputation": 137, "user_id": 10938150, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-amoM7OWOSzg/AAAAAAAAAAI/AAAAAAAAACk/M6rG9dzM1Og/photo.jpg?sz=128", "display_name": "AndiChin", "link": "https://stackoverflow.com/users/10938150/andichin"}, "edited": false, "score": 0, "creation_date": 1577240171, "post_id": 59474688, "comment_id": 105127680, "body": "@WhalalalalalalaCHen Just don&#39;t dereference on <code>end</code> which has UB. What do you want to avoid?"}, {"owner": {"reputation": 137, "user_id": 10938150, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-amoM7OWOSzg/AAAAAAAAAAI/AAAAAAAAACk/M6rG9dzM1Og/photo.jpg?sz=128", "display_name": "AndiChin", "link": "https://stackoverflow.com/users/10938150/andichin"}, "edited": false, "score": 0, "creation_date": 1577240403, "post_id": 59474688, "comment_id": 105127712, "body": "I want to check if an element exists by doing find(test.begin(), test.end(), element) == test.end()"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1577240437, "post_id": 59474688, "comment_id": 105127715, "body": "Then do that. What does that have to do with what you put in your question, or what you keep saying in your comments?"}, {"owner": {"reputation": 144568, "user_id": 3309790, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7d1c7e499132b9945b412ac79d0e22f7?s=128&d=identicon&r=PG&f=1", "display_name": "songyuanyao", "link": "https://stackoverflow.com/users/3309790/songyuanyao"}, "reply_to_user": {"reputation": 137, "user_id": 10938150, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-amoM7OWOSzg/AAAAAAAAAAI/AAAAAAAAACk/M6rG9dzM1Og/photo.jpg?sz=128", "display_name": "AndiChin", "link": "https://stackoverflow.com/users/10938150/andichin"}, "edited": false, "score": 0, "creation_date": 1577240543, "post_id": 59474688, "comment_id": 105127729, "body": "@WhalalalalalalaCHen Did you get any trouble with <code>find(test.begin(), test.end(), element) == test.end()</code>? After perform <code>erase</code>."}, {"owner": {"reputation": 144568, "user_id": 3309790, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7d1c7e499132b9945b412ac79d0e22f7?s=128&d=identicon&r=PG&f=1", "display_name": "songyuanyao", "link": "https://stackoverflow.com/users/3309790/songyuanyao"}, "reply_to_user": {"reputation": 137, "user_id": 10938150, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-amoM7OWOSzg/AAAAAAAAAAI/AAAAAAAAACk/M6rG9dzM1Og/photo.jpg?sz=128", "display_name": "AndiChin", "link": "https://stackoverflow.com/users/10938150/andichin"}, "edited": false, "score": 0, "creation_date": 1577240703, "post_id": 59474688, "comment_id": 105127750, "body": "@WhalalalalalalaCHen What&#39;s the output? <code>find(test.begin(), test.end(), element) == test.end()</code> would return <code>false</code>, meaning <code>find(test.begin(), test.end(), element)</code> is not <code>test.end()</code> and <code>10</code> is found. <a href=\"https://wandbox.org/permlink/Q2XOfrMXDJNX1BKq\" rel=\"nofollow noreferrer\">LIVE</a>"}, {"owner": {"reputation": 137, "user_id": 10938150, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-amoM7OWOSzg/AAAAAAAAAAI/AAAAAAAAACk/M6rG9dzM1Og/photo.jpg?sz=128", "display_name": "AndiChin", "link": "https://stackoverflow.com/users/10938150/andichin"}, "edited": false, "score": 0, "creation_date": 1577240887, "post_id": 59474688, "comment_id": 105127777, "body": "ohh thank you so much, I get it now, dereferencing end() confused me as it gave me weird outputs"}, {"owner": {"reputation": 144568, "user_id": 3309790, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7d1c7e499132b9945b412ac79d0e22f7?s=128&d=identicon&r=PG&f=1", "display_name": "songyuanyao", "link": "https://stackoverflow.com/users/3309790/songyuanyao"}, "reply_to_user": {"reputation": 137, "user_id": 10938150, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-amoM7OWOSzg/AAAAAAAAAAI/AAAAAAAAACk/M6rG9dzM1Og/photo.jpg?sz=128", "display_name": "AndiChin", "link": "https://stackoverflow.com/users/10938150/andichin"}, "edited": false, "score": 0, "creation_date": 1577240929, "post_id": 59474688, "comment_id": 105127780, "body": "@WhalalalalalalaCHen That&#39;s what UB means, anything is possible. Just avoid it."}, {"owner": {"reputation": 19910, "user_id": 8012646, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/T8yOZ.png?s=128&g=1", "display_name": "\u30ed\u30fc\u30a6", "link": "https://stackoverflow.com/users/8012646/%e3%83%ad%e3%83%bc%e3%82%a6"}, "edited": false, "score": 0, "creation_date": 1577267366, "post_id": 59474688, "comment_id": 105131650, "body": "Following your statement <i>and better to check whether the <code>vector</code> is empty or not in advance</i>, I think it would be recommendable to check that the <code>vector</code> has at least three elements because of the <code>test.erase(test.begin() + 2);</code>. You can perform this check and forget about the first one."}], "tags": [], "owner": {"reputation": 144568, "user_id": 3309790, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7d1c7e499132b9945b412ac79d0e22f7?s=128&d=identicon&r=PG&f=1", "display_name": "songyuanyao", "link": "https://stackoverflow.com/users/3309790/songyuanyao"}, "is_accepted": false, "score": 4, "last_activity_date": 1577240429, "last_edit_date": 1592644375, "creation_date": 1577239913, "answer_id": 59474688, "question_id": 59474672, "link": "https://stackoverflow.com/questions/59474672/c-how-to-erase-an-element-without-changing-its-end/59474688#59474688", "title": "c++ How to erase an element without changing its end()", "body": "<p><a href=\"https://en.cppreference.com/w/cpp/container/vector/end\" rel=\"nofollow noreferrer\"><code>std::vector::end</code></a> returns the iterator to the element <strong>following the last element</strong>, dereference on it leads to UB, means anything is possible, it's just meaningless.</p>\n<blockquote>\n<p>Returns an iterator to the element following the last element of the container.</p>\n<p>This element acts as a placeholder; attempting to access it results in undefined behavior.</p>\n</blockquote>\n<p>You might use <a href=\"https://en.cppreference.com/w/cpp/container/vector/back\" rel=\"nofollow noreferrer\"><code>std::vector::back</code></a> to get the last element; (and better to check whether the <code>vector</code> is empty or not in advance.)</p>\n<pre><code>int main() {\n    vector&lt;int&gt; test = {1, 2, 3, 4, 5, 6, 7, 8, 9, 10};\n    cout &lt;&lt; test.back() &lt;&lt; endl;\n    test.erase(test.begin() + 2);\n    cout &lt;&lt; test.back() &lt;&lt; endl;\n    return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 2, "creation_date": 1577242597, "post_id": 59474698, "comment_id": 105127935, "body": "You cannot do <code>*test.end()</code> neither normally nor abnormally and you do not need to check code for that, documentation is enough. It is not a pointer but iterator."}], "tags": [], "owner": {"reputation": 68, "user_id": 12395939, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-0JszkXTx5i8/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rf1hc28UvLfm3qg5A0UwwYJYCo3Iw/photo.jpg?sz=128", "display_name": "halong", "link": "https://stackoverflow.com/users/12395939/halong"}, "is_accepted": false, "score": 1, "last_activity_date": 1577240767, "last_edit_date": 1577240767, "creation_date": 1577240108, "answer_id": 59474698, "question_id": 59474672, "link": "https://stackoverflow.com/questions/59474672/c-how-to-erase-an-element-without-changing-its-end/59474698#59474698", "title": "c++ How to erase an element without changing its end()", "body": "<p>normally you can not print the <code>*test.end()</code> , because it is not the last pointer, it is after the last pointer. it's value is not valid for you,and may cause an exception.</p>\n\n<pre><code>vector::end() == vector::begin() + vector::size()\n</code></pre>\n\n<p>you can use <code>vector::back</code></p>\n\n<p>I checked the stl code of vector::erase()</p>\n\n<pre><code>    iterator erase(const_iterator _Where) noexcept(is_nothrow_move_assignable_v&lt;value_type&gt;) /* strengthened */ {\n        const pointer _Whereptr = _Where._Ptr;\n        auto&amp; _My_data          = _Mypair._Myval2;\n        pointer&amp; _Mylast        = _My_data._Mylast;\n\n#if _ITERATOR_DEBUG_LEVEL == 2\n        _STL_VERIFY(\n            _Where._Getcont() == _STD addressof(_My_data) &amp;&amp; _Whereptr &gt;= _My_data._Myfirst &amp;&amp; _Mylast &gt; _Whereptr,\n            \"vector erase iterator outside range\");\n        _Orphan_range(_Whereptr, _Mylast);\n#endif // _ITERATOR_DEBUG_LEVEL == 2\n\n        _Move_unchecked(_Whereptr + 1, _Mylast, _Whereptr);\n        _Alty_traits::destroy(_Getal(), _Unfancy(_Mylast - 1));  // here after move it destroy the last element.\n        --_Mylast;\n        return iterator(_Whereptr, _STD addressof(_My_data));\n    }\n\n</code></pre>\n\n<p>so use *end() may cause a exception of wild pointer.</p>\n"}, {"tags": [], "owner": {"reputation": 547, "user_id": 12450543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e33187968bcf2582820d7a085e7b29a?s=128&d=identicon&r=PG&f=1", "display_name": "klentit", "link": "https://stackoverflow.com/users/12450543/klentit"}, "is_accepted": false, "score": 0, "last_activity_date": 1577249703, "last_edit_date": 1577249703, "creation_date": 1577247958, "answer_id": 59475220, "question_id": 59474672, "link": "https://stackoverflow.com/questions/59474672/c-how-to-erase-an-element-without-changing-its-end/59475220#59475220", "title": "c++ How to erase an element without changing its end()", "body": "<p>try list</p>\n\n<pre><code> #include &lt;vector&gt;\n #include &lt;list&gt;\n   int main() {\n    list&lt;int&gt; test = {1, 2, 3, 4, 5, 6, 7, 8, 9, 10};\n\n    auto pbeg=test.begin(),\n    pend=test.end(),\n    a = pbeg, b = pend;\n    cout &lt;&lt; *(--b) &lt;&lt; endl;\n    ++(++a);\n    test.erase(a);\n    cout &lt;&lt; *(--b) &lt;&lt; endl;\n    for ( a=pbeg; a!=pend; ++a)\n        cout&lt;&lt; *a &lt;&lt;\" \";\n\n    return 0;\n}\n10\n10\n1 2 4 5 6 7 8 9 10\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1087, "user_id": 2129218, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8bf5ffff85c1f5609fca08eb8e05279?s=128&d=identicon&r=PG", "display_name": "Build Succeeded", "link": "https://stackoverflow.com/users/2129218/build-succeeded"}, "is_accepted": false, "score": 0, "last_activity_date": 1577253754, "creation_date": 1577253754, "answer_id": 59475647, "question_id": 59474672, "link": "https://stackoverflow.com/questions/59474672/c-how-to-erase-an-element-without-changing-its-end/59475647#59475647", "title": "c++ How to erase an element without changing its end()", "body": "<p>Your choice of the container needs to be revisited if you want avoid iterator invalidation during erase or removal of items from container.</p>\n\n<p>Below link can provide the overview of iterator invalidation:</p>\n\n<p><a href=\"http://kera.name/articles/2011/06/iterator-invalidation-rules-c0x/\" rel=\"nofollow noreferrer\">http://kera.name/articles/2011/06/iterator-invalidation-rules-c0x/</a></p>\n"}], "owner": {"reputation": 137, "user_id": 10938150, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-amoM7OWOSzg/AAAAAAAAAAI/AAAAAAAAACk/M6rG9dzM1Og/photo.jpg?sz=128", "display_name": "AndiChin", "link": "https://stackoverflow.com/users/10938150/andichin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 140, "favorite_count": 1, "answer_count": 4, "score": -2, "last_activity_date": 1577253754, "creation_date": 1577239713, "question_id": 59474672, "link": "https://stackoverflow.com/questions/59474672/c-how-to-erase-an-element-without-changing-its-end", "title": "c++ How to erase an element without changing its end()", "body": "<p>I'm trying to erase an element from a vector by index as follows, but why does the first output differ from the second output? Is there any way of avoiding this or a better way of removing elements?</p>\n\n<pre><code>int main() {\n    vector&lt;int&gt; test = {1, 2, 3, 4, 5, 6, 7, 8, 9, 10};\n    cout &lt;&lt; *test.end() &lt;&lt; endl;\n    test.erase(test.begin() + 2);\n    cout &lt;&lt; *test.end() &lt;&lt; endl;\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "arrays", "templates", "c++20"], "comments": [{"owner": {"reputation": 5700, "user_id": 4934640, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2f69527ae459cbbda0ab5c2e08686a50?s=128&d=identicon&r=PG&f=1", "display_name": "user", "link": "https://stackoverflow.com/users/4934640/user"}, "edited": false, "score": 2, "creation_date": 1577243043, "post_id": 59474613, "comment_id": 105127990, "body": "Related to: <a href=\"https://stackoverflow.com/questions/2033110/passing-a-string-literal-as-a-parameter-to-a-c-template-class\">Passing a string literal as a parameter to a C++ template class</a>"}, {"owner": {"reputation": 23130, "user_id": 8586227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BRnwg.png?s=128&g=1", "display_name": "Davis Herring", "link": "https://stackoverflow.com/users/8586227/davis-herring"}, "edited": false, "score": 0, "creation_date": 1577257920, "post_id": 59474613, "comment_id": 105129774, "body": "You can\u2019t <i>ever</i> use a function parameter as a constant expression.  Why is this a surprise here?"}, {"owner": {"reputation": 5700, "user_id": 4934640, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2f69527ae459cbbda0ab5c2e08686a50?s=128&d=identicon&r=PG&f=1", "display_name": "user", "link": "https://stackoverflow.com/users/4934640/user"}, "reply_to_user": {"reputation": 23130, "user_id": 8586227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BRnwg.png?s=128&g=1", "display_name": "Davis Herring", "link": "https://stackoverflow.com/users/8586227/davis-herring"}, "edited": false, "score": 0, "creation_date": 1577279383, "post_id": 59474613, "comment_id": 105134336, "body": "@DavisHerring, The surprise is that I cannot pass the <b><code>const char[]</code></b> array as a template parameter (not function parameter). Following the my linked question, we see that C++ will maybe only allow it when the <b><code>c++20</code></b> is released."}, {"owner": {"reputation": 23130, "user_id": 8586227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BRnwg.png?s=128&g=1", "display_name": "Davis Herring", "link": "https://stackoverflow.com/users/8586227/davis-herring"}, "edited": false, "score": 0, "creation_date": 1577283368, "post_id": 59474613, "comment_id": 105135315, "body": "Does this answer your (new) question? <a href=\"https://stackoverflow.com/questions/28763443/template-non-type-argument-c11-restriction-for-string-literals\">Template Non-Type argument, C++11, restriction for string literals</a>"}, {"owner": {"reputation": 23130, "user_id": 8586227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BRnwg.png?s=128&g=1", "display_name": "Davis Herring", "link": "https://stackoverflow.com/users/8586227/davis-herring"}, "edited": false, "score": 0, "creation_date": 1577284470, "post_id": 59474613, "comment_id": 105135604, "body": "Your question doesn\u2019t mention any of that or have the right version tags for it\u2014it doesn\u2019t even say \u201cstring literal\u201d except in the error message, and there are other <code>const char[\u2026]</code> objects for which the answer is different.  Please edit again, <b>reducing</b> the question to <i>one</i> clear point.  If you\u2019re after an answer from C++23, you need to wait a couple of years before asking (but there is a non-trivial C++20 answer to <i>certain</i> variations on this theme)."}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1577286231, "post_id": 59474613, "comment_id": 105135993, "body": "@user: Is this question about arrays in general, <code>const char[]</code> specifically, or string literals in particular? Because those are three different questions."}, {"owner": {"reputation": 5700, "user_id": 4934640, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2f69527ae459cbbda0ab5c2e08686a50?s=128&d=identicon&r=PG&f=1", "display_name": "user", "link": "https://stackoverflow.com/users/4934640/user"}, "reply_to_user": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1577286402, "post_id": 59474613, "comment_id": 105136028, "body": "@NicolBolas, it is about the c-style arrays <b><code>const char[]</code></b> as <b><code>constexpr</code></b> strings with <b><code>function&lt;int, &quot;string&quot;&gt;()</code></b>"}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1577286966, "post_id": 59474613, "comment_id": 105136144, "body": "@user: That still kind of misses the point. Is it <i>especially</i> important that the type be <code>const char[]</code>? Is it important that this <code>function</code> takes <i>only</i> a string literal, rather than any <code>constexpr</code> string which might be generated by any <code>constexpr</code> process?"}, {"owner": {"reputation": 5700, "user_id": 4934640, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2f69527ae459cbbda0ab5c2e08686a50?s=128&d=identicon&r=PG&f=1", "display_name": "user", "link": "https://stackoverflow.com/users/4934640/user"}, "reply_to_user": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1577289374, "post_id": 59474613, "comment_id": 105136641, "body": "@NicolBolas, I edited the question explaining the reasons."}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1577290794, "post_id": 59474613, "comment_id": 105136939, "body": "@user: &quot;<i>I would like to remove the <code>I</code> constexpr parameter</i>&quot; So... why are you still trying to use recursion? To remove the <code>I</code> template parameter means you want to turn the recursive implementation into iteration. Recursion <i>does not work</i> if you remove the argument that defines the termination of the recursive algorithm."}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1577290920, "post_id": 59474613, "comment_id": 105136966, "body": "@user: Also, this explanation only raises more questions. How does your question about passing a string literal/<code>const char[]</code>/array as a template parameter relate to some function that takes a string as a regular parameter? I fail to see the connection here. In particular: &quot;<i>it makes the recursion always go from const char[] string size down to 0</i>.&quot; Why exactly does that <i>matter</i>?"}, {"owner": {"reputation": 5700, "user_id": 4934640, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2f69527ae459cbbda0ab5c2e08686a50?s=128&d=identicon&r=PG&f=1", "display_name": "user", "link": "https://stackoverflow.com/users/4934640/user"}, "reply_to_user": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1577291124, "post_id": 59474613, "comment_id": 105137016, "body": "@NicolBolas, see the code example after the text <b><code>Here, I got an example I am trying to apply this concept</code></b>. There I had removed the <b><code>I</code></b> recursive parameter and had added <b><code>const char (path)[PathLength]</code></b> in the place of it. Now look at the body of the recursive function and compare it with the original one at the beginning of the question."}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1577291210, "post_id": 59474613, "comment_id": 105137033, "body": "@user: You&#39;re still missing the question. Why are you trying to implement it that way, rather than the obvious, non-recursive, non-string-template-parameter way that definitely works? Why do you want to turn a function that takes a string by function parameter into a function that takes a string by template parameter? That&#39;s the part that doesn&#39;t make sense."}, {"owner": {"reputation": 5700, "user_id": 4934640, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2f69527ae459cbbda0ab5c2e08686a50?s=128&d=identicon&r=PG&f=1", "display_name": "user", "link": "https://stackoverflow.com/users/4934640/user"}, "reply_to_user": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1577291617, "post_id": 59474613, "comment_id": 105137120, "body": "@NicolBolas, to explore how much I can go deep into C++ inner workings without breaking into some limitation. Sadly we just see we cannot pass <b><code>const char[]</code></b> as  template constexpr parameters. On the proposal paper <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2017/p0424r2.pdf\" rel=\"nofollow noreferrer\">&quot;String literals as non-type template parameters&quot;</a> you will see more real and concrete examples of a real world usage for things like <b><code>function&lt;&quot;myconstchar&quot;&gt;()</code></b>. My initial example here is just a silly experiment to see how much deep the rabbit hole goes. Sadly it did not go much deep."}, {"owner": {"reputation": 23130, "user_id": 8586227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BRnwg.png?s=128&g=1", "display_name": "Davis Herring", "link": "https://stackoverflow.com/users/8586227/davis-herring"}, "edited": false, "score": 0, "creation_date": 1577295854, "post_id": 59474613, "comment_id": 105137974, "body": "@user: You certainly <b>can</b> have <code>const char (&amp;)[]</code> template parameters, with or without a size.  Your terminology is very confusing: there is no template parameter that isn\u2019t \u201cconstexpr\u201d.  Are you just trying to ask what <i>C++20</i> does to \u201callow\u201d string literals as template arguments?  If so, please <b>say</b> so (in fewer than 300 words)!"}, {"owner": {"reputation": 5700, "user_id": 4934640, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2f69527ae459cbbda0ab5c2e08686a50?s=128&d=identicon&r=PG&f=1", "display_name": "user", "link": "https://stackoverflow.com/users/4934640/user"}, "reply_to_user": {"reputation": 23130, "user_id": 8586227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BRnwg.png?s=128&g=1", "display_name": "Davis Herring", "link": "https://stackoverflow.com/users/8586227/davis-herring"}, "edited": false, "score": 0, "creation_date": 1577296463, "post_id": 59474613, "comment_id": 105138103, "body": "@DavisHerring, My question was bellow 300 words when I fist posted, but comments asking more questions kept coming. I cannot have <b><code>const char (&amp;)[]</code></b> as template parameter (constexpr). There are two examples on my question where I tried to do so and the compiler throw right in my face: 1. <b><code>error: \u2018&quot;c&#47;test&quot;\u2019 is not a valid template argument for type \u2018const char*\u2019 because string literals can never be used in this context</code></b>; 2 <b><code>error: \u2018const char (&amp; path)[7]\u2019 is not a valid template argument for type \u2018const char (&amp;)[7]\u2019 because a reference variable does not have a constant address</code></b>."}, {"owner": {"reputation": 23130, "user_id": 8586227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BRnwg.png?s=128&g=1", "display_name": "Davis Herring", "link": "https://stackoverflow.com/users/8586227/davis-herring"}, "edited": false, "score": 1, "creation_date": 1577296941, "post_id": 59474613, "comment_id": 105138204, "body": "@user: Once you figure out what you\u2019re asking about is when you should shorten it.  You certainly can have that parameter; you just can\u2019t pass a string literal (or a local variable) as an argument for it.  (Note that <code>const char[n]</code> as a parameter, template or otherwise, represents only a pointer, which might or might not be useful.)"}, {"owner": {"reputation": 5700, "user_id": 4934640, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2f69527ae459cbbda0ab5c2e08686a50?s=128&d=identicon&r=PG&f=1", "display_name": "user", "link": "https://stackoverflow.com/users/4934640/user"}, "edited": false, "score": 0, "creation_date": 1577323420, "post_id": 59474613, "comment_id": 105142217, "body": "I wrote an answer which shows how it could be done with the C++ standard as of <b><code>C++ 17</code></b> and how I would expect to be the best way to handle/write this code with an fictitious <b><code>C++</code></b> standard which would allow to directly use a template constexpr as <b><code>function&lt;&quot;string&quot;&gt;()</code></b>"}], "answers": [{"tags": [], "owner": {"reputation": 5700, "user_id": 4934640, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2f69527ae459cbbda0ab5c2e08686a50?s=128&d=identicon&r=PG&f=1", "display_name": "user", "link": "https://stackoverflow.com/users/4934640/user"}, "is_accepted": true, "score": 2, "last_activity_date": 1587322543, "last_edit_date": 1587322543, "creation_date": 1577323021, "answer_id": 59483005, "question_id": 59474613, "link": "https://stackoverflow.com/questions/59474613/how-to-pass-a-const-char-array-as-constexpr-to-a-template/59483005#59483005", "title": "How to pass a const char[] array as constexpr to a template?", "body": "<p>Yahoo. I managed to make something to work with what the <strong><code>C++ 17</code></strong> standard allow us:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>template&lt;int PathIndex, int PathLength, const char (path)[PathLength]&gt;\nconstexpr const int findlastslash()\n{\n    if constexpr( PathIndex &lt; 1 || path[PathIndex] == '/' || path[PathIndex] == '\\\\' ) {\n        return PathIndex;\n    }\n    else {\n        return findlastslash&lt;PathIndex - 1, PathLength, path&gt;();\n    }\n}\n\nint main(int argc, char const *argv[]) {\n    static constexpr const char path[] = \"c/test\";\n    static_assert( findlastslash&lt; 6, 7, path &gt;() == 1, \"Fail!\" );\n}\n</code></pre>\n\n<p>Which expands to this:</p>\n\n<p><strong><code>clang++ -Xclang -ast-print -fsyntax-only --std=c++17 test_debugger.cpp &gt; main.exe</code></strong></p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>template &lt;int PathIndex, int PathLength, const char (path)[PathLength]&gt; \nconstexpr const int findlastslash() \n{\n    if (PathIndex &lt; 1 || path[PathIndex] == '/' || path[PathIndex] == '\\\\') {\n        return PathIndex;\n    } else {\n        return findlastslash&lt;PathIndex - 1, PathLength, path&gt;();\n    }\n}\n\ntemplate&lt;&gt; \nconstexpr const int findlastslash&lt;6, 7, &amp;path&gt;() \n{\n    if (6 &lt; 1 || path[6] == '/' || path[6] == '\\\\');\n    else {\n        return findlastslash&lt;6 - 1, 7, path&gt;();\n    }\n}\n\ntemplate&lt;&gt; \nconstexpr const int findlastslash&lt;5, 7, &amp;path&gt;() \n{\n    if (5 &lt; 1 || path[5] == '/' || path[5] == '\\\\');\n    else {\n        return findlastslash&lt;5 - 1, 7, path&gt;();\n    }\n}\n\ntemplate&lt;&gt; \nconstexpr const int findlastslash&lt;4, 7, &amp;path&gt;() \n{\n    if (4 &lt; 1 || path[4] == '/' || path[4] == '\\\\');\n    else {\n        return findlastslash&lt;4 - 1, 7, path&gt;();\n    }\n}\n\ntemplate&lt;&gt; \nconstexpr const int findlastslash&lt;3, 7, &amp;path&gt;() \n{\n    if (3 &lt; 1 || path[3] == '/' || path[3] == '\\\\');\n    else {\n        return findlastslash&lt;3 - 1, 7, path&gt;();\n    }\n}\n\ntemplate&lt;&gt; \nconstexpr const int findlastslash&lt;2, 7, &amp;path&gt;() \n{\n    if (2 &lt; 1 || path[2] == '/' || path[2] == '\\\\');\n    else {\n        return findlastslash&lt;2 - 1, 7, path&gt;();\n    }\n}\n\ntemplate&lt;&gt; \nconstexpr const int findlastslash&lt;1, 7, &amp;path&gt;() \n{\n    if (1 &lt; 1 || path[1] == '/' || path[1] == '\\\\') {\n        return 1;\n    }\n}\n\nint main(int argc, const char *argv[]) {\n    static constexpr const char path[] = \"c/test\";\n    static_assert(findlastslash&lt;6, 7, path&gt;() == 1, \"Fail!\");\n}\n</code></pre>\n\n<p>While this is not the ideal solution, this is something which \"works\" with the <strong><code>C++</code></strong> available today. </p>\n\n<p>The best answer would be the <code>C++</code> standard allowing us to write a code which can be easily maintainable like this:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>template&lt; const char (path)[PathLength], int PathIndex &gt;\nconstexpr const int findlastslash()\n{\n    if constexpr (path[PathIndex - 1] == '/' || path[PathIndex - 1] == '\\\\') {\n        return PathIndex;\n    }\n    else {\n        return findlastslash&lt;PathIndex - 1, PathLength, path&gt;();\n    }\n}\n\ntemplate&lt; const char (path)[PathLength] &gt;\nconstexpr const int startfindlastslash()\n{\n    return findlastslash&lt; path, PathLength &gt;();\n}\n\nint main(int argc, char const *argv[]) {\n    static_assert( startfindlastslash&lt; \"c/test\" &gt;() == 1, \"Fail\" );\n}\n</code></pre>\n\n<p>However, such nice code miserably fails with:</p>\n\n<ol>\n<li><p><strong><code>clang++ -Xclang -ast-print -fsyntax-only --std=c++17 test_debugger.cpp &gt; main.exe</code></strong></p>\n\n<pre><code>test_debugger.cpp:1:29: error: use of undeclared identifier 'PathLength'\ntemplate&lt; const char (path)[PathLength], int PathIndex &gt;\n                            ^\ntest_debugger.cpp:4:23: error: subscripted value is not an array, pointer, or vector\n    if constexpr (path[PathIndex - 1] == '/' || path[PathIndex - 1] == '\\\\') {\n                  ~~~~^~~~~~~~~~~~~~\ntest_debugger.cpp:4:53: error: subscripted value is not an array, pointer, or vector\n    if constexpr (path[PathIndex - 1] == '/' || path[PathIndex - 1] == '\\\\') {\n                                                ~~~~^~~~~~~~~~~~~~\ntest_debugger.cpp:8:45: error: use of undeclared identifier 'PathLength'\n        return findlastslash&lt;PathIndex - 1, PathLength, path&gt;();\n                                            ^\ntest_debugger.cpp:12:29: error: use of undeclared identifier 'PathLength'\ntemplate&lt; const char (path)[PathLength] &gt;\n                            ^\ntest_debugger.cpp:15:33: error: use of undeclared identifier 'PathLength'\n    return findlastslash&lt; path, PathLength &gt;();\n                                ^\ntest_debugger.cpp:13:21: error: no return statement in constexpr function\nconstexpr const int startfindlastslash()\n                    ^\ntest_debugger.cpp:19:20: error: no matching function for call to 'startfindlastslash'\n    static_assert( startfindlastslash&lt; \"c/test\" &gt;() == 1, \"Fail\" );\n                   ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\ntest_debugger.cpp:13:21: note: candidate template ignored: invalid explicitly-specified argument for template parameter 'path'\nconstexpr const int startfindlastslash()\n                    ^\n8 errors generated.\n</code></pre></li>\n<li><p><strong><code>g++ -o main.exe --std=c++17 test_debugger.cpp</code></strong></p>\n\n<pre><code>test_debugger.cpp:1:29: error: \u2018PathLength\u2019 was not declared in this scope\n template&lt; const char (path)[PathLength], int PathIndex &gt;\n                             ^~~~~~~~~~\ntest_debugger.cpp: In function \u2018constexpr const int findlastslash()\u2019:\ntest_debugger.cpp:4:19: error: \u2018path\u2019 was not declared in this scope\n     if constexpr (path[PathIndex - 1] == '/' || path[PathIndex - 1] == '\\\\') {\n                   ^~~~\ntest_debugger.cpp:8:45: error: \u2018PathLength\u2019 was not declared in this scope\n         return findlastslash&lt;PathIndex - 1, PathLength, path&gt;();\n                                             ^~~~~~~~~~\ntest_debugger.cpp:8:45: note: suggested alternative: \u2018PathIndex\u2019\n         return findlastslash&lt;PathIndex - 1, PathLength, path&gt;();\n                                             ^~~~~~~~~~\n                                             PathIndex\ntest_debugger.cpp: At global scope:\ntest_debugger.cpp:12:29: error: \u2018PathLength\u2019 was not declared in this scope\n template&lt; const char (path)[PathLength] &gt;\n                             ^~~~~~~~~~\ntest_debugger.cpp: In function \u2018constexpr const int startfindlastslash()\u2019:\ntest_debugger.cpp:15:27: error: \u2018path\u2019 was not declared in this scope\n     return findlastslash&lt; path, PathLength &gt;();\n                           ^~~~\ntest_debugger.cpp:15:33: error: \u2018PathLength\u2019 was not declared in this scope\n     return findlastslash&lt; path, PathLength &gt;();\n                                 ^~~~~~~~~~\ntest_debugger.cpp: In function \u2018int main(int, const char**)\u2019:\ntest_debugger.cpp:19:51: error: no matching function for call to \u2018startfindlastslash&lt;\"c/test\"&gt;()\u2019\n     static_assert( startfindlastslash&lt; \"c/test\" &gt;() == 1, \"Fail\" );\n                                                   ^\ntest_debugger.cpp:13:21: note: candidate: template&lt;&lt;declaration error&gt; &gt; constexpr const int startfindlastslash()\n constexpr const int startfindlastslash()\n                     ^~~~~~~~~~~~~~~~~~\ntest_debugger.cpp:13:21: note:   template argument deduction/substitution failed:\n</code></pre></li>\n</ol>\n\n<hr>\n\n<p>Another example from <a href=\"https://stackoverflow.com/questions/59418505/how-to-deduce-the-size-of-a-compile-time-a-const-char-string-with-c-templates\">How to deduce the size of a compile time a const char string with C++ templates?</a></p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>constexpr unsigned int requires_inRange(unsigned int i, unsigned int len) {\n    return i &gt;= len ? throw i : i;\n}\n\nclass StrWrap\n{\n    unsigned size_;\n    const char * begin_;\n\npublic:\n    template&lt; unsigned N &gt;\n    constexpr StrWrap( const char(&amp;arr)[N] ) : begin_(arr), size_(N - 1) {\n        static_assert( N &gt;= 1, \"not a string literal\");\n    }\n\n    constexpr char operator[]( unsigned i ) {\n        return requires_inRange(i, size_), begin_[i];\n    }\n\n    constexpr operator const char *() {\n        return begin_;\n    }\n\n    constexpr unsigned size() {\n        return size_;\n    }\n};\n\nconstexpr unsigned count( StrWrap str, char c, unsigned i = 0, unsigned ans = 0 )\n{\n    return i == str.size() ? ans :\n               str[i] == c ? count(str, c, i + 1, ans + 1) :\n                             count(str, c, i + 1, ans);\n}\n\nint main(int argc, char const *argv[])\n{\n    static_assert( count(\"dude\", 'd' ) == 2, \"d != 2\" );\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 5700, "user_id": 4934640, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2f69527ae459cbbda0ab5c2e08686a50?s=128&d=identicon&r=PG&f=1", "display_name": "user", "link": "https://stackoverflow.com/users/4934640/user"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 805, "favorite_count": 0, "accepted_answer_id": 59483005, "answer_count": 1, "score": -1, "last_activity_date": 1587322543, "creation_date": 1577238615, "last_edit_date": 1577322071, "question_id": 59474613, "link": "https://stackoverflow.com/questions/59474613/how-to-pass-a-const-char-array-as-constexpr-to-a-template", "title": "How to pass a const char[] array as constexpr to a template?", "body": "<p>In order to explore C++ abstraction power, I took this example from <a href=\"https://stackoverflow.com/a/59473757/4934640\">Jarod42 answer</a> on this other question <a href=\"https://stackoverflow.com/questions/59472892/how-to-stop-template-recursion-while-using-parameter-deduction\">How to stop template recursion while using parameter deduction?</a>:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#define STATIC_ASSERT(...) static_assert(__VA_ARGS__, #__VA_ARGS__)\n\ntemplate&lt;int PathLength, int I = PathLength&gt;\nconstexpr const int findlastslash(const char (&amp;path)[PathLength])\n{\n    if constexpr (I == 0) {\n        return 0;\n    } else {\n        if (path[I - 1] == '/' || path[I - 1] == '\\\\') {\n            return I;\n        }\n        return findlastslash&lt;PathLength, I - 1&gt;(path);\n    }\n}\n\nint main(int argc, char const *argv[]) {\n    STATIC_ASSERT( findlastslash( \"c/test\" ) == 2 );\n}\n</code></pre>\n\n<p>This this example, I am trying to improve it by removing the constexpr parameter <strong><code>I</code></strong> from the function <strong><code>findlastslash_impl</code></strong>. I would like to remove the <strong><code>I</code></strong> constexpr parameter because it makes the recursion always go from <strong><code>const char[]</code></strong> string size down to 0: (compiling it with <strong><code>clang</code></strong> and using special flags shows us the template expansions)</p>\n\n<p><strong><code>clang++ -Xclang -ast-print -fsyntax-only --std=c++17 test_debugger.cpp &gt; main.exe</code></strong></p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>template &lt;int PathLength, int I = PathLength&gt; \nconstexpr const int findlastslash(const char (&amp;path)[PathLength]) {\n    if (I == 0) {\n        return 0;\n    } else {\n        if (path[I - 1] == '/' || path[I - 1] == '\\\\') {\n            return I;\n        }\n        return findlastslash&lt;PathLength, I - 1&gt;(path);\n    }\n}\n\ntemplate&lt;&gt; \nconstexpr const int findlastslash&lt;7, 7&gt;(const char (&amp;path)[7]) {\n    if (7 == 0)\n        ;\n    else {\n        if (path[7 - 1] == '/' || path[7 - 1] == '\\\\') {\n            return 7;\n        }\n        return findlastslash&lt;7, 7 - 1&gt;(path);\n    }\n}\n\ntemplate&lt;&gt; \nconstexpr const int findlastslash&lt;7, 6&gt;(const char (&amp;path)[7]) {\n    if (6 == 0)\n        ;\n    else {\n        if (path[6 - 1] == '/' || path[6 - 1] == '\\\\') {\n            return 6;\n        }\n        return findlastslash&lt;7, 6 - 1&gt;(path);\n    }\n}\n\ntemplate&lt;&gt; \nconstexpr const int findlastslash&lt;7, 5&gt;(const char (&amp;path)[7]) {\n    if (5 == 0)\n        ;\n    else {\n        if (path[5 - 1] == '/' || path[5 - 1] == '\\\\') {\n            return 5;\n        }\n        return findlastslash&lt;7, 5 - 1&gt;(path);\n    }\n}\n\ntemplate&lt;&gt; \nconstexpr const int findlastslash&lt;7, 4&gt;(const char (&amp;path)[7]) {\n    if (4 == 0)\n        ;\n    else {\n        if (path[4 - 1] == '/' || path[4 - 1] == '\\\\') {\n            return 4;\n        }\n        return findlastslash&lt;7, 4 - 1&gt;(path);\n    }\n}\n\ntemplate&lt;&gt; \nconstexpr const int findlastslash&lt;7, 3&gt;(const char (&amp;path)[7]) {\n    if (3 == 0)\n        ;\n    else {\n        if (path[3 - 1] == '/' || path[3 - 1] == '\\\\') {\n            return 3;\n        }\n        return findlastslash&lt;7, 3 - 1&gt;(path);\n    }\n}\n\ntemplate&lt;&gt; \nconstexpr const int findlastslash&lt;7, 2&gt;(const char (&amp;path)[7]) {\n    if (2 == 0)\n        ;\n    else {\n        if (path[2 - 1] == '/' || path[2 - 1] == '\\\\') {\n            return 2;\n        }\n        return findlastslash&lt;7, 2 - 1&gt;(path);\n    }\n}\n\ntemplate&lt;&gt; \nconstexpr const int findlastslash&lt;7, 1&gt;(const char (&amp;path)[7]) {\n    if (1 == 0)\n        ;\n    else {\n        if (path[1 - 1] == '/' || path[1 - 1] == '\\\\') {\n            return 1;\n        }\n        return findlastslash&lt;7, 1 - 1&gt;(path);\n    }\n}\n\ntemplate&lt;&gt; \nconstexpr const int findlastslash&lt;7, 0&gt;(const char (&amp;path)[7]) {\n    if (0 == 0) {\n        return 0;\n    }\n}\nint main(int argc, const char *argv[]) {\n    static_assert(findlastslash(\"c/test\") == 2, \n            \"findlastslash( \\\"c/test\\\" ) == 2\");\n}\n</code></pre>\n\n<p>Then, if convert the function parameter <strong><code>path</code></strong> to a constexpr, I can remove the <strong><code>I</code></strong> constexpr parameter and I am allowed to only expand the <strong><code>findlastslash_impl</code></strong> function recursion exactly to the location of the last slash instead of always going from <strong><code>const char[]</code></strong> string size down to 0.</p>\n\n<p>Questions like <a href=\"https://stackoverflow.com/questions/28763443/template-non-type-argument-c11-restriction-for-string-literals\">Template Non-Type argument, C++11, restriction for string literals</a> are just another question saying I cannot do it and suggests another hack. An answer to this question would may be written when the C++20 or C++23 is released with either one of these proposals: </p>\n\n<ol>\n<li><a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2017/p0424r2.pdf\" rel=\"nofollow noreferrer\">\"String literals as non-type template parameters\"</a></li>\n<li><a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2018/p0732r0.pdf\" rel=\"nofollow noreferrer\">\"Class Types in Non-Type Template Parameters\"</a></li>\n</ol>\n\n<p>It is common to find something like this bellow, which works fine: (<a href=\"https://stackoverflow.com/questions/20163469/passing-an-array-by-reference-to-template-function-in-c\">Passing an array by reference to template function in c++</a>)</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>template&lt;class T&gt;\nT sum_array(T (&amp;a)[10], int size)\n{ ...\n</code></pre>\n\n<p>But I would like to do something like this bellow instead, to be able to use the array in a <strong><code>if constexpr</code></strong>:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>template&lt;class T, T (&amp;a)[10]&gt;\nT sum_array(int size)\n{ ...\n</code></pre>\n\n<p>Here, I got an example I am trying to apply this concept:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#define STATIC_ASSERT(...) static_assert(__VA_ARGS__, #__VA_ARGS__)\n\ntemplate&lt; int PathIndex, int PathLength, const char (path)[PathLength] &gt;\nconstexpr const int findlastslash()\n{\n    if constexpr (path[PathIndex - 1] == '/' || path[PathIndex - 1] == '\\\\') {\n        return PathIndex;\n    }\n    return findlastslash&lt;PathIndex - 1, PathLength, path&gt;();\n}\n\nint main(int argc, char const *argv[])\n{\n    STATIC_ASSERT( findlastslash&lt; 6, 6, \"c/test\" &gt;() == 2 );\n}\n</code></pre>\n\n<p>Compiling it with <strong><code>C++17</code></strong> standard, I got the compiler saying: <strong><code>error: \u2018\"c/test\"\u2019 is not a valid template argument for type \u2018const char*\u2019 because string literals can never be used in this context</code></strong></p>\n\n<p>How can I pass an <strong><code>const char[]</code></strong> array as a constexpr to <strong><code>findlastslash()</code></strong>?</p>\n\n<hr>\n\n<p>Initially I had tried passing the <strong><code>const char[]</code></strong> array as a reference:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>template&lt; int PathIndex, int PathLength, const char (&amp;path)[PathLength] &gt;\nconstexpr const int findlastslash()\n{\n</code></pre>\n\n<p>Leading the compiler to throw the errors: </p>\n\n<ol>\n<li><strong><code>error: \u2018const char (&amp; path)[7]\u2019 is not a valid template argument for type \u2018const char (&amp;)[7]\u2019 because a reference variable does not have a constant address</code></strong></li>\n<li><strong><code>note: candidate template ignored: invalid explicitly-specified argument for template parameter 'path'</code></strong></li>\n</ol>\n\n<hr>\n\n<p>These are the compiler errors for the first example trying to use the <code>const char[]</code> array as a template parameter reference: <strong><code>template&lt; int PathIndex, int PathLength, const char (&amp;path)[PathLength] &gt;</code></strong></p>\n\n<ol>\n<li><p><strong><code>g++ -o main.exe --std=c++17 test_debugger.cpp</code></strong></p>\n\n<pre><code>test_debugger.cpp: In function \u2018int main(int, const char**)\u2019:\ntest_debugger.cpp:14:52: error: no matching function for call to \u2018findlastslash&lt;6, 6, \"c/test\"&gt;()\u2019\n     STATIC_ASSERT( findlastslash&lt; 6, 6, \"c/test\" &gt;() == 2 );\n                                                    ^\ntest_debugger.cpp:1:42: note: in definition of macro \u2018STATIC_ASSERT\u2019\n #define STATIC_ASSERT(...) static_assert(__VA_ARGS__, #__VA_ARGS__)\n                                          ^~~~~~~~~~~\ntest_debugger.cpp:4:21: note: candidate: template&lt;int PathIndex, int PathLength, const char* path&gt; constexpr const int findlastslash()\n constexpr const int findlastslash()\n                     ^~~~~~~~~~~~~\ntest_debugger.cpp:4:21: note:   template argument deduction/substitution failed:\ntest_debugger.cpp:14:52: error: \u2018\"c/test\"\u2019 is not a valid template argument for type \u2018const char*\u2019 because string literals can never be used in this context\n     STATIC_ASSERT( findlastslash&lt; 6, 6, \"c/test\" &gt;() == 2 );\n                                                    ^\ntest_debugger.cpp:1:42: note: in definition of macro \u2018STATIC_ASSERT\u2019\n #define STATIC_ASSERT(...) static_assert(__VA_ARGS__, #__VA_ARGS__)\n                                          ^~~~~~~~~~~\n</code></pre></li>\n<li><p><strong><code>clang++ -Xclang -ast-print -fsyntax-only --std=c++17 test_debugger.cpp &gt; main.exe</code></strong></p>\n\n<pre><code>test_debugger.cpp:14:20: error: no matching function for call to 'findlastslash'\n    STATIC_ASSERT( findlastslash&lt; 6, 6, \"c/test\" &gt;() == 2 );\n                   ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\ntest_debugger.cpp:1:42: note: expanded from macro 'STATIC_ASSERT'\n#define STATIC_ASSERT(...) static_assert(__VA_ARGS__, #__VA_ARGS__)\n                                         ^~~~~~~~~~~\ntest_debugger.cpp:4:21: note: candidate template ignored: invalid explicitly-specified argument for template parameter 'path'\nconstexpr const int findlastslash()\n                    ^\n1 error generated.\n</code></pre></li>\n</ol>\n\n<hr>\n\n<h1>Update</h1>\n\n<p>After I tried to couple with what <strong><code>C++ 17</code></strong> could offer, this is my code:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>template&lt;int PathIndex, int PathLength, const char (path)[PathLength]&gt;\nconstexpr const int findlastslash()\n{\n    if constexpr( PathIndex &lt; 1 || path[PathIndex] == '/' || path[PathIndex] == '\\\\' ) {\n        return PathIndex;\n    }\n\n    return findlastslash&lt;PathIndex - 1, PathLength, path&gt;();\n}\n\nconstexpr const char path[] = \"c/test\";\n\nint main(int argc, char const *argv[])\n{\n    static_assert( findlastslash&lt; 6, 6, path &gt;() == 2, \"Fail!\" );\n}\n</code></pre>\n\n<p>Which miserably fails with:</p>\n\n<p><strong><code>clc g++ -o main.exe --std=c++17 test_debugger.cpp</code></strong></p>\n\n<pre><code>test_debugger.cpp: In function \u2018int main(int, const char**)\u2019:\ntest_debugger.cpp:15:5: error: static assertion failed: Fail!\n     static_assert( findlastslash&lt; 6, 6, path &gt;() == 2, \"Fail!\" );\n     ^~~~~~~~~~~~~\ntest_debugger.cpp: In instantiation of \u2018constexpr const int findlastslash() [with int PathIndex = -898; int PathLength = 6; const char* path = (&amp; path)]\u2019:\ntest_debugger.cpp:8:58:   recursively required from \u2018constexpr const int findlastslash() [with int PathIndex = 1; int PathLength = 6; const char* path = (&amp; path)]\u2019\ntest_debugger.cpp:8:58:   required from here\ntest_debugger.cpp:8:58: fatal error: template instantiation depth exceeds maximum of 900 (use -ftemplate-depth= to increase the maximum)\n     return findlastslash&lt;PathIndex - 1, PathLength, path&gt;();\n            ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^~\ncompilation terminated.\n</code></pre>\n\n<p>Even using a <strong><code>if constexpr</code></strong>, C++ cannot stop the recursion by itself checking the <code>PathIndex</code> parameter.</p>\n\n<p>Some related questions:</p>\n\n<ol>\n<li><a href=\"https://stackoverflow.com/questions/26966901/c11-local-static-values-not-working-as-template-arguments\">C++11 Local static values not working as template arguments</a></li>\n<li><a href=\"https://stackoverflow.com/questions/25946089/template-on-address-of-variable-with-static-storage\">Template on address of variable with static storage</a></li>\n</ol>\n"}, {"tags": ["c++", "c", "qt", "debugging", "linker"], "comments": [{"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 2, "creation_date": 1577238226, "post_id": 59474550, "comment_id": 105127490, "body": "My guess is, the two compilers don&#39;t agree on the binary layout of <code>NodeTrueProperties</code>. Try printing <code>sizeof(NodeTrueProperties)</code> on both C and C++ sides. <code>bool</code> is a built-in type in C++, but some macro in C, possibly expanding to a type of different size."}], "answers": [{"tags": [], "owner": {"reputation": 1263, "user_id": 6941952, "user_type": "registered", "profile_image": "https://graph.facebook.com/1683664381950916/picture?type=large", "display_name": "Mohammed Deifallah", "link": "https://stackoverflow.com/users/6941952/mohammed-deifallah"}, "is_accepted": false, "score": 0, "last_activity_date": 1577265602, "creation_date": 1577265602, "answer_id": 59476905, "question_id": 59474550, "link": "https://stackoverflow.com/questions/59474550/calling-a-compiled-c-library-function-from-qt-c-produces-unexpected-behaviour/59476905#59476905", "title": "Calling a compiled C library function from Qt C++ produces unexpected behaviour", "body": "<p>Try this format: <code>@ #include &lt;dsemantic.h&gt; @</code>\nI hope this helps solve your problem.</p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 9759525, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51f39582adfa84ce4fc37277290d89d6?s=128&d=identicon&r=PG&f=1", "display_name": "drwhut", "link": "https://stackoverflow.com/users/9759525/drwhut"}, "is_accepted": true, "score": 0, "last_activity_date": 1577305983, "creation_date": 1577305983, "answer_id": 59481660, "question_id": 59474550, "link": "https://stackoverflow.com/questions/59474550/calling-a-compiled-c-library-function-from-qt-c-produces-unexpected-behaviour/59481660#59481660", "title": "Calling a compiled C library function from Qt C++ produces unexpected behaviour", "body": "<p>I found the culprit thanks to Igor Tandetnik's comment: My <code>bool</code> that I created in the C library (4 bytes = <code>int</code>) was a different size to the <code>bool</code> type in the C++ program (1 byte), which I assume ended up changing the <code>NodeTrueProperties</code> struct between the program and the library as well.</p>\n\n<p>For reference, I changed my <code>bool</code> definition in C from this:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>/**\n * \\enum bool\n * \\brief A boolean.\n */\ntypedef enum {\n    false, ///&lt; `false`\n    true   ///&lt; `true`\n} bool;\n</code></pre>\n\n<p>to including the <code>stdbool.h</code> header file:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>#include &lt;stdbool.h&gt;\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 9759525, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51f39582adfa84ce4fc37277290d89d6?s=128&d=identicon&r=PG&f=1", "display_name": "drwhut", "link": "https://stackoverflow.com/users/9759525/drwhut"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 106, "favorite_count": 0, "accepted_answer_id": 59481660, "answer_count": 2, "score": 1, "last_activity_date": 1577305983, "creation_date": 1577237380, "last_edit_date": 1577291417, "question_id": 59474550, "link": "https://stackoverflow.com/questions/59474550/calling-a-compiled-c-library-function-from-qt-c-produces-unexpected-behaviour", "title": "Calling a compiled C library function from Qt C++ produces unexpected behaviour", "body": "<p>I am on Windows, and I have 2 projects: One is made in C, which I have compiled into a DLL library, and a Qt C++ project, which I am linking with the C library.</p>\n\n<p>When I've tried linking the C library in the past with C code, it works fine. But there seems to be a problem when I try to link it with C++ code (on both Qt here and on Linux in general), even if I insert the <code>extern \"C\"</code> block where I include the C header files.</p>\n\n<p>The strangest part is when debugging, the code does things that just... shouldn't happen?</p>\n\n<p>Here is the C code that I am calling:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>// Defined in a header file elsewhere...\ntypedef struct _nodeTrueProperties {\n    bool isDefined;\n    bool needFuncName;\n    bool _mallocd;\n\n    const DType *inputTypes;\n    long numInputs;\n\n    const DType *outputTypes;\n    long numOutputs;\n} NodeTrueProperties;\n\n// The actual code...\nNodeTrueProperties d_semantic_get_node_properties(struct _sheet *sheet,\n                                                  const char *name,\n                                                  size_t lineNum,\n                                                  const char *funcName,\n                                                  NameDefinition *definition) {\n    VERBOSE(5, \"Getting node properties of node %s on line %zu in %s...\\n\",\n            name, lineNum, sheet-&gt;filePath)\n\n    NodeTrueProperties out =\n        (NodeTrueProperties){false, false, true, NULL, 0, NULL, 0};\n\n    // Most cases use this to build up the output types.\n    DType *outputTypes = NULL;\n\n    // First, let's check if it's a special function like Start.\n    // We do this now so we don't need to search all of our includes\n    // for this function.\n    if (strcmp(name, \"Start\") == 0) {\n\n        // THIS IS THE SECTION THAT SHOULD AND DOES RUN!\n\n        out.isDefined  = true;\n        out.numOutputs = 1;\n\n        outputTypes    = (DType *)d_malloc(sizeof(DType));\n        outputTypes[0] = TYPE_EXECUTION;\n\n        out.outputTypes = (const DType *)outputTypes;\n    } else if (strcmp(name, \"Return\") == 0) {\n        // ... stuff that shouldn't run...\n    } // ...\n\n    return out;\n}\n</code></pre>\n\n<p>And this is the Qt C++ code calling that function:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include \"nodegraphicsitem.h\"\n\n#include &lt;QPainter&gt;\n\nextern \"C\" {\n    #include &lt;dsemantic.h&gt;\n}\n\n// ...\n\nvoid NodeGraphicsItem::setupNode(Sheet *sheet, QString name, QPointF position) {\n    _name = name;\n    _position = position;\n    _sheet = sheet;\n    _size = STARTING_SIZE;\n\n    // Set the QGraphicsItem flags.\n    setFlags(ItemIsMovable | ItemIsSelectable);\n\n    // Get the true properties of the node.\n    NameDefinition nodeDefinition;\n    QByteArray nameByteArray      = name.toLatin1();\n    const char *nameCharArray     = nameByteArray.constData();\n\n    // THIS IS THE CALL TO THE COMPILED C FUNCTION\n    NodeTrueProperties properties =\n        d_semantic_get_node_properties(sheet, nameCharArray, 1, NULL,\n                                       &amp;nodeDefinition);\n\n    // THIS FUNCTION DOES SOME WHACKY STUFF\n    d_semantic_free_true_properties(properties);\n\n    // ...\n}\n\n</code></pre>\n\n<p>Everything compiles fine, but it does not run fine at all:</p>\n\n<p>What I expect my <code>NodeTrueProperties</code> to look like, based on the if statement that runs (since the name passed in is <code>\"Start\"</code>), should look like this: <code>{true, false, true, NULL, 0, (pointer to DType array), 1}</code>. What I actually get is <code>{true, false, false, NULL, 1, NULL, 0}</code> according to the debugger:</p>\n\n<p><a href=\"https://i.stack.imgur.com/Q99Wj.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Q99Wj.png\" alt=\"What the debugger says the values are\"></a></p>\n\n<p>Another really whacky artifact is an if statement activates in the C code, even though the condition, according to the debugger, is false (<code>trueProperties._mallocd == false</code>):</p>\n\n<p><a href=\"https://i.stack.imgur.com/F1IMQ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/F1IMQ.png\" alt=\"If statement activates for some reason\"></a></p>\n\n<p>I use CMake and VS2017 in Win32 mode to compile the C project into a DLL, and I use Qt Creator with the MSVC2017 32bit kit to compile the Qt C++ project.</p>\n"}, {"tags": ["c++", "string", "visual-studio", "for-loop", "char"], "comments": [{"owner": {"reputation": 4915, "user_id": 10686048, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bffd06d00a80b9b69e83f561ee5a392?s=128&d=identicon&r=PG&f=1", "display_name": "ChrisMM", "link": "https://stackoverflow.com/users/10686048/chrismm"}, "edited": false, "score": 1, "creation_date": 1577237162, "post_id": 59474515, "comment_id": 105127376, "body": "Please paste the errors into your question, as opposed to a picture of them."}, {"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 2, "creation_date": 1577237383, "post_id": 59474515, "comment_id": 105127400, "body": "You are doing several things that are wrong: 1) all questions on stackoverflow.com must include all relevant information <b><i>in the question itself as plain text</i></b>, suspicious links to dodgy external web sites can stop working at any time rendering the question meaningless; 2) All questions of the form &quot;the following code doesn&#39;t work for some reason&quot; must meet all requirements of a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, as explained in the <a href=\"https://stackoverflow.com/help\">help center</a>, and the shown code does not. See <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> for more information."}, {"owner": {"reputation": 1233, "user_id": 11872808, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29d7b759b09573f7750c178d99015eca?s=128&d=identicon&r=PG&f=1", "display_name": "Jeaninez - MSFT", "link": "https://stackoverflow.com/users/11872808/jeaninez-msft"}, "edited": false, "score": 0, "creation_date": 1577256544, "post_id": 59474515, "comment_id": 105129533, "body": "Accoring to the <a href=\"http://www.cplusplus.com/reference/string/string/copy/\" rel=\"nofollow noreferrer\">std::string::copy</a> <code>size_t copy (char* s, size_t len, size_t pos = 0) const;</code>: <code>s</code>:Pointer to an array of characters. The array shall contain enough storage for the copied characters. <code>ch</code> should be <code>char*</code> instead of <code>string</code>"}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 12179440, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a306e78ee171e9d5a14643770427adb3?s=128&d=identicon&r=PG&f=1", "display_name": "Adros", "link": "https://stackoverflow.com/users/12179440/adros"}, "is_accepted": false, "score": 0, "last_activity_date": 1577238049, "creation_date": 1577238049, "answer_id": 59474587, "question_id": 59474515, "link": "https://stackoverflow.com/questions/59474515/no-suitable-conversion-function-from-stdstring-to-const-char-exists/59474587#59474587", "title": "&quot;No suitable conversion function from &#39;std::string&#39; to &#39;const char *&#39; exists&quot;", "body": "<p>From the c++ reference</p>\n\n<p>size_t copy (char* s, size_t len, size_t pos = 0) const;</p>\n\n<p>Essentially copy requires a char pointer/array as its first arg but you put a string so it threw an error.</p>\n"}, {"comments": [{"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 1, "creation_date": 1577243100, "post_id": 59474595, "comment_id": 105127995, "body": "&quot;string::copy should be&quot; in this case it should be <code>ch = word[i];</code>"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 1, "creation_date": 1577261920, "post_id": 59474595, "comment_id": 105130524, "body": "FYI, in C++17 and later, <code>std::size()</code> can be passed any container that has a <code>size()</code> method, which includes <code>std::string</code>, thus <code>wordlength = size(word);</code> is a valid statement"}], "tags": [], "owner": {"reputation": 141, "user_id": 7286877, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70fbaa62b70fa90d716a1ff1ecc32468?s=128&d=identicon&r=PG&f=1", "display_name": "vsh", "link": "https://stackoverflow.com/users/7286877/vsh"}, "is_accepted": false, "score": 2, "last_activity_date": 1577238350, "creation_date": 1577238350, "answer_id": 59474595, "question_id": 59474515, "link": "https://stackoverflow.com/questions/59474515/no-suitable-conversion-function-from-stdstring-to-const-char-exists/59474595#59474595", "title": "&quot;No suitable conversion function from &#39;std::string&#39; to &#39;const char *&#39; exists&quot;", "body": "<p>Size of string:</p>\n\n<pre><code>wordlength = word.size();\n</code></pre>\n\n<p>string::copy should be:</p>\n\n<pre><code>char ch;\n....\nword.copy(&amp;ch, 1, i);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 163, "user_id": 4777480, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Uvt3Q.gif?s=128&g=1", "display_name": "The Riser", "link": "https://stackoverflow.com/users/4777480/the-riser"}, "edited": false, "score": 0, "creation_date": 1577302200, "post_id": 59474798, "comment_id": 105139217, "body": "Plain and simple,thank you,you did however forget to declare &quot;string ch&quot; after removing it,just pointing that out for future reference."}], "tags": [], "owner": {"reputation": 547, "user_id": 12450543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e33187968bcf2582820d7a085e7b29a?s=128&d=identicon&r=PG&f=1", "display_name": "klentit", "link": "https://stackoverflow.com/users/12450543/klentit"}, "is_accepted": true, "score": 3, "last_activity_date": 1577315556, "last_edit_date": 1577315556, "creation_date": 1577241878, "answer_id": 59474798, "question_id": 59474515, "link": "https://stackoverflow.com/questions/59474515/no-suitable-conversion-function-from-stdstring-to-const-char-exists/59474798#59474798", "title": "&quot;No suitable conversion function from &#39;std::string&#39; to &#39;const char *&#39; exists&quot;", "body": "<p>simply use <em>string</em></p>\n\n<pre><code>#include &lt;string&gt;\nusing namespace std;\nstring word;\nchar *c;\n  cout &lt;&lt; \"Please enter a word.\" &lt;&lt; endl;\n  cin &gt;&gt; word;\n\n  int wordlength,  i;\n\n    wordlength = word.size();\n\n    for (i = 0; i &lt; wordlength; ++i) {\n\n     ch = word[i];\n\n     cout &lt;&lt; ch &lt;&lt; endl;\n\n   }\n</code></pre>\n\n<p>works either way too <code>word[i] = ch;</code></p>\n"}], "owner": {"reputation": 163, "user_id": 4777480, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Uvt3Q.gif?s=128&g=1", "display_name": "The Riser", "link": "https://stackoverflow.com/users/4777480/the-riser"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3234, "favorite_count": 0, "closed_date": 1577255169, "accepted_answer_id": 59474798, "answer_count": 3, "score": 0, "last_activity_date": 1589587961, "creation_date": 1577236800, "last_edit_date": 1589587961, "question_id": 59474515, "link": "https://stackoverflow.com/questions/59474515/no-suitable-conversion-function-from-stdstring-to-const-char-exists", "closed_reason": "Needs details or clarity", "title": "&quot;No suitable conversion function from &#39;std::string&#39; to &#39;const char *&#39; exists&quot;", "body": "<p>I'm trying to write a simple loop that takes a string and goes through each character of said string and stores it inside another string (the same string every time). I want to use this loop to perform simple tasks, such as displaying a word in reverse, or displaying each character in a separate line (which is where the example provided below comes from). My code goes something like this:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>string word;\nstring ch;\ncout &lt;&lt; \"Please enter a word.\" &lt;&lt; endl;\ncin &gt;&gt; word;\n\nint wordlength;\nint i;\n\nwordlength = size(word);\n\nfor (i = 0; i &lt; wordlength; i++) {\n    word.copy(ch, 1, i);\n    cout &lt;&lt; ch &lt;&lt; endl;\n}\n</code></pre>\n\n<p>But whenever I use this code, I get the error in the title.</p>\n\n<p>What am I doing wrong?</p>\n"}, {"tags": ["c++", "templates", "boost-geometry"], "answers": [{"comments": [{"owner": {"reputation": 37, "user_id": 6020951, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/136ddc320de2e8cc230e8bae88ed6730?s=128&d=identicon&r=PG&f=1", "display_name": "xelp", "link": "https://stackoverflow.com/users/6020951/xelp"}, "edited": false, "score": 0, "creation_date": 1577911286, "post_id": 59506976, "comment_id": 105280332, "body": "the intent was to design and use a custom type where the &quot;equal to&quot; only takes into account some specific fields . Thank you for your answer, I also had to use the <code>BOOST_GEOMETRY_REGISTER_BOOST_TUPLE_CS</code> macro for my code to compile, this is a behaviour that is not documented anywhere and I still don&#39;t know why I had to do that since it&#39;s supposed to be a templated library ."}], "tags": [], "owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "is_accepted": true, "score": 1, "last_activity_date": 1577489535, "creation_date": 1577489535, "answer_id": 59506976, "question_id": 59474489, "link": "https://stackoverflow.com/questions/59474489/error-custom-data-type-as-payload-with-boostgeometry/59506976#59506976", "title": "Error - Custom Data Type as payload with boost::geometry", "body": "<p>Your only real stumbling block was a missing include. I'd suggest adding</p>\n\n<pre><code>#include &lt;boost/geometry.hpp&gt;\n#include &lt;boost/geometry/index/indexable.hpp&gt;\n</code></pre>\n\n<p>Meanwhile, a lot of what you wrote is redundant as the default <a href=\"https://www.boost.org/doc/libs/1_72_0/libs/geometry/doc/html/geometry/reference/spatial_indexes/boost__geometry__index__rtree.html#geometry.reference.spatial_indexes.boost__geometry__index__rtree.indexablegetter\" rel=\"nofollow noreferrer\">IndexableGetter</a> and <a href=\"https://www.boost.org/doc/libs/1_72_0/libs/geometry/doc/html/geometry/reference/spatial_indexes/boost__geometry__index__rtree.html#geometry.reference.spatial_indexes.boost__geometry__index__rtree.equalto\" rel=\"nofollow noreferrer\">EqualTo</a> parameters already deal with your choice of payload.</p>\n\n<p>My suggested simplified program therefore would look like this:</p>\n\n<p><strong><a href=\"http://coliru.stacked-crooked.com/a/7ea01023f42a485f\" rel=\"nofollow noreferrer\">Live On Coliru</a></strong></p>\n\n<pre><code>#include &lt;boost/geometry.hpp&gt;\n#include &lt;boost/geometry/geometries/point.hpp&gt;\n#include &lt;boost/geometry/geometries/box.hpp&gt;\n#include &lt;boost/geometry/index/indexable.hpp&gt;\n#include &lt;boost/geometry/index/rtree.hpp&gt;\n#include &lt;utility&gt;\n\nstruct guts {\n    int a = 11;\n    int b = 22;\n};\n\nnamespace bg = boost::geometry;\nnamespace bgi = bg::index;\n\nusing point = bg::model::point&lt;double, 2, bg::cs::cartesian&gt;;\nusing box = bg::model::box&lt;point&gt;;\n\nusing payload = std::pair&lt;box, guts&gt;;\nusing rtree = bgi::rtree&lt;payload, bgi::rstar&lt;16&gt;&gt;;\n\nint main() {\n    std::vector v {\n        payload { box { {1.0, 1.0}, {7.0, 4.0} }, guts {2, 3} }\n    };\n\n    rtree rt(v);\n    for (const auto&amp; k : v)\n        rt.insert(k);\n\n    std::copy(v.begin(), v.end(), bgi::inserter(rt));\n}\n</code></pre>\n\n<blockquote>\n  <h2>Note:</h2>\n  \n  <p>Was ignoring <code>guts::b</code> really the intent?</p>\n  \n  <p>In that case, consider simply adding the inline operator overload:</p>\n\n<pre><code>struct guts {\n    int a = 11;\n    int b = 22;\n\n    bool operator==(guts const&amp; other) const { return a == other.a; }\n};\n</code></pre>\n</blockquote>\n"}], "owner": {"reputation": 37, "user_id": 6020951, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/136ddc320de2e8cc230e8bae88ed6730?s=128&d=identicon&r=PG&f=1", "display_name": "xelp", "link": "https://stackoverflow.com/users/6020951/xelp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "accepted_answer_id": 59506976, "answer_count": 1, "score": 0, "last_activity_date": 1577489535, "creation_date": 1577236245, "question_id": 59474489, "link": "https://stackoverflow.com/questions/59474489/error-custom-data-type-as-payload-with-boostgeometry", "title": "Error - Custom Data Type as payload with boost::geometry", "body": "<pre><code>#include &lt;boost/geometry/geometries/box.hpp&gt;\n#include &lt;boost/geometry/index/rtree.hpp&gt;\n#include &lt;functional&gt;\n#include &lt;iostream&gt;\n#include &lt;memory&gt;\n#include &lt;utility&gt;\n\nnamespace bg  = boost::geometry;\nnamespace bgi = boost::geometry::index;\n\ntemplate &lt;typename T&gt;\nusing point_cart_2d = bg::model::point&lt;T, 2, bg::cs::cartesian&gt;;\n\ntemplate &lt;typename T&gt;\nusing box = bg::model::box&lt;T&gt;;\n\ntemplate &lt;typename T&gt;\nusing payload = std::pair&lt;box&lt;point_cart_2d&lt;double&gt;&gt;, T&gt;;\n\ntemplate &lt;typename T&gt;\nusing vec = std::vector&lt;T&gt;;\n\nstruct guts {\n  int a = 11;\n  int b = 22;\n};\n\nstruct guts_comp {\n  using result_type = bool;\n  bool operator()(payload&lt;guts&gt; const &amp;v1, payload&lt;guts&gt; const &amp;v2) const {\n    return bg::equals(v1.first, v2.first) &amp;&amp; v1.second.a == v2.second.a;\n  }\n};\n\nusing rtree = bgi::rtree&lt;payload&lt;guts&gt;,\n                         bgi::rstar&lt;16&gt;,\n                         bgi::indexable&lt;payload&lt;guts&gt;&gt;,\n                         guts_comp&gt;;\n\nint main() {\n  vec&lt;payload&lt;guts&gt;&gt; v = {{{{1.0, 1.0}, {7.0, 4.0}}, {2, 3}}};\n  rtree              rt;\n  // the poem starts here\n  for (const auto &amp;k : v) {\n    rt.insert(k);\n  }\n  // or here\n  std::copy(v.begin(), v.end(), bgi::inserter(rt));\n}\n</code></pre>\n\n<p>I'm trying to use boost::geometry with a custom Type, I have defined a custom type and an operator() to compare the std::pair I'll put inside my rtree but I still receive errors and this doesn't compile .</p>\n\n<p>I think this should just work, but it doesn't, I have no idea why after reading the docs of the library .</p>\n"}, {"tags": ["c++", "opengl", "glfw", "glew"], "comments": [{"owner": {"reputation": 17293, "user_id": 736162, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/eb6854f56cb2aa14ce798b53ea667639?s=128&d=identicon&r=PG", "display_name": "Andrea", "link": "https://stackoverflow.com/users/736162/andrea"}, "edited": false, "score": 1, "creation_date": 1577371325, "post_id": 59474485, "comment_id": 105154055, "body": "Everything looks good to me\u2026 have you checked you&#39;ve glUseProgram&#39;d the right program before drawing?"}, {"owner": {"reputation": 519, "user_id": 1886914, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/R9fhp.jpg?s=128&g=1", "display_name": "Kenny83", "link": "https://stackoverflow.com/users/1886914/kenny83"}, "reply_to_user": {"reputation": 17293, "user_id": 736162, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/eb6854f56cb2aa14ce798b53ea667639?s=128&d=identicon&r=PG", "display_name": "Andrea", "link": "https://stackoverflow.com/users/736162/andrea"}, "edited": false, "score": 0, "creation_date": 1577373875, "post_id": 59474485, "comment_id": 105154922, "body": "Many thanks @Andrea, that was the problem! Kind of...see my answer for details. But I still think you deserve the rep, so if you post a proper answer I&#39;ll accept it ;-)"}], "answers": [{"comments": [{"owner": {"reputation": 519, "user_id": 1886914, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/R9fhp.jpg?s=128&g=1", "display_name": "Kenny83", "link": "https://stackoverflow.com/users/1886914/kenny83"}, "edited": false, "score": 0, "creation_date": 1577238756, "post_id": 59474585, "comment_id": 105127548, "body": "Yep it&#39;s being done elsewhere. Thanks anyway for trying to help :-)"}], "tags": [], "owner": {"reputation": 29, "user_id": 12568350, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92b0f13375d11f838a0ed3dde1114eaf?s=128&d=identicon&r=PG&f=1", "display_name": "jh100", "link": "https://stackoverflow.com/users/12568350/jh100"}, "is_accepted": false, "score": 0, "last_activity_date": 1577238018, "creation_date": 1577238018, "answer_id": 59474585, "question_id": 59474485, "link": "https://stackoverflow.com/questions/59474485/opengl-adding-a-second-shader-attribute-causes-a-blank-screen/59474585#59474585", "title": "OpenGL - Adding a second shader attribute causes a blank screen", "body": "<p>The code posted isn't setting the projection uniform -- Maybe that's being done somewhere else, but it's not clear if that's the case here.</p>\n"}, {"comments": [{"owner": {"reputation": 17293, "user_id": 736162, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/eb6854f56cb2aa14ce798b53ea667639?s=128&d=identicon&r=PG", "display_name": "Andrea", "link": "https://stackoverflow.com/users/736162/andrea"}, "edited": false, "score": 0, "creation_date": 1577383283, "post_id": 59490278, "comment_id": 105158022, "body": "Suspicious. Either your code is actually subtly different from before, or this is some kind of undefined behaviour?"}, {"owner": {"reputation": 519, "user_id": 1886914, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/R9fhp.jpg?s=128&g=1", "display_name": "Kenny83", "link": "https://stackoverflow.com/users/1886914/kenny83"}, "reply_to_user": {"reputation": 17293, "user_id": 736162, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/eb6854f56cb2aa14ce798b53ea667639?s=128&d=identicon&r=PG", "display_name": "Andrea", "link": "https://stackoverflow.com/users/736162/andrea"}, "edited": false, "score": 1, "creation_date": 1577383760, "post_id": 59490278, "comment_id": 105158149, "body": "@Andrea Yeah not sure, although I think me not noticing some crucial change is much more likely than having discoved UB. Anyway it works now so that&#39;s the main thing. I&#39;ll be sure to whine about it on here if that ever changes again :P"}], "tags": [], "owner": {"reputation": 519, "user_id": 1886914, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/R9fhp.jpg?s=128&g=1", "display_name": "Kenny83", "link": "https://stackoverflow.com/users/1886914/kenny83"}, "is_accepted": false, "score": 0, "last_activity_date": 1577373518, "creation_date": 1577373518, "answer_id": 59490278, "question_id": 59474485, "link": "https://stackoverflow.com/questions/59474485/opengl-adding-a-second-shader-attribute-causes-a-blank-screen/59490278#59490278", "title": "OpenGL - Adding a second shader attribute causes a blank screen", "body": "<p>OK the weirdest thing just happened: after reading @Andrea's comment above...</p>\n\n<blockquote>\n  <p>Everything looks good to me\u2026 have you checked you've glUseProgram'd the right program before drawing?</p>\n</blockquote>\n\n<p>...I decided to double-check, since I hadn't actually thought of that possibility. I've only been teaching myself about OpenGL from online tutorials, and only for a few days. So I thought it was quite possible that I <strong>had indeed</strong> made such a rookie error.</p>\n\n<p>So I opened up the project in VS 2019 for the first time since posting this question, added an <strong>explicit</strong> call to my <code>Shader</code> wrapper class' <code>Use()</code> method instead of relying on an implicit one (see <a href=\"https://learnopengl.com/code_viewer.php?code=in-practice/breakout/shader\" rel=\"nofollow noreferrer\">here</a> for details) and guess what? Just like magic, I got a green circle in the middle of the screen!</p>\n\n<p>That part isn't so weird; as I said before it's quite possible that I misread Joey's tutorial linked above or miscopied the code. But here's the kicker: after returning the code to the original non-working version (pasted verbatim from this question), <strong>it still works!!</strong></p>\n\n<p>Anyway problem solved I guess...I hate it when a bug magically fixes itself like this; you can't help but think that it will suddenly reappear later down the track. But for now I'm having a \"randomly-coloured polygon\" party, and loving it!</p>\n"}], "owner": {"reputation": 519, "user_id": 1886914, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/R9fhp.jpg?s=128&g=1", "display_name": "Kenny83", "link": "https://stackoverflow.com/users/1886914/kenny83"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 60, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1577373518, "creation_date": 1577236191, "question_id": 59474485, "link": "https://stackoverflow.com/questions/59474485/opengl-adding-a-second-shader-attribute-causes-a-blank-screen", "title": "OpenGL - Adding a second shader attribute causes a blank screen", "body": "<p>Seasons greetings everyone!</p>\n\n<p>I'm trying to write a generic <code>DrawPolygon()</code> function that will take a number of sides, position, colour and size, and render an n-sided regular polygon. Can someone please tell me what's wrong with the following code?</p>\n\n<pre><code>void drawPolygon(GLuint&amp; vao, GLuint&amp; vbo, GLfloat x,\n    GLfloat y, GLfloat radius, GLint numSides) {\n    auto numVertices = numSides + 2;\n    auto twoPi = 2.0f * M_PI;\n    auto vertexData = new GLfloat[numVertices * 5];\n\n    for (int i = 0; i &lt; numVertices; i++) {\n        vertexData[i * 5] = x + (radius *\n            cos(i * twoPi / numSides));\n        vertexData[i * 5 + 1] = y + (radius *\n            sin(i * twoPi / numSides));\n        vertexData[i * 5 + 2] = 0.0f;  // Colour data: red\n        vertexData[i * 5 + 3] = 1.0f;  // Colour data: green\n        vertexData[i * 5 + 4] = 0.0f;  // Colour data: blue\n    }\n\n    glBindBuffer(GL_ARRAY_BUFFER, vbo);\n    glBufferData(GL_ARRAY_BUFFER, numVertices * sizeof(\n        GLfloat) * 5, vertexData, GL_STATIC_DRAW);\n    glBindVertexArray(vao);\n\n    glEnableVertexAttribArray(0);\n    glVertexAttribPointer(0, 2, GL_FLOAT, GL_FALSE,\n        5 * sizeof(GLfloat), (void*)0);\n\n    glEnableVertexAttribArray(1);\n    glVertexAttribPointer(1, 3, GL_FLOAT, GL_FALSE, 5 *\n        sizeof(GLfloat), (void*)(2 * sizeof(GLfloat)));\n    glDrawArrays(GL_TRIANGLE_FAN, 0, numVertices);\n    auto error = glGetError();  // returns 0, i.e. no error\n\n    glBindBuffer(GL_ARRAY_BUFFER, 0);\n    glBindVertexArray(0);\n\n    delete[] vertexData;\n}\n</code></pre>\n\n<p>Vertex shader:</p>\n\n<pre><code>#version 330 core\n\nlayout (location = 0) in vec2 aPos;\nlayout (location = 1) in vec3 aColour;\n\nuniform mat4 projection;\n\nout vec3 fColour;\n\nvoid main() {\n    gl_Position = projection * vec4(\n        aPos.x, aPos.y, 0.0, 1.0); \n    fColour = aColour;\n}\n</code></pre>\n\n<p>Fragment shader:</p>\n\n<pre><code>#version 330 core\n\nin vec3 fColour;\nout vec4 FragColor;\n\nvoid main() {\n    FragColor = vec4(fColour, 1.0);   \n}\n</code></pre>\n\n<p>As you can see, I've hard-coded the colour values for now, but intend to pass them in as a <code>vec3</code> once I get it working. At the moment it just gives me a plain black screen :S Removing the second attribute and using a <code>uniform</code> instead works, but I'd like to know why the given code doesn't. MTIA!</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 141, "user_id": 7286877, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70fbaa62b70fa90d716a1ff1ecc32468?s=128&d=identicon&r=PG&f=1", "display_name": "vsh", "link": "https://stackoverflow.com/users/7286877/vsh"}, "edited": false, "score": 0, "creation_date": 1577233359, "post_id": 59474330, "comment_id": 105126923, "body": "std::variant can be useful here"}, {"owner": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "edited": false, "score": 2, "creation_date": 1577233585, "post_id": 59474330, "comment_id": 105126954, "body": "Your vector isn&#39;t storing <code>b</code> or <code>c</code> objects; it only stores <code>a</code>, so casting to something else would be undefined (see <a href=\"https://stackoverflow.com/questions/274626/what-is-object-slicing\">object slicing</a>).  Possibilities include (virtual) functions with different names, returning a <code>std::string</code>, or having a virtual <code>output</code> function actually do the output."}, {"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 2, "creation_date": 1577233586, "post_id": 59474330, "comment_id": 105126955, "body": "Does this answer your question? <a href=\"https://stackoverflow.com/questions/274626/what-is-object-slicing\">What is object slicing?</a>"}, {"owner": {"reputation": 1, "user_id": 12593325, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-PZnX8h2d0U4/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdcmwyl3kyt2JsIsZJpHywpn5_Rlw/photo.jpg?sz=128", "display_name": "darren zou", "link": "https://stackoverflow.com/users/12593325/darren-zou"}, "edited": false, "score": 0, "creation_date": 1577233715, "post_id": 59474330, "comment_id": 105126964, "body": "so what other ways can i store those objects in a way where I can access them?"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 1, "creation_date": 1577233889, "post_id": 59474330, "comment_id": 105126981, "body": "@darrenzou if you want to store hierarchy common solution is storing a (smart) pointer to the base class. - <code>std::vector&lt;std::unique_ptr&lt;a&gt;&gt;</code> in your case"}, {"owner": {"reputation": 1, "user_id": 12593325, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-PZnX8h2d0U4/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdcmwyl3kyt2JsIsZJpHywpn5_Rlw/photo.jpg?sz=128", "display_name": "darren zou", "link": "https://stackoverflow.com/users/12593325/darren-zou"}, "edited": false, "score": 0, "creation_date": 1577234432, "post_id": 59474330, "comment_id": 105127047, "body": "i got the error: no member named &#39;unique_ptr&#39; in namespace &#39;std&#39;"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1577234591, "post_id": 59474330, "comment_id": 105127069, "body": "<code>unique_ptr</code> can be found in the <code>&lt;memory&gt;</code> header if you are compiling to C++11 or a higher Standard revision. If you are compiling to C++14 or better, take advantage of <code>std::make_unique</code> as it removes a few failure cases that can result in memory leaks."}, {"owner": {"reputation": 9551, "user_id": 9837301, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9414V.png?s=128&g=1", "display_name": "JaMiT", "link": "https://stackoverflow.com/users/9837301/jamit"}, "edited": false, "score": 2, "creation_date": 1577235052, "post_id": 59474330, "comment_id": 105127123, "body": "I would propose that if you need to access a member function of a derived class when you have a collection of (pointers to) parent classes, then your inheritance design needs more work, rather than the part of the code that tries to access the function."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "reply_to_user": {"reputation": 9551, "user_id": 9837301, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9414V.png?s=128&g=1", "display_name": "JaMiT", "link": "https://stackoverflow.com/users/9837301/jamit"}, "edited": false, "score": 1, "creation_date": 1577235186, "post_id": 59474330, "comment_id": 105127144, "body": "A formalization of the point raised by @JaMiT: <a href=\"https://stackoverflow.com/questions/56860/what-is-an-example-of-the-liskov-substitution-principle\">The Liskov Substitution Principle</a>."}], "answers": [{"comments": [{"owner": {"reputation": 9551, "user_id": 9837301, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9414V.png?s=128&g=1", "display_name": "JaMiT", "link": "https://stackoverflow.com/users/9837301/jamit"}, "edited": false, "score": 1, "creation_date": 1577235096, "post_id": 59474412, "comment_id": 105127130, "body": "Why does this work? Code-only answers tend to be rather unhelpful in the long run."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 2, "creation_date": 1577235354, "post_id": 59474412, "comment_id": 105127171, "body": "This is an interesting solution to the problem and I will be happy to remove the downvote when you highlight the changes you made and explain why you made them."}, {"owner": {"reputation": 141, "user_id": 7286877, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70fbaa62b70fa90d716a1ff1ecc32468?s=128&d=identicon&r=PG&f=1", "display_name": "vsh", "link": "https://stackoverflow.com/users/7286877/vsh"}, "edited": false, "score": 0, "creation_date": 1577235609, "post_id": 59474412, "comment_id": 105127201, "body": "Base class declare virtual function to call which returns enum-tagged union, that can  store different types of result and tag which this type is. In vector you store pointers to base class and then call parent class function. When you want to get the result you define tag and according to it read needed field in union."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 1, "creation_date": 1577240429, "post_id": 59474412, "comment_id": 105127714, "body": "You do not need to do ugly enum-tagged solution - there is <code>std::variant</code> with visitor pattern"}, {"owner": {"reputation": 141, "user_id": 7286877, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70fbaa62b70fa90d716a1ff1ecc32468?s=128&d=identicon&r=PG&f=1", "display_name": "vsh", "link": "https://stackoverflow.com/users/7286877/vsh"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 1, "creation_date": 1577240555, "post_id": 59474412, "comment_id": 105127730, "body": "@Slava I proposed variant in a first comment to question asked"}, {"owner": {"reputation": 2178, "user_id": 2208372, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce0f8d54e87a4835f7cf67694cad247f?s=128&d=identicon&r=PG", "display_name": "Phil1970", "link": "https://stackoverflow.com/users/2208372/phil1970"}, "edited": false, "score": 0, "creation_date": 1577242980, "post_id": 59474412, "comment_id": 105127982, "body": "At that point, one should either modify the virtual function to something like <code>virtual void OutputTo(std::ostream &amp;s);</code> if he expect to have only a few function like that or use the visitor pattern if he has lot of such function but the class hierarchy is stable. I don&#39;t know much about <code>std::variant</code> but usually it is preferable to either use template or virtual function but not a mix of the 2."}], "tags": [], "owner": {"reputation": 141, "user_id": 7286877, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70fbaa62b70fa90d716a1ff1ecc32468?s=128&d=identicon&r=PG&f=1", "display_name": "vsh", "link": "https://stackoverflow.com/users/7286877/vsh"}, "is_accepted": false, "score": -2, "last_activity_date": 1577236128, "last_edit_date": 1577236128, "creation_date": 1577234825, "answer_id": 59474412, "question_id": 59474330, "link": "https://stackoverflow.com/questions/59474330/access-child-class-functions-from-a-vector-of-a-parent-class-without-downcasting/59474412#59474412", "title": "Access child class functions from a vector of a parent class without downcasting", "body": "<p>It is possible like this</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n\nstruct result\n{\n    enum\n    {\n        BOOL,\n        DOUBLE\n    } tag;\n    union ret {\n        double d;\n        bool b;\n    } r;\n};\n\nstd::ostream &amp;operator&lt;&lt;(std::ostream &amp;s, const result &amp;r)\n{\n    switch (r.tag)\n    {\n    case result::DOUBLE:\n        s &lt;&lt; r.r.d;\n        break;\n\n    case result::BOOL:\n        s &lt;&lt; r.r.b;\n        break;\n\n    default:\n        break;\n    }\n    return s;\n}\n\nclass a\n{\npublic:\n    virtual result output() = 0;\n};\n\nclass b : public a\n{\n    result output() override\n    {\n        result r{result::DOUBLE, 132.};\n        return r;\n    }\n};\nclass c : public a\n{\n    result output() override\n    {\n        result r{result::BOOL, false};\n        return r;\n    }\n};\n\nint main(int argc, char const *argv[])\n{\n    std::vector&lt;a *&gt; vec;\n    a *obj = new b;\n    a *obj2 = new c;\n    vec.push_back(obj);\n    vec.push_back(obj2);\n\n    for (int i = 0; i &lt; vec.size(); i++)\n    {\n        std::cout &lt;&lt; vec[i]-&gt;output() &lt;&lt; std::endl;\n    }\n    return 0;\n}\n</code></pre>\n\n<p>but its ugly. even more then</p>\n"}], "owner": {"reputation": 1, "user_id": 12593325, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-PZnX8h2d0U4/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdcmwyl3kyt2JsIsZJpHywpn5_Rlw/photo.jpg?sz=128", "display_name": "darren zou", "link": "https://stackoverflow.com/users/12593325/darren-zou"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 64, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1577236491, "creation_date": 1577233191, "last_edit_date": 1577236491, "question_id": 59474330, "link": "https://stackoverflow.com/questions/59474330/access-child-class-functions-from-a-vector-of-a-parent-class-without-downcasting", "title": "Access child class functions from a vector of a parent class without downcasting", "body": "<p>How can one access child class functions from a vector of a parent class without downcasting?</p>\n\n<p>example:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>class a {\n public:\n  ...\n};\n\nclass b : public a {\n  double output() {  // both child class have memeber function called output,\n                     // but they return different data type.\n    return 0;\n  }\n};\nclass c : public a {\n  bool output() { return false; }\n};\n\n// main\nvector&lt;a&gt; vec;\nb obj;\nc obj2;\nvec.push_back(obj);\nvec.push_back(obj2);\nfor (int i = 0; i &lt; vec.size(); i++) {\n  cout &lt;&lt; vec[i].output();\n}\n\n</code></pre>\n\n<p>Error:</p>\n\n<pre><code>error: no member function called \"output\" found in a\n</code></pre>\n\n<p>I have tried function overridding:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>class a{\npublic:\n  auto output()\n};\n</code></pre>\n\n<p>This approach don't work because I sometimes need to pass multiple parameters and this function doesn't allow that and will throw me the error: Function output expected 0 parameters, received x parameters.  </p>\n"}, {"tags": ["c++", "arrays", "pointers", "allocation"], "comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1577233582, "post_id": 59474221, "comment_id": 105126952, "body": "What is this 2D array made up of? How do you define it?"}, {"owner": {"reputation": 9551, "user_id": 9837301, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9414V.png?s=128&g=1", "display_name": "JaMiT", "link": "https://stackoverflow.com/users/9837301/jamit"}, "edited": false, "score": 0, "creation_date": 1577234299, "post_id": 59474221, "comment_id": 105127035, "body": "You tried to delete something by copying it? Something seems rather off here... In any event, you&#39;ll need to provide more details about what you have so far, since there are many ways to define a 2D array (some of which remove the need to explicitly delete columns)."}, {"owner": {"reputation": 9, "user_id": 12567749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70fffcff60119e810b16ac1667cb0e81?s=128&d=identicon&r=PG&f=1", "display_name": "kouzin", "link": "https://stackoverflow.com/users/12567749/kouzin"}, "edited": false, "score": 0, "creation_date": 1577348467, "post_id": 59474221, "comment_id": 105146532, "body": "you&#39;re right but the 2D if define using pointers, the solutions will be easy If I use vector"}], "answers": [{"tags": [], "owner": {"reputation": 154, "user_id": 6875705, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/8dIkX.png?s=128&g=1", "display_name": "Ibrahim.Sluma", "link": "https://stackoverflow.com/users/6875705/ibrahim-sluma"}, "is_accepted": false, "score": 0, "last_activity_date": 1577235753, "creation_date": 1577235753, "answer_id": 59474457, "question_id": 59474221, "link": "https://stackoverflow.com/questions/59474221/how-to-delete-columns-of-dynamic-array-in-c/59474457#59474457", "title": "How to delete columns of dynamic array in C++", "body": "<p>Because of dynamic arrays so the varable of the array is pointer for the first value so you can't get the size or even use sizeof to get the size , but there's no case where you use dynamic arrays witout knowing the size , either fixed or in runtime throw varable</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 12179440, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a306e78ee171e9d5a14643770427adb3?s=128&d=identicon&r=PG&f=1", "display_name": "Adros", "link": "https://stackoverflow.com/users/12179440/adros"}, "is_accepted": false, "score": 0, "last_activity_date": 1577236803, "creation_date": 1577236803, "answer_id": 59474516, "question_id": 59474221, "link": "https://stackoverflow.com/questions/59474221/how-to-delete-columns-of-dynamic-array-in-c/59474516#59474516", "title": "How to delete columns of dynamic array in C++", "body": "<p>This probably isn't the best way to do this but its' a potential solution</p>\n\n<pre><code>int removeColumn(int a){\nvector&lt;vector&lt;int&gt;&gt; ret(M);\nint i = 0;\nfor(vector&lt;int&gt; temp : Arr){\n        vector&lt;int&gt; tempp(N-1);\n        copy(temp.begin(), temp.begin()+a, tempp.begin());\n        copy(temp.begin()+a+1,temp.end(),tempp.begin()+a);\n        ret[i] = tempp;\n        i++;\n}\nArr = ret;\nreturn 0;\n</code></pre>\n\n<p>}</p>\n\n<p>Essentially you iterate over each row and use two copy statements to copy from the beginning to an index and from said index + 1 to the end. I'm sure there's a way to do this more elegantly, you could try looking at for_each loops however I doubt you could do it exclusively with copy. Tested it with this code.</p>\n\n<p><a href=\"https://repl.it/repls/PrettyTerrificOmnipage\" rel=\"nofollow noreferrer\">https://repl.it/repls/PrettyTerrificOmnipage</a></p>\n\n<p>Hope this helps</p>\n"}], "owner": {"reputation": 9, "user_id": 12567749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70fffcff60119e810b16ac1667cb0e81?s=128&d=identicon&r=PG&f=1", "display_name": "kouzin", "link": "https://stackoverflow.com/users/12567749/kouzin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 126, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1577236803, "creation_date": 1577231580, "question_id": 59474221, "link": "https://stackoverflow.com/questions/59474221/how-to-delete-columns-of-dynamic-array-in-c", "title": "How to delete columns of dynamic array in C++", "body": "<p>I need help tring to delete columns of 2D array in C++. I've tried the operation by making a copy of the array. It succeeded only from the start to middle or the middle to the end of array. witch algorithm to jump unwanted columns in the array when making copy.  </p>\n"}, {"tags": ["c++", "xcode"], "comments": [{"owner": {"reputation": 2385, "user_id": 1009270, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/33fcdc9c0604cf69abb15e17840d2a3c?s=128&d=identicon&r=PG", "display_name": "john elemans", "link": "https://stackoverflow.com/users/1009270/john-elemans"}, "edited": false, "score": 0, "creation_date": 1577229030, "post_id": 59474002, "comment_id": 105126356, "body": "At the top of the left column of a project window you will see 9 small icons. The rightmost one, a speech bubble, is where build logs are found. Click there, the list of builds will show, click on a build to select it and the build log will show. Long errors will show on the right side with a disclosure bubble."}, {"owner": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "edited": false, "score": 0, "creation_date": 1577230628, "post_id": 59474002, "comment_id": 105126576, "body": "There&#39;s also a triangular-shaped icon in that window which lists all build issues."}], "owner": {"reputation": 257, "user_id": 2010357, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/IeoRE.jpg?s=128&g=1", "display_name": "Anthony Mannucci", "link": "https://stackoverflow.com/users/2010357/anthony-mannucci"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 86, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1577228461, "creation_date": 1577228461, "question_id": 59474002, "link": "https://stackoverflow.com/questions/59474002/where-are-compiler-errors-shown-in-xcode-11-c-code", "title": "Where are compiler errors shown in Xcode 11? C++ code", "body": "<p>I am getting build failure in Xcode 11. I cannot see any compiler errors, however. I just see the message \"Build Failed\". In the upper right, I hit the box with the line at the bottom. That shows two sub-windows at the bottom. On the left, the window has a label \"Auto\". On the right, the window has the label \"All output\". These are at the bottom. However, nothing appears in them even when there is clearly a compiler error. Is there a compiler error window in Xcode? I also see errors inserted in the source window itself. Maybe that's all there is?</p>\n"}, {"tags": ["c++", "xcode", "boost"], "answers": [{"comments": [{"owner": {"reputation": 257, "user_id": 2010357, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/IeoRE.jpg?s=128&g=1", "display_name": "Anthony Mannucci", "link": "https://stackoverflow.com/users/2010357/anthony-mannucci"}, "edited": false, "score": 0, "creation_date": 1577301210, "post_id": 59475885, "comment_id": 105139061, "body": "Thank you. This works! I wanted to keep boost where it was, so I modified the Header Search path to be /opt/local/include, and boost is in there."}, {"owner": {"reputation": 257, "user_id": 2010357, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/IeoRE.jpg?s=128&g=1", "display_name": "Anthony Mannucci", "link": "https://stackoverflow.com/users/2010357/anthony-mannucci"}, "edited": false, "score": 0, "creation_date": 1577301680, "post_id": 59475885, "comment_id": 105139136, "body": "One problem was that &quot;Search Paths&quot; appears in the Basic options, but it did not show a way to add Header Search Paths until I went to the &quot;All&quot; tab, saw it there, and now, having changed, it appears in Basic options. A little confusing. I checked the docs, and this was not obvious."}, {"owner": {"reputation": 4103, "user_id": 162358, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/I2kN6.jpg?s=128&g=1", "display_name": "Keith John Hutchison", "link": "https://stackoverflow.com/users/162358/keith-john-hutchison"}, "edited": false, "score": 0, "creation_date": 1587965200, "post_id": 59475885, "comment_id": 108706425, "body": "Item 3. Copy boost_1_72_0 folder inside project TestBoost folder, so it is located aside of TestBoost.xcodeproj made it clear to me how to set the search header paths."}], "tags": [], "owner": {"reputation": 118981, "user_id": 12299030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Hx4Fa.jpg?s=128&g=1", "display_name": "Asperi", "link": "https://stackoverflow.com/users/12299030/asperi"}, "is_accepted": true, "score": 2, "last_activity_date": 1577256203, "creation_date": 1577256203, "answer_id": 59475885, "question_id": 59473859, "link": "https://stackoverflow.com/questions/59473859/how-do-i-add-the-boost-library-to-xcode-11-c/59475885#59475885", "title": "How do I add the boost library to Xcode 11? C++", "body": "<p>I prefer to keep dependent libraries inside project area. So here is how I just do it for test:</p>\n\n<ol>\n<li><p>Create new TestBoost project in Xcode from <code>macOS Command-line App</code> C++ template <br>\n(now there is TestBoost folder where TestBoost.xcodeproj is located)</p></li>\n<li><p>Download latest <code>boost</code> <a href=\"https://dl.bintray.com/boostorg/release/1.72.0/source/boost_1_72_0.tar.gz\" rel=\"nofollow noreferrer\">boost_1_72_0.tar.gz</a> and unarchive it <br>\n(now there <code>boost_1_72_0</code> folder with boost) </p></li>\n<li><p>Copy <code>boost_1_72_0</code> folder inside project <code>TestBoost</code> folder, so it is located aside of TestBoost.xcodeproj <br></p></li>\n<li><p>In Xcode Project Navigator select <code>TestBoost</code> project > select <code>TestBoost</code> target > select <code>Build Settings</code> tab</p></li>\n<li><p>In <code>Search Paths</code> section select <code>Header Search Path</code>, double click on value area and enter <code>${SRCROOT}/boost_1_72_0</code> (leave <code>non-recursive</code> flag)</p></li>\n<li><p>Delete default <code>main.cpp</code> from <code>TestBoost</code> target (to avoid main function confusing) and add some example from boost for testing, eg. <code>boost_1_72_0/libs/algorithm/example/search_example.cpp</code></p></li>\n<li><p>Build &amp; Run > Success</p></li>\n</ol>\n\n<p>Output: \n<img src=\"https://i.stack.imgur.com/IJFG1.png\" alt=\"Xcode 11 boost integration\"></p>\n"}], "owner": {"reputation": 257, "user_id": 2010357, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/IeoRE.jpg?s=128&g=1", "display_name": "Anthony Mannucci", "link": "https://stackoverflow.com/users/2010357/anthony-mannucci"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1110, "favorite_count": 0, "accepted_answer_id": 59475885, "answer_count": 1, "score": 3, "last_activity_date": 1577256203, "creation_date": 1577226689, "last_edit_date": 1577236730, "question_id": 59473859, "link": "https://stackoverflow.com/questions/59473859/how-do-i-add-the-boost-library-to-xcode-11-c", "title": "How do I add the boost library to Xcode 11? C++", "body": "<p>I cannot find a way to add boost in Xcode 11.2.1. I found a setting under the target called \"Frameworks and Libraries\". I dragged the boost directory there, and it got added to the \"Frameworks\" section of the project. However, in building the project, it says \"file not found\". For example:</p>\n\n<pre><code>#include &lt;boost/lambda/lambda.hpp&gt; \n</code></pre>\n\n<p>results in a \"file not found\" error. Instead of adding boost, I dragged the entire include area of Macports. It took a while for Xcode to parse through that, but I get the same error. So, under Frameworks it has \"include\", but it cannot find the relevant hpp file, even though I checked and it's there in the boost tree. </p>\n\n<p>I have installed boost via Macports. It resides in /opt/local/include/boost. </p>\n\n<p>In the Xcode documentation, I saw a reference to \"USER_HEADER_SEARCH_PATHS\". I figured how to set  that in a configuration file, so I added a configuration file to the project. I added this to the configuration file:\nUSER_HEADER_SEARCH_PATHS = /opt/local/include/boost\nbut that does not work either. (If I remove the boost, that does not work either). </p>\n\n<p>When I select \"include\" in the Frameworks location of the project, I see that there are different settings \"Identity and Type\" for that object (right side of Xcode window). I selected \"absolute path\" and it shows the full path as /opt/local/include which is correct. However, this does not solve the problem either. </p>\n\n<p>Do I need to create a link in a pre-defined area so that Xcode can find it? </p>\n\n<p>I did find a rather ugly work-around: create a soft link to the boost library in the same area where the STL resides (within the Xcode.app directory structure). </p>\n\n<p>Using the setting only works with individual files. I can add individual file to the setting (via drag and drop), but it won't follow nested directories, so clearly this will not work for a library implemention such as boost. </p>\n"}, {"tags": ["c++", "multithreading", "relaxed-atomics"], "comments": [{"owner": {"reputation": 20522, "user_id": 11941443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f27a880243178eedf3abdab24898b335?s=128&d=identicon&r=PG&f=1", "display_name": "walnut", "link": "https://stackoverflow.com/users/11941443/walnut"}, "edited": false, "score": 0, "creation_date": 1577226518, "post_id": 59473790, "comment_id": 105126034, "body": "Is the initialization in thread 0 executed before the other two threads are started?"}, {"owner": {"reputation": 749, "user_id": 9525876, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca9b0269f64d7d8bb712ea1713313761?s=128&d=identicon&r=PG&f=1", "display_name": "Koosha", "link": "https://stackoverflow.com/users/9525876/koosha"}, "reply_to_user": {"reputation": 20522, "user_id": 11941443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f27a880243178eedf3abdab24898b335?s=128&d=identicon&r=PG&f=1", "display_name": "walnut", "link": "https://stackoverflow.com/users/11941443/walnut"}, "edited": false, "score": 0, "creation_date": 1577226595, "post_id": 59473790, "comment_id": 105126039, "body": "@walnut Yes, of course. Assume that &quot;the initialization in thread 0 is executed before the other two threads are started&quot;."}], "answers": [{"tags": [], "owner": {"reputation": 9602, "user_id": 7151494, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-a_FzvY-b2O0/AAAAAAAAAAI/AAAAAAAAAEw/kNwilSAvQTI/photo.jpg?sz=128", "display_name": "Fureeish", "link": "https://stackoverflow.com/users/7151494/fureeish"}, "is_accepted": true, "score": 5, "last_activity_date": 1577227840, "creation_date": 1577227840, "answer_id": 59473963, "question_id": 59473790, "link": "https://stackoverflow.com/questions/59473790/atomic-operations-on-a-single-variable/59473963#59473963", "title": "Atomic operations on a single variable", "body": "<p>Short answer: Yes.</p>\n\n<p>Long answer: <code>std::memory_order_relaxed</code> is described as:</p>\n\n<blockquote>\n  <p>Relaxed operation: there are no synchronization or ordering constraints imposed on other reads or writes, only this operation's atomicity is guaranteed.</p>\n</blockquote>\n\n<p><sup><a href=\"https://en.cppreference.com/w/cpp/atomic/memory_order#Constants\" rel=\"noreferrer\">Source</a></sup></p>\n\n<p>What this effectively means is that it only guarantees atomicity. That means that the <code>std::atomic::fetch_sub</code> operation will guarantee just the atomic read-modify-write operation, no ordering whatsoever regarding other operations. This, however, does not mean that the compiler may reorder two different <em>atomic</em> read, modify and write operations (that could lead to data race, which is Undefined Behaviour). They are still <strong>atomic</strong>.</p>\n\n<blockquote>\n  <p>Ideally I want <code>x</code> to be zero at the end. Is that the case, eventhough I am using <code>std::memory_order_relaxed</code>?</p>\n</blockquote>\n\n<p>Memory order won't matter in this case. None of them will interfere with basic guarantees of atomicity. The above statement you made will hold true for <em>any</em> memory order, because it holds true, by definition, for any atomic variable which is modified in such manner (two, potentially asynchronous, subtractions from the initial value of <code>2</code>).</p>\n\n<blockquote>\n  <p>To make the question more precise, is it guaranteed that 1) In both threads the return value is either <code>0</code> or <code>1</code>, and 2) The return value in Threads <code>1</code> and <code>2</code> are different.</p>\n</blockquote>\n\n<p>Yes and yes, assuming that <em>threads return the value that <code>x</code> holds just after the <code>fetch_sub</code> call</em>, which is probably technically incorrect (threads <em>don't</em> return values), but I see where you are coming from here.</p>\n"}], "owner": {"reputation": 749, "user_id": 9525876, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca9b0269f64d7d8bb712ea1713313761?s=128&d=identicon&r=PG&f=1", "display_name": "Koosha", "link": "https://stackoverflow.com/users/9525876/koosha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 112, "favorite_count": 1, "accepted_answer_id": 59473963, "answer_count": 1, "score": 1, "last_activity_date": 1577227891, "creation_date": 1577225949, "last_edit_date": 1577227891, "question_id": 59473790, "link": "https://stackoverflow.com/questions/59473790/atomic-operations-on-a-single-variable", "title": "Atomic operations on a single variable", "body": "<p>What are the possible final results for the variable <code>x</code> in the following C++ code fragment? (please answer based on what is allowed by the C++ standard and not what is currently available on different platforms)</p>\n\n<pre><code>// Inside Thread 0\nstd::atomic&lt;int&gt; x = {2};\n// Inside Thread 1\nx.fetch_sub(1,std::memory_order_relaxed)\n// Inside Thread 2\nx.fetch_sub(1,std::memory_order_relaxed)\n</code></pre>\n\n<p>Ideally I want <code>x</code> to be zero at the end. Is that the case, eventhough I am using <code>std::memory_order_relaxed</code>?</p>\n\n<p>Edit:\nTo make the question more precise, is it guaranteed that\n1) In Threads 1 and 2 the return value is either 0 or 1, and\n2) The return value in Threads 1 and 2 are different.</p>\n"}, {"tags": ["c++", "templates", "c++14", "c++17", "static-assert"], "comments": [{"owner": {"reputation": 5700, "user_id": 4934640, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2f69527ae459cbbda0ab5c2e08686a50?s=128&d=identicon&r=PG&f=1", "display_name": "user", "link": "https://stackoverflow.com/users/4934640/user"}, "edited": false, "score": 0, "creation_date": 1577226172, "post_id": 59473672, "comment_id": 105125978, "body": "I know the value it is printing in my example is fixed because I used a generic macro. But somehow could this macro could be fixed to show the actual value?"}, {"owner": {"reputation": 2178, "user_id": 2208372, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce0f8d54e87a4835f7cf67694cad247f?s=128&d=identicon&r=PG", "display_name": "Phil1970", "link": "https://stackoverflow.com/users/2208372/phil1970"}, "edited": false, "score": 1, "creation_date": 1577241166, "post_id": 59473672, "comment_id": 105127809, "body": "I don&#39;t think it is possible with <code>static_assert</code>. You could define a macro that would use a <code>template &lt;int c&gt; struct V {};</code> and try to make a copy of the struct and it would generate a compile time error if <code>c</code> value don&#39;t matches (something like cannot convert from <code>V&lt;30&gt;</code> to <code>V&lt;11&gt;</code>). The macro would need 2 parameters: expected and actual value and since it rely on compiler diagnostics, result might vary from compiler to compiler."}, {"owner": {"reputation": 5700, "user_id": 4934640, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2f69527ae459cbbda0ab5c2e08686a50?s=128&d=identicon&r=PG&f=1", "display_name": "user", "link": "https://stackoverflow.com/users/4934640/user"}, "reply_to_user": {"reputation": 2178, "user_id": 2208372, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce0f8d54e87a4835f7cf67694cad247f?s=128&d=identicon&r=PG", "display_name": "Phil1970", "link": "https://stackoverflow.com/users/2208372/phil1970"}, "edited": false, "score": 0, "creation_date": 1577241385, "post_id": 59473672, "comment_id": 105127831, "body": "@Phil1970, this seems awesome idea! Can you write an answer? (just sad they designed the standard <b><code>static_assert</code></b> with this problem)"}, {"owner": {"reputation": 2178, "user_id": 2208372, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce0f8d54e87a4835f7cf67694cad247f?s=128&d=identicon&r=PG", "display_name": "Phil1970", "link": "https://stackoverflow.com/users/2208372/phil1970"}, "edited": false, "score": 0, "creation_date": 1577242430, "post_id": 59473672, "comment_id": 105127919, "body": "I wrote such code maybe 15 years ago before <code>static_assert</code> was added to the language. I don&#39;t remember the exact implementation. In practice, <code>static_assert</code> works well enough and if you have a problem <i>guessing</i> the value, you can always debug the application by printing the actual value. Or use a unit test framework which usually would give both actual and expected values."}], "answers": [{"tags": [], "owner": {"reputation": 13563, "user_id": 992490, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac727873c5724326c84ed245faa9fe6c?s=128&d=identicon&r=PG", "display_name": "Marshall Clow", "link": "https://stackoverflow.com/users/992490/marshall-clow"}, "is_accepted": false, "score": 1, "last_activity_date": 1577225960, "creation_date": 1577225960, "answer_id": 59473792, "question_id": 59473672, "link": "https://stackoverflow.com/questions/59473672/how-to-make-the-static-assert-print-the-value-it-got-on-failure/59473792#59473792", "title": "How to make the `static_assert` print the value it got on failure?", "body": "<p>[ This is not really an answer to \"How to make static_assert print the value\", but rather an explanation of why the OP is getting the behavior that he is. ]</p>\n\n<p>Pre-c++17, <code>static_assert</code> takes two parameters.</p>\n\n<p>The first is the expression to be evaluated, and the second is the message to be printed when the expression does not evaluate to true.</p>\n\n<p>When you define your <code>STATIC_ASSERT</code> macro, you are giving <code>static_assert</code> the message that you want printed - and it is printing that message for you.</p>\n"}, {"tags": [], "owner": {"reputation": 3213, "user_id": 8494588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d35d4ad4186f4415eb43175b481cb2bd?s=128&d=identicon&r=PG&f=1", "display_name": "florestan", "link": "https://stackoverflow.com/users/8494588/florestan"}, "is_accepted": true, "score": 2, "last_activity_date": 1577371744, "creation_date": 1577371744, "answer_id": 59489979, "question_id": 59473672, "link": "https://stackoverflow.com/questions/59473672/how-to-make-the-static-assert-print-the-value-it-got-on-failure/59489979#59489979", "title": "How to make the `static_assert` print the value it got on failure?", "body": "<p>I often find it useful to wrap <code>static_asserts</code> in a function template. Then the compiler will print at least the function template parameters in the error message. If you combine this strategy with the value template approach of @Phil1970, you get pretty decent results.</p>\n\n<p>When compiled with GCC, the following snippet prints the error message containing your values: <code>In instantiation of 'constexpr void assert_equal(const_val&lt;T, A&gt;, const_val&lt;U, B&gt;) [with T = int; T A = 30; U = int; U B = 11]'</code></p>\n\n<p>Clang is even better: <code>&lt;source&gt;:13:5: error: static_assert failed due to requirement '30 == 11' \"Values are not equal!\"</code>.</p>\n\n<pre><code>#define MAKE_CONST(x) const_val&lt;decltype(x), x&gt;{}\n#define STATIC_ASSERT_EQUAL(x, y) assert_equal(MAKE_CONST(x), MAKE_CONST(y));\n\ntemplate&lt;typename T, T val&gt;\nstruct const_val {\n    constexpr const_val() = default;\n    constexpr const_val(T v) {}\n};\n\ntemplate&lt;typename T, T A, typename U, U B&gt;\nconstexpr void assert_equal(const_val&lt;T, A&gt;, const_val&lt;U, B&gt;) {\n    static_assert(A == B, \"Values are not equal!\");\n}\n\ntemplate&lt; int PathLength &gt;\nconstexpr const int startfindlastslash(const char (&amp;path)[PathLength]) {\n    return PathLength;\n}\n\nint main(int argc, char const *argv[])\n{\n  STATIC_ASSERT_EQUAL(startfindlastslash( \"cppdebugger/test_debugger.cpp\" ), 11);\n}\n</code></pre>\n\n<p>It's not exactly the syntax you were using and it involves an additional macro for convenience, but hopefully it's sufficient for your purpose...</p>\n\n<p>Live code <a href=\"https://godbolt.org/z/aQSQev\" rel=\"nofollow noreferrer\">here</a>.</p>\n"}], "owner": {"reputation": 5700, "user_id": 4934640, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2f69527ae459cbbda0ab5c2e08686a50?s=128&d=identicon&r=PG&f=1", "display_name": "user", "link": "https://stackoverflow.com/users/4934640/user"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 749, "favorite_count": 2, "accepted_answer_id": 59489979, "answer_count": 2, "score": 2, "last_activity_date": 1577371744, "creation_date": 1577224558, "question_id": 59473672, "link": "https://stackoverflow.com/questions/59473672/how-to-make-the-static-assert-print-the-value-it-got-on-failure", "title": "How to make the `static_assert` print the value it got on failure?", "body": "<p>Running this:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#define STATIC_ASSERT(...) static_assert(__VA_ARGS__, #__VA_ARGS__)\n\ntemplate&lt; int PathLength &gt;\nconstexpr const int startfindlastslash(const char (&amp;path)[PathLength]) {\n    return PathLength;\n}\n\nint main(int argc, char const *argv[])\n{\n    STATIC_ASSERT( startfindlastslash( \"cppdebugger/test_debugger.cpp\" ) == 11 );\n}\n</code></pre>\n\n<p>You got:</p>\n\n<ol>\n<li><p><strong><code>g++ -o main.exe --std=c++14 test_debugger.cpp</code></strong></p>\n\n<pre><code>test_debugger.cpp: In function \u2018int main(int, const char**)\u2019:\ntest_debugger.cpp:1:28: error: static assertion failed: startfindlastslash( \"cppdebugger/test_debugger.cpp\" ) == 11\n #define STATIC_ASSERT(...) static_assert(__VA_ARGS__, #__VA_ARGS__)\n                            ^\ntest_debugger.cpp:10:5: note: in expansion of macro \u2018STATIC_ASSERT\u2019\n     STATIC_ASSERT( startfindlastslash( \"cppdebugger/test_debugger.cpp\" ) == 11 );\n     ^~~~~~~~~~~~~\n</code></pre></li>\n<li><p><strong><code>clang++ -Xclang -ast-print -fsyntax-only --std=c++14 test_debugger.cpp &gt; main.exe</code></strong></p>\n\n<pre><code>test_debugger.cpp:10:5: error: static_assert failed due to requirement 'startfindlastslash(\"cppdebugger/test_debugger.cpp\") == 11' \"startfindlastslash(\n      \\\"cppdebugger/test_debugger.cpp\\\" ) == 11\"\n    STATIC_ASSERT( startfindlastslash( \"cppdebugger/test_debugger.cpp\" ) == 11 );\n    ^              ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\ntest_debugger.cpp:1:28: note: expanded from macro 'STATIC_ASSERT'\n#define STATIC_ASSERT(...) static_assert(__VA_ARGS__, #__VA_ARGS__)\n                           ^             ~~~~~~~~~~~\n1 error generated.\n</code></pre></li>\n</ol>\n\n<p>The compiler does not tell which one was the value it was supposed to get, it only says the value is not equal.</p>\n"}, {"tags": ["c++"], "answers": [{"comments": [{"owner": {"reputation": 736, "user_id": 2006632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AHVIg.jpg?s=128&g=1", "display_name": "4LegsDrivenCat", "link": "https://stackoverflow.com/users/2006632/4legsdrivencat"}, "edited": false, "score": 0, "creation_date": 1577226245, "post_id": 59473786, "comment_id": 105125989, "body": "Thanks! Do you find error messages meaningful in GCC and Clang? I find them confusing. What <code>primary-expression</code> expects GCC? Why Clang refers to return type of <code>oops()</code> if it should discard its value? Can you please add this to the answer?"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "reply_to_user": {"reputation": 736, "user_id": 2006632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AHVIg.jpg?s=128&g=1", "display_name": "4LegsDrivenCat", "link": "https://stackoverflow.com/users/2006632/4legsdrivencat"}, "edited": false, "score": 0, "creation_date": 1577227054, "post_id": 59473786, "comment_id": 105126094, "body": "<code>return oops(&quot;&quot;), {};</code> is wrong, as second operand should be expression and <code>{}</code> is not (both reports that error (first for gcc, last for clang)). Continue after error (to report all error) is difficult. Clang supposes that intent is <code>return oops(&quot;&quot;); ERROR</code> but <code>return oops(&quot;&quot;);</code> is also an error with incompatible return type."}, {"owner": {"reputation": 736, "user_id": 2006632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AHVIg.jpg?s=128&g=1", "display_name": "4LegsDrivenCat", "link": "https://stackoverflow.com/users/2006632/4legsdrivencat"}, "edited": false, "score": 0, "creation_date": 1577227367, "post_id": 59473786, "comment_id": 105126140, "body": "Aha, it explains why it refers to return type of <code>oops</code>. As to <code>primary-expression</code> I still don&#39;t get it. If <code>primary expression</code> is expression before comma, then there seems nothing wrong with it: function call is expression, right? The problem is with secondary expression?"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "reply_to_user": {"reputation": 736, "user_id": 2006632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AHVIg.jpg?s=128&g=1", "display_name": "4LegsDrivenCat", "link": "https://stackoverflow.com/users/2006632/4legsdrivencat"}, "edited": false, "score": 0, "creation_date": 1577227652, "post_id": 59473786, "comment_id": 105126174, "body": "comma operator requires that both operand are expression, <code>{}</code> is not. So we have <code>oops(&quot;&quot;), ERROR_NotAExpression</code>."}], "tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": false, "score": 2, "last_activity_date": 1577225912, "creation_date": 1577225912, "answer_id": 59473786, "question_id": 59473651, "link": "https://stackoverflow.com/questions/59473651/when-return-statement-comma-operator-braced-init-list-and-stdunique-ptr-come/59473786#59473786", "title": "When return statement, comma operator, braced-init-list and std::unique_ptr come together", "body": "<p><code>{}</code> has no types, so with comma operator <code>oops(\"\"), {}</code> is wrong.</p>\n\n<p><code>return {};</code> has special treatment with <a href=\"https://en.cppreference.com/w/cpp/language/list_initialization\" rel=\"nofollow noreferrer\">copy initialization</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 736, "user_id": 2006632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AHVIg.jpg?s=128&g=1", "display_name": "4LegsDrivenCat", "link": "https://stackoverflow.com/users/2006632/4legsdrivencat"}, "edited": false, "score": 0, "creation_date": 1577226496, "post_id": 59473808, "comment_id": 105126030, "body": "Thanks! Do you find error messages meaningful in GCC and Clang? I find them confusing. What <code>primary-expression</code> expects GCC? Why Clang refers to return type of <code>oops()</code> if it should discard its value? Can you please add this to the answer?"}], "tags": [], "owner": {"reputation": 22091, "user_id": 5684257, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea5090cde8ea066a1fda67ed52dd5084?s=128&d=identicon&r=PG&f=1", "display_name": "HTNW", "link": "https://stackoverflow.com/users/5684257/htnw"}, "is_accepted": true, "score": 4, "last_activity_date": 1577228148, "last_edit_date": 1577228148, "creation_date": 1577226105, "answer_id": 59473808, "question_id": 59473651, "link": "https://stackoverflow.com/questions/59473651/when-return-statement-comma-operator-braced-init-list-and-stdunique-ptr-come/59473808#59473808", "title": "When return statement, comma operator, braced-init-list and std::unique_ptr come together", "body": "<p><code>{}</code> is not an expression. <code>return {...};</code> is its own special syntax (a form of <a href=\"https://en.cppreference.com/w/cpp/language/list_initialization\" rel=\"nofollow noreferrer\">list initialization</a>) that figures out the return type from the function's signature, as if by <code>Ret{...}</code> where <code>Ret</code> is the return type:</p>\n\n<pre><code>Ret f() {\n    return {...}; // special syntax for return; {args...} need not be a valid expression\n}\n// same as\nRet f() {\n    return Ret{...}; // generic return &lt;expression&gt; syntax; Ret{args...} must be a valid expression\n}\n</code></pre>\n\n<p>There is no special syntax in <code>return a, b</code>. It's just the expression <code>a, b</code> being returned using the normal <code>return</code> syntax. The comma operator requires both <code>a</code> and <code>b</code> to be expressions, but since <code>{}</code> is <em>not</em> an expression, expressions like <code>oops(\"\"), {}</code> is invalid syntax.</p>\n\n<p>As an aside, there are other places where <code>{...}</code> can be used that make it look like it's an expression when it's actually not, e.g. function calls:</p>\n\n<pre><code>void f(std::string);\nf({5, 'a'})\n</code></pre>\n\n<p>Again, though this looks like <code>{5, 'a'}</code> is an expression with type <code>std::string</code> (as is the intention), it is not. The <code>{5, 'a'}</code> is part of the function call itself, and its type is decided by overload resolution.</p>\n\n<p>As to the compiler errors, both of them are being confused by the fact that <code>oops(\"\"), {}</code> is invalid syntax as an expression. GCC appears to have read <code>oops(\"\"),</code>, and is thus expecting an expression to follow. But expressions cannot start with <code>{</code>, so it reads that character and immediately barfs, complaining that it was expecting an expression to begin. Clang does the same thing. I think that Clang then continues, in its quest to be \"helpful\", to pretend that you just didn't write the <code>, {};</code> part (that is, as if you wrote <code>return oops(\"\");</code>), and issues an error for that, too. This behavior is e.g. what allows Clang to provide useful type errors even if you misspell something; that is, if you were to run Clang on</p>\n\n<pre><code>void supercalifragilisticexpialidocious(std::string);\nint main() { supercalifragilisticexpialidociuos(7); }\n</code></pre>\n\n<p>it would first issue an error for the bad spelling (<code>-ous -&gt; -uos</code>), suggest the correct spelling, and then it would issue an error for the type mismatch between the <code>int</code> <code>7</code> and the argument type <code>std::string</code> as if you had already fixed the spelling. Similarly, here, it's issuing one error for the bad syntax and then a second error as if you had gotten rid of the bad syntax. However, it's not very helpful in this case since the \"fix\" it imagines you using is not the actual fix.</p>\n"}], "owner": {"reputation": 736, "user_id": 2006632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AHVIg.jpg?s=128&g=1", "display_name": "4LegsDrivenCat", "link": "https://stackoverflow.com/users/2006632/4legsdrivencat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 1, "accepted_answer_id": 59473808, "answer_count": 2, "score": 3, "last_activity_date": 1577228148, "creation_date": 1577224258, "last_edit_date": 1577224561, "question_id": 59473651, "link": "https://stackoverflow.com/questions/59473651/when-return-statement-comma-operator-braced-init-list-and-stdunique-ptr-come", "title": "When return statement, comma operator, braced-init-list and std::unique_ptr come together", "body": "<p>In the code below, why do I get compilation error for <code>n = 8</code> whereas all other cases are OK? My intent was to report some error and return empty pointer without cluttering the code with unnecessary braces. I will use nullptr for this purpose but I'm curious why <code>{}</code> fails to compile with comma operator whereas it works alone.</p>\n\n<p>You can play with this code <a href=\"https://godbolt.org/z/NaNHYe\" rel=\"nofollow noreferrer\">here</a>. I used C++20 setting.</p>\n\n<pre><code>#include &lt;cstdint&gt;\n#include &lt;memory&gt;\n\nvoid oops(const char*) {\n}\n\nstd::unique_ptr&lt;uint8_t[]&gt; please_do(int n) {\n    if (n == 1)\n        return std::unique_ptr&lt;uint8_t[]&gt;(); // compiles ok\n    if (n == 2)\n        return oops(\"\"), std::unique_ptr&lt;uint8_t[]&gt;(); // compiles ok\n\n    if (n == 3)\n        return std::make_unique&lt;uint8_t[]&gt;(n); // compiles ok\n    if (n == 4)\n        return oops(\"\"), std::make_unique&lt;uint8_t[]&gt;(n); // compiles ok\n\n    if (n == 5)\n        return nullptr; // compiles ok\n    if (n == 6)\n        return oops(\"\"), nullptr; // compiles ok\n\n    if (n == 7)\n        return {}; // compiles ok\n    if (n == 8)\n        return oops(\"\"), {}; // why compilation error?\n\n    return nullptr; // compiles ok\n}\n\nint main() {\n    please_do(42);\n    return 0;\n}\n</code></pre>\n\n<p>GCC 9.2 output:</p>\n\n<pre><code>&lt;source&gt;: In function 'std::unique_ptr&lt;unsigned char []&gt; please_do(int)':\n\n&lt;source&gt;:26:26: error: expected primary-expression before '{' token\n\n   26 |         return oops(\"\"), {}; // why compilation error?\n\n      |                          ^\n\n&lt;source&gt;:26:25: error: expected ';' before '{' token\n\n   26 |         return oops(\"\"), {}; // why compilation error?\n\n      |                         ^~\n\n      |                         ;\n</code></pre>\n\n<p>Clang 9.0.0 output:</p>\n\n<pre><code>&lt;source&gt;:26:16: error: no viable conversion from returned value of type 'void' to function return type 'std::unique_ptr&lt;uint8_t []&gt;'\n\n        return oops(\"\"), {}; // why compilation error?\n\n               ^~~~~~~~\n\n/opt/compiler-explorer/gcc-9.2.0/lib/gcc/x86_64-linux-gnu/9.2.0/../../../../include/c++/9.2.0/bits/unique_ptr.h:528:7: note: candidate constructor not viable: cannot convert argument of incomplete type 'void' to 'std::unique_ptr&lt;unsigned char [], std::default_delete&lt;unsigned char []&gt; &gt; &amp;&amp;' for 1st argument\n\n      unique_ptr(unique_ptr&amp;&amp; __u) noexcept\n\n      ^\n\n/opt/compiler-explorer/gcc-9.2.0/lib/gcc/x86_64-linux-gnu/9.2.0/../../../../include/c++/9.2.0/bits/unique_ptr.h:533:12: note: candidate constructor template not viable: cannot convert argument of incomplete type 'void' to 'std::nullptr_t' (aka 'nullptr_t') for 1st argument\n\n        constexpr unique_ptr(nullptr_t) noexcept\n\n                  ^\n\n/opt/compiler-explorer/gcc-9.2.0/lib/gcc/x86_64-linux-gnu/9.2.0/../../../../include/c++/9.2.0/bits/unique_ptr.h:681:7: note: candidate constructor not viable: cannot convert argument of incomplete type 'void' to 'const std::unique_ptr&lt;unsigned char [], std::default_delete&lt;unsigned char []&gt; &gt; &amp;' for 1st argument\n\n      unique_ptr(const unique_ptr&amp;) = delete;\n\n      ^\n\n/opt/compiler-explorer/gcc-9.2.0/lib/gcc/x86_64-linux-gnu/9.2.0/../../../../include/c++/9.2.0/bits/unique_ptr.h:542:2: note: candidate template ignored: could not match 'unique_ptr&lt;type-parameter-0-0, type-parameter-0-1&gt;' against 'void'\n\n        unique_ptr(unique_ptr&lt;_Up, _Ep&gt;&amp;&amp; __u) noexcept\n\n        ^\n\n&lt;source&gt;:26:24: error: expected expression\n\n        return oops(\"\"), {}; // why compilation error?\n\n                       ^\n</code></pre>\n"}, {"tags": ["c++", "templates"], "comments": [{"owner": {"reputation": 9434, "user_id": 528720, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZpqMk.png?s=128&g=1", "display_name": "&#214;&#246; Tiib", "link": "https://stackoverflow.com/users/528720/%c3%96%c3%b6-tiib"}, "edited": false, "score": 4, "creation_date": 1577223669, "post_id": 59473460, "comment_id": 105125542, "body": "Because functions are subject of overload resolution and so you can have several function templates with same name that accept different arguments. Partial specializations just complicate it without any gain."}, {"owner": {"reputation": 15165, "user_id": 1116364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b67dfca0caba03083330d39a304b1766?s=128&d=identicon&r=PG", "display_name": "Daniel Jour", "link": "https://stackoverflow.com/users/1116364/daniel-jour"}, "edited": false, "score": 1, "creation_date": 1577227935, "post_id": 59473460, "comment_id": 105126210, "body": "&quot;loose functions&quot; --&gt; called &quot;free functions&quot; most of the time AFAIK"}, {"owner": {"reputation": 9551, "user_id": 9837301, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9414V.png?s=128&g=1", "display_name": "JaMiT", "link": "https://stackoverflow.com/users/9837301/jamit"}, "edited": false, "score": 0, "creation_date": 1577234007, "post_id": 59473460, "comment_id": 105126997, "body": "What sort of answer are you looking for? A simple &quot;because that&#39;s what the standard says&quot; answer? Something that quotes the part of the standard that says it? A reason why the standard says it? Something else?"}, {"owner": {"reputation": 5700, "user_id": 4934640, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2f69527ae459cbbda0ab5c2e08686a50?s=128&d=identicon&r=PG&f=1", "display_name": "user", "link": "https://stackoverflow.com/users/4934640/user"}, "reply_to_user": {"reputation": 9551, "user_id": 9837301, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9414V.png?s=128&g=1", "display_name": "JaMiT", "link": "https://stackoverflow.com/users/9837301/jamit"}, "edited": false, "score": 0, "creation_date": 1577235899, "post_id": 59473460, "comment_id": 105127229, "body": "@JaMiT, Just something that makes sense, i.e., a reasonable motive. For example, the impression I got was that the standard did not allowed it just because they said so or felt like (without any background/base). But as <b><code>@&#214;&#246;Tiib</code></b> said, it seems it has a reason, the implementation or either will be too complex, or there is a direct conflict with functions overloading. This itself can be an answer, but if you can show an example of how this can be a problem, it would be awesome."}, {"owner": {"reputation": 9551, "user_id": 9837301, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9414V.png?s=128&g=1", "display_name": "JaMiT", "link": "https://stackoverflow.com/users/9837301/jamit"}, "edited": false, "score": 0, "creation_date": 1577241024, "post_id": 59473460, "comment_id": 105127792, "body": "@user So reasons for the restriction, not necessarily the reasons considered by the standards committee. Hmm... may I suggest changing <i>&quot;why I cannot partially specialize a loose (free) functions?&quot;</i> to something more like <i>&quot;what justifications can be given for the C++ specification not allowing partial specialization of function templates&quot;</i>? (Sorry, I don&#39;t have a good answer.)"}, {"owner": {"reputation": 2178, "user_id": 2208372, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce0f8d54e87a4835f7cf67694cad247f?s=128&d=identicon&r=PG", "display_name": "Phil1970", "link": "https://stackoverflow.com/users/2208372/phil1970"}, "edited": false, "score": 0, "creation_date": 1577241641, "post_id": 59473460, "comment_id": 105127851, "body": "Essentially most if not all reasons you have found for member function should apply to free function and I would say even more given overloading which cause additional surprises depending if the partial specialization have been seen or not. Also there is an easy workaround as you can define a class and call it from the function. A few extra lines of code instead of make the language even more complicated."}, {"owner": {"reputation": 3008, "user_id": 1863938, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96ec4e16681460302ea67bfc201b76f3?s=128&d=identicon&r=PG", "display_name": "parktomatomi", "link": "https://stackoverflow.com/users/1863938/parktomatomi"}, "edited": false, "score": 1, "creation_date": 1577335912, "post_id": 59473460, "comment_id": 105143670, "body": "Many of those questions link to this explanation: <a href=\"http://www.gotw.ca/publications/mill17.htm\" rel=\"nofollow noreferrer\">gotw.ca/publications/mill17.htm</a>"}], "owner": {"reputation": 5700, "user_id": 4934640, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2f69527ae459cbbda0ab5c2e08686a50?s=128&d=identicon&r=PG&f=1", "display_name": "user", "link": "https://stackoverflow.com/users/4934640/user"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 799, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1577244739, "creation_date": 1577222177, "last_edit_date": 1577244739, "question_id": 59473460, "link": "https://stackoverflow.com/questions/59473460/why-not-allow-partial-specialization-of-template-functions", "title": "Why not allow partial specialization of template functions?", "body": "<p>I could find some questions asking about why I cannot specialize member functions:</p>\n\n<ol>\n<li><a href=\"https://stackoverflow.com/questions/32397948/why-cant-you-partially-specialize-a-class-member-function\">Why can&#39;t you partially specialize a class member function?</a></li>\n<li><a href=\"https://stackoverflow.com/questions/4920068/partially-specializing-member-function-implementations\">Partially specializing member-function implementations</a></li>\n<li><a href=\"https://stackoverflow.com/questions/25098758/why-cannot-partially-specialize-a-member-function-in-c-template\">why cannot partially specialize a member function, in c++ template</a></li>\n</ol>\n\n<p>But why does the C++ specification not allow partial specialization of template functions, when they are not necessarily members of a class?</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;array&gt;\n#define STATIC_ASSERT(...) static_assert(__VA_ARGS__, #__VA_ARGS__)\n\ntemplate&lt; int PathIndex, int PathLength &gt;\nconstexpr const int findlastslash(const char (&amp;path)[PathLength])\n{\n    constexpr const int end = PathLength - PathIndex;\n    return (PathIndex &gt;= 0 &amp;&amp; path[end] != '/' &amp;&amp; path[end] != '\\\\') \n            ? findlastslash&lt; PathIndex - 1, PathLength &gt;( path ) : ( end + 1 );\n}\n\ntemplate&lt; int PathLength &gt;\nconstexpr const int findlastslash&lt; 1, PathLength &gt;(const char (&amp;path)[PathLength]);\n\ntemplate&lt; int PathLength &gt;\nconstexpr const int startfindlastslash(const char (&amp;path)[PathLength]) {\n    return findlastslash&lt; PathLength &gt;( path );\n}\n\nint main(int argc, char const *argv[])\n{\n    STATIC_ASSERT( startfindlastslash( \"cppdebugger/test_debugger.cpp\" ) == 17 );\n}\n</code></pre>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>$ g++ -o main.exe --std=c++14 test_debugger.cpp\ntest_debugger.cpp:12:82: error: non-class, non-variable partial specialization \u2018findlastslash&lt;1, PathLength&gt;\u2019 is not allowed\n constexpr const int findlastslash&lt; 1, PathLength &gt;(const char (&amp;path)[PathLength]);\n                                                                                  ^\ntest_debugger.cpp: In instantiation of \u2018constexpr const int startfindlastslash(const char (&amp;)[PathLength]) [with int PathLength = 30]\u2019:\ntest_debugger.cpp:21:5:   required from here\ntest_debugger.cpp:16:39: error: call of overloaded \u2018findlastslash&lt;30&gt;(const char [30])\u2019 is ambiguous\n     return findlastslash&lt; PathLength &gt;( path );\n            ~~~~~~~~~~~~~~~~~~~~~~~~~~~^~~~~~~~\ntest_debugger.cpp:5:21: note: candidate: constexpr const int findlastslash(const char (&amp;)[PathLength]) [with int PathIndex = 30; int PathLength = 30]\n constexpr const int findlastslash(const char (&amp;path)[PathLength])\n                     ^~~~~~~~~~~~~\ntest_debugger.cpp:12:21: note: candidate: constexpr const int findlastslash(const char (&amp;)[PathLength]) [with int PathLength = 30]\n constexpr const int findlastslash&lt; 1, PathLength &gt;(const char (&amp;path)[PathLength]);\n                     ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\ntest_debugger.cpp: In function \u2018int main(int, const char**)\u2019:\ntest_debugger.cpp:2:28: error: non-constant condition for static assertion\n #define STATIC_ASSERT(...) static_assert(__VA_ARGS__, #__VA_ARGS__)\n                            ^\ntest_debugger.cpp:21:5: note: in expansion of macro \u2018STATIC_ASSERT\u2019\n     STATIC_ASSERT( startfindlastslash( \"cppdebugger/test_debugger.cpp\" ) == 17 );\n     ^~~~~~~~~~~~~\ntest_debugger.cpp:21:5:   in constexpr expansion of \u2018startfindlastslash&lt;30&gt;(\"cppdebugger/test_debugger.cpp\")\u2019\ntest_debugger.cpp:2:28: error: constexpr call flows off the end of the function\n #define STATIC_ASSERT(...) static_assert(__VA_ARGS__, #__VA_ARGS__)\n                            ^\ntest_debugger.cpp:21:5: note: in expansion of macro \u2018STATIC_ASSERT\u2019\n     STATIC_ASSERT( startfindlastslash( \"cppdebugger/test_debugger.cpp\" ) == 17 );\n</code></pre>\n\n<p>While free function template partial specializations are not allowed, we can do an equivalent using class template partial specialization. A correct version of this example using class partial template specialization can be found on: <a href=\"https://stackoverflow.com/questions/59472892/how-to-stop-template-recursion-while-using-parameter-deduction\">How to stop template recursion while using parameter deduction?</a></p>\n"}, {"tags": ["c++", "sfinae"], "comments": [{"owner": {"reputation": 5676, "user_id": 5023438, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Uvlov.jpg?s=128&g=1", "display_name": "alter igel", "link": "https://stackoverflow.com/users/5023438/alter-igel"}, "edited": false, "score": 0, "creation_date": 1577223605, "post_id": 59473453, "comment_id": 105125530, "body": "How do you run this program? <a href=\"http://coliru.stacked-crooked.com/a/c6e0966c7f83000b\" rel=\"nofollow noreferrer\">It won&#39;t compile for me.</a>"}, {"owner": {"reputation": 4581, "user_id": 2791577, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/rFnoU.png?s=128&g=1", "display_name": "keith", "link": "https://stackoverflow.com/users/2791577/keith"}, "reply_to_user": {"reputation": 5676, "user_id": 5023438, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Uvlov.jpg?s=128&g=1", "display_name": "alter igel", "link": "https://stackoverflow.com/users/5023438/alter-igel"}, "edited": false, "score": 0, "creation_date": 1577224706, "post_id": 59473453, "comment_id": 105125739, "body": "@alter igel it will need a C++17 compiler. I used MSVC 2019 to test this example but I mainly work with Clang."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1577227860, "post_id": 59473453, "comment_id": 105126202, "body": "Related: <a href=\"https://stackoverflow.com/questions/14600201/why-should-i-avoid-stdenable-if-in-function-signatures\">why-should-i-avoid-stdenable-if-in-function-signatures</a> and C++20 introduces also new ways with concept :-)"}, {"owner": {"reputation": 1257, "user_id": 5697743, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/00199350bd70257e700ff327d4944efb?s=128&d=identicon&r=PG", "display_name": "val is still with Monica", "link": "https://stackoverflow.com/users/5697743/val-is-still-with-monica"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1577272669, "post_id": 59473453, "comment_id": 105132796, "body": "@Jarod42 Concepts are one of most needed things for me from C++20."}], "answers": [{"comments": [{"owner": {"reputation": 4581, "user_id": 2791577, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/rFnoU.png?s=128&g=1", "display_name": "keith", "link": "https://stackoverflow.com/users/2791577/keith"}, "edited": false, "score": 1, "creation_date": 1577227320, "post_id": 59473540, "comment_id": 105126132, "body": "Thanks for the great explanation, I will prefer methods 2 &amp; 3 from now on :-)"}, {"owner": {"reputation": 86654, "user_id": 102441, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cf1b41a0f134b54597bf8a618be7880f?s=128&d=identicon&r=PG", "display_name": "Eric", "link": "https://stackoverflow.com/users/102441/eric"}, "edited": false, "score": 0, "creation_date": 1577293351, "post_id": 59473540, "comment_id": 105137498, "body": "<i>&quot;a default template parameter doesn&#39;t change the signature&quot;</i> - how is this different in your second variant, which also uses default template parameters?"}, {"owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "reply_to_user": {"reputation": 86654, "user_id": 102441, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cf1b41a0f134b54597bf8a618be7880f?s=128&d=identicon&r=PG", "display_name": "Eric", "link": "https://stackoverflow.com/users/102441/eric"}, "edited": false, "score": 1, "creation_date": 1577294472, "post_id": 59473540, "comment_id": 105137745, "body": "@Eric - Non simple to say... I suppose the other answer explain this better...  If SFINAE enable/disable the default template argument, the <code>foo()</code> function remain available when you call it with an explicit second template parameter (the <code>foo&lt;double, double&gt;();</code> call). And if remain available, there is an ambiguity with the other version. With method 2, SFINAE enable/disable the second argument, not the default parameter. So you can&#39;t call it explicating the parameter because there is a substitution failure that doesn&#39;t permit a second parameter. So the version is unavailable, so no ambiguity"}, {"owner": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "edited": false, "score": 3, "creation_date": 1577295358, "post_id": 59473540, "comment_id": 105137890, "body": "Method 3 has the additional advantage of generally not leaking into the symbol-name. The variant <code>auto foo() -&gt; std::enable_if_t&lt;...&gt;</code> is often useful to avoid hiding the function-signature and to allow using the function-arguments."}, {"owner": {"reputation": 86654, "user_id": 102441, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cf1b41a0f134b54597bf8a618be7880f?s=128&d=identicon&r=PG", "display_name": "Eric", "link": "https://stackoverflow.com/users/102441/eric"}, "edited": false, "score": 0, "creation_date": 1577308201, "post_id": 59473540, "comment_id": 105140173, "body": "@max66: so the key point is that substitution failure in a template parameter default is not an error if the parameter is supplied and no default is needed?"}, {"owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "reply_to_user": {"reputation": 86654, "user_id": 102441, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cf1b41a0f134b54597bf8a618be7880f?s=128&d=identicon&r=PG", "display_name": "Eric", "link": "https://stackoverflow.com/users/102441/eric"}, "edited": false, "score": 0, "creation_date": 1577310104, "post_id": 59473540, "comment_id": 105140472, "body": "@Eric - yes... seems to me that you caught the point: a substitution failure for a template parameter default disables only the calls of the function that don&#39;t express the parameter but maintain available the function itself. Method 2 disable that function itself."}], "tags": [], "owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "is_accepted": true, "score": 37, "last_activity_date": 1577291619, "last_edit_date": 1577291619, "creation_date": 1577222992, "answer_id": 59473540, "question_id": 59473453, "link": "https://stackoverflow.com/questions/59473453/approaches-to-function-sfinae-in-c/59473540#59473540", "title": "Approaches to function SFINAE in C++", "body": "<blockquote>\n  <p>I have seen method 2 used more often in stackoverflow, but I prefer method 1.</p>\n</blockquote>\n\n<p>Suggestion: prefer method 2.</p>\n\n<p>Both methods work with single functions. The problem arises when you have more than a function, with the same signature, and you want enable only one function of the set.</p>\n\n<p>Suppose that you want enable <code>foo()</code>, version 1, when <code>bar&lt;T&gt;()</code> (pretend it's a <code>constexpr</code> function) is <code>true</code>, and <code>foo()</code>, version 2, when <code>bar&lt;T&gt;()</code> is <code>false</code>.</p>\n\n<p>With</p>\n\n<pre><code>template &lt;typename T, typename = std::enable_if_t&lt;true == bar&lt;T&gt;()&gt;&gt;\nvoid foo () // version 1\n { }\n\ntemplate &lt;typename T, typename = std::enable_if_t&lt;false == bar&lt;T&gt;()&gt;&gt;\nvoid foo () // version 2\n { }\n</code></pre>\n\n<p>you get a compilation error because you have an ambiguity: two <code>foo()</code> functions with the same signature (a default template parameter doesn't change the signature).</p>\n\n<p>But the following solution</p>\n\n<pre><code>template &lt;typename T, std::enable_if_t&lt;true == bar&lt;T&gt;(), bool&gt; = true&gt;\nvoid foo () // version 1\n { }\n\ntemplate &lt;typename T, std::enable_if_t&lt;false == bar&lt;T&gt;(), bool&gt; = true&gt;\nvoid foo () // version 2\n { }\n</code></pre>\n\n<p>works, because SFINAE modify the signature of the functions.</p>\n\n<p>Unrelated observation: there is also a third method: enable/disable the return type (except for class/struct constructors, obviously)</p>\n\n<pre><code>template &lt;typename T&gt;\nstd::enable_if_t&lt;true == bar&lt;T&gt;()&gt; foo () // version 1\n { }\n\ntemplate &lt;typename T&gt;\nstd::enable_if_t&lt;false == bar&lt;T&gt;()&gt; foo () // version 2\n { }\n</code></pre>\n\n<p>As method 2, method 3 is compatible with selection of alternative functions with same signature.</p>\n"}, {"tags": [], "owner": {"reputation": 5676, "user_id": 5023438, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Uvlov.jpg?s=128&g=1", "display_name": "alter igel", "link": "https://stackoverflow.com/users/5023438/alter-igel"}, "is_accepted": false, "score": 22, "last_activity_date": 1577224066, "last_edit_date": 1577224066, "creation_date": 1577223956, "answer_id": 59473629, "question_id": 59473453, "link": "https://stackoverflow.com/questions/59473453/approaches-to-function-sfinae-in-c/59473629#59473629", "title": "Approaches to function SFINAE in C++", "body": "<p>In addition to <a href=\"https://stackoverflow.com/a/59473540/5023438\">max66's answer</a>, another reason to prefer method 2 is that with method 1, you can (accidentally) pass an explicit type parameter as the second template argument and defeat the SFINAE mechanism completely. This could happen as a typo, copy/paste error, or as an oversight in a larger template mechanism.</p>\n\n<pre><code>#include &lt;cstdlib&gt;\n#include &lt;type_traits&gt;\n#include &lt;iostream&gt;\n\n// NOTE: foo should only accept T=int\ntemplate &lt;class T, class = std::enable_if_t&lt;std::is_same_v&lt;T, int&gt;&gt;&gt;\nvoid foo(){\n    std::cout &lt;&lt; \"method 1\" &lt;&lt; std::endl;\n}\n\nint main(){\n\n    // works fine\n    foo&lt;int&gt;();\n\n    // ERROR: subsitution failure, as expected\n    // foo&lt;double&gt;();\n\n    // Oops! also works, even though T != int :(\n    foo&lt;double, double&gt;();\n\n    return 0;\n}\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/c3e4fc657bc2bfec\" rel=\"noreferrer\">Live demo here</a></p>\n"}], "owner": {"reputation": 4581, "user_id": 2791577, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/rFnoU.png?s=128&g=1", "display_name": "keith", "link": "https://stackoverflow.com/users/2791577/keith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1594, "favorite_count": 12, "accepted_answer_id": 59473540, "answer_count": 2, "score": 43, "last_activity_date": 1577291619, "creation_date": 1577222118, "question_id": 59473453, "link": "https://stackoverflow.com/questions/59473453/approaches-to-function-sfinae-in-c", "title": "Approaches to function SFINAE in C++", "body": "<p>I am using function SFINAE heavily in a project and am not sure if there are any differences between the following two approaches (other than style):</p>\n\n<pre><code>#include &lt;cstdlib&gt;\n#include &lt;type_traits&gt;\n#include &lt;iostream&gt;\n\ntemplate &lt;class T, class = std::enable_if_t&lt;std::is_same_v&lt;T, int&gt;&gt;&gt;\nvoid foo()\n{\n    std::cout &lt;&lt; \"method 1\" &lt;&lt; std::endl;\n}\n\ntemplate &lt;class T, std::enable_if_t&lt;std::is_same_v&lt;T, double&gt;&gt;* = 0&gt;\nvoid foo()\n{\n    std::cout &lt;&lt; \"method 2\" &lt;&lt; std::endl;\n}\n\nint main()\n{\n    foo&lt;int&gt;();\n    foo&lt;double&gt;();\n\n    std::cout &lt;&lt; \"Done...\";\n    std::getchar();\n\n    return EXIT_SUCCESS;\n}\n</code></pre>\n\n<p>The program output is as expected:</p>\n\n<pre><code>method 1\nmethod 2\nDone...\n</code></pre>\n\n<p>I have seen method 2 used more often in stackoverflow, but I prefer method 1.</p>\n\n<p>Are there any circumstances when these two approaches differ?</p>\n"}, {"tags": ["c++", "clang", "default-constructor"], "comments": [{"owner": {"reputation": 29641, "user_id": 10871073, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ddBW9.png?s=128&g=1", "display_name": "Adrian Mole", "link": "https://stackoverflow.com/users/10871073/adrian-mole"}, "edited": false, "score": 0, "creation_date": 1577222245, "post_id": 59473350, "comment_id": 105125316, "body": "I&#39;m not at all sure here - but could this be a difference between <code>C++11</code> and later standards?"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1577224550, "post_id": 59473350, "comment_id": 105125715, "body": "This seems essentially the same as <a href=\"https://stackoverflow.com/a/57318531/1505939\">stackoverflow.com/a/57318531/1505939</a> . The code was incorrect in C++11 (which required const objects to have an explicit initializer) and correct as of C++17 which allows const objects with no initializer if they have a default constructor. clang seems slow to implement this change"}], "owner": {"reputation": 21, "user_id": 2202730, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed8e94239e5d1da55eb584320faad1ca?s=128&d=identicon&r=PG", "display_name": "user2202730", "link": "https://stackoverflow.com/users/2202730/user2202730"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 143, "favorite_count": 0, "closed_date": 1577224869, "answer_count": 0, "score": 2, "last_activity_date": 1577221939, "creation_date": 1577220982, "question_id": 59473350, "link": "https://stackoverflow.com/questions/59473350/call-to-implicitly-deleted-default-constructor-for-type-with-const-member", "closed_reason": "Duplicate", "title": "Call to implicitly-deleted default constructor for type with const member", "body": "<p>I see different behavior between gcc and clang compilers for this code:</p>\n\n<pre><code>#include &lt;vector&gt;\n\nstruct A { const std::vector&lt;int&gt; v; };\n\nint main() { A a; }\n</code></pre>\n\n<p>clang can't compile it (<a href=\"https://godbolt.org/z/v-nEir\" rel=\"nofollow noreferrer\">https://godbolt.org/z/v-nEir</a>):</p>\n\n<pre><code>&lt;source&gt;:5:16: error: call to implicitly-deleted default constructor of 'A'\nint main() { A a; }\n               ^\n&lt;source&gt;:3:35: note: default constructor of 'A' is implicitly deleted because field 'v' of const-qualified type 'const std::vector&lt;int&gt;' would not be initialized\n\nstruct A { const std::vector&lt;int&gt; v; };\n</code></pre>\n\n<p>gcc compiles it without errors: <a href=\"https://godbolt.org/z/Sy96DU\" rel=\"nofollow noreferrer\">https://godbolt.org/z/Sy96DU</a></p>\n\n<p>I found a similar question:\n<a href=\"https://stackoverflow.com/questions/7411515/why-does-c-require-a-user-provided-default-constructor-to-default-construct-a\">Why does C++ require a user-provided default constructor to default-construct a const object?</a> and from the answers it seems like <code>A</code> should be const-default-constructible and clang has a bug. Who is correct here?</p>\n"}, {"tags": ["c++", "gcc", "clang", "std"], "answers": [{"comments": [{"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 4, "creation_date": 1577221507, "post_id": 59473390, "comment_id": 105125164, "body": "When linking to documentation, consider linking to <a href=\"https://en.cppreference.com\" rel=\"nofollow noreferrer\">cppreference.com</a> instead of cplusplus.com, due to it having multiple problems relating to the accuracy of the documentation."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 2, "creation_date": 1577221713, "post_id": 59473390, "comment_id": 105125196, "body": "This answer needs a bit of clean-up (for example there&#39;s nothing obvious about what&#39;s happening here) but it&#39;s the right idea."}], "tags": [], "owner": {"reputation": 44, "user_id": 7033511, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da7f0b678fa362b8e02d05a9c2e3bf58?s=128&d=identicon&r=PG&f=1", "display_name": "\u0412\u044f\u0447\u0435\u0441\u043b\u0430\u0432", "link": "https://stackoverflow.com/users/7033511/%d0%92%d1%8f%d1%87%d0%b5%d1%81%d0%bb%d0%b0%d0%b2"}, "is_accepted": false, "score": 2, "last_activity_date": 1577221429, "creation_date": 1577221429, "answer_id": 59473390, "question_id": 59473325, "link": "https://stackoverflow.com/questions/59473325/no-member-named-str-in-stdbasic-ostreamchar-with-gcc-and-clang-but-no-p/59473390#59473390", "title": "no member named &#39;str&#39; in &#39;std::basic_ostream&lt;char&gt;&#39; with gcc and clang, but no problem with msvc", "body": "<p><code>operator&lt;&lt;</code> is member of <code>std::ostream</code>, and returns <code>std::ostream&amp;</code> as described <a href=\"http://www.cplusplus.com/reference/ostream/ostream/operator%3C%3C/\" rel=\"nofollow noreferrer\">here</a></p>\n\n<p>MSVC obviously has own overload this operator for <code>std::ostringstream</code>, what is not in standard</p>\n"}, {"comments": [{"owner": {"reputation": 735, "user_id": 207044, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f20a5d1a1ba2f9ccf8d498ba095f9531?s=128&d=identicon&r=PG", "display_name": "taranaki", "link": "https://stackoverflow.com/users/207044/taranaki"}, "edited": false, "score": 0, "creation_date": 1601837145, "post_id": 59473415, "comment_id": 113523220, "body": "This answer is correct, but it would be nice if a solution to the problem were presented, something better than <code>#if ... #else ...</code> in the code that wants to call <code>.str()</code>."}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "reply_to_user": {"reputation": 735, "user_id": 207044, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f20a5d1a1ba2f9ccf8d498ba095f9531?s=128&d=identicon&r=PG", "display_name": "taranaki", "link": "https://stackoverflow.com/users/207044/taranaki"}, "edited": false, "score": 0, "creation_date": 1601847174, "post_id": 59473415, "comment_id": 113525880, "body": "@taranaki The solution is to use <code>stringstream</code> in the classical way: create a (named) variable. I don&#39;t know a good oneliner alternative, but you could make a variadic function (that concatenates the argumenrs with a stream), or use libfmt."}], "tags": [], "owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "is_accepted": true, "score": 9, "last_activity_date": 1577282379, "last_edit_date": 1577282379, "creation_date": 1577221713, "answer_id": 59473415, "question_id": 59473325, "link": "https://stackoverflow.com/questions/59473325/no-member-named-str-in-stdbasic-ostreamchar-with-gcc-and-clang-but-no-p/59473415#59473415", "title": "no member named &#39;str&#39; in &#39;std::basic_ostream&lt;char&gt;&#39; with gcc and clang, but no problem with msvc", "body": "<blockquote>\n  <p>there is clearly <code>str()</code> member of <code>ostringstream</code></p>\n</blockquote>\n\n<p>Yes, but according to <a href=\"https://en.cppreference.com/w/cpp/io/basic_ostream/operator_ltlt2\" rel=\"nofollow noreferrer\">cppreference</a> this overload of <code>&lt;&lt;</code> should return a reference to <code>basic_ostream&lt;...&gt;</code> rather than <code>ostringstream</code>.</p>\n\n<p>libstdc++ (GCC's standard library) does exactly this, while libc++ (Clang's standard library) and MSVC's standard library behave incorrectly here, technically.</p>\n\n<p>However, it seems there is an open <a href=\"http://cplusplus.github.io/LWG/lwg-active.html#1203\" rel=\"nofollow noreferrer\">defect report</a> suggesting that the overload of <code>&lt;&lt;</code> that works with rvalue streams should return the exact stream type that was passed to it. If it gets accepted, your code will be valid.</p>\n"}], "owner": {"reputation": 5746, "user_id": 219153, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/je9qW.jpg?s=128&g=1", "display_name": "Paul Jurczak", "link": "https://stackoverflow.com/users/219153/paul-jurczak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 599, "favorite_count": 0, "accepted_answer_id": 59473415, "answer_count": 2, "score": 6, "last_activity_date": 1577282379, "creation_date": 1577220841, "question_id": 59473325, "link": "https://stackoverflow.com/questions/59473325/no-member-named-str-in-stdbasic-ostreamchar-with-gcc-and-clang-but-no-p", "title": "no member named &#39;str&#39; in &#39;std::basic_ostream&lt;char&gt;&#39; with gcc and clang, but no problem with msvc", "body": "<p>This code snippet (<a href=\"https://gcc.godbolt.org/z/hKDMxm\" rel=\"noreferrer\">https://gcc.godbolt.org/z/hKDMxm</a>):</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;sstream&gt;\n\nusing namespace std;\n\nint main() {\n    auto s = (ostringstream{} &lt;&lt; \"string\").str();\n    cout &lt;&lt; s;\n    return 0; \n}\n</code></pre>\n\n<p>compiles and runs as expected with msvc, but fails to compile with clang 9.0.0 and gcc 9.2 giving this error message:<code>no member named 'str' in 'std::basic_ostream&lt;char&gt;'</code>. Looking at <a href=\"https://en.cppreference.com/w/cpp/io/basic_ostringstream/str\" rel=\"noreferrer\">https://en.cppreference.com/w/cpp/io/basic_ostringstream/str</a> there is clearly <code>str()</code> member of <code>ostringstream</code>. Why clang and gcc are failing to compile this code?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 1, "creation_date": 1577220555, "post_id": 59473259, "comment_id": 105124959, "body": "<code>vector</code> contains copies of what was <code>push_back</code>ed so it doesn&#39;t matter what happened to the original. And even <i>if</i> <code>v[0]</code> was a destroyed object, calling a member of an invalid object doesn&#39;t necessarily crash the program. It&#39;s undefined behavior and anything can happen."}], "answers": [{"tags": [], "owner": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "is_accepted": false, "score": 3, "last_activity_date": 1577220448, "creation_date": 1577220448, "answer_id": 59473275, "question_id": 59473259, "link": "https://stackoverflow.com/questions/59473259/why-is-destructor-not-called-here/59473275#59473275", "title": "Why is destructor not called here", "body": "<p><code>v</code> has not fallen out of scope, and retains its 5 <code>myCustomType</code> objects.  So accessing one of them and calling a member function on it is perfectly fine.</p>\n"}, {"tags": [], "owner": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "is_accepted": true, "score": 1, "last_activity_date": 1577231979, "last_edit_date": 1577231979, "creation_date": 1577221822, "answer_id": 59473424, "question_id": 59473259, "link": "https://stackoverflow.com/questions/59473259/why-is-destructor-not-called-here/59473424#59473424", "title": "Why is destructor not called here", "body": "<pre><code>{\n   v.push_back( myCustomType () );\n}\n</code></pre>\n\n<p>Here you're placing an object into your vector. The vector is the owner of that object (the object is stored in the vector), so the scope on the object now matches the scope on the vector.</p>\n\n<p>Consider instead:</p>\n\n<pre><code>std::vector&lt;CustomType*&gt; v; //store pointers\nfor (int i = 0; i != 5; i++)\n{\n   CustomType ct = myCustomType(); // Get a CustomType object\n   v.push_back(&amp;ct);\n}\n</code></pre>\n\n<p>In this case, like you expected, trying to run <code>v[0]-&gt;someMemberFunc();</code> will be Undefined Behavior (read: Very Bad). Since the vector isn't actually storing the object, only the address of an object, there's no guarantee that what it's pointing to exists. And since the scope of <code>ct</code> is just in that <code>for</code>, it <em>doesn't</em> exist outside of the loop!</p>\n\n<p>Note here that the difference is in ownership and where and how the object is being stored.</p>\n"}], "owner": {"reputation": 313, "user_id": 10430926, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ff0c0bfb48870c7024ea9fde1787c9d?s=128&d=identicon&r=PG&f=1", "display_name": "Edward", "link": "https://stackoverflow.com/users/10430926/edward"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "accepted_answer_id": 59473424, "answer_count": 2, "score": -3, "last_activity_date": 1577231979, "creation_date": 1577220339, "question_id": 59473259, "link": "https://stackoverflow.com/questions/59473259/why-is-destructor-not-called-here", "title": "Why is destructor not called here", "body": "<p>Consider the following code</p>\n\n<pre><code>vector&lt;myCustomType&gt; v;\nfor (int i = 0; i != 5; i++)\n{\n   v.push_back( myCustomType () );\n}\n</code></pre>\n\n<p>I've been reading books which say that destructors are called when an object falls out of scope and to use shared_pointer or other memory tricks to keep the object from being destroyed. </p>\n\n<p>As such, I'd expect the following code to crash the program:</p>\n\n<pre><code>v[0]. someMemberFunc ();\n</code></pre>\n\n<p>However, this does not happen. In fact, the object hasn't been destroyed. Why is this?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["c++", "std", "swap"], "comments": [{"owner": {"reputation": 20722, "user_id": 1625187, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/6vWOZ.jpg?s=128&g=1", "display_name": "Evg", "link": "https://stackoverflow.com/users/1625187/evg"}, "edited": false, "score": 6, "creation_date": 1577219824, "post_id": 59473178, "comment_id": 105124827, "body": "<code>std::sort</code> resorts to insertion sort if the number of elements is 32 or less, and uses quick sort otherwise."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "reply_to_user": {"reputation": 20722, "user_id": 1625187, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/6vWOZ.jpg?s=128&g=1", "display_name": "Evg", "link": "https://stackoverflow.com/users/1625187/evg"}, "edited": false, "score": 0, "creation_date": 1577219905, "post_id": 59473178, "comment_id": 105124840, "body": "@Evg Is that a requirement or is that an explanation for this particular context?"}, {"owner": {"reputation": 20722, "user_id": 1625187, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/6vWOZ.jpg?s=128&g=1", "display_name": "Evg", "link": "https://stackoverflow.com/users/1625187/evg"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 2, "creation_date": 1577220042, "post_id": 59473178, "comment_id": 105124865, "body": "@Fran&#231;oisAndrieux, this is an implementation detail of Microsoft standard library. My guess is that this is the reason of the behaviour observed by OP. I&#39;m currently looking into the source code to gain more details."}, {"owner": {"reputation": 4915, "user_id": 10686048, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bffd06d00a80b9b69e83f561ee5a392?s=128&d=identicon&r=PG&f=1", "display_name": "ChrisMM", "link": "https://stackoverflow.com/users/10686048/chrismm"}, "edited": false, "score": 1, "creation_date": 1577220086, "post_id": 59473178, "comment_id": 105124872, "body": "Relevant part of the source is: <code>while (_ISORT_MAX &lt; (_Count = _Last - _First) &amp;&amp; 0 &lt; _Ideal)</code> where <code>_ISORT_MAX</code> is given the value of 32. Line 3447 of <code>&lt;algorithm&gt;</code> using VS 16.5.0"}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 0, "creation_date": 1577239707, "post_id": 59473178, "comment_id": 105127635, "body": "No real quicksort is used in any modern standard libraries in any languages. All use modified mixed versions which only is a quicksort when the number of elements is large enough. For example Java and Python use <a href=\"https://en.wikipedia.org/wiki/Timsort\" rel=\"nofollow noreferrer\">Timsort</a> while .NET framework and GCC&#39;s C++ library use <a href=\"https://en.wikipedia.org/wiki/Introsort\" rel=\"nofollow noreferrer\">Introsort</a>. libstdc++ and libc++ also use insertion sort for short sequences. See <a href=\"https://stackoverflow.com/a/22356687/995714\">What algorithms are used in C++11 std::sort in different STL implementations?</a>"}], "answers": [{"comments": [{"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 2, "creation_date": 1577241036, "post_id": 59473324, "comment_id": 105127793, "body": "<a href=\"http://llvm.org/svn/llvm-project/libcxx/trunk/include/algorithm\" rel=\"nofollow noreferrer\">libcxx</a> uses insertion sort for sequences of length smaller than 6 or 30 depending on the type. <a href=\"https://github.com/gcc-mirror/gcc/blob/master/libstdc++-v3/include/bits/stl_algo.h\" rel=\"nofollow noreferrer\">libstd++</a> does that for sequences of 16 elements or less. <a href=\"https://stackoverflow.com/q/22339240/995714\">What algorithms are used in C++11 std::sort in different STL implementations?</a>"}], "tags": [], "owner": {"reputation": 20722, "user_id": 1625187, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/6vWOZ.jpg?s=128&g=1", "display_name": "Evg", "link": "https://stackoverflow.com/users/1625187/evg"}, "is_accepted": true, "score": 15, "last_activity_date": 1593842623, "last_edit_date": 1593842623, "creation_date": 1577220825, "answer_id": 59473324, "question_id": 59473178, "link": "https://stackoverflow.com/questions/59473178/why-is-swap-called-by-stdsort-only-if-my-container-has-more-than-32-elements/59473324#59473324", "title": "Why is swap called by std::sort only if my container has more than 32 elements?", "body": "<p>Microsoft <code>std::sort</code> implementation <a href=\"https://github.com/microsoft/STL/blob/1e8b8d4eef4b2dddeb7533c5231c876383bd0ea6/stl/inc/algorithm#L3475\" rel=\"nofollow noreferrer\">looks</a> like this:</p>\n<pre><code>const int ISORT_MAX = 32;  // maximum size for insertion sort\n\ntemplate&lt;class RanIt, class Diff, class Pr&gt;\nvoid Sort(RanIt First, RanIt Last, Diff Ideal, Pr Pred)\n{\n    Diff Count;\n    for (; ISORT_MAX &lt; (Count = Last - First) &amp;&amp; 0 &lt; Ideal; )\n    {   // divide and conquer by quicksort\n        pair&lt;RanIt, RanIt&gt; Mid = Unguarded_partition(First, Last, Pred);\n\n        // ...\n    }\n\n    if (ISORT_MAX &lt; Count)\n    {   // heap sort if too many divisions\n        Make_heap(First, Last, Pred);\n        Sort_heap(First, Last, Pred);\n    }\n    else if (1 &lt; Count)\n        Insertion_sort(First, Last, Pred);  // small\n}\n</code></pre>\n<p>When the range to be sorted has 32 elements or less, <code>Sort</code> uses insertion sort. Insertion sort doesn't use <code>swap</code> in its <a href=\"https://github.com/microsoft/STL/blob/1e8b8d4eef4b2dddeb7533c5231c876383bd0ea6/stl/inc/algorithm#L3353\" rel=\"nofollow noreferrer\">implementation</a>. Otherwise, divide-and-conquer quick sort is used. In the <a href=\"https://github.com/microsoft/STL/blob/1e8b8d4eef4b2dddeb7533c5231c876383bd0ea6/stl/inc/algorithm#L3408\" rel=\"nofollow noreferrer\">implementation</a> it calls <code>iter_swap</code> (inside <code>Unguarded_partition</code>), <a href=\"https://github.com/microsoft/STL/blob/1e8b8d4eef4b2dddeb7533c5231c876383bd0ea6/stl/inc/utility#L41\" rel=\"nofollow noreferrer\">which</a> in turn calls <code>swap</code>:</p>\n<pre><code>template&lt;class FwdIt1, class FwdIt2&gt;\nvoid iter_swap(FwdIt1 Left, FwdIt2 Right)\n{   // swap *Left and *Right\n    swap(*Left, *Right);\n}\n</code></pre>\n<p>All these are implementation details. They vary from one standard library implementation to another.</p>\n"}], "owner": {"reputation": 2310, "user_id": 9185253, "user_type": "registered", "profile_image": "https://graph.facebook.com/114451586026362/picture?type=large", "display_name": "Maestro", "link": "https://stackoverflow.com/users/9185253/maestro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 490, "favorite_count": 4, "accepted_answer_id": 59473324, "answer_count": 1, "score": 10, "last_activity_date": 1593842623, "creation_date": 1577219625, "last_edit_date": 1577265858, "question_id": 59473178, "link": "https://stackoverflow.com/questions/59473178/why-is-swap-called-by-stdsort-only-if-my-container-has-more-than-32-elements", "title": "Why is swap called by std::sort only if my container has more than 32 elements?", "body": "<p>Hello I have a simple question:</p>\n\n<pre><code>class A \n{\npublic:\n    A(int);\n    A(const A&amp;);\n    A&amp; operator=(const A&amp;);\n    ~A();\nprivate:\n    int* ptr_;\n\n    friend bool operator&lt;(const A&amp;, const A&amp;);\n    friend void swap(A&amp;, A&amp;);\n};\n\nA::A(int x) : \n    ptr_(new int(x))\n{}\n\nA::A(const A&amp; rhs) :\n    ptr_(rhs.ptr_ ? new int(*rhs.ptr_) : nullptr)\n{}\n\nA&amp; A::operator = (const A &amp; rhs)\n{\n    int* tmp = rhs.ptr_ ? new int(*rhs.ptr_) : nullptr;\n    delete ptr_;\n    ptr_ = tmp;\n\n    return *this;\n}\n\nA::~A()\n{\n    delete ptr_;\n}\n\nbool operator&lt;(const A&amp; lhs, const A&amp; rhs)\n{\n    cout &lt;&lt; \"operator&lt;(const A&amp;, const A&amp;)\" &lt;&lt; endl;\n    return *lhs.ptr_ &lt; *rhs.ptr_;\n}\n\nvoid swap(A&amp; lhs, A&amp; rhs)\n{\n    cout &lt;&lt; \"swap(A&amp;, A&amp;)\" &lt;&lt; endl;\n    using std::swap;\n    swap(lhs.ptr_, rhs.ptr_);\n}\n\nint main()\n{\n\n    std::vector&lt;A&gt; v{ 33,32,31,30,29,28,27,26,25,24,23,22, 21,20,19,18,17,16,15,14,13,12,11,10,9,8,7,6,5, 4,3,2,1 };\n    std::sort(v.begin(), v.end());\n\n}\n</code></pre>\n\n<p>With more than 32 elements, the sort calls <code>swap</code>. With 32 elements or less, the elements are still sorted but <code>swap</code> is not called.</p>\n\n<ul>\n<li>I am using MSVC++ 2019 on x64.</li>\n<li>When is <code>swap</code> called and when is it not and why? Thank you!</li>\n<li>I didn't use <code>swap</code> in copy-assignment only to distinguish between the call to it from sort from the copy-assignment operator.</li>\n</ul>\n"}, {"tags": ["c++", "arrays", "templates", "c++14", "c++17"], "comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 4, "creation_date": 1577216867, "post_id": 59472892, "comment_id": 105124251, "body": "Even if (runtime) branch is not taken, the template is instantiated, you need <code>if constexpr</code> or specialization."}, {"owner": {"reputation": 1542, "user_id": 897728, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e672e0d8de180128eed1b101ad8b955?s=128&d=identicon&r=PG", "display_name": "Happy Green Kid Naps", "link": "https://stackoverflow.com/users/897728/happy-green-kid-naps"}, "edited": false, "score": 0, "creation_date": 1577216932, "post_id": 59472892, "comment_id": 105124264, "body": "What is the value of <code>PathIndex</code> when you instantiate the template as <code>return findlastslash&lt; PathLength &gt;( path );</code> ?  What is <code>end</code> in this first instantiation?"}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1577217930, "post_id": 59472892, "comment_id": 105124477, "body": "Re: &quot;without decaying init a ... pointer&quot; -- why? That makes what would be a one-liner incredibly complex."}, {"owner": {"reputation": 5700, "user_id": 4934640, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2f69527ae459cbbda0ab5c2e08686a50?s=128&d=identicon&r=PG&f=1", "display_name": "user", "link": "https://stackoverflow.com/users/4934640/user"}, "reply_to_user": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1577218713, "post_id": 59472892, "comment_id": 105124617, "body": "@PeteBecker I am learning templates and this seems a good way to start learning build complex things."}, {"owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "edited": false, "score": 0, "creation_date": 1577229134, "post_id": 59472892, "comment_id": 105126367, "body": "This question is too long IMHO, especially with the erased part. Just edit it into a final form. Also, <code>findlastslash</code> -&gt; <code>find_last_slash</code>. Finally, std::filesystem has a path class which might already be doing what you need."}], "answers": [{"tags": [], "owner": {"reputation": 5700, "user_id": 4934640, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2f69527ae459cbbda0ab5c2e08686a50?s=128&d=identicon&r=PG&f=1", "display_name": "user", "link": "https://stackoverflow.com/users/4934640/user"}, "is_accepted": false, "score": 0, "last_activity_date": 1577229075, "last_edit_date": 1577229075, "creation_date": 1577225068, "answer_id": 59473727, "question_id": 59472892, "link": "https://stackoverflow.com/questions/59472892/how-to-stop-template-recursion-while-using-parameter-deduction/59473727#59473727", "title": "How to stop template recursion while using parameter deduction?", "body": "<p>I managed to fix it by using class partial template specialization. I did not use function partial template specialization because it is not allowed: <a href=\"https://stackoverflow.com/questions/59473460/why-i-cannot-partially-specialize-template-functions-only-classes\">Why I cannot partially specialize template free functions, only classes?</a></p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#define STATIC_ASSERT(...) static_assert(__VA_ARGS__, #__VA_ARGS__)\n\ntemplate&lt;int PathIndex&gt;\nstruct Findlastslash\n{\n    template&lt; int PathLength &gt;\n    static constexpr int start(const char (&amp;path)[PathLength])\n    {\n        constexpr const int end = PathLength - PathIndex;\n        return (PathIndex &gt;= 0 &amp;&amp; path[end] != '/' &amp;&amp; path[end] != '\\\\') \n              ? Findlastslash&lt; PathIndex - 1 &gt;::start( path ) : ( end );\n    }\n};\n\ntemplate&lt;&gt; \nstruct Findlastslash&lt; 1 &gt;\n{\n    template&lt; int PathLength &gt;\n    static constexpr int start(const char (&amp;path)[PathLength]) {\n        return 0;\n    }\n};\n\ntemplate&lt; int PathLength &gt;\nconstexpr const int startfindlastslash(const char (&amp;path)[PathLength]) {\n    return Findlastslash&lt; PathLength &gt;::start( path );\n}\n\nint main(int argc, char const *argv[])\n{\n    STATIC_ASSERT( startfindlastslash( \"h/bye\" ) == 1 );\n}\n</code></pre>\n\n<p>This is the expanded template: </p>\n\n<p><strong><code>clang++ -Xclang -ast-print -fsyntax-only --std=c++14 test_debugger.cpp &gt; main.exe</code></strong></p>\n\n<pre><code>template &lt;int PathIndex&gt; \nstruct Findlastslash \n{\n    template &lt;int PathLength&gt; \n    static constexpr int start(const char (&amp;path)[PathLength]) \n    {\n        constexpr int end = PathLength - PathIndex;\n        return (PathIndex &gt;= 0 &amp;&amp; path[end] != '/' &amp;&amp; path[end] != '\\\\') \n                ? Findlastslash&lt;PathIndex - 1&gt;::start(path) : (end);\n    }\n};\n\ntemplate&lt;&gt; \nstruct Findlastslash&lt;6&gt; \n{\n    template &lt;int PathLength&gt; \n    static constexpr int start(const char (&amp;path)[PathLength]);\n    template&lt;&gt; static constexpr int start&lt;6&gt;(const char (&amp;path)[6])\n    {\n        constexpr int end = 6 - 6;\n        return (6 &gt;= 0 &amp;&amp; path[end] != '/' &amp;&amp; path[end] != '\\\\') \n                ? Findlastslash&lt;6 - 1&gt;::start(path) : (end);\n    };\n};\n\ntemplate&lt;&gt; \nstruct Findlastslash&lt;5&gt; \n{\n    template &lt;int PathLength&gt; \n    static constexpr int start(const char (&amp;path)[PathLength]);\n    template&lt;&gt; static constexpr int start&lt;6&gt;(const char (&amp;path)[6]) \n    {\n        constexpr int end = 6 - 5;\n        return (5 &gt;= 0 &amp;&amp; path[end] != '/' &amp;&amp; path[end] != '\\\\') \n                ? Findlastslash&lt;5 - 1&gt;::start(path) : (end);\n    };\n};\n\ntemplate&lt;&gt; \nstruct Findlastslash&lt;4&gt; \n{\n    template &lt;int PathLength&gt; \n    static constexpr int start(const char (&amp;path)[PathLength]);\n    template&lt;&gt; static constexpr int start&lt;6&gt;(const char (&amp;path)[6]) \n    {\n        constexpr int end = 6 - 4;\n        return (4 &gt;= 0 &amp;&amp; path[end] != '/' &amp;&amp; path[end] != '\\\\') \n                ? Findlastslash&lt;4 - 1&gt;::start(path) : (end);\n    };\n};\n\ntemplate&lt;&gt; \nstruct Findlastslash&lt;3&gt; \n{\n    template &lt;int PathLength&gt; \n    static constexpr int start(const char (&amp;path)[PathLength]);\n    template&lt;&gt; static constexpr int start&lt;6&gt;(const char (&amp;path)[6]) \n    {\n        constexpr int end = 6 - 3;\n        return (3 &gt;= 0 &amp;&amp; path[end] != '/' &amp;&amp; path[end] != '\\\\') \n                ? Findlastslash&lt;3 - 1&gt;::start(path) : (end);\n    };\n};\n\ntemplate&lt;&gt; \nstruct Findlastslash&lt;2&gt; \n{\n    template &lt;int PathLength&gt; \n    static constexpr int start(const char (&amp;path)[PathLength]);\n    template&lt;&gt; static constexpr int start&lt;6&gt;(const char (&amp;path)[6]) \n    {\n        constexpr int end = 6 - 2;\n        return (2 &gt;= 0 &amp;&amp; path[end] != '/' &amp;&amp; path[end] != '\\\\') \n                ? Findlastslash&lt;2 - 1&gt;::start(path) : (end);\n    };\n};\n\ntemplate&lt;&gt; \nstruct Findlastslash&lt;1&gt; \n{\n    template &lt;int PathLength&gt; \n    static constexpr int start(const char (&amp;path)[PathLength]) {\n        return 0;\n    }\n\n    template&lt;&gt; \n    static constexpr int start&lt;6&gt;(const char (&amp;path)[6]) {\n        return 0;\n    }\n};\n\ntemplate &lt;int PathLength&gt; \nconstexpr const int startfindlastslash(const char (&amp;path)[PathLength]) {\n    return Findlastslash&lt;PathLength&gt;::start(path);\n}\n\ntemplate&lt;&gt; \nconstexpr const int startfindlastslash&lt;6&gt;(const char (&amp;path)[6]) {\n    return Findlastslash&lt;6&gt;::start(path);\n}\n\nint main(int argc, const char *argv[]) {\n    static_assert(startfindlastslash(\"h/bye\")==1, \"startfindlastslash( \\\"h/bye\\\" )==1\");\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 5700, "user_id": 4934640, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2f69527ae459cbbda0ab5c2e08686a50?s=128&d=identicon&r=PG&f=1", "display_name": "user", "link": "https://stackoverflow.com/users/4934640/user"}, "edited": false, "score": 0, "creation_date": 1577236047, "post_id": 59473757, "comment_id": 105127249, "body": "Thanks for the examples! Now a new day has come and I can vote up again :)"}], "tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": true, "score": 1, "last_activity_date": 1577226453, "last_edit_date": 1577226453, "creation_date": 1577225492, "answer_id": 59473757, "question_id": 59472892, "link": "https://stackoverflow.com/questions/59472892/how-to-stop-template-recursion-while-using-parameter-deduction/59473757#59473757", "title": "How to stop template recursion while using parameter deduction?", "body": "<p>If you are in C++14, you no longer require recursion for <code>constexpr</code>, you can use regular loop:</p>\n\n<pre><code>template&lt;std::size_t PathLength&gt;\nconstexpr const int findlastslash(const char (&amp;path)[PathLength])\n{\n    for (std::size_t i = PathLength; i != 0; --i) {\n        if (path[i - 1] == '/' || path[i - 1] == '\\\\') {\n            return i;\n        }\n    }\n    return 0;\n}\n</code></pre>\n\n<p>In C++11, you might do:</p>\n\n<pre><code>template&lt;std::size_t PathLength&gt;\nconstexpr const int findlastslash(const char (&amp;path)[PathLength], std::size_t i = PathLength)\n{\n    return (i == 0)\n        ? 0\n        : ((path[i - 1] == '/' || path[i - 1] == '\\\\')\n            ? i\n            : findlastslash(path, i - 1));\n}\n</code></pre>\n\n<p>constexpr version in C++17 (to get rid of regular parameter <code>i</code>):</p>\n\n<pre><code>template&lt;std::size_t PathLength, std::size_t I = PathLength&gt;\nconstexpr const int findlastslash(const char (&amp;path)[PathLength])\n{\n    if constexpr (I == 0) {\n        return 0;\n    } else {\n        if (path[I - 1] == '/' || path[I - 1] == '\\\\') {\n            return I;\n        }\n        return findlastslash&lt;PathLength, I - 1&gt;(path);\n    }\n}\n</code></pre>\n\n<p>Prior C++17, you have to use specialization or overload instead of <code>if constexpr</code>, but function cannot be partial specialized.</p>\n\n<p>So struct specialization might be:</p>\n\n<pre><code>template &lt;std::size_t I&gt; struct findlastslash_impl\n{\n    template &lt;std::size_t PathLength&gt;\n    constexpr const int findlastslash(const char (&amp;path)[PathLength])\n    {\n        if (path[I - 1] == '/' || path[I - 1] == '\\\\') {\n            return I;\n        }\n        return findlastslash_impl&lt;I - 1&gt;()(path);\n    }\n}\ntemplate&lt;&gt; struct findlastslash_impl&lt;0&gt;\n{\n    template&lt;std::size_t PathLength&gt;\n    constexpr const int findlastslash(const char (&amp;)[PathLength])\n    {\n        return 0;\n    }\n};\n\ntemplate&lt;std::size_t PathLength&gt;\nconstexpr const int findlastslash(const char (&amp;path)[PathLength])\n{\n    return findlastslash_impl&lt;PathLength&gt;()(path);\n}\n</code></pre>\n\n<p>or with overloads:</p>\n\n<pre><code>template &lt;std::size_t PathLength&gt;\nconstexpr const int findlastslash_impl(std::integral_constant&lt;std::size_t, 0&gt;,\n                                       const char (&amp;path)[PathLength])\n{\n    return 0;\n}\n\ntemplate &lt;std::size_t PathLength, std::size_t I&gt;\nconstexpr const int findlastslash_impl(std::integral_constant&lt;std::size_t, I&gt;,\n                                       const char (&amp;path)[PathLength])\n{\n    if (path[I - 1] == '/' || path[I - 1] == '\\\\') {\n        return I;\n    }\n    return findlastslash_impl(std::integral_constant&lt;std::size_t, I - 1&gt;(), path);\n}\n\ntemplate&lt;std::size_t PathLength&gt;\nconstexpr const int findlastslash(const char (&amp;path)[PathLength])\n{\n    return findlastslash_impl(std::integral_constant&lt;std::size_t, PathLength&gt;(), path);\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 5700, "user_id": 4934640, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2f69527ae459cbbda0ab5c2e08686a50?s=128&d=identicon&r=PG&f=1", "display_name": "user", "link": "https://stackoverflow.com/users/4934640/user"}, "edited": false, "score": 0, "creation_date": 1577228334, "post_id": 59473985, "comment_id": 105126265, "body": "Can you add an example?"}, {"owner": {"reputation": 22818, "user_id": 1387438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ad806758c356c915ea08a4bfd79131e3?s=128&d=identicon&r=PG", "display_name": "Marek R", "link": "https://stackoverflow.com/users/1387438/marek-r"}, "reply_to_user": {"reputation": 5700, "user_id": 4934640, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2f69527ae459cbbda0ab5c2e08686a50?s=128&d=identicon&r=PG&f=1", "display_name": "user", "link": "https://stackoverflow.com/users/4934640/user"}, "edited": false, "score": 0, "creation_date": 1577263179, "post_id": 59473985, "comment_id": 105130772, "body": "@user here it is"}], "tags": [], "owner": {"reputation": 22818, "user_id": 1387438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ad806758c356c915ea08a4bfd79131e3?s=128&d=identicon&r=PG", "display_name": "Marek R", "link": "https://stackoverflow.com/users/1387438/marek-r"}, "is_accepted": false, "score": 1, "last_activity_date": 1577264275, "last_edit_date": 1577264275, "creation_date": 1577228205, "answer_id": 59473985, "question_id": 59472892, "link": "https://stackoverflow.com/questions/59472892/how-to-stop-template-recursion-while-using-parameter-deduction/59473985#59473985", "title": "How to stop template recursion while using parameter deduction?", "body": "<p>Note that this functionality is already available in C++17 in <a href=\"https://en.cppreference.com/w/cpp/string/basic_string_view\" rel=\"nofollow noreferrer\">std::string_view</a>.</p>\n\n<p>See: <a href=\"https://en.cppreference.com/w/cpp/string/basic_string_view/rfind\" rel=\"nofollow noreferrer\">std::basic_string_view::rfind</a></p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;string_view&gt;\n\nusing namespace std::literals;\n\nint main()\n{\n    static_assert(\"cppdebugger/test_debugger.cpp\"sv.rfind('/') == 11);\n    static_assert(\"cppdebugger/test_debugger.cpp\"sv.find_last_of(\"\\\\/\"sv) == 11);\n}\n</code></pre>\n\n<p><a href=\"https://www.godbolt.org/z/C9JJmy\" rel=\"nofollow noreferrer\">Live demo</a></p>\n"}], "owner": {"reputation": 5700, "user_id": 4934640, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2f69527ae459cbbda0ab5c2e08686a50?s=128&d=identicon&r=PG&f=1", "display_name": "user", "link": "https://stackoverflow.com/users/4934640/user"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 133, "favorite_count": 0, "accepted_answer_id": 59473757, "answer_count": 3, "score": 0, "last_activity_date": 1577264275, "creation_date": 1577216511, "last_edit_date": 1577229739, "question_id": 59472892, "link": "https://stackoverflow.com/questions/59472892/how-to-stop-template-recursion-while-using-parameter-deduction", "title": "How to stop template recursion while using parameter deduction?", "body": "<p>This code task a <strong><code>const char[]</code></strong> and finds where is the last slash:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;array&gt;\n#define STATIC_ASSERT(...) static_assert(__VA_ARGS__, #__VA_ARGS__)\n\ntemplate&lt; int PathIndex, int PathLength &gt;\nconstexpr const int findlastslash(const char (&amp;path)[PathLength])\n{\n    constexpr const int end = PathLength - PathIndex;\n    return (PathIndex &gt;= 0 &amp;&amp; path[end] != '/' &amp;&amp; path[end] != '\\\\') \n           ? findlastslash&lt; PathIndex - 1, PathLength &gt;( path ) : ( end + 1 );\n}\n\ntemplate&lt; int PathLength &gt;\nconstexpr const int startfindlastslash(const char (&amp;path)[PathLength]) {\n    return findlastslash&lt; PathLength &gt;( path );\n}\n\nint main(int argc, char const *argv[])\n{\n    STATIC_ASSERT( startfindlastslash( \"cppdebugger/test_debugger.cpp\" ) == 11 );\n}\n</code></pre>\n\n<p>But it does not work because the template recursion never stops:</p>\n\n<pre><code>$ g++ -o main.exe --std=c++14 test_debugger.cpp\ntest_debugger.cpp: In function \u2018int main(int, const char**)\u2019:\ntest_debugger.cpp:2:28: error: static assertion failed: startfindlastslash( \"cppdebugger/test_debugger.cpp\" ) == 17\n #define STATIC_ASSERT(...) static_assert(__VA_ARGS__, #__VA_ARGS__)\n                            ^\ntest_debugger.cpp:18:5: note: in expansion of macro \u2018STATIC_ASSERT\u2019\n     STATIC_ASSERT( startfindlastslash( \"cppdebugger/test_debugger.cpp\" ) == 17 );\n     ^~~~~~~~~~~~~\ntest_debugger.cpp: In instantiation of \u2018constexpr const int findlastslash(const char (&amp;)[PathLength]) [with int PathIndex = -880; int PathLength = 30]\u2019:\ntest_debugger.cpp:8:114:   recursively required from \u2018constexpr const int findlastslash(const char (&amp;)[PathLength]) [with int PathIndex = 19; int PathLength = 30]\u2019\ntest_debugger.cpp:8:114:   required from here\ntest_debugger.cpp:8:114: fatal error: template instantiation depth exceeds maximum of 900 (use -ftemplate-depth= to increase the maximum)\n     return (PathIndex &gt;= 0 &amp;&amp; path[end] != '/' &amp;&amp; path[end] != '\\\\') ? findlastslash&lt; PathIndex - 1, PathLength &gt;( path ) : ( end + 1 );\n                                                                        ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^~~~~~~~\ncompilation terminated.\n</code></pre>\n\n<p>I know can do this easily using <strong><code>const char *</code></strong>, but I am interested in keeping using string <strong><code>\"cppdebugger/test_debugger.cpp\"</code></strong> (<strong><code>const char[]</code></strong>) as a array, i..e, without decaying into a <strong><code>const char *</code></strong> pointer. </p>\n\n<hr>\n\n<h1>Update</h1>\n\n<p>Correction. A template specialization is like this (with <strong><code>&lt; 1, PathLength &gt;</code></strong>:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>template&lt; int PathLength &gt;\nconstexpr const int findlastslash&lt; 1, PathLength &gt;(const char (&amp;path)[PathLength])\n{\n    constexpr const int end = PathLength;\n    return ( path[end] != '/' &amp;&amp; path[end] != '\\\\') ? 0 : 1;\n}\n</code></pre>\n\n<p>Where the compiler correctly complains it:</p>\n\n<pre><code>$ g++ -o main.exe --std=c++14 test_debugger.cpp\ntest_debugger.cpp:18:82: error: non-class, non-variable partial specialization \u2018findlastslash&lt;1, PathLength&gt;\u2019 is not allowed\n constexpr const int findlastslash&lt; 1, PathLength &gt;(const char (&amp;path)[PathLength])\n                                                                                  ^\ntest_debugger.cpp: In function \u2018int main(int, const char**)\u2019:\ntest_debugger.cpp:2:28: error: static assertion failed: startfindlastslash( \"cppdebugger/test_debugger.cpp\" ) == 11\n #define STATIC_ASSERT(...) static_assert(__VA_ARGS__, #__VA_ARGS__)\n                            ^\ntest_debugger.cpp:26:5: note: in expansion of macro \u2018STATIC_ASSERT\u2019\n     STATIC_ASSERT( startfindlastslash( \"cppdebugger/test_debugger.cpp\" ) == 11 );\n     ^~~~~~~~~~~~~\ntest_debugger.cpp: In instantiation of \u2018constexpr const int findlastslash(const char (&amp;)[PathLength]) [with int PathIndex = -880; int PathLength = 30]\u2019:\ntest_debugger.cpp:9:56:   recursively required from \u2018constexpr const int findlastslash(const char (&amp;)[PathLength]) [with int PathIndex = 19; int PathLength = 30]\u2019\ntest_debugger.cpp:9:56:   required from here\ntest_debugger.cpp:9:56: fatal error: template instantiation depth exceeds maximum of 900 (use -ftemplate-depth= to increase the maximum)\n            ? findlastslash&lt; PathIndex - 1, PathLength &gt;( path ) : ( end + 1 );\n              ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^~~~~~~~\ncompilation terminated.\n</code></pre>\n\n<p>Related questions:</p>\n\n<ol>\n<li><a href=\"https://stackoverflow.com/questions/6138439/understanding-simple-c-partial-template-specialization\">Understanding (simple?) C++ Partial Template Specialization</a></li>\n<li><a href=\"https://stackoverflow.com/questions/52356341/do-i-need-to-put-constexpr-after-else-if\">Do I need to put constexpr after else-if?</a></li>\n<li><a href=\"https://stackoverflow.com/questions/41011900/equivalent-ternary-operator-for-constexpr-if\">Equivalent ternary operator for constexpr if?</a></li>\n</ol>\n"}, {"tags": ["android", "c++", "qt", "qt5"], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 6415051, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24c96b8c26d10ac29c74f2ec1ec73d71?s=128&d=identicon&r=PG&f=1", "display_name": "vargavl", "link": "https://stackoverflow.com/users/6415051/vargavl"}, "is_accepted": false, "score": 0, "last_activity_date": 1578649910, "creation_date": 1578649910, "answer_id": 59679239, "question_id": 59472866, "link": "https://stackoverflow.com/questions/59472866/qt-qml-for-android-bugs/59679239#59679239", "title": "Qt QML for Android bugs", "body": "<p>I noticed the similar behaviour after upgrading to Qt 5.14. Searching the Qt bugreports lead me to <a href=\"https://bugreports.qt.io/browse/QTBUG-80266\" rel=\"nofollow noreferrer\">QTBUG-80266</a>. As suggested in comments, I re-created the AndroidManifest.xml and added back my local changes, my app now executes.\nI hope it helps.</p>\n"}], "owner": {"reputation": 43, "user_id": 12000706, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/niGP3.png?s=128&g=1", "display_name": "Angelo13C", "link": "https://stackoverflow.com/users/12000706/angelo13c"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 365, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1591389825, "creation_date": 1577216275, "question_id": 59472866, "link": "https://stackoverflow.com/questions/59472866/qt-qml-for-android-bugs", "title": "Qt QML for Android bugs", "body": "<p><strong>Guys I'm writing an Instant Messaging app with Qt 5.14, and I am trying to deploy it for Android devices</strong></p>\n\n<p>I've installed these:</p>\n\n<ul>\n<li>OpenJDK 8 (amd64)</li>\n<li>NDK r20b</li>\n<li>Qt Creator 4.11.0</li>\n<li>Qt 5.14 (for Android ARM64-v8a device)</li>\n</ul>\n\n<p>I can build the app correctly, but when I run it from the phone, there's only a white screen</p>\n\n<p>From Qt Creator I can see this application output</p>\n\n<pre><code>I nixsoftware.as: Late-enabling -Xcheck:jni\nI Perf    : Connecting to perf service.\nE nixsoftware.as: Invalid ID 0x00000000.\nE Qt      : Can't create main activity\nE Qt      : android.content.res.Resources$NotFoundException: String array resource ID #0x0\nE Qt      :     at android.content.res.Resources.getStringArray(Resources.java:597)\nE Qt      :     at android.content.res.MiuiResources.getStringArray(MiuiResources.java:160)\nE Qt      :     at org.qtproject.qt5.android.bindings.QtLoader.startApp(QtLoader.java:423)\nE Qt      :     at org.qtproject.qt5.android.bindings.QtActivityLoader.onCreate(QtActivityLoader.java:183)\nE Qt      :     at org.qtproject.qt5.android.bindings.QtActivity.onCreateHook(QtActivity.java:266)\nE Qt      :     at org.qtproject.qt5.android.bindings.QtActivity.onCreate(QtActivity.java:273)\nE Qt      :     at android.app.Activity.performCreate(Activity.java:7224)\nE Qt      :     at android.app.Activity.performCreate(Activity.java:7213)\nE Qt      :     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1272)\nE Qt      :     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2926)\nE Qt      :     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:3081)\nE Qt      :     at android.app.servertransaction.LaunchActivityItem.execute(LaunchActivityItem.java:78)\nE Qt      :     at android.app.servertransaction.TransactionExecutor.executeCallbacks(TransactionExecutor.java:108)\nE Qt      :     at android.app.servertransaction.TransactionExecutor.execute(TransactionExecutor.java:68)\nE Qt      :     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1831)\nE Qt      :     at android.os.Handler.dispatchMessage(Handler.java:106)\nE Qt      :     at android.os.Looper.loop(Looper.java:201)\nE Qt      :     at android.app.ActivityThread.main(ActivityThread.java:6810)\nE Qt      :     at java.lang.reflect.Method.invoke(Native Method)\nE Qt      :     at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:547)\nE Qt      :     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:873)\nI Adreno  : QUALCOMM build                   : cf57c9c, I1cb5c4d1cc\nI Adreno  : Build Date                       : 09/23/18\nI Adreno  : OpenGL ES Shader Compiler Version: EV031.25.03.01\nI Adreno  : Local Branch                     :\nI Adreno  : Remote Branch                    :\nI Adreno  : Remote Branch                    :\nI Adreno  : Reconstruct Branch               :\nI Adreno  : Build Config                     : S L 6.0.7 AArch32\nI Adreno  : PFP: 0x005ff112, ME: 0x005ff066\nI ConfigStore: android::hardware::configstore::V1_0::ISurfaceFlingerConfigs::hasWideColorDisplay retrieved: 0\nI ConfigStore: android::hardware::configstore::V1_0::ISurfaceFlingerConfigs::hasHDRDisplay retrieved: 0\nI OpenGLRenderer: Initialized EGL, version 1.4\nD OpenGLRenderer: Swap behavior 2\n</code></pre>\n\n<p><strong>Please help</strong></p>\n\n<p>I can give you more info</p>\n"}, {"tags": ["c++", "c++11", "logic", "binary-search-tree", "sfml"], "comments": [{"owner": {"reputation": 2739, "user_id": 5844572, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rulkh.jpg?s=128&g=1", "display_name": "laancelot", "link": "https://stackoverflow.com/users/5844572/laancelot"}, "edited": false, "score": 0, "creation_date": 1577249035, "post_id": 59472845, "comment_id": 105128589, "body": "Do you plan on making it a balanced binary tree? Your coordinates would be much easier to plan is you knew the maximum depth of the tree, which usually goes hand in hand with a balanced tree."}, {"owner": {"reputation": 147, "user_id": 11454905, "user_type": "registered", "profile_image": "https://graph.facebook.com/640814306090482/picture?type=large", "display_name": "Hassan Ashas", "link": "https://stackoverflow.com/users/11454905/hassan-ashas"}, "reply_to_user": {"reputation": 2739, "user_id": 5844572, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rulkh.jpg?s=128&g=1", "display_name": "laancelot", "link": "https://stackoverflow.com/users/5844572/laancelot"}, "edited": false, "score": 0, "creation_date": 1577256627, "post_id": 59472845, "comment_id": 105129547, "body": "This is being implemented by Linked List, so there&#39;s no limit as to what the maximum depth could be (however, for the sake of the progress, I can set a limit of maximum depth to something like 5). I still don&#39;t know how would I handle this though... As for balanced tree, that would be AVL and not BST. However, I am supposed to implement both these trees (I was trying to get BST done first) so in one of the programs, I do plan on making a balanced binary tree."}, {"owner": {"reputation": 2739, "user_id": 5844572, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rulkh.jpg?s=128&g=1", "display_name": "laancelot", "link": "https://stackoverflow.com/users/5844572/laancelot"}, "edited": false, "score": 1, "creation_date": 1577258374, "post_id": 59472845, "comment_id": 105129857, "body": "It&#39;s not about limiting the depth, but about knowing the current depth of the node you&#39;re drawing. By knowing at which depth level you&#39;re drawing the node will let calculate how far one from the other you need to draw them, since the deeper they are the more nodes will be on the same level."}], "owner": {"reputation": 147, "user_id": 11454905, "user_type": "registered", "profile_image": "https://graph.facebook.com/640814306090482/picture?type=large", "display_name": "Hassan Ashas", "link": "https://stackoverflow.com/users/11454905/hassan-ashas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 138, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1577216134, "creation_date": 1577216134, "question_id": 59472845, "link": "https://stackoverflow.com/questions/59472845/avoid-collision-of-nodes-while-representing-binary-tree-in-sfml", "title": "Avoid collision of nodes while representing Binary Tree in SFML", "body": "<p>following is the code of the prgoram I have created in SFML (Please note, this is a Binary SEARCH Tree and also that I have only given the codes of Display and Insertion as others aren't required, so that to keep the code's length as small as possible. Moreover, the nodes won't show the values as I haven't done that yet. This is really a very basic code but does explain the problem)</p>\n\n<pre><code>    #include &lt;SFML/Graphics.hpp&gt;\n#include &lt;queue&gt;\n#include &lt;iostream&gt;\nusing namespace std;\nsf::RenderWindow window(sf::VideoMode(1070, 920), \"SFML works!\");\nstruct node\n{\n        int data;\n        node *left, *right, *parent; \n        sf::CircleShape shape; \n        sf::RectangleShape leftone;\n        sf::RectangleShape rightone; \n}*root;\nclass Tree\n{\npublic:\n        Tree();\n        void insert(int, node*, int, int, int, int);\n        void Display(node*); \n        void inOrder(node*); \n        void PostOrder(node*); \n        void PreOrder(node*); \n        bool isEmpty(); \n        void Deletion(int); \n        node* SearchNode(int, node*); \n};\nbool Tree::isEmpty()\n{\n        if (!root)\n                return true;\n        return false; \n}\nTree::Tree() { root = NULL; }\nvoid Tree::insert(int data, node* Node = root, int x = 250, int y = 50, int a = 260, int b = 85)\n{\n        node* new_node = new node; \n        new_node-&gt;shape.setRadius(20);\n        new_node-&gt;shape.setFillColor(sf::Color::Green);\n        new_node-&gt;left = new_node-&gt;right = new_node-&gt;parent = NULL; \n        new_node-&gt;data = data; \n        new_node-&gt;shape.setPosition(sf::Vector2f(x, y));\n        if (!root)\n        {\n                root = new_node;\n                return; \n        }\n        if (data &gt;= Node-&gt;data)\n        {\n                if (Node-&gt;right)\n                        insert(data, Node-&gt;right, x + 50, y + 50, a + 50, b + 50); \n                else\n                {\n                        Node-&gt;right = new_node;\n                        new_node-&gt;parent = Node; \n                        new_node-&gt;shape.setPosition(sf::Vector2f((x + 50), (y + 50))); \n                        new_node-&gt;parent-&gt;rightone.setSize(sf::Vector2f(50, 5)); \n                        new_node-&gt;parent-&gt;rightone.setFillColor(sf::Color::Red);\n                        new_node-&gt;parent-&gt;rightone.setRotation(230);\n                        new_node-&gt;parent-&gt;rightone.setPosition(sf::Vector2f(a+50, b+40));\n                }\n        }\n        else if (data &lt; Node-&gt;data)\n        {\n                if (Node-&gt;left)\n                        insert(data, Node-&gt;left, x - 50, y + 50, a - 50, b + 50);\n                else\n                {\n                        Node-&gt;left = new_node; \n                        new_node-&gt;parent = Node; \n                        new_node-&gt;shape.setPosition(sf::Vector2f((x - 50), (y + 50)));\n                        new_node-&gt;parent-&gt;leftone.setSize(sf::Vector2f(50, 5));\n                        new_node-&gt;parent-&gt;leftone.setFillColor(sf::Color::Red);\n                        new_node-&gt;parent-&gt;leftone.setRotation(130);\n                        new_node-&gt;parent-&gt;leftone.setPosition(sf::Vector2f(a, b));\n                }\n        }\n}\nvoid Tree::Display(node* Root = root)\n{\n        if (!root)\n        {\n                cout &lt;&lt; \"Nothing to Display\";\n                return;\n        }\n        queue&lt;node*&gt; obj;\n        obj.push(Root);\n        while (!obj.empty())\n        {\n                node* temp = obj.front();\n                window.draw(temp-&gt;shape);\n                if (temp-&gt;left)\n                        window.draw(temp-&gt;leftone);\n                if (temp-&gt;right)\n                        window.draw(temp-&gt;rightone); \n                //cout &lt;&lt; temp-&gt;data &lt;&lt; \" \";\n                obj.pop();\n                if (temp-&gt;left)\n                        obj.push(temp-&gt;left);\n                if (temp-&gt;right)\n                        obj.push(temp-&gt;right);\n        }\n        window.display();\n}\n\nint main()\n{\n        int n; \n        Tree obj;\n        while (window.isOpen())\n        {\n                cout &lt;&lt; \"Enter Number to Insert: \"; \n                cin &gt;&gt; n;\n                obj.insert(n); \n                sf::Event event;\n                obj.Display(); \n                while (window.pollEvent(event))\n                {\n                        if (event.type == sf::Event::Closed)\n                                window.close();\n                }\n\n                window.clear();\n        }\n\n        return 0;\n}\n</code></pre>\n\n<p>So, basically, I am taking an input on Console (I still can't figure out how to take integer input on SFML Window.. I am pretty new to SFML) and then creating a tree and using BFS method (Queue) to display the nodes of trees...\nAs you would be able to see (if you run the code), the nodes are being created successfully and their connections as well.\nHowever, there is one big issue that I am facing.</p>\n\n<p>Suppose these values are added to the tree,</p>\n\n<pre><code>50 -&gt; Added as Root Node\n75 -&gt; Added to the right of Root Node\n25 -&gt; Added to the left of Root Node\n37 -&gt; Added to the right of 25\n67 -&gt; Added to the left of 75\n</code></pre>\n\n<p>So, it works well until addition of 37 (that also prints out exactly below the root node, though which is wrong) however, as soon as I enter the node 67, it gets added to the same position as 37 and hence, only one of them shows on window.\nNow, I can alter their coordinates and expand them a bit but eventually, I will end up facing the same issue after addition of few more values.\nHow can I avoid it? Could you help please?</p>\n\n<p>There's a BST Visualizer available online which provides a pretty good solution. (Please refer here if you want to: <a href=\"https://www.cs.usfca.edu/~galles/visualization/BST.html\" rel=\"nofollow noreferrer\">https://www.cs.usfca.edu/~galles/visualization/BST.html</a> )\nIt decreases/increases the x coordinate of the left/right child of root whenever it detects this pattern of addition (Root->Left->Right... or Root->Right->Left) but I am failing to make a proper logic to implement this idea. Can you help in this regard, please? Or provide a different solution? Thank you!</p>\n"}, {"tags": ["c++", "runtime-error", "c++14"], "comments": [{"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1577215655, "post_id": 59472762, "comment_id": 105124005, "body": "Using too much memory"}, {"owner": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 0, "creation_date": 1577215673, "post_id": 59472762, "comment_id": 105124011, "body": "<code>lr_array</code> is only 20 elements big, is it possible you index outside of it? i dont see any checks"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1577217472, "post_id": 59472762, "comment_id": 105124378, "body": "<i>I&#39;m new to competitive programming</i> -- Please read <a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">how to debug small programs</a>.  <i>Googling about this told me that SIGSEGV...</i> -- &quot;Googling&quot; for SIGSEGV does not tell you exactly what is wrong with <i>your</i> program.  Debugging the program tells you what&#39;s wrong with the program.  You put no checks in your code to see if your loop(s) go above the array size."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1577218394, "post_id": 59472762, "comment_id": 105124560, "body": "Note that you can use <code>soe.resize(32001, 1);</code> instead of pushing back 32001 ones individually."}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1577221972, "post_id": 59472762, "comment_id": 105125260, "body": "It doesn&#39;t have anything to do with too much memory. It has to do with pointing out of your address space, as stated in the duplicate. The correct place to look is not Google, which will yield misinformation, but the <i>man</i> pages, which won&#39;t."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1577223664, "post_id": 59472762, "comment_id": 105125540, "body": "<i>My code runs fine on my machine</i> --  Instead of raw arrays, use vectors and/or <code>std::array</code> everywhere you are using arrays now, including that <code>lr_array</code>.  If you did that, use <code>at()</code> instead of <code>[ ]</code> to access your elements.  After doing that, don&#39;t be surprised if that same program that you say works on your machine, all of a sudden fails with a <code>std::out_of_range</code> exception."}, {"owner": {"reputation": 1, "user_id": 9188874, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-nCimZul5FBk/AAAAAAAAAAI/AAAAAAAAAzA/r6h90jZEmEY/photo.jpg?sz=128", "display_name": "Devesh Chande", "link": "https://stackoverflow.com/users/9188874/devesh-chande"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1577264458, "post_id": 59472762, "comment_id": 105131039, "body": "@PaulMcKenzie, thank you for the link. I was able to fix 24 warnings because of that. Because of that, I did get the std::out_of_range exception! I think the issue was prime_list because with initial size of 1e5, it was not computing beyond 100,000 and with size 1e3 was not computing beyond 1000. I now get a &quot;Wrong answer&quot; message which is much better than what I got before. Thanks!"}], "answers": [{"comments": [{"owner": {"reputation": 4915, "user_id": 10686048, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bffd06d00a80b9b69e83f561ee5a392?s=128&d=identicon&r=PG&f=1", "display_name": "ChrisMM", "link": "https://stackoverflow.com/users/10686048/chrismm"}, "edited": false, "score": 0, "creation_date": 1577216251, "post_id": 59472822, "comment_id": 105124135, "body": "I believe <code>soe</code>&#39;s largest index is actually 32000, since the loop before those is <code>for(int i=0;i&lt;=32000;i++) soe.push_back(1);</code>, which would create 32,001 values."}, {"owner": {"reputation": 61429, "user_id": 572743, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/9941673f566f229bc536c1c2b558884e?s=128&d=identicon&r=PG&f=1", "display_name": "Damon", "link": "https://stackoverflow.com/users/572743/damon"}, "edited": false, "score": 0, "creation_date": 1577217091, "post_id": 59472822, "comment_id": 105124292, "body": "Can&#39;t tell without running this in the debugger, but... the problem most likely occurs earlier already in <code>lr_array[i] = std::stoi(token[i]);</code>. That is assuming there&#39;s more than 20 tokens, which <i>most likely</i> is the case. Anyway, same issue. Fixed-length vs. arbitrary-length."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1577218453, "post_id": 59472822, "comment_id": 105124575, "body": "<code>push_back</code> occurs every iteration of the loop <code>for(int i=0;i&lt;=32000;i++)</code> so <code>soe[j]</code> is not an overrun here."}], "tags": [], "owner": {"reputation": 9309, "user_id": 275221, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/1e38611c46e24593fe8eecbb0a2d87c3?s=128&d=identicon&r=PG", "display_name": "sorush-r", "link": "https://stackoverflow.com/users/275221/sorush-r"}, "is_accepted": false, "score": 0, "last_activity_date": 1577215944, "creation_date": 1577215944, "answer_id": 59472822, "question_id": 59472762, "link": "https://stackoverflow.com/questions/59472762/reasoning-behind-sigsegv/59472822#59472822", "title": "Reasoning behind SIGSEGV?", "body": "<p>A segmentation fault occurs when the code tries to access a part of memory which is not allocated. If you are unlucky enough, you may find your code execute \"fine\". That is when memory corruption happens. The process writes on a chunk of memory which is by change already allocated but does not belong to array of interest.</p>\n\n<p>In your case in the inner loop, you are trying to access <code>soe</code>'s memory far more than it is allocated. It falls outside (if you are lucky) or corrupts other variables (if you are unlucky)</p>\n\n<pre><code>for(int k=2;k&lt;32000;k++)\n{\n    if(soe[k])\n    {\n\n        for(int j=(k*k);j&lt;=32000;j+=k)\n        // j grows up to 32000. Largesr valid index for soe is 31999\n        {\n            soe[j] = 0; // &lt;====== This is where segfault happens\n        }\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 9188874, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-nCimZul5FBk/AAAAAAAAAAI/AAAAAAAAAzA/r6h90jZEmEY/photo.jpg?sz=128", "display_name": "Devesh Chande", "link": "https://stackoverflow.com/users/9188874/devesh-chande"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 69, "favorite_count": 0, "closed_date": 1577222056, "answer_count": 1, "score": 0, "last_activity_date": 1577215944, "creation_date": 1577215394, "last_edit_date": 1577215558, "question_id": 59472762, "link": "https://stackoverflow.com/questions/59472762/reasoning-behind-sigsegv", "closed_reason": "Duplicate", "title": "Reasoning behind SIGSEGV?", "body": "<p>I am trying to solve the problem \"Prime Generator\" on SPOJ. Initially, I used the Sieve of Erathosthenes method yet that took to long. So, I implemented a segmented sieve. My code runs fine on my machine, yet when I submit it to SPOJ, I get the message \"runtime error (SIGSEGV)\".</p>\n\n<p>Googling about this told me that SIGSEGV pertains to an invalid memory reference or using too much memory. I'm new to competitive programming and fail to see where I'm going wrong.</p>\n\n<p>I am using the CPP14-CLANG language, if that is helpful.</p>\n\n<p>Here is the code :</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string.h&gt;\n#include &lt;math.h&gt;\n#include &lt;vector&gt;\n#include &lt;sstream&gt;\n\nint main(){\n    int nt=0, l_value=0, r_value=0, v=1;\n    int lr_array[20] = {0};\n    std::vector &lt;int&gt; soe;\n    std::vector &lt;std::string&gt; token;\n    std::vector &lt;int&gt; prime_list(1e5, 1);\n\n    //take number of test cases and their respective range\n    std::cin&gt;&gt;nt;\n    std::cin.ignore();\n\n    for(int i=0;i&lt;nt;i++)\n    {\n        std::string line;\n        getline(std::cin, line);\n        std::stringstream check1(line);\n        std::string intermediate;\n        while(getline(check1, intermediate, ' '))\n        {\n            token.push_back(intermediate);\n        }\n\n        for(int i=0;i&lt;token.size();i++)\n        {\n            lr_array[i] = std::stoi(token[i]);\n        }\n\n    }\n\n\n    //Find out primes till sqrt(y) by using Sieve of Erathosthenes\n    for(int i=0;i&lt;=32000;i++)\n    {\n        soe.push_back(1);\n    }\n\n    for(int k=2;k&lt;32000;k++)\n    {\n        if(soe[k])\n        {\n\n            for(int j=(k*k);j&lt;=32000;j+=k)\n            {\n                soe[j] = 0;\n            }\n        }\n    }\n\n    //Use each element from SoE list to determine non-primes in given range\n\n    for(int i=0;i&lt;nt;i++)\n    {\n        for(int j=2;j&lt;soe.size();j++)\n        {\n            if(soe[j] &amp;&amp; (j&lt;=lr_array[i+v]))\n            {\n                int temp = int((lr_array[2*i]/j));\n                temp = temp*j;\n                if(temp&lt;lr_array[2*i]){\n                    temp += j;\n                }\n\n                for(int k=lr_array[2*i];k&lt;=lr_array[i+v];k++)\n                {\n                    if(k==lr_array[2*i])\n                        {\n                            if(j==2){prime_list[temp]=0;continue;}\n                            else{temp+=j;prime_list[temp]=0;continue;}\n\n                        }\n                    if(temp&lt;=lr_array[i+v])\n                    {\n                        prime_list[temp]=0;\n                        temp += j;\n                    }\n                    else{\n                        break;\n                    }\n\n                }\n            }\n\n        }\n\n        if(lr_array[2*i]&lt;=2){prime_list[2]=1;}\n\n        for(int l=lr_array[2*i];l&lt;=lr_array[i+v];l++){\n            if(prime_list[l]==1)\n            {\n                std::cout&lt;&lt;l&lt;&lt;std::endl;\n            }\n\n    }\n        v++;\n        std::cout&lt;&lt;std::endl;       \n    }\n    return 0;\n}\n</code></pre>\n\n<p>I have also referred to <a href=\"https://stackoverflow.com/questions/40488174/spoj-runtime-error-sigsegv\">this</a> StackOverflow question, but it did not help.</p>\n"}, {"tags": ["c++", "vector", "c++14"], "comments": [{"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 2, "creation_date": 1577215436, "post_id": 59472739, "comment_id": 105123955, "body": "@ohndoeisabro After this statement  words.push_back(e); the reference e can be invalid."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1577219087, "post_id": 59472739, "comment_id": 105124691, "body": "FYI, <a href=\"http://coliru.stacked-crooked.com/a/a973c022c5bb83a8\" rel=\"nofollow noreferrer\">std::istringstream</a> does all of this work for you."}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "reply_to_user": {"reputation": 547, "user_id": 12450543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e33187968bcf2582820d7a085e7b29a?s=128&d=identicon&r=PG&f=1", "display_name": "klentit", "link": "https://stackoverflow.com/users/12450543/klentit"}, "edited": false, "score": 0, "creation_date": 1577489828, "post_id": 59472739, "comment_id": 105186692, "body": "@nonock If you use version-specific <code>c++??</code> tags, please use them <i>in addition</i> to the main <code>c++</code> tag (for better question visiblity). Also, I don&#39;t see anything C++14-specific here, not sure why you thought that tag would fit better."}, {"owner": {"reputation": 547, "user_id": 12450543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e33187968bcf2582820d7a085e7b29a?s=128&d=identicon&r=PG&f=1", "display_name": "klentit", "link": "https://stackoverflow.com/users/12450543/klentit"}, "edited": false, "score": 0, "creation_date": 1577531349, "post_id": 59472739, "comment_id": 105192657, "body": "auto&amp;  on C++14."}], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user12415838"}, "is_accepted": true, "score": 0, "last_activity_date": 1577489465, "last_edit_date": 1577489465, "creation_date": 1577217550, "answer_id": 59472989, "question_id": 59472739, "link": "https://stackoverflow.com/questions/59472739/program-for-splitting-whitespace-strings-wont-work/59472989#59472989", "title": "Program for splitting whitespace strings won&#39;t work", "body": "<p>The syntax of your code is correct, but the code failed to complete the task because you <em><strong>used a reference to element of a vector whose capacity changed</strong></em>.</p>\n\n<pre><code>string &amp;e = words[0];\n...\nwords.push_back(...);\n...\n</code></pre>\n\n<p><a href=\"https://en.cppreference.com/w/cpp/container/vector\" rel=\"nofollow noreferrer\">std::vector</a> is typically implemented to store data by requesting contiguous blocks of memory. When the current capacity is used up <em>(as a result of inserting more elements)</em>:</p>\n\n<ol>\n<li>new contiguous memory block with a bigger capacity is created.</li>\n<li>elements from the old block are <em><strong>copied</strong></em> to this new block.</li>\n<li>old memory block is destroyed.</li>\n<li>references, pointers and even iterators of objects stored in the old memory block become invalid.</li>\n</ol>\n\n<p>If you know the total number of items to be stored in a vector, you can <a href=\"https://en.cppreference.com/w/cpp/container/vector/reserve\" rel=\"nofollow noreferrer\">set the capacity of the vector in advance</a> to avoid invalidation:</p>\n\n<pre><code>std::vector&lt;string&gt; words;\nwords.reserve(3);\nwords.push_back(\"aa bb\");\nstring &amp;e = words[0];\n...\nwords.push_back(...);\n...\n</code></pre>\n\n<p><a href=\"https://en.cppreference.com/w/cpp/container/list\" rel=\"nofollow noreferrer\">std::list</a> unlike <code>std::vector</code> is implemented as a <em>linked-list</em>. Although it does not support random element access <em>(very disappointing)</em>; it does not require contiguous memory blocks and never poses risk of invalidation unless you explicitly destroy a referenced element.</p>\n\n<p><em><strong>conclusion</strong></em>:</p>\n\n<p>Information about the total number of elements to be stored in <code>std::vector</code> may not be readily available, thus <code>std::list</code> seem to be more reliable in situations where references to elements of rapidly expanding containers are needed. I recommend use of <code>std::list</code> for this task.</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>int main()\n{\n  std::list&lt;string&gt; words;\n  words.push_back(\"aa bb\");\n\n  string &amp;e = words.back();\n  string::iterator a = e.begin(), b;\n\n  while (1)\n  {\n    b = std::find_if(a, e.end(), [](auto &amp;c){ return (c == ' '); });\n    words.push_back(string(a, b));\n    a = std::find_if_not(b, e.end(), [](auto &amp;c){ return (c == ' '); });\n    if (a == e.end()) break;\n  }\n\n  for(auto &amp;f: words) cout &lt;&lt; f &lt;&lt; endl;\n  return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 47, "user_id": 12488445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1171f6a7c75775b9fadc7e5258a42804?s=128&d=identicon&r=PG&f=1", "display_name": "johndoeisabro", "link": "https://stackoverflow.com/users/12488445/johndoeisabro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "accepted_answer_id": 59472989, "answer_count": 1, "score": 0, "last_activity_date": 1577560485, "creation_date": 1577215213, "last_edit_date": 1577560485, "question_id": 59472739, "link": "https://stackoverflow.com/questions/59472739/program-for-splitting-whitespace-strings-wont-work", "title": "Program for splitting whitespace strings won&#39;t work", "body": "<p>I'm trying to make a program for splitting whitespaced strings in a vector, but it doesn't delete the 2nd part of the original string.</p>\n\n<pre><code>#include&lt;iostream&gt;\n#include&lt;string&gt;\n#include&lt;string.h&gt;\n#include&lt;vector&gt;\n#include&lt;algorithm&gt;\n#include&lt;cmath&gt;\n\n#include&lt;sstream&gt;\n#include&lt;fstream&gt;\n#include&lt;list&gt;\n#include&lt;numeric&gt;\n#include&lt;map&gt;\n#include&lt;iterator&gt;\nusing namespace std;\nint main(){\n\n    vector&lt;string&gt; words;\n\n    words.push_back(\"aa bb\");\n   string&amp; e=words[0];\n    string::iterator it=find(e.begin(),e.end(),' ');\n    if(it!=e.end()){\n        words.push_back(e);\n        e.erase(it,e.end());\n        string&amp; e2=words.back();\n        it=find(e2.begin(),e2.end(),' ');;\n        e2.erase(e2.begin(),it+1);\n    }\n    for(auto&amp; f:words)\n        cout&lt;&lt;f&lt;&lt;'\\n';\n}\n</code></pre>\n"}, {"tags": ["c++", "arduino", "switch-statement", "arduino-c++"], "comments": [{"owner": {"reputation": 141, "user_id": 7286877, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70fbaa62b70fa90d716a1ff1ecc32468?s=128&d=identicon&r=PG&f=1", "display_name": "vsh", "link": "https://stackoverflow.com/users/7286877/vsh"}, "edited": false, "score": 0, "creation_date": 1577213447, "post_id": 59472452, "comment_id": 105123450, "body": "if there only one option maybe if-else can help?"}, {"owner": {"reputation": 9309, "user_id": 275221, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/1e38611c46e24593fe8eecbb0a2d87c3?s=128&d=identicon&r=PG", "display_name": "sorush-r", "link": "https://stackoverflow.com/users/275221/sorush-r"}, "edited": false, "score": 0, "creation_date": 1577215020, "post_id": 59472452, "comment_id": 105123871, "body": "Just to be sure, you know that only one of <code>case</code> or <code>default</code> parts will be executed right? It&#39;s not like that control reaches the <code>default</code> body by default..."}, {"owner": {"reputation": 5569, "user_id": 201787, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/vgB9F.jpg?s=128&g=1", "display_name": "metal", "link": "https://stackoverflow.com/users/201787/metal"}, "edited": false, "score": 2, "creation_date": 1577215030, "post_id": 59472452, "comment_id": 105123876, "body": "Are you sure this is the <i>actual</i> code you are executing? Have you perchance tried to simplify it for presentation here and in the process stripped out the actual offending code? How do you know which part is running? Could memory (specifically, the value of <code>REMOTE</code>) be corrupted by a bug elsewhere in the program?"}, {"owner": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "edited": false, "score": 2, "creation_date": 1577219514, "post_id": 59472452, "comment_id": 105124768, "body": "How do you know the default case is skipped?  If it is, then what is returned by <code>return(scriptName)</code>?"}, {"owner": {"reputation": 5162, "user_id": 2785528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fc85984f1234637fa4ec24d93ae51bc?s=128&d=identicon&r=PG&f=1", "display_name": "2785528", "link": "https://stackoverflow.com/users/2785528/2785528"}, "edited": false, "score": 0, "creation_date": 1577220052, "post_id": 59472452, "comment_id": 105124867, "body": "Try adding braces in your switch statements."}, {"owner": {"reputation": 5162, "user_id": 2785528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fc85984f1234637fa4ec24d93ae51bc?s=128&d=identicon&r=PG&f=1", "display_name": "2785528", "link": "https://stackoverflow.com/users/2785528/2785528"}, "edited": false, "score": 1, "creation_date": 1577220104, "post_id": 59472452, "comment_id": 105124877, "body": "This code does not compile.  see <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>.  FYI - I use &#39;stubs&#39; to help this code compile on my desktop for the desktop.  The compiler with enabled errors and warnings can then report a) &quot;error: jump to case label&quot; and b) &quot;note:  crosses initialization of \u2018std::string RFSTRBUFF\u2019 &quot;  Adding the braces  to the switch statements fixed these complaints.  There may be other errors."}, {"owner": {"reputation": 13, "user_id": 12132190, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kYcx7.png?s=128&g=1", "display_name": "Moretti", "link": "https://stackoverflow.com/users/12132190/moretti"}, "reply_to_user": {"reputation": 5569, "user_id": 201787, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/vgB9F.jpg?s=128&g=1", "display_name": "metal", "link": "https://stackoverflow.com/users/201787/metal"}, "edited": false, "score": 0, "creation_date": 1577267228, "post_id": 59472452, "comment_id": 105131622, "body": "@metal My code is pretty large to put it in here and it would not be practical, I can send  a copy of the real code to you if you want. Basically this is one part of the actual code, I&#39;m pretty sure the rest of it doesn&#39;t influenciate this part."}, {"owner": {"reputation": 13, "user_id": 12132190, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kYcx7.png?s=128&g=1", "display_name": "Moretti", "link": "https://stackoverflow.com/users/12132190/moretti"}, "reply_to_user": {"reputation": 141, "user_id": 7286877, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70fbaa62b70fa90d716a1ff1ecc32468?s=128&d=identicon&r=PG&f=1", "display_name": "vsh", "link": "https://stackoverflow.com/users/7286877/vsh"}, "edited": false, "score": 0, "creation_date": 1577267495, "post_id": 59472452, "comment_id": 105131669, "body": "@vsh I&#39;ll improve the code over time, so more cases will be add"}, {"owner": {"reputation": 13, "user_id": 12132190, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kYcx7.png?s=128&g=1", "display_name": "Moretti", "link": "https://stackoverflow.com/users/12132190/moretti"}, "reply_to_user": {"reputation": 5162, "user_id": 2785528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fc85984f1234637fa4ec24d93ae51bc?s=128&d=identicon&r=PG&f=1", "display_name": "2785528", "link": "https://stackoverflow.com/users/2785528/2785528"}, "edited": false, "score": 0, "creation_date": 1577267729, "post_id": 59472452, "comment_id": 105131702, "body": "@2785528 I don&#39;t know why it doesn&#39;t compiles to you, it does to me. Thanks for the reported errors!"}, {"owner": {"reputation": 13, "user_id": 12132190, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kYcx7.png?s=128&g=1", "display_name": "Moretti", "link": "https://stackoverflow.com/users/12132190/moretti"}, "reply_to_user": {"reputation": 5162, "user_id": 2785528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fc85984f1234637fa4ec24d93ae51bc?s=128&d=identicon&r=PG&f=1", "display_name": "2785528", "link": "https://stackoverflow.com/users/2785528/2785528"}, "edited": false, "score": 0, "creation_date": 1577268138, "post_id": 59472452, "comment_id": 105131784, "body": "@2785528 Ok, so I add the braces and now works perfectly, thanks!"}, {"owner": {"reputation": 5162, "user_id": 2785528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fc85984f1234637fa4ec24d93ae51bc?s=128&d=identicon&r=PG&f=1", "display_name": "2785528", "link": "https://stackoverflow.com/users/2785528/2785528"}, "edited": false, "score": 0, "creation_date": 1577373066, "post_id": 59472452, "comment_id": 105154666, "body": "A compound statement consists of none or more C++ statements enclosed within a set of braces: {}.  For example, in function setup, both &#39;case&#39; and &#39;default&#39; statements should be wrapped in braces, because they are to work as a single statement.  I find that braces always help for switch statements, both in readability and in avoiding initialization issues for local auto vars."}, {"owner": {"reputation": 5162, "user_id": 2785528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fc85984f1234637fa4ec24d93ae51bc?s=128&d=identicon&r=PG&f=1", "display_name": "2785528", "link": "https://stackoverflow.com/users/2785528/2785528"}, "edited": false, "score": 0, "creation_date": 1577373245, "post_id": 59472452, "comment_id": 105154721, "body": "&quot;I don&#39;t know why it doesn&#39;t compiles to you&quot; Research &#39;method stubs&#39;. Your code does not compile to run on linux because linux does not have, for instance, digitalWrite. With my stubs providing these missing functions the compile completes. Example stub: &quot; void digitalWrite(int w,int v) { cout &lt;&lt; &quot;\\n digitalWrite (&quot; &lt;&lt; w &lt;&lt; &quot;,&quot; &lt;&lt; v &lt;&lt; &quot;)&quot;; } Your code, with my stubs, is less than 100 lines of code, small enough to be a minimal reproducible example.  It also &#39;runs&#39;, in a fashion, and supports some level of debug."}, {"owner": {"reputation": 13, "user_id": 12132190, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kYcx7.png?s=128&g=1", "display_name": "Moretti", "link": "https://stackoverflow.com/users/12132190/moretti"}, "reply_to_user": {"reputation": 5162, "user_id": 2785528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fc85984f1234637fa4ec24d93ae51bc?s=128&d=identicon&r=PG&f=1", "display_name": "2785528", "link": "https://stackoverflow.com/users/2785528/2785528"}, "edited": false, "score": 0, "creation_date": 1577395409, "post_id": 59472452, "comment_id": 105161197, "body": "@2785528 Ok, I think i understood correctly. I don&#39;t know if this will be out of topic, but, how you are able to create the stubs? I mean, do you create them in the same file as the rest of the code, or in some sort of configuration file?"}, {"owner": {"reputation": 5162, "user_id": 2785528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fc85984f1234637fa4ec24d93ae51bc?s=128&d=identicon&r=PG&f=1", "display_name": "2785528", "link": "https://stackoverflow.com/users/2785528/2785528"}, "edited": false, "score": 0, "creation_date": 1577485781, "post_id": 59472452, "comment_id": 105185845, "body": "In the same .cpp  as the rest of your code, and I added int main(), and a few other items.  (Such as std::string, an enum with HIGH and LOW, etc.)  The stub need not provide any behavior, it needs only to link properly.  But, I usually have a single cout in a stub (to confirm that it was invoked.)"}], "answers": [{"tags": [], "owner": {"reputation": 547, "user_id": 12450543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e33187968bcf2582820d7a085e7b29a?s=128&d=identicon&r=PG&f=1", "display_name": "klentit", "link": "https://stackoverflow.com/users/12450543/klentit"}, "is_accepted": false, "score": 0, "last_activity_date": 1577244586, "creation_date": 1577244586, "answer_id": 59474990, "question_id": 59472452, "link": "https://stackoverflow.com/questions/59472452/default-label-apparently-not-working-in-switch-statement/59474990#59474990", "title": "default label apparently not working in switch statement", "body": "<p>might be inadequate scope, so try on each case</p>\n\n<pre><code>//..\n\n     case 1:{\n          vw_get_message(RFbuff, &amp;RFbuflen);\n          String RFSTRBUFF = RFbuff;\n          scriptName = RFSTRBUFF; \n          delay(1200);\n       }\n          break;\n        default:\n          scriptName = \"script\"; \n          delay(500); \n        }\n //...\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5162, "user_id": 2785528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fc85984f1234637fa4ec24d93ae51bc?s=128&d=identicon&r=PG&f=1", "display_name": "2785528", "link": "https://stackoverflow.com/users/2785528/2785528"}, "is_accepted": true, "score": 0, "last_activity_date": 1577553197, "creation_date": 1577553197, "answer_id": 59513124, "question_id": 59472452, "link": "https://stackoverflow.com/questions/59472452/default-label-apparently-not-working-in-switch-statement/59513124#59513124", "title": "default label apparently not working in switch statement", "body": "<p>Your questions nudged me to provide a copy of code-with-stubs.</p>\n\n<p>developed on Lubuntu 18.10</p>\n\n<p>using g++ (Ubuntu 9.2.1-9ubuntu2) 9.2.1 20191008</p>\n\n<hr>\n\n<pre><code>#ifndef                 DTB_CHRONO_HH\n#include \"../../bag/src/dtb_chrono.hh\"\nusing  namespace std::chrono_literals; // support suffixes like 100ms, 2s, 30us\n#endif\n\n#include &lt;iostream&gt;\nusing std::cout, std::cerr, std::endl;\n\n#include &lt;string&gt;\nusing std::string, std::to_string;\n\n#include &lt;thread&gt;\nusing std::thread, std::this_thread::sleep_for;\n\n#ifndef                 DTB_PCKLRT_HH\n#include \"../../bag/src/dtb_pclkrt.hh\"  // class PosixClockRT_t\nusing  DTB::PClk_t;\n#endif\n\n#ifndef                 DTB_SOPS_HH\n#include \"../../bag/src/dtb_sops.hh\" // class StringOps_t\nusing DTB::Sops_t;\n#endif\n\n\nnamespace // anonymous\n{\n   // functor\n   class F838_t  // a UDT (user defined type)\n   {\n      PClk_t  pclk; // class PosixClockRT_t\n      Sops_t  sops; // class StringOps_t\n\n      enum { VW_MAX_MESSAGE_LEN = 10, LED_BUILTIN, LOW=0x05, HIGH=0x0a };\n\n      uint8_t RFbuff     [VW_MAX_MESSAGE_LEN];\n      uint8_t RFbuflen = VW_MAX_MESSAGE_LEN;\n\n      const int REMOTE = 0;\n\n   public:\n      // ctor and dtor use compiler provided defaults\n      int operator()(int argc, char* argv[]) { return exec(argc, argv);  }\n\n   private:\n\n      int exec(int , char** )\n         {\n            int retVal = 0;\n            uint64_t start_ns = pclk.ns();\n\n            setup();\n            remoteScriptName();\n\n            cout &lt;&lt; \"\\n\\n  F838_t::exec() duration \"\n                 &lt;&lt; sops.digiComma(pclk.ns() - start_ns)\n                 &lt;&lt; \" ns    (\" &lt;&lt;  __cplusplus  &lt;&lt; \")\"\n                 &lt;&lt; std::endl;\n            return retVal;\n         }\n\n      void setup()\n         {\n            pinMode(LED_BUILTIN, HIGH);\n            switch(REMOTE)\n            {\n\n            case 1:\n            {\n               vw_set_rx_pin(8);\n               vw_setup(2000);\n               vw_rx_start();\n            }  break;\n\n            default:\n            {\n               digitalWrite(LED_BUILTIN, LOW);\n               sleep_for(500ms);  // delay(500);\n               digitalWrite(LED_BUILTIN, HIGH);\n               sleep_for(500ms);  // delay(500);\n               digitalWrite(LED_BUILTIN, LOW);\n               sleep_for(500ms);  // delay(500);\n               digitalWrite(LED_BUILTIN, HIGH);\n            } break;\n\n            }\n         }\n\n      string remoteScriptName()\n         {\n            string scriptName;\n            switch(REMOTE)\n            {\n\n            case 1:\n            {\n               vw_get_message(RFbuff, &amp;RFbuflen);\n               //string RFSTRBUFF = RFbuff;\n               string RFSTRBUFF;\n               for (int i; i &lt; RFbuflen; ++i)\n                  RFSTRBUFF += static_cast&lt;char&gt;(RFbuff[i]);\n               scriptName = RFSTRBUFF;\n               sleep_for(1200ms); //delay(1200);\n            }\n\n            break;\n\n            default:\n            {\n               scriptName = \"script\";\n               sleep_for(500ms); // delay(500);\n            }\n            }\n\n            return(scriptName);\n         } // string remoteScriptName()\n\n      // stubs:\n      void pinMode(int led, int v) { cout &lt;&lt; \"\\n  pinMode(\"\n                                          &lt;&lt; led &lt;&lt; \",\" &lt;&lt; v &lt;&lt; \")\"; }\n\n      void vw_set_rx_pin(int v) { cout &lt;&lt; \"\\n  vw_set_rx_pin(\"\n                                       &lt;&lt; v &lt;&lt; \")\"; }\n      void vw_setup(int v)      { cout &lt;&lt; \"\\n  vw_setup     (\"\n                                       &lt;&lt; v &lt;&lt; \")\"; }\n      void vw_rx_start()        { cout &lt;&lt; \"\\n  vw_rx_start  ()\"; }\n\n      void digitalWrite(int w,\n                        int v) { cout &lt;&lt; \"\\n  digitalWrite  (\"\n                                      &lt;&lt; w &lt;&lt; \",\" &lt;&lt; v &lt;&lt; \")\"; }\n\n      void vw_get_message(uint8_t*  bf,\n                          uint8_t*  ln)\n         { cout &lt;&lt; \"\\n  vw_get_message  (\"\n                &lt;&lt; bf &lt;&lt; \",\" &lt;&lt;  *ln &lt;&lt; \")\"; }\n\n   }; // class F838_t\n\n}  // anonymous namespace\n\n// one line main invokes functor ---------vvvvvvvv\nint main(int argc, char* argv[]) { return F838_t()(argc, argv); }\n</code></pre>\n\n<p>Note: 142 lines,  only 14 lines of stubs</p>\n\n<hr>\n\n<p>Build output to show compiler options:</p>\n\n<pre><code>time make CC='g++ $(m) -O0 ' dumy838 ; ./dumy838\n\n&gt;&gt;&gt;cvs-tools/lmbm/src800/Makefile.i686\n\nR_exe: dumy838.cc\nrm -f dumy838\ng++ -std=c++17 -m64 -ggdb -O3 -Wall -Wextra -Wshadow -pedantic -Werror=vla \n-Wcast-align -Wcast-qual -Wconversion -Wsign-conversion -Wsign-compare \n-Wsign-promo -Wpointer-arith -Wunused -Wold-style-cast -Woverloaded-virtual\n-Wsequence-point -Wdelete-incomplete -Wmaybe-uninitialized \n-Wmisleading-indentation -Wunreachable-code -Wnon-virtual-dtor \n-MMD -MP -O0   dumy838.cc  -o dumy838 \n-L../../bag/src -lbag_i686 -lrt -pthread -lncurses -lgmpxx -lgmp\n\nreal    0m1.506s\nuser    0m1.289s\nsys 0m0.181s\n</code></pre>\n\n<hr>\n\n<p>Execution output (of stubs) including posix time measurement</p>\n\n<pre><code>  pinMode(11,10)\n  digitalWrite  (11,5)\n  digitalWrite  (11,10)\n  digitalWrite  (11,5)\n  digitalWrite  (11,10)\n\n  F838_t::exec() duration 2,000,584,200 ns    (201703)\n\nCompilation finished at Sat Dec 28 11:06:06\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 12132190, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kYcx7.png?s=128&g=1", "display_name": "Moretti", "link": "https://stackoverflow.com/users/12132190/moretti"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 122, "favorite_count": 0, "accepted_answer_id": 59513124, "answer_count": 2, "score": 0, "last_activity_date": 1617093909, "creation_date": 1577212920, "last_edit_date": 1617093909, "question_id": 59472452, "link": "https://stackoverflow.com/questions/59472452/default-label-apparently-not-working-in-switch-statement", "title": "default label apparently not working in switch statement", "body": "<p>I've seen some answers to related posts about this issue, but not exactly an answer to my problem. Here is my code:</p>\n\n<pre><code>#include &lt;VirtualWire.h&gt;\nuint8_t RFbuff[VW_MAX_MESSAGE_LEN];   \nuint8_t RFbuflen = VW_MAX_MESSAGE_LEN;\nconst int REMOTE = 0; \nString remoteScriptName(){\n  String scriptName;\n  switch(REMOTE){\n\n    case 1:\n      vw_get_message(RFbuff, &amp;RFbuflen);\n      String RFSTRBUFF = RFbuff;\n      scriptName = RFSTRBUFF; \n      delay(1200);\n      break;\n    default:\n      scriptName = \"script\"; \n      delay(500); \n    }\n  return(scriptName);\n}\n\nvoid setup() {\n  pinMode(LED_BUILTIN, HIGH);\n  switch(REMOTE){\n    case 1:\n      vw_set_rx_pin(8);\n      vw_setup(2000);\n      vw_rx_start();\n      break; \n    default: \n      digitalWrite(LED_BUILTIN, LOW); \n      delay(500);\n      digitalWrite(LED_BUILTIN, HIGH);\n      delay(500);\n      digitalWrite(LED_BUILTIN, LOW); \n      delay(500);\n      digitalWrite(LED_BUILTIN, HIGH);\n  }\n}\n\nvoid loop(){}\n</code></pre>\n\n<p>In the <code>remoteScriptName()</code> function at <code>switch(REMOTE)</code> there is <code>case:</code> and <code>default:</code>. When I upload my code to my Arduino micro it skips the <code>default</code> in <code>switch(REMOTE)</code>. \nBut then at <code>void setup</code> I have the same switch statement, but in this case (after uploading the code) it does execute <code>default:</code>!</p>\n\n<p>I don't have much experience with <code>switch()</code>, so any recommendation is well received. </p>\n"}, {"tags": ["c++", "header", "header-files"], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 11339059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/afa3716a61329028ffd355b4def3ecb9?s=128&d=identicon&r=PG&f=1", "display_name": "verk", "link": "https://stackoverflow.com/users/11339059/verk"}, "edited": false, "score": 0, "creation_date": 1577216847, "post_id": 59472753, "comment_id": 105124247, "body": "Thanks for your answer! Reading up on include guards, this makes perfect sense, and I have my example working now. I agree the name is very generic, so I&#39;ll be changing that soon."}], "tags": [], "owner": {"reputation": 5569, "user_id": 201787, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/vgB9F.jpg?s=128&g=1", "display_name": "metal", "link": "https://stackoverflow.com/users/201787/metal"}, "is_accepted": true, "score": 0, "last_activity_date": 1577215339, "creation_date": 1577215339, "answer_id": 59472753, "question_id": 59472405, "link": "https://stackoverflow.com/questions/59472405/compiling-code-using-personal-c-library-breaks-when-used-in-conjunction-with-h/59472753#59472753", "title": "Compiling code using personal C++ library breaks when used in conjunction with header files", "body": "<p>The problem is that you have the SAME include guard in both headers:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#ifndef HEADER_H\n#define HEADER_H\n</code></pre>\n\n<p>So then one of the two files -- here, <code>util.h</code> -- is being skipped because that symbol has in fact already been defined.</p>\n\n<p>May I also recommend from experience that you name the library something more unique -- say, verkutil -- with an include guard to match? My experience is that too many projects have their own <code>UTIL_H</code> symbol and similarly named files.</p>\n"}], "owner": {"reputation": 3, "user_id": 11339059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/afa3716a61329028ffd355b4def3ecb9?s=128&d=identicon&r=PG&f=1", "display_name": "verk", "link": "https://stackoverflow.com/users/11339059/verk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "accepted_answer_id": 59472753, "answer_count": 1, "score": 0, "last_activity_date": 1577215339, "creation_date": 1577212663, "question_id": 59472405, "link": "https://stackoverflow.com/questions/59472405/compiling-code-using-personal-c-library-breaks-when-used-in-conjunction-with-h", "title": "Compiling code using personal C++ library breaks when used in conjunction with header files", "body": "<p>I have some C++ utility functions I've been using across projects. \nI want to make a library out of those utilities to service projects without having to copy/paste any changes I might make.</p>\n\n<p>I can turn the single .cpp file into a library with:</p>\n\n<pre><code>$ g++ -c util.cpp\n$ ar rcs libutil.a util.o\n</code></pre>\n\n<p>and made a util.h header with all of the functions.</p>\n\n<p>This library works to compile and run a simple test.cpp, which prints a dot and the mean of a vector using the library functions: (I moved the header to ~/.local/include/ and the library to ~/.local/lib/)</p>\n\n<pre><code>$ g++ -o test test.cpp -L ~/.local/lib/ -lutil\n$ ./test\n.\n4.5\n</code></pre>\n\n<p>However, when I try to compile (parts of) a project with the library, I get \"{function} was not declared in this scope\" errors.</p>\n\n<pre><code>$ g++ -c source/linreg.cpp -L ~/.local/lib/ -lutil\n...\nlinreg.cpp:11:18: error: \u2018vecMean\u2019 was not declared in this scope\n...\n</code></pre>\n\n<p>Trying to reproduce this behavior I wrote this:</p>\n\n<pre><code>// header.h\n#ifndef HEADER_H\n#define HEADER_H\n\nvoid test();\n\n#endif\n\n// main.cpp\n#include \"header.h\"\n#include \"util.h\"\n\nint main()\n{\n    dot();\n    test();\n    return 0;\n}\n\n// test.cpp\n#include &lt;string&gt;\n#include &lt;vector&gt;\n#include &lt;iostream&gt;\n#include \"util.h\"\n#include \"header.h\"\n\nvoid test()\n{\n  dot();\n  std::vector&lt;double&gt; x;\n  for(int i = 0; i &lt; 10; ++i)\n      x.push_back(i * 1.0);\n  std::cout &lt;&lt; vecMean(x) &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>Which does not compile.\nDepending on which of the #includes precedes the other,\ndifferent errors are thrown.</p>\n\n<p>The above throws \"'dot' was not declared in this scope\",\nwhile the below throws \"'test' was not declared in this scope\"</p>\n\n<pre><code>// main.cpp\n#include \"util.h\"\n#include \"header.h\"\n...\n</code></pre>\n\n<p>This is the same kind of behavior I see when I try to compile my actual project.</p>\n\n<p>If I remove the dot() call from main.cpp the example compiles and runs fine, except when placing the util.h include statement before the header.h one (although I guess the util.h include is pointless). This leads to 'test' not being declared.</p>\n\n<p>I feel like I'm missing something obvious,\neven though the entire process of learning to set up a library has been a struggle.</p>\n\n<p>Seeing as header files appear to be part of the problem I'm adding my util.h below,\nas well as util.cpp, for good measure.</p>\n\n<pre><code>#ifndef HEADER_H\n#define HEADER_H\n\n#include &lt;vector&gt;\n#include &lt;tuple&gt;\n#include &lt;fstream&gt;\n#include &lt;string&gt;\n\n/***** utils *****/\n// smallest/largest value from a vector\nint indexSmallest(const std::vector&lt;double&gt; &amp;vec);\nint indexLargest(const std::vector&lt;double&gt; &amp;vec);\n// some vector operations\nstd::vector&lt;double&gt; sclMult(const std::vector&lt;double&gt; &amp;vec, double scl);\nstd::vector&lt;double&gt; sclAdd(const std::vector&lt;double&gt; &amp;vec, double scl);\nstd::vector&lt;double&gt; vecAdd(const std::vector&lt;double&gt; &amp;vec1, const std::vector&lt;double&gt; &amp;vec2);\nstd::vector&lt;double&gt; vecSub(const std::vector&lt;double&gt; &amp;vec1, const std::vector&lt;double&gt; &amp;vec2);\nstd::vector&lt;std::vector&lt;double&gt; &gt; vecCat(const std::vector&lt;double&gt; &amp;vec1,\n                                         const std::vector&lt;double&gt; &amp;vec2,\n                                         const std::vector&lt;double&gt; &amp;vec3);\ndouble vecMean(const std::vector&lt;double&gt; &amp;vec);\ndouble vecSum(const std::vector&lt;double&gt; &amp;vec);\n// sort two vectors of length 3 by the elements in the err vector\nstd::tuple&lt;std::vector&lt;std::vector&lt;double&gt; &gt;, std::vector&lt;double&gt; &gt;\n  sort(const std::vector&lt;std::vector&lt;double&gt; &gt; &amp;X, const std::vector&lt;double&gt; &amp;err);\n// return maximum and minimum values from vector\nstd::vector&lt;double&gt; topbot(std::vector&lt;double&gt; &amp;vec);\n// print a dot\nvoid dot(std::string str = \".\");\n// print a vector of doubles\nvoid printVec(std::vector&lt;double&gt; vec);\n// print a matrix of doubles\nvoid printMat(std::vector&lt;std::vector&lt;double&gt; &gt; mat);\n\n#endif\n</code></pre>\n\n<pre><code>#include &lt;vector&gt;\n#include &lt;tuple&gt;\n#include &lt;cmath&gt;\n#include &lt;iostream&gt;\n#include &lt;string&gt;\n\n#include \"util.h\"\n\nint indexSmallest(const std::vector&lt;double&gt; &amp;vec)\n{\n  int index = 0;\n  for(int i = 1; i &lt; vec.size(); i++)\n    {\n      if(vec[i] &lt; vec[index])\n        index = i;\n    }\n  return index;\n}\n\nint indexLargest(const std::vector&lt;double&gt; &amp;vec)\n{\n  int index = 0;\n  for(int i = 1; i &lt; vec.size(); i++)\n    {\n      if(vec[i] &gt; vec[index])\n        index = i;\n    }\n  return index;\n}\n\nstd::vector&lt;double&gt; sclMult(const std::vector&lt;double&gt; &amp;vec, double scl)\n{\n  std::vector&lt;double&gt; vvec(vec.size());\n  for(int i = 0; i &lt; vec.size(); i++){\n    vvec[i] = vec[i] * scl;\n  }\n  //printVec(vvec);\n  return vvec;\n}\nstd::vector&lt;double&gt; sclAdd(const std::vector&lt;double&gt; &amp;vec, double scl)\n{\n  std::vector&lt;double&gt; vvec(vec.size());\n  for(int i = 0; i &lt; vec.size(); i++)\n    vvec[i] = vec[i] + scl;\n  return vvec;\n}\nstd::vector&lt;double&gt; vecAdd(const std::vector&lt;double&gt; &amp;vec1, const std::vector&lt;double&gt; &amp;vec2)\n{\n  std::vector&lt;double&gt; vvec(vec1.size());\n  //std::cout &lt;&lt; \"aaaa \";\n  //printVec(vec1);\n  for(int i = 0; i &lt; vec1.size(); i++){\n    vvec[i] = (vec1[i] + vec2[i]);\n  }\n  return vvec;\n}\nstd::vector&lt;double&gt; vecSub(const std::vector&lt;double&gt; &amp;vec1, const std::vector&lt;double&gt; &amp;vec2)\n{\n  std::vector&lt;double&gt; vvec(vec1.size());\n  for(int i = 0; i &lt; vec1.size(); i++)\n    vvec[i] = (vec1[i] - vec2[i]);\n  //vvec.push_back(vec1[i] - vec2[i]);\n  return vvec;\n}\nstd::vector&lt;std::vector&lt;double&gt; &gt; vecCat(const std::vector&lt;double&gt; &amp;vec1,\n                                         const std::vector&lt;double&gt; &amp;vec2,\n                                         const std::vector&lt;double&gt; &amp;vec3)\n{\n  std::vector&lt;std::vector&lt;double&gt; &gt; vecCat(3);\n  vecCat[0] = vec1;\n  vecCat[1] = vec2;\n  vecCat[2] = vec3;\n  return vecCat;\n}\nstd::tuple&lt;std::vector&lt;std::vector&lt;double&gt; &gt;, std::vector&lt;double&gt; &gt;\nsort(const std::vector&lt;std::vector&lt;double&gt; &gt; &amp;X, const std::vector&lt;double&gt; &amp;err)\n{\n  //std::cout &lt;&lt; X.size() &lt;&lt; ' ' &lt;&lt; err.size() &lt;&lt; std::endl;\n  std::vector&lt;double&gt; sortErr(3);\n  //std::vector&lt;std::vector&lt;double&gt; &gt; sortX;\n  int small = indexSmallest(err), large = indexLargest(err);\n  if(small == large)\n    return std::make_tuple(X,err);\n  int middle = fabs(small + large - 3);\n  //std::cout &lt;&lt; small &lt;&lt; ' ' &lt;&lt; middle &lt;&lt;  ' ' &lt;&lt; large &lt;&lt; std::endl;\n  sortErr[0] = err[small];\n  sortErr[1] = err[middle];\n  sortErr[2] = err[large];\n  std::vector&lt;std::vector&lt;double&gt; &gt; sortX = vecCat(X[small],X[middle],X[large]);\n    /*  sortX[0] = X[small];\n  sortX[1] = X[middle];\n  sortX[2] = X[large];*/\n  return std::make_tuple(sortX,sortErr);\n}\n\ndouble vecMean(const std::vector&lt;double&gt; &amp;vec)\n{\n  double sum = 0;\n  for(int i = 0;i &lt; vec.size();i++){\n    sum += vec[i];\n  }\n  return sum / vec.size();\n}\ndouble vecSum(const std::vector&lt;double&gt; &amp;vec)\n{\n  double sum = 0;\n  for(int i = 0;i &lt; vec.size();i++){\n    sum += vec[i];\n  }\n  return sum;\n}\n\nvoid dot(std::string str)\n{\n  std::cout &lt;&lt; str &lt;&lt; std::endl;\n}\n\nstd::vector&lt;double&gt; topbot(std::vector&lt;double&gt; &amp;vec)\n{\n  double top = vec[0];\n  double bot = vec[0];\n  for(int i = 1; i &lt; vec.size(); ++i){\n    if(vec[i] &gt; top)\n      top = vec[i];\n    if(vec[i] &lt; bot)\n      bot = vec[i];\n  }\n  std::vector&lt;double&gt; topbot = {top,bot};\n  return topbot;\n}\n\nvoid printVec(std::vector&lt;double&gt; vec)\n{\n  for(int i = 0; i &lt; vec.size(); ++i){\n    std::cout &lt;&lt; vec[i] &lt;&lt; ',';\n  }\n  std::cout &lt;&lt; std::endl;\n}\nvoid printMat(std::vector&lt;std::vector&lt;double&gt; &gt; mat)\n{\n  for(int i = 0; i &lt; mat.size(); ++i){\n    printVec(mat[i]);\n  }\n\n}\nstd::vector&lt;double&gt; head(std::vector&lt;double&gt; vec, int n)\n{\n  std::vector&lt;double&gt; head;\n  for(int i = 0; i &lt; n; ++i)\n    head.push_back(vec[i]);\n  return head;\n}\nstd::vector&lt;double&gt; tail(std::vector&lt;double&gt; vec, int n)\n{\n  std::vector&lt;double&gt; tail;\n  for(int i = vec.size() - n; i &lt; vec.size(); ++i)\n    tail.push_back(vec[i]);\n  return tail;\n}\nstd::vector&lt;double&gt; normalize(std::vector&lt;double&gt; vec)\n{\n  std::vector&lt;double&gt; tb = topbot(vec);\n  std::vector&lt;double&gt; norm;\n  for(int i = 0; i &lt; vec.size(); ++i)\n    norm.push_back((vec[i] - tb[1]) / (tb[0] - tb[1]));\n  return norm;\n}\nstd::vector&lt;double&gt; vecLog(std::vector&lt;double&gt; vec)\n{\n  std::vector&lt;double&gt; logged;\n  for(int i = 0; i &lt; vec.size(); ++i)\n    logged.push_back(std::log(vec[i]));\n  return logged;\n}\nstd::vector&lt;double&gt; vecExp(std::vector&lt;double&gt; vec)\n{\n  std::vector&lt;double&gt; logged;\n  for(int i = 0; i &lt; vec.size(); ++i)\n    logged.push_back(std::exp(vec[i]));\n  return logged;\n}\n</code></pre>\n"}, {"tags": ["c++", "pointers", "graph", "stl"], "comments": [{"owner": {"reputation": 193, "user_id": 7927672, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/349c309560c1a72c588d75e757b651b7?s=128&d=identicon&r=PG&f=1", "display_name": "Ian4264 ", "link": "https://stackoverflow.com/users/7927672/ian4264"}, "edited": false, "score": 0, "creation_date": 1577213655, "post_id": 59472315, "comment_id": 105123495, "body": "i is an iterator, which is like a pointer into whatever is stored in your collection and when you dereference it, you a handle on the object, and in your case you have a list of edges, so gb (*I) is a reference to an edge object in the list"}, {"owner": {"reputation": 13, "user_id": 12331373, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDuBdZUlXk7KFXScgnLc60NcNIdrZumAfj9oVp9=k-s128", "display_name": "Shashank Dubey", "link": "https://stackoverflow.com/users/12331373/shashank-dubey"}, "reply_to_user": {"reputation": 193, "user_id": 7927672, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/349c309560c1a72c588d75e757b651b7?s=128&d=identicon&r=PG&f=1", "display_name": "Ian4264 ", "link": "https://stackoverflow.com/users/7927672/ian4264"}, "edited": false, "score": 0, "creation_date": 1577259890, "post_id": 59472315, "comment_id": 105130127, "body": "Ty  for the answer"}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 12331373, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDuBdZUlXk7KFXScgnLc60NcNIdrZumAfj9oVp9=k-s128", "display_name": "Shashank Dubey", "link": "https://stackoverflow.com/users/12331373/shashank-dubey"}, "edited": false, "score": 0, "creation_date": 1577213330, "post_id": 59472454, "comment_id": 105123420, "body": "i have no problem with how it is wriiten i just wanna know how (*i) is accesing class edge member functions."}, {"owner": {"reputation": 13563, "user_id": 992490, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac727873c5724326c84ed245faa9fe6c?s=128&d=identicon&r=PG", "display_name": "Marshall Clow", "link": "https://stackoverflow.com/users/992490/marshall-clow"}, "reply_to_user": {"reputation": 13, "user_id": 12331373, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDuBdZUlXk7KFXScgnLc60NcNIdrZumAfj9oVp9=k-s128", "display_name": "Shashank Dubey", "link": "https://stackoverflow.com/users/12331373/shashank-dubey"}, "edited": false, "score": 0, "creation_date": 1577223283, "post_id": 59472454, "comment_id": 105125477, "body": "<code>i</code> is an iterator; which walks through the edges in the list <code>li</code>.  <code>*i</code> is the edge that <code>i</code> &quot;points to&quot;"}, {"owner": {"reputation": 13, "user_id": 12331373, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDuBdZUlXk7KFXScgnLc60NcNIdrZumAfj9oVp9=k-s128", "display_name": "Shashank Dubey", "link": "https://stackoverflow.com/users/12331373/shashank-dubey"}, "edited": false, "score": 0, "creation_date": 1577259776, "post_id": 59472454, "comment_id": 105130114, "body": "Ty  i got my answer"}], "tags": [], "owner": {"reputation": 13563, "user_id": 992490, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac727873c5724326c84ed245faa9fe6c?s=128&d=identicon&r=PG", "display_name": "Marshall Clow", "link": "https://stackoverflow.com/users/992490/marshall-clow"}, "is_accepted": true, "score": 0, "last_activity_date": 1577212938, "creation_date": 1577212938, "answer_id": 59472454, "question_id": 59472315, "link": "https://stackoverflow.com/questions/59472315/how-does-this-creation-of-graph-using-stl-library-work/59472454#59472454", "title": "How does this creation of graph using stl library work?", "body": "<p>Break it into chunks.\nAdd whitespace:</p>\n\n<pre><code>cout &lt;&lt; \"(\" \n     &lt;&lt; c \n     &lt;&lt; \",\" \n     &lt;&lt; (*i).get_vertex() \n     &lt;&lt; \") value of this pair : \"\n     &lt;&lt; (*i).get_weight()\n     &lt;&lt; \", \";\n</code></pre>\n\n<p>Does that make more sense?</p>\n"}], "owner": {"reputation": 13, "user_id": 12331373, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDuBdZUlXk7KFXScgnLc60NcNIdrZumAfj9oVp9=k-s128", "display_name": "Shashank Dubey", "link": "https://stackoverflow.com/users/12331373/shashank-dubey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "accepted_answer_id": 59472454, "answer_count": 1, "score": 0, "last_activity_date": 1577460889, "creation_date": 1577212140, "last_edit_date": 1577460889, "question_id": 59472315, "link": "https://stackoverflow.com/questions/59472315/how-does-this-creation-of-graph-using-stl-library-work", "title": "How does this creation of graph using stl library work?", "body": "<p>I have a doubt in a line given below of this code:</p>\n\n<p><code>cout&lt;&lt;\"(\"&lt;&lt;c&lt;&lt;\",\"&lt;&lt;(*i).get_vertex()&lt;&lt;\") value of this pair : \"&lt;&lt;(*i).get_weight()&lt;&lt;\", \";</code></p>\n\n<p>How this get_vertex and get_weight work without the help of class edge object. The code compiled successfully and it's working too but I can't figure out how the above line is working. </p>\n\n<p>Output of the code is:</p>\n\n<pre><code> Pairs for 0 are -&gt; (0,1) value of this pair : 2, (0,2) value of this pair : 3, (0,3) value of this pair : 4,\n Pairs for 1 are -&gt; (1,2) value of this pair : 5, (1,0) value of this pair : 2,\n Pairs for 2 are -&gt; (2,3) value of this pair : 8, (2,1) value of this pair : 5,\n Pairs for 3 are -&gt; (3,0) value of this pair : 4, (3,2) value of this pair : 8,\n</code></pre>\n\n<p>Code is given below:</p>\n\n<pre><code>#include&lt;bits/stdc++.h&gt;\nusing namespace std;\n\nclass edge{\n\n  int weight,vertex;\n  public:\n    edge(int w , int v){\n        weight = w;\n        vertex = v;\n    }\n\n    int get_weight()const{\n        return weight;\n    }\n\n    int get_vertex()const{\n        return vertex;\n    }\n\n\n};\n\n\nint main(){\n\n    int n = 4;\n    int c = 0;\n\n    vector&lt;list&lt;edge&gt;&gt;adj(n) ;\n\n    adj[0].push_back(edge(2,1));\n    adj[0].push_back(edge(3,2));\n    adj[0].push_back(edge(4,3));\n\n\n    adj[1].push_back(edge(5,2));\n    adj[1].push_back(edge(2,0));\n\n\n    adj[2].push_back(edge(8,3));\n    adj[2].push_back(edge(5,1));\n\n    adj[3].push_back(edge(4,0));\n    adj[3].push_back(edge(8,2));\n\n\n    vector&lt;list&lt;edge&gt;&gt;:: iterator it ;\n\n    for(it=adj.begin();it!=adj.end();it++){\n\n        cout&lt;&lt;\" Pairs for \"&lt;&lt;c&lt;&lt;\" are -&gt; \";\n        list&lt;edge&gt;li = *it;\n        list&lt;edge&gt;::iterator i;\n        for(i=li.begin();i!=li.end();i++){\n\n            cout&lt;&lt;\"(\"&lt;&lt;c&lt;&lt;\",\"&lt;&lt;(*i).get_vertex()&lt;&lt;\") value of this pair : \"&lt;&lt;(*i).get_weight()&lt;&lt;\", \";\n        }\n        cout&lt;&lt;endl;\n        c++;\n    }\n\n\n}\n</code></pre>\n"}, {"tags": ["c++", "matrix", "square"], "comments": [{"owner": {"reputation": 141, "user_id": 7286877, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70fbaa62b70fa90d716a1ff1ecc32468?s=128&d=identicon&r=PG&f=1", "display_name": "vsh", "link": "https://stackoverflow.com/users/7286877/vsh"}, "edited": false, "score": 0, "creation_date": 1577211874, "post_id": 59472225, "comment_id": 105123045, "body": "convert first character to integer (atoi()), find difference between first ccoordinate for both points  - it will be length of square side. construct two other point adding this lenght"}, {"owner": {"reputation": 14893, "user_id": 4645334, "user_type": "registered", "accept_rate": 87, "profile_image": "https://lh6.googleusercontent.com/-hoIJVId9WIY/AAAAAAAAAAI/AAAAAAAAGQw/r7Es0WqE4rs/photo.jpg?sz=128", "display_name": "Thomas Sablik", "link": "https://stackoverflow.com/users/4645334/thomas-sablik"}, "edited": false, "score": 0, "creation_date": 1577212328, "post_id": 59472225, "comment_id": 105123153, "body": "<code>for (auto i = &#39;1&#39;; i &lt;= &#39;3&#39;; ++i) for (auto j = &#39;B&#39;; j &lt;= &#39;D&#39;; ++j) std::cout &lt;&lt; i &lt;&lt; j &lt;&lt; &#39; &#39;;</code>"}], "answers": [{"tags": [], "owner": {"reputation": 4082, "user_id": 4255107, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-84XHYSdES6k/AAAAAAAAAAI/AAAAAAAAAF0/BzBS4Ozwoc0/photo.jpg?sz=128", "display_name": "sonus21", "link": "https://stackoverflow.com/users/4255107/sonus21"}, "is_accepted": false, "score": 1, "last_activity_date": 1577212407, "creation_date": 1577212407, "answer_id": 59472364, "question_id": 59472225, "link": "https://stackoverflow.com/questions/59472225/how-to-print-all-the-cells-inside-a-square-when-given-the-two-opposite-coordinat/59472364#59472364", "title": "How to print all the cells inside a square when given the two opposite coordinates", "body": "<pre><code>void printSquare(string a, string b){\n\n    int start = stoi(a.substr (0, a.length()-1));   \n    int end =  stoi(b.substr (0, b.length()-1));   \n    char s = a[a.length()-1];\n    for(int i=0;i&lt;=end-start;i++){\n        for(int j=0;j&lt;=end-start;j++){\n            cout&lt;&lt;1+i &lt;&lt; char(s+j);\n        }\n        cout&lt;&lt;endl;\n    }\n\n}\n</code></pre>\n\n<p>Convert cells to an integer using <code>atoi</code> and <code>substr</code> methods. Assuming only the last character can be a string. Otherwise, we need to iterate over each character and check whether the char is between 0-9 or not.</p>\n\n<p>Once we have corners of the square iterate over the length and print that simply.</p>\n\n<p><a href=\"https://ideone.com/6OFHM1\" rel=\"nofollow noreferrer\">https://ideone.com/6OFHM1</a></p>\n"}, {"tags": [], "owner": {"reputation": 14893, "user_id": 4645334, "user_type": "registered", "accept_rate": 87, "profile_image": "https://lh6.googleusercontent.com/-hoIJVId9WIY/AAAAAAAAAAI/AAAAAAAAGQw/r7Es0WqE4rs/photo.jpg?sz=128", "display_name": "Thomas Sablik", "link": "https://stackoverflow.com/users/4645334/thomas-sablik"}, "is_accepted": true, "score": 2, "last_activity_date": 1577213969, "last_edit_date": 1577213969, "creation_date": 1577212862, "answer_id": 59472443, "question_id": 59472225, "link": "https://stackoverflow.com/questions/59472225/how-to-print-all-the-cells-inside-a-square-when-given-the-two-opposite-coordinat/59472443#59472443", "title": "How to print all the cells inside a square when given the two opposite coordinates", "body": "<p>Most systems work with ASCII. ASCII has the property that 'A'+1 == 'B', 'B'+1 == 'C' and so on. Also C++ guarantees that '0'+1 == '1', '1'+1 == '2' and so on. Therefor you can simply</p>\n\n<pre><code>void f(const std::string &amp;lhs, const std::string &amp;rhs) {\n    bool first = true;\n    for(char i = lhs[0]; i &lt;= rhs[0]; ++i) {\n        for(char j = lhs[1] ; j &lt;= rhs[1]; ++j) {\n            std::cout &lt;&lt; (first ? \"\" : \", \") &lt;&lt; i &lt;&lt; j;\n            first = false;\n        }\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 10183910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e64bd796f7f4b20e866f17ace32af7b?s=128&d=identicon&r=PG&f=1", "display_name": "user10183910", "link": "https://stackoverflow.com/users/10183910/user10183910"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "accepted_answer_id": 59472443, "answer_count": 2, "score": -1, "last_activity_date": 1577213969, "creation_date": 1577211355, "question_id": 59472225, "link": "https://stackoverflow.com/questions/59472225/how-to-print-all-the-cells-inside-a-square-when-given-the-two-opposite-coordinat", "title": "How to print all the cells inside a square when given the two opposite coordinates", "body": "<p>I have a 10x10 matrix. I have to form a square and find all the cells inside it when given the opposite coordinates of the square.\nExample\ngiven 1B,3D as the coordinates to form a square. \nI need to print 1B,1C, 1D, 2B, 2C, 2D, 3B, 3C, 3D</p>\n\n<p>Since the values are string how do I get started with this</p>\n"}]